try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d523b226-180a-44b5-9525-e35d87ca3de8",e._sentryDebugIdIdentifier="sentry-dbid-d523b226-180a-44b5-9525-e35d87ca3de8")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"4.43.1"};(self.webpackChunk=self.webpackChunk||[]).push([[1264],{41264:(e,t,n)=>{let r,o,a;n.r(t),n.d(t,{GenerativeAIType:()=>O,ModesCodeMapping:()=>E,PARAPHRASER_MODES:()=>x,deleteAllHistory:()=>di,deleteHistoryDetails:()=>_i,getAIResponse:()=>Ei,getAllHistory:()=>bi,getAllParaphrasedTexts:()=>ya,getConfig:()=>$o,getContextAwareCustomModeNames:()=>Si,getCustomModeSuggestions:()=>Ya,getDefinitions:()=>Ka,getHistoryDataFromStorage:()=>vi,getHistoryDetails:()=>yi,getHistorySentenceDataFromStorage:()=>mi,getIsEditorText:()=>de,getModeAwarePhrasalParaphraser:()=>Ba,getModeSuggestions:()=>Ha,getNonCustomModeSuggestions:()=>za,getParaphrasedText:()=>ba,getRecommendedWords:()=>ti,getRefinedCustomModeName:()=>la,getSegments:()=>ga,getSplitSentences:()=>ka,getTextToSpeech:()=>ki,getThesaurus:()=>Ua,reportText:()=>$a,setConfig:()=>Zo,setHTTPClient:()=>Le,setLoggerClient:()=>I,setParaphraseCompleteData:()=>gi,setParaphraseOutputEditData:()=>wi,setStorageClient:()=>je,setTrackerClient:()=>me,unReportText:()=>Za,updateSegments:()=>wa});var i,u,s,c,l,f,p,h,b,y,d,_,v,m,g,w,O=((g={}).WRITE_EMAIL_FOR_KEYWORDS="WRITE_EMAIL_FOR_KEYWORDS",g.WRITE_EMAIL_FOR_SUBJECT="WRITE_EMAIL_FOR_SUBJECT",g.MODIFY_WITH_KEYWORDS="MODIFY_WITH_KEYWORDS",g.REGENERATE="REGENERATE",g.AUTOCOMPLETE_EMAIL="AUTOCOMPLETE_EMAIL",g.AUTOGENERATE_REPLY="AUTOGENERATE_REPLY",g.AUTOCOMPLETE_REPLY="AUTOCOMPLETE_REPLY",g.AUTOGENERATE_REPLY_FOR_KEYWORDS="AUTOGENERATE_REPLY_FOR_KEYWORDS",g.REQUEST_A_MEETING="REQUEST_A_MEETING",g.POLITELY_DECLINE="POLITELY_DECLINE",g.BUY_TIME="BUY_TIME",g.MODIFY_BE_CONCISE="MODIFY_BE_CONCISE",g.AUTOCOMPLETE_REPLY_BE_CONCISE="AUTOCOMPLETE_REPLY_BE_CONCISE",g.ADD_A_QUOTE="ADD_A_QUOTE",g.AUTOCOMPLETE_REPLY_ADD_QUOTE="AUTOCOMPLETE_REPLY_ADD_QUOTE",g.ADD_DETAILS="ADD_DETAILS",g.AUTOCOMPLETE_REPLY_ADD_DETAILS="AUTOCOMPLETE_REPLY_ADD_DETAILS",g.SOUND_ENCOURAGING="SOUND_ENCOURAGING",g.AUTOCOMPLETE_REPLY_SOUND_ENCOURAGING="AUTOCOMPLETE_REPLY_SOUND_ENCOURAGING",g.SOUND_CASUAL="SOUND_CASUAL",g.AUTOCOMPLETE_REPLY_SOUND_CASUAL="AUTOCOMPLETE_REPLY_SOUND_CASUAL",g.SOUND_FORMAL="SOUND_FORMAL",g.AUTOCOMPLETE_REPLY_SOUND_FORMAL="AUTOCOMPLETE_REPLY_SOUND_FORMAL",g.SOUND_URGENT="SOUND_URGENT",g.AUTOCOMPLETE_REPLY_SOUND_URGENT="AUTOCOMPLETE_REPLY_SOUND_URGENT",g.SOUND_APPRECIATIVE="SOUND_APPRECIATIVE",g.AUTOCOMPLETE_REPLY_SOUND_APPRECIATIVE="AUTOCOMPLETE_REPLY_SOUND_APPRECIATIVE",g.GENERATE_SUBJECT_LINE="GENERATE_SUBJECT_LINE",g.REGENERATE_SUBJECT_LINE="REGENERATE_SUBJECT_LINE",g.EXPAND="EXPAND",g.REQUEST_A_MEETING_V2="REQUEST_A_MEETING_V2",g.ASK_FOR_TASK_UPDATE="ASK_FOR_TASK_UPDATE",g),k=((i={})[i.standard=2]="standard",i[i.fluency=0]="fluency",i[i.formal=9]="formal",i[i.simple=10]="simple",i[i.creative=6]="creative",i[i.expand=8]="expand",i[i.shorten=7]="shorten",i[i.academic=99]="academic",i[i.custom=100]="custom",i[i.custom_voice=101]="custom_voice",i[i.natural=12]="natural",i[i.basic=13]="basic",i[i.direct=16]="direct",i[i.polite=15]="polite",i),P=((u={})[u.level0=0]="level0",u[u.level1=9]="level1",u[u.level2=7]="level2",u[u.level3=4]="level3",u);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=((s={}).FLUENCY="FLUENCY",s.STANDARD="STANDARD",s.CREATIVE="CREATIVE",s.SHORTEN="SHORTEN",s.EXPAND="EXPAND",s.FORMAL="FORMAL",s.SIMPLE="SIMPLE",s.ORIGINAL="ORIGINAL",s.ACADEMIC="ACADEMIC",s.CUSTOM_MODE="CUSTOM_MODE",s.CUSTOM_VOICE="CUSTOM_VOICE",s.NATURAL="NATURAL",s.BASIC="BASIC",s.DIRECT="DIRECT",s.POLITE="POLITE",s),E=(S(w={},k.fluency,"FLUENCY"),S(w,k.standard,"STANDARD"),S(w,k.creative,"CREATIVE"),S(w,k.shorten,"SHORTEN"),S(w,k.expand,"EXPAND"),S(w,k.formal,"FORMAL"),S(w,k.simple,"SIMPLE"),S(w,k.academic,"ACADEMIC"),S(w,k.natural,"NATURAL"),S(w,k.custom,"CUSTOM_MODE"),S(w,k.custom_voice,"CUSTOM_VOICE"),S(w,k.basic,"BASIC"),S(w,k.direct,"DIRECT"),S(w,k.polite,"POLITE"),w);function j(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var T={log:console.log,info:console.info,warn:console.warn,error:console.error},I=function(e){var t;return(t=function(){var t,n,r,o;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(a){return t=e.log,n=e.info,r=e.warn,o=e.error,T.log=t,T.info=n,T.warn=r,T.error=o,[2]})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){j(a,r,o,i,u,"next",e)}function u(e){j(a,r,o,i,u,"throw",e)}i(void 0)})})()},R={\u0391:"A",\u0392:"B",\u0395:"E",\u0396:"Z",\u0397:"H",\u0399:"I",\u039a:"K",\u039c:"M",\u039d:"N",\u03bd:"v",\u039f:"O",\u03bf:"o",\u03a1:"P",\u03a4:"T",\u03a5:"Y",\u03a7:"X","\u0342":"~","\u0343":"\u2019","\u037e":";",\u0410:"A",\u0430:"a",\u0412:"B",\u0421:"C",\u0415:"E",\u0435:"e",\u041d:"H",\u04cf:"I",\u04c0:"I",\u0406:"I",\u0408:"J",\u041a:"K",\u041c:"M",\u041e:"O",\u043e:"o",\u0420:"P",\u0440:"p",\u0441:"c",\u0405:"S",\u0422:"T",\u0445:"x",\u0425:"X",\u04ae:"Y",\u04af:"y",\u0443:"y",\u0423:"Y"," \u0486":"\u2019",\u0456:"i",\u0455:"s",\u051b:"q",\u00e6:"ae",\u0153:"oe",\ufb00:"ff",\ufb01:"fi",\ufb02:"fl",\ufb03:"ffi",\ufb04:"ffl"},A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},C={exports:{}};function L(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){L(a,r,o,i,u,"next",e)}function u(e){L(a,r,o,i,u,"throw",e)}i(void 0)})}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(function(){var e,t,n=[].slice;e={0:{8:{_:"an"},9:{_:"an"},"-":{1:{1:{_:"an"}},4:{" ":{_:"a"},_:"an"},6:{"-":{_:"an"}},8:{_:"an"}}},1:{1:{0:{_:"a"},1:{_:"a"},2:{_:"a"},3:{_:"a"},4:{_:"a"},5:{_:"a"},6:{_:"a"},7:{_:"a"},8:{_:"a"},9:{_:"a"},_:"an",".":{4:{_:"a"}}},8:{0:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},_:"a"},1:{"-":{_:"a"}," ":{_:"a"}},2:{"-":{_:"a"}," ":{_:"a"}},3:{"-":{_:"a"}," ":{_:"a"}},4:{"-":{_:"a"}," ":{_:"a"}},5:{"-":{_:"a"}," ":{_:"a"}},6:{"-":{_:"a"}," ":{_:"a"}},7:{"-":{_:"a"}," ":{_:"a"}},8:{"-":{_:"a"}," ":{_:"a"}},9:{"-":{_:"a"}," ":{_:"a"}},_:"an"}},8:{0:{0:{x:{_:"a"}}},9:{0:{_:"a"}},_:"an",",":{1:{_:"a"}}},"`":{a:{_:"an"}},"\xa3":{8:{_:"an"}},"\u221e":{_:"an"},a:{" ":{_:"a"},b:{o:{u:{t:{"-":{_:"an"}},_:"a"}}},g:{a:{i:{_:"a"}}},l:{"-":{I:{_:"a"}},g:{u:{_:"a"}},t:{h:{_:"a"}}},m:{o:{n:{_:"a"}}},n:{" ":{_:"a"},d:{a:{_:"an"},e:{_:"an"},r:{_:"an"},_:"a"},o:{t:{_:"a"}},y:{w:{_:"a"}}},p:{r:{e:{_:"a"}}},r:{e:{" ":{_:"a"},":":{_:"a"}},t:{\u00ed:{_:"a"}}},_:"an"},A:{$:{_:"a"},A:{A:{_:"a"}},n:{d:{a:{l:{u:{c:{_:"a"}}}}}},r:{m:{a:{t:{_:"a"}}}},s:{t:{u:{r:{i:{a:{s:{_:"a"}}}}}}},t:{h:{l:{e:{t:{i:{_:"an"}}},o:{_:"an"},_:"a"}}},U:{$:{_:"a"},D:{_:"a"},S:{C:{_:"a"}}},_:"an"},\u00c1:{_:"an"},\u00e1:{";":{_:"an"}},\u00e0:{_:"an"},\u00c4:{_:"an"},\u0101:{_:"an"},\u00c5:{_:"an"},\u00e6:{_:"an"},\u00c6:{n:{_:"a"},_:"an"},D:{\u00fa:{n:{_:"a"}}},e:{".":{g:{_:"a"}},a:{c:{h:{" ":{_:"a"}}}},i:{t:{h:{e:{r:{" ":{_:"a"},".":{_:"a"}}}}}},l:{"-":{_:"a"},l:{a:{_:"a"}}},m:{p:{e:{z:{_:"a"}}}},n:{o:{u:{g:{_:"a"}}}},u:{p:{" ":{_:"an"}},_:"a"},w:{_:"a"},x:{i:{s:{t:{s:{_:"a"}}}}},_:"an"},E:{m:{p:{e:{z:{_:"a"}}}},n:{a:{m:{_:"a"}}},s:{p:{a:{d:{_:"an"}},e:{_:"an"},o:{_:"an"},_:"a"}},u:{l:{_:"an"},_:"a"},U:{R:{_:"a"}},_:"an"},\u00e9:{g:{_:"a"},t:{a:{_:"an"},u:{_:"an"},_:"a"},_:"an"},\u00c9:{_:"an"},f:{"-":{_:"an"}," ":{_:"an"},"/":{_:"an"},M:{_:"an"},p:{_:"an"},t:{_:"an"}},F:{0:{_:"an"},1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"#":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},"\u201d":{_:"an"},A:{C:{_:"a"},D:{_:"a"},I:{R:{_:"a"}},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},Q:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},c:{_:"an"},D:{_:"an"},E:{C:{_:"an"},I:{_:"an"}},F:{" ":{_:"a"},_:"an"},f:{_:"an"},h:{_:"an"},H:{_:"an"},I:{A:{T:{_:"a"},_:"an"},D:{" ":{_:"an"}},R:{" ":{_:"an"}},S:{" ":{_:"an"}}},K:{_:"an"},L:{C:{_:"an"},N:{_:"an"},P:{_:"an"}},M:{R:{_:"a"},_:"an"},O:{" ":{_:"an"},I:{" ":{_:"an"}}},P:{".":{_:"a"},"?":{_:"a"},C:{"?":{_:"a"}},_:"an"},R:{C:{_:"an"},S:{_:"an"}},S:{_:"an"},T:{S:{_:"a"},T:{_:"a"},_:"an"},U:{" ":{_:"an"},",":{_:"an"},".":{_:"an"}},V:{_:"an"},W:{D:{_:"a"},_:"an"},X:{_:"an"},Y:{_:"an"},\u03c3:{_:"an"}},G:{h:{a:{e:{_:"an"},i:{_:"an"}}}},h:{"'":{_:"an"},"-":{U:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},C:{_:"an"},e:{i:{r:{a:{_:"a"},_:"an"}}},i:{m:{s:{_:"an"}},s:{t:{o:{r:{i:{c:{_:"a"}}}}}}},o:{m:{a:{_:"an"},m:{_:"an"}},n:{e:{y:{_:"a"}},k:{_:"a"},v:{_:"a"},_:"an"},r:{s:{" ":{_:"an"}}},u:{r:{_:"an"}}},t:{t:{p:{" ":{_:"an"}},_:"a"},_:"an"}},H:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{_:"a"},_:"an"},"+":{_:"an"},a:{b:{i:{l:{i:{t:{a:{t:{i:{o:{n:{s:{_:"an"}}}}}}}}}}}},B:{_:"an"},C:{_:"an"},D:{B:{_:"a"},_:"an"},e:{i:{r:{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{D:{_:"a"},G:{_:"a"},M:{_:"a"},P:{_:"a"},_:"an"},L:{A:{"-":{D:{_:"a"}}},_:"an"},M:{_:"an"},N:{_:"an"},o:{n:{d:{_:"a"},e:{s:{_:"an"},_:"a"},g:{_:"a"},k:{_:"a"},o:{l:{_:"a"}},_:"an"},u:{r:{_:"an"}}},O:{" ":{_:"an"},V:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{T:{_:"a"},_:"an"},S:{" ":{_:"a"},R:{_:"a"},T:{_:"a"},_:"an"},T:{P:{_:"a"},_:"an"},V:{_:"an"},W:{T:{_:"an"}}},i:{".":{e:{_:"a"}},b:{n:{_:"a"}},f:{" ":{_:"a"}},i:{_:"a"},n:{c:{l:{u:{d:{i:{_:"a"}}}}},d:{i:{c:{a:{t:{e:{s:{_:"a"}}}}}}},s:{t:{e:{a:{d:{"?":{_:"an"}},_:"a"}}}}},s:{" ":{_:"a"},".":{_:"a"}},t:{" ":{_:"a"}},u:{_:"a"},_:"an"},I:{"-":{A:{_:"a"},I:{_:"a"}},I:{I:{_:"a"}},l:{b:{_:"a"}},M:{H:{_:"a"}},m:{a:{m:{s:{_:"a"}}}},R:{"\xa3":{_:"a"}},s:{l:{a:{m:{" ":{_:"a"},",":{_:"a"},".":{_:"a"}},n:{d:{s:{_:"a"}}}}}},_:"an"},\u0130:{_:"an"},J:{i:{a:{n:{_:"a"},_:"an"}}},k:{u:{" ":{_:"an"}}},l:{" ":{_:"an"},'"':{_:"an"},p:{_:"an"}},L:{1:{_:"an"},2:{_:"an"},3:{_:"an"},5:{_:"an"},"'":{A:{_:"a"},_:"an"},"-":{a:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{_:"an"},"/":{_:"an"},a:{e:{_:"an"},o:{i:{g:{_:"an"}}}},A:{" ":{_:"an"},L:{_:"an"},P:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"a"},E:{_:"a"},G:{_:"a"},O:{_:"a"},P:{_:"a"},T:{_:"a"},_:"an"},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{R:{_:"an"}},L:{_:"an"},M:{X:{_:"a"},_:"an"},N:{_:"an"},o:{c:{h:{a:{_:"an"}}}},O:{E:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},T:{_:"an"},U:{" ":{_:"an"}},V:{_:"an"},X:{_:"an"},Z:{_:"an"}},m:{"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},a:{k:{e:{s:{" ":{_:"an"}}}}},b:{_:"an"},e:{i:{n:{_:"an"}},n:{t:{i:{o:{n:{s:{_:"an"}}}}}}},f:{_:"an"},p:{_:"an"},R:{_:"an"},t:{_:"an"}},M:{1:{9:{0:{_:"an"},_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},7:{_:"an"},8:{_:"an"},9:{_:"an"},"'":{_:"an"},"-":{t:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{A:{".":{S:{_:"a"}}},_:"an"},"/":{_:"an"},A:{C:{_:"a"},D:{_:"a"},F:{_:"a"},G:{_:"a"},J:{_:"a"},L:{_:"a"},M:{_:"a"},N:{_:"a"},P:{_:"a"},R:{_:"a"},S:{_:"a"},T:{_:"a"},X:{_:"a"},Y:{_:"a"},_:"an"},B:{_:"an"},C:{_:"an"},D:{_:"an"},e:{"-":{_:"an"}},E:{d:{_:"an"},n:{_:"an"},P:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{_:"an"},h:{_:"an"},i:{e:{_:"an"}},I:{5:{_:"an"},6:{_:"an"}," ":{_:"an"},A:{_:"an"},T:{_:"an"}},K:{_:"an"},L:{_:"an"},M:{T:{_:"a"},_:"an"},N:{_:"an"},o:{U:{_:"an"}},O:{" ":{_:"an"},T:{" ":{_:"an"}},U:{_:"an"}},P:{_:"an"},R:{_:"an"},S:{_:"an"},s:{c:{_:"an"}},T:{R:{_:"a"},_:"an"},U:{V:{_:"an"}},V:{_:"an"},X:{_:"an"}},N:{4:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{a:{_:"a"},S:{_:"a"},_:"an"}," ":{_:"an"},'"':{_:"an"},",":{_:"an"},".":{Y:{_:"a"},_:"an"},"=":{_:"an"},"\xb2":{_:"an"},a:{o:{_:"an"}},A:{" ":{_:"an"},A:{F:{_:"a"},_:"an"},I:{_:"an"},S:{L:{_:"an"}}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{A:{_:"an"},H:{_:"an"},S:{" ":{_:"an"}}},F:{_:"an"},G:{_:"an"},H:{_:"an"},I:{C:{_:"a"},L:{_:"a"},M:{H:{_:"an"},_:"a"},N:{_:"a"},S:{_:"a"},_:"an"},J:{C:{_:"an"}},K:{_:"an"},L:{S:{_:"a"},_:"an"},M:{_:"an"},N:{R:{_:"an"},T:{_:"an"}},P:{O:{V:{"-":{_:"an"}},_:"a"},_:"an"},R:{J:{_:"a"},T:{_:"a"},_:"an"},S:{W:{_:"a"},_:"an"},T:{$:{_:"a"},_:"an"},U:{S:{_:"an"}},V:{_:"an"},v:{_:"an"},W:{A:{_:"an"}},X:{_:"an"},Y:{P:{_:"an"},U:{_:"an"}}},n:{"-":{_:"an"},"\u2212":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},"+":{_:"an"},"\xd7":{_:"an"},d:{a:{_:"an"}},p:{a:{_:"an"}},t:{_:"an"},V:{_:"an"},W:{_:"an"}},o:{b:{r:{_:"a"}},c:{c:{u:{r:{s:{_:"a"}}}},h:{o:{_:"a"}}},f:{" ":{_:"a"}},n:{"-":{_:"an"},"/":{_:"an"},b:{_:"an"},c:{o:{_:"an"}},d:{_:"an"},e:{r:{_:"an"}},g:{_:"an"},i:{_:"an"},l:{_:"an"},m:{_:"an"},o:{_:"an"},r:{_:"an"},s:{_:"an"},t:{_:"an"},u:{_:"an"},w:{_:"an"},y:{_:"an"},_:"a"},r:{" ":{_:"a"},",":{_:"a"}},u:{i:{_:"a"}},_:"an"},O:{b:{e:{r:{s:{t:{" ":{_:"an"},l:{_:"an"}},_:"a"}}}},l:{v:{_:"a"}},n:{e:{i:{_:"an"},_:"a"}},N:{E:{_:"a"}},o:{p:{_:"a"}},u:{i:{_:"a"}},_:"an"},\u00d3:{_:"an"},\u00d6:{_:"an"},\u00f6:{_:"an"},\u014c:{_:"an"},\u014d:{_:"an"},P:{h:{o:{b:{_:"an"},i:{_:"an"}}}},r:{"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},".":{_:"an"},e:{f:{e:{r:{s:{_:"an"}}}}},f:{_:"an"},m:{_:"an"},s:{_:"an"}},R:{1:{0:{_:"a"},_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{_:"an"},",":{_:"an"},".":{C:{_:"a"},_:"an"},"/":{_:"an"},A:{" ":{_:"an"},F:{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},E:{" ":{_:"an"},R:{_:"an"}},F:{_:"an"},f:{_:"an"},G:{_:"an"},H:{S:{_:"an"}},I:{A:{_:"an"},C:{" ":{_:"an"}}},J:{_:"an"},K:{_:"an"},L:{" ":{_:"a"},_:"an"},M:{1:{_:"a"},_:"an"},N:{G:{_:"a"},_:"an"},O:{T:{_:"an"}},P:{_:"an"},Q:{_:"an"},R:{_:"an"},S:{" ":{_:"a"},")":{_:"a"},",":{_:"a"},".":{_:"a"},"?":{_:"a"},T:{_:"a"},_:"an"},T:{_:"an"},U:{_:"an"},V:{_:"an"},X:{_:"an"}},s:{"-":{_:"an"},'"':{_:"an"},")":{_:"an"},",":{_:"an"},".":{_:"an"},a:{y:{s:{_:"an"}}},i:{c:{h:{_:"an"}}},p:{3:{_:"an"},r:{o:{t:{_:"an"}}}},s:{h:{_:"an"}},t:{a:{t:{e:{s:{" ":{_:"an"},":":{_:"an"}}}}}},v:{a:{_:"a"},e:{_:"a"},_:"an"}},S:{1:{_:"an"},2:{_:"an"},3:{_:"an"},4:{_:"an"},5:{_:"an"},6:{_:"an"},"'":{_:"an"},"-":{_:"an"}," ":{_:"an"},'"':{_:"an"},"&":{W:{_:"a"},_:"an"},",":{_:"an"},".":{B:{_:"an"},M:{_:"an"},O:{_:"an"}},"\u201d":{_:"an"},A:{"-":{1:{_:"a"},_:"an"}," ":{_:"an"},C:{D:{_:"an"}},E:{_:"an"},S:{E:{_:"a"},_:"an"},T:{" ":{_:"an"},B:{_:"an"}}},B:{_:"an"},C:{A:{" ":{_:"an"}},C:{_:"an"},M:{_:"an"},O:{" ":{_:"an"}},R:{A:{_:"a"},_:"an"},T:{_:"an"}},D:{_:"an"},E:{" ":{_:"an"},C:{O:{_:"a"},R:{_:"a"},_:"an"},I:{_:"an"},O:{_:"an"}},F:{_:"an"},G:{_:"an"},H:{2:{_:"an"},3:{_:"an"},"-":{_:"an"}},I:{" ":{_:"an"}},J:{_:"an"},K:{_:"an"},L:{A:{_:"a"},I:{_:"a"},O:{_:"a"},_:"an"},M:{A:{_:"a"},E:{" ":{_:"an"},_:"a"},I:{_:"a"},_:"an"},N:{A:{_:"a"},E:{_:"a"},O:{_:"a"},_:"an"},O:{"(":{_:"an"},A:{" ":{_:"an"},I:{_:"an"}},E:{_:"an"},I:{_:"an"},S:{_:"an"},V:{_:"an"}},P:{A:{C:{_:"a"},D:{_:"a"},M:{_:"a"},N:{_:"a"},R:{_:"a"}},E:{" ":{_:"an"},_:"a"},I:{C:{_:"a"}},O:{_:"a"},U:{_:"a"},_:"an"},R:{_:"an"},S:{_:"an"},T:{"-":{_:"an"},A:{" ":{_:"an"}},B:{_:"an"},C:{_:"an"},D:{_:"an"},F:{_:"an"},L:{_:"an"},M:{_:"an"},S:{_:"an"},V:{_:"an"}},u:{r:{a:{" ":{_:"an"}}}},U:{B:{_:"a"},L:{_:"a"},N:{_:"a"},P:{_:"a"},S:{_:"a"},_:"an"},V:{_:"an"},W:{F:{_:"an"},P:{_:"an"},R:{_:"an"}},X:{S:{_:"a"},_:"an"}},t:{"-":{S:{_:"an"}},S:{_:"an"}},T:{a:{v:{e:{s:{_:"an"}}}},\u00e0:{_:"an"}},u:{"-":{_:"a"}," ":{_:"a"},'"':{_:"a"},".":{_:"a"},b:{e:{_:"an"},_:"a"},f:{_:"a"},k:{a:{_:"an"},_:"a"},l:{u:{_:"a"}},m:{" ":{_:"a"}},n:{" ":{_:"a"},a:{" ":{_:"a"},n:{a:{_:"an"},n:{_:"an"},s:{_:"an"},t:{_:"an"},_:"a"},r:{y:{_:"a"}}},e:{" ":{_:"a"}},i:{c:{o:{r:{p:{_:"an"}}}},d:{i:{_:"a"},_:"an"},m:{o:{_:"a"},_:"an"},n:{_:"an"},v:{o:{_:"an"}},_:"a"},l:{e:{s:{_:"a"}}}},p:{o:{_:"a"}},r:{a:{_:"a"},e:{_:"a"},i:{_:"a"},l:{_:"a"},o:{_:"a"}},s:{"-":{_:"an"}," ":{_:"an"},h:{_:"an"},_:"a"},t:{m:{_:"an"},t:{_:"an"},_:"a"},v:{_:"a"},w:{_:"a"},_:"an"},U:{1:{_:"an"},"-":{B:{o:{_:"a"},_:"an"}},a:{_:"an"},b:{i:{_:"a"},_:"an"},D:{P:{"-":{_:"an"}}},d:{_:"an"},g:{l:{_:"an"}},h:{_:"an"},i:{_:"an"},l:{i:{_:"a"},_:"an"},m:{_:"an"},M:{N:{_:"an"}},n:{"-":{_:"an"},a:{n:{_:"a"},_:"an"},b:{_:"an"},c:{_:"an"},d:{_:"an"},e:{s:{_:"a"},_:"an"},f:{_:"an"},g:{_:"an"},h:{_:"an"},i:{d:{_:"an"},n:{_:"an"}},k:{_:"an"},l:{_:"an"},m:{_:"an"},n:{_:"an"},o:{_:"an"},p:{_:"an"},r:{_:"an"},s:{_:"an"},t:{e:{r:{s:{_:"a"}}},_:"an"},u:{_:"an"},w:{_:"an"}},p:{_:"an"},r:{a:{_:"a"},i:{_:"a"},u:{g:{u:{a:{y:{a:{n:{"-":{_:"an"}}}}}}},k:{_:"an"},_:"a"},_:"an"},s:{h:{_:"an"},t:{_:"an"}},t:{n:{_:"an"},o:{"-":{_:"an"}},r:{_:"an"},t:{_:"an"}},x:{_:"an"},z:{_:"an"}},\u00fc:{_:"an"},\u00dc:{_:"an"},V:{I:{I:{_:"an"}}},x:{a:{_:"a"},e:{_:"a"},i:{_:"a"},o:{_:"a"},x:{_:"a"},y:{_:"a"},_:"an"},X:{a:{_:"a"},A:{_:"a"},e:{_:"a"},h:{_:"a"},i:{_:"a"},I:{V:{_:"a"},X:{_:"a"}},o:{_:"a"},u:{_:"a"},U:{_:"a"},V:{_:"a"},X:{" ":{_:"an"},_:"a"},y:{_:"a"},_:"an"},Y:{p:{_:"an"}},\u03b1:{_:"an"},\u03b5:{_:"an"},\u03c9:{_:"an"}},C.exports={find:t=function(n,r,o){var a;return null==r&&(r=e),null==o&&(o="a"),null==n?o:(r=r[a=n.slice(0,1)],null!=a&&null!=r?t(n.slice(1),r,r._||o):o)},articlize:function(){var e,r,o;return r=1<=arguments.length?n.call(arguments,0):[],o=function(){var n,o,a;for(n=0,a=[],o=r.length;n<o;n++)null!=(e=r[n])&&a.push(t(e)+" "+e);return a}(),1===r.length?o[0]:o}}}).call(A);var U=/[\r\n ]+$/,G=/\([a-zA-Z0-9,.\[\]\"\;\-\-\:\& ]*[0-9]*[a-zA-Z0-9,.\[\]\"\;\-\u2013\:\& ]*\)[.,]*$/,B=/\.[\[[a-zA-Z0-9]+\]]*$/,F=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"parseNewline",value:function(e){var t,n=e.pre,r=e.text,o=e.post;return{pre:n,text:r.replace(U,""),post:((null==(t=U.exec(r))?void 0:t.join())||"")+o}}},{key:"parseCitation",value:function(e){var t,n=e.pre,r=e.text,o=e.post;return this.parseNewline({pre:n,text:r.replace(G,""),post:((null==(t=G.exec(r))?void 0:t.join())||"")+o})}},{key:"parseWIKICitations",value:function(e){var t,n=e.pre,r=e.text,o=e.post;return this.parseNewline({pre:n,text:r.replace(B,""),post:((null==(t=B.exec(r))?void 0:t.join())||"")+o})}},{key:"replaceWordAtPosition",value:function(e,t,n,r){var o=0;return e.replace(RegExp(t,"g"),function(e){return++o===r?n:e})}},{key:"anFix",value:function(e,t){try{if(t>=1){var n=e[t-1],r=n.displayText.split(" ").slice(-1)[0],o=-1!==["a","e","i","o","u"].indexOf(e[t].displayText[0].toLowerCase());o&&"a"===r?n.displayText=n.displayText.split(" ").slice(0,-1).concat("an").join(" "):o||"an"!==r||(n.displayText=n.displayText.split(" ").slice(0,-1).concat("a").join(" "))}}catch(e){T.error("crashed on the a/an fix",e)}}},{key:"profaneWordCheck",value:function(e){return D(function(){return M(this,function(e){return[2,!1]})})()}},{key:"textToPhrases",value:function(e){var n=e.inputText,r=e.text,o=t.getEachWordProperties(n,r);return o.map(function(e,t){return{text:e.word,displayText:e.word,pre:"",post:"",whitespace:t===o.length-1?"":" ",types:[{under:null==e?void 0:e.under,different:null==e?void 0:e.different,inLongestSubstr:null==e?void 0:e.inLongestSubstr}]}})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function W(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function V(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){W(a,r,o,i,u,"next",e)}function u(e){W(a,r,o,i,u,"throw",e)}i(void 0)})}}function H(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}N(F,"preProcessTextSanitisation",function(e){return e}),N(F,"splitWordAndPostWord",function(e){var t,n=/[a-z,0-9]*/i;return{mainWord:(null==(t=n.exec(e))?void 0:t.join())||"",postWord:e.replace(n,"")}}),N(F,"postProcessTextSanitisation",function(e){return D(function(){return M(this,function(t){switch(t.label){case 0:return[4,z.get("INPUT_LANGUAGE")];case 1:return"en"===t.sent()&&(e=F.handleArticles(e)),[2,e]}})})()}),N(F,"handleArticles",function(e){for(var t=e.split(" "),n="",r=0;r<t.length-1;r+=1){var o=t[r];if("a"===o||"an"===o){var a=t[r+1],i=C.exports.articlize(a).split(" ")[0];n+="".concat(i," ")}else n+="".concat(o," ")}return n+t[t.length-1]}),N(F,"checkCyrillicCharacters",function(e){for(var t=e,n=0;n<e.length;n++)R&&R[e[n]]&&(t=e.replace(e[n],R[e[n]]));return t}),N(F,"chunkSubstr",function(e,t){for(var n=Math.ceil(e.length/t),r=Array(n),o=0,a=0;o<n;o+=1,a+=t)r[o]=e.substr(a,t);return r}),N(F,"longestCommonSubstring",function(e,t){var n,r,o,a=[],i=0,u=-1;for(n=0;n<e.length;n+=1)for(r=0,a[n]=[];r<t.length;r+=1)e.charAt(n)===t.charAt(r)?a[n][r]=n>0&&r>0?a[n-1][r-1]+1:1:a[n][r]=0,a[n][r]>i&&(i=a[n][r],u=n);return i>0?(o=u-i+1,e.substr(o,i)):""}),N(F,"checkNumberOfWords",function(e,t){for(var n=t;n<e.length&&e[n].inLongestSubstr;n++);return n-t}),N(F,"markLongestSubString",function(e,t){e=e.toLowerCase();var n=t.map(function(e){return e.word.toLowerCase()}).join(" "),r=n.slice(),o=e.slice(),a="";if(e.length>2500){for(var i=F.chunkSubstr(e,1e3),u=F.chunkSubstr(n,1e3),s="",c=0;c<Math.min(i.length,u.length);c++){var l=i[c],f=u[c];(a=F.longestCommonSubstring(l,f).trim()).length>s.length&&(s=a)}a=s}else a=F.longestCommonSubstring(e,n).trim();e=o;var p=(n=r).indexOf(a),h=p+a.length;if(-1===p)return t;var b=0;t.forEach(function(e){var t=e.word.length,n=b,r=b+t;(b+=t)>=p&&b-t<=h&&(e.inLongestSubstr=!0,p>n&&(e.inLongestSubstr=!1),h<r&&(e.inLongestSubstr=!1)),b+=1});for(var y=-1,d=0;d<t.length;d++)y>0?(y-=1,t[d].inLongestSubstr=!1):t[d].inLongestSubstr&&(F.checkNumberOfWords(t,d)>=4?d+=F.checkNumberOfWords(t,d):(y=F.checkNumberOfWords(t,d),t[d].inLongestSubstr=!1,y-=1));return t}),N(F,"makeUnderlines",function(e,t){var n=["a","the","of","on","is","to","with","if","and","by","it","be","are","at","from","as"],r=e.replace(/([.?,*+^$[\]\\(){}|-])/g," $1").split(" ").map(function(e){return e.toLowerCase()}),o=[],a={};r.forEach(function(e){a[e]=0});for(var i=0;i<t.length;i++){var u=t[i].word.toLowerCase(),s=-1;a[u]?r.slice(a[u]).includes(u)&&(s=r.indexOf(u,a[u])):r.includes(u)&&(s=r.indexOf(u)),o.push(s),a[u]=Math.max(s+1,0)}for(var c=[],l=0,f=t.length,p=0;f>0&&!((p+=1)>2e4);){var h=o[l],b=[h,h];if(1!==h)for(var y=o[l],d=l+1;d<t.length;d++){var _=o[d];if(-1!==_){if(_!==y+1)break;b[1]=o[d],y=_}}var v=b[1]-b[0];l+=v+1,f-=v+1,c.push(b)}var m=-1,g=-1,w=[],O=0;for(c.forEach(function(e){var r=e[0],a=e[1];if(-1!==r){if(r>m)return m=r,void(g=a);if(a-r!=0||!(g-r>10)){var i=o.indexOf(m),u=o.indexOf(a);if(a-r!=0||!n.includes(t[u].word)){for(var s=0;-1===c[O+1][0]&&!((s+=1)>2e4);)u+=1,O+=1;w.push([i,u]),O+=1}}}}),l=0;l<t.length;l++){for(var k=!1,P=0;P<w.length;P++){var S=w[P];l>=S[0]&&l<=S[1]&&(k=!0)}t[l].under=k}return t}),N(F,"markDifferent",function(e,t){var n=e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return t.forEach(function(e){var t=e.word;t=(t=t.replace("'s","")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),e.different=!n.includes(t)}),t}),N(F,"maskPlaceholders",function(e){var t={};return{maskedText:e.replace(/\[[\w\d\s'/,]+\]/g,function(e){var n="__PLACEHOLDER__".concat(Object.keys(t).length,"__");return t[n]=e,n}),placeholders:t}}),N(F,"unMaskPlaceholders",function(e,t){var n=e.match(/__PLACEHOLDER__(\d+)__/g);return n&&(e=e.replace(n[0],t[n[0]])),{unMaskedWord:e,hadPlaceholder:!!n}}),N(F,"getEachWordProperties",function(e,t,n){var r,o=(n||{}).preservePlaceholder,a=t,i={};o&&(a=(r=F.maskPlaceholders(t)).maskedText,i=r.placeholders);var u=a.split(" ").map(function(e,t){var n,r=!1;return o&&(e=(n=F.unMaskPlaceholders(e,i)).unMaskedWord,r=n.hadPlaceholder),{word:e,index:t,placeholder:r}});return u=F.markLongestSubString(e,u),u=F.makeUnderlines(e,u),F.markDifferent(e,u)});var Y=new Map;Y.set("IS_PREMIUM_USER","false"),Y.set("REGIONAL_LANGUAGE",""),Y.set("INPUT_LANGUAGE","en"),Y.set("PARAPHRASE_QUOTATION","true"),Y.set("USE_CONTRACTION","false"),Y.set("PREFER_ACTIVE_VOICE","false"),Y.set("SENTENCE_SPLIT_LEVEL","sentence"),Y.set("ENABLE_MODE_AWARE_PHRASAL_PARAPHRASE","false");var z=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"get",value:function(e){return V(function(){return H(this,function(t){return[2,Y.get(e)]})})()}},{key:"set",value:function(e,t){return V(function(){return H(this,function(n){return[2,Y.set(e,t)]})})()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();let q=new WeakMap,K=new WeakMap,J=new WeakMap,Q=new WeakMap,X=new WeakMap,$={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return K.get(e);if("objectStoreNames"===t)return e.objectStoreNames||J.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Z(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Z(e){if(e instanceof IDBRequest){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{t(Z(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&q.set(t,e)}).catch(()=>{}),X.set(t,e),t}if(Q.has(e))return Q.get(e);let t=function(e){return"function"==typeof e?e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ee(this),t),Z(q.get(this))}:function(...t){return Z(e.apply(ee(this),t))}:function(t,...n){let r=e.call(ee(this),t,...n);return J.set(r,t.sort?t.sort():[t]),Z(r)}:(e instanceof IDBTransaction&&function(e){if(K.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});K.set(e,t)}(e),((e,t)=>t.some(t=>e instanceof t))(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,$):e)}(e);return t!==e&&(Q.set(e,t),X.set(t,e)),t}let ee=e=>X.get(e),te=["get","getKey","getAll","getAllKeys","count"],ne=["put","add","delete","clear"],re=new Map;function oe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(re.get(t))return re.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,o=ne.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!te.includes(n))return;let a=async function(e,...t){let a=this.transaction(e,o?"readwrite":"readonly"),i=a.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),o&&a.done]))[0]};return re.set(t,a),a}function ae(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ie(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ae(a,r,o,i,u,"next",e)}function u(e){ae(a,r,o,i,u,"throw",e)}i(void 0)})}}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}$={...a=$,get:(e,t,n)=>oe(e,t)||a.get(e,t,n),has:(e,t)=>!!oe(e,t)||a.has(e,t)};var ce=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");ue(this,"dbPromise",void 0),ue(this,"isAvailable","undefined"!=typeof indexedDB),this.isAvailable?this.dbPromise=function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){let i=indexedDB.open(e,1),u=Z(i);return r&&i.addEventListener("upgradeneeded",e=>{r(Z(i.result),e.oldVersion,e.newVersion,Z(i.transaction))}),n&&i.addEventListener("blocked",()=>n()),u.then(e=>{a&&e.addEventListener("close",()=>a()),o&&e.addEventListener("versionchange",()=>o())}).catch(()=>{}),u}("product-pphr",0,{upgrade:function(e){e.createObjectStore("cache").createIndex("date","date")}}):this.dbPromise=Promise.resolve(null)}return e=[{key:"get",value:function(e){return ie(function(){var t;return se(this,function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[2,null==(t=n.sent())?void 0:t.get("cache",e).then(function(e){return null==e?void 0:e.data})]}})}).call(this)}},{key:"set",value:function(e,t){return ie(function(){var n;return se(this,function(r){switch(r.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(n=r.sent())?void 0:n.put("cache",{data:t,date:+(new Date).setHours(0,0,0,0)},e)];case 2:return r.sent(),[2]}})}).call(this)}},{key:"delete",value:function(e){return ie(function(){var t;return se(this,function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(t=n.sent())?void 0:t.delete("cache",e)];case 2:return n.sent(),[2]}})}).call(this)}},{key:"deleteOldData",value:function(){return ie(function(){var e,t,n,r,o,a,i,u;return se(this,function(s){switch(s.label){case 0:return s.trys.push([0,7,,8]),t=+(new Date).setDate((new Date).getDate()-10),[4,this.dbPromise];case 1:return o=null==(r=null==(n=null==(e=s.sent())?void 0:e.transaction("cache"))?void 0:n.store)?void 0:r.index("date"),a=IDBKeyRange.upperBound(t),[4,null==o?void 0:o.openKeyCursor(a)];case 2:i=s.sent(),s.label=3;case 3:return i?[4,this.dbPromise]:[3,6];case 4:return null==(u=s.sent())||u.delete("cache",i.primaryKey),[4,i.continue()];case 5:return i=s.sent(),[3,3];case 6:return[3,8];case 7:return s.sent(),[3,8];case 8:return[2]}})}).call(this)}},{key:"clear",value:function(){return ie(function(){var e;return se(this,function(t){switch(t.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(e=t.sent())?void 0:e.clear("cache")];case 2:return t.sent(),[2]}})}).call(this)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function le(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fe(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){le(a,r,o,i,u,"next",e)}function u(e){le(a,r,o,i,u,"throw",e)}i(void 0)})}}function pe(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var he=new Map,be=function(){var e;function t(){var e;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");(e="isAvailable")in this?Object.defineProperty(this,e,{value:!0,enumerable:!0,configurable:!0,writable:!0}):this[e]=!0}return e=[{key:"get",value:function(e){return fe(function(){return pe(this,function(t){return[2,he.get(e)]})})()}},{key:"set",value:function(e,t){return fe(function(){return pe(this,function(n){switch(n.label){case 0:return[4,he.set(e,t)];case 1:return n.sent(),[2]}})})()}},{key:"delete",value:function(e){return fe(function(){return pe(this,function(t){switch(t.label){case 0:return[4,he.delete(e)];case 1:return t.sent(),[2]}})})()}},{key:"clear",value:function(){return fe(function(){return pe(this,function(e){switch(e.label){case 0:return[4,he.clear()];case 1:return e.sent(),[2]}})})()}},{key:"deleteOldData",value:function(){return fe(function(){return pe(this,function(e){return[2]})})()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),ye=function(e,t,n){if("number"!=typeof n||n<=0)throw Error("timedPromise: Encountered invalid timeout value. Got ".concat(n));return new Promise(function(r,o){var a=setTimeout(function(){r({timedOut:!0,value:t})},n);e.then(function(e){clearTimeout(a),r({timedOut:!1,value:e})}).catch(function(e){clearTimeout(a),o(e)})})},de=function(e){var t=e.sentences,n=e.inputText;return(null==n?void 0:n.trim().length)>0||t.length>0};function _e(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var ve={logEvent:function(){}},me=function(e){var t;return(t=function(){return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){return ve.logEvent=e.logEvent,[2]})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){_e(a,r,o,i,u,"next",e)}function u(e){_e(a,r,o,i,u,"throw",e)}i(void 0)})})()};function ge(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function we(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ge(a,r,o,i,u,"next",e)}function u(e){ge(a,r,o,i,u,"throw",e)}i(void 0)})}}function Oe(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ke=new be,Pe=!1,Se="";we(function(){var e,t;return Oe(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ye((e=new ce).dbPromise,null,3e3)];case 1:return t=n.sent(),e.isAvailable&&t.value?(e.deleteOldData(),ke=e):(Pe=!0,Se=t?"dbNA":"timedOut"),[3,3];case 2:return n.sent(),Pe=!0,Se="error",ke=new be,[3,3];case 3:return[2]}})})();var xe=function(){Pe&&(ve.logEvent("db_connection_timedout",{errorType:Se}),Pe=!1)},Ee={get:function(e){return we(function(){var t,n,r,o,a;return Oe(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),xe(),[4,ke.get(e)];case 1:return(t=i.sent())?(r=(n=JSON.parse(t)).value,(o=n.expireAt)?(new Date).getTime()>new Date(o).getTime()?[4,ke.delete(e)]:[3,3]:[2,r]):[2,void 0];case 2:return i.sent(),[2,void 0];case 3:return[2,r];case 4:return a=i.sent(),T.error(a),[2,void 0];case 5:return[2]}})})()},set:function(e,t,n){return we(function(){var r,o;return Oe(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),xe(),r=n?new Date((new Date).getTime()+n).toISOString():void 0,[4,ke.set(e,JSON.stringify({expireAt:r,value:t}))];case 1:return a.sent(),[3,3];case 2:return o=a.sent(),T.error(o),[2,void 0];case 3:return[2,void 0]}})})()},delete:function(e){return we(function(){var t;return Oe(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),xe(),[4,ke.delete(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),T.error(t),[2,void 0];case 3:return[2,void 0]}})})()}},je=function(e){return we(function(){return Oe(this,function(t){return(ke=e).deleteOldData(),[2]})})()};function Te(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ie(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Te(a,r,o,i,u,"next",e)}function u(e){Te(a,r,o,i,u,"throw",e)}i(void 0)})}}function Re(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Ae=function(e){return function(t,n){return Ie(function(){var r,o,a,i,u;return Re(this,function(s){switch(s.label){case 0:o=(null==n||null==(r=n.retry)?void 0:r.limit)||0,a=0,i=null,s.label=1;case 1:if(!(a<=o))return[3,6];s.label=2;case 2:return s.trys.push([2,4,,5]),a>0&&(n.headers=n.headers||{},n.headers["qb-retry"]=a.toString()),[4,e(t,n)];case 3:return[2,s.sent()];case 4:return i=u=s.sent(),T.error("Attempt ".concat(a+1," failed: "),u),[3,5];case 5:return a++,[3,1];case 6:throw i}})})()}},Ce={request:Ae(function(e,t){return Ie(function(){return Re(this,function(e){throw Error("HTTP Client is not set")})})()})},Le=function(e){return Ie(function(){return Re(this,function(t){return Ce.request=Ae(e),[2]})})()};function De(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ne(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){De(a,r,o,i,u,"next",e)}function u(e){De(a,r,o,i,u,"throw",e)}i(void 0)})}}function Me(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Ue=function(e,t){return Ne(function(){var n;return Me(this,function(r){switch(r.label){case 0:return[4,z.get("IS_PREMIUM_USER")];case 1:return n="true"===r.sent()?"premium":"",[2,e+t.method+n+JSON.stringify(t)]}})})()};function Ge(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We={},Ve={},He=function(){var e,t;function n(){if(!(this instanceof n))throw TypeError("Cannot call a class as a function");Fe(this,"_maxConcurrentRequests",3),Fe(this,"_inFlight",0),Fe(this,"_queue",[])}return e=[{key:"fetch",value:function(e){var t;return(t=function(){var t;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){return t=this,[2,new Promise(function(n,r){t._queue.push({params:e,resolve:n,reject:r}),t._processQueue()})]})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){Ge(a,r,o,i,u,"next",e)}function u(e){Ge(a,r,o,i,u,"throw",e)}i(void 0)})}).call(this)}},{key:"_processQueue",value:function(){for(var e,t=this;this._inFlight<this._maxConcurrentRequests&&this._queue.length>0;)e=this,function(){var n=e._queue.shift(),r=n.params,o=n.resolve,a=n.reject,i=r.url,u=r.options;e._inFlight++;var s=JSON.stringify({url:i,options:u});Ve[s]||(Ve[s]=Ne(function(){var e,t,n;return Me(this,function(r){var o;switch(r.label){case 0:return[4,Ne(function(){var e,t;return Me(this,function(n){switch(n.label){case 0:return t=Ee.get,[4,Ue(i,u)];case 1:return[4,t.apply(Ee,[n.sent()])];case 2:return(e=n.sent())?[2,JSON.parse(e)]:[2]}})})()];case 1:return(e=r.sent())?[2,e]:[4,Ce.request(i,u)];case 2:return[4,(o=t=r.sent(),Ne(function(){var e,t,n;return Me(this,function(r){switch(r.label){case 0:return(e=(null==u?void 0:u.cacheDuration)||0)&&["get","post"].includes((null==u?void 0:u.method)||"")?[4,Ue(i,u)]:[3,4];case 1:return t=r.sent(),[4,Ee.get(t)];case 2:var a,s;return r.sent()?[3,4]:(a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},o),s=s={_cached:!0},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(s)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(s,e))}),n=a,[4,Ee.set(t,JSON.stringify(n),e)]);case 3:r.sent(),r.label=4;case 4:return[2]}})})())];case 3:return(n=r.sent())?[2,n]:[2,t]}})})()),Ve[s].then(function(e){t._inFlight--,o(e),t._processQueue()}).catch(function(e){t._inFlight--,a(e),t._processQueue()}).finally(function(){delete Ve[s]})}()}}],t=[{key:"getInstance",value:function(e,t){return We[e]=We[e]||new n,We[e]._maxConcurrentRequests=t,We[e]}}],e&&Be(n.prototype,e),t&&Be(n,t),n}();function Ye(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ze(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Ye(a,r,o,i,u,"next",e)}function u(e){Ye(a,r,o,i,u,"throw",e)}i(void 0)})}}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function Ke(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Je(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Qe=function(){return ze(function(){var e,t,n,r;return Je(this,function(o){switch(o.label){case 0:return t=(e="").concat,[4,z.get("INPUT_LANGUAGE")];case 1:return r=(n=t.apply(e,[(o.sent()||"en").toLowerCase(),"-"])).concat,[4,z.get("REGIONAL_LANGUAGE")];case 2:return[2,r.apply(n,[(o.sent()||"us").toLowerCase()])]}})})()},Xe=function(e,t){return ze(function(){var n,r,o,a,i,u,s;return Je(this,function(c){switch(c.label){case 0:return r=(n=He.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||15)).fetch,o={url:e},a=[qe({},t)],i={method:"post"},u={},s="qb-dialect",[4,Qe()];case 1:return[2,r.apply(n,[(o.options=Ke.apply(void 0,a.concat([(i.headers=(u[s]=c.sent(),u),i)])),o)])]}})})()},$e=function(e,t){return ze(function(){var n,r,o,a,i,u,s;return Je(this,function(c){switch(c.label){case 0:return r=(n=He.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||15)).fetch,o={url:e},a=[qe({},t)],i={method:"get"},u={},s="qb-dialect",[4,Qe()];case 1:return[2,r.apply(n,[(o.options=Ke.apply(void 0,a.concat([(i.headers=(u[s]=c.sent(),u),i)])),o)])]}})})()},Ze=function(e,t){return ze(function(){var n,r,o,a,i,u,s;return Je(this,function(c){switch(c.label){case 0:return r=(n=He.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||15)).fetch,o={url:e},a=[qe({},t)],i={method:"delete"},u={},s="qb-dialect",[4,Qe()];case 1:return[2,r.apply(n,[(o.options=Ke.apply(void 0,a.concat([(i.headers=(u[s]=c.sent(),u),i)])),o)])]}})})()},et={"ain't":"am not","aimn't":"am not","aren't":"are not","can't":"can not","could've":"could have","couldn't":"could not","couldn't've":"could not have","didn't":"did not","doesn't":"does not","don't":"do not",gonna:"going to","hadn't":"had not","hadn't've":"had not have","hasn't":"has not","haven't":"have not","he'd":"he would","he'd've":"he would have","he'll":"he will","he's":"he is","he'sn't":"he is not","how'd":"how did","how'll":"how will","how's":"how is","i'd":"i would","i'd've":"i would have","i'll":"i will","i'm":"i am","i've":"i have","i'ven't":"i have not","isn't":"is not","it'd":"it would","it'd've":"it would have","it'll":"it will","it's":"it is","it'sn't":"it is not","let's":"let us","ma'am":"madam","mightn't":"might not","mightn't've":"might not have","might've":"might have","mustn't":"must not","must've":"must have","needn't":"need not","not've":"not have","o'clock":"of the clock","ol'":"old","oughtn't":"ought not","shan't":"shall not","she'd":"she would","she'd've":"she would have","she'll":"she will","she's":"she is","she'sn't":"she is not","should've":"should have","shouldn't":"should not","shouldn't've":"should not have","somebody'd":"somebody would","somebody'd've":"somebody would have","somebody'dn't've":"somebody would not have","somebody'll":"somebody will","somebody's":"somebody is","someone'd":"someone would","someone'd've":"someone would have","someone'll":"someone will","someone's":"someone is","something'd":"something would","something'd've":"something would have","something'll":"something will","something's":"something is"," sup":"what is up","that'll":"that will","that's":"that is","there'd":"there would","there'd've":"there would have","there're":"there are","there's":"there is","they'd":"they would","they'dn't":"they would not","they'dn't've":"they would not have","they'd've":"they would have","they'd'ven't":"they would have not","they'll":"they will","they'lln't've":"they will not have","they'll'ven't":"they will have not","they're":"they are","they've":"they have","they'ven't":"they have not","'tis":"it is","'twas":"it was",wanna:"want to","wasn't":"was not","we'd":"we would","we'd've":"we would have","we'dn't've":"we would not have","we'll":"we will","we'lln't've":"we will not have","we're":"we are","we've":"we have","weren't":"were not","what'll":"what will","what're":"what are","what's":"what is","what've":"what have","when's":"when is","where'd":"where did","where's":"where is","where've":"where have","who'd":"who would","who'd've":"who would have","who'll":"who will","who're":"who are","who's":"who is","who've":"who have","why'll":"why will","why're":"why are","why's":"why is","won't":"will not","won't've":"will not have","would've":"would have","wouldn't":"would not","wouldn't've":"would not have","y'all":"you all","y'all'd've":"you all would have","y'all'dn't've":"you all would not have","y'all'll":"you all will","y'all'lln't":"you all will not","y'all'll've":"you all will have","y'all'll'ven't":"you all will have not","you'd":"you would","you'd've":"you would have","you'll":"you will","you're":"you are","you'ren't":"you are not","you've":"you have","you'ven't":"you have not"};function tt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ot=function(){var e,t;function n(){if(!(this instanceof n))throw TypeError("Cannot call a class as a function");rt(this,"contractions",void 0),rt(this,"expandLookup",void 0),rt(this,"contractLookup",void 0),rt(this,"expandRegex",void 0),rt(this,"contractRegex",void 0),this.contractions=this.generateSpacedContractions(),this.expandLookup=this.contractions,this.expandRegex=RegExp(this.sortKeys(this.expandLookup).join("|"),"gi"),this.contractLookup=this.generateReverseLookups(),this.contractRegex=RegExp(this.sortKeys(this.contractLookup).join("|"),"gi")}return e=[{key:"sortKeys",value:function(e){var t=Object.keys(e);return t.sort(function(t,n){var r=n.length-t.length;return 0!==r&&(r=e[n].length-e[t].length),r}),t}},{key:"generateSpacedContractions",value:function(){var e={};return Object.keys(et).forEach(function(t){e["".concat(t," ")]="".concat(et[t]," ")}),e}},{key:"generateReverseLookups",value:function(){var e=this,t={};return Object.keys(this.contractions).forEach(function(n){t[e.contractions[n]]=n}),t}},{key:"convert",value:function(e,t,n){return e.replace(n,function(e){var n=t[e.toLowerCase()],r="'"===e.charAt(0)?e.charCodeAt(1):e.charCodeAt(0);return r>=65&&r<=90&&(n="'"===n.charAt(0)?"'".concat(n.charAt(1).toUpperCase()).concat(n.slice(2)):n.charAt(0).toUpperCase()+n.slice(1)),n})}},{key:"expand",value:function(e){var t;return(t=function(){return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,z.get("USE_CONTRACTION")];case 1:return"true"===t.sent()?[2,this.convert(e,this.expandLookup,this.expandRegex)]:[2,e]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){tt(a,r,o,i,u,"next",e)}function u(e){tt(a,r,o,i,u,"throw",e)}i(void 0)})}).call(this)}},{key:"contract",value:function(e){return this.convert(e,this.contractLookup,this.contractRegex)}}],t=[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}],e&&nt(n.prototype,e),t&&nt(n,t),n}();rt(ot,"instance",void 0);var at=ot.getInstance(),it={timeout:1e4,retry:{limit:0},cacheDuration:864e6},ut=["en","de","es","fr","nl","id","no","tr","pl","zh","ja","it","tl","da","sv","ru","vi","ro","ms","af","uk","hi","pt"],st=["de","es","fr","pt"];function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lt=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");ct(this,"_modelId",""),ct(this,"_skipReason",void 0),ct(this,"_apiResponse",{data:null,_cached:!1})}return e=[{key:"modelId",get:function(){return this._modelId}},{key:"isSkipped",get:function(){return!!this._skipReason}},{key:"skipReason",get:function(){return this._skipReason}},{key:"apiResponse",get:function(){return this._apiResponse}},{key:"isCached",get:function(){return this._apiResponse._cached||!1}},{key:"_skipLoad",value:function(e,t){this._skipReason=e,t&&t()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function ft(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ft(a,r,o,i,u,"next",e)}function u(e){ft(a,r,o,i,u,"throw",e)}i(void 0)})}}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vt=function(){return!!e})()}function mt(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}Object.values(k).filter(function(e){return isNaN(Number(e))});var gt=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){if(!(this instanceof r))throw TypeError("Cannot call a class as a function");var t,n,o=e.inputText,a=e.mode,i=e.frozenWords,u=e.customModeName,s=e.forceShortCircuitSingleParaphrase,c=e.customVoiceInstruction,l=e.nextSentence,f=e.prevSentence;return t=yt(t=r),bt(n=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,vt()?Reflect.construct(t,[],yt(this).constructor):t.apply(this,undefined)),"_inputText",void 0),bt(n,"_prevSentence",void 0),bt(n,"_nextSentence",void 0),bt(n,"_mode",void 0),bt(n,"_beams",[]),bt(n,"_frozenWords",[]),bt(n,"_customModeName",void 0),bt(n,"_customVoiceInstruction",void 0),bt(n,"_shortCircuit",!1),bt(n,"_enableSentenceContext",{natural:!0,academic:!0,basic:!0}),bt(n,"_unsupportFreezeQuotes",{natural:!0}),bt(n,"_unsupportPreferActive",{natural:!0}),bt(n,"_disableTextFormatting",{natural:!0}),n._inputText=o,n._prevSentence=f,n._nextSentence=l,n._mode=a,n._frozenWords=void 0===i?[]:i,n._customModeName=u,n._shortCircuit=void 0!==s&&s,n._customVoiceInstruction=c,n}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&_t(r,e),t=[{key:"enableSentenceContext",get:function(){return!!this._enableSentenceContext[this._mode]}},{key:"getPreferActive",value:function(){return pt(function(){return mt(this,function(e){switch(e.label){case 0:return this._unsupportPreferActive[this._mode]?[2,!1]:[4,z.get("PREFER_ACTIVE_VOICE")];case 1:return[2,"true"===e.sent()]}})}).call(this)}},{key:"getFreezeQuotes",value:function(){return pt(function(){return mt(this,function(e){switch(e.label){case 0:return this._unsupportFreezeQuotes[this._mode]?[2,!1]:[4,z.get("PARAPHRASE_QUOTATION")];case 1:return[2,"false"===e.sent()]}})}).call(this)}},{key:"inputText",get:function(){return this._disableTextFormatting[this._mode]?this._inputText:this._inputText.trim()}},{key:"beams",get:function(){return this._beams}},{key:"beamIndex",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)%this._beams.length}},{key:"beam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.beamIndex(e);return this._beams[t]}},{key:"_isShortCircuit",value:function(){return pt(function(){var e,t,n,r,o;return mt(this,function(a){switch(a.label){case 0:return e=3e3,t=1e3,[4,z.get("SENTENCE_SPLIT_LEVEL")];case 1:return n="paragraph"===a.sent(),r=isNaN(k[this._mode]),o=n?this._inputText.length>e:this._inputText.length>t,[2,this._shortCircuit||o||r]}})}).call(this)}},{key:"_fallback",value:function(){this._beams.push(this._inputText)}},{key:"_beforeLoad",value:function(){return pt(function(){return mt(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()&&this._skipLoad("shortCircuit",this._fallback.bind(this)),[2]}})}).call(this)}},{key:"_load",value:function(){return pt(function(){var e,t,n,r,o,a,i,u,s,c,l,f,p,h,b,y,d,_,v,m;return mt(this,function(g){switch(g.label){case 0:return[4,this._beforeLoad()];case 1:return g.sent(),this.isSkipped?[2,this]:(t={fthresh:-1,autoflip:!1,wikify:!1},[4,z.get("INPUT_LANGUAGE")]);case 2:return t.inputLang=g.sent()||"en",t.strength=k[this._mode],t.quoteIndex=-1,t.text=this.inputText,t.frozenWords=this._frozenWords,t.nBeams=4,[4,this.getFreezeQuotes()];case 3:return t.freezeQuotes=g.sent(),[4,this.getPreferActive()];case 4:return t.preferActive=g.sent(),[4,z.get("REGIONAL_LANGUAGE")];case 5:return t.dialect=(g.sent()||"us").toUpperCase(),e=t,this.enableSentenceContext&&(e.prevSentence=this._prevSentence||"",e.nextSentence=this._nextSentence||""),[4,z.get("SINGLE_PARA_PROMPT_VERSION")];case 6:return(n=g.sent())&&(e.promptVersion=n),[4,z.get("MULTILINGUAL_MODEL_VERSION")];case 7:return(r=g.sent())&&(e.multilingualModelVersion=r),a=[function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){bt(e,t,n[t])})}return e}({json:e},it)],i={},[4,z.get("IS_PREMIUM_USER")];case 8:return o=dt.apply(void 0,a.concat([(i.maxConcurrentRequests="true"===g.sent()?15:2,i)])),[4,z.get("DISABLE_CACHING")];case 9:u="true"===g.sent(),k[this._mode]===k.custom&&this._customModeName&&(u=!0),u&&(e.__key=Math.random().toString()+Date.now().toString(),e.customModeName=this._customModeName,o.cacheDuration=0),k[this._mode]===k.academic&&(e.__key=Math.random().toString()+Date.now().toString(),o.cacheDuration=0),k[this._mode]===k.custom_voice&&(e.__key=Math.random().toString()+Date.now().toString(),e.customVoiceInstruction=this._customVoiceInstruction,o.cacheDuration=0),g.label=10;case 10:return g.trys.push([10,21,,22]),s=this,[4,Xe("api/paraphraser/single-paraphrase/".concat(k[this._mode]),o)];case 11:s._apiResponse=g.sent(),c=this._apiResponse.data[0]["paras_".concat(k[this._mode]+1)],this._modelId=this._apiResponse.data[0].modelID,l=!0,f=!1,p=void 0,g.label=12;case 12:g.trys.push([12,18,19,20]),h=c[Symbol.iterator](),g.label=13;case 13:return(l=(b=h.next()).done)?[3,17]:(y=b.value.alt,[4,at.expand(y)]);case 14:return y=g.sent(),_=(d=this._beams).push,[4,F.postProcessTextSanitisation(y)];case 15:_.apply(d,[g.sent()]),g.label=16;case 16:return l=!0,[3,13];case 17:return[3,20];case 18:return v=g.sent(),f=!0,p=v,[3,20];case 19:try{l||null==h.return||h.return()}finally{if(f)throw p}return[7];case 20:return[3,22];case 21:return m=g.sent(),T.error(m),this._skipLoad("apiError",this._fallback.bind(this)),[3,22];case 22:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){return pt(function(e){var t,n,o,a,i,u;return mt(this,function(s){switch(s.label){case 0:return t=e.inputText,n=e.mode,o=e.frozenWords,a=e.customModeName,i=e.forceShortCircuitSingleParaphrase,u=e.customVoiceInstruction,[4,new r({inputText:t,mode:n,frozenWords:o,customModeName:a,forceShortCircuitSingleParaphrase:i,customVoiceInstruction:u,prevSentence:e.prevSentence,nextSentence:e.nextSentence})._load()];case 1:return[2,s.sent()]}})}).apply(this,arguments)}}],t&&ht(r.prototype,t),n&&ht(r,n),r}(lt);function wt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ot(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){wt(a,r,o,i,u,"next",e)}function u(e){wt(a,r,o,i,u,"throw",e)}i(void 0)})}}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function Pt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function St(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var xt=function(e){return Ot(function(){var t;return St(this,function(n){switch(n.label){case 0:return[4,z.get("INPUT_LANGUAGE")];case 1:return(t=n.sent())&&ut.includes(t)?[4,Ot(function(){var e,t,n;return St(this,function(r){switch(r.label){case 0:return e={chunker:!1,getAlts:!1,getDefinitions:!1,paraphrasePhrase:!1,paraphraseThesarus:!1,recommendedWords:!1,singleFlip:!1,modeAwarePhrasalParaphraser:!1,multilingualThesaurus:!1},t=null,[4,z.get("ENABLE_MODE_AWARE_PHRASAL_PARAPHRASE")];case 1:return null!=(n=r.sent())&&(t="true"===n),[2,ut.reduce(function(n,r){if("en"===r)n[r]=Pt(kt({},{chunker:!0,getAlts:!0,getDefinitions:!0,paraphrasePhrase:!0,paraphraseThesarus:!0,recommendedWords:!0,singleFlip:!0,multilingualThesaurus:!1}),{modeAwarePhrasalParaphraser:null===t||t});else if(st.includes(r)){var o=Pt(kt({},e),{chunker:!0,multilingualThesaurus:!0});n[r]=Pt(kt({},o),{modeAwarePhrasalParaphraser:null!==t&&t})}else n[r]=e;return n},{})]}})})()]:[2,!0];case 2:return[2,n.sent()[t][e]]}})})()};function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function jt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Tt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){jt(a,r,o,i,u,"next",e)}function u(e){jt(a,r,o,i,u,"throw",e)}i(void 0)})}}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],i=!0,u=!1;try{for(o=o.call(e);!(i=(n=o.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){u=!0,r=e}finally{try{i||null==o.return||o.return()}finally{if(u)throw r}}return a}}(e,t)||Nt(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nt(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){if(e){if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(e,t)}}function Mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mt=function(){return!!e})()}function Ut(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Gt=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e,t,n,o){var a,i,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return a=At(a=r),Rt(i=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,Mt()?Reflect.construct(a,[],At(this).constructor):a.apply(this,undefined)),"_inputText",void 0),Rt(i,"_beam",void 0),Rt(i,"_flips",[]),Rt(i,"_walts",{}),Rt(i,"_mode",void 0),Rt(i,"_flip",void 0),Rt(i,"WORD_REGEX",/[a-z,0-9]*/i),Rt(i,"_frozenWords",[]),Rt(i,"_shortCircuit",!1),i._inputText=e,i._beam=t,i._mode=n,i._flip=o,i._frozenWords=u,i._shortCircuit=s,i}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Ct(r,e),t=[{key:"alts",value:function(e){var t=this,n=[],r=!0,o=!1,a=void 0;try{for(var i,u=Object.entries(this._walts)[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var s,c=Lt(i.value,2),l=c[0],f=c[1];if(l.split("~")[0]===(null==e?void 0:e.toLowerCase())){var p=f;e[0]===e[0].toUpperCase()&&(p=f.map(function(e){var t;return(null==(t=e[0])?void 0:t.toUpperCase())+e.slice(1)})),n=p}else if(1===e.split(" ").length&&(null==(s=this.WORD_REGEX.exec(e))?void 0:s.join().toLowerCase())===l.split("~")[0]){var h=f.map(function(n){return n+e.replace(t.WORD_REGEX,"")});e[0]===e[0].toUpperCase()&&(h=h.map(function(e){return e[0].toUpperCase()+e.slice(1)})),n=h}}}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}},{key:"flippedBeam",value:function(){return Tt(function(){var e,t,n,r,o,a,i,u,s,c,l;return Ut(this,function(f){switch(f.label){case 0:return e=this,t=this._flips.filter(function(t){return t[2]>=P[e._flip]&&0!==P[e._flip]}),n=/\w+|\s+|[^\s\w]|"|\u275d|\u275e|\u201c|\u201c|\u201d|\u201f+/g,r=['"',"\u275d","\u275e","\u201c","\u201c","\u201d","\u201f"],o=this._beam.match(n)||[],a=this._beam.split('"'),i=!1,[4,z.get("PARAPHRASE_QUOTATION")];case 1:return u="true"===f.sent(),s=!1,a.length%2==0||(s=!0),c={},l=o.map(function(n){if(c[n]=c[n]?c[n]+1:1,r.includes(n)&&s)return i=!i,n;if(i&&!u)return n;var o=null==(p=e._frozenWords)?void 0:p.reduce(function(e,t){var n=(null==t?void 0:t.split(" "))||[];return Dt(e).concat(Dt(n))},[]);if((null==o?void 0:o.length)&&o.includes(n.toLowerCase()))return n;var a=!0,l=!1,f=void 0;try{for(var p,h,b=t[Symbol.iterator]();!(a=(h=b.next()).done);a=!0){var y=h.value,d=Lt(y[0].split("~"),2),_=d[0],v=d[1];if(_===n.toLowerCase()&&parseInt(v)===c[n])return y[1]}}catch(e){l=!0,f=e}finally{try{a||null==b.return||b.return()}finally{if(l)throw f}}return n}),[4,F.postProcessTextSanitisation(l.join(""))];case 2:return[2,f.sent()]}})}).call(this)}},{key:"textToPhrases",value:function(e,t){var n=(t||{}).preservePlaceholder,r=F.getEachWordProperties(this._inputText,e,{preservePlaceholder:void 0!==n&&n});return r.map(function(e,t){var n;return{text:e.word,displayText:e.word,pre:"",post:"",whitespace:t===r.length-1?"":" ",placeholder:null!=(n=e.placeholder)&&n,types:[{under:null==e?void 0:e.under,different:null==e?void 0:e.different,inLongestSubstr:null==e?void 0:e.inLongestSubstr}]}})}},{key:"_isShortCircuit",value:function(){return Tt(function(){var e,t,n,r;return Ut(this,function(o){switch(o.label){case 0:return[4,z.get("IS_PREMIUM_USER")];case 1:return n="true"===o.sent(),(r=this._shortCircuit)?[3,3]:[4,xt("singleFlip")];case 2:r=!o.sent(),o.label=3;case 3:return[2,r||this._inputText.length>300||isNaN(k[this._mode])||"custom"===this._mode||"level0"===this._flip&&!n||0===(null==(e=this._inputText)?void 0:e.length)||0===(null==(t=this._beam)?void 0:t.length)]}})}).call(this)}},{key:"_beforeLoad",value:function(){return Tt(function(){return Ut(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()&&this._skipLoad("shortCircuit"),[2]}})}).call(this)}},{key:"_load",value:function(){return Tt(function(){var e,t;return Ut(this,function(n){switch(n.label){case 0:return[4,this._beforeLoad()];case 1:if(n.sent(),this.isSkipped)return[2,this];n.label=2;case 2:return n.trys.push([2,4,,5]),e=this,[4,Xe("api/paraphraser/single-flip",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Rt(e,t,n[t])})}return e}({json:{text:this._inputText.trim(),alt:this._beam,fthresh:9,mode:k[this._mode]}},it))];case 3:return e._apiResponse=n.sent(),this._flips=this._apiResponse.data.flips,this._modelId=this._apiResponse.data.modelID,this._walts=this._apiResponse.data.walts,[3,5];case 4:return t=n.sent(),T.error(t),this._skipLoad("apiError"),[3,5];case 5:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e,t,n,o,a,i){return Tt(function(){return Ut(this,function(u){switch(u.label){case 0:return[4,new r(e,t,n,o,a,i)._load()];case 1:return[2,u.sent()]}})})()}}],t&&It(r.prototype,t),n&&It(r,n),r}(lt);function Bt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ft(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Bt(a,r,o,i,u,"next",e)}function u(e){Bt(a,r,o,i,u,"throw",e)}i(void 0)})}}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(zt=function(){return!!e})()}function qt(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Kt=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e,t){if(!(this instanceof r))throw TypeError("Cannot call a class as a function");n=Ht(n=r),Vt(o=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,zt()?Reflect.construct(n,[],Ht(this).constructor):n.apply(this,undefined)),"_text",void 0),Vt(o,"_phrases",[]),Vt(o,"_preservePlaceholder",void 0),Vt(o,"_maskingMetadata",void 0);var n,o,a=(t||{}).preservePlaceholder;return o._text=e,o._preservePlaceholder=a,o._maskingMetadata={maskedText:e,placeholders:{}},o}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Yt(r,e),t=[{key:"phrases",get:function(){return this._phrases}},{key:"_fallback",value:function(){for(var e=this._text.split(" "),t=0;t<e.length;t++)this._phrases.push({text:e[t],span:[t],displayText:e[t],pre:"",post:"",whitespace:t===e.length-1?"":" "})}},{key:"_isShortCircuit",value:function(){return Ft(function(){return qt(this,function(e){switch(e.label){case 0:return[4,xt("chunker")];case 1:return[2,!e.sent()||this._text.length>1e3]}})}).call(this)}},{key:"_beforeLoad",value:function(){return Ft(function(){var e,t,n;return qt(this,function(r){switch(r.label){case 0:return[4,this._isShortCircuit()];case 1:return r.sent()?(this._skipLoad("shortCircuit",this._fallback.bind(this)),[2]):(this._preservePlaceholder&&(t=(e=F.maskPlaceholders(this._text)).maskedText,n=e.placeholders,this._maskingMetadata.maskedText=t,this._maskingMetadata.placeholders=n),[2])}})}).call(this)}},{key:"_afterLoad",value:function(){return Ft(function(){var e,t,n,r,o,a;return qt(this,function(i){for(t=0,this._modelId=this._apiResponse.data.modelID,e="";t<this._apiResponse.data.segments.phrases.length;t++)r=(n=this._apiResponse.data.segments.phrases[t]).indices,o={phrase:n.phrase,hadPlaceholder:!1},this._preservePlaceholder&&(a=F.unMaskPlaceholders(o.phrase,this._maskingMetadata.placeholders),o.phrase=a.unMaskedWord,o.hadPlaceholder=a.hadPlaceholder),e+="".concat(o.phrase," "),this._phrases.push({text:o.phrase,span:r,displayText:o.phrase,pre:"",post:"",whitespace:t===this._apiResponse.data.segments.phrases.length-1?"":" ",placeholder:o.hadPlaceholder});return this._text!==e.trim()&&(this._phrases=[],this._skipLoad("apiError",this._fallback.bind(this))),[2]})}).call(this)}},{key:"_load",value:function(){return Ft(function(){var e,t;return qt(this,function(n){switch(n.label){case 0:return[4,this._beforeLoad()];case 1:if(n.sent(),this.isSkipped)return[2,this];n.label=2;case 2:return n.trys.push([2,5,,6]),e=this,[4,Xe("api/paraphraser/chunker",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Vt(e,t,n[t])})}return e}({json:{text:this._preservePlaceholder?this._maskingMetadata.maskedText:this._text}},it))];case 3:return e._apiResponse=n.sent(),[4,this._afterLoad()];case 4:return n.sent(),[3,6];case 5:return t=n.sent(),T.error(t),this._skipLoad("apiError",this._fallback.bind(this)),[3,6];case 6:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ft(function(){return qt(this,function(n){switch(n.label){case 0:return[4,new r(e,{preservePlaceholder:t})._load()];case 1:return[2,n.sent()]}})})()}}],t&&Wt(r.prototype,t),n&&Wt(r,n),r}(lt);function Jt(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Qt(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Jt(a,r,o,i,u,"next",e)}function u(e){Jt(a,r,o,i,u,"throw",e)}i(void 0)})}}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){$t(e,t,n[t])})}return e}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nn=function(){return!!e})()}function rn(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var on=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=Zt(n=r),$t(t=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,nn()?Reflect.construct(n,[],Zt(this).constructor):n.apply(this,undefined)),"_phrases",[]),t._phrases=e.map(function(e){return{text:e,alts:[]}}),t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&tn(r,e),t=[{key:"allPhrasesAlts",get:function(){return this._phrases.reduce(function(e,t){var n,r;return n=en({},e),r=null!=(r=$t({},t.text,t.alts))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}),n},{})}},{key:"phraseAlts",value:function(e){var t;return(null==(t=this._phrases.find(function(t){return t.text===e}))?void 0:t.alts)||[]}},{key:"_isShortCircuit",value:function(){return Qt(function(){return rn(this,function(e){switch(e.label){case 0:return[4,xt("paraphraseThesarus")];case 1:return[2,!e.sent()||0===this._phrases.filter(function(e){return e.text.length}).length]}})}).call(this)}},{key:"_beforeLoad",value:function(){return Qt(function(){return rn(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()&&this._skipLoad("empty"),[2]}})}).call(this)}},{key:"_load",value:function(){return Qt(function(){var e,t,n,r;return rn(this,function(o){switch(o.label){case 0:return e=this,[4,this._beforeLoad()];case 1:if(o.sent(),this.isSkipped)return[2,this];t=this._phrases.filter(function(e){return e.text.length&&e.text.length<=60}).map(function(e){return e.text}),o.label=2;case 2:return o.trys.push([2,5,,6]),t.length?(n=this,[4,Xe("api/paraphraser/paraphrase-thesaurus",en({json:{phrases:t}},it))]):[3,4];case 3:n._apiResponse=o.sent(),this._modelId=this._apiResponse.data.model||"paraphrase-thesaurus",this._phrases=this._phrases.map(function(t){return t.alts=e._apiResponse.data.suggestions[t.text]||[],t}),o.label=4;case 4:return[3,6];case 5:return r=o.sent(),T.error(r),this._skipLoad("apiError"),[3,6];case 6:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){return Qt(function(){return rn(this,function(t){switch(t.label){case 0:return[4,new r(e)._load()];case 1:return[2,t.sent()]}})})()}}],t&&Xt(r.prototype,t),n&&Xt(r,n),r}(lt);function an(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function un(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){an(a,r,o,i,u,"next",e)}function u(e){an(a,r,o,i,u,"throw",e)}i(void 0)})}}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){cn(e,t,n[t])})}return e}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(hn=function(){return!!e})()}function bn(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var yn=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e,t){var n,o;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return o=ln(o=r),cn(n=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,hn()?Reflect.construct(o,[],ln(this).constructor):o.apply(this,undefined)),"_text",void 0),cn(n,"_phrases",[]),n._phrases=t.map(function(e){return{text:e,alts:[]}}),n._text=e,n}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&pn(r,e),t=[{key:"allPhrasesAlts",get:function(){return this._phrases.reduce(function(e,t){var n,r;return n=fn({},e),r=null!=(r=cn({},t.text,t.alts))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}),n},{})}},{key:"phraseAlts",value:function(e){var t;return(null==(t=this._phrases.find(function(t){return t.text===e}))?void 0:t.alts)||[]}},{key:"_isShortCircuit",value:function(){return un(function(){return bn(this,function(e){switch(e.label){case 0:return[4,xt("paraphrasePhrase")];case 1:return[2,!e.sent()||0===this._phrases.length]}})}).call(this)}},{key:"_beforeLoad",value:function(){return un(function(){return bn(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()&&this._skipLoad("shortCircuit"),[2]}})}).call(this)}},{key:"_load",value:function(){return un(function(){var e,t,n;return bn(this,function(r){switch(r.label){case 0:return e=this,[4,this._beforeLoad()];case 1:if(r.sent(),this.isSkipped)return[2,this];r.label=2;case 2:return r.trys.push([2,4,,5]),t=this,[4,Xe("api/utils/paraphrase-phrase",fn({json:{phrases:this._phrases.map(function(e){return e.text}),text:this._text,w1:.6,w2:.4}},it))];case 3:return t._apiResponse=r.sent(),this._modelId=this._apiResponse.data.modelID,this._phrases=this._phrases.map(function(t){return t.alts=e._apiResponse.data.suggestions[t.text]||[],t}),[3,5];case 4:return n=r.sent(),T.error(n),this._skipLoad("apiError"),[3,5];case 5:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e,t){return un(function(){return bn(this,function(n){switch(n.label){case 0:return[4,new r(e,t)._load()];case 1:return[2,n.sent()]}})})()}}],t&&sn(r.prototype,t),n&&sn(r,n),r}(lt);function dn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _n(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){dn(a,r,o,i,u,"next",e)}function u(e){dn(a,r,o,i,u,"throw",e)}i(void 0)})}}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(On=function(){return!!e})()}function kn(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Pn=/[a-zA-Z0-9]/,Sn=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e,t,n){var o,a;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return a=gn(a=r),mn(o=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,On()?Reflect.construct(a,[],gn(this).constructor):a.apply(this,undefined)),"_text",void 0),mn(o,"_phrases",[]),mn(o,"_mode",void 0),mn(o,"_suggestions",void 0),o._phrases=t,o._text=e,o._mode=n,o._suggestions={},o}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&wn(r,e),t=[{key:"_isShortCircuit",value:function(){return _n(function(){return kn(this,function(e){switch(e.label){case 0:return[4,xt("modeAwarePhrasalParaphraser")];case 1:return[2,!e.sent()]}})})()}},{key:"_beforeLoad",value:function(){return _n(function(){return kn(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()&&this._skipLoad("shortCircuit"),[2]}})}).call(this)}},{key:"suggestions",get:function(){return this._suggestions}},{key:"_load",value:function(e){return _n(function(){var t,n,r,o,a,i,u,s;return kn(this,function(c){switch(c.label){case 0:return[4,this._beforeLoad()];case 1:if(c.sent(),this.isSkipped)return[2,this];t=(e||{}).minWordsInPhrase,n=this._phrases.filter(function(e){var t;return(null==(t=e.text)?void 0:t.length)&&Pn.test(e.text)}),t&&t>1&&(n=n.filter(function(e){var n;return(null==(n=e.text)?void 0:n.split(" ").length)>=t})),c.label=2;case 2:return c.trys.push([2,4,,5]),u=this,[4,Xe("api/paraphraser/mode-aware-phrasal-paraphraser",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){mn(e,t,n[t])})}return e}({json:{phrases:n.map(function(e){return e.text}),text:this._text,indices:n.map(function(e){return e.startIndex}).filter(function(e){return void 0!==e&&e>-1}),mode:k[this._mode]}},it))];case 3:return u._apiResponse=c.sent(),this._suggestions=(null==(i=this._apiResponse)||null==(a=i.data)||null==(o=a.data)||null==(r=o.value)?void 0:r.suggestions)||{},this._modelId=this._apiResponse.data.MODEL_ID,[3,5];case 4:return s=c.sent(),T.error(s),this._skipLoad("apiError"),[3,5];case 5:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e,t,n,o){return _n(function(){return kn(this,function(a){switch(a.label){case 0:return[4,new r(e,t,n)._load(o)];case 1:return[2,a.sent()]}})})()}}],t&&vn(r.prototype,t),n&&vn(r,n),r}(lt);function xn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function En(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){xn(a,r,o,i,u,"next",e)}function u(e){xn(a,r,o,i,u,"throw",e)}i(void 0)})}}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Tn(e,t,n[t])})}return e}function An(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ln(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ln=function(){return!!e})()}function Dn(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Nn=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=In(n=r),Tn(t=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,Ln()?Reflect.construct(n,[],In(this).constructor):n.apply(this,undefined)),"_text",void 0),Tn(t,"_sentences",[]),Tn(t,"_isFallback",!1),t._text=F.checkCyrillicCharacters(e),t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Cn(r,e),t=[{key:"sentences",get:function(){return this._sentences}},{key:"isFallback",get:function(){return this._isFallback}},{key:"_fallback",value:function(){this._sentences=[{text:this._text,pre:"",post:"",start:0,end:this._text.length}],this._isFallback=!1}},{key:"_isShortCircuit",value:function(){return En(function(){var e;return Dn(this,function(t){switch(t.label){case 0:return[4,z.get("INPUT_LANGUAGE")];case 1:return"zh"===(e=t.sent()||"en")||"ja"===e?[2,!1]:[2,1===this._text.split(" ").length]}})}).call(this)}},{key:"_beforeLoad",value:function(){return En(function(){return Dn(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()&&this._skipLoad("shortCircuit",this._fallback.bind(this)),[2]}})}).call(this)}},{key:"_load",value:function(){return En(function(){var e,t,n,r,o,a,i,u,s,c,l;return Dn(this,function(f){switch(f.label){case 0:if(e=this,this._beforeLoad(),this.isSkipped)return[2,this];t=it.retry,n=it.timeout,r=864e5,f.label=1;case 1:return f.trys.push([1,4,,5]),o=this,[4,Xe("api/utils/sentence-spiltter",{json:{fallback:!0,text:this._text},retry:t,timeout:n,cacheDuration:r})];case 2:return o._apiResponse=f.sent(),a=0,i="",[4,z.get("SENTENCE_SPLIT_LEVEL")];case 3:return u=f.sent(),s=[],c=this._apiResponse.data.sentences.map(function(t,n){var r={pre:"",post:"",text:t.text};r=F.parseNewline(r),a++,i+=r.text;var o=r.post&&" "!==r.post,c=5===a,l=i.length>2500,f=e._apiResponse.data.sentences.length===n+1;return"paragraph"===u&&(o||c||l||f)?(s.push(An(Rn({},r),{text:i})),a=0,i=""):i+=r.post,An(Rn({},r),{start:t.start,end:t.end})}),this._sentences="paragraph"===u?s:c,this._isFallback=this._apiResponse.data.fallback||!1,this._modelId=this._apiResponse.data.id,[3,5];case 4:return l=f.sent(),T.error(l),this._skipLoad("apiError",this._fallback.bind(this)),[3,5];case 5:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){return En(function(){return Dn(this,function(t){switch(t.label){case 0:return[4,new r(e)._load()];case 1:return[2,t.sent()]}})})()}}],t&&jn(r.prototype,t),n&&jn(r,n),r}(lt);function Mn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Un(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Mn(a,r,o,i,u,"next",e)}function u(e){Mn(a,r,o,i,u,"throw",e)}i(void 0)})}}function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fn(e){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e,t){return(Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Vn=function(){return!!e})()}function Hn(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Yn=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=Fn(n=r),Bn(t=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,Vn()?Reflect.construct(n,[],Fn(this).constructor):n.apply(this,undefined)),"_text",void 0),Bn(t,"_definitions",{}),t._text=e,t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Wn(r,e),t=[{key:"definitions",get:function(){return this._definitions}},{key:"_isShortCircuit",value:function(){return Un(function(){return Hn(this,function(e){switch(e.label){case 0:return[4,xt("getDefinitions")];case 1:return[2,!e.sent()||this._text.split(" ").length>1]}})}).call(this)}},{key:"_beforeLoad",value:function(){return Un(function(){return Hn(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()&&this._skipLoad("shortCircuit"),[2]}})}).call(this)}},{key:"_load",value:function(){return Un(function(){var e,t;return Hn(this,function(n){switch(n.label){case 0:return[4,this._beforeLoad()];case 1:if(n.sent(),this.isSkipped)return[2,this];n.label=2;case 2:return n.trys.push([2,4,,5]),e=this,[4,$e("api/paraphraser/get-definition",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Bn(e,t,n[t])})}return e}({searchParams:{phrase:this._text}},it))];case 3:return e._apiResponse=n.sent(),this._definitions=this._apiResponse.data.defs,[3,5];case 4:return t=n.sent(),T.error(t),this._skipLoad("apiError"),[3,5];case 5:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){return Un(function(){return Hn(this,function(t){switch(t.label){case 0:return[4,new r(e)._load()];case 1:return[2,t.sent()]}})})()}}],t&&Gn(r.prototype,t),n&&Gn(r,n),r}(lt);function zn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qn(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){zn(a,r,o,i,u,"next",e)}function u(e){zn(a,r,o,i,u,"throw",e)}i(void 0)})}}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qn(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Xn=function(){var e,t;function n(e){if(!(this instanceof n))throw TypeError("Cannot call a class as a function");Jn(this,"_referenceText",void 0),Jn(this,"_reportedTexts",void 0),this._referenceText=e,this._reportedTexts=[]}return e=[{key:"reportText",value:function(e){return qn(function(){return Qn(this,function(t){switch(t.label){case 0:return this._reportedTexts.includes(e)?[3,2]:(this._reportedTexts.push(e),[4,this._save()]);case 1:t.sent(),t.label=2;case 2:return[2]}})}).call(this)}},{key:"unReportText",value:function(e){return qn(function(){return Qn(this,function(t){switch(t.label){case 0:return this._reportedTexts=this._reportedTexts.filter(function(t){return t!==e}),[4,this._save()];case 1:return t.sent(),[2]}})}).call(this)}},{key:"reportedTexts",get:function(){return this._reportedTexts}},{key:"isTextReported",value:function(e){return this._reportedTexts.includes(e)}},{key:"_save",value:function(){return qn(function(){return Qn(this,function(e){switch(e.label){case 0:return[4,Ee.set(this._referenceText,JSON.stringify(this._reportedTexts))];case 1:return e.sent(),[2]}})}).call(this)}},{key:"_load",value:function(){return qn(function(){var e;return Qn(this,function(t){switch(t.label){case 0:return[4,Ee.get(this._referenceText)];case 1:return(e=t.sent())&&(this._reportedTexts=JSON.parse(e)),[2,this]}})}).call(this)}}],t=[{key:"getInstance",value:function(e){return qn(function(){return Qn(this,function(t){switch(t.label){case 0:return[4,new n(e)._load()];case 1:return[2,t.sent()]}})})()}}],e&&Kn(n.prototype,e),t&&Kn(n,t),n}();function $n(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zn(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){$n(a,r,o,i,u,"next",e)}function u(e){$n(a,r,o,i,u,"throw",e)}i(void 0)})}}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function or(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(or=function(){return!!e})()}function ar(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ir=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=nr(n=r),tr(t=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,or()?Reflect.construct(n,[],nr(this).constructor):n.apply(this,undefined)),"_text",void 0),tr(t,"_recommendedWords",[]),t._text=e,t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&rr(r,e),t=[{key:"recommendedWords",get:function(){return this._recommendedWords}},{key:"_fallback",value:function(){this._recommendedWords=[]}},{key:"_isShortCircuit",value:function(){return Zn(function(){return ar(this,function(e){return[2,1===this._text.split(" ").length]})}).call(this)}},{key:"_beforeLoad",value:function(){return Zn(function(){return ar(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()&&this._skipLoad("shortCircuit",this._fallback.bind(this)),[2]}})}).call(this)}},{key:"_load",value:function(){return Zn(function(){var e,t;return ar(this,function(n){switch(n.label){case 0:return[4,this._beforeLoad()];case 1:if(n.sent(),this.isSkipped)return[2,this];n.label=2;case 2:return n.trys.push([2,4,,5]),e=this,[4,Xe("api/utils/keyword",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){tr(e,t,n[t])})}return e}({json:{text:this._text}},it))];case 3:return e._apiResponse=n.sent(),this._recommendedWords=this._apiResponse.data.data,this._modelId=this._apiResponse.data.id||"",[3,5];case 4:return t=n.sent(),T.error(t),this._skipLoad("apiError",this._fallback.bind(this)),[3,5];case 5:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){return Zn(function(){return ar(this,function(t){switch(t.label){case 0:return[4,new r(e)._load()];case 1:return[2,t.sent()]}})})()}}],t&&er(r.prototype,t),n&&er(r,n),r}(lt);function ur(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ur(a,r,o,i,u,"next",e)}function u(e){ur(a,r,o,i,u,"throw",e)}i(void 0)})}}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pr=function(){return!!e})()}function hr(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var br=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(){var e,t,n,o;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return t=lr(t=r),e=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,pr()?Reflect.construct(t,[],lr(this).constructor):t.apply(this,undefined)),o={summary:[]},(n="_historySummary")in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&fr(r,e),t=[{key:"allHistoryData",get:function(){return this._historySummary}},{key:"_beforeLoad",value:function(){}},{key:"_load",value:function(){return sr(function(){var e,t;return hr(this,function(n){switch(n.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];n.label=1;case 1:return n.trys.push([1,3,,4]),e=this,[4,$e("api/paraphraser/history",{timeout:it.timeout})];case 2:return e._apiResponse=n.sent(),this._modelId=this._apiResponse.data.model||"paraphrase-history",this._historySummary=this._apiResponse.data,[3,4];case 3:return t=n.sent(),T.error(t),this._skipLoad("apiError"),[3,4];case 4:return[2,this]}})}).call(this)}},{key:"deleteAllHistory",value:function(){return sr(function(){return hr(this,function(e){switch(e.label){case 0:return[4,Ze("api/paraphraser/history",{timeout:it.timeout})];case 1:return e.sent(),this._modelId="",this._historySummary={summary:[]},[2]}})}).call(this)}}],n=[{key:"getInstance",value:function(){return sr(function(){return hr(this,function(e){switch(e.label){case 0:return[4,(new r)._load()];case 1:return[2,e.sent()]}})})()}}],t&&cr(r.prototype,t),n&&cr(r,n),r}(lt);function yr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function dr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){yr(a,r,o,i,u,"next",e)}function u(e){yr(a,r,o,i,u,"throw",e)}i(void 0)})}}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){vr(e,t,n[t])})}return e}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Or(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Or=function(){return!!e})()}function kr(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Pr={id:"",mode:2,synonym_value:2,_data:{},created_at:"",updated_at:"",customModeName:"",customVoiceInstruction:{formality:"",vocabulary:"",personality:[]},inputLanguage:"en"},Sr=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=mr(n=r),vr(t=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,Or()?Reflect.construct(n,[],mr(this).constructor):n.apply(this,undefined)),"_historyItem",{history:gr({},Pr)}),vr(t,"_id",void 0),t._id=e,t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&wr(r,e),t=[{key:"historyItemData",get:function(){return this._historyItem}},{key:"_beforeLoad",value:function(){}},{key:"_load",value:function(){return dr(function(){var e,t,n,r;return kr(this,function(o){switch(o.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];o.label=1;case 1:return o.trys.push([1,3,,4]),t=this,[4,$e("api/paraphraser/history/".concat(this._id),{timeout:it.timeout})];case 2:return t._apiResponse=o.sent(),this._modelId=this._apiResponse.data.model||"paraphrase-history-id",Object.keys((n=null==(e=this._apiResponse.data)?void 0:e.history).items).forEach(function(e){var t,r,o={pre:"",post:n.items[e].post||"",text:n.items[e].input};o=F.parseNewline(o),n.items[e]=(t=gr({},n.items[e]),r=r={input:o.text,post:o.post,output:n.items[e].output.trim()},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)}),this._historyItem={history:{mode:n.mode,synonym_value:n.synonym_value,id:this._id,_data:n.items,created_at:n.created_at,updated_at:n.updated_at,customModeName:n.custom_mode_name,customVoiceInstruction:n.custom_voice_instruction,inputLanguage:n.input_language||"en",dialect:n.input_lang_dialect}},[3,4];case 3:return r=o.sent(),T.error(r),this._skipLoad("apiError"),[3,4];case 4:return[2,this]}})}).call(this)}},{key:"deleteHistory",value:function(){return dr(function(){return kr(this,function(e){switch(e.label){case 0:return[4,Ze("api/paraphraser/history/".concat(this._id),{timeout:it.timeout})];case 1:return e.sent(),this._modelId="",this._historyItem={history:gr({},Pr)},[2]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){return dr(function(e){return kr(this,function(t){switch(t.label){case 0:return[4,new r(e.id)._load()];case 1:return[2,t.sent()]}})}).apply(this,arguments)}}],t&&_r(r.prototype,t),n&&_r(r,n),r}(lt);function xr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Er(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){xr(a,r,o,i,u,"next",e)}function u(e){xr(a,r,o,i,u,"throw",e)}i(void 0)})}}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ar(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ar=function(){return!!e})()}function Cr(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Lr=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e,t){var n,o;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return o=Ir(o=r),Tr(n=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,Ar()?Reflect.construct(o,[],Ir(this).constructor):o.apply(this,undefined)),"_text",void 0),Tr(n,"_dialect",void 0),Tr(n,"_audio",new ArrayBuffer(0)),n._text=e,n._dialect=t,n}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Rr(r,e),t=[{key:"audio",get:function(){return this._audio}},{key:"_isShortCircuit",value:function(){return!1}},{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit")}},{key:"_load",value:function(){return Er(function(){return Cr(this,function(e){if(this._beforeLoad(),this.isSkipped)return[2,this];try{this._audio=new ArrayBuffer(0)}catch(e){T.error(e),this._skipLoad("apiError")}return[2,this]})}).call(this)}}],n=[{key:"getInstance",value:function(e,t){return Er(function(){return Cr(this,function(n){switch(n.label){case 0:return[4,new r(e,t)._load()];case 1:return[2,n.sent()]}})})()}}],t&&jr(r.prototype,t),n&&jr(r,n),r}(lt),Dr=Math.floor,Nr=Math.random,Mr=function(e,t){var n=-1,r=e.length,o=r-1;for(t=void 0===t?r:t;++n<t;){var a,i=(a=n)+Dr(Nr()*(o-a+1)),u=e[i];e[i]=e[n],e[n]=u}return e.length=t,e},Ur="object"==typeof A&&A&&A.Object===Object&&A,Gr="object"==typeof self&&self&&self.Object===Object&&self,Br=Ur||Gr||Function("return this")(),Fr=Br.Symbol,Wr=Object.prototype,Vr=Wr.hasOwnProperty,Hr=Wr.toString,Yr=Fr?Fr.toStringTag:void 0,zr=Object.prototype.toString,qr=Fr?Fr.toStringTag:void 0,Kr=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":qr&&qr in Object(e)?function(e){var t=Vr.call(e,Yr),n=e[Yr];try{e[Yr]=void 0;var r=!0}catch(e){}var o=Hr.call(e);return r&&(t?e[Yr]=n:delete e[Yr]),o}(e):zr.call(e)},Jr=function(e){return null!=e&&"object"==typeof e},Qr=function(e){return Jr(e)&&"[object Arguments]"==Kr(e)},Xr=Object.prototype,$r=Xr.hasOwnProperty,Zr=Xr.propertyIsEnumerable,eo=Qr(function(){return arguments}())?Qr:function(e){return Jr(e)&&$r.call(e,"callee")&&!Zr.call(e,"callee")},to=Array.isArray,no={exports:{}};h=(p=(f=(l=(c=no.exports)&&!c.nodeType&&c)&&no&&!no.nodeType&&no)&&f.exports===l?Br.Buffer:void 0)?p.isBuffer:void 0,no.exports=h||function(){return!1};var ro=/^(?:0|[1-9]\d*)$/,oo=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ao={};ao["[object Float32Array]"]=ao["[object Float64Array]"]=ao["[object Int8Array]"]=ao["[object Int16Array]"]=ao["[object Int32Array]"]=ao["[object Uint8Array]"]=ao["[object Uint8ClampedArray]"]=ao["[object Uint16Array]"]=ao["[object Uint32Array]"]=!0,ao["[object Arguments]"]=ao["[object Array]"]=ao["[object ArrayBuffer]"]=ao["[object Boolean]"]=ao["[object DataView]"]=ao["[object Date]"]=ao["[object Error]"]=ao["[object Function]"]=ao["[object Map]"]=ao["[object Number]"]=ao["[object Object]"]=ao["[object RegExp]"]=ao["[object Set]"]=ao["[object String]"]=ao["[object WeakMap]"]=!1;var io={exports:{}};_=(d=(y=(b=io.exports)&&!b.nodeType&&b)&&io&&!io.nodeType&&io)&&d.exports===y&&Ur.process,io.exports=function(){try{var e=d&&d.require&&d.require("util").types;return e||_&&_.binding&&_.binding("util")}catch(e){}}();var uo=io.exports,so=uo&&uo.isTypedArray,co=so?function(e){return so(e)}:function(e){return Jr(e)&&oo(e.length)&&!!ao[Kr(e)]},lo=no.exports,fo=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ro.test(e))&&e>-1&&e%1==0&&e<t},po=Object.prototype.hasOwnProperty,ho=Object.prototype,bo=(v=Object.keys,m=Object,function(e){return v(m(e))}),yo=Object.prototype.hasOwnProperty,_o=function(e,t){var n=to(e),r=!n&&eo(e),o=!n&&!r&&lo(e),a=!n&&!r&&!o&&co(e),i=n||r||o||a,u=i?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=u.length;for(var c in e)(t||po.call(e,c))&&(!i||!("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||fo(c,s)))&&u.push(c);return u},vo=function(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ho)}(e))return bo(e);var t=[];for(var n in Object(e))yo.call(e,n)&&"constructor"!=n&&t.push(n);return t},mo=function(e){return null!=e&&oo(e.length)&&!function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=Kr(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?_o(e):vo(e)},go=function(e){return null==e?[]:function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(mo(e),function(t){return e[t]})};function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Oo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ko(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Oo(a,r,o,i,u,"next",e)}function u(e){Oo(a,r,o,i,u,"throw",e)}i(void 0)})}}function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function So(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xo(e){return(xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eo(e,t){return(Eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(jo=function(){return!!e})()}function To(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Io=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return t=xo(t=r),So(n=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,jo()?Reflect.construct(t,[],xo(this).constructor):t.apply(this,undefined)),"_inputText",void 0),So(n,"_disableStaticSuggestions",void 0),So(n,"_customModeNames",void 0),n._inputText=e,n._disableStaticSuggestions=o,n._customModeNames=[],n}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Eo(r,e),t=[{key:"_isShortCircuit",value:function(){return!this._inputText.length}},{key:"customModeNames",get:function(){return this._customModeNames}},{key:"_fallback",value:function(){return[]}},{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return ko(function(){var e,t,n,r;return To(this,function(o){switch(o.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];o.label=1;case 1:return o.trys.push([1,3,,4]),e=this._inputText.split(" ").length>500?this._inputText.split(" ").slice(0,500).join(" "):this._inputText,t=this,[4,Xe("api/paraphraser/context-custom-modes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){So(e,t,n[t])})}return e}({json:{inputText:e,disable_static_suggestions:this._disableStaticSuggestions}},it))];case 2:var a,i;return t._apiResponse=o.sent(),n=(to(i=(function(e){if(Array.isArray(e))return wo(e)}(a=this._apiResponse.data.personas)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e){if(e){if("string"==typeof e)return wo(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wo(e,void 0)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}))?function(e){return Mr(function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e))}:function(e){return Mr(go(e))})(i),this._customModeNames=n,[3,4];case 3:return r=o.sent(),T.error(r),this._skipLoad("apiError",this._fallback.bind(this)),[3,4];case 4:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e,t){return ko(function(){return To(this,function(n){switch(n.label){case 0:return[4,new r(e,t)._load()];case 1:return[2,n.sent()]}})})()}}],t&&Po(r.prototype,t),n&&Po(r,n),r}(lt);function Ro(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ao(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Ro(a,r,o,i,u,"next",e)}function u(e){Ro(a,r,o,i,u,"throw",e)}i(void 0)})}}function Co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function No(e,t){return(No=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mo=function(){return!!e})()}function Uo(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Go=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){if(!(this instanceof r))throw TypeError("Cannot call a class as a function");t=Do(t=r),Lo(n=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,Mo()?Reflect.construct(t,[],Do(this).constructor):t.apply(this,undefined)),"_systemPromptText",void 0),Lo(n,"_userPromptText",void 0),Lo(n,"_type",void 0),Lo(n,"_cost",void 0),Lo(n,"_stripSignature",void 0),Lo(n,"_predictions",[]),Lo(n,"_serverValues",void 0),Lo(n,"_usage",{}),Lo(n,"_timedout",void 0),Lo(n,"_quotaExhausted",void 0);var t,n,o=e||{},a=o.systemPromptText,i=o.userPromptText,u=o.type,s=o.cost,c=o.stripSignature;return n._systemPromptText=F.checkCyrillicCharacters(a),n._userPromptText=F.checkCyrillicCharacters(i),n._type=u,n._cost=null!=s?s:1,n._stripSignature=null!=c&&c,n._timedout=!1,n._quotaExhausted=!1,n}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&No(r,e),t=[{key:"predictions",get:function(){return this._predictions}},{key:"serverValues",get:function(){return this._serverValues}},{key:"usage",get:function(){return this._usage}},{key:"timedout",get:function(){return this._timedout}},{key:"quotaExhausted",get:function(){return this._quotaExhausted}},{key:"_fallback",value:function(e){"TimeoutError"===e?this._timedout=!0:"Quota exhausted"===e&&(this._quotaExhausted=!0)}},{key:"_beforeLoad",value:function(){}},{key:"_load",value:function(){return Ao(function(){var e,t,n;return Uo(this,function(r){switch(r.label){case 0:e=it.timeout,r.label=1;case 1:return r.trys.push([1,3,,4]),t=this,[4,Xe("api/utils/generative-ai",{json:{systemPromptText:this._systemPromptText,userPromptText:this._userPromptText,type:this._type,ct:0===this._cost?0:void 0,stripSignature:this._stripSignature},timeout:e})];case 2:return t._apiResponse=r.sent(),this._predictions=this._apiResponse.data.predictions,this._serverValues=this._apiResponse.data.serverValues,this._usage=this._apiResponse.data.usage,[3,4];case 3:return n=r.sent(),T.error(n),this._skipLoad("apiError",this._fallback.bind(this,n.name)),[3,4];case 4:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){return Ao(function(){return Uo(this,function(t){switch(t.label){case 0:return[4,new r(e)._load()];case 1:return[2,t.sent()]}})})()}}],t&&Co(r.prototype,t),n&&Co(r,n),r}(lt);function Bo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Fo(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Bo(a,r,o,i,u,"next",e)}function u(e){Bo(a,r,o,i,u,"throw",e)}i(void 0)})}}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ho(e){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(zo=function(){return!!e})()}function qo(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Ko=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=Ho(n=r),Vo(t=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,zo()?Reflect.construct(n,[],Ho(this).constructor):n.apply(this,undefined)),"_modeSuggestions",[]),Vo(t,"_customModeSuggestions",[]),Vo(t,"_normalModeSuggestions",[]),Vo(t,"_text",void 0),Vo(t,"_apiResponse",{data:null,_cached:!1}),t._text=e,t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Yo(r,e),t=[{key:"apiResponse",get:function(){return this._apiResponse}},{key:"modeSuggestions",get:function(){return this._modeSuggestions}},{key:"modeCustomModeSuggestions",get:function(){return this._customModeSuggestions}},{key:"modeNonCustomModeSuggestions",get:function(){return this._normalModeSuggestions}},{key:"_isShortCircuit",value:function(){return!1}},{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit")}},{key:"fetchModeSuggestions",value:function(){return Xe("api/paraphraser/mode-suggestions",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Vo(e,t,n[t])})}return e}({json:{text:this._text}},it))}},{key:"processSuggestedModes",value:function(e){return e.map(function(e){var t=e.modeName,n=e.subModeName,r=e.score,o=e.label;return{modeName:E[t],subModeName:n,score:r,label:o}})}},{key:"getModeSuggestions",value:function(e){return e.filter(function(e){return e.score>=.05})}},{key:"_load",value:function(){return Fo(function(){var e,t,n,r,o;return qo(this,function(a){switch(a.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];a.label=1;case 1:return a.trys.push([1,3,,4]),e=this,[4,this.fetchModeSuggestions()];case 2:return e._apiResponse=a.sent(),n=void 0===(t=(this._apiResponse.data||{}).suggestedModes)?[]:t,r=this.processSuggestedModes(n),this._modeSuggestions=this.getModeSuggestions(r),this._customModeSuggestions=this._modeSuggestions.filter(function(e){return e.modeName===x.CUSTOM_MODE}),this._normalModeSuggestions=this._modeSuggestions.filter(function(e){return e.modeName!==x.CUSTOM_MODE}),[3,4];case 3:return o=a.sent(),T.error(o),this._skipLoad("apiError"),[3,4];case 4:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){return Fo(function(){return qo(this,function(t){switch(t.label){case 0:return[4,new r(e)._load()];case 1:return[2,t.sent()]}})})()}}],t&&Wo(r.prototype,t),n&&Wo(r,n),r}(lt);function Jo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Qo(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Jo(a,r,o,i,u,"next",e)}function u(e){Jo(a,r,o,i,u,"throw",e)}i(void 0)})}}function Xo(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var $o=function(e){return Qo(function(){return Xo(this,function(t){return[2,z.get(e)]})})()},Zo=function(e,t){return Qo(function(){return Xo(this,function(n){return z.set(e,t),[2]})})()};function ea(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ta(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ea(a,r,o,i,u,"next",e)}function u(e){ea(a,r,o,i,u,"throw",e)}i(void 0)})}}function na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aa(e,t){return(aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ia(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ia=function(){return!!e})()}function ua(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var sa=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e){var t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=oa(n=r),ra(t=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,ia()?Reflect.construct(n,[],oa(this).constructor):n.apply(this,undefined)),"_customModeName",void 0),t._customModeName=e,t}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&aa(r,e),t=[{key:"_isShortCircuit",value:function(){return!1}},{key:"customModeName",get:function(){return this._customModeName}},{key:"_fallback",value:function(){return this._customModeName}},{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return ta(function(){var e,t;return ua(this,function(n){switch(n.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];n.label=1;case 1:return n.trys.push([1,3,,4]),e=this,[4,Xe("api/paraphraser/refined-custom-mode",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ra(e,t,n[t])})}return e}({json:{customModeName:this._customModeName}},it))];case 2:return e._apiResponse=n.sent(),this._customModeName=this._apiResponse.data.refinedCustomMode||"",[3,4];case 3:return t=n.sent(),T.error(t),this._skipLoad("apiError",this._fallback.bind(this)),[3,4];case 4:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e){return ta(function(){return ua(this,function(t){switch(t.label){case 0:return[4,new r(e)._load()];case 1:return[2,t.sent()]}})})()}}],t&&na(r.prototype,t),n&&na(r,n),r}(lt);function ca(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var la=function(e){var t;return(t=function(){var t;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return t=e.customModeName,[4,sa.getInstance(t)];case 1:return[2,{refinedCustomMode:n.sent().customModeName}]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){ca(a,r,o,i,u,"next",e)}function u(e){ca(a,r,o,i,u,"throw",e)}i(void 0)})})()};function fa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pa(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){fa(a,r,o,i,u,"next",e)}function u(e){fa(a,r,o,i,u,"throw",e)}i(void 0)})}}function ha(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ba=function(e){return pa(function(){var t,n,r,o,a,i,u,s,c,l,f,p,h,b,y,d,_,v,m,g,w;return ha(this,function(O){switch(O.label){case 0:return t=e.text,n=e.mode,r=e.flip,o=e.rephrase,a=e.frozenWords,i=e.customModeName,u=e.options,s=e.customVoiceInstruction,c=e.prevSentence,l=e.nextSentence,p=(f=u||{}).forceShortCircuitSingleParaphrase,h=f.forceShortCircuitSingleFlip,b=f.preservePlaceholder,y=i,[4,z.get("SINGLE_PARA_PROMPT_VERSION")];case 1:return["v2","v3"].includes(O.sent())||!i?[3,3]:[4,la({customModeName:i})];case 2:y=O.sent().refinedCustomMode||i,O.label=3;case 3:return[4,gt.getInstance({inputText:t,mode:n,frozenWords:a,customModeName:y,forceShortCircuitSingleParaphrase:p,customVoiceInstruction:s,prevSentence:c,nextSentence:l})];case 4:return _=(d=O.sent()).beam(o),[4,Gt.getInstance(t,_,n,r,a,p||h)];case 5:return[4,(v=O.sent()).flippedBeam()];case 6:return m=O.sent(),g=v.textToPhrases(m,{preservePlaceholder:b}),[4,Xn.getInstance(t)];case 7:return w=O.sent(),[2,{flippedBeam:m,beam:_,isFlippedBeamReported:w.isTextReported(m),beamIndex:d.beamIndex(o),paraphraserModelId:d.modelId,flipperModelId:v.modelId,phrases:g,singleParaphraseSkipReason:d.skipReason,singleFlipSkipReason:v.skipReason,isSingleParaResponseCached:d.isCached,isSingleFlipResponseCached:v.isCached}]}})})()},ya=function(e){return pa(function(){var t,n,r,o,a,i,u,s,c,l,f,p;return ha(this,function(h){switch(h.label){case 0:return t=e.text,n=e.mode,r=e.flip,o=e.frozenWords,a=e.options,i=e.prevSentence,u=e.nextSentence,c=(s=a||{}).forceShortCircuitSingleParaphrase,l=s.preservePlaceholder,f=s.forceShortCircuitSingleFlip,[4,gt.getInstance({inputText:t,mode:n,frozenWords:o,forceShortCircuitSingleParaphrase:c,prevSentence:i,nextSentence:u})];case 1:return[4,Promise.all((p=h.sent()).beams.map(function(e,a){return pa(function(){var i,u,s,c;return ha(this,function(h){switch(h.label){case 0:return[4,Gt.getInstance(t,e,n,r,o,f)];case 1:return[4,(i=h.sent()).flippedBeam()];case 2:return u=h.sent(),s=i.textToPhrases(u,{preservePlaceholder:l}),[4,Xn.getInstance(t)];case 3:return c=h.sent(),[2,{beam:e,flippedBeam:u,isFlippedBeamReported:c.isTextReported(u),beamIndex:a,paraphraserModelId:p.modelId,flipperModelId:i.modelId,phrases:s,singleParaphraseSkipReason:p.skipReason,singleFlipSkipReason:i.skipReason,isSingleParaResponseCached:p.isCached,isSingleFlipResponseCached:i.isCached}]}})})()}))];case 2:return[2,{beams:h.sent()}]}})})()};function da(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _a(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){da(a,r,o,i,u,"next",e)}function u(e){da(a,r,o,i,u,"throw",e)}i(void 0)})}}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function ma(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ga=function(e){var t=e.text,n=e.options,r=e.inputText;return _a(function(){var e,o,a,i,u,s,c,l,f;return ma(this,function(p){switch(p.label){case 0:return o=(e=n||{}).preloadPhrasalAlts,a=e.preservePlaceholder,[4,Kt.getInstance(t,a)];case 1:return[4,(i=p.sent()).phrases];case 2:return u=p.sent(),s=F.getEachWordProperties(r,t,{preservePlaceholder:null!=a&&a}),c=0,l=u.map(function(e){return e.displayText}),on.getInstance(l),f={modelId:i.modelId,text:t,isCached:i.isCached,phrases:u.map(function(e){var t=e.pre,n=e.post,r=e.text,o=e.whitespace,a=e.displayText,i=e.placeholder,u=[];return a.split(" ").forEach(function(){u.push(va({},s[c])),c+=1}),{pre:t,post:n,text:r,whitespace:o,displayText:a,placeholder:i,types:u}})},o?[4,yn.getInstance(t,f.phrases.map(function(e){return e.text}))]:[3,4];case 3:p.sent(),p.label=4;case 4:return[2,f]}})})()},wa=function(e){var t=e.phrases,n=e.inputSentence;return _a(function(){var e,r,o,a,i,u,s,c,l,f;return ma(this,function(p){var h;e=[],t.forEach(function(t,n){switch(t.action){case"edited":r=null==(o=t.metaData)?void 0:o.text,t.displayText=r||"",delete t.action,delete t.metaData,e.push(va({},t));break;case"selected":r=null==(a=t.metaData)?void 0:a.text,t.displayText=r||"",delete t.action,delete t.metaData,e.push(va({},t)),F.anFix(e,e.length-1);break;case"split":var r,o,a,i=t.displayText.split(" "),u=t.text.split(" ");i.forEach(function(n,r){var o={text:u[r]?u[r]:"",displayText:n,pre:0===r?t.pre:"",post:r===i.length-1?t.post:"",whitespace:r===i.length-1?t.whitespace:" "};e.push(va({},o))});break;default:e.push(va({},t))}}),r="",o=!0,a=!1,i=void 0;try{for(u=e[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)c=s.value,r+=c.displayText+c.whitespace}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return h=r,l=F.getEachWordProperties(n,h),f=0,[2,{phrases:e.map(function(e){var t=e.pre,n=e.post,r=e.text,o=e.whitespace,a=e.displayText,i=[];return a.split(" ").forEach(function(){i.push(va({},l[f])),f+=1}),{pre:t,post:n,text:r,whitespace:o,displayText:a,types:i}})}]})})()};function Oa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var ka=function(e){var t;return(t=function(){var t,n,r;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(o){switch(o.label){case 0:return[4,Nn.getInstance(e.text)];case 1:return n=(t=o.sent()).isFallback,r=t.modelId,[2,{sentences:t.sentences,isFallback:n,sentenceSplitterModelId:r,isCached:t.isCached}]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){Oa(a,r,o,i,u,"next",e)}function u(e){Oa(a,r,o,i,u,"throw",e)}i(void 0)})})()};function Pa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Sa(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Pa(a,r,o,i,u,"next",e)}function u(e){Pa(a,r,o,i,u,"throw",e)}i(void 0)})}}function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ja(e){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ea(e,t,n[t])})}return e}function Ia(e,t){return(Ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ra(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ra=function(){return!!e})()}function Aa(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Ca=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(e,t,n){var o,a;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return a=ja(a=r),Ea(o=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,Ra()?Reflect.construct(a,[],ja(this).constructor):a.apply(this,undefined)),"_inputText",""),Ea(o,"_inputLang","en"),Ea(o,"_phrases",[]),Ea(o,"_texts",[]),Ea(o,"_indices",[]),o._inputText=e,o._texts=t,o._inputLang=n,o}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&Ia(r,e),t=[{key:"_isShortCircuit",value:function(){return Sa(function(){return Aa(this,function(e){switch(e.label){case 0:return[4,xt("multilingualThesaurus")];case 1:return[2,!e.sent()||0===this._inputText.length]}})}).call(this)}},{key:"_beforeLoad",value:function(){return Sa(function(){var e,t,n,r,o,a,i,u;return Aa(this,function(s){switch(s.label){case 0:return[4,this._isShortCircuit()];case 1:if(s.sent())return this._skipLoad("empty"),[2];e=0,t=!0,n=!1,r=void 0;try{for(o=this._texts[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)i=a.value,-1!==(u=this._inputText.indexOf(i,e))&&(this._indices.push({start:u,end:u+i.length-1}),e=u+i.length)}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return[2]}})}).call(this)}},{key:"allPhrasesAlts",get:function(){return this._phrases.reduce(function(e,t){var n,r;return n=Ta({},e),r=null!=(r=Ea({},t.text,t.alts))?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}),n},{})}},{key:"_load",value:function(){return Sa(function(){var e,t;return Aa(this,function(n){switch(n.label){case 0:return[4,this._beforeLoad()];case 1:if(n.sent(),this.isSkipped)return[2,this];n.label=2;case 2:return n.trys.push([2,4,,5]),e=this,[4,Xe("api/paraphraser/multilingual-thesaurus",Ta({json:Ta({inputText:this._inputText,inputLang:this._inputLang},this._indices.length&&{phrases:this._indices})},it))];case 3:return e._apiResponse=n.sent(),this._modelId=this._apiResponse.data.modelID||"paraphrase-thesaurus",this._phrases=this._apiResponse.data.thesaurus.map(function(e){var t={text:e.text,alts:[]};return t.alts=e.suggestions||[],t}),[3,5];case 4:return t=n.sent(),T.error(t),this._skipLoad("apiError"),[3,5];case 5:return[2,this]}})}).call(this)}}],n=[{key:"getInstance",value:function(e,t,n){return Sa(function(){return Aa(this,function(o){switch(o.label){case 0:return[4,new r(e,t,n)._load()];case 1:return[2,o.sent()]}})})()}}],t&&xa(r.prototype,t),n&&xa(r,n),r}(lt);function La(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Da(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Na(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Ma(e){return function(e){if(Array.isArray(e))return La(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e){if(e){if("string"==typeof e)return La(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return La(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ua=function(e){var t;return(t=function(){var t,n,r,o,a,i,u,s,c,l,f,p,h,b,y,d,_,v,m,g,w,O,k,P,S,x,E,j,T,I,R,A,C,L,D,N,M,U,G,B,F,W,V,H,Y,z,q,K,J,Q,X,$,Z,ee,te,ne,re,oe,ae,ie,ue;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(se){switch(se.label){case 0:return t=e.texts,n=e.sources,r=e.searchText,o=e.modeLabel,a={sources:{},alts:[]},i=!1,(null==n?void 0:n.flipper)&&(null==n?void 0:n.isMultilingualThesaurus)?(s=(u=n.flipper).beam,c=u.inputLanguage,[4,Ca.getInstance(s,t,c)]):[3,2];case 1:l=se.sent(),i?a.sources.flipper={modelId:l.modelId,skipReason:"profaneWords",isCached:l.isCached}:(h=(null==(p=l.allPhrasesAlts[r])?void 0:p.map(function(e){return{text:e,source:"paraphrasePhrase"}}))||[],(f=a.alts).push.apply(f,Ma(h)),a.sources.flipper={modelId:l.modelId,skipReason:l.skipReason,isCached:l.isCached}),se.label=2;case 2:return(null==n?void 0:n.flipper)?(y=(b=n.flipper).inputSentence,d=b.beam,_=b.mode,v=b.flip,g=void 0!==(m=b.forceShortCircuitSingleFlip)&&m,[4,Gt.getInstance(y,d,_,v,[],g)]):[3,4];case 3:w=se.sent(),i?a.sources.flipper={modelId:w.modelId,skipReason:"profaneWords",isCached:w.isCached}:(k=w.alts(r).map(function(e){return{text:e,source:"flipper"}}),(O=a.alts).push.apply(O,Ma(k)),a.sources.flipper={modelId:w.modelId,skipReason:w.skipReason,isCached:w.isCached}),se.label=4;case 4:return(P=(null==n?void 0:n.modeAwareParaphrasePhrase)&&(null==o?void 0:o.length))?(x=(S=n.modeAwareParaphrasePhrase).flippedBeam,j=void 0===(E=S.waitTimeout)?500:E,T=S.minWordsInPhrase,I={text:x,phrases:t.map(function(e){return{text:e}}),mode:o},[4,ye(Sn.getInstance(I.text,I.phrases,I.mode,{minWordsInPhrase:T}),null,j)]):[3,6];case 5:(R=se.sent().value)&&Na(R,Sn)&&(C=(null==(A=R.suggestions[r])?void 0:A.map(function(e){return{text:e,source:"mapp"}}))||[],L=R.isSkipped,D=R.skipReason,L||0!==C.length||(D="empty"),i?a.sources.modeAwareParaphrasePhrase={modelId:R.modelId,skipReason:"profaneWords",isCached:R.isCached}:((N=a.alts).push.apply(N,Ma(C)),a.sources.modeAwareParaphrasePhrase={modelId:R.modelId,skipReason:D,isCached:R.isCached})),se.label=6;case 6:return!(null==n?void 0:n.paraphrasePhrase)||P?[3,8]:(U=(M=n.paraphrasePhrase).flippedBeam,B=void 0===(G=M.waitTimeout)?500:G,[4,ye(yn.getInstance(U,t),null,B)]);case 7:(F=se.sent().value)&&Na(F,yn)&&(W=F.allPhrasesAlts[r].map(function(e){return{text:e,source:"paraphrasePhrase"}}),V=F.isSkipped,H=F.skipReason,V||0!==W.length||(H="empty"),i?a.sources.paraphrasePhrase={modelId:F.modelId,skipReason:"profaneWords",isCached:F.isCached}:((Y=a.alts).push.apply(Y,Ma(W)),a.sources.paraphrasePhrase={modelId:F.modelId,skipReason:H,isCached:F.isCached})),se.label=8;case 8:return(null==n?void 0:n.phrasalThesaurus)?[4,ye(on.getInstance(t),null,(null==(z=e.sources)?void 0:z.phrasalThesaurusWaitTimeout)||500)]:[3,10];case 9:(q=se.sent().value)&&Na(q,on)&&(K=q.allPhrasesAlts[r].map(function(e){return{text:e,source:"paraphraseThesaurus"}}),i?a.sources.paraphraseThesaurus={modelId:q.modelId,skipReason:"profaneWords",isCached:q.isCached}:((J=a.alts).push.apply(J,Ma(K)),Q=q.isSkipped,X=q.skipReason,Q||0!==K.length||(X="empty"),a.sources.paraphraseThesaurus={modelId:q.modelId,skipReason:X,isCached:q.isCached})),se.label=10;case 10:$=new Set,Z=[],ee=!0,te=!1,ne=void 0,se.label=11;case 11:se.trys.push([11,16,17,18]),re=a.alts[Symbol.iterator](),se.label=12;case 12:return(ee=(oe=re.next()).done)?[3,15]:((ae=oe.value).text===e.selectedAltText&&(ae.text=e.searchText,ae.source="inputValue"),$.has(ae.text)?[3,14]:($.add(ae.text),[4,Xn.getInstance(r)]));case 13:ie=se.sent(),ae.isReported=ie.isTextReported(ae.text),Z.push(ae),se.label=14;case 14:return ee=!0,[3,12];case 15:return[3,18];case 16:return ue=se.sent(),te=!0,ne=ue,[3,18];case 17:try{ee||null==re.return||re.return()}finally{if(te)throw ne}return[7];case 18:return a.alts=Z,[2,a]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){Da(a,r,o,i,u,"next",e)}function u(e){Da(a,r,o,i,u,"throw",e)}i(void 0)})})()};function Ga(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var Ba=function(e){var t;return(t=function(){var t,n,r,o,a,i,u;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:return t=e.text,o={suggestions:{},text:t,phrases:n=e.phrases,mode:r=e.mode},[4,Sn.getInstance(t,n,r)];case 1:return i=(a=s.sent()).suggestions,u=a.skipReason,o.suggestions=i||{},u&&(o.skipReason=u),[2,o]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){Ga(a,r,o,i,u,"next",e)}function u(e){Ga(a,r,o,i,u,"throw",e)}i(void 0)})})()};function Fa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Wa(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Fa(a,r,o,i,u,"next",e)}function u(e){Fa(a,r,o,i,u,"throw",e)}i(void 0)})}}function Va(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Ha=function(e){return Wa(function(){var t;return Va(this,function(n){switch(n.label){case 0:return t=e.inputText,[4,Ko.getInstance(t)];case 1:return[2,n.sent().modeSuggestions]}})})()},Ya=function(e){return Wa(function(){var t;return Va(this,function(n){switch(n.label){case 0:return t=e.inputText,[4,Ko.getInstance(t)];case 1:return[2,n.sent().modeCustomModeSuggestions]}})})()},za=function(e){return Wa(function(){var t;return Va(this,function(n){switch(n.label){case 0:return t=e.inputText,[4,Ko.getInstance(t)];case 1:return[2,n.sent().modeNonCustomModeSuggestions]}})})()};function qa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var Ka=function(e){var t,n=e.text;return(t=function(){var e;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return[4,Yn.getInstance(n)];case 1:return[2,{definitions:(e=t.sent()).definitions,isCached:e.isCached}]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){qa(a,r,o,i,u,"next",e)}function u(e){qa(a,r,o,i,u,"throw",e)}i(void 0)})})()};function Ja(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Qa(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Ja(a,r,o,i,u,"next",e)}function u(e){Ja(a,r,o,i,u,"throw",e)}i(void 0)})}}function Xa(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var $a=function(e){var t=e.referenceText,n=e.text;return Qa(function(){var e;return Xa(this,function(r){switch(r.label){case 0:return[4,Xn.getInstance(t)];case 1:return[4,(e=r.sent()).reportText(n)];case 2:return r.sent(),[2,{reportedTexts:e.reportedTexts}]}})})()},Za=function(e){var t=e.referenceText,n=e.text;return Qa(function(){var e;return Xa(this,function(r){switch(r.label){case 0:return[4,Xn.getInstance(t)];case 1:return[4,(e=r.sent()).unReportText(n)];case 2:return r.sent(),[2,{reportedTexts:e.reportedTexts}]}})})()};function ei(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var ti=function(e){var t;return(t=function(){var t,n;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return t=e.text,[4,ir.getInstance(t)];case 1:return[2,{words:(n=r.sent()).recommendedWords,isCached:n.isCached}]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){ei(a,r,o,i,u,"next",e)}function u(e){ei(a,r,o,i,u,"throw",e)}i(void 0)})})()};function ni(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ri(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){ni(a,r,o,i,u,"next",e)}function u(e){ni(a,r,o,i,u,"throw",e)}i(void 0)})}}function oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ii(e){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ui(e,t){return(ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function si(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(si=function(){return!!e})()}function ci(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var li=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(){var e,t;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return t=ii(t=r),ai(e=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,si()?Reflect.construct(t,[],ii(this).constructor):t.apply(this,undefined)),"_historyData",{id:"",mode:0,synonym_value:1,_data:{},created_at:"",updated_at:"",customModeName:"",customVoiceInstruction:{formality:"",vocabulary:"",personality:[]},inputLanguage:"en"}),e}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&ui(r,e),t=[{key:"setHistoryToStorage",value:function(e){return ri(function(){return ci(this,function(t){switch(t.label){case 0:return e.id?(Object.keys(e._data).forEach(function(t){var n,r,o={pre:"",post:e._data[t].post||"",text:e._data[t].input};o=F.parseNewline(o),e._data[t]=(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ai(e,t,n[t])})}return e}({},e._data[t]),r=r={input:o.text,post:o.post,output:e._data[t].output.trim()},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(r)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}),n)}),[4,Ee.set("historyData",JSON.stringify(e))]):[2];case 1:return t.sent(),[2]}})})()}},{key:"getHistoryFromStorage",value:function(){return ri(function(){var e;return ci(this,function(t){switch(t.label){case 0:return[4,Ee.get("historyData")];case 1:return(e=t.sent())&&(this._historyData=JSON.parse(e)),[2,this._historyData]}})}).call(this)}},{key:"getSentenceHistoryFromStorage",value:function(e){return ri(function(){var t;return ci(this,function(n){switch(n.label){case 0:return[4,Ee.get("historyData")];case 1:return(t=n.sent())&&(this._historyData=JSON.parse(t)),[2,this._historyData._data[e]]}})}).call(this)}},{key:"setHistorySentence",value:function(e){return ri(function(){var t,n;return ci(this,function(r){switch(r.label){case 0:return[4,this.getHistoryFromStorage()];case 1:return r.sent(),e.id&&e.sentence_id&&(null==(t=this._historyData)?void 0:t.id)===e.id&&(Object.keys(null==(n=this._historyData)?void 0:n._data)||[]).includes(e.sentence_id)?(this._historyData._data[e.sentence_id].output=e._sentence_text,this._historyData.mode=e.mode,this._historyData.synonym_value=e.synonym_value,this._historyData.customModeName=e.customModeName,this._historyData.customVoiceInstruction=e.customVoiceInstruction,this._historyData.inputLanguage=e.inputLanguage,this._historyData.dialect=e.dialect,this.setHistoryToStorage(this._historyData),[2,this._historyData]):[2,this._historyData]}})}).call(this)}},{key:"_beforeLoad",value:function(){}},{key:"_load",value:function(){return ri(function(){return ci(this,function(e){return[2,this]})}).call(this)}}],n=[{key:"getInstance",value:function(){return ri(function(){return ci(this,function(e){switch(e.label){case 0:return[4,(new r)._load()];case 1:return[2,e.sent()]}})})()}}],t&&oi(r.prototype,t),n&&oi(r,n),r}(lt);function fi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pi(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){fi(a,r,o,i,u,"next",e)}function u(e){fi(a,r,o,i,u,"throw",e)}i(void 0)})}}function hi(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var bi=function(){return pi(function(){return hi(this,function(e){switch(e.label){case 0:return[4,br.getInstance()];case 1:return[2,e.sent().allHistoryData]}})})()},yi=function(e){return pi(function(){var t;return hi(this,function(n){switch(n.label){case 0:return[4,Sr.getInstance({id:e})];case 1:return[2,null==(t=n.sent().historyItemData)?void 0:t.history]}})})()},di=function(){return pi(function(){return hi(this,function(e){switch(e.label){case 0:return[4,br.getInstance()];case 1:return[2,e.sent().deleteAllHistory()]}})})()},_i=function(e){return pi(function(){return hi(this,function(t){switch(t.label){case 0:return[4,Sr.getInstance({id:e})];case 1:return[2,t.sent().deleteHistory()]}})})()},vi=function(){return pi(function(){return hi(this,function(e){switch(e.label){case 0:return[4,li.getInstance()];case 1:return[2,e.sent().getHistoryFromStorage()]}})})()},mi=function(e){return pi(function(){var t,n;return hi(this,function(r){switch(r.label){case 0:return[4,li.getInstance()];case 1:return[4,r.sent().getSentenceHistoryFromStorage(e)];case 2:return t=r.sent(),[4,Xn.getInstance(t.input.trim())];case 3:return n=r.sent(),[2,{flippedBeam:t.output,beam:t.output,isFlippedBeamReported:n.isTextReported(t.output),beamIndex:0,paraphraserModelId:"history-data",flipperModelId:"history-data",phrases:F.textToPhrases({inputText:t.input,text:t.output}),isSingleParaResponseCached:!0,isSingleFlipResponseCached:!0}]}})})()},gi=function(e){return pi(function(){return hi(this,function(t){switch(t.label){case 0:return[4,li.getInstance()];case 1:return t.sent().setHistoryToStorage(e),[2]}})})()},wi=function(e){return pi(function(){return hi(this,function(t){switch(t.label){case 0:return[4,li.getInstance()];case 1:return t.sent().setHistorySentence(e),[2]}})})()};function Oi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var ki=function(e){var t;return(t=function(){var t,n;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return t=e.text,n=e.dialect,[4,Lr.getInstance(t,n)];case 1:return[2,{audio:r.sent().audio}]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){Oi(a,r,o,i,u,"next",e)}function u(e){Oi(a,r,o,i,u,"throw",e)}i(void 0)})})()};function Pi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var Si=function(e){var t;return(t=function(){var t,n;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:return t=e.inputText,n=e.disableStaticSuggestions,[4,Io.getInstance(t,n)];case 1:return[2,r.sent().customModeNames]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){Pi(a,r,o,i,u,"next",e)}function u(e){Pi(a,r,o,i,u,"throw",e)}i(void 0)})})()};function xi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}var Ei=function(e){var t;return(t=function(){var t,n,r,o,a,i,u,s,c,l;return function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(s){var c=[u,s];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(f){switch(f.label){case 0:return t=e.systemPromptText,n=e.userPromptText,r=e.type,o=e.ct,a=e.stripSignature,[4,Go.getInstance({systemPromptText:null!=t?t:"",userPromptText:n,type:r,cost:o,stripSignature:a})];case 1:return u=(i=f.sent()).predictions,s=i.usage,c=i.serverValues,l=i.skipReason,[2,{predictions:u,usage:s,serverValues:c,skipReason:l,timedout:i.timedout,quotaExhausted:i.quotaExhausted}]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){xi(a,r,o,i,u,"next",e)}function u(e){xi(a,r,o,i,u,"throw",e)}i(void 0)})})()};!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="55637e55-03a7-55d5-b481-bff56286bb39")}catch(e){}}()}}]);
//# sourceMappingURL=sourceMap/1264.js.map