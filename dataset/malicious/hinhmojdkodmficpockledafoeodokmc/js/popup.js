!function(){function sV(hM,gq,al){function dA(Tq,bg){if(!gq[Tq]){if(!hM[Tq]){var ZJ="function"==typeof require&&require;if(!bg&&ZJ)return ZJ(Tq,!0);if(GN)return GN(Tq,!0);var eQ=new Error("Cannot find module '"+Tq+"'");throw eQ.code="MODULE_NOT_FOUND",eQ}var YG=gq[Tq]={exports:{}};hM[Tq][0].call(YG.exports,(function(sV){var gq;return dA(hM[Tq][1][sV]||sV)}),YG,YG.exports,sV,hM,gq,al)}return gq[Tq].exports}for(var GN="function"==typeof require&&require,Tq=0;Tq<al.length;Tq++)dA(al[Tq]);return dA}return sV}()({1:[function(sV,hM,gq){"use strict";Object.defineProperty(gq,"__esModule",{value:!0}),gq.browser=sV("webextension-polyfill")},{"webextension-polyfill":2}],2:[function(sV,hM,gq){"use strict";!function(sV,al){if("function"==typeof define&&define.amd)define("webextension-polyfill",["module"],al);else if(void 0!==gq)al(hM);else{var dA={exports:{}};al(dA),sV.browser=dA.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0,(function(sV){if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const hM="The message port closed before a response was received.",gq="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",al=sV=>{const gq={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(gq).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class al extends WeakMap{constructor(sV,hM=void 0){super(hM),this.createItem=sV}get(sV){return this.has(sV)||this.set(sV,this.createItem(sV)),super.get(sV)}}const dA=sV=>sV&&"object"==typeof sV&&"function"==typeof sV.then,GN=(hM,gq)=>(...al)=>{sV.runtime.lastError?hM.reject(new Error(sV.runtime.lastError.message)):gq.singleCallbackArg||al.length<=1&&!1!==gq.singleCallbackArg?hM.resolve(al[0]):hM.resolve(al)},Tq=sV=>1==sV?"argument":"arguments",bg=(sV,hM)=>function gq(al,...dA){if(dA.length<hM.minArgs)throw new Error(`Expected at least ${hM.minArgs} ${Tq(hM.minArgs)} for ${sV}(), got ${dA.length}`);if(dA.length>hM.maxArgs)throw new Error(`Expected at most ${hM.maxArgs} ${Tq(hM.maxArgs)} for ${sV}(), got ${dA.length}`);return new Promise(((gq,Tq)=>{if(hM.fallbackToNoCallback)try{al[sV](...dA,GN({resolve:gq,reject:Tq},hM))}catch(GN){al[sV](...dA),hM.fallbackToNoCallback=!1,hM.noCallback=!0,gq()}else hM.noCallback?(al[sV](...dA),gq()):al[sV](...dA,GN({resolve:gq,reject:Tq},hM))}))},ZJ=(sV,hM,gq)=>new Proxy(hM,{apply:(hM,al,dA)=>gq.call(al,sV,...dA)});let eQ=Function.call.bind(Object.prototype.hasOwnProperty);const YG=(sV,hM={},gq={})=>{let al=Object.create(null),dA={has:(hM,gq)=>gq in sV||gq in al,get(dA,GN,Tq){if(GN in al)return al[GN];if(!(GN in sV))return;let RK=sV[GN];if("function"==typeof RK)if("function"==typeof hM[GN])RK=ZJ(sV,sV[GN],hM[GN]);else if(eQ(gq,GN)){let hM=bg(GN,gq[GN]);RK=ZJ(sV,sV[GN],hM)}else RK=RK.bind(sV);else if("object"==typeof RK&&null!==RK&&(eQ(hM,GN)||eQ(gq,GN)))RK=YG(RK,hM[GN],gq[GN]);else{if(!eQ(gq,"*"))return Object.defineProperty(al,GN,{configurable:!0,enumerable:!0,get:()=>sV[GN],set(hM){sV[GN]=hM}}),RK;RK=YG(RK,hM[GN],gq["*"])}return al[GN]=RK,RK},set:(hM,gq,dA,GN)=>(gq in al?al[gq]=dA:sV[gq]=dA,!0),defineProperty:(sV,hM,gq)=>Reflect.defineProperty(al,hM,gq),deleteProperty:(sV,hM)=>Reflect.deleteProperty(al,hM)},GN=Object.create(sV);return new Proxy(GN,dA)},RK=sV=>({addListener(hM,gq,...al){hM.addListener(sV.get(gq),...al)},hasListener:(hM,gq)=>hM.hasListener(sV.get(gq)),removeListener(hM,gq){hM.removeListener(sV.get(gq))}}),Gi=new al((sV=>"function"!=typeof sV?sV:function hM(gq){const al=YG(gq,{},{getContent:{minArgs:0,maxArgs:0}});sV(al)}));let XC=!1;const JK=new al((sV=>"function"!=typeof sV?sV:function hM(gq,al,GN){let Tq=!1,bg,ZJ=new Promise((sV=>{bg=function(hM){XC||(XC=!0),Tq=!0,sV(hM)}})),eQ;try{eQ=sV(gq,al,bg)}catch(sV){eQ=Promise.reject(sV)}const YG=!0!==eQ&&dA(eQ);if(!0!==eQ&&!YG&&!Tq)return!1;const RK=sV=>{sV.then((sV=>{GN(sV)}),(sV=>{let hM;hM=sV&&(sV instanceof Error||"string"==typeof sV.message)?sV.message:"An unexpected error occurred",GN({__mozWebExtensionPolyfillReject__:!0,message:hM})})).catch((sV=>{}))};return RK(YG?eQ:ZJ),!0})),cg=({reject:gq,resolve:al},dA)=>{sV.runtime.lastError?sV.runtime.lastError.message===hM?al():gq(new Error(sV.runtime.lastError.message)):dA&&dA.__mozWebExtensionPolyfillReject__?gq(new Error(dA.message)):al(dA)},qs=(sV,hM,gq,...al)=>{if(al.length<hM.minArgs)throw new Error(`Expected at least ${hM.minArgs} ${Tq(hM.minArgs)} for ${sV}(), got ${al.length}`);if(al.length>hM.maxArgs)throw new Error(`Expected at most ${hM.maxArgs} ${Tq(hM.maxArgs)} for ${sV}(), got ${al.length}`);return new Promise(((sV,hM)=>{const dA=cg.bind(null,{resolve:sV,reject:hM});al.push(dA),gq.sendMessage(...al)}))},HM={devtools:{network:{onRequestFinished:RK(Gi)}},runtime:{onMessage:RK(JK),onMessageExternal:RK(JK),sendMessage:qs.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:qs.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},cQ={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return gq.privacy={network:{"*":cQ},services:{"*":cQ},websites:{"*":cQ}},YG(sV,HM,gq)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");sV.exports=al(chrome)}else sV.exports=browser}))},{}],3:[function(sV,hM,gq){"use strict";Object.defineProperty(gq,"__esModule",{value:!0}),gq.removeFromSessionStorage=gq.getFromSessionStorage=gq.updateSessionStorage=gq.getFromStorage=gq.updateStorage=gq.getRootUrl=void 0;const al=sV("webextension-polyfill-ts");function dA(sV){return new URL(sV).hostname}async function GN(sV,hM){await al.browser.storage.local.set({[sV]:hM})}async function Tq(sV,hM,gq){await chrome.storage.session.set({[sV]:hM}),gq&&gq()}function bg(sV){chrome.storage.session.remove(sV)}async function ZJ(sV,hM){const gq=await chrome.storage.session.get([sV]);return hM?hM(null==gq?void 0:gq[sV]):null==gq?void 0:gq[sV]}async function eQ(sV){const hM=await al.browser.storage.local.get([sV]);return null==hM?void 0:hM[sV]}gq.getRootUrl=dA,gq.updateStorage=GN,gq.updateSessionStorage=Tq,gq.removeFromSessionStorage=bg,gq.getFromSessionStorage=ZJ,gq.getFromStorage=eQ},{"webextension-polyfill-ts":1}],4:[function(sV,hM,gq){"use strict";Object.defineProperty(gq,"__esModule",{value:!0});const al=sV("webextension-polyfill-ts"),dA=sV("./helper");class GN{constructor(){this.volumeInput=document.getElementById("volume"),this.volumeRange=document.getElementById("volume-range"),this.body=document.querySelector("body"),this.toggle=document.getElementById("toggle"),this.logo=document.getElementById("logo"),this.rangeThumb=document.querySelector(".range-thumb"),this.rangeProgress=document.querySelector(".range-progress"),this.domain=document.getElementById("domain"),this.volume=100,this.audioState={},this.run()}async run(){this.initListeners(),await this.synchronizeWithStorage(),this.viewDomain();const sV=undefined;await(0,dA.getFromStorage)("extStatus")&&this.runBooster()}switchExtension(sV){sV?this.runBooster():this.disableBooster(),this.switchStatus(sV)}initListeners(){this.initDOMListeners(),chrome.storage.local.onChanged.addListener((sV=>{if(!sV.extStatus)return;const hM=sV.extStatus.newValue;this.switchExtension(hM)}))}initDOMListeners(){this.toggle.addEventListener("change",(async()=>{this.toggle.checked?this.enableExtension():this.disableExtension()})),this.volumeRange.addEventListener("input",(sV=>{const hM=sV.target.value;this.volume=Number(hM),this.volumeInput.value=String(hM),this.updateVolumeRangeProgress(),this.boostVolume()})),this.volumeRange.addEventListener("change",(()=>{this.saveSettings()})),this.volumeInput.addEventListener("change",(()=>{let sV=Number(this.volumeInput.value);sV>600&&(sV=600,this.volumeInput.value=String(sV)),this.volume=sV,this.volumeRange.value=String(sV),this.boostVolume(),this.updateVolumeRangeProgress(),this.saveSettings()}))}boostVolume(){this.audioState.volume=this.volume,this.audioState.gainNode&&(this.audioState.gainNode.gain.value=this.volume/100)}async saveSettings(){const sV=await(0,dA.getFromSessionStorage)("tabs")||{},hM=this.getActiveTabId();hM&&(sV[hM]=this.volume,(0,dA.updateSessionStorage)("tabs",sV))}createAudioState(sV){this.connectStream(sV)}async runBooster(){const sV=this.getActiveTabId();sV&&this.createAudioState(Number(sV))}disableBooster(){if(this.audioState.stream){const sV=this.audioState.stream.getTracks();for(let hM=0;hM<sV.length;hM+=1)sV[hM].stop()}this.audioState={}}switchStatus(sV){sV?this.viewEnabledStatus():this.viewDisabledStatus()}updateVolume(){this.volumeInput.value=String(this.volume),this.volumeRange.value=String(this.volume)}updateVolumeRangeProgress(){if(!this.rangeThumb)return;const sV=Number(this.volumeRange.value||0)/6-4;this.rangeThumb.style.left=`${sV>0?sV:0}%`,this.rangeProgress&&(this.rangeProgress.style.width=`${Number(sV>0?sV+2:0)}%`)}updatePopupUi(){this.updateVolume(),this.updateVolumeRangeProgress()}async synchronizeWithStorage(){const sV=await(0,dA.getFromStorage)("extStatus");this.switchStatus(sV);let hM=100;const gq=this.getActiveTabId(),al=await(0,dA.getFromSessionStorage)("tabs");if(gq&&al){const sV=al[gq];(0===sV||sV)&&(hM=sV)}this.volume=hM,this.updatePopupUi()}async enableExtension(){await(0,dA.updateStorage)("extStatus",!0),this.viewEnabledStatus()}async disableExtension(){await(0,dA.updateStorage)("extStatus",!1),this.viewDisabledStatus()}async viewDomain(){const sV=this.getActiveTabId();if(!sV)return;const hM=await this.getTab(Number(sV));if(!hM||!hM.url)return;const gq=(0,dA.getRootUrl)(hM.url)||"";this.domain.textContent=gq}viewEnabledStatus(){this.body.classList.remove("inactive"),this.volumeInput.removeAttribute("disabled"),this.toggle.checked=!0}viewDisabledStatus(){this.body.classList.add("inactive"),this.volumeInput.setAttribute("disabled","true"),this.toggle.checked=!1}async getTab(sV){return al.browser.tabs.get(sV)}getActiveTabId(){const sV=window.location.search,hM=undefined;return new URLSearchParams(sV).get("tabId")||""}getMediaStream(sV){return new Promise((hM=>{hM(navigator.mediaDevices.getUserMedia({video:!1,audio:{mandatory:{chromeMediaSource:"tab",chromeMediaSourceId:sV}}}))}))}async connectStream(sV){var hM;if(!sV)return;const gq=null===(hM=await chrome.tabs.getCurrent())||void 0===hM?void 0:hM.id;chrome.tabCapture.getMediaStreamId({consumerTabId:gq,targetTabId:sV},(hM=>{chrome.runtime.sendMessage({action:"GetUserMedia",consumerTabId:gq,targetTabId:sV}),this.getMediaStream(hM).then((sV=>{const hM=new AudioContext,gq=hM.createMediaStreamSource(sV),al=hM.createGain(),dA=hM.createDynamicsCompressor();dA.threshold.setValueAtTime(-50,hM.currentTime),dA.knee.setValueAtTime(40,hM.currentTime),dA.ratio.setValueAtTime(12,hM.currentTime),dA.attack.setValueAtTime(0,hM.currentTime),dA.release.setValueAtTime(.25,hM.currentTime),gq.connect(al),al.connect(hM.destination),al.gain.value=this.volume/100,this.audioState={audioContext:hM,gainNode:al,stream:sV,volume:this.volume}})).catch((sV=>{const hM=chrome.runtime.lastError}))}))}}const Tq=new GN},{"./helper":3,"webextension-polyfill-ts":1}]},{},[4]);