"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d600cf27-5cc4-5bc5-8f02-8b031da1cca4")}catch(e){}}();
(self.webpackChunk_loomhq_chrome_extension=self.webpackChunk_loomhq_chrome_extension||[]).push([[29849],{2967:(e,t,n)=>{n.d(t,{c:()=>g});var r=n(63101),a=n(42685),o=n(79214),i=n(75418),c=n(32821),l=n(69771),u=n(92860),s=n(61670),d=n(9360),f=n(54880),p=n.n(f),v=n(86875),h=n(8126),m=n(6125),y=n(21127);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var g=function(e){function t(){var e,n,a,c;(0,r.A)(this,t);for(var u=arguments.length,s=new Array(u),d=0;d<u;d++)s[d]=arguments[d];return n=this,a=t,c=[].concat(s),a=(0,i.A)(a),e=(0,o.A)(n,b()?Reflect.construct(a,c||[],(0,i.A)(n).constructor):a.apply(n,c)),(0,l.A)(e,"state",e.getInitialState()),(0,l.A)(e,"mounted",!1),(0,l.A)(e,"onMediaDisplayed",(function(){var t=e.props.item;v.i.emit("media-viewed",{fileId:t.id,viewingLevel:"full"})})),e}return(0,c.A)(t,e),(0,a.A)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.init()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.release()}},{key:"safeSetState",value:function(e){this.mounted&&this.setState(w(w({},this.state),e))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.needsReset(e,this.props)&&(this.release(),this.setState(this.initialState))}},{key:"componentDidUpdate",value:function(e){this.needsReset(e,this.props)&&this.init()}},{key:"render",value:function(){var e=this;return this.state.content.match({pending:function(){return u.createElement(m.y,null)},successful:function(t){return u.createElement(u.Fragment,null,e.renderSuccessful(t))},failed:function(t){var n=e.props.item;return u.createElement(h.Ay,{fileId:n.id,fileState:n,error:t,supressAnalytics:!0},u.createElement("p",null,u.createElement(s.A,d.D.try_downloading_file)),e.renderDownloadButton(t))}})}},{key:"getInitialState",value:function(){return this.initialState}},{key:"renderDownloadButton",value:function(e){var t=this.props,n=t.item,r=t.mediaClient,a=t.collectionName,o=t.traceContext;return u.createElement(y.Oe,{fileState:n,mediaClient:r,error:e,collectionName:a,traceContext:o})}},{key:"needsReset",value:function(e,t){return!p()(e.item,t.item)||e.collectionName!==t.collectionName}}])}(u.Component)},12775:(e,t,n)=>{n.r(t),n.d(t,{AudioViewer:()=>O});var r=n(843),a=n(63101),o=n(42685),i=n(79214),c=n(75418),l=n(32821),u=n(69771),s=n(33196),d=n.n(s),f=n(92860),p=n(86875),v=n(55684),h=n(50158),m=n(75538),y=n(65610),A=n(2967),w=n(39009),b=n(41856),g=n(18960);function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}var k=f.createElement(y.u,null,f.createElement(v.A,{label:"cover",LEGACY_size:"xlarge",color:"currentColor",LEGACY_primaryColor:"#22272B",LEGACY_secondaryColor:"#9FADBC"})),C=function(e,t,n){return t.getImageUrl(e.id,{collection:n})},O=function(e){function t(){var e,n,o,l;(0,a.A)(this,t);for(var s=arguments.length,v=new Array(s),h=0;h<s;h++)v[h]=arguments[h];return n=this,o=t,l=[].concat(v),o=(0,c.A)(o),e=(0,i.A)(n,E()?Reflect.construct(o,l||[],(0,c.A)(n).constructor):o.apply(n,l)),(0,u.A)(e,"renderCover",(function(){var t=e.props.item,n=e.state.coverUrl;return n&&"error"!==t.status?f.createElement(y.Ip,{src:n,alt:t.name}):k})),(0,u.A)(e,"saveAudioElement",(function(e){e&&e.setAttribute("controlsList","nodownload")})),(0,u.A)(e,"onFirstPlay",(function(){var t=e.props.item;p.i.emit("media-viewed",{fileId:t.id,viewingLevel:"full"})})),(0,u.A)(e,"onError",(function(){var t=e.props.onError;t&&t(new m.dA("audioviewer-playback"))})),(0,u.A)(e,"loadCover",(function(e){return new Promise(function(){var t=(0,r.A)(d().mark((function t(n,r){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new Image).src=e,a.onload=n,a.onerror=r;case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})),(0,u.A)(e,"setCoverUrl",(0,r.A)(d().mark((function t(){var n,r,a,o,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.mediaClient,a=n.item,o=n.collectionName,"processed"===a.status){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,C(a,r,o);case 5:return i=t.sent,t.prev=6,t.next=9,e.loadCover(i);case 9:e.safeSetState({coverUrl:i}),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(6);case 14:case"end":return t.stop()}}),t,null,[[6,12]])})))),e}return(0,l.A)(t,e),(0,o.A)(t,[{key:"initialState",get:function(){return{content:h.P.pending()}}},{key:"renderSuccessful",value:function(e){var t=this.props,n=t.item,r=t.showControls,a=t.previewCount,o=t.onCanPlay,i=0===a;return(0,w.l)()?f.createElement(y.Y$,null,this.renderCover(),f.createElement(y.Ez,null,f.createElement(y.fP,{autoPlay:i,controls:!0,ref:this.saveAudioElement,src:e,preload:"metadata"}))):f.createElement(y.Y$,{"data-testid":"media-viewer-audio-content"},this.renderCover(),f.createElement(y.Ez,null,f.createElement(b.l,{type:"audio",isAutoPlay:i,src:e,fileId:n.id,isShortcutEnabled:!0,showControls:r,onCanPlay:o,onFirstPlay:this.onFirstPlay,onError:this.onError})))}},{key:"init",value:(n=(0,r.A)(d().mark((function e(){var t,n,r,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.mediaClient,r=t.item,a=t.collectionName,e.prev=1,"processed"!==r.status){e.next=10;break}return e.next=5,n.file.getArtifactURL(r.artifacts,"audio.mp3",a);case 5:if(o=e.sent){e.next=8;break}throw new m.dA("audioviewer-missing-artefact");case 8:e.next=16;break;case 10:return e.next=12,(0,g.s)(r);case 12:if(o=e.sent){e.next=16;break}return this.safeSetState({content:h.P.pending()}),e.abrupt("return");case 16:this.setCoverUrl(),this.safeSetState({content:h.P.successful(o)}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),this.safeSetState({content:h.P.failed(new m.dA("audioviewer-fetch-url",e.t0 instanceof Error?e.t0:void 0))});case 23:case"end":return e.stop()}}),e,this,[[1,20]])}))),function(){return n.apply(this,arguments)})},{key:"release",value:function(){var e=this.state.content;e.data&&URL.revokeObjectURL(e.data)}}]);var n}(A.c)},18960:(e,t,n)=>{n.d(t,{s:()=>c});var r=n(843),a=n(33196),o=n.n(a),i=n(73333),c=function(){var e=(0,r.A)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,i.Cs)(t)){e.next=14;break}if(!(n=t.preview)){e.next=14;break}return e.prev=3,e.t0=URL,e.next=7,n;case 7:return e.t1=e.sent.value,e.abrupt("return",e.t0.createObjectURL.call(e.t0,e.t1));case 11:return e.prev=11,e.t2=e.catch(3),e.abrupt("return",void 0);case 14:return e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},39009:(e,t,n)=>{n.d(t,{l:()=>r});var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator;return-1!==e.userAgent.indexOf("MSIE")||e.appVersion.indexOf("Trident/")>0}},55684:(e,t,n)=>{t.A=void 0;var r=i(n(92860)),a=i(n(64061)),o=i(n(85010));function i(e){return e&&e.__esModule?e:{default:e}}const c=e=>r.default.createElement(a.default,Object.assign({name:"AudioIcon",LEGACY_fallbackIcon:o.default},e));c.displayName="AudioIconMigration",t.A=c},64061:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(92860)),a=o(n(53103));function o(e){return e&&e.__esModule?e:{default:e}}const i=e=>r.default.createElement(a.default,Object.assign({name:"AudioIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M14.746 1.188A.75.75 0 0 1 15 1.75V11a3 3 0 1 1-3-3h1.5V5.85L7 6.662V12a3 3 0 1 1-3-3h1.5V2.75a.75.75 0 0 1 .657-.744l8-1a.75.75 0 0 1 .59.182M5.5 10.5H4A1.5 1.5 0 1 0 5.5 12zM7 5.15l6.5-.812V2.6L7 3.412zm6.5 4.35H12a1.5 1.5 0 1 0 1.5 1.5z" clip-rule="evenodd"/>'},e));i.displayName="AudioIcon",t.default=i},85010:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(92860))&&r.__esModule?r:{default:r},o=n(30764);const i=e=>a.default.createElement(o.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><rect width="16" height="16" x="4" y="4" fill="currentcolor" rx="2"/><path fill="inherit" d="M16 9.283V13.6h-.003A1.5 1.5 0 1 1 14.5 12q.264.001.5.085v-2.08l-4 .431V14.6h-.003A1.5 1.5 0 0 1 8 14.5a1.5 1.5 0 0 1 2-1.415V9.034c0-.238.186-.451.432-.478l5.136-.553a.38.38 0 0 1 .432.384z"/></svg>'},e));i.displayName="MediaServicesAudioIcon",t.default=i}}]);
//# sourceMappingURL=@atlaskit-internal_audioViewer.js.map
//# debugId=d600cf27-5cc4-5bc5-8f02-8b031da1cca4
