/**
* @license FireShot - Webpage Screenshots and Annotations
* Copyright (C) 2007-2025 Evgeny Vokilsus (contacts@getfireshot.com)
*/

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a53c1aca-929d-5ce4-80d6-433c3383bb71")}catch(e){}}();
(()=>{function ai(){return new Proxy({},{get:(e,t)=>(...i)=>{let o=null;return typeof i[i.length-1]=="function"&&(o=i.pop()),new Promise(s=>{chrome.runtime.sendMessage({message:"callExtensionMethodMsg",method:t,params:i,async:o!==null},c=>{chrome.runtime.lastError,o&&typeof c<"u"&&o(c),s(c)})})}})}function ue(e,t){return Xe.getOption(e,t)}function re(e,t){Xe.setOption(e,t+"")}var Xe={storage:{},onChanged:{listeners:[],addListener(e){this.listeners.indexOf(e)===-1&&this.listeners.push(e)},removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)},notifyListeners(e){this.listeners.forEach(t=>{try{t(e)}catch{}})}},initPromise:null,inited:!1,onInit:null,assignOptions:function(e){this.storage={...this.storage,...e},chrome.storage.local.set(e)},ensureLoaded:function(){return this.initPromise=this.initPromise||new Promise(e=>{chrome.storage.onChanged.addListener((i,o)=>{if(o==="local"){let s=Object.keys(i);for(let c of s)this.storage[c]=i[c].newValue;this.inited&&this.onChanged.notifyListeners(i)}});let t=i=>{this.inited=!0,i&&(this.storage=i),this.onInit?this.onInit().then(()=>this.onInit=null).finally(e):e()};chrome.storage.local.get(null,i=>{chrome.runtime.lastError&&console.error(chrome.runtime.lastError),i?t(i):(console.log("chrome.storage.local.get failed to obtain preferences"),setTimeout(()=>chrome.storage.local.get(null,s=>{!s&&console.log("chrome.storage.local.get failed to obtain preferences for the second time"),t(s)}),500))})}),this.initPromise},setOption:function(e,t){if(!this.inited)console.error(`Preferences were not initialized yet! (setOption(${e}))`);else{var i={};i[e]=t,chrome.storage.local.set(i),this.storage[e]=t}},getOption:function(e,t){if(!this.inited)console.error(`Preferences were not initialized yet! (getOption(${e}))`);else return typeof this.storage[e]>"u"?t:this.storage[e]}};var U={K:0,R:1,le:2,fe:3,de:4,he:5,pe:7,Ge:8,p:10,me:11,M:12,qe:13,Ye:100,Je:101,j:0,U:1,H:2,ge:3,S:4,Xe:268435456,W:8192,V:"lastAction",z:"lastMode",ye:"enableAPI",G:"fsDebug",ve:"errorReporting",be:"notifyOnUpdates",Qe:!1,Ze:"disableWASMWorker",et:"allTabsCaptureOnlyVisiblePart",t:"pluginProMode",i:"registeredMode",tt:"curVersion",nt:"curVersion1",m:"filenameTemplate",g:"filenameNumber",I:"filenameNumberPadCheck",k:"filenameNumberPadValue",T:"filenameMaxLen",we:"contextMenuIntegration",rt:"pageScrollSpeedValue",it:"allowInfiniteScrolling",ot:"sendUsageDataToGA",_e:"newTabIsNextToSource",st:"screenshotDelay",at:"defaultFolderLite",ct:"FireShot",ut:"openFolderAfterSavingLite",lt:"noFilenamePrompt",ft:"closeTabAfterSavingLite",q:"batchModePrefs",dt:"historyRetainPeriod",ht:"notifyOnUpdates",pt:"captureTimeLimit",Ee:"nativeFetchErrorCntr-",mt:"uCheck",gt:"uEmit",yt:"https://ssl.getfireshot.com/images/api/utm.gif?dummy:",vt:"canBeCapturedBetterNextShow",Y:"errorFilter",Se:"https://ssl.getfireshot.com/sentry-filter-%VERSION%.csv",J:"onlyLite",bt:"nativeInstall",wt:"userLikedFireShot",_t:"userRatedFireShot",Et:"resultPageShown",St:"WASMErrorReported",xt:"nextAdShownTime",v:"guid",It:1296e6,kt:2592e5,Tt:432e5,At:1e4,Ct:"png",xe:"queuedBadgeURL.1",Ot:"showSelectionHint.1",Pt:"advancedFeaturesAvailable",Dt:"showAdvertising",Rt:"betaPreviewWarningExpanded",Mt:"betaPreviewCompactMode",Nt:"PDFOptionsEverDisplayed",X:"regUserCorrected",Q:"regKeyCorrected",A:"regUser",u:"regKey",Ft:"taskProgressValue",Bt:"https://ssl.getfireshot.com/images/api/chromefeatures.gif?dummy:",Z:"FireShot Capture %n - %t - [%e]",Lt:"https://getfireshot.com/downloads/%VERSION%/fireshot-chrome-plugin.exe",Ie:"https://screenshot-program.com/fireshot/crash_report.php",C:"captureState",b:"nativeHostReady",ke:"resumeMenuEnabled",Kt:"disableSelectionImprovements",o:"t",_:"te",Te:"checksum",Ae:1,ee:0,$t:1,jt:2,Ut:4,Ht:8,Wt:16};var hn=(function(e){let t=Object.prototype.toString;function i(n){switch(t.call(n)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return S(n,Error)}}function o(n,r){return t.call(n)===`[object ${r}]`}function s(n){return o(n,"ErrorEvent")}function c(n){return o(n,"DOMError")}function l(n){return o(n,"DOMException")}function h(n){return o(n,"String")}function d(n){return typeof n=="object"&&n!==null&&"__sentry_template_string__"in n&&"__sentry_template_values__"in n}function m(n){return n===null||d(n)||typeof n!="object"&&typeof n!="function"}function g(n){return o(n,"Object")}function v(n){return typeof Event<"u"&&S(n,Event)}function _(n){return typeof Element<"u"&&S(n,Element)}function k(n){return o(n,"RegExp")}function b(n){return!!(n&&n.then&&typeof n.then=="function")}function E(n){return g(n)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n}function S(n,r){try{return n instanceof r}catch{return!1}}function I(n){return!!(typeof n=="object"&&n!==null&&(n.__isVue||n._isVue))}function A(n,r=0){return typeof n!="string"||r===0||n.length<=r?n:`${n.slice(0,r)}...`}function C(n,r){if(!Array.isArray(n))return"";let a=[];for(let u=0;u<n.length;u++){let f=n[u];try{I(f)?a.push("[VueViewModel]"):a.push(String(f))}catch{a.push("[value cannot be serialized]")}}return a.join(r)}function P(n,r,a=!1){return h(n)?k(r)?r.test(n):h(r)?a?n===r:n.includes(r):!1:!1}function O(n,r=[],a=!1){return r.some(u=>P(n,u,a))}function R(n,r,a=250,u,f,p,y){if(!p.exception||!p.exception.values||!y||!S(y.originalException,Error))return;let w=p.exception.values.length>0?p.exception.values[p.exception.values.length-1]:void 0;w&&(p.exception.values=Y(F(n,r,f,y.originalException,u,p.exception.values,w,0),a))}function F(n,r,a,u,f,p,y,w){if(p.length>=a+1)return p;let T=[...p];if(S(u[f],Error)){M(y,w);let D=n(r,u[f]),$=T.length;j(D,f,$,w),T=F(n,r,a,u[f],f,[D,...T],D,$)}return Array.isArray(u.errors)&&u.errors.forEach((D,$)=>{if(S(D,Error)){M(y,w);let K=n(r,D),ee=T.length;j(K,`errors[${$}]`,ee,w),T=F(n,r,a,D,f,[K,...T],K,ee)}}),T}function M(n,r){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,...n.type==="AggregateError"&&{is_exception_group:!0},exception_id:r}}function j(n,r,a,u){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,type:"chained",source:r,exception_id:a,parent_id:u}}function Y(n,r){return n.map(a=>(a.value&&(a.value=A(a.value,r)),a))}let N="8.18.0",L=globalThis;function V(n,r,a){let u=a||L,f=u.f=u.f||{},p=f[N]=f[N]||{};return p[n]||(p[n]=r())}let X=L,H=80;function oe(n,r={}){if(!n)return"<unknown>";try{let a=n,u=5,f=[],p=0,y=0,w=" > ",T=w.length,D,$=Array.isArray(r)?r:r.keyAttrs,K=!Array.isArray(r)&&r.maxStringLength||H;for(;a&&p++<u&&(D=pe(a,$),!(D==="html"||p>1&&y+f.length*T+D.length>=K));)f.push(D),y+=D.length,a=a.parentNode;return f.reverse().join(w)}catch{return"<unknown>"}}function pe(n,r){let a=n,u=[];if(!a||!a.tagName)return"";if(X.HTMLElement&&a instanceof HTMLElement&&a.dataset){if(a.dataset.sentryComponent)return a.dataset.sentryComponent;if(a.dataset.sentryElement)return a.dataset.sentryElement}u.push(a.tagName.toLowerCase());let f=r&&r.length?r.filter(y=>a.getAttribute(y)).map(y=>[y,a.getAttribute(y)]):null;if(f&&f.length)f.forEach(y=>{u.push(`[${y[0]}="${y[1]}"]`)});else{a.id&&u.push(`#${a.id}`);let y=a.className;if(y&&h(y)){let w=y.split(/\s+/);for(let T of w)u.push(`.${T}`)}}let p=["aria-label","type","name","title","alt"];for(let y of p){let w=a.getAttribute(y);w&&u.push(`[${y}="${w}"]`)}return u.join("")}function Be(){try{return X.document.location.href}catch{return""}}function Se(n){if(!X.HTMLElement)return null;let r=n,a=5;for(let u=0;u<a;u++){if(!r)return null;if(r instanceof HTMLElement){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}r=r.parentNode}return null}let Oe="Sentry Logger ",$e=["debug","info","warn","error","log","assert","trace"],ke={};function Pe(n){if(!("console"in L))return n();let r=L.console,a={},u=Object.keys(ke);u.forEach(f=>{let p=ke[f];a[f]=r[f],r[f]=p});try{return n()}finally{u.forEach(f=>{r[f]=a[f]})}}function Me(){let n=!1,r={enable:()=>{n=!0},disable:()=>{n=!1},isEnabled:()=>n};return $e.forEach(a=>{r[a]=(...u)=>{n&&Pe(()=>{L.console[a](`${Oe}[${a}]:`,...u)})}}),r}let z=Me(),Fr=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function gc(n){return n==="http"||n==="https"}function nn(n,r=!1){let{host:a,path:u,pass:f,port:p,projectId:y,protocol:w,publicKey:T}=n;return`${w}://${T}${r&&f?`:${f}`:""}@${a}${p?`:${p}`:""}/${u&&`${u}/`}${y}`}function yc(n){let r=Fr.exec(n);if(!r){Pe(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});return}let[a,u,f="",p="",y="",w=""]=r.slice(1),T="",D=w,$=D.split("/");if($.length>1&&(T=$.slice(0,-1).join("/"),D=$.pop()),D){let K=D.match(/^\d+/);K&&(D=K[0])}return mo({host:p,pass:f,path:T,projectId:D,port:y,protocol:a,publicKey:u})}function mo(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}function vc(n){let{port:r,projectId:a,protocol:u}=n;return["protocol","publicKey","host","projectId"].find(y=>n[y]?!1:(z.error(`Invalid Sentry Dsn: ${y} missing`),!0))?!1:a.match(/^\d+$/)?gc(u)?r&&isNaN(parseInt(r,10))?(z.error(`Invalid Sentry Dsn: Invalid port ${r}`),!1):!0:(z.error(`Invalid Sentry Dsn: Invalid protocol ${u}`),!1):(z.error(`Invalid Sentry Dsn: Invalid projectId ${a}`),!1)}function go(n){let r=typeof n=="string"?yc(n):mo(n);if(!(!r||!vc(r)))return r}class He extends Error{constructor(r,a="warn"){super(r),this.message=r,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=a}}function ye(n,r,a){if(!(r in n))return;let u=n[r],f=a(u);typeof f=="function"&&yo(f,u),n[r]=f}function vt(n,r,a){try{Object.defineProperty(n,r,{value:a,writable:!0,configurable:!0})}catch{z.log(`Failed to add non-enumerable property "${r}" to object`,n)}}function yo(n,r){try{let a=r.prototype||{};n.prototype=r.prototype=a,vt(n,"__sentry_original__",r)}catch{}}function Br(n){return n.Vt}function bc(n){return Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}function vo(n){if(i(n))return{message:n.message,name:n.name,stack:n.stack,...wo(n)};if(v(n)){let r={type:n.type,target:bo(n.target),currentTarget:bo(n.currentTarget),...wo(n)};return typeof CustomEvent<"u"&&S(n,CustomEvent)&&(r.detail=n.detail),r}else return n}function bo(n){try{return _(n)?oe(n):Object.prototype.toString.call(n)}catch{return"<unknown>"}}function wo(n){if(typeof n=="object"&&n!==null){let r={};for(let a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a]);return r}else return{}}function wc(n,r=40){let a=Object.keys(vo(n));a.sort();let u=a[0];if(!u)return"[object has no keys]";if(u.length>=r)return A(u,r);for(let f=a.length;f>0;f--){let p=a.slice(0,f).join(", ");if(!(p.length>r))return f===a.length?p:A(p,r)}return""}function Le(n){return Lr(n,new Map)}function Lr(n,r){if(_c(n)){let a=r.get(n);if(a!==void 0)return a;let u={};r.set(n,u);for(let f of Object.keys(n))typeof n[f]<"u"&&(u[f]=Lr(n[f],r));return u}if(Array.isArray(n)){let a=r.get(n);if(a!==void 0)return a;let u=[];return r.set(n,u),n.forEach(f=>{u.push(Lr(f,r))}),u}return n}function _c(n){if(!g(n))return!1;try{let r=Object.getPrototypeOf(n).constructor.name;return!r||r==="Object"}catch{return!0}}let _o=50,We="?",Eo=/\(error: (.*)\)/,So=/captureMessage|captureException/;function xo(...n){let r=n.sort((a,u)=>a[0]-u[0]).map(a=>a[1]);return(a,u=0,f=0)=>{let p=[],y=a.split(`
`);for(let w=u;w<y.length;w++){let T=y[w];if(T.length>1024)continue;let D=Eo.test(T)?T.replace(Eo,"$1"):T;if(!D.match(/\S*Error: /)){for(let $ of r){let K=$(D);if(K){p.push(K);break}}if(p.length>=_o+f)break}}return Sc(p.slice(f))}}function Ec(n){return Array.isArray(n)?xo(...n):n}function Sc(n){if(!n.length)return[];let r=Array.from(n);return/sentryWrapped/.test(Nn(r).function||"")&&r.pop(),r.reverse(),So.test(Nn(r).function||"")&&(r.pop(),So.test(Nn(r).function||"")&&r.pop()),r.slice(0,_o).map(a=>({...a,filename:a.filename||Nn(r).filename,function:a.function||We}))}function Nn(n){return n[n.length-1]||{}}let Kr="<anonymous>";function rt(n){try{return!n||typeof n!="function"?Kr:n.name||Kr}catch{return Kr}}function Io(n){let r=n.exception;if(r){let a=[];try{return r.values.forEach(u=>{u.stacktrace.frames&&a.push(...u.stacktrace.frames)}),a}catch{return}}}let Fn={},ko={};function bt(n,r){Fn[n]=Fn[n]||[],Fn[n].push(r)}function wt(n,r){ko[n]||(r(),ko[n]=!0)}function je(n,r){let a=n&&Fn[n];if(a)for(let u of a)try{u(r)}catch(f){z.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${rt(u)}
Error:`,f)}}function xc(n){let r="console";bt(r,n),wt(r,Ic)}function Ic(){"console"in L&&$e.forEach(function(n){n in L.console&&ye(L.console,n,function(r){return ke[n]=r,function(...a){je("console",{args:a,level:n});let f=ke[n];f&&f.apply(L.console,a)}})})}let $r=L;function To(){if(!("fetch"in $r))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function jr(n){return n&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString())}function kc(){if(typeof EdgeRuntime=="string")return!0;if(!To())return!1;if(jr($r.fetch))return!0;let n=!1,r=$r.document;if(r&&typeof r.createElement=="function")try{let a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a),a.contentWindow&&a.contentWindow.fetch&&(n=jr(a.contentWindow.fetch)),r.head.removeChild(a)}catch(a){z.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",a)}return n}let Ao=1e3;function rn(){return Date.now()/Ao}function Tc(){let{performance:n}=L;if(!n||!n.now)return rn;let r=Date.now()-n.now(),a=n.timeOrigin==null?r:n.timeOrigin;return()=>(a+n.now())/Ao}let Ge=Tc();(()=>{let{performance:n}=L;if(!n||!n.now)return;let r=3600*1e3,a=n.now(),u=Date.now(),f=n.timeOrigin?Math.abs(n.timeOrigin+a-u):r,p=f<r,y=n.timing&&n.timing.navigationStart,T=typeof y=="number"?Math.abs(y+a-u):r,D=T<r;return p||D?f<=T?n.timeOrigin:y:u})();function Ac(n){let r="fetch";bt(r,n),wt(r,Cc)}function Cc(){kc()&&ye(L,"fetch",function(n){return function(...r){let{method:a,url:u}=Oc(r),f={args:r,fetchData:{method:a,url:u},startTimestamp:Ge()*1e3};je("fetch",{...f});let p=new Error().stack;return n.apply(L,r).then(y=>{let w={...f,endTimestamp:Ge()*1e3,response:y};return je("fetch",w),y},y=>{let w={...f,endTimestamp:Ge()*1e3,error:y};throw je("fetch",w),i(y)&&y.stack===void 0&&(y.stack=p,vt(y,"framesToPop",1)),y})}})}function Ur(n,r){return!!n&&typeof n=="object"&&!!n[r]}function Co(n){return typeof n=="string"?n:n?Ur(n,"url")?n.url:n.toString?n.toString():"":""}function Oc(n){if(n.length===0)return{method:"GET",url:""};if(n.length===2){let[a,u]=n;return{url:Co(a),method:Ur(u,"method")?String(u.method).toUpperCase():"GET"}}let r=n[0];return{url:Co(r),method:Ur(r,"method")?String(r.method).toUpperCase():"GET"}}let Bn=null;function Pc(n){let r="error";bt(r,n),wt(r,Dc)}function Dc(){Bn=L.onerror,L.onerror=function(n,r,a,u,f){return je("error",{column:u,error:f,line:a,msg:n,url:r}),Bn&&!Bn.Ce?Bn.apply(this,arguments):!1},L.onerror.Oe=!0}let Ln=null;function Rc(n){let r="unhandledrejection";bt(r,n),wt(r,Mc)}function Mc(){Ln=L.onunhandledrejection,L.onunhandledrejection=function(n){return je("unhandledrejection",n),Ln&&!Ln.Ce?Ln.apply(this,arguments):!0},L.onunhandledrejection.Oe=!0}function Nc(){return"npm"}function Fc(){let n=typeof WeakSet=="function",r=n?new WeakSet:[];function a(f){if(n)return r.has(f)?!0:(r.add(f),!1);for(let p=0;p<r.length;p++)if(r[p]===f)return!0;return r.push(f),!1}function u(f){if(n)r.delete(f);else for(let p=0;p<r.length;p++)if(r[p]===f){r.splice(p,1);break}}return[a,u]}function de(){let n=L,r=n.crypto||n.msCrypto,a=()=>Math.random()*16;try{if(r&&r.randomUUID)return r.randomUUID().replace(/-/g,"");r&&r.getRandomValues&&(a=()=>{let u=new Uint8Array(1);return r.getRandomValues(u),u[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,u=>(u^(a()&15)>>u/4).toString(16))}function Oo(n){return n.exception&&n.exception.values?n.exception.values[0]:void 0}function it(n){let{message:r,event_id:a}=n;if(r)return r;let u=Oo(n);return u?u.type&&u.value?`${u.type}: ${u.value}`:u.type||u.value||a||"<unknown>":a||"<unknown>"}function Hr(n,r,a){let u=n.exception=n.exception||{},f=u.values=u.values||[],p=f[0]=f[0]||{};p.value||(p.value=r||""),p.type||(p.type=a||"Error")}function on(n,r){let a=Oo(n);if(!a)return;let u={type:"generic",handled:!0},f=a.mechanism;if(a.mechanism={...u,...f,...r},r&&"data"in r){let p={...f&&f.data,...r.data};a.mechanism.data=p}}function Po(n){if(n&&n.zt)return!0;try{vt(n,"__sentry_captured__",!0)}catch{}return!1}function Do(n){return Array.isArray(n)?n:[n]}function ot(n,r=100,a=1/0){try{return Wr("",n,r,a)}catch(u){return{ERROR:`**non-serializable** (${u})`}}}function Ro(n,r=3,a=102400){let u=ot(n,r);return $c(u)>a?Ro(n,r-1,a):u}function Wr(n,r,a=1/0,u=1/0,f=Fc()){let[p,y]=f;if(r==null||["number","boolean","string"].includes(typeof r)&&!Number.isNaN(r))return r;let w=Bc(n,r);if(!w.startsWith("[object "))return w;if(r.__sentry_skip_normalization__)return r;let T=typeof r.__sentry_override_normalization_depth__=="number"?r.__sentry_override_normalization_depth__:a;if(T===0)return w.replace("object ","");if(p(r))return"[Circular ~]";let D=r;if(D&&typeof D.toJSON=="function")try{let ne=D.toJSON();return Wr("",ne,T-1,u,f)}catch{}let $=Array.isArray(r)?[]:{},K=0,ee=vo(r);for(let ne in ee){if(!Object.prototype.hasOwnProperty.call(ee,ne))continue;if(K>=u){$[ne]="[MaxProperties ~]";break}let te=ee[ne];$[ne]=Wr(ne,te,T-1,u,f),K++}return y(r),$}function Bc(n,r){try{if(n==="domain"&&r&&typeof r=="object"&&r._events)return"[Domain]";if(n==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&r===global)return"[Global]";if(typeof window<"u"&&r===window)return"[Window]";if(typeof document<"u"&&r===document)return"[Document]";if(I(r))return"[VueViewModel]";if(E(r))return"[SyntheticEvent]";if(typeof r=="number"&&r!==r)return"[NaN]";if(typeof r=="function")return`[Function: ${rt(r)}]`;if(typeof r=="symbol")return`[${String(r)}]`;if(typeof r=="bigint")return`[BigInt: ${String(r)}]`;let a=Lc(r);return/^HTML(\w*)Element$/.test(a)?`[HTMLElement: ${a}]`:`[object ${a}]`}catch(a){return`**non-serializable** (${a})`}}function Lc(n){let r=Object.getPrototypeOf(n);return r?r.constructor.name:"null prototype"}function Kc(n){return~-encodeURI(n).split(/%..|./).length}function $c(n){return Kc(JSON.stringify(n))}var qe;(function(n){n[n.PENDING=0]="PENDING";let a=1;n[n.RESOLVED=a]="RESOLVED";let u=2;n[n.REJECTED=u]="REJECTED"})(qe||(qe={}));function _t(n){return new Ke(r=>{r(n)})}function Kn(n){return new Ke((r,a)=>{a(n)})}class Ke{constructor(r){Ke.prototype.__init.call(this),Ke.prototype.__init2.call(this),Ke.prototype.__init3.call(this),Ke.prototype.__init4.call(this),this._state=qe.PENDING,this._handlers=[];try{r(this._resolve,this._reject)}catch(a){this._reject(a)}}then(r,a){return new Ke((u,f)=>{this._handlers.push([!1,p=>{if(!r)u(p);else try{u(r(p))}catch(y){f(y)}},p=>{if(!a)f(p);else try{u(a(p))}catch(y){f(y)}}]),this._executeHandlers()})}catch(r){return this.then(a=>a,r)}finally(r){return new Ke((a,u)=>{let f,p;return this.then(y=>{p=!1,f=y,r&&r()},y=>{p=!0,f=y,r&&r()}).then(()=>{if(p){u(f);return}a(f)})})}__init(){this._resolve=r=>{this._setResult(qe.RESOLVED,r)}}__init2(){this._reject=r=>{this._setResult(qe.REJECTED,r)}}__init3(){this._setResult=(r,a)=>{if(this._state===qe.PENDING){if(b(a)){a.then(this._resolve,this._reject);return}this._state=r,this._value=a,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===qe.PENDING)return;let r=this._handlers.slice();this._handlers=[],r.forEach(a=>{a[0]||(this._state===qe.RESOLVED&&a[1](this._value),this._state===qe.REJECTED&&a[2](this._value),a[0]=!0)})}}}function jc(n){let r=[];function a(){return n===void 0||r.length<n}function u(y){return r.splice(r.indexOf(y),1)[0]||Promise.resolve(void 0)}function f(y){if(!a())return Kn(new He("Not adding Promise because buffer limit was reached."));let w=y();return r.indexOf(w)===-1&&r.push(w),w.then(()=>u(w)).then(null,()=>u(w).then(null,()=>{})),w}function p(y){return new Ke((w,T)=>{let D=r.length;if(!D)return w(!0);let $=setTimeout(()=>{y&&y>0&&w(!1)},y);r.forEach(K=>{_t(K).then(()=>{--D||(clearTimeout($),w(!0))},T)})})}return{$:r,add:f,drain:p}}function Vr(n){if(!n)return{};let r=n.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!r)return{};let a=r[6]||"",u=r[8]||"";return{host:r[4],path:r[5],protocol:r[2],search:a,hash:u,relative:r[5]+a+u}}let Uc=["fatal","error","warning","log","info","debug"];function Hc(n){return n==="warn"?"warning":Uc.includes(n)?n:"log"}let Mo="sentry-",Wc=/^sentry-/,Vc=8192;function No(n){let r=Gc(n);if(!r)return;let a=Object.entries(r).reduce((u,[f,p])=>{if(f.match(Wc)){let y=f.slice(Mo.length);u[y]=p}return u},{});if(Object.keys(a).length>0)return a}function zc(n){if(!n)return;let r=Object.entries(n).reduce((a,[u,f])=>(f&&(a[`${Mo}${u}`]=f),a),{});return qc(r)}function Gc(n){if(!(!n||!h(n)&&!Array.isArray(n)))return Array.isArray(n)?n.reduce((r,a)=>{let u=Fo(a);return Object.entries(u).forEach(([f,p])=>{r[f]=p}),r},{}):Fo(n)}function Fo(n){return n.split(",").map(r=>r.split("=").map(a=>decodeURIComponent(a.trim()))).reduce((r,[a,u])=>(a&&u&&(r[a]=u),r),{})}function qc(n){if(Object.keys(n).length!==0)return Object.entries(n).reduce((r,[a,u],f)=>{let p=`${encodeURIComponent(a)}=${encodeURIComponent(u)}`,y=f===0?p:`${r},${p}`;return y.length>Vc?(z.warn(`Not adding key: ${a} with val: ${u} to baggage header due to exceeding baggage size limits.`),r):y},"")}let Yc=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Jc(n){if(!n)return;let r=n.match(Yc);if(!r)return;let a;return r[3]==="1"?a=!0:r[3]==="0"&&(a=!1),{traceId:r[1],parentSampled:a,parentSpanId:r[2]}}function Xc(n,r){let a=Jc(n),u=No(r),{traceId:f,parentSpanId:p,parentSampled:y}=a||{};return a?{traceId:f||de(),parentSpanId:p||de().substring(16),spanId:de().substring(16),sampled:y,dsc:u||{}}:{traceId:f||de(),spanId:de().substring(16)}}function Qc(n=de(),r=de().substring(16),a){let u="";return a!==void 0&&(u=a?"-1":"-0"),`${n}-${r}${u}`}function sn(n,r=[]){return[n,r]}function Zc(n,r){let[a,u]=n;return[a,[...u,r]]}function Bo(n,r){let a=n[1];for(let u of a){let f=u[0].type;if(r(u,f))return!0}return!1}function zr(n){return L.f&&L.f.encodePolyfill?L.f.encodePolyfill(n):new TextEncoder().encode(n)}function eu(n){let[r,a]=n,u=JSON.stringify(r);function f(p){typeof u=="string"?u=typeof p=="string"?u+p:[zr(u),p]:u.push(typeof p=="string"?zr(p):p)}for(let p of a){let[y,w]=p;if(f(`
${JSON.stringify(y)}
`),typeof w=="string"||w instanceof Uint8Array)f(w);else{let T;try{T=JSON.stringify(w)}catch{T=JSON.stringify(ot(w))}f(T)}}return typeof u=="string"?u:tu(u)}function tu(n){let r=n.reduce((f,p)=>f+p.length,0),a=new Uint8Array(r),u=0;for(let f of n)a.set(f,u),u+=f.length;return a}function nu(n){let r=typeof n.data=="string"?zr(n.data):n.data;return[Le({type:"attachment",length:r.length,filename:n.filename,content_type:n.contentType,attachment_type:n.attachmentType}),r]}let ru={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Lo(n){return ru[n]}function Ko(n){if(!n||!n.sdk)return;let{name:r,version:a}=n.sdk;return{name:r,version:a}}function iu(n,r,a,u){let f=n.sdkProcessingMetadata&&n.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:n.event_id,sent_at:new Date().toISOString(),...r&&{sdk:r},...!!a&&u&&{dsn:nn(u)},...f&&{trace:Le({...f})}}}function ou(n,r,a){let u=[{type:"client_report"},{timestamp:a||rn(),discarded_events:n}];return sn(r?{dsn:r}:{},[u])}let su=60*1e3;function au(n,r=Date.now()){let a=parseInt(`${n}`,10);if(!isNaN(a))return a*1e3;let u=Date.parse(`${n}`);return isNaN(u)?su:u-r}function cu(n,r){return n[r]||n.all||0}function uu(n,r,a=Date.now()){return cu(n,r)>a}function lu(n,{statusCode:r,headers:a},u=Date.now()){let f={...n},p=a&&a["x-sentry-rate-limits"],y=a&&a["retry-after"];if(p)for(let w of p.trim().split(",")){let[T,D,,,$]=w.split(":",5),K=parseInt(T,10),ee=(isNaN(K)?60:K)*1e3;if(!D)f.all=u+ee;else for(let ne of D.split(";"))ne==="metric_bucket"?(!$||$.split(";").includes("custom"))&&(f[ne]=u+ee):f[ne]=u+ee}else y?f.all=u+au(y,u):r===429&&(f.all=u+6e4);return f}function $o(){return{traceId:de(),spanId:de().substring(16)}}let $n=L;function fu(){let n=$n.chrome,r=n&&n.app&&n.app.runtime,a="history"in $n&&!!$n.history.pushState&&!!$n.history.replaceState;return!r&&a}let jo=()=>{},du=["attachTo","createWidget","remove"];function Uo(n){return Pe(()=>{console.warn("You are using feedbackIntegration() even though this bundle does not include feedback.")}),{name:"Feedback",...du.reduce((r,a)=>(r[a]=jo,r),{})}}let hu=["start","stop","flush"];function pu(n){return Pe(()=>{console.warn("You are using replayIntegration() even though this bundle does not include replay.")}),{name:"Replay",...hu.reduce((r,a)=>(r[a]=jo,r),{})}}function an(){return Gr(L),L}function Gr(n){let r=n.f=n.f||{};return r.version=r.version||N,r[N]=r[N]||{}}function mu(n){let r=Ge(),a={sid:de(),init:!0,timestamp:r,started:r,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>yu(a)};return n&&Bt(a,n),a}function Bt(n,r={}){if(r.user&&(!n.ipAddress&&r.user.ip_address&&(n.ipAddress=r.user.ip_address),!n.did&&!r.did&&(n.did=r.user.id||r.user.email||r.user.username)),n.timestamp=r.timestamp||Ge(),r.abnormal_mechanism&&(n.abnormal_mechanism=r.abnormal_mechanism),r.ignoreDuration&&(n.ignoreDuration=r.ignoreDuration),r.sid&&(n.sid=r.sid.length===32?r.sid:de()),r.init!==void 0&&(n.init=r.init),!n.did&&r.did&&(n.did=`${r.did}`),typeof r.started=="number"&&(n.started=r.started),n.ignoreDuration)n.duration=void 0;else if(typeof r.duration=="number")n.duration=r.duration;else{let a=n.timestamp-n.started;n.duration=a>=0?a:0}r.release&&(n.release=r.release),r.environment&&(n.environment=r.environment),!n.ipAddress&&r.ipAddress&&(n.ipAddress=r.ipAddress),!n.userAgent&&r.userAgent&&(n.userAgent=r.userAgent),typeof r.errors=="number"&&(n.errors=r.errors),r.status&&(n.status=r.status)}function gu(n,r){let a={};r?a={status:r}:n.status==="ok"&&(a={status:"exited"}),Bt(n,a)}function yu(n){return Le({sid:`${n.sid}`,init:n.init,started:new Date(n.started*1e3).toISOString(),timestamp:new Date(n.timestamp*1e3).toISOString(),status:n.status,errors:n.errors,did:typeof n.did=="number"||typeof n.did=="string"?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})}let qr="_sentrySpan";function Ho(n,r){r?vt(n,qr,r):delete n[qr]}function Wo(n){return n[qr]}let vu=100;class Yr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=$o()}clone(){let r=new Yr;return r._breadcrumbs=[...this._breadcrumbs],r._tags={...this._tags},r._extra={...this._extra},r._contexts={...this._contexts},r._user=this._user,r._level=this._level,r._session=this._session,r._transactionName=this._transactionName,r._fingerprint=this._fingerprint,r._eventProcessors=[...this._eventProcessors],r._requestSession=this._requestSession,r._attachments=[...this._attachments],r._sdkProcessingMetadata={...this._sdkProcessingMetadata},r._propagationContext={...this._propagationContext},r._client=this._client,r._lastEventId=this._lastEventId,Ho(r,Wo(this)),r}setClient(r){this._client=r}setLastEventId(r){this._lastEventId=r}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(r){this._scopeListeners.push(r)}addEventProcessor(r){return this._eventProcessors.push(r),this}setUser(r){return this._user=r||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Bt(this._session,{user:r}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(r){return this._requestSession=r,this}setTags(r){return this._tags={...this._tags,...r},this._notifyScopeListeners(),this}setTag(r,a){return this._tags={...this._tags,[r]:a},this._notifyScopeListeners(),this}setExtras(r){return this._extra={...this._extra,...r},this._notifyScopeListeners(),this}setExtra(r,a){return this._extra={...this._extra,[r]:a},this._notifyScopeListeners(),this}setFingerprint(r){return this._fingerprint=r,this._notifyScopeListeners(),this}setLevel(r){return this._level=r,this._notifyScopeListeners(),this}setTransactionName(r){return this._transactionName=r,this._notifyScopeListeners(),this}setContext(r,a){return a===null?delete this._contexts[r]:this._contexts[r]=a,this._notifyScopeListeners(),this}setSession(r){return r?this._session=r:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(r){if(!r)return this;let a=typeof r=="function"?r(this):r,[u,f]=a instanceof Ye?[a.getScopeData(),a.getRequestSession()]:g(a)?[r,r.requestSession]:[],{tags:p,extra:y,user:w,contexts:T,level:D,fingerprint:$=[],propagationContext:K}=u||{};return this._tags={...this._tags,...p},this._extra={...this._extra,...y},this._contexts={...this._contexts,...T},w&&Object.keys(w).length&&(this._user=w),D&&(this._level=D),$.length&&(this._fingerprint=$),K&&(this._propagationContext=K),f&&(this._requestSession=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Ho(this,void 0),this._attachments=[],this._propagationContext=$o(),this._notifyScopeListeners(),this}addBreadcrumb(r,a){let u=typeof a=="number"?a:vu;if(u<=0)return this;let f={timestamp:rn(),...r},p=this._breadcrumbs;return p.push(f),this._breadcrumbs=p.length>u?p.slice(-u):p,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(r){return this._attachments.push(r),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Wo(this)}}setSDKProcessingMetadata(r){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...r},this}setPropagationContext(r){return this._propagationContext=r,this}getPropagationContext(){return this._propagationContext}captureException(r,a){let u=a&&a.event_id?a.event_id:de();if(!this._client)return z.warn("No client configured on scope - will not capture exception!"),u;let f=new Error("Sentry syntheticException");return this._client.captureException(r,{originalException:r,syntheticException:f,...a,event_id:u},this),u}captureMessage(r,a,u){let f=u&&u.event_id?u.event_id:de();if(!this._client)return z.warn("No client configured on scope - will not capture message!"),f;let p=new Error(r);return this._client.captureMessage(r,a,{originalException:r,syntheticException:p,...u,event_id:f},this),f}captureEvent(r,a){let u=a&&a.event_id?a.event_id:de();return this._client?(this._client.captureEvent(r,{...a,event_id:u},this),u):(z.warn("No client configured on scope - will not capture event!"),u)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(r=>{r(this)}),this._notifyingListeners=!1)}}let Ye=Yr;function bu(){return V("defaultCurrentScope",()=>new Ye)}function wu(){return V("defaultIsolationScope",()=>new Ye)}class _u{constructor(r,a){let u;r?u=r:u=new Ye;let f;a?f=a:f=new Ye,this._stack=[{scope:u}],this._isolationScope=f}withScope(r){let a=this._pushScope(),u;try{u=r(a)}catch(f){throw this._popScope(),f}return b(u)?u.then(f=>(this._popScope(),f),f=>{throw this._popScope(),f}):(this._popScope(),u)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let r=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:r}),r}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Lt(){let n=an(),r=Gr(n);return r.stack=r.stack||new _u(bu(),wu())}function Eu(n){return Lt().withScope(n)}function Su(n,r){let a=Lt();return a.withScope(()=>(a.getStackTop().scope=n,r(n)))}function Vo(n){return Lt().withScope(()=>n(Lt().getIsolationScope()))}function xu(){return{withIsolationScope:Vo,withScope:Eu,withSetScope:Su,withSetIsolationScope:(n,r)=>Vo(r),getCurrentScope:()=>Lt().getScope(),getIsolationScope:()=>Lt().getIsolationScope()}}function jn(n){let r=Gr(n);return r.acs?r.acs:xu()}function xe(){let n=an();return jn(n).getCurrentScope()}function Te(){let n=an();return jn(n).getIsolationScope()}function zo(){return V("globalScope",()=>new Ye)}function Un(...n){let r=an(),a=jn(r);if(n.length===2){let[u,f]=n;return u?a.withSetScope(u,f):a.withScope(f)}return a.withScope(n[0])}function Iu(...n){let r=an(),a=jn(r);if(n.length===2){let[u,f]=n;return u?a.withSetIsolationScope(u,f):a.withIsolationScope(f)}return a.withIsolationScope(n[0])}function se(){return xe().getClient()}let ku="_sentryMetrics";function Tu(n){let r=n[ku];if(!r)return;let a={};for(let[,[u,f]]of r)(a[u]||(a[u]=[])).push(Le(f));return a}let Go="sentry.source",qo="sentry.sample_rate",Yo="sentry.op",Jo="sentry.origin",Au=0,Cu=1,Ou=1;function Pu(n){let{spanId:r,traceId:a}=n.spanContext(),{parent_span_id:u}=cn(n);return Le({parent_span_id:u,span_id:r,trace_id:a})}function Du(n){let{traceId:r,spanId:a}=n.spanContext(),u=Zo(n);return Qc(r,a,u)}function Xo(n){return typeof n=="number"?Qo(n):Array.isArray(n)?n[0]+n[1]/1e9:n instanceof Date?Qo(n.getTime()):Ge()}function Qo(n){return n>9999999999?n/1e3:n}function cn(n){if(Mu(n))return n.getSpanJSON();try{let{spanId:r,traceId:a}=n.spanContext();if(Ru(n)){let{attributes:u,startTime:f,name:p,endTime:y,parentSpanId:w,status:T}=n;return Le({span_id:r,trace_id:a,data:u,description:p,parent_span_id:w,start_timestamp:Xo(f),timestamp:Xo(y)||void 0,status:Nu(T),op:u[Yo],origin:u[Jo],_metrics_summary:Tu(n)})}return{span_id:r,trace_id:a}}catch{return{}}}function Ru(n){let r=n;return!!r.attributes&&!!r.startTime&&!!r.name&&!!r.endTime&&!!r.status}function Mu(n){return typeof n.getSpanJSON=="function"}function Zo(n){let{traceFlags:r}=n.spanContext();return r===Ou}function Nu(n){if(!(!n||n.code===Au))return n.code===Cu?"ok":n.message||"unknown_error"}let Fu="_sentryRootSpan";function es(n){return n[Fu]||n}let Jr="production",Bu="_frozenDsc";function ts(n,r){let a=r.getOptions(),{publicKey:u}=r.getDsn()||{},f=Le({environment:a.environment||Jr,release:a.release,public_key:u,trace_id:n});return r.emit("createDsc",f),f}function ns(n){let r=se();if(!r)return{};let a=ts(cn(n).trace_id||"",r),u=es(n),f=u[Bu];if(f)return f;let p=u.spanContext().traceState,y=p&&p.get("sentry.dsc"),w=y&&No(y);if(w)return w;let T=cn(u),D=T.data||{},$=D[qo];$!=null&&(a.sample_rate=`${$}`);let K=D[Go],ee=T.description;return K!=="url"&&ee&&(a.transaction=ee),a.sampled=String(Zo(u)),r.emit("createDsc",a,u),a}function Lu(n){let r=ns(n);return zc(r)}function Ku(n){if(typeof n=="boolean")return Number(n);let r=typeof n=="string"?parseFloat(n):n;if(typeof r!="number"||isNaN(r)||r<0||r>1){z.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`);return}return r}function $u(n,r){return r&&(n.sdk=n.sdk||{},n.sdk.name=n.sdk.name||r.name,n.sdk.version=n.sdk.version||r.version,n.sdk.integrations=[...n.sdk.integrations||[],...r.integrations||[]],n.sdk.packages=[...n.sdk.packages||[],...r.packages||[]]),n}function ju(n,r,a,u){let f=Ko(a),p={sent_at:new Date().toISOString(),...f&&{sdk:f},...!!u&&r&&{dsn:nn(r)}},y="aggregates"in n?[{type:"sessions"},n]:[{type:"session"},n.toJSON()];return sn(p,[y])}function Uu(n,r,a,u){let f=Ko(a),p=n.type&&n.type!=="replay_event"?n.type:"event";$u(n,a&&a.sdk);let y=iu(n,f,u,r);return delete n.sdkProcessingMetadata,sn(y,[[{type:p},n]])}let Hu=({sentryTrace:n,baggage:r},a)=>Un(u=>{let f=Xc(n,r);return u.setPropagationContext(f),a()});function Xr(n,r,a,u=0){return new Ke((f,p)=>{let y=n[u];if(r===null||typeof y!="function")f(r);else{let w=y({...r},a);y.id&&w===null&&z.log(`Event processor "${y.id}" dropped event`),b(w)?w.then(T=>Xr(n,T,a,u+1).then(f)).then(null,p):Xr(n,w,a,u+1).then(f).then(null,p)}})}function Wu(n,r){let{fingerprint:a,span:u,breadcrumbs:f,sdkProcessingMetadata:p}=r;Vu(n,r),u&&qu(n,u),Yu(n,a),zu(n,f),Gu(n,p)}function rs(n,r){let{extra:a,tags:u,user:f,contexts:p,level:y,sdkProcessingMetadata:w,breadcrumbs:T,fingerprint:D,eventProcessors:$,attachments:K,propagationContext:ee,transactionName:ne,span:te}=r;un(n,"extra",a),un(n,"tags",u),un(n,"user",f),un(n,"contexts",p),un(n,"sdkProcessingMetadata",w),y&&(n.level=y),ne&&(n.transactionName=ne),te&&(n.span=te),T.length&&(n.breadcrumbs=[...n.breadcrumbs,...T]),D.length&&(n.fingerprint=[...n.fingerprint,...D]),$.length&&(n.eventProcessors=[...n.eventProcessors,...$]),K.length&&(n.attachments=[...n.attachments,...K]),n.propagationContext={...n.propagationContext,...ee}}function un(n,r,a){if(a&&Object.keys(a).length){n[r]={...n[r]};for(let u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[r][u]=a[u])}}function Vu(n,r){let{extra:a,tags:u,user:f,contexts:p,level:y,transactionName:w}=r,T=Le(a);T&&Object.keys(T).length&&(n.extra={...T,...n.extra});let D=Le(u);D&&Object.keys(D).length&&(n.tags={...D,...n.tags});let $=Le(f);$&&Object.keys($).length&&(n.user={...$,...n.user});let K=Le(p);K&&Object.keys(K).length&&(n.contexts={...K,...n.contexts}),y&&(n.level=y),w&&n.type!=="transaction"&&(n.transaction=w)}function zu(n,r){let a=[...n.breadcrumbs||[],...r];n.breadcrumbs=a.length?a:void 0}function Gu(n,r){n.sdkProcessingMetadata={...n.sdkProcessingMetadata,...r}}function qu(n,r){n.contexts={trace:Pu(r),...n.contexts},n.sdkProcessingMetadata={dynamicSamplingContext:ns(r),...n.sdkProcessingMetadata};let a=es(r),u=cn(a).description;u&&!n.transaction&&n.type==="transaction"&&(n.transaction=u)}function Yu(n,r){n.fingerprint=n.fingerprint?Do(n.fingerprint):[],r&&(n.fingerprint=n.fingerprint.concat(r)),n.fingerprint&&!n.fingerprint.length&&delete n.fingerprint}function Ju(n,r,a,u,f,p){let{normalizeDepth:y=3,normalizeMaxBreadth:w=1e3}=n,T={...r,event_id:r.event_id||a.event_id||de(),timestamp:r.timestamp||rn()},D=a.integrations||n.integrations.map(Ae=>Ae.name);Xu(T,n),el(T,D),f&&f.emit("applyFrameMetadata",r),r.type===void 0&&Qu(T,n.stackParser);let $=nl(u,a.captureContext);a.mechanism&&on(T,a.mechanism);let K=f?f.getEventProcessors():[],ee=zo().getScopeData();if(p){let Ae=p.getScopeData();rs(ee,Ae)}if($){let Ae=$.getScopeData();rs(ee,Ae)}let ne=[...a.attachments||[],...ee.attachments];ne.length&&(a.attachments=ne),Wu(T,ee);let te=[...K,...ee.eventProcessors];return Xr(te,T,a).then(Ae=>(Ae&&Zu(Ae),typeof y=="number"&&y>0?tl(Ae,y,w):Ae))}function Xu(n,r){let{environment:a,release:u,dist:f,maxValueLength:p=250}=r;"environment"in n||(n.environment="environment"in r?a:Jr),n.release===void 0&&u!==void 0&&(n.release=u),n.dist===void 0&&f!==void 0&&(n.dist=f),n.message&&(n.message=A(n.message,p));let y=n.exception&&n.exception.values&&n.exception.values[0];y&&y.value&&(y.value=A(y.value,p));let w=n.request;w&&w.url&&(w.url=A(w.url,p))}let is=new WeakMap;function Qu(n,r){let a=L._sentryDebugIds;if(!a)return;let u,f=is.get(r);f?u=f:(u=new Map,is.set(r,u));let p=Object.entries(a).reduce((y,[w,T])=>{let D,$=u.get(w);$?D=$:(D=r(w),u.set(w,D));for(let K=D.length-1;K>=0;K--){let ee=D[K];if(ee.filename){y[ee.filename]=T;break}}return y},{});try{n.exception.values.forEach(y=>{y.stacktrace.frames.forEach(w=>{w.filename&&(w.debug_id=p[w.filename])})})}catch{}}function Zu(n){let r={};try{n.exception.values.forEach(u=>{u.stacktrace.frames.forEach(f=>{f.debug_id&&(f.abs_path?r[f.abs_path]=f.debug_id:f.filename&&(r[f.filename]=f.debug_id),delete f.debug_id)})})}catch{}if(Object.keys(r).length===0)return;n.debug_meta=n.debug_meta||{},n.debug_meta.images=n.debug_meta.images||[];let a=n.debug_meta.images;Object.entries(r).forEach(([u,f])=>{a.push({type:"sourcemap",code_file:u,debug_id:f})})}function el(n,r){r.length>0&&(n.sdk=n.sdk||{},n.sdk.integrations=[...n.sdk.integrations||[],...r])}function tl(n,r,a){if(!n)return null;let u={...n,...n.breadcrumbs&&{breadcrumbs:n.breadcrumbs.map(f=>({...f,...f.data&&{data:ot(f.data,r,a)}}))},...n.user&&{user:ot(n.user,r,a)},...n.contexts&&{contexts:ot(n.contexts,r,a)},...n.extra&&{extra:ot(n.extra,r,a)}};return n.contexts&&n.contexts.trace&&u.contexts&&(u.contexts.trace=n.contexts.trace,n.contexts.trace.data&&(u.contexts.trace.data=ot(n.contexts.trace.data,r,a))),n.spans&&(u.spans=n.spans.map(f=>({...f,...f.data&&{data:ot(f.data,r,a)}}))),u}function nl(n,r){if(!r)return n;let a=n?n.clone():new Ye;return a.update(r),a}function rl(n){if(n)return il(n)?{captureContext:n}:sl(n)?{captureContext:n}:n}function il(n){return n instanceof Ye||typeof n=="function"}let ol=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function sl(n){return Object.keys(n).some(r=>ol.includes(r))}function os(n,r){return xe().captureException(n,rl(r))}function al(n,r){let a=typeof r=="string"?r:void 0,u=typeof r!="string"?{captureContext:r}:void 0;return xe().captureMessage(n,a,u)}function Hn(n,r){return xe().captureEvent(n,r)}function ss(n,r){Te().setContext(n,r)}function as(n){Te().setExtras(n)}function cs(n,r){Te().setExtra(n,r)}function us(n){Te().setTags(n)}function ls(n,r){Te().setTag(n,r)}function fs(n){Te().setUser(n)}function ds(){return Te().lastEventId()}async function cl(n){let r=se();return r?r.flush(n):(z.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function ul(n){let r=se();return r?r.close(n):(z.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function ll(){return!!se()}function fl(n){Te().addEventProcessor(n)}function Wn(n){let r=se(),a=Te(),u=xe(),{release:f,environment:p=Jr}=r&&r.getOptions()||{},{userAgent:y}=L.navigator||{},w=mu({release:f,environment:p,user:u.getUser()||a.getUser(),...y&&{userAgent:y},...n}),T=a.getSession();return T&&T.status==="ok"&&Bt(T,{status:"exited"}),ln(),a.setSession(w),u.setSession(w),w}function ln(){let n=Te(),r=xe(),a=r.getSession()||n.getSession();a&&gu(a),hs(),n.setSession(),r.setSession()}function hs(){let n=Te(),r=xe(),a=se(),u=r.getSession()||n.getSession();u&&a&&a.captureSession(u)}function Qr(n=!1){if(n){ln();return}hs()}let dl="7";function ps(n){let r=n.protocol?`${n.protocol}:`:"",a=n.port?`:${n.port}`:"";return`${r}//${n.host}${a}${n.path?`/${n.path}`:""}/api/`}function hl(n){return`${ps(n)}${n.projectId}/envelope/`}function pl(n,r){return bc({sentry_key:n.publicKey,sentry_version:dl,...r&&{sentry_client:`${r.name}/${r.version}`}})}function ml(n,r,a){return r||`${hl(n)}?${pl(n,a)}`}function gl(n,r){let a=go(n);if(!a)return"";let u=`${ps(a)}embed/error-page/`,f=`dsn=${nn(a)}`;for(let p in r)if(p!=="dsn"&&p!=="onClose")if(p==="user"){let y=r.user;if(!y)continue;y.name&&(f+=`&name=${encodeURIComponent(y.name)}`),y.email&&(f+=`&email=${encodeURIComponent(y.email)}`)}else f+=`&${encodeURIComponent(p)}=${encodeURIComponent(r[p])}`;return`${u}?${f}`}let ms=[];function yl(n){let r={};return n.forEach(a=>{let{name:u}=a,f=r[u];f&&!f.isDefaultInstance&&a.isDefaultInstance||(r[u]=a)}),Object.values(r)}function vl(n){let r=n.defaultIntegrations||[],a=n.integrations;r.forEach(y=>{y.isDefaultInstance=!0});let u;Array.isArray(a)?u=[...r,...a]:typeof a=="function"?u=Do(a(r)):u=r;let f=yl(u),p=f.findIndex(y=>y.name==="Debug");if(p>-1){let[y]=f.splice(p,1);f.push(y)}return f}function bl(n,r){let a={};return r.forEach(u=>{u&&ys(n,u,a)}),a}function gs(n,r){for(let a of r)a&&a.afterAllSetup&&a.afterAllSetup(n)}function ys(n,r,a){if(a[r.name]){z.log(`Integration skipped because it was already installed: ${r.name}`);return}if(a[r.name]=r,ms.indexOf(r.name)===-1&&typeof r.setupOnce=="function"&&(r.setupOnce(),ms.push(r.name)),r.setup&&typeof r.setup=="function"&&r.setup(n),typeof r.preprocessEvent=="function"){let u=r.preprocessEvent.bind(r);n.on("preprocessEvent",(f,p)=>u(f,p,n))}if(typeof r.processEvent=="function"){let u=r.processEvent.bind(r),f=Object.assign((p,y)=>u(p,y,n),{id:r.name});n.addEventProcessor(f)}z.log(`Integration installed: ${r.name}`)}function wl(n){let r=se();if(!r){z.warn(`Cannot add integration "${n.name}" because no SDK Client is available.`);return}r.addIntegration(n)}function hp(n){return n}let vs="Not capturing exception because it's already been captured.";class _l{constructor(r){if(this._options=r,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],r.dsn?this._dsn=go(r.dsn):z.warn("No DSN provided, client will not send events."),this._dsn){let a=ml(this._dsn,r.tunnel,r._metadata?r._metadata.sdk:void 0);this._transport=r.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...r.transportOptions,url:a})}}captureException(r,a,u){let f=de();if(Po(r))return z.log(vs),f;let p={event_id:f,...a};return this._process(this.eventFromException(r,p).then(y=>this._captureEvent(y,p,u))),p.event_id}captureMessage(r,a,u,f){let p={event_id:de(),...u},y=d(r)?r:String(r),w=m(r)?this.eventFromMessage(y,a,p):this.eventFromException(r,p);return this._process(w.then(T=>this._captureEvent(T,p,f))),p.event_id}captureEvent(r,a,u){let f=de();if(a&&a.originalException&&Po(a.originalException))return z.log(vs),f;let p={event_id:f,...a},w=(r.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(r,p,w||u)),p.event_id}captureSession(r){typeof r.release!="string"?z.warn("Discarded session because of missing or non-string release"):(this.sendSession(r),Bt(r,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(r){let a=this._transport;return a?(this.emit("flush"),this._isClientDoneProcessing(r).then(u=>a.flush(r).then(f=>u&&f))):_t(!0)}close(r){return this.flush(r).then(a=>(this.getOptions().enabled=!1,this.emit("close"),a))}getEventProcessors(){return this._eventProcessors}addEventProcessor(r){this._eventProcessors.push(r)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(r){return this._integrations[r]}addIntegration(r){let a=this._integrations[r.name];ys(this,r,this._integrations),a||gs(this,[r])}sendEvent(r,a={}){this.emit("beforeSendEvent",r,a);let u=Uu(r,this._dsn,this._options._metadata,this._options.tunnel);for(let p of a.attachments||[])u=Zc(u,nu(p));let f=this.sendEnvelope(u);f&&f.then(p=>this.emit("afterSendEvent",r,p),null)}sendSession(r){let a=ju(r,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(a)}recordDroppedEvent(r,a,u){if(this._options.sendClientReports){let f=`${r}:${a}`;z.log(`Adding outcome: "${f}"`),this._outcomes[f]=(this._outcomes[f]||0)+1}}on(r,a){let u=this._hooks[r]=this._hooks[r]||[];return u.push(a),()=>{let f=u.indexOf(a);f>-1&&u.splice(f,1)}}emit(r,...a){let u=this._hooks[r];u&&u.forEach(f=>f(...a))}sendEnvelope(r){return this.emit("beforeEnvelope",r),this._isEnabled()&&this._transport?this._transport.send(r).then(null,a=>(z.error("Error while sending event:",a),a)):(z.error("Transport disabled"),_t({}))}_setupIntegrations(){let{integrations:r}=this._options;this._integrations=bl(this,r),gs(this,r)}_updateSessionFromEvent(r,a){let u=!1,f=!1,p=a.exception&&a.exception.values;if(p){f=!0;for(let T of p){let D=T.mechanism;if(D&&D.handled===!1){u=!0;break}}}let y=r.status==="ok";(y&&r.errors===0||y&&u)&&(Bt(r,{...u&&{status:"crashed"},errors:r.errors||Number(f||u)}),this.captureSession(r))}_isClientDoneProcessing(r){return new Ke(a=>{let u=0,f=1,p=setInterval(()=>{this._numProcessing==0?(clearInterval(p),a(!0)):(u+=f,r&&u>=r&&(clearInterval(p),a(!1)))},f)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(r,a,u,f=Te()){let p=this.getOptions(),y=Object.keys(this._integrations);return!a.integrations&&y.length>0&&(a.integrations=y),this.emit("preprocessEvent",r,a),r.type||f.setLastEventId(r.event_id||a.event_id),Ju(p,r,a,u,this,f).then(w=>{if(w===null)return w;let T={...f.getPropagationContext(),...u?u.getPropagationContext():void 0};if(!(w.contexts&&w.contexts.trace)&&T){let{traceId:$,spanId:K,parentSpanId:ee,dsc:ne}=T;w.contexts={trace:Le({trace_id:$,span_id:K,parent_span_id:ee}),...w.contexts};let te=ne||ts($,this);w.sdkProcessingMetadata={dynamicSamplingContext:te,...w.sdkProcessingMetadata}}return w})}_captureEvent(r,a={},u){return this._processEvent(r,a,u).then(f=>f.event_id,f=>{{let p=f;p.logLevel==="log"?z.log(p.message):z.warn(p)}})}_processEvent(r,a,u){let f=this.getOptions(),{sampleRate:p}=f,y=Zr(r),w=bs(r),T=r.type||"error",D=`before send for type \`${T}\``,$=typeof p>"u"?void 0:Ku(p);if(w&&typeof $=="number"&&Math.random()>$)return this.recordDroppedEvent("sample_rate","error",r),Kn(new He(`Discarding event because it's not included in the random sample (sampling rate = ${p})`,"log"));let K=T==="replay_event"?"replay":T,ne=(r.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(r,a,u,ne).then(te=>{if(te===null)throw this.recordDroppedEvent("event_processor",K,r),new He("An event processor returned `null`, will not send event.","log");if(a.data&&a.data.Pe===!0)return te;let Ae=Sl(this,f,te,a);return El(Ae,D)}).then(te=>{if(te===null){if(this.recordDroppedEvent("before_send",K,r),Zr(r)){let dd=1+(r.spans||[]).length;this._outcomes.span=(this._outcomes.span||0)+dd}throw new He(`${D} returned \`null\`, will not send event.`,"log")}let Jn=u&&u.getSession();!y&&Jn&&this._updateSessionFromEvent(Jn,te);let Ae=te.transaction_info;if(y&&Ae&&te.transaction!==r.transaction){let ta="custom";te.transaction_info={...Ae,source:ta}}return this.sendEvent(te,a),te}).then(null,te=>{throw te instanceof He?te:(this.captureException(te,{data:{Pe:!0},originalException:te}),new He(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${te}`))})}_process(r){this._numProcessing++,r.then(a=>(this._numProcessing--,a),a=>(this._numProcessing--,a))}_clearOutcomes(){let r=this._outcomes;return this._outcomes={},Object.entries(r).map(([a,u])=>{let[f,p]=a.split(":");return{reason:f,category:p,quantity:u}})}}function El(n,r){let a=`${r} must return \`null\` or a valid event.`;if(b(n))return n.then(u=>{if(!g(u)&&u!==null)throw new He(a);return u},u=>{throw new He(`${r} rejected with ${u}`)});if(!g(n)&&n!==null)throw new He(a);return n}function Sl(n,r,a,u){let{beforeSend:f,beforeSendTransaction:p,beforeSendSpan:y}=r;if(bs(a)&&f)return f(a,u);if(Zr(a)){if(a.spans&&y){let w=[];for(let T of a.spans){let D=y(T);D?w.push(D):n.recordDroppedEvent("before_send","span")}a.spans=w}if(p)return p(a,u)}return a}function bs(n){return n.type===void 0}function Zr(n){return n.type==="transaction"}function xl(n,r){r.debug===!0&&z.enable(),xe().update(r.initialScope);let u=new n(r);return ws(u),u.init(),u}function ws(n){xe().setClient(n)}let Il=64;function _s(n,r,a=jc(n.bufferSize||Il)){let u={},f=y=>a.drain(y);function p(y){let w=[];if(Bo(y,(K,ee)=>{let ne=Lo(ee);if(uu(u,ne)){let te=Es(K,ee);n.recordDroppedEvent("ratelimit_backoff",ne,te)}else w.push(K)}),w.length===0)return _t({});let T=sn(y[0],w),D=K=>{Bo(T,(ee,ne)=>{let te=Es(ee,ne);n.recordDroppedEvent(K,Lo(ne),te)})},$=()=>r({body:eu(T)}).then(K=>(K.statusCode!==void 0&&(K.statusCode<200||K.statusCode>=300)&&z.warn(`Sentry responded with status code ${K.statusCode} to sent event.`),u=lu(u,K),K),K=>{throw D("network_error"),K});return a.add($).then(K=>K,K=>{if(K instanceof He)return z.error("Skipped sending event because buffer is full."),D("queue_overflow"),_t({});throw K})}return{send:p,flush:f}}function Es(n,r){if(!(r!=="event"&&r!=="transaction"))return Array.isArray(n)?n[1]:void 0}function kl(n,...r){let a=new String(String.raw(n,...r));return a.De=n.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),a.Re=r,a}function Tl(n,r,a=[r],u="npm"){let f=n._metadata||{};f.sdk||(f.sdk={name:`sentry.javascript.${r}`,packages:a.map(p=>({name:`${u}:@sentry/${p}`,version:N})),version:N}),n._metadata=f}let Al=100;function Je(n,r){let a=se(),u=Te();if(!a)return;let{beforeBreadcrumb:f=null,maxBreadcrumbs:p=Al}=a.getOptions();if(p<=0)return;let w={timestamp:rn(),...n},T=f?Pe(()=>f(w,r)):w;T!==null&&(a.emit&&a.emit("beforeAddBreadcrumb",T,r),u.addBreadcrumb(T,p))}let Ss,Cl="FunctionToString",xs=new WeakMap,Is=(()=>({name:Cl,setupOnce(){Ss=Function.prototype.toString;try{Function.prototype.toString=function(...n){let r=Br(this),a=xs.has(se())&&r!==void 0?r:this;return Ss.apply(a,n)}}catch{}},setup(n){xs.set(n,!0)}})),Ol=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],Pl="InboundFilters",ks=((n={})=>({name:Pl,processEvent(r,a,u){let f=u.getOptions(),p=Dl(n,f);return Rl(r,p)?null:r}}));function Dl(n={},r={}){return{allowUrls:[...n.allowUrls||[],...r.allowUrls||[]],denyUrls:[...n.denyUrls||[],...r.denyUrls||[]],ignoreErrors:[...n.ignoreErrors||[],...r.ignoreErrors||[],...n.disableErrorDefaults?[]:Ol],ignoreTransactions:[...n.ignoreTransactions||[],...r.ignoreTransactions||[]],ignoreInternal:n.ignoreInternal!==void 0?n.ignoreInternal:!0}}function Rl(n,r){return r.ignoreInternal&&Kl(n)?(z.warn(`Event dropped due to being internal Sentry Error.
Event: ${it(n)}`),!0):Ml(n,r.ignoreErrors)?(z.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${it(n)}`),!0):jl(n)?(z.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${it(n)}`),!0):Nl(n,r.ignoreTransactions)?(z.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${it(n)}`),!0):Fl(n,r.denyUrls)?(z.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${it(n)}.
Url: ${Vn(n)}`),!0):Bl(n,r.allowUrls)?!1:(z.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${it(n)}.
Url: ${Vn(n)}`),!0)}function Ml(n,r){return n.type||!r||!r.length?!1:Ll(n).some(a=>O(a,r))}function Nl(n,r){if(n.type!=="transaction"||!r||!r.length)return!1;let a=n.transaction;return a?O(a,r):!1}function Fl(n,r){if(!r||!r.length)return!1;let a=Vn(n);return a?O(a,r):!1}function Bl(n,r){if(!r||!r.length)return!0;let a=Vn(n);return a?O(a,r):!0}function Ll(n){let r=[];n.message&&r.push(n.message);let a;try{a=n.exception.values[n.exception.values.length-1]}catch{}return a&&a.value&&(r.push(a.value),a.type&&r.push(`${a.type}: ${a.value}`)),r}function Kl(n){try{return n.exception.values[0].type==="SentryError"}catch{}return!1}function $l(n=[]){for(let r=n.length-1;r>=0;r--){let a=n[r];if(a&&a.filename!=="<anonymous>"&&a.filename!=="[native code]")return a.filename||null}return null}function Vn(n){try{let r;try{r=n.exception.values[0].stacktrace.frames}catch{}return r?$l(r):null}catch{return z.error(`Cannot extract url for event ${it(n)}`),null}}function jl(n){return n.type||!n.exception||!n.exception.values||n.exception.values.length===0?!1:!n.message&&!n.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value)}let Ul="Dedupe",Ts=(()=>{let n;return{name:Ul,processEvent(r){if(r.type)return r;try{if(Hl(r,n))return z.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return n=r}}});function Hl(n,r){return r?!!(Wl(n,r)||Vl(n,r)):!1}function Wl(n,r){let a=n.message,u=r.message;return!(!a&&!u||a&&!u||!a&&u||a!==u||!Cs(n,r)||!As(n,r))}function Vl(n,r){let a=Os(r),u=Os(n);return!(!a||!u||a.type!==u.type||a.value!==u.value||!Cs(n,r)||!As(n,r))}function As(n,r){let a=Io(n),u=Io(r);if(!a&&!u)return!0;if(a&&!u||!a&&u||(a=a,u=u,u.length!==a.length))return!1;for(let f=0;f<u.length;f++){let p=u[f],y=a[f];if(p.filename!==y.filename||p.lineno!==y.lineno||p.colno!==y.colno||p.function!==y.function)return!1}return!0}function Cs(n,r){let a=n.fingerprint,u=r.fingerprint;if(!a&&!u)return!0;if(a&&!u||!a&&u)return!1;a=a,u=u;try{return a.join("")===u.join("")}catch{return!1}}function Os(n){return n.exception&&n.exception.values&&n.exception.values[0]}function zl(){return{bindClient(n){xe().setClient(n)},withScope:Un,getClient:()=>se(),getScope:xe,getIsolationScope:Te,captureException:(n,r)=>xe().captureException(n,r),captureMessage:(n,r,a)=>xe().captureMessage(n,r,a),captureEvent:Hn,addBreadcrumb:Je,setUser:fs,setTags:us,setTag:ls,setExtra:cs,setExtras:as,setContext:ss,getIntegration(n){let r=se();return r&&r.getIntegrationByName(n.id)||null},startSession:Wn,endSession:ln,captureSession(n){if(n)return ln();ql()}}}let Gl=zl;function ql(){let n=xe(),r=se(),a=n.getSession();r&&a&&r.captureSession(a)}let Yl=n=>(Pe(()=>{console.warn("You are using browserTracingIntegration() even though this bundle does not include tracing.")}),{name:"BrowserTracing"});function fn(){Pe(()=>{console.warn("You are using metrics even though this bundle does not include tracing.")})}let Jl={increment:fn,distribution:fn,set:fn,gauge:fn,timing:(n,r)=>{if(fn(),typeof r=="function")return r()}},Q=L,ei=0;function Ps(){return ei>0}function Xl(){ei++,setTimeout(()=>{ei--})}function Kt(n,r={},a){if(typeof n!="function")return n;try{let f=n.Me;if(f)return f;if(Br(n))return n}catch{return n}let u=function(){let f=Array.prototype.slice.call(arguments);try{a&&typeof a=="function"&&a.apply(this,arguments);let p=f.map(y=>Kt(y,r));return n.apply(this,p)}catch(p){throw Xl(),Un(y=>{y.addEventProcessor(w=>(r.mechanism&&(Hr(w,void 0,void 0),on(w,r.mechanism)),w.extra={...w.extra,arguments:f},w)),os(p)}),p}};try{for(let f in n)Object.prototype.hasOwnProperty.call(n,f)&&(u[f]=n[f])}catch{}yo(u,n),vt(n,"__sentry_wrapped__",u);try{Object.getOwnPropertyDescriptor(u,"name").configurable&&Object.defineProperty(u,"name",{get(){return n.name}})}catch{}return u}function zn(n,r){let a=ni(n,r),u={type:r&&r.name,value:nf(r)};return a.length&&(u.stacktrace={frames:a}),u.type===void 0&&u.value===""&&(u.value="Unrecoverable error caught"),u}function Ql(n,r,a,u){let f=se(),p=f&&f.getOptions().normalizeDepth,y=sf(r),w={Gt:Ro(r,p)};if(y)return{exception:{values:[zn(n,y)]},extra:w};let T={exception:{values:[{type:v(r)?r.constructor.name:u?"UnhandledRejection":"Error",value:rf(r,{isUnhandledRejection:u})}]},extra:w};if(a){let D=ni(n,a);D.length&&(T.exception.values[0].stacktrace={frames:D})}return T}function ti(n,r){return{exception:{values:[zn(n,r)]}}}function ni(n,r){let a=r.stacktrace||r.stack||"",u=ef(r),f=tf(r);try{return n(a,u,f)}catch{}return[]}let Zl=/Minified React error #\d+;/i;function ef(n){return n&&Zl.test(n.message)?1:0}function tf(n){return typeof n.framesToPop=="number"?n.framesToPop:0}function nf(n){let r=n&&n.message;return r?r.error&&typeof r.error.message=="string"?r.error.message:r:"No error message"}function Ds(n,r,a,u){let f=a&&a.syntheticException||void 0,p=ri(n,r,f,u);return on(p),p.level="error",a&&a.event_id&&(p.event_id=a.event_id),_t(p)}function Rs(n,r,a="info",u,f){let p=u&&u.syntheticException||void 0,y=ii(n,r,p,f);return y.level=a,u&&u.event_id&&(y.event_id=u.event_id),_t(y)}function ri(n,r,a,u,f){let p;if(s(r)&&r.error)return ti(n,r.error);if(c(r)||l(r)){let y=r;if("stack"in r)p=ti(n,r);else{let w=y.name||(c(y)?"DOMError":"DOMException"),T=y.message?`${w}: ${y.message}`:w;p=ii(n,T,a,u),Hr(p,T)}return"code"in y&&(p.tags={...p.tags,"DOMException.code":`${y.code}`}),p}return i(r)?ti(n,r):g(r)||v(r)?(p=Ql(n,r,a,f),on(p,{synthetic:!0}),p):(p=ii(n,r,a,u),Hr(p,`${r}`,void 0),on(p,{synthetic:!0}),p)}function ii(n,r,a,u){let f={};if(u&&a){let p=ni(n,a);p.length&&(f.exception={values:[{value:r,stacktrace:{frames:p}}]})}if(d(r)){let{De:p,Re:y}=r;return f.logentry={message:p,params:y},f}return f.message=r,f}function rf(n,{isUnhandledRejection:r}){let a=wc(n),u=r?"promise rejection":"exception";return s(n)?`Event \`ErrorEvent\` captured as ${u} with message \`${n.message}\``:v(n)?`Event \`${of(n)}\` (type=${n.type}) captured as ${u}`:`Object captured as ${u} with keys: ${a}`}function of(n){try{let r=Object.getPrototypeOf(n);return r?r.constructor.name:void 0}catch{}}function sf(n){for(let r in n)if(Object.prototype.hasOwnProperty.call(n,r)){let a=n[r];if(a instanceof Error)return a}}function Ms(n,{metadata:r,tunnel:a,dsn:u}){let f={event_id:n.event_id,sent_at:new Date().toISOString(),...r&&r.sdk&&{sdk:{name:r.sdk.name,version:r.sdk.version}},...!!a&&!!u&&{dsn:nn(u)}},p=af(n);return sn(f,[p])}function af(n){return[{type:"user_report"},n]}class Ns extends _l{constructor(r){let a={parentSpanIsAlwaysRootSpan:!0,...r},u=Q.SENTRY_SDK_SOURCE||Nc();Tl(a,"browser",["browser"],u),super(a),a.sendClientReports&&Q.document&&Q.document.addEventListener("visibilitychange",()=>{Q.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(r,a){return Ds(this._options.stackParser,r,a,this._options.attachStacktrace)}eventFromMessage(r,a="info",u){return Rs(this._options.stackParser,r,a,u,this._options.attachStacktrace)}captureUserFeedback(r){if(!this._isEnabled()){z.warn("SDK not enabled, will not capture user feedback.");return}let a=Ms(r,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(a)}_prepareEvent(r,a,u){return r.platform=r.platform||"javascript",super._prepareEvent(r,a,u)}_flushOutcomes(){let r=this._clearOutcomes();if(r.length===0){z.log("No outcomes to send");return}if(!this._dsn){z.log("No dsn provided, will not send outcomes");return}z.log("Sending outcomes:",r);let a=ou(r,this._options.tunnel&&nn(this._dsn));this.sendEnvelope(a)}}let Ie=L,cf=1e3,Fs,oi,si;function uf(n){bt("dom",n),wt("dom",lf)}function lf(){if(!Ie.document)return;let n=je.bind(null,"dom"),r=Bs(n,!0);Ie.document.addEventListener("click",r,!1),Ie.document.addEventListener("keypress",r,!1),["EventTarget","Node"].forEach(a=>{let u=Ie[a]&&Ie[a].prototype;!u||!u.hasOwnProperty||!u.hasOwnProperty("addEventListener")||(ye(u,"addEventListener",function(f){return function(p,y,w){if(p==="click"||p=="keypress")try{let T=this,D=T.N=T.N||{},$=D[p]=D[p]||{refCount:0};if(!$.handler){let K=Bs(n);$.handler=K,f.call(this,p,K,w)}$.refCount++}catch{}return f.call(this,p,y,w)}}),ye(u,"removeEventListener",function(f){return function(p,y,w){if(p==="click"||p=="keypress")try{let T=this,D=T.N||{},$=D[p];$&&($.refCount--,$.refCount<=0&&(f.call(this,p,$.handler,w),$.handler=void 0,delete D[p]),Object.keys(D).length===0&&delete T.N)}catch{}return f.call(this,p,y,w)}}))})}function ff(n){if(n.type!==oi)return!1;try{if(!n.target||n.target._sentryId!==si)return!1}catch{}return!0}function df(n,r){return n!=="keypress"?!1:!r||!r.tagName?!0:!(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable)}function Bs(n,r=!1){return a=>{if(!a||a._sentryCaptured)return;let u=hf(a);if(df(a.type,u))return;vt(a,"_sentryCaptured",!0),u&&!u._sentryId&&vt(u,"_sentryId",de());let f=a.type==="keypress"?"input":a.type;ff(a)||(n({event:a,name:f,global:r}),oi=a.type,si=u?u._sentryId:void 0),clearTimeout(Fs),Fs=Ie.setTimeout(()=>{si=void 0,oi=void 0},cf)}}function hf(n){try{return n.target}catch{return null}}let Gn;function Ls(n){let r="history";bt(r,n),wt(r,pf)}function pf(){if(!fu())return;let n=Ie.onpopstate;Ie.onpopstate=function(...a){let u=Ie.location.href,f=Gn;if(Gn=u,je("history",{from:f,to:u}),n)try{return n.apply(this,a)}catch{}};function r(a){return function(...u){let f=u.length>2?u[2]:void 0;if(f){let p=Gn,y=String(f);Gn=y,je("history",{from:p,to:y})}return a.apply(this,u)}}ye(Ie.history,"pushState",r),ye(Ie.history,"replaceState",r)}let qn={};function mf(n){let r=qn[n];if(r)return r;let a=Ie[n];if(jr(a))return qn[n]=a.bind(Ie);let u=Ie.document;if(u&&typeof u.createElement=="function")try{let f=u.createElement("iframe");f.hidden=!0,u.head.appendChild(f);let p=f.contentWindow;p&&p[n]&&(a=p[n]),u.head.removeChild(f)}catch(f){z.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,f)}return a&&(qn[n]=a.bind(Ie))}function Ks(n){qn[n]=void 0}let dn="__sentry_xhr_v3__";function gf(n){bt("xhr",n),wt("xhr",yf)}function yf(){if(!Ie.XMLHttpRequest)return;let n=XMLHttpRequest.prototype;ye(n,"open",function(r){return function(...a){let u=Ge()*1e3,f=h(a[0])?a[0].toUpperCase():void 0,p=vf(a[1]);if(!f||!p)return r.apply(this,a);this[dn]={method:f,url:p,request_headers:{}},f==="POST"&&p.match(/sentry_key/)&&(this.qt=!0);let y=()=>{let w=this[dn];if(w&&this.readyState===4){try{w.status_code=this.status}catch{}let T={endTimestamp:Ge()*1e3,startTimestamp:u,xhr:this};je("xhr",T)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?ye(this,"onreadystatechange",function(w){return function(...T){return y(),w.apply(this,T)}}):this.addEventListener("readystatechange",y),ye(this,"setRequestHeader",function(w){return function(...T){let[D,$]=T,K=this[dn];return K&&h(D)&&h($)&&(K.request_headers[D.toLowerCase()]=$),w.apply(this,T)}}),r.apply(this,a)}}),ye(n,"send",function(r){return function(...a){let u=this[dn];if(!u)return r.apply(this,a);a[0]!==void 0&&(u.body=a[0]);let f={startTimestamp:Ge()*1e3,xhr:this};return je("xhr",f),r.apply(this,a)}})}function vf(n){if(h(n))return n;try{return n.toString()}catch{}}function $s(n,r=mf("fetch")){let a=0,u=0;function f(p){let y=p.body.length;a+=y,u++;let w={body:p.body,method:"POST",referrerPolicy:"origin",headers:n.headers,keepalive:a<=6e4&&u<15,...n.fetchOptions};if(!r)return Ks("fetch"),Kn("No fetch implementation available");try{return r(n.url,w).then(T=>(a-=y,u--,{statusCode:T.status,headers:{"x-sentry-rate-limits":T.headers.get("X-Sentry-Rate-Limits"),"retry-after":T.headers.get("Retry-After")}}))}catch(T){return Ks("fetch"),a-=y,u--,Kn(T)}}return _s(n,f)}let bf=10,wf=20,_f=30,Ef=40,Sf=50;function $t(n,r,a,u){let f={filename:n,function:r==="<anonymous>"?We:r,in_app:!0};return a!==void 0&&(f.lineno=a),u!==void 0&&(f.colno=u),f}let xf=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,If=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,kf=/\((\S*)(?::(\d+))(?::(\d+))\)/,js=[_f,n=>{let r=xf.exec(n);if(r){let[,u,f,p]=r;return $t(u,We,+f,+p)}let a=If.exec(n);if(a){if(a[2]&&a[2].indexOf("eval")===0){let y=kf.exec(a[2]);y&&(a[2]=y[1],a[3]=y[2],a[4]=y[3])}let[f,p]=Vs(a[1]||We,a[2]);return $t(p,f,a[3]?+a[3]:void 0,a[4]?+a[4]:void 0)}}],Tf=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Af=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Us=[Sf,n=>{let r=Tf.exec(n);if(r){if(r[3]&&r[3].indexOf(" > eval")>-1){let p=Af.exec(r[3]);p&&(r[1]=r[1]||"eval",r[3]=p[1],r[4]=p[2],r[5]="")}let u=r[3],f=r[1]||We;return[f,u]=Vs(f,u),$t(u,f,r[4]?+r[4]:void 0,r[5]?+r[5]:void 0)}}],Cf=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Of=[Ef,n=>{let r=Cf.exec(n);return r?$t(r[2],r[1]||We,+r[3],r[4]?+r[4]:void 0):void 0}],Pf=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Df=[bf,n=>{let r=Pf.exec(n);return r?$t(r[2],r[3]||We,+r[1]):void 0}],Rf=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Mf=[wf,n=>{let r=Rf.exec(n);return r?$t(r[5],r[3]||r[4]||We,+r[1],+r[2]):void 0}],Hs=[js,Us],Ws=xo(...Hs),Vs=(n,r)=>{let a=n.indexOf("safari-extension")!==-1,u=n.indexOf("safari-web-extension")!==-1;return a||u?[n.indexOf("@")!==-1?n.split("@")[0]:We,a?`safari-extension:${r}`:`safari-web-extension:${r}`]:[n,r]},Yn=1024,Nf="Breadcrumbs",zs=((n={})=>{let r={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...n};return{name:Nf,setup(a){r.console&&xc(Lf(a)),r.dom&&uf(Bf(a,r.dom)),r.xhr&&gf(Kf(a)),r.fetch&&Ac($f(a)),r.history&&Ls(jf(a)),r.sentry&&a.on("beforeSendEvent",Ff(a))}}});function Ff(n){return function(a){se()===n&&Je({category:`sentry.${a.type==="transaction"?"transaction":"event"}`,event_id:a.event_id,level:a.level,message:it(a)},{event:a})}}function Bf(n,r){return function(u){if(se()!==n)return;let f,p,y=typeof r=="object"?r.serializeAttribute:void 0,w=typeof r=="object"&&typeof r.maxStringLength=="number"?r.maxStringLength:void 0;w&&w>Yn&&(z.warn(`\`dom.maxStringLength\` cannot exceed ${Yn}, but a value of ${w} was configured. Sentry will use ${Yn} instead.`),w=Yn),typeof y=="string"&&(y=[y]);try{let D=u.event,$=Uf(D)?D.target:D;f=oe($,{keyAttrs:y,maxStringLength:w}),p=Se($)}catch{f="<unknown>"}if(f.length===0)return;let T={category:`ui.${u.name}`,message:f};p&&(T.data={"ui.component_name":p}),Je(T,{event:u.event,name:u.name,global:u.global})}}function Lf(n){return function(a){if(se()!==n)return;let u={category:"console",data:{arguments:a.args,logger:"console"},level:Hc(a.level),message:C(a.args," ")};if(a.level==="assert")if(a.args[0]===!1)u.message=`Assertion failed: ${C(a.args.slice(1)," ")||"console.assert"}`,u.data.arguments=a.args.slice(1);else return;Je(u,{input:a.args,level:a.level})}}function Kf(n){return function(a){if(se()!==n)return;let{startTimestamp:u,endTimestamp:f}=a,p=a.xhr[dn];if(!u||!f||!p)return;let{method:y,url:w,status_code:T,body:D}=p,$={method:y,url:w,status_code:T},K={xhr:a.xhr,input:D,startTimestamp:u,endTimestamp:f};Je({category:"xhr",data:$,type:"http"},K)}}function $f(n){return function(a){if(se()!==n)return;let{startTimestamp:u,endTimestamp:f}=a;if(f&&!(a.fetchData.url.match(/sentry_key/)&&a.fetchData.method==="POST"))if(a.error){let p=a.fetchData,y={data:a.error,input:a.args,startTimestamp:u,endTimestamp:f};Je({category:"fetch",data:p,level:"error",type:"http"},y)}else{let p=a.response,y={...a.fetchData,status_code:p&&p.status},w={input:a.args,response:p,startTimestamp:u,endTimestamp:f};Je({category:"fetch",data:y,type:"http"},w)}}}function jf(n){return function(a){if(se()!==n)return;let u=a.from,f=a.to,p=Vr(Q.location.href),y=u?Vr(u):void 0,w=Vr(f);(!y||!y.path)&&(y=p),p.protocol===w.protocol&&p.host===w.host&&(f=w.relative),p.protocol===y.protocol&&p.host===y.host&&(u=y.relative),Je({category:"navigation",data:{from:u,to:f}})}}function Uf(n){return!!n&&!!n.target}let Hf=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Wf="BrowserApiErrors",Gs=((n={})=>{let r={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...n};return{name:Wf,setupOnce(){r.setTimeout&&ye(Q,"setTimeout",qs),r.setInterval&&ye(Q,"setInterval",qs),r.requestAnimationFrame&&ye(Q,"requestAnimationFrame",Vf),r.XMLHttpRequest&&"XMLHttpRequest"in Q&&ye(XMLHttpRequest.prototype,"send",zf);let a=r.eventTarget;a&&(Array.isArray(a)?a:Hf).forEach(Gf)}}});function qs(n){return function(...r){let a=r[0];return r[0]=Kt(a,{mechanism:{data:{function:rt(n)},handled:!1,type:"instrument"}}),n.apply(this,r)}}function Vf(n){return function(r){return n.apply(this,[Kt(r,{mechanism:{data:{function:"requestAnimationFrame",handler:rt(n)},handled:!1,type:"instrument"}})])}}function zf(n){return function(...r){let a=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(f=>{f in a&&typeof a[f]=="function"&&ye(a,f,function(p){let y={mechanism:{data:{function:f,handler:rt(p)},handled:!1,type:"instrument"}},w=Br(p);return w&&(y.mechanism.data.handler=rt(w)),Kt(p,y)})}),n.apply(this,r)}}function Gf(n){let r=Q,a=r[n]&&r[n].prototype;!a||!a.hasOwnProperty||!a.hasOwnProperty("addEventListener")||(ye(a,"addEventListener",function(u){return function(f,p,y){try{typeof p.handleEvent=="function"&&(p.handleEvent=Kt(p.handleEvent,{mechanism:{data:{function:"handleEvent",handler:rt(p),target:n},handled:!1,type:"instrument"}}))}catch{}return u.apply(this,[f,Kt(p,{mechanism:{data:{function:"addEventListener",handler:rt(p),target:n},handled:!1,type:"instrument"}}),y])}}),ye(a,"removeEventListener",function(u){return function(f,p,y){let w=p;try{let T=w&&w.Me;T&&u.call(this,f,T,y)}catch{}return u.call(this,f,w,y)}}))}let qf="GlobalHandlers",Ys=((n={})=>{let r={onerror:!0,onunhandledrejection:!0,...n};return{name:qf,setupOnce(){Error.stackTraceLimit=50},setup(a){r.onerror&&(Yf(a),Js("onerror")),r.onunhandledrejection&&(Jf(a),Js("onunhandledrejection"))}}});function Yf(n){Pc(r=>{let{stackParser:a,attachStacktrace:u}=Xs();if(se()!==n||Ps())return;let{msg:f,url:p,line:y,column:w,error:T}=r,D=Zf(ri(a,T||f,void 0,u,!1),p,y,w);D.level="error",Hn(D,{originalException:T,mechanism:{handled:!1,type:"onerror"}})})}function Jf(n){Rc(r=>{let{stackParser:a,attachStacktrace:u}=Xs();if(se()!==n||Ps())return;let f=Xf(r),p=m(f)?Qf(f):ri(a,f,void 0,u,!0);p.level="error",Hn(p,{originalException:f,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Xf(n){if(m(n))return n;try{if("reason"in n)return n.reason;if("detail"in n&&"reason"in n.detail)return n.detail.reason}catch{}return n}function Qf(n){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(n)}`}]}}}function Zf(n,r,a,u){let f=n.exception=n.exception||{},p=f.values=f.values||[],y=p[0]=p[0]||{},w=y.stacktrace=y.stacktrace||{},T=w.frames=w.frames||[],D=isNaN(parseInt(u,10))?void 0:u,$=isNaN(parseInt(a,10))?void 0:a,K=h(r)&&r.length>0?r:Be();return T.length===0&&T.push({colno:D,filename:K,function:We,in_app:!0,lineno:$}),n}function Js(n){z.log(`Global Handler attached: ${n}`)}function Xs(){let n=se();return n&&n.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}let Qs=()=>({name:"HttpContext",preprocessEvent(n){if(!Q.navigator&&!Q.location&&!Q.document)return;let r=n.request&&n.request.url||Q.location&&Q.location.href,{referrer:a}=Q.document||{},{userAgent:u}=Q.navigator||{},f={...n.request&&n.request.headers,...a&&{Referer:a},...u&&{"User-Agent":u}},p={...n.request,...r&&{url:r},headers:f};n.request=p}}),ed="cause",td=5,nd="LinkedErrors",Zs=((n={})=>{let r=n.limit||td,a=n.key||ed;return{name:nd,preprocessEvent(u,f,p){let y=p.getOptions();R(zn,y.stackParser,y.maxValueLength,a,r,u,f)}}});function ea(n){return[ks(),Is(),Gs(),zs(),Ys(),Zs(),Ts(),Qs()]}function rd(n={}){return{...{defaultIntegrations:ea(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:Q.SENTRY_RELEASE&&Q.SENTRY_RELEASE.id?Q.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0},...n}}function id(){let n=Q,r=n.chrome?"chrome":"browser",a=n[r],u=a&&a.runtime&&a.runtime.id,f=Q.location&&Q.location.href||"",p=["chrome-extension:","moz-extension:","ms-browser-extension:"],y=!!u&&Q===Q.top&&p.some(T=>f.startsWith(`${T}//`)),w=typeof n.nw<"u";return!!u&&!y&&!w}function od(n={}){let r=rd(n);if(id()){Pe(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}To()||z.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");let a={...r,stackParser:Ec(r.stackParser||Ws),integrations:vl(r),transport:r.transport||$s},u=xl(Ns,a);return r.autoSessionTracking&&ud(),u}function sd(n={}){if(!Q.document){z.error("Global document not defined in showReportDialog call");return}let r=xe(),a=r.getClient(),u=a&&a.getDsn();if(!u){z.error("DSN not configured for showReportDialog call");return}if(r&&(n.user={...r.getUser(),...n.user}),!n.eventId){let w=ds();w&&(n.eventId=w)}let f=Q.document.createElement("script");f.async=!0,f.crossOrigin="anonymous",f.src=gl(u,n),n.onLoad&&(f.onload=n.onLoad);let{onClose:p}=n;if(p){let w=T=>{if(T.data==="__sentry_reportdialog_closed__")try{p()}finally{Q.removeEventListener("message",w)}};Q.addEventListener("message",w)}let y=Q.document.head||Q.document.body;y?y.appendChild(f):z.error("Not injecting report dialog. No injection point found in HTML")}function ad(){}function cd(n){n()}function ud(){if(typeof Q.document>"u"){z.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}Wn({ignoreDuration:!0}),Qr(),Ls(({from:n,to:r})=>{n!==void 0&&n!==r&&(Wn({ignoreDuration:!0}),Qr())})}function ld(n){let r=se();r&&r.captureUserFeedback(n)}let kp={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling"},Tp=Q;async function fd(n){throw new Error("Disabled due to CWS Policy requirement.")}function Ap(n){}return e.BrowserClient=Ns,e.SDK_VERSION=N,e.SEMANTIC_ATTRIBUTE_SENTRY_OP=Yo,e.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=Jo,e.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=qo,e.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=Go,e.Scope=Ye,e.WINDOW=Q,e.addBreadcrumb=Je,e.addEventProcessor=fl,e.addIntegration=wl,e.breadcrumbsIntegration=zs,e.browserApiErrorsIntegration=Gs,e.browserTracingIntegration=Yl,e.captureEvent=Hn,e.captureException=os,e.captureMessage=al,e.captureSession=Qr,e.captureUserFeedback=ld,e.chromeStackLineParser=js,e.close=ul,e.continueTrace=Hu,e.createTransport=_s,e.createUserFeedbackEnvelope=Ms,e.dedupeIntegration=Ts,e.defaultStackLineParsers=Hs,e.defaultStackParser=Ws,e.endSession=ln,e.eventFromException=Ds,e.eventFromMessage=Rs,e.exceptionFromError=zn,e.feedbackAsyncIntegration=Uo,e.feedbackIntegration=Uo,e.flush=cl,e.forceLoad=ad,e.functionToStringIntegration=Is,e.geckoStackLineParser=Us,e.getClient=se,e.getCurrentHub=Gl,e.getCurrentScope=xe,e.getDefaultIntegrations=ea,e.getGlobalScope=zo,e.getIsolationScope=Te,e.globalHandlersIntegration=Ys,e.httpContextIntegration=Qs,e.inboundFiltersIntegration=ks,e.init=od,e.isInitialized=ll,e.lastEventId=ds,e.lazyLoadIntegration=fd,e.linkedErrorsIntegration=Zs,e.makeFetchTransport=$s,e.metrics=Jl,e.onLoad=cd,e.opera10StackLineParser=Df,e.opera11StackLineParser=Mf,e.parameterize=kl,e.replayIntegration=pu,e.setContext=ss,e.setCurrentClient=ws,e.setExtra=cs,e.setExtras=as,e.setTag=ls,e.setTags=us,e.setUser=fs,e.showReportDialog=sd,e.spanToBaggageHeader=Lu,e.spanToJSON=cn,e.spanToTraceHeader=Du,e.startSession=Wn,e.winjsStackLineParser=Of,e.withIsolationScope=Iu,e.withScope=Un,e})({});var ci,pn,na,ra,ia,hd,mn,ve,be,we,_e,ui,li,Xn,fi,oa,sa,Qe,Qn;Qe=function(e,t){var i,o;return i=(e&65535)+(t&65535),o=(e>>16)+(t>>16)+(i>>16),o<<16|i&65535};na=function(e,t){return e<<t|e>>>32-t};mn=function(e,t,i,o,s,c){return Qe(na(Qe(Qe(t,e),Qe(o,c)),s),i)};ve=function(e,t,i,o,s,c,l){return mn(t&i|~t&o,e,t,s,c,l)};be=function(e,t,i,o,s,c,l){return mn(t&o|i&~o,e,t,s,c,l)};we=function(e,t,i,o,s,c,l){return mn(t^i^o,e,t,s,c,l)};_e=function(e,t,i,o,s,c,l){return mn(i^(t|~o),e,t,s,c,l)};pn=function(e,t){var i,o,s,c,l,h,d,m,g;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,l=void 0,h=void 0,d=void 0,m=void 0,g=void 0,i=1732584193,o=-271733879,s=-1732584194,c=271733878,l=0;l<e.length;)h=i,d=o,m=s,g=c,i=ve(i,o,s,c,e[l],7,-680876936),c=ve(c,i,o,s,e[l+1],12,-389564586),s=ve(s,c,i,o,e[l+2],17,606105819),o=ve(o,s,c,i,e[l+3],22,-1044525330),i=ve(i,o,s,c,e[l+4],7,-176418897),c=ve(c,i,o,s,e[l+5],12,1200080426),s=ve(s,c,i,o,e[l+6],17,-1473231341),o=ve(o,s,c,i,e[l+7],22,-45705983),i=ve(i,o,s,c,e[l+8],7,1770035416),c=ve(c,i,o,s,e[l+9],12,-1958414417),s=ve(s,c,i,o,e[l+10],17,-42063),o=ve(o,s,c,i,e[l+11],22,-1990404162),i=ve(i,o,s,c,e[l+12],7,1804603682),c=ve(c,i,o,s,e[l+13],12,-40341101),s=ve(s,c,i,o,e[l+14],17,-1502002290),o=ve(o,s,c,i,e[l+15],22,1236535329),i=be(i,o,s,c,e[l+1],5,-165796510),c=be(c,i,o,s,e[l+6],9,-1069501632),s=be(s,c,i,o,e[l+11],14,643717713),o=be(o,s,c,i,e[l],20,-373897302),i=be(i,o,s,c,e[l+5],5,-701558691),c=be(c,i,o,s,e[l+10],9,38016083),s=be(s,c,i,o,e[l+15],14,-660478335),o=be(o,s,c,i,e[l+4],20,-405537848),i=be(i,o,s,c,e[l+9],5,568446438),c=be(c,i,o,s,e[l+14],9,-1019803690),s=be(s,c,i,o,e[l+3],14,-187363961),o=be(o,s,c,i,e[l+8],20,1163531501),i=be(i,o,s,c,e[l+13],5,-1444681467),c=be(c,i,o,s,e[l+2],9,-51403784),s=be(s,c,i,o,e[l+7],14,1735328473),o=be(o,s,c,i,e[l+12],20,-1926607734),i=we(i,o,s,c,e[l+5],4,-378558),c=we(c,i,o,s,e[l+8],11,-2022574463),s=we(s,c,i,o,e[l+11],16,1839030562),o=we(o,s,c,i,e[l+14],23,-35309556),i=we(i,o,s,c,e[l+1],4,-1530992060),c=we(c,i,o,s,e[l+4],11,1272893353),s=we(s,c,i,o,e[l+7],16,-155497632),o=we(o,s,c,i,e[l+10],23,-1094730640),i=we(i,o,s,c,e[l+13],4,681279174),c=we(c,i,o,s,e[l],11,-358537222),s=we(s,c,i,o,e[l+3],16,-722521979),o=we(o,s,c,i,e[l+6],23,76029189),i=we(i,o,s,c,e[l+9],4,-640364487),c=we(c,i,o,s,e[l+12],11,-421815835),s=we(s,c,i,o,e[l+15],16,530742520),o=we(o,s,c,i,e[l+2],23,-995338651),i=_e(i,o,s,c,e[l],6,-198630844),c=_e(c,i,o,s,e[l+7],10,1126891415),s=_e(s,c,i,o,e[l+14],15,-1416354905),o=_e(o,s,c,i,e[l+5],21,-57434055),i=_e(i,o,s,c,e[l+12],6,1700485571),c=_e(c,i,o,s,e[l+3],10,-1894986606),s=_e(s,c,i,o,e[l+10],15,-1051523),o=_e(o,s,c,i,e[l+1],21,-2054922799),i=_e(i,o,s,c,e[l+8],6,1873313359),c=_e(c,i,o,s,e[l+15],10,-30611744),s=_e(s,c,i,o,e[l+6],15,-1560198380),o=_e(o,s,c,i,e[l+13],21,1309151649),i=_e(i,o,s,c,e[l+4],6,-145523070),c=_e(c,i,o,s,e[l+11],10,-1120210379),s=_e(s,c,i,o,e[l+2],15,718787259),o=_e(o,s,c,i,e[l+9],21,-343485551),i=Qe(i,h),o=Qe(o,d),s=Qe(s,m),c=Qe(c,g),l+=16;return[i,o,s,c]};ci=function(e){var t,i,o;for(t=void 0,o="",i=e.length*32,t=0;t<i;)o+=String.fromCharCode(e[t>>5]>>>t%32&255),t+=8;return o};Xn=function(e){var t,i,o;for(t=void 0,o=[],o[(e.length>>2)-1]=void 0,t=0;t<o.length;)o[t]=0,t+=1;for(i=e.length*8,t=0;t<i;)o[t>>5]|=(e.charCodeAt(t/8)&255)<<t%32,t+=8;return o};sa=function(e){return ci(pn(Xn(e),e.length*8))};oa=function(e,t){var i,o,s,c,l;for(s=void 0,i=Xn(e),c=[],l=[],o=void 0,c[15]=l[15]=void 0,i.length>16&&(i=pn(i,e.length*8)),s=0;s<16;)c[s]=i[s]^909522486,l[s]=i[s]^1549556828,s+=1;return o=pn(c.concat(Xn(t)),512+t.length*8),ci(pn(l.concat(o),640))};fi=function(e){var t,i,o,s;for(t="0123456789abcdef",o="",s=void 0,i=void 0,i=0;i<e.length;)s=e.charCodeAt(i),o+=t.charAt(s>>>4&15)+t.charAt(s&15),i+=1;return o};Qn=function(e){return unescape(encodeURIComponent(e))};li=function(e){return sa(Qn(e))};ia=function(e){return fi(li(e))};ui=function(e,t){return oa(Qn(e),Qn(t))};ra=function(e,t){return fi(ui(e,t))};var pd=hd=function(e,t,i){return t?i?ui(t,e):ra(t,e):i?li(e):ia(e)},di=pd;var gn=hn,aa=!1;var jt=(e,t)=>async(...i)=>{try{return await e(...i)}catch(o){gn.captureException(o),console.error(o),t&&t(o)}};function yn(e){aa&&gn.addBreadcrumb({message:e})}function ca(e,t){aa&&gn.captureMessage(e,t)}function Zn(){return/^win/i.test(navigator.platform)}function ua(){return/opr\/\d+\./i.test(navigator.appVersion)||chrome.runtime.id==="pbjmgmedeliohhbaefhlplndokcbmjio"}function la(){return/edg\/\d+\./i.test(navigator.appVersion)||chrome.runtime.id==="fcbmiimfkmkkkffjlopcpdlgclncnknm"}function Et(){return typeof browser<"u"&&typeof browser.runtime<"u"&&typeof browser.runtime.getBrowserInfo>"u"}function Ue(){return typeof browser<"u"&&typeof browser.runtime?.getBrowserInfo=="function"}function pi(){return ua()?"op":la()?"edge":Et()?"safari":Ue()?"fx":"ch"}function md(){var e=chrome.runtime.id;if(e==="legfpnnmhhnhjgekmmbkilmijnjoehne")return ua()?"opera":la()?"edge":"chrome";let t=["pbjmgmedeliohhbaefhlplndokcbmjio"],i=["fireshot@getfireshot.com","fireshot-pro@getfireshot.com","fireshot-beta@getfireshot.com","{0b457cAA-602d-484a-8fe7-c1d894a011ba}","{5e11ab1e-083c-11e5-a6c0-1697f925ec7b}"],o=["fcbmiimfkmkkkffjlopcpdlgclncnknm"];return t.indexOf(e)>-1?"opera":i.indexOf(e)>-1?"firefox":o.indexOf(e)>-1?"edge":"chrome"}var gd=md(),Ut={contractId:{chrome:"com.getfireshot.api",opera:"com.getfireshot.api",edge:"com.getfireshot.api",firefox:"com.getfireshot.api.firefox"},nativeFilePath:{chrome:"fireshot-chrome-plugin.dat",opera:"fireshot-chrome-plugin.dat",edge:"fireshot-chrome-plugin.dat",firefox:"fireshot-chrome-plugin.dat"}};for(hi in Ut)Ut[hi]=Ut[hi][gd];var hi;function yd(){chrome.scripting||(chrome.scripting={}),chrome.scripting.executeScript||(chrome.scripting.executeScript=function(e){return new Promise((t,i)=>{let o=e.target?.tabId,s=(e.target?.frameIds||[void 0])[0],c=e.target?.allFrames,l={};if(s!==void 0&&(l.frameId=s),c!==void 0&&(l.allFrames=c),!o){i(new Error("chrome.scripting.executeScript polyfill: Missing target.tabId"));return}if(e.files&&e.files.length>0){let h=[],d=m=>{if(m>=e.files.length){t(h);return}chrome.tabs.executeScript(o,{file:e.files[m],runAt:"document_start",...l},g=>{h.push(g),d(m+1)})};d(0);return}if(e.func){let h;e.args&&e.args.length>0?h=`(${e.func})(${e.args.map(d=>JSON.stringify(d)).join(",")});`:h=`(${e.func})();`,chrome.tabs.executeScript(o,{code:h}).then(t).catch(i);return}i(new Error("chrome.scripting.executeScript polyfill: No files or func provided"))})}),chrome.scripting.insertCSS||(chrome.scripting.insertCSS=function({target:e,files:t,css:i}){return new Promise((o,s)=>{if(!e||!e.tabId){s(new Error("chrome.scripting.insertCSS: target.tabId is required"));return}if(t&&t.length){let c=t.length;t.forEach(l=>{chrome.tabs.insertCSS(e.tabId,{file:l},()=>{chrome.runtime.lastError&&console.warn(chrome.runtime.lastError),--c===0&&o()})})}else i?chrome.tabs.insertCSS(e.tabId,{code:i},()=>{chrome.runtime.lastError&&console.warn(chrome.runtime.lastError),o()}):s(new Error("chrome.scripting.insertCSS: either files[] or css is required"))})})}function vd(){if(!chrome.alarms){let i=function(s){if(t.length){let c={name:s,scheduledTime:Date.now()};t.forEach(l=>l(c))}},e={},t=[],o={create(s,c={}){this.clear(s);let l=Date.now(),h,d;c.when?h=c.when-l:c.delayInMinutes&&(h=c.delayInMinutes*60*1e3),c.periodInMinutes&&(d=c.periodInMinutes*60*1e3),h<0&&(h=0);function m(){i(s),d&&(e[s].id=setTimeout(m,d))}let g=h>0?h:d;g>0?e[s]={id:setTimeout(m,g),period:d}:console.error("Error in setting alarm, none of delay or period specified")},clear(s,c=l=>{}){e[s]?(clearTimeout(e[s].id),delete e[s],c(!0)):c(!1)},clearAll(s=c=>{}){Object.keys(e).forEach(c=>clearTimeout(e[c].id));for(let c in e)delete e[c];s(!0)},get(s,c=l=>{}){e[s]?c({name:s,scheduledTime:Date.now()}):c(void 0)},getAll(s=c=>{}){let c=Object.keys(e).map(l=>({name:l,scheduledTime:Date.now()}));s(c)},onAlarm:{addListener(s){t.push(s)},removeListener(s){let c=t.indexOf(s);c>=0&&t.splice(c,1)}}};chrome.alarms=o}}function bd(){if(!chrome.action){let e={setBadgeBackgroundColor:t=>{browser.browserAction.setBadgeBackgroundColor(t)},setBadgeTextColor:(t,i)=>{Et()?i&&i():browser.browserAction.setBadgeTextColor(t).then(i)},setBadgeText:(t,i)=>{chrome.browserAction.setBadgeText(t,i)},setIcon:(t,i)=>{chrome.browserAction.setIcon(t,i)}};chrome.action=e}}Ue()&&(window.chrome=window.browser);yd();vd();bd();var mi="alarmUpdateToken",nr=360,vi=30,fa="b2s=",he=Object.freeze({success:0,networkError:1,rejectedByServer:2,invalidResponse:3,noValidExistingToken:4,tokenInactive:5});function da(e){for(let t in he)if(he[t]===e)return t;return"unknown status"}function ha(){return tr(JSON.stringify({UA:navigator.userAgent,rid:new Date().getTime(),hwid:Xe.getOption(U.Te,""),extver:chrome.runtime.getManifest().version}))}var gi=class{async Yt(){q("Checking token activation")();let t=ue(U.A),i=ue(U.u);t&&i&&await this.Ne(_i(t,i),i)}async te(t,i,o){await this.F();let s=await this.Fe(t,i,hn);if(s.result)return er("setToken",{data:await St()}),yi(),s;if(s?.code==="104"&&!o)try{let[,c]=s.message.match(/\[\d+\]\s*(.+)$/);return re(U.X,c),re(U.Q,i),await this.te(c,i,!0)}catch(c){return{result:!1,message:c.message}}else return{result:!1,message:s.message}}async Ne(t,i){return await this.Be(t,i)?await this.te(t,i):(q("Activation is not required")(),{result:!0})}#i=!1;async Le(t){if(this.#i){q("Token update already in progress.")();return}this.#i=!0,await jt(async()=>{await this.Ke(hn),er("setToken",{data:await St()}),yi(),t&&t(!0)})(),this.#i=!1}async B(){await chrome.alarms.create(mi,{periodInMinutes:vi})}async Jt(){await St()?await chrome.alarms.get(mi)||(q("Scheduling token update alarm")(),await this.B()):(q("No token found, not scheduling update timer")(),this.O())}async O(){q("Disabling token update timer")(),await chrome.alarms.clear(mi)}async F(){q("Removing token from the storage")(),await chrome.storage.local.set({[U.o]:""}),await this.O()}async ne(t,i,o){let s=d=>d.user&&d.serial?`${tr(d.user)}/${tr(d.serial)}`:d.sid?d.sid:null,c=async d=>{let m;try{m=await fetch(d,{signal:AbortSignal.timeout(1e4),credentials:"include",method:"get",headers:{"X-FS-DATA":ha()}})}catch(v){return v.message||"Network error occurred while fetching the response"}if(!m.ok)return`Network error: ${m.status} ${m.statusText}`;let g;try{g=await m.json(),q("Received response: "+JSON.stringify(g))()}catch{return"Invalid response from server"}return g},h=await(async()=>{le||(i=void 0),le||(o=void 0);let d=i||await wi(),m=o||chrome.runtime.id,g=s(t);if(!g)return"Invalid credentials";let v=`${bi}/activate/${g}/${d}/${btoa(m)}`,_=await c(v);if(typeof _!="object"||!_.status)return JSON.stringify(_);if(btoa(_.status)===fa){let b=await new xt(_.payload).re();return b===null&&(await chrome.storage.local.set({[U.o]:_.payload}),await this.B()),b}return _.message||"Unknown error"})();return h?{result:!1,code:(/\[(\d+)\]/.exec(h)||[])[1],message:h}:{result:!0}}async $e(){let t=async c=>{let l=!1;switch(c){case he.noValidExistingToken:await this.F();break;case he.networkError:l=!0;break;case he.invalidResponse:l=!0;break;case he.success:l=!0;break;case he.tokenInactive:await this.O();break;case he.rejectedByServer:await this.F();break}l&&await this.B()},i=async c=>{let l;try{if(l=await fetch(c,{signal:AbortSignal.timeout(1e4),method:"get",headers:{"X-FS-DATA":ha()}}),!l.ok)return he.networkError;let h=await l.json();return q("Received response from server: "+JSON.stringify(h))(),h}catch(h){return q("Network error while fetching update: "+h)(),he.networkError}},s=await(async()=>{let c=await St();if(!c)return he.noValidExistingToken;let l,h=!1;try{l=await Ze(c),h=l.a()}catch(g){return q("Error while parsing old token: "+g)(),he.noValidExistingToken}if(!le&&!h)return he.tokenInactive;let d=await i(await l.je());if(typeof d=="number")return d;if(typeof d!="object"||!d.status)return he.invalidResponse;if(btoa(d.status)===fa){q("Received token")();let v=await(await new xt(d.payload)).re();return v!==null?(q("Error while parsing new token: "+v)(),he.invalidResponse):(await chrome.storage.local.set({[U.o]:d.payload}),he.success)}else return he.rejectedByServer})();return q("update status: "+da(s))(),await t(s),s}async Ue(t){try{let o=(await Ze(t)).ie();await fetch(`https://auth.getfireshot.com/deactivate/${o.sid}/${o.guid}/${btoa(o.eid)}`),await this.O(),q("Token successfully deactivated")()}catch{}}async Be(t,i){if(!t||!i)return!0;let o=await Ze();if(o){let s,c;try{s=o.ie(),c=o.a()}catch{return!0}if(c){if(s&&s.user===t&&s.serial===i)return!1}else return!0}return!0}async Fe(t,i,o){let s=await this.ne({user:t,serial:i});if(s.result)return s;{let c=s.code,l=s.message;return q(`Failed to activate token with user '${t}' and serial '${i}'. Code: ${c}, Message: ${l}`)(),s}}async Ke(t){let i=await this.$e();return i!==he.success?(i!==he.networkError&&t?.captureException(`Failed to update token [${da(i)}]`),!1):!0}async Xt(){let t=await Ze();t&&(t.He()?(q(`Time since last token update: ${Math.round((new Date-new Date(t.E().c+"Z"))/1e3/6)/10} minutes.`)(),await this.Le()):q(`Token (${t.We()} old) does not need update at this time (update period is ${nr} minutes).`)())}async Qt(t){let i;try{i=await new xt(t).P(!0)}catch{return}if(i&&i.a()&&i.L()&&i.oe()&&!i.D()){q("Found previous token, restoring...")();let o=i.se();(await this.ne({sid:o})).result&&(er("setToken",{data:await St()}),q("... successfully restored."))}}};var zp=new gi;var pa=Object.freeze({active:"YWN0aXZl",past_due:"cGFzdF9kdWU=",canceled:"canceY2FuY2VsZWQled"}),bi="https://auth.getfireshot.com",xt=class{#i="";#e=null;constructor(t){this.#i=t}async#a(t){async function i(_){let k="object",b=typeof x,E=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(k)),S=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(b)),I=await crypto.subtle.importKey("raw",E,"AES-CBC",!1,["decrypt"]),A=await crypto.subtle.decrypt({name:"AES-CBC",iv:new Uint8Array(S).subarray(0,16)},I,_);return I=null,new TextDecoder("utf-8").decode(A)}function o(_){return Uint8Array.from(atob(_),k=>k.charCodeAt(0))}function s(_){return Uint8Array.from(_,k=>k.charCodeAt(0))}async function c(_,k){let E=o(`
                MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAv7UA7s/pYDrVCY4kunni                DnmdnwgAxBpfqCOEFQZMGHh6G+/FsDbuyyQntq21W5Qi42P3UrPBJqnZ7wfhVsvj                TT9Kuty1r2mn3BD7zz2owamqtGX0s7JiQ4sdjDcVYwxTXbeq5rvX2Fh4PRQfGCIU                HWK8A4/rJDOwy0PseSnB+MsRh+XorlgMNm6VYpMkW6I2fERH96N97K9rS8HkEdLO                Y6mKYy5m41y1xttGhFxHRJkfbMlK0dqvkOI7RT0dRltnnb1x96HSabUok+A7+2fu                G3Pzb0lbVKKDuRsBIk2VExvMAW49JLy9Qi3y3iOgQQ/fmeLcv5JWe6YQQ3kyZP2O                iY01PF3V3UxH0yI5c6+13VENabHmfE1GAGSRikdZc7w5P3iuTJ+KxPLnrOFm1swl                ga23qG4rnZ1+b768dAUhWA1JRcpEaW4NKigb6x0vveaI09eTdNXHgnYtmMUx7Ubg                xeIdVtWXoJdrJ6tKMTrbaSUmJAur5lFhhdHd2RmJuT8SIIzWyGNroP5KxB+uOaPz                cltBajATKRSzwgSB6HP1rKADTRrNgVZQhIQJqJg2GoQQ0R5ijKdIOm95eraKnEeC                OvTlhVV+NHwo/QsoSBlMmpnFAS+S9AwiqH46xM0We1w9nlpEdb3ZcCVqm1NIK0Ta                3SbTHMwiWFh52R0DpU+AxiECAwEAAQ==`.replace(/\s/g,"")),S={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}},I=await crypto.subtle.importKey("spki",E,S,!0,["verify"]);return await crypto.subtle.verify("RSASSA-PKCS1-v1_5",I,k,_)}let l=o(this.#i),h;try{h=await i(l)}catch(_){throw"Invalid token format: "+_}let d=JSON.parse(h);if(!d||!d.data||!d.signature)throw"Token misses data or signature";let m;try{m=await c(s(d.data),o(d.signature))}catch(_){throw"Error while checking signature: "+_}if(!m)throw"Signature is wrong";let g=JSON.parse(d.data),v=await wi();if(!t&&g.guid!==v)throw"This token belongs to another extension guid.";if(!t&&g.eid!==chrome.runtime.id)throw"This token belongs to another extension.";return g}async P(t){try{return this.#e=await this.#a(t),this}catch{return null}}je(){return`${bi}/update/${this.#e.sid}/${this.#e.guid}/${btoa(this.#e.eid)}`}Ve(){return this.#e.status}Zt(){return this.#e.owner}en(){return this.#e.plan}L(){return typeof this.#e.enabled<"u"?this.#e.enabled:!0}We(){let t=(new Date-new Date(this.E().c+"Z"))/1e3/60/60;return`${Math.floor(t)}h:${Math.floor((t-Math.floor(t))*60)}m`}He(){return this.D()?!0:new Date-new Date(this.E().c+"Z")>nr*60*1e3}ae(){let t=new Date-new Date(this.E().c+"Z");return t>(nr+vi*4)*60*1e3?(q(`Token update expired: ${Math.round(t/1e3/60/6)/10} hours ago`)(),!0):!1}D(){let t=new Date-new Date(this.E().e+"Z");return t>0?(q(`Subscription expired: ${Math.round(t/1e3/60/6)/10} hours ago`)(),!0):!1}ce(){return this.L()&&(!this.a()||this.D()&&this.ae())}tn(){return this.#e.cap||1}oe(){return this.se().substring(0,4)==="sub_"}se(){return this.#e.sid}a(){let t=this.Ve();if(!t)return!1;let i=btoa(t);return i===pa.active||i===pa.past_due}ie(){return this.#e}E(){return{c:this.#e.c,s:this.#e.s,e:this.#e.e}}async re(){try{return await this.#a(),null}catch(t){return t}}};async function wi(){return(await chrome.storage.local.get(U.v))[U.v]||""}async function St(){return(await chrome.storage.local.get(U.o))[U.o]}async function Ze(e){try{return await new xt(e||await St()).P()}catch{return null}}var vn=chrome.runtime.id,le=chrome.runtime.getManifest()?.version_name==="debug"||["legfpnnmhhnhjgekmmbkilmijnjoehne","fireshot-beta@getfireshot.com","kmmldmlijnljnnhagfldmihaimmholga"].indexOf(vn)>-1;chrome.storage.local.get([U.G]).then(e=>le=le||e[U.G]);var wd=console.log.bind(console);q("Extension ID: "+vn)();function _d(){return ue(U.J)==="true"||ue(U.J)==="1"}function Ed(){return self.constructor.name==="ServiceWorkerGlobalScope"}function Sd(){let e=ue(U.b,"false")==="true";return Ed()&&e&&!wn.port?(re(U.b,"false"),!1):e}function rr(){return _d()?!1:Sd()}function st(){let e=chrome.runtime.getManifest();return{extVersion:e.version.split(".",3).join("."),extVersionFull:e.version.split(".",4).join("."),fSilentMode:vn=="legfpnnmhhnhjgekmmbkilmijnjoehne"}}function ma(e){q("openURLV2")();let i=(o,s=0)=>{s>0&&q(`trial ${s}`)();let c=()=>{++s<10?setTimeout(()=>i(o,s),150):chrome.windows.create({url:e}).catch(l=>reportError(l))};try{chrome.tabs.create(o).catch(()=>c())}catch{c()}};i({url:e})}function bn(e,t){if(q("openURL")(),!t)return chrome.tabs.create({url:e});chrome.tabs.create({url:e},i=>{let o=(s,c)=>{if(s===i.id)switch(c.status){case"complete":chrome.tabs.onUpdated.removeListener(o),t(i);break}};chrome.tabs.onUpdated.addListener(o),setTimeout(()=>chrome.tabs.onUpdated.removeListener(o),1e4)})}function ir(){return(...e)=>{if(e.length!==0)if(le&&console.log.bind(console,...e)(),e.length>1)yn(JSON.stringify(e).substring(0,512));else{let t=typeof e[0]=="string"?e[0]:JSON.stringify(e);yn(t.substring(0,512))}}}function q(...e){let t=()=>{};if(e.length===0)return t;if(e.length>1)yn(JSON.stringify(e).substring(0,512));else{let i=typeof e[0]=="string"?e[0]:JSON.stringify(e);yn(i.substring(0,512))}return le?wd.bind(console,...e):t}function at(e){le&&console.time(e)}function ct(e){le&&console.timeEnd(e)}function It(e){console.error("FireShot: "+e)}function ga(){let e=document.createNodeIterator(document.documentElement,NodeFilter.SHOW_ELEMENT,null),t;for(;t=e.nextNode();)[{i18Attr:"data-i18n",originalAttr:"innerText"},{i18Attr:"data-title-i18n",originalAttr:"title"}].forEach(o=>{let s;if(s=t.getAttribute(o.i18Attr)){let c=chrome.i18n.getMessage(s);c?t[o.originalAttr]=c:t[o.originalAttr]=(le?"#":"")+t[o.originalAttr],le||t.removeAttribute(o.i18Attr)}})}function ya(){return rr()?ue(U.t)=="true":(!Zn()||ue(U._)==="true")&&ue(U.t)=="true"}async function yi(){let e=()=>{if(new Date>new Date(2026,1,15)&&!rr()){let t,i=ue(U.A,""),o=ue(U.u,"");i!==""&&o!==""&&(i=_i(i,o),t=xd(i,o)),re(U.t,t?"true":""),re(U.i,t?"true":"")}};try{let t=await Ze();if(t.L())if(re(U._,"true"),t.oe()){let i=t.a(),o=t.D(),s=t.ae();q(`Token is active: ${i}, expired: ${o}, update expired: ${s}, blocked: ${o&&s}`)();let l=!t.ce();re(U.t,l.toString()),re(U.i,l.toString())}else re(U.t,t.a().toString()),re(U.i,t.a().toString());else e()}catch{ue(U._)==="true"?(re(U._,""),re(U.t,""),re(U.i,""),re(U.A,""),re(U.u,"")):e()}}function va(e){let t=e.match(/,(.{100})/);if(t&&t.length>0){let i=Uint8Array.from(atob(t[1]),o=>o.charCodeAt(0));return{w:i[18]<<8|i[19],h:i[22]<<8|i[23]}}else return{w:0,h:0}}function _i(e,t){let i=ue(U.Q,""),o=ue(U.X,"");return i&&o&&i===t&&(e=o),e}function tr(e){return btoa(String.fromCharCode(...new TextEncoder().encode(e)))}function xd(e,t){let i=d=>{for(var m="",g=0;g<d.length;g++){var v=d[g].toString(16);v.length<2&&(v="0"+v),m+=v}return m},o=d=>{if(!d||d.length<1)return new Uint8Array(0);let m=[],g=d.length,v="0123456789abcdefghijklmnopqrstuvwxyz";d[0]!=="2"&&(v="23456789abcdefghjklmnpqrstuvwxyz");let _=[];for(let C=0;C<g;C++){let P=d[C].toLowerCase();for(let O=0;O<v.length;O++)if(v[O]===P){_[C]=O;break}}let k=0,b,E,S=0,I=0;for(;S<g;){b=0;let C=0;for(;b<8&&S<g;){let P=_[S];E=Math.min(5-k,8-b),k<=b?P=P<<b:P=P>>k,C=C|P,b+=E,k+=E,k>=5&&(S++,k=0)}m[I++]=C}let A=Math.floor(g*5/8);return new Uint8Array(m.slice(0,A))},s=(d,m,g,v)=>{let _=m.length;if(v===1)for(let k=0;k<g;k++){let b=k%_;d[k]=d[k]^m.charCodeAt(b)}else if(v===2){let k=0,b=0;for(let E=0;E<Math.max(g,_);E++)d[k]=d[k]^m.charCodeAt(b),k++,b++,k===g&&(k=0),b===_&&(b=0)}return d};t=t.replace(/-/g,"");let c=o(t),l=c[0]&15,h=!1;if(l===2){if((c[0]&240)>>5===1){let m=s(c.slice(1),e,c.length-1,2),g=i(m.slice(0,5));h=g===i([0,26,26,51,84])||g===i([5,27,26,57,74])}}else if(l===4&&(c[0]&240)>>5===1){let m="FS";for(let b=13;b>=10;--b)m+=i(c.slice(b,b+1));m=m.toUpperCase();let g=di(m),v=s(c.slice(1),g,c.length-1,2),_=s(v,e,v.length,2);h=i(_.slice(0,5))===i([0,26,26,51,84])}return h}var Id=0,kd=1,wn={port:void 0,ready:!1,autoReconnect:!1,updating:!1,updated:!1,ignoreResponse:!1,portBusy:!1,callback:void 0,callbackDisconnected:void 0,prevVersion:void 0,updateTrials:0,pendingData:"",firstPacket:!0,onNativeHostUpdated:null,onPluginEvent:null,init:function(e,t,i,o){this.onNativeHostUpdated=t,this.onPluginEvent=e;let s=c=>{if(this.ignoreResponse){q("Ignored response: "+JSON.stringify(c))(),c.topic==="status"&&c.code==kd&&(this.updating=!1,this.autoReconnect=!1,e&&e(c));return}this.autoReconnect=!1,!this.processInternally(c)&&e&&e(c)};this.callback=i,this.callbackDisconnected=o,this.ignoreResponse=!1,this.portBusy=!0;try{this.port=chrome.runtime.connectNative(Ut.contractId+"")}catch(c){It(c.message),this.portBusy=!1}this.port.onMessage.addListener(c=>{if(c.data!=="")this.pendingData+=c.data;else try{let l=JSON.parse(this.pendingData);le&&q("Original Packet: "+this.pendingData.substring(0,1024))(),this.pendingData="",s(l)}catch(l){q("Raw packet data triggered error:",this.pendingData.substring(0,1024))(),gn.captureException(l),this.pendingData="",It(l.message)}}),this.port.onDisconnect.addListener(()=>{chrome.runtime.lastError&&console.log("ERROR: "+chrome.runtime.lastError.message),this.ready=!1,this.portBusy=!1,re(U.b,"false"),!this.updating&&this.callbackDisconnected&&this.callbackDisconnected(),q("Native port disconnected.")(),this.firstPacket=!0,this.pendingData="",this.autoReconnect&&this.doReconnect()}),q("Native port created successfully. Starting test...")(),this.launchJSON({JSONCommand:"ping",version:st().extVersionFull,id:vn})},processInternally:function(e){if(e.topic=="hostVersion"){if(this.hostVersion=e.data,st().extVersion!=this.hostVersion)return++this.updateTrials>3?(q("Too much of unsuccessful update trials. No updates anymore.")(),this.updating=!1,!1):(this.prevVersion=this.hostVersion,this.doUpdate(),!0)}else if(e.topic=="status")if(e.code==Id){var t=e.data;return this.updateTrials=0,this.ready=!0,re(U.b,"true"),this.callback&&(this.callback(),this.callback=void 0),this.updating&&(this.updated=!0,this.updating=!1,this.prevVersion!="0"&&this.onNativeHostUpdated(t)),!1}else return this.updating&&(this.updating=!1),!1;else if(e.topic=="getDLL")return this.sendDLL(e.x64),!0;return!1},launchJSON:function(e){this.port.postMessage(e)},getFile:function(e,t){let i=()=>{let o=!0;if(e.search(/sss-x64\.dat|sss\.dat|fireshot-chrome-plugin\.dat/)!==-1){let s=st().extVersionFull,c=U.Ee+s,l=parseInt(Xe.getOption(c,"0"));l<3?(q("Opening helper installer page.")(),o=!1,Xe.setOption(c,l+1),ma("https://getfireshot.com/helper-install.php?ver="+s)):q("Helper installer page cannot be shown more than 3 times, aborting.")()}return o};q("Fetching: "+e)(),fetch(chrome.runtime.getURL(e)).then(o=>{q(`Fetching status = [${o.status}]`)(),o.ok?o.blob().then(s=>{q(`Blob size is ${s.size} bytes`)();let c=new FileReader;c.onload=l=>{q("Fetching complete")();let h="base64,";t(l.target.result.substr(l.target.result.indexOf(h)+h.length,l.target.result.length))},c.onerror=()=>{q("Error in FileReader")()},c.readAsDataURL(s)}).catch(s=>{i()&&reportError(s)}):(q("NativeError-Error retrieving file")(),ca(`Error retrieving file: ${o.status}`))}).catch(o=>{i()&&reportError(o)})},sendDLL:function(e){this.getFile(`native/${e?"sss-x64.dat":"sss.dat"}`,t=>{t&&this.launchJSON({JSONCommand:"updateDLL",version:st().extVersionFull,data:t})})},doUpdate:function(){let e=st().extVersionFull;q("Updating native to the version: "+e)(),this.ignoreResponse=!0,this.getFile("native/"+Ut.nativeFilePath,t=>{this.updating=!0,this.autoReconnect=!0,this.launchJSON({JSONCommand:"updateNative",version:e,data:t})})},doReconnect:function(){setTimeout(()=>{q("Trying to reconnect...")(),this.init(this.onPluginEvent,this.onNativeHostUpdated,this.callback,this.callbackDisconnected)},1e3)},forceDisconnect:function(){this.autoReconnect=!1,this.port&&this.port.disconnect(),this.ready=!1,re(U.b,"false")}};var Pi=function(e,t){return Pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},Pi(e,t)};function Td(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pi(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var J=function(){return J=Object.assign||function(t){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c])}return t},J.apply(this,arguments)};function vr(e,t,i){if(i||arguments.length===2)for(var o=0,s=t.length,c;o<s;o++)(c||!(o in t))&&(c||(c=Array.prototype.slice.call(t,0,o)),c[o]=t[o]);return e.concat(c||Array.prototype.slice.call(t))}var Ee=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ge=Object.keys,ce=Array.isArray;typeof Promise<"u"&&!Ee.Promise&&(Ee.Promise=Promise);function Fe(e,t){return typeof t!="object"||ge(t).forEach(function(i){e[i]=t[i]}),e}var qt=Object.getPrototypeOf,Ad={}.hasOwnProperty;function Re(e,t){return Ad.call(e,t)}function Yt(e,t){typeof t=="function"&&(t=t(qt(e))),(typeof Reflect>"u"?ge:Reflect.ownKeys)(t).forEach(function(i){ht(e,i,t[i])})}var Fa=Object.defineProperty;function ht(e,t,i,o){Fa(e,t,Fe(i&&Re(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function Xt(e){return{from:function(t){return e.prototype=Object.create(t.prototype),ht(e.prototype,"constructor",e),{extend:Yt.bind(null,e.prototype)}}}}var Cd=Object.getOwnPropertyDescriptor;function Ba(e,t){var i=Cd(e,t),o;return i||(o=qt(e))&&Ba(o,t)}var Od=[].slice;function Or(e,t,i){return Od.call(e,t,i)}function La(e,t){return t(e)}function _n(e){if(!e)throw new Error("Assertion Failed")}function Ka(e){Ee.setImmediate?setImmediate(e):setTimeout(e,0)}function Pd(e,t){return e.reduce(function(i,o,s){var c=t(o,s);return c&&(i[c[0]]=c[1]),i},{})}function nt(e,t){if(typeof t=="string"&&Re(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var i=[],o=0,s=t.length;o<s;++o){var c=nt(e,t[o]);i.push(c)}return i}var l=t.indexOf(".");if(l!==-1){var h=e[t.substr(0,l)];return h==null?void 0:nt(h,t.substr(l+1))}}function De(e,t,i){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){_n(typeof i!="string"&&"length"in i);for(var o=0,s=t.length;o<s;++o)De(e,t[o],i[o])}else{var c=t.indexOf(".");if(c!==-1){var l=t.substr(0,c),h=t.substr(c+1);if(h==="")i===void 0?ce(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=i;else{var d=e[l];(!d||!Re(e,l))&&(d=e[l]={}),De(d,h,i)}}else i===void 0?ce(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=i}}function Dd(e,t){typeof t=="string"?De(e,t,void 0):"length"in t&&[].map.call(t,function(i){De(e,i,void 0)})}function $a(e){var t={};for(var i in e)Re(e,i)&&(t[i]=e[i]);return t}var Rd=[].concat;function ja(e){return Rd.apply([],e)}var Md="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ja([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return Ee[e]}),Ua=new Set(Md.map(function(e){return Ee[e]}));function Ha(e){var t={};for(var i in e)if(Re(e,i)){var o=e[i];t[i]=!o||typeof o!="object"||Ua.has(o.constructor)?o:Ha(o)}return t}function Nd(e){for(var t in e)if(Re(e,t))return!1;return!0}var Sn=null;function Rt(e){Sn=new WeakMap;var t=Di(e);return Sn=null,t}function Di(e){if(!e||typeof e!="object")return e;var t=Sn.get(e);if(t)return t;if(ce(e)){t=[],Sn.set(e,t);for(var i=0,o=e.length;i<o;++i)t.push(Di(e[i]))}else if(Ua.has(e.constructor))t=e;else{var s=qt(e);t=s===Object.prototype?{}:Object.create(s),Sn.set(e,t);for(var c in e)Re(e,c)&&(t[c]=Di(e[c]))}return t}var Fd={}.toString;function Ri(e){return Fd.call(e).slice(8,-1)}var Mi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Bd=typeof Mi=="symbol"?function(e){var t;return e!=null&&(t=e[Mi])&&t.apply(e)}:function(){return null};function kt(e,t){var i=e.indexOf(t);return i>=0&&e.splice(i,1),i>=0}var Vt={};function tt(e){var t,i,o,s;if(arguments.length===1){if(ce(e))return e.slice();if(this===Vt&&typeof e=="string")return[e];if(s=Bd(e)){for(i=[];o=s.next(),!o.done;)i.push(o.value);return i}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(i=new Array(t);t--;)i[t]=e[t];return i}return[e]}for(t=arguments.length,i=new Array(t);t--;)i[t]=arguments[t];return i}var qi=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ld=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Wa=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Yi=Ld.concat(Wa),Kd={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Qt(e,t){this.name=e,this.message=t}Xt(Qt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Va(e,t){return e+". Errors: "+Object.keys(t).map(function(i){return t[i].toString()}).filter(function(i,o,s){return s.indexOf(i)===o}).join(`
`)}function br(e,t,i,o){this.failures=t,this.failedKeys=o,this.successCount=i,this.message=Va(e,t)}Xt(br).from(Qt);function zt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(i){return t[i]}),this.failuresByPos=t,this.message=Va(e,this.failures)}Xt(zt).from(Qt);var Ji=Yi.reduce(function(e,t){return e[t]=t+"Error",e},{}),$d=Qt,G=Yi.reduce(function(e,t){var i=t+"Error";function o(s,c){this.name=i,s?typeof s=="string"?(this.message="".concat(s).concat(c?`
 `+c:""),this.inner=c||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=Kd[t]||i,this.inner=null)}return Xt(o).from($d),e[t]=o,e},{});G.Syntax=SyntaxError;G.Type=TypeError;G.Range=RangeError;var ba=Wa.reduce(function(e,t){return e[t+"Error"]=G[t],e},{});function jd(e,t){if(!e||e instanceof Qt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ba[e.name])return e;var i=new ba[e.name](t||e.message,e);return"stack"in e&&ht(i,"stack",{get:function(){return this.inner.stack}}),i}var Pr=Yi.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=G[t]),e},{});Pr.ModifyError=br;Pr.DexieError=Qt;Pr.BulkError=zt;function ie(){}function On(e){return e}function Ud(e,t){return e==null||e===On?t:function(i){return t(e(i))}}function Mt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Hd(e,t){return e===ie?t:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Mt(o,this.onsuccess):o),s&&(this.onerror=this.onerror?Mt(s,this.onerror):s),c!==void 0?c:i}}function Wd(e,t){return e===ie?t:function(){e.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Mt(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Mt(o,this.onerror):o)}}function Vd(e,t){return e===ie?t:function(i){var o=e.apply(this,arguments);Fe(i,o);var s=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Mt(s,this.onsuccess):s),c&&(this.onerror=this.onerror?Mt(c,this.onerror):c),o===void 0?l===void 0?void 0:l:Fe(o,l)}}function zd(e,t){return e===ie?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Xi(e,t){return e===ie?t:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,s=arguments.length,c=new Array(s);s--;)c[s]=arguments[s];return i.then(function(){return t.apply(o,c)})}return t.apply(this,arguments)}}var ze=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function za(e,t){ze=e}var In={},Ga=100,Qi=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,qt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,qt(t),e]})(),wa=Qi[0],_a=Qi[1],Gd=Qi[2],qd=_a&&_a.then,Tt=wa&&wa.constructor,Zi=!!Gd;function Yd(){queueMicrotask(Xd)}var kn=function(e,t){En.push([e,t]),wr&&(Yd(),wr=!1)},Ni=!0,wr=!0,Ot=[],fr=[],Fi=On,dt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ie,pgp:!1,env:{},finalize:ie},W=dt,En=[],Pt=0,dr=[];function B(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=W;if(typeof e!="function"){if(e!==In)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Li(this,this._value);return}this._state=null,this._value=null,++t.ref,Ya(this,e)}var Bi={get:function(){var e=W,t=_r;function i(o,s){var c=this,l=!e.global&&(e!==W||t!==_r),h=l&&!mt(),d=new B(function(m,g){eo(c,new qa(Ea(o,e,l,h),Ea(s,e,l,h),m,g,e))});return this._consoleTask&&(d._consoleTask=this._consoleTask),d}return i.prototype=In,i},set:function(e){ht(this,"then",e&&e.prototype===In?Bi:{get:function(){return e},set:Bi.set})}};Yt(B.prototype,{then:Bi,_then:function(e,t){eo(this,new qa(null,null,e,t,W))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],i=arguments[1];return typeof t=="function"?this.then(null,function(o){return o instanceof t?i(o):hr(o)}):this.then(null,function(o){return o&&o.name===t?i(o):hr(o)})},finally:function(e){return this.then(function(t){return B.resolve(e()).then(function(){return t})},function(t){return B.resolve(e()).then(function(){return hr(t)})})},timeout:function(e,t){var i=this;return e<1/0?new B(function(o,s){var c=setTimeout(function(){return s(new G.Timeout(t))},e);i.then(o,s).finally(clearTimeout.bind(null,c))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&ht(B.prototype,Symbol.toStringTag,"Dexie.Promise");dt.env=Xa();function qa(e,t,i,o,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=i,this.reject=o,this.psd=s}Yt(B,{all:function(){var e=tt.apply(null,arguments).map(Er);return new B(function(t,i){e.length===0&&t([]);var o=e.length;e.forEach(function(s,c){return B.resolve(s).then(function(l){e[c]=l,--o||t(e)},i)})})},resolve:function(e){if(e instanceof B)return e;if(e&&typeof e.then=="function")return new B(function(i,o){e.then(i,o)});var t=new B(In,!0,e);return t},reject:hr,race:function(){var e=tt.apply(null,arguments).map(Er);return new B(function(t,i){e.map(function(o){return B.resolve(o).then(t,i)})})},PSD:{get:function(){return W},set:function(e){return W=e}},totalEchoes:{get:function(){return _r}},newPSD:pt,usePSD:Nt,scheduler:{get:function(){return kn},set:function(e){kn=e}},rejectionMapper:{get:function(){return Fi},set:function(e){Fi=e}},follow:function(e,t){return new B(function(i,o){return pt(function(s,c){var l=W;l.unhandleds=[],l.onunhandled=c,l.finalize=Mt(function(){var h=this;Qd(function(){h.unhandleds.length===0?s():c(h.unhandleds[0])})},l.finalize),e()},t,i,o)})}});Tt&&(Tt.allSettled&&ht(B,"allSettled",function(){var e=tt.apply(null,arguments).map(Er);return new B(function(t){e.length===0&&t([]);var i=e.length,o=new Array(i);e.forEach(function(s,c){return B.resolve(s).then(function(l){return o[c]={status:"fulfilled",value:l}},function(l){return o[c]={status:"rejected",reason:l}}).then(function(){return--i||t(o)})})})}),Tt.any&&typeof AggregateError<"u"&&ht(B,"any",function(){var e=tt.apply(null,arguments).map(Er);return new B(function(t,i){e.length===0&&i(new AggregateError([]));var o=e.length,s=new Array(o);e.forEach(function(c,l){return B.resolve(c).then(function(h){return t(h)},function(h){s[l]=h,--o||i(new AggregateError(s))})})})}),Tt.withResolvers&&(B.withResolvers=Tt.withResolvers));function Ya(e,t){try{t(function(i){if(e._state===null){if(i===e)throw new TypeError("A promise cannot be resolved with itself.");var o=e._lib&&Zt();i&&typeof i.then=="function"?Ya(e,function(s,c){i instanceof B?i._then(s,c):i.then(s,c)}):(e._state=!0,e._value=i,Ja(e)),o&&en()}},Li.bind(null,e))}catch(i){Li(e,i)}}function Li(e,t){if(fr.push(t),e._state===null){var i=e._lib&&Zt();t=Fi(t),e._state=!1,e._value=t,Zd(e),Ja(e),i&&en()}}function Ja(e){var t=e._listeners;e._listeners=[];for(var i=0,o=t.length;i<o;++i)eo(e,t[i]);var s=e._PSD;--s.ref||s.finalize(),Pt===0&&(++Pt,kn(function(){--Pt===0&&to()},[]))}function eo(e,t){if(e._state===null){e._listeners.push(t);return}var i=e._state?t.onFulfilled:t.onRejected;if(i===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Pt,kn(Jd,[i,e,t])}function Jd(e,t,i){try{var o,s=t._value;!t._state&&fr.length&&(fr=[]),o=ze&&t._consoleTask?t._consoleTask.run(function(){return e(s)}):e(s),!t._state&&fr.indexOf(s)===-1&&eh(t),i.resolve(o)}catch(c){i.reject(c)}finally{--Pt===0&&to(),--i.psd.ref||i.psd.finalize()}}function Xd(){Nt(dt,function(){Zt()&&en()})}function Zt(){var e=Ni;return Ni=!1,wr=!1,e}function en(){var e,t,i;do for(;En.length>0;)for(e=En,En=[],i=e.length,t=0;t<i;++t){var o=e[t];o[0].apply(null,o[1])}while(En.length>0);Ni=!0,wr=!0}function to(){var e=Ot;Ot=[],e.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var t=dr.slice(0),i=t.length;i;)t[--i]()}function Qd(e){function t(){e(),dr.splice(dr.indexOf(t),1)}dr.push(t),++Pt,kn(function(){--Pt===0&&to()},[])}function Zd(e){Ot.some(function(t){return t._value===e._value})||Ot.push(e)}function eh(e){for(var t=Ot.length;t;)if(Ot[--t]._value===e._value){Ot.splice(t,1);return}}function hr(e){return new B(In,!1,e)}function ae(e,t){var i=W;return function(){var o=Zt(),s=W;try{return gt(i,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{gt(s,!1),o&&en()}}}var me={awaits:0,echoes:0,id:0},th=0,pr=[],mr=0,_r=0,nh=0;function pt(e,t,i,o){var s=W,c=Object.create(s);c.parent=s,c.ref=0,c.global=!1,c.id=++nh,dt.env,c.env=Zi?{Promise:B,PromiseProp:{value:B,configurable:!0,writable:!0},all:B.all,race:B.race,allSettled:B.allSettled,any:B.any,resolve:B.resolve,reject:B.reject}:{},t&&Fe(c,t),++s.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Nt(c,e,i,o);return c.ref===0&&c.finalize(),l}function tn(){return me.id||(me.id=++th),++me.awaits,me.echoes+=Ga,me.id}function mt(){return me.awaits?(--me.awaits===0&&(me.id=0),me.echoes=me.awaits*Ga,!0):!1}(""+qd).indexOf("[native code]")===-1&&(tn=mt=ie);function Er(e){return me.echoes&&e&&e.constructor===Tt?(tn(),e.then(function(t){return mt(),t},function(t){return mt(),fe(t)})):e}function rh(e){++_r,(!me.echoes||--me.echoes===0)&&(me.echoes=me.awaits=me.id=0),pr.push(W),gt(e,!0)}function ih(){var e=pr[pr.length-1];pr.pop(),gt(e,!1)}function gt(e,t){var i=W;if((t?me.echoes&&(!mr++||e!==W):mr&&(!--mr||e!==W))&&queueMicrotask(t?rh.bind(null,e):ih),e!==W&&(W=e,i===dt&&(dt.env=Xa()),Zi)){var o=dt.env.Promise,s=e.env;(i.global||e.global)&&(Object.defineProperty(Ee,"Promise",s.PromiseProp),o.all=s.all,o.race=s.race,o.resolve=s.resolve,o.reject=s.reject,s.allSettled&&(o.allSettled=s.allSettled),s.any&&(o.any=s.any))}}function Xa(){var e=Ee.Promise;return Zi?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Ee,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Nt(e,t,i,o,s){var c=W;try{return gt(e,!0),t(i,o,s)}finally{gt(c,!1)}}function Ea(e,t,i,o){return typeof e!="function"?e:function(){var s=W;i&&tn(),gt(t,!0);try{return e.apply(this,arguments)}finally{gt(s,!1),o&&queueMicrotask(mt)}}}function Ei(e){Promise===Tt&&me.echoes===0?mr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var fe=B.reject;function Ki(e,t,i,o){if(!e.idbdb||!e._state.openComplete&&!W.letThrough&&!e._vip){if(e._state.openComplete)return fe(new G.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return fe(new G.DatabaseClosed);e.open().catch(ie)}return e._state.dbReadyPromise.then(function(){return Ki(e,t,i,o)})}else{var s=e._createTransaction(t,i,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(c){return c.name===Ji.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Ki(e,t,i,o)})):fe(c)}return s._promise(t,function(c,l){return pt(function(){return W.trans=s,o(c,l,s)})}).then(function(c){if(t==="readwrite")try{s.idbtrans.commit()}catch{}return t==="readonly"?c:s._completion.then(function(){return c})})}}var Sa="4.2.1",Ct="\uFFFF",$i=-1/0,et="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Qa="String expected.",Gt=[],Dr="__dbnames",Si="readonly",xi="readwrite";function Ft(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Za={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function or(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=Rt(t),delete t[e]),t}:function(t){return t}}function oh(){throw G.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Z(e,t){try{var i=xa(e),o=xa(t);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return ah(Ia(e),Ia(t));case"Array":return sh(e,t)}}catch{}return NaN}function sh(e,t){for(var i=e.length,o=t.length,s=i<o?i:o,c=0;c<s;++c){var l=Z(e[c],t[c]);if(l!==0)return l}return i===o?0:i<o?-1:1}function ah(e,t){for(var i=e.length,o=t.length,s=i<o?i:o,c=0;c<s;++c)if(e[c]!==t[c])return e[c]<t[c]?-1:1;return i===o?0:i<o?-1:1}function xa(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var i=Ri(e);return i==="ArrayBuffer"?"binary":i}function Ia(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function gr(e,t,i){var o=e.schema.yProps;return o?(t&&i.numFailures>0&&(t=t.filter(function(s,c){return!i.failures[c]})),Promise.all(o.map(function(s){var c=s.updatesTable;return t?e.db.table(c).where("k").anyOf(t).delete():e.db.table(c).clear()})).then(function(){return i})):i}var ch=(function(){function e(t){this["@@propmod"]=t}return e.prototype.execute=function(t){var i,o=this["@@propmod"];if(o.add!==void 0){var s=o.add;if(ce(s))return vr(vr([],ce(t)?t:[],!0),s,!0).sort();if(typeof s=="number")return(Number(t)||0)+s;if(typeof s=="bigint")try{return BigInt(t)+s}catch{return BigInt(0)+s}throw new TypeError("Invalid term ".concat(s))}if(o.remove!==void 0){var c=o.remove;if(ce(c))return ce(t)?t.filter(function(h){return!c.includes(h)}).sort():[];if(typeof c=="number")return Number(t)-c;if(typeof c=="bigint")try{return BigInt(t)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}var l=(i=o.replacePrefix)===null||i===void 0?void 0:i[0];return l&&typeof t=="string"&&t.startsWith(l)?o.replacePrefix[1]+t.substring(l.length):t},e})();function ec(e,t){for(var i=ge(t),o=i.length,s=!1,c=0;c<o;++c){var l=i[c],h=t[l],d=nt(e,l);h instanceof ch?(De(e,l,h.execute(d)),s=!0):d!==h&&(De(e,l,h),s=!0)}return s}var tc=(function(){function e(){}return e.prototype._trans=function(t,i,o){var s=this._tx||W.trans,c=this.name,l=ze&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function h(g,v,_){if(!_.schema[c])throw new G.NotFound("Table "+c+" not part of transaction");return i(_.idbtrans,_)}var d=Zt();try{var m=s&&s.db._novip===this.db._novip?s===W.trans?s._promise(t,h,o):pt(function(){return s._promise(t,h,o)},{trans:s,transless:W.transless||W}):Ki(this.db,t,[this.name],h);return l&&(m._consoleTask=l,m=m.catch(function(g){return console.trace(g),fe(g)})),m}finally{d&&en()}},e.prototype.get=function(t,i){var o=this;return t&&t.constructor===Object?this.where(t).first(i):t==null?fe(new G.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:t}).then(function(c){return o.hook.reading.fire(c)})}).then(i)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(ce(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var i=ge(t);if(i.length===1)return this.where(i[0]).equals(t[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(g){if(g.compound&&i.every(function(_){return g.keyPath.indexOf(_)>=0})){for(var v=0;v<i.length;++v)if(i.indexOf(g.keyPath[v])===-1)return!1;return!0}return!1}).sort(function(g,v){return g.keyPath.length-v.keyPath.length})[0];if(o&&this.db._maxKey!==Ct){var s=o.keyPath.slice(0,i.length);return this.where(s).equals(s.map(function(g){return t[g]}))}!o&&ze&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var c=this.schema.idxByName;function l(g,v){return Z(g,v)===0}var h=i.reduce(function(g,v){var _=g[0],k=g[1],b=c[v],E=t[v];return[_||b,_||!b?Ft(k,b&&b.multi?function(S){var I=nt(S,v);return ce(I)&&I.some(function(A){return l(E,A)})}:function(S){return l(E,nt(S,v))}):k]},[null,null]),d=h[0],m=h[1];return d?this.where(d.name).equals(t[d.keyPath]).filter(m):o?this.filter(m):this.where(i).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,ce(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var i=this,o=i.db,s=i.name;this.schema.mappedClass=t,t.prototype instanceof oh&&(t=(function(d){Td(m,d);function m(){return d!==null&&d.apply(this,arguments)||this}return Object.defineProperty(m.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),m.prototype.table=function(){return s},m})(t));for(var c=new Set,l=t.prototype;l;l=qt(l))Object.getOwnPropertyNames(l).forEach(function(d){return c.add(d)});var h=function(d){if(!d)return d;var m=Object.create(t.prototype);for(var g in d)if(!c.has(g))try{m[g]=d[g]}catch{}return m};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=h,this.hook("reading",h),t},e.prototype.defineClass=function(){function t(i){Fe(this,i)}return this.mapToClass(t)},e.prototype.add=function(t,i){var o=this,s=this.schema.primKey,c=s.auto,l=s.keyPath,h=t;return l&&c&&(h=or(l)(t)),this._trans("readwrite",function(d){return o.core.mutate({trans:d,type:"add",keys:i!=null?[i]:null,values:[h]})}).then(function(d){return d.numFailures?B.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{De(t,l,d)}catch{}return d})},e.prototype.upsert=function(t,i){var o=this,s=this.schema.primKey.keyPath;return this._trans("readwrite",function(c){return o.core.get({trans:c,key:t}).then(function(l){var h=l??{};return ec(h,i),s&&De(h,s,t),o.core.mutate({trans:c,type:"put",values:[h],keys:[t],upsert:!0,updates:{keys:[t],changeSpecs:[i]}}).then(function(d){return d.numFailures?B.reject(d.failures[0]):!!l})})})},e.prototype.update=function(t,i){if(typeof t=="object"&&!ce(t)){var o=nt(t,this.schema.primKey.keyPath);return o===void 0?fe(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(t).modify(i)},e.prototype.put=function(t,i){var o=this,s=this.schema.primKey,c=s.auto,l=s.keyPath,h=t;return l&&c&&(h=or(l)(t)),this._trans("readwrite",function(d){return o.core.mutate({trans:d,type:"put",values:[h],keys:i!=null?[i]:null})}).then(function(d){return d.numFailures?B.reject(d.failures[0]):d.lastResult}).then(function(d){if(l)try{De(t,l,d)}catch{}return d})},e.prototype.delete=function(t){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[t]}).then(function(s){return gr(i,[t],s)}).then(function(s){return s.numFailures?B.reject(s.failures[0]):void 0})})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"deleteRange",range:Za}).then(function(o){return gr(t,null,o)})}).then(function(i){return i.numFailures?B.reject(i.failures[0]):void 0})},e.prototype.bulkGet=function(t){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:t,trans:o}).then(function(s){return s.map(function(c){return i.hook.reading.fire(c)})})})},e.prototype.bulkAdd=function(t,i,o){var s=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var l=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var d=s.schema.primKey,m=d.auto,g=d.keyPath;if(g&&c)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var v=t.length,_=g&&m?t.map(or(g)):t;return s.core.mutate({trans:h,type:"add",keys:c,values:_,wantResults:l}).then(function(k){var b=k.numFailures,E=k.results,S=k.lastResult,I=k.failures,A=l?E:S;if(b===0)return A;throw new zt("".concat(s.name,".bulkAdd(): ").concat(b," of ").concat(v," operations failed"),I)})})},e.prototype.bulkPut=function(t,i,o){var s=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var l=o?o.allKeys:void 0;return this._trans("readwrite",function(h){var d=s.schema.primKey,m=d.auto,g=d.keyPath;if(g&&c)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var v=t.length,_=g&&m?t.map(or(g)):t;return s.core.mutate({trans:h,type:"put",keys:c,values:_,wantResults:l}).then(function(k){var b=k.numFailures,E=k.results,S=k.lastResult,I=k.failures,A=l?E:S;if(b===0)return A;throw new zt("".concat(s.name,".bulkPut(): ").concat(b," of ").concat(v," operations failed"),I)})})},e.prototype.bulkUpdate=function(t){var i=this,o=this.core,s=t.map(function(h){return h.key}),c=t.map(function(h){return h.changes}),l=[];return this._trans("readwrite",function(h){return o.getMany({trans:h,keys:s,cache:"clone"}).then(function(d){var m=[],g=[];t.forEach(function(_,k){var b=_.key,E=_.changes,S=d[k];if(S){for(var I=0,A=Object.keys(E);I<A.length;I++){var C=A[I],P=E[C];if(C===i.schema.primKey.keyPath){if(Z(P,b)!==0)throw new G.Constraint("Cannot update primary key in bulkUpdate()")}else De(S,C,P)}l.push(k),m.push(b),g.push(S)}});var v=m.length;return o.mutate({trans:h,type:"put",keys:m,values:g,updates:{keys:s,changeSpecs:c}}).then(function(_){var k=_.numFailures,b=_.failures;if(k===0)return v;for(var E=0,S=Object.keys(b);E<S.length;E++){var I=S[E],A=l[Number(I)];if(A!=null){var C=b[I];delete b[I],b[A]=C}}throw new zt("".concat(i.name,".bulkUpdate(): ").concat(k," of ").concat(v," operations failed"),b)})})})},e.prototype.bulkDelete=function(t){var i=this,o=t.length;return this._trans("readwrite",function(s){return i.core.mutate({trans:s,type:"delete",keys:t}).then(function(c){return gr(i,t,c)})}).then(function(s){var c=s.numFailures,l=s.lastResult,h=s.failures;if(c===0)return l;throw new zt("".concat(i.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),h)})},e})();function Pn(e){var t={},i=function(h,d){if(d){for(var m=arguments.length,g=new Array(m-1);--m;)g[m-1]=arguments[m];return t[h].subscribe.apply(null,g),e}else if(typeof h=="string")return t[h]};i.addEventType=c;for(var o=1,s=arguments.length;o<s;++o)c(arguments[o]);return i;function c(h,d,m){if(typeof h=="object")return l(h);d||(d=zd),m||(m=ie);var g={subscribers:[],fire:m,subscribe:function(v){g.subscribers.indexOf(v)===-1&&(g.subscribers.push(v),g.fire=d(g.fire,v))},unsubscribe:function(v){g.subscribers=g.subscribers.filter(function(_){return _!==v}),g.fire=g.subscribers.reduce(d,m)}};return t[h]=i[h]=g,g}function l(h){ge(h).forEach(function(d){var m=h[d];if(ce(m))c(d,h[d][0],h[d][1]);else if(m==="asap")var g=c(d,On,function(){for(var _=arguments.length,k=new Array(_);_--;)k[_]=arguments[_];g.subscribers.forEach(function(b){Ka(function(){b.apply(null,k)})})});else throw new G.InvalidArgument("Invalid event config")})}}function Dn(e,t){return Xt(t).from({prototype:e}),t}function uh(e){return Dn(tc.prototype,function(i,o,s){this.db=e,this._tx=s,this.name=i,this.schema=o,this.hook=e._allTables[i]?e._allTables[i].hook:Pn(null,{creating:[Hd,ie],reading:[Ud,On],updating:[Vd,ie],deleting:[Wd,ie]})})}function Ht(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ii(e,t){e.filter=Ft(e.filter,t)}function ki(e,t,i){var o=e.replayFilter;e.replayFilter=o?function(){return Ft(o(),t())}:t,e.justLimit=i&&!o}function lh(e,t){e.isMatch=Ft(e.isMatch,t)}function yr(e,t){if(e.isPrimKey)return t.primaryKey;var i=t.getIndexByKeyPath(e.index);if(!i)throw new G.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return i}function ka(e,t,i){var o=yr(e,t.schema);return t.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:o,range:e.range}})}function sr(e,t,i,o){var s=e.replayFilter?Ft(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},l=function(h,d,m){if(!s||s(d,m,function(_){return d.stop(_)},function(_){return d.fail(_)})){var g=d.primaryKey,v=""+g;v==="[object ArrayBuffer]"&&(v=""+new Uint8Array(g)),Re(c,v)||(c[v]=!0,t(h,d,m))}};return Promise.all([e.or._iterate(l,i),Ta(ka(e,o,i),e.algorithm,l,!e.keysOnly&&e.valueMapper)])}else return Ta(ka(e,o,i),Ft(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Ta(e,t,i,o){var s=o?function(l,h,d){return i(o(l),h,d)}:i,c=ae(s);return e.then(function(l){if(l)return l.start(function(){var h=function(){return l.continue()};(!t||t(l,function(d){return h=d},function(d){l.stop(d),h=ie},function(d){l.fail(d),h=ie}))&&c(l.value,l,function(d){return h=d}),h()})})}var fh=(function(){function e(){}return e.prototype._read=function(t,i){var o=this._ctx;return o.error?o.table._trans(null,fe.bind(null,o.error)):o.table._trans("readonly",t).then(i)},e.prototype._write=function(t){var i=this._ctx;return i.error?i.table._trans(null,fe.bind(null,i.error)):i.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var i=this._ctx;i.algorithm=Ft(i.algorithm,t)},e.prototype._iterate=function(t,i){return sr(this._ctx,t,i,this._ctx.table.core)},e.prototype.clone=function(t){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&Fe(o,t),i._ctx=o,i},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var i=this._ctx;return this._read(function(o){return sr(i,t,o,i.table.core)})},e.prototype.count=function(t){var i=this;return this._read(function(o){var s=i._ctx,c=s.table.core;if(Ht(s,!0))return c.count({trans:o,query:{index:yr(s,c.schema),range:s.range}}).then(function(h){return Math.min(h,s.limit)});var l=0;return sr(s,function(){return++l,!1},o,c).then(function(){return l})}).then(t)},e.prototype.sortBy=function(t,i){var o=t.split(".").reverse(),s=o[0],c=o.length-1;function l(m,g){return g?l(m[o[g]],g-1):m[s]}var h=this._ctx.dir==="next"?1:-1;function d(m,g){var v=l(m,c),_=l(g,c);return Z(v,_)*h}return this.toArray(function(m){return m.sort(d)}).then(i)},e.prototype.toArray=function(t){var i=this;return this._read(function(o){var s=i._ctx;if(s.dir==="next"&&Ht(s,!0)&&s.limit>0){var c=s.valueMapper,l=yr(s,s.table.core.schema);return s.table.core.query({trans:o,limit:s.limit,values:!0,query:{index:l,range:s.range}}).then(function(d){var m=d.result;return c?m.map(c):m})}else{var h=[];return sr(s,function(d){return h.push(d)},o,s.table.core).then(function(){return h})}},t)},e.prototype.offset=function(t){var i=this._ctx;return t<=0?this:(i.offset+=t,Ht(i)?ki(i,function(){var o=t;return function(s,c){return o===0?!0:o===1?(--o,!1):(c(function(){s.advance(o),o=0}),!1)}}):ki(i,function(){var o=t;return function(){return--o<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ki(this._ctx,function(){var i=t;return function(o,s,c){return--i<=0&&s(c),i>=0}},!0),this},e.prototype.until=function(t,i){return Ii(this._ctx,function(o,s,c){return t(o.value)?(s(c),i):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(i){return i[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return Ii(this._ctx,function(i){return t(i.value)}),lh(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){t(s.key,s)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,s){t(s.primaryKey,s)})},e.prototype.keys=function(t){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,c){o.push(c.key)}).then(function(){return o}).then(t)},e.prototype.primaryKeys=function(t){var i=this._ctx;if(i.dir==="next"&&Ht(i,!0)&&i.limit>0)return this._read(function(s){var c=yr(i,i.table.core.schema);return i.table.core.query({trans:s,values:!1,limit:i.limit,query:{index:c,range:i.range}})}).then(function(s){var c=s.result;return c}).then(t);i.keysOnly=!i.isMatch;var o=[];return this.each(function(s,c){o.push(c.primaryKey)}).then(function(){return o}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(i){return i[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,i=t.index&&t.table.schema.idxByName[t.index];if(!i||!i.multi)return this;var o={};return Ii(this._ctx,function(s){var c=s.primaryKey.toString(),l=Re(o,c);return o[c]=!0,!l}),this},e.prototype.modify=function(t){var i=this,o=this._ctx;return this._write(function(s){var c;typeof t=="function"?c=t:c=function(I){return ec(I,t)};var l=o.table.core,h=l.schema.primaryKey,d=h.outbound,m=h.extractKey,g=200,v=i.db._options.modifyChunkSize;v&&(typeof v=="object"?g=v[l.name]||v["*"]||200:g=v);var _=[],k=0,b=[],E=function(I,A){var C=A.failures,P=A.numFailures;k+=I-P;for(var O=0,R=ge(C);O<R.length;O++){var F=R[O];_.push(C[F])}},S=t===Aa;return i.clone().primaryKeys().then(function(I){var A=Ht(o)&&o.limit===1/0&&(typeof t!="function"||S)&&{index:o.index,range:o.range},C=function(P){var O=Math.min(g,I.length-P),R=I.slice(P,P+O);return(S?Promise.resolve([]):l.getMany({trans:s,keys:R,cache:"immutable"})).then(function(F){var M=[],j=[],Y=d?[]:null,N=S?R:[];if(!S)for(var L=0;L<O;++L){var V=F[L],X={value:Rt(V),primKey:I[P+L]};c.call(X,X.value,X)!==!1&&(X.value==null?N.push(I[P+L]):!d&&Z(m(V),m(X.value))!==0?(N.push(I[P+L]),M.push(X.value)):(j.push(X.value),d&&Y.push(I[P+L])))}return Promise.resolve(M.length>0&&l.mutate({trans:s,type:"add",values:M}).then(function(H){for(var oe in H.failures)N.splice(parseInt(oe),1);E(M.length,H)})).then(function(){return(j.length>0||A&&typeof t=="object")&&l.mutate({trans:s,type:"put",keys:Y,values:j,criteria:A,changeSpec:typeof t!="function"&&t,isAdditionalChunk:P>0}).then(function(H){return E(j.length,H)})}).then(function(){return(N.length>0||A&&S)&&l.mutate({trans:s,type:"delete",keys:N,criteria:A,isAdditionalChunk:P>0}).then(function(H){return gr(o.table,N,H)}).then(function(H){return E(N.length,H)})}).then(function(){return I.length>P+O&&C(P+g)})})};return C(0).then(function(){if(_.length>0)throw new br("Error modifying one or more objects",_,k,b);return I.length})})})},e.prototype.delete=function(){var t=this._ctx,i=t.range;return Ht(t)&&!t.table.schema.yProps&&(t.isPrimKey||i.type===3)?this._write(function(o){var s=t.table.core.schema.primaryKey,c=i;return t.table.core.count({trans:o,query:{index:s,range:c}}).then(function(l){return t.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(h){var d=h.failures,m=h.numFailures;if(m)throw new br("Could not delete some values",Object.keys(d).map(function(g){return d[g]}),l-m);return l-m})})}):this.modify(Aa)},e})(),Aa=function(e,t){return t.value=null};function dh(e){return Dn(fh.prototype,function(i,o){this.db=e;var s=Za,c=null;if(o)try{s=o()}catch(m){c=m}var l=i._ctx,h=l.table,d=h.hook.reading.fire;this._ctx={table:h,index:l.index,isPrimKey:!l.index||h.schema.primKey.keyPath&&l.index===h.schema.primKey.name,range:s,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:l.or,valueMapper:d!==On?d:null}})}function hh(e,t){return e<t?-1:e===t?0:1}function ph(e,t){return e>t?-1:e===t?0:1}function Ne(e,t,i){var o=e instanceof rc?new e.Collection(e):e;return o._ctx.error=i?new i(t):new TypeError(t),o}function Wt(e){return new e.Collection(e,function(){return nc("")}).limit(0)}function mh(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function gh(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function yh(e,t,i,o,s,c){for(var l=Math.min(e.length,o.length),h=-1,d=0;d<l;++d){var m=t[d];if(m!==o[d])return s(e[d],i[d])<0?e.substr(0,d)+i[d]+i.substr(d+1):s(e[d],o[d])<0?e.substr(0,d)+o[d]+i.substr(d+1):h>=0?e.substr(0,h)+t[h]+i.substr(h+1):null;s(e[d],m)<0&&(h=d)}return l<o.length&&c==="next"?e+i.substr(e.length):l<e.length&&c==="prev"?e.substr(0,i.length):h<0?null:e.substr(0,h)+o[h]+i.substr(h+1)}function ar(e,t,i,o){var s,c,l,h,d,m,g,v=i.length;if(!i.every(function(E){return typeof E=="string"}))return Ne(e,Qa);function _(E){s=mh(E),c=gh(E),l=E==="next"?hh:ph;var S=i.map(function(I){return{lower:c(I),upper:s(I)}}).sort(function(I,A){return l(I.lower,A.lower)});h=S.map(function(I){return I.upper}),d=S.map(function(I){return I.lower}),m=E,g=E==="next"?"":o}_("next");var k=new e.Collection(e,function(){return ut(h[0],d[v-1]+o)});k._ondirectionchange=function(E){_(E)};var b=0;return k._addAlgorithm(function(E,S,I){var A=E.key;if(typeof A!="string")return!1;var C=c(A);if(t(C,d,b))return!0;for(var P=null,O=b;O<v;++O){var R=yh(A,C,h[O],d[O],l,m);R===null&&P===null?b=O+1:(P===null||l(P,R)>0)&&(P=R)}return S(P!==null?function(){E.continue(P+g)}:I),!1}),k}function ut(e,t,i,o){return{type:2,lower:e,upper:t,lowerOpen:i,upperOpen:o}}function nc(e){return{type:1,lower:e,upper:e}}var rc=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,i,o,s){o=o!==!1,s=s===!0;try{return this._cmp(t,i)>0||this._cmp(t,i)===0&&(o||s)&&!(o&&s)?Wt(this):new this.Collection(this,function(){return ut(t,i,!o,!s)})}catch{return Ne(this,et)}},e.prototype.equals=function(t){return t==null?Ne(this,et):new this.Collection(this,function(){return nc(t)})},e.prototype.above=function(t){return t==null?Ne(this,et):new this.Collection(this,function(){return ut(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Ne(this,et):new this.Collection(this,function(){return ut(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Ne(this,et):new this.Collection(this,function(){return ut(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Ne(this,et):new this.Collection(this,function(){return ut(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Ne(this,Qa):this.between(t,t+Ct,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):ar(this,function(i,o){return i.indexOf(o[0])===0},[t],Ct)},e.prototype.equalsIgnoreCase=function(t){return ar(this,function(i,o){return i===o[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=tt.apply(Vt,arguments);return t.length===0?Wt(this):ar(this,function(i,o){return o.indexOf(i)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=tt.apply(Vt,arguments);return t.length===0?Wt(this):ar(this,function(i,o){return o.some(function(s){return i.indexOf(s)===0})},t,Ct)},e.prototype.anyOf=function(){var t=this,i=tt.apply(Vt,arguments),o=this._cmp;try{i.sort(o)}catch{return Ne(this,et)}if(i.length===0)return Wt(this);var s=new this.Collection(this,function(){return ut(i[0],i[i.length-1])});s._ondirectionchange=function(l){o=l==="next"?t._ascending:t._descending,i.sort(o)};var c=0;return s._addAlgorithm(function(l,h,d){for(var m=l.key;o(m,i[c])>0;)if(++c,c===i.length)return h(d),!1;return o(m,i[c])===0?!0:(h(function(){l.continue(i[c])}),!1)}),s},e.prototype.notEqual=function(t){return this.inAnyRange([[$i,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=tt.apply(Vt,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Ne(this,et)}var i=t.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[$i,s]]},null);return i.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,i){var o=this,s=this._cmp,c=this._ascending,l=this._descending,h=this._min,d=this._max;if(t.length===0)return Wt(this);if(!t.every(function(O){return O[0]!==void 0&&O[1]!==void 0&&c(O[0],O[1])<=0}))return Ne(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var m=!i||i.includeLowers!==!1,g=i&&i.includeUppers===!0;function v(O,R){for(var F=0,M=O.length;F<M;++F){var j=O[F];if(s(R[0],j[1])<0&&s(R[1],j[0])>0){j[0]=h(j[0],R[0]),j[1]=d(j[1],R[1]);break}}return F===M&&O.push(R),O}var _=c;function k(O,R){return _(O[0],R[0])}var b;try{b=t.reduce(v,[]),b.sort(k)}catch{return Ne(this,et)}var E=0,S=g?function(O){return c(O,b[E][1])>0}:function(O){return c(O,b[E][1])>=0},I=m?function(O){return l(O,b[E][0])>0}:function(O){return l(O,b[E][0])>=0};function A(O){return!S(O)&&!I(O)}var C=S,P=new this.Collection(this,function(){return ut(b[0][0],b[b.length-1][1],!m,!g)});return P._ondirectionchange=function(O){O==="next"?(C=S,_=c):(C=I,_=l),b.sort(k)},P._addAlgorithm(function(O,R,F){for(var M=O.key;C(M);)if(++E,E===b.length)return R(F),!1;return A(M)?!0:(o._cmp(M,b[E][1])===0||o._cmp(M,b[E][0])===0||R(function(){_===c?O.continue(b[E][0]):O.continue(b[E][1])}),!1)}),P},e.prototype.startsWithAnyOf=function(){var t=tt.apply(Vt,arguments);return t.every(function(i){return typeof i=="string"})?t.length===0?Wt(this):this.inAnyRange(t.map(function(i){return[i,i+Ct]})):Ne(this,"startsWithAnyOf() only works with strings")},e})();function vh(e){return Dn(rc.prototype,function(i,o,s){if(this.db=e,this._ctx={table:i,index:o===":id"?null:o,or:s},this._cmp=this._ascending=Z,this._descending=function(c,l){return Z(l,c)},this._max=function(c,l){return Z(c,l)>0?c:l},this._min=function(c,l){return Z(c,l)<0?c:l},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new G.MissingAPI})}function Ve(e){return ae(function(t){return Tn(t),e(t.target.error),!1})}function Tn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Rn="storagemutated",ji="x-storagemutated-1",yt=Pn(null,Rn),bh=(function(){function e(){}return e.prototype._lock=function(){return _n(!W.global),++this._reculock,this._reculock===1&&!W.global&&(W.lockOwnerFor=this),this},e.prototype._unlock=function(){if(_n(!W.global),--this._reculock===0)for(W.global||(W.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Nt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&W.lockOwnerFor!==this},e.prototype.create=function(t){var i=this;if(!this.mode)return this;var o=this.db.idbdb,s=this.db._state.dbOpenError;if(_n(!this.idbtrans),!t&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new G.DatabaseClosed(s);case"MissingAPIError":throw new G.MissingAPI(s.message,s);default:throw new G.OpenFailed(s)}if(!this.active)throw new G.TransactionInactive;return _n(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=ae(function(c){Tn(c),i._reject(t.error)}),t.onabort=ae(function(c){Tn(c),i.active&&i._reject(new G.Abort(t.error)),i.active=!1,i.on("abort").fire(c)}),t.oncomplete=ae(function(){i.active=!1,i._resolve(),"mutatedParts"in t&&yt.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,i,o){var s=this;if(t==="readwrite"&&this.mode!=="readwrite")return fe(new G.ReadOnly("Transaction is readonly"));if(!this.active)return fe(new G.TransactionInactive);if(this._locked())return new B(function(l,h){s._blockedFuncs.push([function(){s._promise(t,i,o).then(l,h)},W])});if(o)return pt(function(){var l=new B(function(h,d){s._lock();var m=i(h,d,s);m&&m.then&&m.then(h,d)});return l.finally(function(){return s._unlock()}),l._lib=!0,l});var c=new B(function(l,h){var d=i(l,h,s);d&&d.then&&d.then(l,h)});return c._lib=!0,c},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var i=this._root(),o=B.resolve(t);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var s=i.idbtrans.objectStore(i.storeNames[0]);(function l(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(s.get(-1/0).onsuccess=l)})()}var c=i._waitingFor;return new B(function(l,h){o.then(function(d){return i._waitingQueue.push(ae(l.bind(null,d)))},function(d){return i._waitingQueue.push(ae(h.bind(null,d)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new G.Abort))},e.prototype.table=function(t){var i=this._memoizedTables||(this._memoizedTables={});if(Re(i,t))return i[t];var o=this.schema[t];if(!o)throw new G.NotFound("Table "+t+" not part of transaction");var s=new this.db.Table(t,o,this);return s.core=this.db.core.table(t),i[t]=s,s},e})();function wh(e){return Dn(bh.prototype,function(i,o,s,c,l){var h=this;i!=="readonly"&&o.forEach(function(d){var m,g=(m=s[d])===null||m===void 0?void 0:m.yProps;g&&(o=o.concat(g.map(function(v){return v.updatesTable})))}),this.db=e,this.mode=i,this.storeNames=o,this.schema=s,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=Pn(this,"complete","error","abort"),this.parent=l||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new B(function(d,m){h._resolve=d,h._reject=m}),this._completion.then(function(){h.active=!1,h.on.complete.fire()},function(d){var m=h.active;return h.active=!1,h.on.error.fire(d),h.parent?h.parent._reject(d):m&&h.idbtrans&&h.idbtrans.abort(),fe(d)})})}function Ui(e,t,i,o,s,c,l,h){return{name:e,keyPath:t,unique:i,multi:o,auto:s,compound:c,src:(i&&!l?"&":"")+(o?"*":"")+(s?"++":"")+ic(t),type:h}}function ic(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function no(e,t,i){return{name:e,primKey:t,indexes:i,mappedClass:null,idxByName:Pd(i,function(o){return[o.name,o]})}}function _h(e){return e.length===1?e[0]:e}var An=function(e){try{return e.only([[]]),An=function(){return[[]]},[[]]}catch{return An=function(){return Ct},Ct}};function Hi(e){return e==null?function(){}:typeof e=="string"?Eh(e):function(t){return nt(t,e)}}function Eh(e){var t=e.split(".");return t.length===1?function(i){return i[e]}:function(i){return nt(i,e)}}function Ca(e){return[].slice.call(e)}var Sh=0;function xn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function xh(e,t,i){function o(v,_){var k=Ca(v.objectStoreNames);return{schema:{name:v.name,tables:k.map(function(b){return _.objectStore(b)}).map(function(b){var E=b.keyPath,S=b.autoIncrement,I=ce(E),A=E==null,C={},P={name:b.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:A,compound:I,keyPath:E,autoIncrement:S,unique:!0,extractKey:Hi(E)},indexes:Ca(b.indexNames).map(function(O){return b.index(O)}).map(function(O){var R=O.name,F=O.unique,M=O.multiEntry,j=O.keyPath,Y=ce(j),N={name:R,compound:Y,keyPath:j,unique:F,multiEntry:M,extractKey:Hi(j)};return C[xn(j)]=N,N}),getIndexByKeyPath:function(O){return C[xn(O)]}};return C[":id"]=P.primaryKey,E!=null&&(C[xn(E)]=P.primaryKey),P})},hasGetAll:k.length>0&&"getAll"in _.objectStore(k[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function s(v){if(v.type===3)return null;if(v.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=v.lower,k=v.upper,b=v.lowerOpen,E=v.upperOpen,S=_===void 0?k===void 0?null:t.upperBound(k,!!E):k===void 0?t.lowerBound(_,!!b):t.bound(_,k,!!b,!!E);return S}function c(v){var _=v.name;function k(S){var I=S.trans,A=S.type,C=S.keys,P=S.values,O=S.range;return new Promise(function(R,F){R=ae(R);var M=I.objectStore(_),j=M.keyPath==null,Y=A==="put"||A==="add";if(!Y&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var N=(C||P||{length:1}).length;if(C&&P&&C.length!==P.length)throw new Error("Given keys array must have same length as given values array.");if(N===0)return R({numFailures:0,failures:{},results:[],lastResult:void 0});var L,V=[],X=[],H=0,oe=function(ke){++H,Tn(ke)};if(A==="deleteRange"){if(O.type===4)return R({numFailures:H,failures:X,results:[],lastResult:void 0});O.type===3?V.push(L=M.clear()):V.push(L=M.delete(s(O)))}else{var pe=Y?j?[P,C]:[P,null]:[C,null],Be=pe[0],Se=pe[1];if(Y)for(var Oe=0;Oe<N;++Oe)V.push(L=Se&&Se[Oe]!==void 0?M[A](Be[Oe],Se[Oe]):M[A](Be[Oe])),L.onerror=oe;else for(var Oe=0;Oe<N;++Oe)V.push(L=M[A](Be[Oe])),L.onerror=oe}var $e=function(ke){var Pe=ke.target.result;V.forEach(function(Me,z){return Me.error!=null&&(X[z]=Me.error)}),R({numFailures:H,failures:X,results:A==="delete"?C:V.map(function(Me){return Me.result}),lastResult:Pe})};L.onerror=function(ke){oe(ke),$e(ke)},L.onsuccess=$e})}function b(S){var I=S.trans,A=S.values,C=S.query,P=S.reverse,O=S.unique;return new Promise(function(R,F){R=ae(R);var M=C.index,j=C.range,Y=I.objectStore(_),N=M.isPrimaryKey?Y:Y.index(M.name),L=P?O?"prevunique":"prev":O?"nextunique":"next",V=A||!("openKeyCursor"in N)?N.openCursor(s(j),L):N.openKeyCursor(s(j),L);V.onerror=Ve(F),V.onsuccess=ae(function(X){var H=V.result;if(!H){R(null);return}H.___id=++Sh,H.done=!1;var oe=H.continue.bind(H),pe=H.continuePrimaryKey;pe&&(pe=pe.bind(H));var Be=H.advance.bind(H),Se=function(){throw new Error("Cursor not started")},Oe=function(){throw new Error("Cursor not stopped")};H.trans=I,H.stop=H.continue=H.continuePrimaryKey=H.advance=Se,H.fail=ae(F),H.next=function(){var $e=this,ke=1;return this.start(function(){return ke--?$e.continue():$e.stop()}).then(function(){return $e})},H.start=function($e){var ke=new Promise(function(Me,z){Me=ae(Me),V.onerror=Ve(z),H.fail=z,H.stop=function(Fr){H.stop=H.continue=H.continuePrimaryKey=H.advance=Oe,Me(Fr)}}),Pe=function(){if(V.result)try{$e()}catch(Me){H.fail(Me)}else H.done=!0,H.start=function(){throw new Error("Cursor behind last entry")},H.stop()};return V.onsuccess=ae(function(Me){V.onsuccess=Pe,Pe()}),H.continue=oe,H.continuePrimaryKey=pe,H.advance=Be,Pe(),ke},R(H)},F)})}function E(S){return function(I){return new Promise(function(A,C){A=ae(A);var P=I.trans,O=I.values,R=I.limit,F=I.query,M=R===1/0?void 0:R,j=F.index,Y=F.range,N=P.objectStore(_),L=j.isPrimaryKey?N:N.index(j.name),V=s(Y);if(R===0)return A({result:[]});if(S){var X=O?L.getAll(V,M):L.getAllKeys(V,M);X.onsuccess=function(Be){return A({result:Be.target.result})},X.onerror=Ve(C)}else{var H=0,oe=O||!("openKeyCursor"in L)?L.openCursor(V):L.openKeyCursor(V),pe=[];oe.onsuccess=function(Be){var Se=oe.result;if(!Se)return A({result:pe});if(pe.push(O?Se.value:Se.primaryKey),++H===R)return A({result:pe});Se.continue()},oe.onerror=Ve(C)}})}}return{name:_,schema:v,mutate:k,getMany:function(S){var I=S.trans,A=S.keys;return new Promise(function(C,P){C=ae(C);for(var O=I.objectStore(_),R=A.length,F=new Array(R),M=0,j=0,Y,N=function(H){var oe=H.target;(F[oe._pos]=oe.result)!=null,++j===M&&C(F)},L=Ve(P),V=0;V<R;++V){var X=A[V];X!=null&&(Y=O.get(A[V]),Y._pos=V,Y.onsuccess=N,Y.onerror=L,++M)}M===0&&C(F)})},get:function(S){var I=S.trans,A=S.key;return new Promise(function(C,P){C=ae(C);var O=I.objectStore(_),R=O.get(A);R.onsuccess=function(F){return C(F.target.result)},R.onerror=Ve(P)})},query:E(d),openCursor:b,count:function(S){var I=S.query,A=S.trans,C=I.index,P=I.range;return new Promise(function(O,R){var F=A.objectStore(_),M=C.isPrimaryKey?F:F.index(C.name),j=s(P),Y=j?M.count(j):M.count();Y.onsuccess=ae(function(N){return O(N.target.result)}),Y.onerror=Ve(R)})}}}var l=o(e,i),h=l.schema,d=l.hasGetAll,m=h.tables.map(function(v){return c(v)}),g={};return m.forEach(function(v){return g[v.name]=v}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(v){var _=g[v];if(!_)throw new Error("Table '".concat(v,"' not found"));return g[v]},MIN_KEY:-1/0,MAX_KEY:An(t),schema:h}}function Ih(e,t){return t.reduce(function(i,o){var s=o.create;return J(J({},i),s(i))},e)}function kh(e,t,i,o){var s=i.IDBKeyRange;i.indexedDB;var c=Ih(xh(t,s,o),e.dbcore);return{dbcore:c}}function Sr(e,t){var i=t.db,o=kh(e._middlewares,i,e._deps,t);e.core=o.dbcore,e.tables.forEach(function(s){var c=s.name;e.core.schema.tables.some(function(l){return l.name===c})&&(s.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=s.core))})}function xr(e,t,i,o){i.forEach(function(s){var c=o[s];t.forEach(function(l){var h=Ba(l,s);(!h||"value"in h&&h.value===void 0)&&(l===e.Transaction.prototype||l instanceof e.Transaction?ht(l,s,{get:function(){return this.table(s)},set:function(d){Fa(this,s,{value:d,writable:!0,configurable:!0,enumerable:!0})}}):l[s]=new e.Table(s,c))})})}function Wi(e,t){t.forEach(function(i){for(var o in i)i[o]instanceof e.Table&&delete i[o]})}function Th(e,t){return e._cfg.version-t._cfg.version}function Ah(e,t,i,o){var s=e._dbSchema;i.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=no("$meta",sc("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,s);c.create(i),c._completion.catch(o);var l=c._reject.bind(c),h=W.transless||W;pt(function(){if(W.trans=c,W.transless=h,t===0)ge(s).forEach(function(d){io(i,d,s[d].primKey,s[d].indexes)}),Sr(e,i),B.follow(function(){return e.on.populate.fire(c)}).catch(l);else return Sr(e,i),Oh(e,c,t).then(function(d){return Ph(e,d,c,i)}).catch(l)})}function Ch(e,t){oc(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var i=Rr(e,e.idbdb,t);kr(e,e._dbSchema,t);for(var o=ro(i,e._dbSchema),s=function(m){if(m.change.length||m.recreate)return console.warn("Unable to patch indexes of table ".concat(m.name," because it has changes on the type of index or primary key.")),{value:void 0};var g=t.objectStore(m.name);m.add.forEach(function(v){ze&&console.debug("Dexie upgrade patch: Creating missing index ".concat(m.name,".").concat(v.src)),Ir(g,v)})},c=0,l=o.change;c<l.length;c++){var h=l[c],d=s(h);if(typeof d=="object")return d.value}}function Oh(e,t,i){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(o){return o??i}):B.resolve(i)}function Ph(e,t,i,o){var s=[],c=e._versions,l=e._dbSchema=Rr(e,e.idbdb,o),h=c.filter(function(m){return m._cfg.version>=t});if(h.length===0)return B.resolve();h.forEach(function(m){s.push(function(){var g=l,v=m._cfg.dbschema;kr(e,g,o),kr(e,v,o),l=e._dbSchema=v;var _=ro(g,v);_.add.forEach(function(A){io(o,A[0],A[1].primKey,A[1].indexes)}),_.change.forEach(function(A){if(A.recreate)throw new G.Upgrade("Not yet support for changing primary key");var C=o.objectStore(A.name);A.add.forEach(function(P){return Ir(C,P)}),A.change.forEach(function(P){C.deleteIndex(P.name),Ir(C,P)}),A.del.forEach(function(P){return C.deleteIndex(P)})});var k=m._cfg.contentUpgrade;if(k&&m._cfg.version>t){Sr(e,o),i._memoizedTables={};var b=$a(v);_.del.forEach(function(A){b[A]=g[A]}),Wi(e,[e.Transaction.prototype]),xr(e,[e.Transaction.prototype],ge(b),b),i.schema=b;var E=qi(k);E&&tn();var S,I=B.follow(function(){if(S=k(i),S&&E){var A=mt.bind(null,null);S.then(A,A)}});return S&&typeof S.then=="function"?B.resolve(S):I.then(function(){return S})}}),s.push(function(g){var v=m._cfg.dbschema;Dh(v,g),Wi(e,[e.Transaction.prototype]),xr(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),i.schema=e._dbSchema}),s.push(function(g){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===m._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(v){return v!=="$meta"})):g.objectStore("$meta").put(m._cfg.version,"version"))})});function d(){return s.length?B.resolve(s.shift()(i.idbtrans)).then(d):B.resolve()}return d().then(function(){oc(l,o)})}function ro(e,t){var i={del:[],add:[],change:[]},o;for(o in e)t[o]||i.del.push(o);for(o in t){var s=e[o],c=t[o];if(!s)i.add.push([o,c]);else{var l={name:o,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||s.primKey.auto!==c.primKey.auto)l.recreate=!0,i.change.push(l);else{var h=s.idxByName,d=c.idxByName,m=void 0;for(m in h)d[m]||l.del.push(m);for(m in d){var g=h[m],v=d[m];g?g.src!==v.src&&l.change.push(v):l.add.push(v)}(l.del.length>0||l.add.length>0||l.change.length>0)&&i.change.push(l)}}}return i}function io(e,t,i,o){var s=e.db.createObjectStore(t,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(c){return Ir(s,c)}),s}function oc(e,t){ge(e).forEach(function(i){t.db.objectStoreNames.contains(i)||(ze&&console.debug("Dexie: Creating missing table",i),io(t,i,e[i].primKey,e[i].indexes))})}function Dh(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(i){return e[i]==null&&t.db.deleteObjectStore(i)})}function Ir(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Rr(e,t,i){var o={},s=Or(t.objectStoreNames,0);return s.forEach(function(c){for(var l=i.objectStore(c),h=l.keyPath,d=Ui(ic(h),h||"",!0,!1,!!l.autoIncrement,h&&typeof h!="string",!0),m=[],g=0;g<l.indexNames.length;++g){var v=l.index(l.indexNames[g]);h=v.keyPath;var _=Ui(v.name,h,!!v.unique,!!v.multiEntry,!1,h&&typeof h!="string",!1);m.push(_)}o[c]=no(c,d,m)}),o}function Rh(e,t,i){e.verno=t.version/10;var o=e._dbSchema=Rr(e,t,i);e._storeNames=Or(t.objectStoreNames,0),xr(e,[e._allTables],ge(o),o)}function Mh(e,t){var i=Rr(e,e.idbdb,t),o=ro(i,e._dbSchema);return!(o.add.length||o.change.some(function(s){return s.add.length||s.change.length}))}function kr(e,t,i){for(var o=i.db.objectStoreNames,s=0;s<o.length;++s){var c=o[s],l=i.objectStore(c);e._hasGetAll="getAll"in l;for(var h=0;h<l.indexNames.length;++h){var d=l.indexNames[h],m=l.index(d).keyPath,g=typeof m=="string"?m:"["+Or(m).join("+")+"]";if(t[c]){var v=t[c].idxByName[g];v&&(v.name=d,delete t[c].idxByName[g],t[c].idxByName[d]=v)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Ee.WorkerGlobalScope&&Ee instanceof Ee.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function sc(e){return e.split(",").map(function(t,i){var o,s=t.split(":"),c=(o=s[1])===null||o===void 0?void 0:o.trim();t=s[0].trim();var l=t.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Ui(l,h||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),ce(h),i===0,c)})}var Nh=(function(){function e(){}return e.prototype._createTableSchema=function(t,i,o){return no(t,i,o)},e.prototype._parseIndexSyntax=function(t){return sc(t)},e.prototype._parseStoresSpec=function(t,i){var o=this;ge(t).forEach(function(s){if(t[s]!==null){var c=o._parseIndexSyntax(t[s]),l=c.shift();if(!l)throw new G.Schema("Invalid schema for table "+s+": "+t[s]);if(l.unique=!0,l.multi)throw new G.Schema("Primary key cannot be multiEntry*");c.forEach(function(d){if(d.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string")});var h=o._createTableSchema(s,l,c);i[s]=h}})},e.prototype.stores=function(t){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?Fe(this._cfg.storesSource,t):t;var o=i._versions,s={},c={};return o.forEach(function(l){Fe(s,l._cfg.storesSource),c=l._cfg.dbschema={},l._parseStoresSpec(s,c)}),i._dbSchema=c,Wi(i,[i._allTables,i,i.Transaction.prototype]),xr(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],ge(c),c),i._storeNames=ge(c),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Xi(this._cfg.contentUpgrade||ie,t),this},e})();function Fh(e){return Dn(Nh.prototype,function(i){this.db=e,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function oo(e,t){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new Jt(Dr,{addons:[],indexedDB:e,IDBKeyRange:t}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function so(e){return e&&typeof e.databases=="function"}function Bh(e){var t=e.indexedDB,i=e.IDBKeyRange;return so(t)?Promise.resolve(t.databases()).then(function(o){return o.map(function(s){return s.name}).filter(function(s){return s!==Dr})}):oo(t,i).toCollection().primaryKeys()}function Lh(e,t){var i=e.indexedDB,o=e.IDBKeyRange;!so(i)&&t!==Dr&&oo(i,o).put({name:t}).catch(ie)}function Kh(e,t){var i=e.indexedDB,o=e.IDBKeyRange;!so(i)&&t!==Dr&&oo(i,o).delete(t).catch(ie)}function Vi(e){return pt(function(){return W.letThrough=!0,e()})}function $h(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};t=setInterval(o,100),o()}).finally(function(){return clearInterval(t)})}var Ti;function ao(e){return!("from"in e)}var Ce=function(e,t){if(this)Fe(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var i=new Ce;return e&&"d"in e&&Fe(i,e),i}};Yt(Ce.prototype,(Ti={add:function(e){return Tr(this,e),this},addKey:function(e){return Cn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(i){return Cn(t,i,i)}),this},hasKey:function(e){var t=Ar(this).next(e).value;return t&&Z(t.from,e)<=0&&Z(t.to,e)>=0}},Ti[Mi]=function(){return Ar(this)},Ti));function Cn(e,t,i){var o=Z(t,i);if(!isNaN(o)){if(o>0)throw RangeError();if(ao(e))return Fe(e,{from:t,to:i,d:1});var s=e.l,c=e.r;if(Z(i,e.from)<0)return s?Cn(s,t,i):e.l={from:t,to:i,d:1,l:null,r:null},Oa(e);if(Z(t,e.to)>0)return c?Cn(c,t,i):e.r={from:t,to:i,d:1,l:null,r:null},Oa(e);Z(t,e.from)<0&&(e.from=t,e.l=null,e.d=c?c.d+1:1),Z(i,e.to)>0&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1);var l=!e.r;s&&!e.l&&Tr(e,s),c&&l&&Tr(e,c)}}function Tr(e,t){function i(o,s){var c=s.from,l=s.to,h=s.l,d=s.r;Cn(o,c,l),h&&i(o,h),d&&i(o,d)}ao(t)||i(e,t)}function jh(e,t){var i=Ar(t),o=i.next();if(o.done)return!1;for(var s=o.value,c=Ar(e),l=c.next(s.from),h=l.value;!o.done&&!l.done;){if(Z(h.from,s.to)<=0&&Z(h.to,s.from)>=0)return!0;Z(s.from,h.from)<0?s=(o=i.next(h.from)).value:h=(l=c.next(s.from)).value}return!1}function Ar(e){var t=ao(e)?null:{s:0,n:e};return{next:function(i){for(var o=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,o)for(;t.n.l&&Z(i,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!o||Z(i,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Oa(e){var t,i,o=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),s=o>1?"r":o<-1?"l":"";if(s){var c=s==="r"?"l":"r",l=J({},e),h=e[s];e.from=h.from,e.to=h.to,e[s]=h[s],l[s]=h[c],e[c]=l,l.d=Pa(l)}e.d=Pa(e)}function Pa(e){var t=e.r,i=e.l;return(t?i?Math.max(t.d,i.d):t.d:i?i.d:0)+1}function Mr(e,t){return ge(t).forEach(function(i){e[i]?Tr(e[i],t[i]):e[i]=Ha(t[i])}),e}function co(e,t){return e.all||t.all||Object.keys(e).some(function(i){return t[i]&&jh(t[i],e[i])})}var Dt={},Ai={},Ci=!1;function cr(e,t){Mr(Ai,e),Ci||(Ci=!0,setTimeout(function(){Ci=!1;var i=Ai;Ai={},uo(i,!1)},0))}function uo(e,t){t===void 0&&(t=!1);var i=new Set;if(e.all)for(var o=0,s=Object.values(Dt);o<s.length;o++){var c=s[o];Da(c,e,i,t)}else for(var l in e){var h=/^idb\:\/\/(.*)\/(.*)\//.exec(l);if(h){var d=h[1],m=h[2],c=Dt["idb://".concat(d,"/").concat(m)];c&&Da(c,e,i,t)}}i.forEach(function(g){return g()})}function Da(e,t,i,o){for(var s=[],c=0,l=Object.entries(e.queries.query);c<l.length;c++){for(var h=l[c],d=h[0],m=h[1],g=[],v=0,_=m;v<_.length;v++){var k=_[v];co(t,k.obsSet)?k.subscribers.forEach(function(I){return i.add(I)}):o&&g.push(k)}o&&s.push([d,g])}if(o)for(var b=0,E=s;b<E.length;b++){var S=E[b],d=S[0],g=S[1];e.queries.query[d]=g}}function Uh(e){var t=e._state,i=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?fe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var o=t.openCanceller,s=Math.round(e.verno*10),c=!1;function l(){if(t.openCanceller!==o)throw new G.DatabaseClosed("db.open() was cancelled")}var h=t.dbReadyResolve,d=null,m=!1,g=function(){return new B(function(v,_){if(l(),!i)throw new G.MissingAPI;var k=e.name,b=t.autoSchema||!s?i.open(k):i.open(k,s);if(!b)throw new G.MissingAPI;b.onerror=Ve(_),b.onblocked=ae(e._fireOnBlocked),b.onupgradeneeded=ae(function(E){if(d=b.transaction,t.autoSchema&&!e._options.allowEmptyDB){b.onerror=Tn,d.abort(),b.result.close();var S=i.deleteDatabase(k);S.onsuccess=S.onerror=ae(function(){_(new G.NoSuchDatabase("Database ".concat(k," doesnt exist")))})}else{d.onerror=Ve(_);var I=E.oldVersion>Math.pow(2,62)?0:E.oldVersion;m=I<1,e.idbdb=b.result,c&&Ch(e,d),Ah(e,I/10,d,_)}},_),b.onsuccess=ae(function(){d=null;var E=e.idbdb=b.result,S=Or(E.objectStoreNames);if(S.length>0)try{var I=E.transaction(_h(S),"readonly");if(t.autoSchema)Rh(e,E,I);else if(kr(e,e._dbSchema,I),!Mh(e,I)&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),E.close(),s=E.version+1,c=!0,v(g());Sr(e,I)}catch{}Gt.push(e),E.onversionchange=ae(function(A){t.vcFired=!0,e.on("versionchange").fire(A)}),E.onclose=ae(function(){e.close({disableAutoOpen:!1})}),m&&Lh(e._deps,k),v()},_)}).catch(function(v){switch(v?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),g();break;case"VersionError":if(s>0)return s=0,g();break}return B.reject(v)})};return B.race([o,(typeof navigator>"u"?B.resolve():$h()).then(g)]).then(function(){return l(),t.onReadyBeingFired=[],B.resolve(Vi(function(){return e.on.ready.fire(e.vip)})).then(function v(){if(t.onReadyBeingFired.length>0){var _=t.onReadyBeingFired.reduce(Xi,ie);return t.onReadyBeingFired=[],B.resolve(Vi(function(){return _(e.vip)})).then(v)}})}).finally(function(){t.openCanceller===o&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(v){t.dbOpenError=v;try{d&&d.abort()}catch{}return o===t.openCanceller&&e._close(),fe(v)}).finally(function(){t.openComplete=!0,h()}).then(function(){if(m){var v={};e.tables.forEach(function(_){_.schema.indexes.forEach(function(k){k.name&&(v["idb://".concat(e.name,"/").concat(_.name,"/").concat(k.name)]=new Ce(-1/0,[[[]]]))}),v["idb://".concat(e.name,"/").concat(_.name,"/")]=v["idb://".concat(e.name,"/").concat(_.name,"/:dels")]=new Ce(-1/0,[[[]]])}),yt(Rn).fire(v),uo(v,!0)}return e})}function zi(e){var t=function(l){return e.next(l)},i=function(l){return e.throw(l)},o=c(t),s=c(i);function c(l){return function(h){var d=l(h),m=d.value;return d.done?m:!m||typeof m.then!="function"?ce(m)?Promise.all(m).then(o,s):o(m):m.then(o,s)}}return c(t)()}function Hh(e,t,i){var o=arguments.length;if(o<2)throw new G.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];i=s.pop();var c=ja(s);return[e,c,i]}function ac(e,t,i,o,s){return B.resolve().then(function(){var c=W.transless||W,l=e._createTransaction(t,i,e._dbSchema,o);l.explicit=!0;var h={trans:l,transless:c};if(o)l.idbtrans=o.idbtrans;else try{l.create(),l.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(v){return v.name===Ji.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return ac(e,t,i,null,s)})):fe(v)}var d=qi(s);d&&tn();var m,g=B.follow(function(){if(m=s.call(l,l),m)if(d){var v=mt.bind(null,null);m.then(v,v)}else typeof m.next=="function"&&typeof m.throw=="function"&&(m=zi(m))},h);return(m&&typeof m.then=="function"?B.resolve(m).then(function(v){return l.active?v:fe(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):g.then(function(){return m})).then(function(v){return o&&l._resolve(),l._completion.then(function(){return v})}).catch(function(v){return l._reject(v),fe(v)})})}function ur(e,t,i){for(var o=ce(e)?e.slice():[e],s=0;s<i;++s)o.push(t);return o}function Wh(e){return J(J({},e),{table:function(t){var i=e.table(t),o=i.schema,s={},c=[];function l(E,S,I){var A=xn(E),C=s[A]=s[A]||[],P=E==null?0:typeof E=="string"?1:E.length,O=S>0,R=J(J({},I),{name:O?"".concat(A,"(virtual-from:").concat(I.name,")"):I.name,lowLevelIndex:I,isVirtual:O,keyTail:S,keyLength:P,extractKey:Hi(E),unique:!O&&I.unique});if(C.push(R),R.isPrimaryKey||c.push(R),P>1){var F=P===2?E[0]:E.slice(0,P-1);l(F,S+1,I)}return C.sort(function(M,j){return M.keyTail-j.keyTail}),R}var h=l(o.primaryKey.keyPath,0,o.primaryKey);s[":id"]=[h];for(var d=0,m=o.indexes;d<m.length;d++){var g=m[d];l(g.keyPath,0,g)}function v(E){var S=s[xn(E)];return S&&S[0]}function _(E,S){return{type:E.type===1?2:E.type,lower:ur(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,S),lowerOpen:!0,upper:ur(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,S),upperOpen:!0}}function k(E){var S=E.query.index;return S.isVirtual?J(J({},E),{query:{index:S.lowLevelIndex,range:_(E.query.range,S.keyTail)}}):E}var b=J(J({},i),{schema:J(J({},o),{primaryKey:h,indexes:c,getIndexByKeyPath:v}),count:function(E){return i.count(k(E))},query:function(E){return i.query(k(E))},openCursor:function(E){var S=E.query.index,I=S.keyTail,A=S.isVirtual,C=S.keyLength;if(!A)return i.openCursor(E);function P(O){function R(M){M!=null?O.continue(ur(M,E.reverse?e.MAX_KEY:e.MIN_KEY,I)):E.unique?O.continue(O.key.slice(0,C).concat(E.reverse?e.MIN_KEY:e.MAX_KEY,I)):O.continue()}var F=Object.create(O,{continue:{value:R},continuePrimaryKey:{value:function(M,j){O.continuePrimaryKey(ur(M,e.MAX_KEY,I),j)}},primaryKey:{get:function(){return O.primaryKey}},key:{get:function(){var M=O.key;return C===1?M[0]:M.slice(0,C)}},value:{get:function(){return O.value}}});return F}return i.openCursor(k(E)).then(function(O){return O&&P(O)})}});return b}})}var Vh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Wh};function lo(e,t,i,o){return i=i||{},o=o||"",ge(e).forEach(function(s){if(!Re(t,s))i[o+s]=void 0;else{var c=e[s],l=t[s];if(typeof c=="object"&&typeof l=="object"&&c&&l){var h=Ri(c),d=Ri(l);h!==d?i[o+s]=t[s]:h==="Object"?lo(c,l,i,o+s+"."):c!==l&&(i[o+s]=t[s])}else c!==l&&(i[o+s]=t[s])}}),ge(t).forEach(function(s){Re(e,s)||(i[o+s]=t[s])}),i}function fo(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var zh={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return J(J({},e),{table:function(t){var i=e.table(t),o=i.schema.primaryKey,s=J(J({},i),{mutate:function(c){var l=W.trans,h=l.table(t).hook,d=h.deleting,m=h.creating,g=h.updating;switch(c.type){case"add":if(m.fire===ie)break;return l._promise("readwrite",function(){return v(c)},!0);case"put":if(m.fire===ie&&g.fire===ie)break;return l._promise("readwrite",function(){return v(c)},!0);case"delete":if(d.fire===ie)break;return l._promise("readwrite",function(){return v(c)},!0);case"deleteRange":if(d.fire===ie)break;return l._promise("readwrite",function(){return _(c)},!0)}return i.mutate(c);function v(b){var E=W.trans,S=b.keys||fo(o,b);if(!S)throw new Error("Keys missing");return b=b.type==="add"||b.type==="put"?J(J({},b),{keys:S}):J({},b),b.type!=="delete"&&(b.values=vr([],b.values,!0)),b.keys&&(b.keys=vr([],b.keys,!0)),Gh(i,b,S).then(function(I){var A=S.map(function(C,P){var O=I[P],R={onerror:null,onsuccess:null};if(b.type==="delete")d.fire.call(R,C,O,E);else if(b.type==="add"||O===void 0){var F=m.fire.call(R,C,b.values[P],E);C==null&&F!=null&&(C=F,b.keys[P]=C,o.outbound||De(b.values[P],o.keyPath,C))}else{var M=lo(O,b.values[P]),j=g.fire.call(R,M,C,O,E);if(j){var Y=b.values[P];Object.keys(j).forEach(function(N){Re(Y,N)?Y[N]=j[N]:De(Y,N,j[N])})}}return R});return i.mutate(b).then(function(C){for(var P=C.failures,O=C.results,R=C.numFailures,F=C.lastResult,M=0;M<S.length;++M){var j=O?O[M]:S[M],Y=A[M];j==null?Y.onerror&&Y.onerror(P[M]):Y.onsuccess&&Y.onsuccess(b.type==="put"&&I[M]?b.values[M]:j)}return{failures:P,results:O,numFailures:R,lastResult:F}}).catch(function(C){return A.forEach(function(P){return P.onerror&&P.onerror(C)}),Promise.reject(C)})})}function _(b){return k(b.trans,b.range,1e4)}function k(b,E,S){return i.query({trans:b,values:!1,query:{index:o,range:E},limit:S}).then(function(I){var A=I.result;return v({type:"delete",keys:A,trans:b}).then(function(C){return C.numFailures>0?Promise.reject(C.failures[0]):A.length<S?{failures:[],numFailures:0,lastResult:void 0}:k(b,J(J({},E),{lower:A[A.length-1],lowerOpen:!0}),S)})})}}});return s}})}};function Gh(e,t,i){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:i,cache:"immutable"})}function cc(e,t,i){try{if(!t||t.keys.length<e.length)return null;for(var o=[],s=0,c=0;s<t.keys.length&&c<e.length;++s)Z(t.keys[s],e[c])===0&&(o.push(i?Rt(t.values[s]):t.values[s]),++c);return o.length===e.length?o:null}catch{return null}}var qh={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var i=e.table(t);return J(J({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var s=cc(o.keys,o.trans._cache,o.cache==="clone");return s?B.resolve(s):i.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?Rt(c):c},c})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function uc(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function lc(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Yh={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,i=new Ce(e.MIN_KEY,e.MAX_KEY);return J(J({},e),{transaction:function(o,s,c){if(W.subscr&&s!=="readonly")throw new G.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(W.querier));return e.transaction(o,s,c)},table:function(o){var s=e.table(o),c=s.schema,l=c.primaryKey,h=c.indexes,d=l.extractKey,m=l.outbound,g=l.autoIncrement&&h.filter(function(b){return b.compound&&b.keyPath.includes(l.keyPath)}),v=J(J({},s),{mutate:function(b){var E,S,I=b.trans,A=b.mutatedParts||(b.mutatedParts={}),C=function(V){var X="idb://".concat(t,"/").concat(o,"/").concat(V);return A[X]||(A[X]=new Ce)},P=C(""),O=C(":dels"),R=b.type,F=b.type==="deleteRange"?[b.range]:b.type==="delete"?[b.keys]:b.values.length<50?[fo(l,b).filter(function(V){return V}),b.values]:[],M=F[0],j=F[1],Y=b.trans._cache;if(ce(M)){P.addKeys(M);var N=R==="delete"||M.length===j.length?cc(M,Y):null;N||O.addKeys(M),(N||j)&&Jh(C,c,N,j)}else if(M){var L={from:(E=M.lower)!==null&&E!==void 0?E:e.MIN_KEY,to:(S=M.upper)!==null&&S!==void 0?S:e.MAX_KEY};O.add(L),P.add(L)}else P.add(i),O.add(i),c.indexes.forEach(function(V){return C(V.name).add(i)});return s.mutate(b).then(function(V){return M&&(b.type==="add"||b.type==="put")&&(P.addKeys(V.results),g&&g.forEach(function(X){for(var H=b.values.map(function(Se){return X.extractKey(Se)}),oe=X.keyPath.findIndex(function(Se){return Se===l.keyPath}),pe=0,Be=V.results.length;pe<Be;++pe)H[pe][oe]=V.results[pe];C(X.name).addKeys(H)})),I.mutatedParts=Mr(I.mutatedParts||{},A),V})}}),_=function(b){var E,S,I=b.query,A=I.index,C=I.range;return[A,new Ce((E=C.lower)!==null&&E!==void 0?E:e.MIN_KEY,(S=C.upper)!==null&&S!==void 0?S:e.MAX_KEY)]},k={get:function(b){return[l,new Ce(b.key)]},getMany:function(b){return[l,new Ce().addKeys(b.keys)]},count:_,query:_,openCursor:_};return ge(k).forEach(function(b){v[b]=function(E){var S=W.subscr,I=!!S,A=uc(W,s)&&lc(b,E),C=A?E.obsSet={}:S;if(I){var P=function(N){var L="idb://".concat(t,"/").concat(o,"/").concat(N);return C[L]||(C[L]=new Ce)},O=P(""),R=P(":dels"),F=k[b](E),M=F[0],j=F[1];if(b==="query"&&M.isPrimaryKey&&!E.values?R.add(j):P(M.name||"").add(j),!M.isPrimaryKey)if(b==="count")R.add(i);else{var Y=b==="query"&&m&&E.values&&s.query(J(J({},E),{values:!1}));return s[b].apply(this,arguments).then(function(N){if(b==="query"){if(m&&E.values)return Y.then(function(H){var oe=H.result;return O.addKeys(oe),N});var L=E.values?N.result.map(d):N.result;E.values?O.addKeys(L):R.addKeys(L)}else if(b==="openCursor"){var V=N,X=E.values;return V&&Object.create(V,{key:{get:function(){return R.addKey(V.primaryKey),V.key}},primaryKey:{get:function(){var H=V.primaryKey;return R.addKey(H),H}},value:{get:function(){return X&&O.addKey(V.primaryKey),V.value}}})}return N})}}return s[b].apply(this,arguments)}}),v}})}};function Jh(e,t,i,o){function s(c){var l=e(c.name||"");function h(m){return m!=null?c.extractKey(m):null}var d=function(m){return c.multiEntry&&ce(m)?m.forEach(function(g){return l.addKey(g)}):l.addKey(m)};(i||o).forEach(function(m,g){var v=i&&h(i[g]),_=o&&h(o[g]);Z(v,_)!==0&&(v!=null&&d(v),_!=null&&d(_))})}t.indexes.forEach(s)}function Ra(e,t,i){if(i.numFailures===0)return t;if(t.type==="deleteRange")return null;var o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(i.numFailures===o)return null;var s=J({},t);return ce(s.keys)&&(s.keys=s.keys.filter(function(c,l){return!(l in i.failures)})),"values"in s&&ce(s.values)&&(s.values=s.values.filter(function(c,l){return!(l in i.failures)})),s}function Xh(e,t){return t.lower===void 0?!0:t.lowerOpen?Z(e,t.lower)>0:Z(e,t.lower)>=0}function Qh(e,t){return t.upper===void 0?!0:t.upperOpen?Z(e,t.upper)<0:Z(e,t.upper)<=0}function Oi(e,t){return Xh(e,t)&&Qh(e,t)}function Ma(e,t,i,o,s,c){if(!i||i.length===0)return e;var l=t.query.index,h=l.multiEntry,d=t.query.range,m=o.schema.primaryKey,g=m.extractKey,v=l.extractKey,_=(l.lowLevelIndex||l).extractKey,k=i.reduce(function(b,E){var S=b,I=[];if(E.type==="add"||E.type==="put")for(var A=new Ce,C=E.values.length-1;C>=0;--C){var P=E.values[C],O=g(P);if(!A.hasKey(O)){var R=v(P);(h&&ce(R)?R.some(function(N){return Oi(N,d)}):Oi(R,d))&&(A.addKey(O),I.push(P))}}switch(E.type){case"add":{var F=new Ce().addKeys(t.values?b.map(function(N){return g(N)}):b);S=b.concat(t.values?I.filter(function(N){var L=g(N);return F.hasKey(L)?!1:(F.addKey(L),!0)}):I.map(function(N){return g(N)}).filter(function(N){return F.hasKey(N)?!1:(F.addKey(N),!0)}));break}case"put":{var M=new Ce().addKeys(E.values.map(function(N){return g(N)}));S=b.filter(function(N){return!M.hasKey(t.values?g(N):N)}).concat(t.values?I:I.map(function(N){return g(N)}));break}case"delete":var j=new Ce().addKeys(E.keys);S=b.filter(function(N){return!j.hasKey(t.values?g(N):N)});break;case"deleteRange":var Y=E.range;S=b.filter(function(N){return!Oi(g(N),Y)});break}return S},e);return k===e?e:(k.sort(function(b,E){return Z(_(b),_(E))||Z(g(b),g(E))}),t.limit&&t.limit<1/0&&(k.length>t.limit?k.length=t.limit:e.length===t.limit&&k.length<t.limit&&(s.dirty=!0)),c?Object.freeze(k):k)}function Na(e,t){return Z(e.lower,t.lower)===0&&Z(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Zh(e,t,i,o){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var s=Z(e,t);if(s===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return s}function ep(e,t,i,o){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var s=Z(e,t);if(s===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return s}function tp(e,t){return Zh(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&ep(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function np(e,t,i,o){var s=Dt["idb://".concat(e,"/").concat(t)];if(!s)return[];var c=s.queries[i];if(!c)return[null,!1,s,null];var l=o.query?o.query.index.name:null,h=c[l||""];if(!h)return[null,!1,s,null];switch(i){case"query":var d=h.find(function(v){return v.req.limit===o.limit&&v.req.values===o.values&&Na(v.req.query.range,o.query.range)});if(d)return[d,!0,s,h];var m=h.find(function(v){var _="limit"in v.req?v.req.limit:1/0;return _>=o.limit&&(o.values?v.req.values:!0)&&tp(v.req.query.range,o.query.range)});return[m,!1,s,h];case"count":var g=h.find(function(v){return Na(v.req.query.range,o.query.range)});return[g,!!g,s,h]}}function rp(e,t,i,o){e.subscribers.add(i),o.addEventListener("abort",function(){e.subscribers.delete(i),e.subscribers.size===0&&ip(e,t)})}function ip(e,t){setTimeout(function(){e.subscribers.size===0&&kt(t,e)},3e3)}var op={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,i=J(J({},e),{transaction:function(o,s,c){var l=e.transaction(o,s,c);if(s==="readwrite"){var h=new AbortController,d=h.signal,m=function(g){return function(){if(h.abort(),s==="readwrite"){for(var v=new Set,_=0,k=o;_<k.length;_++){var b=k[_],E=Dt["idb://".concat(t,"/").concat(b)];if(E){var S=e.table(b),I=E.optimisticOps.filter(function(X){return X.trans===l});if(l._explicit&&g&&l.mutatedParts)for(var A=0,C=Object.values(E.queries.query);A<C.length;A++)for(var P=C[A],O=0,R=P.slice();O<R.length;O++){var F=R[O];co(F.obsSet,l.mutatedParts)&&(kt(P,F),F.subscribers.forEach(function(X){return v.add(X)}))}else if(I.length>0){E.optimisticOps=E.optimisticOps.filter(function(X){return X.trans!==l});for(var M=0,j=Object.values(E.queries.query);M<j.length;M++)for(var P=j[M],Y=0,N=P.slice();Y<N.length;Y++){var F=N[Y];if(F.res!=null&&l.mutatedParts)if(g&&!F.dirty){var L=Object.isFrozen(F.res),V=Ma(F.res,F.req,I,S,F,L);F.dirty?(kt(P,F),F.subscribers.forEach(function(oe){return v.add(oe)})):V!==F.res&&(F.res=V,F.promise=B.resolve({result:V}))}else F.dirty&&kt(P,F),F.subscribers.forEach(function(oe){return v.add(oe)})}}}}v.forEach(function(X){return X()})}}};l.addEventListener("abort",m(!1),{signal:d}),l.addEventListener("error",m(!1),{signal:d}),l.addEventListener("complete",m(!0),{signal:d})}return l},table:function(o){var s=e.table(o),c=s.schema.primaryKey,l=J(J({},s),{mutate:function(h){var d=W.trans;if(c.outbound||d.db._options.cache==="disabled"||d.explicit||d.idbtrans.mode!=="readwrite")return s.mutate(h);var m=Dt["idb://".concat(t,"/").concat(o)];if(!m)return s.mutate(h);var g=s.mutate(h);return(h.type==="add"||h.type==="put")&&(h.values.length>=50||fo(c,h).some(function(v){return v==null}))?g.then(function(v){var _=J(J({},h),{values:h.values.map(function(b,E){var S;if(v.failures[E])return b;var I=!((S=c.keyPath)===null||S===void 0)&&S.includes(".")?Rt(b):J({},b);return De(I,c.keyPath,v.results[E]),I})}),k=Ra(m,_,v);m.optimisticOps.push(k),queueMicrotask(function(){return h.mutatedParts&&cr(h.mutatedParts)})}):(m.optimisticOps.push(h),h.mutatedParts&&cr(h.mutatedParts),g.then(function(v){if(v.numFailures>0){kt(m.optimisticOps,h);var _=Ra(m,h,v);_&&m.optimisticOps.push(_),h.mutatedParts&&cr(h.mutatedParts)}}),g.catch(function(){kt(m.optimisticOps,h),h.mutatedParts&&cr(h.mutatedParts)})),g},query:function(h){var d;if(!uc(W,s)||!lc("query",h))return s.query(h);var m=((d=W.trans)===null||d===void 0?void 0:d.db._options.cache)==="immutable",g=W,v=g.requery,_=g.signal,k=np(t,o,"query",h),b=k[0],E=k[1],S=k[2],I=k[3];if(b&&E)b.obsSet=h.obsSet;else{var A=s.query(h).then(function(C){var P=C.result;if(b&&(b.res=P),m){for(var O=0,R=P.length;O<R;++O)Object.freeze(P[O]);Object.freeze(P)}else C.result=Rt(P);return C}).catch(function(C){return I&&b&&kt(I,b),Promise.reject(C)});b={obsSet:h.obsSet,promise:A,subscribers:new Set,type:"query",req:h,dirty:!1},I?I.push(b):(I=[b],S||(S=Dt["idb://".concat(t,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),S.queries.query[h.query.index.name||""]=I)}return rp(b,I,v,_),b.promise.then(function(C){return{result:Ma(C.result,h,S?.optimisticOps,s,b,m)}})}});return l}});return i}};function lr(e,t){return new Proxy(e,{get:function(i,o,s){return o==="db"?t:Reflect.get(i,o,s)}})}var Jt=(function(){function e(t,i){var o=this;this._middlewares={},this.verno=0;var s=e.dependencies;this._options=i=J({addons:e.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var c=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ie,dbReadyPromise:null,cancelOpen:ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};l.dbReadyPromise=new B(function(d){l.dbReadyResolve=d}),l.openCanceller=new B(function(d,m){l.cancelOpen=m}),this._state=l,this.name=t,this.on=Pn(this,"populate","blocked","versionchange","close",{ready:[Xi,ie]}),this.once=function(d,m){var g=function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];o.on(d).unsubscribe(g),m.apply(o,v)};return o.on(d,g)},this.on.ready.subscribe=La(this.on.ready.subscribe,function(d){return function(m,g){e.vip(function(){var v=o._state;if(v.openComplete)v.dbOpenError||B.resolve().then(m),g&&d(m);else if(v.onReadyBeingFired)v.onReadyBeingFired.push(m),g&&d(m);else{d(m);var _=o;g||d(function k(){_.on.ready.unsubscribe(m),_.on.ready.unsubscribe(k)})}})}}),this.Collection=dh(this),this.Table=uh(this),this.Transaction=wh(this),this.Version=Fh(this),this.WhereClause=vh(this),this.on("versionchange",function(d){d.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(d.oldVersion/10))}),this._maxKey=An(i.IDBKeyRange),this._createTransaction=function(d,m,g,v){return new o.Transaction(d,m,g,o._options.chromeTransactionDurability,v)},this._fireOnBlocked=function(d){o.on("blocked").fire(d),Gt.filter(function(m){return m.name===o.name&&m!==o&&!m._state.vcFired}).map(function(m){return m.on("versionchange").fire(d)})},this.use(qh),this.use(op),this.use(Yh),this.use(Vh),this.use(zh);var h=new Proxy(this,{get:function(d,m,g){if(m==="_vip")return!0;if(m==="table")return function(_){return lr(o.table(_),h)};var v=Reflect.get(d,m,g);return v instanceof tc?lr(v,h):m==="tables"?v.map(function(_){return lr(_,h)}):m==="_createTransaction"?function(){var _=v.apply(this,arguments);return lr(_,h)}:v}});this.vip=h,c.forEach(function(d){return d(o)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new G.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var i=this._versions,o=i.filter(function(s){return s._cfg.version===t})[0];return o||(o=new this.Version(t),i.push(o),i.sort(Th),o.stores({}),this._state.autoSchema=!1,o)},e.prototype._whenReady=function(t){var i=this;return this.idbdb&&(this._state.openComplete||W.letThrough||this._vip)?t():new B(function(o,s){if(i._state.openComplete)return s(new G.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){s(new G.DatabaseClosed);return}i.open().catch(ie)}i._state.dbReadyPromise.then(o,s)}).then(t)},e.prototype.use=function(t){var i=t.stack,o=t.create,s=t.level,c=t.name;c&&this.unuse({stack:i,name:c});var l=this._middlewares[i]||(this._middlewares[i]=[]);return l.push({stack:i,create:o,level:s??10,name:c}),l.sort(function(h,d){return h.level-d.level}),this},e.prototype.unuse=function(t){var i=t.stack,o=t.name,s=t.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(c){return s?c.create!==s:o?c.name!==o:!1})),this},e.prototype.open=function(){var t=this;return Nt(dt,function(){return Uh(t)})},e.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var t=this._state,i=Gt.indexOf(this);if(i>=0&&Gt.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new B(function(o){t.dbReadyResolve=o}),t.openCanceller=new B(function(o,s){t.cancelOpen=s}))},e.prototype.close=function(t){var i=t===void 0?{disableAutoOpen:!0}:t,o=i.disableAutoOpen,s=this._state;o?(s.isBeingOpened&&s.cancelOpen(new G.DatabaseClosed),this._close(),s.autoOpen=!1,s.dbOpenError=new G.DatabaseClosed):(this._close(),s.autoOpen=this._options.autoOpen||s.isBeingOpened,s.openComplete=!1,s.dbOpenError=null)},e.prototype.delete=function(t){var i=this;t===void 0&&(t={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",s=this._state;return new B(function(c,l){var h=function(){i.close(t);var d=i._deps.indexedDB.deleteDatabase(i.name);d.onsuccess=ae(function(){Kh(i._deps,i.name),c()}),d.onerror=Ve(l),d.onblocked=i._fireOnBlocked};if(o)throw new G.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(h):h()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return ge(this._allTables).map(function(i){return t._allTables[i]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Hh.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,i,o){var s=this,c=W.trans;(!c||c.db!==this||t.indexOf("!")!==-1)&&(c=null);var l=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var h,d;try{if(d=i.map(function(g){var v=g instanceof s.Table?g.name:g;if(typeof v!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return v}),t=="r"||t===Si)h=Si;else if(t=="rw"||t==xi)h=xi;else throw new G.InvalidArgument("Invalid transaction mode: "+t);if(c){if(c.mode===Si&&h===xi)if(l)c=null;else throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c&&d.forEach(function(g){if(c&&c.storeNames.indexOf(g)===-1)if(l)c=null;else throw new G.SubTransaction("Table "+g+" not included in parent transaction.")}),l&&c&&!c.active&&(c=null)}}catch(g){return c?c._promise(null,function(v,_){_(g)}):fe(g)}var m=ac.bind(null,this,h,d,c,o);return c?c._promise(h,m,"lock"):W.trans?Nt(W.transless,function(){return s._whenReady(m)}):this._whenReady(m)},e.prototype.table=function(t){if(!Re(this._allTables,t))throw new G.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e})(),sp=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ap=(function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,i,o){return this._subscribe(!t||typeof t=="function"?{next:t,error:i,complete:o}:t)},e.prototype[sp]=function(){return this},e})(),Cr;try{Cr={indexedDB:Ee.indexedDB||Ee.mozIndexedDB||Ee.webkitIndexedDB||Ee.msIndexedDB,IDBKeyRange:Ee.IDBKeyRange||Ee.webkitIDBKeyRange}}catch{Cr={indexedDB:null,IDBKeyRange:null}}function cp(e){var t=!1,i,o=new ap(function(s){var c=qi(e);function l(I){var A=Zt();try{c&&tn();var C=pt(e,I);return c&&(C=C.finally(mt)),C}finally{A&&en()}}var h=!1,d,m={},g={},v={get closed(){return h},unsubscribe:function(){h||(h=!0,d&&d.abort(),_&&yt.storagemutated.unsubscribe(E))}};s.start&&s.start(v);var _=!1,k=function(){return Ei(S)};function b(){return co(g,m)}var E=function(I){Mr(m,I),b()&&k()},S=function(){if(!(h||!Cr.indexedDB)){m={};var I={};d&&d.abort(),d=new AbortController;var A={subscr:I,signal:d.signal,requery:k,querier:e,trans:null},C=l(A);Promise.resolve(C).then(function(P){t=!0,i=P,!(h||A.signal.aborted)&&(m={},g=I,!Nd(g)&&!_&&(yt(Rn,E),_=!0),Ei(function(){return!h&&s.next&&s.next(P)}))},function(P){t=!1,["DatabaseClosedError","AbortError"].includes(P?.name)||h||Ei(function(){h||s.error&&s.error(P)})})}};return setTimeout(k,0),v});return o.hasValue=function(){return t},o.getValue=function(){return i},o}var At=Jt;Yt(At,J(J({},Pr),{delete:function(e){var t=new At(e,{addons:[]});return t.delete()},exists:function(e){return new At(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Bh(At.dependencies).then(e)}catch{return fe(new G.MissingAPI)}},defineClass:function(){function e(t){Fe(this,t)}return e},ignoreTransaction:function(e){return W.trans?Nt(W.transless,e):e()},vip:Vi,async:function(e){return function(){try{var t=zi(e.apply(this,arguments));return!t||typeof t.then!="function"?B.resolve(t):t}catch(i){return fe(i)}}},spawn:function(e,t,i){try{var o=zi(e.apply(i,t||[]));return!o||typeof o.then!="function"?B.resolve(o):o}catch(s){return fe(s)}},currentTransaction:{get:function(){return W.trans||null}},waitFor:function(e,t){var i=B.resolve(typeof e=="function"?At.ignoreTransaction(e):e).timeout(t||6e4);return W.trans?W.trans.waitFor(i):i},Promise:B,debug:{get:function(){return ze},set:function(e){za(e)}},derive:Xt,extend:Fe,props:Yt,override:La,Events:Pn,on:yt,liveQuery:cp,extendObservabilitySet:Mr,getByKeyPath:nt,setByKeyPath:De,delByKeyPath:Dd,shallowClone:$a,deepClone:Rt,getObjectDiff:lo,cmp:Z,asap:Ka,minKey:$i,addons:[],connections:Gt,errnames:Ji,dependencies:Cr,cache:Dt,semVer:Sa,version:Sa.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,i){return e+t/Math.pow(10,i*2)})}));At.maxKey=An(At.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(yt(Rn,function(e){if(!ft){var t;t=new CustomEvent(ji,{detail:e}),ft=!0,dispatchEvent(t),ft=!1}}),addEventListener(ji,function(e){var t=e.detail;ft||ho(t)}));function ho(e){var t=ft;try{ft=!0,yt.storagemutated.fire(e),uo(e,!0)}finally{ft=t}}var ft=!1,lt,Gi=function(){};typeof BroadcastChannel<"u"&&(Gi=function(){lt=new BroadcastChannel(ji),lt.onmessage=function(e){return e.data&&ho(e.data)}},Gi(),typeof lt.unref=="function"&&lt.unref(),yt(Rn,function(e){ft||lt.postMessage(e)}));typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Jt.disableBfCache&&e.persisted){ze&&console.debug("Dexie: handling persisted pagehide"),lt?.close();for(var t=0,i=Gt;t<i.length;t++){var o=i[t];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!Jt.disableBfCache&&e.persisted&&(ze&&console.debug("Dexie: handling persisted pageshow"),Gi(),ho({all:new Ce(-1/0,[[]])}))}));B.rejectionMapper=jd;za(ze);var po=class{getDB(){let t=new Jt("FireShotDB");return t.version(1).stores({captures:`
              ++id,
              time,
              url,
              title`,tiles:"++id, parentId"}),t}async createNewEntry(){return await this.getDB().captures.add({time:0})}async addTile(t,i){await this.getDB().tiles.add({parentId:t,blob:i})}async commitEntry(t,i,o,s,c){await this.getDB().captures.update(t,{time:i,url:o,title:s,metadata:c})}async cleanup(){ir()("DB cleanup...");let i=await this.getDB().captures.where("time").equals(0).primaryKeys();await this.deleteCaptures(i)}async deleteCaptures(t){let i=this.getDB();await i.tiles.where("parentId").anyOf(t).delete(),await i.captures.bulkDelete(t)}async deleteOlderThanGivenDays(t){ir()("Performing database cleanup...");let i=this.getDB(),o=new Date;o.setDate(o.getDate()-t);let s=await i.captures.where("time").below(o).primaryKeys();s.length>0?(console.log(`Removing ${s.length} items`),await this.deleteCaptures(s)):ir()("Nothing to do.")}async getCapture(t){try{let i=this.getDB();return{...await i.captures.get(t),tiles:(await i.tiles.where("parentId").equals(t).sortBy("id")).map(o=>o.blob)}}catch(i){return console.error(i),null}}async getAllCaptures(){return await this.getDB().captures.toArray()}},Mn=new po;var fc="image/png",Nr=class{#i=0;#e=0;#a=Number.MAX_SAFE_INTEGER;#y=Number.MAX_SAFE_INTEGER;#v=0;#h=0;#p;#u=0;#m=0;#b=0;#l=-1;#n=0;#r=0;#d=[];#t=null;#s=null;#f=null;#o;#c=null;#g=0;dbError=!1;constructor(){}async P(){await jt(async()=>{await Mn.cleanup()})()}#S(){this.#t=new OffscreenCanvas(this.#n,U.W),this.#t.aTag=1,this.#s=new OffscreenCanvas(this.#n,U.W),this.#s.aTag=2,this.#f=this.#t.getContext("2d",{alpha:!1,willReadFrequently:!1}),this.#f.aTag=1,this.#c=this.#s.getContext("2d",{alpha:!1,willReadFrequently:!1}),this.#c.aTag=2}async#w(t){await jt(async()=>{this.#l<0&&(this.#l=await Mn.createNewEntry()),this.#m+=t.size,Et()&&(t=await t.arrayBuffer()),await Mn.addTile(this.#l,t),++this.#b},()=>this.dbError=!0)()}async#_(){at("swapActiveContext"),this.#g=0,this.#o+=this.#t.height,await this.#w(await this.#t.convertToBlob({type:fc})),[this.#t,this.#s]=[this.#s,this.#t],[this.#f,this.#c]=[this.#c,this.#f],ct("swapActiveContext")}async#x(t){let i=t.x,o=t.y,s=this.#h===t.y||this.#u===0,c=t.metrics.div,l=t.metrics.left,h=t.metrics.top,d=t.metrics.crop,m=t.metrics.cropLeft||0,g=t.metrics.cropTop||0,v=t.metrics.cropRight||0,_=t.metrics.cropBottom||0,k=t.metrics.stickyHdrHeight,{w:b,h:E}=va(t.dataurl),[S,I]=c?[t.metrics.cw,t.metrics.ch]:[b,E];this.#u===0&&(this.#v=t.x,this.#h=t.y),this.#u=this.#u+1,this.#y=Math.min(this.#y,t.y),this.#e=Math.max(this.#e,t.y),this.#n===0&&(this.#n=this.#i+S-this.#a-(d?m:0),d&&(this.#n=Math.min(this.#n,v-m)),this.#S(),this.#o=0);let A=s?0:k,C=i-this.#v-m,P=o-this.#h-g+A,O=c?I-A:I-A-h,R=P+O;this.#r=Math.max(this.#r,R),d&&(this.#r=Math.min(this.#r,Math.floor(_-g))),at("fetch dataurl");let F=await fetch(t.dataurl);if(!F.ok)throw new Error("failed to preload image chunk");ct("fetch dataurl"),at("createImageBitmap");let M=await createImageBitmap(await F.blob());ct("createImageBitmap"),P-this.#o>=this.#t.height&&await this.#_();let j=Math.max(S,b)-l,Y=Math.max(I,E)-(h+A);this.#f.drawImage(M,l,h+A,j,Y,C,P-this.#o,j,Y),this.#r-this.#o>=this.#t.height&&(this.#g=this.#r-this.#o-this.#t.height,this.#c.drawImage(M,l,h+A,j,Y,C,P-this.#o-this.#t.height,j,Y))}async#I(t){at("commitDBRecord");let i=ue(U.g,2)-1;await jt(async()=>{let o={calculatedHeight:Math.floor(this.#r),calculatedWidth:this.#n,blobsSize:this.#m,totalTiles:this.#b,pageUrl:t.url,...t.savedCapParamsForDebugging};await Mn.commitEntry(this.#l,new Date(t.created),t.url,t.title,{n:i,size:this.#m,width:this.#n,height:Math.floor(this.#r),cbb:t.canBeBetter,debug:o,links:t.links,words:t.words})},()=>this.dbError=!0)(),ct("commitDBRecord")}async#E(){this.#n===0&&this.#d.forEach(t=>{this.#a=Math.min(this.#a,t.x),this.#i=Math.max(this.#i,t.x)});for(let t of this.#d)await this.#x(t);this.#d.length=0}async ue(t){this.#d.push(t),typeof this.#p>"u"&&(this.#p=t.y),this.#p!==t.y&&await this.#E()}async ze(t){return at("Finalize"),this.#u===0&&await this.#E(),this.#g>0&&await this.#_(),this.#s.height=this.#r-this.#o,this.#c.drawImage(this.#t,0,0,this.#n,this.#r-this.#o,0,0,this.#n,this.#r-this.#o),await this.#w(await this.#s.convertToBlob({type:fc})),this.#t.width=1,this.#t.height=1,this.#s.width=1,this.#s.height=1,await this.#I(t),q("tiles created")(),ct("Finalize"),this.#l}};function up(){let e=null,t=null,i=null;function o(){re(U.i,!0),re(U.t,!0)}async function s(){t=new Nr,await t.P(),i=null}async function c(h){i?i=i.then(()=>t.ue(h)):i=t.ue(h)}async function l(h){try{if(h.rows===0)return;await i;let d=await t.ze(h);if(t.dbError){hc(!0);return}t=null,i=null,le&&at("captureDone");let m=[U.R,U.p].indexOf(h.action)!==-1,g;if(m){let _=btoa(JSON.stringify({action:h.action,folder:h.overrideFolder||"",context:h.contextId}));g={url:`fsCaptured.html?id=${d}&params=${_}`,active:!0}}else g={url:`fsCaptured.html?id=${d}`,windowId:h.tab.windowId,index:h.tab.incognito?void 0:h.tab.index+1,openerTabId:h.tab.incognito?void 0:h.tab.id},ue(U._e)!=="true"&&(delete g.index,Ue()&&delete g.openerTabId);if(Ue()&&h.tab.incognito&&!h.justStore){let _=(await browser.windows.getAll({windowTypes:["normal"]})).filter(b=>!b.incognito),k;if(_.length>0)k=_[0],await browser.windows.update(k.id,{focused:!0});else{k=await browser.windows.create({incognito:!1,focused:!0,allowScriptsToClose:!0});let b=await browser.tabs.query({windowId:k.id});if(b?.length>0){let E=b[0];setTimeout(()=>browser.tabs.remove(E.id),1e3)}}g.windowId=k.id}let v=_=>new Promise(k=>{chrome.tabs.create(_,b=>{chrome.runtime.lastError?(delete _.index,delete _.openerTabId,chrome.tabs.create(_,k)):k(b)})});h.justStore||await v(g),le&&ct("captureDone")}finally{e({topic:"processingFinished"})}}return{init:function(h){e=h},launchJSON:function(h){switch(h.JSONCommand){case"captureInit":return s();case"captureTabPNG":c(h);break;case"captureDone":return l(h);case"activateFireShot":o();break}}}}var dc=new up;function lp(){return rr()?wn:dc}function er(e,t,i){if(typeof wn>"u"){console.error("This method should be called only from the Service worker.");return}let o;typeof e=="object"?(o=e,e=t,t=i):o=lp();try{let s=t||{},c=e;if(s.JSONCommand=c,le)if(s.dataurl){let l=s.dataurl;s.dataurl="<cut>",q("plugin command: "+c+" : "+JSON.stringify(s))(),s.dataurl=l}else q("plugin command: "+c+" : "+JSON.stringify(s).substring(0,2e3))();return o.launchJSON(s)}catch(s){return It(s.message),!1}}function hc(e){chrome.tabs.create({url:`fsHistory.html${e?"?cleanup=1":""}`})}function pc(e){bn(`https://getfireshot.com/buy.php?browser=${pi()}${e?"&SRC="+e:""}&ver=${st().extVersionFull}`)}function mc(){Zn()?(Ue()?chrome.windows:chrome.tabs).create({url:"fsNativeInstall.html"}):fp()}function fp(){new Date>new Date(2026,1,15)?alert("This beta preview period has ended. Please visit the purchase page to get the full version of FireShot Pro."):(re(U.t,"true"),le||dp())}function dp(){bn("https://getfireshot.com/beta-pro.php?browser="+pi())}document.addEventListener("DOMContentLoaded",()=>{let e;function t(d){return document.getElementById(d)}function i(){let d=JSON.parse(ue(U.q,"{}"));for(let m in d)try{let g=t(m);g.tagName==="INPUT"&&g.type==="checkbox"?g.checked=d[m]:g.tagName==="TEXTAREA"?g.value=d[m].trim()===""?"":d[m].trim()+`
`:g.value=d[m]}catch(g){console.error(`Error for key=${m}: ${g.message}`)}d.prefBatchURLs===void 0&&(t("prefBatchURLs").value=`amazon.com
youtube.com/gaming
getfireshot.com/buy.php
`)}function o(){let d={};return document.querySelectorAll("textarea, input[type='hidden'], input[type='checkbox'], select").forEach(m=>d[m.id]=m.type==="checkbox"?m.checked:m.value),d}function s(d){let m={};return document.querySelectorAll("textarea, input[type='hidden'], input[type='checkbox'], select").forEach(g=>m[g.id]=g.type==="checkbox"?g.checked:g.value),re(U.q,JSON.stringify(d)),m}function c(){t("btnStart").addEventListener("click",async()=>{if(s(o()),Ue()||Et()){await ai().executeBatch(o()),window.close();return}let d={permissions:["tabs","downloads"],origins:["<all_urls>"]};await ai().addTaskOnPermissionGranted(d,{method:"executeBatch",args:[o()]}),chrome.permissions.request(d)}),t("advanced").addEventListener("click",()=>{t("prefBatchAdvancedFeaturesShown").checked=!t("prefBatchAdvancedFeaturesShown").checked,l()}),t("btnConfigurePDF").addEventListener("click",()=>{bn("fsPDFSettings.html?close=1"),window.close()}),t("prefBatchURLs").addEventListener("input",l),t("prefBatchMode").addEventListener("change",l),t("prefBatchFormat").addEventListener("change",l),document.querySelectorAll("[rel=command]").forEach(d=>d.addEventListener("click",async m=>{switch(m.currentTarget.id){case"lnkTryPro":(await Ze())?.ce()?pc("Capturelist_SuspendedService"):(mc(),window.close());break}}))}function l(){e||(t("modeEntire").disabled=!0,t("prefBatchMode").value="visible",t("liteWarning").style.display="block"),t("prefBatchAdvancedFeaturesShown").checked?t("advanced").classList.add("active"):t("advanced").classList.remove("active");let d=t("prefBatchURLs"),m=d.value.trim().split(`
`).filter(g=>g.trim().length>0).length;d.scrollWidth>d.clientWidth?t("totalValue").classList.add("shiftedY"):t("totalValue").classList.remove("shiftedY"),t("totalURLs").textContent=m,t("btnStart").disabled=m===0,m>10?(t("left").style["min-height"]="230px",t("sleepModeWarning").style.display="flex"):(t("left").style["min-height"]="",t("sleepModeWarning").style.display="none"),t("prefBatchScrollSpeed").disabled=t("prefBatchMode").value==="visible",t("btnConfigurePDF").style.display=e&&t("prefBatchFormat").value==="pdf"?"block":"none"}function h(){e=ya();let d=t("prefBatchURLs");d.placeholder=d.placeholder.replace(/\\n/g,`
`),Ue()&&document.querySelectorAll("input, select").forEach(m=>m.classList.add("fxPaddingDisabled")),i(),c(),l()}try{ga()}catch(d){It(d.message)}Xe.ensureLoaded().then(h)});})();
//# sourceMappingURL=fsCaptureList.js.map

//# debugId=a53c1aca-929d-5ce4-80d6-433c3383bb71
