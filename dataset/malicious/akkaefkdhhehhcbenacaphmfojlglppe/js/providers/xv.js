const XVProvider=class{constructor(a){this.c=a,this.code="xv",this.addVideo()}addVideo(){this.getVideoData(a=>{a&&(this.videos=a,this.setBadge())})}getVideoData(a){let b,c=!1,d=document.location.href,e=document.title;return c!=d&&(c=d,chrome.runtime.sendMessage({action:"getTabId"},function(a){a&&(this.tabId=a)})),b=this.detectPage(this.tabId),a(b)}detectPage(){let a=[],b=document.documentElement.outerHTML;for(let c=0;3>c;c++){for(let d,e=0;;){if(d=this.fetchUrls(b,2==c?".mov":1==c?".flv":".mp4",e),!d||!d.start)break;e=d.start,a.push({url:d.mp4,title:document.title,quality:"mp4"})}this.videos=a;const d=this.videos.filter(a=>{const b=a.url.includes("banners");if(!b)return a});this.videos=d}return this.videos}setBadge(){chrome.runtime.sendMessage({action:"setBadge",value:this.videos.length})}fetchUrls(a,b,d){for(;;){let e=a.indexOf(b,d);if(0>e)return!1;d=e+b.length;let f=a.indexOf("\"",e),g=a.indexOf("'",e),h=!1;if(f>e&&g>e)h=f>g?"'":"\"",f>g&&(f=g);else if(f>e)h="\"";else if(g>e)h="'",f=g;else continue;let c=600<f?f-600:0,i=a.substr(c,f-c);if(g=i.lastIndexOf(h),!(0>g)){if(i=i.substr(g+1),0==i.indexOf("http://")||0==i.indexOf("https://"))return{mp4:i,start:f};if(0==i.indexOf("http:\\/\\/")||0==i.indexOf("https:\\/\\/"))return i=i.replace(/\\\//g,"/"),{mp4:i,start:f};if(".m3u8"==b&&(0==i.indexOf("\\/")||0==i.indexOf("/")))return i=i.replace(/\\\//g,"/"),{mp4:i,start:f};continue}}}};