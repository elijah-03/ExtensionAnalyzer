if("function"!=typeof require){var require=function(e){if(!(e in require.scopes)){let t={exports:{}};require.scopes[e]=require.modules[e](t,t.exports)}return require.scopes[e]};require.modules=Object.create(null),require.scopes=Object.create(null)}require.modules.common=function(e,t){"use strict";return t.filterToRegExp=function(e){return e.replace(/\*+/g,"*").replace(/\^\|$/,"^").replace(/\W/g,"\\$&").replace(/\\\*/g,".*").replace(/\\\^/g,"(?:[\\x00-\\x24\\x26-\\x2C\\x2F\\x3A-\\x40\\x5B-\\x5E\\x60\\x7B-\\x7F]|$)").replace(/^\\\|\\\|/,"^[\\w\\-]+:\\/+(?!\\/)(?:[^\\/]+\\.)?").replace(/^\\\|/,"^").replace(/\\\|$/,"$").replace(/^(\.\*)/,"").replace(/(\.\*)$/,"")},t.splitSelector=function(e){if(-1==e.indexOf(","))return[e];let t=[],s=0,r=0,l="";for(let i=0;i<e.length;i++){let n=e[i];"\\"==n?i++:n==l?l="":""==l&&('"'==n||"'"==n?l=n:"("==n?r++:")"==n?r=Math.max(0,r-1):","==n&&0==r&&(t.push(e.substring(s,i)),s=i+1))}return t.push(e.substring(s)),t},e.exports},require.modules.content_elemHideEmulation=function(e,t){"use strict";const{filterToRegExp:s,splitSelector:r}=require("common");let l=3e3;const i=/:-abp-([\w-]+)\(/i;function n(e,t){if(null==e)return null;if(!e.parentElement){let e=":root";return t&&(e+=" > "+t),e}let s=function(e){let{children:t}=e.parentNode;for(let s=0;s<t.length;s++)if(t[s]==e)return s+1;return 0}(e);if(s>0){let r=`${e.tagName}:nth-child(${s})`;return t&&(r+=" > "+t),n(e.parentElement,r)}return t}function o(e){let t=[];for(let s=0;s<e.style.length;s++){let r=e.style.item(s),l=e.style.getPropertyValue(r),i=e.style.getPropertyPriority(r);t.push(`${r}: ${l}${i?" !"+i:""};`)}return t.sort(),{style:t.join(" "),subSelectors:r(e.selectorText)}}function*u(e,t,s,r,l){if(t>=e.length)yield s;else{for(let[i,n]of e[t].getSelectors(s,r,l))null==i?yield null:yield*u(e,t+1,i,n,l);yield null}}function c(e){this._selector=e}c.prototype={*getSelectors(e,t,s){yield[e+this._selector,t]}};const h=/[\s>+~]$/,d=/^[>+~]/;function f(e){this._innerSelectors=e}function a(e){this._text=e}function p(e){let t;t=e.length>=2&&"/"==e[0]&&"/"==e[e.length-1]?e.slice(1,-1).replace("\\x7B ","{").replace("\\x7D ","}"):s(e),this._regexp=new RegExp(t,"i")}function g(e){return e.selectors.some((e=>e.preferHideWithSelector))&&!e.selectors.some((e=>e.requiresHiding))}function y(e,t,s,r){this.window=e,this.getFiltersFunc=t,this.addSelectorsFunc=s,this.hideElemsFunc=r,this.observer=new e.MutationObserver(this.observe.bind(this))}return f.prototype={requiresHiding:!0,get dependsOnStyles(){return this._innerSelectors.some((e=>e.dependsOnStyles))},*getSelectors(e,t,s){for(let r of this.getElements(e,t,s))yield[n(r,""),r]},*getElements(e,t,s){let r=!e||h.test(e)?e+"*":e,l=t.querySelectorAll(r);for(let e of l){let t=u(this._innerSelectors,0,"",e,s);for(let s of t)if(null!=s){d.test(s)&&(s=":scope"+s);try{e.querySelector(s)&&(yield e)}catch(e){}}else yield null;yield null}}},a.prototype={requiresHiding:!0,*getSelectors(e,t,s){for(let r of this.getElements(e,t,s))yield[n(r,""),t]},*getElements(e,t,s){let r=!e||h.test(e)?e+"*":e,l=t.querySelectorAll(r);for(let e of l)e.textContent.includes(this._text)?yield e:yield null}},p.prototype={preferHideWithSelector:!0,dependsOnStyles:!0,*findPropsSelectors(e,t,s){for(let r of e)if(s.test(r.style))for(let e of r.subSelectors){e.startsWith("*")&&!h.test(t)&&(e=e.substr(1));let s=e.lastIndexOf("::");-1!=s&&(e=e.substr(0,s)),yield t+e}},*getSelectors(e,t,s){for(let r of this.findPropsSelectors(s,e,this._regexp))yield[r,t]}},y.prototype={isSameOrigin(e){try{return new URL(e.href).origin==this.window.location.origin}catch(e){return!0}},parseSelector(e){if(0==e.length)return[];let t=i.exec(e);if(!t)return[new c(e)];let s=[];t.index>0&&s.push(new c(e.substr(0,t.index)));let r=function(e,t){let s=1,r=null,l=t;for(;l<e.length;l++){let t=e[l];if("\\"==t)l++;else if(r)t==r&&(r=null);else if("'"==t||'"'==t)r=t;else if("("==t)s++;else if(")"==t&&(s--,0==s))break}return s>0?null:{text:e.substring(t,l),end:l}}(e,t.index+t[0].length);if(!r)return this.window.console.error(new SyntaxError(`Failed to parse Adblock Plus selector ${e} due to unmatched parentheses.`)),null;if("properties"==t[1])s.push(new p(r.text));else if("has"==t[1]){let e=this.parseSelector(r.text);if(null==e)return null;s.push(new f(e))}else{if("contains"!=t[1])return this.window.console.error(new SyntaxError(`Failed to parse Adblock Plus selector ${e}, invalid pseudo-class :-abp-${t[1]}().`)),null;s.push(new a(r.text))}let l=this.parseSelector(e.substr(r.end+1));return null==l?null:(s.push(...l),1==s.length&&s[0]instanceof a?(this.window.console.error(new SyntaxError(`Failed to parse Adblock Plus selector ${e}, can't have a lonely :-abp-contains().`)),null):s)},_addSelectors(e,t){let s=[],r=[],l=[],i=[],n=[],c=!!e;e||(e=this.window.document.styleSheets);for(let t=0;t<e.length;t++){let s=e[t];if(!this.isSameOrigin(s))continue;let r=s.cssRules;if(r)for(let e of r)e.type==e.STYLE_RULE&&n.push(o(e))}let{document:h}=this.window,d=this.patterns.slice(),f=null,a=null,p=()=>{let e=this.window.performance.now();if(!f){if(!d.length)return this.addSelectorsFunc(s,r),this.hideElemsFunc(l,i),void("function"==typeof t&&t());if(f=d.shift(),c&&!f.selectors.some((e=>e.dependsOnStyles)))return f=null,p();a=u(f.selectors,0,"",h,n)}for(let t of a){if(null!=t)if(g(f))s.push(t),r.push(f.text);else for(let e of h.querySelectorAll(t))l.push(e),i.push(f.text);if(this.window.performance.now()-e>50)return void this.window.setTimeout(p,0)}return f=null,p()};p()},get MIN_INVOCATION_INTERVAL(){return l},set MIN_INVOCATION_INTERVAL(e){l=e},_filteringInProgress:!1,_lastInvocation:-l,_scheduledProcessing:null,queueFiltering(e){let t=()=>{if(this._lastInvocation=this.window.performance.now(),this._filteringInProgress=!1,this._scheduledProcessing){let e=this._scheduledProcessing.stylesheets;this._scheduledProcessing=null,this.queueFiltering(e)}};this._scheduledProcessing?e?this._scheduledProcessing.stylesheets&&this._scheduledProcessing.stylesheets.push(...e):this._scheduledProcessing.stylesheets=null:this._filteringInProgress?this._scheduledProcessing={stylesheets:e}:this.window.performance.now()-this._lastInvocation<l?(this._scheduledProcessing={stylesheets:e},this.window.setTimeout((()=>{let e=this._scheduledProcessing.stylesheets;this._filteringInProgress=!0,this._scheduledProcessing=null,this._addSelectors(e,t)}),l-(this.window.performance.now()-this._lastInvocation))):(this._filteringInProgress=!0,this._addSelectors(e,t))},onLoad(e){let t=e.target.sheet;t&&this.queueFiltering([t])},observe(e){this.queueFiltering()},apply(){this.getFiltersFunc((e=>{this.patterns=[];for(let t of e){let e=this.parseSelector(t.selector);null!=e&&e.length>0&&this.patterns.push({selectors:e,text:t.text})}if(this.patterns.length>0){let{document:e}=this.window;this.queueFiltering(),this.observer.observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),e.addEventListener("load",this.onLoad.bind(this),!0)}}))}},t.ElemHideEmulation=y,e.exports};