ExcludeFilter=function(){var e=require("filterNotifier").FilterNotifier,r=function(r){for(var i=r.subscriptions.slice(),t=0;t<i.length;t++){var l=i[t],s=[],f=-1;do{(f=l.filters.indexOf(r,f+1))>=0&&s.push(f)}while(f>=0);for(var n=s.length-1;n>=0;n--){var o=s[n];if(l.filters[o]===r){if(l.filters.splice(o,1),l.filters.indexOf(r)<0)(f=r.subscriptions.indexOf(l))>=0&&r.subscriptions.splice(f,1);e.triggerListeners("filter.removed",r,l,o)}}}};return e.addListener((function i(t,l,s,f){if("save"===t){var n="exclude_filters";chrome.storage.local.get(n,(function(t){if(t.exclude_filters)for(var l=t.exclude_filters.split("\n"),s=0;s<l.length;s++){var f=l[s];if(f.length>0){var n=parseFilter(f);n.filter&&r(n.filter)}}else e.removeListener(i)}))}})),{setExcludeFilters:function(e){for(var i=(e=e.trim()).split("\n"),t=[],l=0;l<i.length;l++){var s=i[l];if((s=s.trim()).length>0){var f=parseFilter(s);f.filter&&(t.push(f.filter),r(f.filter))}}t.length>0?ext.storage.set("exclude_filters",t.join("\n")):ext.storage.remove("exclude_filters")}}}();