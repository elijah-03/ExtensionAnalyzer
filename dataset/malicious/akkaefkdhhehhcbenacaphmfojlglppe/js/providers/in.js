const INProvider=class extends AbstractProvider{search(){$(".v1Nh3.kIKUG").not("."+INIT_CLASS).each((a,b)=>{const c=$(b),d=c.children("a").attr("href");d&&!this.ids[d]&&this.addVideo(d),c.addClass(INIT_CLASS)}),$("article video").not("."+INIT_CLASS).each((a,b)=>{const c=$(b),d=c.closest("article").find("a.c-Yi7").attr("href");d&&!this.ids[d]&&this.addVideo(d),c.addClass(INIT_CLASS)})}addVideo(a){this.ids[a]=!0,this.getVideoData(a,a=>{a&&(this.videos=this.videos.concat(a),this.setBadge())})}getVideoData(a,b){chrome.runtime.sendMessage({action:"ajaxGet",url:`https://www.instagram.com`+a},c=>{const d=this.getVideoTitle(c),e=this.getVideoUrl(c);e||b(null),b([{title:d,url:e,vid:a,provider:"in",quality:"640p"}]),"function"==typeof this.mediaUpdateListener&&this.mediaUpdateListener({videos:this.videos})})}getVideoTitle(a){const b=a.match(/<title>([\s\S]+?)<\/title>/);return b&&b[1]?b[1]:""}getVideoUrl(a){const b=a.match(/"video_url"\s?:\s?\"([^",]+)\"/mi);return b&&b[1]?b[1].replace(/\\u0026/ig,"&"):null}itinializeMessageListeners(){chrome.runtime.onMessage.addListener(a=>{"pageUpdated"===a.action&&($(`.${INIT_CLASS}`).removeClass(INIT_CLASS),this.videos=[],this.setBadge(),this.ids={},this.passMediaBack({videos:this.videos}))})}registerMediaUpdateListener(a){this.mediaUpdateListener=a}};