function top_open_whitelist_ui(){if(may_open_dialog_ui){may_open_dialog_ui=!1;var e=getUnicodeDomain(document.location.host);SAFARI&&""===e&&0===document.location.href.indexOf("feed:https")&&(e=parseUri(document.location.pathname).host),BGcall("emitPageBroadcast",{fn:"send_content_to_back",options:{}}),load_jquery_ui((function(){if($("frameset").length>=1)return alert(translate("wizardcantrunonframesets")),may_open_dialog_ui=!0,void $(".adblock-ui-stylesheet").remove();var t=translate("buttonexclude"),a={};a[t]={text:t,class:"adblock_default_button",click:function(){var e="@@||"+u()+"$document";BGcall("addCustomFilter",e,(function(){$("#reload_page").is(":checked")?document.location.reload():(may_open_dialog_ui=!0,$(".adblock-ui-stylesheet").remove(),i.remove())}))}},a[translate("buttoncancel")]=function(){i.dialog("close")};var i=$("<div>").append("<span>"+translate("adblock_wont_run_on_pages_matching")+"</span>").append('<br/><br/><i id="domainpart"></i><i id="pathpart"></i>').append('<br/><br/><br/><span id="whitelister_dirs">'+translate("you_can_slide_to_change")+"</span>").append('<br/><span id="modifydomain">'+translate("modifydomain")+'<input id="domainslider" type="range" min="0" value="0"/></span>').append('<span id="modifypath">'+translate("modifypath")+'<input id="pathslider" type="range" min="0" value="0"/></span>').append('<br/><input type="checkbox" id="reload_page" checked/><label style="display: inline;" for="reload_page">'+translate("reloadpageafterwhitelist")+"</label>").dialog({title:translate("whitelistertitle2"),dialogClass:"adblock-whitelist-dialog",width:600,minHeight:130,buttons:a,close:function(){may_open_dialog_ui=!0,$(".adblock-ui-stylesheet").remove(),i.remove()}});changeTextDirection($("body .adblock-whitelist-dialog")),$(".adblock-whitelist-dialog").parent().css({position:"relative"}),$(".adblock-whitelist-dialog").css({top:200,left:200,position:"fixed"});var n=parseUri.secondLevelDomainOnly(e,!0),o=e.substr(0,e.lastIndexOf(n)).split(".");o.splice(o.length-1,1,n);var l=document.location.pathname.match(/(.*?)(\/?)(\?|$)/),d=l[1].split("/"),r=1===o.length,s=/^(\d+\.){3}\d+$/.test(e),p=!(r||s);$("#modifydomain",i).toggle(p);var c=!!l[1];function m(){u(!0)}function u(e){var t="",a=$("#domainslider",i)[0].valueAsNumber,n=$("#pathslider",i)[0].valueAsNumber;e&&0!=a&&(t="*.");for(var r=a;r<=o.length-2;r++)t+=o[r]+".";t+=o[o.length-1];for(r=1;r<=n;r++)t+="/"+d[r];if(d.length==n+1&&l[1]?l[2]&&(t+=l[2]):(t+="/",e&&(t+="*")),!e)return t;for((t=t.replace(/(\/[^\/]{6})[^\/]{3,}([^\/]{6})/g,"$1...$2")).indexOf("/")>30&&t.length>=60&&(t=t.replace(/^([^\/]{20})[^\/]+([^\/]{6}\/)/,"$1...$2"));t.length>=60;)t=t.replace(/(\/.{4}).*?\/.*?(.{4})(?:\/|$)/,"$1...$2/");var s=t.match(/^[^\/]+/)[0],p=t.match(/\/.*$/)[0];$("#domainpart",i).text(s),$("#pathpart",i).text(p)}$("#modifypath",i).toggle(c),$("#whitelister_dirs",i).toggle(p||c),$("#domainslider",i).attr("max",Math.max(o.length-1,1)),$("#pathslider",i).attr("max",Math.max(d.length-1,1)),$("#pathslider, #domainslider",i).on("input change",(function(){m()})),m(),bind_enter_click_to_default()}))}}"undefined"==typeof may_open_dialog_ui&&(may_open_dialog_ui=!0);