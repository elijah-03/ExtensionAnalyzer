try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="581e3899-199c-4f72-89e8-f5d60bd7e2d0",e._sentryDebugIdIdentifier="sentry-dbid-581e3899-199c-4f72-89e8-f5d60bd7e2d0")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"4.43.1"};(()=>{"use strict";var e,t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function o(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var i="chrome-active/user/closed_classic_quillbot",s="chrome-active/system/cloudflare_bot_detected",a="EXTENSION",c="GC",l="GENERATIVE_AI",u="PPHR",d=(o(o(o(o(o(o(o(o(o(o(e={},"lapr/system/dictionary_add_failure",c),"lapr/system/dictionary_add_success",c),"lapr/user/clicked_dictionary_add",c),"chrome-active/system/clicked_verify_bot_prompt",a),"chrome-active/system/clicked_privacy_prompt",a),"lapr/user/clicked_suggestions_edit",c),"chrome-active/user/discarded_text",l),"chrome-active/user/drafted_email",l),"chrome-active/user/edited_prompt_header",l),"chrome-active/user/inserted_text",l),o(o(o(o(o(o(o(o(o(o(e,"chrome-active/user/modified_output",l),"chrome-active/user/regenrated_output",l),"chrome-active/user/regenrated_subject_line",l),"chrome-active/system/extension_rendered",a),"chrome-active/system/shown_verify_bot_prompt",a),"chrome-active/system/shown_onboarding_helper",a),"pphr/system/shown_premium_modal",a),"chrome-active/system/shown_privacy_prompt",a),"chrome-active/system/unsupported_editor",a),"lapr/system/grammar_toggle_failure",c),o(o(o(o(o(o(o(o(o(o(e,"lapr/system/suggestions_edit_fail",c),"lapr/system/grammar_toggle_success",c),"lapr/system/suggestions_edit_success",c),"chrome-active/user/campaign_auth_premium_activated",a),"chrome-active/user/changed_ext_setting",a),"grmr/user/clicked_correct_all_button",c),"grmr/user/clicked_correct_error",c),"lapr/user/clicked_correct_suggested_word",c),"grmr/user/clicked_ignore_error",c),"chrome-active/user/clicked_like_button",a),o(o(o(o(o(o(o(o(o(o(e,"chrome-active/user/clicked_popup",a),i,a),"chrome-active/user/dismissed_onboarding_helper",a),"chrome-active/user/installed_extension",a),"chrome-active/user/loginSuccess",a),"chrome-active/user/logoutSuccess",a),"pphr/user/navigated_to_paraphraser",u),"comn/user/navigated_to_quillbot",u),"chrome-active/user/opened_classic_quillbot",a),"grmr/user/opened_correction_card",c),o(o(e,"pphr/user/selected_sentence_from_beams",u),"chrome-active/user/updated_extension",a),"TRACKING"),h="BUG_REPORTER",f="GET_SELECTION_ALL_FRAMES_IN_TAB";let p,_,b;var m,v,y,g,E,w,O,S,T,R,I,C,A,k,N,x,D,P,U,L,M,j,G,F,H,B,z;function q(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Z=function(){return!!e})()}var Y=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(){var e,t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=arguments,t=X(t=r),V(e=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,Z()?Reflect.construct(t,n||[],X(this).constructor):t.apply(this,n)),"socket",null),V(e,"url",""),V(e,"onMessageCallback",function(){}),V(e,"onCloseHandler",function(){}),V(e,"onErrorHandler",function(){}),V(e,"isOpen",function(){var t;return(null==(t=e.socket)?void 0:t.readyState)===WebSocket.OPEN}),e}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&W(r,e),t=[{key:"closeSocket",value:function(e){if(e)try{e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null,e.readyState!==WebSocket.CLOSED&&e.close()}catch(e){}}},{key:"setInitialConfig",value:function(e){var t=e.url,n=e.onMessageCallback;this.url=t,this.onMessageCallback=function(e){n(e)}}},{key:"setOnCloseHandler",value:function(e){this.onCloseHandler=e}},{key:"setOnErrorHandler",value:function(e){this.onErrorHandler=e}},{key:"connect",value:function(e){var t=this;return this.closeSocket(this.socket),this.socket=null,new Promise(function(n,r){try{var o=e.connectionSessionId,i=e.userToken,s=void 0===i?"":i,a=e.anonId,c=e.abIdV2,l=e.retry,u=e.platformType,d=t.url,h={connSessionId:void 0===o?void 0:o,anonId:a,abIdV2:c,platformType:u,retry:null==l?void 0:l.toString()},f=Object.keys(h).filter(function(e){return void 0!==h[e]&&""!==h[e]}).map(function(e){return"".concat(e,"=").concat(h[e])}).join("&");f&&(d+=(t.url.includes("?")?"&":"?")+f);var p=s?new WebSocket(d,["Bearer",s]):new WebSocket(d);p.onopen=function(){t.socket=p,n()},p.onmessage=function(e){return t.onMessageCallback(e)},p.onerror=function(e){t.onErrorHandler(e),r(e)},p.onclose=function(e){t.onCloseHandler(e)}}catch(e){r(e)}})}},{key:"send",value:function(e){var t;return(t=function(){var t;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,function(n){return this.socket&&this.socket.readyState===WebSocket.OPEN?[2,null==(t=this.socket)?void 0:t.send(JSON.stringify(e))]:[2]})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(e){q(i,r,o,s,a,"next",e)}function a(e){q(i,r,o,s,a,"throw",e)}s(void 0)})}).call(this)}},{key:"close",value:function(){this.closeSocket(this.socket),this.socket=null}}],n=[{key:"getInstance",value:function(){return r.instance||(r.instance=new r),r.instance}}],t&&K(r.prototype,t),n&&K(r,n),r}(function e(){var t;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");if(((null!=(t=e)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](this):this instanceof t)?this.constructor:void 0)===e)throw TypeError("Cannot construct ISocketClient instances directly")});V(Y,"instance",void 0);var Q=((m={}).UNAUTHORIZED="UNAUTHORIZED",m.INVALID_TOKEN="INVALID_TOKEN",m.TOKEN_EXPIRED="TOKEN_EXPIRED",m.FORCE_PASSWORD_CHANGE="FORCE_PASSWORD_CHANGE",m.TOKEN_REVOKED="TOKEN_REVOKED",m),J=((v={}).EDITOR_NOT_FOUND="EDITOR_NOT_FOUND",v.EDITOR_ALREADY_EXISTS="EDITOR_ALREADY_EXISTS",v.LANGUAGE_NOT_SUPPORTED="LANGUAGE_NOT_SUPPORTED",v),$=((y={}).IDLE_TIMEOUT="IDLE_TIMEOUT",y.WS_CONNECTION_REJECTED="WS_CONNECTION_REJECTED",y.WS_CONNECTION_EXHAUSTED="WS_CONNECTION_EXHAUSTED",y.SERVER_SHUTDOWN="SERVER_SHUTDOWN",y.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED",y),ee=((g={}).UNKNOWN="UNKNOWN",g.TIMEOUT="TIMEOUT",g.GENERIC="GENERIC",g.ANON_ID_NOT_PRESENT="ANON_ID_NOT_PRESENT",g.INVALID_OR_EXPIRED_SESSION="INVALID_OR_EXPIRED_SESSION",g.PING_FAILED="PING_FAILED",g.EMPTY_CONNECTION_ID="EMPTY_CONNECTION_ID",g.EXPIRED_WRITING_SESSION="EXPIRED_WRITING_SESSION",g),te=((E={}).PROCESSING_ERROR="PROCESSING_ERROR",E.TRANSPORT_NOT_INITIALIZED="TRANSPORT_NOT_INITIALIZED",E),ne=((w={})[w.Continue=100]="Continue",w[w.SwitchingProtocols=101]="SwitchingProtocols",w[w.Processing=102]="Processing",w[w.EarlyHints=103]="EarlyHints",w[w.Ok=200]="Ok",w[w.Created=201]="Created",w[w.Accepted=202]="Accepted",w[w.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",w[w.NoContent=204]="NoContent",w[w.ResetContent=205]="ResetContent",w[w.PartialContent=206]="PartialContent",w[w.MultiStatus=207]="MultiStatus",w[w.AlreadyReported=208]="AlreadyReported",w[w.ImUsed=226]="ImUsed",w[w.MultipleChoices=300]="MultipleChoices",w[w.MovedPermanently=301]="MovedPermanently",w[w.Found=302]="Found",w[w.SeeOther=303]="SeeOther",w[w.NotModified=304]="NotModified",w[w.UseProxy=305]="UseProxy",w[w.Unused=306]="Unused",w[w.TemporaryRedirect=307]="TemporaryRedirect",w[w.PermanentRedirect=308]="PermanentRedirect",w[w.BadRequest=400]="BadRequest",w[w.Unauthorized=401]="Unauthorized",w[w.PaymentRequired=402]="PaymentRequired",w[w.Forbidden=403]="Forbidden",w[w.NotFound=404]="NotFound",w[w.MethodNotAllowed=405]="MethodNotAllowed",w[w.NotAcceptable=406]="NotAcceptable",w[w.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",w[w.RequestTimeout=408]="RequestTimeout",w[w.Conflict=409]="Conflict",w[w.Gone=410]="Gone",w[w.LengthRequired=411]="LengthRequired",w[w.PreconditionFailed=412]="PreconditionFailed",w[w.PayloadTooLarge=413]="PayloadTooLarge",w[w.UriTooLong=414]="UriTooLong",w[w.UnsupportedMediaType=415]="UnsupportedMediaType",w[w.RangeNotSatisfiable=416]="RangeNotSatisfiable",w[w.ExpectationFailed=417]="ExpectationFailed",w[w.ImATeapot=418]="ImATeapot",w[w.MisdirectedRequest=421]="MisdirectedRequest",w[w.UnprocessableEntity=422]="UnprocessableEntity",w[w.Locked=423]="Locked",w[w.FailedDependency=424]="FailedDependency",w[w.TooEarly=425]="TooEarly",w[w.UpgradeRequired=426]="UpgradeRequired",w[w.PreconditionRequired=428]="PreconditionRequired",w[w.TooManyRequests=429]="TooManyRequests",w[w.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",w[w.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",w[w.InternalServerError=500]="InternalServerError",w[w.NotImplemented=501]="NotImplemented",w[w.BadGateway=502]="BadGateway",w[w.ServiceUnavailable=503]="ServiceUnavailable",w[w.GatewayTimeout=504]="GatewayTimeout",w[w.HttpVersionNotSupported=505]="HttpVersionNotSupported",w[w.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",w[w.InsufficientStorage=507]="InsufficientStorage",w[w.LoopDetected=508]="LoopDetected",w[w.NotExtended=510]="NotExtended",w[w.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",w),re=((O={}).INIT_EDITOR="init_editor",O.INIT_EDITOR_V2="init_editor_v2",O.ON_CHANGE="on_change",O.ON_CONTENT_CHANGE="on_content_change",O.ON_CONTENT_CHANGE_V2="on_content_change_v2",O.ON_COMMAND="on_command",O.ACK="ack",O.UPDATE_CONNECTION="update_connection",O.TERMINATE_EDITOR_GROUP="terminate_editor_group",O.SET_ACTIVE_EDITOR_GROUP="set_active_editor_group",O.PONG="pong",O.INIT_WRITING_SESSION="init_writing_session",O.UPDATE_SURROUNDING_CONTEXT="update_surrounding_context",O.FORCE_SYNC_EDITOR="force_sync_editor",O),oe=((S={}).AUTH_SUCCESS="auth_success",S.AUTH_FAILED="auth_failed",S.PROCESSING_SUCCESS="processing_success",S.PROCESSING_FAILED="processing_failed",S.ACK="ack",S.PING="ping",S.ACK_FAILED="ack_failed",S),ie=((T={}).ACCEPT_CHANGES="ACCEPT_CHANGES",T.USER_CHANGE="USER_CHANGE",T.SYSTEM_CHANGE="SYSTEM_CHANGED",T),se=((R={}).GC="GC",R.GC_WITH_RECOMMENDATION="GC_WITH_RECOMMENDATION",R.NONE="NONE",R.RECOMMENDATION="RECOMMENDATION",R.TRANSLATOR="TRANSLATOR",R.TRANSLATOR_TRANSLATE="TRANSLATOR_TRANSLATE",R),ae=((I={}).NOT_SENT="NOT_SENT",I.PENDING="PENDING",I.RESOLVED="RESOLVED",I),ce=((C={}).GC="GC",C.GC_RECOMMENDATION="GC_RECOMMENDATION",C.PPHR="PPHR",(A={}).GRAMMAR_CHECKER="GRAMMAR_CHECKER",A.TRANSLATOR="TRANSLATOR",(k={}).AUTH_SUCCESS="auth_success",k.GC_SUCCESS="gc_success",k.PROCESSING_SUCCESS="processing_success",k.ACK="ack",k.PING="ping",k),le=((N={}).SENTENCE_SUGGESTION_GC_COMPLETED="sentence_suggestion_gc_completed",N.SENTENCE_SUGGESTION_GC="sentence_suggestion_gc",N.SENTENCE_SUGGESTIONS_RECOMMENDATION="sentence-suggestions-recommendation",(x={}).AUTH_FAILED="auth_failed",x.GC_FAILED="gc_failed",x.ACK_FAILED="ack_failed",x.PROCESSING_FAILED="processing_failed",x),ue=((D={}).CONTENT_SYNC_REQUIRED="content_sync_required",D.SURROUNDING_CONTEXT_SYNC_REQUIRED="surrounding_context_sync_required",D),de=((P={}).EDGE_EXT="edge-active",P.CHROME_EXT="chrome-active",P.DESKTOP="desktop-active",P.MOBILE="android-app",P.WEBAPP="webapp",(U={}).RESOLVE="resolve",U.REJECT="reject",U),he=((L={}).SentenceSuggestionsGC="sentence-suggestions-gc",L.SentenceSplitter="sentence-splitter",L.Unknown="unknown",L.SentenceSuggestionsRecommendation="sentence-suggestions-recommendation",L.SentenceSuggestionsGCCompleted="sentence-suggestions-gc-completed",L.SkipProcessing="skip-processing",L.DetectLanguage="detect-language",L.Translator="translator",L.Complete="complete",L.RequestComplete="request-complete",L),fe=((M={}).SENTRY="SENTRY",M.LT_QB_GC_ADAPTER="LT_QB_GC_ADAPTER",(j={}).NOT_INITIALIZED="NOT_INITIALIZED",j.CONNECTING="CONNECTING",j.CONNECTED="CONNECTED",j.READY="READY",j.ERRORED="ERRORED",j.RETRY_EXHAUSTED="RETRY_EXHAUSTED",j.AUTH_SUCCESS="AUTH_SUCCESS",j),pe=((G={}).GC_MODEL_STATS="gc_model_stats",G.GC_RECOM_RES="gc_recom_res",G.UPDATE_CONN_ID="update_conn_id",G.EDITOR_CONTENT_SAVE_ACK="editor_content_save_ack",G);function _e(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function be(e){return"".concat(e,"-").concat(Math.random().toString(36).substring(2,11))}var me="initialize",ve=function(e){var t,n=e.requestEventId,r=e.pendingAcks,o=e.eventData,i=e.ackType,s=e.transport;return(t=function(){var e,t,a,c,l,u,d,h;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,function(f){switch(f.label){case 0:return[4,ze({transport:s,errorCode:null==o||null==(e=o.data)?void 0:e.errorCode,eventData:null==o?void 0:o.data})];case 1:return f.sent(),r.has(n)&&(a=(t=r.get(n)).resolve,c=t.reject,l=t.timeout,i===de.REJECT?(d=null==o||null==(u=o.data)?void 0:u.errorCode,c((h=!Object.values(Q).includes(d)&&!Object.values(J).includes(d))?{shouldRetry:h,errorData:o}:{errorData:o})):a(o),l&&clearTimeout(l),r.delete(n)),[2]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(e){_e(i,r,o,s,a,"next",e)}function a(e){_e(i,r,o,s,a,"throw",e)}s(void 0)})})()},ye=function(e){return null==e?void 0:e.shouldRetry},ge="http_error",Ee="transport_error",we="editor_sync_failed",Oe="surrounding_context_sync_failed",Se="fallback_usage",Te="editor_content_save_ack_skipped",Re="ws_connection_attempt",Ie="ws_connection_ready",Ce="ws_connection_connected",Ae="ws_connection_failed",ke="ws_disconnected",Ne="message_sent_ws",xe="message_error",De="ws_disconnect_pending_messages",Pe="transport_not_initialized",Ue="transport-validate",Le="transport-ready",Me={REINITIALIZE_WRITING_SESSION:"reinitialize_writing_session",CONTENT_SYNC_REQUIRED:"content_sync_required",SURROUNDING_CONTEXT_SYNC_REQUIRED:"surrounding_context_sync_required"};function je(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Ge(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){je(i,r,o,s,a,"next",e)}function a(e){je(i,r,o,s,a,"throw",e)}s(void 0)})}}function Fe(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var He=null;function Be(e){return Ge(function(e){var t,n,r,o,i,s;return Fe(this,function(a){switch(a.label){case 0:var c,l,u;return t=e.transport,n=e.error,ze({transport:t,errorCode:null==n||null==(r=n.data)?void 0:r.errorCode}),i=function(){if(t.pendingAcks.has(me)){var e=t.pendingAcks.get(me),r=e.reject,o=e.timeout;o&&clearTimeout(o),r(n),t.pendingAcks.delete(me)}},"AUTHENTICATION"!==(null==n||null==(o=n.data)?void 0:o.errorNamespace)?[3,2]:[4,(c=t,l=null==n||null==(s=n.data)?void 0:s.errorCode,u=i,Ge(function(){var e,t;return Fe(this,function(n){switch(n.label){case 0:switch(c.setErroredState(l),l){case Q.INVALID_TOKEN:return[3,1];case Q.TOKEN_EXPIRED:return[3,2];case Q.FORCE_PASSWORD_CHANGE:return[3,4];case Q.TOKEN_REVOKED:return[3,5]}return[3,6];case 1:return u(),c.closeConnection(),[3,8];case 2:case 6:return[4,c.authHandlers.getIdToken(!0)];case 3:case 7:return n.sent(),c.establishSocketConnection({isReconnect:!0}),[3,8];case 4:return u(),null==c||null==(e=c.authHandlers)||e.logout("EXTERNAL_MESSAGE"),[3,8];case 5:return u(),null==c||null==(t=c.authHandlers)||t.logout("EXTERNAL_MESSAGE"),[3,8];case 8:return[2]}})})())];case 1:return a.sent(),[2];case 2:return Object.values(Q).includes(n.reason)||Object.values($).includes(n.reason)?(i(),[2]):(t.establishSocketConnection({isReconnect:!0}),[2])}})}).apply(this,arguments)}function ze(e){return Ge(function(e){var t,n,r;return Fe(this,function(o){return t=e.transport,n=e.errorCode,r=e.eventData,n===ee.INVALID_OR_EXPIRED_SESSION&&t.resetConnectionSession(n),n===ee.EXPIRED_WRITING_SESSION?He?[2,He]:[2,He=new Promise(function(e,n){var o=setTimeout(function(){He=null,n(Error("Writing session reinitialize timeout after 30 seconds"))},t.recoveryConfig.observableTimeout);t.notifyClient({eventName:Me.REINITIALIZE_WRITING_SESSION,data:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({resolve:function(){clearTimeout(o),He=null,e()},reject:function(e){clearTimeout(o),He=null,n(e)}},r)})})]:[2]})}).apply(this,arguments)}function qe(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe=((F={}).INIT="INIT",F.GENERIC="GENERIC",F),We=function(){var e,t;function n(){var e;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");Ve(this,"_queues",(Ve(e={},"INIT",{queue:[],isProcessing:!1}),Ve(e,"GENERIC",{queue:[],isProcessing:!1}),e))}return e=[{key:"enqueue",value:function(e,t,n,r,o){var i=this._queues[e].queue,s=setTimeout(function(){var e=i.findIndex(function(e){return e.message.eventId===t.eventId});-1!==e&&(i.splice(e,1)[0],null==o||o.timeoutHandler())},r),a={message:t,waitForAck:n,timeoutId:s,resolve:null==o?void 0:o.resolve,reject:null==o?void 0:o.reject};i.push(a)}},{key:"processQueue",value:function(e,t){var n;return(n=function(){var n,r,o,i;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,function(s){switch(s.label){case 0:if(!(n=this._queues[e])||n.isProcessing||0===n.queue.length)return[2];n.isProcessing=!0,s.label=1;case 1:if(!(n.queue.length>0))return[3,6];if(!(r=n.queue.shift()))return[3,5];clearTimeout(r.timeoutId),s.label=2;case 2:var a,c;return s.trys.push([2,4,,5]),[4,t((a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ve(e,t,n[t])})}return e}({},r.message),c=c={eventTimeStamp:Date.now()},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))}),a),r.waitForAck)];case 3:return o=s.sent(),r.resolve&&r.resolve(o),[3,5];case 4:return i=s.sent(),r.reject&&r.reject(i),[3,5];case 5:return[3,1];case 6:return n.isProcessing=!1,[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function s(e){qe(i,r,o,s,a,"next",e)}function a(e){qe(i,r,o,s,a,"throw",e)}s(void 0)})}).call(this)}}],t=[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}],e&&Ke(n.prototype,e),t&&Ke(n,t),n}();Ve(We,"_instance",void 0);var Ze=function(e,t){return(Ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Ye(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ze(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Qe(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}function Je(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $e(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function et(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function tt(e){return this instanceof tt?(this.v=e,this):new tt(e)}function nt(e){return"function"==typeof e}function rt(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}"function"==typeof SuppressedError&&SuppressedError;var ot=rt(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function it(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var st=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,n,r,o,i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=Je(i),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else i.remove(this);var c=this.initialTeardown;if(nt(c))try{c()}catch(e){o=e instanceof ot?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var u=Je(l),d=u.next();!d.done;d=u.next()){var h=d.value;try{lt(h)}catch(e){o=null!=o?o:[],e instanceof ot?o=et(et([],$e(o)),$e(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(o)throw new ot(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)lt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(n=this._finalizers)?n:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&it(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&it(n,e),e instanceof t&&e._removeParent(this)},(e=new t).closed=!0,t.EMPTY=e,t}(),at=st.EMPTY;function ct(e){return e instanceof st||e&&"closed"in e&&nt(e.remove)&&nt(e.add)&&nt(e.unsubscribe)}function lt(e){nt(e)?e():e.unsubscribe()}var ut=void 0,dt=!1;function ht(e){!function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];setTimeout.apply(void 0,et([e,t],$e(n)))}(function(){throw e})}function ft(){}var pt=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,ct(t)&&t.add(n)):n.destination=yt,n}return Ye(t,e),t.create=function(e,t,n){return new vt(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(st),_t=Function.prototype.bind;function bt(e,t){return _t.call(e,t)}var mt=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){ht(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){ht(e)}else ht(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){ht(e)}},e}(),vt=function(e){function t(t,n,r){var o,i,s=e.call(this)||this;return nt(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&dt?((i=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&bt(t.next,i),error:t.error&&bt(t.error,i),complete:t.complete&&bt(t.complete,i)}):o=t,s.destination=new mt(o),s}return Ye(t,e),t}(pt),yt={closed:!0,next:ft,error:function(e){throw e},complete:ft},gt="function"==typeof Symbol&&Symbol.observable||"@@observable",Et=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=function(e){return e&&e instanceof pt||e&&nt(e.next)&&nt(e.error)&&nt(e.complete)&&ct(e)}(e)?e:new vt(e,t,n),o=this.operator,i=this.source;return r.add(o?o.call(r,i):i?this._subscribe(r):this._trySubscribe(r)),r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=wt(t))(function(t,r){var o=new vt({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},e.prototype[gt]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?function(e){return e}:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=wt(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function wt(e){var t;return null!=(t=null!=e?e:ut)?t:Promise}function Ot(e){return nt(null==e?void 0:e.lift)}function St(e){return function(t){if(Ot(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function Tt(e,t,n,r,o){return new Rt(e,t,n,r,o)}var Rt=function(e){function t(t,n,r,o,i,s){var a=e.call(this,t)||this;return a.onFinalize=i,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return Ye(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null==(t=this.onFinalize)||t.call(this)}},t}(pt);function It(e,t){var n=Et.call(this)||this;return n.source=e,n.subjectFactory=t,n._subject=null,n._refCount=0,n._connection=null,Ot(e)&&(n.lift=e.lift),n}Ye(It,Et),It.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},It.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},It.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},It.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new st;var n=this.getSubject();t.add(this.source.subscribe(Tt(n,void 0,function(){e._teardown(),n.complete()},function(t){e._teardown(),n.error(t)},function(){return e._teardown()}))),t.closed&&(this._connection=null,t=st.EMPTY)}return t},It.prototype.refCount=function(){return St(function(e,t){var n=null;e._refCount++;var r=Tt(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount)n=null;else{var r=e._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()}});e.subscribe(r),r.closed||(n=e.connect())})(this)};var Ct={now:function(){return(Ct.delegate||performance).now()},delegate:void 0},At={schedule:function(e){var t=cancelAnimationFrame,n=requestAnimationFrame(function(n){t=void 0,e(n)});return new st(function(){return null==t?void 0:t(n)})},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=At.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,et([],$e(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return cancelAnimationFrame.apply(void 0,et([],$e(e)))},delegate:void 0};new Et(function(e){var t=Ct.now(),n=0,r=function(){e.closed||(n=At.requestAnimationFrame(function(o){n=0;var i=Ct.now();e.next({timestamp:o,elapsed:i-t}),r()}))};return r(),function(){n&&At.cancelAnimationFrame(n)}});var kt=rt(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Nt=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Ye(t,e),t.prototype.lift=function(e){var t=new xt(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new kt},t.prototype.next=function(e){var t,n;if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));try{for(var r=Je(this.currentObservers),o=r.next();!o.done;o=r.next())o.value.next(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},t.prototype.error=function(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;for(var t=this.observers;t.length;)t.shift().error(e)}},t.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var e=this.observers;e.length;)e.shift().complete()}},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,o=this.observers;return n||r?at:(this.currentObservers=null,o.push(e),new st(function(){t.currentObservers=null,it(o,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new Et;return e.source=this,e},t.create=function(e,t){return new xt(e,t)},t}(Et),xt=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return Ye(t,e),t.prototype.next=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.next)||n.call(t,e)},t.prototype.error=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.error)||n.call(t,e)},t.prototype.complete=function(){var e,t;null==(t=null==(e=this.destination)?void 0:e.complete)||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!=(n=null==(t=this.source)?void 0:t.subscribe(e))?n:at},t}(Nt);function Dt(e){var t=Nt.call(this)||this;return t._value=e,t}Ye(Dt,Nt),Object.defineProperty(Dt.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),Dt.prototype._subscribe=function(e){var t=Nt.prototype._subscribe.call(this,e);return t.closed||e.next(this._value),t},Dt.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},Dt.prototype.next=function(e){Nt.prototype.next.call(this,this._value=e)};var Pt={now:function(){return(Pt.delegate||Date).now()},delegate:void 0};function Ut(e,t,n){void 0===e&&(e=1/0),void 0===t&&(t=1/0),void 0===n&&(n=Pt);var r=Nt.call(this)||this;return r._bufferSize=e,r._windowTime=t,r._timestampProvider=n,r._buffer=[],r._infiniteTimeWindow=!0,r._infiniteTimeWindow=t===1/0,r._bufferSize=Math.max(1,e),r._windowTime=Math.max(1,t),r}function Lt(){var e=null!==Nt&&Nt.apply(this,arguments)||this;return e._value=null,e._hasValue=!1,e._isComplete=!1,e}Ye(Ut,Nt),Ut.prototype.next=function(e){var t=this.isStopped,n=this._buffer,r=this._infiniteTimeWindow,o=this._timestampProvider,i=this._windowTime;!t&&(n.push(e),r||n.push(o.now()+i)),this._trimBuffer(),Nt.prototype.next.call(this,e)},Ut.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),o=0;o<r.length&&!e.closed;o+=n?1:2)e.next(r[o]);return this._checkFinalizedStatuses(e),t},Ut.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,n=this._buffer,r=this._infiniteTimeWindow,o=(r?1:2)*e;if(e<1/0&&o<n.length&&n.splice(0,n.length-o),!r){for(var i=t.now(),s=0,a=1;a<n.length&&n[a]<=i;a+=2)s=a;s&&n.splice(0,s+1)}},Ye(Lt,Nt),Lt.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this._hasValue,r=this._value,o=this.thrownError,i=this.isStopped,s=this._isComplete;t?e.error(o):(i||s)&&(n&&e.next(r),e.complete())},Lt.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},Lt.prototype.complete=function(){var e=this._hasValue,t=this._value;this._isComplete||(this._isComplete=!0,e&&Nt.prototype.next.call(this,t),Nt.prototype.complete.call(this))};var Mt=function(e){function t(t,n){return e.call(this)||this}return Ye(t,e),t.prototype.schedule=function(e,t){return this},t}(st),jt=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,et([e,t],$e(n)))},Gt=function(e){return clearInterval(e)},Ft=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Ye(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!=(n=this.id)?n:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),jt(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Gt(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,it(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Mt),Ht=1,Bt={};function zt(e){return e in Bt&&(delete Bt[e],!0)}var qt=function(e){var t=Ht++;return Bt[t]=!0,B||(B=Promise.resolve()),B.then(function(){return zt(t)&&e()}),t},Kt={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Kt.delegate;return((null==n?void 0:n.setImmediate)||qt).apply(void 0,et([],$e(e)))},clearImmediate:function(e){return function(e){zt(e)}(e)},delegate:void 0},Vt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Ye(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=Kt.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o,i=t.actions;null!=n&&(null==(o=i[i.length-1])?void 0:o.id)!==n&&(Kt.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},t}(Ft),Xt=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Pt.now,e}(),Wt=function(e){function t(t,n){void 0===n&&(n=Xt.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return Ye(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active)n.push(e);else{this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}}},t}(Xt);new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ye(t,e),t.prototype.flush=function(e){this._active=!0;var t,n=this._scheduled;this._scheduled=void 0;var r=this.actions;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,t){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw t}},t}(Wt))(Vt);var Zt=new Wt(Ft),Yt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Ye(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.flush(this),0)},t}(Ft);new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ye(t,e),t}(Wt))(Yt);var Qt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Ye(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=At.requestAnimationFrame(function(){return t.flush(void 0)})))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o,i=t.actions;null!=n&&n===t._scheduled&&(null==(o=i[i.length-1])?void 0:o.id)!==n&&(At.cancelAnimationFrame(n),t._scheduled=void 0)},t}(Ft);function Jt(e,t){void 0===e&&(e=$t),void 0===t&&(t=1/0);var n=Wt.call(this,e,function(){return n.frame})||this;return n.maxFrames=t,n.frame=0,n.index=-1,n}new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ye(t,e),t.prototype.flush=function(e){this._active=!0,e?t=e.id:(t=this._scheduled,this._scheduled=void 0);var t,n,r=this.actions;e=e||r.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,n){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw n}},t}(Wt))(Qt),Ye(Jt,Wt),Jt.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},Jt.frameTimeFactor=10;var $t=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.index=r,o.active=!0,o.index=t.index=r,o}return Ye(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!Number.isFinite(r))return st.EMPTY;if(!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var o=new t(this.scheduler,this.work);return this.add(o),o.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var o=e.actions;return o.push(this),o.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(Ft);new Et(function(e){return e.complete()});var en="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function tn(e){if(e instanceof Et)return e;if(null!=e){var t,n,r,o;if(nt(e[gt]))return t=e,new Et(function(e){var n=t[gt]();if(nt(n.subscribe))return n.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(e&&"number"==typeof e.length&&"function"!=typeof e)return n=e,new Et(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()});if(nt(null==e?void 0:e.then))return r=e,new Et(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,ht)});if(Symbol.asyncIterator&&nt(null==e?void 0:e[Symbol.asyncIterator]))return nn(e);if(nt(null==e?void 0:e[en]))return o=e,new Et(function(e){var t,n;try{for(var r=Je(o),i=r.next();!i.done;i=r.next()){var s=i.value;if(e.next(s),e.closed)return}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.complete()});if(nt(null==e?void 0:e.getReader))return nn(function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,l)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||a(e,t)})},t&&(r[e]=t(r[e])))}function a(e,t){try{var n;(n=o[e](t)).value instanceof tt?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}(this,arguments,function(){var t,n,r;return Qe(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,tt(t.read())];case 3:return r=(n=o.sent()).value,n.done?[4,tt(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,tt(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}(e))}throw TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function nn(e){return new Et(function(t){(function(e,t){var n,r,o,i,s,a,c;return s=this,c=function(){var s;return Qe(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Je(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){var i,s,a;i=r,s=o,a=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){i({value:e,done:a})},s)})}}}(e),a.label=1;case 1:return[4,n.next()];case 2:if((r=a.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o={error:a.sent()},[3,11];case 6:return a.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new((a=void 0)||(a=Promise))(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):((o=t.value)instanceof a?o:new a(function(e){e(o)})).then(n,r)}o((c=c.apply(s,[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function rn(e,t){return St(function(n,r){var o=0;n.subscribe(Tt(r,function(n){r.next(e.call(t,n,o++))}))})}(H=z||(z={})).NEXT="N",H.ERROR="E",H.COMPLETE="C",rt(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}),rt(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),rt(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}}),rt(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}}),rt(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}),new Et(ft);var on=Array.isArray;function sn(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new Nt}:t,r=e.resetOnError,o=void 0===r||r,i=e.resetOnComplete,s=void 0===i||i,a=e.resetOnRefCountZero,c=void 0===a||a;return function(e){var t,r,i,a=0,l=!1,u=!1,d=function(){null==r||r.unsubscribe(),r=void 0},h=function(){d(),t=i=void 0,l=u=!1},f=function(){var e=t;h(),null==e||e.unsubscribe()};return St(function(e,p){a++,u||l||d();var _=i=null!=i?i:n();p.add(function(){0!=--a||u||l||(r=an(f,c))}),_.subscribe(p),!t&&a>0&&(t=new vt({next:function(e){return _.next(e)},error:function(e){u=!0,d(),r=an(h,o,e),_.error(e)},complete:function(){l=!0,d(),r=an(h,s),_.complete()}}),tn(e).subscribe(t))})(e)}}function an(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var o=new vt({next:function(){o.unsubscribe(),e()}});return tn(t.apply(void 0,et([],$e(n)))).subscribe(o)}}else e()}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ln=function(){var e;function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");cn(this,"observableTimeout",void 0),cn(this,"subject",void 0),this.observableTimeout=e,this.subject=new Nt}return e=[{key:"handleResponse",value:function(e){this.subject.next(e)}},{key:"eventResponseStream",value:function(e,t,n){var r,o,i,s,a;return function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return 1===(n=1===(t=n).length&&on(t[0])?t[0]:t).length?tn(n[0]):new Et((e=n,function(t){for(var n=[],r=function(r){n.push(tn(e[r]).subscribe(Tt(t,function(e){if(n){for(var o=0;o<n.length;o++)o!==r&&n[o].unsubscribe();n=null}t.next(e)})))},o=0;n&&!t.closed&&o<e.length;o++)r(o)}))}([this.subject.pipe((r=function(t){return[oe.PROCESSING_SUCCESS,oe.PROCESSING_FAILED].includes(t.event)&&t.requestEventId===e},St(function(e,t){var n=0;e.subscribe(Tt(t,function(e){return r.call(void 0,e,n++)&&t.next(e)}))})),rn(function(e){if(n||!e.isError)return e.data;throw Error("Error in response")}),(o=function(e){return e.type!==he.RequestComplete},void 0===i&&(i=!1),St(function(e,t){e.subscribe(Tt(t,function(e){var n=o(e,0);(n||i)&&t.next(e),n||t.complete()}))}))),(void 0===(s=this.observableTimeout)&&(s=0),void 0===a&&(a=Zt),new Et(function(e){var t,n=(t=s)instanceof Date&&!isNaN(t)?s-a.now():s;n<0&&(n=0);var r=0;return a.schedule(function(){e.closed||(e.next(r++),e.complete())},n)})).pipe(function e(t,n,r){return void 0===r&&(r=1/0),nt(n)?e(function(e,r){return rn(function(t,o){return n(e,t,r,o)})(tn(t(e,r)))},r):("number"==typeof n&&(r=n),St(function(e,n){var o,i,s,a,c,l,u,d;return o=r,i=[],s=0,a=0,c=!1,l=function(){!c||i.length||s||n.complete()},u=function(e){return s<o?d(e):i.push(e)},d=function(e){s++;var r=!1;tn(t(e,a++)).subscribe(Tt(n,function(e){n.next(e)},function(){r=!0},void 0,function(){if(r)try{for(s--;i.length&&s<o;)!function(){var e=i.shift();d(e)}();l()}catch(e){n.error(e)}}))},e.subscribe(Tt(n,u,function(){c=!0,l()})),function(){}}))}(function(){var e,t;return t=nt(e=function(){return Error("Timeout")})?e:function(){return e},new Et(function(e){return e.error(t())})}))])}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();let un=new WeakMap,dn=new WeakMap,hn=new WeakMap,fn=new WeakMap,pn=new WeakMap,_n={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return dn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||hn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function bn(e){if(e instanceof IDBRequest){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(bn(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&un.set(t,e)}).catch(()=>{}),pn.set(t,e),t}if(fn.has(e))return fn.get(e);let t=function(e){return"function"==typeof e?e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_||(_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(mn(this),t),bn(un.get(this))}:function(...t){return bn(e.apply(mn(this),t))}:function(t,...n){let r=e.call(mn(this),t,...n);return hn.set(r,t.sort?t.sort():[t]),bn(r)}:(e instanceof IDBTransaction&&function(e){if(dn.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});dn.set(e,t)}(e),((e,t)=>t.some(t=>e instanceof t))(e,p||(p=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,_n):e)}(e);return t!==e&&(fn.set(e,t),pn.set(t,e)),t}let mn=e=>pn.get(e),vn=["get","getKey","getAll","getAllKeys","count"],yn=["put","add","delete","clear"],gn=new Map;function En(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(gn.get(t))return gn.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,o=yn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!vn.includes(n))return;let i=async function(e,...t){let i=this.transaction(e,o?"readwrite":"readonly"),s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),o&&i.done]))[0]};return gn.set(t,i),i}function wn(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function On(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){wn(i,r,o,s,a,"next",e)}function a(e){wn(i,r,o,s,a,"throw",e)}s(void 0)})}}function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}_n={...b=_n,get:(e,t,n)=>En(e,t)||b.get(e,t,n),has:(e,t)=>!!En(e,t)||b.has(e,t)};var Rn=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");Sn(this,"dbPromise",void 0),Sn(this,"isAvailable","undefined"!=typeof indexedDB),this.isAvailable?this.dbPromise=function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){let s=indexedDB.open(e,1),a=bn(s);return r&&s.addEventListener("upgradeneeded",e=>{r(bn(s.result),e.oldVersion,e.newVersion,bn(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",()=>o())}).catch(()=>{}),a}("keyval-store",0,{upgrade:function(e){e.createObjectStore("keyval")}}):this.dbPromise=Promise.resolve(null)}return e=[{key:"get",value:function(e){return On(function(){var t;return Tn(this,function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[2,null==(t=n.sent())?void 0:t.get("keyval",e)]}})}).call(this)}},{key:"set",value:function(e,t){return On(function(){var n;return Tn(this,function(r){switch(r.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(n=r.sent())?void 0:n.put("keyval",t,e)];case 2:return r.sent(),[2]}})}).call(this)}},{key:"delete",value:function(e){return On(function(){var t;return Tn(this,function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(t=n.sent())?void 0:t.delete("keyval",e)];case 2:return n.sent(),[2]}})}).call(this)}},{key:"clear",value:function(){return On(function(){var e;return Tn(this,function(t){switch(t.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(e=t.sent())?void 0:e.clear("keyval")];case 2:return t.sent(),[2]}})}).call(this)}},{key:"deleteOldData",value:function(){return On(function(){var e,t,n,r,o,i,s,a;return Tn(this,function(c){switch(c.label){case 0:return c.trys.push([0,7,,8]),t=+(new Date).setDate((new Date).getDate()-10),[4,this.dbPromise];case 1:return o=null==(r=null==(n=null==(e=c.sent())?void 0:e.transaction("cache"))?void 0:n.store)?void 0:r.index("date"),i=IDBKeyRange.upperBound(t),[4,null==o?void 0:o.openKeyCursor(i)];case 2:s=c.sent(),c.label=3;case 3:return s?[4,this.dbPromise]:[3,6];case 4:return null==(a=c.sent())||a.delete("cache",s.primaryKey),[4,s.continue()];case 5:return s=c.sent(),[3,3];case 6:return[3,8];case 7:return c.sent(),[3,8];case 8:return[2]}})}).call(this)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function In(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Cn(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){In(i,r,o,s,a,"next",e)}function a(e){In(i,r,o,s,a,"throw",e)}s(void 0)})}}function An(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var kn=new Map,Nn=function(){var e;function t(){var e;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");(e="isAvailable")in this?Object.defineProperty(this,e,{value:!0,enumerable:!0,configurable:!0,writable:!0}):this[e]=!0}return e=[{key:"get",value:function(e){return Cn(function(){return An(this,function(t){return[2,kn.get(e)]})})()}},{key:"set",value:function(e,t){return Cn(function(){return An(this,function(n){switch(n.label){case 0:return[4,kn.set(e,t)];case 1:return n.sent(),[2]}})})()}},{key:"delete",value:function(e){return Cn(function(){return An(this,function(t){switch(t.label){case 0:return[4,kn.delete(e)];case 1:return t.sent(),[2]}})})()}},{key:"clear",value:function(){return Cn(function(){return An(this,function(e){switch(e.label){case 0:return[4,kn.clear()];case 1:return e.sent(),[2]}})})()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),xn=function(e,t,n){if("number"!=typeof n||n<=0)throw Error("timedPromise: Encountered invalid timeout value. Got ".concat(n));return new Promise(function(r,o){var i=setTimeout(function(){r({timedOut:!0,value:t})},n);e.then(function(e){clearTimeout(i),r({timedOut:!1,value:e})}).catch(function(e){clearTimeout(i),o(e)})})};function Dn(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Pn(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){Dn(i,r,o,s,a,"next",e)}function a(e){Dn(i,r,o,s,a,"throw",e)}s(void 0)})}}function Un(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var Ln=Pn(function(){var e,t;return Un(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,xn((e=new Rn).dbPromise,null,3e3)];case 1:return t=n.sent(),e.isAvailable&&t.value?(e.deleteOldData(),[2,e]):[3,3];case 2:return n.sent(),[3,3];case 3:return[2,new Nn]}})})(),Mn={get:function(e){return Pn(function(){var t,n,r,o;return Un(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,Ln.then(function(t){return t.get(e)})];case 1:return(t=i.sent())?(r=(n=JSON.parse(t)).value,(o=n.expireAt)?(new Date).getTime()>new Date(o).getTime()?[4,Ln.then(function(t){return t.delete(e)})]:[3,3]:[2,r]):[2,void 0];case 2:case 4:return i.sent(),[2,void 0];case 3:return[2,r];case 5:return[2]}})})()},set:function(e,t,n){return Pn(function(){var r;return Un(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r=n?new Date((new Date).getTime()+n).toISOString():void 0,[4,Ln.then(function(n){return n.set(e,JSON.stringify({expireAt:r,value:t}))})];case 1:return o.sent(),[3,3];case 2:return o.sent(),[2,void 0];case 3:return[2,void 0]}})})()},delete:function(e){return Pn(function(){return Un(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Ln.then(function(t){return t.delete(e)})];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2,void 0];case 3:return[2,void 0]}})})()}};function jn(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}var Gn=function(e){var t;return(t=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Mn.get(e)];case 1:return[2,t.sent()||null];case 2:return t.sent(),[3,3];case 3:return[2]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(e){jn(i,r,o,s,a,"next",e)}function a(e){jn(i,r,o,s,a,"throw",e)}s(void 0)})})()};function Fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Fn(e,t,n[t])})}return e}function Bn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var zn=function(){var e;function t(e,n,r,o,i,s,a,c){var l,u=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");Fn(this,"onComplete",function(e,t,n){}),Fn(this,"paraKey",void 0),Fn(this,"timeout",void 0),Fn(this,"gcObservable",void 0),Fn(this,"recommendationObservable",void 0),Fn(this,"isCompleted",!1),Fn(this,"events",[]),Fn(this,"error",void 0),Fn(this,"timer",void 0),Fn(this,"isTimedOut",!1),Fn(this,"paraMeta",void 0),Fn(this,"processingType",void 0),Fn(this,"isSentenceReceived",!1),Fn(this,"isGCCompleted",!1),Fn(this,"sentenceReceivedTime",0),Fn(this,"sentencesCount",0),Fn(this,"receivedCount",0),this.paraMeta=i,this.paraKey=n,this.gcObservable=r,this.recommendationObservable=c,this.processingType=a,this.onComplete=function(t,n,r){u.isCompleted=!0,clearTimeout(u.timer),e(u.paraKey,u.events,r)},this.timeout=o,(null==s?void 0:s.aborted)&&(this.error=Error("Aborted"),this.gcObservable.error({data:{signal:s,errorCode:"AbortError",paraMeta:i,paraKey:n}}),null==(l=this.recommendationObservable)||l.error({data:{signal:s,errorCode:"AbortError",paraMeta:i,paraKey:n}}),this.onComplete(this.paraKey,this.events,Error("Aborted"))),null==s||s.addEventListener("abort",function(){var e;u.isCompleted||(u.error=Error("Aborted"),u.gcObservable.error({data:{signal:s,errorCode:"AbortError",paraMeta:i,paraKey:n}}),null==(e=u.recommendationObservable)||e.error({data:{signal:s,errorCode:"AbortError",paraMeta:i,paraKey:n}}),u.onComplete(u.paraKey,u.events,Error("Aborted")))}),this.timer=setTimeout(function(){if(!u.isCompleted){if(u.isTimedOut=!0,u.isSentenceReceived){for(var e,t=u.gcObservable.isObsCompleted(),n=u.sentencesCount-u.receivedCount,r=t?u.recommendationObservable:u.gcObservable,o=t?u.getRecommendationFallbackResponse():u.getGCFallbackResponse(),i=0;i<n;i++)u.events.push(o),null==r||r.next(o);null==r||r.complete(),t||null==(e=u.recommendationObservable)||e.complete()}else u.fallback();u.onComplete(u.paraKey,u.events,Error("Timeout"))}},this.timeout)}return e=[{key:"getSentenceSplitterFallbackResponse",value:function(){var e,t,n,r,o;return{type:he.SentenceSplitter,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(n=this.paraMeta)?void 0:n.editorId,sentenceRanges:[[0,(null==(o=this.paraMeta)||null==(r=o.text)?void 0:r.length)-1]],language:{name:"English (US)",code:"en-us",detectedLanguage:{name:"English (US)",code:"en-us",confidence:1,source:""}},errorCode:"TIMEOUT"}}},{key:"getGCFallbackResponse",value:function(){var e,t,n;return{type:he.SentenceSuggestionsGC,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(n=this.paraMeta)?void 0:n.editorId,suggestions:[],errorCode:"TIMEOUT"}}},{key:"getRecommendationFallbackResponse",value:function(){var e,t,n;return{type:he.SentenceSuggestionsRecommendation,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(n=this.paraMeta)?void 0:n.editorId,suggestions:[],errorCode:"TIMEOUT"}}},{key:"fallback",value:function(){var e;this.gcObservable.next(this.getSentenceSplitterFallbackResponse()),this.events.push(this.getSentenceSplitterFallbackResponse()),this.gcObservable.next(this.getGCFallbackResponse()),this.events.push(this.getGCFallbackResponse()),this.gcObservable.complete(),null==(e=this.recommendationObservable)||e.complete()}},{key:"next",value:function(e){if(!this.isTimedOut&&!this.isCompleted){var t,n,r,o,i,s=(null==e?void 0:e.isError)?null==e||null==(t=e.data)?void 0:t.errorCode:void 0;s&&(this.error=Error(s)),this.events.push(e);var a=Bn(Hn({},null==e?void 0:e.data),{isCached:null==e?void 0:e.isCached});if((null==a?void 0:a.type)===he.SentenceSplitter){if(this.isSentenceReceived=!0,!(null==a||null==(r=a.sentenceRanges)?void 0:r.length))return void this.fallback();this.sentencesCount=null==a||null==(o=a.sentenceRanges)?void 0:o.length,this.gcObservable.next(a),this.processingType===se.RECOMMENDATION&&(this.gcObservable.next({type:he.SentenceSuggestionsGCCompleted}),this.gcObservable.complete())}(null==a?void 0:a.type)===he.SentenceSuggestionsGC&&(this.receivedCount=(this.receivedCount||0)+1,this.gcObservable.next(a)),(null==a?void 0:a.type)===he.SentenceSuggestionsGCCompleted&&(this.gcObservable.next(a),this.gcObservable.complete()),(null==a?void 0:a.type)===he.SkipProcessing&&(this.gcObservable.complete(),null==(i=this.recommendationObservable)||i.complete()),(null==a?void 0:a.type)===he.SentenceSuggestionsRecommendation&&this.recommendationObservable&&(this.receivedCount=(this.receivedCount||0)+1,this.recommendationObservable.next(a)),this.sentencesCount&&this.receivedCount&&this.sentencesCount===this.receivedCount&&this.recommendationObservable&&this.recommendationObservable.complete(),(null==e||null==(n=e.data)?void 0:n.errorCode)===J.LANGUAGE_NOT_SUPPORTED&&(this.error=Error("Language not supported"),this.gcObservable.error(e),this.recommendationObservable&&this.recommendationObservable.error(e)),this.gcObservable.isObsCompleted()&&(!this.recommendationObservable||this.recommendationObservable.isObsCompleted())&&this.onComplete(this.paraKey,this.events,this.error)}}},{key:"sendBulk",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;n<e.length;n++)if(e){var r=t?Bn(Hn({},e[n]),{isCached:t}):e[n];this.next(r)}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kn=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");qn(this,"observers",void 0),qn(this,"isCompleted",void 0),qn(this,"eventQueue",void 0),qn(this,"errorQueue",void 0),qn(this,"isSubscribed",void 0),this.observers=[],this.isCompleted=!1,this.eventQueue=[],this.errorQueue=null,this.isSubscribed=!1}return e=[{key:"isObsCompleted",value:function(){return this.isCompleted}},{key:"subscribe",value:function(e){var t=this,n={onNext:e.next,onComplete:e.complete,onError:e.error};return this.observers.push(n),this.isSubscribed=!0,this.eventQueue.forEach(function(e){return n.onNext(e)}),this.errorQueue?(n.onError(this.errorQueue),this.clearObservers(),{unsubscribe:function(){}}):this.isCompleted?(n.onComplete(),this.clearObservers(),{unsubscribe:function(){}}):{unsubscribe:function(){t.observers=t.observers.filter(function(e){return e!==n})}}}},{key:"next",value:function(e){this.isCompleted||(this.isSubscribed?this.observers.forEach(function(t){t.onNext&&t.onNext(e)}):this.eventQueue.push(e))}},{key:"complete",value:function(){this.isCompleted||(this.isSubscribed&&(this.observers.forEach(function(e){e.onComplete&&e.onComplete()}),this.clearObservers()),this.isCompleted=!0)}},{key:"error",value:function(e){this.isCompleted||(this.isSubscribed?(this.observers.forEach(function(t){t.onError&&t.onError(e)}),this.clearObservers()):this.errorQueue=e,this.isCompleted=!0)}},{key:"clearObservers",value:function(){this.observers=[]}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Xn(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}var Wn=function(e){try{var t=new Kn,n=0,r=!1;return Object.keys(e).forEach(function(o){e[o].subscribe({next:function(e){return t.next({data:e,source:o})},complete:function(){++n!==Object.keys(e).length||r||t.complete()},error:function(e){r||(r=!0,t.error(e))}})}),t}catch(e){return new Kn}},Zn=function(e){return JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,name:null==e?void 0:e.name},(null==e?void 0:e.cause)&&{cause:null==e?void 0:e.cause}))};function Yn(e){for(var t=2166136261,n=0;n<e.length;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function Qn(e){var t;return(t=function(){var t;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return t=(new TextEncoder).encode(e),[4,crypto.subtle.digest("SHA-1",t)];case 1:var r;return[2,(function(e){if(Array.isArray(e))return Vn(e)}(r=new Uint8Array(n.sent()))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e){if(e){if("string"==typeof e)return Vn(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vn(e,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e){return e.toString(16).padStart(2,"0")}).join("")]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(e){Xn(i,r,o,s,a,"next",e)}function a(e){Xn(i,r,o,s,a,"throw",e)}s(void 0)})})()}var Jn={socket:{enableQueue:!1,maxRetryAttempts:5,retryTimeAfterExhaust:3e5,connTimeout:4e4,reconnectDelay:500},fallback:{maxRetryAttempts:1,connectionRetryDelay:500,sendRetryDelay:500},message:{retryDelay:500,ackTimeout:3e3,queueTimeout:1e4,maxRetries:1,cacheTtl:1728e5,wsBatchSize:20,fallBackBatchSize:10},observableTimeout:3e4,observableIdleTimeout:1e4,maxRetryEditorNotFound:3},$n={socketUrl:"wss://edit-stream.quillbot.com",fallbackUrl:"https://edit-stream.quillbot.com"};function er(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function tr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){er(i,r,o,s,a,"next",e)}function a(e){er(i,r,o,s,a,"throw",e)}s(void 0)})}}function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){rr(e,t,n[t])})}return e}function ir(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function sr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ar(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var cr=function(){var e,t;function n(e,t){var r=this;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");rr(this,"transport",void 0),rr(this,"msgController",void 0),rr(this,"_activeEditors",void 0),rr(this,"_activeObservables",void 0),rr(this,"_responseStream",void 0),rr(this,"sendAck",void 0),this.transport=e,this.msgController=t,this._activeEditors={},this._activeObservables={},this.sendAck=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data;r.msgController.sendViaSocket({event:re.ACK,data:e},!1)},this._responseStream=new ln(e.recoveryConfig.observableTimeout)}return e=[{key:"handleIncoming",value:function(e){var t=JSON.parse(e);ao(t,this.transport.pendingAcks,this._activeObservables),this._responseStream.handleResponse(t)}},{key:"processPending",value:function(){return tr(function(){var e;return ar(this,function(t){switch(t.label){case 0:return e=this,[4,this.msgController.queueManager.processQueue(Xe.INIT,function(t,n){return e.msgController.send(ir(or({},t),{fromQueue:!0}),n)})];case 1:return t.sent(),[4,this.msgController.queueManager.processQueue(Xe.GENERIC,function(t,n){return e.msgController.send(ir(or({},t),{fromQueue:!0}),n)})];case 2:return t.sent(),[2]}})}).call(this)}},{key:"sendPong",value:function(){this.msgController.sendViaSocket({event:re.PONG,data:{}},!1)}},{key:"updateSocketConn",value:function(){return tr(function(){return ar(this,function(e){switch(e.label){case 0:return[4,this.msgController.sendViaSocket({event:re.UPDATE_CONNECTION,data:{deviceMeta:this.transport.deviceMeta,userMeta:{anonId:this.transport.userMeta.anonId,abIdV2:this.transport.userMeta.abIdV2}}})];case 1:return e.sent(),[2]}})}).call(this)}},{key:"_initEditor",value:function(e,t){return tr(function(){var n,r,o,i,s,a,c,l,u;return ar(this,function(d){switch(d.label){case 0:if((null==(n=this._activeEditors[e.editorId])?void 0:n.initPromise)&&(null==(r=this._activeEditors[e.editorId])?void 0:r.ackStatus)!==ae.RESOLVED)return[2,this._activeEditors[e.editorId].initPromise];if((o=this._activeEditors[e.editorId])||(o={editorContentVersion:"",lastSentHash:"",ackStatus:ae.NOT_SENT,initPromise:null,fullContentHash:"",lastSentOt:""}),i="editorCategory"in e,s=null,o.ackStatus!==ae.NOT_SENT)return[3,6];o.ackStatus=ae.PENDING,d.label=1;case 1:return d.trys.push([1,3,4,5]),o.initPromise=this.msgController.send({event:i?re.INIT_EDITOR_V2:re.INIT_EDITOR,eventId:t,data:e},!0,e.signal),this._activeEditors[e.editorId]=o,[4,o.initPromise];case 2:return s=d.sent(),[3,5];case 3:if(((null==(a=d.sent())||null==(l=a.errorData)||null==(c=l.data)?void 0:c.errorCode)||(null==a||null==(u=a.details)?void 0:u.errorCode))===J.EDITOR_ALREADY_EXISTS)return[2,null];throw o.ackStatus=ae.NOT_SENT,a;case 4:return o.initPromise=null,[7];case 5:o.ackStatus=ae.RESOLVED,d.label=6;case 6:return i||(o.editorContentVersion=e.editorVersion),this._activeEditors[e.editorId]=o,[2,s]}})}).call(this)}},{key:"sendMessage",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Date.now(),i=be(o),s=!1;return new Et(function(a){var c=n._responseStream.eventResponseStream(i,{each:n.transport.recoveryConfig.observableIdleTimeout},r).subscribe(a);return s||(s=!0,tr(function(){var n;return ar(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),r?[4,this._handleContentChangeV2(i,e,t,o)]:[3,2];case 1:return s.sent(),[3,4];case 2:return[4,this._handleContentChange(i,e,t,o)];case 3:s.sent(),s.label=4;case 4:return[3,6];case 5:return n=s.sent(),a.error(n),[3,6];case 6:return[2]}})}).call(n)),function(){return c.unsubscribe()}})}},{key:"_handleContentChangeV2",value:function(e,t,n,r){return tr(function(e,t,n,r){var o,i,s,a,c,l,u,d,h,f,p,_,b,m,v,y,g,E,w,O,S,T,R,I,C,A,k,N,x,D,P,U,L=arguments;return ar(this,function(M){switch(M.label){case 0:if((o=L.length>4&&void 0!==L[4]?L[4]:Jn.maxRetryEditorNotFound)<0)throw Error("Max retry attempts reached for initializing editor");M.label=1;case 1:return M.trys.push([1,9,,13]),t!==re.ON_COMMAND?[3,3]:[4,this.msgController.send({event:t,data:n,eventTimestamp:r,eventId:e,retryCount:1})];case 2:return[2,M.sent()];case 3:return s=(i=n).editorCategory,a=i.hostUrl,c=i.product,l=i.hostCategory,u=i.editorCompleteText,d=i.meta.handleResponseCallback,h=sr(i.meta,["handleResponseCallback"]),f=sr(i,["editorCategory","hostUrl","product","hostCategory","editorCompleteText","meta"]),[4,Qn(u)];case 4:return p=M.sent(),this._activeEditors[i.editorId]?[3,6]:[4,this._initEditor({editorId:i.editorId,writingSessionId:i.writingSessionId,processingType:i.processingType,initialContent:i.processingChanges,editorCategory:s,editorGroupId:i.editorGroupId,hostUrl:a||"",hostCategory:l||"",product:c,meta:{userPreferredDialect:h.userPreferredDialect,language:h.language}},e)];case 5:return M.sent(),(_=i.processingChanges).length&&(null==d||d({editorId:i.editorId,savedText:u,lastChangedContentTimestamp:null!=(m=null==(b=_[_.length-1])?void 0:b.currentTimestamp)?m:Date.now()},pe.EDITOR_CONTENT_SAVE_ACK)),[3,8];case 6:return this._activeEditors[i.editorId].fullContentHash=p,this._activeEditors[i.editorId].lastSentOt=e,g=Yn(y=u.slice(0,1e3)),E=(null==(v=this._activeEditors[i.editorId])?void 0:v.lastSentHash)!==g,w=ir(or({},f),{meta:or({},h,E&&{editorStartText:y}),fullContentHash:p}),E&&(this._activeEditors[i.editorId].lastSentHash=g),[4,this.msgController.send({event:t,data:w,eventTimestamp:r,eventId:e,retryCount:1},!0,i.signal)];case 7:O=M.sent(),(S=(null==i?void 0:i.changes)||[]).length&&O.requestEventId===this._activeEditors[i.editorId].lastSentOt?null==d||d({editorId:i.editorId,savedText:u,lastChangedContentTimestamp:S[S.length-1].currentTimestamp},pe.EDITOR_CONTENT_SAVE_ACK):null==(I=(C=this.transport).trackEvent)||I.call(C,{logger:{eventName:Te,eventData:{currentOt:e,editorId:i.editorId,lastSentOt:this._activeEditors[i.editorId].lastSentOt,lastSentContentTimestamp:null==(T=S[S.length-1])?void 0:T.lastTimestamp,currentContentTimestamp:null==(R=S[S.length-1])?void 0:R.currentTimestamp}}}),M.label=8;case 8:return[3,13];case 9:return((null==(A=M.sent())||null==(N=A.errorData)||null==(k=N.data)?void 0:k.errorCode)||(null==A||null==(x=A.details)?void 0:x.errorCode))!==J.EDITOR_NOT_FOUND?[3,12]:(delete this._activeEditors[n.editorId],P=(D=Date.now())+1,U=ir(or({},n),{processingType:se.NONE,processingChanges:[{text:n.editorCompleteText,lastTimestamp:D,currentTimestamp:P,start:0,offset:0}]}),[4,this._handleContentChangeV2("",t,U,r,o-1)]);case 10:return M.sent(),[4,this._handleContentChangeV2(e,t,ir(or({},n),{changes:[{start:-1,end:-1,text:"",lastTimestamp:P,currentTimestamp:P}]}),r,o-1)];case 11:return M.sent(),[2];case 12:throw A;case 13:return[2]}})}).apply(this,arguments)}},{key:"_handleContentChange",value:function(e,t,n,r){return tr(function(e,t,n,r){var o,i,s,a,c,l=arguments;return ar(this,function(u){switch(u.label){case 0:if((o=l.length>4&&void 0!==l[4]?l[4]:Jn.maxRetryEditorNotFound)<0)throw Error("Max retry attempts reached for initializing editor");u.label=1;case 1:return u.trys.push([1,4,,7]),[4,this._initEditor({editorGroupId:n.editorGroupId,editorId:n.editorId,editorVersion:n.editorContentVersion,hostUrl:n.hostUrl||"",product:n.product})];case 2:return u.sent(),[4,this.msgController.send({event:t,data:n,eventTimestamp:r,eventId:e,retryCount:1})];case 3:return u.sent(),[3,7];case 4:return((null==(i=u.sent())||null==(a=i.errorData)||null==(s=a.data)?void 0:s.errorCode)||(null==i||null==(c=i.details)?void 0:c.errorCode))!==J.EDITOR_NOT_FOUND?[3,6]:(delete this._activeEditors[n.editorId],[4,this._handleContentChange(e,t,n,r,o-1)]);case 5:return u.sent(),[2];case 6:throw i;case 7:return[2]}})}).apply(this,arguments)}},{key:"_setActiveObservables",value:function(e,t){this._activeObservables[e]=t}},{key:"updateEditorContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return tr(function(){var n,r,o,i,s,a,c,l,u,d,h,f,p,_,b,m,v,y,g,E,w,O,S,T,R,I,C,A,k,N,x,D,P,U;return ar(this,function(L){switch(L.label){case 0:return n=this,[4,this._initEditor({editorGroupId:e.editorGroupId,editorId:e.editorId,editorVersion:e.editorContentVersion,hostUrl:e.hostUrl||"",hostCategory:e.hostCategory||"",product:e.product})];case 1:if(L.sent(),o=e.editorCompleteText,e.hostUrl,e.product,e.hostCategory,i=e.meta,s=sr(e,["editorCompleteText","hostUrl","product","hostCategory","meta"]),c=Yn(a=o.slice(0,1e3)),l=this.transport.socketState===fe.READY?this.transport.recoveryConfig.message.wsBatchSize:this.transport.recoveryConfig.message.fallBackBatchSize,u=[],e.changes.length<=10)u.push(e.changes);else for(d=0;d<e.changes.length;d+=l)h=e.changes.slice(d,d+l),u.push(h);f=-1,p=Date.now(),_={},b={},m=(null==(r=this._activeEditors[e.editorId])?void 0:r.lastSentHash)!==c,v=!0,y=!1,g=void 0,L.label=2;case 2:L.trys.push([2,18,19,20]),E=u[Symbol.iterator](),L.label=3;case 3:if(v=(w=E.next()).done)return[3,17];O=w.value,f+=1,S={event:re.ON_CHANGE,data:ir(or({},s),{changes:O.filter(function(e){return""!==e.text}).map(function(t){return or({text:t.text,processingType:t.processingType},(null==e?void 0:e.acceptChangeType)&&{changeSentenceLength:t.changeSentenceLength,replacementText:t.replacementText},t.rteMap&&{rteMap:t.rteMap})}),meta:or({},i,m&&{editorStartText:a})}),eventTimestamp:p,eventId:be(p)},m&&(this._activeEditors[e.editorId].lastSentHash=c),T=0,R=!1,L.label=4;case 4:L.trys.push([4,11,,16]),C=function(t){var r,o,i,s,a,c,u,d;return ar(this,function(h){switch(h.label){case 0:return r=new Kn,_[o=f*l+t]=r,i=void 0,[se.GC_WITH_RECOMMENDATION,se.RECOMMENDATION].includes(O[t].processingType)&&(i=new Kn,b[o]=i),""!==O[t].text?[3,1]:(r.next({type:he.SentenceSplitter,sentenceRanges:[[0,0]]}),r.complete(),null==i||i.complete(),[3,3]);case 1:return s="".concat(S.eventId,"_").concat(T),[4,Gn(a="".concat(re.ON_CHANGE,"-").concat(O[t].text,"-").concat(O[t].processingType,"-").concat(S.data.meta.userPreferredDialect,"-").concat(S.data.meta.language).concat(I.transport.userMeta.premium?"-".concat(I.transport.userMeta.premium):""))];case 2:u=(c=h.sent())&&Object.keys(c).length,d=new zn(function(e,t,r){var o,i;delete n._activeObservables[e],u||r||(o=a,i=n.transport.recoveryConfig.message.cacheTtl,Mn&&o&&(null==Mn||Mn.set(o,t,i)))},s,r,I.transport.recoveryConfig.observableTimeout,{text:O[t].text,editorId:e.editorId,editorGroupId:e.editorGroupId,changeIndex:T},e.signal,O[t].processingType,i),I._setActiveObservables(s,d),u?(d.sendBulk(c,!0),S.data.changes[T].processingType=se.NONE):R=!0,T+=1,h.label=3;case 3:return[2]}})},A=0,L.label=5;case 5:return A<O.length?(I=this,[5,function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(C(A))]):[3,8];case 6:L.sent(),L.label=7;case 7:return A+=1,[3,5];case 8:return S.data.changes.length>0?[4,this.msgController.send(S,R,e.signal)]:[3,10];case 9:L.sent(),L.label=10;case 10:case 15:return[3,16];case 11:return((null==(k=L.sent())||null==(x=k.errorData)||null==(N=x.data)?void 0:N.errorCode)===J.EDITOR_NOT_FOUND||(null==k||null==(D=k.details)?void 0:D.errorCode)===J.EDITOR_NOT_FOUND)&&t<Jn.maxRetryEditorNotFound?(delete this._activeEditors[null==e?void 0:e.editorId],P=o.split("\n\n").map(function(e){return{text:e,processingType:se.NONE}}),[4,this.updateEditorContent(ir(or({},e),{changes:P,changeType:ie.USER_CHANGE}),t+1)]):[3,14];case 12:return L.sent(),[4,this.msgController.send(S,!0,e.signal)];case 13:return L.sent(),[3,15];case 14:throw k;case 16:return v=!0,[3,3];case 17:return[3,20];case 18:return U=L.sent(),y=!0,g=U,[3,20];case 19:try{v||null==E.return||E.return()}finally{if(y)throw g}return[7];case 20:return[2,{gcMergedObservable:Wn(_),recommendationMergedObservable:Wn(b)}]}})}).call(this)}},{key:"reinitializeWritingSession",value:function(e){return tr(function(){return ar(this,function(t){switch(t.label){case 0:return[4,ze({transport:this.transport,errorCode:ee.EXPIRED_WRITING_SESSION,eventData:e})];case 1:return t.sent(),[2]}})}).call(this)}},{key:"getActiveEditor",value:function(e){return this._activeEditors[e]}}],t=[{key:"setInstance",value:function(e){n._instance=e}},{key:"getInstance",value:function(){if(!n._instance)throw Error("MessageService has not been initialised yet");return n._instance}}],e&&nr(n.prototype,e),t&&nr(n,t),n}();function lr(e,t,n){return(lr=fr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&dr(o,n.prototype),o}).apply(null,arguments)}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e){var t="function"==typeof Map?new Map:void 0;return(hr=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return lr(e,arguments,ur(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),dr(n,e)})(e)}function fr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fr=function(){return!!e})()}rr(cr,"_instance",void 0);var pr=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(e){var t,r,o,i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return r=[e],t=ur(t=n),s=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,fr()?Reflect.construct(t,r||[],ur(this).constructor):t.apply(this,r)),i=void 0,(o="details")in s?Object.defineProperty(s,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[o]=i,s.name=s.constructor.name,s.details=a,Error.captureStackTrace&&Error.captureStackTrace(s,s.constructor),s}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&dr(n,e),t=[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," ").concat(Object.keys(this.details).length?"| Details: ".concat(JSON.stringify(this.details)):"")}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(hr(Error));function _r(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function br(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){_r(i,r,o,s,a,"next",e)}function a(e){_r(i,r,o,s,a,"throw",e)}s(void 0)})}}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){vr(e,t,n[t])})}return e}function gr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Er(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var wr=function(){var e,t;function n(){if(!(this instanceof n))throw TypeError("Cannot call a class as a function");vr(this,"baseURL",""),vr(this,"defaultHeaders",{"Content-Type":"application/json"}),vr(this,"retryConfig",{maxRetries:0,retryDelay:1e3})}return e=[{key:"executeRequest",value:function(e,t){return br(function(e,t){var n,r,o,i,s,a,c,l,u,d,h=arguments;return Er(this,function(f){switch(f.label){case 0:if(n=this,r=h.length>2&&void 0!==h[2]?h[2]:{},o=h.length>3&&void 0!==h[3]?h[3]:0,!this.baseURL)throw Error("Base URL not set. Please call setBaseURL before making requests.");f.label=1;case 1:return f.trys.push([1,7,,10]),i="".concat(this.baseURL).concat(t.startsWith("/")?t:"/".concat(t)),s={method:e,headers:yr({},this.defaultHeaders,r.headers)},r.body&&(s.body=JSON.stringify(r.body)),r.signal&&(s.signal=r.signal),[4,fetch(i,s)];case 2:a=f.sent(),f.label=3;case 3:return f.trys.push([3,5,,6]),[4,a.json()];case 4:return c=f.sent(),[3,6];case 5:return[3,6];case 6:if(!a.ok)throw null==(l=r.responseCallback)||l.call(r,a,c),new pr(c.message||"Request failed",c);return[2,c];case 7:return u=f.sent(),d=r.retries||this.retryConfig.maxRetries,o<d?[4,new Promise(function(e){return setTimeout(e,n.retryConfig.retryDelay)})]:[3,9];case 8:return f.sent(),[2,this.executeRequest(e,t,r,o+1)];case 9:throw u;case 10:return[2]}})}).apply(this,arguments)}},{key:"setBaseURL",value:function(e){return this.baseURL=e.endsWith("/")?e.slice(0,-1):e,this}},{key:"getBaseURL",value:function(){return this.baseURL}},{key:"setDefaultHeaders",value:function(e){return this.defaultHeaders=yr({"Content-Type":"application/json"},e),this}},{key:"setDefaultHeader",value:function(e,t){return this.defaultHeaders[e]=t,this}},{key:"removeDefaultHeader",value:function(e){return delete this.defaultHeaders[e],this}},{key:"getDefaultHeaders",value:function(){return yr({},this.defaultHeaders)}},{key:"setRetryConfig",value:function(e){return this.retryConfig=yr({},e),this}},{key:"getRetryConfig",value:function(){return yr({},this.retryConfig)}},{key:"get",value:function(e,t){return br(function(){return Er(this,function(n){return[2,this.executeRequest("get",e,t)]})}).call(this)}},{key:"post",value:function(e,t,n){return br(function(){return Er(this,function(r){return[2,this.executeRequest("post",e,gr(yr({},n),{body:t}))]})}).call(this)}},{key:"put",value:function(e,t,n){return br(function(){return Er(this,function(r){return[2,this.executeRequest("put",e,gr(yr({},n),{body:t}))]})}).call(this)}},{key:"delete",value:function(e,t){return br(function(){return Er(this,function(n){return[2,this.executeRequest("delete",e,t)]})}).call(this)}},{key:"_readStream",value:function(e,t,n,r){return br(function(){var o,i,s,a,c,l,u,d,h,f,p,_,b,m,v,y,g,E;return Er(this,function(w){switch(w.label){case 0:o="",i=setTimeout(function(){},0),s=(null==t?void 0:t.timeout)||3e4,a=function(){clearTimeout(i),i=setTimeout(function(){var t=new pr("Stream message timeout after ".concat(s,"ms"),{type:"stream_timeout",timeout:s});e.cancel(),r(t)},s)},w.label=1;case 1:w.trys.push([1,5,6,7]),a(),w.label=2;case 2:return[4,e.read()];case 3:if(l=(c=w.sent()).value,u=c.done,a(),u)return[3,4];if(l){o=null!=(f=(h=(o+=l).split("__".concat(null==(d=t.data)?void 0:d.connSessionId,"__\n"))).pop())?f:"",p=!0,_=!1,b=void 0;try{for(m=h[Symbol.iterator]();!(p=(v=m.next()).done);p=!0)if(y=v.value.trim())try{g=JSON.parse(y),null==t||t.onData(g)}catch(e){}}catch(e){_=!0,b=e}finally{try{p||null==m.return||m.return()}finally{if(_)throw b}}}return[3,2];case 4:if(o.trim())try{E=JSON.parse(o.trim()),null==t||t.onData(E)}catch(e){}return clearTimeout(i),null==t||t.onEnd(),[2,n({})];case 5:return r(w.sent()),[3,7];case 6:return clearTimeout(i),[7];case 7:return[2]}})})()}},{key:"stream",value:function(e,t){return br(function(){var n;return Er(this,function(r){return n=this,[2,new Promise(function(r,o){br(function(){var n,i,s,a,c,l,u,d,h,f,p,_;return Er(this,function(b){switch(b.label){case 0:if(!this.baseURL)return o(Error("Base URL not set. Please call setBaseURL before making requests.")),[2];b.label=1;case 1:return b.trys.push([1,8,,9]),n="".concat(this.baseURL).concat(e.startsWith("/")?e:"/".concat(e)),s={method:i=(null==t?void 0:t.method)||"POST",headers:yr(gr(yr({},this.defaultHeaders),{Accept:"text/event-stream"}),null==t?void 0:t.headers),signal:null==t?void 0:t.signal},(null==t?void 0:t.data)&&"POST"===i&&(s.body=JSON.stringify(t.data)),[4,fetch(n,s)];case 2:if((a=b.sent()).ok)return[3,7];b.label=3;case 3:return b.trys.push([3,5,,6]),[4,a.json()];case 4:return l=b.sent(),[3,6];case 5:return b.sent(),l={message:"Request failed",status:a.status},[3,6];case 6:return u=new pr(l.message||"Request failed",l),null==t||null==(c=t.onError)||c.call(t,u),o(u),[2];case 7:return a.body?(f=a.body.pipeThrough(new TextDecoderStream).getReader(),this._readStream(f,t,r,o),[3,9]):(h=Error("Empty response body"),null==t||null==(d=t.onError)||d.call(t,h),o(h),[2]);case 8:return p=b.sent(),null==t||null==(_=t.onError)||_.call(t,p),o(p),[3,9];case 9:return[2]}})}).call(n)})]})}).call(this)}}],t=[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}},{key:"resetInstance",value:function(){n.instance=null}}],e&&mr(n.prototype,e),t&&mr(n,t),n}();function Or(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Sr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){Or(i,r,o,s,a,"next",e)}function a(e){Or(i,r,o,s,a,"throw",e)}s(void 0)})}}function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Rr(e,t,n[t])})}return e}function Cr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Ar(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}vr(wr,"instance",null);var kr=function(){var e,t;function n(){var e=this;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");Rr(this,"connectionReattempts",0),Rr(this,"sendReattempts",0),Rr(this,"_currentConnectionPromise",null),Rr(this,"maxReconnectAttempts",Jn.fallback.maxRetryAttempts),Rr(this,"sendRetryDelay",Jn.fallback.sendRetryDelay),Rr(this,"trackEvent",function(){}),Rr(this,"resetConnectionSession",function(){}),Rr(this,"setConnectionSessionId",function(){}),Rr(this,"httpClient",wr.getInstance()),Rr(this,"authHandlers",{logout:function(){},getIdToken:function(){return Promise.resolve("")}}),Rr(this,"deviceMeta",{}),Rr(this,"userMeta",{anonId:"",abIdV2:""}),Rr(this,"headers",{"Content-Type":"application/json"}),Rr(this,"_responseCallback",function(t,n){var r,o={eventName:ge,eventData:{statusCode:t.status,requestUrl:t.url,errorCode:(null==n?void 0:n.errorCode)||"UNKNOWN"}};403===t.status&&(o.eventData.rayID=t.headers.get("cf-ray")||"",o.eventData.cfStatus=t.headers.get("cf-mitigated")),null==(r=e.trackEvent)||r.call(e,{logger:o})}),Rr(this,"httpStream",function(t,n,r){return Sr(function(){var e,o;return Ar(this,function(i){switch(i.label){case 0:e=this,o=function(){return Sr(function(){var e,o,i,s,a,c;return Ar(this,function(l){switch(l.label){case 0:return o=(e=this.httpClient).stream,i=["/ws/fallback/event-stream"],s={method:"POST",data:t},a=[Ir({},this.headers)],c={},[4,this.authHandlers.getIdToken(!1)];case 1:return[4,o.apply(e,i.concat([Ir.apply(void 0,[(s.headers=Cr.apply(void 0,a.concat([(c.useridtoken=l.sent()||"",c)])),s.timeout=3e4,s.streamTimeout=5e3,s),n,(null==r?void 0:r.signal)&&{signal:r.signal}])]))];case 2:return l.sent(),[2]}})}).call(e)},i.label=1;case 1:return i.trys.push([1,3,,5]),[4,o()];case 2:case 4:return[2,i.sent()];case 3:return[4,this._handleError(undefined,t,o,(null==r?void 0:r.signal)||void 0)];case 5:return[2]}})}).call(e)})}return e=[{key:"setHttpClient",value:function(e){this.httpClient=e}},{key:"setConfig",value:function(e){this.authHandlers=e.authHandlers,this.trackEvent=e.trackEvent,this.resetConnectionSession=e.resetConnectionSession,this.setConnectionSessionId=e.setConnectionSessionId,this.deviceMeta=e.deviceMeta,this.userMeta=e.userMeta,this.httpClient&&this.httpClient.setBaseURL&&this.httpClient.setBaseURL(e.baseUrl),this.maxReconnectAttempts=e.maxReconnectAttempts}},{key:"setHeaders",value:function(e){this.headers=Ir({},this.headers,e)}},{key:"handleAuthError",value:function(e){return Sr(function(){var t,n,r;return Ar(this,function(o){switch(o.label){case 0:return[Q.TOKEN_EXPIRED].includes(null==(t=e.details)?void 0:t.errorCode)?[4,this.authHandlers.getIdToken(!0)]:[3,2];case 1:return o.sent(),[2];case 2:[Q.FORCE_PASSWORD_CHANGE,Q.TOKEN_REVOKED].includes(null==(n=e.details)?void 0:n.errorCode)&&(null==(r=this.authHandlers)||r.logout("EXTERNAL_MESSAGE")),o.label=3;case 3:throw e}})}).call(this)}},{key:"establishConnection",value:function(e){return Sr(function(e){var t,n,r,o;return Ar(this,function(i){if(t=this,n=e.connSessionId,r=e.connectionData,o=e.signal,!this.httpClient)throw Error("HTTP client not set");return this._currentConnectionPromise||(this._currentConnectionPromise=Sr(function(){var e,t,i,s,a,c,l,u,d,h;return Ar(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,9,10]),s=(i=this.httpClient).post,a=["/api/ws/fallback/connection-session",Ir({},r,n&&{connSessionId:n})],c={},l=[Ir({},this.headers)],u={},[4,this.authHandlers.getIdToken(!1)];case 1:return[4,s.apply(i,a.concat([(c.headers=Cr.apply(void 0,l.concat([(u.useridtoken=f.sent()||"",u)])),c)]))];case 2:return t=f.sent(),this.connectionReattempts=0,this.setConnectionSessionId(null==(e=t.data)?void 0:e.connSessionId),[2,t.data];case 3:return d=f.sent(),Object.values(Q).includes(null==(h=d.details)?void 0:h.errorCode)?[4,this.handleAuthError(d)]:[3,5];case 4:f.sent(),f.label=5;case 5:return this.connectionReattempts<this.maxReconnectAttempts?(this.connectionReattempts++,this._currentConnectionPromise=null,[4,new Promise(function(e){return setTimeout(e,Jn.fallback.connectionRetryDelay)})]):[3,7];case 6:return f.sent(),[2,this.establishConnection({connectionData:r,signal:o})];case 7:this.connectionReattempts=0,f.label=8;case 8:throw Error("Failed to establish connection after ".concat(this.maxReconnectAttempts," attempts"));case 9:return this._currentConnectionPromise=null,[7];case 10:return[2]}})}).call(t)),[2,this._currentConnectionPromise]})}).apply(this,arguments)}},{key:"_handleError",value:function(e,t,n,r){return Sr(function(){var o,i,s,a,c,l,u,d,h,f,p;return Ar(this,function(_){switch(_.label){case 0:return o=this,d=null==e||null==(s=e.errorData)||null==(i=s.data)?void 0:i.retryConfig,Object.values(Q).includes(null==(a=e.details)?void 0:a.errorCode)?[4,this.handleAuthError(e)]:[3,2];case 1:_.sent(),_.label=2;case 2:if([J.EDITOR_NOT_FOUND,J.EDITOR_ALREADY_EXISTS].includes(null==(c=e.details)?void 0:c.errorCode)&&e.details.statusCode===ne.InternalServerError)throw e;return[ee.INVALID_OR_EXPIRED_SESSION].includes(null==(l=e.details)?void 0:l.errorCode)?(this.resetConnectionSession(null==(h=e.details)?void 0:h.errorCode),[4,this.establishConnection({connectionData:{anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2,deviceMeta:this.deviceMeta},signal:r})]):[3,4];case 3:t.connSessionId=_.sent().connSessionId,_.label=4;case 4:return[ee.EXPIRED_WRITING_SESSION].includes(null==(u=e.details)?void 0:u.errorCode)?[4,cr.getInstance().reinitializeWritingSession(e.details)]:[3,6];case 5:_.sent(),_.label=6;case 6:return d&&(this.maxReconnectAttempts=null!=(f=d.maxRetry)?f:this.maxReconnectAttempts,this.sendRetryDelay=null!=(p=d.retryDelay)?p:this.sendRetryDelay),this.sendReattempts<this.maxReconnectAttempts?(this.sendReattempts++,[4,new Promise(function(e){return setTimeout(e,o.sendRetryDelay)})]):[3,8];case 7:return _.sent(),[2,n()];case 8:throw this.sendReattempts=0,e;case 9:return[2]}})}).call(this)}},{key:"sendEvent",value:function(e){return Sr(function(e){var t,n,r,o,i,s,a;return Ar(this,function(c){switch(c.label){case 0:if(t=this,n=e.eventData,r=e.signal,!this.httpClient)throw Error("HTTP client not set");return n.connSessionId?[3,2]:(this.resetConnectionSession(ee.EMPTY_CONNECTION_ID),[4,this.establishConnection({connectionData:{anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2,deviceMeta:this.deviceMeta},signal:r})]);case 1:o=c.sent(),n.connSessionId=o.connSessionId,c.label=2;case 2:i=function(){return Sr(function(){var e,t,o,i,s,a,c;return Ar(this,function(l){switch(l.label){case 0:return o=(t=this.httpClient).post,i=["/api/ws/fallback/event",n],s={},a=[Ir({},this.headers)],c={},[4,this.authHandlers.getIdToken(!1)];case 1:return[4,o.apply(t,i.concat([(s.headers=Cr.apply(void 0,a.concat([(c.useridtoken=l.sent()||"",c)])),s.signal=r,s.responseCallback=this._responseCallback,s)]))];case 2:return e=l.sent(),this.sendReattempts=0,[2,{success:!0,data:e.data}]}})}).call(t)},c.label=3;case 3:return c.trys.push([3,5,,10]),[4,i()];case 4:return[2,c.sent()];case 5:s=c.sent(),c.label=6;case 6:return c.trys.push([6,8,,9]),[4,this._handleError(s,n,i,r)];case 7:return[2,c.sent()];case 8:var l,u;return[2,{success:!1,message:(l=a=c.sent(),(null!=(u=Error)&&"undefined"!=typeof Symbol&&u[Symbol.hasInstance]?u[Symbol.hasInstance](l):l instanceof u)?a.message:"Unknown error occurred")}];case 9:return[3,10];case 10:return[2]}})}).apply(this,arguments)}},{key:"disconnect",value:function(){this.connectionReattempts=0,this.sendReattempts=0}}],t=[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}],e&&Tr(n.prototype,e),t&&Tr(n,t),n}();function Nr(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function xr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){Nr(i,r,o,s,a,"next",e)}function a(e){Nr(i,r,o,s,a,"throw",e)}s(void 0)})}}function Dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Dr(e,t,n[t])})}return e}function Ur(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}Rr(kr,"instance",null);var Lr=function(){var e;function t(e,n){var r=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");Dr(this,"transport",void 0),Dr(this,"wsClient",void 0),Dr(this,"_initialisationPromise",void 0),Dr(this,"establishSocketConnection",void 0),this.transport=e,this.wsClient=n,this._initialisationPromise=null,this.establishSocketConnection=function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isReconnect,o=void 0!==n&&n;return r._shouldAttemptConnection(o)&&(null==(e=(t=r.transport).trackEvent)||e.call(t,{logger:{eventName:Re,eventData:{currentTime:Date.now(),isFirstConnection:!r.transport.connectedInitially&&!r.transport.connectionSessionId,isReconnect:o,retryAttempt:r.transport.retryAttempts,socketState:r.transport.socketState,connSessionId:r.transport.connectionSessionId,connectedInitially:r.transport.connectedInitially,lastConnAttemptTime:r.transport.lastConnAttemptTime,errorCode:r.transport.errorCode}}}),r._initialisationPromise=new Promise(function(e,t){r._establishSocketConnection({isReconnect:o,resolve:e,reject:t})})),r._initialisationPromise}}return e=[{key:"_establishSocketConnection",value:function(e){return xr(function(e){var t,n,r,o,i,s,a,c,l,u,d,h;return Ur(this,function(f){switch(f.label){case 0:t=this,n=e.isReconnect,r=e.resolve,o=e.reject,f.label=1;case 1:return f.trys.push([1,6,,7]),n?[4,this._delayConnection()]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,this._getConnectionData(n?{retry:this.transport.retryAttempts}:{})];case 4:return a=f.sent(),this.transport.retryAttempts+=1,this.transport.lastConnAttemptTime=Date.now(),this._socketStateTimer(),c=setTimeout(function(){t.transport.socketState!==fe.READY&&t.transport.pendingAcks.has(me)&&(o(Error("Connection timeout")),t.transport.pendingAcks.delete(me),t.clearInitPromise())},this.transport.recoveryConfig.socket.connTimeout),this.transport.pendingAcks.set(me,{resolve:r,reject:o,timeout:c}),[4,this.wsClient.connect(a)];case 5:return f.sent(),this.transport.socketState=fe.CONNECTED,null==(i=(s=this.transport).trackEvent)||i.call(s,{logger:{eventName:Ce,eventData:{currentTime:Date.now(),isFirstConnection:!this.transport.connectedInitially&&!this.transport.connectionSessionId,retryAttempt:this.transport.retryAttempts,connectedInitially:this.transport.connectedInitially,connSessionId:this.transport.connectionSessionId,lastConnAttemptTime:this.transport.lastConnAttemptTime,socketState:this.transport.socketState}}}),[3,7];case 6:return l=f.sent(),this.transport.socketState=fe.ERRORED,this.clearInitPromise(),this.transport.pendingAcks.has(me)&&((h=this.transport.pendingAcks.get(me).timeout)&&clearTimeout(h),this.transport.pendingAcks.delete(me)),null==(u=(d=this.transport).trackEvent)||u.call(d,{logger:{eventName:Ae,eventData:{currentTime:Date.now(),isFirstConnection:!this.transport.connectedInitially&&!this.transport.connectionSessionId,retryAttempt:this.transport.retryAttempts,connectedInitially:this.transport.connectedInitially,error:Zn(l),socketState:this.transport.socketState,connSessionId:this.transport.connectionSessionId,lastConnAttemptTime:this.transport.lastConnAttemptTime,errorCode:this.transport.errorCode}}}),o(l),[3,7];case 7:return[2]}})}).apply(this,arguments)}},{key:"_shouldAttemptConnection",value:function(e){var t=this.transport,n=t.socketState,r=t.recoveryConfig,o=t.retryAttempts;return!([fe.CONNECTING,fe.CONNECTED,fe.AUTH_SUCCESS].includes(n)||this._initialisationPromise||(o>=r.socket.maxRetryAttempts?(this.transport.socketState=fe.RETRY_EXHAUSTED,1):e&&n===fe.READY&&this.wsClient.isOpen()||(this.transport.socketState=fe.CONNECTING,0)))}},{key:"_delayConnection",value:function(){return xr(function(){var e;return Ur(this,function(t){switch(t.label){case 0:return e=Math.min(this.transport.recoveryConfig.socket.reconnectDelay*Math.pow(2,this.transport.retryAttempts),3e4),[4,new Promise(function(t){return setTimeout(t,e)})];case 1:return t.sent(),[2]}})}).call(this)}},{key:"_getAuthToken",value:function(){return xr(function(){return Ur(this,function(e){switch(e.label){case 0:return[4,this.transport.authHandlers.getIdToken(!1)];case 1:return[2,e.sent()||""]}})}).call(this)}},{key:"_getConnectionData",value:function(){return xr(function(){var e,t,n=arguments;return Ur(this,function(r){switch(r.label){case 0:return e=(n.length>0&&void 0!==n[0]?n[0]:{}).retry,[4,this._getAuthToken()];case 1:var o,i;return t=r.sent(),[2,Pr((o=Pr({},this.transport.userMeta),i=i={userToken:t,platformType:this.transport.deviceMeta.platformType},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o),this.transport.connectionSessionId?{connectionSessionId:this.transport.connectionSessionId}:{connectionSessionId:this.transport.connectionConfig.connSessionId||""},void 0!==e&&{retry:e})]}})}).apply(this,arguments)}},{key:"_socketStateTimer",value:function(){var e=this;this.transport.socketStateTimeout&&clearTimeout(this.transport.socketStateTimeout),this.transport.socketStateTimeout=setTimeout(function(){[fe.CONNECTING,fe.CONNECTED,fe.AUTH_SUCCESS].includes(e.transport.socketState)&&e.transport.setErroredState(void 0)},this.transport.recoveryConfig.socket.connTimeout)}},{key:"clearInitPromise",value:function(){this._initialisationPromise=null}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function Mr(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function jr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){Mr(i,r,o,s,a,"next",e)}function a(e){Mr(i,r,o,s,a,"throw",e)}s(void 0)})}}function Gr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var Fr=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"executeWithExponentialBackoff",value:function(e,n,r,o,i,s){return jr(function(){var a,c,l,u,d,h,f,p,_,b;return Gr(this,function(m){switch(m.label){case 0:a=e,c=n,l=500,u=-1,m.label=1;case 1:if(!(u<a))return[3,8];m.label=2;case 2:return m.trys.push([2,4,,7]),[4,r({retryCount:u<=0?u+1:u})];case 3:return[2,m.sent()];case 4:if(o(d=m.sent()),s&&!s(d))throw d;return p=null==d||null==(f=d.errorData)||null==(h=f.data)?void 0:h.retryConfig,-1===u&&p&&(c=null!=(_=null==p?void 0:p.retryDelay)?_:n,a=null!=(b=null==p?void 0:p.maxRetry)?b:e),[4,null==i?void 0:i(d)];case 5:if(m.sent(),++u>=a)throw d;return[4,t.delay(l)];case 6:return m.sent(),l=Math.min(c*Math.pow(2,u+1),3e4),[3,7];case 7:return[3,1];case 8:return[2]}})})()}},{key:"delay",value:function(e){return jr(function(){return Gr(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function Hr(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Br(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){Hr(i,r,o,s,a,"next",e)}function a(e){Hr(i,r,o,s,a,"throw",e)}s(void 0)})}}function zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){zr(e,t,n[t])})}return e}function Kr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Vr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}var Xr=function(){var e;function t(e,n){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");zr(this,"transport",void 0),zr(this,"wsClient",void 0),zr(this,"queueManager",void 0),this.transport=e,this.wsClient=n,this.queueManager=We.getInstance()}return e=[{key:"send",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2?arguments[2]:void 0;return Br(function(){var r,o,i,s,a,c,l;return Vr(this,function(u){switch(u.label){case 0:if(r=this,(i=this.transport).connectionSessionId)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,i.establishSocketConnection({isReconnect:!0})];case 2:return u.sent(),[3,4];case 3:return s=u.sent(),i._trackTransportError(s,"TRANSPORT_SEND"),[3,4];case 4:return a=e.eventTimestamp||Date.now(),c=e.eventId||be(a),!(e=Kr(qr({},e),{eventId:c,eventTimestamp:a})).fromQueue&&i.recoveryConfig.socket.enableQueue&&[fe.CONNECTING,fe.CONNECTED,fe.ERRORED,fe.AUTH_SUCCESS].includes(i.socketState)?(i.socketState===fe.ERRORED&&i.establishSocketConnection({isReconnect:!0}),[2,new Promise(function(o,s){var a=e.event===re.INIT_EDITOR?Xe.INIT:Xe.GENERIC;r.queueManager.enqueue(a,e,t,i.recoveryConfig.message.queueTimeout,{resolve:o,reject:s,timeoutHandler:function(){return Br(function(){return Vr(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._sendViaHttp(e,n)];case 1:return o(t.sent()),[3,3];case 2:return s(t.sent()),[3,3];case 3:return[2]}})}).call(r)}})})]):i.socketState!==fe.READY||!this.wsClient.isOpen()||i.isFallbackEnabled?[3,6]:(null==(l=i.trackEvent)||l.call(i,{logger:{eventName:Ne,eventData:{event:e.event,currentTime:Date.now(),waitForAck:t,retryCount:e.retryCount||0,connSessionId:i.connectionSessionId}}}),[4,Fr.executeWithExponentialBackoff(i.recoveryConfig.message.maxRetries,i.recoveryConfig.message.retryDelay,function(n){return r.sendViaSocket(Kr(qr({},e),{retryCount:n.retryCount}),t)},function(t){var n,o,s;null==(s=i.trackEvent)||s.call(i,{logger:{eventName:xe,eventData:{currentTime:Date.now(),event:e.event,timeSinceSent:Date.now()-a,socketState:i.socketState,isWsOpen:r.wsClient.isOpen(),connSessionId:i.connectionSessionId,errorCode:null==t||null==(o=t.errorData)||null==(n=o.data)?void 0:n.errorCode}}})},function(e){return Br(function(){var t,n,r,o;return Vr(this,function(s){switch(s.label){case 0:return(null==e||null==(n=e.errorData)||null==(t=n.data)?void 0:t.errorCode)!==ee.INVALID_OR_EXPIRED_SESSION?[3,2]:(i.resetConnectionSession(null==e||null==(o=e.errorData)||null==(r=o.data)?void 0:r.errorCode),[4,i.establishSocketConnection()]);case 1:s.sent(),s.label=2;case 2:return[2]}})})()},ye)]);case 5:case 7:return[2,u.sent()];case 6:return null==(o=i.trackEvent)||o.call(i,{logger:{eventName:Se,eventData:{event:e.event,socketState:i.socketState,isWsOpen:this.wsClient.isOpen(),retryAttempts:i.retryAttempts,errorCode:i.errorCode,connectionSessionId:i.connectionSessionId,connectedInitially:i.connectedInitially,lastConnAttemptTime:i.lastConnAttemptTime,currentTime:Date.now(),isFallbackEnabled:i.isFallbackEnabled,fromQueue:e.fromQueue||!1}}}),[4,this._sendViaHttp(e,n)]}})}).call(this)}},{key:"sendViaSocket",value:function(e){var t=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=this.transport;return new Promise(function(o,i){var s=e.eventTimestamp||Date.now(),a=e.eventId||be(s);if(n){var c=setTimeout(function(){var e;r.pendingAcks.has(a)&&(null==(e=r.pendingAcks.get(a))||e.reject({shouldRetry:!0,errorData:{data:{errorCode:ee.TIMEOUT}}}),r.pendingAcks.delete(a))},r.recoveryConfig.message.ackTimeout);r.pendingAcks.set(a,{resolve:o,reject:i,timeout:c})}t.wsClient.send({event:e.event,data:Kr(qr({},e.data),{eventId:a,eventTimestamp:s,retryCount:e.retryCount})}),n||o(e)})}},{key:"_sendViaHttp",value:function(e,t){return Br(function(){var n,r,o,i;return Vr(this,function(s){switch(s.label){case 0:if(n=this,o=(r=this.transport).errorCode,[re.UPDATE_SURROUNDING_CONTEXT].includes(e.event))return[2];s.label=1;case 1:return s.trys.push([1,,6,7]),[re.INIT_EDITOR_V2,re.ON_CONTENT_CHANGE_V2].includes(e.event)?[4,this._sendViaHttpStream(e,t)]:[3,3];case 2:return i=s.sent(),[3,5];case 3:return[4,this._sendViaHttpFallback(e,t)];case 4:i=s.sent(),s.label=5;case 5:return[3,7];case 6:return setTimeout(function(){!n.wsClient.isOpen()&&(Object.values($).includes(o)||r.socketState===fe.READY)&&r.establishSocketConnection({isReconnect:!0}),(r.socketState===fe.RETRY_EXHAUSTED||r.socketState===fe.ERRORED)&&(Date.now()>=r.lastConnAttemptTime+r.recoveryConfig.socket.retryTimeAfterExhaust||n.wsClient.isOpen())&&(r.socketState=fe.RETRY_EXHAUSTED,r.retryAttempts=0,r.establishSocketConnection({isReconnect:!0}))},0),[7];case 7:return[2,i]}})}).call(this)}},{key:"_sendViaHttpFallback",value:function(e,t){return Br(function(){var n,r;return Vr(this,function(o){switch(o.label){case 0:return n=this.transport,[4,kr.getInstance().sendEvent(qr({eventData:{eventName:e.event,eventData:Kr(qr({},e.data),{eventId:e.eventId,eventTimestamp:e.eventTimestamp}),connSessionId:n.connectionSessionId}},t&&{signal:t}))];case 1:return null==(r=o.sent().data)||r.forEach(function(e){n.handleHttpResponse({data:JSON.stringify(e)})}),[2,r]}})}).call(this)}},{key:"_sendViaHttpStream",value:function(e,t){return Br(function(){var n;return Vr(this,function(r){return n=this.transport,[2,new Promise(function(r,o){var i=!1;kr.getInstance().httpStream({eventName:e.event,eventData:Kr(qr({},e.data),{eventId:e.eventId,eventTimestamp:e.eventTimestamp}),connSessionId:n.connectionSessionId},{onData:function(e){if(n.handleHttpResponse({data:e}),!i)try{JSON.parse(e).event===oe.ACK&&(i=!0,r(e))}catch(e){}},onEnd:function(){i||(i=!0,r(null))},onError:function(e){i||(i=!0,o(e))}},{signal:t}).catch(function(e){i||(i=!0,o(e))})})]})}).call(this)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function Wr(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function Zr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){Wr(i,r,o,s,a,"next",e)}function a(e){Wr(i,r,o,s,a,"throw",e)}s(void 0)})}}function Yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Qr(e,t,n[t])})}return e}function $r(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function eo(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}function to(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function no(){return function(e,t,n){if(n&&n.value){var r=n.value;return n.value=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(this.socketState===fe.NOT_INITIALIZED){var i=Error();throw i.name=te.TRANSPORT_NOT_INITIALIZED,i.message='Transport layer not initialized. Triggered by "'.concat(String(t),'" called'),this._trackTransportError(i,Ue,String(t)),i}return r.apply(this,n)},n}}}var ro=function(){var e,t;function n(){var e=this,t=this;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");Qr(this,"_wsClient",void 0),Qr(this,"_msgController",void 0),Qr(this,"_msgService",void 0),Qr(this,"_connectionManager",void 0),Qr(this,"lastConnAttemptTime",0),Qr(this,"_onMessageCallback",void 0),Qr(this,"socketState",fe.NOT_INITIALIZED),Qr(this,"retryAttempts",0),Qr(this,"errorCode",void 0),Qr(this,"socketStateTimeout",void 0),Qr(this,"connectionSessionId",void 0),Qr(this,"pendingAcks",new Map),Qr(this,"deviceMeta",{}),Qr(this,"userMeta",{anonId:"",abIdV2:""}),Qr(this,"recoveryConfig",Jn),Qr(this,"connectionConfig",$n),Qr(this,"connectedInitially",!1),Qr(this,"authHandlers",{logout:function(e){},getIdToken:function(){return Promise.resolve("")}}),Qr(this,"_devMode",{debug:!1,fallback:!1}),Qr(this,"trackEvent",void 0),Qr(this,"_eventCallback",void 0),Qr(this,"setConnectionSessionId",function(t){e.connectionSessionId=t,e.notifyClient({eventName:pe.UPDATE_CONN_ID,data:{connSessionId:t,ttl:e.recoveryConfig.message.cacheTtl}})}),Qr(this,"_messageHandler",function(t){try{var n;e._msgService.handleIncoming(t.data),null==(n=e._onMessageCallback)||n.call(e,JSON.parse(t.data))}catch(e){}}),Qr(this,"setReadyState",function(t){return Zr(function(){var e,n,r,o,i,s,a;return eo(this,function(c){try{null==(e=(n=this).trackEvent)||e.call(n,{logger:{eventName:Ie,eventData:{currentTime:Date.now(),isFirstConnection:!this.connectedInitially&&!this.connectionSessionId,retryAttempt:this.retryAttempts,connectedInitially:this.connectedInitially,connSessionId:t.data.connSessionId,lastConnAttemptTime:this.lastConnAttemptTime,errorCode:this.errorCode}}}),this.setConnectionSessionId(t.data.connSessionId),this.socketState=fe.READY,this.socketStateTimeout&&clearTimeout(this.socketStateTimeout),this.retryAttempts=0,this.errorCode=void 0,this.connectedInitially=!0,this.pendingAcks.has(me)&&(o=(r=this.pendingAcks.get(me)).resolve,(i=r.timeout)&&clearTimeout(i),o(t),this.pendingAcks.delete(me)),this._connectionManager.clearInitPromise()}catch(e){this._connectionManager.clearInitPromise(),(null==e||null==(a=e.errorData)||null==(s=a.data)?void 0:s.errorCode)!==ee.TIMEOUT&&this._trackTransportError(e,Le,"setReadyState")}return[2]})}).call(e)}),Qr(this,"establishSocketConnection",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isReconnect,n=void 0!==e&&e;return Zr(function(){return eo(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._connectionManager.establishSocketConnection({isReconnect:n})];case 1:return[2,e.sent()];case 2:return[3,3];case 3:return[2]}})}).call(t)}),Qr(this,"setErroredState",function(t){e.socketState=fe.ERRORED,t&&(e.errorCode=t),e.socketStateTimeout&&clearTimeout(e.socketStateTimeout)}),Qr(this,"resetConnectionSession",function(t){e.connectionSessionId=void 0,e.notifyClient({eventName:pe.UPDATE_CONN_ID,data:{connSessionId:""}}),e.setErroredState(t)}),Qr(this,"initialize",function(t){return Zr(function(){return eo(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.userMeta=Jr({},this.userMeta,t.userMeta),this._setConfig(t),kr.getInstance().setConfig({authHandlers:this.authHandlers,trackEvent:this.trackEvent,resetConnectionSession:this.resetConnectionSession,setConnectionSessionId:this.setConnectionSessionId,deviceMeta:this.deviceMeta,userMeta:this.userMeta,maxReconnectAttempts:this.recoveryConfig.fallback.maxRetryAttempts,baseUrl:this.connectionConfig.fallbackUrl}),[4,this.establishSocketConnection()];case 1:return e.sent(),[3,3];case 2:return[3,3];case 3:return[2]}})}).call(e)}),Qr(this,"notifyClient",function(t){var n=t.eventName,r=t.data;e._eventCallback&&e._eventCallback({eventName:n,data:r})}),this._wsClient=Y.getInstance(),this._wsClient.setOnCloseHandler(this._onClose.bind(this)),this._wsClient.setOnErrorHandler(this._onError.bind(this)),this._connectionManager=new Lr(this,this._wsClient),this._msgController=new Xr(this,this._wsClient),this._msgService=new cr(this,this._msgController),cr.setInstance(this._msgService)}return e=[{key:"_createAbortHandler",value:function(e,t){if(!t)return function(){};var n=function(){var t=Error("Aborted");t.reason="AbortError",e.forEach(function(e){e.closed||e.error(t)})};return t.aborted?(n(),function(){}):(t.addEventListener("abort",n),function(){t.removeEventListener("abort",n)})}},{key:"_setConfig",value:function(e){var t=e.onMessageCallback,n=e.socketClient,r=e.storageClient,o=e.deviceMeta,i=e.authHandlers,s=e.recoveryConfig,a=e.connectionConfig;this._wsClient=n||this._wsClient,r&&Pn(function(){return Un(this,function(e){return Ln=Promise.resolve(r),[2]})})(),this.deviceMeta=o||this.deviceMeta,this.authHandlers=i||this.authHandlers,this.recoveryConfig=s||this.recoveryConfig,this.connectionConfig=a||this.connectionConfig,this.trackEvent=e.trackEvents,this._onMessageCallback=t,this._wsClient.setInitialConfig({onMessageCallback:this._messageHandler,url:this.connectionConfig.socketUrl})}},{key:"handleHttpResponse",value:function(e){this._messageHandler(e)}},{key:"isFallbackEnabled",get:function(){return this._devMode.fallback}},{key:"_trackTransportError",value:function(e,t,n){var r,o,i;null==(r=this.trackEvent)||r.call(this,{logger:{eventName:Ee,eventData:(o=Jr({category:Pe,errorOrigin:t,error:Zn(e)},this.userMeta),i=i={method:n},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o)}})}},{key:"_onClose",value:function(e){this.setErroredState((null==e?void 0:e.reason)||(null==e||null==(t=e.code)?void 0:t.toString())),Be({error:e,transport:n.getInstance()});var t,r,o,i=Array.from(this.pendingAcks.keys()).filter(function(e){return e!==me});i.length>0&&(null==(o=this.trackEvent)||o.call(this,{logger:{eventName:De,eventData:{currentTime:Date.now(),pendingCount:i.length,errorCode:null==e?void 0:e.code,errorReason:null==e?void 0:e.reason,retryAttempts:this.retryAttempts,connSessionId:this.connectionSessionId,lastConnAttemptTime:this.lastConnAttemptTime}}})),null==(r=this.trackEvent)||r.call(this,{logger:{eventName:ke,eventData:{currentTime:Date.now(),code:null==e?void 0:e.code,reason:null==e?void 0:e.reason,errorCode:this.errorCode,connectedInitially:this.connectedInitially,connectionDuration:Date.now()-this.lastConnAttemptTime,retryAttempts:this.retryAttempts,socketState:this.socketState,connSessionId:this.connectionSessionId}}})}},{key:"_onError",value:function(e){this.setErroredState(void 0)}},{key:"setHttpClient",value:function(e){kr.getInstance().setHttpClient(e)}},{key:"setEventCallback",value:function(e){this._eventCallback=e}},{key:"setUserMeta",value:function(e){this.userMeta=Jr({},this.userMeta,e)}},{key:"enableDevMode",value:function(e){this._devMode=Jr({},this._devMode,e)}},{key:"contentChange",value:function(e){return this._msgService.sendMessage(re.ON_CONTENT_CHANGE,e)}},{key:"command",value:function(e){return this._msgService.sendMessage(re.ON_COMMAND,e)}},{key:"contentChangeV2",value:function(e){for(var t,n=[],r=e.processingChanges||[],o=0;o<r.length;o++)n[o]=new Nt;var i=this._msgService.sendMessage(re.ON_CONTENT_CHANGE_V2,e,!0).pipe(sn()),s=this._createAbortHandler(n,e.signal);if(null==(t=e.signal)?void 0:t.aborted)return n;var a=i.subscribe({next:function(e){var t=e.changeIndex;void 0!==t&&n[t]&&!n[t].closed&&(n[t].next(e),("complete"===e.type||"request-complete"===e.type)&&n[t].complete())},error:function(e){n.forEach(function(t){return!t.closed&&t.error(e)}),c()},complete:function(){n.forEach(function(e){e.closed||e.complete()}),c()}}),c=function(){s(),a.unsubscribe()};return n}},{key:"commandV2",value:function(e){for(var t=[],n=e.context||[],r=0;r<n.length;r++)t[r]=new Nt;var o="v2"===e.editorSchemaVersion;return this._msgService.sendMessage(re.ON_COMMAND,e,o).pipe(sn()).subscribe({next:function(e){var n=e.changeIndex;void 0!==n&&t[n]&&!t[n].closed&&(t[n].next(e),("complete"===e.type||"request-complete"===e.type)&&t[n].complete())},error:function(e){t.forEach(function(t){return!t.closed&&t.error(e)})},complete:function(){t.forEach(function(e){e.closed||e.complete()})}}),t}},{key:"updateEditorContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Zr(function(){return eo(this,function(n){return[2,this._msgService.updateEditorContent(e,t)]})}).call(this)}},{key:"updateConnectionSession",value:function(e){return Zr(function(){var t;return eo(this,function(n){switch(n.label){case 0:return t={event:re.UPDATE_CONNECTION,data:{deviceMeta:Jr({},this.deviceMeta,null==e?void 0:e.deviceMeta),userMeta:Jr({},e.userMeta)}},[4,this._msgController.send(t,!0)];case 1:return n.sent(),[2]}})}).call(this)}},{key:"terminateEditorGroup",value:function(e){return Zr(function(){var t;return eo(this,function(n){switch(n.label){case 0:return t={event:re.TERMINATE_EDITOR_GROUP,data:e},[4,this._msgController.send(t)];case 1:return n.sent(),[2]}})}).call(this)}},{key:"setActiveEditorGroup",value:function(e){return Zr(function(){var t;return eo(this,function(n){switch(n.label){case 0:return t={event:re.SET_ACTIVE_EDITOR_GROUP,data:{editorGroupId:e.editorGroupId}},[4,this._msgController.send(t)];case 1:return n.sent(),[2]}})}).call(this)}},{key:"closeConnection",value:function(){this._wsClient.close()}},{key:"initWritingSession",value:function(e){return Zr(function(){var t,n,r;return eo(this,function(o){switch(o.label){case 0:return n={event:re.INIT_WRITING_SESSION,data:e},[4,this._msgController.send(n)];case 1:return[2,null==(r=o.sent())||null==(t=r.data)?void 0:t.writingSessionId]}})}).call(this)}},{key:"updateSurroundingContext",value:function(e){return Zr(function(){var t;return eo(this,function(n){switch(n.label){case 0:return t={event:re.UPDATE_SURROUNDING_CONTEXT,data:e},[4,this._msgController.send(t)];case 1:return[2,n.sent()]}})}).call(this)}},{key:"forceSyncEditorContent",value:function(e){return Zr(function(){var t;return eo(this,function(n){switch(n.label){case 0:return t={event:re.FORCE_SYNC_EDITOR,data:e},[4,this._msgController.send(t)];case 1:return[2,n.sent()]}})}).call(this)}}],t=[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}],e&&Yr(n.prototype,e),t&&Yr(n,t),n}();function oo(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function io(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function s(e){oo(i,r,o,s,a,"next",e)}function a(e){oo(i,r,o,s,a,"throw",e)}s(void 0)})}}function so(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}Qr(ro,"_instance",null),$r([no(),to("design:type",Function),to("design:paramtypes",["undefined"==typeof OnChangeData?Object:OnChangeData,void 0]),to("design:returntype",Promise)],ro.prototype,"updateEditorContent",null),$r([no(),to("design:type",Function),to("design:paramtypes",["undefined"==typeof UpdateConnectionSessionData?Object:UpdateConnectionSessionData]),to("design:returntype",Promise)],ro.prototype,"updateConnectionSession",null),$r([no(),to("design:type",Function),to("design:paramtypes",["undefined"==typeof TabInfo?Object:TabInfo]),to("design:returntype",Promise)],ro.prototype,"setActiveEditorGroup",null);var ao=function(e,t,n){return io(function(){var r,o,i,s,a,c,l,u,d,h;return so(this,function(f){switch(f.label){case 0:switch(r=e.requestEventId,o=e.event,i=ro.getInstance(),s=cr.getInstance(),a=function(e){return io(function(){var t,n;return so(this,function(r){switch(r.label){case 0:i.socketState=fe.AUTH_SUCCESS,r.label=1;case 1:return r.trys.push([1,4,,5]),i.setConnectionSessionId(e.data.connSessionId),[4,s.updateSocketConn()];case 2:return r.sent(),[4,i.setReadyState(e)];case 3:return r.sent(),s.processPending(),[3,5];case 4:return t=r.sent(),i.setErroredState(null==t||null==(n=t.data)?void 0:n.errorCode),i.establishSocketConnection({isReconnect:!0}),[3,5];case 5:return[2]}})})()},c=function(e){try{var t=n["".concat(e.requestEventId,"_").concat(e.data.changeIndex)];if(!t)return;t.next(e)}catch(e){}},o){case ce.AUTH_SUCCESS:return[3,1];case ce.PROCESSING_SUCCESS:return[3,3];case ce.ACK:return[3,4];case le.AUTH_FAILED:return[3,5];case le.PROCESSING_FAILED:return[3,7];case le.ACK_FAILED:return[3,8];case ce.PING:return[3,9];case ue.SURROUNDING_CONTEXT_SYNC_REQUIRED:return[3,10];case ue.CONTENT_SYNC_REQUIRED:return[3,11]}return[3,12];case 1:return[4,a(e)];case 2:case 6:return f.sent(),[3,13];case 3:return c(e),s.sendAck({data:{responseEventId:e.eventId}}),[3,13];case 4:return ve({requestEventId:r,pendingAcks:t,eventData:e,ackType:de.RESOLVE,transport:i}),[3,13];case 5:return[4,Be({transport:i,error:e})];case 7:return c(e),[3,13];case 8:return ve({requestEventId:r,pendingAcks:t,eventData:e,ackType:de.REJECT,transport:i}),[3,13];case 9:return s.sendPong(),[3,13];case 10:return null==(l=i.trackEvent)||l.call(i,{logger:{eventName:Oe,eventData:{editorId:e.data.editorId}}}),i.notifyClient({eventName:Me.SURROUNDING_CONTEXT_SYNC_REQUIRED,data:{editorId:e.data.editorId,editorGroupId:e.data.editorGroupId,writingSessionId:e.data.writingSessionId}}),[3,13];case 11:return null==(d=i.trackEvent)||d.call(i,{logger:{eventName:we,eventData:{editorId:e.data.editorId,type:"content",serverDocumentHash:e.data.currentDocumentHash,sentOtHash:e.data.fullContentHash,clientDocumentHash:null==(u=s.getActiveEditor(e.data.editorId))?void 0:u.fullContentHash}}}),(null==(h=s.getActiveEditor(e.data.editorId))?void 0:h.fullContentHash)===e.data.currentDocumentHash?[2]:(i.notifyClient({eventName:Me.CONTENT_SYNC_REQUIRED,data:{editorId:e.data.editorId,editorGroupId:e.data.editorGroupId}}),[3,13]);case 12:return[3,13];case 13:return[2]}})})()};!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fc623c99-c34d-5b50-a628-5b64c70558e4")}catch(e){}}();var co={key:"DE"},lo={key:"EN"},uo={key:"ES"},ho={key:"FR"},fo=(lo.key,co.key,ho.key,uo.key,lo.key,"https://quillbot.com"),po="quillbot.com",_o="chrome-active",bo=!1,mo="https://collector.quillbot.com",vo="https://quillbot.com/api/pageq/apps",yo=("".concat(vo,"/QBExtension/client-contents?pageQContents="),"".concat(vo,"/QBWebapp/client-contents?pageQContents=AIEditorDocumentTypes"),Object.freeze({custom:"custom"}),Object.freeze({AB_TEST_EXPERIMENTS_API:"worker/abtest-experiments-info",CAMPAIGN_AUTH_API:"auth/campaign",DETECT_LANGUAGE:"utils/detect-language",DETECT_TONE_API:"utils/tone-detection",DICTIONARY_API:"config/lang/dictionary",EDITOR_CONFIGS:"chrome-extension/editor-settings",EXTENSION_CAMPAIGN_CHECK:"campaign/check",EXTENSION_HASH:"chrome-extension/extension-hash",EXTRACT_KEYWORDS:"utils/extract-keyword",GA_TRACKER:"collect",GA_TRACKER_DEBUGGER:"debug/collect",GC_ERROR_CATEGORY:"config/lang/gc-preferences",GENERATE_TEXT:"raven/generate/text",GENERATIVE_AI_API:"utils/generative-ai",GET_ACCOUNT_DETAILS:"auth/get-account-details",GET_USER_DETAILS:"auth/get-user-details",GRAMMAR_CHECKER_API:"utils/grammar-check",HEALTH_CHECK:"chrome-extension/health-check",ISSUE_TOKEN_API:"auth/issue-token",MODES_DETAILS:"chrome-extension/modes-details",PARAPHRASE:"paraphraser/single-paraphrase",PARAPHRASE_PHRASE:"utils/paraphrase-phrase",PASSIVE_TO_ACTIVE:"utils/active-voice",SENTENCE_SPLITTER:"utils/sentence-spiltter",SNEAK_PEEK_QUOTA_URL:"sneak-peek/recommendation/remaining-quota",SPAM_CHECK:"auth/spam-check",SUGGESTED_WORDS_API:"config/lang/suggested-words",SUMMARIZE_PARA:"summarizer/summarize-para",TEMPORARY_DATA_API:"utils/temporary-data",TESTING_API:"system/info",TRANSLATE:"utils/translate",TRANSLATE_SUPPORTED_LANGUAGES:"utils/translate/languages",UPDATE_USER_DETAILS:"auth/update-demographic-information",UPDATE_USER_METRICS_API:"auth/update-user-metric",UPDATE_USER_PROFILE:"auth/update-user-profile",USER_LANGUAGE_CONFIG_API:"config/lang"})),go=(yo.GRAMMAR_CHECKER_API,yo.PARAPHRASE,yo.SENTENCE_SPLITTER,yo.DETECT_TONE_API,yo.SUMMARIZE_PARA,yo.EXTRACT_KEYWORDS,yo.PASSIVE_TO_ACTIVE,yo.PARAPHRASE_PHRASE,yo.DETECT_LANGUAGE,function(e){return e.advanced_gc="advanced_gc",e.cf_cookie="cf_cookie",e.context_management="context_management",e.ext_bts_aug_24="ext_bts_aug_24",e.ext_changelog_campaign="ext_changelog_campaign",e.ext_gc_calls_batching_mar24="ext_gc_calls_batching_mar24",e.ext_gpt_v2_premium_users_gmail="ext_gpt_v2_premium_users_gmail",e.ext_integration_test="ext_integration_test",e.ext_on_device_lang_detect="ext_on_device_lang_detect",e.ext_privacy_policy_june_2025="ext_privacy_policy_june_2025",e.ext_segmenter_sentence_splitter="ext_segmenter_sentence_splitter",e.ext_text_too_large_popup="ext_text_too_large_popup",e.ext_writing_goal="ext_writing_goal",e.ext_writing_score_v2="ext_writing_score_v2",e["ext-bts-24"]="ext-bts-24",e["ext-gpt-v2-premium-users-gmail"]="ext-gpt-v2-premium-users-gmail",e["ext-premium-gpt-quota"]="ext-premium-gpt-quota",e["ext-tones-gmail-conversion"]="ext-tones-gmail-conversion",e.extBFCM2024="extBFCM2024",e.extension_reviews_campaign_q2_23="extension_reviews_campaign_q2_23",e.extension_test="extension_test",e["extension-follow-widget-mode"]="extension-follow-widget-mode",e["extension-follow-widget-with-quick-mode"]="extension-follow-widget-with-quick-mode",e["pphr-usage-chrome-ext"]="pphr-usage-chrome-ext",e.qb_ai_cursor_ai_chat_plugin_search_v1="qb_ai_cursor_ai_chat_plugin_search_v1",e.qb_ai_cursor_context_aware_text_generation_v1="qb_ai_cursor_context_aware_text_generation_v1",e.qb_lt_ai_cursor_feature_parity="qb_lt_ai_cursor_feature_parity",e.track_ws_events="track_ws_events",e}({})),Eo=(Object.freeze({CHROME_STORAGE_KEY:"detectedLanguagesData",DETECTED_LANGUAGES_FROM_BROWSER:"detectedLanguagesFromBrowser",DETECTED_LANGUAGES_FROM_CHROME_I18:"detectedLanguagesFromChromei18",DETECTED_LANGUAGES_FROM_COUNTRY:"detectedLanguagesFromCountry",DETECTED_LANGUAGES_FROM_WEBSITE:"detectedLanguagesFromWebsite",USER_PREFERRED_LANGUAGES:"userPreferredLanguages"}),Object.freeze({CONCURRENT_SESSION:"CONCURRENT_SESSION",COOKIE_NOT_FOUND:"COOKIE_NOT_FOUND",EXTERNAL_MESSAGE:"EXTERNAL_MESSAGE",EXTERNAL_MESSAGE_UID_MISMATCH:"EXTERNAL_MESSAGE_UID_MISMATCH",USER_MISMATCH:"USER_MISMATCH"}),Object.freeze({language:"default",product:"default"}),Object.freeze({collectUserTextualData:"collectUserTextualData",eventTime:"eventTime",isNewUser:"isNewUser",key:"data-opt-in",timeout:3e3,userShownConsentPrompt:"userShownConsentPrompt"}),Object.freeze({campaignID:"extension_campaign_gc_survey_2023_mar",eventTime:"eventTime",hostOriginUsed:"hostOriginUsed",key:"gc-survey",timeout:3e3,userShownSurveyModal:"userShownSurveyModal"}),Object.freeze({charLimit:250,charLimitWithThreshold:1e3}),Object.freeze({completePageClass:".kix-page",docClass:".kix-paginateddocumentplugin",editorClass:".kix-appview-editor",hostname:"docs.google.com",pageClass:".kix-page-column",pageEle:"docs-page kix-page-paginated kix-page-paginated-box-shadow docs-page-portrait",pageID:"data-quillbot-pageId",pageIDAttribute:"data-quillbot-pageid",paragraphClass:".kix-paragraphrenderer",paraID:"data-quillbot-paraid",selectionAttribute:".kix-selection-overlay",sidebarMenuBtnClass:"app-switcher-button"})),wo=Object.freeze({hostname:"mail.google.com"}),Oo=(Object.freeze({editorID:"editorID",eventTime:"eventTime",isActive:"isActive",key:go["pphr-usage-chrome-ext"],lastActionTimeStamp:Date.now(),lastEditorDetected:"lastEditorDetected",shownPromptOn:"shownPromptOn",userActionCount:"userActionCount",variants:{completes_5th_sentence:{allowedHostnames:[Eo.hostname,wo.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"completes_5th_sentence"},extension_rendered_on_doc:{allowedHostnames:[Eo.hostname],checkPromptOn:[3,8,12],enableDayCheck:!1,key:"extension_rendered_on_doc"},hovers_over_paraphraser_button:{allowedHostnames:[Eo.hostname,wo.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"hovers_over_paraphraser_button"},pastes_text:{allowedHostnames:[Eo.hostname,wo.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"pastes_text"},selects_text:{allowedHostnames:[Eo.hostname,wo.hostname],checkPromptOn:[1,5,10],enableDayCheck:!1,key:"selects_text"},shares_doc:{allowedHostnames:[Eo.hostname],checkPromptOn:[3,8,12],enableDayCheck:!1,key:"shares_doc"}}}),Object.freeze({captcha:"quillbot-recaptcha",card:"quillbot-card",followWidget:"quillbot-extension-follow-widget",genai_toolbar:"quillbot-extension-generative-toolbar-btn",genAIButton:"quillbot-extension-generative-btn",genAIDraftView:"quillbot-extension-generative-draft-view",genAIQuickActions:"quillbot-extension-generative-quick-actions",genAIToolbarButton:"quillbot-extension-generative-toolbar-btn",highlights:"quillbot-extension-highlights",loader:"quillbot-loader",portal:"quillbot-extension-portal",privacy:"quillbot-privacy",reloader:"quillbot-extension-reloader",root:"quillbot-extension-root",sidebar:"quillbot-gdocs-sidebar",support:"quillbot-support",widget:"quillbot-extension"}),o(o(o({},ne.Forbidden,s),ne.ServiceUnavailable,s),ne.TooManyRequests,"chrome-active/system/too_many_requests"),"https://".concat(po,"/learn-more?product=").concat(_o),"https://".concat(po,"/terms"),"https://".concat(po,"/privacy"),function(){var e="https://chromewebstore.google.com/detail/quillbot-ai-writing-and-g/iidnbdjijdkbmajdffnidomddglmieko/reviews?utm_source=chrome-active&utm_medium=referral&utm_campaign=feedback_review_cta_link";return"edge-active"===_o&&(e="https://microsoftedge.microsoft.com/addons/detail/cphpplikchcioccedpjacdanfibnimmh"),"safari-active"===_o&&(e="https://apps.apple.com/us/app/quillbot-for-safari/id6738683741"),e});function So(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}function To(e,t){return function(){return e.apply(t,arguments)}}"function"==typeof SuppressedError&&SuppressedError;const{toString:Ro}=Object.prototype,{getPrototypeOf:Io}=Object,Co=(Ao=Object.create(null),e=>{const t=Ro.call(e);return Ao[t]||(Ao[t]=t.slice(8,-1).toLowerCase())});var Ao;const ko=e=>(e=e.toLowerCase(),t=>Co(t)===e),No=e=>t=>typeof t===e,{isArray:xo}=Array,Do=No("undefined");const Po=ko("ArrayBuffer");const Uo=No("string"),Lo=No("function"),Mo=No("number"),jo=e=>null!==e&&"object"==typeof e,Go=e=>{if("object"!==Co(e))return!1;const t=Io(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},Fo=ko("Date"),Ho=ko("File"),Bo=ko("Blob"),zo=ko("FileList"),qo=ko("URLSearchParams"),[Ko,Vo,Xo,Wo]=["ReadableStream","Request","Response","Headers"].map(ko);function Zo(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,o;if("object"!=typeof e&&(e=[e]),xo(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(r=0;r<i;r++)s=o[r],t.call(null,e[s],s,e)}}function Yo(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const Qo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:t.g,Jo=e=>!Do(e)&&e!==Qo;const $o=(ei="undefined"!=typeof Uint8Array&&Io(Uint8Array),e=>ei&&e instanceof ei);var ei;const ti=ko("HTMLFormElement"),ni=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),ri=ko("RegExp"),oi=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Zo(n,(n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)}),Object.defineProperties(e,r)};const ii=ko("AsyncFunction"),si=(ai="function"==typeof setImmediate,ci=Lo(Qo.postMessage),ai?setImmediate:ci?(li=`axios@${Math.random()}`,ui=[],Qo.addEventListener("message",({source:e,data:t})=>{e===Qo&&t===li&&ui.length&&ui.shift()()},!1),e=>{ui.push(e),Qo.postMessage(li,"*")}):e=>setTimeout(e));var ai,ci,li,ui;const di="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Qo):"undefined"!=typeof process&&process.nextTick||si;var hi={isArray:xo,isArrayBuffer:Po,isBuffer:function(e){return null!==e&&!Do(e)&&null!==e.constructor&&!Do(e.constructor)&&Lo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Lo(e.append)&&("formdata"===(t=Co(e))||"object"===t&&Lo(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Po(e.buffer),t},isString:Uo,isNumber:Mo,isBoolean:e=>!0===e||!1===e,isObject:jo,isPlainObject:Go,isReadableStream:Ko,isRequest:Vo,isResponse:Xo,isHeaders:Wo,isUndefined:Do,isDate:Fo,isFile:Ho,isBlob:Bo,isRegExp:ri,isFunction:Lo,isStream:e=>jo(e)&&Lo(e.pipe),isURLSearchParams:qo,isTypedArray:$o,isFileList:zo,forEach:Zo,merge:function e(){const{caseless:t}=Jo(this)&&this||{},n={},r=(r,o)=>{const i=t&&Yo(n,o)||o;Go(n[i])&&Go(r)?n[i]=e(n[i],r):Go(r)?n[i]=e({},r):xo(r)?n[i]=r.slice():n[i]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&Zo(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(Zo(t,(t,r)=>{n&&Lo(t)?e[r]=To(t,n):e[r]=t},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,s;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&Io(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Co,kindOfTest:ko,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(xo(e))return e;let t=e.length;if(!Mo(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:ti,hasOwnProperty:ni,hasOwnProp:ni,reduceDescriptors:oi,freezeMethods:e=>{oi(e,(t,n)=>{if(Lo(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Lo(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return xo(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Yo,global:Qo,isContextDefined:Jo,isSpecCompliantForm:function(e){return!!(e&&Lo(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(jo(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=xo(e)?[]:{};return Zo(e,(e,t)=>{const i=n(e,r+1);!Do(i)&&(o[t]=i)}),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:ii,isThenable:e=>e&&(jo(e)||Lo(e))&&Lo(e.then)&&Lo(e.catch),setImmediate:si,asap:di};function fi(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}hi.inherits(fi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:hi.toJSONObject(this.config),code:this.code,status:this.status}}});const pi=fi.prototype,_i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_i[e]={value:e}}),Object.defineProperties(fi,_i),Object.defineProperty(pi,"isAxiosError",{value:!0}),fi.from=(e,t,n,r,o,i)=>{const s=Object.create(pi);return hi.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),fi.call(s,e.message,t,n,r,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};function bi(e){return hi.isPlainObject(e)||hi.isArray(e)}function mi(e){return hi.endsWith(e,"[]")?e.slice(0,-2):e}function vi(e,t,n){return e?e.concat(t).map(function(e,t){return e=mi(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const yi=hi.toFlatObject(hi,{},null,function(e){return/^is[A-Z]/.test(e)});function gi(e,t,n){if(!hi.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=hi.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!hi.isUndefined(t[e])})).metaTokens,o=n.visitor||l,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&hi.isSpecCompliantForm(t);if(!hi.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(hi.isDate(e))return e.toISOString();if(!a&&hi.isBlob(e))throw new fi("Blob is not supported. Use a Buffer instead.");return hi.isArrayBuffer(e)||hi.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let a=e;if(e&&!o&&"object"==typeof e)if(hi.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(hi.isArray(e)&&function(e){return hi.isArray(e)&&!e.some(bi)}(e)||(hi.isFileList(e)||hi.endsWith(n,"[]"))&&(a=hi.toArray(e)))return n=mi(n),a.forEach(function(e,r){!hi.isUndefined(e)&&null!==e&&t.append(!0===s?vi([n],r,i):null===s?n:n+"[]",c(e))}),!1;return!!bi(e)||(t.append(vi(o,n,i),c(e)),!1)}const u=[],d=Object.assign(yi,{defaultVisitor:l,convertValue:c,isVisitable:bi});if(!hi.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!hi.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),hi.forEach(n,function(n,i){!0===(!(hi.isUndefined(n)||null===n)&&o.call(t,n,hi.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])}),u.pop()}}(e),t}function Ei(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function wi(e,t){this._pairs=[],e&&gi(e,this,t)}const Oi=wi.prototype;function Si(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ti(e,t,n){if(!t)return e;const r=n&&n.encode||Si;hi.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let i;if(i=o?o(t,n):hi.isURLSearchParams(t)?t.toString():new wi(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}Oi.append=function(e,t){this._pairs.push([e,t])},Oi.toString=function(e){const t=e?function(t){return e.call(this,t,Ei)}:Ei;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class Ri{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){hi.forEach(this.handlers,function(t){null!==t&&e(t)})}}var Ii={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ci={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:wi,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const Ai="undefined"!=typeof window&&"undefined"!=typeof document,ki="object"==typeof navigator&&navigator||void 0,Ni=Ai&&(!ki||["ReactNative","NativeScript","NS"].indexOf(ki.product)<0),xi="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Di=Ai&&window.location.href||"http://localhost";var Pi={...Object.freeze({__proto__:null,hasBrowserEnv:Ai,hasStandardBrowserWebWorkerEnv:xi,hasStandardBrowserEnv:Ni,navigator:ki,origin:Di}),...Ci};function Ui(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=e.length;if(i=!i&&hi.isArray(r)?r.length:i,a)return hi.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&hi.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&hi.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s}if(hi.isFormData(e)&&hi.isFunction(e.entries)){const n={};return hi.forEachEntry(e,(e,r)=>{t(function(e){return hi.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null}const Li={transitional:Ii,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=hi.isObject(e);o&&hi.isHTMLForm(e)&&(e=new FormData(e));if(hi.isFormData(e))return r?JSON.stringify(Ui(e)):e;if(hi.isArrayBuffer(e)||hi.isBuffer(e)||hi.isStream(e)||hi.isFile(e)||hi.isBlob(e)||hi.isReadableStream(e))return e;if(hi.isArrayBufferView(e))return e.buffer;if(hi.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return gi(e,new Pi.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Pi.isNode&&hi.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=hi.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return gi(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(hi.isString(e))try{return(t||JSON.parse)(e),hi.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Li.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(hi.isResponse(e)||hi.isReadableStream(e))return e;if(e&&hi.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw fi.from(e,fi.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pi.classes.FormData,Blob:Pi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};hi.forEach(["delete","get","head","post","put","patch"],e=>{Li.headers[e]={}});const Mi=hi.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ji=Symbol("internals");function Gi(e){return e&&String(e).trim().toLowerCase()}function Fi(e){return!1===e||null==e?e:hi.isArray(e)?e.map(Fi):String(e)}function Hi(e,t,n,r,o){return hi.isFunction(r)?r.call(this,t,n):(o&&(t=n),hi.isString(t)?hi.isString(r)?-1!==t.indexOf(r):hi.isRegExp(r)?r.test(t):void 0:void 0)}class Bi{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=Gi(t);if(!o)throw new Error("header name must be a non-empty string");const i=hi.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Fi(e))}const i=(e,t)=>hi.forEach(e,(e,n)=>o(e,n,t));if(hi.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(hi.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach(function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&Mi[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(hi.isHeaders(e))for(const[t,r]of e.entries())o(r,t,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=Gi(e)){const n=hi.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(hi.isFunction(t))return t.call(this,e,n);if(hi.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Gi(e)){const n=hi.findKey(this,e);return!(!n||void 0===this[n]||t&&!Hi(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=Gi(e)){const o=hi.findKey(n,e);!o||t&&!Hi(0,n[o],o,t)||(delete n[o],r=!0)}}return hi.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!Hi(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return hi.forEach(this,(r,o)=>{const i=hi.findKey(n,o);if(i)return t[i]=Fi(r),void delete t[o];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(o):String(o).trim();s!==o&&delete t[o],t[s]=Fi(r),n[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return hi.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&hi.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[ji]=this[ji]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Gi(e);t[r]||(!function(e,t){const n=hi.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})})}(n,e),t[r]=!0)}return hi.isArray(e)?e.forEach(r):r(e),this}}function zi(e,t){const n=this||Li,r=t||n,o=Bi.from(r.headers);let i=r.data;return hi.forEach(e,function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function qi(e){return!(!e||!e.__CANCEL__)}function Ki(e,t,n){fi.call(this,null==e?"canceled":e,fi.ERR_CANCELED,t,n),this.name="CanceledError"}function Vi(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new fi("Request failed with status code "+n.status,[fi.ERR_BAD_REQUEST,fi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}Bi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),hi.reduceDescriptors(Bi.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),hi.freezeMethods(Bi),hi.inherits(Ki,fi,{__CANCEL__:!0});const Xi=(e,t,n=3)=>{let r=0;const o=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];o||(o=c),n[i]=a,r[i]=c;let u=s,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<t)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let n,r,o=0,i=1e3/t;const s=(t,i=Date.now())=>{o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),a=t-o;a>=i?s(e,t):(n=e,r||(r=setTimeout(()=>{r=null,s(n)},i-a)))},()=>n&&s(n)]}(n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,a=i-r,c=o(a);r=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})},n)},Wi=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Zi=e=>(...t)=>hi.asap(()=>e(...t));var Yi=Pi.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Pi.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Pi.origin),Pi.navigator&&/(msie|trident)/i.test(Pi.navigator.userAgent)):()=>!0,Qi=Pi.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const s=[e+"="+encodeURIComponent(t)];hi.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),hi.isString(r)&&s.push("path="+r),hi.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ji(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&r||0==n?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const $i=e=>e instanceof Bi?{...e}:e;function es(e,t){t=t||{};const n={};function r(e,t,n,r){return hi.isPlainObject(e)&&hi.isPlainObject(t)?hi.merge.call({caseless:r},e,t):hi.isPlainObject(t)?hi.merge({},t):hi.isArray(t)?t.slice():t}function o(e,t,n,o){return hi.isUndefined(t)?hi.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!hi.isUndefined(t))return r(void 0,t)}function s(e,t){return hi.isUndefined(t)?hi.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>o($i(e),$i(t),0,!0)};return hi.forEach(Object.keys(Object.assign({},e,t)),function(r){const i=c[r]||o,s=i(e[r],t[r],r);hi.isUndefined(s)&&i!==a||(n[r]=s)}),n}var ts=e=>{const t=es({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=Bi.from(a),t.url=Ti(Ji(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),hi.isFormData(r))if(Pi.hasStandardBrowserEnv||Pi.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Pi.hasStandardBrowserEnv&&(o&&hi.isFunction(o)&&(o=o(t)),o||!1!==o&&Yi(t.url))){const e=i&&s&&Qi.read(s);e&&a.set(i,e)}return t};var ns="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=ts(e);let o=r.data;const i=Bi.from(r.headers).normalize();let s,a,c,l,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let _=new XMLHttpRequest;function b(){if(!_)return;const r=Bi.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders());Vi(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?_.response:_.responseText,status:_.status,statusText:_.statusText,headers:r,config:e,request:_}),_=null}_.open(r.method.toUpperCase(),r.url,!0),_.timeout=r.timeout,"onloadend"in _?_.onloadend=b:_.onreadystatechange=function(){_&&4===_.readyState&&(0!==_.status||_.responseURL&&0===_.responseURL.indexOf("file:"))&&setTimeout(b)},_.onabort=function(){_&&(n(new fi("Request aborted",fi.ECONNABORTED,e,_)),_=null)},_.onerror=function(){n(new fi("Network Error",fi.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||Ii;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new fi(t,o.clarifyTimeoutError?fi.ETIMEDOUT:fi.ECONNABORTED,e,_)),_=null},void 0===o&&i.setContentType(null),"setRequestHeader"in _&&hi.forEach(i.toJSON(),function(e,t){_.setRequestHeader(t,e)}),hi.isUndefined(r.withCredentials)||(_.withCredentials=!!r.withCredentials),d&&"json"!==d&&(_.responseType=r.responseType),f&&([c,u]=Xi(f,!0),_.addEventListener("progress",c)),h&&_.upload&&([a,l]=Xi(h),_.upload.addEventListener("progress",a),_.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(s=t=>{_&&(n(!t||t.type?new Ki(null,e,_):t),_.abort(),_=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const m=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);m&&-1===Pi.protocols.indexOf(m)?n(new fi("Unsupported protocol "+m+":",fi.ERR_BAD_REQUEST,e)):_.send(o||null)})};const rs=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof fi?t:new Ki(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,o(new fi(`timeout ${t} of ms exceeded`,fi.ETIMEDOUT))},t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)}),e=null)};e.forEach(e=>e.addEventListener("abort",o));const{signal:a}=r;return a.unsubscribe=()=>hi.asap(s),a}},os=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},is=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},ss=(e,t,n,r)=>{const o=async function*(e,t){for await(const n of is(e))yield*os(n,t)}(e,t);let i,s=0,a=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return a(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw a(e),e}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},as="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,cs=as&&"function"==typeof ReadableStream,ls=as&&("function"==typeof TextEncoder?(us=new TextEncoder,e=>us.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var us;const ds=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},hs=cs&&ds(()=>{let e=!1;const t=new Request(Pi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),fs=cs&&ds(()=>hi.isReadableStream(new Response("").body)),ps={stream:fs&&(e=>e.body)};var _s;as&&(_s=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ps[e]&&(ps[e]=hi.isFunction(_s[e])?t=>t[e]():(t,n)=>{throw new fi(`Response type '${e}' is not supported`,fi.ERR_NOT_SUPPORT,n)})}));const bs=async(e,t)=>{const n=hi.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(hi.isBlob(e))return e.size;if(hi.isSpecCompliantForm(e)){const t=new Request(Pi.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return hi.isArrayBufferView(e)||hi.isArrayBuffer(e)?e.byteLength:(hi.isURLSearchParams(e)&&(e+=""),hi.isString(e)?(await ls(e)).byteLength:void 0)})(t):n};var ms=as&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=ts(e);l=l?(l+"").toLowerCase():"text";let f,p=rs([o,i&&i.toAbortSignal()],s);const _=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&hs&&"get"!==n&&"head"!==n&&0!==(b=await bs(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(hi.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Wi(b,Xi(Zi(c)));r=ss(n.body,65536,e,t)}}hi.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0});let i=await fetch(f);const s=fs&&("stream"===l||"response"===l);if(fs&&(a||s&&_)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=i[t]});const t=hi.toFiniteNumber(i.headers.get("content-length")),[n,r]=a&&Wi(t,Xi(Zi(a),!0))||[];i=new Response(ss(i.body,65536,n,()=>{r&&r(),_&&_()}),e)}l=l||"text";let m=await ps[hi.findKey(ps,l)||"text"](i,e);return!s&&_&&_(),await new Promise((t,n)=>{Vi(t,n,{data:m,headers:Bi.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})})}catch(t){if(_&&_(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new fi("Network Error",fi.ERR_NETWORK,e,f),{cause:t.cause||t});throw fi.from(t,t&&t.code,e,f)}});const vs={http:null,xhr:ns,fetch:ms};hi.forEach(vs,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const ys=e=>`- ${e}`,gs=e=>hi.isFunction(e)||null===e||!1===e;var Es=e=>{e=hi.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!gs(n)&&(r=vs[(t=String(n)).toLowerCase()],void 0===r))throw new fi(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new fi("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(ys).join("\n"):" "+ys(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function ws(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ki(null,e)}function Os(e){ws(e),e.headers=Bi.from(e.headers),e.data=zi.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Es(e.adapter||Li.adapter)(e).then(function(t){return ws(e),t.data=zi.call(e,e.transformResponse,t),t.headers=Bi.from(t.headers),t},function(t){return qi(t)||(ws(e),t&&t.response&&(t.response.data=zi.call(e,e.transformResponse,t.response),t.response.headers=Bi.from(t.response.headers))),Promise.reject(t)})}const Ss="1.8.3",Ts={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ts[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Rs={};Ts.transitional=function(e,t,n){return(r,o,i)=>{if(!1===e)throw new fi(function(e,t){return"[Axios v1.8.3] Transitional option '"+e+"'"+t+(n?". "+n:"")}(o," has been removed"+(t?" in "+t:"")),fi.ERR_DEPRECATED);return t&&!Rs[o]&&(Rs[o]=!0),!e||e(r,o,i)}},Ts.spelling=function(e){return(e,t)=>!0};var Is={assertOptions:function(e,t,n){if("object"!=typeof e)throw new fi("options must be an object",fi.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new fi("option "+i+" must be "+n,fi.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new fi("Unknown option "+i,fi.ERR_BAD_OPTION)}},validators:Ts};const Cs=Is.validators;class As{constructor(e){this.defaults=e,this.interceptors={request:new Ri,response:new Ri}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=es(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&Is.assertOptions(n,{silentJSONParsing:Cs.transitional(Cs.boolean),forcedJSONParsing:Cs.transitional(Cs.boolean),clarifyTimeoutError:Cs.transitional(Cs.boolean)},!1),null!=r&&(hi.isFunction(r)?t.paramsSerializer={serialize:r}:Is.assertOptions(r,{encode:Cs.function,serialize:Cs.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Is.assertOptions(t,{baseUrl:Cs.spelling("baseURL"),withXsrfToken:Cs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&hi.merge(o.common,o[t.method]);o&&hi.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=Bi.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const c=[];let l;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let u,d=0;if(!a){const e=[Os.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{l=Os.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return Ti(Ji((e=es(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}hi.forEach(["delete","get","head","options"],function(e){As.prototype[e]=function(t,n){return this.request(es(n||{},{method:e,url:t,data:(n||{}).data}))}}),hi.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,o){return this.request(es(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}As.prototype[e]=t(),As.prototype[e+"Form"]=t(!0)});class ks{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,o){n.reason||(n.reason=new Ki(e,r,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new ks(function(t){e=t});return{token:t,cancel:e}}}const Ns={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ns).forEach(([e,t])=>{Ns[t]=e});const xs=function e(t){const n=new As(t),r=To(As.prototype.request,n);return hi.extend(r,As.prototype,n,{allOwnKeys:!0}),hi.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(es(t,n))},r}(Li);xs.Axios=As,xs.CanceledError=Ki,xs.CancelToken=ks,xs.isCancel=qi,xs.VERSION=Ss,xs.toFormData=gi,xs.AxiosError=fi,xs.Cancel=xs.CanceledError,xs.all=function(e){return Promise.all(e)},xs.spread=function(e){return function(t){return e.apply(null,t)}},xs.isAxiosError=function(e){return hi.isObject(e)&&!0===e.isAxiosError},xs.mergeConfig=es,xs.AxiosHeaders=Bi,xs.formToJSON=e=>Ui(hi.isHTMLForm(e)?new FormData(e):e),xs.getAdapter=Es,xs.HttpStatusCode=Ns,xs.default=xs;function Ds(e){let t=e.length;for(;--t>=0;)e[t]=0}const Ps=256,Us=286,Ls=30,Ms=15,js=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Gs=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Fs=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Hs=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bs=new Array(576);Ds(Bs);const zs=new Array(60);Ds(zs);const qs=new Array(512);Ds(qs);const Ks=new Array(256);Ds(Ks);const Vs=new Array(29);Ds(Vs);const Xs=new Array(Ls);function Ws(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}let Zs,Ys,Qs;function Js(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}Ds(Xs);const $s=e=>e<256?qs[e]:qs[256+(e>>>7)],ea=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ta=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,ea(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},na=(e,t,n)=>{ta(e,n[2*t],n[2*t+1])},ra=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},oa=(e,t,n)=>{const r=new Array(16);let o,i,s=0;for(o=1;o<=Ms;o++)s=s+n[o-1]<<1,r[o]=s;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=ra(r[t]++,t))}},ia=e=>{let t;for(t=0;t<Us;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Ls;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},sa=e=>{e.bi_valid>8?ea(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},aa=(e,t,n,r)=>{const o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]},ca=(e,t,n)=>{const r=e.heap[n];let o=n<<1;for(;o<=e.heap_len&&(o<e.heap_len&&aa(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!aa(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r},la=(e,t,n)=>{let r,o,i,s,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,o=e.pending_buf[e.sym_buf+a++],0===r?na(e,o,t):(i=Ks[o],na(e,i+Ps+1,t),s=js[i],0!==s&&(o-=Vs[i],ta(e,o,s)),r--,i=$s(r),na(e,i,n),s=Gs[i],0!==s&&(r-=Xs[i],ta(e,r,s)))}while(a<e.sym_next);na(e,256,t)},ua=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.elems;let s,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<i;s++)0!==n[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,o&&(e.static_len-=r[2*c+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)ca(e,n,s);c=i;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ca(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[2*c]=n[2*s]+n[2*a],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[2*s+1]=n[2*a+1]=c,e.heap[1]=c++,ca(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,d,h,f,p,_=0;for(h=0;h<=Ms;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],h=n[2*n[2*u+1]+1]+1,h>c&&(h=c,_++),n[2*u+1]=h,u>r||(e.bl_count[h]++,f=0,u>=a&&(f=s[u-a]),p=n[2*u],e.opt_len+=p*(h+f),i&&(e.static_len+=p*(o[2*u+1]+f)));if(0!==_){do{for(h=c-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[c]--,_-=2}while(_>0);for(h=c;0!==h;h--)for(u=e.bl_count[h];0!==u;)d=e.heap[--l],d>r||(n[2*d+1]!==h&&(e.opt_len+=(h-n[2*d+1])*n[2*d],n[2*d+1]=h),u--)}})(e,t),oa(n,l,e.bl_count)},da=(e,t,n)=>{let r,o,i=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=s,s=t[2*(r+1)+1],++a<c&&o===s||(a<l?e.bl_tree[2*o]+=a:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,i=o,0===s?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4))},ha=(e,t,n)=>{let r,o,i=-1,s=t[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),r=0;r<=n;r++)if(o=s,s=t[2*(r+1)+1],!(++a<c&&o===s)){if(a<l)do{na(e,o,e.bl_tree)}while(0!==--a);else 0!==o?(o!==i&&(na(e,o,e.bl_tree),a--),na(e,16,e.bl_tree),ta(e,a-3,2)):a<=10?(na(e,17,e.bl_tree),ta(e,a-3,3)):(na(e,18,e.bl_tree),ta(e,a-11,7));a=0,i=o,0===s?(c=138,l=3):o===s?(c=6,l=3):(c=7,l=4)}};let fa=!1;const pa=(e,t,n,r)=>{ta(e,0+(r?1:0),3),sa(e),ea(e,n),ea(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var _a=e=>{fa||((()=>{let e,t,n,r,o;const i=new Array(16);for(n=0,r=0;r<28;r++)for(Vs[r]=n,e=0;e<1<<js[r];e++)Ks[n++]=r;for(Ks[n-1]=r,o=0,r=0;r<16;r++)for(Xs[r]=o,e=0;e<1<<Gs[r];e++)qs[o++]=r;for(o>>=7;r<Ls;r++)for(Xs[r]=o<<7,e=0;e<1<<Gs[r]-7;e++)qs[256+o++]=r;for(t=0;t<=Ms;t++)i[t]=0;for(e=0;e<=143;)Bs[2*e+1]=8,e++,i[8]++;for(;e<=255;)Bs[2*e+1]=9,e++,i[9]++;for(;e<=279;)Bs[2*e+1]=7,e++,i[7]++;for(;e<=287;)Bs[2*e+1]=8,e++,i[8]++;for(oa(Bs,287,i),e=0;e<Ls;e++)zs[2*e+1]=5,zs[2*e]=ra(e,5);Zs=new Ws(Bs,js,257,Us,Ms),Ys=new Ws(zs,Gs,0,Ls,Ms),Qs=new Ws(new Array(0),Fs,0,19,7)})(),fa=!0),e.l_desc=new Js(e.dyn_ltree,Zs),e.d_desc=new Js(e.dyn_dtree,Ys),e.bl_desc=new Js(e.bl_tree,Qs),e.bi_buf=0,e.bi_valid=0,ia(e)},ba=(e,t,n,r)=>{let o,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Ps;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),ua(e,e.l_desc),ua(e,e.d_desc),s=(e=>{let t;for(da(e,e.dyn_ltree,e.l_desc.max_code),da(e,e.dyn_dtree,e.d_desc.max_code),ua(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Hs[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==t?pa(e,t,n,r):4===e.strategy||i===o?(ta(e,2+(r?1:0),3),la(e,Bs,zs)):(ta(e,4+(r?1:0),3),((e,t,n,r)=>{let o;for(ta(e,t-257,5),ta(e,n-1,5),ta(e,r-4,4),o=0;o<r;o++)ta(e,e.bl_tree[2*Hs[o]+1],3);ha(e,e.dyn_ltree,t-1),ha(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),la(e,e.dyn_ltree,e.dyn_dtree)),ia(e),r&&sa(e)},ma=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Ks[n]+Ps+1)]++,e.dyn_dtree[2*$s(t)]++),e.sym_next===e.sym_end),va=e=>{ta(e,2,3),na(e,256,Bs),(e=>{16===e.bi_valid?(ea(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},ya={_tr_init:_a,_tr_stored_block:pa,_tr_flush_block:ba,_tr_tally:ma,_tr_align:va};var ga=(e,t,n,r)=>{let o=65535&e,i=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{o=o+t[r++]|0,i=i+o|0}while(--s);o%=65521,i%=65521}return o|i<<16};const Ea=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var wa=(e,t,n,r)=>{const o=Ea,i=r+n;e^=-1;for(let n=r;n<i;n++)e=e>>>8^o[255&(e^t[n])];return-1^e},Oa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Sa={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ta,_tr_stored_block:Ra,_tr_flush_block:Ia,_tr_tally:Ca,_tr_align:Aa}=ya,{Z_NO_FLUSH:ka,Z_PARTIAL_FLUSH:Na,Z_FULL_FLUSH:xa,Z_FINISH:Da,Z_BLOCK:Pa,Z_OK:Ua,Z_STREAM_END:La,Z_STREAM_ERROR:Ma,Z_DATA_ERROR:ja,Z_BUF_ERROR:Ga,Z_DEFAULT_COMPRESSION:Fa,Z_FILTERED:Ha,Z_HUFFMAN_ONLY:Ba,Z_RLE:za,Z_FIXED:qa,Z_DEFAULT_STRATEGY:Ka,Z_UNKNOWN:Va,Z_DEFLATED:Xa}=Sa,Wa=258,Za=262,Ya=42,Qa=113,Ja=666,$a=(e,t)=>(e.msg=Oa[t],t),ec=e=>2*e-(e>4?9:0),tc=e=>{let t=e.length;for(;--t>=0;)e[t]=0},nc=e=>{let t,n,r,o=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=o?n-o:0}while(--t);t=o,r=t;do{n=e.prev[--r],e.prev[r]=n>=o?n-o:0}while(--t)};let rc=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const oc=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ic=(e,t)=>{Ia(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,oc(e.strm)},sc=(e,t)=>{e.pending_buf[e.pending++]=t},ac=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},cc=(e,t,n,r)=>{let o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),n),1===e.state.wrap?e.adler=ga(e.adler,t,o,n):2===e.state.wrap&&(e.adler=wa(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)},lc=(e,t)=>{let n,r,o=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-Za?e.strstart-(e.w_size-Za):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+Wa;let f=l[i+s-1],p=l[i+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,l[n+s]===p&&l[n+s-1]===f&&l[n]===l[i]&&l[++n]===l[i+1]){i+=2,n++;do{}while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<h);if(r=Wa-(h-i),i=h-Wa,r>s){if(e.match_start=t,s=r,r>=a)break;f=l[i+s-1],p=l[i+s]}}}while((t=d[t&u])>c&&0!==--o);return s<=e.lookahead?s:e.lookahead},uc=e=>{const t=e.w_size;let n,r,o;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Za)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),nc(e),r+=t),0===e.strm.avail_in)break;if(n=cc(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=rc(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=rc(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Za&&0!==e.strm.avail_in)},dc=(e,t)=>{let n,r,o,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>o&&(n=o),n<i&&(0===n&&t!==Da||t===ka||n!==r+e.strm.avail_in))break;s=t===Da&&n===r+e.strm.avail_in?1:0,Ra(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,oc(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(cc(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==ka&&t!==Da&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(cc(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,i=o>e.w_size?e.w_size:o,r=e.strstart-e.block_start,(r>=i||(r||t===Da)&&t!==ka&&0===e.strm.avail_in&&r<=o)&&(n=r>o?o:r,s=t===Da&&0===e.strm.avail_in&&n===r?1:0,Ra(e,e.block_start,n,s),e.block_start+=n,oc(e.strm)),s?3:1)},hc=(e,t)=>{let n,r;for(;;){if(e.lookahead<Za){if(uc(e),e.lookahead<Za&&t===ka)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=rc(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Za&&(e.match_length=lc(e,n)),e.match_length>=3)if(r=Ca(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=rc(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=rc(e,e.ins_h,e.window[e.strstart+1]);else r=Ca(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ic(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Da?(ic(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ic(e,!1),0===e.strm.avail_out)?1:2},fc=(e,t)=>{let n,r,o;for(;;){if(e.lookahead<Za){if(uc(e),e.lookahead<Za&&t===ka)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=rc(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Za&&(e.match_length=lc(e,n),e.match_length<=5&&(e.strategy===Ha||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,r=Ca(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=rc(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(ic(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Ca(e,0,e.window[e.strstart-1]),r&&ic(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Ca(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Da?(ic(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ic(e,!1),0===e.strm.avail_out)?1:2};function pc(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}const _c=[new pc(0,0,0,0,dc),new pc(4,4,8,4,hc),new pc(4,5,16,8,hc),new pc(4,6,32,32,hc),new pc(4,4,16,16,fc),new pc(8,16,32,32,fc),new pc(8,16,128,128,fc),new pc(8,32,128,256,fc),new pc(32,128,258,1024,fc),new pc(32,258,258,4096,fc)];function bc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Xa,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),tc(this.dyn_ltree),tc(this.dyn_dtree),tc(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),tc(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),tc(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const mc=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Ya&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Qa&&t.status!==Ja?1:0},vc=e=>{if(mc(e))return $a(e,Ma);e.total_in=e.total_out=0,e.data_type=Va;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Ya:Qa,e.adler=2===t.wrap?0:1,t.last_flush=-2,Ta(t),Ua},yc=e=>{const t=vc(e);return t===Ua&&(e=>{e.window_size=2*e.w_size,tc(e.head),e.max_lazy_match=_c[e.level].max_lazy,e.good_match=_c[e.level].good_length,e.nice_match=_c[e.level].nice_length,e.max_chain_length=_c[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},gc=(e,t,n,r,o,i)=>{if(!e)return Ma;let s=1;if(t===Fa&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>9||n!==Xa||r<8||r>15||t<0||t>9||i<0||i>qa||8===r&&1!==s)return $a(e,Ma);8===r&&(r=9);const a=new bc;return e.state=a,a.strm=e,a.status=Ya,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=i,a.method=n,yc(e)};var Ec=(e,t)=>{if(mc(e)||t>Pa||t<0)return e?$a(e,Ma):Ma;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Ja&&t!==Da)return $a(e,0===e.avail_out?Ga:Ma);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(oc(e),0===e.avail_out)return n.last_flush=-1,Ua}else if(0===e.avail_in&&ec(t)<=ec(r)&&t!==Da)return $a(e,Ga);if(n.status===Ja&&0!==e.avail_in)return $a(e,Ga);if(n.status===Ya&&0===n.wrap&&(n.status=Qa),n.status===Ya){let t=Xa+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Ba||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,ac(n,t),0!==n.strstart&&(ac(n,e.adler>>>16),ac(n,65535&e.adler)),e.adler=1,n.status=Qa,oc(e),0!==n.pending)return n.last_flush=-1,Ua}if(57===n.status)if(e.adler=0,sc(n,31),sc(n,139),sc(n,8),n.gzhead)sc(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),sc(n,255&n.gzhead.time),sc(n,n.gzhead.time>>8&255),sc(n,n.gzhead.time>>16&255),sc(n,n.gzhead.time>>24&255),sc(n,9===n.level?2:n.strategy>=Ba||n.level<2?4:0),sc(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(sc(n,255&n.gzhead.extra.length),sc(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=wa(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(sc(n,0),sc(n,0),sc(n,0),sc(n,0),sc(n,0),sc(n,9===n.level?2:n.strategy>=Ba||n.level<2?4:0),sc(n,3),n.status=Qa,oc(e),0!==n.pending)return n.last_flush=-1,Ua;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=wa(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=o,oc(e),0!==n.pending)return n.last_flush=-1,Ua;t=0,r-=o}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=wa(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=wa(e.adler,n.pending_buf,n.pending-r,r)),oc(e),0!==n.pending)return n.last_flush=-1,Ua;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,sc(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=wa(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=wa(e.adler,n.pending_buf,n.pending-r,r)),oc(e),0!==n.pending)return n.last_flush=-1,Ua;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,sc(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=wa(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(oc(e),0!==n.pending))return n.last_flush=-1,Ua;sc(n,255&e.adler),sc(n,e.adler>>8&255),e.adler=0}if(n.status=Qa,oc(e),0!==n.pending)return n.last_flush=-1,Ua}if(0!==e.avail_in||0!==n.lookahead||t!==ka&&n.status!==Ja){let r=0===n.level?dc(n,t):n.strategy===Ba?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(uc(e),0===e.lookahead)){if(t===ka)return 1;break}if(e.match_length=0,n=Ca(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ic(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Da?(ic(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ic(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===za?((e,t)=>{let n,r,o,i;const s=e.window;for(;;){if(e.lookahead<=Wa){if(uc(e),e.lookahead<=Wa&&t===ka)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=e.strstart-1,r=s[o],r===s[++o]&&r===s[++o]&&r===s[++o])){i=e.strstart+Wa;do{}while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<i);e.match_length=Wa-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Ca(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ca(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ic(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Da?(ic(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ic(e,!1),0===e.strm.avail_out)?1:2})(n,t):_c[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Ja),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Ua;if(2===r&&(t===Na?Aa(n):t!==Pa&&(Ra(n,0,0,!1),t===xa&&(tc(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),oc(e),0===e.avail_out))return n.last_flush=-1,Ua}return t!==Da?Ua:n.wrap<=0?La:(2===n.wrap?(sc(n,255&e.adler),sc(n,e.adler>>8&255),sc(n,e.adler>>16&255),sc(n,e.adler>>24&255),sc(n,255&e.total_in),sc(n,e.total_in>>8&255),sc(n,e.total_in>>16&255),sc(n,e.total_in>>24&255)):(ac(n,e.adler>>>16),ac(n,65535&e.adler)),oc(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Ua:La)},wc=(e,t)=>{let n=t.length;if(mc(e))return Ma;const r=e.state,o=r.wrap;if(2===o||1===o&&r.status!==Ya||r.lookahead)return Ma;if(1===o&&(e.adler=ga(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===o&&(tc(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,uc(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=rc(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,uc(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,r.wrap=o,Ua},Oc={deflateInit:(e,t)=>gc(e,t,Xa,15,8,Ka),deflateInit2:gc,deflateReset:yc,deflateResetKeep:vc,deflateSetHeader:(e,t)=>mc(e)||2!==e.state.wrap?Ma:(e.state.gzhead=t,Ua),deflate:Ec,deflateEnd:e=>{if(mc(e))return Ma;const t=e.state.status;return e.state=null,t===Qa?$a(e,ja):Ua},deflateSetDictionary:wc,deflateInfo:"pako deflate (from Nodeca project)"};const Sc=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Tc=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Sc(n,t)&&(e[t]=n[t])}}return e},Rc=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,o=e.length;t<o;t++){let o=e[t];n.set(o,r),r+=o.length}return n};let Ic=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ic=!1}const Cc=new Uint8Array(256);for(let e=0;e<256;e++)Cc[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Cc[254]=Cc[254]=1;var Ac=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,o,i,s=e.length,a=0;for(o=0;o<s;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<s&&(r=e.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),i=0,o=0;i<a;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<s&&(r=e.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},kc=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,o;const i=new Array(2*n);for(o=0,r=0;r<n;){let t=e[r++];if(t<128){i[o++]=t;continue}let s=Cc[t];if(s>4)i[o++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?i[o++]=65533:t<65536?i[o++]=t:(t-=65536,i[o++]=55296|t>>10&1023,i[o++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Ic)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,o)},Nc=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Cc[e[n]]>t?n:t};var xc=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Dc=Object.prototype.toString,{Z_NO_FLUSH:Pc,Z_SYNC_FLUSH:Uc,Z_FULL_FLUSH:Lc,Z_FINISH:Mc,Z_OK:jc,Z_STREAM_END:Gc,Z_DEFAULT_COMPRESSION:Fc,Z_DEFAULT_STRATEGY:Hc,Z_DEFLATED:Bc}=Sa;function zc(e){this.options=Tc({level:Fc,method:Bc,chunkSize:16384,windowBits:15,memLevel:8,strategy:Hc},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xc,this.strm.avail_out=0;let n=Oc.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==jc)throw new Error(Oa[n]);if(t.header&&Oc.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Ac(t.dictionary):"[object ArrayBuffer]"===Dc.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Oc.deflateSetDictionary(this.strm,e),n!==jc)throw new Error(Oa[n]);this._dict_set=!0}}function qc(e,t){const n=new zc(t);if(n.push(e,!0),n.err)throw n.msg||Oa[n.err];return n.result}zc.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let o,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?Mc:Pc,"string"==typeof e?n.input=Ac(e):"[object ArrayBuffer]"===Dc.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===Uc||i===Lc)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=Oc.deflate(n,i),o===Gc)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=Oc.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===jc;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},zc.prototype.onData=function(e){this.chunks.push(e)},zc.prototype.onEnd=function(e){e===jc&&(this.result=Rc(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Kc={Deflate:zc,deflate:qc,deflateRaw:function(e,t){return(t=t||{}).raw=!0,qc(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,qc(e,t)},constants:Sa};const Vc=16209;var Xc=function(e,t){let n,r,o,i,s,a,c,l,u,d,h,f,p,_,b,m,v,y,g,E,w,O,S,T;const R=e.state;n=e.next_in,S=e.input,r=n+(e.avail_in-5),o=e.next_out,T=e.output,i=o-(t-e.avail_out),s=o+(e.avail_out-257),a=R.dmax,c=R.wsize,l=R.whave,u=R.wnext,d=R.window,h=R.hold,f=R.bits,p=R.lencode,_=R.distcode,b=(1<<R.lenbits)-1,m=(1<<R.distbits)-1;e:do{f<15&&(h+=S[n++]<<f,f+=8,h+=S[n++]<<f,f+=8),v=p[h&b];t:for(;;){if(y=v>>>24,h>>>=y,f-=y,y=v>>>16&255,0===y)T[o++]=65535&v;else{if(!(16&y)){if(64&y){if(32&y){R.mode=16191;break e}e.msg="invalid literal/length code",R.mode=Vc;break e}v=p[(65535&v)+(h&(1<<y)-1)];continue t}for(g=65535&v,y&=15,y&&(f<y&&(h+=S[n++]<<f,f+=8),g+=h&(1<<y)-1,h>>>=y,f-=y),f<15&&(h+=S[n++]<<f,f+=8,h+=S[n++]<<f,f+=8),v=_[h&m];;){if(y=v>>>24,h>>>=y,f-=y,y=v>>>16&255,16&y){if(E=65535&v,y&=15,f<y&&(h+=S[n++]<<f,f+=8,f<y&&(h+=S[n++]<<f,f+=8)),E+=h&(1<<y)-1,E>a){e.msg="invalid distance too far back",R.mode=Vc;break e}if(h>>>=y,f-=y,y=o-i,E>y){if(y=E-y,y>l&&R.sane){e.msg="invalid distance too far back",R.mode=Vc;break e}if(w=0,O=d,0===u){if(w+=c-y,y<g){g-=y;do{T[o++]=d[w++]}while(--y);w=o-E,O=T}}else if(u<y){if(w+=c+u-y,y-=u,y<g){g-=y;do{T[o++]=d[w++]}while(--y);if(w=0,u<g){y=u,g-=y;do{T[o++]=d[w++]}while(--y);w=o-E,O=T}}}else if(w+=u-y,y<g){g-=y;do{T[o++]=d[w++]}while(--y);w=o-E,O=T}for(;g>2;)T[o++]=O[w++],T[o++]=O[w++],T[o++]=O[w++],g-=3;g&&(T[o++]=O[w++],g>1&&(T[o++]=O[w++]))}else{w=o-E;do{T[o++]=T[w++],T[o++]=T[w++],T[o++]=T[w++],g-=3}while(g>2);g&&(T[o++]=T[w++],g>1&&(T[o++]=T[w++]))}break}if(64&y){e.msg="invalid distance code",R.mode=Vc;break e}v=_[(65535&v)+(h&(1<<y)-1)]}}break}}while(n<r&&o<s);g=f>>3,n-=g,f-=g<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=o,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=o<s?s-o+257:257-(o-s),R.hold=h,R.bits=f};const Wc=15,Zc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Yc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Qc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Jc=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var $c=(e,t,n,r,o,i,s,a)=>{const c=a.bits;let l,u,d,h,f,p,_=0,b=0,m=0,v=0,y=0,g=0,E=0,w=0,O=0,S=0,T=null;const R=new Uint16Array(16),I=new Uint16Array(16);let C,A,k,N=null;for(_=0;_<=Wc;_++)R[_]=0;for(b=0;b<r;b++)R[t[n+b]]++;for(y=c,v=Wc;v>=1&&0===R[v];v--);if(y>v&&(y=v),0===v)return o[i++]=20971520,o[i++]=20971520,a.bits=1,0;for(m=1;m<v&&0===R[m];m++);for(y<m&&(y=m),w=1,_=1;_<=Wc;_++)if(w<<=1,w-=R[_],w<0)return-1;if(w>0&&(0===e||1!==v))return-1;for(I[1]=0,_=1;_<Wc;_++)I[_+1]=I[_]+R[_];for(b=0;b<r;b++)0!==t[n+b]&&(s[I[t[n+b]]++]=b);if(0===e?(T=N=s,p=20):1===e?(T=Zc,N=Yc,p=257):(T=Qc,N=Jc,p=0),S=0,b=0,_=m,f=i,g=y,E=0,d=-1,O=1<<y,h=O-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){C=_-E,s[b]+1<p?(A=0,k=s[b]):s[b]>=p?(A=N[s[b]-p],k=T[s[b]-p]):(A=96,k=0),l=1<<_-E,u=1<<g,m=u;do{u-=l,o[f+(S>>E)+u]=C<<24|A<<16|k}while(0!==u);for(l=1<<_-1;S&l;)l>>=1;if(0!==l?(S&=l-1,S+=l):S=0,b++,0===--R[_]){if(_===v)break;_=t[n+s[b]]}if(_>y&&(S&h)!==d){for(0===E&&(E=y),f+=m,g=_-E,w=1<<g;g+E<v&&(w-=R[g+E],!(w<=0));)g++,w<<=1;if(O+=1<<g,1===e&&O>852||2===e&&O>592)return 1;d=S&h,o[d]=y<<24|g<<16|f-i}}return 0!==S&&(o[f+S]=_-E<<24|64<<16),a.bits=y,0};const{Z_FINISH:el,Z_BLOCK:tl,Z_TREES:nl,Z_OK:rl,Z_STREAM_END:ol,Z_NEED_DICT:il,Z_STREAM_ERROR:sl,Z_DATA_ERROR:al,Z_MEM_ERROR:cl,Z_BUF_ERROR:ll,Z_DEFLATED:ul}=Sa,dl=16180,hl=16190,fl=16191,pl=16192,_l=16194,bl=16199,ml=16200,vl=16206,yl=16209,gl=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function El(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wl=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<dl||t.mode>16211?1:0},Ol=e=>{if(wl(e))return sl;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=dl,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,rl},Sl=e=>{if(wl(e))return sl;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Ol(e)},Tl=(e,t)=>{let n;if(wl(e))return sl;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?sl:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Sl(e))},Rl=(e,t)=>{if(!e)return sl;const n=new El;e.state=n,n.strm=e,n.window=null,n.mode=dl;const r=Tl(e,t);return r!==rl&&(e.state=null),r};let Il,Cl,Al=!0;const kl=e=>{if(Al){Il=new Int32Array(512),Cl=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for($c(1,e.lens,0,288,Il,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;$c(2,e.lens,0,32,Cl,0,e.work,{bits:5}),Al=!1}e.lencode=Il,e.lenbits=9,e.distcode=Cl,e.distbits=5},Nl=(e,t,n,r)=>{let o;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>r&&(o=r),i.window.set(t.subarray(n-r,n-r+o),i.wnext),(r-=o)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0};var xl=(e,t)=>{let n,r,o,i,s,a,c,l,u,d,h,f,p,_,b,m,v,y,g,E,w,O,S=0;const T=new Uint8Array(4);let R,I;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wl(e)||!e.output||!e.input&&0!==e.avail_in)return sl;n=e.state,n.mode===fl&&(n.mode=pl),s=e.next_out,o=e.output,c=e.avail_out,i=e.next_in,r=e.input,a=e.avail_in,l=n.hold,u=n.bits,d=a,h=c,O=rl;e:for(;;)switch(n.mode){case dl:if(0===n.wrap){n.mode=pl;break}for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&l,T[1]=l>>>8&255,n.check=wa(n.check,T,2,0),l=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=yl;break}if((15&l)!==ul){e.msg="unknown compression method",n.mode=yl;break}if(l>>>=4,u-=4,w=8+(15&l),0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=yl;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:fl,l=0,u=0;break;case 16181:for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(n.flags=l,(255&n.flags)!==ul){e.msg="unknown compression method",n.mode=yl;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=yl;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&l,T[1]=l>>>8&255,n.check=wa(n.check,T,2,0)),l=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(T[0]=255&l,T[1]=l>>>8&255,T[2]=l>>>16&255,T[3]=l>>>24&255,n.check=wa(n.check,T,4,0)),l=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(T[0]=255&l,T[1]=l>>>8&255,n.check=wa(n.check,T,2,0)),l=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(T[0]=255&l,T[1]=l>>>8&255,n.check=wa(n.check,T,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>a&&(f=a),f&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+f),w)),512&n.flags&&4&n.wrap&&(n.check=wa(n.check,r,f,i)),a-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===a)break e;f=0;do{w=r[i+f++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=wa(n.check,r,f,i)),a-=f,i+=f,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;f=0;do{w=r[i+f++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&f<a);if(512&n.flags&&4&n.wrap&&(n.check=wa(n.check,r,f,i)),a-=f,i+=f,w)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=yl;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=fl;break;case 16189:for(;u<32;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}e.adler=n.check=gl(l),l=0,u=0,n.mode=hl;case hl:if(0===n.havedict)return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=a,n.hold=l,n.bits=u,il;e.adler=n.check=1,n.mode=fl;case fl:if(t===tl||t===nl)break e;case pl:if(n.last){l>>>=7&u,u-=7&u,n.mode=vl;break}for(;u<3;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}switch(n.last=1&l,l>>>=1,u-=1,3&l){case 0:n.mode=16193;break;case 1:if(kl(n),n.mode=bl,t===nl){l>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=yl}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=yl;break}if(n.length=65535&l,l=0,u=0,n.mode=_l,t===nl)break e;case _l:n.mode=16195;case 16195:if(f=n.length,f){if(f>a&&(f=a),f>c&&(f=c),0===f)break e;o.set(r.subarray(i,i+f),s),a-=f,i+=f,c-=f,s+=f,n.length-=f;break}n.mode=fl;break;case 16196:for(;u<14;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=yl;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.lens[C[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[C[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},O=$c(0,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,O){e.msg="invalid code lengths set",n.mode=yl;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[l&(1<<n.lenbits)-1],b=S>>>24,m=S>>>16&255,v=65535&S,!(b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(v<16)l>>>=b,u-=b,n.lens[n.have++]=v;else{if(16===v){for(I=b+2;u<I;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(l>>>=b,u-=b,0===n.have){e.msg="invalid bit length repeat",n.mode=yl;break}w=n.lens[n.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===v){for(I=b+3;u<I;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}l>>>=b,u-=b,w=0,f=3+(7&l),l>>>=3,u-=3}else{for(I=b+7;u<I;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}l>>>=b,u-=b,w=0,f=11+(127&l),l>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=yl;break}for(;f--;)n.lens[n.have++]=w}}if(n.mode===yl)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=yl;break}if(n.lenbits=9,R={bits:n.lenbits},O=$c(1,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,O){e.msg="invalid literal/lengths set",n.mode=yl;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},O=$c(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,O){e.msg="invalid distances set",n.mode=yl;break}if(n.mode=bl,t===nl)break e;case bl:n.mode=ml;case ml:if(a>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=a,n.hold=l,n.bits=u,Xc(e,h),s=e.next_out,o=e.output,c=e.avail_out,i=e.next_in,r=e.input,a=e.avail_in,l=n.hold,u=n.bits,n.mode===fl&&(n.back=-1);break}for(n.back=0;S=n.lencode[l&(1<<n.lenbits)-1],b=S>>>24,m=S>>>16&255,v=65535&S,!(b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(m&&!(240&m)){for(y=b,g=m,E=v;S=n.lencode[E+((l&(1<<y+g)-1)>>y)],b=S>>>24,m=S>>>16&255,v=65535&S,!(y+b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}l>>>=y,u-=y,n.back+=y}if(l>>>=b,u-=b,n.back+=b,n.length=v,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=fl;break}if(64&m){e.msg="invalid literal/length code",n.mode=yl;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;u<I;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;S=n.distcode[l&(1<<n.distbits)-1],b=S>>>24,m=S>>>16&255,v=65535&S,!(b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(!(240&m)){for(y=b,g=m,E=v;S=n.distcode[E+((l&(1<<y+g)-1)>>y)],b=S>>>24,m=S>>>16&255,v=65535&S,!(y+b<=u);){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}l>>>=y,u-=y,n.back+=y}if(l>>>=b,u-=b,n.back+=b,64&m){e.msg="invalid distance code",n.mode=yl;break}n.offset=v,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;u<I;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=yl;break}n.mode=16204;case 16204:if(0===c)break e;if(f=h-c,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=yl;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),_=n.window}else _=o,p=s-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do{o[s++]=_[p++]}while(--f);0===n.length&&(n.mode=ml);break;case 16205:if(0===c)break e;o[s++]=n.length,c--,n.mode=ml;break;case vl:if(n.wrap){for(;u<32;){if(0===a)break e;a--,l|=r[i++]<<u,u+=8}if(h-=c,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?wa(n.check,o,h,s-h):ga(n.check,o,h,s-h)),h=c,4&n.wrap&&(n.flags?l:gl(l))!==n.check){e.msg="incorrect data check",n.mode=yl;break}l=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===a)break e;a--,l+=r[i++]<<u,u+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=yl;break}l=0,u=0}n.mode=16208;case 16208:O=ol;break e;case yl:O=al;break e;case 16210:return cl;default:return sl}return e.next_out=s,e.avail_out=c,e.next_in=i,e.avail_in=a,n.hold=l,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<yl&&(n.mode<vl||t!==el))&&Nl(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?wa(n.check,o,h,e.next_out-h):ga(n.check,o,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===fl?128:0)+(n.mode===bl||n.mode===_l?256:0),(0===d&&0===h||t===el)&&O===rl&&(O=ll),O},Dl={inflateReset:Sl,inflateReset2:Tl,inflateResetKeep:Ol,inflateInit:e=>Rl(e,15),inflateInit2:Rl,inflate:xl,inflateEnd:e=>{if(wl(e))return sl;let t=e.state;return t.window&&(t.window=null),e.state=null,rl},inflateGetHeader:(e,t)=>{if(wl(e))return sl;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,rl):sl},inflateSetDictionary:(e,t)=>{const n=t.length;let r,o,i;return wl(e)?sl:(r=e.state,0!==r.wrap&&r.mode!==hl?sl:r.mode===hl&&(o=1,o=ga(o,t,n,0),o!==r.check)?al:(i=Nl(e,t,n,n),i?(r.mode=16210,cl):(r.havedict=1,rl)))},inflateInfo:"pako inflate (from Nodeca project)"};var Pl=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ul=Object.prototype.toString,{Z_NO_FLUSH:Ll,Z_FINISH:Ml,Z_OK:jl,Z_STREAM_END:Gl,Z_NEED_DICT:Fl,Z_STREAM_ERROR:Hl,Z_DATA_ERROR:Bl,Z_MEM_ERROR:zl}=Sa;function ql(e){this.options=Tc({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xc,this.strm.avail_out=0;let n=Dl.inflateInit2(this.strm,t.windowBits);if(n!==jl)throw new Error(Oa[n]);if(this.header=new Pl,Dl.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ac(t.dictionary):"[object ArrayBuffer]"===Ul.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Dl.inflateSetDictionary(this.strm,t.dictionary),n!==jl)))throw new Error(Oa[n])}function Kl(e,t){const n=new ql(t);if(n.push(e),n.err)throw n.msg||Oa[n.err];return n.result}ql.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let i,s,a;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Ml:Ll,"[object ArrayBuffer]"===Ul.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=Dl.inflate(n,s),i===Fl&&o&&(i=Dl.inflateSetDictionary(n,o),i===jl?i=Dl.inflate(n,s):i===Bl&&(i=Fl));n.avail_in>0&&i===Gl&&n.state.wrap>0&&0!==e[n.next_in];)Dl.inflateReset(n),i=Dl.inflate(n,s);switch(i){case Hl:case Bl:case Fl:case zl:return this.onEnd(i),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||i===Gl))if("string"===this.options.to){let e=Nc(n.output,n.next_out),t=n.next_out-e,o=kc(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==jl||0!==a){if(i===Gl)return i=Dl.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},ql.prototype.onData=function(e){this.chunks.push(e)},ql.prototype.onEnd=function(e){e===jl&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Rc(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Vl={Inflate:ql,inflate:Kl,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Kl(e,t)},ungzip:Kl,constants:Sa};const{Deflate:Xl,deflate:Wl,deflateRaw:Zl,gzip:Yl}=Kc,{Inflate:Ql,inflate:Jl,inflateRaw:$l,ungzip:eu}=Vl;var tu,nu,ru={Deflate:Xl,deflate:Wl,deflateRaw:Zl,gzip:Yl,Inflate:Ql,inflate:Jl,inflateRaw:$l,ungzip:eu,constants:Sa};class ou{static init(e,t,n){this.axiosClient.defaults.baseURL=e,this.axiosClient.defaults.headers.post["Content-Type"]="application/json",this.axiosClient.defaults.headers.post["Content-Encoding"]="gzip",this.headers=n,this.namespace=t}static send(e){return So(this,void 0,void 0,function*(){try{const t=JSON.stringify(e),n=ru.gzip(t);yield this.axiosClient.post(uu.config.namespace,n,this.headers)}catch(e){}})}}ou.axiosClient=xs,ou.headers={},ou.namespace="";class iu{constructor(){this.flushInterval=5e3,this.flushTimer=null,this.maxBufferBytes=0,this.currentBufferSize=0}scheduleFlushTimer(){this.flushTimer=window.setTimeout(()=>So(this,void 0,void 0,function*(){yield this.flush(),this.scheduleFlushTimer()}),this.flushInterval)}resetFlushTimer(){this.flushTimer&&clearTimeout(this.flushTimer),this.scheduleFlushTimer()}}class su extends iu{constructor(e=5e3,t=1e4){super(),this.store=[],this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return So(this,void 0,void 0,function*(){const t=new Blob([JSON.stringify(e)]).size;this.store.push(e),this.currentBufferSize+=t,this.currentBufferSize>=this.maxBufferBytes&&(yield this.flush())})}flush(){return So(this,void 0,void 0,function*(){0!==this.store.length?ou.send(this.store).then(()=>{this.store=[],this.currentBufferSize=0,this.resetFlushTimer()}):this.resetFlushTimer()})}}class au extends iu{constructor(e=5e3,t=1e4){super(),this.storageKey="oneLogBuffer",this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return So(this,void 0,void 0,function*(){const t=new Blob([JSON.stringify(e)]).size;this.currentBufferSize+=t,this.appendLogs(e),this.currentBufferSize>=this.maxBufferBytes&&(yield this.flush())})}flush(){return So(this,void 0,void 0,function*(){const e=this.fetchLogs();0!==e.length?ou.send(e).then(()=>{localStorage.removeItem(this.storageKey),this.currentBufferSize=0,this.resetFlushTimer()}).catch(e=>{}):this.resetFlushTimer()})}appendLogs(e){const t=this.fetchLogs();t.push(e),localStorage.setItem(this.storageKey,JSON.stringify(t))}fetchLogs(){const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}}!function(e){e.MEMORY="memory",e.LOCAL="local",e.CHROME="chrome"}(tu||(tu={}));class cu extends iu{constructor(e=5e3,t=1e4){super(),this.storageKey="oneLogBuffer",this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return So(this,void 0,void 0,function*(){const t=new Blob([JSON.stringify(e)]).size;this.currentBufferSize+=t,yield this.appendLogs(e),this.currentBufferSize>this.maxBufferBytes&&(yield this.flush())})}flush(){return So(this,void 0,void 0,function*(){this.fetchLogs().then(e=>So(this,void 0,void 0,function*(){0!==e.length?ou.send(e).then(()=>So(this,void 0,void 0,function*(){yield chrome.storage.local.remove(this.storageKey),this.currentBufferSize=0,this.resetFlushTimer()})):this.resetFlushTimer()}))})}appendLogs(e){return So(this,void 0,void 0,function*(){const t=yield this.fetchLogs();t.push(e),yield chrome.storage.local.set({[this.storageKey]:t})})}fetchLogs(){return So(this,void 0,void 0,function*(){return chrome.storage.local.get(this.storageKey).then(e=>e[this.storageKey]||[])})}scheduleFlushTimer(){this.flushTimer=setTimeout(()=>So(this,void 0,void 0,function*(){yield this.flush(),this.scheduleFlushTimer()}),this.flushInterval)}}class lu{static createStorage(e,t,n){switch(e){case tu.LOCAL:return new au(t,n);case tu.CHROME:return new cu(t,n);default:return new su(t,n)}}}class uu{static init(e="com.quillbot.dev",t="dev",n=tu.CHROME,r=1e4,o=5e3,i={}){let s="https://ol-collector.quillbot.dev";"prod"===t&&(s="https://ol-collector.quillbot.com"),e="/"+e,ou.init(s,e,i),this.storage=lu.createStorage(n,o,r),this.config={host:s,version:"v1",namespace:e,env:t,storageType:n,postBytes:r,postInterval:o,headers:i}}static log(e){this.storage.buffer(e).then(e=>{})}static flush(){this.storage.flush().then(e=>{})}}uu.config={host:"",version:"",namespace:"",env:"",storageType:"",postBytes:2e3,postInterval:-1,headers:{}};var du={AB_TEST_DATA_API_ERROR:"AB_TEST_DATA_API_ERROR",ACCEPTED_PRIVACY_POLICY_2023_DECEMBER_15:"ACCEPTED_PRIVACY_POLICY_2023_DECEMBER_15",ACTIVE_CAMPAIGNS_CHROME_STORAGE_KEY:"qb-active-campaigns",ADD_WORD_TO_DICTIONARY_ERROR:"ADD_WORD_TO_DICTIONARY_ERROR",AI_DETECTOR_PRODUCT_URL:"https://".concat(po,"/ai-content-detector?product=").concat(_o),AMPLITUDE_EXPERIMENTS:"ampExperiments",API_PREFIX_URL:"".concat(fo,"/api"),AUTHENTICATE_CAMPAIGN_API_ERROR:"AUTHENTICATE_CAMPAIGN_API_ERROR",BOT_DETECTED:"botDetected",CACHE_API:"cacheApi",CACHE_PREFIX:"cache~",CHATGPT_CONFIG:"chatgptConfig",CHROME_PROTOCOL_BASED_URL:"chrome://**",CHROME_STORAGE_LANGUAGE_CONFIG_KEY:"languageConfig",CLASSIC_EXT_URL:"https://".concat(po,"/extension"),CUSTOM_TOKEN_SCOPE:"CHROME_EXT",DATA_SHARING:"DATA_SHARING",DETECT_LANGUAGE_API_ERROR:"UTILS_DETECT_LANGUAGE_ERROR",DETECT_LANGUAGE_API_SUCCESS:"UTILS_DETECT_LANGUAGE_API_SUCCESS",DEVICE_ID_HEADER_NAME:"device-id",DISABLE:"DISABLE_EXTENSION",DOCS_EXT_URL:"https://workspace.google.com/marketplace/app/quillbot_paraphrasing_and_summarizing_to/305988918037",ELEMENT_OBSERVABLE_SUBS:{ELEMENT_POSITION_UPDATES:"ELEMENT_POSITION_UPDATES",GRAMMAR_HIGHLIGHTS:"GRAMMAR_HIGHLIGHTS",INPUT_TEXT_DESELECTION:"INPUT_TEXT_DESELECTION",INPUT_TEXT_SELECTION:"INPUT_TEXT_SELECTION",RESIZE_ELEMENT:"RESIZE_ELEMENT",RESIZE_PARENT:"RESIZE_PARENT",TRACK_TOKENS:"TRACK_TOKENS"},EMAIL_FEEDBACK_URL:"https://mail.google.com/mail/",ENABLE_LOLLIPOP:"hasLollipopEnabled",EXT_INSTALLATION_FIRST_USE_POST_INSTALL_TIMESTAMP:"EXT_INSTALLATION_FIRST_USE_POST_INSTALL_TIMESTAMP",EXT_INSTALLATION_TIMESTAMP:"EXT_INSTALLATION_TIMESTAMP",EXT_INSTALLATION_TYPE:"EXT_INSTALLATION_TYPE",EXTENSION_HASH:"extensionHash",EXTENSION_INITIAL_ONBOARDING_TOUR_DISMISSED:"OnBoardingDismissed",EXTENSION_INITIAL_ONBOARDING_TOUR_DISMISSED_TIMESTAMP:"onboardingDismissedTimestamp",EXTENSION_INITIAL_ONBOARDING_TOUR_FIRST_TIME_RENDERED:"onboardingFirstTimeRendered",EXTENSION_PLAYGROUND:"qb-extension-playground",EXTERNAL_MSG_DETECT:"detect-extension",EXTERNAL_MSG_FOR_DATA_OPT_IN:"data-opt-in",EXTERNAL_MSG_FOR_DISABLE:"EXTERNAL_MSG_FOR_DISABLE",EXTERNAL_MSG_FOR_ENABLE:"EXTERNAL_MSG_FOR_ENABLE",EXTERNAL_MSG_FOR_PRIVACY:"privacy-policy-verified",EXTERNAL_MSG_FOR_RECAPTCHA:"captcha-verified",EXTERNAL_MSG_FOR_USER_GC_LANGUAGE_CONFIG:"user-gc-language-config",EXTERNAL_MSG_FOR_USER_ID_TOKEN:"EXTERNAL_MSG_FOR_USER_ID_TOKEN",EXTERNAL_MSG_FOR_USER_PREFERENCE:"EXTERNAL_MSG_FOR_USER_PREFERENCE",EXTERNAL_MSG_HANDLE_OCTOBER24_TOS:"HANDLE_OCTOBER24_TOS",EXTERNAL_MSG_INPUT_TEXT:"paraphrase-input-text",EXTERNAL_MSG_TO_CHECK_PIN_STATUS:"check-is-pinned",EXTRACT_KEYWORDS_API_ERROR:"EXTRACT_KEYWORDS_API_ERROR",FEATURE_CONFIG:"featureConfig",GA_API_URL:"https://www.google-analytics.com",GA_COOKIE_KEY:"CUSTOM_GA_CLIENT_ID",GC_SURVEY_URL:"https://docs.google.com/forms/d/1iQeB8Kc-VtJ4hqgusrgTM2gqoTEfcnJRyfsLxhyezS0/viewform?edit_requested=true",GDOCS_FEEDBACK_FORM_URL:"https://forms.gle/9B3npkDkZ9Xqj81L6",GDOCS_MODE_CHECKER:"GDOCS_MODE_CHECKER",GENAI_V2_ONBOARDING_TOUR_FIRST_TIME_RENDERED:"GENAI_V2_ONBOARDING_TOUR_FIRST_TIME_RENDERED",GENERIC_DOMAIN_CONFIG:"generic-config",GET_USER_LANGUAGE_CONFIG_ERROR:"GET_USER_LANGUAGE_CONFIG_ERROR",GMCR:"GRAMMAR_CHECKER",GRAMMAR_CHECKER_API_ERROR:"UTILS_GRAMMAR_CHECKER_ERROR",HARDWARE_INFO_TRACKED:"hardwareInfoTracked",HUMANIZER_PRODUCT_URL:"https://".concat(po,"/ai-humanizer?product=").concat(_o),INSTALL_SUCCESS_URL:"https://".concat(po,"/extension-success"),IS_DEV:!1,IS_PROD:!0,LANGUAGE_PREF_HEADER_NAME:"language_pref_updated_at",LANGUAGE_PREF_UPDATED_AT_STRING:"language_pref_updated_at",LOG_IN_URL:"https://".concat(po,"/login?product=").concat(_o),LOGGER_EXTENSION_ID:"hhgjgghchegningnonjkmcbkmhfgelkp",LOGIN_URL:"https://".concat(po,"/login"),LOLLIPOP:"LOLLIPOP",LOLLIPOP_LANDING_PAGE_URL:"https://".concat(po,"/app/text-cursor?product=").concat(_o),MAX_PERMISSIBLE_ZINDEX:2147483647,MODEL_STATS_PREFIX:"quillbotModelStats_",NETWORK_API:"networkApi",NEW_TAB:"newTab",ON_DEVICE_SENTENCE_SPLITTER_CONFIG:"onDeviceSentenceSplitterConfig",onboardingWalkthroughCampaigns:"onboardingWalkthroughCampaigns",OVERHANG_SUGGESTION_ID_SUFFIX:"OVERHANG_SUGGESTION_ID_SUFFIX",PASSIVE_VOICE_EMPTY_OUTPUTS:["",null,"none"],PAUSE:"PAUSE_EXTENSION",PERSONAL_INFORMATION_USAGE_URL:"https://help.quillbot.com/hc/en-us/articles/360056530894-How-does-QuillBot-use-my-data?referrer=".concat(_o),PLAN_PAGE_URL:"https://".concat(po,"/settings?tab=1&product=").concat(_o),PLATFORM_TYPE:_o,PLATFORM_TYPE_HEADER_NAME:"platform-type",PLATFORM_VERSION_HEADER_NAME:"platform-version",PPHR:"PARAPHRASER",PREFERENCES_PAGE_URL:"https://".concat(po,"/settings?menu=preferences&product=").concat(_o),PREMIUM_HEADER_NAME:"premium",PREMIUM_URL:"https://".concat(po,"/premium?product=").concat(_o),PRIVACY_POLICY_URL:"https://".concat(po,"/privacy?product=").concat(_o),PROFILE_PAGE_URL:"https://".concat(po,"/settings?product=").concat(_o),QB_COOKIE_ABIDV2:"abIDV2",QB_COOKIE_AUTH_STRING:"authenticated",QB_COOKIE_DEVICE_ID:"qbDeviceId",QB_COOKIE_GET_URL:po,QB_COOKIE_INCLUDE_URL:po,QB_COOKIE_INSTALLATION_SOURCE:"qbExtInstSrc",QB_COOKIE_PREMIUM_STRING:"premium",QB_COOKIE_PREMIUM_TIMESTAMP:"premiumUpdateTimestamp",QB_COOKIE_URL:po,QB_ID_TOKEN_STRING:"useridtoken",QB_SIGN_OUT:"sign-out",QB_STORAGE_AREA:"local",QB_URL:"https://".concat(po),QB_USER_PROFILE_FETCH_TIMESTAMP:"QB_USER_PROFILE_FETCH_TIMESTAMP",QB_WRITER_BLOCK_BLOG_URL:"https://quillbot.com/blog/how-to-overcome-common-writing-roadblocks-part-1/",QUILLBOT_SHADOW_ROOT:"qb-ext-sr",RATE_ON_CHROMESTORE_URL_BTN:Oo(),RATE_ON_CHROMESTORE_URL_LINK:Oo(),RE_ENABLE_FLOW_RELEASE_UPDATE_TIMESTAMP:"RE_ENABLE_FLOW_RELEASE_UPDATE_TIMESTAMP",REFERRER:"CHROME-EXT",REMOVE_WORD_FROM_DICTIONARY_ERROR:"REMOVE_WORD_FROM_DICTIONARY_ERROR",RENDERED_SECOND_TIME:"RENDERED_SECOND_TIME",RERUN_PIPELINE_FOR_EDITORS:"rerun-pipeline-for-editors",RUNNING_E2E:"true"===bo,SAFARI_EXTENSION_ID:"com.quillbot.safari.macos.Extension",SENTENCE_SPLITTER_API_ERROR:"UTILS_SENTENCE_SPLITTER_ERROR",SHOW_HIGHLIGHTS:"SHOW_HIGHLIGHTS",SHOWN_MULTILINGUAL_ONBOARING:"SHOWN_MULTILINGUAL_ONBOARING",SIGN_UP_URL:"https://".concat(po,"/signup?product=").concat(_o),SPELLING_ERROR_EXPLAINER_ID:"000051",SUMMARIZER_API_ERROR:"SUMMARIZER_API_ERROR",TOGGLE_SENTENCE_SUGGESTIONS:"TOGGLE_SENTENCE_SUGGESTIONS",TOOLBOX_GET_REQUEST_ERROR:"TOOLBOX_GET_REQUEST_ERROR",TOTAL_FIXALL_PERFORMED_COUNT:"totalFixallPerformedCount",TOTAL_GC_SUGGESTIONS_ACCEPTED:"TOTAL_GC_SUGGESTIONS_ACCEPTED",TRACKING_API:"".concat(mo),TRUST_CENTER_URL:"https://".concat(po,"/trust-center#how-does-quillbot-use-my-data"),UNDERLINES_TOGGLE:"UNDERLINES_TOGGLE",UNINSTALL_SURVEY_URL:"https://".concat(po,"/exit-survey"),UPDATE_SUGGESTED_WORD_ERROR:"UPDATE_SUGGESTED_WORD_ERROR",UPDATE_USER_LANG_GC_ERROR_CATEGORY_ERROR:"UPDATE_USER_LANG_GC_ERROR_CATEGORY_ERROR",UPDATE_USER_PROFILE_API_ERROR:"UPDATE_USER_PROFILE_API_ERROR",UPGRADE_URL:"https://".concat(po,"/upgrade?product=").concat(_o),UPGRADE_URL_WITH_COUPON:"https://".concat(po,"/upgrade?referrer=extension_campaign_2022_oct&p=12&coupon="),UPSELL_CAMPAIGN_OCT_2022:{metricsName:"extension_campaign_2022_oct",name:"extension_campaign_2022_oct",promoCode:"GET30",showedPromoModalChromeStorageKey:"extension_campaign_2022_oct__showedPromoModalChromeStorageKey",showPromoModalChromeStorageKey:"extension_campaign_2022_oct__showPromoModalChromeStorageKey"},USER_ID_TOKEN_FORCE_REFRESH_TIMESTAMP:"userIdTokenForceRefreshTimestamp",WEBSITE_ORIGIN_HEADER_NAME:"x-website-origin",WEBSITE_URL_HEADER_NAME:"x-website-url",WORD_EXT_URL:"https://".concat(po,"/word"),WRITING_GOALS:"writingGoals"};Object.freeze({GRAY:"#b8b8b8",GREEN:"#398547",GREEN_BUBBLES:"#E8F3EB",GREEN_SALEM:"#178733",RED:"#FB3F4B",WHITE:"#ffffff"}),null===(nu=du.QB_COOKIE_URL)||void 0===nu||null===(nu=nu.split("."))||void 0===nu||null===(nu=nu.slice(-2))||void 0===nu||nu.join("."),tu.CHROME;function hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hu(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var pu=du.CLASSIC_EXT_URL,_u=!1,bu=null;if(!window.addedQuillbotExtension){var mu=function(e,t){var n=null;new Promise(function(e,t){var n=window.getSelection().toString();n&&n.length>0?e(n):chrome.runtime.sendMessage({action:f},function(t){chrome.runtime.lastError?chrome.runtime.sendMessage({action:h,payload:{error:chrome.runtime.lastError,errorType:"GET_HOST_TURN_OFF_SESSION_STATE_ERROR"}}):t&&t.selection?e(t.selection):e(n)})}).then(function(r){if(gu)n=document.querySelector("#quillbot-extension-sidebar"),bu=null;else{gu=!0,(n=document.createElement("div")).id="quillbot-extension-sidebar",n.style.position="absolute",n.style.boxShadow="2px 1px 12px #000000b3",n.style.display="flex",n.style.flexDirection="column",document.body.appendChild(n);var s=document.createElement("div");s.style.padding="0px 6px 2px",s.style.lineHeight="1em",s.style.cursor="pointer",s.style.position="absolute",s.style.background="#e0d9d9",s.style.fontFamily="monospace",s.style.fontSize="20px",s.style.color="#555",s.innerHTML="x",s.addEventListener("mouseover",function(){s.style.background="rgb(224, 151, 151)"}),s.addEventListener("mouseout",function(){s.style.background="#e0d9d9"}),s.addEventListener("click",function(){chrome.runtime.sendMessage({action:d,payload:{amplitude:{eventName:i},tracking:{eventName:i}}}),chrome.storage.local.get(["tabState"],function(e){var n=null;e.tabState&&(n=e.tabState),chrome.storage.local.set({tabState:fu(fu({},n),{},o({},t,{showClassicExt:!1}))})}),mu(!0,t)}),n.appendChild(s),(bu=document.createElement("iframe")).src=pu,bu.scorlling="no",bu.width=Eu-2,n.style.position="relative",bu.style.height="100vh",bu.style.border="none",bu.style.marginLeft="2px",bu.style.paddingTop="5px",bu.id="quillbot-extension-iframe",n.appendChild(bu),n.style.cssText="\n\t\t\t\tposition:fixed;\n\t\t\t\ttop:0px;\n\t\t\t\tright:0px;\n\t\t\t\twidth:0px;\n\t\t\t\theight:100%;\n\t\t\t\tbackground: #eee;\n\t\t\t\tz-index:999999999999;\n\t\t\t\ttransition: all .35s;\n\t\t\t\tbox-shadow: 2px 1px 12px #000000b3;\n\t\t\t"}r.length>0&&r!==wu&&!e&&vu(r),yu=!e||!yu,n.style.width=yu?"".concat(Eu,"px"):"0px"})};window.addEventListener("message",function(e){if(pu.includes(e.origin)){var t=e.data;if("loadExtension"===t.method)document.querySelector("#quillbot-extension-iframe").contentWindow.postMessage({method:"setChromeHostUrl"},"*"),_u=!0;else if("finSetText"===t.method){document.querySelector("#quillbot-extension-iframe").contentWindow.postMessage({method:"quillInput"},"*")}}});var vu=function(e){if(!_u)return setTimeout(vu.bind(undefined,e),500);document.querySelector("#quillbot-extension-iframe").contentWindow.postMessage({method:"setInputText",text:e},"*")};chrome.runtime.onMessage.addListener(function(e,t,n){"toggleSidebar"===e.callFunction&&(mu(e.toggle,e.tabID),n({farewell:"goodbye"}))});var yu=!1,gu=!1,Eu=450,wu="";window.addedQuillbotExtension=!0}})();
//# sourceMappingURL=sourceMap/quillClassic.js.map