function Highlighter(){var e=null,i=!1,t=Date.now(),l=$("<div class='adblock-highlight-node'></div>");function o(i){var o,c=i.target,n=Date.now();n-t<25||(t=n,c===l[0]&&(l.hide(),c=document.elementFromPoint(i.clientX,i.clientY)),c!==e?c!==document.body&&"adblock-killme-overlay"!==c.className?(c=$(c),e=c[0],o=c.offset(),l.css({height:c.outerHeight(),width:c.outerWidth(),left:o.left,top:o.top}),l.show()):l.hide():l.show())}l.appendTo("body"),this.getCurrentNode=function(i){return i===l[0]?e:i},this.enable=function(){l&&!i&&$("body").bind("mousemove",o),i=!0},this.disable=function(){l&&i&&(l.hide(),$("body").unbind("mousemove",o)),i=!1},this.destroy=function(){this.disable(),l&&(l.remove(),l=null)}}function ClickWatcher(){this._callbacks={cancel:[],click:[]},this._clicked_element=null,this._highlighter=new Highlighter}ClickWatcher.prototype.cancel=function(e){this._callbacks.cancel.push(e)},ClickWatcher.prototype.click=function(e){this._callbacks.click.push(e)},ClickWatcher.prototype._fire=function(e,i){for(var t=this._callbacks[e],l=0;l<t.length;l++)t[l](i)},ClickWatcher.prototype.show=function(){var e=this,i=$("<div style='white-space: pre-wrap;'></div>").append(translate("findingads")).dialog({dialogClass:"adblock-blacklist-dialog",position:[50,50],height:120,minHeight:120,title:translate("blockanadtitle")});changeTextDirection($("body .adblock-blacklist-dialog")),window.setTimeout((function(){e._ui=e._build_ui(),i.dialog("close"),i.remove(),e._ui.dialog("open"),e._highlighter.enable()}),10)},ClickWatcher.prototype.close=function(){this._callbacks.cancel=[],this._ui&&this._ui.dialog("close")},ClickWatcher.prototype._onClose=function(){null==this._clicked_element?this._fire("cancel"):this._fire("click",this._clicked_element),this._highlighter.destroy()},ClickWatcher.prototype._build_ui=function(){var e=this;function i(){return t(this)}function t(i){return e._clicked_element=e._highlighter.getCurrentNode(i),e._ui.dialog("close"),!1}$("body").on("click",".adblock-killme-overlay, .adblock-highlight-node",i),$("object,embed,iframe,[onclick]:empty").each((function(e,i){i.style&&"none"===i.style.display||new Overlay({dom_element:i,click_handler:t}).display()}));var l={};l[translate("buttoncancel")]=function(){$(".adblock-ui-stylesheet").remove(),o.dialog("close")};var o=$("<div></div>").append(translate("clickthead")).append("<br/><br/>").dialog({dialogClass:"adblock-blacklist-dialog",position:[50,50],width:400,minHeight:125,autoOpen:!1,title:translate("blockanadtitle"),buttons:l,close:function(){$("body").off("click",".adblock-killme-overlay, .adblock-highlight-node",i),Overlay.removeAll(),e._onClose(),o.remove()},drag:function(){e._highlighter.disable()}});return o.dialog("widget").css("position","fixed").bind("mouseenter",(function(){e._highlighter.disable()})).bind("mouseleave",(function(){e._highlighter.enable()})),changeTextDirection($("body .adblock-blacklist-dialog")),o};