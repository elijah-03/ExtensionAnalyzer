!function(){"use strict";class t{constructor(t,e){this.path=t,this.handler=e}}class e{routes={};addRoute(e,n){this.routes[e]||(this.routes[e]=[]),this.routes[e].unshift(new t(e,n))}removeRoute(t){this.routes[t].shift()}lookupRouteProvider(){return t=>this.routes[t]?this.routes[t][0].handler:void 0}}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o,i=Array.isArray,s="object"==typeof n&&n&&n.Object===Object&&n,a=s,c="object"==typeof self&&self&&self.Object===Object&&self,u=a||c||Function("return this")(),d=u.Symbol,l=d,p=Object.prototype,f=p.hasOwnProperty,h=p.toString,g=l?l.toStringTag:void 0,b=Object.prototype.toString,v=d?d.toStringTag:void 0,y=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":v&&v in Object(t)?function(t){var e=f.call(t,g),n=t[g];try{t[g]=void 0;var r=!0}catch(t){}var o=h.call(t);return r&&(e?t[g]=n:delete t[g]),o}(t):function(t){return b.call(t)}(t)},m=function(t){return null!=t&&"object"==typeof t},w=y,j=m,_=function(t){return"symbol"==typeof t||j(t)&&"[object Symbol]"==w(t)},T=i,P=_,O=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A=/^\w*$/,C=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},I=y,E=C,S=function(t){if(!E(t))return!1;var e=I(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},x=r(S),R=u["__core-js_shared__"],z=(o=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",N=Function.prototype.toString,D=function(t){if(null!=t){try{return N.call(t)}catch(t){}try{return t+""}catch(t){}}return""},M=S,$=C,H=D,k=/^\[object .+?Constructor\]$/,W=Function.prototype,L=Object.prototype,U=W.toString,F=L.hasOwnProperty,G=RegExp("^"+U.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!$(t)||function(t){return!!z&&z in t}(t))&&(M(t)?G:k).test(H(t))}(n)?n:void 0},q=B(Object,"create"),Q=q,V=q,K=Object.prototype.hasOwnProperty,J=q,X=Object.prototype.hasOwnProperty,Y=q;function Z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Z.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},Z.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Z.prototype.get=function(t){var e=this.__data__;if(V){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return K.call(e,t)?e[t]:void 0},Z.prototype.has=function(t){var e=this.__data__;return J?void 0!==e[t]:X.call(e,t)},Z.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Y&&void 0===e?"__lodash_hash_undefined__":e,this};var tt=Z,et=function(t,e){return t===e||t!=t&&e!=e},nt=et,rt=function(t,e){for(var n=t.length;n--;)if(nt(t[n][0],e))return n;return-1},ot=rt,it=Array.prototype.splice,st=rt,at=rt,ct=rt;function ut(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ut.prototype.clear=function(){this.__data__=[],this.size=0},ut.prototype.delete=function(t){var e=this.__data__,n=ot(e,t);return!(n<0||(n==e.length-1?e.pop():it.call(e,n,1),--this.size,0))},ut.prototype.get=function(t){var e=this.__data__,n=st(e,t);return n<0?void 0:e[n][1]},ut.prototype.has=function(t){return at(this.__data__,t)>-1},ut.prototype.set=function(t,e){var n=this.__data__,r=ct(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var dt=ut,lt=B(u,"Map"),pt=tt,ft=dt,ht=lt,gt=function(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map},bt=gt,vt=gt,yt=gt,mt=gt;function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}wt.prototype.clear=function(){this.size=0,this.__data__={hash:new pt,map:new(ht||ft),string:new pt}},wt.prototype.delete=function(t){var e=bt(this,t).delete(t);return this.size-=e?1:0,e},wt.prototype.get=function(t){return vt(this,t).get(t)},wt.prototype.has=function(t){return yt(this,t).has(t)},wt.prototype.set=function(t,e){var n=mt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var jt=wt,_t=jt;function Tt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(Tt.Cache||_t),n}Tt.Cache=_t;var Pt=Tt,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,At=/\\(\\)?/g,Ct=function(){var t=Pt((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ot,(function(t,n,r,o){e.push(r?o.replace(At,"$1"):n||t)})),e}),(function(t){return 500===e.size&&e.clear(),t})),e=t.cache;return t}(),It=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o},Et=It,St=i,xt=_,Rt=d?d.prototype:void 0,zt=Rt?Rt.toString:void 0,Nt=function t(e){if("string"==typeof e)return e;if(St(e))return Et(e,t)+"";if(xt(e))return zt?zt.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},Dt=function(t){return null==t?"":Nt(t)},Mt=i,$t=Ct,Ht=Dt,kt=function(t,e){return Mt(t)?t:function(t,e){if(T(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!P(t))||A.test(t)||!O.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:$t(Ht(t))},Wt=_,Lt=function(t){if("string"==typeof t||Wt(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Ut=kt,Ft=Lt,Gt=function(t,e){for(var n=0,r=(e=Ut(e,t)).length;null!=t&&n<r;)t=t[Ft(e[n++])];return n&&n==r?t:void 0},Bt=Gt,qt=r((function(t,e,n){var r=null==t?void 0:Bt(t,e);return void 0===r?n:r}));class Qt{app=null;router=null;destination=window.parent||window.top;origin="*";constructor(t,e={}){this.app=t,this.router=t.router,this.config=e,this.events=t.PluginAPI.getEventable()}getConfig(t,e){return qt(this.config,t,e)}getDestinationProvider(){return()=>this.destination}getOriginProvider(){return()=>this.origin}triggerOpened(){this.events.trigger("opened",{containerType:this.type})}triggerClosed(){this.events.trigger("closed",{containerType:this.type})}}var Vt={padding:"0 !important",margin:"0 !important","box-sizing":"border-box !important",border:"none !important"},Kt=2147483647,Jt={WINDOW_MARGIN:10,HEADER_HEIGHT:50,TOP:100,LEFT:100,HEIGHT:700,WIDTH:500,MIN_HEIGHT:500,MIN_WIDTH:500};const{MIN_HEIGHT:Xt,MIN_WIDTH:Yt,WINDOW_MARGIN:Zt}=Jt;function te(t,e,n,r,o){let i=0,s=0,a=0,c=0;function u(n){n.preventDefault(),e.css({visibility:"hidden"}),t.releasePointerCapture(n.pointerId),t.removeEventListener("pointermove",d),o()}function d(t){-1===t.button&&0!==t.buttons?(t.preventDefault(),a=i-t.clientX,c=s-t.clientY,i=t.clientX,s=t.clientY,r(a,c)):u(t)}t.addEventListener("pointerdown",(function(r){0===r.button&&(r.preventDefault(),e.css({visibility:"visible"}),i=r.clientX,s=r.clientY,t.setPointerCapture(r.pointerId),t.addEventListener("pointermove",d),n())})),t.addEventListener("pointerup",u),t.addEventListener("pointerout",u)}function ee(t,e){const n=t.offsetLeft-e,r=window.innerWidth-t.offsetWidth-Zt;return n<Zt||r<Zt?Zt:n>r?r:n}function ne(t,e){const n=t.offsetTop-e,r=window.innerHeight-t.offsetHeight-Zt;return n<Zt||r<Zt?Zt:n>r?r:n}function re(t,e){const n=t.offsetWidth-e,r=window.innerWidth-t.offsetLeft-Zt;return n>r?r:n<Yt?Yt:n}function oe(t,e){const n=t.offsetHeight-e,r=window.innerHeight-t.offsetTop-Zt;return n>r?r:n<Xt?Xt:n}class ie extends Qt{type="frame";destination=window.parent||window.top;origin=window.location.origin;constructor(t,e){super(t,e);const{pendo:n,PluginAPI:r}=t,o=this.getConfig("containerId","pendo-client-app");this.container=n.dom(`<div id="${o}" class="pendo-ignore">`).css({...Vt,height:t.state.height,width:t.state.width,"z-index":Kt-1,"background-color":"#FFFFFF",position:"fixed","box-shadow":"rgb(136, 136, 136) 0px 0px 20px 0px",overflow:"hidden"}),this.handle=n.dom('<div id="pendo-app-draggable-handle">').css({...Vt,"z-index":Kt,height:Jt.HEADER_HEIGHT,width:"calc(100% - 100px)",position:"absolute",cursor:"grab"}).on("dblclick",(()=>{t.state.minimized||(this.container.css({height:Jt.HEIGHT,width:Jt.WIDTH,transition:"all 250ms linear"}),setTimeout((()=>{this.container&&(this.container.css({transition:"none"}),this.saveSize())}),250))})).appendTo(this.container),this.resizeHandle=n.dom('<div id="pendo-app-resize-handle">').css({...Vt,"z-index":Kt,height:0,width:0,"border-left":"10px solid transparent","border-bottom":"10px solid rgb(136, 136, 136)",cursor:"nwse-resize",position:"absolute",bottom:0,right:0}).appendTo(this.container),this.frame=n.dom('<iframe id="pendo-agent-application" src="about:blank">').css({...Vt,height:"100%",width:"100%"}).on("load",(()=>{if(r.ConfigReader.get("inlineStyleNonce")){const t=this.frame[0].contentDocument.createElement.bind(this.frame[0].contentDocument);this.frame[0].contentDocument.createElement=(e,...n)=>{const o=t(e,...n);if("style"===e){const t=r.ConfigReader.get("inlineStyleNonce");t&&o.setAttribute("nonce",t)}return o}}const e=document.createElement("script");var o;e.src=(o=n,o&&o.trustedTypesPolicy?o.trustedTypesPolicy:{createScriptURL:t=>t}).createScriptURL(r.getAssetUrl(t.assetName)),this.frame[0].contentDocument.body.appendChild(e),this.frame[0].contentWindow.ignoreIframeMonitor=!0,this.triggerOpened()})).appendTo(this.container),this.blockout=n.dom('<div id="pendo-app-dragging-blockout">').css({"z-index":Kt-2,position:"absolute",height:"100%",width:"100%",top:0,left:0,visibility:"hidden"}).appendTo(n.dom.getBody()),this.elements=[this.container,this.blockout],this.positionFrame=t=>{let{left:e,top:n,height:r}=t;const{minimized:o,width:i}=t;e=e||Jt.LEFT,n=n||Jt.TOP,r=o?Jt.HEADER_HEIGHT:r,e=ee({offsetLeft:e,offsetWidth:i},0),n=ne({offsetTop:n,offsetHeight:r},0),this.container.css({left:e,top:n,height:r}),this.savePosition()},this.saveSize=()=>{const{offsetHeight:t,offsetWidth:e}=this.container[0];t&&e&&this.app.setProperties({height:t,width:e})},this.savePosition=()=>{const{offsetLeft:t,offsetTop:e}=this.container[0];t&&e&&this.app.setProperties({left:t,top:e})},this.toggleMinimize=()=>{this.app.setProperties({minimized:!this.app.state.minimized}),this.resizeHandle.css({visibility:this.app.state.minimized?"hidden":"visible"}),this.positionFrame(this.app.state)},this.positionFrame(this.app.state),function(t,e){const n=t.handle[0],r=t.container[0];te(n,t.blockout,(function(){n.style.cursor="grabbing"}),(function(t,e){r.style.left=`${ee(r,t)}px`,r.style.top=`${ne(r,e)}px`}),(function(){n.style.cursor="grab",e()}))}(this,this.savePosition),function(t,e){const n=t.resizeHandle[0],r=t.container[0];te(n,t.blockout,(()=>{}),(function(t,e){r.style.width=`${re(r,t)}px`,r.style.height=`${oe(r,e)}px`}),e)}(this,this.saveSize),window.addEventListener("resize",a),this.listeners=[["resize",a]];const i=n._.throttle((()=>function(t){const e=t.offsetLeft+t.offsetWidth+Zt-window.innerWidth;e>0&&(t.style.left=`${ee(t,e)}px`,t.offsetWidth>Yt&&(t.style.width=`${re(t,e)}px`));const n=t.offsetTop+t.offsetHeight+Zt-window.innerHeight;n>0&&(t.style.top=`${ne(t,n)}px`,t.offsetHeight>Xt&&(t.style.height=`${oe(t,n)}px`))}(this.container[0])),10),s=n._.debounce((()=>{this.savePosition(),this.saveSize()}),1e3);function a(){i(),s()}}open(){return this.router.addRoute("app::toggleMinimize",this.toggleMinimize),this.container.appendTo(this.app.pendo.dom.getBody()),Promise.resolve()}close(){this.router.removeRoute("app::toggleMinimize"),this.listeners.forEach((([t,e])=>window.removeEventListener(t,e))),this.elements.forEach((t=>t.remove())),this.triggerClosed()}}var se=u,ae=/\s/,ce=/^\s+/,ue=C,de=_,le=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,fe=/^0o[0-7]+$/i,he=parseInt,ge=C,be=function(){return se.Date.now()},ve=function(t){if("number"==typeof t)return t;if(de(t))return NaN;if(ue(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ue(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&ae.test(t.charAt(e)););return e}(t)+1).replace(ce,""):t}(t);var n=pe.test(t);return n||fe.test(t)?he(t.slice(2),n?2:8):le.test(t)?NaN:+t},ye=Math.max,me=Math.min,we=C,je=r((function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return we(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),function(t,e,n){var r,o,i,s,a,c,u=0,d=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=r,i=o;return r=o=void 0,u=e,s=t.apply(i,n)}function h(t){var n=t-c;return void 0===c||n>=e||n<0||l&&t-u>=i}function g(){var t=be();if(h(t))return b(t);a=setTimeout(g,function(t){var n=e-(t-c);return l?me(n,i-(t-u)):n}(t))}function b(t){return a=void 0,p&&r?f(t):(r=o=void 0,s)}function v(){var t=be(),n=h(t);if(r=arguments,o=this,c=t,n){if(void 0===a)return function(t){return u=t,a=setTimeout(g,e),d?f(t):s}(c);if(l)return clearTimeout(a),a=setTimeout(g,e),f(c)}return void 0===a&&(a=setTimeout(g,e)),s}return e=ve(e)||0,ge(n)&&(d=!!n.leading,i=(l="maxWait"in n)?ye(ve(n.maxWait)||0,e):i,p="trailing"in n?!!n.trailing:p),v.cancel=function(){void 0!==a&&clearTimeout(a),u=0,r=c=o=a=void 0},v.flush=function(){return void 0===a?s:b(be())},v}(t,e,{leading:r,maxWait:e,trailing:o})})),_e=Dt,Te=0,Pe=r((function(t){var e=++Te;return _e(t)+e})),Oe=dt,Ae=dt,Ce=lt,Ie=jt,Ee=dt;function Se(t){var e=this.__data__=new Ee(t);this.size=e.size}Se.prototype.clear=function(){this.__data__=new Oe,this.size=0},Se.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Se.prototype.get=function(t){return this.__data__.get(t)},Se.prototype.has=function(t){return this.__data__.has(t)},Se.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ae){var r=n.__data__;if(!Ce||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ie(r)}return n.set(t,e),this.size=n.size,this};var xe=Se,Re=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},ze=B,Ne=function(){try{var t=ze(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),De=Ne,Me=function(t,e,n){"__proto__"==e&&De?De(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},$e=Me,He=et,ke=Object.prototype.hasOwnProperty,We=function(t,e,n){var r=t[e];ke.call(t,e)&&He(r,n)&&(void 0!==n||e in t)||$e(t,e,n)},Le=We,Ue=Me,Fe=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,s=e.length;++i<s;){var a=e[i],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),o?Ue(n,a,c):Le(n,a,c)}return n},Ge=y,Be=m,qe=function(t){return Be(t)&&"[object Arguments]"==Ge(t)},Qe=m,Ve=Object.prototype,Ke=Ve.hasOwnProperty,Je=Ve.propertyIsEnumerable,Xe=qe(function(){return arguments}())?qe:function(t){return Qe(t)&&Ke.call(t,"callee")&&!Je.call(t,"callee")},Ye=Xe,Ze={exports:{}},tn=function(){return!1};!function(t,e){var n=u,r=tn,o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,s=i&&i.exports===o?n.Buffer:void 0,a=(s?s.isBuffer:void 0)||r;t.exports=a}(Ze,Ze.exports);var en=Ze.exports,nn=/^(?:0|[1-9]\d*)$/,rn=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},on=y,sn=rn,an=m,cn={};cn["[object Float32Array]"]=cn["[object Float64Array]"]=cn["[object Int8Array]"]=cn["[object Int16Array]"]=cn["[object Int32Array]"]=cn["[object Uint8Array]"]=cn["[object Uint8ClampedArray]"]=cn["[object Uint16Array]"]=cn["[object Uint32Array]"]=!0,cn["[object Arguments]"]=cn["[object Array]"]=cn["[object ArrayBuffer]"]=cn["[object Boolean]"]=cn["[object DataView]"]=cn["[object Date]"]=cn["[object Error]"]=cn["[object Function]"]=cn["[object Map]"]=cn["[object Number]"]=cn["[object Object]"]=cn["[object RegExp]"]=cn["[object Set]"]=cn["[object String]"]=cn["[object WeakMap]"]=!1;var un=function(t){return function(e){return t(e)}},dn={exports:{}};!function(t,e){var n=s,r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,i=o&&o.exports===r&&n.process,a=function(){try{return o&&o.require&&o.require("util").types||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a}(dn,dn.exports);var ln=dn.exports,pn=un,fn=ln&&ln.isTypedArray,hn=fn?pn(fn):function(t){return an(t)&&sn(t.length)&&!!cn[on(t)]},gn=Ye,bn=i,vn=en,yn=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&nn.test(t))&&t>-1&&t%1==0&&t<e},mn=hn,wn=Object.prototype.hasOwnProperty,jn=function(t,e){var n=bn(t),r=!n&&gn(t),o=!n&&!r&&vn(t),i=!n&&!r&&!o&&mn(t),s=n||r||o||i,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var u in t)!e&&!wn.call(t,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||yn(u,c))||a.push(u);return a},_n=Object.prototype,Tn=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||_n)},Pn=function(t,e){return function(n){return t(e(n))}},On=Pn(Object.keys,Object),An=Tn,Cn=On,In=Object.prototype.hasOwnProperty,En=S,Sn=rn,xn=function(t){return null!=t&&Sn(t.length)&&!En(t)},Rn=jn,zn=xn,Nn=function(t){return zn(t)?Rn(t):function(t){if(!An(t))return Cn(t);var e=[];for(var n in Object(t))In.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},Dn=Fe,Mn=Nn,$n=C,Hn=Tn,kn=Object.prototype.hasOwnProperty,Wn=jn,Ln=xn,Un=function(t){return Ln(t)?Wn(t,!0):function(t){if(!$n(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Hn(t),n=[];for(var r in t)("constructor"!=r||!e&&kn.call(t,r))&&n.push(r);return n}(t)},Fn=Fe,Gn=Un,Bn={exports:{}};!function(t,e){var n=u,r=e&&!e.nodeType&&e,o=r&&t&&!t.nodeType&&t,i=o&&o.exports===r?n.Buffer:void 0,s=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}(Bn,Bn.exports);var qn=Bn.exports,Qn=function(){return[]},Vn=Qn,Kn=Object.prototype.propertyIsEnumerable,Jn=Object.getOwnPropertySymbols,Xn=Jn?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s)&&(i[o++]=s)}return i}(Jn(t),(function(e){return Kn.call(t,e)})))}:Vn,Yn=Fe,Zn=Xn,tr=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},er=Pn(Object.getPrototypeOf,Object),nr=tr,rr=er,or=Xn,ir=Qn,sr=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)nr(e,or(t)),t=rr(t);return e}:ir,ar=Fe,cr=sr,ur=tr,dr=i,lr=function(t,e,n){var r=e(t);return dr(t)?r:ur(r,n(t))},pr=lr,fr=Xn,hr=Nn,gr=lr,br=sr,vr=Un,yr=function(t){return gr(t,vr,br)},mr=B(u,"DataView"),wr=lt,jr=B(u,"Promise"),_r=B(u,"Set"),Tr=B(u,"WeakMap"),Pr=y,Or=D,Ar="[object Map]",Cr="[object Promise]",Ir="[object Set]",Er="[object WeakMap]",Sr="[object DataView]",xr=Or(mr),Rr=Or(wr),zr=Or(jr),Nr=Or(_r),Dr=Or(Tr),Mr=Pr;(mr&&Mr(new mr(new ArrayBuffer(1)))!=Sr||wr&&Mr(new wr)!=Ar||jr&&Mr(jr.resolve())!=Cr||_r&&Mr(new _r)!=Ir||Tr&&Mr(new Tr)!=Er)&&(Mr=function(t){var e=Pr(t),n="[object Object]"==e?t.constructor:void 0,r=n?Or(n):"";if(r)switch(r){case xr:return Sr;case Rr:return Ar;case zr:return Cr;case Nr:return Ir;case Dr:return Er}return e});var $r=Mr,Hr=Object.prototype.hasOwnProperty,kr=u.Uint8Array,Wr=function(t){var e=new t.constructor(t.byteLength);return new kr(e).set(new kr(t)),e},Lr=Wr,Ur=/\w*$/,Fr=d?d.prototype:void 0,Gr=Fr?Fr.valueOf:void 0,Br=Wr,qr=Wr,Qr=C,Vr=Object.create,Kr=function(){function t(){}return function(e){if(!Qr(e))return{};if(Vr)return Vr(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Jr=er,Xr=Tn,Yr=$r,Zr=m,to=un,eo=ln&&ln.isMap,no=eo?to(eo):function(t){return Zr(t)&&"[object Map]"==Yr(t)},ro=$r,oo=m,io=un,so=ln&&ln.isSet,ao=so?io(so):function(t){return oo(t)&&"[object Set]"==ro(t)},co=xe,uo=Re,lo=We,po=qn,fo=function(t){return pr(t,hr,fr)},ho=yr,go=$r,bo=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return qr(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?Lr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?Br(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,Ur.exec(t));return e.lastIndex=t.lastIndex,e}(t);case"[object Symbol]":return function(t){return Gr?Object(Gr.call(t)):{}}(t)}},vo=i,yo=en,mo=no,wo=C,jo=ao,_o=Nn,To=Un,Po="[object Arguments]",Oo="[object Function]",Ao="[object Object]",Co={};Co[Po]=Co["[object Array]"]=Co["[object ArrayBuffer]"]=Co["[object DataView]"]=Co["[object Boolean]"]=Co["[object Date]"]=Co["[object Float32Array]"]=Co["[object Float64Array]"]=Co["[object Int8Array]"]=Co["[object Int16Array]"]=Co["[object Int32Array]"]=Co["[object Map]"]=Co["[object Number]"]=Co[Ao]=Co["[object RegExp]"]=Co["[object Set]"]=Co["[object String]"]=Co["[object Symbol]"]=Co["[object Uint8Array]"]=Co["[object Uint8ClampedArray]"]=Co["[object Uint16Array]"]=Co["[object Uint32Array]"]=!0,Co["[object Error]"]=Co[Oo]=Co["[object WeakMap]"]=!1;var Io=Gt,Eo=kt,So=Lt,xo=y,Ro=er,zo=m,No=Function.prototype,Do=Object.prototype,Mo=No.toString,$o=Do.hasOwnProperty,Ho=Mo.call(Object),ko=Ye,Wo=i,Lo=d?d.isConcatSpreadable:void 0,Uo=tr,Fo=function(t){return Wo(t)||ko(t)||!!(Lo&&t&&t[Lo])},Go=function t(e,n,r,o,i){var s=-1,a=e.length;for(r||(r=Fo),i||(i=[]);++s<a;){var c=e[s];n>0&&r(c)?n>1?t(c,n-1,r,o,i):Uo(i,c):o||(i[i.length]=c)}return i},Bo=Math.max,qo=function(t){return t},Qo=function(t){return function(){return t}},Vo=Ne,Ko=Vo?function(t,e){return Vo(t,"toString",{configurable:!0,enumerable:!1,value:Qo(e),writable:!0})}:qo,Jo=Date.now,Xo=function(t){var e=0,n=0;return function(){var r=Jo(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Ko),Yo=function(t){return null!=t&&t.length?Go(t,1):[]},Zo=Xo,ti=It,ei=function t(e,n,r,o,i,s){var a,c=1&n,u=2&n,d=4&n;if(r&&(a=i?r(e,o,i,s):r(e)),void 0!==a)return a;if(!wo(e))return e;var l=vo(e);if(l){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Hr.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!c)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(e,a)}else{var p=go(e),f=p==Oo||"[object GeneratorFunction]"==p;if(yo(e))return po(e,c);if(p==Ao||p==Po||f&&!i){if(a=u||f?{}:function(t){return"function"!=typeof t.constructor||Xr(t)?{}:Kr(Jr(t))}(e),!c)return u?function(t,e){return ar(t,cr(t),e)}(e,function(t,e){return t&&Fn(e,Gn(e),t)}(a,e)):function(t,e){return Yn(t,Zn(t),e)}(e,function(t,e){return t&&Dn(e,Mn(e),t)}(a,e))}else{if(!Co[p])return i?e:{};a=bo(e,p,c)}}s||(s=new co);var h=s.get(e);if(h)return h;s.set(e,a),jo(e)?e.forEach((function(o){a.add(t(o,n,r,o,e,s))})):mo(e)&&e.forEach((function(o,i){a.set(i,t(o,n,r,i,e,s))}));var g=l?void 0:(d?u?ho:fo:u?To:_o)(e);return uo(g||e,(function(o,i){g&&(o=e[i=o]),lo(a,i,t(o,n,r,i,e,s))})),a},ni=function(t,e){return null==(t=function(t,e){return e.length<2?t:Io(t,function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}(e,0,-1))}(t,e=Eo(e,t)))||delete t[So(function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}(e))]},ri=kt,oi=Fe,ii=function(t){return function(t){if(!zo(t)||"[object Object]"!=xo(t))return!1;var e=Ro(t);if(null===e)return!0;var n=$o.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Mo.call(n)==Ho}(t)?void 0:t},si=yr,ai=r(function(t){return Zo(function(t,e,n){return e=Bo(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=Bo(r.length-e,0),s=Array(i);++o<i;)s[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=n(s),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,a)}}(t,void 0,Yo),t+"")}((function(t,e){var n={};if(null==t)return n;var r=!1;e=ti(e,(function(e){return e=ri(e,t),r||(r=e.length>1),e})),oi(t,si(t),n),r&&(n=ei(n,7,ii));for(var o=e.length;o--;)ni(n,e[o]);return n})));function ci(t,e,n){this.name=t,this.type=e,this.data=n}ci.prototype.toString=function(){return`Message.${this.type} - ${this.name}`};const ui=t=>{try{const{name:e,type:n,isResponse:r,data:o,requestId:i,sender:s}=t.data||{},a=new ci(e,n,null!=o?JSON.parse(o):void 0);return a.requestId=i,a.sender=s,a.destination=t.source,a.isResponse=r,a}catch(t){return!1}},di=t=>(t.isResponse=!0,t),li=(...t)=>e=>[].concat(t).reduce(((t,n,r,o)=>{const i=n(t,e);return i||o.splice(r,o.length-r),i}),e);var pi=Nn,fi=xn,hi=qo,gi=Re,bi=function(t,e){if(null==t)return t;if(!fi(t))return function(t,e){return t&&function(t,e,n){for(var r=-1,o=Object(t),i=n(t),s=i.length;s--;){var a=i[++r];if(!1===e(o[a],a,o))break}return t}(t,e,pi)}(t,e);for(var n=t.length,r=-1,o=Object(t);++r<n&&!1!==e(o[r],r,o););return t},vi=i,yi=r((function(t,e){return(vi(t)?gi:bi)(t,function(t){return"function"==typeof t?t:hi}(e))}));const mi="disconnected",wi={lastMessageReceivedAt:0,currentConnectionQuality:mi,changeCallbacks:{},evalCallbacks:{}},ji=t=>{t!==wi.currentConnectionQuality&&(wi.currentConnectionQuality=t,yi(wi.changeCallbacks,(t=>{t(wi.currentConnectionQuality)})))},_i=()=>{if(0===wi.lastMessageReceivedAt)return void ji(mi);const t=Date.now()-wi.lastMessageReceivedAt;t<1e4?ji("connected"):(t=>t>1e4)(t)&&((t=>t>3e4)(t)?ji("dead_connection"):ji(mi)),yi(wi.evalCallbacks,(t=>{t(wi.currentConnectionQuality)}))};let Ti,Pi=0;const Oi={appName:void 0,connectionName:void 0,frameId:void 0,pendingRequests:{},topics:{},senderIds:{},originProvider:void 0,destinationProvider:void 0},Ai=()=>`${Oi.appName}${Oi.connectionName}(${Oi.frameId})`,Ci=t=>{t.sender||(t.sender=Ai());const e=t.destination||Oi.destinationProvider(),n=(t=>{const e=ai(t,["destination","toString","data"]);return e.data=JSON.stringify(t.data,((t,e)=>"function"==typeof e||e instanceof RegExp?e.toString?e.toString():void 0:e)),e})(t),r=Si(t.sender),o=xi(t.sender);if(r||o)r?r.postMessage(n):e.postMessage(n,Oi.originProvider());else{const r=new MessageChannel;ki(r.port1,t.sender),e.postMessage(n,Oi.originProvider(),[r.port2])}},Ii=(t,e,n=1e3)=>new Promise(((r,o)=>{const i=((t,e,n)=>{const r=new ci(t,e,n);return r.requestId=Pe(),r})(t,"promise",e),s=setTimeout((()=>{o(`${t} timeout`),zi(i),Li(i)}),n);Ri(i,(()=>clearTimeout(s)),r,o),Ci(i)})),Ei=t=>(Oi.senderIds[t]||(t=>{Oi.senderIds[t]||(Oi.senderIds[t]={port:void 0,hasTriedToUpgradeToMessageChannel:!1})})(t),Oi.senderIds[t]),Si=t=>Ei(t).port,xi=t=>Ei(t).hasTriedToUpgradeToMessageChannel,Ri=(t,e,n,r)=>{Oi.pendingRequests[t.requestId]={message:t,clearTimeoutfn:e,resolve:n,reject:r}},zi=t=>{const{requestId:e}=t;return Oi.pendingRequests[e].clearTimeoutfn(),delete Oi.pendingRequests[e],t},Ni="message::ping",Di=li((t=>{const e=Oi.pendingRequests[t.requestId];return e&&(e.resolve(t.data),zi(t)),t}),(t=>{const e=Oi.topics[t.name];return e&&e.forEach((e=>e(t.data))),t}),(t=>{if(!t)return t;if(t.isResponse)return t;if(t.name===Ni)return Ci(di(t)),t;const e=Oi.routeHandlerLookup(t.name);if(e){const n=e=>{t.data=e,Ci(di(t))};e(t,n)}else console.log(Ai(),`No route handler for ${t.name}`,t);return t}),(Mi=()=>{((t=Date.now())=>{wi.lastMessageReceivedAt=t})()},(t,...e)=>(Mi(t,...e),t)));var Mi;const $i=t=>("*"===Oi.originProvider()||t.origin===Oi.originProvider())&&t,Hi=t=>{const e=qt(t,"data.sender");return!(!e||"string"!=typeof e)&&!!e.includes(Oi.appName)&&t},ki=(t,e)=>{const n=Ei(e);n.port=t,n.hasTriedToUpgradeToMessageChannel=!0,n.port.onmessage=li(ui,Di)},Wi=(t,e)=>(!Ei(t.sender).hasTriedToUpgradeToMessageChannel&&e.ports&&e.ports[0]&&ki(e.ports[0],t.sender),t),Li=t=>{(t=>{const e=Ei(t);e.port=void 0,e.hasTriedToUpgradeToMessageChannel=!1})(t.sender)};let Ui=()=>{};const Fi=je((t=>{"connected"!==t&&Oi.usePingAutoReconnect&&Ii(Ni).catch((()=>{console.log("message::ping timedout")}))}),1e3);function Gi(){return(new Date).getTime()}class Bi extends Qt{type="window";testUrl="";realUrl=void 0;getTitle(){return this.getConfig("title",this.getName())}getName(){return this.getConfig("name","Agent_Application")}open(){return this.router.addRoute("app::windowClosed",(()=>{this.app.setProperties({containerType:"frame"}),this.app.stop()})),this.testConnection().then((()=>{this.triggerOpened()})).catch((()=>{return this.createWindow(),t=this.app,new Promise(((e,n)=>{const r=Gi(),o=()=>{t.getConnectionStatus()?e():Gi()-r>1e3?n():setTimeout(o,50)};o()}));var t}))}testConnection(){return this.destination=window.open(this.testUrl,this.getName(),`width=${this.app.state.width},height=${this.app.state.height},resizable=yes,scrollbars=yes,status=yes,location=no`),Ii("app::reconnect")}createWindow(){this.realUrl&&(this.destination=window.open(this.realUrl,this.getName(),`width=${this.app.state.width},height=${this.app.state.height},resizable=yes,scrollbars=yes,status=yes,location=no`));const t=document.createElement("script");t.src=this.app.PluginAPI.getAssetUrl(this.app.assetName),this.destination.document.body.appendChild(t),this.destination.document.title=this.getTitle()}close(){this.router.removeRoute("app::windowClosed"),this.destination.close(),this.triggerClosed()}}const qi=()=>({});class Qi{defaultState={containerType:"frame",minimized:!1,height:500,width:500,left:100,top:100};state={};containerClosedCallbacks=[];container=null;isConnected=!1;constructor(t,n,r,o,i,s=qi,a=qi){this.appName=t,this.assetName=n,this.assetStorageKey=r,this.connectionName=o,this.frameConfigProvider=s,this.windowConfigProvider=a,i&&Object.assign(this.defaultState,i),this.router=new e}init(t,e){this.pendo=t,this.PluginAPI=e,this.events=e.getEventable(),this.router.addRoute("app::ping",((t,e)=>{e()})),this.router.addRoute("app::setProperties",(({data:t})=>{this.setProperties(t)})),this.router.addRoute("app::toggleContainer",(()=>{this.setProperties({minimized:!1}),this.toggleContainerType()})),this.router.addRoute("app::windowClosed",(()=>{})),this.loadState(),this.prepContainer()}prepContainer(){this.container="window"===this.state.containerType?new Bi(this,this.windowConfigProvider()):new ie(this,this.frameConfigProvider())}setConnectionStatus(t){this.isConnected="connected"===t}getConnectionStatus(){return this.isConnected}setProperties(t){Object.assign(this.state,t),this.writeState()}getDefaultState(){return this.defaultState||{}}loadState(){try{const t=JSON.parse(this.PluginAPI.agentStorage.read(this.assetStorageKey,!0));this.state=Object.assign({},this.getDefaultState(),this.state,t)}catch(t){this.PluginAPI.log.error(t),this.state=Object.assign({},this.getDefaultState(),this.state)}}writeState(){this.PluginAPI.agentStorage.write(this.assetStorageKey,JSON.stringify(this.state),null,!0)}toggleContainerType(){const t="frame"===this.state.containerType?"window":"frame";this.setProperties({containerType:t}),this.stop(),this.start()}start(){this.container||this.prepContainer();const{frameId:t}=this.PluginAPI.EventTracer.addTracerIds({});((t,e,n,r,o,i=!1,s)=>{if(!window.addEventListener)return;Oi.appName=t,Oi.frameId=e,Oi.routeHandlerLookup=n,Oi.usePingAutoReconnect=i,Oi.connectionName=s||"",Oi.originProvider=r||(()=>window.location.origin||"*"),Oi.destinationProvider=o||(()=>window.parent||window.top),(()=>{const t=setInterval(_i,100);Ti=()=>clearInterval(t)})(),(t=>{if(!x(t))return;const e=Pi++;wi.evalCallbacks[e]=t})(Fi);const a=li($i,Hi,ui,Wi,Di);window.addEventListener("message",a),Ui=()=>window.removeEventListener("message",a)})(this.appName,t,this.router.lookupRouteProvider(),this.container.getOriginProvider(),this.container.getDestinationProvider(),!0,this.connectionName),(t=>{(t=>{if(!x(t))return;const e=Pi++;wi.changeCallbacks[e]=t})(t)})((t=>{this.setConnectionStatus(t)})),this.container.open().then((()=>{this.events.trigger("mounted")})).catch((()=>{"window"===this.state.containerType?(this.setProperties({containerType:"frame"}),this.prepContainer(),this.start()):(this.PluginAPI.log(`Failed to start ${this.appName} in either window or frame.`),this.stop())}))}stop(){this.container.close(),this.container=null,this.events.trigger("unmounted"),Ui(),Ui=()=>{},Ti&&Ti(),wi.currentConnectionQuality=mi,wi.lastMessageReceivedAt=0}}const Vi=t=>({apiKey:t.apiKey,environment:t.debugging.isStagingServer()?"staging":"production",device:t.debugging.isMobileUserAgent()?"mobile":"desktop",browserCookies:window.navigator.cookieEnabled,guideStatus:t.areGuidesDisabled()?"disabled":t.debugging.areGuidesDelayed()?"delayed":"enabled"}),Ki=function(){let t,e;const n=new Qi("Debugger","pendo.debugger.min.js","debug-enabled","AgentPlugin",{height:Jt.HEIGHT,width:Jt.WIDTH},(()=>({containerId:"pendo-client-debugger"})),(()=>({title:"Pendo Debugger"}))),r={app:n,init(r,o){t=r,e=o,e.restartDebugger=this.start,n.init(t,e),n.router.addRoute("debugger::connect",((r,o)=>{o({config:e.ConfigReader.audit(),env:Vi(t),container:n.state,events:e.store.state.debugger.eventsCaptured})})),n.router.addRoute("debugger::stop",(()=>{t.disableDebugging()})),n.router.addRoute("debugger::showGuideById",((e,n)=>{n(t.showGuideById(e.data))})),n.router.addRoute("debugger::toggleGuideLoop",(e=>{e.data?t.startGuides():t.stopGuides()})),n.router.addRoute("debugger::tombstoneGuide",(n=>{const r=t.findGuideById(n.data);e.Tombstone.addGuide(r)})),n.router.addRoute("debugger::openGuidePage",(n=>{const r=((t,e,n)=>{const r=e.findGuideById(t);if(!r||!e._.get(r,"attributes.resourceCenter"))return`${n}/guides/${t}`;if(r.attributes.resourceCenter.isTopLevel)return`${n}/resource-center/${r.id}/draft`;const o=e.BuildingBlocks.BuildingBlockResourceCenter.getResourceCenter();return o&&o.id?`${n}/resource-center/${o.id}/module/${r.id}`:""})(n.data,t,e.hosts.SERVER);r&&window.open(r,"_blank")})),n.router.addRoute("debugger::restore",(({data:t})=>{(t=>{if(!t||!t.length)return;const e=document.createElement("iframe");e.sandbox="allow-same-origin",e.src="about:blank",e.hidden=!0,document.body.appendChild(e),e.contentWindow.ignoreIframeMonitor=!0,t.forEach((t=>{t.id.split(".").reduce(((t,e,n,r)=>n===r.length-1?(t.destination[e]=t.source[e],t.destination[e]):(t.destination=t.destination[e],t.source=t.source[e],t)),{destination:window,source:e.contentWindow})})),document.body.removeChild(e)})(t)})),n.router.addRoute("debugger::findShadowRoot",((t,e)=>{e((()=>{let t,e=!1,n=0;const r=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT);if(!r||!r.nextNode)return!0;for(;n<1e4&&!e;)n++,t=r.nextNode(),t&&t.shadowRoot&&(e=!0);return e})())})),n.router.addRoute("debugger::sync",((r,o)=>{const i=e.store.subscribe(((t,e)=>{"debugger/eventsCaptured"===t.type&&o({action:"events/eventsCaptured",data:e.debugger.eventsCaptured})})),s=setInterval((()=>{o({action:"agent/sync",data:e.store.state}),o({action:"environment/validateEnvironment",data:t.validateEnvironment(!0)})}),500);n.events.on("unmounted",(()=>{clearInterval(s),i()}))})),n.router.addRoute("debugger::enableEventLogging",(({data:t})=>{n.setProperties({enableEventLogging:t}),e.store.dispatch("debugger/enableEventLogging",t)})),n.router.addRoute("debugger::clearEventsCaptured",(()=>{e.store.dispatch("debugger/clearEventsCaptured")})),n.router.addRoute("debugger::checkGuideEligibility",(({data:t},n)=>{e.store.dispatch("debugger/checkGuideEligibility",{guideId:t,response:n})}))},start(){n.start()},stop(){n.stop(),n.setProperties({enabled:!1,containerType:"frame"})}};return r}(),Ji={initialize:function(t,e){Ki.init(t,e),Ki.start();const n=t.disableDebugging;t.disableDebugging=()=>{Ki.stop(),n()}},teardown:function(){Ki.stop()}};pendo.addExtension&&pendo.addExtension({name:"Debugger",version:"1.0.0",type:"agent",use:"plugin",uri:Ji})}();