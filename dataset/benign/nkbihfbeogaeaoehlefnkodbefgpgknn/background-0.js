LavaPack.loadBundle([[10,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=n.COOKIE_ID_MARKETING_WHITELIST=void 0;const r=n.COOKIE_ID_MARKETING_WHITELIST=["https://metamask.io","https://learn.metamask.io","https://mmi-support.zendesk.com","https://community.metamask.io","https://support.metamask.io"];n.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=r.map(e=>new URL(e).origin)}}},{package:"$root$",file:"app/scripts/constants/marketing-site-whitelist.ts"}],[100,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getGasFeeControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"GasFeeControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getEIP1559Compatibility","NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"],events:["NetworkController:networkDidChange"]}),t},n.getGasFeeControllerMessenger=function(e){const t=new r.Messenger({namespace:"GasFeeController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getEIP1559Compatibility","NetworkController:getNetworkClientById","NetworkController:getState"],events:["NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/gas-fee-controller-messenger.ts"}],[101,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getGatorPermissionsControllerMessenger=function(e){const t=new r.Messenger({namespace:"GatorPermissionsController",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest","SnapController:has"],events:["TransactionController:transactionApproved","TransactionController:transactionRejected","TransactionController:transactionConfirmed","TransactionController:transactionFailed","TransactionController:transactionDropped"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/gator-permissions/gator-permissions-controller-messenger.ts"}],[102,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAuthenticationControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"AuthenticationController",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId"]}),t},n.getAuthenticationControllerMessenger=function(e){const t=new r.Messenger({namespace:"AuthenticationController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","SnapController:handleRequest"],events:["KeyringController:lock","KeyringController:unlock"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/authentication-controller-messenger.ts"}],[103,{"./authentication-controller-messenger":102,"./user-storage-controller-messenger":104},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getAuthenticationControllerInitMessenger",{enumerable:!0,get:function(){return r.getAuthenticationControllerInitMessenger}}),Object.defineProperty(n,"getAuthenticationControllerMessenger",{enumerable:!0,get:function(){return r.getAuthenticationControllerMessenger}}),Object.defineProperty(n,"getUserStorageControllerMessenger",{enumerable:!0,get:function(){return s.getUserStorageControllerMessenger}});var r=e("./authentication-controller-messenger"),s=e("./user-storage-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/index.ts"}],[104,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUserStorageControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"UserStorageControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},n.getUserStorageControllerMessenger=function(e){const t=new r.Messenger({namespace:"UserStorageController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","SnapController:handleRequest","AuthenticationController:getBearerToken","AuthenticationController:getSessionProfile","AuthenticationController:isSignedIn","AuthenticationController:performSignIn","AddressBookController:list","AddressBookController:set","AddressBookController:delete"],events:["KeyringController:lock","KeyringController:unlock","AddressBookController:contactUpdated","AddressBookController:contactDeleted"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/identity/user-storage-controller-messenger.ts"}],[105,{"./account-order-controller-messenger":62,"./account-tracker-controller-messenger":63,"./accounts":66,"./accounts-controller-messenger":64,"./accounts/institutional-snap-controller-messenger":67,"./address-book-controller-messenger":70,"./alert-controller-messenger":71,"./announcement-controller-messenger":72,"./app-metadata-controller-messenger":73,"./app-state-controller-messenger":74,"./approval-controller-messenger":75,"./assets":77,"./bridge-controller-messenger":83,"./bridge-status-controller-messenger":84,"./claims/claims-controller-messenger":85,"./claims/claims-service-messenger":86,"./core-backend":89,"./currency-rate-controller-messenger":90,"./decrypt-message-controller-messenger":91,"./decrypt-message-manager-messenger":92,"./defi-positions":94,"./defi-positions/defi-positions-controller-messenger":93,"./delegation/delegation-controller-messenger":95,"./encryption-public-key-controller-messenger":96,"./encryption-public-key-manager-messenger":97,"./ens-controller-messenger":98,"./error-reporting-service-messenger":99,"./gas-fee-controller-messenger":100,"./gator-permissions/gator-permissions-controller-messenger":101,"./identity":103,"./identity/user-storage-controller-messenger":104,"./keyring-controller-messenger":106,"./logging-controller-messenger":107,"./metametrics-controller-messenger":108,"./metametrics-data-deletion-controller-messenger":109,"./multichain":110,"./name-controller-messenger":116,"./network-controller-messenger":117,"./notifications":118,"./onboarding-controller-messenger":121,"./permission-controller-messenger":122,"./permission-log-controller-messenger":123,"./phishing-controller-messenger":124,"./ppom-controller-messenger":125,"./preferences-controller-messenger":126,"./rates-controller-messenger":127,"./remote-feature-flag-controller-messenger":128,"./reward-data-service-messenger":129,"./rewards-controller-messenger":130,"./seedless-onboarding":131,"./selected-network-controller-messenger":134,"./shield/shield-controller-messenger":135,"./signature-controller-messenger":136,"./smart-transactions-controller-messenger":137,"./snaps":140,"./subject-metadata-controller-messenger":149,"./subscription":150,"./subscription/subscription-service-messenger":152,"./swaps-controller-messenger":153,"./token-balances-controller-messenger":154,"./token-detection-controller-messenger":155,"./token-list-controller-messenger":156,"./tokens-controller-messenger":157,"./transaction-controller-messenger":158,"./user-operation-controller-messenger":159,lodash:4635},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CONTROLLER_MESSENGERS=void 0,Object.defineProperty(n,"getAccountOrderControllerMessenger",{enumerable:!0,get:function(){return J.getAccountOrderControllerMessenger}}),Object.defineProperty(n,"getAccountTrackerControllerInitMessenger",{enumerable:!0,get:function(){return D.getAccountTrackerControllerInitMessenger}}),Object.defineProperty(n,"getAccountTrackerControllerMessenger",{enumerable:!0,get:function(){return D.getAccountTrackerControllerMessenger}}),Object.defineProperty(n,"getAccountsControllerMessenger",{enumerable:!0,get:function(){return X.getAccountsControllerMessenger}}),Object.defineProperty(n,"getAddressBookControllerMessenger",{enumerable:!0,get:function(){return oe.getAddressBookControllerMessenger}}),Object.defineProperty(n,"getAlertControllerMessenger",{enumerable:!0,get:function(){return Z.getAlertControllerMessenger}}),Object.defineProperty(n,"getAnnouncementControllerMessenger",{enumerable:!0,get:function(){return Y.getAnnouncementControllerMessenger}}),Object.defineProperty(n,"getAppMetadataControllerMessenger",{enumerable:!0,get:function(){return ne.getAppMetadataControllerMessenger}}),Object.defineProperty(n,"getAppStateControllerMessenger",{enumerable:!0,get:function(){return K.getAppStateControllerMessenger}}),Object.defineProperty(n,"getApprovalControllerMessenger",{enumerable:!0,get:function(){return se.getApprovalControllerMessenger}}),Object.defineProperty(n,"getBridgeControllerInitMessenger",{enumerable:!0,get:function(){return L.getBridgeControllerInitMessenger}}),Object.defineProperty(n,"getBridgeControllerMessenger",{enumerable:!0,get:function(){return L.getBridgeControllerMessenger}}),Object.defineProperty(n,"getBridgeStatusControllerMessenger",{enumerable:!0,get:function(){return U.getBridgeStatusControllerMessenger}}),Object.defineProperty(n,"getCurrencyRateControllerInitMessenger",{enumerable:!0,get:function(){return _.getCurrencyRateControllerInitMessenger}}),Object.defineProperty(n,"getCurrencyRateControllerMessenger",{enumerable:!0,get:function(){return _.getCurrencyRateControllerMessenger}}),Object.defineProperty(n,"getDecryptMessageControllerInitMessenger",{enumerable:!0,get:function(){return ae.getDecryptMessageControllerInitMessenger}}),Object.defineProperty(n,"getDecryptMessageControllerMessenger",{enumerable:!0,get:function(){return ae.getDecryptMessageControllerMessenger}}),Object.defineProperty(n,"getDecryptMessageManagerMessenger",{enumerable:!0,get:function(){return ie.getDecryptMessageManagerMessenger}}),Object.defineProperty(n,"getEncryptionPublicKeyControllerInitMessenger",{enumerable:!0,get:function(){return ce.getEncryptionPublicKeyControllerInitMessenger}}),Object.defineProperty(n,"getEncryptionPublicKeyControllerMessenger",{enumerable:!0,get:function(){return ce.getEncryptionPublicKeyControllerMessenger}}),Object.defineProperty(n,"getEncryptionPublicKeyManagerMessenger",{enumerable:!0,get:function(){return le.getEncryptionPublicKeyManagerMessenger}}),Object.defineProperty(n,"getEnsControllerInitMessenger",{enumerable:!0,get:function(){return P.getEnsControllerInitMessenger}}),Object.defineProperty(n,"getEnsControllerMessenger",{enumerable:!0,get:function(){return P.getEnsControllerMessenger}}),Object.defineProperty(n,"getErrorReportingServiceMessenger",{enumerable:!0,get:function(){return re.getErrorReportingServiceMessenger}}),Object.defineProperty(n,"getGasFeeControllerInitMessenger",{enumerable:!0,get:function(){return O.getGasFeeControllerInitMessenger}}),Object.defineProperty(n,"getGasFeeControllerMessenger",{enumerable:!0,get:function(){return O.getGasFeeControllerMessenger}}),Object.defineProperty(n,"getKeyringControllerInitMessenger",{enumerable:!0,get:function(){return H.getKeyringControllerInitMessenger}}),Object.defineProperty(n,"getKeyringControllerMessenger",{enumerable:!0,get:function(){return H.getKeyringControllerMessenger}}),Object.defineProperty(n,"getLoggingControllerMessenger",{enumerable:!0,get:function(){return te.getLoggingControllerMessenger}}),Object.defineProperty(n,"getMetaMetricsControllerMessenger",{enumerable:!0,get:function(){return M.getMetaMetricsControllerMessenger}}),Object.defineProperty(n,"getMetaMetricsDataDeletionControllerMessenger",{enumerable:!0,get:function(){return ee.getMetaMetricsDataDeletionControllerMessenger}}),Object.defineProperty(n,"getNameControllerInitMessenger",{enumerable:!0,get:function(){return j.getNameControllerInitMessenger}}),Object.defineProperty(n,"getNameControllerMessenger",{enumerable:!0,get:function(){return j.getNameControllerMessenger}}),Object.defineProperty(n,"getNetworkControllerInitMessenger",{enumerable:!0,get:function(){return V.getNetworkControllerInitMessenger}}),Object.defineProperty(n,"getNetworkControllerMessenger",{enumerable:!0,get:function(){return V.getNetworkControllerMessenger}}),Object.defineProperty(n,"getOnboardingControllerMessenger",{enumerable:!0,get:function(){return R.getOnboardingControllerMessenger}}),Object.defineProperty(n,"getPermissionControllerInitMessenger",{enumerable:!0,get:function(){return W.getPermissionControllerInitMessenger}}),Object.defineProperty(n,"getPermissionControllerMessenger",{enumerable:!0,get:function(){return W.getPermissionControllerMessenger}}),Object.defineProperty(n,"getPermissionLogControllerMessenger",{enumerable:!0,get:function(){return q.getPermissionLogControllerMessenger}}),Object.defineProperty(n,"getPhishingControllerMessenger",{enumerable:!0,get:function(){return Q.getPhishingControllerMessenger}}),Object.defineProperty(n,"getPreferencesControllerMessenger",{enumerable:!0,get:function(){return $.getPreferencesControllerMessenger}}),Object.defineProperty(n,"getRatesControllerMessenger",{enumerable:!0,get:function(){return E.getRatesControllerMessenger}}),Object.defineProperty(n,"getRemoteFeatureFlagControllerInitMessenger",{enumerable:!0,get:function(){return B.getRemoteFeatureFlagControllerInitMessenger}}),Object.defineProperty(n,"getRemoteFeatureFlagControllerMessenger",{enumerable:!0,get:function(){return B.getRemoteFeatureFlagControllerMessenger}}),Object.defineProperty(n,"getRewardsControllerMessenger",{enumerable:!0,get:function(){return x.getRewardsControllerMessenger}}),Object.defineProperty(n,"getSelectedNetworkControllerMessenger",{enumerable:!0,get:function(){return N.getSelectedNetworkControllerMessenger}}),Object.defineProperty(n,"getSignatureControllerInitMessenger",{enumerable:!0,get:function(){return ue.getSignatureControllerInitMessenger}}),Object.defineProperty(n,"getSignatureControllerMessenger",{enumerable:!0,get:function(){return ue.getSignatureControllerMessenger}}),Object.defineProperty(n,"getSubjectMetadataControllerMessenger",{enumerable:!0,get:function(){return G.getSubjectMetadataControllerMessenger}}),Object.defineProperty(n,"getSwapsControllerInitMessenger",{enumerable:!0,get:function(){return F.getSwapsControllerInitMessenger}}),Object.defineProperty(n,"getSwapsControllerMessenger",{enumerable:!0,get:function(){return F.getSwapsControllerMessenger}}),Object.defineProperty(n,"getTokenBalancesControllerInitMessenger",{enumerable:!0,get:function(){return T.getTokenBalancesControllerInitMessenger}}),Object.defineProperty(n,"getTokenBalancesControllerMessenger",{enumerable:!0,get:function(){return T.getTokenBalancesControllerMessenger}}),Object.defineProperty(n,"getTokenDetectionControllerInitMessenger",{enumerable:!0,get:function(){return A.getTokenDetectionControllerInitMessenger}}),Object.defineProperty(n,"getTokenDetectionControllerMessenger",{enumerable:!0,get:function(){return A.getTokenDetectionControllerMessenger}}),Object.defineProperty(n,"getTokenListControllerInitMessenger",{enumerable:!0,get:function(){return S.getTokenListControllerInitMessenger}}),Object.defineProperty(n,"getTokenListControllerMessenger",{enumerable:!0,get:function(){return S.getTokenListControllerMessenger}}),Object.defineProperty(n,"getTokensControllerInitMessenger",{enumerable:!0,get:function(){return I.getTokensControllerInitMessenger}}),Object.defineProperty(n,"getTokensControllerMessenger",{enumerable:!0,get:function(){return I.getTokensControllerMessenger}}),Object.defineProperty(n,"getUserOperationControllerInitMessenger",{enumerable:!0,get:function(){return de.getUserOperationControllerInitMessenger}}),Object.defineProperty(n,"getUserOperationControllerMessenger",{enumerable:!0,get:function(){return de.getUserOperationControllerMessenger}});var r=e("lodash"),s=e("./ppom-controller-messenger"),o=e("./snaps"),i=e("./transaction-controller-messenger"),a=e("./core-backend"),c=e("./multichain"),l=e("./accounts/institutional-snap-controller-messenger"),u=e("./identity"),d=e("./assets"),p=e("./notifications"),g=e("./defi-positions"),h=e("./defi-positions/defi-positions-controller-messenger"),m=e("./delegation/delegation-controller-messenger"),f=e("./accounts"),b=e("./seedless-onboarding"),w=e("./smart-transactions-controller-messenger"),v=e("./shield/shield-controller-messenger"),y=e("./subscription"),C=e("./gator-permissions/gator-permissions-controller-messenger"),M=e("./metametrics-controller-messenger"),k=e("./identity/user-storage-controller-messenger"),S=e("./token-list-controller-messenger"),A=e("./token-detection-controller-messenger"),I=e("./tokens-controller-messenger"),T=e("./token-balances-controller-messenger"),E=e("./rates-controller-messenger"),_=e("./currency-rate-controller-messenger"),P=e("./ens-controller-messenger"),j=e("./name-controller-messenger"),O=e("./gas-fee-controller-messenger"),N=e("./selected-network-controller-messenger"),D=e("./account-tracker-controller-messenger"),R=e("./onboarding-controller-messenger"),B=e("./remote-feature-flag-controller-messenger"),x=e("./rewards-controller-messenger"),F=e("./swaps-controller-messenger"),L=e("./bridge-controller-messenger"),U=e("./bridge-status-controller-messenger"),$=e("./preferences-controller-messenger"),K=e("./app-state-controller-messenger"),W=e("./permission-controller-messenger"),G=e("./subject-metadata-controller-messenger"),H=e("./keyring-controller-messenger"),q=e("./permission-log-controller-messenger"),V=e("./network-controller-messenger"),z=e("./subscription/subscription-service-messenger"),Y=e("./announcement-controller-messenger"),J=e("./account-order-controller-messenger"),X=e("./accounts-controller-messenger"),Q=e("./phishing-controller-messenger"),Z=e("./alert-controller-messenger"),ee=e("./metametrics-data-deletion-controller-messenger"),te=e("./logging-controller-messenger"),ne=e("./app-metadata-controller-messenger"),re=e("./error-reporting-service-messenger"),se=e("./approval-controller-messenger"),oe=e("./address-book-controller-messenger"),ie=e("./decrypt-message-manager-messenger"),ae=e("./decrypt-message-controller-messenger"),ce=e("./encryption-public-key-controller-messenger"),le=e("./encryption-public-key-manager-messenger"),ue=e("./signature-controller-messenger"),de=e("./user-operation-controller-messenger"),pe=e("./reward-data-service-messenger"),ge=e("./claims/claims-controller-messenger"),he=e("./claims/claims-service-messenger");n.CONTROLLER_MESSENGERS={AccountOrderController:{getMessenger:J.getAccountOrderControllerMessenger,getInitMessenger:r.noop},AccountTrackerController:{getMessenger:D.getAccountTrackerControllerMessenger,getInitMessenger:D.getAccountTrackerControllerInitMessenger},AccountsController:{getMessenger:X.getAccountsControllerMessenger,getInitMessenger:r.noop},AddressBookController:{getMessenger:oe.getAddressBookControllerMessenger,getInitMessenger:r.noop},AlertController:{getMessenger:Z.getAlertControllerMessenger,getInitMessenger:r.noop},AnnouncementController:{getMessenger:Y.getAnnouncementControllerMessenger,getInitMessenger:r.noop},AppMetadataController:{getMessenger:ne.getAppMetadataControllerMessenger,getInitMessenger:r.noop},ApprovalController:{getMessenger:se.getApprovalControllerMessenger,getInitMessenger:r.noop},AppStateController:{getMessenger:K.getAppStateControllerMessenger,getInitMessenger:r.noop},AuthenticationController:{getMessenger:u.getAuthenticationControllerMessenger,getInitMessenger:u.getAuthenticationControllerInitMessenger},BridgeController:{getMessenger:L.getBridgeControllerMessenger,getInitMessenger:L.getBridgeControllerInitMessenger},BridgeStatusController:{getMessenger:U.getBridgeStatusControllerMessenger,getInitMessenger:r.noop},ClaimsController:{getMessenger:ge.getClaimsControllerMessenger,getInitMessenger:ge.getClaimsControllerInitMessenger},ClaimsService:{getMessenger:he.getClaimsServiceMessenger,getInitMessenger:r.noop},CronjobController:{getMessenger:o.getCronjobControllerMessenger,getInitMessenger:r.noop},CurrencyRateController:{getMessenger:_.getCurrencyRateControllerMessenger,getInitMessenger:_.getCurrencyRateControllerInitMessenger},DecryptMessageController:{getMessenger:ae.getDecryptMessageControllerMessenger,getInitMessenger:ae.getDecryptMessageControllerInitMessenger},DecryptMessageManager:{getMessenger:ie.getDecryptMessageManagerMessenger,getInitMessenger:r.noop},DeFiPositionsController:{getMessenger:g.getDeFiPositionsControllerMessenger,getInitMessenger:h.getDeFiPositionsControllerInitMessenger},DelegationController:{getMessenger:m.getDelegationControllerMessenger,getInitMessenger:m.getDelegationControllerInitMessenger},EncryptionPublicKeyController:{getMessenger:ce.getEncryptionPublicKeyControllerMessenger,getInitMessenger:ce.getEncryptionPublicKeyControllerInitMessenger},EncryptionPublicKeyManager:{getMessenger:le.getEncryptionPublicKeyManagerMessenger,getInitMessenger:r.noop},EnsController:{getMessenger:P.getEnsControllerMessenger,getInitMessenger:P.getEnsControllerInitMessenger},ErrorReportingService:{getMessenger:re.getErrorReportingServiceMessenger,getInitMessenger:r.noop},ExecutionService:{getMessenger:o.getExecutionServiceMessenger,getInitMessenger:r.noop},GasFeeController:{getMessenger:O.getGasFeeControllerMessenger,getInitMessenger:O.getGasFeeControllerInitMessenger},GatorPermissionsController:{getMessenger:C.getGatorPermissionsControllerMessenger,getInitMessenger:r.noop},InstitutionalSnapController:{getMessenger:l.getInstitutionalSnapControllerMessenger,getInitMessenger:r.noop},KeyringController:{getMessenger:H.getKeyringControllerMessenger,getInitMessenger:H.getKeyringControllerInitMessenger},LoggingController:{getMessenger:te.getLoggingControllerMessenger,getInitMessenger:r.noop},MetaMetricsController:{getMessenger:M.getMetaMetricsControllerMessenger,getInitMessenger:r.noop},MetaMetricsDataDeletionController:{getMessenger:ee.getMetaMetricsDataDeletionControllerMessenger,getInitMessenger:r.noop},MultichainAssetsController:{getMessenger:c.getMultichainAssetsControllerMessenger,getInitMessenger:r.noop},MultichainAssetsRatesController:{getMessenger:c.getMultichainAssetsRatesControllerMessenger,getInitMessenger:r.noop},MultichainBalancesController:{getMessenger:c.getMultichainBalancesControllerMessenger,getInitMessenger:r.noop},MultichainTransactionsController:{getMessenger:c.getMultichainTransactionsControllerMessenger,getInitMessenger:r.noop},MultichainNetworkController:{getMessenger:c.getMultichainNetworkControllerMessenger,getInitMessenger:r.noop},MultichainRouter:{getMessenger:o.getMultichainRouterMessenger,getInitMessenger:r.noop},NameController:{getMessenger:j.getNameControllerMessenger,getInitMessenger:j.getNameControllerInitMessenger},NetworkController:{getMessenger:V.getNetworkControllerMessenger,getInitMessenger:V.getNetworkControllerInitMessenger},NotificationServicesController:{getMessenger:p.getNotificationServicesControllerMessenger,getInitMessenger:r.noop},NotificationServicesPushController:{getMessenger:p.getNotificationServicesPushControllerMessenger,getInitMessenger:p.getNotificationServicesPushControllerInitMessenger},OAuthService:{getMessenger:b.getOAuthServiceMessenger,getInitMessenger:r.noop},OnboardingController:{getMessenger:R.getOnboardingControllerMessenger,getInitMessenger:r.noop},PermissionController:{getMessenger:W.getPermissionControllerMessenger,getInitMessenger:W.getPermissionControllerInitMessenger},PermissionLogController:{getMessenger:q.getPermissionLogControllerMessenger,getInitMessenger:r.noop},PhishingController:{getMessenger:Q.getPhishingControllerMessenger,getInitMessenger:r.noop},RateLimitController:{getMessenger:o.getRateLimitControllerMessenger,getInitMessenger:o.getRateLimitControllerInitMessenger},RatesController:{getMessenger:E.getRatesControllerMessenger,getInitMessenger:r.noop},RemoteFeatureFlagController:{getMessenger:B.getRemoteFeatureFlagControllerMessenger,getInitMessenger:B.getRemoteFeatureFlagControllerInitMessenger},SeedlessOnboardingController:{getMessenger:b.getSeedlessOnboardingControllerMessenger,getInitMessenger:b.getSeedlessOnboardingControllerInitMessenger},SelectedNetworkController:{getMessenger:N.getSelectedNetworkControllerMessenger,getInitMessenger:r.noop},ShieldController:{getMessenger:v.getShieldControllerMessenger,getInitMessenger:v.getShieldControllerInitMessenger},SignatureController:{getMessenger:ue.getSignatureControllerMessenger,getInitMessenger:ue.getSignatureControllerInitMessenger},SnapsNameProvider:{getMessenger:o.getSnapsNameProviderMessenger,getInitMessenger:r.noop},SnapsRegistry:{getMessenger:o.getSnapsRegistryMessenger,getInitMessenger:r.noop},SnapController:{getMessenger:o.getSnapControllerMessenger,getInitMessenger:o.getSnapControllerInitMessenger},SnapInsightsController:{getMessenger:o.getSnapInsightsControllerMessenger,getInitMessenger:r.noop},SnapInterfaceController:{getMessenger:o.getSnapInterfaceControllerMessenger,getInitMessenger:r.noop},SnapKeyringBuilder:{getMessenger:f.getSnapKeyringBuilderMessenger,getInitMessenger:f.getSnapKeyringBuilderInitMessenger},SubjectMetadataController:{getMessenger:G.getSubjectMetadataControllerMessenger,getInitMessenger:r.noop},SubscriptionController:{getMessenger:y.getSubscriptionControllerMessenger,getInitMessenger:y.getSubscriptionControllerInitMessenger},SubscriptionService:{getMessenger:z.getSubscriptionServiceMessenger,getInitMessenger:r.noop},RewardsDataService:{getMessenger:pe.getRewardsDataServiceMessenger,getInitMessenger:r.noop},RewardsController:{getMessenger:x.getRewardsControllerMessenger,getInitMessenger:x.getRewardsControllerInitMessenger},SwapsController:{getMessenger:F.getSwapsControllerMessenger,getInitMessenger:F.getSwapsControllerInitMessenger},PPOMController:{getMessenger:s.getPPOMControllerMessenger,getInitMessenger:s.getPPOMControllerInitMessenger},PreferencesController:{getMessenger:$.getPreferencesControllerMessenger,getInitMessenger:r.noop},TokenBalancesController:{getMessenger:T.getTokenBalancesControllerMessenger,getInitMessenger:T.getTokenBalancesControllerInitMessenger},TokenDetectionController:{getMessenger:A.getTokenDetectionControllerMessenger,getInitMessenger:A.getTokenDetectionControllerInitMessenger},TokenListController:{getMessenger:S.getTokenListControllerMessenger,getInitMessenger:S.getTokenListControllerInitMessenger},TokensController:{getMessenger:I.getTokensControllerMessenger,getInitMessenger:I.getTokensControllerInitMessenger},TransactionController:{getMessenger:i.getTransactionControllerMessenger,getInitMessenger:i.getTransactionControllerInitMessenger},UserOperationController:{getMessenger:de.getUserOperationControllerMessenger,getInitMessenger:de.getUserOperationControllerInitMessenger},UserStorageController:{getMessenger:u.getUserStorageControllerMessenger,getInitMessenger:k.getUserStorageControllerInitMessenger},TokenRatesController:{getMessenger:d.getTokenRatesControllerMessenger,getInitMessenger:d.getTokenRatesControllerInitMessenger},NftController:{getMessenger:d.getNftControllerMessenger,getInitMessenger:d.getNftControllerInitMessenger},NftDetectionController:{getMessenger:d.getNftDetectionControllerMessenger,getInitMessenger:r.noop},AssetsContractController:{getMessenger:d.getAssetsContractControllerMessenger,getInitMessenger:d.getAssetsContractControllerInitMessenger},AccountTreeController:{getMessenger:f.getAccountTreeControllerMessenger,getInitMessenger:f.getAccountTreeControllerInitMessenger},WebSocketService:{getMessenger:o.getWebSocketServiceMessenger,getInitMessenger:r.noop},BackendWebSocketService:{getMessenger:a.getBackendWebSocketServiceMessenger,getInitMessenger:a.getBackendWebSocketServiceInitMessenger},AccountActivityService:{getMessenger:a.getAccountActivityServiceMessenger,getInitMessenger:r.noop},SmartTransactionsController:{getMessenger:w.getSmartTransactionsControllerMessenger,getInitMessenger:w.getSmartTransactionsControllerInitMessenger},MultichainAccountService:{getMessenger:f.getMultichainAccountServiceMessenger,getInitMessenger:f.getMultichainAccountServiceInitMessenger},NetworkOrderController:{getMessenger:d.getNetworkOrderControllerMessenger,getInitMessenger:r.noop},NetworkEnablementController:{getMessenger:d.getNetworkEnablementControllerMessenger,getInitMessenger:d.getNetworkEnablementControllerInitMessenger}}}}},{package:"$root$",file:"app/scripts/controller-init/messengers/index.ts"}],[106,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getKeyringControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"KeyringControllerInit",parent:e});return e.delegate({messenger:t,actions:["AppStateController:requestQrCodeScan"],events:[]}),t},n.getKeyringControllerMessenger=function(e){return new r.Messenger({namespace:"KeyringController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/keyring-controller-messenger.ts"}],[107,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getLoggingControllerMessenger=function(e){return new r.Messenger({namespace:"LoggingController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/logging-controller-messenger.ts"}],[108,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMetaMetricsControllerMessenger=function(e){const t=new r.Messenger({namespace:"MetaMetricsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","PreferencesController:getState"],events:["PreferencesController:stateChange","NetworkController:networkDidChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/metametrics-controller-messenger.ts"}],[109,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMetaMetricsDataDeletionControllerMessenger=function(e){const t=new r.Messenger({namespace:"MetaMetricsDataDeletionController",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/metametrics-data-deletion-controller-messenger.ts"}],[110,{"./multichain-assets-controller-messenger":111,"./multichain-assets-rates-controller-messenger":112,"./multichain-balances-controller-messenger":113,"./multichain-network-controller-messenger":114,"./multichain-transactions-controller-messenger":115},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getMultichainAssetsControllerMessenger",{enumerable:!0,get:function(){return r.getMultichainAssetsControllerMessenger}}),Object.defineProperty(n,"getMultichainAssetsRatesControllerMessenger",{enumerable:!0,get:function(){return s.getMultichainAssetsRatesControllerMessenger}}),Object.defineProperty(n,"getMultichainBalancesControllerMessenger",{enumerable:!0,get:function(){return o.getMultichainBalancesControllerMessenger}}),Object.defineProperty(n,"getMultichainNetworkControllerMessenger",{enumerable:!0,get:function(){return a.getMultichainNetworkControllerMessenger}}),Object.defineProperty(n,"getMultichainTransactionsControllerMessenger",{enumerable:!0,get:function(){return i.getMultichainTransactionsControllerMessenger}});var r=e("./multichain-assets-controller-messenger"),s=e("./multichain-assets-rates-controller-messenger"),o=e("./multichain-balances-controller-messenger"),i=e("./multichain-transactions-controller-messenger"),a=e("./multichain-network-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/index.ts"}],[111,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainAssetsControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainAssetsController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountAssetListUpdated"],actions:["PermissionController:getPermissions","SnapController:handleRequest","SnapController:getAll","AccountsController:listMultichainAccounts"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-assets-controller-messenger.ts"}],[112,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainAssetsRatesControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainAssetsRatesController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","KeyringController:lock","KeyringController:unlock","CurrencyRateController:stateChange","MultichainAssetsController:accountAssetListUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","CurrencyRateController:getState","MultichainAssetsController:getState","AccountsController:getSelectedMultichainAccount"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-assets-rates-controller-messenger.ts"}],[113,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainBalancesControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainBalancesController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountBalancesUpdated","MultichainAssetsController:accountAssetListUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","MultichainAssetsController:getState","KeyringController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-balances-controller-messenger.ts"}],[114,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainNetworkControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainNetworkController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:setActiveNetwork","NetworkController:getState","NetworkController:removeNetwork","NetworkController:findNetworkClientIdByChainId","NetworkController:getSelectedChainId","AccountsController:listMultichainAccounts"],events:["AccountsController:selectedAccountChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-network-controller-messenger.ts"}],[115,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainTransactionsControllerMessenger=function(e){const t=new r.Messenger({namespace:"MultichainTransactionsController",parent:e});return e.delegate({messenger:t,events:["AccountsController:accountAdded","AccountsController:accountRemoved","AccountsController:accountTransactionsUpdated"],actions:["AccountsController:listMultichainAccounts","SnapController:handleRequest","KeyringController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/multichain/multichain-transactions-controller-messenger.ts"}],[116,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNameControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NameControllerInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState"]}),t},n.getNameControllerMessenger=function(e){return new r.Messenger({namespace:"NameController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/name-controller-messenger.ts"}],[117,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNetworkControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NetworkControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId","MetaMetricsController:trackEvent","RemoteFeatureFlagController:getState"],events:["NetworkController:rpcEndpointUnavailable","NetworkController:rpcEndpointDegraded","RemoteFeatureFlagController:stateChange"]}),t},n.getNetworkControllerMessenger=function(e){const t=new r.Messenger({namespace:"NetworkController",parent:e});return e.delegate({messenger:t,actions:["ErrorReportingService:captureException"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/network-controller-messenger.ts"}],[118,{"./notification-services-controller-messenger":119,"./notification-services-push-controller-messenger":120},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getNotificationServicesControllerMessenger",{enumerable:!0,get:function(){return r.getNotificationServicesControllerMessenger}}),Object.defineProperty(n,"getNotificationServicesPushControllerInitMessenger",{enumerable:!0,get:function(){return s.getNotificationServicesPushControllerInitMessenger}}),Object.defineProperty(n,"getNotificationServicesPushControllerMessenger",{enumerable:!0,get:function(){return s.getNotificationServicesPushControllerMessenger}});var r=e("./notification-services-controller-messenger"),s=e("./notification-services-push-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/index.ts"}],[119,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNotificationServicesControllerMessenger=function(e){const t=new r.Messenger({namespace:"NotificationServicesController",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getState","AuthenticationController:getBearerToken","AuthenticationController:isSignedIn","AuthenticationController:performSignIn","NotificationServicesPushController:enablePushNotifications","NotificationServicesPushController:disablePushNotifications","NotificationServicesPushController:subscribeToPushNotifications"],events:["KeyringController:stateChange","KeyringController:lock","KeyringController:unlock","NotificationServicesPushController:onNewNotifications","NotificationServicesPushController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/notification-services-controller-messenger.ts"}],[1192,{"@metamask/base-controller":1297,"@metamask/controller-utils":1383},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=n.getDefaultAddressBookControllerState=n.controllerName=n.AddressType=void 0;const i=e("@metamask/base-controller"),a=e("@metamask/controller-utils");var c;!function(e){e.externallyOwnedAccounts="EXTERNALLY_OWNED_ACCOUNTS",e.contractAccounts="CONTRACT_ACCOUNTS",e.nonAccounts="NON_ACCOUNTS"}(c||(n.AddressType=c={})),n.controllerName="AddressBookController";const l={addressBook:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};n.getDefaultAddressBookControllerState=()=>({addressBook:{}});class u extends i.BaseController{constructor({messenger:e,state:t}){const i={...(0,n.getDefaultAddressBookControllerState)(),...t};super({messenger:e,metadata:l,name:n.controllerName,state:i}),r.add(this),o(this,r,"m",s).call(this)}list(){const{addressBook:e}=this.state;return Object.keys(e).reduce((t,n)=>{const r=n;return[...t,...Object.values(e[r])]},[])}clear(){this.update(e=>{e.addressBook={}})}delete(e,t){if(t=(0,a.toChecksumHexAddress)(t),!([e,t].every(e=>(0,a.isSafeDynamicKey)(e))&&(0,a.isValidHexAddress)(t)&&this.state.addressBook[e]&&this.state.addressBook[e][t]))return!1;const n={...this.state.addressBook[e][t]};return this.update(n=>{const r=n.addressBook[e];r?.[t]&&(delete r[t],0===Object.keys(r).length&&delete n.addressBook[e])}),"*"!==String(e)&&this.messenger.publish("AddressBookController:contactDeleted",n),!0}set(e,t,n=(0,a.toHex)(1),r="",s){if(e=(0,a.toChecksumHexAddress)(e),!(0,a.isValidHexAddress)(e))return!1;const o={address:e,chainId:n,isEns:!1,memo:r,name:t,addressType:s,lastUpdatedAt:Date.now()},i=(0,a.normalizeEnsName)(t);return i&&(o.name=i,o.isEns=!0),this.update(t=>{t.addressBook={...this.state.addressBook,[n]:{...this.state.addressBook[n],[e]:o}}}),"*"!==String(n)&&this.messenger.publish("AddressBookController:contactUpdated",o),!0}}n.AddressBookController=u,r=new WeakSet,s=function(){this.messenger.registerActionHandler(`${n.controllerName}:list`,this.list.bind(this)),this.messenger.registerActionHandler(`${n.controllerName}:set`,this.set.bind(this)),this.messenger.registerActionHandler(`${n.controllerName}:delete`,this.delete.bind(this))},n.default=u}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/AddressBookController.cjs"}],[1193,{"./AddressBookController.cjs":1192},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=n.getDefaultAddressBookControllerState=void 0;var r=e("./AddressBookController.cjs");Object.defineProperty(n,"getDefaultAddressBookControllerState",{enumerable:!0,get:function(){return r.getDefaultAddressBookControllerState}}),Object.defineProperty(n,"AddressBookController",{enumerable:!0,get:function(){return r.AddressBookController}})}}},{package:"@metamask/address-book-controller",file:"node_modules/@metamask/address-book-controller/dist/index.cjs"}],[1194,{"@metamask/base-controller":1297},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementController=void 0;const i=e("@metamask/base-controller"),a={announcements:{}},c={announcements:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class l extends i.BaseController{constructor({messenger:e,state:t,allAnnouncements:n}){const i={...a,...t};super({messenger:e,metadata:c,name:"AnnouncementController",state:i}),r.add(this),o(this,r,"m",s).call(this,n)}resetViewed(){this.update(({announcements:e})=>{for(const t of Object.values(e))t.isShown=!1})}updateViewed(e){this.update(({announcements:t})=>{for(const n of Object.keys(e).map(Number))t[n].isShown=e[n]})}}n.AnnouncementController=l,r=new WeakSet,s=function(e){this.update(t=>{Object.values(e).forEach(e=>{t.announcements[e.id]=t.announcements[e.id]??{...e,isShown:!1}})})}}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/AnnouncementController.cjs"}],[1195,{"./AnnouncementController.cjs":1194},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementController=void 0;var r=e("./AnnouncementController.cjs");Object.defineProperty(n,"AnnouncementController",{enumerable:!0,get:function(){return r.AnnouncementController}})}}},{package:"@metamask/announcement-controller",file:"node_modules/@metamask/announcement-controller/dist/index.cjs"}],[12,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c;Object.defineProperty(n,"__esModule",{value:!0}),n.PREINSTALLED_SNAPS_URLS=void 0;n.PREINSTALLED_SNAPS_URLS=[new URL("/snaps/message-signing-snap.json",(null===(r=self.document)||void 0===r?void 0:r.baseURI)||self.location.href),new URL("/snaps/ens-resolver-snap.json",(null===(s=self.document)||void 0===s?void 0:s.baseURI)||self.location.href),new URL("/snaps/institutional-wallet-snap.json",(null===(o=self.document)||void 0===o?void 0:o.baseURI)||self.location.href),new URL("/snaps/bitcoin-wallet-snap.json",(null===(i=self.document)||void 0===i?void 0:i.baseURI)||self.location.href),new URL("/snaps/solana-wallet-snap.json",(null===(a=self.document)||void 0===a?void 0:a.baseURI)||self.location.href),new URL("/snaps/tron-wallet-snap.json",(null===(c=self.document)||void 0===c?void 0:c.baseURI)||self.location.href)]}}},{package:"$root$",file:"app/scripts/constants/snaps.ts"}],[120,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNotificationServicesPushControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"NotificationServicesPushControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"],events:["NotificationServicesPushController:onNewNotifications","NotificationServicesPushController:pushNotificationClicked"]}),t},n.getNotificationServicesPushControllerMessenger=function(e){const t=new r.Messenger({namespace:"NotificationServicesPushController",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/notifications/notification-services-push-controller-messenger.ts"}],[121,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getOnboardingControllerMessenger=function(e){return new r.Messenger({namespace:"OnboardingController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/onboarding-controller-messenger.ts"}],[122,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPermissionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"PermissionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AppStateController:getUnlockPromise","AccountsController:listAccounts","CurrencyRateController:getState","KeyringController:getKeyringsByType","KeyringController:withKeyring","MultichainRouter:isSupportedScope","MultichainRouter:getSupportedAccounts","NetworkController:findNetworkClientIdByChainId","PhishingController:maybeUpdateState","PhishingController:testOrigin","PreferencesController:getState","RateLimitController:call","SnapController:clearSnapState","SnapController:get","SnapController:getSnapState","SnapController:handleRequest","SnapController:updateSnapState","SnapInterfaceController:createInterface","SnapInterfaceController:getInterface"]}),t},n.getPermissionControllerMessenger=function(e){const t=new r.Messenger({namespace:"PermissionController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","ApprovalController:hasRequest","ApprovalController:acceptRequest","ApprovalController:rejectRequest","SnapController:getPermitted","SnapController:install","SubjectMetadataController:getSubjectMetadata"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/permission-controller-messenger.ts"}],[123,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPermissionLogControllerMessenger=function(e){return new r.Messenger({namespace:"PermissionLogController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/permission-log-controller-messenger.ts"}],[124,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPhishingControllerMessenger=function(e){const t=new r.Messenger({namespace:"PhishingController",parent:e});return e.delegate({messenger:t,events:["TransactionController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/phishing-controller-messenger.ts"}],[125,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPPOMControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"PPOMControllerInit",parent:e});return e.delegate({messenger:t,events:["PreferencesController:stateChange"],actions:["NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"]}),t},n.getPPOMControllerMessenger=function(e){const t=new r.Messenger({namespace:"PPOMController",parent:e});return e.delegate({messenger:t,events:["NetworkController:stateChange","NetworkController:networkDidChange"],actions:["NetworkController:getNetworkClientById"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/ppom-controller-messenger.ts"}],[126,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPreferencesControllerMessenger=function(e){const t=new r.Messenger({namespace:"PreferencesController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:setSelectedAccount","AccountsController:getSelectedAccount","AccountsController:getAccountByAddress","AccountsController:setAccountName","NetworkController:getState"],events:["AccountsController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/preferences-controller-messenger.ts"}],[127,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRatesControllerMessenger=function(e){return new r.Messenger({namespace:"RatesController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/rates-controller-messenger.ts"}],[128,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRemoteFeatureFlagControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"RemoteFeatureFlagControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:getMetaMetricsId","PreferencesController:getState","OnboardingController:getState"],events:["PreferencesController:stateChange","OnboardingController:stateChange"]}),t},n.getRemoteFeatureFlagControllerMessenger=function(e){return new r.Messenger({namespace:"RemoteFeatureFlagController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/remote-feature-flag-controller-messenger.ts"}],[129,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRewardsDataServiceMessenger=function(e){const t=new r.Messenger({namespace:"RewardsDataService",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/reward-data-service-messenger.ts"}],[13,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PHISHING_WARNING_PAGE=n.PHISHING_STREAM=n.PHISHING_SAFELIST=n.METAMASK_INPAGE=n.METAMASK_EIP_1193_PROVIDER=n.METAMASK_COOKIE_HANDLER=n.METAMASK_CAIP_MULTICHAIN_PROVIDER=n.LEGACY_PUBLIC_CONFIG=n.LEGACY_PROVIDER=n.LEGACY_INPAGE=n.LEGACY_CONTENT_SCRIPT=n.CONTENT_SCRIPT=void 0;n.CONTENT_SCRIPT="metamask-contentscript",n.METAMASK_INPAGE="metamask-inpage",n.PHISHING_WARNING_PAGE="metamask-phishing-warning-page",n.METAMASK_COOKIE_HANDLER="metamask-cookie-handler",n.METAMASK_EIP_1193_PROVIDER="metamask-provider",n.METAMASK_CAIP_MULTICHAIN_PROVIDER="metamask-multichain-provider",n.PHISHING_SAFELIST="metamask-phishing-safelist",n.PHISHING_STREAM="phishing",n.LEGACY_CONTENT_SCRIPT="contentscript",n.LEGACY_INPAGE="inpage",n.LEGACY_PROVIDER="provider",n.LEGACY_PUBLIC_CONFIG="publicConfig"}}},{package:"$root$",file:"app/scripts/constants/stream.ts"}],[130,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRewardsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"RewardsControllerInit",parent:e});return e.delegate({messenger:t,actions:["RemoteFeatureFlagController:getState","PreferencesController:getState"]}),t},n.getRewardsControllerMessenger=function(e){const t=new r.Messenger({namespace:s,parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedMultichainAccount","AccountTreeController:getAccountsFromSelectedAccountGroup","AccountsController:listMultichainAccounts","KeyringController:signPersonalMessage","RewardsDataService:login","RewardsDataService:estimatePoints","RewardsDataService:getSeasonStatus","RewardsDataService:fetchGeoLocation","RewardsDataService:mobileOptin","RewardsDataService:validateReferralCode","RewardsDataService:mobileJoin","RewardsDataService:getOptInStatus","RewardsDataService:getSeasonMetadata","RewardsDataService:getDiscoverSeasons","SnapController:handleRequest"],events:["AccountTreeController:selectedAccountGroupChange","KeyringController:unlock"]}),t};var r=e("@metamask/messenger");const s="RewardsController"}}},{package:"$root$",file:"app/scripts/controller-init/messengers/rewards-controller-messenger.ts"}],[131,{"./oauth-service-messenger":132,"./seedless-onboarding-controller-messenger":133},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getOAuthServiceMessenger",{enumerable:!0,get:function(){return r.getOAuthServiceMessenger}}),Object.defineProperty(n,"getSeedlessOnboardingControllerInitMessenger",{enumerable:!0,get:function(){return s.getSeedlessOnboardingControllerInitMessenger}}),Object.defineProperty(n,"getSeedlessOnboardingControllerMessenger",{enumerable:!0,get:function(){return s.getSeedlessOnboardingControllerMessenger}});var r=e("./oauth-service-messenger"),s=e("./seedless-onboarding-controller-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/index.ts"}],[132,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getOAuthServiceMessenger=function(e){const t=new r.Messenger({namespace:"OAuthService",parent:e});return e.delegate({messenger:t,actions:["SeedlessOnboardingController:getState","OnboardingController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/oauth-service-messenger.ts"}],[133,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSeedlessOnboardingControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SeedlessOnboardingControllerInit",parent:e});return e.delegate({messenger:t,actions:["OAuthService:getNewRefreshToken","OAuthService:revokeRefreshToken","OAuthService:renewRefreshToken"]}),t},n.getSeedlessOnboardingControllerMessenger=function(e){return new r.Messenger({namespace:"SeedlessOnboardingController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/seedless-onboarding/seedless-onboarding-controller-messenger.ts"}],[134,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSelectedNetworkControllerMessenger=function(e){const t=new r.Messenger({namespace:"SelectedNetworkController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","NetworkController:getSelectedNetworkClient","PermissionController:hasPermissions","PermissionController:getSubjectNames"],events:["NetworkController:stateChange","PermissionController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/selected-network-controller-messenger.ts"}],[135,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getShieldControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"ShieldControllerInit",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t},n.getShieldControllerMessenger=function(e){const t=new r.Messenger({namespace:"ShieldController",parent:e});return e.delegate({messenger:t,events:["SignatureController:stateChange","TransactionController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/shield/shield-controller-messenger.ts"}],[136,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSignatureControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SignatureControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent","PreferencesController:getState"]}),t},n.getSignatureControllerMessenger=function(e){const t=new r.Messenger({namespace:"SignatureController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getState","ApprovalController:addRequest","KeyringController:signMessage","KeyringController:signPersonalMessage","KeyringController:signTypedMessage","LoggingController:add","NetworkController:getNetworkClientById","GatorPermissionsController:decodePermissionFromPermissionContextForOrigin"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/signature-controller-messenger.ts"}],[137,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSmartTransactionsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SmartTransactionsControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent"]}),t},n.getSmartTransactionsControllerMessenger=function(e){const t=new r.Messenger({namespace:"SmartTransactionsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","TransactionController:getNonceLock","TransactionController:confirmExternalTransaction","TransactionController:getTransactions","TransactionController:updateTransaction"],events:["NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/smart-transactions-controller-messenger.ts"}],[138,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCronjobControllerMessenger=function(e){const t=new r.Messenger({namespace:"CronjobController",parent:e});return e.delegate({messenger:t,events:["SnapController:snapInstalled","SnapController:snapUpdated","SnapController:snapUninstalled","SnapController:snapEnabled","SnapController:snapDisabled"],actions:["PermissionController:getPermissions","SnapController:handleRequest"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/cronjob-controller-messenger.ts"}],[1388,{"./BackendWebSocketService.cjs":1389,"./logger.cjs":1391},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c,l,u,d,p,g,h,m,f=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},b=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountActivityService=n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_EVENTS=n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_ACTIONS=void 0;const w=e("./BackendWebSocketService.cjs"),v=e("./logger.cjs"),y="AccountActivityService",C=(0,v.createModuleLogger)(v.projectLogger,y),M=["subscribe","unsubscribe"];n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_ACTIONS=["AccountsController:getSelectedAccount","BackendWebSocketService:connect","BackendWebSocketService:forceReconnection","BackendWebSocketService:subscribe","BackendWebSocketService:getConnectionInfo","BackendWebSocketService:channelHasSubscription","BackendWebSocketService:getSubscriptionsByChannel","BackendWebSocketService:findSubscriptionsByChannelPrefix","BackendWebSocketService:addChannelCallback","BackendWebSocketService:removeChannelCallback"],n.ACCOUNT_ACTIVITY_SERVICE_ALLOWED_EVENTS=["AccountsController:selectedAccountChange","BackendWebSocketService:connectionStateChanged"];n.AccountActivityService=class{constructor(e){r.add(this),this.name=y,s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,new Set),f(this,s,e.messenger,"f"),f(this,o,{subscriptionNamespace:e.subscriptionNamespace??"account-activity.v1"},"f"),f(this,i,e.traceFn??((e,t)=>t?.()),"f"),b(this,s,"f").registerMethodActionHandlers(this,M),b(this,s,"f").subscribe("AccountsController:selectedAccountChange",async e=>await b(this,r,"m",l).call(this,e)),b(this,s,"f").subscribe("BackendWebSocketService:connectionStateChanged",e=>b(this,r,"m",d).call(this,e)),b(this,s,"f").call("BackendWebSocketService:addChannelCallback",{channelName:`system-notifications.v1.${b(this,o,"f").subscriptionNamespace}`,callback:e=>b(this,r,"m",u).call(this,e)})}async subscribe(e){try{await b(this,s,"f").call("BackendWebSocketService:connect");const t=`${b(this,o,"f").subscriptionNamespace}.${e.address}`;if(b(this,s,"f").call("BackendWebSocketService:channelHasSubscription",t))return;await b(this,s,"f").call("BackendWebSocketService:subscribe",{channels:[t],channelType:b(this,o,"f").subscriptionNamespace,callback:e=>{b(this,r,"m",c).call(this,e.data)}})}catch(e){C("Subscription failed, forcing reconnection",{error:e}),await b(this,r,"m",m).call(this)}}async unsubscribe(e){const{address:t}=e;try{const e=`${b(this,o,"f").subscriptionNamespace}.${t}`,n=b(this,s,"f").call("BackendWebSocketService:getSubscriptionsByChannel",e);if(0===n.length)return;for(const e of n)await e.unsubscribe()}catch(e){C("Unsubscription failed, forcing reconnection",{error:e}),await b(this,r,"m",m).call(this)}}destroy(){b(this,s,"f").call("BackendWebSocketService:removeChannelCallback",`system-notifications.v1.${b(this,o,"f").subscriptionNamespace}`)}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakSet,c=function(e){const{address:t,tx:n,updates:r}=e,a=1e3*n.timestamp,c=Date.now()-a;C("Handling account activity update",{address:t,updateCount:r.length,elapsedMs:c}),b(this,i,"f").call(this,{name:`${y} Transaction Message`,data:{chain:n.chain,status:n.status,elapsed_ms:c},tags:{service:y,notification_type:b(this,o,"f").subscriptionNamespace}},()=>{b(this,s,"f").publish("AccountActivityService:transactionUpdated",n),b(this,s,"f").publish("AccountActivityService:balanceUpdated",{address:t,chain:n.chain,updates:r})})},l=async function(e){if(e?.address)try{const t=b(this,r,"m",h).call(this,e);await b(this,r,"m",g).call(this),await this.subscribe({address:t})}catch(e){C("Account change failed",{error:e})}},u=function(e){const t=e.data,{timestamp:n}=e;if(!t.chainIds||!Array.isArray(t.chainIds)||!t.status)throw new Error("Invalid system notification data: missing chainIds or status");if("up"===t.status)for(const e of t.chainIds)b(this,a,"f").add(e);else for(const e of t.chainIds)b(this,a,"f").delete(e);b(this,s,"f").publish("AccountActivityService:statusChanged",{chainIds:t.chainIds,status:t.status,timestamp:n}),C(`WebSocket status change - Published tracked chains as ${t.status}`,{count:t.chainIds.length,chains:t.chainIds,status:t.status})},d=async function(e){const{state:t}=e;if(t===w.WebSocketState.CONNECTED)await b(this,r,"m",p).call(this);else if(t===w.WebSocketState.DISCONNECTED){const e=Array.from(b(this,a,"f"));e.length>0&&(b(this,s,"f").publish("AccountActivityService:statusChanged",{chainIds:e,status:"down",timestamp:Date.now()}),C("WebSocket disconnection - Published tracked chains as down",{count:e.length,chains:e}),b(this,a,"f").clear())}},p=async function(){const e=b(this,s,"f").call("AccountsController:getSelectedAccount");if(!e||!e.address)return;const t=b(this,r,"m",h).call(this,e);await this.subscribe({address:t})},g=async function(){const e=b(this,s,"f").call("BackendWebSocketService:findSubscriptionsByChannelPrefix",b(this,o,"f").subscriptionNamespace);for(const t of e)await t.unsubscribe()},h=function(e){return e.scopes.some(e=>e.startsWith("eip155:"))?`eip155:0:${e.address}`:e.scopes.some(e=>e.startsWith("solana:"))?`solana:0:${e.address}`:e.address},m=async function(){C("Forcing WebSocket reconnection to clean up subscription state"),await b(this,s,"f").call("BackendWebSocketService:forceReconnection")}}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/AccountActivityService.cjs"}],[1389,{"./logger.cjs":1391,"@metamask/controller-utils":1383,"@metamask/utils":2914,uuid:5554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c,l,u,d,p,g,h,m,f,b,w,v,y,C,M,k,S,A,I,T,E,_,P,j,O,N,D,R,B,x,F=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},L=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.BackendWebSocketService=n.WebSocketEventType=n.WebSocketState=n.getCloseReason=void 0;const U=e("@metamask/controller-utils"),$=e("@metamask/utils"),K=e("uuid"),W=e("./logger.cjs"),G="BackendWebSocketService",H=(0,W.createModuleLogger)(W.projectLogger,G),q="Internal: Manual disconnect",V=["connect","disconnect","forceReconnection","sendMessage","sendRequest","subscribe","getConnectionInfo","getSubscriptionsByChannel","channelHasSubscription","findSubscriptionsByChannelPrefix","addChannelCallback","removeChannelCallback","getChannelCallbacks"];function z(e){switch(e){case 1e3:return"Normal Closure";case 1001:return"Going Away";case 1002:return"Protocol Error";case 1003:return"Unsupported Data";case 1004:return"Reserved";case 1005:return"No Status Received";case 1006:return"Abnormal Closure";case 1007:return"Invalid frame payload data";case 1008:return"Policy Violation";case 1009:return"Message Too Big";case 1010:return"Mandatory Extension";case 1011:return"Internal Server Error";case 1012:return"Service Restart";case 1013:return"Try Again Later";case 1014:return"Bad Gateway";case 1015:return"TLS Handshake";default:return e>=3e3&&e<=3999?"Library/Framework Error":e>=4e3&&e<=4999?"Application Error":"Unknown"}}var Y,J;n.getCloseReason=z,function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting",e.DISCONNECTED="disconnected",e.ERROR="error"}(Y||(n.WebSocketState=Y={})),function(e){e.CONNECTED="connected",e.DISCONNECTED="disconnected",e.MESSAGE="message",e.ERROR="error",e.RECONNECTING="reconnecting",e.RECONNECTED="reconnected"}(J||(n.WebSocketEventType=J={}));n.BackendWebSocketService=class{constructor(e){r.add(this),this.name=G,s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c.set(this,void 0),l.set(this,Y.DISCONNECTED),u.set(this,0),d.set(this,null),p.set(this,null),g.set(this,null),h.set(this,null),m.set(this,new Map),f.set(this,0),b.set(this,new Map),w.set(this,new Map),v.set(this,void 0),F(this,s,e.messenger,"f"),F(this,i,e.isEnabled,"f"),F(this,a,e.traceFn??((e,t)=>t?.()),"f"),F(this,o,{url:e.url,timeout:e.timeout??1e4,reconnectDelay:e.reconnectDelay??1e4,maxReconnectDelay:e.maxReconnectDelay??6e4,requestTimeout:e.requestTimeout??3e4},"f"),L(this,r,"m",N).call(this),L(this,r,"m",y).call(this),L(this,s,"f").registerMethodActionHandlers(this,V)}async connect(){if(L(this,i,"f")&&!L(this,i,"f").call(this))return L(this,r,"m",D).call(this),void F(this,u,0,"f");if(L(this,l,"f")!==Y.CONNECTED)if(L(this,h,"f"))await L(this,h,"f");else if(!L(this,d,"f")){F(this,h,(async()=>{let e;try{const t=await L(this,s,"f").call("AuthenticationController:getBearerToken");if(!t)throw new Error("Authentication required: user not signed in");e=t}catch(e){throw H("Failed to check authentication requirements",{error:e}),e}await L(this,r,"m",M).call(this,e)})(),"f");try{await L(this,h,"f")}catch{L(this,r,"m",O).call(this)}finally{F(this,h,null,"f")}}}disconnect(){L(this,l,"f")!==Y.DISCONNECTED&&L(this,c,"f")&&(L(this,c,"f").close(4999,q),H("WebSocket manually disconnected"))}async forceReconnection(){if(L(this,l,"f")===Y.DISCONNECTED||!L(this,c,"f"))return H("WebSocket already disconnected, scheduling reconnect"),void L(this,r,"m",O).call(this);H("Forcing WebSocket reconnection to clean up subscription state"),L(this,c,"f").close(4998,"Internal: Force reconnect")}sendMessage(e){if(L(this,l,"f")!==Y.CONNECTED||!L(this,c,"f"))throw new Error(`Cannot send message: WebSocket is ${L(this,l,"f")}`);try{L(this,c,"f").send(JSON.stringify(e))}catch(e){const t=(0,$.getErrorMessage)(e);throw L(this,r,"m",j).call(this,new Error(t)),new Error(t)}}async sendRequest(e){if(L(this,l,"f")!==Y.CONNECTED)throw new Error(`Cannot send request: WebSocket is ${L(this,l,"f")}`);const t=e.data?.requestId??(0,K.v4)(),n={event:e.event,data:{...e.data,requestId:t}};return new Promise((e,r)=>{const s=setTimeout(()=>{L(this,m,"f").delete(t),H("Request timeout - triggering reconnection",{timeout:L(this,o,"f").requestTimeout}),L(this,l,"f")===Y.CONNECTED&&L(this,c,"f")&&L(this,c,"f").close(3e3,"Request timeout - forcing reconnect"),r(new Error(`Request timeout after ${L(this,o,"f").requestTimeout}ms`))},L(this,o,"f").requestTimeout);L(this,m,"f").set(t,{resolve:e,reject:r,timeout:s});try{this.sendMessage(n)}catch(e){L(this,m,"f").delete(t),clearTimeout(s),r(e instanceof Error?e:new Error(String(e)))}})}getConnectionInfo(){return{state:L(this,l,"f"),url:L(this,o,"f").url,timeout:L(this,o,"f").timeout,reconnectDelay:L(this,o,"f").reconnectDelay,maxReconnectDelay:L(this,o,"f").maxReconnectDelay,requestTimeout:L(this,o,"f").requestTimeout,reconnectAttempts:L(this,u,"f"),connectedAt:L(this,f,"f")}}getSubscriptionsByChannel(e){const t=[];for(const[n,r]of L(this,b,"f"))r.channels.includes(e)&&t.push({subscriptionId:n,channels:r.channels,channelType:r.channelType,unsubscribe:r.unsubscribe});return t}channelHasSubscription(e){for(const t of L(this,b,"f").values())if(t.channels.includes(e))return!0;return!1}findSubscriptionsByChannelPrefix(e){const t=[];for(const[n,r]of L(this,b,"f")){r.channels.some(t=>t.startsWith(e))&&t.push({subscriptionId:n,channels:r.channels,channelType:r.channelType,unsubscribe:r.unsubscribe})}return t}addChannelCallback(e){const t={channelName:e.channelName,callback:e.callback};L(this,w,"f").has(e.channelName)||L(this,w,"f").set(e.channelName,t)}removeChannelCallback(e){return L(this,w,"f").delete(e)}getChannelCallbacks(){return Array.from(L(this,w,"f").values())}destroy(){L(this,r,"m",D).call(this),F(this,u,0,"f"),this.disconnect()}async subscribe(e){const{channels:t,channelType:n,callback:r,requestId:s}=e;if(L(this,l,"f")!==Y.CONNECTED)throw new Error(`Cannot create subscription(s) ${t.join(", ")}: WebSocket is ${L(this,l,"f")}`);const o=await this.sendRequest({event:"subscribe",data:{channels:t,requestId:s}});if(!o?.subscriptionId)throw new Error("Invalid subscription response: missing subscription ID");const{subscriptionId:i}=o,a=async e=>{await this.sendRequest({event:"unsubscribe",data:{subscription:i,channels:t,requestId:e}}),L(this,b,"f").delete(i)},c={subscriptionId:i,channels:[...t],channelType:n,unsubscribe:a};return L(this,b,"f").set(i,{subscriptionId:i,channels:[...t],channelType:n,callback:r,unsubscribe:a}),c}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,h=new WeakMap,m=new WeakMap,f=new WeakMap,b=new WeakMap,w=new WeakMap,v=new WeakMap,r=new WeakSet,y=function(){L(this,s,"f").subscribe("AuthenticationController:stateChange",e=>{e.isSignedIn?this.connect():this.disconnect()},e=>({isSignedIn:e.isSignedIn})),L(this,s,"f").subscribe("KeyringController:unlock",()=>{this.connect()}),L(this,s,"f").subscribe("KeyringController:lock",()=>{this.disconnect()})},C=function(e){const t=L(this,o,"f").url,n=new URL(t);return n.searchParams.set("token",e),n.toString()},M=async function(e){const t=L(this,r,"m",C).call(this,e);return L(this,r,"m",x).call(this,Y.CONNECTING),L(this,a,"f").call(this,{name:`${G} Connection`,data:{reconnectAttempt:L(this,u,"f")},tags:{service:G}},()=>new Promise((e,n)=>{const s=new WebSocket(t);F(this,p,setTimeout(()=>{H("WebSocket connection timeout - forcing close",{timeout:L(this,o,"f").timeout}),s.close()},L(this,o,"f").timeout),"f"),s.onopen=()=>{L(this,p,"f")&&(clearTimeout(L(this,p,"f")),F(this,p,null,"f")),F(this,c,s,"f"),L(this,r,"m",x).call(this,Y.CONNECTED),F(this,f,Date.now(),"f"),F(this,g,setTimeout(()=>{F(this,g,null,"f"),F(this,u,0,"f"),L(this,r,"m",N).call(this),H("Connection stable - reset reconnect attempts and backoff")},1e4),"f"),e()},s.onclose=t=>{if(H("WebSocket onclose event triggered",{code:t.code,reason:t.reason||z(t.code),wasClean:t.wasClean}),L(this,l,"f")===Y.DISCONNECTED)return;const s=4999===t.code&&t.reason===q;L(this,l,"f")===Y.CONNECTING&&(s?e():n(new Error(`WebSocket connection closed during connection: ${t.code} ${t.reason}`)));const o=L(this,f,"f")>0?Date.now()-L(this,f,"f"):0;L(this,r,"m",D).call(this),F(this,c,undefined,"f"),F(this,h,null,"f"),F(this,f,0,"f"),L(this,r,"m",R).call(this,new Error(`WebSocket connection closed: ${t.code} ${t.reason||z(t.code)}`)),L(this,r,"m",B).call(this),L(this,r,"m",x).call(this,Y.DISCONNECTED),s?F(this,u,0,"f"):L(this,r,"m",O).call(this),L(this,a,"f").call(this,{name:`${G} Disconnection`,data:{code:t.code,reason:t.reason||z(t.code),wasClean:t.wasClean,reconnectAttempts:L(this,u,"f"),...o>0&&{connectionDuration_ms:o}},tags:{service:G}})},s.onmessage=e=>{try{const t=L(this,r,"m",P).call(this,e.data);L(this,r,"m",k).call(this,t)}catch{}}}))},k=function(e){if(L(this,r,"m",S).call(this,e))L(this,r,"m",T).call(this,e);else{if(L(this,r,"m",A).call(this,e)){const t=e;if(L(this,r,"m",_).call(this,t))return}if(L(this,r,"m",I).call(this,e)){const t=e;L(this,r,"m",E).call(this,t)}}},S=function(e){return"data"in e&&e.data&&"object"==typeof e.data&&"requestId"in e.data},A=function(e){return"subscriptionId"in e&&!L(this,r,"m",S).call(this,e)},I=function(e){return"channel"in e},T=function(e){const{requestId:t}=e.data,n=L(this,m,"f").get(t);n&&(L(this,m,"f").delete(t),clearTimeout(n.timeout),e.data.failed&&e.data.failed.length>0?n.reject(new Error(`Request failed: ${e.data.failed.join(", ")}`)):n.resolve(e.data))},E=function(e){0!==L(this,w,"f").size&&L(this,w,"f").get(e.channel)?.callback(e)},_=function(e){const{subscriptionId:t,timestamp:n,channel:r}=e;if(null!==t&&t!==undefined){const s=L(this,b,"f").get(t);if(!s)return!1;const o=Date.now()-n;return L(this,a,"f").call(this,{name:`${G} Notification`,data:{channel:r,latency_ms:o,subscriptionId:t},tags:{service:G,notification_type:s.channelType}},()=>{s.callback?.(e)}),!0}return!1},P=function(e){return JSON.parse(e)},j=function(e){},O=function(){if(L(this,d,"f"))return;F(this,u,L(this,u,"f")+1,"f");const e=L(this,v,"f").duration;F(this,v,L(this,v,"f").next({attempt:L(this,u,"f")}),"f"),H("Scheduling reconnect",{attempt:L(this,u,"f"),delay_ms:e}),F(this,d,setTimeout(()=>{if(F(this,d,null,"f"),L(this,i,"f")&&!L(this,i,"f").call(this))return F(this,u,0,"f"),void L(this,r,"m",N).call(this);this.connect()},e),"f")},N=function(){F(this,v,new U.ExponentialBackoff({initialDelay:L(this,o,"f").reconnectDelay,maxDelay:L(this,o,"f").maxReconnectDelay}).next(),"f")},D=function(){L(this,d,"f")&&(clearTimeout(L(this,d,"f")),F(this,d,null,"f")),L(this,p,"f")&&(clearTimeout(L(this,p,"f")),F(this,p,null,"f")),L(this,g,"f")&&(clearTimeout(L(this,g,"f")),F(this,g,null,"f"))},R=function(e){for(const[,t]of L(this,m,"f"))clearTimeout(t.timeout),t.reject(e);L(this,m,"f").clear()},B=function(){L(this,b,"f").clear()},x=function(e){const t=L(this,l,"f");F(this,l,e,"f"),t!==e&&L(this,s,"f").publish("BackendWebSocketService:connectionStateChanged",this.getConnectionInfo())}}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/BackendWebSocketService.cjs"}],[139,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getExecutionServiceMessenger=function(e){return new r.Messenger({namespace:"ExecutionService",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/execution-service-messenger.ts"}],[1390,{"./AccountActivityService.cjs":1388,"./BackendWebSocketService.cjs":1389},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountActivityService=n.BackendWebSocketService=void 0;var r=e("./BackendWebSocketService.cjs");Object.defineProperty(n,"BackendWebSocketService",{enumerable:!0,get:function(){return r.BackendWebSocketService}});var s=e("./AccountActivityService.cjs");Object.defineProperty(n,"AccountActivityService",{enumerable:!0,get:function(){return s.AccountActivityService}})}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/index.cjs"}],[1391,{"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.projectLogger=void 0;const r=e("@metamask/utils");Object.defineProperty(n,"createModuleLogger",{enumerable:!0,get:function(){return r.createModuleLogger}}),n.projectLogger=(0,r.createProjectLogger)("core-backend")}}},{package:"@metamask/core-backend",file:"node_modules/@metamask/core-backend/dist/logger.cjs"}],[1392,{"./constants.cjs":1393,"./utils.cjs":1395,"@metamask/base-controller":1297,"@metamask/keyring-controller":2110,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.DelegationController=n.controllerName=void 0;const a=e("@metamask/base-controller"),c=e("@metamask/keyring-controller"),l=e("@metamask/utils"),u=e("./constants.cjs"),d=e("./utils.cjs");n.controllerName="DelegationController";const p={delegations:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}};class g extends a.BaseController{constructor({messenger:e,state:t,hashDelegation:i,getDelegationEnvironment:a}){super({messenger:e,metadata:p,name:n.controllerName,state:{delegations:{},...t}}),r.set(this,void 0),s.set(this,void 0),o(this,r,i,"f"),o(this,s,a,"f")}async signDelegation(e){const{delegation:t,chainId:n}=e,{DelegationManager:r}=i(this,s,"f").call(this,n),o=(0,d.createTypedMessageParams)({chainId:(0,l.hexToNumber)(n),from:t.delegator,delegation:{...t,signature:"0x"},verifyingContract:r});return await this.messenger.call("KeyringController:signTypedMessage",o,c.SignTypedDataVersion.V4)}store(e){const{entry:t}=e,n=i(this,r,"f").call(this,t.delegation);if(!(0,d.isHexEqual)(t.delegation.authority,u.ROOT_AUTHORITY)&&!this.state.delegations[t.delegation.authority])throw new Error("Invalid authority");this.update(e=>{e.delegations[n]=t})}list(e){const t=this.messenger.call("AccountsController:getSelectedAccount").address;let n=Object.values(this.state.delegations);e?.from&&(n=n.filter(t=>(0,d.isHexEqual)(t.delegation.delegator,e.from))),(!e?.from||e?.from&&!(0,d.isHexEqual)(e.from,t))&&(n=n.filter(e=>(0,d.isHexEqual)(e.delegation.delegate,t)));const r=e?.chainId;r&&(n=n.filter(e=>(0,d.isHexEqual)(e.chainId,r)));const s=e?.tags;return s&&s.length>0&&(n=n.filter(e=>s.every(t=>e.tags.includes(t)))),n}retrieve(e){return this.state.delegations[e]??null}chain(e){const t=[],n=this.retrieve(e);if(!n)return null;t.push(n);for(let e=n.delegation.authority;e!==u.ROOT_AUTHORITY;){const n=this.retrieve(e);if(!n)throw new Error("Invalid delegation chain");t.push(n),e=n.delegation.authority}return t}delete(e){if(!this.retrieve(e))return 0;const t=Object.entries(this.state.delegations),n=[e],r=[];for(;n.length>0;){const e=n.pop();t.filter(([t,n])=>n.delegation.authority===e).forEach(([e])=>{n.push(e)}),r.push(e)}return this.update(e=>{r.forEach(t=>{delete e.delegations[t]})}),r.length}}n.DelegationController=g,r=new WeakMap,s=new WeakMap}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/DelegationController.cjs"}],[1393,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SIGNABLE_DELEGATION_TYPED_DATA=n.ROOT_AUTHORITY=void 0,n.ROOT_AUTHORITY="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";n.SIGNABLE_DELEGATION_TYPED_DATA={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}],Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}]}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/constants.cjs"}],[1394,{"./DelegationController.cjs":1392},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DelegationController=void 0;var r=e("./DelegationController.cjs");Object.defineProperty(n,"DelegationController",{enumerable:!0,get:function(){return r.DelegationController}})}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/index.cjs"}],[1395,{"./constants.cjs":1393,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createTypedMessageParams=n.toDelegationStruct=n.isHexEqual=void 0;const r=e("@metamask/utils"),s=e("./constants.cjs");n.isHexEqual=function(e,t){return e.toLowerCase()===t.toLowerCase()};n.toDelegationStruct=e=>{const t=e.caveats.map(e=>({enforcer:(0,r.getChecksumAddress)(e.enforcer),terms:e.terms,args:e.args})),n="0x"===e.salt?0n:BigInt(e.salt);return{delegate:(0,r.getChecksumAddress)(e.delegate),delegator:(0,r.getChecksumAddress)(e.delegator),authority:e.authority,caveats:t,salt:n,signature:e.signature}},n.createTypedMessageParams=function(e){const{chainId:t,from:r,delegation:o,verifyingContract:i}=e;return{data:{types:s.SIGNABLE_DELEGATION_TYPED_DATA,primaryType:"Delegation",domain:{chainId:t,name:"DelegationManager",version:"1",verifyingContract:i},message:(0,n.toDelegationStruct)(o)},from:r}}}}},{package:"@metamask/delegation-controller",file:"node_modules/@metamask/delegation-controller/dist/utils.cjs"}],[1397,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r={DelegationManager:"0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",MultiSigDeleGatorImpl:"0x56a9EdB16a0105eb5a4C54f4C062e2868844f3A7",HybridDeleGatorImpl:"0x48dBe696A4D990079e039489bA2053B36E8FFEC4",EIP7702StatelessDeleGatorImpl:"0x63c0c19a282a1B52b07dD5a65b58948A07DAE32B",AllowedCalldataEnforcer:"0xc2b0d624c1c4319760C96503BA27C347F3260f55",AllowedMethodsEnforcer:"0x2c21fD0Cb9DC8445CB3fb0DC5E7Bb0Aca01842B5",AllowedTargetsEnforcer:"0x7F20f61b1f09b08D970938F6fa563634d65c4EeB",BlockNumberEnforcer:"0x5d9818dF0AE3f66e9c3D0c5029DAF99d1823ca6c",DeployedEnforcer:"0x24ff2AA430D53a8CD6788018E902E098083dcCd2",ERC20BalanceChangeEnforcer:"0xcdF6aB796408598Cea671d79506d7D48E97a5437",ERC20TransferAmountEnforcer:"0xf100b0819427117EcF76Ed94B358B1A5b5C6D2Fc",ERC20PeriodTransferEnforcer:"0x474e3Ae7E169e940607cC624Da8A15Eb120139aB",ERC20StreamingEnforcer:"0x56c97aE02f233B29fa03502Ecc0457266d9be00e",ERC721BalanceChangeEnforcer:"0x8aFdf96eDBbe7e1eD3f5Cd89C7E084841e12A09e",ERC721TransferEnforcer:"0x3790e6B7233f779b09DA74C72b6e94813925b9aF",ERC1155BalanceChangeEnforcer:"0x63c322732695cAFbbD488Fc6937A0A7B66fC001A",ExactCalldataBatchEnforcer:"0x982FD5C86BBF425d7d1451f974192d4525113DfD",ExactCalldataEnforcer:"0x99F2e9bF15ce5eC84685604836F71aB835DBBdED",ExactExecutionBatchEnforcer:"0x1e141e455d08721Dd5BCDA1BaA6Ea5633Afd5017",ExactExecutionEnforcer:"0x146713078D39eCC1F5338309c28405ccf85Abfbb",IdEnforcer:"0xC8B5D93463c893401094cc70e66A206fb5987997",LimitedCallsEnforcer:"0x04658B29F6b82ed55274221a06Fc97D318E25416",NativeBalanceChangeEnforcer:"0xbD7B277507723490Cd50b12EaaFe87C616be6880",ArgsEqualityCheckEnforcer:"0x44B8C6ae3C304213c3e298495e12497Ed3E56E41",NativeTokenPaymentEnforcer:"0x4803a326ddED6dDBc60e659e5ed12d85c7582811",NativeTokenTransferAmountEnforcer:"0xF71af580b9c3078fbc2BBF16FbB8EEd82b330320",NativeTokenStreamingEnforcer:"0xD10b97905a320b13a0608f7E9cC506b56747df19",NativeTokenPeriodTransferEnforcer:"0x9BC0FAf4Aca5AE429F4c06aEEaC517520CB16BD9",NonceEnforcer:"0xDE4f2FAC4B3D87A1d9953Ca5FC09FCa7F366254f",OwnershipTransferEnforcer:"0x7EEf9734E7092032B5C56310Eb9BbD1f4A524681",RedeemerEnforcer:"0xE144b0b2618071B4E56f746313528a669c7E65c5",SpecificActionERC20TransferBatchEnforcer:"0x6649b61c873F6F9686A1E1ae9ee98aC380c7bA13",TimestampEnforcer:"0x1046bb45C8d673d4ea75321280DB34899413c069",ValueLteEnforcer:"0x92Bf12322527cAA612fd31a0e810472BBB106A8F",MultiTokenPeriodEnforcer:"0xFB2f1a9BD76d3701B730E5d69C3219D42D80eBb7"},s={DelegationManager:"0x56D56e07e3d6Ee5a24e30203A37a0a460f42D7A3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0xd1f421EDbA5e3FA9efe3874827114b20C5BEC40C",HybridDeleGatorImpl:"0x941f3a016F8726d5643Ce62452d0D78492D42b42",AllowedCalldataEnforcer:"0xff71d60f3208469cBCE0859717B5198042DCB3F3",AllowedMethodsEnforcer:"0xe32C2561792e8446Abe73B9f557B881C13906186",AllowedTargetsEnforcer:"0x06aaE4c67EEA95277c46Bf79b1583d4a01772D22",BlockNumberEnforcer:"0x8E470D2Ae278457b42d2405E0B8Cd4BE21Ed9045",DeployedEnforcer:"0xf9088f013dBD9ebb7Cebd66fEB48253c6Ac5a820",ERC20BalanceGteEnforcer:"0xB7B6f32ec6343261D814e55Ed8C5925d91Cab861",ERC20TransferAmountEnforcer:"0x9A069b18032B31429A363AeCFb1B6A0564b44471",IdEnforcer:"0x91015c3b9D9523966eD2399885e5Df7A567f916c",LimitedCallsEnforcer:"0xe694bFfffEA3E85923b1210b37e6a0175e910863",NonceEnforcer:"0xE83BCFD8bBE672A96747e831050a91cf44F4F87A",TimestampEnforcer:"0x550FdD13eEBC1f22ea2a2480024BacBF0Ad7e5CE",ValueLteEnforcer:"0xBE32a6DB7471F63BB168C088c57Db01AfAe87967",NativeTokenTransferAmountEnforcer:"0x5eD3833d7B957A8DB8A461c3AF2d668Ec25382E0",NativeBalanceGteEnforcer:"0x376a98860E210DdEda3689fb39565592c563cB0A",ArgsEqualityCheckEnforcer:"0x7378dE585998d3E18Ce147867C335C25B3dB8Ee5",NativeTokenPaymentEnforcer:"0x87Fe18EbF99e42fcE8A03a25F1d20E119407f8e7",RedeemerEnforcer:"0x926672b130D1EF60A9d6b11D2048d121b30f40C1"},o={DelegationManager:"0xbe4138886cb096bdc1b930f2f0ca7892aa234d78",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0x11f555af5844d85bfcf5d61d2a22866527eb585a",HybridDeleGatorImpl:"0xd6edd1256deccb2b06bdecef92dc16bcf26e531b",AllowedCalldataEnforcer:"0x48db3835a873d64a4af2c09f014052407c003bd7",AllowedMethodsEnforcer:"0xfd731951bf1c52afccee3e6f14ab656475b76dd4",AllowedTargetsEnforcer:"0xbc8673c0afa52d86d991c06881e55b2966920564",BlockNumberEnforcer:"0xc15faffa0d879b9263c15a46ce31eacfa2e0e8ae",DeployedEnforcer:"0x5accb9559b56a6c1e3f90e342c85c42d93720d43",ERC20BalanceGteEnforcer:"0xb5d6b1ec6d868a3bae5b7f48178eaa2686a7a087",ERC20TransferAmountEnforcer:"0x92ac423b9c111962179a6242e1adb58d02c103be",IdEnforcer:"0x34152d9f3f8f74338d50703e780389e829b4abac",LimitedCallsEnforcer:"0x4b3adad4a328bee8ba17b86074d92fe7372180cd",NonceEnforcer:"0x2f32ff3fc3086d7f63f16fe8d0065390d460b40d",TimestampEnforcer:"0x78e05f779490c24bf3bfa135b4112e7003b321cd",ValueLteEnforcer:"0xfc20ede0a1132e839fbda9d7ed3904ff3c89540f"},i={arbitrum:42161,arbitrumNova:42170,base:8453,berachain:80094,bsc:56,gnosis:100,ink:57073,linea:59144,mainnet:1,monad:143,optimism:10,polygon:137,sei:1329,sonic:146,unichain:130,bscTestnet:97,arbitrumSepolia:421614,baseSepolia:84532,berachainBepolia:80069,chiado:10200,citreaTestnet:5115,hoodiTestnet:560048,inkSepolia:763373,lineaSepolia:59141,megaEthTestnet:6342,monadTestnet:10143,optimismSepolia:11155420,polygonAmoy:80002,seiTestnet:1328,sepolia:11155111,sonicTestnet:14601,unichainSepolia:1301,lineaGoerli:59140},a={"1.0.0":{[i.optimism]:o,[i.polygon]:o,[i.base]:o,[i.arbitrum]:o,[i.linea]:o,[i.sepolia]:{...o,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"},[i.lineaSepolia]:{...o,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"}},"1.1.0":{[i.arbitrum]:s,[i.base]:s,[i.linea]:s,[i.optimism]:s,[i.polygon]:s,[i.sepolia]:s,[i.lineaSepolia]:s,[i.baseSepolia]:{...s,SimpleFactory:"0xE8eA1DE8D6AfE400B7C8C1A81B7C29B7876b4d02"}},"1.3.0":{[i.mainnet]:r,[i.polygon]:r,[i.bsc]:r,[i.optimism]:r,[i.arbitrum]:r,[i.ink]:r,[i.linea]:r,[i.base]:r,[i.gnosis]:r,[i.berachain]:r,[i.unichain]:r,[i.arbitrumNova]:r,[i.sei]:r,[i.sonic]:r,[i.monad]:r,[i.bscTestnet]:r,[i.citreaTestnet]:r,[i.megaEthTestnet]:r,[i.chiado]:r,[i.lineaSepolia]:r,[i.berachainBepolia]:r,[i.baseSepolia]:r,[i.arbitrumSepolia]:r,[i.sepolia]:r,[i.optimismSepolia]:r,[i.unichainSepolia]:r,[i.polygonAmoy]:r,[i.inkSepolia]:r,[i.monadTestnet]:r,[i.seiTestnet]:r,[i.sonicTestnet]:r,[i.hoodiTestnet]:r}};n.CHAIN_ID=i,n.DELEGATOR_CONTRACTS=a}}},{package:"@metamask/delegation-deployments",file:"node_modules/@metamask/delegation-deployments/dist/index.cjs"}],[14,{"../controllers/account-order":210},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountOrderControllerInit=void 0;var r=e("../controllers/account-order");n.AccountOrderControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AccountOrderController({messenger:e,state:t.AccountOrderController})})}}},{package:"$root$",file:"app/scripts/controller-init/account-order-controller-init.ts"}],[140,{"./cronjob-controller-messenger":138,"./execution-service-messenger":139,"./multichain-router-messenger":141,"./rate-limit-controller-messenger":142,"./snap-controller-messenger":143,"./snap-insights-controller-messenger":144,"./snap-interface-controller-messenger":145,"./snaps-name-provider-messenger":146,"./snaps-registry-messenger":147,"./websocket-service-messenger":148},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getCronjobControllerMessenger",{enumerable:!0,get:function(){return r.getCronjobControllerMessenger}}),Object.defineProperty(n,"getExecutionServiceMessenger",{enumerable:!0,get:function(){return s.getExecutionServiceMessenger}}),Object.defineProperty(n,"getMultichainRouterMessenger",{enumerable:!0,get:function(){return o.getMultichainRouterMessenger}}),Object.defineProperty(n,"getRateLimitControllerInitMessenger",{enumerable:!0,get:function(){return i.getRateLimitControllerInitMessenger}}),Object.defineProperty(n,"getRateLimitControllerMessenger",{enumerable:!0,get:function(){return i.getRateLimitControllerMessenger}}),Object.defineProperty(n,"getSnapControllerInitMessenger",{enumerable:!0,get:function(){return a.getSnapControllerInitMessenger}}),Object.defineProperty(n,"getSnapControllerMessenger",{enumerable:!0,get:function(){return a.getSnapControllerMessenger}}),Object.defineProperty(n,"getSnapInsightsControllerMessenger",{enumerable:!0,get:function(){return c.getSnapInsightsControllerMessenger}}),Object.defineProperty(n,"getSnapInterfaceControllerMessenger",{enumerable:!0,get:function(){return l.getSnapInterfaceControllerMessenger}}),Object.defineProperty(n,"getSnapsNameProviderMessenger",{enumerable:!0,get:function(){return u.getSnapsNameProviderMessenger}}),Object.defineProperty(n,"getSnapsRegistryMessenger",{enumerable:!0,get:function(){return d.getSnapsRegistryMessenger}}),Object.defineProperty(n,"getWebSocketServiceMessenger",{enumerable:!0,get:function(){return p.getWebSocketServiceMessenger}});var r=e("./cronjob-controller-messenger"),s=e("./execution-service-messenger"),o=e("./multichain-router-messenger"),i=e("./rate-limit-controller-messenger"),a=e("./snap-controller-messenger"),c=e("./snap-insights-controller-messenger"),l=e("./snap-interface-controller-messenger"),u=e("./snaps-name-provider-messenger"),d=e("./snaps-registry-messenger"),p=e("./websocket-service-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/index.ts"}],[141,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMultichainRouterMessenger=function(e){const t=new r.Messenger({namespace:"MultichainRouter",parent:e});return e.delegate({messenger:t,actions:["SnapController:getAll","SnapController:handleRequest","PermissionController:getPermissions","AccountsController:listMultichainAccounts"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/multichain-router-messenger.ts"}],[142,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRateLimitControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"RateLimitController",parent:e});return e.delegate({messenger:t,actions:["SubjectMetadataController:getState","NotificationServicesController:updateMetamaskNotificationsList"]}),t},n.getRateLimitControllerMessenger=function(e){return new r.Messenger({namespace:"RateLimitController",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/rate-limit-controller-messenger.ts"}],[143,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SnapControllerInit",parent:e});return e.delegate({messenger:t,actions:["KeyringController:getKeyringsByType","PreferencesController:getState","MetaMetricsController:trackEvent","SnapController:setClientActive","OnboardingController:getState"],events:["KeyringController:lock","KeyringController:unlock","OnboardingController:stateChange"]}),t},n.getSnapControllerMessenger=function(e){const t=new r.Messenger({namespace:"SnapController",parent:e});return e.delegate({messenger:t,events:["ExecutionService:unhandledError","ExecutionService:outboundRequest","ExecutionService:outboundResponse","KeyringController:lock"],actions:["PermissionController:getEndowments","PermissionController:getPermissions","PermissionController:hasPermission","PermissionController:hasPermissions","PermissionController:requestPermissions","PermissionController:revokeAllPermissions","PermissionController:revokePermissions","PermissionController:revokePermissionForAllSubjects","PermissionController:getSubjectNames","PermissionController:updateCaveat","ApprovalController:addRequest","ApprovalController:updateRequestState","PermissionController:grantPermissions","SubjectMetadataController:getSubjectMetadata","SubjectMetadataController:addSubjectMetadata","ExecutionService:executeSnap","ExecutionService:terminateSnap","ExecutionService:terminateAllSnaps","ExecutionService:handleRpcRequest","NetworkController:getNetworkClientById","SelectedNetworkController:getNetworkClientIdForDomain","SnapsRegistry:get","SnapsRegistry:getMetadata","SnapsRegistry:update","SnapsRegistry:resolveVersion","SnapInterfaceController:createInterface","SnapInterfaceController:getInterface"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-controller-messenger.ts"}],[144,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapInsightsControllerMessenger=function(e){const t=new r.Messenger({namespace:"SnapInsightsController",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest","SnapController:getAll","PermissionController:getPermissions","SnapInterfaceController:deleteInterface"],events:["TransactionController:unapprovedTransactionAdded","TransactionController:transactionStatusUpdated","SignatureController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-insights-controller-messenger.ts"}],[145,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapInterfaceControllerMessenger=function(e){const t=new r.Messenger({namespace:"SnapInterfaceController",parent:e});return e.delegate({messenger:t,actions:["PhishingController:maybeUpdateState","PhishingController:testOrigin","ApprovalController:hasRequest","ApprovalController:acceptRequest","SnapController:get","MultichainAssetsController:getState","AccountsController:getSelectedMultichainAccount","AccountsController:getAccountByAddress","AccountsController:listMultichainAccounts"],events:["NotificationServicesController:notificationsListUpdated"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snap-interface-controller-messenger.ts"}],[146,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapsNameProviderMessenger=function(e){const t=new r.Messenger({namespace:"SnapsNameProvider",parent:e});return e.delegate({messenger:t,actions:["SnapController:getAll","SnapController:get","SnapController:handleRequest","PermissionController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snaps-name-provider-messenger.ts"}],[147,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapsRegistryMessenger=function(e){return new r.Messenger({namespace:"SnapsRegistry",parent:e})};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/snaps-registry-messenger.ts"}],[148,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getWebSocketServiceMessenger=function(e){const t=new r.Messenger({namespace:"WebSocketService",parent:e});return e.delegate({messenger:t,actions:["SnapController:handleRequest"],events:["SnapController:snapUpdated","SnapController:snapUninstalled","SnapController:snapInstalled"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/snaps/websocket-service-messenger.ts"}],[149,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSubjectMetadataControllerMessenger=function(e){const t=new r.Messenger({namespace:"SubjectMetadataController",parent:e});return e.delegate({messenger:t,actions:["PermissionController:hasPermissions"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subject-metadata-controller-messenger.ts"}],[15,{"@metamask/assets-controllers":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTrackerControllerInit=void 0;var r=e("@metamask/assets-controllers");n.AccountTrackerControllerInit=({controllerMessenger:e,initMessenger:t,getController:n})=>({persistedStateKey:null,memStateKey:null,controller:new r.AccountTrackerController({messenger:e,getStakedBalanceForChain:(e,t)=>n("AssetsContractController").getStakedBalanceForChain(e,t),includeStakedAssets:!1,allowExternalServices:()=>{const{useExternalServices:e}=t.call("PreferencesController:getState");return e},accountsApiChainIds:()=>{var e;const n=t.call("RemoteFeatureFlagController:getState"),r=null==n||null===(e=n.remoteFeatureFlags)||void 0===e?void 0:e.assetsAccountApiBalances;return Array.isArray(r)?r:[]},fetchingEnabled:()=>n("OnboardingController").state.completedOnboarding})})}}},{package:"$root$",file:"app/scripts/controller-init/account-tracker-controller-init.ts"}],[150,{"./subscription-controller-messenger":151,"./subscription-service-messenger":152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"getSubscriptionControllerInitMessenger",{enumerable:!0,get:function(){return r.getSubscriptionControllerInitMessenger}}),Object.defineProperty(n,"getSubscriptionControllerMessenger",{enumerable:!0,get:function(){return r.getSubscriptionControllerMessenger}}),Object.defineProperty(n,"getSubscriptionServiceMessenger",{enumerable:!0,get:function(){return s.getSubscriptionServiceMessenger}});var r=e("./subscription-controller-messenger"),s=e("./subscription-service-messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/index.ts"}],[151,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSubscriptionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SubscriptionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AuthenticationController:getBearerToken"]}),t},n.getSubscriptionControllerMessenger=function(e){const t=new r.Messenger({namespace:"SubscriptionController",parent:e});return e.delegate({messenger:t,events:["AuthenticationController:stateChange"],actions:["AuthenticationController:getBearerToken","AuthenticationController:performSignOut"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/subscription-controller-messenger.ts"}],[152,{"../../../services/subscription/types":583,"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSubscriptionServiceMessenger=function(e){const t=new r.Messenger({namespace:s.SERVICE_NAME,parent:e});return e.delegate({messenger:t,actions:["SubscriptionController:getPricing","SubscriptionController:getSubscriptions","SubscriptionController:startShieldSubscriptionWithCard","SubscriptionController:updatePaymentMethod","SubscriptionController:getCryptoApproveTransactionParams","SubscriptionController:getBillingPortalUrl","SubscriptionController:submitSponsorshipIntents","SubscriptionController:getState","AppStateController:getState","AuthenticationController:getBearerToken","TransactionController:getTransactions","AccountsController:getState","PreferencesController:getState","SmartTransactionsController:getState","NetworkController:getState","SwapsController:getState","MetaMetricsController:trackEvent","KeyringController:getState"]}),t};var r=e("@metamask/messenger"),s=e("../../../services/subscription/types")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/subscription/subscription-service-messenger.ts"}],[153,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSwapsControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"SwapsControllerInit",parent:e});return e.delegate({messenger:t,actions:["MetaMetricsController:trackEvent","NetworkController:getState"]}),t},n.getSwapsControllerMessenger=function(e){const t=new r.Messenger({namespace:"SwapsController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","TokenRatesController:getState"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/swaps-controller-messenger.ts"}],[154,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenBalancesControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenBalancesControllerInit",parent:e});return e.delegate({messenger:t,actions:["PreferencesController:getState","RemoteFeatureFlagController:getState"]}),t},n.getTokenBalancesControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenBalancesController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getState","NetworkController:getNetworkClientById","TokensController:getState","PreferencesController:getState","AccountsController:getSelectedAccount","AccountsController:listAccounts","AccountTrackerController:getState","AccountTrackerController:updateNativeBalances","AccountTrackerController:updateStakedBalances","TokenDetectionController:addDetectedTokensViaWs"],events:["PreferencesController:stateChange","TokensController:stateChange","NetworkController:stateChange","KeyringController:accountRemoved","AccountActivityService:statusChanged","AccountActivityService:balanceUpdated"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-balances-controller-messenger.ts"}],[155,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenDetectionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenDetectionControllerInit",parent:e});return e.delegate({messenger:t,actions:["AssetsContractController:getBalancesInSingleCall","MetaMetricsController:trackEvent","PreferencesController:getState"]}),t},n.getTokenDetectionControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenDetectionController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccount","AccountsController:getSelectedAccount","KeyringController:getState","NetworkController:getNetworkClientById","NetworkController:getNetworkConfigurationByNetworkClientId","NetworkController:getState","PreferencesController:getState","TokenListController:getState","TokensController:getState","TokensController:addDetectedTokens","TokensController:addTokens","NetworkController:findNetworkClientIdByChainId"],events:["AccountsController:selectedEvmAccountChange","KeyringController:lock","KeyringController:unlock","NetworkController:networkDidChange","PreferencesController:stateChange","TokenListController:stateChange","TransactionController:transactionConfirmed"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-detection-controller-messenger.ts"}],[156,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenListControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokenListControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getState","PreferencesController:getState"],events:["PreferencesController:stateChange"]}),t},n.getTokenListControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokenListController",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById"],events:["NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/token-list-controller-messenger.ts"}],[157,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokensControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TokensControllerInit",parent:e});return e.delegate({messenger:t,actions:["NetworkController:getNetworkClientById","NetworkController:getSelectedNetworkClient","NetworkController:getState"]}),t},n.getTokensControllerMessenger=function(e){const t=new r.Messenger({namespace:"TokensController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getAccount","AccountsController:getSelectedAccount","AccountsController:listAccounts","ApprovalController:addRequest","NetworkController:getNetworkClientById"],events:["AccountsController:selectedEvmAccountChange","KeyringController:accountRemoved","NetworkController:networkDidChange","NetworkController:stateChange","PreferencesController:stateChange","TokenListController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/tokens-controller-messenger.ts"}],[158,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"TransactionControllerInit",parent:e});return e.delegate({messenger:t,events:["SmartTransactionsController:smartTransaction","TransactionController:transactionApproved","TransactionController:transactionConfirmed","TransactionController:transactionDropped","TransactionController:transactionFailed","TransactionController:transactionNewSwapApproval","TransactionController:transactionNewSwap","TransactionController:transactionRejected","TransactionController:transactionSubmitted","TransactionController:postTransactionBalanceUpdated","TransactionController:unapprovedTransactionAdded"],actions:["ApprovalController:acceptRequest","ApprovalController:addRequest","ApprovalController:endFlow","ApprovalController:startFlow","ApprovalController:updateRequestState","AppStateController:getState","AuthenticationController:getBearerToken","DelegationController:signDelegation","InstitutionalSnapController:beforeCheckPendingTransactionHook","InstitutionalSnapController:publishHook","KeyringController:signEip7702Authorization","KeyringController:signTypedMessage","NetworkController:getEIP1559Compatibility","RemoteFeatureFlagController:getState","SwapsController:setApproveTxId","SwapsController:setTradeTxId","TransactionController:estimateGas","TransactionController:getState","SubscriptionController:getSubscriptionByProduct","SubscriptionService:submitSubscriptionSponsorshipIntent"]}),t},n.getTransactionControllerMessenger=function(e){const t=new r.Messenger({namespace:"TransactionController",parent:e});return e.delegate({messenger:t,actions:["AccountsController:getSelectedAccount","AccountsController:getState","ApprovalController:addRequest","KeyringController:signEip7702Authorization","NetworkController:findNetworkClientIdByChainId","NetworkController:getNetworkClientById","RemoteFeatureFlagController:getState"],events:["NetworkController:stateChange"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/transaction-controller-messenger.ts"}],[159,{"@metamask/messenger":2167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUserOperationControllerInitMessenger=function(e){const t=new r.Messenger({namespace:"UserOperationControllerInit",parent:e});return e.delegate({messenger:t,actions:["TransactionController:emulateNewTransaction","TransactionController:emulateTransactionUpdate"]}),t},n.getUserOperationControllerMessenger=function(e){const t=new r.Messenger({namespace:"UserOperationController",parent:e});return e.delegate({messenger:t,actions:["ApprovalController:addRequest","NetworkController:getNetworkClientById","KeyringController:prepareUserOperation","KeyringController:patchUserOperation","KeyringController:signUserOperation"]}),t};var r=e("@metamask/messenger")}}},{package:"$root$",file:"app/scripts/controller-init/messengers/user-operation-controller-messenger.ts"}],[16,{"@metamask/accounts-controller":1190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountsControllerInit=void 0;var r=e("@metamask/accounts-controller");n.AccountsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AccountsController({messenger:e,state:t.AccountsController})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts-controller-init.ts"}],[160,{"../../../shared/lib/sentry":5711,"../controllers/metametrics-controller":217,"../lib/segment":315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsControllerInit=void 0;var r,s=(r=e("../controllers/metametrics-controller"))&&r.__esModule?r:{default:r},o=e("../lib/segment"),i=e("../../../shared/lib/sentry");n.MetaMetricsControllerInit=({controllerMessenger:e,extension:t,persistedState:n})=>({controller:new s.default({state:n.MetaMetricsController,messenger:e,version:"13.11.0",environment:"production",segment:o.segment,extension:t,captureException:i.captureException})})}}},{package:"$root$",file:"app/scripts/controller-init/metametrics-controller-init.ts"}],[161,{"../controllers/metametrics-data-deletion/metametrics-data-deletion":218,"../services/data-deletion-service":572},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsDataDeletionControllerInit=void 0;var r=e("../controllers/metametrics-data-deletion/metametrics-data-deletion"),s=e("../services/data-deletion-service");n.MetaMetricsDataDeletionControllerInit=({controllerMessenger:e,persistedState:t})=>{const n=new s.DataDeletionService;return{controller:new r.MetaMetricsDataDeletionController({messenger:e,state:t.MetaMetricsDataDeletionController,dataDeletionService:n})}}}}},{package:"$root$",file:"app/scripts/controller-init/metametrics-data-deletion-controller-init.ts"}],[162,{"./multichain-account-service-init":163,"./multichain-assets-controller-init":164,"./multichain-balances-controller-init":165,"./multichain-network-controller-init":166,"./multichain-rates-assets-controller-init":168,"./multichain-transactions-controller-init":169},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"MultichainAccountServiceInit",{enumerable:!0,get:function(){return r.MultichainAccountServiceInit}}),Object.defineProperty(n,"MultichainAssetsControllerInit",{enumerable:!0,get:function(){return s.MultichainAssetsControllerInit}}),Object.defineProperty(n,"MultichainAssetsRatesControllerInit",{enumerable:!0,get:function(){return c.MultichainAssetsRatesControllerInit}}),Object.defineProperty(n,"MultichainBalancesControllerInit",{enumerable:!0,get:function(){return o.MultichainBalancesControllerInit}}),Object.defineProperty(n,"MultichainNetworkControllerInit",{enumerable:!0,get:function(){return a.MultichainNetworkControllerInit}}),Object.defineProperty(n,"MultichainTransactionsControllerInit",{enumerable:!0,get:function(){return i.MultichainTransactionsControllerInit}});var r=e("./multichain-account-service-init"),s=e("./multichain-assets-controller-init"),o=e("./multichain-balances-controller-init"),i=e("./multichain-transactions-controller-init"),a=e("./multichain-network-controller-init"),c=e("./multichain-rates-assets-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/multichain/index.ts"}],[163,{"../../../../shared/lib/multichain-accounts/remote-feature-flag":5702,"../../../../shared/lib/multichain-feature-flags":5703,"../../lib/util":353,"@metamask/multichain-account-service":2179},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountServiceInit=void 0;var r=e("@metamask/multichain-account-service"),s=e("../../lib/util"),o=e("../../../../shared/lib/multichain-accounts/remote-feature-flag"),i=e("../../../../shared/lib/multichain-feature-flags");n.MultichainAccountServiceInit=({controllerMessenger:e,initMessenger:t})=>{var n,a;const c={maxConcurrency:1,discovery:{timeoutMs:2e3,maxAttempts:3,backOffMs:1e3},createAccounts:{timeoutMs:3e3}},l=new r.AccountProviderWrapper(e,new r.BtcAccountProvider(e,c)),u=new r.AccountProviderWrapper(e,new r.TrxAccountProvider(e,c)),d=new r.MultichainAccountService({messenger:e,providers:[l,u],providerConfigs:{[r.SOL_ACCOUNT_PROVIDER_NAME]:c}}),p=t.call("PreferencesController:getState");t.subscribe("PreferencesController:stateChange",(0,s.previousValueComparator)((e,n)=>{const{useExternalServices:r}=e,{useExternalServices:s}=n;if(r!==s){const{remoteFeatureFlags:e}=t.call("RemoteFeatureFlagController:getState"),n=null==e?void 0:e.enableMultichainAccountsState2;(0,o.isMultichainAccountsFeatureEnabled)(n,o.FEATURE_VERSION_2)&&d.setBasicFunctionality(s).catch(e=>{console.error("Failed to set basic functionality on MultichainAccountService:",e)})}return!0},p));const g=t.call("RemoteFeatureFlagController:getState"),h=(0,i.isMultichainFeatureEnabled)(null==g||null===(n=g.remoteFeatureFlags)||void 0===n?void 0:n.bitcoinAccounts);l.setEnabled(h);const m=(0,i.isMultichainFeatureEnabled)(null==g||null===(a=g.remoteFeatureFlags)||void 0===a?void 0:a.tronAccounts);return u.setEnabled(m),e.subscribe("RemoteFeatureFlagController:stateChange",(0,s.previousValueComparator)((e,t)=>{var n,r,s,o;const a=(0,i.isMultichainFeatureEnabled)(null==e||null===(n=e.remoteFeatureFlags)||void 0===n?void 0:n.bitcoinAccounts),c=(0,i.isMultichainFeatureEnabled)(null==t||null===(r=t.remoteFeatureFlags)||void 0===r?void 0:r.bitcoinAccounts);a!==c&&(l.setEnabled(c),c&&d.alignWallets().catch(e=>{console.error("Failed to align wallets after enabling Bitcoin provider:",e)}));const p=(0,i.isMultichainFeatureEnabled)(null==e||null===(s=e.remoteFeatureFlags)||void 0===s?void 0:s.tronAccounts),g=(0,i.isMultichainFeatureEnabled)(null==t||null===(o=t.remoteFeatureFlags)||void 0===o?void 0:o.tronAccounts);return p!==g&&(u.setEnabled(g),g&&d.alignWallets().catch(e=>{console.error("Failed to align wallets after enabling Tron provider:",e)})),!0},g)),{memStateKey:null,persistedStateKey:null,controller:d}}}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-account-service-init.ts"}],[164,{"@metamask/assets-controllers":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAssetsControllerInit=void 0;var r=e("@metamask/assets-controllers");n.MultichainAssetsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainAssetsController({messenger:e,state:t.MultichainAssetsController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-assets-controller-init.ts"}],[165,{"@metamask/assets-controllers":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainBalancesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.MultichainBalancesControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainBalancesController({messenger:e,state:t.MultichainBalancesController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-balances-controller-init.ts"}],[166,{"./multichain-network-service-init":167,"@metamask/multichain-network-controller":2207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkControllerInit=void 0;var r=e("@metamask/multichain-network-controller"),s=e("./multichain-network-service-init");n.MultichainNetworkControllerInit=({controllerMessenger:e,persistedState:t})=>{const n=(0,s.MultichainNetworkServiceInit)();return{controller:new r.MultichainNetworkController({messenger:e,state:t.MultichainNetworkController,networkService:n})}}}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-network-controller-init.ts"}],[167,{"@metamask/multichain-network-controller":2207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainNetworkServiceInit=void 0;var r=e("@metamask/multichain-network-controller");n.MultichainNetworkServiceInit=()=>new r.MultichainNetworkService({fetch:window.fetch.bind(window)})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-network-service-init.ts"}],[168,{"@metamask/assets-controllers":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAssetsRatesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.MultichainAssetsRatesControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainAssetsRatesController({messenger:e,state:t.MultichainAssetsRatesController,interval:18e4})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-rates-assets-controller-init.ts"}],[169,{"@metamask/multichain-transactions-controller":2212},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainTransactionsControllerInit=void 0;var r=e("@metamask/multichain-transactions-controller");n.MultichainTransactionsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.MultichainTransactionsController({messenger:e,state:t.MultichainTransactionsController})})}}},{package:"$root$",file:"app/scripts/controller-init/multichain/multichain-transactions-controller-init.ts"}],[17,{"../../../../shared/constants/metametrics":5613,"../../../../shared/lib/trace":5718,"@metamask/account-tree-controller":1183},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTreeControllerInit=void 0;var r=e("@metamask/account-tree-controller"),s=e("../../../../shared/lib/trace"),o=e("../../../../shared/constants/metametrics");n.AccountTreeControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:n})=>({controller:new r.AccountTreeController({messenger:e,state:t.AccountTreeController,config:{trace:s.trace,backupAndSync:{onBackupAndSyncEvent:e=>{n.call("MetaMetricsController:trackEvent",{category:o.MetaMetricsEventCategory.BackupAndSync,event:o.MetaMetricsEventName.ProfileActivityUpdated,properties:{event:e}})}},accountOrderCallbacks:{isHiddenAccount:e=>{const t=n.call("AccountsController:getAccount",e);if(!t)return!1;return n.call("AccountOrderController:getState").hiddenAccountList.includes(t.address)},isPinnedAccount:e=>{const t=n.call("AccountsController:getAccount",e);if(!t)return!1;return n.call("AccountOrderController:getState").pinnedAccountList.includes(t.address)}}}})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts/account-tree-controller-init.ts"}],[170,{"../../../shared/constants/network":5617,"../../../shared/constants/time":5635,"../../../shared/lib/network-utils":5708,"../../../shared/lib/sentry":5711,"../lib/network-controller/messenger-action-handlers":283,"@metamask/controller-utils":1383,"@metamask/network-controller":2227,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkControllerInit=n.ADDITIONAL_DEFAULT_NETWORKS=void 0;var r=e("@metamask/network-controller"),s=e("@metamask/controller-utils"),o=e("@metamask/utils"),i=e("../../../shared/constants/time"),a=e("../../../shared/lib/network-utils"),c=e("../lib/network-controller/messenger-action-handlers"),l=e("../../../shared/constants/network"),u=e("../../../shared/lib/sentry");const d=n.ADDITIONAL_DEFAULT_NETWORKS=[s.ChainId["megaeth-testnet"],s.ChainId["monad-testnet"]];n.NetworkControllerInit=({controllerMessenger:e,infuraProjectId:t,initMessenger:n,persistedState:p})=>{const g=n.call("RemoteFeatureFlagController:getState"),h=function(e){let t=e;if(!t){var n,i,a,c;t=(0,r.getDefaultNetworkControllerState)(d);const e=t.networkConfigurationsByChainId??{};let u;Object.values(e).forEach(e=>{const t=e.rpcEndpoints[0].networkClientId;(0,o.hasProperty)(s.BlockExplorerUrl,t)&&(e.blockExplorerUrls=[s.BlockExplorerUrl[t]]),e.defaultBlockExplorerUrlIndex=0}),e[l.CHAIN_IDS.MAINNET].rpcEndpoints[0].failoverUrls=(0,l.getFailoverUrlsForInfuraNetwork)("ethereum-mainnet"),e[l.CHAIN_IDS.LINEA_MAINNET].rpcEndpoints[0].failoverUrls=(0,l.getFailoverUrlsForInfuraNetwork)("linea-mainnet"),e[l.CHAIN_IDS.BASE].rpcEndpoints[0].failoverUrls=(0,l.getFailoverUrlsForInfuraNetwork)("base-mainnet"),null!==(n=e[l.CHAIN_IDS.ARBITRUM])&&void 0!==n&&null!==(n=n.rpcEndpoints)&&void 0!==n&&n[0]&&(e[l.CHAIN_IDS.ARBITRUM].rpcEndpoints[0].failoverUrls=(0,l.getFailoverUrlsForInfuraNetwork)("arbitrum-mainnet")),null!==(i=e[l.CHAIN_IDS.BSC])&&void 0!==i&&null!==(i=i.rpcEndpoints)&&void 0!==i&&i[0]&&(e[l.CHAIN_IDS.BSC].rpcEndpoints[0].failoverUrls=(0,l.getFailoverUrlsForInfuraNetwork)("bsc-mainnet")),null!==(a=e[l.CHAIN_IDS.OPTIMISM])&&void 0!==a&&null!==(a=a.rpcEndpoints)&&void 0!==a&&a[0]&&(e[l.CHAIN_IDS.OPTIMISM].rpcEndpoints[0].failoverUrls=(0,l.getFailoverUrlsForInfuraNetwork)("optimism-mainnet")),null!==(c=e[l.CHAIN_IDS.POLYGON])&&void 0!==c&&null!==(c=c.rpcEndpoints)&&void 0!==c&&c[0]&&(e[l.CHAIN_IDS.POLYGON].rpcEndpoints[0].failoverUrls=(0,l.getFailoverUrlsForInfuraNetwork)("polygon-mainnet")),e[l.CHAIN_IDS.MAINNET].name="Ethereum",e[l.CHAIN_IDS.LINEA_MAINNET].name="Linea",e[l.CHAIN_IDS.BASE].name="Base",e[l.CHAIN_IDS.ARBITRUM].name="Arbitrum",e[l.CHAIN_IDS.BSC].name="BNB Chain",e[l.CHAIN_IDS.OPTIMISM].name="OP",e[l.CHAIN_IDS.POLYGON].name="Polygon",delete e[l.CHAIN_IDS.SEI],u=e[l.CHAIN_IDS.MAINNET],t.selectedNetworkClientId=u.rpcEndpoints[u.defaultRpcEndpointIndex].networkClientId}return t.networkConfigurationsByChainId&&!Object.values(t.networkConfigurationsByChainId).flatMap(e=>e.rpcEndpoints.map(e=>e.networkClientId)).includes(t.selectedNetworkClientId)&&((0,u.captureException)(new Error(`NetworkController state is invalid: \`selectedNetworkClientId\` '${t.selectedNetworkClientId}' does not refer to an RPC endpoint within a network configuration`)),t.selectedNetworkClientId=t.networkConfigurationsByChainId[l.CHAIN_IDS.MAINNET].rpcEndpoints[0].networkClientId),t}(p.NetworkController),m=e=>e.remoteFeatureFlags.walletFrameworkRpcFailoverEnabled??!1,f=new r.NetworkController({messenger:e,state:h,infuraProjectId:t,getBlockTrackerOptions:()=>({pollingInterval:20*i.SECOND,retryTimeout:20*i.SECOND}),getRpcServiceOptions:e=>{const t=s.DEFAULT_MAX_RETRIES,n={fetch:globalThis.fetch.bind(globalThis),btoa:globalThis.btoa.bind(globalThis)},r={circuitBreakDuration:30*i.SECOND,maxRetries:t};return(0,a.getIsQuicknodeEndpointUrl)(e)?{...n,policyOptions:{...r,maxConsecutiveFailures:10*(t+1)}}:{...n,policyOptions:{...r,maxConsecutiveFailures:3*(t+1)}}},additionalDefaultNetworks:d,isRpcFailoverEnabled:m(g)});return n.subscribe("NetworkController:rpcEndpointUnavailable",async({chainId:e,endpointUrl:r,error:s})=>{(0,c.onRpcEndpointUnavailable)({chainId:e,endpointUrl:r,error:s,infuraProjectId:t,trackEvent:n.call.bind(n,"MetaMetricsController:trackEvent"),metaMetricsId:n.call("MetaMetricsController:getMetaMetricsId")})}),n.subscribe("NetworkController:rpcEndpointDegraded",async({chainId:e,endpointUrl:r,error:s})=>{(0,c.onRpcEndpointDegraded)({chainId:e,endpointUrl:r,error:s,infuraProjectId:t,trackEvent:n.call.bind(n,"MetaMetricsController:trackEvent"),metaMetricsId:n.call("MetaMetricsController:getMetaMetricsId")})}),n.subscribe("RemoteFeatureFlagController:stateChange",e=>{e?(console.log("Enabling RPC failover."),f.enableRpcFailover()):(console.log("Disabling RPC failover."),f.disableRpcFailover())},m),f.initializeProvider({lookupNetwork:!1}),{controller:f}}}}},{package:"$root$",file:"app/scripts/controller-init/network-controller-init.ts"}],[171,{"../../../../package.json":5593,"@metamask/notification-services-controller/notification-services":2248},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationServicesControllerInit=void 0;var r,s=e("@metamask/notification-services-controller/notification-services");const o=((r=e("../../../../package.json"))&&r.__esModule?r:{default:r}).default.version;n.NotificationServicesControllerInit=({controllerMessenger:e,persistedState:t,getController:n})=>({controller:new s.Controller({messenger:e,state:t.NotificationServicesController,env:{featureAnnouncements:{platform:"extension",spaceId:"jdkgyfmyd9sw",accessToken:"mAYNB_k65snv4AXW4o8ksZN8BwWDQF9702HKV7yBDZI",platformVersion:o},locale:()=>n("PreferencesController").state.currentLocale.replace("_","-")}})})}}},{package:"$root$",file:"app/scripts/controller-init/notifications/notification-services-controller-init.ts"}],[172,{"../../../../shared/constants/metametrics":5613,"../../../../shared/modules/mv3.utils":5744,"../../controllers/push-notifications":231,"@metamask/notification-services-controller/push-services":2269,"@metamask/notification-services-controller/push-services/web":2277,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getNormalisedLocale=n.NotificationServicesPushControllerInit=void 0;var r=e("@metamask/notification-services-controller/push-services"),s=e("@metamask/notification-services-controller/push-services/web"),o=e("@metamask/utils"),i=e("../../../../shared/modules/mv3.utils"),a=e("../../controllers/push-notifications"),c=e("../../../../shared/constants/metametrics");const l=e=>e.replace("_","-");n.getNormalisedLocale=l;n.NotificationServicesPushControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,getController:u})=>{const d=new r.Controller({messenger:e,state:{...r.defaultState,...n.NotificationServicesPushController},env:{apiKey:"AIzaSyAA6MJdRkQ00zNh_moTLwxCSxcg3vznbBM",authDomain:"notifications-faf39.firebaseapp.com",storageBucket:"notifications-faf39.appspot.com",projectId:"notifications-faf39",messagingSenderId:"824598429541",appId:"1:824598429541:web:3016d3c90f1f19a6beab8c",measurementId:"G-1FGDTTCWX5",vapidKey:"BBbjhCfHvwIqRsUrBvpfx0viLJIzWHp-beyw8-I124jeZlhNGDOegS_0_I029fFb2stzRuaNkCdTAf9F3I2m3wc"},config:{isPushFeatureEnabled:i.isManifestV3&&!0,platform:"extension",pushService:{createRegToken:s.createRegToken,deleteRegToken:s.deleteRegToken,subscribeToPushNotifications:(0,s.createSubscribeToPushNotifications)({messenger:e,onReceivedHandler:a.onPushNotificationReceived,onClickHandler:a.onPushNotificationClicked})},getLocale:()=>l(u("PreferencesController").state.currentLocale)}});return t.subscribe("NotificationServicesPushController:onNewNotifications",e=>{const n=(0,o.hasProperty)(e,"chain_id")?e.chain_id:null;t.call("MetaMetricsController:trackEvent",{category:c.MetaMetricsEventCategory.PushNotifications,event:c.MetaMetricsEventName.PushNotificationReceived,properties:{notification_id:e.id,notification_type:e.type,chain_id:n}})}),t.subscribe("NotificationServicesPushController:pushNotificationClicked",e=>{var n;t.call("MetaMetricsController:trackEvent",{category:c.MetaMetricsEventCategory.PushNotifications,event:c.MetaMetricsEventName.PushNotificationClicked,properties:{notification_id:e.id,notification_type:e.type,..."notification_type"in e&&"on-chain"===e.notification_type&&null!==(n=e.payload)&&void 0!==n&&n.chain_id?{chain_id:e.payload.chain_id}:undefined,data:e}})}),{controller:d}}}}},{package:"$root$",file:"app/scripts/controller-init/notifications/notification-services-push-controller-init.ts"}],[173,{"../controllers/onboarding":220},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnboardingControllerInit=void 0;var r,s=(r=e("../controllers/onboarding"))&&r.__esModule?r:{default:r};n.OnboardingControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new s.default({state:t.OnboardingController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/onboarding-controller-init.ts"}],[174,{"../controllers/permissions":224,"../controllers/permissions/snaps/specifications":226,"@metamask/permission-controller":2329},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PermissionControllerInit=void 0;var r=e("@metamask/permission-controller"),s=e("../controllers/permissions"),o=e("../controllers/permissions/snaps/specifications");n.PermissionControllerInit=({controllerMessenger:e,persistedState:t,initMessenger:n,getController:i})=>{const a=i("ApprovalController"),c=i("KeyringController");return{controller:new r.PermissionController({state:t.PermissionController,messenger:e,caveatSpecifications:(0,s.getCaveatSpecifications)({listAccounts:n.call.bind(n,"AccountsController:listAccounts"),findNetworkClientIdByChainId:n.call.bind(n,"NetworkController:findNetworkClientIdByChainId"),isNonEvmScopeSupported:n.call.bind(n,"MultichainRouter:isSupportedScope"),getNonEvmAccountAddresses:n.call.bind(n,"MultichainRouter:getSupportedAccounts")}),permissionSpecifications:{...(0,s.getPermissionSpecifications)(),...(0,o.getSnapPermissionSpecifications)(n,{addAndShowApprovalRequest:a.addAndShowApprovalRequest.bind(a),addNewKeyring:c.addNewKeyring.bind(c)})},unrestrictedMethods:s.unrestrictedMethods})}}}}},{package:"$root$",file:"app/scripts/controller-init/permission-controller-init.ts"}],[175,{"../../../shared/constants/permissions":5621,"@metamask/permission-log-controller":2338},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PermissionLogControllerInit=void 0;var r=e("@metamask/permission-log-controller"),s=e("../../../shared/constants/permissions");n.PermissionLogControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.PermissionLogController({messenger:e,state:t.PermissionLogController,restrictedMethods:new Set(Object.keys(s.RestrictedMethods))})})}}},{package:"$root$",file:"app/scripts/controller-init/permission-log-controller-init.ts"}],[176,{"@metamask/phishing-controller":2343,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PhishingControllerInit=void 0;var r=e("@metamask/phishing-controller");e("@metamask/utils");n.PhishingControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.PhishingController({messenger:e,state:t.PhishingController,hotlistRefreshInterval:undefined,stalelistRefreshInterval:undefined})})}}},{package:"$root$",file:"app/scripts/controller-init/phishing-controller-init.ts"}],[177,{"../controllers/preferences-controller":228},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PreferencesControllerInit=void 0;var r=e("../controllers/preferences-controller");n.PreferencesControllerInit=({controllerMessenger:e,persistedState:t,initLangCode:n})=>({controller:new r.PreferencesController({state:{currentLocale:n??"",...t.PreferencesController},messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/preferences-controller-init.ts"}],[1771,{"@metamask/keyring-controller":2110},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GetCallsStatusCode=n.EIP7682ErrorCode=n.EIP5792ErrorCode=n.SupportedCapabilities=n.MessageType=n.KEYRING_TYPES_SUPPORTING_7702=n.VERSION=void 0;const r=e("@metamask/keyring-controller");var s,o,i,a,c;n.VERSION="2.0.0",n.KEYRING_TYPES_SUPPORTING_7702=[r.KeyringTypes.hd,r.KeyringTypes.simple],function(e){e.SendTransaction="eth_sendTransaction"}(s||(n.MessageType=s={})),function(e){e.AuxiliaryFunds="auxiliaryFunds"}(o||(n.SupportedCapabilities=o={})),function(e){e[e.UnsupportedNonOptionalCapability=5700]="UnsupportedNonOptionalCapability",e[e.UnsupportedChainId=5710]="UnsupportedChainId",e[e.UnknownBundleId=5730]="UnknownBundleId",e[e.RejectedUpgrade=5750]="RejectedUpgrade"}(i||(n.EIP5792ErrorCode=i={})),function(e){e[e.UnsupportedAsset=5771]="UnsupportedAsset",e[e.UnsupportedChain=5772]="UnsupportedChain",e[e.MalformedRequiredAssets=5773]="MalformedRequiredAssets"}(a||(n.EIP7682ErrorCode=a={})),function(e){e[e.PENDING=100]="PENDING",e[e.CONFIRMED=200]="CONFIRMED",e[e.FAILED_OFFCHAIN=400]="FAILED_OFFCHAIN",e[e.REVERTED=500]="REVERTED",e[e.REVERTED_PARTIAL=600]="REVERTED_PARTIAL"}(c||(n.GetCallsStatusCode=c={}))}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/constants.cjs"}],[1772,{"../constants.cjs":1771,"@metamask/rpc-errors":2480,"@metamask/transaction-controller":2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCallsStatus=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/transaction-controller"),o=e("../constants.cjs");n.getCallsStatus=function(e,t){const n=e.call("TransactionController:getState").transactions.filter(e=>e.batchId===t);if(!n?.length)throw new r.JsonRpcError(o.EIP5792ErrorCode.UnknownBundleId,"No matching bundle found");const i=n[0],{chainId:a,txReceipt:c}=i,l=function(e){const{hash:t,status:n}=e;if(n===s.TransactionStatus.confirmed)return o.GetCallsStatusCode.CONFIRMED;if(n===s.TransactionStatus.failed)return t?o.GetCallsStatusCode.REVERTED:o.GetCallsStatusCode.FAILED_OFFCHAIN;if(n===s.TransactionStatus.dropped)return o.GetCallsStatusCode.REVERTED;return o.GetCallsStatusCode.PENDING}(i),u=c,d=u?.logs??[],p=u&&[{blockHash:u.blockHash,blockNumber:u.blockNumber,gasUsed:u.gasUsed,logs:d.map(e=>({address:e.address,data:e.data,topics:e.topics})),status:u.status,transactionHash:u.transactionHash}];return{version:o.VERSION,id:t,chainId:a,atomic:!0,status:l,receipts:p}}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/getCallsStatus.cjs"}],[1773,{"../constants.cjs":1771,"../utils.cjs":1780},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCapabilities=void 0;const r=e("../constants.cjs"),s=e("../utils.cjs");n.getCapabilities=async function(e,t,n,o){const{getDismissSmartAccountSuggestionEnabled:i,getIsSmartTransaction:a,isAtomicBatchSupported:c,isRelaySupported:l,getSendBundleSupportedChains:u,isAuxiliaryFundsSupported:d}=e;let p=o?.map(e=>e.toLowerCase());if(!p?.length){const e=t.call("NetworkController:getState").networkConfigurationsByChainId;p=Object.keys(e)}const g=await c({address:n,chainIds:p}),h=await async function(e,t,n,r,s,o){const i=o.call("PreferencesController:getState").useTransactionSimulations,a=await Promise.all(t.map(({chainId:e})=>e).map(e=>r(e))),c=await s(e),l=t.map((e,t)=>({...e,relaySupportedForChain:a[t]}));return e.reduce((e,t)=>{const r=l.find(({chainId:e})=>e===t)??{},{isSupported:s=!1,relaySupportedForChain:o}=r,a=n(t),u=c[t]??!1;return i&&(a&&u||s&&o)&&(e[t]={alternateGasFees:{supported:!0}}),e},{})}(p,g,a,l,u,t);return p.reduce((e,o)=>{const a=g.find(({chainId:e})=>e===o)??{},{delegationAddress:c,isSupported:l,upgradeContractAddress:u}=a,p=i();let h=!1;try{const e=(0,s.getAccountKeyringType)(n,t);h=r.KEYRING_TYPES_SUPPORTING_7702.includes(e)}catch{}if(!l&&!(!p&&u&&!c&&h))return e;const m=l?"supported":"ready",f=o;return e[f]===undefined&&(e[f]={}),e[f].atomic={status:m},h&&d(o)&&(e[f].auxiliaryFunds={supported:!0}),e},h)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/getCapabilities.cjs"}],[1774,{"../constants.cjs":1771,"../utils.cjs":1780,"@metamask/rpc-errors":2480,"@metamask/transaction-controller":2868,"@metamask/utils":2914,lodash:4635,uuid:5554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.processSendCalls=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/transaction-controller"),o=e("@metamask/utils"),i=e("lodash"),a=e("uuid"),c=e("../constants.cjs"),l=e("../utils.cjs");function u(e){const{version:t}=e;if(t!==c.VERSION)throw r.rpcErrors.invalidInput(`Version not supported: Got ${t}, expected ${c.VERSION}`)}function d(e,t){const{chainId:n}=e;if(n&&n.toLowerCase()!==t.toLowerCase())throw r.rpcErrors.invalidParams(`Chain ID must match the dApp selected network: Got ${n}, expected ${t}`)}function p(e,t,n){const{calls:s,capabilities:o,chainId:i}=e,a=[...Object.keys(o??{}).filter(e=>e!==c.SupportedCapabilities.AuxiliaryFunds.toString()&&!0!==o?.[e].optional),...s.flatMap(e=>Object.keys(e.capabilities??{}).filter(t=>t!==c.SupportedCapabilities.AuxiliaryFunds.toString()&&!0!==e.capabilities?.[t].optional))];if(a?.length)throw new r.JsonRpcError(c.EIP5792ErrorCode.UnsupportedNonOptionalCapability,`Unsupported non-optional capabilities: ${a.join(", ")}`);o?.auxiliaryFunds&&function({auxiliaryFunds:e,chainId:t,keyringType:n,isAuxiliaryFundsSupported:s}){if(e.optional)return;const o=c.KEYRING_TYPES_SUPPORTING_7702.includes(n);if(!o)throw new r.JsonRpcError(c.EIP5792ErrorCode.UnsupportedNonOptionalCapability,`Unsupported non-optional capability: ${c.SupportedCapabilities.AuxiliaryFunds}`);if(!s(t))throw new r.JsonRpcError(c.EIP7682ErrorCode.UnsupportedChain,`The wallet no longer supports auxiliary funds on the requested chain: ${t}`);if(!e?.requiredAssets)return;for(const t of e.requiredAssets)if("erc20"!==t.standard)throw new r.JsonRpcError(c.EIP7682ErrorCode.UnsupportedAsset,`The requested asset ${t.address} is not available through the wallets auxiliary fund system: unsupported token standard ${t.standard}`)}({auxiliaryFunds:o.auxiliaryFunds,chainId:i,keyringType:t,isAuxiliaryFundsSupported:n})}function g(e){if(e.capabilities?.auxiliaryFunds?.requiredAssets){const{requiredAssets:t}=e.capabilities.auxiliaryFunds,n=(0,i.groupBy)(t,e=>`${e.address.toLowerCase()}-${e.standard}`),r=Object.values(n).map(e=>{if(1===e.length)return e[0];const t=e.reduce((e,t)=>e+BigInt(t.amount),0n);return{...e[0],amount:(0,o.add0x)(t.toString(16))}});e.capabilities.auxiliaryFunds.requiredAssets=r}}n.processSendCalls=async function(e,t,n,i){const{addTransactionBatch:h,addTransaction:m,getDismissSmartAccountSuggestionEnabled:f,isAtomicBatchSupported:b,validateSecurity:w,isAuxiliaryFundsSupported:v}=e,{calls:y,from:C}=n,{networkClientId:M,origin:k}=i,S=y.map(e=>({params:e})),{chainId:A}=t.call("NetworkController:getNetworkClientById",M).configuration,I=C??t.call("AccountsController:getSelectedAccount").address,T=(0,a.v4)(),E=w.bind(null,T);let _;return _=1===Object.keys(S).length?await async function({addTransaction:e,chainId:t,from:n,messenger:r,networkClientId:i,origin:h,securityAlertId:m,sendCalls:f,transactions:b,validateSecurity:w,isAuxiliaryFundsSupported:v}){const y=(0,l.getAccountKeyringType)(n,r);!function(e,t,n,r){u(e),p(e,n,r),d(e,t)}(f,t,y,v);const C={from:n,...b[0].params,type:s.TransactionEnvelopeType.feeMarket},M={method:c.MessageType.SendTransaction,params:[C],origin:h};w(M,t),g(f);const k=function(){const e=(0,a.v4)(),t=new Uint8Array((0,a.parse)(e));return(0,o.bytesToHex)(t)}();return await e(C,{networkClientId:i,origin:h,securityAlertResponse:{securityAlertId:m},batchId:k}),k}({addTransaction:m,chainId:A,from:I,messenger:t,networkClientId:M,origin:k,securityAlertId:T,sendCalls:n,transactions:S,validateSecurity:E,isAuxiliaryFundsSupported:v}):await async function({addTransactionBatch:e,isAtomicBatchSupported:t,chainId:n,from:s,getDismissSmartAccountSuggestionEnabled:o,networkClientId:i,messenger:a,origin:h,sendCalls:m,securityAlertId:f,transactions:b,validateSecurity:w,isAuxiliaryFundsSupported:v}){const y=await t({address:s,chainIds:[n]}),C=y?.[0],M=(0,l.getAccountKeyringType)(s,a),k=o();(function(e,t,n,s,o,i){u(e),function(e,t,n){if(d(e,t),!n)throw new r.JsonRpcError(c.EIP5792ErrorCode.UnsupportedChainId,`EIP-7702 not supported on chain: ${t}`)}(e,t,s),p(e,o,i),function(e,t,n){if(t?.delegationAddress)return;if(e)throw new r.JsonRpcError(c.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade disabled by the user");if(!c.KEYRING_TYPES_SUPPORTING_7702.includes(n))throw new r.JsonRpcError(c.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported on account")}(n,s,o)})(m,n,k,C,M,v),g(m);const S=await e({from:s,networkClientId:i,origin:h,securityAlertId:f,transactions:b,validateSecurity:w});return S.batchId}({addTransactionBatch:h,isAtomicBatchSupported:b,chainId:A,from:I,getDismissSmartAccountSuggestionEnabled:f,messenger:t,networkClientId:M,origin:k,sendCalls:n,securityAlertId:T,transactions:S,validateSecurity:E,isAuxiliaryFundsSupported:v}),{id:_}}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/hooks/processSendCalls.cjs"}],[1775,{"./hooks/getCallsStatus.cjs":1772,"./hooks/getCapabilities.cjs":1773,"./hooks/processSendCalls.cjs":1774,"./methods/wallet_getCallsStatus.cjs":1776,"./methods/wallet_getCapabilities.cjs":1777,"./methods/wallet_sendCalls.cjs":1778},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetCapabilities=n.walletGetCallsStatus=n.walletSendCalls=n.getCapabilities=n.getCallsStatus=n.processSendCalls=void 0;var r=e("./hooks/processSendCalls.cjs");Object.defineProperty(n,"processSendCalls",{enumerable:!0,get:function(){return r.processSendCalls}});var s=e("./hooks/getCallsStatus.cjs");Object.defineProperty(n,"getCallsStatus",{enumerable:!0,get:function(){return s.getCallsStatus}});var o=e("./hooks/getCapabilities.cjs");Object.defineProperty(n,"getCapabilities",{enumerable:!0,get:function(){return o.getCapabilities}});var i=e("./methods/wallet_sendCalls.cjs");Object.defineProperty(n,"walletSendCalls",{enumerable:!0,get:function(){return i.walletSendCalls}});var a=e("./methods/wallet_getCallsStatus.cjs");Object.defineProperty(n,"walletGetCallsStatus",{enumerable:!0,get:function(){return a.walletGetCallsStatus}});var c=e("./methods/wallet_getCapabilities.cjs");Object.defineProperty(n,"walletGetCapabilities",{enumerable:!0,get:function(){return c.walletGetCapabilities}})}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/index.cjs"}],[1776,{"../types.cjs":1779,"../utils.cjs":1780,"@metamask/rpc-errors":2480},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetCallsStatus=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");n.walletGetCallsStatus=async function(e,t,{getCallsStatus:n}){if(!n)throw r.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.GetCallsStatusStruct);const i=e.params[0];t.result=await n(i,e)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_getCallsStatus.cjs"}],[1777,{"../types.cjs":1779,"../utils.cjs":1780,"@metamask/rpc-errors":2480},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetCapabilities=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");n.walletGetCapabilities=async function(e,t,{getAccounts:n,getCapabilities:i}){if(!i)throw r.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.GetCapabilitiesStruct);const a=e.params[0],c=e.params[1];await(0,o.validateAndNormalizeKeyholder)(a,e,{getAccounts:n});const l=await i(a,c,e);t.result=l}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_getCapabilities.cjs"}],[1778,{"../types.cjs":1779,"../utils.cjs":1780,"@metamask/rpc-errors":2480},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletSendCalls=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs"),o=e("../utils.cjs");n.walletSendCalls=async function(e,t,{getAccounts:n,processSendCalls:i}){if(!i)throw r.rpcErrors.methodNotSupported();(0,o.validateParams)(e.params,s.SendCallsStruct);const a=e.params[0],c=a.from?await(0,o.validateAndNormalizeKeyholder)(a.from,e,{getAccounts:n}):undefined,l={...a,from:c};t.result=await i(l,e)}}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/methods/wallet_sendCalls.cjs"}],[1779,{"@metamask/superstruct":2810,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SendCallsStruct=n.CapabilitiesStruct=n.GetCapabilitiesStruct=n.GetCallsStatusStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");n.GetCallsStatusStruct=(0,r.tuple)([s.StrictHexStruct]),n.GetCapabilitiesStruct=(0,r.tuple)([s.HexChecksumAddressStruct,(0,r.optional)((0,r.array)(s.StrictHexStruct))]);const o=(0,r.type)({address:(0,r.nonempty)(s.HexChecksumAddressStruct),amount:(0,r.nonempty)(s.StrictHexStruct),standard:(0,r.nonempty)((0,r.string)())});n.CapabilitiesStruct=(0,r.record)((0,r.string)(),(0,r.type)({optional:(0,r.optional)((0,r.boolean)()),requiredAssets:(0,r.optional)((0,r.array)(o))})),n.SendCallsStruct=(0,r.tuple)([(0,r.object)({version:(0,r.nonempty)((0,r.string)()),id:(0,r.optional)(s.StrictHexStruct),from:(0,r.optional)(s.HexChecksumAddressStruct),chainId:s.StrictHexStruct,atomicRequired:(0,r.boolean)(),calls:(0,r.array)((0,r.object)({to:(0,r.optional)(s.HexChecksumAddressStruct),data:(0,r.optional)(s.StrictHexStruct),value:(0,r.optional)(s.StrictHexStruct),capabilities:(0,r.optional)(n.CapabilitiesStruct)})),capabilities:(0,r.optional)(n.CapabilitiesStruct)})])}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/types.cjs"}],[178,{"@metamask/assets-controllers":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RatesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.RatesControllerInit=({controllerMessenger:e,persistedState:t})=>({memStateKey:"MultichainRatesController",persistedStateKey:"MultichainRatesController",controller:new r.RatesController({state:t.MultichainRatesController,messenger:e,includeUsdRate:!0})})}}},{package:"$root$",file:"app/scripts/controller-init/rates-controller-init.ts"}],[1780,{"./constants.cjs":1771,"@metamask/rpc-errors":2480,"@metamask/superstruct":2810},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resemblesAddress=n.validateParams=n.validateAndNormalizeKeyholder=n.getAccountKeyringType=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),o=e("./constants.cjs");function i(e){return 42===e.length}n.getAccountKeyringType=function(e,t){const{accounts:n}=t.call("AccountsController:getState").internalAccounts,s=Object.values(n).find(t=>t.address.toLowerCase()===e.toLowerCase()),i=s?.metadata?.keyring?.type;if(!i)throw new r.JsonRpcError(o.EIP5792ErrorCode.RejectedUpgrade,"EIP-7702 upgrade not supported as account type is unknown");return i},n.validateAndNormalizeKeyholder=async function(e,t,{getAccounts:n}){if("string"==typeof e&&e.length>0&&i(e)){const s=(await n(t)).map(e=>e.toLowerCase()),o=e.toLowerCase();if(s.includes(o))return o;throw r.providerErrors.unauthorized()}throw r.rpcErrors.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})},n.validateParams=function(e,t){const[n]=(0,s.validate)(e,t);if(n)throw r.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map(e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`).join("\n")}`}(n,"Invalid params"))},n.resemblesAddress=i}}},{package:"@metamask/eip-5792-middleware",file:"node_modules/@metamask/eip-5792-middleware/dist/utils.cjs"}],[1781,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DELEGATION_INDICATOR_PREFIX=n.METHOD_NAMES=void 0,n.METHOD_NAMES={UPGRADE_ACCOUNT:"wallet_upgradeAccount",GET_ACCOUNT_UPGRADE_STATUS:"wallet_getAccountUpgradeStatus"},n.DELEGATION_INDICATOR_PREFIX="0xef0100"}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/constants.cjs"}],[1782,{"./constants.cjs":1781,"./utils.cjs":1784,"./wallet_getAccountUpgradeStatus.cjs":1785,"./wallet_upgradeAccount.cjs":1786},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.METHOD_NAMES=n.validateAndNormalizeAddress=n.validateParams=n.walletGetAccountUpgradeStatus=n.walletUpgradeAccount=void 0;var r=e("./wallet_upgradeAccount.cjs");Object.defineProperty(n,"walletUpgradeAccount",{enumerable:!0,get:function(){return r.walletUpgradeAccount}});var s=e("./wallet_getAccountUpgradeStatus.cjs");Object.defineProperty(n,"walletGetAccountUpgradeStatus",{enumerable:!0,get:function(){return s.walletGetAccountUpgradeStatus}});var o=e("./utils.cjs");Object.defineProperty(n,"validateParams",{enumerable:!0,get:function(){return o.validateParams}}),Object.defineProperty(n,"validateAndNormalizeAddress",{enumerable:!0,get:function(){return o.validateAndNormalizeAddress}});var i=e("./constants.cjs");Object.defineProperty(n,"METHOD_NAMES",{enumerable:!0,get:function(){return i.METHOD_NAMES}})}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/index.cjs"}],[1783,{"@metamask/superstruct":2810,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GetAccountUpgradeStatusParamsStruct=n.UpgradeAccountParamsStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");n.UpgradeAccountParamsStruct=(0,r.object)({account:s.HexChecksumAddressStruct,chainId:(0,r.optional)(s.StrictHexStruct)}),n.GetAccountUpgradeStatusParamsStruct=(0,r.object)({account:s.HexChecksumAddressStruct,chainId:(0,r.optional)(s.StrictHexStruct)})}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/types.cjs"}],[1784,{"@metamask/rpc-errors":2480,"@metamask/superstruct":2810,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateParams=n.validateAndNormalizeAddress=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/superstruct"),o=e("@metamask/utils");n.validateAndNormalizeAddress=async function(e,t,n){if("string"!=typeof e||0===e.length||!(0,o.isHexAddress)(e))throw r.rpcErrors.invalidParams({message:"Invalid parameters: must provide an EVM address."});if(!(await n(t)).map(e=>e.toLowerCase()).includes(e.toLowerCase()))throw r.providerErrors.unauthorized();return e},n.validateParams=function(e,t){const[n]=(0,s.validate)(e,t);if(n)throw r.rpcErrors.invalidParams(function(e,t){return`${t}\n\n${e.failures().map(e=>`${e.path.join(" > ")}${e.path.length?" - ":""}${e.message}`).join("\n")}`}(n,"Invalid parameters"))}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/utils.cjs"}],[1785,{"./constants.cjs":1781,"./types.cjs":1783,"./utils.cjs":1784,"@metamask/rpc-errors":2480,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetAccountUpgradeStatus=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/utils"),o=e("./constants.cjs"),i=e("./types.cjs"),a=e("./utils.cjs");n.walletGetAccountUpgradeStatus=async function(e,t,n){const{params:c,origin:l}=e;(0,a.validateParams)(c,i.GetAccountUpgradeStatusParamsStruct);const{account:u,chainId:d}=c,p=await(0,a.validateAndNormalizeAddress)(u,l,n.getPermittedAccountsForOrigin);let g;if(d!==undefined)g=d;else{const e=n.getCurrentChainIdForDomain(l);if(!e)throw r.rpcErrors.invalidParams({message:`Could not determine current chain ID for origin: ${l}`});g=e}const{isSupported:h}=await n.isEip7702Supported({address:p,chainId:g});if(h)try{const e=g,s=n.getSelectedNetworkClientIdForChain(e);if(!s)throw r.rpcErrors.invalidParams({message:`Network client ID not found for chain ID ${g}`});const{isUpgraded:i,upgradedAddress:a}=await(async(e,t,n)=>{const r=await n(e,t);if(!r||"0x"===r||r.length<=2)return{isUpgraded:!1,upgradedAddress:null};if(!r.startsWith(o.DELEGATION_INDICATOR_PREFIX))return{isUpgraded:!1,upgradedAddress:null};const s=o.DELEGATION_INDICATOR_PREFIX.length+40;return r.length!==s?{isUpgraded:!1,upgradedAddress:null}:{isUpgraded:!0,upgradedAddress:`0x${r.slice(8,48)}`}})(p,s,n.getCode);t.result={isSupported:h,account:p,isUpgraded:i,upgradedAddress:a,chainId:g}}catch(e){if(e instanceof r.JsonRpcError)throw e;throw r.rpcErrors.internal({message:`Failed to get account upgrade status: ${(0,s.getErrorMessage)(e)}`})}else t.result={isSupported:h,account:p,isUpgraded:!1,upgradedAddress:null,chainId:g}}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/wallet_getAccountUpgradeStatus.cjs"}],[1786,{"./types.cjs":1783,"./utils.cjs":1784,"@metamask/rpc-errors":2480},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletUpgradeAccount=void 0;const r=e("@metamask/rpc-errors"),s=e("./types.cjs"),o=e("./utils.cjs");n.walletUpgradeAccount=async function(e,t,n){const{params:i,origin:a}=e;(0,o.validateParams)(i,s.UpgradeAccountParamsStruct);const{account:c,chainId:l}=i,u=await(0,o.validateAndNormalizeAddress)(c,a,n.getPermittedAccountsForOrigin);let d;if(l!==undefined)d=l;else{const e=n.getCurrentChainIdForDomain(a);if(!e)throw r.rpcErrors.invalidParams({message:`No network configuration found for origin: ${a}`});d=e}try{const e=d,{isSupported:s,upgradeContractAddress:o}=await n.isEip7702Supported({address:u,chainId:e});if(!s)throw r.rpcErrors.invalidParams({message:`Account upgrade not supported on chain ID ${d}`});if(!o)throw r.rpcErrors.invalidParams({message:`No upgrade contract address available for chain ID ${d}`});const i=await n.upgradeAccount(u,o,d);t.result={transactionHash:i.transactionHash,upgradedAccount:u,delegatedTo:i.delegatedTo}}catch(e){if(e instanceof r.JsonRpcError)throw e;throw r.rpcErrors.internal({message:`Failed to upgrade account: ${e instanceof Error?e.message:String(e)}`})}}}}},{package:"@metamask/eip-7702-internal-rpc-middleware",file:"node_modules/@metamask/eip-7702-internal-rpc-middleware/dist/wallet_upgradeAccount.cjs"}],[1787,{"@ethersproject/providers":759,"@metamask/base-controller":1297,"@metamask/controller-utils":1383,"@metamask/utils":2914,"punycode/punycode.js":4954},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.EnsController=n.DEFAULT_ENS_NETWORK_MAP=void 0;const u=e("@ethersproject/providers"),d=e("@metamask/base-controller"),p=e("@metamask/controller-utils"),g=e("@metamask/utils"),h=e("punycode/punycode.js"),m=(0,g.createProjectLogger)("ens-controller");n.DEFAULT_ENS_NETWORK_MAP={1:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",4:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",5:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",17e3:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",11155111:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"};const f={ensEntries:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},ensResolutionsByAddress:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}},b={ensEntries:{},ensResolutionsByAddress:{}};class w extends d.BaseController{constructor({registriesByChainId:e=n.DEFAULT_ENS_NETWORK_MAP,messenger:t,state:a={},onNetworkDidChange:l}){super({name:"EnsController",metadata:f,messenger:t,state:{...b,ensEntries:Object.fromEntries(Object.entries(e).map(([e,t])=>[(0,p.toHex)(e),{".":{address:t,chainId:(0,p.toHex)(e),ensName:"."}}])),...a}}),r.add(this),s.set(this,null),c(this,r,"m",o).call(this,e),l&&l(({selectedNetworkClientId:t})=>{this.resetState(),c(this,r,"m",i).call(this,t,e)})}resetState(){this.update(e=>{e.ensResolutionsByAddress={}})}clear(){this.update(e=>{e.ensEntries={}})}delete(e,t){const n=(0,p.normalizeEnsName)(t);return!!((0,p.isSafeDynamicKey)(e)&&n&&this.state.ensEntries[e]&&this.state.ensEntries[e][n])&&(this.update(t=>{delete t.ensEntries[e][n],0===Object.keys(t.ensEntries[e]).length&&delete t.ensEntries[e]}),!0)}get(e,t){const n=(0,p.normalizeEnsName)(t);return n&&this.state.ensEntries[e]&&this.state.ensEntries[e][n]||null}set(e,t,n){if(!Number.isInteger(Number.parseInt(e,10))||!t||"string"!=typeof t||n&&!(0,p.isValidHexAddress)(n))throw new Error(`Invalid ENS entry: { chainId:${e}, ensName:${t}, address:${n}}`);const r=(0,p.normalizeEnsName)(t);if(!r)throw new Error(`Invalid ENS name: ${t}`);const s=n?(0,p.toChecksumHexAddress)(n):null,o=this.state.ensEntries[e];return(!o?.[r]||o[r].address!==s)&&(this.update(t=>{t.ensEntries={...this.state.ensEntries,[e]:{...this.state.ensEntries[e],[r]:{address:s,chainId:e,ensName:r}}}}),!0)}async reverseResolveAddress(e){if(!c(this,s,"f"))return undefined;const t=(0,p.toChecksumHexAddress)(e);if(this.state.ensResolutionsByAddress[t])return this.state.ensResolutionsByAddress[t];let n,r;try{n=await c(this,s,"f").lookupAddress(t)}catch(e){return m(e),undefined}if(!n)return undefined;try{r=await c(this,s,"f").resolveName(n)}catch(e){return m(e),undefined}return r?"0x0000000000000000000000000000000000000000"===r||"0x"===r||(0,p.toChecksumHexAddress)(r)!==t?undefined:(this.update(e=>{e.ensResolutionsByAddress[t]=(0,h.toASCII)(n)}),n):undefined}}n.EnsController=w,s=new WeakMap,r=new WeakSet,o=function(e){const{selectedNetworkClientId:t}=this.messenger.call("NetworkController:getState");c(this,r,"m",i).call(this,t,e)},i=function(e,t){const{configuration:{chainId:n},provider:o}=this.messenger.call("NetworkController:getNetworkClientById",e);t&&t[parseInt(n,16)]&&c(this,r,"m",a).call(this,n)?l(this,s,new u.Web3Provider(o,{chainId:(0,p.convertHexToDecimal)(n),name:p.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP[n],ensAddress:t[parseInt(n,16)]}),"f"):l(this,s,null,"f")},a=function(e){return Boolean(this.state.ensEntries[e])},n.default=w}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/EnsController.cjs"}],[1788,{"./EnsController.cjs":1787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./EnsController.cjs"),n)}}},{package:"@metamask/ens-controller",file:"node_modules/@metamask/ens-controller/dist/index.cjs"}],[1789,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorReportingService=void 0;n.ErrorReportingService=class{constructor({messenger:e,captureException:t}){this.name="ErrorReportingService",this.state=null,r.set(this,void 0),s.set(this,void 0),o(this,s,e,"f"),o(this,r,t,"f"),i(this,s,"f").registerActionHandler("ErrorReportingService:captureException",i(this,r,"f").bind(this))}captureException(e){i(this,r,"f").call(this,e)}},r=new WeakMap,s=new WeakMap}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/error-reporting-service.cjs"}],[179,{"../../../development/build/constants":586,"../lib/util":353,"@metamask/remote-feature-flag-controller":2473,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteFeatureFlagControllerInit=void 0,n.getConfigForRemoteFeatureFlagRequest=l;var r=e("@metamask/utils"),s=e("@metamask/remote-feature-flag-controller"),o=e("../../../development/build/constants"),i=e("../lib/util");const a={flask:s.DistributionType.Flask,main:s.DistributionType.Main,beta:s.DistributionType.Beta,experimental:s.DistributionType.Main},c={[o.ENVIRONMENT.DEVELOPMENT]:s.EnvironmentType.Development,[o.ENVIRONMENT.RELEASE_CANDIDATE]:s.EnvironmentType.ReleaseCandidate,[o.ENVIRONMENT.PRODUCTION]:s.EnvironmentType.Production};function l(){(0,r.assert)("main","METAMASK_BUILD_TYPE is not defined"),(0,r.assert)("production","METAMASK_ENVIRONMENT is not defined");const e="main",t=a[e]||s.DistributionType.Main;let n=c.production||s.EnvironmentType.Development;return{distribution:t,environment:n}}n.RemoteFeatureFlagControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const r=t.call("OnboardingController:getState"),o=t.call("PreferencesController:getState"),{distribution:a,environment:c}=l();let u=!0===o.useExternalServices,d=!0===r.completedOnboarding;const p=()=>!d||!u,g=new s.RemoteFeatureFlagController({state:n.RemoteFeatureFlagController,messenger:e,fetchInterval:9e5,disabled:p(),getMetaMetricsId:()=>t.call("MetaMetricsController:getMetaMetricsId"),clientConfigApiService:new s.ClientConfigApiService({fetch:globalThis.fetch.bind(globalThis),config:{client:s.ClientType.Extension,distribution:a,environment:c}})});function h(){p()?g.disable():(g.enable(),g.updateRemoteFeatureFlags().catch(e=>{console.error("Failed to update remote feature flags:",e)}))}return t.subscribe("PreferencesController:stateChange",(0,i.previousValueComparator)((e,t)=>{const{useExternalServices:n}=e,{useExternalServices:r}=t;return r!==n&&(u=!0===r,h()),!0},o)),t.subscribe("OnboardingController:stateChange",(0,i.previousValueComparator)((e,t)=>{const{completedOnboarding:n}=e,{completedOnboarding:r}=t;return r!==n&&(d=!0===r,h()),!0},r)),{controller:g}}}}},{package:"$root$",file:"app/scripts/controller-init/remote-feature-flag-controller-init.ts"}],[1790,{"./error-reporting-service.cjs":1789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorReportingService=void 0;var r=e("./error-reporting-service.cjs");Object.defineProperty(n,"ErrorReportingService",{enumerable:!0,get:function(){return r.ErrorReportingService}})}}},{package:"@metamask/error-reporting-service",file:"node_modules/@metamask/error-reporting-service/dist/index.cjs"}],[1796,{"./base-filter":1797},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter");t.exports=class extends r{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter-history.js"}],[1797,{"@metamask/safe-event-emitter":2482},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/safe-event-emitter").default;t.exports=class extends r{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach(e=>this.emit("update",e))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/base-filter.js"}],[1798,{"./base-filter":1797,"./getBlocksForRange":1799,"./hexUtils":1800},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:o}=e("./hexUtils");t.exports=class extends r{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const n=t,r=o(e),i=(await s({provider:this.provider,fromBlock:r,toBlock:n})).map(e=>e.hash);this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/block-filter.js"}],[1799,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function s(e){if(e===undefined||null===e)return e;return"0x"+e.toString(16)}t.exports=async function({provider:e,fromBlock:t,toBlock:n}){t||(t=n);const o=r(t),i=r(n),a=Array(i-o+1).fill().map((e,t)=>o+t).map(s);let c=await Promise.all(a.map(t=>async function(e,t,n){for(let r=0;r<3;r++)try{return e.request({id:1,jsonrpc:"2.0",method:t,params:n})}catch(e){console.error(`provider.request failed: ${e.stack||e.message||e}`)}return null}(e,"eth_getBlockByNumber",[t,!1])));return c=c.filter(e=>null!==e),c}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/getBlocksForRange.js"}],[18,{"../../lib/snap-keyring/snap-keyring":323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapKeyringBuilderInit=void 0;var r=e("../../lib/snap-keyring/snap-keyring");n.SnapKeyringBuilderInit=({controllerMessenger:e,initMessenger:t,removeAccount:n})=>({persistedStateKey:null,memStateKey:null,controller:(0,r.snapKeyringBuilder)(e,{persistKeyringHelper:async()=>{await t.call("KeyringController:persistAllKeyrings"),await t.call("AccountsController:updateAccounts")},removeAccountHelper:async e=>{await n(e)},trackEvent:t.call.bind(t,"MetaMetricsController:trackEvent")})})}}},{package:"$root$",file:"app/scripts/controller-init/accounts/snap-keyring-builder-init.ts"}],[180,{"../../../shared/lib/feature-flags/version-gating":5691,"../../../shared/lib/manifestFlags":5700,"../controllers/rewards/rewards-controller":232},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RewardsControllerInit=void 0;var r=e("../controllers/rewards/rewards-controller"),s=e("../../../shared/lib/manifestFlags"),o=e("../../../shared/lib/feature-flags/version-gating");n.RewardsControllerInit=e=>{const{controllerMessenger:t,persistedState:n,initMessenger:i}=e,a=n.RewardsController??r.defaultRewardsControllerState;return{controller:new r.RewardsController({messenger:t,state:a,isDisabled:()=>{var e;const{remoteFeatureFlags:t}=i.call("RemoteFeatureFlagController:getState"),n=null==t?void 0:t.rewardsEnabled,r=null===(e=(0,s.getManifestFlags)().remoteFeatureFlags)||void 0===e?void 0:e.rewardsEnabled,a=e=>"boolean"==typeof e?e:Boolean((0,o.validatedVersionGatedFeatureFlag)(e)),c=r===undefined?a(n):a(r),{useExternalServices:l}=i.call("PreferencesController:getState");return!c||!l}})}}}}},{package:"$root$",file:"app/scripts/controller-init/rewards-controller-init.ts"}],[1800,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return e.sort((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:s(e)-s(t))}function s(e){return e===undefined||null===e?e:Number.parseInt(e,16)}function o(e){if(e===undefined||null===e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function i(){return Math.floor(16*Math.random()).toString(16)}t.exports={minBlockRef:function(...e){return r(e)[0]},maxBlockRef:function(...e){const t=r(e);return t[t.length-1]},sortBlockRefs:r,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:s,incrementHexInt:function(e){if(e===undefined||null===e)return e;return o(s(e)+1)},intToHex:o,unsafeRandomBytes:function(e){let t="0x";for(let n=0;n<e;n++)t+=i(),t+=i();return t}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/hexUtils.js"}],[1801,{"./block-filter.js":1798,"./hexUtils":1800,"./log-filter.js":1802,"./tx-filter.js":1804,"@metamask/json-rpc-engine":2034,"async-mutex":3702},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("async-mutex").Mutex,{createAsyncMiddleware:s,createScaffoldMiddleware:o}=e("@metamask/json-rpc-engine"),i=e("./log-filter.js"),a=e("./block-filter.js"),c=e("./tx-filter.js"),{intToHex:l,hexToInt:u}=e("./hexUtils");function d(e){return p(async(...t)=>{const n=await e(...t);return l(n.id)})}function p(e){return s(async(t,n)=>{const r=await e.apply(null,t.params);n.result=r})}function g(e,t){const n=[];for(let t in e)n.push(e[t]);return n}t.exports=function({blockTracker:e,provider:t}){let n=0,s={};const h=new r,m=function({mutex:e}){return t=>async(n,r,s,o)=>{(await e.acquire())(),t(n,r,s,o)}}({mutex:h}),f=o({eth_newFilter:m(d(w)),eth_newBlockFilter:m(d(v)),eth_newPendingTransactionFilter:m(d(y)),eth_uninstallFilter:m(p(k)),eth_getFilterChanges:m(p(C)),eth_getFilterLogs:m(p(M))}),b=async({oldBlock:e,newBlock:t})=>{if(0===s.length)return;const n=await h.acquire();try{await Promise.all(g(s).map(async n=>{try{await n.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}}))}catch(e){console.error(e)}n()};return f.newLogFilter=w,f.newBlockFilter=v,f.newPendingTransactionFilter=y,f.uninstallFilter=k,f.getFilterChanges=C,f.getFilterLogs=M,f.destroy=()=>{!async function(){const e=g(s).length;s={},A({prevFilterCount:e,newFilterCount:0})}()},f;async function w(e){const n=new i({provider:t,params:e});await S(n);return n}async function v(){const e=new a({provider:t});await S(e);return e}async function y(){const e=new c({provider:t});await S(e);return e}async function C(e){const t=u(e),n=s[t];if(!n)throw new Error(`No filter for index "${t}"`);return n.getChangesAndClear()}async function M(e){const t=u(e),n=s[t];if(!n)throw new Error(`No filter for index "${t}"`);let r=[];return"log"===n.type&&(r=n.getAllResults()),r}async function k(e){const t=u(e),n=s[t],r=Boolean(n);return r&&await async function(e){const t=g(s).length;delete s[e];const n=g(s).length;A({prevFilterCount:t,newFilterCount:n})}(t),r}async function S(t){const r=g(s).length,o=await e.getLatestBlock();await t.initialize({currentBlock:o}),n++,s[n]=t,t.id=n,t.idHex=l(n);return A({prevFilterCount:r,newFilterCount:g(s).length}),n}function A({prevFilterCount:t,newFilterCount:n}){0===t&&n>0?e.on("sync",b):t>0&&0===n&&e.removeListener("sync",b)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/index.js"}],[1802,{"./base-filter-history":1796,"./hexUtils":1800,"@metamask/eth-query":1922,pify:4881},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/eth-query"),s=e("pify"),o=e("./base-filter-history"),{bnToHex:i,hexToInt:a,incrementHexInt:c,minBlockRef:l,blockRefIsNumber:u}=e("./hexUtils");t.exports=class extends o{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new r(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:undefined,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map(e=>e.toLowerCase()))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const n=l(this.params.toBlock,e),r=Object.assign({},this.params,{toBlock:n}),s=await this._fetchLogs(r);this.addInitialResults(s)}async update({oldBlock:e,newBlock:t}){const n=t;let r;r=e?c(e):t;const s=Object.assign({},this.params,{fromBlock:r,toBlock:n}),o=(await this._fetchLogs(s)).filter(e=>this.matchLog(e));this.addResults(o)}async _fetchLogs(e){return await s(t=>this.ethQuery.getLogs(e,t))()}matchLog(e){if(a(this.params.fromBlock)>=a(e.blockNumber))return!1;if(u(this.params.toBlock)&&a(this.params.toBlock)<=a(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every((t,n)=>{let r=e.topics[n];if(!r)return!1;r=r.toLowerCase();let s=Array.isArray(t)?t:[t];if(s.includes(null))return!0;s=s.map(e=>e.toLowerCase());return s.includes(r)})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/log-filter.js"}],[1803,{"./getBlocksForRange.js":1799,"./hexUtils.js":1800,"./index.js":1801,"@metamask/json-rpc-engine":2034,"@metamask/safe-event-emitter":2482},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("@metamask/safe-event-emitter").default,{createAsyncMiddleware:s,createScaffoldMiddleware:o}=e("@metamask/json-rpc-engine"),i=e("./index.js"),{unsafeRandomBytes:a,incrementHexInt:c}=e("./hexUtils.js"),l=e("./getBlocksForRange.js");function u(e){return null===e||e===undefined?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}t.exports=function({blockTracker:e,provider:t}){const n={},d=i({blockTracker:e,provider:t});let p=!1;const g=new r,h=o({eth_subscribe:s(async function(r,s){if(p)throw new Error("SubscriptionManager - attempting to use after destroying");const o=r.params[0],i=a(16);let g;switch(o){case"newHeads":g=h({subId:i});break;case"logs":const e=r.params[1];g=f({subId:i,filter:await d.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${o}"`)}return n[i]=g,void(s.result=i);function h({subId:n}){const r={type:o,destroy:async()=>{e.removeListener("sync",r.update)},update:async({oldBlock:e,newBlock:r})=>{const s=r,o=c(e);(await l({provider:t,fromBlock:o,toBlock:s})).map(u).filter(e=>null!==e).forEach(e=>{m(n,e)})}};return e.on("sync",r.update),r}function f({subId:e,filter:t}){t.on("update",t=>m(e,t));return{type:o,destroy:async()=>await d.uninstallFilter(t.idHex)}}}),eth_unsubscribe:s(async function(e,t){if(p)throw new Error("SubscriptionManager - attempting to use after destroying");const r=e.params[0],s=n[r];if(!s)return void(t.result=!1);delete n[r],await s.destroy(),t.result=!0})});return h.destroy=function(){g.removeAllListeners();for(const e in n)n[e].destroy(),delete n[e];p=!0},{events:g,middleware:h};function m(e,t){g.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/subscriptionManager.js"}],[1804,{"./base-filter":1797,"./getBlocksForRange":1799,"./hexUtils":1800},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){const r=e("./base-filter"),s=e("./getBlocksForRange"),{incrementHexInt:o}=e("./hexUtils");t.exports=class extends r{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,n=o(e),r=await s({provider:this.provider,fromBlock:n,toBlock:t}),i=[];for(const e of r)i.push(...e.transactions);this.addResults(i)}}}}},{package:"@metamask/eth-json-rpc-filters",file:"node_modules/@metamask/eth-json-rpc-filters/tx-filter.js"}],[181,{"../controllers/rewards/rewards-data-service":233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RewardsDataServiceInit=void 0;var r=e("../controllers/rewards/rewards-data-service");n.RewardsDataServiceInit=({controllerMessenger:e})=>({controller:new r.RewardsDataService({messenger:e,fetch:fetch.bind(globalThis)})})}}},{package:"$root$",file:"app/scripts/controller-init/rewards-data-service-init.ts"}],[182,{"./oauth-service-init":183,"./seedless-onboarding-controller-init":184},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"OAuthServiceInit",{enumerable:!0,get:function(){return r.OAuthServiceInit}}),Object.defineProperty(n,"SeedlessOnboardingControllerInit",{enumerable:!0,get:function(){return s.SeedlessOnboardingControllerInit}});var r=e("./oauth-service-init"),s=e("./seedless-onboarding-controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/index.ts"}],[183,{"../../services/oauth/oauth-service":578,"../../services/oauth/web-authenticator-factory":581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OAuthServiceInit=void 0;var r,s=(r=e("../../services/oauth/oauth-service"))&&r.__esModule?r:{default:r},o=e("../../services/oauth/web-authenticator-factory");n.OAuthServiceInit=e=>{const{controllerMessenger:t,getController:n}=e,r=n("MetaMetricsController");return{controller:new s.default({messenger:t,env:{googleClientId:"795351133007-6d0s31utj13knv440fgjo2ur93241gb6.apps.googleusercontent.com",appleClientId:"io.metamask.appleloginclient.prod"},webAuthenticator:(0,o.webAuthenticatorFactory)(),bufferedTrace:r.bufferedTrace.bind(r),bufferedEndTrace:r.bufferedEndTrace.bind(r),trackEvent:r.trackEvent.bind(r),addEventBeforeMetricsOptIn:r.addEventBeforeMetricsOptIn.bind(r),getParticipateInMetaMetrics:()=>r.state.participateInMetaMetrics}),memStateKey:null,persistedStateKey:null}}}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/oauth-service-init.ts"}],[1833,{"./ledger-hw-app.cjs":1835,"./ledger-iframe-bridge.cjs":1836,"./ledger-keyring.cjs":1837,"./ledger-mobile-bridge.cjs":1838,"./ledger-transport-middleware.cjs":1839},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./ledger-keyring.cjs"),n),s(e("./ledger-iframe-bridge.cjs"),n),s(e("./ledger-mobile-bridge.cjs"),n),s(e("./ledger-transport-middleware.cjs"),n),s(e("./ledger-hw-app.cjs"),n)}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/index.cjs"}],[1834,{"./type.cjs":1840,"@ledgerhq/hw-transport":947},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.handleLedgerTransportError=function(e,t){if(e instanceof r.TransportStatusError){const t=e;throw new s.LedgerStatusError(t.statusCode,function(e){switch(e.statusCode){case 27013:return"Ledger: User rejected the transaction";case 27264:return"Ledger: Blind signing must be enabled";case 21781:return"Ledger: Device is locked. Unlock it to continue";case 25871:return"Ledger: Ethereum app closed. Open it to unlock";default:return e.message}}(t))}throw e instanceof Error?e:new Error(t)};const r=e("@ledgerhq/hw-transport"),s=e("./type.cjs")}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-error-handler.cjs"}],[1835,{"@ledgerhq/hw-app-eth":932,buffer:3880},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMaskLedgerHwAppEth=void 0;const s=r(e("@ledgerhq/hw-app-eth")),o=e("buffer");class i extends s.default{constructor(){super(...arguments),this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii"}async openEthApp(){await this.transport.send(224,216,0,0,o.Buffer.from(this.ethAppName,this.transportEncoding))}async closeApps(){await this.transport.send(176,167,0,0)}async getAppNameAndVersion(){const e=await this.transport.send(176,1,0,0);if(1!==e[0])throw new Error("Incorrect format return from getAppNameAndVersion.");let t=1;const n=e[t]??0;t+=1;const r=e.slice(t,t+=n).toString(this.transportEncoding),s=e[t]??0;t+=1;return{appName:r,version:e.slice(t,t+=s).toString(this.transportEncoding)}}}n.MetaMaskLedgerHwAppEth=i}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-hw-app.cjs"}],[1836,{"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c,l,u,d,p=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},g=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerIframeBridge=n.IFrameMessageAction=void 0;const h=e("@metamask/utils");var m;!function(e){e.LedgerIsIframeReady="ledger-is-iframe-ready",e.LedgerConnectionChange="ledger-connection-change",e.LedgerUnlock="ledger-unlock",e.LedgerMakeApp="ledger-make-app",e.LedgerUpdateTransport="ledger-update-transport",e.LedgerSignTransaction="ledger-sign-transaction",e.LedgerSignPersonalMessage="ledger-sign-personal-message",e.LedgerSignTypedData="ledger-sign-typed-data"}(m||(n.IFrameMessageAction=m={}));n.LedgerIframeBridge=class{constructor(e={bridgeUrl:"https://metamask.github.io/eth-ledger-bridge-keyring"}){r.add(this),this.iframeLoaded=!1,s.set(this,void 0),this.isDeviceConnected=!1,this.currentMessageId=0,o.set(this,new Map),p(this,r,"m",d).call(this,e),g(this,s,{bridgeUrl:e?.bridgeUrl},"f")}async init(){await p(this,r,"m",a).call(this,p(this,s,"f").bridgeUrl),this.eventListener=p(this,r,"m",l).bind(this,p(this,s,"f").bridgeUrl),window.addEventListener("message",this.eventListener)}async destroy(){this.eventListener&&window.removeEventListener("message",this.eventListener)}async getOptions(){return p(this,s,"f")}async setOptions(e){p(this,r,"m",d).call(this,e),p(this,s,"f")?.bridgeUrl!==e.bridgeUrl&&(p(this,s,"f").bridgeUrl=e.bridgeUrl,await this.destroy(),await this.init())}async attemptMakeApp(){const e=await p(this,r,"m",u).call(this,{action:m.LedgerMakeApp},{timeout:8e3});if("success"in e&&e.success)return!0;throw"error"in e?e.error:new Error("Unknown error occurred")}async updateTransportMethod(e){if(!this.iframeLoaded)throw new Error("The iframe is not loaded yet");const t=await p(this,r,"m",u).call(this,{action:m.LedgerUpdateTransport,params:{transportType:e}},{timeout:8e3});if("success"in t&&t.success)return!0;throw new Error("Ledger transport could not be updated")}async getPublicKey(e){return p(this,r,"m",i).call(this,m.LedgerUnlock,e)}async deviceSignTransaction(e){return p(this,r,"m",i).call(this,m.LedgerSignTransaction,e)}async deviceSignMessage(e){return p(this,r,"m",i).call(this,m.LedgerSignPersonalMessage,e)}async deviceSignTypedData(e){return p(this,r,"m",i).call(this,m.LedgerSignTypedData,e)}},s=new WeakMap,o=new WeakMap,r=new WeakSet,i=async function(...[e,t]){const n=await p(this,r,"m",u).call(this,{action:e,params:t});if("payload"in n&&n.payload){if("success"in n&&n.success)return n.payload;if("error"in n.payload)throw n.payload.error}throw new Error("Unknown error occurred")},a=async function(e){return new Promise(t=>{this.iframe=document.createElement("iframe"),this.iframe.src=e,this.iframe.allow="hid 'src'",this.iframe.onload=async()=>{this.iframeLoaded=!0,t()},document.head.appendChild(this.iframe)})},c=function(e){const t=e.split("/");return t.splice(-1,1),t.join("/")},l=function(e,t){const{origin:n,data:s}=t;if(n===p(this,r,"m",c).call(this,e)&&s){const e=p(this,o,"f").get(s.messageId);e?(e.resolve(s),p(this,o,"f").delete(s.messageId)):s.action===m.LedgerConnectionChange&&(this.isDeviceConnected=s.payload.connected)}},u=async function(e,{timeout:t}={}){this.currentMessageId+=1;const n={...e,messageId:this.currentMessageId,target:"LEDGER-IFRAME"},r=(0,h.createDeferredPromise)();if(p(this,o,"f").set(this.currentMessageId,r),!this.iframeLoaded||!this.iframe?.contentWindow)throw new Error("The iframe is not loaded yet");return t&&setTimeout(()=>{p(this,o,"f").has(n.messageId)&&(p(this,o,"f").delete(n.messageId),r.reject(new Error("Ledger iframe message timeout")))},t),this.iframe.contentWindow.postMessage(n,"*"),r.promise},d=function(e){if("string"!=typeof e.bridgeUrl||0===e.bridgeUrl.length)throw new Error("bridgeURL is not a valid URL")}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-iframe-bridge.cjs"}],[1837,{"./ledger-error-handler.cjs":1834,"@ethereumjs/rlp":645,"@ethereumjs/tx":658,"@ethereumjs/util":672,"@metamask/eth-sig-util":1924,"@metamask/utils":2914,buffer:3880,hdkey:4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c,l,u,d,p,g,h,m,f,b=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},w=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerKeyring=void 0;const v=e("@ethereumjs/rlp"),y=e("@ethereumjs/tx"),C=e("@ethereumjs/util"),M=e("@metamask/eth-sig-util"),k=e("@metamask/utils"),S=e("buffer"),A=w(e("hdkey")),I=e("./ledger-error-handler.cjs"),T="m",E=`${T}/44'/60'/0'`,_="Ledger Hardware";var P;!function(e){e.Ropsten="https://api-ropsten.etherscan.io",e.Kovan="https://api-kovan.etherscan.io",e.Rinkeby="https://api-rinkeby.etherscan.io",e.Mainnet="https://api.etherscan.io"}(P||(P={}));class j{constructor({bridge:e}){if(r.add(this),this.deviceId="",this.type=_,this.page=0,this.perPage=5,this.unlockedAccount=0,this.accounts=[],this.accountDetails={},this.hdk=new A.default,this.hdPath=E,this.paths={},this.network=P.Mainnet,this.implementFullBIP44=!1,!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}async init(){return this.bridge.init()}async destroy(){return this.bridge.destroy()}async serialize(){return{hdPath:this.hdPath,accounts:this.accounts.slice(),deviceId:this.deviceId,accountDetails:this.accountDetails,implementFullBIP44:!1}}async deserialize(e){this.hdPath=e.hdPath??E,this.accounts=e.accounts??[],this.deviceId=e.deviceId??"",this.accountDetails=e.accountDetails??{},e.accountDetails||b(this,r,"m",s).call(this,e),this.implementFullBIP44=e.implementFullBIP44??!1;const t=new Set(Object.keys(this.accountDetails));return this.accounts=this.accounts.filter(e=>t.has(b(this,r,"m",f).call(this,e))),Promise.resolve()}setDeviceId(e){this.deviceId=e}getDeviceId(){return this.deviceId}isUnlocked(){return Boolean(this.hdk.publicKey)}isConnected(){return this.bridge.isDeviceConnected}setAccountToUnlock(e){this.unlockedAccount=e}setHdPath(e){this.hdPath!==e&&(this.hdk=new A.default),this.hdPath=e}async unlock(e,t=!0){if(this.isUnlocked()&&!e)return b(this,r,"m",f).call(this,(0,k.bytesToHex)((0,C.publicToAddress)(this.hdk.publicKey,!0)));const n=e?b(this,r,"m",g).call(this,e):this.hdPath;let s;try{s=await this.bridge.getPublicKey({hdPath:n})}catch(e){(0,I.handleLedgerTransportError)(e,"Ledger: Unknown error while unlocking account")}return t&&s.chainCode&&(this.hdk.publicKey=S.Buffer.from(s.publicKey,"hex"),this.hdk.chainCode=S.Buffer.from(s.chainCode,"hex")),(0,k.add0x)(s.address)}async addAccounts(e){return new Promise((t,n)=>{this.unlock().then(async n=>{const s=this.unlockedAccount,o=s+e,i=[];for(let e=s;e<o;e++){const t=b(this,r,"m",d).call(this,e);let n;n=b(this,r,"m",p).call(this)?await this.unlock(t):b(this,r,"m",l).call(this,T,e),this.accountDetails[b(this,r,"m",f).call(this,n)]={bip44:b(this,r,"m",p).call(this),hdPath:t},this.accounts.includes(n)||(this.accounts=[...this.accounts,n],i.push(n)),this.page=0}t(i)}).catch(n)})}getName(){return _}async getFirstPage(){return this.page=0,b(this,r,"m",i).call(this,1)}async getNextPage(){return b(this,r,"m",i).call(this,1)}async getPreviousPage(){return b(this,r,"m",i).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){const t=this.accounts.filter(t=>t.toLowerCase()!==e.toLowerCase());if(t.length===this.accounts.length)throw new Error(`Address ${e} not found in this keyring`);this.accounts=t,delete this.accountDetails[b(this,r,"m",f).call(this,e)]}async attemptMakeApp(){return this.bridge.attemptMakeApp()}async updateTransportMethod(e){return this.bridge.updateTransportMethod(e)}async signTransaction(e,t){let n;if(function(e){return"getChainId"in e&&"function"==typeof e.getChainId}(t))return t.v=t.getChainId(),t.r="0x00",t.s="0x00",n=t.serialize().toString("hex"),b(this,r,"m",o).call(this,e,n,e=>(t.v=S.Buffer.from(e.v,"hex"),t.r=S.Buffer.from(e.r,"hex"),t.s=S.Buffer.from(e.s,"hex"),t));const s=t.getMessageToSign();return n=Array.isArray(s)?S.Buffer.from(v.RLP.encode(s)).toString("hex"):(0,k.bytesToHex)(s),b(this,r,"m",o).call(this,e,n,e=>{const n=t.toJSON();return n.type=t.type,n.v=(0,k.add0x)(e.v),n.r=(0,k.add0x)(e.r),n.s=(0,k.add0x)(e.s),y.TransactionFactory.fromTxData(n,{common:t.common,freeze:Object.isFrozen(t)})})}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){const n=await this.unlockAccountByAddress(e);if(!n)throw new Error("Ledger: Unknown error while signing message");let s;try{s=await this.bridge.deviceSignMessage({hdPath:n,message:(0,k.remove0x)(t)})}catch(e){(0,I.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let o=parseInt(String(s.v),10).toString(16);o.length<2&&(o=`0${o}`);const i=`0x${s.r}${s.s}${o}`,a=(0,M.recoverPersonalSignature)({data:t,signature:i});if(b(this,r,"m",f).call(this,a)!==b(this,r,"m",f).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return i}async unlockAccountByAddress(e){const t=b(this,r,"m",f).call(this,e),n=this.accountDetails[t];if(!n)throw new Error(`Ledger: Account for address '${t}' not found`);const{hdPath:s}=n;if((await this.unlock(s,!1)).toLowerCase()!==e.toLowerCase())throw new Error(`Ledger: Account ${e} does not belong to the connected device`);return s}async signTypedData(e,t,n){const{version:s}=n??{};if(!("V4"===s))throw new Error("Ledger: Only version 4 of typed data signing is supported");const{domain:o,types:i,primaryType:a,message:c}=M.TypedDataUtils.sanitizeData(t),l=await this.unlockAccountByAddress(e);if(!l)throw new Error("Ledger: Unknown error while signing message");let u;try{u=await this.bridge.deviceSignTypedData({hdPath:l,message:{domain:{name:o.name,chainId:o.chainId,version:o.version,verifyingContract:o.verifyingContract,salt:o.salt instanceof ArrayBuffer?S.Buffer.from(o.salt).toString("hex"):o.salt},types:i,primaryType:a.toString(),message:c}})}catch(e){(0,I.handleLedgerTransportError)(e,"Ledger: Unknown error while signing message")}let d=parseInt(String(u.v),10).toString(16);d.length<2&&(d=`0${d}`);const p=`0x${u.r}${u.s}${d}`,g=(0,M.recoverTypedSignature)({data:t,signature:p,version:M.SignTypedDataVersion.V4});if(b(this,r,"m",f).call(this,g)!==b(this,r,"m",f).call(this,e))throw new Error("Ledger: The signature doesnt match the right address");return p}forgetDevice(){this.deviceId="",this.accounts=[],this.page=0,this.unlockedAccount=0,this.paths={},this.accountDetails={},this.hdk=new A.default}}n.LedgerKeyring=j,r=new WeakSet,s=function(e){if(b(this,r,"m",p).call(this)&&e.accountIndexes)for(const[t,n]of Object.entries(e.accountIndexes))this.accountDetails[t]={bip44:!0,hdPath:b(this,r,"m",d).call(this,n)};const t=new Set(Object.keys(this.accountDetails));b(this,r,"m",p).call(this)||this.accounts.forEach(e=>{const n=b(this,r,"m",f).call(this,e);t.has(n)||(this.accountDetails[n]={bip44:!1,hdPath:b(this,r,"m",u).call(this,e)})})},o=async function(e,t,n){const r=await this.unlockAccountByAddress(e);if(!r)throw new Error("Ledger: hdPath is empty while signing transaction");let s;try{s=await this.bridge.deviceSignTransaction({tx:(0,k.remove0x)(t),hdPath:r})}catch(e){(0,I.handleLedgerTransportError)(e,"Ledger: Unknown error while signing transaction")}const o=n(s);if(o.verifySignature())return o;throw new Error("Ledger: The transaction signature is not valid")},i=async function(e){this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,n=t+this.perPage;let s;return await this.unlock(),s=b(this,r,"m",p).call(this)?await b(this,r,"m",a).call(this,t,n):b(this,r,"m",c).call(this,t,n),s},a=async function(e,t){const n=[];for(let s=e;s<t;s++){const e=b(this,r,"m",d).call(this,s),t=await this.unlock(e),o=!this.implementFullBIP44||await b(this,r,"m",h).call(this,t);if(n.push({address:t,balance:null,index:s}),!o)break}return n},c=function(e,t){const n=[];for(let s=e;s<t;s++){const e=b(this,r,"m",l).call(this,T,s);n.push({address:e,balance:null,index:s}),this.paths[b(this,r,"m",f).call(this,e)]=s}return n},l=function(e,t){const n=this.hdk.derive(`${e}/${t}`),s=(0,k.bytesToHex)((0,C.publicToAddress)(n.publicKey,!0));return b(this,r,"m",f).call(this,s)},u=function(e){const t=b(this,r,"m",f).call(this,e);let n=this.paths[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===b(this,r,"m",l).call(this,T,e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return b(this,r,"m",d).call(this,n)},d=function(e){return b(this,r,"m",p).call(this)?`m/44'/60'/${e}'/0/0`:`${this.hdPath}/${e}`},p=function(){return"m/44'/60'/0'/0/0"===this.hdPath},g=function(e){return e.toString().replace("m/","")},h=async function(e){const t=b(this,r,"m",m).call(this),n=await window.fetch(`${t}/api?module=account&action=txlist&address=${e}&tag=latest&page=1&offset=1`),s=await n.json();return"0"!==s.status&&s.result.length>0},m=function(){return this.network},f=function(e){return(0,k.getChecksumAddress)((0,k.add0x)(e))},j.type=_}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-keyring.cjs"}],[1838,{"./ledger-hw-app.cjs":1835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerMobileBridge=void 0;e("./ledger-hw-app.cjs");n.LedgerMobileBridge=class{constructor(e,t={}){r.add(this),s.set(this,void 0),o.set(this,void 0),this.isDeviceConnected=!1,c(this,o,t,"f"),c(this,s,e,"f")}async init(){return Promise.resolve()}async destroy(){try{await l(this,r,"m",i).call(this).dispose()}catch(e){console.error(e)}this.isDeviceConnected=!1}async deviceSignMessage({hdPath:e,message:t}){return l(this,r,"m",a).call(this).signPersonalMessage(e,t)}async deviceSignTypedData({hdPath:e,message:t}){return l(this,r,"m",a).call(this).signEIP712Message(e,t)}async deviceSignTransaction({tx:e,hdPath:t}){return l(this,r,"m",a).call(this).clearSignTransaction(t,e,{externalPlugins:!0,erc20:!0,nft:!0})}async getPublicKey({hdPath:e}){return await l(this,r,"m",a).call(this).getAddress(e,!1,!0)}async getOptions(){return l(this,o,"f")}async setOptions(e){c(this,o,e,"f")}async updateTransportMethod(e){if(!e.deviceModel)throw new Error("Property `deviceModel` is not defined in `transport`.");if(!e.deviceModel.id)throw new Error("Property `deviceModel.id` is not defined in `transport`.");return l(this,r,"m",i).call(this).setTransport(e),this.isDeviceConnected=!0,Promise.resolve(!0)}async attemptMakeApp(){throw new Error("Method not supported.")}async openEthApp(){await l(this,r,"m",a).call(this).openEthApp()}async closeApps(){await l(this,r,"m",a).call(this).closeApps()}async getAppNameAndVersion(){return l(this,r,"m",a).call(this).getAppNameAndVersion()}},s=new WeakMap,o=new WeakMap,r=new WeakSet,i=function(){if(l(this,s,"f"))return l(this,s,"f");throw new Error("Instance `transportMiddleware` is not initialized.")},a=function(){return l(this,r,"m",i).call(this).getEthApp()}}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-mobile-bridge.cjs"}],[1839,{"./ledger-hw-app.cjs":1835},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerTransportMiddleware=void 0;const i=e("./ledger-hw-app.cjs");n.LedgerTransportMiddleware=class{constructor(){this.mainAppName="BOLOS",this.ethAppName="Ethereum",this.transportEncoding="ascii",r.set(this,void 0)}async dispose(){const e=this.getTransport();await e.close()}setTransport(e){s(this,r,e,"f")}getTransport(){if(!o(this,r,"f"))throw new Error("Instance `transport` is not initialized.");return o(this,r,"f")}getEthApp(){return new i.MetaMaskLedgerHwAppEth(this.getTransport())}},r=new WeakMap}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/ledger-transport-middleware.cjs"}],[184,{"../../lib/encryptor-factory":269,"../../services/oauth/config":575,"@metamask/seedless-onboarding-controller":2500},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SeedlessOnboardingControllerInit=void 0;var r=e("@metamask/seedless-onboarding-controller"),s=e("../../lib/encryptor-factory"),o=e("../../services/oauth/config");n.SeedlessOnboardingControllerInit=e=>{const{initMessenger:t,controllerMessenger:n,persistedState:i}=e,a=(0,s.encryptorFactory)(6e5),c=(0,o.isDevOrTestBuild)()?r.Web3AuthNetwork.Devnet:r.Web3AuthNetwork.Mainnet;return{controller:new r.SeedlessOnboardingController({messenger:n,state:i.SeedlessOnboardingController,network:c,passwordOutdatedCacheTTL:15e3,refreshJWTToken:(...e)=>t.call("OAuthService:getNewRefreshToken",...e),revokeRefreshToken:(...e)=>t.call("OAuthService:revokeRefreshToken",...e),renewRefreshToken:(...e)=>t.call("OAuthService:renewRefreshToken",...e),encryptor:{decrypt:(e,t)=>a.decrypt(e,t),decryptWithDetail:(e,t)=>a.decryptWithDetail(e,t),decryptWithKey(e,t){let n;return n="string"==typeof t?JSON.parse(t):t,a.decryptWithKey(e,n)},encrypt:(e,t)=>a.encrypt(e,t),encryptWithDetail:(e,t)=>a.encryptWithDetail(e,t),importKey:e=>a.importKey(e)}})}}}}},{package:"$root$",file:"app/scripts/controller-init/seedless-onboarding/seedless-onboarding-controller-init.ts"}],[1840,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LedgerStatusError=void 0;class r extends Error{constructor(e,t){super(t),this.statusCode=e}}n.LedgerStatusError=r}}},{package:"@metamask/eth-ledger-bridge-keyring",file:"node_modules/@metamask/eth-ledger-bridge-keyring/dist/type.cjs"}],[185,{"../lib/WeakRefObjectMap":249,"@metamask/selected-network-controller":2505},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SelectedNetworkControllerInit=void 0;var r=e("@metamask/selected-network-controller"),s=e("../lib/WeakRefObjectMap");n.SelectedNetworkControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SelectedNetworkController({state:t.SelectedNetworkController,messenger:e,domainProxyMap:new s.WeakRefObjectMap})})}}},{package:"$root$",file:"app/scripts/controller-init/selected-network-controller-init.ts"}],[186,{"../../../../shared/modules/shield":5757,"../../lib/ppom/ppom-util":293,"@metamask/keyring-controller":2110,"@metamask/shield-controller":2509},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ShieldControllerInit=void 0;var r=e("@metamask/shield-controller"),s=e("@metamask/keyring-controller"),o=e("../../lib/ppom/ppom-util"),i=e("../../../../shared/modules/shield");const a=e=>{const t=(0,r.parseSignatureRequestMethod)(e),n=e.version===s.SignTypedDataVersion.V3||e.version===s.SignTypedDataVersion.V4,i=n?[e.messageParams.from,e.messageParams.data]:[e.messageParams.data,e.messageParams.from],a={id:e.id,jsonrpc:"2.0",method:t,params:i},c=(0,o.normalizeSignatureRequest)(a);if(null!=c&&c.params&&n){const t=c.params;e.messageParams.data=t[1]}return e},c=(0,i.loadShieldConfig)();n.ShieldControllerInit=e=>{const{controllerMessenger:t,initMessenger:n,persistedState:s}=e,o=c.ruleEngineUrl;return{controller:new r.ShieldController({messenger:t,state:s.ShieldController,normalizeSignatureRequest:a,backend:new r.ShieldRemoteBackend({getAccessToken:()=>n.call("AuthenticationController:getBearerToken"),fetch:(e,t)=>fetch(e,t),baseUrl:o})})}}}}},{package:"$root$",file:"app/scripts/controller-init/shield/shield-controller-init.ts"}],[187,{"../../../../shared/constants/smartTransactions":5628,"../../../../shared/modules/selectors":5751,"@metamask/smart-transactions-controller":2523},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SmartTransactionsControllerInit=void 0;var r=e("@metamask/smart-transactions-controller"),s=e("../../../../shared/constants/smartTransactions"),o=e("../../../../shared/modules/selectors");n.SmartTransactionsControllerInit=e=>{const{controllerMessenger:t,initMessenger:n,persistedState:i,getUIState:a,getAccountType:c,getDeviceModel:l,getHardwareTypeForMetric:u,trace:d}=e;return{controller:new r.SmartTransactionsController({supportedChainIds:(0,s.getAllowedSmartTransactionsChainIds)(),clientId:r.ClientId.Extension,trackMetaMetricsEvent:n.call.bind(n,"MetaMetricsController:trackEvent"),state:i.SmartTransactionsController,messenger:t,getFeatureFlags:()=>{const e={metamask:a()};return(0,o.getFeatureFlagsByChainId)(e)},getMetaMetricsProps:async()=>{var e;const t=a(),{internalAccounts:n}=t,r=null==n?void 0:n.selectedAccount,s=r?null==n||null===(e=n.accounts)||void 0===e?void 0:e[r]:null,o=(null==s?void 0:s.address)??"";if(!o)return{accountHardwareType:undefined,accountType:undefined,deviceModel:undefined};return{accountHardwareType:await u(o),accountType:await c(o),deviceModel:await l(o)}},trace:d})}}}}},{package:"$root$",file:"app/scripts/controller-init/smart-transactions/smart-transactions-controller-init.ts"}],[188,{"@metamask/snaps-controllers":2532},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CronjobControllerInit=void 0;var r=e("@metamask/snaps-controllers");n.CronjobControllerInit=({controllerMessenger:e,persistedState:t,getCronjobControllerStorageManager:n})=>({controller:new r.CronjobController({state:t.CronjobController,messenger:e,stateManager:n()}),persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/cronjob-controller-init.ts"}],[189,{"../../../../shared/modules/mv3.utils":5744,"@metamask/permission-controller":2329,"@metamask/snaps-controllers":2532,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ExecutionServiceInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("@metamask/utils"),o=e("@metamask/permission-controller"),i=e("../../../../shared/modules/mv3.utils");n.ExecutionServiceInit=({controllerMessenger:e,offscreenPromise:t,setupUntrustedCommunicationEip1193:n})=>{function a(e,t){n({connectionStream:t,sender:{snapId:e},subjectType:o.SubjectType.Snap})}if(i.isManifestV3&&"undefined"!=typeof chrome&&void 0!==chrome.offscreen)return{memStateKey:null,persistedStateKey:null,controller:new r.OffscreenExecutionService({messenger:e,setupSnapProvider:a,offscreenPromise:t})};const c="https://execution.metamask.io/iframe/10.2.3/index.html";return(0,s.assert)(c,"Missing iframe URL."),{memStateKey:null,persistedStateKey:null,controller:new r.IframeExecutionService({messenger:e,iframeUrl:new URL(c),setupSnapProvider:a})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/execution-service-init.ts"}],[19,{"../controllers/alert-controller":211},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AlertControllerInit=void 0;var r=e("../controllers/alert-controller");n.AlertControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AlertController({state:t.AlertController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/alert-controller-init.ts"}],[190,{"./cronjob-controller-init":188,"./execution-service-init":189,"./multichain-router-init":191,"./rate-limit-controller-init":192,"./snap-controller-init":193,"./snap-insights-controller-init":194,"./snap-interface-controller-init":195,"./snaps-name-provider-init":196,"./snaps-registry-init":197,"./websocket-service-init":198},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CronjobControllerInit",{enumerable:!0,get:function(){return r.CronjobControllerInit}}),Object.defineProperty(n,"ExecutionServiceInit",{enumerable:!0,get:function(){return s.ExecutionServiceInit}}),Object.defineProperty(n,"MultichainRouterInit",{enumerable:!0,get:function(){return o.MultichainRouterInit}}),Object.defineProperty(n,"RateLimitControllerInit",{enumerable:!0,get:function(){return i.RateLimitControllerInit}}),Object.defineProperty(n,"SnapControllerInit",{enumerable:!0,get:function(){return a.SnapControllerInit}}),Object.defineProperty(n,"SnapInsightsControllerInit",{enumerable:!0,get:function(){return c.SnapInsightsControllerInit}}),Object.defineProperty(n,"SnapInterfaceControllerInit",{enumerable:!0,get:function(){return l.SnapInterfaceControllerInit}}),Object.defineProperty(n,"SnapsNameProviderInit",{enumerable:!0,get:function(){return u.SnapsNameProviderInit}}),Object.defineProperty(n,"SnapsRegistryInit",{enumerable:!0,get:function(){return d.SnapsRegistryInit}}),Object.defineProperty(n,"WebSocketServiceInit",{enumerable:!0,get:function(){return p.WebSocketServiceInit}});var r=e("./cronjob-controller-init"),s=e("./execution-service-init"),o=e("./multichain-router-init"),i=e("./rate-limit-controller-init"),a=e("./snap-controller-init"),c=e("./snap-insights-controller-init"),l=e("./snap-interface-controller-init"),u=e("./snaps-name-provider-init"),d=e("./snaps-registry-init"),p=e("./websocket-service-init")}}},{package:"$root$",file:"app/scripts/controller-init/snaps/index.ts"}],[191,{"../../../../shared/constants/keyring":5609,"@metamask/snaps-controllers":2532},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainRouterInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("../../../../shared/constants/keyring");n.MultichainRouterInit=({controllerMessenger:e,getController:t})=>{const n=t("KeyringController");return{memStateKey:null,persistedStateKey:null,controller:new r.MultichainRouter({messenger:e,withSnapKeyring:async e=>e({keyring:await(async()=>{let[e]=n.getKeyringsByType(s.KeyringType.snap);return e||(await n.addNewKeyring(s.KeyringType.snap),[e]=n.getKeyringsByType(s.KeyringType.snap)),e})()})})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/multichain-router-init.ts"}],[192,{"@metamask/notification-services-controller/notification-services":2248,"@metamask/rate-limit-controller":2470,loglevel:4643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RateLimitControllerInit=void 0;var r,s=e("@metamask/rate-limit-controller"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("@metamask/notification-services-controller/notification-services");n.RateLimitControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,showNotification:r})=>({controller:new s.RateLimitController({state:n.RateLimitController,messenger:e,implementations:{showNativeNotification:{method:(e,n)=>{const s=t.call("SubjectMetadataController:getState").subjectMetadata[e];return r((null==s?void 0:s.name)??e,n).catch(e=>{o.default.error("Failed to create notification",e)}),null},rateLimitCount:2,rateLimitTimeout:3e5},showInAppNotification:{method:(e,n)=>{const{message:r,title:s,footerLink:o,interfaceId:a}=n,c={title:s,...o?{footerLink:o}:{},interfaceId:a},l={data:{message:r,origin:e,...a?{detailedView:c}:{}},type:i.TRIGGER_TYPES.SNAP,readDate:null};return t.call("NotificationServicesController:updateMetamaskNotificationsList",l),null},rateLimitCount:5,rateLimitTimeout:6e4}}}),memStateKey:null,persistedStateKey:null})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/rate-limit-controller-init.ts"}],[193,{"../../../../shared/constants/keyring":5609,"../../../../shared/constants/snaps/permissions":5629,"../../lib/encryptor-factory":269,"../../lib/util":353,"@metamask/snaps-controllers":2532,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapControllerInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("@metamask/utils"),o=e("../../../../shared/constants/snaps/permissions"),i=e("../../lib/encryptor-factory"),a=e("../../../../shared/constants/keyring"),c=e("../../lib/util");n.SnapControllerInit=({initMessenger:e,controllerMessenger:t,persistedState:n,removeAllConnections:l,preinstalledSnaps:u})=>{const d=(0,c.getBooleanFlag)(!1),p=(0,c.getBooleanFlag)(!0),g=(0,c.getBooleanFlag)(!0),h=(0,c.getBooleanFlag)("true");const m=new r.SnapController({environmentEndowmentPermissions:Object.values(o.EndowmentPermissions),excludedPermissions:{...o.ExcludedSnapPermissions,...o.ExcludedSnapEndowments},closeAllConnections:l,state:n.SnapController,messenger:t,featureFlags:{allowLocalSnaps:d,requireAllowlist:p,rejectInvalidPlatformVersion:g,autoUpdatePreinstalledSnaps:h},encryptor:(0,i.encryptorFactory)(6e5),getMnemonicSeed:async function(){const t=e.call("KeyringController:getKeyringsByType",a.KeyringType.hdKeyTree);if(!(t[0]&&(0,s.hasProperty)(t[0],"seed")&&t[0].seed instanceof Uint8Array))throw new Error("Primary keyring mnemonic unavailable.");return t[0].seed},preinstalledSnaps:u,getFeatureFlags:function(){return{disableSnaps:!1===e.call("PreferencesController:getState").useExternalServices}},ensureOnboardingComplete:async function(){const{completedOnboarding:t}=e.call("OnboardingController:getState");if(t)return;const{promise:n,resolve:r}=(0,s.createDeferredPromise)(),o=t=>{t.completedOnboarding&&(r(),e.unsubscribe("OnboardingController:stateChange",o))};e.subscribe("OnboardingController:stateChange",o),await n},trackEvent:e.call.bind(e,"MetaMetricsController:trackEvent")});return e.subscribe("KeyringController:lock",()=>{e.call("SnapController:setClientActive",!1)}),e.subscribe("KeyringController:unlock",()=>{e.call("SnapController:setClientActive",!0)}),{controller:m}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-controller-init.ts"}],[194,{"@metamask/snaps-controllers":2532},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapInsightsControllerInit=void 0;var r=e("@metamask/snaps-controllers");n.SnapInsightsControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SnapInsightsController({state:t.SnapInsightsController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-insights-controller-init.ts"}],[195,{"@metamask/snaps-controllers":2532},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapInterfaceControllerInit=void 0;var r=e("@metamask/snaps-controllers");n.SnapInterfaceControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SnapInterfaceController({state:t.SnapInterfaceController,messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snap-interface-controller-init.ts"}],[196,{"../../lib/SnapsNameProvider":247},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapsNameProviderInit=void 0;var r=e("../../lib/SnapsNameProvider");n.SnapsNameProviderInit=({controllerMessenger:e})=>({persistedStateKey:null,memStateKey:null,controller:new r.SnapsNameProvider({messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snaps-name-provider-init.ts"}],[197,{"../../lib/util":353,"@metamask/snaps-controllers":2532,semver:5411},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapsRegistryInit=void 0;var r=e("@metamask/snaps-controllers"),s=e("semver"),o=e("../../lib/util");n.SnapsRegistryInit=({controllerMessenger:e,persistedState:t})=>{const n=(0,o.getBooleanFlag)(!0),i="13.11.0",a=(0,s.parse)(i),c=a?`${a.major}.${a.minor}.${a.patch}`:i;return{controller:new r.JsonSnapsRegistry({state:t.SnapsRegistry,messenger:e,refetchOnAllowlistMiss:n,clientConfig:{type:"extension",version:c}})}}}}},{package:"$root$",file:"app/scripts/controller-init/snaps/snaps-registry-init.ts"}],[198,{"@metamask/snaps-controllers":2532},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WebSocketServiceInit=void 0;var r=e("@metamask/snaps-controllers");n.WebSocketServiceInit=({controllerMessenger:e})=>({memStateKey:null,persistedStateKey:null,controller:new r.WebSocketService({messenger:e})})}}},{package:"$root$",file:"app/scripts/controller-init/snaps/websocket-service-init.ts"}],[1987,{"./onekey-keyring.cjs":1988,"./trezor-connect-bridge.cjs":1989,"./trezor-keyring.cjs":1990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./trezor-keyring.cjs"),n),s(e("./onekey-keyring.cjs"),n),s(e("./trezor-connect-bridge.cjs"),n)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/index.cjs"}],[1988,{"./trezor-keyring.cjs":1990},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OneKeyKeyring=void 0;const r=e("./trezor-keyring.cjs"),s="OneKey Hardware";class o extends r.TrezorKeyring{constructor(){super(...arguments),this.type=s}}n.OneKeyKeyring=o,o.type=s}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/onekey-keyring.cjs"}],[1989,{"@trezor/connect-web":3038},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.TrezorConnectBridge=void 0;const i=o(e("@trezor/connect-web"));n.TrezorConnectBridge=class{constructor(){this.trezorConnectInitiated=!1}async init(e){i.default.on(i.DEVICE_EVENT,e=>{var t;e.type===i.DEVICE.CONNECT&&(this.model=null===(t=e.payload.features)||void 0===t?void 0:t.model)}),this.trezorConnectInitiated||(await i.default.init(e),this.trezorConnectInitiated=!0)}async dispose(){return i.default.dispose(),Promise.resolve()}getPublicKey(e){return i.default.getPublicKey(e)}ethereumSignTransaction(e){return i.default.ethereumSignTransaction(e)}ethereumSignMessage(e){return i.default.ethereumSignMessage(e)}ethereumSignTypedData(e){return i.default.ethereumSignTypedData(e)}}}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-connect-bridge.cjs"}],[199,{"@metamask/permission-controller":2329},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubjectMetadataControllerInit=void 0;var r=e("@metamask/permission-controller");n.SubjectMetadataControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.SubjectMetadataController({state:t.SubjectMetadataController,messenger:e,subjectCacheLimit:100})})}}},{package:"$root$",file:"app/scripts/controller-init/subject-metadata-controller-init.ts"}],[1990,{"@ethereumjs/tx":658,"@ethereumjs/util":672,"@metamask/eth-sig-util":1924,"@metamask/utils":2914,"@trezor/connect-plugin-ethereum":3029,buffer:3880,hdkey:4393},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s,o,i,a,c,l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TrezorKeyring=n.TREZOR_CONNECT_MANIFEST=void 0;const d=e("@ethereumjs/tx"),p=e("@ethereumjs/util"),g=e("@metamask/eth-sig-util"),h=e("@metamask/utils"),m=e("@trezor/connect-plugin-ethereum"),f=u(e("hdkey")),b="m/44'/60'/0'/0",w="m/44'/1'/0'/0",v="m/44'/60'/0'",y={[b]:!0,[v]:!0,[w]:!0},C="Trezor Hardware",M=1e3;async function k(e){return new Promise(t=>setTimeout(t,e))}function S(e){return"function"==typeof e.getChainId}n.TREZOR_CONNECT_MANIFEST={appName:"MetaMask",email:"support@metamask.io",appUrl:"https://metamask.io"};class A{constructor({bridge:e}){if(r.add(this),this.type=C,this.accounts=[],this.hdk=new f.default,this.hdPath=b,this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={},!e)throw new Error("Bridge is a required dependency for the keyring");this.bridge=e}getModel(){return this.bridge.model}async init(){return this.bridge.init({manifest:n.TREZOR_CONNECT_MANIFEST,lazyLoad:!0})}async destroy(){return this.bridge.dispose()}async serialize(){return Promise.resolve({hdPath:this.hdPath,accounts:this.accounts.slice(),page:this.page,paths:this.paths,perPage:this.perPage,unlockedAccount:this.unlockedAccount})}async deserialize(e){var t,n,r,s;return this.hdPath=null!==(t=e.hdPath)&&void 0!==t?t:b,this.accounts=null!==(n=e.accounts)&&void 0!==n?n:[],this.page=null!==(r=e.page)&&void 0!==r?r:0,this.perPage=null!==(s=e.perPage)&&void 0!==s?s:5,Promise.resolve()}isUnlocked(){var e;return Boolean(null===(e=this.hdk)||void 0===e?void 0:e.publicKey)}async unlock(){return this.isUnlocked()?Promise.resolve("already unlocked"):new Promise((e,n)=>{this.bridge.getPublicKey({path:this.hdPath,coin:"ETH"}).then(r=>{var s;r.success?(this.hdk.publicKey=t.from(r.payload.publicKey,"hex"),this.hdk.chainCode=t.from(r.payload.chainCode,"hex"),e("just unlocked")):n(new Error((null===(s=r.payload)||void 0===s?void 0:s.error)||"Unknown error"))}).catch(e=>{n(new Error((null==e?void 0:e.toString())||"Unknown error"))})})}setAccountToUnlock(e){this.unlockedAccount=parseInt(String(e),10)}async addAccounts(e){return new Promise((t,n)=>{this.unlock().then(n=>{const s=this.unlockedAccount,o=s+e,i=[];for(let e=s;e<o;e++){const t=l(this,r,"m",a).call(this,"m",e);this.accounts.includes(t)||(this.accounts=[...this.accounts,t],i.push(t)),this.page=0}t(i)}).catch(e=>{n(e)})})}async getFirstPage(){return this.page=0,l(this,r,"m",s).call(this,1)}async getNextPage(){return l(this,r,"m",s).call(this,1)}async getPreviousPage(){return l(this,r,"m",s).call(this,-1)}async getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(e){if(!this.accounts.map(e=>e.toLowerCase()).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter(t=>t.toLowerCase()!==e.toLowerCase())}async signTransaction(e,n){return S(n)?l(this,r,"m",o).call(this,e,n.getChainId(),n,e=>(n.v=t.from(e.v,"hex"),n.r=t.from(e.r,"hex"),n.s=t.from(e.s,"hex"),n)):l(this,r,"m",o).call(this,e,Number(n.common.chainId()),n,e=>{const t=n.toJSON();return t.type=n.type,t.v=(0,h.add0x)(e.v),t.r=(0,h.add0x)(e.r),t.s=(0,h.add0x)(e.s),d.TransactionFactory.fromTxData(t,{common:n.common,freeze:Object.isFrozen(n)})})}async signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,t){return new Promise((n,s)=>{this.unlock().then(o=>{setTimeout(()=>{this.bridge.ethereumSignMessage({path:l(this,r,"m",c).call(this,e),message:(0,h.remove0x)(t),hex:!0}).then(t=>{var r;if(t.success){t.payload.address!==(0,h.getChecksumAddress)(e)&&s(new Error("signature doesnt match the right address"));const r=`0x${t.payload.signature}`;n(r)}else s(new Error((null===(r=t.payload)||void 0===r?void 0:r.error)||"Unknown error"))}).catch(e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))})},"just unlocked"===o?M:0)}).catch(e=>{s(new Error((null==e?void 0:e.toString())||"Unknown error"))})})}async signTypedData(e,t,n){var s,o;const{version:i}=null!=n?n:{version:g.SignTypedDataVersion.V4},a=(0,m.transformTypedData)(t,i===g.SignTypedDataVersion.V4),{types:u,message:d={},domain:p={},primaryType:f,domain_separator_hash:b,message_hash:w}=a,v=await this.unlock();await k("just unlocked"===v?M:0);const y=await this.bridge.ethereumSignTypedData({path:l(this,r,"m",c).call(this,e),data:{types:Object.assign(Object.assign({},u),{EIP712Domain:null!==(s=u.EIP712Domain)&&void 0!==s?s:[]}),message:d,domain:p,primaryType:f},metamask_v4_compat:!0,domain_separator_hash:b,message_hash:null!=w?w:""});if(y.success){if((0,h.getChecksumAddress)(e)!==y.payload.address)throw new Error("signature doesnt match the right address");return y.payload.signature}throw new Error((null===(o=y.payload)||void 0===o?void 0:o.error)||"Unknown error")}forgetDevice(){this.accounts=[],this.hdk=new f.default,this.page=0,this.unlockedAccount=0,this.paths={}}setHdPath(e){if(!y[e])throw new Error(`The setHdPath method does not support setting HD Path to ${e}`);this.hdPath!==e&&(this.hdk=new f.default,this.accounts=[],this.page=0,this.perPage=5,this.unlockedAccount=0,this.paths={}),this.hdPath=e}}n.TrezorKeyring=A,r=new WeakSet,s=async function(e){return this.page+=e,this.page<=0&&(this.page=1),new Promise((e,t)=>{this.unlock().then(t=>{const n=(this.page-1)*this.perPage,s=n+this.perPage,o=[];for(let e=n;e<s;e++){const t=l(this,r,"m",a).call(this,"m",e);o.push({address:t,balance:null,index:e}),this.paths[(0,h.getChecksumAddress)(t)]=e}e(o)}).catch(e=>{t(e)})})},o=async function(e,n,s,o){var a,u,d,p;let g;g=S(s)?{to:l(this,r,"m",i).call(this,s.to),value:l(this,r,"m",i).call(this,s.value),data:l(this,r,"m",i).call(this,s.data),chainId:n,nonce:l(this,r,"m",i).call(this,s.nonce),gasLimit:l(this,r,"m",i).call(this,s.gasLimit),gasPrice:l(this,r,"m",i).call(this,s.gasPrice)}:Object.assign(Object.assign({},s.toJSON()),{chainId:n,to:l(this,r,"m",i).call(this,t.from(null!==(u=null===(a=s.to)||void 0===a?void 0:a.bytes)&&void 0!==u?u:[]))});try{const t=await this.unlock();await k("just unlocked"===t?M:0);const n=await this.bridge.ethereumSignTransaction({path:l(this,r,"m",c).call(this,e),transaction:g});if(n.success){const t=o(n.payload),r=(0,h.getChecksumAddress)((0,h.add0x)(t.getSenderAddress().toString("hex")));if(r!==(0,h.getChecksumAddress)(e))throw new Error("signature doesn't match the right address");return t}throw new Error((null===(d=n.payload)||void 0===d?void 0:d.error)||"Unknown error")}catch(e){throw new Error(null!==(p=null==e?void 0:e.toString())&&void 0!==p?p:"Unknown error")}},i=function(e){return(0,h.bytesToHex)(e)},a=function(e,t){const n=this.hdk.derive(`${e}/${t}`),r=(0,h.bytesToHex)((0,p.publicToAddress)(n.publicKey,!0));return(0,p.toChecksumAddress)(r)},c=function(e){const t=(0,h.getChecksumAddress)(e);let n=this.paths[t];if(void 0===n)for(let e=0;e<1e3;e++)if(t===l(this,r,"m",a).call(this,"m",e)){n=e;break}if(void 0===n)throw new Error("Unknown address");return`${this.hdPath}/${n}`},A.type=C}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/eth-trezor-keyring",file:"node_modules/@metamask/eth-trezor-keyring/dist/trezor-keyring.cjs"}],[20,{"../../../shared/notifications":5765,"@metamask/announcement-controller":1195},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementControllerInit=void 0;var r=e("@metamask/announcement-controller"),s=e("../../../shared/notifications");n.AnnouncementControllerInit=({controllerMessenger:e,persistedState:t})=>({controller:new r.AnnouncementController({messenger:e,allAnnouncements:s.UI_NOTIFICATIONS,state:t.AnnouncementController})})}}},{package:"$root$",file:"app/scripts/controller-init/announcement-controller-init.ts"}],[200,{"./subscription-controller-init":201,"./subscription-service-init":202},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SubscriptionControllerInit",{enumerable:!0,get:function(){return r.SubscriptionControllerInit}}),Object.defineProperty(n,"SubscriptionServiceInit",{enumerable:!0,get:function(){return s.SubscriptionServiceInit}});var r=e("./subscription-controller-init"),s=e("./subscription-service-init")}}},{package:"$root$",file:"app/scripts/controller-init/subscription/index.ts"}],[201,{"../../../../shared/modules/shield":5757,"@metamask/subscription-controller":2806},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubscriptionControllerInit=void 0;var r=e("@metamask/subscription-controller");const s=(0,e("../../../../shared/modules/shield").loadShieldConfig)();n.SubscriptionControllerInit=e=>{const{initMessenger:t,controllerMessenger:n,persistedState:o}=e,i=new r.SubscriptionService({env:s.subscriptionEnv,auth:{getAccessToken:()=>t.call("AuthenticationController:getBearerToken")}});return{controller:new r.SubscriptionController({messenger:n,state:o.SubscriptionController,subscriptionService:i})}}}}},{package:"$root$",file:"app/scripts/controller-init/subscription/subscription-controller-init.ts"}],[202,{"../../services/oauth/web-authenticator-factory":581,"../../services/subscription/subscription-service":582},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubscriptionServiceInit=void 0;var r=e("../../services/subscription/subscription-service"),s=e("../../services/oauth/web-authenticator-factory");n.SubscriptionServiceInit=e=>{const{controllerMessenger:t,platform:n}=e;return{controller:new r.SubscriptionService({messenger:t,platform:n,webAuthenticator:(0,s.webAuthenticatorFactory)()}),memStateKey:null,persistedStateKey:null}}}}},{package:"$root$",file:"app/scripts/controller-init/subscription/subscription-service-init.ts"}],[203,{"../controllers/swaps":236},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SwapsControllerInit=void 0;var r,s=(r=e("../controllers/swaps"))&&r.__esModule?r:{default:r};n.SwapsControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n,getController:r})=>{const o=r("GasFeeController"),i=r("TransactionController");return{controller:new s.default({messenger:e,getBufferedGasLimit:async(e,n)=>{const r=t.call("NetworkController:getState"),{gas:s,simulationFails:o}=await i.estimateGasBuffered(e.txParams,n,r.selectedNetworkClientId);return{gasLimit:s,simulationFails:o}},getEIP1559GasFeeEstimates:(...e)=>o.fetchGasFeeEstimates(...e),getLayer1GasFee:(...e)=>i.getLayer1GasFee(...e),trackMetaMetricsEvent:t.call.bind(t,"MetaMetricsController:trackEvent")},n.SwapsController)}}}}},{package:"$root$",file:"app/scripts/controller-init/swaps-controller-init.ts"}],[204,{"@metamask/assets-controllers":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenBalancesControllerInit=void 0;var r=e("@metamask/assets-controllers");n.TokenBalancesControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const{useMultiAccountBalanceChecker:s}=t.call("PreferencesController:getState");return{controller:new r.TokenBalancesController({messenger:e,state:n.TokenBalancesController,queryMultipleAccounts:s,interval:3e4,allowExternalServices:()=>t.call("PreferencesController:getState").useExternalServices,accountsApiChainIds:()=>{var e;const n=t.call("RemoteFeatureFlagController:getState"),r=null==n||null===(e=n.remoteFeatureFlags)||void 0===e?void 0:e.assetsAccountApiBalances;return Array.isArray(r)?r:[]},platform:"extension"})}}}}},{package:"$root$",file:"app/scripts/controller-init/token-balances-controller-init.ts"}],[205,{"@metamask/assets-controllers":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenDetectionControllerInit=void 0;var r=e("@metamask/assets-controllers");n.TokenDetectionControllerInit=({controllerMessenger:e,initMessenger:t})=>({memStateKey:null,persistedStateKey:null,controller:new r.TokenDetectionController({messenger:e,getBalancesInSingleCall:(...e)=>t.call("AssetsContractController:getBalancesInSingleCall",...e),trackMetaMetricsEvent:(...e)=>t.call("MetaMetricsController:trackEvent",...e),useAccountsAPI:!0,platform:"extension",useTokenDetection:()=>t.call("PreferencesController:getState").useTokenDetection,useExternalServices:()=>t.call("PreferencesController:getState").useExternalServices})})}}},{package:"$root$",file:"app/scripts/controller-init/token-detection-controller-init.ts"}],[206,{"../lib/util":353,"./init-utils":58,"@metamask/assets-controllers":1233},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenListControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("../lib/util"),o=e("./init-utils");n.TokenListControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const i=t.call("PreferencesController:getState"),a=e=>{const{useTokenDetection:t,useTransactionSimulations:n,preferences:r}=e??{},{petnamesEnabled:s}=r??{};return t||s||n},c=new r.TokenListController({messenger:e,state:n.TokenListController,preventPollingOnNetworkRestart:!a(i),chainId:(0,o.getGlobalChainId)(t)});return t.subscribe("PreferencesController:stateChange",(0,s.previousValueComparator)((e,t)=>(((e,t)=>{const n=a(t),r=a(e);n!==r&&c.updatePreventPollingOnNetworkRestart(!r)})(t,e),!0),i)),{controller:c}}}}},{package:"$root$",file:"app/scripts/controller-init/token-list-controller-init.ts"}],[207,{"./init-utils":58,"@metamask/assets-controllers":1233,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokensControllerInit=void 0;var r=e("@metamask/assets-controllers"),s=e("@metamask/utils"),o=e("./init-utils");n.TokensControllerInit=({controllerMessenger:e,initMessenger:t,persistedState:n})=>{const{provider:i}=t.call("NetworkController:getSelectedNetworkClient")??{};(0,s.assert)(i,"Provider is required to initialize TokensController.");return{controller:new r.TokensController({messenger:e,state:n.TokensController,provider:i,chainId:(0,o.getGlobalChainId)(t)})}}}}},{package:"$root$",file:"app/scripts/controller-init/tokens-controller-init.ts"}],[208,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){}}},{package:"$root$",file:"app/scripts/controller-init/types.ts"}],[209,{"./messengers":105,"./types":208,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.initControllers=function({baseControllerMessenger:e,existingControllers:t=[],initFunctions:n,initRequest:r}){o("Initializing controllers",Object.keys(n).length);const i=t.reduce((e,t)=>(e[t.name]=t,e),{}),a={},c={};let l={};const u=e=>function(e,t){const n=e[t];if(!n)throw new Error(`Controller requested before it was initialized: ${String(t)}`);return n}(i,e);for(const[t,d]of Object.entries(n)){const n=t,p=d,g=s.CONTROLLER_MESSENGERS[n],h=null==g?void 0:g.getMessenger,m=null==g?void 0:g.getInitMessenger,f={...r,controllerMessenger:null==h?void 0:h(e),getController:u,initMessenger:null==m?void 0:m(e)},b=p({...f,controllerMessenger:f.controllerMessenger}),{controller:w,persistedStateKey:v,memStateKey:y}=b,C=b.api??{},M=null===v?undefined:v??n,k=null===y?undefined:y??n;i[n]=w,l={...l,...C},M&&(a[M]=w),k&&(c[k]=w),o("Initialized controller",n,{api:Object.keys(C),persistedStateKey:M,memStateKey:k})}return{controllerApi:l,controllerMemState:c,controllerPersistedState:a,controllersByName:i}};var r=e("@metamask/utils"),s=(e("./types"),e("./messengers"));const o=(0,r.createProjectLogger)("controller-init")}}},{package:"$root$",file:"app/scripts/controller-init/utils.ts"}],[21,{"../controllers/app-metadata":212},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppMetadataControllerInit=void 0;var r,s=(r=e("../controllers/app-metadata"))&&r.__esModule?r:{default:r};n.AppMetadataControllerInit=({controllerMessenger:e,persistedState:t,currentMigrationVersion:n})=>({controller:new s.default({state:t.AppMetadataController,messenger:e,currentAppVersion:"13.11.0",currentMigrationVersion:n})})}}},{package:"$root$",file:"app/scripts/controller-init/app-metadata-controller-init.ts"}],[210,{"@metamask/base-controller":1297},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountOrderController=void 0;var r=e("@metamask/base-controller");const s={pinnedAccountList:[],hiddenAccountList:[]},o={pinnedAccountList:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},hiddenAccountList:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class i extends r.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:o,name:"AccountOrderController",state:{...s,...t}})}updateAccountsList(e){this.update(t=>(t.pinnedAccountList=e,t))}updateHiddenAccountsList(e){this.update(t=>(t.hiddenAccountList=e,t))}}n.AccountOrderController=i}}},{package:"$root$",file:"app/scripts/controllers/account-order.ts"}],[211,{"../../../shared/constants/alerts":5596,"@metamask/base-controller":1297},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultAlertControllerState=n.AlertController=void 0;var r=e("@metamask/base-controller"),s=e("../../../shared/constants/alerts");function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function i(e,t,n){return e.set(a(e,t),n),n}function a(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const c=()=>({alertEnabledness:s.TOGGLEABLE_ALERT_TYPES.reduce((e,t)=>(e[t]=!0,e),{}),unconnectedAccountAlertShownOrigins:{},web3ShimUsageOrigins:{}});n.getDefaultAlertControllerState=c;const l={alertEnabledness:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},unconnectedAccountAlertShownOrigins:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},web3ShimUsageOrigins:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0}};var u=new WeakMap,d=new WeakSet;class p extends r.BaseController{constructor(e){var t,n;super({messenger:e.messenger,metadata:l,name:"AlertController",state:{...c(),...e.state}}),o(t=this,n=d),n.add(t),function(e,t,n){o(e,t),t.set(e,n)}(this,u,void 0),i(u,this,this.messenger.call("AccountsController:getSelectedAccount").address),this.messenger.subscribe("AccountsController:selectedAccountChange",e=>{this.state.unconnectedAccountAlertShownOrigins&&function(e,t){return e.get(a(e,t))}(u,this)!==e.address&&(i(u,this,e.address),this.update(e=>{e.unconnectedAccountAlertShownOrigins={}}))})}setAlertEnabledness(e,t){this.update(n=>{n.alertEnabledness[e]=t})}setUnconnectedAccountAlertShown(e){this.update(t=>{t.unconnectedAccountAlertShownOrigins[e]=!0})}getWeb3ShimUsageState(e){var t;return null===(t=this.state.web3ShimUsageOrigins)||void 0===t?void 0:t[e]}setWeb3ShimUsageRecorded(e){a(d,this,g).call(this,e,s.Web3ShimUsageAlertStates.recorded)}setWeb3ShimUsageAlertDismissed(e){a(d,this,g).call(this,e,s.Web3ShimUsageAlertStates.dismissed)}}function g(e,t){this.update(n=>{n.web3ShimUsageOrigins&&(n.web3ShimUsageOrigins[e]=t)})}n.AlertController=p}}},{package:"$root$",file:"app/scripts/controllers/alert-controller.ts"}],[212,{"@metamask/base-controller":1297},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultAppMetadataControllerState=n.default=void 0;var r=e("@metamask/base-controller");function s(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function o(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const i=()=>({currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0});n.getDefaultAppMetadataControllerState=i;const a={currentAppVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},previousAppVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},previousMigrationVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},currentMigrationVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1}};var c=new WeakSet;class l extends r.BaseController{constructor({state:e={},messenger:t,currentAppVersion:n="",currentMigrationVersion:r=0}){super({name:"AppMetadataController",metadata:a,state:{currentAppVersion:"",previousAppVersion:"",previousMigrationVersion:0,currentMigrationVersion:0,...e},messenger:t}),s(this,c),o(c,this,u).call(this,n),o(c,this,d).call(this,r)}}function u(e){const t=this.state.currentAppVersion;e!==t&&this.update(n=>{n.currentAppVersion=e,n.previousAppVersion=t})}function d(e){const t=this.state.currentMigrationVersion;e!==t&&this.update(n=>{n.previousMigrationVersion=t,n.currentMigrationVersion=e})}n.default=l}}},{package:"$root$",file:"app/scripts/controllers/app-metadata.ts"}],[213,{"../../../shared/constants/alarms":5595,"../../../shared/constants/app":5598,"../../../shared/constants/preferences":5622,"../../../shared/constants/time":5635,"../../../shared/modules/mv3.utils":5744,"../../../ui/helpers/utils/build-types":6925,"@metamask/base-controller":1297,"@metamask/controller-utils":1383,"@metamask/utils":2914,loglevel:4643,uuid:5554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppStateController=void 0;var r,s=e("uuid"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("@metamask/controller-utils"),a=e("@metamask/base-controller"),c=e("@metamask/utils"),l=e("../../../shared/constants/time"),u=e("../../../shared/constants/alarms"),d=e("../../../shared/modules/mv3.utils"),p=e("../../../ui/helpers/utils/build-types"),g=e("../../../shared/constants/app"),h=e("../../../shared/constants/preferences");function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t,n){b(e,t),t.set(e,n)}function b(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function w(e,t){return e.get(y(e,t))}function v(e,t,n){return e.set(y(e,t),n),n}function y(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const C={activeQrCodeScanRequest:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},addressSecurityAlertResponses:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},appActiveTab:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},browserEnvironment:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},connectedStatusPopoverHasBeenShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},currentExtensionPopupId:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},currentPopupId:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},defaultHomeActiveTabName:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enableEnforcedSimulations:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enableEnforcedSimulationsForTransactions:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},enforcedSimulationsSlippage:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},enforcedSimulationsSlippageForTransactions:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},fullScreenGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},hadAdvancedGasFeesSetPriorToMigration92_3:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},canTrackWalletFundsObtained:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},isRampCardClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isUpdateAvailable:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},lastInteractedConfirmationInfo:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastUpdatedAt:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastUpdatedFromVersion:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},lastViewedUserSurvey:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},networkConnectionBanner:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},newPrivacyPolicyToastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},newPrivacyPolicyToastShownDate:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},nftsDetectionNoticeDismissed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},nftsDropdownState:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},notificationGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},onboardingDate:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},outdatedBrowserWarningLastShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},popupGasPollTokens:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},productTour:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},recoveryPhraseReminderHasBeenShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},recoveryPhraseReminderLastShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showAccountBanner:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showBetaHeader:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showDownloadMobileAppSlide:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showNetworkBanner:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showPermissionsTour:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},showTestnetMessageInDropdown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},signatureSecurityAlertResponses:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},slides:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},snapsInstallPrivacyWarningShown:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},surveyLinkLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},shieldEndingToastLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},shieldPausedToastLastClickedOrClosed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},termsOfUseLastAgreed:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},throttledOrigins:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},timeoutMinutes:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},trezorModel:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},updateModalLastDismissedAt:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},hasShownMultichainAccountsIntroModal:{persist:!0,includeInDebugSnapshot:!0,usedInUi:!0,includeInStateLogs:!0},showShieldEntryModalOnce:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},pendingShieldCohort:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!0,usedInUi:!0},pendingShieldCohortTxType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},isWalletResetInProgress:{persist:!0,includeInDebugSnapshot:!0,usedInUi:!0,includeInStateLogs:!0},defaultSubscriptionPaymentOptions:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},shieldSubscriptionMetricsProps:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},dappSwapComparisonData:{includeInStateLogs:!1,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};var M=new WeakMap,k=new WeakMap,S=new WeakMap,A=new WeakMap,I=new WeakMap,T=new WeakSet;class E extends a.BaseController{constructor({state:e={},messenger:t,onInactiveTimeout:n,extension:r}){super({name:"AppStateController",metadata:C,state:{activeQrCodeScanRequest:null,appActiveTab:undefined,browserEnvironment:{},connectedStatusPopoverHasBeenShown:!0,defaultHomeActiveTabName:null,enableEnforcedSimulations:!0,enableEnforcedSimulationsForTransactions:{},enforcedSimulationsSlippage:10,enforcedSimulationsSlippageForTransactions:{},fullScreenGasPollTokens:[],hadAdvancedGasFeesSetPriorToMigration92_3:!1,canTrackWalletFundsObtained:!0,isRampCardClosed:!1,isUpdateAvailable:!1,lastUpdatedAt:null,lastUpdatedFromVersion:null,lastViewedUserSurvey:null,newPrivacyPolicyToastClickedOrClosed:null,newPrivacyPolicyToastShownDate:null,nftsDetectionNoticeDismissed:!1,notificationGasPollTokens:[],onboardingDate:null,outdatedBrowserWarningLastShown:null,popupGasPollTokens:[],productTour:"accountIcon",recoveryPhraseReminderHasBeenShown:!1,recoveryPhraseReminderLastShown:(new Date).getTime(),showAccountBanner:!0,showBetaHeader:(0,p.isBeta)(),showDownloadMobileAppSlide:!0,showNetworkBanner:!0,showPermissionsTour:!0,showTestnetMessageInDropdown:!0,slides:[],surveyLinkLastClickedOrClosed:null,shieldEndingToastLastClickedOrClosed:null,shieldPausedToastLastClickedOrClosed:null,throttledOrigins:{},timeoutMinutes:h.DEFAULT_AUTO_LOCK_TIME_LIMIT,trezorModel:null,updateModalLastDismissedAt:null,hasShownMultichainAccountsIntroModal:!1,showShieldEntryModalOnce:null,pendingShieldCohort:null,pendingShieldCohortTxType:null,isWalletResetInProgress:!1,dappSwapComparisonData:{},addressSecurityAlertResponses:{},currentExtensionPopupId:0,nftsDropdownState:{},signatureSecurityAlertResponses:{},networkConnectionBanner:{status:"unknown"},...e,addressSecurityAlertResponses:{},currentExtensionPopupId:0,nftsDropdownState:{},signatureSecurityAlertResponses:{},networkConnectionBanner:{status:"unknown"}},messenger:t}),function(e,t){b(e,t),t.add(e)}(this,T),f(this,M,void 0),f(this,k,void 0),f(this,S,void 0),m(this,"waitingForUnlock",void 0),f(this,A,void 0),f(this,I,null),m(this,"getAddressSecurityAlertResponse",e=>{const t=this.state.addressSecurityAlertResponses[e];if(!t)return undefined;const n=Date.now(),r=15*l.MINUTE;if(n-t.timestamp>r)return this.update(t=>{delete t.addressSecurityAlertResponses[e]}),undefined;const{timestamp:s,...o}=t;return o}),m(this,"addAddressSecurityAlertResponse",(e,t)=>{this.update(n=>{n.addressSecurityAlertResponses[e]={...t,timestamp:Date.now()}})}),v(M,this,r),v(k,this,n||(()=>undefined)),v(S,this,null),this.waitingForUnlock=[],t.subscribe("KeyringController:unlock",y(T,this,P).bind(this)),t.subscribe("PreferencesController:stateChange",({preferences:e})=>{const t=this.state;"number"==typeof(null==e?void 0:e.autoLockTimeLimit)&&t.timeoutMinutes!==e.autoLockTimeLimit&&y(T,this,j).call(this,e.autoLockTimeLimit)});const{preferences:s}=t.call("PreferencesController:getState");"number"==typeof s.autoLockTimeLimit&&y(T,this,j).call(this,s.autoLockTimeLimit),this.messenger.registerActionHandler("AppStateController:getUnlockPromise",this.getUnlockPromise.bind(this)),this.messenger.registerActionHandler("AppStateController:requestQrCodeScan",y(T,this,x).bind(this)),this.messenger.registerActionHandler("AppStateController:setCanTrackWalletFundsObtained",this.setCanTrackWalletFundsObtained.bind(this)),v(A,this,null)}getUnlockPromise(e){return new Promise(t=>{const{isUnlocked:n}=this.messenger.call("KeyringController:getState");n?t():y(T,this,_).call(this,t,e)})}setDefaultHomeActiveTabName(e){this.update(t=>{t.defaultHomeActiveTabName=e})}setConnectedStatusPopoverHasBeenShown(){this.update(e=>{e.connectedStatusPopoverHasBeenShown=!0})}setRecoveryPhraseReminderHasBeenShown(){this.update(e=>{e.recoveryPhraseReminderHasBeenShown=!0})}setSurveyLinkLastClickedOrClosed(e){this.update(t=>{t.surveyLinkLastClickedOrClosed=e})}setOnboardingDate(){this.update(e=>{e.onboardingDate=Date.now()})}setLastViewedUserSurvey(e){this.update(t=>{t.lastViewedUserSurvey=e})}setRampCardClosed(){this.update(e=>{e.isRampCardClosed=!0})}setNewPrivacyPolicyToastClickedOrClosed(){this.update(e=>{e.newPrivacyPolicyToastClickedOrClosed=!0})}setNewPrivacyPolicyToastShownDate(e){this.update(t=>{t.newPrivacyPolicyToastShownDate=e})}setShieldPausedToastLastClickedOrClosed(e){this.update(t=>{t.shieldPausedToastLastClickedOrClosed=e})}setShieldEndingToastLastClickedOrClosed(e){this.update(t=>{t.shieldEndingToastLastClickedOrClosed=e})}updateSlides(e){this.update(t=>{const n=t.slides||[],r=e.map(e=>{const t=n.find(t=>t.id===e.id);return t?{...t,...e}:e});t.slides=[...r]})}removeSlide(e){this.update(t=>{const n=t.slides||[];t.slides=n.map(t=>t.id===e?{...t,dismissed:!0}:t),e===g.DOWNLOAD_MOBILE_APP_SLIDE_ID&&(t.showDownloadMobileAppSlide=!1)})}setRecoveryPhraseReminderLastShown(e){this.update(t=>{t.recoveryPhraseReminderLastShown=e})}setTermsOfUseLastAgreed(e){this.update(t=>{t.termsOfUseLastAgreed=e})}setSnapsInstallPrivacyWarningShownStatus(e){this.update(t=>{t.snapsInstallPrivacyWarningShown=e})}setOutdatedBrowserWarningLastShown(e){this.update(t=>{t.outdatedBrowserWarningLastShown=e})}setLastActiveTime(){y(T,this,O).call(this)}setIsUpdateAvailable(e){this.update(t=>{t.isUpdateAvailable=e})}setUpdateModalLastDismissedAt(e){this.update(t=>{t.updateModalLastDismissedAt=e})}setLastUpdatedAt(e){this.update(t=>{t.lastUpdatedAt=e})}setLastUpdatedFromVersion(e){this.update(t=>{t.lastUpdatedFromVersion=e})}setBrowserEnvironment(e,t){this.update(n=>{n.browserEnvironment={os:e,browser:t}})}addPollingToken(e,t){t.toString()!==g.POLLING_TOKEN_ENVIRONMENT_TYPES[g.ENVIRONMENT_TYPE_BACKGROUND]&&y(T,this,D).call(this,t)&&y(T,this,N).call(this,e,t)}removePollingToken(e,t){if(t.toString()!==g.POLLING_TOKEN_ENVIRONMENT_TYPES[g.ENVIRONMENT_TYPE_BACKGROUND]){const n=this.state[t];y(T,this,D).call(this,t)&&this.update(r=>{r[t]=n.filter(t=>t!==e)})}}clearPollingTokens(){this.update(e=>{e.popupGasPollTokens=[],e.notificationGasPollTokens=[],e.fullScreenGasPollTokens=[]})}setShowTestnetMessageInDropdown(e){this.update(t=>{t.showTestnetMessageInDropdown=e})}setShowBetaHeader(e){this.update(t=>{t.showBetaHeader=e})}setShowPermissionsTour(e){this.update(t=>{t.showPermissionsTour=e})}setHasShownMultichainAccountsIntroModal(e){this.update(t=>{t.hasShownMultichainAccountsIntroModal=e})}setProductTour(e){this.update(t=>{t.productTour=e})}setShowNetworkBanner(e){this.update(t=>{t.showNetworkBanner=e})}updateNetworkConnectionBanner(e){this.update(t=>{t.networkConnectionBanner=e})}setShowAccountBanner(e){this.update(t=>{t.showAccountBanner=e})}setCurrentExtensionPopupId(e){this.update(t=>{t.currentExtensionPopupId=e})}setTrezorModel(e){this.update(t=>{t.trezorModel=e})}updateNftDropDownState(e){this.update(t=>{t.nftsDropdownState=e})}getSignatureSecurityAlertResponse(e){return this.state.signatureSecurityAlertResponses[e]}addSignatureSecurityAlertResponse(e){e.securityAlertId&&this.update(t=>{t.signatureSecurityAlertResponses[String(e.securityAlertId)]=e})}setCurrentPopupId(e){this.update(t=>{t.currentPopupId=e})}getLastInteractedConfirmationInfo(){return this.state.lastInteractedConfirmationInfo}setLastInteractedConfirmationInfo(e){this.update(t=>{t.lastInteractedConfirmationInfo=e})}getCurrentPopupId(){return this.state.currentPopupId}getThrottledOriginState(e){return this.state.throttledOrigins[e]}updateThrottledOriginState(e,t){this.update(n=>{n.throttledOrigins[e]=t})}completeQrCodeScan(e){if(!w(I,this))throw new Error("No QR code scan is in progress.");this.update(e=>{e.activeQrCodeScanRequest=null}),w(I,this).resolve(e),v(I,this,null)}cancelQrCodeScan(e){if(!w(I,this))throw new Error("No QR code scan is in progress.");this.update(e=>{e.activeQrCodeScanRequest=null}),w(I,this).reject(e||new Error("Scan cancelled")),v(I,this,null)}setEnableEnforcedSimulations(e){this.update(t=>{t.enableEnforcedSimulations=e})}setEnableEnforcedSimulationsForTransaction(e,t){this.update(n=>{n.enableEnforcedSimulationsForTransactions[e]=t})}setEnforcedSimulationsSlippage(e){this.update(t=>{t.enforcedSimulationsSlippage=e})}setEnforcedSimulationsSlippageForTransaction(e,t){this.update(n=>{n.enforcedSimulationsSlippageForTransactions[e]=t})}setAppActiveTab(e){this.update(t=>{t.appActiveTab=e})}setShowShieldEntryModalOnce(e){this.update(t=>{t.showShieldEntryModalOnce=e})}setPendingShieldCohort(e,t){this.update(n=>{n.pendingShieldCohort=e,t!==undefined&&(n.pendingShieldCohortTxType=t)})}setCanTrackWalletFundsObtained(e){this.update(t=>{t.canTrackWalletFundsObtained=e})}setIsWalletResetInProgress(e){this.update(t=>{t.isWalletResetInProgress=e})}getIsWalletResetInProgress(){return this.state.isWalletResetInProgress}setDefaultSubscriptionPaymentOptions(e){this.update(t=>{t.defaultSubscriptionPaymentOptions=e})}setShieldSubscriptionMetricsProps(e){this.update(t=>{t.shieldSubscriptionMetricsProps=e})}deleteDappSwapComparisonData(e){this.update(t=>{var n;null===(n=t.dappSwapComparisonData)||void 0===n||delete n[e],t.dappSwapComparisonData={...t.dappSwapComparisonData}})}setDappSwapComparisonData(e,t){this.update(n=>{n.dappSwapComparisonData={...n.dappSwapComparisonData,[e]:t}})}getDappSwapComparisonData(e){var t;return(null===(t=this.state.dappSwapComparisonData)||void 0===t?void 0:t[e])??undefined}}function _(e,t){this.waitingForUnlock.push({resolve:e}),this.messenger.publish("AppStateController:unlockChange"),t&&y(T,this,R).call(this)}function P(){if(this.waitingForUnlock.length>0){for(;this.waitingForUnlock.length>0;){var e;null===(e=this.waitingForUnlock.shift())||void 0===e||e.resolve()}this.messenger.publish("AppStateController:unlockChange")}y(T,this,B).call(this)}function j(e){this.update(t=>{t.timeoutMinutes=e}),y(T,this,O).call(this)}function O(){const{timeoutMinutes:e}=this.state;if(w(S,this)?clearTimeout(w(S,this)):d.isManifestV3&&w(M,this).alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM),!e)return;const t=Number(e);d.isManifestV3?(w(M,this).alarms.create(u.AUTO_LOCK_TIMEOUT_ALARM,{delayInMinutes:t,periodInMinutes:t}),w(M,this).alarms.onAlarm.addListener(e=>{e.name===u.AUTO_LOCK_TIMEOUT_ALARM&&(w(k,this).call(this),w(M,this).alarms.clear(u.AUTO_LOCK_TIMEOUT_ALARM))})):v(S,this,setTimeout(()=>w(k,this).call(this),t*l.MINUTE))}function N(e,t){this.update(n=>{n[t].push(e)})}function D(e){return["popupGasPollTokens","notificationGasPollTokens","fullScreenGasPollTokens"].includes(e)}function R(){w(A,this)||(v(A,this,(0,s.v4)()),this.messenger.call("ApprovalController:addRequest",{id:w(A,this),origin:g.ORIGIN_METAMASK,type:i.ApprovalType.Unlock},!0).catch(()=>{v(A,this,null)}))}function B(){if(w(A,this)){try{this.messenger.call("ApprovalController:acceptRequest",w(A,this))}catch(e){o.default.error("Failed to unlock approval request",e)}v(A,this,null)}}function x(e){if(w(I,this))return w(I,this).promise;const t=(0,c.createDeferredPromise)();return v(I,this,t),this.update(t=>{t.activeQrCodeScanRequest=e}),t.promise}n.AppStateController=E}}},{package:"$root$",file:"app/scripts/controllers/app-state-controller.ts"}],[214,{"../../../shared/constants/metametrics":5613,"../../../shared/modules/hexstring-utils":5741,"@metamask/base-controller":1297,"@metamask/controller-utils":1383,"@metamask/utils":2914,buffer:3880,loglevel:4643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.isEIP1024EncryptedMessage=n.getDefaultState=n.default=void 0;var r,s=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("@metamask/base-controller"),i=e("@metamask/controller-utils"),a=e("@metamask/utils"),c=e("../../../shared/constants/metametrics"),l=e("../../../shared/modules/hexstring-utils");function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={unapprovedDecryptMsgs:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},unapprovedDecryptMsgCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}},p=e=>!!((0,a.isObject)(e.data)&&(0,a.hasProperty)(e.data,"version")&&(0,a.hasProperty)(e.data,"nonce")&&(0,a.hasProperty)(e.data,"ephemPublicKey")&&(0,a.hasProperty)(e.data,"ciphertext"));n.isEIP1024EncryptedMessage=p;const g=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});n.getDefaultState=g;class h extends o.BaseController{constructor({getState:e,metricsEvent:t,messenger:n,manager:r}){super({metadata:d,messenger:n,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),u(this,"_getState",void 0),u(this,"_metricsEvent",void 0),u(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this._decryptMessageManager=r,n.subscribe("DecryptMessageManager:unapprovedMessage",this._requestApproval.bind(this)),this._subscribeToMessageState(n,(e,t,n)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=n})}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update(()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}))}clearUnapproved(){this._decryptMessageManager.clearUnapprovedMessages()}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const n=await this._decryptMessageManager.approveMessage(e);if(n.data=this._parseMessageData(n.data),!p(n))throw new Error("Invalid encrypted data.");const r=await this.messenger.call("KeyringController:decryptMessage",n);this._decryptMessageManager.setMessageStatusAndResult(t,r,"decrypted"),this._acceptApproval(t)}catch(e){throw s.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!p(e))throw new Error("Invalid encrypted data.");const n=await this.messenger.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,n),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach(t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)})}_acceptApproval(e){this.messenger.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,n){return n&&this._metricsEvent({event:n,category:c.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe("DecryptMessageManager:stateChange",e=>{const n=this._migrateMessages(e.unapprovedMessages);this.update(r=>{t(r,n,e.unapprovedMessagesCount)})})}_migrateMessages(e){const t={};for(const n of Object.keys(e)){const r=e[n],s=this._migrateMessage(r);t[n]=s}return t}_migrateMessage(e){const{messageParams:t,...n}=e;return{...n,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,n=e.origin||i.ORIGIN_METAMASK;try{this.messenger.call("ApprovalController:addRequest",{id:t,origin:n,type:i.ApprovalType.EthDecrypt},!0)}catch(e){s.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const n=(0,l.stripHexPrefix)(e),r=t.from(n,"hex");return JSON.parse(r.toString("utf8"))}_rejectApproval(e){try{this.messenger.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){s.default.info("Error rejecting request to approval controller",e)}}}n.default=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[215,{"../../../shared/constants/app":5598,"../../../shared/constants/keyring":5609,"../../../shared/constants/metametrics":5613,"@metamask/base-controller":1297,loglevel:4643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("@metamask/base-controller"),i=e("../../../shared/constants/metametrics"),a=e("../../../shared/constants/keyring"),c=e("../../../shared/constants/app");function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u={unapprovedEncryptionPublicKeyMsgs:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},unapprovedEncryptionPublicKeyMsgCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};class d extends o.BaseController{constructor({messenger:e,manager:t,getEncryptionPublicKey:n,getAccountKeyringType:r,getState:s,metricsEvent:o}){super({name:"EncryptionPublicKeyController",metadata:u,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),l(this,"_getEncryptionPublicKey",void 0),l(this,"_getAccountKeyringType",void 0),l(this,"_getState",void 0),l(this,"_encryptionPublicKeyManager",void 0),l(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=n,this._getAccountKeyringType=r,this._getState=s,this._metricsEvent=o,this._encryptionPublicKeyManager=t,this.messenger.subscribe("EncryptionPublicKeyManager:unapprovedMessage",this._requestApproval.bind(this)),this._subscribeToMessageState(e,(e,t,n)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=n})}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update(()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case a.KeyringType.ledger:return new Promise((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))});case a.KeyringType.trezor:return new Promise((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))});case a.KeyringType.lattice:return new Promise((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))});case a.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){s.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const n=await this._encryptionPublicKeyManager.approveMessage(e),r=await this._getEncryptionPublicKey(n.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,r,"received"),this._acceptApproval(t),this._getState()}catch(e){throw s.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach(t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)})}clearUnapproved(){this._encryptionPublicKeyManager.clearUnapprovedMessages()}_cancelAbstractMessage(e,t,n){return n&&this._metricsEvent({event:n,category:i.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe("EncryptionPublicKeyManager:stateChange",e=>{const n=this._migrateMessages(e.unapprovedMessages);this.update(r=>{t(r,n,e.unapprovedMessagesCount)})})}_migrateMessages(e){const t={};for(const n of Object.keys(e)){const r=e[n],s=this._migrateMessage(r);t[n]=s}return t}_migrateMessage(e){const{messageParams:t,...n}=e;return{...n,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,n=e.origin||c.ORIGIN_METAMASK;this.messenger.call("ApprovalController:addRequest",{id:t,origin:n,type:"eth_getEncryptionPublicKey"},!0).catch(()=>{})}_acceptApproval(e){this.messenger.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messenger.call("ApprovalController:rejectRequest",e,"Cancel")}}n.default=d}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[216,{"../../../../shared/lib/accounts/institutional-wallet-snap":5643,"@metamask/base-controller":1297,"@metamask/controller-utils":1383,"@metamask/snaps-utils":2781,"@metamask/transaction-controller":2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InstitutionalSnapController=void 0;var r=e("@metamask/transaction-controller"),s=e("@metamask/snaps-utils"),o=e("@metamask/base-controller"),i=e("@metamask/controller-utils");function a(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function c(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const l=e("../../../../shared/lib/accounts/institutional-wallet-snap").INSTITUTIONAL_WALLET_SNAP_ID,u="InstitutionalSnapController",d={};var p=new WeakSet;class g extends o.BaseController{constructor({messenger:e}){super({messenger:e,name:u,state:{},metadata:d}),a(this,p),c(p,this,h).call(this)}async deferPublicationHook(e){if(await c(p,this,w).call(this,e)){const t=await c(p,this,f).call(this,e);return await c(p,this,b).call(this,e.id,t),!1}return!0}async beforeCheckPendingTransactionHook(e){return!await c(p,this,w).call(this,e)}}function h(){this.messenger.registerActionHandler(`${u}:publishHook`,this.deferPublicationHook.bind(this)),this.messenger.registerActionHandler(`${u}:beforeCheckPendingTransactionHook`,this.beforeCheckPendingTransactionHook.bind(this))}async function m(e){return await this.messenger.call("SnapController:handleRequest",e)}async function f(e){const t={from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,data:e.txParams.data,chainId:e.chainId},n={snapId:l,origin:i.ORIGIN_METAMASK,handler:s.HandlerType.OnRpcRequest,request:{method:"transactions.getMutableTransactionParameters",params:t}},o=await c(p,this,m).call(this,n);return{hash:o.transaction.transactionHash,nonce:o.transaction.nonce,gasLimit:o.transaction.gasLimit,maxFeePerGas:o.transaction.maxFeePerGas,maxPriorityFeePerGas:o.transaction.maxPriorityFeePerGas,type:o.transaction.type,status:r.TransactionStatus.submitted}}async function b(e,{status:t,hash:n,nonce:r,gasLimit:s,maxFeePerGas:o,maxPriorityFeePerGas:i,type:a}){return await this.messenger.call("TransactionController:updateCustodialTransaction",{transactionId:e,status:t,hash:n,nonce:r,gasLimit:s,maxFeePerGas:o,maxPriorityFeePerGas:i,type:a})}async function w(e){var t;const n=await this.messenger.call("AccountsController:getAccountByAddress",e.txParams.from);return null==n||null===(t=n.options.custodian)||void 0===t?void 0:t.deferPublication}n.InstitutionalSnapController=g}}},{package:"$root$",file:"app/scripts/controllers/institutional-snap/InstitutionalSnapController.ts"}],[2160,{"@metamask/base-controller":1297,events:4180,uuid:5554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractMessageManager=void 0;const r=e("@metamask/base-controller"),s=e("events"),o=e("uuid"),i={unapprovedMessages:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0},unapprovedMessagesCount:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};class a extends r.BaseController{constructor({additionalFinishStatuses:e,messenger:t,name:n,securityProviderRequest:r,state:o={}}){super({messenger:t,metadata:i,name:n,state:{unapprovedMessages:{},unapprovedMessagesCount:0,...o}}),this.internalEvents=new s.EventEmitter,this.messages=[],this.securityProviderRequest=r,this.additionalFinishStatuses=e??[]}addRequestToMessageParams(e,t){const n={...e};return t&&(n.requestId=t.id,n.origin=t.origin),n}createUnapprovedMessage(e,t,n){return{id:(0,o.v1)(),messageParams:e,securityAlertResponse:n?.securityAlertResponse,status:"unapproved",time:Date.now(),type:t}}saveMessageList(e=!0){this.update(e=>{e.unapprovedMessages=this.getUnapprovedMessages(),e.unapprovedMessagesCount=this.getUnapprovedMessagesCount()}),e&&this.messenger.publish(`${this.name}:updateBadge`)}setMessageStatus(e,t){const n=this.getMessage(e);if(!n)throw new Error(`${this.name}: Message not found for id: ${e}.`);const r={...n,status:t};this.updateMessage(r),this.internalEvents.emit(`${e}:${t}`,r),("rejected"===t||"signed"===t||"errored"===t||this.additionalFinishStatuses.includes(t))&&this.internalEvents.emit(`${e}:finished`,r)}updateMessage(e,t=!0){const n=this.messages.findIndex(t=>e.id===t.id);-1!==n&&(this.messages[n]=e),this.saveMessageList(t)}async securityCheck(e){if(this.securityProviderRequest){const t=await this.securityProviderRequest(e,e.type);return{...e,securityProviderResponse:t}}return e}clearUnapprovedMessages(){this.update(e=>{e.unapprovedMessages={},e.unapprovedMessagesCount=0})}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter(e=>"unapproved"===e.status).reduce((e,t)=>(e[t.id]=t,e),{})}async addMessage(e){const t=await this.securityCheck(e);this.messages.push(t),this.saveMessageList()}getMessage(e){return this.messages.find(t=>t.id===e)}getAllMessages(){return this.messages}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusInProgress(e){this.setMessageStatus(e,"inProgress")}setMessageStatusSigned(e,t){this.setMessageStatusAndResult(e,t,"signed")}setMessageStatusAndResult(e,t,n){this.setResult(e,t),this.setMessageStatus(e,n)}setResult(e,t){const n=this.getMessage(e);n&&this.updateMessage({...n,rawSig:t},!1)}setMetadata(e,t){const n=this.getMessage(e);if(!n)throw new Error(`${this.name}: Message not found for id: ${e}.`);this.updateMessage({...n,metadata:t},!1)}rejectMessage(e){this.setMessageStatus(e,"rejected")}async waitForFinishStatus(e,t){const{metamaskId:n,...r}=e;return new Promise((e,s)=>{this.internalEvents.once(`${n}:finished`,n=>{switch(n.status){case"signed":return e(n.rawSig);case"rejected":return s(new Error(`MetaMask ${t} Signature: User denied message signature.`));case"errored":return s(new Error(`MetaMask ${t} Signature: ${n.error}`));default:return s(new Error(`MetaMask ${t} Signature: Unknown problem: ${JSON.stringify(r)}`))}})})}}n.AbstractMessageManager=a,n.default=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/AbstractMessageManager.cjs"}],[2161,{"./AbstractMessageManager.cjs":2160,"./utils.cjs":2165,"@metamask/controller-utils":1383},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DecryptMessageManager=void 0;const r=e("@metamask/controller-utils"),s=e("./AbstractMessageManager.cjs"),o=e("./utils.cjs"),i="DecryptMessageManager";class a extends s.AbstractMessageManager{constructor({additionalFinishStatuses:e,messenger:t,securityProviderRequest:n,state:r}){super({additionalFinishStatuses:e,messenger:t,name:i,securityProviderRequest:n,state:r})}async addUnapprovedMessageAsync(e,t){(0,o.validateDecryptedMessageData)(e);const n=await this.addUnapprovedMessage(e,t);return new Promise((t,r)=>{this.internalEvents.once(`${n}:finished`,n=>{switch(n.status){case"decrypted":return t(n.rawSig);case"rejected":return r(new Error("MetaMask DecryptMessage: User denied message decryption."));case"errored":return r(new Error("MetaMask DecryptMessage: This message cannot be decrypted."));default:return r(new Error(`MetaMask DecryptMessage: Unknown problem: ${JSON.stringify(e)}`))}})})}async addUnapprovedMessage(e,t){const n=this.addRequestToMessageParams(e,t);e.data=(0,o.normalizeMessageData)(e.data);const s=this.createUnapprovedMessage(n,r.ApprovalType.EthDecrypt,t),a=s.id;return await this.addMessage(s),this.messenger.publish(`${i}:unapprovedMessage`,{...n,metamaskId:a}),a}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}n.DecryptMessageManager=a}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/DecryptMessageManager.cjs"}],[2162,{"./AbstractMessageManager.cjs":2160,"./utils.cjs":2165,"@metamask/controller-utils":1383},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.EncryptionPublicKeyManager=void 0;const r=e("@metamask/controller-utils"),s=e("./AbstractMessageManager.cjs"),o=e("./utils.cjs");class i extends s.AbstractMessageManager{constructor({additionalFinishStatuses:e,messenger:t,securityProviderRequest:n,state:r}){super({additionalFinishStatuses:e,messenger:t,name:"EncryptionPublicKeyManager",securityProviderRequest:n,state:r})}async addUnapprovedMessageAsync(e,t){(0,o.validateEncryptionPublicKeyMessageData)(e);const n=await this.addUnapprovedMessage(e,t);return new Promise((t,r)=>{this.internalEvents.once(`${n}:finished`,n=>{switch(n.status){case"received":return t(n.rawSig);case"rejected":return r(new Error("MetaMask EncryptionPublicKey: User denied message EncryptionPublicKey."));default:return r(new Error(`MetaMask EncryptionPublicKey: Unknown problem: ${JSON.stringify(e)}`))}})})}async addUnapprovedMessage(e,t){const n=this.addRequestToMessageParams(e,t),s=this.createUnapprovedMessage(n,r.ApprovalType.EthGetEncryptionPublicKey,t),o=s.id;return await this.addMessage(s),this.messenger.publish(`${this.name}:unapprovedMessage`,{...n,metamaskId:o}),o}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve({from:e.data})}}n.EncryptionPublicKeyManager=i,n.default=i}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/EncryptionPublicKeyManager.cjs"}],[2163,{"./AbstractMessageManager.cjs":2160,"./DecryptMessageManager.cjs":2161,"./EncryptionPublicKeyManager.cjs":2162,"./types.cjs":2164},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./AbstractMessageManager.cjs"),n),s(e("./EncryptionPublicKeyManager.cjs"),n),s(e("./DecryptMessageManager.cjs"),n),s(e("./types.cjs"),n)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/index.cjs"}],[2164,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/types.cjs"}],[2165,{"@metamask/controller-utils":1383,"@metamask/utils":2914,buffer:3880},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.validateDecryptedMessageData=n.validateEncryptionPublicKeyMessageData=n.normalizeMessageData=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),o=/^[0-9A-Fa-f]+$/gu;function i(e,t){if(!e||"string"!=typeof e||!(0,r.isValidHexAddress)(e))throw new Error(`Invalid "${t}" address: ${e} must be a valid string.`)}n.normalizeMessageData=function(e){try{const t=(0,s.remove0x)(e);if(t.match(o))return(0,s.add0x)(t)}catch(e){}return(0,s.bytesToHex)(t.from(e,"utf8"))},n.validateEncryptionPublicKeyMessageData=function(e){const{from:t}=e;i(t,"from")},n.validateDecryptedMessageData=function(e){const{from:t}=e;i(t,"from")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/message-manager",file:"node_modules/@metamask/message-manager/dist/utils.cjs"}],[217,{"../../../development/build/constants":586,"../../../shared/constants/alarms":5595,"../../../shared/constants/app":5598,"../../../shared/constants/keyring":5609,"../../../shared/constants/metametrics":5613,"../../../shared/constants/time":5635,"../../../shared/constants/transaction":5637,"../../../shared/lib/trace":5718,"../../../shared/modules/mv3.utils":5744,"../lib/util":353,"@metamask/base-controller":1297,"@metamask/name-controller":2215,"@metamask/utils":2914,buffer:3880,"ethereumjs-util":4138,lodash:4635,uuid:5554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.overrideAnonymousEventNames=n.getDefaultMetaMetricsControllerState=n.default=void 0;var r=e("lodash"),s=e("ethereumjs-util"),o=e("uuid"),i=e("@metamask/name-controller"),a=e("@metamask/utils"),c=e("@metamask/base-controller"),l=e("../../../shared/constants/app"),u=e("../../../shared/constants/metametrics"),d=e("../../../shared/constants/time"),p=e("../../../shared/modules/mv3.utils"),g=e("../../../shared/constants/alarms"),h=e("../lib/util"),m=e("../../../shared/constants/transaction"),f=e("../../../shared/lib/trace"),b=e("../../../development/build/constants"),w=e("../../../shared/constants/keyring");function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t,n){C(e,t),t.set(e,n)}function C(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M(e,t){return e.get(S(e,t))}function k(e,t,n){return e.set(S(e,t),n),n}function S(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const A=n.overrideAnonymousEventNames={[m.TransactionMetaMetricsEvent.added]:m.AnonymousTransactionMetaMetricsEvent.added,[m.TransactionMetaMetricsEvent.approved]:m.AnonymousTransactionMetaMetricsEvent.approved,[m.TransactionMetaMetricsEvent.finalized]:m.AnonymousTransactionMetaMetricsEvent.finalized,[m.TransactionMetaMetricsEvent.rejected]:m.AnonymousTransactionMetaMetricsEvent.rejected,[m.TransactionMetaMetricsEvent.submitted]:m.AnonymousTransactionMetaMetricsEvent.submitted,[u.MetaMetricsEventName.SignatureRequested]:u.MetaMetricsEventName.SignatureRequestedAnon,[u.MetaMetricsEventName.SignatureApproved]:u.MetaMetricsEventName.SignatureApprovedAnon,[u.MetaMetricsEventName.SignatureRejected]:u.MetaMetricsEventName.SignatureRejectedAnon},I=e=>{setTimeout(()=>{throw e})},T=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,h.generateRandomId)()},E={'You must pass either an "anonymousId" or a "userId".':!0},_={metaMetricsId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},participateInMetaMetrics:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},latestNonAnonymousEventTimestamp:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},fragments:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},eventsBeforeMetricsOptIn:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},tracesBeforeMetricsOptIn:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},traits:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1},dataCollectionForMarketing:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!0},marketingCampaignCookieId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!1},segmentApiCalls:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!1,usedInUi:!1}},P=()=>({participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],tracesBeforeMetricsOptIn:[],traits:{},fragments:{},segmentApiCalls:{}});n.getDefaultMetaMetricsControllerState=P;var j=new WeakMap,O=new WeakMap,N=new WeakMap,D=new WeakMap,R=new WeakSet,B=new WeakMap;class x extends c.BaseController{constructor({state:e={},messenger:t,segment:n,version:s,environment:o,extension:i,captureException:c=I}){var l,u;super({name:"MetaMetricsController",metadata:_,state:{participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],tracesBeforeMetricsOptIn:[],traits:{},fragments:{},segmentApiCalls:{},...e},messenger:t}),C(l=this,u=R),u.add(l),y(this,j,void 0),v(this,"chainId",void 0),v(this,"locale",void 0),v(this,"previousUserTraits",void 0),v(this,"version",void 0),y(this,O,void 0),y(this,N,void 0),y(this,D,void 0),y(this,B,(0,r.memoize)((e={})=>Object.values(e).reduce((e,t)=>e.concat(...Object.values(t)),[]))),k(j,this,e=>{const t=(0,a.getErrorMessage)(e);E[t]||c(e)}),this.chainId=S(R,this,F).call(this);const m=this.messenger.call("PreferencesController:getState");this.locale=m.currentLocale.replace("_","-"),this.version="production"===o?s:`${s}-${o}`,k(O,this,i),k(N,this,o),this.messenger.registerActionHandler("MetaMetricsController:trackEvent",this.trackEvent.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:getMetaMetricsId",this.getMetaMetricsId.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:createEventFragment",this.createEventFragment.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:getEventFragmentById",this.getEventFragmentById.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:updateEventFragment",this.updateEventFragment.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:deleteEventFragment",this.deleteEventFragment.bind(this)),this.messenger.registerActionHandler("MetaMetricsController:finalizeEventFragment",this.finalizeEventFragment.bind(this));const f=(0,r.omitBy)(e.fragments,"persist");this.messenger.subscribe("PreferencesController:stateChange",({currentLocale:e})=>{this.locale=null==e?void 0:e.replace("_","-")}),this.messenger.subscribe("NetworkController:networkDidChange",({selectedNetworkClientId:e})=>{this.chainId=S(R,this,F).call(this,e)}),k(D,this,n),Object.values(f).forEach(e=>{this.processAbandonedFragment(e)}),p.isManifestV3&&Object.values(e.segmentApiCalls||{}).forEach(({eventType:e,payload:t})=>{try{S(R,this,Q).call(this,e,t)}catch(e){M(j,this).call(this,e)}}),p.isManifestV3?(M(O,this).alarms.getAll().then(e=>{(0,h.checkAlarmExists)(e,g.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||M(O,this).alarms.create(g.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})}),M(O,this).alarms.onAlarm.addListener(e=>{e.name===g.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()})):setInterval(()=>{this.finalizeAbandonedFragments()},30*d.SECOND)}finalizeAbandonedFragments(){Object.values(this.state.fragments).forEach(e=>{e.timeout&&e.lastUpdated&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.processAbandonedFragment(e)})}generateMetaMetricsId(){return(0,s.bufferToHex)((0,s.keccak)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent)throw new Error(`Must specify success event. Success event was: ${e.event}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.state,n=e.uniqueIdentifier??(0,o.v4)(),s={id:n,...e,lastUpdated:Date.now()},i=e.initialEvent===m.TransactionMetaMetricsEvent.submitted&&t[n]?{...t[n],canDeleteIfAbandoned:!1}:{};return this.update(e=>{e.fragments[n]=(0,r.merge)({},i,s)}),s.initialEvent&&this.trackEvent({event:s.initialEvent,category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:s.page,referrer:s.referrer,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),s}getEventFragmentById(e){return this.state.fragments[e]}processAbandonedFragment(e){e.canDeleteIfAbandoned?this.deleteEventFragment(e.id):this.finalizeEventFragment(e.id,{abandoned:!0})}updateEventFragment(e,t){const{fragments:n}=this.state,s=n[e];if(!s&&e.includes("transaction-submitted-"))this.update(n=>{n.fragments[e]={canDeleteIfAbandoned:!0,category:u.MetaMetricsEventCategory.Transactions,successEvent:m.TransactionMetaMetricsEvent.finalized,id:e,...t,lastUpdated:Date.now()}});else{if(!s)throw new Error(`Event fragment with id ${e} does not exist.`);this.update(n=>{n.fragments[e]=(0,r.merge)(n.fragments[e],{...t,lastUpdated:Date.now()})})}}deleteEventFragment(e){this.state.fragments[e]&&this.update(t=>{delete t.fragments[e]})}finalizeEventFragment(e,{abandoned:t=!1,page:n,referrer:r}={}){const s=this.state.fragments[e];if(!s)throw new Error(`Funnel with id ${e} does not exist.`);const o=t?s.failureEvent:s.successEvent;this.trackEvent({event:o??"",category:s.category,properties:s.properties,sensitiveProperties:s.sensitiveProperties,page:n??s.page,referrer:s.referrer??r,revenue:s.revenue,value:s.value,currency:s.currency,environmentType:s.environmentType,actionId:s.actionId,uniqueIdentifier:s.uniqueIdentifier?`${s.uniqueIdentifier}-${t?"failure":"success"}`:undefined}),this.update(t=>{delete t.fragments[e]})}identify(e){const{metaMetricsId:t,participateInMetaMetrics:n}=this.state;if(!n||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const r=S(R,this,W).call(this,e);S(R,this,V).call(this,r)}updateExtensionUninstallUrl(e,n){const r={av:this.version};e&&(r.mmi=t.from(n).toString("base64"),r.env=M(N,this));const s=new URLSearchParams(r);M(O,this)&&M(O,this).runtime&&M(O,this).runtime.setUninstallURL(`https://metamask.io/uninstalled?${s}`)}async setParticipateInMetaMetrics(e){const{metaMetricsId:t}=this.state,n=e&&!t?this.generateMetaMetricsId():t;return this.update(t=>{t.participateInMetaMetrics=e,t.metaMetricsId=n}),e?(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn(),this.trackTracesAfterMetricsOptIn(),this.clearTracesAfterMetricsOptIn()):this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),M(N,this)!==b.ENVIRONMENT.DEVELOPMENT&&null!==n&&this.updateExtensionUninstallUrl(e,n),n}setDataCollectionForMarketing(e){const{metaMetricsId:t}=this.state;return this.update(t=>{t.dataCollectionForMarketing=e}),!e&&this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),t}setMarketingCampaignCookieId(e){this.update(t=>{t.marketingCampaignCookieId=e})}trackPage(e,t){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==t||!t.isOptInPath))return;const{name:n,params:r,environmentType:s,page:o,referrer:i,actionId:a}=e,{metaMetricsId:c}=this.state,l=c?"userId":"anonymousId",d=c??u.METAMETRICS_ANONYMOUS_ID;S(R,this,Q).call(this,"page",{messageId:T({actionId:a}),[l]:d,name:n,properties:{params:r,locale:this.locale,chain_id:this.chainId,environment_type:s},context:S(R,this,$).call(this,i,o)})}catch(e){M(j,this).call(this,e)}}trackEvent(e,t){S(R,this,U).call(this,e),S(R,this,L).call(this,e,t).catch(e=>{M(j,this).call(this,e)})}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.state;e.forEach(e=>{this.trackEvent(e)})}clearEventsAfterMetricsOptIn(){this.update(e=>{e.eventsBeforeMetricsOptIn=[]})}addEventBeforeMetricsOptIn(e){this.update(t=>{t.eventsBeforeMetricsOptIn.push(e)})}trackTracesAfterMetricsOptIn(){const{tracesBeforeMetricsOptIn:e}=this.state;e.forEach(e=>{"start"===e.type?(0,f.trace)(e.request):"end"===e.type&&(0,f.endTrace)(e.request)})}clearTracesAfterMetricsOptIn(){this.update(e=>{e.tracesBeforeMetricsOptIn=[]})}addTraceBeforeMetricsOptIn(e){this.update(t=>{t.tracesBeforeMetricsOptIn.push(e)})}bufferedTrace(e,t){if(this.state.participateInMetaMetrics)return t?(0,f.trace)(e,t):(0,f.trace)(e);let n;if(e.parentContext&&"object"==typeof e.parentContext){const t=e.parentContext;n=null==t?void 0:t._name}return this.addTraceBeforeMetricsOptIn({type:"start",request:{...e,parentContext:undefined,startTime:e.startTime??Date.now()},parentTraceName:n}),undefined}bufferedEndTrace(e){this.state.participateInMetaMetrics?(0,f.endTrace)(e):this.addTraceBeforeMetricsOptIn({type:"end",request:{...e,timestamp:e.timestamp??Date.now()}})}updateTraits(e){this.update(t=>{t.traits={...t.traits,...e}})}getMetaMetricsId(){let{metaMetricsId:e}=this.state;return e||(e=this.generateMetaMetricsId(),this.update(t=>{t.metaMetricsId=e})),e}_buildUserTraitsObject(e){var t,n,s;const{traits:o}=this.state,i={[u.MetaMetricsUserTrait.AddressBookEntries]:(0,r.sum)(Object.values(e.addressBook).map(r.size)),[u.MetaMetricsUserTrait.InstallDateExt]:o[u.MetaMetricsUserTrait.InstallDateExt]||"",[u.MetaMetricsUserTrait.LedgerConnectionType]:e.ledgerTransportType,[u.MetaMetricsUserTrait.NetworksAdded]:Object.values(e.networkConfigurationsByChainId).map(e=>e.chainId),[u.MetaMetricsUserTrait.NetworksWithoutTicker]:Object.values(e.networkConfigurationsByChainId).filter(({nativeCurrency:e})=>!e).map(({chainId:e})=>e),[u.MetaMetricsUserTrait.ChainIdList]:[...Object.keys(e.networkConfigurationsByChainId).map(e=>`eip155:${parseInt(e,16)}`),...Object.keys(e.multichainNetworkConfigurationsByChainId)],[u.MetaMetricsUserTrait.NftAutodetectionEnabled]:e.useNftDetection,[u.MetaMetricsUserTrait.NumberOfAccounts]:Object.values(e.internalAccounts.accounts).length,[u.MetaMetricsUserTrait.NumberOfNftCollections]:S(R,this,G).call(this,e.allNfts),[u.MetaMetricsUserTrait.NumberOfNfts]:M(B,this).call(this,e.allNfts).length,[u.MetaMetricsUserTrait.NumberOfTokens]:S(R,this,H).call(this,e.allTokens),[u.MetaMetricsUserTrait.NumberOfHDEntropies]:S(R,this,q).call(this,e)??(null===(t=this.previousUserTraits)||void 0===t?void 0:t.number_of_hd_entropies),[u.MetaMetricsUserTrait.OpenSeaApiEnabled]:e.openSeaEnabled,[u.MetaMetricsUserTrait.ThreeBoxEnabled]:!1,[u.MetaMetricsUserTrait.Theme]:e.theme||"default",[u.MetaMetricsUserTrait.TokenDetectionEnabled]:e.useTokenDetection,[u.MetaMetricsUserTrait.ShowNativeTokenAsMainBalance]:e.ShowNativeTokenAsMainBalance,[u.MetaMetricsUserTrait.CurrentCurrency]:e.currentCurrency,[u.MetaMetricsUserTrait.SecurityProviders]:e.securityAlertsEnabled?["blockaid"]:[],[u.MetaMetricsUserTrait.PetnameAddressCount]:S(R,this,Z).call(this,e),[u.MetaMetricsUserTrait.IsMetricsOptedIn]:e.participateInMetaMetrics,[u.MetaMetricsUserTrait.HasMarketingConsent]:e.dataCollectionForMarketing,[u.MetaMetricsUserTrait.TokenSortPreference]:(null===(n=e.tokenSortConfig)||void 0===n?void 0:n.key)||"",[u.MetaMetricsUserTrait.PrivacyModeEnabled]:e.preferences.privacyMode,[u.MetaMetricsUserTrait.NetworkFilterPreference]:Object.keys(e.preferences.tokenNetworkFilter||{}),[u.MetaMetricsUserTrait.ProfileId]:null===(s=Object.entries(e.srpSessionData||{}))||void 0===s||null===(s=s[0])||void 0===s||null===(s=s[1])||void 0===s||null===(s=s.profile)||void 0===s?void 0:s.profileId};if(!this.previousUserTraits&&e.participateInMetaMetrics)return this.previousUserTraits=i,i;if(this.previousUserTraits&&!(0,r.isEqual)(this.previousUserTraits,i)){const t=(0,r.pickBy)(i,(e,t)=>{const n=this.previousUserTraits[t];return!(0,r.isEqual)(n,e)});return e.participateInMetaMetrics&&(this.previousUserTraits=i),t}return null}}function F(e){const t=e||this.messenger.call("NetworkController:getState").selectedNetworkClientId,{configuration:{chainId:n}}=this.messenger.call("NetworkController:getNetworkClientById",t);return n}async function L(e,t){if(!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const n=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const s=A[`${e.event}`],o={...e,event:s??e.event},i=(0,r.merge)({...o.sensitiveProperties},{...o.properties});n.push(S(R,this,X).call(this,S(R,this,K).call(this,{...o,properties:i,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}n.push(S(R,this,X).call(this,S(R,this,K).call(this,e),t)),await Promise.all(n)}function U(e){if(!e.event)throw new Error(`Must specify event. Event was: ${e.event}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}function $(e,t=u.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e,marketingCampaignCookieId:this.state.marketingCampaignCookieId}}function K(e){const{event:t,properties:n,revenue:s,value:o,currency:i,category:a,page:c,referrer:u,environmentType:d=l.ENVIRONMENT_TYPE_BACKGROUND,timestamp:p}=e;let g;return g=n&&"chain_id_caip"in n&&"string"==typeof n.chain_id_caip?null:n&&"chain_id"in n&&"string"==typeof n.chain_id?n.chain_id:this.chainId,{event:t,messageId:T(e),properties:{...(0,r.omit)(n,["revenue","locale","currency","value"]),revenue:s,value:o,currency:i,category:a,locale:this.locale,chain_id:g,environment_type:d},context:S(R,this,$).call(this,u,c),timestamp:p}}function W(e){const t={};for(const[n,r]of Object.entries(e))S(R,this,J).call(this,r)?t[n]=r.toISOString():S(R,this,z).call(this,r)?t[n]=r:console.warn(`MetaMetricsController: "${n}" value is not a valid trait type`);return t}function G(e={}){const t=M(B,this).call(this,e).map(e=>e.address);return new Set(t).size}function H(e){return Object.values(e).reduce((e,t)=>e+(0,r.sum)(Object.values(t).map(r.size)),0)}function q(e){var t;return(null===(t=e.keyrings)||void 0===t?void 0:t.filter(e=>e.type===w.KeyringType.hdKeyTree).length)??0}function V(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{S(R,this,Q).call(this,"identify",{userId:t??undefined,traits:e})}catch(e){M(j,this).call(this,e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}function z(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||S(R,this,Y).call(this,e)||S(R,this,J).call(this,e)}function Y(e){return Array.isArray(e)&&(e.every(e=>"string"==typeof e)||e.every(e=>"boolean"==typeof e)||e.every(e=>"number"==typeof e))}function J(e){return"[object Date]"===Object.prototype.toString.call(e)}function X(e,t){const{isOptIn:n,metaMetricsId:r,matomoEvent:s,flushImmediately:o}=t||{};let i="userId",c=this.state.metaMetricsId,l=(null==t?void 0:t.excludeMetaMetricsId)??!1;const d=Boolean(e.event.match(/^send|^confirm/iu));return!1!==(null==t?void 0:t.excludeMetaMetricsId)&&d&&(l=!0),l||n&&!r?(i="anonymousId",c=u.METAMETRICS_ANONYMOUS_ID):n&&r&&(c=r),e[i]=c??undefined,!0===s&&(e.properties.legacy_event=!0),new Promise((t,n)=>{S(R,this,Q).call(this,"track",e,e=>{if(e){const t=(0,a.isErrorWithMessage)(e)?e.message:"",r=(0,a.isErrorWithStack)(e)?e.stack:undefined,s=new Error(t);return r&&(s.stack=r),n(s)}return t()}),o&&M(D,this).flush()})}function Q(e,t,n){const{metaMetricsId:r,latestNonAnonymousEventTimestamp:s,participateInMetaMetrics:o}=this.state;if(!o||!r)return;const i=t.messageId||(0,h.generateRandomId)();let a=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,h.isValidDate)(e)&&(a=e)}const c={...t,messageId:i,timestamp:a};this.update(t=>{t.latestNonAnonymousEventTimestamp=c.anonymousId===u.METAMETRICS_ANONYMOUS_ID?s:a.valueOf(),t.segmentApiCalls[i]={eventType:e,payload:{...c,timestamp:c.timestamp.toString()}}});M(D,this)[e](c,e=>(this.update(e=>{delete e.segmentApiCalls[i]}),null==n?void 0:n(e)))}function Z(e){var t;const n=(null===(t=e.names)||void 0===t?void 0:t[i.NameType.ETHEREUM_ADDRESS])??{};return Object.keys(n).reduce((e,t)=>{const r=n[t];return e+Object.keys(r).reduce((e,t)=>{var n;return e+(Boolean(null===(n=r[t].name)||void 0===n?void 0:n.length)?1:0)},0)},0)}n.default=x}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics-controller.ts"}],[2173,{"./logger.cjs":2180,"./utils.cjs":2190,"@metamask/account-api":1159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c,l,u,d,p=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountGroup=void 0;const h=e("@metamask/account-api"),m=e("@metamask/account-api"),f=e("./logger.cjs"),b=e("./utils.cjs");n.MultichainAccountGroup=class{constructor({groupIndex:e,wallet:t,providers:n,messenger:h}){r.set(this,void 0),s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,!1),p(this,r,(0,m.toMultichainAccountGroupId)(t.id,e),"f"),p(this,o,e,"f"),p(this,s,t,"f"),p(this,i,n,"f"),p(this,l,h,"f"),p(this,a,new Map,"f"),p(this,c,new Map,"f"),p(this,u,(0,f.createModuleLogger)(f.projectLogger,`[${g(this,r,"f")}]`),"f"),this.sync(),p(this,d,!0,"f")}sync(){g(this,u,"f").call(this,"Synchronizing with account providers..."),g(this,c,"f").clear();for(const e of g(this,i,"f")){const t=[];for(const n of e.getAccounts())n.options.entropy.id===this.wallet.entropySource&&n.options.entropy.groupIndex===this.groupIndex&&t.push(n.id);g(this,a,"f").set(e,t);for(const n of t)g(this,c,"f").set(n,e)}g(this,d,"f")&&g(this,l,"f").publish("MultichainAccountService:multichainAccountGroupUpdated",this),g(this,u,"f").call(this,"Synchronized")}get id(){return g(this,r,"f")}get type(){return h.AccountGroupType.MultichainAccount}get wallet(){return g(this,s,"f")}get groupIndex(){return g(this,o,"f")}hasAccounts(){return g(this,c,"f").size>0}getAccounts(){const e=[];for(const[t,n]of g(this,a,"f").entries())for(const r of n){const n=t.getAccount(r);n&&e.push(n)}return e}getAccount(e){const t=g(this,c,"f").get(e);return t?t.getAccount(e):undefined}get(e){return(0,h.selectOne)(this.getAccounts(),e)}select(e){return(0,h.select)(this.getAccounts(),e)}async alignAccounts(){g(this,u,"f").call(this,"Aligning accounts...");if((await Promise.allSettled(g(this,i,"f").map(async e=>{try{const t=g(this,a,"f").get(e);if(!t||0===t.length){g(this,u,"f").call(this,`Found missing accounts for account provider "${e.getName()}", creating them now...`);const t=await e.createAccounts({entropySource:this.wallet.entropySource,groupIndex:this.groupIndex});return g(this,u,"f").call(this,`Created ${t.length} accounts`),t}return Promise.resolve()}catch(t){g(this,u,"f").call(this,`${f.WARNING_PREFIX} ${t instanceof Error?t.message:String(t)}`);const n=(0,b.createSentryError)(`Unable to align accounts with provider "${e.getName()}"`,t,{groupIndex:this.groupIndex,provider:e.getName()});throw g(this,l,"f").call("ErrorReportingService:captureException",n),t}}))).some(e=>"rejected"===e.status)){const e=`Failed to fully align multichain account group for entropy ID: ${this.wallet.entropySource} and group index: ${this.groupIndex}, some accounts might be missing`;g(this,u,"f").call(this,`${f.WARNING_PREFIX} ${e}`),console.warn(e)}g(this,u,"f").call(this,"Aligned")}},r=new WeakMap,s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/MultichainAccountGroup.cjs"}],[2174,{"./MultichainAccountWallet.cjs":2175,"./analytics/index.cjs":2176,"./logger.cjs":2180,"./providers/AccountProviderWrapper.cjs":2181,"./providers/EvmAccountProvider.cjs":2184,"./providers/SolAccountProvider.cjs":2186,"./utils.cjs":2190,"@metamask/account-api":1159,"@metamask/key-tree":2073,"@metamask/keyring-controller":2110,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c,l,u,d=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},p=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountService=n.serviceName=void 0;const g=e("@metamask/account-api"),h=e("@metamask/key-tree"),m=e("@metamask/keyring-controller"),f=e("@metamask/utils"),b=e("./analytics/index.cjs"),w=e("./logger.cjs"),v=e("./MultichainAccountWallet.cjs"),y=e("./providers/AccountProviderWrapper.cjs"),C=e("./providers/EvmAccountProvider.cjs"),M=e("./providers/SolAccountProvider.cjs"),k=e("./utils.cjs");n.serviceName="MultichainAccountService";n.MultichainAccountService=class{constructor({messenger:e,providers:t=[],providerConfigs:u,config:g}){r.add(this),s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),this.name=n.serviceName,d(this,s,e,"f"),d(this,i,new Map,"f"),d(this,a,new Map,"f");const h=g?.trace??b.traceFallback;d(this,o,[new C.EvmAccountProvider(p(this,s,"f"),u?.[C.EvmAccountProvider.NAME],h),new y.AccountProviderWrapper(p(this,s,"f"),new M.SolAccountProvider(p(this,s,"f"),u?.[M.SolAccountProvider.NAME],h)),...t],"f"),p(this,s,"f").registerActionHandler("MultichainAccountService:getMultichainAccountGroup",(...e)=>this.getMultichainAccountGroup(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:getMultichainAccountGroups",(...e)=>this.getMultichainAccountGroups(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:getMultichainAccountWallet",(...e)=>this.getMultichainAccountWallet(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:getMultichainAccountWallets",(...e)=>this.getMultichainAccountWallets(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:createNextMultichainAccountGroup",(...e)=>this.createNextMultichainAccountGroup(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:createMultichainAccountGroup",(...e)=>this.createMultichainAccountGroup(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:setBasicFunctionality",(...e)=>this.setBasicFunctionality(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:alignWallets",(...e)=>this.alignWallets(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:alignWallet",(...e)=>this.alignWallet(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:createMultichainAccountWallet",(...e)=>this.createMultichainAccountWallet(...e)),p(this,s,"f").registerActionHandler("MultichainAccountService:resyncAccounts",(...e)=>this.resyncAccounts(...e)),p(this,s,"f").subscribe("AccountsController:accountAdded",e=>p(this,r,"m",c).call(this,e)),p(this,s,"f").subscribe("AccountsController:accountRemoved",e=>p(this,r,"m",l).call(this,e))}async init(){(0,w.projectLogger)("Initializing..."),p(this,i,"f").clear(),p(this,a,"f").clear();const{keyrings:e}=p(this,s,"f").call("KeyringController:getState");for(const t of e)if(t.type===m.KeyringTypes.hd){const e=t.metadata.id;(0,w.projectLogger)(`Adding new wallet for entropy: "${e}"`);const n=new v.MultichainAccountWallet({entropySource:e,providers:p(this,o,"f"),messenger:p(this,s,"f")});p(this,i,"f").set(n.id,n);for(const e of n.getMultichainAccountGroups())for(const t of e.getAccounts())p(this,a,"f").set(t.id,{wallet:n,group:e})}(0,w.projectLogger)("Initialized")}async resyncAccounts(){(0,w.projectLogger)("Re-sync provider accounts if needed...");const e=p(this,s,"f").call("AccountsController:listMultichainAccounts").filter(g.isBip44Account);await Promise.all(p(this,o,"f").map(async t=>{try{await t.resyncAccounts(e)}catch(e){const n=`Unable to re-sync provider "${t.getName()}"`;(0,w.projectLogger)(n),console.error(n);const r=(0,k.createSentryError)(n,e,{provider:t.getName()});p(this,s,"f").call("ErrorReportingService:captureException",r)}})),(0,w.projectLogger)("Providers got re-synced!")}getAccountContext(e){return p(this,a,"f").get(e)}getMultichainAccountWallet({entropySource:e}){return p(this,r,"m",u).call(this,e)}getMultichainAccountWallets(){return Array.from(p(this,i,"f").values())}async createMultichainAccountWallet({mnemonic:e}){const t=p(this,s,"f").call("KeyringController:getKeyringsByType",m.KeyringTypes.hd),n=(0,h.mnemonicPhraseToBytes)(e);if(t.some(e=>!!e.mnemonic&&(0,f.areUint8ArraysEqual)(e.mnemonic,n)))throw new Error("This Secret Recovery Phrase has already been imported.");(0,w.projectLogger)("Creating new wallet...");const r=await p(this,s,"f").call("KeyringController:addNewKeyring",m.KeyringTypes.hd,{mnemonic:e}),a=new v.MultichainAccountWallet({providers:p(this,o,"f"),entropySource:r.id,messenger:p(this,s,"f")});return p(this,i,"f").set(a.id,a),(0,w.projectLogger)(`Wallet created: [${a.id}]`),a}getMultichainAccountGroup({entropySource:e,groupIndex:t}){const n=p(this,r,"m",u).call(this,e).getMultichainAccountGroup(t);if(!n)throw new Error(`No multichain account for index: ${t}`);return n}getMultichainAccountGroups({entropySource:e}){return p(this,r,"m",u).call(this,e).getMultichainAccountGroups()}async createNextMultichainAccountGroup({entropySource:e}){return await p(this,r,"m",u).call(this,e).createNextMultichainAccountGroup()}async createMultichainAccountGroup({groupIndex:e,entropySource:t}){return await p(this,r,"m",u).call(this,t).createMultichainAccountGroup(e)}async setBasicFunctionality(e){(0,w.projectLogger)("Turning basic functionality: "+(e?"ON":"OFF"));for(const t of p(this,o,"f"))(0,y.isAccountProviderWrapper)(t)&&((0,w.projectLogger)(`${e?"Enabling":"Disabling"} account provider: "${t.getName()}"`),t.setEnabled(e));e&&await this.alignWallets()}async alignWallets(){(0,w.projectLogger)("Triggering alignment on all wallets...");const e=this.getMultichainAccountWallets();await Promise.all(e.map(e=>e.alignAccounts())),(0,w.projectLogger)("Wallets aligned")}async alignWallet(e){const t=this.getMultichainAccountWallet({entropySource:e});(0,w.projectLogger)(`Triggering alignment for wallet: [${t.id}]`),await t.alignAccounts(),(0,w.projectLogger)(`Wallet [${t.id}] aligned`)}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakSet,c=function(e){if(!(0,g.isBip44Account)(e))return;let t=!0,n=p(this,i,"f").get((0,g.toMultichainAccountWalletId)(e.options.entropy.id));n||((0,w.projectLogger)(`Adding new wallet for entropy: "${e.options.entropy.id}" (for account: "${e.id}")`),n=new v.MultichainAccountWallet({entropySource:e.options.entropy.id,providers:p(this,o,"f"),messenger:p(this,s,"f")}),p(this,i,"f").set(n.id,n),t=!1);let r=n.getMultichainAccountGroup(e.options.entropy.groupIndex);r||(t&&n.sync(),r=n.getMultichainAccountGroup(e.options.entropy.groupIndex),t=!1),r&&(t&&r.sync(),p(this,a,"f").set(e.id,{wallet:n,group:r}))},l=function(e){const t=p(this,a,"f").get(e);if(t){const{wallet:n}=t;(0,w.projectLogger)(`Re-synchronize wallet [${n.id}] since account "${e}" got removed`),n.sync()}p(this,a,"f").delete(e)},u=function(e){const t=p(this,i,"f").get((0,g.toMultichainAccountWalletId)(e));if(!t)throw new Error("Unknown wallet, no wallet matching this entropy source");return t}}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/MultichainAccountService.cjs"}],[2175,{"./MultichainAccountGroup.cjs":2173,"./logger.cjs":2180,"./providers/index.cjs":2188,"./utils.cjs":2190,"@metamask/account-api":1159,"@metamask/utils":2914,"async-mutex":3702},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c,l,u,d,p,g,h,m,f=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},b=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountWallet=void 0;const w=e("@metamask/account-api"),v=e("@metamask/utils"),y=e("async-mutex"),C=e("./logger.cjs"),M=e("./MultichainAccountGroup.cjs"),k=e("./providers/index.cjs"),S=e("./utils.cjs");n.MultichainAccountWallet=class{constructor({providers:e,entropySource:t,messenger:n}){r.add(this),s.set(this,new y.Mutex),o.set(this,void 0),i.set(this,void 0),a.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,!1),p.set(this,void 0),f(this,o,(0,w.toMultichainAccountWalletId)(t),"f"),f(this,i,e,"f"),f(this,a,t,"f"),f(this,l,n,"f"),f(this,c,new Map,"f"),f(this,u,(0,C.createModuleLogger)(C.projectLogger,`[${b(this,o,"f")}]`),"f"),f(this,p,"uninitialized","f"),this.sync(),f(this,d,!0,"f"),f(this,p,"ready","f")}sync(){b(this,u,"f").call(this,"Synchronizing with account providers...");for(const e of b(this,i,"f"))for(const t of e.getAccounts()){const{entropy:e}=t.options;if(e.id!==this.entropySource)continue;let n=b(this,c,"f").get(e.groupIndex);n||(n=new M.MultichainAccountGroup({groupIndex:e.groupIndex,wallet:this,providers:b(this,i,"f"),messenger:b(this,l,"f")}),b(this,u,"f").call(this,`Found a new group: [${n.id}]`),b(this,c,"f").set(e.groupIndex,n))}for(const[e,t]of b(this,c,"f").entries())t.sync(),t.hasAccounts()||(b(this,u,"f").call(this,`Deleting group: [${t.id}]`),b(this,c,"f").delete(e));b(this,u,"f").call(this,"Synchronized")}get id(){return b(this,o,"f")}get type(){return w.AccountWalletType.Entropy}get entropySource(){return b(this,a,"f")}get status(){return b(this,p,"f")}getAccountGroup(e){if(e===(0,w.toDefaultAccountGroupId)(this.id))return b(this,c,"f").get(0);if(!(0,w.isMultichainAccountGroupId)(e))return undefined;const t=(0,w.getGroupIndexFromMultichainAccountGroupId)(e);return b(this,c,"f").get(t)}getAccountGroups(){return this.getMultichainAccountGroups()}getMultichainAccountGroup(e){return b(this,c,"f").get(e)}getMultichainAccountGroups(){return Array.from(b(this,c,"f").values())}getNextGroupIndex(){return Math.max(-1,...b(this,c,"f").keys())+1}async createMultichainAccountGroup(e,t={waitForAllProvidersToFinishCreatingAccounts:!1}){return await b(this,r,"m",g).call(this,"in-progress:create-accounts",async()=>{const n=this.getNextGroupIndex();if(e>n)throw new Error(`You cannot use a group index that is higher than the next available one: expected <=${n}, got ${e}`);let s=this.getMultichainAccountGroup(e);if(s)return s.sync(),b(this,u,"f").call(this,`Trying to re-create existing group: [${s.id}] (idempotent)`),s;b(this,u,"f").call(this,`Creating new group for index ${e}...`);const[o,...p]=b(this,i,"f");(0,v.assert)(o instanceof k.EvmAccountProvider,"EVM account provider must be first");try{await o.createAccounts({entropySource:b(this,a,"f"),groupIndex:e})}catch(t){const n=`Unable to create multichain account group for index: ${e} with provider "${o.getName()}". Error: ${t.message}`;b(this,u,"f").call(this,`${C.ERROR_PREFIX} ${n}:`,t);const r=(0,S.createSentryError)(`Unable to create account with provider "${o.getName()}"`,t,{groupIndex:e,provider:o.getName()});throw b(this,l,"f").call("ErrorReportingService:captureException",r),new Error(n)}return t?.waitForAllProvidersToFinishCreatingAccounts?await b(this,r,"m",h).call(this,{groupIndex:e,providers:p,awaitAll:!0}):b(this,r,"m",h).call(this,{groupIndex:e,providers:p,awaitAll:!1}),s=this.getMultichainAccountGroup(e),s||(s=new M.MultichainAccountGroup({wallet:this,providers:b(this,i,"f"),groupIndex:e,messenger:b(this,l,"f")})),b(this,c,"f").set(e,s),b(this,u,"f").call(this,`New group created: [${s.id}]`),b(this,d,"f")&&b(this,l,"f").publish("MultichainAccountService:multichainAccountGroupCreated",s),s})}async createNextMultichainAccountGroup(){return this.createMultichainAccountGroup(this.getNextGroupIndex(),{waitForAllProvidersToFinishCreatingAccounts:!0})}async alignAccounts(){await b(this,r,"m",g).call(this,"in-progress:alignment",async()=>{await b(this,r,"m",m).call(this)})}async alignAccountsOf(e){await b(this,r,"m",g).call(this,"in-progress:alignment",async()=>{const t=this.getMultichainAccountGroup(e);t&&await t.alignAccounts()})}async discoverAccounts(){return b(this,r,"m",g).call(this,"in-progress:discovery",async()=>{let e=this.getNextGroupIndex();const t=b(this,i,"f").map(t=>({provider:t,stopped:!1,groupIndex:e,accounts:[]}));return await Promise.all(t.map(async t=>{const n=t.provider.getName(),r=(e,t)=>`[${n}] Discovery ${e} for group index: ${t}`;for(;!t.stopped;){const s=Math.max(t.groupIndex,e);(0,C.projectLogger)(r("started",s));let o=[];try{o=await t.provider.discoverAccounts({entropySource:b(this,a,"f"),groupIndex:s})}catch(e){t.stopped=!0,console.error(e),(0,C.projectLogger)(r(`failed (with: "${e.message}")`,s),e);const o=(0,S.createSentryError)("Unable to discover accounts",e,{provider:n,groupIndex:s});b(this,l,"f").call("ErrorReportingService:captureException",o);break}if(!o.length){(0,C.projectLogger)(r("stopped (no accounts got discovered)",s)),t.stopped=!0;break}(0,C.projectLogger)(r("**succeeded**",s)),t.accounts=t.accounts.concat(o);const i=s+1;t.groupIndex=i,i>e&&(e=i)}})),this.sync(),await b(this,r,"m",m).call(this),t.flatMap(e=>e.accounts)})}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,r=new WeakSet,g=async function(e,t){const n=await b(this,s,"f").acquire();try{return b(this,u,"f").call(this,`Locking wallet with status "${e}"...`),f(this,p,e,"f"),b(this,l,"f").publish("MultichainAccountService:walletStatusChange",this.id,b(this,p,"f")),await t()}finally{f(this,p,"ready","f"),b(this,l,"f").publish("MultichainAccountService:walletStatusChange",this.id,b(this,p,"f")),n(),b(this,u,"f").call(this,`Releasing wallet lock (was "${e}")`)}},h=async function({groupIndex:e,providers:t,awaitAll:n}){if(n){const n=t.map(t=>t.createAccounts({entropySource:b(this,a,"f"),groupIndex:e}).catch(n=>{const r=(0,S.createSentryError)(`Unable to create account with provider "${t.getName()}"`,n,{groupIndex:e,provider:t.getName()});throw b(this,l,"f").call("ErrorReportingService:captureException",r),n})),r=await Promise.allSettled(n);if(r.some(e=>"rejected"===e.status)){const t=(0,S.toRejectedErrorMessage)(`Unable to create multichain account group for index: ${e}`,r);throw b(this,u,"f").call(this,`${C.WARNING_PREFIX} ${t}`),console.warn(t),new Error(t)}return}t.forEach(t=>{t.createAccounts({entropySource:b(this,a,"f"),groupIndex:e}).catch(n=>{const r=`Unable to create multichain account group for index: ${e} (background mode with provider "${t.getName()}")`;b(this,u,"f").call(this,`${C.WARNING_PREFIX} ${r}:`,n);const s=(0,S.createSentryError)(`Unable to create account with provider "${t.getName()}"`,n,{groupIndex:e,provider:t.getName()});b(this,l,"f").call("ErrorReportingService:captureException",s)})})},m=async function(){const e=this.getMultichainAccountGroups();await Promise.all(e.map(e=>e.alignAccounts()))}}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/MultichainAccountWallet.cjs"}],[2176,{"./traces.cjs":2177},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./traces.cjs"),n)}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/analytics/index.cjs"}],[2177,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.traceFallback=void 0;n.traceFallback=async(e,t)=>t?await Promise.resolve(t()):undefined}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/analytics/traces.cjs"}],[2178,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.TraceName=void 0,function(e){e.SnapDiscoverAccounts="Snap Discover Accounts",e.EvmDiscoverAccounts="EVM Discover Accounts"}(r||(n.TraceName=r={}))}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/constants/traces.cjs"}],[2179,{"./MultichainAccountGroup.cjs":2173,"./MultichainAccountService.cjs":2174,"./MultichainAccountWallet.cjs":2175,"./providers/index.cjs":2188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainAccountService=n.MultichainAccountGroup=n.MultichainAccountWallet=n.TrxAccountProvider=n.TRX_ACCOUNT_PROVIDER_NAME=n.BtcAccountProvider=n.BTC_ACCOUNT_PROVIDER_NAME=n.SolAccountProvider=n.SOL_ACCOUNT_PROVIDER_NAME=n.EvmAccountProvider=n.EVM_ACCOUNT_PROVIDER_NAME=n.TimeoutError=n.SnapAccountProvider=n.BaseBip44AccountProvider=n.AccountProviderWrapper=void 0;var r=e("./providers/index.cjs");Object.defineProperty(n,"AccountProviderWrapper",{enumerable:!0,get:function(){return r.AccountProviderWrapper}}),Object.defineProperty(n,"BaseBip44AccountProvider",{enumerable:!0,get:function(){return r.BaseBip44AccountProvider}}),Object.defineProperty(n,"SnapAccountProvider",{enumerable:!0,get:function(){return r.SnapAccountProvider}}),Object.defineProperty(n,"TimeoutError",{enumerable:!0,get:function(){return r.TimeoutError}}),Object.defineProperty(n,"EVM_ACCOUNT_PROVIDER_NAME",{enumerable:!0,get:function(){return r.EVM_ACCOUNT_PROVIDER_NAME}}),Object.defineProperty(n,"EvmAccountProvider",{enumerable:!0,get:function(){return r.EvmAccountProvider}}),Object.defineProperty(n,"SOL_ACCOUNT_PROVIDER_NAME",{enumerable:!0,get:function(){return r.SOL_ACCOUNT_PROVIDER_NAME}}),Object.defineProperty(n,"SolAccountProvider",{enumerable:!0,get:function(){return r.SolAccountProvider}}),Object.defineProperty(n,"BTC_ACCOUNT_PROVIDER_NAME",{enumerable:!0,get:function(){return r.BTC_ACCOUNT_PROVIDER_NAME}}),Object.defineProperty(n,"BtcAccountProvider",{enumerable:!0,get:function(){return r.BtcAccountProvider}}),Object.defineProperty(n,"TRX_ACCOUNT_PROVIDER_NAME",{enumerable:!0,get:function(){return r.TRX_ACCOUNT_PROVIDER_NAME}}),Object.defineProperty(n,"TrxAccountProvider",{enumerable:!0,get:function(){return r.TrxAccountProvider}});var s=e("./MultichainAccountWallet.cjs");Object.defineProperty(n,"MultichainAccountWallet",{enumerable:!0,get:function(){return s.MultichainAccountWallet}});var o=e("./MultichainAccountGroup.cjs");Object.defineProperty(n,"MultichainAccountGroup",{enumerable:!0,get:function(){return o.MultichainAccountGroup}});var i=e("./MultichainAccountService.cjs");Object.defineProperty(n,"MultichainAccountService",{enumerable:!0,get:function(){return i.MultichainAccountService}})}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/index.cjs"}],[218,{"@metamask/base-controller":1297},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MetaMetricsDataDeletionController=void 0;var r=e("@metamask/base-controller");function s(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t){return e.get(i(e,t))}function i(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}const a="MetaMetricsDataDeletionController",c={metaMetricsDataDeletionId:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},metaMetricsDataDeletionTimestamp:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},metaMetricsDataDeletionStatus:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};var l=new WeakMap,u=new WeakSet;class d extends r.BaseController{constructor({dataDeletionService:e,messenger:t,state:n}){var r,o;super({messenger:t,metadata:c,name:a,state:{metaMetricsDataDeletionId:null,metaMetricsDataDeletionTimestamp:0,...n}}),s(r=this,o=u),o.add(r),function(e,t,n){s(e,t),t.set(e,n)}(this,l,void 0),function(e,t,n){e.set(i(e,t),n)}(l,this,e),i(u,this,p).call(this)}async createMetaMetricsDataDeletionTask(){const{metaMetricsId:e}=this.messenger.call("MetaMetricsController:getState");if(!e)throw new Error("MetaMetrics ID not found");const t=await o(l,this).createDataDeletionRegulationTask(e);this.update(e=>{e.metaMetricsDataDeletionId=t??null,e.metaMetricsDataDeletionTimestamp=Date.now()}),await this.updateDataDeletionTaskStatus()}async updateDataDeletionTaskStatus(){const e=this.state.metaMetricsDataDeletionId;if(!e)throw new Error("Delete Regulation id not found");const t=await o(l,this).fetchDeletionRegulationStatus(e);this.update(e=>{e.metaMetricsDataDeletionStatus=t??undefined})}}function p(){this.messenger.registerActionHandler(`${a}:createMetaMetricsDataDeletionTask`,this.createMetaMetricsDataDeletionTask.bind(this)),this.messenger.registerActionHandler(`${a}:updateDataDeletionTaskStatus`,this.updateDataDeletionTaskStatus.bind(this))}n.MetaMetricsDataDeletionController=d}}},{package:"$root$",file:"app/scripts/controllers/metametrics-data-deletion/metametrics-data-deletion.ts"}],[2180,{"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ERROR_PREFIX=n.WARNING_PREFIX=n.createModuleLogger=n.projectLogger=void 0;const r=e("@metamask/utils");Object.defineProperty(n,"createModuleLogger",{enumerable:!0,get:function(){return r.createModuleLogger}}),n.projectLogger=(0,r.createProjectLogger)("multichain-account-service"),n.WARNING_PREFIX="WARNING --",n.ERROR_PREFIX="ERROR --"}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/logger.cjs"}],[2181,{"./BaseBip44AccountProvider.cjs":2182},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isAccountProviderWrapper=n.AccountProviderWrapper=void 0;const r=e("./BaseBip44AccountProvider.cjs");class s extends r.BaseBip44AccountProvider{constructor(e,t){super(e),this.isEnabled=!0,this.provider=t}getName(){return this.provider.getName()}setEnabled(e){this.isEnabled=e}async resyncAccounts(e){this.isEnabled&&await this.provider.resyncAccounts(e)}getAccounts(){return this.isEnabled?this.provider.getAccounts():[]}getAccount(e){if(!this.isEnabled)throw new Error("Provider is disabled");return this.provider.getAccount(e)}isAccountCompatible(e){return this.provider.isAccountCompatible(e)}async createAccounts(e){return this.isEnabled?this.provider.createAccounts(e):[]}async discoverAccounts(e){return this.isEnabled?this.provider.discoverAccounts(e):[]}}n.AccountProviderWrapper=s,n.isAccountProviderWrapper=function(e){return e instanceof s}}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/providers/AccountProviderWrapper.cjs"}],[2182,{"@metamask/account-api":1159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.BaseBip44AccountProvider=n.assertAreBip44Accounts=n.assertIsBip44Account=void 0;const i=e("@metamask/account-api");function a(e){if(!(0,i.isBip44Account)(e))throw new Error("Created account is not BIP-44 compatible")}n.assertIsBip44Account=a,n.assertAreBip44Accounts=function(e){e.forEach(a)};n.BaseBip44AccountProvider=class{constructor(e){r.add(this),this.messenger=e}getAccounts(){return o(this,r,"m",s).call(this)}getAccount(e){const[t]=o(this,r,"m",s).call(this,t=>t.id===e);if(!t)throw new Error(`Unable to find account: ${e}`);return t}async withKeyring(e,t){return await this.messenger.call("KeyringController:withKeyring",e,({keyring:e,metadata:n})=>t({keyring:e,metadata:n}))}},r=new WeakSet,s=function(e=()=>!0){const t=[];for(const n of this.messenger.call("AccountsController:listMultichainAccounts"))(0,i.isBip44Account)(n)&&this.isAccountCompatible(n)&&e(n)&&t.push(n);return t}}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/providers/BaseBip44AccountProvider.cjs"}],[2183,{"../analytics/index.cjs":2176,"../constants/traces.cjs":2178,"./SnapAccountProvider.cjs":2185,"./utils.cjs":2189,"@metamask/account-api":1159,"@metamask/keyring-api":2100},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BtcAccountProvider=n.BTC_ACCOUNT_PROVIDER_NAME=void 0;const r=e("@metamask/account-api"),s=e("@metamask/keyring-api"),o=e("./SnapAccountProvider.cjs"),i=e("./utils.cjs"),a=e("../analytics/index.cjs"),c=e("../constants/traces.cjs");n.BTC_ACCOUNT_PROVIDER_NAME="Bitcoin";class l extends o.SnapAccountProvider{constructor(e,t={maxConcurrency:3,createAccounts:{timeoutMs:3e3},discovery:{timeoutMs:2e3,maxAttempts:3,backOffMs:1e3}},n=a.traceFallback){super(l.BTC_SNAP_ID,e,t,n)}getName(){return l.NAME}isAccountCompatible(e){return e.type===s.BtcAccountType.P2wpkh&&Object.values(s.BtcAccountType).includes(e.type)}async createAccounts({entropySource:e,groupIndex:t}){return this.withMaxConcurrency(async()=>{const n=await this.getRestrictedSnapAccountCreator(),o=await(0,i.withTimeout)(n({entropySource:e,index:t,addressType:s.BtcAccountType.P2wpkh,scope:s.BtcScope.Mainnet}),this.config.createAccounts.timeoutMs);return(0,r.assertIsBip44Account)(o),[o]})}async discoverAccounts({entropySource:e,groupIndex:t}){return await super.trace({name:c.TraceName.SnapDiscoverAccounts,data:{provider:this.getName()}},async()=>{const n=await(0,i.withRetry)(()=>(0,i.withTimeout)(this.client.discoverAccounts([s.BtcScope.Mainnet],e,t),this.config.discovery.timeoutMs),{maxAttempts:this.config.discovery.maxAttempts,backOffMs:this.config.discovery.backOffMs});if(!Array.isArray(n)||0===n.length)return[];return await this.createAccounts({entropySource:e,groupIndex:t})})}}n.BtcAccountProvider=l,l.NAME=n.BTC_ACCOUNT_PROVIDER_NAME,l.BTC_SNAP_ID="npm:@metamask/bitcoin-wallet-snap"}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/providers/BtcAccountProvider.cjs"}],[2184,{"../analytics/index.cjs":2176,"../constants/traces.cjs":2178,"./BaseBip44AccountProvider.cjs":2182,"./utils.cjs":2189,"@ethereumjs/util":672,"@metamask/keyring-api":2100,"@metamask/keyring-controller":2110,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c,l=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.EvmAccountProvider=n.EVM_ACCOUNT_PROVIDER_NAME=void 0;const d=e("@ethereumjs/util"),p=e("@metamask/keyring-api"),g=e("@metamask/keyring-controller"),h=e("@metamask/utils"),m=e("./BaseBip44AccountProvider.cjs"),f=e("./utils.cjs"),b=e("../analytics/index.cjs"),w=e("../constants/traces.cjs");function v(e){if(!e)throw new Error("Internal account does not exist")}n.EVM_ACCOUNT_PROVIDER_NAME="EVM";class y extends m.BaseBip44AccountProvider{constructor(e,t={discovery:{maxAttempts:3,timeoutMs:500,backOffMs:500}},n){super(e),r.add(this),s.set(this,void 0),o.set(this,void 0),l(this,s,t,"f"),l(this,o,n??b.traceFallback,"f")}isAccountCompatible(e){return e.type===p.EthAccountType.Eoa&&e.metadata.keyring.type===g.KeyringTypes.hd}getName(){return y.NAME}getEvmProvider(){const e=this.messenger.call("NetworkController:findNetworkClientIdByChainId","0x1"),{provider:t}=this.messenger.call("NetworkController:getNetworkClientById",e);return t}async createAccounts({entropySource:e,groupIndex:t}){const[n]=await u(this,r,"m",i).call(this,{entropySource:e,groupIndex:t,throwOnGap:!0}),s=this.messenger.call("AccountsController:getAccountByAddress",n);v(s);const o=[s];return(0,m.assertAreBip44Accounts)(o),o}async discoverAccounts(e){return u(this,o,"f").call(this,{name:w.TraceName.EvmDiscoverAccounts,data:{provider:this.getName()}},async()=>{const t=this.getEvmProvider(),{entropySource:n,groupIndex:s}=e,o=await u(this,r,"m",c).call(this,{entropySource:n,groupIndex:s});if(0===await u(this,r,"m",a).call(this,t,o))return[];const[l]=await u(this,r,"m",i).call(this,{entropySource:n,groupIndex:s});(0,h.assert)(o===l,"Created account does not match address from group index.");const d=this.messenger.call("AccountsController:getAccountByAddress",l);return v(d),(0,m.assertIsBip44Account)(d),[d]})}async resyncAccounts(){}}n.EvmAccountProvider=y,s=new WeakMap,o=new WeakMap,r=new WeakSet,i=async function({entropySource:e,groupIndex:t,throwOnGap:n=!1}){return await this.withKeyring({id:e},async({keyring:e})=>{const r=await e.getAccounts();if(t<r.length)return[r[t],!1];if(n&&t!==r.length)throw new Error("Trying to create too many accounts");const[s]=await e.addAccounts(1);return[s,!0]})},a=async function(e,t){const n=await(0,f.withRetry)(()=>(0,f.withTimeout)(e.request({method:"eth_getTransactionCount",params:[t,"latest"]}),u(this,s,"f").discovery.timeoutMs),{maxAttempts:u(this,s,"f").discovery.maxAttempts,backOffMs:u(this,s,"f").discovery.backOffMs});return parseInt(n,16)},c=async function({entropySource:e,groupIndex:t}){return await this.withKeyring({id:e},async({keyring:e})=>{const n=await e.getAccounts();if(t<n.length)return n[t];(0,h.assert)(e.root,"Expected HD keyring.root to be set");const r=e.root.deriveChild(t);return(0,h.assert)(r.publicKey,"Expected public key to be set"),(0,h.add0x)((0,h.bytesToHex)((0,d.publicToAddress)(r.publicKey,!0)).toLowerCase())})},y.NAME=n.EVM_ACCOUNT_PROVIDER_NAME}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/providers/EvmAccountProvider.cjs"}],[2185,{"../analytics/index.cjs":2176,"../utils.cjs":2190,"./BaseBip44AccountProvider.cjs":2182,"@metamask/keyring-controller":2110,"@metamask/keyring-snap-client":2121,"@metamask/snaps-utils":2781,"async-mutex":3702},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.isSnapAccountProvider=n.SnapAccountProvider=void 0;const u=e("@metamask/keyring-controller"),d=e("@metamask/keyring-snap-client"),p=e("@metamask/snaps-utils"),g=e("async-mutex"),h=e("./BaseBip44AccountProvider.cjs"),m=e("../analytics/index.cjs"),f=e("../utils.cjs");class b extends h.BaseBip44AccountProvider{constructor(e,t,n,a=m.traceFallback){super(t),r.add(this),s.set(this,void 0),o.set(this,void 0),this.snapId=e,this.client=c(this,r,"m",i).call(this,e);const u=n.maxConcurrency??Infinity;this.config={...n,maxConcurrency:u},isFinite(u)&&l(this,s,new g.Semaphore(u),"f"),l(this,o,a,"f")}async withMaxConcurrency(e){return c(this,s,"f")?c(this,s,"f").runExclusive(e):e()}async trace(e,t){return c(this,o,"f").call(this,e,t)}async getRestrictedSnapAccountCreator(){const e=await c(this,r,"m",a).call(this,async({keyring:e})=>e.createAccount.bind(e));return t=>e(this.snapId,t,{displayAccountNameSuggestion:!1,displayConfirmation:!1,setSelectedAccount:!1})}async resyncAccounts(e){const t=e.filter(e=>e.metadata.snap&&e.metadata.snap.id===this.snapId),n=new Set((await this.client.listAccounts()).map(e=>e.id));t.length<n.size?this.messenger.call("ErrorReportingService:captureException",new Error(`Snap "${this.snapId}" has de-synced accounts, Snap has more accounts than MetaMask!`)):t.length>n.size&&(this.messenger.call("ErrorReportingService:captureException",new Error(`Snap "${this.snapId}" has de-synced accounts, we'll attempt to re-sync them...`)),await Promise.all(t.map(async e=>{const{id:t,groupIndex:s}=e.options.entropy;try{n.has(e.id)||(await c(this,r,"m",a).call(this,async({keyring:t})=>await t.removeAccount(e.address)),await this.createAccounts({entropySource:t,groupIndex:s}))}catch(e){const t=(0,f.createSentryError)(`Unable to re-sync account: ${s}`,e,{provider:this.getName(),groupIndex:s});this.messenger.call("ErrorReportingService:captureException",t)}})))}}n.SnapAccountProvider=b,s=new WeakMap,o=new WeakMap,r=new WeakSet,i=function(e){return new d.KeyringClient({send:async t=>await this.messenger.call("SnapController:handleRequest",{snapId:e,origin:"metamask",handler:p.HandlerType.OnKeyringRequest,request:t})})},a=async function(e){return this.withKeyring({type:u.KeyringTypes.snap},t=>e(t))};n.isSnapAccountProvider=e=>e instanceof b}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/providers/SnapAccountProvider.cjs"}],[2186,{"../analytics/index.cjs":2176,"../constants/traces.cjs":2178,"./SnapAccountProvider.cjs":2185,"./utils.cjs":2189,"@metamask/account-api":1159,"@metamask/keyring-api":2100,"@metamask/keyring-controller":2110},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.SolAccountProvider=n.SOL_ACCOUNT_PROVIDER_NAME=void 0;const i=e("@metamask/account-api"),a=e("@metamask/keyring-api"),c=e("@metamask/keyring-api"),l=e("@metamask/keyring-controller"),u=e("./SnapAccountProvider.cjs"),d=e("./utils.cjs"),p=e("../analytics/index.cjs"),g=e("../constants/traces.cjs");n.SOL_ACCOUNT_PROVIDER_NAME="Solana";class h extends u.SnapAccountProvider{constructor(e,t={maxConcurrency:3,discovery:{timeoutMs:2e3,maxAttempts:3,backOffMs:1e3},createAccounts:{timeoutMs:3e3}},n=p.traceFallback){super(h.SOLANA_SNAP_ID,e,t,n),r.add(this)}getName(){return h.NAME}isAccountCompatible(e){return e.type===c.SolAccountType.DataAccount&&e.metadata.keyring.type===l.KeyringTypes.snap}async createAccounts({entropySource:e,groupIndex:t}){return this.withMaxConcurrency(async()=>{const n=`m/44'/501'/${t}'/0'`;return[await o(this,r,"m",s).call(this,{entropySource:e,groupIndex:t,derivationPath:n})]})}async discoverAccounts({entropySource:e,groupIndex:t}){return await super.trace({name:g.TraceName.SnapDiscoverAccounts,data:{provider:this.getName()}},async()=>{const n=await(0,d.withRetry)(()=>(0,d.withTimeout)(this.client.discoverAccounts([a.SolScope.Mainnet],e,t),this.config.discovery.timeoutMs),{maxAttempts:this.config.discovery.maxAttempts,backOffMs:this.config.discovery.backOffMs});if(!n.length)return[];return await Promise.all(n.map(n=>o(this,r,"m",s).call(this,{entropySource:e,groupIndex:t,derivationPath:n.derivationPath})))})}}n.SolAccountProvider=h,r=new WeakSet,s=async function({entropySource:e,groupIndex:t,derivationPath:n}){const r=await this.getRestrictedSnapAccountCreator(),s=await(0,d.withTimeout)(r({entropySource:e,derivationPath:n}),this.config.createAccounts.timeoutMs);return s.options.entropy={type:c.KeyringAccountEntropyTypeOption.Mnemonic,id:e,groupIndex:t,derivationPath:n},(0,i.assertIsBip44Account)(s),s},h.NAME=n.SOL_ACCOUNT_PROVIDER_NAME,h.SOLANA_SNAP_ID="npm:@metamask/solana-wallet-snap"}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/providers/SolAccountProvider.cjs"}],[2187,{"../analytics/index.cjs":2176,"../constants/traces.cjs":2178,"./SnapAccountProvider.cjs":2185,"./utils.cjs":2189,"@metamask/account-api":1159,"@metamask/keyring-api":2100,"@metamask/keyring-controller":2110},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrxAccountProvider=n.TRX_ACCOUNT_PROVIDER_NAME=void 0;const r=e("@metamask/account-api"),s=e("@metamask/keyring-api"),o=e("@metamask/keyring-controller"),i=e("./SnapAccountProvider.cjs"),a=e("./utils.cjs"),c=e("../analytics/index.cjs"),l=e("../constants/traces.cjs");n.TRX_ACCOUNT_PROVIDER_NAME="Tron";class u extends i.SnapAccountProvider{constructor(e,t={maxConcurrency:3,discovery:{timeoutMs:2e3,maxAttempts:3,backOffMs:1e3},createAccounts:{timeoutMs:3e3}},n=c.traceFallback){super(u.TRX_SNAP_ID,e,t,n)}getName(){return u.NAME}isAccountCompatible(e){return e.type===s.TrxAccountType.Eoa&&e.metadata.keyring.type===o.KeyringTypes.snap}async createAccounts({entropySource:e,groupIndex:t}){return this.withMaxConcurrency(async()=>{const n=await this.getRestrictedSnapAccountCreator(),o=await(0,a.withTimeout)(n({entropySource:e,index:t,addressType:s.TrxAccountType.Eoa,scope:s.TrxScope.Mainnet}),this.config.createAccounts.timeoutMs);return(0,r.assertIsBip44Account)(o),[o]})}async discoverAccounts({entropySource:e,groupIndex:t}){return await super.trace({name:l.TraceName.SnapDiscoverAccounts,data:{provider:this.getName()}},async()=>{if(!(await(0,a.withRetry)(()=>(0,a.withTimeout)(this.client.discoverAccounts([s.TrxScope.Mainnet],e,t),this.config.discovery.timeoutMs),{maxAttempts:this.config.discovery.maxAttempts,backOffMs:this.config.discovery.backOffMs})).length)return[];return await this.createAccounts({entropySource:e,groupIndex:t})})}}n.TrxAccountProvider=u,u.NAME=n.TRX_ACCOUNT_PROVIDER_NAME,u.TRX_SNAP_ID="npm:@metamask/tron-wallet-snap"}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/providers/TrxAccountProvider.cjs"}],[2188,{"./AccountProviderWrapper.cjs":2181,"./BaseBip44AccountProvider.cjs":2182,"./BtcAccountProvider.cjs":2183,"./EvmAccountProvider.cjs":2184,"./SnapAccountProvider.cjs":2185,"./SolAccountProvider.cjs":2186,"./TrxAccountProvider.cjs":2187,"./utils.cjs":2189},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.TimeoutError=void 0,s(e("./BaseBip44AccountProvider.cjs"),n),s(e("./SnapAccountProvider.cjs"),n),s(e("./AccountProviderWrapper.cjs"),n);var o=e("./utils.cjs");Object.defineProperty(n,"TimeoutError",{enumerable:!0,get:function(){return o.TimeoutError}}),s(e("./SolAccountProvider.cjs"),n),s(e("./EvmAccountProvider.cjs"),n),s(e("./BtcAccountProvider.cjs"),n),s(e("./TrxAccountProvider.cjs"),n)}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/providers/index.cjs"}],[2189,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.withTimeout=n.withRetry=n.TimeoutError=void 0;class r extends Error{constructor(e){super(e),this.name="TimeoutError"}}n.TimeoutError=r,n.withRetry=async function(e,{maxAttempts:t=3,backOffMs:n=500}={}){let r,s=n;for(let n=1;n<=t;n++)try{return await e()}catch(e){if(r=e,n>=t)break;const o=s;await new Promise(e=>setTimeout(e,o)),s*=2}throw r},n.withTimeout=async function(e,t=500){let n;try{return await Promise.race([e,new Promise((e,s)=>{n=setTimeout(()=>s(new r("Timed out")),t)})])}finally{n&&clearTimeout(n)}}}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/providers/utils.cjs"}],[219,{"../../../shared/constants/network":5617,"@metamask/base-controller":1297,"@metamask/keyring-api":2100,"@metamask/multichain-network-controller":2207},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkOrderController=void 0;var r=e("@metamask/keyring-api"),s=e("@metamask/base-controller"),o=e("@metamask/multichain-network-controller"),i=e("../../../shared/constants/network");const a={orderedNetworkList:[]},c={orderedNetworkList:{includeInStateLogs:!1,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0}};class l extends s.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:c,name:"NetworkOrderController",state:{...a,...t}}),this.messenger.subscribe("NetworkController:stateChange",e=>{this.onNetworkControllerStateChange(e)})}onNetworkControllerStateChange({networkConfigurationsByChainId:e}){this.update(t=>{const n=Object.keys(e).filter(e=>!i.TEST_CHAINS.includes(e)).map(o.toEvmCaipChainId),s=[r.BtcScope.Mainnet,r.SolScope.Mainnet,r.TrxScope.Mainnet],a=n.filter(e=>!t.orderedNetworkList.some(({networkId:t})=>t===e)).map(e=>({networkId:e}));t.orderedNetworkList=t.orderedNetworkList.filter(({networkId:e})=>n.includes(e)||s.includes(e)).concat(a)})}updateNetworksList(e){this.update(t=>{t.orderedNetworkList=e.map(e=>({networkId:e}))})}}n.NetworkOrderController=l}}},{package:"$root$",file:"app/scripts/controllers/network-order.ts"}],[2190,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createSentryError=n.toRejectedErrorMessage=void 0;n.toRejectedErrorMessage=(e,t)=>{let n=`${e}:`;for(const e of t)"rejected"===e.status&&(n+=`\n- ${e.reason}`);return n};n.createSentryError=(e,t,n)=>{const r=new Error(e);return r.cause=t,r.context=n,r}}}},{package:"@metamask/multichain-account-service",file:"node_modules/@metamask/multichain-account-service/dist/utils.cjs"}],[2191,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainApiNotifications=void 0,function(e){e.sessionChanged="wallet_sessionChanged",e.walletNotify="wallet_notify"}(r||(n.MultichainApiNotifications=r={}))}}},{package:"@metamask/multichain-api-middleware",file:"node_modules/@metamask/multichain-api-middleware/dist/handlers/types.cjs"}],[2192,{"@metamask/chain-agnostic-permission":1359,"@metamask/controller-utils":1383,"@metamask/permission-controller":2329,"@metamask/rpc-errors":2480,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletCreateSession=void 0;const r=e("@metamask/chain-agnostic-permission"),s=e("@metamask/controller-utils"),o=e("@metamask/permission-controller"),i=e("@metamask/rpc-errors"),a=e("@metamask/utils");n.walletCreateSession={methodNames:["wallet_createSession"],implementation:async function(e,t,n,c,l){if(!(0,a.isPlainObject)(e.params))return c((0,o.invalidParams)({data:{request:e}}));const{requiredScopes:u,optionalScopes:d,sessionProperties:p}=e.params;if(p&&0===Object.keys(p).length)return c(new i.JsonRpcError(5302,"Invalid sessionProperties requested"));const g=Object.fromEntries(Object.entries(p??{}).filter(([e])=>(0,r.isKnownSessionPropertyValue)(e)));try{const{normalizedRequiredScopes:e,normalizedOptionalScopes:n}=(0,r.validateAndNormalizeScopes)(u||{},d||{}),o=(0,r.getSupportedScopeObjects)(e,{getNonEvmSupportedMethods:l.getNonEvmSupportedMethods}),p=(0,r.getSupportedScopeObjects)(n,{getNonEvmSupportedMethods:l.getNonEvmSupportedMethods}),h=e=>{try{return l.findNetworkClientIdByChainId(e),!0}catch{return!1}},m=(0,r.isNamespaceInScopesObject)(o,a.KnownCaipNamespace.Solana)||(0,r.isNamespaceInScopesObject)(p,a.KnownCaipNamespace.Solana);let f=!1;if(m){f=0===l.getNonEvmAccountAddresses("solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp").length}const{supportedScopes:b}=(0,r.bucketScopes)(o,{isEvmChainIdSupported:h,isEvmChainIdSupportable:()=>!1,getNonEvmSupportedMethods:l.getNonEvmSupportedMethods,isNonEvmScopeSupported:l.isNonEvmScopeSupported}),{supportedScopes:w}=(0,r.bucketScopes)(p,{isEvmChainIdSupported:h,isEvmChainIdSupportable:()=>!1,getNonEvmSupportedMethods:l.getNonEvmSupportedMethods,isNonEvmScopeSupported:l.isNonEvmScopeSupported}),v=(0,r.getCaipAccountIdsFromScopesObjects)([b,w]),y=(0,r.getAllScopesFromScopesObjects)([b,w]),C=l.listAccounts().map(e=>e.address),M=v.filter(e=>{const{address:t,chain:{namespace:n},chainId:r}=(0,a.parseCaipAccountId)(e);return n===a.KnownCaipNamespace.Eip155.toString()?C.some(e=>(0,s.isEqualCaseInsensitive)(t,e)):l.getNonEvmAccountAddresses(r).some(t=>e===t)}),k={requiredScopes:(0,r.getInternalScopesObject)(b),optionalScopes:(0,r.getInternalScopesObject)(w),isMultichainOrigin:!0,sessionProperties:g},S=(0,r.setNonSCACaipAccountIdsInCaip25CaveatValue)(k,M);if(0===y.length){if(!f)return c(new i.JsonRpcError(5100,"Requested scopes are not supported"));S.optionalScopes[a.KnownCaipNamespace.Wallet]={accounts:[]}}const[A]=await l.requestPermissionsForOrigin({[r.Caip25EndowmentPermissionName]:{caveats:[{type:r.Caip25CaveatType,value:S}]}},{metadata:{promptToCreateSolanaAccount:f}}),I=A[r.Caip25EndowmentPermissionName],T=I?.caveats?.find(e=>e.type===r.Caip25CaveatType)?.value;if(!T)throw i.rpcErrors.internal();const E=(0,r.getSessionScopes)(T,{getNonEvmSupportedMethods:l.getNonEvmSupportedMethods}),{sessionProperties:_={}}=T;return l.trackSessionCreatedEvent?.(T),t.result={sessionScopes:E,sessionProperties:_},c()}catch(e){return c(e)}},hookNames:{findNetworkClientIdByChainId:!0,listAccounts:!0,requestPermissionsForOrigin:!0,getNonEvmSupportedMethods:!0,isNonEvmScopeSupported:!0,getNonEvmAccountAddresses:!0,trackSessionCreatedEvent:!0}}}}},{package:"@metamask/multichain-api-middleware",file:"node_modules/@metamask/multichain-api-middleware/dist/handlers/wallet-createSession.cjs"}],[2193,{"@metamask/chain-agnostic-permission":1359},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletGetSession=void 0;const r=e("@metamask/chain-agnostic-permission");n.walletGetSession={methodNames:["wallet_getSession"],implementation:async function(e,t,n,s,o){let i;try{i=o.getCaveatForOrigin(r.Caip25EndowmentPermissionName,r.Caip25CaveatType)}catch{}return i?(t.result={sessionScopes:(0,r.getSessionScopes)(i.value,{getNonEvmSupportedMethods:o.getNonEvmSupportedMethods})},s()):(t.result={sessionScopes:{}},s())},hookNames:{getCaveatForOrigin:!0,getNonEvmSupportedMethods:!0}}}}},{package:"@metamask/multichain-api-middleware",file:"node_modules/@metamask/multichain-api-middleware/dist/handlers/wallet-getSession.cjs"}],[2194,{"@metamask/chain-agnostic-permission":1359,"@metamask/rpc-errors":2480,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletInvokeMethod=void 0;const r=e("@metamask/chain-agnostic-permission"),s=e("@metamask/rpc-errors"),o=e("@metamask/utils");n.walletInvokeMethod={methodNames:["wallet_invokeMethod"],implementation:async function(e,t,n,i,a){const{scope:c,request:l}=e.params;let u;(0,r.assertIsInternalScopeString)(c);try{u=a.getCaveatForOrigin(r.Caip25EndowmentPermissionName,r.Caip25CaveatType)}catch{}if(!u)return i(s.providerErrors.unauthorized());const d=(0,r.getSessionScopes)(u.value,{getNonEvmSupportedMethods:a.getNonEvmSupportedMethods})[c];if(!d?.methods?.includes(l.method))return i(s.providerErrors.unauthorized());const{namespace:p,reference:g}=(0,r.parseScopeString)(c),h=p===o.KnownCaipNamespace.Wallet&&(!g||g===o.KnownCaipNamespace.Eip155)||p===o.KnownCaipNamespace.Eip155,m={...e,scope:c,method:l.method,params:l.params};if(h){let t;return p===o.KnownCaipNamespace.Wallet?t=a.getSelectedNetworkClientId():p===o.KnownCaipNamespace.Eip155&&g&&(t=a.findNetworkClientIdByChainId((0,o.numberToHex)(parseInt(g,10)))),t?(Object.assign(e,{...m,networkClientId:t}),n()):(console.error("failed to resolve network client for wallet_invokeMethod",e),i(s.rpcErrors.internal()))}try{t.result=await a.handleNonEvmRequestForOrigin({connectedAddresses:d.accounts,scope:c,request:m})}catch(e){return i(e)}return i()},hookNames:{getCaveatForOrigin:!0,findNetworkClientIdByChainId:!0,getSelectedNetworkClientId:!0,getNonEvmSupportedMethods:!0,handleNonEvmRequestForOrigin:!0}}}}},{package:"@metamask/multichain-api-middleware",file:"node_modules/@metamask/multichain-api-middleware/dist/handlers/wallet-invokeMethod.cjs"}],[2195,{"@metamask/chain-agnostic-permission":1359,"@metamask/permission-controller":2329,"@metamask/rpc-errors":2480,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.walletRevokeSession=void 0;const r=e("@metamask/chain-agnostic-permission"),s=e("@metamask/permission-controller"),o=e("@metamask/rpc-errors"),i=e("@metamask/utils");n.walletRevokeSession={methodNames:["wallet_revokeSession"],implementation:async function(e,t,n,a,c){const{params:{scopes:l}}=e;try{l?.length?function(e,t){let n=t.getCaveatForOrigin(r.Caip25EndowmentPermissionName,r.Caip25CaveatType).value;for(const t of e){const e=r.Caip25CaveatMutators[r.Caip25CaveatType].removeScope(n,t);e.operation!==s.CaveatMutatorOperation.Noop&&(n=e?.value??{requiredScopes:{},optionalScopes:{},sessionProperties:{},isMultichainOrigin:!0})}(0,r.getCaipAccountIdsFromCaip25CaveatValue)(n).length?t.updateCaveat(r.Caip25EndowmentPermissionName,r.Caip25CaveatType,n):t.revokePermissionForOrigin(r.Caip25EndowmentPermissionName)}(l,c):c.revokePermissionForOrigin(r.Caip25EndowmentPermissionName)}catch(e){if(u=e,!((0,i.isObject)(u)&&"name"in u&&"string"==typeof u.name&&[s.UnrecognizedSubjectError.name,s.PermissionDoesNotExistError.name].includes(u.name)))return console.error(e),a(o.rpcErrors.internal())}var u;return t.result=!0,a()},hookNames:{revokePermissionForOrigin:!0,updateCaveat:!0,getCaveatForOrigin:!0}}}}},{package:"@metamask/multichain-api-middleware",file:"node_modules/@metamask/multichain-api-middleware/dist/handlers/wallet-revokeSession.cjs"}],[2196,{"./handlers/types.cjs":2191,"./handlers/wallet-createSession.cjs":2192,"./handlers/wallet-getSession.cjs":2193,"./handlers/wallet-invokeMethod.cjs":2194,"./handlers/wallet-revokeSession.cjs":2195,"./middlewares/MultichainMiddlewareManager.cjs":2197,"./middlewares/MultichainSubscriptionManager.cjs":2198,"./middlewares/multichainMethodCallValidatorMiddleware.cjs":2199},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainApiNotifications=n.MultichainSubscriptionManager=n.MultichainMiddlewareManager=n.multichainMethodCallValidatorMiddleware=n.walletRevokeSession=n.walletInvokeMethod=n.walletGetSession=n.walletCreateSession=void 0;var r=e("./handlers/wallet-createSession.cjs");Object.defineProperty(n,"walletCreateSession",{enumerable:!0,get:function(){return r.walletCreateSession}});var s=e("./handlers/wallet-getSession.cjs");Object.defineProperty(n,"walletGetSession",{enumerable:!0,get:function(){return s.walletGetSession}});var o=e("./handlers/wallet-invokeMethod.cjs");Object.defineProperty(n,"walletInvokeMethod",{enumerable:!0,get:function(){return o.walletInvokeMethod}});var i=e("./handlers/wallet-revokeSession.cjs");Object.defineProperty(n,"walletRevokeSession",{enumerable:!0,get:function(){return i.walletRevokeSession}});var a=e("./middlewares/multichainMethodCallValidatorMiddleware.cjs");Object.defineProperty(n,"multichainMethodCallValidatorMiddleware",{enumerable:!0,get:function(){return a.multichainMethodCallValidatorMiddleware}});var c=e("./middlewares/MultichainMiddlewareManager.cjs");Object.defineProperty(n,"MultichainMiddlewareManager",{enumerable:!0,get:function(){return c.MultichainMiddlewareManager}});var l=e("./middlewares/MultichainSubscriptionManager.cjs");Object.defineProperty(n,"MultichainSubscriptionManager",{enumerable:!0,get:function(){return l.MultichainSubscriptionManager}});var u=e("./handlers/types.cjs");Object.defineProperty(n,"MultichainApiNotifications",{enumerable:!0,get:function(){return u.MultichainApiNotifications}})}}},{package:"@metamask/multichain-api-middleware",file:"node_modules/@metamask/multichain-api-middleware/dist/index.cjs"}],[2197,{"@metamask/rpc-errors":2480},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainMiddlewareManager=void 0;const u=e("@metamask/rpc-errors"),d=["eth_subscribe","eth_unsubscribe"];n.MultichainMiddlewareManager=class{constructor(){r.add(this),s.set(this,[])}addMiddleware(e){const{scope:t,origin:n,tabId:i}=e;c(this,r,"m",o).call(this,{scope:t,origin:n,tabId:i})||c(this,s,"f").push(e)}removeMiddlewareByScope(e){c(this,s,"f").forEach(t=>{t.scope===e&&c(this,r,"m",a).call(this,t)})}removeMiddlewareByScopeAndOrigin(e,t){c(this,s,"f").forEach(n=>{n.scope===e&&n.origin===t&&c(this,r,"m",a).call(this,n)})}removeMiddlewareByOriginAndTabId(e,t){c(this,s,"f").forEach(n=>{n.origin===e&&n.tabId===t&&c(this,r,"m",a).call(this,n)})}generateMultichainMiddlewareForOriginAndTabId(e,t){const n=(n,s,i,a)=>{const{scope:l}=n,p=c(this,r,"m",o).call(this,{scope:l,origin:e,tabId:t});return d.includes(n.method)?p?(p.middleware(n,s,i,a),undefined):a(u.rpcErrors.methodNotFound()):i()};return n.destroy=this.removeMiddlewareByOriginAndTabId.bind(this,e,t),n}},s=new WeakMap,r=new WeakSet,o=function({scope:e,origin:t,tabId:n}){return c(this,s,"f").find(r=>r.scope===e&&r.origin===t&&r.tabId===n)},i=function({scope:e,origin:t,tabId:n}){l(this,s,c(this,s,"f").filter(r=>r.scope!==e||r.origin!==t||r.tabId!==n),"f")},a=function(e){Promise.resolve(e.middleware.destroy?.()).catch(()=>{}),c(this,r,"m",i).call(this,e)}}}},{package:"@metamask/multichain-api-middleware",file:"node_modules/@metamask/multichain-api-middleware/dist/middlewares/MultichainMiddlewareManager.cjs"}],[2198,{"../handlers/types.cjs":2191,"@metamask/controller-utils":1383,"@metamask/eth-json-rpc-filters/subscriptionManager.js":1803,"@metamask/safe-event-emitter":2482,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,o,i,a,c,l,u=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},d=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainSubscriptionManager=void 0;const g=e("@metamask/controller-utils"),h=p(e("@metamask/eth-json-rpc-filters/subscriptionManager.js")),m=p(e("@metamask/safe-event-emitter")),f=e("@metamask/utils"),b=e("../handlers/types.cjs");class w extends m.default{constructor(e){super(),r.add(this),s.set(this,void 0),o.set(this,void 0),i.set(this,[]),u(this,s,e.findNetworkClientIdByChainId,"f"),u(this,o,e.getNetworkClientById,"f")}notify({scope:e,origin:t,tabId:n},{method:r,params:s}){this.emit("notification",t,n,{method:b.MultichainApiNotifications.walletNotify,params:{scope:e,notification:{method:r,params:s}}})}subscribe(e){const t=d(this,r,"m",a).call(this,e);if(t)return t.subscriptionManager;const n=d(this,s,"f").call(this,(0,g.toHex)((0,f.parseCaipChainId)(e.scope).reference)),c=d(this,o,"f").call(this,n),u=(0,h.default)({blockTracker:c.blockTracker,provider:c.provider});u.events.on("notification",t=>{this.notify(e,t)});const p={...e,subscriptionManager:u};return u.destroy=u.middleware.destroy,u.middleware.destroy=d(this,r,"m",l).bind(this,p),d(this,i,"f").push(p),u}unsubscribeByScope(e){d(this,i,"f").forEach(t=>{t.scope===e&&d(this,r,"m",l).call(this,t)})}unsubscribeByScopeAndOrigin(e,t){d(this,i,"f").forEach(n=>{n.scope===e&&n.origin===t&&d(this,r,"m",l).call(this,n)})}unsubscribeByOriginAndTabId(e,t){d(this,i,"f").forEach(n=>{n.origin===e&&n.tabId===t&&d(this,r,"m",l).call(this,n)})}}n.MultichainSubscriptionManager=w,s=new WeakMap,o=new WeakMap,i=new WeakMap,r=new WeakSet,a=function({scope:e,origin:t,tabId:n}){return d(this,i,"f").find(r=>r.scope===e&&r.origin===t&&r.tabId===n)},c=function({scope:e,origin:t,tabId:n}){u(this,i,d(this,i,"f").filter(r=>r.scope!==e||r.origin!==t||r.tabId!==n),"f")},l=function(e){e.subscriptionManager.destroy?.(),d(this,r,"m",c).call(this,e)}}}},{package:"@metamask/multichain-api-middleware",file:"node_modules/@metamask/multichain-api-middleware/dist/middlewares/MultichainSubscriptionManager.cjs"}],[2199,{"@metamask/api-specs":2202,"@metamask/json-rpc-engine":2034,"@metamask/rpc-errors":2480,"@metamask/utils":2914,"@open-rpc/schema-utils-js/build/dereference-document.js":2972,"@open-rpc/schema-utils-js/build/parse-open-rpc-document.js":2973,jsonschema:4455},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.multichainMethodCallValidatorMiddleware=void 0;const s=e("@metamask/api-specs"),o=e("@metamask/json-rpc-engine"),i=e("@metamask/rpc-errors"),a=e("@metamask/utils"),c=r(e("@open-rpc/schema-utils-js/build/dereference-document.js")),l=e("@open-rpc/schema-utils-js/build/parse-open-rpc-document.js"),u=e("jsonschema"),d=(e,t,n)=>{const r=`${t.name}${e.path.length>0?`.${e.path.join(".")}`:""} ${e.message}`;return i.rpcErrors.invalidParams({message:r,data:{param:t.name,path:e.path,schema:e.schema,got:n}})},p=new u.Validator,g=(0,c.default)(s.MultiChainOpenRPCDocument,(0,l.makeCustomResolver)({}));n.multichainMethodCallValidatorMiddleware=(0,o.createAsyncMiddleware)(async(e,t,n)=>{const r=await(async(e,t)=>{const n=(await g).methods.find(t=>t.name===e);if(!n||!(0,a.isObject)(n)||!("params"in n))return[i.rpcErrors.methodNotFound({data:{method:e}})];const r=[];for(const e of n.params){if(!(0,a.isObject)(t))return[i.rpcErrors.invalidParams()];const n=e,s=t[n.name],o=p.validate(s,n.schema,{required:n.required});o.errors&&r.push(...o.errors.map(e=>d(e,n,s)))}return r})(e.method,e.params);if(r.length>0)throw i.rpcErrors.invalidParams({data:r});return await n()})}}},{package:"@metamask/multichain-api-middleware",file:"node_modules/@metamask/multichain-api-middleware/dist/middlewares/multichainMethodCallValidatorMiddleware.cjs"}],[22,{"../controllers/app-state-controller":213},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AppStateControllerInit=void 0;var r=e("../controllers/app-state-controller");n.AppStateControllerInit=({controllerMessenger:e,persistedState:t,setLocked:n,extension:s})=>({controller:new r.AppStateController({messenger:e,state:t.AppStateController,onInactiveTimeout:()=>n(),extension:s})})}}},{package:"$root$",file:"app/scripts/controller-init/app-state-controller-init.ts"}],[220,{"../../../shared/constants/onboarding":5620,"../../../shared/modules/environment":5736,"@metamask/base-controller":1297,loglevel:4643},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultOnboardingControllerState=n.default=void 0;var r,s=e("@metamask/base-controller"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("../../../shared/constants/onboarding"),a=e("../../../shared/modules/environment");function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=()=>({seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1});n.getDefaultOnboardingControllerState=l;const u={onboardingTabs:{}},d={seedPhraseBackedUp:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},firstTimeFlowType:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},completedOnboarding:{includeInStateLogs:!0,persist:!0,includeInDebugSnapshot:!0,usedInUi:!0},onboardingTabs:{includeInStateLogs:!0,persist:!1,includeInDebugSnapshot:!1,usedInUi:!0}};class p extends s.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:d,name:"OnboardingController",state:{seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1,...t,...u}}),c(this,"registerOnboarding",async(e,t)=>{if(this.state.completedOnboarding)return void o.default.debug("Ignoring registerOnboarding; user already onboarded");const{onboardingTabs:n}={...this.state};n&&(n[e]&&n[e]===t||(o.default.debug(`Registering onboarding tab at location '${e}' with tabId '${t}'`),this.update(r=>{r.onboardingTabs={...n,[e]:t}})))})}setSeedPhraseBackedUp(e){this.update(t=>{t.seedPhraseBackedUp=e})}completeOnboarding(){return this.update(e=>{e.completedOnboarding=!0}),!0}setFirstTimeFlowType(e){this.update(t=>{t.firstTimeFlowType=e})}getIsSocialLoginFlow(){if(!(0,a.getIsSeedlessOnboardingFeatureEnabled)())return!1;const{firstTimeFlowType:e}=this.state;return e===i.FirstTimeFlowType.socialCreate||e===i.FirstTimeFlowType.socialImport}resetOnboarding(){this.update(e=>{e.completedOnboarding=!1,e.firstTimeFlowType=null,e.seedPhraseBackedUp=null,e.onboardingTabs={}})}}n.default=p}}},{package:"$root$",file:"app/scripts/controllers/onboarding.ts"}],[2200,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports={openrpc:"1.2.4",info:{title:"MetaMask MultiChain API",version:"1.0.0",description:"This provides the specs for the MultiChain API Layer for the MetaMask API"},methods:[{name:"wallet_notify",paramStructure:"by-name",params:[{name:"scope",description:"a valid `scope` string that has been previously authorized via `provider_authorize`",required:!0,schema:{$ref:"#/components/schemas/ScopeString"}},{name:"notification",description:"an object containing a JSON-RPC notification with `method` and `params`",deprecated:!1,required:!0,schema:{type:"object",properties:{method:{type:"string"},params:!0}}}]},{name:"wallet_invokeMethod",paramStructure:"by-name",params:[{name:"scope",description:"a valid `scope` string that has been previously authorized via `provider_authorize`",required:!0,schema:{$ref:"#/components/schemas/ScopeString"}},{name:"request",description:"an object containing a JSON-RPC request with `method` and `params`",deprecated:!1,required:!0,schema:{type:"object",properties:{method:{type:"string"},params:!0}}}],result:{name:"wallet_invokeMethodResult",schema:!0},examples:[{name:"wallet_invokeMethodExample",params:[{name:"scope",value:"eip155:1"},{name:"request",value:{method:"eth_getBalance",params:[]}}],result:{name:"wallet_invokeMethodResult",value:"0x1"}}]},{name:"wallet_revokeSession",description:"The `wallet_revokeSession` method revokes the entire active session.",params:[],result:{name:"wallet_revokeSessionResult",schema:{type:"boolean"}},examples:[{name:"wallet_revokeSessionExample",params:[],result:{name:"wallet_revokeSessionExampleResult",value:!0}}],errors:[{$ref:"#/components/errors/UnknownError"}]},{name:"wallet_sessionChanged",paramStructure:"by-name",description:"This notification is published by the wallet to notify the callers of updates to a shared session's authorization scopes. The event payload contains the new `sessionScopes`.",params:[{name:"sessionScopes",schema:{$ref:"#/components/schemas/SessionScopes"}}],examples:[{name:"wallet_sessionChangedExample",description:"Example of a wallet_sessionChanged notification.",params:[{name:"sessionScopes",value:{"eip155:1337":{accounts:["eip155:1337:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{accounts:[],methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{accounts:["wallet:eip155:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["wallet_addEthereumChain"],notifications:[]}}}]}]},{name:"wallet_getSession",description:"The `wallet_getSession` method returns an active session.",params:[],result:{name:"wallet_getSessionResult",schema:{type:"object",properties:{sessionScopes:{$ref:"#/components/schemas/SessionScopes"}}}},examples:[{name:"wallet_getSessionExample",description:"Example of a getSession request.",params:[],result:{name:"wallet_getSessionResultExample",value:{sessionScopes:{"eip155:1337":{accounts:["eip155:1337:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{accounts:[],methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{accounts:["wallet:eip155:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["wallet_addEthereumChain"],notifications:[]}}}}}]},{name:"wallet_createSession",paramStructure:"by-name",params:[{name:"requiredScopes",description:"Scopes that the wallet must support in order to be used with this provider.",schema:{type:"object",patternProperties:{"[-a-z0-9]{3,8}(:[-_a-zA-Z0-9]{1,32})?":{$ref:"#/components/schemas/Scope"}}}},{name:"optionalScopes",description:"Scopes that the wallet may support in order to be used with this provider.",schema:{type:"object",patternProperties:{"[-a-z0-9]{3,8}(:[-_a-zA-Z0-9]{1,32})?":{$ref:"#/components/schemas/Scope"}}}},{name:"sessionProperties",description:"Properties that the wallet may use to determine if the session is valid.",schema:{type:"object"}}],result:{name:"wallet_createSessionResult",schema:{type:"object",properties:{sessionScopes:{$ref:"#/components/schemas/SessionScopes"},sessionProperties:{type:"object"}}}},examples:[{name:"wallet_createSessionEthExample",description:"Example of a createSession request.",params:[{name:"optionalScopes",value:{"eip155:1337":{methods:["wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{methods:["wallet_addEthereumChain"],notifications:[]}}}],result:{name:"wallet_createSessionResultExample",value:{sessionProperties:{},sessionScopes:{"eip155:1337":{accounts:["eip155:1337:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{accounts:[],methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{accounts:["wallet:eip155:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["wallet_addEthereumChain"],notifications:[]}}}}},{name:"wallet_createSessionEthUnsupportedMethodsExample",description:"Example of a createSession request with unsupported eip155 methods.",params:[{name:"optionalScopes",value:{"eip155:1337":{methods:["not_supported"],notifications:[]},wallet:{methods:[],notifications:[]},"wallet:eip155":{methods:[],notifications:[]}}}],result:{name:"wallet_createSessionEthUnsupportedMethodsResultExample",value:{sessionProperties:{},sessionScopes:{"eip155:1337":{accounts:["eip155:1337:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]},wallet:{accounts:[],methods:["wallet_registerOnboarding","wallet_scanQRCode"],notifications:[]},"wallet:eip155":{accounts:["wallet:eip155:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["wallet_addEthereumChain"],notifications:[]}}}}},{name:"wallet_createSessionUnsupportedScopesExample",description:"Example of a createSession request with unsupported scopes.",params:[{name:"optionalScopes",value:{foobar:{methods:["eth_getBalance"],notifications:["eth_subscription"]},"eip155:1":{accounts:["eip155:1:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]}}}],result:{name:"wallet_createSessionUnsupportedScopesResultExample",value:{sessionProperties:{},sessionScopes:{"eip155:1":{accounts:["eip155:1:0x5cfe73b6021e818b776b421b1c4db2474086a7e1"],methods:["personal_sign","eth_signTypedData_v4","wallet_watchAsset","eth_sendTransaction","eth_decrypt","eth_getEncryptionPublicKey","web3_clientVersion","eth_subscribe","eth_unsubscribe","wallet_swapAsset","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter"],notifications:["eth_subscription"]}}}}}],errors:[{$ref:"#/components/errors/UnknownError"},{code:5100,message:"Requested networks are not supported"},{code:5101,message:"Requested methods are not supported"},{code:5102,message:"Requested notifications are not supported"},{code:5300,message:"Invalid scopedProperties requested"},{code:5301,message:"scopedProperties can only be outside of sessionScopes"},{code:5302,message:"Invalid sessionProperties requested"}]}],components:{errors:{UnknownError:{code:5e3,message:"Unknown error with request"}},schemas:{SessionScopes:{type:"object",patternProperties:{"[-a-z0-9]{3,8}(:[-_a-zA-Z0-9]{1,32})?":{$ref:"#/components/schemas/Scope"}}},ScopeString:{type:"string",pattern:"[-a-z0-9]{3,8}(:[-_a-zA-Z0-9]{1,32})?"},Scope:{type:"object",title:"Scope",description:"Scope for a multi-chain connection",additionalProperties:!0,required:["notifications","methods"],properties:{scopes:{type:"array",items:{$ref:"#/components/schemas/ScopeString"}},methods:{description:"Methods that the wallet must support in order to be used with this provider.",type:"array",items:{type:"string"}},notifications:{description:"Notifications that the wallet must support in order to be used with this provider.",type:"array",items:{type:"string"}},rpcEndpoints:{description:"JSON-RPC endpoints for this namespace.",type:"array",items:{type:"string",format:"uri"}},rpcDocuments:{type:"array",description:"OpenRPC documents that define RPC methods in which to anchor the methods authorized in a CAIP-25 interaction.",items:{type:"string",format:"uri"}}}}}}}}}},{package:"@metamask/multichain-api-middleware>@metamask/api-specs",file:"node_modules/@metamask/multichain-api-middleware/node_modules/@metamask/api-specs/dist/build/multichain-openrpc.json"}]],[],{});