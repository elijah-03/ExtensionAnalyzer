LavaPack.loadBundle([[7089,{"../../shared/constants/bridge":5600,"../../shared/lib/metamask-controller-utils":5701,"../../shared/lib/transactions-controller-utils":5720,"../../shared/modules/string-utils":5761,"../ducks/bridge-status/selectors":6870,"../ducks/locale/locale":6882,"../ducks/metamask/metamask":6883,"../helpers/constants/common":6897,"../helpers/constants/transactions":6910,"../helpers/utils/common.util":6926,"../helpers/utils/token-util":6955,"../helpers/utils/transactions.util":6956,"../pages/bridge/hooks/useBridgeTokenDisplayData":7120,"../pages/confirmations/components/simulation-details/formatAmount":7392,"../selectors/selectors":7903,"../store/actions":7916,"./bridge/useBridgeChainInfo":6965,"./useCurrencyDisplay":7034,"./useCurrentAsset":7036,"./useI18nContext":7047,"./useSwappedTokenValue":7075,"./useTokenData":7079,"./useTokenDisplayValue":7081,"./useTokenFiatAmount":7082,"./useUserPreferencedCurrency":7091,"@metamask/transaction-controller":2868,"bignumber.js":3768,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionDisplayData=function(e){var t,n,D,B,N,F,R,j;const L=(0,a.useDispatch)(),$=(0,a.useSelector)(b.getIntlLocale),W=(0,A.useCurrentAsset)(),q=(0,a.useSelector)(i.getAllTokens),U=(0,a.useSelector)(i.getSelectedAddress),V=(0,a.useSelector)(p.getNfts),G=(0,a.useSelector)(i.getAllDetectedTokens),z=(0,a.useSelector)(i.selectERC20TokensByChain),H=(0,C.useI18nContext)(),Q=e.initialTransaction.id,K=(0,a.useSelector)(e=>(0,T.selectBridgeHistoryItemForTxMetaId)(e,Q)),{destNetwork:J}=(0,P.default)({bridgeHistoryItem:K,srcTxMeta:e.initialTransaction}),X=k.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==J?void 0:J.chainId],{initialTransaction:Y,primaryTransaction:Z}=e,{transferInformation:ee,type:te}=Y,{from:ne,to:ae}=Y.txParams||{},oe=[r.TransactionType.swap,r.TransactionType.bridge].includes(te)&&Boolean(K),re=(0,a.useSelector)(e=>{var t;return(0,i.getKnownMethodData)(e,null==Y||null===(t=Y.txParams)||void 0===t?void 0:t.data)})||{},se=(0,l.getStatusKey)(Z)in m.PENDING_STATUS_HASH,ie=(0,o.useRef)(!0),le=null===(t=Z.txParams)||void 0===t?void 0:t.value;let ce="-",ue=ae;const de=null==Y||null===(n=Y.txParams)||void 0===n?void 0:n.data,me=m.TOKEN_CATEGORY_HASH[te];let pe=null;const[fe,ge]=(0,o.useState)(null);var he,ye,ve,be,ke,xe;me&&(pe=(null==q||null===(he=q[null==e||null===(ye=e.initialTransaction)||void 0===ye?void 0:ye.chainId])||void 0===he||null===(he=he[U])||void 0===he?void 0:he.find(({address:e})=>(0,g.isEqualCaseInsensitive)(e,ue)))||(null==G||null===(ve=G[null==e||null===(be=e.initialTransaction)||void 0===be?void 0:be.chainId])||void 0===ve||null===(ve=ve[U])||void 0===ve?void 0:ve.find(({address:e})=>(0,g.isEqualCaseInsensitive)(e,ue)))||(null==z||null===(ke=z[null==e||null===(xe=e.initialTransaction)||void 0===xe?void 0:xe.chainId])||void 0===ke||null===(ke=ke.data)||void 0===ke?void 0:ke[ue.toLowerCase()]));(0,o.useEffect)(()=>()=>{ie.current=!1},[]),(0,o.useEffect)(()=>{!async function(){if(me&&!pe)try{const e=await(0,d.getAssetDetails)(ue,ne,de,V);!0===ie.current&&ge(e)}catch(e){console.warn("Unable to set asset details",{error:e,transactionData:de})}}()},[me,pe,ue,ne,V,ie,de]),fe&&(pe={address:fe.toAddress,symbol:fe.symbol,decimals:fe.decimals});const Te=(0,I.useTokenData)(de,me),Ce=(0,d.getTokenIdParam)(Te)??(0,h.getTokenValueParam)(Te),Ee=me&&V.find(({address:e,tokenId:t})=>(0,g.isEqualCaseInsensitive)(e,ue)&&t===Ce);let we=(0,S.useTokenDisplayValue)(de,pe,me);null!=ee&&ee.decimals&&(we=(0,x.calcTokenAmount)(ee.amount,ee.decimals).toString(10));const _e=(0,E.useTokenFiatAmount)(null===(D=pe)||void 0===D?void 0:D.address,we,null===(B=pe)||void 0===B?void 0:B.symbol,undefined,!0);let Se,Ie=me?null===(N=pe)||void 0===N?void 0:N.symbol:undefined,Me=me?we:undefined,Ae=me?_e:undefined;const{swapTokenValue:Pe,isNegative:De,swapTokenFiatAmount:Oe,isViewingReceivedTokenFromSwap:Be}=(0,M.useSwappedTokenValue)(e,W),Ne=(0,y.useBridgeTokenDisplayData)(e);if(O.includes(te))Se=H("signatureRequest");else if(te===r.TransactionType.swap){Se=H("swapTokenToToken",[Ne.sourceTokenSymbol??Y.sourceTokenSymbol,Ne.destinationTokenSymbol??Y.destinationTokenSymbol]);const e=Ne.sourceTokenSymbol??Y.sourceTokenSymbol;Ie=Be?W.symbol:e;const t=Ne.sourceTokenAmountSent??Pe;Me=t?(0,v.formatAmount)($,new s.default(t)):undefined,Ae=Ne.displayCurrencyAmount??Oe,ce=De?"":Be?"+":"-"}else if(te===r.TransactionType.swapAndSend){const e=Y.swapAndSendRecipient===ne;ue=Y.swapAndSendRecipient,Se=H("sentTokenAsToken",[Y.sourceTokenSymbol,Y.destinationTokenSymbol]),Ie=Be&&e?W.symbol:Y.sourceTokenSymbol,Me=Pe,Ae=Oe,ce=De?"":Be&&e?"+":"-"}else if(te===r.TransactionType.swapApproval)Se=H("swapApproval",[Ne.sourceTokenSymbol??Z.sourceTokenSymbol]),Ie=Ne.sourceTokenSymbol??Z.sourceTokenSymbol;else if(te===r.TransactionType.tokenMethodApprove){var Fe;ce="",Se=H("approveSpendingCap",[(null===(Fe=pe)||void 0===Fe?void 0:Fe.symbol)||H("token").toLowerCase()])}else if(te===r.TransactionType.tokenMethodSetApprovalForAll){var Re,je,Le;ce="",Se=!(null!=Te&&null!==(Re=Te.args)&&void 0!==Re&&Re[1])?H("revokePermissionTitle",[(null===(je=pe)||void 0===je?void 0:je.symbol)||(null==Ee?void 0:Ee.name)||H("token")]):H("setApprovalForAllTitle",[(null===(Le=pe)||void 0===Le?void 0:Le.symbol)||H("token")])}else if(te===r.TransactionType.tokenMethodIncreaseAllowance){var $e;ce="",Se=H("approveIncreaseAllowance",[(null===($e=pe)||void 0===$e?void 0:$e.symbol)||H("token")])}else if(te===r.TransactionType.contractInteraction||te===r.TransactionType.batch||te===r.TransactionType.revokeDelegation){const e=(0,l.getTransactionTypeTitle)(H,te);Se=(null==re?void 0:re.name)&&(0,c.camelCaseToCapitalize)(re.name)||e}else if(te===r.TransactionType.deployContract)Se=(0,l.getTransactionTypeTitle)(H,te);else if(te===r.TransactionType.incoming)Se=H("received"),ce="";else if(te===r.TransactionType.tokenMethodTransferFrom||te===r.TransactionType.tokenMethodTransfer){var We;Se=H("sentSpecifiedTokens",[(null===(We=pe)||void 0===We?void 0:We.symbol)||(null==Ee?void 0:Ee.name)||H("token")]),ue=(0,d.getTokenAddressParam)(Te)}else te===r.TransactionType.tokenMethodSafeTransferFrom?(Se=H("safeTransferFrom"),ue=(0,d.getTokenAddressParam)(Te)):te===r.TransactionType.simpleSend?Se=H("sent"):te===r.TransactionType.bridgeApproval?(Se=H("bridgeApproval",[Ne.sourceTokenSymbol]),Ie=Ne.sourceTokenSymbol):te===r.TransactionType.bridge?(Se=X?H("bridgedToChain",[X]):H("bridged"),Ie=Ne.sourceTokenSymbol,Me=(0,v.formatAmount)($,new s.default(Ne.sourceTokenAmountSent??0)),Ae=Ne.displayCurrencyAmount):L((0,f.captureSingleException)(`useTransactionDisplayData does not recognize transaction type. Type received is: ${te}`));const qe=(0,w.useUserPreferencedCurrency)(u.PRIMARY,{},null==e||null===(F=e.initialTransaction)||void 0===F?void 0:F.chainId),Ue=(0,w.useUserPreferencedCurrency)(u.SECONDARY),[Ve]=(0,_.useCurrencyDisplay)(le,{prefix:ce,displayValue:Me,suffix:Ie,...qe},null==e||null===(R=e.initialTransaction)||void 0===R?void 0:R.chainId),[Ge]=(0,_.useCurrencyDisplay)(le,{prefix:ce,displayValue:oe?Ne.displayCurrencyAmount:Ae,hideLabel:me||Boolean(Pe),...Ue},null==e||null===(j=e.initialTransaction)||void 0===j?void 0:j.chainId);!ue&&ee&&(ue=ae);return{title:Se,primaryCurrency:te===r.TransactionType.swap&&se?"":Ve,recipientAddress:ue,secondaryCurrency:me&&!_e||!oe&&[r.TransactionType.swap,r.TransactionType.swapAndSend].includes(te)&&!Oe||oe&&!Ge?undefined:Ge,isPending:se}};var a=e("react-redux"),o=e("react"),r=e("@metamask/transaction-controller"),s=D(e("bignumber.js")),i=e("../selectors/selectors"),l=e("../helpers/utils/transactions.util"),c=e("../helpers/utils/common.util"),u=e("../helpers/constants/common"),d=e("../helpers/utils/token-util"),m=e("../helpers/constants/transactions"),p=e("../ducks/metamask/metamask"),f=e("../store/actions"),g=e("../../shared/modules/string-utils"),h=e("../../shared/lib/metamask-controller-utils"),y=e("../pages/bridge/hooks/useBridgeTokenDisplayData"),v=e("../pages/confirmations/components/simulation-details/formatAmount"),b=e("../ducks/locale/locale"),k=e("../../shared/constants/bridge"),x=e("../../shared/lib/transactions-controller-utils"),T=e("../ducks/bridge-status/selectors"),C=e("./useI18nContext"),E=e("./useTokenFiatAmount"),w=e("./useUserPreferencedCurrency"),_=e("./useCurrencyDisplay"),S=e("./useTokenDisplayValue"),I=e("./useTokenData"),M=e("./useSwappedTokenValue"),A=e("./useCurrentAsset"),P=D(e("./bridge/useBridgeChainInfo"));function D(e){return e&&e.__esModule?e:{default:e}}const O=[null,undefined,r.TransactionType.sign,r.TransactionType.personalSign,r.TransactionType.signTypedData,r.TransactionType.ethDecrypt,r.TransactionType.ethGetEncryptionPublicKey]}}},{package:"$root$",file:"ui/hooks/useTransactionDisplayData.js"}],[7090,{"../../shared/lib/trust-signals":5724,"../selectors":7886,"@metamask/name-controller":2215,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrustSignalDisplayState=void 0,n.useTrustSignal=function(e,t,n){return l([{value:e,type:t,chainId:n}])[0]},n.useTrustSignals=l;var a=e("react-redux"),o=e("@metamask/name-controller"),r=e("../selectors"),s=e("../../shared/lib/trust-signals");let i=n.TrustSignalDisplayState=function(e){return e.Loading="loading",e.Malicious="malicious",e.Petname="petname",e.Verified="verified",e.Warning="warning",e.Recognized="recognized",e.Unknown="unknown",e}({});function l(e){return(0,a.useSelector)(t=>e.map(({value:e,type:n,chainId:a})=>{if(n!==o.NameType.ETHEREUM_ADDRESS)return{state:i.Unknown,label:null};if(!a)return{state:i.Unknown,label:null};const l=(0,s.mapChainIdToSupportedEVMChain)(a);if(!l)return{state:i.Unknown,label:null};const c=(0,s.createCacheKey)(l,e),u=(0,r.getAddressSecurityAlertResponse)(t,c);if(!u)return{state:i.Unknown,label:null};const d=u.label||null,m=function(e){if(!e.result_type)return i.Unknown;switch(e.result_type){case s.ResultType.Loading:return i.Loading;case s.ResultType.Malicious:return i.Malicious;case s.ResultType.Warning:return i.Warning;case s.ResultType.Trusted:return i.Verified;case s.ResultType.Benign:case s.ResultType.ErrorResult:default:return i.Unknown}}(u);return{state:m,label:d}}))}}}},{package:"$root$",file:"ui/hooks/useTrustSignals.ts"}],[7091,{"../../shared/constants/common":5601,"../../shared/constants/network":5617,"../constants":6846,"../helpers/constants/common":6897,"../selectors":7886,"../selectors/multichain":7895,"./useMultichainSelector":7057,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useUserPreferencedCurrency=function(e,t={},n=null){const d=(0,a.useSelector)(o.getSelectedInternalAccount),m=t.account??d,p=(0,u.useMultichainSelector)(r.getMultichainNativeCurrency,m),{showNativeTokenAsMainBalance:f}=(0,a.useSelector)(o.getPreferences,a.shallowEqual),g=(0,u.useMultichainSelector)(r.getMultichainShouldShowFiat,m),h={currency:(0,u.useMultichainSelector)(r.getMultichainCurrentCurrency,m),numberOfDecimals:t.numberOfDecimals||2},y={currency:n?c.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[n]||p||i.EtherDenomination.ETH:p||i.EtherDenomination.ETH,numberOfDecimals:t.numberOfDecimals||t.ethNumberOfDecimals||l.ETH_DEFAULT_DECIMALS};if(t.showNativeOverride)return y;if(t.showFiatOverride)return h;if(!g)return y;if(t.shouldCheckShowNativeToken&&f||!t.shouldCheckShowNativeToken)return e===s.PRIMARY?y:h;return e===s.PRIMARY?h:y};var a=e("react-redux"),o=e("../selectors"),r=e("../selectors/multichain"),s=e("../helpers/constants/common"),i=e("../../shared/constants/common"),l=e("../constants"),c=e("../../shared/constants/network"),u=e("./useMultichainSelector")}}},{package:"$root$",file:"ui/hooks/useUserPreferencedCurrency.js"}],[7092,{react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useWindowFocus=void 0;var a=e("react");n.useWindowFocus=()=>{const[e,t]=(0,a.useState)(document.hasFocus());return(0,a.useEffect)(()=>{const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("focus",e),window.addEventListener("blur",n),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",n)}},[]),e}}}},{package:"$root$",file:"ui/hooks/useWindowFocus.ts"}],[7093,{"../app/scripts/constants/sentry-state":11,"../app/scripts/lib/util":353,"../shared/constants/alerts":5596,"../shared/constants/app":5598,"../shared/constants/copy":5602,"../shared/lib/error-utils":5690,"../shared/lib/promise-with-resolvers":5710,"../shared/lib/sentry":5711,"../shared/lib/switch-direction":5716,"../shared/lib/trace":5718,"../shared/modules/browser-runtime.utils":5729,"../shared/modules/object.utils":5746,"../shared/modules/selectors/networks":5753,"./constants":6846,"./ducks/alerts":6865,"./ducks/metamask/metamask":6883,"./helpers/utils/critical-startup-error-handler":6928,"./helpers/utils/display-critical-error":6929,"./helpers/utils/tags":6952,"./helpers/utils/tx-helper":6958,"./pages":7614,"./selectors":7886,"./store/actions":7916,"./store/background-connection":7917,"./store/store":7921,"@metamask/chain-agnostic-permission":1359,"copy-to-clipboard":3948,loglevel:4643,react:5080,"react-dom":4971,"webextension-polyfill":5586},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"CriticalErrorTranslationKey",{enumerable:!0,get:function(){return D.CriticalErrorTranslationKey}}),Object.defineProperty(n,"CriticalStartupErrorHandler",{enumerable:!0,get:function(){return P.CriticalStartupErrorHandler}}),n.connectToBackground=void 0,n.default=async function(e){const{backgroundConnection:t,traceContext:n}=e,a=await(0,b.trace)({name:b.TraceName.GetState,parentContext:n},t.getState.bind(t)),i=await async function(e,t){const{traceContext:n}=t,a=(0,M.getStartupTraceTags)({metamask:e}),i=await(0,b.trace)({name:b.TraceName.SetupStore,parentContext:n,tags:a},()=>F(e,t.activeTab));return global.metamask={updateCurrentLocale:e=>{i.dispatch(x.updateCurrentLocale(e))},setFeatureFlag:(e,t)=>{i.dispatch(x.setFeatureFlag(e,t))}},await(0,b.trace)({name:b.TraceName.InitialActions,parentContext:n},()=>async function(e){const t=e.getState();try{const n=(0,g.getBrowserName)().toLowerCase(),{os:a}=t.metamask.browserEnvironment||{};a&&n&&e.dispatch(x.setBrowserEnvironment(a,n)).catch(e=>{o.default.error("Failed to update browser environment:",e)})}catch(e){o.default.error("Failed to get browser name:",e)}const n=(0,C.getNetworkToAutomaticallySwitchTo)(t);n&&await e.dispatch(x.automaticallySwitchNetwork(n));if((0,u.getEnvironmentType)()===f.ENVIRONMENT_TYPE_POPUP){const t=Date.now();global.metamask.id=t,await e.dispatch(x.setCurrentExtensionPopupId(t))}try{const n=async t=>{(0,w.getIsUnlocked)(t)&&await e.dispatch(x.checkIsSeedlessPasswordOutdated())};await n(t);const a=setInterval(()=>{const t=e.getState(),o=(0,C.getFirstTimeFlowType)(t),r=(0,C.getIsSocialLoginFlow)(t);null===o||r?n(t):clearInterval(a)},A.SEEDLESS_PASSWORD_OUTDATED_CHECK_INTERVAL_MS)}catch(e){o.default.error("[Metamask] checkIsSeedlessPasswordOutdated error",e)}}(i)),(0,b.trace)({name:b.TraceName.FirstRender,parentContext:n},()=>(0,s.render)(r.default.createElement(_.default,{store:i}),t.container)),i}(a,e);return await t.startPatches(),function(e){0;window.stateHooks.getCleanAppState=async function(){return R(e)},window.stateHooks.getSentryAppState=function(){const t=e.getState();return(0,m.maskObject)(t,p.SENTRY_UI_STATE)},window.stateHooks.getLogs=function(){const t=e.getState(),{logs:n}=t.metamask;return Object.values(n).sort((e,t)=>e.timestamp-t.timestamp)}}(i),i},Object.defineProperty(n,"displayCriticalError",{enumerable:!0,get:function(){return D.displayCriticalError}}),n.getCleanAppState=R,n.setupInitialStore=F;var a=B(e("copy-to-clipboard")),o=B(e("loglevel")),r=B(e("react")),s=e("react-dom"),i=B(e("webextension-polyfill")),l=e("@metamask/chain-agnostic-permission"),c=(e("../shared/lib/sentry"),e("../shared/lib/promise-with-resolvers")),u=e("../app/scripts/lib/util"),d=e("../shared/constants/alerts"),m=e("../shared/modules/object.utils"),p=e("../app/scripts/constants/sentry-state"),f=e("../shared/constants/app"),g=e("../shared/modules/browser-runtime.utils"),h=e("../shared/constants/copy"),y=e("../shared/lib/switch-direction"),v=e("../shared/lib/error-utils"),b=e("../shared/lib/trace"),k=e("../shared/modules/selectors/networks"),x=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("./store/actions")),T=B(e("./store/store")),C=e("./selectors"),E=e("./ducks/alerts"),w=e("./ducks/metamask/metamask"),_=B(e("./pages")),S=B(e("./helpers/utils/tx-helper")),I=e("./store/background-connection"),M=e("./helpers/utils/tags"),A=e("./constants"),P=e("./helpers/utils/critical-startup-error-handler"),D=e("./helpers/utils/display-critical-error");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function B(e){return e&&e.__esModule?e:{default:e}}o.default.setLevel(global.METAMASK_DEBUG?"debug":"warn",!1);const N=(0,c.withResolvers)();async function F(e,t){e.featureFlags||(e.featureFlags={});const{currentLocaleMessages:n,enLocaleMessages:a}=await(0,v.setupLocale)(e.currentLocale);"rtl"===e.textDirection&&(0,y.switchDirection)("rtl");const o={activeTab:t,metamask:e,appState:{},localeMessages:{currentLocale:e.currentLocale,current:n,en:a}};if((0,u.getEnvironmentType)()===f.ENVIRONMENT_TYPE_POPUP||(0,u.getEnvironmentType)()===f.ENVIRONMENT_TYPE_SIDEPANEL){const{origin:e}=o.activeTab,t=(0,C.getAllPermittedAccountsForCurrentTab)(o),n=(0,C.getSelectedInternalAccount)(o),a=n&&(0,l.isInternalAccountInPermittedAccountIds)(n,t),r=(0,w.getUnconnectedAccountAlertShown)(o),s=(0,w.getUnconnectedAccountAlertEnabledness)(o);e&&s&&!r[e]&&t.length>0&&!a&&(o[d.AlertTypes.unconnectedAccount]={state:E.ALERT_STATE.OPEN},x.setUnconnectedAccountAlertShown(e))}const r=(0,T.default)(o);N.resolve(r);const s=(0,C.getUnapprovedTransactions)(e),i=(0,S.default)(s,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.networkId,(0,k.getCurrentChainId)({metamask:e}));return i.length>0&&r.dispatch(x.showConfTxPage({id:i[0].id})),r}async function R(e){const t={...e.getState()};return t.version=global.platform.getVersion(),t.browser=window.navigator.userAgent,t.metamask={...t.metamask,socialLoginEmail:undefined},t}n.connectToBackground=(e,t)=>{(0,I.setBackgroundConnection)(e),e.onNotification(async e=>{const{method:n}=e;if("sendUpdate"===n){(await N.promise).dispatch(x.updateMetamaskState(e.params[0]))}else{if("startUISync"!==n)throw new Error(`Internal JSON-RPC Notification Not Handled:\n\n ${JSON.stringify(e)}`);await t()}})},window.logStateString=async function(e){const t=await window.stateHooks.getCleanAppState(),n=window.stateHooks.getLogs();i.default.runtime.getPlatformInfo().then(a=>{t.platform=a,t.logs=n;const o=JSON.stringify(t,null,2);e(null,o)}).catch(t=>{e(t)})},window.logState=function(e){return window.logStateString((t,n)=>{t?console.error(t.message):e?((0,a.default)(n,h.COPY_OPTIONS),console.log("State log copied")):console.log(n)})}}}},{package:"$root$",file:"ui/index.js"}],[7094,{"../components/multichain":6568,"../pages/routes/utils":7740,react:5080,"react-router-dom":5048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Header=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("react-router-dom"),s=e("../components/multichain"),i=e("../pages/routes/utils");n.Header=()=>{const e=(0,r.useLocation)();return o.default.createElement(o.default.Fragment,null,(0,i.showAppHeader)({location:e})&&o.default.createElement(s.AppHeader,{location:e}))}}}},{package:"$root$",file:"ui/layouts/header.tsx"}],[7095,{"./header":7094,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LegacyLayout=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("./header");n.LegacyLayout=({children:e})=>o.default.createElement(o.default.Fragment,null,o.default.createElement(r.Header,null),o.default.createElement("div",{className:"mm-box main-container-wrapper"},e))}}},{package:"$root$",file:"ui/layouts/legacy-layout.tsx"}],[7096,{"./header":7094,classnames:3913,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RootLayout=void 0;var a=s(e("react")),o=s(e("classnames")),r=e("./header");function s(e){return e&&e.__esModule?e:{default:e}}n.RootLayout=({children:e})=>a.default.createElement("div",{className:(0,o.default)("w-full h-full flex flex-col","max-w-[clamp(var(--width-sm),85vw,var(--width-max))]","group-[.app--sidepanel]:max-w-[var(--width-max-sidepanel)]")},a.default.createElement(r.Header,null),a.default.createElement("div",{className:"flex flex-col flex-1 min-h-0"},e))}}},{package:"$root$",file:"ui/layouts/root-layout.tsx"}],[7097,{"../helpers/higher-order-components/authenticated/authenticated.container":6914,react:5080,"react-router-dom":5048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RouteWithLayout=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-router-dom"),s=(a=e("../helpers/higher-order-components/authenticated/authenticated.container"))&&a.__esModule?a:{default:a};function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(null,arguments)}n.RouteWithLayout=({layout:e,component:t,children:n,authenticated:a,...i})=>{const c="function"==typeof n?null:n,u=(0,o.useMemo)(()=>t?n=>o.default.createElement(e,null,o.default.createElement(t,n)):t=>o.default.createElement(e,null,"function"==typeof n?n(t):n),[e,t,c]);return a?o.default.createElement(s.default,l({},i,{component:u})):o.default.createElement(r.Route,l({},i,{render:a=>{let r;return r=t?o.default.createElement(t,a):"function"==typeof n?n(a):n,o.default.createElement(e,null,r)}}))}}}},{package:"$root$",file:"ui/layouts/route-with-layout.tsx"}],[7098,{"../../../shared/modules/string-utils":5761,"../../components/app/assets/nfts/nft-details/nft-details":5827,"../../ducks/metamask/metamask":6883,"../../helpers/constants/routes":6904,"../../selectors/assets":7878,"./components/native-asset":7108,"./components/token-asset":7109,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("react-router-dom-v5-compat"),s=e("../../../shared/modules/string-utils"),i=p(e("../../components/app/assets/nfts/nft-details/nft-details")),l=e("../../ducks/metamask/metamask"),c=e("../../helpers/constants/routes"),u=e("../../selectors/assets"),d=p(e("./components/native-asset")),m=p(e("./components/token-asset"));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}n.default=({params:e})=>{const{chainId:t,asset:n,id:p}=e,f=n?decodeURIComponent(n):undefined,g=(0,o.useSelector)(e=>(0,l.getNFTsByChainId)(e,t)),h=(0,o.useSelector)(e=>(0,u.getTokenByAccountAndAddressAndChainId)(e,undefined,f,t)),y=g.find(({address:e,tokenId:t})=>(0,s.isEqualCaseInsensitive)(e,f)&&p===t.toString());(0,a.useEffect)(()=>{const e=document.querySelector(".app");null==e||e.scroll(0,0)},[]);const v=(()=>{if(y)return a.default.createElement(i.default,{nft:y,nftChainId:t});if(!h||!t)return a.default.createElement(r.Navigate,{to:c.DEFAULT_ROUTE});return!h.isNative&&h.address?a.default.createElement(m.default,{chainId:t,token:h}):a.default.createElement(d.default,{chainId:t,token:h})})();return a.default.createElement("div",{className:"main-container asset__container"},v)}}}},{package:"$root$",file:"ui/pages/asset/asset.tsx"}],[7099,{"../../../../app/scripts/lib/util":353,"../../../../shared/constants/transaction":5637,"../../../../shared/lib/asset-utils":5647,"../../../components/component-library":6325,"../../../ducks/metamask/metamask":6883,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/confirm-tx.util":6927,"../../../hooks/useFormatters":7043,"../../../hooks/useI18nContext":7047,"../../../hooks/useMultichainSelector":7057,"../../../selectors/assets":7878,"../../../selectors/multichain":7895,"../../../selectors/selectors":7903,"../util":7117,"bignumber.js":3768,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetMarketDetails=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("react-redux"),s=e("bignumber.js"),i=e("../../../helpers/utils/confirm-tx.util"),l=e("../util"),c=e("../../../components/component-library"),u=e("../../../helpers/constants/design-system"),d=e("../../../hooks/useI18nContext"),m=e("../../../ducks/metamask/metamask"),p=e("../../../hooks/useMultichainSelector"),f=e("../../../selectors/multichain"),g=e("../../../selectors/assets"),h=e("../../../selectors/selectors"),y=e("../../../../shared/constants/transaction"),v=e("../../../../app/scripts/lib/util"),b=e("../../../../shared/lib/asset-utils"),k=e("../../../hooks/useFormatters");function x(e,t){return o.default.createElement(c.Box,{display:u.Display.Flex,justifyContent:u.JustifyContent.spaceBetween},o.default.createElement(c.Text,{color:u.TextColor.textAlternative,variant:u.TextVariant.bodyMdMedium},e),t)}n.AssetMarketDetails=({asset:e,address:t})=>{var n,a,T,C,E;const w=(0,d.useI18nContext)(),_=(0,r.useSelector)(m.getCurrentCurrency),S=(0,p.useMultichainSelector)(f.getMultichainConversionRate),I=(0,r.useSelector)(h.getMarketData),M=(0,r.useSelector)(h.getCurrencyRates),A=(0,r.useSelector)(g.getAssetsRates),{formatCurrencyCompact:P,formatCompact:D}=(0,k.useFormatters)(),O=(0,b.isEvmChainId)(e.chainId),B=(0,p.useMultichainSelector)(f.getMultichainNativeCurrency),{type:N,symbol:F,chainId:R}=e,j=N===y.AssetType.native?null===(n=M[F])||void 0===n?void 0:n.conversionRate:(null===(a=M[B])||void 0===a?void 0:a.conversionRate)||0,L=(null==A||null===(T=A[t])||void 0===T?void 0:T.rate)||0,$=O?j:L,W=(0,v.getConversionRatesForNativeAsset)({conversionRates:A,chainId:R}),q=N===y.AssetType.native?null==W?void 0:W.marketData:null==A||null===(C=A[t])||void 0===C?void 0:C.marketData,U=O?null===(E=I[R])||void 0===E?void 0:E[t]:q;if(!(S>0&&U&&(U.marketCap>0||U.totalVolume>0||U.circulatingSupply>0||U.allTimeHigh>0||U.allTimeLow>0)))return null;const V=e=>e?new s.BigNumber("string"==typeof e?e:e.toString()).toNumber():0;let G=V(U.marketCap),z=V(U.totalVolume);const H=V(U.circulatingSupply);let Q=V(U.allTimeHigh),K=V(U.allTimeLow);return O&&(G*=$,z*=$,Q*=$,K*=$),o.default.createElement(c.Box,null,o.default.createElement(c.Box,{marginBottom:2,borderColor:u.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),o.default.createElement(c.Text,{variant:u.TextVariant.headingSm,paddingInline:4,paddingTop:2,paddingBottom:2},w("marketDetails")),o.default.createElement(c.Box,{paddingInline:4,display:u.Display.Flex,flexDirection:u.FlexDirection.Column,gap:2},G>0&&x(w("marketCap"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium,"data-testid":"asset-market-cap"},P(G,_))),z>0&&x(w("totalVolume"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},P(z,_))),H>0&&x(w("circulatingSupply"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},D(H))),Q>0&&x(w("allTimeHigh"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},(0,i.formatCurrency)(`${Q}`,_,(0,l.getPricePrecision)(Q)))),K>0&&x(w("allTimeLow"),o.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium},(0,i.formatCurrency)(`${K}`,_,(0,l.getPricePrecision)(K))))))}}}},{package:"$root$",file:"ui/pages/asset/components/asset-market-details.tsx"}],[7100,{"../../../components/component-library":6325,"../../../components/ui/menu":6788,"../../../contexts/i18n":6850,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../selectors":7886,"prop-types":4893,react:5080,"react-redux":5021,"react-router-dom":5048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=(a=e("prop-types"))&&a.__esModule?a:{default:a},s=e("react-router-dom"),i=e("react-redux"),l=e("../../../contexts/i18n"),c=e("../../../components/ui/menu"),u=e("../../../selectors"),d=e("../../../helpers/constants/routes"),m=e("../../../components/component-library"),p=e("../../../helpers/constants/design-system");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const g=({onRemove:e,onClickBlockExplorer:t,onViewTokenDetails:n,tokenSymbol:a,isNativeAsset:r})=>{const f=(0,o.useContext)(l.I18nContext),[g,h]=(0,o.useState)(!1),y=(0,s.useHistory)(),v=(0,i.useSelector)(u.getBlockExplorerLinkText),b=(0,o.useRef)(!1);return o.default.createElement("div",{ref:b},o.default.createElement(m.ButtonIcon,{className:"asset-options__button","data-testid":"asset-options__button",onClick:()=>h(!0),ariaLabel:f("assetOptions"),iconName:m.IconName.MoreVertical,color:p.Color.textDefault,size:m.ButtonIconSize.Sm}),g?o.default.createElement(c.Menu,{anchorElement:b.current,onHide:()=>h(!1)},o.default.createElement(c.MenuItem,{iconName:m.IconName.Export,"data-testid":"asset-options__etherscan",onClick:"addBlockExplorer"===v.firstPart?()=>{y.push(`${d.NETWORKS_ROUTE}#blockExplorerUrl`)}:()=>{h(!1),t()}},f(v.firstPart,""===v.secondPart?null:[f("blockExplorerAssetAction")])),!r&&o.default.createElement(c.MenuItem,{iconName:m.IconName.Trash,"data-testid":"asset-options__hide",onClick:()=>{h(!1),e()}},f("hideTokenSymbol",[a])),r||!n?null:o.default.createElement(c.MenuItem,{iconName:m.IconName.Info,"data-testid":"asset-options__token-details",onClick:()=>{h(!1),n()}},f("tokenDetails"))):null)};g.propTypes={isNativeAsset:r.default.bool,onClickBlockExplorer:r.default.func.isRequired,onRemove:e=>{if(!1===e.isNativeAsset&&"function"!=typeof e.onRemove)throw new Error("When isNativeAsset is true, onRemove is a required prop")},onViewTokenDetails:r.default.func,tokenSymbol:e=>{if(!1===e.isNativeAsset&&"string"!=typeof e.tokenSymbol)throw new Error("When isNativeAsset is true, tokenSymbol is a required prop")}};n.default=g}}},{package:"$root$",file:"ui/pages/asset/components/asset-options.js"}],[7101,{"../../../../shared/constants/transaction":5637,"../../../../shared/lib/asset-utils":5647,"../../../../shared/lib/trace":5718,"../../../../shared/modules/conversion.utils":5732,"../../../../shared/modules/hexstring-utils":5741,"../../../components/app/assets/hooks/useMultichainAssets":5818,"../../../components/app/assets/token-cell":5844,"../../../components/app/assets/util/calculateTokenBalance":5848,"../../../components/app/transaction-list":6240,"../../../components/app/transaction-list/unified-transaction-list.component":6242,"../../../components/app/wallet-overview/coin-buttons":6249,"../../../components/component-library":6325,"../../../components/multichain":6568,"../../../ducks/metamask/metamask":6883,"../../../ducks/ramps":6885,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../helpers/utils/portfolio":6948,"../../../hooks/useI18nContext":7047,"../../../hooks/useMultichainSelector":7057,"../../../hooks/useTokenBalances":7078,"../../../selectors":7886,"../../../selectors/assets":7878,"../../../selectors/multichain":7895,"../../../selectors/multichain-accounts/account-tree":7890,"../../settings/networks-tab/networks-form/use-safe-chains":7775,"../hooks/useCurrentPrice":7113,"./asset-market-details":7099,"./chart/asset-chart":7105,"./token-buttons":7110,"./tron-daily-resources":7111,"@metamask/assets-controllers":1233,"@metamask/bridge-controller":1304,"@metamask/keyring-api":2100,"@metamask/utils":2914,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/assets-controllers"),o=e("@metamask/bridge-controller"),r=e("@metamask/keyring-api"),s=e("@metamask/utils"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=q(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),l=e("react-redux"),c=e("react-router-dom-v5-compat"),u=e("../../../../shared/constants/transaction"),d=e("../../../../shared/lib/asset-utils"),m=e("../../../../shared/lib/trace"),p=e("../../../../shared/modules/conversion.utils"),f=e("../../../../shared/modules/hexstring-utils"),g=W(e("../../../components/app/assets/hooks/useMultichainAssets")),h=W(e("../../../components/app/assets/token-cell")),y=e("../../../components/app/assets/util/calculateTokenBalance"),v=W(e("../../../components/app/transaction-list")),b=W(e("../../../components/app/transaction-list/unified-transaction-list.component")),k=W(e("../../../components/app/wallet-overview/coin-buttons")),x=e("../../../components/component-library"),T=e("../../../components/multichain"),C=e("../../../ducks/metamask/metamask"),E=e("../../../ducks/ramps"),w=e("../../../helpers/constants/design-system"),_=e("../../../helpers/constants/routes"),S=e("../../../helpers/utils/portfolio"),I=e("../../../hooks/useI18nContext"),M=e("../../../hooks/useMultichainSelector"),A=e("../../../hooks/useTokenBalances"),P=e("../../../selectors"),D=e("../../../selectors/assets"),O=e("../../../selectors/multichain"),B=e("../../../selectors/multichain-accounts/account-tree"),N=e("../../settings/networks-tab/networks-form/use-safe-chains"),F=e("../hooks/useCurrentPrice"),R=e("./asset-market-details"),j=W(e("./chart/asset-chart")),L=W(e("./token-buttons")),$=e("./tron-daily-resources");function W(e){return e&&e.__esModule?e:{default:e}}function q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(q=function(e){return e?n:t})(e)}function U(e,t){return i.default.createElement(x.Box,{display:w.Display.Flex,justifyContent:w.JustifyContent.spaceBetween},i.default.createElement(x.Text,{color:w.TextColor.textAlternative,variant:w.TextVariant.bodyMdMedium},e),i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium},t))}n.default=({asset:e,optionsButton:t})=>{var n;const W=(0,I.useI18nContext)(),q=(0,c.useNavigate)(),V=(0,l.useSelector)(C.getCurrentCurrency),G=(0,l.useSelector)(E.getIsNativeTokenBuyable),z=(0,d.isEvmChainId)(e.chainId),H=(0,l.useSelector)(D.getMultichainNativeAssetType),Q=(0,l.useSelector)(P.getIsMultichainAccountsState2Enabled),K=(0,l.useSelector)(D.getAssetsBySelectedAccountGroup),J=(0,s.isCaipChainId)(e.chainId)?e.chainId:(0,o.formatChainIdToCaip)(e.chainId),X=(0,l.useSelector)(e=>(0,B.getInternalAccountBySelectedAccountGroupAndCaip)(e,J));(0,i.useEffect)(()=>{(0,m.endTrace)({name:m.TraceName.AssetDetails})},[]);const{chainId:Y,type:Z,symbol:ee,name:te,image:ne,decimals:ae}=e,oe=Z===u.AssetType.native,re=(0,l.useSelector)(e=>(0,P.getIsSwapsChain)(e,Y)),se=(0,l.useSelector)(e=>(0,P.getIsBridgeChain)(e,Y)),ie=X.methods.includes(r.EthMethod.SignTransaction)||X.methods.includes(r.EthMethod.SignUserOperation)||X.methods.includes(r.SolMethod.SignTransaction)||X.methods.includes(r.BtcMethod.SignPsbt)||X.type===r.TrxAccountType.Eoa,le=(0,M.useMultichainSelector)(O.getMultichainIsTestnet),ce=(0,M.useMultichainSelector)(O.getMultichainShouldShowFiat),ue=!le,de=(0,l.useSelector)(P.getShowFiatInTestnets),me=ce&&(ue||le&&de),pe=(0,l.useSelector)(P.getSelectedAccountNativeTokenCachedBalanceByChainId),{tokenBalances:fe}=(0,A.useTokenBalances)({chainIds:[Y]}),ge=fe[X.address],he=(0,g.default)().filter(e=>e.chainId===Y&&e.address!==undefined).find(t=>{switch(Z){case u.AssetType.native:return t.isNative;case u.AssetType.token:return t.address===e.address;default:return!1}})??{address:"",chainId:"",symbol:"",title:"",image:"",tokenFiatAmount:0,string:"",decimals:0,aggregators:[],isNative:!1,balance:0,secondary:0},ye=(0,l.useSelector)(P.getParticipateInMetaMetrics),ve=(0,l.useSelector)(P.getDataCollectionForMarketing),be=(0,l.useSelector)(P.getMetaMetricsId);let ke=(Z===u.AssetType.token?z?(0,f.toChecksumHexAddress)(e.address):e.address:z?(0,a.getNativeTokenAddress)(Y):H)??"";const xe=Z===u.AssetType.token,Te=xe?z?(0,f.toChecksumHexAddress)(e.address):(0,s.parseCaipAssetType)(ke).assetReference:"",{currentPrice:Ce}=(0,F.useCurrentPrice)(e);let Ee,we,_e;if(Q){var Se,Ie;const t=null===(Se=K[Y])||void 0===Se?void 0:Se.find(e=>e.assetId.toLowerCase()===ke.toLowerCase()||!ke&&!z&&e.isNative);_e=(null==t?void 0:t.assetId)||"",ke=(null==t?void 0:t.assetId)||"",Ee=(null==t?void 0:t.balance)??"0",we=(null==t||null===(Ie=t.fiat)||void 0===Ie?void 0:Ie.balance)??0;const n=null==t?void 0:t.rawBalance;e.balance={value:(0,p.hexToDecimal)(n),display:Ee,fiat:String(we)}}else{var Me;const t=null==ge||null===(Me=ge[Y])||void 0===Me?void 0:Me[ke];Ee=(0,y.calculateTokenBalance)({isNative:oe,chainId:Y,address:ke,decimals:ae,nativeBalances:pe,selectedAccountTokenBalancesAcrossChains:ge}),we=Ce?Ce*parseFloat(String(Ee)):0,e.balance={value:(0,p.hexToDecimal)(t),display:String(Ee),fiat:String(we)}}const Ae=z,Pe=(0,i.useMemo)(()=>(0,S.getPortfolioUrl)("","asset_page",be,ye,ve,X.address,"spending-caps"),[X.address,ve,ye,be]),De=null===(n=(0,l.useSelector)(O.getMultichainNetworkConfigurationsByChainId)[Y])||void 0===n?void 0:n.name,Oe=(0,O.getImageForChainId)(Y),Be=(0,l.useSelector)(e=>(0,D.getAsset)(e,ke,Y)),Ne=z||Q?{address:z?ke:_e,chainId:Y,symbol:ee,image:ne,title:te??ee,tokenFiatAmount:me?we:null,string:Ee?Ee.toString():"",decimals:e.decimals,aggregators:Z===u.AssetType.token&&e.aggregators?e.aggregators:[],isNative:Z===u.AssetType.native,balance:Ee,secondary:Ee?Number(Ee):0,accountType:null==Be?void 0:Be.accountType}:{...he,accountType:null==Be?void 0:Be.accountType},{safeChains:Fe}=(0,N.useSafeChains)(),Re=(0,l.useSelector)(P.getIsMultichainAccountsState2Enabled),je=(0,M.useMultichainSelector)(O.getMultichainIsTron,X)&&Z===u.AssetType.native;return i.default.createElement(x.Box,{marginLeft:"auto",marginRight:"auto",marginTop:4,className:"asset__content"},i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Row,justifyContent:w.JustifyContent.spaceBetween,paddingTop:1,paddingBottom:3,paddingLeft:2,paddingRight:4},i.default.createElement(x.Box,{display:w.Display.Flex},i.default.createElement(x.ButtonIcon,{color:w.IconColor.iconAlternative,marginRight:1,size:x.ButtonIconSize.Sm,ariaLabel:W("back"),iconName:x.IconName.ArrowLeft,onClick:()=>q(_.DEFAULT_ROUTE)})),t),i.default.createElement(x.Box,{paddingLeft:4},i.default.createElement(x.Text,{"data-testid":"asset-name",variant:w.TextVariant.bodyMdMedium,color:w.TextColor.textAlternative},te&&ee&&te!==ee?`${te} (${ee})`:te??ee)),i.default.createElement(j.default,{chainId:Y,address:ke,currentPrice:Ce,currency:V,asset:Ne}),i.default.createElement(x.Box,{marginTop:4,paddingLeft:4,paddingRight:4},Z===u.AssetType.native?i.default.createElement(k.default,{account:X,trackingLocation:"asset-page",isBuyableChain:G,isSigningEnabled:ie,isSwapsChain:re,isBridgeChain:se,chainId:Y}):i.default.createElement(L.default,{token:e,account:X})),i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,paddingTop:3},je&&i.default.createElement(x.Box,null,i.default.createElement($.TronDailyResources,{account:X,chainId:Y}),i.default.createElement(x.Box,{marginTop:2,marginBottom:2,borderColor:w.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}})),i.default.createElement(x.Text,{variant:w.TextVariant.headingSm,paddingBottom:1,paddingTop:1,paddingLeft:4},W("yourBalance")),[u.AssetType.token,u.AssetType.native].includes(Z)&&i.default.createElement(h.default,{key:`${ee}-${ke}`,token:Ne,safeChains:Fe}),i.default.createElement(x.Box,{marginTop:2,marginBottom:2,borderColor:w.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),i.default.createElement(x.Box,{marginTop:2,display:w.Display.Flex,flexDirection:w.FlexDirection.Column,gap:4},[u.AssetType.token,u.AssetType.native].includes(Z)&&i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,paddingLeft:4,paddingRight:4},i.default.createElement(x.Text,{variant:w.TextVariant.headingSm,paddingBottom:2},W("tokenDetails")),i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,gap:2},U(W("network"),i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium,display:w.Display.Flex,alignItems:w.AlignItems.center,gap:2,"data-testid":"asset-network"},i.default.createElement(x.AvatarNetwork,{src:Oe,name:De,size:x.AvatarNetworkSize.Xs}),De)),xe&&i.default.createElement(x.Box,null,U(W("contractAddress"),i.default.createElement(T.AddressCopyButton,{address:Te,shorten:!0})),i.default.createElement(x.Box,{display:w.Display.Flex,flexDirection:w.FlexDirection.Column,gap:2},e.decimals!==undefined&&U(W("tokenDecimal"),i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium},e.decimals)),e.aggregators&&e.aggregators.length>0&&i.default.createElement(x.Box,null,i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium,color:w.TextColor.textAlternative},W("tokenList")),i.default.createElement(x.Text,{variant:w.TextVariant.bodyMdMedium},e.aggregators.map(e=>e.replace(/^metamask$/iu,"MetaMask")).join(", "))))),Ae&&U(W("spendingCaps"),i.default.createElement(x.ButtonLink,{className:"asset-page__spending-caps mm-text--body-md-medium",href:Pe,target:"_blank",rel:"noopener noreferrer"},W("editInPortfolio"))))),i.default.createElement(R.AssetMarketDetails,{asset:e,address:ke}),i.default.createElement(x.Box,{borderColor:w.BorderColor.borderMuted,marginInline:4,style:{height:"1px",borderBottomWidth:0}}),i.default.createElement(x.Box,{marginBottom:4},i.default.createElement(x.Text,{paddingInline:4,variant:w.TextVariant.headingSm},W("yourActivity")),Re?i.default.createElement(b.default,{tokenAddress:ke,hideNetworkFilter:!0,tokenChainIdOverride:Y}):i.default.createElement(v.default,{tokenAddress:ke,hideNetworkFilter:!0,overrideFilterForCurrentChain:Z===u.AssetType.native})))))}}}},{package:"$root$",file:"ui/pages/asset/components/asset-page.tsx"}],[7102,{"../../../../components/component-library":6325,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetChartEmptyState=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../components/component-library"),r=e("../../../../helpers/constants/design-system"),s=e("../../../../hooks/useI18nContext");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}n.AssetChartEmptyState=()=>{const e=(0,s.useI18nContext)();return a.createElement(o.Box,{className:"asset-chart__empty-or-loading-state-container"},a.createElement(o.Box,{className:"asset-chart__empty-state-content"},a.createElement("img",{src:"./images/asset-chart-empty-state-illustration.png",className:"asset-chart__empty-state-illustration"}),a.createElement(o.Text,{textAlign:r.TextAlign.Center,variant:r.TextVariant.bodySmMedium,color:r.TextColor.textAlternative,fontWeight:r.FontWeight.Medium,paddingTop:4,paddingRight:2,paddingBottom:4,paddingLeft:2,width:r.BlockSize.Full},e("assetChartNoHistoricalPrices"))))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart-empty-state.tsx"}],[7103,{"../../../../components/component-library":6325,"../../../../components/component-library/skeleton":6371,"../../../../helpers/constants/design-system":6899,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AssetChartLoading=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../components/component-library/skeleton"),r=e("../../../../components/component-library"),s=e("../../../../helpers/constants/design-system");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}n.AssetChartLoading=()=>a.createElement(r.Box,{className:"asset-chart__empty-or-loading-state-container","data-testid":"asset-chart-loading"},a.createElement(o.Skeleton,{className:"asset-chart__skeleton",borderRadius:s.BorderRadius.LG}))}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart-loading.tsx"}],[7104,{"../../../../components/app/assets/token-cell/cells":5839,"../../../../components/component-library":6325,"../../../../components/component-library/skeleton":6371,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useFormatters":7043,"../../util":7117,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../helpers/constants/design-system"),r=e("../../../../components/component-library"),s=e("../../util"),i=e("../../../../hooks/useFormatters"),l=e("../../../../components/component-library/skeleton"),c=e("../../../../components/app/assets/token-cell/cells");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d=()=>a.default.createElement(l.Skeleton,{width:"25%",marginBottom:1,borderRadius:o.BorderRadius.LG},a.default.createElement(r.Text,{variant:o.TextVariant.displayMd},"")),m=()=>a.default.createElement(r.Text,{variant:o.TextVariant.displayMd,marginBottom:1},""),p=()=>a.default.createElement(l.Skeleton,{width:"33%",borderRadius:o.BorderRadius.LG},a.default.createElement(r.Text,{variant:o.TextVariant.bodyMdMedium},"")),f=()=>a.default.createElement(r.Text,{variant:o.TextVariant.bodyMdMedium},""),g=(0,a.forwardRef)((e,t)=>{const[{price:n,date:l},u]=(0,a.useState)({price:e.price,date:e.date});(0,a.useImperativeHandle)(t,()=>({setPrice:u}));const{formatCurrencyTokenPrice:g}=(0,i.useFormatters)(),{loading:h,currency:y,comparePrice:v}=e,b=n!==undefined&&v!==undefined?n-v:undefined,k=h&&n===undefined,x=!h&&n===undefined,T=h&&n!==undefined,C=!h&&n!==undefined,E=h&&b===undefined,w=!h&&b===undefined,_=h&&b!==undefined&&v!==undefined,S=!h&&b!==undefined&&v!==undefined;return a.default.createElement(r.Box,{marginLeft:4,marginRight:4},k&&a.default.createElement(d,null),x&&a.default.createElement(m,null),(C||T)&&a.default.createElement(r.Text,{"data-testid":"asset-hovered-price",variant:o.TextVariant.displayMd,fontWeight:o.FontWeight.Medium,borderRadius:o.BorderRadius.LG,marginBottom:1,style:{opacity:T?s.loadingOpacity:1}},g(n,y)),E&&a.default.createElement(p,null),w&&a.default.createElement(f,null),(S||_)&&a.default.createElement(r.Box,{style:{opacity:h?s.loadingOpacity:1},display:o.Display.Flex,flexDirection:o.FlexDirection.Row},e.asset&&a.default.createElement(c.TokenCellPercentChange,{token:e.asset,price:n,comparePrice:v}),a.default.createElement(r.Text,{display:o.Display.InlineBlock,variant:o.TextVariant.bodyMdMedium,color:o.TextColor.textAlternative,marginLeft:2},(0,s.getShortDateFormatter)().format(l))))});n.default=g}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart-price.tsx"}],[7105,{"../../../../components/component-library":6325,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useTheme":7076,"../../hooks/useChartTimeRanges":7112,"../../hooks/useHistoricalPrices":7114,"../../util":7117,"./asset-chart-empty-state":7102,"./asset-chart-loading":7103,"./asset-chart-price":7104,"./chart-tooltip":7106,"./crosshair-plugin":7107,"@metamask/design-tokens":1749,"@metamask/utils":2914,"chart.js":3905,classnames:3913,lodash:4635,luxon:4646,react:5080,"react-chartjs-2":4967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertAddressToAssetCaipType=_,n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("chart.js"),r=e("react-chartjs-2"),s=C(e("classnames")),i=e("@metamask/design-tokens"),l=e("@metamask/utils"),c=e("lodash"),u=e("luxon"),d=e("../../../../hooks/useTheme"),m=e("../../../../helpers/constants/design-system"),p=e("../../../../components/component-library"),f=e("../../../../hooks/useI18nContext"),g=e("../../hooks/useHistoricalPrices"),h=e("../../util"),y=e("../../hooks/useChartTimeRanges"),v=C(e("./chart-tooltip")),b=e("./crosshair-plugin"),k=e("./asset-chart-empty-state"),x=e("./asset-chart-loading"),T=C(e("./asset-chart-price"));function C(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}o.Chart.register(o.LinearScale,o.PointElement,o.LineElement,o.Filler,o.Decimation,b.CrosshairPlugin);const w={normalized:!0,parsing:!1,aspectRatio:2.6,layout:{autoPadding:!1,padding:0},animation:{duration:0},fill:!0,backgroundColor:({chart:e})=>{const t=e.ctx.createLinearGradient(0,0,0,e.height);return t.addColorStop(0,`${e.options.borderColor}60`),t.addColorStop(1,`${e.options.borderColor}00`),t},elements:{line:{borderWidth:1.5},point:{pointStyle:!1}},plugins:{decimation:{algorithm:"lttb",samples:150,threshold:150,enabled:!0}}};function _(e,t){return(0,l.isCaipAssetType)(e)?e:(0,l.isHexString)(e)&&(0,l.isHexString)(t)?(0,l.toCaipAssetType)(l.KnownCaipNamespace.Eip155,(0,l.hexToNumber)(t).toString(),"erc20",e):undefined}n.default=({chainId:e,address:t,currentPrice:n,currency:o,asset:l})=>{var b;const C=(0,f.useI18nContext)(),E=(0,d.useTheme)(),S=(0,a.useMemo)(()=>_(t,e),[t,e]),I=(0,y.useChartTimeRanges)(S,o),[M,A]=(0,a.useState)(I[0]??"P1D"),{loading:P,data:{prices:D,metadata:{minPricePoint:O,maxPricePoint:B,xMin:N,xMax:F,yMin:R,yMax:j}}}=(0,g.useHistoricalPrices)({chainId:e,address:t,currency:o,timeRange:M}),L=P&&0===D.length,$=!P&&0===D.length,W=P&&D.length>0,q=!P&&D.length>0,U={...w,borderColor:"dark"===E?i.brandColor.blue400:i.brandColor.blue500,scales:{x:{min:N,max:F,display:!1,type:"linear"},y:{min:R,max:j,display:!1}}},V=(0,a.useRef)(),G=(0,a.useRef)();return(0,a.useEffect)(()=>{var e;null==G||null===(e=G.current)||void 0===e||e.setPrice({price:n,date:Date.now()})},[n]),a.default.createElement(p.Box,{borderRadius:m.BorderRadius.LG,display:m.Display.Flex,flexDirection:m.FlexDirection.Column},a.default.createElement(T.default,{ref:G,loading:P,currency:o,price:n,date:Date.now(),comparePrice:null==D||null===(b=D[0])||void 0===b?void 0:b.y,asset:l}),a.default.createElement(p.Box,{"data-testid":"asset-price-chart",marginTop:4,backgroundColor:P&&!D?m.BackgroundColor.backgroundSection:m.BackgroundColor.transparent,borderRadius:m.BorderRadius.LG,display:m.Display.Flex,flexDirection:m.FlexDirection.Column},L&&a.default.createElement(x.AssetChartLoading,null),$&&a.default.createElement(k.AssetChartEmptyState,null),(q||W)&&a.default.createElement(p.Box,{style:{opacity:W?h.loadingOpacity:1}},a.default.createElement(v.default,{point:B,xMin:N,xMax:F,currency:o}),a.default.createElement(p.Box,{style:{aspectRatio:`${U.aspectRatio}`},display:m.Display.Flex,flexDirection:m.FlexDirection.Column,justifyContent:n?m.JustifyContent.flexEnd:m.JustifyContent.flexStart},a.default.createElement(r.Line,{ref:V,data:{datasets:[{data:D}]},options:U,updateMode:"none",onMouseMove:e=>{var t;const n=null==V||null===(t=V.current)||void 0===t||null===(t=t.data)||void 0===t||null===(t=t.datasets)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.data;if(n){const t=e.target,o=n[Math.max(0,Math.min(n.length-1,Math.round(e.nativeEvent.offsetX/t.clientWidth*n.length)))];var a;if(o)null==G||null===(a=G.current)||void 0===a||a.setPrice({price:o.y,date:o.x})}},onMouseOut:()=>{var e;null==G||null===(e=G.current)||void 0===e||e.setPrice({price:n,date:Date.now()})}})),a.default.createElement(v.default,{point:O,xMin:N,xMax:F,currency:o})),a.default.createElement(p.Box,{style:D?undefined:{visibility:"hidden"},display:m.Display.Flex,justifyContent:m.JustifyContent.spaceBetween,marginTop:2,marginLeft:3,marginRight:3},I.map(e=>a.default.createElement(p.ButtonBase,{key:e,className:(0,s.default)("time-range-button",{"time-range-button__selected":e===M}),onClick:()=>A(e),variant:m.TextVariant.bodyXsMedium,size:p.ButtonBaseSize.Sm,paddingLeft:2,paddingRight:2,backgroundColor:m.BackgroundColor.transparent,color:m.TextColor.textAlternative},((e,t)=>{const{years:n,months:a,weeks:o,days:r,hours:s,minutes:i,seconds:l,milliseconds:d}=u.Duration.fromISO(t,{locale:"en"}).normalize().rescale().toObject();return n&&n>100?`${e("all")}`:(0,c.trim)(`${n?`${n}${e("durationSuffixYear")} `:""}${a?`${a}${e("durationSuffixMonth")} `:""}${o?`${o}${e("durationSuffixWeek")} `:""}${r?`${r}${e("durationSuffixDay")} `:""}${s?`${s}${e("durationSuffixHour")} `:""}${i?`${i}${e("durationSuffixMinute")} `:""}${l?`${l}${e("durationSuffixSecond")} `:""}${d?`${d}${e("durationSuffixMillisecond")}`:""}`)})(C,e))))))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/asset-chart.tsx"}],[7106,{"../../../../components/component-library":6325,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useFormatters":7043,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../components/component-library"),s=e("../../../../hooks/useFormatters"),i=e("../../../../helpers/constants/design-system");n.default=({point:e,xMin:t,xMax:n,currency:a})=>{const{formatCurrencyTokenPrice:l}=(0,s.useFormatters)(),c=e&&t&&n?(e.x-t)/(n-t):0;return o.default.createElement(r.Box,{style:{...c<.5?{paddingRight:100-200*c+"%"}:{paddingLeft:100-2*(100-100*c)+"%"},direction:c<.5?r.TextDirection.LeftToRight:r.TextDirection.RightToLeft}},o.default.createElement(r.Text,{marginLeft:4,marginRight:4,marginBottom:1,marginTop:1,variant:i.TextVariant.bodyXsMedium,color:i.TextColor.textAlternative,textAlign:i.TextAlign.Center},(null==e?void 0:e.y)===undefined?"":l(null==e?void 0:e.y,a)))}}}},{package:"$root$",file:"ui/pages/asset/components/chart/chart-tooltip.tsx"}],[7107,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CrosshairPlugin=void 0;n.CrosshairPlugin={id:"crosshair",afterEvent(e,{event:t}){e.crosshairX="mouseout"===t.type?undefined:t.x??undefined,e.draw()},afterDraw(e){if(e.crosshairX!==undefined){const t=e.data.datasets[0].data,n=t[Math.max(0,Math.min(t.length-1,Math.round(e.crosshairX/e.width*t.length)))];if(n){const{x:t,y:a}=e.scales,o=t.getPixelForValue(n.x),r=a.getPixelForValue(n.y);e.ctx.lineWidth=1,e.ctx.strokeStyle="#BBC0C5",e.ctx.beginPath(),e.ctx.moveTo(o,0),e.ctx.lineTo(o,e.height),e.ctx.stroke(),e.ctx.beginPath(),e.ctx.arc(o,r,3,0,2*Math.PI),e.ctx.fillStyle=e.options.borderColor,e.ctx.fill()}}}}}}},{package:"$root$",file:"ui/pages/asset/components/chart/crosshair-plugin.ts"}],[7108,{"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/transaction":5637,"../../../../shared/lib/asset-utils":5647,"../../../../shared/modules/selectors/networks":5753,"../../../contexts/metametrics":6855,"../../../helpers/utils/multichain/blockExplorer":6940,"../../../helpers/utils/util":6959,"../../../hooks/useIsOriginalNativeTokenSymbol":7048,"../../../hooks/useMultichainSelector":7057,"../../../selectors":7886,"../../../selectors/multichain":7895,"../../../selectors/multichain-accounts/account-tree":7890,"./asset-options":7100,"./asset-page":7101,"@metamask/bridge-controller":1304,"@metamask/etherscan-link":1994,"@metamask/utils":2914,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("@metamask/etherscan-link"),s=e("@metamask/utils"),i=e("@metamask/bridge-controller"),l=e("../../../selectors"),c=e("../../../../shared/modules/selectors/networks"),u=e("../../../../shared/constants/transaction"),d=e("../../../hooks/useIsOriginalNativeTokenSymbol"),m=e("../../../../shared/constants/metametrics"),p=e("../../../helpers/utils/util"),f=e("../../../contexts/metametrics"),g=e("../../../helpers/utils/multichain/blockExplorer"),h=e("../../../hooks/useMultichainSelector"),y=e("../../../selectors/multichain"),v=e("../../../../shared/lib/asset-utils"),b=e("../../../selectors/multichain-accounts/account-tree"),k=T(e("./asset-options")),x=T(e("./asset-page"));function T(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}n.default=({token:e,chainId:t})=>{const{symbol:n}=e,T=(0,l.getNativeCurrencyForChain)(t),{type:C}=(0,o.useSelector)(c.getProviderConfig)??{},{address:E}=(0,o.useSelector)(l.getSelectedInternalAccount),w=(0,o.useSelector)(l.getRpcPrefsForCurrentProvider),_=(0,s.isCaipChainId)(t)?t:(0,i.formatChainIdToCaip)(t),S=(0,o.useSelector)(e=>(0,b.getInternalAccountBySelectedAccountGroupAndCaip)(e,_)),I=(0,h.useMultichainSelector)(y.getMultichainNetwork,S),M=(0,v.isEvmChainId)(t),A=(0,g.getMultichainAccountUrl)(S.address,I),P=M?(0,r.getAccountLink)(E,t,w):A,D=(0,a.useContext)(f.MetaMetricsContext),O=(0,d.useIsOriginalNativeTokenSymbol)(t,n,C);return a.default.createElement(x.default,{asset:{chainId:t,type:u.AssetType.native,symbol:n,image:T,decimals:e.decimals,isOriginalNativeSymbol:!0===O},optionsButton:a.default.createElement(k.default,{isNativeAsset:!0,onClickBlockExplorer:()=>{D({event:"Clicked Block Explorer Link",category:m.MetaMetricsEventCategory.Navigation,properties:{link_type:"Account Tracker",action:"Asset Options",block_explorer_domain:(0,p.getURLHostName)(P)}}),global.platform.openTab({url:P})}})})}}}},{package:"$root$",file:"ui/pages/asset/components/native-asset.tsx"}],[7109,{"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/transaction":5637,"../../../../shared/lib/asset-utils":5647,"../../../../shared/modules/selectors/networks":5753,"../../../../shared/modules/string-utils":5761,"../../../contexts/metametrics":6855,"../../../helpers/utils/multichain/blockExplorer":6940,"../../../helpers/utils/util":6959,"../../../hooks/useMultichainSelector":7057,"../../../hooks/useTokenFiatAmount":7082,"../../../hooks/useTokenTracker":7086,"../../../selectors":7886,"../../../selectors/multichain":7895,"../../../selectors/multichain-accounts/account-tree":7890,"../../../store/actions":7916,"./asset-options":7100,"./asset-page":7101,"@metamask/bridge-controller":1304,"@metamask/etherscan-link":1994,"@metamask/utils":2914,react:5080,"react-redux":5021,"react-router-dom":5048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/etherscan-link"),o=e("@metamask/utils"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),i=e("react-router-dom"),l=e("@metamask/bridge-controller"),c=e("../../../../shared/constants/metametrics"),u=e("../../../../shared/constants/transaction"),d=e("../../../../shared/modules/selectors/networks"),m=e("../../../../shared/modules/string-utils"),p=e("../../../contexts/metametrics"),f=e("../../../helpers/utils/util"),g=e("../../../hooks/useTokenFiatAmount"),h=e("../../../hooks/useTokenTracker"),y=e("../../../selectors"),v=e("../../../store/actions"),b=e("../../../helpers/utils/multichain/blockExplorer"),k=e("../../../hooks/useMultichainSelector"),x=e("../../../selectors/multichain"),T=e("../../../selectors/multichain-accounts/account-tree"),C=e("../../../../shared/lib/asset-utils"),E=_(e("./asset-options")),w=_(e("./asset-page"));function _(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}n.default=({token:e,chainId:t})=>{var n,_,S;const{address:I,symbol:M,decimals:A,isERC721:P,image:D}=e,O=(0,s.useSelector)(y.getTokenList),B=(0,s.useSelector)(d.getNetworkConfigurationsByChainId),N=null===(n=B[t])||void 0===n?void 0:n.defaultBlockExplorerUrlIndex,F=N===undefined?null:null===(_=B[t])||void 0===_?void 0:_.blockExplorerUrls[N],R=(0,o.isCaipChainId)(t)?t:(0,l.formatChainIdToCaip)(t),j=(0,s.useSelector)(e=>(0,T.getInternalAccountBySelectedAccountGroupAndCaip)(e,R)),{address:L}=j,$=(0,s.useSelector)(y.selectERC20TokensByChain),W=(0,k.useMultichainSelector)(x.getMultichainNetwork,j),q=(0,C.isEvmChainId)(t),U=(0,i.useHistory)(),V=(0,s.useDispatch)(),G=(0,r.useContext)(p.MetaMetricsContext),z=Object.values(O).find(e=>(0,m.isEqualCaseInsensitive)(e.symbol,M)&&(0,m.isEqualCaseInsensitive)(e.address,I)),H=null==$||null===(S=$[t])||void 0===S||null===(S=S.data)||void 0===S?void 0:S[I.toLowerCase()],Q=(null==z?void 0:z.name)||(null==H?void 0:H.name)||M,K=(null==z?void 0:z.iconUrl)||(null==H?void 0:H.iconUrl)||D||"",J=null==z?void 0:z.aggregators,{tokensWithBalances:X}=(0,h.useTokenTracker)({tokens:[{address:I,symbol:M,decimals:A}],address:undefined}),Y=null==X?void 0:X[0],Z=(0,g.useTokenFiatAmount)(I,null==Y?void 0:Y.string,M,{},!1),ee=(0,a.getTokenTrackerLink)(e.address,t,"",L,{blockExplorerUrl:F??""}),te=q?ee:(0,b.getMultichainAccountUrl)((0,o.parseCaipAssetType)(I).assetReference,W);return r.default.createElement(w.default,{asset:{chainId:t,type:u.AssetType.token,address:I,symbol:M,name:Q,decimals:e.decimals,image:K,aggregators:J,balance:{value:null==Y?void 0:Y.balance,display:`${(0,f.roundToDecimalPlacesRemovingExtraZeroes)(null==Y?void 0:Y.string,5)}`,fiat:Z},isERC721:P},optionsButton:r.default.createElement(E.default,{isNativeAsset:!1,onRemove:()=>V((0,v.showModal)({name:"HIDE_TOKEN_CONFIRMATION",token:e,history:U})),onClickBlockExplorer:()=>{G({event:"Clicked Block Explorer Link",category:c.MetaMetricsEventCategory.Navigation,properties:{link_type:"Token Tracker",action:"Token Options",block_explorer_domain:(0,f.getURLHostName)(ee)}}),global.platform.openTab({url:te})},tokenSymbol:e.symbol})})}}}},{package:"$root$",file:"ui/pages/asset/components/token-asset.tsx"}],[7110,{"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/transaction":5637,"../../../../shared/lib/asset-utils":5647,"../../../../shared/modules/selectors/networks":5753,"../../../components/app/wallet-overview/hooks/useHandleSendNonEvm":6252,"../../../components/component-library":6325,"../../../components/ui/icon-button/icon-button":6759,"../../../contexts/i18n":6850,"../../../contexts/metametrics":6855,"../../../ducks/ramps":6885,"../../../ducks/send":6891,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/error-keys":6900,"../../../hooks/bridge/useBridging":6969,"../../../hooks/ramps/useRamps/useRamps":7004,"../../../selectors":7886,"../../../store/actions":7916,"../../confirmations/hooks/useRedesignedSendFlow":7557,"../../confirmations/utils/send":7588,"@metamask/keyring-api":2100,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("react-router-dom-v5-compat"),s=e("@metamask/keyring-api"),i=e("../../../contexts/i18n"),l=e("../../../ducks/send"),c=_(e("../../../hooks/ramps/useRamps/useRamps")),u=e("../../../selectors"),d=_(e("../../../hooks/bridge/useBridging")),m=e("../../../helpers/constants/error-keys"),p=e("../../../store/actions"),f=e("../../../contexts/metametrics"),g=e("../../../../shared/constants/metametrics"),h=e("../../../../shared/constants/transaction"),y=e("../../../helpers/constants/design-system"),v=_(e("../../../components/ui/icon-button/icon-button")),b=e("../../../components/component-library"),k=e("../../../ducks/ramps"),x=e("../../../components/app/wallet-overview/hooks/useHandleSendNonEvm"),T=e("../../../../shared/modules/selectors/networks"),C=e("../../confirmations/utils/send"),E=e("../../../../shared/lib/asset-utils"),w=e("../../confirmations/hooks/useRedesignedSendFlow");function _(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}n.default=({token:e,account:t})=>{const n=(0,o.useDispatch)(),_=(0,a.useContext)(i.I18nContext),S=(0,a.useContext)(f.MetaMetricsContext),I=(0,r.useNavigate)(),M=(0,o.useSelector)(u.getUseExternalServices),A=(0,E.isEvmChainId)(e.chainId),P=(0,o.useSelector)(u.getIsMultichainAccountsState2Enabled),{enabled:D}=(0,w.useRedesignedSendFlow)(),{chainId:O}=(0,o.useSelector)(u.getSelectedMultichainNetworkConfiguration),B=(0,o.useSelector)(T.getCurrentChainId),N=P?e.chainId:A?B:O,F=(0,o.useSelector)(u.getNetworkConfigurationIdByChainId),R=(0,o.useSelector)(k.getIsNativeTokenBuyable),{openBuyCryptoInPdapp:j}=(0,c.default)(),{openBridgeExperience:L}=(0,d.default)(),$=(0,x.useHandleSendNonEvm)(e.address);(0,a.useEffect)(()=>{e.isERC721&&n((0,p.showModal)({name:"CONVERT_TOKEN_TO_NFT",tokenAddress:e.address}))},[e.isERC721,e.address,n]);const W=(0,a.useCallback)(async()=>{if(B!==e.chainId&&O!==e.chainId&&!P)try{const t=F[e.chainId];await n((0,p.setActiveNetworkWithError)(t))}catch(t){throw console.error(`Failed to switch chains.\n        Target chainId: ${e.chainId}, Current chainId: ${B}.\n        ${t}`),t}},[P,B,O,F,e.chainId,n]),q=(0,a.useCallback)(()=>{j(),S({event:g.MetaMetricsEventName.NavBuyButtonClicked,category:g.MetaMetricsEventCategory.Navigation,properties:{location:"Token Overview",text:"Buy",chain_id:N,token_symbol:e.symbol}})},[N,e.symbol,S,j]),U=(0,a.useCallback)(async()=>{if(S({event:g.MetaMetricsEventName.SendStarted,category:g.MetaMetricsEventCategory.Navigation,properties:{token_symbol:e.symbol,location:g.MetaMetricsSwapsEventSource.TokenView,text:"Send",chain_id:e.chainId}},{excludeMetaMetricsId:!1}),(0,s.isEvmAccountType)(t.type)||D)try{await W(),await n((0,l.startNewDraftTransaction)({type:h.AssetType.token,details:e})),(0,C.navigateToSendRoute)(I,D,{address:e.address,chainId:e.chainId})}catch(e){if(!e.message.includes(m.INVALID_ASSET_TYPE))throw e}else await $()},[S,n,I,e,W,t,$,D]),V=(0,a.useCallback)(async()=>{await W(),L(g.MetaMetricsSwapsEventSource.TokenView,e)},[e,W,L]);return a.default.createElement(b.Box,{display:y.Display.Flex,gap:3,justifyContent:y.JustifyContent.spaceEvenly},a.default.createElement(v.default,{className:"token-overview__button",Icon:a.default.createElement(b.Icon,{name:b.IconName.Dollar,color:y.IconColor.iconAlternative,size:b.IconSize.Md}),label:_("buy"),"data-testid":"token-overview-buy",onClick:q,disabled:e.isERC721||!R}),a.default.createElement(v.default,{className:"token-overview__button",onClick:U,Icon:a.default.createElement(b.Icon,{name:b.IconName.Send,color:y.IconColor.iconAlternative,size:b.IconSize.Md}),label:_("send"),"data-testid":"eth-overview-send",disabled:e.isERC721}),a.default.createElement(v.default,{className:"token-overview__button",Icon:a.default.createElement(b.Icon,{name:b.IconName.SwapVertical,color:y.IconColor.iconAlternative,size:b.IconSize.Md}),onClick:V,"data-testid":"token-overview-swap",label:_("swap"),disabled:!M}))}}}},{package:"$root$",file:"ui/pages/asset/components/token-buttons.tsx"}],[7111,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"../hooks/useTronResources":7115,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TronDailyResources=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),i=e("../../../hooks/useI18nContext"),l=e("../hooks/useTronResources");const c=({resource:e,iconName:t})=>{const n=Math.min(e.percentage,100),a=26,i=24.5,l=49*Math.PI,c=l-n/100*l;return o.default.createElement(r.Box,{style:{position:"relative",width:"52px",height:"52px"}},o.default.createElement("svg",{height:52,width:52,style:{transform:"rotate(-90deg)"}},o.default.createElement("circle",{stroke:"var(--color-border-muted)",fill:"transparent",strokeWidth:3,r:i,cx:a,cy:a}),o.default.createElement("circle",{stroke:"var(--color-primary-default)",fill:"transparent",strokeWidth:3,strokeDasharray:`${l} ${l}`,style:{strokeDashoffset:c,transition:"stroke-dashoffset 0.5s ease",strokeLinecap:"round"},r:i,cx:a,cy:a})),o.default.createElement(r.Box,{display:s.Display.Flex,alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.center,backgroundColor:s.BackgroundColor.backgroundAlternative,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"40px",height:"40px",borderRadius:"50%"}},o.default.createElement(r.Icon,{name:t,color:s.IconColor.iconDefault,size:r.IconSize.Sm})))},u=({resource:e,iconName:t,label:n,description:a,currentValue:i})=>o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Row,alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.spaceBetween,marginTop:3},o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Row,alignItems:s.AlignItems.center,gap:4},o.default.createElement(c,{resource:e,iconName:t}),o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,gap:1},o.default.createElement(r.Text,{variant:s.TextVariant.bodyLgMedium,color:s.TextColor.textDefault},n),o.default.createElement(r.Text,{variant:s.TextVariant.bodySm,color:s.TextColor.textAlternative},a))),o.default.createElement(r.Text,{variant:s.TextVariant.bodyLgMedium,color:s.TextColor.textDefault},i));n.TronDailyResources=({account:e,chainId:t})=>{const n=(0,i.useI18nContext)(),{energy:a,bandwidth:c}=(0,l.useTronResources)(e,t),d=Math.floor(a.current/65e3),m=Math.floor(c.current/280),p=e=>e.toLocaleString();return o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,paddingLeft:4,paddingRight:4,paddingTop:1,paddingBottom:3},o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,gap:2,marginBottom:3},o.default.createElement(r.Text,{variant:s.TextVariant.headingSm,color:s.TextColor.textDefault},n("tronDailyResources")),o.default.createElement(r.Text,{variant:s.TextVariant.bodySm,color:s.TextColor.textAlternative},n("tronDailyResourcesDescription"))),o.default.createElement(u,{resource:a,iconName:r.IconName.Flash,label:n("tronEnergy"),description:n("tronEnergyCoverageDescription",[d.toString()]),currentValue:p(a.current)}),o.default.createElement(u,{resource:c,iconName:r.IconName.Connect,label:n("tronBandwidth"),description:n("tronBandwidthCoverageDescription",[m.toString()]),currentValue:p(c.current)}))}}}},{package:"$root$",file:"ui/pages/asset/components/tron-daily-resources.tsx"}],[7112,{"../../../selectors/assets":7878,"@metamask/utils":2914,lodash:4635,luxon:4646,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useChartTimeRanges=void 0;var a=e("@metamask/utils"),o=e("lodash"),r=e("luxon"),s=e("react-redux"),i=e("../../../selectors/assets");n.useChartTimeRanges=(e,t)=>{var n;const l=["P1D","P1W","P1M","P3M","P1Y","P1000Y"],c=(0,s.useSelector)(i.getHistoricalPrices);try{if((0,a.assert)(e,"caipAssetType is required on non-EVM chains"),(0,a.assert)(t,"currency is required on non-EVM chains"),(0,a.parseCaipAssetType)(e).chain.namespace===a.KnownCaipNamespace.Eip155)return l}catch(e){return console.warn("useChartTimeRanges - failed, returning default time ranges",e),l}const u=null===(n=c[e])||void 0===n||null===(n=n[t])||void 0===n?void 0:n.intervals;return u?(0,o.chain)(u).keys().map(e=>r.Duration.fromISO(e)).filter(e=>e.isValid).sortBy(e=>e.toMillis()).map(e=>e.toISO()).filter(e=>null!==e).uniq().value():l}}}},{package:"$root$",file:"ui/pages/asset/hooks/useChartTimeRanges.ts"}],[7113,{"../../../../shared/lib/asset-utils":5647,"../../../../shared/modules/hexstring-utils":5741,"../../../selectors":7886,"../../../selectors/assets":7878,"@metamask/bridge-controller":1304,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCurrentPrice=void 0;var a=e("@metamask/bridge-controller"),o=e("react-redux"),r=e("../../../../shared/modules/hexstring-utils"),s=e("../../../selectors"),i=e("../../../selectors/assets"),l=e("../../../../shared/lib/asset-utils");n.useCurrentPrice=e=>{var t;const n=(0,l.isEvmChainId)(e.chainId),c=(0,o.useSelector)(s.getMarketData),u=(0,o.useSelector)(s.getCurrencyRates),d=(0,o.useSelector)(i.getAssetsRates),{chainId:m,type:p}=e;if(n){var f,g,h,y;if(p===a.AssetType.native)return{currentPrice:null===(y=u[e.symbol])||void 0===y?void 0:y.conversionRate};const t=(0,r.toChecksumHexAddress)(e.address),n=null===(f=c[m])||void 0===f||null===(f=f[t])||void 0===f?void 0:f.price,o=null===(h=u[null===(g=c[m])||void 0===g||null===(g=g[t])||void 0===g?void 0:g.currency])||void 0===h?void 0:h.conversionRate;return{currentPrice:o!==undefined&&n!==undefined?o*n:undefined}}const v=p===a.AssetType.token?e.address:(0,a.getNativeAssetForChainId)(m).assetId,b=null==d||null===(t=d[v])||void 0===t?void 0:t.rate;return{currentPrice:b?parseFloat(b):undefined}}}}},{package:"$root$",file:"ui/pages/asset/hooks/useCurrentPrice.ts"}],[7114,{"../../../../shared/constants/time":5635,"../../../../shared/lib/asset-utils":5647,"../../../../shared/lib/fetch-with-cache":5692,"../../../../shared/lib/trace":5718,"../../../selectors":7886,"../../../selectors/assets":7878,"../../../selectors/multichain-accounts/account-tree":7890,"../../../store/actions":7916,"../util":7117,"@metamask/multichain-network-controller":2207,"@metamask/utils":2914,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useHistoricalPrices=n.DEFAULT_USE_HISTORICAL_PRICES_METADATA=void 0;var a,o=e("react"),r=e("@metamask/multichain-network-controller"),s=e("@metamask/utils"),i=e("react-redux"),l=e("../../../../shared/constants/time"),c=(a=e("../../../../shared/lib/fetch-with-cache"))&&a.__esModule?a:{default:a},u=e("../../../selectors"),d=e("../../../selectors/assets"),m=e("../util"),p=e("../../../store/actions"),f=e("../../../../shared/lib/trace"),g=e("../../../../shared/lib/asset-utils"),h=e("../../../selectors/multichain-accounts/account-tree");const y=n.DEFAULT_USE_HISTORICAL_PRICES_METADATA={minPricePoint:{x:-Infinity,y:-Infinity},maxPricePoint:{x:Infinity,y:Infinity},xMin:Infinity,xMax:-Infinity,yMin:Infinity,yMax:-Infinity},v=e=>{const t=Math.min(...e.map(e=>e.x)),n=Math.max(...e.map(e=>e.x)),a=Math.min(...e.map(e=>e.y)),o=Math.max(...e.map(e=>e.y));return{minPricePoint:e.find(e=>e.y===a)??y.minPricePoint,maxPricePoint:e.find(e=>e.y===o)??y.maxPricePoint,xMin:t,xMax:n,yMin:a,yMax:o}};n.useHistoricalPrices=({chainId:e,address:t,currency:n,timeRange:a})=>{const b=(0,g.isEvmChainId)(e),k=(({chainId:e,address:t,currency:n,timeRange:a})=>{const r=(0,g.isEvmChainId)(e),s=(0,i.useSelector)(u.getShouldShowFiat),[d,p]=(0,o.useState)(!1),[h,b]=(0,o.useState)([]),[k,x]=(0,o.useState)(y);return(0,o.useEffect)(()=>{if(!r)return;if(!s||!(0,m.chainSupportsPricing)(e))return;const o=performance.now(),i=(0,f.trace)({name:f.TraceName.GetAssetHistoricalPrices,startTime:o});(0,f.trace)({name:f.TraceName.GetAssetHistoricalPrices,startTime:o,parentContext:i}),p(!0);const u=(0,m.fromIso8601DurationToPriceApiTimePeriod)(a);(0,c.default)({url:`https://price.api.cx.metamask.io/v1/chains/${e}/historical-prices/${t}?vsCurrency=${n}&timePeriod=${u}`,cacheOptions:{cacheRefreshTime:5*l.MINUTE},functionName:"GetAssetHistoricalPrices",fetchOptions:{headers:{"X-Client-Id":"extension"}}}).catch(()=>({})).then(e=>{var t;const n=(null==e||null===(t=e.prices)||void 0===t?void 0:t.map(e=>({x:null==e?void 0:e[0],y:null==e?void 0:e[1]})))??[];b(n)}).finally(()=>{(0,f.endTrace)({name:f.TraceName.GetAssetHistoricalPrices,timestamp:performance.timeOrigin+o}),p(!1)})},[r,e,t,n,a,s]),(0,o.useEffect)(()=>{if(!r)return;const e=v(h);x(e)},[r,h]),{loading:d,data:{prices:h,metadata:k}}})({chainId:e,address:t,currency:n,timeRange:a}),x=(({chainId:e,address:t,currency:n,timeRange:a})=>{const l=(0,g.isEvmChainId)(e),[c,u]=(0,o.useState)(!1),[m,f]=(0,o.useState)([]),[b,k]=(0,o.useState)(y),x=(0,i.useSelector)(d.getHistoricalPrices),T=(0,i.useDispatch)(),C=(0,i.useSelector)(t=>(0,h.getInternalAccountBySelectedAccountGroupAndCaip)(t,(0,s.isCaipChainId)(e)?e:(0,r.toEvmCaipChainId)(e)));return(0,o.useEffect)(()=>{if(l)return()=>{};const n=async()=>{u(!0);try{await T((0,p.fetchHistoricalPricesForAsset)(t,C))}catch(n){console.error("Error fetching historical prices for %s on %s",t,e,n)}finally{u(!1)}};n();const a=setInterval(n,6e4);return()=>clearInterval(a)},[l,e,t,C,T]),(0,o.useEffect)(()=>{var e;if(l)return;const o=((null==x||null===(e=x[t])||void 0===e||null===(e=e[n])||void 0===e?void 0:e.intervals[a])??[]).map(([e,t])=>({x:e,y:Number(t)}));f(o)},[l,x,t,n,a]),(0,o.useEffect)(()=>{if(l)return;const e=v(m);k(e)},[l,m]),{loading:c,data:{prices:m,metadata:b}}})({chainId:e,address:t,currency:n,timeRange:a});return b?k:x}}}},{package:"$root$",file:"ui/pages/asset/hooks/useHistoricalPrices.ts"}],[7115,{"../../../../shared/constants/multichain/assets":5615,"../../../../shared/lib/asset-utils":5647,"../../../selectors/assets":7878,"../../../selectors/multichain":7895,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTronResources=void 0;var a=e("react"),o=e("react-redux"),r=e("../../../../shared/lib/asset-utils"),s=e("../../../selectors/assets"),i=e("../../../selectors/multichain"),l=e("../../../../shared/constants/multichain/assets");n.useTronResources=(e,t)=>{const n=(0,o.useSelector)(s.getAssetsBySelectedAccountGroupWithTronResources),c=(0,o.useSelector)(i.getMultichainBalances);return(0,a.useMemo)(()=>{if(!e||!t)return{energy:{type:"energy",current:0,max:1,percentage:0},bandwidth:{type:"bandwidth",current:0,max:1,percentage:0}};const a=n[t]||[],o=null==c?void 0:c[e.id],s=a.filter(e=>(0,r.isTronResource)(e)),i={energy:{current:0,max:0},bandwidth:{current:0,max:0}};Object.keys(i).forEach(e=>{var t,n;const a=s.find(t=>{var n;return(null===(n=t.symbol)||void 0===n?void 0:n.toLowerCase())===e}),r=s.find(t=>{var n;return(null===(n=t.symbol)||void 0===n?void 0:n.toLowerCase())===`max-${e}`});i[e]={current:a?parseFloat((null==o||null===(t=o[a.assetId])||void 0===t?void 0:t.amount)||"0"):0,max:r?parseFloat((null==o||null===(n=o[r.assetId])||void 0===n?void 0:n.amount)||"0"):0}});const u=(e,t)=>{const n=Math.max(1,t.max);return{type:e,current:t.current,max:n,percentage:t.current/n*100}};return{energy:u(l.TRON_RESOURCE.ENERGY,i.energy),bandwidth:u(l.TRON_RESOURCE.BANDWIDTH,i.bandwidth)}},[e,t,n,c])}}}},{package:"$root$",file:"ui/pages/asset/hooks/useTronResources.ts"}],[7116,{"./asset":7098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./asset"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/asset/index.js"}],[7117,{"@metamask/assets-controllers":1233,"@metamask/utils":2914,luxon:4646},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.loadingOpacity=n.getShortDateFormatterV2=n.getShortDateFormatter=n.getPricePrecision=n.fromIso8601DurationToPriceApiTimePeriod=n.findAssetByAddress=n.chainSupportsPricing=void 0;var a=e("@metamask/assets-controllers"),o=e("@metamask/utils"),r=e("luxon");n.getShortDateFormatter=()=>Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"});n.getShortDateFormatterV2=()=>Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"short",day:"numeric"});n.getPricePrecision=e=>{if(0===e)return 1;let t=2;for(let n=Math.abs(e);n<1;t++)n*=10;return t};n.chainSupportsPricing=e=>a.SUPPORTED_CHAIN_IDS.includes(e);n.loadingOpacity=.2;n.findAssetByAddress=(e,t,n)=>{if(!n)return console.error("Chain ID is required."),null;const a=e[n];return a?t?a.find(e=>e.address&&e.address.toLowerCase()===t.toLowerCase()):a.find(e=>!e.address):(console.warn(`No tokens found for chainId: ${n}`),null)};n.fromIso8601DurationToPriceApiTimePeriod=e=>{(0,o.assert)(r.Duration.fromISO(e,{locale:"en"}).isValid,`Invalid ISO 8601 duration: ${e}`);const t={P1D:"1D",P7D:"7D",P1W:"7D",P1M:"1M",P3M:"3M",P1Y:"1Y",P1000Y:"1000Y"}[e];if(!t)throw new Error(`No Price API timePeriod matching the ISO 8601 duration: ${e}`);return t}}}},{package:"$root$",file:"ui/pages/asset/util.ts"}],[7118,{"../../../components/component-library":6325,"../../../contexts/i18n":6850,"../../../helpers/constants/routes":6904,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),r=e("../../../helpers/constants/routes"),s=e("../../../components/component-library"),i=e("../../../contexts/i18n");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,a.useContext)(i.I18nContext),t=(0,o.useNavigate)();return a.default.createElement(s.Button,{onClick:()=>{t(`${r.CROSS_CHAIN_SWAP_ROUTE}${r.PREPARE_SWAP_ROUTE}`)}},e("cancel"))}}}},{package:"$root$",file:"ui/pages/bridge/awaiting-signatures/awaiting-signatures-cancel-button.tsx"}],[7119,{"../../../../shared/constants/metametrics":5613,"../../../components/component-library":6325,"../../../components/ui/pulse-loader":6806,"../../../contexts/metametrics":6855,"../../../ducks/bridge/selectors":6873,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"../../../selectors/selectors":7903,"@metamask/bridge-controller":1304,"lodash/isEqual":4622,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e,t;const n=(0,f.useI18nContext)(),{activeQuote:g}=(0,o.useSelector)(p.getBridgeQuotes,o.shallowEqual),h=null==g||null===(e=g.sentAmount)||void 0===e?void 0:e.amount,y=(0,o.useSelector)(p.getFromToken,r.default),v=(0,o.useSelector)(p.getToToken,r.default),b=(0,o.useSelector)(p.getFromChain,r.default),k=(0,o.useSelector)(p.getToChain,r.default),x=(0,o.useSelector)(i.isHardwareWallet),T=(0,o.useSelector)(i.getHardwareWalletType),C=Boolean(null==g?void 0:g.approval),E=(0,a.useContext)(u.MetaMetricsContext);(0,a.useEffect)(()=>{var e,t;E({event:"Awaiting Signature(s) on a HW wallet",category:d.MetaMetricsEventCategory.Swaps,properties:{needs_two_confirmations:C,token_from:(null==y?void 0:y.symbol)??"",token_to:(null==v?void 0:v.symbol)??"",is_hardware_wallet:x,hardware_wallet_type:T??""},sensitiveProperties:{token_from_amount:(null==g||null===(e=g.quote)||void 0===e?void 0:e.srcTokenAmount)??"",token_to_amount:(null==g||null===(t=g.quote)||void 0===t?void 0:t.destTokenAmount)??""}})},[]);const w=b&&!(0,s.isCrossChain)(b.chainId,null==k?void 0:k.chainId);return a.default.createElement("div",{className:"awaiting-bridge-signatures"},a.default.createElement(m.Box,{paddingLeft:6,paddingRight:6,height:c.BlockSize.Full,justifyContent:c.JustifyContent.center,display:c.Display.Flex,flexDirection:c.FlexDirection.Column},a.default.createElement(m.Box,{marginTop:3,marginBottom:4},a.default.createElement(l.default,null)),!C&&a.default.createElement(m.Text,{color:c.TextColor.textDefault,variant:c.TextVariant.headingMd,as:"h3"},n("swapConfirmWithHwWallet")),C&&g&&a.default.createElement(a.default.Fragment,null,a.default.createElement(m.Text,{variant:c.TextVariant.bodyMdBold,marginTop:2},n("bridgeConfirmTwoTransactions")),a.default.createElement("ul",{className:"awaiting-bridge-signatures__steps"},a.default.createElement("li",null,a.default.createElement(m.AvatarBase,{size:m.AvatarBaseSize.Sm,backgroundColor:c.BackgroundColor.primaryMuted,color:c.TextColor.primaryDefault,marginRight:2},"1"),n(w?"unifiedSwapAllowSwappingOf":"bridgeAllowSwappingOf",[null===(t=g.sentAmount)||void 0===t?void 0:t.amount,null==y?void 0:y.symbol,null==b?void 0:b.name])),a.default.createElement("li",null,a.default.createElement(m.AvatarBase,{size:m.AvatarBaseSize.Sm,backgroundColor:c.BackgroundColor.primaryMuted,color:c.TextColor.primaryDefault,marginRight:2},"2"),n(w?"unifiedSwapFromTo":"bridgeFromTo",[h,null==y?void 0:y.symbol,w?null==v?void 0:v.symbol:null==k?void 0:k.name]))),a.default.createElement(m.Text,{variant:c.TextVariant.bodyXs},n("bridgeGasFeesSplit")))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=g(e("lodash/isEqual")),s=e("@metamask/bridge-controller"),i=e("../../../selectors/selectors"),l=g(e("../../../components/ui/pulse-loader")),c=e("../../../helpers/constants/design-system"),u=e("../../../contexts/metametrics"),d=e("../../../../shared/constants/metametrics"),m=e("../../../components/component-library"),p=e("../../../ducks/bridge/selectors"),f=e("../../../hooks/useI18nContext");function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/bridge/awaiting-signatures/awaiting-signatures.tsx"}],[7120,{"../../../../shared/constants/transaction":5637,"../../../ducks/bridge-status/selectors":6870,"../../../hooks/useTokenFiatAmount":7082,"@metamask/transaction-controller":2868,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBridgeTokenDisplayData=function(e){var t,n;const{primaryTransaction:l}=e,c=(0,a.useSelector)(e=>(0,i.selectBridgeHistoryItemForTxMetaId)(e,l.id)),u=(0,a.useSelector)(e=>(0,i.selectBridgeHistoryForApprovalTxId)(e,l.id)),d=c??u,m=(0,r.useTokenFiatAmount)((null==d?void 0:d.quote.srcAsset.address)??l.sourceTokenAddress,(null==d||null===(t=d.pricingData)||void 0===t?void 0:t.amountSent)??l.sourceTokenAmount,(null==d?void 0:d.quote.srcAsset.symbol)??l.sourceTokenSymbol,{},!0,l.chainId);return{category:l.type===o.TransactionType.bridge?s.TransactionGroupCategory.bridge:s.TransactionGroupCategory.swap,displayCurrencyAmount:m,sourceTokenSymbol:(null==d?void 0:d.quote.srcAsset.symbol)??l.sourceTokenSymbol,sourceTokenAmountSent:(null==d||null===(n=d.pricingData)||void 0===n?void 0:n.amountSent)??l.sourceTokenAmount,destinationTokenSymbol:(null==d?void 0:d.quote.destAsset.symbol)??l.destinationTokenSymbol}};var a=e("react-redux"),o=e("@metamask/transaction-controller"),r=e("../../../hooks/useTokenFiatAmount"),s=e("../../../../shared/constants/transaction"),i=e("../../../ducks/bridge-status/selectors")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useBridgeTokenDisplayData.ts"}],[7121,{"../../../ducks/bridge/selectors":6873,"../../../selectors/multichain-accounts/account-tree":7890,"@metamask/bridge-controller":1304,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDestinationAccount=void 0;var a=e("react-redux"),o=e("react"),r=e("@metamask/bridge-controller"),s=e("../../../ducks/bridge/selectors"),i=e("../../../selectors/multichain-accounts/account-tree");n.useDestinationAccount=()=>{const[e,t]=(0,o.useState)(null),[n,l]=(0,o.useState)(!1),c=(0,a.useSelector)(s.getToChain),u=(0,a.useSelector)(e=>null!=c&&c.chainId?(0,i.getInternalAccountBySelectedAccountGroupAndCaip)(e,(0,r.formatChainIdToCaip)(c.chainId)):null),d=(0,a.useSelector)(e=>(0,s.getAccountGroupNameByInternalAccount)(e,u)),m=(0,a.useSelector)(e=>{var t;return null!=u&&u.address?null===(t=(0,i.getWalletIdAndNameByAccountAddress)(e,null==u?void 0:u.address))||void 0===t?void 0:t.name:null});return(0,o.useEffect)(()=>{u?(t({...u,walletName:m??"",isExternal:!1,displayName:d??""}),l(!1)):(t(null),l(!0))},[u,d,m]),{selectedDestinationAccount:e,setSelectedDestinationAccount:t,isDestinationAccountPickerOpen:n,setIsDestinationAccountPickerOpen:l}}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useDestinationAccount.ts"}],[7122,{"../../../../app/scripts/lib/multichain/address":282,"../../../../shared/lib/multichain/accounts":5704,"../../../ducks/domains":6877,"../../../helpers/utils/util":6959,"../../../selectors/selectors":7903,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useExternalAccountResolution=void 0;var a=e("react"),o=e("react-redux"),r=e("../../../../app/scripts/lib/multichain/address"),s=e("../../../ducks/domains"),i=e("../../../../shared/lib/multichain/accounts"),l=e("../../../selectors/selectors"),c=e("../../../helpers/utils/util");n.useExternalAccountResolution=({searchQuery:e,isDestinationSolana:t,isDestinationBitcoin:n=!1,isDestinationTron:u=!1})=>{var d;const m=(0,o.useDispatch)(),p=(0,o.useSelector)(s.getDomainResolutions),f=e.trim(),g=(0,a.useMemo)(()=>f?n?(0,i.isBtcMainnetAddress)(f)||(0,i.isBtcTestnetAddress)(f)?f:null:t?(0,i.isSolanaAddress)(f)?f:null:u?(0,i.isTronAddress)(f)?f:null:(0,r.isEthAddress)(f)?f:null:null,[f,t,n,u]),h=t||n||u||!f.endsWith(".eth")?null:f;(0,a.useEffect)(()=>{h&&(m((0,s.initializeDomainSlice)()),m((0,s.lookupDomainName)(h)))},[h]);const y=g??(null==p||null===(d=p[0])||void 0===d?void 0:d.resolvedAddress),v=(0,o.useSelector)(e=>(0,l.getInternalAccountByAddress)(e,y));return(0,a.useMemo)(()=>!y||v?null:{address:y,isExternal:!0,type:"any:account",displayName:h??(0,c.shortenString)(y,{truncatedCharLimit:15,truncatedStartChars:7,truncatedEndChars:5,skipCharacterInEnd:!1})},[h,y,v])}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useExternalAccountResolution.ts"}],[7123,{"../../../../shared/modules/selectors":5751,"../../../store/actions":7916,"../../../store/controller-actions/transaction-controller":7920,"../../confirmations/selectors/preferences":7573,"@metamask/bridge-controller":1304,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasIncluded7702=function({isSwap:e,selectedAccount:t,fromChain:n,isSendBundleSupportedForChain:u}){const[d,m]=(0,o.useState)(!1),p=(0,r.useSelector)(e=>(0,s.getIsSmartTransaction)(e,null==n?void 0:n.chainId)),f=(0,r.useSelector)(c.getUseSmartAccount);return(0,o.useEffect)(()=>{let o=!1;return(async()=>{if(!(u&&p||!f)&&e&&null!=t&&t.address&&null!=n&&n.chainId)if((0,a.isNonEvmChainId)(n.chainId))m(!1);else try{const e=(0,a.formatChainIdToHex)(n.chainId),r=await(0,l.isAtomicBatchSupported)({address:t.address,chainIds:[e]});if(o)return;const s=null==r?void 0:r.find(e=>e.chainId.toLowerCase()===n.chainId.toLowerCase()),c=await(0,i.isRelaySupported)(e),u=Boolean((null==s?void 0:s.isSupported)&&c);o||m(u)}catch(e){o||(console.error("Error checking gasless 7702 support:",e),m(!1))}else o||m(!1)})(),()=>{o=!0}},[f,null==n?void 0:n.chainId,u,p,e,null==t?void 0:t.address]),d};var a=e("@metamask/bridge-controller"),o=e("react"),r=e("react-redux"),s=e("../../../../shared/modules/selectors"),i=e("../../../store/actions"),l=e("../../../store/controller-actions/transaction-controller"),c=e("../../confirmations/selectors/preferences")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useGasIncluded7702.ts"}],[7124,{"../../../ducks/bridge/utils":6874,"../../../store/actions":7916,"@metamask/bridge-controller":1304,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsSendBundleSupported=function(e){const[t,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let t=!1;return(async()=>{if(null!=e&&e.chainId)if((0,s.isNonEvmChain)(e.chainId))n(!1);else try{const a=await(0,r.isSendBundleSupported)((0,o.formatChainIdToHex)(e.chainId));t||n(a)}catch(e){t||(console.error("Error checking send bundle support:",e),n(!1))}else t||n(!1)})(),()=>{t=!0}},[null==e?void 0:e.chainId]),t};var a=e("react"),o=e("@metamask/bridge-controller"),r=e("../../../store/actions"),s=e("../../../ducks/bridge/utils")}}},{package:"$root$",file:"ui/pages/bridge/hooks/useIsSendBundleSupported.ts"}],[7125,{"../../../../shared/lib/sentry":5711,"../../../../shared/modules/selectors":5751,"../../../ducks/bridge-status/actions":6869,"../../../ducks/bridge/actions":6871,"../../../ducks/bridge/selectors":6873,"../../../helpers/constants/routes":6904,"../../../hooks/useSafeNavigation":7069,"../../../store/actions":7916,"@metamask/bridge-controller":1304,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const{navigate:e}=(0,m.useSafeNavigation)(),t=(0,a.useDispatch)(),n=(0,a.useSelector)(c.isHardwareWallet),f=(0,a.useSelector)(u.getIsStxEnabled),g=(0,a.useSelector)(u.getFromAccount);return{submitBridgeTransaction:async a=>{if(!g)throw new Error("Failed to submit bridge transaction: No selected account");n&&e(`${r.CROSS_CHAIN_SWAP_ROUTE}${r.AWAITING_SIGNATURES_ROUTE}`);try{if((0,o.isNonEvmChainId)(a.quote.srcChainId))return await t((0,i.submitBridgeTx)(g.address,a,!1)),await t((0,s.setDefaultHomeActiveTabName)("activity")),void e(r.DEFAULT_ROUTE,{state:{stayOnHomePage:!0}});await t((0,i.submitBridgeTx)(g.address,a,f))}catch(a){return(0,d.captureException)(a),void(n&&p(a)?(t((0,l.setWasTxDeclined)(!0)),e(`${r.CROSS_CHAIN_SWAP_ROUTE}${r.PREPARE_SWAP_ROUTE}`)):(await t((0,s.setDefaultHomeActiveTabName)("activity")),e(r.DEFAULT_ROUTE)))}await t((0,s.setDefaultHomeActiveTabName)("activity")),e(r.DEFAULT_ROUTE,{state:{stayOnHomePage:!0}})}}},n.isApprovalTxError=n.isAllowanceResetError=void 0;var a=e("react-redux"),o=e("@metamask/bridge-controller"),r=e("../../../helpers/constants/routes"),s=e("../../../store/actions"),i=e("../../../ducks/bridge-status/actions"),l=e("../../../ducks/bridge/actions"),c=e("../../../../shared/modules/selectors"),u=e("../../../ducks/bridge/selectors"),d=e("../../../../shared/lib/sentry"),m=e("../../../hooks/useSafeNavigation");n.isAllowanceResetError=e=>(e.message??"").includes("Eth USDT allowance reset failed");n.isApprovalTxError=e=>(e.message??"").includes("Approve transaction failed");const p=e=>{var t;const n=(null===(t=e.message)||void 0===t?void 0:t.toLowerCase())??"";return n.includes("ledger")&&(n.includes("rejected")||n.includes("denied")||n.includes("error while signing"))||n.includes("trezor")&&(n.includes("cancelled")||n.includes("rejected"))||n.includes("lattice")&&n.includes("rejected")||n.includes("user rejected")||n.includes("user cancelled")}}}},{package:"$root$",file:"ui/pages/bridge/hooks/useSubmitBridgeTransaction.ts"}],[7126,{"../../../shared/modules/selectors/networks":5753,"../../components/component-library":6325,"../../components/multichain/pages/page":6674,"../../contexts/i18n":6850,"../../ducks/bridge/actions":6871,"../../ducks/bridge/selectors":6873,"../../ducks/swaps/swaps":6895,"../../helpers/constants/design-system":6899,"../../helpers/constants/routes":6904,"../../hooks/bridge/useBridgeExchangeRates":6966,"../../hooks/bridge/useBridging":6969,"../../hooks/bridge/useQuoteFetchEvents":6972,"../../hooks/bridge/useTxAlerts":6977,"../../hooks/useGasFeeEstimates":7044,"../../hooks/useSafeNavigation":7069,"../../store/actions":7916,"../swaps/hooks/useSwapsFeatureFlags":7845,"./awaiting-signatures/awaiting-signatures":7119,"./awaiting-signatures/awaiting-signatures-cancel-button":7118,"./prepare/bridge-transaction-settings-modal":7135,"./prepare/prepare-bridge-page":7140,"@metamask/bridge-controller":1304,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("react-router-dom-v5-compat"),s=e("@metamask/bridge-controller"),i=e("../../contexts/i18n"),l=e("../../ducks/swaps/swaps"),c=e("../../helpers/constants/routes"),u=e("../../store/actions"),d=e("../../components/component-library"),m=e("../../../shared/modules/selectors/networks"),p=I(e("../../hooks/bridge/useBridging")),f=e("../../components/multichain/pages/page"),g=e("../swaps/hooks/useSwapsFeatureFlags"),h=e("../../ducks/bridge/actions"),y=e("../../hooks/useGasFeeEstimates"),v=e("../../hooks/bridge/useBridgeExchangeRates"),b=e("../../hooks/bridge/useQuoteFetchEvents"),k=e("../../helpers/constants/design-system"),x=e("../../hooks/bridge/useTxAlerts"),T=e("../../ducks/bridge/selectors"),C=e("../../hooks/useSafeNavigation"),E=I(e("./prepare/prepare-bridge-page")),w=I(e("./awaiting-signatures/awaiting-signatures-cancel-button")),_=I(e("./awaiting-signatures/awaiting-signatures")),S=e("./prepare/bridge-transaction-settings-modal");function I(e){return e&&e.__esModule?e:{default:e}}function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}n.default=({location:e})=>{const t=(0,a.useContext)(i.I18nContext);(0,g.useSwapsFeatureFlags)(),(0,p.default)();const{navigate:n}=(0,C.useSafeNavigation)(),I=(0,o.useDispatch)(),{search:M}=e??{},A=new URLSearchParams(M||"").get("isFromTransactionShield"),P=(0,o.useSelector)(m.getSelectedNetworkClientId),D=async()=>{await I((0,h.resetBridgeState)())},{activeQuote:O}=(0,o.useSelector)(T.getBridgeQuotes),B=(0,o.useSelector)(T.getFromChain),N=(null==B?void 0:B.chainId)&&!(0,s.isNonEvmChainId)(B.chainId);(0,a.useEffect)(()=>(I((0,h.trackUnifiedSwapBridgeEvent)(s.UnifiedSwapBridgeEventName.PageViewed,{})),O&&I((0,h.restoreQuoteRequestFromState)(O.quote)),window.addEventListener("beforeunload",D),()=>{window.removeEventListener("beforeunload",D),D()}),[]),(0,y.useGasFeeEstimates)(P,N),(0,v.useBridgeExchangeRates)(),(0,b.useQuoteFetchEvents)(),(0,x.useTxAlerts)();const[F,R]=(0,a.useState)(!1);return a.default.createElement(f.Page,{className:"bridge__container"},a.default.createElement(f.Header,{textProps:{variant:k.TextVariant.headingSm},startAccessory:a.default.createElement(d.ButtonIcon,{iconName:d.IconName.ArrowLeft,size:d.ButtonIconSize.Sm,ariaLabel:t("back"),onClick:async()=>{await D(),A?n(c.TRANSACTION_SHIELD_ROUTE):n(c.DEFAULT_ROUTE,{state:{stayOnHomePage:!0}}),I((0,l.clearSwapsState)()),await I((0,u.resetBackgroundSwapsState)())}}),endAccessory:a.default.createElement(d.ButtonIcon,{iconName:d.IconName.Setting,size:d.ButtonIconSize.Sm,ariaLabel:t("settings"),onClick:()=>{R(!0)}})},t("swap")),a.default.createElement(f.Content,{padding:0},a.default.createElement(r.Routes,null,a.default.createElement(r.Route,{path:c.CROSS_CHAIN_SWAP_ROUTE+c.PREPARE_SWAP_ROUTE,element:a.default.createElement(a.default.Fragment,null,a.default.createElement(S.BridgeTransactionSettingsModal,{isOpen:F,onClose:()=>{R(!1)}}),a.default.createElement(E.default,{onOpenSettings:()=>R(!0)}))}),a.default.createElement(r.Route,{path:c.CROSS_CHAIN_SWAP_ROUTE+c.AWAITING_SIGNATURES_ROUTE,element:a.default.createElement(a.default.Fragment,null,a.default.createElement(f.Content,null,a.default.createElement(_.default,null)),a.default.createElement(f.Footer,null,a.default.createElement(w.default,null)))}))))}}}},{package:"$root$",file:"ui/pages/bridge/index.tsx"}],[7127,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(null,arguments)}n.default=e=>o.default.createElement(r.Container,i({display:s.Display.Flex,flexDirection:s.FlexDirection.Column,width:s.BlockSize.Full},e))}}},{package:"$root$",file:"ui/pages/bridge/layout/column.tsx"}],[7128,{"./column":7127,"./row":7129,"./tooltip":7130},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Column",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"Row",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"Tooltip",{enumerable:!0,get:function(){return r.default}});var a=s(e("./column")),o=s(e("./row")),r=s(e("./tooltip"));function s(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/layout/index.tsx"}],[7129,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(null,arguments)}n.default=e=>o.default.createElement(r.Container,i({display:s.Display.Flex,flexDirection:s.FlexDirection.Row,justifyContent:s.JustifyContent.spaceBetween,flexWrap:s.FlexWrap.NoWrap,alignItems:s.AlignItems.center},e))}}},{package:"$root$",file:"ui/pages/bridge/layout/row.tsx"}],[7130,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"./column":7127,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),i=(a=e("./column"))&&a.__esModule?a:{default:a};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(null,arguments)}const u=o.default.forwardRef(({children:e,title:t,triggerElement:n,disabled:a=!1,onClose:l,iconName:u,style:d,...m},p)=>{const[f,g]=(0,o.useState)(!1),[h,y]=(0,o.useState)(null),v=()=>g(!1);return o.default.createElement(r.Box,{ref:p},o.default.createElement(r.Box,{ref:e=>y(e),onMouseEnter:()=>g(!0),onMouseLeave:v,display:s.Display.Flex},n??(u&&o.default.createElement(r.Icon,{color:s.IconColor.iconAlternative,name:u,size:r.IconSize.Sm}))??o.default.createElement(r.Icon,{name:r.IconName.Info,color:s.IconColor.iconAlternative,size:r.IconSize.Sm})),!a&&o.default.createElement(r.Popover,c({position:r.PopoverPosition.Auto,referenceElement:h,isOpen:f,onClickOutside:v,style:{maxWidth:"264px",backgroundColor:"var(--color-text-default)",paddingInline:"12px",paddingTop:"12px",paddingBottom:"12px",transitionTimingFunction:"linear",display:"inherit",...d},preventOverflow:!0,flip:!0,hasArrow:!0,isPortal:!0},m),o.default.createElement(i.default,{gap:2},t&&o.default.createElement(r.PopoverHeader,{color:s.TextColor.infoInverse,textAlign:s.TextAlign.Center,justifyContent:l?s.JustifyContent.spaceBetween:s.JustifyContent.center,onClose:l,childrenWrapperProps:{style:{whiteSpace:"nowrap"}}},t),o.default.createElement(r.Text,{justifyContent:s.JustifyContent.center,color:s.TextColor.infoInverse,variant:s.TextVariant.bodySm},e))))});n.default=u}}},{package:"$root$",file:"ui/pages/bridge/layout/tooltip.tsx"}],[7131,{"../../../components/component-library":6325,"../../../ducks/bridge/selectors":6873,"../../../helpers/constants/design-system":6899,"../../../hooks/bridge/useIsTxSubmittable":6971,"../../../hooks/useI18nContext":7047,"../hooks/useSubmitBridgeTransaction":7125,"../layout":7128,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeCTAButton=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),s=e("../../../components/component-library"),i=e("../../../ducks/bridge/selectors"),l=e("../../../hooks/useI18nContext"),c=(a=e("../hooks/useSubmitBridgeTransaction"))&&a.__esModule?a:{default:a},u=e("../../../helpers/constants/design-system"),d=e("../../../hooks/bridge/useIsTxSubmittable"),m=e("../layout");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}n.BridgeCTAButton=({onFetchNewQuotes:e,needsDestinationAddress:t=!1})=>{const n=(0,l.useI18nContext)(),a=(0,r.useSelector)(i.getToToken),p=(0,r.useSelector)(i.getFromAmount),{isLoading:f,activeQuote:g}=(0,r.useSelector)(i.getBridgeQuotes),h=(0,r.useSelector)(e=>(0,i.getIsQuoteExpired)(e,Date.now())),{submitBridgeTransaction:y}=(0,c.default)(),[v,b]=(0,o.useState)(!1),{isNoQuotesAvailable:k,isInsufficientBalance:x,isInsufficientGasBalance:T,isInsufficientGasForQuote:C,isTxAlertPresent:E}=(0,r.useSelector)(i.getValidationErrors),w=(0,r.useSelector)(i.getWasTxDeclined),_=(0,d.useIsTxSubmittable)(),S=(0,o.useMemo)(()=>w?"youDeclinedTheTransaction":h&&!f?"bridgeQuoteExpired":!f||_||g?T||k?undefined:x||C?"alertReasonInsufficientBalance":p?t?"bridgeSelectDestinationAccount":_||E?"swap":"swapSelectToken":a?t?"bridgeEnterAmountAndSelectAccount":"bridgeEnterAmount":t?"bridgeSelectTokenAmountAndAccount":"bridgeSelectTokenAndAmount":undefined,[f,E,p,a,_,x,T,C,w,h,t,g,k]),I=(0,o.useMemo)(()=>w||h?"bridgeFetchNewQuotes":undefined,[w,h]);return g&&!I?o.default.createElement(s.Button,{width:u.BlockSize.Full,size:s.ButtonSize.Lg,variant:s.ButtonVariant.Primary,"data-testid":"bridge-cta-button",style:{boxShadow:"none"},onClick:async()=>{if(g&&_&&!v)try{b(!0),await y(g)}finally{b(!1)}},loading:v,disabled:f||!_||E||h||v||t},S?n(S):""):o.default.createElement(m.Row,{alignItems:u.AlignItems.center,justifyContent:u.JustifyContent.center,gap:1},o.default.createElement(s.Text,{variant:u.TextVariant.bodyMd,textAlign:u.TextAlign.Center,color:u.TextColor.textAlternative},S?n(S):""),I&&o.default.createElement(s.ButtonLink,{as:"a",variant:u.TextVariant.bodyMd,style:{whiteSpace:"nowrap"},onClick:e},n(I)))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-cta-button.tsx"}],[7132,{"../../../components/component-library":6325,"../../../ducks/bridge/selectors":6873,"../../../ducks/bridge/utils":6874,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/hardware":6933,"../../../hooks/useI18nContext":7047,"../../../selectors/selectors":7903,"../layout":7128,"@metamask/bridge-controller":1304,"bignumber.js":3768,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeCTAInfoText=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("react-redux"),s=e("@metamask/bridge-controller"),i=e("bignumber.js"),l=e("../../../components/component-library"),c=e("../../../ducks/bridge/selectors"),u=e("../../../hooks/useI18nContext"),d=e("../../../helpers/constants/design-system"),m=e("../layout"),p=e("../../../selectors/selectors"),f=e("../../../helpers/utils/hardware"),g=e("../../../ducks/bridge/utils");n.BridgeCTAInfoText=()=>{var e;const t=(0,u.useI18nContext)(),{activeQuote:n}=(0,r.useSelector)(c.getBridgeQuotes),a=(0,r.useSelector)(e=>(0,c.getIsQuoteExpired)(e,Date.now())),h=(0,r.useSelector)(p.getCurrentKeyring),y=(0,f.isHardwareKeyring)(null==h?void 0:h.type),v=new i.BigNumber((null==n?void 0:n.quote.feeData.metabridge.amount)??"0").gt(0),b=null==n?void 0:n.approval;if(!n)return null;if(!v&&!b)return null;if(a)return null;const k=null===(e=n.quote.feeData)||void 0===e||null===(e=e.metabridge)||void 0===e?void 0:e.quoteBpsFee,x=(0,g.bpsToPercentage)(k)??s.BRIDGE_MM_FEE_RATE;return v||b?o.default.createElement(m.Row,{gap:1,justifyContent:d.JustifyContent.center,"data-testid":"bridge-cta-info-text"},o.default.createElement(l.Text,{variant:d.TextVariant.bodyXs,color:d.TextColor.textAlternative},[v?t("rateIncludesMMFee",[x]):null,b&&((0,s.isCrossChain)(n.quote.srcChainId,n.quote.destChainId)?t("willApproveAmountForBridging"):t("willApproveAmountForSwapping"))].filter(Boolean).join(" ")),b?o.default.createElement(m.Tooltip,{display:d.Display.InlineBlock,position:l.PopoverPosition.Top,offset:[-48,8],title:t("grantExactAccess")},y?t("bridgeApprovalWarningForHardware",[n.sentAmount.amount,n.quote.srcAsset.symbol,n.quote.destAsset.symbol]):t("bridgeApprovalWarning",[n.sentAmount.amount,n.quote.srcAsset.symbol])):null):null}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-cta-info-text.tsx"}],[7133,{"../../../../shared/constants/multichain/networks":5616,"../../../../shared/constants/time":5635,"../../../../shared/lib/multichain/networks":5706,"../../../components/component-library":6325,"../../../components/multichain/asset-picker-amount/asset-picker":6496,"../../../components/multichain/asset-picker-amount/asset-picker-modal/asset-picker-modal-tabs":6490,"../../../ducks/bridge/selectors":6873,"../../../ducks/locale/locale":6882,"../../../ducks/metamask/metamask":6883,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/util":6959,"../../../hooks/useCopyToClipboard":7033,"../../../hooks/useI18nContext":7047,"../../../selectors/multichain":7895,"../layout":7128,"../utils/quote":7156,"./components/bridge-asset-picker-button":7136,"@metamask/bridge-controller":1304,"@metamask/etherscan-link":1994,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeInputGroup=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("@metamask/bridge-controller"),s=e("@metamask/etherscan-link"),i=e("../../../components/component-library"),l=e("../../../components/multichain/asset-picker-amount/asset-picker"),c=e("../../../components/multichain/asset-picker-amount/asset-picker-modal/asset-picker-modal-tabs"),u=e("../../../hooks/useI18nContext"),d=e("../../../ducks/metamask/metamask"),m=e("../utils/quote"),p=e("../layout"),f=e("../../../helpers/constants/design-system"),g=e("../../../ducks/bridge/selectors"),h=e("../../../helpers/utils/util"),y=e("../../../hooks/useCopyToClipboard"),v=e("../../../../shared/constants/time"),b=e("../../../ducks/locale/locale"),k=e("../../../../shared/constants/multichain/networks"),x=e("../../../../shared/lib/multichain/networks"),T=e("../../../selectors/multichain"),C=e("./components/bridge-asset-picker-button");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},w.apply(null,arguments)}n.BridgeInputGroup=({header:e,token:t,onAssetChange:n,onAmountChange:E,networkProps:_,isTokenListLoading:S,customTokenListGenerator:I,amountFieldProps:M,amountInFiat:A,onMaxButtonClick:P,isMultiselectEnabled:D,onBlockExplorerClick:O,buttonProps:B,containerProps:N={},isDestinationToken:F=!1})=>{var R;const j=(0,u.useI18nContext)(),{isLoading:L}=(0,o.useSelector)(g.getBridgeQuotes),{isInsufficientBalance:$,isEstimatedReturnLow:W}=(0,o.useSelector)(g.getValidationErrors),q=(0,o.useSelector)(d.getCurrentCurrency),U=(0,o.useSelector)(b.getIntlLocale),V=(0,o.useSelector)(T.getMultichainCurrentChainId),G=(null==_||null===(R=_.network)||void 0===R?void 0:R.chainId)??V,[,z]=(0,y.useCopyToClipboard)(v.MINUTE),H=(0,a.useRef)(null),Q=(0,o.useSelector)(g.getFromTokenBalance),K=(null==M?void 0:M.readOnly)||(null==M?void 0:M.disabled);(0,a.useEffect)(()=>{var e;!K&&H.current&&(H.current.value=(null==M||null===(e=M.value)||void 0===e?void 0:e.toString())??"",H.current.focus())},[null==M?void 0:M.value,K,t]),(0,a.useEffect)(()=>()=>{H.current=null},[]);return a.default.createElement(p.Column,w({gap:1},N),a.default.createElement(p.Row,{gap:4},a.default.createElement(i.TextField,w({inputProps:{disableStateStyles:!0,textAlign:f.TextAlign.Start,style:{fontWeight:400,fontSize:Math.max(14,9/Math.max(9,((null==M?void 0:M.value)??"").toString().length)*36),transition:"font-size 0.1s",padding:0}},style:{minWidth:96,maxWidth:190,opacity:K&&null!=M&&M.value?1:undefined},display:f.Display.Flex,inputRef:H,type:i.TextFieldType.Text,className:"amount-input",placeholder:"0",onKeyPress:e=>{var t;e&&("."===e.key&&null!==(t=M.value)&&void 0!==t&&t.toString().includes(".")?e.preventDefault():/^[\d.]{1}$/u.test(e.key)||e.preventDefault())},onPaste:e=>{e.preventDefault();const t=(0,m.sanitizeAmountInput)(e.clipboardData.getData("text"));null==E||E(t??"")},onChange:e=>{e.preventDefault(),e.stopPropagation();const t=(0,m.sanitizeAmountInput)(e.target.value);null==E||E(t??"")}},M)),a.default.createElement(l.AssetPicker,{header:e,visibleTabs:[c.TabName.TOKENS],asset:t??undefined,onAssetChange:n,networkProps:_,customTokenListGenerator:I,isTokenListLoading:S,isMultiselectEnabled:D,isDestinationToken:F},(e,n)=>K&&!t?a.default.createElement(i.Button,{"data-testid":B.testId,onClick:e,size:i.ButtonSize.Lg,paddingLeft:6,paddingRight:6,fontWeight:f.FontWeight.Normal,style:{whiteSpace:"nowrap"}},j("swapSwapTo")):a.default.createElement(C.BridgeAssetPickerButton,{onClick:e,networkImageSrc:n,asset:t??undefined,networkProps:_,"data-testid":B.testId}))),a.default.createElement(p.Row,{justifyContent:f.JustifyContent.spaceBetween,style:{height:24}},a.default.createElement(i.Text,{variant:f.TextVariant.bodyMd,fontWeight:f.FontWeight.Normal,color:K&&W?f.TextColor.warningDefault:f.TextColor.textAlternative,textAlign:f.TextAlign.End,ellipsis:!0},K&&L&&"0"===M.value?j("bridgeCalculatingAmount"):undefined,A&&(0,m.formatCurrencyAmount)(A,q,2)),!K&&Q&&t&&a.default.createElement(i.Text,{display:f.Display.Flex,gap:1,variant:f.TextVariant.bodyMd,color:$?f.TextColor.errorDefault:f.TextColor.textAlternative,style:{cursor:"default",textDecoration:"none"}},(0,m.formatTokenAmount)(U,Q,t.symbol),P&&a.default.createElement(i.ButtonLink,{variant:f.TextVariant.bodyMd,onClick:()=>P(Q)},j("max"))),K&&t&&G&&!(0,r.isNativeAddress)(t.address)&&a.default.createElement(i.Text,{display:f.Display.Flex,gap:1,variant:f.TextVariant.bodyMd,color:f.TextColor.textAlternative,onClick:()=>{(()=>{if(t&&G){const a=(0,r.formatChainIdToCaip)(G);let o="";if(a===k.MultichainNetworks.SOLANA){const e=k.MULTICHAIN_NETWORK_BLOCK_EXPLORER_FORMAT_URLS_MAP[a];e&&(o=(0,x.formatBlockExplorerAddressUrl)(e,t.address))}else{var e,n;const a=null==_||null===(e=_.network)||void 0===e||null===(e=e.blockExplorerUrls)||void 0===e?void 0:e[(null==_||null===(n=_.network)||void 0===n?void 0:n.defaultBlockExplorerUrlIndex)??0];a&&(o=(0,s.getAccountLink)(t.address,G,{blockExplorerUrl:a},undefined))}o&&(z(o),null==O||O(t))}})()},as:"a",style:{cursor:K?"pointer":"default",textDecoration:K?"underline":"none"}},(0,h.shortenString)(t.address,{truncatedCharLimit:11,truncatedStartChars:4,truncatedEndChars:4,skipCharacterInEnd:!1}))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-input-group.tsx"}],[7134,{"../../../components/component-library":6325,"../../../ducks/bridge/selectors":6873,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"../layout":7128,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeNoFeeMessage=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("react-redux"),s=e("../../../components/component-library"),i=e("../../../ducks/bridge/selectors"),l=e("../../../hooks/useI18nContext"),c=e("../../../helpers/constants/design-system"),u=e("../layout");n.BridgeNoFeeMessage=()=>{var e,t;const n=(0,l.useI18nContext)(),{activeQuote:a}=(0,r.useSelector)(i.getBridgeQuotes),d=(0,r.useSelector)(e=>{var t;return(0,i.selectNoFeeAssets)(e,null==a||null===(t=a.quote)||void 0===t||null===(t=t.destChainId)||void 0===t?void 0:t.toString())});if(!a)return null;if(!d.includes((null===(e=a.quote.destAsset.address)||void 0===e?void 0:e.toLowerCase())??""))return null;const m=(null===(t=a.quote.destAsset)||void 0===t?void 0:t.symbol)||"token";return o.default.createElement(u.Row,{gap:1,justifyContent:c.JustifyContent.center},o.default.createElement(s.Text,{variant:c.TextVariant.bodyXs,color:c.TextColor.textAlternative},n("noMMFeeSwapping",[m])))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-no-fee-message.tsx"}],[7135,{"../../../components/component-library":6325,"../../../ducks/bridge/actions":6871,"../../../ducks/bridge/selectors":6873,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"../layout":7128,"../utils/slippage-service":7157,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeTransactionSettingsModal=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("../../../components/component-library"),s=e("../../../hooks/useI18nContext"),i=e("../../../helpers/constants/design-system"),l=e("../../../ducks/bridge/selectors"),c=e("../../../ducks/bridge/actions"),u=e("../utils/slippage-service"),d=e("../layout");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const p=[u.SlippageValue.EvmStablecoin,u.SlippageValue.BridgeDefault];n.BridgeTransactionSettingsModal=({onClose:e,isOpen:t})=>{const n=(0,s.useI18nContext)(),m=(0,o.useDispatch)(),f=(0,o.useSelector)(l.getIsSolanaSwap),g=(0,o.useSelector)(l.getSlippage),h=f,[y,v]=(0,a.useState)(undefined),[b,k]=(0,a.useState)(undefined),[x,T]=(0,a.useState)(!0),[C,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&(h&&g===undefined?(E(!0),v(undefined),k(undefined)):(E(!1),g&&0!==g?p.includes(g)?(v(g),k(undefined)):(v(undefined),k(g.toString())):(v(u.SlippageValue.BridgeDefault),k(undefined))))},[g,h,t]);const w=(()=>{if(!b)return null;const e=Number(b.replace(",","."));return e<.5?{severity:i.SEVERITIES.WARNING,text:n("swapSlippageLowDescription",[e]),title:n("swapSlippageLowTitle")}:null})();return a.default.createElement(r.Modal,{isOpen:t,onClose:e,className:"bridge-settings-modal"},a.default.createElement(r.ModalOverlay,null),a.default.createElement(r.ModalContent,null,a.default.createElement(r.ModalHeader,{onClose:e},n("transactionSettings")),a.default.createElement(d.Column,{gap:3,paddingInline:4,paddingBottom:4},a.default.createElement(d.Row,{gap:1,justifyContent:i.JustifyContent.flexStart},a.default.createElement(r.Text,{variant:i.TextVariant.bodyMdMedium},n("swapsMaxSlippage")),a.default.createElement(d.Tooltip,{position:r.PopoverPosition.Top,style:{zIndex:1051}},n("swapSlippageTooltip"))),a.default.createElement(d.Row,{gap:2,justifyContent:i.JustifyContent.flexStart},h&&a.default.createElement(r.Button,{size:r.ButtonSize.Md,variant:C?r.ButtonVariant.Primary:r.ButtonVariant.Secondary,onClick:e=>{e.preventDefault(),e.stopPropagation(),v(undefined),k(undefined),E(!0)}},n("swapSlippageAutoDescription")),p.map(e=>{const t=!C&&y===e;return a.default.createElement(r.Button,{key:e,size:r.ButtonSize.Md,variant:t?r.ButtonVariant.Primary:r.ButtonVariant.Secondary,onClick:t=>{t.preventDefault(),t.stopPropagation(),v(e),k(undefined),E(!1)}},e,"%")}),x&&a.default.createElement(r.Button,{size:r.ButtonSize.Md,variant:b===undefined?r.ButtonVariant.Secondary:r.ButtonVariant.Primary,onClick:e=>{e.preventDefault(),e.stopPropagation(),T(!1),E(!1)}},b===undefined?n("customSlippage"):`${b}%`),!x&&a.default.createElement(r.TextField,{size:r.TextFieldSize.Md,borderColor:i.BorderColor.borderMuted,borderRadius:i.BorderRadius.XL,type:r.TextFieldType.Text,value:b,onChange:e=>{const{value:t}=e.target;(""===t||/^\d*[.,]?\d*$/u.test(t))&&(v(undefined),k(t),E(!1))},autoFocus:!0,onBlur:()=>{T(!0)},onFocus:()=>{T(!1)},endAccessory:a.default.createElement(r.Text,{variant:i.TextVariant.bodyMd},"%")})),w&&a.default.createElement(r.Box,{marginTop:5},a.default.createElement(r.BannerAlert,{severity:w.severity,title:w.title,titleProps:{"data-testid":"swaps-banner-title"}},a.default.createElement(r.Text,null,w.text)))),a.default.createElement(r.ModalFooter,null,a.default.createElement(r.Button,{width:i.BlockSize.Full,size:r.ButtonSize.Lg,variant:r.ButtonVariant.Primary,disabled:(C?undefined:y??(b?Number(b.replace(",",".")):undefined))===g,onClick:()=>{const t=C?undefined:y??Number(null==b?void 0:b.replace(",","."));t!==g&&(m((0,c.setSlippage)(t)),e())}},n("submit")))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx"}],[7136,{"../../../../components/component-library":6325,"../../../../components/component-library/select-button/select-button.types":6362,"../../../../helpers/constants/design-system":6899,"../../../../helpers/utils/nfts":6943,"../../../../hooks/useI18nContext":7047,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeAssetPickerButton=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../components/component-library/select-button/select-button.types"),s=e("../../../../components/component-library"),i=e("../../../../helpers/constants/design-system"),l=e("../../../../hooks/useI18nContext"),c=e("../../../../helpers/utils/nfts");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(null,arguments)}n.BridgeAssetPickerButton=({asset:e,networkProps:t,networkImageSrc:n,...a})=>{var d;const m=(0,l.useI18nContext)();return o.default.createElement(s.SelectButton,u({borderRadius:i.BorderRadius.pill,backgroundColor:i.BackgroundColor.backgroundDefault,borderColor:i.BorderColor.borderMuted,style:{padding:8,paddingRight:11,paddingInline:e?undefined:24,minWidth:"fit-content"},gap:0,size:r.SelectButtonSize.Lg,alignItems:i.AlignItems.center,descriptionProps:{variant:i.TextVariant.bodyMd,overflowWrap:i.OverflowWrap.BreakWord,ellipsis:!1},caretIconProps:{name:s.IconName.Arrow2Down,style:{display:i.Display.None}},label:o.default.createElement(s.Text,{variant:i.TextVariant.bodyLgMedium,ellipsis:!0},(null==e?void 0:e.symbol)??m("bridgeTo")),startAccessory:e?o.default.createElement(s.BadgeWrapper,{marginRight:2,badge:e?o.default.createElement(s.AvatarNetwork,{name:(null==t||null===(d=t.network)||void 0===d?void 0:d.name)??"",src:n,size:s.AvatarNetworkSize.Xs}):undefined},e?o.default.createElement(s.AvatarToken,{src:(0,c.getNftImage)(e.image)||undefined,backgroundColor:i.BackgroundColor.backgroundHover,name:e.symbol}):undefined):undefined},a))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/bridge-asset-picker-button.tsx"}],[7137,{"../../../../../app/scripts/lib/multichain/address":282,"../../../../../shared/constants/network":5617,"../../../../components/app/preferred-avatar":6033,"../../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component":6246,"../../../../components/component-library":6325,"../../../../ducks/bridge/selectors":6873,"../../../../helpers/constants/common":6897,"../../../../helpers/constants/design-system":6899,"../../../../helpers/utils/util":6959,"../../../../hooks/useAccountTotalCrossChainFiatBalance":7025,"../../../../hooks/useGetFormattedTokensPerChain":7046,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useMultichainBalances":7056,"../../../../selectors":7886,"../../layout":7128,"@metamask/bridge-controller":1304,"@metamask/design-system-react":1741,"@metamask/keyring-api":2100,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=C(e("react")),o=e("react-redux"),r=e("@metamask/bridge-controller"),s=e("@metamask/design-system-react"),i=e("@metamask/keyring-api"),l=e("../../../../helpers/utils/util"),c=e("../../../../components/component-library"),u=e("../../../../helpers/constants/design-system"),d=e("../../../../selectors"),m=e("../../../../../app/scripts/lib/multichain/address"),p=e("../../../../hooks/useGetFormattedTokensPerChain"),f=e("../../../../hooks/useAccountTotalCrossChainFiatBalance"),g=C(e("../../../../components/app/user-preferenced-currency-display/user-preferenced-currency-display.component")),h=e("../../../../helpers/constants/common"),y=e("../../../../components/app/preferred-avatar"),v=e("../../layout"),b=e("../../../../hooks/useI18nContext"),k=e("../../../../../shared/constants/network"),x=e("../../../../ducks/bridge/selectors"),T=e("../../../../hooks/useMultichainBalances");function C(e){return e&&e.__esModule?e:{default:e}}const E=({account:e,selected:t=!1,onClick:n,isExternal:C=!1})=>{const E=(0,o.useSelector)(d.getShouldHideZeroBalanceTokens),w=(0,o.useSelector)(d.getIsTokenNetworkFilterEqualCurrentNetwork),_=(0,o.useSelector)(d.getChainIdsToPoll),S=(0,i.isEvmAccountType)(e.type),I=(0,o.useSelector)(x.getToChain),{balanceByChainId:M}=(0,T.useMultichainBalances)(e.address),{formattedTokensWithBalancesPerChain:A}=(0,p.useGetFormattedTokensPerChain)(e,E,w,_),{totalFiatBalance:P}=(0,f.useAccountTotalCrossChainFiatBalance)(e,A);let D;if(S)D=P;else{var O;const e=(null==I?void 0:I.chainId)&&((0,r.isNonEvmChainId)(null==I?void 0:I.chainId)?I.chainId:(0,r.formatChainIdToHex)(null==I?void 0:I.chainId));D=e?(null===(O=M[e])||void 0===O?void 0:O.toString())??"0":"0"}const B=(0,b.useI18nContext)();return a.default.createElement(v.Row,{gap:4,padding:2,paddingInline:4,onClick:n,className:t?"multichain-account-list-item--selected":"multichain-account-list-item"},a.default.createElement(c.Box,{style:{borderRadius:12,borderColor:"#8b99ff",borderWidth:t?2:0,padding:t?1:3,height:38}},a.default.createElement(y.PreferredAvatar,{style:{minWidth:"max-content",borderRadius:8},address:e.address})),a.default.createElement(v.Column,{gap:1,"data-testid":t?"selected-to-account":undefined},a.default.createElement(v.Row,{gap:1,style:{maxWidth:"min-content"}},a.default.createElement(c.Text,{variant:u.TextVariant.bodyMdMedium,ellipsis:!0},e.displayName),t&&a.default.createElement(s.Icon,{name:s.IconName.CheckBold,size:s.IconSize.Md,color:s.IconColor.PrimaryDefault})),a.default.createElement(c.Text,{variant:u.TextVariant.bodySm,color:u.TextColor.textAlternative,"data-testid":"account-list-address"},(0,l.shortenAddress)((0,m.normalizeSafeAddress)(e.address)))),C?a.default.createElement(c.Tag,{label:B("externalAccount"),labelProps:{variant:u.TextVariant.bodyXs},style:{whiteSpace:"nowrap"}}):a.default.createElement(v.Column,{alignItems:u.AlignItems.flexEnd,width:u.BlockSize.Max,gap:1},a.default.createElement(g.default,{ethNumberOfDecimals:3,value:D,type:h.PRIMARY,showFiat:!0,isAggregatedFiatOverviewBalance:!0,hideLabel:!0,"data-testid":"first-currency-display"}),a.default.createElement(c.AvatarNetwork,{src:k.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null!=I&&I.chainId&&!(0,r.isNonEvmChainId)(null==I?void 0:I.chainId)?(0,r.formatChainIdToHex)(null==I?void 0:I.chainId):(null==I?void 0:I.chainId)??""],name:(null==I?void 0:I.name)??"",size:c.AvatarNetworkSize.Xs})))};n.default=a.default.memo(E)}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/destination-account-list-item.tsx"}],[7138,{"../../../../../shared/lib/translate":5723,"../../../../components/component-library":6325,"../../../../ducks/bridge/selectors":6873,"../../../../ducks/bridge/utils":6874,"../../../../helpers/constants/design-system":6899,"../../hooks/useExternalAccountResolution":7122,"./destination-account-list-item":7137,"@metamask/bridge-controller":1304,"@metamask/design-system-react":1741,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DestinationAccountPickerModal=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),s=e("@metamask/bridge-controller"),i=e("@metamask/design-system-react"),l=e("../../../../ducks/bridge/utils"),c=e("../../../../components/component-library"),u=e("../../../../helpers/constants/design-system"),d=e("../../../../../shared/lib/translate"),m=e("../../../../ducks/bridge/selectors"),p=e("../../hooks/useExternalAccountResolution"),f=(a=e("./destination-account-list-item"))&&a.__esModule?a:{default:a};function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}n.DestinationAccountPickerModal=({onAccountSelect:e,selectedAccount:t,isOpen:n,onClose:a})=>{const[g,h]=(0,o.useState)(""),y=(0,r.useSelector)(m.getToAccounts),v=(0,r.useSelector)(m.getToChain),b=!(null==v||!v.chainId)&&(0,s.isSolanaChainId)(v.chainId),k=!(null==v||!v.chainId)&&(0,s.isBitcoinChainId)(v.chainId),x=!(null==v||!v.chainId)&&(0,l.isTronChainId)(v.chainId),T=(0,p.useExternalAccountResolution)({searchQuery:g,isDestinationSolana:b,isDestinationBitcoin:k,isDestinationTron:x}),C=(0,o.useMemo)(()=>y.filter(e=>{const t=e.displayName.toLowerCase().includes(g.trim().toLowerCase()),n=e.address.toLowerCase().includes(g.trim().toLowerCase());return t||n}),[y,g]),E=(0,r.useSelector)(m.getIsToOrFromNonEvm);return o.default.createElement(c.Modal,{isOpen:n||E&&!t,onClose:()=>{h(""),a()},"data-testid":"destination-account-picker-modal"},o.default.createElement(c.ModalOverlay,null),o.default.createElement(c.ModalContent,{paddingTop:4,paddingBottom:4,gap:3},o.default.createElement(c.ModalHeader,{onClose:a},(0,d.t)("recipient")),o.default.createElement(c.TextField,{autoFocus:!0,"data-testid":"destination-account-picker-modal-search-input",placeholder:(b?(0,d.t)("destinationAccountPickerSearchPlaceholderToSolana"):(0,d.t)("destinationAccountPickerSearchPlaceholderToMainnet"))??undefined,marginInline:4,value:g,onChange:e=>h(e.target.value),backgroundColor:u.BackgroundColor.backgroundSubsection,borderRadius:u.BorderRadius.XL,borderWidth:0,color:u.TextColor.textAlternative,inputProps:{disableStateStyles:!0},style:{minHeight:48,marginBottom:12,outline:"none"},startAccessory:o.default.createElement(i.Icon,{name:i.IconName.Search,size:i.IconSize.Md})}),o.default.createElement(c.ModalBody,{paddingRight:0,paddingLeft:0,"data-testid":"destination-account-picker-modal-body"},C.map(n=>o.default.createElement(f.default,{key:n.id+n.address+n.displayName,account:n,onClick:()=>{e(n)},selected:!!t&&n.address.toLowerCase()===t.address.toLowerCase(),isExternal:!1})),T&&o.default.createElement(f.default,{key:"external-account",account:T,onClick:()=>{e(T)},selected:!!t&&T.address.toLowerCase()===t.address.toLowerCase(),isExternal:!0}),0===C.length&&!T&&o.default.createElement(c.Text,{textAlign:u.TextAlign.Center},g?(0,d.t)("destinationAccountPickerNoMatching"):(0,d.t)("destinationAccountPickerNoEligible")))))}}}},{package:"$root$",file:"ui/pages/bridge/prepare/components/destination-account-picker-modal.tsx"}],[7139,{"./bridge-cta-button":7131,"./bridge-cta-info-text":7132,"./bridge-no-fee-message":7134,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PrepareBridgePageFooter=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("./bridge-cta-button"),s=e("./bridge-cta-info-text"),i=e("./bridge-no-fee-message");n.PrepareBridgePageFooter=e=>o.default.createElement("div",{style:{display:"contents"}},o.default.createElement(s.BridgeCTAInfoText,null),o.default.createElement(r.BridgeCTAButton,e),o.default.createElement(i.BridgeNoFeeMessage,null))}}},{package:"$root$",file:"ui/pages/bridge/prepare/prepare-bridge-page-footer.tsx"}],[7140,{"../../../../shared/constants/network":5617,"../../../../shared/constants/time":5635,"../../../../shared/lib/asset-utils":5647,"../../../../shared/lib/swaps-utils":5715,"../../../../shared/lib/trace":5718,"../../../../shared/types/security-alerts-api":5766,"../../../components/component-library":6325,"../../../components/multichain":6568,"../../../ducks/bridge/actions":6871,"../../../ducks/bridge/selectors":6873,"../../../ducks/bridge/utils":6874,"../../../ducks/locale/locale":6882,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/hardware":6933,"../../../hooks/bridge/useBridgeQueryParams":6967,"../../../hooks/bridge/useIsTxSubmittable":6971,"../../../hooks/bridge/useSmartSlippage":6974,"../../../hooks/bridge/useTokenAlerts":6975,"../../../hooks/bridge/useTokensWithFiltering":6976,"../../../hooks/ramps/useRamps/useRamps":7004,"../../../hooks/useI18nContext":7047,"../../../hooks/useMultichainSelector":7057,"../../../selectors":7886,"../../../selectors/multichain":7895,"../../../store/actions":7916,"../../swaps/mascot-background-animation/mascot-background-animation":7851,"../hooks/useDestinationAccount":7121,"../hooks/useGasIncluded7702":7123,"../hooks/useIsSendBundleSupported":7124,"../layout":7128,"../quotes/multichain-bridge-quote-card":7142,"../utils/quote":7156,"./bridge-input-group":7133,"./components/destination-account-picker-modal":7138,"./prepare-bridge-page-footer":7139,"@metamask/bridge-controller":1304,"@metamask/utils":2914,"bignumber.js":3768,classnames:3913,"ethereumjs-util":4138,lodash:4635,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEnableMissingNetwork=n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=H(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("bignumber.js"),r=e("react-redux"),s=z(e("classnames")),i=e("lodash"),l=e("ethereumjs-util"),c=e("@metamask/bridge-controller"),u=e("@metamask/utils"),d=e("../../../ducks/bridge/actions"),m=e("../../../ducks/bridge/selectors"),p=e("../../../components/component-library"),f=e("../../../helpers/constants/design-system"),g=e("../../../hooks/useI18nContext"),h=e("../../../hooks/bridge/useTokensWithFiltering"),y=e("../../../../shared/lib/swaps-utils"),v=e("../utils/quote"),b=e("../../../ducks/bridge/utils"),k=z(e("../../swaps/mascot-background-animation/mascot-background-animation")),x=e("../layout"),T=z(e("../../../hooks/ramps/useRamps/useRamps")),C=e("../../../selectors"),E=e("../../../helpers/utils/hardware"),w=e("../../../../shared/constants/time"),_=e("../../../ducks/locale/locale"),S=e("../../../hooks/useMultichainSelector"),I=e("../../../selectors/multichain"),M=e("../../../store/actions"),A=e("../quotes/multichain-bridge-quote-card"),P=e("../../../../shared/types/security-alerts-api"),D=e("../../../hooks/bridge/useTokenAlerts"),O=e("../hooks/useDestinationAccount"),B=e("../../../components/multichain"),N=e("../../../hooks/bridge/useIsTxSubmittable"),F=e("../../../../shared/lib/asset-utils"),R=e("../../../../shared/lib/trace"),j=e("../../../../shared/constants/network"),L=e("../../../hooks/bridge/useBridgeQueryParams"),$=e("../../../hooks/bridge/useSmartSlippage"),W=e("../hooks/useGasIncluded7702"),q=e("../hooks/useIsSendBundleSupported"),U=e("./bridge-input-group"),V=e("./prepare-bridge-page-footer"),G=e("./components/destination-account-picker-modal");function z(e){return e&&e.__esModule?e:{default:e}}function H(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(H=function(e){return e?n:t})(e)}const Q=()=>{const e=(0,r.useSelector)(C.getEnabledNetworksByNamespace),t=(0,r.useDispatch)();return(0,a.useCallback)(n=>{const a=Object.keys(e??{}),o=(0,c.formatChainIdToCaip)(n),{namespace:r}=(0,u.parseCaipChainId)(o);if(r){if(j.FEATURED_NETWORK_CHAIN_IDS.includes(n)){a.includes(n)||t((0,M.setEnabledAllPopularNetworks)())}}},[t,e])};n.useEnableMissingNetwork=Q;n.default=({onOpenSettings:e})=>{var t,n,u,M;const z=(0,r.useDispatch)(),H=Q(),K=(0,g.useI18nContext)(),J=(0,r.useSelector)(m.getFromChain),X=(0,r.useSelector)(m.getIsSwap),Y=(0,q.useIsSendBundleSupported)(J),Z=(0,r.useSelector)(e=>(0,m.getIsGasIncluded)(e,Y)),ee=(0,r.useSelector)(m.getFromToken),te=(0,r.useSelector)(C.getTokenList),ne=(0,r.useSelector)(m.getToToken),ae=(0,r.useSelector)(m.getFromChains),oe=(0,r.useSelector)(m.getToChains),re=(0,r.useSelector)(m.getToChain),se=(0,a.useMemo)(()=>(!J||!(0,c.isNonEvmChainId)(J.chainId))&&0===Object.keys(te).length,[te,J]),ie=(0,r.useSelector)(m.getFromAmount),le=(0,r.useSelector)(m.getFromAmountInCurrency),ce=(0,r.useSelector)(m.getIsStxEnabled),ue=(0,S.useMultichainSelector)(I.getMultichainProviderConfig),de=(0,r.useSelector)(m.getSlippage),me=(0,r.useSelector)(m.getQuoteRequest),pe=(0,r.useSelector)(m.getFromTokenBalance),{isLoading:fe,activeQuote:ge,quotesRefreshCount:he}=(0,r.useSelector)(m.getBridgeQuotes),ye=(0,r.useSelector)(e=>(0,m.getIsQuoteExpired)(e,Date.now())),ve=(0,r.useSelector)(m.getWasTxDeclined),be=(0,v.isQuoteExpiredOrInvalid)({activeQuote:ge,toToken:ne,toChain:re,fromChain:J,isQuoteExpired:ye,insufficientBal:me.insufficientBal})?undefined:ge,ke=(0,r.useSelector)(m.getFromAccount),xe=(0,W.useGasIncluded7702)({isSwap:X,isSendBundleSupportedForChain:Y,selectedAccount:ke,fromChain:J}),Te=!ee||!(0,c.isNativeAddress)(ee.address)||(Z||xe),Ce=(0,r.useSelector)(C.getCurrentKeyring),Ee=(0,E.isHardwareKeyring)(null==Ce?void 0:Ce.type),we=(0,r.useSelector)(m.getHardwareWalletName),_e=(0,N.useIsTxSubmittable)(),Se=(0,r.useSelector)(_.getIntlLocale),Ie=(0,S.useMultichainSelector)(I.getMultichainNativeCurrency),{isEstimatedReturnLow:Me,isNoQuotesAvailable:Ae,isInsufficientGasForQuote:Pe,isInsufficientBalance:De}=(0,r.useSelector)(m.getValidationErrors),Oe=(0,r.useSelector)(m.getTxAlerts),{openBuyCryptoInPdapp:Be}=(0,T.default)(),{tokenAlert:Ne}=(0,D.useTokenAlerts)(),{selectedDestinationAccount:Fe,setSelectedDestinationAccount:Re,isDestinationAccountPickerOpen:je,setIsDestinationAccountPickerOpen:Le}=(0,O.useDestinationAccount)(),{filteredTokenListGenerator:$e,isLoading:We}=(0,h.useTokensWithFiltering)((null==re?void 0:re.chainId)??(null==J?void 0:J.chainId),(null==J?void 0:J.chainId)===(null==re?void 0:re.chainId)&&ee&&J?(()=>{let e="";if((0,c.isNativeAddress)(ee.address))e="";else if((0,c.isNonEvmChainId)(J.chainId))e=ee.address||"";else{var t;e=(null===(t=ee.address)||void 0===t?void 0:t.toLowerCase())||""}return{...ee,address:e,chainId:(0,c.formatChainIdToCaip)(J.chainId)}})():null,null==Fe?void 0:Fe.address),[qe,Ue]=(0,a.useState)(!1),[Ve,Ge]=(0,a.useState)(!0);(0,a.useEffect)(()=>Ge(!0),[he]);const[ze,He]=(0,a.useState)(!0);(0,a.useEffect)(()=>He(!0),[Ne]);const[Qe,Ke]=(0,a.useState)(!0);(0,a.useEffect)(()=>Ke(!0),[null==ne?void 0:ne.address]);const[Je,Xe]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Xe(!0);const e=setTimeout(()=>{Xe(!1)},w.SECOND);return()=>{clearTimeout(e)}},[qe]);const Ye=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;fe||(Me||Pe||Ve||Ne||Oe||Ee)&&(null===(e=Ye.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"}))},[Me,Pe,Ve,Ne,Oe,Ee,fe]);const Ze=(0,r.useSelector)(m.getIsToOrFromNonEvm),et=(0,a.useMemo)(()=>J&&(0,c.isNonEvmChainId)(J.chainId)&&ie&&pe?new o.BigNumber(pe).lt((0,v.safeAmountForCalc)(ie)):undefined,[ie,J,pe]),tt=(0,a.useMemo)(()=>{var e;return null!=ke&&ke.address?{srcTokenAddress:null==ee?void 0:ee.address,destTokenAddress:null==ne?void 0:ne.address,srcTokenAmount:ie&&null!=ee&&ee.decimals?(0,y.calcTokenValue)((0,v.safeAmountForCalc)(ie),ee.decimals).toFixed().split(".")[0]:undefined,srcChainId:null==J?void 0:J.chainId,destChainId:null==re?void 0:re.chainId,insufficientBal:!(null==ue||null===(e=ue.rpcUrl)||void 0===e||!e.includes("localhost"))||et,slippage:de,walletAddress:ke.address,destWalletAddress:null==Fe?void 0:Fe.address,gasIncluded:Z||xe,gasIncluded7702:xe}:undefined},[null==ee?void 0:ee.address,null==ee?void 0:ee.decimals,null==ne?void 0:ne.address,ie,null==J?void 0:J.chainId,null==re?void 0:re.chainId,de,null==ke?void 0:ke.address,null==Fe?void 0:Fe.address,null==ue?void 0:ue.rpcUrl,Z,xe,et]),nt=(0,a.useCallback)((0,i.debounce)((...e)=>{z((0,d.updateQuoteRequestParams)(...e))},300),[z]);(0,a.useEffect)(()=>()=>{nt.cancel()},[]),(0,a.useEffect)(()=>{if(z((0,d.setSelectedQuote)(null)),!tt)return;const e={stx_enabled:ce,token_symbol_source:(null==ee?void 0:ee.symbol)??"",token_symbol_destination:(null==ne?void 0:ne.symbol)??"",security_warnings:[null==Oe?void 0:Oe.descriptionId,null==Ne?void 0:Ne.titleId].filter(Boolean)};nt(tt,e)},[tt]),(0,$.useSmartSlippage)({fromChain:J,toChain:re,fromToken:ee,toToken:ne,isSwap:X}),(0,a.useEffect)(()=>{(0,R.endTrace)({name:R.TraceName.SwapViewLoaded,timestamp:Date.now()}),be||z((0,d.resetBridgeState)())},[]),(0,L.useBridgeQueryParams)();const at=(null==ne?void 0:ne.occurrences)??(null==ne||null===(t=ne.aggregators)||void 0===t?void 0:t.length),ot=(null==ne?void 0:ne.address)&&!(0,c.isNativeAddress)(null==ne?void 0:ne.address),[rt,st]=(0,a.useState)(!1),[it,lt]=(0,a.useState)(null),[ct,ut]=(0,a.useState)(0);return a.default.createElement(a.default.Fragment,null,a.default.createElement(G.DestinationAccountPickerModal,{isOpen:je,onAccountSelect:e=>{Re(e),Le(!1)},selectedAccount:Fe,onClose:()=>Le(!1)}),a.default.createElement(x.Column,{className:"prepare-bridge-page",gap:4},a.default.createElement(U.BridgeInputGroup,{header:K("swapSelectToken"),token:ee,onAmountChange:e=>{z((0,d.setFromTokenInputValue)(e))},onAssetChange:e=>{const t={...e,address:e.address??(0,l.zeroAddress)()};z((0,d.setFromToken)(t)),z((0,d.setFromTokenInputValue)(null)),e.address===(null==ne?void 0:ne.address)&&z((0,d.setToToken)(null))},networkProps:{network:J,networks:ae,onNetworkChange:e=>{(0,b.isNetworkAdded)(e)&&H(e.chainId),z((0,d.setFromChain)({networkConfig:e,selectedAccount:ke}))},header:K("yourNetworks")},isMultiselectEnabled:!0,onMaxButtonClick:Te?e=>{z((0,d.setFromTokenInputValue)(e))}:undefined,amountInFiat:le.valueInCurrency.gt(0)?le.valueInCurrency.toString():undefined,amountFieldProps:{testId:"from-amount",autoFocus:!0,value:ie||undefined},containerProps:{paddingInline:4},isTokenListLoading:se,buttonProps:{testId:"bridge-source-button"},onBlockExplorerClick:e=>{lt(e),st(!0),ut(e=>e+1)}}),a.default.createElement(x.Column,{height:f.BlockSize.Full,padding:4,gap:4,backgroundColor:f.BackgroundColor.backgroundDefault,style:{position:"relative"}},a.default.createElement(p.Box,{className:"prepare-bridge-page__switch-tokens",display:f.Display.Flex,backgroundColor:f.BackgroundColor.backgroundSection,style:{position:"absolute",top:"-20px",right:"calc(50% - 20px)",border:"2px solid var(--color-background-default)",borderRadius:"100%",opacity:1,width:40,height:40,justifyContent:f.JustifyContent.center}},a.default.createElement(p.ButtonIcon,{iconProps:{className:(0,s.default)({rotate:qe})},style:{alignSelf:"center",borderRadius:"100%",width:"100%",height:"100%"},"data-testid":"switch-tokens",ariaLabel:"switch-tokens",iconName:p.IconName.SwapVertical,color:f.IconColor.iconAlternative,disabled:Je||!(0,c.isValidQuoteRequest)(me,!1)||re&&!(0,b.isNetworkAdded)(re),onClick:()=>{var e;z((0,d.setSelectedQuote)(null)),(null==re?void 0:re.chainId)&&ee&&ne&&z((0,d.trackUnifiedSwapBridgeEvent)(c.UnifiedSwapBridgeEventName.InputSourceDestinationSwitched,{token_symbol_source:(null==ne?void 0:ne.symbol)??null,token_symbol_destination:(null==ee?void 0:ee.symbol)??null,token_address_source:(0,F.toAssetId)(ne.address??"",(0,c.formatChainIdToCaip)(ne.chainId??""))??(null===(e=(0,c.getNativeAssetForChainId)(re.chainId))||void 0===e?void 0:e.assetId),token_address_destination:(0,F.toAssetId)(ee.address??"",(0,c.formatChainIdToCaip)(ee.chainId??""))??null,chain_id_source:(0,c.formatChainIdToCaip)(re.chainId),chain_id_destination:null!=J&&J.chainId?(0,c.formatChainIdToCaip)(null==J?void 0:J.chainId):null,security_warnings:[]})),Ue(!qe),z(X?(0,d.setFromToken)(ne):(0,d.setFromChain)({networkConfig:re,token:ne,selectedAccount:ke})),z((0,d.setToToken)(ee))}})),a.default.createElement(p.Box,{paddingInline:4,style:{borderTop:"1px solid var(--color-border-muted)",marginTop:"-16px"}}),a.default.createElement(U.BridgeInputGroup,{header:K("swapSelectToken"),token:ne,onAssetChange:e=>{const t={...e,address:e.address??(0,l.zeroAddress)()};z((0,d.setToToken)(t))},networkProps:{network:re,networks:oe,onNetworkChange:e=>{(0,b.isNetworkAdded)(e)&&H(e.chainId),z((0,d.setToChainId)(e.chainId))},header:K("yourNetworks"),shouldDisableNetwork:({chainId:e})=>(0,c.isBitcoinChainId)(e)&&!(0,c.isCrossChain)(e,null==J?void 0:J.chainId)},customTokenListGenerator:$e,amountInFiat:(null==be||null===(n=be.toTokenAmount)||void 0===n?void 0:n.valueInCurrency)??undefined,amountFieldProps:{testId:"to-amount",readOnly:!0,disabled:!0,value:null!=be&&null!==(u=be.toTokenAmount)&&void 0!==u&&u.amount?(0,v.formatTokenAmount)(Se,be.toTokenAmount.amount):"0",autoFocus:!1,className:null!=be&&null!==(M=be.toTokenAmount)&&void 0!==M&&M.amount?"amount-input defined":"amount-input"},isTokenListLoading:We,buttonProps:{testId:"bridge-destination-button"},onBlockExplorerClick:e=>{lt(e),st(!0),ut(e=>e+1)},isDestinationToken:!0}),a.default.createElement(x.Column,{justifyContent:fe&&!ge?f.JustifyContent.center:f.JustifyContent.flexEnd,width:f.BlockSize.Full,height:f.BlockSize.Full,gap:3},!ve&&ge&&a.default.createElement(A.MultichainBridgeQuoteCard,{onOpenRecipientModal:()=>Le(!0),onOpenSlippageModal:e,selectedDestinationAccount:Fe}),Ae&&!ye&&a.default.createElement(p.BannerAlert,{severity:p.BannerAlertSeverity.Danger,description:K("noOptionsAvailableMessage"),textAlign:f.TextAlign.Left}),fe&&!ge?a.default.createElement(a.default.Fragment,null,a.default.createElement(p.Text,{textAlign:f.TextAlign.Center,color:f.TextColor.textAlternative},K("swapFetchingQuotes")),a.default.createElement(k.default,{height:"64",width:"64"})):a.default.createElement(V.PrepareBridgePageFooter,{onFetchNewQuotes:()=>{tt&&nt(tt,{stx_enabled:ce,token_symbol_source:(null==ee?void 0:ee.symbol)??"",token_symbol_destination:(null==ne?void 0:ne.symbol)??"",security_warnings:[]})},needsDestinationAddress:Ze&&!Fe})))),a.default.createElement(x.Column,{paddingInline:4,gap:4,backgroundColor:f.BackgroundColor.backgroundDefault},Ee&&_e&&we&&be&&a.default.createElement(p.BannerAlert,{title:K("hardwareWalletSubmissionWarningTitle"),textAlign:f.TextAlign.Left},a.default.createElement("ul",{style:{listStyle:"disc"}},a.default.createElement("li",null,a.default.createElement(p.Text,{variant:f.TextVariant.bodyMd},K("hardwareWalletSubmissionWarningStep1",[we]))),a.default.createElement("li",null,a.default.createElement(p.Text,{variant:f.TextVariant.bodyMd},K("hardwareWalletSubmissionWarningStep2",[we]))))),Oe&&be&&a.default.createElement(p.BannerAlert,{severity:p.BannerAlertSeverity.Danger,title:K(Oe.titleId),description:`${Oe.description} ${K(Oe.descriptionId)}`,textAlign:f.TextAlign.Left}),Qe&&ne&&ot&&Boolean(at)&&Number(at)<((dt=null==re?void 0:re.chainId)?j.TOKEN_OCCURRENCES_MAP[dt]??j.MINIMUM_TOKEN_OCCURRENCES:j.MINIMUM_TOKEN_OCCURRENCES)&&a.default.createElement(p.BannerAlert,{severity:p.BannerAlertSeverity.Warning,title:K("bridgeTokenCannotVerifyTitle"),description:K("bridgeTokenCannotVerifyDescription"),textAlign:f.TextAlign.Left,onClose:()=>Ke(!1)}),Ne&&ze&&a.default.createElement(p.BannerAlert,{title:Ne.titleId?K(Ne.titleId):"",severity:Ne.type===P.TokenFeatureType.MALICIOUS?p.BannerAlertSeverity.Danger:p.BannerAlertSeverity.Warning,description:Ne.descriptionId?K(Ne.descriptionId):Ne.description,textAlign:f.TextAlign.Left,onClose:()=>He(!1)}),!fe&&be&&!De&&Pe&&a.default.createElement(p.BannerAlert,{title:K("bridgeValidationInsufficientGasTitle",[Ie]),severity:p.BannerAlertSeverity.Danger,description:K(X?"swapValidationInsufficientGasMessage":"bridgeValidationInsufficientGasMessage",[Ie]),textAlign:f.TextAlign.Left,actionButtonLabel:K("buyMoreAsset",[Ie]),actionButtonOnClick:()=>Be()}),Me&&Ve&&be&&a.default.createElement(p.BannerAlert,{title:K("lowEstimatedReturnTooltipTitle"),severity:p.BannerAlertSeverity.Warning,description:K("lowEstimatedReturnTooltipMessage",[100*c.BRIDGE_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE]),textAlign:f.TextAlign.Left,onClose:()=>Ge(!1)}),a.default.createElement("div",{ref:Ye})),rt&&it&&a.default.createElement("div",{style:{position:"absolute",bottom:50,left:"50%",transform:"translateX(-50%)",zIndex:1e3,width:"100%",display:"flex",justifyContent:"center"}},a.default.createElement(B.ToastContainer,null,a.default.createElement(B.Toast,{key:ct,text:K("bridgeBlockExplorerLinkCopied"),onClose:()=>st(!1),autoHideTime:2500,startAdornment:a.default.createElement(p.AvatarFavicon,{name:it.symbol,size:p.AvatarFaviconSize.Sm,src:it.image})}))));var dt}}}},{package:"$root$",file:"ui/pages/bridge/prepare/prepare-bridge-page.tsx"}],[7141,{"../../../components/component-library":6325,"../../../ducks/bridge/actions":6871,"../../../ducks/bridge/selectors":6873,"../../../ducks/locale/locale":6882,"../../../ducks/metamask/metamask":6883,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"../../../hooks/useMultichainSelector":7057,"../../../selectors/multichain":7895,"../layout":7128,"../utils/quote":7156,"@metamask/bridge-controller":1304,"@metamask/snaps-sdk/jsx":2751,"bignumber.js":3768,lodash:4635,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BridgeQuotesModal=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("@metamask/snaps-sdk/jsx"),s=e("react-redux"),i=e("lodash"),l=e("@metamask/bridge-controller"),c=e("bignumber.js"),u=e("../../../components/component-library"),d=e("../../../helpers/constants/design-system"),m=e("../utils/quote"),p=e("../../../hooks/useI18nContext"),f=e("../../../ducks/bridge/actions"),g=e("../../../ducks/bridge/selectors"),h=e("../layout"),y=e("../../../ducks/metamask/metamask"),v=e("../../../ducks/locale/locale"),b=e("../../../selectors/multichain"),k=e("../../../hooks/useMultichainSelector");function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x.apply(null,arguments)}n.BridgeQuotesModal=({onClose:e,...t})=>{const n=(0,p.useI18nContext)(),a=(0,s.useDispatch)(),T=(0,s.useSelector)(g.getFromToken),C=(0,s.useSelector)(g.getToToken),E=(0,s.useSelector)(g.getFromChain),{insufficientBal:w}=(0,s.useSelector)(g.getQuoteRequest),_=(0,s.useSelector)(g.getIsStxEnabled),{sortedQuotes:S,activeQuote:I,recommendedQuote:M}=(0,s.useSelector)(g.getBridgeQuotes),A=(0,s.useSelector)(g.getBridgeSortOrder),P=(0,s.useSelector)(y.getCurrentCurrency),D=(0,k.useMultichainSelector)(b.getMultichainNativeCurrency),O=(0,s.useSelector)(v.getIntlLocale);return o.default.createElement(u.Modal,x({className:"quotes-modal",onClose:e},t),o.default.createElement(u.ModalOverlay,null),o.default.createElement(u.ModalContent,{modalDialogProps:{padding:0}},o.default.createElement(u.ModalHeader,{onBack:e},o.default.createElement(u.Text,{variant:d.TextVariant.headingSm,textAlign:d.TextAlign.Center},n("swapSelectAQuote"))),o.default.createElement(h.Row,{paddingTop:3,paddingBottom:1,paddingInline:4},[[l.SortOrder.COST_ASC,n("bridgeNetCost"),r.IconName.Arrow2Up],[l.SortOrder.ETA_ASC,n("time"),r.IconName.Arrow2Down]].map(([e,t,n])=>o.default.createElement(u.ButtonLink,{key:t,onClick:()=>{var t,n,o;a((0,f.setSortOrder)(e)),E&&M&&a((0,f.trackUnifiedSwapBridgeEvent)(l.UnifiedSwapBridgeEventName.AllQuotesSorted,{can_submit:!w,sort_order:A,price_impact:Number((null===(t=M.quote)||void 0===t||null===(t=t.priceData)||void 0===t?void 0:t.priceImpact)??"0"),gas_included:Boolean(null==M||null===(n=M.quote)||void 0===n?void 0:n.gasIncluded),gas_included_7702:Boolean(null==M||null===(o=M.quote)||void 0===o?void 0:o.gasIncluded7702),token_symbol_source:(null==T?void 0:T.symbol)??(0,l.getNativeAssetForChainId)(E.chainId).symbol,token_symbol_destination:(null==C?void 0:C.symbol)??null,stx_enabled:_,best_quote_provider:(0,l.formatProviderLabel)(M.quote)}))},startIconName:A===e&&A===l.SortOrder.ETA_ASC?n:undefined,startIconProps:{size:u.IconSize.Xs},endIconName:A===e&&A===l.SortOrder.COST_ASC?n:undefined,endIconProps:{size:u.IconSize.Xs},color:A===e?d.TextColor.primaryDefault:d.TextColor.textAlternative},o.default.createElement(u.Text,{variant:A===e?d.TextVariant.bodySmMedium:d.TextVariant.bodySm,color:A===e?d.TextColor.primaryDefault:d.TextColor.textAlternative},t)))),o.default.createElement(h.Column,{style:{overflow:"scroll"}},S.map((t,r)=>{const{totalNetworkFee:s,estimatedProcessingTimeInSeconds:p,toTokenAmount:g,cost:y,sentAmount:v,quote:{destAsset:b,bridges:k,requestId:x,gasIncluded:T,gasIncluded7702:C}}=t,E=C||T,_=x===(null==I?void 0:I.quote.requestId),S=x===(null==M?void 0:M.quote.requestId);return o.default.createElement(h.Row,{alignItems:d.AlignItems.flexStart,key:r,backgroundColor:_?d.BackgroundColor.primaryMuted:undefined,onClick:()=>{var n,o,r,s;a((0,f.setSelectedQuote)(t)),a((0,f.trackUnifiedSwapBridgeEvent)(l.UnifiedSwapBridgeEventName.QuoteSelected,{can_submit:!w,is_best_quote:S,best_quote_provider:(0,l.formatProviderLabel)(null==t?void 0:t.quote),usd_quoted_gas:Number((null===(n=t.gasFee)||void 0===n||null===(n=n.effective)||void 0===n?void 0:n.usd)??0),quoted_time_minutes:t.estimatedProcessingTimeInSeconds/60,usd_quoted_return:Number(t.toTokenAmount.usd),provider:(0,l.formatProviderLabel)(t.quote),price_impact:Number((null===(o=t.quote)||void 0===o||null===(o=o.priceData)||void 0===o?void 0:o.priceImpact)??"0"),gas_included:Boolean(null===(r=t.quote)||void 0===r?void 0:r.gasIncluded),gas_included_7702:Boolean(null===(s=t.quote)||void 0===s?void 0:s.gasIncluded7702)})),e()},paddingInline:4,paddingTop:3,paddingBottom:3,style:{position:"relative"}},_&&o.default.createElement(h.Column,{style:{position:"absolute",left:4,top:4,height:"calc(100% - 8px)",width:4,borderRadius:8},backgroundColor:d.BackgroundColor.primaryDefault}),o.default.createElement(h.Column,null,o.default.createElement(u.Text,{variant:d.TextVariant.bodyMd},E?(0,m.formatCurrencyAmount)(new c.BigNumber(v.valueInCurrency??0).minus(g.valueInCurrency??0).toString(),P,2):(0,m.formatCurrencyAmount)(y.valueInCurrency,P,2)),[E&&null!=v&&v.valueInCurrency?n("quotedTotalCost",[(0,m.formatCurrencyAmount)(v.valueInCurrency,P,2)]):undefined,!E&&(null!=s&&s.valueInCurrency&&null!=v&&v.valueInCurrency?n("quotedTotalCost",[(0,m.formatCurrencyAmount)(new c.BigNumber(s.valueInCurrency).plus(v.valueInCurrency).toString(),P,2)]):n("quotedTotalCost",[(0,m.formatTokenAmount)(O,s.amount,D)])),n("quotedReceiveAmount",[(0,m.formatCurrencyAmount)(g.valueInCurrency,P,2)??(0,m.formatTokenAmount)(O,g.amount,b.symbol)])].filter(Boolean).map(e=>o.default.createElement(u.Text,{key:e,variant:d.TextVariant.bodyXsMedium,color:d.TextColor.textAlternative},e))),o.default.createElement(h.Column,{alignItems:d.AlignItems.flexEnd},o.default.createElement(u.Text,{variant:d.TextVariant.bodyMd},n("bridgeTimingMinutes",[(0,l.formatEtaInMinutes)(p)])),o.default.createElement(u.Text,{variant:d.TextVariant.bodyXsMedium,color:d.TextColor.textAlternative},(0,i.startCase)(k[0]))))}))))}}}},{package:"$root$",file:"ui/pages/bridge/quotes/bridge-quotes-modal.tsx"}],[7142,{"../../../components/app/rewards/AddRewardsAccount":6047,"../../../components/app/rewards/RewardsBadge":6048,"../../../components/component-library":6325,"../../../components/component-library/skeleton":6371,"../../../ducks/bridge/actions":6871,"../../../ducks/bridge/selectors":6873,"../../../ducks/bridge/utils":6874,"../../../ducks/locale/locale":6882,"../../../ducks/metamask/metamask":6883,"../../../helpers/constants/design-system":6899,"../../../hooks/bridge/useCountdownTimer":6970,"../../../hooks/bridge/useRewards":6973,"../../../hooks/useI18nContext":7047,"../layout":7128,"../utils/price-impact":7155,"../utils/quote":7156,"./bridge-quotes-modal":7141,"@metamask/bridge-controller":1304,"bignumber.js":3768,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainBridgeQuoteCard=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),s=e("bignumber.js"),i=e("@metamask/bridge-controller"),l=e("../../../ducks/bridge/utils"),c=e("../../../components/component-library"),u=e("../../../ducks/bridge/selectors"),d=e("../../../hooks/useI18nContext"),m=e("../utils/quote"),p=e("../../../ducks/metamask/metamask"),f=e("../../../helpers/constants/design-system"),g=e("../layout"),h=e("../../../ducks/bridge/actions"),y=e("../../../ducks/locale/locale"),v=e("../../../hooks/bridge/useCountdownTimer"),b=e("../utils/price-impact"),k=e("../../../hooks/bridge/useRewards"),x=e("../../../components/app/rewards/RewardsBadge"),T=(a=e("../../../components/app/rewards/AddRewardsAccount"))&&a.__esModule?a:{default:a},C=e("../../../components/component-library/skeleton"),E=e("./bridge-quotes-modal");function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}n.MultichainBridgeQuoteCard=({onOpenSlippageModal:e,onOpenRecipientModal:t,selectedDestinationAccount:n})=>{var a,w,_,S,I,M,A,P;const D=(0,d.useI18nContext)(),{activeQuote:O,isQuoteGoingToRefresh:B,isLoading:N}=(0,r.useSelector)(u.getBridgeQuotes),F=(0,r.useSelector)(p.getCurrentCurrency),{insufficientBal:R}=(0,r.useSelector)(u.getQuoteRequest),j=(0,r.useSelector)(u.getFromChain),L=(0,r.useSelector)(y.getIntlLocale),$=(0,r.useSelector)(u.getIsStxEnabled),W=(0,r.useSelector)(u.getFromToken),q=(0,r.useSelector)(u.getToToken),U=(0,r.useSelector)(u.getSlippage),V=(0,r.useSelector)(u.getIsSolanaSwap),G=(0,r.useDispatch)(),z=(0,r.useSelector)(u.getIsToOrFromNonEvm),[H,Q]=(0,o.useState)(!1),K=(0,r.useSelector)(u.getPriceImpactThresholds),J=null==O||null===(a=O.quote)||void 0===a||null===(a=a.priceData)||void 0===a?void 0:a.priceImpact,X=(null==O||null===(w=O.quote)||void 0===w?void 0:w.gasIncluded)??!1,Y=(null==O||null===(_=O.quote)||void 0===_?void 0:_.gasIncluded7702)??!1,Z=(null==O||null===(S=O.quote)||void 0===S?void 0:S.gasSponsored)??!1,ee=Y||X||Z,te=j?(0,i.getNativeAssetForChainId)(j.chainId).symbol:"",ne=(0,o.useMemo)(()=>K&&J!==undefined&&null!==J,[K,J]),ae=o.default.useMemo(()=>{if(!ne)return!1;const e=ee?null==K?void 0:K.gasless:null==K?void 0:K.normal;return null!==e&&e!==undefined&&Number(J)>=Number(e)},[ee,J,ne,K]),oe=(0,v.useCountdownTimer)(),{isLoading:re,estimatedPoints:se,shouldShowRewardsRow:ie,hasError:le,rewardsAccountScope:ce,accountOptedIn:ue}=(0,k.useRewards)({activeQuote:N?null:(null==O?void 0:O.quote)??null});return O?o.default.createElement(o.default.Fragment,null,o.default.createElement(E.BridgeQuotesModal,{isOpen:H,onClose:()=>Q(!1)}),o.default.createElement(g.Column,{gap:2},o.default.createElement(g.Row,{justifyContent:f.JustifyContent.spaceBetween},o.default.createElement(g.Row,{gap:2},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},D("multichainQuoteCardRateLabel")),B&&o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:(de=oe,de<=3?f.TextColor.errorDefault:de<=5?f.TextColor.warningDefault:f.TextColor.textAlternative)},`(0:${oe<10?"0":""}${oe})`),o.default.createElement(g.Tooltip,{title:D("multichainQuoteCardRateLabel"),position:c.PopoverPosition.TopStart,offset:[-16,16]},D("multichainQuoteCardRateExplanation",[new s.BigNumber(O.quote.feeData.metabridge.amount).gt(0)?(0,l.bpsToPercentage)(O.quote.feeData.metabridge.quoteBpsFee)??i.BRIDGE_MM_FEE_RATE:"0"]))),o.default.createElement(g.Row,{gap:1},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},`1 ${O.quote.srcAsset.symbol} = ${(0,m.formatTokenAmount)(L,O.swapRate)} ${O.quote.destAsset.symbol}`),o.default.createElement(c.ButtonIcon,{iconName:c.IconName.ArrowRight,size:c.ButtonIconSize.Sm,color:f.IconColor.iconAlternative,onClick:()=>{var e,t,n;(null==j?void 0:j.chainId)&&O&&G((0,h.trackUnifiedSwapBridgeEvent)(i.UnifiedSwapBridgeEventName.AllQuotesOpened,{can_submit:!R,stx_enabled:$,token_symbol_source:(null==W?void 0:W.symbol)??(0,i.getNativeAssetForChainId)(j.chainId).symbol,token_symbol_destination:(null==q?void 0:q.symbol)??null,price_impact:Number((null===(e=O.quote)||void 0===e||null===(e=e.priceData)||void 0===e?void 0:e.priceImpact)??"0"),gas_included:Boolean(null===(t=O.quote)||void 0===t?void 0:t.gasIncluded),gas_included_7702:Boolean(null===(n=O.quote)||void 0===n?void 0:n.gasIncluded7702)})),Q(!0)},ariaLabel:D("moreQuotes")}))),(!z||(null===(I=O.totalNetworkFee)||void 0===I?void 0:I.valueInCurrency)&&"0"!==O.totalNetworkFee.valueInCurrency)&&o.default.createElement(g.Row,{justifyContent:f.JustifyContent.spaceBetween},o.default.createElement(g.Row,{gap:2},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},D("networkFee")),o.default.createElement(g.Tooltip,{title:D("networkFeeExplanationTitle"),position:c.PopoverPosition.TopStart,offset:[-16,16]},D("networkFeeExplanation"))),Z&&o.default.createElement(g.Row,{gap:1,"data-testid":"network-fees-sponsored"},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textDefault},D("swapGasFeesSponsored")),o.default.createElement(g.Tooltip,{title:D("swapGasFeesSponsored"),position:c.PopoverPosition.TopStart,offset:[-16,16]},D("swapGasFeesSponsoredExplanation",[te]))),!Z&&O.quote.gasIncluded&&o.default.createElement(g.Row,{gap:1,"data-testid":"network-fees-included"},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative,style:{textDecoration:"line-through"}},null!==(M=O.includedTxFees)&&void 0!==M&&M.valueInCurrency?(0,m.formatNetworkFee)(O.includedTxFees.valueInCurrency,F):(0,m.formatNetworkFee)(null===(A=O.totalNetworkFee)||void 0===A?void 0:A.valueInCurrency,F)),o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},D("swapGasFeesIncluded"))),!Z&&!O.quote.gasIncluded&&o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative,"data-testid":"network-fees"},(0,m.formatNetworkFee)(null===(P=O.totalNetworkFee)||void 0===P?void 0:P.valueInCurrency,F))),o.default.createElement(g.Row,{justifyContent:f.JustifyContent.spaceBetween},o.default.createElement(g.Row,{gap:2},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},D("slippage")),o.default.createElement(g.Tooltip,{title:D("slippage"),position:c.PopoverPosition.TopStart,offset:[-16,16]},D("slippageExplanation"))),o.default.createElement(g.Row,{gap:1},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},U===undefined&&V?D("slippageAuto"):`${U}%`),o.default.createElement(c.ButtonIcon,{iconName:c.IconName.Edit,size:c.ButtonIconSize.Sm,color:f.IconColor.iconAlternative,onClick:e,ariaLabel:D("slippageEditAriaLabel"),"data-testid":"slippage-edit-button"}))),O.minToTokenAmount.valueInCurrency&&o.default.createElement(g.Row,{justifyContent:f.JustifyContent.spaceBetween},o.default.createElement(g.Row,{gap:2},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},D("minimumReceivedLabel")),o.default.createElement(g.Tooltip,{style:{width:350},title:D("minimumReceivedExplanationTitle"),position:c.PopoverPosition.TopStart,offset:[-48,16]},D("minimumReceivedExplanation"))),o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative,"data-testid":"minimum-received"},(0,m.formatCurrencyAmount)(O.minToTokenAmount.valueInCurrency,F,2))),ne&&ae&&o.default.createElement(g.Row,{justifyContent:f.JustifyContent.spaceBetween},o.default.createElement(g.Row,{gap:2},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},D("bridgePriceImpact")),o.default.createElement(g.Tooltip,{title:D(ae?"bridgePriceImpactWarningTitle":"bridgePriceImpactTooltipTitle"),position:c.PopoverPosition.TopStart,offset:[-16,16]},D("bridgePriceImpactNormalWarning"))),o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:ae?f.TextColor.errorDefault:f.TextColor.textAlternative},(0,b.formatPriceImpact)(J))),z&&n&&o.default.createElement(g.Row,{justifyContent:f.JustifyContent.spaceBetween},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},D("recipient")),o.default.createElement(g.Row,{gap:1},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},`${n.walletName?`${n.walletName} / `:""}${n.displayName}`),o.default.createElement(c.ButtonIcon,{iconName:c.IconName.Edit,size:c.ButtonIconSize.Sm,color:f.IconColor.iconAlternative,onClick:t,ariaLabel:D("recipientEditAriaLabel"),"data-testid":"recipient-edit-button"}))),ie&&o.default.createElement(g.Row,{justifyContent:f.JustifyContent.spaceBetween,"data-testid":"rewards-row"},o.default.createElement(g.Row,{gap:2},o.default.createElement(c.Text,{variant:f.TextVariant.bodySm,color:f.TextColor.textAlternative},D("bridgePoints")),o.default.createElement(g.Tooltip,{title:D("bridgePoints_tooltip"),position:c.PopoverPosition.TopStart,offset:[-16,16]},`${D("bridgePoints_tooltip_content_1")}\n\n${D("bridgePoints_tooltip_content_2")}`)),o.default.createElement(g.Row,{gap:1},re||N?o.default.createElement(C.Skeleton,{width:100,height:16,"data-testid":"rewards-loading-skeleton"}):null,!re&&!N&&le&&o.default.createElement(g.Row,{"data-testid":"rewards-error-state"},o.default.createElement(x.RewardsBadge,{formattedPoints:D("bridgePoints_couldntLoad"),withPointsSuffix:!1,boxClassName:"gap-1 bg-background-transparent",textClassName:"text-alternative",useAlternativeIconColor:!0}),o.default.createElement(g.Tooltip,{title:D("bridgePoints_error"),iconName:c.IconName.Warning,color:f.IconColor.warningDefault,position:c.PopoverPosition.TopEnd,offset:[-16,16],style:{width:350}},D("bridgePoints_error_content"))),!re&&!N&&!le&&o.default.createElement(o.default.Fragment,null,ce&&!1===ue?o.default.createElement(T.default,{account:ce}):o.default.createElement(x.RewardsBadge,{formattedPoints:new Intl.NumberFormat(L).format(se??0),withPointsSuffix:!1,boxClassName:"gap-1 bg-background-transparent",textClassName:"text-alternative",useAlternativeIconColor:!se})))))):null;var de}}}},{package:"$root$",file:"ui/pages/bridge/quotes/multichain-bridge-quote-card.tsx"}],[7143,{"./token-insights-modal":7144},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"TokenInsightsModal",{enumerable:!0,get:function(){return a.TokenInsightsModal}});var a=e("./token-insights-modal")}}},{package:"$root$",file:"ui/pages/bridge/token-insights-modal/index.ts"}],[7144,{"../../../../shared/constants/metametrics":5613,"../../../components/component-library":6325,"../../../components/multichain/address-copy-button":6473,"../../../contexts/metametrics":6855,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/token-insights":6954,"../../../hooks/useI18nContext":7047,"../../../hooks/useTokenInsightsData":7083,"@metamask/design-system-react":1741,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TokenInsightsModal=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/design-system-react"),r=e("../../../components/component-library"),s=e("../../../components/multichain/address-copy-button"),i=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),c=e("../../../hooks/useTokenInsightsData"),u=e("../../../helpers/utils/token-insights"),d=e("../../../../shared/constants/metametrics"),m=e("../../../contexts/metametrics");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const f=({label:e,value:t,"data-testid":n})=>a.default.createElement(o.Box,{marginBottom:3,"data-testid":n,flexDirection:o.BoxFlexDirection.Row,alignItems:o.BoxAlignItems.Center,justifyContent:o.BoxJustifyContent.Between},a.default.createElement(o.Text,{variant:o.TextVariant.BodyMd,color:o.TextColor.TextAlternative},e),a.default.createElement(o.Box,{alignItems:o.BoxAlignItems.Center},t));n.TokenInsightsModal=({isOpen:e,onClose:t,token:n})=>{const p=(0,l.useI18nContext)(),g=a.default.useContext(m.MetaMetricsContext),h=a.default.useRef(null),y=a.default.useRef(!1),{marketData:v,marketDataFiat:b}=(0,c.useTokenInsightsData)(n);(0,a.useEffect)(()=>{e&&n&&!y.current&&(y.current=!0,g({event:"Token Insights Modal Opened",category:d.MetaMetricsEventCategory.Swaps,properties:{token_symbol:n.symbol,token_address:n.address,chain_id:n.chainId}})),e||(y.current=!1)},[e,n,g]),(0,a.useEffect)(()=>{if(!e)return()=>undefined;const n=e=>{const n=h.current;n&&!n.contains(e.target)&&(t(),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault())};return document.addEventListener("mousedown",n,!0),()=>{document.removeEventListener("mousedown",n,!0)}},[e,t]);const k=(null==v?void 0:v.pricePercentChange1d)||0,x=(0,a.useCallback)(()=>{n&&g({event:"Token Contract Address Copied",category:d.MetaMetricsEventCategory.Swaps,properties:{token_symbol:n.symbol,token_address:n.address}})},[n,g]);return n?a.default.createElement(r.Modal,{isOpen:e,onClose:t,className:"token-insights-modal"},a.default.createElement(r.ModalOverlay,null),a.default.createElement(r.ModalContent,{onClick:e=>e.stopPropagation(),onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),modalDialogProps:{ref:h,onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation()}},a.default.createElement(r.ModalHeader,{onClose:t,paddingBottom:4,childrenWrapperProps:{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,alignItems:i.AlignItems.center,gap:2}},a.default.createElement(o.AvatarToken,{src:n.iconUrl,name:n.symbol,size:o.AvatarTokenSize.Lg,"data-testid":"token-insights-icon"}),a.default.createElement(o.Text,{variant:o.TextVariant.HeadingSm},n.symbol||n.name," ",p("insights"))),a.default.createElement(o.Box,{paddingRight:4,paddingLeft:4},a.default.createElement(o.Box,{flexDirection:o.BoxFlexDirection.Column},a.default.createElement(f,{label:p("price"),value:a.default.createElement(o.Text,{variant:o.TextVariant.BodyMd},(null==b?void 0:b.formattedPrice)||""),"data-testid":"token-price"}),a.default.createElement(f,{label:p("percentChange"),value:a.default.createElement(o.Box,{flexDirection:o.BoxFlexDirection.Row,alignItems:o.BoxAlignItems.Center,gap:1},0!==k&&a.default.createElement(o.Icon,{name:k>0?o.IconName.Arrow2Up:o.IconName.Arrow2Down,color:k>0?o.IconColor.SuccessDefault:o.IconColor.ErrorDefault,size:o.IconSize.Sm}),a.default.createElement(o.Text,{variant:o.TextVariant.BodyMd,color:(0,u.getPriceChangeColor)(k)},(0,u.formatPercentage)(k))),"data-testid":"token-price-change"}),a.default.createElement(f,{label:p("volume"),value:a.default.createElement(o.Text,{variant:o.TextVariant.BodyMd},(null==b?void 0:b.formattedVolume)||""),"data-testid":"token-volume"}),a.default.createElement(f,{label:p("marketCapFDV"),value:a.default.createElement(o.Text,{variant:o.TextVariant.BodyMd},(null==b?void 0:b.formattedMarketCap)||""),"data-testid":"token-market-cap"}),(0,u.shouldShowContractAddress)(n.address)&&a.default.createElement(f,{label:p("contractAddress"),value:a.default.createElement(o.Box,{onClick:e=>{e.stopPropagation(),x()},onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation()},a.default.createElement(s.AddressCopyButton,{address:(0,u.formatContractAddress)(n.address),shorten:!0})),"data-testid":"token-contract-address"}))))):null}}}},{package:"$root$",file:"ui/pages/bridge/token-insights-modal/token-insights-modal.tsx"}],[7145,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"./segment":7151,"@metamask/bridge-controller":1304,"@metamask/transaction-controller":2868,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeTxHistoryItem:e,transactionGroup:t}){const n=(0,l.useI18nContext)(),{initialTransaction:o}=t,r=m(o),u=p({bridgeTxHistoryItem:e,srcTxStatus:r}),f=d(r);return a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,gap:2},a.default.createElement(s.Text,{color:i.TextColor.textAlternative},n("bridgeTransactionProgress",[f])),a.default.createElement(s.Box,{display:i.Display.Flex,gap:2,width:i.BlockSize.Full},a.default.createElement(c.default,{type:r}),a.default.createElement(c.default,{type:u})))};var a=u(e("react")),o=e("@metamask/transaction-controller"),r=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),c=u(e("./segment"));function u(e){return e&&e.__esModule?e:{default:e}}const d=e=>{if(e===r.StatusTypes.PENDING)return 1;if(e===r.StatusTypes.COMPLETE)return 2;throw new Error("No more possible states for srcTxStatus")},m=e=>e.status===o.TransactionStatus.confirmed?r.StatusTypes.COMPLETE:r.StatusTypes.PENDING,p=({bridgeTxHistoryItem:e,srcTxStatus:t})=>{var n;return t!==r.StatusTypes.COMPLETE?null:null!=e&&null!==(n=e.status.destChain)&&void 0!==n&&n.txHash&&e.status.status===r.StatusTypes.COMPLETE?r.StatusTypes.COMPLETE:r.StatusTypes.PENDING}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-activity-item-tx-segments.tsx"}],[7146,{"../../../../shared/constants/common":5601,"../../../components/component-library":6325,"../../../components/multichain/menu-items/view-explorer-menu-item":6572,"../../../contexts/metametrics":6855,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"@metamask/bridge-controller":1304,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({srcChainId:e,destChainId:t,srcBlockExplorerUrl:n,destBlockExplorerUrl:o}){const r=(0,a.useContext)(l.MetaMetricsContext),d=(0,u.useI18nContext)(),f=d("bridgeExplorerLinkViewOn",[m(e,n)]),g=o?d("bridgeExplorerLinkViewOn",[m(t,o)]):undefined;return a.default.createElement(s.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,gap:4},n&&a.default.createElement(s.ButtonSecondary,{endIconName:s.IconName.Export,onClick:()=>{n&&(0,i.openBlockExplorer)(n,p,r)}},f),o&&a.default.createElement(s.ButtonSecondary,{endIconName:s.IconName.Export,onClick:()=>{o&&(0,i.openBlockExplorer)(o,p,r)}},g))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/bridge-controller"),r=e("../../../../shared/constants/common"),s=e("../../../components/component-library"),i=e("../../../components/multichain/menu-items/view-explorer-menu-item"),l=e("../../../contexts/metametrics"),c=e("../../../helpers/constants/design-system"),u=e("../../../hooks/useI18nContext");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const m=(e,t)=>{const n=e&&!(0,o.isNonEvmChainId)(e)?(0,o.formatChainIdToHex)(e):undefined,a=n?r.CHAINID_DEFAULT_BLOCK_EXPLORER_HUMAN_READABLE_URL_MAP[n]:undefined;return a||(t?t.split("/")[2]:undefined)},p="Activity Tab"}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-explorer-links.tsx"}],[7147,{"../../../../shared/constants/bridge":5600,"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"@metamask/bridge-controller":1304,"@metamask/transaction-controller":2868,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({step:e,time:t,stepStatus:n}){const o=(0,l.useI18nContext)();return a.createElement(s.Box,{display:i.Display.Flex,alignItems:i.AlignItems.center,gap:2,className:"bridge-transaction-details__step-grid--desc"},t&&a.createElement(s.Text,{color:i.TextColor.textDefault},t),a.createElement(s.Text,{color:n===r.StatusTypes.PENDING||n===r.StatusTypes.COMPLETE?i.TextColor.textDefault:i.TextColor.textAlternative,fontWeight:n===r.StatusTypes.PENDING?i.FontWeight.Medium:i.FontWeight.Normal},e.action===r.ActionTypes.BRIDGE&&d(o,n,e),e.action===r.ActionTypes.SWAP&&m(o,n,e)))},n.getStepStatus=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/transaction-controller"),r=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=e("../../../hooks/useI18nContext"),c=e("../../../../shared/constants/bridge");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d=(e,t,n)=>{var a;if(!n.destChainId)return null;const o=(0,r.formatChainIdToCaip)(n.destChainId),s=c.NETWORK_TO_SHORT_NETWORK_NAME_MAP[o],i=null===(a=n.destAsset)||void 0===a?void 0:a.symbol;return i?t===r.StatusTypes.COMPLETE?e("bridgeStepActionBridgeComplete",[i,s]):e("bridgeStepActionBridgePending",[i,s]):null},m=(e,t,n)=>{var a,o;const s=null===(a=n.srcAsset)||void 0===a?void 0:a.symbol,i=null===(o=n.destAsset)||void 0===o?void 0:o.symbol;return s&&i?t===r.StatusTypes.COMPLETE?e("bridgeStepActionSwapComplete",[s,i]):e("bridgeStepActionSwapPending",[s,i]):null};n.getStepStatus=({bridgeHistoryItem:e,step:t,srcChainTxMeta:n})=>e?t.action===r.ActionTypes.SWAP?((e,t,n)=>{const a=t.srcChainId===t.destChainId,s=t.srcChainId===e.quote.srcChainId;if(a&&s)return(null==n?void 0:n.status)===o.TransactionStatus.confirmed?r.StatusTypes.COMPLETE:r.StatusTypes.PENDING;return(null==n?void 0:n.status)===o.TransactionStatus.confirmed&&e.status?e.status.status:null})(e,t,n):t.action===r.ActionTypes.BRIDGE?(e=>e.status?e.status.status:null)(e):r.StatusTypes.UNKNOWN:r.StatusTypes.UNKNOWN}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-step-description.tsx"}],[7148,{"../../../components/component-library":6325,"../../../helpers/utils/util":6959,"./bridge-step-description":7147,"./step-progress-bar-item":7152,"@metamask/bridge-controller":1304,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({bridgeHistoryItem:e,srcChainTxMeta:t}){const n=(null==e?void 0:e.quote.steps)||[],c=n.map(n=>(0,i.getStepStatus)({bridgeHistoryItem:e,step:n,srcChainTxMeta:t}));return a.default.createElement(r.Box,{className:"bridge-transaction-details__step-grid"},n.map((r,u)=>{const m=u>0?c[u-1]:null,p=c[u],f=u<c.length-1?c[u+1]:null,g=p===o.StatusTypes.COMPLETE&&(f===o.StatusTypes.PENDING||f===o.StatusTypes.COMPLETE),h=m===o.StatusTypes.PENDING&&p===o.StatusTypes.PENDING?null:p,y=(0,s.formatDate)(d(u,u===n.length-1,(null==e?void 0:e.startTime)||(null==t?void 0:t.time),(null==e?void 0:e.estimatedProcessingTimeInSeconds)||0),"hh:mm a");return a.default.createElement(l.default,{key:`progress-${r.action}-${r.srcChainId}-${r.destChainId}`,stepStatus:h,isLastItem:u===n.length-1,isEdgeComplete:g},a.default.createElement(i.default,{step:r,stepStatus:h,time:y}))}))};var a=u(e("react")),o=e("@metamask/bridge-controller"),r=e("../../../components/component-library"),s=e("../../../helpers/utils/util"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("./bridge-step-description")),l=u(e("./step-progress-bar-item"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}const d=(e,t,n,a)=>0===e?n:t&&n&&a?n+1e3*a:undefined}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/bridge-step-list.tsx"}],[7149,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,classnames:3913,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=(a=e("classnames"))&&a.__esModule?a:{default:a},s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const c=o.forwardRef(({size:e=s.IconSize.Md,color:t,className:n="",style:a},l)=>o.createElement(s.Box,{className:(0,r.default)(n,"mm-icon",`mm-icon--size-${e}`),ref:l,as:"span",display:i.Display.InlineBlock,style:{height:"12px",width:"12px",border:`1px solid var(--color-${t})`,borderRadius:"50%",backgroundColor:`var(--color-${i.BackgroundColor.backgroundDefault})`,zIndex:1,...a}}));n.default=c}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/hollow-circle.tsx"}],[7150,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"./hollow-circle":7149,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({iconSize:e,color:t}){return a.default.createElement(o.Box,{style:{position:"relative"}},a.default.createElement(o.Box,{className:"bridge-transaction-details__icon-loading",backgroundColor:r.BackgroundColor.primaryMuted,display:r.Display.Flex,justifyContent:r.JustifyContent.center,alignItems:r.AlignItems.center,borderRadius:r.BorderRadius.full,style:{width:"2rem",height:"2rem"}}),a.default.createElement(s.default,{size:e,color:t,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",borderWidth:"2px"}}))};var a=i(e("react")),o=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),s=i(e("./hollow-circle"));function i(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/pulsing-circle.tsx"}],[7151,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"@metamask/bridge-controller":1304,classnames:3913,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({type:e}){return a.default.createElement(s.Box,{width:i.BlockSize.Full,backgroundColor:i.BackgroundColor.backgroundAlternative,borderRadius:i.BorderRadius.pill},a.default.createElement(s.Box,{width:i.BlockSize.Full,backgroundColor:i.BackgroundColor.primaryDefault,borderRadius:i.BorderRadius.pill,className:(0,o.default)({"bridge-transaction-details__segment":!0,"bridge-transaction-details__segment--pending":e===r.StatusTypes.PENDING,"bridge-transaction-details__segment--complete":e===r.StatusTypes.COMPLETE})}))};var a=l(e("react")),o=l(e("classnames")),r=e("@metamask/bridge-controller"),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system");function l(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/segment.tsx"}],[7152,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"./hollow-circle":7149,"./pulsing-circle":7150,"@metamask/bridge-controller":1304,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({stepStatus:e,isLastItem:t,isEdgeComplete:n,children:c}){return a.default.createElement(a.default.Fragment,null,(null===e||e===o.StatusTypes.UNKNOWN)&&a.default.createElement(i.default,{size:u,color:s.IconColor.iconMuted}),e===o.StatusTypes.PENDING&&a.default.createElement(l.default,{iconSize:u,color:s.IconColor.primaryDefault}),e===o.StatusTypes.COMPLETE&&a.default.createElement(r.Icon,{name:r.IconName.FullCircle,color:s.IconColor.primaryDefault,size:u}),c,!t&&a.default.createElement(d,{color:n?s.IconColor.primaryDefault:s.IconColor.iconMuted}),!t&&a.default.createElement("div",null))};var a=c(e("react")),o=e("@metamask/bridge-controller"),r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),i=c(e("./hollow-circle")),l=c(e("./pulsing-circle"));function c(e){return e&&e.__esModule?e:{default:e}}const u=r.IconSize.Xs,d=({color:e})=>a.default.createElement("div",{style:{height:"60px",marginTop:"-1rem",marginBottom:"-1rem",width:"1px",backgroundColor:`var(--color-${e})`,zIndex:.1}})}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/step-progress-bar-item.tsx"}],[7153,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({title:e,value:t}){return o.default.createElement(r.Box,{display:s.Display.Flex,justifyContent:s.JustifyContent.spaceBetween,"data-testid":"transaction-detail-row",width:s.BlockSize.Full},o.default.createElement(r.Text,{minWidth:s.BlockSize.Max,paddingRight:1,variant:s.TextVariant.bodyMd},e),t)};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system")}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/transaction-detail-row.tsx"}],[7154,{"../../../../shared/constants/bridge":5600,"../../../../shared/constants/metametrics":5613,"../../../../shared/modules/Numeric":5727,"../../../../shared/modules/conversion.utils":5732,"../../../components/app/confirm/info/row":5875,"../../../components/app/transaction-activity-log":6218,"../../../components/app/transaction-breakdown/transaction-breakdown-utils":6228,"../../../components/component-library":6325,"../../../components/multichain/pages/page":6674,"../../../contexts/metametrics":6855,"../../../ducks/bridge-status/selectors":6870,"../../../ducks/locale/locale":6882,"../../../helpers/constants/common":6897,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/util":6959,"../../../hooks/bridge/useBridgeChainInfo":6965,"../../../hooks/useI18nContext":7047,"../../../selectors":7886,"../../../selectors/multichain":7895,"../utils/quote":7156,"../utils/tx-details":7159,"./bridge-explorer-links":7146,"./bridge-step-list":7148,"./transaction-detail-row":7153,"@metamask/bridge-controller":1304,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("@metamask/transaction-controller"),s=e("@metamask/bridge-controller"),i=e("../../../components/component-library"),l=e("../../../components/multichain/pages/page"),c=e("../../../ducks/bridge-status/selectors"),u=P(e("../../../hooks/bridge/useBridgeChainInfo")),d=e("../../../components/app/transaction-breakdown/transaction-breakdown-utils"),m=e("../../../../shared/modules/conversion.utils"),p=e("../../../helpers/constants/common"),f=e("../../../helpers/constants/design-system"),g=e("../../../helpers/utils/util"),h=e("../../../components/app/confirm/info/row"),y=e("../../../hooks/useI18nContext"),v=e("../../../selectors"),b=e("../../../../shared/constants/metametrics"),k=e("../../../contexts/metametrics"),x=e("../../../ducks/locale/locale"),T=P(e("../../../components/app/transaction-activity-log")),C=e("../../../../shared/constants/bridge"),E=e("../../../../shared/modules/Numeric"),w=e("../../../selectors/multichain"),_=e("../utils/quote"),S=e("../utils/tx-details"),I=P(e("./transaction-detail-row")),M=P(e("./bridge-explorer-links")),A=P(e("./bridge-step-list"));function P(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}n.default=({location:e,navigate:t,params:n})=>{var P,D,O;const B=(0,y.useI18nContext)(),N=(0,o.useSelector)(x.getIntlLocale),F=(0,a.useContext)(k.MetaMetricsContext),R=(0,o.useSelector)(e=>e),j=null==n?void 0:n.srcTxMetaId,L=(0,o.useSelector)(v.selectedAddressTxListSelectorAllChain),$=(null==e||null===(P=e.state)||void 0===P?void 0:P.transactionGroup)||null,W=(null==e||null===(D=e.state)||void 0===D?void 0:D.isEarliestNonce)||null,q=L.find(e=>e.id===j),U=(0,o.useSelector)(e=>(0,c.selectBridgeHistoryItemForTxMetaId)(e,j)),V=L.find(e=>e.id===(null==U?void 0:U.approvalTxId)),{srcNetwork:G,destNetwork:z}=(0,u.default)({bridgeHistoryItem:U,srcTxMeta:q}),H=null==q?void 0:q.hash,Q=(0,S.getBlockExplorerUrl)(G,H),K=null==U||null===(O=U.status.destChain)||void 0===O?void 0:O.txHash,J=(0,S.getBlockExplorerUrl)(z,K),X=U?null==U?void 0:U.status.status:s.StatusTypes.PENDING,Y=(null==q?void 0:q.type)===r.TransactionType.bridge?X:null==q?void 0:q.status,Z=G?(0,w.getImageForChainId)(G.isEvm?(0,s.formatChainIdToHex)(G.chainId):G.chainId):undefined,ee=z?(0,w.getImageForChainId)(z.isEvm?(0,s.formatChainIdToHex)(z.chainId):z.chainId):undefined,te=C.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==G?void 0:G.chainId],ne=C.NETWORK_TO_SHORT_NETWORK_NAME_MAP[null==z?void 0:z.chainId],ae=q?(0,d.getTransactionBreakdownData)({state:R,transaction:q,isTokenApprove:!1}):undefined,oe=(0,S.getBridgeAmountSentFormatted)({bridgeHistoryItem:U,txMeta:q}),re=(0,o.useSelector)(e=>(0,c.selectReceivedSwapsTokenAmountFromTxMeta)(e,null==U?void 0:U.txMetaId,q,V)),se=(null==q?void 0:q.type)===r.TransactionType.swap&&re||(0,S.getBridgeAmountReceivedFormatted)({locale:N,bridgeHistoryItem:U,txMeta:q}),ie=(null==q?void 0:q.type)===r.TransactionType.bridge&&(0,S.getIsDelayed)(X,U),le=(0,v.getNativeTokenInfo)(R,(null==q?void 0:q.chainId)??""),ce=a.default.createElement(i.Box,{display:f.Display.Flex,gap:1,alignItems:f.AlignItems.center},G&&a.default.createElement(i.AvatarNetwork,{size:i.AvatarNetworkSize.Xs,src:Z,name:null==G?void 0:G.name}),te),ue=a.default.createElement(i.Box,{display:f.Display.Flex,gap:1,alignItems:f.AlignItems.center},z&&a.default.createElement(i.AvatarNetwork,{size:i.AvatarNetworkSize.Xs,src:ee,name:null==z?void 0:z.name}),ne);return a.default.createElement("div",{className:"bridge__container"},a.default.createElement(l.Header,{className:"bridge__header",startAccessory:a.default.createElement(i.ButtonIcon,{iconName:i.IconName.ArrowLeft,size:i.ButtonIconSize.Sm,ariaLabel:B("back"),onClick:()=>null==t?void 0:t(-1)})},B((null==q?void 0:q.type)===r.TransactionType.bridge?"bridgeDetailsTitle":"swapDetailsTitle")),a.default.createElement(l.Content,{className:"bridge-transaction-details__content"},a.default.createElement(i.Box,{display:f.Display.Flex,flexDirection:f.FlexDirection.Column,gap:4},ie&&a.default.createElement(i.BannerAlert,{title:B("bridgeTxDetailsDelayedTitle"),severity:i.BannerAlertSeverity.Warning},a.default.createElement(i.Text,{display:f.Display.Flex,alignItems:f.AlignItems.center},B("bridgeTxDetailsDelayedDescription"),"",a.default.createElement(i.ButtonLink,{externalLink:!0,href:p.SUPPORT_REQUEST_LINK,onClick:()=>{F({category:b.MetaMetricsEventCategory.Home,event:b.MetaMetricsEventName.SupportLinkClicked,properties:{url:p.SUPPORT_REQUEST_LINK,location:"Bridge Tx Details"}},{contextPropsIntoEventProperties:[b.MetaMetricsContextProp.PageTitle]})}},B("bridgeTxDetailsDelayedDescriptionSupport")),".")),Y!==s.StatusTypes.COMPLETE&&(U||q)&&a.default.createElement(A.default,{bridgeHistoryItem:U,srcChainTxMeta:q}),a.default.createElement(M.default,{srcChainId:null==G?void 0:G.chainId,destChainId:null==z?void 0:z.chainId,srcBlockExplorerUrl:Q,destBlockExplorerUrl:J}),a.default.createElement(h.ConfirmInfoRowDivider,null),a.default.createElement(i.Box,{display:f.Display.Flex,flexDirection:f.FlexDirection.Column,gap:2},a.default.createElement(I.default,{title:B("bridgeTxDetailsStatus"),value:a.default.createElement(i.Text,{textTransform:f.TextTransform.Capitalize,color:Y?S.STATUS_TO_COLOR_MAP[Y]:undefined},null==Y?void 0:Y.toLowerCase())}),(null==q?void 0:q.type)===r.TransactionType.bridge&&a.default.createElement(I.default,{title:B(Y===s.StatusTypes.COMPLETE?"bridgeTxDetailsBridged":"bridgeTxDetailsBridging"),value:a.default.createElement(i.Box,{display:f.Display.Flex,gap:1,alignItems:f.AlignItems.center,flexWrap:f.FlexWrap.Wrap,justifyContent:f.JustifyContent.flexEnd},ce,a.default.createElement(i.Icon,{name:i.IconName.Arrow2Right,size:i.IconSize.Sm}),ue)}),(null==q?void 0:q.type)===r.TransactionType.swap&&a.default.createElement(I.default,{title:B((null==q?void 0:q.status)===r.TransactionStatus.confirmed?"bridgeTxDetailsSwapped":"bridgeTxDetailsSwapping"),value:a.default.createElement(i.Box,{display:f.Display.Flex,gap:1,alignItems:f.AlignItems.center,flexWrap:f.FlexWrap.Wrap,justifyContent:f.JustifyContent.flexEnd},U&&a.default.createElement(i.AvatarToken,{size:i.AvatarTokenSize.Xs,src:(null==U?void 0:U.quote.srcAsset.iconUrl)??undefined,name:null==U?void 0:U.quote.srcAsset.symbol}),null==U?void 0:U.quote.srcAsset.symbol,a.default.createElement(i.Icon,{name:i.IconName.Arrow2Right,size:i.IconSize.Sm}),U&&a.default.createElement(i.AvatarToken,{size:i.AvatarTokenSize.Xs,src:(null==U?void 0:U.quote.destAsset.iconUrl)??undefined,name:null==U?void 0:U.quote.destAsset.symbol}),null==U?void 0:U.quote.destAsset.symbol)}),a.default.createElement(I.default,{title:B("bridgeTxDetailsTimestamp"),value:B("bridgeTxDetailsTimestampValue",[(0,g.formatDate)(null==q?void 0:q.time,"MMM d, yyyy"),(0,g.formatDate)(null==q?void 0:q.time,"hh:mm a")])})),a.default.createElement(h.ConfirmInfoRowDivider,null),a.default.createElement(i.Box,{display:f.Display.Flex,flexDirection:f.FlexDirection.Column,gap:2},a.default.createElement(I.default,{title:B("bridgeTxDetailsYouSent"),value:a.default.createElement(i.Box,{display:f.Display.Flex,gap:1,alignItems:f.AlignItems.center,flexWrap:f.FlexWrap.Wrap,justifyContent:f.JustifyContent.flexEnd},B("bridgeTxDetailsTokenAmountOnChain",[oe??"",(null==U?void 0:U.quote.srcAsset.symbol)??""]),ce)}),se&&(null==U?void 0:U.quote.destAsset.symbol)&&a.default.createElement(I.default,{title:B("bridgeTxDetailsYouReceived"),value:a.default.createElement(i.Box,{display:f.Display.Flex,gap:1,alignItems:f.AlignItems.center,flexWrap:f.FlexWrap.Wrap,justifyContent:f.JustifyContent.flexEnd},B("bridgeTxDetailsTokenAmountOnChain",[se,null==U?void 0:U.quote.destAsset.symbol]),ue)}),a.default.createElement(I.default,{title:B("bridgeTxDetailsTotalGasFee"),value:a.default.createElement(a.default.Fragment,null,(null==ae?void 0:ae.hexGasTotal)&&(null==le?void 0:le.decimals)&&(null==le?void 0:le.symbol)&&(0,_.formatTokenAmount)(N,new E.Numeric(ae.hexGasTotal,16).toBase(10).shiftedBy(le.decimals??0).toString(),null==le?void 0:le.symbol))})),a.default.createElement(h.ConfirmInfoRowDivider,null),a.default.createElement(i.Box,{display:f.Display.Flex,flexDirection:f.FlexDirection.Column,gap:2},a.default.createElement(I.default,{title:B("bridgeTxDetailsNonce"),value:null!=q&&q.txParams.nonce?(0,m.hexToDecimal)(null==q?void 0:q.txParams.nonce):undefined}),$&&void 0!==W&&a.default.createElement(T.default,{transactionGroup:$,className:"transaction-list-item-details__transaction-activity-log",isEarliestNonce:W})))))}}}},{package:"$root$",file:"ui/pages/bridge/transaction-details/transaction-details.tsx"}],[7155,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatPriceImpact=function(e){if(e===undefined||null===e)return"0%";const t=Number(e);if(isNaN(t)||!t)return"0%";const n=100*t;if(n>0&&n<.01)return"<0.01%";if(n<0&&n>-.01)return"<-0.01%";if(Math.abs(n)<1)return`${n.toFixed(2)}%`;if(Math.abs(n)<10)return`${n.toFixed(1)}%`;return`${Math.round(n)}%`}}}},{package:"$root$",file:"ui/pages/bridge/utils/price-impact.ts"}],[7156,{"../../../helpers/utils/confirm-tx.util":6927,"../../../hooks/useCurrencyDisplay":7034,"../../confirmations/components/simulation-details/formatAmount":7392,"@metamask/bridge-controller":1304,"bignumber.js":3768},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatCurrencyAmount=void 0,n.formatNetworkFee=function(e,t){if(!e)return undefined;const n=new a.BigNumber(e);if(n.isZero())return(0,r.formatCurrency)(n.toString(),t,2);if(n.gte(.01))return(0,r.formatCurrency)(n.toString(),t,2);for(let e=2;e<=4;e++){const o=new a.BigNumber(10).pow(e);if(n.times(o).round(0,a.BigNumber.ROUND_HALF_UP).gt(0))return(0,r.formatCurrency)(n.toString(),t,e)}if(n.gt(0))return(0,r.formatCurrency)("0.0001",t,4);return(0,r.formatCurrency)(n.toString(),t,2)},n.sanitizeAmountInput=n.safeAmountForCalc=n.isQuoteExpiredOrInvalid=n.formatTokenAmount=n.formatProviderLabel=void 0;var a=e("bignumber.js"),o=e("@metamask/bridge-controller"),r=e("../../../helpers/utils/confirm-tx.util"),s=e("../../../hooks/useCurrencyDisplay"),i=e("../../confirmations/components/simulation-details/formatAmount");n.formatTokenAmount=(e,t,n="")=>[(0,i.formatAmount)(e,new a.BigNumber(t)),n].join(" ").trim();n.formatCurrencyAmount=(e,t,n=s.DEFAULT_PRECISION)=>{if(!e)return undefined;const o=new a.BigNumber(e);if(0===n){if(o.lt(.01))return"<$0.01";if(o.lt(1))return(0,r.formatCurrency)(o.toString(),t,2)}return(0,r.formatCurrency)(o.toString(),t,n)};n.formatProviderLabel=e=>`${null==e?void 0:e.bridgeId}_${null==e?void 0:e.bridges[0]}`;const l=e=>e.replace(/[^\d.]+/gu,"").split(".",2).join(".");n.sanitizeAmountInput=l;n.safeAmountForCalc=e=>{if(!e)return"0";const t=l(e);return""===t||"."===t?"0":t};n.isQuoteExpiredOrInvalid=({activeQuote:e,toToken:t,toChain:n,fromChain:a,isQuoteExpired:r,insufficientBal:s})=>{if(r&&(!s||a&&(0,o.isNonEvmChainId)(a.chainId)))return!0;if(e&&t){var i,l;const a=null===(i=e.quote)||void 0===i?void 0:i.destChainId,r=a&&(0,o.isNonEvmChainId)(a),s=null!==(l=e.quote)&&void 0!==l&&null!==(l=l.destAsset)&&void 0!==l&&l.address?(0,o.formatAddressToCaipReference)(e.quote.destAsset.address):"",c=t.address?(0,o.formatAddressToCaipReference)(t.address):"",u=r?s:s.toLowerCase(),d=r?c:c.toLowerCase(),m=a?(0,o.formatChainIdToCaip)(a):"",p=null!=n&&n.chainId?(0,o.formatChainIdToCaip)(n.chainId):"";return!((u===d||(0,o.isNativeAddress)(u)&&(0,o.isNativeAddress)(d))&&m===p)}return!1}}}},{package:"$root$",file:"ui/pages/bridge/utils/quote.ts"}],[7157,{"./stablecoins":7158,"@metamask/bridge-controller":1304},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SlippageValue=void 0,n.calculateSlippage=function(e){const{fromChain:t,toChain:n,fromToken:o,toToken:s,isSwap:l}=e;if(null==t||!t.chainId||null==n||!n.chainId)return r.BridgeDefault;if(!l||t.chainId!==n.chainId)return r.BridgeDefault;if((0,a.isSolanaChainId)(t.chainId))return undefined;if(i(t.chainId,o,s))return r.EvmStablecoin;return r.EvmDefault},n.getSlippageReason=function(e){const{fromChain:t,toChain:n,fromToken:o,toToken:r,isSwap:s}=e;if(null==t||!t.chainId||null==n||!n.chainId)return"Incomplete chain setup - using bridge default";if(!s||t.chainId!==n.chainId)return"Cross-chain transaction";if((0,a.isSolanaChainId)(t.chainId))return"Solana swap (AUTO mode)";if(i(t.chainId,o,r))return"EVM stablecoin pair";return"EVM token swap"};var a=e("@metamask/bridge-controller"),o=e("./stablecoins");let r=n.SlippageValue=function(e){return e[e.EvmStablecoin=.5]="EvmStablecoin",e[e.EvmDefault=2]="EvmDefault",e[e.BridgeDefault=2]="BridgeDefault",e}({});function s(e,t){if(!t)return!1;const n=o.STABLECOINS_BY_CHAIN_ID[e];return!!n&&n.has(t.toLowerCase())}function i(e,t,n){return!(!t||!n)&&(s(e,t.address)&&s(e,n.address))}}}},{package:"$root$",file:"ui/pages/bridge/utils/slippage-service.ts"}],[7158,{"../../../../shared/constants/network":5617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.STABLECOINS_BY_CHAIN_ID=void 0;var a=e("../../../../shared/constants/network");n.STABLECOINS_BY_CHAIN_ID={[a.CHAIN_IDS.MAINNET]:new Set(["0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48","0xdac17f958d2ee523a2206206994597c13d831ec7"]),[a.CHAIN_IDS.LINEA_MAINNET]:new Set(["0x176211869cA2b568f2A7D4EE941E073a821EE1ff","0xA219439258ca9da29E9Cc4cE5596924745e12B93"]),[a.CHAIN_IDS.POLYGON]:new Set(["0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359","0x2791bca1f2de4661ed88a30c99a7a9449aa84174","0xc2132d05d31c914a87c6611c10748aeb04b58e8f"]),[a.CHAIN_IDS.ARBITRUM]:new Set(["0xaf88d065e77c8cC2239327C5EDb3A432268e5831","0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8","0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9"]),[a.CHAIN_IDS.BASE]:new Set(["0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913"]),[a.CHAIN_IDS.OPTIMISM]:new Set(["0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85","0x7F5c764cBc14f9669B88837ca1490cCa17c31607","0x94b008aA00579c1307B0EF2c499aD98a8ce58e58"]),[a.CHAIN_IDS.BSC]:new Set(["0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d","0x55d398326f99059ff775485246999027b3197955"]),[a.CHAIN_IDS.AVALANCHE]:new Set(["0xb97ef9ef8734c71904d8002f8b6bc66dd9c48a6e","0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0xc7198437980c041c805a1edcba50c1ce5db95118"]),[a.CHAIN_IDS.ZKSYNC_ERA]:new Set(["0x1d17CBcF0D6D143135aE902365D2E5e2A16538D4","0x3355df6D4c9C3035724Fd0e3914dE96A5a83aaf4","0x493257fD37EDB34451f62EDf8D2a0C418852bA4C"]),[a.CHAIN_IDS.SEI]:new Set(["0xe15fC38F6D8c56aF07bbCBe3BAf5708A2Bf42392"])}}}},{package:"$root$",file:"ui/pages/bridge/utils/stablecoins.ts"}],[7159,{"../../../../shared/constants/time":5635,"../../../helpers/constants/design-system":6899,"../../confirmations/components/simulation-details/formatAmount":7392,"@metamask/bridge-controller":1304,"@metamask/transaction-controller":2868,"bignumber.js":3768},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getIsDelayed=n.getBridgeAmountSentFormatted=n.getBridgeAmountReceivedFormatted=n.getBlockExplorerUrl=n.STATUS_TO_COLOR_MAP=void 0;var a=e("@metamask/transaction-controller"),o=e("bignumber.js"),r=e("@metamask/bridge-controller"),s=e("../../../../shared/constants/time"),i=e("../../../helpers/constants/design-system"),l=e("../../confirmations/components/simulation-details/formatAmount");const c=(e,t)=>e&&t?`${e}/tx/${t}`:undefined;n.getBlockExplorerUrl=(e,t)=>{var n;if(!e||!t)return undefined;if(!e.isEvm)return c(e.blockExplorerUrl,t);const a=e.defaultBlockExplorerUrlIndex;if(a===undefined)return undefined;const o=null===(n=e.blockExplorerUrls[a])||void 0===n?void 0:n.replace(/\/$/u,"");return c(o,t)};n.getBridgeAmountSentFormatted=({bridgeHistoryItem:e,txMeta:t})=>{var n;if(!t)return undefined;const a=null==e||null===(n=e.pricingData)||void 0===n?void 0:n.amountSent,o=null==e?void 0:e.quote.srcAsset.decimals;return a&&o?a:undefined};n.getBridgeAmountReceivedFormatted=({locale:e,bridgeHistoryItem:t,txMeta:n})=>{var s,i,c;if(!n)return undefined;if(!(n.type===a.TransactionType.bridge&&t?t.status.status===r.StatusTypes.COMPLETE:n.status===a.TransactionStatus.confirmed))return undefined;const u=(null===(s=n.swapMetaData)||void 0===s?void 0:s.token_to_amount)??(null==t||null===(i=t.status.destChain)||void 0===i?void 0:i.amount)??(null==t?void 0:t.quote.destTokenAmount),d=(null===(c=n.swapMetaData)||void 0===c?void 0:c.token_to_decimals)??n.destinationTokenDecimals??(null==t?void 0:t.quote.destAsset.decimals);return u&&d?(0,l.formatAmount)(e,new o.BigNumber(u).dividedBy(10**d)):undefined};n.getIsDelayed=(e,t)=>{const n=10*s.MINUTE;return Boolean(e===r.StatusTypes.PENDING&&(null==t?void 0:t.startTime)&&Date.now()>t.startTime+n+1e3*t.estimatedProcessingTimeInSeconds)};n.STATUS_TO_COLOR_MAP={[r.StatusTypes.PENDING]:i.TextColor.warningDefault,[r.StatusTypes.COMPLETE]:i.TextColor.successDefault,[r.StatusTypes.FAILED]:i.TextColor.errorDefault,[r.StatusTypes.UNKNOWN]:i.TextColor.errorDefault,[a.TransactionStatus.unapproved]:i.TextColor.warningDefault,[a.TransactionStatus.confirmed]:i.TextColor.successDefault,[a.TransactionStatus.rejected]:i.TextColor.errorDefault,[a.TransactionStatus.cancelled]:i.TextColor.errorDefault,[a.TransactionStatus.failed]:i.TextColor.errorDefault,[a.TransactionStatus.submitted]:i.TextColor.warningDefault,[a.TransactionStatus.approved]:i.TextColor.warningDefault,[a.TransactionStatus.signed]:i.TextColor.warningDefault,[a.TransactionStatus.dropped]:i.TextColor.errorDefault}}}},{package:"$root$",file:"ui/pages/bridge/utils/tx-details.ts"}],[7160,{"../../../shared/constants/metametrics":5613,"../../../shared/constants/network":5617,"../../../shared/constants/transaction":5637,"../../../shared/modules/selectors/networks":5753,"../../../shared/modules/string-utils":5761,"../../components/app/assets/nfts/nft-default-image/nft-default-image":5822,"../../components/app/network-account-balance-header/network-account-balance-header":6011,"../../components/component-library":6325,"../../components/ui/page-container":6798,"../../components/ui/site-origin/site-origin":6816,"../../contexts/i18n":6850,"../../contexts/metametrics":6855,"../../ducks/history/history":6880,"../../helpers/constants/common":6897,"../../helpers/constants/design-system":6899,"../../helpers/utils/util":6959,"../../hooks/useCurrencyDisplay":7034,"../../hooks/useOriginMetadata":7065,"../../hooks/useUserPreferencedCurrency":7091,"../../selectors":7886,"../../store/actions":7916,"../confirmations/components/confirm/nav":7309,"../routes/utils":7740,"@metamask/etherscan-link":1994,"@metamask/rpc-errors":2480,classnames:3913,"prop-types":4893,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=O(e("prop-types")),r=e("react-redux"),s=e("react-router-dom-v5-compat"),i=e("@metamask/rpc-errors"),l=e("@metamask/etherscan-link"),c=O(e("classnames")),u=e("../../components/ui/page-container"),d=e("../../contexts/i18n"),m=e("../../contexts/metametrics"),p=e("../../ducks/history/history"),f=e("../../store/actions"),g=e("../../../shared/constants/metametrics"),h=e("../../../shared/constants/transaction"),y=e("../../components/component-library"),v=e("../../../shared/modules/selectors/networks"),b=e("../../selectors"),k=O(e("../../components/app/assets/nfts/nft-default-image/nft-default-image")),x=e("../../helpers/utils/util"),T=e("../../helpers/constants/design-system"),C=O(e("../../components/app/network-account-balance-header/network-account-balance-header")),E=e("../../../shared/constants/network"),w=O(e("../../components/ui/site-origin/site-origin")),_=e("../../helpers/constants/common"),S=e("../../hooks/useUserPreferencedCurrency"),I=e("../../hooks/useCurrencyDisplay"),M=e("../../hooks/useOriginMetadata"),A=e("../../../shared/modules/string-utils"),P=e("../confirmations/components/confirm/nav"),D=e("../routes/utils");function O(e){return e&&e.__esModule?e:{default:e}}function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}const N=({navigate:e,location:t}={})=>{var n,o;const O=(0,a.useContext)(d.I18nContext),B=(0,r.useDispatch)(),N=(0,s.useNavigate)(),F=(0,s.useLocation)(),R=e||N,j=t||F,L=null==j||!j.pathname||!(0,D.hideAppHeader)({location:j}),$=(0,c.default)("confirm-add-suggested-nft page-container",{"confirm-add-suggested-nft--has-app-header-multichain":L}),W=(0,r.useSelector)(p.getMostRecentOverviewPage),q=(0,r.useSelector)(b.getSuggestedNfts).sort((e,t)=>e.requestData.asset.tokenId-t.requestData.asset.tokenId),U=(0,r.useSelector)(b.getRpcPrefsForCurrentProvider),V=(0,r.useSelector)(v.getCurrentChainId),G=(0,r.useSelector)(b.getIpfsGateway),z=(0,a.useContext)(m.MetaMetricsContext),H=(0,r.useSelector)(b.getNetworkIdentifier),{address:Q}=(0,r.useSelector)(b.getSelectedInternalAccount),K=(0,r.useSelector)(b.getSelectedAccountCachedBalance),J=(0,r.useSelector)(e=>(0,b.getAddressBookEntryOrAccountName)(e,Q)),[X,Y]=(0,a.useState)([]),Z=E.NETWORK_TO_NAME_MAP[V]||H,{currency:ee,numberOfDecimals:te}=(0,S.useUserPreferencedCurrency)(_.PRIMARY,{ethNumberOfDecimals:4}),[ne]=(0,I.useCurrencyDisplay)(K,{numberOfDecimals:te,currency:ee}),ae=(0,M.useOriginMetadata)(null===(n=q[0])||void 0===n?void 0:n.origin)||{},oe=null===(o=q[0])||void 0===o?void 0:o.id,re=(0,a.useCallback)(async()=>{await Promise.all(q.map(async({requestData:{asset:e},id:t})=>{await B((0,f.resolvePendingApproval)(t,null)),z({event:g.MetaMetricsEventName.NftAdded,category:g.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_contract_address:e.address,token_symbol:e.symbol,token_id:e.tokenId,token_standard:e.standard,asset_type:h.AssetType.NFT,source:g.MetaMetricsTokenEventSource.Dapp}})})),R(W)},[B,R,z,W,q]),se=(0,a.useCallback)(async()=>{await Promise.all(q.map(async({id:e})=>B((0,f.rejectPendingApproval)(e,(0,i.serializeError)(i.providerErrors.userRejectedRequest()))))),R(W)},[B,R,W,q]);let ie,le;if((0,a.useEffect)(()=>{q.length||R(W)},[R,W,q]),q.length)try{const e=new URL(q[0].origin);ie=e.host,le=e.href}catch{ie="dapp"}return(0,a.useEffect)(()=>{(async()=>{const e=await Promise.all(q.map(async e=>{const t=await(0,x.getAssetImageURL)(e.requestData.asset.image,G);return{...e,requestData:{...e.requestData,asset:{...e.requestData.asset,assetImageUrl:t}}}}));Y(e)})()},[q]),a.default.createElement(y.Box,{className:$,height:T.BlockSize.Full,width:T.BlockSize.Full,display:T.Display.Flex,flexDirection:T.FlexDirection.Column},a.default.createElement(P.Nav,{confirmationId:oe}),a.default.createElement(y.Box,{paddingBottom:2,className:"confirm-add-suggested-nft__header"},a.default.createElement(C.default,{accountName:J,accountBalance:ne,accountAddress:Q,networkName:Z,chainId:V}),a.default.createElement(y.Box,{paddingTop:4,paddingRight:4,paddingLeft:4,display:T.Display.Flex,justifyContent:T.JustifyContent.center},a.default.createElement(w.default,{chip:!0,siteOrigin:ae.origin,title:ae.origin,iconSrc:ae.iconUrl,iconName:ae.hostname})),a.default.createElement(y.Text,{variant:T.TextVariant.headingLg,textAlign:T.TextAlign.Center,margin:2},O("addSuggestedNFTs")),a.default.createElement(y.Text,{variant:T.TextVariant.bodyMd,textAlign:T.TextAlign.Center},O("wantsToAddThisAsset",["dapp"===ie?a.default.createElement(y.Text,{key:ie,variant:T.TextVariant.bodyMd,fontWeight:"bold"},ie):a.default.createElement(y.ButtonLink,{key:ie,size:y.BUTTON_SIZES.INHERIT,href:le,target:"_blank"},ie)]))),a.default.createElement(y.Box,{className:"page-container__content confirm-add-suggested-nft__content"},a.default.createElement(y.Box,{className:"confirm-add-suggested-nft__card",padding:2,borderRadius:T.BorderRadius.MD},a.default.createElement(y.Box,{className:(0,c.default)({"confirm-add-suggested-nft__nft-list":q.length>1})},q.map(({id:e,requestData:{asset:{address:t,tokenId:n,symbol:o,name:r}}})=>{const s=X.find(e=>e.requestData.asset.tokenId===n&&(0,A.isEqualCaseInsensitive)(e.requestData.asset.address,t)),c=s?s.requestData.asset.assetImageUrl:"",u=(0,l.getTokenTrackerLink)(t,V,null,null,{blockExplorerUrl:(null==U?void 0:U.blockExplorerUrl)??null});return 1===q.length?a.default.createElement(y.Box,{className:"confirm-add-suggested-nft__nft-single",key:`confirm-add-suggested-nft__nft-single-${e}`,borderRadius:T.BorderRadius.MD,margin:0,padding:0},c?a.default.createElement("img",{className:"confirm-add-suggested-nft__nft-single-image",src:c,alt:r||n}):a.default.createElement(k.default,{className:"confirm-add-suggested-nft__nft-single-image-default",tokenId:n,name:r||o||(0,x.shortenAddress)(t)}),a.default.createElement(y.Box,{padding:1,display:T.Display.Flex,flexDirection:T.FlexDirection.Row,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.Center},a.default.createElement(y.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Column,justifyContent:T.JustifyContent.spaceEvenly,flexWrap:T.FlexWrap.NoWrap,width:T.BlockSize.Full,className:"confirm-add-suggested-nft__nft-single-sub-details"},U.blockExplorerUrl?a.default.createElement(y.ButtonLink,{className:"confirm-add-suggested-nft__nft-name",href:u,title:t,target:"_blank",size:y.BUTTON_SIZES.INHERIT},r||o||(0,x.shortenAddress)(t)):a.default.createElement(y.Text,{variant:T.TextVariant.bodyMd,className:"confirm-add-suggested-nft__nft-name",title:t},r||o||(0,x.shortenAddress)(t)),a.default.createElement(y.Text,{variant:T.TextVariant.bodyMd,color:T.TextColor.textAlternative,className:"confirm-add-suggested-nft__nft-tokenId"},"#",n)))):a.default.createElement(y.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Row,flexWrap:T.FlexWrap.NoWrap,alignItems:T.AlignItems.Center,justifyContent:T.JustifyContent.spaceBetween,marginBottom:4,className:"confirm-add-suggested-nft__nft-list-item",key:`${t}-${n}`},a.default.createElement(y.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Row,flexWrap:T.FlexWrap.NoWrap,alignItems:T.AlignItems.Center,justifyContent:T.JustifyContent.spaceBetween},c?a.default.createElement("img",{className:"confirm-add-suggested-nft__nft-image",src:c,alt:r||n}):a.default.createElement(k.default,{className:"confirm-add-suggested-nft__nft-image-default"}),a.default.createElement(y.Box,{display:T.Display.Flex,flexDirection:T.FlexDirection.Column,justifyContent:T.JustifyContent.spaceEvenly,flexWrap:T.FlexWrap.NoWrap,width:T.BlockSize.Full,className:"confirm-add-suggested-nft__nft-sub-details"},U.blockExplorerUrl?a.default.createElement(y.ButtonLink,{className:"confirm-add-suggested-nft__nft-name",href:u,title:t,target:"_blank",size:y.BUTTON_SIZES.INHERIT},r||o||(0,x.shortenAddress)(t)):a.default.createElement(y.Text,{variant:T.TextVariant.bodySm,className:"confirm-add-suggested-nft__nft-name",title:t},r||o||(0,x.shortenAddress)(t)),a.default.createElement(y.Text,{variant:T.TextVariant.bodySm,color:T.TextColor.textAlternative,className:"confirm-add-suggested-nft__nft-tokenId"},"#",n))),a.default.createElement(y.ButtonIcon,{className:"confirm-add-suggested-nft__nft-remove","data-testid":`confirm-add-suggested-nft__nft-remove-${e}`,iconName:y.IconName.Close,size:y.ButtonIconSize.Sm,color:T.IconColor.iconMuted,onClick:t=>{t.preventDefault(),t.stopPropagation(),B((0,f.rejectPendingApproval)(e,(0,i.serializeError)(i.providerErrors.userRejectedRequest())))}}))})))),a.default.createElement(u.PageContainerFooter,{cancelText:O("cancel"),submitText:1===q.length?O("addNft"):O("addNfts"),onCancel:se,onSubmit:re}))};N.propTypes={navigate:o.default.func,location:o.default.shape({pathname:o.default.string,search:o.default.string,hash:o.default.string,state:o.default.object,key:o.default.string})};n.default=N}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-nft/confirm-add-suggested-nft.js"}],[7161,{"./confirm-add-suggested-nft":7160},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-add-suggested-nft"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-nft/index.js"}],[7162,{"../../../shared/constants/metametrics":5613,"../../../shared/constants/transaction":5637,"../../../shared/modules/string-utils":5761,"../../components/component-library":6325,"../../components/ui/identicon":6771,"../../components/ui/page-container":6798,"../../components/ui/token-balance":6833,"../../contexts/i18n":6850,"../../contexts/metametrics":6855,"../../ducks/history/history":6880,"../../ducks/metamask/metamask":6883,"../../helpers/constants/design-system":6899,"../../helpers/constants/zendesk-url":6911,"../../selectors":7886,"../../store/actions":7916,"../confirmations/components/confirm/nav":7309,"../routes/utils":7740,"@metamask/rpc-errors":2480,classnames:3913,"prop-types":4893,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=_(e("prop-types")),r=e("react-redux"),s=e("react-router-dom-v5-compat"),i=_(e("classnames")),l=e("@metamask/rpc-errors"),c=e("../../components/component-library"),u=e("../../helpers/constants/design-system"),d=_(e("../../components/ui/identicon")),m=_(e("../../components/ui/token-balance")),p=e("../../components/ui/page-container"),f=e("../../contexts/i18n"),g=e("../../contexts/metametrics"),h=e("../../ducks/history/history"),y=e("../../ducks/metamask/metamask"),v=_(e("../../helpers/constants/zendesk-url")),b=e("../../../shared/modules/string-utils"),k=e("../../store/actions"),x=e("../../../shared/constants/metametrics"),T=e("../../../shared/constants/transaction"),C=e("../../selectors"),E=e("../confirmations/components/confirm/nav"),w=e("../routes/utils");function _(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}const I=({navigate:e,location:t}={})=>{var n;const o=(0,a.useContext)(f.I18nContext),_=(0,r.useDispatch)(),S=(0,s.useNavigate)(),I=(0,s.useLocation)(),M=e||S,A=t||I,P=null==A||!A.pathname||!(0,w.hideAppHeader)({location:A}),D=(0,i.default)("confirm-add-suggested-token page-container",{"confirm-add-suggested-token--has-app-header-multichain":P}),O=(0,r.useSelector)(h.getMostRecentOverviewPage),B=(0,r.useSelector)(C.getSuggestedTokens),N=(0,r.useSelector)(y.getTokens),F=(0,a.useContext)(g.MetaMetricsContext),R=null===(n=B[0])||void 0===n?void 0:n.id,j=(0,a.useMemo)(()=>function(e,t){const n=e.find(({requestData:{asset:e}})=>{const n=t.find(({address:t})=>(0,b.isEqualCaseInsensitive)(t,null==e?void 0:e.address));return Boolean(n)});return Boolean(n)}(B,N)&&a.default.createElement(c.BannerAlert,{severity:u.Severity.Warning,marginTop:4},o("knownTokenWarning",[a.default.createElement(c.Button,{variant:c.ButtonVariant.Link,key:"confirm-add-suggested-token-duplicate-warning",className:"confirm-add-suggested-token__link",externalLink:!0,size:c.ButtonLinkSize.Inherit,href:v.default.TOKEN_SAFETY_PRACTICES},o("learnScamRisk"))])),[B,N,o]),L=(0,a.useMemo)(()=>function(e,t){const n=e.find(({requestData:{asset:e}})=>{const n=t.find(t=>(0,b.isEqualCaseInsensitive)(t.symbol,null==e?void 0:e.symbol)&&!(0,b.isEqualCaseInsensitive)(t.address,null==e?void 0:e.address));return Boolean(n)});return Boolean(n)}(B,N)&&a.default.createElement(c.BannerAlert,{marginTop:4,severity:u.Severity.Warning,description:o("reusedTokenNameWarning")}),[B,N,o]),$=(0,a.useCallback)(async()=>{await Promise.all(B.map(async({requestData:{asset:e},id:t})=>{await _((0,k.resolvePendingApproval)(t,null)),F({event:x.MetaMetricsEventName.TokenAdded,category:x.MetaMetricsEventCategory.Wallet,sensitiveProperties:{token_symbol:e.symbol,token_contract_address:e.address,token_decimal_precision:e.decimals,unlisted:e.unlisted,source:x.MetaMetricsTokenEventSource.Dapp,token_standard:T.TokenStandard.ERC20,asset_type:T.AssetType.token}})})),M(O)},[_,M,F,O,B]),W=(0,a.useCallback)(async()=>{await Promise.all(B.map(({id:e})=>_((0,k.rejectPendingApproval)(e,(0,l.serializeError)(l.providerErrors.userRejectedRequest()))))),M(O)},[_,M,O,B]);return(0,a.useEffect)(()=>{B.length||M(O)},[]),a.default.createElement("div",{className:D},a.default.createElement(E.Nav,{confirmationId:R}),a.default.createElement("div",{className:"page-container__header"},a.default.createElement("div",{className:"page-container__title"},o("addSuggestedTokens")),a.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,textAlign:u.TextAlign.Center},o("likeToImportTokens")),j,L),a.default.createElement("div",{className:"page-container__content"},a.default.createElement("div",{className:"confirm-add-suggested-token__header"},a.default.createElement("div",{className:"confirm-add-suggested-token__token"},o("token")),a.default.createElement("div",{className:"confirm-add-suggested-token__balance"},o("balance"))),a.default.createElement("div",{className:"confirm-add-suggested-token__token-list"},B.map(({requestData:{asset:e}})=>{return a.default.createElement("div",{className:"confirm-add-suggested-token__token-list-item",key:e.address},a.default.createElement("div",{className:"confirm-add-suggested-token__token confirm-add-suggested-token__data"},a.default.createElement(d.default,{className:"confirm-add-suggested-token__token-icon",diameter:48,address:e.address,image:e.image}),a.default.createElement("div",{className:"confirm-add-suggested-token__name"},(t=e.name,n=e.symbol,t===undefined?n:`${t} (${n})`))),a.default.createElement("div",{className:"confirm-add-suggested-token__balance"},a.default.createElement(m.default,{token:e})));var t,n}))),a.default.createElement(p.PageContainerFooter,{cancelText:o("cancel"),submitText:o("addToken"),onCancel:W,onSubmit:$,disabled:0===B.length}))};I.propTypes={navigate:o.default.func,location:o.default.shape({pathname:o.default.string,search:o.default.string,hash:o.default.string,state:o.default.object,key:o.default.string})};n.default=I}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-token/confirm-add-suggested-token.js"}],[7163,{"./confirm-add-suggested-token":7162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-add-suggested-token"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-add-suggested-token/index.js"}],[7164,{"../../../shared/constants/common":5601,"../../../shared/constants/copy":5602,"../../../shared/constants/metametrics":5613,"../../../shared/constants/time":5635,"../../../shared/modules/Numeric":5727,"../../components/app/account-list-item":5770,"../../components/component-library":6325,"../../components/ui/page-container":6798,"../../components/ui/tooltip":6835,"../../contexts/metametrics":6855,"../../ducks/confirm-transaction/confirm-transaction.duck":6876,"../../ducks/history/history":6880,"../../ducks/metamask/metamask":6883,"../../helpers/constants/design-system":6899,"../../hooks/useI18nContext":7047,"../../hooks/useScrollRequired":7070,"../../selectors":7886,"../../store/actions":7916,"../confirmations/components/confirm/nav":7309,classnames:3913,"copy-to-clipboard":3948,lodash:4635,loglevel:4643,"prop-types":4893,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=A(e("prop-types")),r=A(e("copy-to-clipboard")),s=A(e("classnames")),i=A(e("loglevel")),l=e("react-redux"),c=e("react-router-dom-v5-compat"),u=e("lodash"),d=A(e("../../components/app/account-list-item")),m=A(e("../../components/ui/tooltip")),p=e("../../components/ui/page-container"),f=e("../../ducks/history/history"),g=e("../../ducks/metamask/metamask"),h=e("../../../shared/constants/metametrics"),y=e("../../../shared/constants/time"),v=e("../../../shared/modules/Numeric"),b=e("../../../shared/constants/common"),k=e("../../components/component-library"),x=e("../../../shared/constants/copy"),T=e("../../hooks/useI18nContext"),C=e("../../hooks/useScrollRequired"),E=e("../../contexts/metametrics"),w=e("../../helpers/constants/design-system"),_=e("../../ducks/confirm-transaction/confirm-transaction.duck"),S=e("../../store/actions"),I=e("../../selectors"),M=e("../confirmations/components/confirm/nav");function A(e){return e&&e.__esModule?e:{default:e}}function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}const D=({approvalId:e})=>{const t=(0,T.useI18nContext)();return a.default.createElement(a.default.Fragment,null,a.default.createElement(M.Nav,{confirmationId:e}),a.default.createElement("div",{className:"request-decrypt-message__header"},a.default.createElement("div",{className:"request-decrypt-message__header-background"}),a.default.createElement("div",{className:"request-decrypt-message__header__text"},t("decryptRequest")),a.default.createElement("div",{className:"request-decrypt-message__header__tip-container"},a.default.createElement("div",{className:"request-decrypt-message__header__tip"}))))},O=({fromAccount:e,nativeCurrency:t})=>{const n=(0,T.useI18nContext)(),o=new v.Numeric(e.balance,16,b.EtherDenomination.WEI).toDenomination(b.EtherDenomination.ETH).round(6).toBase(10).toString();return a.default.createElement("div",{className:"request-decrypt-message__account-info"},a.default.createElement("div",{className:"request-decrypt-message__account"},a.default.createElement("div",{className:"request-decrypt-message__account-text"},`${n("account")}:`),a.default.createElement("div",{className:"request-decrypt-message__account-item"},a.default.createElement(d.default,{account:e}))),a.default.createElement("div",{className:"request-decrypt-message__balance"},a.default.createElement("div",{className:"request-decrypt-message__balance-text"},`${n("balance")}:`),a.default.createElement("div",{className:"request-decrypt-message__balance-value"},`${o} ${t}`)))};O.propTypes={fromAccount:o.default.shape({balance:o.default.string.isRequired}).isRequired,nativeCurrency:o.default.string.isRequired};const B=({name:e,notice:t,targetSubjectMetadata:n})=>a.default.createElement("div",{className:"request-decrypt-message__visual"},a.default.createElement("section",null,null!=n&&n.iconUrl?a.default.createElement("img",{className:"request-decrypt-message__visual-identicon",src:n.iconUrl,alt:""}):a.default.createElement("i",{className:"request-decrypt-message__visual-identicon--default"},e.charAt(0).toUpperCase()),a.default.createElement("div",{className:"request-decrypt-message__notice"},t)));B.propTypes={name:o.default.string.isRequired,notice:o.default.string.isRequired,targetSubjectMetadata:o.default.shape({iconUrl:o.default.string})};const N=({isScrollable:e,isScrolledToBottom:t,hasDecrypted:n,hasError:o,scrollToBottom:r})=>{const s=(0,T.useI18nContext)();return n&&!o&&e&&!t?a.default.createElement(k.ButtonIcon,{ariaLabel:s("scrollDown"),backgroundColor:w.BackgroundColor.primaryDefault,borderRadius:w.BorderRadius.full,className:"scroll-to-bottom__button",color:w.IconColor.primaryInverse,"data-testid":"scroll-to-bottom",display:w.Display.Flex,iconName:k.IconName.Arrow2Down,onClick:r,size:k.ButtonIconSize.Md}):null};N.propTypes={isScrollable:o.default.bool.isRequired,isScrolledToBottom:o.default.bool.isRequired,hasDecrypted:o.default.bool.isRequired,hasError:o.default.bool.isRequired,scrollToBottom:o.default.func.isRequired};const F=(0,a.forwardRef)(({isScrollable:e,isScrolledToBottom:t,onScroll:n,rawMessage:o,scrollToBottom:i,setRawMessage:c,messageData:u},d)=>{const p=(0,l.useDispatch)(),f=(0,a.useContext)(E.MetaMetricsContext),g=(0,T.useI18nContext)(),[v,b]=(0,a.useState)(!1),[C,_]=(0,a.useState)(!1),[I,M]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),[D,O]=(0,a.useState)("");return a.default.createElement("div",{className:"request-decrypt-message__message-container"},a.default.createElement("div",{className:"request-decrypt-message__message"},a.default.createElement("div",{className:"request-decrypt-message__message-text",ref:d,onScroll:n},I||A?o:u.msgParams.data,A?D:""),a.default.createElement("div",{className:(0,s.default)("request-decrypt-message__message-cover",{"request-decrypt-message__message-lock--pressed":I||A})}),a.default.createElement("div",{className:(0,s.default)("request-decrypt-message__message-lock",{"request-decrypt-message__message-lock--pressed":I||A}),"data-testid":"message-lock",onClick:async e=>{e.stopPropagation(e);const t=u.msgParams;t.metamaskId=u.id;const n=await p((0,S.decryptMsgInline)(t));n.error?(P(!0),O(g("decryptInlineError",[n.error]))):(M(!0),c(n.rawSig))}},a.default.createElement("div",{className:"request-decrypt-message__message-lock__container"},a.default.createElement("i",{className:"fa fa-lock fa-lg request-decrypt-message__message-lock__container__icon"}),a.default.createElement("div",{className:"request-decrypt-message__message-lock__container__text"},g("decryptMetamask"))))),a.default.createElement(N,{isScrollable:e,hasError:A,hasDecrypted:I,isScrolledToBottom:t,scrollToBottom:i}),I?a.default.createElement("div",{className:(0,s.default)({"request-decrypt-message__message-copy":!0,"request-decrypt-message__message-copy--pressed":v}),onClick:()=>{(0,r.default)(o,x.COPY_OPTIONS),f({category:h.MetaMetricsEventCategory.Messages,event:"Copy",properties:{action:"Decrypt Message Copy",legacy_event:!0}}),_(!0),setTimeout(()=>_(!1),3*y.SECOND)},onMouseDown:()=>b(!0),onMouseUp:()=>b(!1),"data-testid":"message-copy"},a.default.createElement(m.default,{position:"bottom",title:g(C?"copiedExclamation":"copyToClipboard"),wrapperClassName:"request-decrypt-message__message-copy-tooltip",style:{display:"flex",alignItems:"center"}},a.default.createElement("div",{className:"request-decrypt-message__message-copy-text"},g("decryptCopy")),a.default.createElement(k.Icon,{name:C?k.IconName.CopySuccess:k.IconName.Copy,color:w.IconColor.primaryDefault}))):a.default.createElement("div",null))});F.displayName="MessageBody",F.propTypes={isScrollable:o.default.bool.isRequired,isScrolledToBottom:o.default.bool.isRequired,onScroll:o.default.func.isRequired,rawMessage:o.default.string.isRequired,scrollToBottom:o.default.func.isRequired,setRawMessage:o.default.func.isRequired,messageData:o.default.shape({msgParams:o.default.shape({data:o.default.string.isRequired,from:o.default.string.isRequired,origin:o.default.string.isRequired}).isRequired,id:o.default.string.isRequired}).isRequired};const R=({hasScrolledToBottom:e,isScrollable:t,mostRecentOverviewPage:n,messageData:o})=>{const r=(0,l.useDispatch)(),s=(0,c.useNavigate)(),i=(0,T.useI18nContext)(),u=(0,a.useContext)(E.MetaMetricsContext);return a.default.createElement(p.PageContainerFooter,{cancelText:i("cancel"),submitText:i("decrypt"),disabled:t&&!e,onCancel:async e=>{e.stopPropagation(e),await r((0,S.cancelDecryptMsg)(o)),u({category:h.MetaMetricsEventCategory.Messages,event:"Cancel",properties:{action:"Decrypt Message Request",legacy_event:!0}}),r((0,_.clearConfirmTransaction)()),s(n)},onSubmit:async e=>{e.stopPropagation(e);const t=o.msgParams;t.metamaskId=o.id,await r((0,S.decryptMsg)(t)),u({category:h.MetaMetricsEventCategory.Messages,event:"Confirm",properties:{action:"Decrypt Message Request",legacy_event:!0}}),r((0,_.clearConfirmTransaction)()),s(n)}})};R.propTypes={hasScrolledToBottom:o.default.bool.isRequired,isScrollable:o.default.bool.isRequired,mostRecentOverviewPage:o.default.string.isRequired,messageData:o.default.shape({msgParams:o.default.shape({data:o.default.string.isRequired,from:o.default.string.isRequired,origin:o.default.string.isRequired}).isRequired,id:o.default.string.isRequired}).isRequired};n.default=()=>{const e=(0,T.useI18nContext)(),[t,n]=(0,a.useState)(""),o=(0,l.useSelector)(f.getMostRecentOverviewPage),r=(0,l.useSelector)(g.getNativeCurrency),{id:s}=(0,c.useParams)(),d=(0,l.useSelector)(I.unconfirmedTransactionsListSelector),m=(0,u.cloneDeep)(d.find(e=>e.id===s)),p=(0,l.useSelector)(e=>{var t;return(0,I.getTargetAccountWithSendEtherInfo)(e,null==m||null===(t=m.msgParams)||void 0===t?void 0:t.from)}),h=(0,l.useSelector)(e=>e.metamask.subjectMetadata||{}),{hasScrolledToBottom:y,isScrollable:v,isScrolledToBottom:b,onScroll:k,scrollToBottom:x,ref:E}=(0,C.useScrollRequired)([t],{offsetPxFromBottom:0});if(!m)return i.default.warn("ConfirmDecryptMessage Page: Missing messageData prop."),null;const w=h[m.msgParams.origin],_=(null==w?void 0:w.name)||m.msgParams.origin,S=e("decryptMessageNotice",[m.msgParams.origin]);return a.default.createElement("div",{className:"request-decrypt-message__container"},a.default.createElement(D,{approvalId:s}),a.default.createElement("div",{className:"request-decrypt-message__body"},a.default.createElement(O,{fromAccount:p,nativeCurrency:r}),a.default.createElement(B,{name:_,notice:S,targetSubjectMetadata:w}),a.default.createElement(F,{isScrollable:v,isScrolledToBottom:b,onScroll:k,rawMessage:t,ref:E,scrollToBottom:x,setRawMessage:n,messageData:m})),a.default.createElement(R,{hasScrolledToBottom:y,isScrollable:v,mostRecentOverviewPage:o,messageData:m}))}}}},{package:"$root$",file:"ui/pages/confirm-decrypt-message/confirm-decrypt-message.component.js"}],[7165,{"./confirm-decrypt-message.component":7164},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-decrypt-message.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-decrypt-message/index.js"}],[7166,{"../../../shared/constants/common":5601,"../../../shared/constants/metametrics":5613,"../../../shared/modules/Numeric":5727,"../../components/app/account-list-item":5770,"../../components/app/preferred-avatar":6033,"../../components/ui/page-container":6798,"../../components/ui/site-origin":6815,"../confirmations/components/confirm/nav":7309,"@metamask/design-system-react":1741,loglevel:4643,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=g(e("prop-types")),r=g(e("loglevel")),s=e("@metamask/design-system-react"),i=g(e("../../components/app/account-list-item")),l=e("../../components/app/preferred-avatar"),c=e("../../components/ui/page-container"),u=e("../../../shared/constants/metametrics"),d=g(e("../../components/ui/site-origin")),m=e("../../../shared/modules/Numeric"),p=e("../../../shared/constants/common"),f=e("../confirmations/components/confirm/nav");function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class v extends a.Component{constructor(...e){super(...e),y(this,"renderHeader",()=>{var e;const t=null===(e=this.props.txData)||void 0===e?void 0:e.id;return a.default.createElement(a.default.Fragment,null,a.default.createElement(f.Nav,{confirmationId:t}),a.default.createElement("div",{className:"request-encryption-public-key__header"},a.default.createElement("div",{className:"request-encryption-public-key__header-background"}),a.default.createElement("div",{className:"request-encryption-public-key__header__text"},this.context.t("encryptionPublicKeyRequest")),a.default.createElement("div",{className:"request-encryption-public-key__header__tip-container"},a.default.createElement("div",{className:"request-encryption-public-key__header__tip"}))))}),y(this,"renderAccount",()=>{const{fromAccount:e}=this.props,{t:t}=this.context;return a.default.createElement("div",{className:"request-encryption-public-key__account"},a.default.createElement("div",{className:"request-encryption-public-key__account-text"},`${t("account")}:`),a.default.createElement("div",{className:"request-encryption-public-key__account-item"},a.default.createElement(i.default,{account:e})))}),y(this,"renderBalance",()=>{const{nativeCurrency:e,fromAccount:{balance:t}}=this.props,{t:n}=this.context,o=new m.Numeric(t,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.ETH).round(6).toBase(10).toString();return a.default.createElement("div",{className:"request-encryption-public-key__balance"},a.default.createElement("div",{className:"request-encryption-public-key__balance-text"},`${n("balance")}:`),a.default.createElement("div",{className:"request-encryption-public-key__balance-value"},`${o} ${e}`))}),y(this,"renderRequestIcon",()=>{const{requesterAddress:e}=this.props;return a.default.createElement("div",{className:"request-encryption-public-key__request-icon"},a.default.createElement(l.PreferredAvatar,{size:s.AvatarAccountSize.Lg,address:e}))}),y(this,"renderAccountInfo",()=>a.default.createElement("div",{className:"request-encryption-public-key__account-info"},this.renderAccount(),this.renderRequestIcon(),this.renderBalance())),y(this,"renderBody",()=>{const{subjectMetadata:e,txData:t}=this.props,{t:n}=this.context,o=e[t.origin],r=n("encryptionPublicKeyNotice",[a.default.createElement(d.default,{siteOrigin:t.origin,key:t.origin})]),s=(null==o?void 0:o.hostname)||t.origin;return a.default.createElement("div",{className:"request-encryption-public-key__body"},this.renderAccountInfo(),a.default.createElement("div",{className:"request-encryption-public-key__visual"},a.default.createElement("section",null,null!=o&&o.iconUrl?a.default.createElement("img",{className:"request-encryption-public-key__visual-identicon",src:o.iconUrl,alt:""}):a.default.createElement("i",{className:"request-encryption-public-key__visual-identicon--default"},s.charAt(0).toUpperCase()),a.default.createElement("div",{className:"request-encryption-public-key__notice"},r))))}),y(this,"renderFooter",()=>{const{cancelEncryptionPublicKey:e,clearConfirmTransaction:t,encryptionPublicKey:n,navigate:o,mostRecentOverviewPage:r,txData:s}=this.props,{t:i,trackEvent:l}=this.context;return a.default.createElement(c.PageContainerFooter,{cancelText:i("cancel"),submitText:i("provide"),onCancel:async n=>{await e(s,n),l({category:u.MetaMetricsEventCategory.Messages,event:"Cancel",properties:{action:"Encryption public key Request",legacy_event:!0}}),t(),o(r)},onSubmit:async e=>{await n(s,e),this.context.trackEvent({category:u.MetaMetricsEventCategory.Messages,event:"Confirm",properties:{action:"Encryption public key Request",legacy_event:!0}}),t(),o(r)}})}),y(this,"render",()=>this.props.txData?a.default.createElement("div",{className:"request-encryption-public-key__container"},this.renderHeader(),this.renderBody(),this.renderFooter()):(r.default.warn("ConfirmEncryptionPublicKey Page: Missing txData prop."),null))}}n.default=v,y(v,"contextTypes",{t:o.default.func.isRequired,trackEvent:o.default.func.isRequired}),y(v,"propTypes",{fromAccount:o.default.shape({address:o.default.string.isRequired,balance:o.default.string,name:o.default.string}).isRequired,clearConfirmTransaction:o.default.func.isRequired,cancelEncryptionPublicKey:o.default.func.isRequired,encryptionPublicKey:o.default.func.isRequired,navigate:o.default.func.isRequired,requesterAddress:o.default.string,txData:o.default.object,subjectMetadata:o.default.object,mostRecentOverviewPage:o.default.string.isRequired,nativeCurrency:o.default.string.isRequired})}}},{package:"$root$",file:"ui/pages/confirm-encryption-public-key/confirm-encryption-public-key.component.js"}],[7167,{"../../ducks/confirm-transaction/confirm-transaction.duck":6876,"../../ducks/history/history":6880,"../../ducks/metamask/metamask":6883,"../../helpers/higher-order-components/with-router-hooks/with-router-hooks":6922,"../../selectors":7886,"../../store/actions":7916,"./confirm-encryption-public-key.component":7166,"react-redux":5021,redux:5124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("react-redux"),o=e("redux"),r=e("../../store/actions"),s=e("../../selectors"),i=e("../../ducks/confirm-transaction/confirm-transaction.duck"),l=e("../../ducks/history/history"),c=e("../../ducks/metamask/metamask"),u=m(e("../../helpers/higher-order-components/with-router-hooks/with-router-hooks")),d=m(e("./confirm-encryption-public-key.component"));function m(e){return e&&e.__esModule?e:{default:e}}n.default=(0,o.compose)(u.default,(0,a.connect)(function(e,t){var n;const{metamask:{subjectMetadata:a={}}}=e,o=(0,s.unconfirmedTransactionsListSelector)(e),r=null===(n=t.params)||void 0===n?void 0:n.id,i=o.find(e=>e.id===r);return{txData:i,subjectMetadata:a,fromAccount:(0,s.getTargetAccountWithSendEtherInfo)(e,null==i?void 0:i.msgParams),requester:null,requesterAddress:null,mostRecentOverviewPage:(0,l.getMostRecentOverviewPage)(e),nativeCurrency:(0,c.getNativeCurrency)(e)}},function(e){return{goHome:()=>e((0,r.goHome)()),clearConfirmTransaction:()=>e((0,i.clearConfirmTransaction)()),encryptionPublicKey:(t,n)=>{const a={data:t.msgParams,metamaskId:t.id};return n.stopPropagation(),e((0,r.encryptionPublicKeyMsg)(a))},cancelEncryptionPublicKey:(t,n)=>(n.stopPropagation(),e((0,r.cancelEncryptionPublicKeyMsg)(t)))}}))(d.default)}}},{package:"$root$",file:"ui/pages/confirm-encryption-public-key/confirm-encryption-public-key.container.js"}],[7168,{"./confirm-encryption-public-key.container":7167},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-encryption-public-key.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirm-encryption-public-key/index.js"}],[7169,{"../../../../../components/component-library":6325,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTypeLabel=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../components/component-library");n.AccountTypeLabel=({label:e})=>e?o.default.createElement(r.Tag,{label:e}):null}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/account-type-label/account-type-label.tsx"}],[7170,{"./account-type-label":7169},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AccountTypeLabel",{enumerable:!0,get:function(){return a.AccountTypeLabel}});var a=e("./account-type-label")}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/account-type-label/index.ts"}],[7171,{"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useFormatters":7043,"../../../constants/network":7446,"../../../hooks/useNftImageUrl":7555,"../../../types/send":7582,"../account-type-label":7170,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Asset=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../components/component-library"),s=e("../../../../../helpers/constants/design-system"),i=e("../../../types/send"),l=e("../../../hooks/useNftImageUrl"),c=e("../../../constants/network"),u=e("../../../../../hooks/useFormatters"),d=e("../account-type-label");const m=({asset:e,onClick:t,isSelected:n})=>{const a=e,{collection:c,name:u,tokenId:d,image:m,standard:p,balance:f}=a,g=(0,l.useNftImageUrl)(m);let h=null;return p===i.AssetStandard.ERC1155&&(h=u?`(${null==f?void 0:f.toString()}) ${u} - #${d}`:`(${null==f?void 0:f.toString()}) #${d}`),o.default.createElement(r.Box,{alignItems:s.AlignItems.center,backgroundColor:n?s.BackgroundColor.backgroundHover:s.BackgroundColor.transparent,className:"send-asset","data-testid":"nft-asset",display:s.Display.Flex,onClick:t,paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4},o.default.createElement(r.Box,{marginRight:4,style:{minWidth:32}},o.default.createElement(r.BadgeWrapper,{badge:a.chainId?o.default.createElement(r.AvatarNetwork,{size:r.AvatarNetworkSize.Xs,name:a.networkName??"",src:a.networkImage}):null},m||null!=c&&c.imageUrl?o.default.createElement(r.Box,{as:"img",src:g||(null==c?void 0:c.imageUrl),alt:u,style:{width:32,height:32,borderRadius:8,objectFit:"cover"}}):null)),o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,style:{flex:1,overflow:"hidden"}},o.default.createElement(r.Text,{variant:s.TextVariant.bodyMdMedium,color:s.TextColor.textDefault,ellipsis:!0},null==c?void 0:c.name),o.default.createElement(r.Text,{variant:s.TextVariant.bodySmMedium,color:s.TextColor.textAlternative,ellipsis:!0},p===i.AssetStandard.ERC721&&u,p===i.AssetStandard.ERC1155&&h)))},p=({asset:e,onClick:t,isSelected:n})=>{const a=e,{chainId:i,image:l,name:m,balance:p,symbol:f="",fiat:g}=a,{formatCurrencyWithMinThreshold:h,formatTokenQuantity:y}=(0,u.useFormatters)(),v=c.accountTypeLabel[e.accountType];return o.default.createElement(r.Box,{alignItems:s.AlignItems.center,backgroundColor:n?s.BackgroundColor.backgroundHover:s.BackgroundColor.transparent,className:"send-asset","data-testid":`token-asset-${i}-${f}`,display:s.Display.Flex,onClick:t,paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4},o.default.createElement(r.Box,{marginRight:4},o.default.createElement(r.BadgeWrapper,{badge:i?o.default.createElement(r.AvatarNetwork,{size:r.AvatarNetworkSize.Xs,name:a.networkName??"",src:a.networkImage}):null},o.default.createElement(r.AvatarToken,{size:r.AvatarTokenSize.Md,src:l,name:f,showHalo:!1}))),o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,style:{flex:1,overflow:"hidden"}},o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Row,alignItems:s.AlignItems.center},o.default.createElement(r.Text,{variant:s.TextVariant.bodyMdMedium,color:s.TextColor.textDefault,marginRight:1},m),o.default.createElement(d.AccountTypeLabel,{label:v})),o.default.createElement(r.Text,{variant:s.TextVariant.bodySmMedium,color:s.TextColor.textAlternative,ellipsis:!0},f)),o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.flexEnd,marginLeft:2},o.default.createElement(r.Text,{variant:s.TextVariant.bodyMdMedium},h((null==g?void 0:g.balance)??0,(null==g?void 0:g.currency)||"")),o.default.createElement(r.Text,{variant:s.TextVariant.bodySmMedium,color:s.TextColor.textAlternative},y(Number(p??0),f))))};n.Asset=({asset:e,onClick:t,isSelected:n})=>i.NFT_STANDARDS.includes(e.standard)?o.default.createElement(m,{asset:e,onClick:t,isSelected:n}):o.default.createElement(p,{asset:e,onClick:t,isSelected:n})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/asset/asset.tsx"}],[7172,{"./asset":7171},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./asset");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/asset/index.ts"}],[7173,{"./recipient":7174},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./recipient");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/recipient/index.ts"}],[7174,{"../../../../../components/app/preferred-avatar":6033,"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../../../helpers/utils/util":6959,"../../../constants/network":7446,"../account-type-label":7170,"@metamask/design-system-react":1741,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Recipient=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("@metamask/design-system-react"),s=e("../../../../../components/app/preferred-avatar"),i=e("../../../../../components/component-library"),l=e("../../../../../helpers/constants/design-system"),c=e("../../../../../helpers/utils/util"),u=e("../../../constants/network"),d=e("../account-type-label");n.Recipient=({isAccount:e,isSelected:t,recipient:n,onClick:a})=>{const{address:m,seedIcon:p}=n,f=e?n.accountGroupName:n.contactName,g=u.accountTypeLabel[n.accountType];return o.default.createElement(i.Box,{alignItems:l.AlignItems.center,backgroundColor:t?l.BackgroundColor.backgroundHover:l.BackgroundColor.transparent,className:"send-recipient",display:l.Display.Flex,flexDirection:l.FlexDirection.Row,paddingTop:3,paddingBottom:3,paddingLeft:4,paddingRight:4,gap:4,onClick:()=>a(n)},o.default.createElement(s.PreferredAvatar,{address:p??m,size:r.AvatarAccountSize.Lg,"data-testid":"avatar"}),o.default.createElement(i.Box,{className:"send-recipient__content"},o.default.createElement(i.Text,{variant:l.TextVariant.bodyMdMedium,ellipsis:!0},f),o.default.createElement(i.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Row,alignItems:l.AlignItems.center},o.default.createElement(i.Text,{variant:l.TextVariant.bodySmMedium,color:l.TextColor.textAlternative,marginRight:2},(0,c.shortenAddress)(m)),o.default.createElement(d.AccountTypeLabel,{label:g}))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/recipient/recipient.tsx"}],[7175,{"./send-hero":7176},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./send-hero");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/send-hero/index.ts"}],[7176,{"../../../../../../shared/constants/network":5617,"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../hooks/useChainNetworkNameAndImage":7529,"../../../hooks/useNftImageUrl":7555,"../../../types/send":7582,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SendHero=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../../shared/constants/network"),s=e("../../../../../components/component-library"),i=e("../../../../../helpers/constants/design-system"),l=e("../../../types/send"),c=e("../../../hooks/useNftImageUrl"),u=e("../../../hooks/useChainNetworkNameAndImage");const d=({asset:e})=>{var t;const n=e,{collection:a,name:r,image:l}=n,u=(0,c.useNftImageUrl)(l);return o.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center,marginTop:6,marginBottom:9},o.default.createElement(s.BadgeWrapper,{style:{alignSelf:"center"},badge:n.chainId?o.default.createElement(s.AvatarNetwork,{size:s.AvatarNetworkSize.Sm,name:n.networkName??"",src:n.networkImage,style:{width:20,height:20,borderWidth:2}}):null},l||null!=a&&a.imageUrl?o.default.createElement(s.Box,{as:"img",src:u||(null==a?void 0:a.imageUrl),alt:r,style:{width:48,height:48,borderRadius:12,objectFit:"cover"},onError:e=>{var t;const n=e.target;n.style.display="none",null===(t=n.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}):null),o.default.createElement(s.Text,{variant:i.TextVariant.headingSm,color:i.TextColor.textDefault,marginTop:4},e.name||(null===(t=e.collection)||void 0===t?void 0:t.name)))},m=({asset:e})=>{const t=(0,u.useChainNetworkNameAndImageMap)(),{chainId:n,image:a,symbol:l,isNative:c,networkImage:d,networkName:m}=e??{},p=c?r.CHAIN_ID_TOKEN_IMAGE_MAP[n]??r.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[n]:undefined,f=t.get(n);return o.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center,marginTop:6,marginBottom:9},o.default.createElement(s.BadgeWrapper,{style:{alignSelf:"center"},badge:n?o.default.createElement(s.AvatarNetwork,{size:s.AvatarNetworkSize.Sm,name:m||(null==f?void 0:f.networkName)||"",src:d||(null==f?void 0:f.networkImage),style:{width:20,height:20,borderWidth:2}}):null},o.default.createElement(s.AvatarToken,{size:s.AvatarTokenSize.Xl,src:a||p,name:l,showHalo:!1})),o.default.createElement(s.Text,{variant:i.TextVariant.headingSm,color:i.TextColor.textDefault,marginTop:4},l))};n.SendHero=({asset:e})=>null!=e&&e.standard&&l.NFT_STANDARDS.includes(e.standard)?o.default.createElement(d,{asset:e}):o.default.createElement(m,{asset:e})}}},{package:"$root$",file:"ui/pages/confirmations/components/UI/send-hero/send-hero.tsx"}],[7177,{"../../../../components/ui/form-field":6756,"../../../../contexts/i18n":6850,"../../../../helpers/constants/gas":6901,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=l(e("prop-types")),r=e("../../../../contexts/i18n"),s=l(e("../../../../components/ui/form-field")),i=e("../../../../helpers/constants/gas");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u({onManualChange:e,gasLimit:t,setGasLimit:n,gasPrice:o,setGasPrice:l,gasErrors:c,minimumGasLimit:u}){const d=(0,a.useContext)(r.I18nContext);return a.default.createElement("div",{className:"advanced-gas-controls"},a.default.createElement(s.default,{titleText:d("gasLimit"),error:null!=c&&c.gasLimit?(0,i.getGasFormErrorText)(c.gasLimit,d,{minimumGasLimit:u}):null,onChange:t=>{null==e||e(),n(t)},tooltipText:d("editGasLimitTooltip"),value:t,allowDecimals:!1,numeric:!0}),a.default.createElement(a.default.Fragment,null,a.default.createElement(s.default,{titleText:d("advancedGasPriceTitle"),titleUnit:"(GWEI)",onChange:t=>{null==e||e(),l(t)},tooltipText:d("editGasPriceTooltip"),value:o,numeric:!0,allowDecimals:!0,error:null!=c&&c.gasPrice?(0,i.getGasFormErrorText)(c.gasPrice,d):null})))}u.propTypes={onManualChange:o.default.func,gasLimit:o.default.number,setGasLimit:o.default.func,gasPrice:o.default.string,setGasPrice:o.default.func,minimumGasLimit:o.default.string,gasErrors:o.default.object}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-controls/advanced-gas-controls.component.js"}],[7178,{"../../../../../../shared/constants/gas":5606,"../../../../../../shared/modules/Numeric":5727,"../../../../../components/component-library":6325,"../../../../../contexts/gasFee":6849,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../../../selectors":7886,"../../../../../store/actions":7916,"../../../hooks/useTransactionEventFragment":7564,"../context":7194,lodash:4635,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("lodash"),s=e("../../../hooks/useTransactionEventFragment"),i=e("../../../../../../shared/constants/gas"),l=e("../../../../../helpers/constants/design-system"),c=e("../../../../../selectors"),u=e("../../../../../store/actions"),d=e("../../../../../contexts/gasFee"),m=e("../context"),p=e("../../../../../hooks/useI18nContext"),f=e("../../../../../components/component-library"),g=e("../../../../../../shared/modules/Numeric");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,p.useI18nContext)(),t=(0,o.useDispatch)(),{gasErrors:n,maxBaseFee:h,maxPriorityFeePerGas:y}=(0,m.useAdvancedGasFeePopoverContext)(),v=new g.Numeric(h,10).toString(),b=new g.Numeric(y,10).toString(),k=(0,o.useSelector)(c.getAdvancedGasFeeValues),{updateTransactionEventFragment:x}=(0,s.useTransactionEventFragment)(),{editGasMode:T,transaction:C}=(0,d.useGasFeeContext)(),{chainId:E}=C,w=(0,o.useSelector)(e=>(0,c.selectNetworkIdentifierByChainId)(e,E)),[_,S]=(0,a.useState)(Boolean(k)&&k.maxBaseFee===v&&k.priorityFee===b);(0,a.useEffect)(()=>{S(Boolean(k)&&k.maxBaseFee===v&&k.priorityFee===b)},[k,v,b]);return T===i.EditGasModes.swaps?null:a.default.createElement(f.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Row,marginTop:4,marginLeft:2,marginRight:2,paddingTop:4,paddingBottom:4,className:"advanced-gas-fee-defaults"},a.default.createElement(f.Checkbox,{isChecked:_,onChange:()=>{_?(t((0,u.setAdvancedGasFee)({chainId:E,gasFeePreferences:undefined})),S(!1),x({properties:{advanced_gas_defaults_updated_maxbasefee:null,advanced_gas_defaults_updated_priorityfee:null}})):(t((0,u.setAdvancedGasFee)({chainId:E,gasFeePreferences:{maxBaseFee:v,priorityFee:b}})),x({properties:{advanced_gas_defaults_updated_maxbasefee:v,advanced_gas_defaults_updated_priorityfee:b}}))},isDisabled:n.maxFeePerGas||n.maxPriorityFeePerGas,label:e("advancedGasFeeDefaultOptIn",[(0,r.capitalize)(w)])}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-defaults/advanced-gas-fee-defaults.js"}],[7179,{"./advanced-gas-fee-defaults":7178},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-defaults"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-defaults/index.js"}],[7180,{"../../../../../../shared/modules/conversion.utils":5732,"../../../../../components/component-library":6325,"../../../../../components/ui/form-field":6756,"../../../../../contexts/gasFee":6849,"../../../../../helpers/constants/design-system":6899,"../../../../../helpers/utils/util":6959,"../../../../../hooks/useI18nContext":7047,"../../../constants":7445,"../../../send-legacy/send.constants":7577,"../context":7194,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../../../contexts/gasFee"),s=e("../../../../../helpers/utils/util"),i=e("../../../../../helpers/constants/design-system"),l=e("../../../../../hooks/useI18nContext"),c=e("../../../send-legacy/send.constants"),u=(a=e("../../../../../components/ui/form-field"))&&a.__esModule?a:{default:a},d=e("../context"),m=e("../../../../../components/component-library"),p=e("../../../constants"),f=e("../../../../../../shared/modules/conversion.utils");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,l.useI18nContext)(),{setGasLimit:t,setErrorValue:n}=(0,d.useAdvancedGasFeePopoverContext)(),{gasLimit:a,minimumGasLimitDec:g,transaction:{chainId:h,originalGasEstimate:y}}=(0,r.useGasFeeContext)(),v=y!==undefined&&(0,f.hexToDecimal)(y),[b,k]=(0,o.useState)(v?Math.max(c.MAX_GAS_LIMIT_DEC,v):c.MAX_GAS_LIMIT_DEC),[x,T]=(0,o.useState)(!1),[C,E]=(0,o.useState)(a),[w,_]=(0,o.useState)(),S=e=>{E(e||0)};return(0,o.useEffect)(()=>{if(t(C),p.IGNORE_GAS_LIMIT_CHAIN_IDS.includes(h))return;const e=((e,t,n)=>(0,s.bnLessThan)(e,t)||(0,s.bnGreaterThan)(e,n)?"editGasLimitOutOfBoundsV2":null)(C,g,b);_(e),T(!0===x?x:null!==e),n("gasLimit","editGasLimitOutOfBoundsV2"===e)},[h,C,g,t,n,b,x,e]),(0,o.useEffect)(()=>{v&&k(Math.max(c.MAX_GAS_LIMIT_DEC,v))},[g,v,k]),x?o.default.createElement(u.default,{dataTestId:"gas-limit-input",error:w?e(w,[g-1,b]):"",onChange:S,titleText:e("gasLimitV2"),value:C,allowDecimals:!1,numeric:!0}):o.default.createElement(m.Text,{tag:i.TextVariant.bodyMd,variant:i.TextVariant.bodySm,as:"h6",className:"advanced-gas-fee-gas-limit",marginTop:4,marginLeft:2,marginRight:2},o.default.createElement("strong",null,e("gasLimitV2")),o.default.createElement("span",null,C),o.default.createElement(m.Button,{"data-testid":"advanced-gas-fee-edit",className:"advanced-gas-fee-gas-limit__edit-link",onClick:()=>T(!0),variant:m.ButtonVariant.Link,size:m.ButtonSize.Inherit},e("edit")))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-gas-limit/advanced-gas-fee-gas-limit.js"}],[7181,{"./advanced-gas-fee-gas-limit":7180},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-gas-limit"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-gas-limit/index.js"}],[7182,{"../../../../../components/ui/box":6725,"../../../../../components/ui/loading-heartbeat":6777,"../../../../../contexts/i18n":6850,"../../../../../helpers/utils/gas":6932,"../../../../../helpers/utils/util":6959,classnames:3913,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=d(e("prop-types")),r=d(e("classnames")),s=e("../../../../../helpers/utils/util"),i=e("../../../../../helpers/utils/gas"),l=e("../../../../../contexts/i18n"),c=d(e("../../../../../components/ui/box")),u=d(e("../../../../../components/ui/loading-heartbeat"));function d(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const p=({latest:e,historical:t,trend:n})=>{const o=(0,a.useContext)(l.I18nContext),d=function(e,t){switch(e){case"up":return{className:"fa-arrow-up advanced-gas-fee-input-subtext__up",color:"var(--color-success-default)",title:t("upArrow")};case"down":return{className:"fa-arrow-down advanced-gas-fee-input-subtext__down",color:"var(--color-error-default)",title:t("downArrow")};case"level":return{className:"fa-arrow-right advanced-gas-fee-input-subtext__level",color:"var(--color-icon-alternative)",title:t("levelArrow")};default:return null}}(n,o);return a.default.createElement(c.default,{display:"flex",alignItems:"center",gap:4,className:"advanced-gas-fee-input-subtext"},(0,s.isNullish)(e)?null:a.default.createElement(c.default,{display:"flex",alignItems:"center","data-testid":"latest"},a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__label"},o("currentTitle")),a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__value"},a.default.createElement(u.default,null),(0,i.formatGasFeeOrFeeRange)(e)),null===d?null:a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__icon"},a.default.createElement("i",{className:(0,r.default)("fa",d.className),style:{color:d.color},title:d.title,"data-testid":"fee-arrow"}))),(0,s.isNullish)(t)?null:a.default.createElement(c.default,null,a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__label","data-testid":"historical"},o("twelveHrTitle")),a.default.createElement("span",{className:"advanced-gas-fee-input-subtext__value"},a.default.createElement(u.default,null),(0,i.formatGasFeeOrFeeRange)(t))))};p.propTypes={latest:o.default.oneOfType([o.default.string,o.default.arrayOf(o.default.string)]),historical:o.default.oneOfType([o.default.string,o.default.arrayOf(o.default.string)]),trend:o.default.oneOf(["up","down","level"])};n.default=p}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-input-subtext/advanced-gas-fee-input-subtext.js"}],[7183,{"./advanced-gas-fee-input-subtext":7182},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-input-subtext"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-input-subtext/index.js"}],[7184,{"../../../../../components/ui/box":6725,"./base-fee-input":7186,"./priority-fee-input":7188,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(e("react")),o=i(e("../../../../../components/ui/box")),r=i(e("./base-fee-input")),s=i(e("./priority-fee-input"));function i(e){return e&&e.__esModule?e:{default:e}}n.default=()=>a.default.createElement(o.default,{className:"advanced-gas-fee-inputs"},a.default.createElement(r.default,null),a.default.createElement(s.default,null))}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/advanced-gas-fee-inputs.js"}],[7185,{"../../../../../../../shared/constants/gas":5606,"../../../../../../../shared/modules/Numeric":5727,"../../../../../../../shared/modules/conversion.utils":5732,"../../../../../../components/ui/box":6725,"../../../../../../components/ui/form-field":6756,"../../../../../../contexts/gasFee":6849,"../../../../../../helpers/constants/common":6897,"../../../../../../hooks/useCurrencyDisplay":7034,"../../../../../../hooks/useI18nContext":7047,"../../../../../../hooks/useUserPreferencedCurrency":7091,"../../../../../../selectors":7886,"../../../../constants":7445,"../../../../send-legacy/send.constants":7577,"../../advanced-gas-fee-input-subtext":7183,"../../context":7194,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("../../../../send-legacy/send.constants"),s=e("../../../../../../../shared/constants/gas"),i=e("../../../../../../helpers/constants/common"),l=e("../../../../../../selectors"),c=e("../../../../../../contexts/gasFee"),u=e("../../../../../../hooks/useI18nContext"),d=e("../../../../../../hooks/useUserPreferencedCurrency"),m=e("../../../../../../hooks/useCurrencyDisplay"),p=k(e("../../../../../../components/ui/box")),f=k(e("../../../../../../components/ui/form-field")),g=e("../../context"),h=k(e("../../advanced-gas-fee-input-subtext")),y=e("../../../../../../../shared/modules/conversion.utils"),v=e("../../../../../../../shared/modules/Numeric"),b=e("../../../../constants");function k(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,u.useI18nContext)(),{gasFeeEstimates:t,estimateUsed:n,maxFeePerGas:k,editGasMode:x,transaction:{chainId:T}}=(0,c.useGasFeeContext)(),C=new v.Numeric(k,10).toString(),{gasLimit:E,maxPriorityFeePerGas:w,setErrorValue:_,setMaxFeePerGas:S,setMaxBaseFee:I}=(0,g.useAdvancedGasFeePopoverContext)(),{estimatedBaseFee:M,historicalBaseFeeRange:A,baseFeeTrend:P}=t??{},[D,O]=(0,a.useState)(),{currency:B,numberOfDecimals:N}=(0,d.useUserPreferencedCurrency)(i.PRIMARY),F=(0,o.useSelector)(l.getAdvancedGasFeeValues),R=n!==s.PriorityLevels.custom&&null!=F&&F.maxBaseFee&&x!==s.EditGasModes.swaps?F.maxBaseFee:C,[j,L]=(0,a.useState)(R>0?R:undefined);(0,a.useEffect)(()=>{j===undefined&&R>0&&L(R)},[j,R,L]);const[$]=(0,m.useCurrencyDisplay)((0,y.decGWEIToHexWEI)(j*E),{currency:B,numberOfDecimals:N}),W=(0,a.useCallback)(e=>{L(e)},[L]);return(0,a.useEffect)(()=>{S(j);const e=((e,t,n,a)=>{const o=new v.Numeric(e,10);return new v.Numeric(n,10).greaterThan(o)?"editGasMaxBaseFeeGWEIImbalance":null!=t&&t.low&&o.lessThan(t.low.suggestedMaxFeePerGas,10)&&b.IGNORE_GAS_LIMIT_CHAIN_IDS.includes(a)?"editGasMaxBaseFeeLow":null!=t&&t.high&&o.greaterThan(t.high.suggestedMaxFeePerGas*r.HIGH_FEE_WARNING_MULTIPLIER,10)?"editGasMaxBaseFeeHigh":null})(j,t,w,T);O(e),_("maxFeePerGas","editGasMaxBaseFeeGWEIImbalance"===e),I(j)},[j,T,t,w,O,_,S,I]),a.default.createElement(p.default,{className:"base-fee-input",marginLeft:2,marginRight:2},a.default.createElement(f.default,{dataTestId:"base-fee-input",error:D?e(D):"",onChange:W,titleText:e("maxBaseFee"),titleUnit:`(${e("gwei")})`,tooltipText:e("advancedBaseGasFeeToolTip"),value:j,detailText:` ${$}`,allowDecimals:!0,numeric:!0}),a.default.createElement(h.default,{latest:M,historical:A,trend:P}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/base-fee-input/base-fee-input.js"}],[7186,{"./base-fee-input":7185},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./base-fee-input"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/base-fee-input/index.js"}],[7187,{"./advanced-gas-fee-inputs":7184},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-inputs"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/index.js"}],[7188,{"./priority-fee-input":7189},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./priority-fee-input"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/priority-fee-input/index.js"}],[7189,{"../../../../../../../shared/constants/gas":5606,"../../../../../../../shared/modules/Numeric":5727,"../../../../../../../shared/modules/conversion.utils":5732,"../../../../../../components/ui/box":6725,"../../../../../../components/ui/form-field":6756,"../../../../../../contexts/gasFee":6849,"../../../../../../helpers/constants/common":6897,"../../../../../../hooks/useCurrencyDisplay":7034,"../../../../../../hooks/useI18nContext":7047,"../../../../../../hooks/useUserPreferencedCurrency":7091,"../../../../../../selectors":7886,"../../../../constants":7445,"../../../../send-legacy/send.constants":7577,"../../advanced-gas-fee-input-subtext":7183,"../../context":7194,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("../../../../send-legacy/send.constants"),s=e("../../../../../../../shared/constants/gas"),i=e("../../../../../../helpers/constants/common"),l=e("../../../../../../selectors"),c=e("../../../../../../hooks/useCurrencyDisplay"),u=e("../../../../../../contexts/gasFee"),d=e("../../../../../../hooks/useI18nContext"),m=e("../../../../../../hooks/useUserPreferencedCurrency"),p=k(e("../../../../../../components/ui/form-field")),f=k(e("../../../../../../components/ui/box")),g=e("../../context"),h=k(e("../../advanced-gas-fee-input-subtext")),y=e("../../../../../../../shared/modules/conversion.utils"),v=e("../../../../../../../shared/modules/Numeric"),b=e("../../../../constants");function k(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,d.useI18nContext)(),t=(0,o.useSelector)(l.getAdvancedGasFeeValues),{gasLimit:n,setErrorValue:k,setMaxPriorityFeePerGas:x}=(0,g.useAdvancedGasFeePopoverContext)(),{editGasMode:T,estimateUsed:C,gasFeeEstimates:E,maxPriorityFeePerGas:w,transaction:{chainId:_}}=(0,u.useGasFeeContext)(),S=new v.Numeric(w,10).toString(),{latestPriorityFeeRange:I,historicalPriorityFeeRange:M,priorityFeeTrend:A}=E??{},[P,D]=(0,a.useState)(),O=C!==s.PriorityLevels.custom&&null!=t&&t.priorityFee&&T!==s.EditGasModes.swaps?t.priorityFee:S,[B,N]=(0,a.useState)(O>0?O:undefined);(0,a.useEffect)(()=>{B===undefined&&O>0&&N(O)},[B,O,N]);const{currency:F,numberOfDecimals:R}=(0,m.useUserPreferencedCurrency)(i.PRIMARY),[j]=(0,c.useCurrencyDisplay)((0,y.decGWEIToHexWEI)(B*n),{currency:F,numberOfDecimals:R});return(0,a.useEffect)(()=>{x(B);const e=((e,t,n)=>{const a=new v.Numeric(e,10);return a.lessThan(0,10)?"editGasMaxPriorityFeeBelowMinimumV2":null!=t&&t.low&&a.lessThan(t.low.suggestedMaxPriorityFeePerGas,10)&&b.IGNORE_GAS_LIMIT_CHAIN_IDS.includes(n)?"editGasMaxPriorityFeeLowV2":null!=t&&t.high&&a.greaterThan(t.high.suggestedMaxPriorityFeePerGas*r.HIGH_FEE_WARNING_MULTIPLIER,10)?"editGasMaxPriorityFeeHighV2":null})(B,E,_);k("maxPriorityFeePerGas","editGasMaxPriorityFeeBelowMinimumV2"===e),D(e)},[_,E,B,k,x,D]),a.default.createElement(f.default,{marginTop:4,marginLeft:2,marginRight:2,className:"priority-fee-input"},a.default.createElement(p.default,{dataTestId:"priority-fee-input",error:P?e(P):"",onChange:e=>{N(e)},titleText:e("priorityFeeProperCase"),titleUnit:`(${e("gwei")})`,tooltipText:e("advancedPriorityFeeToolTip"),value:B,detailText:` ${j}`,allowDecimals:!0,numeric:!0}),a.default.createElement(h.default,{latest:I,historical:M,trend:A}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-inputs/priority-fee-input/priority-fee-input.js"}],[7190,{"../../../../components/ui/box":6725,"../../../../components/ui/popover":6804,"../../../../contexts/transaction-modal":6863,"../../../../hooks/useI18nContext":7047,"./advanced-gas-fee-defaults":7179,"./advanced-gas-fee-gas-limit":7181,"./advanced-gas-fee-inputs":7187,"./advanced-gas-fee-save":7192,"./context":7194,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=p(e("react")),o=e("../../../../hooks/useI18nContext"),r=e("../../../../contexts/transaction-modal"),s=p(e("../../../../components/ui/box")),i=p(e("../../../../components/ui/popover")),l=e("./context"),c=p(e("./advanced-gas-fee-inputs")),u=p(e("./advanced-gas-fee-gas-limit")),d=p(e("./advanced-gas-fee-save")),m=p(e("./advanced-gas-fee-defaults"));function p(e){return e&&e.__esModule?e:{default:e}}n.default=()=>{const e=(0,o.useI18nContext)(),{closeAllModals:t,currentModal:n}=(0,r.useTransactionModalContext)();return"advancedGasFee"!==n?null:a.default.createElement(l.AdvancedGasFeePopoverContextProvider,null,a.default.createElement(i.default,{className:"advanced-gas-fee-popover",title:e("advancedGasFeeModalTitle"),onClose:t,footer:a.default.createElement(d.default,null)},a.default.createElement(s.default,{margin:4},a.default.createElement(c.default,null),a.default.createElement(m.default,null),a.default.createElement(u.default,null))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-popover.js"}],[7191,{"../../../../../../shared/constants/gas":5606,"../../../../../../shared/modules/conversion.utils":5732,"../../../../../components/component-library":6325,"../../../../../contexts/gasFee":6849,"../../../../../contexts/transaction-modal":6863,"../../../../../hooks/useI18nContext":7047,"../../../hooks/useTransactionEventFragment":7564,"../context":7194,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../../shared/constants/gas"),s=e("../../../../../../shared/modules/conversion.utils"),i=e("../../../../../contexts/transaction-modal"),l=e("../../../../../contexts/gasFee"),c=e("../../../hooks/useTransactionEventFragment"),u=e("../../../../../hooks/useI18nContext"),d=e("../../../../../components/component-library"),m=e("../context");n.default=()=>{const{closeModal:e}=(0,i.useTransactionModalContext)(),{updateTransactionEventFragment:t}=(0,c.useTransactionEventFragment)(),{updateTransaction:n}=(0,l.useGasFeeContext)(),a=(0,u.useI18nContext)(),{gasLimit:p,hasErrors:f,maxFeePerGas:g,maxPriorityFeePerGas:h}=(0,m.useAdvancedGasFeePopoverContext)();return o.default.createElement(d.Button,{variant:d.ButtonVariant.Primary,disabled:f,onClick:()=>{n({estimateUsed:r.PriorityLevels.custom,maxFeePerGas:(0,s.decGWEIToHexWEI)(g),maxPriorityFeePerGas:(0,s.decGWEIToHexWEI)(h),gasLimit:p}),t({properties:{gas_edit_type:"advanced"}}),e(["advancedGasFee","editGasFee"])},block:!0},a("save"))}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-save/advanced-gas-fee-save.js"}],[7192,{"./advanced-gas-fee-save":7191},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-save"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/advanced-gas-fee-save/index.js"}],[7193,{"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AdvancedGasFeePopoverContextProvider=n.AdvancedGasFeePopoverContext=void 0,n.useAdvancedGasFeePopoverContext=function(){return(0,o.useContext)(i)};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(a,r,i):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=(a=e("prop-types"))&&a.__esModule?a:{default:a};function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const i=n.AdvancedGasFeePopoverContext=(0,o.createContext)({}),l=({children:e})=>{const[t,n]=(0,o.useState)(),[a,r]=(0,o.useState)(),[s,l]=(0,o.useState)(),[c,u]=(0,o.useState)({maxFeePerGas:!1,maxPriorityFeePerGas:!1,gasLimit:!1}),d=(0,o.useCallback)((e,t)=>{c[e]!==t&&u({...c,[e]:t})},[c,u]),[m,p]=(0,o.useState)();return o.default.createElement(i.Provider,{value:{gasLimit:t,hasErrors:c.maxFeePerGas||c.maxPriorityFeePerGas||c.gasLimit,gasErrors:c,maxFeePerGas:a,maxPriorityFeePerGas:s,setErrorValue:d,maxBaseFee:m,setGasLimit:n,setMaxPriorityFeePerGas:l,setMaxFeePerGas:r,setMaxBaseFee:p}},e)};n.AdvancedGasFeePopoverContextProvider=l,l.propTypes={children:r.default.node.isRequired}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/context/advancedGasFeePopover.js"}],[7194,{"./advancedGasFeePopover":7193},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a=e("./advancedGasFeePopover");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/context/index.js"}],[7195,{"./advanced-gas-fee-popover":7190},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-gas-fee-popover"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/advanced-gas-fee-popover/index.js"}],[7196,{"../../../../../../shared/constants/security-provider":5626,"../../../../../components/component-library":6325,"../../../../../components/ui/icon/preloader":6767,"../../../hooks/useCurrentSignatureSecurityAlertResponse":7539,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=l(e("react")),o=l(e("../../../../../components/ui/icon/preloader")),r=e("../../../../../../shared/constants/security-provider"),s=e("../../../../../components/component-library"),i=l(e("../../../hooks/useCurrentSignatureSecurityAlertResponse"));function l(e){return e&&e.__esModule?e:{default:e}}n.default=()=>{const e=(0,i.default)();return(null==e?void 0:e.result_type)!==r.BlockaidResultType.Loading?null:a.default.createElement(s.Box,{marginInline:"auto",marginTop:4},a.default.createElement(o.default,{size:18}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/blockaid-loading-indicator/blockaid-loading-indicator.tsx"}],[7197,{"./blockaid-loading-indicator":7196},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BlockaidLoadingIndicator",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./blockaid-loading-indicator"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/blockaid-loading-indicator/index.ts"}],[7198,{"../../../../../components/app/alert-system/contexts/alertActionHandler":5777,"../../../../../components/app/alert-system/contexts/alertMetricsContext":5778,"../../../hooks/useConfirmationAlertActions":7532,"../../../hooks/useConfirmationAlertMetrics":7533,"../../../hooks/useSetConfirmationAlerts":7558,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=c(e("react")),o=e("../../../../../components/app/alert-system/contexts/alertActionHandler"),r=c(e("../../../hooks/useConfirmationAlertActions")),s=c(e("../../../hooks/useSetConfirmationAlerts")),i=e("../../../../../components/app/alert-system/contexts/alertMetricsContext"),l=e("../../../hooks/useConfirmationAlertMetrics");function c(e){return e&&e.__esModule?e:{default:e}}n.default=({children:e})=>{const{trackAlertActionClicked:t,trackAlertRender:n,trackInlineAlertClicked:c}=(0,l.useConfirmationAlertMetrics)(),u=(0,r.default)();return(0,s.default)(),a.default.createElement(i.AlertMetricsProvider,{metrics:{trackAlertActionClicked:t,trackAlertRender:n,trackInlineAlertClicked:c}},a.default.createElement(o.AlertActionHandlerProvider,{onProcessAction:u},e))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/confirm-alerts/confirm-alerts.tsx"}],[7199,{"./confirm-alerts":7198},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ConfirmAlerts",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./confirm-alerts"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/confirm-alerts/index.tsx"}],[7200,{"../../../../../components/app/confirm/info/row/section":5877,"../../../../../components/ui/tabs":6823,"../../../../../hooks/useI18nContext":7047,"../../../../../selectors/remote-feature-flags":7900,"../../../context/dapp-swap":7450,"../../../hooks/transactions/dapp-swap-comparison/useDappSwapCheck":7514,"../../../hooks/transactions/dapp-swap-comparison/useDappSwapComparisonInfo":7515,"../../../hooks/transactions/dapp-swap-comparison/useDappSwapComparisonMetrics":7517,"../../../hooks/transactions/dapp-swap-comparison/useDappSwapComparisonRewardText":7518,"../../transactions/quote-swap-simulation-details/quote-swap-simulation-details":7411,"../info/shared/network-row/network-row":7269,"@metamask/design-system-react":1741,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DappSwapComparisonBanner=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@metamask/design-system-react"),r=e("react-redux"),s=e("../../../../../selectors/remote-feature-flags"),i=e("../../../../../hooks/useI18nContext"),l=e("../../../../../components/app/confirm/info/row/section"),c=e("../../../../../components/ui/tabs"),u=e("../../../hooks/transactions/dapp-swap-comparison/useDappSwapComparisonInfo"),d=e("../../../hooks/transactions/dapp-swap-comparison/useDappSwapComparisonMetrics"),m=e("../../../hooks/transactions/dapp-swap-comparison/useDappSwapCheck"),p=e("../../../hooks/transactions/dapp-swap-comparison/useDappSwapComparisonRewardText"),f=e("../../../context/dapp-swap"),g=e("../../transactions/quote-swap-simulation-details/quote-swap-simulation-details"),h=e("../info/shared/network-row/network-row");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}var v=function(e){return e.Current="current",e.Metamask="metamask",e}(v||{});const b=a.default.memo(({onTabClick:e,activeTabKey:t})=>{const n=(0,i.useI18nContext)();return a.default.createElement(c.Tabs,{defaultActiveTabKey:t,activeTabKey:t,onTabClick:e,tabListProps:{className:"dapp-swap__tabs"}},a.default.createElement(c.Tab,{tabKey:v.Current,name:n("marketRate"),className:"flex-1","data-testid":"market-rate-tab"}),a.default.createElement(c.Tab,{tabKey:v.Metamask,name:n("metamaskSwap"),className:"flex-1 animate-mm-swap-text","data-testid":"metamask-swap-tab"}))}),k=()=>{const e=(0,i.useI18nContext)(),{fiatRates:t,gasDifference:n,minDestTokenAmountInUSD:c,selectedQuote:m,selectedQuoteValueDifference:y,sourceTokenAmount:k,tokenAmountDifference:x,tokenDetails:T}=(0,u.useDappSwapComparisonInfo)(),{captureDappSwapComparisonDisplayProperties:C}=(0,d.useDappSwapComparisonMetrics)(),{dappSwapUi:E,dappSwapQa:w}=(0,r.useSelector)(s.getRemoteFeatureFlags),{setQuotedSwapDisplayedInInfo:_,setSelectedQuote:S}=(0,f.useDappSwapContext)(),I=(0,p.useDappSwapComparisonRewardText)(),[M,A]=(0,a.useState)(v.Current),[P,D]=(0,a.useState)(!0),O=(0,a.useCallback)(e=>{e.stopPropagation(),D(!1)},[D]),B=(0,a.useCallback)(()=>{_(!1),A(v.Current)},[_,A]),N=(0,a.useCallback)(()=>{_(!0),C({swap_mm_opened:"true"}),A(v.Metamask),D(!1)},[C,_,A,D,m]),F=(0,a.useCallback)(e=>{e===v.Current?B():e===v.Metamask&&N()},[B,N]),R=(null==E?void 0:E.enabled)&&(y>=((null==E?void 0:E.threshold)??.01)||(null==w?void 0:w.enabled)&&m);if((0,a.useEffect)(()=>{R&&C({swap_mm_cta_displayed:"true"})},[C,R]),(0,a.useEffect)(()=>{S(m)},[m,S]),!R)return null;const j=M===v.Current;return a.default.createElement(o.Box,null,a.default.createElement(b,{onTabClick:F,activeTabKey:M}),P&&j&&a.default.createElement(o.Box,{className:"dapp-swap_callout",backgroundColor:o.BoxBackgroundColor.BackgroundSection,marginBottom:4,padding:3,role:"button",onClick:N},a.default.createElement(o.ButtonIcon,{className:"dapp-swap_close-button",iconName:o.IconName.Close,size:o.ButtonIconSize.Sm,onClick:O,ariaLabel:"close-dapp-swap-comparison-banner"}),a.default.createElement("div",{className:"dapp-swap_callout-arrow"}),a.default.createElement(o.Text,{className:"dapp-swap_callout-text",color:o.TextColor.TextDefault,variant:o.TextVariant.BodySm},e("dappSwapAdvantage")),a.default.createElement(o.Text,{className:"dapp-swap_text-save",color:o.TextColor.TextAlternative,variant:o.TextVariant.BodyXs},e("dappSwapQuoteDifference",[`$${(n+x).toFixed(2)}`]),I&&a.default.createElement("span",null,`  ${I.text}`)),a.default.createElement(o.Text,{color:o.TextColor.TextAlternative,variant:o.TextVariant.BodyXs},e("dappSwapBenefits"))),M===v.Metamask&&a.default.createElement(a.default.Fragment,null,a.default.createElement(g.QuoteSwapSimulationDetails,{fiatRates:t,quote:m,tokenDetails:T,sourceTokenAmount:k,tokenAmountDifference:x,minDestTokenAmountInUSD:c}),a.default.createElement(l.ConfirmInfoSection,{"data-testid":"transaction-details-section"},a.default.createElement(h.NetworkRow,null))))};n.DappSwapComparisonBanner=()=>{const{dappSwapMetrics:e}=(0,r.useSelector)(s.getRemoteFeatureFlags),{isSwapToBeCompared:t}=(0,m.useDappSwapCheck)();return!0===(null==e?void 0:e.enabled)&&t?a.default.createElement(k,null):null}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/dapp-swap-comparison-banner/dapp-swap-comparison-banner.tsx"}],[7201,{"../../../../../../shared/constants/metametrics":5613,"../../../../../../shared/lib/confirmation.utils":5650,"../../../../../components/app/alert-system/confirm-alert-modal":5776,"../../../../../components/component-library":6325,"../../../../../components/multichain/pages/page":6674,"../../../../../helpers/constants/design-system":6899,"../../../../../helpers/constants/routes":6904,"../../../../../hooks/subscription/useSubscription":7022,"../../../../../hooks/useAlerts":7027,"../../../../../hooks/useI18nContext":7047,"../../../../../selectors":7886,"../../../../../store/actions":7916,"../../../context/confirm":7449,"../../../hooks/gas/useIsGaslessLoading":7487,"../../../hooks/transactions/useEnableShieldCoverageChecks":7520,"../../../hooks/transactions/useTransactionConfirm":7523,"../../../hooks/useAddEthereumChain":7524,"../../../hooks/useConfirmActions":7530,"../../../hooks/useConfirmationNavigation":7535,"../../../hooks/useOriginThrottling":7556,"../../../utils":7585,"../utils":7335,"./origin-throttle-modal":7203,"./shield-footer-agreement":7204,"./shield-footer-coverage-indicator/shield-footer-coverage-indicator":7205,"@metamask/subscription-controller":2806,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021,"react-router-dom":5048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("@metamask/transaction-controller"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=B(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("react-redux"),s=e("@metamask/subscription-controller"),i=e("react-router-dom"),l=e("../../../../../../shared/constants/metametrics"),c=e("../../../../../../shared/lib/confirmation.utils"),u=e("../../../../../components/app/alert-system/confirm-alert-modal"),d=e("../../../../../components/component-library"),m=e("../../../../../components/multichain/pages/page"),p=e("../../../../../helpers/constants/design-system"),f=e("../../../../../helpers/constants/routes"),g=O(e("../../../../../hooks/useAlerts")),h=e("../../../../../hooks/useI18nContext"),y=e("../../../../../selectors"),v=e("../../../hooks/useConfirmationNavigation"),b=e("../../../../../store/actions"),k=e("../../../context/confirm"),x=e("../../../hooks/gas/useIsGaslessLoading"),T=e("../../../hooks/transactions/useEnableShieldCoverageChecks"),C=e("../../../hooks/transactions/useTransactionConfirm"),E=e("../../../hooks/useConfirmActions"),w=e("../../../hooks/useOriginThrottling"),_=e("../../../hooks/useAddEthereumChain"),S=e("../../../utils"),I=e("../utils"),M=e("../../../../../hooks/subscription/useSubscription"),A=O(e("./origin-throttle-modal")),P=O(e("./shield-footer-agreement")),D=O(e("./shield-footer-coverage-indicator/shield-footer-coverage-indicator"));function O(e){return e&&e.__esModule?e:{default:e}}function B(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(B=function(e){return e?n:t})(e)}function N(e,t,n){return!!t||!e&&n}const F=({alertOwnerId:e="",disabled:t,onSubmit:n,onCancel:r})=>{const i=(0,h.useI18nContext)(),{currentConfirmation:l}=(0,k.useConfirmContext)(),[c,m]=(0,o.useState)(!1),{alerts:f,hasDangerAlerts:y,hasUnconfirmedDangerAlerts:v,hasUnconfirmedFieldDangerAlerts:b,unconfirmedFieldDangerAlerts:x}=(0,g.default)(e),T=f.some(e=>e.severity===p.Severity.Danger&&e.isBlocking),C=(0,o.useCallback)(()=>{m(!1)},[]),E=(0,o.useCallback)(()=>{m(!0)},[]),{trialedProducts:w}=(0,M.useUserSubscriptions)(),_=null==w?void 0:w.includes(s.PRODUCT_TYPES.SHIELD);return o.default.createElement(o.default.Fragment,null,c&&o.default.createElement(u.ConfirmAlertModal,{ownerId:e,onClose:C,onCancel:r,onSubmit:n}),y?o.default.createElement(d.Button,{block:!0,danger:!0,"data-testid":"confirm-footer-button",disabled:N(v,T,t),onClick:E,size:d.ButtonSize.Lg,startIconName:b?d.IconName.SecuritySearch:d.IconName.Danger},function(e,t){return 1===e.length?t("reviewAlert"):e.length>1?t("reviewAlerts"):t("confirm")}(x,i)):o.default.createElement(d.Button,{block:!0,"data-testid":"confirm-footer-button",disabled:t,onClick:n,size:d.ButtonSize.Lg},(null==l?void 0:l.type)===a.TransactionType.shieldSubscriptionApprove?i(_?"shieldStartNowCTA":"shieldStartNowCTAWithTrial"):i("confirm")))},R=({handleFooterCancel:e})=>{const t=(0,h.useI18nContext)(),{currentConfirmation:n}=(0,k.useConfirmContext)();return(null==n?void 0:n.type)===a.TransactionType.shieldSubscriptionApprove?null:o.default.createElement(d.Button,{block:!0,"data-testid":"confirm-footer-cancel-button",onClick:e,size:d.ButtonSize.Lg,variant:d.ButtonVariant.Secondary},t("cancel"))};n.default=()=>{const e=(0,r.useDispatch)(),t=(0,i.useHistory)(),{onTransactionConfirm:n}=(0,C.useTransactionConfirm)(),{navigateNext:a}=(0,v.useConfirmationNavigation)(),{onSubmit:s}=(0,_.useAddEthereumChain)(),{currentConfirmation:u,isScrollToBottomCompleted:g}=(0,k.useConfirmContext)(),{isGaslessLoading:h}=(0,x.useIsGaslessLoading)(),{from:M}=(0,I.getConfirmationSender)(u),{shouldThrottleOrigin:O}=(0,w.useOriginThrottling)(),[B,N]=(0,o.useState)(!1),{onCancel:j,resetTransactionState:L}=(0,E.useConfirmActions)(),$=(0,r.useSelector)(e=>{if(M){return!!1&&(0,y.doesAddressRequireLedgerHidConnection)(e,M)}return!1}),W=(0,S.isSignatureTransactionType)(u),q=(0,c.isCorrectDeveloperTransactionType)(null==u?void 0:u.type),U=(0,_.isAddEthereumChainType)(u),V=!g&&!W||$||h,G=(0,o.useCallback)(async()=>{u&&(U?(await s(),t.push(f.DEFAULT_ROUTE)):q?(await n(),a(u.id)):(await e((0,b.resolvePendingApproval)(u.id,undefined)),a(u.id)),L())},[u,e,t,q,U,a,n,L,s]),z=(0,o.useCallback)(async()=>{O?N(!0):(await j({location:l.MetaMetricsEventLocation.Confirmation}),U?t.push(f.DEFAULT_ROUTE):a(u.id))},[a,j,O,u,U,t]),{isEnabled:H,isPaused:Q}=(0,T.useEnableShieldCoverageChecks)(),K=H||Q;return o.default.createElement(o.default.Fragment,null,o.default.createElement(D.default,null),o.default.createElement(m.Footer,{className:"confirm-footer_page-footer",flexDirection:p.FlexDirection.Column,style:K?{boxShadow:"0 4px 16px -8px var(--color-shadow-default)"}:undefined},o.default.createElement(A.default,{isOpen:B,onConfirmationCancel:j}),o.default.createElement(d.Box,{display:p.Display.Flex,flexDirection:p.FlexDirection.Row,gap:4},o.default.createElement(R,{handleFooterCancel:z}),o.default.createElement(F,{alertOwnerId:null==u?void 0:u.id,onSubmit:G,disabled:V,onCancel:j})),o.default.createElement(P.default,null)))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/footer.tsx"}],[7202,{"./footer":7201},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Footer",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./footer"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/index.tsx"}],[7203,{"../../../../../../shared/constants/metametrics":5613,"../../../../../components/component-library":6325,"../../../../../components/ui/origin-pill/origin-pill":6797,"../../../../../contexts/i18n":6850,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useModalProps":7051,"../../../hooks/useOriginThrottling":7556,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({isOpen:e,onConfirmationCancel:t}){const{hideModal:n}=(0,r.useModalProps)(),[a,i]=(0,o.useState)(!1);return o.default.createElement(s.Modal,{isOpen:e,onClose:()=>{n()},isClosedOnOutsideClick:!1,isClosedOnEscapeKey:!1},o.default.createElement(s.ModalOverlay,{"data-testid":"modal-overlay"}),a?o.default.createElement(f,{onConfirmationCancel:t}):o.default.createElement(p,{onConfirmationCancel:t,setIsTemporaryBlock:i}))};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=e("../../../../../hooks/useModalProps"),s=e("../../../../../components/component-library"),i=e("../../../../../helpers/constants/design-system"),l=e("../../../../../contexts/i18n"),c=e("../../../hooks/useOriginThrottling"),u=(a=e("../../../../../components/ui/origin-pill/origin-pill"))&&a.__esModule?a:{default:a},d=e("../../../../../../shared/constants/metametrics");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const p=({onConfirmationCancel:e,setIsTemporaryBlock:t})=>{const n=(0,o.useContext)(l.I18nContext),{origin:a,resetOrigin:r}=(0,c.useOriginThrottling)();return o.default.createElement(s.ModalContent,{size:s.ModalContentSize.Md},o.default.createElement(s.Box,{justifyContent:i.JustifyContent.center,display:i.Display.Flex,marginBottom:4},o.default.createElement(s.Icon,{name:s.IconName.Warning,size:s.IconSize.Xl,color:i.IconColor.warningDefault})),o.default.createElement(s.ModalHeader,{endAccessory:o.default.createElement(o.default.Fragment,null)},n("spamModalTitle")),o.default.createElement(u.default,{style:{marginTop:0,marginBottom:20},origin:a,dataTestId:"origin-pill"}),o.default.createElement(s.ModalBody,null,o.default.createElement(s.Text,{textAlign:i.TextAlign.Center,as:"p","data-testid":"confirmation-text"},n("spamModalDescription"))),o.default.createElement(s.ModalFooter,{paddingTop:4,onSubmit:()=>{e({location:d.MetaMetricsEventLocation.OriginThrottleModal}),r()},onCancel:()=>{t(!0)},containerProps:{alignItems:i.AlignItems.stretch,flexDirection:i.FlexDirection.Column},submitButtonProps:{children:n("cancel"),size:s.ButtonSize.Lg},cancelButtonProps:{children:n("spamModalTemporaryBlockButton"),size:s.ButtonSize.Lg}}))},f=({onConfirmationCancel:e})=>{const t=(0,o.useContext)(l.I18nContext);return o.default.createElement(s.ModalContent,{size:s.ModalContentSize.Md},o.default.createElement(s.Box,{justifyContent:i.JustifyContent.center,display:i.Display.Flex,marginBottom:4},o.default.createElement(s.Icon,{name:s.IconName.Confirmation,size:s.IconSize.Xl,color:i.IconColor.successDefault})),o.default.createElement(s.ModalHeader,{endAccessory:o.default.createElement(o.default.Fragment,null)},t("spamModalBlockedTitle")),o.default.createElement(s.ModalBody,null,o.default.createElement(s.Text,{textAlign:i.TextAlign.Center,as:"p","data-testid":"confirmation-text"},t("spamModalBlockedDescription"))),o.default.createElement(s.ModalFooter,{paddingTop:4,onSubmit:()=>e({location:d.MetaMetricsEventLocation.OriginThrottleModal}),submitButtonProps:{children:t("gotIt"),size:s.ButtonSize.Lg}}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/origin-throttle-modal.tsx"}],[7204,{"../../../../../../shared/lib/ui-utils":5725,"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,"@metamask/transaction-controller":2868,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=e("@metamask/transaction-controller"),r=(a=e("react"))&&a.__esModule?a:{default:a},s=e("../../../../../components/component-library"),i=e("../../../../../helpers/constants/design-system"),l=e("../../../../../hooks/useI18nContext"),c=e("../../../context/confirm"),u=e("../../../../../../shared/lib/ui-utils");n.default=()=>{const{currentConfirmation:e}=(0,c.useConfirmContext)(),t=(0,l.useI18nContext)();return(null==e?void 0:e.type)!==o.TransactionType.shieldSubscriptionApprove?null:r.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Row,justifyContent:i.JustifyContent.center,gap:4},r.default.createElement(s.Text,{variant:i.TextVariant.bodySm,color:i.TextColor.textAlternative},t("shieldFooterAgreement",[r.default.createElement(s.ButtonLink,{href:u.SHIELD_TERMS_OF_USE_URL,size:s.ButtonLinkSize.Inherit,externalLink:!0,key:"shield-footer-agreement-button"},t("snapsTermsOfUse"))])))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/shield-footer-agreement.tsx"}],[7205,{"../../../../../../../shared/lib/confirmation.utils":5650,"../../../../../../components/app/confirm/info/row/alert-row/alert-row":5867,"../../../../../../components/app/confirm/info/row/constants":5868,"../../../../../../components/component-library":6325,"../../../../../../helpers/constants/design-system":6899,"../../../../../../hooks/useAlerts":7027,"../../../../../../hooks/useI18nContext":7047,"../../../../context/confirm":7449,"../../../../hooks/transactions/useEnableShieldCoverageChecks":7520,"../../../../utils":7585,"./shield-icon-animation":7206,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../../../../components/app/confirm/info/row/alert-row/alert-row"),r=e("../../../../../../components/app/confirm/info/row/constants"),s=e("../../../../../../components/component-library"),i=e("../../../../../../helpers/constants/design-system"),l=e("../../../../../../hooks/useI18nContext"),c=e("../../../../context/confirm"),u=e("../../../../hooks/transactions/useEnableShieldCoverageChecks"),d=e("../../../../utils"),m=e("../../../../../../../shared/lib/confirmation.utils"),p=g(e("../../../../../../hooks/useAlerts")),f=g(e("./shield-icon-animation"));function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,l.useI18nContext)(),{currentConfirmation:t}=(0,c.useConfirmContext)(),n=(0,d.isSignatureTransactionType)(t),g=(0,m.isCorrectDeveloperTransactionType)(null==t?void 0:t.type),{getFieldAlerts:h}=(0,p.default)((null==t?void 0:t.id)??""),y=h(r.RowAlertKey.ShieldFooterCoverageIndicator)[0],v=null==y?void 0:y.severity,{isEnabled:b,isPaused:k}=(0,u.useEnableShieldCoverageChecks)(),x=(n||g)&&(b||k),T=(0,a.useMemo)(()=>k?i.Severity.Warning:v,[k,v]);return t&&x?a.default.createElement(s.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Row,alignItems:i.AlignItems.center,paddingLeft:4,paddingRight:4,style:{boxShadow:"0 -4px 16px -8px var(--color-shadow-default)"}},a.default.createElement(s.Box,{marginTop:2},a.default.createElement(f.default,{severity:T,playAnimation:!k})),a.default.createElement(o.ConfirmInfoAlertRow,{alertKey:r.RowAlertKey.ShieldFooterCoverageIndicator,ownerId:t.id,label:"",labelChildren:a.default.createElement(s.Text,{variant:i.TextVariant.bodyMdMedium,color:i.TextColor.inherit},e("transactionShield")),style:{marginBottom:0,alignItems:i.AlignItems.center,width:"100%"},showAlertLoader:!0})):null}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/shield-footer-coverage-indicator/shield-footer-coverage-indicator.tsx"}],[7206,{"../../../../../../contexts/rive-wasm":6857,"../../../../../../helpers/constants/design-system":6899,"@metamask/design-system-react":1741,"@rive-app/react-canvas":2992,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@rive-app/react-canvas"),r=e("@metamask/design-system-react"),s=e("../../../../../../contexts/rive-wasm"),i=e("../../../../../../helpers/constants/design-system");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const c="Malicious",u="Covered",d="Paused",m="Not_covered";n.default=({severity:e=i.Severity.Info,playAnimation:t=!1})=>{const n=Boolean(!1),l=(0,s.useRiveWasmContext)(),{isWasmReady:p,error:f}=l,{buffer:g,error:h,loading:y}=(0,s.useRiveWasmFile)("./images/riv_animations/shield_icon.riv");(0,a.useEffect)(()=>{f&&console.error("[Rive] Failed to load WASM:",f),h&&console.error("[Rive] Failed to load buffer:",h)},[f,h]);const{riveFile:v,status:b}=(0,o.useRiveFile)({buffer:g}),{rive:k,RiveComponent:x}=(0,o.useRive)({riveFile:v??undefined,stateMachines:v?"Shield_Icon":undefined,autoplay:!1,layout:new o.Layout({fit:o.Fit.Contain,alignment:o.Alignment.Center})}),T=(0,a.useCallback)(t=>{if(!t)return;const n=(e=>({malicious:e.find(e=>e.name===c),covered:e.find(e=>e.name===u),warning:e.find(e=>e.name===d),notCovered:e.find(e=>e.name===m)}))(t);(e=>{e.malicious&&(e.malicious.value=!1),e.covered&&(e.covered.value=!1),e.warning&&(e.warning.value=!1),e.notCovered&&(e.notCovered.value=!1)})(n),((e,t)=>{e===i.Severity.Danger&&t.malicious?t.malicious.value=!0:e===i.Severity.Success&&t.covered?t.covered.value=!0:e===i.Severity.Warning&&t.warning?t.warning.value=!0:t.notCovered&&(t.notCovered.value=!0)})(e,n)},[e]);return(0,a.useEffect)(()=>{if(k&&p&&!y&&g){const e=k.stateMachineInputs("Shield_Icon");if(e&&(T(e),t)){const t=e.find(e=>"Start"===e.name);t&&t.fire(),k.play()}}},[k,p,y,g,e,t,T]),!p||y||!g||"loading"===b||n||"failed"===b?a.default.createElement(r.Box,{className:"riv-animation__shield-icon-container"}):a.default.createElement(r.Box,{className:"riv-animation__shield-icon-container"},a.default.createElement(x,{className:"riv-animation__canvas"}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/footer/shield-footer-coverage-indicator/shield-icon-animation.tsx"}],[7207,{"../../../../../components/component-library":6325,"../../../../../components/ui/tooltip":6835,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../../../store/actions":7916,"../../../context/confirm":7449,"../../../selectors/preferences":7573,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AdvancedDetailsButton=void 0;var a=e("@metamask/transaction-controller"),o=p(e("react")),r=e("react-redux"),s=e("../../../../../components/component-library"),i=p(e("../../../../../components/ui/tooltip")),l=e("../../../../../helpers/constants/design-system"),c=e("../../../../../hooks/useI18nContext"),u=e("../../../../../store/actions"),d=e("../../../context/confirm"),m=e("../../../selectors/preferences");function p(e){return e&&e.__esModule?e:{default:e}}n.AdvancedDetailsButton=()=>{const e=(0,c.useI18nContext)(),t=(0,r.useDispatch)(),{currentConfirmation:n}=(0,d.useConfirmContext)(),p=(0,r.useSelector)(m.selectConfirmationAdvancedDetailsOpen);return o.default.createElement(s.Box,{backgroundColor:p?l.BackgroundColor.infoMuted:l.BackgroundColor.transparent,borderRadius:l.BorderRadius.MD,marginRight:1,style:(null==n?void 0:n.type)===a.TransactionType.shieldSubscriptionApprove?{visibility:"hidden"}:{}},o.default.createElement(i.default,{title:e(p?"hideAdvancedDetails":"showAdvancedDetails")},o.default.createElement(s.ButtonIcon,{ariaLabel:"Advanced tx details",color:l.IconColor.iconDefault,iconName:s.IconName.Customize,"data-testid":"header-advanced-details-button",size:s.ButtonIconSize.Md,onClick:()=>{var e;e=!p,t((0,u.setConfirmationAdvancedDetailsOpen)(e))}})))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/header/advanced-details-button.tsx"}],[7208,{"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"./advanced-details-button":7207,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DAppInitiatedHeader=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},r=e("../../../../../components/component-library"),s=e("../../../../../helpers/constants/design-system"),i=e("../../../../../hooks/useI18nContext"),l=e("./advanced-details-button");n.DAppInitiatedHeader=()=>{const e=(0,i.useI18nContext)();return o.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Row,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center,backgroundColor:s.BackgroundColor.backgroundDefault,paddingInline:3,paddingTop:4,paddingBottom:4,style:{zIndex:2,position:"relative"}},o.default.createElement(r.Text,{variant:s.TextVariant.headingSm,color:s.TextColor.inherit},e("transferRequest")),o.default.createElement(r.Box,{paddingRight:3,style:{marginLeft:"auto",position:"absolute",right:0}},o.default.createElement(l.AdvancedDetailsButton,null)))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/header/dapp-initiated-header.tsx"}],[7209,{"../../../../../../shared/constants/metametrics":5613,"../../../../../../shared/lib/confirmation.utils":5650,"../../../../../components/app/confirm/info/row":5875,"../../../../../components/app/confirm/info/row/currency":5870,"../../../../../components/app/preferred-avatar":6033,"../../../../../components/component-library":6325,"../../../../../components/multichain":6568,"../../../../../components/ui/tooltip/tooltip":6836,"../../../../../contexts/metametrics":6855,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../../../selectors/selectors":7903,"../../../context/confirm":7449,"../../../hooks/useBalance":7527,"../../../hooks/useConfirmationRecipientInfo":7537,"../../../utils/confirm":7584,"./advanced-details-button":7207,"@metamask/design-system-react":1741,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var s=o?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(a,r,s):a[r]=e[r]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),r=e("@metamask/design-system-react"),s=e("../../../../../../shared/constants/metametrics"),i=e("../../../../../components/app/confirm/info/row"),l=e("../../../../../components/app/confirm/info/row/currency"),c=e("../../../../../components/component-library"),u=e("../../../../../components/multichain"),d=C(e("../../../../../components/ui/tooltip/tooltip")),m=e("../../../../../contexts/metametrics"),p=e("../../../../../helpers/constants/design-system"),f=e("../../../../../hooks/useI18nContext"),g=e("../../../context/confirm"),h=e("../../../hooks/useBalance"),y=C(e("../../../hooks/useConfirmationRecipientInfo")),v=e("../../../utils/confirm"),b=e("../../../../../../shared/lib/confirmation.utils"),k=e("../../../../../components/app/preferred-avatar"),x=e("../../../../../selectors/selectors"),T=e("./advanced-details-button");function C(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}n.default=()=>{var e;const t=(0,a.useContext)(m.MetaMetricsContext),n=(0,o.useSelector)(x.getHDEntropyIndex),[C,E]=a.default.useState(!1),{currentConfirmation:w}=(0,g.useConfirmContext)(),{senderAddress:_,senderName:S,walletName:I,isBIP44:M,hasMoreThanOneWallet:A}=(0,y.default)(),P=(0,f.useI18nContext)(),{balance:D}=(0,h.useBalance)(_),O=(0,v.isSignatureTransactionType)(w)?{location:s.MetaMetricsEventLocation.SignatureConfirmation,signature_type:null==w||null===(e=w.msgParams)||void 0===e?void 0:e.signatureMethod,hd_entropy_index:n}:{location:s.MetaMetricsEventLocation.Transaction,transaction_type:null==w?void 0:w.type,hd_entropy_index:n};const B=(0,b.isCorrectDeveloperTransactionType)(null==w?void 0:w.type);return a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Box,{display:p.Display.Flex,justifyContent:p.JustifyContent.flexEnd,style:{alignSelf:"flex-end"}},a.default.createElement(d.default,{position:"bottom",title:P("accountDetails"),interactive:!0},a.default.createElement(c.ButtonIcon,{ariaLabel:P("accountDetails"),color:p.IconColor.iconDefault,iconName:c.IconName.Info,size:c.ButtonIconSize.Md,onClick:()=>{!function(){const e={category:s.MetaMetricsEventCategory.Confirmations,event:s.MetaMetricsEventName.AccountDetailsOpened,properties:{action:"Confirm Screen",...O}};t(e)}(),E(!0)},"data-testid":"header-info__account-details-button"})),B&&a.default.createElement(T.AdvancedDetailsButton,null)),a.default.createElement(c.Modal,{isOpen:C,onClose:()=>E(!1),"data-testid":"account-details-modal",isClosedOnEscapeKey:!1,isClosedOnOutsideClick:!1},a.default.createElement(c.ModalOverlay,null),a.default.createElement(c.ModalContent,null,a.default.createElement(c.ModalHeader,null,a.default.createElement(c.Box,{display:p.Display.Flex,justifyContent:p.JustifyContent.center,style:{position:"relative"}},a.default.createElement(c.Box,{style:{margin:"0 auto"},display:p.Display.Flex,justifyContent:p.JustifyContent.center,flexDirection:p.FlexDirection.Column,alignItems:p.AlignItems.center},a.default.createElement(k.PreferredAvatar,{address:_,size:r.AvatarAccountSize.Lg}),a.default.createElement(c.Text,{fontWeight:p.FontWeight.Bold,variant:p.TextVariant.bodyMd,color:p.TextColor.textDefault,marginTop:2,"data-testid":"confirmation-account-details-modal__account-name"},S),M&&A&&a.default.createElement(c.Text,{variant:p.TextVariant.bodySm,color:p.TextColor.textAlternative,marginTop:1},I)),a.default.createElement(c.Box,{style:{position:"absolute",right:0}},a.default.createElement(c.ButtonIcon,{ariaLabel:P("close"),iconName:c.IconName.Close,size:c.ButtonIconSize.Sm,className:"confirm_header__close-button",onClick:()=>E(!1),"data-testid":"confirmation-account-details-modal__close-button"})))),a.default.createElement(c.ModalBody,null,a.default.createElement(i.ConfirmInfoRow,{label:"Account address"},a.default.createElement(u.AddressCopyButton,{address:_,shorten:!0})),a.default.createElement(i.ConfirmInfoRow,{label:"Balance"},a.default.createElement(l.ConfirmInfoRowCurrency,{value:D??0,"data-testid":"confirmation-account-details-modal__account-balance"}))))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/confirm/header/header-info.tsx"}]],[],{});