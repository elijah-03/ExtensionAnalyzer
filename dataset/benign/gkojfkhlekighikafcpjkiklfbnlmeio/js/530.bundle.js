// LICENSE_CODE ZON
"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[530],{6325:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(56);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _util_util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1291);var _util_util_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_util_util_js__WEBPACK_IMPORTED_MODULE_1__);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9824);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_zerr_js__WEBPACK_IMPORTED_MODULE_2__);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_3__);var _util_date_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(932);var _util_date_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_util_date_js__WEBPACK_IMPORTED_MODULE_4__);var _bext_vpn_ui_react_util_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(695);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5250);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6__);var _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4718);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7345);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8__);var conf__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9641);
// LICENSE_CODE ZON
function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==typeof i?i:i+""}function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default().assert_ui("be_ui_context");const{SEC}=_util_date_js__WEBPACK_IMPORTED_MODULE_4___default().ms,{perr}=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"];const E={};const{CG}=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default();E.App_context=react__WEBPACK_IMPORTED_MODULE_0___default().createContext();const get_test_sa2025_data=()=>{if(!CG("debug.sa2025"))return null;const test_mode=CG("debug.sa2025_test_mode");if(!test_mode||test_mode=="auto")return null;if(test_mode=="refund")return["refund",1];if(test_mode=="membership_7")return["membership",7];if(test_mode=="membership_14")return["membership",14];return null};E.Provider=class App_context_provider extends _bext_vpn_ui_react_util_js__WEBPACK_IMPORTED_MODULE_5__.Z.PureComponent{constructor(...args){super(...args);_defineProperty(this,"state",{enabled:true,is_tpopup:_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default().is_tpopup(),src_country:null,ip:null,rule:null,user:null,is_premium:false,is_ultra:false,trial:null,trial_state:null,is_trial_expired:null,trial_need_signin:null,three_days_trial:null,limited_currencies:null,is_watermark_small:false,is_watermark_popcorn:false,mitm_dialog:null,url:"",root_url:"",redirects:[],busy_info:{},busy:false,error:false,inited:false,proxy_error:false,dev_mode:false,ext_conflict:false,incognito_allowed:false,no_permission:false,agree_ts:1,watermark_pos:null,is_onboarding_flow:false,onboarding_flow_country:"",is_blocked_by_av:false,set_watermark_pos:pos=>this.set_watermark_pos(pos),set_error:error=>this.setState({error}),force_trial_update:()=>this.update_trial(),hola_url:conf__WEBPACK_IMPORTED_MODULE_9__.url_site+"/"})}componentDidMount(){const _this=this;this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){this.catch(e=>{perr("be_ui_context_init_err",undefined,{err:e});_this.setState({error:e})});if(!_this.props.tpopup_type&&_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_active())_this.update_info();yield _this.update_url();yield _this.update_location();yield _this.update_enabled();yield _this.update_user();yield _this.update_trial();yield _this.update_mitm();yield _this.update_status();yield _this.update_conflict();yield _this.update_no_permission();yield _this.update_agree_ts();yield _this.update_suspended();yield _this.update_dev_mode();yield _this.update_rule();yield _this.update_proxy_error();yield _this.update_watermark_pos();yield _this.update_onboarding_flow();yield _this.update_onboarding_flow_country();_this.update_av_block();_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"url_changed",_this.update_url);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"location_changed",_this.update_location);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"enabled_changed",_this.update_enabled);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"trial_start trial_wait_start trial_wait_stop "+"trial_wait_end trial_change rule_changed svc_change "+"svc_info_changed",_this.update_trial);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"mitm_change rule_changed",_this.update_mitm);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"trial_end",_this.on_trial_end);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"user_changed",_this.update_user);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"rule_changed",_this.update_rule);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"ext_active_changed",_this.update_rule);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"ext_suspended_changed",_this.update_rule);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"status_changed",_this.update_status);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"set_tab_state",_this.on_tab_state);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"ext_conflict_changed",_this.update_conflict);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"no_permission_changed",_this.update_no_permission);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"agree_ts_changed",_this.update_agree_ts);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"ext_suspended_changed",_this.update_suspended);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"dev_mode_changed",_this.update_dev_mode);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"user_action_error",_this.on_user_action_error);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"tab_load_err",_this.update_proxy_error);_this.on(_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"],"is_blocked_by_av_changed",_this.update_av_block);_this.setState({inited:true,incognito_allowed:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].is_incognito_allowed(),hola_url:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_selected_url({name:"hola",url:conf__WEBPACK_IMPORTED_MODULE_9__.url_site+"/"})})}))}componentDidUpdate(prev_props,prev_state){let{state,props}=this;let changed_root_url=prev_state.root_url!=state.root_url;let changed_url=prev_state.url!=state.url;let changed_user=prev_state.user!=state.user;if(changed_root_url||changed_user){this.update_trial();this.update_mitm();this.update_rule()}if(changed_url)this.update_watermark_pos();if(!props.tpopup_type&&state.rule&&_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().get(prev_state,"rule.country")!=_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().get(state,"rule.country")){_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].trigger_bg("popup_open",state.rule)}if(prev_state.busy!=state.busy){this.clear_timer("busy_timer");this.clear_timer("very_busy_timer");if(state.busy&&!props.tpopup_type){this.set_timer("busy_timer",()=>{perr("be_ui_vpn_busy_slow",state.busy_info);this.set_timer("very_busy_timer",()=>{perr("be_ui_vpn_busy_very_slow",state.busy_info)},13*SEC)},7*SEC)}}}setState(state){return _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().cb_apply(super.setState,this,[state])}update_info(){_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].update_svc_info();_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].refresh_user({force_premium:true,reason:"popup_open"})}update_location(){const{country,ip}=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_location()||{};this.setState({src_country:country,ip});this.clear_timer("country_timer");if(country){if(this.no_country_perr_sent&&!this.props.tpopup_type)perr("be_ui_vpn_no_country_recover",{country},{err:true});return}if(!this.props.tpopup_type){this.set_timer("country_timer",()=>{_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].no_country_perr();this.no_country_perr_sent=true},3*SEC)}}update_rule(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){let tab_id=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_tab_id(),url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_url();_this.setState({rule:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_enabled_rule({tab_id,url}),disabled_rule:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_disabled_rule({tab_id,url})})}))}update_proxy_error(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){let tab_id=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_tab_id();let proxy_error=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_tab_load_err(tab_id);_this.setState({proxy_error})}))}update_mitm(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){const root_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_root_url();_this.setState({mitm_dialog:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_mitm_dialog(root_url)})}))}update_status(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){const wait=300-(Date.now()-(_this.update_status_ts||0));if(wait>0)yield _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().sleep(wait);let s={busy_info:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_busy_info()};s.busy=s.busy_info.busy;_this.setState(s);_this.update_status_ts=Date.now()}))}on_tab_state(event){if(!["fix_vpn_err","set_rule_err"].includes(event.curr))return;this.setState({error:true});if(!this.props.tpopup_type)perr("be_ui_vpn_tab_state",{state:event})}on_user_action_error(event){if(!_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_enabled())return;perr("be_ui_user_action_error",undefined,{err:event});this.setState({error:true})}update_url(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){let root_url_prev=_this.state.root_url;let url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_url(),root_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_root_url();let redirects=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_redirect_urls();_this.setState({url,root_url,redirects});if(root_url_prev&&root_url_prev!=root_url&&!_this.props.tpopup_type){let info={root_url,root_url_prev,ext_enabled:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_active(),ext_suspended:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_suspended()};if(window.hola)info.t=Date.now()-window.hola.t.l_start;perr("be_ui_vpn_root_url_changed",info,{err:true})}}))}update_enabled(){this.setState({enabled:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_enabled()})}update_user(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){let is_premium=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_premium();let is_ultra=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_ultra();let user=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_user();let test_data=get_test_sa2025_data();if(!user)return _this.setState({user:null,is_premium,is_ultra});_this.setState({is_premium,is_ultra,user:{is_paid:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].is_paid(),display_name:user.displayName,verified:user.verified,hola_uid:user.hola_uid,no_log:user.no_log,email:_util_util_js__WEBPACK_IMPORTED_MODULE_1___default().get(user.emails,"0.value"),sa2025:test_data||user.sa2025}})}))}update_trial(){let _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){const root_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_root_url();const user=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_user();const is_premium=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_premium();let trial=null,trial_state;let is_trial_expired=false;let need_trial=false;let trial_need_signin=false;let three_days_trial=false;let limited_currencies=false;let is_watermark_small=false;let is_watermark_popcorn=false;let is_watermark_hidden=false;let can_hide_watermark=false;let can_skip_signin=false;let is_unlimited_trial=false;if(!is_premium){trial=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_trial_active(root_url);trial_state=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_trial_active(root_url,true);is_trial_expired=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].is_trial_expired(root_url);need_trial=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].need_trial(root_url);trial_need_signin=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].trial_need_signin(root_url);three_days_trial=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial_state,"three_days_trial");trial_need_signin=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].trial_need_signin(root_url);limited_currencies=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial_state,"limited_currencies_111");is_watermark_small=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"small_watermark");is_watermark_popcorn=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"popcorn_watermark");is_watermark_hidden=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_8___default().get_trial_conf(trial,"is_watermark_hidden");can_hide_watermark=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].can_hide_watermark(root_url);can_skip_signin=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].can_skip_signin(root_url);is_unlimited_trial=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].is_unlimited_trial(root_url)}let new_ui=(yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_trial_conf("new_ui"))||CG("debug.new_ui");_util_zerr_js__WEBPACK_IMPORTED_MODULE_2___default().notice("ui context update_trial root_url: %s, "+"user: %s, is_premium: %s, trial: %s, expired: %s, "+"trial_need_signin: %s, is_watermark_hidden: %s, "+"can_hide_watermark: %s, can_skip_signin: %s, "+"need_trial: %d, is_unlimited_trial: %s, three_days_trial: %s"+", limited_currencies: %s",root_url,!!user,is_premium,!!trial,is_trial_expired,trial_need_signin,three_days_trial,is_watermark_hidden,can_hide_watermark,can_skip_signin,need_trial,is_unlimited_trial,limited_currencies);_this.setState({trial,trial_state,is_trial_expired,need_trial,trial_need_signin,is_watermark_small,is_watermark_popcorn,is_watermark_hidden,can_hide_watermark,can_skip_signin,is_unlimited_trial,new_ui,three_days_trial,limited_currencies})}))}on_trial_end(){_util_zerr_js__WEBPACK_IMPORTED_MODULE_2___default().notice("ui context on_trial_end %s",this.state.root_url);const _this=this;this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){yield _this.update_trial();if(_this.state.is_premium){perr("be_ui_trial_end_on_premium",null,{err:true});return}if(!_this.state.trial&&_this.state.is_tpopup&&_this.props.tpopup_type!="watermark"){_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].set_tpopup_type("watermark")}}))}update_conflict(){this.setState({ext_conflict:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_conflict()})}update_no_permission(){this.setState({no_permission:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_no_permission()})}update_agree_ts(){this.setState({agree_ts:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_agree_ts()})}update_suspended(){this.setState({suspended:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_ext_suspended()})}update_dev_mode(){this.setState({dev_mode:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_dev_mode()})}update_watermark_pos(){const _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){_this.setState({watermark_pos:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_watermark_pos(_this.state.url)})}))}update_onboarding_flow(){const _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){_this.setState({is_onboarding_flow:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_onboarding_flow(_this.state.url)})}))}update_onboarding_flow_country(){const _this=this;return this.etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){_this.setState({onboarding_flow_country:yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_onboarding_flow_country(_this.state.url)})}))}update_av_block(){let blocked=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].get_is_blocked_by_av();this.setState({is_blocked_by_av:blocked});if(blocked)_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].verify_antivirus_block()}set_watermark_pos(pos){this.setState({watermark_pos:pos});_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_7__["default"].set_watermark_pos(this.state.url,pos)}render(){return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(E.App_context.Provider,{value:this.state},this.props.children)}};const __WEBPACK_DEFAULT_EXPORT__=E},2948:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{init:()=>init});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(56);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4354);var react_dom__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);var _util_url_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5305);var _util_url_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_url_js__WEBPACK_IMPORTED_MODULE_2__);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_3__);var _bext_vpn_ui_ui_lib_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3792);var _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4718);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5250);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6__);var _bext_vpn_ui_page_lib_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(8383);
// LICENSE_CODE ZON
function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const{useState,useEffect}=react__WEBPACK_IMPORTED_MODULE_0___default();const{T,Mitm_btn}=_bext_vpn_ui_ui_lib_js__WEBPACK_IMPORTED_MODULE_4__["default"];const perr=(id,info)=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].perr(id,info,{},true);const Report_problem=()=>{let href=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].hola_url()+"/premium_support?ref=ext_report_problem";return react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"section report-problem"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{className:"title",href},react__WEBPACK_IMPORTED_MODULE_0___default().createElement(T,null,"Report a problem")))};const Mitm=()=>{const[root_url,set_root_url]=useState("");const[tab_id,set_tab_id]=useState();const[country,set_country]=useState("us");useEffect(()=>{let qs=_util_url_js__WEBPACK_IMPORTED_MODULE_2___default().qs_parse(window.location.search.replace(/^\?/,""));set_root_url(qs.root_url);if(!+qs.tab_id){perr("mitm_ui_missing_tab_id");window.close()}set_tab_id(+qs.tab_id);if(qs.country)set_country(qs.country)},[]);const get_user_info=()=>({user:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].get_user(),is_plus:_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].get_is_premium()});const[user_info,set_user_info]=useState(get_user_info());useEffect(()=>{perr("mitm_show");const update_user=()=>set_user_info(get_user_info());const beforeunload=()=>ignore();_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].on("user_changed",update_user);window.addEventListener("beforeunload",beforeunload);return()=>{_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].off("user_changed",update_user);window.removeEventListener("beforeunload",beforeunload)}},[]);const approve=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){perr("mitm_manual_approved");yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].mitm_set_unblock(root_url,tab_id);if(yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].need_trial(root_url)){let next_trial_ts=yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].get_next_trial_ts(root_url);if(!next_trial_ts||next_trial_ts<_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].now())yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].start_trial(root_url)}yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].unblock_action({country,src:"mitm",url:_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_6___default().root2url(root_url),mitm:true});yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].reload_tab(tab_id);yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].focus_on_tab(tab_id);window.close()});const ignore=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){perr("mitm_manual_ignore");yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].mitm_set_ignore(root_url,tab_id);yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_5__["default"].focus_on_tab(tab_id);window.close()});const title=react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span",null,react__WEBPACK_IMPORTED_MODULE_0___default().createElement("b",null,root_url)," ",T("is blocked in your country or office"));const buttons=[react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Mitm_btn,{root_url,enable:false,on_click:ignore,key:"no"}),react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Mitm_btn,{root_url,enable:true,on_click:approve,key:"yes"})];return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_bext_vpn_ui_page_lib_js__WEBPACK_IMPORTED_MODULE_7__.f6,_extends({},user_info,{cls:"mitm"}),react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Report_problem,null),react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_bext_vpn_ui_page_lib_js__WEBPACK_IMPORTED_MODULE_7__.$0,{title,cls:"mitm-section"},buttons),";")};const init=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()(function*(){yield(0,_bext_vpn_ui_page_lib_js__WEBPACK_IMPORTED_MODULE_7__.VV)();let root=react_dom__WEBPACK_IMPORTED_MODULE_1___default().createRoot(document.querySelector(".react-root"));root.render(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Mitm,null))})},8383:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$0:()=>Section,VV:()=>init_api,f6:()=>Page_layout});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(56);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(131);var classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);var _util_etask_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_2__);var _bext_vpn_ui_ui_lib_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3792);var _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4718);
// LICENSE_CODE ZON
const{T}=_bext_vpn_ui_ui_lib_js__WEBPACK_IMPORTED_MODULE_3__["default"];const Header=props=>{let logo_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].hola_url()+"/?utm_source=holaext&utm_content=settings";let cp_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].hola_url()+"/cp?utm_source=holaext&utm_content=settings";let login_url=_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].hola_url()+"/signin?utm_source=holaext&utm_content=settings";let logo_cls="logo "+(props.is_plus?"logo-plus":"logo-free");return react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"header"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"header-left"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"spacer"}),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{className:logo_cls,target:"_blank",rel:"noopener noreferrer",href:logo_url})),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"header-content"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"title"},props.title),!props.is_plus&&react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"upgrade-btn"},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{href:"",onClick:()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].open_plus_page("","ext_settings_upgrade")},react__WEBPACK_IMPORTED_MODULE_0___default().createElement(T,null,"Upgrade to Premium")))),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"header-right"},props.user&&react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{className:"user-name",target:"_blank",rel:"noopener noreferrer",href:cp_url},props.user.displayName),!props.user&&react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",{className:"login-btn",target:"_blank",rel:"noopener noreferrer",href:login_url},"Sign in"),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"spacer"})))};const Page_layout=({user,is_plus,title,cls,children,trial})=>react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("page-layout",cls)},react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Header,{user,is_plus,title}),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"content"},children));const Section=props=>react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("section",props.cls)},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"title",onClick:props.on_click},props.title),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div",{className:"card"},props.children));const init_api=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_2___default()(function*(){window.addEventListener("beforeunload",uninit);yield _bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].init()});const uninit=()=>_bext_vpn_ui_ui_api_js__WEBPACK_IMPORTED_MODULE_4__["default"].uninit()}}]);
//# sourceMappingURL=https://hola.org/be_source_map/1.248.77/530.bundle.js.map?build=nopeer_v3