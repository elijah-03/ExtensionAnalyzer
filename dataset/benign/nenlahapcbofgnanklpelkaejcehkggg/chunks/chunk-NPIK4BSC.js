import{a as ho}from"./chunk-XNVYV2NQ.js";import{a as ke}from"./chunk-VCPNQHGQ.js";import{a as ge,b as ie}from"./chunk-N3S7YKRT.js";import{L as he,M as go,a as me,b as po,f as G,g as co,h as mo}from"./chunk-HH5UG254.js";import{b as J}from"./chunk-N2ICXIKO.js";import{a as se}from"./chunk-CQXN2NRJ.js";import{a as ae,b as Ha}from"./chunk-J7QHBV67.js";import{a as Tt}from"./chunk-BCG2KUGW.js";import{a as de}from"./chunk-WJZEHHRO.js";import{a as At}from"./chunk-HPSGHK7L.js";import{h as St,k as lo}from"./chunk-KJBXKQ52.js";import{a as I,c as Va,e as so,f as _t,g as De,h as f,n as M,o as R,p as za,q as fo,u as uo,v as q}from"./chunk-4XUWKJYA.js";import{a as Ct,c as wt,d as Ga}from"./chunk-W7K6NY26.js";import{g as oo,n as Ee,s as ro}from"./chunk-QWQLNDJC.js";import{b as Re,c as Wa}from"./chunk-WXGZPSEB.js";import{F as no,z as $a}from"./chunk-K2PA57PF.js";import{b as to,c as bt,d as Ba}from"./chunk-AYDLOBCW.js";import{b as ao,c as ja}from"./chunk-JENJKWHP.js";import{k as Ua}from"./chunk-53OM6ECF.js";import{f as Pe,h as ne,m as io,t as vt}from"./chunk-BTBTC4NL.js";import{e as L}from"./chunk-3GYLW4KZ.js";function xe({automaticCouponsRun:e,autoFallback:t,isSiteHub:o,sameTabAffiliateRedirect:r}={}){return e?"auto":t?"auto_fallback":o?"site_hub":r?"page_reload":null}ro();var Ka=typeof window=="object"&&window&&window.Object===Object&&window,He=Ka;var qa=typeof self=="object"&&self&&self.Object===Object&&self,Ja=He||qa||Function("return this")(),E=Ja;var Qa=E.Symbol,N=Qa;var xo=Object.prototype,Ya=xo.hasOwnProperty,Xa=xo.toString,Oe=N?N.toStringTag:void 0;function Za(e){var t=Ya.call(e,Oe),o=e[Oe];try{e[Oe]=void 0;var r=!0}catch{}var a=Xa.call(e);return r&&(t?e[Oe]=o:delete e[Oe]),a}var yo=Za;var en=Object.prototype,tn=en.toString;function on(e){return tn.call(e)}var bo=on;var rn="[object Null]",an="[object Undefined]",Co=N?N.toStringTag:void 0;function nn(e){return e==null?e===void 0?an:rn:Co&&Co in Object(e)?yo(e):bo(e)}var U=nn;function sn(e){return e!=null&&typeof e=="object"}var j=sn;var fn="[object Symbol]";function un(e){return typeof e=="symbol"||j(e)&&U(e)==fn}var Q=un;function ln(e,t){for(var o=-1,r=e==null?0:e.length,a=Array(r);++o<r;)a[o]=t(e[o],o,e);return a}var wo=ln;var pn=Array.isArray,D=pn;var cn=1/0,vo=N?N.prototype:void 0,_o=vo?vo.toString:void 0;function To(e){if(typeof e=="string")return e;if(D(e))return wo(e,To)+"";if(Q(e))return _o?_o.call(e):"";var t=e+"";return t=="0"&&1/e==-cn?"-0":t}var So=To;var dn=/\s/;function mn(e){for(var t=e.length;t--&&dn.test(e.charAt(t)););return t}var Ao=mn;var gn=/^\s+/;function hn(e){return e&&e.slice(0,Ao(e)+1).replace(gn,"")}var Io=hn;function xn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var H=xn;var Eo=NaN,yn=/^[-+]0x[0-9a-f]+$/i,bn=/^0b[01]+$/i,Cn=/^0o[0-7]+$/i,wn=parseInt;function vn(e){if(typeof e=="number")return e;if(Q(e))return Eo;if(H(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=H(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Io(e);var o=bn.test(e);return o||Cn.test(e)?wn(e.slice(2),o?2:8):yn.test(e)?Eo:+e}var Le=vn;var Ro=1/0,_n=17976931348623157e292;function Tn(e){if(!e)return e===0?e:0;if(e=Le(e),e===Ro||e===-Ro){var t=e<0?-1:1;return t*_n}return e===e?e:0}var Po=Tn;function Sn(e){var t=Po(e),o=t%1;return t===t?o?t-o:t:0}var Do=Sn;function An(e){return e}var ko=An;var In="[object AsyncFunction]",En="[object Function]",Rn="[object GeneratorFunction]",Pn="[object Proxy]";function Dn(e){if(!H(e))return!1;var t=U(e);return t==En||t==Rn||t==In||t==Pn}var Ge=Dn;var kn=E["__core-js_shared__"],We=kn;var Oo=function(){var e=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function On(e){return!!Oo&&Oo in e}var Lo=On;var Ln=Function.prototype,Mn=Ln.toString;function Fn(e){if(e!=null){try{return Mn.call(e)}catch{}try{return e+""}catch{}}return""}var $=Fn;var Nn=/[\\^$.*+?()[\]{}|]/g,Bn=/^\[object .+?Constructor\]$/,Un=Function.prototype,jn=Object.prototype,Hn=Un.toString,Gn=jn.hasOwnProperty,Wn=RegExp("^"+Hn.call(Gn).replace(Nn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $n(e){if(!H(e)||Lo(e))return!1;var t=Ge(e)?Wn:Bn;return t.test($(e))}var Mo=$n;function Vn(e,t){return e?.[t]}var Fo=Vn;function zn(e,t){var o=Fo(e,t);return Mo(o)?o:void 0}var B=zn;var Kn=B(E,"WeakMap"),$e=Kn;function qn(){}var No=qn;function Jn(e,t,o,r){for(var a=e.length,n=o+(r?1:-1);r?n--:++n<a;)if(t(e[n],n,e))return n;return-1}var Bo=Jn;function Qn(e){return e!==e}var Uo=Qn;function Yn(e,t,o){for(var r=o-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var jo=Yn;function Xn(e,t,o){return t===t?jo(e,t,o):Bo(e,Uo,o)}var Ho=Xn;function Zn(e,t){var o=e==null?0:e.length;return!!o&&Ho(e,t,0)>-1}var Go=Zn;var ei=9007199254740991,ti=/^(?:0|[1-9]\d*)$/;function oi(e,t){var o=typeof e;return t=t??ei,!!t&&(o=="number"||o!="symbol"&&ti.test(e))&&e>-1&&e%1==0&&e<t}var Ve=oi;function ri(e,t){return e===t||e!==e&&t!==t}var ze=ri;var ai=9007199254740991;function ni(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ai}var ye=ni;function ii(e){return e!=null&&ye(e.length)&&!Ge(e)}var Wo=ii;var si=Object.prototype;function fi(e){var t=e&&e.constructor,o=typeof t=="function"&&t.prototype||si;return e===o}var $o=fi;function ui(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}var Vo=ui;var li="[object Arguments]";function pi(e){return j(e)&&U(e)==li}var It=pi;var zo=Object.prototype,ci=zo.hasOwnProperty,di=zo.propertyIsEnumerable,mi=It(function(){return arguments}())?It:function(e){return j(e)&&ci.call(e,"callee")&&!di.call(e,"callee")},Ke=mi;function gi(){return!1}var Ko=gi;var Qo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qo=Qo&&typeof module=="object"&&module&&!module.nodeType&&module,hi=qo&&qo.exports===Qo,Jo=hi?E.Buffer:void 0,xi=Jo?Jo.isBuffer:void 0,yi=xi||Ko,Me=yi;var bi="[object Arguments]",Ci="[object Array]",wi="[object Boolean]",vi="[object Date]",_i="[object Error]",Ti="[object Function]",Si="[object Map]",Ai="[object Number]",Ii="[object Object]",Ei="[object RegExp]",Ri="[object Set]",Pi="[object String]",Di="[object WeakMap]",ki="[object ArrayBuffer]",Oi="[object DataView]",Li="[object Float32Array]",Mi="[object Float64Array]",Fi="[object Int8Array]",Ni="[object Int16Array]",Bi="[object Int32Array]",Ui="[object Uint8Array]",ji="[object Uint8ClampedArray]",Hi="[object Uint16Array]",Gi="[object Uint32Array]",A={};A[Li]=A[Mi]=A[Fi]=A[Ni]=A[Bi]=A[Ui]=A[ji]=A[Hi]=A[Gi]=!0;A[bi]=A[Ci]=A[ki]=A[wi]=A[Oi]=A[vi]=A[_i]=A[Ti]=A[Si]=A[Ai]=A[Ii]=A[Ei]=A[Ri]=A[Pi]=A[Di]=!1;function Wi(e){return j(e)&&ye(e.length)&&!!A[U(e)]}var Yo=Wi;function $i(e){return function(t){return e(t)}}var Xo=$i;var Zo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Fe=Zo&&typeof module=="object"&&module&&!module.nodeType&&module,Vi=Fe&&Fe.exports===Zo,Et=Vi&&He.process,zi=function(){try{var e=Fe&&Fe.require&&Fe.require("util").types;return e||Et&&Et.binding&&Et.binding("util")}catch{}}(),Rt=zi;var er=Rt&&Rt.isTypedArray,Ki=er?Xo(er):Yo,qe=Ki;var qi=Object.prototype,Ji=qi.hasOwnProperty;function Qi(e,t){var o=D(e),r=!o&&Ke(e),a=!o&&!r&&Me(e),n=!o&&!r&&!a&&qe(e),i=o||r||a||n,s=i?Vo(e.length,String):[],u=s.length;for(var p in e)(t||Ji.call(e,p))&&!(i&&(p=="length"||a&&(p=="offset"||p=="parent")||n&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||Ve(p,u)))&&s.push(p);return s}var tr=Qi;function Yi(e,t){return function(o){return e(t(o))}}var or=Yi;var Xi=or(Object.keys,Object),rr=Xi;var Zi=Object.prototype,es=Zi.hasOwnProperty;function ts(e){if(!$o(e))return rr(e);var t=[];for(var o in Object(e))es.call(e,o)&&o!="constructor"&&t.push(o);return t}var ar=ts;function os(e){return Wo(e)?tr(e):ar(e)}var Je=os;var rs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,as=/^\w*$/;function ns(e,t){if(D(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||Q(e)?!0:as.test(e)||!rs.test(e)||t!=null&&e in Object(t)}var be=ns;var is=B(Object,"create"),V=is;function ss(){this.__data__=V?V(null):{},this.size=0}var nr=ss;function fs(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ir=fs;var us="__lodash_hash_undefined__",ls=Object.prototype,ps=ls.hasOwnProperty;function cs(e){var t=this.__data__;if(V){var o=t[e];return o===us?void 0:o}return ps.call(t,e)?t[e]:void 0}var sr=cs;var ds=Object.prototype,ms=ds.hasOwnProperty;function gs(e){var t=this.__data__;return V?t[e]!==void 0:ms.call(t,e)}var fr=gs;var hs="__lodash_hash_undefined__";function xs(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=V&&t===void 0?hs:t,this}var ur=xs;function Ce(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}Ce.prototype.clear=nr;Ce.prototype.delete=ir;Ce.prototype.get=sr;Ce.prototype.has=fr;Ce.prototype.set=ur;var Pt=Ce;function ys(){this.__data__=[],this.size=0}var lr=ys;function bs(e,t){for(var o=e.length;o--;)if(ze(e[o][0],t))return o;return-1}var Y=bs;var Cs=Array.prototype,ws=Cs.splice;function vs(e){var t=this.__data__,o=Y(t,e);if(o<0)return!1;var r=t.length-1;return o==r?t.pop():ws.call(t,o,1),--this.size,!0}var pr=vs;function _s(e){var t=this.__data__,o=Y(t,e);return o<0?void 0:t[o][1]}var cr=_s;function Ts(e){return Y(this.__data__,e)>-1}var dr=Ts;function Ss(e,t){var o=this.__data__,r=Y(o,e);return r<0?(++this.size,o.push([e,t])):o[r][1]=t,this}var mr=Ss;function we(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}we.prototype.clear=lr;we.prototype.delete=pr;we.prototype.get=cr;we.prototype.has=dr;we.prototype.set=mr;var X=we;var As=B(E,"Map"),Z=As;function Is(){this.size=0,this.__data__={hash:new Pt,map:new(Z||X),string:new Pt}}var gr=Is;function Es(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var hr=Es;function Rs(e,t){var o=e.__data__;return hr(t)?o[typeof t=="string"?"string":"hash"]:o.map}var ee=Rs;function Ps(e){var t=ee(this,e).delete(e);return this.size-=t?1:0,t}var xr=Ps;function Ds(e){return ee(this,e).get(e)}var yr=Ds;function ks(e){return ee(this,e).has(e)}var br=ks;function Os(e,t){var o=ee(this,e),r=o.size;return o.set(e,t),this.size+=o.size==r?0:1,this}var Cr=Os;function ve(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}ve.prototype.clear=gr;ve.prototype.delete=xr;ve.prototype.get=yr;ve.prototype.has=br;ve.prototype.set=Cr;var fe=ve;var Ls="Expected a function";function Dt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ls);var o=function(){var r=arguments,a=t?t.apply(this,r):r[0],n=o.cache;if(n.has(a))return n.get(a);var i=e.apply(this,r);return o.cache=n.set(a,i)||n,i};return o.cache=new(Dt.Cache||fe),o}Dt.Cache=fe;var wr=Dt;var Ms=500;function Fs(e){var t=wr(e,function(r){return o.size===Ms&&o.clear(),r}),o=t.cache;return t}var vr=Fs;var Ns=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bs=/\\(\\)?/g,Us=vr(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ns,function(o,r,a,n){t.push(a?n.replace(Bs,"$1"):r||o)}),t}),_r=Us;function js(e){return e==null?"":So(e)}var Tr=js;function Hs(e,t){return D(e)?e:be(e,t)?[e]:_r(Tr(e))}var Qe=Hs;var Gs=1/0;function Ws(e){if(typeof e=="string"||Q(e))return e;var t=e+"";return t=="0"&&1/e==-Gs?"-0":t}var te=Ws;function $s(e,t){t=Qe(t,e);for(var o=0,r=t.length;e!=null&&o<r;)e=e[te(t[o++])];return o&&o==r?e:void 0}var Ye=$s;function Vs(e,t,o){var r=e==null?void 0:Ye(e,t);return r===void 0?o:r}var Sr=Vs;function zs(e,t){for(var o=-1,r=t.length,a=e.length;++o<r;)e[a+o]=t[o];return e}var Ar=zs;var Ks="Expected a function";function qs(e,t){var o;if(typeof t!="function")throw new TypeError(Ks);return e=Do(e),function(){return--e>0&&(o=t.apply(this,arguments)),e<=1&&(t=void 0),o}}var Ir=qs;function Js(){this.__data__=new X,this.size=0}var Er=Js;function Qs(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o}var Rr=Qs;function Ys(e){return this.__data__.get(e)}var Pr=Ys;function Xs(e){return this.__data__.has(e)}var Dr=Xs;var Zs=200;function ef(e,t){var o=this.__data__;if(o instanceof X){var r=o.__data__;if(!Z||r.length<Zs-1)return r.push([e,t]),this.size=++o.size,this;o=this.__data__=new fe(r)}return o.set(e,t),this.size=o.size,this}var kr=ef;function _e(e){var t=this.__data__=new X(e);this.size=t.size}_e.prototype.clear=Er;_e.prototype.delete=Rr;_e.prototype.get=Pr;_e.prototype.has=Dr;_e.prototype.set=kr;var Te=_e;function tf(e,t){for(var o=-1,r=e==null?0:e.length,a=0,n=[];++o<r;){var i=e[o];t(i,o,e)&&(n[a++]=i)}return n}var Or=tf;function of(){return[]}var Lr=of;var rf=Object.prototype,af=rf.propertyIsEnumerable,Mr=Object.getOwnPropertySymbols,nf=Mr?function(e){return e==null?[]:(e=Object(e),Or(Mr(e),function(t){return af.call(e,t)}))}:Lr,Fr=nf;function sf(e,t,o){var r=t(e);return D(e)?r:Ar(r,o(e))}var Nr=sf;function ff(e){return Nr(e,Je,Fr)}var kt=ff;var uf=B(E,"DataView"),Xe=uf;var lf=B(E,"Promise"),Ze=lf;var pf=B(E,"Set"),oe=pf;var Br="[object Map]",cf="[object Object]",Ur="[object Promise]",jr="[object Set]",Hr="[object WeakMap]",Gr="[object DataView]",df=$(Xe),mf=$(Z),gf=$(Ze),hf=$(oe),xf=$($e),ue=U;(Xe&&ue(new Xe(new ArrayBuffer(1)))!=Gr||Z&&ue(new Z)!=Br||Ze&&ue(Ze.resolve())!=Ur||oe&&ue(new oe)!=jr||$e&&ue(new $e)!=Hr)&&(ue=function(e){var t=U(e),o=t==cf?e.constructor:void 0,r=o?$(o):"";if(r)switch(r){case df:return Gr;case mf:return Br;case gf:return Ur;case hf:return jr;case xf:return Hr}return t});var Ot=ue;var yf=E.Uint8Array,Lt=yf;var bf="__lodash_hash_undefined__";function Cf(e){return this.__data__.set(e,bf),this}var Wr=Cf;function wf(e){return this.__data__.has(e)}var $r=wf;function et(e){var t=-1,o=e==null?0:e.length;for(this.__data__=new fe;++t<o;)this.add(e[t])}et.prototype.add=et.prototype.push=Wr;et.prototype.has=$r;var tt=et;function vf(e,t){for(var o=-1,r=e==null?0:e.length;++o<r;)if(t(e[o],o,e))return!0;return!1}var Vr=vf;function _f(e,t){return e.has(t)}var ot=_f;var Tf=1,Sf=2;function Af(e,t,o,r,a,n){var i=o&Tf,s=e.length,u=t.length;if(s!=u&&!(i&&u>s))return!1;var p=n.get(e),l=n.get(t);if(p&&l)return p==t&&l==e;var c=-1,d=!0,h=o&Sf?new tt:void 0;for(n.set(e,t),n.set(t,e);++c<s;){var y=e[c],w=t[c];if(r)var m=i?r(w,y,c,t,e,n):r(y,w,c,e,t,n);if(m!==void 0){if(m)continue;d=!1;break}if(h){if(!Vr(t,function(C,T){if(!ot(h,T)&&(y===C||a(y,C,o,r,n)))return h.push(T)})){d=!1;break}}else if(!(y===w||a(y,w,o,r,n))){d=!1;break}}return n.delete(e),n.delete(t),d}var rt=Af;function If(e){var t=-1,o=Array(e.size);return e.forEach(function(r,a){o[++t]=[a,r]}),o}var zr=If;function Ef(e){var t=-1,o=Array(e.size);return e.forEach(function(r){o[++t]=r}),o}var Se=Ef;var Rf=1,Pf=2,Df="[object Boolean]",kf="[object Date]",Of="[object Error]",Lf="[object Map]",Mf="[object Number]",Ff="[object RegExp]",Nf="[object Set]",Bf="[object String]",Uf="[object Symbol]",jf="[object ArrayBuffer]",Hf="[object DataView]",Kr=N?N.prototype:void 0,Mt=Kr?Kr.valueOf:void 0;function Gf(e,t,o,r,a,n,i){switch(o){case Hf:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case jf:return!(e.byteLength!=t.byteLength||!n(new Lt(e),new Lt(t)));case Df:case kf:case Mf:return ze(+e,+t);case Of:return e.name==t.name&&e.message==t.message;case Ff:case Bf:return e==t+"";case Lf:var s=zr;case Nf:var u=r&Rf;if(s||(s=Se),e.size!=t.size&&!u)return!1;var p=i.get(e);if(p)return p==t;r|=Pf,i.set(e,t);var l=rt(s(e),s(t),r,a,n,i);return i.delete(e),l;case Uf:if(Mt)return Mt.call(e)==Mt.call(t)}return!1}var qr=Gf;var Wf=1,$f=Object.prototype,Vf=$f.hasOwnProperty;function zf(e,t,o,r,a,n){var i=o&Wf,s=kt(e),u=s.length,p=kt(t),l=p.length;if(u!=l&&!i)return!1;for(var c=u;c--;){var d=s[c];if(!(i?d in t:Vf.call(t,d)))return!1}var h=n.get(e),y=n.get(t);if(h&&y)return h==t&&y==e;var w=!0;n.set(e,t),n.set(t,e);for(var m=i;++c<u;){d=s[c];var C=e[d],T=t[d];if(r)var _=i?r(T,C,d,t,e,n):r(C,T,d,e,t,n);if(!(_===void 0?C===T||a(C,T,o,r,n):_)){w=!1;break}m||(m=d=="constructor")}if(w&&!m){var S=e.constructor,v=t.constructor;S!=v&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof v=="function"&&v instanceof v)&&(w=!1)}return n.delete(e),n.delete(t),w}var Jr=zf;var Kf=1,Qr="[object Arguments]",Yr="[object Array]",at="[object Object]",qf=Object.prototype,Xr=qf.hasOwnProperty;function Jf(e,t,o,r,a,n){var i=D(e),s=D(t),u=i?Yr:Ot(e),p=s?Yr:Ot(t);u=u==Qr?at:u,p=p==Qr?at:p;var l=u==at,c=p==at,d=u==p;if(d&&Me(e)){if(!Me(t))return!1;i=!0,l=!1}if(d&&!l)return n||(n=new Te),i||qe(e)?rt(e,t,o,r,a,n):qr(e,t,u,o,r,a,n);if(!(o&Kf)){var h=l&&Xr.call(e,"__wrapped__"),y=c&&Xr.call(t,"__wrapped__");if(h||y){var w=h?e.value():e,m=y?t.value():t;return n||(n=new Te),a(w,m,o,r,n)}}return d?(n||(n=new Te),Jr(e,t,o,r,a,n)):!1}var Zr=Jf;function ea(e,t,o,r,a){return e===t?!0:e==null||t==null||!j(e)&&!j(t)?e!==e&&t!==t:Zr(e,t,o,r,ea,a)}var nt=ea;var Qf=1,Yf=2;function Xf(e,t,o,r){var a=o.length,n=a,i=!r;if(e==null)return!n;for(e=Object(e);a--;){var s=o[a];if(i&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<n;){s=o[a];var u=s[0],p=e[u],l=s[1];if(i&&s[2]){if(p===void 0&&!(u in e))return!1}else{var c=new Te;if(r)var d=r(p,l,u,e,t,c);if(!(d===void 0?nt(l,p,Qf|Yf,r,c):d))return!1}}return!0}var ta=Xf;function Zf(e){return e===e&&!H(e)}var it=Zf;function eu(e){for(var t=Je(e),o=t.length;o--;){var r=t[o],a=e[r];t[o]=[r,a,it(a)]}return t}var oa=eu;function tu(e,t){return function(o){return o==null?!1:o[e]===t&&(t!==void 0||e in Object(o))}}var st=tu;function ou(e){var t=oa(e);return t.length==1&&t[0][2]?st(t[0][0],t[0][1]):function(o){return o===e||ta(o,e,t)}}var ra=ou;function ru(e,t){return e!=null&&t in Object(e)}var aa=ru;function au(e,t,o){t=Qe(t,e);for(var r=-1,a=t.length,n=!1;++r<a;){var i=te(t[r]);if(!(n=e!=null&&o(e,i)))break;e=e[i]}return n||++r!=a?n:(a=e==null?0:e.length,!!a&&ye(a)&&Ve(i,a)&&(D(e)||Ke(e)))}var na=au;function nu(e,t){return e!=null&&na(e,t,aa)}var ia=nu;var iu=1,su=2;function fu(e,t){return be(e)&&it(t)?st(te(e),t):function(o){var r=Sr(o,e);return r===void 0&&r===t?ia(o,e):nt(t,r,iu|su)}}var sa=fu;function uu(e){return function(t){return t?.[e]}}var fa=uu;function lu(e){return function(t){return Ye(t,e)}}var ua=lu;function pu(e){return be(e)?fa(te(e)):ua(e)}var la=pu;function cu(e){return typeof e=="function"?e:e==null?ko:typeof e=="object"?D(e)?sa(e[0],e[1]):ra(e):la(e)}var pa=cu;var du=function(){return E.Date.now()},ft=du;var mu="Expected a function",gu=Math.max,hu=Math.min;function xu(e,t,o){var r,a,n,i,s,u,p=0,l=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(mu);t=Le(t)||0,H(o)&&(l=!!o.leading,c="maxWait"in o,n=c?gu(Le(o.maxWait)||0,t):n,d="trailing"in o?!!o.trailing:d);function h(b){var x=r,F=a;return r=a=void 0,p=b,i=e.apply(F,x),i}function y(b){return p=b,s=setTimeout(C,t),l?h(b):i}function w(b){var x=b-u,F=b-p,K=t-x;return c?hu(K,n-F):K}function m(b){var x=b-u,F=b-p;return u===void 0||x>=t||x<0||c&&F>=n}function C(){var b=ft();if(m(b))return T(b);s=setTimeout(C,w(b))}function T(b){return s=void 0,d&&r?h(b):(r=a=void 0,i)}function _(){s!==void 0&&clearTimeout(s),p=0,r=u=a=s=void 0}function S(){return s===void 0?i:T(ft())}function v(){var b=ft(),x=m(b);if(r=arguments,a=this,u=b,x){if(s===void 0)return y(u);if(c)return clearTimeout(s),s=setTimeout(C,t),h(u)}return s===void 0&&(s=setTimeout(C,t)),i}return v.cancel=_,v.flush=S,v}var Ft=xu;function yu(e,t,o){for(var r=-1,a=e==null?0:e.length;++r<a;)if(o(t,e[r]))return!0;return!1}var ca=yu;function bu(e){return Ir(2,e)}var Nt=bu;var Cu=1/0,wu=oe&&1/Se(new oe([,-0]))[1]==Cu?function(e){return new oe(e)}:No,da=wu;var vu=200;function _u(e,t,o){var r=-1,a=Go,n=e.length,i=!0,s=[],u=s;if(o)i=!1,a=ca;else if(n>=vu){var p=t?null:da(e);if(p)return Se(p);i=!1,a=ot,u=new tt}else u=t?[]:s;e:for(;++r<n;){var l=e[r],c=t?t(l):l;if(l=o||l!==0?l:0,i&&c===c){for(var d=u.length;d--;)if(u[d]===c)continue e;t&&u.push(c),s.push(l)}else a(u,c,o)||(u!==s&&u.push(c),s.push(l))}return s}var ma=_u;function Tu(e,t){return e&&e.length?ma(e,pa(t,2)):[]}var Bt=Tu;vt();var xa=L(Va());var ha=L(za()),Ht=L(to()),Gt=L(fo());vt();vt();async function O(e){return ne(io(e??0))}var ga=L(Ua());function le(e,t){let o=e.replace(/[^0-9]/gi,"");if(!e.trim().match(/\d+[\t\n\r]*[.,\t\n\r][\t\n\r]*\d{2}($|\D)+/)){let a=!!e.trim().match(/[.,\t\n\r][\t\n\r]*\d{1}($|\D)+/)?parseFloat(o).toFixed(1).replace(/[^0-9]/gi,""):parseFloat(o).toFixed(2).replace(/[^0-9]/gi,"");t&&a!==o&&t("track","rooPriceDifference",{domain:ga.default.getDomain(location.href),pagePath:location.pathname,url:location.href,parsePriceTotal:o,fixedPriceTotal:a}),o=a}return parseInt(o)}async function ut(e,t,o){let r=new Event(e,o);t.dispatchEvent(r)}async function Ut(e,t,o){try{let r=o.charCodeAt(0),a=document.createEvent("KeyboardEvent");Object.defineProperty(a,"keyCode",{get:function(){return this.charCodeVal}}),Object.defineProperty(a,"which",{get:function(){return this.charCodeVal}}),a.initKeyboardEvent?a.initKeyboardEvent(e,!0,!0,document.defaultView,!1,!1,!1,!1,r,r):a.initKeyEvent(e,!0,!0,document.defaultView,!1,!1,!1,!1,r,0),a.charCodeVal=r,t.dispatchEvent(a),e==="keypress"&&(t.contentEditable==="true"&&(t.textContent=t.textContent+o),t.value=t.value+o)}catch{}}async function Su(e,t){return await O(10),Ut("keydown",t,e).then(()=>Ut("keypress",t,e)).then(()=>ut("input",t,{bubbles:!0})).then(()=>ut("change",t)).then(()=>Ut("keyup",t,e))}async function jt(e,t){await ut("focus",e);for(let o=0;o<t.length;++o)await Su(t[o],e);await ut("blur",e)}var lt=class{constructor(t,o){this.onIsNotCouponPage=()=>{};this.sendShoppingEvent=()=>{};this.hasFeature=t=>!1;this._xhrQuietMonitor$=t,Object.assign(this,o)}getElement(t){if(!t)return!1;try{let o=t.split(","),r=null;return o.find(a=>{let n=(0,Gt.default)(a);return n.length?(r=n[0],!0):!1}),r}catch{return!1}}getPromoCodeEl(t){let o=t?.promoInputSelector;return this.getElement(o)}setValue(t,o){try{Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value")?.set?.call(t,o);let a=new Event("input",{bubbles:!0});t.dispatchEvent(a)}catch{t.value=o}}async getXhrMonitor(t,o,r){let a=O(t);return!this.hasFeature("ext_fast_roo_totals")||o&&this.hasFeature("ext_fast_roo_totals_no_auto")||r&&this.hasFeature("ext_fast_roo_totals_no_reload")||(o||r)&&this.hasFeature("ext_fast_roo_totals_no_reload_no_auto")?a:ne(this._xhrQuietMonitor$)}async getTotal(t,o){let r,a,n;o&&({auto:r,isInitialTotal:a,isFinalTotal:n}=o);let i=(a||n)&&r?0:t.getTotalDelay;return await Ht.default.race([this.waitForTotalChange(t.cartTotalSelector,!!t.useInnerText,i),O(i),this.getXhrMonitor(i,!!o?.auto,t.reload)]),this.getElement(t.removeErrorAction)&&await this.removeErrors(t),this.getCartTotal(t.cartTotalSelector,!!t.useInnerText)}async waitForTotalChange(t,o=!1,r=1e4){let a=new Date().getTime(),n=this.getElement(t),i=0,s;for(n&&(s=le(o?n.innerText:n.innerHTML));!s&&i<r;)await O(20),n&&(s=le(o?n.innerText:n.innerHTML)),i=new Date().getTime()-a;let u=s;for(;s===u&&i<r;)await O(20),n&&(s=le(o?n.innerText:n.innerHTML)),i=new Date().getTime()-a;return s}async getCodeEntered(t){return t.useCodeEntered&&t.codeEnteredAction?!!this.getElement(t.codeEnteredAction):!1}click(t){try{let o=this.getElement(t);return o?(o.click(),!0):!1}catch{return!1}}removeElement(t){return t.parentNode?.removeChild(t)}async runCode(t){let o=document.createElement("script");o.textContent=t,(document.head||document.documentElement).appendChild(o),o.remove()}async writeCode(t,o){let r=this.getPromoCodeEl(t);r&&(r.contentEditable==="true"&&(r.textContent=""),this.setValue(r,""),await jt(r,o))}async removePrevious(t,o){let r=t.promoRemoveAction;if(this.getElement(r)||o){this.click(r);let n=t.postRemoveDelay;return n&&await O(n),!0}return!1}async preApplyAction(t){let o=t.skipPreApplyAction;if(this.getElement(o))return;let a=t.preApplyAction;if(a&&a.length){this.click(a);let n=t.preApplyDelay;n&&await O(n)}}async removeErrors(t){let o=t.removeErrorAction;if(o){let r=this.getElement(o);r&&this.removeElement(r)}}async applyCode(t,o){if(!o)return;await this.removeErrors(t),await this.preApplyAction(t),await this.writeCode(t,o);let r=t.promoApplyAction;return setTimeout(()=>{this.click(r)},1),{code:o}}async getDiscount(t){if(!t.discountSelector)return null;let o=t.getTotalDelay;await Ht.default.race([this.waitForTotalChange(t.discountSelector,!!t.useInnerText,o),O(o)]);let r=this.getElement(t.discountSelector);if(!r)return null;let a=le(t.useInnerText?r.innerText:r.innerHTML);return isNaN(a)?null:a}getCartTotal(t,o=!1,r){if(!t)return;let a=Array();t.split(",").forEach(u=>{(0,Gt.default)(u).toArray().forEach(l=>{let c=le(o?l.innerText:l.innerHTML,r);a.push(c)})});let n,i=500,s=5e3;for(;!n&&i>=0;)n=a.find(u=>u>=i&&u<s),i-=50,s+=1e4;return!n&&n!==0&&(n=a.find(u=>Number(u))),n}getRooPreapplieds(t){if(t&&t.pageData&&t.pageData.products){let r=(t.pageData.products??[]).reduce((a,n)=>(n.coupon&&a.push({code:n.coupon}),a),Array());if(r&&r.length>0)return r}return null}async isCouponPage(t){let o=new Pe,r=Nt(this.sendShoppingEvent),a=(0,ha.exponential)({randomisationFactor:0,initialDelay:50,maxDelay:3e3});return a.on("ready",()=>{try{let n=this.getCartTotal(t.cartTotalSelector,!!t.useInnerText,r),i=(t?.showCouponsSelector??"").trim().length?this.getElement(t.showCouponsSelector):!0;this.getPromoCodeEl(t)&&n&&i?o.next(!0):a.backoff()}catch(n){let i=n?.message;i!=="Backoff in progress."&&this.sendShoppingEvent("track","isCouponPageError",{error:i})}}),this.hasFeature("ext_coupons_skip_cashback_fallback")&&(a.failAfter(5),a.on("fail",()=>{this.onIsNotCouponPage(),o.next(!1)})),a.backoff(),ne(o)}};function Wt(e){if(e&&!e.includes("-")){let t=e.split("");return[20,16,12,8].forEach(o=>t.splice(o,0,"-")),t.join("")}return e}var Ne=class{constructor(t,o){this._tryingCodes=!1;this.sendShoppingEvent=(t,...o)=>{};this.currentDomain=()=>"";this.activateInPinnedTab=t=>new Promise(()=>{});this.getSingleUseCouponsIfValid=(t,o,r)=>new Promise(()=>{});this.siteCache=t=>new Promise(()=>({}));this.handleResult=t=>new Promise(()=>{});this.shouldCouponsStandDown=()=>!1;this.compStateCache=t=>new Promise(()=>!1);this.domainLocalStorageGet=t=>new Promise(()=>null);this.domainLocalStorageSet=(t,o)=>new Promise(()=>{});this.domainLocalStorageRemove=t=>new Promise(()=>{});this.getFromState=t=>null;this.setInState=(t,o)=>{};this.onIsNotCouponPage=()=>{};this.onTryCode=t=>{};this.disableAffiliate=()=>{};this.setRunning=t=>{};this.startDeweyRun=()=>new Promise(()=>{});this.hasFeature=t=>!1;this.tryCodes=async({disableAffiliate:t,ignoreCancelled:o,coupons:r,automaticCouponsRun:a,autoFallback:n,passedInClickId:i,couponRunId:s,cashback:u})=>{this._tryingCodes=!0;let p=this.getFromState("couponNotif")==="siteHub",l=i||(0,xa.v4)().replace(/-/g,""),c=this.currentDomain();t||await this.activateInPinnedTab(l);let{hash:d,host:h,hostname:y,href:w,origin:m,pathname:C,port:T,search:_}=window.location;this.sendShoppingEvent("track","tryCoupons",{clickId:l,redirectId:Wt(l),couponRunId:s,cashback:u,triggerType:xe({automaticCouponsRun:a,autoFallback:n,isSiteHub:p}),couponScriptType:"roo",currentLocation:{hash:d,host:h,hostname:y,href:w,origin:m,pathname:C,port:T,search:_}}),(n||p)&&sessionStorage.setItem("__r_reload_auto","true");let S=await this.siteCache(c),v=this.getFromState(["userCouponChecks",c]);await this.startDeweyRun();let b=new Date().getTime(),x=S?.siteData?.coupons?.script,F=await this.getSingleUseCouponsIfValid(c,S,v);F&&F.length>0&&(r.pop(),r=r.concat(structuredClone(F)));let K=this.dom.getRooPreapplieds(this.getFromState("deweyResult")||{})??[],ce=structuredClone(r);if(!a&&Array.isArray(K)&&(ce=r.concat(K),ce=Bt(ce,eo=>eo.code?.toLowerCase())),!await this._sendMessage({action:"init",ignoreCancelled:n||o,coupons:ce,script:x,store:{cashback:u,clickId:l,couponRunId:s,isSiteHub:p,automaticCouponsRun:a,autoFallback:n,couponStartTime:b}})){console.error("Run failed to init");return}let Zt=await this._sendMessage({action:"next"});if(!Zt||!x)return;let Fa=new Date().getTime();!a&&x.initialAction?(await this.dom.click(x.initialAction),x.initialActionDelay&&await O(x.initialActionDelay)):!a&&x.disableInitialPromoRemove!==!0&&x.promoRemoveAction&&this.dom.getElement(x.promoRemoveAction)&&(await this.dom.click(x.promoRemoveAction),x.postRemoveDelay&&await O(x.postRemoveDelay));let Na=new Date().getTime()-Fa||0;await this._sendMessage({action:"initialAction",initialActionTime:Na});let P=await this.runner(Zt);P&&(sessionStorage.getItem("__r_reload_auto")&&sessionStorage.removeItem("__r_reload_auto"),P.automaticCouponsRun=a,P.autoFallback=n,P.isSiteHub=p,P.couponRunId=s,P.cashback=u,P.originalCoupons=r,P.preappliedCodes=K,P.couponScriptType="roo",x.useCodeEntered&&P.codeEntered&&!P.savings&&(P.requiresInput=x.codeEnteredAction?!!this.dom.getElement(x.codeEnteredAction):!0),P.startTime=b,P.duration=new Date().getTime()-b,this.determineSavingsClaimPreapplieds(P)||(P.savings=0),await this.handleResult({result:P,clickId:l})),this._tryingCodes=!1};this.initCoupons=async()=>{let t=null;this.setInState(["couponView","rooIsCheckingForCouponPage"],!0),this.setInState(["couponView","rooIsCouponPage"],!1);let o=this.currentDomain(),r=await this.siteCache(o),a=r?.siteData?.coupons??{},{script:n,coupons:i,ignoreAffiliate:s}=a,u=this.getFromState("tabId");(s||this.getFromState(["couponsAffiliateDisabledSites",`${o}_${u}`])>Ee(new Date)||this.getFromState(["couponsAffiliateDisabledSites",`${o}_all`])>Ee(new Date))&&this.disableAffiliate();let p=await this.dom.isCouponPage(a.script);if(this.setInState(["couponView","rooIsCheckingForCouponPage"],!1),this.setInState(["couponView","rooIsCouponPage"],p),!p)return;let l=this.shouldCouponsStandDown(),c=this.dom.getRooPreapplieds(this.getFromState("deweyResult")),d={coupons:i,preappliedCodes:c,standDown:l,roo:!0,estimatedRunTime:25e3,runTimePerCoupon:(n.getTotalDelay||0)+(n.preApplyDelay||0)+(n.postRemoveDelay||0),couponCount:i.length,disableAffiliate:s,affiliateLinkCurrentTab:r?.meta?.affiliate_link_current_tab,autoCoupConfig:r?.siteData?.coupons?.config?.auto_coup};this.hasFeature("user_contributed_codes")&&await this.setupCouponListener(n),await this._sendMessage({action:"pageLoad"});let h=await this._sendMessage({action:"next"});if(h){if(this._tryingCodes=!0,h.action==="cancelled")return;let y=await this._sendMessage({action:"nextCode"});Object.assign(d,{disableDelay:!!y,rooRunning:!0,currentCouponCode:y}),this.setInState("couponsConfig",d),t=d,(async()=>{let m=await this.runner(h);if(m){n.useCodeEntered&&m.codeEntered&&!m.savings&&(m.requiresInput=n.codeEnteredAction?!!this.dom.getElement(n.codeEnteredAction):!0);let{clickId:C,couponRunId:T,isSiteHub:_,automaticCouponsRun:S,autoFallback:v,cashback:b,couponStartTime:x}=m.store;m.isSiteHub=_,m.automaticCouponsRun=S,m.autoFallback=v,m.couponRunId=T,m.originalCoupons=i,m.preappliedCodes=c,m.couponScriptType="roo",m.cashback=b,m.startTime=x,m.duration=m.runTime,this.determineSavingsClaimPreapplieds(m)||(m.savings=0),await this.handleResult({result:m,clickId:C})}await this.domainLocalStorageGet("rooReloading")&&await this.domainLocalStorageRemove("rooReloading"),sessionStorage.getItem("__r_reload_auto")&&sessionStorage.removeItem("__r_reload_auto"),this.setRunning(!1)})()}else this.sendShoppingEvent("track","couponCheck"),this.setInState("couponsConfig",d),t=d;return t};Object.assign(this,o),this.dom=new lt(t,{onIsNotCouponPage:this.onIsNotCouponPage,sendShoppingEvent:this.sendShoppingEvent,hasFeature:this.hasFeature})}async _sendMessage(t){if(!this._msgListener$)throw new Error("No message listener added for RooClient");let o=new Pe;return this._msgListener$.next({msg:t,sender:o}),ne(o)}addListener(t){this._msgListener$=new Pe,this._msgListener$.subscribe(({msg:o,sender:r})=>{t(o).then(a=>{r.next(a)})})}async cancel(){this.sendShoppingEvent("track","rooCancelled",{url:document.URL}),await this._sendMessage({action:"cancel"}),this._tryingCodes=!1}determineSavingsClaimPreapplieds(t){let{originalCoupons:o,bestCoupon:r,preappliedCodes:a}=t;return r&&a?!!o.find(n=>n.code?.toLowerCase()===r.code?.toLowerCase()):!0}async runner(t){let{script:o}=t;this._tryingCodes=!0,t.aggApplyCodeTime??=0,t.aggGetTotalTime??=0,t.aggRemovePreviousTime??=0,t.aggWaitForReloadTime??=0;try{if(t.action==="tryCode"){!t.applyingBestCode&&t.code&&this.onTryCode(t.code);let a,n=0;if(t.applyingBestCode&&t.auto&&t.code)a={code:t.code};else if(o){let i=new Date().getTime();a=await this.dom.applyCode(o,t.code);let s=new Date().getTime()-i;n=t.aggApplyCodeTime+s}await this._sendMessage({action:"saveCoupon",coupon:a,aggApplyCodeTime:n})}else if(t.action==="getDiscount"&&o){let a=new Date().getTime(),n=await this.dom.getDiscount(o)??void 0,i=new Date().getTime()-a,s=t.aggGetTotalTime+i;await this._sendMessage({action:"saveDiscount",discount:n,aggGetTotalTime:s})}else if(t.action==="getTotal"&&o){let a=new Date().getTime(),n=await this.dom.getTotal(o,t.options),i=new Date().getTime()-a,s=t.aggGetTotalTime+i;await this._sendMessage({action:"saveTotal",total:n,aggGetTotalTime:s})}else if(t.action==="codeEntered"&&o){let a=await this.dom.getCodeEntered(o);await this._sendMessage({action:"saveCodeEntered",codeEntered:a})}else if(t.action==="removePrevious"&&o){let a=new Date().getTime();await this.domainLocalStorageSet("rooReloading",!0);let n=await this.dom.removePrevious(o,t.lastCodeHadSavings),i=new Date().getTime()-a,s=t.aggRemovePreviousTime+i;await this._sendMessage({action:"codeRemoved",removed:n,aggRemovePreviousTime:s})}else{if(t.action==="finish")return this._tryingCodes=!1,t.result;if(t.action==="error")throw this._tryingCodes=!1,new Error(t.error?.message);if(t.action==="cancelled"){this._tryingCodes=!1;return}else if(t.action==="wait"){let a=new Date().getTime();await this.domainLocalStorageSet("rooReloading",!0),await O(1e4);let n=new Date().getTime()-a,i=t.aggWaitForReloadTime+n;await this._sendMessage({action:"pageLoad",aggWaitForReloadTime:i})}}let r=await this._sendMessage({action:"next"});return r?this.runner(r):void 0}catch(r){let a=r.stack?.split(`
`);this.sendShoppingEvent("track","rooError",{message:(a[0]+a[1]).match(/(.*)\s\(/)[1],url:document.URL}),sessionStorage?.removeItem("ogPageData"),await this._sendMessage({action:"error"})}}async setupCouponListener(t){try{if(t.promoApplyAction){let o=this.dom.getElement(t.promoApplyAction);o&&o.addEventListener("click",async a=>{await this.sendCustomerCodeEvent(t)});let r=this.dom.getPromoCodeEl(t);r&&r.addEventListener("keydown",async a=>{if(a.code==="Enter"){let n=this.sendCustomerCodeEvent.bind(t);Ft(n,200)}})}}catch{}}async sendCustomerCodeEvent(t){if(!this._tryingCodes){let o=this.dom.getPromoCodeEl(t);if(o){let r=o?.value;if(r?.length){let a="userContributedCode";await this.compStateCache({action:"getHoneyState",comp:"honey"})&&(a="userContributedCodeH"),this.sendShoppingEvent("track",a,{code:r})}}}}};var z=L(to());ro();var Ae=L(fo()),g=L(bt()),Ie=L(Ba());Ga();ja();Ha();Wa();var k=L(bt());var pt=(e,t)=>{if(t)if(t.error){let{error:o,domain:r=null,url:a}=t,n=o.stack.split(`
`),i=n[0]+n[1];R("track",e,{url:a,domain:r,message:i})}else R("track",e,t)};var ya=({displayable:e})=>typeof e=="boolean"?e:!0,ct=e=>e&&e.filter(ya),zh=e=>{let t={...e,coupons:ct(e.coupons)};if((t.couponCount&&e.coupons&&t.coupons?e.coupons.length-t.coupons.length:0)>0&&(t.couponCount=t.coupons?.length),t.autoFallback&&(t.autoFallback={...t.autoFallback,coupons:ct(t.autoFallback.coupons)},(t.autoFallback.autoFallbackCouponsCount&&e.autoFallback?.coupons&&t.autoFallback.coupons?e.autoFallback.coupons.length-t.autoFallback.coupons.length:0)>0&&(t.autoFallback.autoFallbackCouponsCount=t.autoFallback.coupons?.length)),t.result){let r=(t.result.allCoupons??[]).reduce((a,n)=>ya(n)?a:{...a,[n.code]:!0},{});t.result={...t.result,allCoupons:ct(t.result.allCoupons),coupons:ct(t.result.coupons)},t.result.coupons&&Object.keys(r).length>0&&(t.result.coupons=t.result.coupons.filter(({code:a})=>!(a in r)))}return t};function dt(e){return M("ext_coupons_skip_cashback_fallback")&&!po()&&!!f.get("cashback")&&!f.get(["cashback","user","dismissed"])&&(e?.pageType==="cartPage"||e?.pageType==="checkoutPage")}var Au=new Set(["rosewholesale.com"]),$t=(e,t)=>k.default.isUndefined(e)?t:e,ba=async e=>{e.pageReload&&await G("beforeReloadResult",JSON.stringify(e))};async function Vt(e,t,o){let r;try{r=await _t.initSite(e,t,o)}catch(n){r={error:"Tigger internal error",message:n.message}}let a=f.get("deweyResult");if(r.error&&dt(a))throw R("trackError","couponsInitError","tigger"),he(a),new Error("coupon identifiers not found on page, loading cashback instead");return r}async function Ca(e,t,o,r,a){let{allCoupons:n,autoFallback:i,automaticCouponsRun:s,cashback:u,couponRunId:p,isSiteHub:l,platform:c}=a,d=f.get("thirdPartyDetections"),h;try{h=await _t.tryCoupons(e,k.default.cloneDeep(t),k.default.get(o,"0"),r,{automaticCouponsRun:s,autoFallback:i,platform:c,isSiteHub:l,couponRunId:p,cashback:u,thirdPartyDetections:d,useSUCMultipleBanks:!0,multipleBankCouponList:o})}catch(y){throw h={error:"Tigger internal error",message:y.message},y}return k.default.assignInWith(h,{allCoupons:n,autoFallback:i,automaticCouponsRun:s,cashback:u,couponRunId:p,couponScriptType:"tigger",isSiteHub:l,originalCoupons:t,platform:c},$t),ba(h),h}async function wa(e,t,o,r={}){let{allCoupons:a,autoFallback:n,automaticCouponsRun:i,cashback:s,couponRunId:u,isSiteHub:p}=r,l=new Date().getTime(),c,d=Au.has(e);try{if(o&&o.length)if({"zoro.com":!0,"focuscamera.com":!0,"chewy.com":!0}[e]){let T=k.default.findIndex(t,_=>_.code==="WIKIBUY"||_.code==="CAPITALONE");if(T>=0){let _=o.pop();t[T]=k.default.clone(_),t=t.concat(k.default.clone(o))}else t=t.concat(k.default.clone(o))}else t.pop(),t=t.concat(k.default.clone(o));let h={auto:i,thirdPartyDetections:f.get("thirdPartyDetections")},y=await so.run(t,h);c=new Date().getTime()-l;let w=k.default.cloneDeep(t),m=k.default.assignInWith({},y,{affiliateRedirect:d,allCoupons:a,autoFallback:n,automaticCouponsRun:i,cashback:s,couponRunId:u,couponScriptType:"asyncTigger",isSiteHub:p,originalCoupons:w,runTime:c,startTime:l},$t);return ba(m),k.default.some(m.coupons,C=>!k.default.isNumber(C.savings)||k.default.isNaN(C.savings))&&(setTimeout(()=>{pt("asyncTiggerScriptError",{error:{stack:`Invalid savings
`},url:document.URL})}),m.errored=!0),m}catch(h){return pt("asyncTiggerScriptError",{error:h,url:document.URL}),k.default.assignInWith({},{startTime:l,runTime:new Date().getTime()-l,affiliateRedirect:d,allCoupons:a,originalCoupons:t,automaticCouponsRun:i,autoFallback:n,isSiteHub:p,cashback:s,couponRunId:u,couponScriptType:"asyncTigger",errored:!0},$t)}}async function va(e){try{let t=await ge("beforeReloadResult"),{savings:o}=JSON.parse(t);return await ie("beforeReloadResult"),{savings:o}}catch(t){pt("asyncPageDataError",{error:t,domain:e.domain})}}var _a=e=>q("getUserCoupon",e);var Ta=e=>q("isUserCouponEligible",e);var pe=L(bt());function zt(e,t){switch(e){case"petco.com":return pe.default.get(t,"pageData.order.total")>=3500;case"officedepot.com":{let o=pe.default.get(t,"pageData.order.total");return pe.default.get(t,"pageType")==="checkoutPage"&&o>=2500}case"staples.com":{let o=pe.default.get(t,"pageData.order.total");return(pe.default.get(t,"pageType")==="checkoutPage"||pe.default.get(t,"pageType")==="cartPage")&&o>=5e3}default:return!0}}var Kt=e=>q("createShoppingTrip",e);var gt=!1,Da,Sa=!0,Ue,re=f.select("couponView");function mt(){return I()==="ebay.com"&&f.get(["selfStandDown",`${I()}_${f.get("tabId")}`])}function Aa({throttleAutoCoup:e,fromAutoCoupImmediateNotif:t}={}){let o=I();de(o)?f.get("deweyResult","pageType")==="checkoutPage"&&De({domain:"amazon.com_checkout",message:"triedCodes"}):De({domain:o,throttleAutoCoup:e,fromAutoCoupImmediateNotif:t,message:"triedCodes"})}function Iu(){let e=I();if(de(e)){if(f.get("deweyResult","pageType")==="checkoutPage")return null;let t=g.default.get(document.querySelector("#nav-link-accountList .nav-line-1, #nav-link-yourAccount .nav-line-1"),"textContent");return!!(t&&t.match(/hello/i)&&!t.match(/sign in/i))}return null}function Jt(){let e=f.get("platform"),t=re.get("result");if(sessionStorage.getItem("__wb_same_tab_auto")||sessionStorage.getItem("__r_reload_auto")||!t&&f.get(["couponView","autoCoupThrottled"]))return!1;let o=f.get("siteAPIData"),r=g.default.get(o,"siteData.coupons.type");if(r==="eeyore"||(f.get(["domainLists","autoCoupTestList"])??[]).includes(I())||M("mag_a_coup_test")&&e==="Magento")return!1;let n=r==="roo",i=I(),s=f.get("couponView"),u=f.get("deweyResult")||{},p=g.default.get(s,"autoCoupConfig.enabled")&&(g.default.get(s,"result.automaticCouponsRun")||!g.default.get(s,"result"))&&g.default.get(s,"initOrigin")!=="sitehub",l=!1;if(p){if(de(i)){let c=f.get("deweyResult","pageType");l=Iu(),c==="checkoutPage"&&(l=!0)}else l=!0;n&&W.dom.getRooPreapplieds(u)&&(l=!1)}return l}function $x(){let e=!!f.get(["cashbackView","reward","amount"]),t=M("ac_elasticity_1"),o=f.get(["couponView","partnerGroupsList"])?.groupA?.includes(I());return e&&t&&o||e&&!t}function ka(){let e=f.get("siteAPIData");return!!g.default.get(e,"siteData.cashback.reward")||!g.default.get(e,"siteData.coupons.ignoreAffiliate")}function Eu(){let e=f.get("siteAPIData"),t=g.default.get(e,"siteData.coupons.type"),o=Jt(),r=g.default.get(e,"siteData.coupons.stats.fbRate");return!!(M("disable_tc_notifs")&&o&&!ka()&&t!=="eeyore"&&r<.25)}function Vx(e,t){let o=JSON.parse(sessionStorage.getItem("__s_sitehub_try_codes")),r=Jt();if(o||t===void 0&&r||t)return!0;let a=!0;if(M("ext_ae_api_v_2")){let n=f.get(["couponView","elasticityUserDomain"]);n&&!n?.i&&(a=n.s)}return!(ka()&&!a&&(!r||!e))}function zx({result:e,isFromNonAutoRun:t}={}){let o=f.get("cashbackView"),r=!!g.default.get(o,"reward.amount");Eu()&&r&&(t||e&&e.savings<=0)&&(f.select("couponView").set("isQuietSavingsMiss",!0),Ru())}function Ru(){let e=f.get("deweyResult");f.get("cashbackVisible")&&f.set("cashbackVisible",!1),he(e)}var Kx=({label:e,clickId:t,couponRunId:o}={})=>{let r=Re(t),a=!!g.default.get(f.get("cashbackView"),"reward.amount"),n=f.get(["couponView","hasDeferredCouponRewards"]);R("trackClick","tryCodesButton","try codes",{clickId:t,couponRunId:o,redirectId:r,cashback:a}),co("couponNotification",e,"cta","primary",{redirect:!0,cashback:a&&!n,clickId:t,redirectId:r,couponRunId:o})};async function Qt(e,t,o={}){let r=o.eligible,a=g.default.get(t,"siteData.coupons.userCouponsEnabled"),i=(r||a)&&zt(e,f.get("deweyResult"))?await _a({SITE_API_V3:St,domain:e}):null;return i&&R("track","userCouponReceived",{currentLocation:g.default.pick(window.location,["hash","host","hostname","href","origin","pathname","port","search"]),coupon:JSON.stringify(i.map(s=>s.code)),userCouponObj:JSON.stringify(i)}),i}function Pu(){return!re.get("disableAffiliate")&&!f.get(["offers","coupons","disableAffiliate"])&&!me()&&!(f.get(["couponsAffiliateDisabledSites",`${I()}_${f.get("tabId")}`])>ae())&&!(f.get(["couponsAffiliateDisabledSites",`${I()}_all`])>ae())}async function je(e,t={}){let{fromAutoRun:o,autoSavings:r,clickEvent:a}=t;if(Pu())try{let i=f.get(["couponView","hasDeferredCouponRewards"])&&(!M("ext_deferred_coupon_rewards_v_2")||r),s={autoRedirect:!M("ext_deferred_coupon_rewards_v_2"),destDomain:I(),channel:"coupons",subExperience:"coupons",credits:mt()||i?!1:!!f.get("cashback"),redirectId:Re(e),vendorMetaId:mt()?void 0:f.get("cashback","id"),token:mt()?void 0:f.get("cashback","token"),clickEvent:a||o?"couponsModalClickCta":"tryCodesButton"},u,p=f.get("cashback","redirectUrl");if(p?(u=Ct(p,{extensionVersion:chrome.runtime.getManifest().version,subExperience:s.subExperience,redirectId:s.redirectId,clickEvent:s.clickEvent}),s.autoRedirect||(u=wt(u,!1))):u=At({params:s}),!s.autoRedirect){let l=await Kt(u);f.set(["couponView","tripId"],l.tripId),u=l.redirectUrl}u&&ho({url:u})}catch{}}function qx({clickId:e,fromAutoRun:t,autoSavings:o}={}){let r=e||Ie.default.v4().replace(/-/g,"");re.get("disableAffiliate")||je(r,{fromAutoRun:t,autoSavings:o})}async function Jx(e,{clickId:t,autoFallback:o,fromAutoRun:r,fromActivateRewards:a,autoSavings:n,codeEntered:i,clickEvent:s,couponRunId:u,shouldLoadEmailCreateAccountNotification:p}={}){let l=f.get("couponNotif")==="siteHub",c=I();f.set(["couponsAffiliateDisabledSites",`${c}_${f.get("tabId")}`],Ee(oo(new Date,30)));let d=f.get(["couponView","hasDeferredCouponRewards"])&&(!M("ext_deferred_coupon_rewards_v_2")||n),h=e&&d&&!a&&(!r||!i)&&!l;h&&(e=!1);let y=[G("affiliateRedirect",JSON.stringify({redirected:!0,location:location.href,couponRunId:u,autoFallback:o,isSiteHub:l,fromAutoRun:r,hasCredits:e}))];if(p&&y.push(G("emailCreateAccount",JSON.stringify({shouldLoadNotification:!0}))),await z.default.all(y),e||h){let x={programId:f.get(["siteAPIData","programId"]),creditsDeferred:h};go(x)}let w=t||Ie.default.v4().replace(/-/g,"");n||localStorage.setItem("__wb_redirecting",JSON.stringify({sameTabAuto:!0,isSiteHub:l,clickEvent:s}));let m=f.get("couponsConfig"),C=g.default.get(m,"affiliateLinkCurrentTab")&&g.default.get(m,"autoCoupConfig.enabled");(Jt()||l&&C)&&!n&&sessionStorage.setItem("__wb_same_tab_auto",JSON.stringify({sameTabAuto:!0,isSiteHub:l}));let T=e?"cashback":"coupons",_=await mo(c);_&&(T="cashback-ims");let S={autoRedirect:!M("ext_deferred_coupon_rewards_v_2"),destUrl:location.href,channel:T,subExperience:"coupons",credits:e,redirectId:Re(w),sameTab:!0,vendorMetaId:e?f.get("cashback","id"):null,token:e?f.get("cashback","token"):null,clickEvent:r?"couponsModalClickCta":a?"activateRewardsButton":"tryCodesButton",...!_&&{destDomain:f.get("siteAPIData","tld")}},v,b=f.get("cashback","redirectUrl");if(b?(v=Ct(b,{extensionVersion:chrome.runtime.getManifest().version,subExperience:S.subExperience,redirectId:S.redirectId,sameTab:S.sameTab,clickEvent:S.clickEvent}),S.autoRedirect||(v=wt(v,!1))):v=At({params:S}),S.autoRedirect)window.location.href=v;else{let x=await Kt(v);await G("tripId",x.tripId),window.location.href=x.redirectUrl}}function Du(){let e,t;sessionStorage.getItem("__wb_same_tab_auto")?e=JSON.parse(sessionStorage.getItem("__wb_same_tab_auto")):sessionStorage.getItem("__wb_redirecting")&&(t=JSON.parse(sessionStorage.getItem("__wb_redirecting")));let o=f.get("couponNotif")==="siteHub"||g.default.get(e,"isSiteHub")||g.default.get(t,"isSiteHub"),r=g.default.get(t,"clickEvent"),a=!o&&(g.default.get(e,"sameTabAuto")||t);return{sameTabAuto:e,redirecting:t,tryCouponsSameTabRedirect:a,isSiteHub:o,clickEvent:r}}async function Qx({disableAffiliate:e,automaticCouponsRun:t,coupons:o,autoFallback:r,passedInClickId:a,couponRunId:n,cashback:i,isAsyncTigger:s}){let{sameTabAuto:u,isSiteHub:p}=Du();ao("TRY CODES"),gt=!0;let l=a||Ie.default.v4().replace(/-/g,"");n=n||Ie.default.v4(),r=r||u&&!p,sessionStorage.getItem("__wb_same_tab_auto")&&sessionStorage.removeItem("__wb_same_tab_auto");let c=I();e||je(l),R("track","tryCoupons",{clickId:t?null:l,redirectId:t?null:Re(l),couponRunId:n,cashback:i,triggerType:xe({automaticCouponsRun:t,autoFallback:r,isSiteHub:p}),couponScriptType:s?"asyncTigger":"tigger",currentLocation:g.default.pick(window.location,["hash","host","hostname","href","origin","pathname","port","search"])});let d=await se(c),h=f.get(["userCouponChecks",c]);await J.run({callSource:"coupons_start"});let y=Date.now(),w=g.default.get(d,"siteData.coupons.shopify")||f.get("platform")==="Shopify",m=[],C=await Qt(c,d,h);C&&(m=m.concat(C));let T=f.get(["platform"]),_=w||lo.includes(T),S=re.get("coupons"),v;if(s||_?v=await wa(w?"shopify.com":I(),o,m,{automaticCouponsRun:t,autoFallback:r,platform:T,isSiteHub:p,couponRunId:n,cashback:i,allCoupons:S})||{}:v=await Ca(w?"shopify.com":I(),o,m,De,{automaticCouponsRun:t,autoFallback:r,platform:T,isSiteHub:p,couponRunId:n,cashback:i,allCoupons:S})||{},g.default.get(v,"bestCoupon"))try{let b=g.default.get(v,"bestCoupon.code");b&&(Da=b.toLowerCase())}catch{}if(v.duration=new Date().getTime()-y,v){if(v.pageReload){await G("couponRun",JSON.stringify({clickId:l,result:v}));let b=f.get(["couponView","tripId"]);return b&&await G("tripId",b),{pageReload:!0}}return await ht({result:v,clickId:l}),v}return{finishWithoutResult:!0}}function ht({result:e,clickId:t}){sessionStorage.getItem("__wb_same_tab_auto")&&sessionStorage.removeItem("__wb_same_tab_auto"),re.set("resultTemp",g.default.assign(e,{clickId:t}));let o=f.get("siteAPIData"),r=!!g.default.get(o,"siteData.cashback.reward");return e&&e.automaticCouponsRun&&r?Aa({throttleAutoCoup:!0}):Aa(),gt=!1,J.run({callSource:"coupons_end",siteData:f.get("siteAPIData").siteData})}function ku(){let e="Capital One Shopping tests codes in seconds.";return f.get(["siteAPIData","siteData","coupons","stats","fbRate"])<=.05?e="Limited savings available, but it's still worth a try!":M("ext_shorten_notif_text")&&(e="Test codes in seconds."),e}function Yx(){let e=I(),t=null;return de(e)||(t=ku()),t}async function Xx(){R("track","viewAllCodes",{currentLocation:g.default.pick(window.location,["hash","host","hostname","href","origin","pathname","port","search"])})}async function Zx(e,t={}){let{origin:o,clickEvent:r}=t,a=Ie.default.v4().replace(/-/g,""),n=re.get("disableAffiliate"),i=f.get("siteAPIData","siteData","coupons","ignoreAffiliate"),s=f.get(["couponView","hasDeferredCouponRewards"]);(n===!1||n===void 0&&!i)&&!s&&je(a,{clickEvent:r}),R("trackClick","copyCouponCode",e,{clickId:a,origin:o})}var Ou=async({siteAPIData:e,domain:t}={})=>{let o=g.default.get(e,"siteData.coupons.script"),r=g.default.get(e,"siteData.coupons.type"),a=f.get("platform");if(a&&!o){let n=await De({message:"getPlatformIdentifiers",platformForIdentifiers:a,platformPageTypeForIdentifiers:"roo"});o=g.default.get(n,"script")}o&&(t==="etsy.com"?La(o):de(t)?Nu(o):r!=="roo"&&Bu(o))};async function ey(e={}){let t=!1,o,r=I(),{experience:a}=e,n=await se(r),{coupons:i,ignoreAffiliate:s}=g.default.get(n,"siteData.coupons",{}),u=f.get(["userCouponChecks",r]),p=i&&i.length&&mt(),l=!1;(s||f.get(["couponsAffiliateDisabledSites",`${r}_${f.get("tabId")}`])>ae()||f.get(["couponsAffiliateDisabledSites",`${r}_all`])>ae())&&!p&&(re.set("disableAffiliate",!0),l=!0);let c=i&&i.length;await Ou({siteAPIData:n,domain:r});let d,h,y,w=500,m=f.get("platform"),C=await ju(n,r,u),T=g.default.get(n,"siteData.coupons.shopify")||m==="Shopify";for(;!y;){let x=await Vt(T?"shopify.com":r,i,{platform:m,experience:C||a});d=x.estimatedRunTime,h=x.pageCoupons,y=d!==void 0,x.error?await Oa(w,o):clearInterval(o),w*=2,w>5e3&&(w=5e3)}Ue=window.location.href,Sa&&(J.emitter.on("result",Lu),Sa=!1);let _,S=me()&&!p;if(d){R("track","couponCheck"),S&&(l=!0);try{let x=await ge("couponRun");if(_=JSON.parse(x),_){let F={domain:r},{savings:K,originalTotal:ce}=await va(F);_.result.savings=K,_.result.originalTotal=ce,delete _.result.pageReload,await ie("couponRun")}}catch{ie("couponRun")}h&&(i=[],c=h),t={coupons:i,estimatedRunTime:d,disableAffiliate:l,couponCount:c,affiliateLinkCurrentTab:g.default.get(n,"meta.affiliate_link_current_tab"),pageWasReloaded:!!_,standDown:S,standDownOverride:p,autoCoupConfig:g.default.get(n,"siteData.coupons.config.auto_coup")}}let v=f.get("couponsConfig");return g.default.get(v,"pageWasReloaded")&&(t.pageWasReloaded=!0),f.set("couponsConfig",t),_&&ht(_),t}var Be=500;async function Lu(e){g.default.get(e,"callSource")==="internal"&&g.default.get(e,"deweyTrigger.trigger")==="url"&&(Be=500,Ue&&Ue!==g.default.get(e,"url")&&(Ue=null,f.get("shouldShowSPAPrompt")||f.set("shouldHidePrompt",!0),await Mu(),f.set("shouldShowSPAPrompt",!0)))}async function Mu(){let e,t=I(),o=await se(t),{coupons:r}=g.default.get(o,"siteData.coupons",{}),a,n,i=f.get("platform");for(;!n;){let s=await Vt(g.default.get(o,"siteData.coupons.shopify")?"shopify.com":t,r,{platform:i});a=s.estimatedRunTime,n=a!==void 0,s.error?await Oa(Be,e):clearInterval(e),Be*=2,Be>5e3&&(Be=5e3)}Ue=window.location.href,f.unset("shouldHidePrompt")}async function Oa(e,t){return new z.default(o=>{t=setTimeout(o,e)})}async function Ia(e){let t=g.default.get(e,"siteData.coupons.identifiers"),o=document;return o.deweyParser=Ae.default,o.html=document.documentElement.innerHTML,await J.evaluateIdentifierTree(t,o)}async function ty(){let e=I(),t=await se(e);await Ia(t)||await new z.default((p,l)=>{J.emitter.on("result",async c=>{let d=await Ia(t);d&&p(d)})});let{coupons:r,ignoreAffiliate:a}=g.default.get(t,"siteData.coupons",{}),n=!1;if((a||f.get(["couponsAffiliateDisabledSites",`${e}_${f.get("tabId")}`])>ae()||f.get(["couponsAffiliateDisabledSites",`${e}_all`])>ae())&&(re.set("disableAffiliate",!0),n=!0),me())return n=!0,!1;let i=r&&r.length,s={coupons:r,estimatedRunTime:0,disableAffiliate:n,couponCount:i,pageWasReloaded:!1,noScript:!0};return f.set("couponsConfig",s),s}function qt(e,t){if(e){if(e.matches(t))return e;let o=e.querySelector(t);return o||(e.parentElement?qt(e.parentElement,t):null)}}async function Fu(e,t,o){if(!gt){let r;if(o?(r=qt(o,t.promoInputSelector),setTimeout(()=>La(t),1500)):r=W.dom.getPromoCodeEl(t),r){let a=r.value;if(g.default.get(a,"length")&&a.toLowerCase()!==Da){let n="userContributedCode";await ke({action:"getHoneyState",comp:"honey"})&&(n="userContributedCodeH");let s;try{let u=t.promoRemoveAction;s=qt(o,u).textContent.trim()}catch{}R("track",n,{code:a,seller:s})}}}}async function La(e){try{if(e.promoApplyAction){let t=document.querySelectorAll(e.promoApplyAction);g.default.forEach(t,o=>{o.addEventListener("click",r=>Fu(r,e,o))})}}catch{}}function Ea(){return Array.from((0,Ae.default)('[name="dupOrderCheckArgs"]')).reduce((t,o)=>{let r={},a=o.value.split("|");r.asin=a[0],r.sellerId=a[3];let n=(0,Ae.default)(o).prev();return r.isPromoApplied=!!n.find(':contains("See order summary for discounts applied")').length||!!n.find(':contains("discount applied")').length,r.price=Tt(n.find(".a-color-price .a-text-bold").text()),t[r.asin]=r,t},{})}async function Nu(e){Ra(e);let t=window.location.href;setInterval(async()=>{let o=window.location.href;t!==o&&(t=o,await z.default.delay(1e3),Ra(e))},500)}async function Ra(e){function t(){return Tt(W.dom.getElement(e.cartTotalSelector).innerText)}if(e.promoApplyAction){let o=W.dom.getElement(e.promoApplyAction);if(o){let r;o.addEventListener("click",async a=>{try{let i=W.dom.getPromoCodeEl(e).value;if(i){clearInterval(r);let s=t(),u=Ea();await z.default.delay(500),await z.default.race([new z.default(m=>{try{r=setInterval(()=>{try{!(0,Ae.default)(".loading-spinner-blocker:visible").length&&!(0,Ae.default)(".section-overwrap:visible").length&&m()}catch{}},10)}catch{}}),z.default.delay(2e4)]),clearInterval(r);let p=t(),l=Ea(),c=Object.keys(u).reduce((m,C)=>!u[C].isPromoApplied&&l[C]&&l[C].isPromoApplied?C:m,""),d=l[c],h,y,w;d&&(h=d.sellerId,y=u[c].price||0,w=c),R("track","userContributedCode",{code:i,savings:(s||0)-(p||0),productPrice:y,seller:h,product:w})}}catch{}})}}}async function Pa(e){if(!gt){let t=W.dom.getPromoCodeEl(e);if(t){let o=t.value;if(g.default.get(o,"length")){let r="userContributedCode";await ke({action:"getHoneyState",comp:"honey"})&&(r="userContributedCodeH"),R("track",r,{code:o})}}}}async function Bu(e){try{if(e.promoApplyAction){let t=W.dom.getElement(e.promoApplyAction);t&&t.addEventListener("click",async r=>{await Pa(e)});let o=W.dom.getPromoCodeEl(e);o&&o.addEventListener("keydown",async r=>{if(r.code==="Enter"){let a=Pa.bind(e);g.default.debounce(a,200)}})}}catch{}}var oy=()=>"No Thanks, Activate Rewards",ry=({couponCount:e,isTryCodesButton:t})=>t&&f.get(["cashback","isAwinDomain"])?"Apply Savings":t?"Try Codes":`Found ${e} ${e===1?"code":"codes"}`,Uu=["petco.com","officedepot.com","staples.com","walmart.com"];async function ju(e,t,o){let r=o&&o.eligible;if(o||(r=g.default.get(e,"siteData.coupons.userCouponsEnabled")?await Ta({SITE_API_V3:St,domain:t}):void 0),r)return Uu.includes(t)?"giftcard":"user_coupons"}var Yt=f.select("couponView"),W=new Ne(uo,{hasFeature:M,sendShoppingEvent:R,currentDomain:I,activateInPinnedTab:je,getSingleUseCouponsIfValid:Qt,siteCache:se,handleResult:ht,shouldCouponsStandDown:me,compStateCache:ke,domainLocalStorageGet:ge,domainLocalStorageSet:G,domainLocalStorageRemove:ie,getFromState:e=>f.get(e),onIsNotCouponPage:()=>{let e=f.get("deweyResult");dt(e)&&(R("trackError","couponsInitError","roo"),he(e))},onTryCode:e=>Yt.set("currentCouponCode",e),disableAffiliate:()=>Yt.set("disableAffiliate",!0),setRunning:e=>Yt.set("rooRunning",e),setInState:(e,t)=>f.set(e,t),startDeweyRun:()=>J.run({callSource:"coupons_start"})});W.addListener(e=>q("rooPouch",e));var Ma=L($a());var Xt=L(no()),xt,yt=class extends Ma.Component{constructor(...t){super(...t),this.state={progress:0}}componentWillMount(){this.setInt(this.props.estimatedDuration)}setInt(t,o=100){clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.props.pause||(this.state.progress<100?this.setState({progress:this.state.progress+1}):clearInterval(this.intervalId))},Math.round(t/o)),xt=this.intervalId}componentWillUnmount(){clearInterval(this.intervalId)}componentWillReceiveProps(t){!this.props.complete&&t&&t.complete&&(clearInterval(this.intervalId),this.setState({progress:100})),t.estimatedTimeLeft?(xt&&clearInterval(xt),this.setInt(t.estimatedTimeLeft,100-this.state.progress)):t.estimatedDuration&&(clearInterval(xt),this.setInt(t.estimatedDuration,100-this.state.progress))}render(){let{progress:t}=this.state,o=10+t/100*90,r=Math.min(o,100),a=this.props.rounded?"rounded":"";return(0,Xt.jsx)("div",{id:"progress-bar-wrapper",className:`${a} progress-bar`,children:(0,Xt.jsx)("div",{className:"progress",style:{width:`${r}%`}})})}};yt.defaultProps={estimatedDuration:6e4};var Ay=yt;export{xe as a,ct as b,zh as c,dt as d,va as e,W as f,Aa as g,Iu as h,Jt as i,$x as j,Eu as k,Vx as l,zx as m,Kx as n,je as o,qx as p,Jx as q,Qx as r,ht as s,Yx as t,Xx as u,Zx as v,Ou as w,ey as x,Ia as y,ty as z,oy as A,ry as B,Ay as C};
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
