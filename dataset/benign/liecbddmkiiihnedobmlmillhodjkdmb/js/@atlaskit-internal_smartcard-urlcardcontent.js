
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="183041b2-f7a7-5cac-82c1-e68996cde7de")}catch(e){}}();
(self.webpackChunk_loomhq_chrome_extension=self.webpackChunk_loomhq_chrome_extension||[]).push([[677],{6573:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>P});var r=n(92860),o=n(62191),i=n(24672),a=n(843),c=n(33196),u=n.n(c),l=n(21547),s=n(59376),f=n(37215),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()>e},d=n(3013),m=n(36477),h="360px";function v(e){var t=(0,r.useRef)(null),n=(0,r.useState)(!1),o=(0,i.A)(n,2),c=o[0],v=o[1],y=(0,r.useState)(p()),b=(0,i.A)(y,1)[0],w=e.appearance,g=e.url,O=e.id,E=function(e){var t=(0,l.wZ)(),n=t.store,o=t.prefetchStore,i=t.connections,c=n||{},f=c.dispatch,p=c.getState,d=(i||{}).client;return(0,r.useCallback)((0,a.A)(u().mark((function t(){var r,a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&o&&i){t.next=2;break}return t.abrupt("return");case 2:if(r=o[e],a=p()[e],r||a){t.next=16;break}return o[e]=!0,t.prev=7,t.next=10,d.prefetchData(e);case 10:(c=t.sent)&&(f({type:"resolved",url:e,payload:c}),f((0,s.Fy)(s.E0,{url:e},void 0,void 0,"resolved"))),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(7);case 16:case"end":return t.stop()}}),t,null,[[7,14]])}))),[n,o,i,e,p,d,f])}(g),S="inline"===w?"span":"div",k=S,C=(0,r.useCallback)((function(e,t){e.some((function(e){return e.isIntersecting}))?(b&&(0,f.Tv)("smart-link-rendered",O),v(!0),t.disconnect()):E()}),[O,E,b]);(0,r.useEffect)((function(){if(t.current){var e=new IntersectionObserver(C,{rootMargin:"".concat(h," 0px ").concat(h," 0px")});return e.observe(t.current),function(){return e.disconnect()}}}),[t,C]);var x=c?r.createElement(d.t,e):r.createElement(k,{ref:t},r.createElement(m.x,e));return r.createElement(S,{className:"loader-wrapper"},x)}var y=n(84525),b=n.n(y);function w(e){if(e){var t=e.getBoundingClientRect();return{left:window.pageXOffset+t.left,right:window.pageXOffset+t.left+t.width,top:window.pageYOffset+t.top,bottom:window.pageYOffset+t.top+t.height}}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}const E=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}()?{passive:!0}:void 0;function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=function(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?x(e):t}(this,(e=C(t)).call.apply(e,[this].concat(o))),L(x(n),"raf",void 0),L(x(n),"element",void 0),L(x(n),"container",void 0),L(x(n),"state",{hasBeenScrolledIntoView:!1}),L(x(n),"update",(function(){cancelAnimationFrame(n.raf),n.raf=requestAnimationFrame((function(){var e=n.getElementBounds(),t=n.getViewportBounds(),r=n.getOffsetBounds();e&&t&&function(e,t,n){var r=n&&n.top||0,o=n&&n.right||0,i=n&&n.bottom||0,a=n&&n.left||0;return e.bottom+i>=t.top&&e.top-r<=t.bottom&&e.right+o>=t.left&&e.left-a<=t.right}(e,t,r)&&(n.stopListening(n.container),n.setState({hasBeenScrolledIntoView:!0},(function(){var e=n.props.onRender;e&&e()})))}))})),L(x(n),"handleMount",(function(e){var t=n.props.scrollContainer;n.element=e,n.container=n.getContainer(t)})),n}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,o=[{key:"getContainer",value:function(e){if(e)return e;if(this.element){var t=b()(this.element);return t===document.scrollingElement||t===document.documentElement||"BackCompat"!==document.compatMode&&t==document.body?window:t}}},{key:"getViewportBounds",value:function(){return function(e){if(e){if(e===window)return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth};var t=w(e);return t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}({},t,{bottom:t.top+e.offsetHeight,right:t.left+e.offsetWidth}):void 0}}(this.container)}},{key:"getElementBounds",value:function(){return w(this.element)}},{key:"getOffsetBounds",value:function(){return function(e){var t,n,r,o;if(e)return"object"===O(e)?(t=e.top||0,n=e.right||0,r=e.bottom||0,o=e.left||0):(t=e||0,n=e||0,r=e||0,o=e||0),{top:t,right:n,bottom:r,left:o}}(this.props.offset)}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=e.scrollContainer,o=this.props.scrollContainer;r!==o&&(t.hasBeenScrolledIntoView||this.stopListening(r),this.container=this.getContainer(o),this.startListening(this.container),this.setState({hasBeenScrolledIntoView:!1},(function(){n.update()})))}},{key:"startListening",value:function(e){e&&e.addEventListener("scroll",this.update,E),window.addEventListener("resize",this.update)}},{key:"stopListening",value:function(e){e&&e.removeEventListener("scroll",this.update,E),window.removeEventListener("resize",this.update)}},{key:"componentDidMount",value:function(){this.update(),this.startListening(this.container)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.container)}},{key:"renderChildren",value:function(){var e=this.props,t=e.placeholder,n=e.content,r=e.children,o=this.state.hasBeenScrolledIntoView;return!o&&t?t:o&&n?n:r?r(o):null}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.component;return r.createElement(n||"div",{ref:this.handleMount,className:t,children:this.renderChildren()})}}],o&&k(n.prototype,o),t}(r.Component);function B(e){var t=e.appearance,n=e.container,o=e.id,i=Math.ceil(window.innerHeight/4);return(0,r.useState)((function(){(0,f.Tv)("smart-link-rendered",o)})),r.createElement(_,{offset:i,component:"inline"===t?"span":"div",className:"loader-wrapper",placeholder:r.createElement(m.x,e),scrollContainer:n,content:r.createElement(d.t,e)})}function P(e){return(0,o.mc)()?r.createElement(v,e):r.createElement(B,e)}},84525:function(e,t){var n,r;void 0===(r="function"==typeof(n=function(){function e(e){var t=getComputedStyle(e,null).getPropertyValue("overflow");return t.indexOf("scroll")>-1||t.indexOf("auto")>-1}return function(t){if(t instanceof HTMLElement||t instanceof SVGElement){for(var n=t.parentNode;n.parentNode;){if(e(n))return n;n=n.parentNode}return document.scrollingElement||document.documentElement}}})?n.apply(t,[]):n)||(e.exports=r)}}]);
//# sourceMappingURL=@atlaskit-internal_smartcard-urlcardcontent.js.map
//# debugId=183041b2-f7a7-5cac-82c1-e68996cde7de
