!function(){function Xp(qh,kX,xf){function aC(bC,tV){if(!kX[bC]){if(!qh[bC]){var oH="function"==typeof require&&require;if(!tV&&oH)return oH(bC,!0);if(Md)return Md(bC,!0);var Mp=new Error("Cannot find module '"+bC+"'");throw Mp.code="MODULE_NOT_FOUND",Mp}var dp=kX[bC]={exports:{}};qh[bC][0].call(dp.exports,(function(Xp){var kX;return aC(qh[bC][1][Xp]||Xp)}),dp,dp.exports,Xp,qh,kX,xf)}return kX[bC].exports}for(var Md="function"==typeof require&&require,bC=0;bC<xf.length;bC++)aC(xf[bC]);return aC}return Xp}()({1:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.IMG_FILTER_ID=kX.MSG_CLEANUP=kX.ROOT_VARS_PREFIX=kX.META_PROPERTY=kX.STYLESHEET_COMMON_CLASSNAME=kX.PROXY_SELECTOR=kX.EVENT_PREFIX=kX.STYLESHEET_CORS_SELECTOR=kX.STYLESHEET_SYNC_SELECTOR=kX.STYLESHEET_ROOT_VARS_SELECTOR=kX.STYLESHEET_INLINE_SELECTOR=kX.STYLESHEET_OVERRIDE_SELECTOR=kX.STYLESHEET_VARIABLES_SELECTOR=kX.STYLESHEET_INVERT_SELECTOR=kX.STYLESHEET_TEXT_SELECTOR=kX.STYLESHEET_USER_AGENT_SELECTOR=kX.STYLESHEET_FALLBACK_SELECTOR=kX.MISC_PREFIX=void 0;const xf=Xp("./prefix");kX.MISC_PREFIX=xf.PREFIX,kX.STYLESHEET_FALLBACK_SELECTOR=`.${xf.PREFIX}-fb`,kX.STYLESHEET_USER_AGENT_SELECTOR=`.${xf.PREFIX}-ua`,kX.STYLESHEET_TEXT_SELECTOR=`.${xf.PREFIX}-tx`,kX.STYLESHEET_INVERT_SELECTOR=`.${xf.PREFIX}-iv`,kX.STYLESHEET_VARIABLES_SELECTOR=`.${xf.PREFIX}-vb`,kX.STYLESHEET_OVERRIDE_SELECTOR=`.${xf.PREFIX}-or`,kX.STYLESHEET_INLINE_SELECTOR=`.${xf.PREFIX}-il`,kX.STYLESHEET_ROOT_VARS_SELECTOR=`.${xf.PREFIX}-rv`,kX.STYLESHEET_SYNC_SELECTOR=`.${xf.PREFIX}-sn`,kX.STYLESHEET_CORS_SELECTOR=`.${xf.PREFIX}-cr`,kX.EVENT_PREFIX=`__${xf.PREFIX}__`,kX.PROXY_SELECTOR=`.${xf.PREFIX}-pr`,kX.STYLESHEET_COMMON_CLASSNAME=`${xf.PREFIX}m2`,kX.META_PROPERTY=xf.PREFIX,kX.ROOT_VARS_PREFIX=xf.PREFIX,kX.MSG_CLEANUP=kX.EVENT_PREFIX+"cleanUp",kX.IMG_FILTER_ID=`${xf.PREFIX}-image-filter`},{"./prefix":29}],2:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0});const xf=Xp("../const"),aC=Xp("../defaults"),Md=Xp("./dynamic-theme"),bC=Xp("./utils/dom");async function tV(Xp,qh,kX){"cleanStyle"===(null==Xp?void 0:Xp.action)&&(0,Md.removeDynamicTheme)()}function oH(){(0,bC.removeNode)(document.querySelector(xf.STYLESHEET_FALLBACK_SELECTOR))}async function Mp(){chrome.runtime.onMessage.addListener(tV);const Xp=await chrome.runtime.sendMessage({action:"getStyle"});if(Xp){const qh=window.top===window;(0,Md.createOrUpdateDynamicTheme)(aC.DEFAULT_THEME,Xp,qh)}else oH()}Mp()},{"../const":1,"../defaults":20,"./dynamic-theme":7,"./utils/dom":18}],3:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.createAdoptedStyleSheetOverride=void 0;const xf=Xp("./stylesheet-modifier"),aC=new WeakMap,Md=new WeakSet;function bC(Xp){let qh=!1;function kX(qh,kX){const xf=[...Xp.adoptedStyleSheets],aC=xf.indexOf(qh),Md=xf.indexOf(kX);aC!==Md-1&&(Md>=0&&xf.splice(Md,1),xf.splice(aC+1,0,kX),Xp.adoptedStyleSheets=xf)}function bC(){qh=!0;const kX=[...Xp.adoptedStyleSheets];Xp.adoptedStyleSheets.forEach((Xp=>{if(Md.has(Xp)){const qh=kX.indexOf(Xp);qh>=0&&kX.splice(qh,1),aC.delete(Xp),Md.delete(Xp)}})),Xp.adoptedStyleSheets=kX}function tV(bC,tV){Xp.adoptedStyleSheets.forEach((Xp=>{if(Md.has(Xp))return;const oH=Xp.rules,Mp=new CSSStyleSheet;function dp(){for(let Xp=Mp.cssRules.length-1;Xp>=0;Xp--)Mp.deleteRule(Xp);return kX(Xp,Mp),aC.set(Xp,Mp),Md.add(Mp),Mp}const hy=undefined;(0,xf.createStyleSheetModifier)().modifySheet({prepareSheet:dp,sourceCSSRules:oH,theme:bC,ignoreImageAnalysis:tV,force:!1,isAsyncCancelled:()=>qh})}))}return{render:tV,destroy:bC}}kX.createAdoptedStyleSheetOverride=bC},{"./stylesheet-modifier":14}],4:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.replaceCSSFontFace=kX.removeCSSComments=kX.replaceCSSRelativeURLsWithAbsolute=kX.getCSSBaseBath=kX.getCSSURLValue=kX.cssImportRegex=kX.cssURLRegex=kX.iterateCSSDeclarations=kX.iterateCSSRules=void 0;const xf=Xp("../../utils/array"),aC=Xp("../../utils/platform"),Md=Xp("../../utils/url"),bC=Xp("../utils/log");function tV(Xp,qh,kX){(0,xf.forEach)(Xp,(Xp=>{if(Xp.selectorText)qh(Xp);else if(Xp.href)try{tV(Xp.styleSheet.cssRules,qh,kX)}catch(Xp){(0,bC.logInfo)(`Found a non-loaded link.`),kX&&kX()}else if(Xp.media){const xf=Array.from(Xp.media),aC=xf.some((Xp=>Xp.startsWith("screen")||Xp.startsWith("all")||Xp.startsWith("("))),Md=xf.some((Xp=>Xp.startsWith("print")||Xp.startsWith("speech")));!aC&&Md||tV(Xp.cssRules,qh,kX)}else Xp.conditionText?CSS.supports(Xp.conditionText)&&tV(Xp.cssRules,qh,kX):(0,bC.logWarn)(`CSSRule type not supported`,Xp)}))}kX.iterateCSSRules=tV;const oH=["background","border","border-color","border-bottom","border-left","border-right","border-top","outline","outline-color"],Mp=aC.isSafari?oH.map((Xp=>{const qh=undefined;return[Xp,new RegExp(`${Xp}:\\s*(.*?)\\s*;`)]})):null;function dp(Xp,qh){(0,xf.forEach)(Xp,(kX=>{const xf=Xp.getPropertyValue(kX).trim();xf&&qh(kX,xf)}));const kX=Xp.cssText;kX.includes("var(")&&(aC.isSafari?Mp.forEach((([Xp,xf])=>{const aC=kX.match(xf);if(aC&&aC[1]){const kX=aC[1].trim();qh(Xp,kX)}})):oH.forEach((kX=>{const xf=Xp.getPropertyValue(kX);xf&&xf.includes("var(")&&qh(kX,xf)})))}function hy(Xp){return Xp.trim().replace(/[\n\r\\]+/g,"").replace(/^url\((.*)\)$/,"$1").trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1").replace(/(?:\\(.))/g,"$1")}function Sm(Xp){const qh=(0,Md.parseURL)(Xp);return`${qh.origin}${qh.pathname.replace(/\?.*$/,"").replace(/(\/)([^\/]+)$/i,"$1")}`}function SH(Xp,qh){return Xp.replace(kX.cssURLRegex,(Xp=>{const kX=hy(Xp);try{return`url('${(0,Md.getAbsoluteURL)(qh,kX)}')`}catch(qh){return(0,bC.logWarn)("Not able to replace relative URL with Absolute URL, skipping"),Xp}}))}kX.iterateCSSDeclarations=dp,kX.cssURLRegex=/url\((('.*?')|(".*?")|([^\)]*?))\)/g,kX.cssImportRegex=/@import\s*(url\()?(('.+?')|(".+?")|([^\)]*?))\)? ?(screen)?;?/gi,kX.getCSSURLValue=hy,kX.getCSSBaseBath=Sm,kX.replaceCSSRelativeURLsWithAbsolute=SH;const jp=/\/\*[\s\S]*?\*\//g;function AB(Xp){return Xp.replace(jp,"")}kX.removeCSSComments=AB;const SJ=/@font-face\s*{[^}]*}/g;function nt(Xp){return Xp.replace(SJ,"")}kX.replaceCSSFontFace=nt},{"../../utils/array":30,"../../utils/platform":40,"../../utils/url":45,"../utils/log":19}],5:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.combineFixes=kX.findRelevantFix=void 0;const xf=Xp("../utils/log"),aC=Xp("../../utils/url");function Md(Xp,qh){if(!Array.isArray(qh)||0===qh.length||"*"!==qh[0].url[0])return(0,xf.logWarn)("selectRelevantFix() failed to construct a single fix",Xp,qh),null;let kX=0,Md=null;for(let xf=1;xf<qh.length;xf++)if((0,aC.isURLInList)(Xp,qh[xf].url)){const Xp=qh[xf].url[0].length;(null===Md||kX<Xp)&&(kX=Xp,Md=xf)}return Md}function bC(Xp){if(0===Xp.length||"*"!==Xp[0].url[0])return(0,xf.logWarn)("combineFixes() failed to construct a single fix",Xp),null;function qh(Xp){return Xp.filter(Boolean).flat()}return{url:[],invert:qh(Xp.map((Xp=>Xp.invert))),css:Xp.map((Xp=>Xp.css)).filter(Boolean).join("\n"),ignoreInlineStyle:qh(Xp.map((Xp=>Xp.ignoreInlineStyle))),ignoreImageAnalysis:qh(Xp.map((Xp=>Xp.ignoreImageAnalysis))),disableStyleSheetsProxy:Xp.some((Xp=>Xp.disableStyleSheetsProxy))}}kX.findRelevantFix=Md,kX.combineFixes=bC},{"../../utils/url":45,"../utils/log":19}],6:[function(Xp,qh,kX){"use strict";var xf=void 0&&(void 0).__importDefault||function(Xp){return Xp&&Xp.__esModule?Xp:{default:Xp}};Object.defineProperty(kX,"__esModule",{value:!0}),kX.cleanImageProcessingCache=kX.getFilteredImageDataURL=kX.getImageDetails=void 0;const aC=Xp("../../generators/svg-filter"),Md=Xp("./network"),bC=Xp("../../utils/color"),tV=Xp("../../utils/network"),oH=Xp("../utils/log"),Mp=xf(Xp("../../utils/async-queue")),dp=Xp("../../const"),hy=new Mp.default;async function Sm(Xp){return new Promise((async(qh,kX)=>{let xf;if(Xp.startsWith("data:"))xf=Xp;else try{xf=await SH(Xp)}catch(Xp){return void kX(Xp)}try{const kX=await jp(xf);hy.addToQueue((()=>{qh(Object.assign({src:Xp,dataURL:xf,width:kX.naturalWidth,height:kX.naturalHeight},eq(kX)))}))}catch(Xp){kX(Xp)}}))}async function SH(Xp){const qh=undefined;return new URL(Xp).origin===location.origin?await(0,tV.loadAsDataURL)(Xp):await(0,Md.bgFetch)({url:Xp,responseType:"data-url"})}async function jp(Xp){return new Promise(((qh,kX)=>{const xf=new Image;xf.onload=()=>qh(xf),xf.onerror=()=>kX(`Unable to load image ${Xp}`),xf.src=Xp}))}kX.getImageDetails=Sm;const AB=32*32;let SJ,nt;function ij(){const Xp=AB,qh=AB;SJ=document.createElement("canvas"),SJ.width=Xp,SJ.height=qh,nt=SJ.getContext("2d",{willReadFrequently:!0}),nt.imageSmoothingEnabled=!1}function uK(){SJ=null,nt=null}const kN=5*1024*1024;function eq(Xp){SJ||ij();const{naturalWidth:qh,naturalHeight:kX}=Xp;if(0===kX||0===qh)return(0,oH.logWarn)(`logWarn(Image is empty ${Xp.currentSrc})`),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!1};const xf=undefined;if(qh*kX*4>kN)return(0,oH.logInfo)("Skipped large image analyzing(Larger than 5mb in memory)"),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!0};const aC=qh*kX,Md=Math.min(1,Math.sqrt(AB/aC)),tV=Math.ceil(qh*Md),Mp=Math.ceil(kX*Md);nt.clearRect(0,0,tV,Mp),nt.drawImage(Xp,0,0,qh,kX,0,0,tV,Mp);const dp=undefined,hy=nt.getImageData(0,0,tV,Mp).data,Sm=.05,SH=.4,jp=.7;let uK=0,eq=0,Ds=0,sw,fb,cB,WE,uE,XX,uu,oI;for(cB=0;cB<Mp;cB++)for(fb=0;fb<tV;fb++)sw=4*(cB*tV+fb),WE=hy[sw+0],uE=hy[sw+1],XX=hy[sw+2],uu=hy[sw+3],uu/255<Sm?uK++:(oI=(0,bC.getSRGBLightness)(WE,uE,XX),oI<SH&&eq++,oI>jp&&Ds++);const m=tV*Mp,Vo=m-uK,Ef=undefined,uJ=undefined,an=undefined,Mq=undefined;return{isDark:eq/Vo>=.7,isLight:Ds/Vo>=.7,isTransparent:uK/m>=.1,isLarge:aC>=800*600,isTooLarge:!1}}function Ds({dataURL:Xp,width:qh,height:kX},xf){const Md=(0,aC.getSVGFilterMatrixValue)(xf),bC=[`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${qh}" height="${kX}">`,"<defs>",`<filter id="${dp.IMG_FILTER_ID}">`,`<feColorMatrix type="matrix" values="${Md}" />`,"</filter>","</defs>",`<image width="${qh}" height="${kX}" filter="url(#${dp.IMG_FILTER_ID})" xlink:href="${Xp}" />`,"</svg>"].join("");return`data:image/svg+xml;base64,${btoa(bC)}`}function sw(){hy&&hy.stopQueue(),uK()}kX.getFilteredImageDataURL=Ds,kX.cleanImageProcessingCache=sw},{"../../const":1,"../../generators/svg-filter":23,"../../utils/async-queue":31,"../../utils/color":33,"../../utils/network":38,"../utils/log":19,"./network":12}],7:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.cleanDynamicThemeCache=kX.removeDynamicTheme=kX.createOrUpdateDynamicThemeInternal=kX.createOrUpdateDynamicTheme=void 0;const xf=Xp("./inline-style"),aC=Xp("./meta-theme-color"),Md=Xp("./modify-css"),bC=Xp("./style-manager"),tV=Xp("./watch"),oH=Xp("../../utils/array"),Mp=Xp("../utils/dom"),dp=Xp("../utils/log"),hy=Xp("../../utils/throttle"),Sm=Xp("../../utils/math"),SH=Xp("../../generators/css-filter"),jp=Xp("../../generators/modify-colors"),AB=Xp("../../generators/text-style"),SJ=Xp("../../utils/uid"),nt=Xp("./adopted-style-manger"),ij=Xp("../../utils/platform"),uK=Xp("../../utils/color"),kN=Xp("../../utils/url"),eq=Xp("./variables"),Ds=Xp("../../utils/visibility"),sw=Xp("./fixes"),fb=Xp("../../const"),cB=Xp("./mv3-proxy"),WE=!1,uE=(0,SJ.generateUID)(),XX=new Map,uu=[];let oI=null,m=null,Vo=null,Ef=[],uJ=[];function an(Xp,qh=document.head||document){let kX=qh.querySelector(Xp);return kX||(kX=document.createElement("style"),kX.classList.add(fb.STYLESHEET_COMMON_CLASSNAME),kX.classList.add(Xp.substring(1)),kX.media="screen",kX.textContent=""),kX}function Mq(Xp){(0,dp.logInfo)("MV3 proxy injector: regular path attempts to inject...");const qh=document.createElement("script");qh.src=chrome.runtime.getURL("js/proxy.js"),qh.dataset.arg=JSON.stringify(Xp),document.head.prepend(qh)}const CV=new Map;function VL(Xp,qh){CV.has(qh)&&CV.get(qh).stop(),CV.set(qh,(0,Mp.watchForNodePosition)(Xp,"head"))}function It(){(0,oH.forEach)(CV.values(),(Xp=>Xp.stop())),CV.clear()}function no(){const Xp=an(fb.STYLESHEET_FALLBACK_SELECTOR,document);Xp.textContent=(0,Md.getModifiedFallbackStyle)(oI,{strict:!0}),document.head.insertBefore(Xp,document.head.firstChild),VL(Xp,"fallback");const qh=an(fb.STYLESHEET_USER_AGENT_SELECTOR);qh.textContent=(0,Md.getModifiedUserAgentStyle)(oI,Vo,oI.styleSystemControls),document.head.insertBefore(qh,Xp.nextSibling),VL(qh,"user-agent");const kX=an(fb.STYLESHEET_TEXT_SELECTOR);oI.useFont||oI.textStroke>0?kX.textContent=(0,AB.createTextStyle)(oI):kX.textContent="",document.head.insertBefore(kX,Xp.nextSibling),VL(kX,"text");const aC=an(fb.STYLESHEET_INVERT_SELECTOR);m&&Array.isArray(m.invert)&&m.invert.length>0?aC.textContent=[`${m.invert.join(", ")} {`,`    filter: ${(0,SH.getCSSFilterValue)(Object.assign(Object.assign({},oI),{contrast:0===oI.mode?oI.contrast:(0,Sm.clamp)(oI.contrast-10,0,100)}))} !important;`,"}"].join("\n"):aC.textContent="",document.head.insertBefore(aC,kX.nextSibling),VL(aC,"invert");const bC=an(fb.STYLESHEET_INLINE_SELECTOR);bC.textContent=(0,xf.getInlineOverrideStyle)(),document.head.insertBefore(bC,aC.nextSibling),VL(bC,"inline");const tV=an(fb.STYLESHEET_OVERRIDE_SELECTOR);tV.textContent=m&&m.css?Wx(m.css):"",document.head.appendChild(tV),VL(tV,"override");const oH=an(fb.STYLESHEET_VARIABLES_SELECTOR),Mp=(0,Md.getSelectionColor)(oI),{darkSchemeBackgroundColor:dp,darkSchemeTextColor:hy,lightSchemeBackgroundColor:SJ,lightSchemeTextColor:nt,mode:ij}=oI;let kN=0===ij?SJ:dp,eq=0===ij?nt:hy;kN=(0,jp.modifyBackgroundColor)((0,uK.parseColorWithCache)(kN),oI),eq=(0,jp.modifyForegroundColor)((0,uK.parseColorWithCache)(eq),oI),oH.textContent=[`:root {`,`   --${fb.ROOT_VARS_PREFIX}-neutral-background: ${kN};`,`   --${fb.ROOT_VARS_PREFIX}-neutral-text: ${eq};`,`   --${fb.ROOT_VARS_PREFIX}-selection-background: ${Mp.backgroundColorSelection};`,`   --${fb.ROOT_VARS_PREFIX}-selection-text: ${Mp.foregroundColorSelection};`,`}`].join("\n"),document.head.insertBefore(oH,bC.nextSibling),VL(oH,"variables");const Ds=an(fb.STYLESHEET_ROOT_VARS_SELECTOR);document.head.insertBefore(Ds,oH.nextSibling);const sw=!(m&&m.disableStyleSheetsProxy);Mq(sw),document.dispatchEvent(new CustomEvent(cB.EVENT_ARG,{detail:sw}))}const Xa=new Set;function FH(Xp){const qh=an(fb.STYLESHEET_INLINE_SELECTOR,Xp);qh.textContent=(0,xf.getInlineOverrideStyle)(),Xp.insertBefore(qh,Xp.firstChild);const kX=an(fb.STYLESHEET_OVERRIDE_SELECTOR,Xp);kX.textContent=m&&m.css?Wx(m.css):"",Xp.insertBefore(kX,qh.nextSibling);const aC=an(fb.STYLESHEET_INVERT_SELECTOR,Xp);m&&Array.isArray(m.invert)&&m.invert.length>0?aC.textContent=[`${m.invert.join(", ")} {`,`    filter: ${(0,SH.getCSSFilterValue)(Object.assign(Object.assign({},oI),{contrast:0===oI.mode?oI.contrast:(0,Sm.clamp)(oI.contrast-10,0,100)}))} !important;`,"}"].join("\n"):aC.textContent="",Xp.insertBefore(aC,kX.nextSibling),Xa.add(Xp)}function Wx(Xp){return Xp.replace(/\${(.+?)}/g,((Xp,qh)=>{const kX=(0,uK.parseColorWithCache)(qh);return kX?(0,jp.modifyColor)(kX,oI):((0,dp.logWarn)("Couldn't parse CSSTemplate's color."),qh)}))}function OF(){const Xp=document.querySelector(fb.STYLESHEET_FALLBACK_SELECTOR);Xp&&(Xp.textContent="")}function tZ(){na();const Xp=undefined,qh=(0,bC.getManageableStyles)(document).filter((Xp=>!XX.has(Xp))).map((Xp=>Ne(Xp)));qh.map((Xp=>Xp.details({secondRound:!1}))).filter((Xp=>Xp&&Xp.rules.length>0)).forEach((Xp=>{eq.variablesStore.addRulesForMatching(Xp.rules)})),eq.variablesStore.matchVariablesAndDependants(),eq.variablesStore.setOnRootVariableChange((()=>{const Xp=an(fb.STYLESHEET_ROOT_VARS_SELECTOR);eq.variablesStore.putRootVars(Xp,oI)}));const kX=an(fb.STYLESHEET_ROOT_VARS_SELECTOR);eq.variablesStore.putRootVars(kX,oI),XX.forEach((Xp=>Xp.render(oI,Ef))),0===YU.size&&OF(),qh.forEach((Xp=>Xp.watch()));const aC=(0,oH.toArray)(document.querySelectorAll(xf.INLINE_STYLE_SELECTOR));(0,Mp.iterateShadowHosts)(document.documentElement,(Xp=>{FH(Xp.shadowRoot);const qh=Xp.shadowRoot.querySelectorAll(xf.INLINE_STYLE_SELECTOR);qh.length>0&&(0,oH.push)(aC,qh)})),aC.forEach((Xp=>(0,xf.overrideInlineStyle)(Xp,oI,uJ,Ef))),gu(document)}let tl=0;const YU=new Set;function Ne(Xp){const qh=++tl;function kX(){if(!(0,Mp.isDOMReady)()||!(0,Ds.documentIsVisible)()){YU.add(qh),(0,dp.logInfo)(`Current amount of styles loading: ${YU.size}`);const Xp=document.querySelector(fb.STYLESHEET_FALLBACK_SELECTOR);Xp.textContent||(Xp.textContent=(0,Md.getModifiedFallbackStyle)(oI,{strict:!1}))}}function xf(){YU.delete(qh),(0,dp.logInfo)(`Removed loadingStyle ${qh}, now awaiting: ${YU.size}`),(0,dp.logInfo)(`To-do to be loaded`,YU),0===YU.size&&(0,Mp.isDOMReady)()&&OF()}function aC(){const Xp=tV.details({secondRound:!0});Xp&&(eq.variablesStore.addRulesForMatching(Xp.rules),eq.variablesStore.matchVariablesAndDependants(),tV.render(oI,Ef))}(0,dp.logInfo)(`New manager for element, with loadingStyleID ${qh}`,Xp);const tV=(0,bC.manageStyle)(Xp,{update:aC,loadingStart:kX,loadingEnd:xf});return XX.set(Xp,tV),tV}function oV(Xp){const qh=XX.get(Xp);qh&&(qh.destroy(),XX.delete(Xp))}const th=(0,hy.throttle)((Xp=>{XX.forEach((Xp=>Xp.render(oI,Ef))),uu.forEach((Xp=>Xp.render(oI,Ef))),Xp&&Xp()})),na=function(){th.cancel()};function fS(){0!==YU.size?(0,dp.logWarn)(`DOM is ready, but still have styles being loaded.`,YU):OF()}function py(){tZ(),aH()}function Bu(){no(),(0,Ds.documentIsVisible)()||oI.immediateModify?py():(0,Ds.setDocumentVisibilityListener)(py),(0,aC.changeMetaThemeColorWhenAvailable)(oI)}function gu(Xp){try{if(Array.isArray(Xp.adoptedStyleSheets)&&Xp.adoptedStyleSheets.length>0){const qh=(0,nt.createAdoptedStyleSheetOverride)(Xp);uu.push(qh),qh.render(oI,Ef)}}catch(Xp){(0,dp.logWarn)("Error occurred in handleAdoptedStyleSheets: ",Xp)}}function aH(){const Xp=Array.from(XX.keys());(0,tV.watchForStyleChanges)(Xp,(({created:Xp,updated:qh,removed:kX,moved:xf})=>{const aC=kX,Md=Xp.concat(qh).concat(xf).filter((Xp=>!XX.has(Xp))),bC=xf.filter((Xp=>XX.has(Xp)));(0,dp.logInfo)(`Styles to be removed:`,aC),aC.forEach((Xp=>oV(Xp)));const tV=Md.map((Xp=>Ne(Xp)));tV.map((Xp=>Xp.details({secondRound:!1}))).filter((Xp=>Xp&&Xp.rules.length>0)).forEach((Xp=>{eq.variablesStore.addRulesForMatching(Xp.rules)})),eq.variablesStore.matchVariablesAndDependants(),tV.forEach((Xp=>Xp.render(oI,Ef))),tV.forEach((Xp=>Xp.watch())),bC.forEach((Xp=>XX.get(Xp).restore()))}),(Xp=>{FH(Xp),gu(Xp)})),(0,xf.watchForInlineStyles)((Xp=>{if((0,xf.overrideInlineStyle)(Xp,oI,uJ,Ef),Xp===document.documentElement){const qh=undefined;if((Xp.getAttribute("style")||"").includes("--")){eq.variablesStore.matchVariablesAndDependants();const Xp=an(fb.STYLESHEET_ROOT_VARS_SELECTOR.substring(1));eq.variablesStore.putRootVars(Xp,oI)}}}),(Xp=>{FH(Xp);const qh=Xp.querySelectorAll(xf.INLINE_STYLE_SELECTOR);qh.length>0&&(0,oH.forEach)(qh,(Xp=>(0,xf.overrideInlineStyle)(Xp,oI,uJ,Ef)))})),(0,Mp.addDOMReadyListener)(fS)}function qg(){XX.forEach((Xp=>Xp.pause())),It(),(0,tV.stopWatchingForStyleChanges)(),(0,xf.stopWatchingForInlineStyles)(),(0,Mp.removeDOMReadyListener)(fS),(0,Mp.cleanReadyStateCompleteListeners)()}let cE;function nq(){const Xp=document.createElement("meta");Xp.name=fb.META_PROPERTY,Xp.content=uE,document.head.appendChild(Xp)}function du(){const Xp=document.querySelector(`meta[name="${fb.META_PROPERTY}"]`);return Xp?Xp.content!==uE:(nq(),!1)}function Eh(Xp,qh){if(!qh)return null;if(0===qh.length||"*"!==qh[0].url[0])return(0,dp.logWarn)("selectRelevantFix() failed to construct a single fix",Xp,qh),null;const kX=(0,sw.findRelevantFix)(Xp,qh);return kX?(0,sw.combineFixes)([qh[0],qh[kX]]):qh[0]}function lJ(Xp,qh,kX){const xf=undefined;LW(Xp,Eh(document.location.href,qh),kX)}function LW(Xp,qh,kX){if(oI=Xp,m=qh,m?(Ef=Array.isArray(m.ignoreImageAnalysis)?m.ignoreImageAnalysis:[],uJ=Array.isArray(m.ignoreInlineStyle)?m.ignoreInlineStyle:[]):(Ef=[],uJ=[]),oI.immediateModify&&(0,Mp.setIsDOMReady)((()=>!0)),Vo=kX,document.head){if(du())return void wj();Bu()}else{if(!ij.isFirefox){const Xp=an(fb.STYLESHEET_FALLBACK_SELECTOR);document.documentElement.appendChild(Xp),Xp.textContent=(0,Md.getModifiedFallbackStyle)(oI,{strict:!0})}const Xp=new MutationObserver((()=>{if(document.head){if(Xp.disconnect(),du())return void wj();Bu()}}));Xp.observe(document,{childList:!0,subtree:!0})}}function We(){document.dispatchEvent(new CustomEvent(fb.MSG_CLEANUP)),(0,Mp.removeNode)(document.head.querySelector(fb.PROXY_SELECTOR))}function wj(){OL(),(0,Mp.removeNode)(document.querySelector(fb.STYLESHEET_FALLBACK_SELECTOR)),document.head&&((0,aC.restoreMetaThemeColor)(),(0,Mp.removeNode)(document.head.querySelector(fb.STYLESHEET_USER_AGENT_SELECTOR)),(0,Mp.removeNode)(document.head.querySelector(fb.STYLESHEET_TEXT_SELECTOR)),(0,Mp.removeNode)(document.head.querySelector(fb.STYLESHEET_INVERT_SELECTOR)),(0,Mp.removeNode)(document.head.querySelector(fb.STYLESHEET_INLINE_SELECTOR)),(0,Mp.removeNode)(document.head.querySelector(fb.STYLESHEET_OVERRIDE_SELECTOR)),(0,Mp.removeNode)(document.head.querySelector(fb.STYLESHEET_VARIABLES_SELECTOR)),(0,Mp.removeNode)(document.head.querySelector(fb.STYLESHEET_ROOT_VARS_SELECTOR)),(0,Mp.removeNode)(document.head.querySelector(`meta[name="${fb.META_PROPERTY}"]`)),We()),Xa.forEach((Xp=>{(0,Mp.removeNode)(Xp.querySelector(fb.STYLESHEET_INLINE_SELECTOR)),(0,Mp.removeNode)(Xp.querySelector(fb.STYLESHEET_OVERRIDE_SELECTOR))})),Xa.clear(),(0,oH.forEach)(XX.keys(),(Xp=>oV(Xp))),YU.clear(),(0,bC.cleanLoadingLinks)(),(0,oH.forEach)(document.querySelectorAll("."+fb.STYLESHEET_COMMON_CLASSNAME),Mp.removeNode),uu.forEach((Xp=>{Xp.destroy()})),uu.splice(0),cE&&cE.disconnect()}function OL(){eq.variablesStore.clear(),kN.parsedURLCache.clear(),(0,Ds.removeDocumentVisibilityListener)(),na(),qg(),(0,Md.cleanModificationCache)(),(0,uK.clearColorCache)()}kX.createOrUpdateDynamicTheme=lJ,kX.createOrUpdateDynamicThemeInternal=LW,kX.removeDynamicTheme=wj,kX.cleanDynamicThemeCache=OL},{"../../const":1,"../../generators/css-filter":21,"../../generators/modify-colors":22,"../../generators/text-style":24,"../../utils/array":30,"../../utils/color":33,"../../utils/math":36,"../../utils/platform":40,"../../utils/throttle":42,"../../utils/uid":44,"../../utils/url":45,"../../utils/visibility":46,"../utils/dom":18,"../utils/log":19,"./adopted-style-manger":3,"./fixes":5,"./inline-style":8,"./meta-theme-color":9,"./modify-css":10,"./mv3-proxy":11,"./style-manager":13,"./variables":16,"./watch":17}],8:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.overrideInlineStyle=kX.stopWatchingForInlineStyles=kX.watchForInlineStyles=kX.getInlineOverrideStyle=kX.INLINE_STYLE_SELECTOR=void 0;const xf=Xp("../../utils/array"),aC=Xp("../utils/dom"),Md=Xp("./css-rules"),bC=Xp("./modify-css"),tV=Xp("./variables"),oH=Xp("../../utils/platform"),Mp=Xp("../../utils/time"),dp=Xp("../../utils/throttle"),hy=Xp("../../const"),Sm={"background-color":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-bgcolor`,cssProp:"background-color",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-bgcolor`},"background-image":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-bgimage`,cssProp:"background-image",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-bgimage`},"border-color":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-border`,cssProp:"border-color",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-border`},"border-bottom-color":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-border-bottom`,cssProp:"border-bottom-color",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-border-bottom`},"border-left-color":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-border-left`,cssProp:"border-left-color",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-border-left`},"border-right-color":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-border-right`,cssProp:"border-right-color",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-border-right`},"border-top-color":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-border-top`,cssProp:"border-top-color",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-border-top`},"box-shadow":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-boxshadow`,cssProp:"box-shadow",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-boxshadow`},color:{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-color`,cssProp:"color",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-color`},fill:{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-fill`,cssProp:"fill",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-fill`},stroke:{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-stroke`,cssProp:"stroke",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-stroke`},"outline-color":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-outline`,cssProp:"outline-color",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-outline`},"stop-color":{customProp:`--${hy.ROOT_VARS_PREFIX}-inline-stopcolor`,cssProp:"stop-color",dataAttr:`data-${hy.ROOT_VARS_PREFIX}-inline-stopcolor`}},SH=Object.values(Sm),jp={};SH.forEach((({cssProp:Xp,customProp:qh})=>jp[qh]=Xp));const AB=["style","fill","stop-color","stroke","bgcolor","color"];function SJ(){return SH.map((({dataAttr:Xp,customProp:qh,cssProp:kX})=>[`[${Xp}] {`,`  ${kX}: var(${qh}) !important;`,"}"].join("\n"))).join("\n")}function nt(Xp){const qh=[];return Xp instanceof Element&&Xp.matches(kX.INLINE_STYLE_SELECTOR)&&qh.push(Xp),(Xp instanceof Element||oH.isShadowDomSupported&&Xp instanceof ShadowRoot||Xp instanceof Document)&&(0,xf.push)(qh,Xp.querySelectorAll(kX.INLINE_STYLE_SELECTOR)),qh}kX.INLINE_STYLE_SELECTOR=AB.map((Xp=>`[${Xp}]`)).join(", "),kX.getInlineOverrideStyle=SJ;const ij=new Map,uK=new Map;function kN(Xp,qh){eq(document,Xp,qh),(0,aC.iterateShadowHosts)(document.documentElement,(kX=>{eq(kX.shadowRoot,Xp,qh)}))}function eq(Xp,qh,kX){ij.has(Xp)&&(ij.get(Xp).disconnect(),uK.get(Xp).disconnect());const xf=new WeakSet;function Md(Xp){nt(Xp).forEach((Xp=>{xf.has(Xp)||(xf.add(Xp),qh(Xp))})),(0,aC.iterateShadowHosts)(Xp,(aC=>{xf.has(Xp)||(xf.add(Xp),kX(aC.shadowRoot),eq(aC.shadowRoot,qh,kX))}))}const bC=(0,aC.createOptimizedTreeObserver)(Xp,{onMinorMutations:({additions:Xp})=>{Xp.forEach((Xp=>Md(Xp)))},onHugeMutations:()=>{Md(Xp)}});ij.set(Xp,bC);let tV=0,oH=null;const hy=(0,Mp.getDuration)({seconds:10}),Sm=(0,Mp.getDuration)({seconds:2}),jp=50;let SJ=[],kN=null;const Ds=(0,dp.throttle)((Xp=>{Xp.forEach((Xp=>{AB.includes(Xp.attributeName)&&qh(Xp.target)}))})),sw=new MutationObserver((Xp=>{if(kN)return void SJ.push(...Xp);tV++;const qh=Date.now();if(null==oH)oH=qh;else if(tV>=jp){if(qh-oH<hy)return kN=setTimeout((()=>{oH=null,tV=0,kN=null;const Xp=SJ;SJ=[],Ds(Xp)}),Sm),void SJ.push(...Xp);oH=qh,tV=1}Ds(Xp)}));sw.observe(Xp,{attributes:!0,attributeFilter:AB.concat(SH.map((({dataAttr:Xp})=>Xp))),subtree:!0}),uK.set(Xp,sw)}function Ds(){ij.forEach((Xp=>Xp.disconnect())),uK.forEach((Xp=>Xp.disconnect())),ij.clear(),uK.clear()}kX.watchForInlineStyles=kN,kX.stopWatchingForInlineStyles=Ds;const sw=new WeakMap,fb=["brightness","contrast","grayscale","sepia","mode"];function cB(Xp,qh){return AB.map((qh=>`${qh}="${Xp.getAttribute(qh)}"`)).concat(fb.map((Xp=>`${Xp}="${qh[Xp]}"`))).join(" ")}function WE(Xp,qh){for(let kX=0,xf=qh.length;kX<xf;kX++){const xf=qh[kX];if(Xp.matches(xf))return!0}return!1}function uE(Xp,qh,kX,oH){const Mp=undefined;if(cB(Xp,qh)===sw.get(Xp))return;const dp=new Set(Object.keys(Sm));function hy(kX,xf,aC){const Md=kX.startsWith("--"),{customProp:Mp,dataAttr:hy}=Md?{}:Sm[kX],SH=(0,bC.getModifiableCSSDeclaration)(xf,aC,{style:Xp.style},tV.variablesStore,oH,null);if(!SH)return;let jp=SH.value;if("function"==typeof jp&&(jp=jp(qh)),Md&&"object"==typeof jp){const qh=undefined;jp.declarations.forEach((({property:qh,value:kX})=>{!(kX instanceof Promise)&&Xp.style.setProperty(qh,kX)}))}else Xp.style.setProperty(Mp,jp),Xp.hasAttribute(hy)||Xp.setAttribute(hy,""),dp.delete(kX)}if(kX.length>0&&WE(Xp,kX))dp.forEach((qh=>{Xp.removeAttribute(Sm[qh].dataAttr)}));else{if(Xp.hasAttribute("bgcolor")){let qh=Xp.getAttribute("bgcolor");(qh.match(/^[0-9a-f]{3}$/i)||qh.match(/^[0-9a-f]{6}$/i))&&(qh=`#${qh}`),hy("background-color","background-color",qh)}if(Xp.hasAttribute("color")&&"mask-icon"!==Xp.rel){let qh=Xp.getAttribute("color");(qh.match(/^[0-9a-f]{3}$/i)||qh.match(/^[0-9a-f]{6}$/i))&&(qh=`#${qh}`),hy("color","color",qh)}if(Xp instanceof SVGElement){if(Xp.hasAttribute("fill")){const qh=32,kX=Xp.getAttribute("fill");if("none"!==kX)if(Xp instanceof SVGTextElement)hy("fill","color",kX);else{const xf=()=>{const{width:xf,height:aC}=Xp.getBoundingClientRect(),Md=undefined;hy("fill",xf>qh||aC>qh?"background-color":"color",kX)};(0,aC.isReadyStateComplete)()?xf():(0,aC.addReadyStateCompleteListener)(xf)}}Xp.hasAttribute("stop-color")&&hy("stop-color","background-color",Xp.getAttribute("stop-color"))}if(Xp.hasAttribute("stroke")){const qh=Xp.getAttribute("stroke");hy("stroke",Xp instanceof SVGLineElement||Xp instanceof SVGTextElement?"border-color":"color",qh)}Xp.style&&(0,Md.iterateCSSDeclarations)(Xp.style,((qh,kX)=>{if("background-image"!==qh||!kX.includes("url"))if(Sm.hasOwnProperty(qh)||qh.startsWith("--")&&!jp[qh])hy(qh,qh,kX);else{const kX=jp[qh];if(kX&&!Xp.style.getPropertyValue(kX)&&!Xp.hasAttribute(kX)){if("background-color"===kX&&Xp.hasAttribute("bgcolor"))return;Xp.style.setProperty(qh,"")}}})),Xp.style&&Xp instanceof SVGTextElement&&Xp.style.fill&&hy("fill","color",Xp.style.getPropertyValue("fill")),(0,xf.forEach)(dp,(qh=>{Xp.removeAttribute(Sm[qh].dataAttr)})),sw.set(Xp,cB(Xp,qh))}}kX.overrideInlineStyle=uE},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../../utils/throttle":42,"../../utils/time":43,"../utils/dom":18,"./css-rules":4,"./modify-css":10,"./variables":16}],9:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.restoreMetaThemeColor=kX.changeMetaThemeColorWhenAvailable=void 0;const xf=Xp("../../utils/color"),aC=Xp("../../generators/modify-colors"),Md=Xp("../utils/log"),bC="theme-color",tV=`meta[name="${bC}"]`;let oH=null,Mp=null;function dp(Xp,qh){oH=oH||Xp.content;const kX=(0,xf.parseColorWithCache)(oH);kX?Xp.content=(0,aC.modifyBackgroundColor)(kX,qh):(0,Md.logWarn)("Invalid meta color",kX)}function hy(Xp){const qh=document.querySelector(tV);qh?dp(qh,Xp):(Mp&&Mp.disconnect(),Mp=new MutationObserver((qh=>{Xp:for(let kX=0;kX<qh.length;kX++){const{addedNodes:xf}=qh[kX];for(let qh=0;qh<xf.length;qh++){const kX=xf[qh];if(kX instanceof HTMLMetaElement&&kX.name===bC){Mp.disconnect(),Mp=null,dp(kX,Xp);break Xp}}}})),Mp.observe(document.head,{childList:!0}))}function Sm(){Mp&&(Mp.disconnect(),Mp=null);const Xp=document.querySelector(tV);Xp&&oH&&(Xp.content=oH)}kX.changeMetaThemeColorWhenAvailable=hy,kX.restoreMetaThemeColor=Sm},{"../../generators/modify-colors":22,"../../utils/color":33,"../utils/log":19}],10:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.cleanModificationCache=kX.getShadowModifier=kX.getShadowModifierWithInfo=kX.getBgImageModifier=kX.getModifiedFallbackStyle=kX.getSelectionColor=kX.getModifiedUserAgentStyle=kX.getModifiableCSSDeclaration=void 0;const xf=Xp("../../utils/color"),aC=Xp("../../utils/math"),Md=Xp("../../utils/text"),bC=Xp("../../utils/url"),tV=Xp("../../generators/modify-colors"),oH=Xp("./css-rules"),Mp=Xp("./image"),dp=Xp("../utils/log"),hy=Xp("../../utils/platform"),Sm=Xp("../../utils/parsing");function SH(Xp,qh){return Boolean(Xp&&Xp.getPropertyPriority(qh))}function jp(Xp,qh,kX,xf,aC,Md){if(Xp.startsWith("--")){const bC=uu(xf,Xp,qh,kX,aC,Md);if(bC)return{property:Xp,value:bC,important:SH(kX.style,Xp),sourceValue:qh}}else if(qh.includes("var(")){const aC=oI(xf,Xp,qh);if(aC)return{property:Xp,value:aC,important:SH(kX.style,Xp),sourceValue:qh}}else{if("color-scheme"===Xp)return(0,dp.logWarn)("CSS property color-scheme is not supported"),null;if(Xp.includes("color")&&"-webkit-print-color-adjust"!==Xp||"fill"===Xp||"stroke"===Xp||"stop-color"===Xp){const xf=Ds(Xp,qh,kX);if(xf)return{property:Xp,value:xf,important:SH(kX.style,Xp),sourceValue:qh}}else if("background-image"===Xp||"list-style-image"===Xp){const xf=WE(qh,kX,aC,Md);if(xf)return{property:Xp,value:xf,important:SH(kX.style,Xp),sourceValue:qh}}else if(Xp.includes("shadow")){const xf=XX(qh);if(xf)return{property:Xp,value:xf,important:SH(kX.style,Xp),sourceValue:qh}}}return null}function AB(...Xp){return Xp.filter(Boolean).join(", ")}function SJ(Xp,qh,kX){const xf=[];qh||(xf.push("html {"),xf.push(`    background-color: ${(0,tV.modifyBackgroundColor)({r:255,g:255,b:255},Xp)} !important;`),xf.push("}")),xf.push("html {"),xf.push(`    color-scheme: ${1===Xp.mode?"dark":"dark light"} !important;`),xf.push("}");const aC=AB(qh?"":"html, body",kX?"input, textarea, select, button, dialog":"");return aC&&(xf.push(`${aC} {`),xf.push(`    background-color: ${(0,tV.modifyBackgroundColor)({r:255,g:255,b:255},Xp)};`),xf.push("}")),xf.push(`${AB("html, body",kX?"input, textarea, select, button":"")} {`),xf.push(`    border-color: ${(0,tV.modifyBorderColor)({r:76,g:76,b:76},Xp)};`),xf.push(`    color: ${(0,tV.modifyForegroundColor)({r:0,g:0,b:0},Xp)};`),xf.push("}"),xf.push("a {"),xf.push(`    color: ${(0,tV.modifyForegroundColor)({r:0,g:64,b:255},Xp)};`),xf.push("}"),xf.push("table {"),xf.push(`    border-color: ${(0,tV.modifyBorderColor)({r:128,g:128,b:128},Xp)};`),xf.push("}"),xf.push("::placeholder {"),xf.push(`    color: ${(0,tV.modifyForegroundColor)({r:169,g:169,b:169},Xp)};`),xf.push("}"),xf.push("input:-webkit-autofill,"),xf.push("textarea:-webkit-autofill,"),xf.push("select:-webkit-autofill {"),xf.push(`    background-color: ${(0,tV.modifyBackgroundColor)({r:250,g:255,b:189},Xp)} !important;`),xf.push(`    color: ${(0,tV.modifyForegroundColor)({r:0,g:0,b:0},Xp)} !important;`),xf.push("}"),Xp.scrollbarColor&&xf.push(uK(Xp)),Xp.selectionColor&&xf.push(ij(Xp)),xf.join("\n")}function nt(Xp){let qh,kX;if("auto"===Xp.selectionColor)qh=(0,tV.modifyBackgroundColor)({r:0,g:96,b:212},Object.assign(Object.assign({},Xp),{grayscale:0})),kX=(0,tV.modifyForegroundColor)({r:255,g:255,b:255},Object.assign(Object.assign({},Xp),{grayscale:0}));else{const aC=(0,xf.parseColorWithCache)(Xp.selectionColor),Md=(0,xf.rgbToHSL)(aC);qh=Xp.selectionColor,kX=Md.l<.5?"#FFF":"#000"}return{backgroundColorSelection:qh,foregroundColorSelection:kX}}function ij(Xp){const qh=[],kX=nt(Xp),xf=kX.backgroundColorSelection,aC=kX.foregroundColorSelection;return["::selection","::-moz-selection"].forEach((Xp=>{qh.push(`${Xp} {`),qh.push(`    background-color: ${xf} !important;`),qh.push(`    color: ${aC} !important;`),qh.push("}")})),qh.join("\n")}function uK(Xp){const qh=[];let kX,Md,bC,oH,Mp,dp;if("auto"===Xp.scrollbarColor)kX=(0,tV.modifyBackgroundColor)({r:241,g:241,b:241},Xp),Md=(0,tV.modifyForegroundColor)({r:96,g:96,b:96},Xp),bC=(0,tV.modifyBackgroundColor)({r:176,g:176,b:176},Xp),oH=(0,tV.modifyBackgroundColor)({r:144,g:144,b:144},Xp),Mp=(0,tV.modifyBackgroundColor)({r:96,g:96,b:96},Xp),dp=(0,tV.modifyBackgroundColor)({r:255,g:255,b:255},Xp);else{const qh=(0,xf.parseColorWithCache)(Xp.scrollbarColor),tV=(0,xf.rgbToHSL)(qh),dp=tV.l>.5,hy=Xp=>Object.assign(Object.assign({},tV),{l:(0,aC.clamp)(tV.l+Xp,0,1)}),Sm=Xp=>Object.assign(Object.assign({},tV),{l:(0,aC.clamp)(tV.l-Xp,0,1)});kX=(0,xf.hslToString)(Sm(.4)),Md=(0,xf.hslToString)(dp?Sm(.4):hy(.4)),bC=(0,xf.hslToString)(tV),oH=(0,xf.hslToString)(hy(.1)),Mp=(0,xf.hslToString)(hy(.2))}return qh.push("::-webkit-scrollbar {"),qh.push(`    background-color: ${kX};`),qh.push(`    color: ${Md};`),qh.push("}"),qh.push("::-webkit-scrollbar-thumb {"),qh.push(`    background-color: ${bC};`),qh.push("}"),qh.push("::-webkit-scrollbar-thumb:hover {"),qh.push(`    background-color: ${oH};`),qh.push("}"),qh.push("::-webkit-scrollbar-thumb:active {"),qh.push(`    background-color: ${Mp};`),qh.push("}"),qh.push("::-webkit-scrollbar-corner {"),qh.push(`    background-color: ${dp};`),qh.push("}"),hy.isFirefox&&(qh.push("* {"),qh.push(`    scrollbar-color: ${bC} ${kX};`),qh.push("}")),qh.join("\n")}function kN(Xp,{strict:qh}){const kX=[],xf=["microsoft.com","docs.microsoft.com"].includes(location.hostname);return kX.push(`html, body, ${qh?`body :not(iframe)${xf?':not(div[style^="position:absolute;top:0;left:-"]':""}`:"body > :not(iframe)"} {`),kX.push(`    background-color: ${(0,tV.modifyBackgroundColor)({r:255,g:255,b:255},Xp)} !important;`),kX.push(`    border-color: ${(0,tV.modifyBorderColor)({r:64,g:64,b:64},Xp)} !important;`),kX.push(`    color: ${(0,tV.modifyForegroundColor)({r:0,g:0,b:0},Xp)} !important;`),kX.push("}"),kX.join("\n")}kX.getModifiableCSSDeclaration=jp,kX.getModifiedUserAgentStyle=SJ,kX.getSelectionColor=nt,kX.getModifiedFallbackStyle=kN;const eq=new Set(["inherit","transparent","initial","currentcolor","none","unset"]);function Ds(Xp,qh,kX){if(eq.has(qh.toLowerCase()))return qh;const aC=(0,xf.parseColorWithCache)(qh);return aC?Xp.includes("background")?kX.style.webkitMaskImage&&"none"!==kX.style.webkitMaskImage||kX.style.webkitMask&&!kX.style.webkitMask.startsWith("none")||kX.style.mask&&"none"!==kX.style.mask||kX.style.getPropertyValue("mask-image")&&"none"!==kX.style.getPropertyValue("mask-image")?Xp=>(0,tV.modifyForegroundColor)(aC,Xp):Xp=>(0,tV.modifyBackgroundColor)(aC,Xp):Xp.includes("border")||Xp.includes("outline")?Xp=>(0,tV.modifyBorderColor)(aC,Xp):Xp=>(0,tV.modifyForegroundColor)(aC,Xp):((0,dp.logWarn)("Couldn't parse color",qh),null)}const sw=new Map,fb=new Map;function cB(Xp,qh){if(!Xp||0===qh.length)return!1;if(qh.some((Xp=>"*"===Xp)))return!0;const kX=Xp.split(/,\s*/g);for(let Xp=0;Xp<qh.length;Xp++){const xf=qh[Xp];if(kX.some((Xp=>Xp===xf)))return!0}return!1}function WE(Xp,qh,kX,hy){try{const SH=(0,Sm.parseGradient)(Xp),jp=(0,Md.getMatches)(oH.cssURLRegex,Xp);if(0===jp.length&&0===SH.length)return Xp;const AB=qh=>{let kX=0;return qh.map((qh=>{const xf=Xp.indexOf(qh,kX);return kX=xf+qh.length,{match:qh,index:xf}}))},SJ=SH.map((Xp=>Object.assign({type:"gradient"},Xp))).concat(AB(jp).map((Xp=>Object.assign({type:"url",offset:0},Xp)))).sort(((Xp,qh)=>Xp.index>qh.index?1:-1)),nt=Xp=>{const{typeGradient:qh,match:kX,hasComma:aC}=Xp,bC=/([^\(\),]+(\([^\(\)]*(\([^\(\)]*\)*[^\(\)]*)?\))?([^\(\), ]|( (?!calc)))*),?/g,oH=/^(from|color-stop|to)\(([^\(\)]*?,\s*)?(.*?)\)$/,Mp=(0,Md.getMatches)(bC,kX,1).map((Xp=>{Xp=Xp.trim();let qh=(0,xf.parseColorWithCache)(Xp);if(qh)return Xp=>(0,tV.modifyGradientColor)(qh,Xp);const kX=Xp.lastIndexOf(" ");if(qh=(0,xf.parseColorWithCache)(Xp.substring(0,kX)),qh)return xf=>`${(0,tV.modifyGradientColor)(qh,xf)} ${Xp.substring(kX+1)}`;const aC=Xp.match(oH);return aC&&(qh=(0,xf.parseColorWithCache)(aC[3]),qh)?Xp=>`${aC[1]}(${aC[2]?`${aC[2]}, `:""}${(0,tV.modifyGradientColor)(qh,Xp)})`:()=>Xp}));return Xp=>`${qh}(${Mp.map((qh=>qh(Xp))).join(", ")})${aC?", ":""}`},ij=Xp=>{var xf;if(cB(qh.selectorText,kX))return null;let aC=(0,oH.getCSSURLValue)(Xp);const Md=0===aC.length,{parentStyleSheet:tV}=qh,Sm=tV&&tV.href?(0,oH.getCSSBaseBath)(tV.href):(null===(xf=tV.ownerNode)||void 0===xf?void 0:xf.baseURI)||location.origin;aC=(0,bC.getAbsoluteURL)(Sm,aC);const SH=`url("${aC}")`;return async Xp=>{if(Md)return"url('')";let qh;if(sw.has(aC))qh=sw.get(aC);else try{if(fb.has(aC)){const Xp=fb.get(aC);if(qh=await new Promise((qh=>Xp.push(qh))),!qh)return null}else fb.set(aC,[]),qh=await(0,Mp.getImageDetails)(aC),sw.set(aC,qh),fb.get(aC).forEach((Xp=>Xp(qh))),fb.delete(aC);if(hy())return null}catch(Xp){return(0,dp.logWarn)(Xp),fb.has(aC)&&(fb.get(aC).forEach((Xp=>Xp(null))),fb.delete(aC)),SH}const kX=undefined;return uK(qh,Xp)||SH}},uK=(Xp,qh)=>{const{isDark:kX,isLight:xf,isTransparent:Md,isLarge:bC,isTooLarge:tV,width:oH}=Xp;let hy;if(tV)(0,dp.logInfo)(`Not modifying too large image ${Xp.src}`),hy=`url("${Xp.src}")`;else if(kX&&Md&&1===qh.mode&&!bC&&oH>2){(0,dp.logInfo)(`Inverting dark image ${Xp.src}`);const kX=undefined;hy=`url("${(0,Mp.getFilteredImageDataURL)(Xp,Object.assign(Object.assign({},qh),{sepia:(0,aC.clamp)(qh.sepia+10,0,100)}))}")`}else if(xf&&!Md&&1===qh.mode)if(bC)(0,dp.logInfo)(`Not modifying light non-transparent large image ${Xp.src}`),hy="none";else{(0,dp.logInfo)(`Dimming light image ${Xp.src}`);const kX=undefined;hy=`url("${(0,Mp.getFilteredImageDataURL)(Xp,qh)}")`}else if(0===qh.mode&&xf&&!bC){(0,dp.logInfo)(`Applying filter to image ${Xp.src}`);const kX=undefined;hy=`url("${(0,Mp.getFilteredImageDataURL)(Xp,Object.assign(Object.assign({},qh),{brightness:(0,aC.clamp)(qh.brightness-10,5,200),sepia:(0,aC.clamp)(qh.sepia+10,0,100)}))}")`}else(0,dp.logInfo)(`Not modifying too large image ${Xp.src}`),hy=null;return hy},kN=[];let eq=0,Ds=!1;return SJ.forEach((({type:qh,match:kX,index:xf,typeGradient:aC,hasComma:Md,offset:bC},tV)=>{const oH=xf,Mp=eq,dp=oH+kX.length+bC;eq=dp,Mp!==oH&&(Ds?kN.push((()=>{let qh=Xp.substring(Mp,oH);return","===qh[0]&&(qh=qh.substring(1)),qh})):kN.push((()=>Xp.substring(Mp,oH)))),Ds=Md||!1,"url"===qh?kN.push(ij(kX)):"gradient"===qh&&kN.push(nt({match:kX,index:xf,typeGradient:aC,hasComma:Md||!1,offset:bC})),tV===SJ.length-1&&kN.push((()=>Xp.substring(dp)))})),Xp=>{const qh=kN.filter(Boolean).map((qh=>qh(Xp)));if(qh.some((Xp=>Xp instanceof Promise)))return Promise.all(qh).then((Xp=>Xp.filter(Boolean).join("")));const kX=qh.join("");return kX.endsWith(", initial")?kX.slice(0,-9):kX}}catch(qh){return(0,dp.logWarn)(`Unable to parse gradient ${Xp}`,qh),null}}function uE(Xp){try{let qh=0;const kX=(0,Md.getMatches)(/(^|\s)(?!calc)([a-z]+\(.+?\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,Xp,2);let aC=0;const bC=kX.map(((Md,bC)=>{const oH=qh,Mp=Xp.indexOf(Md,qh),dp=Mp+Md.length;qh=dp;const hy=(0,xf.parseColorWithCache)(Md);return hy?qh=>`${Xp.substring(oH,Mp)}${(0,tV.modifyShadowColor)(hy,qh)}${bC===kX.length-1?Xp.substring(dp):""}`:(aC++,()=>Xp.substring(oH,dp))}));return Xp=>{const qh=bC.map((qh=>qh(Xp))).join("");return{matchesLength:kX.length,unparseableMatchesLength:aC,result:qh}}}catch(qh){return(0,dp.logWarn)(`Unable to parse shadow ${Xp}`,qh),null}}function XX(Xp){const qh=uE(Xp);return qh?Xp=>qh(Xp).result:null}function uu(Xp,qh,kX,xf,aC,Md){return Xp.getModifierForVariable({varName:qh,sourceValue:kX,rule:xf,ignoredImgSelectors:aC,isCancelled:Md})}function oI(Xp,qh,kX){return Xp.getModifierForVarDependant(qh,kX)}function m(){(0,tV.clearColorModificationCache)(),sw.clear(),(0,Mp.cleanImageProcessingCache)(),fb.clear()}kX.getBgImageModifier=WE,kX.getShadowModifierWithInfo=uE,kX.getShadowModifier=XX,kX.cleanModificationCache=m},{"../../generators/modify-colors":22,"../../utils/color":33,"../../utils/math":36,"../../utils/parsing":39,"../../utils/platform":40,"../../utils/text":41,"../../utils/url":45,"../utils/log":19,"./css-rules":4,"./image":6}],11:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.EVENT_ARG=void 0;const xf=Xp("./stylesheet-proxy"),aC=Xp("../utils/log"),Md=Xp("../../const");document.currentScript&&document.currentScript.remove();const bC=`${Md.MISC_PREFIX}ProxyInjected`,tV=`${Md.EVENT_PREFIX}stylesheetProxy__done`;kX.EVENT_ARG=`${Md.EVENT_PREFIX}stylesheetProxy__arg`;const oH=!document.currentScript;function Mp(Xp){(0,xf.injectProxy)(Xp),Sm(),document.dispatchEvent(new CustomEvent(tV))}function dp(){const Xp=document.currentScript.dataset.arg;if(void 0!==Xp){document.documentElement.dataset[bC]="true";const qh=JSON.parse(Xp);(0,aC.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${qh}).`),Mp(qh)}}function hy(Xp){document.removeEventListener(kX.EVENT_ARG,hy),void 0===document.documentElement.dataset[bC]?(document.documentElement.dataset[bC]="true",(0,aC.logInfo)(`MV3 proxy injector: ${oH?"registerd":"dedicated"} path runs injectProxy(${Xp.detail}).`),Mp(Xp.detail)):(0,aC.logInfo)(`MV3 proxy injector: ${oH?"registerd":"dedicated"} path exits because everything is done.`)}function Sm(){document.removeEventListener(kX.EVENT_ARG,hy),document.removeEventListener(tV,Sm)}function SH(){(0,aC.logInfo)(`MV3 proxy injector: ${oH?"registerd":"dedicated"} path setup...`),document.addEventListener(kX.EVENT_ARG,hy),document.addEventListener(tV,Sm)}function jp(){void 0===document.documentElement.dataset[bC]?((0,aC.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&dp(),SH()):(0,aC.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}jp()},{"../../const":1,"../utils/log":19,"./stylesheet-proxy":15}],12:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.bgFetch=void 0;const xf=Xp("../../utils/message");let aC=0;const Md=new Map,bC=new Map;async function tV(Xp){return new Promise(((qh,kX)=>{const tV=++aC;Md.set(tV,qh),bC.set(tV,kX),chrome.runtime.sendMessage({type:xf.MessageType.CS_FETCH,data:Xp,id:tV})}))}kX.bgFetch=tV,chrome.runtime.onMessage.addListener((({type:Xp,data:qh,error:kX,id:aC})=>{if(Xp===xf.MessageType.BG_FETCH_RESPONSE){const Xp=Md.get(aC),xf=bC.get(aC);Md.delete(aC),bC.delete(aC),kX?xf&&xf(kX):Xp&&Xp(qh)}}))},{"../../utils/message":37}],13:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.manageStyle=kX.cleanLoadingLinks=kX.getManageableStyles=kX.shouldManageStyle=kX.STYLE_SELECTOR=void 0;const xf=Xp("../../utils/array"),aC=Xp("../../utils/text"),Md=Xp("../../utils/url"),bC=Xp("../utils/dom"),tV=Xp("../utils/log"),oH=Xp("./css-rules"),Mp=Xp("./network"),dp=Xp("./stylesheet-modifier"),hy=Xp("../../utils/platform"),Sm=Xp("../../const"),SH=!1;function jp(Xp){if(!Xp.href)return!1;try{const qh=undefined;return"fonts.googleapis.com"===new URL(Xp.href).hostname}catch(qh){return(0,tV.logInfo)(`Couldn't construct ${Xp.href} as URL`),!1}}function AB(Xp){return(Xp instanceof HTMLStyleElement||Xp instanceof SVGStyleElement||Xp instanceof HTMLLinkElement&&Boolean(Xp.rel)&&Xp.rel.toLowerCase().includes("stylesheet")&&Boolean(Xp.href)&&!Xp.disabled&&(!hy.isFirefox||!Xp.href.startsWith("moz-extension://"))&&!jp(Xp))&&!Xp.classList.contains(Sm.STYLESHEET_COMMON_CLASSNAME)&&"print"!==Xp.media.toLowerCase()&&!Xp.classList.contains("stylus")}function SJ(Xp,qh=[],aC=!0){return AB(Xp)?qh.push(Xp):(Xp instanceof Element||hy.isShadowDomSupported&&Xp instanceof ShadowRoot||Xp===document)&&((0,xf.forEach)(Xp.querySelectorAll(kX.STYLE_SELECTOR),(Xp=>SJ(Xp,qh,!1))),aC&&(0,bC.iterateShadowHosts)(Xp,(Xp=>SJ(Xp.shadowRoot,qh,!1)))),qh}kX.STYLE_SELECTOR='style, link[rel*="stylesheet" i]:not([disabled])',kX.shouldManageStyle=AB,kX.getManageableStyles=SJ;const nt=new WeakSet,ij=new WeakSet;let uK=!1;document.addEventListener(`${Sm.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{uK=!0}));let kN=0;const eq=new Map;function Ds(){eq.clear()}function sw(Xp,{update:qh,loadingStart:kX,loadingEnd:xf}){const aC=[];let Mp=Xp;for(;(Mp=Mp.nextElementSibling)&&Mp.matches(`.${Sm.STYLESHEET_COMMON_CLASSNAME}`);)aC.push(Mp);let jp=aC.find((Xp=>Xp.matches(Sm.STYLESHEET_CORS_SELECTOR)&&!ij.has(Xp)))||null,AB=aC.find((Xp=>Xp.matches(Sm.STYLESHEET_SYNC_SELECTOR)&&!nt.has(Xp)))||null,SJ=null,Ds=null,sw=!1,cB=!0;const uu=(0,dp.createStyleSheetModifier)(),oI=new MutationObserver((()=>{qh()})),m={attributes:!0,childList:!0,subtree:!0,characterData:!0};function Vo(){return Xp instanceof HTMLStyleElement&&Xp.textContent.trim().match(oH.cssImportRegex)}function Ef(Xp,qh){let kX=!1;if(Xp){let xf;Xp:for(let aC=0,Md=Xp.length;aC<Md;aC++)if(xf=Xp[aC],xf.href){if(!qh){kX=!0;break Xp}if(!xf.href.startsWith("https://fonts.googleapis.com/")&&xf.href.startsWith("http")&&!xf.href.startsWith(location.origin)){kX=!0;break Xp}}}return kX}function uJ(){if(jp)return(0,tV.logInfo)("[getRulesSync] Using cors-copy."),jp.sheet.cssRules;if(Vo())return(0,tV.logInfo)("[getRulesSync] CSSImport detected."),null;const qh=tl();return Xp instanceof HTMLLinkElement&&!(0,Md.isRelativeHrefOnAbsolutePath)(Xp.href)&&Ef(qh,!1)?((0,tV.logInfo)("[getRulesSync] CSSImportRule detected on non-local href."),null):Ef(qh,!0)?((0,tV.logInfo)("[getRulesSync] Cross-Origin CSSImportRule detected."),null):((0,tV.logInfo)("[getRulesSync] Using cssRules."),!qh&&(0,tV.logWarn)("[getRulesSync] cssRules is null, trying again."),qh)}function an(){jp?(Xp.nextSibling!==jp&&Xp.parentNode.insertBefore(jp,Xp.nextSibling),jp.nextSibling!==AB&&Xp.parentNode.insertBefore(AB,jp.nextSibling)):Xp.nextSibling!==AB&&Xp.parentNode.insertBefore(AB,Xp.nextSibling)}function Mq(){AB=Xp instanceof SVGStyleElement?document.createElementNS("http://www.w3.org/2000/svg","style"):document.createElement("style"),AB.classList.add(Sm.STYLESHEET_COMMON_CLASSNAME),AB.classList.add(Sm.STYLESHEET_SYNC_SELECTOR.substring(1)),AB.media="screen",Xp.title&&(AB.title=Xp.title),nt.add(AB)}let CV=!1,VL=!1;const It=++kN;async function no(){let qh,kX;if(Xp instanceof HTMLLinkElement){let[xf,aC]=OF();if(aC&&(0,tV.logWarn)(aC),!xf&&!aC&&!hy.isSafari||hy.isSafari&&!Xp.sheet||tZ(aC)){try{(0,tV.logInfo)(`Linkelement ${It} is not loaded yet and thus will be await for`,Xp),await fb(Xp,It)}catch(Xp){(0,tV.logWarn)(Xp),VL=!0}if(sw)return null;[xf,aC]=OF(),aC&&(0,tV.logWarn)(aC)}if(xf&&!Ef(xf,!1))return xf;if(qh=await WE(Xp.href),kX=(0,oH.getCSSBaseBath)(Xp.href),sw)return null}else{if(!Vo())return null;qh=Xp.textContent.trim(),kX=(0,oH.getCSSBaseBath)(location.href)}if(qh){try{const xf=await uE(qh,kX);jp=XX(Xp,xf)}catch(Xp){(0,tV.logWarn)(Xp)}if(jp)return SJ=(0,bC.watchForNodePosition)(jp,"prev-sibling"),jp.sheet.cssRules}return null}function Xa(Xp){const aC=uJ();return aC?{rules:aC}:Xp.secondRound?((0,tV.logWarn)("Detected dead-lock at details(), returning early to prevent it."),null):(CV||VL||(CV=!0,kX(),no().then((Xp=>{CV=!1,xf(),Xp&&qh()})).catch((Xp=>{(0,tV.logWarn)(Xp),CV=!1,xf()}))),null)}let FH=!1;function Wx(Xp,kX){const xf=uJ();function aC(Xp){if(Xp)for(let qh=Xp.cssRules.length-1;qh>=0;qh--)Xp.deleteRule(qh)}function Md(){AB||Mq(),Ds&&Ds.stop(),an(),null==AB.sheet&&(AB.textContent="");const Xp=undefined;return aC(AB.sheet),Ds?Ds.run():Ds=(0,bC.watchForNodePosition)(AB,"prev-sibling",(()=>{FH=!0,tV()})),AB.sheet}function tV(){const aC=FH;FH=!1,uu.modifySheet({prepareSheet:Md,sourceCSSRules:xf,theme:Xp,ignoreImageAnalysis:kX,force:aC,isAsyncCancelled:()=>sw}),cB=0===AB.sheet.cssRules.length,uu.shouldRebuildStyle()&&(0,bC.addReadyStateCompleteListener)((()=>qh()))}xf&&(sw=!1,tV())}function OF(){try{return null==Xp.sheet?[null,null]:[Xp.sheet.cssRules,null]}catch(Xp){return[null,Xp]}}function tZ(Xp){return Xp&&Xp.message&&Xp.message.includes("loading")}function tl(){const[Xp,qh]=OF();return qh?((0,tV.logWarn)(qh),null):Xp}function YU(){aH(),SH||uK&&Xp.sheet||fS()}let Ne=null,oV=null;function th(){const Xp=tl();return Xp?Xp.length:null}function na(){return th()!==Ne}function fS(){Ne=th(),py();const kX=()=>{na()&&(Ne=th(),qh()),uK&&Xp.sheet?py():oV=requestAnimationFrame(kX)};kX()}function py(){cancelAnimationFrame(oV)}let Bu=!1;function gu(){function Xp(){Bu=!1,sw||qh()}uK=!0,py(),Bu||(Bu=!0,"function"==typeof queueMicrotask?queueMicrotask(Xp):requestAnimationFrame(Xp))}function aH(){Xp.addEventListener(`${Sm.EVENT_PREFIX}updateSheet`,gu)}function qg(){Xp.removeEventListener(`${Sm.EVENT_PREFIX}updateSheet`,gu)}function cE(){qg(),py()}function nq(){oI.disconnect(),sw=!0,SJ&&SJ.stop(),Ds&&Ds.stop(),cE()}function du(){if(nq(),(0,bC.removeNode)(jp),(0,bC.removeNode)(AB),xf(),eq.has(It)){const Xp=eq.get(It);eq.delete(It),Xp&&Xp()}}function Eh(){oI.observe(Xp,m),Xp instanceof HTMLStyleElement&&YU()}const lJ=10;let LW=0;function We(){AB&&(LW++,LW>lJ?(0,tV.logWarn)("Style sheet was moved multiple times",Xp):((0,tV.logWarn)("Restore style",AB,Xp),an(),SJ&&SJ.skip(),Ds&&Ds.skip(),cB||(FH=!0,qh())))}return{details:Xa,render:Wx,pause:nq,destroy:du,watch:Eh,restore:We}}async function fb(Xp,qh){return new Promise(((kX,xf)=>{const aC=()=>{Xp.removeEventListener("load",Md),Xp.removeEventListener("error",bC),eq.delete(qh)},Md=()=>{aC(),(0,tV.logInfo)(`Linkelement ${qh} has been loaded`),kX()},bC=()=>{aC(),xf(`Linkelement ${qh} couldn't be loaded. ${Xp.href}`)};eq.set(qh,(()=>{aC(),xf()})),Xp.addEventListener("load",Md),Xp.addEventListener("error",bC),Xp.href||bC()}))}function cB(Xp){return(0,oH.getCSSURLValue)(Xp.substring(7).trim().replace(/;$/,"").replace(/screen$/,""))}async function WE(Xp){return Xp.startsWith("data:")?await(await fetch(Xp)).text():await(0,Mp.bgFetch)({url:Xp,responseType:"text",mimeType:"text/css",origin:window.location.origin})}async function uE(Xp,qh,kX=new Map){Xp=(0,oH.removeCSSComments)(Xp),Xp=(0,oH.replaceCSSFontFace)(Xp),Xp=(0,oH.replaceCSSRelativeURLsWithAbsolute)(Xp,qh);const xf=(0,aC.getMatches)(oH.cssImportRegex,Xp);for(const aC of xf){const xf=cB(aC),bC=(0,Md.getAbsoluteURL)(qh,xf);let Mp;if(kX.has(bC))Mp=kX.get(bC);else try{Mp=await WE(bC),kX.set(bC,Mp),Mp=await uE(Mp,(0,oH.getCSSBaseBath)(bC),kX)}catch(Xp){(0,tV.logWarn)(Xp),Mp=""}Xp=Xp.split(aC).join(Mp)}return Xp=Xp.trim()}function XX(Xp,qh){if(!qh)return null;const kX=document.createElement("style");return kX.classList.add(Sm.STYLESHEET_COMMON_CLASSNAME),kX.classList.add(Sm.STYLESHEET_CORS_SELECTOR.substring(1)),kX.media="screen",kX.textContent=qh,Xp.parentNode.insertBefore(kX,Xp.nextSibling),kX.sheet.disabled=!0,ij.add(kX),kX}kX.cleanLoadingLinks=Ds,kX.manageStyle=sw},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../../utils/text":41,"../../utils/url":45,"../utils/dom":18,"../utils/log":19,"./css-rules":4,"./network":12,"./stylesheet-modifier":14}],14:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.createStyleSheetModifier=void 0;const xf=Xp("../../utils/throttle"),aC=Xp("./css-rules"),Md=Xp("./modify-css"),bC=Xp("./variables"),tV=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function oH(Xp){let qh="";return tV.forEach((kX=>{qh+=`${kX}:${Xp[kX]};`})),qh}const Mp=(0,xf.createAsyncTasksQueue)();function dp(){let Xp=0;const qh=new Set,kX=new Map,xf=new Set;let tV=null,dp=!1,hy=!1;function Sm(){return dp&&!hy}function SH(Sm){const SH=Sm.sourceCSSRules,{theme:jp,ignoreImageAnalysis:AB,force:SJ,prepareSheet:nt,isAsyncCancelled:ij}=Sm;let uK=0===kX.size;const kN=new Set(kX.keys()),eq=oH(jp),Ds=eq!==tV;dp&&(hy=!0);const sw=[];if((0,aC.iterateCSSRules)(SH,(Xp=>{let xf=Xp.cssText,tV=!1;if(kN.delete(xf),Xp.parentRule instanceof CSSMediaRule&&(xf+=`;${Xp.parentRule.media.mediaText}`),qh.has(xf)||(qh.add(xf),tV=!0),!tV)return void sw.push(kX.get(xf));if(uK=!0,"revert"===Xp.style.all)return;const oH=[];Xp.style&&(0,aC.iterateCSSDeclarations)(Xp.style,((qh,kX)=>{const xf=(0,Md.getModifiableCSSDeclaration)(qh,kX,Xp,bC.variablesStore,AB,ij);xf&&oH.push(xf)}));let Mp=null;if(oH.length>0){const qh=Xp.parentRule;Mp={selector:Xp.selectorText,declarations:oH,parentRule:qh},sw.push(Mp)}kX.set(xf,Mp)}),(()=>{dp=!0})),kN.forEach((Xp=>{qh.delete(Xp),kX.delete(Xp)})),tV=eq,!SJ&&!uK&&!Ds)return;function fb(Xp,qh,kX){const{selector:xf,declarations:aC}=kX,Md=Xp=>{const{property:qh,value:kX,important:xf,sourceValue:aC}=Xp;return`${qh}: ${null==kX?aC:kX}${xf?" !important":""};`};let bC="";aC.forEach((Xp=>{bC+=`${Md(Xp)} `}));const tV=`${xf} { ${bC} }`;Xp.insertRule(tV,qh)}Xp++;const cB=new Map,WE=new Map;let uE=0,XX=0;const uu={rule:null,rules:[],isGroup:!0},oI=new WeakMap;function m(Xp){if(null==Xp)return uu;if(oI.has(Xp))return oI.get(Xp);const qh={rule:Xp,rules:[],isGroup:!0};oI.set(Xp,qh);const kX=undefined;return m(Xp.parentRule).rules.push(qh),qh}xf.forEach((Xp=>Xp())),xf.clear(),sw.filter((Xp=>Xp)).forEach((({selector:qh,declarations:kX,parentRule:aC})=>{const Md=m(aC),bC={selector:qh,declarations:[],isGroup:!1},tV=bC.declarations;function oH(qh,kX,xf,aC){const Md=++uE,bC={property:qh,value:null,important:xf,asyncKey:Md,sourceValue:aC};tV.push(bC);const oH=Xp;kX.then((qh=>{qh&&!ij()&&oH===Xp&&(bC.value=qh,Mp.add((()=>{ij()||oH!==Xp||uJ(Md)})))}))}function dp(qh,kX,aC,Md){const{declarations:bC,onTypeChange:Mp}=kX,dp=++XX,hy=Xp,Sm=tV.length;let SH=[];if(0===bC.length){const Xp={property:qh,value:Md,important:aC,sourceValue:Md,varKey:dp};tV.push(Xp),SH=[Xp]}bC.forEach((Xp=>{if(Xp.value instanceof Promise)oH(Xp.property,Xp.value,aC,Md);else{const qh={property:Xp.property,value:Xp.value,important:aC,sourceValue:Md,varKey:dp};tV.push(qh),SH.push(qh)}})),Mp.addListener((qh=>{if(ij()||hy!==Xp)return;const kX=qh.map((Xp=>({property:Xp.property,value:Xp.value,important:aC,sourceValue:Md,varKey:dp}))),xf=tV.indexOf(SH[0],Sm);tV.splice(xf,SH.length,...kX),SH=kX,an(dp)})),xf.add((()=>Mp.removeListeners()))}Md.rules.push(bC),kX.forEach((({property:Xp,value:qh,important:kX,sourceValue:xf})=>{if("function"==typeof qh){const aC=qh(jp);aC instanceof Promise?oH(Xp,aC,kX,xf):Xp.startsWith("--")?dp(Xp,aC,kX,xf):tV.push({property:Xp,value:aC,important:kX,sourceValue:xf})}else tV.push({property:Xp,value:qh,important:kX,sourceValue:xf})}))}));const Vo=nt();function Ef(){function Xp(Xp,qh){const{rule:kX}=Xp;if(kX instanceof CSSMediaRule){const{media:Xp}=kX,xf=qh.cssRules.length;return qh.insertRule(`@media ${Xp.mediaText} {}`,xf),qh.cssRules[xf]}return qh}function qh(kX,xf,aC){kX.rules.forEach((kX=>{if(kX.isGroup){const Md=undefined;qh(kX,Xp(kX,xf),aC)}else aC(kX,xf)}))}qh(uu,Vo,((Xp,qh)=>{const kX=qh.cssRules.length;Xp.declarations.forEach((({asyncKey:xf,varKey:aC})=>{null!=xf&&cB.set(xf,{rule:Xp,target:qh,index:kX}),null!=aC&&WE.set(aC,{rule:Xp,target:qh,index:kX})})),fb(qh,kX,Xp)}))}function uJ(Xp){const{rule:qh,target:kX,index:xf}=cB.get(Xp);kX.deleteRule(xf),fb(kX,xf,qh),cB.delete(Xp)}function an(Xp){const{rule:qh,target:kX,index:xf}=WE.get(Xp);kX.deleteRule(xf),fb(kX,xf,qh)}Ef()}return{modifySheet:SH,shouldRebuildStyle:Sm}}kX.createStyleSheetModifier=dp},{"../../utils/throttle":42,"./css-rules":4,"./modify-css":10,"./variables":16}],15:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.injectProxy=void 0;const xf=Xp("../../const");function aC(Xp){document.dispatchEvent(new CustomEvent(`${xf.EVENT_PREFIX}inlineScriptsAllowed`));const qh=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),kX=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),aC=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),Md=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),bC=Xp?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,tV=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),oH=tV?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,Mp="www.vy.no"===location.hostname,dp=Mp?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,hy=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",qh),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",kX),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",aC),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Md),document.removeEventListener(`${xf.EVENT_PREFIX}cleanUp`,hy),document.removeEventListener(`${xf.EVENT_PREFIX}addUndefinedResolver`,Sm),Xp&&Object.defineProperty(Document.prototype,"styleSheets",bC),tV&&Object.defineProperty(Element.prototype,"getElementsByTagName",oH),Mp&&Object.defineProperty(Node.prototype,"childNodes",dp)},Sm=Xp=>{customElements.whenDefined(Xp.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${xf.EVENT_PREFIX}isDefined`,{detail:{tag:Xp.detail.tag}}))}))};document.addEventListener(xf.MSG_CLEANUP,hy),document.addEventListener(`${xf.EVENT_PREFIX}addUndefinedResolver`,Sm);const SH=new Event(`${xf.EVENT_PREFIX}updateSheet`);function jp(Xp,kX,aC){return qh.value.call(this,Xp,kX,aC),this.ownerNode&&!this.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(SH),-1}function AB(Xp,qh){const aC=kX.value.call(this,Xp,qh);return this.ownerNode&&!this.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(SH),aC}function SJ(Xp){aC.value.call(this,Xp),this.ownerNode&&!this.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(SH)}function nt(Xp){Md.value.call(this,Xp),this.ownerNode&&!this.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(SH)}function ij(){const Xp=()=>{const Xp=undefined,qh=[...bC.get.call(this)].filter((Xp=>Xp.ownerNode&&!Xp.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)));return qh.item=Xp=>qh[Xp],Object.setPrototypeOf(qh,StyleSheetList.prototype)};let qh=Xp();const kX=undefined;return qh=new Proxy(qh,{get:function(qh,kX){return Xp()[kX]}}),qh}function uK(Xp){if("style"!==Xp)return oH.value.call(this,Xp);const qh=()=>{const qh=oH.value.call(this,Xp);return Object.setPrototypeOf([...qh].filter((Xp=>!Xp.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let kX=qh();const aC=undefined;return kX=new Proxy(kX,{get:function(Xp,kX){return qh()[Number(kX)||kX]}}),kX}function kN(){const Xp=dp.get.call(this);return Object.setPrototypeOf([...Xp].filter((Xp=>!Xp.classList||!Xp.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},qh,{value:jp})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},kX,{value:AB})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},aC,{value:SJ})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},Md,{value:nt})),Xp&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},bC,{get:ij})),tV&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},oH,{value:uK})),Mp&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},dp,{get:kN}))}kX.injectProxy=aC},{"../../const":1}],16:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.replaceCSSVariablesNames=kX.variablesStore=kX.VariablesStore=void 0;const xf=Xp("../../generators/modify-colors"),aC=Xp("../../utils/text"),Md=Xp("./css-rules"),bC=Xp("./modify-css"),tV=Xp("../../utils/color"),oH=Xp("../../const"),Mp=1<<0,dp=1<<1,hy=1<<2,Sm=1<<3;class SH{constructor(){this.varTypes=new Map,this.rulesQueue=[],this.definedVars=new Set,this.varRefs=new Map,this.unknownColorVars=new Set,this.unknownBgVars=new Set,this.undefinedVars=new Set,this.initialVarTypes=new Map,this.changedTypeVars=new Set,this.typeChangeSubscriptions=new Map,this.unstableVarValues=new Map}clear(){this.varTypes.clear(),this.rulesQueue.splice(0),this.definedVars.clear(),this.varRefs.clear(),this.unknownColorVars.clear(),this.unknownBgVars.clear(),this.undefinedVars.clear(),this.initialVarTypes.clear(),this.changedTypeVars.clear(),this.typeChangeSubscriptions.clear(),this.unstableVarValues.clear()}isVarType(Xp,qh){return this.varTypes.has(Xp)&&(this.varTypes.get(Xp)&qh)>0}addRulesForMatching(Xp){this.rulesQueue.push(Xp)}matchVariablesAndDependants(){this.changedTypeVars.clear(),this.initialVarTypes=new Map(this.varTypes),this.collectRootVariables(),this.collectVariablesAndVarDep(this.rulesQueue),this.rulesQueue.splice(0),this.collectRootVarDependants(),this.varRefs.forEach(((Xp,qh)=>{Xp.forEach((Xp=>{this.varTypes.has(qh)&&this.resolveVariableType(Xp,this.varTypes.get(qh))}))})),this.unknownColorVars.forEach((Xp=>{this.unknownBgVars.has(Xp)?(this.unknownColorVars.delete(Xp),this.unknownBgVars.delete(Xp),this.resolveVariableType(Xp,Mp)):this.isVarType(Xp,Mp|dp|hy)?this.unknownColorVars.delete(Xp):this.undefinedVars.add(Xp)})),this.unknownBgVars.forEach((Xp=>{const qh=undefined;null!=this.findVarRef(Xp,(Xp=>this.unknownColorVars.has(Xp)||this.isVarType(Xp,dp|hy)))?this.itarateVarRefs(Xp,(Xp=>{this.resolveVariableType(Xp,Mp)})):this.isVarType(Xp,Mp|Sm)?this.unknownBgVars.delete(Xp):this.undefinedVars.add(Xp)})),this.changedTypeVars.forEach((Xp=>{this.typeChangeSubscriptions.has(Xp)&&this.typeChangeSubscriptions.get(Xp).forEach((Xp=>{Xp()}))})),this.changedTypeVars.clear()}getModifierForVariable(Xp){return qh=>{const{varName:kX,sourceValue:xf,rule:aC,ignoredImgSelectors:Md,isCancelled:tV}=Xp,oH=()=>{const Xp=[],oH=(aC,Md,bC)=>{if(!this.isVarType(kX,aC))return;const tV=Md(kX);let oH;if(cB(xf))if(WE(xf)){let Xp=uJ(xf,this.unstableVarValues);Xp||(Xp=aC===Mp?"#ffffff":"#000000"),oH=bC(Xp,qh)}else oH=ij(xf,(Xp=>Md(Xp)),(Xp=>bC(Xp,qh)));else oH=bC(xf,qh);Xp.push({property:tV,value:oH})};if(oH(Mp,kN,m),oH(dp,eq,Vo),oH(hy,Ds,Ef),this.isVarType(kX,Sm)){const oH=sw(kX);let Mp=xf;cB(xf)&&(Mp=ij(xf,(Xp=>kN(Xp)),(Xp=>m(Xp,qh))));const dp=(0,bC.getBgImageModifier)(Mp,aC,Md,tV);Mp="function"==typeof dp?dp(qh):dp,Xp.push({property:oH,value:Mp})}return Xp},SH=new Set,jp=Xp=>{const qh=()=>{const qh=oH();Xp(qh)};SH.add(qh),this.subscribeForVarTypeChange(kX,qh)},AB=()=>{SH.forEach((Xp=>{this.unsubscribeFromVariableTypeChanges(kX,Xp)}))};return{declarations:oH(),onTypeChange:{addListener:jp,removeListeners:AB}}}}getModifierForVarDependant(Xp,qh){if(qh.match(/^\s*(rgb|hsl)a?\(/)){const kX=Xp.startsWith("background"),xf=uE(Xp);return Xp=>{let aC=uJ(qh,this.unstableVarValues);aC||(aC=kX?"#ffffff":"#000000");const Md=undefined;return(kX?m:xf?Vo:Ef)(aC,Xp)}}return"background-color"===Xp?Xp=>ij(qh,(Xp=>kN(Xp)),(qh=>m(qh,Xp))):uE(Xp)?Xp=>ij(qh,(Xp=>eq(Xp)),(qh=>Vo(qh,Xp))):"background"===Xp||"background-image"===Xp||"box-shadow"===Xp?kX=>{const xf=new Set,aC=()=>{const aC=ij(qh,(Xp=>this.isVarType(Xp,Mp)?kN(Xp):this.isVarType(Xp,Sm)?sw(Xp):(xf.add(Xp),Xp)),(Xp=>m(Xp,kX)));if("box-shadow"===Xp){const Xp=undefined,qh=(0,bC.getShadowModifierWithInfo)(aC)(kX);if(qh.unparseableMatchesLength!==qh.matchesLength)return qh.result}return aC},Md=aC();return xf.size>0?new Promise((Xp=>{const qh=xf.values().next().value,kX=()=>{this.unsubscribeFromVariableTypeChanges(qh,kX);const xf=aC();Xp(xf)};this.subscribeForVarTypeChange(qh,kX)})):Md}:Xp.startsWith("border")||Xp.startsWith("outline")?Xp=>ij(qh,(Xp=>Ds(Xp)),(qh=>Ef(qh,Xp))):null}subscribeForVarTypeChange(Xp,qh){this.typeChangeSubscriptions.has(Xp)||this.typeChangeSubscriptions.set(Xp,new Set);const kX=this.typeChangeSubscriptions.get(Xp);kX.has(qh)||kX.add(qh)}unsubscribeFromVariableTypeChanges(Xp,qh){this.typeChangeSubscriptions.has(Xp)&&this.typeChangeSubscriptions.get(Xp).delete(qh)}collectVariablesAndVarDep(Xp){Xp.forEach((Xp=>{(0,Md.iterateCSSRules)(Xp,(Xp=>{Xp.style&&(0,Md.iterateCSSDeclarations)(Xp.style,((Xp,qh)=>{fb(Xp)&&this.inspectVariable(Xp,qh),cB(qh)&&this.inspectVarDependant(Xp,qh)}))}))}))}collectRootVariables(){(0,Md.iterateCSSDeclarations)(document.documentElement.style,((Xp,qh)=>{fb(Xp)&&this.inspectVariable(Xp,qh)}))}inspectVariable(Xp,qh){if(this.unstableVarValues.set(Xp,qh),cB(qh)&&WE(qh)&&(this.unknownColorVars.add(Xp),this.definedVars.add(Xp)),this.definedVars.has(Xp))return;this.definedVars.add(Xp);const kX=undefined;XX.test(qh)||(0,tV.parseColorWithCache)(qh)?this.unknownColorVars.add(Xp):(qh.includes("url(")||qh.includes("linear-gradient(")||qh.includes("radial-gradient("))&&this.resolveVariableType(Xp,Sm)}resolveVariableType(Xp,qh){const kX=this.initialVarTypes.get(Xp)||0,xf=undefined,aC=(this.varTypes.get(Xp)||0)|qh;this.varTypes.set(Xp,aC),(aC!==kX||this.undefinedVars.has(Xp))&&(this.changedTypeVars.add(Xp),this.undefinedVars.delete(Xp)),this.unknownColorVars.delete(Xp),this.unknownBgVars.delete(Xp)}collectRootVarDependants(){(0,Md.iterateCSSDeclarations)(document.documentElement.style,((Xp,qh)=>{cB(qh)&&this.inspectVarDependant(Xp,qh)}))}inspectVarDependant(Xp,qh){fb(Xp)?this.iterateVarDeps(qh,(qh=>{this.varRefs.has(Xp)||this.varRefs.set(Xp,new Set),this.varRefs.get(Xp).add(qh)})):"background-color"===Xp||"box-shadow"===Xp?this.iterateVarDeps(qh,(Xp=>this.resolveVariableType(Xp,Mp))):uE(Xp)?this.iterateVarDeps(qh,(Xp=>this.resolveVariableType(Xp,dp))):Xp.startsWith("border")||Xp.startsWith("outline")?this.iterateVarDeps(qh,(Xp=>this.resolveVariableType(Xp,hy))):"background"!==Xp&&"background-image"!==Xp||this.iterateVarDeps(qh,(Xp=>{if(this.isVarType(Xp,Mp|Sm))return;const qh=null!=this.findVarRef(Xp,(Xp=>this.unknownColorVars.has(Xp)||this.isVarType(Xp,dp|hy)));this.itarateVarRefs(Xp,(Xp=>{qh?this.resolveVariableType(Xp,Mp):this.unknownBgVars.add(Xp)}))}))}iterateVarDeps(Xp,qh){const kX=new Set;uK(Xp,(Xp=>kX.add(Xp))),kX.forEach((Xp=>qh(Xp)))}findVarRef(Xp,qh,kX=new Set){if(kX.has(Xp))return null;kX.add(Xp);const xf=undefined;if(qh(Xp))return Xp;const aC=this.varRefs.get(Xp);if(!aC||0===aC.size)return null;for(const Xp of aC){const xf=this.findVarRef(Xp,qh,kX);if(xf)return xf}return null}itarateVarRefs(Xp,qh){this.findVarRef(Xp,(Xp=>(qh(Xp),!1)))}setOnRootVariableChange(Xp){this.onRootVariableDefined=Xp}putRootVars(Xp,qh){const kX=Xp.sheet;kX.cssRules.length>0&&kX.deleteRule(0);const xf=new Map;(0,Md.iterateCSSDeclarations)(document.documentElement.style,((Xp,kX)=>{fb(Xp)&&(this.isVarType(Xp,Mp)&&xf.set(kN(Xp),m(kX,qh)),this.isVarType(Xp,dp)&&xf.set(eq(Xp),Vo(kX,qh)),this.isVarType(Xp,hy)&&xf.set(Ds(Xp),Ef(kX,qh)),this.subscribeForVarTypeChange(Xp,this.onRootVariableDefined))}));const aC=[];aC.push(":root {");for(const[Xp,qh]of xf)aC.push(`    ${Xp}: ${qh};`);aC.push("}");const bC=aC.join("\n");kX.insertRule(bC)}}function jp(Xp,qh=0){const kX=Xp.indexOf("var(",qh);if(kX>=0){const qh=(0,aC.getParenthesesRange)(Xp,kX+3);if(qh)return{start:kX,end:qh.end}}return null}function AB(Xp){const qh=[];let kX=0,xf;for(;xf=jp(Xp,kX);){const{start:aC,end:Md}=xf;qh.push({start:aC,end:Md,value:Xp.substring(aC,Md)}),kX=xf.end+1}return qh}function SJ(Xp,qh){const kX=AB(Xp),xf=kX.length;if(0===xf)return Xp;const aC=Xp.length,Md=kX.map((Xp=>qh(Xp.value))),bC=[];bC.push(Xp.substring(0,kX[0].start));for(let qh=0;qh<xf;qh++){bC.push(Md[qh]);const tV=kX[qh].end,oH=qh<xf-1?kX[qh+1].start:aC;bC.push(Xp.substring(tV,oH))}return bC.join("")}function nt(Xp){const qh=Xp.indexOf(",");let kX,xf;return qh>=0?(kX=Xp.substring(4,qh).trim(),xf=Xp.substring(qh+1,Xp.length-1).trim()):(kX=Xp.substring(4,Xp.length-1).trim(),xf=""),{name:kX,fallback:xf}}function ij(Xp,qh,kX){const xf=undefined;return SJ(Xp,(Xp=>{const{name:xf,fallback:aC}=nt(Xp),Md=qh(xf);if(!aC)return`var(${Md})`;let bC;return bC=cB(aC)?ij(aC,qh,kX):kX?kX(aC):aC,`var(${Md}, ${bC})`}))}function uK(Xp,qh){ij(Xp,(Xp=>(qh(Xp),Xp)))}function kN(Xp){return`--${oH.ROOT_VARS_PREFIX}-bg${Xp}`}function eq(Xp){return`--${oH.ROOT_VARS_PREFIX}-text${Xp}`}function Ds(Xp){return`--${oH.ROOT_VARS_PREFIX}-border${Xp}`}function sw(Xp){return`--${oH.ROOT_VARS_PREFIX}-bgimg${Xp}`}function fb(Xp){return Xp.startsWith("--")}function cB(Xp){return Xp.includes("var(")}function WE(Xp){return Xp.match(/^\s*(rgb|hsl)a?\(/)}function uE(Xp){return"color"===Xp||"caret-color"===Xp||"-webkit-text-fill-color"===Xp}kX.VariablesStore=SH,kX.variablesStore=new SH,kX.replaceCSSVariablesNames=ij;const XX=/^\d{1,3}, ?\d{1,3}, ?\d{1,3}$/;function uu(Xp){if(XX.test(Xp)){const qh=Xp.split(",");let kX="rgb(";return qh.forEach((Xp=>{kX+=`${Xp.trim()}, `})),kX=kX.substring(0,kX.length-2),kX+=")",{isRaw:!0,color:kX}}return{isRaw:!1,color:Xp}}function oI(Xp,qh,kX){const{isRaw:xf,color:aC}=uu(Xp),Md=(0,tV.parseColorWithCache)(aC);if(Md){const Xp=kX(Md,qh);if(xf){const qh=(0,tV.parseColorWithCache)(Xp);return qh?`${qh.r}, ${qh.g}, ${qh.b}`:Xp}return Xp}return aC}function m(Xp,qh){return oI(Xp,qh,xf.modifyBackgroundColor)}function Vo(Xp,qh){return oI(Xp,qh,xf.modifyForegroundColor)}function Ef(Xp,qh){return oI(Xp,qh,xf.modifyBorderColor)}function uJ(Xp,qh,kX=new Set){let xf=!1;const aC=undefined,Md=SJ(Xp,(Xp=>{const{name:aC,fallback:Md}=nt(Xp);if(kX.has(aC))return xf=!0,null;kX.add(aC);const bC=qh.get(aC)||Md;let tV=null;return bC&&(tV=cB(bC)?uJ(bC,qh,kX):bC),tV||(xf=!0,null)}));return xf?null:Md}},{"../../const":1,"../../generators/modify-colors":22,"../../utils/color":33,"../../utils/text":41,"./css-rules":4,"./modify-css":10}],17:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.stopWatchingForStyleChanges=kX.watchForStyleChanges=void 0;const xf=Xp("../../utils/array"),aC=Xp("../utils/dom"),Md=Xp("./style-manager"),bC=Xp("../../utils/platform"),tV=Xp("../../const"),oH=[];let Mp;const dp=new Map;let hy;function Sm(Xp){bC.isDefinedSelectorSupported&&(0,xf.forEach)(Xp.querySelectorAll(":not(:defined)"),(Xp=>{let qh=Xp.tagName.toLowerCase();if(!qh.includes("-")){const kX=Xp.getAttribute("is");if(!kX)return;qh=kX}dp.has(qh)||(dp.set(qh,new Set),SJ(qh).then((()=>{if(hy){const Xp=dp.get(qh);dp.delete(qh),hy(Array.from(Xp))}}))),dp.get(qh).add(Xp)}))}let SH=!1;document.addEventListener(`${tV.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{SH=!0}));const jp=new Map;function AB(Xp){if(SH=!0,jp.has(Xp.detail.tag)){const qh=undefined;jp.get(Xp.detail.tag)()}}async function SJ(Xp){return new Promise((qh=>{if(window.customElements&&"function"==typeof customElements.whenDefined)customElements.whenDefined(Xp).then((()=>qh()));else{const kX=()=>{const xf=dp.get(Xp);xf&&xf.size>0&&(xf.values().next().value.matches(":defined")?qh():requestAnimationFrame(kX))};requestAnimationFrame(kX)}}))}function nt(Xp){hy=Xp}function ij(){hy=null,dp.clear(),document.removeEventListener(`${tV.EVENT_PREFIX}isDefined`,AB)}function uK(Xp,qh,kX){eq();const bC=new Set(Xp),dp=new WeakMap,hy=new WeakMap;function SH(Xp){dp.set(Xp,Xp.previousElementSibling),hy.set(Xp,Xp.nextElementSibling)}function jp(Xp){dp.delete(Xp),hy.delete(Xp)}function SJ(Xp){return Xp.previousElementSibling!==dp.get(Xp)||Xp.nextElementSibling!==hy.get(Xp)}function ij(Xp){const{createdStyles:kX,removedStyles:xf,movedStyles:aC}=Xp;kX.forEach((Xp=>SH(Xp))),aC.forEach((Xp=>SH(Xp))),xf.forEach((Xp=>jp(Xp))),kX.forEach((Xp=>bC.add(Xp))),xf.forEach((Xp=>bC.delete(Xp))),kX.size+xf.size+aC.size>0&&qh({created:Array.from(kX),removed:Array.from(xf),moved:Array.from(aC),updated:[]})}function uK({additions:Xp,moves:qh,deletions:kX}){const xf=new Set,bC=new Set,tV=new Set;Xp.forEach((Xp=>(0,Md.getManageableStyles)(Xp).forEach((Xp=>xf.add(Xp))))),kX.forEach((Xp=>(0,Md.getManageableStyles)(Xp).forEach((Xp=>bC.add(Xp))))),qh.forEach((Xp=>(0,Md.getManageableStyles)(Xp).forEach((Xp=>tV.add(Xp))))),ij({createdStyles:xf,removedStyles:bC,movedStyles:tV}),Xp.forEach((Xp=>{(0,aC.iterateShadowHosts)(Xp,fb),Sm(Xp)}))}function kN(Xp){const qh=new Set((0,Md.getManageableStyles)(Xp)),kX=new Set,xf=new Set,tV=new Set;qh.forEach((Xp=>{bC.has(Xp)||kX.add(Xp)})),bC.forEach((Xp=>{qh.has(Xp)||xf.add(Xp)})),qh.forEach((Xp=>{kX.has(Xp)||xf.has(Xp)||!SJ(Xp)||tV.add(Xp)})),ij({createdStyles:kX,removedStyles:xf,movedStyles:tV}),(0,aC.iterateShadowHosts)(Xp,fb),Sm(Xp)}function Ds(Xp){const kX=new Set,xf=new Set;Xp.forEach((Xp=>{const{target:qh}=Xp;qh.isConnected&&((0,Md.shouldManageStyle)(qh)?kX.add(qh):qh instanceof HTMLLinkElement&&qh.disabled&&xf.add(qh))})),kX.size+xf.size>0&&qh({updated:Array.from(kX),created:[],removed:Array.from(xf),moved:[]})}function sw(Xp){const qh=(0,aC.createOptimizedTreeObserver)(Xp,{onMinorMutations:uK,onHugeMutations:kN}),kX=new MutationObserver(Ds);kX.observe(Xp,{attributes:!0,attributeFilter:["rel","disabled","media","href"],subtree:!0}),oH.push(qh,kX),Mp.add(Xp)}function fb(Xp){const{shadowRoot:qh}=Xp;null==qh||Mp.has(qh)||(sw(qh),kX(qh))}Xp.forEach(SH),sw(document),(0,aC.iterateShadowHosts)(document.documentElement,fb),nt((Xp=>{const kX=[];Xp.forEach((Xp=>(0,xf.push)(kX,(0,Md.getManageableStyles)(Xp.shadowRoot)))),qh({created:kX,updated:[],removed:[],moved:[]}),Xp.forEach((Xp=>{const{shadowRoot:qh}=Xp;null!=qh&&(fb(Xp),(0,aC.iterateShadowHosts)(qh,fb),Sm(qh))}))})),document.addEventListener(`${tV.EVENT_PREFIX}isDefined`,AB),Sm(document)}function kN(){oH.forEach((Xp=>Xp.disconnect())),oH.splice(0,oH.length),Mp=new WeakSet}function eq(){kN(),ij()}kX.watchForStyleChanges=uK,kX.stopWatchingForStyleChanges=eq},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../utils/dom":18,"./style-manager":13}],18:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.createOptimizedTreeObserver=kX.cleanReadyStateCompleteListeners=kX.addReadyStateCompleteListener=kX.isReadyStateComplete=kX.removeDOMReadyListener=kX.addDOMReadyListener=kX.setIsDOMReady=kX.isDOMReady=kX.iterateShadowHosts=kX.watchForNodePosition=kX.removeNode=kX.createNodeAsap=void 0;const xf=Xp("../utils/log"),aC=Xp("../../utils/throttle"),Md=Xp("../../utils/array"),bC=Xp("../../utils/time");function tV({selectNode:Xp,createNode:qh,updateNode:kX,selectTarget:xf,createTarget:aC,isTargetMutation:Md}){const bC=xf();if(bC){const xf=Xp();xf?kX(xf):qh(bC)}else{const kX=new MutationObserver((kX=>{const aC=undefined;if(kX.find(Md)){tV();const kX=xf();Xp()||qh(kX)}})),bC=()=>{if("complete"!==document.readyState)return;tV();const kX=xf()||aC();Xp()||qh(kX)},tV=()=>{document.removeEventListener("readystatechange",bC),kX.disconnect()};"complete"===document.readyState?bC():(document.addEventListener("readystatechange",bC),kX.observe(document,{childList:!0,subtree:!0}))}}function oH(Xp){Xp&&Xp.parentNode&&Xp.parentNode.removeChild(Xp)}function Mp(Xp,qh,kX=Function.prototype){const Md=10,tV=(0,bC.getDuration)({seconds:2}),oH=(0,bC.getDuration)({seconds:10}),Mp=Xp.previousSibling;let dp=Xp.parentNode;if(!dp)throw new Error("Unable to watch for node position: parent element not found");if("prev-sibling"===qh&&!Mp)throw new Error("Unable to watch for node position: there is no previous sibling");let hy=0,Sm=null,SH=null;const jp=(0,aC.throttle)((()=>{if(SH)return;hy++;const aC=Date.now();if(null==Sm)Sm=aC;else if(hy>=Md){if(aC-Sm<oH)return(0,xf.logWarn)(`Node position watcher paused: retry in ${tV}ms`,Xp,Mp),void(SH=setTimeout((()=>{Sm=null,hy=0,SH=null,jp()}),tV));Sm=aC,hy=1}if("head"===qh&&Mp&&Mp.parentNode!==dp)return(0,xf.logWarn)("Unable to restore node position: sibling parent changed",Xp,Mp,dp),void nt();if("prev-sibling"===qh){if(null==Mp.parentNode)return(0,xf.logWarn)("Unable to restore node position: sibling was removed",Xp,Mp,dp),void nt();Mp.parentNode!==dp&&((0,xf.logWarn)("Style was moved to another parent",Xp,Mp,dp),uK(Mp.parentNode))}"head"!==qh||dp.isConnected||(dp=document.head),(0,xf.logWarn)("Restoring node position",Xp,Mp,dp),dp.insertBefore(Xp,Mp&&Mp.isConnected?Mp.nextSibling:dp.firstChild),AB.takeRecords(),kX&&kX()})),AB=new MutationObserver((()=>{("head"===qh&&(Xp.parentNode!==dp||!Xp.parentNode.isConnected)||"prev-sibling"===qh&&Xp.previousSibling!==Mp)&&jp()})),SJ=()=>{AB.observe(dp,{childList:!0})},nt=()=>{clearTimeout(SH),AB.disconnect(),jp.cancel()},ij=()=>{AB.takeRecords()},uK=Xp=>{dp=Xp,nt(),SJ()};return SJ(),{run:SJ,stop:nt,skip:ij}}function dp(Xp,qh){if(null==Xp)return;const kX=document.createTreeWalker(Xp,NodeFilter.SHOW_ELEMENT,{acceptNode:Xp=>null==Xp.shadowRoot?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT});for(let xf=Xp.shadowRoot?kX.currentNode:kX.nextNode();null!=xf;xf=kX.nextNode())xf.classList.contains("surfingkeys_hints_host")||(qh(xf),dp(xf.shadowRoot,qh))}kX.createNodeAsap=tV,kX.removeNode=oH,kX.watchForNodePosition=Mp,kX.iterateShadowHosts=dp;let hy=()=>"complete"===document.readyState||"interactive"===document.readyState;function Sm(Xp){kX.isDOMReady=Xp}kX.isDOMReady=hy,kX.setIsDOMReady=Sm;const SH=new Set;function jp(Xp){(0,kX.isDOMReady)()?Xp():SH.add(Xp)}function AB(Xp){SH.delete(Xp)}function SJ(){return"complete"===document.readyState}kX.addDOMReadyListener=jp,kX.removeDOMReadyListener=AB,kX.isReadyStateComplete=SJ;const nt=new Set;function ij(Xp){SJ()?Xp():nt.add(Xp)}function uK(){nt.clear()}if(kX.addReadyStateCompleteListener=ij,kX.cleanReadyStateCompleteListeners=uK,!(0,kX.isDOMReady)()){const Xp=()=>{(0,kX.isDOMReady)()&&(SH.forEach((Xp=>Xp())),SH.clear(),SJ()&&(document.removeEventListener("readystatechange",Xp),nt.forEach((Xp=>Xp())),nt.clear()))};document.addEventListener("readystatechange",Xp)}const kN=1e3;function eq(Xp){if(Xp.length>kN)return!0;let qh=0;for(let kX=0;kX<Xp.length;kX++)if(qh+=Xp[kX].addedNodes.length,qh>kN)return!0;return!1}function Ds(Xp){const qh=new Set,kX=new Set,xf=new Set;Xp.forEach((Xp=>{(0,Md.forEach)(Xp.addedNodes,(Xp=>{Xp instanceof Element&&Xp.isConnected&&qh.add(Xp)})),(0,Md.forEach)(Xp.removedNodes,(Xp=>{Xp instanceof Element&&(Xp.isConnected?(xf.add(Xp),qh.delete(Xp)):kX.add(Xp))}))}));const aC=[],bC=[];return qh.forEach((Xp=>{qh.has(Xp.parentElement)&&aC.push(Xp)})),kX.forEach((Xp=>{kX.has(Xp.parentElement)&&bC.push(Xp)})),aC.forEach((Xp=>qh.delete(Xp))),bC.forEach((Xp=>kX.delete(Xp))),{additions:qh,moves:xf,deletions:kX}}const sw=new Map,fb=new WeakMap;function cB(Xp,qh){let xf,aC,Md;if(sw.has(Xp))xf=sw.get(Xp),aC=fb.get(xf);else{let qh=!1,bC=!1;xf=new MutationObserver((xf=>{if(eq(xf))!qh||(0,kX.isDOMReady)()?aC.forEach((({onHugeMutations:qh})=>qh(Xp))):bC||(Md=()=>aC.forEach((({onHugeMutations:qh})=>qh(Xp))),jp(Md),bC=!0),qh=!0;else{const Xp=Ds(xf);aC.forEach((({onMinorMutations:qh})=>qh(Xp)))}})),xf.observe(Xp,{childList:!0,subtree:!0}),sw.set(Xp,xf),aC=new Set,fb.set(xf,aC)}return aC.add(qh),{disconnect(){aC.delete(qh),Md&&AB(Md),0===aC.size&&(xf.disconnect(),fb.delete(xf),sw.delete(Xp))}}}kX.createOptimizedTreeObserver=cB},{"../../utils/array":30,"../../utils/throttle":42,"../../utils/time":43,"../utils/log":19}],19:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.logInfoCollapsed=kX.logWarn=kX.logInfo=void 0;const xf=Xp("../../utils/message"),aC=!0,Md=!1,bC="info";function tV(Xp,...qh){Md&&bC&&("info"===bC||"warn"===Xp)&&chrome.runtime.sendMessage({type:xf.MessageType.CS_LOG,data:{level:Xp,log:qh}})}function oH(...Xp){aC&&tV("info",...Xp)}function Mp(...Xp){aC&&tV("warn",...Xp)}function dp(Xp,...qh){}kX.logInfo=oH,kX.logWarn=Mp,kX.logInfoCollapsed=dp},{"../../utils/message":37}],20:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.DEFAULT_SETTINGS=kX.DEFAULT_COLORSCHEME=kX.DEFAULT_THEME=kX.DEFAULT_COLORS=void 0;const xf=Xp("./generators/theme-engines"),aC=Xp("./utils/platform"),Md=Xp("./utils/automation");kX.DEFAULT_COLORS={darkScheme:{background:"#181a1b",text:"#e8e6e3"},lightScheme:{background:"#181a1b",text:"#e8e6e3"}},kX.DEFAULT_THEME={mode:1,brightness:100,contrast:110,grayscale:0,sepia:0,useFont:!1,fontFamily:aC.isMacOS?"Helvetica Neue":aC.isWindows?"Segoe UI":"Open Sans",textStroke:0,engine:xf.ThemeEngine.dynamicTheme,stylesheet:"",darkSchemeBackgroundColor:kX.DEFAULT_COLORS.darkScheme.background,darkSchemeTextColor:kX.DEFAULT_COLORS.darkScheme.text,lightSchemeBackgroundColor:kX.DEFAULT_COLORS.lightScheme.background,lightSchemeTextColor:kX.DEFAULT_COLORS.lightScheme.text,scrollbarColor:aC.isMacOS?"":"auto",selectionColor:"auto",styleSystemControls:!1,lightColorScheme:"Default",darkColorScheme:"Default",immediateModify:!1},kX.DEFAULT_COLORSCHEME={light:{Default:{backgroundColor:kX.DEFAULT_COLORS.lightScheme.background,textColor:kX.DEFAULT_COLORS.lightScheme.text}},dark:{Default:{backgroundColor:kX.DEFAULT_COLORS.darkScheme.background,textColor:kX.DEFAULT_COLORS.darkScheme.text}}},kX.DEFAULT_SETTINGS={enabled:!0,fetchNews:!0,theme:kX.DEFAULT_THEME,presets:[],customThemes:[],siteList:[],siteListEnabled:[],applyToListedOnly:!1,changeBrowserTheme:!1,syncSettings:!0,syncSitesFixes:!1,automation:{enabled:!1,mode:Md.AutomationMode.NONE,behavior:"OnOff"},time:{activation:"18:00",deactivation:"9:00"},location:{latitude:null,longitude:null},previewNewDesign:!1,enableForPDF:!0,enableForProtectedPages:!1,enableContextMenus:!1,detectDarkTheme:!1}},{"./generators/theme-engines":25,"./utils/automation":32,"./utils/platform":40}],21:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.formatInversionFixes=kX.parseInversionFixes=kX.getInversionFixesFor=kX.getCSSFilterValue=kX.cssFilterStyleSheetTemplate=kX.hasFirefoxNewRootBehavior=kX.hasPatchForChromiumIssue501582=kX.FilterMode=void 0;const xf=Xp("./utils/format"),aC=Xp("./utils/matrix"),Md=Xp("./utils/parse"),bC=Xp("../utils/text"),tV=Xp("../utils/url"),oH=Xp("./text-style"),Mp=Xp("../utils/platform");var dp;function hy(){return!0}function Sm(){return Boolean(Mp.isFirefox&&(0,Mp.compareChromeVersions)(Mp.firefoxVersion,"102.0")>=0)}function SH(Xp,qh,kX,xf,aC){const Md=undefined,bC=undefined;return jp(AB(Xp),"invert(100%) hue-rotate(180deg)",Xp,qh,kX,xf,aC)}function jp(Xp,qh,kX,xf,Md,bC,tV){const Mp=uK(xf,bC,tV),SH=[];if(SH.push("@media screen {"),Xp&&Md&&(SH.push(""),SH.push("/* Leading rule */"),SH.push(SJ(Xp))),kX.mode===dp.dark&&(SH.push(""),SH.push("/* Reverse rule */"),SH.push(ij(qh,Mp))),(kX.useFont||kX.textStroke>0)&&(SH.push(""),SH.push("/* Font */"),SH.push((0,oH.createTextStyle)(kX))),SH.push(""),SH.push("/* Text contrast */"),SH.push("html {"),SH.push("  text-shadow: 0 0 0 !important;"),SH.push("}"),SH.push(""),SH.push("/* Full screen */"),[":-webkit-full-screen",":-moz-full-screen",":fullscreen"].forEach((Xp=>{SH.push(`${Xp}, ${Xp} * {`),SH.push("  -webkit-filter: none !important;"),SH.push("  filter: none !important;"),SH.push("}")})),Md){const Xp=[255,255,255],qh=hy()||Sm()||kX.mode!==dp.dark?Xp:(0,aC.applyColorMatrix)(Xp,(0,aC.createFilterMatrix)(kX)).map(Math.round);SH.push(""),SH.push("/* Page background */"),SH.push("html {"),SH.push(`  background: rgb(${qh.join(",")}) !important;`),SH.push("}")}return Mp.css&&Mp.css.length>0&&kX.mode===dp.dark&&(SH.push(""),SH.push("/* Custom rules */"),SH.push(Mp.css)),SH.push(""),SH.push("}"),SH.join("\n")}function AB(Xp){const qh=[];return Xp.mode===dp.dark&&qh.push("invert(100%) hue-rotate(180deg)"),100!==Xp.brightness&&qh.push(`brightness(${Xp.brightness}%)`),100!==Xp.contrast&&qh.push(`contrast(${Xp.contrast}%)`),0!==Xp.grayscale&&qh.push(`grayscale(${Xp.grayscale}%)`),0!==Xp.sepia&&qh.push(`sepia(${Xp.sepia}%)`),0===qh.length?null:qh.join(" ")}function SJ(Xp){return["html {",`  -webkit-filter: ${Xp} !important;`,`  filter: ${Xp} !important;`,"}"].join("\n")}function nt(Xp){return Xp.map((Xp=>Xp.replace(/\,$/,""))).join(",\n")}function ij(Xp,qh){const kX=[];return qh.invert.length>0&&(kX.push(`${nt(qh.invert)} {`),kX.push(`  -webkit-filter: ${Xp} !important;`),kX.push(`  filter: ${Xp} !important;`),kX.push("}")),qh.noinvert.length>0&&(kX.push(`${nt(qh.noinvert)} {`),kX.push("  -webkit-filter: none !important;"),kX.push("  filter: none !important;"),kX.push("}")),qh.removebg.length>0&&(kX.push(`${nt(qh.removebg)} {`),kX.push("  background: white !important;"),kX.push("}")),kX.join("\n")}function uK(Xp,qh,kX){const xf=(0,Md.getSitesFixesFor)(Xp,qh,kX,{commands:Object.keys(kN),getCommandPropName:Xp=>kN[Xp],parseCommandValue:(Xp,qh)=>"CSS"===Xp?qh.trim():(0,bC.parseArray)(qh)}),aC={url:xf[0].url,invert:xf[0].invert||[],noinvert:xf[0].noinvert||[],removebg:xf[0].removebg||[],css:xf[0].css||""};if(Xp){const qh=xf.slice(1).filter((qh=>(0,tV.isURLInList)(Xp,qh.url))).sort(((Xp,qh)=>qh.url[0].length-Xp.url[0].length));if(qh.length>0){const Xp=qh[0];return{url:Xp.url,invert:aC.invert.concat(Xp.invert||[]),noinvert:aC.noinvert.concat(Xp.noinvert||[]),removebg:aC.removebg.concat(Xp.removebg||[]),css:[aC.css,Xp.css].filter((Xp=>Xp)).join("\n")}}}return aC}!function(Xp){Xp[Xp["light"]=0]="light",Xp[Xp["dark"]=1]="dark"}(dp=kX.FilterMode||(kX.FilterMode={})),kX.hasPatchForChromiumIssue501582=hy,kX.hasFirefoxNewRootBehavior=Sm,kX.default=SH,kX.cssFilterStyleSheetTemplate=jp,kX.getCSSFilterValue=AB,kX.getInversionFixesFor=uK;const kN={INVERT:"invert","NO INVERT":"noinvert","REMOVE BG":"removebg",CSS:"css"};function eq(Xp){return(0,Md.parseSitesFixesConfig)(Xp,{commands:Object.keys(kN),getCommandPropName:Xp=>kN[Xp],parseCommandValue:(Xp,qh)=>"CSS"===Xp?qh.trim():(0,bC.parseArray)(qh)})}function Ds(Xp){const qh=Xp.slice().sort(((Xp,qh)=>(0,tV.compareURLPatterns)(Xp.url[0],qh.url[0])));return(0,xf.formatSitesFixesConfig)(qh,{props:Object.values(kN),getPropCommandName:Xp=>Object.entries(kN).find((([,qh])=>qh===Xp))[0],formatPropValue:(Xp,qh)=>"css"===Xp?qh.trim().replace(/\n+/g,"\n"):(0,bC.formatArray)(qh).trim(),shouldIgnoreProp:(Xp,qh)=>"css"===Xp?!qh:!(Array.isArray(qh)&&qh.length>0)})}kX.parseInversionFixes=eq,kX.formatInversionFixes=Ds},{"../utils/platform":40,"../utils/text":41,"../utils/url":45,"./text-style":24,"./utils/format":26,"./utils/matrix":27,"./utils/parse":28}],22:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.modifyGradientColor=kX.modifyShadowColor=kX.modifyBorderColor=kX.modifyForegroundColor=kX.modifyBackgroundColor=kX.modifyColor=kX.clearColorModificationCache=void 0;const xf=Xp("../utils/color"),aC=Xp("../utils/math"),Md=Xp("./utils/matrix");function bC(Xp){const qh=undefined,kX=undefined;return Xp[1===Xp.mode?"darkSchemeBackgroundColor":"lightSchemeBackgroundColor"]}function tV(Xp){const qh=undefined,kX=undefined;return Xp[1===Xp.mode?"darkSchemeTextColor":"lightSchemeTextColor"]}const oH=new Map;function Mp(){oH.clear()}kX.clearColorModificationCache=Mp;const dp=["r","g","b","a"],hy=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function Sm(Xp,qh){let kX="";return dp.forEach((qh=>{kX+=`${Xp[qh]};`})),hy.forEach((Xp=>{kX+=`${qh[Xp]};`})),kX}function SH(Xp,qh,kX,aC,bC){let tV;oH.has(kX)?tV=oH.get(kX):(tV=new Map,oH.set(kX,tV));const Mp=Sm(Xp,qh);if(tV.has(Mp))return tV.get(Mp);const dp=undefined,hy=undefined,SH=undefined,jp=kX((0,xf.rgbToHSL)(Xp),null==aC?null:(0,xf.parseToHSLWithCache)(aC),null==bC?null:(0,xf.parseToHSLWithCache)(bC)),{r:AB,g:SJ,b:nt,a:ij}=(0,xf.hslToRGB)(jp),uK=(0,Md.createFilterMatrix)(qh),[kN,eq,Ds]=(0,Md.applyColorMatrix)([AB,SJ,nt],uK),sw=1===ij?(0,xf.rgbToHexString)({r:kN,g:eq,b:Ds}):(0,xf.rgbToString)({r:kN,g:eq,b:Ds,a:ij});return tV.set(Mp,sw),sw}function jp(Xp){return Xp}function AB(Xp,qh){return SH(Xp,qh,jp)}function SJ(Xp,qh){const kX=bC(qh),xf=undefined;return SH(Xp,qh,nt,tV(qh),kX)}function nt({h:Xp,s:qh,l:kX,a:xf},Md,bC){const tV=kX<.5;let oH;if(tV)oH=kX<.2||qh<.12;else{const xf=undefined;oH=qh<.24||kX>.8&&(Xp>200&&Xp<280)}let Mp=Xp,dp=kX;oH&&(tV?(Mp=Md.h,dp=Md.s):(Mp=bC.h,dp=bC.s));const hy=undefined;return{h:Mp,s:dp,l:(0,aC.scale)(kX,0,1,Md.l,bC.l),a:xf}}kX.modifyColor=AB;const ij=.4;function uK({h:Xp,s:qh,l:kX,a:xf},Md){const bC=undefined,tV=undefined,oH=qh<.12||kX>.8&&(Xp>200&&Xp<280);if(kX<.5){const bC=(0,aC.scale)(kX,0,.5,0,ij);if(oH){const Xp=undefined,qh=undefined;return{h:Md.h,s:Md.s,l:bC,a:xf}}return{h:Xp,s:qh,l:bC,a:xf}}let Mp=(0,aC.scale)(kX,.5,1,ij,Md.l);if(oH){const Xp=undefined,qh=undefined;return{h:Md.h,s:Md.s,l:Mp,a:xf}}let dp=Xp;const hy=undefined;if(Xp>60&&Xp<180){const qh=undefined;dp=Xp>120?(0,aC.scale)(Xp,120,180,135,180):(0,aC.scale)(Xp,60,120,60,105)}return dp>40&&dp<80&&(Mp*=.75),{h:dp,s:qh,l:Mp,a:xf}}function kN(Xp,qh){if(0===qh.mode)return SJ(Xp,qh);const kX=bC(qh);return SH(Xp,Object.assign(Object.assign({},qh),{mode:0}),uK,kX)}kX.modifyBackgroundColor=kN;const eq=.55;function Ds(Xp){return(0,aC.scale)(Xp,205,245,205,220)}function sw({h:Xp,s:qh,l:kX,a:xf},Md){const bC=undefined,tV=kX<.2||qh<.24,oH=!tV&&Xp>205&&Xp<245;if(kX>.5){const bC=(0,aC.scale)(kX,.5,1,eq,Md.l);if(tV){const Xp=undefined,qh=undefined;return{h:Md.h,s:Md.s,l:bC,a:xf}}let Mp=Xp;return oH&&(Mp=Ds(Xp)),{h:Mp,s:qh,l:bC,a:xf}}if(tV){const Xp=undefined,qh=undefined,bC=undefined;return{h:Md.h,s:Md.s,l:(0,aC.scale)(kX,0,.5,Md.l,eq),a:xf}}let Mp=Xp,dp;return oH?(Mp=Ds(Xp),dp=(0,aC.scale)(kX,0,.5,Md.l,Math.min(1,eq+.05))):dp=(0,aC.scale)(kX,0,.5,Md.l,eq),{h:Mp,s:qh,l:dp,a:xf}}function fb(Xp,qh){if(0===qh.mode)return SJ(Xp,qh);const kX=tV(qh);return SH(Xp,Object.assign(Object.assign({},qh),{mode:0}),sw,kX)}function cB({h:Xp,s:qh,l:kX,a:xf},Md,bC){const tV=undefined,oH=undefined;let Mp=Xp,dp=qh;(kX<.2||qh<.24)&&(kX<.5?(Mp=Md.h,dp=Md.s):(Mp=bC.h,dp=bC.s));const hy=undefined;return{h:Mp,s:dp,l:(0,aC.scale)(kX,0,1,.5,.2),a:xf}}function WE(Xp,qh){if(0===qh.mode)return SJ(Xp,qh);const kX=tV(qh),xf=bC(qh);return SH(Xp,Object.assign(Object.assign({},qh),{mode:0}),cB,kX,xf)}function uE(Xp,qh){return kN(Xp,qh)}function XX(Xp,qh){return kN(Xp,qh)}kX.modifyForegroundColor=fb,kX.modifyBorderColor=WE,kX.modifyShadowColor=uE,kX.modifyGradientColor=XX},{"../utils/color":33,"../utils/math":36,"./utils/matrix":27}],23:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.getSVGReverseFilterMatrixValue=kX.getSVGFilterMatrixValue=kX.createSVGFilterStylesheet=void 0;const xf=Xp("./utils/matrix"),aC=Xp("./css-filter"),Md=Xp("../utils/platform"),bC=Xp("../const");function tV(Xp,qh,kX,xf,tV){let Mp,Sm;return Md.isFirefox?(Mp=oH(dp(Xp)),Sm=oH(hy())):(Mp=`url(#${bC.MISC_PREFIX}-filter)`,Sm=`url(#${bC.MISC_PREFIX}-reverse-filter)`),(0,aC.cssFilterStyleSheetTemplate)(Mp,Sm,Xp,qh,kX,xf,tV)}function oH(Xp){const qh=`${bC.MISC_PREFIX}-filter`,kX=['<svg xmlns="http://www.w3.org/2000/svg">',`<filter id="${qh}" style="color-interpolation-filters: sRGB;">`,`<feColorMatrix type="matrix" values="${Xp}" />`,"</filter>","</svg>"].join("");return`url(data:image/svg+xml;base64,${btoa(kX)}#${qh})`}function Mp(Xp){return Xp.slice(0,4).map((Xp=>Xp.map((Xp=>Xp.toFixed(3))).join(" "))).join(" ")}function dp(Xp){return Mp((0,xf.createFilterMatrix)(Xp))}function hy(){return Mp(xf.Matrix.invertNHue())}kX.createSVGFilterStylesheet=tV,kX.getSVGFilterMatrixValue=dp,kX.getSVGReverseFilterMatrixValue=hy},{"../const":1,"../utils/platform":40,"./css-filter":21,"./utils/matrix":27}],24:[function(Xp,qh,kX){"use strict";function xf(Xp){const qh=[];return qh.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*="vjs-"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*="mu-"], .glyphicon, .icon) {'),Xp.useFont&&Xp.fontFamily&&qh.push(`  font-family: ${Xp.fontFamily} !important;`),Xp.textStroke>0&&(qh.push(`  -webkit-text-stroke: ${Xp.textStroke}px !important;`),qh.push(`  text-stroke: ${Xp.textStroke}px !important;`)),qh.push("}"),qh.join("\n")}Object.defineProperty(kX,"__esModule",{value:!0}),kX.createTextStyle=void 0,kX.createTextStyle=xf},{}],25:[function(Xp,qh,kX){"use strict";var xf;Object.defineProperty(kX,"__esModule",{value:!0}),kX.ThemeEngine=void 0,function(Xp){Xp["cssFilter"]="cssFilter",Xp["svgFilter"]="svgFilter",Xp["staticTheme"]="staticTheme",Xp["dynamicTheme"]="dynamicTheme"}(xf=kX.ThemeEngine||(kX.ThemeEngine={}))},{}],26:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.formatSitesFixesConfig=void 0;const xf=Xp("../../utils/array");function aC(Xp,qh){const kX=[];return Xp.forEach(((aC,Md)=>{(0,xf.push)(kX,aC.url),qh.props.forEach((Xp=>{const xf=qh.getPropCommandName(Xp),Md=aC[Xp];if(qh.shouldIgnoreProp(Xp,Md))return;kX.push(""),kX.push(xf);const bC=qh.formatPropValue(Xp,Md);bC&&kX.push(bC)})),Md<Xp.length-1&&(kX.push(""),kX.push("=".repeat(32)),kX.push(""))})),kX.push(""),kX.join("\n")}kX.formatSitesFixesConfig=aC},{"../../utils/array":30}],27:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.Matrix=kX.applyColorMatrix=kX.createFilterMatrix=void 0;const xf=Xp("../../utils/math");function aC(Xp){let qh=kX.Matrix.identity();return 0!==Xp.sepia&&(qh=(0,xf.multiplyMatrices)(qh,kX.Matrix.sepia(Xp.sepia/100))),0!==Xp.grayscale&&(qh=(0,xf.multiplyMatrices)(qh,kX.Matrix.grayscale(Xp.grayscale/100))),100!==Xp.contrast&&(qh=(0,xf.multiplyMatrices)(qh,kX.Matrix.contrast(Xp.contrast/100))),100!==Xp.brightness&&(qh=(0,xf.multiplyMatrices)(qh,kX.Matrix.brightness(Xp.brightness/100))),1===Xp.mode&&(qh=(0,xf.multiplyMatrices)(qh,kX.Matrix.invertNHue())),qh}function Md([Xp,qh,kX],aC){const Md=[[Xp/255],[qh/255],[kX/255],[1],[1]],bC=(0,xf.multiplyMatrices)(aC,Md);return[0,1,2].map((Xp=>(0,xf.clamp)(Math.round(255*bC[Xp][0]),0,255)))}kX.createFilterMatrix=aC,kX.applyColorMatrix=Md,kX.Matrix={identity:()=>[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],invertNHue:()=>[[.333,-.667,-.667,0,1],[-.667,.333,-.667,0,1],[-.667,-.667,.333,0,1],[0,0,0,1,0],[0,0,0,0,1]],brightness:Xp=>[[Xp,0,0,0,0],[0,Xp,0,0,0],[0,0,Xp,0,0],[0,0,0,1,0],[0,0,0,0,1]],contrast(Xp){const qh=(1-Xp)/2;return[[Xp,0,0,0,qh],[0,Xp,0,0,qh],[0,0,Xp,0,qh],[0,0,0,1,0],[0,0,0,0,1]]},sepia:Xp=>[[.393+.607*(1-Xp),.769-.769*(1-Xp),.189-.189*(1-Xp),0,0],[.349-.349*(1-Xp),.686+.314*(1-Xp),.168-.168*(1-Xp),0,0],[.272-.272*(1-Xp),.534-.534*(1-Xp),.131+.869*(1-Xp),0,0],[0,0,0,1,0],[0,0,0,0,1]],grayscale:Xp=>[[.2126+.7874*(1-Xp),.7152-.7152*(1-Xp),.0722-.0722*(1-Xp),0,0],[.2126-.2126*(1-Xp),.7152+.2848*(1-Xp),.0722-.0722*(1-Xp),0,0],[.2126-.2126*(1-Xp),.7152-.7152*(1-Xp),.0722+.9278*(1-Xp),0,0],[0,0,0,1,0],[0,0,0,0,1]]}},{"../../utils/math":36}],28:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.isURLInSiteList=kX.indexSiteListConfig=kX.getSitesFixesFor=kX.indexSitesFixesConfig=kX.getDomain=kX.parseSitesFixesConfig=void 0;const xf=Xp("../../utils/url"),aC=Xp("../../utils/text"),Md=6e4;function bC(Xp,qh){const kX=[],xf=undefined;return Xp.replace(/\r/g,"").split(/^\s*={2,}\s*$/gm).forEach((Xp=>{const xf=Xp.split("\n"),Md=[];if(xf.forEach(((Xp,qh)=>{Xp.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&Md.push(qh)})),0===Md.length)return;const bC={url:(0,aC.parseArray)(xf.slice(0,Md[0]).join("\n"))};Md.forEach(((Xp,kX)=>{const aC=xf[Xp].trim(),tV=xf.slice(Xp+1,kX===Md.length-1?xf.length:Md[kX+1]).join("\n"),oH=qh.getCommandPropName(aC);if(!oH)return;const Mp=qh.parseCommandValue(aC,tV);bC[oH]=Mp})),kX.push(bC)})),kX}function tV(Xp){try{return new URL(Xp).hostname.toLowerCase()}catch(qh){return Xp.split("/")[0].toLowerCase()}}function oH(Xp){return Xp.map((([Xp,qh])=>{const kX=Xp.toString(36),xf=qh.toString(36);return"0".repeat(4-kX.length)+kX+"0".repeat(3-xf.length)+xf})).join("")}function Mp(Xp,qh){const kX=(4+3)*qh,xf=parseInt(Xp.substring(kX+0,kX+4),36),aC=undefined;return[xf,xf+parseInt(Xp.substring(kX+4,kX+4+3),36)]}function dp(Xp,qh,kX){Xp[qh]?Xp[qh].includes(kX)||Xp[qh].push(kX):Xp[qh]=[kX]}function hy(Xp){const qh=Xp.lastIndexOf("*"),kX=Xp.substring(qh+2);if(qh<0||0===kX.length)return Xp.split(".");const xf=[kX],aC=undefined;return Xp.substring(0,qh).split(".").filter(Boolean).forEach((Xp=>xf.concat(Xp))),xf}function Sm(Xp){const qh={},kX={},aC=[],Md={},bC=[];for(let kX=0;kX<Xp.length;kX++){const oH=Xp[kX],Mp=new Set;for(const Xp of oH){const Md=tV(Xp);if((0,xf.isFullyQualifiedDomain)(Md))dp(qh,Md,kX);else{if(!(0,xf.isFullyQualifiedDomainWildcard)(Md)){aC.push(kX);break}{const Xp=hy(Md);bC.push({labels:Xp,index:kX}),Xp.forEach((Xp=>Mp.add(Xp)))}}}for(const Xp of Mp)Md[Xp]?Md[Xp]++:Md[Xp]=1}for(const{labels:Xp,index:qh}of bC){let xf=Xp[0];for(const qh of Xp)Md[qh]<Md[xf]&&(xf=qh);dp(kX,xf,qh)}return{domains:qh,domainLabels:kX,nonstandard:aC}}function SH(Xp,qh,kX,xf,Md){const bC=undefined,tV=Xp.substring(kX,xf).split("\n"),oH=[];if(tV.forEach(((Xp,qh)=>{Xp.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&oH.push(qh)})),0===oH.length)return;qh.push([kX,xf-kX]);const Mp=(0,aC.parseArray)(tV.slice(0,oH[0]).join("\n"));Md.push(Mp)}function jp(Xp){const qh=[],kX=[];let xf=0;const aC=/^\s*={2,}\s*$/gm;let Md;for(;Md=aC.exec(Xp);){const aC=Md.index,bC=Md.index+Md[0].length;SH(Xp,kX,xf,aC,qh),xf=bC}return SH(Xp,kX,xf,Xp.length,qh),{urls:qh,offsets:kX}}function AB(Xp){const{urls:qh,offsets:kX}=jp(Xp),{domains:xf,domainLabels:aC,nonstandard:Md}=Sm(qh);return{offsets:oH(kX),domains:xf,domainLabels:aC,nonstandard:Md,cacheDomainIndex:{},cacheSiteFix:{},cacheCleanupTimer:null}}function SJ(Xp,qh,kX){const aC=tV(Xp),Md=aC.split(".");let bC=[];"*"in qh.domainLabels&&(bC=bC.concat(qh.domainLabels["*"]));for(const Xp of Md)if(Xp in qh.domainLabels){const Md=qh.domainLabels[Xp];for(const Xp of Md){const qh=kX(Xp);for(const kX of qh){const qh=tV(kX);(0,xf.isFullyQualifiedDomainWildcard)(qh)&&(0,xf.fullyQualifiedDomainMatchesWildcard)(qh,aC)&&bC.push(Xp)}}}for(let Xp=0;Xp<Md.length;Xp++){const kX=Md.slice(Xp).join(".");kX in qh.domains&&(bC=bC.concat(qh.domains[kX])),kX in qh.domainLabels&&(bC=bC.concat(qh.domainLabels[kX]))}return bC=bC.concat(qh.nonstandard),bC=Array.from(new Set(bC)),bC}function nt(Xp,qh,kX,xf){if(xf in qh.cacheSiteFix)return qh.cacheSiteFix[xf];const[aC,Md]=Mp(qh.offsets,xf),tV=undefined,oH=bC(Xp.substring(aC,Md),kX)[0];return qh.cacheSiteFix[xf]=oH,oH}function ij(Xp){clearTimeout(Xp.cacheCleanupTimer),Xp.cacheCleanupTimer=setTimeout((()=>{Xp.cacheCleanupTimer=null,Xp.cacheDomainIndex={},Xp.cacheSiteFix={}}),Md)}function uK(Xp,qh,kX,xf){const aC=[],Md=tV(Xp);kX.cacheDomainIndex[Md]||(kX.cacheDomainIndex[Md]=SJ(Md,kX,(Xp=>nt(qh,kX,xf,Xp).url)));const bC=kX.cacheDomainIndex[Md];for(const Xp of bC){const Md=nt(qh,kX,xf,Xp);aC.push(Md)}return ij(kX),aC}function kN(Xp){const qh=(0,aC.parseArray)(Xp),kX=qh.map((Xp=>[Xp])),{domains:xf,domainLabels:Md,nonstandard:bC}=Sm(kX);return{domains:xf,domainLabels:Md,nonstandard:bC,urls:qh}}function eq(Xp,qh){const kX=undefined,xf=SJ(tV(Xp),qh,(Xp=>[qh.urls[Xp]])),aC=[];for(const Xp of xf)aC.push(qh.urls[Xp]);return aC}function Ds(Xp,qh){if(null===qh)return!1;const kX=eq(Xp,qh);return(0,xf.isURLInList)(Xp,kX)}kX.parseSitesFixesConfig=bC,kX.getDomain=tV,kX.indexSitesFixesConfig=AB,kX.getSitesFixesFor=uK,kX.indexSiteListConfig=kN,kX.isURLInSiteList=Ds},{"../../utils/text":41,"../../utils/url":45}],29:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.PREFIX=void 0,kX.PREFIX="dm"},{}],30:[function(Xp,qh,kX){"use strict";function xf(Xp){return null!=Xp.length}function aC(Xp,qh){if(xf(Xp))for(let kX=0,xf=Xp.length;kX<xf;kX++)qh(Xp[kX]);else for(const kX of Xp)qh(kX)}function Md(Xp,qh){aC(qh,(qh=>Xp.push(qh)))}function bC(Xp){const qh=[];for(let kX=0,xf=Xp.length;kX<xf;kX++)qh.push(Xp[kX]);return qh}Object.defineProperty(kX,"__esModule",{value:!0}),kX.toArray=kX.push=kX.forEach=void 0,kX.forEach=aC,kX.push=Md,kX.toArray=bC},{}],31:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0});class xf{constructor(){this.queue=[],this.timerId=null,this.frameDuration=1e3/60}addToQueue(Xp){this.queue.push(Xp),this.startQueue()}stopQueue(){null!==this.timerId&&(cancelAnimationFrame(this.timerId),this.timerId=null),this.queue=[]}startQueue(){this.timerId||(this.timerId=requestAnimationFrame((()=>{this.timerId=null;const Xp=Date.now();let qh;for(;qh=this.queue.shift();)if(qh(),Date.now()-Xp>=this.frameDuration){this.startQueue();break}})))}}kX.default=xf},{}],32:[function(Xp,qh,kX){"use strict";var xf;Object.defineProperty(kX,"__esModule",{value:!0}),kX.AutomationMode=void 0,function(Xp){Xp["NONE"]="",Xp["TIME"]="time",Xp["SYSTEM"]="system",Xp["LOCATION"]="location"}(xf=kX.AutomationMode||(kX.AutomationMode={}))},{}],33:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.getSRGBLightness=kX.lowerCalcExpression=kX.parse=kX.hslToString=kX.rgbToHexString=kX.rgbToString=kX.rgbToHSL=kX.hslToRGB=kX.clearColorCache=kX.parseToHSLWithCache=kX.parseColorWithCache=void 0;const xf=Xp("./math-eval"),aC=Xp("./text"),Md=new Map,bC=new Map;function tV(Xp){if(Xp=Xp.trim(),bC.has(Xp))return bC.get(Xp);Xp.includes("calc(")&&(Xp=m(Xp));const qh=uK(Xp);return qh&&bC.set(Xp,qh),qh}function oH(Xp){if(Md.has(Xp))return Md.get(Xp);const qh=tV(Xp);if(!qh)return null;const kX=hy(qh);return Md.set(Xp,kX),kX}function Mp(){Md.clear(),bC.clear()}function dp({h:Xp,s:qh,l:kX,a:xf=1}){if(0===qh){const[Xp,qh,aC]=[kX,kX,kX].map((Xp=>Math.round(255*Xp)));return{r:Xp,g:aC,b:qh,a:xf}}const aC=(1-Math.abs(2*kX-1))*qh,Md=aC*(1-Math.abs(Xp/60%2-1)),bC=kX-aC/2,[tV,oH,Mp]=(Xp<60?[aC,Md,0]:Xp<120?[Md,aC,0]:Xp<180?[0,aC,Md]:Xp<240?[0,Md,aC]:Xp<300?[Md,0,aC]:[aC,0,Md]).map((Xp=>Math.round(255*(Xp+bC))));return{r:tV,g:oH,b:Mp,a:xf}}function hy({r:Xp,g:qh,b:kX,a:xf=1}){const aC=Xp/255,Md=qh/255,bC=kX/255,tV=Math.max(aC,Md,bC),oH=Math.min(aC,Md,bC),Mp=tV-oH,dp=(tV+oH)/2;if(0===Mp)return{h:0,s:0,l:dp,a:xf};let hy=60*(tV===aC?(Md-bC)/Mp%6:tV===Md?(bC-aC)/Mp+2:(aC-Md)/Mp+4);hy<0&&(hy+=360);const Sm=undefined;return{h:hy,s:Mp/(1-Math.abs(2*dp-1)),l:dp,a:xf}}function Sm(Xp,qh=0){const kX=Xp.toFixed(qh);if(0===qh)return kX;const xf=kX.indexOf(".");if(xf>=0){const Xp=kX.match(/0+$/);if(Xp)return Xp.index===xf+1?kX.substring(0,xf):kX.substring(0,Xp.index)}return kX}function SH(Xp){const{r:qh,g:kX,b:xf,a:aC}=Xp;return null!=aC&&aC<1?`rgba(${Sm(qh)}, ${Sm(kX)}, ${Sm(xf)}, ${Sm(aC,2)})`:`rgb(${Sm(qh)}, ${Sm(kX)}, ${Sm(xf)})`}function jp({r:Xp,g:qh,b:kX,a:xf}){return`#${(null!=xf&&xf<1?[Xp,qh,kX,Math.round(255*xf)]:[Xp,qh,kX]).map((Xp=>`${Xp<16?"0":""}${Xp.toString(16)}`)).join("")}`}function AB(Xp){const{h:qh,s:kX,l:xf,a:aC}=Xp;return null!=aC&&aC<1?`hsla(${Sm(qh)}, ${Sm(100*kX)}%, ${Sm(100*xf)}%, ${Sm(aC,2)})`:`hsl(${Sm(qh)}, ${Sm(100*kX)}%, ${Sm(100*xf)}%)`}kX.parseColorWithCache=tV,kX.parseToHSLWithCache=oH,kX.clearColorCache=Mp,kX.hslToRGB=dp,kX.rgbToHSL=hy,kX.rgbToString=SH,kX.rgbToHexString=jp,kX.hslToString=AB;const SJ=/^rgba?\([^\(\)]+\)$/,nt=/^hsla?\([^\(\)]+\)$/,ij=/^#[0-9a-f]+$/i;function uK(Xp){const qh=Xp.trim().toLowerCase();return qh.match(SJ)?fb(qh):qh.match(nt)?uE(qh):qh.match(ij)?XX(qh):Vo.has(qh)?uu(qh):Ef.has(qh)?oI(qh):"transparent"===Xp?{r:0,g:0,b:0,a:0}:null}function kN(Xp){const qh=[];let kX=0,xf=!1;const aC=Xp.indexOf("(");Xp=Xp.substring(aC+1,Xp.length-1);for(let aC=0;aC<Xp.length;aC++){const Md=Xp[aC];Md>="0"&&Md<="9"||"."===Md||"+"===Md||"-"===Md?xf=!0:!xf||" "!==Md&&","!==Md&&"/"!==Md?xf||(kX=aC+1):(qh.push(Xp.substring(kX,aC)),xf=!1,kX=aC+1)}return xf&&qh.push(Xp.substring(kX,Xp.length)),qh}function eq(Xp,qh,kX){const xf=kN(Xp),aC=Object.entries(kX),Md=undefined;return xf.map((Xp=>Xp.trim())).map(((Xp,kX)=>{let xf;const Md=aC.find((([qh])=>Xp.endsWith(qh)));return xf=Md?parseFloat(Xp.substring(0,Xp.length-Md[0].length))/Md[1]*qh[kX]:parseFloat(Xp),qh[kX]>1?Math.round(xf):xf}))}kX.parse=uK;const Ds=[255,255,255,1],sw={"%":100};function fb(Xp){const[qh,kX,xf,aC=1]=eq(Xp,Ds,sw);return{r:qh,g:kX,b:xf,a:aC}}const cB=[360,1,1,1],WE={"%":100,deg:360,rad:2*Math.PI,turn:1};function uE(Xp){const[qh,kX,xf,aC=1]=eq(Xp,cB,WE);return dp({h:qh,s:kX,l:xf,a:aC})}function XX(Xp){const qh=Xp.substring(1);switch(qh.length){case 3:case 4:{const[Xp,kX,xf]=[0,1,2].map((Xp=>parseInt(`${qh[Xp]}${qh[Xp]}`,16))),aC=undefined;return{r:Xp,g:kX,b:xf,a:3===qh.length?1:parseInt(`${qh[3]}${qh[3]}`,16)/255}}case 6:case 8:{const[Xp,kX,xf]=[0,2,4].map((Xp=>parseInt(qh.substring(Xp,Xp+2),16))),aC=undefined;return{r:Xp,g:kX,b:xf,a:6===qh.length?1:parseInt(qh.substring(6,8),16)/255}}}return null}function uu(Xp){const qh=Vo.get(Xp);return{r:qh>>16&255,g:qh>>8&255,b:qh>>0&255,a:1}}function oI(Xp){const qh=Ef.get(Xp);return{r:qh>>16&255,g:qh>>8&255,b:qh>>0&255,a:1}}function m(Xp){let qh=0;const kX=(qh,kX,xf)=>{Xp=Xp.substring(0,qh)+xf+Xp.substring(kX)};for(;-1!==(qh=Xp.indexOf("calc("));){const Md=(0,aC.getParenthesesRange)(Xp,qh);if(!Md)break;let bC=Xp.slice(Md.start+1,Md.end-1);const tV=bC.includes("%");bC=bC.split("%").join("");const oH=Math.round((0,xf.evalMath)(bC));kX(Md.start-4,Md.end,oH+(tV?"%":""))}return Xp}kX.lowerCalcExpression=m;const Vo=new Map(Object.entries({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074})),Ef=new Map(Object.entries({ActiveBorder:3906044,ActiveCaption:0,AppWorkspace:11184810,Background:6513614,ButtonFace:16777215,ButtonHighlight:15329769,ButtonShadow:10461343,ButtonText:0,CaptionText:0,GrayText:8355711,Highlight:11720703,HighlightText:0,InactiveBorder:16777215,InactiveCaption:16777215,InactiveCaptionText:0,InfoBackground:16514245,InfoText:0,Menu:16185078,MenuText:16777215,Scrollbar:11184810,ThreeDDarkShadow:0,ThreeDFace:12632256,ThreeDHighlight:16777215,ThreeDLightShadow:16777215,ThreeDShadow:0,Window:15527148,WindowFrame:11184810,WindowText:0,"-webkit-focus-ring-color":15046400}).map((([Xp,qh])=>[Xp.toLowerCase(),qh])));function uJ(Xp,qh,kX){return(.2126*Xp+.7152*qh+.0722*kX)/255}kX.getSRGBLightness=uJ},{"./math-eval":35,"./text":41}],34:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.compareIPV6=kX.isIPV6=void 0;const xf=/\[[0-9:a-zA-Z]+?\]/;function aC(Xp){const qh=xf.exec(Xp);if(!qh)return!1;const kX=Xp.indexOf("?");return!(kX>=0&&qh.index>kX)}kX.isIPV6=aC;const Md=/\[.*?\](\:\d+)?/;function bC(Xp,qh){const kX=undefined,xf=undefined;return Xp.match(Md)[0]===qh.match(Md)[0]}kX.compareIPV6=bC},{}],35:[function(Xp,qh,kX){"use strict";function xf(Xp){const qh=[],kX=[];let xf;for(let aC=0,bC=Xp.length;aC<bC;aC++){const bC=Xp[aC];if(bC&&" "!==bC){if(Md.has(bC)){const Xp=Md.get(bC);for(;kX.length;){const xf=Md.get(kX[0]);if(!xf)break;if(!Xp.lessOrEqualThan(xf))break;qh.push(kX.shift())}kX.unshift(bC)}else!xf||Md.has(xf)?qh.push(bC):qh[qh.length-1]+=bC;xf=bC}}qh.push(...kX);const aC=[];for(let Xp=0,kX=qh.length;Xp<kX;Xp++){const kX=Md.get(qh[Xp]);if(kX){const Xp=aC.splice(0,2);aC.push(kX.exec(Xp[1],Xp[0]))}else aC.unshift(parseFloat(qh[Xp]))}return aC[0]}Object.defineProperty(kX,"__esModule",{value:!0}),kX.evalMath=void 0,kX.evalMath=xf;class aC{constructor(Xp,qh){this.precendce=Xp,this.execMethod=qh}exec(Xp,qh){return this.execMethod(Xp,qh)}lessOrEqualThan(Xp){return this.precendce<=Xp.precendce}}const Md=new Map([["+",new aC(1,((Xp,qh)=>Xp+qh))],["-",new aC(1,((Xp,qh)=>Xp-qh))],["*",new aC(2,((Xp,qh)=>Xp*qh))],["/",new aC(2,((Xp,qh)=>Xp/qh))]])},{}],36:[function(Xp,qh,kX){"use strict";function xf(Xp,qh,kX,xf,aC){return(Xp-qh)*(aC-xf)/(kX-qh)+xf}function aC(Xp,qh,kX){return Math.min(kX,Math.max(qh,Xp))}function Md(Xp,qh){const kX=[];for(let xf=0,aC=Xp.length;xf<aC;xf++){kX[xf]=[];for(let aC=0,Md=qh[0].length;aC<Md;aC++){let Md=0;for(let kX=0,bC=Xp[0].length;kX<bC;kX++)Md+=Xp[xf][kX]*qh[kX][aC];kX[xf][aC]=Md}}return kX}Object.defineProperty(kX,"__esModule",{value:!0}),kX.multiplyMatrices=kX.clamp=kX.scale=void 0,kX.scale=xf,kX.clamp=aC,kX.multiplyMatrices=Md},{}],37:[function(Xp,qh,kX){"use strict";var xf;Object.defineProperty(kX,"__esModule",{value:!0}),kX.MessageType=void 0,function(Xp){Xp["UI_GET_DATA"]="ui-get-data",Xp["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",Xp["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",Xp["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",Xp["UI_CHANGE_SETTINGS"]="ui-change-settings",Xp["UI_SET_THEME"]="ui-set-theme",Xp["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",Xp["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",Xp["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",Xp["UI_LOAD_CONFIG"]="ui-load-config",Xp["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",Xp["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",Xp["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",Xp["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",Xp["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",Xp["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",Xp["UI_SAVE_FILE"]="ui-save-file",Xp["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",Xp["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",Xp["BG_CHANGES"]="bg-changes",Xp["BG_ADD_CSS_FILTER"]="bg-add-css-filter",Xp["BG_ADD_STATIC_THEME"]="bg-add-static-theme",Xp["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",Xp["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",Xp["BG_EXPORT_CSS"]="bg-export-css",Xp["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",Xp["BG_CLEAN_UP"]="bg-clean-up",Xp["BG_RELOAD"]="bg-reload",Xp["BG_FETCH_RESPONSE"]="bg-fetch-response",Xp["BG_UI_UPDATE"]="bg-ui-update",Xp["BG_CSS_UPDATE"]="bg-css-update",Xp["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",Xp["CS_FRAME_CONNECT"]="cs-frame-connect",Xp["CS_FRAME_FORGET"]="cs-frame-forget",Xp["CS_FRAME_FREEZE"]="cs-frame-freeze",Xp["CS_FRAME_RESUME"]="cs-frame-resume",Xp["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",Xp["CS_FETCH"]="cs-fetch",Xp["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",Xp["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",Xp["CS_LOG"]="cs-log"}(xf=kX.MessageType||(kX.MessageType={}))},{}],38:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.loadAsText=kX.readResponseAsDataURL=kX.loadAsDataURL=void 0;const xf=Xp("./platform");async function aC(Xp,qh,kX){const aC=await fetch(Xp,{cache:"force-cache",credentials:"omit",referrer:kX});if(xf.isFirefox&&"text/css"===qh&&Xp.startsWith("moz-extension://")&&Xp.endsWith(".css"))return aC;if(qh&&!aC.headers.get("Content-Type").startsWith(qh))throw new Error(`Mime type mismatch when loading ${Xp}`);if(!aC.ok)throw new Error(`Unable to load ${Xp} ${aC.status} ${aC.statusText}`);return aC}async function Md(Xp,qh){const kX=await aC(Xp,qh);return await bC(kX)}async function bC(Xp){const qh=await Xp.blob(),kX=undefined;return await new Promise((Xp=>{const kX=new FileReader;kX.onloadend=()=>Xp(kX.result),kX.readAsDataURL(qh)}))}async function tV(Xp,qh,kX){const xf=await aC(Xp,qh,kX);return await xf.text()}kX.loadAsDataURL=Md,kX.readResponseAsDataURL=bC,kX.loadAsText=tV},{"./platform":40}],39:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.parseGradient=void 0;const xf=Xp("./text"),aC="gradient".length,Md="conic-",bC=Md.length,tV="radial-",oH="linear-";function Mp(Xp){const qh=[];let kX=0,Mp=Md.length;for(;-1!==(kX=Xp.indexOf("gradient",Mp));){let dp;if([oH,tV,Md].find((qh=>{if(kX-qh.length>=0){const xf=undefined;if(Xp.substring(kX-qh.length,kX)===qh)return"repeating"===Xp.slice(kX-qh.length-10,kX-qh.length-1)?(dp=`repeating-${qh}gradient`,!0):"-webkit"===Xp.slice(kX-qh.length-8,kX-qh.length-1)?(dp=`-webkit-${qh}gradient`,!0):(dp=`${qh}gradient`,!0)}})),!dp)break;const{start:hy,end:Sm}=(0,xf.getParenthesesRange)(Xp,kX+aC),SH=Xp.substring(hy+1,Sm-1);Mp=Sm+1+bC,qh.push({typeGradient:dp,match:SH,offset:dp.length+2,index:kX-dp.length+aC,hasComma:!0})}return qh.length&&(qh[qh.length-1].hasComma=!1),qh}kX.parseGradient=Mp},{"./text":41}],40:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.isCSSColorSchemePropSupported=kX.isFetchSupported=kX.isXMLHttpRequestSupported=kX.compareChromeVersions=kX.isDefinedSelectorSupported=kX.firefoxVersion=kX.chromiumVersion=kX.isNonPersistent=kX.isMatchMediaChangeEventListenerBuggy=kX.isMatchMediaChangeEventListenerSupported=kX.isShadowDomSupported=kX.isMobile=kX.isMacOS=kX.isWindows=kX.isSafari=kX.isEdge=kX.isOpera=kX.isYaBrowser=kX.isVivaldi=kX.isFirefox=kX.isThunderbird=kX.isChromium=void 0;const xf="undefined"!=typeof navigator,aC=xf?navigator.userAgentData&&Array.isArray(navigator.userAgentData.brands)?navigator.userAgentData.brands.map((Xp=>`${Xp.brand.toLowerCase()} ${Xp.version}`)).join(" "):navigator.userAgent.toLowerCase():"some useragent",Md=xf?navigator.userAgentData&&"string"==typeof navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase():navigator.platform.toLowerCase():"some platform";function bC(Xp,qh){const kX=Xp.split(".").map((Xp=>parseInt(Xp))),xf=qh.split(".").map((Xp=>parseInt(Xp)));for(let Xp=0;Xp<kX.length;Xp++)if(kX[Xp]!==xf[Xp])return kX[Xp]<xf[Xp]?-1:1;return 0}kX.isChromium=!0,kX.isThunderbird=!1,kX.isFirefox=!1,kX.isVivaldi=!1,kX.isYaBrowser=!1,kX.isOpera=!1,kX.isEdge=!1,kX.isSafari=!1,kX.isWindows=Md.startsWith("win"),kX.isMacOS=Md.startsWith("mac"),kX.isMobile=xf&&navigator.userAgentData?navigator.userAgentData.mobile:aC.includes("mobile"),kX.isShadowDomSupported="function"==typeof ShadowRoot,kX.isMatchMediaChangeEventListenerSupported=!0,kX.isMatchMediaChangeEventListenerBuggy=xf&&navigator.userAgentData&&["Linux","Android"].includes(navigator.userAgentData.platform)||Md.startsWith("linux"),kX.isNonPersistent=!0,kX.chromiumVersion=(()=>{const Xp=aC.match(/chrom(?:e|ium)(?:\/| )([^ ]+)/);return Xp&&Xp[1]?Xp[1]:""})(),kX.firefoxVersion=(()=>{const Xp=aC.match(/(?:firefox|librewolf)(?:\/| )([^ ]+)/);return Xp&&Xp[1]?Xp[1]:""})(),kX.isDefinedSelectorSupported=(()=>{try{return document.querySelector(":defined"),!0}catch(Xp){return!1}})(),kX.compareChromeVersions=bC,kX.isXMLHttpRequestSupported="function"==typeof XMLHttpRequest,kX.isFetchSupported="function"==typeof fetch,kX.isCSSColorSchemePropSupported=!0},{}],41:[function(Xp,qh,kX){"use strict";function xf(Xp,qh){if(!isFinite(qh))throw new Error(`Wrong char index ${qh}`);let kX="",xf=0,aC,Md=0;do{xf++,aC=Md,Md=Xp.indexOf("\n",aC+1)}while(Md>=0&&Md<=qh);const bC=qh-aC;return kX+=`line ${xf}, column ${bC}`,kX+="\n",qh<Xp.length?kX+=Xp.substring(aC+1,Md):kX+=Xp.substring(Xp.lastIndexOf("\n")+1),kX+="\n",kX+=`${new Array(bC).join("-")}^`,kX}function aC(Xp,qh){const kX=Math.min(Xp.length,qh.length);for(let xf=0;xf<kX;xf++)if(Xp[xf]!==qh[xf])return xf;return Xp.length!==qh.length?kX:-1}function Md(Xp){return Xp.replace(/\r/g,"").split("\n").map((Xp=>Xp.trim())).filter((Xp=>Xp))}function bC(Xp){return Xp.concat("").join("\n")}function tV(Xp,qh,kX=0){const xf=[];let aC;for(;aC=Xp.exec(qh);)xf.push(aC[kX]);return xf}function oH(Xp){return 2*Xp.length}function Mp(Xp){function qh(Xp){return Xp.replace(/^\s+/,"")}function kX(Xp){return 0===Xp?"":" ".repeat(4*Xp)}if(Xp.length<5e4){const qh=/[^{}]+{\s*}/;for(;qh.test(Xp);)Xp=Xp.replace(qh,"")}const xf=Xp.replace(/\s{2,}/g," ").replace(/\{/g,"{\n").replace(/\}/g,"\n}\n").replace(/\;(?![^\(|\"]*(\)|\"))/g,";\n").replace(/\,(?![^\(|\"]*(\)|\"))/g,",\n").replace(/\n\s*\n/g,"\n").split("\n");let aC=0;const Md=[];for(let Xp=0,bC=xf.length;Xp<bC;Xp++){const bC=`${xf[Xp]}\n`;bC.includes("{")?Md.push(kX(aC++)+qh(bC)):bC.includes("}")?Md.push(kX(--aC)+qh(bC)):Md.push(kX(aC)+qh(bC))}return Md.join("").trim()}function dp(Xp,qh=0){const kX=Xp.length;let xf=0,aC=-1;for(let Md=qh;Md<kX;Md++)if(0===xf){const qh=Xp.indexOf("(",Md);if(qh<0)break;aC=qh,xf++,Md=qh}else{const qh=Xp.indexOf(")",Md);if(qh<0)break;const kX=Xp.indexOf("(",Md);if(kX<0||qh<kX){if(xf--,0===xf)return{start:aC,end:qh+1};Md=qh}else xf++,Md=kX}return null}Object.defineProperty(kX,"__esModule",{value:!0}),kX.getParenthesesRange=kX.formatCSS=kX.getStringSize=kX.getMatches=kX.formatArray=kX.parseArray=kX.getTextDiffIndex=kX.getTextPositionMessage=void 0,kX.getTextPositionMessage=xf,kX.getTextDiffIndex=aC,kX.parseArray=Md,kX.formatArray=bC,kX.getMatches=tV,kX.getStringSize=oH,kX.formatCSS=Mp,kX.getParenthesesRange=dp},{}],42:[function(Xp,qh,kX){"use strict";function xf(Xp){let qh=!1,kX=null,xf;const aC=(...aC)=>{xf=aC,kX?qh=!0:(Xp(...xf),kX=requestAnimationFrame((()=>{kX=null,qh&&(Xp(...xf),qh=!1)})))},Md=()=>{cancelAnimationFrame(kX),qh=!1,kX=null};return Object.assign(aC,{cancel:Md})}function aC(){const Xp=[];let qh=null;function kX(){let kX;for(;kX=Xp.shift();)kX();qh=null}function xf(xf){Xp.push(xf),qh||(qh=requestAnimationFrame(kX))}function aC(){Xp.splice(0),cancelAnimationFrame(qh),qh=null}return{add:xf,cancel:aC}}Object.defineProperty(kX,"__esModule",{value:!0}),kX.createAsyncTasksQueue=kX.throttle=void 0,kX.throttle=xf,kX.createAsyncTasksQueue=aC},{}],43:[function(Xp,qh,kX){"use strict";function xf(Xp){const qh=Xp.split(":").slice(0,2),kX=Xp.trim().toLowerCase(),xf=kX.endsWith("am")||kX.endsWith("a.m."),aC=kX.endsWith("pm")||kX.endsWith("p.m.");let Md=qh.length>0?parseInt(qh[0]):0;(isNaN(Md)||Md>23)&&(Md=0),xf&&12===Md&&(Md=0),aC&&Md<12&&(Md+=12);let bC=qh.length>1?parseInt(qh[1]):0;return(isNaN(bC)||bC>59)&&(bC=0),[Md,bC]}function aC(Xp){return Xp.split(":").map((Xp=>parseInt(Xp)))}function Md(Xp,qh){return Xp[0]===qh[0]&&Xp[1]===qh[1]?0:Xp[0]<qh[0]||Xp[0]===qh[0]&&Xp[1]<qh[1]?-1:1}function bC(Xp,qh,kX=new Date){const xf=aC(Xp),tV=aC(qh),oH=[kX.getHours(),kX.getMinutes()];return Md(xf,tV)>0?bC(qh,Xp,kX):0===Md(xf,tV)?null:Md(oH,xf)<0?(kX.setHours(xf[0]),kX.setMinutes(xf[1]),kX.setSeconds(0),kX.setMilliseconds(0),kX.getTime()):Md(oH,tV)<0?(kX.setHours(tV[0]),kX.setMinutes(tV[1]),kX.setSeconds(0),kX.setMilliseconds(0),kX.getTime()):new Date(kX.getFullYear(),kX.getMonth(),kX.getDate()+1,xf[0],xf[1]).getTime()}function tV(Xp,qh,kX=new Date){const xf=aC(Xp),bC=aC(qh),tV=[kX.getHours(),kX.getMinutes()];return Md(xf,bC)>0?Md(xf,tV)<=0||Md(tV,bC)<0:Md(xf,tV)<=0&&Md(tV,bC)<0}function oH(Xp,qh,kX){return qh<Xp?kX<=qh||Xp<=kX:Xp<kX&&kX<qh}function Mp(Xp){let qh=0;return Xp.seconds&&(qh+=1e3*Xp.seconds),Xp.minutes&&(qh+=60*Xp.minutes*1e3),Xp.hours&&(qh+=60*Xp.hours*60*1e3),Xp.days&&(qh+=24*Xp.days*60*60*1e3),qh}function dp(Xp){return Mp(Xp)/1e3/60}function hy(Xp,qh,kX){const xf=Date.UTC(kX.getUTCFullYear(),0,0,0,0,0,0),aC=Mp({days:1}),Md=Math.floor((kX.getTime()-xf)/aC),bC=90.83333333333333,tV=Math.PI/180,oH=180/Math.PI,dp=qh/15;function hy(qh){const kX=Md+((qh?6:18)-dp)/24,xf=.9856*kX-3.289;let aC=xf+1.916*Math.sin(xf*tV)+.02*Math.sin(2*xf*tV)+282.634;aC>360?aC-=360:aC<0&&(aC+=360);let hy=oH*Math.atan(.91764*Math.tan(aC*tV));hy>360?hy-=360:hy<0&&(hy+=360);const Sm=undefined,SH=undefined;hy+=90*Math.floor(aC/90)-90*Math.floor(hy/90),hy/=15;const jp=.39782*Math.sin(aC*tV),AB=Math.cos(Math.asin(jp)),SJ=(Math.cos(bC*tV)-jp*Math.sin(Xp*tV))/(AB*Math.cos(Xp*tV));if(SJ>1)return{alwaysDay:!1,alwaysNight:!0,time:0};if(SJ<-1)return{alwaysDay:!0,alwaysNight:!1,time:0};const nt=undefined,ij=undefined;let uK=(qh?360-oH*Math.acos(SJ):oH*Math.acos(SJ))/15+hy-.06571*kX-6.622-dp;return uK>24?uK-=24:uK<0&&(uK+=24),{alwaysDay:!1,alwaysNight:!1,time:Math.round(uK*Mp({hours:1}))}}const Sm=hy(!0),SH=hy(!1);return Sm.alwaysDay||SH.alwaysDay?{alwaysDay:!0}:Sm.alwaysNight||SH.alwaysNight?{alwaysNight:!0}:{sunriseTime:Sm.time,sunsetTime:SH.time}}function Sm(Xp,qh,kX=new Date){const xf=hy(Xp,qh,kX);if(xf.alwaysDay)return!1;if(xf.alwaysNight)return!0;const aC=xf.sunriseTime,Md=undefined,bC=undefined;return oH(xf.sunsetTime,aC,kX.getUTCHours()*Mp({hours:1})+kX.getUTCMinutes()*Mp({minutes:1})+kX.getUTCSeconds()*Mp({seconds:1})+kX.getUTCMilliseconds())}function SH(Xp,qh,kX=new Date){const xf=hy(Xp,qh,kX);if(xf.alwaysDay)return kX.getTime()+Mp({days:1});if(xf.alwaysNight)return kX.getTime()+Mp({days:1});const[aC,Md]=xf.sunriseTime<xf.sunsetTime?[xf.sunriseTime,xf.sunsetTime]:[xf.sunsetTime,xf.sunriseTime],bC=kX.getUTCHours()*Mp({hours:1})+kX.getUTCMinutes()*Mp({minutes:1})+kX.getUTCSeconds()*Mp({seconds:1})+kX.getUTCMilliseconds();return bC<=aC?Date.UTC(kX.getUTCFullYear(),kX.getUTCMonth(),kX.getUTCDate(),0,0,0,aC):bC<=Md?Date.UTC(kX.getUTCFullYear(),kX.getUTCMonth(),kX.getUTCDate(),0,0,0,Md):Date.UTC(kX.getUTCFullYear(),kX.getUTCMonth(),kX.getUTCDate()+1,0,0,0,aC)}Object.defineProperty(kX,"__esModule",{value:!0}),kX.nextTimeChangeAtLocation=kX.isNightAtLocation=kX.getDurationInMinutes=kX.getDuration=kX.isInTimeIntervalLocal=kX.nextTimeInterval=kX.parseTime=void 0,kX.parseTime=xf,kX.nextTimeInterval=bC,kX.isInTimeIntervalLocal=tV,kX.getDuration=Mp,kX.getDurationInMinutes=dp,kX.isNightAtLocation=Sm,kX.nextTimeChangeAtLocation=SH},{}],44:[function(Xp,qh,kX){"use strict";function xf(Xp){return(Xp<16?"0":"")+Xp.toString(16)}function aC(){if("randomUUID"in crypto){const Xp=crypto.randomUUID();return Xp.substring(0,8)+Xp.substring(9,13)+Xp.substring(14,18)+Xp.substring(19,23)+Xp.substring(24)}return Array.from(crypto.getRandomValues(new Uint8Array(16))).map((Xp=>xf(Xp))).join("")}Object.defineProperty(kX,"__esModule",{value:!0}),kX.generateUID=void 0,kX.generateUID=aC},{}],45:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.isLocalFile=kX.fullyQualifiedDomainMatchesWildcard=kX.isFullyQualifiedDomainWildcard=kX.isFullyQualifiedDomain=kX.isURLEnabled=kX.isPDF=kX.isURLMatched=kX.isURLInList=kX.compareURLPatterns=kX.getURLHostOrProtocol=kX.isRelativeHrefOnAbsolutePath=kX.getAbsoluteURL=kX.parseURL=kX.parsedURLCache=void 0;const xf=Xp("./ipv6"),aC=!1;let Md;function bC(Xp){return Md||(Md=document.createElement("a")),Md.href=Xp,Md.href}function tV(Xp,qh=null){const xf=`${Xp}${qh?`;${qh}`:""}`;if(kX.parsedURLCache.has(xf))return kX.parsedURLCache.get(xf);if(qh){const aC=new URL(Xp,bC(qh));return kX.parsedURLCache.set(xf,aC),aC}const aC=new URL(bC(Xp));return kX.parsedURLCache.set(Xp,aC),aC}function oH(Xp,qh){if(qh.match(/^data\\?\:/))return qh;if(/^\/\//.test(qh))return`${location.protocol}${qh}`;const kX=tV(Xp),xf=undefined;return tV(qh,kX.href).href}function Mp(Xp){if(Xp.startsWith("data:"))return!0;const qh=tV(Xp);return qh.protocol===location.protocol&&(qh.hostname===location.hostname&&(qh.port===location.port&&qh.pathname===location.pathname))}function dp(Xp){const qh=new URL(Xp);return qh.host?qh.host:"file:"===qh.protocol?qh.pathname:qh.protocol}function hy(Xp,qh){return Xp.localeCompare(qh)}function Sm(Xp,qh){for(let kX=0;kX<qh.length;kX++)if(SH(Xp,qh[kX]))return!0;return!1}function SH(Xp,qh){const kX=(0,xf.isIPV6)(Xp),aC=(0,xf.isIPV6)(qh);if(kX&&aC)return(0,xf.compareIPV6)(Xp,qh);if(!kX&&!aC){const kX=jp(qh);return null!==kX&&Boolean(Xp.match(kX))}return!1}function jp(Xp){try{const qh="^"===(Xp=Xp.trim())[0],kX="$"===Xp[Xp.length-1],xf=/\/\$?$/.test(Xp);let aC,Md,bC;(aC=(Xp=Xp.replace(/^\^/,"").replace(/\$$/,"").replace(/^.*?\/{2,3}/,"").replace(/\?.*$/,"").replace(/\/$/,"")).indexOf("/"))>=0?(Md=Xp.substring(0,aC),bC=Xp.replace(/\$/g,"").substring(aC)):Md=Xp.replace(/\$/g,"");let tV=qh?"^(.*?\\:\\/{2,3})?":"^(.*?\\:\\/{2,3})?([^/]*?\\.)?";const oH=Md.split(".");tV+="(";for(let Xp=0;Xp<oH.length;Xp++)"*"===oH[Xp]&&(oH[Xp]="[^\\.\\/]+?");return tV+=oH.join("\\."),tV+=")",bC&&(tV+="(",tV+=bC.replace("/","\\/"),tV+=")"),tV+=kX?"(\\/?(\\?[^/]*?)?)$":`(\\/${xf?"":"?"}.*?)$`,new RegExp(tV,"i")}catch(Xp){return null}}function AB(Xp){if(Xp.includes(".pdf")){if(Xp.includes("?")&&(Xp=Xp.substring(0,Xp.lastIndexOf("?"))),Xp.includes("#")&&(Xp=Xp.substring(0,Xp.lastIndexOf("#"))),Xp.match(/(wikipedia|wikimedia)\.org/i)&&Xp.match(/(wikipedia|wikimedia)\.org\/.*\/[a-z]+\:[^\:\/]+\.pdf/i)||Xp.match(/timetravel\.mementoweb\.org\/reconstruct/i)&&Xp.match(/\.pdf$/i)||Xp.match(/dropbox\.com\/s\//i)&&Xp.match(/\.pdf$/i))return!1;if(!Xp.endsWith(".pdf"))return!1;for(let qh=Xp.length;qh>0;qh--){if("="===Xp[qh])return!1;if("/"===Xp[qh])return!0}}return!1}function SJ(Xp,qh,{isProtected:kX,isInDarkList:xf,isDarkThemeDetected:Md},bC=!0){if(kN(Xp)&&!bC)return!1;if(kX&&!qh.enableForProtectedPages)return!1;if(aC)return!0;if(AB(Xp))return qh.enableForPDF;const tV=Sm(Xp,qh.siteList),oH=Sm(Xp,qh.siteListEnabled);return qh.applyToListedOnly?oH||tV:!!oH||!(xf||qh.detectDarkTheme&&Md)&&!tV}function nt(Xp){return/^[a-z0-9\.\-]+$/i.test(Xp)&&-1===Xp.indexOf("..")}function ij(Xp){if(!Xp.includes("*")||!/^[a-z0-9\.\-\*]+$/i.test(Xp))return!1;const qh=Xp.split(".");for(const Xp of qh)if("*"!==Xp&&!/^[a-z0-9\-]+$/i.test(Xp))return!1;return!0}function uK(Xp,qh){const kX=Xp.toLowerCase().split("."),xf=qh.toLowerCase().split(".");if(xf.length<kX.length)return!1;for(;kX.length;){const Xp=kX.pop(),qh=xf.pop();if("*"!==Xp&&Xp!==qh)return!1}return!0}function kN(Xp){return Xp&&Xp.startsWith("file:///")}kX.parsedURLCache=new Map,kX.parseURL=tV,kX.getAbsoluteURL=oH,kX.isRelativeHrefOnAbsolutePath=Mp,kX.getURLHostOrProtocol=dp,kX.compareURLPatterns=hy,kX.isURLInList=Sm,kX.isURLMatched=SH,kX.isPDF=AB,kX.isURLEnabled=SJ,kX.isFullyQualifiedDomain=nt,kX.isFullyQualifiedDomainWildcard=ij,kX.fullyQualifiedDomainMatchesWildcard=uK,kX.isLocalFile=kN},{"./ipv6":34}],46:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.documentIsVisible=kX.removeDocumentVisibilityListener=kX.setDocumentVisibilityListener=void 0;let xf=null,aC=!document.hidden;const Md={capture:!0,passive:!0};function bC(){document.addEventListener("visibilitychange",xf,Md),window.addEventListener("pageshow",xf,Md),window.addEventListener("focus",xf,Md)}function tV(){document.removeEventListener("visibilitychange",xf,Md),window.removeEventListener("pageshow",xf,Md),window.removeEventListener("focus",xf,Md)}function oH(Xp){const qh=Boolean(xf);xf=()=>{document.hidden||(Mp(),Xp(),aC=!0)},qh||bC()}function Mp(){tV(),xf=null}function dp(){return aC}kX.setDocumentVisibilityListener=oH,kX.removeDocumentVisibilityListener=Mp,kX.documentIsVisible=dp},{}],47:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),Xp("../../../darkmode-core/src/js/content/content")},{"../../../darkmode-core/src/js/content/content":2}]},{},[47]);