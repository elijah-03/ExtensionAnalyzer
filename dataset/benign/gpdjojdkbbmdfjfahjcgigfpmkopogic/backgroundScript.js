(()=>{(()=>{var As={531:function(K,U){var v,X,H;(function(ee,f){if(!0)X=[K],v=f,H=typeof v=="function"?v.apply(U,X):v,H!==void 0&&(K.exports=H);else var W})(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:this,function(ee){var f,W;if(!((W=(f=globalThis.chrome)==null?void 0:f.runtime)!=null&&W.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser=="undefined"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const se="The message port closed before a response was received.",de=L=>{const re={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(re).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class fe extends WeakMap{constructor(g,d=void 0){super(d),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}const ye=l=>l&&typeof l=="object"&&typeof l.then=="function",ce=(l,g)=>(...d)=>{L.runtime.lastError?l.reject(new Error(L.runtime.lastError.message)):g.singleCallbackArg||d.length<=1&&g.singleCallbackArg!==!1?l.resolve(d[0]):l.resolve(d)},te=l=>l==1?"argument":"arguments",Oe=(l,g)=>function(O,...P){if(P.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${te(g.minArgs)} for ${l}(), got ${P.length}`);if(P.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${te(g.maxArgs)} for ${l}(), got ${P.length}`);return new Promise((b,D)=>{if(g.fallbackToNoCallback)try{O[l](...P,ce({resolve:b,reject:D},g))}catch(u){console.warn(`${l} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,u),O[l](...P),g.fallbackToNoCallback=!1,g.noCallback=!0,b()}else g.noCallback?(O[l](...P),b()):O[l](...P,ce({resolve:b,reject:D},g))})},pe=(l,g,d)=>new Proxy(g,{apply(O,P,b){return d.call(P,l,...b)}});let Z=Function.call.bind(Object.prototype.hasOwnProperty);const ne=(l,g={},d={})=>{let O=Object.create(null),P={has(D,u){return u in l||u in O},get(D,u,N){if(u in O)return O[u];if(!(u in l))return;let C=l[u];if(typeof C=="function")if(typeof g[u]=="function")C=pe(l,l[u],g[u]);else if(Z(d,u)){let $=Oe(u,d[u]);C=pe(l,l[u],$)}else C=C.bind(l);else if(typeof C=="object"&&C!==null&&(Z(g,u)||Z(d,u)))C=ne(C,g[u],d[u]);else if(Z(d,"*"))C=ne(C,g[u],d["*"]);else return Object.defineProperty(O,u,{configurable:!0,enumerable:!0,get(){return l[u]},set($){l[u]=$}}),C;return O[u]=C,C},set(D,u,N,C){return u in O?O[u]=N:l[u]=N,!0},defineProperty(D,u,N){return Reflect.defineProperty(O,u,N)},deleteProperty(D,u){return Reflect.deleteProperty(O,u)}},b=Object.create(l);return new Proxy(b,P)},oe=l=>({addListener(g,d,...O){g.addListener(l.get(d),...O)},hasListener(g,d){return g.hasListener(l.get(d))},removeListener(g,d){g.removeListener(l.get(d))}}),Se=new fe(l=>typeof l!="function"?l:function(d){const O=ne(d,{},{getContent:{minArgs:0,maxArgs:0}});l(O)}),ge=new fe(l=>typeof l!="function"?l:function(d,O,P){let b=!1,D,u=new Promise(I=>{D=function(V){b=!0,I(V)}}),N;try{N=l(d,O,D)}catch(I){N=Promise.reject(I)}const C=N!==!0&&ye(N);if(N!==!0&&!C&&!b)return!1;const $=I=>{I.then(V=>{P(V)},V=>{let ae;V&&(V instanceof Error||typeof V.message=="string")?ae=V.message:ae="An unexpected error occurred",P({__mozWebExtensionPolyfillReject__:!0,message:ae})}).catch(V=>{console.error("Failed to send onMessage rejected reply",V)})};return $(C?N:u),!0}),Be=({reject:l,resolve:g},d)=>{L.runtime.lastError?L.runtime.lastError.message===se?g():l(new Error(L.runtime.lastError.message)):d&&d.__mozWebExtensionPolyfillReject__?l(new Error(d.message)):g(d)},me=(l,g,d,...O)=>{if(O.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${te(g.minArgs)} for ${l}(), got ${O.length}`);if(O.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${te(g.maxArgs)} for ${l}(), got ${O.length}`);return new Promise((P,b)=>{const D=Be.bind(null,{resolve:P,reject:b});O.push(D),d.sendMessage(...O)})},Fe={devtools:{network:{onRequestFinished:oe(Se)}},runtime:{onMessage:oe(ge),onMessageExternal:oe(ge),sendMessage:me.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:me.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},Ee={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return re.privacy={network:{"*":Ee},services:{"*":Ee},websites:{"*":Ee}},ne(L,Fe,re)};ee.exports=de(chrome)}else ee.exports=globalThis.browser})}},Ue={};function De(K){var U=Ue[K];if(U!==void 0)return U.exports;var v=Ue[K]={exports:{}};return As[K].call(v.exports,v,v.exports,De),v.exports}var Sr={};(()=>{"use strict";var K=(e=>(e.PRODUCTION="production",e.DEVELOPMENT="development",e))(K||{}),U=(e=>(e.SAFARI="safari",e.CHROME="chrome",e.CHROME_GROWTH="chrome_growth",e.EDGE="edge",e.FIREFOX="firefox",e))(U||{}),v=(e=>(e[e.API_REQUEST=0]="API_REQUEST",e[e.LIFECYCLE_EVENT=1]="LIFECYCLE_EVENT",e))(v||{}),X=(e=>(e[e.SHOW_SIDEBAR_APP=0]="SHOW_SIDEBAR_APP",e[e.UNLOAD_SIDEBAR_APP=1]="UNLOAD_SIDEBAR_APP",e[e.SETUP_OATH_FLOW=2]="SETUP_OATH_FLOW",e[e.CHECK_OAUTH_STATE=3]="CHECK_OAUTH_STATE",e[e.KEEP_ALIVE_PING=4]="KEEP_ALIVE_PING",e))(X||{}),H=(e=>(e[e.TOGGLE_SIDEBAR_APP=0]="TOGGLE_SIDEBAR_APP",e[e.SHOW_SIDEBAR_APP=1]="SHOW_SIDEBAR_APP",e[e.UNLOAD_SIDEBAR_APP=2]="UNLOAD_SIDEBAR_APP",e[e.HANDLE_CONTEXT_MENU_SAVE_ACTION=3]="HANDLE_CONTEXT_MENU_SAVE_ACTION",e[e.KEEP_ALIVE_PONG=4]="KEEP_ALIVE_PONG",e))(H||{}),ee=(e=>(e[e.MOUNT_SAVEPICKER_APP=0]="MOUNT_SAVEPICKER_APP",e[e.MOUNT_SIDEBAR_APP=1]="MOUNT_SIDEBAR_APP",e))(ee||{}),f=(e=>(e[e.FETCH_CONFIG=0]="FETCH_CONFIG",e[e.FETCH_USER=1]="FETCH_USER",e[e.FETCH_BOARDS=2]="FETCH_BOARDS",e[e.FETCH_BOARD_SECTIONS=3]="FETCH_BOARD_SECTIONS",e[e.FETCH_EXPERIMENT=4]="FETCH_EXPERIMENT",e[e.CREATE_BOARD=5]="CREATE_BOARD",e[e.CREATE_BOARD_SECTION=6]="CREATE_BOARD_SECTION",e[e.CREATE_OR_REPIN_PIN=7]="CREATE_OR_REPIN_PIN",e[e.CREATE_LOGS=8]="CREATE_LOGS",e[e.LOG_EVENT=9]="LOG_EVENT",e[e.FETCH_EXTENSION_SETTINGS=10]="FETCH_EXTENSION_SETTINGS",e[e.UPDATE_EXTENSION_SETTINGS=11]="UPDATE_EXTENSION_SETTINGS",e[e.REPORT_BUG=12]="REPORT_BUG",e[e.FETCH_EXPERIENCES=13]="FETCH_EXPERIENCES",e[e.UPDATE_EXPERIENCES=14]="UPDATE_EXPERIENCES",e[e.REVOKE_OAUTH_TOKEN=15]="REVOKE_OAUTH_TOKEN",e[e.CLEAR_BACKGROUND_STATE=16]="CLEAR_BACKGROUND_STATE",e))(f||{}),W=(e=>(e.SUCCESS="success",e.WAITING="waiting",e))(W||{}),se=(e=>(e.PUBLIC="public",e.SECRET="secret",e))(se||{}),de=(e=>(e[e.SignIn=0]="SignIn",e[e.ImagePicker=1]="ImagePicker",e[e.BoardPicker=2]="BoardPicker",e[e.BoardCreate=3]="BoardCreate",e[e.BoardSectionPicker=4]="BoardSectionPicker",e[e.BoardSectionCreate=5]="BoardSectionCreate",e[e.PinCreate=6]="PinCreate",e[e.ReportBug=7]="ReportBug",e[e.Settings=8]="Settings",e[e.ErrorBannedDomain=9]="ErrorBannedDomain",e[e.ErrorNoPinDomain=10]="ErrorNoPinDomain",e))(de||{}),L=(e=>(e[e.FROM_CONTEXT_MENU=0]="FROM_CONTEXT_MENU",e[e.FROM_PRIMARY_ACTION_BUTTON=1]="FROM_PRIMARY_ACTION_BUTTON",e[e.FROM_SAVE_PICKER=2]="FROM_SAVE_PICKER",e))(L||{}),re=(e=>(e[e.BANNED_DOMAIN=0]="BANNED_DOMAIN",e[e.NO_PIN_DOMAIN=1]="NO_PIN_DOMAIN",e))(re||{});const fe="pinterest-save-extension",ye="https://help.pinterest.com/en/save-extension/oauth-access-token",ce=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK","UK"],te={[L.FROM_CONTEXT_MENU]:"context_menu",[L.FROM_PRIMARY_ACTION_BUTTON]:"pinterest_button",[L.FROM_SAVE_PICKER]:"hover"},Oe=2048,pe=1447723,Z=/^https?:\/\/([a-z]*\.|)pinterest\.(at|(c(a|h|l|o(\.(kr|uk)|m(|\.(au|mx)))))|d(e|k)|es|fr|i(e|t)|jp|nz|p(h|t)|se|ru)\//,ne="https://pinterest.com",oe=/pin\/(\d+|[0-9a-zA-Z\-_]{40,})(\/\?.*)?/,Se=new RegExp(Z.source+oe.source),ge=e=>e&&e.match(Se),Be={allowPinterestRepinning:!1,allowWhatsApp:!1},me=".pinterest.com",Fe={cctld:"/secure/autologin/"},Ee=10,l=250,g=null,d=/^https?:\/\//,O=["png","jpg","jpeg","gif","webp"],P=new RegExp(`^data:image\\/(${O.join("|")});base64`),b=new RegExp(`^image\\/(${O.join("|")})$`),D=/^blob:/,u={PIN_CREATE:1,VIEW:13,BOARD_CREATE:20,USER_FOLLOW:45,CLICK:101,SAVE_BROWSER_PIN_IMAGES_REQUESTED:14563,SAVE_BROWSER_PIN_IMAGES_FOUND:2900,SAVE_BROWSER_PIN_IMAGES_NOT_FOUND:2901,PIN_CREATE_FAILURE:7564,PIN_CREATE_ATTEMPTED:14564,USER_ACTIVE:7137,INSTALL:8219,BROWSER_SESSION:8221,UPDATE:8222,BROWSER_EXTENSION_BOOKMARKS_FOUND:9001,BROWSER_EXTENSION_BOOKMARKS_CREATE_SUCCESS:9002,OFFSITE_SAVE_ENTER:14703,OFFSITE_SAVE_BOARDS_LOADED:15401,OFFSITE_SAVE_BOARDS_NOT_LOADED:15402,USER_LOGIN_SUCCESS:38,USER_LOGIN_FAILED:39,USER_LOGIN_ATTEMPT:50,USER_LOGOUT_SUCCESS:8112},N={BOARD_PICKER:21,VISUAL_SEARCH:43,BROWSER_EXTENSION:192,IMAGE_PICKER:268,CREATE_BOARD:269,PIN_CREATE_SUCCESS:270,FOLLOW_FROM_SAVE:271,FOLLOW_FROM_SAVE_SUCCESS:272,BOARD_SECTION_CREATE:274,BOARD_SECTION_PICKER:275,BROWSER_EXTENSION_OPTIONS:276,HOVER_BOARD_OPENER:277,HOVER_BOARD_PICKER:278,VISUAL_SEARCH_RESULTS:279,BROWSER_EXTENSION_REPORT_BUG:280,BOARD_PICKER_ALL_BOARDS:3989},C={PIN_BOARD:5,BOARD_COVER:36,BOARD_PICKER:67,CREATE_BUTTON:44,PIN_SAVE_BUTTON:48,NEXT_BUTTON:96,SECTION_COVER:11854,SAVE_BUTTON:12018,VISIT_BUTTON:12796,PRIMARY_ACTION_BUTTON:13004,SHARE_EXTENSION_IMAGE:701,PROFILE_AVATAR:1242},$={BROWSER_EXTENSION:8},I={OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:7},V={VIEWING_IPS:0,FEATURE_ISSUE:1,PUBLISH_ISSUE:2,USER_COMPREHENSION:3,OTHER:4,BROWSER_EXTENSION_ISSUE:5};function ae(){return[1e7,1e3,4e3,8e3,1e11].join("").replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}var T=De(531),us=Object.defineProperty,_s=Object.defineProperties,ds=Object.getOwnPropertyDescriptors,Me=Object.getOwnPropertySymbols,fs=Object.prototype.hasOwnProperty,Os=Object.prototype.propertyIsEnumerable,Le=(e,s,r)=>s in e?us(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,z=(e,s)=>{for(var r in s||(s={}))fs.call(s,r)&&Le(e,r,s[r]);if(Me)for(var r of Me(s))Os.call(s,r)&&Le(e,r,s[r]);return e},Ve=(e,s)=>_s(e,ds(s)),He=(e,s,r)=>new Promise((t,o)=>{var a=n=>{try{i(r.next(n))}catch(E){o(E)}},A=n=>{try{i(r.throw(n))}catch(E){o(E)}},i=n=>n.done?t(n.value):Promise.resolve(n.value).then(a,A);i((r=r.apply(e,s)).next())});const ps={[I.OTHER]:"xx",[I.CHROME]:"cr",[I.SAFARI]:"sf",[I.IE]:"ie",[I.FIREFOX]:"ff",[I.OPERA]:"op",[I.EDGE]:"ms"};function Ss(){const e=navigator.userAgent.toLowerCase();return e.indexOf("edge")>-1||e.indexOf("edg")>-1?I.EDGE:e.indexOf("trident")>-1?I.IE:e.indexOf("firefox")>-1?I.FIREFOX:e.indexOf("opr")>-1?I.OPERA:e.indexOf("chrome")>-1?I.CHROME:e.indexOf("safari")>-1?I.SAFARI:I.OTHER}const Ge=["config","experiences","extensionSettings","requests","userToken","user","boards","boardSections"],Xe=Ss(),We={config:{isAuthenticated:!1,unauthId:ae(),extensionVersion:`${ps[Xe]}${T.runtime.getManifest().version}`,browserType:Xe,buildTarget:"chrome"},experiences:{settingsEduLastSeen:0},extensionSettings:{},requests:{},userToken:{},user:{},boards:[],boardSections:{}};function hs(e){let s=e;const r=()=>s,t=a=>He(this,null,function*(){return yield T.storage.local.set(z({},a)),s=z(z({},s),a),s});return{getBackgroundScriptState:r,setBackgroundScriptState:t,clearBackgroundScriptState:()=>He(this,null,function*(){const a=z({},s.experiences),A=z({},s.extensionSettings),i=Ve(z({},e),{experiences:a,extensionSettings:A});yield T.storage.local.clear(),yield t(i)})}}const{getBackgroundScriptState:S,setBackgroundScriptState:x,clearBackgroundScriptState:je}=hs(We);function Ts(e){const s={};T.storage.local.get(Ge).then(r=>{for(const t of Ge){const o=r[t];o&&(t==="config"?s[t]=Ve(z({},o),{unauthId:We.config.unauthId}):s[t]=o)}T.storage.local.set(z({},s)).then(()=>{x(s),e()})})}var Is=Object.defineProperty,Ps=Object.defineProperties,Cs=Object.getOwnPropertyDescriptors,Ke=Object.getOwnPropertySymbols,vs=Object.prototype.hasOwnProperty,xs=Object.prototype.propertyIsEnumerable,$e=(e,s,r)=>s in e?Is(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,ze=(e,s)=>{for(var r in s||(s={}))vs.call(s,r)&&$e(e,r,s[r]);if(Ke)for(var r of Ke(s))xs.call(s,r)&&$e(e,r,s[r]);return e},Ye=(e,s)=>Ps(e,Cs(s)),q=(e,s,r)=>new Promise((t,o)=>{var a=n=>{try{i(r.next(n))}catch(E){o(E)}},A=n=>{try{i(r.throw(n))}catch(E){o(E)}},i=n=>n.done?t(n.value):Promise.resolve(n.value).then(a,A);i((r=r.apply(e,s)).next())});function Je(){return q(this,null,function*(){const{config:e}=S();yield x({config:Ye(ze({},e),{isAuthenticated:!0})})})}function Rs(e){return q(this,null,function*(){const s=new TextEncoder().encode(e.replace(/"/g,"")),r=yield crypto.subtle.digest("SHA-512",s);return Array.from(new Uint8Array(r)).map(a=>a.toString(16).padStart(2,"0")).join("")})}function Ze(){return q(this,null,function*(){const e=yield T.cookies.getAll({domain:me}),s=e.find(a=>a.name==="_auth"),r=s==null?void 0:s.value,t=e.find(a=>a.name==="_pinterest_sess"),o=t==null?void 0:t.value;return{authCookieValue:r,sessionCookieValue:o}})}function he(){return q(this,null,function*(){const{authCookieValue:e,sessionCookieValue:s}=yield Ze();if(!!(e==="1"&&s)){const t=yield Rs(s);yield x({userToken:{token:t,sessionCookieValue:s}}),yield Je()}})}function qe(){return q(this,null,function*(){const{userToken:{sessionCookieValue:e}={}}=S(),{authCookieValue:s,sessionCookieValue:r}=yield Ze();return s==="1"&&r===e})}function Ns(){return q(this,null,function*(){yield je(),yield he(),yield ie({action:f.FETCH_USER})})}function bs(){const{config:e,userToken:{token:s}={}}=S();s&&x({userToken:{token:s,sessionCookieValue:""},config:Ye(ze({},e),{isAuthenticated:!0})})}var ws=Object.defineProperty,ks=Object.defineProperties,Us=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,Ds=Object.prototype.hasOwnProperty,ys=Object.prototype.propertyIsEnumerable,es=(e,s,r)=>s in e?ws(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,Ae=(e,s)=>{for(var r in s||(s={}))Ds.call(s,r)&&es(e,r,s[r]);if(Qe)for(var r of Qe(s))ys.call(s,r)&&es(e,r,s[r]);return e},Te=(e,s)=>ks(e,Us(s)),Bs=(e,s,r)=>new Promise((t,o)=>{var a=n=>{try{i(r.next(n))}catch(E){o(E)}},A=n=>{try{i(r.throw(n))}catch(E){o(E)}},i=n=>n.done?t(n.value):Promise.resolve(n.value).then(a,A);i((r=r.apply(e,s)).next())});const Fs=e=>{let s="";return e&&(s=Object.entries(e).map(([r,t])=>`${r}=${t}`).join("&")),s},Y=function(){const e=({method:r,token:t,formData:o,buildTarget:a})=>{const{language:A}=navigator,i={"Accept-Language":A,charset:"UTF-8"};return a===U.SAFARI?t&&(i.Authorization=`Bearer ${t}`):(i.Accept="application/json",i["X-Pinterest-App-Type-Detailed"]="8",i["X-Client-ID"]="1447278",t&&(i["X-Request-Forgery-Token"]=t)),Ae({method:r,headers:i,credentials:a===U.SAFARI?"omit":"include"},o&&{body:o})};return{makeRequest:r=>Bs(this,[r],function*({subDomain:t="api",path:o,params:a,method:A,formData:i}){const{userToken:n,config:E}=S(),F=Fs(a),{buildTarget:R}=E,{token:y}=n,j=e({method:A,token:y,formData:i,buildTarget:R}),c=`https://${t}.pinterest.com/v3${o}?${F}`;try{const m=yield fetch(c,j),_=yield m.json();return m.status===200?{bookmark:_.bookmark,data:_.data}:(y&&(m.status===401||m.status===403)&&(U.SAFARI==="chrome"?yield x({config:Te(Ae({},E),{isAuthenticated:!1}),userToken:{token:"",sessionCookieValue:""}}):(yield qe())&&(yield x({config:Te(Ae({},E),{isAuthenticated:!1}),userToken:Te(Ae({},n),{isInvalidToken:!0})}))),{error:_.message})}catch(m){return{error:m instanceof Error?m.message:String(m)}}})}}();function Ms(e){const{user:{gatekeeper_experiments:s={}}={}}=S(),r=s[e]||{},t=r!=null&&r.group?r.group:"";return ss(t)}function ss(e){const s=e.startsWith("enabled")||e.startsWith("employees");return{group:e,anyEnabled:s}}var Ls=Object.defineProperty,Vs=Object.defineProperties,Hs=Object.getOwnPropertyDescriptors,rs=Object.getOwnPropertySymbols,Gs=Object.prototype.hasOwnProperty,Xs=Object.prototype.propertyIsEnumerable,ts=(e,s,r)=>s in e?Ls(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,w=(e,s)=>{for(var r in s||(s={}))Gs.call(s,r)&&ts(e,r,s[r]);if(rs)for(var r of rs(s))Xs.call(s,r)&&ts(e,r,s[r]);return e},G=(e,s)=>Vs(e,Hs(s)),ns=(e,s,r)=>new Promise((t,o)=>{var a=n=>{try{i(r.next(n))}catch(E){o(E)}},A=n=>{try{i(r.throw(n))}catch(E){o(E)}},i=n=>n.done?t(n.value):Promise.resolve(n.value).then(a,A);i((r=r.apply(e,s)).next())});const Ws=500,js=50,Ks=50;var $s=(e=>(e[e.USER=6e5]="USER",e[e.BOARDS=6e5]="BOARDS",e[e.BOARD_SECTIONS=6e5]="BOARD_SECTIONS",e[e.GATEKEEPER=6e5]="GATEKEEPER",e))($s||{});const Ie=[f.FETCH_CONFIG,f.FETCH_EXTENSION_SETTINGS,f.UPDATE_EXTENSION_SETTINGS,f.CREATE_LOGS],Pe=e=>ns(void 0,[e],function*({path:s,params:r,prevResponse:t,method:o}){const a=yield Y.makeRequest({path:s,params:r,method:o});if(a.error)return a;const A=G(w({},t),{data:[...t.data||[],...a.data||[]]});return a.bookmark?Pe({path:s,params:G(w({},r),{bookmark:a.bookmark}),prevResponse:A,method:o}):A}),ie=e=>ns(void 0,[e],function*({action:s,actionOptions:r={},payload:t={}}){var o,a,A,i;const{disableCache:n=!1}=r;if(!Ie.includes(s)){const{config:{isAuthenticated:c}}=S();if(!c)return{error:"User not authenticated"}}!Ie.includes(s)&&U.SAFARI!=="chrome"&&((yield qe())||(yield Ns()));const{requests:E,userToken:{isInvalidToken:F}}=S();if(!Ie.includes(s)&&F)return{error:"User token is invalid"};const R=Date.now(),y=(c,m)=>{c.forEach(_=>{if(!(_ in m))throw new Error(`Field '${_}' is missing from ${f[s]}.`)})},j=c=>{var m;return n===!0||(((m=E==null?void 0:E[c])==null?void 0:m.expires)||0)<R};switch(s){case f.FETCH_CONFIG:{const{config:c}=S();return{data:c}}case f.FETCH_EXTENSION_SETTINGS:{const{extensionSettings:c}=S();return{data:c}}case f.UPDATE_EXTENSION_SETTINGS:{const{extensionSettings:c}=S(),m=w(w({},c),t);return yield x({extensionSettings:m}),{data:m}}case f.FETCH_EXPERIMENT:{y(["experimentName"],t);const{experimentName:c,dangerousOptions:m}=t,{user:_}=S(),p="/gatekeeper/activate/",h=`${p}${c}`;if(m!=null&&m.dangerouslySkipActivation||!j(h))return{data:Ms(c)};const B={experiment_data:JSON.stringify({key:c})},M=yield Y.makeRequest({params:B,path:p,method:"PUT"}),J=((o=M==null?void 0:M.data)==null?void 0:o.group)||"",xe=ss(J);if(M!=null&&M.data){const{gatekeeper_experiments:Q}=_||{};yield x({user:G(w({},_),{gatekeeper_experiments:G(w({},Q),{[c]:{key:c,group:J}})})})}return yield x({requests:G(w({},E),{[h]:{expires:R+6e5}})}),{data:xe}}case f.FETCH_USER:{const c="/users/me/";if(!j(c)){const{user:p}=S();if(p!=null&&p.id)return{data:p}}const m={add_fields:["user.ads_customize_from_conversion","user.personalize_from_offsite_browsing","user.country"].join(",")},_=yield Y.makeRequest({path:c,params:m,method:"GET"});return(a=_.data)!=null&&a.id&&(yield x({user:_.data,requests:G(w({},E),{[c]:{expires:R+6e5}})})),_}case f.FETCH_BOARDS:{const c="/users/me/boards/feed/";if(!j(c)){const{boards:p=[]}=S();return{data:p}}const m={page_size:250,filter:"all",sort:"last_pinned_to",add_fields:["board.image_cover_url","board.privacy","board.collaborated_by_me","board.section_count"].join(",")},_=yield Pe({path:c,params:m,prevResponse:{data:[]},method:"GET"});return _.data&&(yield x({boards:_.data,requests:G(w({},E),{[c]:{expires:R+6e5}})})),_}case f.FETCH_BOARD_SECTIONS:{y(["boardId"],t);const{boardId:c}=t,{boardSections:m}=S(),_=`/board/${c}/sections/`;if(!j(_))return{data:(m==null?void 0:m[c])||[]};const p=yield Pe({path:_,params:{},prevResponse:{data:[]},method:"GET"});return p.data&&(yield x({boardSections:G(w({},m),{[c]:p.data}),requests:G(w({},E),{[_]:{expires:R+6e5}})})),p}case f.CREATE_BOARD:{y(["name","secret"],t);const{name:c,secret:m}=t,_="/boards/",p={name:encodeURIComponent(c.substring(0,js)),privacy:m?se.SECRET:se.PUBLIC},h=yield Y.makeRequest({path:_,params:p,method:"PUT"});if((A=h==null?void 0:h.data)!=null&&A.id){const{boards:B=[]}=S();yield x({boards:[h.data,...B]})}return h}case f.CREATE_BOARD_SECTION:{y(["title","boardId"],t);const{title:c,boardId:m}=t,_=`/board/${m}/sections/`,p={title:encodeURIComponent(c.substring(0,Ks))},h=yield Y.makeRequest({path:_,params:p,method:"PUT"});if(h!=null&&h.data){const{boardSections:B}=S(),M=(B==null?void 0:B[m])||[],J=[h.data,...M];yield x({boardSections:G(w({},B),{[m]:J})})}return h}case f.CREATE_OR_REPIN_PIN:{y(["boardId","pinUrl"],t);const{description:c,boardId:m,boardSectionId:_,pinUrl:p,imageBase64:h,isMetadataRetention:B,url:M,metadata:J,color:xe="#ffffff"}=t;let Q,Re;const Or=M&&ge(M)&&U.SAFARI!=="chrome",k=new FormData;k.set("board_id",m),_&&k.set("section",_),Or?(Q=`/pins/${M.split("/").slice(-2)[0]}/repin/`,Re="POST"):(Q="/pins/",Re="PUT",k.set("method","extension"),k.set("add_fields","user.is_partner"),c&&k.set("description",c.substring(0,Ws)),M&&k.set("source_url",M.substring(0,Oe)),J&&k.set("found_metadata",J),p===""?(k.set("isGeneratedTextImage","true"),k.set("color",xe)):B?(h&&k.set("image_base64",h),p&&!p.match(P)&&k.set("image_url",p)):h?k.set("image_base64",h):k.set("image_url",p));const Ne=yield Y.makeRequest({path:Q,method:Re,formData:k});if((i=Ne==null?void 0:Ne.data)!=null&&i.id){const{boards:be=[]}=S(),we=be.find(ke=>ke.id===m);if(we!=null&&we.id){const ke=be.filter(pr=>pr.id!==m);yield x({boards:[we,...ke]})}}return Ne}case f.CREATE_LOGS:{y(["eventBatchJson"],t);const{eventBatchJson:c}=t,m="/callback/event/",_=new FormData;return _.set("isJSONData","true"),_.set("event_batch_json",c),yield Y.makeRequest({subDomain:"trk",path:m,method:"POST",formData:_})}case f.REPORT_BUG:{y(["website"],t);const{description:c,website:m}=t,{config:{extensionVersion:_}}=S(),p="/storypins/feedback/",h={story_pin_feedback:JSON.stringify({feedback_types:[],feedback:"[BROWSER_EXTENSION] url:"+m+" version: "+_+" text:"+c,satisfaction:1})};return yield Y.makeRequest({path:p,params:h,method:"POST"})}case f.FETCH_EXPERIENCES:{const{experiences:c}=S();return{data:c}}case f.UPDATE_EXPERIENCES:{const{experiences:c}=S(),m=w(w({},c),t);return yield x({experiences:m}),{data:m}}case f.CLEAR_BACKGROUND_STATE:return yield je(),{data:"OK"};default:throw new Error("API action not found")}});var zs=Object.defineProperty,os=Object.getOwnPropertySymbols,Ys=Object.prototype.hasOwnProperty,Js=Object.prototype.propertyIsEnumerable,as=(e,s,r)=>s in e?zs(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,ue=(e,s)=>{for(var r in s||(s={}))Ys.call(s,r)&&as(e,r,s[r]);if(os)for(var r of os(s))Js.call(s,r)&&as(e,r,s[r]);return e};const Zs=e=>{const{type:s,action:r,payload:t,onSuccess:o,onError:a}=e;runtime.sendMessage({type:s,action:r,payload:t}).then(A=>{A!=null&&A.error?a&&a(A.error):o&&o(A)},A=>{a&&a(A)})},Ce=({elementObjectTypes:e,elementValue:s})=>{var r;return((r=Object.entries(e).find(([,t])=>t===s))==null?void 0:r[0])||""},is=({eventType:e,viewType:s,auxData:r,element:t,objectIdStr:o})=>{NodeEnvironment.DEVELOPMENT==="production"&&debug(`[CONTEXT_LOG] event:${Ce({elementObjectTypes:EventTypes,elementValue:e})} view:${Ce({elementObjectTypes:ViewTypes,elementValue:s})} element:${Ce({elementObjectTypes:ElementTypes,elementValue:t})} auxData:${r?JSON.stringify(r):""} pinId:${o||""}`);for(const a in r)(typeof r[a]=="number"||typeof r[a]=="boolean")&&(r[a]=String(r[a]));Zs({type:MessageType.API_REQUEST,action:ApiRequestActionType.LOG_EVENT,payload:ue(ue(ue(ue({eventType:e},s&&{viewType:s}),t&&{element:t}),o&&{objectIdStr:o}),r&&{auxData:r})})},hr=({eventType:e,viewType:s,auxData:r,element:t,objectIdStr:o})=>{is({eventType:e,viewType:s,element:t,auxData:r,objectIdStr:o})},Tr=({eventType:e,viewType:s,auxData:r,element:t,objectIdStr:o})=>{is({eventType:e,viewType:s,element:t,auxData:r,objectIdStr:o})},le=({tab:e,type:s,action:r,payload:t})=>{T.tabs.sendMessage(e,{type:s,action:r,payload:t})},Ir=({element:e,action:s,payload:r})=>{e.postMessage({target:PINTEREST_SAVE_EXTENSION_ID,action:s,payload:r},"*")};var qs=Object.defineProperty,Qs=Object.defineProperties,er=Object.getOwnPropertyDescriptors,ls=Object.getOwnPropertySymbols,sr=Object.prototype.hasOwnProperty,rr=Object.prototype.propertyIsEnumerable,cs=(e,s,r)=>s in e?qs(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,_e=(e,s)=>{for(var r in s||(s={}))sr.call(s,r)&&cs(e,r,s[r]);if(ls)for(var r of ls(s))rr.call(s,r)&&cs(e,r,s[r]);return e},tr=(e,s)=>Qs(e,er(s)),gs=(e,s,r)=>new Promise((t,o)=>{var a=n=>{try{i(r.next(n))}catch(E){o(E)}},A=n=>{try{i(r.throw(n))}catch(E){o(E)}},i=n=>n.done?t(n.value):Promise.resolve(n.value).then(a,A);i((r=r.apply(e,s)).next())});const nr=20,or=60*1e3;function ar({logQueue:e,unauthId:s,userId:r}){e.forEach(t=>{t.unauthId===s&&(t.userId=r,delete t.unauthId)})}function ir(){let e=[],s=null;const r=a=>gs(this,[a],function*({eventType:A,viewType:i,element:n,objectIdStr:E,auxData:F}){const{user:{id:R}={},config:{extensionVersion:y,browserType:j,unauthId:c,isAuthenticated:m}}=S(),_=Date.now(),p=$.BROWSER_EXTENSION;if(!y||!j)throw new Error("Missing new log event data");const h=tr(_e(_e({eventType:A,viewType:i,element:n},E&&{objectIdStr:E}),F&&typeof F=="object"&&{auxData:F}),{time:_*1e6,app:p,appVersion:y,browser:j});(i||n)&&(h.context=_e(_e({},i&&{viewType:i}),n&&{element:n}));let B=!1;m&&R?(h.userId=R,e.length>0&&e[e.length-1].unauthId===c&&(ar({logQueue:e,unauthId:c,userId:R}),B=!0)):h.unauthId=c,e.push(h),e.length>=nr||B?yield o():t()}),t=()=>{s&&clearTimeout(s),s=setTimeout(o,or)},o=()=>gs(this,null,function*(){if(e.length>0){const a=Date.now()*1e6,A={eventBatchJson:JSON.stringify({reportTime:a,events:[...e]})};e=[];const i=yield ie({action:f.CREATE_LOGS,payload:A});!i||"error"in i&&i.error}t()});return t(),{contextLogEvent:r}}const{contextLogEvent:ve}=ir();var lr=(e,s,r)=>new Promise((t,o)=>{var a=n=>{try{i(r.next(n))}catch(E){o(E)}},A=n=>{try{i(r.throw(n))}catch(E){o(E)}},i=n=>n.done?t(n.value):Promise.resolve(n.value).then(a,A);i((r=r.apply(e,s)).next())});function cr(e){if(e!=null&&e.id){const{config:s}=S();le({tab:e.id,type:v.LIFECYCLE_EVENT,action:H.TOGGLE_SIDEBAR_APP,payload:{isAuthenticated:!!(s!=null&&s.isAuthenticated)}})}}const gr=(e,s)=>lr(void 0,null,function*(){var r,t,o,a,A,i;const{type:n,action:E,payload:F}=e;switch(n){case v.API_REQUEST:switch(E){case f.LOG_EVENT:if((r=s==null?void 0:s.tab)!=null&&r.id)return ve(F),{data:{status:W.SUCCESS}};break;default:return yield ie({action:E,payload:F})}break;case v.LIFECYCLE_EVENT:switch(E){case X.SHOW_SIDEBAR_APP:(t=s==null?void 0:s.tab)!=null&&t.id&&le({tab:s.tab.id,type:v.LIFECYCLE_EVENT,action:H.SHOW_SIDEBAR_APP,payload:F});break;case X.UNLOAD_SIDEBAR_APP:(o=s==null?void 0:s.tab)!=null&&o.id&&le({tab:s.tab.id,type:v.LIFECYCLE_EVENT,action:H.UNLOAD_SIDEBAR_APP});break;case X.SETUP_OATH_FLOW:{const{accessToken:R}=F;return(a=s==null?void 0:s.tab)!=null&&a.id&&R?(yield x({userToken:{token:R,sessionCookieValue:""}}),Je(),{data:{status:W.SUCCESS}}):{error:"Failed to finish oAuth flow"}}case X.CHECK_OAUTH_STATE:if((A=s==null?void 0:s.tab)!=null&&A.id){const{config:{isAuthenticated:R}}=S();return{data:{status:R?W.SUCCESS:W.WAITING}}}break;case X.KEEP_ALIVE_PING:(i=s==null?void 0:s.tab)!=null&&i.id&&le({tab:s.tab.id,type:v.LIFECYCLE_EVENT,action:H.KEEP_ALIVE_PONG,payload:{now:Date.now()}});break;default:break}break;default:break}}),mr=(e,s)=>{s!=null&&s.id&&le({tab:s.id,type:v.LIFECYCLE_EVENT,action:H.HANDLE_CONTEXT_MENU_SAVE_ACTION})},ms=()=>{const{user:{id:e=null,country:s=null,ads_customize_from_conversion:r=!1,personalize_from_offsite_browsing:t=!1}={}}=S();e&&r&&t&&s&&!ce.includes(s)?T.declarativeNetRequest.updateSessionRules({removeRuleIds:[1002],addRules:[{id:1002,priority:1,action:{type:"redirect",redirect:{transform:{queryTransform:{addOrReplaceParams:[{key:"beuid",value:e}]}}}},condition:{urlFilter:"*://ct.pinterest.com/*"}}]}):T.declarativeNetRequest.updateSessionRules({removeRuleIds:[1002]})};function Er(){const{config:{extensionVersion:e}}=S(),s=`https://www.pinterest.com/_/_/about/browser-button/uninstall/?xv=${e}`;T.runtime.setUninstallURL(s)}const Ar=({previousVersion:e,reason:s})=>{const{config:{extensionVersion:r}}=S();s==="install"?ve({eventType:u.INSTALL,viewType:N.BROWSER_EXTENSION,auxData:{app_version:r}}):s==="update"&&ve({eventType:u.UPDATE,viewType:N.BROWSER_EXTENSION,auxData:{app_ver:e||"",app_version:r}})};function Es(){const{config:{isAuthenticated:e}}=S();e||he()}const ur="contextMenuSave";function _r(){T.contextMenus.removeAll().then(()=>{T.contextMenus.create({id:ur,title:T.i18n.getMessage("contextMenuSaveActionText"),contexts:["image"]},()=>{T.contextMenus.onClicked.addListener(mr)})})}var dr=(e,s,r)=>new Promise((t,o)=>{var a=n=>{try{i(r.next(n))}catch(E){o(E)}},A=n=>{try{i(r.throw(n))}catch(E){o(E)}},i=n=>n.done?t(n.value):Promise.resolve(n.value).then(a,A);i((r=r.apply(e,s)).next())});function fr(){U.SAFARI!=="chrome"&&dr(this,null,function*(){yield he(),yield ie({action:f.FETCH_USER}),T.tabs.onActivated.addListener(Es),T.windows.onFocusChanged.addListener(Es)}),Ts(()=>{U.SAFARI==="chrome"&&(bs(),ie({action:f.FETCH_USER}))}),T.runtime.onInstalled.addListener(Ar),T.action.onClicked.addListener(cr),T.runtime.onMessage.addListener(gr),T.tabs.onActivated.addListener(ms),T.windows.onFocusChanged.addListener(ms),_r(),Er()}fr()})()})();})();
