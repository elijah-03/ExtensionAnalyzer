(function(){"use strict";(function(e){try{if(typeof document<"u")if(window.location.href.includes("chrome-extension://")){const t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)}else{const t="__wps-translate-entry-content-css__";window[t]||(window[t]=[]),window[t].push(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})('@charset "UTF-8";.continue-translate-dialog[data-v-96293be0]{position:fixed;z-index:2147483647;bottom:32px;width:348px;padding:24px;font-weight:400;background-color:#fff;color:#000;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 24px #00000014;-webkit-user-select:none;user-select:none}[dir=ltr] .continue-translate-dialog[data-v-96293be0]{right:32px}[dir=rtl] .continue-translate-dialog[data-v-96293be0]{left:32px}.continue-translate-dialog .dialog-header[data-v-96293be0]{display:flex;gap:12px;align-items:center;margin-bottom:16px}.continue-translate-dialog .dialog-header .header-logo[data-v-96293be0]{display:flex;flex:1;align-items:center;gap:12px}.continue-translate-dialog .dialog-header .header-logo .logo-icon[data-v-96293be0]{height:24px;width:24px;border-radius:6px}.continue-translate-dialog .dialog-header .header-logo .logo-name[data-v-96293be0]{font-weight:600;font-size:16px;line-height:24px}.continue-translate-dialog .dialog-content[data-v-96293be0]{margin-bottom:20px}.continue-translate-dialog .dialog-content .description[data-v-96293be0]{font-size:14px;line-height:20px;color:#000000e6;margin:0 0 16px}.continue-translate-dialog .dialog-content .duration-selector[data-v-96293be0]{display:flex;align-items:center;justify-content:space-between;gap:16px}.continue-translate-dialog .dialog-content .duration-selector .duration-label[data-v-96293be0]{font-size:14px;font-weight:500;line-height:20px;color:#000}.continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0]{flex:1;min-width:160px;-webkit-user-select:none;user-select:none}.continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input{border-radius:8px}[dir=ltr] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input{padding-left:12px}[dir=rtl] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input{padding-right:12px}[dir=ltr] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input .select-label{text-align:right}[dir=rtl] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-input .select-label{text-align:left}.continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-96293be0] .select-options{height:fit-content;border-radius:8px}.continue-translate-dialog .dialog-footer .confirm-btn[data-v-96293be0]{height:48px;border-radius:12px;font-size:16px;font-weight:600}.hover-ball-onboarding-container[data-v-e0b307f8]{position:absolute;display:flex;flex-direction:column;bottom:-30px;border-radius:12px;background-color:#fff;width:300px;border:1px solid rgb(224,224,224);box-shadow:0 12px 32px #00000014;transition:none}.hover-ball-onboarding-container .hover-ball-onboarding-close[data-v-e0b307f8]{position:absolute;top:8px}[dir=ltr] .hover-ball-onboarding-container .hover-ball-onboarding-close[data-v-e0b307f8]{right:8px}[dir=rtl] .hover-ball-onboarding-container .hover-ball-onboarding-close[data-v-e0b307f8]{left:8px}.hover-ball-onboarding-container .hover-ball-onboarding-image[data-v-e0b307f8]{height:180px;border-radius:12px 12px 0 0;background-repeat:no-repeat;background-position:center;background-size:contain}.hover-ball-onboarding-container .hover-ball-onboarding-content[data-v-e0b307f8]{margin:16px 20px}.hover-ball-onboarding-container .hover-ball-onboarding-content .hover-ball-onboarding-title[data-v-e0b307f8]{font-weight:500;font-size:16px;line-height:24px;text-align:center;color:#000000e6}.hover-ball-onboarding-container .hover-ball-onboarding-content .hover-ball-onboarding-desc[data-v-e0b307f8]{font-weight:400;font-size:14px;line-height:22px;text-align:center;color:#333333e6;margin-top:8px}.hover-ball-onboarding-container .hover-ball-onboarding-content .hover-ball-onboarding-button[data-v-e0b307f8]{margin-top:24px}.onetap-login-tip[data-v-2a3e1960]{position:relative;min-width:320px;background:#fff;border:1px solid rgb(224,224,224);border-radius:16px;padding:20px 24px 8px;font-weight:400;font-size:14px;cursor:auto;text-shadow:none;box-shadow:0 12px 32px #00000014}.title[data-v-2a3e1960]{line-height:20px;color:#000000e6}.description[data-v-2a3e1960]{display:flex;align-items:center;margin-bottom:16px;line-height:20px;gap:4px}.description-text[data-v-2a3e1960]{color:#0009}.brand-container[data-v-2a3e1960]{display:flex;align-items:center;gap:4px}.brand-icon[data-v-2a3e1960]{width:16px;height:16px}.brand-text[data-v-2a3e1960]{color:#000000e6}.login-button[data-v-2a3e1960]{display:flex;align-items:center;border-radius:8px;padding:12px;gap:8px;cursor:pointer;white-space:nowrap;color:#000000e6}.login-button[data-v-2a3e1960]:hover{background:#f7f7f7}.login-button[data-v-2a3e1960]:active,.login-button.active[data-v-2a3e1960]{background:#e0e0e0}.login-button .login-button-text[data-v-2a3e1960]{flex:1}.login-button .login-button-icon[data-v-2a3e1960]{width:24px;height:24px}.google-login[data-v-2a3e1960]{border:1px solid rgb(218,218,218);font-weight:600;margin-bottom:4px}[data-v-2a3e1960] .icon-button{width:24px;height:24px}.confirm-container[data-v-a3738775]{display:flex;position:relative;z-index:1;flex-direction:column;width:258px;border-radius:12px;border:1px solid rgb(224,224,224);background-color:#fff;box-shadow:0 12px 32px #00000014;cursor:default;-webkit-user-select:select;user-select:select;padding-top:8px;padding-bottom:16px}.confirm-container .confirm-header[data-v-a3738775]{display:flex;justify-content:space-between;align-items:center}[dir=ltr] .confirm-container .confirm-header[data-v-a3738775]{padding-left:24px;padding-right:8px}[dir=rtl] .confirm-container .confirm-header[data-v-a3738775]{padding-right:24px;padding-left:8px}.confirm-container .confirm-header .title[data-v-a3738775]{font-weight:500;font-size:12px;color:#000;opacity:.9}.confirm-container .confirm-content[data-v-a3738775]{display:flex;flex:1;flex-direction:column;gap:10;font-weight:400;font-size:12px;color:#333;margin-top:14px;margin-bottom:12px}[dir=ltr] .confirm-container .confirm-content[data-v-a3738775]{padding-left:24px;padding-right:16px}[dir=rtl] .confirm-container .confirm-content[data-v-a3738775]{padding-right:24px;padding-left:16px}.confirm-container .confirm-content[data-v-a3738775] .base-radio{flex-direction:column;align-items:start}.confirm-container .confirm-content[data-v-a3738775] .base-radio .radio-container .radio{width:12px;height:12px}.confirm-container .confirm-content[data-v-a3738775] .base-radio .radio-container .radio.checked:after{width:8px;height:8px;margin:1px}.confirm-container .confirm-content .settings-can-be-re-enable[data-v-a3738775]{font-size:12px;color:#0009;margin-top:16px}.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link[data-v-a3738775]{cursor:pointer;-webkit-user-select:none;user-select:none;font-size:12px;font-weight:600;color:#2962ff}.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link[data-v-a3738775]:hover{opacity:.8}.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link[data-v-a3738775]:active,.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link.active[data-v-a3738775]{color:#1c4eda;opacity:1}.confirm-container .confirm-footer[data-v-a3738775]{display:flex;justify-content:flex-end}[dir=ltr] .confirm-container .confirm-footer[data-v-a3738775]{padding-right:16px}[dir=rtl] .confirm-container .confirm-footer[data-v-a3738775]{padding-left:16px}.confirm-container .confirm-footer .confirm-button[data-v-a3738775]{height:32px;border-radius:8px;font-size:12px;line-height:100%}.hover-ball-container[data-v-c972370c]{position:fixed;z-index:2147483647;width:36px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none}.hover-ball-container .gift-ball-container[data-v-c972370c]{display:flex;justify-content:center;align-items:center;cursor:pointer;width:36px;height:36px;background:#fff;border-radius:24px;margin-bottom:4px;border:1px solid rgba(151,151,151,.14);box-shadow:0 10px 16px #00000014}.hover-ball-container .gift-ball-container .gift-image[data-v-c972370c]{width:18px;height:18px;background-size:cover}.hover-ball-container .actionContainer[data-v-c972370c]{display:flex;height:38px;transition:none;rotate:-90deg;overflow:hidden;width:100%;align-items:center;flex-direction:column;padding:4px;background:#fff;border-top-left-radius:24px;border-top-right-radius:24px;border:1px solid;border-image-source:linear-gradient(266.36deg,rgba(224,224,224,.48) -8.57%,rgba(151,151,151,.14) 101.08%);box-shadow:0 10px 16px #00000014}.hover-ball-container .actionContainer .translateIcon[data-v-c972370c]{display:flex;justify-content:center;align-items:center;cursor:pointer;width:28px;height:28px;border-radius:24px 24px 4px 4px;opacity:.5;background:radial-gradient(50.36% 54.17% at 43.75% 45.83%,#448cff,#4574f6 35.33%,#0e4eff 86.17%)}.hover-ball-container .actionContainer .otherIcons[data-v-c972370c]{height:0px;transition:none;display:flex;gap:2px;flex-direction:column}.hover-ball-container .actionContainer .red-hot[data-v-c972370c]{position:absolute;top:2px;width:4px;height:4px;border-radius:50%;background:#ff6c52}.hover-ball-container.hover .actionContainer[data-v-c972370c]{rotate:0deg;height:156px;transition:height .1s ease;border-radius:24px;padding:3px 3px 7px}.hover-ball-container.hover .actionContainer .otherIcons[data-v-c972370c]{transition:height .1s ease,margin-top .2s ease;height:110px;margin-top:6px}.hover-ball-container.hover .translateIcon[data-v-c972370c]{opacity:1;background:radial-gradient(50.36% 54.17% at 43.75% 45.83%,#448cff,#4574f6 35.33%,#0e4eff 86.17%)}.hover-ball-container.hover .translateIcon[data-v-c972370c]:active{opacity:1;background:#1c4eda}.hover-ball-container .closeIcon[data-v-c972370c]{cursor:pointer;margin-top:6px;width:16px;height:16px}.hover-ball-container .successIcon[data-v-c972370c],.hover-ball-container .hover-ball-close-second-confirm[data-v-c972370c]{position:absolute}[dir=ltr] .hover-ball-container .hover-ball-close-second-confirm[data-v-c972370c]{right:calc(100% - 4px);transition:right .2s ease}[dir=rtl] .hover-ball-container .hover-ball-close-second-confirm[data-v-c972370c]{left:calc(100% - 4px);transition:left .2s ease}.hover-ball-container .login-tip-container[data-v-c972370c]{position:absolute;top:0}.message-tip[data-v-c972370c]{position:fixed;z-index:999}.hover-ball-tips[data-v-c972370c]{position:fixed;z-index:2147483647;color:#fff;font-size:12px;line-height:16px;border-radius:8px;font-weight:400;padding:8px 12px;background-color:#000;border:1px solid rgb(54,54,54);box-shadow:0 12px 32px #00000014}.translate-setting-container[data-v-06196b44]{display:inline-flex;position:absolute;z-index:1;flex-direction:column;border-radius:12px;border:1px solid rgb(224,224,224);background-color:#fff;box-shadow:0 12px 32px #00000014;cursor:default;width:fit-content;-webkit-user-select:none;user-select:none}.translate-setting-container .close-button[data-v-06196b44]{position:absolute;top:12px}[dir=ltr] .translate-setting-container .close-button[data-v-06196b44]{right:12px}[dir=rtl] .translate-setting-container .close-button[data-v-06196b44]{left:12px}.translate-setting-container .setting-content[data-v-06196b44]{display:flex;flex-direction:column;padding:16px 16px 12px;gap:16px;border-bottom:1px solid rgba(46,60,53,.1)}.translate-setting-container .setting-content .setting-section .setting-section-label[data-v-06196b44]{font-size:16px;color:#000000e6;font-weight:600;line-height:16px;margin-bottom:8px}.translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input{height:40px;width:220px;gap:6px}[dir=ltr] .translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input{padding-left:16px}[dir=rtl] .translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input{padding-right:16px}.translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input .select-label{color:#000;font-weight:400;font-size:14px}[dir=ltr] .translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input .service-icon{margin-right:0}[dir=rtl] .translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input .service-icon{margin-left:0}.translate-setting-container .setting-content .setting-section[data-v-06196b44] .select-input .select-text{color:#000;font-weight:400;font-size:14px}.translate-setting-container .setting-footer[data-v-06196b44]{display:flex;padding:12px 16px 16px}.translate-setting-container .setting-footer .more-setting-link[data-v-06196b44]{color:#2962ff;font-size:14px;font-weight:400;cursor:pointer;border-bottom:1px solid rgb(41,98,255)}.translate-setting-container .setting-footer .more-setting-link[data-v-06196b44]:hover{opacity:.8}.translate-setting-container .setting-footer .more-setting-link[data-v-06196b44]:active,.translate-setting-container .setting-footer .more-setting-link.active[data-v-06196b44]{color:#1c4eda;opacity:1}.toast-tip-wrapper[data-v-fa11d61e]{position:relative;border-radius:6px;filter:drop-shadow(0px 12px 32px rgba(13,13,13,.08))}.toast-tip-wrapper .toast-tip[data-v-fa11d61e]{position:relative;background:#353b39cc;border-radius:6px;font-size:12px;line-height:16px;display:flex;align-items:center;min-height:32px}[dir=ltr] .toast-tip-wrapper .toast-tip[data-v-fa11d61e]{padding:8px 34px 8px 12px}[dir=rtl] .toast-tip-wrapper .toast-tip[data-v-fa11d61e]{padding:8px 12px 8px 34px}.toast-tip-wrapper .toast-tip .tip-content[data-v-fa11d61e]{flex:1;color:#fff}[dir=ltr] .toast-tip-wrapper .toast-tip .tip-content[data-v-fa11d61e]{text-align:left}[dir=rtl] .toast-tip-wrapper .toast-tip .tip-content[data-v-fa11d61e]{text-align:right}.toast-tip-wrapper .toast-tip .icon-close[data-v-fa11d61e]{position:absolute;top:8px;cursor:pointer;color:#fff;flex-shrink:0}[dir=ltr] .toast-tip-wrapper .toast-tip .icon-close[data-v-fa11d61e]{right:12px}[dir=rtl] .toast-tip-wrapper .toast-tip .icon-close[data-v-fa11d61e]{left:12px}.toast-tip-wrapper .toast-tip .icon-close[data-v-fa11d61e] svg path{stroke:#ccc;fill:#ccc}.toast-tip-wrapper .toast-tip .arrow[data-v-fa11d61e]{position:absolute;width:0;height:0}.toast-tip-wrapper .toast-tip .arrow.arrow-bottom[data-v-fa11d61e]{bottom:-4px;border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid rgba(53,59,57,.8)}.toast-tip-wrapper .toast-tip .arrow.arrow-top[data-v-fa11d61e]{top:-4px;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid rgba(53,59,57,.8)}.toast-tip-wrapper .toast-tip .arrow.arrow-right[data-v-fa11d61e]{border-top:4px solid transparent;border-bottom:4px solid transparent}[dir=ltr] .toast-tip-wrapper .toast-tip .arrow.arrow-right[data-v-fa11d61e]{right:-4px;border-left:4px solid rgba(53,59,57,.8)}[dir=rtl] .toast-tip-wrapper .toast-tip .arrow.arrow-right[data-v-fa11d61e]{left:-4px;border-right:4px solid rgba(53,59,57,.8)}.toast-tip-wrapper .toast-tip .arrow.arrow-left[data-v-fa11d61e]{border-top:4px solid transparent;border-bottom:4px solid transparent}[dir=ltr] .toast-tip-wrapper .toast-tip .arrow.arrow-left[data-v-fa11d61e]{left:-4px;border-right:4px solid rgba(53,59,57,.8)}[dir=rtl] .toast-tip-wrapper .toast-tip .arrow.arrow-left[data-v-fa11d61e]{right:-4px;border-left:4px solid rgba(53,59,57,.8)}.image-translate-ball-container[data-v-47a9ee62]{position:fixed;z-index:2147483647}.image-translate-icon-container[data-v-47a9ee62]{position:relative;display:grid;grid-template-columns:32px 0fr;z-index:2147483647;padding:2px;width:32px;height:32px;transition:width .2s ease,grid-template-columns .2s ease;border-radius:24px;background:#353842e6;white-space:nowrap}.image-translate-icon-container.hover[data-v-47a9ee62]{width:88px;grid-template-columns:32px 1fr}.image-translate-icon-container .translateIcon[data-v-47a9ee62]{position:relative;display:inline-flex;justify-content:center;align-items:center;cursor:pointer;width:28px;height:28px;border-radius:14px}.image-translate-icon-container .translateIcon[data-v-47a9ee62]:hover,.image-translate-icon-container .translateIcon.active[data-v-47a9ee62]{background:#0006}.image-translate-icon-container .translateIcon.translating[data-v-47a9ee62]{animation:rotate 1s linear infinite}.image-translate-icon-container .image-translate-status-icon[data-v-47a9ee62]{position:absolute;bottom:-6px}.image-translate-icon-container .otherIcons[data-v-47a9ee62]{display:inline-flex;min-width:0;overflow:hidden}.image-translate-icon-container .otherIcons .icon-button[data-v-47a9ee62]{background:none;border:none;width:28px;height:28px;border-radius:14px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0}.image-translate-icon-container .otherIcons .icon-button[data-v-47a9ee62]:hover,.image-translate-icon-container .otherIcons .icon-button.active[data-v-47a9ee62]{background:#0006}.image-translate-ball-popup-container[data-v-47a9ee62]{position:absolute;z-index:2147483647}.image-translate-ball-colorful-tips-container[data-v-47a9ee62]{position:absolute;bottom:38px}.image-translate-ball-toast-container[data-v-47a9ee62]{position:absolute;bottom:42px;white-space:normal;max-width:320px;width:max-content}.image-translate-ball-close-second-confirm[data-v-47a9ee62]{position:absolute;bottom:40px;pointer-events:all}[dir=ltr] .image-translate-ball-close-second-confirm[data-v-47a9ee62]{right:0}[dir=rtl] .image-translate-ball-close-second-confirm[data-v-47a9ee62]{left:0}.image-translate-ball-close-second-confirm .second-confirm-popup[data-v-47a9ee62]{background:#fff;border:1px solid #eee;border-radius:8px;padding:12px;box-shadow:0 12px 32px #35384214}.image-translate-ball-close-second-confirm .second-confirm-popup .title[data-v-47a9ee62]{font-size:14px;margin-bottom:8px}.image-translate-ball-close-second-confirm .second-confirm-popup .options[data-v-47a9ee62]{display:flex;gap:8px}.image-translate-ball-close-second-confirm .second-confirm-popup .options button[data-v-47a9ee62]{background:#f5f5f5;border:1px solid #ddd;border-radius:4px;padding:4px 8px;cursor:pointer}.free-trial-btn[data-v-7d1911b5]{height:28px;border:none;padding:0;font-size:12px;font-weight:600;line-height:16px;display:flex;align-items:center;gap:6px}.free-trial-btn .free-trial-btn-text[data-v-7d1911b5]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-text-fill-color:transparent;color:transparent}[dir=ltr] .free-trial-btn .free-trial-btn-text[data-v-7d1911b5]{background:linear-gradient(90deg,#33c2ff,#2963ff)}[dir=rtl] .free-trial-btn .free-trial-btn-text[data-v-7d1911b5]{background:linear-gradient(-90deg,#33c2ff,#2963ff)}[dir] .free-trial-btn .free-trial-btn-text[data-v-7d1911b5]{background-clip:text;-webkit-background-clip:text}.free-trial-btn[data-v-7d1911b5]:hover,.free-trial-btn[data-v-7d1911b5]:active{background:transparent;border:none}.translate-window-footer-explain[data-v-c39678ae]{display:flex;gap:4px;border-radius:4px;align-items:center;-webkit-user-select:none;user-select:none;cursor:pointer;padding:4px;justify-content:center;line-height:0;height:30px}.translate-window-footer-explain span[data-v-c39678ae]{font-size:12px;color:#333}.translate-window-footer-explain[data-v-c39678ae]:hover{background:#f0f0f0}.translate-window-footer-explain.active span[data-v-c39678ae],.translate-window-footer-explain:active span[data-v-c39678ae]{color:#2962ff}.translate-window-footer-explain[data-v-c39678ae]:focus{background:#e0e0e0}.translate-window-footer-explain.disable[data-v-c39678ae]{cursor:not-allowed;opacity:.6}.translate-window-footer-explain.disable[data-v-c39678ae]:hover{background:none}.translate-window-footer-explain.disable[data-v-c39678ae]:active,.translate-window-footer-explain.disable[data-v-c39678ae]:focus{background:none}.translate-window-footer-action-wrapper[data-v-4c60f9ac]{display:flex;gap:5px;justify-content:flex-start;align-items:center;padding:10px;border-top:1px solid rgb(236,236,236)}.translate-window-footer-action-wrapper .translate-window-footer-action-item[data-v-4c60f9ac]{flex-shrink:0}.translate-window-footer-action-wrapper .empty-area[data-v-4c60f9ac]{flex:1}.translate-window-footer-action-wrapper .free-trial-btn[data-v-4c60f9ac]{flex-shrink:1}.translate-window-header[data-v-35c0f386]{position:relative;display:flex;align-items:center;justify-content:space-between;height:56px;border-bottom:1px solid rgb(236,236,236);font-size:12px;color:#333}[dir=ltr] .translate-window-header[data-v-35c0f386]{padding-left:16px;padding-right:12px}[dir=rtl] .translate-window-header[data-v-35c0f386]{padding-right:16px;padding-left:12px}.translate-window-header .header-left[data-v-35c0f386]{display:flex;flex:1;gap:12px}.translate-window-header .header-left[data-v-35c0f386] .select-input{height:32px}[dir=ltr] .translate-window-header .header-left[data-v-35c0f386] .select-input{padding-left:4px;padding-right:10px}[dir=rtl] .translate-window-header .header-left[data-v-35c0f386] .select-input{padding-right:4px;padding-left:10px}.translate-window-header .header-left[data-v-35c0f386] .select-input .select-text{font-size:12px;color:#000;font-weight:400}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-input{border:none;gap:4px;background-color:transparent;padding-inline:0}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-input.active{border:none}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-input .select-label{display:flex;gap:4px;align-items:center;font-weight:600;font-size:14px;color:#000000e6}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column{height:auto;padding-inline:0;border-radius:12px}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column .option-list .option{height:36px;width:192px;padding-inline-start:0;border-radius:0}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column .option-list .option .function-icon{margin-inline:16px 4px}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column .option-list .option .function-label{flex:1;font-size:14px}.translate-window-header .header-left .translate-type-select-container[data-v-35c0f386] .select-options.single-column .option-list .option .selected-icon{justify-content:flex-end;margin-inline-end:10px}.translate-window-header .header-left .empty-area[data-v-35c0f386]{flex:1}.translate-window-header .header-left .language-select[data-v-35c0f386]{cursor:default;width:auto;min-width:120px}.translate-window-header .header-left .language-select[data-v-35c0f386] .select-input{gap:8px;border:none}.translate-window-header .header-left .model-select[data-v-35c0f386]{cursor:default;width:52px}.translate-window-header .header-left .model-select[data-v-35c0f386] .select-input{border:none}[dir=ltr] .translate-window-header .header-left .model-select[data-v-35c0f386] .select-input .select-icon.service-icon{margin-right:8px}[dir=rtl] .translate-window-header .header-left .model-select[data-v-35c0f386] .select-input .select-icon.service-icon{margin-left:8px}.translate-window-header .header-right[data-v-35c0f386]{display:flex;align-items:center;cursor:default}.translate-window-header .header-right .window-action[data-v-35c0f386]{display:flex;gap:8px;-webkit-user-select:none;user-select:none}[dir=ltr] .translate-window-header .header-right .window-action[data-v-35c0f386]{margin-left:12px}[dir=rtl] .translate-window-header .header-right .window-action[data-v-35c0f386]{margin-right:12px}.translate-window-header .header-right .window-action .window-action-more-list-container[data-v-35c0f386]{z-index:10;display:flex;flex-direction:column;position:absolute;top:100%}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-content[data-v-35c0f386]{margin-top:4px;padding:12px;background:#fff;border:1px solid rgb(224,224,224);border-radius:12px}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]{cursor:pointer;padding:6px;font-size:14px;border-radius:6px;display:flex;gap:8px;align-items:center}[dir=ltr] .translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]{padding-right:24px}[dir=rtl] .translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]{padding-left:24px}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]:hover{background:#f0f0f0}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]:active,.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-35c0f386]:focus{background:#e0e0e0}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item .window-action-more-list-item-content[data-v-35c0f386]{white-space:nowrap}.translate-window-header .header-right .window-action .window-action-icon[data-v-35c0f386]{cursor:pointer;width:24px;height:24px;display:flex;padding:4px;border-radius:4px}.translate-window-header .header-right .window-action .window-action-icon[data-v-35c0f386]:hover{background:#f0f0f0}.translate-window-header .header-right .window-action .window-action-icon[data-v-35c0f386]:active,.translate-window-header .header-right .window-action .window-action-icon[data-v-35c0f386]:focus{background:#e0e0e0}.translate-window-header .select-text-close-second-confirm[data-v-35c0f386]{position:absolute;top:calc(100% - 2px)}[dir=rtl] .to-homepage-icon[data-v-35c0f386]{rotate:270deg}.explain-not-support-container[data-v-1d16d2d2]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;padding-block:24px}.explain-not-support-container .explain-not-support-text[data-v-1d16d2d2]{line-height:16px;font-size:12px;text-align:center;color:#333}.explain-not-support-container .explain-not-support-switch[data-v-1d16d2d2]{display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;gap:4px}.explain-not-support-container .explain-not-support-switch span[data-v-1d16d2d2]{font-size:12px;color:#2962ff}.translate-window-bottom-loading[data-v-787900e9]{display:flex;align-items:center;justify-content:center}.translate-window-bottom-loading .translate-loading-icon[data-v-787900e9]{animation:rotate 1s linear infinite}.translate-window-result-footer[data-v-6e0e4445]{height:24px;display:flex;gap:24px;padding:0 16px;margin-block:4px 12px;align-items:center;justify-content:space-between;position:relative;overflow:visible}.translate-window-result-footer.weakened-and-narrower[data-v-6e0e4445]{margin-top:0}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445]{margin-inline-start:-6px}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input{border:none;border-radius:0;padding-inline-end:0;background-color:transparent;height:28px;gap:4px}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input .select-arrow{display:flex;align-items:center;justify-content:center;margin-inline-end:4px}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input.active,.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input:active{background-color:#f0f0f0;border-radius:8px}[dir=ltr] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input.active .select-arrow,[dir=ltr] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input:active .select-arrow{transform:rotate(180deg)}[dir=rtl] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input.active .select-arrow,[dir=rtl] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input:active .select-arrow{transform:rotate(-180deg)}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-6e0e4445] .select-input:hover{background-color:#f0f0f0;border-radius:8px}.translate-window-result-footer .empty-area[data-v-6e0e4445]{flex:1}.translate-window-result-footer .translate-result-footer-icons[data-v-6e0e4445]{display:flex;gap:8px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-container[data-v-6e0e4445]{position:relative;overflow:visible}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]{display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none;gap:4px;padding:4px;height:24px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]:hover{background:#f0f0f0;border-radius:4px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper.active[data-v-6e0e4445],.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]:active,.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]:focus{background:#e0e0e0}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-6e0e4445]:not(.show-label){width:24px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-tip[data-v-6e0e4445]{font-size:12px;font-weight:400;color:#000000e6}.translate-window-result-footer .translate-result-footer-icons .red-hot[data-v-6e0e4445]{position:absolute;top:2px;width:4px;height:4px;border-radius:50%;background:#ff6c52}[dir=ltr] .translate-window-result-footer .translate-result-footer-icons .red-hot[data-v-6e0e4445]{left:20px}[dir=rtl] .translate-window-result-footer .translate-result-footer-icons .red-hot[data-v-6e0e4445]{right:20px}.translate-window-result-footer .translate-result-hover-tip[data-v-6e0e4445]{position:fixed;height:32px;padding:8px 12px;border-radius:6px;background:#353b39cc;color:#fff;font-size:12px;font-weight:400;white-space:nowrap;pointer-events:none;z-index:1000}.translate-window-result-footer .translate-result-hover-tip.with-icon[data-v-6e0e4445]{display:flex;align-items:center;justify-content:center;gap:4px}.translate-window-result-footer .translate-result-hover-tip .tip-icon[data-v-6e0e4445]{flex-shrink:0}.translate-window-result-footer .translate-result-hover-tip .tip-text[data-v-6e0e4445]{line-height:15px;height:15px}.translate-window-result-footer .translate-result-hover-tip[data-v-6e0e4445]:after{content:"";position:absolute;bottom:-4px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:4px solid rgba(0,0,0,.75)}[dir=ltr] .translate-window-result-footer .translate-result-hover-tip[data-v-6e0e4445]:after{left:50%;transform:translate(-50%)}[dir=rtl] .translate-window-result-footer .translate-result-hover-tip[data-v-6e0e4445]:after{right:50%;transform:translate(50%)}.slow-fade-in-enter-active[data-v-6e0e4445],.slow-fade-in-leave-active[data-v-6e0e4445]{transition:opacity .15s ease}.slow-fade-in-enter-from[data-v-6e0e4445],.slow-fade-in-leave-to[data-v-6e0e4445]{opacity:0}.translate-window-result-container[data-v-1b80577c]{padding:12px 16px;font-size:14px;font-weight:400;color:#000000e6;overflow-y:overlay;line-height:1.75}.translate-window-result-container.translate-error[data-v-1b80577c]{display:flex;justify-content:center}.translate-window-result-container.fixed-min-height[data-v-1b80577c]{min-height:77px}.translate-window-result-container .translate-window-result-error-container[data-v-1b80577c]{display:flex;flex-direction:column;justify-content:center;align-items:center}.translate-window-result-container .translate-window-result-error[data-v-1b80577c]{align-items:center;font-size:14px;line-height:1.75;gap:4px;font-weight:400;max-width:293px;text-align:center;color:#000000e6}.translate-window-result-container .translate-window-result-error .translate-result-error-retry[data-v-1b80577c]{display:flex;align-items:center;word-break:keep-all;gap:2px;color:#2962ff;cursor:pointer;-webkit-user-select:none;user-select:none}.translate-window-result-container .upgrade-now-wrapper[data-v-1b80577c]{display:flex;justify-content:center;margin-top:16px}.translate-window-result-container .upgrade-now-wrapper .upgrade-now-btn[data-v-1b80577c]{background:radial-gradient(67.24% 88.54% at 52.67% 100%,#5adeff,#2986ff);border-radius:8px;padding:12px 16px;color:#fff;font-size:14px;line-height:16px;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none}.translate-window-result-container .translate-window-result-text-wrapper[data-v-1b80577c]{display:flex;flex-direction:row}.translate-window-result-container .translate-window-result-text-wrapper.text-can-be-collapsed .translate-window-result-text[data-v-1b80577c]{flex:1;font-size:14px;line-height:1.75;color:#0009;white-space:pre-line}.translate-window-result-container .translate-window-result-text-wrapper.text-can-be-collapsed .translate-window-result-text.collapsed-in-two-lines[data-v-1b80577c]{color:#0006;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical}.translate-window-result-container .translate-window-result-text-wrapper.text-can-be-collapsed .collapse-bottom-icon[data-v-1b80577c]{cursor:pointer}.explain-disable-tips[data-v-1b80577c]{position:absolute;bottom:-50px;font-size:12px;padding:12px;line-height:16px;color:#333;background:#fff;border:1px solid rgb(224,224,224);box-shadow:0 12px 32px #00000014;border-radius:8px}[dir=ltr] .explain-disable-tips[data-v-1b80577c]{left:36px}[dir=rtl] .explain-disable-tips[data-v-1b80577c]{right:36px}.translate-window-up-bottom-result-wrapper[data-v-b30cd8d1]{display:flex;flex-direction:column;min-height:0;flex:1}.translate-window-up-bottom-result-wrapper>.translate-window-result-footer[data-v-b30cd8d1]{flex-shrink:0}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]{flex:1;overflow-y:auto;min-height:0}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]::-webkit-scrollbar{width:6px}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]::-webkit-scrollbar-thumb:hover{background-color:#0000004d}.translate-window-up-bottom-result-scroll-content[data-v-b30cd8d1]::-webkit-scrollbar-track{background-color:transparent}.translate-window-bottom-result-wrapper[data-v-b30cd8d1]{position:relative}.translate-window-bottom-result-wrapper[data-v-b30cd8d1]:before{content:"";position:absolute;top:0;left:16px;right:16px;height:1px;background-color:#0d0d0d1f}.bottom-sentinel[data-v-b30cd8d1]{height:1px;width:100%;pointer-events:none}.translate-window-container[data-v-b2b705f8]{position:fixed;display:flex;z-index:2147483647;border-radius:12px;width:552px;max-height:calc(100vh - 16px);background-color:#fff;border:1px solid rgba(13,13,13,.12);box-shadow:0 12px 32px #0d0d0d14;font-size:16px}.translate-window-container .translate-window-drag-zone[data-v-b2b705f8]{background:#f7f7f7;width:12px;display:flex;align-items:center;justify-content:center;cursor:move}[dir=ltr] .translate-window-container .translate-window-drag-zone[data-v-b2b705f8]{border-top-left-radius:12px;border-bottom-left-radius:12px}[dir=rtl] .translate-window-container .translate-window-drag-zone[data-v-b2b705f8]{border-top-right-radius:12px;border-bottom-right-radius:12px}.translate-window-container .translate-window-content-zone[data-v-b2b705f8]{flex:1;width:calc(100% - 12px);display:flex;flex-direction:column;word-break:normal;overflow-wrap:break-word;min-height:0}.translate-window-container .translate-window-header-wrapper[data-v-b2b705f8]{flex-shrink:0}.input-translate-ball-container[data-v-29c9e78e]{position:fixed;z-index:2147483647;pointer-events:none}.input-translate-ball-container.vertical .input-translate-ball-content[data-v-29c9e78e]{top:0;bottom:auto;height:60px;width:34px;transition:height .2s ease}.input-translate-ball-container.vertical .input-translate-ball-content .otherIcons[data-v-29c9e78e]{display:flex;flex-direction:column;margin-inline-end:0}.input-translate-ball-container.vertical .input-translate-ball-content.hover[data-v-29c9e78e]{width:32px;height:112px}.input-translate-ball-container .input-translate-ball-content[data-v-29c9e78e]{bottom:0}[dir=ltr] .input-translate-ball-container .input-translate-ball-content[data-v-29c9e78e]{right:0}[dir=rtl] .input-translate-ball-container .input-translate-ball-content[data-v-29c9e78e]{left:0}.input-translate-ball-container .input-translate-ball-content[data-v-29c9e78e]{position:absolute;bottom:0;pointer-events:all;overflow:hidden;padding:2px;width:60px;height:34px;transition:width .2s ease;border-radius:24px;background:#fff;border:1px solid rgba(46,50,60,.1);box-shadow:0 10px 16px #00000014;white-space:nowrap}.input-translate-ball-container .input-translate-ball-content.ball-content-small[data-v-29c9e78e]{border:none;box-shadow:none;background:transparent}.input-translate-ball-container .input-translate-ball-content.translating[data-v-29c9e78e]{width:32px}.input-translate-ball-container .input-translate-ball-content .input-translate-ball-small-icon[data-v-29c9e78e]{width:10px;height:10px;background:#353842;border:1px solid rgb(255,255,255);position:absolute;top:11px;border-radius:50%}.input-translate-ball-container .input-translate-ball-content .translateIcon[data-v-29c9e78e]{position:relative;display:inline-flex;justify-content:center;align-items:center;cursor:pointer;width:28px;height:28px;border-radius:14px;background:#353842}.input-translate-ball-container .input-translate-ball-content .translateIcon[data-v-29c9e78e]:hover{background:#353842}.input-translate-ball-container .input-translate-ball-content .translateIcon[data-v-29c9e78e]:active{opacity:1;background:#212329}.input-translate-ball-container .input-translate-ball-content .translateIcon.translating[data-v-29c9e78e]{display:flex}.input-translate-ball-container .input-translate-ball-content .translateIcon .translate-loading-icon[data-v-29c9e78e]{animation:rotate 1s linear infinite;display:inline-flex;align-items:center;justify-content:center;line-height:0;overflow:hidden}.input-translate-ball-container .input-translate-ball-content .translateIcon .translate-loading-icon[data-v-29c9e78e] .svg{width:100%;height:100%;display:block}.input-translate-ball-container .input-translate-ball-content .otherIcons[data-v-29c9e78e]{display:inline-flex;transition:opacity .2s ease}.input-translate-ball-container .input-translate-ball-content .otherIcons[data-v-29c9e78e] .icon-button{padding:3px;border-radius:14px}.input-translate-ball-container .input-translate-ball-content .otherIcons .always-close-icon-button[data-v-29c9e78e] .icon-button .svg-icon{transform:translateY(1px)}.input-translate-ball-container .input-translate-ball-content.hover[data-v-29c9e78e]{width:146px}.input-translate-ball-container .input-translate-ball-popup-container[data-v-29c9e78e]{pointer-events:all}.input-translate-ball-container .input-translate-ball-popup-container .input-translate-ball-popup[data-v-29c9e78e]{position:absolute}[dir=ltr] .input-translate-ball-container .input-translate-ball-popup-container .input-translate-ball-popup[data-v-29c9e78e]{right:0}[dir=rtl] .input-translate-ball-container .input-translate-ball-popup-container .input-translate-ball-popup[data-v-29c9e78e]{left:0}.input-translate-ball-tips[data-v-29c9e78e]{position:absolute;z-index:2147483647;-webkit-user-select:none;user-select:none;color:#fff;bottom:40px;font-size:12px;line-height:16px;border-radius:8px;font-weight:400;padding:8px 12px;background-color:#000;border:1px solid rgb(54,54,54);box-shadow:0 12px 32px #00000014}.input-translate-ball-tips.model-tip-label[data-v-29c9e78e]{display:flex}.input-translate-ball-tips.model-tip-label .input-translate-ball-tips-content[data-v-29c9e78e]{display:flex;align-items:center;padding-inline-end:4px}.input-translate-ball-tips.model-tip-label .input-translate-ball-tips-content .input-translate-ball-tips-icon-wrapper[data-v-29c9e78e]{display:inline-block;padding-inline:4px;height:16px}.input-translate-ball-tips.model-tip-label .input-translate-ball-tips-content .input-translate-ball-tips-icon-wrapper .input-translate-ball-tips-icon[data-v-29c9e78e]{display:block;width:16px;height:16px}.input-translate-ball-tips.error-tips[data-v-29c9e78e]{bottom:40px}.pdf-banner-container[data-v-c3f257c8]{position:absolute;z-index:2147483647;top:0;left:0;right:0;height:50px;padding-left:60px;padding-right:60px;font-size:16px;display:flex;gap:8px;justify-content:center;align-items:center;background-color:#fff;color:#000000e6;line-height:1.5}.pdf-banner-container .pdf-banner-desc[data-v-c3f257c8]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pdf-banner-container .pdf-translate-button[data-v-c3f257c8]{height:32px;border-radius:18px;font-size:14px;font-weight:600;overflow:unset;text-overflow:unset}[dir=ltr] .pdf-banner-container .pdf-translate-button[data-v-c3f257c8]{margin-left:24px}[dir=rtl] .pdf-banner-container .pdf-translate-button[data-v-c3f257c8]{margin-right:24px}.pdf-banner-container .pdf-translate-close[data-v-c3f257c8]{position:absolute;width:60px;display:flex;justify-content:center;align-items:center}[dir=ltr] .pdf-banner-container .pdf-translate-close[data-v-c3f257c8]{right:0}[dir=rtl] .pdf-banner-container .pdf-translate-close[data-v-c3f257c8]{left:0}.pdf-only-translate-button-container[data-v-c3f257c8]{position:absolute;z-index:2147483647;top:12px;justify-content:end}[dir=ltr] .pdf-only-translate-button-container[data-v-c3f257c8]{right:136px}[dir=rtl] .pdf-only-translate-button-container[data-v-c3f257c8]{left:136px}.plugin-comment-guid-container[data-v-fef91c63]{position:fixed;z-index:2147483647;bottom:32px;padding:24px;font-weight:400;background-color:#fff;color:#000;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 24px #00000014}[dir=ltr] .plugin-comment-guid-container[data-v-fef91c63]{right:32px}[dir=rtl] .plugin-comment-guid-container[data-v-fef91c63]{left:32px}.plugin-comment-guid-container .plugin-comment-guid-header[data-v-fef91c63]{display:flex;gap:12px;align-items:center;margin-bottom:24px}.plugin-comment-guid-container .plugin-comment-guid-header .plugin-comment-guid-header-logo[data-v-fef91c63]{display:flex;flex:1;align-items:center;gap:12px}.plugin-comment-guid-container .plugin-comment-guid-header .plugin-comment-guid-header-logo .plugin-comment-logo-name[data-v-fef91c63]{font-weight:600;font-size:16px}.plugin-comment-guid-container .plugin-comment-five-star[data-v-fef91c63]{display:flex;flex-direction:column;align-items:center;margin-bottom:8px}.plugin-comment-guid-container .plugin-comment-dec-container[data-v-fef91c63]{display:flex;justify-content:center}.plugin-comment-guid-container .plugin-comment-dec-container .plugin-comment-dec[data-v-fef91c63]{max-width:300px;text-align:center;font-size:14px;line-height:1.5}.plugin-comment-guid-container .plugin-comment-btn-container[data-v-fef91c63]{display:flex;justify-content:center}.plugin-comment-guid-container .plugin-comment-btn-container .plugin-comment-btn[data-v-fef91c63]{width:284px;height:48px;border-radius:12px;margin:32px 8px 8px}.dialog-mask[data-v-eca39056]{position:fixed;top:0;width:100%;height:100%;background:#0009;z-index:2147483646}[dir=ltr] .dialog-mask[data-v-eca39056]{left:0}[dir=rtl] .dialog-mask[data-v-eca39056]{right:0}.confirm-dialog[data-v-eca39056]{position:fixed;top:50%;padding:16px 24px 24px;background:#fff;border-radius:16px;border:1px solid rgb(224,224,224);box-shadow:0 12px 32px #00000014;overflow:hidden;display:flex;flex-direction:column;z-index:2147483647}[dir=ltr] .confirm-dialog[data-v-eca39056]{left:50%;transform:translate(-50%,-50%)}[dir=rtl] .confirm-dialog[data-v-eca39056]{right:50%;transform:translate(50%,-50%)}.dialog-header[data-v-eca39056]{display:flex;align-items:center;justify-content:space-between}.dialog-header .dialog-title[data-v-eca39056]{font-size:14px;font-weight:700;color:#000000e6}.dialog-content[data-v-eca39056]{flex:1;margin-top:12px}.dialog-content .dialog-body[data-v-eca39056]{margin-bottom:24px}.dialog-content .dialog-body p[data-v-eca39056]{margin:0;line-height:1.5;color:#0d0d0de6;font-size:14px}.dialog-content .dialog-actions[data-v-eca39056]{display:flex;justify-content:flex-end;gap:12px}.dialog-content .dialog-actions .btn-cancel[data-v-eca39056]{background:#0d0d0d1a;border-radius:8px;padding:8px 12px;color:#0d0d0de6;font-size:12px;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s}.dialog-content .dialog-actions .btn-cancel[data-v-eca39056]:hover{background:#0d0d0d26}.dialog-content .dialog-actions .colorful-confirm-btn[data-v-eca39056]{background:radial-gradient(67.24% 88.54% at 52.67% 100%,#5adeff,#2986ff);color:#fff;font-size:12px;font-weight:600}.dialog-content .dialog-actions .colorful-confirm-btn[data-v-eca39056]:hover{opacity:.9}.upgrade-dialog-overlay[data-v-73213492]{position:fixed;top:0;left:0;right:0;bottom:0;background:transparent;display:flex;align-items:flex-start;justify-content:flex-start;z-index:2147483647;overflow:auto;padding:20px}.upgrade-dialog-overlay.with-mask[data-v-73213492]{background:#0009}.upgrade-dialog[data-v-73213492]{position:relative;height:480px;background:#fff;border-radius:24px;box-shadow:0 12px 32px #00000014;margin:auto}.dialog-close[data-v-73213492]{width:16px;height:16px;position:absolute;cursor:pointer;background-repeat:no-repeat;background-position:center;background-size:contain}[dir=ltr] .dialog-close[data-v-73213492]{right:-20px}[dir=rtl] .dialog-close[data-v-73213492]{left:-20px}.dialog-content[data-v-73213492]{display:flex;height:100%}.content-left[data-v-73213492]{width:456px;padding:48px;display:flex;flex-direction:column;justify-content:center}.dialog-title[data-v-73213492]{font-size:20px;font-weight:600;margin-bottom:24px;color:#000}.features-list[data-v-73213492]{display:flex;flex-direction:column;gap:12px;margin-bottom:60px}.feature-item[data-v-73213492]{display:flex;align-items:center;gap:8px}.check-icon[data-v-73213492]{color:#2962ff;flex-shrink:0}.feature-text[data-v-73213492]{font-size:14px;font-weight:500;line-height:1.5;color:#000}.feature-text.highlight[data-v-73213492]{color:#2962ff}.upgrade-button[data-v-73213492]{font-weight:500;font-size:16px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px;cursor:pointer;color:#fff;background:radial-gradient(67.24% 88.54% at 52.67% 100%,#5adeff,#2986ff)}.content-right[data-v-73213492]{display:flex;align-items:center;justify-content:center}.upgrade-image[data-v-73213492]{width:480px;height:100%;background-repeat:no-repeat;background-position:center;background-size:contain}.word-translate-bubble[data-v-86790c53]{position:absolute;display:flex;align-items:center;justify-content:center;border-radius:4px;gap:2px;height:28px;padding-right:6px;padding-left:6px;background:#f7f7f7;z-index:2147483647;border:.5px solid rgb(207,207,207);box-shadow:0 6px 12px #00000014;color:#333;font-size:14px;-webkit-user-select:none;user-select:none;cursor:pointer}.word-translate-bubble .translate-text-sharp-angle[data-v-86790c53]{position:absolute;width:4px;height:4px;background:#f7f7f7;border:.5px solid rgb(207,207,207);box-shadow:0 6px 12px #00000014}[dir=ltr] .word-translate-bubble .translate-text-sharp-angle[data-v-86790c53]{transform:rotate(45deg)}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle[data-v-86790c53]{transform:rotate(-45deg)}.word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-86790c53]{top:-2px;inset-inline-start:10px;border-bottom:none!important}[dir=ltr] .word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-86790c53]{border-right:none!important}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-86790c53]{border-left:none!important}.word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-86790c53]{bottom:-2px;border-top:none!important;inset-inline-end:10px}[dir=ltr] .word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-86790c53]{border-left:none!important}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-86790c53]{border-right:none!important}.word-translate-bubble.black-theme[data-v-86790c53]{background:#000;color:#fff;border:.5px solid rgb(54,54,54)}.word-translate-bubble.black-theme .translate-text-sharp-angle[data-v-86790c53]{background:#000;border:.5px solid rgb(54,54,54)}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-86790c53]{inset-inline-end:10px;inset-inline-start:unset}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-86790c53]{inset-inline-start:10px;inset-inline-end:unset}.mail-setting-container[data-v-1f5937b9]{position:relative}.mail-setting-btn[data-v-1f5937b9]{height:40px;width:50px;display:flex;align-items:center;justify-content:center}.mail-welcome-banner[data-v-1f5937b9]{position:absolute;top:100%;min-width:360px;background-color:#fff;border:1px solid rgb(224,224,224);border-radius:16px;z-index:2147483647;box-shadow:0 12px 32px #00000014}.banner-content[data-v-1f5937b9]{padding:20px}.header-section[data-v-1f5937b9]{position:relative;display:flex;margin-bottom:16px}.title[data-v-1f5937b9]{flex:1;font-size:14px;font-weight:600;line-height:24px;color:#000000e6}[dir=ltr] .title[data-v-1f5937b9]{margin-left:6px}[dir=rtl] .title[data-v-1f5937b9]{margin-right:6px}[dir=ltr] .close-button[data-v-1f5937b9]{margin-left:4px}[dir=rtl] .close-button[data-v-1f5937b9]{margin-right:4px}.feature-item[data-v-1f5937b9]{display:flex;align-items:center;margin-bottom:10px;gap:6px}.feature-item[data-v-1f5937b9]:last-child{margin-bottom:0}.feature-text[data-v-1f5937b9]{flex:1;font-size:14px;font-weight:400;color:#0009}.separator[data-v-1f5937b9]{width:100%;height:1px;background-color:#0000001a}.bottom-section[data-v-1f5937b9]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px}.enable-text[data-v-1f5937b9]{font-size:14px;font-weight:400;color:#000000e6}.mail-setting-btn-red-hot[data-v-1f5937b9]{position:absolute;top:8px;width:4px;height:4px;border-radius:50%;background:#ff6c52}[dir=ltr] .mail-setting-btn-red-hot[data-v-1f5937b9]{right:8px}[dir=rtl] .mail-setting-btn-red-hot[data-v-1f5937b9]{left:8px}[data-v-b02d00f3] .base-select .select-options .option-list .option{min-width:260px}.mail-translate-banner-container[data-v-b02d00f3]{position:relative;font-size:14px;font-weight:400;-webkit-user-select:none;user-select:none;padding-bottom:10px}.translate-btn[data-v-b02d00f3]{width:fit-content;display:inline-flex;vertical-align:middle;margin-top:4px;min-width:220px;position:relative;align-items:center;height:40px;cursor:pointer}[dir=ltr] .translate-btn[data-v-b02d00f3]{text-align:left;margin-right:8px}[dir=rtl] .translate-btn[data-v-b02d00f3]{text-align:right;margin-left:8px}.translate-btn .logo-container[data-v-b02d00f3]{flex:1;display:flex;height:100%;gap:8px;align-items:center;justify-content:center;border:1px solid rgb(224,224,224)}[dir=ltr] .translate-btn .logo-container[data-v-b02d00f3]{padding-left:8px;padding-right:16px;border-top-left-radius:48px;border-bottom-left-radius:48px}[dir=rtl] .translate-btn .logo-container[data-v-b02d00f3]{padding-right:8px;padding-left:16px;border-top-right-radius:48px;border-bottom-right-radius:48px}.translate-btn .logo-container .logo[data-v-b02d00f3]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background-color:#2962ff;border-radius:50%}.translate-btn .logo-container .text-content[data-v-b02d00f3]{flex:1;font-weight:600;color:#2962ff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.translate-btn .logo-container[data-v-b02d00f3]:hover{background-color:#f0f0f0}.translate-btn .logo-container[data-v-b02d00f3]:active,.translate-btn .logo-container.active[data-v-b02d00f3]{background-color:#e0e0e0}.translate-btn .setting-container[data-v-b02d00f3]{display:flex;width:44px;height:100%;align-items:center;justify-content:center;border:1px solid rgb(224,224,224)}[dir=ltr] .translate-btn .setting-container[data-v-b02d00f3]{border-left:none;border-top-right-radius:48px;border-bottom-right-radius:48px}[dir=rtl] .translate-btn .setting-container[data-v-b02d00f3]{border-right:none;border-top-left-radius:48px;border-bottom-left-radius:48px}.translate-btn .setting-container[data-v-b02d00f3]:hover{background-color:#f0f0f0}.translate-btn .setting-container[data-v-b02d00f3]:active,.translate-btn .setting-container.active[data-v-b02d00f3]{background-color:#e0e0e0}.translate-btn .translate-setting-container[data-v-b02d00f3]{position:absolute;top:calc(100% + 8px);z-index:1}[dir=ltr] .translate-btn .translate-setting-container[data-v-b02d00f3]{right:0}[dir=rtl] .translate-btn .translate-setting-container[data-v-b02d00f3]{left:0}.translate-btn .exceed-limit-tip[data-v-b02d00f3]{position:absolute;z-index:1;width:270px;top:calc(100% + 8px)}[dir=ltr] .translate-btn .exceed-limit-tip[data-v-b02d00f3]{right:50%;transform:translate(50%)}[dir=rtl] .translate-btn .exceed-limit-tip[data-v-b02d00f3]{left:50%;transform:translate(-50%)}.send-email-btn[data-v-b02d00f3]{display:inline-flex;vertical-align:middle;width:fit-content;gap:4px;height:40px;margin-top:4px;padding:0 16px;cursor:pointer;align-items:center;border:1px solid rgb(224,224,224);border-radius:48px}[dir=ltr] .send-email-btn[data-v-b02d00f3]{text-align:left;margin-right:8px}[dir=rtl] .send-email-btn[data-v-b02d00f3]{text-align:right;margin-left:8px}.send-email-btn[data-v-b02d00f3]:hover{background-color:#f0f0f0}.send-email-btn[data-v-b02d00f3]:active,.send-email-btn.active[data-v-b02d00f3]{background-color:#e0e0e0}.send-email-btn .send-mail-icon[data-v-b02d00f3]{opacity:.9}.send-email-btn .send-text-content[data-v-b02d00f3]{color:#000;opacity:.9;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-disabled[data-v-b02d00f3]{opacity:.5;cursor:not-allowed}.btn-disabled[data-v-b02d00f3]:hover,.btn-disabled[data-v-b02d00f3]:active,.btn-disabled.active[data-v-b02d00f3]{background-color:transparent!important}@media (max-width: 730px){.mail-translate-banner-container[data-v-b02d00f3]{display:flex;flex-direction:column}}.caption-window-container[data-v-d1944dd0]{position:absolute;width:100%;top:0;pointer-events:none;z-index:10;font-size:16px;color:#ffffffe6;font-weight:400;line-height:150%;transition:bottom .1s ease-in-out}[dir=ltr] .caption-window-container[data-v-d1944dd0]{left:0}[dir=rtl] .caption-window-container[data-v-d1944dd0]{right:0}.caption-window-content[data-v-d1944dd0]{position:absolute;left:40px;right:40px;bottom:5px;display:flex;flex-direction:column;align-items:center}.caption-window-text[data-v-d1944dd0]{background-color:#000000bf;padding:2px 8px;white-space:pre-wrap;display:none}.subtitle-guide-dialog-container[data-v-e6e519b9]{max-width:400px;min-width:320px;width:max-content;white-space:normal;background:#fff;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 32px #00000014;padding:20px 24px 24px;box-sizing:border-box;display:flex;flex-direction:column;text-shadow:none;font-size:14px}.subtitle-guide-dialog-container .dialog-title[data-v-e6e519b9]{color:#000000e6;font-weight:600;line-height:20px;margin-bottom:8px}.subtitle-guide-dialog-container .dialog-description[data-v-e6e519b9]{color:#0009;margin-bottom:20px}.subtitle-guide-dialog-container .dialog-actions[data-v-e6e519b9]{display:flex;gap:8px;justify-content:end}.subtitle-guide-dialog-container .got-it-button[data-v-e6e519b9]{height:40px;padding-left:16px;padding-right:16px;font-weight:600}.subtitle-guide-dialog-container .explore-button[data-v-e6e519b9]{height:40px;font-weight:600}.subtitle-icon[data-v-64fd24a9]{display:inline-flex;align-items:center;justify-content:center}.menu-cell[data-v-de94c478]{display:flex;align-items:center;justify-content:space-between;min-height:48px;padding:0 24px}.menu-cell[data-v-de94c478]:hover{background-color:#ffffff1a}.menu-cell.disabled[data-v-de94c478]:hover{background-color:transparent}.menu-cell .menu-cell-left[data-v-de94c478]{display:flex;align-items:center;gap:8px;flex:1}.menu-cell .menu-cell-right[data-v-de94c478]{display:flex;align-items:center;gap:4px}.menu-container[data-v-20d5d8e7]{display:flex;flex-direction:column;background-color:#000c;border:1px solid rgba(255,255,255,.2);border-radius:8px;padding:8px 0;box-shadow:0 2px 4px #0000004d}.menu-divider[data-v-f1c6b8bc]{height:1px;background-color:#fff3;margin:2px 24px}.select-list-item[data-v-cab79358]{display:flex;gap:8px;align-items:center;height:48px;padding:0 24px}.select-list-item[data-v-cab79358]:hover{background-color:#ffffff1a}.menu-header[data-v-4535d3fb]{display:flex;align-items:center;gap:8px;height:48px;padding:0 24px;overflow:hidden}.menu-header .menu-header-title[data-v-4535d3fb]{font-weight:700}.service-list-container[data-v-c67c203c]{flex:1;overflow:auto}.group-title[data-v-c67c203c]{padding:0 24px;display:flex;gap:8px;margin-top:16px;margin-bottom:8px;align-items:center}.group-title .group-title-text[data-v-c67c203c]{font-size:12px;color:#fff9;font-weight:600}.service-item[data-v-c67c203c]{display:flex;align-items:center;gap:8px;flex:1}.service-desc[data-v-c67c203c]{font-size:12px;color:#fff9}.upgrade-prompt-card[data-v-a444e137]{position:relative;white-space:normal;padding:20px 24px 24px;text-shadow:none;min-width:360px;background:#fff;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 24px #00000014;cursor:default}.upgrade-prompt-card .close-button[data-v-a444e137]{position:absolute;top:18px;cursor:pointer}[dir=ltr] .upgrade-prompt-card .close-button[data-v-a444e137]{right:18px}[dir=rtl] .upgrade-prompt-card .close-button[data-v-a444e137]{left:18px}.upgrade-prompt-card .title[data-v-a444e137]{margin-bottom:16px;font-size:14px;font-weight:600;color:#000000e6}.upgrade-prompt-card .promo-section[data-v-a444e137]{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px}.upgrade-prompt-card .gift-icon[data-v-a444e137]{width:28px;height:28px;flex-shrink:0}.upgrade-prompt-card .promo-text[data-v-a444e137]{flex:1;font-size:14px;color:#000000e6}.upgrade-prompt-card .promo-color-text[data-v-a444e137]{color:#ff851a;font-weight:600}.upgrade-prompt-card .button-group[data-v-a444e137]{display:flex;gap:12px;justify-content:end}.upgrade-prompt-card .skip-button[data-v-a444e137],.upgrade-prompt-card .participate-button[data-v-a444e137]{height:40px;font-weight:600;padding:12px}.try-ai-model-tip-wrapper[data-v-eda2ac46]{min-width:260px;max-width:300px;width:max-content;white-space:normal;position:relative;border-radius:8px;box-shadow:0 12px 32px #0d0d0d14;text-shadow:none}.try-ai-model-tip-wrapper .try-ai-model-tip-bg[data-v-eda2ac46]{position:absolute;z-index:0;top:0;bottom:0;border-radius:inherit}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip-bg[data-v-eda2ac46]{left:0;right:0;background:linear-gradient(90deg,#47c8ff,#2962ff)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip-bg[data-v-eda2ac46]{right:0;left:0;background:linear-gradient(-90deg,#47c8ff,#2962ff)}.try-ai-model-tip-wrapper .try-ai-model-tip[data-v-eda2ac46]{position:relative;font-size:12px;line-height:1.5;border-radius:inherit;border:1px solid transparent;background-color:#fff;background-clip:padding-box}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip[data-v-eda2ac46]{padding:12px 34px 12px 16px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip[data-v-eda2ac46]{padding:12px 16px 12px 34px}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .tip-text[data-v-eda2ac46]{color:#333}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{-webkit-text-fill-color:transparent;color:transparent;font-weight:600;font-size:12px;cursor:pointer;position:relative;display:inline-block}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{background:linear-gradient(90deg,#2962ff,#47c8ff)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{background:linear-gradient(-90deg,#2962ff,#47c8ff)}[dir] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{-webkit-background-clip:text;background-clip:text}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:after{content:"";position:absolute;bottom:0;width:100%;height:1px}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:after{left:0;background:linear-gradient(90deg,#2962ff,#47c8ff)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:after{right:0;background:linear-gradient(-90deg,#2962ff,#47c8ff)}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:hover{opacity:.8}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:active,.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn.active[data-v-eda2ac46]{opacity:1}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow[data-v-eda2ac46]{position:absolute;width:0;height:0}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow[data-v-eda2ac46]:after{content:"";position:absolute;width:0;height:0}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]{bottom:-5px;border-left:6px solid transparent;border-right:6px solid transparent;border-top:5px solid #4a9eff}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]{left:50%;transform:translate(-50%)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]{right:50%;transform:translate(50%)}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]:after{top:-6px;border-left:5px solid transparent;border-right:5px solid transparent;border-top:4px solid white}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]:after{left:-5px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]:after{right:-5px}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]{top:-5px;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:5px solid #4a9eff}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]{left:50%;transform:translate(-50%)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]{right:50%;transform:translate(50%)}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]:after{bottom:-6px;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:4px solid white}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]:after{left:-5px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]:after{right:-5px}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]{top:50%;transform:translateY(-50%);border-top:6px solid transparent;border-bottom:6px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]{right:-5px;border-left:5px solid #4a9eff}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]{left:-5px;border-right:5px solid #4a9eff}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]:after{top:-5px;border-top:5px solid transparent;border-bottom:5px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]:after{left:-6px;border-left:4px solid white}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]:after{right:-6px;border-right:4px solid white}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]{top:50%;transform:translateY(-50%);border-top:6px solid transparent;border-bottom:6px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]{left:-5px;border-right:5px solid #4a9eff}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]{right:-5px;border-left:5px solid #4a9eff}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]:after{top:-5px;border-top:5px solid transparent;border-bottom:5px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]:after{right:-6px;border-right:4px solid white}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]:after{left:-6px;border-left:4px solid white}.try-ai-model-tip-wrapper .try-ai-model-tip .icon-close[data-v-eda2ac46]{position:absolute;top:6px;cursor:pointer}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .icon-close[data-v-eda2ac46]{right:6px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .icon-close[data-v-eda2ac46]{left:6px}.quick-button-container[data-v-11470819]{position:relative;margin:0 16px;padding:0;height:100%;cursor:pointer;z-index:2147483647;display:flex;align-items:center;justify-content:center;font-size:16px;white-space:nowrap;font-weight:400;line-height:20px}.quick-button-container .logo-container[data-v-11470819]{position:relative;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer}.quick-button-container .logo-container .logo-outer-border[data-v-11470819]{position:absolute;width:36px;height:36px;border:1px solid rgba(255,255,255,.6);border-radius:10px;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease}.quick-button-container .logo-container .logo-outer-border .logo-inner-border[data-v-11470819]{width:30px;height:30px;border:1px solid rgb(255,255,255);border-radius:7px;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease}.quick-button-container .logo-container .logo-outer-border .logo-inner-border .logo-image[data-v-11470819]{width:24px;height:24px;border-radius:4px}.quick-button-container .logo-container.hide-borders .logo-outer-border[data-v-11470819],.quick-button-container .logo-container.hide-borders .logo-outer-border .logo-inner-border[data-v-11470819]{border-color:transparent}.quick-button-container .subtitle-popup-container[data-v-11470819]{position:absolute;bottom:calc(100% - 4px)}.quick-button-container .subtitle-popup-container.hide-borders[data-v-11470819]{bottom:calc(100% - 8px)}.quick-button-container .exceed-limit-tip[data-v-11470819]{width:300px;text-shadow:none;white-space:normal}.quick-button-container .no-caption-tip[data-v-11470819],.quick-button-container .error-tip[data-v-11470819],.quick-button-container .download-tip[data-v-11470819]{color:#fff;font-size:12px;line-height:16px;border-radius:8px;font-weight:400;padding:8px 12px;background-color:#000000bf;border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 32px #00000040}.quick-button-container .error-tip[data-v-11470819]{display:flex;align-items:center;gap:4px}.quick-button-container .error-tip .error-tip-close[data-v-11470819] svg path{stroke:currentColor;fill:currentColor}.quick-button-container[data-v-11470819] ::-webkit-scrollbar{width:4px}.quick-button-container[data-v-11470819] ::-webkit-scrollbar-thumb{background-color:#afafaf;border-radius:12px}.root[data-v-9e0591f1]{height:0px!important;width:0px!important;font-size:14px;line-height:normal;letter-spacing:normal;cursor:auto;color:initial;font-style:normal;font-weight:400;font-variant:normal;font-stretch:normal;word-spacing:normal;text-transform:none;text-indent:0;text-align:start;text-shadow:none;visibility:visible;white-space:normal}')})();
var Ii=Object.defineProperty;var Bi=(t,e,n)=>e in t?Ii(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ke=(t,e,n)=>Bi(t,typeof e!="symbol"?e+"":e,n);import{c as Ni,B as Pt,a as ro,b as Qt,_ as ze,u as Va,d as dn,e as ao,f as ut,g as ki,h as Er,i as Oi,j as Fi,o as nn,v as Lt,E as tr,L as Pi,k as so,l as Wa,M as oo,w as mn,C as Mi,T as Yn,m as io,n as $i,p as uo,q as lo,r as za,s as Ui}from"./BaseSwitch-Chx_y9q2.js";import{i as co,r as D,w as Te,u as et,g as We,S as ge,s as dt,a as Kn,b as an,d as qe,c as gt,e as oe,f as on,h as se,o as k,j as y,k as ie,n as Ae,t as de,l as z,m as Ze,p as Mt,q as I,O as jn,P as Kt,v as _t,T as G,x as dr,y as at,M as Ie,z as Sn,A as he,R as Nt,E as Fe,B as ja,C as _s,D as As,F as qi,G as Xr,H as Ue,I as ur,J as Hi,K as Lr,L as $e,N as fn,Q as po,U as vn,V as kt,W as Se,X as gr,Y as Ve,Z as rn,_ as xn,$ as $t,a0 as Rt,a1 as me,a2 as Tn,a3 as st,a4 as Yt,a5 as Gi,a6 as br,a7 as go,a8 as ys,a9 as pn,aa as Ct,ab as Vi,ac as Xa,ad as bn,ae as Fn,af as nt,ag as fo,ah as ho,ai as Rr,aj as mo,ak as vo,al as Eo,am as Ya,an as Wi,ao as Ka,ap as zi,aq as ji,ar as Xi,as as Oa,at as Xn,au as Yi,av as $n,aw as ca,ax as Ki,ay as bo,az as Yr,aA as pa,aB as To,aC as Kr,aD as Qr,aE as Jr,aF as Cs,aG as cn,aH as Qi,aI as Ji,aJ as Ds,aK as Zi,aL as Fa,aM as Un,aN as eu,aO as wo,aP as Cr,aQ as _o,aR as tu,aS as nu,aT as ru}from"./academia-BTetjztC.js";import{t as au}from"./translations-DP6Nrkut.js";(function(){var t=window.Document.prototype.createElement,e=window.Document.prototype.createElementNS,n=window.Document.prototype.importNode,r=window.Document.prototype.prepend,a=window.Document.prototype.append,s=window.DocumentFragment.prototype.prepend,o=window.DocumentFragment.prototype.append,u=window.Node.prototype.cloneNode,l=window.Node.prototype.appendChild,c=window.Node.prototype.insertBefore,h=window.Node.prototype.removeChild,v=window.Node.prototype.replaceChild,E=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),w=window.Element.prototype.attachShadow,L=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),R=window.Element.prototype.getAttribute,B=window.Element.prototype.setAttribute,m=window.Element.prototype.removeAttribute,A=window.Element.prototype.toggleAttribute,d=window.Element.prototype.getAttributeNS,i=window.Element.prototype.setAttributeNS,f=window.Element.prototype.removeAttributeNS,g=window.Element.prototype.insertAdjacentElement,P=window.Element.prototype.insertAdjacentHTML,W=window.Element.prototype.prepend,$=window.Element.prototype.append,ve=window.Element.prototype.before,Z=window.Element.prototype.after,fe=window.Element.prototype.replaceWith,N=window.Element.prototype.remove,x=window.HTMLElement,F=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),j=window.HTMLElement.prototype.insertAdjacentElement,Y=window.HTMLElement.prototype.insertAdjacentHTML,K=new Set;"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(p){return K.add(p)});function O(p){var _=K.has(p);return p=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(p),!_&&p}var J=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function X(p){var _=p.isConnected;if(_!==void 0)return _;if(J(p))return!0;for(;p&&!(p.__CE_isImportDocument||p instanceof Document);)p=p.parentNode||(window.ShadowRoot&&p instanceof ShadowRoot?p.host:void 0);return!(!p||!(p.__CE_isImportDocument||p instanceof Document))}function Be(p){var _=p.children;if(_)return Array.prototype.slice.call(_);for(_=[],p=p.firstChild;p;p=p.nextSibling)p.nodeType===Node.ELEMENT_NODE&&_.push(p);return _}function re(p,_){for(;_&&_!==p&&!_.nextSibling;)_=_.parentNode;return _&&_!==p?_.nextSibling:null}function V(p,_,C){for(var U=p;U;){if(U.nodeType===Node.ELEMENT_NODE){var S=U;_(S);var M=S.localName;if(M==="link"&&S.getAttribute("rel")==="import"){if(U=S.import,C===void 0&&(C=new Set),U instanceof Node&&!C.has(U))for(C.add(U),U=U.firstChild;U;U=U.nextSibling)V(U,_,C);U=re(p,S);continue}else if(M==="template"){U=re(p,S);continue}if(S=S.__CE_shadowRoot)for(S=S.firstChild;S;S=S.nextSibling)V(S,_,C)}U=U.firstChild?U.firstChild:re(p,U)}}function Q(){var p=!(rt==null||!rt.noDocumentConstructionObserver),_=!(rt==null||!rt.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=_,this.I=!p}function Ee(p,_,C,U){var S=window.ShadyDOM;if(p.shadyDomFastWalk&&S&&S.inUse){if(_.nodeType===Node.ELEMENT_NODE&&C(_),_.querySelectorAll)for(p=S.nativeMethods.querySelectorAll.call(_,"*"),_=0;_<p.length;_++)C(p[_])}else V(_,C,U)}function ee(p,_){p.j=!0,p.m.push(_)}function be(p,_){p.j=!0,p.g.push(_)}function ye(p,_){p.j&&Ee(p,_,function(C){return De(p,C)})}function De(p,_){if(p.j&&!_.__CE_patched){_.__CE_patched=!0;for(var C=0;C<p.m.length;C++)p.m[C](_);for(C=0;C<p.g.length;C++)p.g[C](_)}}function we(p,_){var C=[];for(Ee(p,_,function(S){return C.push(S)}),_=0;_<C.length;_++){var U=C[_];U.__CE_state===1?p.connectedCallback(U):Ne(p,U)}}function Me(p,_){var C=[];for(Ee(p,_,function(S){return C.push(S)}),_=0;_<C.length;_++){var U=C[_];U.__CE_state===1&&p.disconnectedCallback(U)}}function xe(p,_,C){C=C===void 0?{}:C;var U=C.J,S=C.upgrade||function(te){return Ne(p,te)},M=[];for(Ee(p,_,function(te){if(p.j&&De(p,te),te.localName==="link"&&te.getAttribute("rel")==="import"){var ue=te.import;ue instanceof Node&&(ue.__CE_isImportDocument=!0,ue.__CE_registry=document.__CE_registry),ue&&ue.readyState==="complete"?ue.__CE_documentLoadHandled=!0:te.addEventListener("load",function(){var T=te.import;if(!T.__CE_documentLoadHandled){T.__CE_documentLoadHandled=!0;var b=new Set;U&&(U.forEach(function(H){return b.add(H)}),b.delete(T)),xe(p,T,{J:b,upgrade:S})}})}else M.push(te)},U),_=0;_<M.length;_++)S(M[_])}function Ne(p,_){try{var C=_.ownerDocument,U=C.__CE_registry,S=U&&(C.defaultView||C.__CE_isImportDocument)?Ce(U,_.localName):void 0;if(S&&_.__CE_state===void 0){S.constructionStack.push(_);try{try{if(new S.constructorFunction!==_)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{S.constructionStack.pop()}}catch(T){throw _.__CE_state=2,T}if(_.__CE_state=1,_.__CE_definition=S,S.attributeChangedCallback&&_.hasAttributes()){var M=S.observedAttributes;for(S=0;S<M.length;S++){var te=M[S],ue=_.getAttribute(te);ue!==null&&p.attributeChangedCallback(_,te,null,ue,null)}}X(_)&&p.connectedCallback(_)}}catch(T){Qe(T)}}Q.prototype.connectedCallback=function(p){var _=p.__CE_definition;if(_.connectedCallback)try{_.connectedCallback.call(p)}catch(C){Qe(C)}},Q.prototype.disconnectedCallback=function(p){var _=p.__CE_definition;if(_.disconnectedCallback)try{_.disconnectedCallback.call(p)}catch(C){Qe(C)}},Q.prototype.attributeChangedCallback=function(p,_,C,U,S){var M=p.__CE_definition;if(M.attributeChangedCallback&&-1<M.observedAttributes.indexOf(_))try{M.attributeChangedCallback.call(p,_,C,U,S)}catch(te){Qe(te)}};function Ke(p,_,C,U){var S=_.__CE_registry;if(S&&(U===null||U==="http://www.w3.org/1999/xhtml")&&(S=Ce(S,C)))try{var M=new S.constructorFunction;if(M.__CE_state===void 0||M.__CE_definition===void 0)throw Error("Failed to construct '"+C+"': The returned value was not constructed with the HTMLElement constructor.");if(M.namespaceURI!=="http://www.w3.org/1999/xhtml")throw Error("Failed to construct '"+C+"': The constructed element's namespace must be the HTML namespace.");if(M.hasAttributes())throw Error("Failed to construct '"+C+"': The constructed element must not have any attributes.");if(M.firstChild!==null)throw Error("Failed to construct '"+C+"': The constructed element must not have any children.");if(M.parentNode!==null)throw Error("Failed to construct '"+C+"': The constructed element must not have a parent node.");if(M.ownerDocument!==_)throw Error("Failed to construct '"+C+"': The constructed element's owner document is incorrect.");if(M.localName!==C)throw Error("Failed to construct '"+C+"': The constructed element's local name is incorrect.");return M}catch(te){return Qe(te),_=U===null?t.call(_,C):e.call(_,U,C),Object.setPrototypeOf(_,HTMLUnknownElement.prototype),_.__CE_state=2,_.__CE_definition=void 0,De(p,_),_}return _=U===null?t.call(_,C):e.call(_,U,C),De(p,_),_}function Qe(p){var _="",C="",U=0,S=0;p instanceof Error?(_=p.message,C=p.sourceURL||p.fileName||"",U=p.line||p.lineNumber||0,S=p.column||p.columnNumber||0):_="Uncaught "+String(p);var M=void 0;ErrorEvent.prototype.initErrorEvent===void 0?M=new ErrorEvent("error",{cancelable:!0,message:_,filename:C,lineno:U,colno:S,error:p}):(M=document.createEvent("ErrorEvent"),M.initErrorEvent("error",!1,!0,_,C,U),M.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),M.error===void 0&&Object.defineProperty(M,"error",{configurable:!0,enumerable:!0,get:function(){return p}}),window.dispatchEvent(M),M.defaultPrevented||console.error(p)}function He(){var p=this;this.g=void 0,this.F=new Promise(function(_){p.l=_})}He.prototype.resolve=function(p){if(this.g)throw Error("Already resolved.");this.g=p,this.l(p)};function vt(p){var _=document;this.l=void 0,this.h=p,this.g=_,xe(this.h,this.g),this.g.readyState==="loading"&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function Et(p){p.l&&p.l.disconnect()}vt.prototype.G=function(p){var _=this.g.readyState;for(_!=="interactive"&&_!=="complete"||Et(this),_=0;_<p.length;_++)for(var C=p[_].addedNodes,U=0;U<C.length;U++)xe(this.h,C[U])};function Oe(p){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(_){return _()},this.i=!1,this.v=[],this.h=p,this.D=p.I?new vt(p):void 0}Oe.prototype.H=function(p,_){var C=this;if(!(_ instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");lt(this,p),this.s.set(p,_),this.v.push(p),this.i||(this.i=!0,this.o(function(){return Le(C)}))},Oe.prototype.define=function(p,_){var C=this;if(!(_ instanceof Function))throw new TypeError("Custom element constructors must be functions.");lt(this,p),Dt(this,p,_),this.v.push(p),this.i||(this.i=!0,this.o(function(){return Le(C)}))};function lt(p,_){if(!O(_))throw new SyntaxError("The element name '"+_+"' is not valid.");if(Ce(p,_))throw Error("A custom element with name '"+(_+"' has already been defined."));if(p.A)throw Error("A custom element is already being defined.")}function Dt(p,_,C){p.A=!0;var U;try{var S=C.prototype;if(!(S instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var M=function(H){var le=S[H];if(le!==void 0&&!(le instanceof Function))throw Error("The '"+H+"' callback must be a function.");return le},te=M("connectedCallback"),ue=M("disconnectedCallback"),T=M("adoptedCallback"),b=(U=M("attributeChangedCallback"))&&C.observedAttributes||[]}catch(H){throw H}finally{p.A=!1}return C={localName:_,constructorFunction:C,connectedCallback:te,disconnectedCallback:ue,adoptedCallback:T,attributeChangedCallback:U,observedAttributes:b,constructionStack:[]},p.u.set(_,C),p.C.set(C.constructorFunction,C),C}Oe.prototype.upgrade=function(p){xe(this.h,p)};function Le(p){if(p.i!==!1){p.i=!1;for(var _=[],C=p.v,U=new Map,S=0;S<C.length;S++)U.set(C[S],[]);for(xe(p.h,document,{upgrade:function(T){if(T.__CE_state===void 0){var b=T.localName,H=U.get(b);H?H.push(T):p.u.has(b)&&_.push(T)}}}),S=0;S<_.length;S++)Ne(p.h,_[S]);for(S=0;S<C.length;S++){for(var M=C[S],te=U.get(M),ue=0;ue<te.length;ue++)Ne(p.h,te[ue]);(M=p.B.get(M))&&M.resolve(void 0)}C.length=0}}Oe.prototype.get=function(p){if(p=Ce(this,p))return p.constructorFunction},Oe.prototype.whenDefined=function(p){if(!O(p))return Promise.reject(new SyntaxError("'"+p+"' is not a valid custom element name."));var _=this.B.get(p);if(_)return _.F;_=new He,this.B.set(p,_);var C=this.u.has(p)||this.s.has(p);return p=this.v.indexOf(p)===-1,C&&p&&_.resolve(void 0),_.F},Oe.prototype.polyfillWrapFlushCallback=function(p){this.D&&Et(this.D);var _=this.o;this.o=function(C){return p(function(){return _(C)})}};function Ce(p,_){var C=p.u.get(_);if(C)return C;if(C=p.s.get(_)){p.s.delete(_);try{return Dt(p,_,C())}catch(U){Qe(U)}}}Oe.prototype.define=Oe.prototype.define,Oe.prototype.upgrade=Oe.prototype.upgrade,Oe.prototype.get=Oe.prototype.get,Oe.prototype.whenDefined=Oe.prototype.whenDefined,Oe.prototype.polyfillDefineLazy=Oe.prototype.H,Oe.prototype.polyfillWrapFlushCallback=Oe.prototype.polyfillWrapFlushCallback;function Ge(p,_,C){function U(S){return function(M){for(var te=[],ue=0;ue<arguments.length;++ue)te[ue]=arguments[ue];ue=[];for(var T=[],b=0;b<te.length;b++){var H=te[b];if(H instanceof Element&&X(H)&&T.push(H),H instanceof DocumentFragment)for(H=H.firstChild;H;H=H.nextSibling)ue.push(H);else ue.push(H)}for(S.apply(this,te),te=0;te<T.length;te++)Me(p,T[te]);if(X(this))for(te=0;te<ue.length;te++)T=ue[te],T instanceof Element&&we(p,T)}}C.prepend!==void 0&&(_.prepend=U(C.prepend)),C.append!==void 0&&(_.append=U(C.append))}function At(p){Document.prototype.createElement=function(_){return Ke(p,this,_,null)},Document.prototype.importNode=function(_,C){return _=n.call(this,_,!!C),this.__CE_registry?xe(p,_):ye(p,_),_},Document.prototype.createElementNS=function(_,C){return Ke(p,this,C,_)},Ge(p,Document.prototype,{prepend:r,append:a})}function ct(p){function _(U){return function(S){for(var M=[],te=0;te<arguments.length;++te)M[te]=arguments[te];te=[];for(var ue=[],T=0;T<M.length;T++){var b=M[T];if(b instanceof Element&&X(b)&&ue.push(b),b instanceof DocumentFragment)for(b=b.firstChild;b;b=b.nextSibling)te.push(b);else te.push(b)}for(U.apply(this,M),M=0;M<ue.length;M++)Me(p,ue[M]);if(X(this))for(M=0;M<te.length;M++)ue=te[M],ue instanceof Element&&we(p,ue)}}var C=Element.prototype;ve!==void 0&&(C.before=_(ve)),Z!==void 0&&(C.after=_(Z)),fe!==void 0&&(C.replaceWith=function(U){for(var S=[],M=0;M<arguments.length;++M)S[M]=arguments[M];M=[];for(var te=[],ue=0;ue<S.length;ue++){var T=S[ue];if(T instanceof Element&&X(T)&&te.push(T),T instanceof DocumentFragment)for(T=T.firstChild;T;T=T.nextSibling)M.push(T);else M.push(T)}for(ue=X(this),fe.apply(this,S),S=0;S<te.length;S++)Me(p,te[S]);if(ue)for(Me(p,this),S=0;S<M.length;S++)te=M[S],te instanceof Element&&we(p,te)}),N!==void 0&&(C.remove=function(){var U=X(this);N.call(this),U&&Me(p,this)})}function ne(p){function _(S,M){Object.defineProperty(S,"innerHTML",{enumerable:M.enumerable,configurable:!0,get:M.get,set:function(te){var ue=this,T=void 0;if(X(this)&&(T=[],Ee(p,this,function(le){le!==ue&&T.push(le)})),M.set.call(this,te),T)for(var b=0;b<T.length;b++){var H=T[b];H.__CE_state===1&&p.disconnectedCallback(H)}return this.ownerDocument.__CE_registry?xe(p,this):ye(p,this),te}})}function C(S,M){S.insertAdjacentElement=function(te,ue){var T=X(ue);return te=M.call(this,te,ue),T&&Me(p,ue),X(te)&&we(p,ue),te}}function U(S,M){function te(ue,T){for(var b=[];ue!==T;ue=ue.nextSibling)b.push(ue);for(T=0;T<b.length;T++)xe(p,b[T])}S.insertAdjacentHTML=function(ue,T){if(ue=ue.toLowerCase(),ue==="beforebegin"){var b=this.previousSibling;M.call(this,ue,T),te(b||this.parentNode.firstChild,this)}else if(ue==="afterbegin")b=this.firstChild,M.call(this,ue,T),te(this.firstChild,b);else if(ue==="beforeend")b=this.lastChild,M.call(this,ue,T),te(b||this.firstChild,null);else if(ue==="afterend")b=this.nextSibling,M.call(this,ue,T),te(this.nextSibling,b);else throw new SyntaxError("The value provided ("+String(ue)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.")}}w&&(Element.prototype.attachShadow=function(S){if(S=w.call(this,S),p.j&&!S.__CE_patched){S.__CE_patched=!0;for(var M=0;M<p.m.length;M++)p.m[M](S)}return this.__CE_shadowRoot=S}),L&&L.get?_(Element.prototype,L):F&&F.get?_(HTMLElement.prototype,F):be(p,function(S){_(S,{enumerable:!0,configurable:!0,get:function(){return u.call(this,!0).innerHTML},set:function(M){var te=this.localName==="template",ue=te?this.content:this,T=e.call(document,this.namespaceURI,this.localName);for(T.innerHTML=M;0<ue.childNodes.length;)h.call(ue,ue.childNodes[0]);for(M=te?T.content:T;0<M.childNodes.length;)l.call(ue,M.childNodes[0])}})}),Element.prototype.setAttribute=function(S,M){if(this.__CE_state!==1)return B.call(this,S,M);var te=R.call(this,S);B.call(this,S,M),M=R.call(this,S),p.attributeChangedCallback(this,S,te,M,null)},Element.prototype.setAttributeNS=function(S,M,te){if(this.__CE_state!==1)return i.call(this,S,M,te);var ue=d.call(this,S,M);i.call(this,S,M,te),te=d.call(this,S,M),p.attributeChangedCallback(this,M,ue,te,S)},Element.prototype.removeAttribute=function(S){if(this.__CE_state!==1)return m.call(this,S);var M=R.call(this,S);m.call(this,S),M!==null&&p.attributeChangedCallback(this,S,M,null,null)},A&&(Element.prototype.toggleAttribute=function(S,M){if(this.__CE_state!==1)return A.call(this,S,M);var te=R.call(this,S),ue=te!==null;return M=A.call(this,S,M),ue!==M&&p.attributeChangedCallback(this,S,te,M?"":null,null),M}),Element.prototype.removeAttributeNS=function(S,M){if(this.__CE_state!==1)return f.call(this,S,M);var te=d.call(this,S,M);f.call(this,S,M);var ue=d.call(this,S,M);te!==ue&&p.attributeChangedCallback(this,M,te,ue,S)},j?C(HTMLElement.prototype,j):g&&C(Element.prototype,g),Y?U(HTMLElement.prototype,Y):P&&U(Element.prototype,P),Ge(p,Element.prototype,{prepend:W,append:$}),ct(p)}var _e={};function Xe(p){function _(){var C=this.constructor,U=document.__CE_registry.C.get(C);if(!U)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var S=U.constructionStack;if(S.length===0)return S=t.call(document,U.localName),Object.setPrototypeOf(S,C.prototype),S.__CE_state=1,S.__CE_definition=U,De(p,S),S;var M=S.length-1,te=S[M];if(te===_e)throw Error("Failed to construct '"+U.localName+"': This element was already constructed.");return S[M]=_e,Object.setPrototypeOf(te,C.prototype),De(p,te),te}_.prototype=x.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:_}),window.HTMLElement=_}function ft(p){function _(C,U){Object.defineProperty(C,"textContent",{enumerable:U.enumerable,configurable:!0,get:U.get,set:function(S){if(this.nodeType===Node.TEXT_NODE)U.set.call(this,S);else{var M=void 0;if(this.firstChild){var te=this.childNodes,ue=te.length;if(0<ue&&X(this)){M=Array(ue);for(var T=0;T<ue;T++)M[T]=te[T]}}if(U.set.call(this,S),M)for(S=0;S<M.length;S++)Me(p,M[S])}}})}Node.prototype.insertBefore=function(C,U){if(C instanceof DocumentFragment){var S=Be(C);if(C=c.call(this,C,U),X(this))for(U=0;U<S.length;U++)we(p,S[U]);return C}return S=C instanceof Element&&X(C),U=c.call(this,C,U),S&&Me(p,C),X(this)&&we(p,C),U},Node.prototype.appendChild=function(C){if(C instanceof DocumentFragment){var U=Be(C);if(C=l.call(this,C),X(this))for(var S=0;S<U.length;S++)we(p,U[S]);return C}return U=C instanceof Element&&X(C),S=l.call(this,C),U&&Me(p,C),X(this)&&we(p,C),S},Node.prototype.cloneNode=function(C){return C=u.call(this,!!C),this.ownerDocument.__CE_registry?xe(p,C):ye(p,C),C},Node.prototype.removeChild=function(C){var U=C instanceof Element&&X(C),S=h.call(this,C);return U&&Me(p,C),S},Node.prototype.replaceChild=function(C,U){if(C instanceof DocumentFragment){var S=Be(C);if(C=v.call(this,C,U),X(this))for(Me(p,U),U=0;U<S.length;U++)we(p,S[U]);return C}S=C instanceof Element&&X(C);var M=v.call(this,C,U),te=X(this);return te&&Me(p,U),S&&Me(p,C),te&&we(p,C),M},E&&E.get?_(Node.prototype,E):ee(p,function(C){_(C,{enumerable:!0,configurable:!0,get:function(){for(var U=[],S=this.firstChild;S;S=S.nextSibling)S.nodeType!==Node.COMMENT_NODE&&U.push(S.textContent);return U.join("")},set:function(U){for(;this.firstChild;)h.call(this,this.firstChild);U!=null&&U!==""&&l.call(this,document.createTextNode(U))}})})}var rt=window.customElements;function ce(){var p=new Q;Xe(p),At(p),Ge(p,DocumentFragment.prototype,{prepend:s,append:o}),ft(p),ne(p),window.CustomElementRegistry=Oe,p=new Oe(p),document.__CE_registry=p,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:p})}rt&&!rt.forcePolyfill&&typeof rt.define=="function"&&typeof rt.get=="function"||ce(),window.__CE_installPolyfill=ce}).call(self);function Fr(t){const e=window.getComputedStyle(t);return e.display!=="none"&&e.visibility!=="hidden"&&e.opacity!=="0"}function Ao(t){const n=t.getBoundingClientRect();return n.top<=20&&n.width>=window.innerWidth/2}function yo(t){const n=t.getBoundingClientRect();return n.bottom>=window.innerHeight-20&&n.width>=window.innerWidth/2}function su(t){return t.getBoundingClientRect().top<=window.innerHeight/2}function ou(t){return t.getBoundingClientRect().top>window.innerHeight/2}function Ss(t){const a=window.getComputedStyle(t),s=t.getBoundingClientRect(),o=s.left<=20||s.right>=window.innerWidth-20,u=s.width<=100&&s.height<=200,l=a.position==="fixed";return o&&u&&l}function iu(t){const e=[];return Array.from(t.querySelectorAll("*")).forEach(n=>{const r=window.getComputedStyle(n);(r.position==="fixed"&&Fr(n)||r.position==="sticky"&&Fr(n)&&(Ao(n)||yo(n)))&&e.push({el:n,originalStyle:{visibility:r.visibility,transition:r.transition}})}),e}function uu(){let t=[];return Array.from(document.querySelectorAll("*")).forEach(e=>{if(e instanceof Element&&e.shadowRoot){const r=iu(e.shadowRoot);t=t.concat(r);return}const n=window.getComputedStyle(e);(n.position==="fixed"&&Fr(e)||n.position==="sticky"&&Fr(e)&&(Ao(e)||yo(e)))&&t.push({el:e,originalStyle:{visibility:n.visibility,transition:n.transition,opacity:n.opacity}})}),t}function lu(){const t=document.createElement("style");t.setAttribute("data-disable-transitions","true"),t.innerHTML=`
    * {
      transition: none !important;
    }
  `,document.head.appendChild(t)}function cu(){const t=document.querySelector('style[data-disable-transitions="true"]');t&&t.remove()}function pu(t=!1,e=!1){const n=uu();return n.forEach(r=>{const{el:a}=r;a&&(t&&su(a)&&!Ss(a)||e&&(ou(a)||Ss(a))||(a.style.transition="none",a.style.visibility="hidden",a.style.opacity="0"))}),n}function du(t){t.forEach(e=>{const{el:n,originalStyle:r}=e,{visibility:a,transition:s,opacity:o}=r;n.style.visibility=a,n.style.transition=s,o&&(n.style.opacity=o)})}function gu(){document.body.style.overflow="hidden"}function fu(t="auto"){document.body.style.overflow=t}function xs(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}function hu(t){return window.getComputedStyle(t).direction==="rtl"}function mu(t){const e=window.getComputedStyle(t),n=e.direction==="rtl",r=`${e.fontWeight} ${e.fontSize} ${e.fontFamily}`,a=parseFloat(e.lineHeight)||parseFloat(e.fontSize)*1.2,s=parseFloat(e.paddingTop),o=parseFloat(e.paddingLeft),u=parseFloat(e.paddingRight),l=t.clientWidth-o-u,h=document.createElement("canvas").getContext("2d");if(!h)return{lines:[],lineRects:[]};h.font=r;const v=t.value.split(`
`),E=[],w=[];let L=s;const R=t.getBoundingClientRect(),B=t.scrollTop,m=A=>n?{left:R.right-A,right:R.right}:{left:R.left,right:R.left+A};for(const A of v){if(A===""){E.push("");const f=R.top+L-B;w.push({top:f,bottom:f+a,...m(0),text:""}),L+=a;continue}const d=A.match(/(\S+\s*|\s+)/g)||[];let i="";for(let f=0;f<d.length;f++){const g=d[f];if(h.measureText(g).width>l){if(i){const ve=R.top+L-B;w.push({top:ve,bottom:ve+a,...m(h.measureText(i).width),text:i}),E.push(i),L+=a,i=""}let $="";for(let ve=0;ve<g.length;ve++){const Z=$+g[ve];if(h.measureText(Z).width>l&&$!==""){const fe=R.top+L-B;w.push({top:fe,bottom:fe+a,...m(h.measureText($).width),text:$}),E.push($),L+=a,$=g[ve]}else $=Z}if($){const ve=R.top+L-B;w.push({top:ve,bottom:ve+a,...m(h.measureText($).width),text:$}),E.push($),L+=a}continue}const P=i+g;if(h.measureText(P).width>l&&i!==""){const $=R.top+L-B;w.push({top:$,bottom:$+a,...m(h.measureText(i).width),text:i}),E.push(i),L+=a,i=g}else i=P}if(i!==""||d.length===0){const f=R.top+L-B;w.push({top:f,bottom:f+a,...m(h.measureText(i).width),text:i}),E.push(i),L+=a}}return{lines:E,lineRects:w}}function vu(t){const e=[];function n(r){r.nodeType===Node.TEXT_NODE&&r.textContent&&r.parentElement?e.push(r):r.childNodes.forEach(n)}return n(t),e}function Eu(t){if(!t.parentElement)return null;const e=document.createRange();return e.selectNodeContents(t),e.getBoundingClientRect()}const bu=t=>{const e=[];let n=t.parentElement;for(;n;){const r=window.getComputedStyle(n).overflowY;(r==="scroll"||r==="auto")&&n.scrollHeight>n.clientHeight&&e.push(n),n=n.parentElement}return e};function Tu(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),a=Math.max(r.top,n.top),s=Math.max(r.left,n.left),o=Math.min(r.bottom,n.bottom),u=Math.min(r.right,n.right),l=Math.max(0,u-s),c=Math.max(0,o-a);return{top:a,left:s,width:l,height:c}}const da=(t,e,n=!1)=>{const r=typeof n=="boolean"?{selectAll:n}:n,{selectAll:a=!1,savedRange:s,savedSelectionStart:o,savedSelectionEnd:u}=r;if((e==null?void 0:e.tagName)==="TEXTAREA"){e.focus();const l=e;o!==void 0&&o!==-1?l.setSelectionRange(o,u||o):a&&l.setSelectionRange(0,l.value.length),document.execCommand("insertText",!1,t);return}if(e!=null&&e.isContentEditable){if(e.focus(),a){const l=document.createRange();l.selectNodeContents(e);const c=window.getSelection();c&&(c.removeAllRanges(),c.addRange(l))}else if(s){const l=window.getSelection();l&&(l.removeAllRanges(),l.addRange(s))}document.execCommand("insertText",!1,t);return}};function Qa(){return!!(location.pathname.toLowerCase().endsWith(".pdf")||document.contentType==="application/pdf")}function wu(){return Qa()?[location.href]:[...Array.from(document.querySelectorAll('embed[type="application/pdf"]')).map(n=>n.src),...Array.from(document.querySelectorAll('object[type="application/pdf"]')).map(n=>n.data),...Array.from(document.querySelectorAll('iframe[src$=".pdf"]')).map(n=>n.src)].filter(n=>n&&!n.startsWith("data:")&&!n.startsWith("blob:")).map(n=>n.startsWith("//")?`https:${n}`:n)}function _u(){try{return typeof window>"u"?!1:window.self!==window.top}catch{return!1}}function en(){const t=document.documentElement.getAttribute("dir");if(t==="rtl")return!0;if(t==="ltr")return!1;const e=document.body.getAttribute("dir");if(e==="rtl")return!0;if(e==="ltr")return!1;const n=window.getComputedStyle(document.documentElement).direction;if(n==="rtl")return!0;if(n==="ltr")return!1;const r=window.getComputedStyle(document.body).direction;return r==="rtl"}var fr=(t=>(t.INSERT_BEFORE="insertBefore",t.APPEND_CHILD="appendChild",t.PREPEND_CHILD="prependChild",t.INSERT_AFTER="insertAfter",t.REPLACE_CHILD="replaceChild",t))(fr||{});function Pr(t,e,n){var r,a,s,o;switch(n){case"insertBefore":(r=t.parentNode)==null||r.insertBefore(e,t);break;case"appendChild":t.appendChild(e);break;case"prependChild":t.insertBefore(e,t.firstChild);break;case"insertAfter":t.nextSibling?(a=t.parentNode)==null||a.insertBefore(e,t.nextSibling):(s=t.parentNode)==null||s.appendChild(e);break;case"replaceChild":(o=t.parentNode)==null||o.replaceChild(e,t);break}}function Au(t){for(;t.firstChild;)t.removeChild(t.firstChild)}const yu="__wps-translate-entry-content-css__";class Cu extends HTMLElement{constructor(){super(...arguments);ke(this,"shadow",null);ke(this,"vueApp",null);ke(this,"appComponent",null)}connectedCallback(){if(!this.shadow){this.shadow=this.attachShadow({mode:"open"});const n=window[yu];n&&n.forEach(r=>{var s;const a=document.createElement("style");a.appendChild(document.createTextNode(r)),(s=this.shadow)==null||s.appendChild(a)})}!this.vueApp&&this.appComponent&&(this.vueApp=this.createVueApp(this.shadow,this.appComponent))}disconnectedCallback(){this.vueApp&&this.vueApp.unmount(),this.vueApp=null,this.shadow=null}createVueApp(n,r){const a=Ni(r);return a.use(co),a.mount(n),a}cleanup(){this.disconnectedCallback()}}function Du(t){customElements.get(t)||customElements.define(t,Cu)}function Qn(t,e,n=!0){if(n){let a=document.querySelectorAll(t);a&&(a.forEach(s=>s.remove()),a=null)}Du(t);const r=document.createElement(t);return r.appComponent=e,r}const{userSettings:Co,settingRefreshedFlag:Su}=et(),{onlineParams:xu}=an(),Ls=D(!1);Te(Co,async(t,e)=>{if(Su.value){if(!t.pageTranslation.continueTranslateEnable){Kn(ge.CONTINUE_TRANSLATE_FLAG);return}t.pageTranslation.continueTranslateTime!==e.pageTranslation.continueTranslateTime&&await We(ge.CONTINUE_TRANSLATE_FLAG)&&dt(ge.CONTINUE_TRANSLATE_FLAG,!0,t.pageTranslation.continueTranslateTime*60*1e3)}});function Zr(){return{checkDialogAndUpdateUsageInfo:async()=>{var u;let{continueTranslateEnable:n,continueTranslateTime:r}=Co.value.pageTranslation;const a=await We(ge.TEMP_CONFIGS);if(a&&a.continueTranslateEnable!==void 0&&(n=a.continueTranslateEnable,r=a.continueTranslateTime||15),n&&r>0){await We(ge.CONTINUE_TRANSLATE_FLAG)||dt(ge.CONTINUE_TRANSLATE_FLAG,!0,r*60*1e3);return}Kn(ge.CONTINUE_TRANSLATE_FLAG);const s=(u=xu.value)==null?void 0:u.continueTranslate;if(!s)return;const o=await We(ge.CONTINUE_TRANSLATE_USE_INFO);if(!o){dt(ge.CONTINUE_TRANSLATE_USE_INFO,{time:Date.now(),count:1});return}if(Date.now()-o.time<s.duration*60*1e3)if(o.count++,o.count>=s.count){Kn(ge.CONTINUE_TRANSLATE_USE_INFO);const l=await We(ge.CONTINUE_TRANSLATE_DIALOG_SHOW_TIME);(!l||Date.now()-l>s.dialogGap*24*60*60*1e3)&&(Ls.value=!0,dt(ge.CONTINUE_TRANSLATE_DIALOG_SHOW_TIME,Date.now()))}else dt(ge.CONTINUE_TRANSLATE_USE_INFO,o);else dt(ge.CONTINUE_TRANSLATE_USE_INFO,{time:Date.now(),count:1})},continueTranslateDialogShow:Ls,checkPageContinueTranslate:async n=>{const{userSettings:r}=et();let{continueTranslateEnable:a}=r.value.pageTranslation;const s=await We(ge.CONTINUE_TRANSLATE_FLAG),o=await We(ge.TEMP_CONFIGS);return o&&o.continueTranslateEnable!==void 0&&(a=o.continueTranslateEnable),n===r.value.targetLanguage?!1:!!(a&&s)}}}const Lu={class:"continue-translate-dialog"},Ru={class:"dialog-header"},Iu=["src"],Bu={class:"dialog-content"},Nu={class:"description"},ku={class:"duration-selector"},Ou={style:{"font-size":"16px","font-weight":"600"}},Fu={class:"dialog-footer"},Pu=qe({__name:"ContinueTranslateSetting",setup(t){const{locale:e,t:n}=gt(),{continueTranslateDialogShow:r}=Zr(),{notifyUserSettings:a,getSettingByKey:s}=et(),o=oe(()=>on(e.value)),u=()=>chrome.runtime.getURL("public/logo/icon-128.png"),l=[{value:0,label:n("common.off")},{value:15,label:n("continueTranslate.minutes",["15"])},{value:30,label:n("continueTranslate.minutes",["30"])},{value:60,label:n("continueTranslate.hour")},{value:180,label:n("continueTranslate.hours",["3"])}],c=D(15);Te(c,w=>{I.reportClickEvent("plugin_always_translate_popup","always_translate_duration_list_select",{selected_item:w})});const h=()=>{I.reportClickEvent("plugin_always_translate_popup","always_translate_duration")},v=()=>{r.value=!1,I.reportClickEvent("plugin_always_translate_popup","close")},E=async()=>{r.value=!1;const w=s("pageTranslation");c.value===0?w.continueTranslateEnable=!1:(w.continueTranslateEnable=!0,w.continueTranslateTime=c.value),a({pageTranslation:w}),I.reportClickEvent("plugin_always_translate_popup","confirm",{selected_item:c.value})};return(w,L)=>(k(),se("div",Lu,[y("div",Ru,[y("div",{class:"header-logo",style:Ae({"flex-direction":o.value?"row-reverse":"row","justify-content":o.value?"flex-end":"flex-start"})},[y("img",{src:u(),class:"logo-icon"},null,8,Iu),L[1]||(L[1]=y("div",{class:"logo-name"}," AnyDoc Translator ",-1))],4),ie(Pt,{icon:"close",size:28,onClick:v})]),y("div",Bu,[y("p",Nu,de(z(n)("continueTranslate.desc")),1),y("div",ku,[ie(ro,{onClick:h,modelValue:c.value,"onUpdate:modelValue":L[0]||(L[0]=R=>c.value=R),options:l,size:"medium",class:"duration-select"},{labelDesc:Ze(()=>[y("span",Ou,de(z(n)("continueTranslate.durationLabel")),1)]),_:1},8,["modelValue"])])]),y("div",Fu,[ie(Qt,{class:"confirm-btn",size:"large",block:"",type:"primary",onClick:E},{default:Ze(()=>[Mt(de(z(n)("common.confirm")),1)]),_:1})])]))}}),Mu=ze(Pu,[["__scopeId","data-v-96293be0"]]),$u=D(!1);function Do(){return{onBoardingShow:$u}}const{userInfo:Mr}=_t(),So=D(!1),xo=D(!1),Lo=D(!1),Ro=D(!1),cr={[Kt.HOVER_BALL]:So,[jn.TEXTBOX]:xo,[jn.SELECT_TEXT]:Lo,[jn.SUBTITLE]:Ro};let Dr={disable:!1,gap:3,times:2};Te(Mr,()=>{Mr.value&&Object.values(cr).forEach(t=>{t.value=!1})});function Tr(){const t=async()=>{if(Mr.value)return;const a=await We(ge.NO_LOGIN_TRANSLATE_USE_TIME,0);await dt(ge.NO_LOGIN_TRANSLATE_USE_TIME,a+1)},e=async a=>{await r()&&(cr[a]&&(cr[a].value=!0),await dt(ge.LOGIN_TIPS_SHOW_TIME,Date.now()))},n=async a=>{cr[a]&&(cr[a].value=!1)},r=async()=>{var u;if(Mr.value)return!1;const{onlineParams:a}=an();if((u=a.value)!=null&&u.loginGuid&&(Dr=a.value.loginGuid),Dr.disable)return!1;const s=await We(ge.NO_LOGIN_TRANSLATE_USE_TIME,0),o=await We(ge.LOGIN_TIPS_SHOW_TIME);return!!(!o&&s>=Dr.times||o&&Date.now()-o>Dr.gap*24*60*60*1e3)};return{loginTipShow:So,textBoxLoginTipShow:xo,selectTextLoginTipShow:Lo,subtitleLoginTipShow:Ro,setNoLoginTranslateUseCount:t,showLoginTipGuid:e,checkLoginTipShow:r,closeLoginTipGuid:n}}class Ir{static debounce(e,n){let r=null;return function(){r&&clearTimeout(r),r=setTimeout(()=>{e.apply(this,arguments)},n)}}static throttle(e,n){let r=0;return function(){const a=Date.now();a-r>n&&(e.apply(this,arguments),r=a)}}static isBlockStyleElement(e){const n=window.getComputedStyle(e).getPropertyValue("display"),r=window.getComputedStyle(e,"::after").getPropertyValue("display"),a=["block","flex","grid","table","table-row-group","table-row","table-cell","table-column","table-column-group","table-header-group","table-footer-group","table-caption","inline-table","list-item","-webkit-box"];return a.includes(n)||a.includes(r)}}class Uu{constructor(e,n,r){this.debug=!1,this.appName=e,this.siteRules=n,this.debug=r,this.loadStyles()}get TAG(){return{CONTAINER:`${this.appName}-translation`,LOADING:`${this.appName}-tanslation-loading`,ERROR:`${this.appName}-tanslation-error`,RESULT:`${this.appName}-tanslation-text`}}get CLASS(){return{INLINE:`${this.appName}-translation-inline`,BLOCK:`${this.appName}-translation-block`,THEME:`${this.appName}-translation-theme`,REPLACE:`${this.appName}-translation-replace`,CLEAR_LINE_CLAMP:`${this.appName}-translation-clear-line-clamp`}}get styles(){const e=this.siteRules.map(n=>n.styleHandler?n.styleHandler(this.TAG,this.CLASS):"").join(`
`);return`
      ${this.TAG.CONTAINER}.${this.CLASS.INLINE} {
        margin: 0 0 0 4px;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} {
        display: block;
        margin: 8px 0;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} + br {
        display: none;
      }
      ${this.TAG.CONTAINER} ${this.TAG.LOADING} {
        display: inline-block;
        width: 14px;
        height: 14px;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-top: 2px solid transparent;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        vertical-align: middle;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} ${this.TAG.RESULT} {
        display: inline-block;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT} {}
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.REPLACE} {
        display: initial;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-default {}
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-weakness {
        opacity: .6;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-primary,
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-primary * {
        color: #007bff;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-highlight {
        background-color: #117efe0f;
        padding: 0 5px;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} ${this.TAG.RESULT}.${this.CLASS.THEME}-highlight {
        padding: 12px;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-underline {
        display: inline;
        border-bottom: 1px dotted;
      }
      ${this.TAG.CONTAINER} ${this.TAG.ERROR} {
        display: inline-block;
        width: 14px;
        height: 14px;
        vertical-align: middle;
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAUpJREFUOE+lkzFLA1EQhGdCigSxFCy0EDsFQSGgwU6ws7DQLk309uUHmEIQoiAWRrB9t4mN+APsbLWxENQiGLSzsPAX2HkrCRpiPEmOvHr2Y2dnHjHkY9x8oVAYyWQyMwBmSY6RfCLZ9N6/9ur/AIIgWCdZBfBpZvck3wEsAlgys5NarVbuhvwCiMgVgGWS5TAMfbfQObcC4AhAg+SlmeXCMKx0AM65HTM7BJBX1Yc4a8VicTSdTp8BWCN53AG0PGez2WcAF6q6+99dRaQCYBvABIADVd1vbxAEQY7kHYA5VW30C0ZEpqMomqzX69dtgHNuy8z2VHWq33BsCkMDkloolUrzURS9qOpH28KgR2xpRWQDwHkqlcp77x8TxfgNuAVw85PWwEUSkVUzq5Jsrb75c8wkVV4AcNrbk0E+0zjJNzNrxjU0FpCkC1+cAZgR0ELvzwAAAABJRU5ErkJggg==');
        background-repeat: no-repeat;
        background-size: 100%;
        background-position: center;
        cursor: pointer;
        opacity: .7;
      }
      ${this.TAG.CONTAINER} ${this.TAG.ERROR}:hover {
        opacity: 1;
      }
      .${this.CLASS.CLEAR_LINE_CLAMP} {
        -webkit-line-clamp: none !important;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      ${e}
    `}renderLoading(e){const n=this.findOrCreateContainerElement(e),r=n.querySelector(this.TAG.LOADING)||document.createElement(this.TAG.LOADING);n.contains(r)||(n.innerHTML="",n.appendChild(r))}renderResult(e,n,r=!1,a="default",s=!1,o=!1){const u=this.findOrCreateContainerElement(e);u.innerHTML="";const l=u.querySelector(this.TAG.RESULT)||document.createElement(this.TAG.RESULT);r?l.classList.add(this.CLASS.REPLACE):l.classList.add(`${this.CLASS.THEME}-${a}`),s?e.nodes.forEach((c,h)=>{if(c.nodeType===Node.TEXT_NODE)l.appendChild(document.createTextNode(n[h]));else{const v=w=>{var L,R;for(let B=0;B<w.children.length;B++){const m=w.children[B];if(((L=m.textContent)==null?void 0:L.trim())===((R=c.textContent)==null?void 0:R.trim()))return v(m)}return w},E=c.cloneNode(!0);v(E).textContent=n[h],l.appendChild(E)}}):l.textContent=n[0],o&&(l.style.direction="rtl",l.style.textAlign="right"),e.nodes.forEach(c=>{if(r)e.element.contains(c)&&e.element.removeChild(c);else if(!e.element.contains(c))try{e.element.insertBefore(c,u)}catch{}}),u.contains(l)||u.appendChild(l),window.getComputedStyle(e.element).getPropertyValue("-webkit-line-clamp")!=="none"&&e.element.classList.add(this.CLASS.CLEAR_LINE_CLAMP)}renderError(e,n){const r=this.findOrCreateContainerElement(e),a=r.querySelector(this.TAG.ERROR)||document.createElement(this.TAG.ERROR);a.onclick=s=>{s.preventDefault(),s.stopPropagation(),n()},r.contains(a)||(r.innerHTML="",r.appendChild(a))}restore(e){if(e.translationElement&&e.element.contains(e.translationElement)){let n=document.createDocumentFragment();e.nodes.forEach(r=>{e.element.contains(r)||n.appendChild(r)}),e.translationElement.replaceWith(n),e.translationElement=null,e.element.classList.contains(this.CLASS.CLEAR_LINE_CLAMP)&&e.element.classList.remove(this.CLASS.CLEAR_LINE_CLAMP)}}removeTranslationElements(e){const n=(e==null?void 0:e.excludeTargets)||[];((e==null?void 0:e.container)||document).querySelectorAll(this.TAG.CONTAINER).forEach(r=>{n.find(a=>a.translationElement===r)||r.remove()})}isTranslationElement(e){return e.tagName===this.TAG.CONTAINER.toUpperCase()||!!e.closest(this.TAG.CONTAINER)}loadStyles(e=document.head){const n=`${this.appName}-translation-styles`;if(e.querySelector(`#${n}`))return;const r=document.createElement("style");r.id=n,r.textContent=this.styles,e.appendChild(r)}findOrCreateContainerElement(e){let n=e.translationElement;if(n)return n;n=document.createElement(this.TAG.CONTAINER),e.translationElement=n,this.isTargetRenderAsBlock(e)?n.classList.add(this.CLASS.BLOCK):n.classList.add(this.CLASS.INLINE),this.debug&&n.addEventListener("click",()=>{console.log(e)});const r=e.nodes[e.nodes.length-1];return r.nextSibling&&e.element.contains(r.nextSibling)?e.element.insertBefore(n,r.nextSibling):e.element.appendChild(n),n}isTargetRenderAsBlock(e){if(e.element.closest("button"))return!1;const n=e.element.closest("a");if(n&&e.element.tagName!=="A"&&!Ir.isBlockStyleElement(n.firstElementChild))return!1;if(/[\u4e00-\u9fa5\u3040-\u30ff\uac00-\ud7af]/.test(e.text)){const a=parseInt(getComputedStyle(e.element).height,10),s=parseInt(getComputedStyle(e.element).fontSize,10),o=parseInt(getComputedStyle(e.element).lineHeight,10)||s;if(a>=o*2)return!0}const r=e.text.trim();return r.split(" ").length-1>=3||r.length>35}}class qu{async translate(e=[],n="",r="",a){return e.length?(e=e.map(s=>s||`
`),(await(await fetch("https://translate-pa.googleapis.com/v1/translateHtml",{method:"POST",headers:{"Content-Type":"application/json+protobuf","X-Goog-Api-Key":"AIzaSyATBXajvzQLTDHEQbcpq0Ihe0vWDHmO520"},body:JSON.stringify([[e,n||"auto",r],"te_lib"]),signal:a})).json())[0]):[]}}class Hu{constructor(){this.authorizationToken="",this.authorizationTokenExpires=0,this.authorizationTokenExpiresDuration=6e4}async translate(e=[],n="",r="",a){if(!e.length)return[];const s=await this.getAuthorizationToken(),o=e.map(u=>({Text:u}));return(await(await fetch(`https://api-edge.cognitive.microsofttranslator.com/translate?from=${n}&to=${r}&api-version=3.0&includeSentenceLength=true`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},body:JSON.stringify(o),signal:a})).json()).map(u=>u.translations[0].text)}async getAuthorizationToken(e){if(Date.now()>this.authorizationTokenExpires){const n=await this.fetchAuthorizationToken(e);return this.authorizationTokenExpires=Date.now()+this.authorizationTokenExpiresDuration,n}return this.authorizationToken}async fetchAuthorizationToken(e){const n=await fetch("https://edge.microsoft.com/translate/auth",{signal:e});return this.authorizationToken=await n.text(),this.authorizationToken}}class Gu{async translate(e=[],n="",r="",a){if(!e.length)return[];if(!r)return e;n=n?n.includes("-")?n.split("-")[0]:n:"",r=r.includes("-")?r.split("-")[0]:r;const s=await this.getAccessToken(a),o=new URLSearchParams;o.append("srv","tr-url-widget"),o.append("id",`${s}-0-0`),o.append("format","text"),o.append("lang",`${n?n+"-":""}${r}`),e.forEach(l=>{o.append("text",l)});const u=o.toString();return(await(await fetch(`https://translate.yandex.net/api/v1/tr.json/translate?${u}`,{signal:a})).json()).text}async getAccessToken(e){const n=(await(await fetch("https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=es&widgetTheme=light&autoMode=false",{signal:e})).text()).match(/sid\:\s\'[0-9a-f\.]+/);return n&&n[0]&&n[0].length>7?n[0].substring(6):""}}class Vu{constructor(e="google",n=!0,r=100){this.services={google:new qu,microsoft:new Hu,yandex:new Gu},this.serviceName="google",this.abortController=new AbortController,this.mergeRequests=!0,this.maxTextCountPerRequest=100,this.delay=200,this.requests=[],this.timer=null,this.listeners={},this.serviceName=e,this.mergeRequests=n,this.maxTextCountPerRequest=r}register(e,n){if(this.services[e])throw new Error(`Service "${e}" already exists`);this.services[e]=n}setServiceName(e){if(!this.services[e])throw new Error(`Service "${e}" not found`);this.serviceName=e}async translate(e,n,r){const a=this.services[this.serviceName];if(!a)throw new Error(`Service "${this.serviceName}" not found`);if(!this.mergeRequests){const o=Date.now(),u=await a.translate(e,n,r,this.abortController.signal),l=Date.now()-o;return this.emit("request",{from:n,to:r,texts:e,results:u,duration:l}),u}const s=Math.random().toString(36).substring(2,10);return this.requests.push({id:s,from:n,to:r,texts:e}),this.maxTextCountPerRequest&&this.requests.length>=this.maxTextCountPerRequest?(this.processRquests(),this.requests=[]):this.timer||(this.timer=setTimeout(()=>{this.processRquests(),this.timer=null,this.requests=[]},this.delay)),new Promise((o,u)=>{this.on(s,l=>{if(this.off(s),l instanceof Error){u(l);return}o(l)})})}abort(){this.abortController.abort(),this.abortController=new AbortController}async processRquests(){const e={};for(let r=0;r<this.requests.length;r++){const a=this.requests[r],{from:s,to:o}=a,u=`${s}-${o}`;e[u]?e[u].push(a):e[u]=[a]}const n=this.services[this.serviceName];for(let r in e){const{from:a,to:s}=e[r][0],o=[],u=[];e[r].forEach(c=>{u.push(...c.texts),c.texts.forEach(()=>{o.push(c.id)})});const l=Date.now();n.translate(u,a,s,this.abortController.signal).then(c=>{const h=Date.now()-l;return this.emit("request",{from:a,to:s,texts:u,results:c,duration:h}),c}).then(c=>{const h={};c.forEach((v,E)=>{const w=o[E];h[w]?h[w].push(v):h[w]=[v]});for(let v in h)this.emit(v,h[v])}).catch(c=>{new Set(o).forEach(h=>{this.emit(h,c)})})}}on(e,n){if(this.listeners[e])throw new Error(`Event "${e}" already exists`);this.listeners[e]=n}emit(e,n){const r=this.listeners[e];r&&r(n)}off(e){delete this.listeners[e]}}const Wu=[{name:"GITHUB",urlRegex:/^(https?:\/\/)?(www\.)?github\.com\/.*$/,elementHandler:t=>!(t.tagName==="TABLE"&&t.getAttribute("aria-labelledby")==="folders-and-files")},{name:"REDDIT",urlRegex:/^(https?:\/\/)?(www\.)?reddit\.com\/.*$/,styleHandler:(t,e)=>`
        ${t.CONTAINER} {
          visibility: visible !important;
        }
        ${t.CONTAINER} * {
          visibility: visible !important;
        }
      `}],zu="1.0.23";class Io{constructor(e={}){this.version=zu,this.appName="wpstranslate",this.enabled=!1,this.sourceLanguage="",this.targetLanguage="en",this.serviceName="google",this.hoverMode=!1,this.onlyTranslateMainContent=!0,this.translateSameLanguage=!1,this.replaceMode=!1,this.maxTaskCount=60,this.keepStyles=!0,this.rangeOffset=300,this.theme="default",this.tasks=[],this.documentTitle="",this.documentTitleTranslation="",this.documentTitleTranslating=!1,this.mergeRequests=!0,this.maxTextCountPerRequest=100,this.debug=!1,this.watch=!0,this.ignoreElementSelector="",this.ignoreElementTags=["SCRIPT","NOSCRIPT","STYLE","CODE","PRE","SVG","IMG","VIDEO","AUDIO","CANVAS","CITE"],this.nonMainContentElementTags=["ASIDE","FOOTER","HEADER","NAV"],this.minimalTargetElementTags=["P","H1","H2","H3","H4","H5","H6","OPTION"],this.separateElementTags=["BUTTON","SELECT","LABEL","LI","TD","TH"],this.tempTarget=null,this.windowEventsHandler=Ir.debounce(()=>{this.watch&&this.translateDocument()},100).bind(this),this.mutaionHandler=Ir.debounce(n=>{if(!this.watch)return;let r=n.filter(a=>!this.renderer.isTranslationElement(a.target));r.length>0&&(this.renderer.removeTranslationElements({excludeTargets:this.tasks.map(a=>a.target)}),r.forEach(a=>{(this.replaceMode?this.tasks.filter(s=>s.target.element===a.target&&!Array.from(a.addedNodes).every(o=>o instanceof HTMLElement&&this.renderer.isTranslationElement(o))):this.tasks.filter(s=>s.target.element===a.target&&s.target.nodes.some(o=>!o.isConnected))).forEach(s=>{const o=s.target.element;this.removeTranslationTask(s),this.parseNode(o,u=>{this.addTranslationTask(u)})})}),this.translateDocument())},100).bind(this),this.mutationObserver=null,this.mousePosition={x:0,y:0},this.mousemoveHandler=this.handleMouseMove.bind(this),this.keydownHandler=this.handleKeyDown.bind(this),this.siteRules=Wu.filter(n=>n.urlRegex.test(window.location.href)),this.parseOptions(e),this.renderer=new Uu(this.appName,this.siteRules,this.debug),this.service=new Vu(this.serviceName,this.mergeRequests,this.maxTextCountPerRequest),this.hoverMode&&this.enableHoverMode()}get isRTL(){const e=["ar","he","fa","ps","ur"],n=this.targetLanguage.split("-")[0];return e.includes(n)}enable(){this.enabled=!0,this.resetErrorTasks(),this.renderTasks(),this.translateDocument(),window.addEventListener("scroll",this.windowEventsHandler,{capture:!0}),window.addEventListener("resize",this.windowEventsHandler),this.observeMutation(document.body)}disable(){this.enabled=!1,this.restoreDocument(),this.clearUnfinishedTasks(),window.removeEventListener("scroll",this.windowEventsHandler,{capture:!0}),window.removeEventListener("resize",this.windowEventsHandler),this.disconnectMutation()}toggle(){this.enabled?this.disable():this.enable()}addService(e,n){this.service.register(e,n)}setService(e){this.serviceName!==e&&(this.documentTitleTranslation="",this.serviceName=e,this.service.setServiceName(e),this.enabled&&(this.disable(),this.enable()))}setSourceLanguage(e){this.sourceLanguage!==e&&(this.documentTitleTranslation="",this.sourceLanguage=e,this.enabled&&(this.disable(),this.enable()))}setTargetLanguage(e){this.targetLanguage!==e&&(this.documentTitleTranslation="",this.targetLanguage=e,this.enabled&&(this.disable(),this.enable()))}setTheme(e){this.theme!==e&&(this.theme=e,this.rerender())}setReplaceMode(e){this.replaceMode!==e&&(this.replaceMode=e,this.rerender())}setWatch(e){this.watch=e}setOnlyTranslateMainContent(e){this.onlyTranslateMainContent!==e&&(this.onlyTranslateMainContent=e,this.enabled&&(this.disable(),this.enable()))}setKeepStyles(e){this.keepStyles!==e&&(this.keepStyles=e,this.enabled&&(this.disable(),this.enable()))}enableHoverMode(){this.hoverMode||(this.hoverMode=!0,window.addEventListener("mousemove",this.mousemoveHandler),window.addEventListener("keydown",this.keydownHandler))}disableHoverMode(){this.hoverMode&&(this.hoverMode=!1,window.removeEventListener("mousemove",this.mousemoveHandler),window.removeEventListener("keydown",this.keydownHandler))}translateElement(e){const n=typeof e=="string"?document.querySelector(e):e;n&&this.parseNode(n,r=>{this.addTranslationTask(r,!0)},{checkInView:!1})}restoreElement(e){const n=typeof e=="string"?document.querySelector(e):e;n&&this.tasks.filter(r=>r.target.element===n||n.contains(r.target.element)).forEach(r=>{this.renderer.restore(r.target)})}parseOptions(e){["appName","serviceName","sourceLanguage","targetLanguage","hoverMode","onlyTranslateMainContent","translateSameLanguage","maxTaskCount","keepStyles","rangeOffset","theme","replaceMode","mergeRequests","maxTextCountPerRequest","debug","watch","ignoreElementSelector"].forEach(n=>{e[n]!==void 0&&(this[n]=e[n])})}async translateDocumentTitle(){if(this.documentTitle||(this.documentTitle=document.title),this.documentTitleTranslation)document.title=this.documentTitleTranslation;else if(this.isTextToBeTranslated(this.documentTitle)){if(this.documentTitleTranslating)return;this.documentTitleTranslating=!0;const e=await this.filterTextsAndTranslate([this.documentTitle],this.sourceLanguage,this.targetLanguage);this.documentTitleTranslation=e[0],this.enabled&&(document.title=this.documentTitleTranslation)}}restoreDocumentTitle(){document.title=this.documentTitle}translateDocument(){this.enabled&&(this.translateDocumentTitle(),this.parseDocument(e=>{this.addTranslationTask(e)}))}restoreDocument(){this.restoreDocumentTitle(),this.tasks.forEach(e=>{this.renderer.restore(e.target)})}parseDocument(e){this.parseNode(document.body,e),this.tempTarget&&(e(this.tempTarget),this.tempTarget=null)}parseNode(e,n,r){var u,l;let{checkVisible:a=!0,checkInView:s=!0,checkMainContent:o=!0}=r||{};if(e.nodeType===Node.TEXT_NODE){const c=e.textContent.trim(),h=e.parentElement;if(h){const v=e.nextSibling&&e.nextSibling.nodeName==="BR";this.processTarget(c,h,e,!!v,n)}}else if(e.nodeType===Node.ELEMENT_NODE){const c=e;if(this.ignoreElementSelector&&c.matches(this.ignoreElementSelector)){this.debugParseElement(c,"[SKIP ELEMENT] IGNORE_ELEMENT_SELECTOR_MATCH | SELECTOR: "+this.ignoreElementSelector);return}for(let h of this.siteRules)if(h.elementHandler&&!h.elementHandler(c)){this.debugParseElement(c,"[SKIP ELEMENT] SITE_RULE_MATCH | RULE: "+h.name);return}if(c.shadowRoot&&(this.renderer.loadStyles(c.shadowRoot),this.parseNode(c.shadowRoot,n,{checkVisible:a,checkInView:s}),this.observeMutation(c.shadowRoot)),this.renderer.isTranslationElement(c)){this.debugParseElement(c,"[SKIP ELEMENT] IS_TRANSLATION_ELEMENT");return}if(this.ignoreElementTags.includes(c.tagName)){this.debugParseElement(c,"[SKIP ELEMENT] IS_IGNORE_ELEMENT_TAG");return}if(o&&this.nonMainContentElementTags.includes(c.tagName))if(this.onlyTranslateMainContent){this.debugParseElement(c,"[SKIP ELEMENT] IS_NON_MAIN_CONTENT_ELEMENT");return}else{setTimeout(()=>{this.parseNode(c,n,{checkVisible:a,checkInView:s,checkMainContent:!1})},100);return}if(a&&this.isElementInvisible(c))if(this.isElementDropdown(c))a=!1;else{this.debugParseElement(c,"[SKIP ELEMENT] IS_INVISIBLE");return}if(this.isMinimalTargetElement(c)){let h=a?(u=c.innerText)==null?void 0:u.trim():(l=c.textContent)==null?void 0:l.trim();h=h||"";const v=this.rangeOffset,E=c.getBoundingClientRect(),w=E.top-v>window.innerHeight||E.bottom+v<0||E.left-v>window.innerWidth||E.right+v<0;!s||!w?(this.debugParseElement(c,"[PROCESS ELEMENT] MINIMAL_TARGET_ELEMENT"),this.processTarget(h,c,e,!0,n)):this.debugParseElement(c,"[SKIP ELEMENT] IS_OUT_OF_VIEW");return}this.debugParseElement(c,"[SKIP ELEMENT] RECURSIVE_CHILD_NODES"),this.getChildNodes(c).forEach(h=>{this.parseNode(h,n,{checkVisible:a,checkInView:s})})}else if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const c=e;this.getChildNodes(c).forEach(h=>{this.parseNode(h,n,{checkVisible:a,checkInView:s})})}}processTarget(e,n,r,a=!1,s){if(r.translatorParsed){const l=this.findTargetByNode(r);if(l){s(l);return}}r.translatorParsed=!0;const o=r.nodeType===Node.TEXT_NODE?[r]:this.getChildNodes(n).filter(l=>l.textContent),u={text:e,element:n,nodes:o};if(a){this.tempTarget&&s(this.tempTarget),s(u),this.tempTarget=null;return}if(!this.tempTarget){this.tempTarget=u;return}if(u.element===this.tempTarget.element){this.tempTarget.text+=" "+u.text,this.tempTarget.nodes.push(...u.nodes);return}s(this.tempTarget),this.tempTarget=u}isMinimalTargetElement(e){var r;const n=(r=e.textContent)==null?void 0:r.trim();return n&&this.hasElementChild(e,a=>{var s;return n===((s=a.textContent)==null?void 0:s.trim())})?!1:this.minimalTargetElementTags.includes(e.tagName)?!0:!this.hasElementChild(e,a=>!!(Ir.isBlockStyleElement(a)||this.minimalTargetElementTags.includes(a.tagName)||this.separateElementTags.includes(a.tagName)||a.shadowRoot||a.nodeName==="BR"),{})}addTranslationTask(e,n=!1){if(!this.isTextToBeTranslated(e.text))return null;let r={serviceName:this.serviceName,from:this.sourceLanguage,to:this.targetLanguage,pending:!0,done:!1,error:!1,target:e,text:e.text,result:"",results:[]};const a=this.tasks.find(s=>s.serviceName===r.serviceName&&s.from===r.from&&s.to===r.to&&s.text===r.text&&s.target.element===r.target.element&&s.target.nodes[0]===r.target.nodes[0]);return r=a||r,a||(this.tasks.push(r),(this.enabled||n)&&this.renderer.renderLoading(r.target)),n?this.executeTranslationTask(r,!0):this.processTranslationTaskQueue(),r}removeTranslationTask(e){this.tasks=this.tasks.filter(n=>n!==e),this.renderer.restore(e.target),this.tempTarget&&this.tempTarget.element===e.target.element&&(this.tempTarget=null)}async processTranslationTaskQueue(){if(!this.enabled)return;const e=this.tasks.filter(s=>s.serviceName===this.serviceName&&s.from===this.sourceLanguage&&s.to===this.targetLanguage),n=e.filter(s=>!s.done&&!s.pending),r=e.filter(s=>s.pending);if(r.length===0)return;const a=r[0];n.length<this.maxTaskCount&&(await this.executeTranslationTask(a),this.processTranslationTaskQueue())}async executeTranslationTask(e,n=!1){if(e.pending=!1,e.done){e.error||this.renderTaskResult(e);return}const r=this.tasks.find(a=>a.done&&a.result&&!a.error&&a.serviceName===e.serviceName&&a.from===e.from&&a.to===e.to&&a.text===e.text&&(!this.keepStyles||a.target.nodes.map(s=>s.textContent).join(",")===e.target.nodes.map(s=>s.textContent).join(",")));if(r){e.results=r.results,e.result=r.result,this.renderTaskResult(e),e.done=!0;return}this.renderer.renderLoading(e.target);try{const a=this.keepStyles?e.target.nodes.map(o=>(o==null?void 0:o.innerText)||o.textContent||""):[e.text],s=await this.filterTextsAndTranslate(a,e.from,e.to);e.results=s,e.result=s.join(""),(this.enabled||n)&&this.renderTaskResult(e)}catch(a){if(a.name==="AbortError"){e.pending=!0,e.done=!1;return}e.error=!0,(this.enabled||n)&&this.renderer.renderError(e.target,this.retryErrorTasks.bind(this))}finally{e.pending=!1,e.done=!0}}resetErrorTasks(e=()=>{}){this.tasks.forEach(n=>{n.error&&(n.error=!1,n.done=!1,n.pending=!0,e(n))})}retryErrorTasks(){this.enabled?(this.resetErrorTasks(),this.disable(),this.enable()):this.hoverMode&&this.resetErrorTasks(e=>{this.executeTranslationTask(e,!0)})}isTextToBeTranslated(e){return!(!e.trim()||/^[\d\s.,:;!?(){}[\]<>|@#$%^&*+=\-_`~\\\/]*$/.test(e)||/^[\uE000-\uF8FF]|[\uDB80-\uDBBF][\uDC00-\uDFFF]|[\uDBC0-\uDBFF][\uDC00-\uDFFF]*$/.test(e))}hasElementChild(e,n,r){const{recurse:a=!0}=r||{},s=this.getChildNodes(e);for(let o=0;o<s.length;o++){const u=s[o];if(u.nodeType===Node.ELEMENT_NODE){const l=u;if(n(l)||a&&this.hasElementChild(l,n,{recurse:a}))return!0}}return!1}findTargetByNode(e){const n=this.tasks.find(r=>r.target.nodes.includes(e)||r.target.element===e);return n?n.target:null}getChildNodes(e){return Array.from(e.childNodes).filter(n=>!(n.nodeType===Node.ELEMENT_NODE&&this.renderer.isTranslationElement(n)))}handleMouseMove(e){this.mousePosition={x:e.clientX,y:e.clientY}}handleKeyDown(e){this.enabled||e.key==="Shift"&&this.toggleTranslateElementAtMousePosition()}toggleTranslateElementAtMousePosition(){const e=document.elementFromPoint(this.mousePosition.x,this.mousePosition.y);if(!e)return;const n=this.getClosetMinimalTargetElement(e);n&&this.parseNode(n,r=>{r!=null&&r.translationElement?this.renderer.restore(r):this.addTranslationTask(r,!0)})}getClosetMinimalTargetElement(e){if(this.isMinimalTargetElement(e))return e;let n=e.parentElement;return n?this.getClosetMinimalTargetElement(n):null}rerender(){this.enabled&&this.tasks.forEach(e=>{e.done&&!e.error&&this.renderTaskResult(e)})}isElementInvisible(e){const n=window.getComputedStyle(e);return n.display==="none"||n.visibility==="hidden"||n.opacity==="0"}isElementDropdown(e){const n=[/dropdown/i,/select/i,/menu/i,/popup/i,/context-menu/i,/panel/i];for(const r of n)if(r.test(e.className))return!0;return!1}clearUnfinishedTasks(){this.tasks=this.tasks.filter(e=>e.done),this.service.abort()}renderTaskResult(e){if(!(e.serviceName!==this.serviceName||e.from!==this.sourceLanguage||e.to!==this.targetLanguage)){if(!this.translateSameLanguage&&e.text===e.result){this.renderer.restore(e.target);return}this.renderer.renderResult(e.target,e.results,this.replaceMode,this.theme,this.keepStyles,this.isRTL)}}renderTasks(){this.tasks.forEach(e=>{e.serviceName===this.serviceName&&e.from===this.sourceLanguage&&e.to===this.targetLanguage&&(e.done?e.error?this.renderer.renderError(e.target,this.retryErrorTasks.bind(this)):this.renderTaskResult(e):e.pending||this.renderer.renderLoading(e.target))})}debugParseElement(e,n){this.debug&&e===null&&console.log(n,e)}observeMutation(e){this.mutationObserver||(this.mutationObserver=new MutationObserver(this.mutaionHandler)),this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["class","style"],childList:!0,subtree:!0})}disconnectMutation(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}async filterTextsAndTranslate(e,n,r){const a=[],s=[];for(let u=0;u<e.length;u++){const l=e[u];this.isTextToBeTranslated(l)&&(a.push(l),s.push(u))}const o=await this.service.translate(a,n,r);for(let u=0;u<s.length;u++){const l=s[u];e[l]=o[u]}return e}}const ga=D(""),fa=D(""),ha=D(!1),ma=D(!1),va=D(),Ea=D(""),ba=D(""),Ta=D(!1),wa=D(!1),_a=D();function wr(){return{explainText:fa,explainError:ha,explainDone:ma,explainErrorCode:va,improveWriteText:ba,improveWriteError:Ta,improveWriteErrorCode:_a,improveWriteDone:wa,addExplainImproveWriteText:(s,o)=>{s===G.EXPLAIN?fa.value+=o:ba.value+=o},setExplainImproveWriteError:(s,o,u)=>{s===G.EXPLAIN?(ha.value=o,ma.value=!0,va.value=u):(Ta.value=o,wa.value=!0,_a.value=u)},resetExplainImproveWrite:()=>{fa.value="",ha.value=!1,ma.value=!1,va.value=void 0,ga.value="",ba.value="",Ta.value=!1,wa.value=!1,_a.value=void 0,Ea.value=""},getCurrentRequestId:s=>s===G.EXPLAIN?ga.value:Ea.value,setCurrentRequestId:(s,o)=>{s===G.EXPLAIN?ga.value=o||dr():Ea.value=o||dr()}}}async function Bo(t){const n={initial_service:await We(ge.INITIAL_SERVICE),status:"processing",...t};t.feature==="plugin_translate_website"&&(n.current_page_no=window.scrollY||document.documentElement.scrollTop),I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,n)}async function No(t){const n={initial_service:await We(ge.INITIAL_SERVICE),...t};t.feature==="plugin_translate_website"&&(n.current_page_no=window.scrollY||document.documentElement.scrollTop),I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,n)}function ko(t,e){return t===Fe.SUCCESS?"success":t===Fe.EXTEND_LIMIT?"failed_exceed_freetrial_aimodel_limit":t===Fe.NOT_LOGIN?"failed_not_login":t===Fe.PRIVILEGE_INSUFFICIENT?"failed_privilege_insufficient":t===Fe.USER_STOP_GENERATE?"failed_user_stop_generate":t===Fe.NO_SERVER?"failed_network_error":`failed_${e}`}async function nr(t,e){const n=t.texts.reduce((h,v)=>h+v.text.length,0),r=Date.now(),a=dr();let s=he.defaultSourceLanguage;if(!t.from&&e.feature==="plugin_translate_website")try{s=await at(Ie.DETECT_PAGE_LANGUAGE)}catch{}Bo({position:e.position,text_num:n,source_language:`auto_detect_${t.from||s}`,target_language:t.to,service:t.service,feature:e.feature,request_id:a});const o={...t,requestId:a},l=Sn(t.service)?await at(Ie.TRANSLATE_TEXT,o):await au(o),c=Date.now()-r;return No({position:e.position,request_id:a,text_num:n,source_language:`auto_detect_${t.from||s}`,target_language:t.to,service:t.service,feature:e.feature,loading_duration:c,status:ko(l==null?void 0:l.code,l==null?void 0:l.msg)}),l}async function Oo(t,e){var c;const{texts:n,from:r,to:a,service:s}=t,o=[];for(let h=0;h<n.length;h+=As)o.push(n.slice(h,h+As));const u=qi,l=[];for(let h=0;h<o.length;h+=u){const E=o.slice(h,h+u).map(async L=>await nr({service:s,texts:L.map(B=>({text:String(B)})),from:r,to:a,type:G.WEBSITE},e)),w=await Promise.all(E);for(const L of w)if(L.code===Fe.SUCCESS&&L.data){const R=((c=L.data)==null?void 0:c.map(B=>B.text))||[];l.push(...R)}else throw L}return l}let Pa,Ma=null;async function Fo(t,e){var s;const n=t.input.length;let r=he.defaultSourceLanguage;try{r=await at(Ie.DETECT_PAGE_LANGUAGE)}catch{}Pa={position:e.position,text_num:n,source_language:`auto_detect_${r}`,target_language:t.targetLanguage,service:((s=ja.find(o=>o.engineCode===t.engineCode))==null?void 0:s.value)||"",feature:e.feature,request_id:t.requestId},Ma=Date.now(),Bo(Pa);const a=t.translateType===G.EXPLAIN?_s.TRANSLATE_EXPLAIN:_s.TRANSLATE_IMPROVE_WRITE;at(Ie.CHAT_COMPLETIONS,{...t,scene:a,reportParams:e})}function ju(t,e){const r=Date.now();let a=null;return{resultPromise:new Promise(async o=>{await Fo({...t},e),a=setInterval(()=>{if(Date.now()-r>6e4){a&&(clearInterval(a),a=null),o({code:Fe.REQUEST_TIMEOUT});return}const{improveWriteDone:u,improveWriteText:l,improveWriteError:c,improveWriteErrorCode:h}=wr();if(c.value){a&&(clearInterval(a),a=null),o({code:h.value});return}else if(u.value&&!c.value){a&&(clearInterval(a),a=null),o({code:Fe.SUCCESS,data:[{text:l.value}]});return}},300)}),abort:()=>{a&&clearInterval(a),a=null}}}async function Aa(t){if(!Ma)return;const e={request_id:t.requestId};t.done?(e.loading_duration=Date.now()-Ma,e.status=ko(t.code,t.msg)):e.status="processing",No({...Pa,...e})}let Ja=null,Bt=null;const Dn=new Map;let hn;const $r={},{userSettings:Rs}=et(),Is={};let Xu=class{constructor(e){ke(this,"service");this.service=e}async translate(e,n,r){var c,h,v;const a=Ja,{targetLanguage:s,serviceName:o}=hn,u={targetLanguage:s,serviceName:o},l=e.map((E,w)=>E.trim()===""?{index:w,value:E}:null).filter(E=>E!==null);e=e.filter(E=>E.trim()!=="");try{const E=await Oo({texts:e,from:n,to:r,service:this.service},$r);return Ue.info("translate result:",E),l.forEach(({index:w,value:L})=>{E.splice(w,0,L)}),(c=Dn.get(a))==null||c("success",u),E}catch(E){if(E.code===Fe.EXTEND_LIMIT)(h=Dn.get(a))==null||h("limit",u);else throw Ue.error(":",E.msg),(v=Dn.get(a))==null||v("error",u),new Error(E.msg)}}},Yu=class{constructor(e){ke(this,"service");this.service=e}async translate(e,n,r){var c,h,v;const a=Ja,{targetLanguage:s,serviceName:o}=hn,u={targetLanguage:s,serviceName:o},l=await nr({service:this.service,texts:e.map(E=>({text:String(E)})),from:n,to:r,type:G.WEBSITE},$r);if(l.code===Fe.SUCCESS&&l.data)return(c=Dn.get(a))==null||c("success",u),((h=l.data)==null?void 0:h.map(w=>w.text))||[];throw(v=Dn.get(a))==null||v("error",u),Ue.error(":",l.msg),new Error(l.msg)}};const Bs=t=>{if(!Bt)return;const e=Xr(t);hn.serviceName=t,hn.maxTaskCount=e,Bt.maxTaskCount=e,Is[t]||(Sn(t)?Bt.addService(t,new Xu(t)):Bt.addService(t,new Yu(t)),Is[t]=t),Bt.setService(t)};function Po(){return{translateElement:async(s,o)=>{if(!s)return;Ja=s;const u=Rs.value.translationService,l=Rs.value.targetLanguage;Bt?(hn.serviceName!==u&&Bs(u),hn.targetLanguage!==l&&(hn.targetLanguage=l,Bt.setTargetLanguage(l))):(hn={translateSameLanguage:!0,onlyTranslateMainContent:!1,maxTaskCount:Xr(u),appName:he.appName,targetLanguage:l,replaceMode:!0,theme:"default"},Bt=new Io(hn),Bs(u)),Dn.set(s,o),Bt==null||Bt.restoreElement(s),Bt==null||Bt.translateElement(s)},restoreElement:s=>{s&&Bt&&Bt.restoreElement(s)},setReportParams:(s,o)=>{$r.position=s,$r.feature=o},deleteElementResult:s=>{Dn.delete(s)},restoreAllElement:()=>{var s;if(Bt)try{for(const o of Dn.keys())(s=o.selfRestore)==null||s.call(o)}catch{}}}}const ya=D(!1);let Ca={disable:!1,closeGap:7,showGap:60,useGap:2,useTimes:3};function Jn(){return{pluginCommentGuidShow:ya,setPluginUseTime:async()=>{var w;const{onlineParams:n}=an();(w=n.value)!=null&&w.pluginComment&&(Ca=n.value.pluginComment);const r=await We(ge.FIRST_USE_TIME),a=await We(ge.USE_COUNT,0)+1;if(await dt(ge.USE_COUNT,a),!r){await dt(ge.FIRST_USE_TIME,Date.now());return}if(Ca.disable)return;const{useGap:s,showGap:o,closeGap:u,useTimes:l}=Ca,c=await We(ge.PLUGIN_COMMENT_GUID_SHOW_TIME),v=await We(ge.PLUGIN_COMMENT_GUID_GAP)==="go"?o:u,E=async()=>{ya.value=!0,await dt(ge.PLUGIN_COMMENT_GUID_SHOW_TIME,Date.now()),await dt(ge.PLUGIN_COMMENT_GUID_GAP,"close")};if(!c&&Date.now()-r>s*24*60*60*1e3&&a>=l){await E();return}if(c&&v&&Date.now()-c>v*24*60*60*1e3){await E();return}},closePluginCommentGuid:async n=>{ya.value=!1,await We(ge.PLUGIN_COMMENT_GUID_GAP)!=="go"&&(n==="go"&&await dt(ge.PLUGIN_COMMENT_GUID_GAP,"go"),n==="close"&&await dt(ge.PLUGIN_COMMENT_GUID_GAP,"close"))}}}let Br,wt=null,Ft;const Mo=new Map,Da={},Sa={[ur.ORIGINAL]:"default",[ur.COLORED]:"primary",[ur.GHOSTED]:"weakness",[ur.HIGHLIGHT]:"highlight",[ur.UNDERLINED]:"underline"},Ur={},Bn=D(!1),{restoreAllElement:Ku}=Po();function $o(){const e=Object.keys(Ft).sort().reduce((n,r)=>(n[r]=Ft[r],n),{});return JSON.stringify(e)}class Qu{constructor(e){ke(this,"service");this.service=e}async translate(e,n,r){const a=e.map((s,o)=>s.trim()===""?{index:o,value:s}:null).filter(s=>s!==null);e=e.filter(s=>s.trim()!=="");try{const s=await Oo({texts:e,from:n,to:r,service:this.service},Ur);return Ue.info("translate result:",s),a.forEach(({index:o,value:u})=>{s.splice(o,0,u)}),s}catch(s){if(s.code===Fe.EXTEND_LIMIT)Mo.set($o(),!0),Uo();else if(s.code===Fe.NOT_LOGIN||s.code===Fe.ERROR_DEVICE_ID){const{setUserInfo:o}=_t();o(void 0),Nr(vn.GOOGLE)}else throw s}}}class Ju{constructor(e){ke(this,"service");this.service=e}async translate(e,n,r){var s;const a=await nr({service:this.service,texts:e.map(o=>({text:String(o)})),from:n,to:r,type:G.WEBSITE},Ur);if(a.code===Fe.SUCCESS&&a.data)return((s=a.data)==null?void 0:s.map(u=>u.text))||[];throw Ue.error(":",a.msg),new Error(a.msg)}}function Uo(){const{hoverBallExceedLimitTipShow:t}=Va(),{exceedLimitDialogShow:e,showMask:n}=dn();Br===Kt.DROPDOWN?at(Ie.TRANSLATE_EXCEED_LIMIT):Br===Kt.CONTEXT_MENU?(e.value=!0,n.value=!1):Br===Kt.HOVER_BALL&&(t.value=!0)}async function Zu(){const{userSettings:t}=et(),e=await We(ge.TEMP_CONFIGS);return e&&e.translationService?e.translationService:t.value.translationService}async function el(){const{userSettings:t}=et(),e=await We(ge.TEMP_CONFIGS);return e&&e.targetLanguage?e.targetLanguage:t.value.targetLanguage}async function tl(){const{userSettings:t}=et(),e=await We(ge.TEMP_CONFIGS);return e&&e.displayTheme?e.displayTheme:t.value.pageTranslation.theme}async function nl(){const{userSettings:t}=et(),e=await We(ge.TEMP_CONFIGS);return e&&e.displayMode?e.displayTheme:t.value.pageTranslation.displayMode}const Nr=t=>{if(!wt)return;const e=Xr(t),n=po(t);Ft.serviceName=t,Ft.maxTaskCount=e,Ft.maxTextCountPerRequest=n,wt.maxTaskCount=e,wt.service&&(wt.service.maxTextCountPerRequest=n),Da[t]?wt.setService(Da[t]):(Sn(t)?wt.addService(t,new Qu(t)):wt.addService(t,new Ju(t)),Da[t]=t,wt.setService(t))};function Pn(){const t=()=>{Bn.value=!Bn.value,at(Ie.CHANGE_CONTEXT_MENU_BY_TRANSLATE_STATUS,Bn.value),Bn.value&&Mo.has($o())&&Uo()},e=async(l="")=>{const{setPluginUseTime:c}=Jn(),h=Lr(location.href);let v="plugin_floatingball_translate_academia";l==="contextMenu"?v="plugin_rightclickmenu_translate_academia":l==="dropdown"?v="plugin_dropdown_translate_academia":l==="translateBar"?v="plugin_translate_pdf":l==="academia"&&(v="plugin_academia_translate_bar");const E=location.href;h?$e(`${he.fileTranslateRedirectPage}?plugin=anydoc&academia_url=${encodeURIComponent(E)}&position=${v}`):$e(`${he.fileTranslateRedirectPage}?plugin=anydoc&pdf_url=${encodeURIComponent(E)}&position=${v}`),c()},n=async l=>{var m;Br=l;const{setPluginUseTime:c}=Jn(),{setNoLoginTranslateUseCount:h}=Tr();if(Qa()){e(l);return}const v=await nl(),E=await tl(),w=await Zu(),L=await el(),R=v===fn.REPLACE;wt?(Ft.serviceName!==w&&Nr(w),Ft.targetLanguage!==L&&(Ft.targetLanguage=L,wt.setTargetLanguage(L)),Ft.replaceMode!==R&&(Ft.replaceMode=R,a(R?fn.REPLACE:fn.SIDE_BY_SIDE,E))):(Ft={ignoreElementSelector:".anydoc-translate-ignore",rangeOffset:100,translateSameLanguage:!0,onlyTranslateMainContent:!1,maxTaskCount:Xr(w),maxTextCountPerRequest:po(w),appName:he.appName,targetLanguage:L,replaceMode:R,theme:Sa[E]},wt=new Io(Ft),Nr(w),dt(ge.WEB_TRANSLATOR_SDK_VERSION,wt.version),(m=wt.ignoreElementTags)!=null&&m.push&&wt.ignoreElementTags.push("OPTION"));const{hideExceedLimitTip:B}=Va();B(),Bn.value||Ku(),wt.toggle(),t(),Bn.value&&(c(),h())},r=()=>{wt&&(wt.toggle(),t())},a=(l,c)=>{wt&&(l===fn.REPLACE?(Ft.replaceMode=!0,wt.setReplaceMode(!0)):(wt.setReplaceMode(!1),wt.setTheme(Sa[c]),Ft.replaceMode=!1,Ft.theme=Sa[c]))},s=l=>{wt&&(l.sourceLanguage&&(Ft.sourceLanguage=l.sourceLanguage,wt.setSourceLanguage(l.sourceLanguage)),l.targetLanguage&&(Ft.targetLanguage=l.targetLanguage,wt.setTargetLanguage(l.targetLanguage)),l.service&&Nr(l.service))},o=l=>{wt&&wt.setWatch(l)},u=(l,c)=>{Ur.position=l,Ur.feature=c};return{isPageTranslated:Hi(Bn),translatePage:n,translatePdfPage:e,showOriginPage:r,setTranslatePageStyle:a,changeTranslateOptions:s,setWatchTranslate:o,setReportParams:u}}const rl=D(!0),al=D();function Za(){return{isWindowActive:rl,currentWindowId:al}}const sl={class:"hover-ball-onboarding-container",style:{right:"calc(100% + 8px)"}},ol={class:"hover-ball-onboarding-content"},il={class:"hover-ball-onboarding-title"},ul={class:"hover-ball-onboarding-desc"},ll=qe({__name:"HoverBallOnboarding",emits:["close"],setup(t,{emit:e}){const{t:n}=gt(),r=e,a=()=>{r("close"),I.reportClickEvent("plugin_floatingball_guide_page","close")},s=()=>{r("close"),I.reportClickEvent("plugin_floatingball_guide_page","got_it")},o=()=>chrome.runtime.getURL("/public/images/hoverball-onboarding.png");return(u,l)=>(k(),se("div",sl,[ie(Pt,{icon:"close",size:28,class:"hover-ball-onboarding-close",onClick:a}),y("div",{class:"hover-ball-onboarding-image",style:Ae({backgroundImage:`url(${o()})`})},null,4),y("div",ol,[y("div",il,de(z(n)("hoverBall.onBoarding.title")),1),y("div",ul,de(z(n)("hoverBall.onBoarding.desc")),1),ie(Qt,{size:"large",block:"",type:"primary",onClick:s,class:"hover-ball-onboarding-button"},{default:Ze(()=>[Mt(de(z(n)("hoverBall.onBoarding.btn")),1)]),_:1})])]))}}),cl=ze(ll,[["__scopeId","data-v-e0b307f8"]]),pl={class:"onetap-login-tip"},dl={class:"header-container",style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"8px"}},gl={class:"title"},fl={class:"brand-container"},hl=["src"],ml={class:"brand-text"},vl={key:1,class:"description"},El={class:"description-text"},bl=["src"],Tl={class:"login-button-text"},wl=["src"],_l={class:"login-button-text"},Al=qe({__name:"OnetapLoginTip",props:{source:{}},emits:["close","googleLogin","otherLogin"],setup(t,{emit:e}){const{userSettings:n}=et(),{isRtl:r}=ao(),a=e,s=t,o=oe(()=>{const v=n.value.services.filter(L=>n.value.enabledServices.includes(L.value)),E={[vn.CHATGPT]:"ChatGPT",[vn.DEEP_SEEK]:"DeepSeek",[vn.GEMINI]:"Gemini",[vn.HAIKU]:"Claude"},w=v.find(L=>L.isAIService&&!L.isVipService);return w?{icon:chrome.runtime.getURL(`public/modelIcons/small/${w.icon}.svg`),name:E[w.value]}:null}),u=v=>chrome.runtime.getURL(`public/images/${v}.png`),l=()=>{a("close"),I.reportClickEvent(s.source,"close")},c=()=>{$e(`${he.googleLoginPage}?feature=${s.source}`),I.reportClickEvent(s.source,"sign_in_with_google"),setTimeout(()=>{a("close")},200)},h=()=>{$e(`${he.loginUrl}?feature=${s.source}`),a("otherLogin"),I.reportClickEvent(s.source,"sign_in_with_another_way"),setTimeout(()=>{a("close")},200)};return kt(()=>{I.reportShowEvent(s.source)}),(v,E)=>(k(),se("div",pl,[y("div",dl,[y("h3",gl,de(v.$t("onetapLoginTips.title")),1),ie(Pt,{style:{"margin-top":"-4px"},icon:"close",size:24,onClick:l})]),o.value?(k(),Se(z(gr),{key:0,keypath:"onetapLoginTips.desc",class:"description description-text",tag:"div"},{default:Ze(()=>[y("div",fl,[y("img",{src:o.value.icon,class:"brand-icon"},null,8,hl),y("span",ml,de(o.value.name),1)])]),_:1})):(k(),se("div",vl,[y("span",El,de(v.$t("hoverBall.loginTips.btn")),1)])),y("div",{class:"login-button google-login",onClick:c},[y("img",{src:u("google"),class:"login-button-icon"},null,8,bl),y("span",Tl,de(v.$t("onetapLoginTips.googleLogin")),1),ie(ut,{icon:"arrow-down",style:Ae(z(r)?{rotate:"90deg"}:{rotate:"-90deg"}),size:14},null,8,["style"])]),y("div",{class:"login-button",onClick:h},[y("img",{src:u("login-icon"),class:"login-button-icon"},null,8,wl),y("span",_l,de(v.$t("onetapLoginTips.otherLogin")),1)])]))}}),ea=ze(Al,[["__scopeId","data-v-2a3e1960"]]),yl={class:"confirm-container"},Cl={class:"confirm-header"},Dl={class:"title"},Sl={class:"confirm-content"},xl={class:"confirm-footer"},Ll=qe({__name:"SecondConfirm",props:{source:{},title:{},options:{}},emits:["close","confirm"],setup(t,{emit:e}){const{t:n}=gt(),{userInfo:r,contentScriptRefreshUserInfo:a}=_t(),s=e,o=t,u=D(o.options[0].value),l=oe(()=>o.source==="select_text"?"plugin_select_to_retention_page":o.source==="input_ball"?"plugin_textbox_retention_page":o.source==="image_ball"?"plugin_image_translate_retention_page":"plugin_floatingball_retention_page"),c=()=>{s("close"),I.reportClickEvent(l.value,"close")},h=()=>{s("confirm",u.value);const E=["this_time_closed_until_next_visit","disabled_for_current_page","disable_permanently"][Number(u.value)-1];I.reportClickEvent(l.value,"confirm_list_selected",{selected_item:E})},v=()=>{const E={hover_ball:he.hoverBallSettingPage,select_text:he.selectSettingPage,input_ball:he.textBoxSettingPage,image_ball:he.imageSettingPage}[o.source];let w;if(r.value)w=`${E}?source=plugin`;else{let L="plugin_textbox_translate_page";o.source==="select_text"&&(L="plugin_select_to_translate_page");const R=encodeURIComponent(`${E}?source=plugin&from=extensionLogin`);w=`${he.loginUrl}?feature=${L}&cb=${R}`}$e(w),I.reportClickEvent(l.value,"jump_to_settings")};return kt(()=>{a()}),(E,w)=>(k(),se("div",yl,[y("div",Cl,[y("div",Dl,de(o.title),1),ie(Pt,{icon:"close",onClick:c})]),y("div",Sl,[ie(ki,{modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=L=>u.value=L),gap:12,options:E.options},null,8,["modelValue","options"]),ie(z(gr),{keypath:"settings.canBeReEnable",class:"settings-can-be-re-enable",tag:"div"},{default:Ze(()=>[y("span",{class:"settings-can-be-re-enable-link",onClick:v},de(z(n)("common.setting")),1)]),_:1})]),y("div",xl,[ie(Qt,{onClick:h,class:"confirm-button",type:"primary"},{default:Ze(()=>[Mt(de(z(n)("common.confirm")),1)]),_:1})])]))}}),ta=ze(Ll,[["__scopeId","data-v-a3738775"]]),Rl={class:"actionContainer"},Il={key:0,class:"red-hot",style:{right:"2px"}},Bl=["src"],Nl=["src"],kl=qe({__name:"HoverBall",emits:["close"],setup(t,{emit:e}){const n=e,{t:r}=gt(),{contentScriptRefreshUserInfo:a,userInfo:s}=_t(),{onlineParams:o}=an(),{isPageTranslated:u,setTranslatePageStyle:l}=Pn(),{userSettings:c,notifyUserSettings:h,getSettingByKey:v}=et(),{onBoardingShow:E}=Do(),{isWindowActive:w}=Za(),{hoverBallExceedLimitTipShow:L}=Va(),{loginTipShow:R,checkLoginTipShow:B,showLoginTipGuid:m}=Tr(),{showLanguageSameTip:A,checkLanguageSameTip:d,closeLanguageSameTip:i}=Fi(),{giftText:f,giftType:g}=Er(),{checkDialogAndUpdateUsageInfo:P}=Zr(),W=Ve("containerRef"),$=Ve("giftBallContainerRef"),ve=Ve("translateIconRef"),Z=Ve("secondConfirmRef"),fe=Ve("loginTipRef"),N=D(!1),x=D(null),F=D(!1),j=D(c.value.pageTranslation.displayMode===fn.SIDE_BY_SIDE),Y=D(!1),K=D(!1),O=D(""),J=D({top:"0px",right:"0px"}),X=D(!1),Be=oe(()=>[{value:"1",label:r("hoverBall.closeOneTime")},{value:"2",label:r("hoverBall.disableOnePage")},{value:"3",label:r("hoverBall.disable")}]),re=D(0),{y:V,isDragging:Q}=Oi(ve),Ee=oe(()=>[{icon:j.value?"showOrigin":"hideOrigin",click:Oe,tip:j.value?r("hoverBall.tips.replace"):r("hoverBall.tips.sidebyside")},{icon:"moreTools",click:Dt,tip:r("common.translateFileAndMore")},{icon:"open-setting",click:Ce,tip:r("common.setting")},{icon:"feedback-grey",click:Ge,tip:r("common.feedback")}]),ee=oe(()=>$.value?40:0),be=oe(()=>{if(W.value&&Z.value){const p=W.value.clientHeight,_=Z.value.$el.clientHeight,C=window.innerHeight-re.value-p;return C>_-16?{top:`${p-16}px`,right:`${W.value.clientWidth-4}px`}:{top:`${p-(_-C)-16}px`,right:`${W.value.clientWidth+4}px`}}return{}}),ye=oe(()=>{if(W.value&&fe.value){const ce=fe.value.$el.getBoundingClientRect();if(ce.bottom>window.innerHeight)return{transform:`translateY(${window.innerHeight-ce.bottom-10}px)`}}return{}}),De=oe(()=>{const ce=c.value.targetLanguage,p=rn(ce);return p?r(`language.${p.value}`)||p.label:r("language.en")}),we=oe(()=>A.value||R.value||E.value||Q.value||N.value);Te(w,ce=>{ce===!0&&document.visibilityState==="visible"&&ft()}),Te(c,ce=>{j.value=ce.pageTranslation.displayMode===fn.SIDE_BY_SIDE}),Te(Q,ce=>{K.value=!1,ce===!1&&dt(ge.HOVER_BALL_POSITION,re.value)}),Te(R,ce=>{ce===!1&&(N.value=!1)}),Te(V,ce=>{if(W.value){const _=window.innerHeight-W.value.clientHeight;re.value=Math.min(Math.max(ce-2-ee.value,0),_)}}),Te(L,ce=>{ce&&i()});let Me=null;Te(N,ce=>{clearTimeout(Me),ce===!1&&(F.value=!1),!E.value&&ce===!0&&(Me=setTimeout(()=>{var p;I.reportShowEvent("plugin_floatingball_page"),(p=s.value)!=null&&p.isVip||I.fireEvent(Nt.PREMIUM_PROMOTION,{action:"show",item:"plugin_floatingball_page_get_trial",type:g.value==="1"?"1":"6"})},500))}),Te(u,ce=>{ce||i()}),Te(A,ce=>{ce&&I.reportShowEvent("plugin_floatingball_page_samelanguage_notice")}),nn(Z,()=>{F.value=!1,N.value=!1},{ignore:[W]});const xe=ce=>chrome.runtime.getURL(`public/images/${ce}.png`),Ne=async()=>{if(u.value){i(),at(Ie.CONTENT_SCRIPT_TRANSLATE_PAGE,{scene:Kt.HOVER_BALL,translate:!1});return}if(P(),R.value)return;await B()?(m(Kt.HOVER_BALL),I.reportShowEvent("plugin_floatingball_login_guide_page")):(!L.value&&d(),at(Ie.CONTENT_SCRIPT_TRANSLATE_PAGE,{scene:Kt.HOVER_BALL,translate:!0}))},Ke=ce=>{ce&&a(),!A.value&&!R.value&&!E.value&&!F.value&&(N.value=ce)};let Qe=0;const He=()=>{Qe=Date.now()},vt=()=>{Date.now()-Qe<200&&(I.reportClickEvent("plugin_floatingball_page",u.value?"show_original":"translate"),Ne())},Et=(ce,p)=>{if(Q.value){K.value=!1;return}const _=ce.target.getBoundingClientRect();K.value=!0,J.value={top:`${_.top+_.height/2}px`,right:"44px"},O.value=p},Oe=()=>{j.value=!j.value;const ce=v("pageTranslation");ce.displayMode=j.value?fn.SIDE_BY_SIDE:fn.REPLACE,h({pageTranslation:ce}),l(ce.displayMode,ce.theme),at(Ie.SET_IFRAME_TRANSLATE_PAGE_STYLE,{theme:ce.theme,displayMode:ce.displayMode}),at(Ie.SET_OTHER_TABS_TRANSLATE_PAGE_STYLE,{theme:ce.theme,displayMode:ce.displayMode}),u.value||Ne(),I.reportClickEvent("plugin_floatingball_page",j.value?"open_show_billingual_translation":"close_show_billingual_translation")};function lt(){var p;const ce=((p=o.value)==null?void 0:p.imageSites)||[];return Yt(location.href,ce)}const Dt=async()=>{Y.value=!1,dt(ge.HOVER_BALL_MORE_TOOLS_CLICK,!0),K.value=!1,N.value=!1;let ce="",p="jumpto_translate_file";lt()?(ce=`${he.imagePage}?position=plugin_floatingball_jumpto_translate_image`,p="jumpto_translate_image"):ce=`${he.translatorPage}?position=plugin_floatingball_jumpto_translate_file`,$e(ce),I.reportClickEvent("plugin_floatingball_page",p)},Le=()=>{$e(`${he.priceUrl}?position=plugin_floatingball_page_get_trial`),I.fireEvent(Nt.PREMIUM_PROMOTION,{action:"click",item:"plugin_floatingball_page_get_trial",type:g.value==="1"?"1":"6"})},Ce=()=>{K.value=!1,i(),at(Ie.OPEN_POPUP),I.reportClickEvent("plugin_floatingball_page","settings")},Ge=()=>{K.value=!1,N.value=!1,$e(`${he.feedBackPage}?source=plugin&entry=webpage_translate`),I.reportClickEvent("plugin_floatingball_page","feebback")},At=()=>{E.value||(F.value=!0,I.reportShowEvent("plugin_floatingball_retention_page"),I.reportClickEvent("plugin_floatingball_page","close"))},ct=()=>{N.value=!1,F.value=!1},ne=ce=>{F.value=!1,N.value=!1,n("close",ce)},_e=()=>{E.value=!1,at(Ie.CLOSE_HOVER_BALL_ONBOARDING)},Xe=()=>{R.value=!1},ft=async()=>{await We(ge.HOVER_BALL_BOARDING)===void 0&&document.visibilityState==="visible"&&w.value&&(dt(ge.HOVER_BALL_BOARDING,!0),E.value=!0,I.reportShowEvent("plugin_floatingball_guide_page"))};function rt(ce,p){if(p==="local"&&ce[ge.TEMP_CONFIGS]){const{newValue:_}=ce[ge.TEMP_CONFIGS];_&&_.displayMode!==void 0&&(j.value=_.displayMode===fn.SIDE_BY_SIDE)}p==="local"&&ce[ge.HOVER_BALL_MORE_TOOLS_CLICK]&&(Y.value=!1)}return kt(async()=>{re.value=await We(ge.HOVER_BALL_POSITION,window.innerHeight/3),X.value=!0,await We(ge.HOVER_BALL_MORE_TOOLS_CLICK)||(Y.value=!0),ft(),await We(ge.HOVER_BALL_BOARDING)===void 0&&document.addEventListener("visibilitychange",ft),chrome.storage.onChanged.addListener(rt)}),xn(()=>{document.removeEventListener("visibilitychange",ft),chrome.storage.onChanged.removeListener(rt)}),(ce,p)=>{var _;return k(),se($t,null,[Rt(y("div",{class:st(["hover-ball-container",{hover:we.value}]),style:Ae({top:`${re.value}px`,right:"1px"}),ref_key:"containerRef",ref:W,onMouseleave:p[5]||(p[5]=C=>Ke(!1)),onMouseenter:p[6]||(p[6]=C=>Ke(!0))},[(_=z(s))!=null&&_.isVip?me("",!0):(k(),se("div",{key:0,onClick:Le,class:"gift-ball-container",style:Ae({visibility:we.value?"visible":"hidden"}),onMouseenter:p[0]||(p[0]=C=>Et(C,z(f))),onMouseleave:p[1]||(p[1]=C=>K.value=!1),ref_key:"giftBallContainerRef",ref:$},[y("div",{class:"gift-image",style:Ae({backgroundImage:`url(${xe("gift")})`})},null,4)],36)),y("div",Rl,[y("div",{ref_key:"translateIconRef",ref:ve,onMouseenter:p[2]||(p[2]=C=>Et(C,z(u)?z(r)("translate.showOrigin"):z(r)("hoverBall.tips.translate",[De.value]))),onMouseleave:p[3]||(p[3]=C=>K.value=!1),onMousedown:He,onMouseup:vt,class:"translateIcon"},[ie(ut,{style:Ae({rotate:we.value?"0deg":"90deg"}),icon:z(u)?"translated":"translate-text-white",size:20},null,8,["style","icon"])],544),y("div",{class:"otherIcons",ref_key:"otherIconsRef",ref:x},[(k(!0),se($t,null,Tn(Ee.value,C=>(k(),se("div",{key:C.icon,style:{position:"relative"}},[ie(Pt,{size:26,icon:C.icon,onMouseenter:U=>Et(U,C.tip),onMouseleave:p[4]||(p[4]=U=>K.value=!1),onClick:C.click},null,8,["icon","onMouseenter","onClick"]),C.icon==="moreTools"&&Y.value?(k(),se("div",Il)):me("",!0)]))),128))],512)]),y("img",{class:"closeIcon",style:Ae({display:we.value?"block":"none"}),src:xe("close"),onClick:At},null,12,Bl),z(u)?(k(),se("img",{key:1,src:xe("translateSuccess"),class:"successIcon",style:Ae({top:`${24+ee.value}px`,right:"2px"}),width:"10px",height:"10px"},null,12,Nl)):me("",!0),F.value?(k(),Se(ta,{key:2,source:"hover_ball",title:z(r)("hoverBall.close"),ref_key:"secondConfirmRef",ref:Z,style:Ae(be.value),onClose:ct,onConfirm:ne,options:Be.value,class:"hover-ball-close-second-confirm"},null,8,["title","style","options"])):me("",!0),z(E)?(k(),Se(cl,{key:3,onClose:_e})):me("",!0),z(R)&&!z(E)?(k(),Se(ea,{key:4,source:"plugin_floatingball_login_guide_page",ref_key:"loginTipRef",ref:fe,class:"login-tip-container",style:Ae([{right:"40px"},ye.value]),onClose:Xe},null,8,["style"])):me("",!0)],38),[[Lt,X.value]]),K.value?(k(),se("div",{key:0,class:"hover-ball-tips",style:Ae([{transform:"translateY(-50%)"},J.value])},de(O.value),5)):me("",!0),z(L)?(k(),Se(tr,{key:1,class:"message-tip",scene:"plugin_floatingball_page_free_trial_limit",position:"right","report-page-name":"plugin_floatingball_page",style:Ae({top:`${re.value+19+ee.value}px`,position:"fixed",width:"300px",right:"43px",transform:"translateY(-50%)"}),onClose:p[7]||(p[7]=C=>L.value=!1)},null,8,["style"])):me("",!0),z(A)?(k(),Se(Pi,{key:2,source:"plugin_floatingball_page_samelanguage_notice",position:"right",switchCanClick:!0,class:"message-tip",style:Ae({position:"fixed",width:"320px",top:`${re.value+110+ee.value}px`,right:"46px",transform:"translateY(-50%)"}),onSwitchLanguage:p[8]||(p[8]=()=>{Ce(),Ke(!1)}),onClose:p[9]||(p[9]=()=>{z(i)(),Ke(!1)})},null,8,["style"])):me("",!0)],64)}}}),Ol=ze(kl,[["__scopeId","data-v-c972370c"]]),Fl={class:"translate-setting-container"},Pl={class:"setting-content"},Ml={class:"setting-section"},$l={class:"setting-section-label"},Ul={key:0,class:"setting-section"},ql={class:"setting-section-label"},Hl={class:"setting-footer"},Gl=qe({__name:"TranslateSetting",props:{languageColumn:{default:1},source:{default:"textbox"}},emits:["close","settingChange"],setup(t,{emit:e}){const n=t,{t:r}=gt(),{userSettings:a,notifyUserSettings:s,getSettingByKey:o}=et(),{userInfo:u,contentScriptRefreshUserInfo:l}=_t(),{useSelfTranslation:c,imageLanguageOptions:h}=so(),v=e,E=D(""),w=D(),L=oe(()=>n.source==="textbox"?r("translate.translateToTitle"):n.source==="image"?r("translate.imageTranslateToTitle"):r("translate.mailTranslateToTitle")),R=oe(()=>n.source==="textbox"?"plugin_textbox_translate_page":n.source==="image"?"plugin_image_translate_page":"plugin_mail_translate_page"),B=oe(()=>R.value),m=oe(()=>n.source==="mail"?"plugin_mail_translate_setting":n.source==="image"?"plugin_image_translate_setting":"plugin_input_translate_setting"),A=oe(()=>n.source==="image"?c.value:!0),d=()=>{v("close"),I.reportClickEvent(R.value,"settings_close")},i=()=>{let P;const W={textbox:he.textBoxSettingPage,mail:he.userCenterPage,image:he.imageSettingPage}[n.source];if(u.value)P=`${W}?source=plugin`;else{const $=encodeURIComponent(`${W}?source=plugin&from=extensionLogin`);P=`${he.loginUrl}?feature=${B.value}&cb=${$}`}$e(P),I.reportClickEvent(R.value,"more_settings")},f=(P,W=Gi)=>{const $=rn(P,W);return $?$.value:he.defaultLanguage},g=()=>{w.value=a.value.translationService,n.source==="textbox"?E.value=f(a.value.textboxTranslation.targetLanguage):n.source==="mail"?E.value=f(a.value.targetLanguage):n.source==="image"&&(E.value=f(a.value.imageTranslation.targetLanguage,h.value))};return kt(async()=>{g(),await l(),g(),Te(w,P=>{s({translationService:P}),v("settingChange")}),Te(E,P=>{if(n.source==="textbox"){const W=o("textboxTranslation");W.targetLanguage=P,s({textboxTranslation:W})}else if(n.source==="mail")s({targetLanguage:P});else if(n.source==="image"){const W=o("imageTranslation");W.targetLanguage=P,s({imageTranslation:W})}v("settingChange")})}),(P,W)=>(k(),se("div",Fl,[ie(Pt,{class:"close-button",icon:"close",size:24,onClick:d}),y("div",Pl,[y("div",Ml,[y("div",$l,de(L.value),1),ie(Wa,{source:B.value,nativeSelect:!1,"has-icon":!0,column:P.languageColumn,size:"small","is-narrower":!0,modelValue:E.value,"onUpdate:modelValue":W[0]||(W[0]=$=>E.value=$)},null,8,["source","column","modelValue"])]),A.value?(k(),se("div",Ul,[y("div",ql,de(P.$t("translate.serviceLabel")),1),ie(oo,{"utm-source":m.value,large:!1,modelValue:w.value,"onUpdate:modelValue":W[1]||(W[1]=$=>w.value=$),"has-label":!1},null,8,["utm-source","modelValue"])])):me("",!0)]),y("div",Hl,[y("div",{class:"more-setting-link",onClick:i},de(P.$t("common.moreSetting")),1)])]))}}),es=ze(Gl,[["__scopeId","data-v-06196b44"]]),Vl={class:"toast-tip-wrapper"},Wl={class:"toast-tip"},zl={class:"tip-content"},jl=qe({__name:"ToastTip",props:{position:{default:"bottom"},arrowOffset:{default:"50%"}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,a=oe(()=>{const o=n.arrowOffset;return n.position==="top"||n.position==="bottom"?{left:o,transform:"translateX(-50%)"}:{top:o,transform:"translateY(-50%)"}});function s(){r("close")}return(o,u)=>(k(),se("div",Vl,[y("div",Wl,[y("div",zl,[br(o.$slots,"default",{},void 0,!0)]),ie(ut,{class:"icon-close",icon:"close",size:16,onClick:s}),y("div",{class:st(["arrow",`arrow-${o.position}`]),style:Ae(a.value)},null,6)])]))}}),Xl=ze(jl,[["__scopeId","data-v-fa11d61e"]]);var xa={exports:{}},Ns;function Yl(){return Ns||(Ns=1,function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(m,A){var d=m[0],i=m[1],f=m[2],g=m[3];d+=(i&f|~i&g)+A[0]-680876936|0,d=(d<<7|d>>>25)+i|0,g+=(d&i|~d&f)+A[1]-389564586|0,g=(g<<12|g>>>20)+d|0,f+=(g&d|~g&i)+A[2]+606105819|0,f=(f<<17|f>>>15)+g|0,i+=(f&g|~f&d)+A[3]-1044525330|0,i=(i<<22|i>>>10)+f|0,d+=(i&f|~i&g)+A[4]-176418897|0,d=(d<<7|d>>>25)+i|0,g+=(d&i|~d&f)+A[5]+1200080426|0,g=(g<<12|g>>>20)+d|0,f+=(g&d|~g&i)+A[6]-1473231341|0,f=(f<<17|f>>>15)+g|0,i+=(f&g|~f&d)+A[7]-45705983|0,i=(i<<22|i>>>10)+f|0,d+=(i&f|~i&g)+A[8]+1770035416|0,d=(d<<7|d>>>25)+i|0,g+=(d&i|~d&f)+A[9]-1958414417|0,g=(g<<12|g>>>20)+d|0,f+=(g&d|~g&i)+A[10]-42063|0,f=(f<<17|f>>>15)+g|0,i+=(f&g|~f&d)+A[11]-1990404162|0,i=(i<<22|i>>>10)+f|0,d+=(i&f|~i&g)+A[12]+1804603682|0,d=(d<<7|d>>>25)+i|0,g+=(d&i|~d&f)+A[13]-40341101|0,g=(g<<12|g>>>20)+d|0,f+=(g&d|~g&i)+A[14]-1502002290|0,f=(f<<17|f>>>15)+g|0,i+=(f&g|~f&d)+A[15]+1236535329|0,i=(i<<22|i>>>10)+f|0,d+=(i&g|f&~g)+A[1]-165796510|0,d=(d<<5|d>>>27)+i|0,g+=(d&f|i&~f)+A[6]-1069501632|0,g=(g<<9|g>>>23)+d|0,f+=(g&i|d&~i)+A[11]+643717713|0,f=(f<<14|f>>>18)+g|0,i+=(f&d|g&~d)+A[0]-373897302|0,i=(i<<20|i>>>12)+f|0,d+=(i&g|f&~g)+A[5]-701558691|0,d=(d<<5|d>>>27)+i|0,g+=(d&f|i&~f)+A[10]+38016083|0,g=(g<<9|g>>>23)+d|0,f+=(g&i|d&~i)+A[15]-660478335|0,f=(f<<14|f>>>18)+g|0,i+=(f&d|g&~d)+A[4]-405537848|0,i=(i<<20|i>>>12)+f|0,d+=(i&g|f&~g)+A[9]+568446438|0,d=(d<<5|d>>>27)+i|0,g+=(d&f|i&~f)+A[14]-1019803690|0,g=(g<<9|g>>>23)+d|0,f+=(g&i|d&~i)+A[3]-187363961|0,f=(f<<14|f>>>18)+g|0,i+=(f&d|g&~d)+A[8]+1163531501|0,i=(i<<20|i>>>12)+f|0,d+=(i&g|f&~g)+A[13]-1444681467|0,d=(d<<5|d>>>27)+i|0,g+=(d&f|i&~f)+A[2]-51403784|0,g=(g<<9|g>>>23)+d|0,f+=(g&i|d&~i)+A[7]+1735328473|0,f=(f<<14|f>>>18)+g|0,i+=(f&d|g&~d)+A[12]-1926607734|0,i=(i<<20|i>>>12)+f|0,d+=(i^f^g)+A[5]-378558|0,d=(d<<4|d>>>28)+i|0,g+=(d^i^f)+A[8]-2022574463|0,g=(g<<11|g>>>21)+d|0,f+=(g^d^i)+A[11]+1839030562|0,f=(f<<16|f>>>16)+g|0,i+=(f^g^d)+A[14]-35309556|0,i=(i<<23|i>>>9)+f|0,d+=(i^f^g)+A[1]-1530992060|0,d=(d<<4|d>>>28)+i|0,g+=(d^i^f)+A[4]+1272893353|0,g=(g<<11|g>>>21)+d|0,f+=(g^d^i)+A[7]-155497632|0,f=(f<<16|f>>>16)+g|0,i+=(f^g^d)+A[10]-1094730640|0,i=(i<<23|i>>>9)+f|0,d+=(i^f^g)+A[13]+681279174|0,d=(d<<4|d>>>28)+i|0,g+=(d^i^f)+A[0]-358537222|0,g=(g<<11|g>>>21)+d|0,f+=(g^d^i)+A[3]-722521979|0,f=(f<<16|f>>>16)+g|0,i+=(f^g^d)+A[6]+76029189|0,i=(i<<23|i>>>9)+f|0,d+=(i^f^g)+A[9]-640364487|0,d=(d<<4|d>>>28)+i|0,g+=(d^i^f)+A[12]-421815835|0,g=(g<<11|g>>>21)+d|0,f+=(g^d^i)+A[15]+530742520|0,f=(f<<16|f>>>16)+g|0,i+=(f^g^d)+A[2]-995338651|0,i=(i<<23|i>>>9)+f|0,d+=(f^(i|~g))+A[0]-198630844|0,d=(d<<6|d>>>26)+i|0,g+=(i^(d|~f))+A[7]+1126891415|0,g=(g<<10|g>>>22)+d|0,f+=(d^(g|~i))+A[14]-1416354905|0,f=(f<<15|f>>>17)+g|0,i+=(g^(f|~d))+A[5]-57434055|0,i=(i<<21|i>>>11)+f|0,d+=(f^(i|~g))+A[12]+1700485571|0,d=(d<<6|d>>>26)+i|0,g+=(i^(d|~f))+A[3]-1894986606|0,g=(g<<10|g>>>22)+d|0,f+=(d^(g|~i))+A[10]-1051523|0,f=(f<<15|f>>>17)+g|0,i+=(g^(f|~d))+A[1]-2054922799|0,i=(i<<21|i>>>11)+f|0,d+=(f^(i|~g))+A[8]+1873313359|0,d=(d<<6|d>>>26)+i|0,g+=(i^(d|~f))+A[15]-30611744|0,g=(g<<10|g>>>22)+d|0,f+=(d^(g|~i))+A[6]-1560198380|0,f=(f<<15|f>>>17)+g|0,i+=(g^(f|~d))+A[13]+1309151649|0,i=(i<<21|i>>>11)+f|0,d+=(f^(i|~g))+A[4]-145523070|0,d=(d<<6|d>>>26)+i|0,g+=(i^(d|~f))+A[11]-1120210379|0,g=(g<<10|g>>>22)+d|0,f+=(d^(g|~i))+A[2]+718787259|0,f=(f<<15|f>>>17)+g|0,i+=(g^(f|~d))+A[9]-343485551|0,i=(i<<21|i>>>11)+f|0,m[0]=d+m[0]|0,m[1]=i+m[1]|0,m[2]=f+m[2]|0,m[3]=g+m[3]|0}function s(m){var A=[],d;for(d=0;d<64;d+=4)A[d>>2]=m.charCodeAt(d)+(m.charCodeAt(d+1)<<8)+(m.charCodeAt(d+2)<<16)+(m.charCodeAt(d+3)<<24);return A}function o(m){var A=[],d;for(d=0;d<64;d+=4)A[d>>2]=m[d]+(m[d+1]<<8)+(m[d+2]<<16)+(m[d+3]<<24);return A}function u(m){var A=m.length,d=[1732584193,-271733879,-1732584194,271733878],i,f,g,P,W,$;for(i=64;i<=A;i+=64)a(d,s(m.substring(i-64,i)));for(m=m.substring(i-64),f=m.length,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<f;i+=1)g[i>>2]|=m.charCodeAt(i)<<(i%4<<3);if(g[i>>2]|=128<<(i%4<<3),i>55)for(a(d,g),i=0;i<16;i+=1)g[i]=0;return P=A*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),W=parseInt(P[2],16),$=parseInt(P[1],16)||0,g[14]=W,g[15]=$,a(d,g),d}function l(m){var A=m.length,d=[1732584193,-271733879,-1732584194,271733878],i,f,g,P,W,$;for(i=64;i<=A;i+=64)a(d,o(m.subarray(i-64,i)));for(m=i-64<A?m.subarray(i-64):new Uint8Array(0),f=m.length,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<f;i+=1)g[i>>2]|=m[i]<<(i%4<<3);if(g[i>>2]|=128<<(i%4<<3),i>55)for(a(d,g),i=0;i<16;i+=1)g[i]=0;return P=A*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),W=parseInt(P[2],16),$=parseInt(P[1],16)||0,g[14]=W,g[15]=$,a(d,g),d}function c(m){var A="",d;for(d=0;d<4;d+=1)A+=r[m>>d*8+4&15]+r[m>>d*8&15];return A}function h(m){var A;for(A=0;A<m.length;A+=1)m[A]=c(m[A]);return m.join("")}h(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function m(A,d){return A=A|0||0,A<0?Math.max(A+d,0):Math.min(A,d)}ArrayBuffer.prototype.slice=function(A,d){var i=this.byteLength,f=m(A,i),g=i,P,W,$,ve;return d!==n&&(g=m(d,i)),f>g?new ArrayBuffer(0):(P=g-f,W=new ArrayBuffer(P),$=new Uint8Array(W),ve=new Uint8Array(this,f,P),$.set(ve),W)}}();function v(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function E(m,A){var d=m.length,i=new ArrayBuffer(d),f=new Uint8Array(i),g;for(g=0;g<d;g+=1)f[g]=m.charCodeAt(g);return A?f:i}function w(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function L(m,A,d){var i=new Uint8Array(m.byteLength+A.byteLength);return i.set(new Uint8Array(m)),i.set(new Uint8Array(A),m.byteLength),i}function R(m){var A=[],d=m.length,i;for(i=0;i<d-1;i+=2)A.push(parseInt(m.substr(i,2),16));return String.fromCharCode.apply(String,A)}function B(){this.reset()}return B.prototype.append=function(m){return this.appendBinary(v(m)),this},B.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var A=this._buff.length,d;for(d=64;d<=A;d+=64)a(this._hash,s(this._buff.substring(d-64,d)));return this._buff=this._buff.substring(d-64),this},B.prototype.end=function(m){var A=this._buff,d=A.length,i,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g;for(i=0;i<d;i+=1)f[i>>2]|=A.charCodeAt(i)<<(i%4<<3);return this._finish(f,d),g=h(this._hash),m&&(g=R(g)),this.reset(),g},B.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},B.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},B.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},B.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},B.prototype._finish=function(m,A){var d=A,i,f,g;if(m[d>>2]|=128<<(d%4<<3),d>55)for(a(this._hash,m),d=0;d<16;d+=1)m[d]=0;i=this._length*8,i=i.toString(16).match(/(.*?)(.{0,8})$/),f=parseInt(i[2],16),g=parseInt(i[1],16)||0,m[14]=f,m[15]=g,a(this._hash,m)},B.hash=function(m,A){return B.hashBinary(v(m),A)},B.hashBinary=function(m,A){var d=u(m),i=h(d);return A?R(i):i},B.ArrayBuffer=function(){this.reset()},B.ArrayBuffer.prototype.append=function(m){var A=L(this._buff.buffer,m),d=A.length,i;for(this._length+=m.byteLength,i=64;i<=d;i+=64)a(this._hash,o(A.subarray(i-64,i)));return this._buff=i-64<d?new Uint8Array(A.buffer.slice(i-64)):new Uint8Array(0),this},B.ArrayBuffer.prototype.end=function(m){var A=this._buff,d=A.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f,g;for(f=0;f<d;f+=1)i[f>>2]|=A[f]<<(f%4<<3);return this._finish(i,d),g=h(this._hash),m&&(g=R(g)),this.reset(),g},B.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},B.ArrayBuffer.prototype.getState=function(){var m=B.prototype.getState.call(this);return m.buff=w(m.buff),m},B.ArrayBuffer.prototype.setState=function(m){return m.buff=E(m.buff,!0),B.prototype.setState.call(this,m)},B.ArrayBuffer.prototype.destroy=B.prototype.destroy,B.ArrayBuffer.prototype._finish=B.prototype._finish,B.ArrayBuffer.hash=function(m,A){var d=l(new Uint8Array(m)),i=h(d);return A?R(i):i},B})}(xa)),xa.exports}var Kl=Yl();const Ql=go(Kl),Jl=["image/jpeg","image/png","image/bmp"],qo=3.7*1024*1024;function Zl(t){return Jl.includes(t)}function ec(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString(36)}function tc(t,e,n){let r="";if(e){const a=e.headers.get("Content-Disposition");if(a){const s=a.match(/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/i);s&&s[1]&&(r=decodeURIComponent(s[1]))}}if(!r)try{const o=new URL(t).pathname.split("/"),u=o[o.length-1];u&&/\.[a-zA-Z0-9]{2,4}$/.test(u)&&(r=decodeURIComponent(u))}catch{const s=t.match(/[^/]+\.[a-zA-Z]{2,4}(?=[?#]|$)/);s&&(r=s[0])}if(!r){const a=(n==null?void 0:n.type)||"image/png",o={"image/jpeg":"jpg","image/jpg":"jpg","image/png":"png","image/bmp":"bmp","image/gif":"gif","image/webp":"webp","image/svg+xml":"svg","image/avif":"avif","image/heic":"heic","image/heif":"heif","image/tiff":"tiff"}[a]||"jpg";r=`image_${ec(t)}.${o}`}return r}function nc(t){const e=new Ql.ArrayBuffer,n=2097152,r=Math.ceil(t.byteLength/n);for(let s=0;s<r;s++){const o=s*n,u=Math.min(o+n,t.byteLength),l=t.slice(o,u);e.append(l)}const a=e.end();return e.destroy(),a}async function rc(t,e=.92){return new Promise((n,r)=>{const a=new Image,s=URL.createObjectURL(t);a.onload=function(){try{const o=document.createElement("canvas"),u=o.getContext("2d");if(!u){r(new Error("Failed to get canvas context"));return}o.width=a.width,o.height=a.height,u.fillStyle="#FFFFFF",u.fillRect(0,0,o.width,o.height),u.drawImage(a,0,0),o.toBlob(l=>{URL.revokeObjectURL(s),l?n(l):r(new Error("Failed to convert to JPG"))},"image/jpeg",e)}catch(o){URL.revokeObjectURL(s),r(o)}},a.onerror=function(){URL.revokeObjectURL(s),r(new Error(`Failed to load image (${t.type})`))},a.src=s})}async function ac(t,e=qo){return new Promise((n,r)=>{if(t.size<=e){n(t);return}const a=new Image,s=URL.createObjectURL(t);a.onload=function(){try{const o=document.createElement("canvas"),u=o.getContext("2d");if(!u){r(new Error("Failed to get canvas context"));return}let l=a.width,c=a.height,h=t.size>e?Math.sqrt(e/t.size):1,v=!1;const E=(w=.92)=>{o.width=l,o.height=c,u.fillStyle="#FFFFFF",u.fillRect(0,0,l,c),u.drawImage(a,0,0,l,c),o.toBlob(L=>{if(!L){URL.revokeObjectURL(s),r(new Error("Failed to compress image"));return}if(L.size<=e){URL.revokeObjectURL(s),n(L);return}if(l<20||c<20||v){if(w>.2){E(w-.1);return}URL.revokeObjectURL(s),r(new Error("Image size exceeds limit after maximum compression"));return}const B=L.size>e?Math.sqrt(e/L.size):1;if(B>=h?(h-=.1,v=!0):h=B,h<0){URL.revokeObjectURL(s),r(new Error("Image size exceeds limit after maximum compression"));return}l=Math.ceil(a.width*h),c=Math.ceil(a.height*h),E(w)},"image/jpeg",w)};E()}catch(o){URL.revokeObjectURL(s),r(o)}},a.onerror=function(){URL.revokeObjectURL(s),r(new Error("Failed to load image"))},a.src=s})}async function sc(t){const n=new Promise((a,s)=>{setTimeout(()=>{s(new Error("timeout"))},3e4)}),r=(async()=>{let a,s;try{if(s=await fetch(t),!s.ok)return{code:500,msg:`HTTP ${s.status}: ${s.statusText}`};a=await s.blob()}catch{try{const u=await at(Ie.GET_WEB_IMAGE_CONTENT,{imageUrl:t});if(!u.success||!u.base64Data||!u.mimeType)return Ue.error(" background :",u.error),{code:500,msg:u.error??"background_get_image_error"};a=await(await fetch(u.base64Data)).blob(),s=void 0}catch(u){return{code:500,msg:(u==null?void 0:u.message)??"network_error"}}}try{if(a.type==="image/gif")return{code:100,msg:"not supported image type"};let o=tc(t,s,a);if(!Zl(a.type)){Ue.info(` ${a.type} JPG...`);try{a=await rc(a),o=o.replace(/\.[^.]+$/,".jpg"),Ue.info("")}catch(h){Ue.error(":",h)}}if(a.size>qo){Ue.info(` ${(a.size/1024/1024).toFixed(2)}MB ...`);try{const h=a.size;a=await ac(a),Ue.info(`: ${(h/1024/1024).toFixed(2)}MB  ${(a.size/1024/1024).toFixed(2)}MB`)}catch(h){return Ue.error(":",h),{code:500,msg:(h==null?void 0:h.message)??"network_error"}}}const u=await a.arrayBuffer(),l=nc(u);return{code:0,msg:"success",info:{blobUrl:URL.createObjectURL(a),md5:l,filename:o}}}catch(o){return{code:500,msg:(o==null?void 0:o.message)??"network_error"}}})();try{return await Promise.race([r,n])}catch(a){return(a==null?void 0:a.message)==="timeout"?{code:400,msg:"timeout"}:{code:500,msg:(a==null?void 0:a.message)??"network_error"}}}function oc(t){location.host==="x.com"&&(t.style.opacity="1")}function ic(t){location.host==="x.com"&&(t.style.opacity="0")}function ks(t,e){const n={src:t.src,srcset:t.getAttribute("srcset"),sizes:t.getAttribute("sizes"),loading:t.getAttribute("loading"),crossOrigin:t.getAttribute("crossorigin"),dataSrc:t.getAttribute("data-src"),dataLazy:t.getAttribute("data-lazy"),dataSrcset:t.getAttribute("data-srcset"),pictureSourceElements:[]},r=t.closest("picture");return r&&r.querySelectorAll("source").forEach(s=>{n.pictureSourceElements.push({srcset:s.getAttribute("srcset")||"",media:s.getAttribute("media"),type:s.getAttribute("type"),sizes:s.getAttribute("sizes")}),s.remove()}),t.removeAttribute("srcset"),t.removeAttribute("sizes"),t.removeAttribute("data-src"),t.removeAttribute("data-lazy"),t.removeAttribute("data-srcset"),t.removeAttribute("loading"),t.removeAttribute("crossorigin"),t.offsetWidth,t.src=e,oc(t),n}function La(t,e){const n=t.closest("picture");n&&e.pictureSourceElements.length>0&&e.pictureSourceElements.forEach(r=>{const a=document.createElement("source");r.srcset&&a.setAttribute("srcset",r.srcset),r.media&&a.setAttribute("media",r.media),r.type&&a.setAttribute("type",r.type),r.sizes&&a.setAttribute("sizes",r.sizes),n.insertBefore(a,t)}),e.srcset&&t.setAttribute("srcset",e.srcset),e.sizes&&t.setAttribute("sizes",e.sizes),e.dataSrc&&t.setAttribute("data-src",e.dataSrc),e.dataLazy&&t.setAttribute("data-lazy",e.dataLazy),e.dataSrcset&&t.setAttribute("data-srcset",e.dataSrcset),e.loading&&t.setAttribute("loading",e.loading),e.crossOrigin&&t.setAttribute("crossorigin",e.crossOrigin),t.src=e.src,ic(t)}function uc(t){try{const r=new URL(t.src,window.location.href).pathname.match(/\.([A-Za-z0-9]+)(?:$|\/)/);if(r)return r[1].toLowerCase()}catch{}if(t.src.startsWith("data:")){const e=t.src.match(/^data:(image\/([a-zA-Z0-9]+));/);if(e)return e[2].toLowerCase()}return""}function lc(t){const e=window.getComputedStyle(t),n=e.position,r=e.zIndex;let a=null;n!=="static"&&r!=="auto"&&(a=parseInt(r,10));let s=null,o=t.parentElement;for(;o&&o!==document.body;){const l=window.getComputedStyle(o),c=l.position,h=l.zIndex;if(c!=="static"&&h!=="auto"){s=parseInt(h,10);break}o=o.parentElement}return{own:a,inherited:s,effective:a!==null?a:s!==null?s:0}}const cc=["onMouseenter","onMouseleave"],pc=["dir"],dc=["onMouseenter","onMouseleave","onClick"],gc=["src"],fc=["onMouseenter","onMouseleave","onClick","title"],hc=["onClick","onMouseenter","onMouseleave"],qn=100,mc=200,Os=45,Sr=5,vc=qe({__name:"ImageTranslateBall",emits:["close"],setup(t,{emit:e}){const{userSettings:n}=et(),{userInfo:r,contentScriptRefreshUserInfo:a}=_t(),{onlineParams:s}=an(),{setImageTargetInitLanguage:o,imageLanguageOptions:u,useSelfTranslation:l,imageTranslationEngineName:c}=so(),{refreshPaymentDialogShow:h}=dn(),{t:v}=gt(),E=e;let w=!1;const L=new Map;let R,B=null,m=null;const A=Ve("ballContentContainerRef"),d=Ve("secondConfirmRef"),i=Ve("imageTranslateSettingRef"),f=Ve("popupContainerRef"),g=Ve("tipRef"),P=D(null),W=D({}),$=D(new Map),ve=[{value:"1",label:v("hoverBall.closeOneTime")},{value:"2",label:v("hoverBall.disableOnePage")},{value:"3",label:v("hoverBall.disable")}],Z=D(""),fe=D({});function N(){return en()?{left:"0px"}:{right:"0px"}}function x(){return en()?"16px":"calc(100% - 16px)"}const F=oe(()=>{var H;const{imageBlackSites:T=[]}=s.value||{};return!Yt(location.href,T)&&n.value.imageTranslation.enable&&!Yt(location.href,n.value.imageTranslation.blockedSites)&&(!((H=r.value)!=null&&H.region)||ys.includes(r.value.region))}),j=oe(()=>Array.from($.value.entries()).filter(([,T])=>F.value&&T.show&&!T.smallSize||T.status==="translating"||T.status==="fail").map(([T,b])=>({...b,imgEl:T}))),Y=oe(()=>P.value?$.value.get(P.value):null);function K(T){if(!P.value||!$.value.get(P.value))return null;const H=j.value.findIndex(le=>le.imgEl===P.value);return H!==-1&&T.value&&T.value.length>H?T.value[H]:null}const O=oe(()=>K(A)),J=oe(()=>K(d)),X=oe(()=>K(i)),Be=oe(()=>K(f)),re=oe(()=>K(g)),V=oe(()=>{const T=n.value.imageTranslation.targetLanguage,b=rn(T,u.value);return b?v(`language.${b.value}`)||b.label:v("language.en")});nn(Be,T=>{P.value&&(T.target===P.value&&Y.value?(Y.value.expanded=!1,Xe(Y.value)):rt(P.value))},{ignore:[O]});function Q(){Ct(()=>{var Vt,ht;const T={};let b=0,H=0;if(!O.value)return;(Vt=Y.value)!=null&&Vt.secondConfirmShow&&J.value&&(b=J.value.$el.getBoundingClientRect().height,H=J.value.$el.getBoundingClientRect().width),(ht=Y.value)!=null&&ht.imageTranslateSettingShow&&X.value&&(b=X.value.$el.getBoundingClientRect().height,H=X.value.$el.getBoundingClientRect().width);const{bottom:le,right:pt,left:tt}=O.value.getBoundingClientRect(),Ye=6,Jt=40,xt=10,Je=window.innerWidth;W.value={},le+Ye+b>window.innerHeight?T.bottom=`${Jt}px`:T.top=`calc(100% + ${Ye}px)`,en()?T.right=pt<H?`${pt-H-xt}px`:"0px":T.left=pt+H>Je?`${Je-tt-H-xt}px`:"0px",W.value=T})}function Ee(T){const b=T.imgEl instanceof Element?lc(T.imgEl).effective:999,H=T.status==="translating"?b+1:2147483647;return en()?{left:`${T.x}px`,top:`${T.y}px`,zIndex:H}:{right:`${T.x}px`,top:`${T.y}px`,zIndex:H}}const ee=(T,b,H)=>{if(!O.value)return;const le=$.value.get(b);if(!le||le.toastMessage||le.exceedLimitTipShow||le.status==="translating")return;const pt=O.value.getBoundingClientRect(),tt=T.target.getBoundingClientRect(),Ye=pt.right-tt.right,Jt=tt.left-pt.left,xt=tt.top;fe.value={},Z.value=H,le.showTips=!0,le.guidShow=!1,Ct(()=>{if(!re.value)return;const Je=re.value.clientWidth,Vt=re.value.clientHeight,ht=10,Ut=window.innerWidth;if(en()){const It=tt.left-(Je-tt.width)/2;if(It+Je>Ut-ht){const qt=It+Je-(Ut-ht);fe.value={left:`${Jt-(Je-tt.width)/2-qt}px`}}else if(It<ht){const qt=ht-It;fe.value={left:`${Jt-(Je-tt.width)/2+qt}px`}}else fe.value={left:`${Jt-(Je-tt.width)/2}px`}}else{const It=tt.right+(Je-tt.width)/2;if(It-Je<ht){const qt=ht-(It-Je);fe.value={right:`${Ye-(Je-tt.width)/2-qt}px`}}else if(It>Ut-ht){const qt=It-(Ut-ht);fe.value={right:`${Ye-(Je-tt.width)/2+qt}px`}}else fe.value={right:`${Ye-(Je-tt.width)/2}px`}}Vt>xt-ht?fe.value.top=`${pt.height+ht}px`:fe.value.top=`-${pt.height+ht}px`})},be=T=>{const b=$.value.get(T);b&&(b.showTips=!1)},ye=()=>{$.value.forEach(T=>{T.exceedLimitTipShow=!1,T.status="idle"})};function De(){setTimeout(()=>{h.value=!0},1e3)}const we=T=>{const b=$.value.get(T);b&&(b.status==="fail"&&I.reportClickEvent("plugin_image_translate_error_page","close"),b.toastMessage="",b.status="idle")};function Me(T,b){const H=`${n.value.imageTranslation.targetLanguage}-${c.value}`,le=L.get(T);le?le.set(H,b):L.set(T,new Map([[H,b]]))}function xe(T){const b=`${n.value.imageTranslation.targetLanguage}-${c.value}`,H=L.get(T);return H?H.get(b):null}function Ne(T,b=v("imageBall.translateFail")){T.toastMessage=b,T.status="fail",I.reportShowEvent("plugin_image_translate_error_page")}const Ke=T=>{const b=$.value.get(T);b&&((b.status==="idle"||b.status==="fail")&&I.reportClickEvent("plugin_image_translate_page","translate"),b.status==="success"?Qe(T):vt(T))},Qe=T=>{var H;const b=$.value.get(T);b&&((H=b.imageSrcObserver)==null||H.disconnect(),b.imageSrcObserver=null,b.status==="success"&&(b.originalState&&La(T,b.originalState),b.status="idle"))},He=T=>{const b=$.value.get(T);b&&(b.imageSrcObserver||(b.imageSrcObserver=new MutationObserver(H=>{H.forEach(le=>{var pt;if(le.type==="attributes"&&le.attributeName==="src"){const tt=le.target,Ye=$.value.get(tt);if(!Ye)return;(pt=Ye.imageSrcObserver)==null||pt.disconnect(),Ye.imageSrcObserver=null,Ye.status==="fail"?(Ye.toastMessage="",Ye.exceedLimitTipShow=!1,Ye.status="idle"):Ye.status==="success"&&Ye.originalState&&(Ye.originalState.src=tt.src,Qe(tt))}})}),b.imageSrcObserver.observe(T,{attributes:!0})))},vt=async T=>{var Ar,Ln;const b=$.value.get(T);if(!b||b.status==="translating")return;if(await a(),ft(b),Xe(b),b.toastMessage="",!r.value){const Rn=encodeURIComponent(`${he.pluginDescPage}?from=extensionLogin&position=plugin_floatingball_translate_image`);$e(`${he.loginUrl}?feature=plugin_image_translate&position=plugin_floatingball_translate_image&cb=${Rn}`),I.reportShowEvent("plugin_image_translate_to_login_page");return}if(b.expanded=!1,b.status="translating",r.value.region&&!ys.includes(r.value.region)){Ne(b,v("imageBall.regionNotSupport")),I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"check_region",status:"failed_region_not_support"}),He(T);return}I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"check_region",status:"success"});const H=Date.now();I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"web_image_download",status:"processing"});const le=await sc(T.src),pt=le.info;if(le.code!==0||!pt){I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"web_image_download",status:`failed_${le.msg}`,duration:Date.now()-H}),le.code===100?Ne(b,v("imageBall.notSupportedGif")):le.code===Fe.REQUEST_TIMEOUT?Ne(b,v("imageBall.imageGetFailed")):le.code===400?Ne(b,v("imageBall.imageGetTimeout")):Ne(b),He(T);return}I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"web_image_download",status:"success",duration:Date.now()-H});const{blobUrl:tt,md5:Ye,filename:Jt}=pt,xt=xe(Ye);if(xt){b.originalState=ks(T,xt),b.status="success",He(T);return}const Je=await at(Ie.GET_IMAGE_TRANSLATE_COUNT,r.value);if(Je==null){Ne(b),He(T);return}if(Je===0){(Ar=r.value)!=null&&Ar.isVip?b.toastMessage=v("imageBall.vipLimitTip"):(b.exceedLimitTipShow=!0,I.reportShowEvent("plugin_image_translate_text_link")),b.status="fail",He(T);return}const Vt=Vi(n.value.imageTranslation.targetLanguage,u.value,l.value),ht=dr(),Ut=await at(Ie.UPLOAD_IMAGE_REQUEST,{imageUrl:tt,filename:Jt,md5:Ye,requestId:ht,userProperties:I.userProperties,reportParams:I.commonParams,to:Vt}),It=(Ln=Ut.data)==null?void 0:Ln.fileUuid;if(Ut.code!==Fe.SUCCESS||!It){Ut.code===Fe.REQUEST_TIMEOUT?Ne(b,v("imageBall.imageGetTimeout")):Ne(b),He(T);return}const qt=await at(Ie.TRANSLATE_IMAGE_REQUEST,{translateEngine:l.value?"self_engine":"youdao",fileUuid:It,filename:Jt,md5:Ye,to:Vt,engineName:c.value,requestId:ht,isVip:r.value.isVip,region:r.value.region||"",userProperties:I.userProperties,reportParams:I.commonParams}),rr=qt.data;if(qt.code!==Fe.SUCCESS||!rr){qt.code===Fe.REQUEST_TIMEOUT?Ne(b,v("imageBall.imageGetTimeout")):Ne(b),He(T);return}const ia=new Promise(Rn=>{const ar=()=>{T.removeEventListener("error",ar),T.removeEventListener("load",sr),b.status="fail",b.originalState&&La(T,b.originalState),Ne(b),Rn()},sr=()=>{T.removeEventListener("load",sr),T.removeEventListener("error",ar),Me(Ye,_r),b.status="success",Rn()};T.addEventListener("load",sr),T.addEventListener("error",ar)}),_r=decodeURIComponent(rr.resultFileUrl);b.originalState=ks(T,_r),await ia,He(T),B!==T&&Et(T),T.isConnected||(lt(T),L.delete(Ye))};function Et(T){const b=$.value.get(T);b&&(b.toastMessage||b.exceedLimitTipShow||b.status==="success"||b.status==="fail"?b.show=!1:b.status==="idle"&&lt(T))}function Oe(T){var b,H;(b=T.imageSizeObserver)==null||b.disconnect(),T.imageSizeObserver=null,(H=T.imageSrcObserver)==null||H.disconnect(),T.imageSrcObserver=null}function lt(T){const b=$.value.get(T);b&&(Oe(b),$.value.delete(T))}function Dt(T){const b=T[T.length-1];if(!b)return;const H=b.target,le=$.value.get(H);if(!le)return;le.show=!1;let pt=0,tt=0,Ye=0;const Jt=2,xt=50,Je=()=>{if(!H.isConnected||!$.value.has(H))return;const Vt=H.getBoundingClientRect(),ht=Vt.width,Ut=Vt.height;if(Math.abs(ht-pt)<1&&Math.abs(Ut-tt)<1?Ye++:(Ye=0,pt=ht,tt=Ut),Ye>=Jt){const It=ht<qn||Ut<qn;le.smallSize=It,le.show=!0,Ce(le,Vt);return}setTimeout(Je,xt)};setTimeout(Je,xt)}function Le(T){const b=T.getBoundingClientRect(),H=b.width<qn||b.height<qn,le=new ResizeObserver(Dt);le.observe(T),$.value.set(T,{key:`${Date.now()}_${Math.random()}`,x:en()?b.left+Sr:document.documentElement.clientWidth-b.right+Sr,y:b.bottom-Os,show:!0,expanded:!1,status:"idle",secondConfirmShow:!1,imageTranslateSettingShow:!1,hoverImg:!0,imgEl:T,popupCloseClick:!1,showTips:!1,exceedLimitTipShow:!1,guidShow:w&&!H,toastMessage:"",smallSize:H,imageSizeObserver:le,imageSrcObserver:null}),!H&&F.value&&(w&&I.reportShowEvent("plugin_image_translate_first_time_guide"),dt(ge.IMAGE_TRANSLATE_BALL_GUID_SHOW,!0),w=!1,I.reportShowEvent("plugin_image_translate_entry"))}function Ce(T,b){T.x=en()?b.left+Sr:document.documentElement.clientWidth-b.right+Sr,T.y=b.bottom-Os}function Ge(T){const b=T.target;if(R&&clearTimeout(R),uc(b)==="gif")return;B=b,P.value=b,$.value.forEach(le=>{le.status==="idle"&&le.imgEl!==b&&le.show&&lt(le.imgEl)});const H=$.value.get(b);H&&(H.hoverImg=!0),R=setTimeout(()=>{const le=b.getBoundingClientRect(),pt=le.width<qn||le.height<qn;if(!H)Le(b);else{const tt=H.show;H.show=!0,H.smallSize=pt,Ce(H,le),!tt&&!pt&&I.reportShowEvent("plugin_image_translate_entry")}},mc)}function At(T){R&&(clearTimeout(R),R=void 0),B=null;const b=T.target,H=$.value.get(b);H&&(H.hoverImg=!1,setTimeout(()=>{!H.expanded&&Et(b)},10))}async function ct(T){m=T.target}function ne(T){const b=$.value.get(T);b&&b.status!=="translating"&&F.value&&(b.expanded===!1&&I.reportShowEvent("plugin_image_translate_page"),b.expanded=!0)}function _e(T){const b=$.value.get(T);if(b&&!(b.imageTranslateSettingShow||b.secondConfirmShow)){if(b.expanded=!1,b.popupCloseClick){b.popupCloseClick=!1;return}setTimeout(()=>{!b.hoverImg&&Et(T)},10)}}const Xe=T=>{T.secondConfirmShow=!1,T.imageTranslateSettingShow=!1},ft=T=>{T.exceedLimitTipShow=!1,T.guidShow=!1,T.showTips=!1},rt=T=>{const b=$.value.get(T);b&&(b.popupCloseClick=!0,b.expanded=!1,Xe(b),Et(T))};function ce(T){const b=$.value.get(T);if(b){if(b.imageTranslateSettingShow){b.imageTranslateSettingShow=!1;return}Xe(b),b.imageTranslateSettingShow=!0,Q(),I.reportClickEvent("plugin_image_translate_page","settings"),I.reportShowEvent("plugin_image_translate_setting_page")}}function p(T){$.value.get(T)&&(Qe(T),vt(T))}function _(T){const b=$.value.get(T);if(b){if(b.secondConfirmShow){b.secondConfirmShow=!1;return}Xe(b),b.secondConfirmShow=!0,Q(),I.reportClickEvent("plugin_image_translate_page","close"),I.reportShowEvent("plugin_image_translate_retention_page")}}function C(T){E("close",T)}function U(){$.value.forEach((T,b)=>{const H=b.getBoundingClientRect();Ce(T,H)})}let S=null;function M(T){T.addEventListener("mouseenter",Ge),T.addEventListener("mouseleave",At),T.addEventListener("contextmenu",ct)}function te(T){T.removeEventListener("mouseenter",Ge),T.removeEventListener("mouseleave",At),T.removeEventListener("contextmenu",ct)}function ue(T){if(T.type===Ie.TRANSLATE_IMAGE&&m){let b=$.value.get(m);b||(Le(m),b=$.value.get(m)),(b==null?void 0:b.status)==="idle"?I.reportClickEvent("Other","plugin_rightclickmenu_translate_image"):(b==null?void 0:b.status)==="success"&&I.reportClickEvent("Other","plugin_rightclickmenu_restore_image"),(b==null?void 0:b.status)==="success"?Qe(m):vt(m)}}return kt(async()=>{w=!await We(ge.IMAGE_TRANSLATE_BALL_GUID_SHOW),o(),Array.from(document.querySelectorAll("img")).forEach(M),S=new MutationObserver(b=>{b.forEach(H=>{H.addedNodes.forEach(le=>{le instanceof HTMLImageElement?M(le):le instanceof HTMLElement&&le.querySelectorAll("img").forEach(M)}),H.removedNodes.forEach(le=>{if(le instanceof HTMLImageElement)te(le),lt(le);else if(le instanceof HTMLElement){const pt=le.querySelectorAll("img");pt.forEach(tt=>{lt(tt)}),pt.forEach(te)}})})}),S.observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("scroll",U,!0),window.addEventListener("resize",U,!0),chrome.runtime.onMessage.addListener(ue)}),xn(()=>{Array.from(document.querySelectorAll("img")).forEach(te),window.removeEventListener("scroll",U,!0),window.removeEventListener("resize",U,!0),chrome.runtime.onMessage.removeListener(ue),S&&(S.disconnect(),S=null),$.value.forEach((b,H)=>{Oe(b),b.originalState&&La(H,b.originalState)}),m=null,B=null,L.clear(),$.value.clear()}),(T,b)=>(k(!0),se($t,null,Tn(j.value,H=>(k(),se("div",{class:"image-translate-ball-container",style:Ae(Ee(H)),key:H.key,onMouseenter:le=>ne(H.imgEl),onMouseleave:le=>_e(H.imgEl),ref_for:!0,ref:"ballContentContainerRef",onClick:b[1]||(b[1]=mn(()=>{},["stop"]))},[y("div",{class:st(["image-translate-icon-container",{hover:H.expanded}]),dir:z(en)()?"ltr":"rtl"},[y("div",{class:st(["translateIcon",{translating:H.status==="translating"}]),onMouseenter:le=>ee(le,H.imgEl,H.status==="success"?z(v)("translate.showOrigin"):z(v)("hoverBall.tips.translate",[V.value])),onMouseleave:le=>be(H.imgEl),onClick:le=>Ke(H.imgEl)},[ie(ut,{icon:H.status==="translating"?"loading":"translate-text-white",size:20},null,8,["icon"])],42,dc),H.status==="success"||H.status==="fail"?(k(),se("div",{key:0,class:"image-translate-status-icon",style:Ae(z(en)()?{left:"20px"}:{right:"20px"})},[y("img",{width:"12px",height:"12px",src:H.status==="success"?z(pn)("images/translateSuccess.png"):z(pn)("images/translateFail.png")},null,8,gc)],4)):me("",!0),y("div",{class:"otherIcons",style:Ae(z(en)()?{marginLeft:"-4px"}:{marginRight:"-4px"})},[y("button",{class:st(["icon-button",{active:H.imageTranslateSettingShow}]),onMouseenter:le=>ee(le,H.imgEl,z(v)("common.setting")),onMouseleave:le=>be(H.imgEl),onClick:le=>ce(H.imgEl),title:z(v)("common.setting")},[ie(ut,{icon:"open-setting-white",size:20})],42,fc),y("button",{class:st(["icon-button",{active:H.secondConfirmShow}]),onClick:le=>_(H.imgEl),onMouseenter:le=>ee(le,H.imgEl,z(v)("common.disable")),onMouseleave:le=>be(H.imgEl)},[ie(ut,{icon:"always-close-white",size:20})],42,hc)],4),Rt(y("div",{ref_for:!0,ref:"tipRef",style:Ae(fe.value),class:"common-tips"},de(Z.value),5),[[Lt,H.showTips]])],10,pc),y("div",{class:"image-translate-ball-colorful-tips-container",style:Ae(N())},[Rt(ie(Mi,{style:{"white-space":"nowrap"},noClose:"",position:"bottom",offset:x()},{default:Ze(()=>[Mt(de(z(v)("imageBall.guid")),1)]),_:2},1032,["offset"]),[[Lt,H.guidShow]]),Rt(ie(tr,{style:{width:"320px"},offset:x(),scene:"plugin_image_translate_text_link","translate-type":z(G).IMAGE,position:"bottom",onUpgrade:De,onClose:b[0]||(b[0]=le=>ye())},null,8,["offset","translate-type"]),[[Lt,H.exceedLimitTipShow]])],4),y("div",{class:"image-translate-ball-toast-container",style:Ae(N())},[Rt(ie(Xl,{"arrow-offset":x(),onClose:le=>we(H.imgEl),position:"bottom"},{default:Ze(()=>[Mt(de(H.toastMessage),1)]),_:2},1032,["arrow-offset","onClose"]),[[Lt,H.toastMessage]])],4),y("div",{style:Ae(W.value),ref_for:!0,ref:"popupContainerRef",class:"image-translate-ball-popup-container"},[Rt(ie(es,{source:"image",style:{position:"relative"},ref_for:!0,ref:"imageTranslateSettingRef",onClose:le=>rt(H.imgEl),onSettingChange:le=>p(H.imgEl)},null,8,["onClose","onSettingChange"]),[[Lt,H.imageTranslateSettingShow]]),Rt(ie(ta,{ref_for:!0,ref:"secondConfirmRef",source:"image_ball",title:z(v)("common.disableDesc",[z(v)("imageBall.name")]),onClose:le=>rt(H.imgEl),onConfirm:C,options:ve},null,8,["title","onClose"]),[[Lt,H.secondConfirmShow]])],4)],44,cc))),128))}}),Ec=ze(vc,[["__scopeId","data-v-47a9ee62"]]),hr=new Map,bc=t=>{const{text:e,service:n,targetLanguage:r,translateType:a}=t,s=Xa(e).toString();return hr.has(`${n}-${r}-${a}-${s}`)?hr.get(`${n}-${r}-${a}-${s}`):""},Tc=(t,e)=>{const{text:n,service:r,targetLanguage:a,translateType:s}=t,o=Xa(n).toString();hr.set(`${r}-${a}-${s}-${o}`,e)},wc=t=>{const{text:e,service:n,targetLanguage:r,translateType:a}=t,s=Xa(e).toString();hr.delete(`${n}-${r}-${a}-${s}`)},_c=()=>{hr.clear()};function Ho(){return{getTranslateResultCache:bc,setTranslateResultCache:Tc,deleteTranslateResultCache:wc,clearTranslateResultCachedMap:_c}}const Ac=["title"],yc=qe({__name:"GetFreeTrialButton",props:{reportItem:{},reportPremiumPromotionItem:{},reportPageName:{}},setup(t){const{userInfo:e}=_t(),{giftText:n,giftType:r}=Er(),a=t,s=D(!0);Te(e,async()=>{var c;const l=await We(ge.TRANSLATE_WINDOW_UPGRADE_PRO_CLOSE_TIME);if(l&&Date.now()-l<5*24*60*60*1e3){s.value=!1;return}e.value||(s.value=!0),s.value=!((c=e.value)!=null&&c.isVip)},{immediate:!0}),Te(s,l=>{l&&(I.reportShowEvent(a.reportItem),I.fireEvent(Nt.PREMIUM_PROMOTION,{action:"show",item:a.reportPremiumPromotionItem,type:r.value==="1"?"1":"5"}))},{immediate:!0});const o=()=>{I.reportClickEvent(a.reportPageName,"close_plugin_select_to_translate_page_get_free_trial"),s.value=!1,dt(ge.TRANSLATE_WINDOW_UPGRADE_PRO_CLOSE_TIME,Date.now())},u=()=>{I.reportClickEvent(a.reportPageName,a.reportItem),I.fireEvent(Nt.PREMIUM_PROMOTION,{action:"click",item:a.reportPremiumPromotionItem,type:r.value==="1"?"1":"5"});const l=`${he.priceUrl}?position=${a.reportPremiumPromotionItem}`;$e(l)};return(l,c)=>s.value?(k(),Se(Qt,{key:0,class:"free-trial-btn",onClick:u},{default:Ze(()=>[ie(ut,{icon:"gift",size:16}),y("span",{class:"free-trial-btn-text",title:z(n)},de(z(n)),9,Ac),ie(ut,{icon:"close",size:16,onClick:mn(o,["stop"])})]),_:1})):me("",!0)}}),Cc=ze(yc,[["__scopeId","data-v-7d1911b5"]]),Dc=qe({__name:"TranslateWindowActionBarItem",props:{isActive:{type:Boolean},name:{},icon:{},activeIcon:{},label:{},isDisabled:{type:Boolean},visible:{type:Boolean},showArrowIcon:{type:Boolean}},setup(t){const e=t,n=D(!1);function r(){e.isDisabled&&(n.value=!n.value)}return(a,s)=>(k(),se("div",{key:a.name,class:st(["translate-window-footer-explain",{active:a.isActive,disable:a.isDisabled}]),onMouseenter:r,onMouseleave:r},[ie(ut,{icon:a.isActive?a.activeIcon:a.icon,size:20},null,8,["icon"]),y("span",null,de(a.label),1),a.showArrowIcon?(k(),Se(ut,{key:0,class:st(["explain-arrow",{rotated:a.isActive}]),icon:a.isActive?"close-blue":"plus",size:12},null,8,["class","icon"])):me("",!0)],34))}}),Go=ze(Dc,[["__scopeId","data-v-c39678ae"]]),Sc={class:"translate-window-footer-action-wrapper"},xc=qe({__name:"TranslateWindowActionBar",props:bn({showExplain:{type:Boolean},showImproveWrite:{type:Boolean},showTranslate:{type:Boolean},reportPageName:{}},{translateType:{required:!0,default:G.NONE},translateTypeModifiers:{}}),emits:["update:translateType"],setup(t){const e=t,n=Fn(t,"translateType"),r=D(!1),a=D(!1),s=oe(()=>[{name:G.EXPLAIN,icon:"explain",activeIcon:"explain-blue",labelKey:"explain.explain",isDisabled:r.value,visible:e.showExplain},{name:G.IMPROVE_WRITE,icon:"edit2",activeIcon:"edit2-blue",labelKey:"improveWrite.improveWrite",isDisabled:a.value,visible:e.showImproveWrite},{name:G.TRANSLATE,icon:"translate-no-arrow",activeIcon:"translate-no-arrow-blue",labelKey:"translate.translate",visible:e.showTranslate,isDisabled:!1}]);function o(u){let l="",c="";u===n.value?(n.value=G.NONE,l="deactive",c=u):(n.value=u,l="active",c=u),I.reportClickEvent(e.reportPageName,`switch_feature_tab_${l}_${c}_tab`)}return(u,l)=>(k(),se("div",Sc,[(k(!0),se($t,null,Tn(s.value.filter(c=>c.visible),c=>(k(),Se(Go,{key:c.name,class:"translate-window-footer-action-item","is-active":n.value===c.name,name:c.name,icon:c.icon,"active-icon":c.activeIcon,label:u.$t(c.labelKey),"is-disabled":c.isDisabled,visible:c.visible,"show-arrow-icon":!0,onClick:h=>o(c.name)},null,8,["is-active","name","icon","active-icon","label","is-disabled","visible","onClick"]))),128)),l[0]||(l[0]=y("div",{class:"empty-area"},null,-1)),ie(Cc,{class:"free-trial-btn","report-page-name":e.reportPageName,"report-item":"plugin_select_to_translate_page_get_trial_upgrade","report-premium-promotion-item":"plugin_select_to_translate_get_trial"},null,8,["report-page-name"])]))}}),Lc=ze(xc,[["__scopeId","data-v-4c60f9ac"]]),Rc={class:"translate-window-header"},Ic={class:"header-left"},Bc={class:"function-label"},Nc={class:"window-action"},kc={class:"window-action-more-list-content"},Oc=["src"],Fc={class:"window-action-more-list-item-content"},Pc={class:"window-action-more-list-item-content"},Mc=["src"],$c={class:"window-action-more-list-item-content"},Uc={class:"window-action-icon"},qc=["src"],Hc=["title"],Gc=["src"],Vc=qe({__name:"TranslateWindowHeader",props:bn({sourceText:{},showTargetLanguageInput:{type:Boolean},targetLanguageProp:{},translateReplaceType:{},reportPageName:{}},{translateType:{required:!0,default:G.TRANSLATE},translateTypeModifiers:{}}),emits:bn(["close","serviceChange","targetLanguageChange","alwayCloseConfirm","functionChange"],["update:translateType"]),setup(t,{expose:e,emit:n}){const r=t,{t:a,locale:s}=gt(),o=D(),u=Ve("moreActionsRef"),l=Ve("moreActionsContainerRef"),c=D(!1),h=D(),v=D({}),{userInfo:E}=_t(),{userSettings:w,notifyUserSettings:L}=et(),R=D(r.targetLanguageProp),B=D(w.value.translationService),m=D(!1),A=D(void 0),d=Fn(t,"translateType"),i=oe(()=>[{value:G.TRANSLATE,labelKey:"translate.translate",label:a("translate.translate"),icon:"translate-no-arrow"},{value:G.IMPROVE_WRITE,labelKey:"improveWrite.improveWrite",label:a("improveWrite.improveWrite"),icon:"edit2"}]),f=oe(()=>i.value.find(re=>re.value===d.value)),g=n,P=oe(()=>on(s.value)),W=oe(()=>({...P.value?{left:"-35%"}:{right:"-35%"},...v.value})),$=oe(()=>r.translateReplaceType===nt.OPEN_MODAL?{source:"input_ball",title:a("common.disableDesc",[a("inputBall.name")])}:{source:"select_text",title:a("translate.disableSelect")}),ve=oe(()=>{if(r.translateReplaceType===nt.OPEN_MODAL)return[{value:"1",label:a("hoverBall.closeOneTime")},{value:"2",label:a("hoverBall.disableOnePage")},{value:"3",label:a("hoverBall.disable")}];const re=[{value:"1",label:a("hoverBall.closeOneTime")},{value:"2",label:a("hoverBall.disableOnePage")},{value:"3",label:a("hoverBall.disable")}];return w.value.targetLanguage===A.value&&re.push({value:"4",label:a("hoverBall.languageDisable",[a(`language.${A.value}`)])}),re}),Z=oe(()=>{const re={};if(m.value&&u.value&&l.value){const{width:V}=u.value.getBoundingClientRect(),{left:Q,right:Ee}=l.value.getBoundingClientRect();P.value?Ee-V<0?re.right=`${Ee-V-10}px`:re.right="0px":window.innerWidth-Q-V<0?re.left=`${window.innerWidth-Q-V-10}px`:re.left="0px"}return re}),fe=oe(()=>r.translateReplaceType===nt.OPEN_MODAL?"plugin_input_translate_setting":"plugin_select_to_translate");Te(h,re=>{re&&(v.value={},Ct(()=>{const V=re.$el.getBoundingClientRect(),Q={};V.bottom>window.innerHeight&&(Q.top=`${-V.height-10}px`),P.value&&V.left<0?Q.left="0px":!P.value&&V.right>window.innerWidth&&(Q.right="0px"),Object.keys(Q).length>0&&(v.value=Q)}))}),Te(()=>r.targetLanguageProp,re=>{re&&(R.value=re)}),Te(R,re=>{g("targetLanguageChange",re)}),Te(B,re=>{g("serviceChange",re),L({translationService:re})}),nn(h,()=>{c.value=!1});const N=re=>chrome.runtime.getURL(`public/images/${re}.png`),x=()=>{m.value=!1,$e(`${he.feedBackPage}?source=plugin&entry=select_to_translate`),I.reportClickEvent(r.reportPageName,"more_feedback")},F=()=>{m.value=!1,c.value||(c.value=!0,I.reportShowEvent("plugin_select_to_retention_page"),I.reportClickEvent(r.reportPageName,"more_disable"))},j=()=>{m.value=!1;let re=he.selectSettingPage,V="plugin_select_to_translate";r.translateReplaceType===nt.OPEN_MODAL&&(re=he.textBoxSettingPage,V="plugin_textbox_translate");let Q;if(E.value)Q=`${re}?source=plugin`;else{const Ee=encodeURIComponent(`${re}?source=plugin&from=extensionLogin`);Q=`${he.loginUrl}?feature=${V}&cb=${Ee}`}$e(Q),I.reportClickEvent(r.reportPageName,"more_settings")},Y=()=>{g("close"),I.reportClickEvent(r.reportPageName,"close")},K=re=>{c.value=!1,g("alwayCloseConfirm",re)},O=re=>{g("functionChange",re),I.reportClickEvent(r.reportPageName,"switch_feature_dropdown_list_list_select",{selected_item:re})},J=()=>{I.reportClickEvent(r.reportPageName,"switch_feature_dropdown_list")},X=()=>{I.reportClickEvent(r.reportPageName,"more")},Be=async()=>{var re;try{const V=await fo(r.sourceText);A.value=(re=rn(V))==null?void 0:re.value}catch{}};return e({openModelSelect:()=>{var re;(re=o.value)==null||re.openOptions()},toggleService:re=>{var V;(V=o.value)==null||V.toggleService(re)},userInfoRefresh:()=>{R.value=r.translateReplaceType===nt.OPEN_MODAL?w.value.textboxTranslation.targetLanguage:w.value.targetLanguage,B.value=w.value.translationService},secondConfirmShow:c}),kt(()=>{Be()}),(re,V)=>(k(),se("div",Rc,[y("div",Ic,[ie(ro,{class:"translate-type-select-container",modelValue:d.value,"onUpdate:modelValue":V[0]||(V[0]=Q=>d.value=Q),options:i.value,onClick:J,onChange:O},{prefix:Ze(()=>{var Q;return[ie(ut,{class:"function-icon",size:24,icon:(Q=f.value)==null?void 0:Q.icon},null,8,["icon"])]}),option:Ze(Q=>[ie(ut,{class:"function-icon",size:24,icon:Q.option.icon},null,8,["icon"]),y("div",Bc,[y("div",null,de(re.$t(Q.option.labelKey)),1)]),Rt(ie(ut,{class:"selected-icon",size:16,icon:"check"},null,512),[[Lt,Q.option.value===d.value]])]),_:1},8,["modelValue","options"]),V[10]||(V[10]=y("div",{class:"empty-area"},null,-1)),Rt(ie(Wa,{source:re.reportPageName,onMousedown:V[1]||(V[1]=mn(()=>{},["stop"])),class:"language-select",nativeSelect:!1,"has-icon":!1,"is-narrower":!0,column:1,size:"small",modelValue:R.value,"onUpdate:modelValue":V[2]||(V[2]=Q=>R.value=Q)},null,8,["source","modelValue"]),[[Lt,re.showTargetLanguageInput]]),ie(oo,{onMousedown:V[3]||(V[3]=mn(()=>{},["stop"])),ref_key:"modelServiceSelectRef",ref:o,"utm-source":fe.value,"report-page-name":re.reportPageName,large:!0,modelValue:B.value,"onUpdate:modelValue":V[4]||(V[4]=Q=>B.value=Q),"has-label":!1,class:"model-select"},null,8,["utm-source","report-page-name","modelValue"])]),y("div",{class:"header-right",onMousedown:V[7]||(V[7]=mn(()=>{},["stop"]))},[y("div",Nc,[y("div",{ref_key:"moreActionsContainerRef",ref:l,style:{position:"relative"},onClick:X,onMouseenter:V[5]||(V[5]=Q=>m.value=!0),onMouseleave:V[6]||(V[6]=Q=>m.value=!1)},[m.value?(k(),se("div",{key:0,ref_key:"moreActionsRef",ref:u,style:Ae(Z.value),class:"window-action-more-list-container"},[y("div",kc,[y("div",{class:"window-action-more-list-item",onClick:x},[y("img",{src:N("feedback"),width:"16px",height:"16px"},null,8,Oc),y("div",Fc,de(z(a)("common.feedback")),1)]),y("div",{class:"window-action-more-list-item",onClick:j},[ie(ut,{icon:"setting",size:16}),y("div",Pc,de(z(a)("common.setting")),1)]),y("div",{class:"window-action-more-list-item",onClick:F},[y("img",{src:N("alwaysClose"),width:"16px",height:"16px"},null,8,Mc),y("div",$c,de(z(a)("common.disable")),1)])])],4)):me("",!0),y("div",Uc,[y("img",{src:N("more"),width:"16px",height:"16px"},null,8,qc)])],544),y("div",null,[y("div",{title:z(a)("common.close"),class:"window-action-icon",onClick:Y},[y("img",{src:N("windowClose"),width:"16px",height:"16px"},null,8,Gc)],8,Hc)])])],32),c.value?(k(),Se(ta,{key:0,onMousedown:V[8]||(V[8]=mn(()=>{},["stop"])),source:$.value.source,title:$.value.title,ref_key:"secondConfirmRef",ref:h,style:Ae(W.value),onClose:V[9]||(V[9]=()=>c.value=!1),onConfirm:K,options:ve.value,class:"select-text-close-second-confirm"},null,8,["source","title","style","options"])):me("",!0)]))}}),Wc=ze(Vc,[["__scopeId","data-v-35c0f386"]]),zc={class:"explain-not-support-container"},jc={class:"explain-not-support-text"},Xc=["src"],Yc=qe({__name:"ExplainNotSupport",props:{translateType:{},meedReportSubType:{type:Boolean},reportPageName:{}},emits:["switchService"],setup(t,{emit:e}){const{t:n}=gt(),r=e,a=t,s=oe(()=>{switch(a.translateType){case G.EXPLAIN:return n("common.pleaseSwitchAI",[n("explain.explain")]);case G.IMPROVE_WRITE:return n("common.pleaseSwitchAI",[n("improveWrite.improveWrite")]);case G.TRANSLATE:default:return n("common.pleaseSwitchAI",[n("translate.translate")])}}),o=()=>chrome.runtime.getURL("public/images/model.png"),u=()=>{r("switchService")};return(l,c)=>(k(),se("div",zc,[y("div",jc,de(s.value),1),y("div",{class:"explain-not-support-switch",onClick:u},[y("img",{src:o(),width:"16px",height:"16px"},null,8,Xc),y("span",null,de(z(n)("common.switch")),1)])]))}}),Kc=ze(Yc,[["__scopeId","data-v-1d16d2d2"]]),Qc=qe({__name:"RotateCircleLoading",props:{height:{default:null}},setup(t){const e=t,n=oe(()=>e.height!==null&&e.height>0?{height:`${e.height}px`}:{});return(r,a)=>(k(),se("div",{class:"translate-window-bottom-loading",style:Ae(n.value)},[ie(ut,{class:"translate-loading-icon",icon:"loading-gray",size:20})],4))}}),Jc=ze(Qc,[["__scopeId","data-v-787900e9"]]),Zc={class:"translate-result-footer-icons"},ep=["onClick","onMouseenter"],tp={key:0,class:"translate-result-icon-tip"},np={key:1,class:"red-hot"},rp={class:"tip-text"},ap=qe({__name:"TranslateWindowResultFooter",props:{translateWindowResultType:{},translateType:{},translateReplaceType:{},translateResult:{},enableShowLabel:{type:Boolean},isWeakenedAndNarrower:{type:Boolean},isDragging:{type:Boolean},isNearBottom:{type:Boolean},showLanguageSelect:{type:Boolean},targetLanguageProp:{},reportPageName:{}},emits:["rewrite","replace","copy","targetLanguageChange"],setup(t,{emit:e}){const{t:n}=gt(),r=e,a=t,s={showRewriteExceedLimitTip:D(!1),updateShowRewriteExceedLimitTip:()=>{},moreToolsRedHotShow:D(!1),updateMoreToolsRedHotShow:()=>{},getReportClickItemName:(j,Y,K)=>j},{showRewriteExceedLimitTip:o,updateShowRewriteExceedLimitTip:u,moreToolsRedHotShow:l,updateMoreToolsRedHotShow:c,getReportClickItemName:h}=ho("translateWindowState",s),v=D(!1),E=D(!1),w=D(!1),L=D(""),R=D({}),B=D(null);let m=null;const{userSettings:A}=et(),d=D(a.translateReplaceType===nt.OPEN_MODAL?A.value.textboxTranslation.targetLanguage:A.value.targetLanguage),i=D({}),f=Ve("footerRef"),g=Ve("rewriteButtonContainer"),P=Ve("exceedLimitTipWrapperRef"),W=Ve("exceedLimitTipRef"),$=oe(()=>g.value&&(Array.isArray(g.value)?g.value:[g.value])[0]||null),ve=oe(()=>[{value:"rewrite",icon:a.isWeakenedAndNarrower?"rewrite-gray":"rewrite",tip:n("improveWrite.rewrite"),onClick:()=>{u(!1),r("rewrite");const j=h("rewrite",a.translateWindowResultType,a.translateType);I.reportClickEvent(a.reportPageName,j)},visible:a.translateType===G.IMPROVE_WRITE,showLabel:a.enableShowLabel,showRedHot:!1,size:20,isActive:!1},{value:"replace",icon:a.isWeakenedAndNarrower?"reset-gray":"reset",tip:n("improveWrite.replace"),onClick:()=>{r("replace");const j=h("replace",a.translateWindowResultType,a.translateType);I.reportClickEvent(a.reportPageName,j)},visible:(a.translateType===G.IMPROVE_WRITE||a.translateType===G.TRANSLATE)&&a.translateReplaceType===nt.OPEN_MODAL,showLabel:a.enableShowLabel,showRedHot:!1,size:20,isActive:!1},{value:"copy",icon:a.isWeakenedAndNarrower?"copy2-gray":"copy2",tip:v.value?n("common.copied"):n("common.copy"),onClick:j=>Z(j),visible:!0,showLabel:!1,showRedHot:!1,size:22,isActive:!1},{value:"moreTools",icon:a.isWeakenedAndNarrower?"more-tools-gray":"moreTools",tip:n("common.translateFileAndMore"),onClick:()=>fe(),visible:!0,showLabel:!1,showRedHot:l.value,size:20,isActive:!1}]),Z=j=>{if(v.value)return;r("copy"),v.value=!0,j&&(w.value=!0,L.value=n("common.copied"),E.value=!0,Ct(()=>{B.value&&(R.value=N(j.currentTarget,B.value,{position:"fixed",gap:4,margin:10,useRealSize:!0}))})),m&&clearTimeout(m),m=setTimeout(()=>{E.value=!1,w.value=!1,v.value=!1},1e3);const Y=h("copy",a.translateWindowResultType,a.translateType);I.reportClickEvent(a.reportPageName,Y)},fe=()=>{c(!1),dt(ge.TRANSLATE_WINDOW_RESULT_MORE_TOOLS_CLICK,!0);let j="plugin_select_to_translate_jump_to_more_tools";a.translateReplaceType===nt.OPEN_MODAL&&(j="plugin_textbox_jump_to_more_tools"),$e(`${he.fileTranslatePage}?position=${j}`);const Y=h("more",a.translateWindowResultType,a.translateType);I.reportClickEvent(a.reportPageName,Y==="more"?"more_tools":Y)},N=(j,Y,K={})=>{const{position:O="fixed",gap:J=8,margin:X=10,useRealSize:Be=!0,defaultWidth:re=200,defaultHeight:V=60}=K,Q=j.getBoundingClientRect();let Ee=re,ee=V;if(Y&&Be){const we=Y.getBoundingClientRect();Ee=we.width,ee=we.height}let ye=Q.left+Q.width/2-Ee/2,De=Q.top-ee-J;if(O==="absolute"){const we=f.value;if(!we)return{};const Me=we.getBoundingClientRect(),xe=Q.left-Me.left,Ne=Q.top-Me.top;return ye=xe+Q.width/2-Ee/2,De=Ne-ee-J,{position:"absolute",left:`${ye}px`,top:`${De}px`,zIndex:1e3}}else return ye<X?ye=X:ye+Ee>window.innerWidth-X&&(ye=window.innerWidth-X-Ee),De<X&&(De=Q.bottom+J),{position:O,left:`${ye}px`,top:`${De}px`,zIndex:1e3}},x=()=>{const j=$.value;return j?N(j,P.value,{position:"fixed",gap:4,margin:10,defaultWidth:300,defaultHeight:80,useRealSize:!0}):{}},F=(j,Y)=>{L.value=Y,E.value=!0,Ct(()=>{B.value&&(R.value=N(j.currentTarget,B.value,{position:"fixed",gap:4,margin:10,useRealSize:!0}))})};return Te([()=>a.translateType,()=>o.value&&!a.isDragging&&a.isNearBottom,()=>a.enableShowLabel],()=>{a.translateType===G.IMPROVE_WRITE&&Ct(()=>{i.value=x()})},{immediate:!0}),Te(()=>o.value&&a.translateType===G.IMPROVE_WRITE,j=>{var Y,K;j&&((K=(Y=W.value)==null?void 0:Y.reportShow)==null||K.call(Y))}),Te(()=>a.targetLanguageProp,j=>{d.value=j}),Te(d,j=>{r("targetLanguageChange",j)}),Te(()=>a.isDragging,j=>{j&&E.value&&(E.value=!1,w.value=!1,v.value=!1,m&&(clearTimeout(m),m=null))}),(j,Y)=>(k(),se("div",{class:st(["translate-window-result-footer",{"weakened-and-narrower":j.isWeakenedAndNarrower}]),ref_key:"footerRef",ref:f},[j.showLanguageSelect?(k(),Se(Wa,{key:0,class:"translate-window-result-footer-language-select",source:j.reportPageName,"native-select":!1,"has-icon":!1,column:1,size:"small","is-narrower":!0,"report-item-prefix":"translate_tab_",modelValue:d.value,"onUpdate:modelValue":Y[0]||(Y[0]=K=>d.value=K)},{input:Ze(()=>[ie(Go,{"is-active":!1,name:"world",icon:"world","active-icon":"world",label:z(n)(`language.${d.value}`)||d.value,"is-disabled":!1,visible:!0,"show-arrow-icon":!1},null,8,["label"])]),_:1},8,["source","modelValue"])):me("",!0),Y[3]||(Y[3]=y("div",{class:"empty-area"},null,-1)),y("div",Zc,[(k(!0),se($t,null,Tn(ve.value,K=>Rt((k(),se("div",{key:K.icon,class:st(["translate-result-icon-container",`icon-container-${K.value}`]),ref_for:!0,ref:K.value==="rewrite"?"rewriteButtonContainer":void 0},[y("div",{class:st(["translate-result-icon-wrapper",{active:K.isActive,"show-label":K.showLabel}]),onClick:mn(O=>K.onClick(O),["prevent"]),onMouseenter:O=>!K.showLabel&&!v.value&&F(O,K.tip),onMouseleave:Y[1]||(Y[1]=O=>!v.value&&(E.value=!1))},[ie(ut,{icon:K.icon,size:K.size||20},null,8,["icon","size"]),K.showLabel?(k(),se("div",tp,de(K.tip),1)):me("",!0),K.showRedHot?(k(),se("div",np)):me("",!0)],42,ep)],2)),[[Lt,K.visible]])),128))]),Rt(y("div",{ref_key:"exceedLimitTipWrapperRef",ref:P,style:Ae([{width:"300px","pointer-events":"all"},i.value])},[ie(tr,{ref_key:"exceedLimitTipRef",ref:W,"translate-type":z(G).IMPROVE_WRITE,"need-report-sub-type":!0,"auto-report-show-event":!1,"report-page-name":a.reportPageName,scene:"plugin_select_to_translate_page_free_trial_limit_upgrade_popup",position:"bottom",onClose:Y[2]||(Y[2]=K=>o.value=!1)},null,8,["translate-type","report-page-name"])],4),[[Lt,z(o)&&!j.isDragging&&j.isNearBottom&&a.translateType===z(G).IMPROVE_WRITE]]),ie(Yn,{name:"slow-fade-in"},{default:Ze(()=>[E.value?(k(),se("div",{key:0,ref_key:"tipRef",ref:B,style:Ae(R.value),class:st(["translate-result-hover-tip",{"with-icon":w.value}])},[w.value?(k(),Se(ut,{key:0,icon:"check-white",size:16,class:"tip-icon"})):me("",!0),y("span",rp,de(L.value),1)],6)):me("",!0)]),_:1})],2))}}),Vo=ze(ap,[["__scopeId","data-v-6e0e4445"]]),sp={key:2,class:"upgrade-now-wrapper"},op={key:0,class:"explain-disable-tips"},ip=qe({__name:"TranslateWindowResult",props:bn({translateWindowResultType:{},isAnotherResultShow:{type:Boolean},dependentServiceStatus:{},dependentServiceErrorCode:{default:Fe.SUCCESS},translateType:{},sourceText:{},userInfoRefreshed:{type:Boolean},targetLanguage:{},service:{},translateReplaceType:{},collapseBottom:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!0},isDragging:{type:Boolean},preventAutoSwitch:{type:Boolean,default:!1},isNearBottom:{type:Boolean,default:!1},reportPageName:{},showActionBar:{type:Boolean,default:!0}},{outputText:{required:!1,default:""},outputTextModifiers:{},resultAreaHeight:{required:!1,default:107},resultAreaHeightModifiers:{}}),emits:bn(["replace","switchService","openModelSelect","resultStatusChanged","targetLanguageChange"],["update:outputText","update:resultAreaHeight"]),setup(t,{expose:e,emit:n}){const{explainText:r,explainDone:a,explainError:s,explainErrorCode:o,improveWriteText:u,improveWriteDone:l,improveWriteError:c,improveWriteErrorCode:h,getCurrentRequestId:v,setCurrentRequestId:E}=wr(),{t:w}=gt(),{userSettings:L}=et(),{getTranslateResultCache:R,setTranslateResultCache:B,deleteTranslateResultCache:m}=Ho(),{userInfo:A}=_t(),d=n,i=t,f=Fn(t,"outputText"),g={showRewriteExceedLimitTip:D(!1),updateShowRewriteExceedLimitTip:()=>{},moreToolsRedHotShow:D(!1),updateMoreToolsRedHotShow:()=>{},getReportClickItemName:(ne,_e,Xe)=>ne},{updateShowRewriteExceedLimitTip:P,getReportClickItemName:W}=ho("translateWindowState",g),$=Fn(t,"resultAreaHeight"),ve=D(),Z=D(),fe=D();let N=!1;const x=D(!1),F=D(""),j=D(!1),Y=D(Fe.SUCCESS),K=D(!1),O=D(!1),J=D(""),X=D(107),Be=oe(()=>we.value||!i.userInfoRefreshed),re=oe(()=>on(i.targetLanguage)?{direction:"rtl",textAlign:"right"}:{direction:"ltr",textAlign:"left"}),V=oe(()=>{const ne=[G.EXPLAIN,G.IMPROVE_WRITE].includes(i.translateType),_e=!Sn(i.service);return ne?_e:i.dependentServiceStatus==="notSupport"}),Q=oe(()=>{switch(i.translateType){case G.EXPLAIN:return r.value;case G.IMPROVE_WRITE:return u.value;case G.TRANSLATE:return F.value;default:return""}}),Ee=oe(()=>{switch(i.translateType){case G.EXPLAIN:return s.value;case G.IMPROVE_WRITE:return c.value;case G.TRANSLATE:return j.value;default:return j.value}}),ee=oe(()=>i.isAnotherResultShow===!1&&i.translateWindowResultType==="up"),be=oe(()=>i.translateType===G.TRANSLATE&&Y.value===Fe.EXTEND_LIMIT),ye=oe(()=>{const ne=w("common.upgradePro");return ne.charAt(0).toLocaleLowerCase()+ne.slice(1)}),De=oe(()=>{switch(i.translateType){case G.EXPLAIN:return o.value===Fe.EXTEND_LIMIT?{code:Fe.EXTEND_LIMIT,i18nKey:"translate.limitFail",type:"limitFail"}:{code:o.value,i18nKey:"common.loadingFailedPlease",type:"fail"};case G.IMPROVE_WRITE:return h.value===Fe.EXTEND_LIMIT?{code:h.value,i18nKey:"translate.limitFail",type:"limitFail"}:{code:h.value,i18nKey:"common.loadingFailedPlease",type:"fail"};case G.TRANSLATE:default:return{code:j.value?Fe.EXTEND_LIMIT:Fe.SUCCESS,i18nKey:Y.value===Fe.EXTEND_LIMIT?"translate.limitTip":"translate.fail",type:Y.value===Fe.EXTEND_LIMIT?"limitFail":"fail"}}}),we=oe(()=>{switch(i.translateType){case G.EXPLAIN:return!a.value;case G.IMPROVE_WRITE:return!l.value;case G.TRANSLATE:return x.value;default:return!0}}),Me=()=>{if(i.dependentServiceStatus==="error"||i.dependentServiceStatus==="notSupport")return;switch(i.translateType){case G.EXPLAIN:case G.IMPROVE_WRITE:Dt(i.translateType);break;case G.TRANSLATE:Ne();break}const ne=W("retry",i.translateWindowResultType,i.translateType);I.reportClickEvent(i.reportPageName,ne)};let xe=0;async function Ne(){if(!i.userInfoRefreshed)return;x.value=!0,F.value="",j.value=!1;let ne=i.sourceText;i.sourceText.length>Rr&&(ne=ne.substring(0,Rr));const _e=i.targetLanguage,Xe=L.value.translationService,ft=R({text:ne,service:Xe,targetLanguage:_e,translateType:i.translateType});if(ft){x.value=!1,F.value=ft,j.value=!1,Y.value=Fe.SUCCESS;return}let rt="";try{rt=await at(Ie.DETECT_TEXT_LANGUAGE,i.sourceText)}catch{rt=he.defaultSourceLanguage}const ce=++xe,p=await nr({texts:[{text:ne}],from:rt,to:_e,service:Xe,type:G.SELECT_TEXT},lt(G.TRANSLATE));if(!N&&i.translateType===G.TRANSLATE)if(p.code===0){const _=p.data&&p.data[0].text||"";ce===xe&&(x.value=!1,F.value=_),B({text:ne,service:Xe,targetLanguage:_e,translateType:i.translateType},_)}else{if(ce!==xe)return;if(Y.value=p.code,p.code,Fe.EXTEND_LIMIT,p.code===Fe.NOT_LOGIN){const _=encodeURIComponent(`${he.pluginDescPage}?from=extensionLogin`);$e(`${he.loginUrl}?feature=plugin_select_to_translate&cb=${_}`)}p.code===Fe.PRIVILEGE_INSUFFICIENT&&$e(`${he.priceUrl}?source=plugin_select_to_translate`),x.value=!1,j.value=!0}}const Ke=()=>{let ne;return i.translateType===G.TRANSLATE?ne="ai_model_free_trial_limit":i.translateType===G.IMPROVE_WRITE?ne="plugin_rewrite_ai_model_free_trial_limit":i.translateType===G.EXPLAIN?ne="plugin_explain_ai_model_free_trial_limit":ne="ai_model_free_trial_limit",ne},Qe=()=>{const ne=Ke();$e(`${he.priceUrl}?source=plugin_select_to_translate&position=${ne}`),I.fireEvent("premium_promotion_popup",{action:"click",page_name:i.reportPageName,item:ne})},He=()=>Q.value,vt=()=>{d("replace",He())},Et=()=>{Eo(He())};async function Oe(ne){if(V.value){const ft=!!A.value,rt=ne===G.EXPLAIN?a.value:l.value;if(i.translateWindowResultType==="bottom"&&ft&&!rt){if(i.preventAutoSwitch)return;const ce=L.value.services.find(p=>p.isAIService&&!p.isVipService);ce&&d("switchService",ce);return}if(i.translateWindowResultType==="up"&&ft&&!rt){const ce=L.value.services.find(p=>p.isAIService&&!p.isVipService);ce&&d("switchService",ce);return}}const _e=R({text:i.sourceText,service:i.service,targetLanguage:i.targetLanguage,translateType:ne});if(_e){ne===G.EXPLAIN?(r.value=_e,a.value=!0,s.value=!1,o.value=Fe.SUCCESS):(u.value=_e,l.value=!0,c.value=!1,h.value=Fe.SUCCESS);return}if(ne===G.EXPLAIN?(s.value=!1,a.value=!1,r.value=""):(c.value=!1,l.value=!1,u.value=""),V.value)return;E(ne);const Xe=i.sourceText.substring(0,Rr);Fo({translateType:ne,input:Xe,engineCode:vo(i.service),targetLanguage:i.targetLanguage,component:mo[G.SELECT_TEXT],requestId:v(ne)},lt(ne))}function lt(ne){let _e;switch(ne){case G.IMPROVE_WRITE:i.translateReplaceType===nt.OPEN_MODAL?_e={position:"plugin_textbox_translate_improve_writing",feature:"plugin_textbox_improve_writing"}:_e={position:"plugin_select_to_translate_improve_writing",feature:"plugin_select_to_improve_writing"};break;case G.EXPLAIN:_e={position:"plugin_select_to_translate_explain",feature:"plugin_select_to_translate_explain"};break;case G.TRANSLATE:default:i.translateReplaceType===nt.OPEN_MODAL?_e={position:"plugin_textbox_translate",feature:"plugin_textbox_translate"}:_e={position:"plugin_select_to_translate",feature:"plugin_select_to_translate"};break}return _e}function Dt(ne){J.value=u.value,m({text:i.sourceText,service:i.service,targetLanguage:i.targetLanguage,translateType:i.translateType}),Oe(ne)}function Le(){O.value=!O.value,P(!1),I.reportClickEvent(i.reportPageName,O.value?"expand":"fold")}function Ce(){d("openModelSelect");const ne=W("switch_to_ai_model",i.translateWindowResultType,i.translateType);I.reportClickEvent(i.reportPageName,ne)}function Ge(ne,_e,Xe,ft,rt,ce,p,_,C,U,S,M){if(i.translateWindowResultType==="bottom"){const le=ne&&ne!==_e,pt=Xe!==ft,tt=p!==_,Ye=S!==M;return!!(le||pt&&i.sourceText&&Xe&&Xe!==G.NONE||i.translateType===G.TRANSLATE&&tt&&i.sourceText||Ye&&M==="loading"&&S==="done"&&i.sourceText)}return Xe!==ft||rt!==ce||p!==_||C!==U||S!==M}Te(()=>i.translateType,()=>{i.collapseBottom&&(O.value=!1)}),Te([a,l],()=>{i.dependentServiceStatus==="done"&&(a.value&&i.translateType===G.EXPLAIN&&B({text:i.sourceText,service:i.service,targetLanguage:i.targetLanguage,translateType:G.EXPLAIN},r.value),l.value&&i.translateType===G.IMPROVE_WRITE&&B({text:i.sourceText,service:i.service,targetLanguage:i.targetLanguage,translateType:G.IMPROVE_WRITE},u.value))}),Te(Q,ne=>{f.value=ne}),Te([we,V,Ee,()=>i.translateType],()=>{if(V.value){d("resultStatusChanged","notSupport");return}if(Ee.value){const ne=De.value.code;d("resultStatusChanged","error",ne);return}if(we.value){d("resultStatusChanged","loading");return}d("resultStatusChanged","done")}),Te([()=>i.sourceText,()=>i.translateType,()=>i.service,()=>i.targetLanguage,()=>i.userInfoRefreshed,()=>i.dependentServiceStatus],async([ne,_e,Xe,ft,rt,ce],[p,_,C,U,S,M])=>{if(!(_e===_&&Xe===C&&ft!==U&&rt===S&&ce===M&&ne===p&&_e===G.IMPROVE_WRITE||(i.dependentServiceStatus!=="done"&&(i.dependentServiceStatus==="error"?(i.translateType===G.EXPLAIN&&(s.value=!0,a.value=!0,o.value=i.dependentServiceErrorCode),i.translateType===G.IMPROVE_WRITE&&(c.value=!0,l.value=!0,h.value=i.dependentServiceErrorCode),i.translateType===G.TRANSLATE&&(j.value=!0,x.value=!1,Y.value=i.dependentServiceErrorCode)):i.dependentServiceStatus==="loading"?(i.translateType===G.EXPLAIN&&(s.value=!1,a.value=!1),i.translateType===G.IMPROVE_WRITE&&(c.value=!1,l.value=!1),i.translateType===G.TRANSLATE&&(j.value=!1,x.value=!0)):i.dependentServiceStatus),!Ge(ne,p,_e,_,Xe,C,ft,U,rt,S,ce,M)))&&i.userInfoRefreshed&&i.dependentServiceStatus==="done")switch(i.translateType){case G.EXPLAIN:case G.IMPROVE_WRITE:Oe(i.translateType);break;case G.TRANSLATE:Ne();break}},{immediate:!0});const At=()=>{!Be.value&&Z.value&&!Ee.value&&Ct(()=>{if(Z.value&&!Be.value){let ne=0;const _e=Z.value.offsetHeight;_e>0&&(ne+=_e),!Ee.value&&(O.value||!i.collapseBottom)&&!we.value&&!V.value?ne+=40:ne+=0,ne>0&&($.value=ne-24)}})};Te(()=>c.value&&h.value===Fe.EXTEND_LIMIT,ne=>{ne&&J.value&&(P(!0),l.value=!0,c.value=!1,h.value=Fe.SUCCESS,u.value=J.value,J.value="")}),Te([()=>De.value,()=>V.value],()=>{if(!V.value&&Ee.value&&De.value.type==="limitFail"){I.reportShowEvent("plugin_select_to_translate_page_get_trial_upgrade",{sub_type:i.translateType});const ne=Ke();I.fireEvent("premium_promotion_popup",{action:"show",page_name:i.reportPageName,item:ne})}}),Te([Be,()=>i.translateWindowResultType,()=>i.isAnotherResultShow,()=>i.showActionBar],()=>{i.translateWindowResultType==="up"&&i.isAnotherResultShow===!1&&!i.showActionBar?X.value=$.value+51:X.value=$.value},{immediate:!0}),Te(Be,ne=>{ne||At()});let ct=null;return Te(Z,ne=>{ct&&(ct.disconnect(),ct=null),ne&&(ct=new ResizeObserver(()=>{Be.value||At()}),ct.observe(ne))},{immediate:!0}),Te([Q,Ee,V,O,()=>i.collapseBottom],()=>{At()},{flush:"post"}),xn(()=>{N=!0,ct&&(ct.disconnect(),ct=null)}),e({resultError:Ee,resultLoading:we,translateTypeNotSupport:V,showMoreThanTwoLines:O,onReImproveWriteClick:Dt,getPureTranslateResult:He}),(ne,_e)=>(k(),se($t,null,[y("div",{ref_key:"containerRef",ref:Z,class:st(["translate-window-result-container",{"translate-error":Ee.value,"fixed-min-height":ee.value}]),style:Ae(Ee.value?{}:re.value)},[V.value?(k(),Se(Kc,{key:0,style:Ae({height:`${Math.max(X.value,50)}px`}),"translate-type":ne.translateType,"report-page-name":ne.reportPageName,"meed-report-sub-type":!0,onSwitchService:Ce},null,8,["style","translate-type","report-page-name"])):we.value||!ne.userInfoRefreshed?(k(),Se(Jc,{key:1,ref_key:"loadingRef",ref:fe,class:"translate-window-result-loading",height:X.value},null,8,["height"])):Ee.value?(k(),se("div",{key:2,class:"translate-window-result-error-container",style:Ae({height:`${Math.max(X.value,100)}px`})},[be.value?(k(),Se(z(gr),{key:0,keypath:De.value.i18nKey,class:"translate-window-result-error",style:{display:"block"},tag:"div"},{default:Ze(()=>[y("span",null,de(ye.value),1)]),_:1},8,["keypath"])):(k(),Se(z(gr),{key:1,keypath:De.value.i18nKey,class:"translate-window-result-error",style:{display:"inline-flex"},tag:"div"},{default:Ze(()=>[De.value.type==="fail"?(k(),se("div",{key:0,class:"translate-result-error-retry",onClick:Me},[ie(ut,{style:{cursor:"pointer"},icon:"retry",size:16}),y("span",null,de(z(w)("common.retry")),1)])):me("",!0)]),_:1},8,["keypath"])),De.value.type==="limitFail"?(k(),se("div",sp,[y("span",{class:"upgrade-now-btn",onClick:Qe},de(z(w)("common.upgradeNow")),1)])):me("",!0)],4)):(k(),se("div",{key:3,ref_key:"textWrapperRef",ref:ve,class:st(["translate-window-result-text-wrapper",{"text-can-be-collapsed":i.collapseBottom}])},[y("div",{class:st(["translate-window-result-text",{"collapsed-in-two-lines":!O.value}])},de(Q.value),3),ne.collapseBottom?(k(),Se(ut,{key:0,class:"collapse-bottom-icon",icon:O.value?"arrow-up":"arrow-down",size:16,onClick:Le},null,8,["icon"])):me("",!0)],2))],6),i.showFooter!==!1?Rt((k(),Se(Vo,{key:0,"translate-window-result-type":ne.translateWindowResultType,"translate-type":ne.translateType,"translate-replace-type":ne.translateReplaceType,"translate-result":Q.value,"enable-show-label":!ne.collapseBottom,"is-weakened-and-narrower":ne.collapseBottom,"is-dragging":ne.isDragging,"target-language-prop":i.targetLanguage,"is-near-bottom":ne.isNearBottom,"report-page-name":ne.reportPageName,onRewrite:_e[0]||(_e[0]=Xe=>Dt(z(G).IMPROVE_WRITE)),onReplace:vt,onTargetLanguageChange:_e[1]||(_e[1]=Xe=>d("targetLanguageChange",Xe)),onCopy:Et},null,8,["translate-window-result-type","translate-type","translate-replace-type","translate-result","enable-show-label","is-weakened-and-narrower","is-dragging","target-language-prop","is-near-bottom","report-page-name"])),[[Lt,!Ee.value&&(O.value||!ne.collapseBottom)&&!we.value&&!V.value&&ne.userInfoRefreshed]]):me("",!0),ie(Yn,{name:"fade-in"},{default:Ze(()=>[K.value?(k(),se("div",op,de(z(w)("explain.disableTip")),1)):me("",!0)]),_:1})],64))}}),Fs=ze(ip,[["__scopeId","data-v-1b80577c"]]),up={class:"translate-window-up-bottom-result-wrapper"},lp={class:"translate-window-bottom-result-wrapper"},cp=qe({__name:"TranslateWindowTwoResults",props:bn({upTranslateType:{},bottomTranslateType:{},sourceText:{},service:{},targetLanguage:{},isUpResultCollapsed:{type:Boolean},translateReplaceType:{},userInfoRefreshed:{type:Boolean},isDragging:{type:Boolean},reportPageName:{}},{upOutputText:{required:!1,default:""},upOutputTextModifiers:{},showActionBar:{type:Boolean,required:!1,default:!1},showActionBarModifiers:{}}),emits:bn(["replace","openModelSelect","switchService","targetLanguageChange"],["update:upOutputText","update:showActionBar"]),setup(t,{emit:e}){const n=e,r=t,a=Fn(t,"upOutputText"),s=D(""),o=D(),u=D(),l=D(),c=D(),h=D("done"),v=D(Fe.SUCCESS),E=D(!1),w=D(!1),L=D(!1),R=D(!1),B=Fn(t,"showActionBar"),m=D(107),A=D(50);let d=null;const i=oe(()=>{if(r.bottomTranslateType===G.NONE)return!1;const N=u.value;if(!N)return!1;const x=N.resultError,F=N.resultLoading,j=N.translateTypeNotSupport;return!x&&!F&&!j}),f=()=>{var N;(N=u.value)==null||N.onReImproveWriteClick(r.bottomTranslateType)},g=()=>{var x;const N=(x=u.value)==null?void 0:x.getPureTranslateResult();N&&n("replace",N)},P=()=>{var x;const N=(x=u.value)==null?void 0:x.getPureTranslateResult();N&&Eo(N)},W=(N,x=Fe.SUCCESS)=>{h.value=N,v.value=x};Te([h,()=>r.upTranslateType,()=>r.bottomTranslateType,()=>r.userInfoRefreshed],()=>{if(!r.userInfoRefreshed)return!1;r.upTranslateType!==G.NONE&&r.bottomTranslateType===G.NONE&&h.value!=="done"?B.value=!1:B.value=!0},{immediate:!0}),Te([()=>r.bottomTranslateType,()=>r.upTranslateType],([N,x],[F])=>{if(!l.value||!o.value)return;const j=l.value.clientHeight;F===G.NONE&&N!==G.NONE&&Ct(()=>{setTimeout(()=>{A.value=j+20-(m.value+24)-24},0)}),F!==G.NONE&&N===G.NONE&&x!==G.NONE&&(m.value=j,A.value=50)});const $=()=>{!c.value||!l.value||(d=new IntersectionObserver(N=>{N.forEach(x=>{L.value=x.isIntersecting})},{root:l.value,rootMargin:"20px 0px 0px 0px",threshold:0}),d.observe(c.value))},ve=()=>{d&&(d.disconnect(),d=null)};let Z=null;return Te(()=>r.service,N=>{if(Z===null){Z=N;return}if(r.bottomTranslateType===G.NONE){Z=N;return}Sn(Z)&&!Sn(N)&&(E.value=!0),Z=N},{immediate:!0}),Te(()=>r.bottomTranslateType,(N,x)=>{x===G.NONE&&(N===G.EXPLAIN||N===G.IMPROVE_WRITE)&&(E.value=!1)}),Te([()=>r.upTranslateType,()=>r.bottomTranslateType,()=>r.targetLanguage,()=>r.service],()=>{R.value=!1}),kt(async()=>{await We(ge.TRANSLATE_WINDOW_RESULT_MORE_TOOLS_CLICK)||(w.value=!0),$()}),Ya(()=>{ve()}),Wi("translateWindowState",{showRewriteExceedLimitTip:R,updateShowRewriteExceedLimitTip:N=>{R.value=N},moreToolsRedHotShow:w,updateMoreToolsRedHotShow:N=>{w.value=N},getReportClickItemName:(N,x,F)=>x==="up"?N:F===G.EXPLAIN?`explain_tab_${N}`:F===G.IMPROVE_WRITE?`improve_writing_tab_${N}`:F===G.TRANSLATE?`translate_tab_${N}`:N}),(N,x)=>(k(),se("div",up,[y("div",{class:"translate-window-up-bottom-result-scroll-content",ref_key:"scrollContainerRef",ref:l},[ie(Fs,{ref_key:"translateWindowResultRef",ref:o,"translate-type":N.upTranslateType,"translate-window-result-type":"up","dependent-service-status":"done","source-text":N.sourceText,"output-text":a.value,"onUpdate:outputText":x[0]||(x[0]=F=>a.value=F),service:N.service,"target-language":N.targetLanguage,"collapse-bottom":N.isUpResultCollapsed,"translate-replace-type":N.translateReplaceType,"user-info-refreshed":N.userInfoRefreshed,"is-dragging":N.isDragging,"is-near-bottom":L.value,"is-another-result-show":N.bottomTranslateType!==z(G).NONE,"report-page-name":N.reportPageName,"show-action-bar":B.value,"result-area-height":m.value,"onUpdate:resultAreaHeight":x[1]||(x[1]=F=>m.value=F),onReplace:x[2]||(x[2]=F=>n("replace",F)),onOpenModelSelect:x[3]||(x[3]=F=>n("openModelSelect")),onResultStatusChanged:W,onSwitchService:x[4]||(x[4]=F=>n("switchService",F))},null,8,["translate-type","source-text","output-text","service","target-language","collapse-bottom","translate-replace-type","user-info-refreshed","is-dragging","is-near-bottom","is-another-result-show","report-page-name","show-action-bar","result-area-height"]),Rt(y("div",lp,[ie(Fs,{ref_key:"translateWindowExplainRef",ref:u,"translate-type":N.bottomTranslateType,"translate-window-result-type":"bottom","dependent-service-status":h.value,"dependent-service-error-code":v.value,"source-text":a.value,"result-area-height":A.value,"onUpdate:resultAreaHeight":x[5]||(x[5]=F=>A.value=F),"output-text":s.value,"onUpdate:outputText":x[6]||(x[6]=F=>s.value=F),service:N.service,"target-language":N.targetLanguage,"translate-replace-type":N.translateReplaceType,"user-info-refreshed":N.userInfoRefreshed,"show-footer":!1,"is-dragging":N.isDragging,"prevent-auto-switch":E.value,"is-another-result-show":N.upTranslateType!==z(G).NONE,"report-page-name":N.reportPageName,onTargetLanguageChange:x[7]||(x[7]=F=>n("targetLanguageChange",F)),onReplace:x[8]||(x[8]=F=>n("replace",F)),onOpenModelSelect:x[9]||(x[9]=F=>n("openModelSelect")),onSwitchService:x[10]||(x[10]=F=>n("switchService",F))},null,8,["translate-type","dependent-service-status","dependent-service-error-code","source-text","result-area-height","output-text","service","target-language","translate-replace-type","user-info-refreshed","is-dragging","prevent-auto-switch","is-another-result-show","report-page-name"])],512),[[Lt,N.bottomTranslateType!==z(G).NONE]]),y("div",{ref_key:"bottomSentinelRef",ref:c,class:"bottom-sentinel"},null,512)],512),Rt(ie(Vo,{"translate-window-result-type":"bottom","translate-type":N.bottomTranslateType,"translate-replace-type":N.translateReplaceType,"translate-result":s.value,"enable-show-label":!0,"is-weakened-and-narrower":!1,"is-dragging":N.isDragging,"is-near-bottom":L.value,"target-language-prop":N.targetLanguage,"show-language-select":N.bottomTranslateType===z(G).TRANSLATE,"report-page-name":N.reportPageName,onRewrite:f,onReplace:g,onCopy:P,onTargetLanguageChange:x[11]||(x[11]=F=>n("targetLanguageChange",F))},null,8,["translate-type","translate-replace-type","translate-result","is-dragging","is-near-bottom","target-language-prop","show-language-select","report-page-name"]),[[Lt,i.value]])]))}}),pp=ze(cp,[["__scopeId","data-v-b30cd8d1"]]),Ot=8;function dp(t){const{locale:e}=gt(),{initialX:n,initialY:r,containerRef:a,dragZoneRef:s,headerWrapperRef:o,onDragStart:u,onDragEnd:l}=t,{width:c,height:h}=io(),{width:v,height:E}=$i(a),w=D({x:n,y:r}),L=D(!1),R=D(null),B=D(0),m=oe(()=>on(e.value)),A=$=>{$.preventDefault(),L.value=!0,u==null||u();const ve=$.clientX-w.value.x,Z=$.clientY-w.value.y,fe=x=>{var Y;if(!L.value)return;let F=x.clientX-ve,j=x.clientY-Z;if(a.value){const K=a.value,{innerWidth:O,innerHeight:J}=window,X=K.getBoundingClientRect();if(m.value){const V=((Y=s==null?void 0:s.value)==null?void 0:Y.clientWidth)||0,Q=Ot+V,Ee=O-X.width-Ot+V;F=Math.max(Q,Math.min(Ee,F))}else{const V=Ot,Q=O-X.width-Ot;F=Math.max(V,Math.min(Q,F))}const Be=Ot,re=J-X.height-Ot;j=Math.max(Be,Math.min(re,j))}w.value.x=F,w.value.y=j},N=()=>{var x;if(L.value=!1,a.value){const{innerHeight:F}=window,j=a.value.getBoundingClientRect(),Y=w.value.y,K=F-j.height-Ot,O=Y>=K-1;R.value={x:w.value.x,top:Y,topBeforeBottomed:O&&((x=R.value)==null?void 0:x.topBeforeBottomed)||null,wasManuallyDragged:!0}}l==null||l(),document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",fe),document.addEventListener("mouseup",N)},d=()=>{s!=null&&s.value&&s.value.addEventListener("mousedown",A),o!=null&&o.value&&o.value.addEventListener("mousedown",A)},i=oe(()=>{if(m.value&&a.value&&(s!=null&&s.value)){const $=s.value.clientWidth;return w.value.x-$}return w.value.x}),f=oe(()=>w.value.y),g=()=>{var K;if(!a.value)return;const $=a.value,{innerWidth:ve,innerHeight:Z}=window,fe=$.getBoundingClientRect(),N=fe.height,x=!R.value;x&&(R.value={x:w.value.x,top:w.value.y,topBeforeBottomed:null,wasManuallyDragged:!1},B.value=N);const F=!x&&B.value!==N,j=!x&&N>B.value,Y=!x&&N<B.value;if(x||!F){const O=Ot,J=Z-N-Ot;w.value.y=Math.max(O,Math.min(J,w.value.y))}else if(j&&R.value){const O=w.value.y,J=Z-N-Ot;if(O+N>Z-Ot){const X=O;w.value.y=J,R.value.topBeforeBottomed===null&&(R.value.topBeforeBottomed=X)}}else if(Y&&R.value){const O=R.value;if(O.topBeforeBottomed!==null){const J=O.topBeforeBottomed,X=Ot,Be=Z-N-Ot;w.value.y=Math.max(X,Math.min(Be,J)),Math.abs(w.value.y-J)<1&&(O.topBeforeBottomed=null)}}if(R.value&&(R.value.top=w.value.y),m.value){const O=((K=s==null?void 0:s.value)==null?void 0:K.clientWidth)||0,J=Ot+O,X=ve-fe.width-Ot+O;w.value.x=Math.max(J,Math.min(X,w.value.x))}else{const O=Ot,J=ve-fe.width-Ot;w.value.x=Math.max(O,Math.min(J,w.value.x))}B.value=N},P=()=>{var $;if(a.value){const ve=a.value.getBoundingClientRect();R.value={x:w.value.x,top:w.value.y,topBeforeBottomed:null,wasManuallyDragged:(($=R.value)==null?void 0:$.wasManuallyDragged)||!1},B.value=ve.height}};return Te([c,h,v,E],()=>Ct(()=>g())),{isDragging:L,dragState:w,windowX:i,windowY:f,setupDragListeners:d,initDragListeners:()=>{Ct(()=>{d()})},calculatePosition:g,resetIntentPosition:P,handleDragStart:A}}const gp={class:"translate-window-content-zone"},fp=qe({__name:"TranslateWindow",props:bn({sourceText:{},top:{},left:{},showLeftDragZone:{type:Boolean},translateReplaceType:{}},{upTranslateType:{required:!1,default:G.TRANSLATE},upTranslateTypeModifiers:{}}),emits:bn(["close","alwayCloseConfirm","replace"],["update:upTranslateType"]),setup(t,{emit:e}){const{contentScriptRefreshUserInfo:n}=_t(),r=e,{userSettings:a,notifyUserSettings:s}=et(),{setNoLoginTranslateUseCount:o,showLoginTipGuid:u,selectTextLoginTipShow:l}=Tr(),{checkBoundary:c}=uo({margin:2}),{clearTranslateResultCachedMap:h}=Ho(),{resetExplainImproveWrite:v}=wr(),E=D(),w=D(),L=D(),R=D(),B=D(a.value.translationService),m=Ve("loginTipRef"),A=D({position:"absolute",top:"calc(100% + 8px)"}),d=D(!1),i=D(!1),f=D(""),g=D("plugin_select_to_translate_page||translate"),P=D(!1),W=t,$=D(),ve=D(W.translateReplaceType===nt.OPEN_MODAL?a.value.textboxTranslation.targetLanguage:a.value.targetLanguage),Z=Fn(t,"upTranslateType"),fe=D(G.NONE),{windowX:N,windowY:x,isDragging:F,initDragListeners:j}=dp({initialX:W.left,initialY:W.top,containerRef:$,dragZoneRef:L,headerWrapperRef:R});Te(l,V=>{V?Ct(()=>{m.value&&c(m.value.$el,Q=>{Q&&(A.value.bottom="calc(100% + 8px)",A.value.top="")})}):(A.value.bottom="",A.value.top="calc(100% + 8px)")}),nn($,()=>{var V;(V=E.value)!=null&&V.secondConfirmShow||r("close")});const Y=V=>{if(ve.value=V,W.translateReplaceType===nt.OPEN_MODAL){const Q=a.value.textboxTranslation;Q.targetLanguage=V,s({textboxTranslation:Q})}else s({targetLanguage:V})},K=V=>{B.value=V},O=V=>{V!==G.NONE&&V===Z.value||(Z.value=V,i.value=!1,fe.value=G.NONE,v())};Te(fe,(V,Q)=>{switch(V){case G.EXPLAIN:case G.IMPROVE_WRITE:case G.TRANSLATE:i.value=!0;break;case G.NONE:i.value=!1,G.NONE;break}}),Te([Z,fe],()=>{let V="",Q="",Ee="";switch(W.translateReplaceType){case nt.OPEN_MODAL:V="plugin_textbox_page";break;default:V="plugin_select_to_translate_page";break}switch(Z.value){case G.TRANSLATE:Q="||translate";break;case G.IMPROVE_WRITE:Q="||improve_writing";break}switch(fe.value){case G.NONE:Ee="";break;case G.EXPLAIN:Ee="||explain_tab";break;case G.IMPROVE_WRITE:Ee="||improve_writing_tab";break;case G.TRANSLATE:Ee="||translate_tab";break}const ee=`${V}${Q}${Ee}`;I.reportShowEvent(ee),g.value=`${V}${Q}`},{immediate:!0});const J=V=>{var Q;(Q=E.value)==null||Q.toggleService(V)},X=()=>{var V;(V=E.value)==null||V.openModelSelect()},Be=V=>{r("replace",V)},re=()=>{r("close")};return kt(async()=>{var V;v(),j(),await o(),u(jn.SELECT_TEXT),await n(),(V=E.value)==null||V.userInfoRefresh(),await Ct(),d.value=!0}),Ya(()=>{l.value=!1,h(),v()}),(V,Q)=>(k(),se("div",{class:"translate-window-container",style:Ae({top:`${z(x)}px`,left:`${z(N)}px`}),ref_key:"containerRef",ref:$},[V.showLeftDragZone?(k(),se("div",{key:0,class:"translate-window-drag-zone",onMousedown:Q[0]||(Q[0]=mn(()=>{},["prevent"])),ref_key:"dragZoneRef",ref:L},[ie(ut,{style:{width:"12px"},icon:"drag",size:20})],544)):me("",!0),y("div",gp,[y("div",{class:"translate-window-header-wrapper",style:Ae({cursor:z(F)?"grabbing":"grab"}),onMousedown:Q[2]||(Q[2]=mn(()=>{},["prevent"])),ref_key:"headerWrapperRef",ref:R},[ie(Wc,{ref_key:"translateWindowHeaderRef",ref:E,"translate-type":Z.value,"show-target-language-input":Z.value===z(G).TRANSLATE,"target-language-prop":ve.value,"source-text":V.sourceText,"user-info-refreshed":d.value,"report-page-name":g.value,"translate-replace-type":V.translateReplaceType,onClose:re,onAlwayCloseConfirm:Q[1]||(Q[1]=Ee=>r("alwayCloseConfirm",Ee)),onTargetLanguageChange:Y,onServiceChange:K,onFunctionChange:O},null,8,["translate-type","show-target-language-input","target-language-prop","source-text","user-info-refreshed","report-page-name","translate-replace-type"])],36),ie(pp,{ref_key:"upBottomResultRef",ref:w,"up-translate-type":Z.value,"bottom-translate-type":fe.value,"source-text":V.sourceText,service:B.value,"target-language":ve.value,"is-up-result-collapsed":i.value,"translate-replace-type":V.translateReplaceType,"user-info-refreshed":d.value,"is-dragging":z(F),"up-output-text":f.value,"onUpdate:upOutputText":Q[3]||(Q[3]=Ee=>f.value=Ee),"show-action-bar":P.value,"onUpdate:showActionBar":Q[4]||(Q[4]=Ee=>P.value=Ee),"report-page-name":g.value,onReplace:Be,onOpenModelSelect:X,onSwitchService:J,onTargetLanguageChange:Y},null,8,["up-translate-type","bottom-translate-type","source-text","service","target-language","is-up-result-collapsed","translate-replace-type","user-info-refreshed","is-dragging","up-output-text","show-action-bar","report-page-name"]),Rt(ie(Lc,{"translate-type":fe.value,"onUpdate:translateType":Q[5]||(Q[5]=Ee=>fe.value=Ee),"show-explain":!0,"show-improve-write":Z.value!==z(G).IMPROVE_WRITE,"show-translate":Z.value!==z(G).TRANSLATE,"report-page-name":g.value},null,8,["translate-type","show-improve-write","show-translate","report-page-name"]),[[Lt,P.value]])]),z(l)?(k(),Se(ea,{key:1,source:"plugin_select_to_translate_login_guide_page",ref_key:"loginTipRef",ref:m,onClose:Q[6]||(Q[6]=Ee=>l.value=!1),style:Ae(A.value)},null,8,["style"])):me("",!0)],4))}}),Wo=ze(fp,[["__scopeId","data-v-b2b705f8"]]),hp={class:"input-translate-ball-tips-content"},mp={class:"input-translate-ball-tips-icon-wrapper"},vp=["src"],Ps=80,Ep=qe({__name:"InputTranslateBall",emits:["close"],setup(t,{emit:e}){const{improveWriteDone:n,improveWriteText:r,improveWriteError:a,improveWriteErrorCode:s,getCurrentRequestId:o,setCurrentRequestId:u}=wr(),{userInfo:l,contentScriptRefreshUserInfo:c}=_t(),{userSettings:h,notifyUserSettings:v}=et(),{onlineParams:E}=an(),{setNoLoginTranslateUseCount:w,textBoxLoginTipShow:L,showLoginTipGuid:R,checkLoginTipShow:B}=Tr(),{t:m}=gt(),{setPluginUseTime:A}=Jn(),d=e;let i=null,f=[],g=null,P=null,W=!1,$=!1,ve=!1,Z="",fe="",N=null,x=!1,F="",j=!1,Y=null,K=-1,O=-1;const J=Ve("containerRef"),X=Ve("ballContentContainer"),Be=Ve("popupContainerRef"),re=Ve("secondConfirmRef"),V=Ve("inputTranslateSettingRef"),Q=Ve("loginTipRef"),Ee=Ve("tipRef"),ee=Ve("exceedLimitTipRef"),be=Ve("translateIconRef"),ye=Ve("improveWritingButtonRef"),De=Ve("smallIconRef"),we=D(!1),Me=D(),xe=D(!1),Ne=D(!1),Ke=D(!1),Qe=D(""),He=D(!1),vt=D(vn.CHATGPT),Et=D("pure_text"),Oe=D({}),lt=D(!1),Dt=oe(()=>[{value:"1",label:m("hoverBall.closeOneTime")},{value:"2",label:m("hoverBall.disableOnePage")},{value:"3",label:m("hoverBall.disable")}]),Le=D(!1),Ce=D(!1),Ge=D(!1),At=D(G.TRANSLATE),ct=D(0),ne=D(!1),_e=D(!1),Xe=D({}),ft=D(G.IMPROVE_WRITE),rt=D(""),ce=oe(()=>ne.value||lt.value||L.value||_e.value),p=D(nt.OPEN_MODAL),_=D(0),C=D(0),U=D("horizontal"),S=oe(()=>{var q;return xe.value||Ne.value?!1:!!(Ce.value||(q=E.value)!=null&&q.smallTextboxShowTranslate&&ct.value<Ps)}),M=oe(()=>{const q=h.value.textboxTranslation.targetLanguage,ae=rn(q);return ae?m(`language.${ae.value}`)||ae.label:m("language.en")}),te=oe(()=>{let q=vt.value;if(!Sn(q)){const Pe=h.value.services.find(pe=>pe.isAIService&&!pe.isVipService);q=(Pe==null?void 0:Pe.value)||vn.CHATGPT}return ja.find(Pe=>Pe.value===q)}),ue=oe(()=>U.value==="vertical"?{right:"0px",direction:"ltr"}:Le.value?{left:"0px",direction:"ltr"}:{right:"0px",direction:"rtl"}),T=D({bottom:"40px",transform:"translateX(50%)"}),b=D(0),H=()=>{!Ge.value||!J.value||!X.value||Ct(()=>{var _n;if(!ee.value)return;const q=((_n=ee.value)==null?void 0:_n.$el)||ee.value;if(!q||!J.value||!X.value)return;const ae=J.value.getBoundingClientRect(),Pe=X.value.getBoundingClientRect(),pe=q.getBoundingClientRect(),Re=10,ot=window.innerWidth,St=window.innerHeight,je=300,mt=40,jt=ae.bottom,un=jt-pe.height-mt,bt=jt-mt;let Tt=mt;if(un<Re){const Xt=Re-un;Tt=mt-Xt}else if(bt>St-Re){const Xt=bt-(St-Re);Tt=mt+Xt}const Wt=Pe.left+Pe.width/2,sn={};if(Le.value){const Xt=Wt,ir=Xt-je/2,yr=Xt+je/2;let Zt=Xt-ae.left;ir<Re?Zt=Re+je/2-ae.left:yr>ot-Re&&(Zt=ot-Re-je/2-ae.left),sn.left=`${Zt}px`}else{const Xt=Wt,ir=Xt-je/2,yr=Xt+je/2,Zt=ae.right;let In=Zt-Xt;yr>ot-Re?In=Zt-(ot-Re-je/2):ir<Re&&(In=Zt-(Re+je/2)),sn.right=`${In}px`}T.value={bottom:`${Tt}px`,transform:"translateX(50%)",...sn},Ct(()=>{le()})})},le=()=>{if(!Ge.value||!J.value||!X.value){b.value=0;return}Ct(()=>{var je,Ht;if(S.value&&De.value){const mt=De.value,jt=((je=ee.value)==null?void 0:je.$el)||ee.value;if(!jt){b.value=0;return}const un=mt.getBoundingClientRect(),bt=jt.getBoundingClientRect(),Tt=un.left+un.width/2,Wt=bt.left,sn=Tt-Wt;b.value=sn;return}let q=null;if(At.value===G.TRANSLATE)be.value&&(q=be.value);else if(At.value===G.IMPROVE_WRITE&&ye.value){const mt=Array.isArray(ye.value)?ye.value[0]:ye.value;q=(mt==null?void 0:mt.$el)||mt}if(!q||!ee.value){b.value=0;return}const ae=((Ht=ee.value)==null?void 0:Ht.$el)||ee.value;if(!ae){b.value=0;return}const Pe=q.getBoundingClientRect(),pe=ae.getBoundingClientRect(),Re=Pe.left+Pe.width/2,ot=pe.left,St=Re-ot;b.value=St})};Te(Ge,q=>{q&&H()}),Te([At,Le,S],()=>{Ge.value&&H()});const pt=()=>{Ge.value&&H()};window.addEventListener("resize",pt),Te([we,Me],()=>{Ge.value&&H()}),Te(ce,q=>{q&&Ct(()=>{const ae={};let Pe=0,pe=0;if(!J.value||!X.value)return;re.value&&(Pe=re.value.$el.getBoundingClientRect().height,pe=re.value.$el.getBoundingClientRect().width),V.value&&(Pe=V.value.$el.getBoundingClientRect().height,pe=V.value.$el.getBoundingClientRect().width),Q.value&&(Pe=Q.value.$el.getBoundingClientRect().height,pe=Q.value.$el.getBoundingClientRect().width);const Re=J.value.getBoundingClientRect(),{bottom:ot,right:St,left:je,top:Ht}=Re,mt=40,jt=6,un=8,bt=10,Tt=X.value.getBoundingClientRect(),Wt=window.innerWidth,sn=window.innerHeight,_n=Tt.right-Wt>0?Tt.right-Wt:0,Xt=Tt.left<0?-Tt.left:0;if(Xe.value={},U.value==="vertical"){const ir=Re.right-Tt.right;ae.right=`${ir+Tt.width+un}px`;const Zt=Tt.top-Re.top+(Tt.height-Pe)/2,In=Ht+Zt,ws=In+Pe;if(ws>sn-bt){const la=ws-(sn-bt);ae.top=`${Zt-la}px`}else if(In<bt){const la=bt-In;ae.top=`${Zt+la}px`}else ae.top=`${Zt}px`}else ot+jt+Pe>sn?ae.bottom=`${mt}px`:ae.top=`calc(100% + ${jt}px)`,Le.value?ae.left=je+pe>Wt?`${Wt-je-pe-bt}px`:`${Xt+bt}px`:ae.right=St<pe?`${St-pe-bt}px`:`${_n+bt}px`;Xe.value=ae})}),Te(L,q=>{q&&(Ne.value=!0)}),Te(we,q=>{q===!0&&I.reportShowEvent("plugin_textbox_translate_entry",{position:wn()})});let tt=null;Te(Ne,q=>{clearTimeout(tt),q===!0&&(tt=setTimeout(()=>{I.reportShowEvent("plugin_textbox_translate_page",{position:wn()})},500))});const Ye=()=>{lt.value=!1,ne.value=!1,L.value=!1},Jt=()=>{W=!1};nn(X,()=>{!xe.value&&!$&&(W=!0)},{ignore:[Be]});const xt=lo(()=>{var ot;if(!i)return;let{left:q,top:ae,width:Pe,height:pe}=i.getBoundingClientRect();const Re=f[0];if(Re){const{width:St,height:je}=Re.getBoundingClientRect();(Pe>St||pe>je)&&({top:ae,left:q,width:Pe,height:pe}=Tu(Re,i))}if(ae+pe<0||ae>window.innerHeight){we.value=!1;return}((ot=E.value)!=null&&ot.smallTextboxShowTranslate||we.value===!1&&i.clientHeight>=Ps)&&(we.value=!0),ct.value=pe,Me.value={left:`${q}px`,top:`${ae}px`,width:`${Pe}px`,height:`${pe}px`,backgroundColor:"transparent"}},50,!0),Je=za(()=>{if(!(!X.value||!we.value||ce.value||xe.value)){if(i!=null&&i.isContentEditable){const q=X.value.getBoundingClientRect(),ae=vu(i);for(const Pe of ae){const pe=Eu(Pe);if(pe&&pe.left<q.right&&pe.right>q.left&&pe.top<q.bottom&&pe.bottom>q.top){Ce.value=!0;return}}Ce.value=!1}if((i==null?void 0:i.tagName)==="TEXTAREA"){const{lineRects:q}=mu(i),ae=X.value.getBoundingClientRect(),Pe=10;for(const pe of q)if(pe.left<ae.right+Pe&&pe.right>ae.left-Pe&&pe.top<ae.bottom&&pe.bottom>ae.top){Ce.value=!0;return}Ce.value=!1}return!1}},100),Vt=q=>{q.key==="Backspace"&&Je(),(q.ctrlKey||q.metaKey)&&(q.key==="z"||q.key==="y")&&Je()},ht=()=>!Xi.includes(location.hostname),Ut=q=>{q&&(It(i),clearTimeout(P),P=null,i=q,Ce.value=!1,Ne.value=!1,Ke.value=!1,W=!0,Ye(),Le.value=hu(q),f=bu(q),xt(),Je(),q.addEventListener("input",Je),q.addEventListener("paste",Je),q.addEventListener("cut",Je),q.addEventListener("keydown",Vt),ht()&&(q.addEventListener("input",gn),q.addEventListener("keydown",gn),q.addEventListener("paste",gn),q.addEventListener("cut",gn)),q.addEventListener("scroll",Je),g=new ResizeObserver(()=>{xt(),Je()}),g.observe(q),f.forEach(ae=>{ae.addEventListener("scroll",xt)}),window.addEventListener("scroll",xt),window.addEventListener("resize",xt),q.addEventListener("blur",rr))},It=(q=i)=>{q&&(q.removeEventListener("blur",rr),q.removeEventListener("input",Je),q.removeEventListener("paste",Je),q.removeEventListener("cut",Je),q.removeEventListener("keydown",Vt),q.removeEventListener("scroll",Je),ht()&&(q.removeEventListener("input",gn),q.removeEventListener("keydown",gn),q.removeEventListener("paste",gn),q.removeEventListener("cut",gn)),g==null||g.disconnect(),g=null,f.forEach(ae=>{ae.removeEventListener("scroll",xt)}),window.removeEventListener("scroll",xt),window.removeEventListener("resize",xt),we.value=!1,Me.value={},i=null,f=[],Ge.value=!1)},qt=()=>{i&&i!==document.activeElement&&(ve=!0,i.focus())},rr=()=>{$=!1,!xe.value&&(_e.value||(P=setTimeout(()=>{P=null,W&&!_e.value&&It()},500)))},ia=()=>{Ge.value=!1},_r=()=>{!xe.value&&!ce.value&&(Ne.value=!0)},Ar=()=>{!xe.value&&!ce.value&&(Ne.value=!1)},Ln=()=>{if((i==null?void 0:i.tagName)==="TEXTAREA"){const q=i,{selectionStart:ae,selectionEnd:Pe,value:pe}=q;return ae!==Pe?(x=!1,pe.substring(ae,Pe)):(x=!0,pe)}if(i!=null&&i.isContentEditable){const q=window.getSelection(),ae=(q==null?void 0:q.toString())||"";if(ae&&(q!=null&&q.rangeCount)&&q.rangeCount>0){const Pe=q.getRangeAt(0);if(i.contains(Pe.commonAncestorContainer))return x=!1,ae}return x=!0,i.innerText}return""},Rn=async(q,ae)=>{if(qt(),q.code===0){const pe=q.data&&q.data[0].text||"";da(pe,i,x),ae===G.TRANSLATE&&(fe=pe)}else if(q.code===Fe.EXTEND_LIMIT)At.value=ae,Ge.value=!0;else{if(Ke.value=!0,Qe.value=m("common.loadingFailedPlease",[m("common.retry")]),q.code===Fe.NOT_LOGIN){const pe=encodeURIComponent(`${he.pluginDescPage}?from=extensionLogin`);$e(`${he.loginUrl}?feature=plugin_input_translate_error&cb=${pe}`)}q.code===Fe.PRIVILEGE_INSUFFICIENT&&$e(`${he.priceUrl}?source=plugin_input_translate_error`),setTimeout(()=>{Ke.value=!1,Qe.value=""},2e3)}xe.value=!1,await B()?(i==null||i.blur(),R(jn.TEXTBOX)):(W=!0,clearTimeout(P),P=null),A()},ar=q=>{p.value===nt.REPLACE&&(q.preventDefault(),ua())},sr=()=>{p.value===nt.OPEN_MODAL&&ua()},ua=async()=>{if(xe.value)return;Ge.value=!1,await c();let q=p.value===nt.OPEN_MODAL?F:Ln();if(p.value===nt.OPEN_MODAL&&(x=j),q.trim()===fe.trim()&&(q=Z),fe="",Z="",!q.trim())return;if(I.reportClickEvent("plugin_textbox_translate_page","translate",{position:wn()}),p.value===nt.OPEN_MODAL){ft.value=G.TRANSLATE,await Ct(),_e.value=!0;return}xe.value=!0,Ne.value=!1,He.value=!1,Ye();const ae=h.value.textboxTranslation.targetLanguage,Pe=h.value.translationService;let pe="";try{pe=await at(Ie.DETECT_TEXT_LANGUAGE,q)}catch{pe=he.defaultSourceLanguage}Z=q,await w();const Re=await nr({texts:[{text:q}],from:pe,to:ae,service:Pe,type:G.SELECT_TEXT},{position:"plugin_textbox_translate",feature:"plugin_textbox_translate"});Rn(Re,G.TRANSLATE)},Ai=q=>chrome.runtime.getURL(`public/modelIcons/${q}.png`),gs=(q,ae,Pe)=>{if(_e.value)return;const pe=Ln();if(F=pe,j=x,i!=null&&i.isContentEditable){const ot=window.getSelection();ot&&ot.rangeCount>0?Y=ot.getRangeAt(0).cloneRange():Y=null}else if((i==null?void 0:i.tagName)==="TEXTAREA"){const ot=i;K=ot.selectionStart,O=ot.selectionEnd}pe.trim().length>0?or(q,ae,Pe):or(q,"pure_text",m("common.enterTextToContinue"))},or=(q,ae,Pe)=>{if(!J.value)return;if(xe.value||ce.value||Ke.value){He.value=!1;return}const pe=J.value.getBoundingClientRect(),Re=q.target.getBoundingClientRect(),ot=pe.right-Re.right,St=Re.left-pe.left;Oe.value={},vt.value=Pe,Et.value=ae,He.value=!0,Ct(()=>{if(!Ee.value)return;const je=Ee.value.clientWidth,Ht=Ee.value.clientHeight,mt=10,jt=window.innerWidth,un=window.innerHeight;if(U.value==="vertical"){if(!X.value)return;const bt=X.value.getBoundingClientRect(),Tt=Re.top-pe.top,Wt=Re.top-(Ht-Re.height)/2;if(Wt+Ht>un-mt){const _n=Wt+Ht-(un-mt);Oe.value={top:`${Tt-(Ht-Re.height)/2-_n}px`}}else if(Wt<mt){const _n=mt-Wt;Oe.value={top:`${Tt-(Ht-Re.height)/2+_n}px`}}else Oe.value={top:`${Tt-(Ht-Re.height)/2}px`};const sn=pe.right-bt.right;Oe.value.right=`${sn+bt.width+8}px`,Oe.value.bottom="auto"}else if(Le.value){const bt=Re.left-(je-Re.width)/2;if(bt+je>jt-mt){const Tt=bt+je-(jt-mt);Oe.value={left:`${St-(je-Re.width)/2-Tt}px`}}else if(bt<mt){const Tt=mt-bt;Oe.value={left:`${St-(je-Re.width)/2+Tt}px`}}else Oe.value={left:`${St-(je-Re.width)/2}px`}}else{const bt=Re.right+(je-Re.width)/2;if(bt-je<mt){const Tt=mt-(bt-je);Oe.value={right:`${ot-(je-Re.width)/2-Tt}px`}}else if(bt>jt-mt){const Tt=bt-(jt-mt);Oe.value={right:`${ot-(je-Re.width)/2+Tt}px`}}else Oe.value={right:`${ot-(je-Re.width)/2}px`}}})},Mn=()=>{Ne.value=!1,W=!0,Ye(),qt()},fs=q=>{lt.value=!1,Ne.value=!1,d("close",q)},yi=()=>{if(lt.value){Mn();return}Ye(),He.value=!1,lt.value=!0,I.reportShowEvent("plugin_textbox_retention_page",{position:wn()}),I.reportClickEvent("plugin_textbox_translate_page","close",{position:wn()})},Ci=()=>{if(ne.value){Mn();return}Ye(),He.value=!1,ne.value=!0,I.reportClickEvent("plugin_textbox_translate_page","settings",{position:wn()})},Di=q=>{p.value===nt.REPLACE&&(q.preventDefault(),hs())},Si=()=>{p.value===nt.OPEN_MODAL&&hs()},hs=async()=>{if(xe.value)return;Ge.value=!1,await c();let q=p.value===nt.OPEN_MODAL?F:Ln();if(p.value===nt.OPEN_MODAL&&(x=j),!q.trim())return;if(I.reportClickEvent("plugin_textbox_translate_page","improve_writing",{position:wn()}),q=q.substring(0,Rr),p.value===nt.OPEN_MODAL){ft.value=G.IMPROVE_WRITE,await Ct(),_e.value=!0;return}if(!l.value){const je=encodeURIComponent(`${he.pluginDescPage}?from=extensionLogin`);$e(`${he.loginUrl}?feature=plugin_input_translate_error&cb=${je}`);return}N&&(N&&N(),N=null);let ae=h.value.translationService;if(!Sn(ae)){const je=h.value.services.find(Ht=>Ht.isAIService&&!Ht.isVipService);ae=(je==null?void 0:je.value)||vn.CHATGPT,v({translationService:ae})}xe.value=!0,Ne.value=!1,He.value=!1,Ye();const pe=h.value.textboxTranslation.targetLanguage;u(G.IMPROVE_WRITE),n.value=!1,r.value="",a.value=!1,s.value=void 0;const{resultPromise:Re,abort:ot}=ju({translateType:G.IMPROVE_WRITE,input:q,engineCode:vo(ae),targetLanguage:pe,component:mo[G.SELECT_TEXT],requestId:o(G.IMPROVE_WRITE)},{position:"plugin_textbox_translate_improve_writing",feature:"plugin_textbox_improve_writing"});N=ot;const St=await Re;Rn(St,G.IMPROVE_WRITE)},ms=D(0),vs=oe(()=>!ht()||(ms.value,!i)||document.activeElement!==i?!1:document.queryCommandEnabled("undo")),gn=()=>{ht()&&ms.value++},xi=()=>{if(vs.value&&i){I.reportClickEvent("plugin_textbox_translate_page","undo",{position:wn()}),document.activeElement!==i&&i.focus();try{document.execCommand("undo")}catch{}ht()&&Ct(()=>{gn()}),Ne.value=!0}},Li=()=>{Mn(),p.value===nt.REPLACE&&ua()},Es=q=>q.tagName==="TEXTAREA"||q.isContentEditable,bs=q=>{const ae=getComputedStyle(q),Pe=ae.getPropertyValue("opacity"),pe=ae.getPropertyValue("display");return!(Pe==="0"||pe==="none")},Ts=q=>{const ae=q.target;if(Es(ae)&&bs(ae)){if($=!0,ve){ve=!1;return}xe.value||Ut(ae)}};function Ri(q){p.value===nt.OPEN_MODAL?(da(q,i,{selectAll:x,savedRange:Y,savedSelectionStart:K,savedSelectionEnd:O}),Y=null,K=-1,O=-1,_e.value=!1):da(q,i,x)}function wn(){return p.value===nt.REPLACE?"plugin_textbox_translate_page_replace":"plugin_textbox_translate_page_noreplace"}return Ka(async()=>{zi.includes(location.hostname)?p.value=nt.OPEN_MODAL:p.value=nt.REPLACE,U.value="horizontal",await at(Ie.DETECT_SYSTEM_LANGUAGE),await at(Ie.DETECT_PAGE_LANGUAGE);const{textboxTranslateBlackList:q=[]}=E.value||{};Yt(window.location.href,q)||(document.activeElement&&Es(document.activeElement)&&bs(document.activeElement)&&($=!0,Ut(document.activeElement)),document.addEventListener("focus",Ts,!0))}),Te(_e,q=>{if(q){if(rt.value=p.value===nt.OPEN_MODAL?F:Ln(),x=p.value===nt.OPEN_MODAL?j:x,!J.value||!X.value)return;const ae=J.value.getBoundingClientRect(),Pe=X.value.getBoundingClientRect();if(U.value==="vertical"){const{top:pe}=ae,Re=400,ot=10,St=Pe.left-Re;St>=ot?C.value=St:C.value=ot;const je=Pe.top-ae.top;_.value=pe+je}else{const{top:pe,left:Re,height:ot,width:St}=ae;_.value=pe+ot+10,C.value=Re+St-30}}else qt(),Y=null,K=-1,O=-1}),xn(()=>{It(),document.removeEventListener("focus",Ts,!0),window.removeEventListener("resize",pt)}),(q,ae)=>{const Pe=ji("i18n-t");return k(),se($t,null,[ie(Yn,{name:"slow-fade-in"},{default:Ze(()=>[we.value?(k(),se("div",{key:0,ref_key:"containerRef",ref:J,class:st(["input-translate-ball-container",{vertical:U.value==="vertical"}]),style:Ae(Me.value)},[y("div",{ref:"ballContentContainer",onClick:Jt,style:Ae(ue.value),class:st(["input-translate-ball-content",{hover:Ne.value,"ball-content-small":S.value,translating:xe.value}]),onMouseleave:Ar,onMouseenter:_r},[S.value?(k(),se("div",{key:0,ref_key:"smallIconRef",ref:De,class:"input-translate-ball-small-icon",style:Ae(Le.value?{left:"11px"}:{right:"11px"})},null,4)):me("",!0),S.value?me("",!0):(k(),se("div",{key:1,ref_key:"translateIconRef",ref:be,class:st([{translating:xe.value},"translateIcon"])},[xe.value?(k(),Se(ut,{key:1,class:"translate-loading-icon",icon:"loading",size:14})):(k(),Se(ut,{key:0,onMousedown:ar,onClick:sr,icon:"translate-text-white",onMouseenter:ae[0]||(ae[0]=pe=>gs(pe,"pure_text",z(m)("hoverBall.tips.translate",[M.value]))),onMouseleave:ae[1]||(ae[1]=pe=>He.value=!1),size:20}))],2)),S.value?me("",!0):(k(),se("div",{key:2,style:Ae(Le.value?{marginLeft:"0"}:{marginRight:"0"}),class:"otherIcons"},[ie(Pt,{ref_key:"improveWritingButtonRef",ref:ye,size:28,onMouseenter:ae[2]||(ae[2]=pe=>gs(pe,"use_model",z(h).translationService)),onMouseleave:ae[3]||(ae[3]=pe=>He.value=!1),onMousedown:Di,onClick:Si,active:_e.value,icon:"edit"},null,8,["active"]),ie(Pt,{onMouseenter:ae[4]||(ae[4]=pe=>or(pe,"pure_text",z(m)("common.switchLanguage"))),onMouseleave:ae[5]||(ae[5]=pe=>He.value=!1),onClick:Ci,active:ne.value,size:28,icon:"open-setting"},null,8,["active"]),ie(Pt,{size:28,onMouseenter:ae[6]||(ae[6]=pe=>or(pe,"pure_text",z(m)("common.undo"))),onMouseleave:ae[7]||(ae[7]=pe=>He.value=!1),onClick:xi,active:!1,disabled:!vs.value,icon:"undo"},null,8,["disabled"]),ie(Pt,{class:"always-close-icon-button",size:28,onMouseenter:ae[8]||(ae[8]=pe=>or(pe,"pure_text",z(m)("common.disable"))),onMouseleave:ae[9]||(ae[9]=pe=>He.value=!1),onClick:yi,active:lt.value,icon:"alway-close"},null,8,["active"])],4))],38),ie(Yn,{name:"slow-fade-in"},{default:Ze(()=>[He.value?(k(),se("div",{key:0,ref_key:"tipRef",ref:Ee,style:Ae(Oe.value),class:st(["input-translate-ball-tips",{"model-tip-label":Et.value==="use_model"}])},[Et.value==="use_model"?(k(),Se(Pe,{key:0,keypath:"improveWrite.writeBetterWith"},{default:Ze(()=>{var pe,Re;return[y("span",hp,[y("span",mp,[y("img",{class:"input-translate-ball-tips-icon",src:Ai((pe=te.value)==null?void 0:pe.icon)},null,8,vp)]),Mt(" "+de((Re=te.value)==null?void 0:Re.label),1)])]}),_:1})):(k(),se($t,{key:1},[Mt(de(vt.value),1)],64))],6)):me("",!0)]),_:1}),Ke.value?(k(),se("div",{key:0,style:Ae(Le.value?{left:"0px"}:{right:"0px"}),class:"input-translate-ball-tips error-tips"},de(Qe.value),5)):me("",!0),Ge.value?(k(),Se(tr,{key:1,ref_key:"exceedLimitTipRef",ref:ee,"translate-type":At.value,"need-report-sub-type":!0,scene:"plugin_textbox_translate_page_free_trial_limit","report-page-name":"plugin_textbox_translate_page",position:"bottom",offset:`${b.value}px`,style:Ae([{position:"absolute",width:"300px","pointer-events":"all"},T.value]),onClose:ia},null,8,["translate-type","offset","style"])):me("",!0),y("div",{ref_key:"popupContainerRef",ref:Be,class:"input-translate-ball-popup-container"},[lt.value?(k(),Se(ta,{key:0,ref_key:"secondConfirmRef",ref:re,source:"input_ball",style:Ae(Xe.value),title:z(m)("common.disableDesc",[z(m)("inputBall.name")]),onClose:Mn,onConfirm:fs,options:Dt.value,class:"input-translate-ball-popup"},null,8,["style","title","options"])):me("",!0),ne.value?(k(),Se(es,{key:1,ref_key:"inputTranslateSettingRef",ref:V,style:Ae(Xe.value),onClose:Mn,onSettingChange:Li},null,8,["style"])):me("",!0),z(L)?(k(),Se(ea,{key:2,source:"plugin_textbox_translate_login_guide_page",ref_key:"loginTipRef",ref:Q,onClose:Mn,class:"input-translate-ball-popup",style:Ae(Xe.value)},null,8,["style"])):me("",!0)],512)],6)):me("",!0)]),_:1}),_e.value?(k(),Se(Wo,{key:0,top:_.value,left:C.value,"source-text":rt.value,"translate-replace-type":z(nt).OPEN_MODAL,"up-translate-type":ft.value,"onUpdate:upTranslateType":ae[10]||(ae[10]=pe=>ft.value=pe),onClose:ae[11]||(ae[11]=pe=>_e.value=!1),onReplace:Ri,onAlwayCloseConfirm:fs},null,8,["top","left","source-text","translate-replace-type","up-translate-type"])):me("",!0)],64)}}}),bp=ze(Ep,[["__scopeId","data-v-29c9e78e"]]),Tp={key:0,class:"pdf-banner-container"},wp={class:"pdf-banner-desc"},_p={class:"pdf-translate-close"},Ra=50,Ap=qe({__name:"PdfBanner",setup(t){const{t:e}=gt(),{userSettings:n}=et(),{translatePdfPage:r}=Pn(),{width:a}=io(),s=D(!1),o=D(!1),u=D(!1),l=D(!1),c=oe(()=>Oa.en.language[n.value.targetLanguage]),h=oe(()=>u.value?` Translate Research Paper to ${c.value}  Supporting arXiv, CORE and more`:e("banner.desc")),v=oe(()=>u.value?"plugin_academia_translate_bar":"plugin_translate_pdf_bar"),E=oe(()=>u.value?"Translate Now":e("translate.translateNow")),w=oe(()=>u.value?ge.ACADEMIC_CLOSE_TIME:ge.PDF_BANNER_CLOSE_TIME),L=oe(()=>{const i="fit-content";let f="flex",g="136px";return Xn()?(g=a.value>1024?"210px":a.value>800?"150px":a.value<630?"90px":"120px",f=a.value>630&&a.value<750||a.value<600?"none":"flex"):f=a.value>780||a.value<500?"flex":"none",Xn()?{right:g,top:"4px",width:i,display:f}:{right:g,top:"12px",width:i,display:f}}),R=()=>{r(u.value?"academia":"translateBar"),I.reportClickEvent(v.value,"translate",{link:location.href})},B=()=>{s.value=!1,dt(w.value,Date.now()),I.reportClickEvent(v.value,"close")};Te(()=>s.value,i=>{i?(m(),I.reportShowEvent(v.value)):A()});function m(){const i=Lr(location.href);if(i&&[$n.ARXIV,$n.MDPI].includes(i))document.body.style.transform=`translateY(${Ra}px)`;else if(i&&[$n.CORE].includes(i))document.body.style.marginTop=`${Ra}px`;else if(l.value){const f=document.querySelector('embed[type="application/pdf"]');f&&f instanceof HTMLElement?f.style.top=`${Ra}px`:(s.value=!1,o.value=!0)}}function A(){const i=Lr(location.href);if(i&&[$n.ARXIV,$n.MDPI].includes(i))document.body.style.transform="";else if(i&&[$n.CORE].includes(i))document.body.style.marginTop="";else if(l.value){const f=document.querySelector('embed[type="application/pdf"]');f&&f instanceof HTMLElement&&(f.style.top="0px")}}async function d(){const i=wu()[0];try{const f=await fetch(i,{method:"HEAD"}),g=f.headers.get("Content-Length")||f.headers.get("content-length"),P=f.headers.get("Content-Type")||f.headers.get("content-type");return P&&!P.toLowerCase().includes("application/pdf")?(Ue.warn(`${i} is not a PDF file, content type: ${P}`),I.reportCustomEvent("pdf_get_error",{type:"notPdf",contentType:P,pdfUrl:i}),!0):Number(g)>Yi?(Ue.warn(`PDF size exceeds limit: ${g} bytes`),I.reportCustomEvent("pdf_get_error",{type:"overSize",size:g,pdfUrl:i}),!0):!1}catch{return!1}}return kt(async()=>{if(u.value=!!Lr(location.href),l.value=Qa(),!u.value&&!l.value||l.value&&!u.value&&await d())return;const i=await We(w.value);i&&Date.now()-i<7*24*60*60*1e3||setTimeout(()=>{s.value=!0},1e3)}),(i,f)=>(k(),se($t,null,[s.value?(k(),se("div",Tp,[ie(ut,{icon:"tip",size:18}),y("div",wp,de(h.value),1),ie(Qt,{class:"pdf-translate-button",type:"primary",onClick:R},{default:Ze(()=>[Mt(de(E.value),1)]),_:1}),y("div",_p,[ie(Pt,{icon:"close",onClick:B})])])):me("",!0),o.value?(k(),se("div",{key:1,style:Ae(L.value),class:"pdf-only-translate-button-container"},[ie(Qt,{style:{height:"32px"},type:"primary",onClick:R},{default:Ze(()=>[Mt(de(E.value),1)]),_:1})],4)):me("",!0)],64))}}),yp=ze(Ap,[["__scopeId","data-v-c3f257c8"]]),Cp={class:"plugin-comment-guid-container"},Dp={class:"plugin-comment-guid-header"},Sp=["src"],xp={key:0,class:"plugin-comment-five-star"},Lp=["src"],Rp={class:"plugin-comment-dec-container"},Ip={class:"plugin-comment-dec"},Bp={class:"plugin-comment-btn-container"},Np=qe({__name:"PluginCommentGuid",setup(t){const{locale:e}=gt(),{t:n}=gt(),{onlineParams:r}=an(),{closePluginCommentGuid:a}=Jn(),s=oe(()=>on(e.value)),o=()=>chrome.runtime.getURL("public/logo/icon-128.png"),u=()=>chrome.runtime.getURL("public/images/comment.png"),l=oe(()=>{var E,w,L,R;return((w=(E=r.value)==null?void 0:E.pluginComment)==null?void 0:w.type)==="5star"?n("comment.desc",[Xn()?"edge":"chrome"]):((R=(L=r.value)==null?void 0:L.pluginComment)==null?void 0:R.npsLinkContent)||"How likely are you to recommend AnyDoc Translator to your friends or colleagues?"}),c=oe(()=>{var E,w,L,R;return((w=(E=r.value)==null?void 0:E.pluginComment)==null?void 0:w.type)==="5star"?n("comment.btn",[Xn()?"edge":"chrome"]):((R=(L=r.value)==null?void 0:L.pluginComment)==null?void 0:R.npsLinkTitle)||"Share Feedback Now"}),h=()=>{a("close"),I.reportClickEvent("plugin_fivestar_guide_popup","close")},v=()=>{var w;I.reportClickEvent("plugin_fivestar_guide_popup","go_to_store"),a("go");const E=(w=r.value)==null?void 0:w.pluginComment;if(E&&E.type==="link_nps"&&E.npsLink){window.open(E.npsLink);return}Xn()?window.open("https://microsoftedge.microsoft.com/addons/detail/pajdgpfjcgcdfkccnbinpalbihedpkfm"):window.open("https://chrome.google.com/webstore/detail/aopddeflghjljihihabdclejbojaomaf/reviews")};return(E,w)=>{var L,R;return k(),se("div",Cp,[y("div",Dp,[y("div",{class:"plugin-comment-guid-header-logo",style:Ae({"flex-direction":s.value?"row-reverse":"row","justify-content":s.value?"flex-end":"flex-start"})},[y("img",{src:o(),style:{height:"24px",width:"24px"}},null,8,Sp),w[0]||(w[0]=y("div",{class:"plugin-comment-logo-name"}," AnyDoc Translator ",-1))],4),ie(Pt,{icon:"close",size:28,onClick:h})]),((R=(L=z(r))==null?void 0:L.pluginComment)==null?void 0:R.type)==="5star"?(k(),se("div",xp,[y("img",{src:u(),style:{height:"40px"}},null,8,Lp)])):me("",!0),y("div",Rp,[y("div",Ip,de(l.value),1)]),y("div",Bp,[ie(Qt,{class:"plugin-comment-btn",size:"large",block:"",type:"primary",onClick:v},{default:Ze(()=>[Mt(de(c.value),1)]),_:1})])])}}}),kp=ze(Np,[["__scopeId","data-v-fef91c63"]]),Op={key:0,class:"dialog-mask"},Fp={class:"dialog-header"},Pp={class:"dialog-title"},Mp={class:"dialog-content"},$p={class:"dialog-body"},Up={key:0},qp={class:"dialog-actions"},Hp=qe({__name:"ConfirmDialog",props:{width:{default:360},title:{default:""},content:{default:""},confirmText:{default:""},cancelText:{default:""},showCancel:{type:Boolean,default:!1},showMask:{type:Boolean,default:!1},colorfulConfirmBtn:{type:Boolean,default:!1}},emits:["confirm","cancel","update:visible"],setup(t,{emit:e}){const n=e;function r(){n("cancel"),n("update:visible",!1)}function a(){n("confirm"),n("update:visible",!1)}return(s,o)=>(k(),se($t,null,[s.showMask?(k(),se("div",Op)):me("",!0),y("div",{class:"confirm-dialog",style:Ae({width:`${s.width}px`})},[y("div",Fp,[y("h3",Pp,de(s.title||s.$t("common.tips")),1),ie(Pt,{icon:"close",size:28,onClick:r})]),y("div",Mp,[y("div",$p,[br(s.$slots,"default",{},()=>[s.content?(k(),se("p",Up,de(s.content),1)):me("",!0)],!0)]),y("div",qp,[s.showCancel?(k(),Se(Qt,{key:0,onClick:r},{default:Ze(()=>[Mt(de(s.cancelText||s.$t("common.cancel")),1)]),_:1})):me("",!0),ie(Qt,{type:"primary",class:st({"colorful-confirm-btn":s.colorfulConfirmBtn}),onClick:a},{default:Ze(()=>[Mt(de(s.confirmText||s.$t("common.confirm")),1)]),_:1},8,["class"])])])],4)],64))}}),zo=ze(Hp,[["__scopeId","data-v-eca39056"]]),Gp=qe({__name:"PrivilegeDialog",setup(t){const{exceedLimitDialogShow:e,showMask:n}=dn(),{t:r}=gt();function a(){e.value=!1,n.value=!0,I.reportClickEvent("plugin_free_trial_limit_upgrade_popup","close")}function s(){$e(`${he.priceUrl}?source=plugin_translate_website&position=ai_model_free_trial_limit`),I.reportClickEvent("plugin_free_trial_limit_upgrade_popup","upgrade_now")}return kt(()=>{I.reportShowEvent("plugin_free_trial_limit_upgrade_popup")}),(o,u)=>(k(),Se(zo,{"colorful-confirm-btn":!0,content:z(r)("translate.limitTip",[z(r)("common.upgradeNow").toLowerCase()]),"confirm-text":z(r)("common.upgradeNow"),"show-mask":z(n),onConfirm:s,onCancel:a},null,8,["content","confirm-text","show-mask"]))}}),Vp=qe({__name:"RefreshPaymentDialog",setup(t){const{refreshPaymentDialogShow:e,showMask:n}=dn(),{t:r}=gt(),{refreshUserInfo:a}=_t();function s(){e.value=!1}function o(){e.value=!1,a()}return kt(()=>{I.fireEvent("premium_promotion_popup",{action:"show",item:"payment_refresh_popup_page"})}),(u,l)=>(k(),Se(zo,{content:z(r)("common.refreshPaymentDesc"),"confirm-text":z(r)("common.refreshPage"),"show-mask":z(n),onConfirm:o,onCancel:s},null,8,["content","confirm-text","show-mask"]))}}),Wp={class:"upgrade-dialog"},zp={class:"dialog-content"},jp={class:"content-left"},Xp={class:"dialog-title"},Yp={class:"features-list"},Kp={class:"content-right"},Qp=qe({__name:"upgradeDialog",emits:["close"],setup(t){const{t:e}=gt(),{showMask:n,closePageDialog:r,upgradeDialogType:a,refreshPaymentDialogShow:s,upgradeDialogScene:o}=dn(),u=oe(()=>o.value==="subtitle"?"web_translate_subtitle":"web_translate_image"),l=oe(()=>o.value==="subtitle"?"web_subtitle_translate_payment_popup":"web_image_translate_payment_popup"),c=oe(()=>[{highlight:a.value==="subtitle",text:e("upgradeDialog.subtitleFeature")},{highlight:!1,text:e("upgradeDialog.imageFeature")},{highlight:!1,text:e("upgradeDialog.textFeature")},{highlight:!1,text:e("upgradeDialog.exportFeature")},{highlight:!1,text:e("upgradeDialog.noWatermarkFeature")}]),h=()=>chrome.runtime.getURL("public/images/subtitleUpgrade.png"),v=()=>chrome.runtime.getURL("public/images/dialog-close.png"),E=()=>{r(),I.fireEvent("premium_promotion_popup",{action:"click",page_name:l.value,item:"close"})},w=()=>{const L=`${he.priceUrl}?source=${u.value}&position=${l.value}`;$e(L),setTimeout(()=>{r(),s.value=!0},1e3),I.fireEvent("premium_promotion_popup",{action:"click",page_name:l.value,item:"upgrade_now"})};return kt(()=>{I.fireEvent("premium_promotion_popup",{action:"show",item:l.value})}),(L,R)=>(k(),se("div",{class:st(["upgrade-dialog-overlay",{"with-mask":z(n)}])},[y("div",Wp,[y("div",{class:"dialog-close",onClick:E,style:Ae({backgroundImage:`url(${v()})`})},null,4),y("div",zp,[y("div",jp,[y("h2",Xp,de(L.$t("upgradeDialog.title")),1),y("div",Yp,[(k(!0),se($t,null,Tn(c.value,(B,m)=>(k(),se("div",{key:m,class:"feature-item"},[ie(ut,{icon:"check",size:20,class:"check-icon"}),y("span",{class:st(["feature-text",{highlight:B.highlight}])},de(B.text),3)]))),128))]),y("div",{class:"upgrade-button",onClick:w},de(L.$t("common.upgradeNow")),1)]),y("div",Kp,[y("div",{class:"upgrade-image",style:Ae({backgroundImage:`url(${h()})`})},null,4)])])])],2))}}),Jp=ze(Qp,[["__scopeId","data-v-73213492"]]),zt={DOCUMENT:"document",WINDOW:"window"},ts=[{eventName:"click",instance:zt.DOCUMENT,capture:!1},{eventName:"mousedown",instance:zt.DOCUMENT,capture:!1},{eventName:"mousemove",instance:zt.DOCUMENT,capture:!1},{eventName:"mouseup",instance:zt.DOCUMENT,capture:!1},{eventName:"wheel",instance:zt.DOCUMENT,capture:!1},{eventName:"keydown",instance:zt.DOCUMENT,capture:!1,customEventListener:t=>{if((t.ctrlKey||t.metaKey)&&t.keyCode===65){const e=new CustomEvent("selectall",{bubbles:!0,cancelable:!0,detail:{originalEvent:t}});t.target.dispatchEvent(e)}}},{eventName:"scroll",instance:zt.DOCUMENT,capture:!1},{eventName:"focus",instance:zt.DOCUMENT,capture:!0},{eventName:"resize",instance:zt.WINDOW,capture:!1},{eventName:"storage",instance:zt.WINDOW,capture:!1},{eventName:"message",instance:zt.WINDOW,capture:!1},{eventName:"unload",instance:zt.WINDOW,capture:!1},{eventName:"selectall",instance:zt.DOCUMENT,stopIfDefaultPrevented:!0}],Zp=ts.reduce((t,e)=>(t[e.eventName]=e,t),{}),jo=new Map;function ed(t){const e={};return ts.forEach(({eventName:n})=>{e[n]=new Map}),jo.set(t,e),e}function na(t=window){return jo.get(t)}function Xo(t){var e;return t.target.frameElement||((e=t.view)==null?void 0:e.frameElement)||window}function kr(t){return t===t.top}function td(t){return!kr(Xo(t))}function nd(t){const e=Xo(t),n=na(e);if(!n)return;const r=t.type,a=Zp[r],s=n[r];if(a.customEventListener&&a.customEventListener(t),s){const o=Array.from(s.values()).sort((u,l)=>l._order-u._order);for(let u=0;u<o.length&&(o[u](t),!(t.defaultPrevented&&(t.detail&&t.detail.originalEvent&&t.detail.originalEvent.preventDefault(),a.stopIfDefaultPrevented)));u++);}}function Ms(){}function Yo(t=window){let e=na(t);if(e)return e;e=ed(t);try{let n=kr(t)?document:t.contentDocument;const r=kr(t)?window:t.contentWindow,a=()=>{try{ts.forEach(s=>{(s.instance===zt.DOCUMENT?n:r).addEventListener(s.eventName,nd,s.capture)})}catch(s){Ue.error("addEventListener error",s)}};if(kr(t))a();else{t.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms");let s=100;const o=setInterval(()=>{try{if(n=t.contentDocument,!n)return;n.readyState==="complete"&&(n.body.childNodes.length>0?(clearInterval(o),a()):(s--,s<1&&(clearInterval(o),a())))}catch(u){Ue.error("iframeInterval error: ",u),clearInterval(o),a()}},1e3)}}catch(n){Ue.error("addAllEventListeners error",n.message)}return e}function An(t,e,n=window,r=0){if(!t||!e)return Ms;let a=na(n);a||(a=Yo(n));const s=dr(),o=a[t];return o?(e._order=r,o.set(s,e),()=>o.delete(s)):Ms}function yn(t,e,n=window){const r=na(n);if(!r)return;const a=r[t];a&&a.forEach((s,o)=>{s===e&&a.delete(o)})}Yo();const rd=qe({__name:"WordTranslateBubble",emits:["alwaysClose"],setup(t,{emit:e}){const{t:n}=gt(),{setPluginUseTime:r}=Jn(),{userSettings:a}=et(),s=e,o=D(!0),u=D(!1),l=D(!1),c=D(!1),h=D(0),v=D(0),E=D(0),w=D(0),L=D(0),R=D(0),B=D(0),m=D(0),A=D(""),d=D();Te(c,x=>{if(x&&d.value){const F=d.value.getBoundingClientRect();w.value=F.top,E.value=F.left}}),Te(u,x=>{x&&I.reportShowEvent("plugin_select_to_translate_entry")}),nn(d,()=>{u.value&&(u.value=!1)},{});const i=()=>{c.value=!0,u.value=!1,r(),I.reportClickEvent("plugin_select_to_translate_entry","translate_entry")},f=async()=>{c.value=!1,await ca(50);const x=window.getSelection();x!=null&&x.toString().trim()&&(u.value=!0)};function g(x){var Y;if(L.value=x.pageX,R.value=x.pageY,!u.value)return;const j=x.composedPath()[0]||null;j&&((Y=d.value)!=null&&Y.contains(j))||(u.value=!1)}function P(x){B.value=x.pageX,m.value=x.pageY}function W(x){return x?x.tagName==="INPUT"||x.tagName==="TEXTAREA"||x.getAttribute("contenteditable")==="true"?x:x.querySelector('input, textarea, [contenteditable="true"]'):null}function $(x){const F=j=>{if(j.shadowRoot)return!0;{const Y=j.children;for(let K=0;K<Y.length;K++)if(F(Y[K]))return!0}return!1};!F(x)&&!W(x)||((L.value>B.value||R.value>m.value)&&(l.value=!0),l.value?(v.value=m.value-50,h.value=B.value+2):(h.value=B.value-20,v.value=m.value+15),!c.value&&(u.value=!0))}async function ve(x){var lt,Dt,Le,Ce,Ge;if(u.value||Ki(x.target))return;await ca(50);const F=x.target,j=(F==null?void 0:F.ownerDocument)&&F.ownerDocument!==document,Y=(lt=F==null?void 0:F.ownerDocument)==null?void 0:lt.getSelection(),K=Y==null?void 0:Y.toString().trim();if(!K||!Y)return;l.value=!1,A.value=K;const{anchorNode:O,focusNode:J}=Y,X=30,Be=Y.getRangeAt(0),re=Be.getBoundingClientRect(),{startContainer:V,endContainer:Q}=Be;if(re.width===0&&re.height===0){O&&J&&O===J&&$(O);return}O===J&&(L.value>B.value||R.value>m.value)&&(l.value=!0),O!==J&&V===J&&Q===O&&(l.value=!0);const Ee=re.right-X,ee=re.left,be=re.top-X,ye=re.bottom,De=x.pageX,we=((Dt=x.view)==null?void 0:Dt.scrollY)||0;let Me=Ee,xe=ye;l.value&&(xe=be,Me=ee),De>=ee&&De<=Ee&&(Me=De);const Ne=-2,Ke=8,Qe=l.value?2:-14,He=l.value?Ne:Ke,vt=10;if(h.value=Me+Qe,v.value=xe+He+we,j&&((Le=F.ownerDocument.defaultView)!=null&&Le.frameElement)){const ct=F.ownerDocument.defaultView.frameElement.getBoundingClientRect(),ne=F.ownerDocument.defaultView.scrollY,_e=F.ownerDocument.defaultView.scrollX,Xe=((Ce=document.defaultView)==null?void 0:Ce.scrollY)||0,ft=((Ge=document.defaultView)==null?void 0:Ge.scrollX)||0;h.value=h.value+ct.left+ft-_e,v.value=v.value+ct.top+Xe-ne}const Et=()=>v.value+X-we>window.innerHeight,Oe=()=>v.value-we<0;Et()&&(v.value=window.innerHeight-X-vt+we,l.value||(v.value=be+Ne+we,l.value=!0)),Oe()&&(v.value=vt+we,l.value&&(v.value=ye+Ke+we,l.value=!1,Et()&&(v.value=vt+we,l.value=!0))),!c.value&&Z()}async function Z(){var x,F;try{const j=await fo(A.value),Y=(x=rn(j))==null?void 0:x.value,K=a.value.inTextTranslation;Ue.info(`
    detectLanguage: ${j},
    sourceTextLanguage: ${Y},
    targetLanguage: ${a.value.targetLanguage},
    blockedLanguages: ${K.blockedLanguages}`),Y===a.value.targetLanguage&&((F=K.blockedLanguages)!=null&&F.includes(Y))?u.value=!1:u.value=!0}catch{u.value=!0}}function fe(x){var Y;if(!x)return!1;const F=((Y=x.shadowRoot)==null?void 0:Y.activeElement)||void 0,j=[bo.toUpperCase(),"INPUT","TEXTAREA"];return fe(F)||j.includes(x.tagName)||x.getAttribute("contenteditable")==="true"}async function N(x){var Be;const F=x.target;if(fe(F))return;const j=((Be=x.detail)==null?void 0:Be.originalEvent)||void 0;if(j&&(fe(j.target)||td(j)))return;x.preventDefault();const Y=window.getSelection();if(!Y)return;Y.removeAllRanges();const K=document.createRange();K.selectNodeContents(document.body),Y.addRange(K),await ca(50);const O=Y.toString().trim();if(!O)return;A.value=O;const X=Y.getRangeAt(0).getBoundingClientRect();X.width===0&&X.height===0||(h.value=B.value+5,v.value=m.value+5,!c.value&&Z())}return kt(async()=>{An("mousedown",g),An("mousemove",P),An("mouseup",ve),An("selectall",N),document.querySelectorAll("iframe").forEach(F=>{An("mouseup",ve,F),An("mousedown",g,F),An("mousemove",P,F),An("selectall",N,F)})}),xn(()=>{yn("mousedown",g),yn("mousemove",P),yn("mouseup",ve),yn("selectall",N),document.querySelectorAll("iframe").forEach(F=>{yn("mouseup",ve,F),yn("mousedown",g,F),yn("mousemove",P,F),yn("selectall",N,F)})}),(x,F)=>(k(),se($t,null,[ie(Yn,{name:"fade-in"},{default:Ze(()=>[Rt(y("div",{ref_key:"translateBubbleRef",ref:d,style:Ae({top:v.value+"px",left:h.value+"px"}),class:st(["word-translate-bubble",{"black-theme":o.value}]),onClick:i},[ie(ut,{icon:o.value?"translate-text-white":"translate-text",size:20},null,8,["icon"]),y("div",null,de(z(n)("translate.translate")),1),y("div",{class:st(["translate-text-sharp-angle",l.value?"sharp-bottom":"sharp-top"])},null,2)],6),[[Lt,u.value]])]),_:1}),ie(Yn,{name:"fade-in"},{default:Ze(()=>[c.value?(k(),Se(Wo,{key:0,top:w.value,left:E.value,"translate-replace-type":z(nt).NONE,"source-text":A.value,show:c.value,onAlwayCloseConfirm:F[0]||(F[0]=j=>s("alwaysClose",j)),onClose:f},null,8,["top","left","translate-replace-type","source-text","show"])):me("",!0)]),_:1})],64))}}),ad=ze(rd,[["__scopeId","data-v-86790c53"]]);let $s=!1;const Us="anydoc-scholar-buttons-container",Ko="anydoc-scholar-text",{userSettings:qr}=et();Te(qr,()=>{document.querySelectorAll(`.${Ko}`).forEach(e=>{e instanceof HTMLElement&&(e.innerText=Qo())})});function sd(t){var c,h,v,E;const e=(t.href||"").toLowerCase(),n=(t.textContent||"").toLowerCase(),r=((h=(c=t.querySelector("img"))==null?void 0:c.alt)==null?void 0:h.toLowerCase())||"",a=[/\.pdf$/i,/\/pdf\//i,/[?&]pdf=/i,/type=pdf/i,/format=pdf/i,/application\/pdf/i,/download=pdf/i],s=[/\[pdf\]/i,/pdf\s*version/i,/pdf\s*file/i,/download\s*pdf/i,/view\s*pdf/i,/full\s*text/i];if(a.some(w=>w.test(e))||s.some(w=>w.test(n)||w.test(r)))return!0;const l=((E=(v=t.parentElement)==null?void 0:v.textContent)==null?void 0:E.toLowerCase())||"";return!!s.some(w=>w.test(l))}function od(t){const e=t.parentNode;return e instanceof Element&&e.classList.contains("wps-buttons-container")}function qs(t){$e(`
    ${he.fileTranslateRedirectPage}?plugin=anydoc&is_academia=true&pdf_url=${encodeURIComponent(t)}&position=google_academia_translateplugin_translate_bar_translate
  `)}function Qo(){const{targetLanguage:t}=qr.value;return navigator.language.startsWith("zh")?`[PDF]  [${pa("zh-CN").language[t]}]`:(pa("en").language.targetLanguage,`[PDF] Translate to [${pa("en").language[t]}]Academic Translator`)}const Jo=za(()=>{document.querySelectorAll(".gs_or_ggsm").forEach(e=>{if(e.dataset.anydocProcessed)return;e.dataset.anydocProcessed="true",e.querySelectorAll("a").forEach(r=>{var a,s;if(sd(r)&&!od(r)&&!((a=r.parentNode)!=null&&a.querySelector(`.${Us}`))){const o=document.createElement("div");o.className=Us,o.style.display="flex",o.style.alignItems="center",o.style.gap="8px";const u=document.createElement("span");u.className=Ko,u.textContent=Qo(),u.style.color="#1a0dab",u.style.cursor="pointer",u.style.fontSize="14px",u.addEventListener("mouseenter",()=>{u.style.textDecoration="underline"}),u.addEventListener("mouseleave",()=>{u.style.textDecoration=""}),u.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),qs(r.href),I.reportClickEvent("google_academia_translateplugin_translate_bar","translate_to_target_lang",{link:r.href,target_lang:qr.value.targetLanguage})}),o.appendChild(u);const l=document.createElement("img");l.style.width="16px",l.style.height="16px",l.style.cursor="pointer",l.src=chrome.runtime.getURL("public/logo/icon-32.png"),l.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),qs(r.href),I.reportClickEvent("google_academia_translateplugin_translate_bar","icon",{link:r.href,target_lang:qr.value.targetLanguage})}),o.appendChild(l),(s=r.parentNode)==null||s.appendChild(o),$s||($s=!0,I.reportShowEvent("google_academia_translateplugin_translate_bar"))}})})},250);function id(){new MutationObserver(za(e=>{let n=!1;e.forEach(r=>{r.type==="childList"&&r.addedNodes.length>0&&(n=!0)}),n&&Jo()},250)).observe(document.body,{childList:!0,subtree:!0})}function ud(){return{initScholarEnhance:()=>{Yr()||location.host.includes("scholar.google.")&&(window.addEventListener("load",()=>{id()}),Jo())}}}function Zo(t){t.nodeType===Node.ELEMENT_NODE&&t.removeAttribute("id"),t.childNodes.forEach(Zo)}function ld(t){const e=document.querySelector(".ams.bkG");if(e)try{e.click(),setTimeout(()=>{const r=document.querySelector(".ii.gt").cloneNode(!0);Zo(r);const a=document.querySelector(".gmail_quote.gmail_quote_container"),s=a==null?void 0:a.querySelector(".gmail_attr");a&&(Au(a),s&&a.appendChild(s),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("br")),a.appendChild(r),a.appendChild(t))},500)}catch{}}const cd=[{name:To.GMAIL,pattern:/^https?:\/\/mail\.google\.com(\/.*)?$/i,btnAnchorSelector:"#gb .gb_Je",detailElementSelector:".ii.gt",detailElementParentLevel:1,btnAppendMethod:fr.INSERT_AFTER,translateAnchorSelector:".gE.iv.gt",translateAppendMethod:fr.INSERT_AFTER,detailPattern:/^https?:\/\/mail\.google\.com\/mail\/u\/\d+\/#inbox\/([a-zA-Z0-9]+)$/i,enableFunction:()=>()=>{},disableFunction:()=>{},transferEmail:ld}];function ns(t){for(const e of cd)if(t.match(e.pattern))return e;return null}const pd=["dir"],dd=["src"],gd={class:"banner-content"},fd={class:"header-section"},hd=["src"],md={class:"title"},vd=["src"],Ed={class:"feature-text"},bd={class:"bottom-section"},Td={class:"enable-text"},wd={key:1,class:"mail-setting-btn-red-hot"},_d=qe({__name:"SettingBtn",setup(t){const{locale:e,t:n}=gt(),{contentScriptRefreshUserInfo:r}=_t(),{userSettings:a,getSettingByKey:s,notifyUserSettings:o}=et(),u=ns(location.href),l=D(!1),c=oe(()=>on(e.value)?"rtl":"ltr"),h=oe(()=>a.value.integrations[u.name].enable?"on":"off"),v=Ve("popupContainerRef"),E=Ve("logoRef"),w=D(!1),L=D(a.value.integrations[u.name].enable),R=oe(()=>[{id:1,text:n("integration.mail.feature1")},{id:2,text:n("integration.mail.feature2")},{id:3,text:n("integration.mail.feature3")}]);nn(v,()=>{w.value=!1},{ignore:[E]}),Te(a,(d,i)=>{d.integrations[u.name].enable!==i.integrations[u.name].enable&&(L.value=d.integrations[u.name].enable,d.integrations[u.name].enable?u.disableFunction=u.enableFunction():u.disableFunction())}),Te(w,d=>{d&&I.reportIntergratedShowEvent("mail_translate_settings_popup",{status:h.value})});function B(){w.value=!w.value,l.value=!1,dt(ge.MAIL_GUID_SHOW,!0),r(),I.reportIntergratedClickEvent("mail_translate_settings_icon")}function m(){w.value=!1}function A(d){const i=s("integrations");i[u.name].enable=d,o({integrations:i}),d?I.reportIntergratedClickEvent("open_mail_translate_settings_popup"):I.reportIntergratedClickEvent("close_mail_translate_settings_popup")}return kt(async()=>{await We(ge.MAIL_GUID_SHOW)||(l.value=!0)}),(d,i)=>(k(),se("div",{dir:c.value,class:"mail-setting-container anydoc-translate-ignore"},[y("div",{class:"mail-setting-btn",ref_key:"logoRef",ref:E},[y("img",{ref_key:"logoRef",ref:E,onClick:B,style:{width:"24px",height:"24px",cursor:"pointer"},src:z(pn)("logo/icon-128.png")},null,8,dd)],512),w.value?(k(),se("div",{key:0,ref_key:"popupContainerRef",ref:v,style:Ae(z(en)()?"left: 13px;":"right: 13px;"),class:"mail-welcome-banner"},[y("div",gd,[y("div",fd,[y("img",{src:z(pn)("images/celebration.png"),style:{width:"24px",height:"24px"}},null,8,hd),y("div",md,de(d.$t("integration.mail.welcome",[z(u).name])),1),ie(Pt,{class:"close-button",icon:"close",size:24,onClick:m})]),y("div",null,[(k(!0),se($t,null,Tn(R.value,f=>(k(),se("div",{key:f.id,class:"feature-item"},[y("img",{src:z(pn)("images/check.png"),style:{width:"16px",height:"16px"}},null,8,vd),y("div",Ed,de(f.text),1)]))),128))])]),i[1]||(i[1]=y("div",{class:"separator"},null,-1)),y("div",bd,[y("div",Td,de(d.$t("integration.mail.enable",[z(u).name])),1),ie(Ui,{modelValue:L.value,"onUpdate:modelValue":i[0]||(i[0]=f=>L.value=f),onChange:A},null,8,["modelValue"])])],4)):me("",!0),l.value?(k(),se("div",wd)):me("",!0)],8,pd))}}),Ad=ze(_d,[["__scopeId","data-v-1f5937b9"]]),yd=["dir"],Cd={class:"translate-btn"},Dd={class:"logo"},Sd={class:"text-content"},xd={class:"send-text-content"},Ld=qe({__name:"TranslateBanner",setup(t){const{locale:e,t:n}=gt(),{userSettings:r}=et(),{translateElement:a,restoreElement:s,setReportParams:o,deleteElementResult:u}=Po(),{refreshPaymentDialogShow:l}=dn(),{isPageTranslated:c}=Pn(),{contentScriptRefreshUserInfo:h}=_t();let v;const E=ns(location.href),w=new Map,L=D(),R=D(!1),B=D(!1),m=D(!0),A=Ve("settingBtnRef"),d=D(!1),i=Ve("mailTranslateSettingRef"),f=oe(()=>on(e.value)?"rtl":"ltr"),g=oe(()=>Kr(e.value)),P=oe(()=>{const K=r.value.targetLanguage,O=rn(K);return O?n(`language.${O.value}`)||O.label:n("language.en")}),W=oe(()=>r.value.integrations[E.name].enable?"on":"off");nn(i,()=>{B.value=!1},{ignore:[A]});const $=(K,O)=>{const J=`${O.serviceName}-${O.targetLanguage}`;w.set(J,K),K==="success"&&(m.value=!1),K==="limit"&&(d.value=!0)},ve=()=>{if(!v)return;const{translationService:K,targetLanguage:O}=r.value,J=w.get(`${K}-${O}`);J&&$(J,{serviceName:K,targetLanguage:O}),a(v,$)},Z=()=>{R.value&&v&&(B.value=!1,m.value=!0,ve())},fe=async()=>{c.value||(B.value=!1,d.value=!1,m.value=!0,v&&(R.value?(R.value=!1,s(v),I.reportIntergratedClickEvent("mail_translate_toolbar_translated_mail_show_original")):(R.value=!0,o("plugin_gmail_integration_mail_translate","plugin_gmail_integration_mail_translate"),ve(),h(),I.reportIntergratedClickEvent("mail_translate_toolbar_translate"))))};function N(){c.value||(d.value=!1,B.value=!B.value,I.reportIntergratedClickEvent("mail_translate_toolbar_settings"),B.value&&I.reportIntergratedShowEvent("mail_translate_toolbar_settings",{status:W.value}))}function x(){d.value=!1,setTimeout(()=>{l.value=!0},1e3)}async function F(){const K=await We(ge.INSTALL_SOURCE),O=document.createElement("div"),J=`${he.fileTranslatePage}?source=plugin_gmail_integration&utm_source=${K}`;return O.innerHTML=`
    <div style='font-size: 14px;'>
      <br/>
      <div style="color: rgba(0,0,0,0.9);">
        ${n("integration.mail.waterMarkDesc")}
      </div>
      <a style="display: block;color: rgba(41, 98, 255, 1); text-decoration: underline;" href="${J}" target="_blank">
        ${n("integration.mail.waterMarkLink")}
      </a>
    </div>
  `,O}async function j(){m.value||(E.transferEmail(await F()),I.reportIntergratedClickEvent("mail_translate_toolbar_forward_translated_mail"))}function Y(){if(!L.value)return;const O=L.value.getRootNode().host;if(!O)return;let J=O;for(let X=0;X<E.detailElementParentLevel&&J.parentElement;X++)J=J.parentElement;v=J.querySelector(E.detailElementSelector)}return kt(()=>{Y(),v&&(v.selfRestore=()=>{R.value=!1,m.value=!0,s(v)}),I.reportIntergratedShowEvent("mail_translate_toolbar",{status:W.value})}),Ya(()=>{v&&(s(v),u(v)),w.clear()}),(K,O)=>(k(),se("div",{dir:f.value,ref_key:"bannerRef",ref:L,class:"mail-translate-banner-container anydoc-translate-ignore",style:Ae({fontFamily:g.value,textAlign:z(en)()?"right":"left",alignItems:"flex-start"})},[y("div",Cd,[y("div",{class:st([{"btn-disabled":z(c)},"logo-container"]),onClick:fe},[y("div",Dd,[ie(ut,{size:16,icon:"translate-text-white"})]),y("div",Sd,de(R.value?K.$t("integration.mail.showOriginal"):K.$t("hoverBall.tips.translate",[P.value])),1)],2),y("div",{class:st(["setting-container",{"btn-disabled":z(c)}]),ref_key:"settingBtnRef",ref:A,onClick:N},[ie(ut,{icon:"setting",size:16})],2),B.value?(k(),Se(es,{key:0,source:"mail",languageColumn:1,ref_key:"mailTranslateSettingRef",ref:i,class:"translate-setting-container",onSettingChange:Z,onClose:O[0]||(O[0]=J=>B.value=!1)},null,512)):me("",!0),d.value?(k(),Se(tr,{key:1,class:"exceed-limit-tip",position:"top",onClose:O[1]||(O[1]=J=>d.value=!1),onUpgrade:x,scene:"plugin_mail_translate_free_trial_limit"})):me("",!0)]),y("div",{class:st(["send-email-btn",{"btn-disabled":m.value}]),onClick:j},[ie(ut,{class:"send-mail-icon",size:20,icon:"sendMail"}),y("div",xd,de(K.$t("integration.mail.sendTranslatedEmail")),1)],2)],12,yd))}}),Rd=ze(Ld,[["__scopeId","data-v-b02d00f3"]]),Id="wps-translate-mail-translation-button",Bd="wps-translate-mail-translate-banner";let Vn=null;const Zn=new Map;async function Nd(t){let e=0;const n=4,r=2e3;let a=null,s=null;for(;e<n&&(a=document.querySelector(t.btnAnchorSelector),s=document.querySelector(t.translateAnchorSelector),!(a&&s));)await new Promise(o=>setTimeout(o,r)),e++;return{btnAnchorElement:a,translateBannerAnchorElement:s}}async function kd(t){const{btnAnchorElement:e}=await Nd(t);e&&Pr(e,Vn,t.btnAppendMethod)}async function Hs(t,e){t.forEach(n=>{if(Zn.has(n))return;const r=Qn(Bd,Rd,!1);Zn.set(n,r),Pr(n,r,e.translateAppendMethod)})}function Od(){Zn.forEach((t,e)=>{t.isConnected||(t.cleanup(),Zn.delete(e))})}async function Fd(){Zn.forEach(t=>{t.remove()}),Zn.clear()}function Pd(t){t.name===To.GMAIL&&(t.enableFunction=()=>{t.disableFunction(),Hs(document.querySelectorAll(t.translateAnchorSelector),t);let e=new MutationObserver(n=>{n.forEach(r=>{if(r.type==="childList"){Od();for(let a=0;a<r.addedNodes.length;a++){const s=r.addedNodes[a];if(s instanceof HTMLElement){const o=s.querySelectorAll(t.translateAnchorSelector);if(o.length>0){Hs(o,t);break}}}}})});return e.observe(document.body,{subtree:!0,childList:!0}),()=>{e==null||e.disconnect(),e=null,Fd()}})}function Md(t){if(Yr())return;const e=ns(location.href);e&&(Vn=Qn(Id,Ad),kd(e),Pd(e),t.integrations[e.name].enable&&(e.disableFunction=e.enableFunction()),Qr({name:Jr.INJECTION,onDisconnect:()=>{Vn==null||Vn.remove(),Vn=null,e.disableFunction()}}))}function $d(t){Md(t)}const ei=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Ud=ei+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",qd="["+ei+"]["+Ud+"]*",Hd=new RegExp("^"+qd+"$");function ti(t,e){const n=[];let r=e.exec(t);for(;r;){const a=[];a.startIndex=e.lastIndex-r[0].length;const s=r.length;for(let o=0;o<s;o++)a.push(r[o]);n.push(a),r=e.exec(t)}return n}const rs=function(t){const e=Hd.exec(t);return!(e===null||typeof e>"u")};function Gd(t){return typeof t<"u"}const Vd={allowBooleanAttributes:!1,unpairedTags:[]};function Wd(t,e){e=Object.assign({},Vd,e);const n=[];let r=!1,a=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let s=0;s<t.length;s++)if(t[s]==="<"&&t[s+1]==="?"){if(s+=2,s=Vs(t,s),s.err)return s}else if(t[s]==="<"){let o=s;if(s++,t[s]==="!"){s=Ws(t,s);continue}else{let u=!1;t[s]==="/"&&(u=!0,s++);let l="";for(;s<t.length&&t[s]!==">"&&t[s]!==" "&&t[s]!=="	"&&t[s]!==`
`&&t[s]!=="\r";s++)l+=t[s];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),s--),!Zd(l)){let v;return l.trim().length===0?v="Invalid space after '<'.":v="Tag '"+l+"' is an invalid name.",yt("InvalidTag",v,Gt(t,s))}const c=Xd(t,s);if(c===!1)return yt("InvalidAttr","Attributes for '"+l+"' have open quote.",Gt(t,s));let h=c.value;if(s=c.index,h[h.length-1]==="/"){const v=s-h.length;h=h.substring(0,h.length-1);const E=zs(h,e);if(E===!0)r=!0;else return yt(E.err.code,E.err.msg,Gt(t,v+E.err.line))}else if(u)if(c.tagClosed){if(h.trim().length>0)return yt("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",Gt(t,o));if(n.length===0)return yt("InvalidTag","Closing tag '"+l+"' has not been opened.",Gt(t,o));{const v=n.pop();if(l!==v.tagName){let E=Gt(t,v.tagStartPos);return yt("InvalidTag","Expected closing tag '"+v.tagName+"' (opened in line "+E.line+", col "+E.col+") instead of closing tag '"+l+"'.",Gt(t,o))}n.length==0&&(a=!0)}}else return yt("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",Gt(t,s));else{const v=zs(h,e);if(v!==!0)return yt(v.err.code,v.err.msg,Gt(t,s-h.length+v.err.line));if(a===!0)return yt("InvalidXml","Multiple possible root nodes found.",Gt(t,s));e.unpairedTags.indexOf(l)!==-1||n.push({tagName:l,tagStartPos:o}),r=!0}for(s++;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="!"){s++,s=Ws(t,s);continue}else if(t[s+1]==="?"){if(s=Vs(t,++s),s.err)return s}else break;else if(t[s]==="&"){const v=Qd(t,s);if(v==-1)return yt("InvalidChar","char '&' is not expected.",Gt(t,s));s=v}else if(a===!0&&!Gs(t[s]))return yt("InvalidXml","Extra text at the end",Gt(t,s));t[s]==="<"&&s--}}else{if(Gs(t[s]))continue;return yt("InvalidChar","char '"+t[s]+"' is not expected.",Gt(t,s))}if(r){if(n.length==1)return yt("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",Gt(t,n[0].tagStartPos));if(n.length>0)return yt("InvalidXml","Invalid '"+JSON.stringify(n.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return yt("InvalidXml","Start tag expected.",1);return!0}function Gs(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Vs(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const r=t.substr(n,e-n);if(e>5&&r==="xml")return yt("InvalidXml","XML declaration allowed only at the start of the document.",Gt(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Ws(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const zd='"',jd="'";function Xd(t,e){let n="",r="",a=!1;for(;e<t.length;e++){if(t[e]===zd||t[e]===jd)r===""?r=t[e]:r!==t[e]||(r="");else if(t[e]===">"&&r===""){a=!0;break}n+=t[e]}return r!==""?!1:{value:n,index:e,tagClosed:a}}const Yd=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function zs(t,e){const n=ti(t,Yd),r={};for(let a=0;a<n.length;a++){if(n[a][1].length===0)return yt("InvalidAttr","Attribute '"+n[a][2]+"' has no space in starting.",lr(n[a]));if(n[a][3]!==void 0&&n[a][4]===void 0)return yt("InvalidAttr","Attribute '"+n[a][2]+"' is without value.",lr(n[a]));if(n[a][3]===void 0&&!e.allowBooleanAttributes)return yt("InvalidAttr","boolean attribute '"+n[a][2]+"' is not allowed.",lr(n[a]));const s=n[a][2];if(!Jd(s))return yt("InvalidAttr","Attribute '"+s+"' is an invalid name.",lr(n[a]));if(!r.hasOwnProperty(s))r[s]=1;else return yt("InvalidAttr","Attribute '"+s+"' is repeated.",lr(n[a]))}return!0}function Kd(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function Qd(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,Kd(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function yt(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function Jd(t){return rs(t)}function Zd(t){return rs(t)}function Gt(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function lr(t){return t.startIndex+t[1].length}const eg={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t},captureMetaData:!1},tg=function(t){return Object.assign({},eg,t)};let Hr;typeof Symbol!="function"?Hr="@@xmlMetadata":Hr=Symbol("XML Node Metadata");class Nn{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e,n){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),n!==void 0&&(this.child[this.child.length-1][Hr]={startIndex:n})}static getMetaDataSymbol(){return Hr}}function ng(t,e){const n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let r=1,a=!1,s=!1,o="";for(;e<t.length;e++)if(t[e]==="<"&&!s){if(a&&kn(t,"!ENTITY",e)){e+=7;let u,l;[u,l,e]=rg(t,e+1),l.indexOf("&")===-1&&(n[u]={regx:RegExp(`&${u};`,"g"),val:l})}else if(a&&kn(t,"!ELEMENT",e)){e+=8;const{index:u}=sg(t,e+1);e=u}else if(a&&kn(t,"!ATTLIST",e))e+=8;else if(a&&kn(t,"!NOTATION",e)){e+=9;const{index:u}=ag(t,e+1);e=u}else if(kn(t,"!--",e))s=!0;else throw new Error("Invalid DOCTYPE");r++,o=""}else if(t[e]===">"){if(s?t[e-1]==="-"&&t[e-2]==="-"&&(s=!1,r--):r--,r===0)break}else t[e]==="["?a=!0:o+=t[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}const Cn=(t,e)=>{for(;e<t.length&&/\s/.test(t[e]);)e++;return e};function rg(t,e){e=Cn(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)n+=t[e],e++;if(as(n),e=Cn(t,e),t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported");let r="";return[e,r]=Or(t,e,"entity"),e--,[n,r,e]}function ag(t,e){e=Cn(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;as(n),e=Cn(t,e);const r=t.substring(e,e+6).toUpperCase();if(r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);e+=r.length,e=Cn(t,e);let a=null,s=null;if(r==="PUBLIC")[e,a]=Or(t,e,"publicIdentifier"),e=Cn(t,e),(t[e]==='"'||t[e]==="'")&&([e,s]=Or(t,e,"systemIdentifier"));else if(r==="SYSTEM"&&([e,s]=Or(t,e,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:a,systemIdentifier:s,index:--e}}function Or(t,e,n){let r="";const a=t[e];if(a!=='"'&&a!=="'")throw new Error(`Expected quoted string, found "${a}"`);for(e++;e<t.length&&t[e]!==a;)r+=t[e],e++;if(t[e]!==a)throw new Error(`Unterminated ${n} value`);return e++,[e,r]}function sg(t,e){e=Cn(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;if(!as(n))throw new Error(`Invalid element name: "${n}"`);e=Cn(t,e);let r="";if(t[e]==="E"&&kn(t,"MPTY",e))e+=4;else if(t[e]==="A"&&kn(t,"NY",e))e+=2;else if(t[e]==="("){for(e++;e<t.length&&t[e]!==")";)r+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${t[e]}"`);return{elementName:n,contentModel:r.trim(),index:e}}function kn(t,e,n){for(let r=0;r<e.length;r++)if(e[r]!==t[n+r+1])return!1;return!0}function as(t){if(rs(t))return t;throw new Error(`Invalid entity name ${t}`)}const og=/^[-+]?0x[a-fA-F0-9]+$/,ig=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,ug={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function lg(t,e={}){if(e=Object.assign({},ug,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(t==="0")return 0;if(e.hex&&og.test(n))return gg(n,16);if(n.search(/.+[eE].+/)!==-1)return pg(t,n,e);{const r=ig.exec(n);if(r){const a=r[1]||"",s=r[2];let o=dg(r[3]);const u=a?t[s.length+1]===".":t[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!u))return t;{const l=Number(n),c=String(l);if(l===0)return l;if(c.search(/[eE]/)!==-1)return e.eNotation?l:t;if(n.indexOf(".")!==-1)return c==="0"||c===o||c===`${a}${o}`?l:t;let h=s?o:n;return s?h===c||a+h===c?l:t:h===c||h===a+c?l:t}}else return t}}const cg=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function pg(t,e,n){if(!n.eNotation)return t;const r=e.match(cg);if(r){let a=r[1]||"";const s=r[3].indexOf("e")===-1?"E":"e",o=r[2],u=a?t[o.length+1]===s:t[o.length]===s;return o.length>1&&u?t:o.length===1&&(r[3].startsWith(`.${s}`)||r[3][0]===s)?Number(e):n.leadingZeros&&!u?(e=(r[1]||"")+r[3],Number(e)):t}else return t}function dg(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function gg(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function fg(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const n of t)if(typeof n=="string"&&e===n||n instanceof RegExp&&n.test(e))return!0}:()=>!1}class hg{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=mg,this.parseXml=wg,this.parseTextData=vg,this.resolveNameSpace=Eg,this.buildAttributesMap=Tg,this.isItStopNode=Cg,this.replaceEntitiesValue=Ag,this.readStopNodeData=Sg,this.saveTextToParentTag=yg,this.addChild=_g,this.ignoreAttributesFn=fg(this.options.ignoreAttributes)}}function mg(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:t[r]}}}function vg(t,e,n,r,a,s,o){if(t!==void 0&&(this.options.trimValues&&!r&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));const u=this.options.tagValueProcessor(e,t,n,a,s);return u==null?t:typeof u!=typeof t||u!==t?u:this.options.trimValues?Ua(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Ua(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Eg(t){if(this.options.removeNSPrefix){const e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}const bg=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Tg(t,e,n){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const r=ti(t,bg),a=r.length,s={};for(let o=0;o<a;o++){const u=this.resolveNameSpace(r[o][1]);if(this.ignoreAttributesFn(u,e))continue;let l=r[o][4],c=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const h=this.options.attributeValueProcessor(u,l,e);h==null?s[c]=l:typeof h!=typeof l||h!==l?s[c]=h:s[c]=Ua(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[c]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=s,o}return s}}const wg=function(t){t=t.replace(/\r\n?/g,`
`);const e=new Nn("!xml");let n=e,r="",a="";for(let s=0;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="/"){const u=On(t,">",s,"Closing Tag is not closed.");let l=t.substring(s+2,u).trim();if(this.options.removeNSPrefix){const v=l.indexOf(":");v!==-1&&(l=l.substr(v+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&(r=this.saveTextToParentTag(r,n,a));const c=a.substring(a.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let h=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(h=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):h=a.lastIndexOf("."),a=a.substring(0,h),n=this.tagsNodeStack.pop(),r="",s=u}else if(t[s+1]==="?"){let u=$a(t,s,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,a),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const l=new Nn(u.tagName);l.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(l[":@"]=this.buildAttributesMap(u.tagExp,a,u.tagName)),this.addChild(n,l,a,s)}s=u.closeIndex+1}else if(t.substr(s+1,3)==="!--"){const u=On(t,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){const l=t.substring(s+4,u-2);r=this.saveTextToParentTag(r,n,a),n.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}s=u}else if(t.substr(s+1,2)==="!D"){const u=ng(t,s);this.docTypeEntities=u.entities,s=u.i}else if(t.substr(s+1,2)==="!["){const u=On(t,"]]>",s,"CDATA is not closed.")-2,l=t.substring(s+9,u);r=this.saveTextToParentTag(r,n,a);let c=this.parseTextData(l,n.tagname,a,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):n.add(this.options.textNodeName,c),s=u+2}else{let u=$a(t,s,this.options.removeNSPrefix),l=u.tagName;const c=u.rawTagName;let h=u.tagExp,v=u.attrExpPresent,E=u.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,a,!1));const w=n;w&&this.options.unpairedTags.indexOf(w.tagname)!==-1&&(n=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),l!==e.tagname&&(a+=a?"."+l:l);const L=s;if(this.isItStopNode(this.options.stopNodes,a,l)){let R="";if(h.length>0&&h.lastIndexOf("/")===h.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),h=l):h=h.substr(0,h.length-1),s=u.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)s=u.closeIndex;else{const m=this.readStopNodeData(t,c,E+1);if(!m)throw new Error(`Unexpected end of ${c}`);s=m.i,R=m.tagContent}const B=new Nn(l);l!==h&&v&&(B[":@"]=this.buildAttributesMap(h,a,l)),R&&(R=this.parseTextData(R,l,a,!0,v,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),B.add(this.options.textNodeName,R),this.addChild(n,B,a,L)}else{if(h.length>0&&h.lastIndexOf("/")===h.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),h=l):h=h.substr(0,h.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const R=new Nn(l);l!==h&&v&&(R[":@"]=this.buildAttributesMap(h,a,l)),this.addChild(n,R,a,L),a=a.substr(0,a.lastIndexOf("."))}else{const R=new Nn(l);this.tagsNodeStack.push(n),l!==h&&v&&(R[":@"]=this.buildAttributesMap(h,a,l)),this.addChild(n,R,a,L),n=R}r="",s=E}}else r+=t[s];return e.child};function _g(t,e,n,r){this.options.captureMetaData||(r=void 0);const a=this.options.updateTag(e.tagname,n,e[":@"]);a===!1||(typeof a=="string"&&(e.tagname=a),t.addChild(e,r))}const Ag=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function yg(t,e,n,r){return t&&(r===void 0&&(r=e.child.length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function Cg(t,e,n){const r="*."+n;for(const a in t){const s=t[a];if(r===s||e===s)return!0}return!1}function Dg(t,e,n=">"){let r,a="";for(let s=e;s<t.length;s++){let o=t[s];if(r)o===r&&(r="");else if(o==='"'||o==="'")r=o;else if(o===n[0])if(n[1]){if(t[s+1]===n[1])return{data:a,index:s}}else return{data:a,index:s};else o==="	"&&(o=" ");a+=o}}function On(t,e,n,r){const a=t.indexOf(e,n);if(a===-1)throw new Error(r);return a+e.length-1}function $a(t,e,n,r=">"){const a=Dg(t,e+1,r);if(!a)return;let s=a.data;const o=a.index,u=s.search(/\s/);let l=s,c=!0;u!==-1&&(l=s.substring(0,u),s=s.substring(u+1).trimStart());const h=l;if(n){const v=l.indexOf(":");v!==-1&&(l=l.substr(v+1),c=l!==a.data.substr(v+1))}return{tagName:l,tagExp:s,closeIndex:o,attrExpPresent:c,rawTagName:h}}function Sg(t,e,n){const r=n;let a=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const s=On(t,">",n,`${e} is not closed`);if(t.substring(n+2,s).trim()===e&&(a--,a===0))return{tagContent:t.substring(r,n),i:s};n=s}else if(t[n+1]==="?")n=On(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=On(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=On(t,"]]>",n,"StopNode is not closed.")-2;else{const s=$a(t,n,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&a++,n=s.closeIndex)}}function Ua(t,e,n){if(e&&typeof t=="string"){const r=t.trim();return r==="true"?!0:r==="false"?!1:lg(t,n)}else return Gd(t)?t:""}const Ia=Nn.getMetaDataSymbol();function xg(t,e){return ni(t,e)}function ni(t,e,n){let r;const a={};for(let s=0;s<t.length;s++){const o=t[s],u=Lg(o);let l="";if(n===void 0?l=u:l=n+"."+u,u===e.textNodeName)r===void 0?r=o[u]:r+=""+o[u];else{if(u===void 0)continue;if(o[u]){let c=ni(o[u],e,l);const h=Ig(c,e);o[Ia]!==void 0&&(c[Ia]=o[Ia]),o[":@"]?Rg(c,o[":@"],l,e):Object.keys(c).length===1&&c[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?c=c[e.textNodeName]:Object.keys(c).length===0&&(e.alwaysCreateTextNode?c[e.textNodeName]="":c=""),a[u]!==void 0&&a.hasOwnProperty(u)?(Array.isArray(a[u])||(a[u]=[a[u]]),a[u].push(c)):e.isArray(u,l,h)?a[u]=[c]:a[u]=c}}}return typeof r=="string"?r.length>0&&(a[e.textNodeName]=r):r!==void 0&&(a[e.textNodeName]=r),a}function Lg(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(r!==":@")return r}}function Rg(t,e,n,r){if(e){const a=Object.keys(e),s=a.length;for(let o=0;o<s;o++){const u=a[o];r.isArray(u,n+"."+u,!0,!0)?t[u]=[e[u]]:t[u]=e[u]}}}function Ig(t,e){const{textNodeName:n}=e,r=Object.keys(t).length;return!!(r===0||r===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}class Bg{constructor(e){this.externalEntities={},this.options=tg(e)}parse(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const s=Wd(e,n);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const r=new hg(this.options);r.addExternalEntities(this.externalEntities);const a=r.parseXml(e);return this.options.preserveOrder||a===void 0?a:xg(a,this.options)}addEntity(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}static getMetaDataSymbol(){return Nn.getMetaDataSymbol()}}var pr={exports:{}};/*! https://mths.be/he v1.2.0 by @mathias | MIT license */var Ng=pr.exports,js;function kg(){return js||(js=1,function(t,e){(function(n){var r=e,a=t&&t.exports==r&&t,s=typeof Cs=="object"&&Cs;(s.global===s||s.window===s)&&(n=s);var o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[\x01-\x7F]/g,l=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,c=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,h={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","	":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr",:"ordf",:"aacute",:"Aacute",:"agrave",:"Agrave",:"abreve",:"Abreve",:"acirc",:"Acirc",:"aring",:"angst",:"auml",:"Auml",:"atilde",:"Atilde",:"aogon",:"Aogon",:"amacr",:"Amacr",:"aelig",:"AElig","":"bscr","":"bopf","":"bfr","":"Bopf",:"Bscr","":"Bfr","":"cfr","":"cscr","":"copf",:"Cfr","":"Cscr",:"Copf",:"cacute",:"Cacute",:"ccirc",:"Ccirc",:"ccaron",:"Ccaron",:"cdot",:"Cdot",:"ccedil",:"Ccedil","":"incare","":"dfr","":"dd","":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf",:"dcaron",:"Dcaron",:"dstrok",:"Dstrok",:"eth",:"ETH","":"ee",:"escr","":"efr","":"eopf",:"Escr","":"Efr","":"Eopf",:"eacute",:"Eacute",:"egrave",:"Egrave",:"ecirc",:"Ecirc",:"ecaron",:"Ecaron",:"euml",:"Euml",:"edot",:"Edot",:"eogon",:"Eogon",:"emacr",:"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf",:"Fscr",:"fflig",:"ffilig",:"ffllig",:"filig",fj:"fjlig",:"fllig",:"fnof",:"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr",:"gacute",:"gbreve",:"Gbreve",:"gcirc",:"Gcirc",:"gdot",:"Gdot",:"Gcedil","":"hfr",:"planckh","":"hscr","":"hopf",:"Hscr",:"Hfr",:"Hopf",:"hcirc",:"Hcirc",:"hbar",:"hstrok",:"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf",:"Iscr",:"Im",:"iacute",:"Iacute",:"igrave",:"Igrave",:"icirc",:"Icirc",:"iuml",:"Iuml",:"itilde",:"Itilde",:"Idot",:"iogon",:"Iogon",:"imacr",:"Imacr",:"ijlig",:"IJlig",:"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf",:"jcirc",:"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr",:"kcedil",:"Kcedil","":"lfr","":"lscr",:"ell","":"lopf",:"Lscr","":"Lfr","":"Lopf",:"lacute",:"Lacute",:"lcaron",:"Lcaron",:"lcedil",:"Lcedil",:"lstrok",:"Lstrok",:"lmidot",:"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf",:"Mscr","":"nfr","":"nopf","":"nscr",:"Nopf","":"Nscr","":"Nfr",:"nacute",:"Nacute",:"ncaron",:"Ncaron",:"ntilde",:"Ntilde",:"ncedil",:"Ncedil","":"numero",:"eng",:"ENG","":"oopf","":"ofr",:"oscr","":"Oscr","":"Ofr","":"Oopf",:"ordm",:"oacute",:"Oacute",:"ograve",:"Ograve",:"ocirc",:"Ocirc",:"ouml",:"Ouml",:"odblac",:"Odblac",:"otilde",:"Otilde",:"oslash",:"Oslash",:"omacr",:"Omacr",:"oelig",:"OElig","":"pfr","":"pscr","":"popf",:"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr",:"Qopf",:"kgreen","":"rfr","":"ropf","":"rscr",:"Rscr",:"Re",:"Ropf",:"racute",:"Racute",:"rcaron",:"Rcaron",:"rcedil",:"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS",:"sacute",:"Sacute",:"scirc",:"Scirc",:"scaron",:"Scaron",:"scedil",:"Scedil",:"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf",:"tcaron",:"Tcaron",:"tcedil",:"Tcedil","":"trade",:"tstrok",:"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr",:"uacute",:"Uacute",:"ugrave",:"Ugrave",:"ubreve",:"Ubreve",:"ucirc",:"Ucirc",:"uring",:"Uring",:"uuml",:"Uuml",:"udblac",:"Udblac",:"utilde",:"Utilde",:"uogon",:"Uogon",:"umacr",:"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr",:"wcirc",:"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf",:"yacute",:"Yacute",:"ycirc",:"Ycirc",:"yuml",:"Yuml","":"zscr","":"zfr","":"zopf",:"Zfr",:"Zopf","":"Zscr",:"zacute",:"Zacute",:"zcaron",:"Zcaron",:"zdot",:"Zdot",:"imped",:"thorn",:"THORN",:"napos",:"alpha",:"Alpha",:"beta",:"Beta",:"gamma",:"Gamma",:"delta",:"Delta",:"epsi","":"epsiv",:"Epsilon",:"gammad",:"Gammad",:"zeta",:"Zeta",:"eta",:"Eta",:"theta",:"thetav",:"Theta",:"iota",:"Iota",:"kappa",:"kappav",:"Kappa",:"lambda",:"Lambda",:"mu",:"micro",:"Mu",:"nu",:"Nu",:"xi",:"Xi",:"omicron",:"Omicron",:"pi",:"piv",:"Pi",:"rho",:"rhov",:"Rho",:"sigma",:"Sigma",:"sigmaf",:"tau",:"Tau",:"upsi",:"Upsilon",:"Upsi",:"phi",:"phiv",:"Phi",:"chi",:"Chi",:"psi",:"Psi",:"omega",:"ohm",:"acy",:"Acy",:"bcy",:"Bcy",:"vcy",:"Vcy",:"gcy",:"Gcy",:"gjcy",:"GJcy",:"dcy",:"Dcy",:"djcy",:"DJcy",:"iecy",:"IEcy",:"iocy",:"IOcy",:"jukcy",:"Jukcy",:"zhcy",:"ZHcy",:"zcy",:"Zcy",:"dscy",:"DScy",:"icy",:"Icy",:"iukcy",:"Iukcy",:"yicy",:"YIcy",:"jcy",:"Jcy",:"jsercy",:"Jsercy",:"kcy",:"Kcy",:"kjcy",:"KJcy",:"lcy",:"Lcy",:"ljcy",:"LJcy",:"mcy",:"Mcy",:"ncy",:"Ncy",:"njcy",:"NJcy",:"ocy",:"Ocy",:"pcy",:"Pcy",:"rcy",:"Rcy",:"scy",:"Scy",:"tcy",:"Tcy",:"tshcy",:"TSHcy",:"ucy",:"Ucy",:"ubrcy",:"Ubrcy",:"fcy",:"Fcy",:"khcy",:"KHcy",:"tscy",:"TScy",:"chcy",:"CHcy",:"dzcy",:"DZcy",:"shcy",:"SHcy",:"shchcy",:"SHCHcy",:"hardcy",:"HARDcy",:"ycy",:"Ycy",:"softcy",:"SOFTcy",:"ecy",:"Ecy",:"yucy",:"YUcy",:"yacy",:"YAcy",:"aleph",:"beth",:"gimel",:"daleth"},v=/["&'<>`]/g,E={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},w=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,L=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,R=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,B={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup:"",Sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supe:"",supE:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supne:"",supnE:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",tau:"",Tau:"",tbrk:"",tcaron:"",Tcaron:"",tcedil:"",Tcedil:"",tcy:"",Tcy:"",tdot:"",telrec:"",tfr:"",Tfr:"",there4:"",therefore:"",Therefore:"",theta:"",Theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",thorn:"",THORN:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",tscr:"",Tscr:"",tscy:"",TScy:"",tshcy:"",TSHcy:"",tstrok:"",Tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",uacute:"",Uacute:"",uarr:"",uArr:"",Uarr:"",Uarrocir:"",ubrcy:"",Ubrcy:"",ubreve:"",Ubreve:"",ucirc:"",Ucirc:"",ucy:"",Ucy:"",udarr:"",udblac:"",Udblac:"",udhar:"",ufisht:"",ufr:"",Ufr:"",ugrave:"",Ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},m={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},A={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},d=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],i=String.fromCharCode,f={},g=f.hasOwnProperty,P=function(O,J){return g.call(O,J)},W=function(O,J){for(var X=-1,Be=O.length;++X<Be;)if(O[X]==J)return!0;return!1},$=function(O,J){if(!O)return J;var X={},Be;for(Be in J)X[Be]=P(O,Be)?O[Be]:J[Be];return X},ve=function(O,J){var X="";return O>=55296&&O<=57343||O>1114111?(J&&N("character reference outside the permissible Unicode range"),""):P(A,O)?(J&&N("disallowed character reference"),A[O]):(J&&W(d,O)&&N("disallowed character reference"),O>65535&&(O-=65536,X+=i(O>>>10&1023|55296),O=56320|O&1023),X+=i(O),X)},Z=function(O){return"&#x"+O.toString(16).toUpperCase()+";"},fe=function(O){return"&#"+O+";"},N=function(O){throw Error("Parse error: "+O)},x=function(O,J){J=$(J,x.options);var X=J.strict;X&&L.test(O)&&N("forbidden code point");var Be=J.encodeEverything,re=J.useNamedReferences,V=J.allowUnsafeSymbols,Q=J.decimal?fe:Z,Ee=function(ee){return Q(ee.charCodeAt(0))};return Be?(O=O.replace(u,function(ee){return re&&P(h,ee)?"&"+h[ee]+";":Ee(ee)}),re&&(O=O.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),re&&(O=O.replace(c,function(ee){return"&"+h[ee]+";"}))):re?(V||(O=O.replace(v,function(ee){return"&"+h[ee]+";"})),O=O.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),O=O.replace(c,function(ee){return"&"+h[ee]+";"})):V||(O=O.replace(v,Ee)),O.replace(o,function(ee){var be=ee.charCodeAt(0),ye=ee.charCodeAt(1),De=(be-55296)*1024+ye-56320+65536;return Q(De)}).replace(l,Ee)};x.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var F=function(O,J){J=$(J,F.options);var X=J.strict;return X&&w.test(O)&&N("malformed character reference"),O.replace(R,function(Be,re,V,Q,Ee,ee,be,ye,De){var we,Me,xe,Ne,Ke,Qe;return re?(Ke=re,B[Ke]):V?(Ke=V,Qe=Q,Qe&&J.isAttributeValue?(X&&Qe=="="&&N("`&` did not start a character reference"),Be):(X&&N("named character reference was not terminated by a semicolon"),m[Ke]+(Qe||""))):Ee?(xe=Ee,Me=ee,X&&!Me&&N("character reference was not terminated by a semicolon"),we=parseInt(xe,10),ve(we,X)):be?(Ne=be,Me=ye,X&&!Me&&N("character reference was not terminated by a semicolon"),we=parseInt(Ne,16),ve(we,X)):(X&&N("named character reference was not terminated by a semicolon"),Be)})};F.options={isAttributeValue:!1,strict:!1};var j=function(O){return O.replace(v,function(J){return E[J]})},Y={version:"1.2.0",encode:x,decode:F,escape:j,unescape:F};if(r&&!r.nodeType)if(a)a.exports=Y;else for(var K in Y)P(Y,K)&&(r[K]=Y[K]);else n.he=Y})(Ng)}(pr,pr.exports)),pr.exports}var Og=kg();const Fg=go(Og),Ba={OK:"OK",ERROR:"ERROR",LOGIN_REQUIRED:"LOGIN_REQUIRED"},Na={BOT_DETECTED:"Sign in to confirm you're not a bot",AGE_RESTRICTED:"This video may be inappropriate for some users.",VIDEO_UNAVAILABLE:"This video is unavailable"},Pg=["strong","em","b","i","mark","small","del","ins","sub","sup"],Mg=["zh-CN","zh-TW","zh-Hant","zh-Hans","zh","ja","ko","ja-JP","ko-KR"];class Xs{constructor(e){ke(this,"videoId",null);ke(this,"_preserveFormatting",!1);ke(this,"innertubeData",null);ke(this,"captionsJson",null);ke(this,"captionLanguage","");ke(this,"url","");ke(this,"adCallback",null);ke(this,"adObserver",null);ke(this,"containerObserver",null);this.videoId=(e==null?void 0:e.videoId)||null,this._preserveFormatting=e.preserveFormatting||!1}async fetchCaption(){this.innertubeData||(this.innertubeData=await this._getInnertubeData()),this.captionsJson=this._extractCaptionJson(this.innertubeData);const e=this._selectBestCaption(this.captionsJson);if(!e)return Ue.info(`No subtitle found for video: ${this.videoId}`),[];this.captionLanguage=e.languageCode;const n=await this._getCaptionXml(e),r=this._parseCaptionXml(n);return this.formatSubtitle(r)}async fetchSubtitle(e){const n=this.getManualSubtitleLanguage(),r=e==null?void 0:e.split("-")[0];if(this.url&&(n!=null&&n.includes(r)))return this._fetchManualSubtitle(r);let a=this._selectBestCaption(this.captionsJson,e);if(!a&&r&&(a=this._selectBestCaption(this.captionsJson,r)),!a)return[];const s=await this._getCaptionXml(a),o=this._parseCaptionXml(s);return o!=null&&o.length?this.formatSubtitle(o):[]}async _fetchManualSubtitle(e){const r={"zh-CN":"zh-Hans","zh-TW":"zh-Hant"}[e]||e;if(r)try{const a=`${this.url}&tlang=${r}`,o=await(await fetch(a,{method:"GET"})).json();return Ue.success("_fetchManualSubtitle data",o),(o==null?void 0:o.events)||[]}catch{return[]}return[]}getManualSubtitleLanguage(){var e;return((e=this.captionsJson)==null?void 0:e.filter(n=>(n==null?void 0:n.kind)!=="asr").map(n=>n==null?void 0:n.languageCode))||[]}processInterceptorData(e){var n;try{const r=JSON.parse(e.data);return this.url=typeof e.url=="string"?e.url:JSON.stringify(e.url),Ue.success("",r,this.url),((n=r==null?void 0:r.events)==null?void 0:n.length)===0?[]:this.formatInterceptorData(r.events,e.language)}catch{return[]}}formatInterceptorData(e,n){try{const a=e.filter(o=>o.segs&&o.segs.length>0&&(o==null?void 0:o.tStartMs)&&(o==null?void 0:o.dDurationMs)).map(o=>this._createCaptionItem(o,n));if(a.length===0)return[];for(let o=0;o<a.length-1;o++){const u=a[o],l=a[o+1];u.end===l.end&&(u.text+=` ${l.text}`,u.duration=u.end-u.start,a.splice(o+1,1),o--)}const s=a.map((o,u)=>{const l=Number(o.start)/1e3,c=Number(o.duration)/1e3,h=Number(o.end)/1e3;return{text:o.text,start:l,duration:c,end:h,index:u}}).filter(o=>o!==null);return this.formatSubtitle(s)}catch{return[]}}formatSubtitle(e){if((e==null?void 0:e.length)===0)return[];for(let n=0;n<e.length-2;n++){const r=e[n],a=e[n+1],s=e[n+2];this._isFloatEqual(r.start+r.duration,s.start)&&(r.text+=` ${a.text}`,r.duration=Math.round((s.start-r.start)*1e3)/1e3,r.end=Math.round((r.start+r.duration)*1e3)/1e3,e.splice(n+1,1),n--)}return e}getCaptionLanguage(){return this.captionLanguage}setVideoInfo(e){if(!e)return;const n=typeof e=="string"?JSON.parse(e):e;this.innertubeData=n}hasAds(){var e,n;return((n=(e=this.innertubeData)==null?void 0:e.adPlacements)==null?void 0:n.length)>0}initAdDetector(e){this.adCallback=e,this.initAdObserver()}initAdObserver(){var n;this.adObserver=new MutationObserver(r=>{let a=!1;r.forEach(s=>{s.type==="childList"&&(a=this.checkAdElementChanges(s))}),a&&this.checkAdStatus()});const e=document.querySelector(".video-ads")||document.querySelector(".ytp-ad-module");e&&((n=this.adObserver)==null||n.observe(e,{childList:!0,subtree:!0})),this.checkAdStatus()}checkAdElementChanges(e){return Array.from(e.addedNodes).length>0||Array.from(e.removedNodes).length>0}checkAdStatus(){var r,a,s;const e=document.querySelector(".video-ads"),n=!!((r=e==null?void 0:e.innerHTML)!=null&&r.trim()||(a=e==null?void 0:e.textContent)!=null&&a.trim());(s=this.adCallback)==null||s.onAdStatusChange(n)}destroyAdDetector(){this.adObserver&&(this.adObserver.disconnect(),this.adObserver=null),this.containerObserver&&(this.containerObserver.disconnect(),this.containerObserver=null),this.adCallback=null}getVideoInfo(){var e;return((e=this.innertubeData)==null?void 0:e.videoDetails)||{}}_selectBestCaption(e,n){if(!e||e.length===0)return null;if(n)return e.find(s=>s.languageCode===n&&s.kind!=="asr");if(e.length===1)return e[0];const r=this._formatCaptionLanguage();let a=e.find(s=>s.languageCode===r&&s.kind!=="asr");return a||(a=e.find(s=>s.languageCode===r||s.languageCode==="en")),a||(a=e[0]),a}async _getInnertubeData(){return await(await fetch("https://www.youtube.com/youtubei/v1/player",{method:"POST",body:JSON.stringify({contentCheckOk:!1,context:{client:{clientName:"WEB_EMBEDDED_PLAYER",clientVersion:"1.20241009.01.00"}},videoId:this.videoId})})).json()}_extractCaptionJson(e){var r,a;try{this._isAvailable(e.playabilityStatus)}catch{return[]}const n=(a=(r=e.captions)==null?void 0:r.playerCaptionsTracklistRenderer)==null?void 0:a.captionTracks;return n||(Ue.info(`Transcripts disabled for video: ${this.videoId}`),[])}_isAvailable(e){var r,a,s;const n=e==null?void 0:e.status;if(n!==Ba.OK&&n!=null){const o=e.reason;if(n===Ba.LOGIN_REQUIRED){if(o===Na.BOT_DETECTED)throw new Error(`Request blocked for video: ${this.videoId}`);if(o===Na.AGE_RESTRICTED)throw new Error(`Age restricted for video: ${this.videoId}`)}if(n===Ba.ERROR&&o===Na.VIDEO_UNAVAILABLE)throw new Error(`Video unavailable: ${this.videoId}`);const u=((s=(a=(r=e.errorScreen)==null?void 0:r.playerErrorMessageRenderer)==null?void 0:a.subreason)==null?void 0:s.runs)||[];throw new Error(`Video unplayable: ${this.videoId}, reason: ${o}, subreasons: ${u.map(l=>l.text||"").join(", ")}`)}}async _getCaptionXml(e){return await(await fetch(e.baseUrl,{method:"GET"})).text()}_parseCaptionXml(e){var o;const a=((o=new Bg({ignoreAttributes:!1,attributeNamePrefix:""}).parse(e).transcript)==null?void 0:o.text)||[],s=this._getHtmlRegex();return a.map(u=>{const l=typeof u["#text"]=="string"?u["#text"]:JSON.stringify(u);return{text:l?Fg.unescape(l).replace(s,""):"",start:parseFloat(u.start),duration:parseFloat(u.dur||"0.0")}}).filter(u=>u.text)}_getHtmlRegex(){if(this._preserveFormatting){const e=Pg.join("|");return new RegExp(`<\\/?(?!\\/?(?:${e})\\b).*?\\b>`,"gi")}return/<[^>]*>/gi}_isFloatEqual(e,n,r=.001){return Math.abs(e-n)<r}_needsSpaceJoining(e){return!Mg.includes(e)}_createCaptionItem(e,n){var s;const a=this._needsSpaceJoining(n)?" ":"";return{text:((s=e.segs)==null?void 0:s.map(o=>{var u;return(u=o.utf8)==null?void 0:u.replace(/\n/g," ")}).join(a))||"",start:Number(e.tStartMs),duration:Number(e.dDurationMs),end:Number(e.tStartMs)+Number(e.dDurationMs)}}_formatCaptionLanguage(){let e=navigator.language;return(e==="zh-TW"||e==="zh-HK")&&(e="zh-Hant"),e}}const Hn=()=>{},$g={"zh-Hant":"zh-TW","en-US":"en"};class Ug{constructor(e){ke(this,"videoPlatform","youtube");ke(this,"translationService",vn.GOOGLE);ke(this,"captionLanguage","");ke(this,"targetLanguage","");ke(this,"useManualSubtitle",!0);ke(this,"displayMode",cn.BILINGUAL);ke(this,"videoElement",null);ke(this,"captionElement",null);ke(this,"subtitleElement",null);ke(this,"subtitleExtractor",null);ke(this,"captionList",[]);ke(this,"subtitleList",[]);ke(this,"isPlaying",!1);ke(this,"lastRenderedTime",-1);ke(this,"renderThrottleTimer",null);ke(this,"currentSubtitle",{caption:"",subtitle:""});ke(this,"translatedCount",0);ke(this,"batchSize",10);ke(this,"translateErrorcount",0);ke(this,"pauseTranslation",!1);ke(this,"isTranslating",!1);ke(this,"needTranslate",!0);ke(this,"translationQueue",[]);ke(this,"preloadThreshold",15);ke(this,"stopRender",!1);ke(this,"isAdPlaying",!1);ke(this,"captionCallbackCalled",!1);ke(this,"translationCallback",Hn);ke(this,"captionStatusCallback",Hn);ke(this,"captionEntryTriggerCallback",Hn);ke(this,"isInitialized",!1);ke(this,"isDownloadingSubtitle",!1);ke(this,"boundEventHandlers",{play:()=>this.handlePlay(),pause:()=>this.handlePause(),timeupdate:()=>this.handleTimeUpdate(),seeked:()=>this.handleSeeked()});this.isInitialized&&this.destroy(),this.initInterceptor(),this.videoPlatform=e.videoPlatform||"youtube",this.translationService=e.translationService,this.targetLanguage=e.targetLanguage,this.useManualSubtitle=e.useManualSubtitle??!0,this.displayMode=e.displayMode||cn.BILINGUAL,this.videoElement=e.videoElement,this.captionElement=e.captionElement,this.subtitleElement=e.subtitleElement,this.translationCallback=e.translationCallback||Hn,this.captionStatusCallback=e.captionStatusCallback||Hn,this.captionEntryTriggerCallback=e.captionEntryTriggerCallback||Hn,Ue.info("this.videoPlatform",this.videoPlatform)}initInterceptor(){window.addEventListener("message",e=>{if(e.source===window&&e.origin===window.location.origin){if(e.data.eventType==="ANYDOC_SUBTITLE_DATA"&&e.data.source==="inject"){this.captionCallbackCalled||(this.captionCallbackCalled=!0,this.captionStatusCallback({hasCaption:!0}));const n=e.data.data;(n==null?void 0:n.language)===this.targetLanguage?this.useManualSubtitle&&this.subtitleList.length!==this.captionList.length&&this.processInterceptorSubtitleData(n,"subtitle"):this.processInterceptorSubtitleData(n,"caption")}else if(e.data.eventType==="ANYDOC_VIDEO_INFO"&&e.data.source==="inject"){const n=e.data.data;dt(ge.SUBTITLE_TRANSLATE_VIDEO_INFO,n)}}})}async processInterceptorSubtitleData(e,n){var r,a;try{this.subtitleExtractor=new Xs({}),n==="subtitle"?(this.subtitleList=this.subtitleExtractor.processInterceptorData(e),this.needTranslate=((r=this.subtitleList)==null?void 0:r.length)===0):(this.captionList=this.subtitleExtractor.processInterceptorData(e),this.captionList.length>0&&(this.preloadSubtitles(),this.captionCallbackCalled||(this.captionCallbackCalled=!0,this.captionStatusCallback({hasCaption:!0})),this.captionLanguage=e.language,Ue.success("",this.captionLanguage,this.captionList.length),this.initializeSubtitles()),this.useManualSubtitle&&this.needTranslate&&(this.subtitleList=await this.subtitleExtractor.fetchSubtitle(this.targetLanguage),this.needTranslate=((a=this.subtitleList)==null?void 0:a.length)===0))}catch{}}async processVideoInfoData(){var e;try{const n=await We(ge.SUBTITLE_TRANSLATE_VIDEO_INFO),r=JSON.parse((n==null?void 0:n.data)||"{}");switch(Kn(ge.SUBTITLE_TRANSLATE_VIDEO_INFO),this.videoPlatform){case"youtube":(e=this.subtitleExtractor)==null||e.setVideoInfo(r);break;default:Ue.info(":",n==null?void 0:n.site)}}catch{}}async init(){this.setupVideoEventListeners(),this.processVideoInfoData(),setTimeout(()=>{this.captionList.length||this.captionEntryTriggerCallback&&this.captionEntryTriggerCallback()},3e3),setTimeout(()=>{this.captionList.length||this.fallbackToTraditionalMethod()},5e3),this.isInitialized=!0}async fallbackToTraditionalMethod(){var n,r,a;const e=new URL(location.href).searchParams.get("v")||"";this.subtitleExtractor=new Xs({videoId:e}),this.captionList=await this.subtitleExtractor.fetchCaption(),this.captionLanguage=((n=this.subtitleExtractor)==null?void 0:n.getCaptionLanguage())||"",this.preloadSubtitles(),(r=this.subtitleExtractor)!=null&&r.hasAds()&&((a=this.subtitleExtractor)==null||a.initAdDetector({onAdStatusChange:s=>{this.isAdPlaying=s}})),Ue.success("",this.captionLanguage,this.targetLanguage),await this.initializeSubtitles()}async initializeSubtitles(){var e;this.useManualSubtitle&&this.subtitleExtractor&&(this.subtitleList=await this.subtitleExtractor.fetchSubtitle(this.targetLanguage),this.needTranslate=((e=this.subtitleList)==null?void 0:e.length)===0),this.isSameLanguage(this.captionLanguage,this.targetLanguage)&&(this.subtitleList=this.captionList,this.needTranslate=!1)}isSameLanguage(e,n){return e===n||$g[e]===n}setupVideoEventListeners(){Object.entries(this.boundEventHandlers).forEach(([e,n])=>{var r;(r=this.videoElement)==null||r.addEventListener(e,n)})}handlePlay(){this.isPlaying=!0,this.startSubtitleRendering()}handlePause(){this.isPlaying=!1,this.stopSubtitleRendering()}handleTimeUpdate(){var e,n,r;this.isPlaying||(this.isPlaying=!!this.videoElement&&!((e=this.videoElement)!=null&&e.paused)&&!((n=this.videoElement)!=null&&n.ended)&&((r=this.videoElement)==null?void 0:r.readyState)>=2),this.isPlaying&&!this.stopRender&&this.processVideoUpdate()}handleSeeked(){this.stopRender||(this.lastRenderedTime=-1,this.processVideoUpdate())}processVideoUpdate(){this.checkAndRenderSubtitle(),this.checkTranslationQueue()}startSubtitleRendering(){this.stopRender||this.isAdPlaying||(this.stopSubtitleRendering(),this.renderSubtitleLoop())}stopSubtitleRendering(){this.renderThrottleTimer&&(clearTimeout(this.renderThrottleTimer),this.renderThrottleTimer=null)}renderSubtitleLoop(){!this.isPlaying||this.isAdPlaying||(this.processVideoUpdate(),this.renderThrottleTimer=setTimeout(()=>{this.renderSubtitleLoop()},200))}async checkAndRenderSubtitle(){var r;if(this.isAdPlaying)return;const e=((r=this.videoElement)==null?void 0:r.currentTime)||0;if(Math.abs(e-this.lastRenderedTime)<.1)return;const n=this.getSubtitleText(e);(n.caption!==this.currentSubtitle.caption||n.subtitle!==this.currentSubtitle.subtitle)&&(this.currentSubtitle=n,this.renderSubtitle(n),this.lastRenderedTime=e)}getSubtitleText(e){var o,u;if(!((o=this.captionList)!=null&&o.length))return{caption:"",subtitle:""};const n=this.findSubtitleIndex(e,this.captionList);if(n===-1)return{caption:"",subtitle:""};const a=this.captionList[n].text;let s="";if(((u=this.subtitleList)==null?void 0:u.length)>n){const l=this.subtitleList[n];l!=null&&l.text&&(s=l.text)}return{caption:a,subtitle:s}}findSubtitleIndex(e,n){let r=0,a=n.length-1;for(;r<=a;){const s=Math.floor((r+a)/2),o=n[s];if(e>=o.start&&e<o.end)return s;e<o.start?a=s-1:r=s+1}return-1}async renderSubtitle(e){const{caption:n,subtitle:r}=e;if(this.isSameLanguage(this.captionLanguage,this.targetLanguage)){this.updateSingleCaption(n,"");return}if(r&&r.trim()){this.updateSingleCaption(n,r);return}this.updateSingleCaption(n,"")}updateSingleCaption(e,n=""){const r=e.trim(),a=n.trim();if(this.captionElement){this.captionElement.innerText=e;const s=this.displayMode===cn.BILINGUAL&&r;this.captionElement.style.display=s?"block":"none"}this.subtitleElement&&(a?(this.subtitleElement.innerText=n,this.subtitleElement.style.display="block"):this.subtitleElement.style.display="none")}checkTranslationQueue(){var s;if(!this.needTranslate||this.isTranslating||this.pauseTranslation)return;const e=((s=this.videoElement)==null?void 0:s.currentTime)||0,n=this.findSubtitleIndex(e,this.captionList);if(n===-1)return;const r=n+1,a=Math.min(n+this.preloadThreshold,this.captionList.length);for(let o=r;o<a;o++)!this.isSubtitleTranslated(o)&&!this.translationQueue.includes(o)&&this.translationQueue.push(o);this.translationQueue.length>=this.batchSize&&this.processTranslationQueue()}async processTranslationQueue(e=""){if(!(this.isTranslating||this.translationQueue.length===0||this.pauseTranslation)){this.isTranslating=!0;try{const n=this.translationQueue.splice(0,this.batchSize),r=n.map(s=>this.captionList[s].text);Ue.info(` ${r.length}  :${this.translationService}`);const a=await this.batchTranslateSubtitles(r);this.updateTranslationResults(n,a),this.translatedCount+=n.length,Ue.success(` ${n.length} `)}catch{this.translateErrorcount++,this.translationQueue.push(...this.translationQueue.splice(0,this.batchSize))}finally{this.isTranslating=!1,this.translationQueue.length>0&&(e==="all"?await this.processTranslationQueue(e):setTimeout(()=>this.processTranslationQueue(e),1e3))}}}updateTranslationResults(e,n){e.forEach((r,a)=>{const s=this.captionList[r];for(;this.subtitleList.length<=r;)this.subtitleList.push({start:s.start,duration:s.duration,text:"",end:s.end,index:r});this.subtitleList[r]={start:s.start,duration:s.duration,text:n[a]||"",end:s.end,index:r}})}async batchTranslateSubtitles(e){return new Promise(async(n,r)=>{var s;if(e.length===0){n([]);return}const a=this.targetLanguage;try{const o=await nr({service:this.translationService,texts:e.map(u=>({text:u})),from:"",to:a,type:G.SUBTITLE},{position:"plugin_subtitle_translate",feature:"plugin_subtitle_translate"});(o==null?void 0:o.code)!==0&&(this.translationCallback({error:o}),r(o)),a!==this.targetLanguage&&n([]),n(((s=o==null?void 0:o.data)==null?void 0:s.map(u=>u.text))||e.map(()=>""))}catch(o){this.translationCallback({error:o}),n([])}})}async translateAllSubtitles(){if(this.captionList.length===0)return;await this.waitForTranslationComplete();const e=[];for(let n=0;n<this.captionList.length;n++)this.isSubtitleTranslated(n)||e.push(n);e.length!==0&&(this.translationQueue.push(...e),await this.processTranslationQueue("all"),await this.waitForTranslationComplete())}async waitForTranslationComplete(){return new Promise(e=>{const n=()=>{!this.isTranslating&&this.translationQueue.length===0?e():setTimeout(n,200)};n()})}preloadSubtitles(){const e=n=>{n.length>0&&n.forEach((r,a)=>{r.end=Math.round((r.start+r.duration)*1e3)/1e3,r.index=a})};e(this.captionList),e(this.subtitleList)}isSubtitleTranslated(e){var n,r;return e<0||e>=this.subtitleList.length?!1:!!((r=(n=this.subtitleList[e])==null?void 0:n.text)!=null&&r.trim())}hasCaption(){var e;return((e=this.captionList)==null?void 0:e.length)>0}pauseRendering(){this.stopRender=!0}resumeRendering(){this.stopRender=!1}cancelTranslate(){this.pauseTranslation=!0}destroy(){var e;this.stopSubtitleRendering(),(e=this.subtitleExtractor)==null||e.destroyAdDetector(),this.subtitleExtractor=null,this.captionList=[],this.subtitleList=[],this.translationQueue=[],this.captionLanguage="",this.targetLanguage="",this.useManualSubtitle=!0,this.isInitialized=!1,this.isPlaying=!1,this.lastRenderedTime=-1,this.currentSubtitle={caption:"",subtitle:""},this.translatedCount=0,this.translateErrorcount=0,this.pauseTranslation=!1,this.isTranslating=!1,this.needTranslate=!0,this.stopRender=!1,this.isAdPlaying=!1,this.videoElement&&Object.entries(this.boundEventHandlers).forEach(([n,r])=>{var a;(a=this.videoElement)==null||a.removeEventListener(n,r)})}formatTime(e){const n=Math.floor(e/3600),r=Math.floor(e%3600/60),a=Math.floor(e%60),s=Math.floor(e%1*1e3);return`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")},${s.toString().padStart(3,"0")}`}downloadSubtitle(){return new Promise(async e=>{var n;if(!this.captionList||this.captionList.length===0){setTimeout(()=>{e({isCompleted:!1,error:!0,message:"no_subtitle_data"})},100);return}try{const r=(n=this.subtitleExtractor)==null?void 0:n.getVideoInfo();if(this.isDownloadingSubtitle){setTimeout(()=>{e({isCompleted:!1,error:!1,message:""})},100);return}if(this.needTranslate&&this.subtitleList.length<this.captionList.length)try{this.isDownloadingSubtitle=!0,await this.translateAllSubtitles()}catch{this.isDownloadingSubtitle=!1,setTimeout(()=>{e({isCompleted:!1,error:!0,message:"translate_failed"})},100);return}e({isCompleted:!0,error:!1,message:""}),setTimeout(()=>{var o;const a=this.generateSrtContent(),s=(o=document.querySelector("yt-formatted-string.style-scope.ytd-watch-metadata"))==null?void 0:o.innerText;this.downloadSrtFile(a,(r==null?void 0:r.title)||s||"video"),this.isDownloadingSubtitle=!1},100)}catch(r){this.isDownloadingSubtitle=!1,setTimeout(()=>{e({isCompleted:!1,error:!0,message:(r==null?void 0:r.message)||"network_error"})},100)}})}generateSrtContent(){return this.captionList.map((e,n)=>{var l,c;const r=this.formatTime(e.start),a=this.formatTime(e.end),s=e.text.trim();let o="";this.subtitleList&&this.subtitleList.length>n&&(o=((c=(l=this.subtitleList[n])==null?void 0:l.text)==null?void 0:c.trim())||"");let u="";return this.displayMode===cn.BILINGUAL?u=o?`${s}
${o}`:s:u=o,`${n+1}
${r} --> ${a}
${u}
`}).join(`
`)}downloadSrtFile(e,n){const r=new Blob([e],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(r),s=document.createElement("a");s.id="subtitle-download-link",s.href=a,s.download=`${n}-${this.targetLanguage}-translation.srt`,s.style.display="none";const o=()=>{const u=document.getElementById("subtitle-download-link");u&&u.remove(),URL.revokeObjectURL(a)};s.addEventListener("click",()=>{setTimeout(o,100)}),document.body.appendChild(s),s.click()}setService(e){this.pauseTranslation=!1,this.translationService=e,this.needTranslate&&(this.subtitleList=[],this.translatedCount=0,this.translationQueue=[],this.isTranslating=!1,this.checkTranslationQueue())}async setTargetLanguage(e){var n,r;e!==this.targetLanguage&&(this.targetLanguage=e,e===this.captionLanguage?(this.needTranslate=!1,this.subtitleList=this.captionList):this.useManualSubtitle?(this.subtitleList=await((n=this.subtitleExtractor)==null?void 0:n.fetchSubtitle(this.targetLanguage))||[],this.needTranslate=((r=this.subtitleList)==null?void 0:r.length)===0):(this.needTranslate=!0,this.subtitleList=[]),this.needTranslate&&(this.translatedCount=0,this.translationQueue=[],this.isTranslating=!1,this.checkTranslationQueue()))}async setUseManualSubtitle(e){var n;if(e!==this.useManualSubtitle&&(this.useManualSubtitle=e,this.useManualSubtitle)){const r=await((n=this.subtitleExtractor)==null?void 0:n.fetchSubtitle(this.targetLanguage))||[];r.length>0&&(this.subtitleList=r,this.needTranslate=!1)}}setDisplayMode(e){this.displayMode=e,this.captionElement&&(this.captionElement.style.display=e===cn.BILINGUAL?"block":"none")}}const{userSettings:ri}=et(),{onlineParams:qg}=an();let En=null,it=null;const qa=new Set,tn=D(void 0),ss=D(!1),os=D(!1),is=D(!1),us=D(!1);Te(ri,(t,e)=>{e.subtitleTranslation.enable!==t.subtitleTranslation.enable&&(t.subtitleTranslation.enable?Hg():Gg()),t.subtitleTranslation.enable&&it&&mr(),e.subtitleTranslation.translationService!==t.subtitleTranslation.translationService&&(ai(),tn.value&&(tn.value.translationService=t.subtitleTranslation.translationService),it==null||it.setService(t.subtitleTranslation.translationService)),e.targetLanguage!==t.targetLanguage&&(tn.value&&(tn.value.targetLanguage=t.targetLanguage),it==null||it.setTargetLanguage(t.targetLanguage)),e.subtitleTranslation.useSiteSubtitle!==t.subtitleTranslation.useSiteSubtitle&&(tn.value&&(tn.value.useManualSubtitle=t.subtitleTranslation.useSiteSubtitle),it==null||it.setUseManualSubtitle(t.subtitleTranslation.useSiteSubtitle)),e.subtitleTranslation.displayMode!==t.subtitleTranslation.displayMode&&(tn.value&&(tn.value.displayMode=t.subtitleTranslation.displayMode),it==null||it.setDisplayMode(t.subtitleTranslation.displayMode))});const ai=()=>{ss.value=!1,os.value=!1,us.value=!1,is.value=!1},mr=()=>{if(En){const t=document.querySelector(En.originCaptionSelector);t&&(t.style.display="none")}},ls=()=>{if(En){const t=document.querySelector(En.originCaptionSelector);t&&(t.style.display="block")}},Hg=()=>{if(it?it.resumeRendering():cs(),En!=null&&En.subtitleBtnSelector){const t=document.querySelector(En.subtitleBtnSelector);t&&(t.getAttribute("aria-pressed")==="true"||setTimeout(()=>{t.click()},100))}mr()},Gg=()=>{it==null||it.pauseRendering(),ls()},Vg=(t,e)=>{En=t,tn.value=e},Wg=t=>{const e=t.error;e&&(ss.value=!0,ls(),it==null||it.cancelTranslate(),e.code===Fe.EXTEND_LIMIT?os.value=!0:Qi.includes(e.code)?is.value=!0:us.value=!0)},zg=()=>{mr(),setTimeout(()=>{mr()},5e3),qa.forEach(t=>{try{t()}catch{}})},jg=()=>it?it.downloadSubtitle():Promise.reject(new Error("subtitle translator not initialized")),cs=async()=>{ai(),it&&si(),tn.value&&ri.value.subtitleTranslation.enable&&(it=new Ug({...tn.value,translationCallback:Wg,captionStatusCallback:zg}),it.init())},si=()=>{it==null||it.destroy(),it=null},Xg=()=>{tn.value&&cs()},Yg=t=>(qa.add(t),()=>qa.delete(t)),Kg=async()=>{var v;const{survey:t}=((v=qg.value)==null?void 0:v.subtitleConfig)||{};if(!t||!t.enable)return!1;const{dayTimes:e=1,weekTimes:n=3}=t,r=()=>{const E=new Date;return E.setHours(0,0,0,0),E.getTime()},a=()=>{const E=new Date,w=E.getDay(),L=w===0?-6:1-w;return E.setDate(E.getDate()+L),E.setHours(0,0,0,0),E.getTime()},s=await We(ge.SUBTITLE_SURVEY_SHOW_TIME)||[],o=r(),u=a(),l=s.filter(E=>E>=u);return l.filter(E=>E>=o).length>=e||l.length>=n?!1:(l.push(Date.now()),await dt(ge.SUBTITLE_SURVEY_SHOW_TIME,l),!0)},ra=()=>({setSubtitleTranslateInfo:Vg,resetSubtitleTranslateInfo:Xg,initTranslateSubtitle:cs,destroySubtitleTranslate:si,hideOriginCaption:mr,showOriginCaption:ls,limitError:os,errorTipShow:us,translateError:ss,otherLimitError:is,addCaptionStatusListener:Yg,downloadSubtitle:jg,checkShowSurvey:Kg});var Gr=(t=>(t.YOUTUBE="youtube",t))(Gr||{});const oi=[{name:"youtube",pattern:/^https:\/\/www\.youtube\.com\//i,videoIdPattern:/^(https?:\/\/)?(www\.|m\.)?(youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})(?:[?#&].*)?$/i,btnAnchorSelector:"#movie_player .ytp-right-controls",videoSelector:"#movie_player video",originCaptionSelector:"#ytp-caption-window-container",btnAppendMethod:fr.INSERT_BEFORE,captionAnchorSelector:"#movie_player",captionAppendMethod:fr.APPEND_CHILD,subtitleBtnSelector:"#movie_player .ytp-subtitles-button"}];function aa(t){for(const e of oi)if(t.match(e.pattern))return e;return null}function Ys(t){for(const e of oi){const n=t.match(e.videoIdPattern);if(n)return n[n.length-1]||null}return null}function Qg(t){if(t.name==="youtube"){if(!t.subtitleBtnSelector)return!1;const e=document.querySelector(t.subtitleBtnSelector);if(!e)return!1;const n=e.querySelector("svg");return n?n.getAttribute("fill-opacity")==="0.3":!1}return!1}const Jg={style:{position:"absolute",left:"40px",right:"40px",bottom:"5px",display:"flex","white-space":"pre-wrap","flex-direction":"column","pointer-events":"all","user-select":"text","align-items":"center"}},Zg={key:0,style:{"background-color":"rgba(0, 0, 0, 0.75)",padding:"2px 8px"}},ef=qe({__name:"captionWindow",setup(t){const{userSettings:e}=et(),{initTranslateSubtitle:n,setSubtitleTranslateInfo:r,destroySubtitleTranslate:a,resetSubtitleTranslateInfo:s,hideOriginCaption:o,translateError:u,addCaptionStatusListener:l}=ra(),c=aa(location.href);let h=Ys(location.href),v=null,E=null,w=null,L=null;const R=D(0),B=Ve("subtitleRef"),m=Ve("captionRef"),A=D(!0),d=D(!1),i=oe(()=>e.value.subtitleTranslation.enable&&!u.value),f=()=>{const Z=document.getElementById("movie_player");Z&&(Z.classList.contains("ytp-autohide")?R.value=0:R.value=60,E=new MutationObserver(N=>{N.forEach(x=>{x.type==="attributes"&&x.attributeName==="class"&&(x.target.classList.contains("ytp-autohide")?R.value=0:R.value=60)})}),E.observe(Z,{attributes:!0,attributeFilter:["class"],subtree:!1}))},g=Z=>{v=new MutationObserver(fe=>{fe.forEach(N=>{if(N.type==="attributes"&&N.attributeName==="src"){const x=N.target;if(x.src){Ue.info("video src change",x.src);const F=Ys(location.href);F||(A.value=!1),h!==F&&(A.value=!1,m.value&&(m.value.innerText=""),B.value&&(B.value.innerText=""),h=F,s())}}})}),v.observe(Z,{attributes:!0,attributeFilter:["src"]})},P=()=>{if(!c.subtitleBtnSelector)return;const Z=document.querySelector(c.subtitleBtnSelector);Z&&Z.addEventListener("click",()=>{i.value&&(A.value=Z.getAttribute("aria-pressed")==="true",setTimeout(()=>{o()},100))})},W=Z=>{Z.name===Gr.YOUTUBE&&(f(),P())},$=()=>{L&&clearTimeout(L),A.value=!0,d.value=!0,L=setTimeout(()=>{d.value=!1},3e3)};async function ve(){try{if(c.name===Gr.YOUTUBE){const Z=document.querySelector(c.subtitleBtnSelector);if(Z){const fe=Z.getAttribute("aria-pressed")==="true";Z.click(),fe&&setTimeout(()=>{Z.click()},100)}}}catch{}}return kt(()=>{const Z=document.querySelector(c.videoSelector);!Z||!(Z instanceof HTMLVideoElement)||!m.value||!B.value||(r(c,{videoPlatform:c.name,translationService:e.value.subtitleTranslation.translationService,targetLanguage:e.value.targetLanguage,videoElement:Z,captionElement:m.value,subtitleElement:B.value,useManualSubtitle:e.value.subtitleTranslation.useSiteSubtitle,displayMode:e.value.subtitleTranslation.displayMode,captionEntryTriggerCallback:ve}),w=l($),h&&n(),W(c),g(Z))}),xn(()=>{a(),v==null||v.disconnect(),v=null,E==null||E.disconnect(),E=null,w==null||w(),w=null}),(Z,fe)=>Rt((k(),se("div",{style:Ae([{position:"absolute",width:"100%",top:"0px",left:"0px","pointer-events":"none","z-index":"10","font-size":"20px",color:"rgba(255,255,255,0.9)","font-weight":"400","line-height":"150%",transition:"bottom 0.1s ease-in-out"},{bottom:`${R.value}px`}])},[Rt(y("div",Jg,[y("div",{ref_key:"captionRef",ref:m,style:{"background-color":"rgba(0, 0, 0, 0.75)",padding:"2px 8px",display:"none"}},null,512),y("div",{ref_key:"subtitleRef",ref:B,style:{"background-color":"rgba(0, 0, 0, 0.75)",padding:"2px 8px",display:"none"}},null,512),d.value?(k(),se("div",Zg," ["+de(Z.$t("subtitle.guidText"))+"] ",1)):me("",!0)],512),[[Lt,A.value]])],4)),[[Lt,i.value]])}}),tf=ze(ef,[["__scopeId","data-v-d1944dd0"]]),nf={class:"subtitle-guide-dialog-container"},rf={class:"dialog-title"},af={class:"dialog-description"},sf={class:"dialog-actions"},of=qe({__name:"guidDialog",emits:["gotIt","exploreMore"],setup(t,{emit:e}){const n=e;function r(){n("gotIt"),I.reportClickEvent("plugin_subtitle_translate_newuser_guide_page","got_it")}function a(){n("exploreMore"),I.reportClickEvent("plugin_subtitle_translate_newuser_guide_page","explore_more")}return(s,o)=>(k(),se("div",nf,[y("h3",rf,de(s.$t("subtitle.guidText")),1),y("p",af,de(s.$t("subtitle.guidDialog.desc")),1),y("div",sf,[ie(Qt,{type:"text",class:"got-it-button",onClick:r},{default:Ze(()=>[Mt(de(s.$t("common.gotIt")),1)]),_:1}),ie(Qt,{type:"primary",class:"explore-button",onClick:a},{default:Ze(()=>[Mt(de(s.$t("common.exploreMore")),1)]),_:1})])]))}}),uf=ze(of,[["__scopeId","data-v-e6e519b9"]]),lf={class:"subtitle-icon"},cf=["src"],pf=qe({__name:"SubtitleIcon",props:{icon:{},size:{default:24}},setup(t){const e=t,n=()=>e.icon==="arrowLeft"?chrome.runtime.getURL("public/subtitle/arrowLeft.png"):chrome.runtime.getURL(`public/subtitle/${e.icon}.svg`);return(r,a)=>(k(),se("div",lf,[y("img",{src:n(),style:Ae({width:`${r.size}px`,height:`${r.size}px`})},null,12,cf)]))}}),sa=ze(pf,[["__scopeId","data-v-64fd24a9"]]),df={class:"menu-cell-left"},gf={class:"menu-cell-right"},ff={key:0,style:{"font-size":"14px"}},hf=qe({__name:"MenuCell",props:{title:{},value:{default:""},isLink:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},className:{default:""}},emits:["click"],setup(t,{emit:e}){const{isRtl:n}=ao(),r=t,a=e,{disabled:s}=r,o=()=>{r.disabled||a("click")};return(u,l)=>(k(),se("div",{class:st(["menu-cell",u.className]),style:Ae({cursor:z(s)?"not-allowed":"pointer",opacity:z(s)?.5:1}),onClick:o},[y("div",df,[br(u.$slots,"left-icon",{},void 0,!0),y("span",null,de(u.title),1)]),y("div",gf,[u.value?(k(),se("span",ff,de(u.value),1)):me("",!0),u.isLink?(k(),Se(sa,{key:1,size:16,style:Ae(z(n)?{transform:"rotate(180deg)"}:{}),icon:"arrowRightSmall"},null,8,["style"])):me("",!0)])],6))}}),mf=ze(hf,[["__scopeId","data-v-de94c478"]]),vf=qe({__name:"MenuContainer",props:{className:{default:""}},setup(t){return(e,n)=>(k(),se("div",{class:st(["menu-container",e.className])},[br(e.$slots,"default",{},void 0,!0)],2))}}),ii=ze(vf,[["__scopeId","data-v-20d5d8e7"]]),Ef={},bf={class:"menu-divider"};function Tf(t,e){return k(),se("div",bf)}const ui=ze(Ef,[["render",Tf],["__scopeId","data-v-f1c6b8bc"]]),wf=["onClick"],Ks=24,_f=qe({__name:"SelectList",props:{items:{}},emits:["select"],setup(t,{emit:e}){const n=e,r=a=>{n("select",a)};return(a,s)=>(k(),se("div",null,[(k(!0),se($t,null,Tn(a.items,o=>(k(),se("div",{key:o.id,class:"select-list-item",onClick:()=>r(o.id)},[o.selected?(k(),Se(sa,{key:0,size:Ks,icon:"check"})):(k(),se("div",{key:1,style:Ae({width:`${Ks}px`})},null,4)),br(a.$slots,"default",{item:o},()=>[y("span",null,de(o.title),1)],!0)],8,wf))),128))]))}}),li=ze(_f,[["__scopeId","data-v-cab79358"]]),Af={class:"menu-header-title"},yf=qe({__name:"MenuHeader",props:{title:{}},emits:["back"],setup(t,{emit:e}){const n=e,r=()=>{n("back")};return(a,s)=>(k(),se("div",{class:"menu-header",onClick:r},[ie(sa,{icon:"arrowLeft",size:24}),y("span",Af,de(a.title),1)]))}}),Cf=ze(yf,[["__scopeId","data-v-4535d3fb"]]),Df={class:"service-list-container"},Sf={key:0,class:"group-title"},xf={class:"group-title-text"},Lf=["src"],Rf={class:"service-item"},If=["src"],Bf=["src"],Nf=qe({__name:"TranslateServicePanel",emits:["close","back","select","showSurvey"],setup(t,{emit:e}){const{userSettings:n,notifyUserSettings:r,getSettingByKey:a}=et(),{userInfo:s}=_t(),{t:o}=gt(),{refreshPaymentDialogShow:u}=dn(),{checkShowSurvey:l}=ra(),c=oe(()=>{const R=n.value.subtitleTranslation.translationService;return n.value.services.filter(m=>n.value.enabledServices.includes(m.value)||m.value===R).map(m=>({id:m.value,title:m.title,icon:chrome.runtime.getURL(`public/modelIcons/small/${m.icon}.svg`),selected:m.value===R,isAIService:m.isAIService,isVipService:m.isVipService}))}),h=oe(()=>{var R,B;return[{title:o("model.basicModels"),models:c.value.filter(m=>!m.isAIService),tag:(R=s.value)!=null&&R.isVip?"":pn("images/dark-free.svg")},{title:o("model.advancedModels"),models:c.value.filter(m=>m.isAIService),tag:(B=s.value)!=null&&B.isVip?"":pn("images/pro.svg")}]}),v=R=>{var m;const B=c.value.find(A=>A.id===R);return!B||(m=s.value)!=null&&m.isVip?"":B.isAIService&&!B.isVipService?pn("/images/dark-limited-free.svg"):""},E=e,w=async R=>{const B=c.value.find(A=>A.id===R);if(!B)return;if(I.reportClickEvent("plugin_subtitle_translate_service_page",B.id),s.value){if(!s.value.isVip&&B.isVipService){if(await l())E("showSurvey");else{const A=`${he.priceUrl}?source=web_translate_subtitle&position=web_subtitle_translate_ai_payment`;$e(A),setTimeout(()=>{u.value=!0},1e3),E("close")}return}}else if(B.isAIService){const A="plugin_subtitle_translate_service_page",d="plugin_subtitle_translate_service_page",i=encodeURIComponent(`${he.pluginDescPage}?from=extensionLogin`);$e(`${he.loginUrl}?feature=${d}&position=${A}&cb=${i}`),E("close");return}E("close");const m=a("subtitleTranslation");m.translationService=B.id,r({subtitleTranslation:m})},L=()=>{E("back")};return(R,B)=>(k(),Se(ii,null,{default:Ze(()=>[ie(Cf,{title:R.$t("translate.serviceLabel"),onBack:L},null,8,["title"]),ie(ui),y("div",Df,[(k(!0),se($t,null,Tn(h.value,m=>(k(),se("div",{key:m.title},[m.models.length>0?(k(),se("div",Sf,[B[0]||(B[0]=y("div",{style:{width:"24px",height:"24px"}},null,-1)),y("div",xf,de(m.title),1),m.tag?(k(),se("img",{key:0,src:m.tag,width:"32px",height:"16px"},null,8,Lf)):me("",!0)])):me("",!0),ie(li,{class:"service-list",items:m.models,onSelect:w},{default:Ze(({item:A})=>[y("div",Rf,[y("img",{src:A.icon,style:{width:"24px",height:"24px"}},null,8,If),y("span",null,de(A.title),1),v(A.id)?(k(),se("img",{key:0,height:"16px",src:v(A.id)},null,8,Bf)):me("",!0)])]),_:2},1032,["items"])]))),128))])]),_:1}))}}),kf=ze(Nf,[["__scopeId","data-v-c67c203c"]]),Of=["src"],Ff=qe({__name:"SettingPanel",props:{setDownloadTip:{type:Function}},emits:["close","login","showSurvey"],setup(t,{emit:e}){const{userSettings:n,getSettingByKey:r,notifyUserSettings:a}=et(),{downloadSubtitle:s}=ra(),{userInfo:o}=_t(),{t:u}=gt(),{giftText:l,giftType:c}=Er(),{onlineParams:h}=an(),v=e,E=t,w=D(!1),L=oe(()=>!w.value);Te(w,g=>{g&&I.reportShowEvent("plugin_subtitle_translate_service_page")});const R=oe(()=>[{id:"enable-bilingual",title:u("subtitle.autoEnableBilingualSubtitles"),selected:n.value.subtitleTranslation.enable&&n.value.subtitleTranslation.displayMode===cn.BILINGUAL},{id:"disable-bilingual",title:u("subtitle.turnOffBilingualSubtitles"),selected:n.value.subtitleTranslation.enable&&n.value.subtitleTranslation.displayMode===cn.TRANSLATE_ONLY},{id:"turn-off",title:u("subtitle.turnOff"),selected:!n.value.subtitleTranslation.enable}]),B=()=>{var W;const g=n.value.subtitleTranslation.translationService,P=((W=ja.find($=>$.value===g))==null?void 0:W.icon)||"google";return chrome.runtime.getURL(`public/modelIcons/small/${P}.svg`)},m=oe(()=>{var P,W;const g=[{id:"translateService",title:u("translate.serviceLabel"),isLink:!0,iconImage:B()},{id:"download",title:u("subtitle.download"),icon:"download"},{id:"settings",title:u("common.setting"),isLink:!0,icon:"setting"}];if(!((P=o.value)!=null&&P.isVip)){const{subtitleConfig:$}=h.value||{};g.push({id:"gift",title:(W=$==null?void 0:$.survey)!=null&&W.enable?u("subtitle.goToSurvey"):l.value,isLink:!1,iconImage:pn("images/gift.png")})}return g}),A=g=>{const P=r("subtitleTranslation");g==="enable-bilingual"?(P.enable=!0,P.displayMode=cn.BILINGUAL,I.reportClickEvent("plugin_subtitle_translate_page","auto_enable")):g==="disable-bilingual"?(P.enable=!0,P.displayMode=cn.TRANSLATE_ONLY,I.reportClickEvent("plugin_subtitle_translate_page","show_translated")):g==="turn-off"&&(P.enable=!1,I.reportClickEvent("plugin_subtitle_translate_page","turn_off")),a({subtitleTranslation:P}),v("close")},d=()=>{w.value=!0},i=async()=>{var N;if(!o.value){v("login");return}if(!((N=o.value)!=null&&N.isVip)){$e(`${he.priceUrl}?source=web_translate_subtitle&position=web_subtitle_translate_download`);return}const P={feature:"plugin_subtitle_translate",download_type:r("subtitleTranslation").displayMode===cn.BILINGUAL?"download_bilingual":"download_translated",action:"save_file",source_language_target_language:`auto_detect||${n.value.targetLanguage}`};I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{...P,stage:"download_start",status:"success_pre_upload"});const W=s(),$=new Promise(x=>setTimeout(x,200)),Z=await Promise.race([$.then(()=>({type:"delay"})),W.then(x=>({type:"download",result:x}))]),fe=x=>{x.isCompleted?(I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{...P,stage:"download_complete",status:"success"}),E.setDownloadTip({visible:!1,message:""})):x.error&&(I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{...P,stage:"download_complete",status:`failed_${x.message}`}),E.setDownloadTip({visible:!0,message:u("subtitle.downloadFailed")}))};if(Z.type==="delay"){E.setDownloadTip({visible:!0,message:u("subtitle.downloading")}),I.fireEvent(Nt.OVERSEA_TRANSLATE_STATUS,{...P,stage:"download_start",status:"processing"});const x=await W;fe(x)}else fe(Z.result)},f=g=>{var W;const{subtitleConfig:P}=h.value||{};switch(g){case"download":i(),I.reportClickEvent("plugin_subtitle_translate_page","download_subtitle"),v("close");break;case"translateService":d(),I.reportClickEvent("plugin_subtitle_translate_page","translate_service");break;case"settings":Ji(!!o.value,he.subtitleSettingPage,"plugin_subtitle_translate_page"),I.reportClickEvent("plugin_subtitle_translate_page","settings"),v("close");break;case"gift":(W=P==null?void 0:P.survey)!=null&&W.enable?($e(P.survey.link),I.fireEvent(Nt.PREMIUM_PROMOTION,{action:"click",item:"web_subtitle_translate_survey_op"})):($e(`${he.priceUrl}?position=plugin_subtitle_translate_page_get_trial`),I.fireEvent(Nt.PREMIUM_PROMOTION,{action:"click",item:"plugin_subtitle_translate_page_get_trial",type:c.value==="1"?"1":"7"})),v("close");break}};return(g,P)=>L.value?(k(),Se(ii,{key:0,style:{overflow:"auto"}},{default:Ze(()=>[ie(li,{items:R.value,onSelect:A},null,8,["items"]),ie(ui),(k(!0),se($t,null,Tn(m.value,W=>(k(),Se(mf,{key:W.id,title:W.title,"is-link":W.isLink,onClick:()=>f(W.id)},{"left-icon":Ze(()=>[W.iconImage?(k(),se("img",{key:0,src:W.iconImage,style:{width:"24px",height:"24px"}},null,8,Of)):(k(),Se(sa,{key:1,icon:W.icon},null,8,["icon"]))]),_:2},1032,["title","is-link","onClick"]))),128))]),_:1})):w.value?(k(),Se(kf,{key:1,onClose:P[0]||(P[0]=W=>v("close")),onShowSurvey:P[1]||(P[1]=W=>v("showSurvey")),onBack:P[2]||(P[2]=W=>w.value=!1)})):me("",!0)}}),Pf={class:"upgrade-prompt-card"},Mf={class:"close-button"},$f={class:"title"},Uf={class:"promo-section"},qf=["src"],Hf={class:"promo-color-text"},Gf={class:"button-group"},Vf=qe({__name:"UpgradePrompt",props:{scene:{}},emits:["close"],setup(t,{emit:e}){const{refreshPaymentDialogShow:n}=dn(),{onlineParams:r}=an(),{t:a}=gt(),s=e,o=t,u=oe(()=>o.scene==="limit"?"web_subtitle_4o_questionnaire":"web_subtitle_ai_questionnaire"),l=oe(()=>o.scene==="limit"?a("upgradePrompt.limitTitle"):a("upgradePrompt.title"));function c(){s("close"),I.reportClickEvent(u.value,"close")}function h(){o.scene==="limit"?$e(`${he.priceUrl}?source=plugin_translate_subtitle&position=ai_model_free_trial_limit`):$e(`${he.priceUrl}?source=web_translate_subtitle&position=web_subtitle_translate_ai_payment`),setTimeout(()=>{n.value=!0},1e3),s("close"),I.reportClickEvent(u.value,"upgrade")}function v(){var w;const{survey:E}=((w=r.value)==null?void 0:w.subtitleConfig)||{};$e((E==null?void 0:E.link)||"https://form.typeform.com/to/htX09piP"),s("close"),I.reportClickEvent(u.value,"participate_now")}return(E,w)=>(k(),se("div",Pf,[y("div",Mf,[ie(Pt,{icon:"close",size:24,onClick:c})]),y("div",$f,de(l.value),1),y("div",Uf,[y("img",{src:z(pn)("images/gift.png"),alt:"gift",class:"gift-icon"},null,8,qf),ie(z(gr),{keypath:"upgradePrompt.promoText",class:"promo-text",tag:"div"},{default:Ze(()=>[y("span",Hf,de(E.$t("upgradePrompt.promoColorText")),1)]),_:1})]),y("div",Gf,[ie(Qt,{type:"default",class:"skip-button",onClick:h},{default:Ze(()=>[Mt(de(E.$t("upgradePrompt.skipButtonText")),1)]),_:1}),ie(Qt,{type:"primary",class:"participate-button",onClick:v},{default:Ze(()=>[Mt(de(E.$t("upgradePrompt.participateButtonText")),1)]),_:1})])]))}}),Wf=ze(Vf,[["__scopeId","data-v-a444e137"]]),zf={class:"try-ai-model-tip-wrapper"},jf={class:"try-ai-model-tip"},Xf={class:"tip-content"},Yf={class:"tip-text"},Kf=qe({__name:"TryAiModelTip",props:{position:{},scene:{}},emits:["close","tryAiModel"],setup(t,{emit:e}){const{locale:n}=gt(),r=t,a=oe(()=>on(n.value)&&r.position==="right"?"left":r.position||"bottom"),s=oe(()=>({plugin_subtitle_translate_ai_service_guide_page:r.scene})[r.scene]),o=e;function u(){o("close"),I.reportClickEvent(s.value,"close")}async function l(){o("tryAiModel"),I.reportClickEvent(s.value,"try_use")}return kt(()=>{I.reportShowEvent(r.scene)}),(c,h)=>(k(),se("div",zf,[h[0]||(h[0]=y("div",{class:"try-ai-model-tip-bg"},null,-1)),y("div",jf,[y("div",Xf,[y("div",Yf,de(c.$t("translate.tryAiTip")),1),y("div",{class:"try-text-btn",onClick:l},de(c.$t("common.tryAiModel")),1)]),y("div",{class:st(["arrow",`arrow-${a.value||"bottom"}`])},null,2),ie(ut,{class:"icon-close",icon:"close",size:16,onClick:u})])]))}}),Qf=ze(Kf,[["__scopeId","data-v-eda2ac46"]]),Jf=["dir"],Zf={class:"logo-outer-border"},e2={class:"logo-inner-border"},t2=["src"],n2=qe({__name:"quickButton",setup(t){const e=aa(location.href);let n=null;const{getServiceOnlineParams:r,onlineParams:a}=an(),{userInfo:s}=_t(),{checkBoundary:o}=uo({margin:2}),{userSettings:u,notifyUserSettings:l,getSettingByKey:c}=et(),{contentScriptRefreshUserInfo:h}=_t(),{subtitleLoginTipShow:v,setNoLoginTranslateUseCount:E,showLoginTipGuid:w,checkLoginTipShow:L}=Tr(),{limitError:R,errorTipShow:B,otherLimitError:m,addCaptionStatusListener:A,checkShowSurvey:d}=ra(),{refreshPaymentDialogShow:i}=dn(),{locale:f}=gt(),{giftType:g}=Er(),P=oe(()=>on(f.value)?"rtl":"ltr");let W=null,$=null,ve=!1;const Z=D(!1),fe=D(!1),N=D(!1),x=D(!1),F=D(!1),j=D("limit"),Y=D(!1),K=D(!1),O=D({maxWidth:"0px",maxHeight:"0px"}),J=Ve("logoRef"),X=Ve("settingPanelRef"),Be=Ve("noCaptionTipRef"),re=Ve("errorTipRef"),V=Ve("downloadTipRef"),Q=D("");nn(X,()=>{K.value=!1},{ignore:[J]}),nn(Be,()=>{N.value=!1},{ignore:[J]}),nn(re,()=>{Dt()},{ignore:[J]}),nn(V,()=>{Y.value=!1},{ignore:[J]});const Ee=oe(()=>!Z.value&&!F.value),ee=oe(()=>Kr(f.value)),be=()=>{Ct(()=>{X.value&&o(X.value.$el,Le=>{Le&&ye()})})},ye=lo(()=>{if(!X.value)return;const Le=X.value.$el,Ce=Le.getBoundingClientRect();Ce.left<0?Le.style.transform=`translateX(${-Ce.left}px)`:Ce.right>window.innerWidth&&(Le.style.transform=`translateX(${window.innerWidth-Ce.right}px)`)},100),De=Le=>{Q.value=Le.message,Y.value=Le.visible};Te(R,async Le=>{Le?(K.value=!1,await d()?(F.value=!0,j.value="limit",I.reportShowEvent("web_subtitle_4o_questionnaire")):x.value=!0):(F.value=!1,x.value=!1)}),Te(K,Le=>{var Ce;Le&&(be(),I.reportShowEvent("plugin_subtitle_translate_page"),(Ce=s.value)!=null&&Ce.isVip||I.fireEvent(Nt.PREMIUM_PROMOTION,{action:"show",item:"plugin_subtitle_translate_page_get_trial",type:g.value==="1"?"1":"7"}))});const we=async()=>{if(x.value=!1,F.value=!1,B.value=!1,Z.value=!1,fe.value=!1,I.reportClickEvent("plugin_subtitle_translate_page","plugin_subtitle_translate_entry"),Qg(e)){N.value=!N.value;return}if(h(),!K.value&&(await E(),await L())){w(jn.SUBTITLE);return}v.value=!1,K.value=!K.value},Me=()=>{Z.value=!1,$e(`${he.mainPage}?position=plugin_subtitle_translate_newuser_guide`)},xe=()=>{var Le;if(fe.value=!1,s.value){let Ce;const Ge=s.value.isVip,{translationService:At,services:ct}=r();if(ct.find(_e=>_e.value===At)?Ce=At:Ge&&(Ce=(Le=ct.find(_e=>_e.isAIService))==null?void 0:Le.value),Ce){const _e=c("subtitleTranslation");_e.translationService=Ce,l({subtitleTranslation:_e})}}else{const Ce=encodeURIComponent(`${he.mainPage}?from=extensionLogin`);$e(`${he.loginUrl}?position=plugin_subtitle_translate_ai_service_guide&feature=plugin_translate_subtitle&cb=${Ce}`)}},Ne=()=>{K.value=!1,F.value=!0,j.value="service",I.reportShowEvent("web_subtitle_ai_questionnaire")},Ke=()=>{x.value=!1,setTimeout(()=>{i.value=!0},1e3)},Qe=()=>chrome.runtime.getURL("public/logo/icon-128.png"),He=()=>{var ne;const Le=n==null?void 0:n.getBoundingClientRect(),Ce=(ne=J.value)==null?void 0:ne.getBoundingClientRect();if(!Le||!Ce){O.value={maxWidth:"0px",maxHeight:"0px"};return}const Ge=5,At=Le.width-Ge,ct=Ce.top-Le.top-Ge;O.value={maxWidth:`${At}px`,maxHeight:`${ct}px`}},vt=()=>{n&&(W=new ResizeObserver(()=>{He(),be()}),W.observe(n))};let Et=null;const Oe=async()=>{var At;const Le=((At=a.value)==null?void 0:At.subtitleConfig)||{tryAiModelGap:7,tryAiModelShowTime:60},Ce=u.value.subtitleTranslation.translationService;if(fe.value=!1,Et&&clearTimeout(Et),Ds.includes(Ce))return;const Ge=await We(ge.SUBTITLE_TRY_AI_MODEL_TIP_SHOW_TIME);Ge&&Date.now()-Ge<Le.tryAiModelGap*24*60*60*1e3||(Et=setTimeout(()=>{if(B.value||m.value)return;const ct=u.value.subtitleTranslation.translationService;Ds.includes(ct)||(dt(ge.SUBTITLE_TRY_AI_MODEL_TIP_SHOW_TIME,Date.now()),fe.value=!0,K.value=!1,v.value=!1)},Le.tryAiModelShowTime*1e3))},lt=async()=>{ve=!0,Z.value===!1&&Oe()},Dt=()=>{B.value=!1,m.value=!1};return kt(async()=>{n=document.querySelector(e.videoSelector),He(),vt(),$=A(lt),await We(ge.SUBTITLE_GUID_TEXT_TIP_SHOW)||(Z.value=!0,dt(ge.SUBTITLE_GUID_TEXT_TIP_SHOW,!0),I.reportShowEvent("plugin_subtitle_translate_newuser_guide_page"),Te(Z,Le=>{!Le&&ve&&Oe()})),I.reportShowEvent("plugin_subtitle_translate_entry")}),xn(()=>{W==null||W.disconnect(),W=null,$==null||$(),$=null}),(Le,Ce)=>Rt((k(),se("div",{dir:P.value,class:"quick-button-container",style:Ae({fontFamily:ee.value})},[y("div",{class:st(["logo-container",{"hide-borders":Ee.value}])},[y("div",Zf,[y("div",e2,[y("img",{ref_key:"logoRef",ref:J,onClick:we,class:"logo-image",style:{width:"24px",height:"24px"},src:Qe()},null,8,t2)])])],2),y("div",{class:st(["subtitle-popup-container",{"hide-borders":Ee.value}])},[Z.value?(k(),Se(uf,{key:0,onGotIt:Ce[0]||(Ce[0]=Ge=>Z.value=!1),onExploreMore:Me})):me("",!0),!Z.value&&x.value?(k(),Se(tr,{key:1,class:"exceed-limit-tip",onClose:Ce[1]||(Ce[1]=Ge=>x.value=!1),onUpgrade:Ke,scene:"plugin_subtitle_translate_page_free_trial_limit"})):me("",!0),!Z.value&&F.value?(k(),Se(Wf,{key:2,scene:j.value,onClose:Ce[2]||(Ce[2]=Ge=>F.value=!1)},null,8,["scene"])):me("",!0),!Z.value&&(z(B)||z(m))?(k(),se("div",{key:3,class:"error-tip",ref_key:"errorTipRef",ref:re},[y("div",null,de(Le.$t("translate.networkError")),1),ie(ut,{class:"error-tip-close",icon:"close",size:16,onClick:Dt})],512)):me("",!0),fe.value?(k(),Se(Qf,{key:4,onClose:Ce[3]||(Ce[3]=Ge=>fe.value=!1),onTryAiModel:xe,scene:"plugin_subtitle_translate_ai_service_guide_page"})):me("",!0),N.value?(k(),se("div",{key:5,class:"no-caption-tip",ref_key:"noCaptionTipRef",ref:Be},de(Le.$t("subtitle.noCaption")),513)):me("",!0),Y.value?(k(),se("div",{key:6,class:"download-tip",ref_key:"downloadTipRef",ref:V},[y("div",null,de(Q.value),1)],512)):me("",!0),z(v)?(k(),Se(ea,{key:7,source:"plugin_subtitle_translate_login_guide_page",onClose:Ce[4]||(Ce[4]=Ge=>v.value=!1)})):me("",!0),K.value?(k(),Se(Ff,{key:8,ref_key:"settingPanelRef",ref:X,style:Ae(O.value),setDownloadTip:De,onShowSurvey:Ne,onLogin:Ce[5]||(Ce[5]=Ge=>v.value=!0),onClose:Ce[6]||(Ce[6]=Ge=>K.value=!1)},null,8,["style"])):me("",!0)],2)],12,Jf)),[[Lt,z(u).subtitleTranslation.enableShortcut]])}}),r2=ze(n2,[["__scopeId","data-v-11470819"]]),a2="wps-translate-subtitle-translation-button",s2="wps-translate-subtitle-translation-caption";let Wn=null,zn=null;async function o2(t){let e=0;const n=4,r=1e3;let a=null,s=null;for(;e<n&&(a=document.querySelector(t.btnAnchorSelector),s=document.querySelector(t.captionAnchorSelector),!(a&&s));)await new Promise(o=>setTimeout(o,r)),e++;return{btnAnchorElement:a,captionAnchorElement:s}}async function i2(t){const{btnAnchorElement:e,captionAnchorElement:n}=await o2(t);if(!e){Ue.error(` ${t.name} `);return}if(!n){Ue.error(` ${t.name} `);return}Pr(e,Wn,t.btnAppendMethod),Pr(n,zn,t.captionAppendMethod)}function u2(){if(Yr())return;const t=aa(location.href);t&&(Ue.info(":",t.name),Wn=Qn(a2,r2),zn=Qn(s2,tf),i2(t),Qr({name:Jr.INJECTION,onDisconnect:()=>{Wn==null||Wn.remove(),zn==null||zn.remove(),Wn=null,zn=null}}))}const{userInfo:Ha,refreshUserInfo:l2,notifyOtherTabUserInfo:c2}=_t(),{onlineParams:Qs}=an();function p2(){var t;location.host===he.webHost&&window.postMessage({type:"userStatus",source:"extension",data:{isVip:(t=Ha.value)==null?void 0:t.isVip,isLogin:!!Ha.value}},window.location.origin)}async function d2(){try{const t=await at(Ie.GET_WPS_CLIENT_INFO,{from:Xn()?"edge":"chrome"});return t?t.data?t.data:(I.reportCustomEvent("native_get_info",{result:"error",errorMsg:t.errorMsg,code:t.code}),{}):(I.reportCustomEvent("native_get_info",{result:"error",errorMsg:"get wps client info failed",code:-101}),{})}catch(t){return I.reportCustomEvent("native_get_info",{result:"error",errorMsg:t&&t.message||"unknown error",code:-102}),{}}}async function xr(t){const e=await d2();e&&(t.wps_deviceId=e.deviceId,t.wps_exe_version=e.exe_version,t.wps_host_version=e.host_version),I.reportCustomEvent("native_login",t)}function g2(){return{autoLogin:async()=>{var o,u;if(!Zi()||Ha.value)return;if(!((o=Qs.value)!=null&&o.nativeLogin)){xr({result:"error",errorMsg:"native login config not exist",code:-101});return}const e=(u=Qs.value)==null?void 0:u.nativeLogin.gap,n=await We(ge.NATIVE_LOGIN_ERROR_TIME);if(n&&Date.now()-n<e*60*1e3)return;Kn(ge.NATIVE_LOGIN_ERROR_TIME);const r=await at(Ie.GET_LOGIN_URL);if(!r)return;if(I.reportCustomEvent("native_login",{action:"start"}),!r.url){dt(ge.NATIVE_LOGIN_ERROR_TIME,Date.now()),xr({result:"error",errorMsg:r.errorMsg,code:r.code});return}xr({result:"success"});const a=document.createElement("iframe");a.style.display="none";const s=()=>{setTimeout(async()=>{await l2(),p2(),c2(),document.body.removeChild(a)},5e3)};a.onload=s,a.src=r.url,a.onerror=()=>{Ue.error("iframe load url onerror",r.url),xr({result:"error",errorMsg:"iframe load url onerror",url:r.url})},document.body.appendChild(a)}}}const f2=["dir"],h2={key:5},m2=qe({__name:"index",setup(t){const{initScholarEnhance:e}=ud(),{pluginCommentGuidShow:n}=Jn(),{translatePage:r,setReportParams:a}=Pn(),{userInfo:s,refreshUserInfo:o,initUserInfo:u,noLoginUserInfoRefresh:l,notifyOtherTabUserInfo:c,setUserInfo:h}=_t(),{initUserSettings:v,userSettings:E,notifyUserSettings:w,getSettingByKey:L,refreshUserSettings:R}=et(),{locale:B}=gt(),{currentWindowId:m,isWindowActive:A}=Za(),{autoLogin:d}=g2(),{upgradeDialogShow:i,exceedLimitDialogShow:f,refreshPaymentDialogShow:g}=dn(),{checkPageContinueTranslate:P,continueTranslateDialogShow:W}=Zr(),{checkUserIsT1:$}=Er(),ve=_u(),Z=D(!1),fe=D(!1),N=D(!1),x=D(!1),F=oe(()=>on(B.value)?"rtl":"ltr"),j=oe(()=>Kr(B.value));function Y(ee){const be=new URL(ee);return`${be.protocol}//${be.host}`}async function K(ee){const be=L("floatButton"),ye=await Un();fe.value=!1,ee==="2"&&(Yt(ye,be.blockedSites)||(be.blockedSites.push(Y(ye)),w({floatButton:be}))),ee==="3"&&(be.enable=!1,w({floatButton:be}))}async function O(ee){const be=L("textboxTranslation"),ye=await Un();x.value=!1,ee==="2"&&(Yt(ye,be.blockedSites)||(be.blockedSites.push(Y(ye)),w({textboxTranslation:be}))),ee==="3"&&(be.enable=!1,w({textboxTranslation:be}))}async function J(ee){const be=L("inTextTranslation"),ye=await Un();N.value=!1,ee==="2"&&(Yt(ye,be.blockedSites)||(be.blockedSites.push(Y(ye)),w({inTextTranslation:be}))),ee==="3"&&(be.enable=!1,w({inTextTranslation:be})),ee==="4"&&(be.blockedLanguages||(be.blockedLanguages=[]),be.blockedLanguages.includes(E.value.targetLanguage)||be.blockedLanguages.push(E.value.targetLanguage),w({inTextTranslation:be}))}async function X(ee){const be=L("imageTranslation"),ye=await Un();ee==="2"&&(Yt(ye,be.blockedSites)||(be.blockedSites.push(Y(ye)),w({imageTranslation:be}))),ee==="3"&&(be.enable=!1,w({imageTranslation:be}))}async function Be(){const ee=await Un();Z.value=!0;const{floatButton:be,inTextTranslation:ye}=E.value;let{textboxTranslation:De}=E.value;De||(De=eu.textboxTranslation),fe.value=be.enable&&!Yt(ee,be.blockedSites),N.value=ye.enable&&!Yt(ee,ye.blockedSites),x.value=De.enable&&!Yt(ee,De.blockedSites)}function re(ee,be){if(be==="local"&&ee[ge.TEMP_CONFIGS]){const{newValue:ye}=ee[ge.TEMP_CONFIGS];ye&&ye.inTextTranslationEnable!==void 0&&(N.value=ye.inTextTranslationEnable)}}function V(){window.location.host===he.webHost&&window.addEventListener("message",async ee=>{var be,ye,De,we,Me,xe,Ne,Ke,Qe,He;if(ee.source===window&&ee.origin===window.location.origin&&ee.data.source==="page"){if(ee.data.type==="settingSync"&&(Ue.info("receive settingSync message from web:",ee.data.data),s.value&&w(ee.data.data,!1,!1)),ee.data.type==="userStatus"){const vt=!!((ye=(be=ee.data)==null?void 0:be.data)!=null&&ye.isLogin),Et=!!((we=(De=ee.data)==null?void 0:De.data)!=null&&we.isVip),Oe=((xe=(Me=ee.data)==null?void 0:Me.data)==null?void 0:xe.userId)||void 0,lt=!!s.value,Dt=!!((Ne=s.value)!=null&&Ne.isVip),Le=(Ke=s.value)==null?void 0:Ke.userid;Ue.info("receive userStatus message from web:",ee.data),(vt!==lt||Et!==Dt||Oe!==Le)&&(vt===!1?h(void 0):await o()),c()}if(ee.data.type==="interfaceLanguageChange"&&(Ue.info("receive interfaceLanguageChange message from web:",ee.data),!s.value)){const vt=wo((He=(Qe=ee.data)==null?void 0:Qe.data)==null?void 0:He.language).value;Fa(vt),at(Ie.NOTIFY_NO_LOGIN_LOCALE_CHANGE,vt)}}})}async function Q(){var He;const ee=await Un(),be=await at(Ie.DETECT_PAGE_LANGUAGE),ye=((He=rn(be))==null?void 0:He.value)||"",{pageTranslation:De}=E.value,we=De.alwaysTranslateLanguage||[],Me=De.neverTranslateSites||[];Me.push("anydoctranslator-test.toolsmart.ai","anydoctranslator.toolsmart.ai","account.wps.com");const xe=Yt(ee,Me),Ne=Yt(ee,De.alwaysTranslateSites),Ke=De.alwaysTranslateEnabled&&we.includes(ye),Qe=await P(ye);Ue.info("check page translate, info:",{pageLanguageValue:ye,pageUrl:ee,alwaysTranslateEnabled:Cr(De.alwaysTranslateEnabled),alwaysTranslateSites:Cr(De.alwaysTranslateSites),neverAutoTranslateSites:Cr(De.neverTranslateSites),alwaysTranslateLanguage:Cr(De.alwaysTranslateLanguage),isNeverAutoTranslatePage:xe,isAlwaysTranslatePage:Ne,isAlwaysTranslateLanguage:Ke,isContinueTranslate:Qe}),(Ne||!xe&&Ke||!xe&&Qe)&&(a("plugin_open_translate_website","plugin_translate_website"),r(Kt.HOVER_BALL))}async function Ee(){try{const ee=await at(Ie.GET_TAB_INFO);m.value=ee.windowId,A.value=ee.isWindowActive}catch{}}return Ka(async()=>{await I.init(),await u(),await v(),await R(),await l(),e(),await Ee(),Be(),Fa(E.value.interfaceLanguage),Q(),Te(E,()=>{Be()}),Te(n,ee=>{ee&&I.reportShowEvent("plugin_fivestar_guide_popup")}),Te(W,ee=>{ee&&I.reportShowEvent("plugin_always_translate_popup")}),at(Ie.UPDATE_CONTEXT_MENU_BY_TARGET_LANGUAGE,E.value.targetLanguage),chrome.storage.onChanged.addListener(re),V(),d(),u2(),$d(E.value),$()}),xn(()=>{chrome.storage.onChanged.removeListener(re)}),(ee,be)=>Z.value?(k(),se("div",{key:0,dir:F.value,id:"root",style:Ae({fontFamily:j.value}),class:"root"},[!z(ve)&&fe.value?(k(),Se(Ol,{key:0,onClose:K})):me("",!0),!z(ve)&&N.value?(k(),Se(ad,{key:1,onAlwaysClose:J})):me("",!0),x.value?(k(),Se(bp,{key:2,onClose:O})):me("",!0),ie(Ec,{onClose:X}),ie(yp),!z(ve)&&z(W)?(k(),Se(Mu,{key:3})):me("",!0),!z(ve)&&z(n)?(k(),Se(kp,{key:4})):me("",!0),z(ve)?me("",!0):(k(),se("div",h2,[z(f)?(k(),Se(Gp,{key:0})):me("",!0),z(i)?(k(),Se(Jp,{key:1})):me("",!0),z(g)?(k(),Se(Vp,{key:2})):me("",!0)]))],12,f2)):me("",!0)}}),v2=ze(m2,[["__scopeId","data-v-9e0591f1"]]),{userSettings:Js}=et(),{setWatchTranslate:ci}=Pn(),{t:Zs,locale:eo}=co.global;let pi=0;const E2=2,to=Math.round(1e3/E2),b2="AnyDoc",ln=[];let Vr=!1,Ga;const Wr={scrollTop:0,bodyOverflow:""};let zr;async function di(){zr||(zr={source_language:await at(Ie.DETECT_PAGE_LANGUAGE),target_language:Js.value.targetLanguage,service:Js.value.translationService,feature:"plugin_translate_website",func_type:"quick_save",target_format:"png",has_watermark:1})}async function T2(){await di(),I.fireEvent("oversea_translate_status",zr)}async function ps(t){await di();const n=Date.now()-pi;I.fireEvent("oversea_translate_status",{...zr,result:t,duration:n})}function w2(){return new Promise(t=>{window.scrollBy(0,window.innerHeight),setTimeout(t,100)})}async function _2(){var r;const t=await at(Ie.GET_POPUP_PERFORMANCE_NOW),e=((r=ln[ln.length-1])==null?void 0:r.time)||0,n=t-e;n<to&&await _o(Math.ceil(to-n))}async function gi(t,e){const n=pu(t===1,t===e);await _o(200);const r=await at(Ie.SCREEN_SHOT);r.result===tu.SUCCESS&&ln.push({data:r.data,time:r.time}),du(n),!Vr&&(at(Ie.CAPTURE_PROGRESS,{progress:`${Math.floor(t/e*100)}%`}),t<e&&(await w2(),await _2(),await gi(t+1,e)))}async function A2(t){const{logoUrl:e,logoText:n,sloganText:r}=t,a=on(eo.value)?"rtl":"ltr",s=Kr(eo.value),o=await fetch(e).then(E=>E.blob()).then(E=>new Promise((w,L)=>{const R=new FileReader;R.onload=()=>w(R.result),R.onerror=L,R.readAsDataURL(E)})),u=`
    <div dir="${a}" style="display: flex; align-items: center; justify-content: center; font-family: ${s}; padding: 12px 16px;">
      <div style="display: flex; align-items: center; gap: 8px;">
        <img style="flex-basis: 24px" width="24" height="24" src="${o}"/>
        <div style="font-size: 14px; font-weight: 600; margin-inline-end: 8px; line-height: 22px;">${xs(n)}</div>
        <div style="flex: 1; font-size: 14px; line-height: 20px;">${xs(r)}</div>
      </div>
    </div>
  `,l=document.createElement("div");l.style.overflow="hidden";const c=l.attachShadow({mode:"open"});c.innerHTML=u,document.body.appendChild(l);const h=Array.from(c.querySelectorAll("img"));await Promise.all(h.map(E=>new Promise((w,L)=>{E.complete?w():(E.onload=()=>w(),E.onerror=()=>L(new Error(`Failed to load image: ${E.src}`)))})));const v=l.offsetHeight;return document.body.removeChild(l),{height:v,htmlString:u}}const y2=async t=>{const{ctx:e,htmlString:n,positions:r,width:a,height:s}=t,o=`
    <svg xmlns="http://www.w3.org/2000/svg" width="${a}" height="${s}">
      <rect width="100%" height="100%" fill="#fff" />
      <foreignObject width="100%" height="100%">
        <div xmlns="http://www.w3.org/1999/xhtml" style="width: ${a}px; height: ${s}px;">
          ${n}
        </div>
      </foreignObject>
    </svg>
  `,u=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(o)))}`,l=new Image;l.src=u,await new Promise(c=>{l.onload=()=>{for(const h of r){const{x:v,y:E}=h;e.drawImage(l,v,E,a,s)}c()}})};async function C2(){const t=document.createElement("canvas"),e=t.getContext("2d");if(!e)return;const n=document.documentElement.scrollHeight,r=Math.ceil(n/window.innerHeight),a=ln.length,s=r===a&&n%window.innerHeight||window.innerHeight,{height:o,htmlString:u}=await A2({logoUrl:chrome.runtime.getURL("public/logo/icon-48.png"),logoText:Zs("common.title"),sloganText:Zs("capture.watermark.slogan")});t.width=window.innerWidth,t.height=window.innerHeight*(ln.length-1)+s+o*2,await y2({ctx:e,htmlString:u,width:window.innerWidth,height:o,positions:[{x:0,y:0},{x:0,y:window.innerHeight*(ln.length-1)+s+o}]});let l=o;const c=ln.map(v=>new Promise(E=>{const{data:w}=v,L=new Image;L.src=w,L.onload=()=>E(L)}));return await Promise.all(c).then(async v=>{v.forEach((L,R)=>{const B=window.innerWidth,m=R===ln.length-1?s:window.innerHeight,A=L.width,d=L.height,i=L.height/window.innerHeight,f=R===ln.length-1?(window.innerHeight-s)*i:0;e.drawImage(L,0,f,A,d-f,0,l,B,m),l+=m});const E=t.toDataURL("image/png");return await fetch(E).then(L=>L.blob())}).catch(v=>{ps(`failed_${v&&v.message||"unknown_error"}`)})}function fi(){ln.length=0,fu(Wr.bodyOverflow),ci(!0),window.scrollTo(0,Wr.scrollTop),cu()}function D2(){const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");return`${e}_${n}_${r}_${a}_${s}_${o}`}function S2(t){const e=new File([t],`${b2}_Screenshot_${D2()}.png`,{type:"image/png"}),n=URL.createObjectURL(e),r=document.createElement("a");r.style.display="none",r.href=n,r.download=e.name,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function x2(){pi=Date.now(),T2(),ci(!1),Vr=!1;const t=Math.ceil(document.documentElement.scrollHeight/window.innerHeight);Wr.scrollTop=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop,Wr.bodyOverflow=document.body.style.overflow,gu(),lu(),window.scrollTo(0,0),Ga=setTimeout(async()=>{await gi(1,t);const e=await C2();Vr||(e&&S2(e),fi(),ps("success"))},100)}function L2(){Vr=!0,Ga&&clearTimeout(Ga),fi(),ps("failed_user_cancelled")}const vr=new Map,jr=new Map;function R2(t){vr.set(t,[]),at(Ie.GET_PDF_FILE_CONTENT,{url:t})}function I2(t){const e=vr.get(t.fileName);jr.set(t.fileName,t.totalChunks),e&&(e[t.chunkIndex]=new Uint8Array(t.data))}function B2(t){const e=vr.get(t.fileName),n=jr.get(t.fileName);if(e&&n!==void 0&&e.length===n&&e.every(r=>r!==void 0)){const r=new Blob(e,{type:"application/pdf"}),a=URL.createObjectURL(r);vr.delete(t.fileName),jr.delete(t.fileName),window.postMessage({type:"pdfContent",source:"extension",data:{url:a,fileName:t.fileName}},window.location.origin)}else window.postMessage({type:"pdfContent",source:"extension",data:{errorType:-1,fileName:t.fileName}},window.location.origin),Ue.error(`PDF content for ${t.fileName} is incomplete or invalid.`,e)}function N2(t){vr.delete(t.fileName),jr.delete(t.fileName),window.postMessage({type:"pdfContent",source:"extension",data:{errorType:t.errorType==="overSize"?-2:-1,fileName:t.fileName}},window.location.origin),Ue.error(`PDF get error for ${t.fileName}: ${t.errorType}`),I.reportCustomEvent("pdf_get_error",{type:t.errorType,pdfUrl:t.fileName})}const{isPageTranslated:k2,translatePage:O2,showOriginPage:F2,setTranslatePageStyle:P2,setReportParams:ka}=Pn(),M2={[Ie.TRANSLATE_PAGE]:t=>{const{contentScriptRefreshUserInfo:e}=_t(),{userSettings:n}=et();if((t==null?void 0:t.scene)===Kt.CONTEXT_MENU?(e().then(()=>{at(Ie.UPDATE_CONTEXT_MENU_BY_TARGET_LANGUAGE,n.value.targetLanguage)}),ka("plugin_rightclickmenu_translate_website","plugin_translate_website")):(t==null?void 0:t.scene)===Kt.DROPDOWN?ka("plugin_dropdown_translate_website","plugin_translate_website"):(t==null?void 0:t.scene)===Kt.HOVER_BALL&&ka("plugin_floatingball_translate_website","plugin_translate_website"),t!=null&&t.clickBtn||(t==null?void 0:t.scene)===Kt.CONTEXT_MENU){const{checkDialogAndUpdateUsageInfo:r}=Zr();r()}O2(t.scene),(t==null?void 0:t.scene)===Kt.CONTEXT_MENU&&I.reportClickEvent("Other","plugin_rightclickmenu_translate_website")},[Ie.SET_TRANSLATE_PAGE_STYLE]:t=>{P2(t.displayMode,t.theme)},[Ie.CAPTURE_PAGE]:()=>{x2()},[Ie.STOP_CAPTURE_PAGE]:()=>{L2()},[Ie.SHOW_ORIGIN]:t=>{F2(),(t==null?void 0:t.scene)==="contextMenu"&&I.reportClickEvent("Other","plugin_rightclickmenu_show_original")},[Ie.CHECK_PAGE_TRANSLATED]:(t,e,n)=>{n({isTranslated:k2.value})},[Ie.NOTIFY_CONTENT_SETTING_CHANGE]:t=>{const{setUserSettings:e}=et();e(t),location.host===he.webHost&&window.postMessage({type:"settingSync",source:"extension",data:t},window.location.origin)},[Ie.NOTIFY_IFRAME_SETTING_CHANGE]:t=>{const{setUserSettings:e}=et();e(t)},[Ie.NOTIFY_CONTENT_LOGIN_STATE]:t=>{const{setUserInfo:e}=_t();e(t)},[Ie.CHAT_COMPLETIONS_RESPONSE]:t=>{var c;const{addExplainImproveWriteText:e,setExplainImproveWriteError:n,explainDone:r,improveWriteDone:a,getCurrentRequestId:s}=wr(),{userInfo:o}=_t(),{requestId:u,translateType:l}=t;if(t.result){if(Aa({done:!1,requestId:u}),u!==s(l))return;e(l,t.result)}if(t.done){if(Aa({done:!0,code:Fe.SUCCESS,requestId:u}),u!==s(l))return;l===G.EXPLAIN?r.value=!0:a.value=!0}if(t.response){if(Aa({done:!0,code:(c=t.response)==null?void 0:c.code,requestId:u}),u!==s(l))return;if(n(l,!0,t.response.code||Fe.UNKNOWN_ERROR),t.response.code===Fe.NOT_LOGIN){o.value=void 0;const h=encodeURIComponent(`${he.pluginDescPage}?from=extensionLogin`);$e(`${he.loginUrl}?feature=${t.reportParams.feature}&position=${t.reportParams.position}&cb=${h}`)}t.response.code===Fe.PRIVILEGE_INSUFFICIENT&&$e(`${he.priceUrl}?source=${t.reportParams.feature}`)}},[Ie.CONTEXT_MENU_TOGGLE_SELECT_TRANSLATE]:t=>{const{contentScriptRefreshUserInfo:e}=_t();e().then(()=>{const{notifyUserSettings:n,getSettingByKey:r}=et(),a=r("inTextTranslation");a.enable=t,n({inTextTranslation:a}),I.reportClickEvent("Other",t?"plugin_rightclickmenu_enable_select_to_translate":"plugin_rightclickmenu_disable_select_to_translate")})},[Ie.CHANGE_TRANSLATE_OPTIONS]:t=>{const{changeTranslateOptions:e}=Pn();e(t)},[Ie.CLOSE_HOVER_BALL_ONBOARDING]:()=>{const{onBoardingShow:t}=Do();t.value=!1},[Ie.NOTIFY_NO_LOGIN_LOCALE_CHANGE]:t=>{const{userInfo:e}=_t();e.value||Fa(t)},[Ie.CURRENT_ACTIVE_WINDOW]:t=>{const{currentWindowId:e,isWindowActive:n}=Za();t===e.value?n.value=!0:n.value=!1},[Ie.GET_PAGE_TRANSLATE_TARGET_LANGUAGE]:(t,e,n)=>{const{userSettings:r}=et();n(r.value.targetLanguage)},[Ie.PDF_FILE_CHUNK]:t=>{I2(t)},[Ie.PDF_FILE_CHUNK_DONE]:t=>{B2(t)},[Ie.PDF_FILE_GET_ERROR]:t=>{N2(t)},[Ie.NOTIFY_CONTENT_USER_INFO_REFRESH]:t=>{const{setUserInfo:e}=_t();e(t)}};function $2(){chrome.runtime.onMessage.addListener((t,e,n)=>{const r=M2[t.type];if(r)return r(t.data,e,n)})}const oa=["translate","translator","","traduction","traduire","bersetzen","bersetzer","traducir","traductor","traduccin","","","","","","","","","terjemahan","penerjemah","menerjemahkan","tradurre","traduttore","traduzione","","","","","terjemah","penterjemah","tumaczy","tumacz","traduzir","tradutor","traduo","","","","","","eviri","evirmen","","","dch","bin dch","phin dch","",""],U2=/([\u4e00-\u9fa5a-zA-Z]+)\s*\s*([\u4e00-\u9fa5a-zA-Z]+)/,q2=["image","scan","picture","photo","screenshot","jpg","jpeg","png","screencap","screengrab","scanned","","","","","","","","","","image","numriser","image numrise","photo","capture d'cran","numrisation","Bild","Scan","gescannt","Foto","Screenshot","Bildschirmfoto","Bilddatei","imagen","escanear","imagen escaneada","foto","captura de pantalla","archivo escaneado","","",""," ","  ","  ",""," ","  "," ","  ","",""," "," "," ","","","","","   ","   ","gambar","pindai","foto","tangkapan layar","file yang dipindai","gambar yang dipindai","immagine","scansione","foto","screenshot","file scansionato","immagine scansionata","","","","","","","","","",""," "," ","imej","imbas","gambar","tangkapan skrin","fail yang diimbas","imej yang diimbas","obraz","skan","zdjcie","zrzut ekranu","zeskanowany plik","zeskanowany obraz","imagem","digitalizar","foto","captura de tela","arquivo digitalizado","imagem digitalizada","","","",""," "," ","","","","","","","resim","tarama","fotoraf","ekran grnts","taranan dosya","taranan resim","","",""," ","  ","  ","hnh nh","qut","nh","nh chp mn hnh","tp  qut","hnh nh  qut","","","","","",""],H2={PDF:["pdf","scanned file","image","",""," ","","","  ","imagen","archivo escaneado","image scanne","fichier scann","gescannt","Bild","scansione","immagine","","","","","imej","fail diimbas","obraz","zeskanowany","imagem","arquivo digitalizado","","","","","taranan dosya","resim","  ","","nh","tp  qut","",""],PPT:["ppt","presentation","powerpoint","pptx","dps","dpt","pps","pot","ppsx","potm","","","",""," ","presentacin","diapositiva","prsentation","diaporama","prsentation","presentazione","presentazione powerpoint","","","","","pembentangan","prezentacja","apresentao","","","","sunum","","","bi thuyt trnh","",""],XLS:["xls","csv","excel","sheets","xlsx","et","ett","xlsm","xltx","xltm","xlsb","xlam","xla","","",""," ",""," ","hoja de clculo","feuille de calcul","tabelle","","","","","lembaran","arkusz","planilha","","","excel","","","bng tnh"],File:["","","","","","","","documento","archivo","document","fichier","dokument","datei","documento","file","","","","","dokumen","fail","dokument","plik","","","","","belge","dosya","","","ti liu","tp tin","",""],DOC:["doc","word","docx","docs","wps","wpt","dot","dotx","docm","dotm","rtf"]},G2=["","Chinesisch","Chinese","Chino","","Chinois","","","Bahasa","Cinese","","","","Cina","Chiski","Chins","","","ince","Ting","","","","","",""],V2=[" "," ","Chinesisch traditionell","traditionell Chinesisch","Chinese Traditional","Traditional Chinese","Chino tradicional","tradicional Chino"," "," ","Chinois traditionnel","traditionnel Chinois"," "," "," "," ","Bahasa Mandarin Tradisional","Tradisional Mandarin Bahasa","Cinese tradizionale","tradizionale Cinese",""," ",""," "," ","Cina Tradisional","Tradisional Cina","Chiski tradycyjny","tradycyjny Chiski","Chins tradicional","tradicional Chins","  ","  "," "," ","ince Geleneksel","Geleneksel ince"," "," ","Ting Trung phn th","phn th Ting Trung","","","","",""];function er(t,e){const n=t.toLowerCase();for(const r of e)if(n.includes(r.toLowerCase()))return r.toLowerCase();return null}function W2(t,e){const n=t.toLowerCase();let r=-1;for(const a of e){const s=n.indexOf(a.toLowerCase());s!==-1&&(r===-1||s<r)&&(r=s)}return r}function z2(t){const e=er(t,oa);if(!e)return null;const n=er(t,q2);if(!n)return null;const r=mi(t);if(r===null)return{type:"Image",keyword:`${e}|${n}`};{const{to:a}=r;return{type:"Image",keyword:`${e}|${n}|${a}`,to:a}}}function hi(t){const e=er(t,oa);if(!e)return null;const n=t.toLowerCase();for(const[r,a]of Object.entries(H2))for(const s of a)if(n.includes(s.toLowerCase())){const o=`${e}|${s}`;return{type:r,keyword:o}}return{type:"File",keyword:""}}function j2(t){return t.replace(/[\(\][^)\]*[\)\]/g,"")}function mi(t){const e=new Map;let n=t;const r=er(n,V2);r&&(e.set("zh-TW",r),n=n.replace(r,""));const a=er(n,G2);a&&(e.set("zh-CN",a),n=n.replace(a,""));for(const s of Object.keys(Oa)){const o=Oa[s].language;for(const[u,l]of Object.entries(o)){if(e.has(u))continue;let c=j2(l).toLowerCase().trim();if(n.includes(c)){e.set(u,c);continue}if(c=c.replace(/$/,"").replace(/$/,""),n.includes(c)){e.set(u,c);continue}if(c=c.length>6?c.slice(0,-2):c,n.includes(c)){e.set(u,c);continue}}}if(Ue.info("",Array.from(e)),e.size===0)return null;if(e.size===1){const s=e.values().next().value,o=e.keys().next().value,u=t.indexOf(s);let l=W2(t,oa);return U2.test(t)&&(l=t.indexOf("")),u<l?null:{to:o}}if(e.size>1){const o=Array.from(e.entries()).map(([u,l])=>({key:u,index:t.indexOf(l)})).filter(u=>u.index!==-1).sort((u,l)=>u.index-l.index);if(o.length>=2)return Ue.info("",{from:o[0].key,to:o[1].key},""),{from:o[0].key,to:o[1].key}}return null}function vi(t){const e=/([\u4e00-\u9fa5a-zA-Z]+)\s*\s*([\u4e00-\u9fa5a-zA-Z]+)/;let n=er(t,oa);if(e.test(t)&&(n=""),!n)return null;t=t.toLocaleLowerCase().replace(/\+/g," ");const r=mi(t);if(r===null)return null;const{from:a,to:s}=r;if(!a&&s){const o=`${n}|${s}`;return{to:s,keyword:o}}if(a&&s){const o=`${n}|${a}|${s}`;return{from:a,to:s,keyword:o}}return null}const ds=[{name:"google",pattern:/^(https?:\/\/)?(www\.)?google\.[a-z.]+\/search.*?[?&]q=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.getElementById("center_col")),addMethod:(t,e)=>{if(e.getBoundingClientRect().width>750)return;let n=document.getElementById("rhs");if(!n){n=document.createElement("div"),n.id="rhs",n.style.display="block",n.style.width="fit-content";const r=e.parentElement;r==null||r.appendChild(n)}n.insertBefore(t,n.firstChild)}},{name:"bing",pattern:/^(https?:\/\/)?((www|cn)\.)?bing\.[a-z.]+\/search.*?[?&]q=([^&#]+)/i,getAnchorElement:()=>new Promise(t=>{setTimeout(()=>{t(document.getElementById("b_context"))},100)})},{name:"yahoo",pattern:/^(https?:\/\/)?([a-z]+\.)?search\.yahoo\.[a-z.]+\/search.*?[?&]p=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.getElementById("right"))},{name:"duckduckgo",pattern:/^https?:\/\/(www\.)?duckduckgo\.com\/.*[?&]q=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.querySelector('[data-testid="sidebar"]'))},{name:"yandex",pattern:/^(https?:\/\/)?(www\.)?yandex\.[a-z.]+\/search\/?\?(?:.*?&)?text=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.getElementById("search-result-aside"))}];function Ei(t){for(const e of ds){const n=t.match(e.pattern);if(n){const r=decodeURIComponent(n[n.length-1]||"");return{name:e.name,query:r}}}return null}const X2={style:{width:"336px","margin-bottom":"10px","margin-top":"10px",background:"rgba(255, 255, 255, 1)","border-radius":"16px",padding:"20px",border:"1px solid rgba(13, 13, 13, 0.12)",position:"relative","user-select":"none"}},Y2={style:{display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"12px"}},K2=["src"],Q2={style:{"font-weight":"600","font-size":"14px",color:"rgba(0, 0, 0, 0.9)"}},J2={style:{"font-size":"14px","font-weight":"400",color:"rgba(0, 0, 0, 0.9)","margin-bottom":"16px","line-height":"1.5"}},Z2=["accept"],eh=qe({__name:"index",setup(t){const{t:e}=gt(),n={TEXT:"text",FILE:"file",IMAGE:"image"};let r="",a="plugin_search_enginee_translate_file_card",s="",o="",u="";const l=D(null),c=D(n.FILE),h=D(""),v=D(""),E=oe(()=>({[n.TEXT]:"plugin_search_engine_translate_text_card_translate",[n.IMAGE]:"plugin_search_engine_translate_image_card_translate",[n.FILE]:"plugin_search_engine_translate_file_card_translate"})[c.value]),w=()=>chrome.runtime.getURL("public/logo/icon-128.png"),L=i=>{I.reportClickEvent(a,i)},R=()=>{L("settings"),$e(`${he.userCenterPage}?position=${E.value}&source=plugin`)},B=()=>{c.value===n.TEXT?$e(`${he.textTranslatePage}?position=${E.value}`):c.value===n.IMAGE?$e(`${he.imagePage}?position=${E.value}`):$e(`${he.fileTranslatePage}?position=${E.value}`)},m=i=>i.replace(/\s/g,"-"),A=()=>{var i,f,g;if(c.value===n.TEXT){const P=((i=rn(he.defaultLanguage))==null?void 0:i.label)||"English",W=m(((f=rn(o))==null?void 0:f.label)||P),$=m(((g=rn(s))==null?void 0:g.label)||P);$e(`${he.textTranslatePage}/${W}-to-${$}?position=${E.value}`),L("translate_now")}else if(c.value===n.IMAGE){const P=new URL(he.imagePage);u&&P.searchParams.set("target_language",u),$e(`${P.href}?position=${E.value}`),L("translate_now")}else{if(L("select_file"),!l.value)return;l.value.value="",l.value.click()}},d=i=>{var $;const f=($=i.target.files)==null?void 0:$[0];if(!f)return;if(f.size>ru){$e(`${he.fileTranslateRedirectPage}?file_load_error=OUT_OF_PLUGIN_PROXY_FILE_LIMIT&position=${E.value}`);return}const g=new Blob([f],{type:f.type}),P=URL.createObjectURL(g),W=new URL(he.fileTranslateRedirectPage);W.searchParams.set("pdf_url",encodeURIComponent(P)),W.searchParams.set("file_name",encodeURIComponent(f.name)),W.searchParams.set("position",E.value),$e(W.href)};return Ka(()=>{var N;const i=Ei(location.href);if(!i)return;const f=((N=rn(navigator.language))==null?void 0:N.value)||he.defaultLanguage,g=wo(f).value;r=i.query;const P=z2(r),W=vi(r),$=hi(r);v.value=e("common.selectFile",{},{locale:g});const ve=($==null?void 0:$.type)||"File",Z=ve==="File"?e("common.files",{},{locale:g}):ve,fe=e("searchEngineInsert.free",{},{locale:g});if(h.value=e("searchEngineInsert.accurateTranslate",[Z,fe],{locale:g}),P){c.value=n.IMAGE,v.value=e("searchEngineInsert.translateNow");const{to:x}=P;u=x||"",h.value=e("searchEngineInsert.imageTranslate")}else if(W){c.value=n.TEXT,v.value=e("searchEngineInsert.translateNow");const{from:x,to:F}=W,j=e(`language.${F}`,{},{locale:g});if(s=F,o=x||he.defaultLanguage,x){const Y=e(`language.${x}`,{},{locale:g});h.value=e("searchEngineInsert.translateFromTo",[Y,j],{locale:g})}else h.value=e("searchEngineInsert.translateTo",[j],{locale:g})}a={[n.TEXT]:"plugin_search_enginee_translate_text_card",[n.FILE]:"plugin_search_enginee_translate_file_card",[n.IMAGE]:"plugin_search_enginee_translate_image_card"}[c.value],I.reportShowEvent(a)}),(i,f)=>(k(),se("div",X2,[y("div",Y2,[y("div",{onClick:B,style:{display:"flex",cursor:"pointer","align-items":"center",gap:"8px"}},[y("img",{src:w(),style:{width:"20px",height:"20px"}},null,8,K2),y("div",Q2,de(i.$t("common.title")),1)]),ie(Pt,{onClick:R,icon:"setting",size:28,style:{"margin-right":"-4px","margin-top":"-4px"}})]),y("div",J2,de(h.value),1),y("button",{onClick:A,style:{display:"block",width:"100%",background:"rgba(237, 242, 255, 1)",border:"none","border-radius":"8px",padding:"12px",color:"rgba(41, 98, 255, 1)","font-weight":"600","font-size":"14px",cursor:"pointer"}},de(v.value),1),y("input",{ref_key:"fileInput",ref:l,style:{display:"none"},type:"file",accept:z(nu),onChange:d},null,40,Z2)]))}}),th="wps-translate-search-enhance";let Gn=null;async function nh(t){var a;let e=0;const n=4,r=100;for(;e<n;){const s=await((a=ds.find(o=>o.name===t))==null?void 0:a.getAnchorElement())||null;if(s)return s;await new Promise(o=>setTimeout(o,r)),e++}return null}async function rh(t,e){const n=await nh(t);if(!n)return;const r=ds.find(a=>a.name===t);r&&(r.addMethod?r.addMethod(e,n):n.insertBefore(e,n.firstChild))}function ah(){if(Yr())return;const t=Ei(location.href);if(!t)return;const e=t.query;if(!vi(e)&&!hi(e))return;const n=t.name;Gn=Qn(th,eh),rh(n,Gn),Qr({name:Jr.INJECTION,onDisconnect:()=>{Gn==null||Gn.remove(),Gn=null}})}const bi=["www.toolsmart.ai","test.toolsmart.ai"];function sh(){bi.includes(window.location.hostname)&&sessionStorage.setItem("anydoc_plugin_install_flag","true")}function oh(){bi.includes(window.location.hostname)&&sessionStorage.removeItem("anydoc_plugin_install_flag")}const ih=bo,no="__wps-translate-entry-init-timestamp__";async function Ti(){const t=await We(ge.TRANSLATE_TEXT);t&&window.postMessage({type:"translateText",source:"extension",data:{text:t}},window.location.origin)}async function wi(){const t=await We(ge.ON_BOARDING_TIME,Date.now());window.postMessage({type:"ping",source:"extension",data:{installTimestamp:t}},window.location.origin)}async function _i(){const t=await We(ge.CONFIGS);window.postMessage({type:"extensionSetting",source:"extension",data:t},window.location.origin)}function uh(){location.host===he.webHost&&window.addEventListener("message",async t=>{t.source===window&&t.origin===window.location.origin&&t.data.source==="page"&&(Ue.warn(`receive ${t.data.type} from web`),t.data.type==="ping"&&wi(),t.data.type==="getTranslateText"&&Ti(),t.data.type==="clearTranslateText"&&Kn(ge.TRANSLATE_TEXT),t.data.type==="getExtensionSetting"&&_i(),t.data.type==="getPdfContent"&&R2(t.data.data))})}async function lh(){location.host===he.webHost&&(Ti(),wi(),_i())}function ch(){const t=aa(location.href);if(t!=null&&t.name&&![Gr.YOUTUBE].includes(t.name)||document.getElementById("anydoc-subtitle-inject"))return;const e=document.createElement("script");e.id="anydoc-subtitle-inject",e.src=chrome.runtime.getURL("public/subtitle/script/inject.js"),e.onload=()=>{},e.onerror=()=>{},document.head.appendChild(e)}function ph(){const t=+new Date;window[no]=t;let e=!0,n=Qn(ih,v2);document.documentElement.appendChild(n);const r=new MutationObserver(a=>{if(window[no]!==t||!e){r.disconnect();return}a.forEach(s=>{s.type==="childList"&&!document.documentElement.contains(n)&&document.documentElement.appendChild(n)})});r.observe(document.documentElement,{childList:!0,subtree:!0}),Qr({name:Jr.INJECTION,onDisconnect:()=>{e=!1,r.disconnect(),n.remove(),n=null,oh()}}),$2(),uh(),ch(),ah(),lh(),sh()}ph();
