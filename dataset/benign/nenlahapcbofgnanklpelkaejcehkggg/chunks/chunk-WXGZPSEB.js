import{c as O}from"./chunk-AYDLOBCW.js";import{b as g,c as h,e as R}from"./chunk-3GYLW4KZ.js";function U(e){if(e&&!e.includes("-")){let r=e.split("");return[20,16,12,8].forEach(t=>r.splice(t,0,"-")),r.join("")}return e}var A=g(()=>{"use strict"});var P=h((_,b)=>{"use strict";function E(e,r){return Object.prototype.hasOwnProperty.call(e,r)}b.exports=function(e,r,t,c){r=r||"&",t=t||"=";var n={};if(typeof e!="string"||e.length===0)return n;var i=/\+/g;e=e.split(r);var o=1e3;c&&typeof c.maxKeys=="number"&&(o=c.maxKeys);var u=e.length;o>0&&u>o&&(u=o);for(var s=0;s<u;++s){var f=e[s].replace(i,"%20"),p=f.indexOf(t),y,I,d,m;p>=0?(y=f.substr(0,p),I=f.substr(p+1)):(y=f,I=""),d=decodeURIComponent(y),m=decodeURIComponent(I),E(n,d)?Array.isArray(n[d])?n[d].push(m):n[d]=[n[d],m]:n[d]=m}return n}});var w=h((B,x)=>{"use strict";var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};x.exports=function(e,r,t,c){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(n){var i=encodeURIComponent(a(n))+t;return Array.isArray(e[n])?e[n].map(function(o){return i+encodeURIComponent(a(o))}).join(r):i+encodeURIComponent(a(e[n]))}).filter(Boolean).join(r):c?encodeURIComponent(a(c))+t+encodeURIComponent(a(e)):""}});var C=h(l=>{"use strict";l.decode=l.parse=P();l.encode=l.stringify=w()});function S({params:e={},isWbPublisher:r=!1,rewardsEngineEnabled:t=!1,sessionId:c,WIKIBUY_API:n}={}){let i={...K};r&&(i.channel="cashback-ims",i.userId=c,i.wbPublisher="wb");let o=t&&e.token;o?delete e.vendorMetaId:e.vendorMetaId&&delete e.token,(o||e.vendorMetaId)&&(i.credits=!0);let u={...i,...(0,M.pickBy)(e,(s,f)=>s!=null&&D.includes(f)),extensionVersion:chrome.runtime.getManifest().version};return u.redirectId&&(u.redirectId=U(u.redirectId)),`${n}/redirectV2?${v.default.stringify(u)}`}var M,v,D,K,T=g(()=>{"use strict";M=R(O()),v=R(C());A();D=["autoRedirect","channel","clickEvent","credits","destDomain","destUrl","redirectId","sameTab","subExperience","token","userId","vendorMetaId","wbPublisher","runId"],K={autoRedirect:!0,credits:!1,experience:"extension"}});export{C as a,U as b,A as c,S as d,T as e};
