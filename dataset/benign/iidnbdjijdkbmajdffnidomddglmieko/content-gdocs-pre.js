/*! For license information please see content-gdocs-pre.js.LICENSE.txt */
try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d0c8c0ef-9dcb-423c-bd70-5b6ef2b7d600",e._sentryDebugIdIdentifier="sentry-dbid-d0c8c0ef-9dcb-423c-bd70-5b6ef2b7d600")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"4.43.1"};(()=>{var e,t,n,r,o,i={8140:(e,t,n)=>{"use strict";n.a(e,async(e,t)=>{try{var r=n(23224),o=n(77431),i=n(11713),a=n(40818),s=n(89493),u=n(63919),c=n(94301),l=n(46397);function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return y(c,"_invoke",function(n,r,o){var i,s,u,c=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,u=e,f.n=n,a}};function h(n,r){for(s=n,u=r,t=0;!d&&c&&!o&&t<l.length;t++){var o,i=l[t],h=f.p,p=i[2];n>3?(o=p===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,p),s=l,u=p;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,u)):f.n=u:f.v=u);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==a)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(n,o,i),!0),c}var a={};function s(){}function u(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,y(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return u.prototype=c,y(d,"constructor",c),y(c,"constructor",u),u.displayName="GeneratorFunction",y(c,o,"GeneratorFunction"),y(d),y(d,o,"Generator"),y(d,r,function(){return this}),y(d,"toString",function(){return"[object Generator]"}),(b=function(){return{w:i,m:f}})()}function y(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}y=function(e,t,n,r){function i(t,n){y(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},y(e,t,n,r)}var d=location.href.includes("docs.google.com/document/")||location.href.includes("docs.google.com/presentation/");try{u.Qf.set(u.OJ.CHROME_EXTENSION_ID,"oldceeleldhonbafppcapldpdifcinji"),u.Qf.set(u.OJ.EXTN_PREFIX,"qb"),u.Qf.set(u.OJ.COLORS_GRAMMAR,{BACKGROUND:"rgba(220,38,38,0.1)",EMPHASIZE:"rgba(220,38,38,0.1)",SELECTED_UNDERLINE:"#df2020",UNDERLINE:"#f2a6a6"}),u.Qf.set(u.OJ.COLORS_SPELLING,{BACKGROUND:"rgba(220,38,38,0.1)",EMPHASIZE:"rgba(220,38,38,0.1)",SELECTED_UNDERLINE:"#df2020",UNDERLINE:"#f2a6a6"}),u.Qf.set(u.OJ.COLORS_PARAPHRASE,{BACKGROUND:"rgb(0, 103, 197, 0.15)",EMPHASIZE:"rgb(0, 103, 197, 0.15)",TITLE:"",UNDERLINE:"transparent"}),u.Qf.set(u.OJ.COLORS_STYLE,{BACKGROUND:"rgba(67, 67, 67, 0.1)",EMPHASIZE:"rgba(67, 67, 67, 0.1)",SELECTED_UNDERLINE:"#B4B4B4",TITLE:"",UNDERLINE:"#00000033"}),u.Qf.set(u.OJ.CARD_LAYOUT,i.EA),u.Qf.set(u.OJ.SITE_INIT_ATTRIBUTE,"data-qb-site"),u.Qf.set(u.OJ.INSTALLED_ATTRIBUTE,"data-qb-installed"),u.Qf.set(u.OJ.MAIN_CONTENT_SCRIPT_FILENAME,"quillbot-content.js"),u.Qf.set(u.OJ.TMP_ID_ATTRIBUTE,"data-qb-tmp-id"),u.Qf.set(u.OJ.INPUT_AREA_INIT_ATTRIBUTE,"data-qb-tweaks"),u.Qf.set(u.OJ.MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED,!0),u.Qf.set(u.OJ.MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS,1e4),u.Qf.set(u.OJ.SELECTED_UNDERLINE_THICKNESS,2),u.Qf.set(u.OJ.COLORS_RECOMMENDATION_TEASE,{BACKGROUND:"rgba(242,181,24,0.16)",EMPHASIZE:"rgba(242,181,24,0.16)",SELECTED_UNDERLINE:"#CF9F02",UNDERLINE:"#CF9F0280"}),u.Qf.set(u.OJ.TOOLBAR_SIZE,c._O),u.Qf.set(u.OJ.BULLET_POINT_PARSING_PREFIX,""),u.Qf.set(u.OJ.SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA,!0),u.Qf.set(u.OJ.IGNORE_EDITOR_WITH_ATTRIBUTES,["spellcheck"]),u.Qf.set(u.OJ.SPECIAL_INTRODUCTORY_TEASER_ENABLED,!1),u.Qf.set(u.OJ.TERMS_OF_SERVICE_MODAL_ENABLED,!1),u.Qf.set(u.OJ.LOLLIPOP_CONFIG,{DEEP_LINK_INTO_TOOLBOX:!0,LOLLIPOP_CIRCLE_GDOCS_IMAGE_PATH:"/assets/images/toolbox/lp_icon_gdocs_qb.svg",LOLLIPOP_CIRCLE_IMAGE_PATH:"/assets/images/toolbox/lp_icon_qb.svg",LOLLIPOP_CSS_PATH:"assets/css/lollipop.css",LOLLIPOP_THEME:"green",ONBOARDING_BORDER_RADIUS:"40px",ONBOARDING_IMAGE_PATH:"/assets/images/toolbox/toolbox_onboarding_qb.webp",ONBOARDING_LANDING_PAGE_URL:"https://quillbot.com/app/text-cursor",PPHR_SUPPORTS_MULTISENTENCE:!1,SUPPORTS_DARK_MODE:!1,TOOLBOX_AVAILABLE_UI_LANGUAGES:["en"],TOOLBOX_HOTKEY:"Control",TOOLBOX_IFRAME_PATH:"toolbox/toolbox.html",TRACKING_SAMPLING_RATE:0}),u.Qf.set(u.OJ.NORMALIZE_SPACE,!0),u.Qf.set(u.OJ.STRIP_WRAPPING_QUOTES_FROM_SENTENCE,!1),u.Qf.set(u.OJ.SHOW_PARTIAL_RECO_UNDERLINE,!0);var f=u.l_.isSafari();if(d)if(f){var h=function(){var e=(0,o.A)(b().m(function e(){var t,n;return b().w(function(e){for(;;)switch(e.n){case 0:t="data-".concat(u.Qf.get(u.OJ.EXTN_PREFIX),"-ready"),n=function(){return document.documentElement.hasAttribute(t)&&"complete"===document.readyState};case 1:if(n()){e.n=3;break}return e.n=2,new Promise(function(e){setTimeout(e,100)});case 2:e.n=1;break;case 3:return e.a(2,!0)}},e)}));return function(){return e.apply(this,arguments)}}(),p=document.createElement("script"),_="object"===("undefined"==typeof browser?"undefined":(0,r.A)(browser))?browser:self.chrome;p.src=_.runtime.getURL("content.js"),p.setAttribute("data-lt-extension-id",_.runtime.id),p.setAttribute("fetchpriority","high"),(document.head||document.documentElement).appendChild(p),p.onload=function(){p.remove()},await h(),await(0,l.O)().runtime.sendMessage({command:"LOAD_GDOCS_CONTENT_SCRIPT"})}else{var E=document.createElement("script"),g="object"===("undefined"==typeof browser?"undefined":(0,r.A)(browser))?browser:self.chrome;E.src=g.runtime.getURL("content.js"),E.setAttribute("data-lt-extension-id",g.runtime.id),E.setAttribute("fetchpriority","high"),(document.head||document.documentElement).appendChild(E),E.onload=function(){E.remove()}}}catch(A){}var m=!1;try{m=await(0,a.fw)(i.MF.HARDWARE_INFO_TRACKED)}catch(T){}if(!0!==m){var v=(0,s.j)();(0,l.O)().runtime.sendMessage({command:"SEND_HARDWARE_INFO",payload:v})}t()}catch(S){t(S)}},1)},10028:(e,t,n)=>{"use strict";n.d(t,{El:()=>W,Go:()=>X,Gv:()=>T,Kg:()=>R,PN:()=>Z,S:()=>J,Tn:()=>S,Xm:()=>C,YW:()=>I,Zn:()=>j,bp:()=>K,f0:()=>Q,hT:()=>H,mP:()=>$,mq:()=>U,oi:()=>F,p$:()=>q,sb:()=>z,vB:()=>oe});var r=n(77431),o=n(23224),i=n(87526),a=n(36441),s=n(22412);function u(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return c(l,"_invoke",function(n,r,o){var i,s,u,c=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,u=e,f.n=n,a}};function h(n,r){for(s=n,u=r,t=0;!d&&c&&!o&&t<l.length;t++){var o,i=l[t],h=f.p,p=i[2];n>3?(o=p===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,p),s=l,u=p;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,u)):f.n=u:f.v=u);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==a)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(n,o,i),!0),l}var a={};function s(){}function l(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(c(t={},r,function(){return this}),t),h=d.prototype=s.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,o,"GeneratorFunction")),e.prototype=Object.create(h),e}return l.prototype=d,c(h,"constructor",d),c(d,"constructor",l),l.displayName="GeneratorFunction",c(d,o,"GeneratorFunction"),c(h),c(h,o,"Generator"),c(h,r,function(){return this}),c(h,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:p}})()}function c(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}c=function(e,t,n,r){function i(t,n){c(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},c(e,t,n,r)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f,h;try{f=new RegExp("\\p{L}","u")}catch(e){f=/[a-z\xe4\xf6\xfc\xdf]/i}function p(e){return f.test(e)}try{h=new RegExp("(?:\\p{Emoji}|\\u200d|\\ufe0e|\\ufe0f)","u")}catch(e){h=/_^/}var _,E,g,m,v,b,y,A,T=function(e){return!!e&&Object.getPrototypeOf(e)===Object.prototype},S=function(e){return"function"==typeof e},R=function(e){return"string"==typeof e};E="\b\t \u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200f\u3000",g=new RegExp("^["+E+"]$"),m=new RegExp("["+E+"]","g"),_=function(e){return e.replace(m," ")},v="\u200b\u200c\u200d\xad\u2060\u202a\u202b\u202c\u202d",b=new RegExp("^["+v+"]$"),y=new RegExp("["+v+"]"),A=new RegExp("["+v+"]","g");var O=new RegExp("^"+s.INVISIBLE_SEPARATOR+"+");function I(e){return e.replace(O,"")}var N=new RegExp(s.INVISIBLE_SEPARATOR+"+$");function C(e){return e.replace(N,"")}var w,P,k,L,D,x,U=(w=/^[A-Z\xc8\xc9\xca\xc1\xc0\xc2\xd3\xd2\xd4\xda\xd9\xdb\xcd\xcc\xce\xc4\xdc\xd6]+[A-Z\xc8\xc9\xca\xc1\xc0\xc2\xd3\xd2\xd4\xda\xd9\xdb\xcd\xcc\xce\xc4\xdc\xd6\-!?#@=%().:;<>'\u2019\xb4`"\u201d\u201c*+,\s]+[A-Z\xc8\xc9\xca\xc1\xc0\xc2\xd3\xd2\xd4\xcd\xcc\xce\xc4\xdc\xd6]$/,function(e){return w.test(e)});function M(e,t){var n=t||{start:-1},r=n.start,o=n.end,i=void 0===o?r:o;if(e&&-1!==r){var s=e.map(function(e){return Array.isArray(e)?e:[e.start,e.end]}).findIndex(function(e){var t=(0,a.A)(e,2),n=t[0],o=t[1];return r>=n&&i<=o});if(!(s<0))return e[s]}}k=/(?:\S+\s+){0,4}\S+$/,L=/^\S+(?:\s+\S+){0,4}/,P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=function(){try{var e=r?"":["\\p{Emoji}","\\u200d","\\ufe0e","\\ufe0f"].join("");return[new RegExp("^\\s*(-?[\\p{L}#*"+e+"]+){0,3}-?\\s*$","u"),new RegExp("^\\s*[\\p{L}#*"+e+"]+(-[\\p{L}#*"+e+"]+){0,3}\\s*$","u")]}catch(e){return[/^\s*(-?[a-z\xe4\xf6\xfc\xdf#*]+){0,3}-?\s*$/i,/^\s*[a-z\xe4\xf6\xfc\xdf#*]+(-[a-z\xe4\xf6\xfc\xdf#*]+){0,3}\s*$/i]}}(),i=(0,a.A)(o,2),s=i[0],u=i[1],c=function(e){return!r&&(t=e,h.test(t));var t},l=e.substring(t,n),d=l.match(/^[^\S]*/),f=(0,a.A)(d,1)[0].length,_=void 0===f?0:f,E=l.match(/[^\S]*$/),g=(0,a.A)(E,1)[0].length,m=void 0===g?0:g;if(!s.test(l))return null;for(var v,b,y,A,T=(v=t+_,q((b=e.substring(0,v).split(/[^\S]+/))[b.length-1]).reverse()),S=(y=n-m,A=e.substring(y).split(/[^\S]+/),q((0,a.A)(A,1)[0])),R=Math.max(T.length,S.length),O=!1,I=!1,N=t,C=n,w=0;w<R;w++){var P=T[w],k=P&&(p(P)||c(P)||"-"===P),L=S[w],D=L&&(p(L)||c(L)||"-"===L);if(k&&!O?N-=P.length:O=!0,D&&!I?C+=L.length:I=!0,O&&I)break}_>0&&(N+=_),m>0&&(C-=m);var x=e.substring(N,C);return u.test(x)?{start:N,end:C}:null},function(){var e,t,n,r,o,i=[['"','"'],["'","'"],["\u201c","\u201d"],["\u201e","\u201c"],["\u2018","\u2019"],["\u201a","\u2018"],["\xab","\xbb"],["\xbb","\xab"],["`","`"],["\xb4","\xb4"],["{","}"],["[","]"],["(",")"],["<",">"]],s="[^\\S]",u="[.,:;\xa1!\xbf?]",c=/(?:\S+\s+){0,4}\S+$/,l=/^\S+(?:\s+\S+){0,4}/;try{var d=[s,u,"[\\udc00-\\udfff\\ud800-\\udb7f\\u200d\\ufe0e\\ufe0f\\p{Emoji_Presentation}\\p{Emoji_Modifier}\\p{Emoji}]"].join("|");t=new RegExp("(?:".concat(d,")"),"u"),n=new RegExp("^(?:".concat(d,")*"),"u"),r=new RegExp("(?:".concat(d,")*$"),"u"),e=new RegExp("^\\s*\\p{L}+(-\\p{L}+)*\\s*$","u"),o=new RegExp("^\\p{L}+$","u")}catch(i){var f=[s,u].join("|");t=new RegExp("(?:".concat(f,")")),n=new RegExp("^(?:".concat(f,")*")),r=new RegExp("(?:".concat(f,")*$")),e=/^\s*[a-z\xe4\xf6\xfc\xdf]+(-[a-z\xe4\xf6\xfc\xdf]+)*\s*$/i,o=/^[a-z\xe4\xf6\xfc\xdf]+$/i}D=function(u,c){var l,d,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,h=arguments.length>3?arguments[3]:void 0,p=u.substring(c,f),_=c===f,E=_?u.substring(c-1,f):"",g=_?u.substring(c,f+1):"",m=!!_&&0===[E,g].filter(function(e){return!!e.match(o)}).length,v=p.split(new RegExp("".concat(s,"+"))).length>5,b=p.match(n),y=(0,a.A)(b,1)[0],A=void 0===y?"":y,T=p.match(r),S=(0,a.A)(T,1)[0],R=void 0===S?"":S,O=A.length,I=R.length,N=[A.trim(),R.trim()];if(m||v)return null;for(var C=(null===(l=function(e,t){var n=(t||{start:-1}).start;if(e&&-1!==n){return e.sort(function(e,t){return e.start-t.start}).find(function(e){if(n<=e.end&&n>=e.start)return!0})||void 0}}(h,{start:c,end:f}))||void 0===l?void 0:l.start)||0,w=(null===(d=function(e,t){var n=(t||{end:-1}).end;if(e&&void 0!==n&&-1!==n){return e.sort(function(e,t){return e.start-t.start}).find(function(e){if(n<=e.end&&n>=e.start)return!0})||void 0}}(h,{start:c,end:f}))||void 0===d?void 0:d.end)||u.length-1,P=c+O;P>C;){var k=u[P-1].match(t)||[],L=(0,a.A)(k,1)[0];if(L){0===O&&(N[0]+=L.trim());break}P--}for(var D=f-1-I;D<w-1;){var x=u[D+1].match(t)||[];if((0,a.A)(x,1)[0]){0===I&&(N[1]+=u[D+1].trim());break}D++}if(D+=1,P===C&&D===w)return null;var U=u.substring(P,D);if(U.split(e).length>=6)return null;for(var M=!1,G=!1,F=0,B=i;F<B.length;F++){var H=(0,a.A)(B[F],2),j=H[0],W=H[1];M||!U.startsWith(j)||U.slice(1).includes(W)||(P+=1,M=!0,N[0]+=U[0]);var z=U.length-1;G||!U.endsWith(W)||U.slice(0,z).includes(j)||(D-=1,G=!0,N[1]+=U[z])}return{start:P,end:D,omittedCharacters:N}},x=function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3?arguments[3]:void 0,a=D(e,t,o,i);if(!a)return null;var s=M(i,{start:t,end:o});a=function(){if(!s)return a;var t=e.slice(s.start,a.start),n=e.slice(a.end,s.end),r=!t||!!t.match(/^[\xa1\xbf]+$/),o=!n||!!n.match(/^[.!?]+$/);return r&&o&&(a={start:s.start,end:s.end,omittedCharacters:["",""]}),a}();var u="",d="",f="";if(s)f=e.substring(s.start,s.end).trim(),u=e.slice(s.start,a.start).trim(),d=e.slice(a.end,s.end).trim();else{var h=c.exec(e.substring(0,a.start).trim());u=(u=h?h[0]:"").replace(/^.+\n\n/,"");var p=l.exec(e.substring(a.end).trim());d=(d=p?p[0]:"").replace(/\n\n.+/,"")}return null===(n=(r=x).trackOmittedCharacters)||void 0===n||n.call(r,a.omittedCharacters),{phrase:e.substring(a.start,a.end),position:{start:a.start,end:a.end},sentence:f,beforeText:u,afterText:d}}}();var G=function(e){for(var t,n,r=s.INVISIBLE_SEPARATOR.charCodeAt(0).toString(16),o=new RegExp("^(?:[^\\S]|\u2022|\\u".concat(r,")+$")),i=new RegExp("^(?:[^\\S]|\\u".concat(r,")+$")),a=e.split("").reverse().join(""),u=Math.floor(e.length/2),c=0,l=0,d=0;d<u;d++){var f=e.charAt(d),h=a.charAt(d);if(!0!==t&&f.match(o)?(c+=1,t=!1):t=!0,!0!==n&&h.match(i)?(l+=1,n=!1):n=!0,t&&n)break}return[c,l]},F=function(e,t){var n,r=new RegExp(s.INVISIBLE_SEPARATOR,"g"),o=[],i=l(e);try{for(i.s();!(n=i.n()).done;){var u=n.value,c=u.start,d=u.end,f=t.substring(c,d);if(f.replace(r,"").trim()){var h=G(f),p=(0,a.A)(h,2),_=p[0],E=p[1],g=c+_,m=g+f.length-_-E,v=m-g;o.push({start:g,end:m,length:v,detectedLanguages:u.detectedLanguages,checkStatus:u.checkStatus})}}}catch(e){i.e(e)}finally{i.f()}return o};function B(e,t){if(e===t)return null;var n=0,r=Math.max(e.length,t.length);for(n=0;n<r&&e[n]===t[n];n++);for(var o=0,i=Math.min(e.length,t.length);n+o<i;){if(e[e.length-o-1]!==t[t.length-o-1])break;o++}return{from:n,oldFragment:e.substring(n,e.length-o),newFragment:t.substring(n,t.length-o)}}function H(e,t){var n=[];arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=ne(e),t=ne(t));var r=e.split("\n"),o=t.split("\n"),i=0,a=Math.max(r.length,o.length);for(i=0;i<a&&r[i]===o[i];i++);for(var s=0,u=Math.min(r.length,o.length);i+s<u;){if(r[r.length-s-1]!==o[o.length-s-1])break;s++}for(var c=0,l=0;l<i;l++)c+=r[l].length+1;for(var d=c,f=i;f<a-s;f++){var h=f<r.length-s?r[f]:null,p=f<o.length-s?o[f]:null;h===p&&c===d||n.push({oldText:h,newText:p,oldOffset:c,newOffset:d,textDiff:B(h||"",p||"")}),null!==h&&(c+=h.length+1),null!==p&&(d+=p.length+1)}if(c!==d)for(var _=s-1;_>=0;_--){var E=r[r.length-_-1],g=o[o.length-_-1];n.push({oldText:E,newText:g,oldOffset:c,newOffset:d,textDiff:null}),c+=E.length+1,d+=g.length+1}return n}function j(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;").replace(/\//g,"&#x2F;")}function W(e,t){for(var n=0,r=e.length-1;n<=r;){var o=n+Math.ceil((r-n)/2),i=t(e[o]);if(i>0)n=o+1;else{if(!(i<0)){for(var a=o;a>0;a--)if(0!==t(e[a-1]))return e[a];return e[0]}r=o-1}}return null}function z(e){var t=[];return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t}function X(e){if(null===e||"object"!==(0,o.A)(e))return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=X(e[n]);return t}var V=null;function q(e){return Intl.Segmenter?(V||(V=new Intl.Segmenter(void 0,{granularity:"grapheme"})),Array.from(V.segment(e),function(e){return e.segment})):(0,i.A)(e)}function K(){if("about:blank"===location.href||"about:srcdoc"===location.href)try{return(self.opener||self.parent).location.href}catch(e){}return location.href}var Y,Z=function(e){return e.GC="GC",e.GC_RECOMMENDATION="GC_RECOMMENDATION",e.REPHRASING="PPHR",e}({}),J=(Y=/^\w+\.$/,function(e,t){if(!e.isSpellingError)return!1;var n,r=e.originalPhrase;if(Y.test(r)&&(r=r.substring(0,r.length-1)),t.includes(r))return!0;if((n=r.charAt(0))===n.toUpperCase()&&n!==n.toLowerCase()){var o=function(e){return e.charAt(0).toLowerCase()+e.substr(1)}(r);if(t.includes(o))return!0}return!1});!function(){var e=/[\u0300-\u036f]/g,t=/\u0142/g,n=/\u00F8/g}();function $(e,t,n,r){return arguments.length>4&&void 0!==arguments[4]&&arguments[4]?e<=r&&t>=n:e<r&&t>n}function Q(e,t,n){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){if(t<=e&&e<n)return 0}else if(t<=e&&e<=n)return 0;return e-t}function ee(e){return te.apply(this,arguments)}function te(){return(te=(0,r.A)(u().m(function e(t){var n,r,o,i;return u().w(function(e){for(;;)switch(e.n){case 0:return n=(new TextEncoder).encode(t),e.n=1,crypto.subtle.digest("SHA-256",n);case 1:return r=e.v,o=Array.from(new Uint8Array(r)),i=o.map(function(e){return e.toString(16).padStart(2,"0")}).join(""),e.a(2,i)}},e)}))).apply(this,arguments)}var ne=function(e){return _(e).replace(/[\u00A0]/g," ").normalize()};var re="claudia";function oe(){return ie.apply(this,arguments)}function ie(){return(ie=(0,r.A)(u().m(function e(){var t,n;return u().w(function(e){for(;;)switch(e.n){case 0:return t=function(){var e=(0,o.A)(s).indexOf("o")>-1;return("__"+(re=e?s.MASCOT_NAME:re)+"::"+~~(+new Date/1e3)).substring(2,64)}(),e.n=1,ee(t);case 1:return n=e.v,e.a(2,n)}},e)}))).apply(this,arguments)}},11713:(e,t,n)=>{"use strict";n.d(t,{EA:()=>u,MF:()=>s});var r,o=n(27120),i=n(81568),a=n(49646),s={AB_TEST_DATA_API_ERROR:"AB_TEST_DATA_API_ERROR",ACCEPTED_PRIVACY_POLICY_2023_DECEMBER_15:"ACCEPTED_PRIVACY_POLICY_2023_DECEMBER_15",ACTIVE_CAMPAIGNS_CHROME_STORAGE_KEY:"qb-active-campaigns",ADD_WORD_TO_DICTIONARY_ERROR:"ADD_WORD_TO_DICTIONARY_ERROR",AI_DETECTOR_PRODUCT_URL:"https://".concat(o.tU.ENV_URL,"/ai-content-detector?product=").concat(o.tU.EXTENSION_TYPE),AMPLITUDE_EXPERIMENTS:"ampExperiments",API_PREFIX_URL:"".concat(o.tU.BACKEND_HOST,"/api"),AUTHENTICATE_CAMPAIGN_API_ERROR:"AUTHENTICATE_CAMPAIGN_API_ERROR",BOT_DETECTED:"botDetected",CACHE_API:"cacheApi",CACHE_PREFIX:"cache~",CHATGPT_CONFIG:"chatgptConfig",CHROME_PROTOCOL_BASED_URL:"chrome://**",CHROME_STORAGE_LANGUAGE_CONFIG_KEY:"languageConfig",CLASSIC_EXT_URL:"https://".concat(o.tU.ENV_URL,"/extension"),CUSTOM_TOKEN_SCOPE:"CHROME_EXT",DATA_SHARING:"DATA_SHARING",DETECT_LANGUAGE_API_ERROR:"UTILS_DETECT_LANGUAGE_ERROR",DETECT_LANGUAGE_API_SUCCESS:"UTILS_DETECT_LANGUAGE_API_SUCCESS",DEVICE_ID_HEADER_NAME:"device-id",DISABLE:"DISABLE_EXTENSION",DOCS_EXT_URL:"https://workspace.google.com/marketplace/app/quillbot_paraphrasing_and_summarizing_to/305988918037",ELEMENT_OBSERVABLE_SUBS:{ELEMENT_POSITION_UPDATES:"ELEMENT_POSITION_UPDATES",GRAMMAR_HIGHLIGHTS:"GRAMMAR_HIGHLIGHTS",INPUT_TEXT_DESELECTION:"INPUT_TEXT_DESELECTION",INPUT_TEXT_SELECTION:"INPUT_TEXT_SELECTION",RESIZE_ELEMENT:"RESIZE_ELEMENT",RESIZE_PARENT:"RESIZE_PARENT",TRACK_TOKENS:"TRACK_TOKENS"},EMAIL_FEEDBACK_URL:"https://mail.google.com/mail/",ENABLE_LOLLIPOP:"hasLollipopEnabled",EXT_INSTALLATION_FIRST_USE_POST_INSTALL_TIMESTAMP:"EXT_INSTALLATION_FIRST_USE_POST_INSTALL_TIMESTAMP",EXT_INSTALLATION_TIMESTAMP:"EXT_INSTALLATION_TIMESTAMP",EXT_INSTALLATION_TYPE:"EXT_INSTALLATION_TYPE",EXTENSION_HASH:"extensionHash",EXTENSION_INITIAL_ONBOARDING_TOUR_DISMISSED:"OnBoardingDismissed",EXTENSION_INITIAL_ONBOARDING_TOUR_DISMISSED_TIMESTAMP:"onboardingDismissedTimestamp",EXTENSION_INITIAL_ONBOARDING_TOUR_FIRST_TIME_RENDERED:"onboardingFirstTimeRendered",EXTENSION_PLAYGROUND:"qb-extension-playground",EXTERNAL_MSG_DETECT:"detect-extension",EXTERNAL_MSG_FOR_DATA_OPT_IN:"data-opt-in",EXTERNAL_MSG_FOR_DISABLE:"EXTERNAL_MSG_FOR_DISABLE",EXTERNAL_MSG_FOR_ENABLE:"EXTERNAL_MSG_FOR_ENABLE",EXTERNAL_MSG_FOR_PRIVACY:"privacy-policy-verified",EXTERNAL_MSG_FOR_RECAPTCHA:"captcha-verified",EXTERNAL_MSG_FOR_USER_GC_LANGUAGE_CONFIG:"user-gc-language-config",EXTERNAL_MSG_FOR_USER_ID_TOKEN:"EXTERNAL_MSG_FOR_USER_ID_TOKEN",EXTERNAL_MSG_FOR_USER_PREFERENCE:"EXTERNAL_MSG_FOR_USER_PREFERENCE",EXTERNAL_MSG_HANDLE_OCTOBER24_TOS:"HANDLE_OCTOBER24_TOS",EXTERNAL_MSG_INPUT_TEXT:"paraphrase-input-text",EXTERNAL_MSG_TO_CHECK_PIN_STATUS:"check-is-pinned",EXTRACT_KEYWORDS_API_ERROR:"EXTRACT_KEYWORDS_API_ERROR",FEATURE_CONFIG:"featureConfig",GA_API_URL:"https://www.google-analytics.com",GA_COOKIE_KEY:"CUSTOM_GA_CLIENT_ID",GC_SURVEY_URL:"https://docs.google.com/forms/d/1iQeB8Kc-VtJ4hqgusrgTM2gqoTEfcnJRyfsLxhyezS0/viewform?edit_requested=true",GDOCS_FEEDBACK_FORM_URL:"https://forms.gle/9B3npkDkZ9Xqj81L6",GDOCS_MODE_CHECKER:"GDOCS_MODE_CHECKER",GENAI_V2_ONBOARDING_TOUR_FIRST_TIME_RENDERED:"GENAI_V2_ONBOARDING_TOUR_FIRST_TIME_RENDERED",GENERIC_DOMAIN_CONFIG:"generic-config",GET_USER_LANGUAGE_CONFIG_ERROR:"GET_USER_LANGUAGE_CONFIG_ERROR",GMCR:"GRAMMAR_CHECKER",GRAMMAR_CHECKER_API_ERROR:"UTILS_GRAMMAR_CHECKER_ERROR",HARDWARE_INFO_TRACKED:"hardwareInfoTracked",HUMANIZER_PRODUCT_URL:"https://".concat(o.tU.ENV_URL,"/ai-humanizer?product=").concat(o.tU.EXTENSION_TYPE),INSTALL_SUCCESS_URL:"https://".concat(o.tU.ENV_URL,"/extension-success"),IS_DEV:!1,IS_PROD:!0,LANGUAGE_PREF_HEADER_NAME:"language_pref_updated_at",LANGUAGE_PREF_UPDATED_AT_STRING:"language_pref_updated_at",LOG_IN_URL:"https://".concat(o.tU.ENV_URL,"/login?product=").concat(o.tU.EXTENSION_TYPE),LOGGER_EXTENSION_ID:"hhgjgghchegningnonjkmcbkmhfgelkp",LOGIN_URL:"https://".concat(o.tU.ENV_URL,"/login"),LOLLIPOP:"LOLLIPOP",LOLLIPOP_LANDING_PAGE_URL:"https://".concat(o.tU.ENV_URL,"/app/text-cursor?product=").concat(o.tU.EXTENSION_TYPE),MAX_PERMISSIBLE_ZINDEX:2147483647,MODEL_STATS_PREFIX:"quillbotModelStats_",NETWORK_API:"networkApi",NEW_TAB:"newTab",ON_DEVICE_SENTENCE_SPLITTER_CONFIG:"onDeviceSentenceSplitterConfig",onboardingWalkthroughCampaigns:"onboardingWalkthroughCampaigns",OVERHANG_SUGGESTION_ID_SUFFIX:"OVERHANG_SUGGESTION_ID_SUFFIX",PASSIVE_VOICE_EMPTY_OUTPUTS:["",null,"none"],PAUSE:"PAUSE_EXTENSION",PERSONAL_INFORMATION_USAGE_URL:"https://help.quillbot.com/hc/en-us/articles/360056530894-How-does-QuillBot-use-my-data?referrer=".concat(o.tU.EXTENSION_TYPE),PLAN_PAGE_URL:"https://".concat(o.tU.ENV_URL,"/settings?tab=1&product=").concat(o.tU.EXTENSION_TYPE),PLATFORM_TYPE:o.tU.EXTENSION_TYPE,PLATFORM_TYPE_HEADER_NAME:"platform-type",PLATFORM_VERSION_HEADER_NAME:"platform-version",PPHR:"PARAPHRASER",PREFERENCES_PAGE_URL:"https://".concat(o.tU.ENV_URL,"/settings?menu=preferences&product=").concat(o.tU.EXTENSION_TYPE),PREMIUM_HEADER_NAME:"premium",PREMIUM_URL:"https://".concat(o.tU.ENV_URL,"/premium?product=").concat(o.tU.EXTENSION_TYPE),PRIVACY_POLICY_URL:"https://".concat(o.tU.ENV_URL,"/privacy?product=").concat(o.tU.EXTENSION_TYPE),PROFILE_PAGE_URL:"https://".concat(o.tU.ENV_URL,"/settings?product=").concat(o.tU.EXTENSION_TYPE),QB_COOKIE_ABIDV2:"abIDV2",QB_COOKIE_AUTH_STRING:"authenticated",QB_COOKIE_DEVICE_ID:"qbDeviceId",QB_COOKIE_GET_URL:o.tU.ENV_URL,QB_COOKIE_INCLUDE_URL:o.tU.ENV_URL,QB_COOKIE_INSTALLATION_SOURCE:"qbExtInstSrc",QB_COOKIE_PREMIUM_STRING:"premium",QB_COOKIE_PREMIUM_TIMESTAMP:"premiumUpdateTimestamp",QB_COOKIE_URL:o.tU.ENV_URL,QB_ID_TOKEN_STRING:"useridtoken",QB_SIGN_OUT:"sign-out",QB_STORAGE_AREA:"local",QB_URL:"https://".concat(o.tU.ENV_URL),QB_USER_PROFILE_FETCH_TIMESTAMP:"QB_USER_PROFILE_FETCH_TIMESTAMP",QB_WRITER_BLOCK_BLOG_URL:"https://quillbot.com/blog/how-to-overcome-common-writing-roadblocks-part-1/",QUILLBOT_SHADOW_ROOT:"qb-ext-sr",RATE_ON_CHROMESTORE_URL_BTN:(0,i.Y)(),RATE_ON_CHROMESTORE_URL_LINK:(0,i.Y)(),RE_ENABLE_FLOW_RELEASE_UPDATE_TIMESTAMP:"RE_ENABLE_FLOW_RELEASE_UPDATE_TIMESTAMP",REFERRER:"CHROME-EXT",REMOVE_WORD_FROM_DICTIONARY_ERROR:"REMOVE_WORD_FROM_DICTIONARY_ERROR",RENDERED_SECOND_TIME:"RENDERED_SECOND_TIME",RERUN_PIPELINE_FOR_EDITORS:"rerun-pipeline-for-editors",RUNNING_E2E:"true"===o.tU.RUNNING_E2E,SAFARI_EXTENSION_ID:"com.quillbot.safari.macos.Extension",SENTENCE_SPLITTER_API_ERROR:"UTILS_SENTENCE_SPLITTER_ERROR",SHOW_HIGHLIGHTS:"SHOW_HIGHLIGHTS",SHOWN_MULTILINGUAL_ONBOARING:"SHOWN_MULTILINGUAL_ONBOARING",SIGN_UP_URL:"https://".concat(o.tU.ENV_URL,"/signup?product=").concat(o.tU.EXTENSION_TYPE),SPELLING_ERROR_EXPLAINER_ID:"000051",SUMMARIZER_API_ERROR:"SUMMARIZER_API_ERROR",TOGGLE_SENTENCE_SUGGESTIONS:"TOGGLE_SENTENCE_SUGGESTIONS",TOOLBOX_GET_REQUEST_ERROR:"TOOLBOX_GET_REQUEST_ERROR",TOTAL_FIXALL_PERFORMED_COUNT:"totalFixallPerformedCount",TOTAL_GC_SUGGESTIONS_ACCEPTED:"TOTAL_GC_SUGGESTIONS_ACCEPTED",TRACKING_API:"".concat(o.tU.TRACKING_HOST),TRUST_CENTER_URL:"https://".concat(o.tU.ENV_URL,"/trust-center#how-does-quillbot-use-my-data"),UNDERLINES_TOGGLE:"UNDERLINES_TOGGLE",UNINSTALL_SURVEY_URL:"https://".concat(o.tU.ENV_URL,"/exit-survey"),UPDATE_SUGGESTED_WORD_ERROR:"UPDATE_SUGGESTED_WORD_ERROR",UPDATE_USER_LANG_GC_ERROR_CATEGORY_ERROR:"UPDATE_USER_LANG_GC_ERROR_CATEGORY_ERROR",UPDATE_USER_PROFILE_API_ERROR:"UPDATE_USER_PROFILE_API_ERROR",UPGRADE_URL:"https://".concat(o.tU.ENV_URL,"/upgrade?product=").concat(o.tU.EXTENSION_TYPE),UPGRADE_URL_WITH_COUPON:"https://".concat(o.tU.ENV_URL,"/upgrade?referrer=extension_campaign_2022_oct&p=12&coupon="),UPSELL_CAMPAIGN_OCT_2022:{metricsName:"extension_campaign_2022_oct",name:"extension_campaign_2022_oct",promoCode:"GET30",showedPromoModalChromeStorageKey:"extension_campaign_2022_oct__showedPromoModalChromeStorageKey",showPromoModalChromeStorageKey:"extension_campaign_2022_oct__showPromoModalChromeStorageKey"},USER_ID_TOKEN_FORCE_REFRESH_TIMESTAMP:"userIdTokenForceRefreshTimestamp",WEBSITE_ORIGIN_HEADER_NAME:"x-website-origin",WEBSITE_URL_HEADER_NAME:"x-website-url",WORD_EXT_URL:"https://".concat(o.tU.ENV_URL,"/word"),WRITING_GOALS:"writingGoals"},u=(Object.freeze({GRAY:"#b8b8b8",GREEN:"#398547",GREEN_BUBBLES:"#E8F3EB",GREEN_SALEM:"#178733",RED:"#FB3F4B",WHITE:"#ffffff"}),null===(r=s.QB_COOKIE_URL)||void 0===r||null===(r=r.split("."))||void 0===r||null===(r=r.slice(-2))||void 0===r||r.join("."),a.eL.CHROME,{FOOTER_HEIGHT:36,HEADER_HEIGHT:36,KEYBOARD_HINT_HEIGHT:60,MAX_HEIGHT_TOOLBOX:368,MIN_HEIGHT_PARAPHRASE:200,MIN_HEIGHT_TOOLBOX:230,TARGET_BOX_HORIZONTAL_MARGIN:8,TARGET_BOX_VERTICAL_MARGIN:1})},22412:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ACCOUNT_STATUS_RECHECK_INTERVAL:()=>c,AUTO_LOGIN_URL:()=>T,BASE_REPHRASING_SERVER_URL:()=>O,BASE_SERVER_URL:()=>R,CHANGELOG_CHECK_INTERVAL:()=>_,CHECK_DELAY:()=>Q,CHECK_MAX_DELAY:()=>ee,CHECK_RECOMMENDATION_DELAY:()=>ie,CHECK_REQUEST_TIMEOUT:()=>m,CHECK_THROTTLING_LIMIT:()=>v,CLIENT_LOGIN_URL:()=>x,COLORS:()=>_e,COLORS_ON_DARK:()=>Ee,COUNTRY_COUPON_MAPPING:()=>Ie,COUPON_INTERVAL:()=>Ne,CURRENT_TERMS_OF_SERVICE_VERSION:()=>qe,DEFAULT_MAX_FIX_ALL_ERRORS_COUNT:()=>J,DICTIONARY_SYNC_INTERVAL:()=>p,EDITOR_GROUP_ATTRIBUTE:()=>Je,EMPLOYEE_EMAIL_REGEXP:()=>pe,ERRORS_THAT_CAN_BE_CORRECTED_ALL_AT_ONCE:()=>Le,EXTENSION_HEALTH_RECHECK_INTERVAL:()=>s,EXTERNAL_CONFIG_RELOAD_INTERVAL:()=>l,EXTERNAL_CONFIG_URL:()=>D,FEEDBACK_SERVER_URL:()=>L,FIX_SENTENCE_MIN_ERROR_AMOUNT:()=>Re,HOVER_DELAY:()=>ue,HOVER_MAX_DELAY:()=>ce,HTTP_ERROR_ABORT:()=>je,HTTP_ERROR_GENERIC:()=>Xe,HTTP_ERROR_PAYLOAD_TOO_LARGE:()=>We,HTTP_ERROR_TIMEOUT:()=>ze,IFRAME_INITILIZATION_RECHECK_INTERVAL:()=>h,IMMEDIATE_CHECK_ON_PASTE_ACTION:()=>Te,INSTALL_URL:()=>y,INVISIBLE_SEPARATOR:()=>Ze,LOCAL_SERVER_URL:()=>k,LOLLIPOP_DILATE_SCHEDULE_TIMEOUT:()=>se,MAIN_FALLBACK_SERVER_URL:()=>C,MAIN_SERVER_RECHECK_INTERVAL:()=>j,MAIN_SERVER_URL:()=>N,MASCOT_NAME:()=>ke,MAX_BURST_BUFFER_SIZE:()=>oe,MAX_EXCEPTION_COUNT:()=>me,MAX_FIXES_COUNT:()=>ge,MAX_FREEMIUM_REPHRASINGS_PER_DAY:()=>Me,MAX_PHRASE_LENGTH_IN_WORDS:()=>Se,MAX_TEXT_LENGTH:()=>X,MAX_TEXT_LENGTH_CUSTOM_SERVER:()=>Z,MAX_TEXT_LENGTH_PERFORMANCE_DEGRADATION:()=>K,MAX_TEXT_LENGTH_PREMIUM:()=>Y,MAX_USAGE_COUNT_ONBOARDING:()=>ve,MIN_TEXT_LENGTH:()=>W,NARROW_WHITESPACE_REGEXP:()=>Fe,NEW_SYNONYMS_URL:()=>F,PACKAGE:()=>Ce,PARAGRAPH_LEVEL_CHUNK_LENGTH:()=>$,PICKY_RULES_THAT_ARE_CONSIDERED_ANNOYING:()=>we,PING_INTERVAL:()=>d,PING_URL:()=>U,PREMIUM_FALLBACK_SERVER_URL:()=>P,PREMIUM_SERVER_URL:()=>w,PRIVACY_POLICY_URL:()=>Ye,QUOTE_AT_BEGINNING_REGEXP:()=>He,QUOTE_AT_END_REGEXP:()=>Be,RELIABLE_MOTHER_TONGUES:()=>Ue,RENDER_INTERVAL:()=>E,REPHRASE_MODE_ACADEMIC:()=>nt,REPHRASE_MODE_CREATIVE:()=>rt,REPHRASE_MODE_EXPAND:()=>ot,REPHRASE_MODE_FLUENCY:()=>tt,REPHRASE_MODE_FORMALITY:()=>et,REPHRASE_MODE_HUMANIZE:()=>at,REPHRASE_MODE_SHORTEN:()=>it,REPHRASE_MODE_SIMPLICITY:()=>Qe,REPHRASE_MODE_STANDARD:()=>$e,RTL_LANGUAGES:()=>xe,RULES_ALLOWED_TO_BE_SENT_TO_API:()=>Pe,SELECTION_MODIFIER_KEYS:()=>ut,SEND_AND_DESTROY_COMPLETED_USER_ACTIVITIES_INTERVAL:()=>fe,SENTENCE_END_CHARS:()=>st,SERVER_MAX_TEXT_LENGTH_BASIC:()=>V,SHORT_TEXT_MAX_LENGTH:()=>z,SPLIT_SENTENCE_LIMIT:()=>b,STATISTICS_URL:()=>G,STOPPED_TYPING_TIMEOUT:()=>ae,SUPPORTED_FIX_COMPLETE_SENTENCE_LANGUAGES:()=>Ae,SUPPORTED_REPHRASE_LANGUAGES:()=>be,SUPPORTED_SENTENCE_SPLITTING_LANGUAGES:()=>ye,SUPPORTED_SYNONYM_LANGUAGES:()=>Oe,SWITCH_TO_FALLBACK_SERVER_ERRORS:()=>H,SYNC_USER_DATA_INTERVAL:()=>f,TERMS_OF_SERVICE_API_URL:()=>B,TERMS_OF_SERVICE_URL:()=>Ke,TEXT_LEVEL_MAX_LENGTH_PER_REQUEST:()=>q,TOOLBAR_DECREASE_SIZE_INTERVAL:()=>g,TOOLBOX_THEME:()=>Ve,TRACK_RULE_EVENT_LANGUAGES:()=>De,TRAILING_WHITESPACE_REGEXP:()=>Ge,TRANSLATE_SUPPORTED_LANGUAGES_FETCH_INTERVAL:()=>he,TRANSLATOR_BASE_URL:()=>I,TRIAL_DURATION:()=>ct,TRIAL_EMAIL_WHITELIST:()=>ft,TRIAL_TOKEN_EXPIRY_TIME:()=>dt,TRIAL_TOKEN_USAGE_LIMIT:()=>lt,TYPING_BURST_SESSION_INACTIVITY_DELAY:()=>te,UI_MODE_RECHECK_INTERVAL:()=>u,UNINSTALL_URL:()=>A,USER_ACTIVITY_DESTRUCTION_DELAY:()=>de,USER_ACTIVITY_PING_INTERVAL_LENGTH:()=>le,USER_DATA_URL:()=>S,VALID_MAX_CHARACTERS_DELTA_ALLOWED:()=>re,VALID_MIN_CHARACTERS_CHANGE_PER_TYPING_BURST:()=>ne,WEBAPI_URL:()=>M});var r=n(36111),o=n(31600);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=3e3,u=6e4,c=36e5,l=144e5,d=864e5,f=864e5,h=1500,p=72e5,_=144e5,E=300,g=900,m=5e4,v=30,b=500,y="https://languagetool.org/webextension/welcome",A="https://languagetool.org/webextension/uninstall",T="https://languagetool.org/webextension/login",S="https://languagetool.org/webextension/user",R="https://api.languagetool.org",O="https://rewriting.languagetoolplus.com",I="https://prod-translator.languagetool.org/translator",N="".concat(R,"/v2"),C="https://api-fallback.languagetool.org/v2",w="https://api.languagetoolplus.com/v2",P="https://languagetoolplus.com/api/v2",k="http://localhost:8081/v2",L="https://languagetool.org/send-feedback/",D="https://languagetool.org/webextension_config.json",x="https://languagetool.org/client-login",U="https://languagetool.org/ping",M="https://languagetool.org/webapi",G="https://api.languagetoolplus.com/statistics/api/store",F="https://qb-grammar-en.languagetool.org/phrasal-paraphraser/subscribe",B="https://languagetool.org/users/privacy-policy/",H=[502,503,504],j=18e4,W=4,z=50,X=o.Ay.get(o.OJ.MAX_TEXT_LENGTH_ALLOWED),V=19500,q=V,K=4e4,Y=15e4,Z=Number.MAX_SAFE_INTEGER,J=50,$=5e3,Q=1500,ee=4e3,te=3e3,ne=1,re=10,oe=20,ie=3e3,ae=2e3,se=3e3,ue=50,ce=200,le=2e4,de=3e5,fe=6e5,he=864e5,pe=/@(languagetool(er)?|quillbot|scribbr|learneo|coursehero|symbolab|litcharts|spellboy)\.(com|org|de|nl)$/i,_e={get GRAMMAR(){return o.Ay.get(o.OJ.COLORS_GRAMMAR)},get STYLE(){return o.Ay.get(o.OJ.COLORS_STYLE)},get PARAPHRASE(){return o.Ay.get(o.OJ.COLORS_PARAPHRASE)},get LONG_SENTENCE(){return{UNDERLINE:"#D2CBFF",BACKGROUND:"rgba(210,203,255,0.2)",EMPHASIZE:"rgba(210,203,255,0.1)"}},get IGNORED_RANGE(){return{UNDERLINE:"#00bbe6",BACKGROUND:"rgb(92, 222, 251, 0.2)",EMPHASIZE:"rgb(154, 232, 250, 0.1)"}},get RECOMMENDATION(){return o.Ay.get(o.OJ.COLORS_RECOMMENDATION)},get RECOMMENDATION_TEASE(){return o.Ay.get(o.OJ.COLORS_RECOMMENDATION_TEASE)},get SPELLING(){return o.Ay.get(o.OJ.COLORS_SPELLING)},get SYNONYMS(){return{UNDERLINE:"#0042d7"}},get NEW_SENTENCE(){return{BACKGROUND:"rgba(30, 225, 151, 0.2)"}},get DISABLED(){return{UNDERLINE:"rgba(0, 0, 0, 0.2)",BACKGROUND:"rgba(0, 0, 0, 0.2)",EMPHASIZE:"rgba(0, 0, 0, 0.2)",TITLE:"rgba(0, 0, 0, 0.2)"}}},Ee=a(a({},_e),{},{DISABLED:{UNDERLINE:"rgba(255, 255, 255, 0.3)",BACKGROUND:"rgba(255, 255, 255, 0.3)",EMPHASIZE:"rgba(255, 255, 255, 0.3)",TITLE:"rgba(255, 255, 255, 0.3)"}}),ge=5,me=6,ve=5,be=["en","de","fr","nl","es","pt-BR","pt-PT"],ye=["en"],Ae=["en"],Te=!1,Se=10,Re=3,Oe=["de","de-CH","ru","sv","pt","pt-BR","el","en","eo","it","fr","es","uk","sk","sl","pl","da","ro","nl","ca"],Ie={UKRAINE:{countries:["UA","BY"],percent:50},"ITALY-DISCOUNT":{countries:["IT"],percent:20},"SPAIN-DISCOUNT":{countries:["ES"],percent:20},SOUTH_EUROPE:{countries:["RO","AL","GR","ME","EE","LT","LV","BG","CY","MT","SK","SI","RS","HR","XK","HU","MD","TR","PT"],percent:20},AFRICA:{countries:["NG","ET","EG","CD","CG","TZ","KE","UG","DZ","SD","MA","AO","MZ","TN","CI","DJ","SZ","MU","GQ","GA","BW","SO","CD","ER","MG"],percent:50},ASIA:{countries:["ID","PK","BD","VN","MM","PH","UZ","MY","NP","KZ","KH","UZ","TH","YE","SY","JO"],percent:50},LATIN_AMERICA:{countries:["PE","VE","EC","SV","DO","BO","SR","AR","HN","BZ","CR","PA","GT","NI","GY","UY","HT","JM","TT","CU"],percent:50},BRAZIL:{countries:["BR"],percent:50}},Ne=7776e6,Ce={BASIC:"Basic",PREMIUM:"Premium"},we=["EN_QUOTES","PASSIVE_VOICE","DASH_RULE","SENTENCE_FRAGMENT","PONCTUATION_DOUBLE","TOO_LONG_SENTENCE","COMETES_TIPOGRAFIQUES","APOSTROF_TIPOGRAFIC","FALSCHE_VERWENDUNG_DES_BINDESTRICHS","HALBGEVIERTSTRICH","PARAGRAF_LEERZEICHEN","TYPOGRAFISCHE_APOSTROPHE","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_CH","TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_2","PUNCTUATION_PARAGRAPH_END","FINAL_STOPS","FINAL_PUNCTUATION","SMART_QUOTES","PT_SMART_QUOTES","DASH_SPACE_RULES","HIPHEN_SPACE_RULES","BRAK_KROPKI","DYWIZ","CUDZYSLOW_DRUKARSKI","TYPOGRAFISCHE_AANHALINGSTEKENS","TYPOGRAFISCHE_AANHALINGSTEKENS_2","EINDE_ZIN_ONVERWACHT","BACKTICK","GEDACHTESTREEPJE","OPTIONAL_HYPHEN","COMILLAS_TIPOGRAFICAS","COMETES_TIPOGRAFIQUES","GL_SMART_QUOTES"],Pe=["OXFORD_SPELLING_Z_NOT_S"],ke="jeremy",Le=[{ruleId:"FALSCHES_ANFUEHRUNGSZEICHEN",suggestions:[{match:/[\u201e\u201c]/,message:"Alle <lt-em>\u201c</lt-em>\u2026<lt-em>\u201d</lt-em> zu <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em> \xe4ndern"}]},{ruleId:"TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN",suggestions:[{match:/[\u201e\u201c]/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> zu <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em> \xe4ndern"},{match:/(^\xbb)|(\xab$)/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> zu <lt-em>\xbb</lt-em>\u2026<lt-em>\xab</lt-em> \xe4ndern"}]},{ruleId:"TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_CH",suggestions:[{match:/[\u201e\u201c]/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> zu <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em> \xe4ndern"},{match:/(^\xab)|(\xbb$)/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> zu <lt-em>\xab</lt-em>\u2026<lt-em>\xbb</lt-em> \xe4ndern"}]},{ruleId:"TYPOGRAFISCHE_ANFUEHRUNGSZEICHEN_2",suggestions:[{match:/[\u201a\u2018]/,message:"Alle <lt-em>'</lt-em>\u2026<lt-em>'</lt-em> zu <lt-em>\u201a</lt-em>\u2026<lt-em>\u2018</lt-em> \xe4ndern"},{match:/[\u201e\u201c]/,message:"Alle <lt-em>'</lt-em>\u2026<lt-em>'</lt-em> zu <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em> \xe4ndern"}]},{ruleId:"TYPOGRAFISCHE_APOSTROPHE",suggestions:[{match:/\u2019/,message:"Alle Apostrophe zu <lt-em>\u2019</lt-em> \xe4ndern"}]},{ruleId:"EN_QUOTES",suggestions:[{match:/[\u201c\u201d]/,message:"Change all <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> to <lt-em>\u201c</lt-em>\u2026<lt-em>\u201d</lt-em>"}]},{ruleId:"WRONG_APOSTROPHE",suggestions:[{match:/'/,message:"Use <lt-em>'</lt-em> for all bad apostrophes"},{match:/\u2019/,message:"Use <lt-em>\u2019</lt-em> for all bad apostrophes"}]},{ruleId:"PARAGRAF_LEERZEICHEN",suggestions:[{match:/\xa7\u00A0/,message:"Alle Leerzeichen nach <lt-em>\xa7</lt-em> \xe4ndern"}]},{ruleId:"CONSISTENCYRULE_JE_F",suggestions:[{match:/[^e]$/,message:"Remplacer tous les <lt-em>je</lt-em> vers le masculin"}]},{ruleId:"CONSISTENCYRULE_JE_M",suggestions:[{match:/e$/,message:"Remplacer tous les <lt-em>je</lt-em> vers le f\xe9minin"}]},{ruleId:"COMILLAS_TIPOGRAFICAS",suggestions:[{match:/[\u201c\u201d]/,message:"Cambiar todas las <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> por <lt-em>\u201c</lt-em>\u2026<lt-em>\u201d</lt-em>"},{match:/(^\xab)|(\xbb$)/,message:"Cambiar todas las <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> por <lt-em>\xab</lt-em>\u2026<lt-em>\xbb</lt-em>"}]},{ruleId:"COMETES_TIPOGRAFIQUES",suggestions:[{match:/[\u201c\u201d]/,message:"Canvia totes les <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> per <lt-em>\u201c</lt-em>\u2026<lt-em>\u201d</lt-em>"},{match:/(^\xab)|(\xbb$)/,message:"Canvia totes les <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> per <lt-em>\xab</lt-em>\u2026<lt-em>\xbb</lt-em>"}]},{ruleId:"TYPOGRAFISCHE_AANHALINGSTEKENS",suggestions:[{match:/[\u201e\u201c]/,message:"Alle <lt-em>&quot;</lt-em>\u2026<lt-em>&quot;</lt-em> veranderen in <lt-em>\u201e</lt-em>\u2026<lt-em>\u201c</lt-em>"}]},{ruleId:"PT_SMART_QUOTES",suggestions:[{match:/[\u201c\u201d]/,message:"Corrigir todas as aspas."}]},{ruleId:"GL_SMART_QUOTES",suggestions:[{match:/[\u201c\u201d]/,message:"Corrixir todas as comi\xf1as."}]}],De=["en","de","es","ca","fr","nl","pt"],xe=["ar","he","fa","ur","ku","az"],Ue=["de","fr"],Me=3,Ge=/^[ \u00A0]|[ \u00A0]$/g,Fe=/\u202F/g,Be=/[\"\u201c\u201d\u201e]$/,He=/^[\"\u201c\u201d\u201e]/,je="E_ABORT",We="E_PAYLOAD_TOO_LARGE",ze="E_TIMEOUT",Xe="E_GENERIC",Ve={borderRadiusSmall:4,borderRadiusMedium:8,borderRadiusLarge:12,light:{colorBrandDefault:"#239AFF",colorBrandMedium:"#5EB5FF",colorBrandSubtle:"#ECF6FF",colorBrandBold:"#1976F0",colorTextDefault:"#2F3237",colorTextBold:"#1D1E20",colorTextSubtle:"#5E636E",colorTextStark:"#000000",colorTextInverseDefault:"#F1F3F9",colorTextInverseBold:"#FFFFFF",colorTextSelected:"#239AFF",colorTextLinkDefault:"#239AFF",colorTextLinkPressed:"#1976F0",colorTextLinkInverse:"#FFFFFF",colorTextDisabled:"#8F96A3",colorTextErrorBold:"#D01941",colorTextWarningBold:"#AB7D05",colorTextInfoBold:"#1976F0",colorTextHighlightBold:"#3729C1",colorTextSuccessBold:"#08905D",colorBorderDefault:"#DEE3ED",colorBorderSubtle:"#F1F3F9",colorBorderMedium:"#C2C9D6",colorBorderBold:"#8F96A3",colorBorderHover:"#5E636E",colorBorderSelected:"#1976F0",colorBackgroundDefault:"#FFFFFF",colorBackgroundPaper:"#FFFFFF",colorBackgroundElevated:"#FFFFFF",colorBackgroundSunken:"#F1F3F9",colorBackgroundNeutralDefault:"#F1F3F9",colorBackgroundNeutralMedium:"#C2C9D6",colorBackgroundNeutralMuted:"#DEE3ED",colorBackgroundHighlightSubtle:"#ECF6FF",colorBackgroundInfoSubtle:"#ECF6FF",colorBackgroundWarningSubtle:"#FFF6E0",colorBackgroundSuccessSubtle:"#E2FFF4",colorBackgroundErrorSubtle:"#FFEEF2",colorBackgroundInverseDefault:"#1D1E20",colorBackgroundInverseBold:"#111213",colorBackgroundDisabled:"#DBDBDB",colorIconDefault:"#2F3237",colorIconBold:"#1D1E20",colorIconSubtle:"#5E636E",colorIconInverseDefault:"#F1F3F9",colorIconInverseBold:"#FFFFFF",colorIconSelected:"#239AFF",colorIconDisabled:"#8F96A3",colorIconBoldest:"#000000"},dark:{colorBrandDefault:"#5EB5FF",colorBrandMedium:"#239AFF",colorBrandSubtle:"#041A37",colorBrandBold:"#BADFFF",colorTextDefault:"#F1F3F9",colorTextBold:"#F8F9FC",colorTextSubtle:"#DEE3ED",colorTextStark:"#FFFFFF",colorTextInverseDefault:"#2F3237",colorTextInverseBold:"#000000",colorTextSelected:"#5EB5FF",colorTextLinkDefault:"#5EB5FF",colorTextLinkPressed:"#BADFFF",colorTextLinkInverse:"#111213",colorTextDisabled:"#C2C9D6",colorTextErrorBold:"#FF7A94",colorTextWarningBold:"#DEC850",colorTextInfoBold:"#5EB5FF",colorTextHighlightBold:"#9E94FE",colorTextSuccessBold:"#1EE197",colorBorderDefault:"#2F3237",colorBorderSubtle:"#1D1E20",colorBorderMedium:"#5E636E",colorBorderBold:"#8F96A3",colorBorderHover:"#C2C9D6",colorBorderSelected:"#5EB5FF",colorBackgroundDefault:"#111213",colorBackgroundPaper:"#2F3237",colorBackgroundElevated:"2F3237",colorBackgroundSunken:"#2F3237",colorBackgroundNeutralDefault:"#2F3237",colorBackgroundNeutralMedium:"#8F96A3",colorBackgroundNeutralMuted:"#5E636E",colorBackgroundHighlightSubtle:"#041A37",colorBackgroundInfoSubtle:"#041A37",colorBackgroundWarningSubtle:"#2B2003",colorBackgroundSuccessSubtle:"#021B12",colorBackgroundErrorSubtle:"#26020A",colorBackgroundInverseDefault:"#C2C9D6",colorBackgroundInverseBold:"#F1F3F9",colorBackgroundDisabled:"#434343",colorIconDefault:"#F1F3F9",colorIconBold:"#F8F9FC",colorIconSubtle:"#DEE3ED",colorIconInverseDefault:"#2F3237",colorIconInverseBold:"#111213",colorIconSelected:"#5EB5FF",colorIconDisabled:"#C2C9D6",colorIconBoldest:"#FFFFFF"},fontFamily:{macos:"LanguageTool-mac",win:"LanguageTool-win"},fontSizes:{xSmall:10,small:12,medium:14,large:16,xLarge:18}},qe="2024-11-19",Ke="https://languagetool.org/legal/terms",Ye="https://languagetool.org/legal/privacy",Ze="\u2063",Je="data-".concat(o.Ay.get(o.OJ.EXTN_PREFIX),"-editor-group"),$e="standard",Qe="simple",et="formal",tt="fluency",nt="academic",rt="creative",ot="expand",it="shorten",at="natural",st=[".","!","?"],ut=["Shift","Control","Alt","Meta"],ct=12096e5,lt=8e3,dt=288e5,ft=/school|schule|bildung|academ|colegio|college|escola|universi|\.edu\b|educat|gnspes\.ca|dwightlondon\.org/i},22670:(e,t,n)=>{"use strict";var r=n(23224),o=n(36111),i=n(43057),a=n(77431),s=n(36441),u=n(82561),c=n(77001),l=n(22412),d=n(31600),f=n(60273),h=n(10028),p=["errors","premiumErrors","pickyErrors","premiumPickyErrors"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError((0,r.A)(e)+" is not iterable")}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return y(c,"_invoke",function(n,r,o){var i,s,u,c=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,u=e,f.n=n,a}};function h(n,r){for(s=n,u=r,t=0;!d&&c&&!o&&t<l.length;t++){var o,i=l[t],h=f.p,p=i[2];n>3?(o=p===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,p),s=l,u=p;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,u)):f.n=u:f.v=u);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==a)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(n,o,i),!0),c}var a={};function s(){}function u(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(y(t={},r,function(){return this}),t),d=c.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,y(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return u.prototype=c,y(d,"constructor",c),y(c,"constructor",u),u.displayName="GeneratorFunction",y(c,o,"GeneratorFunction"),y(d),y(d,o,"Generator"),y(d,r,function(){return this}),y(d,"toString",function(){return"[object Generator]"}),(b=function(){return{w:i,m:f}})()}function y(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}y=function(e,t,n,r){function i(t,n){y(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},y(e,t,n,r)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(){function e(){(0,u.A)(this,e)}return(0,c.A)(e,null,[{key:"getServerBaseUrl",value:function(e){var t=(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this._useFallbackServerForParagraphLevelRequests:this._useFallbackServerForTextLevelRequests)&&!e.apiServerUrl;return e.apiServerUrl&&!this._isLanguageToolServer(e.apiServerUrl)?e.apiServerUrl:e.isPremium||e.user||e.apiServerUrl===l.PREMIUM_SERVER_URL?t?l.PREMIUM_FALLBACK_SERVER_URL:l.PREMIUM_SERVER_URL:t?l.MAIN_FALLBACK_SERVER_URL:l.MAIN_SERVER_URL}},{key:"_getServerFullUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getServerBaseUrl(e,t),r=n.endsWith("/")?"":"/",o=new URL(n+r+"check");return o.searchParams.set("c","1"),o.searchParams.set("instanceId",e.instanceId),e.version&&o.searchParams.set("v",e.version),o.toString()}},{key:"_abortTextLevelCheckRequest",value:function(e){this._textLevelAbortControllers.has(e)&&(this._textLevelAbortControllers.get(e).abort(),this._textLevelAbortControllers.delete(e))}},{key:"_abortParagraphLevelCheckRequest",value:function(e){this._paragraphLevelAbortControllers.has(e)&&(this._paragraphLevelAbortControllers.get(e).abort(),this._paragraphLevelAbortControllers.delete(e))}},{key:"_abortLanguageDetectionRequest",value:function(e){this._languageDetectionAbortControllers.has(e)&&(this._languageDetectionAbortControllers.get(e).abort(),this._languageDetectionAbortControllers.delete(e))}},{key:"_abortRecommendationRequest",value:function(e){var t=this._recommendationAbortControllers.get(e);t&&(t.abort(),this._recommendationAbortControllers.delete(e))}},{key:"abortTextLevelCheck",value:function(e){this._abortTextLevelCheckRequest(e)}},{key:"abortParagraphLevelCheck",value:function(e){this._abortParagraphLevelCheckRequest(e)}},{key:"abortLanguageDetection",value:function(e){this._abortLanguageDetectionRequest(e)}},{key:"abortRecommendation",value:function(e){this._abortRecommendationRequest(e)}},{key:"_prepareText",value:function(e){return e.replace(this.ZWNJ_REGEXP,this.ZWS)}},{key:"_joinInChunks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.PARAGRAPH_LEVEL_CHUNK_LENGTH,n=[],r=0,o=[];return e.forEach(function(e){r>t&&(r=0,o=[]),o.push(e),r+=e.text.length,n.includes(o)||n.push(o)}),n}},{key:"_getRequestData",value:function(e,t,n){var r=new URLSearchParams,o={text:e};n.recipientInfo&&(n.recipientInfo.address||n.recipientInfo.fullName)&&(o.metaData={EmailToAddress:n.recipientInfo.address,FullName:n.recipientInfo.fullName}),r.append("data",JSON.stringify(o));var i=Boolean(n.isPremium||!n.apiServerUrl||n.apiServerUrl&&n.apiServerUrl.startsWith(l.PREMIUM_SERVER_URL)||n.apiServerUrl&&!this._isLanguageToolServer(n.apiServerUrl));if(i&&n.user&&"password"in n.user?(r.append("username",n.user.email),r.append("password",n.user.password)):i&&n.user&&"token"in n.user&&(r.append("username",n.user.email),r.append("tokenV2",n.user.token)),r.append("textSessionId",n.instanceId),n.isPremium||r.append("enableHiddenRules","true"),n.motherTongue&&l.RELIABLE_MOTHER_TONGUES.includes(n.motherTongue)&&r.append("motherTongue",n.motherTongue),"normal"!==n.checkLevel&&r.append("level",n.checkLevel.replace("hidden-","")),t)r.append("language",t.code);else{r.append("language","auto"),r.append("noopLanguages",n.preferredLanguages.join(","));var a=this._getPreferredVariants(n.languageVariants);a.length>0&&r.append("preferredVariants",a.toString())}if(n.testGroups){for(var u=[],c=0,d=Object.entries(n.testGroups);c<d.length;c++){var f=(0,s.A)(d[c],2),h=f[0];f[1]&&u.push(h)}u.length&&r.append("abtest",u.join(","))}if(r.append("preferredLanguages",n.preferredLanguages.join(",")),n.forcePreferredLanguages&&r.append("forcePreferredLanguages","true"),n.writingGoalId){var p=this.HIGH_LEVEL_GOALS.find(function(e){return e.id===n.writingGoalId});p&&r.append("toneTags",p.tags.join(","))}var _=["WHITESPACE_RULE"].concat(n.disabledRules.filter(function(e){return l.RULES_ALLOWED_TO_BE_SENT_TO_API.includes(e)}));return r.append("disabledRules",_.join(",")),n.userAgent&&r.append("useragent",n.userAgent),r}},{key:"_getHeaders",value:function(e){if(e.accessToken){var t=new Headers;return t.append("Authorization","Bearer ".concat(e.accessToken)),t}}},{key:"_getPreferredVariants",value:function(e){return Object.values(e)}},{key:"_getTextLevelRequestData",value:function(e,t,n){var r=this._getRequestData(e,t,n);return r.append("mode","textLevelOnly"),r}},{key:"_getParagraphLevelCheckRequestData",value:function(e,t,n){var r=this._getRequestData(e,t,n);return r.append("mode","allButTextLevelOnly"),r.append("allowIncompleteResults",String(n.allowIncompleteResults||!1)),r}},{key:"_sendRequest",value:(A=(0,a.A)(b().m(function e(t,n){var r,o,i,a=arguments;return b().w(function(e){for(;;)if(0===e.n)return r=a.length>2&&void 0!==a[2]?a[2]:l.CHECK_REQUEST_TIMEOUT,o=fetch(t,n).catch(function(e){throw"AbortError"===e.name?{reason:"AbortError",status:0,response:e.message||""}:{reason:"ConnectionError",status:0,url:t.replace(/\?.*/,""),response:e.message||""}}).then(this._checkForException).then(function(e){return e.json()}),i=new Promise(function(e,n){setTimeout(function(){n({reason:"TimeoutError",status:0,url:t.replace(/\?.*/,""),response:""})},r)}),e.a(2,Promise.race([o,i]))},e,this)})),function(e,t){return A.apply(this,arguments)})},{key:"_isConnectionOrServerIssue",value:function(e){return l.SWITCH_TO_FALLBACK_SERVER_ERRORS.includes(e.status)||["ConnectionError","TimeoutError"].includes(e.reason)}},{key:"_getGraphemesCount",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=n;r<e.length;r++){if(t<=0)return r-n;t-=e[r].length}return e.length-n}},{key:"_getCodepointsCount",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,o=n;o<Math.min(e.length,n+t);o++)r+=e[o].length;return r}},{key:"_correctMatches",value:function(t,n,r){if(n!==r){var o,i=(0,h.p$)(n),a=(0,h.p$)(r),s=m(t);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=e._getGraphemesCount(i,u.offset),l=e._getGraphemesCount(i,u.length,c);u.offset=e._getCodepointsCount(a,c),u.length=e._getCodepointsCount(a,l,c)}}catch(e){s.e(e)}finally{s.f()}}return t}},{key:"_getLeftText",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"auto",s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=Math.max(t-r,0);if(o&&i.length>0){var c=i.find(function(e){return t>=e.start&&t<=e.end});c&&(u=s?c.start:Math.max(u,c.start))}if(n){var l=e.lastIndexOf("\n",t);l>=u&&(u=l+1)}var d=e.substring(u,t).replace(this.NON_ALPHANUMERIC_AT_BEGINNING_REGEXP,"");return("always"===a?0!==u:"never"!==a&&!(0===u||n&&"\n"===e[u-1]||o&&i.some(function(e){return u===e.start})))&&(d="..."+d),d}},{key:"_getRightText",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"auto",s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=Math.min(t+r,e.length);if(o&&i.length>0){var c=i.find(function(e){return t>=e.start&&t<=e.end});c&&(u=s?c.end:Math.min(u,c.end))}if(n){var l=e.indexOf("\n",t);-1!==l&&l<=u&&(u=l)}var d=e.substring(t,u).replace(this.NON_ALPHANUMERIC_AT_END_REGEXP,"");return("always"===a?u!==e.length:"never"!==a&&!(u===e.length||n&&"\n"===e[u]||o&&i.some(function(e){return u===e.end})))&&(d+="..."),d}},{key:"_transformMatches",value:function(t,n,r){var o=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return t.map(function(t){var u,c,l,d,f,p,_,E,g=t.rule.id.startsWith("DB_"),m=o.SPELLING_RULES_ID.some(function(e){return t.rule.id.includes(e)}),v=o.STYLE_ISSUE_TYPES.some(function(e){return t.rule.issueType===e}),b="typographical"===t.rule.issueType&&"CASING"!==t.rule.category.id||"PUNCTUATION"===t.rule.category.id||"TYPOGRAPHY"===t.rule.category.id||t.rule.category.id.includes("KOMMA"),y=Boolean(t.rule.tags&&t.rule.tags.includes("picky")),A="RECOMMENDATION"===t.rule.issueType||"PHRASAL_RECOMMENDATION"===t.rule.issueType,T=!1===t.rule.showInline,S=n.substr(t.offset,t.length),R=null!==(u=null==a?void 0:a.strictByParagraph)&&void 0!==u?u:i,O=null!==(c=null==a?void 0:a.useSentenceAwareContext)&&void 0!==c&&c,I=null==a?void 0:a.shortContext,N=null!==(l=null==I?void 0:I.maxContextLength)&&void 0!==l?l:15,C=null!==(d=null==I?void 0:I.ellipsisMode)&&void 0!==d?d:"auto",w=null!==(f=null==I?void 0:I.forceCompleteSentences)&&void 0!==f&&f,P=null==a?void 0:a.longContext,k=null!==(p=null==P?void 0:P.maxContextLength)&&void 0!==p?p:60,L=null!==(_=null==P?void 0:P.ellipsisMode)&&void 0!==_?_:"auto",D=null!==(E=null==P?void 0:P.forceCompleteSentences)&&void 0!==E&&E,x=e._getLeftText(n,t.offset,R,N,O,s,C,w),U=e._getRightText(n,t.offset+t.length,R,N,O,s,C,w),M="".concat(x,"|").concat(S,"|").concat(U),G=e._getLeftText(n,t.offset,!0,k,O,s,L,D),F=e._getRightText(n,t.offset+t.length,!0,k,O,s,L,D),B="".concat((0,h.Zn)(G),"<lt-em>").concat((0,h.Zn)(S),"</lt-em>").concat((0,h.Zn)(F)),H="";t.shortMessage&&t.shortMessage.length<60&&t.shortMessage!==t.message&&(H=t.shortMessage.replace(o.PUNCTUATION_AT_END,""));var j=t.replacements.map(function(e){return{value:e.value,htmlValue:e.htmlValue,prefix:e.prefix,suffix:e.suffix,type:e.type,shortDescription:e.shortDescription}});return{isParagraphLevelCheck:i,rule:t.rule,isCustomError:g,isSpellingError:m,isStyleError:v,isPunctuationError:b,isPicky:y,isRecommendation:A,isOptional:T,contextForSureMatch:t.contextForSureMatch,language:{code:r.code,name:r.name},description:t.message,shortDescription:H,goodExample:t.goodExample,badExample:t.badExample,start:t.offset,end:t.offset+t.length,length:t.length,originalPhrase:S,contextPhrase:M,longContextPhrase:B,fixes:j,isLocked:t.isLocked}})}},{key:"_adjustErrors",value:function(e,t,n){var r=this,o=n.recipientInfo?n.recipientInfo.fullName.split(" ").filter(function(e){return e}):[];return e.filter(function(e){if(e.originalPhrase.startsWith(l.INVISIBLE_SEPARATOR)){var i=e.originalPhrase.length;if(e.originalPhrase=(0,h.YW)(e.originalPhrase),e.start+=i-e.originalPhrase.length,e.fixes[0]&&e.originalPhrase===e.fixes[0].value)return!1}if(e.originalPhrase.endsWith(l.INVISIBLE_SEPARATOR)){var a=e.originalPhrase.length;if(e.originalPhrase=(0,h.Xm)(e.originalPhrase),e.end-=a-e.originalPhrase.length,e.fixes[0]&&e.originalPhrase===e.fixes[0].value)return!1}if(e.fixes=e.fixes.filter(function(t){return t.value!=="("+e.originalPhrase+")"&&t.value!==e.originalPhrase&&"(suggestion limit reached)"!==t.value&&"(se ha alcanzado el l\xedmite de sugerencias)"!==t.value&&"(Vorschlagslimit erreicht)"!==t.value}),e.language.code.startsWith("en")&&(0,h.mq)(e.originalPhrase)&&!/[a-z]/i.test(e.contextPhrase)&&e.fixes.forEach(function(t){t.value.toLowerCase()!==e.originalPhrase.toLowerCase()&&(t.value=t.value.toUpperCase())}),"PT_CLICHE_REPLACE"!==e.rule.id&&"PT_WORDINESS_REPLACE"!==e.rule.id||e.fixes.forEach(function(t){(t.value.startsWith("REFORMULAR")||t.value.startsWith("APAGAR")||t.value.startsWith("ESPECIFICAR"))&&(e.description=e.description.replace(/\s\xc9 prefer\xedvel dizer.+(REFORMULAR|APAGAR|ESPECIFICAR).+$/,""),t.value="")}),r.EMAIL_SIGNATURE_SEPARATOR_REGEXP.test(e.originalPhrase))return!1;if(r.INVISIBLE_PHRASE_REGEXP.test(e.originalPhrase))return!1;if(e.rule.id.endsWith("WORD_REPEAT_BEGINNING_RULE")&&r.ONLY_NUMBERS_REGEXP.test(e.originalPhrase))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&r.COLON_WHITESPACE_REGEXP.test(e.originalPhrase))return!1;var s=t.substring(e.start-25,e.start),u=t.substr(e.end,25);if(n.ignoreCapitalizationErrorsAtLineStart&&"UPPERCASE_SENTENCE_START"===e.rule.id&&r.PREVENT_MID_SENTENCE_CAPITALIZATION.test(s))return!1;if(n.ignoreCapitalizationErrorsAtLineStart&&"PUNCTUATION_PARAGRAPH_END"===e.rule.id&&r.PREVENT_MID_SENTENCE_PUNCTUATION.test(u))return!1;if("DE_CASE"===e.rule.id&&r.BULLET_POINT_REGEXP.test(s))return!1;if("DE_CASE"===e.rule.id&&r.NUMBER_WITH_PARENTHESIS_AT_END_REGEXP.test(s))return!1;if("DE_CASE"===e.rule.id&&r.PIPE_AT_END_REGEXP.test(s))return!1;if("DE_CASE"===e.rule.id&&r.MARKDOWN_HEADLINE_REGEXP.test(s))return!1;if("DE_CASE"===e.rule.id&&r.EMOJI_SENTENCE_START_REGEXP.test(s))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&r.MARKDOWN_INLINE_FORMAT_AT_BEGINNING_REGEXP.test(u))return!1;if("LEERZEICHEN_HINTER_DOPPELPUNKT"===e.rule.id&&r.WIKI_MARKUP_AT_END_REGEXP.test(s))return!1;if(e.rule.id.endsWith("UNPAIRED_BRACKETS")&&r.ONE_LETTER_AT_END_REGEXP.test(s))return!1;if(e.rule.id.endsWith("UNPAIRED_BRACKETS")&&r.NUMBER_WITH_DOT_AT_END_REGEXP.test(s))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&s.endsWith("{!"))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&r.SINGLE_UPPERCASE_LETTER_REGEXP.test(e.originalPhrase)&&r.ABBREVIATION_AT_END_REGEXP.test(s))return!1;if("SENTENCE_WHITESPACE"===e.rule.id&&"net"===e.originalPhrase.toLowerCase())return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&r.NET_AT_BEGINNING_REGEXP.test(u))return!1;if(e.rule.id.startsWith("AI_")&&1===e.fixes.length&&e.originalPhrase.replace(r.INVISIBLE_CHARS_REGEXP,"")===e.fixes[0].value)return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.endsWith(")")&&s.endsWith(r.ZWS))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.endsWith(".")&&r.FILE_TYPE_AT_BEGINNING_REGEXP.test(u))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&s.endsWith("(")&&(",)"===e.originalPhrase||".)"===e.originalPhrase))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&s.endsWith("\n")&&[")","}","]","."].includes(e.originalPhrase))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&u.startsWith("/"))return!1;if("COMMA_PARENTHESIS_WHITESPACE"===e.rule.id&&e.originalPhrase.includes(r.ZWS))return!1;if("WORT1_BINDESTRICH_SPACE_WORT2"===e.rule.id&&e.originalPhrase.endsWith(r.ZWS))return!1;if("MULTIPLICATION_SIGN"===e.rule.id&&(r.AT_LEAST_TWO_LETTERS_AT_END_REGEXP.test(s)||!u||r.PUNCTUATION_AT_BEGINNING_REGEXP.test(u)))return!1;if("ZBEDNA_SPACJA_PRZED"===e.rule.id&&e.originalPhrase.includes(r.ZWS))return!1;if("UNLIKELY_OPENING_PUNCTUATION"===e.rule.id&&r.PUNCTUATION_SPACE_AT_END_REGEXP.test(s))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&(!r.LOWERCASE_REGEXP.test(e.originalPhrase)||e.originalPhrase.includes("-")||e.originalPhrase.includes("__")||r.SLASH_AT_END_REGEXP.test(s)||r.SLASH_AT_BEGINNING_REGEXP.test(u)))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&s.endsWith("[")&&u.startsWith("]"))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&l.QUOTE_AT_END_REGEXP.test(s)&&l.QUOTE_AT_BEGINNING_REGEXP.test(u))return!1;if("WORD_CONTAINS_UNDERSCORE"===e.rule.id&&(s.endsWith("=")||s.endsWith("&")||s.endsWith("?")))return!1;if(["APOS_INCORRECT","LOOSE_ACCENTS"].includes(e.rule.id)&&"`"===e.originalPhrase)return!1;if(["_2_AANH_B","FALSCHES_ANFUEHRUNGSZEICHEN_2"].includes(e.rule.id)&&"``"===e.originalPhrase)return!1;if("DASH_RULE"===e.rule.id&&u.startsWith(" [")&&(!s||s.endsWith("\n")))return!1;if(e.isSpellingError&&e.originalPhrase.length>6&&e.fixes.length>4&&e.language.code.startsWith("de")&&(e.fixes.length=4),e.isSpellingError||"WORD_CONTAINS_UNDERSCORE"===e.rule.id){var c=e.originalPhrase.charAt(0),d=e.originalPhrase.toLowerCase();if((0,h.S)(e,n.dictionary))return!1;if((u.startsWith("_")||s.endsWith("_"))&&!e.language.code.startsWith("de"))return!1;if(e.originalPhrase.startsWith("$")&&u.startsWith("}")&&s.endsWith("{"))return!1;if(e.originalPhrase.startsWith("$")&&e.originalPhrase.endsWith("$"))return!1;if(r.HTML_ENTITIES.includes(e.originalPhrase)&&s.endsWith("&")||r.HTML_ENTITIES_WITH_AND.includes(e.originalPhrase)||r.HTML_ENTITIES_WITH_AND.includes("&"+e.originalPhrase))return!1;if(r.COMMON_TLDS.some(function(e,t){return d.endsWith("."+e)||r.COMMON_TLD_WITH_DOT_REGEXPS[t].test(u)}))return!1;if(r.DOT_WITH_PREFIX_REGEXP.test(s)&&r.COMMON_TLDS.includes(d))return!1;if(r.COMMON_FILE_TYPES.some(function(e,t){return d.endsWith("."+e)||r.COMMON_FILE_TYPE_WITH_DOT_REGEXPS[t].test(u)}))return!1;if(r.DOT_WITH_PREFIX_REGEXP.test(s)&&r.COMMON_FILE_TYPES.includes(d))return!1;var f="@"===c||r.MENTION_SYMBOL_AT_BEGINNING_REGEXP.test(s),p="#"===c||r.HASH_SYMBOL_AT_BEGINNING_REGEXP.test(s);if(f||p)return!1;if(o.some(function(t){return t===e.originalPhrase}))return!1;if(r.WAVY_DASH_REGEXP.test(e.originalPhrase))return!1;var _,E=m(o);try{var g=function(){var t=_.value;if(t.toLowerCase()===e.originalPhrase.toLowerCase()&&!e.fixes.some(function(e){return e.value===t}))return e.fixes.unshift({value:t}),1};for(E.s();!(_=E.n()).done&&!g(););}catch(e){E.e(e)}finally{E.f()}}return!0})}},{key:"_processResponse",value:function(e,t,n,r,o){var i=this,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];e.matches=this._correctMatches(e.matches,n,r);var c=this._transformMatches(e.matches,r,e.language,a,null==o?void 0:o.contextConfig,t);c=this._adjustErrors(c,r,o);var l=[],f=[],h=[],p=!o.apiServerUrl||this._isLanguageToolServer(o.apiServerUrl);if(t=this._correctMatches(t.filter(function(e){var t=e.start;return e.end-t>-1}).map(function(e){var t=e.start;return{offset:t,length:e.end-t,detectedLanguages:e.detectedLanguages,checkStatus:e.checkStatus}}),n,r).map(function(e){var t=e.offset,n=e.length;return{start:t,end:t+n,length:n,detectedLanguages:e.detectedLanguages,checkStatus:e.checkStatus}}),s)return{errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],sentenceRanges:t};if(u){var _=d.Ay.get(d.OJ.FIX_ALL_CONFIG);return{errors:c.filter(function(e){return!(!e.isRecommendation||_.FIX_RECOMMENDATIONS)||(!(!e.isStyleError||_.FIX_STYLE_ERRORS)||!_.FIX_GC_ERRORS)}),premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],sentenceRanges:t}}return!o.isPremium&&p&&e.language&&e.language.code.startsWith("nl")&&(c=c.filter(function(e){return!i.NL_PREMIUM_RULES.includes(e.rule.id)||(e.rule.id="HIDDEN_RULE",e.fixes=[],l.push(e),!1)})),!o.isPremium&&p&&e.language&&e.language.code.startsWith("pl")&&(c=c.filter(function(e){return!i.PL_PREMIUM_RULES.includes(e.rule.id)||(e.rule.id="HIDDEN_RULE",e.fixes=[],l.push(e),!1)})),o.isPremium&&c.forEach(function(e){i.NL_PREMIUM_RULES.includes(e.rule.id)&&(e.rule.isPremium=!0),i.PL_PREMIUM_RULES.includes(e.rule.id)&&(e.rule.isPremium=!0)}),o.debug&&c.forEach(function(e){e.description=(e.rule.isPremium?"prem:":"")+e.rule.id+"["+(e.rule.subId||"")+"] "+e.description}),e.hiddenMatches&&(l=l.concat(this._transformMatches(e.hiddenMatches,r,e.language,a,null==o?void 0:o.contextConfig,t))),"hidden-picky"===o.checkLevel&&(c=c.filter(function(e){return!e.isPicky||(h.push(e),!1)}),e.hiddenMatches&&(l=l.filter(function(e){return!e.isPicky||(f.push(e),!1)}))),{errors:c,premiumErrors:l,pickyErrors:h,premiumPickyErrors:f,sentenceRanges:t}}},{key:"_correctErrorOffsets",value:function(e,t){var n,r=[],o=0,i=m(e);try{var a=function(){var e,i=n.value,a=i.text.length,s=m(t);try{for(s.s();!(e=s.n()).done;){var u=e.value;if(u.start>=o&&u.end<=o+a){var c,l=Object.assign({},u);l.start=l.start-o+i.offset,l.end=l.start+l.length,null===(c=l.rule)||void 0===c||null===(c=c.phraseDiff)||void 0===c||c.forEach(function(e){e.sourceStart=e.sourceStart-o+i.offset,e.sourceEnd=e.sourceEnd-o+i.offset,e.targetEnd=e.targetEnd-o+i.offset,e.targetStart=e.targetStart-o+i.offset}),r.push(l)}}}catch(e){s.e(e)}finally{s.f()}o+=a+2};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return r}},{key:"checkTextLevel",value:(y=(0,a.A)(b().m(function e(t,n,r){var o,i,a,s,u,c=this;return b().w(function(e){for(;;)switch(e.n){case 0:if(t=this._prepareText(t),o=Boolean(r.adapter),t.trim()&&!o){e.n=1;break}return e.a(2,{language:n,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[]});case 1:return this._abortTextLevelCheckRequest(r.instanceId),this._textLevelAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForTextLevelRequests&&Date.now()-this._mainServerUnavailabilityTimeStamp>=l.MAIN_SERVER_RECHECK_INTERVAL&&(this._useFallbackServerForTextLevelRequests=!1),i=t.normalize(),a=this._getServerFullUrl(r,!1),s=this._getTextLevelRequestData(i,n,r),u={method:"post",mode:"cors",credentials:"omit",body:s,headers:this._getHeaders(r),signal:this._textLevelAbortControllers.get(r.instanceId).signal},e.a(2,this._sendRequest(a,u).then(function(e){var n=c._processResponse(e,[],i,t,r),o=n.errors,a=n.premiumErrors,s=n.pickyErrors,u=n.premiumPickyErrors;return{language:{code:e.language.code,name:e.language.name,detectedLanguage:e.language.detectedLanguage},errors:o,premiumErrors:a,pickyErrors:s,premiumPickyErrors:u}}).catch(function(e){if(c._isConnectionOrServerIssue(e)&&(c._abortTextLevelCheckRequest(r.instanceId),!r.apiServerUrl&&!c._useFallbackServerForTextLevelRequests))return c._useFallbackServerForTextLevelRequests=!0,c._mainServerUnavailabilityTimeStamp=Date.now(),c.checkTextLevel(t,n,r);throw e}))}},e,this)})),function(e,t,n){return y.apply(this,arguments)})},{key:"_buildSentenceRanges",value:function(e,t){if(!t.extendedSentenceRanges&&!t.sentenceRanges)return[];var n=t.extendedSentenceRanges;n||(n=(t.sentenceRanges||[]).map(function(e){return{from:e[0],to:e[1],detectedLanguages:[{language:t.language.code.split("-")[0],rate:1}]}}));var r=n.map(function(e){return{start:e.from,end:e.to,length:e.to-e.from,detectedLanguages:e.detectedLanguages.map(function(e){return{language:e.language,confidence:e.rate}}),checkStatus:e.checkStatus}});return(0,h.oi)(r,e)}},{key:"cancelAllRequests",value:function(e){this._abortParagraphLevelCheckRequest(e),this._abortLanguageDetectionRequest(e),this._abortTextLevelCheckRequest(e),this._abortRecommendationRequest(e)}},{key:"checkParagraphLevel",value:(v=(0,a.A)(b().m(function e(t,n,r,o,i,a,s){var u,c,f,p,_,E,v,y,A,T,S,R,O=this;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.forEach(function(e){e.text=O._prepareText(e.text)}),t.some(function(e){return!!e.text.trim()})){e.n=1;break}return f={input:{acceptChangeType:h.PN.GC,language:null==n?void 0:n.code,paragraphs:t,editorCompleteText:o||"",preferredVariants:this._getPreferredVariants(r.languageVariants),disableRecommendations:r.disableRecommendations,replacementText:null==a?void 0:a.replacementText,hasUserAppliedFix:!1,changedParagraphsSentencesLength:i,appliedFixAll:s,writingGoal:r.writingGoalId,changedContent:r.changedContent||[]},signal:this._paragraphLevelAbortControllers.get(r.instanceId).signal,handleResponseCallback:function(e,t){var n;"editor_content_save_ack"===t&&(null==r||null===(n=r.handleResponseCallback)||void 0===n||n.call(r,e,"editor_content_save_ack"))},metaData:{instanceId:r.instanceId,tabId:r.tabId,hostUrl:r.hostUrl||"",hostCategory:r.hostCategory,writingSessionId:r.writingSessionId,lastEditorContentSavedTimestamp:r.lastEditorContentSavedTimestamp}},null==r||null===(u=r.adapter)||void 0===u||null===(c=u.grammarCheck)||void 0===c||c.call(u,f),e.a(2,{language:n,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[],isIncompleteResult:!1,areErrorsSuppressed:!1});case 1:this._abortParagraphLevelCheckRequest(r.instanceId),this._paragraphLevelAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForParagraphLevelRequests&&Date.now()-this._mainServerUnavailabilityTimeStamp>=l.MAIN_SERVER_RECHECK_INTERVAL&&(this._useFallbackServerForParagraphLevelRequests=!1),p=!1,a&&a.ruleId&&(_=d.Ay.get(d.OJ.AI_RULE_ID_REGEX),p=_.test(a.ruleId)),E=this._getServerFullUrl(r,!0),v=[t],r.adapter||(v=this._joinInChunks(t)),y=[],A=m(v),e.p=2,S=b().m(function e(){var t,u,c,l,d,f,_,g,m,v,A;return b().w(function(e){for(;;)switch(e.n){case 0:u=T.value,c=u.map(function(e){return e.text}).join("\n\n"),l=c.normalize(),d=O._getParagraphLevelCheckRequestData(l,n,r),f={method:"post",mode:"cors",credentials:"omit",body:d,headers:O._getHeaders(r),signal:O._paragraphLevelAbortControllers.get(r.instanceId).signal},_=function(e,t){if("editor_content_save_ack"===t){var n;null===(n=r.handleResponseCallback)||void 0===n||n.call(r,e,"editor_content_save_ack")}else{var o,a=O._postProcessParagraphLevelCheckResult(e,u,l,c,r,p,i,s);null===(o=r.handleResponseCallback)||void 0===o||o.call(r,a,t)}},g="REPHRASING"===(null==a?void 0:a.ruleId)?h.PN.REPHRASING:null!=a&&a.isRecommendation?h.PN.GC_RECOMMENDATION:h.PN.GC,m={input:{acceptChangeType:g,language:null==n?void 0:n.code,paragraphs:u,editorCompleteText:o||"",preferredVariants:O._getPreferredVariants(r.languageVariants),disableRecommendations:r.disableRecommendations,replacementText:null==a?void 0:a.replacementText,hasUserAppliedFix:!!a&&p,changedParagraphsSentencesLength:i,appliedFixAll:s,writingGoal:r.writingGoalId,changedContent:r.changedContent||[],responseType:r.responseType},signal:O._paragraphLevelAbortControllers.get(r.instanceId).signal,handleResponseCallback:_,metaData:{instanceId:r.instanceId,tabId:r.tabId,hostUrl:r.hostUrl||"",hostCategory:r.hostCategory,writingSessionId:r.writingSessionId,lastEditorContentSavedTimestamp:r.lastEditorContentSavedTimestamp}},v=r.adapter?null===(t=r.adapter)||void 0===t?void 0:t.grammarCheck(m):O._sendRequest(E,f),A=v.then(function(e){return O._postProcessParagraphLevelCheckResult(e,u,l,c,r,p,i,s)}),y.push(A);case 1:return e.a(2)}},e)}),A.s();case 3:if((T=A.n()).done){e.n=5;break}return e.d(g(S()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,R=e.v,A.e(R);case 7:return e.p=7,A.f(),e.f(7);case 8:return e.a(2,Promise.all(y).then(function(e){var t=e[0].language,n=e[0].areErrorsSuppressed,r=e[0].metaData;return{language:t,errors:Array.prototype.concat.apply([],e.map(function(e){return e.errors})),premiumErrors:Array.prototype.concat.apply([],e.map(function(e){return e.premiumErrors})),premiumPickyErrors:Array.prototype.concat.apply([],e.map(function(e){return e.premiumPickyErrors})),pickyErrors:Array.prototype.concat.apply([],e.map(function(e){return e.pickyErrors})),isIncompleteResult:e.some(function(e){return e.isIncompleteResult}),sentenceRanges:Array.prototype.concat.apply([],e.filter(function(e){return Boolean(e.sentenceRanges)}).map(function(e){return e.sentenceRanges})),areErrorsSuppressed:n,metaData:r}}).catch(function(e){if(O._isConnectionOrServerIssue(e)&&(O._abortParagraphLevelCheckRequest(r.instanceId),(!r.apiServerUrl||O._isLanguageToolServer(r.apiServerUrl))&&!O._useFallbackServerForParagraphLevelRequests))return O._useFallbackServerForParagraphLevelRequests=!0,O._mainServerUnavailabilityTimeStamp=Date.now(),O.checkParagraphLevel(t,n,r,o);throw e}))}},e,this,[[2,6,7,8]])})),function(e,t,n,r,o,i,a){return v.apply(this,arguments)})},{key:"_postProcessParagraphLevelCheckResult",value:function(e,t,n,r,o,a,s,u){var c,l=e.language,d=e.warnings,f=e.ignoreRanges||[];o.debug&&f.length&&(e.matches=this._filterErrorsInIgnoredRanges(e.matches,f),e.hiddenMatches&&(e.hiddenMatches=this._filterErrorsInIgnoredRanges(e.hiddenMatches,f)),this._addIgnoredRangeMatches(n,e.matches,f));var h=this._buildSentenceRanges(n,e),_=null!==(c=o.adapter)&&void 0!==c&&c.grammarCheck?a:a&&1===t.length&&h.length===s,E=this._processResponse(e,h,n,r,o,!0,_,u),g=E.errors,m=E.premiumErrors,v=E.pickyErrors,b=E.premiumPickyErrors;h=(0,i.A)(E,p).sentenceRanges;var y=this._correctErrorOffsets(t,g),A=this._correctErrorOffsets(t,m),T=this._correctErrorOffsets(t,v),S=this._correctErrorOffsets(t,b);return h=this._correctErrorOffsets(t,h),{language:{code:l.code,name:l.name},errors:y,premiumErrors:A,pickyErrors:T,premiumPickyErrors:S,isIncompleteResult:!!d&&d.incompleteResults,areErrorsSuppressed:_,sentenceRanges:h,metaData:null==e?void 0:e.metaData}}},{key:"checkRecommendation",value:(_=(0,a.A)(b().m(function e(t,n){var r,o,i,a,s,u,c;return b().w(function(e){for(;;)switch(e.n){case 0:if(t.isForcedRecommendation||this._abortRecommendationRequest(t.instanceId),r=new AbortController,this._recommendationAbortControllers.set(t.instanceId,r),o={input:{language:t.language.code,texts:t.texts,priorities:t.priorities,writingGoal:t.writingGoal||""},metaData:E({},null==n?void 0:n.metaData)},null==n||!n.adapter){e.n=2;break}return e.n=1,n.adapter.recommendation(o,E(E({},n.options),{},{signal:(null===(i=n.options)||void 0===i?void 0:i.signal)||r.signal}));case 1:return s=e.v,u=[],null!==(a=n.contextConfig)&&void 0!==a&&a.useSentenceAwareContext&&t.texts.length>0&&(u=t.texts.map(function(e){var n=e.offset,r=e.offset+e.text.length;return{start:n,end:r,length:r-n,detectedLanguages:[{language:t.language.code.split("-")[0],confidence:1}]}})),c=this._transformMatches(s.matches||[],t.originalText,t.language,!0,n.contextConfig,u),e.a(2,c);case 2:return e.a(2,new Promise(function(e){e([])}));case 3:return e.a(2)}},e,this)})),function(e,t){return _.apply(this,arguments)})},{key:"unlockRecommendation",value:(o=(0,a.A)(b().m(function e(t,n){var r;return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(r=n.adapter)||void 0===r?void 0:r.unlockRecommendation({lockId:t,metaData:n.metaData});case 1:return e.a(2,e.v)}},e)})),function(e,t){return o.apply(this,arguments)})},{key:"translateText",value:function(e,t){return t.adapter.translate(e)}},{key:"_filterErrorsInIgnoredRanges",value:function(e,t){return e.filter(function(e){var n=e.offset,r=e.offset+e.length;return!t.some(function(e){return n>=e.from&&n<=e.to||r>=e.from&&r<=e.to})})}},{key:"_addIgnoredRangeMatches",value:function(e,t,n){n.forEach(function(n){var r=n.to-n.from,o=e.substring(n.from,n.to).match(/\s+$/);o&&(r-=o[0].length);var i={offset:n.from,length:r,rule:{id:"IGNORED_RANGE",category:{id:"IGNORED_RANGE",name:"Ignored Range"},issueType:"ignoredRange",description:"",isPremium:!1},contextForSureMatch:0,message:"This text is in a different language than the rest of the text.",shortMessage:"Different language: "+n.language.code,replacements:[]};t.push(i)})}},{key:"detectLanguage",value:(r=(0,a.A)(b().m(function e(t,n,r){var o,i,a,s,u,c=this;return b().w(function(e){for(;;)switch(e.n){case 0:if(t=this._prepareText(t),o=Boolean(r.adapter),t.trim()&&!n&&!o){e.n=1;break}return e.a(2,{language:n,errors:[],premiumErrors:[],pickyErrors:[],premiumPickyErrors:[]});case 1:return this._abortLanguageDetectionRequest(r.instanceId),this._languageDetectionAbortControllers.set(r.instanceId,new AbortController),this._useFallbackServerForLanguageDetection&&Date.now()-this._mainServerUnavailabilityTimeStamp>=l.MAIN_SERVER_RECHECK_INTERVAL&&(this._useFallbackServerForLanguageDetection=!1),i=t.substr(0,1e3).normalize(),a=this._getServerFullUrl(r,!1),s=this._getTextLevelRequestData(i,n,r),u={method:"post",mode:"cors",credentials:"omit",body:s,headers:this._getHeaders(r),signal:this._languageDetectionAbortControllers.get(r.instanceId).signal},e.a(2,this._sendRequest(a,u).then(function(e){return{language:{code:e.language.code,name:e.language.name},errors:[],premiumErrors:[],premiumPickyErrors:[],pickyErrors:[]}}).catch(function(e){if(c._isConnectionOrServerIssue(e)&&(c._abortLanguageDetectionRequest(r.instanceId),(!r.apiServerUrl||c._isLanguageToolServer(r.apiServerUrl))&&!c._useFallbackServerForLanguageDetection))return c._useFallbackServerForLanguageDetection=!0,c._mainServerUnavailabilityTimeStamp=Date.now(),c.detectLanguage(t,n,r);throw e}))}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"_isLanguageToolServer",value:function(e){return!!e&&(e.includes("api.languagetool.org")||e.includes("languagetool.org/api")||e.includes("api.languagetoolplus.com"))}},{key:"checkForPaidSubscription",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.PREMIUM_SERVER_URL;return new Promise(function(i,a){o+=o.endsWith("/")?"check":"/check";var s=new URLSearchParams;s.append("language","en-us"),s.append("data",JSON.stringify({text:"The languagetool testrule 8634756."})),e&&t?(s.append("username",e),s.append("password",t)):e&&n&&(s.append("username",e),s.append("tokenV2",n));var u={method:"post",mode:"cors",credentials:"omit",body:s};r._sendRequest(o,u).then(function(e){var t=e.matches.some(function(e){return"PREMIUM_FAKE_RULE"===e.rule.id});i(t)}).catch(a)})}},{key:"addWordToDictionary",value:function(e,t){if(!Boolean(t.adapter)){var n=this.getServerBaseUrl(t),r=n.endsWith("/")?"":"/",o=new URL(n+r+"words/add");if(t.user&&"token"in t.user)o.searchParams.set("username",t.user.email),o.searchParams.set("tokenV2",t.user.token);else{if(!t.user||!("password"in t.user))return Promise.reject(new Error("Not logged-in for adding words to dictionary"));o.searchParams.set("username",t.user.email),o.searchParams.set("password",t.user.password)}return o.searchParams.set("word",e.trim()),fetch(o.toString(),{method:"POST"}).then(function(e){return e.ok?Promise.resolve():Promise.reject(new Error("Status: ".concat(e.status)))})}}},{key:"getLanguageVariant",value:function(e,t){return"en"===(e=e.toLowerCase())?t.languageVariants.en||"en-us":"de"===e?t.languageVariants.de||"de-de":"pt"===e?t.languageVariants.pt||"pt-pt":"ca"===e?t.languageVariants.ca||"ca-es":d.Ay.get(d.OJ.SUPPORTED_LANGUAGES).find(function(t){return t===e||t.startsWith(e+"-")})||e}},{key:"check",value:function(e,t,n,r,o,i,a,s,u){return"client"===s?this.checkWithClientLanguageDetection(e,t,n,r,o,i,a,u):this.checkWithServerLanguageDetection(e,t,n,r,o,i,a)}},{key:"checkWithClientLanguageDetection",value:(n=(0,a.A)(b().m(function t(n,r,o,i,a,u,c,l){var d,h,p,_,g,m,v,y;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:if(r){t.n=6;break}return d=null,h=null,t.p=1,t.n=2,f.A.detect(n,o.preferredLanguages,o.forcePreferredLanguages);case 2:d=t.v,t.n=4;break;case 3:t.p=3,y=t.v,h=y.message;case 4:if(d){t.n=5;break}return l&&l(h||"Could not detect language"),t.a(2,this.checkWithServerLanguageDetection(n,r,o,i,a,u,c));case 5:if(r={code:this.getLanguageVariant(d.language,o),name:""},this.isSupportedLanguage(r.code)){t.n=6;break}return t.a(2,{textLevelResult:E(E({},this.EMPTY_ERRORS_RESPONSE),{},{language:{code:"zz",name:"NoopLanguage"}}),paragraphLevelResult:E(E({},this.EMPTY_ERRORS_RESPONSE),{},{sentenceRanges:[],isIncompleteResult:!1,areErrorsSuppressed:!1,language:{code:"zz",name:"NoopLanguage"}})});case 6:return p=[],o.skipTextLevelCheck?p.push(Promise.resolve(E(E({},this.EMPTY_ERRORS_RESPONSE),{},{language:r}))):p.push(e.checkTextLevel(n,r,o)),p.push(e.checkParagraphLevel(i,r,o,n,a,u,c)),t.n=7,Promise.all(p);case 7:return _=t.v,g=(0,s.A)(_,2),m=g[0],v=g[1],m.language&&(m.language.detectedLanguage=E(E({},r),{},{source:"client"})),t.a(2,{textLevelResult:m,paragraphLevelResult:v})}},t,this,[[1,3]])})),function(e,t,r,o,i,a,s,u){return n.apply(this,arguments)})},{key:"isSupportedLanguage",value:function(e){return d.Ay.get(d.OJ.SUPPORTED_LANGUAGES).some(function(t){return t===e.toLowerCase()})}},{key:"checkWithServerLanguageDetection",value:(t=(0,a.A)(b().m(function t(n,r,o,i,a,u,c){var l,d,f,h,p,_;return b().w(function(t){for(;;)switch(t.n){case 0:return d=[],o.skipTextLevelCheck?d.push(e.detectLanguage(n,r,o)):d.push(e.checkTextLevel(n,r,o)),d.push(e.checkParagraphLevel(i,r,o,n,a,u,c)),t.n=1,Promise.all(d);case 1:return f=t.v,h=(0,s.A)(f,2),p=h[0],_=h[1],null!==(l=p.language)&&void 0!==l&&l.detectedLanguage&&(p.language.detectedLanguage.source="server"),t.a(2,{textLevelResult:p,paragraphLevelResult:_})}},t)})),function(e,n,r,o,i,a,s){return t.apply(this,arguments)})}]);var t,n,r,o,_,v,y,A}();A(T,"NL_PREMIUM_RULES",["FAAG_VAAG","TOO_LONG_SENTENCE","_2_LEESTEKENS","WEEKEND","CASU_QUO","MOMENTEEL","SLECHTS","LEENWOORDEN","KOMMA_HOOR","RELEVANT","HINTS","CHECKEN","ALLEEN_BE","MACHTE","ECHTER","COMMUNICEREN","DESIGN","SANDAAL_ZANDAAL","N","MIDDELS","INTEGREREN","PRIMAIR","OVERIGENS","BETREFFENDE","AGENDA","ERGO","TEN_BEHOEVE","KOMMA_AANH","TM","IE","TER_ZAKE","SIGNIFICANT","GELIEVE","BEHOREN","NAAR_AANLEIDING_VAN","VAN_PLAN_ZIJN","HEDEN","TEN_DODE","VREEMD_VRZ_HIJ","DES","IMPACT","IMMER","BOVENSTAAND","XXXYJE","DUTCH_WRONG_WORD_IN_CONTEXT","LANCEREN","MET_BEHULP_VAN","PRIORITEIT","UWENTWEGE","CATEGORIE","CRITERIUM","GEMOTIVEERD"]),A(T,"PL_PREMIUM_RULES",["BOWIEM_ZAS","ZE_Z_SPOL","SPACJA_ZNAK_ROWNOSCI","BRAK_PRZECINKA_GDY","PYTANIE_CO","BRAK_PRZECINKA_JESLI","PRZECINEK_ANI","SKROTOWCE_BEZ_DYWIZU","NIEZGODNOSC_PRZYPADKU_PO_LICZEBNIKU","PODMIOT_ORZECZENIE","ROWNIE_JAK","JAK_I","PRZECINEK_POROWNANIE","WOLACZ_BEZ_PRZECINKA","ODNOSNIE_DO","GENERALNIE","BOWIEM_ZAS_PRZECINEK","WYDAWAC_SIE_BYC","POSIADAC_MIEC","PL_GUILLEMET","ITP_ITD","SPACJA_PROCENT","PO","W_TEMACIE","PL_DWA_WYRAZY","W_NAWIAZANIU_DO","WE_W","POKI_CO","VS","DZIEN_DZISIEJSZY","WIELOKROTNE_WYSTPIENIE_TEGO_SAMEGO_WYRAENIA_PRZYIMKOWEGO","I_LUB","PELNIC_ROLE","OKRES_CZASU","UZNAC_JAKO","EFEKT_KONCOWY","DLATEGO_PONIEWAZ","NA_DZIEN_DZISIEJSZY","DODATKOWO_CO_WIECEJ","OWY_W","DZIEN_JUTRZEJSZY","ADRES_ZAMIESZKANIA","W_CHWILI_OBECNEJ","BYC_ZNAJDOWAC_SIE_W_POSIADANIU","DO_TERAZ","PROTOKOL_Z_CZEGO","PO_NAJMNIEJSZEJ_LINII","POTRAFIACY","zarowno_jak_rowniez","GRAC_FAIR_PLAY","DRUGI_NAJWIEKSZY","COFAC_SIE_DO_TYLU","DZIEN_WCZORAJSZY","NA_PRZESTRZENI","IDENTYCZNY_JAK","ZA_WYJATKIEM","MAPA_DROGOWA","W_PRZECIGU_TYGODNIA_W_CIGU","NAPOTKAC_NA","PRZERWA_KAWOWA","WYSOKA_FREKWENCJA","UBRAC_ZALOZYC","PRZY_UDZIALE","W_SLAD_ZA","WYRAZIC_POPARCIE","W_TYM_WZGLEDZIE","PO_PIERWSZE_PRIMO","DOMYSLEC_SIE","WARTY","IDENTYCZNY_DO","W_DRODZE_WYJATKU","PRZEDKLADAC_WNIOSEK","POD_RZAD","PRZYJAZNY_DLA_UZYTKOWNIKA","NA_WSKUTEK","SWIECIC_SUKCESY","W_WEGRZECH","KONDYCJA_FINANSOWA","RULE_NIEMNIEJ","FORMULA_KREMU","PODDAWAC_W_WATPLIWOSC","OPATRZEC_SIE","ODGRYWAC_ZNACZENIE","INFORMACJE_WRAZLIWE","DO_DZIS_DZIEN","CO_I_RAZ","OKRAGLY_ROK","SZERSZE_INFORMACJE","WYSOKA_FORMA","CZEKAC_ZA","BYNAJMNIEJ","WYWIERAC_PIETNO","DOPATRZEC_SIE","ZLA_RENOMA","W_PELNYM_TEGO","W_KAZDYM_BADZ","KOSZTOWAC_TANIEJ","DYGITALNY"]),A(T,"SPELLING_RULES_ID",["SPELLER_RULE","MORFOLOGIK_RULE","HUNSPELL","SPELLING_RULE","ORTHOGRAPHY"]),A(T,"EMPTY_ERRORS_RESPONSE",{errors:[],pickyErrors:[],premiumErrors:[],premiumPickyErrors:[]}),A(T,"STYLE_ISSUE_TYPES",["style","locale-violation","register"]),A(T,"EMAIL_SIGNATURE_SEPARATOR_REGEXP",/^[\u2010|\-]{2,}|[\u2010|\-]{2,}$/),A(T,"ONLY_NUMBERS_REGEXP",/^[0-9]+$/),A(T,"COLON_WHITESPACE_REGEXP",/^[;:]\s/),A(T,"ONE_LETTER_AT_END_REGEXP",/(\s|^|\()[a-z]\.?\s?$/i),A(T,"NUMBER_WITH_DOT_AT_END_REGEXP",/\d\.?\s?$/),A(T,"NUMBER_WITH_PARENTHESIS_AT_END_REGEXP",/\d\.?\)\s$/),A(T,"PUNCTUATION_AT_END",/(\.|\!)$/),A(T,"BULLET_POINT_REGEXP",/(\u25b6\ufe0e|\u25BA|\*|-|\u2013|\u2606|\u2605|\u25cf|\u2022|\u25e6|\u27A4|\u2714)\s+$/),A(T,"LOWERCASE_REGEXP",/[a-z]/),A(T,"DOT_WITH_PREFIX_REGEXP",/\w\.$/),A(T,"SLASH_AT_END_REGEXP",/(\/|\\)$/),A(T,"AT_LEAST_TWO_LETTERS_AT_END_REGEXP",/[a-z]{2}$/i),A(T,"SLASH_AT_BEGINNING_REGEXP",/^(\/|\\)/),A(T,"PUNCTUATION_AT_BEGINNING_REGEXP",/^\s?[\.\!\?,:\u2026]/),A(T,"PUNCTUATION_SPACE_AT_END_REGEXP",/[\.\u2026\?\!]\s+/),A(T,"MARKDOWN_HEADLINE_REGEXP",/^#{1,6}\s/m),A(T,"MARKDOWN_INLINE_FORMAT_AT_BEGINNING_REGEXP",/^[\*\~\_\^\+\%\@]/m),A(T,"WIKI_MARKUP_AT_END_REGEXP",/\[\[[a-z]+$/),A(T,"PIPE_AT_END_REGEXP",/\|\s+$/),A(T,"MENTION_SYMBOL_AT_BEGINNING_REGEXP",/@[a-z\.\-]*$/i),A(T,"HASH_SYMBOL_AT_BEGINNING_REGEXP",/#[a-z\.\-]*$/i),A(T,"EMOJI_SENTENCE_START_REGEXP",/(\.|!|\?|^)\s?(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])\s+/),A(T,"ABBREVIATION_AT_END_REGEXP",/(\s|\(|^)[A-Z]\.$/),A(T,"NET_AT_BEGINNING_REGEXP",/^net\b/i),A(T,"SINGLE_UPPERCASE_LETTER_REGEXP",/^[A-Z]$/),A(T,"NON_ALPHANUMERIC_AT_BEGINNING_REGEXP",/^[^a-z0-9\xe4\xf6\xfc\xdf\xe1\xe0\xe2\xe9\xe8\xea\xed\xec\xee\xf3\xf2\xf4\xfa\xf9\xfb\.\?\!,\:\;\xbf\xa1]+/i),A(T,"NON_ALPHANUMERIC_AT_END_REGEXP",/[^a-z0-9\xe4\xf6\xfc\xdf\xe1\xe0\xe2\xe9\xe8\xea\xed\xec\xee\xf3\xf2\xf4\xfa\xf9\xfb\.\?\!,\:\;\xbf\xa1]+$/i),A(T,"HTML_ENTITIES",["amp","nbsp","gt","lt","bull","euro","copy","laquo","raquo","hellip","middot"]),A(T,"HTML_ENTITIES_WITH_AND",T.HTML_ENTITIES.map(function(e){return"&".concat(e)})),A(T,"WAVY_DASH_REGEXP",/^\u3030+$/),A(T,"INVISIBLE_PHRASE_REGEXP",/^[\u2063\uFEFF]+$/),A(T,"INVISIBLE_CHARS_REGEXP",/[\u2063\uFEFF]/g),A(T,"ZWNJ_REGEXP",/\u200B|\u200C/g),A(T,"ZWS","\ufeff"),A(T,"PREVENT_MID_SENTENCE_CAPITALIZATION",/[\w\xe1\xe0\xe2\xf3\xf2\xec\xed\xe9\xe8\xf9\xfa\xe2\xf4\xee\xea\xfb\xe4\xf6\xfc\xdf,\)][\u0020\u00A0\uFEFF]*\n\n\n?[\u0020\u00A0\uFEFF"\u201e\xbb\xab\u201c\u2018]*$/),A(T,"PREVENT_MID_SENTENCE_PUNCTUATION",/^[\u0020\u00A0\uFEFF]*\n\n\n?[a-z\xe1\xe0\xe2\xf3\xf2\xec\xed\xe9\xe8\xf9\xfa\xe2\xf4\xee\xea\xfb\xe4\xf6\xfc\xdf,\)]/),A(T,"INVISIBLE_SEPARATOR_REGEX",new RegExp(l.INVISIBLE_SEPARATOR,"g")),A(T,"COMMON_TLDS",["com","co","org","net","de","info","biz","es","fr","be","in","gov","nl","ca","com.br","br","at","us","au","ru","pl","ly","it","cat","edu","jp","ko","cn","se","no","mil","ch","dk","com.mx","mx","eu","co.uk","uk","ir","cz","ua","kr","gr","tw","nz","co.nz","za","ro","vn","io","tr","me","fi","tv","xyz","pt","ie","app"]),A(T,"COMMON_TLD_WITH_DOT_REGEXPS",T.COMMON_TLDS.map(function(e){return new RegExp("^\\.".concat(e.replace(".","\\."),"\\b"),"i")})),A(T,"COMMON_FILE_TYPES",["jpeg","jpg","gif","png","bmp","indd","stl","svg","ai","sketch","ico","ics","env","amf","ps","psd","tiff","tif","mp3","wav","midi","mid","aif","mpa","ogg","wma","wpl","cda","7z","arj","deb","pkg","plist","rar","rpm","tar.gz","tar","zip","bin","dmg","iso","toast","vcd","csv","dat","db","log","mdb","sav","sql","xml","apk","bat","bin","cgi","com","exe","gadget","jar","py","js","jsx","json","wsf","ts","tsx","fnt","fon","otf","ttf","woff","woff2","rb","java","php","html","asp","aspx","cer","cfm","cgi","pl","css","scss","htm","jsp","part","rss","xhtml","key","odp","pps","ppt","pptx","class","cpp","cs","h","sh","swift","vb","ods","odt","xlr","xls","xlsx","xlt","xltx","bak","cab","cfg","cpl","cur","dll","dmp","msi","ini","tmp","3g2","3gp","avi","flv","h264","m4v","mkv","mov","mp4","mpg","mpeg","rm","swf","vob","wmv","doc","docx","dot","dotx","pdf","rtf","srx","text","tex","wks","wps","wpd","txt","yaml","yml","csl","md","adm"]),A(T,"COMMON_FILE_TYPE_WITH_DOT_REGEXPS",T.COMMON_FILE_TYPES.map(function(e){return new RegExp("^[\\w\xe1\xe0\xe2\xf3\xf2\xec\xed\xe9\xe8\xf9\xfa\xe2\xf4\xee\xea\xfb\xe4\xf6\xfc\xdf\\-\\.\\(\\)]*?\\.".concat(e,"\\b"),"i")})),A(T,"FILE_TYPE_AT_BEGINNING_REGEXP",new RegExp("(".concat(T.COMMON_FILE_TYPES.join("|"),")\b"),"i")),A(T,"HIGH_LEVEL_GOALS",[{id:"professional",tags:["clarity","confident","formal","general","positive","professional"]},{id:"scientific",tags:["academic","clarity","formal","general","objective","povrem","scientific"]},{id:"persuasive",tags:["clarity","confident","general","persuasive","positive"]},{id:"personal",tags:["clarity","general","informal","positive","povadd"]},{id:"creative",tags:["clarity","general"]}]),A(T,"_textLevelAbortControllers",new Map),A(T,"_paragraphLevelAbortControllers",new Map),A(T,"_languageDetectionAbortControllers",new Map),A(T,"_recommendationAbortControllers",new Map),A(T,"_useFallbackServerForTextLevelRequests",!1),A(T,"_useFallbackServerForParagraphLevelRequests",!1),A(T,"_useFallbackServerForLanguageDetection",!1),A(T,"_mainServerUnavailabilityTimeStamp",0),A(T,"_checkForException",function(e){return e.ok?e:e.text().catch(function(){return""}).then(function(t){var n=t.toLowerCase();if(n.includes("too many error"))throw{reason:"TooManyErrors",status:e.status,response:t};if(413===e.status||n.includes("text exceeds the limit"))throw{reason:"TextTooLong",status:e.status,response:t};if(t.toLowerCase().includes("checking took longer than"))throw{reason:"TimeoutError",status:e.status,url:e.url?e.url.replace(/\?.*/,"?..."):"unknown",response:t};if(429===e.status)throw{reason:"TooManyRequests",status:e.status,response:t};if(403===e.status){if(n.includes("client request size limit")||n.includes("client request limit")||n.includes("ip request limit")||n.includes("ip request size limit"))throw{reason:"TooManyRequests",status:e.status,response:t};if(n.includes("authexception"))throw{reason:"InvalidCredentials",status:e.status,response:t};throw{reason:"AccessDenied",status:e.status,response:t}}if(n.includes("checking took longer than"))throw{reason:"TimeoutError",status:e.status,url:e.url?e.url.replace(/\?.*/,"?..."):"unknown",response:t};throw{reason:"UnknownError",status:e.status,response:t}})})},23224:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},24315:(e,t,n)=>{"use strict";n(22412),n(10028);var r;r={}},24640:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=.5,o=function(e,t,n){return e>=t&&e<=n};function i(e){e=e.slice(0,50);for(var t=0,n=0,i=0,a=0,s=0,u=0,c=0,l=0,d=0,f=0,h=0,p=0;p<e.length;p++){var _,E=null!==(_=e[p])&&void 0!==_?_:"",g=E.charCodeAt(0);/\s/.test(E)||/\d/.test(E)||"."===E||h++,o(g,1536,1791)&&t++,o(g,1024,1279)&&n++,(o(g,19968,40959)||o(g,12352,12447)||o(g,12448,12543))&&i++,o(g,6016,6143)&&a++,o(g,2946,3066)&&s++,(o(g,880,1023)||o(g,7936,8191))&&u++,o(g,2304,2431)&&c++,o(g,3584,3711)&&l++,(o(g,1424,1535)||o(g,64285,64320))&&d++,(o(g,44032,55215)||o(g,4352,4607)||o(g,12592,12687)||o(g,43360,43391)||o(g,55216,55295))&&f++}if(0===h)return[];var m=function(e){return e/h},v=[];return m(t)>=r&&v.push("ar","fa"),m(n)>=r&&v.push("ru","uk","be"),m(i)>=r&&v.push("zh","ja"),m(a)>=r&&v.push("km"),m(s)>=r&&v.push("ta"),m(u)>=r&&v.push("el"),m(c)>=r&&v.push("hi","mr"),m(l)>=r&&v.push("th"),m(d)>=r&&v.push("he"),m(f)>=r&&v.push("ko"),v}},25444:(e,t,n)=>{"use strict";n(10028)},26270:(e,t,n)=>{"use strict";function r(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}n.d(t,{A:()=>r})},27120:(e,t,n)=>{"use strict";n.d(t,{tU:()=>l});var r=n(36111),o=n(27580),i=n(32009),a={key:"DE"},s={key:"EN"},u={key:"ES"},c={key:"FR"},l=(s.key,a.key,c.key,u.key,s.key,{ADVANCED_GC_FEATURE_FLAG:"true",AMPLITUDE_API_KEY:"6e403e775d1f5921fdc52daf8f866c66",AMPLITUDE_EXPERIMENT_DEPLOYMENT_KEY:"client-1FGauD2OA6aaKW7utchw72TkOn6WdAfB",AMPLITUDE_TEST_PROJECT_API_KEY:"4cb73e8d02ff7585dd16374c98edfea3",API_TIMEOUT:1e4,BACKEND_HOST:"https://quillbot.com",BUGSNAG_API_KEY:"c312d2e79c06cfa17065dc98d7ad74ab",CHROME_EXTENSION_ID:"iidnbdjijdkbmajdffnidomddglmieko",EDIT_STREAM_HTTP_URL:"https://stream.quillbot.com",ENABLE_SOCKET_QUEUE:"true",ENV_URL:"quillbot.com",EXTENSION_TYPE:"chrome-active",FALLBACK_CONN_RETRY_DELAY:"500",FALLBACK_MAX_RETRY_ATTEMPTS:"1",FALLBACK_SEND_RETRY_DELAY:"500",FIREBASE_API_KEY:"AIzaSyC8qsoEPOkRDlH3A5E9EqKpUiCxjLVPlho",FIREBASE_APP_ID:"1:174733774878:web:166594aa25a0605f2fde0f",FIREBASE_AUTH_DOMAIN:"auth.quillbot.com",FIREBASE_DATABASE_URL:"https://qb-extension.firebaseio.com",FIREBASE_MESSAGING_SENDER_ID:"174733774878",FIREBASE_PROJECT_ID:"paraphraser-472c1",GA_TRACKING_ID:"UA-108482885-1",GIPHY_API_KEY:"sXGNsG8jHYVfhNuNZ0L5oUqUKTPpqgHd",IS_RECOMMENDATION_ENABLED_FOR_WS:"true",MAX_RETRY_EDITOR_NOT_FOUND:"3",MESSAGE_ACK_TIMEOUT:"3000",MESSAGE_CACHE_TTL:"172800000",MESSAGE_FALLBACK_BATCH_SIZE:10,MESSAGE_MAX_RETRIES:"1",MESSAGE_QUEUE_TIMEOUT:"10000",MESSAGE_RETRY_DELAY_SEC:"200",MESSAGE_WS_BATCH_SIZE:"20",OBSERVABLE_IDLE_TIMEOUT:1e4,OBSERVABLE_TIMEOUT:"30000",RAVEN_API_HOST:"https://quillbot.com/api/raven",REDUX_DEVTOOLS_ENABLED:!1,RETURN_FROM_WS:"true",RUNNING_E2E:!1,SENTRY_DSN_KEY:"https://5b3c1d7a284db293d2a9dea5d8f9cd44@sentry-extension.quillbot.com/3",SENTRY_ENV:"production",SENTRY_SAMPLE_RATE:"0.05",SENTRY_TRACE_SAMPLE_RATE:"0.05",SOCKET_CONN_TIMEOUT:"40000",SOCKET_MAX_RETRY_ATTEMPTS:"5",SOCKET_RECONNECT_DELAY:"500",SOCKET_RETRY_TIME_AFTER_EXHAUST:"90000",STREAM_API_TIMEOUT:"10000",STREAM_MESSAGE_TIMEOUT:"5000",TRACKING_HOST:"https://collector.quillbot.com",VERSION_NUMBER:"local",WS_URL:"wss://stream.quillbot.com"}),d="https://quillbot.com/api/pageq/apps",f=("".concat(d,"/QBExtension/client-contents?pageQContents="),"".concat(d,"/QBWebapp/client-contents?pageQContents=AIEditorDocumentTypes"),Object.freeze({custom:"custom"}),Object.freeze({AB_TEST_EXPERIMENTS_API:"worker/abtest-experiments-info",CAMPAIGN_AUTH_API:"auth/campaign",DETECT_LANGUAGE:"utils/detect-language",DETECT_TONE_API:"utils/tone-detection",DICTIONARY_API:"config/lang/dictionary",EDITOR_CONFIGS:"chrome-extension/editor-settings",EXTENSION_CAMPAIGN_CHECK:"campaign/check",EXTENSION_HASH:"chrome-extension/extension-hash",EXTRACT_KEYWORDS:"utils/extract-keyword",GA_TRACKER:"collect",GA_TRACKER_DEBUGGER:"debug/collect",GC_ERROR_CATEGORY:"config/lang/gc-preferences",GENERATE_TEXT:"raven/generate/text",GENERATIVE_AI_API:"utils/generative-ai",GET_ACCOUNT_DETAILS:"auth/get-account-details",GET_USER_DETAILS:"auth/get-user-details",GRAMMAR_CHECKER_API:"utils/grammar-check",HEALTH_CHECK:"chrome-extension/health-check",ISSUE_TOKEN_API:"auth/issue-token",MODES_DETAILS:"chrome-extension/modes-details",PARAPHRASE:"paraphraser/single-paraphrase",PARAPHRASE_PHRASE:"utils/paraphrase-phrase",PASSIVE_TO_ACTIVE:"utils/active-voice",SENTENCE_SPLITTER:"utils/sentence-spiltter",SNEAK_PEEK_QUOTA_URL:"sneak-peek/recommendation/remaining-quota",SPAM_CHECK:"auth/spam-check",SUGGESTED_WORDS_API:"config/lang/suggested-words",SUMMARIZE_PARA:"summarizer/summarize-para",TEMPORARY_DATA_API:"utils/temporary-data",TESTING_API:"system/info",TRANSLATE:"utils/translate",TRANSLATE_SUPPORTED_LANGUAGES:"utils/translate/languages",UPDATE_USER_DETAILS:"auth/update-demographic-information",UPDATE_USER_METRICS_API:"auth/update-user-metric",UPDATE_USER_PROFILE:"auth/update-user-profile",USER_LANGUAGE_CONFIG_API:"config/lang"})),h=(f.GRAMMAR_CHECKER_API,f.PARAPHRASE,f.SENTENCE_SPLITTER,f.DETECT_TONE_API,f.SUMMARIZE_PARA,f.EXTRACT_KEYWORDS,f.PASSIVE_TO_ACTIVE,f.PARAPHRASE_PHRASE,f.DETECT_LANGUAGE,function(e){return e.advanced_gc="advanced_gc",e.cf_cookie="cf_cookie",e.context_management="context_management",e.ext_bts_aug_24="ext_bts_aug_24",e.ext_changelog_campaign="ext_changelog_campaign",e.ext_gc_calls_batching_mar24="ext_gc_calls_batching_mar24",e.ext_gpt_v2_premium_users_gmail="ext_gpt_v2_premium_users_gmail",e.ext_integration_test="ext_integration_test",e.ext_on_device_lang_detect="ext_on_device_lang_detect",e.ext_privacy_policy_june_2025="ext_privacy_policy_june_2025",e.ext_segmenter_sentence_splitter="ext_segmenter_sentence_splitter",e.ext_text_too_large_popup="ext_text_too_large_popup",e.ext_writing_goal="ext_writing_goal",e.ext_writing_score_v2="ext_writing_score_v2",e["ext-bts-24"]="ext-bts-24",e["ext-gpt-v2-premium-users-gmail"]="ext-gpt-v2-premium-users-gmail",e["ext-premium-gpt-quota"]="ext-premium-gpt-quota",e["ext-tones-gmail-conversion"]="ext-tones-gmail-conversion",e.extBFCM2024="extBFCM2024",e.extension_reviews_campaign_q2_23="extension_reviews_campaign_q2_23",e.extension_test="extension_test",e["extension-follow-widget-mode"]="extension-follow-widget-mode",e["extension-follow-widget-with-quick-mode"]="extension-follow-widget-with-quick-mode",e["pphr-usage-chrome-ext"]="pphr-usage-chrome-ext",e.qb_ai_cursor_ai_chat_plugin_search_v1="qb_ai_cursor_ai_chat_plugin_search_v1",e.qb_ai_cursor_context_aware_text_generation_v1="qb_ai_cursor_context_aware_text_generation_v1",e.qb_lt_ai_cursor_feature_parity="qb_lt_ai_cursor_feature_parity",e.track_ws_events="track_ws_events",e}({})),p=(Object.freeze({CHROME_STORAGE_KEY:"detectedLanguagesData",DETECTED_LANGUAGES_FROM_BROWSER:"detectedLanguagesFromBrowser",DETECTED_LANGUAGES_FROM_CHROME_I18:"detectedLanguagesFromChromei18",DETECTED_LANGUAGES_FROM_COUNTRY:"detectedLanguagesFromCountry",DETECTED_LANGUAGES_FROM_WEBSITE:"detectedLanguagesFromWebsite",USER_PREFERRED_LANGUAGES:"userPreferredLanguages"}),Object.freeze({CONCURRENT_SESSION:"CONCURRENT_SESSION",COOKIE_NOT_FOUND:"COOKIE_NOT_FOUND",EXTERNAL_MESSAGE:"EXTERNAL_MESSAGE",EXTERNAL_MESSAGE_UID_MISMATCH:"EXTERNAL_MESSAGE_UID_MISMATCH",USER_MISMATCH:"USER_MISMATCH"}),Object.freeze({language:"default",product:"default"}),Object.freeze({collectUserTextualData:"collectUserTextualData",eventTime:"eventTime",isNewUser:"isNewUser",key:"data-opt-in",timeout:3e3,userShownConsentPrompt:"userShownConsentPrompt"}),Object.freeze({campaignID:"extension_campaign_gc_survey_2023_mar",eventTime:"eventTime",hostOriginUsed:"hostOriginUsed",key:"gc-survey",timeout:3e3,userShownSurveyModal:"userShownSurveyModal"}),Object.freeze({charLimit:250,charLimitWithThreshold:1e3}),Object.freeze({completePageClass:".kix-page",docClass:".kix-paginateddocumentplugin",editorClass:".kix-appview-editor",hostname:"docs.google.com",pageClass:".kix-page-column",pageEle:"docs-page kix-page-paginated kix-page-paginated-box-shadow docs-page-portrait",pageID:"data-quillbot-pageId",pageIDAttribute:"data-quillbot-pageid",paragraphClass:".kix-paragraphrenderer",paraID:"data-quillbot-paraid",selectionAttribute:".kix-selection-overlay",sidebarMenuBtnClass:"app-switcher-button"})),_=Object.freeze({hostname:"mail.google.com"});Object.freeze({editorID:"editorID",eventTime:"eventTime",isActive:"isActive",key:h["pphr-usage-chrome-ext"],lastActionTimeStamp:Date.now(),lastEditorDetected:"lastEditorDetected",shownPromptOn:"shownPromptOn",userActionCount:"userActionCount",variants:{completes_5th_sentence:{allowedHostnames:[p.hostname,_.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"completes_5th_sentence"},extension_rendered_on_doc:{allowedHostnames:[p.hostname],checkPromptOn:[3,8,12],enableDayCheck:!1,key:"extension_rendered_on_doc"},hovers_over_paraphraser_button:{allowedHostnames:[p.hostname,_.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"hovers_over_paraphraser_button"},pastes_text:{allowedHostnames:[p.hostname,_.hostname],checkPromptOn:[0,5,10],enableDayCheck:!0,key:"pastes_text"},selects_text:{allowedHostnames:[p.hostname,_.hostname],checkPromptOn:[1,5,10],enableDayCheck:!1,key:"selects_text"},shares_doc:{allowedHostnames:[p.hostname],checkPromptOn:[3,8,12],enableDayCheck:!1,key:"shares_doc"}}}),Object.freeze({captcha:"quillbot-recaptcha",card:"quillbot-card",followWidget:"quillbot-extension-follow-widget",genai_toolbar:"quillbot-extension-generative-toolbar-btn",genAIButton:"quillbot-extension-generative-btn",genAIDraftView:"quillbot-extension-generative-draft-view",genAIQuickActions:"quillbot-extension-generative-quick-actions",genAIToolbarButton:"quillbot-extension-generative-toolbar-btn",highlights:"quillbot-extension-highlights",loader:"quillbot-loader",portal:"quillbot-extension-portal",privacy:"quillbot-privacy",reloader:"quillbot-extension-reloader",root:"quillbot-extension-root",sidebar:"quillbot-gdocs-sidebar",support:"quillbot-support",widget:"quillbot-extension"}),(0,r.A)((0,r.A)((0,r.A)({},i.HttpStatusCode.Forbidden,o.TUA),i.HttpStatusCode.ServiceUnavailable,o.TUA),i.HttpStatusCode.TooManyRequests,o.WmL),"https://".concat(l.ENV_URL,"/learn-more?product=").concat(l.EXTENSION_TYPE),"https://".concat(l.ENV_URL,"/terms"),"https://".concat(l.ENV_URL,"/privacy")},27580:(e,t,n)=>{"use strict";n.d(t,{TUA:()=>i,WmL:()=>a});var r,o=n(36111),i="chrome-active/system/cloudflare_bot_detected",a="chrome-active/system/too_many_requests",s="EXTENSION",u="GC",c="GENERATIVE_AI",l="PPHR";r={},(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)(r,"lapr/system/dictionary_add_failure",u),"lapr/system/dictionary_add_success",u),"lapr/user/clicked_dictionary_add",u),"chrome-active/system/clicked_verify_bot_prompt",s),"chrome-active/system/clicked_privacy_prompt",s),"lapr/user/clicked_suggestions_edit",u),"chrome-active/user/discarded_text",c),"chrome-active/user/drafted_email",c),"chrome-active/user/edited_prompt_header",c),"chrome-active/user/inserted_text",c),(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)(r,"chrome-active/user/modified_output",c),"chrome-active/user/regenrated_output",c),"chrome-active/user/regenrated_subject_line",c),"chrome-active/system/extension_rendered",s),"chrome-active/system/shown_verify_bot_prompt",s),"chrome-active/system/shown_onboarding_helper",s),"pphr/system/shown_premium_modal",s),"chrome-active/system/shown_privacy_prompt",s),"chrome-active/system/unsupported_editor",s),"lapr/system/grammar_toggle_failure",u),(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)(r,"lapr/system/suggestions_edit_fail",u),"lapr/system/grammar_toggle_success",u),"lapr/system/suggestions_edit_success",u),"chrome-active/user/campaign_auth_premium_activated",s),"chrome-active/user/changed_ext_setting",s),"grmr/user/clicked_correct_all_button",u),"grmr/user/clicked_correct_error",u),"lapr/user/clicked_correct_suggested_word",u),"grmr/user/clicked_ignore_error",u),"chrome-active/user/clicked_like_button",s),(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)(r,"chrome-active/user/clicked_popup",s),"chrome-active/user/closed_classic_quillbot",s),"chrome-active/user/dismissed_onboarding_helper",s),"chrome-active/user/installed_extension",s),"chrome-active/user/loginSuccess",s),"chrome-active/user/logoutSuccess",s),"pphr/user/navigated_to_paraphraser",l),"comn/user/navigated_to_quillbot",l),"chrome-active/user/opened_classic_quillbot",s),"grmr/user/opened_correction_card",u),(0,o.A)((0,o.A)(r,"pphr/user/selected_sentence_from_beams",l),"chrome-active/user/updated_extension",s)},28807:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(38085);function o(e){if(Array.isArray(e))return(0,r.A)(e)}},31600:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>d,OJ:()=>u});var r,o=n(82561),i=n(77001),a=n(36111);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){return e.CHROME_EXTENSION_ID="CHROME_EXTENSION_ID",e.SHOW_PARTIAL_RECO_UNDERLINE="SHOW_PARTIAL_RECO_UNDERLINE",e.EXTN_PREFIX="EVENT_PREFIX",e.COLORS_GRAMMAR="COLORS_GRAMMAR",e.CARD_LAYOUT="CARD_LAYOUT",e.COLORS_SPELLING="COLORS_SPELLING",e.COLORS_STYLE="COLORS_LONG_SENTENCE",e.SUPPORTED_LANGUAGES="SUPPORTED_LANGUAGES",e.INSTALLED_ATTRIBUTE="INSTALLED_ATTRIBUTE",e.SITE_INIT_ATTRIBUTE="SITE_INIT_ATTRIBUTE",e.INPUT_AREA_INIT_ATTRIBUTE="INPUT_AREA_INIT_ATTRIBUTE",e.TMP_ID_ATTRIBUTE="TMP_ID_ATTRIBUTE",e.AI_RULE_ID_REGEX="AI_RULE_ID_REGEX",e.COLORS_PARAPHRASE="COLORS_PARAPHRASE",e.COLORS_RECOMMENDATION="COLORS_RECOMMENDATION",e.COLORS_RECOMMENDATION_TEASE="COLORS_RECOMMENDATION_TEASE",e.VALID_START_SENTENCE_REGEX="VALID_START_SENTENCE_REGEX",e.VALID_END_SENTENCE_REGEX="VALID_END_SENTENCE_REGEX",e.MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED="MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED",e.MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS="MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS",e.MAX_TEXT_LENGTH_ALLOWED="MAX_TEXT_LENGTH_ALLOWED",e.SELECTED_UNDERLINE_THICKNESS="SELECTED_UNDERLINE_THICKNESS",e.BULLET_POINT_PARSING_PREFIX="BULLET_POINT_PARSING_PREFIX",e.TOOLBAR_SIZE="TOOLBAR_SIZE",e.FIX_ALL_CONFIG="FIX_ALL_CONFIG",e.IGNORE_EDITOR_WITH_ATTRIBUTES="IGNORE_EDITOR_WITH_ATTRIBUTES",e.SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA="SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA",e.MAIN_CONTENT_SCRIPT_FILENAME="MAIN_CONTENT_SCRIPT_FILENAME",e.SPECIAL_INTRODUCTORY_TEASER_ENABLED="SPECIAL_INTRODUCTORY_TEASER_ENABLED",e.TERMS_OF_SERVICE_MODAL_ENABLED="TERMS_OF_SERVICE_MODAL_ENABLED",e.LOLLIPOP_CONFIG="LOLLIPOP_CONFIG",e.NORMALIZE_SPACE="NORMALIZE_SPACE",e.USE_CSS_CUSTOM_HIGHLIGHTS="USE_CSS_CUSTOM_HIGHLIGHTS",e.STRIP_WRAPPING_QUOTES_FROM_SENTENCE="STRIP_WRAPPING_QUOTES_FROM_SENTENCE",e.GDOCS_MENU_BUTTONS="GDOCS_MENU_BUTTONS",e}({}),c=(r={},(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(r,"CHROME_EXTENSION_ID","oldceeleldhonbafppcapldpdifcinji"),"NORMALIZE_SPACE",!1),"SHOW_PARTIAL_RECO_UNDERLINE",!1),"EVENT_PREFIX","lt"),"COLORS_GRAMMAR",{UNDERLINE:"#f2b24c",SELECTED_UNDERLINE:"#f2b24c",BACKGROUND:"rgba(242,179,77,0.3)",EMPHASIZE:"rgba(241,179,76,0.1)"}),"COLORS_SPELLING",{UNDERLINE:"#EB5757",SELECTED_UNDERLINE:"#EB5757",BACKGROUND:"rgba(235,88,88,0.2)",EMPHASIZE:"rgba(239,88,88,0.1)"}),"COLORS_LONG_SENTENCE",{UNDERLINE:"#8F7FFF",SELECTED_UNDERLINE:"#8F7FFF",BACKGROUND:"rgba(142,128,255,0.2)",EMPHASIZE:"rgba(138,128,255,0.2)",TITLE:"#5C4CFF"}),"COLORS_PARAPHRASE",{UNDERLINE:"#8F7FFF",BACKGROUND:"rgba(142,128,255,0.2)",EMPHASIZE:"rgba(138,128,255,0.2)",TITLE:"#5C4CFF"}),"COLORS_RECOMMENDATION",{UNDERLINE:"#80B3E2",SELECTED_UNDERLINE:"#0067C5",BACKGROUND:"rgba(0, 103, 199, 0.16)",EMPHASIZE:"rgba(0, 103, 199, 0.16)"}),"COLORS_RECOMMENDATION_TEASE",{UNDERLINE:"#CF9F0280",SELECTED_UNDERLINE:"#CF9F02",BACKGROUND:"rgba(242,181,24,0.16)",EMPHASIZE:"rgba(242,181,24,0.16)"}),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(r,"SUPPORTED_LANGUAGES",["ar","ast-es","be-by","br-fr","ca-es","ca-es-valencia","crh-ua","da-dk","de-at","de-ch","de-de","el-gr","en-au","en-ca","en-gb","en-nz","en-us","en-za","eo","es","fa","ga-ie","fr","gl-es","it","ja-jp","km-kh","nl","no","pl-pl","pt-ao","pt-br","pt-mz","pt-pt","ro-ro","ru-ru","sk-sk","sl-si","sv","ta-in","tl-ph","uk-ua","zh-cn"]),"CARD_LAYOUT",{TARGET_BOX_HORIZONTAL_MARGIN:0,TARGET_BOX_VERTICAL_MARGIN:5,HEADER_HEIGHT:36,FOOTER_HEIGHT:36,KEYBOARD_HINT_HEIGHT:60,MIN_HEIGHT_PARAPHRASE:200,MIN_HEIGHT_TOOLBOX:230,MAX_HEIGHT_TOOLBOX:368}),"INSTALLED_ATTRIBUTE","data-lt-installed"),"SITE_INIT_ATTRIBUTE","data-lt-site"),"INPUT_AREA_INIT_ATTRIBUTE","data-lt-tweaks"),"TMP_ID_ATTRIBUTE","data-lt-tmp-id"),"AI_RULE_ID_REGEX",/^(QB|AI)_/),"VALID_START_SENTENCE_REGEX","[^\u2022]"),"VALID_END_SENTENCE_REGEX","."),"MULTI_SENTENCE_SELECTION_FOR_PARAPHRASE_ALLOWED",!1),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(r,"MAX_TEXT_LENGTH_ALLOWED_FOR_PAGELESS",15e3),"MAX_TEXT_LENGTH_ALLOWED",1e4),"SELECTED_UNDERLINE_THICKNESS",2),"BULLET_POINT_PARSING_PREFIX","\u2022 "),"TOOLBAR_SIZE",{width:20,height:20}),"FIX_ALL_CONFIG",{FIX_GC_ERRORS:!0,FIX_RECOMMENDATIONS:!1,FIX_STYLE_ERRORS:!1}),"IGNORE_EDITOR_WITH_ATTRIBUTES",["spellcheck"]),"SHOW_TOOLBAR_ON_EMPTY_INPUT_AREA",!1),"MAIN_CONTENT_SCRIPT_FILENAME","/content.js"),"SPECIAL_INTRODUCTORY_TEASER_ENABLED",!0),(0,a.A)((0,a.A)((0,a.A)((0,a.A)((0,a.A)(r,"TERMS_OF_SERVICE_MODAL_ENABLED",!1),"LOLLIPOP_CONFIG",{LOLLIPOP_THEME:"purple",LOLLIPOP_CSS_PATH:"/content/styles/lollipop.css",ONBOARDING_IMAGE_PATH:"/assets/images/toolbox/lollipop-onboarding-lt.webp",ONBOARDING_BORDER_RADIUS:"8px",LOLLIPOP_CIRCLE_IMAGE_PATH:"/assets/images/toolbox/lollipop-icon.svg",LOLLIPOP_CIRCLE_GDOCS_IMAGE_PATH:"/assets/images/toolbox/lollipop-icon-gdocs.svg",SUPPORTS_DARK_MODE:!0,ONBOARDING_LANDING_PAGE_URL:"https://languagetool.org/text-cursor",TOOLBOX_IFRAME_PATH:"/toolbox/toolbox.html",TOOLBOX_AVAILABLE_UI_LANGUAGES:["de","en","es","fr","nl","pt-br"],PPHR_SUPPORTS_MULTISENTENCE:!0,TOOLBOX_HOTKEY:void 0,TRACKING_SAMPLING_RATE:100,DEEP_LINK_INTO_TOOLBOX:!1}),"STRIP_WRAPPING_QUOTES_FROM_SENTENCE",!0),"USE_CSS_CUSTOM_HIGHLIGHTS",!1),"GDOCS_MENU_BUTTONS",!0)),l=function(){function e(){(0,o.A)(this,e),s(this,"extnConfig",void 0),this.extnConfig=c}return(0,i.A)(e,[{key:"get",value:function(e){return this.extnConfig[e]}},{key:"set",value:function(e,t){this.extnConfig[e]=t}},{key:"setAll",value:function(e){this.extnConfig=e}},{key:"getAll",value:function(){return this.extnConfig}}],[{key:"getInstance",value:function(){return this.instance||self._qb_lt_config||(this.instance=new e,self._qb_lt_config=this.instance),this.instance||self._qb_lt_config}}])}();s(l,"instance",void 0);var d=l.getInstance()},32009:(e,t,n)=>{"use strict";let r,o,i;n.d(t,{HttpStatusCode:()=>X});var a,s,u,c,l,d,f,h,p,_,E,g,m,v,b,y,A,T,S,R,O,I,N,C,w,P,k;function L(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(G=function(){return!!e})()}var F=function(e){var t,n;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function r(){var e,t,n;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return n=arguments,t=U(t=r),x(e=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,G()?Reflect.construct(t,n||[],U(this).constructor):t.apply(this,n)),"socket",null),x(e,"url",""),x(e,"onMessageCallback",function(){}),x(e,"onCloseHandler",function(){}),x(e,"onErrorHandler",function(){}),x(e,"isOpen",function(){var t;return(null==(t=e.socket)?void 0:t.readyState)===WebSocket.OPEN}),e}return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&M(r,e),t=[{key:"closeSocket",value:function(e){if(e)try{e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null,e.readyState!==WebSocket.CLOSED&&e.close()}catch(e){}}},{key:"setInitialConfig",value:function(e){var t=e.url,n=e.onMessageCallback;this.url=t,this.onMessageCallback=function(e){n(e)}}},{key:"setOnCloseHandler",value:function(e){this.onCloseHandler=e}},{key:"setOnErrorHandler",value:function(e){this.onErrorHandler=e}},{key:"connect",value:function(e){var t=this;return this.closeSocket(this.socket),this.socket=null,new Promise(function(n,r){try{var o=e.connectionSessionId,i=e.userToken,a=void 0===i?"":i,s=e.anonId,u=e.abIdV2,c=e.retry,l=e.platformType,d=t.url,f={connSessionId:void 0===o?void 0:o,anonId:s,abIdV2:u,platformType:l,retry:null==c?void 0:c.toString()},h=Object.keys(f).filter(function(e){return void 0!==f[e]&&""!==f[e]}).map(function(e){return"".concat(e,"=").concat(f[e])}).join("&");h&&(d+=(t.url.includes("?")?"&":"?")+h);var p=a?new WebSocket(d,["Bearer",a]):new WebSocket(d);p.onopen=function(){t.socket=p,n()},p.onmessage=function(e){return t.onMessageCallback(e)},p.onerror=function(e){t.onErrorHandler(e),r(e)},p.onclose=function(e){t.onCloseHandler(e)}}catch(e){r(e)}})}},{key:"send",value:function(e){var t;return(t=function(){var t;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){return this.socket&&this.socket.readyState===WebSocket.OPEN?[2,null==(t=this.socket)?void 0:t.send(JSON.stringify(e))]:[2]})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){L(i,r,o,a,s,"next",e)}function s(e){L(i,r,o,a,s,"throw",e)}a(void 0)})}).call(this)}},{key:"close",value:function(){this.closeSocket(this.socket),this.socket=null}}],n=[{key:"getInstance",value:function(){return r.instance||(r.instance=new r),r.instance}}],t&&D(r.prototype,t),n&&D(r,n),r}(function e(){var t;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");if(((null!=(t=e)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](this):this instanceof t)?this.constructor:void 0)===e)throw TypeError("Cannot construct ISocketClient instances directly")});x(F,"instance",void 0);var B=((a={}).UNAUTHORIZED="UNAUTHORIZED",a.INVALID_TOKEN="INVALID_TOKEN",a.TOKEN_EXPIRED="TOKEN_EXPIRED",a.FORCE_PASSWORD_CHANGE="FORCE_PASSWORD_CHANGE",a.TOKEN_REVOKED="TOKEN_REVOKED",a),H=((s={}).EDITOR_NOT_FOUND="EDITOR_NOT_FOUND",s.EDITOR_ALREADY_EXISTS="EDITOR_ALREADY_EXISTS",s.LANGUAGE_NOT_SUPPORTED="LANGUAGE_NOT_SUPPORTED",s),j=((u={}).IDLE_TIMEOUT="IDLE_TIMEOUT",u.WS_CONNECTION_REJECTED="WS_CONNECTION_REJECTED",u.WS_CONNECTION_EXHAUSTED="WS_CONNECTION_EXHAUSTED",u.SERVER_SHUTDOWN="SERVER_SHUTDOWN",u.RATE_LIMIT_EXCEEDED="RATE_LIMIT_EXCEEDED",u),W=((c={}).UNKNOWN="UNKNOWN",c.TIMEOUT="TIMEOUT",c.GENERIC="GENERIC",c.ANON_ID_NOT_PRESENT="ANON_ID_NOT_PRESENT",c.INVALID_OR_EXPIRED_SESSION="INVALID_OR_EXPIRED_SESSION",c.PING_FAILED="PING_FAILED",c.EMPTY_CONNECTION_ID="EMPTY_CONNECTION_ID",c.EXPIRED_WRITING_SESSION="EXPIRED_WRITING_SESSION",c),z=((l={}).PROCESSING_ERROR="PROCESSING_ERROR",l.TRANSPORT_NOT_INITIALIZED="TRANSPORT_NOT_INITIALIZED",l),X=((d={})[d.Continue=100]="Continue",d[d.SwitchingProtocols=101]="SwitchingProtocols",d[d.Processing=102]="Processing",d[d.EarlyHints=103]="EarlyHints",d[d.Ok=200]="Ok",d[d.Created=201]="Created",d[d.Accepted=202]="Accepted",d[d.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",d[d.NoContent=204]="NoContent",d[d.ResetContent=205]="ResetContent",d[d.PartialContent=206]="PartialContent",d[d.MultiStatus=207]="MultiStatus",d[d.AlreadyReported=208]="AlreadyReported",d[d.ImUsed=226]="ImUsed",d[d.MultipleChoices=300]="MultipleChoices",d[d.MovedPermanently=301]="MovedPermanently",d[d.Found=302]="Found",d[d.SeeOther=303]="SeeOther",d[d.NotModified=304]="NotModified",d[d.UseProxy=305]="UseProxy",d[d.Unused=306]="Unused",d[d.TemporaryRedirect=307]="TemporaryRedirect",d[d.PermanentRedirect=308]="PermanentRedirect",d[d.BadRequest=400]="BadRequest",d[d.Unauthorized=401]="Unauthorized",d[d.PaymentRequired=402]="PaymentRequired",d[d.Forbidden=403]="Forbidden",d[d.NotFound=404]="NotFound",d[d.MethodNotAllowed=405]="MethodNotAllowed",d[d.NotAcceptable=406]="NotAcceptable",d[d.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",d[d.RequestTimeout=408]="RequestTimeout",d[d.Conflict=409]="Conflict",d[d.Gone=410]="Gone",d[d.LengthRequired=411]="LengthRequired",d[d.PreconditionFailed=412]="PreconditionFailed",d[d.PayloadTooLarge=413]="PayloadTooLarge",d[d.UriTooLong=414]="UriTooLong",d[d.UnsupportedMediaType=415]="UnsupportedMediaType",d[d.RangeNotSatisfiable=416]="RangeNotSatisfiable",d[d.ExpectationFailed=417]="ExpectationFailed",d[d.ImATeapot=418]="ImATeapot",d[d.MisdirectedRequest=421]="MisdirectedRequest",d[d.UnprocessableEntity=422]="UnprocessableEntity",d[d.Locked=423]="Locked",d[d.FailedDependency=424]="FailedDependency",d[d.TooEarly=425]="TooEarly",d[d.UpgradeRequired=426]="UpgradeRequired",d[d.PreconditionRequired=428]="PreconditionRequired",d[d.TooManyRequests=429]="TooManyRequests",d[d.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",d[d.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",d[d.InternalServerError=500]="InternalServerError",d[d.NotImplemented=501]="NotImplemented",d[d.BadGateway=502]="BadGateway",d[d.ServiceUnavailable=503]="ServiceUnavailable",d[d.GatewayTimeout=504]="GatewayTimeout",d[d.HttpVersionNotSupported=505]="HttpVersionNotSupported",d[d.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",d[d.InsufficientStorage=507]="InsufficientStorage",d[d.LoopDetected=508]="LoopDetected",d[d.NotExtended=510]="NotExtended",d[d.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",d),V=((f={}).INIT_EDITOR="init_editor",f.INIT_EDITOR_V2="init_editor_v2",f.ON_CHANGE="on_change",f.ON_CONTENT_CHANGE="on_content_change",f.ON_CONTENT_CHANGE_V2="on_content_change_v2",f.ON_COMMAND="on_command",f.ACK="ack",f.UPDATE_CONNECTION="update_connection",f.TERMINATE_EDITOR_GROUP="terminate_editor_group",f.SET_ACTIVE_EDITOR_GROUP="set_active_editor_group",f.PONG="pong",f.INIT_WRITING_SESSION="init_writing_session",f.UPDATE_SURROUNDING_CONTEXT="update_surrounding_context",f.FORCE_SYNC_EDITOR="force_sync_editor",f),q=((h={}).AUTH_SUCCESS="auth_success",h.AUTH_FAILED="auth_failed",h.PROCESSING_SUCCESS="processing_success",h.PROCESSING_FAILED="processing_failed",h.ACK="ack",h.PING="ping",h.ACK_FAILED="ack_failed",h),K=((p={}).ACCEPT_CHANGES="ACCEPT_CHANGES",p.USER_CHANGE="USER_CHANGE",p.SYSTEM_CHANGE="SYSTEM_CHANGED",p),Y=((_={}).GC="GC",_.GC_WITH_RECOMMENDATION="GC_WITH_RECOMMENDATION",_.NONE="NONE",_.RECOMMENDATION="RECOMMENDATION",_.TRANSLATOR="TRANSLATOR",_.TRANSLATOR_TRANSLATE="TRANSLATOR_TRANSLATE",_),Z=((E={}).NOT_SENT="NOT_SENT",E.PENDING="PENDING",E.RESOLVED="RESOLVED",E),J=((g={}).GC="GC",g.GC_RECOMMENDATION="GC_RECOMMENDATION",g.PPHR="PPHR",(m={}).GRAMMAR_CHECKER="GRAMMAR_CHECKER",m.TRANSLATOR="TRANSLATOR",(v={}).AUTH_SUCCESS="auth_success",v.GC_SUCCESS="gc_success",v.PROCESSING_SUCCESS="processing_success",v.ACK="ack",v.PING="ping",v),$=((b={}).SENTENCE_SUGGESTION_GC_COMPLETED="sentence_suggestion_gc_completed",b.SENTENCE_SUGGESTION_GC="sentence_suggestion_gc",b.SENTENCE_SUGGESTIONS_RECOMMENDATION="sentence-suggestions-recommendation",(y={}).AUTH_FAILED="auth_failed",y.GC_FAILED="gc_failed",y.ACK_FAILED="ack_failed",y.PROCESSING_FAILED="processing_failed",y),Q=((A={}).CONTENT_SYNC_REQUIRED="content_sync_required",A.SURROUNDING_CONTEXT_SYNC_REQUIRED="surrounding_context_sync_required",A),ee=((T={}).EDGE_EXT="edge-active",T.CHROME_EXT="chrome-active",T.DESKTOP="desktop-active",T.MOBILE="android-app",T.WEBAPP="webapp",(S={}).RESOLVE="resolve",S.REJECT="reject",S),te=((R={}).SentenceSuggestionsGC="sentence-suggestions-gc",R.SentenceSplitter="sentence-splitter",R.Unknown="unknown",R.SentenceSuggestionsRecommendation="sentence-suggestions-recommendation",R.SentenceSuggestionsGCCompleted="sentence-suggestions-gc-completed",R.SkipProcessing="skip-processing",R.DetectLanguage="detect-language",R.Translator="translator",R.Complete="complete",R.RequestComplete="request-complete",R),ne=((O={}).SENTRY="SENTRY",O.LT_QB_GC_ADAPTER="LT_QB_GC_ADAPTER",(I={}).NOT_INITIALIZED="NOT_INITIALIZED",I.CONNECTING="CONNECTING",I.CONNECTED="CONNECTED",I.READY="READY",I.ERRORED="ERRORED",I.RETRY_EXHAUSTED="RETRY_EXHAUSTED",I.AUTH_SUCCESS="AUTH_SUCCESS",I),re=((N={}).GC_MODEL_STATS="gc_model_stats",N.GC_RECOM_RES="gc_recom_res",N.UPDATE_CONN_ID="update_conn_id",N.EDITOR_CONTENT_SAVE_ACK="editor_content_save_ack",N);function oe(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function ie(e){return"".concat(e,"-").concat(Math.random().toString(36).substring(2,11))}var ae="initialize",se=function(e){var t,n=e.requestEventId,r=e.pendingAcks,o=e.eventData,i=e.ackType,a=e.transport;return(t=function(){var e,t,s,u,c,l,d,f;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(h){switch(h.label){case 0:return[4,ke({transport:a,errorCode:null==o||null==(e=o.data)?void 0:e.errorCode,eventData:null==o?void 0:o.data})];case 1:return h.sent(),r.has(n)&&(s=(t=r.get(n)).resolve,u=t.reject,c=t.timeout,i===ee.REJECT?(d=null==o||null==(l=o.data)?void 0:l.errorCode,u((f=!Object.values(B).includes(d)&&!Object.values(H).includes(d))?{shouldRetry:f,errorData:o}:{errorData:o})):s(o),c&&clearTimeout(c),r.delete(n)),[2]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){oe(i,r,o,a,s,"next",e)}function s(e){oe(i,r,o,a,s,"throw",e)}a(void 0)})})()},ue=function(e){return null==e?void 0:e.shouldRetry},ce="http_error",le="transport_error",de="editor_sync_failed",fe="surrounding_context_sync_failed",he="fallback_usage",pe="editor_content_save_ack_skipped",_e="ws_connection_attempt",Ee="ws_connection_ready",ge="ws_connection_connected",me="ws_connection_failed",ve="ws_disconnected",be="message_sent_ws",ye="message_error",Ae="ws_disconnect_pending_messages",Te="transport_not_initialized",Se="transport-validate",Re="transport-ready",Oe={REINITIALIZE_WRITING_SESSION:"reinitialize_writing_session",CONTENT_SYNC_REQUIRED:"content_sync_required",SURROUNDING_CONTEXT_SYNC_REQUIRED:"surrounding_context_sync_required"};function Ie(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function Ne(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ie(i,r,o,a,s,"next",e)}function s(e){Ie(i,r,o,a,s,"throw",e)}a(void 0)})}}function Ce(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var we=null;function Pe(e){return Ne(function(e){var t,n,r,o,i,a;return Ce(this,function(s){switch(s.label){case 0:var u,c,l;return t=e.transport,n=e.error,ke({transport:t,errorCode:null==n||null==(r=n.data)?void 0:r.errorCode}),i=function(){if(t.pendingAcks.has(ae)){var e=t.pendingAcks.get(ae),r=e.reject,o=e.timeout;o&&clearTimeout(o),r(n),t.pendingAcks.delete(ae)}},"AUTHENTICATION"!==(null==n||null==(o=n.data)?void 0:o.errorNamespace)?[3,2]:[4,(u=t,c=null==n||null==(a=n.data)?void 0:a.errorCode,l=i,Ne(function(){var e,t;return Ce(this,function(n){switch(n.label){case 0:switch(u.setErroredState(c),c){case B.INVALID_TOKEN:return[3,1];case B.TOKEN_EXPIRED:return[3,2];case B.FORCE_PASSWORD_CHANGE:return[3,4];case B.TOKEN_REVOKED:return[3,5]}return[3,6];case 1:return l(),u.closeConnection(),[3,8];case 2:case 6:return[4,u.authHandlers.getIdToken(!0)];case 3:case 7:return n.sent(),u.establishSocketConnection({isReconnect:!0}),[3,8];case 4:return l(),null==u||null==(e=u.authHandlers)||e.logout("EXTERNAL_MESSAGE"),[3,8];case 5:return l(),null==u||null==(t=u.authHandlers)||t.logout("EXTERNAL_MESSAGE"),[3,8];case 8:return[2]}})})())];case 1:return s.sent(),[2];case 2:return Object.values(B).includes(n.reason)||Object.values(j).includes(n.reason)?(i(),[2]):(t.establishSocketConnection({isReconnect:!0}),[2])}})}).apply(this,arguments)}function ke(e){return Ne(function(e){var t,n,r;return Ce(this,function(o){return t=e.transport,n=e.errorCode,r=e.eventData,n===W.INVALID_OR_EXPIRED_SESSION&&t.resetConnectionSession(n),n===W.EXPIRED_WRITING_SESSION?we?[2,we]:[2,we=new Promise(function(e,n){var o=setTimeout(function(){we=null,n(Error("Writing session reinitialize timeout after 30 seconds"))},t.recoveryConfig.observableTimeout);t.notifyClient({eventName:Oe.REINITIALIZE_WRITING_SESSION,data:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({resolve:function(){clearTimeout(o),we=null,e()},reject:function(e){clearTimeout(o),we=null,n(e)}},r)})})]:[2]})}).apply(this,arguments)}function Le(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=((C={}).INIT="INIT",C.GENERIC="GENERIC",C),Me=function(){var e,t;function n(){var e;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");xe(this,"_queues",(xe(e={},"INIT",{queue:[],isProcessing:!1}),xe(e,"GENERIC",{queue:[],isProcessing:!1}),e))}return e=[{key:"enqueue",value:function(e,t,n,r,o){var i=this._queues[e].queue,a=setTimeout(function(){var e=i.findIndex(function(e){return e.message.eventId===t.eventId});-1!==e&&(i.splice(e,1)[0],null==o||o.timeoutHandler())},r),s={message:t,waitForAck:n,timeoutId:a,resolve:null==o?void 0:o.resolve,reject:null==o?void 0:o.reject};i.push(s)}},{key:"processQueue",value:function(e,t){var n;return(n=function(){var n,r,o,i;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(a){switch(a.label){case 0:if(!(n=this._queues[e])||n.isProcessing||0===n.queue.length)return[2];n.isProcessing=!0,a.label=1;case 1:if(!(n.queue.length>0))return[3,6];if(!(r=n.queue.shift()))return[3,5];clearTimeout(r.timeoutId),a.label=2;case 2:var s,u;return a.trys.push([2,4,,5]),[4,t((s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){xe(e,t,n[t])})}return e}({},r.message),u=u={eventTimeStamp:Date.now()},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(u)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(u,e))}),s),r.waitForAck)];case 3:return o=a.sent(),r.resolve&&r.resolve(o),[3,5];case 4:return i=a.sent(),r.reject&&r.reject(i),[3,5];case 5:return[3,1];case 6:return n.isProcessing=!1,[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){Le(i,r,o,a,s,"next",e)}function s(e){Le(i,r,o,a,s,"throw",e)}a(void 0)})}).call(this)}}],t=[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}],e&&De(n.prototype,e),t&&De(n,t),n}();xe(Me,"_instance",void 0);var Ge=function(e,t){return(Ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Fe(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ge(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Be(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function He(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function je(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function We(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function ze(e){return this instanceof ze?(this.v=e,this):new ze(e)}function Xe(e){return"function"==typeof e}function Ve(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}"function"==typeof SuppressedError&&SuppressedError;var qe=Ve(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function Ke(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ye=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,n,r,o,i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=He(i),s=a.next();!s.done;s=a.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else i.remove(this);var u=this.initialTeardown;if(Xe(u))try{u()}catch(e){o=e instanceof qe?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var l=He(c),d=l.next();!d.done;d=l.next()){var f=d.value;try{$e(f)}catch(e){o=null!=o?o:[],e instanceof qe?o=We(We([],je(o)),je(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(o)throw new qe(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)$e(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(n=this._finalizers)?n:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Ke(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Ke(n,e),e instanceof t&&e._removeParent(this)},(e=new t).closed=!0,t.EMPTY=e,t}(),Ze=Ye.EMPTY;function Je(e){return e instanceof Ye||e&&"closed"in e&&Xe(e.remove)&&Xe(e.add)&&Xe(e.unsubscribe)}function $e(e){Xe(e)?e():e.unsubscribe()}var Qe=void 0,et=!1;function tt(e){!function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];setTimeout.apply(void 0,We([e,t],je(n)))}(function(){throw e})}function nt(){}var rt=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,Je(t)&&t.add(n)):n.destination=ut,n}return Fe(t,e),t.create=function(e,t,n){return new st(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Ye),ot=Function.prototype.bind;function it(e,t){return ot.call(e,t)}var at=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){tt(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){tt(e)}else tt(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){tt(e)}},e}(),st=function(e){function t(t,n,r){var o,i,a=e.call(this)||this;return Xe(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&et?((i=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},o={next:t.next&&it(t.next,i),error:t.error&&it(t.error,i),complete:t.complete&&it(t.complete,i)}):o=t,a.destination=new at(o),a}return Fe(t,e),t}(rt),ut={closed:!0,next:nt,error:function(e){throw e},complete:nt},ct="function"==typeof Symbol&&Symbol.observable||"@@observable",lt=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=function(e){return e&&e instanceof rt||e&&Xe(e.next)&&Xe(e.error)&&Xe(e.complete)&&Je(e)}(e)?e:new st(e,t,n),o=this.operator,i=this.source;return r.add(o?o.call(r,i):i?this._subscribe(r):this._trySubscribe(r)),r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=dt(t))(function(t,r){var o=new st({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)})},e.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},e.prototype[ct]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?function(e){return e}:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=dt(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function dt(e){var t;return null!=(t=null!=e?e:Qe)?t:Promise}function ft(e){return Xe(null==e?void 0:e.lift)}function ht(e){return function(t){if(ft(t))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function pt(e,t,n,r,o){return new _t(e,t,n,r,o)}var _t=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return Fe(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null==(t=this.onFinalize)||t.call(this)}},t}(rt);function Et(e,t){var n=lt.call(this)||this;return n.source=e,n.subjectFactory=t,n._subject=null,n._refCount=0,n._connection=null,ft(e)&&(n.lift=e.lift),n}Fe(Et,lt),Et.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},Et.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},Et.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},Et.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new Ye;var n=this.getSubject();t.add(this.source.subscribe(pt(n,void 0,function(){e._teardown(),n.complete()},function(t){e._teardown(),n.error(t)},function(){return e._teardown()}))),t.closed&&(this._connection=null,t=Ye.EMPTY)}return t},Et.prototype.refCount=function(){return ht(function(e,t){var n=null;e._refCount++;var r=pt(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount)n=null;else{var r=e._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()}});e.subscribe(r),r.closed||(n=e.connect())})(this)};var gt={now:function(){return(gt.delegate||performance).now()},delegate:void 0},mt={schedule:function(e){var t=cancelAnimationFrame,n=requestAnimationFrame(function(n){t=void 0,e(n)});return new Ye(function(){return null==t?void 0:t(n)})},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=mt.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,We([],je(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return cancelAnimationFrame.apply(void 0,We([],je(e)))},delegate:void 0};new lt(function(e){var t=gt.now(),n=0,r=function(){e.closed||(n=mt.requestAnimationFrame(function(o){n=0;var i=gt.now();e.next({timestamp:o,elapsed:i-t}),r()}))};return r(),function(){n&&mt.cancelAnimationFrame(n)}});var vt=Ve(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),bt=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Fe(t,e),t.prototype.lift=function(e){var t=new yt(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new vt},t.prototype.next=function(e){var t,n;if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));try{for(var r=He(this.currentObservers),o=r.next();!o.done;o=r.next())o.value.next(e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},t.prototype.error=function(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;for(var t=this.observers;t.length;)t.shift().error(e)}},t.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var e=this.observers;e.length;)e.shift().complete()}},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,o=this.observers;return n||r?Ze:(this.currentObservers=null,o.push(e),new Ye(function(){t.currentObservers=null,Ke(o,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new lt;return e.source=this,e},t.create=function(e,t){return new yt(e,t)},t}(lt),yt=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return Fe(t,e),t.prototype.next=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.next)||n.call(t,e)},t.prototype.error=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.error)||n.call(t,e)},t.prototype.complete=function(){var e,t;null==(t=null==(e=this.destination)?void 0:e.complete)||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!=(n=null==(t=this.source)?void 0:t.subscribe(e))?n:Ze},t}(bt);function At(e){var t=bt.call(this)||this;return t._value=e,t}Fe(At,bt),Object.defineProperty(At.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),At.prototype._subscribe=function(e){var t=bt.prototype._subscribe.call(this,e);return t.closed||e.next(this._value),t},At.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},At.prototype.next=function(e){bt.prototype.next.call(this,this._value=e)};var Tt={now:function(){return(Tt.delegate||Date).now()},delegate:void 0};function St(e,t,n){void 0===e&&(e=1/0),void 0===t&&(t=1/0),void 0===n&&(n=Tt);var r=bt.call(this)||this;return r._bufferSize=e,r._windowTime=t,r._timestampProvider=n,r._buffer=[],r._infiniteTimeWindow=!0,r._infiniteTimeWindow=t===1/0,r._bufferSize=Math.max(1,e),r._windowTime=Math.max(1,t),r}function Rt(){var e=null!==bt&&bt.apply(this,arguments)||this;return e._value=null,e._hasValue=!1,e._isComplete=!1,e}Fe(St,bt),St.prototype.next=function(e){var t=this.isStopped,n=this._buffer,r=this._infiniteTimeWindow,o=this._timestampProvider,i=this._windowTime;!t&&(n.push(e),r||n.push(o.now()+i)),this._trimBuffer(),bt.prototype.next.call(this,e)},St.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),o=0;o<r.length&&!e.closed;o+=n?1:2)e.next(r[o]);return this._checkFinalizedStatuses(e),t},St.prototype._trimBuffer=function(){var e=this._bufferSize,t=this._timestampProvider,n=this._buffer,r=this._infiniteTimeWindow,o=(r?1:2)*e;if(e<1/0&&o<n.length&&n.splice(0,n.length-o),!r){for(var i=t.now(),a=0,s=1;s<n.length&&n[s]<=i;s+=2)a=s;a&&n.splice(0,a+1)}},Fe(Rt,bt),Rt.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this._hasValue,r=this._value,o=this.thrownError,i=this.isStopped,a=this._isComplete;t?e.error(o):(i||a)&&(n&&e.next(r),e.complete())},Rt.prototype.next=function(e){this.isStopped||(this._value=e,this._hasValue=!0)},Rt.prototype.complete=function(){var e=this._hasValue,t=this._value;this._isComplete||(this._isComplete=!0,e&&bt.prototype.next.call(this,t),bt.prototype.complete.call(this))};var Ot=function(e){function t(t,n){return e.call(this)||this}return Fe(t,e),t.prototype.schedule=function(e,t){return this},t}(Ye),It=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,We([e,t],je(n)))},Nt=function(e){return clearInterval(e)},Ct=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Fe(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!=(n=this.id)?n:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),It(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&Nt(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ke(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Ot),wt=1,Pt={};function kt(e){return e in Pt&&(delete Pt[e],!0)}var Lt=function(e){var t=wt++;return Pt[t]=!0,P||(P=Promise.resolve()),P.then(function(){return kt(t)&&e()}),t},Dt={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Dt.delegate;return((null==n?void 0:n.setImmediate)||Lt).apply(void 0,We([],je(e)))},clearImmediate:function(e){return function(e){kt(e)}(e)},delegate:void 0},xt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Fe(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=Dt.setImmediate(t.flush.bind(t,void 0))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o,i=t.actions;null!=n&&(null==(o=i[i.length-1])?void 0:o.id)!==n&&(Dt.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},t}(Ct),Ut=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Tt.now,e}(),Mt=function(e){function t(t,n){void 0===n&&(n=Ut.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return Fe(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active)n.push(e);else{this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}}},t}(Ut);new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe(t,e),t.prototype.flush=function(e){this._active=!0;var t,n=this._scheduled;this._scheduled=void 0;var r=this.actions;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===n&&r.shift());if(this._active=!1,t){for(;(e=r[0])&&e.id===n&&r.shift();)e.unsubscribe();throw t}},t}(Mt))(xt);var Gt=new Mt(Ct),Ft=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Fe(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.flush(this),0)},t}(Ct);new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe(t,e),t}(Mt))(Ft);var Bt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return Fe(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t._scheduled||(t._scheduled=mt.requestAnimationFrame(function(){return t.flush(void 0)})))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!=r?r>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);var o,i=t.actions;null!=n&&n===t._scheduled&&(null==(o=i[i.length-1])?void 0:o.id)!==n&&(mt.cancelAnimationFrame(n),t._scheduled=void 0)},t}(Ct);function Ht(e,t){void 0===e&&(e=jt),void 0===t&&(t=1/0);var n=Mt.call(this,e,function(){return n.frame})||this;return n.maxFrames=t,n.frame=0,n.index=-1,n}new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe(t,e),t.prototype.flush=function(e){this._active=!0,e?t=e.id:(t=this._scheduled,this._scheduled=void 0);var t,n,r=this.actions;e=e||r.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,n){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw n}},t}(Mt))(Bt),Fe(Ht,Mt),Ht.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},Ht.frameTimeFactor=10;var jt=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.index=r,o.active=!0,o.index=t.index=r,o}return Fe(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!Number.isFinite(r))return Ye.EMPTY;if(!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var o=new t(this.scheduler,this.work);return this.add(o),o.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var o=e.actions;return o.push(this),o.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(Ct);new lt(function(e){return e.complete()});var Wt="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function zt(e){if(e instanceof lt)return e;if(null!=e){var t,n,r,o;if(Xe(e[ct]))return t=e,new lt(function(e){var n=t[ct]();if(Xe(n.subscribe))return n.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")});if(e&&"number"==typeof e.length&&"function"!=typeof e)return n=e,new lt(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()});if(Xe(null==e?void 0:e.then))return r=e,new lt(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,tt)});if(Symbol.asyncIterator&&Xe(null==e?void 0:e[Symbol.asyncIterator]))return Xt(e);if(Xe(null==e?void 0:e[Wt]))return o=e,new lt(function(e){var t,n;try{for(var r=He(o),i=r.next();!i.done;i=r.next()){var a=i.value;if(e.next(a),e.closed)return}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.complete()});if(Xe(null==e?void 0:e.getReader))return Xt(function(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})},t&&(r[e]=t(r[e])))}function s(e,t){try{var n;(n=o[e](t)).value instanceof ze?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(e){l(i[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}(this,arguments,function(){var t,n,r;return Be(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,ze(t.read())];case 3:return r=(n=o.sent()).value,n.done?[4,ze(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,ze(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}(e))}throw TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Xt(e){return new lt(function(t){(function(e,t){var n,r,o,i,a,s,u;return a=this,u=function(){var a;return Be(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=He(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){var i,a,s;i=r,a=o,s=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){i({value:e,done:s})},a)})}}}(e),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return o={error:s.sent()},[3,11];case 6:return s.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new((s=void 0)||(s=Promise))(function(e,t){function n(e){try{o(u.next(e))}catch(e){t(e)}}function r(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):((o=t.value)instanceof s?o:new s(function(e){e(o)})).then(n,r)}o((u=u.apply(a,[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function Vt(e,t){return ht(function(n,r){var o=0;n.subscribe(pt(r,function(n){r.next(e.call(t,n,o++))}))})}(w=k||(k={})).NEXT="N",w.ERROR="E",w.COMPLETE="C",Ve(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}}),Ve(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),Ve(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}}),Ve(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}}),Ve(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}),new lt(nt);var qt=Array.isArray;function Kt(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new bt}:t,r=e.resetOnError,o=void 0===r||r,i=e.resetOnComplete,a=void 0===i||i,s=e.resetOnRefCountZero,u=void 0===s||s;return function(e){var t,r,i,s=0,c=!1,l=!1,d=function(){null==r||r.unsubscribe(),r=void 0},f=function(){d(),t=i=void 0,c=l=!1},h=function(){var e=t;f(),null==e||e.unsubscribe()};return ht(function(e,p){s++,l||c||d();var _=i=null!=i?i:n();p.add(function(){0!=--s||l||c||(r=Yt(h,u))}),_.subscribe(p),!t&&s>0&&(t=new st({next:function(e){return _.next(e)},error:function(e){l=!0,d(),r=Yt(f,o,e),_.error(e)},complete:function(){c=!0,d(),r=Yt(f,a),_.complete()}}),zt(e).subscribe(t))})(e)}}function Yt(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var o=new st({next:function(){o.unsubscribe(),e()}});return zt(t.apply(void 0,We([],je(n)))).subscribe(o)}}else e()}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jt=function(){var e;function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");Zt(this,"observableTimeout",void 0),Zt(this,"subject",void 0),this.observableTimeout=e,this.subject=new bt}return e=[{key:"handleResponse",value:function(e){this.subject.next(e)}},{key:"eventResponseStream",value:function(e,t,n){var r,o,i,a,s;return function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return 1===(n=1===(t=n).length&&qt(t[0])?t[0]:t).length?zt(n[0]):new lt((e=n,function(t){for(var n=[],r=function(r){n.push(zt(e[r]).subscribe(pt(t,function(e){if(n){for(var o=0;o<n.length;o++)o!==r&&n[o].unsubscribe();n=null}t.next(e)})))},o=0;n&&!t.closed&&o<e.length;o++)r(o)}))}([this.subject.pipe((r=function(t){return[q.PROCESSING_SUCCESS,q.PROCESSING_FAILED].includes(t.event)&&t.requestEventId===e},ht(function(e,t){var n=0;e.subscribe(pt(t,function(e){return r.call(void 0,e,n++)&&t.next(e)}))})),Vt(function(e){if(n||!e.isError)return e.data;throw Error("Error in response")}),(o=function(e){return e.type!==te.RequestComplete},void 0===i&&(i=!1),ht(function(e,t){e.subscribe(pt(t,function(e){var n=o(e,0);(n||i)&&t.next(e),n||t.complete()}))}))),(void 0===(a=this.observableTimeout)&&(a=0),void 0===s&&(s=Gt),new lt(function(e){var t,n=(t=a)instanceof Date&&!isNaN(t)?a-s.now():a;n<0&&(n=0);var r=0;return s.schedule(function(){e.closed||(e.next(r++),e.complete())},n)})).pipe(function e(t,n,r){return void 0===r&&(r=1/0),Xe(n)?e(function(e,r){return Vt(function(t,o){return n(e,t,r,o)})(zt(t(e,r)))},r):("number"==typeof n&&(r=n),ht(function(e,n){var o,i,a,s,u,c,l,d;return o=r,i=[],a=0,s=0,u=!1,c=function(){!u||i.length||a||n.complete()},l=function(e){return a<o?d(e):i.push(e)},d=function(e){a++;var r=!1;zt(t(e,s++)).subscribe(pt(n,function(e){n.next(e)},function(){r=!0},void 0,function(){if(r)try{for(a--;i.length&&a<o;)!function(){var e=i.shift();d(e)}();c()}catch(e){n.error(e)}}))},e.subscribe(pt(n,l,function(){u=!0,c()})),function(){}}))}(function(){var e,t;return t=Xe(e=function(){return Error("Timeout")})?e:function(){return e},new lt(function(e){return e.error(t())})}))])}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();let $t=new WeakMap,Qt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Qt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||en.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return on(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function on(e){if(e instanceof IDBRequest){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(on(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&$t.set(t,e)}).catch(()=>{}),nn.set(t,e),t}if(tn.has(e))return tn.get(e);let t=function(e){return"function"==typeof e?e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(an(this),t),on($t.get(this))}:function(...t){return on(e.apply(an(this),t))}:function(t,...n){let r=e.call(an(this),t,...n);return en.set(r,t.sort?t.sort():[t]),on(r)}:(e instanceof IDBTransaction&&function(e){if(Qt.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});Qt.set(e,t)}(e),((e,t)=>t.some(t=>e instanceof t))(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,rn):e)}(e);return t!==e&&(tn.set(e,t),nn.set(t,e)),t}let an=e=>nn.get(e),sn=["get","getKey","getAll","getAllKeys","count"],un=["put","add","delete","clear"],cn=new Map;function ln(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(cn.get(t))return cn.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,o=un.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!sn.includes(n))return;let i=async function(e,...t){let i=this.transaction(e,o?"readwrite":"readonly"),a=i.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),o&&i.done]))[0]};return cn.set(t,i),i}function dn(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function fn(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){dn(i,r,o,a,s,"next",e)}function s(e){dn(i,r,o,a,s,"throw",e)}a(void 0)})}}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}rn={...i=rn,get:(e,t,n)=>ln(e,t)||i.get(e,t,n),has:(e,t)=>!!ln(e,t)||i.has(e,t)};var _n=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");hn(this,"dbPromise",void 0),hn(this,"isAvailable","undefined"!=typeof indexedDB),this.isAvailable?this.dbPromise=function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){let a=indexedDB.open(e,1),s=on(a);return r&&a.addEventListener("upgradeneeded",e=>{r(on(a.result),e.oldVersion,e.newVersion,on(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),s.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",()=>o())}).catch(()=>{}),s}("keyval-store",0,{upgrade:function(e){e.createObjectStore("keyval")}}):this.dbPromise=Promise.resolve(null)}return e=[{key:"get",value:function(e){return fn(function(){var t;return pn(this,function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[2,null==(t=n.sent())?void 0:t.get("keyval",e)]}})}).call(this)}},{key:"set",value:function(e,t){return fn(function(){var n;return pn(this,function(r){switch(r.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(n=r.sent())?void 0:n.put("keyval",t,e)];case 2:return r.sent(),[2]}})}).call(this)}},{key:"delete",value:function(e){return fn(function(){var t;return pn(this,function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(t=n.sent())?void 0:t.delete("keyval",e)];case 2:return n.sent(),[2]}})}).call(this)}},{key:"clear",value:function(){return fn(function(){var e;return pn(this,function(t){switch(t.label){case 0:return[4,this.dbPromise];case 1:return[4,null==(e=t.sent())?void 0:e.clear("keyval")];case 2:return t.sent(),[2]}})}).call(this)}},{key:"deleteOldData",value:function(){return fn(function(){var e,t,n,r,o,i,a,s;return pn(this,function(u){switch(u.label){case 0:return u.trys.push([0,7,,8]),t=+(new Date).setDate((new Date).getDate()-10),[4,this.dbPromise];case 1:return o=null==(r=null==(n=null==(e=u.sent())?void 0:e.transaction("cache"))?void 0:n.store)?void 0:r.index("date"),i=IDBKeyRange.upperBound(t),[4,null==o?void 0:o.openKeyCursor(i)];case 2:a=u.sent(),u.label=3;case 3:return a?[4,this.dbPromise]:[3,6];case 4:return null==(s=u.sent())||s.delete("cache",a.primaryKey),[4,a.continue()];case 5:return a=u.sent(),[3,3];case 6:return[3,8];case 7:return u.sent(),[3,8];case 8:return[2]}})}).call(this)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function En(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function gn(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){En(i,r,o,a,s,"next",e)}function s(e){En(i,r,o,a,s,"throw",e)}a(void 0)})}}function mn(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var vn=new Map,bn=function(){var e;function t(){var e;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");(e="isAvailable")in this?Object.defineProperty(this,e,{value:!0,enumerable:!0,configurable:!0,writable:!0}):this[e]=!0}return e=[{key:"get",value:function(e){return gn(function(){return mn(this,function(t){return[2,vn.get(e)]})})()}},{key:"set",value:function(e,t){return gn(function(){return mn(this,function(n){switch(n.label){case 0:return[4,vn.set(e,t)];case 1:return n.sent(),[2]}})})()}},{key:"delete",value:function(e){return gn(function(){return mn(this,function(t){switch(t.label){case 0:return[4,vn.delete(e)];case 1:return t.sent(),[2]}})})()}},{key:"clear",value:function(){return gn(function(){return mn(this,function(e){switch(e.label){case 0:return[4,vn.clear()];case 1:return e.sent(),[2]}})})()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),yn=function(e,t,n){if("number"!=typeof n||n<=0)throw Error("timedPromise: Encountered invalid timeout value. Got ".concat(n));return new Promise(function(r,o){var i=setTimeout(function(){r({timedOut:!0,value:t})},n);e.then(function(e){clearTimeout(i),r({timedOut:!1,value:e})}).catch(function(e){clearTimeout(i),o(e)})})};function An(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function Tn(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){An(i,r,o,a,s,"next",e)}function s(e){An(i,r,o,a,s,"throw",e)}a(void 0)})}}function Sn(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Rn=Tn(function(){var e,t;return Sn(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,yn((e=new _n).dbPromise,null,3e3)];case 1:return t=n.sent(),e.isAvailable&&t.value?(e.deleteOldData(),[2,e]):[3,3];case 2:return n.sent(),[3,3];case 3:return[2,new bn]}})})(),On={get:function(e){return Tn(function(){var t,n,r,o;return Sn(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,Rn.then(function(t){return t.get(e)})];case 1:return(t=i.sent())?(r=(n=JSON.parse(t)).value,(o=n.expireAt)?(new Date).getTime()>new Date(o).getTime()?[4,Rn.then(function(t){return t.delete(e)})]:[3,3]:[2,r]):[2,void 0];case 2:case 4:return i.sent(),[2,void 0];case 3:return[2,r];case 5:return[2]}})})()},set:function(e,t,n){return Tn(function(){var r;return Sn(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),r=n?new Date((new Date).getTime()+n).toISOString():void 0,[4,Rn.then(function(n){return n.set(e,JSON.stringify({expireAt:r,value:t}))})];case 1:return o.sent(),[3,3];case 2:return o.sent(),[2,void 0];case 3:return[2,void 0]}})})()},delete:function(e){return Tn(function(){return Sn(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Rn.then(function(t){return t.delete(e)})];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2,void 0];case 3:return[2,void 0]}})})()}};function In(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}var Nn=function(e){var t;return(t=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,On.get(e)];case 1:return[2,t.sent()||null];case 2:return t.sent(),[3,3];case 3:return[2]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){In(i,r,o,a,s,"next",e)}function s(e){In(i,r,o,a,s,"throw",e)}a(void 0)})})()};function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Cn(e,t,n[t])})}return e}function Pn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var kn=function(){var e;function t(e,n,r,o,i,a,s,u){var c,l=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");Cn(this,"onComplete",function(e,t,n){}),Cn(this,"paraKey",void 0),Cn(this,"timeout",void 0),Cn(this,"gcObservable",void 0),Cn(this,"recommendationObservable",void 0),Cn(this,"isCompleted",!1),Cn(this,"events",[]),Cn(this,"error",void 0),Cn(this,"timer",void 0),Cn(this,"isTimedOut",!1),Cn(this,"paraMeta",void 0),Cn(this,"processingType",void 0),Cn(this,"isSentenceReceived",!1),Cn(this,"isGCCompleted",!1),Cn(this,"sentenceReceivedTime",0),Cn(this,"sentencesCount",0),Cn(this,"receivedCount",0),this.paraMeta=i,this.paraKey=n,this.gcObservable=r,this.recommendationObservable=u,this.processingType=s,this.onComplete=function(t,n,r){l.isCompleted=!0,clearTimeout(l.timer),e(l.paraKey,l.events,r)},this.timeout=o,(null==a?void 0:a.aborted)&&(this.error=Error("Aborted"),this.gcObservable.error({data:{signal:a,errorCode:"AbortError",paraMeta:i,paraKey:n}}),null==(c=this.recommendationObservable)||c.error({data:{signal:a,errorCode:"AbortError",paraMeta:i,paraKey:n}}),this.onComplete(this.paraKey,this.events,Error("Aborted"))),null==a||a.addEventListener("abort",function(){var e;l.isCompleted||(l.error=Error("Aborted"),l.gcObservable.error({data:{signal:a,errorCode:"AbortError",paraMeta:i,paraKey:n}}),null==(e=l.recommendationObservable)||e.error({data:{signal:a,errorCode:"AbortError",paraMeta:i,paraKey:n}}),l.onComplete(l.paraKey,l.events,Error("Aborted")))}),this.timer=setTimeout(function(){if(!l.isCompleted){if(l.isTimedOut=!0,l.isSentenceReceived){for(var e,t=l.gcObservable.isObsCompleted(),n=l.sentencesCount-l.receivedCount,r=t?l.recommendationObservable:l.gcObservable,o=t?l.getRecommendationFallbackResponse():l.getGCFallbackResponse(),i=0;i<n;i++)l.events.push(o),null==r||r.next(o);null==r||r.complete(),t||null==(e=l.recommendationObservable)||e.complete()}else l.fallback();l.onComplete(l.paraKey,l.events,Error("Timeout"))}},this.timeout)}return e=[{key:"getSentenceSplitterFallbackResponse",value:function(){var e,t,n,r,o;return{type:te.SentenceSplitter,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(n=this.paraMeta)?void 0:n.editorId,sentenceRanges:[[0,(null==(o=this.paraMeta)||null==(r=o.text)?void 0:r.length)-1]],language:{name:"English (US)",code:"en-us",detectedLanguage:{name:"English (US)",code:"en-us",confidence:1,source:""}},errorCode:"TIMEOUT"}}},{key:"getGCFallbackResponse",value:function(){var e,t,n;return{type:te.SentenceSuggestionsGC,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(n=this.paraMeta)?void 0:n.editorId,suggestions:[],errorCode:"TIMEOUT"}}},{key:"getRecommendationFallbackResponse",value:function(){var e,t,n;return{type:te.SentenceSuggestionsRecommendation,changeIndex:null==(e=this.paraMeta)?void 0:e.changeIndex,editorGroupId:null==(t=this.paraMeta)?void 0:t.editorGroupId,editorId:null==(n=this.paraMeta)?void 0:n.editorId,suggestions:[],errorCode:"TIMEOUT"}}},{key:"fallback",value:function(){var e;this.gcObservable.next(this.getSentenceSplitterFallbackResponse()),this.events.push(this.getSentenceSplitterFallbackResponse()),this.gcObservable.next(this.getGCFallbackResponse()),this.events.push(this.getGCFallbackResponse()),this.gcObservable.complete(),null==(e=this.recommendationObservable)||e.complete()}},{key:"next",value:function(e){if(!this.isTimedOut&&!this.isCompleted){var t,n,r,o,i,a=(null==e?void 0:e.isError)?null==e||null==(t=e.data)?void 0:t.errorCode:void 0;a&&(this.error=Error(a)),this.events.push(e);var s=Pn(wn({},null==e?void 0:e.data),{isCached:null==e?void 0:e.isCached});if((null==s?void 0:s.type)===te.SentenceSplitter){if(this.isSentenceReceived=!0,!(null==s||null==(r=s.sentenceRanges)?void 0:r.length))return void this.fallback();this.sentencesCount=null==s||null==(o=s.sentenceRanges)?void 0:o.length,this.gcObservable.next(s),this.processingType===Y.RECOMMENDATION&&(this.gcObservable.next({type:te.SentenceSuggestionsGCCompleted}),this.gcObservable.complete())}(null==s?void 0:s.type)===te.SentenceSuggestionsGC&&(this.receivedCount=(this.receivedCount||0)+1,this.gcObservable.next(s)),(null==s?void 0:s.type)===te.SentenceSuggestionsGCCompleted&&(this.gcObservable.next(s),this.gcObservable.complete()),(null==s?void 0:s.type)===te.SkipProcessing&&(this.gcObservable.complete(),null==(i=this.recommendationObservable)||i.complete()),(null==s?void 0:s.type)===te.SentenceSuggestionsRecommendation&&this.recommendationObservable&&(this.receivedCount=(this.receivedCount||0)+1,this.recommendationObservable.next(s)),this.sentencesCount&&this.receivedCount&&this.sentencesCount===this.receivedCount&&this.recommendationObservable&&this.recommendationObservable.complete(),(null==e||null==(n=e.data)?void 0:n.errorCode)===H.LANGUAGE_NOT_SUPPORTED&&(this.error=Error("Language not supported"),this.gcObservable.error(e),this.recommendationObservable&&this.recommendationObservable.error(e)),this.gcObservable.isObsCompleted()&&(!this.recommendationObservable||this.recommendationObservable.isObsCompleted())&&this.onComplete(this.paraKey,this.events,this.error)}}},{key:"sendBulk",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0;n<e.length;n++)if(e){var r=t?Pn(wn({},e[n]),{isCached:t}):e[n];this.next(r)}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dn=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");Ln(this,"observers",void 0),Ln(this,"isCompleted",void 0),Ln(this,"eventQueue",void 0),Ln(this,"errorQueue",void 0),Ln(this,"isSubscribed",void 0),this.observers=[],this.isCompleted=!1,this.eventQueue=[],this.errorQueue=null,this.isSubscribed=!1}return e=[{key:"isObsCompleted",value:function(){return this.isCompleted}},{key:"subscribe",value:function(e){var t=this,n={onNext:e.next,onComplete:e.complete,onError:e.error};return this.observers.push(n),this.isSubscribed=!0,this.eventQueue.forEach(function(e){return n.onNext(e)}),this.errorQueue?(n.onError(this.errorQueue),this.clearObservers(),{unsubscribe:function(){}}):this.isCompleted?(n.onComplete(),this.clearObservers(),{unsubscribe:function(){}}):{unsubscribe:function(){t.observers=t.observers.filter(function(e){return e!==n})}}}},{key:"next",value:function(e){this.isCompleted||(this.isSubscribed?this.observers.forEach(function(t){t.onNext&&t.onNext(e)}):this.eventQueue.push(e))}},{key:"complete",value:function(){this.isCompleted||(this.isSubscribed&&(this.observers.forEach(function(e){e.onComplete&&e.onComplete()}),this.clearObservers()),this.isCompleted=!0)}},{key:"error",value:function(e){this.isCompleted||(this.isSubscribed?(this.observers.forEach(function(t){t.onError&&t.onError(e)}),this.clearObservers()):this.errorQueue=e,this.isCompleted=!0)}},{key:"clearObservers",value:function(){this.observers=[]}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Un(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}var Mn=function(e){try{var t=new Dn,n=0,r=!1;return Object.keys(e).forEach(function(o){e[o].subscribe({next:function(e){return t.next({data:e,source:o})},complete:function(){++n!==Object.keys(e).length||r||t.complete()},error:function(e){r||(r=!0,t.error(e))}})}),t}catch(e){return new Dn}},Gn=function(e){return JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,name:null==e?void 0:e.name},(null==e?void 0:e.cause)&&{cause:null==e?void 0:e.cause}))};function Fn(e){for(var t=2166136261,n=0;n<e.length;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function Bn(e){var t;return(t=function(){var t;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(n){switch(n.label){case 0:return t=(new TextEncoder).encode(e),[4,crypto.subtle.digest("SHA-1",t)];case 1:var r;return[2,(function(e){if(Array.isArray(e))return xn(e)}(r=new Uint8Array(n.sent()))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e){if(e){if("string"==typeof e)return xn(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xn(e,void 0)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e){return e.toString(16).padStart(2,"0")}).join("")]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){Un(i,r,o,a,s,"next",e)}function s(e){Un(i,r,o,a,s,"throw",e)}a(void 0)})})()}var Hn={socket:{enableQueue:!1,maxRetryAttempts:5,retryTimeAfterExhaust:3e5,connTimeout:4e4,reconnectDelay:500},fallback:{maxRetryAttempts:1,connectionRetryDelay:500,sendRetryDelay:500},message:{retryDelay:500,ackTimeout:3e3,queueTimeout:1e4,maxRetries:1,cacheTtl:1728e5,wsBatchSize:20,fallBackBatchSize:10},observableTimeout:3e4,observableIdleTimeout:1e4,maxRetryEditorNotFound:3},jn={socketUrl:"wss://edit-stream.quillbot.com",fallbackUrl:"https://edit-stream.quillbot.com"};function Wn(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function zn(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Wn(i,r,o,a,s,"next",e)}function s(e){Wn(i,r,o,a,s,"throw",e)}a(void 0)})}}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Vn(e,t,n[t])})}return e}function Kn(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Yn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Zn(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Jn=function(){var e,t;function n(e,t){var r=this;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");Vn(this,"transport",void 0),Vn(this,"msgController",void 0),Vn(this,"_activeEditors",void 0),Vn(this,"_activeObservables",void 0),Vn(this,"_responseStream",void 0),Vn(this,"sendAck",void 0),this.transport=e,this.msgController=t,this._activeEditors={},this._activeObservables={},this.sendAck=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data;r.msgController.sendViaSocket({event:V.ACK,data:e},!1)},this._responseStream=new Jt(e.recoveryConfig.observableTimeout)}return e=[{key:"handleIncoming",value:function(e){var t=JSON.parse(e);Zr(t,this.transport.pendingAcks,this._activeObservables),this._responseStream.handleResponse(t)}},{key:"processPending",value:function(){return zn(function(){var e;return Zn(this,function(t){switch(t.label){case 0:return e=this,[4,this.msgController.queueManager.processQueue(Ue.INIT,function(t,n){return e.msgController.send(Kn(qn({},t),{fromQueue:!0}),n)})];case 1:return t.sent(),[4,this.msgController.queueManager.processQueue(Ue.GENERIC,function(t,n){return e.msgController.send(Kn(qn({},t),{fromQueue:!0}),n)})];case 2:return t.sent(),[2]}})}).call(this)}},{key:"sendPong",value:function(){this.msgController.sendViaSocket({event:V.PONG,data:{}},!1)}},{key:"updateSocketConn",value:function(){return zn(function(){return Zn(this,function(e){switch(e.label){case 0:return[4,this.msgController.sendViaSocket({event:V.UPDATE_CONNECTION,data:{deviceMeta:this.transport.deviceMeta,userMeta:{anonId:this.transport.userMeta.anonId,abIdV2:this.transport.userMeta.abIdV2}}})];case 1:return e.sent(),[2]}})}).call(this)}},{key:"_initEditor",value:function(e,t){return zn(function(){var n,r,o,i,a,s,u,c,l;return Zn(this,function(d){switch(d.label){case 0:if((null==(n=this._activeEditors[e.editorId])?void 0:n.initPromise)&&(null==(r=this._activeEditors[e.editorId])?void 0:r.ackStatus)!==Z.RESOLVED)return[2,this._activeEditors[e.editorId].initPromise];if((o=this._activeEditors[e.editorId])||(o={editorContentVersion:"",lastSentHash:"",ackStatus:Z.NOT_SENT,initPromise:null,fullContentHash:"",lastSentOt:""}),i="editorCategory"in e,a=null,o.ackStatus!==Z.NOT_SENT)return[3,6];o.ackStatus=Z.PENDING,d.label=1;case 1:return d.trys.push([1,3,4,5]),o.initPromise=this.msgController.send({event:i?V.INIT_EDITOR_V2:V.INIT_EDITOR,eventId:t,data:e},!0,e.signal),this._activeEditors[e.editorId]=o,[4,o.initPromise];case 2:return a=d.sent(),[3,5];case 3:if(((null==(s=d.sent())||null==(c=s.errorData)||null==(u=c.data)?void 0:u.errorCode)||(null==s||null==(l=s.details)?void 0:l.errorCode))===H.EDITOR_ALREADY_EXISTS)return[2,null];throw o.ackStatus=Z.NOT_SENT,s;case 4:return o.initPromise=null,[7];case 5:o.ackStatus=Z.RESOLVED,d.label=6;case 6:return i||(o.editorContentVersion=e.editorVersion),this._activeEditors[e.editorId]=o,[2,a]}})}).call(this)}},{key:"sendMessage",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Date.now(),i=ie(o),a=!1;return new lt(function(s){var u=n._responseStream.eventResponseStream(i,{each:n.transport.recoveryConfig.observableIdleTimeout},r).subscribe(s);return a||(a=!0,zn(function(){var n;return Zn(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),r?[4,this._handleContentChangeV2(i,e,t,o)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,this._handleContentChange(i,e,t,o)];case 3:a.sent(),a.label=4;case 4:return[3,6];case 5:return n=a.sent(),s.error(n),[3,6];case 6:return[2]}})}).call(n)),function(){return u.unsubscribe()}})}},{key:"_handleContentChangeV2",value:function(e,t,n,r){return zn(function(e,t,n,r){var o,i,a,s,u,c,l,d,f,h,p,_,E,g,m,v,b,y,A,T,S,R,O,I,N,C,w,P,k,L,D,x,U=arguments;return Zn(this,function(M){switch(M.label){case 0:if((o=U.length>4&&void 0!==U[4]?U[4]:Hn.maxRetryEditorNotFound)<0)throw Error("Max retry attempts reached for initializing editor");M.label=1;case 1:return M.trys.push([1,9,,13]),t!==V.ON_COMMAND?[3,3]:[4,this.msgController.send({event:t,data:n,eventTimestamp:r,eventId:e,retryCount:1})];case 2:return[2,M.sent()];case 3:return a=(i=n).editorCategory,s=i.hostUrl,u=i.product,c=i.hostCategory,l=i.editorCompleteText,d=i.meta.handleResponseCallback,f=Yn(i.meta,["handleResponseCallback"]),h=Yn(i,["editorCategory","hostUrl","product","hostCategory","editorCompleteText","meta"]),[4,Bn(l)];case 4:return p=M.sent(),this._activeEditors[i.editorId]?[3,6]:[4,this._initEditor({editorId:i.editorId,writingSessionId:i.writingSessionId,processingType:i.processingType,initialContent:i.processingChanges,editorCategory:a,editorGroupId:i.editorGroupId,hostUrl:s||"",hostCategory:c||"",product:u,meta:{userPreferredDialect:f.userPreferredDialect,language:f.language}},e)];case 5:return M.sent(),(_=i.processingChanges).length&&(null==d||d({editorId:i.editorId,savedText:l,lastChangedContentTimestamp:null!=(g=null==(E=_[_.length-1])?void 0:E.currentTimestamp)?g:Date.now()},re.EDITOR_CONTENT_SAVE_ACK)),[3,8];case 6:return this._activeEditors[i.editorId].fullContentHash=p,this._activeEditors[i.editorId].lastSentOt=e,b=Fn(v=l.slice(0,1e3)),y=(null==(m=this._activeEditors[i.editorId])?void 0:m.lastSentHash)!==b,A=Kn(qn({},h),{meta:qn({},f,y&&{editorStartText:v}),fullContentHash:p}),y&&(this._activeEditors[i.editorId].lastSentHash=b),[4,this.msgController.send({event:t,data:A,eventTimestamp:r,eventId:e,retryCount:1},!0,i.signal)];case 7:T=M.sent(),(S=(null==i?void 0:i.changes)||[]).length&&T.requestEventId===this._activeEditors[i.editorId].lastSentOt?null==d||d({editorId:i.editorId,savedText:l,lastChangedContentTimestamp:S[S.length-1].currentTimestamp},re.EDITOR_CONTENT_SAVE_ACK):null==(I=(N=this.transport).trackEvent)||I.call(N,{logger:{eventName:pe,eventData:{currentOt:e,editorId:i.editorId,lastSentOt:this._activeEditors[i.editorId].lastSentOt,lastSentContentTimestamp:null==(R=S[S.length-1])?void 0:R.lastTimestamp,currentContentTimestamp:null==(O=S[S.length-1])?void 0:O.currentTimestamp}}}),M.label=8;case 8:return[3,13];case 9:return((null==(C=M.sent())||null==(P=C.errorData)||null==(w=P.data)?void 0:w.errorCode)||(null==C||null==(k=C.details)?void 0:k.errorCode))!==H.EDITOR_NOT_FOUND?[3,12]:(delete this._activeEditors[n.editorId],D=(L=Date.now())+1,x=Kn(qn({},n),{processingType:Y.NONE,processingChanges:[{text:n.editorCompleteText,lastTimestamp:L,currentTimestamp:D,start:0,offset:0}]}),[4,this._handleContentChangeV2("",t,x,r,o-1)]);case 10:return M.sent(),[4,this._handleContentChangeV2(e,t,Kn(qn({},n),{changes:[{start:-1,end:-1,text:"",lastTimestamp:D,currentTimestamp:D}]}),r,o-1)];case 11:return M.sent(),[2];case 12:throw C;case 13:return[2]}})}).apply(this,arguments)}},{key:"_handleContentChange",value:function(e,t,n,r){return zn(function(e,t,n,r){var o,i,a,s,u,c=arguments;return Zn(this,function(l){switch(l.label){case 0:if((o=c.length>4&&void 0!==c[4]?c[4]:Hn.maxRetryEditorNotFound)<0)throw Error("Max retry attempts reached for initializing editor");l.label=1;case 1:return l.trys.push([1,4,,7]),[4,this._initEditor({editorGroupId:n.editorGroupId,editorId:n.editorId,editorVersion:n.editorContentVersion,hostUrl:n.hostUrl||"",product:n.product})];case 2:return l.sent(),[4,this.msgController.send({event:t,data:n,eventTimestamp:r,eventId:e,retryCount:1})];case 3:return l.sent(),[3,7];case 4:return((null==(i=l.sent())||null==(s=i.errorData)||null==(a=s.data)?void 0:a.errorCode)||(null==i||null==(u=i.details)?void 0:u.errorCode))!==H.EDITOR_NOT_FOUND?[3,6]:(delete this._activeEditors[n.editorId],[4,this._handleContentChange(e,t,n,r,o-1)]);case 5:return l.sent(),[2];case 6:throw i;case 7:return[2]}})}).apply(this,arguments)}},{key:"_setActiveObservables",value:function(e,t){this._activeObservables[e]=t}},{key:"updateEditorContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return zn(function(){var n,r,o,i,a,s,u,c,l,d,f,h,p,_,E,g,m,v,b,y,A,T,S,R,O,I,N,C,w,P,k,L,D,x;return Zn(this,function(U){switch(U.label){case 0:return n=this,[4,this._initEditor({editorGroupId:e.editorGroupId,editorId:e.editorId,editorVersion:e.editorContentVersion,hostUrl:e.hostUrl||"",hostCategory:e.hostCategory||"",product:e.product})];case 1:if(U.sent(),o=e.editorCompleteText,e.hostUrl,e.product,e.hostCategory,i=e.meta,a=Yn(e,["editorCompleteText","hostUrl","product","hostCategory","meta"]),u=Fn(s=o.slice(0,1e3)),c=this.transport.socketState===ne.READY?this.transport.recoveryConfig.message.wsBatchSize:this.transport.recoveryConfig.message.fallBackBatchSize,l=[],e.changes.length<=10)l.push(e.changes);else for(d=0;d<e.changes.length;d+=c)f=e.changes.slice(d,d+c),l.push(f);h=-1,p=Date.now(),_={},E={},g=(null==(r=this._activeEditors[e.editorId])?void 0:r.lastSentHash)!==u,m=!0,v=!1,b=void 0,U.label=2;case 2:U.trys.push([2,18,19,20]),y=l[Symbol.iterator](),U.label=3;case 3:if(m=(A=y.next()).done)return[3,17];T=A.value,h+=1,S={event:V.ON_CHANGE,data:Kn(qn({},a),{changes:T.filter(function(e){return""!==e.text}).map(function(t){return qn({text:t.text,processingType:t.processingType},(null==e?void 0:e.acceptChangeType)&&{changeSentenceLength:t.changeSentenceLength,replacementText:t.replacementText},t.rteMap&&{rteMap:t.rteMap})}),meta:qn({},i,g&&{editorStartText:s})}),eventTimestamp:p,eventId:ie(p)},g&&(this._activeEditors[e.editorId].lastSentHash=u),R=0,O=!1,U.label=4;case 4:U.trys.push([4,11,,16]),N=function(t){var r,o,i,a,s,u,l,d;return Zn(this,function(f){switch(f.label){case 0:return r=new Dn,_[o=h*c+t]=r,i=void 0,[Y.GC_WITH_RECOMMENDATION,Y.RECOMMENDATION].includes(T[t].processingType)&&(i=new Dn,E[o]=i),""!==T[t].text?[3,1]:(r.next({type:te.SentenceSplitter,sentenceRanges:[[0,0]]}),r.complete(),null==i||i.complete(),[3,3]);case 1:return a="".concat(S.eventId,"_").concat(R),[4,Nn(s="".concat(V.ON_CHANGE,"-").concat(T[t].text,"-").concat(T[t].processingType,"-").concat(S.data.meta.userPreferredDialect,"-").concat(S.data.meta.language).concat(I.transport.userMeta.premium?"-".concat(I.transport.userMeta.premium):""))];case 2:l=(u=f.sent())&&Object.keys(u).length,d=new kn(function(e,t,r){var o,i;delete n._activeObservables[e],l||r||(o=s,i=n.transport.recoveryConfig.message.cacheTtl,On&&o&&(null==On||On.set(o,t,i)))},a,r,I.transport.recoveryConfig.observableTimeout,{text:T[t].text,editorId:e.editorId,editorGroupId:e.editorGroupId,changeIndex:R},e.signal,T[t].processingType,i),I._setActiveObservables(a,d),l?(d.sendBulk(u,!0),S.data.changes[R].processingType=Y.NONE):O=!0,R+=1,f.label=3;case 3:return[2]}})},C=0,U.label=5;case 5:return C<T.length?(I=this,[5,function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(N(C))]):[3,8];case 6:U.sent(),U.label=7;case 7:return C+=1,[3,5];case 8:return S.data.changes.length>0?[4,this.msgController.send(S,O,e.signal)]:[3,10];case 9:U.sent(),U.label=10;case 10:case 15:return[3,16];case 11:return((null==(w=U.sent())||null==(k=w.errorData)||null==(P=k.data)?void 0:P.errorCode)===H.EDITOR_NOT_FOUND||(null==w||null==(L=w.details)?void 0:L.errorCode)===H.EDITOR_NOT_FOUND)&&t<Hn.maxRetryEditorNotFound?(delete this._activeEditors[null==e?void 0:e.editorId],D=o.split("\n\n").map(function(e){return{text:e,processingType:Y.NONE}}),[4,this.updateEditorContent(Kn(qn({},e),{changes:D,changeType:K.USER_CHANGE}),t+1)]):[3,14];case 12:return U.sent(),[4,this.msgController.send(S,!0,e.signal)];case 13:return U.sent(),[3,15];case 14:throw w;case 16:return m=!0,[3,3];case 17:return[3,20];case 18:return x=U.sent(),v=!0,b=x,[3,20];case 19:try{m||null==y.return||y.return()}finally{if(v)throw b}return[7];case 20:return[2,{gcMergedObservable:Mn(_),recommendationMergedObservable:Mn(E)}]}})}).call(this)}},{key:"reinitializeWritingSession",value:function(e){return zn(function(){return Zn(this,function(t){switch(t.label){case 0:return[4,ke({transport:this.transport,errorCode:W.EXPIRED_WRITING_SESSION,eventData:e})];case 1:return t.sent(),[2]}})}).call(this)}},{key:"getActiveEditor",value:function(e){return this._activeEditors[e]}}],t=[{key:"setInstance",value:function(e){n._instance=e}},{key:"getInstance",value:function(){if(!n._instance)throw Error("MessageService has not been initialised yet");return n._instance}}],e&&Xn(n.prototype,e),t&&Xn(n,t),n}();function $n(e,t,n){return($n=nr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&er(o,n.prototype),o}).apply(null,arguments)}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tr(e){var t="function"==typeof Map?new Map:void 0;return(tr=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return $n(e,arguments,Qn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),er(n,e)})(e)}function nr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nr=function(){return!!e})()}Vn(Jn,"_instance",void 0);var rr=function(e){var t;if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");function n(e){var t,r,o,i,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof n))throw TypeError("Cannot call a class as a function");return r=[e],t=Qn(t=n),a=function(e,t){var n;if(t&&("object"==((n=t)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,nr()?Reflect.construct(t,r||[],Qn(this).constructor):t.apply(this,r)),i=void 0,(o="details")in a?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i,a.name=a.constructor.name,a.details=s,Error.captureStackTrace&&Error.captureStackTrace(a,a.constructor),a}return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&er(n,e),t=[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," ").concat(Object.keys(this.details).length?"| Details: ".concat(JSON.stringify(this.details)):"")}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(n.prototype,t),n}(tr(Error));function or(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function ir(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){or(i,r,o,a,s,"next",e)}function s(e){or(i,r,o,a,s,"throw",e)}a(void 0)})}}function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){sr(e,t,n[t])})}return e}function cr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function lr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var dr=function(){var e,t;function n(){if(!(this instanceof n))throw TypeError("Cannot call a class as a function");sr(this,"baseURL",""),sr(this,"defaultHeaders",{"Content-Type":"application/json"}),sr(this,"retryConfig",{maxRetries:0,retryDelay:1e3})}return e=[{key:"executeRequest",value:function(e,t){return ir(function(e,t){var n,r,o,i,a,s,u,c,l,d,f=arguments;return lr(this,function(h){switch(h.label){case 0:if(n=this,r=f.length>2&&void 0!==f[2]?f[2]:{},o=f.length>3&&void 0!==f[3]?f[3]:0,!this.baseURL)throw Error("Base URL not set. Please call setBaseURL before making requests.");h.label=1;case 1:return h.trys.push([1,7,,10]),i="".concat(this.baseURL).concat(t.startsWith("/")?t:"/".concat(t)),a={method:e,headers:ur({},this.defaultHeaders,r.headers)},r.body&&(a.body=JSON.stringify(r.body)),r.signal&&(a.signal=r.signal),[4,fetch(i,a)];case 2:s=h.sent(),h.label=3;case 3:return h.trys.push([3,5,,6]),[4,s.json()];case 4:return u=h.sent(),[3,6];case 5:return[3,6];case 6:if(!s.ok)throw null==(c=r.responseCallback)||c.call(r,s,u),new rr(u.message||"Request failed",u);return[2,u];case 7:return l=h.sent(),d=r.retries||this.retryConfig.maxRetries,o<d?[4,new Promise(function(e){return setTimeout(e,n.retryConfig.retryDelay)})]:[3,9];case 8:return h.sent(),[2,this.executeRequest(e,t,r,o+1)];case 9:throw l;case 10:return[2]}})}).apply(this,arguments)}},{key:"setBaseURL",value:function(e){return this.baseURL=e.endsWith("/")?e.slice(0,-1):e,this}},{key:"getBaseURL",value:function(){return this.baseURL}},{key:"setDefaultHeaders",value:function(e){return this.defaultHeaders=ur({"Content-Type":"application/json"},e),this}},{key:"setDefaultHeader",value:function(e,t){return this.defaultHeaders[e]=t,this}},{key:"removeDefaultHeader",value:function(e){return delete this.defaultHeaders[e],this}},{key:"getDefaultHeaders",value:function(){return ur({},this.defaultHeaders)}},{key:"setRetryConfig",value:function(e){return this.retryConfig=ur({},e),this}},{key:"getRetryConfig",value:function(){return ur({},this.retryConfig)}},{key:"get",value:function(e,t){return ir(function(){return lr(this,function(n){return[2,this.executeRequest("get",e,t)]})}).call(this)}},{key:"post",value:function(e,t,n){return ir(function(){return lr(this,function(r){return[2,this.executeRequest("post",e,cr(ur({},n),{body:t}))]})}).call(this)}},{key:"put",value:function(e,t,n){return ir(function(){return lr(this,function(r){return[2,this.executeRequest("put",e,cr(ur({},n),{body:t}))]})}).call(this)}},{key:"delete",value:function(e,t){return ir(function(){return lr(this,function(n){return[2,this.executeRequest("delete",e,t)]})}).call(this)}},{key:"_readStream",value:function(e,t,n,r){return ir(function(){var o,i,a,s,u,c,l,d,f,h,p,_,E,g,m,v,b,y;return lr(this,function(A){switch(A.label){case 0:o="",i=setTimeout(function(){},0),a=(null==t?void 0:t.timeout)||3e4,s=function(){clearTimeout(i),i=setTimeout(function(){var t=new rr("Stream message timeout after ".concat(a,"ms"),{type:"stream_timeout",timeout:a});e.cancel(),r(t)},a)},A.label=1;case 1:A.trys.push([1,5,6,7]),s(),A.label=2;case 2:return[4,e.read()];case 3:if(c=(u=A.sent()).value,l=u.done,s(),l)return[3,4];if(c){o=null!=(h=(f=(o+=c).split("__".concat(null==(d=t.data)?void 0:d.connSessionId,"__\n"))).pop())?h:"",p=!0,_=!1,E=void 0;try{for(g=f[Symbol.iterator]();!(p=(m=g.next()).done);p=!0)if(v=m.value.trim())try{b=JSON.parse(v),null==t||t.onData(b)}catch(e){}}catch(e){_=!0,E=e}finally{try{p||null==g.return||g.return()}finally{if(_)throw E}}}return[3,2];case 4:if(o.trim())try{y=JSON.parse(o.trim()),null==t||t.onData(y)}catch(e){}return clearTimeout(i),null==t||t.onEnd(),[2,n({})];case 5:return r(A.sent()),[3,7];case 6:return clearTimeout(i),[7];case 7:return[2]}})})()}},{key:"stream",value:function(e,t){return ir(function(){var n;return lr(this,function(r){return n=this,[2,new Promise(function(r,o){ir(function(){var n,i,a,s,u,c,l,d,f,h,p,_;return lr(this,function(E){switch(E.label){case 0:if(!this.baseURL)return o(Error("Base URL not set. Please call setBaseURL before making requests.")),[2];E.label=1;case 1:return E.trys.push([1,8,,9]),n="".concat(this.baseURL).concat(e.startsWith("/")?e:"/".concat(e)),a={method:i=(null==t?void 0:t.method)||"POST",headers:ur(cr(ur({},this.defaultHeaders),{Accept:"text/event-stream"}),null==t?void 0:t.headers),signal:null==t?void 0:t.signal},(null==t?void 0:t.data)&&"POST"===i&&(a.body=JSON.stringify(t.data)),[4,fetch(n,a)];case 2:if((s=E.sent()).ok)return[3,7];E.label=3;case 3:return E.trys.push([3,5,,6]),[4,s.json()];case 4:return c=E.sent(),[3,6];case 5:return E.sent(),c={message:"Request failed",status:s.status},[3,6];case 6:return l=new rr(c.message||"Request failed",c),null==t||null==(u=t.onError)||u.call(t,l),o(l),[2];case 7:return s.body?(h=s.body.pipeThrough(new TextDecoderStream).getReader(),this._readStream(h,t,r,o),[3,9]):(f=Error("Empty response body"),null==t||null==(d=t.onError)||d.call(t,f),o(f),[2]);case 8:return p=E.sent(),null==t||null==(_=t.onError)||_.call(t,p),o(p),[3,9];case 9:return[2]}})}).call(n)})]})}).call(this)}}],t=[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}},{key:"resetInstance",value:function(){n.instance=null}}],e&&ar(n.prototype,e),t&&ar(n,t),n}();function fr(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function hr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){fr(i,r,o,a,s,"next",e)}function s(e){fr(i,r,o,a,s,"throw",e)}a(void 0)})}}function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_r(e,t,n[t])})}return e}function gr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function mr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}sr(dr,"instance",null);var vr=function(){var e,t;function n(){var e=this;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");_r(this,"connectionReattempts",0),_r(this,"sendReattempts",0),_r(this,"_currentConnectionPromise",null),_r(this,"maxReconnectAttempts",Hn.fallback.maxRetryAttempts),_r(this,"sendRetryDelay",Hn.fallback.sendRetryDelay),_r(this,"trackEvent",function(){}),_r(this,"resetConnectionSession",function(){}),_r(this,"setConnectionSessionId",function(){}),_r(this,"httpClient",dr.getInstance()),_r(this,"authHandlers",{logout:function(){},getIdToken:function(){return Promise.resolve("")}}),_r(this,"deviceMeta",{}),_r(this,"userMeta",{anonId:"",abIdV2:""}),_r(this,"headers",{"Content-Type":"application/json"}),_r(this,"_responseCallback",function(t,n){var r,o={eventName:ce,eventData:{statusCode:t.status,requestUrl:t.url,errorCode:(null==n?void 0:n.errorCode)||"UNKNOWN"}};403===t.status&&(o.eventData.rayID=t.headers.get("cf-ray")||"",o.eventData.cfStatus=t.headers.get("cf-mitigated")),null==(r=e.trackEvent)||r.call(e,{logger:o})}),_r(this,"httpStream",function(t,n,r){return hr(function(){var e,o;return mr(this,function(i){switch(i.label){case 0:e=this,o=function(){return hr(function(){var e,o,i,a,s,u;return mr(this,function(c){switch(c.label){case 0:return o=(e=this.httpClient).stream,i=["/ws/fallback/event-stream"],a={method:"POST",data:t},s=[Er({},this.headers)],u={},[4,this.authHandlers.getIdToken(!1)];case 1:return[4,o.apply(e,i.concat([Er.apply(void 0,[(a.headers=gr.apply(void 0,s.concat([(u.useridtoken=c.sent()||"",u)])),a.timeout=3e4,a.streamTimeout=5e3,a),n,(null==r?void 0:r.signal)&&{signal:r.signal}])]))];case 2:return c.sent(),[2]}})}).call(e)},i.label=1;case 1:return i.trys.push([1,3,,5]),[4,o()];case 2:case 4:return[2,i.sent()];case 3:return[4,this._handleError(undefined,t,o,(null==r?void 0:r.signal)||void 0)];case 5:return[2]}})}).call(e)})}return e=[{key:"setHttpClient",value:function(e){this.httpClient=e}},{key:"setConfig",value:function(e){this.authHandlers=e.authHandlers,this.trackEvent=e.trackEvent,this.resetConnectionSession=e.resetConnectionSession,this.setConnectionSessionId=e.setConnectionSessionId,this.deviceMeta=e.deviceMeta,this.userMeta=e.userMeta,this.httpClient&&this.httpClient.setBaseURL&&this.httpClient.setBaseURL(e.baseUrl),this.maxReconnectAttempts=e.maxReconnectAttempts}},{key:"setHeaders",value:function(e){this.headers=Er({},this.headers,e)}},{key:"handleAuthError",value:function(e){return hr(function(){var t,n,r;return mr(this,function(o){switch(o.label){case 0:return[B.TOKEN_EXPIRED].includes(null==(t=e.details)?void 0:t.errorCode)?[4,this.authHandlers.getIdToken(!0)]:[3,2];case 1:return o.sent(),[2];case 2:[B.FORCE_PASSWORD_CHANGE,B.TOKEN_REVOKED].includes(null==(n=e.details)?void 0:n.errorCode)&&(null==(r=this.authHandlers)||r.logout("EXTERNAL_MESSAGE")),o.label=3;case 3:throw e}})}).call(this)}},{key:"establishConnection",value:function(e){return hr(function(e){var t,n,r,o;return mr(this,function(i){if(t=this,n=e.connSessionId,r=e.connectionData,o=e.signal,!this.httpClient)throw Error("HTTP client not set");return this._currentConnectionPromise||(this._currentConnectionPromise=hr(function(){var e,t,i,a,s,u,c,l,d,f;return mr(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,9,10]),a=(i=this.httpClient).post,s=["/api/ws/fallback/connection-session",Er({},r,n&&{connSessionId:n})],u={},c=[Er({},this.headers)],l={},[4,this.authHandlers.getIdToken(!1)];case 1:return[4,a.apply(i,s.concat([(u.headers=gr.apply(void 0,c.concat([(l.useridtoken=h.sent()||"",l)])),u)]))];case 2:return t=h.sent(),this.connectionReattempts=0,this.setConnectionSessionId(null==(e=t.data)?void 0:e.connSessionId),[2,t.data];case 3:return d=h.sent(),Object.values(B).includes(null==(f=d.details)?void 0:f.errorCode)?[4,this.handleAuthError(d)]:[3,5];case 4:h.sent(),h.label=5;case 5:return this.connectionReattempts<this.maxReconnectAttempts?(this.connectionReattempts++,this._currentConnectionPromise=null,[4,new Promise(function(e){return setTimeout(e,Hn.fallback.connectionRetryDelay)})]):[3,7];case 6:return h.sent(),[2,this.establishConnection({connectionData:r,signal:o})];case 7:this.connectionReattempts=0,h.label=8;case 8:throw Error("Failed to establish connection after ".concat(this.maxReconnectAttempts," attempts"));case 9:return this._currentConnectionPromise=null,[7];case 10:return[2]}})}).call(t)),[2,this._currentConnectionPromise]})}).apply(this,arguments)}},{key:"_handleError",value:function(e,t,n,r){return hr(function(){var o,i,a,s,u,c,l,d,f,h,p;return mr(this,function(_){switch(_.label){case 0:return o=this,d=null==e||null==(a=e.errorData)||null==(i=a.data)?void 0:i.retryConfig,Object.values(B).includes(null==(s=e.details)?void 0:s.errorCode)?[4,this.handleAuthError(e)]:[3,2];case 1:_.sent(),_.label=2;case 2:if([H.EDITOR_NOT_FOUND,H.EDITOR_ALREADY_EXISTS].includes(null==(u=e.details)?void 0:u.errorCode)&&e.details.statusCode===X.InternalServerError)throw e;return[W.INVALID_OR_EXPIRED_SESSION].includes(null==(c=e.details)?void 0:c.errorCode)?(this.resetConnectionSession(null==(f=e.details)?void 0:f.errorCode),[4,this.establishConnection({connectionData:{anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2,deviceMeta:this.deviceMeta},signal:r})]):[3,4];case 3:t.connSessionId=_.sent().connSessionId,_.label=4;case 4:return[W.EXPIRED_WRITING_SESSION].includes(null==(l=e.details)?void 0:l.errorCode)?[4,Jn.getInstance().reinitializeWritingSession(e.details)]:[3,6];case 5:_.sent(),_.label=6;case 6:return d&&(this.maxReconnectAttempts=null!=(h=d.maxRetry)?h:this.maxReconnectAttempts,this.sendRetryDelay=null!=(p=d.retryDelay)?p:this.sendRetryDelay),this.sendReattempts<this.maxReconnectAttempts?(this.sendReattempts++,[4,new Promise(function(e){return setTimeout(e,o.sendRetryDelay)})]):[3,8];case 7:return _.sent(),[2,n()];case 8:throw this.sendReattempts=0,e;case 9:return[2]}})}).call(this)}},{key:"sendEvent",value:function(e){return hr(function(e){var t,n,r,o,i,a,s;return mr(this,function(u){switch(u.label){case 0:if(t=this,n=e.eventData,r=e.signal,!this.httpClient)throw Error("HTTP client not set");return n.connSessionId?[3,2]:(this.resetConnectionSession(W.EMPTY_CONNECTION_ID),[4,this.establishConnection({connectionData:{anonId:this.userMeta.anonId,abIdV2:this.userMeta.abIdV2,deviceMeta:this.deviceMeta},signal:r})]);case 1:o=u.sent(),n.connSessionId=o.connSessionId,u.label=2;case 2:i=function(){return hr(function(){var e,t,o,i,a,s,u;return mr(this,function(c){switch(c.label){case 0:return o=(t=this.httpClient).post,i=["/api/ws/fallback/event",n],a={},s=[Er({},this.headers)],u={},[4,this.authHandlers.getIdToken(!1)];case 1:return[4,o.apply(t,i.concat([(a.headers=gr.apply(void 0,s.concat([(u.useridtoken=c.sent()||"",u)])),a.signal=r,a.responseCallback=this._responseCallback,a)]))];case 2:return e=c.sent(),this.sendReattempts=0,[2,{success:!0,data:e.data}]}})}).call(t)},u.label=3;case 3:return u.trys.push([3,5,,10]),[4,i()];case 4:return[2,u.sent()];case 5:a=u.sent(),u.label=6;case 6:return u.trys.push([6,8,,9]),[4,this._handleError(a,n,i,r)];case 7:return[2,u.sent()];case 8:var c,l;return[2,{success:!1,message:(c=s=u.sent(),(null!=(l=Error)&&"undefined"!=typeof Symbol&&l[Symbol.hasInstance]?l[Symbol.hasInstance](c):c instanceof l)?s.message:"Unknown error occurred")}];case 9:return[3,10];case 10:return[2]}})}).apply(this,arguments)}},{key:"disconnect",value:function(){this.connectionReattempts=0,this.sendReattempts=0}}],t=[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}],e&&pr(n.prototype,e),t&&pr(n,t),n}();function br(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function yr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){br(i,r,o,a,s,"next",e)}function s(e){br(i,r,o,a,s,"throw",e)}a(void 0)})}}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ar(e,t,n[t])})}return e}function Sr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}_r(vr,"instance",null);var Rr=function(){var e;function t(e,n){var r=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");Ar(this,"transport",void 0),Ar(this,"wsClient",void 0),Ar(this,"_initialisationPromise",void 0),Ar(this,"establishSocketConnection",void 0),this.transport=e,this.wsClient=n,this._initialisationPromise=null,this.establishSocketConnection=function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isReconnect,o=void 0!==n&&n;return r._shouldAttemptConnection(o)&&(null==(e=(t=r.transport).trackEvent)||e.call(t,{logger:{eventName:_e,eventData:{currentTime:Date.now(),isFirstConnection:!r.transport.connectedInitially&&!r.transport.connectionSessionId,isReconnect:o,retryAttempt:r.transport.retryAttempts,socketState:r.transport.socketState,connSessionId:r.transport.connectionSessionId,connectedInitially:r.transport.connectedInitially,lastConnAttemptTime:r.transport.lastConnAttemptTime,errorCode:r.transport.errorCode}}}),r._initialisationPromise=new Promise(function(e,t){r._establishSocketConnection({isReconnect:o,resolve:e,reject:t})})),r._initialisationPromise}}return e=[{key:"_establishSocketConnection",value:function(e){return yr(function(e){var t,n,r,o,i,a,s,u,c,l,d,f;return Sr(this,function(h){switch(h.label){case 0:t=this,n=e.isReconnect,r=e.resolve,o=e.reject,h.label=1;case 1:return h.trys.push([1,6,,7]),n?[4,this._delayConnection()]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,this._getConnectionData(n?{retry:this.transport.retryAttempts}:{})];case 4:return s=h.sent(),this.transport.retryAttempts+=1,this.transport.lastConnAttemptTime=Date.now(),this._socketStateTimer(),u=setTimeout(function(){t.transport.socketState!==ne.READY&&t.transport.pendingAcks.has(ae)&&(o(Error("Connection timeout")),t.transport.pendingAcks.delete(ae),t.clearInitPromise())},this.transport.recoveryConfig.socket.connTimeout),this.transport.pendingAcks.set(ae,{resolve:r,reject:o,timeout:u}),[4,this.wsClient.connect(s)];case 5:return h.sent(),this.transport.socketState=ne.CONNECTED,null==(i=(a=this.transport).trackEvent)||i.call(a,{logger:{eventName:ge,eventData:{currentTime:Date.now(),isFirstConnection:!this.transport.connectedInitially&&!this.transport.connectionSessionId,retryAttempt:this.transport.retryAttempts,connectedInitially:this.transport.connectedInitially,connSessionId:this.transport.connectionSessionId,lastConnAttemptTime:this.transport.lastConnAttemptTime,socketState:this.transport.socketState}}}),[3,7];case 6:return c=h.sent(),this.transport.socketState=ne.ERRORED,this.clearInitPromise(),this.transport.pendingAcks.has(ae)&&((f=this.transport.pendingAcks.get(ae).timeout)&&clearTimeout(f),this.transport.pendingAcks.delete(ae)),null==(l=(d=this.transport).trackEvent)||l.call(d,{logger:{eventName:me,eventData:{currentTime:Date.now(),isFirstConnection:!this.transport.connectedInitially&&!this.transport.connectionSessionId,retryAttempt:this.transport.retryAttempts,connectedInitially:this.transport.connectedInitially,error:Gn(c),socketState:this.transport.socketState,connSessionId:this.transport.connectionSessionId,lastConnAttemptTime:this.transport.lastConnAttemptTime,errorCode:this.transport.errorCode}}}),o(c),[3,7];case 7:return[2]}})}).apply(this,arguments)}},{key:"_shouldAttemptConnection",value:function(e){var t=this.transport,n=t.socketState,r=t.recoveryConfig,o=t.retryAttempts;return!([ne.CONNECTING,ne.CONNECTED,ne.AUTH_SUCCESS].includes(n)||this._initialisationPromise||(o>=r.socket.maxRetryAttempts?(this.transport.socketState=ne.RETRY_EXHAUSTED,1):e&&n===ne.READY&&this.wsClient.isOpen()||(this.transport.socketState=ne.CONNECTING,0)))}},{key:"_delayConnection",value:function(){return yr(function(){var e;return Sr(this,function(t){switch(t.label){case 0:return e=Math.min(this.transport.recoveryConfig.socket.reconnectDelay*Math.pow(2,this.transport.retryAttempts),3e4),[4,new Promise(function(t){return setTimeout(t,e)})];case 1:return t.sent(),[2]}})}).call(this)}},{key:"_getAuthToken",value:function(){return yr(function(){return Sr(this,function(e){switch(e.label){case 0:return[4,this.transport.authHandlers.getIdToken(!1)];case 1:return[2,e.sent()||""]}})}).call(this)}},{key:"_getConnectionData",value:function(){return yr(function(){var e,t,n=arguments;return Sr(this,function(r){switch(r.label){case 0:return e=(n.length>0&&void 0!==n[0]?n[0]:{}).retry,[4,this._getAuthToken()];case 1:var o,i;return t=r.sent(),[2,Tr((o=Tr({},this.transport.userMeta),i=i={userToken:t,platformType:this.transport.deviceMeta.platformType},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o),this.transport.connectionSessionId?{connectionSessionId:this.transport.connectionSessionId}:{connectionSessionId:this.transport.connectionConfig.connSessionId||""},void 0!==e&&{retry:e})]}})}).apply(this,arguments)}},{key:"_socketStateTimer",value:function(){var e=this;this.transport.socketStateTimeout&&clearTimeout(this.transport.socketStateTimeout),this.transport.socketStateTimeout=setTimeout(function(){[ne.CONNECTING,ne.CONNECTED,ne.AUTH_SUCCESS].includes(e.transport.socketState)&&e.transport.setErroredState(void 0)},this.transport.recoveryConfig.socket.connTimeout)}},{key:"clearInitPromise",value:function(){this._initialisationPromise=null}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function Or(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function Ir(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Or(i,r,o,a,s,"next",e)}function s(e){Or(i,r,o,a,s,"throw",e)}a(void 0)})}}function Nr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Cr=function(){var e;function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function")}return e=[{key:"executeWithExponentialBackoff",value:function(e,n,r,o,i,a){return Ir(function(){var s,u,c,l,d,f,h,p,_,E;return Nr(this,function(g){switch(g.label){case 0:s=e,u=n,c=500,l=-1,g.label=1;case 1:if(!(l<s))return[3,8];g.label=2;case 2:return g.trys.push([2,4,,7]),[4,r({retryCount:l<=0?l+1:l})];case 3:return[2,g.sent()];case 4:if(o(d=g.sent()),a&&!a(d))throw d;return p=null==d||null==(h=d.errorData)||null==(f=h.data)?void 0:f.retryConfig,-1===l&&p&&(u=null!=(_=null==p?void 0:p.retryDelay)?_:n,s=null!=(E=null==p?void 0:p.maxRetry)?E:e),[4,null==i?void 0:i(d)];case 5:if(g.sent(),++l>=s)throw d;return[4,t.delay(c)];case 6:return g.sent(),c=Math.min(u*Math.pow(2,l+1),3e4),[3,7];case 7:return[3,1];case 8:return[2]}})})()}},{key:"delay",value:function(e){return Ir(function(){return Nr(this,function(t){return[2,new Promise(function(t){return setTimeout(t,e)})]})})()}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t,e),t}();function wr(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function Pr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){wr(i,r,o,a,s,"next",e)}function s(e){wr(i,r,o,a,s,"throw",e)}a(void 0)})}}function kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){kr(e,t,n[t])})}return e}function Dr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function xr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Ur=function(){var e;function t(e,n){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");kr(this,"transport",void 0),kr(this,"wsClient",void 0),kr(this,"queueManager",void 0),this.transport=e,this.wsClient=n,this.queueManager=Me.getInstance()}return e=[{key:"send",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2?arguments[2]:void 0;return Pr(function(){var r,o,i,a,s,u,c;return xr(this,function(l){switch(l.label){case 0:if(r=this,(i=this.transport).connectionSessionId)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,i.establishSocketConnection({isReconnect:!0})];case 2:return l.sent(),[3,4];case 3:return a=l.sent(),i._trackTransportError(a,"TRANSPORT_SEND"),[3,4];case 4:return s=e.eventTimestamp||Date.now(),u=e.eventId||ie(s),!(e=Dr(Lr({},e),{eventId:u,eventTimestamp:s})).fromQueue&&i.recoveryConfig.socket.enableQueue&&[ne.CONNECTING,ne.CONNECTED,ne.ERRORED,ne.AUTH_SUCCESS].includes(i.socketState)?(i.socketState===ne.ERRORED&&i.establishSocketConnection({isReconnect:!0}),[2,new Promise(function(o,a){var s=e.event===V.INIT_EDITOR?Ue.INIT:Ue.GENERIC;r.queueManager.enqueue(s,e,t,i.recoveryConfig.message.queueTimeout,{resolve:o,reject:a,timeoutHandler:function(){return Pr(function(){return xr(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._sendViaHttp(e,n)];case 1:return o(t.sent()),[3,3];case 2:return a(t.sent()),[3,3];case 3:return[2]}})}).call(r)}})})]):i.socketState!==ne.READY||!this.wsClient.isOpen()||i.isFallbackEnabled?[3,6]:(null==(c=i.trackEvent)||c.call(i,{logger:{eventName:be,eventData:{event:e.event,currentTime:Date.now(),waitForAck:t,retryCount:e.retryCount||0,connSessionId:i.connectionSessionId}}}),[4,Cr.executeWithExponentialBackoff(i.recoveryConfig.message.maxRetries,i.recoveryConfig.message.retryDelay,function(n){return r.sendViaSocket(Dr(Lr({},e),{retryCount:n.retryCount}),t)},function(t){var n,o,a;null==(a=i.trackEvent)||a.call(i,{logger:{eventName:ye,eventData:{currentTime:Date.now(),event:e.event,timeSinceSent:Date.now()-s,socketState:i.socketState,isWsOpen:r.wsClient.isOpen(),connSessionId:i.connectionSessionId,errorCode:null==t||null==(o=t.errorData)||null==(n=o.data)?void 0:n.errorCode}}})},function(e){return Pr(function(){var t,n,r,o;return xr(this,function(a){switch(a.label){case 0:return(null==e||null==(n=e.errorData)||null==(t=n.data)?void 0:t.errorCode)!==W.INVALID_OR_EXPIRED_SESSION?[3,2]:(i.resetConnectionSession(null==e||null==(o=e.errorData)||null==(r=o.data)?void 0:r.errorCode),[4,i.establishSocketConnection()]);case 1:a.sent(),a.label=2;case 2:return[2]}})})()},ue)]);case 5:case 7:return[2,l.sent()];case 6:return null==(o=i.trackEvent)||o.call(i,{logger:{eventName:he,eventData:{event:e.event,socketState:i.socketState,isWsOpen:this.wsClient.isOpen(),retryAttempts:i.retryAttempts,errorCode:i.errorCode,connectionSessionId:i.connectionSessionId,connectedInitially:i.connectedInitially,lastConnAttemptTime:i.lastConnAttemptTime,currentTime:Date.now(),isFallbackEnabled:i.isFallbackEnabled,fromQueue:e.fromQueue||!1}}}),[4,this._sendViaHttp(e,n)]}})}).call(this)}},{key:"sendViaSocket",value:function(e){var t=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=this.transport;return new Promise(function(o,i){var a=e.eventTimestamp||Date.now(),s=e.eventId||ie(a);if(n){var u=setTimeout(function(){var e;r.pendingAcks.has(s)&&(null==(e=r.pendingAcks.get(s))||e.reject({shouldRetry:!0,errorData:{data:{errorCode:W.TIMEOUT}}}),r.pendingAcks.delete(s))},r.recoveryConfig.message.ackTimeout);r.pendingAcks.set(s,{resolve:o,reject:i,timeout:u})}t.wsClient.send({event:e.event,data:Dr(Lr({},e.data),{eventId:s,eventTimestamp:a,retryCount:e.retryCount})}),n||o(e)})}},{key:"_sendViaHttp",value:function(e,t){return Pr(function(){var n,r,o,i;return xr(this,function(a){switch(a.label){case 0:if(n=this,o=(r=this.transport).errorCode,[V.UPDATE_SURROUNDING_CONTEXT].includes(e.event))return[2];a.label=1;case 1:return a.trys.push([1,,6,7]),[V.INIT_EDITOR_V2,V.ON_CONTENT_CHANGE_V2].includes(e.event)?[4,this._sendViaHttpStream(e,t)]:[3,3];case 2:return i=a.sent(),[3,5];case 3:return[4,this._sendViaHttpFallback(e,t)];case 4:i=a.sent(),a.label=5;case 5:return[3,7];case 6:return setTimeout(function(){!n.wsClient.isOpen()&&(Object.values(j).includes(o)||r.socketState===ne.READY)&&r.establishSocketConnection({isReconnect:!0}),(r.socketState===ne.RETRY_EXHAUSTED||r.socketState===ne.ERRORED)&&(Date.now()>=r.lastConnAttemptTime+r.recoveryConfig.socket.retryTimeAfterExhaust||n.wsClient.isOpen())&&(r.socketState=ne.RETRY_EXHAUSTED,r.retryAttempts=0,r.establishSocketConnection({isReconnect:!0}))},0),[7];case 7:return[2,i]}})}).call(this)}},{key:"_sendViaHttpFallback",value:function(e,t){return Pr(function(){var n,r;return xr(this,function(o){switch(o.label){case 0:return n=this.transport,[4,vr.getInstance().sendEvent(Lr({eventData:{eventName:e.event,eventData:Dr(Lr({},e.data),{eventId:e.eventId,eventTimestamp:e.eventTimestamp}),connSessionId:n.connectionSessionId}},t&&{signal:t}))];case 1:return null==(r=o.sent().data)||r.forEach(function(e){n.handleHttpResponse({data:JSON.stringify(e)})}),[2,r]}})}).call(this)}},{key:"_sendViaHttpStream",value:function(e,t){return Pr(function(){var n;return xr(this,function(r){return n=this.transport,[2,new Promise(function(r,o){var i=!1;vr.getInstance().httpStream({eventName:e.event,eventData:Dr(Lr({},e.data),{eventId:e.eventId,eventTimestamp:e.eventTimestamp}),connSessionId:n.connectionSessionId},{onData:function(e){if(n.handleHttpResponse({data:e}),!i)try{JSON.parse(e).event===q.ACK&&(i=!0,r(e))}catch(e){}},onEnd:function(){i||(i=!0,r(null))},onError:function(e){i||(i=!0,o(e))}},{signal:t}).catch(function(e){i||(i=!0,o(e))})})]})}).call(this)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}();function Mr(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function Gr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Mr(i,r,o,a,s,"next",e)}function s(e){Mr(i,r,o,a,s,"throw",e)}a(void 0)})}}function Fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Br(e,t,n[t])})}return e}function jr(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function Wr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function zr(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function Xr(){return function(e,t,n){if(n&&n.value){var r=n.value;return n.value=function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(this.socketState===ne.NOT_INITIALIZED){var i=Error();throw i.name=z.TRANSPORT_NOT_INITIALIZED,i.message='Transport layer not initialized. Triggered by "'.concat(String(t),'" called'),this._trackTransportError(i,Se,String(t)),i}return r.apply(this,n)},n}}}var Vr=function(){var e,t;function n(){var e=this,t=this;if(!(this instanceof n))throw TypeError("Cannot call a class as a function");Br(this,"_wsClient",void 0),Br(this,"_msgController",void 0),Br(this,"_msgService",void 0),Br(this,"_connectionManager",void 0),Br(this,"lastConnAttemptTime",0),Br(this,"_onMessageCallback",void 0),Br(this,"socketState",ne.NOT_INITIALIZED),Br(this,"retryAttempts",0),Br(this,"errorCode",void 0),Br(this,"socketStateTimeout",void 0),Br(this,"connectionSessionId",void 0),Br(this,"pendingAcks",new Map),Br(this,"deviceMeta",{}),Br(this,"userMeta",{anonId:"",abIdV2:""}),Br(this,"recoveryConfig",Hn),Br(this,"connectionConfig",jn),Br(this,"connectedInitially",!1),Br(this,"authHandlers",{logout:function(e){},getIdToken:function(){return Promise.resolve("")}}),Br(this,"_devMode",{debug:!1,fallback:!1}),Br(this,"trackEvent",void 0),Br(this,"_eventCallback",void 0),Br(this,"setConnectionSessionId",function(t){e.connectionSessionId=t,e.notifyClient({eventName:re.UPDATE_CONN_ID,data:{connSessionId:t,ttl:e.recoveryConfig.message.cacheTtl}})}),Br(this,"_messageHandler",function(t){try{var n;e._msgService.handleIncoming(t.data),null==(n=e._onMessageCallback)||n.call(e,JSON.parse(t.data))}catch(e){}}),Br(this,"setReadyState",function(t){return Gr(function(){var e,n,r,o,i,a,s;return Wr(this,function(u){try{null==(e=(n=this).trackEvent)||e.call(n,{logger:{eventName:Ee,eventData:{currentTime:Date.now(),isFirstConnection:!this.connectedInitially&&!this.connectionSessionId,retryAttempt:this.retryAttempts,connectedInitially:this.connectedInitially,connSessionId:t.data.connSessionId,lastConnAttemptTime:this.lastConnAttemptTime,errorCode:this.errorCode}}}),this.setConnectionSessionId(t.data.connSessionId),this.socketState=ne.READY,this.socketStateTimeout&&clearTimeout(this.socketStateTimeout),this.retryAttempts=0,this.errorCode=void 0,this.connectedInitially=!0,this.pendingAcks.has(ae)&&(o=(r=this.pendingAcks.get(ae)).resolve,(i=r.timeout)&&clearTimeout(i),o(t),this.pendingAcks.delete(ae)),this._connectionManager.clearInitPromise()}catch(e){this._connectionManager.clearInitPromise(),(null==e||null==(s=e.errorData)||null==(a=s.data)?void 0:a.errorCode)!==W.TIMEOUT&&this._trackTransportError(e,Re,"setReadyState")}return[2]})}).call(e)}),Br(this,"establishSocketConnection",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isReconnect,n=void 0!==e&&e;return Gr(function(){return Wr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._connectionManager.establishSocketConnection({isReconnect:n})];case 1:return[2,e.sent()];case 2:return[3,3];case 3:return[2]}})}).call(t)}),Br(this,"setErroredState",function(t){e.socketState=ne.ERRORED,t&&(e.errorCode=t),e.socketStateTimeout&&clearTimeout(e.socketStateTimeout)}),Br(this,"resetConnectionSession",function(t){e.connectionSessionId=void 0,e.notifyClient({eventName:re.UPDATE_CONN_ID,data:{connSessionId:""}}),e.setErroredState(t)}),Br(this,"initialize",function(t){return Gr(function(){return Wr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.userMeta=Hr({},this.userMeta,t.userMeta),this._setConfig(t),vr.getInstance().setConfig({authHandlers:this.authHandlers,trackEvent:this.trackEvent,resetConnectionSession:this.resetConnectionSession,setConnectionSessionId:this.setConnectionSessionId,deviceMeta:this.deviceMeta,userMeta:this.userMeta,maxReconnectAttempts:this.recoveryConfig.fallback.maxRetryAttempts,baseUrl:this.connectionConfig.fallbackUrl}),[4,this.establishSocketConnection()];case 1:return e.sent(),[3,3];case 2:return[3,3];case 3:return[2]}})}).call(e)}),Br(this,"notifyClient",function(t){var n=t.eventName,r=t.data;e._eventCallback&&e._eventCallback({eventName:n,data:r})}),this._wsClient=F.getInstance(),this._wsClient.setOnCloseHandler(this._onClose.bind(this)),this._wsClient.setOnErrorHandler(this._onError.bind(this)),this._connectionManager=new Rr(this,this._wsClient),this._msgController=new Ur(this,this._wsClient),this._msgService=new Jn(this,this._msgController),Jn.setInstance(this._msgService)}return e=[{key:"_createAbortHandler",value:function(e,t){if(!t)return function(){};var n=function(){var t=Error("Aborted");t.reason="AbortError",e.forEach(function(e){e.closed||e.error(t)})};return t.aborted?(n(),function(){}):(t.addEventListener("abort",n),function(){t.removeEventListener("abort",n)})}},{key:"_setConfig",value:function(e){var t=e.onMessageCallback,n=e.socketClient,r=e.storageClient,o=e.deviceMeta,i=e.authHandlers,a=e.recoveryConfig,s=e.connectionConfig;this._wsClient=n||this._wsClient,r&&Tn(function(){return Sn(this,function(e){return Rn=Promise.resolve(r),[2]})})(),this.deviceMeta=o||this.deviceMeta,this.authHandlers=i||this.authHandlers,this.recoveryConfig=a||this.recoveryConfig,this.connectionConfig=s||this.connectionConfig,this.trackEvent=e.trackEvents,this._onMessageCallback=t,this._wsClient.setInitialConfig({onMessageCallback:this._messageHandler,url:this.connectionConfig.socketUrl})}},{key:"handleHttpResponse",value:function(e){this._messageHandler(e)}},{key:"isFallbackEnabled",get:function(){return this._devMode.fallback}},{key:"_trackTransportError",value:function(e,t,n){var r,o,i;null==(r=this.trackEvent)||r.call(this,{logger:{eventName:le,eventData:(o=Hr({category:Te,errorOrigin:t,error:Gn(e)},this.userMeta),i=i={method:n},Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))}),o)}})}},{key:"_onClose",value:function(e){this.setErroredState((null==e?void 0:e.reason)||(null==e||null==(t=e.code)?void 0:t.toString())),Pe({error:e,transport:n.getInstance()});var t,r,o,i=Array.from(this.pendingAcks.keys()).filter(function(e){return e!==ae});i.length>0&&(null==(o=this.trackEvent)||o.call(this,{logger:{eventName:Ae,eventData:{currentTime:Date.now(),pendingCount:i.length,errorCode:null==e?void 0:e.code,errorReason:null==e?void 0:e.reason,retryAttempts:this.retryAttempts,connSessionId:this.connectionSessionId,lastConnAttemptTime:this.lastConnAttemptTime}}})),null==(r=this.trackEvent)||r.call(this,{logger:{eventName:ve,eventData:{currentTime:Date.now(),code:null==e?void 0:e.code,reason:null==e?void 0:e.reason,errorCode:this.errorCode,connectedInitially:this.connectedInitially,connectionDuration:Date.now()-this.lastConnAttemptTime,retryAttempts:this.retryAttempts,socketState:this.socketState,connSessionId:this.connectionSessionId}}})}},{key:"_onError",value:function(e){this.setErroredState(void 0)}},{key:"setHttpClient",value:function(e){vr.getInstance().setHttpClient(e)}},{key:"setEventCallback",value:function(e){this._eventCallback=e}},{key:"setUserMeta",value:function(e){this.userMeta=Hr({},this.userMeta,e)}},{key:"enableDevMode",value:function(e){this._devMode=Hr({},this._devMode,e)}},{key:"contentChange",value:function(e){return this._msgService.sendMessage(V.ON_CONTENT_CHANGE,e)}},{key:"command",value:function(e){return this._msgService.sendMessage(V.ON_COMMAND,e)}},{key:"contentChangeV2",value:function(e){for(var t,n=[],r=e.processingChanges||[],o=0;o<r.length;o++)n[o]=new bt;var i=this._msgService.sendMessage(V.ON_CONTENT_CHANGE_V2,e,!0).pipe(Kt()),a=this._createAbortHandler(n,e.signal);if(null==(t=e.signal)?void 0:t.aborted)return n;var s=i.subscribe({next:function(e){var t=e.changeIndex;void 0!==t&&n[t]&&!n[t].closed&&(n[t].next(e),("complete"===e.type||"request-complete"===e.type)&&n[t].complete())},error:function(e){n.forEach(function(t){return!t.closed&&t.error(e)}),u()},complete:function(){n.forEach(function(e){e.closed||e.complete()}),u()}}),u=function(){a(),s.unsubscribe()};return n}},{key:"commandV2",value:function(e){for(var t=[],n=e.context||[],r=0;r<n.length;r++)t[r]=new bt;var o="v2"===e.editorSchemaVersion;return this._msgService.sendMessage(V.ON_COMMAND,e,o).pipe(Kt()).subscribe({next:function(e){var n=e.changeIndex;void 0!==n&&t[n]&&!t[n].closed&&(t[n].next(e),("complete"===e.type||"request-complete"===e.type)&&t[n].complete())},error:function(e){t.forEach(function(t){return!t.closed&&t.error(e)})},complete:function(){t.forEach(function(e){e.closed||e.complete()})}}),t}},{key:"updateEditorContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Gr(function(){return Wr(this,function(n){return[2,this._msgService.updateEditorContent(e,t)]})}).call(this)}},{key:"updateConnectionSession",value:function(e){return Gr(function(){var t;return Wr(this,function(n){switch(n.label){case 0:return t={event:V.UPDATE_CONNECTION,data:{deviceMeta:Hr({},this.deviceMeta,null==e?void 0:e.deviceMeta),userMeta:Hr({},e.userMeta)}},[4,this._msgController.send(t,!0)];case 1:return n.sent(),[2]}})}).call(this)}},{key:"terminateEditorGroup",value:function(e){return Gr(function(){var t;return Wr(this,function(n){switch(n.label){case 0:return t={event:V.TERMINATE_EDITOR_GROUP,data:e},[4,this._msgController.send(t)];case 1:return n.sent(),[2]}})}).call(this)}},{key:"setActiveEditorGroup",value:function(e){return Gr(function(){var t;return Wr(this,function(n){switch(n.label){case 0:return t={event:V.SET_ACTIVE_EDITOR_GROUP,data:{editorGroupId:e.editorGroupId}},[4,this._msgController.send(t)];case 1:return n.sent(),[2]}})}).call(this)}},{key:"closeConnection",value:function(){this._wsClient.close()}},{key:"initWritingSession",value:function(e){return Gr(function(){var t,n,r;return Wr(this,function(o){switch(o.label){case 0:return n={event:V.INIT_WRITING_SESSION,data:e},[4,this._msgController.send(n)];case 1:return[2,null==(r=o.sent())||null==(t=r.data)?void 0:t.writingSessionId]}})}).call(this)}},{key:"updateSurroundingContext",value:function(e){return Gr(function(){var t;return Wr(this,function(n){switch(n.label){case 0:return t={event:V.UPDATE_SURROUNDING_CONTEXT,data:e},[4,this._msgController.send(t)];case 1:return[2,n.sent()]}})}).call(this)}},{key:"forceSyncEditorContent",value:function(e){return Gr(function(){var t;return Wr(this,function(n){switch(n.label){case 0:return t={event:V.FORCE_SYNC_EDITOR,data:e},[4,this._msgController.send(t)];case 1:return[2,n.sent()]}})}).call(this)}}],t=[{key:"getInstance",value:function(){return n._instance||(n._instance=new n),n._instance}}],e&&Fr(n.prototype,e),t&&Fr(n,t),n}();function qr(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function Kr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){qr(i,r,o,a,s,"next",e)}function s(e){qr(i,r,o,a,s,"throw",e)}a(void 0)})}}function Yr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){var c=[s,u];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}Br(Vr,"_instance",null),jr([Xr(),zr("design:type",Function),zr("design:paramtypes",["undefined"==typeof OnChangeData?Object:OnChangeData,void 0]),zr("design:returntype",Promise)],Vr.prototype,"updateEditorContent",null),jr([Xr(),zr("design:type",Function),zr("design:paramtypes",["undefined"==typeof UpdateConnectionSessionData?Object:UpdateConnectionSessionData]),zr("design:returntype",Promise)],Vr.prototype,"updateConnectionSession",null),jr([Xr(),zr("design:type",Function),zr("design:paramtypes",["undefined"==typeof TabInfo?Object:TabInfo]),zr("design:returntype",Promise)],Vr.prototype,"setActiveEditorGroup",null);var Zr=function(e,t,n){return Kr(function(){var r,o,i,a,s,u,c,l,d,f;return Yr(this,function(h){switch(h.label){case 0:switch(r=e.requestEventId,o=e.event,i=Vr.getInstance(),a=Jn.getInstance(),s=function(e){return Kr(function(){var t,n;return Yr(this,function(r){switch(r.label){case 0:i.socketState=ne.AUTH_SUCCESS,r.label=1;case 1:return r.trys.push([1,4,,5]),i.setConnectionSessionId(e.data.connSessionId),[4,a.updateSocketConn()];case 2:return r.sent(),[4,i.setReadyState(e)];case 3:return r.sent(),a.processPending(),[3,5];case 4:return t=r.sent(),i.setErroredState(null==t||null==(n=t.data)?void 0:n.errorCode),i.establishSocketConnection({isReconnect:!0}),[3,5];case 5:return[2]}})})()},u=function(e){try{var t=n["".concat(e.requestEventId,"_").concat(e.data.changeIndex)];if(!t)return;t.next(e)}catch(e){}},o){case J.AUTH_SUCCESS:return[3,1];case J.PROCESSING_SUCCESS:return[3,3];case J.ACK:return[3,4];case $.AUTH_FAILED:return[3,5];case $.PROCESSING_FAILED:return[3,7];case $.ACK_FAILED:return[3,8];case J.PING:return[3,9];case Q.SURROUNDING_CONTEXT_SYNC_REQUIRED:return[3,10];case Q.CONTENT_SYNC_REQUIRED:return[3,11]}return[3,12];case 1:return[4,s(e)];case 2:case 6:return h.sent(),[3,13];case 3:return u(e),a.sendAck({data:{responseEventId:e.eventId}}),[3,13];case 4:return se({requestEventId:r,pendingAcks:t,eventData:e,ackType:ee.RESOLVE,transport:i}),[3,13];case 5:return[4,Pe({transport:i,error:e})];case 7:return u(e),[3,13];case 8:return se({requestEventId:r,pendingAcks:t,eventData:e,ackType:ee.REJECT,transport:i}),[3,13];case 9:return a.sendPong(),[3,13];case 10:return null==(c=i.trackEvent)||c.call(i,{logger:{eventName:fe,eventData:{editorId:e.data.editorId}}}),i.notifyClient({eventName:Oe.SURROUNDING_CONTEXT_SYNC_REQUIRED,data:{editorId:e.data.editorId,editorGroupId:e.data.editorGroupId,writingSessionId:e.data.writingSessionId}}),[3,13];case 11:return null==(d=i.trackEvent)||d.call(i,{logger:{eventName:de,eventData:{editorId:e.data.editorId,type:"content",serverDocumentHash:e.data.currentDocumentHash,sentOtHash:e.data.fullContentHash,clientDocumentHash:null==(l=a.getActiveEditor(e.data.editorId))?void 0:l.fullContentHash}}}),(null==(f=a.getActiveEditor(e.data.editorId))?void 0:f.fullContentHash)===e.data.currentDocumentHash?[2]:(i.notifyClient({eventName:Oe.CONTENT_SYNC_REQUIRED,data:{editorId:e.data.editorId,editorGroupId:e.data.editorGroupId}}),[3,13]);case 12:return[3,13];case 13:return[2]}})})()};!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fc623c99-c34d-5b50-a628-5b64c70558e4")}catch(e){}}()},32979:(e,t,n)=>{"use strict";n(10028)},34265:(e,t,n)=>{"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{A:()=>r})},35599:(e,t,n)=>{"use strict";n.d(t,{p:()=>E});var r,o=n(77431),i=n(77001),a=n(82561),s=n(35672),u=n(31600),c=n(94175),l=n(10028);function d(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return f(c,"_invoke",function(n,r,o){var i,s,u,c=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,u=e,f.n=n,a}};function h(n,r){for(s=n,u=r,t=0;!d&&c&&!o&&t<l.length;t++){var o,i=l[t],h=f.p,p=i[2];n>3?(o=p===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,p),s=l,u=p;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,u)):f.n=u:f.v=u);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==a)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(n,o,i),!0),c}var a={};function s(){}function u(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(f(t={},r,function(){return this}),t),h=c.prototype=s.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,f(e,o,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=c,f(h,"constructor",c),f(c,"constructor",u),u.displayName="GeneratorFunction",f(c,o,"GeneratorFunction"),f(h),f(h,o,"Generator"),f(h,r,function(){return this}),f(h,"toString",function(){return"[object Generator]"}),(d=function(){return{w:i,m:p}})()}function f(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}f=function(e,t,n,r){function i(t,n){f(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},f(e,t,n,r)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=u.Ay.get(u.OJ.EXTN_PREFIX);function _(e,t,n){var r=new CustomEvent(t,{detail:n,cancelable:!0});return e.dispatchEvent(r)}h((0,i.A)(function e(){(0,a.A)(this,e)}),"eventNames",{sentenceRangesChecked:"".concat(p,"-environmentAdapter.sentenceRangesChecked"),incrementalCheckResponseReceived:"".concat(p,"-environmentAdapter.incrementalCheckResponseReceived")});var E=(h(r=function(){return(0,i.A)(function e(){(0,a.A)(this,e)},null,[{key:"_onMessage",value:(e=(0,o.A)(d().m(function e(t){var n,r,o,i,a,u,f,h,p,_,E,g,m,v,b,y,A,T,S,R;return d().w(function(e){for(;;)switch(e.p=e.n){case 0:S=!0,e.n=S===("sentence-splitter-response"===t.command)?1:S===("reintialize-writing-session"===t.command)?2:S===(t.command===s.I.EDITOR_STATE_SYNC_ACK)?7:S===(t.command===s.I.EDITOR_STATE_FORCE_SYNC)?8:S===(t.command===s.I.EDITOR_SURROUNDING_CONTEXT_FORCE_SYNC)?9:S===("incremental-check-response"===t.command)?10:11;break;case 1:return n=t.payload,r=n.checkTimestamp,o=n.sentenceRangesCheckedText,i=n.sentenceRangesCheckResult,a=n.sentenceRanges,this.updateSentenceRanges(o,i,r,a),e.a(2,Promise.resolve());case 2:if(u=t.payload,f=u.sessionId,h=u.resolve,p=u.reject,f){e.n=3;break}return e.a(2,Promise.reject("writing session not found"));case 3:return e.p=3,e.n=4,c.j.getInstance((0,l.bp)()).reIntializeWritingSession(f);case 4:null==h||h(),e.n=6;break;case 5:e.p=5,R=e.v,null==p||p(R);case 6:return e.a(3,12);case 7:return _=t.payload,this.onEditorStateSyncAck(_),e.a(3,12);case 8:return E=t.payload,this.onEditorStateForceSync(E),e.a(3,12);case 9:return g=t.payload,this.onEditorSurroundingContextForceSync(g),e.a(3,12);case 10:return m=t.payload,v=m.currentCheckedText,b=m.data,y=m.instanceId,A=m.paragraph,T=m.previousCheckedText,this.incrementalCheck(y,b,v,T,A),e.a(2);case 11:return e.a(2,Promise.resolve());case 12:return e.a(2)}},e,this,[[3,5]])})),function(t){return e.apply(this,arguments)})},{key:"init",value:function(e){this._instance?this._instance=e:(this._instance=e,this.addEventListener())}},{key:"onEditorStateForceSync",value:function(e){_(document,s.I.EDITOR_STATE_FORCE_SYNC,e)}},{key:"onEditorSurroundingContextForceSync",value:function(e){_(document,s.I.EDITOR_SURROUNDING_CONTEXT_FORCE_SYNC,e)}},{key:"onEditorStateSyncAck",value:function(e){_(document,s.I.EDITOR_STATE_SYNC_ACK,e)}},{key:"isProductionEnvironment",value:function(){return this._instance.isProductionEnvironment()}},{key:"addEventListener",value:function(){var e=this;return this._instance.addEventListener(function(t){return e._onMessage(t)})}},{key:"isRuntimeConnected",value:function(){return this._instance.isRuntimeConnected()}},{key:"getVersion",value:function(){return this._instance.getVersion()}},{key:"getTrackingId",value:function(){return this._instance.getTrackingId()}},{key:"getPinnedState",value:function(){return this._instance.getPinnedState()}},{key:"shouldTrack",value:function(){return this._instance.shouldTrack()}},{key:"getType",value:function(){return this._instance.getType()}},{key:"getBeforeUnloadEventName",value:function(){return this._instance.getBeforeUnloadEventName()}},{key:"getURL",value:function(e){return this._instance.getURL(e)}},{key:"getUILanguageCode",value:function(){return this._instance.getUILanguageCode()}},{key:"openWindow",value:function(e){return this._instance.openWindow(e)}},{key:"canLoadContentScripts",value:function(e){return this._instance.canLoadContentScripts(e)}},{key:"loadContentScripts",value:function(e,t){return this._instance.loadContentScripts(e,t)}},{key:"loadStylesheets",value:function(e,t){return this._instance.loadStylesheets(e,t)}},{key:"injectShadowStyles",value:function(e){return this._instance.injectShadowStyles(e)}},{key:"initializeLTAssistant",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._instance.initializeLTAssistant(e,t)}},{key:"getPreferredLanguages",value:function(){return this._instance.getPreferredLanguages()}},{key:"startDictionarySync",value:function(){return this._instance.startDictionarySync()}},{key:"addWordToDictionary",value:function(e){return this._instance.addWordToDictionary(e)}},{key:"addWordsToDictionary",value:function(e){return this._instance.addWordsToDictionary(e)}},{key:"removeWordFromDictionary",value:function(e){return this._instance.removeWordFromDictionary(e)}},{key:"clearDictionary",value:function(){return this._instance.clearDictionary()}},{key:"updateDictionary",value:function(){return this._instance.updateDictionary()}},{key:"updateSentenceRanges",value:function(e,t,n,r){this._instance.updateSentenceRanges(e,t,n,r)}},{key:"incrementalCheck",value:function(e,t,n,r,o){this._instance.incrementalCheck(e,t,n,r,o)}},{key:"injectExecutor",value:function(){return this._instance.injectExecutor()}},{key:"destroyExecutor",value:function(){return this._instance.destroyExecutor()}},{key:"executeScript",value:function(e,t){return this._instance.executeScript(e,t)}},{key:"linkInputAreaProperties",value:function(e){return this._instance.linkInputAreaProperties(e)}},{key:"ping",value:function(){return this._instance.ping()}},{key:"loadSynonyms",value:function(e,t,n){return this._instance.loadSynonyms(e,t,n)}},{key:"abortSynonymsRequest",value:function(){return this._instance.abortSynonymsRequest()}},{key:"loadPhrases",value:function(e,t,n,r,o,i){return this._instance.loadPhrases(e,t,n,r,o,i)}},{key:"initializeUserActivity",value:function(e){return this._instance.initializeUserActivity(e)}},{key:"sendUserActivityPings",value:function(e){return this._instance.sendUserActivityPings(e)}},{key:"updateUserActivityTextStatistics",value:function(e,t){return this._instance.updateUserActivityTextStatistics(e,t)}},{key:"updateUserActivityAppliedSuggestions",value:function(e,t,n){return this._instance.updateUserActivityAppliedSuggestions(e,t,n)}},{key:"updateUserActivityAppliedRewritings",value:function(e){return this._instance.updateUserActivityAppliedRewritings(e)}},{key:"updateUserActivityMeta",value:function(e,t){return this._instance.updateUserActivityMeta(e,t)}},{key:"sendUserActivity",value:function(e){return this._instance.sendUserActivity(e)}},{key:"destroyUserActivity",value:function(e){return this._instance.destroyUserActivity(e)}},{key:"abortPhraseRequests",value:function(e){return this._instance.abortPhraseRequests(e)}},{key:"abortTranslateRequest",value:function(e){this._instance.abortTranslateRequest(e)}},{key:"loadSplitSentence",value:function(e,t,n,r,o){return this._instance.loadSplitSentence(e,t,n,r,o)}},{key:"trackEvent",value:function(e,t){return this._instance.trackEvent(e,t)}},{key:"pageLoaded",value:function(e,t,n,r,o){return this._instance.pageLoaded(e,t,n,r,o)}},{key:"ltAssistantStatusChanged",value:function(e,t){return"number"==typeof e?this._instance.ltAssistantStatusChanged(e,t):this._instance.ltAssistantStatusChanged(e)}},{key:"check",value:function(e,t,n,r,o,i,a,s,u){return this._instance.check(e,t,n,r,o,i,a,s,u)}},{key:"createWritingSession",value:function(e,t){return this._instance.createWritingSession(e,t)}},{key:"fetchRecommendationForSentence",value:function(e){return this._instance.fetchRecommendationForSentence(e)}},{key:"unlockRecommendation",value:function(e){return this._instance.unlockRecommendation(e)}},{key:"translateText",value:function(e){return this._instance.translateText(e)}},{key:"isOptionsPageSupported",value:function(){return this._instance.isOptionsPageSupported()}},{key:"openOptionsPage",value:function(e,t){return this._instance.openOptionsPage(e,t)}},{key:"isFeedbackFormSupported",value:function(){return this._instance.isFeedbackFormSupported()}},{key:"openFeedbackForm",value:function(e,t,n){return this._instance.openFeedbackForm(e,t,n)}},{key:"openPremiumPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5?arguments[5]:void 0;return this._instance.openPremiumPage(e,t,n,r,o,i)}},{key:"updateSurroundingTextContext",value:function(e){return this._instance.updateSurroundingTextContext(e)}},{key:"forceSyncEditorState",value:function(e){return this._instance.forceSyncEditorState(e)}},{key:"checkForPaidSubscription",value:function(){return this._instance.checkForPaidSubscription()}},{key:"canUseShadowDom",value:function(){return this._instance.canUseShadowDom()}},{key:"abortAllRequests",value:function(e){return this._instance.abortAllRequests(e)}},{key:"getTermsOfServiceInfo",value:function(e){return this._instance.getTermsOfServiceInfo(e)}},{key:"acceptTermsOfService",value:function(e){return this._instance.acceptTermsOfService(e)}},{key:"syncUserData",value:function(){return this._instance.syncUserData()}}]);var e}(),"_instance",void 0),r)},35672:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var r={EDITOR_STATE_SYNC_ACK:"EDITOR_STATE_SYNC_ACK",EDITOR_STATE_FORCE_SYNC:"EDITOR_STATE_FORCE_SYNC",EDITOR_SURROUNDING_CONTEXT_FORCE_SYNC:"EDITOR_SURROUNDING_CONTEXT_FORCE_SYNC"}},35957:(e,t,n)=>{"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{A:()=>r})},36111:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(71158);function o(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},36441:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(35957),o=n(26270),i=n(96492),a=n(97710);function s(e,t){return(0,r.A)(e)||(0,o.A)(e,t)||(0,i.A)(e,t)||(0,a.A)()}},38085:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{A:()=>r})},40818:(e,t,n)=>{"use strict";n.d(t,{fw:()=>s});var r=n(77431),o=n(46397);function i(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function s(n,r,o,i){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return a(l,"_invoke",function(n,r,o){var i,a,s,c=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,a=0,s=e,f.n=n,u}};function h(n,r){for(a=n,s=r,t=0;!d&&c&&!o&&t<l.length;t++){var o,i=l[t],h=f.p,p=i[2];n>3?(o=p===r)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(a=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,a=0))}if(o||n>1)return u;throw d=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,p),a=l,s=p;(t=a<2?e:s)||!d;){i||(a?a<3?(a>1&&(f.n=-1),h(a,s)):f.n=s:f.v=s);try{if(c=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==u)break}catch(t){i=e,a=1,s=t}finally{c=1}}return{value:t,done:d}}}(n,o,i),!0),l}var u={};function c(){}function l(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(a(t={},r,function(){return this}),t),h=d.prototype=c.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,o,"GeneratorFunction")),e.prototype=Object.create(h),e}return l.prototype=d,a(h,"constructor",d),a(d,"constructor",l),l.displayName="GeneratorFunction",a(d,o,"GeneratorFunction"),a(h),a(h,o,"Generator"),a(h,r,function(){return this}),a(h,"toString",function(){return"[object Generator]"}),(i=function(){return{w:s,m:p}})()}function a(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,n,r){function i(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},a(e,t,n,r)}var s=function(e){return new Promise(function(){var t=(0,r.A)(i().m(function t(n){var r;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,(0,o.O)().storage.local.get(e);case 1:r=t.v,n(r[e]);case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())}},43057:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(61927);function o(e,t){if(null==e)return{};var n,o,i=(0,r.A)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},43751:(e,t,n)=>{"use strict";var r=n(87526),o=n(82561),i=n(77001),a=n(22412),s=n(10028);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l,d,f,h=function(){function e(){(0,o.A)(this,e)}return(0,i.A)(e,null,[{key:"merge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.filterAndMigrateErrors(e.existing.errors,e.existing.pickyErrors,e.existing.premiumErrors,e.existing.premiumPickyErrors,e.existing.recommendationErrors,e.existing.sentenceRanges,e.existingCheckedText,e.newCheckedText,e.existingRecommendationCheckedText,e.newRecommendationCheckedText,n,o),s=i.errors,u=i.pickyErrors,c=i.premiumErrors,l=i.premiumPickyErrors,d=i.sentenceRanges,f=void 0===d?[]:d,h=i.recommendationErrors,p=void 0===h?[]:h;this.mergeParagraphLevelErrors(s,u,c,l,p,f,e.new.paragraphLevel.errors,e.new.paragraphLevel.pickyErrors,e.new.paragraphLevel.premiumErrors,e.new.paragraphLevel.premiumPickyErrors,e.new.paragraphLevel.recommendationErrors||[],e.new.paragraphLevel.sentenceRanges),this.mergeTextLevelErrors(s,u,c,l,e.new.textLevel.errors,e.new.textLevel.pickyErrors,e.new.textLevel.premiumErrors,e.new.textLevel.premiumPickyErrors);var _=this.getDuplicateErrors(e.existing,e.existingCheckedText,e.newCheckedText,e.existingRecommendationCheckedText,e.newRecommendationCheckedText);return this.sortErrors(s,u,c,l,p),this.setIdsOnErrors(s,u,c,l,p,_),s=this.migrateOffsetsToOriginalText(s,e.newCheckedText.usedParts),u=this.migrateOffsetsToOriginalText(u,e.newCheckedText.usedParts),c=this.migrateOffsetsToOriginalText(c,e.newCheckedText.usedParts),l=this.migrateOffsetsToOriginalText(l,e.newCheckedText.usedParts),p=this.migrateOffsetsToOriginalText(p,e.newRecommendationCheckedText.usedParts),f=this.migrateOffsetsToOriginalText(f,e.newCheckedText.usedParts),t&&((u=u.filter(function(e){return!a.PICKY_RULES_THAT_ARE_CONSIDERED_ANNOYING.includes(e.rule.id)})).forEach(function(e){e.rule.id="HIDDEN_RULE",e.fixes=[]}),c=[].concat((0,r.A)(c),(0,r.A)(l),(0,r.A)(u)),l=[],u=[],this.sortErrorsByOffset(c)),{errors:s,pickyErrors:u,premiumErrors:c,premiumPickyErrors:l,recommendationErrors:p,sentenceRanges:f}}},{key:"getDuplicateErrors",value:function(e,t,n,r,o){var i=e.errors,a=e.pickyErrors,u=e.premiumErrors,c=e.premiumPickyErrors,l=e.recommendationErrors,d=void 0===l?[]:l;i=this.migrateOffsetsToValuableText(i,t.usedParts),a=this.migrateOffsetsToValuableText(a,t.usedParts),u=this.migrateOffsetsToValuableText(u,t.usedParts),c=this.migrateOffsetsToValuableText(c,t.usedParts),d=this.migrateOffsetsToValuableText(d,r.usedParts);var f=(0,s.hT)(t.text,n.text),h=(0,s.hT)(r.text,o.text),p=function(e,t){if(!e.isParagraphLevelCheck)return!0;var n=(0,s.El)(t,function(t){var n=t.oldOffset;if(null===t.oldText)return e.start>=n?1:-1;var r=t.oldOffset+t.oldText.length+1;return(0,s.f0)(e.start,n,r,!0)});return!(!n||!n.textDiff)||void 0};return i=i.filter(function(e){return p(e,f)}),a=a.filter(function(e){return p(e,f)}),u=u.filter(function(e){return p(e,f)}),c=c.filter(function(e){return p(e,f)}),d=d.filter(function(e){return p(e,h)}),{errors:i=this.migrateOffsetsBetweenTexts(i,f),pickyErrors:a=this.migrateOffsetsBetweenTexts(a,f),premiumErrors:u=this.migrateOffsetsBetweenTexts(u,f),premiumPickyErrors:c=this.migrateOffsetsBetweenTexts(c,f),recommendationErrors:d=this.migrateOffsetsBetweenTexts(d,h)}}},{key:"migrateOffsetsToValuableText",value:function(e,t){var n,r=[],o=u(e);try{var i=function(){var e=n.value,o=(0,s.El)(t,function(t){return(0,s.f0)(e.start,t.originalStart,t.originalEnd,!0)}),i=(0,s.El)(t,function(t){return(0,s.f0)(e.end,t.originalStart,t.originalEnd)});if(!o||!i)return 1;var a=(0,s.Go)(e);a.start-=o.posDiff,a.end-=i.posDiff,a.length=a.end-a.start,r.push(a)};for(o.s();!(n=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}return r}},{key:"migrateOffsetsBetweenTexts",value:function(e,t,n,r,o,i){var a,c=!1,l=!1,d=!1;"string"==typeof t&&"string"==typeof n?(a=(0,s.hT)(t,n),c="boolean"==typeof r&&r,l="boolean"==typeof o&&o,d="boolean"==typeof i&&i):(a=t,c="boolean"==typeof n&&n,l="boolean"==typeof r&&r,d="boolean"==typeof o&&o);var f,h=[],p=u(e);try{var _=function(){var e=f.value,t=(0,s.El)(a,function(t){var n=t.oldOffset;if(null===t.oldText)return e.start>=n?1:-1;var r=t.oldOffset+t.oldText.length+1;return(0,s.f0)(e.start,n,r,!0)}),n=(0,s.Go)(e);if(t){var r;if(t.textDiff){if(c)return 0;var o=t.oldOffset+t.textDiff.from,i=o+t.textDiff.oldFragment.length,u=!l;if((0,s.mP)(o,i,n.start,n.end,u)){if(d){var p,_=t.textDiff.newFragment.length-t.textDiff.oldFragment.length;n.start>o&&(n.start=n.start+_),n.end>=o&&(n.end=n.end+_),n.length=n.end-n.start,null==n||null===(p=n.rule)||void 0===p||null===(p=p.phraseDiff)||void 0===p||p.forEach(function(e){var n=t.textDiff.newFragment.length-t.textDiff.oldFragment.length;e.sourceStart>o&&(e.sourceStart+=n),e.sourceEnd>o&&(e.sourceEnd+=n)}),h.push(n)}return 0}if(n.start>=i){var E,g=t.textDiff.newFragment.length-t.textDiff.oldFragment.length;n.start+=g,n.end+=g,null==n||null===(E=n.rule)||void 0===E||null===(E=E.phraseDiff)||void 0===E||E.forEach(function(e){e.sourceStart+=g,e.sourceEnd+=g,e.targetEnd+=g,e.targetStart+=g})}}n.start+=t.newOffset-t.oldOffset,n.end=n.start+n.length,null==n||null===(r=n.rule)||void 0===r||null===(r=r.phraseDiff)||void 0===r||r.forEach(function(e){var n=e.sourceEnd-e.sourceStart,r=e.targetEnd-e.targetStart;e.sourceStart+=t.newOffset-t.oldOffset,e.sourceEnd=e.sourceStart+n,e.targetStart+=t.newOffset-t.oldOffset,e.targetEnd=e.targetStart+r})}h.push(n)};for(p.s();!(f=p.n()).done;)_()}catch(e){p.e(e)}finally{p.f()}return h}},{key:"migrateOffsetsToOriginalText",value:function(e,t){var n,r=[],o=u(e);try{var i=function(){var e=n.value,o=(0,s.El)(t,function(t){return(0,s.f0)(e.start,t.start,t.end,!0)}),i=(0,s.El)(t,function(t){return(0,s.f0)(e.end,t.start,t.end)});if(!o||!i)return 1;var a=(0,s.Go)(e);a.start+=o.posDiff,a.end+=i.posDiff,a.length=a.end-a.start,r.push(a)};for(o.s();!(n=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}return r}},{key:"filterAndMigrateErrors",value:function(e,t,n,r,o,i,a,u,c,l){var d=arguments.length>10&&void 0!==arguments[10]&&arguments[10];arguments.length>11&&void 0!==arguments[11]&&arguments[11]?o=(o||[]).filter(function(e){return e.isParagraphLevelCheck}):(e=e.filter(function(e){return e.isParagraphLevelCheck}),t=t.filter(function(e){return e.isParagraphLevelCheck}),n=n.filter(function(e){return e.isParagraphLevelCheck}),r=r.filter(function(e){return e.isParagraphLevelCheck})),e=this.migrateOffsetsToValuableText(e,a.usedParts),t=this.migrateOffsetsToValuableText(t,a.usedParts),n=this.migrateOffsetsToValuableText(n,a.usedParts),r=this.migrateOffsetsToValuableText(r,a.usedParts),o=this.migrateOffsetsToValuableText(o||[],c.usedParts),i=this.migrateOffsetsToValuableText(i||[],a.usedParts);var f=(0,s.hT)(a.text,u.text),h=(0,s.hT)(c.text,l.text);return d?(e=this.migrateOffsetsBetweenTexts(e,a.text,u.text,!1,!0),t=this.migrateOffsetsBetweenTexts(t,a.text,u.text),n=this.migrateOffsetsBetweenTexts(n,a.text,u.text),r=this.migrateOffsetsBetweenTexts(r,a.text,u.text),o=this.migrateOffsetsBetweenTexts(o,c.text,l.text,!1,!0),i=this.migrateOffsetsBetweenTexts(i,a.text,u.text,!1,!0,!0)):(e=this.migrateOffsetsBetweenTexts(e,f,!0),t=this.migrateOffsetsBetweenTexts(t,f,!0),n=this.migrateOffsetsBetweenTexts(n,f,!0),r=this.migrateOffsetsBetweenTexts(r,f,!0),o=this.migrateOffsetsBetweenTexts(o,h,!1,!1),i=this.migrateOffsetsBetweenTexts(i,f,!0)),{errors:e,pickyErrors:t,premiumErrors:n,premiumPickyErrors:r,recommendationErrors:o,sentenceRanges:i}}},{key:"mergeParagraphLevelErrors",value:function(e,t,n,o,i,a,s,u,c,l,d){var f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[];e.push.apply(e,(0,r.A)(s)),t.push.apply(t,(0,r.A)(u)),n.push.apply(n,(0,r.A)(c)),o.push.apply(o,(0,r.A)(l)),i.push.apply(i,(0,r.A)(d)),a.push.apply(a,(0,r.A)(f))}},{key:"mergeTextLevelErrors",value:function(e,t,n,r,o,i,a,s){var c,l=u(o);try{var d=function(){var t=c.value;e.some(function(e){return e.start===t.start&&e.end===t.end})||e.push(t)};for(l.s();!(c=l.n()).done;)d()}catch(e){l.e(e)}finally{l.f()}var f,h=u(i);try{var p=function(){var e=f.value;t.some(function(t){return t.start===e.start&&t.end===e.end})||t.push(e)};for(h.s();!(f=h.n()).done;)p()}catch(e){h.e(e)}finally{h.f()}var _,E=u(a);try{var g=function(){var e=_.value;n.some(function(t){return t.start===e.start&&t.end===e.end})||n.push(e)};for(E.s();!(_=E.n()).done;)g()}catch(e){E.e(e)}finally{E.f()}var m,v=u(s);try{var b=function(){var e=m.value;r.some(function(t){return t.start===e.start&&t.end===e.end})||r.push(e)};for(v.s();!(m=v.n()).done;)b()}catch(e){v.e(e)}finally{v.f()}}},{key:"sortErrors",value:function(e,t,n,r,o){this.sortErrorsByOffset(e),this.sortErrorsByOffset(t),this.sortErrorsByOffset(n),this.sortErrorsByOffset(r),this.sortErrorsByOffset(o)}},{key:"sortErrorsByOffset",value:function(e){e.sort(function(e,t){return e.start===t.start?e.isParagraphLevelCheck?1:-1:e.start>t.start?1:-1})}},{key:"migrateErrorsBetweenSameOriginalTexts",value:function(e,t,n){var r,o=[],i=u(e);try{var a=function(){var e=r.value,i=e.start,a=e.end,u=(0,s.El)(t.usedParts,function(e){return(0,s.f0)(i,e.originalStart,e.originalEnd,!0)}),c=(0,s.El)(t.usedParts,function(e){return(0,s.f0)(a,e.originalStart,e.originalEnd)});if(!u||!c)return 0;if(i-=u.posDiff,a-=c.posDiff,u=(0,s.El)(n.usedParts,function(e){return(0,s.f0)(i,e.start,e.end,!0)}),c=(0,s.El)(n.usedParts,function(e){return(0,s.f0)(a,e.start,e.end)}),!u||!c)return 0;i+=u.posDiff,a+=c.posDiff;var l=(0,s.Go)(e);l.start=i,l.end=a,l.length=a-i,o.push(l)};for(i.s();!(r=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return o}},{key:"setIdsOnErrors",value:function(t,n,r,o,i,a){function s(t,n){if(!t.id){var r=n.find(function(e){return r=t,(n=e).start===r.start&&n.end===r.end&&n.isParagraphLevelCheck===r.isParagraphLevelCheck;var n,r});t.id=r?r.id:"error:".concat(++e.INCREMENTAL_ID)}}t.forEach(function(e){return s(e,a.errors)}),n.forEach(function(e){return s(e,a.pickyErrors)}),r.forEach(function(e){return s(e,a.premiumErrors)}),o.forEach(function(e){return s(e,a.premiumPickyErrors)}),i.forEach(function(e){return s(e,a.recommendationErrors||[])})}},{key:"sortSentenceRanges",value:function(e){e.sort(function(e,t){return e.start-t.start})}}])}();f=0,(d="INCREMENTAL_ID")in(l=h)?Object.defineProperty(l,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[d]=f},44035:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{A:()=>r})},46397:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});var r=n(83131),o=n.n(r);function i(){return o()}},48249:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function g(e,t,n){this.props=e,this.context=t,this.refs=E,this.updater=n||p}function m(){}function v(e,t,n){this.props=e,this.context=t,this.refs=E,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var b=v.prototype=new m;b.constructor=v,_(b,g.prototype),b.isPureReactComponent=!0;var y=Array.isArray,A=Object.prototype.hasOwnProperty,T={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function R(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)A.call(t,o)&&!S.hasOwnProperty(o)&&(i[o]=t[o]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(o in u=e.defaultProps)void 0===i[o]&&(i[o]=u[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:T.current}}function O(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===i?"."+N(u,0):i,y(a)?(o="",null!=e&&(o=e.replace(I,"$&/")+"/"),C(a,t,o,"",function(e){return e})):null!=a&&(O(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(u=0,i=""===i?".":i+":",y(e))for(var c=0;c<e.length;c++){var l=i+N(s=e[c],c);u+=C(s,t,o,l,a)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,o,l=i+N(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function w(e,t,n){if(null==e)return e;var r=[],o=0;return C(e,r,"","",function(e){return t.call(n,e,o++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k={current:null},L={transition:null},D={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:L,ReactCurrentOwner:T};function x(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:w,forEach:function(e,t,n){w(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return w(e,function(){t++}),t},toArray:function(e){return w(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=o,t.Profiler=a,t.PureComponent=v,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=x,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=_({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=T.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)A.call(t,c)&&!S.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=R,t.createFactory=function(e){var t=R.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=x,t.useCallback=function(e,t){return k.current.useCallback(e,t)},t.useContext=function(e){return k.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return k.current.useDeferredValue(e)},t.useEffect=function(e,t){return k.current.useEffect(e,t)},t.useId=function(){return k.current.useId()},t.useImperativeHandle=function(e,t,n){return k.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.current.useMemo(e,t)},t.useReducer=function(e,t,n){return k.current.useReducer(e,t,n)},t.useRef=function(e){return k.current.useRef(e)},t.useState=function(e){return k.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.current.useTransition()},t.version="18.3.1"},49646:(e,t,n)=>{"use strict";function r(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})}function o(e,t){return function(){return e.apply(t,arguments)}}n.d(t,{eL:()=>wo}),"function"==typeof SuppressedError&&SuppressedError;const{toString:i}=Object.prototype,{getPrototypeOf:a}=Object,s=(u=Object.create(null),e=>{const t=i.call(e);return u[t]||(u[t]=t.slice(8,-1).toLowerCase())});var u;const c=e=>(e=e.toLowerCase(),t=>s(t)===e),l=e=>t=>typeof t===e,{isArray:d}=Array,f=l("undefined");const h=c("ArrayBuffer");const p=l("string"),_=l("function"),E=l("number"),g=e=>null!==e&&"object"==typeof e,m=e=>{if("object"!==s(e))return!1;const t=a(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},v=c("Date"),b=c("File"),y=c("Blob"),A=c("FileList"),T=c("URLSearchParams"),[S,R,O,I]=["ReadableStream","Request","Response","Headers"].map(c);function N(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,o;if("object"!=typeof e&&(e=[e]),d(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(r=0;r<i;r++)a=o[r],t.call(null,e[a],a,e)}}function C(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,P=e=>!f(e)&&e!==w;const k=(L="undefined"!=typeof Uint8Array&&a(Uint8Array),e=>L&&e instanceof L);var L;const D=c("HTMLFormElement"),x=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),U=c("RegExp"),M=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};N(n,(n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)}),Object.defineProperties(e,r)};const G=c("AsyncFunction"),F=(B="function"==typeof setImmediate,H=_(w.postMessage),B?setImmediate:H?(j=`axios@${Math.random()}`,W=[],w.addEventListener("message",({source:e,data:t})=>{e===w&&t===j&&W.length&&W.shift()()},!1),e=>{W.push(e),w.postMessage(j,"*")}):e=>setTimeout(e));var B,H,j,W;const z="undefined"!=typeof queueMicrotask?queueMicrotask.bind(w):"undefined"!=typeof process&&process.nextTick||F;var X={isArray:d,isArrayBuffer:h,isBuffer:function(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&_(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||_(e.append)&&("formdata"===(t=s(e))||"object"===t&&_(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&h(e.buffer),t},isString:p,isNumber:E,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:m,isReadableStream:S,isRequest:R,isResponse:O,isHeaders:I,isUndefined:f,isDate:v,isFile:b,isBlob:y,isRegExp:U,isFunction:_,isStream:e=>g(e)&&_(e.pipe),isURLSearchParams:T,isTypedArray:k,isFileList:A,forEach:N,merge:function e(){const{caseless:t}=P(this)&&this||{},n={},r=(r,o)=>{const i=t&&C(n,o)||o;m(n[i])&&m(r)?n[i]=e(n[i],r):m(r)?n[i]=e({},r):d(r)?n[i]=r.slice():n[i]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&N(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(N(t,(t,r)=>{n&&_(t)?e[r]=o(t,n):e[r]=t},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,s;const u={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],r&&!r(s,e,t)||u[s]||(t[s]=e[s],u[s]=!0);e=!1!==n&&a(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:c,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(d(e))return e;let t=e.length;if(!E(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:D,hasOwnProperty:x,hasOwnProp:x,reduceDescriptors:M,freezeMethods:e=>{M(e,(t,n)=>{if(_(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];_(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return d(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:C,global:w,isContextDefined:P,isSpecCompliantForm:function(e){return!!(e&&_(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=d(e)?[]:{};return N(e,(e,t)=>{const i=n(e,r+1);!f(i)&&(o[t]=i)}),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:G,isThenable:e=>e&&(g(e)||_(e))&&_(e.then)&&_(e.catch),setImmediate:F,asap:z};function V(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}X.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const q=V.prototype,K={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{K[e]={value:e}}),Object.defineProperties(V,K),Object.defineProperty(q,"isAxiosError",{value:!0}),V.from=(e,t,n,r,o,i)=>{const a=Object.create(q);return X.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),V.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};function Y(e){return X.isPlainObject(e)||X.isArray(e)}function Z(e){return X.endsWith(e,"[]")?e.slice(0,-2):e}function J(e,t,n){return e?e.concat(t).map(function(e,t){return e=Z(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const $=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function Q(e,t,n){if(!X.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=X.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!X.isUndefined(t[e])})).metaTokens,o=n.visitor||c,i=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&X.isSpecCompliantForm(t);if(!X.isFunction(o))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(X.isDate(e))return e.toISOString();if(!s&&X.isBlob(e))throw new V("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(e)||X.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,o){let s=e;if(e&&!o&&"object"==typeof e)if(X.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(X.isArray(e)&&function(e){return X.isArray(e)&&!e.some(Y)}(e)||(X.isFileList(e)||X.endsWith(n,"[]"))&&(s=X.toArray(e)))return n=Z(n),s.forEach(function(e,r){!X.isUndefined(e)&&null!==e&&t.append(!0===a?J([n],r,i):null===a?n:n+"[]",u(e))}),!1;return!!Y(e)||(t.append(J(o,n,i),u(e)),!1)}const l=[],d=Object.assign($,{defaultVisitor:c,convertValue:u,isVisitable:Y});if(!X.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!X.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),X.forEach(n,function(n,i){!0===(!(X.isUndefined(n)||null===n)&&o.call(t,n,X.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])}),l.pop()}}(e),t}function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function te(e,t){this._pairs=[],e&&Q(e,this,t)}const ne=te.prototype;function re(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oe(e,t,n){if(!t)return e;const r=n&&n.encode||re;X.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let i;if(i=o?o(t,n):X.isURLSearchParams(t)?t.toString():new te(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}ne.append=function(e,t){this._pairs.push([e,t])},ne.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class ie{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(t){null!==t&&e(t)})}}var ae={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},se={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:te,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ue="undefined"!=typeof window&&"undefined"!=typeof document,ce="object"==typeof navigator&&navigator||void 0,le=ue&&(!ce||["ReactNative","NativeScript","NS"].indexOf(ce.product)<0),de="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,fe=ue&&window.location.href||"http://localhost";var he={...Object.freeze({__proto__:null,hasBrowserEnv:ue,hasStandardBrowserWebWorkerEnv:de,hasStandardBrowserEnv:le,navigator:ce,origin:fe}),...se};function pe(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;if(i=!i&&X.isArray(r)?r.length:i,s)return X.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&X.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&X.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a}if(X.isFormData(e)&&X.isFunction(e.entries)){const n={};return X.forEachEntry(e,(e,r)=>{t(function(e){return X.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null}const _e={transitional:ae,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=X.isObject(e);o&&X.isHTMLForm(e)&&(e=new FormData(e));if(X.isFormData(e))return r?JSON.stringify(pe(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e)||X.isReadableStream(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Q(e,new he.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return he.isNode&&X.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=X.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Q(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(X.isString(e))try{return(t||JSON.parse)(e),X.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||_e.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(X.isResponse(e)||X.isReadableStream(e))return e;if(e&&X.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw V.from(e,V.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:he.classes.FormData,Blob:he.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],e=>{_e.headers[e]={}});const Ee=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ge=Symbol("internals");function me(e){return e&&String(e).trim().toLowerCase()}function ve(e){return!1===e||null==e?e:X.isArray(e)?e.map(ve):String(e)}function be(e,t,n,r,o){return X.isFunction(r)?r.call(this,t,n):(o&&(t=n),X.isString(t)?X.isString(r)?-1!==t.indexOf(r):X.isRegExp(r)?r.test(t):void 0:void 0)}class ye{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=me(t);if(!o)throw new Error("header name must be a non-empty string");const i=X.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=ve(e))}const i=(e,t)=>X.forEach(e,(e,n)=>o(e,n,t));if(X.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(X.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach(function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&Ee[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(X.isHeaders(e))for(const[t,r]of e.entries())o(r,t,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=me(e)){const n=X.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(X.isFunction(t))return t.call(this,e,n);if(X.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=me(e)){const n=X.findKey(this,e);return!(!n||void 0===this[n]||t&&!be(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=me(e)){const o=X.findKey(n,e);!o||t&&!be(0,n[o],o,t)||(delete n[o],r=!0)}}return X.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!be(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return X.forEach(this,(r,o)=>{const i=X.findKey(n,o);if(i)return t[i]=ve(r),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(o):String(o).trim();a!==o&&delete t[o],t[a]=ve(r),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return X.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&X.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[ge]=this[ge]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=me(e);t[r]||(!function(e,t){const n=X.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})})}(n,e),t[r]=!0)}return X.isArray(e)?e.forEach(r):r(e),this}}function Ae(e,t){const n=this||_e,r=t||n,o=ye.from(r.headers);let i=r.data;return X.forEach(e,function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function Te(e){return!(!e||!e.__CANCEL__)}function Se(e,t,n){V.call(this,null==e?"canceled":e,V.ERR_CANCELED,t,n),this.name="CanceledError"}function Re(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new V("Request failed with status code "+n.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),X.reduceDescriptors(ye.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),X.freezeMethods(ye),X.inherits(Se,V,{__CANCEL__:!0});const Oe=(e,t,n=3)=>{let r=0;const o=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const u=Date.now(),c=r[a];o||(o=u),n[i]=s,r[i]=u;let l=a,d=0;for(;l!==i;)d+=n[l++],l%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),u-o<t)return;const f=c&&u-c;return f?Math.round(1e3*d/f):void 0}}(50,250);return function(e,t){let n,r,o=0,i=1e3/t;const a=(t,i=Date.now())=>{o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-o;s>=i?a(e,t):(n=e,r||(r=setTimeout(()=>{r=null,a(n)},i-s)))},()=>n&&a(n)]}(n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,s=i-r,u=o(s);r=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&i<=a?(a-i)/u:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},Ie=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Ne=e=>(...t)=>X.asap(()=>e(...t));var Ce=he.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,he.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(he.origin),he.navigator&&/(msie|trident)/i.test(he.navigator.userAgent)):()=>!0,we=he.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];X.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),X.isString(r)&&a.push("path="+r),X.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Pe(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&r||0==n?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ke=e=>e instanceof ye?{...e}:e;function Le(e,t){t=t||{};const n={};function r(e,t,n,r){return X.isPlainObject(e)&&X.isPlainObject(t)?X.merge.call({caseless:r},e,t):X.isPlainObject(t)?X.merge({},t):X.isArray(t)?t.slice():t}function o(e,t,n,o){return X.isUndefined(t)?X.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!X.isUndefined(t))return r(void 0,t)}function a(e,t){return X.isUndefined(t)?X.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,n)=>o(ke(e),ke(t),0,!0)};return X.forEach(Object.keys(Object.assign({},e,t)),function(r){const i=u[r]||o,a=i(e[r],t[r],r);X.isUndefined(a)&&i!==s||(n[r]=a)}),n}var De=e=>{const t=Le({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:u}=t;if(t.headers=s=ye.from(s),t.url=oe(Pe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&s.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),X.isFormData(r))if(he.hasStandardBrowserEnv||he.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(he.hasStandardBrowserEnv&&(o&&X.isFunction(o)&&(o=o(t)),o||!1!==o&&Ce(t.url))){const e=i&&a&&we.read(a);e&&s.set(i,e)}return t};var xe="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=De(e);let o=r.data;const i=ye.from(r.headers).normalize();let a,s,u,c,l,{responseType:d,onUploadProgress:f,onDownloadProgress:h}=r;function p(){c&&c(),l&&l(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let _=new XMLHttpRequest;function E(){if(!_)return;const r=ye.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders());Re(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?_.response:_.responseText,status:_.status,statusText:_.statusText,headers:r,config:e,request:_}),_=null}_.open(r.method.toUpperCase(),r.url,!0),_.timeout=r.timeout,"onloadend"in _?_.onloadend=E:_.onreadystatechange=function(){_&&4===_.readyState&&(0!==_.status||_.responseURL&&0===_.responseURL.indexOf("file:"))&&setTimeout(E)},_.onabort=function(){_&&(n(new V("Request aborted",V.ECONNABORTED,e,_)),_=null)},_.onerror=function(){n(new V("Network Error",V.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||ae;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new V(t,o.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,e,_)),_=null},void 0===o&&i.setContentType(null),"setRequestHeader"in _&&X.forEach(i.toJSON(),function(e,t){_.setRequestHeader(t,e)}),X.isUndefined(r.withCredentials)||(_.withCredentials=!!r.withCredentials),d&&"json"!==d&&(_.responseType=r.responseType),h&&([u,l]=Oe(h,!0),_.addEventListener("progress",u)),f&&_.upload&&([s,c]=Oe(f),_.upload.addEventListener("progress",s),_.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{_&&(n(!t||t.type?new Se(null,e,_):t),_.abort(),_=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===he.protocols.indexOf(g)?n(new V("Unsupported protocol "+g+":",V.ERR_BAD_REQUEST,e)):_.send(o||null)})};const Ue=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof V?t:new Se(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,o(new V(`timeout ${t} of ms exceeded`,V.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)}),e=null)};e.forEach(e=>e.addEventListener("abort",o));const{signal:s}=r;return s.unsubscribe=()=>X.asap(a),s}},Me=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},Ge=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Fe=(e,t,n,r)=>{const o=async function*(e,t){for await(const n of Ge(e))yield*Me(n,t)}(e,t);let i,a=0,s=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return s(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(e){throw s(e),e}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},Be="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,He=Be&&"function"==typeof ReadableStream,je=Be&&("function"==typeof TextEncoder?(We=new TextEncoder,e=>We.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var We;const ze=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Xe=He&&ze(()=>{let e=!1;const t=new Request(he.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ve=He&&ze(()=>X.isReadableStream(new Response("").body)),qe={stream:Ve&&(e=>e.body)};var Ke;Be&&(Ke=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!qe[e]&&(qe[e]=X.isFunction(Ke[e])?t=>t[e]():(t,n)=>{throw new V(`Response type '${e}' is not supported`,V.ERR_NOT_SUPPORT,n)})}));const Ye=async(e,t)=>{const n=X.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(X.isBlob(e))return e.size;if(X.isSpecCompliantForm(e)){const t=new Request(he.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return X.isArrayBufferView(e)||X.isArrayBuffer(e)?e.byteLength:(X.isURLSearchParams(e)&&(e+=""),X.isString(e)?(await je(e)).byteLength:void 0)})(t):n};var Ze=Be&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:u,responseType:c,headers:l,withCredentials:d="same-origin",fetchOptions:f}=De(e);c=c?(c+"").toLowerCase():"text";let h,p=Ue([o,i&&i.toAbortSignal()],a);const _=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let E;try{if(u&&Xe&&"get"!==n&&"head"!==n&&0!==(E=await Ye(l,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(X.isFormData(r)&&(e=n.headers.get("content-type"))&&l.setContentType(e),n.body){const[e,t]=Ie(E,Oe(Ne(u)));r=Fe(n.body,65536,e,t)}}X.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;h=new Request(t,{...f,signal:p,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0});let i=await fetch(h);const a=Ve&&("stream"===c||"response"===c);if(Ve&&(s||a&&_)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=i[t]});const t=X.toFiniteNumber(i.headers.get("content-length")),[n,r]=s&&Ie(t,Oe(Ne(s),!0))||[];i=new Response(Fe(i.body,65536,n,()=>{r&&r(),_&&_()}),e)}c=c||"text";let g=await qe[X.findKey(qe,c)||"text"](i,e);return!a&&_&&_(),await new Promise((t,n)=>{Re(t,n,{data:g,headers:ye.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:h})})}catch(t){if(_&&_(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new V("Network Error",V.ERR_NETWORK,e,h),{cause:t.cause||t});throw V.from(t,t&&t.code,e,h)}});const Je={http:null,xhr:xe,fetch:Ze};X.forEach(Je,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const $e=e=>`- ${e}`,Qe=e=>X.isFunction(e)||null===e||!1===e;var et=e=>{e=X.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!Qe(n)&&(r=Je[(t=String(n)).toLowerCase()],void 0===r))throw new V(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new V("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map($e).join("\n"):" "+$e(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function tt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Se(null,e)}function nt(e){tt(e),e.headers=ye.from(e.headers),e.data=Ae.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return et(e.adapter||_e.adapter)(e).then(function(t){return tt(e),t.data=Ae.call(e,e.transformResponse,t),t.headers=ye.from(t.headers),t},function(t){return Te(t)||(tt(e),t&&t.response&&(t.response.data=Ae.call(e,e.transformResponse,t.response),t.response.headers=ye.from(t.response.headers))),Promise.reject(t)})}const rt="1.8.3",ot={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ot[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const it={};ot.transitional=function(e,t,n){return(r,o,i)=>{if(!1===e)throw new V(function(e,t){return"[Axios v1.8.3] Transitional option '"+e+"'"+t+(n?". "+n:"")}(o," has been removed"+(t?" in "+t:"")),V.ERR_DEPRECATED);return t&&!it[o]&&(it[o]=!0),!e||e(r,o,i)}},ot.spelling=function(e){return(e,t)=>!0};var at={assertOptions:function(e,t,n){if("object"!=typeof e)throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new V("option "+i+" must be "+n,V.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new V("Unknown option "+i,V.ERR_BAD_OPTION)}},validators:ot};const st=at.validators;class ut{constructor(e){this.defaults=e,this.interceptors={request:new ie,response:new ie}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Le(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&at.assertOptions(n,{silentJSONParsing:st.transitional(st.boolean),forcedJSONParsing:st.transitional(st.boolean),clarifyTimeoutError:st.transitional(st.boolean)},!1),null!=r&&(X.isFunction(r)?t.paramsSerializer={serialize:r}:at.assertOptions(r,{encode:st.function,serialize:st.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),at.assertOptions(t,{baseUrl:st.spelling("baseURL"),withXsrfToken:st.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&X.merge(o.common,o[t.method]);o&&X.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=ye.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const u=[];let c;this.interceptors.response.forEach(function(e){u.push(e.fulfilled,e.rejected)});let l,d=0;if(!s){const e=[nt.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,u),l=e.length,c=Promise.resolve(t);d<l;)c=c.then(e[d++],e[d++]);return c}l=a.length;let f=t;for(d=0;d<l;){const e=a[d++],t=a[d++];try{f=e(f)}catch(e){t.call(this,e);break}}try{c=nt.call(this,f)}catch(e){return Promise.reject(e)}for(d=0,l=u.length;d<l;)c=c.then(u[d++],u[d++]);return c}getUri(e){return oe(Pe((e=Le(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}X.forEach(["delete","get","head","options"],function(e){ut.prototype[e]=function(t,n){return this.request(Le(n||{},{method:e,url:t,data:(n||{}).data}))}}),X.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,o){return this.request(Le(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ut.prototype[e]=t(),ut.prototype[e+"Form"]=t(!0)});class ct{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,o){n.reason||(n.reason=new Se(e,r,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ct(function(t){e=t}),cancel:e}}}const lt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lt).forEach(([e,t])=>{lt[t]=e});const dt=function e(t){const n=new ut(t),r=o(ut.prototype.request,n);return X.extend(r,ut.prototype,n,{allOwnKeys:!0}),X.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Le(t,n))},r}(_e);dt.Axios=ut,dt.CanceledError=Se,dt.CancelToken=ct,dt.isCancel=Te,dt.VERSION=rt,dt.toFormData=Q,dt.AxiosError=V,dt.Cancel=dt.CanceledError,dt.all=function(e){return Promise.all(e)},dt.spread=function(e){return function(t){return e.apply(null,t)}},dt.isAxiosError=function(e){return X.isObject(e)&&!0===e.isAxiosError},dt.mergeConfig=Le,dt.AxiosHeaders=ye,dt.formToJSON=e=>pe(X.isHTMLForm(e)?new FormData(e):e),dt.getAdapter=et,dt.HttpStatusCode=lt,dt.default=dt;function ft(e){let t=e.length;for(;--t>=0;)e[t]=0}const ht=256,pt=286,_t=30,Et=15,gt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),mt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),vt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yt=new Array(576);ft(yt);const At=new Array(60);ft(At);const Tt=new Array(512);ft(Tt);const St=new Array(256);ft(St);const Rt=new Array(29);ft(Rt);const Ot=new Array(_t);function It(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}let Nt,Ct,wt;function Pt(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ft(Ot);const kt=e=>e<256?Tt[e]:Tt[256+(e>>>7)],Lt=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Dt=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Lt(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},xt=(e,t,n)=>{Dt(e,n[2*t],n[2*t+1])},Ut=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},Mt=(e,t,n)=>{const r=new Array(16);let o,i,a=0;for(o=1;o<=Et;o++)a=a+n[o-1]<<1,r[o]=a;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=Ut(r[t]++,t))}},Gt=e=>{let t;for(t=0;t<pt;t++)e.dyn_ltree[2*t]=0;for(t=0;t<_t;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ft=e=>{e.bi_valid>8?Lt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Bt=(e,t,n,r)=>{const o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]},Ht=(e,t,n)=>{const r=e.heap[n];let o=n<<1;for(;o<=e.heap_len&&(o<e.heap_len&&Bt(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!Bt(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r},jt=(e,t,n)=>{let r,o,i,a,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,o=e.pending_buf[e.sym_buf+s++],0===r?xt(e,o,t):(i=St[o],xt(e,i+ht+1,t),a=gt[i],0!==a&&(o-=Rt[i],Dt(e,o,a)),r--,i=kt(r),xt(e,i,n),a=mt[i],0!==a&&(r-=Ot[i],Dt(e,r,a)))}while(s<e.sym_next);xt(e,256,t)},Wt=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.elems;let a,s,u,c=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<i;a++)0!==n[2*a]?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,n[2*u]=1,e.depth[u]=0,e.opt_len--,o&&(e.static_len-=r[2*u+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)Ht(e,n,a);u=i;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ht(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[2*u]=n[2*a]+n[2*s],e.depth[u]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[2*a+1]=n[2*s+1]=u,e.heap[1]=u++,Ht(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,u=t.stat_desc.max_length;let c,l,d,f,h,p,_=0;for(f=0;f<=Et;f++)e.bl_count[f]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)l=e.heap[c],f=n[2*n[2*l+1]+1]+1,f>u&&(f=u,_++),n[2*l+1]=f,l>r||(e.bl_count[f]++,h=0,l>=s&&(h=a[l-s]),p=n[2*l],e.opt_len+=p*(f+h),i&&(e.static_len+=p*(o[2*l+1]+h)));if(0!==_){do{for(f=u-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[u]--,_-=2}while(_>0);for(f=u;0!==f;f--)for(l=e.bl_count[f];0!==l;)d=e.heap[--c],d>r||(n[2*d+1]!==f&&(e.opt_len+=(f-n[2*d+1])*n[2*d],n[2*d+1]=f),l--)}})(e,t),Mt(n,c,e.bl_count)},zt=(e,t,n)=>{let r,o,i=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=t[2*(r+1)+1],++s<u&&o===a||(s<c?e.bl_tree[2*o]+=s:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=o,0===a?(u=138,c=3):o===a?(u=6,c=3):(u=7,c=4))},Xt=(e,t,n)=>{let r,o,i=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),r=0;r<=n;r++)if(o=a,a=t[2*(r+1)+1],!(++s<u&&o===a)){if(s<c)do{xt(e,o,e.bl_tree)}while(0!==--s);else 0!==o?(o!==i&&(xt(e,o,e.bl_tree),s--),xt(e,16,e.bl_tree),Dt(e,s-3,2)):s<=10?(xt(e,17,e.bl_tree),Dt(e,s-3,3)):(xt(e,18,e.bl_tree),Dt(e,s-11,7));s=0,i=o,0===a?(u=138,c=3):o===a?(u=6,c=3):(u=7,c=4)}};let Vt=!1;const qt=(e,t,n,r)=>{Dt(e,0+(r?1:0),3),Ft(e),Lt(e,n),Lt(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Kt=(e,t,n,r)=>{let o,i,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<ht;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Wt(e,e.l_desc),Wt(e,e.d_desc),a=(e=>{let t;for(zt(e,e.dyn_ltree,e.l_desc.max_code),zt(e,e.dyn_dtree,e.d_desc.max_code),Wt(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*bt[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==t?qt(e,t,n,r):4===e.strategy||i===o?(Dt(e,2+(r?1:0),3),jt(e,yt,At)):(Dt(e,4+(r?1:0),3),((e,t,n,r)=>{let o;for(Dt(e,t-257,5),Dt(e,n-1,5),Dt(e,r-4,4),o=0;o<r;o++)Dt(e,e.bl_tree[2*bt[o]+1],3);Xt(e,e.dyn_ltree,t-1),Xt(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),jt(e,e.dyn_ltree,e.dyn_dtree)),Gt(e),r&&Ft(e)},Yt={_tr_init:e=>{Vt||((()=>{let e,t,n,r,o;const i=new Array(16);for(n=0,r=0;r<28;r++)for(Rt[r]=n,e=0;e<1<<gt[r];e++)St[n++]=r;for(St[n-1]=r,o=0,r=0;r<16;r++)for(Ot[r]=o,e=0;e<1<<mt[r];e++)Tt[o++]=r;for(o>>=7;r<_t;r++)for(Ot[r]=o<<7,e=0;e<1<<mt[r]-7;e++)Tt[256+o++]=r;for(t=0;t<=Et;t++)i[t]=0;for(e=0;e<=143;)yt[2*e+1]=8,e++,i[8]++;for(;e<=255;)yt[2*e+1]=9,e++,i[9]++;for(;e<=279;)yt[2*e+1]=7,e++,i[7]++;for(;e<=287;)yt[2*e+1]=8,e++,i[8]++;for(Mt(yt,287,i),e=0;e<_t;e++)At[2*e+1]=5,At[2*e]=Ut(e,5);Nt=new It(yt,gt,257,pt,Et),Ct=new It(At,mt,0,_t,Et),wt=new It(new Array(0),vt,0,19,7)})(),Vt=!0),e.l_desc=new Pt(e.dyn_ltree,Nt),e.d_desc=new Pt(e.dyn_dtree,Ct),e.bl_desc=new Pt(e.bl_tree,wt),e.bi_buf=0,e.bi_valid=0,Gt(e)},_tr_stored_block:qt,_tr_flush_block:Kt,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(St[n]+ht+1)]++,e.dyn_dtree[2*kt(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{Dt(e,2,3),xt(e,256,yt),(e=>{16===e.bi_valid?(Lt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var Zt=(e,t,n,r)=>{let o=65535&e,i=e>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{o=o+t[r++]|0,i=i+o|0}while(--a);o%=65521,i%=65521}return o|i<<16};const Jt=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var $t=(e,t,n,r)=>{const o=Jt,i=r+n;e^=-1;for(let n=r;n<i;n++)e=e>>>8^o[255&(e^t[n])];return-1^e},Qt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},en={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:tn,_tr_stored_block:nn,_tr_flush_block:rn,_tr_tally:on,_tr_align:an}=Yt,{Z_NO_FLUSH:sn,Z_PARTIAL_FLUSH:un,Z_FULL_FLUSH:cn,Z_FINISH:ln,Z_BLOCK:dn,Z_OK:fn,Z_STREAM_END:hn,Z_STREAM_ERROR:pn,Z_DATA_ERROR:_n,Z_BUF_ERROR:En,Z_DEFAULT_COMPRESSION:gn,Z_FILTERED:mn,Z_HUFFMAN_ONLY:vn,Z_RLE:bn,Z_FIXED:yn,Z_DEFAULT_STRATEGY:An,Z_UNKNOWN:Tn,Z_DEFLATED:Sn}=en,Rn=258,On=262,In=42,Nn=113,Cn=666,wn=(e,t)=>(e.msg=Qt[t],t),Pn=e=>2*e-(e>4?9:0),kn=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Ln=e=>{let t,n,r,o=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=o?n-o:0}while(--t);t=o,r=t;do{n=e.prev[--r],e.prev[r]=n>=o?n-o:0}while(--t)};let Dn=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const xn=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Un=(e,t)=>{rn(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,xn(e.strm)},Mn=(e,t)=>{e.pending_buf[e.pending++]=t},Gn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Fn=(e,t,n,r)=>{let o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),n),1===e.state.wrap?e.adler=Zt(e.adler,t,o,n):2===e.state.wrap&&(e.adler=$t(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)},Bn=(e,t)=>{let n,r,o=e.max_chain_length,i=e.strstart,a=e.prev_length,s=e.nice_match;const u=e.strstart>e.w_size-On?e.strstart-(e.w_size-On):0,c=e.window,l=e.w_mask,d=e.prev,f=e.strstart+Rn;let h=c[i+a-1],p=c[i+a];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+a]===p&&c[n+a-1]===h&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<f);if(r=Rn-(f-i),i=f-Rn,r>a){if(e.match_start=t,a=r,r>=s)break;h=c[i+a-1],p=c[i+a]}}}while((t=d[t&l])>u&&0!==--o);return a<=e.lookahead?a:e.lookahead},Hn=e=>{const t=e.w_size;let n,r,o;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-On)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Ln(e),r+=t),0===e.strm.avail_in)break;if(n=Fn(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=Dn(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=Dn(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<On&&0!==e.strm.avail_in)},jn=(e,t)=>{let n,r,o,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>o&&(n=o),n<i&&(0===n&&t!==ln||t===sn||n!==r+e.strm.avail_in))break;a=t===ln&&n===r+e.strm.avail_in?1:0,nn(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,xn(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Fn(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==sn&&t!==ln&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(Fn(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,i=o>e.w_size?e.w_size:o,r=e.strstart-e.block_start,(r>=i||(r||t===ln)&&t!==sn&&0===e.strm.avail_in&&r<=o)&&(n=r>o?o:r,a=t===ln&&0===e.strm.avail_in&&n===r?1:0,nn(e,e.block_start,n,a),e.block_start+=n,xn(e.strm)),a?3:1)},Wn=(e,t)=>{let n,r;for(;;){if(e.lookahead<On){if(Hn(e),e.lookahead<On&&t===sn)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-On&&(e.match_length=Bn(e,n)),e.match_length>=3)if(r=on(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+1]);else r=on(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Un(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ln?(Un(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Un(e,!1),0===e.strm.avail_out)?1:2},zn=(e,t)=>{let n,r,o;for(;;){if(e.lookahead<On){if(Hn(e),e.lookahead<On&&t===sn)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-On&&(e.match_length=Bn(e,n),e.match_length<=5&&(e.strategy===mn||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,r=on(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=Dn(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Un(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=on(e,0,e.window[e.strstart-1]),r&&Un(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=on(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ln?(Un(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Un(e,!1),0===e.strm.avail_out)?1:2};function Xn(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}const Vn=[new Xn(0,0,0,0,jn),new Xn(4,4,8,4,Wn),new Xn(4,5,16,8,Wn),new Xn(4,6,32,32,Wn),new Xn(4,4,16,16,zn),new Xn(8,16,32,32,zn),new Xn(8,16,128,128,zn),new Xn(8,32,128,256,zn),new Xn(32,128,258,1024,zn),new Xn(32,258,258,4096,zn)];function qn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Sn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),kn(this.dyn_ltree),kn(this.dyn_dtree),kn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),kn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),kn(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Kn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==In&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Nn&&t.status!==Cn?1:0},Yn=e=>{if(Kn(e))return wn(e,pn);e.total_in=e.total_out=0,e.data_type=Tn;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?In:Nn,e.adler=2===t.wrap?0:1,t.last_flush=-2,tn(t),fn},Zn=e=>{const t=Yn(e);var n;return t===fn&&((n=e.state).window_size=2*n.w_size,kn(n.head),n.max_lazy_match=Vn[n.level].max_lazy,n.good_match=Vn[n.level].good_length,n.nice_match=Vn[n.level].nice_length,n.max_chain_length=Vn[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Jn=(e,t,n,r,o,i)=>{if(!e)return pn;let a=1;if(t===gn&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),o<1||o>9||n!==Sn||r<8||r>15||t<0||t>9||i<0||i>yn||8===r&&1!==a)return wn(e,pn);8===r&&(r=9);const s=new qn;return e.state=s,s.strm=e,s.status=In,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=i,s.method=n,Zn(e)};var $n={deflateInit:(e,t)=>Jn(e,t,Sn,15,8,An),deflateInit2:Jn,deflateReset:Zn,deflateResetKeep:Yn,deflateSetHeader:(e,t)=>Kn(e)||2!==e.state.wrap?pn:(e.state.gzhead=t,fn),deflate:(e,t)=>{if(Kn(e)||t>dn||t<0)return e?wn(e,pn):pn;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Cn&&t!==ln)return wn(e,0===e.avail_out?En:pn);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(xn(e),0===e.avail_out)return n.last_flush=-1,fn}else if(0===e.avail_in&&Pn(t)<=Pn(r)&&t!==ln)return wn(e,En);if(n.status===Cn&&0!==e.avail_in)return wn(e,En);if(n.status===In&&0===n.wrap&&(n.status=Nn),n.status===In){let t=Sn+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=vn||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Gn(n,t),0!==n.strstart&&(Gn(n,e.adler>>>16),Gn(n,65535&e.adler)),e.adler=1,n.status=Nn,xn(e),0!==n.pending)return n.last_flush=-1,fn}if(57===n.status)if(e.adler=0,Mn(n,31),Mn(n,139),Mn(n,8),n.gzhead)Mn(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Mn(n,255&n.gzhead.time),Mn(n,n.gzhead.time>>8&255),Mn(n,n.gzhead.time>>16&255),Mn(n,n.gzhead.time>>24&255),Mn(n,9===n.level?2:n.strategy>=vn||n.level<2?4:0),Mn(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Mn(n,255&n.gzhead.extra.length),Mn(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=$t(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Mn(n,0),Mn(n,0),Mn(n,0),Mn(n,0),Mn(n,0),Mn(n,9===n.level?2:n.strategy>=vn||n.level<2?4:0),Mn(n,3),n.status=Nn,xn(e),0!==n.pending)return n.last_flush=-1,fn;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=$t(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=o,xn(e),0!==n.pending)return n.last_flush=-1,fn;t=0,r-=o}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=$t(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=$t(e.adler,n.pending_buf,n.pending-r,r)),xn(e),0!==n.pending)return n.last_flush=-1,fn;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Mn(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=$t(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=$t(e.adler,n.pending_buf,n.pending-r,r)),xn(e),0!==n.pending)return n.last_flush=-1,fn;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Mn(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=$t(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(xn(e),0!==n.pending))return n.last_flush=-1,fn;Mn(n,255&e.adler),Mn(n,e.adler>>8&255),e.adler=0}if(n.status=Nn,xn(e),0!==n.pending)return n.last_flush=-1,fn}if(0!==e.avail_in||0!==n.lookahead||t!==sn&&n.status!==Cn){let r=0===n.level?jn(n,t):n.strategy===vn?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Hn(e),0===e.lookahead)){if(t===sn)return 1;break}if(e.match_length=0,n=on(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Un(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ln?(Un(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Un(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===bn?((e,t)=>{let n,r,o,i;const a=e.window;for(;;){if(e.lookahead<=Rn){if(Hn(e),e.lookahead<=Rn&&t===sn)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=e.strstart-1,r=a[o],r===a[++o]&&r===a[++o]&&r===a[++o])){i=e.strstart+Rn;do{}while(r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&o<i);e.match_length=Rn-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=on(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=on(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Un(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ln?(Un(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Un(e,!1),0===e.strm.avail_out)?1:2})(n,t):Vn[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Cn),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),fn;if(2===r&&(t===un?an(n):t!==dn&&(nn(n,0,0,!1),t===cn&&(kn(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),xn(e),0===e.avail_out))return n.last_flush=-1,fn}return t!==ln?fn:n.wrap<=0?hn:(2===n.wrap?(Mn(n,255&e.adler),Mn(n,e.adler>>8&255),Mn(n,e.adler>>16&255),Mn(n,e.adler>>24&255),Mn(n,255&e.total_in),Mn(n,e.total_in>>8&255),Mn(n,e.total_in>>16&255),Mn(n,e.total_in>>24&255)):(Gn(n,e.adler>>>16),Gn(n,65535&e.adler)),xn(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?fn:hn)},deflateEnd:e=>{if(Kn(e))return pn;const t=e.state.status;return e.state=null,t===Nn?wn(e,_n):fn},deflateSetDictionary:(e,t)=>{let n=t.length;if(Kn(e))return pn;const r=e.state,o=r.wrap;if(2===o||1===o&&r.status!==In||r.lookahead)return pn;if(1===o&&(e.adler=Zt(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===o&&(kn(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const i=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Hn(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Dn(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,Hn(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=i,r.wrap=o,fn},deflateInfo:"pako deflate (from Nodeca project)"};const Qn=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var er=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Qn(n,t)&&(e[t]=n[t])}}return e},tr=e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,o=e.length;t<o;t++){let o=e[t];n.set(o,r),r+=o.length}return n};let nr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){nr=!1}const rr=new Uint8Array(256);for(let e=0;e<256;e++)rr[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;rr[254]=rr[254]=1;var or=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,o,i,a=e.length,s=0;for(o=0;o<a;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<a&&(r=e.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),i=0,o=0;i<s;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<a&&(r=e.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},ir=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,o;const i=new Array(2*n);for(o=0,r=0;r<n;){let t=e[r++];if(t<128){i[o++]=t;continue}let a=rr[t];if(a>4)i[o++]=65533,r+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&r<n;)t=t<<6|63&e[r++],a--;a>1?i[o++]=65533:t<65536?i[o++]=t:(t-=65536,i[o++]=55296|t>>10&1023,i[o++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&nr)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,o)},ar=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+rr[e[n]]>t?n:t};var sr=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const ur=Object.prototype.toString,{Z_NO_FLUSH:cr,Z_SYNC_FLUSH:lr,Z_FULL_FLUSH:dr,Z_FINISH:fr,Z_OK:hr,Z_STREAM_END:pr,Z_DEFAULT_COMPRESSION:_r,Z_DEFAULT_STRATEGY:Er,Z_DEFLATED:gr}=en;function mr(e){this.options=er({level:_r,method:gr,chunkSize:16384,windowBits:15,memLevel:8,strategy:Er},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sr,this.strm.avail_out=0;let n=$n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==hr)throw new Error(Qt[n]);if(t.header&&$n.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?or(t.dictionary):"[object ArrayBuffer]"===ur.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=$n.deflateSetDictionary(this.strm,e),n!==hr)throw new Error(Qt[n]);this._dict_set=!0}}function vr(e,t){const n=new mr(t);if(n.push(e,!0),n.err)throw n.msg||Qt[n.err];return n.result}mr.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let o,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?fr:cr,"string"==typeof e?n.input=or(e):"[object ArrayBuffer]"===ur.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===lr||i===dr)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=$n.deflate(n,i),o===pr)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=$n.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===hr;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},mr.prototype.onData=function(e){this.chunks.push(e)},mr.prototype.onEnd=function(e){e===hr&&(this.result=tr(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var br={Deflate:mr,deflate:vr,deflateRaw:function(e,t){return(t=t||{}).raw=!0,vr(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,vr(e,t)},constants:en};const yr=16209;var Ar=function(e,t){let n,r,o,i,a,s,u,c,l,d,f,h,p,_,E,g,m,v,b,y,A,T,S,R;const O=e.state;n=e.next_in,S=e.input,r=n+(e.avail_in-5),o=e.next_out,R=e.output,i=o-(t-e.avail_out),a=o+(e.avail_out-257),s=O.dmax,u=O.wsize,c=O.whave,l=O.wnext,d=O.window,f=O.hold,h=O.bits,p=O.lencode,_=O.distcode,E=(1<<O.lenbits)-1,g=(1<<O.distbits)-1;e:do{h<15&&(f+=S[n++]<<h,h+=8,f+=S[n++]<<h,h+=8),m=p[f&E];t:for(;;){if(v=m>>>24,f>>>=v,h-=v,v=m>>>16&255,0===v)R[o++]=65535&m;else{if(!(16&v)){if(64&v){if(32&v){O.mode=16191;break e}e.msg="invalid literal/length code",O.mode=yr;break e}m=p[(65535&m)+(f&(1<<v)-1)];continue t}for(b=65535&m,v&=15,v&&(h<v&&(f+=S[n++]<<h,h+=8),b+=f&(1<<v)-1,f>>>=v,h-=v),h<15&&(f+=S[n++]<<h,h+=8,f+=S[n++]<<h,h+=8),m=_[f&g];;){if(v=m>>>24,f>>>=v,h-=v,v=m>>>16&255,16&v){if(y=65535&m,v&=15,h<v&&(f+=S[n++]<<h,h+=8,h<v&&(f+=S[n++]<<h,h+=8)),y+=f&(1<<v)-1,y>s){e.msg="invalid distance too far back",O.mode=yr;break e}if(f>>>=v,h-=v,v=o-i,y>v){if(v=y-v,v>c&&O.sane){e.msg="invalid distance too far back",O.mode=yr;break e}if(A=0,T=d,0===l){if(A+=u-v,v<b){b-=v;do{R[o++]=d[A++]}while(--v);A=o-y,T=R}}else if(l<v){if(A+=u+l-v,v-=l,v<b){b-=v;do{R[o++]=d[A++]}while(--v);if(A=0,l<b){v=l,b-=v;do{R[o++]=d[A++]}while(--v);A=o-y,T=R}}}else if(A+=l-v,v<b){b-=v;do{R[o++]=d[A++]}while(--v);A=o-y,T=R}for(;b>2;)R[o++]=T[A++],R[o++]=T[A++],R[o++]=T[A++],b-=3;b&&(R[o++]=T[A++],b>1&&(R[o++]=T[A++]))}else{A=o-y;do{R[o++]=R[A++],R[o++]=R[A++],R[o++]=R[A++],b-=3}while(b>2);b&&(R[o++]=R[A++],b>1&&(R[o++]=R[A++]))}break}if(64&v){e.msg="invalid distance code",O.mode=yr;break e}m=_[(65535&m)+(f&(1<<v)-1)]}}break}}while(n<r&&o<a);b=h>>3,n-=b,h-=b<<3,f&=(1<<h)-1,e.next_in=n,e.next_out=o,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=o<a?a-o+257:257-(o-a),O.hold=f,O.bits=h};const Tr=15,Sr=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Rr=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Or=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ir=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Nr=(e,t,n,r,o,i,a,s)=>{const u=s.bits;let c,l,d,f,h,p,_=0,E=0,g=0,m=0,v=0,b=0,y=0,A=0,T=0,S=0,R=null;const O=new Uint16Array(16),I=new Uint16Array(16);let N,C,w,P=null;for(_=0;_<=Tr;_++)O[_]=0;for(E=0;E<r;E++)O[t[n+E]]++;for(v=u,m=Tr;m>=1&&0===O[m];m--);if(v>m&&(v=m),0===m)return o[i++]=20971520,o[i++]=20971520,s.bits=1,0;for(g=1;g<m&&0===O[g];g++);for(v<g&&(v=g),A=1,_=1;_<=Tr;_++)if(A<<=1,A-=O[_],A<0)return-1;if(A>0&&(0===e||1!==m))return-1;for(I[1]=0,_=1;_<Tr;_++)I[_+1]=I[_]+O[_];for(E=0;E<r;E++)0!==t[n+E]&&(a[I[t[n+E]]++]=E);if(0===e?(R=P=a,p=20):1===e?(R=Sr,P=Rr,p=257):(R=Or,P=Ir,p=0),S=0,E=0,_=g,h=i,b=v,y=0,d=-1,T=1<<v,f=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){N=_-y,a[E]+1<p?(C=0,w=a[E]):a[E]>=p?(C=P[a[E]-p],w=R[a[E]-p]):(C=96,w=0),c=1<<_-y,l=1<<b,g=l;do{l-=c,o[h+(S>>y)+l]=N<<24|C<<16|w}while(0!==l);for(c=1<<_-1;S&c;)c>>=1;if(0!==c?(S&=c-1,S+=c):S=0,E++,0===--O[_]){if(_===m)break;_=t[n+a[E]]}if(_>v&&(S&f)!==d){for(0===y&&(y=v),h+=g,b=_-y,A=1<<b;b+y<m&&(A-=O[b+y],!(A<=0));)b++,A<<=1;if(T+=1<<b,1===e&&T>852||2===e&&T>592)return 1;d=S&f,o[d]=v<<24|b<<16|h-i}}return 0!==S&&(o[h+S]=_-y<<24|64<<16),s.bits=v,0};const{Z_FINISH:Cr,Z_BLOCK:wr,Z_TREES:Pr,Z_OK:kr,Z_STREAM_END:Lr,Z_NEED_DICT:Dr,Z_STREAM_ERROR:xr,Z_DATA_ERROR:Ur,Z_MEM_ERROR:Mr,Z_BUF_ERROR:Gr,Z_DEFLATED:Fr}=en,Br=16180,Hr=16190,jr=16191,Wr=16192,zr=16194,Xr=16199,Vr=16200,qr=16206,Kr=16209,Yr=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Zr(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Jr=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Br||t.mode>16211?1:0},$r=e=>{if(Jr(e))return xr;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Br,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,kr},Qr=e=>{if(Jr(e))return xr;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,$r(e)},eo=(e,t)=>{let n;if(Jr(e))return xr;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?xr:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Qr(e))},to=(e,t)=>{if(!e)return xr;const n=new Zr;e.state=n,n.strm=e,n.window=null,n.mode=Br;const r=eo(e,t);return r!==kr&&(e.state=null),r};let no,ro,oo=!0;const io=e=>{if(oo){no=new Int32Array(512),ro=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Nr(1,e.lens,0,288,no,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Nr(2,e.lens,0,32,ro,0,e.work,{bits:5}),oo=!1}e.lencode=no,e.lenbits=9,e.distcode=ro,e.distbits=5},ao=(e,t,n,r)=>{let o;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>r&&(o=r),i.window.set(t.subarray(n-r,n-r+o),i.wnext),(r-=o)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0};var so={inflateReset:Qr,inflateReset2:eo,inflateResetKeep:$r,inflateInit:e=>to(e,15),inflateInit2:to,inflate:(e,t)=>{let n,r,o,i,a,s,u,c,l,d,f,h,p,_,E,g,m,v,b,y,A,T,S=0;const R=new Uint8Array(4);let O,I;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Jr(e)||!e.output||!e.input&&0!==e.avail_in)return xr;n=e.state,n.mode===jr&&(n.mode=Wr),a=e.next_out,o=e.output,u=e.avail_out,i=e.next_in,r=e.input,s=e.avail_in,c=n.hold,l=n.bits,d=s,f=u,T=kr;e:for(;;)switch(n.mode){case Br:if(0===n.wrap){n.mode=Wr;break}for(;l<16;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,R[0]=255&c,R[1]=c>>>8&255,n.check=$t(n.check,R,2,0),c=0,l=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Kr;break}if((15&c)!==Fr){e.msg="unknown compression method",n.mode=Kr;break}if(c>>>=4,l-=4,A=8+(15&c),0===n.wbits&&(n.wbits=A),A>15||A>n.wbits){e.msg="invalid window size",n.mode=Kr;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:jr,c=0,l=0;break;case 16181:for(;l<16;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if(n.flags=c,(255&n.flags)!==Fr){e.msg="unknown compression method",n.mode=Kr;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Kr;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(R[0]=255&c,R[1]=c>>>8&255,n.check=$t(n.check,R,2,0)),c=0,l=0,n.mode=16182;case 16182:for(;l<32;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(R[0]=255&c,R[1]=c>>>8&255,R[2]=c>>>16&255,R[3]=c>>>24&255,n.check=$t(n.check,R,4,0)),c=0,l=0,n.mode=16183;case 16183:for(;l<16;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(R[0]=255&c,R[1]=c>>>8&255,n.check=$t(n.check,R,2,0)),c=0,l=0,n.mode=16184;case 16184:if(1024&n.flags){for(;l<16;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(R[0]=255&c,R[1]=c>>>8&255,n.check=$t(n.check,R,2,0)),c=0,l=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(h=n.length,h>s&&(h=s),h&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+h),A)),512&n.flags&&4&n.wrap&&(n.check=$t(n.check,r,h,i)),s-=h,i+=h,n.length-=h),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;h=0;do{A=r[i+h++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A))}while(A&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=$t(n.check,r,h,i)),s-=h,i+=h,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;h=0;do{A=r[i+h++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A))}while(A&&h<s);if(512&n.flags&&4&n.wrap&&(n.check=$t(n.check,r,h,i)),s-=h,i+=h,A)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;l<16;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Kr;break}c=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=jr;break;case 16189:for(;l<32;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}e.adler=n.check=Yr(c),c=0,l=0,n.mode=Hr;case Hr:if(0===n.havedict)return e.next_out=a,e.avail_out=u,e.next_in=i,e.avail_in=s,n.hold=c,n.bits=l,Dr;e.adler=n.check=1,n.mode=jr;case jr:if(t===wr||t===Pr)break e;case Wr:if(n.last){c>>>=7&l,l-=7&l,n.mode=qr;break}for(;l<3;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}switch(n.last=1&c,c>>>=1,l-=1,3&c){case 0:n.mode=16193;break;case 1:if(io(n),n.mode=Xr,t===Pr){c>>>=2,l-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Kr}c>>>=2,l-=2;break;case 16193:for(c>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Kr;break}if(n.length=65535&c,c=0,l=0,n.mode=zr,t===Pr)break e;case zr:n.mode=16195;case 16195:if(h=n.length,h){if(h>s&&(h=s),h>u&&(h=u),0===h)break e;o.set(r.subarray(i,i+h),a),s-=h,i+=h,u-=h,a+=h,n.length-=h;break}n.mode=jr;break;case 16196:for(;l<14;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if(n.nlen=257+(31&c),c>>>=5,l-=5,n.ndist=1+(31&c),c>>>=5,l-=5,n.ncode=4+(15&c),c>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Kr;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;l<3;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}n.lens[N[n.have++]]=7&c,c>>>=3,l-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},T=Nr(0,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,T){e.msg="invalid code lengths set",n.mode=Kr;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[c&(1<<n.lenbits)-1],E=S>>>24,g=S>>>16&255,m=65535&S,!(E<=l);){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if(m<16)c>>>=E,l-=E,n.lens[n.have++]=m;else{if(16===m){for(I=E+2;l<I;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if(c>>>=E,l-=E,0===n.have){e.msg="invalid bit length repeat",n.mode=Kr;break}A=n.lens[n.have-1],h=3+(3&c),c>>>=2,l-=2}else if(17===m){for(I=E+3;l<I;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}c>>>=E,l-=E,A=0,h=3+(7&c),c>>>=3,l-=3}else{for(I=E+7;l<I;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}c>>>=E,l-=E,A=0,h=11+(127&c),c>>>=7,l-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Kr;break}for(;h--;)n.lens[n.have++]=A}}if(n.mode===Kr)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Kr;break}if(n.lenbits=9,O={bits:n.lenbits},T=Nr(1,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,T){e.msg="invalid literal/lengths set",n.mode=Kr;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},T=Nr(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,T){e.msg="invalid distances set",n.mode=Kr;break}if(n.mode=Xr,t===Pr)break e;case Xr:n.mode=Vr;case Vr:if(s>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=i,e.avail_in=s,n.hold=c,n.bits=l,Ar(e,f),a=e.next_out,o=e.output,u=e.avail_out,i=e.next_in,r=e.input,s=e.avail_in,c=n.hold,l=n.bits,n.mode===jr&&(n.back=-1);break}for(n.back=0;S=n.lencode[c&(1<<n.lenbits)-1],E=S>>>24,g=S>>>16&255,m=65535&S,!(E<=l);){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if(g&&!(240&g)){for(v=E,b=g,y=m;S=n.lencode[y+((c&(1<<v+b)-1)>>v)],E=S>>>24,g=S>>>16&255,m=65535&S,!(v+E<=l);){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}c>>>=v,l-=v,n.back+=v}if(c>>>=E,l-=E,n.back+=E,n.length=m,0===g){n.mode=16205;break}if(32&g){n.back=-1,n.mode=jr;break}if(64&g){e.msg="invalid literal/length code",n.mode=Kr;break}n.extra=15&g,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;l<I;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;S=n.distcode[c&(1<<n.distbits)-1],E=S>>>24,g=S>>>16&255,m=65535&S,!(E<=l);){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if(!(240&g)){for(v=E,b=g,y=m;S=n.distcode[y+((c&(1<<v+b)-1)>>v)],E=S>>>24,g=S>>>16&255,m=65535&S,!(v+E<=l);){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}c>>>=v,l-=v,n.back+=v}if(c>>>=E,l-=E,n.back+=E,64&g){e.msg="invalid distance code",n.mode=Kr;break}n.offset=m,n.extra=15&g,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;l<I;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Kr;break}n.mode=16204;case 16204:if(0===u)break e;if(h=f-u,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Kr;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),_=n.window}else _=o,p=a-n.offset,h=n.length;h>u&&(h=u),u-=h,n.length-=h;do{o[a++]=_[p++]}while(--h);0===n.length&&(n.mode=Vr);break;case 16205:if(0===u)break e;o[a++]=n.length,u--,n.mode=Vr;break;case qr:if(n.wrap){for(;l<32;){if(0===s)break e;s--,c|=r[i++]<<l,l+=8}if(f-=u,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?$t(n.check,o,f,a-f):Zt(n.check,o,f,a-f)),f=u,4&n.wrap&&(n.flags?c:Yr(c))!==n.check){e.msg="incorrect data check",n.mode=Kr;break}c=0,l=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;l<32;){if(0===s)break e;s--,c+=r[i++]<<l,l+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Kr;break}c=0,l=0}n.mode=16208;case 16208:T=Lr;break e;case Kr:T=Ur;break e;case 16210:return Mr;default:return xr}return e.next_out=a,e.avail_out=u,e.next_in=i,e.avail_in=s,n.hold=c,n.bits=l,(n.wsize||f!==e.avail_out&&n.mode<Kr&&(n.mode<qr||t!==Cr))&&ao(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,4&n.wrap&&f&&(e.adler=n.check=n.flags?$t(n.check,o,f,e.next_out-f):Zt(n.check,o,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===jr?128:0)+(n.mode===Xr||n.mode===zr?256:0),(0===d&&0===f||t===Cr)&&T===kr&&(T=Gr),T},inflateEnd:e=>{if(Jr(e))return xr;let t=e.state;return t.window&&(t.window=null),e.state=null,kr},inflateGetHeader:(e,t)=>{if(Jr(e))return xr;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,kr):xr},inflateSetDictionary:(e,t)=>{const n=t.length;let r,o,i;return Jr(e)?xr:(r=e.state,0!==r.wrap&&r.mode!==Hr?xr:r.mode===Hr&&(o=1,o=Zt(o,t,n,0),o!==r.check)?Ur:(i=ao(e,t,n,n),i?(r.mode=16210,Mr):(r.havedict=1,kr)))},inflateInfo:"pako inflate (from Nodeca project)"};var uo=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const co=Object.prototype.toString,{Z_NO_FLUSH:lo,Z_FINISH:fo,Z_OK:ho,Z_STREAM_END:po,Z_NEED_DICT:_o,Z_STREAM_ERROR:Eo,Z_DATA_ERROR:go,Z_MEM_ERROR:mo}=en;function vo(e){this.options=er({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sr,this.strm.avail_out=0;let n=so.inflateInit2(this.strm,t.windowBits);if(n!==ho)throw new Error(Qt[n]);if(this.header=new uo,so.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=or(t.dictionary):"[object ArrayBuffer]"===co.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=so.inflateSetDictionary(this.strm,t.dictionary),n!==ho)))throw new Error(Qt[n])}function bo(e,t){const n=new vo(t);if(n.push(e),n.err)throw n.msg||Qt[n.err];return n.result}vo.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let i,a,s;if(this.ended)return!1;for(a=t===~~t?t:!0===t?fo:lo,"[object ArrayBuffer]"===co.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=so.inflate(n,a),i===_o&&o&&(i=so.inflateSetDictionary(n,o),i===ho?i=so.inflate(n,a):i===go&&(i=_o));n.avail_in>0&&i===po&&n.state.wrap>0&&0!==e[n.next_in];)so.inflateReset(n),i=so.inflate(n,a);switch(i){case Eo:case go:case _o:case mo:return this.onEnd(i),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||i===po))if("string"===this.options.to){let e=ar(n.output,n.next_out),t=n.next_out-e,o=ir(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==ho||0!==s){if(i===po)return i=so.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},vo.prototype.onData=function(e){this.chunks.push(e)},vo.prototype.onEnd=function(e){e===ho&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=tr(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var yo={Inflate:vo,inflate:bo,inflateRaw:function(e,t){return(t=t||{}).raw=!0,bo(e,t)},ungzip:bo,constants:en};const{Deflate:Ao,deflate:To,deflateRaw:So,gzip:Ro}=br,{Inflate:Oo,inflate:Io,inflateRaw:No,ungzip:Co}=yo;var wo,Po={Deflate:Ao,deflate:To,deflateRaw:So,gzip:Ro,Inflate:Oo,inflate:Io,inflateRaw:No,ungzip:Co,constants:en};class ko{static init(e,t,n){this.axiosClient.defaults.baseURL=e,this.axiosClient.defaults.headers.post["Content-Type"]="application/json",this.axiosClient.defaults.headers.post["Content-Encoding"]="gzip",this.headers=n,this.namespace=t}static send(e){return r(this,void 0,void 0,function*(){try{const t=JSON.stringify(e),n=Po.gzip(t);yield this.axiosClient.post(Go.config.namespace,n,this.headers)}catch(e){}})}}ko.axiosClient=dt,ko.headers={},ko.namespace="";class Lo{constructor(){this.flushInterval=5e3,this.flushTimer=null,this.maxBufferBytes=0,this.currentBufferSize=0}scheduleFlushTimer(){this.flushTimer=window.setTimeout(()=>r(this,void 0,void 0,function*(){yield this.flush(),this.scheduleFlushTimer()}),this.flushInterval)}resetFlushTimer(){this.flushTimer&&clearTimeout(this.flushTimer),this.scheduleFlushTimer()}}class Do extends Lo{constructor(e=5e3,t=1e4){super(),this.store=[],this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return r(this,void 0,void 0,function*(){const t=new Blob([JSON.stringify(e)]).size;this.store.push(e),this.currentBufferSize+=t,this.currentBufferSize>=this.maxBufferBytes&&(yield this.flush())})}flush(){return r(this,void 0,void 0,function*(){0!==this.store.length?ko.send(this.store).then(()=>{this.store=[],this.currentBufferSize=0,this.resetFlushTimer()}):this.resetFlushTimer()})}}class xo extends Lo{constructor(e=5e3,t=1e4){super(),this.storageKey="oneLogBuffer",this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return r(this,void 0,void 0,function*(){const t=new Blob([JSON.stringify(e)]).size;this.currentBufferSize+=t,this.appendLogs(e),this.currentBufferSize>=this.maxBufferBytes&&(yield this.flush())})}flush(){return r(this,void 0,void 0,function*(){const e=this.fetchLogs();0!==e.length?ko.send(e).then(()=>{localStorage.removeItem(this.storageKey),this.currentBufferSize=0,this.resetFlushTimer()}).catch(e=>{}):this.resetFlushTimer()})}appendLogs(e){const t=this.fetchLogs();t.push(e),localStorage.setItem(this.storageKey,JSON.stringify(t))}fetchLogs(){const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}}!function(e){e.MEMORY="memory",e.LOCAL="local",e.CHROME="chrome"}(wo||(wo={}));class Uo extends Lo{constructor(e=5e3,t=1e4){super(),this.storageKey="oneLogBuffer",this.flushInterval=e,this.maxBufferBytes=t,this.scheduleFlushTimer()}buffer(e){return r(this,void 0,void 0,function*(){const t=new Blob([JSON.stringify(e)]).size;this.currentBufferSize+=t,yield this.appendLogs(e),this.currentBufferSize>this.maxBufferBytes&&(yield this.flush())})}flush(){return r(this,void 0,void 0,function*(){this.fetchLogs().then(e=>r(this,void 0,void 0,function*(){0!==e.length?ko.send(e).then(()=>r(this,void 0,void 0,function*(){yield chrome.storage.local.remove(this.storageKey),this.currentBufferSize=0,this.resetFlushTimer()})):this.resetFlushTimer()}))})}appendLogs(e){return r(this,void 0,void 0,function*(){const t=yield this.fetchLogs();t.push(e),yield chrome.storage.local.set({[this.storageKey]:t})})}fetchLogs(){return r(this,void 0,void 0,function*(){return chrome.storage.local.get(this.storageKey).then(e=>e[this.storageKey]||[])})}scheduleFlushTimer(){this.flushTimer=setTimeout(()=>r(this,void 0,void 0,function*(){yield this.flush(),this.scheduleFlushTimer()}),this.flushInterval)}}class Mo{static createStorage(e,t,n){switch(e){case wo.LOCAL:return new xo(t,n);case wo.CHROME:return new Uo(t,n);default:return new Do(t,n)}}}class Go{static init(e="com.quillbot.dev",t="dev",n=wo.CHROME,r=1e4,o=5e3,i={}){let a="https://ol-collector.quillbot.dev";"prod"===t&&(a="https://ol-collector.quillbot.com"),e="/"+e,ko.init(a,e,i),this.storage=Mo.createStorage(n,o,r),this.config={host:a,version:"v1",namespace:e,env:t,storageType:n,postBytes:r,postInterval:o,headers:i}}static log(e){this.storage.buffer(e).then(e=>{})}static flush(){this.storage.flush().then(e=>{})}}Go.config={host:"",version:"",namespace:"",env:"",storageType:"",postBytes:2e3,postInterval:-1,headers:{}}},51159:(e,t,n)=>{"use strict";n.d(t,{i:()=>l});var r={hallo:"de",moin:"de",viele:"de",servus:"de",gruezi:"de",kacke:"de",und:"de","und los":"de","na denn":"de",gut:"de",eins:"de",nie:"de",immer:"de",neein:"de",neeein:"de",neeeein:"de",stimmts:"de",das:"de",den:"de",hier:"de",sowas:"de","och n\xf6":"de","hey du":"de","na gut":"de","hallo leute":"de","hey leute":"de",nagut:"de",ahoi:"de",bald:"de",juhu:"de",juchu:"de",alter:"de",fertig:"de",korrekt:"de",digga:"de",diggah:"de",digger:"de",gratis:"de",schade:"de",nicht:"de",meins:"de",willkommen:"de",schuldigung:"de",tschuldigung:"de",entschuldigung:"de",h\u00f6:"de",h\u00f6h\u00f6:"de",sicher:"de",bitte:"de",klappt:"de",krass:"de",funzt:"de",h\u00e4:"de",h\u00e4h:"de",h\u00e4h\u00e4:"de",passt:"de",nee:"de",tsch\u00f6:"de",tsch\u00f6h:"de",du:"de",sie:"de",prima:"de",gr\u00fcezi:"de",gr\u00fczi:"de",komme:"de",jepp:"de",japp:"de",anbei:"de","guten tag":"de","gute tag":"de","dank dir":"de",oha:"de",herr:"de",frau:"de",ja:"de",oja:"de",jo:"de",n\u00f6:"de",n\u00f6\u00f6:"de",n\u00f6\u00f6\u00f6:"de",geil:"de",klasse:"de",nix:"de","oh ja":"de","oh je":"de",ohje:"de",oje:"de",wieso:"de",wann:"de",achso:"de",was:"de",ups:"de",hihi:"de",hihihi:"de",bittesch\u00f6n:"de","bitte sch\xf6n":"de",dankesch\u00f6n:"de","danke sch\xf6n":"de","besten dank":"de","vielen dank":"de","ja klar":"de","ja, klar":"de",au:"de",aua:"de",tja:"de",b\u00e4h:"de",\u00e4hm:"de",\u00e4hem:"de",hoppla:"de",uff:"de",zack:"de",bumm:"de",pfui:"de",hurra:"de",puh:"de",mist:"de",hi:"en",hey:"en",wassup:"en",wazzup:"en",yo:"en",oh:"en",done:"en",dollar:"en",yay:"en",yep:"en",nope:"en",please:"en",pls:"en",damn:"en",dammit:"en",shit:"en",bad:"en",usa:"en",rofl:"en",lol:"en",wtf:"en",huh:"en",thx:"en",ugh:"en",like:"en",ouch:"en",boo:"en",booo:"en",boooo:"en",no:"en",noo:"en",nooo:"en",noooo:"en",nooooo:"en","see ya":"en","see you":"en","love u":"en",yea:"en",hooray:"en",best:"en",jeez:"en",yeez:"en",geez:"en",woah:"en",omg:"en",gosh:"en",si:"es","mui bien":"es",oye:"es",vale:"es",que:"es",anda:"es",orale:"es",correcto:"es",ay:"es",eh:"es",claro:"es",hala:"es",bien:"es",cabron:"es",joder:"es",culo:"es",pendejo:"es","maldita sea":"es",hostia:"es",como:"es",c\u00f3mo:"es",aj\u00e1:"es",aja:"es","como dice":"es",carajo:"es",jajaja:"es",jejeje:"es",perdon:"es",donde:"es",dale:"es",portada:"es",oi:"pt",ola:"pt",ol\u00e1:"pt",tchau:"pt",adeus:"pt",beleza:"pt","ate logo":"pt","e ai":"pt","e a\xed":"pt",xau:"pt",oba:"pt",nossa:"pt",poxa:"pt",ent\u00e3o:"pt",entao:"pt",uau:"pt",bom:"pt",certo:"pt",ufa:"pt",eita:"pt",otimo:"pt",\u00f3timo:"pt","est\xe1 \xf3timo":"pt","esta otimo":"pt","cruz credo":"pt",salut:"fr",coucou:"fr",daccord:"fr",accord:"fr",bonne:"fr",bonsoir:"fr","bon jour":"fr","bon soir":"fr","d'acc":"fr","d\xb4acc":"fr","d`acc":"fr",allo:"fr",merde:"fr",ouf:"fr",aie:"fr",bon:"fr",zut:"fr",boum:"fr",donc:"fr",mince:"fr",comment:"fr",pardon:"fr",quand:"fr",beurk:"fr",putain:"fr",connard:"fr","a propos":"fr","quand meme":"fr","oh la la":"fr","miam miam":"fr","merci beacoup":"fr","ca va":"fr",dag:"nl",hoi:"nl",goedemorgen:"nl",welkom:"nl",dank:"nl","dank u":"nl","dank je":"nl",bedankt:"nl",verdorie:"nl",godverdomme:"nl",verdomme:"nl",klote:"nl",kloten:"nl",kak:"nl",kut:"nl",lul:"nl",flikker:"nl",h\u00e9:"nl",czesc:"pl","bon dia":"ca","si us plau":"ca","moltes gr\xe0cies":"ca","moltes gracies":"ca","com est\xe0s":"ca","com estas":"ca","fins aviat":"ca",gr\u00e0cies:"ca",gracies:"ca",perd\u00f3:"ca",enhorabona:"ca",\u00edndex:"ca"},o=/^([Hh]allo|[Ll]ieber?|[Mm]oin|[Nn]a|[Ss]ervus|[Dd]anke|Gr\xfce?zi|Gruezi|Herr|Frau|Fr\xe4ulein)\s[A-Z\xc4\xd6\xdc][a-z\xe4\xfc\xdf]/,i=/(\b|^)(guten\s(tag|abend|morgen)|sehr\sgeehrter?)(\b|$)/,a=/^ol[a\xe1\xe0]\s|((\b|^)(boa\snoite|bom\sdia)(\b|$))/,s=/(\b|^)(bon\sdia|moltes\sgr[a\xe0]cies|bona\ssort|no\spassa\sres|com\sest[\xe0a]s)(\b|$)/,u=/^[\xbf\xa1.\u2026]+$/,c=/[!.:;\u2026?,]+$/;function l(e,t){if(e.length>50)return null;var n=e.trim(),l=n.replace(u,"").replace(c,"").trim().toLowerCase();if(t.includes("de")&&(o.test(n)||i.test(l)))return"de";if(t.includes("pt")&&a.test(l))return"pt";if(t.includes("ca")&&s.test(l))return"ca";var d=r[l];return d&&t.includes(d)?d:null}},54421:(e,t,n)=>{"use strict";var r=n(77431),o=n(82561),i=n(77001),a=n(36441),s=n(10028),u=n(22412);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return f(c,"_invoke",function(n,r,o){var i,s,u,c=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,u=e,f.n=n,a}};function h(n,r){for(s=n,u=r,t=0;!d&&c&&!o&&t<l.length;t++){var o,i=l[t],h=f.p,p=i[2];n>3?(o=p===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,p),s=l,u=p;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,u)):f.n=u:f.v=u);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==a)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(n,o,i),!0),c}var a={};function s(){}function u(){}function c(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(f(t={},r,function(){return this}),t),h=c.prototype=s.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,f(e,o,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=c,f(h,"constructor",c),f(c,"constructor",u),u.displayName="GeneratorFunction",f(c,o,"GeneratorFunction"),f(h),f(h,o,"Generator"),f(h,r,function(){return this}),f(h,"toString",function(){return"[object Generator]"}),(d=function(){return{w:i,m:p}})()}function f(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}f=function(e,t,n,r){function i(t,n){f(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},f(e,t,n,r)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={accept:"application/json","content-type":"application/json"};function _(e){return(0,s.Gv)(e)&&!1===Object.values(e).some(function(e){return"number"!=typeof e})}function E(e){return!!(0,s.Gv)(e)&&[["text"],["score",_],["label"],["origin"],["uuid"]].reduce(function(t,n){var r=(0,a.A)(n,2),o=r[0],i=r[1],u=void 0===i?s.Kg:i;return!!(t&&(0,s.Tn)(u)&&String(o)in e)&&u(e[String(o)])},!0)}function g(e){switch(e){case"simple":return"simplicity";case"formal":return"formality";case"natural":return"humanize";default:return e}}var m=function(){return(0,i.A)(function e(){(0,o.A)(this,e)},null,[{key:"load",value:(n=(0,r.A)(d().m(function e(t,n,r,o,i,a){var s,u,c,l,f,h,p;return d().w(function(e){for(;;)switch(e.n){case 0:if(u=[a,n.trim()].join("@"),c=this._rewriteCache.get(u),l=null!==(s=this._history.get(n))&&void 0!==s?s:null,!c){e.n=1;break}return e.a(2,Promise.resolve({rephrases:c,previousSentence:l}));case 1:return f="/rewriting/rewrite",a&&(f+="/"+g(a)),e.n=2,this._request("rewrite",f,t,n,r,o,i);case 2:return h=e.v,(p=h.filter(function(e){return E(e)}).map(function(e){return{text:e.text,score:e.score,label:e.label,origin:e.origin,uuid:e.uuid}}).filter(function(e,t,n){var r=e.text;return n.findIndex(function(e){var t=e.text;return r===t})===t})).length>0&&this._rewriteCache.set(u,p),e.a(2,{rephrases:p,previousSentence:l})}},e,this)})),function(e,t,r,o,i,a){return n.apply(this,arguments)})},{key:"abort",value:function(e){for(var t=0,n=void 0===e?["rewrite"]:[e];t<n.length;t++){var r=n[t],o=this._abortControllers.get(r)||[];this._abortCurrentRequests(o),this._abortControllers.set(r,[])}}},{key:"_request",value:(t=(0,r.A)(d().m(function e(t,n,r,o,i,a,c){var l,f,h,_,E,g,m,v;return d().w(function(e){for(;;)switch(e.n){case 0:return this.abort(t),l=JSON.stringify({text:o,offset:0,length:0,count:"rewrite"===t?5:1,userID:r,language:i.slice(0,2),inhouseOnly:a,email:null==c?void 0:c.email,token:null==c?void 0:c.token,p:null==c?void 0:c.isPremium}),f=new AbortController,h=this._abortControllers.get(t)||[],e.n=1,(0,s.vB)();case 1:return p["X-LT-checksum"]=e.v,null!=c&&c.isPremium&&(p["X-LT-p"]="1"),h.push(f),this._abortControllers.set(t,h),e.n=2,fetch(u.BASE_REPHRASING_SERVER_URL+n,{method:"post",signal:f.signal,mode:"cors",headers:p,body:l});case 2:if(!1!==(_=e.v).ok){e.n=3;break}throw E=function(){switch(_.status){case 413:return"PayloadTooLarge";case 524:return"ServerTimeout";default:return"ServerFailure (".concat(_.status,")")}}(),new Error(E);case 3:return e.n=4,_.json();case 4:return g=e.v,m=(g||{}).rewrites,v=void 0===m?[]:m,e.a(2,v)}},e,this)})),function(e,n,r,o,i,a,s){return t.apply(this,arguments)})},{key:"requestSplitSentence",value:(e=(0,r.A)(d().m(function e(t,n,r,o,i){var s,u,c,l;return d().w(function(e){for(;;)switch(e.n){case 0:if(!(s=this._splitSentenceCache.get(n.trim()))){e.n=1;break}return e.a(2,Promise.resolve(s));case 1:return e.n=2,this._request("sentence-splitting","/rewriting/rewrite/sentence_splitting",t,n,r,o,i);case 2:if(u=e.v,c=(0,a.A)(u,1),!E(l=c[0])){e.n=3;break}return this._splitSentenceCache.set(n.trim(),l),e.a(2,l);case 3:return e.a(2,null)}},e,this)})),function(t,n,r,o,i){return e.apply(this,arguments)})},{key:"_abortCurrentRequests",value:function(e){var t,n=c(e);try{for(n.s();!(t=n.n()).done;){t.value.abort()}}catch(e){n.e(e)}finally{n.f()}}}]);var e,t,n}();h(m,"_rewriteCache",new Map),h(m,"_splitSentenceCache",new Map),h(m,"_history",new Map),h(m,"_abortControllers",new Map([["rewrite",[]],["sentence-splitting",[]]]))},55196:(e,t,n)=>{"use strict";var r=n(82561),o=n(77001);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){return(0,o.A)(function e(){(0,r.A)(this,e),i(this,"store",new Map),i(this,"isAvailable",!0)},[{key:"collectionFor",value:function(e){var t=this.store.get(e);return t||(t=new Map,this.store.set(e,t)),t}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";this.collectionFor(n).set(e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.collectionFor(t).get(e)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this.collectionFor(t).delete(e)}},{key:"getDatabaseSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.collectionFor(e).size}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.collectionFor(e).clear()}}])}(),s=function(){function e(){(0,r.A)(this,e),i(this,"isAvailable","undefined"!=typeof window&&"undefined"!=typeof localStorage)}return(0,o.A)(e,[{key:"set",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";if(this.isAvailable){var o=e.makeKey(r,t);self.localStorage.setItem(o,JSON.stringify(n))}}},{key:"get",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if(this.isAvailable){var r=e.makeKey(n,t),o=self.localStorage.getItem(r);if(null!==o)try{return JSON.parse(o)}catch(e){return o}}}},{key:"delete",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if(this.isAvailable){var r=e.makeKey(n,t);self.localStorage.removeItem(r)}}},{key:"getDatabaseSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(!this.isAvailable)return 0;for(var t="".concat(e,"::"),n=0,r=0;r<self.localStorage.length;r++){var o=self.localStorage.key(r);null!=o&&o.startsWith(t)&&n++}return n}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(this.isAvailable){for(var t="".concat(e,"::"),n=[],r=0;r<self.localStorage.length;r++){var o=self.localStorage.key(r);null!=o&&o.startsWith(t)&&n.push(o)}n.forEach(function(e){return self.localStorage.removeItem(e)})}}}],[{key:"makeKey",value:function(e,t){return"".concat(e,"::").concat(t)}}])}();var u=function(){function e(){(0,r.A)(this,e),i(this,"_storageClient",void 0),this._storageClient=function(){try{var e=new s;if(e.isAvailable)return e}catch(e){return new a}return new a}()}return(0,o.A)(e,[{key:"set",value:function(e,t){return this._storageClient.set(e,t,"TextField")}},{key:"get",value:function(e){return this._storageClient.get(e,"TextField")}},{key:"delete",value:function(e){return this._storageClient.delete(e,"TextField")}},{key:"clear",value:function(){return this._storageClient.clear("TextField")}},{key:"getDatabaseSize",value:function(){var e=this._storageClient;return e.getDatabaseSize?e.getDatabaseSize("TextField"):0}}],[{key:"instance",value:function(){return e._instance||(e._instance=new e),e._instance}},{key:"setStorageClient",value:function(t){e.instance()._storageClient=t}}])}();i(u,"_instance",void 0)},60273:(e,t,n)=>{"use strict";n.d(t,{A:()=>F});var r=n(77431),o=n(82561),i=n(77001),a=n(10028),s=n(51159),u=n(24640);function c(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return l(c,"_invoke",function(n,r,o){var i,s,u,c=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,u=e,f.n=n,a}};function h(n,r){for(s=n,u=r,t=0;!d&&c&&!o&&t<l.length;t++){var o,i=l[t],h=f.p,p=i[2];n>3?(o=p===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,p),s=l,u=p;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,u)):f.n=u:f.v=u);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==a)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(n,o,i),!0),c}var a={};function s(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(l(t={},r,function(){return this}),t),h=d.prototype=s.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,o,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=d,l(h,"constructor",d),l(d,"constructor",u),u.displayName="GeneratorFunction",l(d,o,"GeneratorFunction"),l(h),l(h,o,"Generator"),l(h,r,function(){return this}),l(h,"toString",function(){return"[object Generator]"}),(c=function(){return{w:i,m:p}})()}function l(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,t,n,r){function i(t,n){l(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},l(e,t,n,r)}var d,f,h,p=n(22412).SHORT_TEXT_MAX_LENGTH,_=/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}\b/gi,E=/\b(?:(https?|ftp|mailto|tel|wss):\/\/|www\.|(chrome|moz|safari)(-extension)?:\/\/|file:\/\/)[^\s]+/gi,g=/@[A-Z0-9._-]+/gi,m=/[\-~\$]?[0-9]+/g,v=/^([0-9a-z]+\.)(\s|$)/gim,b=/[\u25CF\u25CB\u25C6\u27A2\u25A0\u25A1\u2605\u274F\u2794\u21B5\u2756\u25AA\u2751\u2022]+(\s|$)/gim,y=/^[-*](\s|$)/gim,A=/\b([0-9]+[.,][0-9]+[.,][0-9]+[.,][0-9]+|[0-9]+[.,][0-9]+[.,][0-9]+|[0-9]+[.,][0-9]+)\b/g,T=/(?<=(\s|^))(:\-?[\)(DPpoO]|;\-?\)|(xo|xO|XO){1,10}|xD|XD|\<3)(?=(\s|$))/g,S=/[\u2665\u2661\u2764]+/g,R=/\b[A-Z\-]{1,10}[\-_]?\d{2,100}\b/gi,O=/\u203D/g,I=/(\!{2,50}|\?{2,50}|(\?\!){2,50}|\.{4,50}|\-{2,10}|\:{2,50}|\;{2,50}|\u2026{2,50}|\_{2,50}|\,{2,50}|\<{2,50}|\>{2,50}|\#{2,50}|\*{2,50}|\+{2,50}|\={2,50}|\/{2,50}|\\{2,50}|\%{2,50}|\~{2,50})/g,N=/[\u2014\u2013-]+/g,C=/\u2011+/g,w=/[\uFEFF\u200B\u200C\u200D\u00AD\u2060\u2063\u202A\u202B\u202C\u202D]+/g,P=/\s+/g,k=/^\/[a-z\-_]+/gm,L=/(?<=(\s|^))#[a-z0-9]+/gi,D=/(?<=(\s|^))[#%_\$\u20ac\xa7*><~]+(?=(\s|$))/g,x=/\b[a-z0-9-_\/\.]+\.(com?|de|co\.uk|ch|at|fr|org|dk|se|no|info|net|eu|ai|io|nl|pl|ru|com\.br|br|pt|it|ca|com\.mx|mx|cn|mp[43]|jpe?g|gif|php|html?|s?css|jsx?|mov|png|web[mp]|pdf|docx?|xlsx?|pptx?|txt|rtf|bmp|svg|odt|zip|rar|gz|tar|app|dmg|exe|cad|psd|dotx?|tiff?|tsx?|woff|xml|csv|wav|ogg|pkg|rpm|iso|sql|php|email|eml|msi|otf|ttf|aspx?|py|java|swift|ods|sys|log|avi|wmv|m4v|sh)\b/gi,U=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF]|[\uFE00-\uFE0F]|[\u2B50-\u2B52])/g,M=["haw","hmn","co","fy","gd","cbk","und"],G={fil:"tl"},F=function(){return(0,i.A)(function e(){(0,o.A)(this,e)},null,[{key:"supported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return self.LanguageDetector&&"function"==typeof self.LanguageDetector.create&&"function"==typeof self.LanguageDetector.availability&&!e.includes("uk")&&!e.includes("br")&&!e.includes("ast")&&!e.includes("crh")&&this.isAtLeastChromeVersion(138)}},{key:"isAtLeastChromeVersion",value:function(e){return navigator.userAgent.includes("Chrome/")&&Number((navigator.userAgent.match(/Chrome\/(\d+)/)||[void 0,0])[1])>=e&&!navigator.userAgent.includes("Chromium/")&&!navigator.userAgent.includes("Edge/")&&!navigator.userAgent.includes("Edg/")&&!navigator.userAgent.includes("YaBrowser/")&&!navigator.userAgent.includes("OPR/")&&!navigator.userAgent.includes("Brave/")}},{key:"init",value:(t=(0,r.A)(c().m(function e(){var t,n,r;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!(t=this.supported())){e.n=2;break}return n=["downloadable","available"],e.n=1,self.LanguageDetector.availability();case 1:t=n.includes.call(n,e.v);case 2:if(!t){e.n=7;break}if(e.p=3,r=this._browserLanguageDetector){e.n=5;break}return e.n=4,self.LanguageDetector.create();case 4:r=e.v;case 5:this._browserLanguageDetector=r,e.n=7;break;case 6:e.p=6,e.v;case 7:return e.a(2)}},e,this,[[3,6]])})),function(){return t.apply(this,arguments)})},{key:"detect",value:(e=(0,r.A)(c().m(function e(t,n){var r,o,i,a,u,l,d=arguments;return c().w(function(e){for(;;)switch(e.n){case 0:if(r=d.length>2&&void 0!==d[2]&&d[2],this.supported(n)){e.n=1;break}throw new Error("Language detection unsupported");case 1:return e.n=2,self.LanguageDetector.availability();case 2:if("unavailable"!==e.v){e.n=3;break}throw new Error("Language detection unavailable");case 3:if((o=this.normalizeText(t))||(o=t.trim()),o=o.slice(0,1e4),(i=this.normalizeLanguages(n)).length&&o.length<p&&!r&&(i=this.addLanguagesToDetect(i,o)),!(a=(0,s.i)(o,n))){e.n=4;break}return e.a(2,{language:a,confidence:.99});case 4:if(l=this._browserLanguageDetector){e.n=6;break}return e.n=5,self.LanguageDetector.create();case 5:l=e.v;case 6:return this._browserLanguageDetector=l,e.n=7,this._browserLanguageDetector.detect(o);case 7:if(u=(u=e.v).filter(function(e){return!M.includes(e.detectedLanguage)&&!e.detectedLanguage.endsWith("-Latn")}),!(!r&&1===u.length&&u[0].confidence>.9&&o.length>10&&o.split(" ").length>1)){e.n=8;break}return e.a(2,{language:this.mapToSupportedLanguageCode(u[0].detectedLanguage),confidence:u[0].confidence});case 8:return!n.includes("gl")&&(n.includes("pt")||n.includes("ca")||n.includes("es"))&&(u=u.filter(function(e){return"gl"!==e.detectedLanguage})),i.length&&(o.length<p||r)&&(u=u.filter(function(e){return i.includes(e.detectedLanguage.toLowerCase())})),e.a(2,u[0]?{language:this.mapToSupportedLanguageCode(this.getPrimaryLanguageCode(u[0].detectedLanguage)),confidence:u[0].confidence}:null)}},e,this)})),function(t,n){return e.apply(this,arguments)})},{key:"normalizeText",value:function(e){return e=this.stripEmojis(e),e=this.stripEmailAdresses(e),e=this.stripURLs(e),e=this.stripSmileys(e),e=this.stripBulletPoints(e),e=this.stripFileNamesAndDomains(e),e=this.stripTokensWithNumbers(e),e=this.stripNumbers(e),e=this.stripMentions(e),e=this.stripUnicodeHearts(e),e=this.stripInvisibleWhitespace(e),e=this.stripChatCommands(e),e=this.stripHashTags(e),e=this.stripRepeatedWords(e),e=this.stripLeftoverChars(e),e=this.normalizePunctuation(e),e=this.normalizeHyphens(e),(e=this.normalizeWhitespace(e)).trim()}},{key:"stripEmojis",value:function(e){return e.replace(U,"")}},{key:"stripEmailAdresses",value:function(e){return e.replace(_,"")}},{key:"stripURLs",value:function(e){return e.replace(E,"")}},{key:"stripFileNamesAndDomains",value:function(e){return e.replace(x,"")}},{key:"stripBulletPoints",value:function(e){return e.replace(v,"").replace(b,"").replace(y,"")}},{key:"stripMentions",value:function(e){return e.replace(g,"")}},{key:"stripSmileys",value:function(e){return e.replace(T,"")}},{key:"stripUnicodeHearts",value:function(e){return e.replace(S,"")}},{key:"stripTokensWithNumbers",value:function(e){return e.replace(R,"")}},{key:"stripHashTags",value:function(e){return e.replace(L,"")}},{key:"stripNumbers",value:function(e){return e.replace(A,"").replace(m,"")}},{key:"stripInvisibleWhitespace",value:function(e){return e.replace(w,"")}},{key:"stripChatCommands",value:function(e){return e.replace(k,"")}},{key:"stripLeftoverChars",value:function(e){return e.replace(D,"")}},{key:"stripRepeatedWords",value:function(e){try{return e.replace(new RegExp("(?<![\\p{L}])([\\p{L}]+(?:-[\\p{L}]+)*)(?:\\s+\\1)+(?![\\p{L}])","giu"),"$1")}catch(t){return e.replace(/(^|[^a-z\xe4\xf6\xfc\xdf-])([a-z\xe4\xf6\xfc\xdf]+(?:-[a-z\xe4\xf6\xfc\xdf]+)*)(?:\s+\2)+(?![a-z\xe4\xf6\xfc\xdf-])/gi,"$1$2")}}},{key:"normalizeHyphens",value:function(e){return e.replace(N,"-").replace(C,"-")}},{key:"normalizePunctuation",value:function(e){return e.replace(O,"!").replace(I,function(e,t){return t.charAt(0)})}},{key:"normalizeWhitespace",value:function(e){return e.replace(P,function(e){return e.includes("\n")?"\n":" "})}},{key:"addLanguagesToDetect",value:function(e,t){return e=(0,a.sb)(e.concat((0,u.A)(t))),t.includes("\xdf")&&!e.includes("de")&&e.push("de"),!t.includes("\u0142")&&!t.includes("\u0141")||e.includes("pl")||e.push("pl"),!t.includes("\xa1")&&!t.includes("\xbf")||e.includes("es")||e.push("es"),e}},{key:"mapToSupportedLanguageCode",value:function(e){return G[e]||e}},{key:"normalizeLanguages",value:function(e){var t=this;return e.map(function(e){return t.getPrimaryLanguageCode(e)})}},{key:"getPrimaryLanguageCode",value:function(e){return e.split("-")[0].toLowerCase()}}]);var e,t}();h=void 0,(f="_browserLanguageDetector")in(d=F)?Object.defineProperty(d,f,{value:h,enumerable:!0,configurable:!0,writable:!0}):d[f]=h},61927:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})},63919:(e,t,n)=>{"use strict";n.d(t,{OJ:()=>r.OJ,Qf:()=>r.Ay,l_:()=>o.l});var r=n(31600),o=(n(22670),n(43751),n(54421),n(75848),n(76948),n(24315),n(10028),n(32979),n(35599),n(77337));n(25444),n(35672)},71158:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(23224),o=n(78427);function i(e){var t=(0,o.A)(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},75848:(e,t,n)=>{"use strict";n(22412),n(22670),n(43751),n(54421),n(55196),n(76948),n(10028)},76948:(e,t,n)=>{"use strict";var r=n(22412);"*".concat(r.INVISIBLE_SEPARATOR),"*".concat(r.INVISIBLE_SEPARATOR),r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR,r.INVISIBLE_SEPARATOR},77001:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(71158);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(0,r.A)(o.key),o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},77337:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var r=n(82561),o=n(77001);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(){(0,r.A)(this,e)}return(0,o.A)(e,null,[{key:"_contructor",value:function(){if(!this._isInitialized){e._isChromium=navigator.userAgent.includes("Chrome/")||navigator.userAgent.includes("Chromium/"),e._isFirefox=navigator.userAgent.includes("Firefox/"),e._isThunderbird=navigator.userAgent.includes("Thunderbird/"),e._isOpera=navigator.userAgent.includes("OPR/"),e._isEdge=navigator.userAgent.includes("Edg/"),e._isOldEdge=navigator.userAgent.includes("Edge/"),e._isSafari=(navigator.userAgent.includes("Safari/")||navigator.userAgent.includes("AppleWebKit"))&&!e._isChromium&&!e._isEdge&&!e._isOpera,e._isYaBrowser=navigator.userAgent.includes("YaBrowser/"),e._isChrome=e._isChromium&&!e._isOpera&&!e._isEdge&&!e._isOldEdge&&!e._isYaBrowser;var t=navigator.userAgent.match(/Chrome\/(\d+)/);t&&(e._isUnsupportedChrome=parseInt(t[1])<67&&!navigator.userAgent.includes("Edge/"));var n=navigator.userAgent.match(/Firefox\/(\d+)/);n&&(e._isUnsupportedFirefox=parseInt(n[1])<60),this._isInitialized=!0}}},{key:"getOS",value:function(){return navigator.userAgent.includes("Macintosh")?"Mac":navigator.userAgent.includes("Windows")?"Windows":navigator.userAgent.includes("CrOS")?"CrOS":navigator.userAgent.includes("Linux")?"Linux":"Other"}},{key:"isChromium",value:function(){return e._isChromium}},{key:"isChrome",value:function(){return e._isChrome}},{key:"isThunderbird",value:function(){return e._isThunderbird}},{key:"isFirefox",value:function(){return e._isFirefox}},{key:"isOpera",value:function(){return e._isOpera}},{key:"isEdge",value:function(){return e._isEdge}},{key:"isSafari",value:function(){return e._isSafari}},{key:"isYaBrowser",value:function(){return e._isYaBrowser}},{key:"isUnsupportedChrome",value:function(){return e._isUnsupportedChrome}},{key:"isUnsupportedFirefox",value:function(){return e._isUnsupportedFirefox}},{key:"isUnsupportedBrowser",value:function(){return e.isUnsupportedChrome()||e.isUnsupportedFirefox()}},{key:"getBrowserName",value:function(){return e.isChrome()?"Chrome":e.isFirefox()?"Firefox":e.isOpera()?"Opera":e.isEdge()?"Edge":e.isSafari()?"Safari":e.isYaBrowser()?"Yandex":"Unknown Browser"}},{key:"getUserAgentIdentifier",value:function(){var e="webextension";return this.isChrome()?e+="-chrome":this.isFirefox()?e+="-firefox":this.isOpera()?e+="-opera":this.isEdge()?e+="-edge":this.isYaBrowser()?e+="-chrome":this.isSafari()?e+="-safari":e+="-unknown",e+"-ng"}},{key:"isTouchDevice",value:function(){if(!("ontouchstart"in self))return!1;var e=navigator.userAgent.includes("Android");return this.isIOS()||e}},{key:"isIOS",value:function(){var e=navigator.userAgent.includes("iPhone OS"),t=navigator.userAgent.includes("Macintosh")&&Boolean(navigator.maxTouchPoints&&navigator.maxTouchPoints>2);return e||t}},{key:"isIOSTouchDevice",value:function(){return"ontouchstart"in self&&this.isIOS()}},{key:"isMacApp",value:function(){return navigator.userAgent.includes("AppleWebKit/")&&navigator.userAgent.includes("LanguageTool/")&&!navigator.userAgent.includes("Chrome/")&&!navigator.userAgent.includes("Chromium/")}},{key:"isWindowsApp",value:function(){return navigator.userAgent.includes("LanguageToolWindows/")}}])}();i(a,"_isChromium",!1),i(a,"_isChrome",!1),i(a,"_isFirefox",!1),i(a,"_isThunderbird",!1),i(a,"_isOpera",!1),i(a,"_isOldEdge",!1),i(a,"_isEdge",!1),i(a,"_isSafari",!1),i(a,"_isYaBrowser",!1),i(a,"_isUnsupportedChrome",!1),i(a,"_isUnsupportedFirefox",!1),i(a,"_isInitialized",!1),a._contructor()},77431:(e,t,n)=>{"use strict";function r(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,u,"next",e)}function u(e){r(a,o,i,s,u,"throw",e)}s(void 0)})}}n.d(t,{A:()=>o})},78427:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(23224);function o(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=(0,r.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},81568:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(27120),o=function(){var e="https://chromewebstore.google.com/detail/quillbot-ai-writing-and-g/iidnbdjijdkbmajdffnidomddglmieko/reviews?utm_source=chrome-active&utm_medium=referral&utm_campaign=feedback_review_cta_link";return"edge-active"===r.tU.EXTENSION_TYPE&&(e="https://microsoftedge.microsoft.com/addons/detail/cphpplikchcioccedpjacdanfibnimmh"),"safari-active"===r.tU.EXTENSION_TYPE&&(e="https://apps.apple.com/us/app/quillbot-for-safari/id6738683741"),e}},82561:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{A:()=>r})},83131:function(e,t){var n,r,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[e],n=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const t="The message port closed before a response was received.",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class r extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=e=>e&&"object"==typeof e&&"function"==typeof e.then,i=(t,n)=>(...r)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):n.singleCallbackArg||r.length<=1&&!1!==n.singleCallbackArg?t.resolve(r[0]):t.resolve(r)},a=e=>1==e?"argument":"arguments",s=(e,t)=>function(n,...r){if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise((o,a)=>{if(t.fallbackToNoCallback)try{n[e](...r,i({resolve:o,reject:a},t))}catch(i){n[e](...r),t.fallbackToNoCallback=!1,t.noCallback=!0,o()}else t.noCallback?(n[e](...r),o()):n[e](...r,i({resolve:o,reject:a},t))})},u=(e,t,n)=>new Proxy(t,{apply:(t,r,o)=>n.call(r,e,...o)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},n={})=>{let r=Object.create(null),o={has:(t,n)=>n in e||n in r,get(o,i,a){if(i in r)return r[i];if(!(i in e))return;let d=e[i];if("function"==typeof d)if("function"==typeof t[i])d=u(e,e[i],t[i]);else if(c(n,i)){let t=s(i,n[i]);d=u(e,e[i],t)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(c(t,i)||c(n,i)))d=l(d,t[i],n[i]);else{if(!c(n,"*"))return Object.defineProperty(r,i,{configurable:!0,enumerable:!0,get:()=>e[i],set(t){e[i]=t}}),d;d=l(d,t[i],n["*"])}return r[i]=d,d},set:(t,n,o,i)=>(n in r?r[n]=o:e[n]=o,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(r,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(r,t)},i=Object.create(e);return new Proxy(i,o)},d=e=>({addListener(t,n,...r){t.addListener(e.get(n),...r)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}}),f=new r(e=>"function"!=typeof e?e:function(t){const n=l(t,{},{getContent:{minArgs:0,maxArgs:0}});e(n)}),h=new r(e=>"function"!=typeof e?e:function(t,n,r){let i,a,s=!1,u=new Promise(e=>{i=function(t){s=!0,e(t)}});try{a=e(t,n,i)}catch(e){a=Promise.reject(e)}const c=!0!==a&&o(a);if(!0!==a&&!c&&!s)return!1;const l=e=>{e.then(e=>{r(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{})};return l(c?a:u),!0}),p=({reject:n,resolve:r},o)=>{e.runtime.lastError?e.runtime.lastError.message===t?r():n(new Error(e.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?n(new Error(o.message)):r(o)},_=(e,t,n,...r)=>{if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise((e,t)=>{const o=p.bind(null,{resolve:e,reject:t});r.push(o),n.sendMessage(...r)})},E={devtools:{network:{onRequestFinished:d(f)}},runtime:{onMessage:d(h),onMessageExternal:d(h),sendMessage:_.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:_.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},g={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":g},services:{"*":g},websites:{"*":g}},l(e,E,n)};e.exports=n(chrome)}},void 0===(o="function"==typeof n?n.apply(t,r):n)||(e.exports=o)},86326:(e,t,n)=>{"use strict";e.exports=n(48249)},87526:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(28807),o=n(34265),i=n(96492),a=n(44035);function s(e){return(0,r.A)(e)||(0,o.A)(e)||(0,i.A)(e)||(0,a.A)()}},89493:(e,t,n)=>{"use strict";function r(){var e={cpuArchitecture:"Unknown",cpuCores:navigator.hardwareConcurrency||-1,gpuRenderer:"Unavailable",gpuVendor:"Unavailable",platform:navigator.platform||"Unknown",ramGB:navigator.deviceMemory||-1,userAgent:navigator.userAgent||"Unknown"};try{if("undefined"!=typeof document){var t=document.createElement("canvas"),n=t.getContext("webgl")||t.getContext("experimental-webgl");if(n){var r=n.getExtension("WEBGL_debug_renderer_info");r?(e.gpuVendor=n.getParameter(r.UNMASKED_VENDOR_WEBGL),e.gpuRenderer=n.getParameter(r.UNMASKED_RENDERER_WEBGL)):(e.gpuVendor="unknown",e.gpuRenderer="unknown")}else e.gpuVendor="unknown",e.gpuRenderer="unknown"}else e.gpuVendor="unknown",e.gpuRenderer="unknown"}catch(t){e.gpuVendor="unknown",e.gpuRenderer="unknown"}try{navigator.userAgentData&&"userAgentData"in navigator&&"function"==typeof navigator.userAgentData.getHighEntropyValues&&"userAgentData"in navigator&&"function"==typeof navigator.userAgentData.getHighEntropyValues?navigator.userAgentData.getHighEntropyValues(["architecture"]).then(function(t){e.cpuArchitecture=t.architecture||"Unknown"}).catch(function(){e.cpuArchitecture="unknown"}):e.cpuArchitecture="unknown"}catch(t){e.cpuArchitecture="unknown"}return e}n.d(t,{j:()=>r})},94175:(e,t,n)=>{"use strict";n.d(t,{j:()=>h});var r=n(36441),o=n(77431),i=n(82561),a=n(77001),s=n(35599);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return d(c,"_invoke",function(n,r,o){var i,s,u,c=0,l=o||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,u=e,f.n=n,a}};function h(n,r){for(s=n,u=r,t=0;!d&&c&&!o&&t<l.length;t++){var o,i=l[t],h=f.p,p=i[2];n>3?(o=p===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,f.v=r,f.n=i[1]):h<p&&(o=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,f.n=p,s=0))}if(o||n>1)return a;throw d=!0,r}return function(o,l,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,p),s=l,u=p;(t=s<2?e:u)||!d;){i||(s?s<3?(s>1&&(f.n=-1),h(s,u)):f.n=u:f.v=u);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(d=f.n<0)?u:n.call(r,f))!==a)break}catch(t){i=e,s=1,u=t}finally{c=1}}return{value:t,done:d}}}(n,o,i),!0),c}var a={};function s(){}function u(){}function c(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(d(t={},r,function(){return this}),t),h=c.prototype=s.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,d(e,o,"GeneratorFunction")),e.prototype=Object.create(h),e}return u.prototype=c,d(h,"constructor",c),d(c,"constructor",u),u.displayName="GeneratorFunction",d(c,o,"GeneratorFunction"),d(h),d(h,o,"Generator"),d(h,r,function(){return this}),d(h,"toString",function(){return"[object Generator]"}),(l=function(){return{w:i,m:p}})()}function d(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}d=function(e,t,n,r){function i(t,n){d(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},d(e,t,n,r)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(){(0,i.A)(this,e),f(this,"sessions",new Map),f(this,"editorToSession",new Map),f(this,"uniqueIdentifierToSession",new Map),f(this,"hostOrigin",""),f(this,"hostUrl",""),f(this,"ongoingReinitializationPromises",new Map),f(this,"ongoingSessionCreationPromises",new Map)}return(0,a.A)(e,[{key:"setHostUrl",value:function(e){try{var t=new URL(e);this.hostOrigin=t.origin}catch(t){this.hostOrigin=e}}},{key:"getHostUrl",value:function(){return this.hostOrigin}},{key:"createWritingSession",value:(h=(0,o.A)(l().m(function e(t,n){var r,o,i,a,s,u=this;return l().w(function(e){for(;;)switch(e.n){case 0:if(!this.uniqueIdentifierToSession.has(n)){e.n=1;break}return r=this.uniqueIdentifierToSession.get(n),(o=this.sessions.get(r)).editorIds.has(t)||(this.removeEditorFromSession(t),o.editorIds.add(t),this.editorToSession.set(t,o.sessionId)),e.a(2,o.sessionId);case 1:if(i=this.ongoingSessionCreationPromises.get(n)){e.n=2;break}i=this.performSessionCreation(t,n).finally(function(){u.ongoingSessionCreationPromises.delete(n)}),this.ongoingSessionCreationPromises.set(n,i),e.n=4;break;case 2:return e.n=3,i;case 3:a=e.v,(s=this.sessions.get(a))&&!s.editorIds.has(t)&&(this.removeEditorFromSession(t),s.editorIds.add(t),this.editorToSession.set(t,a));case 4:return e.a(2,i)}},e,this)})),function(e,t){return h.apply(this,arguments)})},{key:"joinSession",value:function(e,t){var n=this.sessions.get(t);if(n)return this.removeEditorFromSession(e),n.editorIds.add(e),this.editorToSession.set(e,t),n}},{key:"removeEditorFromSession",value:function(e){var t=this.editorToSession.get(e);if(t){var n=this.sessions.get(t);if(n&&(n.editorIds.delete(e),0===n.editorIds.size)){this.sessions.delete(t);var o,i=u(this.uniqueIdentifierToSession.entries());try{for(i.s();!(o=i.n()).done;){var a=(0,r.A)(o.value,2),s=a[0];if(a[1]===t){this.uniqueIdentifierToSession.delete(s);break}}}catch(e){i.e(e)}finally{i.f()}}this.editorToSession.delete(e)}}},{key:"updateSurroundingContent",value:function(e,t){var n=this.sessions.get(e);n&&(n.surroundingContent=t)}},{key:"getSession",value:function(e){var t=this.editorToSession.get(e);if(t)return this.sessions.get(t)}},{key:"getEditorsInSameSession",value:function(e){var t=this.getSession(e);return t?Array.from(t.editorIds):[]}},{key:"getSessionById",value:function(e){return this.sessions.get(e)}},{key:"generateSessionId",value:(d=(0,o.A)(l().m(function e(t,n){var r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,s.p.createWritingSession(n,t);case 1:return r=e.v,e.a(2,r)}},e)})),function(e,t){return d.apply(this,arguments)})},{key:"reIntializeWritingSession",value:(c=(0,o.A)(l().m(function e(t){var n,r=this;return l().w(function(e){for(;;)if(0===e.n)return(n=this.ongoingReinitializationPromises.get(t))||(n=this.performReinitialization(t).finally(function(){r.ongoingReinitializationPromises.delete(t)}),this.ongoingReinitializationPromises.set(t,n)),e.a(2,n)},e,this)})),function(e){return c.apply(this,arguments)})},{key:"performReinitialization",value:(n=(0,o.A)(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:if(!(n=this.findUniqueIdentifierFromWritingSession(t))){e.n=2;break}return e.n=1,s.p.createWritingSession(this.hostUrl,n);case 1:return r=e.v,e.a(2,r);case 2:return e.a(2,"");case 3:return e.a(2)}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"performSessionCreation",value:(t=(0,o.A)(l().m(function e(t,n){var r,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.generateSessionId(n,this.hostUrl);case 1:if(r=e.v){e.n=2;break}return e.a(2,"");case 2:return o={sessionId:r,editorIds:new Set([t]),surroundingContent:""},this.removeEditorFromSession(t),this.sessions.set(r,o),this.uniqueIdentifierToSession.set(n,r),this.editorToSession.set(t,r),e.a(2,r)}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"findUniqueIdentifierFromWritingSession",value:function(e){var t,n=u(this.uniqueIdentifierToSession);try{for(n.s();!(t=n.n()).done;){var o=(0,r.A)(t.value,2),i=o[0];if(o[1]===e)return i}}catch(e){n.e(e)}finally{n.f()}}}],[{key:"getInstance",value:function(t){if(!e.instance&&(e.instance=new e,t))try{var n=new URL(t);e.instance.hostOrigin=n.origin,e.instance.hostUrl=t}catch(n){e.instance.hostOrigin=t}return e.instance}}]);var t,n,c,d,h}();f(h,"instance",void 0)},94301:(e,t,n)=>{"use strict";n.d(t,{_O:()=>o});var r=n(86326),o=(Object.freeze({DISABLED:{default:"#8590A2",hover:"#626f86"},GC_ALL_ERRORS:{default:"#E34935",hover:"#8337FB"},GC_ASSISTANT_DEFAULT:{default:"#8337FB",hover:"#8337FB"},GC_DEFAULT:{default:"#008847",hover:"#115735"},GC_ONLY_ASSISTANT_ERRORS:{default:"#008847",hover:"#8337FB"},GC_ONLY_INLINE_ERRORS:{default:"#E34935",hover:"#BC2803"},PPHR:{default:"#ffffff",hover:"#17873314"},STANDBY:{default:"#ffffff",hover:"#17873314"}}),Object.freeze({ADD_MORE_TEXT_TO_PARAPHRASE_ON_GDOCS_TOOLBAR:"Add text to paraphrase with QuillBot",ASSISTANT_UNSUPPORTED_NO_ERRORS:"Assistant isn't available here",ASSISTANT_UNSUPPORTED_WITH_ERRORS:"Assistant isn't available here. Double-click to fix all.",CLICK_TO_RESUME_ON_GDOCS_TOOLBAR:"Click to resume",CLOSE_ASSISTANT:"Click to close assistant",DOUBLE_CLICK_TO_FIX_ALL:r.createElement(r.Fragment,null,"Click to open assistant or",r.createElement("br",null),"double-click to fix all"),LOGIN:"Log in to use QuillBot",LOGIN_TO_PARAPHRASE_TOO_LONG_TEXT:"To paraphrase longer texts, log in to a Premium account or upgrade now",LOGIN_TOO_LONG_TEXT:"To check longer texts, log in to a Premium account or upgrade now",NO_EDIT_ACCESS:"No edit access",OPEN_ASSISTANT:"Click to open assistant",OPEN_ASSISTANT_AND_FIX_ALL:r.createElement(r.Fragment,null,"Click to open assistant or",r.createElement("br",null),"double-click to fix all"),OPEN_ASSISTANT_OR_FIX_ALL:r.createElement(r.Fragment,null,"Click to open assistant or",r.createElement("br",null),"double-click to fix all"),OPEN_ASSISTANT_TO_SEE_SUGGESTIONS:"See more suggestions in QuillBot",PAGELESS_MODE:"For assistant view, switch to Pages Mode",PARAPHRASE:"Paraphrase text",PARAPHRASE_TOO_LONG_TEXT:"Paraphrase longer texts by upgrading",PARAPHRASE_TOO_LONG_TEXT_PREMIUM:"Text is too long. Try paraphrasing shorter sections.",PARAPHRASE_WITH_QUILLBOT_ON_GDOCS_TOOLBAR:"Paraphrase with QuillBot",RESUME:"QuillBot is paused. Click to resume.",SHOW_RECAPTCHA:"Please click to verify you\u2019re human",STANDBY_ICON:"Quick settings",START_WRITING:"Start writing",TOO_LONG_TEXT:"Check longer texts by upgrading",UNSUPPORTED_LANG:"Unsupported language"}),{height:24,width:48})},96492:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(38085);function o(e,t){if(e){if("string"==typeof e)return(0,r.A)(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.A)(e,t):void 0}}},97710:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{A:()=>r})}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return i[e].call(n.exports,n,n.exports,s),n.exports}e="function"==typeof Symbol,t=e?Symbol("webpack queues"):"__webpack_queues__",n=e?Symbol("webpack exports"):"__webpack_exports__",r=e?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},s.a=(e,i,a)=>{var s;a&&((s=[]).d=-1);var u,c,l,d=new Set,f=e.exports,h=new Promise((e,t)=>{l=t,c=e});h[n]=f,h[t]=e=>(s&&e(s),d.forEach(e),h.catch(e=>{})),e.exports=h,i(e=>{var i;u=(e=>e.map(e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var i=[];i.d=0,e.then(e=>{a[n]=e,o(i)},e=>{a[r]=e,o(i)});var a={};return a[t]=e=>e(i),a}}var s={};return s[t]=e=>{},s[n]=e,s}))(e);var a=()=>u.map(e=>{if(e[r])throw e[r];return e[n]}),c=new Promise(e=>{(i=()=>e(a)).r=0;var n=e=>e!==s&&!d.has(e)&&(d.add(e),e&&!e.d&&(i.r++,e.push(i)));u.map(e=>e[t](n))});return i.r?c:a()},e=>(e?l(h[r]=e):c(f),o(s))),s&&s.d<0&&(s.d=0)},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};s(8140)})();
//# sourceMappingURL=sourceMap/content-gdocs-pre.js.map