"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="43845447-24b4-505b-9fb9-0a644c62e363")}catch(e){}}();
(self.webpackChunk_loomhq_chrome_extension=self.webpackChunk_loomhq_chrome_extension||[]).push([[50357],{37990:(e,n,t)=>{t.r(n),t.d(n,{InlinePlayer:()=>Z,InlinePlayerBase:()=>Y,getPreferredVideoArtifact:()=>X});var r=t(87584),i=t(843),o=t(24672),a=t(33196),s=t.n(a),d=t(92860),l=t(86875),c=t(92614),A=t(40459),u=t(41856),p=t(66623),f=t(61550),_=t(61103),m=t(69771),v=t(76939),h=t.n(v),b=t(61312),B=t.n(b),w=t(12524),g=t.n(w),C=t(26539),y=t.n(C),k=t(68479),q=t.n(k),x=t(62588),W=t.n(x),j=t(81453),E={};E.styleTagTransform=W(),E.setAttributes=y(),E.insert=g().bind(null,"head"),E.domAPI=B(),E.insertStyleElement=q(),h()(j.A,E),j.A&&j.A.locals&&j.A.locals;var R,z=t(66534),P=t(77782),I=t(63184),U=t(9e4),D=t(54900),F=t(9375),L="--media-inline-player-wrapper-width",T="--media-inline-player-wrapper-height",N=function(e){var n=e.testId,t=e.selected,i=e.dimensions,o=e.onClick,a=e.innerRef;return d.createElement("div",(0,r.A)({id:"inlinePlayerWrapper","data-testid":n,className:(0,z.A)(["_1reo15vq _18m915vq _2rko1sit _kqswh2mm _p12f1osq _c71l1osq _1bsb1ez3 _4t3i1amq _1y2k1osq _z18o1osq",t&&"_1p1y1j28 _1rk81j28 _14r11j28 _1np21j28","_14mj1sit _aetrb3bt _z0ai1osq _1qdg1osq _18postnw _15l2idpf _631ousvi _11fnglyw",t&&"_eq4314x9","media-card-inline-player"]),onClick:o,ref:a},U.Pj,{style:(0,m.A)((0,m.A)((0,m.A)((0,m.A)((0,m.A)({},L,(0,I.F)(i).width||"100%"),T,(0,I.F)(i).height||"auto"),"--_og9e1j",(0,P.A)("var(".concat(L,")"))),"--_1wtike8",(0,P.A)("var(".concat(T,")"))),"--_f9up2s",(0,P.A)("1px solid ".concat("var(--ds-border-selected, #0C66E4)")))}),(0,F.fg)("platform_media_add_ufo_custom_data")?d.createElement(D.A,{data:{hasMediaComponent:!0}}):null,e.children)},K=t(98674),O=t(54640),S=t(41631),H=t(39107),V=function(e){var n=e.dimensions,t=e.selected;return(0,K.css)(R||(R=(0,O.A)(["\n\twidth: ",";\n\theight: ",";\n\toverflow: hidden;\n\tborder-radius: ",";\n\tposition: relative;\n\tmax-width: 100%;\n\tmax-height: 100%;\n\n\t","\n\n\tvideo {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n"])),(0,I.F)(n).width||"100%",(0,I.F)(n).height||"auto","var(--ds-border-radius-100, 3px)",function(e){var n=e.selected;return"\n    ".concat(n?S.$:"","\n\n    &::after {\n      content: '';\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      top: 0;\n      box-sizing: border-box;\n      pointer-events: none;\n      border-radius: ","var(--ds-border-radius-100, 3px)",";\n      ").concat(n?(0,S.D)([H.G.Border]):"","\n    }\n  ")}(t))};V.displayName="InlinePlayerWrapper";var M=function(e){var n=e.testId,t=e.selected,i=e.dimensions,o=e.onClick,a=e.innerRef;return(0,K.jsx)("div",(0,r.A)({id:"inlinePlayerWrapper","data-testid":n,className:"media-card-inline-player",css:V({selected:t,dimensions:i}),onClick:o,ref:a},U.Pj),(0,F.fg)("platform_media_add_ufo_custom_data")?(0,K.jsx)(D.A,{data:{hasMediaComponent:!0}}):null,e.children)},G=function(e){return(0,F.fg)("platform_media_compiled")?d.createElement(N,e):d.createElement(M,e)},$=t(89055),J=t(52861),Q=t(3389),X=function(e){if("processed"===e.status||"processing"===e.status){var n=e.artifacts;if(!n)return;return n["video_1280.mp4"]?"video_1280.mp4":n["video_640.mp4"]?"video_640.mp4":void 0}},Y=function(e){var n=e.identifier,t=e.onError,r=e.onClick,a=e.dimensions,m=void 0===a?p.Oe:a,v=e.originalDimensions,h=e.selected,b=e.testId,B=e.forwardRef,w=e.autoplay,g=e.cardPreview,C=e.onFullscreenChange,y=e.videoControlsWrapperRef,k=(0,d.useState)(),q=(0,o.A)(k,2),x=q[0],W=q[1],j=(0,d.useState)(),E=(0,o.A)(j,2),R=E[0],z=E[1],P=(0,d.useState)(),I=(0,o.A)(P,2),U=I[0],D=I[1],L=(0,d.useRef)(null),T=(0,d.useRef)(t);T.current=t;var N=n.id,K=n.collectionName,O=n.occurrenceKey,S=(0,$.d)(null==m?void 0:m.width,L),H=(0,J.H)(),V=(0,Q.b)(N,{collectionName:K,occurrenceKey:O}).fileState,M=(0,d.useCallback)(function(){var e=(0,i.A)(s().mark((function e(n){var t,r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("processed"===n.status||"processing"===n.status){e.next=2;break}return e.abrupt("return");case 2:if(t=X(n),r=n.artifacts,t&&r){e.next=16;break}return e.prev=5,e.next=8,H.file.getFileBinaryURL(N,K);case 8:i=e.sent,W(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),T.current&&e.t0 instanceof Error&&T.current(e.t0);case 15:return e.abrupt("return");case 16:return e.prev=16,e.next=19,H.file.getArtifactURL(r,t,K);case 19:o=e.sent,W(o),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),T.current&&e.t1 instanceof Error&&T.current(e.t1);case 26:case"end":return e.stop()}}),e,null,[[5,12],[16,23]])})));return function(n){return e.apply(this,arguments)}}(),[K,N,H.file]),Y=function(){(0,F.fg)("platform_media_resume_video_on_token_expiry")&&V&&M(V)},Z=Y;return(0,d.useEffect)((function(){var e=function(){var e=(0,i.A)(s().mark((function e(n){var t,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("uploading"===n.status?(z(!0),D(n.progress)):z(!1),!x){e.next=3;break}return e.abrupt("return");case 3:if("error"===n.status||!n.preview){e.next=12;break}return e.next=6,n.preview;case 6:if(t=e.sent,!((r=t.value)instanceof Blob&&0===r.type.indexOf("video/"))){e.next=12;break}return i=URL.createObjectURL(r),W(i),e.abrupt("return");case 12:"processed"!==n.status&&"processing"!==n.status||M(n);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();V&&e(V)}),[V,K,x,N,H,M]),(0,d.useEffect)((function(){return function(){x&&URL.revokeObjectURL(x)}}),[x]),x?d.createElement(G,{testId:b||"media-card-inline-player","data-vc":"media-card-inline-player",selected:{selected:h},onClick:r,innerRef:B||void 0,dimensions:m},d.createElement(c.V,null,(function(e,t){return(0,F.fg)("platform_media_video_captions")?d.createElement(A.K,{identifier:n,type:"video",src:x,onFullscreenChange:C,isAutoPlay:w,isHDAvailable:!1,onDownloadClick:function(){H.file.downloadBinary(N,void 0,K)},onFirstPlay:function(){l.i.emit("media-viewed",{fileId:N,viewingLevel:"full"})},onPlay:Y,onTimeChanged:Z,lastWatchTimeConfig:{contentId:N},originalDimensions:v,showControls:e,poster:null==g?void 0:g.dataURI,videoControlsWrapperRef:y,areControlsVisible:t}):d.createElement(u.l,{type:"video",src:x,onFullscreenChange:C,fileId:N,isAutoPlay:w,isHDAvailable:!1,onDownloadClick:function(){H.file.downloadBinary(N,void 0,K)},onFirstPlay:function(){l.i.emit("media-viewed",{fileId:N,viewingLevel:"full"})},onPlay:Y,onTimeChanged:Z,lastWatchTimeConfig:{contentId:N},originalDimensions:v,showControls:e,poster:null==g?void 0:g.dataURI,videoControlsWrapperRef:y})})),R&&d.createElement(_.z,{progress:U,breakpoint:S,positionBottom:!0,showOnTop:!0})):d.createElement(f.t,{testId:b,dimensions:m,interactionName:"inline-player-loading"})},Z=d.forwardRef((function(e,n){return d.createElement(Y,(0,r.A)({},e,{forwardRef:n}))}))},81453:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(75973),i=t.n(r),o=t(11123),a=t.n(o)()(i());a.push([e.id,'\n._14mj1sit:after{border-radius:var(--ds-border-radius,3px)}\n._2rko1sit{border-radius:var(--ds-border-radius,3px)}\n._eq4314x9:after{border:var(--_f9up2s)}._11fnglyw:after{pointer-events:none}\n._14r11j28::-moz-selection, ._1np21j28 ::-moz-selection{background-color:transparent}\n._15l2idpf:after{top:0}\n._18m915vq{overflow-y:hidden}\n._18postnw:after{position:absolute}\n._1bsb1ez3{width:var(--_og9e1j)}\n._1p1y1j28::selection, ._1rk81j28 ::selection{background-color:transparent}\n._1qdg1osq:after{height:100%}\n._1reo15vq{overflow-x:hidden}\n._1y2k1osq video{width:100%}\n._4t3i1amq{height:var(--_1wtike8)}\n._631ousvi:after{box-sizing:border-box}\n._aetrb3bt:after{content:""}\n._c71l1osq{max-height:100%}\n._kqswh2mm{position:relative}\n._p12f1osq{max-width:100%}\n._z0ai1osq:after{width:100%}\n._z18o1osq video{height:100%}',"",{version:3,sources:["webpack://./../../../node_modules/.pnpm/@atlaskit+media-card@79.5.5_@atlaskit+media-core@37.0.0_react@18.3.1__@atlaskit+media-s_2be2ecc207e91e5f287495ad4167ebcc/node_modules/@atlaskit/media-card/dist/esm/card/inlinePlayerWrapper-compiled.compiled.css"],names:[],mappings:";AACA,iBAAiB,yCAAyC;AAC1D,WAAW,yCAAyC;AACpD,iBAAiB,qBAAqB,CAAC,iBAAiB,mBAAmB;AAC3E,wDAAwD,4BAA4B;AACpF,iBAAiB,KAAK;AACtB,WAAW,iBAAiB;AAC5B,iBAAiB,iBAAiB;AAClC,WAAW,oBAAoB;AAC/B,8CAA8C,4BAA4B;AAC1E,iBAAiB,WAAW;AAC5B,WAAW,iBAAiB;AAC5B,iBAAiB,UAAU;AAC3B,WAAW,sBAAsB;AACjC,iBAAiB,qBAAqB;AACtC,iBAAiB,UAAU;AAC3B,WAAW,eAAe;AAC1B,WAAW,iBAAiB;AAC5B,WAAW,cAAc;AACzB,iBAAiB,UAAU;AAC3B,iBAAiB,WAAW",sourcesContent:['\n._14mj1sit:after{border-radius:var(--ds-border-radius,3px)}\n._2rko1sit{border-radius:var(--ds-border-radius,3px)}\n._eq4314x9:after{border:var(--_f9up2s)}._11fnglyw:after{pointer-events:none}\n._14r11j28::-moz-selection, ._1np21j28 ::-moz-selection{background-color:transparent}\n._15l2idpf:after{top:0}\n._18m915vq{overflow-y:hidden}\n._18postnw:after{position:absolute}\n._1bsb1ez3{width:var(--_og9e1j)}\n._1p1y1j28::selection, ._1rk81j28 ::selection{background-color:transparent}\n._1qdg1osq:after{height:100%}\n._1reo15vq{overflow-x:hidden}\n._1y2k1osq video{width:100%}\n._4t3i1amq{height:var(--_1wtike8)}\n._631ousvi:after{box-sizing:border-box}\n._aetrb3bt:after{content:""}\n._c71l1osq{max-height:100%}\n._kqswh2mm{position:relative}\n._p12f1osq{max-width:100%}\n._z0ai1osq:after{width:100%}\n._z18o1osq video{height:100%}'],sourceRoot:""}]);const s=a}}]);
//# sourceMappingURL=@atlaskit-internal_media-card-inlineplayer.js.map
//# debugId=43845447-24b4-505b-9fb9-0a644c62e363
