!function(){function DA(sq,pi,qJ){function TY(TI,hK){if(!pi[TI]){if(!sq[TI]){var AA="function"==typeof require&&require;if(!hK&&AA)return AA(TI,!0);if(jt)return jt(TI,!0);var Gq=new Error("Cannot find module '"+TI+"'");throw Gq.code="MODULE_NOT_FOUND",Gq}var wd=pi[TI]={exports:{}};sq[TI][0].call(wd.exports,(function(DA){var pi;return TY(sq[TI][1][DA]||DA)}),wd,wd.exports,DA,sq,pi,qJ)}return pi[TI].exports}for(var jt="function"==typeof require&&require,TI=0;TI<qJ.length;TI++)TY(qJ[TI]);return TY}return DA}()({1:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),DA("../../../darkmode-core/src/js/proxy")},{"../../../darkmode-core/src/js/proxy":7}],2:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.IMG_FILTER_ID=pi.MSG_CLEANUP=pi.ROOT_VARS_PREFIX=pi.META_PROPERTY=pi.STYLESHEET_COMMON_CLASSNAME=pi.PROXY_SELECTOR=pi.EVENT_PREFIX=pi.STYLESHEET_CORS_SELECTOR=pi.STYLESHEET_SYNC_SELECTOR=pi.STYLESHEET_ROOT_VARS_SELECTOR=pi.STYLESHEET_INLINE_SELECTOR=pi.STYLESHEET_OVERRIDE_SELECTOR=pi.STYLESHEET_VARIABLES_SELECTOR=pi.STYLESHEET_INVERT_SELECTOR=pi.STYLESHEET_TEXT_SELECTOR=pi.STYLESHEET_USER_AGENT_SELECTOR=pi.STYLESHEET_FALLBACK_SELECTOR=pi.MISC_PREFIX=void 0;const qJ=DA("./prefix");pi.MISC_PREFIX=qJ.PREFIX,pi.STYLESHEET_FALLBACK_SELECTOR=`.${qJ.PREFIX}-fb`,pi.STYLESHEET_USER_AGENT_SELECTOR=`.${qJ.PREFIX}-ua`,pi.STYLESHEET_TEXT_SELECTOR=`.${qJ.PREFIX}-tx`,pi.STYLESHEET_INVERT_SELECTOR=`.${qJ.PREFIX}-iv`,pi.STYLESHEET_VARIABLES_SELECTOR=`.${qJ.PREFIX}-vb`,pi.STYLESHEET_OVERRIDE_SELECTOR=`.${qJ.PREFIX}-or`,pi.STYLESHEET_INLINE_SELECTOR=`.${qJ.PREFIX}-il`,pi.STYLESHEET_ROOT_VARS_SELECTOR=`.${qJ.PREFIX}-rv`,pi.STYLESHEET_SYNC_SELECTOR=`.${qJ.PREFIX}-sn`,pi.STYLESHEET_CORS_SELECTOR=`.${qJ.PREFIX}-cr`,pi.EVENT_PREFIX=`__${qJ.PREFIX}__`,pi.PROXY_SELECTOR=`.${qJ.PREFIX}-pr`,pi.STYLESHEET_COMMON_CLASSNAME=`${qJ.PREFIX}m2`,pi.META_PROPERTY=qJ.PREFIX,pi.ROOT_VARS_PREFIX=qJ.PREFIX,pi.MSG_CLEANUP=pi.EVENT_PREFIX+"cleanUp",pi.IMG_FILTER_ID=`${qJ.PREFIX}-image-filter`},{"./prefix":6}],3:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.EVENT_ARG=void 0;const qJ=DA("./stylesheet-proxy"),TY=DA("../utils/log"),jt=DA("../../const");document.currentScript&&document.currentScript.remove();const TI=`${jt.MISC_PREFIX}ProxyInjected`,hK=`${jt.EVENT_PREFIX}stylesheetProxy__done`;pi.EVENT_ARG=`${jt.EVENT_PREFIX}stylesheetProxy__arg`;const AA=!document.currentScript;function Gq(DA){(0,qJ.injectProxy)(DA),KS(),document.dispatchEvent(new CustomEvent(hK))}function wd(){const DA=document.currentScript.dataset.arg;if(void 0!==DA){document.documentElement.dataset[TI]="true";const sq=JSON.parse(DA);(0,TY.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${sq}).`),Gq(sq)}}function AG(DA){document.removeEventListener(pi.EVENT_ARG,AG),void 0===document.documentElement.dataset[TI]?(document.documentElement.dataset[TI]="true",(0,TY.logInfo)(`MV3 proxy injector: ${AA?"registerd":"dedicated"} path runs injectProxy(${DA.detail}).`),Gq(DA.detail)):(0,TY.logInfo)(`MV3 proxy injector: ${AA?"registerd":"dedicated"} path exits because everything is done.`)}function KS(){document.removeEventListener(pi.EVENT_ARG,AG),document.removeEventListener(hK,KS)}function JR(){(0,TY.logInfo)(`MV3 proxy injector: ${AA?"registerd":"dedicated"} path setup...`),document.addEventListener(pi.EVENT_ARG,AG),document.addEventListener(hK,KS)}function TS(){void 0===document.documentElement.dataset[TI]?((0,TY.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&wd(),JR()):(0,TY.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}TS()},{"../../const":2,"../utils/log":5,"./stylesheet-proxy":4}],4:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.injectProxy=void 0;const qJ=DA("../../const");function TY(DA){document.dispatchEvent(new CustomEvent(`${qJ.EVENT_PREFIX}inlineScriptsAllowed`));const sq=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),pi=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),TY=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),jt=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),TI=DA?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,hK=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),AA=hK?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,Gq="www.vy.no"===location.hostname,wd=Gq?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,AG=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",sq),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",pi),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",TY),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",jt),document.removeEventListener(`${qJ.EVENT_PREFIX}cleanUp`,AG),document.removeEventListener(`${qJ.EVENT_PREFIX}addUndefinedResolver`,KS),DA&&Object.defineProperty(Document.prototype,"styleSheets",TI),hK&&Object.defineProperty(Element.prototype,"getElementsByTagName",AA),Gq&&Object.defineProperty(Node.prototype,"childNodes",wd)},KS=DA=>{customElements.whenDefined(DA.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${qJ.EVENT_PREFIX}isDefined`,{detail:{tag:DA.detail.tag}}))}))};document.addEventListener(qJ.MSG_CLEANUP,AG),document.addEventListener(`${qJ.EVENT_PREFIX}addUndefinedResolver`,KS);const JR=new Event(`${qJ.EVENT_PREFIX}updateSheet`);function TS(DA,pi,TY){return sq.value.call(this,DA,pi,TY),this.ownerNode&&!this.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(JR),-1}function yH(DA,sq){const TY=pi.value.call(this,DA,sq);return this.ownerNode&&!this.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(JR),TY}function BD(DA){TY.value.call(this,DA),this.ownerNode&&!this.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(JR)}function Am(DA){jt.value.call(this,DA),this.ownerNode&&!this.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(JR)}function OC(){const DA=()=>{const DA=undefined,sq=[...TI.get.call(this)].filter((DA=>DA.ownerNode&&!DA.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)));return sq.item=DA=>sq[DA],Object.setPrototypeOf(sq,StyleSheetList.prototype)};let sq=DA();const pi=undefined;return sq=new Proxy(sq,{get:function(sq,pi){return DA()[pi]}}),sq}function oG(DA){if("style"!==DA)return AA.value.call(this,DA);const sq=()=>{const sq=AA.value.call(this,DA);return Object.setPrototypeOf([...sq].filter((DA=>!DA.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let pi=sq();const TY=undefined;return pi=new Proxy(pi,{get:function(DA,pi){return sq()[Number(pi)||pi]}}),pi}function XC(){const DA=wd.get.call(this);return Object.setPrototypeOf([...DA].filter((DA=>!DA.classList||!DA.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},sq,{value:TS})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},pi,{value:yH})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},TY,{value:BD})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},jt,{value:Am})),DA&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},TI,{get:OC})),hK&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},AA,{value:oG})),Gq&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},wd,{get:XC}))}pi.injectProxy=TY},{"../../const":2}],5:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.logInfoCollapsed=pi.logWarn=pi.logInfo=void 0;const qJ=DA("../../utils/message"),TY=!0,jt=!1,TI="info";function hK(DA,...sq){jt&&TI&&("info"===TI||"warn"===DA)&&chrome.runtime.sendMessage({type:qJ.MessageType.CS_LOG,data:{level:DA,log:sq}})}function AA(...DA){TY&&hK("info",...DA)}function Gq(...DA){TY&&hK("warn",...DA)}function wd(DA,...sq){}pi.logInfo=AA,pi.logWarn=Gq,pi.logInfoCollapsed=wd},{"../../utils/message":8}],6:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.PREFIX=void 0,pi.PREFIX="dm"},{}],7:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),DA("./content/dynamic-theme/mv3-proxy")},{"./content/dynamic-theme/mv3-proxy":3}],8:[function(DA,sq,pi){"use strict";var qJ;Object.defineProperty(pi,"__esModule",{value:!0}),pi.MessageType=void 0,function(DA){DA["UI_GET_DATA"]="ui-get-data",DA["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",DA["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",DA["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",DA["UI_CHANGE_SETTINGS"]="ui-change-settings",DA["UI_SET_THEME"]="ui-set-theme",DA["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",DA["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",DA["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",DA["UI_LOAD_CONFIG"]="ui-load-config",DA["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",DA["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",DA["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",DA["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",DA["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",DA["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",DA["UI_SAVE_FILE"]="ui-save-file",DA["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",DA["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",DA["BG_CHANGES"]="bg-changes",DA["BG_ADD_CSS_FILTER"]="bg-add-css-filter",DA["BG_ADD_STATIC_THEME"]="bg-add-static-theme",DA["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",DA["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",DA["BG_EXPORT_CSS"]="bg-export-css",DA["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",DA["BG_CLEAN_UP"]="bg-clean-up",DA["BG_RELOAD"]="bg-reload",DA["BG_FETCH_RESPONSE"]="bg-fetch-response",DA["BG_UI_UPDATE"]="bg-ui-update",DA["BG_CSS_UPDATE"]="bg-css-update",DA["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",DA["CS_FRAME_CONNECT"]="cs-frame-connect",DA["CS_FRAME_FORGET"]="cs-frame-forget",DA["CS_FRAME_FREEZE"]="cs-frame-freeze",DA["CS_FRAME_RESUME"]="cs-frame-resume",DA["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",DA["CS_FETCH"]="cs-fetch",DA["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",DA["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",DA["CS_LOG"]="cs-log"}(qJ=pi.MessageType||(pi.MessageType={}))},{}]},{},[1]);