!function(){function on(Uc,Ka,af){function kc(df,rP){if(!Ka[df]){if(!Uc[df]){var nX="function"==typeof require&&require;if(!rP&&nX)return nX(df,!0);if(Bt)return Bt(df,!0);var PU=new Error("Cannot find module '"+df+"'");throw PU.code="MODULE_NOT_FOUND",PU}var KA=Ka[df]={exports:{}};Uc[df][0].call(KA.exports,(function(on){var Ka;return kc(Uc[df][1][on]||on)}),KA,KA.exports,on,Uc,Ka,af)}return Ka[df].exports}for(var Bt="function"==typeof require&&require,df=0;df<af.length;df++)kc(af[df]);return kc}return on}()({1:[function(on,Uc,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.browser=on("webextension-polyfill")},{"webextension-polyfill":2}],2:[function(on,Uc,Ka){"use strict";!function(on,af){if("function"==typeof define&&define.amd)define("webextension-polyfill",["module"],af);else if(void 0!==Ka)af(Uc);else{var kc={exports:{}};af(kc),on.browser=kc.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0,(function(on){if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const Uc="The message port closed before a response was received.",Ka="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",af=on=>{const Ka={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(Ka).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class af extends WeakMap{constructor(on,Uc=void 0){super(Uc),this.createItem=on}get(on){return this.has(on)||this.set(on,this.createItem(on)),super.get(on)}}const kc=on=>on&&"object"==typeof on&&"function"==typeof on.then,Bt=(Uc,Ka)=>(...af)=>{on.runtime.lastError?Uc.reject(new Error(on.runtime.lastError.message)):Ka.singleCallbackArg||af.length<=1&&!1!==Ka.singleCallbackArg?Uc.resolve(af[0]):Uc.resolve(af)},df=on=>1==on?"argument":"arguments",rP=(on,Uc)=>function Ka(af,...kc){if(kc.length<Uc.minArgs)throw new Error(`Expected at least ${Uc.minArgs} ${df(Uc.minArgs)} for ${on}(), got ${kc.length}`);if(kc.length>Uc.maxArgs)throw new Error(`Expected at most ${Uc.maxArgs} ${df(Uc.maxArgs)} for ${on}(), got ${kc.length}`);return new Promise(((Ka,df)=>{if(Uc.fallbackToNoCallback)try{af[on](...kc,Bt({resolve:Ka,reject:df},Uc))}catch(Bt){af[on](...kc),Uc.fallbackToNoCallback=!1,Uc.noCallback=!0,Ka()}else Uc.noCallback?(af[on](...kc),Ka()):af[on](...kc,Bt({resolve:Ka,reject:df},Uc))}))},nX=(on,Uc,Ka)=>new Proxy(Uc,{apply:(Uc,af,kc)=>Ka.call(af,on,...kc)});let PU=Function.call.bind(Object.prototype.hasOwnProperty);const KA=(on,Uc={},Ka={})=>{let af=Object.create(null),kc={has:(Uc,Ka)=>Ka in on||Ka in af,get(kc,Bt,df){if(Bt in af)return af[Bt];if(!(Bt in on))return;let uK=on[Bt];if("function"==typeof uK)if("function"==typeof Uc[Bt])uK=nX(on,on[Bt],Uc[Bt]);else if(PU(Ka,Bt)){let Uc=rP(Bt,Ka[Bt]);uK=nX(on,on[Bt],Uc)}else uK=uK.bind(on);else if("object"==typeof uK&&null!==uK&&(PU(Uc,Bt)||PU(Ka,Bt)))uK=KA(uK,Uc[Bt],Ka[Bt]);else{if(!PU(Ka,"*"))return Object.defineProperty(af,Bt,{configurable:!0,enumerable:!0,get:()=>on[Bt],set(Uc){on[Bt]=Uc}}),uK;uK=KA(uK,Uc[Bt],Ka["*"])}return af[Bt]=uK,uK},set:(Uc,Ka,kc,Bt)=>(Ka in af?af[Ka]=kc:on[Ka]=kc,!0),defineProperty:(on,Uc,Ka)=>Reflect.defineProperty(af,Uc,Ka),deleteProperty:(on,Uc)=>Reflect.deleteProperty(af,Uc)},Bt=Object.create(on);return new Proxy(Bt,kc)},uK=on=>({addListener(Uc,Ka,...af){Uc.addListener(on.get(Ka),...af)},hasListener:(Uc,Ka)=>Uc.hasListener(on.get(Ka)),removeListener(Uc,Ka){Uc.removeListener(on.get(Ka))}}),NR=new af((on=>"function"!=typeof on?on:function Uc(Ka){const af=KA(Ka,{},{getContent:{minArgs:0,maxArgs:0}});on(af)}));let of=!1;const ae=new af((on=>"function"!=typeof on?on:function Uc(Ka,af,Bt){let df=!1,rP,nX=new Promise((on=>{rP=function(Uc){of||(of=!0),df=!0,on(Uc)}})),PU;try{PU=on(Ka,af,rP)}catch(on){PU=Promise.reject(on)}const KA=!0!==PU&&kc(PU);if(!0!==PU&&!KA&&!df)return!1;const uK=on=>{on.then((on=>{Bt(on)}),(on=>{let Uc;Uc=on&&(on instanceof Error||"string"==typeof on.message)?on.message:"An unexpected error occurred",Bt({__mozWebExtensionPolyfillReject__:!0,message:Uc})})).catch((on=>{}))};return uK(KA?PU:nX),!0})),Bj=({reject:Ka,resolve:af},kc)=>{on.runtime.lastError?on.runtime.lastError.message===Uc?af():Ka(new Error(on.runtime.lastError.message)):kc&&kc.__mozWebExtensionPolyfillReject__?Ka(new Error(kc.message)):af(kc)},nV=(on,Uc,Ka,...af)=>{if(af.length<Uc.minArgs)throw new Error(`Expected at least ${Uc.minArgs} ${df(Uc.minArgs)} for ${on}(), got ${af.length}`);if(af.length>Uc.maxArgs)throw new Error(`Expected at most ${Uc.maxArgs} ${df(Uc.maxArgs)} for ${on}(), got ${af.length}`);return new Promise(((on,Uc)=>{const kc=Bj.bind(null,{resolve:on,reject:Uc});af.push(kc),Ka.sendMessage(...af)}))},ih={devtools:{network:{onRequestFinished:uK(NR)}},runtime:{onMessage:uK(ae),onMessageExternal:uK(ae),sendMessage:nV.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:nV.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},vx={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return Ka.privacy={network:{"*":vx},services:{"*":vx},websites:{"*":vx}},KA(on,ih,Ka)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");on.exports=af(chrome)}else on.exports=browser}))},{}],3:[function(on,Uc,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.removeFromSessionStorage=Ka.getFromSessionStorage=Ka.updateSessionStorage=Ka.getFromStorage=Ka.updateStorage=Ka.getRootUrl=void 0;const af=on("webextension-polyfill-ts");function kc(on){return new URL(on).hostname}async function Bt(on,Uc){await af.browser.storage.local.set({[on]:Uc})}async function df(on,Uc,Ka){await chrome.storage.session.set({[on]:Uc}),Ka&&Ka()}function rP(on){chrome.storage.session.remove(on)}async function nX(on,Uc){const Ka=await chrome.storage.session.get([on]);return Uc?Uc(null==Ka?void 0:Ka[on]):null==Ka?void 0:Ka[on]}async function PU(on){const Uc=await af.browser.storage.local.get([on]);return null==Uc?void 0:Uc[on]}Ka.getRootUrl=kc,Ka.updateStorage=Bt,Ka.updateSessionStorage=df,Ka.removeFromSessionStorage=rP,Ka.getFromSessionStorage=nX,Ka.getFromStorage=PU},{"webextension-polyfill-ts":1}],4:[function(on,Uc,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});const af=on("webextension-polyfill-ts"),kc=on("./helper");class Bt{constructor(){this.volumeInput=document.getElementById("volume"),this.volumeRange=document.getElementById("volume-range"),this.body=document.querySelector("body"),this.toggle=document.getElementById("toggle"),this.logo=document.getElementById("logo"),this.rangeThumb=document.querySelector(".range-thumb"),this.rangeProgress=document.querySelector(".range-progress"),this.domain=document.getElementById("domain"),this.volume=100,this.audioState={},this.run()}async run(){this.initListeners(),await this.synchronizeWithStorage(),this.viewDomain();const on=undefined;await(0,kc.getFromStorage)("extStatus")&&this.runBooster()}switchExtension(on){on?this.runBooster():this.disableBooster(),this.switchStatus(on)}initListeners(){this.initDOMListeners(),chrome.storage.local.onChanged.addListener((on=>{if(!on.extStatus)return;const Uc=on.extStatus.newValue;this.switchExtension(Uc)}))}initDOMListeners(){this.toggle.addEventListener("change",(async()=>{this.toggle.checked?this.enableExtension():this.disableExtension()})),this.volumeRange.addEventListener("input",(on=>{const Uc=on.target.value;this.volume=Number(Uc),this.volumeInput.value=String(Uc),this.updateVolumeRangeProgress(),this.boostVolume()})),this.volumeRange.addEventListener("change",(()=>{this.saveSettings()})),this.volumeInput.addEventListener("change",(()=>{let on=Number(this.volumeInput.value);on>600&&(on=600,this.volumeInput.value=String(on)),this.volume=on,this.volumeRange.value=String(on),this.boostVolume(),this.updateVolumeRangeProgress(),this.saveSettings()}))}boostVolume(){this.audioState.volume=this.volume,this.audioState.gainNode&&(this.audioState.gainNode.gain.value=this.volume/100)}async saveSettings(){const on=await(0,kc.getFromSessionStorage)("tabs")||{},Uc=this.getActiveTabId();Uc&&(on[Uc]=this.volume,(0,kc.updateSessionStorage)("tabs",on))}createAudioState(on){this.connectStream(on)}async runBooster(){const on=this.getActiveTabId();on&&this.createAudioState(Number(on))}disableBooster(){if(this.audioState.stream){const on=this.audioState.stream.getTracks();for(let Uc=0;Uc<on.length;Uc+=1)on[Uc].stop()}this.audioState={}}switchStatus(on){on?this.viewEnabledStatus():this.viewDisabledStatus()}updateVolume(){this.volumeInput.value=String(this.volume),this.volumeRange.value=String(this.volume)}updateVolumeRangeProgress(){if(!this.rangeThumb)return;const on=Number(this.volumeRange.value||0)/6-4;this.rangeThumb.style.left=`${on>0?on:0}%`,this.rangeProgress&&(this.rangeProgress.style.width=`${Number(on>0?on+2:0)}%`)}updatePopupUi(){this.updateVolume(),this.updateVolumeRangeProgress()}async synchronizeWithStorage(){const on=await(0,kc.getFromStorage)("extStatus");this.switchStatus(on);let Uc=100;const Ka=this.getActiveTabId(),af=await(0,kc.getFromSessionStorage)("tabs");if(Ka&&af){const on=af[Ka];(0===on||on)&&(Uc=on)}this.volume=Uc,this.updatePopupUi()}async enableExtension(){await(0,kc.updateStorage)("extStatus",!0),this.viewEnabledStatus()}async disableExtension(){await(0,kc.updateStorage)("extStatus",!1),this.viewDisabledStatus()}async viewDomain(){const on=this.getActiveTabId();if(!on)return;const Uc=await this.getTab(Number(on));if(!Uc||!Uc.url)return;const Ka=(0,kc.getRootUrl)(Uc.url)||"";this.domain.textContent=Ka}viewEnabledStatus(){this.body.classList.remove("inactive"),this.volumeInput.removeAttribute("disabled"),this.toggle.checked=!0,this.logo.setAttribute("src","../images/logo.svg")}viewDisabledStatus(){this.body.classList.add("inactive"),this.volumeInput.setAttribute("disabled","true"),this.toggle.checked=!1,this.logo.setAttribute("src","../images/logo_inactive.svg")}async getTab(on){return af.browser.tabs.get(on)}getActiveTabId(){const on=window.location.search,Uc=undefined;return new URLSearchParams(on).get("tabId")||""}getMediaStream(on){return new Promise((Uc=>{Uc(navigator.mediaDevices.getUserMedia({video:!1,audio:{mandatory:{chromeMediaSource:"tab",chromeMediaSourceId:on}}}))}))}async connectStream(on){var Uc;if(!on)return;const Ka=null===(Uc=await chrome.tabs.getCurrent())||void 0===Uc?void 0:Uc.id;chrome.tabCapture.getMediaStreamId({consumerTabId:Ka,targetTabId:on},(Uc=>{chrome.runtime.sendMessage({action:"GetUserMedia",consumerTabId:Ka,targetTabId:on}),this.getMediaStream(Uc).then((on=>{const Uc=new AudioContext,Ka=Uc.createMediaStreamSource(on),af=Uc.createGain(),kc=Uc.createDynamicsCompressor();kc.threshold.setValueAtTime(-50,Uc.currentTime),kc.knee.setValueAtTime(40,Uc.currentTime),kc.ratio.setValueAtTime(12,Uc.currentTime),kc.attack.setValueAtTime(0,Uc.currentTime),kc.release.setValueAtTime(.25,Uc.currentTime),Ka.connect(af),af.connect(Uc.destination),af.gain.value=this.volume/100,this.audioState={audioContext:Uc,gainNode:af,stream:on,volume:this.volume}})).catch((on=>{const Uc=chrome.runtime.lastError}))}))}}const df=new Bt},{"./helper":3,"webextension-polyfill-ts":1}]},{},[4]);