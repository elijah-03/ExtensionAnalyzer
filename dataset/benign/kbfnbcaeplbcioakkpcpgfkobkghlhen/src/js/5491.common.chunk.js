(self.webpackChunk=self.webpackChunk||[]).push([[5491],{3058:(e,t,s)=>{if(s.d(t,{N:()=>n}),/^6(052|168)$/.test(s.j))var i=s(8867);function n(e){return new i.y((t=>{const s=new DisposableStack,i=s.use(e());return s.adopt(i.subscribe((e=>t.next(e))),(e=>e.unsubscribe())),()=>s.dispose()}))}},25151:(e,t,s)=>{s.d(t,{D8:()=>n.D,N4:()=>o.N,TJ:()=>n.T,kX:()=>i.k});var i=s(60817),n=s(42200);if(/^6(052|168)$/.test(s.j))var o=s(3058)},75491:(e,t,s)=>{s.r(t),s.d(t,{activate:()=>N});var i,n,o,a,r,c,d,h=s(651),u=s(90572),l=s(33885),p=s(77115),v=s(25151),m=s(60890),w=s(13391),b=s(97594),k=s(74841),S=s(79593),f=e=>{throw TypeError(e)},A=(e,t,s)=>t.has(e)||f("Cannot "+s),x=(e,t,s)=>(A(e,t,"read from private field"),s?s.call(e):t.get(e)),y=(e,t,s)=>t.has(e)?f("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),g=(e,t,s,i)=>(A(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),C=(e,t,s)=>(A(e,t,"access private method"),s);class D{constructor(e){y(this,c),y(this,i),y(this,n),y(this,o),y(this,a),y(this,r),g(this,i,new DisposableStack),g(this,n,w.h.create({kind:k.x.State.Kind.Initial})),g(this,o,w.h.create(null)),this.title=S.K_,this.state=x(this,n).view(),this.audience=x(this,o).view((e=>null!=e?e:void 0)),this.loadReactions=()=>(C(this,c,d).call(this,{kind:"loadReactionsAction"}),Promise.resolve()),this.goBack=()=>{C(this,c,d).call(this,{kind:"goBackAction"})},this.selectAudience=()=>{C(this,c,d).call(this,{kind:"selectAudienceAction"})},this.setAudience=e=>(C(this,c,d).call(this,{kind:"setAudienceAction",audience:e}),Promise.resolve()),this.editAudience=()=>{C(this,c,d).call(this,{kind:"editAudienceAction"})},this.saveAudience=e=>(C(this,c,d).call(this,{kind:"saveAudienceAction",name:e}),Promise.resolve()),this.removeAudience=e=>(C(this,c,d).call(this,{kind:"removeAudienceAction",audience:e}),Promise.resolve()),g(this,a,e.documentId),g(this,r,e.bus),x(this,i).adopt(e.agentState.subscribe((e=>x(this,n).set(e))),(e=>e.unsubscribe())),x(this,i).adopt(e.audience.subscribe((e=>x(this,o).set(e))),(e=>e.unsubscribe())),this.textWordsCount=x(this,i).use(x(this,r).state.textInfo.view(x(this,a),null)),this.capiSessionId=x(this,i).use(x(this,r).state.capiSessionId.view(x(this,a),null)),this.context={tracking:{trackEvent:(e,t)=>x(this,r).events.trackingEvent.emit(x(this,a),{event:e,detail:t})},textWordsCount:this.textWordsCount.view((e=>{var t;return null!=(t=null==e?void 0:e.wordsCount)?t:0})),capiSessionId:this.capiSessionId.view((e=>null!=e?e:void 0))},this.featureFlags={customAudiences:e.experimentation.isAssigned(b.bI),removeCustomAudiences:e.experimentation.isAssigned(b.kz)},this.hasTextChanges=x(this,i).use(x(this,r).state.hasTextChanges.view(x(this,a),!1))}[Symbol.dispose](){x(this,i).dispose()}dispose(){x(this,i).dispose()}}i=new WeakMap,n=new WeakMap,o=new WeakMap,a=new WeakMap,r=new WeakMap,c=new WeakSet,d=function(e){x(this,r).events.panelUIAction.emit(x(this,a),e)};s(5272);var I=s(68010),j=s(26370),P=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),W=e=>{throw TypeError(e)},E=(e,t,s)=>{var i;null!=t?("object"!=typeof t&&"function"!=typeof t&&W("Object expected"),s&&(i=t[P("asyncDispose")]),void 0===i&&(i=t[P("dispose")]),"function"!=typeof i&&W("Object not disposable"),e.push([s,i,t])):s&&e.push([s]);return t},M=(e,t,s)=>{var i="function"==typeof SuppressedError?SuppressedError:function(e,t,s,i){return(i=Error(s)).name="SuppressedError",i.error=e,i.suppressed=t,i},n=e=>t=s?new i(e,t,"An error was suppressed during disposal"):(s=!0,e),o=i=>{for(;i=e.pop();)try{var a=i[1]&&i[1].call(i[2]);if(i[0])return Promise.resolve(a).then(o,(e=>(n(e),o())))}catch(e){n(e)}if(s)throw t};return o()};const N=e=>((e,t,s)=>new Promise(((i,n)=>{var o=e=>{try{r(s.next(e))}catch(e){n(e)}},a=e=>{try{r(s.throw(e))}catch(e){n(e)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);r((s=s.apply(e,t)).next())})))(void 0,[e],(function*({bus:e,documents:t,experimentation:s}){var i=[];try{const a=E(i,new DisposableStack),r=a.use(new v.D8({activeDocument:t.activeDocument,documentSessionDisposed:t.documentSessionDisposed,createNewSession:t=>{var i=[];try{const a=E(i,new DisposableStack),r=a.use(e.state.agentState.view(t,{kind:k.x.State.Kind.Initial})),c=a.use(e.state.audience.view(t,null)),d=a.use(new D({bus:e,experimentation:s,agentState:r,audience:c.pipe(u.h(p.C_)),documentId:t})),h=a.move();return{viewModel:d,[Symbol.dispose]:()=>h.dispose()}}catch(e){var n=e,o=!0}finally{M(i,n,o)}}})),c=a.move();return{title:S.K_,renderPanel:e=>(0,h.jsx)(l.F.Fragment,{children:r.activeSession.view(v.TJ.match({activeSession:t=>(0,h.jsx)(j.n,{viewModel:t.viewModel,onClosePanel:e.onClosePanel}),noActiveSession:()=>(0,h.jsx)(m.ZD,{agentName:S.K_}),documentNotSupported:()=>(0,h.jsx)(m.Di,{agentName:S.K_})}))}),renderIcon:e=>(0,h.jsx)(I.b,{size:e.size}),[Symbol.dispose]:()=>c.dispose()}}catch(e){var n=e,o=!0}finally{M(i,n,o)}}))}}]);