"use strict";let targetPageId=null;function onKeyDown(e){27==e.keyCode?(e.preventDefault(),closeDialog()):13!=e.keyCode||e.shiftKey||e.ctrlKey||(e.preventDefault(),addFilters())}function addFilters(){ext.backgroundPage.sendMessage({type:"filters.importRaw",text:document.getElementById("filters").value},(e=>{e.length>0?alert(e.join("\n")):closeDialog(!0)}))}function closeDialog(e){ext.backgroundPage.sendMessage({type:"forward",targetPageId:targetPageId,payload:{type:"composer.content.finished",remove:"boolean"==typeof e&&e}}),window.close()}function init(){window.addEventListener("keydown",onKeyDown,!1),document.getElementById("addButton").addEventListener("click",addFilters),document.getElementById("cancelButton").addEventListener("click",closeDialog.bind(null,!1)),$("button").button(),document.getElementById("filters").focus(),ext.onMessage.addListener(((e,t,n)=>{switch(e.type){case"composer.dialog.init":targetPageId=e.sender,document.getElementById("filters").value=e.filters.join("\n");break;case"composer.dialog.close":window.close()}})),window.removeEventListener("load",init)}window.addEventListener("load",init,!1);