!function(){function DA(sq,pi,qJ){function TY(TI,hK){if(!pi[TI]){if(!sq[TI]){var AA="function"==typeof require&&require;if(!hK&&AA)return AA(TI,!0);if(jt)return jt(TI,!0);var Gq=new Error("Cannot find module '"+TI+"'");throw Gq.code="MODULE_NOT_FOUND",Gq}var wd=pi[TI]={exports:{}};sq[TI][0].call(wd.exports,(function(DA){var pi;return TY(sq[TI][1][DA]||DA)}),wd,wd.exports,DA,sq,pi,qJ)}return pi[TI].exports}for(var jt="function"==typeof require&&require,TI=0;TI<qJ.length;TI++)TY(qJ[TI]);return TY}return DA}()({1:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),DA("../../../darkmode-core/src/js/content/content")},{"../../../darkmode-core/src/js/content/content":3}],2:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.IMG_FILTER_ID=pi.MSG_CLEANUP=pi.ROOT_VARS_PREFIX=pi.META_PROPERTY=pi.STYLESHEET_COMMON_CLASSNAME=pi.PROXY_SELECTOR=pi.EVENT_PREFIX=pi.STYLESHEET_CORS_SELECTOR=pi.STYLESHEET_SYNC_SELECTOR=pi.STYLESHEET_ROOT_VARS_SELECTOR=pi.STYLESHEET_INLINE_SELECTOR=pi.STYLESHEET_OVERRIDE_SELECTOR=pi.STYLESHEET_VARIABLES_SELECTOR=pi.STYLESHEET_INVERT_SELECTOR=pi.STYLESHEET_TEXT_SELECTOR=pi.STYLESHEET_USER_AGENT_SELECTOR=pi.STYLESHEET_FALLBACK_SELECTOR=pi.MISC_PREFIX=void 0;const qJ=DA("./prefix");pi.MISC_PREFIX=qJ.PREFIX,pi.STYLESHEET_FALLBACK_SELECTOR=`.${qJ.PREFIX}-fb`,pi.STYLESHEET_USER_AGENT_SELECTOR=`.${qJ.PREFIX}-ua`,pi.STYLESHEET_TEXT_SELECTOR=`.${qJ.PREFIX}-tx`,pi.STYLESHEET_INVERT_SELECTOR=`.${qJ.PREFIX}-iv`,pi.STYLESHEET_VARIABLES_SELECTOR=`.${qJ.PREFIX}-vb`,pi.STYLESHEET_OVERRIDE_SELECTOR=`.${qJ.PREFIX}-or`,pi.STYLESHEET_INLINE_SELECTOR=`.${qJ.PREFIX}-il`,pi.STYLESHEET_ROOT_VARS_SELECTOR=`.${qJ.PREFIX}-rv`,pi.STYLESHEET_SYNC_SELECTOR=`.${qJ.PREFIX}-sn`,pi.STYLESHEET_CORS_SELECTOR=`.${qJ.PREFIX}-cr`,pi.EVENT_PREFIX=`__${qJ.PREFIX}__`,pi.PROXY_SELECTOR=`.${qJ.PREFIX}-pr`,pi.STYLESHEET_COMMON_CLASSNAME=`${qJ.PREFIX}m2`,pi.META_PROPERTY=qJ.PREFIX,pi.ROOT_VARS_PREFIX=qJ.PREFIX,pi.MSG_CLEANUP=pi.EVENT_PREFIX+"cleanUp",pi.IMG_FILTER_ID=`${qJ.PREFIX}-image-filter`},{"./prefix":30}],3:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0});const qJ=DA("../const"),TY=DA("../defaults"),jt=DA("./dynamic-theme"),TI=DA("./utils/dom");async function hK(DA,sq,pi){"cleanStyle"===(null==DA?void 0:DA.action)&&(0,jt.removeDynamicTheme)()}function AA(){(0,TI.removeNode)(document.querySelector(qJ.STYLESHEET_FALLBACK_SELECTOR))}async function Gq(){chrome.runtime.onMessage.addListener(hK);const DA=await chrome.runtime.sendMessage({action:"getStyle"});if(DA){const sq=window.top===window;(0,jt.createOrUpdateDynamicTheme)(TY.DEFAULT_THEME,DA,sq)}else AA()}Gq()},{"../const":2,"../defaults":21,"./dynamic-theme":8,"./utils/dom":19}],4:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.createAdoptedStyleSheetOverride=void 0;const qJ=DA("./stylesheet-modifier"),TY=new WeakMap,jt=new WeakSet;function TI(DA){let sq=!1;function pi(sq,pi){const qJ=[...DA.adoptedStyleSheets],TY=qJ.indexOf(sq),jt=qJ.indexOf(pi);TY!==jt-1&&(jt>=0&&qJ.splice(jt,1),qJ.splice(TY+1,0,pi),DA.adoptedStyleSheets=qJ)}function TI(){sq=!0;const pi=[...DA.adoptedStyleSheets];DA.adoptedStyleSheets.forEach((DA=>{if(jt.has(DA)){const sq=pi.indexOf(DA);sq>=0&&pi.splice(sq,1),TY.delete(DA),jt.delete(DA)}})),DA.adoptedStyleSheets=pi}function hK(TI,hK){DA.adoptedStyleSheets.forEach((DA=>{if(jt.has(DA))return;const AA=DA.rules,Gq=new CSSStyleSheet;function wd(){for(let DA=Gq.cssRules.length-1;DA>=0;DA--)Gq.deleteRule(DA);return pi(DA,Gq),TY.set(DA,Gq),jt.add(Gq),Gq}const AG=undefined;(0,qJ.createStyleSheetModifier)().modifySheet({prepareSheet:wd,sourceCSSRules:AA,theme:TI,ignoreImageAnalysis:hK,force:!1,isAsyncCancelled:()=>sq})}))}return{render:hK,destroy:TI}}pi.createAdoptedStyleSheetOverride=TI},{"./stylesheet-modifier":15}],5:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.replaceCSSFontFace=pi.removeCSSComments=pi.replaceCSSRelativeURLsWithAbsolute=pi.getCSSBaseBath=pi.getCSSURLValue=pi.cssImportRegex=pi.cssURLRegex=pi.iterateCSSDeclarations=pi.iterateCSSRules=void 0;const qJ=DA("../../utils/array"),TY=DA("../../utils/platform"),jt=DA("../../utils/url"),TI=DA("../utils/log");function hK(DA,sq,pi){(0,qJ.forEach)(DA,(DA=>{if(DA.selectorText)sq(DA);else if(DA.href)try{hK(DA.styleSheet.cssRules,sq,pi)}catch(DA){(0,TI.logInfo)(`Found a non-loaded link.`),pi&&pi()}else if(DA.media){const qJ=Array.from(DA.media),TY=qJ.some((DA=>DA.startsWith("screen")||DA.startsWith("all")||DA.startsWith("("))),jt=qJ.some((DA=>DA.startsWith("print")||DA.startsWith("speech")));!TY&&jt||hK(DA.cssRules,sq,pi)}else DA.conditionText?CSS.supports(DA.conditionText)&&hK(DA.cssRules,sq,pi):(0,TI.logWarn)(`CSSRule type not supported`,DA)}))}pi.iterateCSSRules=hK;const AA=["background","border","border-color","border-bottom","border-left","border-right","border-top","outline","outline-color"],Gq=TY.isSafari?AA.map((DA=>{const sq=undefined;return[DA,new RegExp(`${DA}:\\s*(.*?)\\s*;`)]})):null;function wd(DA,sq){(0,qJ.forEach)(DA,(pi=>{const qJ=DA.getPropertyValue(pi).trim();qJ&&sq(pi,qJ)}));const pi=DA.cssText;pi.includes("var(")&&(TY.isSafari?Gq.forEach((([DA,qJ])=>{const TY=pi.match(qJ);if(TY&&TY[1]){const pi=TY[1].trim();sq(DA,pi)}})):AA.forEach((pi=>{const qJ=DA.getPropertyValue(pi);qJ&&qJ.includes("var(")&&sq(pi,qJ)})))}function AG(DA){return DA.trim().replace(/[\n\r\\]+/g,"").replace(/^url\((.*)\)$/,"$1").trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1").replace(/(?:\\(.))/g,"$1")}function KS(DA){const sq=(0,jt.parseURL)(DA);return`${sq.origin}${sq.pathname.replace(/\?.*$/,"").replace(/(\/)([^\/]+)$/i,"$1")}`}function JR(DA,sq){return DA.replace(pi.cssURLRegex,(DA=>{const pi=AG(DA);try{return`url('${(0,jt.getAbsoluteURL)(sq,pi)}')`}catch(sq){return(0,TI.logWarn)("Not able to replace relative URL with Absolute URL, skipping"),DA}}))}pi.iterateCSSDeclarations=wd,pi.cssURLRegex=/url\((('.*?')|(".*?")|([^\)]*?))\)/g,pi.cssImportRegex=/@import\s*(url\()?(('.+?')|(".+?")|([^\)]*?))\)? ?(screen)?;?/gi,pi.getCSSURLValue=AG,pi.getCSSBaseBath=KS,pi.replaceCSSRelativeURLsWithAbsolute=JR;const TS=/\/\*[\s\S]*?\*\//g;function yH(DA){return DA.replace(TS,"")}pi.removeCSSComments=yH;const BD=/@font-face\s*{[^}]*}/g;function Am(DA){return DA.replace(BD,"")}pi.replaceCSSFontFace=Am},{"../../utils/array":31,"../../utils/platform":41,"../../utils/url":46,"../utils/log":20}],6:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.combineFixes=pi.findRelevantFix=void 0;const qJ=DA("../utils/log"),TY=DA("../../utils/url");function jt(DA,sq){if(!Array.isArray(sq)||0===sq.length||"*"!==sq[0].url[0])return(0,qJ.logWarn)("selectRelevantFix() failed to construct a single fix",DA,sq),null;let pi=0,jt=null;for(let qJ=1;qJ<sq.length;qJ++)if((0,TY.isURLInList)(DA,sq[qJ].url)){const DA=sq[qJ].url[0].length;(null===jt||pi<DA)&&(pi=DA,jt=qJ)}return jt}function TI(DA){if(0===DA.length||"*"!==DA[0].url[0])return(0,qJ.logWarn)("combineFixes() failed to construct a single fix",DA),null;function sq(DA){return DA.filter(Boolean).flat()}return{url:[],invert:sq(DA.map((DA=>DA.invert))),css:DA.map((DA=>DA.css)).filter(Boolean).join("\n"),ignoreInlineStyle:sq(DA.map((DA=>DA.ignoreInlineStyle))),ignoreImageAnalysis:sq(DA.map((DA=>DA.ignoreImageAnalysis))),disableStyleSheetsProxy:DA.some((DA=>DA.disableStyleSheetsProxy))}}pi.findRelevantFix=jt,pi.combineFixes=TI},{"../../utils/url":46,"../utils/log":20}],7:[function(DA,sq,pi){"use strict";var qJ=void 0&&(void 0).__importDefault||function(DA){return DA&&DA.__esModule?DA:{default:DA}};Object.defineProperty(pi,"__esModule",{value:!0}),pi.cleanImageProcessingCache=pi.getFilteredImageDataURL=pi.getImageDetails=void 0;const TY=DA("../../generators/svg-filter"),jt=DA("./network"),TI=DA("../../utils/color"),hK=DA("../../utils/network"),AA=DA("../utils/log"),Gq=qJ(DA("../../utils/async-queue")),wd=DA("../../const"),AG=new Gq.default;async function KS(DA){return new Promise((async(sq,pi)=>{let qJ;if(DA.startsWith("data:"))qJ=DA;else try{qJ=await JR(DA)}catch(DA){return void pi(DA)}try{const pi=await TS(qJ);AG.addToQueue((()=>{sq(Object.assign({src:DA,dataURL:qJ,width:pi.naturalWidth,height:pi.naturalHeight},wo(pi)))}))}catch(DA){pi(DA)}}))}async function JR(DA){const sq=undefined;return new URL(DA).origin===location.origin?await(0,hK.loadAsDataURL)(DA):await(0,jt.bgFetch)({url:DA,responseType:"data-url"})}async function TS(DA){return new Promise(((sq,pi)=>{const qJ=new Image;qJ.onload=()=>sq(qJ),qJ.onerror=()=>pi(`Unable to load image ${DA}`),qJ.src=DA}))}pi.getImageDetails=KS;const yH=32*32;let BD,Am;function OC(){const DA=yH,sq=yH;BD=document.createElement("canvas"),BD.width=DA,BD.height=sq,Am=BD.getContext("2d",{willReadFrequently:!0}),Am.imageSmoothingEnabled=!1}function oG(){BD=null,Am=null}const XC=5*1024*1024;function wo(DA){BD||OC();const{naturalWidth:sq,naturalHeight:pi}=DA;if(0===pi||0===sq)return(0,AA.logWarn)(`logWarn(Image is empty ${DA.currentSrc})`),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!1};const qJ=undefined;if(sq*pi*4>XC)return(0,AA.logInfo)("Skipped large image analyzing(Larger than 5mb in memory)"),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!0};const TY=sq*pi,jt=Math.min(1,Math.sqrt(yH/TY)),hK=Math.ceil(sq*jt),Gq=Math.ceil(pi*jt);Am.clearRect(0,0,hK,Gq),Am.drawImage(DA,0,0,sq,pi,0,0,hK,Gq);const wd=undefined,AG=Am.getImageData(0,0,hK,Gq).data,KS=.05,JR=.4,TS=.7;let oG=0,wo=0,By=0,gP,Jw,Gx,JW,Hi,ba,DM,pH;for(Gx=0;Gx<Gq;Gx++)for(Jw=0;Jw<hK;Jw++)gP=4*(Gx*hK+Jw),JW=AG[gP+0],Hi=AG[gP+1],ba=AG[gP+2],DM=AG[gP+3],DM/255<KS?oG++:(pH=(0,TI.getSRGBLightness)(JW,Hi,ba),pH<JR&&wo++,pH>TS&&By++);const Ts=hK*Gq,dC=Ts-oG,vl=undefined,CR=undefined,Ma=undefined,aT=undefined;return{isDark:wo/dC>=.7,isLight:By/dC>=.7,isTransparent:oG/Ts>=.1,isLarge:TY>=800*600,isTooLarge:!1}}function By({dataURL:DA,width:sq,height:pi},qJ){const jt=(0,TY.getSVGFilterMatrixValue)(qJ),TI=[`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${sq}" height="${pi}">`,"<defs>",`<filter id="${wd.IMG_FILTER_ID}">`,`<feColorMatrix type="matrix" values="${jt}" />`,"</filter>","</defs>",`<image width="${sq}" height="${pi}" filter="url(#${wd.IMG_FILTER_ID})" xlink:href="${DA}" />`,"</svg>"].join("");return`data:image/svg+xml;base64,${btoa(TI)}`}function gP(){AG&&AG.stopQueue(),oG()}pi.getFilteredImageDataURL=By,pi.cleanImageProcessingCache=gP},{"../../const":2,"../../generators/svg-filter":24,"../../utils/async-queue":32,"../../utils/color":34,"../../utils/network":39,"../utils/log":20,"./network":13}],8:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.cleanDynamicThemeCache=pi.removeDynamicTheme=pi.createOrUpdateDynamicThemeInternal=pi.createOrUpdateDynamicTheme=void 0;const qJ=DA("./inline-style"),TY=DA("./meta-theme-color"),jt=DA("./modify-css"),TI=DA("./style-manager"),hK=DA("./watch"),AA=DA("../../utils/array"),Gq=DA("../utils/dom"),wd=DA("../utils/log"),AG=DA("../../utils/throttle"),KS=DA("../../utils/math"),JR=DA("../../generators/css-filter"),TS=DA("../../generators/modify-colors"),yH=DA("../../generators/text-style"),BD=DA("../../utils/uid"),Am=DA("./adopted-style-manger"),OC=DA("../../utils/platform"),oG=DA("../../utils/color"),XC=DA("../../utils/url"),wo=DA("./variables"),By=DA("../../utils/visibility"),gP=DA("./fixes"),Jw=DA("../../const"),Gx=DA("./mv3-proxy"),JW=!1,Hi=(0,BD.generateUID)(),ba=new Map,DM=[];let pH=null,Ts=null,dC=null,vl=[],CR=[];function Ma(DA,sq=document.head||document){let pi=sq.querySelector(DA);return pi||(pi=document.createElement("style"),pi.classList.add(Jw.STYLESHEET_COMMON_CLASSNAME),pi.classList.add(DA.substring(1)),pi.media="screen",pi.textContent=""),pi}function aT(DA){(0,wd.logInfo)("MV3 proxy injector: regular path attempts to inject...");const sq=document.createElement("script");sq.src=chrome.runtime.getURL("js/proxy.js"),sq.dataset.arg=JSON.stringify(DA),document.head.prepend(sq)}const zK=new Map;function Hx(DA,sq){zK.has(sq)&&zK.get(sq).stop(),zK.set(sq,(0,Gq.watchForNodePosition)(DA,"head"))}function bp(){(0,AA.forEach)(zK.values(),(DA=>DA.stop())),zK.clear()}function XT(){const DA=Ma(Jw.STYLESHEET_FALLBACK_SELECTOR,document);DA.textContent=(0,jt.getModifiedFallbackStyle)(pH,{strict:!0}),document.head.insertBefore(DA,document.head.firstChild),Hx(DA,"fallback");const sq=Ma(Jw.STYLESHEET_USER_AGENT_SELECTOR);sq.textContent=(0,jt.getModifiedUserAgentStyle)(pH,dC,pH.styleSystemControls),document.head.insertBefore(sq,DA.nextSibling),Hx(sq,"user-agent");const pi=Ma(Jw.STYLESHEET_TEXT_SELECTOR);pH.useFont||pH.textStroke>0?pi.textContent=(0,yH.createTextStyle)(pH):pi.textContent="",document.head.insertBefore(pi,DA.nextSibling),Hx(pi,"text");const TY=Ma(Jw.STYLESHEET_INVERT_SELECTOR);Ts&&Array.isArray(Ts.invert)&&Ts.invert.length>0?TY.textContent=[`${Ts.invert.join(", ")} {`,`    filter: ${(0,JR.getCSSFilterValue)(Object.assign(Object.assign({},pH),{contrast:0===pH.mode?pH.contrast:(0,KS.clamp)(pH.contrast-10,0,100)}))} !important;`,"}"].join("\n"):TY.textContent="",document.head.insertBefore(TY,pi.nextSibling),Hx(TY,"invert");const TI=Ma(Jw.STYLESHEET_INLINE_SELECTOR);TI.textContent=(0,qJ.getInlineOverrideStyle)(),document.head.insertBefore(TI,TY.nextSibling),Hx(TI,"inline");const hK=Ma(Jw.STYLESHEET_OVERRIDE_SELECTOR);hK.textContent=Ts&&Ts.css?eo(Ts.css):"",document.head.appendChild(hK),Hx(hK,"override");const AA=Ma(Jw.STYLESHEET_VARIABLES_SELECTOR),Gq=(0,jt.getSelectionColor)(pH),{darkSchemeBackgroundColor:wd,darkSchemeTextColor:AG,lightSchemeBackgroundColor:BD,lightSchemeTextColor:Am,mode:OC}=pH;let XC=0===OC?BD:wd,wo=0===OC?Am:AG;XC=(0,TS.modifyBackgroundColor)((0,oG.parseColorWithCache)(XC),pH),wo=(0,TS.modifyForegroundColor)((0,oG.parseColorWithCache)(wo),pH),AA.textContent=[`:root {`,`   --${Jw.ROOT_VARS_PREFIX}-neutral-background: ${XC};`,`   --${Jw.ROOT_VARS_PREFIX}-neutral-text: ${wo};`,`   --${Jw.ROOT_VARS_PREFIX}-selection-background: ${Gq.backgroundColorSelection};`,`   --${Jw.ROOT_VARS_PREFIX}-selection-text: ${Gq.foregroundColorSelection};`,`}`].join("\n"),document.head.insertBefore(AA,TI.nextSibling),Hx(AA,"variables");const By=Ma(Jw.STYLESHEET_ROOT_VARS_SELECTOR);document.head.insertBefore(By,AA.nextSibling);const gP=!(Ts&&Ts.disableStyleSheetsProxy);aT(gP),document.dispatchEvent(new CustomEvent(Gx.EVENT_ARG,{detail:gP}))}const E=new Set;function xW(DA){const sq=Ma(Jw.STYLESHEET_INLINE_SELECTOR,DA);sq.textContent=(0,qJ.getInlineOverrideStyle)(),DA.insertBefore(sq,DA.firstChild);const pi=Ma(Jw.STYLESHEET_OVERRIDE_SELECTOR,DA);pi.textContent=Ts&&Ts.css?eo(Ts.css):"",DA.insertBefore(pi,sq.nextSibling);const TY=Ma(Jw.STYLESHEET_INVERT_SELECTOR,DA);Ts&&Array.isArray(Ts.invert)&&Ts.invert.length>0?TY.textContent=[`${Ts.invert.join(", ")} {`,`    filter: ${(0,JR.getCSSFilterValue)(Object.assign(Object.assign({},pH),{contrast:0===pH.mode?pH.contrast:(0,KS.clamp)(pH.contrast-10,0,100)}))} !important;`,"}"].join("\n"):TY.textContent="",DA.insertBefore(TY,pi.nextSibling),E.add(DA)}function eo(DA){return DA.replace(/\${(.+?)}/g,((DA,sq)=>{const pi=(0,oG.parseColorWithCache)(sq);return pi?(0,TS.modifyColor)(pi,pH):((0,wd.logWarn)("Couldn't parse CSSTemplate's color."),sq)}))}function vD(){const DA=document.querySelector(Jw.STYLESHEET_FALLBACK_SELECTOR);DA&&(DA.textContent="")}function wT(){Lc();const DA=undefined,sq=(0,TI.getManageableStyles)(document).filter((DA=>!ba.has(DA))).map((DA=>pk(DA)));sq.map((DA=>DA.details({secondRound:!1}))).filter((DA=>DA&&DA.rules.length>0)).forEach((DA=>{wo.variablesStore.addRulesForMatching(DA.rules)})),wo.variablesStore.matchVariablesAndDependants(),wo.variablesStore.setOnRootVariableChange((()=>{const DA=Ma(Jw.STYLESHEET_ROOT_VARS_SELECTOR);wo.variablesStore.putRootVars(DA,pH)}));const pi=Ma(Jw.STYLESHEET_ROOT_VARS_SELECTOR);wo.variablesStore.putRootVars(pi,pH),ba.forEach((DA=>DA.render(pH,vl))),0===zx.size&&vD(),sq.forEach((DA=>DA.watch()));const TY=(0,AA.toArray)(document.querySelectorAll(qJ.INLINE_STYLE_SELECTOR));(0,Gq.iterateShadowHosts)(document.documentElement,(DA=>{xW(DA.shadowRoot);const sq=DA.shadowRoot.querySelectorAll(qJ.INLINE_STYLE_SELECTOR);sq.length>0&&(0,AA.push)(TY,sq)})),TY.forEach((DA=>(0,qJ.overrideInlineStyle)(DA,pH,CR,vl))),Qa(document)}let xw=0;const zx=new Set;function pk(DA){const sq=++xw;function pi(){if(!(0,Gq.isDOMReady)()||!(0,By.documentIsVisible)()){zx.add(sq),(0,wd.logInfo)(`Current amount of styles loading: ${zx.size}`);const DA=document.querySelector(Jw.STYLESHEET_FALLBACK_SELECTOR);DA.textContent||(DA.textContent=(0,jt.getModifiedFallbackStyle)(pH,{strict:!1}))}}function qJ(){zx.delete(sq),(0,wd.logInfo)(`Removed loadingStyle ${sq}, now awaiting: ${zx.size}`),(0,wd.logInfo)(`To-do to be loaded`,zx),0===zx.size&&(0,Gq.isDOMReady)()&&vD()}function TY(){const DA=hK.details({secondRound:!0});DA&&(wo.variablesStore.addRulesForMatching(DA.rules),wo.variablesStore.matchVariablesAndDependants(),hK.render(pH,vl))}(0,wd.logInfo)(`New manager for element, with loadingStyleID ${sq}`,DA);const hK=(0,TI.manageStyle)(DA,{update:TY,loadingStart:pi,loadingEnd:qJ});return ba.set(DA,hK),hK}function mj(DA){const sq=ba.get(DA);sq&&(sq.destroy(),ba.delete(DA))}const Cp=(0,AG.throttle)((DA=>{ba.forEach((DA=>DA.render(pH,vl))),DM.forEach((DA=>DA.render(pH,vl))),DA&&DA()})),Lc=function(){Cp.cancel()};function Xo(){0!==zx.size?(0,wd.logWarn)(`DOM is ready, but still have styles being loaded.`,zx):vD()}function FZ(){wT(),Bo()}function aG(){XT(),(0,By.documentIsVisible)()||pH.immediateModify?FZ():(0,By.setDocumentVisibilityListener)(FZ),(0,TY.changeMetaThemeColorWhenAvailable)(pH)}function Qa(DA){try{if(Array.isArray(DA.adoptedStyleSheets)&&DA.adoptedStyleSheets.length>0){const sq=(0,Am.createAdoptedStyleSheetOverride)(DA);DM.push(sq),sq.render(pH,vl)}}catch(DA){(0,wd.logWarn)("Error occurred in handleAdoptedStyleSheets: ",DA)}}function Bo(){const DA=Array.from(ba.keys());(0,hK.watchForStyleChanges)(DA,(({created:DA,updated:sq,removed:pi,moved:qJ})=>{const TY=pi,jt=DA.concat(sq).concat(qJ).filter((DA=>!ba.has(DA))),TI=qJ.filter((DA=>ba.has(DA)));(0,wd.logInfo)(`Styles to be removed:`,TY),TY.forEach((DA=>mj(DA)));const hK=jt.map((DA=>pk(DA)));hK.map((DA=>DA.details({secondRound:!1}))).filter((DA=>DA&&DA.rules.length>0)).forEach((DA=>{wo.variablesStore.addRulesForMatching(DA.rules)})),wo.variablesStore.matchVariablesAndDependants(),hK.forEach((DA=>DA.render(pH,vl))),hK.forEach((DA=>DA.watch())),TI.forEach((DA=>ba.get(DA).restore()))}),(DA=>{xW(DA),Qa(DA)})),(0,qJ.watchForInlineStyles)((DA=>{if((0,qJ.overrideInlineStyle)(DA,pH,CR,vl),DA===document.documentElement){const sq=undefined;if((DA.getAttribute("style")||"").includes("--")){wo.variablesStore.matchVariablesAndDependants();const DA=Ma(Jw.STYLESHEET_ROOT_VARS_SELECTOR.substring(1));wo.variablesStore.putRootVars(DA,pH)}}}),(DA=>{xW(DA);const sq=DA.querySelectorAll(qJ.INLINE_STYLE_SELECTOR);sq.length>0&&(0,AA.forEach)(sq,(DA=>(0,qJ.overrideInlineStyle)(DA,pH,CR,vl)))})),(0,Gq.addDOMReadyListener)(Xo)}function aU(){ba.forEach((DA=>DA.pause())),bp(),(0,hK.stopWatchingForStyleChanges)(),(0,qJ.stopWatchingForInlineStyles)(),(0,Gq.removeDOMReadyListener)(Xo),(0,Gq.cleanReadyStateCompleteListeners)()}let ul;function zP(){const DA=document.createElement("meta");DA.name=Jw.META_PROPERTY,DA.content=Hi,document.head.appendChild(DA)}function fd(){const DA=document.querySelector(`meta[name="${Jw.META_PROPERTY}"]`);return DA?DA.content!==Hi:(zP(),!1)}function eL(DA,sq){if(!sq)return null;if(0===sq.length||"*"!==sq[0].url[0])return(0,wd.logWarn)("selectRelevantFix() failed to construct a single fix",DA,sq),null;const pi=(0,gP.findRelevantFix)(DA,sq);return pi?(0,gP.combineFixes)([sq[0],sq[pi]]):sq[0]}function he(DA,sq,pi){const qJ=undefined;Wi(DA,eL(document.location.href,sq),pi)}function Wi(DA,sq,pi){if(pH=DA,Ts=sq,Ts?(vl=Array.isArray(Ts.ignoreImageAnalysis)?Ts.ignoreImageAnalysis:[],CR=Array.isArray(Ts.ignoreInlineStyle)?Ts.ignoreInlineStyle:[]):(vl=[],CR=[]),pH.immediateModify&&(0,Gq.setIsDOMReady)((()=>!0)),dC=pi,document.head){if(fd())return void Cz();aG()}else{if(!OC.isFirefox){const DA=Ma(Jw.STYLESHEET_FALLBACK_SELECTOR);document.documentElement.appendChild(DA),DA.textContent=(0,jt.getModifiedFallbackStyle)(pH,{strict:!0})}const DA=new MutationObserver((()=>{if(document.head){if(DA.disconnect(),fd())return void Cz();aG()}}));DA.observe(document,{childList:!0,subtree:!0})}}function NW(){document.dispatchEvent(new CustomEvent(Jw.MSG_CLEANUP)),(0,Gq.removeNode)(document.head.querySelector(Jw.PROXY_SELECTOR))}function Cz(){VW(),(0,Gq.removeNode)(document.querySelector(Jw.STYLESHEET_FALLBACK_SELECTOR)),document.head&&((0,TY.restoreMetaThemeColor)(),(0,Gq.removeNode)(document.head.querySelector(Jw.STYLESHEET_USER_AGENT_SELECTOR)),(0,Gq.removeNode)(document.head.querySelector(Jw.STYLESHEET_TEXT_SELECTOR)),(0,Gq.removeNode)(document.head.querySelector(Jw.STYLESHEET_INVERT_SELECTOR)),(0,Gq.removeNode)(document.head.querySelector(Jw.STYLESHEET_INLINE_SELECTOR)),(0,Gq.removeNode)(document.head.querySelector(Jw.STYLESHEET_OVERRIDE_SELECTOR)),(0,Gq.removeNode)(document.head.querySelector(Jw.STYLESHEET_VARIABLES_SELECTOR)),(0,Gq.removeNode)(document.head.querySelector(Jw.STYLESHEET_ROOT_VARS_SELECTOR)),(0,Gq.removeNode)(document.head.querySelector(`meta[name="${Jw.META_PROPERTY}"]`)),NW()),E.forEach((DA=>{(0,Gq.removeNode)(DA.querySelector(Jw.STYLESHEET_INLINE_SELECTOR)),(0,Gq.removeNode)(DA.querySelector(Jw.STYLESHEET_OVERRIDE_SELECTOR))})),E.clear(),(0,AA.forEach)(ba.keys(),(DA=>mj(DA))),zx.clear(),(0,TI.cleanLoadingLinks)(),(0,AA.forEach)(document.querySelectorAll("."+Jw.STYLESHEET_COMMON_CLASSNAME),Gq.removeNode),DM.forEach((DA=>{DA.destroy()})),DM.splice(0),ul&&ul.disconnect()}function VW(){wo.variablesStore.clear(),XC.parsedURLCache.clear(),(0,By.removeDocumentVisibilityListener)(),Lc(),aU(),(0,jt.cleanModificationCache)(),(0,oG.clearColorCache)()}pi.createOrUpdateDynamicTheme=he,pi.createOrUpdateDynamicThemeInternal=Wi,pi.removeDynamicTheme=Cz,pi.cleanDynamicThemeCache=VW},{"../../const":2,"../../generators/css-filter":22,"../../generators/modify-colors":23,"../../generators/text-style":25,"../../utils/array":31,"../../utils/color":34,"../../utils/math":37,"../../utils/platform":41,"../../utils/throttle":43,"../../utils/uid":45,"../../utils/url":46,"../../utils/visibility":47,"../utils/dom":19,"../utils/log":20,"./adopted-style-manger":4,"./fixes":6,"./inline-style":9,"./meta-theme-color":10,"./modify-css":11,"./mv3-proxy":12,"./style-manager":14,"./variables":17,"./watch":18}],9:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.overrideInlineStyle=pi.stopWatchingForInlineStyles=pi.watchForInlineStyles=pi.getInlineOverrideStyle=pi.INLINE_STYLE_SELECTOR=void 0;const qJ=DA("../../utils/array"),TY=DA("../utils/dom"),jt=DA("./css-rules"),TI=DA("./modify-css"),hK=DA("./variables"),AA=DA("../../utils/platform"),Gq=DA("../../utils/time"),wd=DA("../../utils/throttle"),AG=DA("../../const"),KS={"background-color":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-bgcolor`,cssProp:"background-color",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-bgcolor`},"background-image":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-bgimage`,cssProp:"background-image",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-bgimage`},"border-color":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-border`,cssProp:"border-color",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-border`},"border-bottom-color":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-border-bottom`,cssProp:"border-bottom-color",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-border-bottom`},"border-left-color":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-border-left`,cssProp:"border-left-color",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-border-left`},"border-right-color":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-border-right`,cssProp:"border-right-color",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-border-right`},"border-top-color":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-border-top`,cssProp:"border-top-color",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-border-top`},"box-shadow":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-boxshadow`,cssProp:"box-shadow",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-boxshadow`},color:{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-color`,cssProp:"color",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-color`},fill:{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-fill`,cssProp:"fill",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-fill`},stroke:{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-stroke`,cssProp:"stroke",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-stroke`},"outline-color":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-outline`,cssProp:"outline-color",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-outline`},"stop-color":{customProp:`--${AG.ROOT_VARS_PREFIX}-inline-stopcolor`,cssProp:"stop-color",dataAttr:`data-${AG.ROOT_VARS_PREFIX}-inline-stopcolor`}},JR=Object.values(KS),TS={};JR.forEach((({cssProp:DA,customProp:sq})=>TS[sq]=DA));const yH=["style","fill","stop-color","stroke","bgcolor","color"];function BD(){return JR.map((({dataAttr:DA,customProp:sq,cssProp:pi})=>[`[${DA}] {`,`  ${pi}: var(${sq}) !important;`,"}"].join("\n"))).join("\n")}function Am(DA){const sq=[];return DA instanceof Element&&DA.matches(pi.INLINE_STYLE_SELECTOR)&&sq.push(DA),(DA instanceof Element||AA.isShadowDomSupported&&DA instanceof ShadowRoot||DA instanceof Document)&&(0,qJ.push)(sq,DA.querySelectorAll(pi.INLINE_STYLE_SELECTOR)),sq}pi.INLINE_STYLE_SELECTOR=yH.map((DA=>`[${DA}]`)).join(", "),pi.getInlineOverrideStyle=BD;const OC=new Map,oG=new Map;function XC(DA,sq){wo(document,DA,sq),(0,TY.iterateShadowHosts)(document.documentElement,(pi=>{wo(pi.shadowRoot,DA,sq)}))}function wo(DA,sq,pi){OC.has(DA)&&(OC.get(DA).disconnect(),oG.get(DA).disconnect());const qJ=new WeakSet;function jt(DA){Am(DA).forEach((DA=>{qJ.has(DA)||(qJ.add(DA),sq(DA))})),(0,TY.iterateShadowHosts)(DA,(TY=>{qJ.has(DA)||(qJ.add(DA),pi(TY.shadowRoot),wo(TY.shadowRoot,sq,pi))}))}const TI=(0,TY.createOptimizedTreeObserver)(DA,{onMinorMutations:({additions:DA})=>{DA.forEach((DA=>jt(DA)))},onHugeMutations:()=>{jt(DA)}});OC.set(DA,TI);let hK=0,AA=null;const AG=(0,Gq.getDuration)({seconds:10}),KS=(0,Gq.getDuration)({seconds:2}),TS=50;let BD=[],XC=null;const By=(0,wd.throttle)((DA=>{DA.forEach((DA=>{yH.includes(DA.attributeName)&&sq(DA.target)}))})),gP=new MutationObserver((DA=>{if(XC)return void BD.push(...DA);hK++;const sq=Date.now();if(null==AA)AA=sq;else if(hK>=TS){if(sq-AA<AG)return XC=setTimeout((()=>{AA=null,hK=0,XC=null;const DA=BD;BD=[],By(DA)}),KS),void BD.push(...DA);AA=sq,hK=1}By(DA)}));gP.observe(DA,{attributes:!0,attributeFilter:yH.concat(JR.map((({dataAttr:DA})=>DA))),subtree:!0}),oG.set(DA,gP)}function By(){OC.forEach((DA=>DA.disconnect())),oG.forEach((DA=>DA.disconnect())),OC.clear(),oG.clear()}pi.watchForInlineStyles=XC,pi.stopWatchingForInlineStyles=By;const gP=new WeakMap,Jw=["brightness","contrast","grayscale","sepia","mode"];function Gx(DA,sq){return yH.map((sq=>`${sq}="${DA.getAttribute(sq)}"`)).concat(Jw.map((DA=>`${DA}="${sq[DA]}"`))).join(" ")}function JW(DA,sq){for(let pi=0,qJ=sq.length;pi<qJ;pi++){const qJ=sq[pi];if(DA.matches(qJ))return!0}return!1}function Hi(DA,sq,pi,AA){const Gq=undefined;if(Gx(DA,sq)===gP.get(DA))return;const wd=new Set(Object.keys(KS));function AG(pi,qJ,TY){const jt=pi.startsWith("--"),{customProp:Gq,dataAttr:AG}=jt?{}:KS[pi],JR=(0,TI.getModifiableCSSDeclaration)(qJ,TY,{style:DA.style},hK.variablesStore,AA,null);if(!JR)return;let TS=JR.value;if("function"==typeof TS&&(TS=TS(sq)),jt&&"object"==typeof TS){const sq=undefined;TS.declarations.forEach((({property:sq,value:pi})=>{!(pi instanceof Promise)&&DA.style.setProperty(sq,pi)}))}else DA.style.setProperty(Gq,TS),DA.hasAttribute(AG)||DA.setAttribute(AG,""),wd.delete(pi)}if(pi.length>0&&JW(DA,pi))wd.forEach((sq=>{DA.removeAttribute(KS[sq].dataAttr)}));else{if(DA.hasAttribute("bgcolor")){let sq=DA.getAttribute("bgcolor");(sq.match(/^[0-9a-f]{3}$/i)||sq.match(/^[0-9a-f]{6}$/i))&&(sq=`#${sq}`),AG("background-color","background-color",sq)}if(DA.hasAttribute("color")&&"mask-icon"!==DA.rel){let sq=DA.getAttribute("color");(sq.match(/^[0-9a-f]{3}$/i)||sq.match(/^[0-9a-f]{6}$/i))&&(sq=`#${sq}`),AG("color","color",sq)}if(DA instanceof SVGElement){if(DA.hasAttribute("fill")){const sq=32,pi=DA.getAttribute("fill");if("none"!==pi)if(DA instanceof SVGTextElement)AG("fill","color",pi);else{const qJ=()=>{const{width:qJ,height:TY}=DA.getBoundingClientRect(),jt=undefined;AG("fill",qJ>sq||TY>sq?"background-color":"color",pi)};(0,TY.isReadyStateComplete)()?qJ():(0,TY.addReadyStateCompleteListener)(qJ)}}DA.hasAttribute("stop-color")&&AG("stop-color","background-color",DA.getAttribute("stop-color"))}if(DA.hasAttribute("stroke")){const sq=DA.getAttribute("stroke");AG("stroke",DA instanceof SVGLineElement||DA instanceof SVGTextElement?"border-color":"color",sq)}DA.style&&(0,jt.iterateCSSDeclarations)(DA.style,((sq,pi)=>{if("background-image"!==sq||!pi.includes("url"))if(KS.hasOwnProperty(sq)||sq.startsWith("--")&&!TS[sq])AG(sq,sq,pi);else{const pi=TS[sq];if(pi&&!DA.style.getPropertyValue(pi)&&!DA.hasAttribute(pi)){if("background-color"===pi&&DA.hasAttribute("bgcolor"))return;DA.style.setProperty(sq,"")}}})),DA.style&&DA instanceof SVGTextElement&&DA.style.fill&&AG("fill","color",DA.style.getPropertyValue("fill")),(0,qJ.forEach)(wd,(sq=>{DA.removeAttribute(KS[sq].dataAttr)})),gP.set(DA,Gx(DA,sq))}}pi.overrideInlineStyle=Hi},{"../../const":2,"../../utils/array":31,"../../utils/platform":41,"../../utils/throttle":43,"../../utils/time":44,"../utils/dom":19,"./css-rules":5,"./modify-css":11,"./variables":17}],10:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.restoreMetaThemeColor=pi.changeMetaThemeColorWhenAvailable=void 0;const qJ=DA("../../utils/color"),TY=DA("../../generators/modify-colors"),jt=DA("../utils/log"),TI="theme-color",hK=`meta[name="${TI}"]`;let AA=null,Gq=null;function wd(DA,sq){AA=AA||DA.content;const pi=(0,qJ.parseColorWithCache)(AA);pi?DA.content=(0,TY.modifyBackgroundColor)(pi,sq):(0,jt.logWarn)("Invalid meta color",pi)}function AG(DA){const sq=document.querySelector(hK);sq?wd(sq,DA):(Gq&&Gq.disconnect(),Gq=new MutationObserver((sq=>{DA:for(let pi=0;pi<sq.length;pi++){const{addedNodes:qJ}=sq[pi];for(let sq=0;sq<qJ.length;sq++){const pi=qJ[sq];if(pi instanceof HTMLMetaElement&&pi.name===TI){Gq.disconnect(),Gq=null,wd(pi,DA);break DA}}}})),Gq.observe(document.head,{childList:!0}))}function KS(){Gq&&(Gq.disconnect(),Gq=null);const DA=document.querySelector(hK);DA&&AA&&(DA.content=AA)}pi.changeMetaThemeColorWhenAvailable=AG,pi.restoreMetaThemeColor=KS},{"../../generators/modify-colors":23,"../../utils/color":34,"../utils/log":20}],11:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.cleanModificationCache=pi.getShadowModifier=pi.getShadowModifierWithInfo=pi.getBgImageModifier=pi.getModifiedFallbackStyle=pi.getSelectionColor=pi.getModifiedUserAgentStyle=pi.getModifiableCSSDeclaration=void 0;const qJ=DA("../../utils/color"),TY=DA("../../utils/math"),jt=DA("../../utils/text"),TI=DA("../../utils/url"),hK=DA("../../generators/modify-colors"),AA=DA("./css-rules"),Gq=DA("./image"),wd=DA("../utils/log"),AG=DA("../../utils/platform"),KS=DA("../../utils/parsing");function JR(DA,sq){return Boolean(DA&&DA.getPropertyPriority(sq))}function TS(DA,sq,pi,qJ,TY,jt){if(DA.startsWith("--")){const TI=DM(qJ,DA,sq,pi,TY,jt);if(TI)return{property:DA,value:TI,important:JR(pi.style,DA),sourceValue:sq}}else if(sq.includes("var(")){const TY=pH(qJ,DA,sq);if(TY)return{property:DA,value:TY,important:JR(pi.style,DA),sourceValue:sq}}else{if("color-scheme"===DA)return(0,wd.logWarn)("CSS property color-scheme is not supported"),null;if(DA.includes("color")&&"-webkit-print-color-adjust"!==DA||"fill"===DA||"stroke"===DA||"stop-color"===DA){const qJ=By(DA,sq,pi);if(qJ)return{property:DA,value:qJ,important:JR(pi.style,DA),sourceValue:sq}}else if("background-image"===DA||"list-style-image"===DA){const qJ=JW(sq,pi,TY,jt);if(qJ)return{property:DA,value:qJ,important:JR(pi.style,DA),sourceValue:sq}}else if(DA.includes("shadow")){const qJ=ba(sq);if(qJ)return{property:DA,value:qJ,important:JR(pi.style,DA),sourceValue:sq}}}return null}function yH(...DA){return DA.filter(Boolean).join(", ")}function BD(DA,sq,pi){const qJ=[];sq||(qJ.push("html {"),qJ.push(`    background-color: ${(0,hK.modifyBackgroundColor)({r:255,g:255,b:255},DA)} !important;`),qJ.push("}")),qJ.push("html {"),qJ.push(`    color-scheme: ${1===DA.mode?"dark":"dark light"} !important;`),qJ.push("}");const TY=yH(sq?"":"html, body",pi?"input, textarea, select, button, dialog":"");return TY&&(qJ.push(`${TY} {`),qJ.push(`    background-color: ${(0,hK.modifyBackgroundColor)({r:255,g:255,b:255},DA)};`),qJ.push("}")),qJ.push(`${yH("html, body",pi?"input, textarea, select, button":"")} {`),qJ.push(`    border-color: ${(0,hK.modifyBorderColor)({r:76,g:76,b:76},DA)};`),qJ.push(`    color: ${(0,hK.modifyForegroundColor)({r:0,g:0,b:0},DA)};`),qJ.push("}"),qJ.push("a {"),qJ.push(`    color: ${(0,hK.modifyForegroundColor)({r:0,g:64,b:255},DA)};`),qJ.push("}"),qJ.push("table {"),qJ.push(`    border-color: ${(0,hK.modifyBorderColor)({r:128,g:128,b:128},DA)};`),qJ.push("}"),qJ.push("::placeholder {"),qJ.push(`    color: ${(0,hK.modifyForegroundColor)({r:169,g:169,b:169},DA)};`),qJ.push("}"),qJ.push("input:-webkit-autofill,"),qJ.push("textarea:-webkit-autofill,"),qJ.push("select:-webkit-autofill {"),qJ.push(`    background-color: ${(0,hK.modifyBackgroundColor)({r:250,g:255,b:189},DA)} !important;`),qJ.push(`    color: ${(0,hK.modifyForegroundColor)({r:0,g:0,b:0},DA)} !important;`),qJ.push("}"),DA.scrollbarColor&&qJ.push(oG(DA)),DA.selectionColor&&qJ.push(OC(DA)),qJ.join("\n")}function Am(DA){let sq,pi;if("auto"===DA.selectionColor)sq=(0,hK.modifyBackgroundColor)({r:0,g:96,b:212},Object.assign(Object.assign({},DA),{grayscale:0})),pi=(0,hK.modifyForegroundColor)({r:255,g:255,b:255},Object.assign(Object.assign({},DA),{grayscale:0}));else{const TY=(0,qJ.parseColorWithCache)(DA.selectionColor),jt=(0,qJ.rgbToHSL)(TY);sq=DA.selectionColor,pi=jt.l<.5?"#FFF":"#000"}return{backgroundColorSelection:sq,foregroundColorSelection:pi}}function OC(DA){const sq=[],pi=Am(DA),qJ=pi.backgroundColorSelection,TY=pi.foregroundColorSelection;return["::selection","::-moz-selection"].forEach((DA=>{sq.push(`${DA} {`),sq.push(`    background-color: ${qJ} !important;`),sq.push(`    color: ${TY} !important;`),sq.push("}")})),sq.join("\n")}function oG(DA){const sq=[];let pi,jt,TI,AA,Gq,wd;if("auto"===DA.scrollbarColor)pi=(0,hK.modifyBackgroundColor)({r:241,g:241,b:241},DA),jt=(0,hK.modifyForegroundColor)({r:96,g:96,b:96},DA),TI=(0,hK.modifyBackgroundColor)({r:176,g:176,b:176},DA),AA=(0,hK.modifyBackgroundColor)({r:144,g:144,b:144},DA),Gq=(0,hK.modifyBackgroundColor)({r:96,g:96,b:96},DA),wd=(0,hK.modifyBackgroundColor)({r:255,g:255,b:255},DA);else{const sq=(0,qJ.parseColorWithCache)(DA.scrollbarColor),hK=(0,qJ.rgbToHSL)(sq),wd=hK.l>.5,AG=DA=>Object.assign(Object.assign({},hK),{l:(0,TY.clamp)(hK.l+DA,0,1)}),KS=DA=>Object.assign(Object.assign({},hK),{l:(0,TY.clamp)(hK.l-DA,0,1)});pi=(0,qJ.hslToString)(KS(.4)),jt=(0,qJ.hslToString)(wd?KS(.4):AG(.4)),TI=(0,qJ.hslToString)(hK),AA=(0,qJ.hslToString)(AG(.1)),Gq=(0,qJ.hslToString)(AG(.2))}return sq.push("::-webkit-scrollbar {"),sq.push(`    background-color: ${pi};`),sq.push(`    color: ${jt};`),sq.push("}"),sq.push("::-webkit-scrollbar-thumb {"),sq.push(`    background-color: ${TI};`),sq.push("}"),sq.push("::-webkit-scrollbar-thumb:hover {"),sq.push(`    background-color: ${AA};`),sq.push("}"),sq.push("::-webkit-scrollbar-thumb:active {"),sq.push(`    background-color: ${Gq};`),sq.push("}"),sq.push("::-webkit-scrollbar-corner {"),sq.push(`    background-color: ${wd};`),sq.push("}"),AG.isFirefox&&(sq.push("* {"),sq.push(`    scrollbar-color: ${TI} ${pi};`),sq.push("}")),sq.join("\n")}function XC(DA,{strict:sq}){const pi=[],qJ=["microsoft.com","docs.microsoft.com"].includes(location.hostname);return pi.push(`html, body, ${sq?`body :not(iframe)${qJ?':not(div[style^="position:absolute;top:0;left:-"]':""}`:"body > :not(iframe)"} {`),pi.push(`    background-color: ${(0,hK.modifyBackgroundColor)({r:255,g:255,b:255},DA)} !important;`),pi.push(`    border-color: ${(0,hK.modifyBorderColor)({r:64,g:64,b:64},DA)} !important;`),pi.push(`    color: ${(0,hK.modifyForegroundColor)({r:0,g:0,b:0},DA)} !important;`),pi.push("}"),pi.join("\n")}pi.getModifiableCSSDeclaration=TS,pi.getModifiedUserAgentStyle=BD,pi.getSelectionColor=Am,pi.getModifiedFallbackStyle=XC;const wo=new Set(["inherit","transparent","initial","currentcolor","none","unset"]);function By(DA,sq,pi){if(wo.has(sq.toLowerCase()))return sq;const TY=(0,qJ.parseColorWithCache)(sq);return TY?DA.includes("background")?pi.style.webkitMaskImage&&"none"!==pi.style.webkitMaskImage||pi.style.webkitMask&&!pi.style.webkitMask.startsWith("none")||pi.style.mask&&"none"!==pi.style.mask||pi.style.getPropertyValue("mask-image")&&"none"!==pi.style.getPropertyValue("mask-image")?DA=>(0,hK.modifyForegroundColor)(TY,DA):DA=>(0,hK.modifyBackgroundColor)(TY,DA):DA.includes("border")||DA.includes("outline")?DA=>(0,hK.modifyBorderColor)(TY,DA):DA=>(0,hK.modifyForegroundColor)(TY,DA):((0,wd.logWarn)("Couldn't parse color",sq),null)}const gP=new Map,Jw=new Map;function Gx(DA,sq){if(!DA||0===sq.length)return!1;if(sq.some((DA=>"*"===DA)))return!0;const pi=DA.split(/,\s*/g);for(let DA=0;DA<sq.length;DA++){const qJ=sq[DA];if(pi.some((DA=>DA===qJ)))return!0}return!1}function JW(DA,sq,pi,AG){try{const JR=(0,KS.parseGradient)(DA),TS=(0,jt.getMatches)(AA.cssURLRegex,DA);if(0===TS.length&&0===JR.length)return DA;const yH=sq=>{let pi=0;return sq.map((sq=>{const qJ=DA.indexOf(sq,pi);return pi=qJ+sq.length,{match:sq,index:qJ}}))},BD=JR.map((DA=>Object.assign({type:"gradient"},DA))).concat(yH(TS).map((DA=>Object.assign({type:"url",offset:0},DA)))).sort(((DA,sq)=>DA.index>sq.index?1:-1)),Am=DA=>{const{typeGradient:sq,match:pi,hasComma:TY}=DA,TI=/([^\(\),]+(\([^\(\)]*(\([^\(\)]*\)*[^\(\)]*)?\))?([^\(\), ]|( (?!calc)))*),?/g,AA=/^(from|color-stop|to)\(([^\(\)]*?,\s*)?(.*?)\)$/,Gq=(0,jt.getMatches)(TI,pi,1).map((DA=>{DA=DA.trim();let sq=(0,qJ.parseColorWithCache)(DA);if(sq)return DA=>(0,hK.modifyGradientColor)(sq,DA);const pi=DA.lastIndexOf(" ");if(sq=(0,qJ.parseColorWithCache)(DA.substring(0,pi)),sq)return qJ=>`${(0,hK.modifyGradientColor)(sq,qJ)} ${DA.substring(pi+1)}`;const TY=DA.match(AA);return TY&&(sq=(0,qJ.parseColorWithCache)(TY[3]),sq)?DA=>`${TY[1]}(${TY[2]?`${TY[2]}, `:""}${(0,hK.modifyGradientColor)(sq,DA)})`:()=>DA}));return DA=>`${sq}(${Gq.map((sq=>sq(DA))).join(", ")})${TY?", ":""}`},OC=DA=>{var qJ;if(Gx(sq.selectorText,pi))return null;let TY=(0,AA.getCSSURLValue)(DA);const jt=0===TY.length,{parentStyleSheet:hK}=sq,KS=hK&&hK.href?(0,AA.getCSSBaseBath)(hK.href):(null===(qJ=hK.ownerNode)||void 0===qJ?void 0:qJ.baseURI)||location.origin;TY=(0,TI.getAbsoluteURL)(KS,TY);const JR=`url("${TY}")`;return async DA=>{if(jt)return"url('')";let sq;if(gP.has(TY))sq=gP.get(TY);else try{if(Jw.has(TY)){const DA=Jw.get(TY);if(sq=await new Promise((sq=>DA.push(sq))),!sq)return null}else Jw.set(TY,[]),sq=await(0,Gq.getImageDetails)(TY),gP.set(TY,sq),Jw.get(TY).forEach((DA=>DA(sq))),Jw.delete(TY);if(AG())return null}catch(DA){return(0,wd.logWarn)(DA),Jw.has(TY)&&(Jw.get(TY).forEach((DA=>DA(null))),Jw.delete(TY)),JR}const pi=undefined;return oG(sq,DA)||JR}},oG=(DA,sq)=>{const{isDark:pi,isLight:qJ,isTransparent:jt,isLarge:TI,isTooLarge:hK,width:AA}=DA;let AG;if(hK)(0,wd.logInfo)(`Not modifying too large image ${DA.src}`),AG=`url("${DA.src}")`;else if(pi&&jt&&1===sq.mode&&!TI&&AA>2){(0,wd.logInfo)(`Inverting dark image ${DA.src}`);const pi=undefined;AG=`url("${(0,Gq.getFilteredImageDataURL)(DA,Object.assign(Object.assign({},sq),{sepia:(0,TY.clamp)(sq.sepia+10,0,100)}))}")`}else if(qJ&&!jt&&1===sq.mode)if(TI)(0,wd.logInfo)(`Not modifying light non-transparent large image ${DA.src}`),AG="none";else{(0,wd.logInfo)(`Dimming light image ${DA.src}`);const pi=undefined;AG=`url("${(0,Gq.getFilteredImageDataURL)(DA,sq)}")`}else if(0===sq.mode&&qJ&&!TI){(0,wd.logInfo)(`Applying filter to image ${DA.src}`);const pi=undefined;AG=`url("${(0,Gq.getFilteredImageDataURL)(DA,Object.assign(Object.assign({},sq),{brightness:(0,TY.clamp)(sq.brightness-10,5,200),sepia:(0,TY.clamp)(sq.sepia+10,0,100)}))}")`}else(0,wd.logInfo)(`Not modifying too large image ${DA.src}`),AG=null;return AG},XC=[];let wo=0,By=!1;return BD.forEach((({type:sq,match:pi,index:qJ,typeGradient:TY,hasComma:jt,offset:TI},hK)=>{const AA=qJ,Gq=wo,wd=AA+pi.length+TI;wo=wd,Gq!==AA&&(By?XC.push((()=>{let sq=DA.substring(Gq,AA);return","===sq[0]&&(sq=sq.substring(1)),sq})):XC.push((()=>DA.substring(Gq,AA)))),By=jt||!1,"url"===sq?XC.push(OC(pi)):"gradient"===sq&&XC.push(Am({match:pi,index:qJ,typeGradient:TY,hasComma:jt||!1,offset:TI})),hK===BD.length-1&&XC.push((()=>DA.substring(wd)))})),DA=>{const sq=XC.filter(Boolean).map((sq=>sq(DA)));if(sq.some((DA=>DA instanceof Promise)))return Promise.all(sq).then((DA=>DA.filter(Boolean).join("")));const pi=sq.join("");return pi.endsWith(", initial")?pi.slice(0,-9):pi}}catch(sq){return(0,wd.logWarn)(`Unable to parse gradient ${DA}`,sq),null}}function Hi(DA){try{let sq=0;const pi=(0,jt.getMatches)(/(^|\s)(?!calc)([a-z]+\(.+?\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,DA,2);let TY=0;const TI=pi.map(((jt,TI)=>{const AA=sq,Gq=DA.indexOf(jt,sq),wd=Gq+jt.length;sq=wd;const AG=(0,qJ.parseColorWithCache)(jt);return AG?sq=>`${DA.substring(AA,Gq)}${(0,hK.modifyShadowColor)(AG,sq)}${TI===pi.length-1?DA.substring(wd):""}`:(TY++,()=>DA.substring(AA,wd))}));return DA=>{const sq=TI.map((sq=>sq(DA))).join("");return{matchesLength:pi.length,unparseableMatchesLength:TY,result:sq}}}catch(sq){return(0,wd.logWarn)(`Unable to parse shadow ${DA}`,sq),null}}function ba(DA){const sq=Hi(DA);return sq?DA=>sq(DA).result:null}function DM(DA,sq,pi,qJ,TY,jt){return DA.getModifierForVariable({varName:sq,sourceValue:pi,rule:qJ,ignoredImgSelectors:TY,isCancelled:jt})}function pH(DA,sq,pi){return DA.getModifierForVarDependant(sq,pi)}function Ts(){(0,hK.clearColorModificationCache)(),gP.clear(),(0,Gq.cleanImageProcessingCache)(),Jw.clear()}pi.getBgImageModifier=JW,pi.getShadowModifierWithInfo=Hi,pi.getShadowModifier=ba,pi.cleanModificationCache=Ts},{"../../generators/modify-colors":23,"../../utils/color":34,"../../utils/math":37,"../../utils/parsing":40,"../../utils/platform":41,"../../utils/text":42,"../../utils/url":46,"../utils/log":20,"./css-rules":5,"./image":7}],12:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.EVENT_ARG=void 0;const qJ=DA("./stylesheet-proxy"),TY=DA("../utils/log"),jt=DA("../../const");document.currentScript&&document.currentScript.remove();const TI=`${jt.MISC_PREFIX}ProxyInjected`,hK=`${jt.EVENT_PREFIX}stylesheetProxy__done`;pi.EVENT_ARG=`${jt.EVENT_PREFIX}stylesheetProxy__arg`;const AA=!document.currentScript;function Gq(DA){(0,qJ.injectProxy)(DA),KS(),document.dispatchEvent(new CustomEvent(hK))}function wd(){const DA=document.currentScript.dataset.arg;if(void 0!==DA){document.documentElement.dataset[TI]="true";const sq=JSON.parse(DA);(0,TY.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${sq}).`),Gq(sq)}}function AG(DA){document.removeEventListener(pi.EVENT_ARG,AG),void 0===document.documentElement.dataset[TI]?(document.documentElement.dataset[TI]="true",(0,TY.logInfo)(`MV3 proxy injector: ${AA?"registerd":"dedicated"} path runs injectProxy(${DA.detail}).`),Gq(DA.detail)):(0,TY.logInfo)(`MV3 proxy injector: ${AA?"registerd":"dedicated"} path exits because everything is done.`)}function KS(){document.removeEventListener(pi.EVENT_ARG,AG),document.removeEventListener(hK,KS)}function JR(){(0,TY.logInfo)(`MV3 proxy injector: ${AA?"registerd":"dedicated"} path setup...`),document.addEventListener(pi.EVENT_ARG,AG),document.addEventListener(hK,KS)}function TS(){void 0===document.documentElement.dataset[TI]?((0,TY.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&wd(),JR()):(0,TY.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}TS()},{"../../const":2,"../utils/log":20,"./stylesheet-proxy":16}],13:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.bgFetch=void 0;const qJ=DA("../../utils/message");let TY=0;const jt=new Map,TI=new Map;async function hK(DA){return new Promise(((sq,pi)=>{const hK=++TY;jt.set(hK,sq),TI.set(hK,pi),chrome.runtime.sendMessage({type:qJ.MessageType.CS_FETCH,data:DA,id:hK})}))}pi.bgFetch=hK,chrome.runtime.onMessage.addListener((({type:DA,data:sq,error:pi,id:TY})=>{if(DA===qJ.MessageType.BG_FETCH_RESPONSE){const DA=jt.get(TY),qJ=TI.get(TY);jt.delete(TY),TI.delete(TY),pi?qJ&&qJ(pi):DA&&DA(sq)}}))},{"../../utils/message":38}],14:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.manageStyle=pi.cleanLoadingLinks=pi.getManageableStyles=pi.shouldManageStyle=pi.STYLE_SELECTOR=void 0;const qJ=DA("../../utils/array"),TY=DA("../../utils/text"),jt=DA("../../utils/url"),TI=DA("../utils/dom"),hK=DA("../utils/log"),AA=DA("./css-rules"),Gq=DA("./network"),wd=DA("./stylesheet-modifier"),AG=DA("../../utils/platform"),KS=DA("../../const"),JR=!1;function TS(DA){if(!DA.href)return!1;try{const sq=undefined;return"fonts.googleapis.com"===new URL(DA.href).hostname}catch(sq){return(0,hK.logInfo)(`Couldn't construct ${DA.href} as URL`),!1}}function yH(DA){return(DA instanceof HTMLStyleElement||DA instanceof SVGStyleElement||DA instanceof HTMLLinkElement&&Boolean(DA.rel)&&DA.rel.toLowerCase().includes("stylesheet")&&Boolean(DA.href)&&!DA.disabled&&(!AG.isFirefox||!DA.href.startsWith("moz-extension://"))&&!TS(DA))&&!DA.classList.contains(KS.STYLESHEET_COMMON_CLASSNAME)&&"print"!==DA.media.toLowerCase()&&!DA.classList.contains("stylus")}function BD(DA,sq=[],TY=!0){return yH(DA)?sq.push(DA):(DA instanceof Element||AG.isShadowDomSupported&&DA instanceof ShadowRoot||DA===document)&&((0,qJ.forEach)(DA.querySelectorAll(pi.STYLE_SELECTOR),(DA=>BD(DA,sq,!1))),TY&&(0,TI.iterateShadowHosts)(DA,(DA=>BD(DA.shadowRoot,sq,!1)))),sq}pi.STYLE_SELECTOR='style, link[rel*="stylesheet" i]:not([disabled])',pi.shouldManageStyle=yH,pi.getManageableStyles=BD;const Am=new WeakSet,OC=new WeakSet;let oG=!1;document.addEventListener(`${KS.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{oG=!0}));let XC=0;const wo=new Map;function By(){wo.clear()}function gP(DA,{update:sq,loadingStart:pi,loadingEnd:qJ}){const TY=[];let Gq=DA;for(;(Gq=Gq.nextElementSibling)&&Gq.matches(`.${KS.STYLESHEET_COMMON_CLASSNAME}`);)TY.push(Gq);let TS=TY.find((DA=>DA.matches(KS.STYLESHEET_CORS_SELECTOR)&&!OC.has(DA)))||null,yH=TY.find((DA=>DA.matches(KS.STYLESHEET_SYNC_SELECTOR)&&!Am.has(DA)))||null,BD=null,By=null,gP=!1,Gx=!0;const DM=(0,wd.createStyleSheetModifier)(),pH=new MutationObserver((()=>{sq()})),Ts={attributes:!0,childList:!0,subtree:!0,characterData:!0};function dC(){return DA instanceof HTMLStyleElement&&DA.textContent.trim().match(AA.cssImportRegex)}function vl(DA,sq){let pi=!1;if(DA){let qJ;DA:for(let TY=0,jt=DA.length;TY<jt;TY++)if(qJ=DA[TY],qJ.href){if(!sq){pi=!0;break DA}if(!qJ.href.startsWith("https://fonts.googleapis.com/")&&qJ.href.startsWith("http")&&!qJ.href.startsWith(location.origin)){pi=!0;break DA}}}return pi}function CR(){if(TS)return(0,hK.logInfo)("[getRulesSync] Using cors-copy."),TS.sheet.cssRules;if(dC())return(0,hK.logInfo)("[getRulesSync] CSSImport detected."),null;const sq=xw();return DA instanceof HTMLLinkElement&&!(0,jt.isRelativeHrefOnAbsolutePath)(DA.href)&&vl(sq,!1)?((0,hK.logInfo)("[getRulesSync] CSSImportRule detected on non-local href."),null):vl(sq,!0)?((0,hK.logInfo)("[getRulesSync] Cross-Origin CSSImportRule detected."),null):((0,hK.logInfo)("[getRulesSync] Using cssRules."),!sq&&(0,hK.logWarn)("[getRulesSync] cssRules is null, trying again."),sq)}function Ma(){TS?(DA.nextSibling!==TS&&DA.parentNode.insertBefore(TS,DA.nextSibling),TS.nextSibling!==yH&&DA.parentNode.insertBefore(yH,TS.nextSibling)):DA.nextSibling!==yH&&DA.parentNode.insertBefore(yH,DA.nextSibling)}function aT(){yH=DA instanceof SVGStyleElement?document.createElementNS("http://www.w3.org/2000/svg","style"):document.createElement("style"),yH.classList.add(KS.STYLESHEET_COMMON_CLASSNAME),yH.classList.add(KS.STYLESHEET_SYNC_SELECTOR.substring(1)),yH.media="screen",DA.title&&(yH.title=DA.title),Am.add(yH)}let zK=!1,Hx=!1;const bp=++XC;async function XT(){let sq,pi;if(DA instanceof HTMLLinkElement){let[qJ,TY]=vD();if(TY&&(0,hK.logWarn)(TY),!qJ&&!TY&&!AG.isSafari||AG.isSafari&&!DA.sheet||wT(TY)){try{(0,hK.logInfo)(`Linkelement ${bp} is not loaded yet and thus will be await for`,DA),await Jw(DA,bp)}catch(DA){(0,hK.logWarn)(DA),Hx=!0}if(gP)return null;[qJ,TY]=vD(),TY&&(0,hK.logWarn)(TY)}if(qJ&&!vl(qJ,!1))return qJ;if(sq=await JW(DA.href),pi=(0,AA.getCSSBaseBath)(DA.href),gP)return null}else{if(!dC())return null;sq=DA.textContent.trim(),pi=(0,AA.getCSSBaseBath)(location.href)}if(sq){try{const qJ=await Hi(sq,pi);TS=ba(DA,qJ)}catch(DA){(0,hK.logWarn)(DA)}if(TS)return BD=(0,TI.watchForNodePosition)(TS,"prev-sibling"),TS.sheet.cssRules}return null}function E(DA){const TY=CR();return TY?{rules:TY}:DA.secondRound?((0,hK.logWarn)("Detected dead-lock at details(), returning early to prevent it."),null):(zK||Hx||(zK=!0,pi(),XT().then((DA=>{zK=!1,qJ(),DA&&sq()})).catch((DA=>{(0,hK.logWarn)(DA),zK=!1,qJ()}))),null)}let xW=!1;function eo(DA,pi){const qJ=CR();function TY(DA){if(DA)for(let sq=DA.cssRules.length-1;sq>=0;sq--)DA.deleteRule(sq)}function jt(){yH||aT(),By&&By.stop(),Ma(),null==yH.sheet&&(yH.textContent="");const DA=undefined;return TY(yH.sheet),By?By.run():By=(0,TI.watchForNodePosition)(yH,"prev-sibling",(()=>{xW=!0,hK()})),yH.sheet}function hK(){const TY=xW;xW=!1,DM.modifySheet({prepareSheet:jt,sourceCSSRules:qJ,theme:DA,ignoreImageAnalysis:pi,force:TY,isAsyncCancelled:()=>gP}),Gx=0===yH.sheet.cssRules.length,DM.shouldRebuildStyle()&&(0,TI.addReadyStateCompleteListener)((()=>sq()))}qJ&&(gP=!1,hK())}function vD(){try{return null==DA.sheet?[null,null]:[DA.sheet.cssRules,null]}catch(DA){return[null,DA]}}function wT(DA){return DA&&DA.message&&DA.message.includes("loading")}function xw(){const[DA,sq]=vD();return sq?((0,hK.logWarn)(sq),null):DA}function zx(){Bo(),JR||oG&&DA.sheet||Xo()}let pk=null,mj=null;function Cp(){const DA=xw();return DA?DA.length:null}function Lc(){return Cp()!==pk}function Xo(){pk=Cp(),FZ();const pi=()=>{Lc()&&(pk=Cp(),sq()),oG&&DA.sheet?FZ():mj=requestAnimationFrame(pi)};pi()}function FZ(){cancelAnimationFrame(mj)}let aG=!1;function Qa(){function DA(){aG=!1,gP||sq()}oG=!0,FZ(),aG||(aG=!0,"function"==typeof queueMicrotask?queueMicrotask(DA):requestAnimationFrame(DA))}function Bo(){DA.addEventListener(`${KS.EVENT_PREFIX}updateSheet`,Qa)}function aU(){DA.removeEventListener(`${KS.EVENT_PREFIX}updateSheet`,Qa)}function ul(){aU(),FZ()}function zP(){pH.disconnect(),gP=!0,BD&&BD.stop(),By&&By.stop(),ul()}function fd(){if(zP(),(0,TI.removeNode)(TS),(0,TI.removeNode)(yH),qJ(),wo.has(bp)){const DA=wo.get(bp);wo.delete(bp),DA&&DA()}}function eL(){pH.observe(DA,Ts),DA instanceof HTMLStyleElement&&zx()}const he=10;let Wi=0;function NW(){yH&&(Wi++,Wi>he?(0,hK.logWarn)("Style sheet was moved multiple times",DA):((0,hK.logWarn)("Restore style",yH,DA),Ma(),BD&&BD.skip(),By&&By.skip(),Gx||(xW=!0,sq())))}return{details:E,render:eo,pause:zP,destroy:fd,watch:eL,restore:NW}}async function Jw(DA,sq){return new Promise(((pi,qJ)=>{const TY=()=>{DA.removeEventListener("load",jt),DA.removeEventListener("error",TI),wo.delete(sq)},jt=()=>{TY(),(0,hK.logInfo)(`Linkelement ${sq} has been loaded`),pi()},TI=()=>{TY(),qJ(`Linkelement ${sq} couldn't be loaded. ${DA.href}`)};wo.set(sq,(()=>{TY(),qJ()})),DA.addEventListener("load",jt),DA.addEventListener("error",TI),DA.href||TI()}))}function Gx(DA){return(0,AA.getCSSURLValue)(DA.substring(7).trim().replace(/;$/,"").replace(/screen$/,""))}async function JW(DA){return DA.startsWith("data:")?await(await fetch(DA)).text():await(0,Gq.bgFetch)({url:DA,responseType:"text",mimeType:"text/css",origin:window.location.origin})}async function Hi(DA,sq,pi=new Map){DA=(0,AA.removeCSSComments)(DA),DA=(0,AA.replaceCSSFontFace)(DA),DA=(0,AA.replaceCSSRelativeURLsWithAbsolute)(DA,sq);const qJ=(0,TY.getMatches)(AA.cssImportRegex,DA);for(const TY of qJ){const qJ=Gx(TY),TI=(0,jt.getAbsoluteURL)(sq,qJ);let Gq;if(pi.has(TI))Gq=pi.get(TI);else try{Gq=await JW(TI),pi.set(TI,Gq),Gq=await Hi(Gq,(0,AA.getCSSBaseBath)(TI),pi)}catch(DA){(0,hK.logWarn)(DA),Gq=""}DA=DA.split(TY).join(Gq)}return DA=DA.trim()}function ba(DA,sq){if(!sq)return null;const pi=document.createElement("style");return pi.classList.add(KS.STYLESHEET_COMMON_CLASSNAME),pi.classList.add(KS.STYLESHEET_CORS_SELECTOR.substring(1)),pi.media="screen",pi.textContent=sq,DA.parentNode.insertBefore(pi,DA.nextSibling),pi.sheet.disabled=!0,OC.add(pi),pi}pi.cleanLoadingLinks=By,pi.manageStyle=gP},{"../../const":2,"../../utils/array":31,"../../utils/platform":41,"../../utils/text":42,"../../utils/url":46,"../utils/dom":19,"../utils/log":20,"./css-rules":5,"./network":13,"./stylesheet-modifier":15}],15:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.createStyleSheetModifier=void 0;const qJ=DA("../../utils/throttle"),TY=DA("./css-rules"),jt=DA("./modify-css"),TI=DA("./variables"),hK=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function AA(DA){let sq="";return hK.forEach((pi=>{sq+=`${pi}:${DA[pi]};`})),sq}const Gq=(0,qJ.createAsyncTasksQueue)();function wd(){let DA=0;const sq=new Set,pi=new Map,qJ=new Set;let hK=null,wd=!1,AG=!1;function KS(){return wd&&!AG}function JR(KS){const JR=KS.sourceCSSRules,{theme:TS,ignoreImageAnalysis:yH,force:BD,prepareSheet:Am,isAsyncCancelled:OC}=KS;let oG=0===pi.size;const XC=new Set(pi.keys()),wo=AA(TS),By=wo!==hK;wd&&(AG=!0);const gP=[];if((0,TY.iterateCSSRules)(JR,(DA=>{let qJ=DA.cssText,hK=!1;if(XC.delete(qJ),DA.parentRule instanceof CSSMediaRule&&(qJ+=`;${DA.parentRule.media.mediaText}`),sq.has(qJ)||(sq.add(qJ),hK=!0),!hK)return void gP.push(pi.get(qJ));if(oG=!0,"revert"===DA.style.all)return;const AA=[];DA.style&&(0,TY.iterateCSSDeclarations)(DA.style,((sq,pi)=>{const qJ=(0,jt.getModifiableCSSDeclaration)(sq,pi,DA,TI.variablesStore,yH,OC);qJ&&AA.push(qJ)}));let Gq=null;if(AA.length>0){const sq=DA.parentRule;Gq={selector:DA.selectorText,declarations:AA,parentRule:sq},gP.push(Gq)}pi.set(qJ,Gq)}),(()=>{wd=!0})),XC.forEach((DA=>{sq.delete(DA),pi.delete(DA)})),hK=wo,!BD&&!oG&&!By)return;function Jw(DA,sq,pi){const{selector:qJ,declarations:TY}=pi,jt=DA=>{const{property:sq,value:pi,important:qJ,sourceValue:TY}=DA;return`${sq}: ${null==pi?TY:pi}${qJ?" !important":""};`};let TI="";TY.forEach((DA=>{TI+=`${jt(DA)} `}));const hK=`${qJ} { ${TI} }`;DA.insertRule(hK,sq)}DA++;const Gx=new Map,JW=new Map;let Hi=0,ba=0;const DM={rule:null,rules:[],isGroup:!0},pH=new WeakMap;function Ts(DA){if(null==DA)return DM;if(pH.has(DA))return pH.get(DA);const sq={rule:DA,rules:[],isGroup:!0};pH.set(DA,sq);const pi=undefined;return Ts(DA.parentRule).rules.push(sq),sq}qJ.forEach((DA=>DA())),qJ.clear(),gP.filter((DA=>DA)).forEach((({selector:sq,declarations:pi,parentRule:TY})=>{const jt=Ts(TY),TI={selector:sq,declarations:[],isGroup:!1},hK=TI.declarations;function AA(sq,pi,qJ,TY){const jt=++Hi,TI={property:sq,value:null,important:qJ,asyncKey:jt,sourceValue:TY};hK.push(TI);const AA=DA;pi.then((sq=>{sq&&!OC()&&AA===DA&&(TI.value=sq,Gq.add((()=>{OC()||AA!==DA||CR(jt)})))}))}function wd(sq,pi,TY,jt){const{declarations:TI,onTypeChange:Gq}=pi,wd=++ba,AG=DA,KS=hK.length;let JR=[];if(0===TI.length){const DA={property:sq,value:jt,important:TY,sourceValue:jt,varKey:wd};hK.push(DA),JR=[DA]}TI.forEach((DA=>{if(DA.value instanceof Promise)AA(DA.property,DA.value,TY,jt);else{const sq={property:DA.property,value:DA.value,important:TY,sourceValue:jt,varKey:wd};hK.push(sq),JR.push(sq)}})),Gq.addListener((sq=>{if(OC()||AG!==DA)return;const pi=sq.map((DA=>({property:DA.property,value:DA.value,important:TY,sourceValue:jt,varKey:wd}))),qJ=hK.indexOf(JR[0],KS);hK.splice(qJ,JR.length,...pi),JR=pi,Ma(wd)})),qJ.add((()=>Gq.removeListeners()))}jt.rules.push(TI),pi.forEach((({property:DA,value:sq,important:pi,sourceValue:qJ})=>{if("function"==typeof sq){const TY=sq(TS);TY instanceof Promise?AA(DA,TY,pi,qJ):DA.startsWith("--")?wd(DA,TY,pi,qJ):hK.push({property:DA,value:TY,important:pi,sourceValue:qJ})}else hK.push({property:DA,value:sq,important:pi,sourceValue:qJ})}))}));const dC=Am();function vl(){function DA(DA,sq){const{rule:pi}=DA;if(pi instanceof CSSMediaRule){const{media:DA}=pi,qJ=sq.cssRules.length;return sq.insertRule(`@media ${DA.mediaText} {}`,qJ),sq.cssRules[qJ]}return sq}function sq(pi,qJ,TY){pi.rules.forEach((pi=>{if(pi.isGroup){const jt=undefined;sq(pi,DA(pi,qJ),TY)}else TY(pi,qJ)}))}sq(DM,dC,((DA,sq)=>{const pi=sq.cssRules.length;DA.declarations.forEach((({asyncKey:qJ,varKey:TY})=>{null!=qJ&&Gx.set(qJ,{rule:DA,target:sq,index:pi}),null!=TY&&JW.set(TY,{rule:DA,target:sq,index:pi})})),Jw(sq,pi,DA)}))}function CR(DA){const{rule:sq,target:pi,index:qJ}=Gx.get(DA);pi.deleteRule(qJ),Jw(pi,qJ,sq),Gx.delete(DA)}function Ma(DA){const{rule:sq,target:pi,index:qJ}=JW.get(DA);pi.deleteRule(qJ),Jw(pi,qJ,sq)}vl()}return{modifySheet:JR,shouldRebuildStyle:KS}}pi.createStyleSheetModifier=wd},{"../../utils/throttle":43,"./css-rules":5,"./modify-css":11,"./variables":17}],16:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.injectProxy=void 0;const qJ=DA("../../const");function TY(DA){document.dispatchEvent(new CustomEvent(`${qJ.EVENT_PREFIX}inlineScriptsAllowed`));const sq=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),pi=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),TY=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),jt=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),TI=DA?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,hK=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),AA=hK?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,Gq="www.vy.no"===location.hostname,wd=Gq?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,AG=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",sq),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",pi),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",TY),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",jt),document.removeEventListener(`${qJ.EVENT_PREFIX}cleanUp`,AG),document.removeEventListener(`${qJ.EVENT_PREFIX}addUndefinedResolver`,KS),DA&&Object.defineProperty(Document.prototype,"styleSheets",TI),hK&&Object.defineProperty(Element.prototype,"getElementsByTagName",AA),Gq&&Object.defineProperty(Node.prototype,"childNodes",wd)},KS=DA=>{customElements.whenDefined(DA.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${qJ.EVENT_PREFIX}isDefined`,{detail:{tag:DA.detail.tag}}))}))};document.addEventListener(qJ.MSG_CLEANUP,AG),document.addEventListener(`${qJ.EVENT_PREFIX}addUndefinedResolver`,KS);const JR=new Event(`${qJ.EVENT_PREFIX}updateSheet`);function TS(DA,pi,TY){return sq.value.call(this,DA,pi,TY),this.ownerNode&&!this.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(JR),-1}function yH(DA,sq){const TY=pi.value.call(this,DA,sq);return this.ownerNode&&!this.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(JR),TY}function BD(DA){TY.value.call(this,DA),this.ownerNode&&!this.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(JR)}function Am(DA){jt.value.call(this,DA),this.ownerNode&&!this.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(JR)}function OC(){const DA=()=>{const DA=undefined,sq=[...TI.get.call(this)].filter((DA=>DA.ownerNode&&!DA.ownerNode.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME)));return sq.item=DA=>sq[DA],Object.setPrototypeOf(sq,StyleSheetList.prototype)};let sq=DA();const pi=undefined;return sq=new Proxy(sq,{get:function(sq,pi){return DA()[pi]}}),sq}function oG(DA){if("style"!==DA)return AA.value.call(this,DA);const sq=()=>{const sq=AA.value.call(this,DA);return Object.setPrototypeOf([...sq].filter((DA=>!DA.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let pi=sq();const TY=undefined;return pi=new Proxy(pi,{get:function(DA,pi){return sq()[Number(pi)||pi]}}),pi}function XC(){const DA=wd.get.call(this);return Object.setPrototypeOf([...DA].filter((DA=>!DA.classList||!DA.classList.contains(qJ.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},sq,{value:TS})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},pi,{value:yH})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},TY,{value:BD})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},jt,{value:Am})),DA&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},TI,{get:OC})),hK&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},AA,{value:oG})),Gq&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},wd,{get:XC}))}pi.injectProxy=TY},{"../../const":2}],17:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.replaceCSSVariablesNames=pi.variablesStore=pi.VariablesStore=void 0;const qJ=DA("../../generators/modify-colors"),TY=DA("../../utils/text"),jt=DA("./css-rules"),TI=DA("./modify-css"),hK=DA("../../utils/color"),AA=DA("../../const"),Gq=1<<0,wd=1<<1,AG=1<<2,KS=1<<3;class JR{constructor(){this.varTypes=new Map,this.rulesQueue=[],this.definedVars=new Set,this.varRefs=new Map,this.unknownColorVars=new Set,this.unknownBgVars=new Set,this.undefinedVars=new Set,this.initialVarTypes=new Map,this.changedTypeVars=new Set,this.typeChangeSubscriptions=new Map,this.unstableVarValues=new Map}clear(){this.varTypes.clear(),this.rulesQueue.splice(0),this.definedVars.clear(),this.varRefs.clear(),this.unknownColorVars.clear(),this.unknownBgVars.clear(),this.undefinedVars.clear(),this.initialVarTypes.clear(),this.changedTypeVars.clear(),this.typeChangeSubscriptions.clear(),this.unstableVarValues.clear()}isVarType(DA,sq){return this.varTypes.has(DA)&&(this.varTypes.get(DA)&sq)>0}addRulesForMatching(DA){this.rulesQueue.push(DA)}matchVariablesAndDependants(){this.changedTypeVars.clear(),this.initialVarTypes=new Map(this.varTypes),this.collectRootVariables(),this.collectVariablesAndVarDep(this.rulesQueue),this.rulesQueue.splice(0),this.collectRootVarDependants(),this.varRefs.forEach(((DA,sq)=>{DA.forEach((DA=>{this.varTypes.has(sq)&&this.resolveVariableType(DA,this.varTypes.get(sq))}))})),this.unknownColorVars.forEach((DA=>{this.unknownBgVars.has(DA)?(this.unknownColorVars.delete(DA),this.unknownBgVars.delete(DA),this.resolveVariableType(DA,Gq)):this.isVarType(DA,Gq|wd|AG)?this.unknownColorVars.delete(DA):this.undefinedVars.add(DA)})),this.unknownBgVars.forEach((DA=>{const sq=undefined;null!=this.findVarRef(DA,(DA=>this.unknownColorVars.has(DA)||this.isVarType(DA,wd|AG)))?this.itarateVarRefs(DA,(DA=>{this.resolveVariableType(DA,Gq)})):this.isVarType(DA,Gq|KS)?this.unknownBgVars.delete(DA):this.undefinedVars.add(DA)})),this.changedTypeVars.forEach((DA=>{this.typeChangeSubscriptions.has(DA)&&this.typeChangeSubscriptions.get(DA).forEach((DA=>{DA()}))})),this.changedTypeVars.clear()}getModifierForVariable(DA){return sq=>{const{varName:pi,sourceValue:qJ,rule:TY,ignoredImgSelectors:jt,isCancelled:hK}=DA,AA=()=>{const DA=[],AA=(TY,jt,TI)=>{if(!this.isVarType(pi,TY))return;const hK=jt(pi);let AA;if(Gx(qJ))if(JW(qJ)){let DA=CR(qJ,this.unstableVarValues);DA||(DA=TY===Gq?"#ffffff":"#000000"),AA=TI(DA,sq)}else AA=OC(qJ,(DA=>jt(DA)),(DA=>TI(DA,sq)));else AA=TI(qJ,sq);DA.push({property:hK,value:AA})};if(AA(Gq,XC,Ts),AA(wd,wo,dC),AA(AG,By,vl),this.isVarType(pi,KS)){const AA=gP(pi);let Gq=qJ;Gx(qJ)&&(Gq=OC(qJ,(DA=>XC(DA)),(DA=>Ts(DA,sq))));const wd=(0,TI.getBgImageModifier)(Gq,TY,jt,hK);Gq="function"==typeof wd?wd(sq):wd,DA.push({property:AA,value:Gq})}return DA},JR=new Set,TS=DA=>{const sq=()=>{const sq=AA();DA(sq)};JR.add(sq),this.subscribeForVarTypeChange(pi,sq)},yH=()=>{JR.forEach((DA=>{this.unsubscribeFromVariableTypeChanges(pi,DA)}))};return{declarations:AA(),onTypeChange:{addListener:TS,removeListeners:yH}}}}getModifierForVarDependant(DA,sq){if(sq.match(/^\s*(rgb|hsl)a?\(/)){const pi=DA.startsWith("background"),qJ=Hi(DA);return DA=>{let TY=CR(sq,this.unstableVarValues);TY||(TY=pi?"#ffffff":"#000000");const jt=undefined;return(pi?Ts:qJ?dC:vl)(TY,DA)}}return"background-color"===DA?DA=>OC(sq,(DA=>XC(DA)),(sq=>Ts(sq,DA))):Hi(DA)?DA=>OC(sq,(DA=>wo(DA)),(sq=>dC(sq,DA))):"background"===DA||"background-image"===DA||"box-shadow"===DA?pi=>{const qJ=new Set,TY=()=>{const TY=OC(sq,(DA=>this.isVarType(DA,Gq)?XC(DA):this.isVarType(DA,KS)?gP(DA):(qJ.add(DA),DA)),(DA=>Ts(DA,pi)));if("box-shadow"===DA){const DA=undefined,sq=(0,TI.getShadowModifierWithInfo)(TY)(pi);if(sq.unparseableMatchesLength!==sq.matchesLength)return sq.result}return TY},jt=TY();return qJ.size>0?new Promise((DA=>{const sq=qJ.values().next().value,pi=()=>{this.unsubscribeFromVariableTypeChanges(sq,pi);const qJ=TY();DA(qJ)};this.subscribeForVarTypeChange(sq,pi)})):jt}:DA.startsWith("border")||DA.startsWith("outline")?DA=>OC(sq,(DA=>By(DA)),(sq=>vl(sq,DA))):null}subscribeForVarTypeChange(DA,sq){this.typeChangeSubscriptions.has(DA)||this.typeChangeSubscriptions.set(DA,new Set);const pi=this.typeChangeSubscriptions.get(DA);pi.has(sq)||pi.add(sq)}unsubscribeFromVariableTypeChanges(DA,sq){this.typeChangeSubscriptions.has(DA)&&this.typeChangeSubscriptions.get(DA).delete(sq)}collectVariablesAndVarDep(DA){DA.forEach((DA=>{(0,jt.iterateCSSRules)(DA,(DA=>{DA.style&&(0,jt.iterateCSSDeclarations)(DA.style,((DA,sq)=>{Jw(DA)&&this.inspectVariable(DA,sq),Gx(sq)&&this.inspectVarDependant(DA,sq)}))}))}))}collectRootVariables(){(0,jt.iterateCSSDeclarations)(document.documentElement.style,((DA,sq)=>{Jw(DA)&&this.inspectVariable(DA,sq)}))}inspectVariable(DA,sq){if(this.unstableVarValues.set(DA,sq),Gx(sq)&&JW(sq)&&(this.unknownColorVars.add(DA),this.definedVars.add(DA)),this.definedVars.has(DA))return;this.definedVars.add(DA);const pi=undefined;ba.test(sq)||(0,hK.parseColorWithCache)(sq)?this.unknownColorVars.add(DA):(sq.includes("url(")||sq.includes("linear-gradient(")||sq.includes("radial-gradient("))&&this.resolveVariableType(DA,KS)}resolveVariableType(DA,sq){const pi=this.initialVarTypes.get(DA)||0,qJ=undefined,TY=(this.varTypes.get(DA)||0)|sq;this.varTypes.set(DA,TY),(TY!==pi||this.undefinedVars.has(DA))&&(this.changedTypeVars.add(DA),this.undefinedVars.delete(DA)),this.unknownColorVars.delete(DA),this.unknownBgVars.delete(DA)}collectRootVarDependants(){(0,jt.iterateCSSDeclarations)(document.documentElement.style,((DA,sq)=>{Gx(sq)&&this.inspectVarDependant(DA,sq)}))}inspectVarDependant(DA,sq){Jw(DA)?this.iterateVarDeps(sq,(sq=>{this.varRefs.has(DA)||this.varRefs.set(DA,new Set),this.varRefs.get(DA).add(sq)})):"background-color"===DA||"box-shadow"===DA?this.iterateVarDeps(sq,(DA=>this.resolveVariableType(DA,Gq))):Hi(DA)?this.iterateVarDeps(sq,(DA=>this.resolveVariableType(DA,wd))):DA.startsWith("border")||DA.startsWith("outline")?this.iterateVarDeps(sq,(DA=>this.resolveVariableType(DA,AG))):"background"!==DA&&"background-image"!==DA||this.iterateVarDeps(sq,(DA=>{if(this.isVarType(DA,Gq|KS))return;const sq=null!=this.findVarRef(DA,(DA=>this.unknownColorVars.has(DA)||this.isVarType(DA,wd|AG)));this.itarateVarRefs(DA,(DA=>{sq?this.resolveVariableType(DA,Gq):this.unknownBgVars.add(DA)}))}))}iterateVarDeps(DA,sq){const pi=new Set;oG(DA,(DA=>pi.add(DA))),pi.forEach((DA=>sq(DA)))}findVarRef(DA,sq,pi=new Set){if(pi.has(DA))return null;pi.add(DA);const qJ=undefined;if(sq(DA))return DA;const TY=this.varRefs.get(DA);if(!TY||0===TY.size)return null;for(const DA of TY){const qJ=this.findVarRef(DA,sq,pi);if(qJ)return qJ}return null}itarateVarRefs(DA,sq){this.findVarRef(DA,(DA=>(sq(DA),!1)))}setOnRootVariableChange(DA){this.onRootVariableDefined=DA}putRootVars(DA,sq){const pi=DA.sheet;pi.cssRules.length>0&&pi.deleteRule(0);const qJ=new Map;(0,jt.iterateCSSDeclarations)(document.documentElement.style,((DA,pi)=>{Jw(DA)&&(this.isVarType(DA,Gq)&&qJ.set(XC(DA),Ts(pi,sq)),this.isVarType(DA,wd)&&qJ.set(wo(DA),dC(pi,sq)),this.isVarType(DA,AG)&&qJ.set(By(DA),vl(pi,sq)),this.subscribeForVarTypeChange(DA,this.onRootVariableDefined))}));const TY=[];TY.push(":root {");for(const[DA,sq]of qJ)TY.push(`    ${DA}: ${sq};`);TY.push("}");const TI=TY.join("\n");pi.insertRule(TI)}}function TS(DA,sq=0){const pi=DA.indexOf("var(",sq);if(pi>=0){const sq=(0,TY.getParenthesesRange)(DA,pi+3);if(sq)return{start:pi,end:sq.end}}return null}function yH(DA){const sq=[];let pi=0,qJ;for(;qJ=TS(DA,pi);){const{start:TY,end:jt}=qJ;sq.push({start:TY,end:jt,value:DA.substring(TY,jt)}),pi=qJ.end+1}return sq}function BD(DA,sq){const pi=yH(DA),qJ=pi.length;if(0===qJ)return DA;const TY=DA.length,jt=pi.map((DA=>sq(DA.value))),TI=[];TI.push(DA.substring(0,pi[0].start));for(let sq=0;sq<qJ;sq++){TI.push(jt[sq]);const hK=pi[sq].end,AA=sq<qJ-1?pi[sq+1].start:TY;TI.push(DA.substring(hK,AA))}return TI.join("")}function Am(DA){const sq=DA.indexOf(",");let pi,qJ;return sq>=0?(pi=DA.substring(4,sq).trim(),qJ=DA.substring(sq+1,DA.length-1).trim()):(pi=DA.substring(4,DA.length-1).trim(),qJ=""),{name:pi,fallback:qJ}}function OC(DA,sq,pi){const qJ=undefined;return BD(DA,(DA=>{const{name:qJ,fallback:TY}=Am(DA),jt=sq(qJ);if(!TY)return`var(${jt})`;let TI;return TI=Gx(TY)?OC(TY,sq,pi):pi?pi(TY):TY,`var(${jt}, ${TI})`}))}function oG(DA,sq){OC(DA,(DA=>(sq(DA),DA)))}function XC(DA){return`--${AA.ROOT_VARS_PREFIX}-bg${DA}`}function wo(DA){return`--${AA.ROOT_VARS_PREFIX}-text${DA}`}function By(DA){return`--${AA.ROOT_VARS_PREFIX}-border${DA}`}function gP(DA){return`--${AA.ROOT_VARS_PREFIX}-bgimg${DA}`}function Jw(DA){return DA.startsWith("--")}function Gx(DA){return DA.includes("var(")}function JW(DA){return DA.match(/^\s*(rgb|hsl)a?\(/)}function Hi(DA){return"color"===DA||"caret-color"===DA||"-webkit-text-fill-color"===DA}pi.VariablesStore=JR,pi.variablesStore=new JR,pi.replaceCSSVariablesNames=OC;const ba=/^\d{1,3}, ?\d{1,3}, ?\d{1,3}$/;function DM(DA){if(ba.test(DA)){const sq=DA.split(",");let pi="rgb(";return sq.forEach((DA=>{pi+=`${DA.trim()}, `})),pi=pi.substring(0,pi.length-2),pi+=")",{isRaw:!0,color:pi}}return{isRaw:!1,color:DA}}function pH(DA,sq,pi){const{isRaw:qJ,color:TY}=DM(DA),jt=(0,hK.parseColorWithCache)(TY);if(jt){const DA=pi(jt,sq);if(qJ){const sq=(0,hK.parseColorWithCache)(DA);return sq?`${sq.r}, ${sq.g}, ${sq.b}`:DA}return DA}return TY}function Ts(DA,sq){return pH(DA,sq,qJ.modifyBackgroundColor)}function dC(DA,sq){return pH(DA,sq,qJ.modifyForegroundColor)}function vl(DA,sq){return pH(DA,sq,qJ.modifyBorderColor)}function CR(DA,sq,pi=new Set){let qJ=!1;const TY=undefined,jt=BD(DA,(DA=>{const{name:TY,fallback:jt}=Am(DA);if(pi.has(TY))return qJ=!0,null;pi.add(TY);const TI=sq.get(TY)||jt;let hK=null;return TI&&(hK=Gx(TI)?CR(TI,sq,pi):TI),hK||(qJ=!0,null)}));return qJ?null:jt}},{"../../const":2,"../../generators/modify-colors":23,"../../utils/color":34,"../../utils/text":42,"./css-rules":5,"./modify-css":11}],18:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.stopWatchingForStyleChanges=pi.watchForStyleChanges=void 0;const qJ=DA("../../utils/array"),TY=DA("../utils/dom"),jt=DA("./style-manager"),TI=DA("../../utils/platform"),hK=DA("../../const"),AA=[];let Gq;const wd=new Map;let AG;function KS(DA){TI.isDefinedSelectorSupported&&(0,qJ.forEach)(DA.querySelectorAll(":not(:defined)"),(DA=>{let sq=DA.tagName.toLowerCase();if(!sq.includes("-")){const pi=DA.getAttribute("is");if(!pi)return;sq=pi}wd.has(sq)||(wd.set(sq,new Set),BD(sq).then((()=>{if(AG){const DA=wd.get(sq);wd.delete(sq),AG(Array.from(DA))}}))),wd.get(sq).add(DA)}))}let JR=!1;document.addEventListener(`${hK.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{JR=!0}));const TS=new Map;function yH(DA){if(JR=!0,TS.has(DA.detail.tag)){const sq=undefined;TS.get(DA.detail.tag)()}}async function BD(DA){return new Promise((sq=>{if(window.customElements&&"function"==typeof customElements.whenDefined)customElements.whenDefined(DA).then((()=>sq()));else{const pi=()=>{const qJ=wd.get(DA);qJ&&qJ.size>0&&(qJ.values().next().value.matches(":defined")?sq():requestAnimationFrame(pi))};requestAnimationFrame(pi)}}))}function Am(DA){AG=DA}function OC(){AG=null,wd.clear(),document.removeEventListener(`${hK.EVENT_PREFIX}isDefined`,yH)}function oG(DA,sq,pi){wo();const TI=new Set(DA),wd=new WeakMap,AG=new WeakMap;function JR(DA){wd.set(DA,DA.previousElementSibling),AG.set(DA,DA.nextElementSibling)}function TS(DA){wd.delete(DA),AG.delete(DA)}function BD(DA){return DA.previousElementSibling!==wd.get(DA)||DA.nextElementSibling!==AG.get(DA)}function OC(DA){const{createdStyles:pi,removedStyles:qJ,movedStyles:TY}=DA;pi.forEach((DA=>JR(DA))),TY.forEach((DA=>JR(DA))),qJ.forEach((DA=>TS(DA))),pi.forEach((DA=>TI.add(DA))),qJ.forEach((DA=>TI.delete(DA))),pi.size+qJ.size+TY.size>0&&sq({created:Array.from(pi),removed:Array.from(qJ),moved:Array.from(TY),updated:[]})}function oG({additions:DA,moves:sq,deletions:pi}){const qJ=new Set,TI=new Set,hK=new Set;DA.forEach((DA=>(0,jt.getManageableStyles)(DA).forEach((DA=>qJ.add(DA))))),pi.forEach((DA=>(0,jt.getManageableStyles)(DA).forEach((DA=>TI.add(DA))))),sq.forEach((DA=>(0,jt.getManageableStyles)(DA).forEach((DA=>hK.add(DA))))),OC({createdStyles:qJ,removedStyles:TI,movedStyles:hK}),DA.forEach((DA=>{(0,TY.iterateShadowHosts)(DA,Jw),KS(DA)}))}function XC(DA){const sq=new Set((0,jt.getManageableStyles)(DA)),pi=new Set,qJ=new Set,hK=new Set;sq.forEach((DA=>{TI.has(DA)||pi.add(DA)})),TI.forEach((DA=>{sq.has(DA)||qJ.add(DA)})),sq.forEach((DA=>{pi.has(DA)||qJ.has(DA)||!BD(DA)||hK.add(DA)})),OC({createdStyles:pi,removedStyles:qJ,movedStyles:hK}),(0,TY.iterateShadowHosts)(DA,Jw),KS(DA)}function By(DA){const pi=new Set,qJ=new Set;DA.forEach((DA=>{const{target:sq}=DA;sq.isConnected&&((0,jt.shouldManageStyle)(sq)?pi.add(sq):sq instanceof HTMLLinkElement&&sq.disabled&&qJ.add(sq))})),pi.size+qJ.size>0&&sq({updated:Array.from(pi),created:[],removed:Array.from(qJ),moved:[]})}function gP(DA){const sq=(0,TY.createOptimizedTreeObserver)(DA,{onMinorMutations:oG,onHugeMutations:XC}),pi=new MutationObserver(By);pi.observe(DA,{attributes:!0,attributeFilter:["rel","disabled","media","href"],subtree:!0}),AA.push(sq,pi),Gq.add(DA)}function Jw(DA){const{shadowRoot:sq}=DA;null==sq||Gq.has(sq)||(gP(sq),pi(sq))}DA.forEach(JR),gP(document),(0,TY.iterateShadowHosts)(document.documentElement,Jw),Am((DA=>{const pi=[];DA.forEach((DA=>(0,qJ.push)(pi,(0,jt.getManageableStyles)(DA.shadowRoot)))),sq({created:pi,updated:[],removed:[],moved:[]}),DA.forEach((DA=>{const{shadowRoot:sq}=DA;null!=sq&&(Jw(DA),(0,TY.iterateShadowHosts)(sq,Jw),KS(sq))}))})),document.addEventListener(`${hK.EVENT_PREFIX}isDefined`,yH),KS(document)}function XC(){AA.forEach((DA=>DA.disconnect())),AA.splice(0,AA.length),Gq=new WeakSet}function wo(){XC(),OC()}pi.watchForStyleChanges=oG,pi.stopWatchingForStyleChanges=wo},{"../../const":2,"../../utils/array":31,"../../utils/platform":41,"../utils/dom":19,"./style-manager":14}],19:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.createOptimizedTreeObserver=pi.cleanReadyStateCompleteListeners=pi.addReadyStateCompleteListener=pi.isReadyStateComplete=pi.removeDOMReadyListener=pi.addDOMReadyListener=pi.setIsDOMReady=pi.isDOMReady=pi.iterateShadowHosts=pi.watchForNodePosition=pi.removeNode=pi.createNodeAsap=void 0;const qJ=DA("../utils/log"),TY=DA("../../utils/throttle"),jt=DA("../../utils/array"),TI=DA("../../utils/time");function hK({selectNode:DA,createNode:sq,updateNode:pi,selectTarget:qJ,createTarget:TY,isTargetMutation:jt}){const TI=qJ();if(TI){const qJ=DA();qJ?pi(qJ):sq(TI)}else{const pi=new MutationObserver((pi=>{const TY=undefined;if(pi.find(jt)){hK();const pi=qJ();DA()||sq(pi)}})),TI=()=>{if("complete"!==document.readyState)return;hK();const pi=qJ()||TY();DA()||sq(pi)},hK=()=>{document.removeEventListener("readystatechange",TI),pi.disconnect()};"complete"===document.readyState?TI():(document.addEventListener("readystatechange",TI),pi.observe(document,{childList:!0,subtree:!0}))}}function AA(DA){DA&&DA.parentNode&&DA.parentNode.removeChild(DA)}function Gq(DA,sq,pi=Function.prototype){const jt=10,hK=(0,TI.getDuration)({seconds:2}),AA=(0,TI.getDuration)({seconds:10}),Gq=DA.previousSibling;let wd=DA.parentNode;if(!wd)throw new Error("Unable to watch for node position: parent element not found");if("prev-sibling"===sq&&!Gq)throw new Error("Unable to watch for node position: there is no previous sibling");let AG=0,KS=null,JR=null;const TS=(0,TY.throttle)((()=>{if(JR)return;AG++;const TY=Date.now();if(null==KS)KS=TY;else if(AG>=jt){if(TY-KS<AA)return(0,qJ.logWarn)(`Node position watcher paused: retry in ${hK}ms`,DA,Gq),void(JR=setTimeout((()=>{KS=null,AG=0,JR=null,TS()}),hK));KS=TY,AG=1}if("head"===sq&&Gq&&Gq.parentNode!==wd)return(0,qJ.logWarn)("Unable to restore node position: sibling parent changed",DA,Gq,wd),void Am();if("prev-sibling"===sq){if(null==Gq.parentNode)return(0,qJ.logWarn)("Unable to restore node position: sibling was removed",DA,Gq,wd),void Am();Gq.parentNode!==wd&&((0,qJ.logWarn)("Style was moved to another parent",DA,Gq,wd),oG(Gq.parentNode))}"head"!==sq||wd.isConnected||(wd=document.head),(0,qJ.logWarn)("Restoring node position",DA,Gq,wd),wd.insertBefore(DA,Gq&&Gq.isConnected?Gq.nextSibling:wd.firstChild),yH.takeRecords(),pi&&pi()})),yH=new MutationObserver((()=>{("head"===sq&&(DA.parentNode!==wd||!DA.parentNode.isConnected)||"prev-sibling"===sq&&DA.previousSibling!==Gq)&&TS()})),BD=()=>{yH.observe(wd,{childList:!0})},Am=()=>{clearTimeout(JR),yH.disconnect(),TS.cancel()},OC=()=>{yH.takeRecords()},oG=DA=>{wd=DA,Am(),BD()};return BD(),{run:BD,stop:Am,skip:OC}}function wd(DA,sq){if(null==DA)return;const pi=document.createTreeWalker(DA,NodeFilter.SHOW_ELEMENT,{acceptNode:DA=>null==DA.shadowRoot?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT});for(let qJ=DA.shadowRoot?pi.currentNode:pi.nextNode();null!=qJ;qJ=pi.nextNode())qJ.classList.contains("surfingkeys_hints_host")||(sq(qJ),wd(qJ.shadowRoot,sq))}pi.createNodeAsap=hK,pi.removeNode=AA,pi.watchForNodePosition=Gq,pi.iterateShadowHosts=wd;let AG=()=>"complete"===document.readyState||"interactive"===document.readyState;function KS(DA){pi.isDOMReady=DA}pi.isDOMReady=AG,pi.setIsDOMReady=KS;const JR=new Set;function TS(DA){(0,pi.isDOMReady)()?DA():JR.add(DA)}function yH(DA){JR.delete(DA)}function BD(){return"complete"===document.readyState}pi.addDOMReadyListener=TS,pi.removeDOMReadyListener=yH,pi.isReadyStateComplete=BD;const Am=new Set;function OC(DA){BD()?DA():Am.add(DA)}function oG(){Am.clear()}if(pi.addReadyStateCompleteListener=OC,pi.cleanReadyStateCompleteListeners=oG,!(0,pi.isDOMReady)()){const DA=()=>{(0,pi.isDOMReady)()&&(JR.forEach((DA=>DA())),JR.clear(),BD()&&(document.removeEventListener("readystatechange",DA),Am.forEach((DA=>DA())),Am.clear()))};document.addEventListener("readystatechange",DA)}const XC=1e3;function wo(DA){if(DA.length>XC)return!0;let sq=0;for(let pi=0;pi<DA.length;pi++)if(sq+=DA[pi].addedNodes.length,sq>XC)return!0;return!1}function By(DA){const sq=new Set,pi=new Set,qJ=new Set;DA.forEach((DA=>{(0,jt.forEach)(DA.addedNodes,(DA=>{DA instanceof Element&&DA.isConnected&&sq.add(DA)})),(0,jt.forEach)(DA.removedNodes,(DA=>{DA instanceof Element&&(DA.isConnected?(qJ.add(DA),sq.delete(DA)):pi.add(DA))}))}));const TY=[],TI=[];return sq.forEach((DA=>{sq.has(DA.parentElement)&&TY.push(DA)})),pi.forEach((DA=>{pi.has(DA.parentElement)&&TI.push(DA)})),TY.forEach((DA=>sq.delete(DA))),TI.forEach((DA=>pi.delete(DA))),{additions:sq,moves:qJ,deletions:pi}}const gP=new Map,Jw=new WeakMap;function Gx(DA,sq){let qJ,TY,jt;if(gP.has(DA))qJ=gP.get(DA),TY=Jw.get(qJ);else{let sq=!1,TI=!1;qJ=new MutationObserver((qJ=>{if(wo(qJ))!sq||(0,pi.isDOMReady)()?TY.forEach((({onHugeMutations:sq})=>sq(DA))):TI||(jt=()=>TY.forEach((({onHugeMutations:sq})=>sq(DA))),TS(jt),TI=!0),sq=!0;else{const DA=By(qJ);TY.forEach((({onMinorMutations:sq})=>sq(DA)))}})),qJ.observe(DA,{childList:!0,subtree:!0}),gP.set(DA,qJ),TY=new Set,Jw.set(qJ,TY)}return TY.add(sq),{disconnect(){TY.delete(sq),jt&&yH(jt),0===TY.size&&(qJ.disconnect(),Jw.delete(qJ),gP.delete(DA))}}}pi.createOptimizedTreeObserver=Gx},{"../../utils/array":31,"../../utils/throttle":43,"../../utils/time":44,"../utils/log":20}],20:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.logInfoCollapsed=pi.logWarn=pi.logInfo=void 0;const qJ=DA("../../utils/message"),TY=!0,jt=!1,TI="info";function hK(DA,...sq){jt&&TI&&("info"===TI||"warn"===DA)&&chrome.runtime.sendMessage({type:qJ.MessageType.CS_LOG,data:{level:DA,log:sq}})}function AA(...DA){TY&&hK("info",...DA)}function Gq(...DA){TY&&hK("warn",...DA)}function wd(DA,...sq){}pi.logInfo=AA,pi.logWarn=Gq,pi.logInfoCollapsed=wd},{"../../utils/message":38}],21:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.DEFAULT_SETTINGS=pi.DEFAULT_COLORSCHEME=pi.DEFAULT_THEME=pi.DEFAULT_COLORS=void 0;const qJ=DA("./generators/theme-engines"),TY=DA("./utils/platform"),jt=DA("./utils/automation");pi.DEFAULT_COLORS={darkScheme:{background:"#181a1b",text:"#e8e6e3"},lightScheme:{background:"#181a1b",text:"#e8e6e3"}},pi.DEFAULT_THEME={mode:1,brightness:100,contrast:110,grayscale:0,sepia:0,useFont:!1,fontFamily:TY.isMacOS?"Helvetica Neue":TY.isWindows?"Segoe UI":"Open Sans",textStroke:0,engine:qJ.ThemeEngine.dynamicTheme,stylesheet:"",darkSchemeBackgroundColor:pi.DEFAULT_COLORS.darkScheme.background,darkSchemeTextColor:pi.DEFAULT_COLORS.darkScheme.text,lightSchemeBackgroundColor:pi.DEFAULT_COLORS.lightScheme.background,lightSchemeTextColor:pi.DEFAULT_COLORS.lightScheme.text,scrollbarColor:TY.isMacOS?"":"auto",selectionColor:"auto",styleSystemControls:!1,lightColorScheme:"Default",darkColorScheme:"Default",immediateModify:!1},pi.DEFAULT_COLORSCHEME={light:{Default:{backgroundColor:pi.DEFAULT_COLORS.lightScheme.background,textColor:pi.DEFAULT_COLORS.lightScheme.text}},dark:{Default:{backgroundColor:pi.DEFAULT_COLORS.darkScheme.background,textColor:pi.DEFAULT_COLORS.darkScheme.text}}},pi.DEFAULT_SETTINGS={enabled:!0,fetchNews:!0,theme:pi.DEFAULT_THEME,presets:[],customThemes:[],siteList:[],siteListEnabled:[],applyToListedOnly:!1,changeBrowserTheme:!1,syncSettings:!0,syncSitesFixes:!1,automation:{enabled:!1,mode:jt.AutomationMode.NONE,behavior:"OnOff"},time:{activation:"18:00",deactivation:"9:00"},location:{latitude:null,longitude:null},previewNewDesign:!1,enableForPDF:!0,enableForProtectedPages:!1,enableContextMenus:!1,detectDarkTheme:!1}},{"./generators/theme-engines":26,"./utils/automation":33,"./utils/platform":41}],22:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.formatInversionFixes=pi.parseInversionFixes=pi.getInversionFixesFor=pi.getCSSFilterValue=pi.cssFilterStyleSheetTemplate=pi.hasFirefoxNewRootBehavior=pi.hasPatchForChromiumIssue501582=pi.FilterMode=void 0;const qJ=DA("./utils/format"),TY=DA("./utils/matrix"),jt=DA("./utils/parse"),TI=DA("../utils/text"),hK=DA("../utils/url"),AA=DA("./text-style"),Gq=DA("../utils/platform");var wd;function AG(){return!0}function KS(){return Boolean(Gq.isFirefox&&(0,Gq.compareChromeVersions)(Gq.firefoxVersion,"102.0")>=0)}function JR(DA,sq,pi,qJ,TY){const jt=undefined,TI=undefined;return TS(yH(DA),"invert(100%) hue-rotate(180deg)",DA,sq,pi,qJ,TY)}function TS(DA,sq,pi,qJ,jt,TI,hK){const Gq=oG(qJ,TI,hK),JR=[];if(JR.push("@media screen {"),DA&&jt&&(JR.push(""),JR.push("/* Leading rule */"),JR.push(BD(DA))),pi.mode===wd.dark&&(JR.push(""),JR.push("/* Reverse rule */"),JR.push(OC(sq,Gq))),(pi.useFont||pi.textStroke>0)&&(JR.push(""),JR.push("/* Font */"),JR.push((0,AA.createTextStyle)(pi))),JR.push(""),JR.push("/* Text contrast */"),JR.push("html {"),JR.push("  text-shadow: 0 0 0 !important;"),JR.push("}"),JR.push(""),JR.push("/* Full screen */"),[":-webkit-full-screen",":-moz-full-screen",":fullscreen"].forEach((DA=>{JR.push(`${DA}, ${DA} * {`),JR.push("  -webkit-filter: none !important;"),JR.push("  filter: none !important;"),JR.push("}")})),jt){const DA=[255,255,255],sq=AG()||KS()||pi.mode!==wd.dark?DA:(0,TY.applyColorMatrix)(DA,(0,TY.createFilterMatrix)(pi)).map(Math.round);JR.push(""),JR.push("/* Page background */"),JR.push("html {"),JR.push(`  background: rgb(${sq.join(",")}) !important;`),JR.push("}")}return Gq.css&&Gq.css.length>0&&pi.mode===wd.dark&&(JR.push(""),JR.push("/* Custom rules */"),JR.push(Gq.css)),JR.push(""),JR.push("}"),JR.join("\n")}function yH(DA){const sq=[];return DA.mode===wd.dark&&sq.push("invert(100%) hue-rotate(180deg)"),100!==DA.brightness&&sq.push(`brightness(${DA.brightness}%)`),100!==DA.contrast&&sq.push(`contrast(${DA.contrast}%)`),0!==DA.grayscale&&sq.push(`grayscale(${DA.grayscale}%)`),0!==DA.sepia&&sq.push(`sepia(${DA.sepia}%)`),0===sq.length?null:sq.join(" ")}function BD(DA){return["html {",`  -webkit-filter: ${DA} !important;`,`  filter: ${DA} !important;`,"}"].join("\n")}function Am(DA){return DA.map((DA=>DA.replace(/\,$/,""))).join(",\n")}function OC(DA,sq){const pi=[];return sq.invert.length>0&&(pi.push(`${Am(sq.invert)} {`),pi.push(`  -webkit-filter: ${DA} !important;`),pi.push(`  filter: ${DA} !important;`),pi.push("}")),sq.noinvert.length>0&&(pi.push(`${Am(sq.noinvert)} {`),pi.push("  -webkit-filter: none !important;"),pi.push("  filter: none !important;"),pi.push("}")),sq.removebg.length>0&&(pi.push(`${Am(sq.removebg)} {`),pi.push("  background: white !important;"),pi.push("}")),pi.join("\n")}function oG(DA,sq,pi){const qJ=(0,jt.getSitesFixesFor)(DA,sq,pi,{commands:Object.keys(XC),getCommandPropName:DA=>XC[DA],parseCommandValue:(DA,sq)=>"CSS"===DA?sq.trim():(0,TI.parseArray)(sq)}),TY={url:qJ[0].url,invert:qJ[0].invert||[],noinvert:qJ[0].noinvert||[],removebg:qJ[0].removebg||[],css:qJ[0].css||""};if(DA){const sq=qJ.slice(1).filter((sq=>(0,hK.isURLInList)(DA,sq.url))).sort(((DA,sq)=>sq.url[0].length-DA.url[0].length));if(sq.length>0){const DA=sq[0];return{url:DA.url,invert:TY.invert.concat(DA.invert||[]),noinvert:TY.noinvert.concat(DA.noinvert||[]),removebg:TY.removebg.concat(DA.removebg||[]),css:[TY.css,DA.css].filter((DA=>DA)).join("\n")}}}return TY}!function(DA){DA[DA["light"]=0]="light",DA[DA["dark"]=1]="dark"}(wd=pi.FilterMode||(pi.FilterMode={})),pi.hasPatchForChromiumIssue501582=AG,pi.hasFirefoxNewRootBehavior=KS,pi.default=JR,pi.cssFilterStyleSheetTemplate=TS,pi.getCSSFilterValue=yH,pi.getInversionFixesFor=oG;const XC={INVERT:"invert","NO INVERT":"noinvert","REMOVE BG":"removebg",CSS:"css"};function wo(DA){return(0,jt.parseSitesFixesConfig)(DA,{commands:Object.keys(XC),getCommandPropName:DA=>XC[DA],parseCommandValue:(DA,sq)=>"CSS"===DA?sq.trim():(0,TI.parseArray)(sq)})}function By(DA){const sq=DA.slice().sort(((DA,sq)=>(0,hK.compareURLPatterns)(DA.url[0],sq.url[0])));return(0,qJ.formatSitesFixesConfig)(sq,{props:Object.values(XC),getPropCommandName:DA=>Object.entries(XC).find((([,sq])=>sq===DA))[0],formatPropValue:(DA,sq)=>"css"===DA?sq.trim().replace(/\n+/g,"\n"):(0,TI.formatArray)(sq).trim(),shouldIgnoreProp:(DA,sq)=>"css"===DA?!sq:!(Array.isArray(sq)&&sq.length>0)})}pi.parseInversionFixes=wo,pi.formatInversionFixes=By},{"../utils/platform":41,"../utils/text":42,"../utils/url":46,"./text-style":25,"./utils/format":27,"./utils/matrix":28,"./utils/parse":29}],23:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.modifyGradientColor=pi.modifyShadowColor=pi.modifyBorderColor=pi.modifyForegroundColor=pi.modifyBackgroundColor=pi.modifyColor=pi.clearColorModificationCache=void 0;const qJ=DA("../utils/color"),TY=DA("../utils/math"),jt=DA("./utils/matrix");function TI(DA){const sq=undefined,pi=undefined;return DA[1===DA.mode?"darkSchemeBackgroundColor":"lightSchemeBackgroundColor"]}function hK(DA){const sq=undefined,pi=undefined;return DA[1===DA.mode?"darkSchemeTextColor":"lightSchemeTextColor"]}const AA=new Map;function Gq(){AA.clear()}pi.clearColorModificationCache=Gq;const wd=["r","g","b","a"],AG=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function KS(DA,sq){let pi="";return wd.forEach((sq=>{pi+=`${DA[sq]};`})),AG.forEach((DA=>{pi+=`${sq[DA]};`})),pi}function JR(DA,sq,pi,TY,TI){let hK;AA.has(pi)?hK=AA.get(pi):(hK=new Map,AA.set(pi,hK));const Gq=KS(DA,sq);if(hK.has(Gq))return hK.get(Gq);const wd=undefined,AG=undefined,JR=undefined,TS=pi((0,qJ.rgbToHSL)(DA),null==TY?null:(0,qJ.parseToHSLWithCache)(TY),null==TI?null:(0,qJ.parseToHSLWithCache)(TI)),{r:yH,g:BD,b:Am,a:OC}=(0,qJ.hslToRGB)(TS),oG=(0,jt.createFilterMatrix)(sq),[XC,wo,By]=(0,jt.applyColorMatrix)([yH,BD,Am],oG),gP=1===OC?(0,qJ.rgbToHexString)({r:XC,g:wo,b:By}):(0,qJ.rgbToString)({r:XC,g:wo,b:By,a:OC});return hK.set(Gq,gP),gP}function TS(DA){return DA}function yH(DA,sq){return JR(DA,sq,TS)}function BD(DA,sq){const pi=TI(sq),qJ=undefined;return JR(DA,sq,Am,hK(sq),pi)}function Am({h:DA,s:sq,l:pi,a:qJ},jt,TI){const hK=pi<.5;let AA;if(hK)AA=pi<.2||sq<.12;else{const qJ=undefined;AA=sq<.24||pi>.8&&(DA>200&&DA<280)}let Gq=DA,wd=pi;AA&&(hK?(Gq=jt.h,wd=jt.s):(Gq=TI.h,wd=TI.s));const AG=undefined;return{h:Gq,s:wd,l:(0,TY.scale)(pi,0,1,jt.l,TI.l),a:qJ}}pi.modifyColor=yH;const OC=.4;function oG({h:DA,s:sq,l:pi,a:qJ},jt){const TI=undefined,hK=undefined,AA=sq<.12||pi>.8&&(DA>200&&DA<280);if(pi<.5){const TI=(0,TY.scale)(pi,0,.5,0,OC);if(AA){const DA=undefined,sq=undefined;return{h:jt.h,s:jt.s,l:TI,a:qJ}}return{h:DA,s:sq,l:TI,a:qJ}}let Gq=(0,TY.scale)(pi,.5,1,OC,jt.l);if(AA){const DA=undefined,sq=undefined;return{h:jt.h,s:jt.s,l:Gq,a:qJ}}let wd=DA;const AG=undefined;if(DA>60&&DA<180){const sq=undefined;wd=DA>120?(0,TY.scale)(DA,120,180,135,180):(0,TY.scale)(DA,60,120,60,105)}return wd>40&&wd<80&&(Gq*=.75),{h:wd,s:sq,l:Gq,a:qJ}}function XC(DA,sq){if(0===sq.mode)return BD(DA,sq);const pi=TI(sq);return JR(DA,Object.assign(Object.assign({},sq),{mode:0}),oG,pi)}pi.modifyBackgroundColor=XC;const wo=.55;function By(DA){return(0,TY.scale)(DA,205,245,205,220)}function gP({h:DA,s:sq,l:pi,a:qJ},jt){const TI=undefined,hK=pi<.2||sq<.24,AA=!hK&&DA>205&&DA<245;if(pi>.5){const TI=(0,TY.scale)(pi,.5,1,wo,jt.l);if(hK){const DA=undefined,sq=undefined;return{h:jt.h,s:jt.s,l:TI,a:qJ}}let Gq=DA;return AA&&(Gq=By(DA)),{h:Gq,s:sq,l:TI,a:qJ}}if(hK){const DA=undefined,sq=undefined,TI=undefined;return{h:jt.h,s:jt.s,l:(0,TY.scale)(pi,0,.5,jt.l,wo),a:qJ}}let Gq=DA,wd;return AA?(Gq=By(DA),wd=(0,TY.scale)(pi,0,.5,jt.l,Math.min(1,wo+.05))):wd=(0,TY.scale)(pi,0,.5,jt.l,wo),{h:Gq,s:sq,l:wd,a:qJ}}function Jw(DA,sq){if(0===sq.mode)return BD(DA,sq);const pi=hK(sq);return JR(DA,Object.assign(Object.assign({},sq),{mode:0}),gP,pi)}function Gx({h:DA,s:sq,l:pi,a:qJ},jt,TI){const hK=undefined,AA=undefined;let Gq=DA,wd=sq;(pi<.2||sq<.24)&&(pi<.5?(Gq=jt.h,wd=jt.s):(Gq=TI.h,wd=TI.s));const AG=undefined;return{h:Gq,s:wd,l:(0,TY.scale)(pi,0,1,.5,.2),a:qJ}}function JW(DA,sq){if(0===sq.mode)return BD(DA,sq);const pi=hK(sq),qJ=TI(sq);return JR(DA,Object.assign(Object.assign({},sq),{mode:0}),Gx,pi,qJ)}function Hi(DA,sq){return XC(DA,sq)}function ba(DA,sq){return XC(DA,sq)}pi.modifyForegroundColor=Jw,pi.modifyBorderColor=JW,pi.modifyShadowColor=Hi,pi.modifyGradientColor=ba},{"../utils/color":34,"../utils/math":37,"./utils/matrix":28}],24:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.getSVGReverseFilterMatrixValue=pi.getSVGFilterMatrixValue=pi.createSVGFilterStylesheet=void 0;const qJ=DA("./utils/matrix"),TY=DA("./css-filter"),jt=DA("../utils/platform"),TI=DA("../const");function hK(DA,sq,pi,qJ,hK){let Gq,KS;return jt.isFirefox?(Gq=AA(wd(DA)),KS=AA(AG())):(Gq=`url(#${TI.MISC_PREFIX}-filter)`,KS=`url(#${TI.MISC_PREFIX}-reverse-filter)`),(0,TY.cssFilterStyleSheetTemplate)(Gq,KS,DA,sq,pi,qJ,hK)}function AA(DA){const sq=`${TI.MISC_PREFIX}-filter`,pi=['<svg xmlns="http://www.w3.org/2000/svg">',`<filter id="${sq}" style="color-interpolation-filters: sRGB;">`,`<feColorMatrix type="matrix" values="${DA}" />`,"</filter>","</svg>"].join("");return`url(data:image/svg+xml;base64,${btoa(pi)}#${sq})`}function Gq(DA){return DA.slice(0,4).map((DA=>DA.map((DA=>DA.toFixed(3))).join(" "))).join(" ")}function wd(DA){return Gq((0,qJ.createFilterMatrix)(DA))}function AG(){return Gq(qJ.Matrix.invertNHue())}pi.createSVGFilterStylesheet=hK,pi.getSVGFilterMatrixValue=wd,pi.getSVGReverseFilterMatrixValue=AG},{"../const":2,"../utils/platform":41,"./css-filter":22,"./utils/matrix":28}],25:[function(DA,sq,pi){"use strict";function qJ(DA){const sq=[];return sq.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*="vjs-"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*="mu-"], .glyphicon, .icon) {'),DA.useFont&&DA.fontFamily&&sq.push(`  font-family: ${DA.fontFamily} !important;`),DA.textStroke>0&&(sq.push(`  -webkit-text-stroke: ${DA.textStroke}px !important;`),sq.push(`  text-stroke: ${DA.textStroke}px !important;`)),sq.push("}"),sq.join("\n")}Object.defineProperty(pi,"__esModule",{value:!0}),pi.createTextStyle=void 0,pi.createTextStyle=qJ},{}],26:[function(DA,sq,pi){"use strict";var qJ;Object.defineProperty(pi,"__esModule",{value:!0}),pi.ThemeEngine=void 0,function(DA){DA["cssFilter"]="cssFilter",DA["svgFilter"]="svgFilter",DA["staticTheme"]="staticTheme",DA["dynamicTheme"]="dynamicTheme"}(qJ=pi.ThemeEngine||(pi.ThemeEngine={}))},{}],27:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.formatSitesFixesConfig=void 0;const qJ=DA("../../utils/array");function TY(DA,sq){const pi=[];return DA.forEach(((TY,jt)=>{(0,qJ.push)(pi,TY.url),sq.props.forEach((DA=>{const qJ=sq.getPropCommandName(DA),jt=TY[DA];if(sq.shouldIgnoreProp(DA,jt))return;pi.push(""),pi.push(qJ);const TI=sq.formatPropValue(DA,jt);TI&&pi.push(TI)})),jt<DA.length-1&&(pi.push(""),pi.push("=".repeat(32)),pi.push(""))})),pi.push(""),pi.join("\n")}pi.formatSitesFixesConfig=TY},{"../../utils/array":31}],28:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.Matrix=pi.applyColorMatrix=pi.createFilterMatrix=void 0;const qJ=DA("../../utils/math");function TY(DA){let sq=pi.Matrix.identity();return 0!==DA.sepia&&(sq=(0,qJ.multiplyMatrices)(sq,pi.Matrix.sepia(DA.sepia/100))),0!==DA.grayscale&&(sq=(0,qJ.multiplyMatrices)(sq,pi.Matrix.grayscale(DA.grayscale/100))),100!==DA.contrast&&(sq=(0,qJ.multiplyMatrices)(sq,pi.Matrix.contrast(DA.contrast/100))),100!==DA.brightness&&(sq=(0,qJ.multiplyMatrices)(sq,pi.Matrix.brightness(DA.brightness/100))),1===DA.mode&&(sq=(0,qJ.multiplyMatrices)(sq,pi.Matrix.invertNHue())),sq}function jt([DA,sq,pi],TY){const jt=[[DA/255],[sq/255],[pi/255],[1],[1]],TI=(0,qJ.multiplyMatrices)(TY,jt);return[0,1,2].map((DA=>(0,qJ.clamp)(Math.round(255*TI[DA][0]),0,255)))}pi.createFilterMatrix=TY,pi.applyColorMatrix=jt,pi.Matrix={identity:()=>[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],invertNHue:()=>[[.333,-.667,-.667,0,1],[-.667,.333,-.667,0,1],[-.667,-.667,.333,0,1],[0,0,0,1,0],[0,0,0,0,1]],brightness:DA=>[[DA,0,0,0,0],[0,DA,0,0,0],[0,0,DA,0,0],[0,0,0,1,0],[0,0,0,0,1]],contrast(DA){const sq=(1-DA)/2;return[[DA,0,0,0,sq],[0,DA,0,0,sq],[0,0,DA,0,sq],[0,0,0,1,0],[0,0,0,0,1]]},sepia:DA=>[[.393+.607*(1-DA),.769-.769*(1-DA),.189-.189*(1-DA),0,0],[.349-.349*(1-DA),.686+.314*(1-DA),.168-.168*(1-DA),0,0],[.272-.272*(1-DA),.534-.534*(1-DA),.131+.869*(1-DA),0,0],[0,0,0,1,0],[0,0,0,0,1]],grayscale:DA=>[[.2126+.7874*(1-DA),.7152-.7152*(1-DA),.0722-.0722*(1-DA),0,0],[.2126-.2126*(1-DA),.7152+.2848*(1-DA),.0722-.0722*(1-DA),0,0],[.2126-.2126*(1-DA),.7152-.7152*(1-DA),.0722+.9278*(1-DA),0,0],[0,0,0,1,0],[0,0,0,0,1]]}},{"../../utils/math":37}],29:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.isURLInSiteList=pi.indexSiteListConfig=pi.getSitesFixesFor=pi.indexSitesFixesConfig=pi.getDomain=pi.parseSitesFixesConfig=void 0;const qJ=DA("../../utils/url"),TY=DA("../../utils/text"),jt=6e4;function TI(DA,sq){const pi=[],qJ=undefined;return DA.replace(/\r/g,"").split(/^\s*={2,}\s*$/gm).forEach((DA=>{const qJ=DA.split("\n"),jt=[];if(qJ.forEach(((DA,sq)=>{DA.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&jt.push(sq)})),0===jt.length)return;const TI={url:(0,TY.parseArray)(qJ.slice(0,jt[0]).join("\n"))};jt.forEach(((DA,pi)=>{const TY=qJ[DA].trim(),hK=qJ.slice(DA+1,pi===jt.length-1?qJ.length:jt[pi+1]).join("\n"),AA=sq.getCommandPropName(TY);if(!AA)return;const Gq=sq.parseCommandValue(TY,hK);TI[AA]=Gq})),pi.push(TI)})),pi}function hK(DA){try{return new URL(DA).hostname.toLowerCase()}catch(sq){return DA.split("/")[0].toLowerCase()}}function AA(DA){return DA.map((([DA,sq])=>{const pi=DA.toString(36),qJ=sq.toString(36);return"0".repeat(4-pi.length)+pi+"0".repeat(3-qJ.length)+qJ})).join("")}function Gq(DA,sq){const pi=(4+3)*sq,qJ=parseInt(DA.substring(pi+0,pi+4),36),TY=undefined;return[qJ,qJ+parseInt(DA.substring(pi+4,pi+4+3),36)]}function wd(DA,sq,pi){DA[sq]?DA[sq].includes(pi)||DA[sq].push(pi):DA[sq]=[pi]}function AG(DA){const sq=DA.lastIndexOf("*"),pi=DA.substring(sq+2);if(sq<0||0===pi.length)return DA.split(".");const qJ=[pi],TY=undefined;return DA.substring(0,sq).split(".").filter(Boolean).forEach((DA=>qJ.concat(DA))),qJ}function KS(DA){const sq={},pi={},TY=[],jt={},TI=[];for(let pi=0;pi<DA.length;pi++){const AA=DA[pi],Gq=new Set;for(const DA of AA){const jt=hK(DA);if((0,qJ.isFullyQualifiedDomain)(jt))wd(sq,jt,pi);else{if(!(0,qJ.isFullyQualifiedDomainWildcard)(jt)){TY.push(pi);break}{const DA=AG(jt);TI.push({labels:DA,index:pi}),DA.forEach((DA=>Gq.add(DA)))}}}for(const DA of Gq)jt[DA]?jt[DA]++:jt[DA]=1}for(const{labels:DA,index:sq}of TI){let qJ=DA[0];for(const sq of DA)jt[sq]<jt[qJ]&&(qJ=sq);wd(pi,qJ,sq)}return{domains:sq,domainLabels:pi,nonstandard:TY}}function JR(DA,sq,pi,qJ,jt){const TI=undefined,hK=DA.substring(pi,qJ).split("\n"),AA=[];if(hK.forEach(((DA,sq)=>{DA.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&AA.push(sq)})),0===AA.length)return;sq.push([pi,qJ-pi]);const Gq=(0,TY.parseArray)(hK.slice(0,AA[0]).join("\n"));jt.push(Gq)}function TS(DA){const sq=[],pi=[];let qJ=0;const TY=/^\s*={2,}\s*$/gm;let jt;for(;jt=TY.exec(DA);){const TY=jt.index,TI=jt.index+jt[0].length;JR(DA,pi,qJ,TY,sq),qJ=TI}return JR(DA,pi,qJ,DA.length,sq),{urls:sq,offsets:pi}}function yH(DA){const{urls:sq,offsets:pi}=TS(DA),{domains:qJ,domainLabels:TY,nonstandard:jt}=KS(sq);return{offsets:AA(pi),domains:qJ,domainLabels:TY,nonstandard:jt,cacheDomainIndex:{},cacheSiteFix:{},cacheCleanupTimer:null}}function BD(DA,sq,pi){const TY=hK(DA),jt=TY.split(".");let TI=[];"*"in sq.domainLabels&&(TI=TI.concat(sq.domainLabels["*"]));for(const DA of jt)if(DA in sq.domainLabels){const jt=sq.domainLabels[DA];for(const DA of jt){const sq=pi(DA);for(const pi of sq){const sq=hK(pi);(0,qJ.isFullyQualifiedDomainWildcard)(sq)&&(0,qJ.fullyQualifiedDomainMatchesWildcard)(sq,TY)&&TI.push(DA)}}}for(let DA=0;DA<jt.length;DA++){const pi=jt.slice(DA).join(".");pi in sq.domains&&(TI=TI.concat(sq.domains[pi])),pi in sq.domainLabels&&(TI=TI.concat(sq.domainLabels[pi]))}return TI=TI.concat(sq.nonstandard),TI=Array.from(new Set(TI)),TI}function Am(DA,sq,pi,qJ){if(qJ in sq.cacheSiteFix)return sq.cacheSiteFix[qJ];const[TY,jt]=Gq(sq.offsets,qJ),hK=undefined,AA=TI(DA.substring(TY,jt),pi)[0];return sq.cacheSiteFix[qJ]=AA,AA}function OC(DA){clearTimeout(DA.cacheCleanupTimer),DA.cacheCleanupTimer=setTimeout((()=>{DA.cacheCleanupTimer=null,DA.cacheDomainIndex={},DA.cacheSiteFix={}}),jt)}function oG(DA,sq,pi,qJ){const TY=[],jt=hK(DA);pi.cacheDomainIndex[jt]||(pi.cacheDomainIndex[jt]=BD(jt,pi,(DA=>Am(sq,pi,qJ,DA).url)));const TI=pi.cacheDomainIndex[jt];for(const DA of TI){const jt=Am(sq,pi,qJ,DA);TY.push(jt)}return OC(pi),TY}function XC(DA){const sq=(0,TY.parseArray)(DA),pi=sq.map((DA=>[DA])),{domains:qJ,domainLabels:jt,nonstandard:TI}=KS(pi);return{domains:qJ,domainLabels:jt,nonstandard:TI,urls:sq}}function wo(DA,sq){const pi=undefined,qJ=BD(hK(DA),sq,(DA=>[sq.urls[DA]])),TY=[];for(const DA of qJ)TY.push(sq.urls[DA]);return TY}function By(DA,sq){if(null===sq)return!1;const pi=wo(DA,sq);return(0,qJ.isURLInList)(DA,pi)}pi.parseSitesFixesConfig=TI,pi.getDomain=hK,pi.indexSitesFixesConfig=yH,pi.getSitesFixesFor=oG,pi.indexSiteListConfig=XC,pi.isURLInSiteList=By},{"../../utils/text":42,"../../utils/url":46}],30:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.PREFIX=void 0,pi.PREFIX="dm"},{}],31:[function(DA,sq,pi){"use strict";function qJ(DA){return null!=DA.length}function TY(DA,sq){if(qJ(DA))for(let pi=0,qJ=DA.length;pi<qJ;pi++)sq(DA[pi]);else for(const pi of DA)sq(pi)}function jt(DA,sq){TY(sq,(sq=>DA.push(sq)))}function TI(DA){const sq=[];for(let pi=0,qJ=DA.length;pi<qJ;pi++)sq.push(DA[pi]);return sq}Object.defineProperty(pi,"__esModule",{value:!0}),pi.toArray=pi.push=pi.forEach=void 0,pi.forEach=TY,pi.push=jt,pi.toArray=TI},{}],32:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0});class qJ{constructor(){this.queue=[],this.timerId=null,this.frameDuration=1e3/60}addToQueue(DA){this.queue.push(DA),this.startQueue()}stopQueue(){null!==this.timerId&&(cancelAnimationFrame(this.timerId),this.timerId=null),this.queue=[]}startQueue(){this.timerId||(this.timerId=requestAnimationFrame((()=>{this.timerId=null;const DA=Date.now();let sq;for(;sq=this.queue.shift();)if(sq(),Date.now()-DA>=this.frameDuration){this.startQueue();break}})))}}pi.default=qJ},{}],33:[function(DA,sq,pi){"use strict";var qJ;Object.defineProperty(pi,"__esModule",{value:!0}),pi.AutomationMode=void 0,function(DA){DA["NONE"]="",DA["TIME"]="time",DA["SYSTEM"]="system",DA["LOCATION"]="location"}(qJ=pi.AutomationMode||(pi.AutomationMode={}))},{}],34:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.getSRGBLightness=pi.lowerCalcExpression=pi.parse=pi.hslToString=pi.rgbToHexString=pi.rgbToString=pi.rgbToHSL=pi.hslToRGB=pi.clearColorCache=pi.parseToHSLWithCache=pi.parseColorWithCache=void 0;const qJ=DA("./math-eval"),TY=DA("./text"),jt=new Map,TI=new Map;function hK(DA){if(DA=DA.trim(),TI.has(DA))return TI.get(DA);DA.includes("calc(")&&(DA=Ts(DA));const sq=oG(DA);return sq&&TI.set(DA,sq),sq}function AA(DA){if(jt.has(DA))return jt.get(DA);const sq=hK(DA);if(!sq)return null;const pi=AG(sq);return jt.set(DA,pi),pi}function Gq(){jt.clear(),TI.clear()}function wd({h:DA,s:sq,l:pi,a:qJ=1}){if(0===sq){const[DA,sq,TY]=[pi,pi,pi].map((DA=>Math.round(255*DA)));return{r:DA,g:TY,b:sq,a:qJ}}const TY=(1-Math.abs(2*pi-1))*sq,jt=TY*(1-Math.abs(DA/60%2-1)),TI=pi-TY/2,[hK,AA,Gq]=(DA<60?[TY,jt,0]:DA<120?[jt,TY,0]:DA<180?[0,TY,jt]:DA<240?[0,jt,TY]:DA<300?[jt,0,TY]:[TY,0,jt]).map((DA=>Math.round(255*(DA+TI))));return{r:hK,g:AA,b:Gq,a:qJ}}function AG({r:DA,g:sq,b:pi,a:qJ=1}){const TY=DA/255,jt=sq/255,TI=pi/255,hK=Math.max(TY,jt,TI),AA=Math.min(TY,jt,TI),Gq=hK-AA,wd=(hK+AA)/2;if(0===Gq)return{h:0,s:0,l:wd,a:qJ};let AG=60*(hK===TY?(jt-TI)/Gq%6:hK===jt?(TI-TY)/Gq+2:(TY-jt)/Gq+4);AG<0&&(AG+=360);const KS=undefined;return{h:AG,s:Gq/(1-Math.abs(2*wd-1)),l:wd,a:qJ}}function KS(DA,sq=0){const pi=DA.toFixed(sq);if(0===sq)return pi;const qJ=pi.indexOf(".");if(qJ>=0){const DA=pi.match(/0+$/);if(DA)return DA.index===qJ+1?pi.substring(0,qJ):pi.substring(0,DA.index)}return pi}function JR(DA){const{r:sq,g:pi,b:qJ,a:TY}=DA;return null!=TY&&TY<1?`rgba(${KS(sq)}, ${KS(pi)}, ${KS(qJ)}, ${KS(TY,2)})`:`rgb(${KS(sq)}, ${KS(pi)}, ${KS(qJ)})`}function TS({r:DA,g:sq,b:pi,a:qJ}){return`#${(null!=qJ&&qJ<1?[DA,sq,pi,Math.round(255*qJ)]:[DA,sq,pi]).map((DA=>`${DA<16?"0":""}${DA.toString(16)}`)).join("")}`}function yH(DA){const{h:sq,s:pi,l:qJ,a:TY}=DA;return null!=TY&&TY<1?`hsla(${KS(sq)}, ${KS(100*pi)}%, ${KS(100*qJ)}%, ${KS(TY,2)})`:`hsl(${KS(sq)}, ${KS(100*pi)}%, ${KS(100*qJ)}%)`}pi.parseColorWithCache=hK,pi.parseToHSLWithCache=AA,pi.clearColorCache=Gq,pi.hslToRGB=wd,pi.rgbToHSL=AG,pi.rgbToString=JR,pi.rgbToHexString=TS,pi.hslToString=yH;const BD=/^rgba?\([^\(\)]+\)$/,Am=/^hsla?\([^\(\)]+\)$/,OC=/^#[0-9a-f]+$/i;function oG(DA){const sq=DA.trim().toLowerCase();return sq.match(BD)?Jw(sq):sq.match(Am)?Hi(sq):sq.match(OC)?ba(sq):dC.has(sq)?DM(sq):vl.has(sq)?pH(sq):"transparent"===DA?{r:0,g:0,b:0,a:0}:null}function XC(DA){const sq=[];let pi=0,qJ=!1;const TY=DA.indexOf("(");DA=DA.substring(TY+1,DA.length-1);for(let TY=0;TY<DA.length;TY++){const jt=DA[TY];jt>="0"&&jt<="9"||"."===jt||"+"===jt||"-"===jt?qJ=!0:!qJ||" "!==jt&&","!==jt&&"/"!==jt?qJ||(pi=TY+1):(sq.push(DA.substring(pi,TY)),qJ=!1,pi=TY+1)}return qJ&&sq.push(DA.substring(pi,DA.length)),sq}function wo(DA,sq,pi){const qJ=XC(DA),TY=Object.entries(pi),jt=undefined;return qJ.map((DA=>DA.trim())).map(((DA,pi)=>{let qJ;const jt=TY.find((([sq])=>DA.endsWith(sq)));return qJ=jt?parseFloat(DA.substring(0,DA.length-jt[0].length))/jt[1]*sq[pi]:parseFloat(DA),sq[pi]>1?Math.round(qJ):qJ}))}pi.parse=oG;const By=[255,255,255,1],gP={"%":100};function Jw(DA){const[sq,pi,qJ,TY=1]=wo(DA,By,gP);return{r:sq,g:pi,b:qJ,a:TY}}const Gx=[360,1,1,1],JW={"%":100,deg:360,rad:2*Math.PI,turn:1};function Hi(DA){const[sq,pi,qJ,TY=1]=wo(DA,Gx,JW);return wd({h:sq,s:pi,l:qJ,a:TY})}function ba(DA){const sq=DA.substring(1);switch(sq.length){case 3:case 4:{const[DA,pi,qJ]=[0,1,2].map((DA=>parseInt(`${sq[DA]}${sq[DA]}`,16))),TY=undefined;return{r:DA,g:pi,b:qJ,a:3===sq.length?1:parseInt(`${sq[3]}${sq[3]}`,16)/255}}case 6:case 8:{const[DA,pi,qJ]=[0,2,4].map((DA=>parseInt(sq.substring(DA,DA+2),16))),TY=undefined;return{r:DA,g:pi,b:qJ,a:6===sq.length?1:parseInt(sq.substring(6,8),16)/255}}}return null}function DM(DA){const sq=dC.get(DA);return{r:sq>>16&255,g:sq>>8&255,b:sq>>0&255,a:1}}function pH(DA){const sq=vl.get(DA);return{r:sq>>16&255,g:sq>>8&255,b:sq>>0&255,a:1}}function Ts(DA){let sq=0;const pi=(sq,pi,qJ)=>{DA=DA.substring(0,sq)+qJ+DA.substring(pi)};for(;-1!==(sq=DA.indexOf("calc("));){const jt=(0,TY.getParenthesesRange)(DA,sq);if(!jt)break;let TI=DA.slice(jt.start+1,jt.end-1);const hK=TI.includes("%");TI=TI.split("%").join("");const AA=Math.round((0,qJ.evalMath)(TI));pi(jt.start-4,jt.end,AA+(hK?"%":""))}return DA}pi.lowerCalcExpression=Ts;const dC=new Map(Object.entries({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074})),vl=new Map(Object.entries({ActiveBorder:3906044,ActiveCaption:0,AppWorkspace:11184810,Background:6513614,ButtonFace:16777215,ButtonHighlight:15329769,ButtonShadow:10461343,ButtonText:0,CaptionText:0,GrayText:8355711,Highlight:11720703,HighlightText:0,InactiveBorder:16777215,InactiveCaption:16777215,InactiveCaptionText:0,InfoBackground:16514245,InfoText:0,Menu:16185078,MenuText:16777215,Scrollbar:11184810,ThreeDDarkShadow:0,ThreeDFace:12632256,ThreeDHighlight:16777215,ThreeDLightShadow:16777215,ThreeDShadow:0,Window:15527148,WindowFrame:11184810,WindowText:0,"-webkit-focus-ring-color":15046400}).map((([DA,sq])=>[DA.toLowerCase(),sq])));function CR(DA,sq,pi){return(.2126*DA+.7152*sq+.0722*pi)/255}pi.getSRGBLightness=CR},{"./math-eval":36,"./text":42}],35:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.compareIPV6=pi.isIPV6=void 0;const qJ=/\[[0-9:a-zA-Z]+?\]/;function TY(DA){const sq=qJ.exec(DA);if(!sq)return!1;const pi=DA.indexOf("?");return!(pi>=0&&sq.index>pi)}pi.isIPV6=TY;const jt=/\[.*?\](\:\d+)?/;function TI(DA,sq){const pi=undefined,qJ=undefined;return DA.match(jt)[0]===sq.match(jt)[0]}pi.compareIPV6=TI},{}],36:[function(DA,sq,pi){"use strict";function qJ(DA){const sq=[],pi=[];let qJ;for(let TY=0,TI=DA.length;TY<TI;TY++){const TI=DA[TY];if(TI&&" "!==TI){if(jt.has(TI)){const DA=jt.get(TI);for(;pi.length;){const qJ=jt.get(pi[0]);if(!qJ)break;if(!DA.lessOrEqualThan(qJ))break;sq.push(pi.shift())}pi.unshift(TI)}else!qJ||jt.has(qJ)?sq.push(TI):sq[sq.length-1]+=TI;qJ=TI}}sq.push(...pi);const TY=[];for(let DA=0,pi=sq.length;DA<pi;DA++){const pi=jt.get(sq[DA]);if(pi){const DA=TY.splice(0,2);TY.push(pi.exec(DA[1],DA[0]))}else TY.unshift(parseFloat(sq[DA]))}return TY[0]}Object.defineProperty(pi,"__esModule",{value:!0}),pi.evalMath=void 0,pi.evalMath=qJ;class TY{constructor(DA,sq){this.precendce=DA,this.execMethod=sq}exec(DA,sq){return this.execMethod(DA,sq)}lessOrEqualThan(DA){return this.precendce<=DA.precendce}}const jt=new Map([["+",new TY(1,((DA,sq)=>DA+sq))],["-",new TY(1,((DA,sq)=>DA-sq))],["*",new TY(2,((DA,sq)=>DA*sq))],["/",new TY(2,((DA,sq)=>DA/sq))]])},{}],37:[function(DA,sq,pi){"use strict";function qJ(DA,sq,pi,qJ,TY){return(DA-sq)*(TY-qJ)/(pi-sq)+qJ}function TY(DA,sq,pi){return Math.min(pi,Math.max(sq,DA))}function jt(DA,sq){const pi=[];for(let qJ=0,TY=DA.length;qJ<TY;qJ++){pi[qJ]=[];for(let TY=0,jt=sq[0].length;TY<jt;TY++){let jt=0;for(let pi=0,TI=DA[0].length;pi<TI;pi++)jt+=DA[qJ][pi]*sq[pi][TY];pi[qJ][TY]=jt}}return pi}Object.defineProperty(pi,"__esModule",{value:!0}),pi.multiplyMatrices=pi.clamp=pi.scale=void 0,pi.scale=qJ,pi.clamp=TY,pi.multiplyMatrices=jt},{}],38:[function(DA,sq,pi){"use strict";var qJ;Object.defineProperty(pi,"__esModule",{value:!0}),pi.MessageType=void 0,function(DA){DA["UI_GET_DATA"]="ui-get-data",DA["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",DA["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",DA["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",DA["UI_CHANGE_SETTINGS"]="ui-change-settings",DA["UI_SET_THEME"]="ui-set-theme",DA["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",DA["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",DA["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",DA["UI_LOAD_CONFIG"]="ui-load-config",DA["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",DA["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",DA["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",DA["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",DA["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",DA["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",DA["UI_SAVE_FILE"]="ui-save-file",DA["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",DA["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",DA["BG_CHANGES"]="bg-changes",DA["BG_ADD_CSS_FILTER"]="bg-add-css-filter",DA["BG_ADD_STATIC_THEME"]="bg-add-static-theme",DA["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",DA["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",DA["BG_EXPORT_CSS"]="bg-export-css",DA["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",DA["BG_CLEAN_UP"]="bg-clean-up",DA["BG_RELOAD"]="bg-reload",DA["BG_FETCH_RESPONSE"]="bg-fetch-response",DA["BG_UI_UPDATE"]="bg-ui-update",DA["BG_CSS_UPDATE"]="bg-css-update",DA["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",DA["CS_FRAME_CONNECT"]="cs-frame-connect",DA["CS_FRAME_FORGET"]="cs-frame-forget",DA["CS_FRAME_FREEZE"]="cs-frame-freeze",DA["CS_FRAME_RESUME"]="cs-frame-resume",DA["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",DA["CS_FETCH"]="cs-fetch",DA["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",DA["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",DA["CS_LOG"]="cs-log"}(qJ=pi.MessageType||(pi.MessageType={}))},{}],39:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.loadAsText=pi.readResponseAsDataURL=pi.loadAsDataURL=void 0;const qJ=DA("./platform");async function TY(DA,sq,pi){const TY=await fetch(DA,{cache:"force-cache",credentials:"omit",referrer:pi});if(qJ.isFirefox&&"text/css"===sq&&DA.startsWith("moz-extension://")&&DA.endsWith(".css"))return TY;if(sq&&!TY.headers.get("Content-Type").startsWith(sq))throw new Error(`Mime type mismatch when loading ${DA}`);if(!TY.ok)throw new Error(`Unable to load ${DA} ${TY.status} ${TY.statusText}`);return TY}async function jt(DA,sq){const pi=await TY(DA,sq);return await TI(pi)}async function TI(DA){const sq=await DA.blob(),pi=undefined;return await new Promise((DA=>{const pi=new FileReader;pi.onloadend=()=>DA(pi.result),pi.readAsDataURL(sq)}))}async function hK(DA,sq,pi){const qJ=await TY(DA,sq,pi);return await qJ.text()}pi.loadAsDataURL=jt,pi.readResponseAsDataURL=TI,pi.loadAsText=hK},{"./platform":41}],40:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.parseGradient=void 0;const qJ=DA("./text"),TY="gradient".length,jt="conic-",TI=jt.length,hK="radial-",AA="linear-";function Gq(DA){const sq=[];let pi=0,Gq=jt.length;for(;-1!==(pi=DA.indexOf("gradient",Gq));){let wd;if([AA,hK,jt].find((sq=>{if(pi-sq.length>=0){const qJ=undefined;if(DA.substring(pi-sq.length,pi)===sq)return"repeating"===DA.slice(pi-sq.length-10,pi-sq.length-1)?(wd=`repeating-${sq}gradient`,!0):"-webkit"===DA.slice(pi-sq.length-8,pi-sq.length-1)?(wd=`-webkit-${sq}gradient`,!0):(wd=`${sq}gradient`,!0)}})),!wd)break;const{start:AG,end:KS}=(0,qJ.getParenthesesRange)(DA,pi+TY),JR=DA.substring(AG+1,KS-1);Gq=KS+1+TI,sq.push({typeGradient:wd,match:JR,offset:wd.length+2,index:pi-wd.length+TY,hasComma:!0})}return sq.length&&(sq[sq.length-1].hasComma=!1),sq}pi.parseGradient=Gq},{"./text":42}],41:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.isCSSColorSchemePropSupported=pi.isFetchSupported=pi.isXMLHttpRequestSupported=pi.compareChromeVersions=pi.isDefinedSelectorSupported=pi.firefoxVersion=pi.chromiumVersion=pi.isNonPersistent=pi.isMatchMediaChangeEventListenerBuggy=pi.isMatchMediaChangeEventListenerSupported=pi.isShadowDomSupported=pi.isMobile=pi.isMacOS=pi.isWindows=pi.isSafari=pi.isEdge=pi.isOpera=pi.isYaBrowser=pi.isVivaldi=pi.isFirefox=pi.isThunderbird=pi.isChromium=void 0;const qJ="undefined"!=typeof navigator,TY=qJ?navigator.userAgentData&&Array.isArray(navigator.userAgentData.brands)?navigator.userAgentData.brands.map((DA=>`${DA.brand.toLowerCase()} ${DA.version}`)).join(" "):navigator.userAgent.toLowerCase():"some useragent",jt=qJ?navigator.userAgentData&&"string"==typeof navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase():navigator.platform.toLowerCase():"some platform";function TI(DA,sq){const pi=DA.split(".").map((DA=>parseInt(DA))),qJ=sq.split(".").map((DA=>parseInt(DA)));for(let DA=0;DA<pi.length;DA++)if(pi[DA]!==qJ[DA])return pi[DA]<qJ[DA]?-1:1;return 0}pi.isChromium=!0,pi.isThunderbird=!1,pi.isFirefox=!1,pi.isVivaldi=!1,pi.isYaBrowser=!1,pi.isOpera=!1,pi.isEdge=!1,pi.isSafari=!1,pi.isWindows=jt.startsWith("win"),pi.isMacOS=jt.startsWith("mac"),pi.isMobile=qJ&&navigator.userAgentData?navigator.userAgentData.mobile:TY.includes("mobile"),pi.isShadowDomSupported="function"==typeof ShadowRoot,pi.isMatchMediaChangeEventListenerSupported=!0,pi.isMatchMediaChangeEventListenerBuggy=qJ&&navigator.userAgentData&&["Linux","Android"].includes(navigator.userAgentData.platform)||jt.startsWith("linux"),pi.isNonPersistent=!0,pi.chromiumVersion=(()=>{const DA=TY.match(/chrom(?:e|ium)(?:\/| )([^ ]+)/);return DA&&DA[1]?DA[1]:""})(),pi.firefoxVersion=(()=>{const DA=TY.match(/(?:firefox|librewolf)(?:\/| )([^ ]+)/);return DA&&DA[1]?DA[1]:""})(),pi.isDefinedSelectorSupported=(()=>{try{return document.querySelector(":defined"),!0}catch(DA){return!1}})(),pi.compareChromeVersions=TI,pi.isXMLHttpRequestSupported="function"==typeof XMLHttpRequest,pi.isFetchSupported="function"==typeof fetch,pi.isCSSColorSchemePropSupported=!0},{}],42:[function(DA,sq,pi){"use strict";function qJ(DA,sq){if(!isFinite(sq))throw new Error(`Wrong char index ${sq}`);let pi="",qJ=0,TY,jt=0;do{qJ++,TY=jt,jt=DA.indexOf("\n",TY+1)}while(jt>=0&&jt<=sq);const TI=sq-TY;return pi+=`line ${qJ}, column ${TI}`,pi+="\n",sq<DA.length?pi+=DA.substring(TY+1,jt):pi+=DA.substring(DA.lastIndexOf("\n")+1),pi+="\n",pi+=`${new Array(TI).join("-")}^`,pi}function TY(DA,sq){const pi=Math.min(DA.length,sq.length);for(let qJ=0;qJ<pi;qJ++)if(DA[qJ]!==sq[qJ])return qJ;return DA.length!==sq.length?pi:-1}function jt(DA){return DA.replace(/\r/g,"").split("\n").map((DA=>DA.trim())).filter((DA=>DA))}function TI(DA){return DA.concat("").join("\n")}function hK(DA,sq,pi=0){const qJ=[];let TY;for(;TY=DA.exec(sq);)qJ.push(TY[pi]);return qJ}function AA(DA){return 2*DA.length}function Gq(DA){function sq(DA){return DA.replace(/^\s+/,"")}function pi(DA){return 0===DA?"":" ".repeat(4*DA)}if(DA.length<5e4){const sq=/[^{}]+{\s*}/;for(;sq.test(DA);)DA=DA.replace(sq,"")}const qJ=DA.replace(/\s{2,}/g," ").replace(/\{/g,"{\n").replace(/\}/g,"\n}\n").replace(/\;(?![^\(|\"]*(\)|\"))/g,";\n").replace(/\,(?![^\(|\"]*(\)|\"))/g,",\n").replace(/\n\s*\n/g,"\n").split("\n");let TY=0;const jt=[];for(let DA=0,TI=qJ.length;DA<TI;DA++){const TI=`${qJ[DA]}\n`;TI.includes("{")?jt.push(pi(TY++)+sq(TI)):TI.includes("}")?jt.push(pi(--TY)+sq(TI)):jt.push(pi(TY)+sq(TI))}return jt.join("").trim()}function wd(DA,sq=0){const pi=DA.length;let qJ=0,TY=-1;for(let jt=sq;jt<pi;jt++)if(0===qJ){const sq=DA.indexOf("(",jt);if(sq<0)break;TY=sq,qJ++,jt=sq}else{const sq=DA.indexOf(")",jt);if(sq<0)break;const pi=DA.indexOf("(",jt);if(pi<0||sq<pi){if(qJ--,0===qJ)return{start:TY,end:sq+1};jt=sq}else qJ++,jt=pi}return null}Object.defineProperty(pi,"__esModule",{value:!0}),pi.getParenthesesRange=pi.formatCSS=pi.getStringSize=pi.getMatches=pi.formatArray=pi.parseArray=pi.getTextDiffIndex=pi.getTextPositionMessage=void 0,pi.getTextPositionMessage=qJ,pi.getTextDiffIndex=TY,pi.parseArray=jt,pi.formatArray=TI,pi.getMatches=hK,pi.getStringSize=AA,pi.formatCSS=Gq,pi.getParenthesesRange=wd},{}],43:[function(DA,sq,pi){"use strict";function qJ(DA){let sq=!1,pi=null,qJ;const TY=(...TY)=>{qJ=TY,pi?sq=!0:(DA(...qJ),pi=requestAnimationFrame((()=>{pi=null,sq&&(DA(...qJ),sq=!1)})))},jt=()=>{cancelAnimationFrame(pi),sq=!1,pi=null};return Object.assign(TY,{cancel:jt})}function TY(){const DA=[];let sq=null;function pi(){let pi;for(;pi=DA.shift();)pi();sq=null}function qJ(qJ){DA.push(qJ),sq||(sq=requestAnimationFrame(pi))}function TY(){DA.splice(0),cancelAnimationFrame(sq),sq=null}return{add:qJ,cancel:TY}}Object.defineProperty(pi,"__esModule",{value:!0}),pi.createAsyncTasksQueue=pi.throttle=void 0,pi.throttle=qJ,pi.createAsyncTasksQueue=TY},{}],44:[function(DA,sq,pi){"use strict";function qJ(DA){const sq=DA.split(":").slice(0,2),pi=DA.trim().toLowerCase(),qJ=pi.endsWith("am")||pi.endsWith("a.m."),TY=pi.endsWith("pm")||pi.endsWith("p.m.");let jt=sq.length>0?parseInt(sq[0]):0;(isNaN(jt)||jt>23)&&(jt=0),qJ&&12===jt&&(jt=0),TY&&jt<12&&(jt+=12);let TI=sq.length>1?parseInt(sq[1]):0;return(isNaN(TI)||TI>59)&&(TI=0),[jt,TI]}function TY(DA){return DA.split(":").map((DA=>parseInt(DA)))}function jt(DA,sq){return DA[0]===sq[0]&&DA[1]===sq[1]?0:DA[0]<sq[0]||DA[0]===sq[0]&&DA[1]<sq[1]?-1:1}function TI(DA,sq,pi=new Date){const qJ=TY(DA),hK=TY(sq),AA=[pi.getHours(),pi.getMinutes()];return jt(qJ,hK)>0?TI(sq,DA,pi):0===jt(qJ,hK)?null:jt(AA,qJ)<0?(pi.setHours(qJ[0]),pi.setMinutes(qJ[1]),pi.setSeconds(0),pi.setMilliseconds(0),pi.getTime()):jt(AA,hK)<0?(pi.setHours(hK[0]),pi.setMinutes(hK[1]),pi.setSeconds(0),pi.setMilliseconds(0),pi.getTime()):new Date(pi.getFullYear(),pi.getMonth(),pi.getDate()+1,qJ[0],qJ[1]).getTime()}function hK(DA,sq,pi=new Date){const qJ=TY(DA),TI=TY(sq),hK=[pi.getHours(),pi.getMinutes()];return jt(qJ,TI)>0?jt(qJ,hK)<=0||jt(hK,TI)<0:jt(qJ,hK)<=0&&jt(hK,TI)<0}function AA(DA,sq,pi){return sq<DA?pi<=sq||DA<=pi:DA<pi&&pi<sq}function Gq(DA){let sq=0;return DA.seconds&&(sq+=1e3*DA.seconds),DA.minutes&&(sq+=60*DA.minutes*1e3),DA.hours&&(sq+=60*DA.hours*60*1e3),DA.days&&(sq+=24*DA.days*60*60*1e3),sq}function wd(DA){return Gq(DA)/1e3/60}function AG(DA,sq,pi){const qJ=Date.UTC(pi.getUTCFullYear(),0,0,0,0,0,0),TY=Gq({days:1}),jt=Math.floor((pi.getTime()-qJ)/TY),TI=90.83333333333333,hK=Math.PI/180,AA=180/Math.PI,wd=sq/15;function AG(sq){const pi=jt+((sq?6:18)-wd)/24,qJ=.9856*pi-3.289;let TY=qJ+1.916*Math.sin(qJ*hK)+.02*Math.sin(2*qJ*hK)+282.634;TY>360?TY-=360:TY<0&&(TY+=360);let AG=AA*Math.atan(.91764*Math.tan(TY*hK));AG>360?AG-=360:AG<0&&(AG+=360);const KS=undefined,JR=undefined;AG+=90*Math.floor(TY/90)-90*Math.floor(AG/90),AG/=15;const TS=.39782*Math.sin(TY*hK),yH=Math.cos(Math.asin(TS)),BD=(Math.cos(TI*hK)-TS*Math.sin(DA*hK))/(yH*Math.cos(DA*hK));if(BD>1)return{alwaysDay:!1,alwaysNight:!0,time:0};if(BD<-1)return{alwaysDay:!0,alwaysNight:!1,time:0};const Am=undefined,OC=undefined;let oG=(sq?360-AA*Math.acos(BD):AA*Math.acos(BD))/15+AG-.06571*pi-6.622-wd;return oG>24?oG-=24:oG<0&&(oG+=24),{alwaysDay:!1,alwaysNight:!1,time:Math.round(oG*Gq({hours:1}))}}const KS=AG(!0),JR=AG(!1);return KS.alwaysDay||JR.alwaysDay?{alwaysDay:!0}:KS.alwaysNight||JR.alwaysNight?{alwaysNight:!0}:{sunriseTime:KS.time,sunsetTime:JR.time}}function KS(DA,sq,pi=new Date){const qJ=AG(DA,sq,pi);if(qJ.alwaysDay)return!1;if(qJ.alwaysNight)return!0;const TY=qJ.sunriseTime,jt=undefined,TI=undefined;return AA(qJ.sunsetTime,TY,pi.getUTCHours()*Gq({hours:1})+pi.getUTCMinutes()*Gq({minutes:1})+pi.getUTCSeconds()*Gq({seconds:1})+pi.getUTCMilliseconds())}function JR(DA,sq,pi=new Date){const qJ=AG(DA,sq,pi);if(qJ.alwaysDay)return pi.getTime()+Gq({days:1});if(qJ.alwaysNight)return pi.getTime()+Gq({days:1});const[TY,jt]=qJ.sunriseTime<qJ.sunsetTime?[qJ.sunriseTime,qJ.sunsetTime]:[qJ.sunsetTime,qJ.sunriseTime],TI=pi.getUTCHours()*Gq({hours:1})+pi.getUTCMinutes()*Gq({minutes:1})+pi.getUTCSeconds()*Gq({seconds:1})+pi.getUTCMilliseconds();return TI<=TY?Date.UTC(pi.getUTCFullYear(),pi.getUTCMonth(),pi.getUTCDate(),0,0,0,TY):TI<=jt?Date.UTC(pi.getUTCFullYear(),pi.getUTCMonth(),pi.getUTCDate(),0,0,0,jt):Date.UTC(pi.getUTCFullYear(),pi.getUTCMonth(),pi.getUTCDate()+1,0,0,0,TY)}Object.defineProperty(pi,"__esModule",{value:!0}),pi.nextTimeChangeAtLocation=pi.isNightAtLocation=pi.getDurationInMinutes=pi.getDuration=pi.isInTimeIntervalLocal=pi.nextTimeInterval=pi.parseTime=void 0,pi.parseTime=qJ,pi.nextTimeInterval=TI,pi.isInTimeIntervalLocal=hK,pi.getDuration=Gq,pi.getDurationInMinutes=wd,pi.isNightAtLocation=KS,pi.nextTimeChangeAtLocation=JR},{}],45:[function(DA,sq,pi){"use strict";function qJ(DA){return(DA<16?"0":"")+DA.toString(16)}function TY(){if("randomUUID"in crypto){const DA=crypto.randomUUID();return DA.substring(0,8)+DA.substring(9,13)+DA.substring(14,18)+DA.substring(19,23)+DA.substring(24)}return Array.from(crypto.getRandomValues(new Uint8Array(16))).map((DA=>qJ(DA))).join("")}Object.defineProperty(pi,"__esModule",{value:!0}),pi.generateUID=void 0,pi.generateUID=TY},{}],46:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.isLocalFile=pi.fullyQualifiedDomainMatchesWildcard=pi.isFullyQualifiedDomainWildcard=pi.isFullyQualifiedDomain=pi.isURLEnabled=pi.isPDF=pi.isURLMatched=pi.isURLInList=pi.compareURLPatterns=pi.getURLHostOrProtocol=pi.isRelativeHrefOnAbsolutePath=pi.getAbsoluteURL=pi.parseURL=pi.parsedURLCache=void 0;const qJ=DA("./ipv6"),TY=!1;let jt;function TI(DA){return jt||(jt=document.createElement("a")),jt.href=DA,jt.href}function hK(DA,sq=null){const qJ=`${DA}${sq?`;${sq}`:""}`;if(pi.parsedURLCache.has(qJ))return pi.parsedURLCache.get(qJ);if(sq){const TY=new URL(DA,TI(sq));return pi.parsedURLCache.set(qJ,TY),TY}const TY=new URL(TI(DA));return pi.parsedURLCache.set(DA,TY),TY}function AA(DA,sq){if(sq.match(/^data\\?\:/))return sq;if(/^\/\//.test(sq))return`${location.protocol}${sq}`;const pi=hK(DA),qJ=undefined;return hK(sq,pi.href).href}function Gq(DA){if(DA.startsWith("data:"))return!0;const sq=hK(DA);return sq.protocol===location.protocol&&(sq.hostname===location.hostname&&(sq.port===location.port&&sq.pathname===location.pathname))}function wd(DA){const sq=new URL(DA);return sq.host?sq.host:"file:"===sq.protocol?sq.pathname:sq.protocol}function AG(DA,sq){return DA.localeCompare(sq)}function KS(DA,sq){for(let pi=0;pi<sq.length;pi++)if(JR(DA,sq[pi]))return!0;return!1}function JR(DA,sq){const pi=(0,qJ.isIPV6)(DA),TY=(0,qJ.isIPV6)(sq);if(pi&&TY)return(0,qJ.compareIPV6)(DA,sq);if(!pi&&!TY){const pi=TS(sq);return null!==pi&&Boolean(DA.match(pi))}return!1}function TS(DA){try{const sq="^"===(DA=DA.trim())[0],pi="$"===DA[DA.length-1],qJ=/\/\$?$/.test(DA);let TY,jt,TI;(TY=(DA=DA.replace(/^\^/,"").replace(/\$$/,"").replace(/^.*?\/{2,3}/,"").replace(/\?.*$/,"").replace(/\/$/,"")).indexOf("/"))>=0?(jt=DA.substring(0,TY),TI=DA.replace(/\$/g,"").substring(TY)):jt=DA.replace(/\$/g,"");let hK=sq?"^(.*?\\:\\/{2,3})?":"^(.*?\\:\\/{2,3})?([^/]*?\\.)?";const AA=jt.split(".");hK+="(";for(let DA=0;DA<AA.length;DA++)"*"===AA[DA]&&(AA[DA]="[^\\.\\/]+?");return hK+=AA.join("\\."),hK+=")",TI&&(hK+="(",hK+=TI.replace("/","\\/"),hK+=")"),hK+=pi?"(\\/?(\\?[^/]*?)?)$":`(\\/${qJ?"":"?"}.*?)$`,new RegExp(hK,"i")}catch(DA){return null}}function yH(DA){if(DA.includes(".pdf")){if(DA.includes("?")&&(DA=DA.substring(0,DA.lastIndexOf("?"))),DA.includes("#")&&(DA=DA.substring(0,DA.lastIndexOf("#"))),DA.match(/(wikipedia|wikimedia)\.org/i)&&DA.match(/(wikipedia|wikimedia)\.org\/.*\/[a-z]+\:[^\:\/]+\.pdf/i)||DA.match(/timetravel\.mementoweb\.org\/reconstruct/i)&&DA.match(/\.pdf$/i)||DA.match(/dropbox\.com\/s\//i)&&DA.match(/\.pdf$/i))return!1;if(!DA.endsWith(".pdf"))return!1;for(let sq=DA.length;sq>0;sq--){if("="===DA[sq])return!1;if("/"===DA[sq])return!0}}return!1}function BD(DA,sq,{isProtected:pi,isInDarkList:qJ,isDarkThemeDetected:jt},TI=!0){if(XC(DA)&&!TI)return!1;if(pi&&!sq.enableForProtectedPages)return!1;if(TY)return!0;if(yH(DA))return sq.enableForPDF;const hK=KS(DA,sq.siteList),AA=KS(DA,sq.siteListEnabled);return sq.applyToListedOnly?AA||hK:!!AA||!(qJ||sq.detectDarkTheme&&jt)&&!hK}function Am(DA){return/^[a-z0-9\.\-]+$/i.test(DA)&&-1===DA.indexOf("..")}function OC(DA){if(!DA.includes("*")||!/^[a-z0-9\.\-\*]+$/i.test(DA))return!1;const sq=DA.split(".");for(const DA of sq)if("*"!==DA&&!/^[a-z0-9\-]+$/i.test(DA))return!1;return!0}function oG(DA,sq){const pi=DA.toLowerCase().split("."),qJ=sq.toLowerCase().split(".");if(qJ.length<pi.length)return!1;for(;pi.length;){const DA=pi.pop(),sq=qJ.pop();if("*"!==DA&&DA!==sq)return!1}return!0}function XC(DA){return DA&&DA.startsWith("file:///")}pi.parsedURLCache=new Map,pi.parseURL=hK,pi.getAbsoluteURL=AA,pi.isRelativeHrefOnAbsolutePath=Gq,pi.getURLHostOrProtocol=wd,pi.compareURLPatterns=AG,pi.isURLInList=KS,pi.isURLMatched=JR,pi.isPDF=yH,pi.isURLEnabled=BD,pi.isFullyQualifiedDomain=Am,pi.isFullyQualifiedDomainWildcard=OC,pi.fullyQualifiedDomainMatchesWildcard=oG,pi.isLocalFile=XC},{"./ipv6":35}],47:[function(DA,sq,pi){"use strict";Object.defineProperty(pi,"__esModule",{value:!0}),pi.documentIsVisible=pi.removeDocumentVisibilityListener=pi.setDocumentVisibilityListener=void 0;let qJ=null,TY=!document.hidden;const jt={capture:!0,passive:!0};function TI(){document.addEventListener("visibilitychange",qJ,jt),window.addEventListener("pageshow",qJ,jt),window.addEventListener("focus",qJ,jt)}function hK(){document.removeEventListener("visibilitychange",qJ,jt),window.removeEventListener("pageshow",qJ,jt),window.removeEventListener("focus",qJ,jt)}function AA(DA){const sq=Boolean(qJ);qJ=()=>{document.hidden||(Gq(),DA(),TY=!0)},sq||TI()}function Gq(){hK(),qJ=null}function wd(){return TY}pi.setDocumentVisibilityListener=AA,pi.removeDocumentVisibilityListener=Gq,pi.documentIsVisible=wd},{}]},{},[1]);