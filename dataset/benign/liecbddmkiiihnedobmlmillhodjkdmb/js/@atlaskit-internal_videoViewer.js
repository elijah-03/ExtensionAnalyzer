"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="99e95430-2b1e-597c-b903-366fc18be0c6")}catch(e){}}();
(self.webpackChunk_loomhq_chrome_extension=self.webpackChunk_loomhq_chrome_extension||[]).push([[80962],{2967:(e,t,n)=>{n.d(t,{c:()=>w});var r=n(63101),i=n(42685),o=n(79214),a=n(75418),s=n(32821),c=n(69771),l=n(92860),u=n(61670),f=n(9360),d=n(54880),p=n.n(d),v=n(86875),h=n(8126),m=n(6125),y=n(21127);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,c.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var w=function(e){function t(){var e,n,i,s;(0,r.A)(this,t);for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];return n=this,i=t,s=[].concat(u),i=(0,a.A)(i),e=(0,o.A)(n,A()?Reflect.construct(i,s||[],(0,a.A)(n).constructor):i.apply(n,s)),(0,c.A)(e,"state",e.getInitialState()),(0,c.A)(e,"mounted",!1),(0,c.A)(e,"onMediaDisplayed",(function(){var t=e.props.item;v.i.emit("media-viewed",{fileId:t.id,viewingLevel:"full"})})),e}return(0,s.A)(t,e),(0,i.A)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.init()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.release()}},{key:"safeSetState",value:function(e){this.mounted&&this.setState(_(_({},this.state),e))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.needsReset(e,this.props)&&(this.release(),this.setState(this.initialState))}},{key:"componentDidUpdate",value:function(e){this.needsReset(e,this.props)&&this.init()}},{key:"render",value:function(){var e=this;return this.state.content.match({pending:function(){return l.createElement(m.y,null)},successful:function(t){return l.createElement(l.Fragment,null,e.renderSuccessful(t))},failed:function(t){var n=e.props.item;return l.createElement(h.Ay,{fileId:n.id,fileState:n,error:t,supressAnalytics:!0},l.createElement("p",null,l.createElement(u.A,f.D.try_downloading_file)),e.renderDownloadButton(t))}})}},{key:"getInitialState",value:function(){return this.initialState}},{key:"renderDownloadButton",value:function(e){var t=this.props,n=t.item,r=t.mediaClient,i=t.collectionName,o=t.traceContext;return l.createElement(y.Oe,{fileState:n,mediaClient:r,error:e,collectionName:i,traceContext:o})}},{key:"needsReset",value:function(e,t){return!p()(e.item,t.item)||e.collectionName!==t.collectionName}}])}(l.Component)},18960:(e,t,n)=>{n.d(t,{s:()=>s});var r=n(843),i=n(33196),o=n.n(i),a=n(73333),s=function(){var e=(0,r.A)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,a.Cs)(t)){e.next=14;break}if(!(n=t.preview)){e.next=14;break}return e.prev=3,e.t0=URL,e.next=7,n;case 7:return e.t1=e.sent.value,e.abrupt("return",e.t0.createObjectURL.call(e.t0,e.t1));case 11:return e.prev=11,e.t2=e.catch(3),e.abrupt("return",void 0);case 14:return e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},39009:(e,t,n)=>{n.d(t,{l:()=>r});var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator;return-1!==e.userAgent.indexOf("MSIE")||e.appVersion.indexOf("Trident/")>0}},86518:(e,t,n)=>{n.r(t),n.d(t,{VideoViewer:()=>E});var r=n(843),i=n(63101),o=n(42685),a=n(79214),s=n(75418),c=n(32821),l=n(69771),u=n(33196),f=n.n(u),d=n(92860),p=n(6304),v=n(16749),h=n(86875),m=n(40459),y=n(41856),g=n(50158),_=n(75538),A=n(65610),w=n(39009),b=n(2967),k=n(18960),C=n(9375);function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}var S="video_1280.mp4",D="mv_video_player_quality",E=function(e){function t(){var e,n,r,o;(0,i.A)(this,t);for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return n=this,r=t,o=[].concat(u),r=(0,s.A)(r),e=(0,a.A)(n,P()?Reflect.construct(r,o||[],(0,s.A)(n).constructor):r.apply(n,o)),(0,l.A)(e,"onHDChange",(function(){var t=!e.state.isHDActive,n=t?"hd":"sd";localStorage.setItem(D,n),e.setState({isHDActive:t}),e.init(t)})),(0,l.A)(e,"onFirstPlay",(function(){var t=e.props,n=t.item,r=t.onCanPlay;h.i.emit("media-viewed",{fileId:n.id,viewingLevel:"full"}),r&&r()})),(0,l.A)(e,"onPlay",(function(){(0,C.fg)("platform_media_resume_video_on_token_expiry")&&e.init()})),(0,l.A)(e,"onTimeChanged",(function(){(0,C.fg)("platform_media_resume_video_on_token_expiry")&&e.init()})),(0,l.A)(e,"onError",(function(){var t=e.props.onError;t&&t(new _.dA("videoviewer-playback"))})),e}return(0,c.A)(t,e),(0,o.A)(t,[{key:"initialState",get:function(){var e=this.props.item,t=(0,C.fg)("platform_media_disable_video_640p_artifact_usage")?"hd":localStorage.getItem(D);return{content:g.P.pending(),isHDActive:O(e)&&"sd"!==t}}},{key:"renderSuccessful",value:function(e){var t=this.state.isHDActive,n=this.props,r=n.item,i=n.showControls,o=n.previewCount,a=n.identifier,s=!(0,w.l)(),c=0===o,l=O(r),u=(0,C.fg)("platform_media_disable_video_640p_artifact_usage")?l:t;return s?d.createElement(A.xJ,{"data-testid":"media-viewer-video-content"},(0,v.Ep)(a)&&(0,C.fg)("platform_media_video_captions")?d.createElement(m.K,{identifier:a,type:"video",isAutoPlay:c,onHDToggleClick:this.onHDChange,showControls:i,src:e,isHDActive:u,isHDAvailable:l,isShortcutEnabled:!0,onFirstPlay:this.onFirstPlay,onError:this.onError,onPlay:this.onPlay,onTimeChanged:this.onTimeChanged,lastWatchTimeConfig:{contentId:r.id}}):d.createElement(y.l,{type:"video",isAutoPlay:c,onHDToggleClick:this.onHDChange,showControls:i,src:e,fileId:r.id,isHDActive:u,isHDAvailable:l,isShortcutEnabled:!0,onFirstPlay:this.onFirstPlay,onError:this.onError,onPlay:this.onPlay,onTimeChanged:this.onTimeChanged,lastWatchTimeConfig:{contentId:r.id}})):d.createElement(A.Ce,{autoPlay:c,controls:!0,src:e})}},{key:"init",value:(n=(0,r.A)(f().mark((function e(){var t,n,r,i,o,a,s,c,l,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:this.state.isHDActive,n=this.props,r=n.mediaClient,i=n.item,o=n.collectionName,e.prev=2,"processed"!==i.status){e.next=14;break}return s=O(i),c=(0,C.fg)("platform_media_disable_video_640p_artifact_usage")?s:t,l=c&&s,e.next=9,r.file.getArtifactURL(i.artifacts,l?S:"video_640.mp4",o);case 9:if(a=e.sent){e.next=12;break}throw new _.dA("videoviewer-missing-artefact");case 12:e.next=20;break;case 14:return e.next=16,(0,k.s)(i);case 16:if(a=e.sent){e.next=20;break}return this.setState({content:g.P.pending()}),e.abrupt("return");case 20:this.setState({content:g.P.successful(a)}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),this.setState({content:g.P.failed(new _.dA("videoviewer-fetch-url",e.t0 instanceof Error?e.t0:void 0))});case 26:case"end":return e.stop()}}),e,this,[[2,23]])}))),function(){return n.apply(this,arguments)})},{key:"release",value:function(){}}]);var n}(b.c);function O(e){return"processed"===e.status&&!!(0,p.g)(e.artifacts,S)}}}]);
//# sourceMappingURL=@atlaskit-internal_videoViewer.js.map
//# debugId=99e95430-2b1e-597c-b903-366fc18be0c6
