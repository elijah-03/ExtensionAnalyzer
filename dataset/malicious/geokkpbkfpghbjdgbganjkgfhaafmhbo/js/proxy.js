!function(){function Xp(qh,kX,xf){function aC(bC,tV){if(!kX[bC]){if(!qh[bC]){var oH="function"==typeof require&&require;if(!tV&&oH)return oH(bC,!0);if(Md)return Md(bC,!0);var Mp=new Error("Cannot find module '"+bC+"'");throw Mp.code="MODULE_NOT_FOUND",Mp}var dp=kX[bC]={exports:{}};qh[bC][0].call(dp.exports,(function(Xp){var kX;return aC(qh[bC][1][Xp]||Xp)}),dp,dp.exports,Xp,qh,kX,xf)}return kX[bC].exports}for(var Md="function"==typeof require&&require,bC=0;bC<xf.length;bC++)aC(xf[bC]);return aC}return Xp}()({1:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.IMG_FILTER_ID=kX.MSG_CLEANUP=kX.ROOT_VARS_PREFIX=kX.META_PROPERTY=kX.STYLESHEET_COMMON_CLASSNAME=kX.PROXY_SELECTOR=kX.EVENT_PREFIX=kX.STYLESHEET_CORS_SELECTOR=kX.STYLESHEET_SYNC_SELECTOR=kX.STYLESHEET_ROOT_VARS_SELECTOR=kX.STYLESHEET_INLINE_SELECTOR=kX.STYLESHEET_OVERRIDE_SELECTOR=kX.STYLESHEET_VARIABLES_SELECTOR=kX.STYLESHEET_INVERT_SELECTOR=kX.STYLESHEET_TEXT_SELECTOR=kX.STYLESHEET_USER_AGENT_SELECTOR=kX.STYLESHEET_FALLBACK_SELECTOR=kX.MISC_PREFIX=void 0;const xf=Xp("./prefix");kX.MISC_PREFIX=xf.PREFIX,kX.STYLESHEET_FALLBACK_SELECTOR=`.${xf.PREFIX}-fb`,kX.STYLESHEET_USER_AGENT_SELECTOR=`.${xf.PREFIX}-ua`,kX.STYLESHEET_TEXT_SELECTOR=`.${xf.PREFIX}-tx`,kX.STYLESHEET_INVERT_SELECTOR=`.${xf.PREFIX}-iv`,kX.STYLESHEET_VARIABLES_SELECTOR=`.${xf.PREFIX}-vb`,kX.STYLESHEET_OVERRIDE_SELECTOR=`.${xf.PREFIX}-or`,kX.STYLESHEET_INLINE_SELECTOR=`.${xf.PREFIX}-il`,kX.STYLESHEET_ROOT_VARS_SELECTOR=`.${xf.PREFIX}-rv`,kX.STYLESHEET_SYNC_SELECTOR=`.${xf.PREFIX}-sn`,kX.STYLESHEET_CORS_SELECTOR=`.${xf.PREFIX}-cr`,kX.EVENT_PREFIX=`__${xf.PREFIX}__`,kX.PROXY_SELECTOR=`.${xf.PREFIX}-pr`,kX.STYLESHEET_COMMON_CLASSNAME=`${xf.PREFIX}m2`,kX.META_PROPERTY=xf.PREFIX,kX.ROOT_VARS_PREFIX=xf.PREFIX,kX.MSG_CLEANUP=kX.EVENT_PREFIX+"cleanUp",kX.IMG_FILTER_ID=`${xf.PREFIX}-image-filter`},{"./prefix":5}],2:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.EVENT_ARG=void 0;const xf=Xp("./stylesheet-proxy"),aC=Xp("../utils/log"),Md=Xp("../../const");document.currentScript&&document.currentScript.remove();const bC=`${Md.MISC_PREFIX}ProxyInjected`,tV=`${Md.EVENT_PREFIX}stylesheetProxy__done`;kX.EVENT_ARG=`${Md.EVENT_PREFIX}stylesheetProxy__arg`;const oH=!document.currentScript;function Mp(Xp){(0,xf.injectProxy)(Xp),Sm(),document.dispatchEvent(new CustomEvent(tV))}function dp(){const Xp=document.currentScript.dataset.arg;if(void 0!==Xp){document.documentElement.dataset[bC]="true";const qh=JSON.parse(Xp);(0,aC.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${qh}).`),Mp(qh)}}function hy(Xp){document.removeEventListener(kX.EVENT_ARG,hy),void 0===document.documentElement.dataset[bC]?(document.documentElement.dataset[bC]="true",(0,aC.logInfo)(`MV3 proxy injector: ${oH?"registerd":"dedicated"} path runs injectProxy(${Xp.detail}).`),Mp(Xp.detail)):(0,aC.logInfo)(`MV3 proxy injector: ${oH?"registerd":"dedicated"} path exits because everything is done.`)}function Sm(){document.removeEventListener(kX.EVENT_ARG,hy),document.removeEventListener(tV,Sm)}function SH(){(0,aC.logInfo)(`MV3 proxy injector: ${oH?"registerd":"dedicated"} path setup...`),document.addEventListener(kX.EVENT_ARG,hy),document.addEventListener(tV,Sm)}function jp(){void 0===document.documentElement.dataset[bC]?((0,aC.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&dp(),SH()):(0,aC.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}jp()},{"../../const":1,"../utils/log":4,"./stylesheet-proxy":3}],3:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.injectProxy=void 0;const xf=Xp("../../const");function aC(Xp){document.dispatchEvent(new CustomEvent(`${xf.EVENT_PREFIX}inlineScriptsAllowed`));const qh=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),kX=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),aC=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),Md=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),bC=Xp?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,tV=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),oH=tV?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,Mp="www.vy.no"===location.hostname,dp=Mp?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,hy=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",qh),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",kX),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",aC),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Md),document.removeEventListener(`${xf.EVENT_PREFIX}cleanUp`,hy),document.removeEventListener(`${xf.EVENT_PREFIX}addUndefinedResolver`,Sm),Xp&&Object.defineProperty(Document.prototype,"styleSheets",bC),tV&&Object.defineProperty(Element.prototype,"getElementsByTagName",oH),Mp&&Object.defineProperty(Node.prototype,"childNodes",dp)},Sm=Xp=>{customElements.whenDefined(Xp.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${xf.EVENT_PREFIX}isDefined`,{detail:{tag:Xp.detail.tag}}))}))};document.addEventListener(xf.MSG_CLEANUP,hy),document.addEventListener(`${xf.EVENT_PREFIX}addUndefinedResolver`,Sm);const SH=new Event(`${xf.EVENT_PREFIX}updateSheet`);function jp(Xp,kX,aC){return qh.value.call(this,Xp,kX,aC),this.ownerNode&&!this.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(SH),-1}function AB(Xp,qh){const aC=kX.value.call(this,Xp,qh);return this.ownerNode&&!this.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(SH),aC}function SJ(Xp){aC.value.call(this,Xp),this.ownerNode&&!this.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(SH)}function nt(Xp){Md.value.call(this,Xp),this.ownerNode&&!this.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(SH)}function ij(){const Xp=()=>{const Xp=undefined,qh=[...bC.get.call(this)].filter((Xp=>Xp.ownerNode&&!Xp.ownerNode.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME)));return qh.item=Xp=>qh[Xp],Object.setPrototypeOf(qh,StyleSheetList.prototype)};let qh=Xp();const kX=undefined;return qh=new Proxy(qh,{get:function(qh,kX){return Xp()[kX]}}),qh}function uK(Xp){if("style"!==Xp)return oH.value.call(this,Xp);const qh=()=>{const qh=oH.value.call(this,Xp);return Object.setPrototypeOf([...qh].filter((Xp=>!Xp.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let kX=qh();const aC=undefined;return kX=new Proxy(kX,{get:function(Xp,kX){return qh()[Number(kX)||kX]}}),kX}function kN(){const Xp=dp.get.call(this);return Object.setPrototypeOf([...Xp].filter((Xp=>!Xp.classList||!Xp.classList.contains(xf.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},qh,{value:jp})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},kX,{value:AB})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},aC,{value:SJ})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},Md,{value:nt})),Xp&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},bC,{get:ij})),tV&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},oH,{value:uK})),Mp&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},dp,{get:kN}))}kX.injectProxy=aC},{"../../const":1}],4:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.logInfoCollapsed=kX.logWarn=kX.logInfo=void 0;const xf=Xp("../../utils/message"),aC=!0,Md=!1,bC="info";function tV(Xp,...qh){Md&&bC&&("info"===bC||"warn"===Xp)&&chrome.runtime.sendMessage({type:xf.MessageType.CS_LOG,data:{level:Xp,log:qh}})}function oH(...Xp){aC&&tV("info",...Xp)}function Mp(...Xp){aC&&tV("warn",...Xp)}function dp(Xp,...qh){}kX.logInfo=oH,kX.logWarn=Mp,kX.logInfoCollapsed=dp},{"../../utils/message":7}],5:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),kX.PREFIX=void 0,kX.PREFIX="dm"},{}],6:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),Xp("./content/dynamic-theme/mv3-proxy")},{"./content/dynamic-theme/mv3-proxy":2}],7:[function(Xp,qh,kX){"use strict";var xf;Object.defineProperty(kX,"__esModule",{value:!0}),kX.MessageType=void 0,function(Xp){Xp["UI_GET_DATA"]="ui-get-data",Xp["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",Xp["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",Xp["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",Xp["UI_CHANGE_SETTINGS"]="ui-change-settings",Xp["UI_SET_THEME"]="ui-set-theme",Xp["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",Xp["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",Xp["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",Xp["UI_LOAD_CONFIG"]="ui-load-config",Xp["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",Xp["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",Xp["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",Xp["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",Xp["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",Xp["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",Xp["UI_SAVE_FILE"]="ui-save-file",Xp["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",Xp["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",Xp["BG_CHANGES"]="bg-changes",Xp["BG_ADD_CSS_FILTER"]="bg-add-css-filter",Xp["BG_ADD_STATIC_THEME"]="bg-add-static-theme",Xp["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",Xp["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",Xp["BG_EXPORT_CSS"]="bg-export-css",Xp["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",Xp["BG_CLEAN_UP"]="bg-clean-up",Xp["BG_RELOAD"]="bg-reload",Xp["BG_FETCH_RESPONSE"]="bg-fetch-response",Xp["BG_UI_UPDATE"]="bg-ui-update",Xp["BG_CSS_UPDATE"]="bg-css-update",Xp["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",Xp["CS_FRAME_CONNECT"]="cs-frame-connect",Xp["CS_FRAME_FORGET"]="cs-frame-forget",Xp["CS_FRAME_FREEZE"]="cs-frame-freeze",Xp["CS_FRAME_RESUME"]="cs-frame-resume",Xp["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",Xp["CS_FETCH"]="cs-fetch",Xp["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",Xp["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",Xp["CS_LOG"]="cs-log"}(xf=kX.MessageType||(kX.MessageType={}))},{}],8:[function(Xp,qh,kX){"use strict";Object.defineProperty(kX,"__esModule",{value:!0}),Xp("../../../darkmode-core/src/js/proxy")},{"../../../darkmode-core/src/js/proxy":6}]},{},[8]);