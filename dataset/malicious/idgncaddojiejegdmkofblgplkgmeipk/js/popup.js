!function(){function Pu(tP,Tc,PM){function mn(SN,FA){if(!Tc[SN]){if(!tP[SN]){var xH="function"==typeof require&&require;if(!FA&&xH)return xH(SN,!0);if(kQ)return kQ(SN,!0);var kW=new Error("Cannot find module '"+SN+"'");throw kW.code="MODULE_NOT_FOUND",kW}var od=Tc[SN]={exports:{}};tP[SN][0].call(od.exports,(function(Pu){var Tc;return mn(tP[SN][1][Pu]||Pu)}),od,od.exports,Pu,tP,Tc,PM)}return Tc[SN].exports}for(var kQ="function"==typeof require&&require,SN=0;SN<PM.length;SN++)mn(PM[SN]);return mn}return Pu}()({1:[function(Pu,tP,Tc){"use strict";Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.browser=Pu("webextension-polyfill")},{"webextension-polyfill":2}],2:[function(Pu,tP,Tc){"use strict";!function(Pu,PM){if("function"==typeof define&&define.amd)define("webextension-polyfill",["module"],PM);else if(void 0!==Tc)PM(tP);else{var mn={exports:{}};PM(mn),Pu.browser=mn.exports}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0,(function(Pu){if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const tP="The message port closed before a response was received.",Tc="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",PM=Pu=>{const Tc={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(Tc).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class PM extends WeakMap{constructor(Pu,tP=void 0){super(tP),this.createItem=Pu}get(Pu){return this.has(Pu)||this.set(Pu,this.createItem(Pu)),super.get(Pu)}}const mn=Pu=>Pu&&"object"==typeof Pu&&"function"==typeof Pu.then,kQ=(tP,Tc)=>(...PM)=>{Pu.runtime.lastError?tP.reject(new Error(Pu.runtime.lastError.message)):Tc.singleCallbackArg||PM.length<=1&&!1!==Tc.singleCallbackArg?tP.resolve(PM[0]):tP.resolve(PM)},SN=Pu=>1==Pu?"argument":"arguments",FA=(Pu,tP)=>function Tc(PM,...mn){if(mn.length<tP.minArgs)throw new Error(`Expected at least ${tP.minArgs} ${SN(tP.minArgs)} for ${Pu}(), got ${mn.length}`);if(mn.length>tP.maxArgs)throw new Error(`Expected at most ${tP.maxArgs} ${SN(tP.maxArgs)} for ${Pu}(), got ${mn.length}`);return new Promise(((Tc,SN)=>{if(tP.fallbackToNoCallback)try{PM[Pu](...mn,kQ({resolve:Tc,reject:SN},tP))}catch(kQ){PM[Pu](...mn),tP.fallbackToNoCallback=!1,tP.noCallback=!0,Tc()}else tP.noCallback?(PM[Pu](...mn),Tc()):PM[Pu](...mn,kQ({resolve:Tc,reject:SN},tP))}))},xH=(Pu,tP,Tc)=>new Proxy(tP,{apply:(tP,PM,mn)=>Tc.call(PM,Pu,...mn)});let kW=Function.call.bind(Object.prototype.hasOwnProperty);const od=(Pu,tP={},Tc={})=>{let PM=Object.create(null),mn={has:(tP,Tc)=>Tc in Pu||Tc in PM,get(mn,kQ,SN){if(kQ in PM)return PM[kQ];if(!(kQ in Pu))return;let mv=Pu[kQ];if("function"==typeof mv)if("function"==typeof tP[kQ])mv=xH(Pu,Pu[kQ],tP[kQ]);else if(kW(Tc,kQ)){let tP=FA(kQ,Tc[kQ]);mv=xH(Pu,Pu[kQ],tP)}else mv=mv.bind(Pu);else if("object"==typeof mv&&null!==mv&&(kW(tP,kQ)||kW(Tc,kQ)))mv=od(mv,tP[kQ],Tc[kQ]);else{if(!kW(Tc,"*"))return Object.defineProperty(PM,kQ,{configurable:!0,enumerable:!0,get:()=>Pu[kQ],set(tP){Pu[kQ]=tP}}),mv;mv=od(mv,tP[kQ],Tc["*"])}return PM[kQ]=mv,mv},set:(tP,Tc,mn,kQ)=>(Tc in PM?PM[Tc]=mn:Pu[Tc]=mn,!0),defineProperty:(Pu,tP,Tc)=>Reflect.defineProperty(PM,tP,Tc),deleteProperty:(Pu,tP)=>Reflect.deleteProperty(PM,tP)},kQ=Object.create(Pu);return new Proxy(kQ,mn)},mv=Pu=>({addListener(tP,Tc,...PM){tP.addListener(Pu.get(Tc),...PM)},hasListener:(tP,Tc)=>tP.hasListener(Pu.get(Tc)),removeListener(tP,Tc){tP.removeListener(Pu.get(Tc))}}),TN=new PM((Pu=>"function"!=typeof Pu?Pu:function tP(Tc){const PM=od(Tc,{},{getContent:{minArgs:0,maxArgs:0}});Pu(PM)}));let aP=!1;const Ah=new PM((Pu=>"function"!=typeof Pu?Pu:function tP(Tc,PM,kQ){let SN=!1,FA,xH=new Promise((Pu=>{FA=function(tP){aP||(aP=!0),SN=!0,Pu(tP)}})),kW;try{kW=Pu(Tc,PM,FA)}catch(Pu){kW=Promise.reject(Pu)}const od=!0!==kW&&mn(kW);if(!0!==kW&&!od&&!SN)return!1;const mv=Pu=>{Pu.then((Pu=>{kQ(Pu)}),(Pu=>{let tP;tP=Pu&&(Pu instanceof Error||"string"==typeof Pu.message)?Pu.message:"An unexpected error occurred",kQ({__mozWebExtensionPolyfillReject__:!0,message:tP})})).catch((Pu=>{}))};return mv(od?kW:xH),!0})),Ha=({reject:Tc,resolve:PM},mn)=>{Pu.runtime.lastError?Pu.runtime.lastError.message===tP?PM():Tc(new Error(Pu.runtime.lastError.message)):mn&&mn.__mozWebExtensionPolyfillReject__?Tc(new Error(mn.message)):PM(mn)},Qm=(Pu,tP,Tc,...PM)=>{if(PM.length<tP.minArgs)throw new Error(`Expected at least ${tP.minArgs} ${SN(tP.minArgs)} for ${Pu}(), got ${PM.length}`);if(PM.length>tP.maxArgs)throw new Error(`Expected at most ${tP.maxArgs} ${SN(tP.maxArgs)} for ${Pu}(), got ${PM.length}`);return new Promise(((Pu,tP)=>{const mn=Ha.bind(null,{resolve:Pu,reject:tP});PM.push(mn),Tc.sendMessage(...PM)}))},HP={devtools:{network:{onRequestFinished:mv(TN)}},runtime:{onMessage:mv(Ah),onMessageExternal:mv(Ah),sendMessage:Qm.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:Qm.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},BV={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return Tc.privacy={network:{"*":BV},services:{"*":BV},websites:{"*":BV}},od(Pu,HP,Tc)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");Pu.exports=PM(chrome)}else Pu.exports=browser}))},{}],3:[function(Pu,tP,Tc){"use strict";Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.removeFromSessionStorage=Tc.getFromSessionStorage=Tc.updateSessionStorage=Tc.getFromStorage=Tc.updateStorage=Tc.getRootUrl=void 0;const PM=Pu("webextension-polyfill-ts");function mn(Pu){return new URL(Pu).hostname}async function kQ(Pu,tP){await PM.browser.storage.local.set({[Pu]:tP})}async function SN(Pu,tP,Tc){await chrome.storage.session.set({[Pu]:tP}),Tc&&Tc()}function FA(Pu){chrome.storage.session.remove(Pu)}async function xH(Pu,tP){const Tc=await chrome.storage.session.get([Pu]);return tP?tP(null==Tc?void 0:Tc[Pu]):null==Tc?void 0:Tc[Pu]}async function kW(Pu){const tP=await PM.browser.storage.local.get([Pu]);return null==tP?void 0:tP[Pu]}Tc.getRootUrl=mn,Tc.updateStorage=kQ,Tc.updateSessionStorage=SN,Tc.removeFromSessionStorage=FA,Tc.getFromSessionStorage=xH,Tc.getFromStorage=kW},{"webextension-polyfill-ts":1}],4:[function(Pu,tP,Tc){"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});const PM=Pu("webextension-polyfill-ts"),mn=Pu("./helper");class kQ{constructor(){this.volumeInput=document.getElementById("volume"),this.volumeRange=document.getElementById("volume-range"),this.body=document.querySelector("body"),this.toggle=document.getElementById("toggle"),this.logo=document.getElementById("logo"),this.rangeThumb=document.querySelector(".range-thumb"),this.rangeProgress=document.querySelector(".range-progress"),this.domain=document.getElementById("domain"),this.volume=100,this.audioState={},this.run()}async run(){this.initListeners(),await this.synchronizeWithStorage(),this.viewDomain();const Pu=undefined;await(0,mn.getFromStorage)("extStatus")&&this.runBooster()}switchExtension(Pu){Pu?this.runBooster():this.disableBooster(),this.switchStatus(Pu)}initListeners(){this.initDOMListeners(),chrome.storage.local.onChanged.addListener((Pu=>{if(!Pu.extStatus)return;const tP=Pu.extStatus.newValue;this.switchExtension(tP)}))}initDOMListeners(){this.toggle.addEventListener("change",(async()=>{this.toggle.checked?this.enableExtension():this.disableExtension()})),this.volumeRange.addEventListener("input",(Pu=>{const tP=Pu.target.value;this.volume=Number(tP),this.volumeInput.value=String(tP),this.updateVolumeRangeProgress(),this.boostVolume()})),this.volumeRange.addEventListener("change",(()=>{this.saveSettings()})),this.volumeInput.addEventListener("change",(()=>{let Pu=Number(this.volumeInput.value);Pu>600&&(Pu=600,this.volumeInput.value=String(Pu)),this.volume=Pu,this.volumeRange.value=String(Pu),this.boostVolume(),this.updateVolumeRangeProgress(),this.saveSettings()}))}boostVolume(){this.audioState.volume=this.volume,this.audioState.gainNode&&(this.audioState.gainNode.gain.value=this.volume/100)}async saveSettings(){const Pu=await(0,mn.getFromSessionStorage)("tabs")||{},tP=this.getActiveTabId();tP&&(Pu[tP]=this.volume,(0,mn.updateSessionStorage)("tabs",Pu))}createAudioState(Pu){this.connectStream(Pu)}async runBooster(){const Pu=this.getActiveTabId();Pu&&this.createAudioState(Number(Pu))}disableBooster(){if(this.audioState.stream){const Pu=this.audioState.stream.getTracks();for(let tP=0;tP<Pu.length;tP+=1)Pu[tP].stop()}this.audioState={}}switchStatus(Pu){Pu?this.viewEnabledStatus():this.viewDisabledStatus()}updateVolume(){this.volumeInput.value=String(this.volume),this.volumeRange.value=String(this.volume)}updateVolumeRangeProgress(){if(!this.rangeThumb)return;const Pu=Number(this.volumeRange.value||0)/6-4;this.rangeThumb.style.left=`${Pu>0?Pu:0}%`,this.rangeProgress&&(this.rangeProgress.style.width=`${Number(Pu>0?Pu+2:0)}%`)}updatePopupUi(){this.updateVolume(),this.updateVolumeRangeProgress()}async synchronizeWithStorage(){const Pu=await(0,mn.getFromStorage)("extStatus");this.switchStatus(Pu);let tP=100;const Tc=this.getActiveTabId(),PM=await(0,mn.getFromSessionStorage)("tabs");if(Tc&&PM){const Pu=PM[Tc];(0===Pu||Pu)&&(tP=Pu)}this.volume=tP,this.updatePopupUi()}async enableExtension(){await(0,mn.updateStorage)("extStatus",!0),this.viewEnabledStatus()}async disableExtension(){await(0,mn.updateStorage)("extStatus",!1),this.viewDisabledStatus()}async viewDomain(){const Pu=this.getActiveTabId();if(!Pu)return;const tP=await this.getTab(Number(Pu));if(!tP||!tP.url)return;const Tc=(0,mn.getRootUrl)(tP.url)||"";this.domain.textContent=Tc}viewEnabledStatus(){this.body.classList.remove("inactive"),this.volumeInput.removeAttribute("disabled"),this.toggle.checked=!0,this.logo.setAttribute("src","../images/logo.png")}viewDisabledStatus(){this.body.classList.add("inactive"),this.volumeInput.setAttribute("disabled","true"),this.toggle.checked=!1,this.logo.setAttribute("src","../images/logo_inactive.png")}async getTab(Pu){return PM.browser.tabs.get(Pu)}getActiveTabId(){const Pu=window.location.search,tP=undefined;return new URLSearchParams(Pu).get("tabId")||""}getMediaStream(Pu){return new Promise((tP=>{tP(navigator.mediaDevices.getUserMedia({video:!1,audio:{mandatory:{chromeMediaSource:"tab",chromeMediaSourceId:Pu}}}))}))}async connectStream(Pu){var tP;if(!Pu)return;const Tc=null===(tP=await chrome.tabs.getCurrent())||void 0===tP?void 0:tP.id;chrome.tabCapture.getMediaStreamId({consumerTabId:Tc,targetTabId:Pu},(tP=>{chrome.runtime.sendMessage({action:"GetUserMedia",consumerTabId:Tc,targetTabId:Pu}),this.getMediaStream(tP).then((Pu=>{const tP=new AudioContext,Tc=tP.createMediaStreamSource(Pu),PM=tP.createGain(),mn=tP.createDynamicsCompressor();mn.threshold.setValueAtTime(-50,tP.currentTime),mn.knee.setValueAtTime(40,tP.currentTime),mn.ratio.setValueAtTime(12,tP.currentTime),mn.attack.setValueAtTime(0,tP.currentTime),mn.release.setValueAtTime(.25,tP.currentTime),Tc.connect(PM),PM.connect(tP.destination),PM.gain.value=this.volume/100,this.audioState={audioContext:tP,gainNode:PM,stream:Pu,volume:this.volume}})).catch((Pu=>{const tP=chrome.runtime.lastError}))}))}}const SN=new kQ},{"./helper":3,"webextension-polyfill-ts":1}]},{},[4]);