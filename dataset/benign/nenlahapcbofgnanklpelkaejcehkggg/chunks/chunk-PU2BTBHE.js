import{a as x}from"./chunk-JDXM4SX2.js";import{f as d,m as k}from"./chunk-KJBXKQ52.js";import{c as R,n as E,v as l}from"./chunk-4XUWKJYA.js";import{c as S}from"./chunk-AYDLOBCW.js";import{e as h}from"./chunk-3GYLW4KZ.js";var m=h(S()),p=h(R());var g=(t=[])=>l("checkForExceptionTerms",t);var a="_el_",i="__key__",P="title",u="link",c="linkText",b=new Set(["runLimit","runInterval","runTime"]);function _(t,n){return Object.keys(n).reduce((r,e)=>{let s=n[e]===":scope"?t:t.querySelector(n[e]);return s&&(r[e]=s.nodeName==="A"&&e===u?s.getAttribute("href"):s.innerText),r},{})}function M(t,n){let o=[],r=t.querySelectorAll(n.query)??[];for(let e of r){let s=_(e,n.propScrape);s[a]=e,s[i]=(0,p.v4)(),o.push(s)}return o}function O(t,n,o,r){n[o].results.forEach(e=>{if(e[a].addEventListener("click",()=>r(o,e)),n[o].linkedClickable){let T=t.querySelectorAll(n[o].linkedClickable),f=m.default.find(T,v=>v?.innerText===e[P]);f&&f.addEventListener("click",()=>r(o,e))}})}async function w(t,n){t[n].foundLinks=m.default.reduce(t[n].results,(o,r)=>(r[u]&&(L(r[u])&&r[c]&&/https\:\/\/www\./.test(r[c])&&!/\s/.test(r[c])?o.push(r[c]):o.push(r[u])),o),[]),t[n].foundLinkCount=t[n].foundLinks.length,t[n].relevantLinks=t[n].foundLinkCount>0?await x(t[n].foundLinks):[],t[n].relevantLinkCount=t[n].relevantLinks?.length}async function V(t,n,o=()=>{}){let r=!1;for(let e in n)n[e].results=M(t,n[e]),n[e].hasClickListener?(O(t,n,e,o),r=n[e].results.length>0||r):n[e].hasNoLinks?(await w(n,e),r=n[e].relevantLinkCount>0||r):r=n[e].results.length>0||r;return r}function W(t){t.forEach(n=>{for(let o in n)n[o].results=[],n[o].relevantLinks=[],n[o].relevantLinkCount=0,n[o].foundLinks=[],n[o].foundLinkCount=0})}function L(t){return/google\.com\/search/.test(t)}function X(){let t=window.location.href;return L(t)?2:/chatgpt\.com/.test(t)?0:/gemini\.google\.com/.test(t)?1:3}async function N(t){let n=t.reduce((e,s)=>(s[i]||(s[i]=(0,p.v4)()),e.set(s[i],s),e),new Map),o=t.reduce((e,s)=>(e.push({id:s[i]??"",term:s[P]??""}),e),[]),{termChecks:r}=await g(o);return Object.keys(r).reduce((e,s)=>(r[s].excluded?e.excluded.push({object:r[s],info:n.get(s)??{}}):e.approved.push({object:r[s],info:n.get(s)??{}}),e),{approved:[],excluded:[]})}function C(){return E("llm_scrape_check_terms")}async function z(t){if(!C())return;let n=[],o=new Map;for(let e in t){for(let s of t[e].results??[])o.set(s[i],e),n.push(s);t[e].exclusionsResult={approved:[],excluded:[]}}let r=await N(n);for(let e of r.approved)t[o.get(e.info[i])].exclusionsResult?.approved.push(e);for(let e of r.excluded)t[o.get(e.info[i])].exclusionsResult?.excluded.push(e)}function J(t,n={}){let o=!C();for(let r in t){if(o){n[r]={excluded:[],excludedCount:0,relevant:t[r].results??[],relevantCount:t[r].results?.length||0};continue}n[r]={excluded:[],excludedCount:t[r].exclusionsResult?.excluded.length||0,relevant:[],relevantCount:t[r].exclusionsResult?.approved.length||0},t[r].exclusionsResult?.approved.forEach(e=>{delete e.info[a],n[r].relevant.push(e.info)}),t[r].exclusionsResult?.excluded.forEach(e=>{delete e.info[a],n[r].excluded.push({...e.object,...e.info})}),t[r].exclusionsResult={approved:[],excluded:[]}}return n}function Q(t,n){return t({itemName:n,propDataType:{watchForClick:"boolean",hasClickListener:"boolean",hasNoLinks:"boolean"}}).reduce((r,e)=>{if(e.name){let s=t({itemName:e.name});s.length>0&&(e.propScrape=s.shift(),r[e.name]=e)}return r},{})}function Z(t,n){let o=t({itemName:n,propDataType:{watchForClick:"boolean",hasClickListener:"boolean",hasNoLinks:"boolean"}});if(o.length===0)return{query:"",propScrape:{}};let r=o.shift();return Object.keys(r).forEach(e=>{b.has(e)&&typeof r[e]=="string"&&/^\d+$/.test(r[e])&&(r[e]=parseInt(r[e]))}),r}function ee(t){return`${k}?domain=${t}`}function te(t){let n=`${d}/exclusions?d=${btoa(m.default.uniq(t).join(","))}`;window.open(n,"_blank","noopener,noreferrer")}var oe=(t,n)=>l("getPreCheckoutOffers",{products:t,subexperience:n});var le=t=>l("setPreCheckoutDismissThrottle",t);export{i as a,_ as b,V as c,W as d,X as e,C as f,z as g,J as h,Q as i,Z as j,ee as k,te as l,le as m,oe as n};
