try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="577dc791-105b-4190-abb2-37bc4f9ada0f",e._sentryDebugIdIdentifier="sentry-dbid-577dc791-105b-4190-abb2-37bc4f9ada0f")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"4.43.1"};(self.webpackChunk=self.webpackChunk||[]).push([[6080],{86080:(e,t,n)=>{n.r(t),n.d(t,{AI_COMMAND_GROUP_MAP:()=>Ce,AcceptChangeType:()=>o,CLIENT_EVENTS:()=>r,CacheTypeEnum:()=>i,DOCUMENT_TITLE_INPUT_MAX_LENGTH:()=>of,DOCUMENT_TITLE_INPUT_MIN_LENGTH:()=>rf,FastTextManager:()=>zs,SegmentationManager:()=>iu,SentenceStorage:()=>ne,SentenceTypes:()=>a,addAWordToDictionary:()=>si,checkAndUpdateTimeStamp:()=>Vl,checkGrammar:()=>Gc,clearCacheByType:()=>we,computeGrammarCheck:()=>Mc,copyDocument:()=>Fa,createDocument:()=>Ua,createHash:()=>Jn,deleteAWordFromDictionary:()=>li,deleteDocument:()=>Ga,detectLanguage:()=>ul,generateDocumentTitle:()=>af,generateSentenceHtml:()=>Eo,getAICommandSuggestions:()=>Ho,getAIContentScore:()=>ii,getAllDocuments:()=>Ba,getBlockTags:()=>Oo,getConfig:()=>ai,getDictionaryWords:()=>ci,getDocument:()=>Wa,getGrammarErrors:()=>Pl,getGrammarPreferences:()=>Il,getRecommendations:()=>Tl,getRecommendationsList:()=>kc,getSplitSentences:()=>bu,getUnlockedRecommendation:()=>xl,loadFastTextModule:()=>$s,notifyClient:()=>s,processSentencesWithHtml:()=>So,qualityScore:()=>Zl,qualityScoreWithContext:()=>ef,recommendation:()=>Sc,setConfig:()=>ui,setEventCallback:()=>c,setGCCoreConfig:()=>kl,setHTTPClient:()=>Ue,setLoggerClient:()=>X,setSentenceStorageClient:()=>re,setStorageClient:()=>_e,setTrackerClient:()=>ac,storeSentenceForSkippingCheck:()=>Pc,unlockRecommendation:()=>ll,updateDocument:()=>$a,updateDocumentContent:()=>za,updateGrammarPreferences:()=>Dl});var r=function(e){return e.DEBUG_LOG="debugLog",e.ON_DEVICE_SENTENCE_SPLITTER_INIT="on_device_sentence_splitter_init",e.ON_DEVICE_SENTENCE_SPLITTER_INIT_ERROR="on_device_sentence_splitter_init_error",e.ON_DEVICE_SENTENCE_SPLIT_COMPLETE="on_device_sentence_split_complete",e.ON_DEVICE_SENTENCE_SPLIT_ERROR="on_device_sentence_split_error",e.ON_DEVICE_SENTENCE_SPLIT_TOGGLE="on_device_sentence_split_toggle",e.ON_DEVICE_SEGMENTER_SENTENCE_SPLIT_COMPLETE="on_device_segmenter_sentence_split_complete",e.ON_DEVICE_SEGMENTER_SENTENCE_SPLIT_ERROR="on_device_segmenter_sentence_split_error",e.ON_DEVICE_LANG_DETECT_COMPLETE="on_device_lang_detect_complete",e.ON_DEVICE_LANG_DETECT_ERROR="on_device_lang_detect_error",e.ON_DEVICE_LANG_DETECT_TIMEOUT="on_device_lang_detect_timeout",e.ON_DEVICE_LANG_DETECT_TOGGLE="on_device_lang_detect_toggle",e.LOCK_ID_TO_RECOMMENDATION_KEY_MAP_NON_EXISTS="LOCK_ID_TO_RECOMMENDATION_KEY_MAP_NON_EXISTS",e.RECOMMENDATION_UNLOCK_FAILED="RECOMMENDATION_UNLOCK_FAILED",e.GC_MODEL_STATS="gc_model_stats",e}({}),o=function(e){return e.GC="GC",e.GC_RECOMMENDATION="GC_RECOMMENDATION",e.PPHR="PPHR",e}({}),i=function(e){return e.recommendationNone="recommendation:none",e.recommendationPremium="recommendation:premium",e.recommendationLocked="recommendation:locked",e.recommendationUpsell="recommendation:upsell",e["detect-language:on-device"]="detect-language:on-device",e["sentence-splitter:on-device"]="sentence-splitter:on-device",e}({}),a=function(e){return e.GENERIC="GENERIC",e.BULLET_POINT="BULLET_POINT",e.HEADING="HEADING",e.INCOMPLETE_SENTENCE="INCOMPLETE_SENTENCE",e.BOLD="BOLD",e.ITALIC="ITALIC",e}({}),u=null;function c(e){u=e}function s(e){var t=e.eventName,n=e.data;u&&u({eventName:t,data:n})}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=new Map;f.set("PLATFORM_TYPE",""),f.set("PLATFORM_VERSION",""),f.set("IS_PREMIUM_USER",""),f.set("USER_ID_TOKEN",""),f.set("INPUT_LANGUAGE",""),f.set("REGIONAL_LANGUAGE",""),f.set("DEVICE_ID",""),f.set("GC_BATCH","4"),f.set("SS_BATCH","4"),f.set("PERSONALISATION_UPDATED_AT",""),f.set("PERSONALIZATION",""),f.set("VALID_START_SENTENCE_REGEX",""),f.set("VALID_END_SENTENCE_REGEX",""),f.set("GC_RESPONSE_POST_PROCESS",""),f.set("RECOMMENDATION_DISABLED_CATEGORIES",""),f.set("RECOMMENDATION_PRE_VALIDATE_CHECK",""),f.set("RECOMMENDATION_SENTENCES_PER_BATCH","5"),f.set("RECOMMENDATION_MIN_TEXT_LENGTH","10"),f.set("MAX_RECOMMENDATION_CONCURRENT_REQUESTS","6"),f.set("ENABLE_RECOMMENDATION_CONTEXT","false"),f.set("DISABLE_GC_AFTER_FIX_ERROR","false"),f.set("ON_DEVICE_LANGUAGE_CONFIG",""),f.set("ON_DEVICE_SENTENCE_SPLITTER_CONFIG","");var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"get",value:function(e){return f.get(e)}},{key:"set",value:function(e,t){return f.set(e,t)}}],(n=null)&&l(t.prototype,n),r&&l(t,r),e}();let d,p;const v=new WeakMap,y=new WeakMap,m=new WeakMap,b=new WeakMap,g=new WeakMap;let _={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return y.get(e);if("objectStoreNames"===t)return e.objectStoreNames||m.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return O(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function w(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(p||(p=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(S(this),t),O(v.get(this))}:function(...t){return O(e.apply(S(this),t))}:function(t,...n){const r=e.call(S(this),t,...n);return m.set(r,t.sort?t.sort():[t]),O(r)}}function E(e){return"function"==typeof e?w(e):(e instanceof IDBTransaction&&function(e){if(y.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});y.set(e,t)}(e),t=e,(d||(d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,_):e);var t}function O(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(O(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&v.set(t,e)}).catch(()=>{}),g.set(t,e),t}(e);if(b.has(e))return b.get(e);const t=E(e);return t!==e&&(b.set(e,t),g.set(t,e)),t}const S=e=>g.get(e);const k=["get","getKey","getAll","getAllKeys","count"],P=["put","add","delete","clear"],T=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(T.get(t))return T.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=P.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!k.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),o&&i.done]))[0]};return T.set(t,i),i}function I(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function D(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){I(i,r,o,a,u,"next",e)}function u(e){I(i,r,o,a,u,"throw",e)}a(void 0)})}}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}_=(e=>({...e,get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(_);var R="product-gc",N=3,L={cache:"cache",correctedSentences:"correctedSentences",lockedRecommendationMapping:"lockedRecommendationMapping"},M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"dbPromise",void 0),A(this,"isAvailable","undefined"!=typeof indexedDB),this.isAvailable?this.dbPromise=new Promise(function(e,t){(function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(e,t),u=O(a);return r&&a.addEventListener("upgradeneeded",e=>{r(O(a.result),e.oldVersion,e.newVersion,O(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),u.then(e=>{i&&e.addEventListener("close",()=>i()),o&&e.addEventListener("versionchange",()=>o())}).catch(()=>{}),u})(R,N,{upgrade:function(e,t,n,r){try{if(!e.objectStoreNames.contains(L.cache)){var o=e.createObjectStore(L.cache);o.createIndex("date","date"),o.createIndex("type","type",{unique:!1})}if(e.objectStoreNames.contains(L.cache)){var i=r.objectStore(L.cache);i.indexNames.contains("type")||i.createIndex("type","type",{unique:!1})}if(!e.objectStoreNames.contains(L.correctedSentences))e.createObjectStore(L.correctedSentences).createIndex("date","date");if(!e.objectStoreNames.contains(L.lockedRecommendationMapping))e.createObjectStore(L.lockedRecommendationMapping).createIndex("date","date")}catch(e){}},blocked:function(){e(null)},blocking:function(){},terminated:function(){}}).then(function(t){e(t||null)}).catch(function(t){e(null)})}):this.dbPromise=Promise.resolve(null)}var t,n,r;return t=e,n=[{key:"get",value:function(e,t){return D(function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,this.dbPromise];case 1:return[2,null===(n=r.sent())||void 0===n?void 0:n.get(t,e).then(function(e){return null==e?void 0:e.data})]}})}).call(this)}},{key:"set",value:function(e,t,n){return D(function(){var r,o,i;return C(this,function(a){switch(a.label){case 0:return i={data:t,type:(null==t||null===(r=t.value)||void 0===r?void 0:r.type)||"default",date:+(new Date).setHours(0,0,0,0)},[4,this.dbPromise];case 1:return[4,null===(o=a.sent())||void 0===o?void 0:o.put(n,i,e)];case 2:return a.sent(),[2]}})}).call(this)}},{key:"delete",value:function(e,t){return D(function(){var n;return C(this,function(r){switch(r.label){case 0:return[4,this.dbPromise];case 1:return[4,null===(n=r.sent())||void 0===n?void 0:n.delete(t,e)];case 2:return r.sent(),[2]}})}).call(this)}},{key:"clear",value:function(e){return D(function(){var t;return C(this,function(n){switch(n.label){case 0:return[4,this.dbPromise];case 1:return[4,null===(t=n.sent())||void 0===t?void 0:t.clear(e)];case 2:return n.sent(),[2]}})}).call(this)}},{key:"deleteOldData",value:function(e){return D(function(){var t,n,r,o,i,a,u;return C(this,function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),n=+(new Date).setDate((new Date).getDate()-10),[4,this.dbPromise];case 1:return r=null===(t=c.sent())||void 0===t?void 0:t.transaction(e,"readwrite"),o=null==r?void 0:r.store,i=null==o?void 0:o.index("date"),a=IDBKeyRange.upperBound(n),[4,null==i?void 0:i.openKeyCursor(a)];case 2:u=c.sent(),c.label=3;case 3:return u?(null==o||o.delete(u.primaryKey),[4,u.continue()]):[3,5];case 4:return u=c.sent(),[3,3];case 5:return[3,7];case 6:return c.sent(),[3,7];case 7:return[2]}})}).call(this)}},{key:"getDatabaseSize",value:function(e){return D(function(){var t,n,r;return C(this,function(o){switch(o.label){case 0:return[4,this.dbPromise];case 1:return t=o.sent(),n=null==t?void 0:t.transaction(e,"readonly"),[2,(null==(r=null==n?void 0:n.store)?void 0:r.count())||0]}})}).call(this)}},{key:"getByType",value:function(e){return D(function(e){var t,n,r,o,i,a,u,c=arguments;return C(this,function(s){switch(s.label){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:L.cache,[4,this.dbPromise];case 1:return(n=s.sent())?(r=n.transaction(t,"readonly"),o=r.store,i=o.index("type"),a=[],[4,i.openCursor(IDBKeyRange.only(e))]):[2,[]];case 2:u=s.sent(),s.label=3;case 3:return u?(a.push(u.value.data),[4,u.continue()]):[3,5];case 4:return u=s.sent(),[3,3];case 5:return[2,a]}})}).apply(this,arguments)}},{key:"deleteByType",value:function(e){return D(function(e){var t,n,r,o,i,a=arguments;return C(this,function(u){switch(u.label){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:L.cache,[4,this.dbPromise];case 1:return(n=u.sent())?(r=n.transaction(t,"readwrite"),[4,(o=r.store).index("type").openKeyCursor(IDBKeyRange.only(e))]):[2];case 2:i=u.sent(),u.label=3;case 3:return i?(o.delete(i.primaryKey),[4,i.continue()]):[3,5];case 4:return i=u.sent(),[3,3];case 5:return[4,r.done];case 6:return u.sent(),[2]}})}).apply(this,arguments)}}],n&&j(t.prototype,n),r&&j(t,r),e}();function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function G(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){U(i,r,o,a,u,"next",e)}function u(e){U(i,r,o,a,u,"throw",e)}a(void 0)})}}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var z=new Map,H=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=!0,(n="isAvailable")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:"get",value:function(e){return G(function(){return $(this,function(t){return[2,z.get(e)]})})()}},{key:"set",value:function(e,t){return G(function(){return $(this,function(n){switch(n.label){case 0:return[4,z.set(e,t)];case 1:return n.sent(),[2]}})})()}},{key:"delete",value:function(e){return G(function(){return $(this,function(t){switch(t.label){case 0:return[4,z.delete(e)];case 1:return t.sent(),[2]}})})()}},{key:"clear",value:function(){return G(function(){return $(this,function(e){switch(e.label){case 0:return[4,z.clear()];case 1:return e.sent(),[2]}})})()}},{key:"getDatabaseSize",value:function(){return G(function(){return $(this,function(e){return[2,z.size]})})()}},{key:"deleteByType",value:function(e){return G(function(){var t,n,r,o,i,a,u;return $(this,function(c){t=!0,n=!1,r=void 0;try{for(o=z.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)a=W(i.value,2),u=a[0],a[1].type===e&&z.delete(u)}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return[2]})})()}},{key:"getByType",value:function(e){return G(function(){var t,n,r,o,i,a,u,c;return $(this,function(s){t=[],n=!0,r=!1,o=void 0;try{for(i=z.entries()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)u=W(a.value,2),c=u[0],u[1].type===e&&t.push(c)}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return[2,t]})})()}}])&&B(t.prototype,n),r&&B(t,r),e}();function V(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function q(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var K={log:function(){},info:function(){},warn:function(){},error:function(){}},X=function(e){return(t=function(){var t,n,r,o;return q(this,function(i){return t=e.log,n=e.info,r=e.warn,o=e.error,K.log=t,K.info=n,K.warn=r,K.error=o,[2]})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){V(i,r,o,a,u,"next",e)}function u(e){V(i,r,o,a,u,"throw",e)}a(void 0)})})();var t},Y=function(e,t,n){if("number"!=typeof n||n<=0)throw new Error("timedPromise: Encountered invalid timeout value. Got ".concat(n));return new Promise(function(r,o){var i=setTimeout(function(){r({timedOut:!0,value:t})},n);e.then(function(e){clearTimeout(i),r({timedOut:!1,value:e})}).catch(function(e){clearTimeout(i),o(e)})})};function J(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Q(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){J(i,r,o,a,u,"next",e)}function u(e){J(i,r,o,a,u,"throw",e)}a(void 0)})}}function Z(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var ee=L.correctedSentences,te=Q(function(){var e,t,n;return Z(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=new M,t=e.dbPromise,[4,Y(t,null,3e3)];case 1:return n=r.sent(),e.isAvailable&&n.value?(e.deleteOldData(ee),[2,e]):[3,3];case 2:return r.sent(),[3,3];case 3:return[2,new H]}})})(),ne={get:function(e){return Q(function(){var t,n,r,o,i,a,u,c;return Z(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,te.then(function(t){return t.get(e,ee)})];case 1:if(!(t=s.sent()))return[2,void 0];if(n="string"==typeof t?JSON.parse(t):t,r=n.value,o=n.expireAt,"string"==typeof r)try{i=JSON.parse(r),r=i}catch(e){}return o?(a=(new Date).getTime(),u=new Date(o).getTime(),a>u?[4,te.then(function(t){return t.delete(e,ee)})]:[3,3]):[2,r];case 2:return s.sent(),[2,void 0];case 3:return[2,r];case 4:return c=s.sent(),K.error(c),[2,void 0];case 5:return[2]}})})()},set:function(e,t,n){return Q(function(){var r,o;return Z(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r=n?new Date((new Date).getTime()+n).toISOString():void 0,[4,te.then(function(n){return n.set(e,{expireAt:r,value:t},ee)})];case 1:return i.sent(),[3,3];case 2:return o=i.sent(),K.error(o),[2,void 0];case 3:return[2]}})})()},delete:function(e){return Q(function(){var t;return Z(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,te.then(function(t){return t.delete(e,ee)})];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),K.error(t),[2,void 0];case 3:return[2]}})})()},getDatabaseSize:function(){return Q(function(){var e;return Z(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,te.then(function(e){var t;return(null===(t=e.getDatabaseSize)||void 0===t?void 0:t.call(e,ee))||0})];case 1:return[2,t.sent()];case 2:return e=t.sent(),K.error(e),[2,0];case 3:return[2]}})})()}},re=function(e){return Q(function(){return Z(this,function(t){return te=Promise.resolve(e),[2]})})()};function oe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ie(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){oe(i,r,o,a,u,"next",e)}function u(e){oe(i,r,o,a,u,"throw",e)}a(void 0)})}}function ae(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var ue=L.lockedRecommendationMapping,ce=ie(function(){var e,t,n;return ae(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=new M,t=e.dbPromise,[4,Y(t,null,3e3)];case 1:return n=r.sent(),e.isAvailable&&n.value?(e.deleteOldData(ue),[2,e]):[3,3];case 2:return r.sent(),[3,3];case 3:return[2,new H]}})})(),se=function(e){return ie(function(){var t,n,r,o,i,a;return ae(this,function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),[4,ce.then(function(t){return t.get(e,ue)})];case 1:return(t=u.sent())?(n=t.value,(r=t.expireAt)?(o=(new Date).getTime(),i=new Date(r).getTime(),o>i?[4,ce.then(function(t){return t.delete(e,ue)})]:[3,3]):[2,n]):[2,void 0];case 2:return u.sent(),[2,void 0];case 3:return[2,n];case 4:return a=u.sent(),K.error(a),[2,void 0];case 5:return[2]}})})()},le=function(e,t,n){return ie(function(){var r,o;return ae(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r=n?new Date((new Date).getTime()+n).toISOString():void 0,[4,ce.then(function(n){return n.set(e,{expireAt:r,value:t},ue)})];case 1:return i.sent(),[3,3];case 2:return o=i.sent(),K.error(o),[2,void 0];case 3:return[2]}})})()};function fe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function he(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){fe(i,r,o,a,u,"next",e)}function u(e){fe(i,r,o,a,u,"throw",e)}a(void 0)})}}function de(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var pe=L.cache,ve=he(function(){var e,t,n;return de(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=new M,t=e.dbPromise,[4,Y(t,null,3e3)];case 1:return n=r.sent(),e.isAvailable&&n.value?(e.deleteOldData(pe),[2,e]):[3,3];case 2:return r.sent(),[3,3];case 3:return[2,new H]}})})(),ye=function(e){return he(function(){var t,n,r,o,i,a,u,c;return de(this,function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,ve.then(function(t){return t.get(e,pe)})];case 1:if(!(t=s.sent()))return[2,void 0];if(n="string"==typeof t?JSON.parse(t):t,r=n.value,o=n.expireAt,"string"==typeof r)try{i=JSON.parse(r),r=i}catch(e){}return o?(a=(new Date).getTime(),u=new Date(o).getTime(),a>u?[4,ve.then(function(t){return t.delete(e,pe)})]:[3,3]):[2,r];case 2:return s.sent(),[2,void 0];case 3:return[2,r];case 4:return c=s.sent(),K.error(c),[2,void 0];case 5:return[2]}})})()},me=function(e,t,n){return he(function(){var r,o;return de(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),r=n?new Date((new Date).getTime()+n).toISOString():void 0,[4,ve.then(function(n){return n.set(e,{expireAt:r,value:t},pe)})];case 1:return i.sent(),[3,3];case 2:return o=i.sent(),K.error(o),[2,void 0];case 3:return[2]}})})()},be=function(e){return he(function(){var t;return de(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ve.then(function(t){return t.delete(e,pe)})];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),K.error(t),[2,void 0];case 3:return[2]}})})()},ge=function(e){return he(function(){var t;return de(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ve.then(function(t){return he(function(){return de(this,function(n){switch(n.label){case 0:return t.deleteByType?[4,t.deleteByType(e,pe)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})()})];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),K.error(t),[2,void 0];case 3:return[2]}})})()},_e=function(e){return he(function(){return de(this,function(t){return ve=Promise.resolve(e),re(e),function(e){ie(function(){return ae(this,function(t){return ce=Promise.resolve(e),[2]})})()}(e),[2]})})()},we=function(e){return he(function(){return de(this,function(t){switch(t.label){case 0:return[4,ge(e)];case 1:return t.sent(),[2]}})})()},Ee={timeout:1e4,cacheDuration:864e6,retry:{limit:3}},Oe={timeout:1e4,retry:{limit:0,statusCodes:[400]},batch:4,cacheDuration:864e6,shortCircuit:{textUpperLimit:3e4,textLowerLimit:3}},Se={timeout:1e4,retry:{limit:0},cacheDuration:864e6},ke={timeout:1e4,retry:{limit:0},cacheDuration:864e6},Pe={timeout:1e4,retry:{limit:0},cacheDuration:864e6},Te={timeout:1e4,cacheDuration:864e6,retry:{limit:0}},xe={timeout:1e4,cacheDuration:864e6,retry:{limit:0}},Ie={COPY_DOCUMENT:{cacheDuration:0,endpoint:"api/docupine/documents/<DOC_ID>/copy",retry:{limit:0},timeout:3e3},CREATE_DOCUMENT:{cacheDuration:0,endpoint:"api/docupine/documents",retry:{limit:1},timeout:3e3},DELETE_DOCUMENT:{cacheDuration:0,endpoint:"api/docupine/documents/<DOC_ID>",retry:{limit:2},timeout:1e3},GET_ALL_DOCUMENTS:{cacheDuration:0,endpoint:"api/docupine/documents",retry:{limit:0},timeout:3e3},GET_DOCUMENT_BY_ID:{cacheDuration:0,endpoint:"api/docupine/documents/<DOC_ID>",retry:{limit:2},timeout:3e3},UPDATE_DOCUMENT_BY_ID:{cacheDuration:0,endpoint:"api/docupine/documents/<DOC_ID>",retry:{limit:0},timeout:3e3},UPDATE_DOCUMENT_CONTENT:{cacheDuration:0,endpoint:"api/docupine/documents/<DOC_ID>/content",retry:{limit:0},timeout:3e3}},De={timeout:1e4,retry:{limit:0},cacheDuration:864e6},je={timeout:1e4,cacheDuration:36e5,retry:{limit:0}},Ae=function(e){return{text:e,fixed:e,content_to_replace:[],explainer:[],modelID:null,timedOut:!1}},Ce={PPHR_ACADEMIC:"INTERNAL_PARAPHRASE",PPHR_NATURAL:"INTERNAL_PARAPHRASE",PPHR_CREATIVE:"INTERNAL_PARAPHRASE",PPHR_FORMAL:"INTERNAL_PARAPHRASE",PPHR_SIMPLIFY:"INTERNAL_PARAPHRASE",PPHR_EXPAND:"INTERNAL_PARAPHRASE",PPHR_SHORTEN:"INTERNAL_PARAPHRASE",GEN_SECTION:"EXTERNAL_GENERATIVE",GEN_IDEA:"EXTERNAL_GENERATIVE",GEN_OPPOSING_VIEW:"EXTERNAL_GENERATIVE",GEN_EXPLANATION:"EXTERNAL_GENERATIVE",GEN_CONCLUSION:"EXTERNAL_GENERATIVE",REWRITE_IMPROVE:"EXTERNAL_PARAPHRASE",CUSTOM:"EXTERNAL_CUSTOM"};function Re(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ne(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Re(i,r,o,a,u,"next",e)}function u(e){Re(i,r,o,a,u,"throw",e)}a(void 0)})}}function Le(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Me=function(e){return function(t,n){return Ne(function(){var r,o,i,a,u,c,s;return Le(this,function(l){switch(l.label){case 0:a=null!==(i=null!==(o=null==n||null===(r=n.retry)||void 0===r?void 0:r.limit)&&void 0!==o?o:Ee.retry.limit)&&void 0!==i?i:1,u=0,c=null,l.label=1;case 1:if(!(u<=a))return[3,6];l.label=2;case 2:return l.trys.push([2,4,,5]),u>0&&(n.headers=n.headers||{},n.headers["qb-retry"]=u.toString()),[4,e(t,n)];case 3:return[2,l.sent()];case 4:return s=l.sent(),c=s,K.error("Attempt ".concat(u+1," failed: ").concat(s)),[3,5];case 5:return u++,[3,1];case 6:throw c}})})()}},Fe={request:Me(function(e,t){return Ne(function(){return Le(this,function(e){throw new Error("HTTP Client is not set")})})()})},Ue=function(e){return Ne(function(){return Le(this,function(t){return Fe.request=Me(e),[2]})})()};function Ge(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var ze={},He={},Ve=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),We(this,"_maxConcurrentRequests",3),We(this,"_inFlight",0),We(this,"_queue",[])}var t,n,r;return t=e,n=[{key:"fetch",value:function(e){return(t=function(){var t;return $e(this,function(n){return t=this,[2,new Promise(function(n,r){t._queue.push({params:e,resolve:n,reject:r}),t._processQueue()})]})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){Ge(i,r,o,a,u,"next",e)}function u(e){Ge(i,r,o,a,u,"throw",e)}a(void 0)})}).call(this);var t}},{key:"_processQueue",value:function(){for(var e,t=function(){var t=e._queue.shift(),r=t.params,o=t.resolve,i=t.reject,a=r.url,u=r.options,c=r.requestFn;e._inFlight++;var s=JSON.stringify({url:a,options:u});He[s]||(He[s]=c(a,u)),He[s].then(function(e){n._inFlight--,o(e),n._processQueue()}).catch(function(e){n._inFlight--,i(e),n._processQueue()}).finally(function(){delete He[s]})},n=this;this._inFlight<this._maxConcurrentRequests&&this._queue.length>0;)e=this,t()}}],r=[{key:"getInstance",value:function(t,n){return ze[t]=ze[t]||new e,ze[t]._maxConcurrentRequests=n,ze[t]}}],n&&Be(t.prototype,n),r&&Be(t,r),e}(),qe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ke=Object.prototype;var Xe=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ke)};var Ye=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Je=Xe,Qe=Ye,Ze=Object.prototype.hasOwnProperty;var et=function(e){if(!Je(e))return Qe(e);var t=[];for(var n in Object(e))Ze.call(e,n)&&"constructor"!=n&&t.push(n);return t},tt="object"==typeof qe&&qe&&qe.Object===Object&&qe,nt=tt,rt="object"==typeof self&&self&&self.Object===Object&&self,ot=nt||rt||Function("return this")(),it=ot.Symbol,at=it,ut=Object.prototype,ct=ut.hasOwnProperty,st=ut.toString,lt=at?at.toStringTag:void 0;var ft=function(e){var t=ct.call(e,lt),n=e[lt];try{e[lt]=void 0;var r=!0}catch(e){}var o=st.call(e);return r&&(t?e[lt]=n:delete e[lt]),o},ht=Object.prototype.toString;var dt=function(e){return ht.call(e)},pt=ft,vt=dt,yt=it?it.toStringTag:void 0;var mt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yt&&yt in Object(e)?pt(e):vt(e)};var bt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},gt=mt,_t=bt;var wt,Et=function(e){if(!_t(e))return!1;var t=gt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ot=ot["__core-js_shared__"],St=(wt=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+wt:"";var kt=function(e){return!!St&&St in e},Pt=Function.prototype.toString;var Tt=function(e){if(null!=e){try{return Pt.call(e)}catch(e){}try{return e+""}catch(e){}}return""},xt=Et,It=kt,Dt=bt,jt=Tt,At=/^\[object .+?Constructor\]$/,Ct=Function.prototype,Rt=Object.prototype,Nt=Ct.toString,Lt=Rt.hasOwnProperty,Mt=RegExp("^"+Nt.call(Lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ft=function(e){return!(!Dt(e)||It(e))&&(xt(e)?Mt:At).test(jt(e))};var Ut=function(e,t){return null==e?void 0:e[t]},Gt=Ft,Bt=Ut;var Wt=function(e,t){var n=Bt(e,t);return Gt(n)?n:void 0},$t=Wt(ot,"DataView"),zt=Wt(ot,"Map"),Ht=Wt(ot,"Promise"),Vt=Wt(ot,"Set"),qt=Wt(ot,"WeakMap"),Kt=mt,Xt=Tt,Yt="[object Map]",Jt="[object Promise]",Qt="[object Set]",Zt="[object WeakMap]",en="[object DataView]",tn=Xt($t),nn=Xt(zt),rn=Xt(Ht),on=Xt(Vt),an=Xt(qt),un=Kt;($t&&un(new $t(new ArrayBuffer(1)))!=en||zt&&un(new zt)!=Yt||Ht&&un(Ht.resolve())!=Jt||Vt&&un(new Vt)!=Qt||qt&&un(new qt)!=Zt)&&(un=function(e){var t=Kt(e),n="[object Object]"==t?e.constructor:void 0,r=n?Xt(n):"";if(r)switch(r){case tn:return en;case nn:return Yt;case rn:return Jt;case on:return Qt;case an:return Zt}return t});var cn=un;var sn=function(e){return null!=e&&"object"==typeof e},ln=mt,fn=sn;var hn=function(e){return fn(e)&&"[object Arguments]"==ln(e)},dn=hn,pn=sn,vn=Object.prototype,yn=vn.hasOwnProperty,mn=vn.propertyIsEnumerable,bn=dn(function(){return arguments}())?dn:function(e){return pn(e)&&yn.call(e,"callee")&&!mn.call(e,"callee")},gn=bn,_n=Array.isArray;var wn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},En=Et,On=wn;var Sn=function(e){return null!=e&&On(e.length)&&!En(e)},kn={exports:{}};var Pn=function(){return!1};!function(e,t){var n=ot,r=Pn,o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o?n.Buffer:void 0,u=(a?a.isBuffer:void 0)||r;e.exports=u}(kn,kn.exports);var Tn=mt,xn=wn,In=sn,Dn={};Dn["[object Float32Array]"]=Dn["[object Float64Array]"]=Dn["[object Int8Array]"]=Dn["[object Int16Array]"]=Dn["[object Int32Array]"]=Dn["[object Uint8Array]"]=Dn["[object Uint8ClampedArray]"]=Dn["[object Uint16Array]"]=Dn["[object Uint32Array]"]=!0,Dn["[object Arguments]"]=Dn["[object Array]"]=Dn["[object ArrayBuffer]"]=Dn["[object Boolean]"]=Dn["[object DataView]"]=Dn["[object Date]"]=Dn["[object Error]"]=Dn["[object Function]"]=Dn["[object Map]"]=Dn["[object Number]"]=Dn["[object Object]"]=Dn["[object RegExp]"]=Dn["[object Set]"]=Dn["[object String]"]=Dn["[object WeakMap]"]=!1;var jn=function(e){return In(e)&&xn(e.length)&&!!Dn[Tn(e)]};var An=function(e){return function(t){return e(t)}},Cn={exports:{}};!function(e,t){var n=tt,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,i=o&&o.exports===r&&n.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}(Cn,Cn.exports);var Rn=jn,Nn=An,Ln=Cn.exports,Mn=Ln&&Ln.isTypedArray,Fn=Mn?Nn(Mn):Rn,Un=et,Gn=cn,Bn=gn,Wn=_n,$n=Sn,zn=kn.exports,Hn=Xe,Vn=Fn,qn=Object.prototype.hasOwnProperty;var Kn=function(e){if(null==e)return!0;if($n(e)&&(Wn(e)||"string"==typeof e||"function"==typeof e.splice||zn(e)||Vn(e)||Bn(e)))return!e.length;var t=Gn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Hn(e))return!Un(e).length;for(var n in e)if(qn.call(e,n))return!1;return!0};function Xn(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Yn(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function Jn(e){return(t=function(){var t,n,r;return Yn(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=new TextEncoder,n=t.encode(e),[4,crypto.subtle.digest("SHA-256",n)];case 1:return r=o.sent(),[2,Array.from(new Uint8Array(r)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")];case 2:return o.sent(),[2,""];case 3:return[2]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){Xn(i,r,o,a,u,"next",e)}function u(e){Xn(i,r,o,a,u,"throw",e)}a(void 0)})})();var t}function Qn(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Zn(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}function er(e,t){return(n=function(){var n,r,o,i,a,u,c,s,l,f,h,d,p,v;return Zn(this,function(y){switch(y.label){case 0:y.trys.push([0,16,,17]),n=!0,r=!1,o=void 0,y.label=1;case 1:y.trys.push([1,13,14,15]),i=e.recommendations[Symbol.iterator](),y.label=2;case 2:if(n=(a=i.next()).done)return[3,12];u=a.value,c=!0,s=!1,l=void 0,y.label=3;case 3:y.trys.push([3,9,10,11]),f=u.phrases[Symbol.iterator](),y.label=4;case 4:return(c=(h=f.next()).done)?[3,8]:(d=h.value,p=d.text,d.isLocked&&p?[4,se(p)]:[3,7]);case 5:return y.sent()?[3,7]:[4,le(p,{data:{recommendationCacheKey:t}},864e6)];case 6:y.sent(),y.label=7;case 7:return c=!0,[3,4];case 8:return[3,11];case 9:return v=y.sent(),s=!0,l=v,[3,11];case 10:try{c||null==f.return||f.return()}finally{if(s)throw l}return[7];case 11:return n=!0,[3,2];case 12:return[3,15];case 13:return v=y.sent(),r=!0,o=v,[3,15];case 14:try{n||null==i.return||i.return()}finally{if(r)throw o}return[7];case 15:return[3,17];case 16:return y.sent(),[3,17];case 17:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){Qn(i,r,o,a,u,"next",e)}function u(e){Qn(i,r,o,a,u,"throw",e)}a(void 0)})})();var n}function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nr(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function rr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){nr(i,r,o,a,u,"next",e)}function u(e){nr(i,r,o,a,u,"throw",e)}a(void 0)})}}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){or(e,t,n[t])})}return e}function ar(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function ur(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function cr(e){return function(e){if(Array.isArray(e))return tr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var lr=function(e,t){var n="true"===h.get("IS_PREMIUM_USER")?"premium":"",r=fr(),o=t.cacheSuffix||"";t.requestId,t.batch,t.maxConcurrentRequests,t.cacheDuration,t.timeout,t.retry;var i,a=ur(t,["requestId","batch","maxConcurrentRequests","cacheDuration","timeout","retry"]),u=t.headers,c=void 0===u?{}:u;delete a.headers;var s,l,f=null!==(i=c["platform-type"])&&void 0!==i?i:"",d=null!==(s=c["qb-dialect"])&&void 0!==s?s:"",p=null!==(l=c["qb-Product"])&&void 0!==l?l:"";return e+t.method+r+n+o+f+d+p+JSON.stringify(a)},fr=function(){var e=h.get("USER_ID_TOKEN");return(null==e?void 0:e.length)>0&&"empty-token"!==e},hr=function(e,t){var n,r="true"===h.get("IS_PREMIUM_USER"),o=fr();return!r&&o&&function(e){return e.includes("api/utils/recommendation")&&!e.includes("utils/recommendations-list")}(e)&&(null==t||null===(n=t.recommendations)||void 0===n?void 0:n.length)>0},dr=function(e,t){return rr(function(){var n,r,o,i,a,u,c,s,l,f,h,d,p,v;return sr(this,function(y){switch(y.label){case 0:if(i=!1,"text"!==t.batchKey)return[3,5];y.label=1;case 1:return y.trys.push([1,4,,5]),[4,Jn((null==t||null===(c=t.json)||void 0===c||null===(u=c.text)||void 0===u||null===(a=u.text)||void 0===a?void 0:a.trim())||"")];case 2:return s=y.sent(),[4,ne.get(s)];case 3:return i=void 0!==y.sent(),[3,5];case 4:return y.sent(),i=!1,[3,5];case 5:return i?[2,{fixed:null==t||null===(f=t.json)||void 0===f||null===(l=f.text)||void 0===l?void 0:l.text,text:null==t||null===(d=t.json)||void 0===d||null===(h=d.text)||void 0===h?void 0:h.text,contentToReplace:[],timedOut:!1,modelID:"",_cached:!0}]:"api/utils/grammar-check"===e&&0===(null==t||null===(o=t.json)||void 0===o||null===(r=o.text)||void 0===r||null===(n=r.text)||void 0===n?void 0:n.trim().length)?[2,Ae(t.json.text)]:(p=t.cacheKey?t.cacheKey:lr(e,t),[4,ye(p)]);case 6:return(v=y.sent())?(hr(e,v)&&er(v,p),[2,v]):[2]}})})()},pr=function(e,t){var n;if(0===(null==e||null===(n=e.recommendations)||void 0===n?void 0:n.length))return i.recommendationNone;if(t)return i.recommendationPremium;var r=!1,o=!1,a=!0,u=!1,c=void 0;try{for(var s,l=e.recommendations[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){s.value.phrases.forEach(function(e){e.isLocked?r=!0:void 0!==e.isLocked&&null!==e.isLocked||""!==e.text||(o=!0)})}}catch(e){u=!0,c=e}finally{try{a||null==l.return||l.return()}finally{if(u)throw c}}return o?i.recommendationUpsell:r?i.recommendationLocked:i.recommendationPremium},vr=function(e,t,n){var r=e.split("?")[0].replace(/^api\/[^/]+\//,"");return"recommendation"===r?pr(n,t):r},yr=function(e,t,n){return rr(function(){var r,o,i,a,u;return sr(this,function(c){switch(c.label){case 0:return(r=(null==t?void 0:t.cacheDuration)||0)&&["get","post"].includes((null==t?void 0:t.method)||"")?(o=t.cacheKey?t.cacheKey:lr(e,t),[4,ye(o)]):[3,3];case 1:return i=c.sent(),hr(e,n)&&er(n,o),i?[3,3]:(a=ar(ir({},n),{_cached:!0}),Kn(a)?[3,3]:(u="true"===h.get("IS_PREMIUM_USER"),a=ar(ir({},a),{type:vr(e,u,a)}),[4,me(o,a,r)]));case 2:c.sent(),c.label=3;case 3:return[2]}})})()},mr=function(e,t,n){return rr(function(){var r,o,i,a,u,c,s,l,f,h,d,p,v,y,m,b,g,_,w,E,O,S,k,P,T,x,I;return sr(this,function(D){switch(D.label){case 0:o=null!==(r=null==t?void 0:t.json)&&void 0!==r?r:{},a=null!==(i=o[n])&&void 0!==i?i:[],u=function(e){return e.includes("api/utils/grammar-check")?"sentences":e.includes("api/utils/recommendation")?"data":e.includes("api/utils/fluency-score")||e.includes("api/utils/clarity-score")||e.includes("api/utils/quality-score")?"scores":""}(e),c=[],s=[],l={},f=0,D.label=1;case 1:return f<a.length?(h=a[f],d=ar(ir({},o),or({},n,h)),p=void 0,!0===t.skipCacheCheck?[3,3]:[4,dr(e,ar(ir({},t),{json:d}))]):[3,5];case 2:p=D.sent(),D.label=3;case 3:p?c[f]=p:(s.push(h),l[s.length-1]=f),D.label=4;case 4:return f++,[3,1];case 5:if(0===s.length)return[2,or({},u,c)];for(v=t.batch,y=void 0===v?4:v,m=[],b=0;b<s.length;b+=y)m.push(s.slice(b,b+y));return g=Ve.getInstance("".concat(e,"-").concat(n),(null==t?void 0:t.maxConcurrentRequests)||2),_=m.map(function(r){var i=ar(ir({},o),or({},n,r));return g.fetch({url:e,options:ar(ir({},t),{json:i,batchKey:void 0,batch:void 0}),requestFn:Fe.request})}),[4,Promise.allSettled(_)];case 6:w=D.sent(),E=[],w.forEach(function(t,n){if("rejected"===t.status)E=cr(E).concat(cr(m[n].map(function(e,t){return ir({},e)})));else{var r=function(e,t){var n,r,o,i,a,u;return t.includes("api/utils/grammar-check")?null==e||null===(r=e.value)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.sentences:t.includes("api/utils/recommendation")?null==e||null===(o=e.value)||void 0===o?void 0:o.data:t.includes("api/utils/fluency-score")||t.includes("api/utils/clarity-score")||t.includes("api/utils/quality-score")?null==e||null===(a=e.value)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.scores:null==e||null===(u=e.value)||void 0===u?void 0:u.data}(t,e);if(Kn(r))E=cr(E).concat(cr(m[n].map(function(e,t){return ir({},e)})));else{var o=r.map(function(e,t){return e||ir({},m[n][t])});E=cr(E).concat(cr(o))}}}),O=E,S=0,D.label=7;case 7:return S<O.length?(k=O[S],P=function(e,t){return t.includes("api/utils/grammar-check")?e&&e.contentToReplace&&!e.timedOut:t.includes("api/utils/recommendation")?e&&e.recommendations&&!e.error:t.includes("api/utils/fluency-score")||t.includes("api/utils/clarity-score")||t.includes("api/utils/quality-score")?e&&null!==e.score&&e.score>=0:e&&!e.timedOut}(k,e),P?(T=ar(ir({},o),or({},n,a[l[S]])),x=ar(ir({},t),{json:T}),I=void 0,!0===t.skipCacheStorage?[3,9]:[4,yr(e,x,k)]):[3,10]):[3,12];case 8:I=D.sent(),D.label=9;case 9:return c[l[S]]=I||k,[3,11];case 10:c[l[S]]=k,D.label=11;case 11:return S++,[3,7];case 12:return[2,or({},u,c)]}})})()},br=function(e,t){return rr(function(){var n,r,o,i;return sr(this,function(a){switch(a.label){case 0:return(n=t.batchKey)?[4,mr(e,t,n)]:[3,2];case 1:return[2,a.sent()];case 2:return!0===t.skipCacheCheck?[3,4]:[4,dr(e,t)];case 3:if(r=a.sent())return[2,r];a.label=4;case 4:return[4,Fe.request(e,t)];case 5:return o=a.sent(),!0===t.skipCacheStorage?[3,7]:[4,yr(e,t,o)];case 6:i=a.sent(),a.label=7;case 7:return i?[2,i]:[2,o]}})})()};function gr(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function _r(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){gr(i,r,o,a,u,"next",e)}function u(e){gr(i,r,o,a,u,"throw",e)}a(void 0)})}}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){wr(e,t,n[t])})}return e}function Or(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Sr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var kr=function(){var e,t="";"undefined"!=typeof navigator&&(t=null===(e=navigator)||void 0===e?void 0:e.language);return{"qb-dialect":"".concat((h.get("INPUT_LANGUAGE")||"en").toLowerCase(),"-").concat((h.get("REGIONAL_LANGUAGE")||"us").toLowerCase()),"platform-type":"".concat((h.get("PLATFORM_TYPE")||"").toLowerCase()),"x-device-language":t}},Pr={post:function(e,t){return _r(function(){var n,r;return Sr(this,function(o){return n=Ve.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||2),r=t.headers,[2,n.fetch({url:e,options:Or(Er({},t),{method:"post",headers:Er({},kr(),r)}),requestFn:br})]})})()},get:function(e,t){return _r(function(){var n,r;return Sr(this,function(o){return n=Ve.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||2),r=t.headers,[2,n.fetch({url:e,options:Or(Er({},t),{method:"get",headers:Er({},r,kr())}),requestFn:br})]})})()},delete:function(e,t){return _r(function(){var n,r;return Sr(this,function(o){return n=Ve.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||2),r=t.headers,[2,n.fetch({url:e,options:Or(Er({},t),{method:"delete",headers:Er({},r,kr())}),requestFn:br})]})})()},patch:function(e,t){return _r(function(){var n,r;return Sr(this,function(o){return n=Ve.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||2),r=t.headers,[2,n.fetch({url:e,options:Or(Er({},t),{method:"patch",headers:Er({},kr(),r)}),requestFn:br})]})})()},put:function(e,t){return _r(function(){var n,r;return Sr(this,function(o){return n=Ve.getInstance(e,(null==t?void 0:t.maxConcurrentRequests)||2),r=t.headers,[2,n.fetch({url:e,options:Or(Er({},t),{method:"put",headers:Er({},kr(),r)}),requestFn:br})]})})()}};function Tr(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function xr(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()}function Ir(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Cr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jr(this,"_modelId",""),jr(this,"_skipReason",void 0),jr(this,"_apiResponse",{data:null,_cached:!1})}var t,n,r;return t=e,n=[{key:"modelId",get:function(){return this._modelId}},{key:"isSkipped",get:function(){return Boolean(this._skipReason)}},{key:"skipReason",get:function(){return this._skipReason}},{key:"apiResponse",get:function(){return this._apiResponse}},{key:"isCached",get:function(){return this._apiResponse._cached||!1}},{key:"_skipLoad",value:function(e,t){return(n=function(){return Ar(this,function(n){switch(n.label){case 0:return this._skipReason=e,t?[4,t()]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){Ir(i,r,o,a,u,"next",e)}function u(e){Ir(i,r,o,a,u,"throw",e)}a(void 0)})}).call(this);var n}}],n&&Dr(t.prototype,n),r&&Dr(t,r),e}();function Rr(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Nr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Rr(i,r,o,a,u,"next",e)}function u(e){Rr(i,r,o,a,u,"throw",e)}a(void 0)})}}function Lr(e,t,n){return t=Ur(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$r()?Reflect.construct(t,n||[],Ur(e).constructor):t.apply(e,n))}function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ur(e){return Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ur(e)}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Fr(e,t,n[t])})}return e}function Br(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Wr(e,t){return Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wr(e,t)}function $r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return($r=function(){return!!e})()}function zr(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Hr=function(e){function t(e,n){var r,o=e.command,i=e.variantsCount,a=e.texts,u=e.customCommandInput,c=e.attemptCount;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fr(r=Lr(this,t),"_command",void 0),Fr(r,"_texts",void 0),Fr(r,"_attemptCount",void 0),Fr(r,"_customCommandInput",void 0),Fr(r,"_variantsCount",void 0),Fr(r,"_suggestions",[]),Fr(r,"_usageLeft",null),Fr(r,"_errorMessage",void 0),Fr(r,"_statusCode",200),Fr(r,"_utilization",{}),Fr(r,"_metaData",{}),r._command=o,r._variantsCount=i,r._texts=a,r._customCommandInput=u,r._attemptCount=c,r._metaData=n,r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(t,e),n=t,r=[{key:"suggestions",get:function(){return this._suggestions}},{key:"usageLeft",get:function(){return this._usageLeft}},{key:"errorMessage",get:function(){return this._errorMessage}},{key:"statusCode",get:function(){return this._statusCode}},{key:"utilization",get:function(){return this._utilization}},{key:"_isShortCircuit",value:function(){return Nr(function(){var e;return zr(this,function(t){return"CUSTOM"!==this._command||(null===(e=this._customCommandInput)||void 0===e?void 0:e.length)?[2,!1]:[2,!0]})}).call(this)}},{key:"_fallback",value:function(){this._errorMessage="Custom command input not found!"}},{key:"_beforeLoad",value:function(){return Nr(function(){return zr(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()?(this._skipLoad("shortCircuit",this._fallback.bind(this)),[2]):[2]}})}).call(this)}},{key:"truncateTextToMaxWords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";if(!e)return"";try{var n=e.trim().split(/\s+/);if("end"===t){var r=Math.max(0,n.length-75);return n.slice(r).join(" ")}return n.slice(0,75).join(" ")}catch(t){return e}}},{key:"processSelectedTexts",value:function(){var e=this;return this._texts&&0!==this._texts.length?this._texts.map(function(t){var n=t.pre,r=t.post,o=t.text;return{pre:e.truncateTextToMaxWords(n,"end"),text:o||"",post:e.truncateTextToMaxWords(r,"start")}}):[]}},{key:"_afterLoad",value:function(){return Nr(function(){var e,t,n,r,o,i;return zr(this,function(a){return i=null===(e=this._apiResponse)||void 0===e?void 0:e.data,this._modelId=null===(n=this._apiResponse)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.modelID,this._suggestions=(null==i||null===(r=i.suggestions)||void 0===r?void 0:r.map(function(e){return Br(Gr({},e),{id:xr()})}))||[],this._usageLeft=(null==i||null===(o=i.featureUsageData)||void 0===o?void 0:o.usageLeft)||0,this._utilization=function(e){var t={};try{!function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(n&&"object"===(void 0===n?"undefined":Tr(n)))for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var i=r?"".concat(r,".").concat(o):o;"object"===Tr(n[o])&&null!==n[o]?e(n[o],i):"number"==typeof n[o]&&(t[i]=n[o])}}(e)}catch(e){K.error(e)}return t}(null==i?void 0:i.utilization),[2]})}).call(this)}},{key:"_load",value:function(){return Nr(function(){var e,t,n,r,o,i,a,u,c,s,l,f;return zr(this,function(h){switch(h.label){case 0:return[4,this._beforeLoad()];case 1:if(h.sent(),this.isSkipped)return[2,this];h.label=2;case 2:return h.trys.push([2,5,,6]),n=Ce[this._command],o=(r=je).timeout,i=r.retry,a=r.cacheDuration,u=Br(Gr({command:this._command},this._variantsCount&&{variantsCount:this._variantsCount}),{customCommandInput:"CUSTOM"===this._command?this._customCommandInput:void 0,attemptCount:this._attemptCount}),this._texts&&this._texts.length>0&&(u.texts=this.processSelectedTexts()),"EXTERNAL_GENERATIVE"===n&&u.texts&&u.texts.length>0&&(u.texts=u.texts.map(function(e){return Br(Gr({},e),{post:""})})),"INTERNAL_PARAPHRASE"===n&&u.texts&&u.texts.length>0&&(u.texts=u.texts.map(function(e){return Br(Gr({},e),{pre:"",post:""})})),c=this,[4,Pr.post("api/write-assist/ai-command",Br(Gr({json:u,timeout:o,retry:i,cacheDuration:a},this._metaData.signal&&{signal:this._metaData.signal}),{headers:(null===(e=this._metaData)||void 0===e?void 0:e.headers)||{}}))];case 3:return c._apiResponse=h.sent(),(null===(t=this._apiResponse)||void 0===t?void 0:t.status)&&(this._statusCode=this._apiResponse.status),[4,this._afterLoad()];case 4:return h.sent(),[3,6];case 5:return s=h.sent(),K.error(s),"number"==typeof(null==s||null===(l=s.data)||void 0===l?void 0:l.usageLeft)&&(this._usageLeft=(null==s||null===(f=s.data)||void 0===f?void 0:f.usageLeft)||0),this._statusCode=null==s?void 0:s.status,this._errorMessage=s.message||"Something went wrong!",this._skipLoad("apiError"),[3,6];case 6:return[2,this]}})}).call(this)}}],o=[{key:"getInstance",value:function(e,n){return Nr(function(){return zr(this,function(r){switch(r.label){case 0:return[4,new t(e,n)._load()];case 1:return[2,r.sent()]}})})()}}],r&&Mr(n.prototype,r),o&&Mr(n,o),t}(Cr);function Vr(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function qr(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Vr(i,r,o,a,u,"next",e)}function u(e){Vr(i,r,o,a,u,"throw",e)}a(void 0)})}}function Kr(e,t,n){return t=Jr(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,eo()?Reflect.construct(t,n||[],Jr(e).constructor):t.apply(e,n))}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jr(e){return Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jr(e)}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Yr(e,t,n[t])})}return e}function Zr(e,t){return Zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zr(e,t)}function eo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eo=function(){return!!e})()}function to(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var no=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yr(r=Kr(this,t),"_option",void 0),Yr(r,"_correctedSentences",[]),Yr(r,"_isFallback",!1),Yr(r,"_metaData",{batch:1,headers:{}}),r._option=e,r._metaData=n,r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zr(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e,n){return qr(function(){return to(this,function(r){switch(r.label){case 0:return[4,new t(e,n)._load()];case 1:return[2,r.sent()]}})})()}}],(r=[{key:"correctedSentences",get:function(){return this._correctedSentences}},{key:"isFallback",get:function(){return this._isFallback}},{key:"_fallback",value:function(){this._isFallback=!1}},{key:"_isShortCircuit",value:function(){var e;return 0===(null===(e=this._option.text)||void 0===e?void 0:e.length)}},{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_afterLoad",value:function(){return qr(function(){return to(this,function(e){return this._correctedSentences=this._apiResponse.sentences,[2]})}).call(this)}},{key:"_load",value:function(){return qr(function(){var e,t,n,r,o,i,a,u,c,s,l;return to(this,function(f){switch(f.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];t=(e=Oe).timeout,n=e.retry,r=e.cacheDuration,o=Oe.batch,this._metaData.batch&&(o=this._metaData.batch),f.label=1;case 1:return f.trys.push([1,5,,6]),a=this,u=Pr.post,c=["api/utils/grammar-check"],s={json:Qr({},this._option),headers:(null===(i=this._metaData)||void 0===i?void 0:i.headers)||{},batchKey:"text",timeout:t,retry:n,cacheDuration:r,batch:o},[4,h.get("IS_PREMIUM_USER")];case 2:return s.maxConcurrentRequests="true"===f.sent()?10:8,[4,h.get("PERSONALISATION_UPDATED_AT")];case 3:return[4,u.apply(Pr,c.concat([Qr.apply(void 0,[(s.cacheSuffix=f.sent(),s.requestId=this._metaData.requestId,s),this._metaData.signal&&{signal:this._metaData.signal}])]))];case 4:return a._apiResponse=f.sent(),this._afterLoad(),[3,6];case 5:return l=f.sent(),K.error(l),this._skipLoad("apiError",this._fallback.bind(this)),[3,6];case 6:return[2,this]}})}).call(this)}}])&&Xr(n.prototype,r),o&&Xr(n,o),t}(Cr);function ro(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function oo(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ro(i,r,o,a,u,"next",e)}function u(e){ro(i,r,o,a,u,"throw",e)}a(void 0)})}}function io(e,t,n){return t=co(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fo()?Reflect.construct(t,n||[],co(e).constructor):t.apply(e,n))}function ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function co(e){return co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},co(e)}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){uo(e,t,n[t])})}return e}function lo(e,t){return lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lo(e,t)}function fo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fo=function(){return!!e})()}function ho(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var po=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),uo(o=io(this,t),"_text",void 0),uo(o,"_sentences",[]),uo(o,"_metaData",void 0),uo(o,"_isFallback",!1),uo(o,"_language","EN"),o._text=e,o._metaData=n,o._language=r,o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e,n,r){return oo(function(){return ho(this,function(o){switch(o.label){case 0:return[4,new t(e,n,r)._load()];case 1:return[2,o.sent()]}})})()}}],(r=[{key:"sentences",get:function(){return this._sentences}},{key:"isFallback",get:function(){return this._isFallback}},{key:"_fallback",value:function(){this._sentences=[{text:this._text,start:0,end:this._text.length-1}],this._isFallback=!1}},{key:"_isShortCircuit",value:function(){return 1===this._text.split(" ").length}},{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return oo(function(){var e,t,n,r,o,i,a,u;return ho(this,function(c){switch(c.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];t=(e=Se).retry,n=e.timeout,r=e.cacheDuration,c.label=1;case 1:return c.trys.push([1,3,,4]),i=this,[4,Pr.post("api/utils/sentence-spiltter",so({json:{fallback:!0,text:this._text,language:this._language},headers:(null===(o=this._metaData)||void 0===o?void 0:o.headers)||{},retry:t,timeout:n,cacheDuration:r,maxConcurrentRequests:this._metaData.ssBatch||2},this._metaData.signal&&{signal:this._metaData.signal}))];case 2:return i._apiResponse=c.sent(),this._sentences=this._apiResponse.data.sentences,this._isFallback=this._apiResponse.data.fallback||!1,this._modelId=this._apiResponse.data.id,[3,4];case 3:if(c.sent(),this._skipLoad("apiError",this._fallback.bind(this)),null===(a=this._metaData.signal)||void 0===a?void 0:a.aborted)throw(u=new Error("AbortError")).reason="AbortError",u;return[3,4];case 4:return[2,this]}})}).call(this)}}])&&ao(n.prototype,r),o&&ao(n,o),t}(Cr);function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yo(e){return function(e){if(Array.isArray(e))return vo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mo=[{type:"BULLET_POINT",html:"li",order:0},{type:"HEADING",html:"h1",order:1}],bo=mo.slice().sort(function(e,t){return e.order-t.order}).map(function(e){return e.type}),go=Object.fromEntries(mo.map(function(e){return[e.type,e.html]})),_o={BOLD:"strong",ITALIC:"em"};function wo(e,t,n){for(var r=0;r<e.length&&r<t.length&&e[r]===t[r];)r++;for(var o=e.length-1;o>=r;o--)n+="</".concat(_o[e[o]],">");e.splice(r);for(var i=r;i<t.length;i++)n+="<".concat(_o[t[i]],">"),e.push(t[i]);return n}function Eo(e,t,n,r,o){try{var i=Object.keys(r).map(Number).filter(function(e){return e>=t&&e<n});i.includes(t)||i.unshift(t),i.includes(n)||i.push(n);var a=[];if(t>0){var u=Object.keys(r).map(Number).filter(function(e){return e<=t}).sort(function(e,t){return t-e});u.length>0&&(a=r[u[0]]||[])}for(var c="",s=[],l=0;l<i.length-1;l++){var f=i[l],h=i[l+1],d=r[f]||[];0===l&&a.length&&(d=Array.from(new Set(yo(a).concat(yo(d))))),c=wo(s,d.filter(function(e){return e in _o}),c),h>f&&(c+=e.slice(f,h))}for(var p=s.length-1;p>=0;p--)c+="</".concat(_o[s[p]],">");if(o&&o.length>0){var v=!0,y=!1,m=void 0;try{for(var b,g=o.slice().reverse()[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){var _=b.value;c="<".concat(_,">").concat(c,"</").concat(_,">")}}catch(e){y=!0,m=e}finally{try{v||null==g.return||g.return()}finally{if(y)throw m}}}return c}catch(r){return e.slice(t,n)}}var Oo=function(e){var t=[];e&&e[0]&&(t=Array.from(new Set(e[0].filter(function(e){return e in go}))).sort(function(e,t){return bo.indexOf(e)-bo.indexOf(t)}).map(function(e){return go[e]}));return t},So=function(e,t,n){try{if(n){var r=Oo(n);return e.forEach(function(e){e.textHtml=Eo(t,e.start,e.end+1,n,r)}),e}return e}catch(t){return e}};function ko(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ko(e,t,n[t])})}return e}function To(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var xo=function(e){var t=null==e?void 0:e.map(function(e){var t,n=null==e||null===(t=e.recommendations)||void 0===t?void 0:t.map(function(t){var n,r=null==t||null===(n=t.phrases)||void 0===n?void 0:n.map(function(t){var n;return t.phraseDiff=(null==t?void 0:t.phraseDiff)?null==t||null===(n=t.phraseDiff)||void 0===n?void 0:n.map(function(t){return To(Po({},t),{sourceStart:t.sourceStart+((null==e?void 0:e.offset)||0),sourceEnd:t.sourceEnd+((null==e?void 0:e.offset)||0),targetStart:t.targetStart+((null==e?void 0:e.offset)||0),targetEnd:t.targetEnd+((null==e?void 0:e.offset)||0)})}):[],To(Po({},t),{start:t.start+((null==e?void 0:e.offset)||0),end:t.end+((null==e?void 0:e.offset)||0)})});return To(Po({},t),{phrases:r})});return To(Po({},e),{recommendations:n})});return t},Io=function(e){return null==e?void 0:e.map(function(e){var t,n=null==e?void 0:e.text,r=null==e||null===(t=e.recommendations)||void 0===t?void 0:t.map(function(e){var t,r=null==e||null===(t=e.phrases)||void 0===t?void 0:t.map(function(e){var t=n.substring(e.start,e.end);return To(Po({},e),{originalPhrase:t})});return To(Po({},e),{phrases:r})});return To(Po({},e),{recommendations:r})})};function Do(e,t){var n=function(e,t){return null==e?void 0:e.map(function(e,n){return To(Po({},t[n]),{paraId:null==e?void 0:e.paraId,sentenceId:null==e?void 0:e.sentenceId,offset:(null==e?void 0:e.offset)||0})})}(t,Io(e));return xo(n)}function jo(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ao(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){jo(i,r,o,a,u,"next",e)}function u(e){jo(i,r,o,a,u,"throw",e)}a(void 0)})}}function Co(e,t,n){return t=Lo(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Go()?Reflect.construct(t,n||[],Lo(e).constructor):t.apply(e,n))}function Ro(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function No(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lo(e){return Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Lo(e)}function Mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){No(e,t,n[t])})}return e}function Fo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Uo(e,t){return Uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Uo(e,t)}function Go(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Go=function(){return!!e})()}function Bo(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Wo=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),No(r=Co(this,t),"_option",void 0),No(r,"_unlocked",void 0),No(r,"_metaData",void 0),No(r,"_featureId","recommendation"),No(r,"_isFallback",!1),r._option=e,r._metaData=n,r}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uo(e,t)}(t,e),n=t,i=[{key:"getInstance",value:function(e,n){return Ao(function(){return Bo(this,function(r){switch(r.label){case 0:return[4,new t(e,n)._load()];case 1:return[2,r.sent()]}})})()}}],(o=[{key:"unlocked",get:function(){return this._unlocked}},{key:"isFallback",get:function(){return this._isFallback}},{key:"_fallback",value:function(){this._isFallback=!1}},{key:"_isShortCircuit",value:function(){return""===this._option.lockId}},{key:"_beforeLoad",value:function(){return Ao(function(){return Bo(this,function(e){return this._isShortCircuit()?(this._skipLoad("shortCircuit",this._fallback.bind(this)),[2,this]):[2]})}).call(this)}},{key:"_afterLoad",value:function(){return Ao(function(){var e,t,n,o,i,a,u,c,l,f,d,p,v,y,m,b;return Bo(this,function(g){switch(g.label){case 0:return[4,se(this._option.lockId)];case 1:return a=g.sent(),(u=null==a||null===(e=a.data)||void 0===e?void 0:e.recommendationCacheKey)?(c=null===(i=this._apiResponse)||void 0===i||null===(o=i.data)||void 0===o||null===(n=o.recommendation)||void 0===n||null===(t=n.unlockedData)||void 0===t?void 0:t.data)?(p=864e6,[4,h.get("IS_PREMIUM_USER")]):[3,5]:(s({eventName:r.LOCK_ID_TO_RECOMMENDATION_KEY_MAP_NON_EXISTS,data:{lockId:this._option.lockId}}),[2,this]);case 2:return v="true"===g.sent(),y=pr(c,v),c&&(c.type=y),[4,be(u)];case 3:return g.sent(),[4,me(u,c,p)];case 4:return g.sent(),m=Io([c]),b=xo(m),this._unlocked={recommendation:b[0],quota:null===(d=this._apiResponse)||void 0===d||null===(f=d.data)||void 0===f||null===(l=f.recommendation)||void 0===l?void 0:l.quota},[3,6];case 5:s({eventName:r.RECOMMENDATION_UNLOCK_FAILED,data:{lockId:this._option.lockId}}),g.label=6;case 6:return[2]}})}).call(this)}},{key:"_load",value:function(){return Ao(function(){var e,t,n,r,o,i,a,u,c;return Bo(this,function(s){switch(s.label){case 0:return[4,this._beforeLoad()];case 1:if(s.sent(),this.isSkipped)return[2,this];t=(e=De).retry,n=e.timeout,r=e.cacheDuration,s.label=2;case 2:return s.trys.push([2,5,,6]),i=this,[4,Pr.post("sneak-peek/unlock",Fo(Mo({json:Fo(Mo({},this._option),{featureId:this._featureId}),headers:Mo({},(null===(o=this._metaData)||void 0===o?void 0:o.headers)||{}),retry:t,timeout:n,cacheDuration:r,maxConcurrentRequests:1},this._metaData.signal&&{signal:this._metaData.signal}),{skipCacheStorage:!0}))];case 3:return i._apiResponse=s.sent(),[4,this._afterLoad()];case 4:return s.sent(),[3,6];case 5:if(a=s.sent(),this._skipLoad("apiError",this._fallback.bind(this)),null===(u=this._metaData.signal)||void 0===u?void 0:u.aborted)throw(c=new Error("AbortError")).reason="AbortError",c;throw a;case 6:return[2,this]}})}).call(this)}}])&&Ro(n.prototype,o),i&&Ro(n,i),t}(Cr);function $o(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function zo(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Ho=function(e,t){return(n=function(){var n;return zo(this,function(r){switch(r.label){case 0:return[4,Hr.getInstance(e,t)];case 1:return[2,{suggestions:(n=r.sent()).suggestions,usageLeft:n.usageLeft,statusCode:n.statusCode,errorMessage:n.errorMessage,isCached:n.isCached,utilization:n.utilization}]}})},function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){$o(i,r,o,a,u,"next",e)}function u(e){$o(i,r,o,a,u,"throw",e)}a(void 0)})})();var n};function Vo(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function qo(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Vo(i,r,o,a,u,"next",e)}function u(e){Vo(i,r,o,a,u,"throw",e)}a(void 0)})}}function Ko(e,t,n){return t=Jo(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ei()?Reflect.construct(t,n||[],Jo(e).constructor):t.apply(e,n))}function Xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jo(e){return Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jo(e)}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Yo(e,t,n[t])})}return e}function Zo(e,t){return Zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Zo(e,t)}function ei(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ei=function(){return!!e})()}function ti(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var ni=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yo(n=Ko(this,t),"_text",void 0),Yo(n,"_aiContentScore",null),n._text=e,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zo(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e){return qo(function(){return ti(this,function(n){switch(n.label){case 0:return[4,new t(e)._load()];case 1:return[2,n.sent()]}})})()}}],(r=[{key:"aiContentScore",get:function(){return this._aiContentScore}},{key:"_isShortCircuit",value:function(){return qo(function(){return ti(this,function(e){return[2,this._text.length<480]})}).call(this)}},{key:"_beforeLoad",value:function(){return qo(function(){return ti(this,function(e){switch(e.label){case 0:return[4,this._isShortCircuit()];case 1:return e.sent()?(this._skipLoad("shortCircuit"),[2]):[2]}})}).call(this)}},{key:"_afterLoad",value:function(){return qo(function(){var e,t,n,r;return ti(this,function(o){return this._modelId=null===(t=this._apiResponse)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.modelID,this._aiContentScore=Math.floor(100*(null===(r=this._apiResponse.data)||void 0===r||null===(n=r.value)||void 0===n?void 0:n.text_score)),[2]})}).call(this)}},{key:"_load",value:function(){return qo(function(){var e,t;return ti(this,function(n){switch(n.label){case 0:return[4,this._beforeLoad()];case 1:if(n.sent(),this.isSkipped)return[2,this];n.label=2;case 2:return n.trys.push([2,5,,6]),e=this,[4,Pr.post("api/ai-detector",Qo({json:{text:this._text.trim().slice(0,12001)}},Pe))];case 3:return e._apiResponse=n.sent(),[4,this._afterLoad()];case 4:return n.sent(),[3,6];case 5:return t=n.sent(),K.error(t),this._skipLoad("apiError"),[3,6];case 6:return[2,this]}})}).call(this)}}])&&Xo(n.prototype,r),o&&Xo(n,o),t}(Cr);function ri(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function oi(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var ii=function(e){return(t=function(){return oi(this,function(t){switch(t.label){case 0:return[4,ni.getInstance(e.text)];case 1:return[2,{ai_score:t.sent().aiContentScore}]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){ri(i,r,o,a,u,"next",e)}function u(e){ri(i,r,o,a,u,"throw",e)}a(void 0)})})();var t},ai=function(e){return h.get(e)},ui=function(e,t){h.set(e,t)},ci=function(){return Pr.get("config/lang/dictionary",{headers:{}}).then(function(e){var t;return null===(t=e.data)||void 0===t?void 0:t[0]})},si=function(e){return Pr.post("config/lang/dictionary",{json:{word:e}}).then(function(e){var t;return null===(t=e.data)||void 0===t?void 0:t[0]})},li=function(e){return Pr.delete("config/lang/dictionary",{json:{word:e}}).then(function(e){var t;return null===(t=e.data)||void 0===t?void 0:t[0]})};function fi(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function hi(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){fi(i,r,o,a,u,"next",e)}function u(e){fi(i,r,o,a,u,"throw",e)}a(void 0)})}}function di(e,t,n){return t=yi(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,gi()?Reflect.construct(t,n||[],yi(e).constructor):t.apply(e,n))}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yi(e){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yi(e)}function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){vi(e,t,n[t])})}return e}function bi(e,t){return bi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bi(e,t)}function gi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gi=function(){return!!e})()}function _i(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var wi=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vi(r=di(this,t),"_documentId",void 0),vi(r,"_options",void 0),vi(r,"_newDocumentId",null),r._documentId=e,r._options=n||{},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bi(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e){return hi(function(e){var n=arguments;return _i(this,function(r){switch(r.label){case 0:return[4,new t(e,n.length>1&&void 0!==n[1]?n[1]:{})._load()];case 1:return[2,r.sent()]}})}).apply(this,arguments)}}],(r=[{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return hi(function(){var e,t,n,r,o,i,a,u,c,s;return _i(this,function(l){switch(l.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];l.label=1;case 1:return l.trys.push([1,3,,4]),n=Ie.COPY_DOCUMENT,r=n.endpoint,o=n.retry,i=n.timeout,a=n.cacheDuration,u=this,[4,Pr.post(r.replace("<DOC_ID>",this._documentId),mi({timeout:i,headers:(null===(e=this._options)||void 0===e?void 0:e.headers)||{},cacheDuration:a,retry:o},(null===(t=this._options)||void 0===t?void 0:t.signal)&&{signal:this._options.signal}))];case 2:return u._apiResponse=l.sent(),this._newDocumentId=this._apiResponse.data.id,[3,4];case 3:throw c=l.sent(),K.error("Error in Copy Document from ID:",c),this._skipLoad("apiError",this._fallback.bind(this)),(null===(s=this._options.signal)||void 0===s?void 0:s.aborted)&&(new Error("AbortError").cause="AbortError"),c;case 4:return[2,this]}})}).call(this)}},{key:"_isShortCircuit",value:function(){return!1}},{key:"_fallback",value:function(){this._newDocumentId=null}},{key:"newDocumentId",get:function(){return this._newDocumentId}}])&&pi(n.prototype,r),o&&pi(n,o),t}(Cr);function Ei(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Oi(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ei(i,r,o,a,u,"next",e)}function u(e){Ei(i,r,o,a,u,"throw",e)}a(void 0)})}}function Si(e,t,n){return t=Ti(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Di()?Reflect.construct(t,n||[],Ti(e).constructor):t.apply(e,n))}function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ti(e){return Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ti(e)}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Pi(e,t,n[t])})}return e}function Ii(e,t){return Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ii(e,t)}function Di(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Di=function(){return!!e})()}function ji(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Ai=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pi(r=Si(this,t),"_data",void 0),Pi(r,"_options",void 0),Pi(r,"_document",null),r._data=e,r._options=n||{},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ii(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e){return Oi(function(e){var n=arguments;return ji(this,function(r){switch(r.label){case 0:return[4,new t(e,n.length>1&&void 0!==n[1]?n[1]:{})._load()];case 1:return[2,r.sent()]}})}).apply(this,arguments)}}],(r=[{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return Oi(function(){var e,t,n,r,o,i,a,u,c,s;return ji(this,function(l){switch(l.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];l.label=1;case 1:return l.trys.push([1,3,,4]),n=Ie.CREATE_DOCUMENT,r=n.endpoint,o=n.retry,i=n.timeout,a=n.cacheDuration,u=this,[4,Pr.post(r,xi({json:this._data,timeout:i,headers:(null===(e=this._options)||void 0===e?void 0:e.headers)||{},cacheDuration:a,retry:o},(null===(t=this._options)||void 0===t?void 0:t.signal)&&{signal:this._options.signal}))];case 2:return u._apiResponse=l.sent(),this._document=this._apiResponse.data,[3,4];case 3:throw c=l.sent(),K.error("Error in Create Document:",c),this._skipLoad("apiError",this._fallback.bind(this)),(null===(s=this._options.signal)||void 0===s?void 0:s.aborted)&&(new Error("AbortError").cause="AbortError"),c;case 4:return[2,this]}})}).call(this)}},{key:"_isShortCircuit",value:function(){return!1}},{key:"_fallback",value:function(){this._document=null}},{key:"document",get:function(){return this._document}}])&&ki(n.prototype,r),o&&ki(n,o),t}(Cr);function Ci(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ri(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ci(i,r,o,a,u,"next",e)}function u(e){Ci(i,r,o,a,u,"throw",e)}a(void 0)})}}function Ni(e,t,n){return t=Fi(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Bi()?Reflect.construct(t,n||[],Fi(e).constructor):t.apply(e,n))}function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fi(e){return Fi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Fi(e)}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Mi(e,t,n[t])})}return e}function Gi(e,t){return Gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Gi(e,t)}function Bi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Bi=function(){return!!e})()}function Wi(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var $i=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mi(r=Ni(this,t),"_documentId",void 0),Mi(r,"_options",void 0),Mi(r,"_success",!1),r._documentId=e,r._options=n||{},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gi(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e){return Ri(function(e){var n=arguments;return Wi(this,function(r){switch(r.label){case 0:return[4,new t(e,n.length>1&&void 0!==n[1]?n[1]:{})._load()];case 1:return[2,r.sent()]}})}).apply(this,arguments)}}],(r=[{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return Ri(function(){var e,t,n,r,o,i,a,u,c,s;return Wi(this,function(l){switch(l.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];l.label=1;case 1:return l.trys.push([1,3,,4]),n=Ie.DELETE_DOCUMENT,r=n.endpoint,o=n.retry,i=n.timeout,a=n.cacheDuration,u=this,[4,Pr.delete(r.replace("<DOC_ID>",this._documentId),Ui({timeout:i,headers:(null===(e=this._options)||void 0===e?void 0:e.headers)||{},cacheDuration:a,retry:o},(null===(t=this._options)||void 0===t?void 0:t.signal)&&{signal:this._options.signal}))];case 2:return u._apiResponse=l.sent(),this._success=!0,[3,4];case 3:throw c=l.sent(),K.error("Error in Delete Document By ID:",c),this._skipLoad("apiError",this._fallback.bind(this)),(null===(s=this._options.signal)||void 0===s?void 0:s.aborted)&&(new Error("AbortError").cause="AbortError"),c;case 4:return[2,this]}})}).call(this)}},{key:"_isShortCircuit",value:function(){return!1}},{key:"_fallback",value:function(){this._success=!1}},{key:"success",get:function(){return this._success}}])&&Li(n.prototype,r),o&&Li(n,o),t}(Cr);function zi(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Hi(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){zi(i,r,o,a,u,"next",e)}function u(e){zi(i,r,o,a,u,"throw",e)}a(void 0)})}}function Vi(e,t,n){return t=Xi(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qi()?Reflect.construct(t,n||[],Xi(e).constructor):t.apply(e,n))}function qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ki(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xi(e){return Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xi(e)}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ki(e,t,n[t])})}return e}function Ji(e,t){return Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ji(e,t)}function Qi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Qi=function(){return!!e})()}function Zi(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var ea=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ki(r=Vi(this,t),"_params",{}),Ki(r,"_options",void 0),Ki(r,"_documents",[]),r._params=e,r._options=n||{},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ji(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e){return Hi(function(e){var n=arguments;return Zi(this,function(r){switch(r.label){case 0:return[4,new t(e,n.length>1&&void 0!==n[1]?n[1]:{})._load()];case 1:return[2,r.sent()]}})}).apply(this,arguments)}}],(r=[{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return Hi(function(){var e,t,n,r,o,i,a,u,c,s;return Zi(this,function(l){switch(l.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];l.label=1;case 1:return l.trys.push([1,3,,4]),n=Ie.GET_ALL_DOCUMENTS,r=n.endpoint,o=n.retry,i=n.timeout,a=n.cacheDuration,u=this,[4,Pr.get(r,Yi({searchParams:this._params,timeout:i,headers:(null===(e=this._options)||void 0===e?void 0:e.headers)||{},cacheDuration:a,retry:o},(null===(t=this._options)||void 0===t?void 0:t.signal)&&{signal:this._options.signal}))];case 2:return u._apiResponse=l.sent(),this._documents=this._apiResponse.data.documents,[3,4];case 3:throw c=l.sent(),K.error("Error in Get All Documents:",c),this._skipLoad("apiError",this._fallback.bind(this)),(null===(s=this._options.signal)||void 0===s?void 0:s.aborted)&&(new Error("AbortError").cause="AbortError"),c;case 4:return[2,this]}})}).call(this)}},{key:"_isShortCircuit",value:function(){return!1}},{key:"_fallback",value:function(){this._documents=[]}},{key:"documents",get:function(){return this._documents}}])&&qi(n.prototype,r),o&&qi(n,o),t}(Cr);function ta(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function na(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ta(i,r,o,a,u,"next",e)}function u(e){ta(i,r,o,a,u,"throw",e)}a(void 0)})}}function ra(e,t,n){return t=aa(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sa()?Reflect.construct(t,n||[],aa(e).constructor):t.apply(e,n))}function oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aa(e){return aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},aa(e)}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ia(e,t,n[t])})}return e}function ca(e,t){return ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ca(e,t)}function sa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(sa=function(){return!!e})()}function la(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var fa=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ia(r=ra(this,t),"_documentId",void 0),ia(r,"_options",void 0),ia(r,"_document",null),r._documentId=e,r._options=n||{},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ca(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e){return na(function(e){var n=arguments;return la(this,function(r){switch(r.label){case 0:return[4,new t(e,n.length>1&&void 0!==n[1]?n[1]:{})._load()];case 1:return[2,r.sent()]}})}).apply(this,arguments)}}],(r=[{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return na(function(){var e,t,n,r,o,i,a,u,c,s,l,f;return la(this,function(h){switch(h.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];h.label=1;case 1:return h.trys.push([1,3,,4]),o=Ie.GET_DOCUMENT_BY_ID,i=o.endpoint,a=o.retry,u=o.timeout,c=o.cacheDuration,s=this,[4,Pr.get(i.replace("<DOC_ID>",this._documentId),ua({timeout:u,headers:(null===(e=this._options)||void 0===e?void 0:e.headers)||{},cacheDuration:c,retry:a},(null===(t=this._options)||void 0===t?void 0:t.signal)&&{signal:this._options.signal}))];case 2:return s._apiResponse=h.sent(),this._document=(null===(r=this._apiResponse)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.document)||null,[3,4];case 3:throw l=h.sent(),K.error("Error in Get Document By ID:",l),this._skipLoad("apiError",this._fallback.bind(this)),(null===(f=this._options.signal)||void 0===f?void 0:f.aborted)&&(new Error("AbortError").cause="AbortError"),l;case 4:return[2,this]}})}).call(this)}},{key:"_isShortCircuit",value:function(){return!1}},{key:"_fallback",value:function(){this._document=null}},{key:"document",get:function(){return this._document}}])&&oa(n.prototype,r),o&&oa(n,o),t}(Cr);function ha(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function da(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ha(i,r,o,a,u,"next",e)}function u(e){ha(i,r,o,a,u,"throw",e)}a(void 0)})}}function pa(e,t,n){return t=ma(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wa()?Reflect.construct(t,n||[],ma(e).constructor):t.apply(e,n))}function va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ma(e){return ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ma(e)}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ya(e,t,n[t])})}return e}function ga(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function _a(e,t){return _a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_a(e,t)}function wa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(wa=function(){return!!e})()}function Ea(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Oa=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ya(o=pa(this,t),"_documentId",void 0),ya(o,"_content",void 0),ya(o,"_options",{headers:{"Content-Type":"multipart/form-data"}}),ya(o,"_document",null),o._documentId=e,o._content=n,o._options=ga(ba({},o._options,r),{headers:ba({},o._options.headers,(null==r?void 0:r.headers)||{})}),o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e,n){return da(function(e,n){var r=arguments;return Ea(this,function(o){switch(o.label){case 0:return[4,new t(e,n,r.length>2&&void 0!==r[2]?r[2]:{})._load()];case 1:return[2,o.sent()]}})}).apply(this,arguments)}}],(r=[{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return da(function(){var e,t,n,r,o,i,a,u,c,s;return Ea(this,function(l){switch(l.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];l.label=1;case 1:return l.trys.push([1,3,,4]),n=Ie.UPDATE_DOCUMENT_CONTENT,r=n.endpoint,o=n.retry,i=n.timeout,a=n.cacheDuration,u=this,[4,Pr.put(r.replace("<DOC_ID>",this._documentId),ba({json:this._content,timeout:i,headers:(null===(e=this._options)||void 0===e?void 0:e.headers)||{},cacheDuration:a,retry:o},(null===(t=this._options)||void 0===t?void 0:t.signal)&&{signal:this._options.signal}))];case 2:return u._apiResponse=l.sent(),this._document=this._apiResponse.data,[3,4];case 3:throw c=l.sent(),K.error("Error in Update Document Content by ID:",c),this._skipLoad("apiError",this._fallback.bind(this)),(null===(s=this._options.signal)||void 0===s?void 0:s.aborted)&&(new Error("AbortError").cause="AbortError"),c;case 4:return[2,this]}})}).call(this)}},{key:"_isShortCircuit",value:function(){return!1}},{key:"_fallback",value:function(){this._document=null}},{key:"document",get:function(){return this._document}}])&&va(n.prototype,r),o&&va(n,o),t}(Cr);function Sa(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function ka(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Sa(i,r,o,a,u,"next",e)}function u(e){Sa(i,r,o,a,u,"throw",e)}a(void 0)})}}function Pa(e,t,n){return t=Ia(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Aa()?Reflect.construct(t,n||[],Ia(e).constructor):t.apply(e,n))}function Ta(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ia(e){return Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ia(e)}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){xa(e,t,n[t])})}return e}function ja(e,t){return ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ja(e,t)}function Aa(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Aa=function(){return!!e})()}function Ca(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Ra=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xa(o=Pa(this,t),"_documentId",void 0),xa(o,"_data",void 0),xa(o,"_options",void 0),xa(o,"_document",null),o._documentId=e,o._data=n,o._options=r||{},o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ja(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e,n){return ka(function(e,n){var r=arguments;return Ca(this,function(o){switch(o.label){case 0:return[4,new t(e,n,r.length>2&&void 0!==r[2]?r[2]:{})._load()];case 1:return[2,o.sent()]}})}).apply(this,arguments)}}],(r=[{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_load",value:function(){return ka(function(){var e,t,n,r,o,i,a,u,c,s;return Ca(this,function(l){switch(l.label){case 0:if(this._beforeLoad(),this.isSkipped)return[2,this];l.label=1;case 1:return l.trys.push([1,3,,4]),n=Ie.UPDATE_DOCUMENT_BY_ID,r=n.endpoint,o=n.retry,i=n.timeout,a=n.cacheDuration,u=this,[4,Pr.patch(r.replace("<DOC_ID>",this._documentId),Da({json:this._data,timeout:i,headers:(null===(e=this._options)||void 0===e?void 0:e.headers)||{},cacheDuration:a,retry:o},(null===(t=this._options)||void 0===t?void 0:t.signal)&&{signal:this._options.signal}))];case 2:return u._apiResponse=l.sent(),this._document=this._apiResponse.data,[3,4];case 3:throw c=l.sent(),K.error("Error in Update Document by ID:",c),this._skipLoad("apiError",this._fallback.bind(this)),(null===(s=this._options.signal)||void 0===s?void 0:s.aborted)&&(new Error("AbortError").cause="AbortError"),c;case 4:return[2,this]}})}).call(this)}},{key:"_isShortCircuit",value:function(){return!1}},{key:"_fallback",value:function(){this._document=null}},{key:"document",get:function(){return this._document}}])&&Ta(n.prototype,r),o&&Ta(n,o),t}(Cr);function Na(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function La(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Na(i,r,o,a,u,"next",e)}function u(e){Na(i,r,o,a,u,"throw",e)}a(void 0)})}}function Ma(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Fa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return La(function(){return Ma(this,function(n){switch(n.label){case 0:return[4,wi.getInstance(e,t)];case 1:return[2,{newDocumentId:n.sent().newDocumentId}]}})})()},Ua=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return La(function(){return Ma(this,function(n){switch(n.label){case 0:return[4,Ai.getInstance(e,t)];case 1:return[2,n.sent().document]}})})()},Ga=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return La(function(){return Ma(this,function(n){switch(n.label){case 0:return[4,$i.getInstance(e,t)];case 1:return[2,{success:n.sent().success}]}})})()},Ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return La(function(){return Ma(this,function(n){switch(n.label){case 0:return[4,ea.getInstance(e,t)];case 1:return[2,n.sent().documents]}})})()},Wa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return La(function(){return Ma(this,function(n){switch(n.label){case 0:return[4,fa.getInstance(e,t)];case 1:return[2,n.sent().document]}})})()},$a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return La(function(){return Ma(this,function(r){switch(r.label){case 0:return[4,Ra.getInstance(e,t,n)];case 1:return[2,r.sent().document]}})})()},za=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return La(function(){return Ma(this,function(r){switch(r.label){case 0:return[4,Oa.getInstance(e,t,n)];case 1:return[2,r.sent().document]}})})()};var Ha=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qa(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ka(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){qa(i,r,o,a,u,"next",e)}function u(e){qa(i,r,o,a,u,"throw",e)}a(void 0)})}}function Xa(e,t,n){return t=Qa(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ru()?Reflect.construct(t,n||[],Qa(e).constructor):t.apply(e,n))}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qa(e){return Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qa(e)}function Za(e,t){return Za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Za(e,t)}function eu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||nu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tu(e){return function(e){if(Array.isArray(e))return Va(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nu(e,t){if(e){if("string"==typeof e)return Va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Va(e,t):void 0}}function ru(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ru=function(){return!!e})()}function ou(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var iu=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ja(e=Xa(this,t),"module",null),Ja(e,"initialized",!1),Ja(e,"loadingPromise",null),Ja(e,"srxText",null),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Za(e,t)}(t,e),n=t,r=[{key:"getModel",value:function(){if(!this.module)throw new Error("Segmentation module not initialized");return this.module}},{key:"process",value:function(e){return Ka(function(e){var t,n,r;return ou(this,function(o){return t=e.input,n=e.language,r=void 0===n?"English":n,[2,this.getModel().segmentText(t,r)]})}).apply(this,arguments)}},{key:"_preProcess",value:function(e){return e}},{key:"_postProcess",value:function(e){return e}},{key:"convertPattern",value:function(e){var t="g",n=e;return/^\(\?i\)/.test(e)&&(t+="i",n=e.replace(/^\(\?i\)/,"")),/\(\?[a-z]*:?/.test(n),{pattern:n,flags:t}}},{key:"parseSRX",value:function(e){if("undefined"!=typeof DOMParser)try{return this.parseSRXWithDOMParser(e)}catch(e){}return this.parseSRXWithRegex(e)}},{key:"parseSRXWithDOMParser",value:function(e){var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("languagerule"),n={},r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value,s=c.getAttribute("languagerulename");if(s){var l={breaks:[],non_breaks:[]},f=c.getElementsByTagName("rule"),h=!0,d=!1,p=void 0;try{for(var v,y=f[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var m,b,g=v.value,_="no"!==g.getAttribute("break"),w=(null===(m=g.getElementsByTagName("beforebreak")[0])||void 0===m?void 0:m.textContent)||"",E=(null===(b=g.getElementsByTagName("afterbreak")[0])||void 0===b?void 0:b.textContent)||"";(_?l.breaks:l.non_breaks).push([w,E])}}catch(e){d=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}n[s]=l}}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}for(var O=0,S=["English","Catalan","Spanish"];O<S.length;O++){var k=S[O];n[k]||(n[k]={breaks:[],non_breaks:[]}),n[k].breaks.push(["\\n",""])}return n}},{key:"decodeXMLEntities",value:function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}},{key:"parseSRXWithRegex",value:function(e){for(var t,n={},r=e.replace(/<!--[\s\S]*?-->/g,""),o=/<languagerule\s+languagerulename="([^"]+)">([\s\S]*?)<\/languagerule>/g;null!==(t=o.exec(r));){for(var i=t[1],a=t[2],u={breaks:[],non_breaks:[]},c=/<rule\s+break="([^"]+)">([\s\S]*?)<\/rule>/g,s=void 0;null!==(s=c.exec(a));){var l="no"!==s[1],f=s[2],h=f.match(/<beforebreak>([\s\S]*?)<\/beforebreak>/),d=f.match(/<afterbreak>([\s\S]*?)<\/afterbreak>/),p=h?this.decodeXMLEntities(h[1]):"",v=d?this.decodeXMLEntities(d[1]):"";(l?u.breaks:u.non_breaks).push([p,v])}n[i]=u}for(var y=0,m=["English","Catalan","Spanish"];y<m.length;y++){var b=m[y];n[b]||(n[b]={breaks:[],non_breaks:[]}),n[b].breaks.push(["\\n",""])}return n}},{key:"getBreakPoints",value:function(e,t){return Ka(function(){var n,r,o,i,a,u,c,s,l,f,h,d,p;return ou(this,function(v){n=new Set,r=!0,o=!1,i=void 0;try{for(a=t[Symbol.iterator]();!(r=(u=a.next()).done);r=!0)for(c=eu(u.value,2),s=c[0],l=c[1],f=this.convertPattern(s),h=this.convertPattern(l),d=new RegExp("(".concat(f.pattern,")(").concat(h.pattern,")"),f.flags.includes("i")||h.flags.includes("i")?"gi":"g"),p=void 0;null!==(p=d.exec(e));)n.add(p.index+p[1].length)}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return[2,new Promise(function(e){return setTimeout(function(){return e(n)},0)})]})}).call(this)}},{key:"extractSegments",value:function(e,t){return Ka(function(){var n,r,o,i,a,u,c,s,l,f,h,d,p,v,y;return ou(this,function(m){switch(m.label){case 0:return[4,this.getBreakPoints(e,t.non_breaks)];case 1:return n=m.sent(),[4,this.getBreakPoints(e,t.breaks)];case 2:for(r=m.sent(),o=Array.from(r).filter(function(e){return!n.has(e)}).sort(function(e,t){return e-t}),i=[],a="",u=[0].concat(tu(o)),c=tu(o).concat([e.length]),s=0;s<u.length;s++)l=e.slice(u[s],c[s]),(f=l.trim())?(h=l.indexOf(f),d=u[s]+h,p=d+f.length,v=l.slice(0,h),y=l.slice(h+f.length),i.push({text:f,start:d,end:p,whitespace:a+v}),a=y):a+=l;return[2,i]}})}).call(this)}},{key:"loadSRXFile",value:function(){return Ka(function(){var e,t,n;return ou(this,function(r){switch(r.label){case 0:return e=h.get("ON_DEVICE_SENTENCE_SPLITTER_CONFIG"),[4,fetch(e.srxPath)];case 1:if(!(t=r.sent()).ok)throw new Error("HTTP error! status: ".concat(t.status));return n=this,[4,t.text()];case 2:return n.srxText=r.sent(),[2,this.parseSRX(this.srxText)]}})}).call(this)}},{key:"createSegmentationModule",value:function(e){var t=this;return{rules:e,segmentText:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"English";return Ka(function(){var t;return ou(this,function(o){switch(o.label){case 0:if(!e||!e[r])throw new Error("SRX rules not loaded or language '".concat(r,"' not found"));if(!n.trim())throw new Error("Please enter some text to segment.");o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.extractSegments(n,e[r])];case 2:return[2,{sentences:t=o.sent(),fullOutput:t.map(function(e){return e.text}).join("\n")}];case 3:throw o.sent();case 4:return[2]}})}).call(t)}}}},{key:"initialize",value:function(){return Ka(function(){var e;return ou(this,function(t){return e=this,this.initialized?[2,Promise.resolve(this.module)]:(this.loadingPromise||(this.loadingPromise=Ka(function(){var e,t,n;return ou(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,this.loadSRXFile()];case 1:return e=r.sent(),this.module=this.createSegmentationModule(e),this.initialized=!0,[2,this.module];case 2:throw t=r.sent(),this.initialized=!1,o=t,i=Error,n=(null!=i&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](o):o instanceof i)?t.message:"Unknown error occurred",new Error("Failed to initialize Segmentation module: ".concat(n));case 3:return this.loadingPromise=null,[7];case 4:return[2]}var o,i})}).call(e)),[2,this.loadingPromise])})}).call(this)}}],o=[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}],r&&Ya(n.prototype,r),o&&Ya(n,o),t}(Ha);function au(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function uu(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){au(i,r,o,a,u,"next",e)}function u(e){au(i,r,o,a,u,"throw",e)}a(void 0)})}}function cu(e,t,n){return t=fu(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,du()?Reflect.construct(t,n||[],fu(e).constructor):t.apply(e,n))}function su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fu(e){return fu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fu(e)}function hu(e,t){return hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hu(e,t)}function du(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(du=function(){return!!e})()}function pu(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}Ja(iu,"instance",null);var vu=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lu(r=cu(this,t),"segmenterManager",void 0),lu(r,"_text",void 0),lu(r,"_language",void 0),lu(r,"_sentences",[]),lu(r,"slowThreshold",void 0),lu(r,"fallbackThreshold",void 0),r._text=e,r._modelId="segmenter",r._language=n,r.segmenterManager=iu.getInstance();var o=h.get("ON_DEVICE_SENTENCE_SPLITTER_CONFIG");return r.slowThreshold=(null==o?void 0:o.slowThreshold)||t.DEFAULT_SLOW_THRESHOLD,r.fallbackThreshold=(null==o?void 0:o.fallbackThreshold)||t.DEFAULT_FALLBACK_THRESHOLD,r}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hu(e,t)}(t,e),n=t,a=[{key:"getInstance",value:function(e,n){return uu(function(){return pu(this,function(r){switch(r.label){case 0:return[4,new t(e,n)._load()];case 1:return[2,r.sent()]}})})()}}],(o=[{key:"_isLanguageSupported",value:function(e){return e.toLowerCase()in t.SEGMENTER_LANGUAGE_MAP}},{key:"_getLanguageName",value:function(e){return t.SEGMENTER_LANGUAGE_MAP[e.toLowerCase()]}},{key:"sentences",get:function(){return this._sentences}},{key:"_beforeLoad",value:function(){return this._isLanguageSupported(this._language)?(this._language=this._getLanguageName(this._language)||"",this._text?void(this._text=function(e){try{return e.replace(/\u00A0/g," ").replace(/\u200B/g,"")}catch(t){return e}}(this._text)):(""===this._text&&(this._sentences=[{text:"",start:0,end:-1}]),void this._skipLoad("shortCircuit",function(){}))):(this._sentences=[],void this._skipLoad("shortCircuit",function(){}))}},{key:"_afterLoad",value:function(){return uu(function(){return pu(this,function(e){return[2]})})()}},{key:"_load",value:function(){return uu(function(){var e,t,n,r;return pu(this,function(o){switch(o.label){case 0:return this._beforeLoad(),this.isSkipped?[2,this]:[4,this.generateCacheKey()];case 1:return e=o.sent(),[4,this.retrieveFromCache(e)];case 2:if(t=o.sent())return this._sentences=t,[2,this];o.label=3;case 3:return o.trys.push([3,7,,8]),[4,this.segmenterManager.initialize()];case 4:return o.sent(),n=this,[4,this.processSentences()];case 5:return n._sentences=o.sent(),[4,this.cacheResults(e)];case 6:return o.sent(),[2,this];case 7:return r=o.sent(),this.handleError(r),[2,this];case 8:return[2]}})}).call(this)}},{key:"generateCacheKey",value:function(){return uu(function(){return pu(this,function(e){switch(e.label){case 0:return[4,Jn(t.CACHE_PREFIX+this._text)];case 1:return[2,e.sent()]}})}).call(this)}},{key:"retrieveFromCache",value:function(e){return uu(function(){var t;return pu(this,function(n){switch(n.label){case 0:return[4,ye(e)];case 1:return[2,(null==(t=n.sent())?void 0:t.data.sentences)||null]}})})()}},{key:"cacheResults",value:function(e){return uu(function(){var n;return pu(this,function(r){switch(r.label){case 0:return n={data:{sentences:this._sentences},type:i["sentence-splitter:on-device"]},[4,me(e,n,t.CACHE_TTL)];case 1:return r.sent(),[2]}})}).call(this)}},{key:"processSentences",value:function(){return uu(function(){var e;return pu(this,function(t){switch(t.label){case 0:return[4,Promise.race([this.createTimeoutPromise(),this.executeSentenceProcessing()])];case 1:return e=t.sent(),[2,this.mapSentencesToOffsets(this._text,e)]}})}).call(this)}},{key:"createTimeoutPromise",value:function(){var e=this;return new Promise(function(t,n){return setTimeout(function(){return n(new Error("fallback timeout"))},e.fallbackThreshold)})}},{key:"executeSentenceProcessing",value:function(){return uu(function(){var e,t,n;return pu(this,function(r){switch(r.label){case 0:return e=performance.now(),[4,this.segmenterManager.process({input:this._text,language:this._language})];case 1:return t=r.sent(),n=performance.now()-e,this.trackPerformance(n),[2,t.sentences.map(function(e){return e.text})]}})}).call(this)}},{key:"trackPerformance",value:function(e){e>this.slowThreshold&&this.notifySlowProcessing(e),this.notifyProcessingComplete(e)}},{key:"notifySlowProcessing",value:function(e){s({eventName:r.ON_DEVICE_SENTENCE_SPLIT_TOGGLE,data:{value:!1,timeTaken:e,reason:"slowThreshold",modelId:this._modelId}})}},{key:"notifyProcessingComplete",value:function(e){s({eventName:r.ON_DEVICE_SEGMENTER_SENTENCE_SPLIT_COMPLETE,data:{timeTaken:e,textLength:this._text.length,modelId:this._modelId}})}},{key:"handleError",value:function(e){var t,n,o=(t=e,(null!=(n=Error)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)?e.message:"Unknown error");s({eventName:r.ON_DEVICE_SEGMENTER_SENTENCE_SPLIT_ERROR,data:{error:o,textLength:this._text.length,modelId:this._modelId}})}},{key:"mapSentencesToOffsets",value:function(e,t){var n=0;return t.map(function(t){var r=e.indexOf(t,n),o=r+t.length-1;return n=r+t.length,{text:t,start:r,end:o}})}}])&&su(n.prototype,o),a&&su(n,a),t}(Cr);function yu(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function mu(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}lu(vu,"DEFAULT_SLOW_THRESHOLD",150),lu(vu,"DEFAULT_FALLBACK_THRESHOLD",400),lu(vu,"CACHE_PREFIX","SENTENCE_SPLITTER_SEGMENTER"),lu(vu,"CACHE_TTL",864e5),lu(vu,"SEGMENTER_LANGUAGE_MAP",{en:"English",de:"German",fr:"French",es:"Spanish",nl:"Dutch",pt:"Portuguese"});var bu=function(e,t){return(n=function(){var n,r,o,i,a,u;return mu(this,function(c){switch(c.label){case 0:return n=e.text,r=e.language,o=e.metaData,(null==(i=h.get("ON_DEVICE_SENTENCE_SPLITTER_CONFIG"))?void 0:i.enabled)?[4,vu.getInstance(n,r)]:[3,2];case 1:if(a=c.sent().sentences,u=(null==a?void 0:a.length)>0?{sentences:a}:null)return[2,u];c.label=2;case 2:return(null==t?void 0:t.skipHttpRequest)?[2,{sentences:[]}]:[4,po.getInstance(n,o,r)];case 3:return[2,{sentences:c.sent().sentences}]}})},function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function a(e){yu(i,r,o,a,u,"next",e)}function u(e){yu(i,r,o,a,u,"throw",e)}a(void 0)})})();var n},gu=function(e,t,n){if(!t&&!n)return[0,0];for(var r,o,i=new RegExp("^(?:\\p{L}|\\p{N}|".concat(t,")$"),"gu"),a=new RegExp("^(?:\\p{L}|\\p{N}|".concat(n,")$"),"gu"),u=/["\u201e]$/,c=/^["\u201e]/,s=e.split("").reverse().join(""),l=Math.floor(e.length/2),f=!1,h=!1,d=0,p=0,v=0;v<l;v++){var y=e.charAt(v),m=s.charAt(v);if(!0!==r&&null===y.match(i)?(f=null!==y.match(c),d+=1,r=!1):y.match(/\s/)&&!1===r?d+=1:r=!0,!0!==o&&null===m.match(a)?(h=null!==m.match(u),p+=1,o=!1):m.match(/\s/)&&!1===o?p+=1:o=!0,r&&o)break}return f&&!h&&(d-=1),h&&!f&&(p-=1),[d,p]};var _u,wu,Eu;function Ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Su(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Su(e,t,n[t])})}return e}function Pu(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Tu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ou(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ou(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}_u={exports:{}},Eu=-1,(wu=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}).Diff=function(e,t){return[e,t]},wu.prototype.diff_main=function(e,t,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=r;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[new wu.Diff(0,e)]:[];void 0===n&&(n=!0);var i=n,a=this.diff_commonPrefix(e,t),u=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var c=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var s=this.diff_compute_(e,t,i,o);return u&&s.unshift(new wu.Diff(0,u)),c&&s.push(new wu.Diff(0,c)),this.diff_cleanupMerge(s),s},wu.prototype.diff_compute_=function(e,t,n,r){var o;if(!e)return[new wu.Diff(1,t)];if(!t)return[new wu.Diff(Eu,e)];var i=e.length>t.length?e:t,a=e.length>t.length?t:e,u=i.indexOf(a);if(-1!=u)return o=[new wu.Diff(1,i.substring(0,u)),new wu.Diff(0,a),new wu.Diff(1,i.substring(u+a.length))],e.length>t.length&&(o[0][0]=o[2][0]=Eu),o;if(1==a.length)return[new wu.Diff(Eu,e),new wu.Diff(1,t)];var c=this.diff_halfMatch_(e,t);if(c){var s=c[0],l=c[1],f=c[2],h=c[3],d=c[4],p=this.diff_main(s,f,n,r),v=this.diff_main(l,h,n,r);return p.concat([new wu.Diff(0,d)],v)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},wu.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2;var o=r.lineArray,i=this.diff_main(e,t,!1,n);this.diff_charsToLines_(i,o),this.diff_cleanupSemantic(i),i.push(new wu.Diff(0,""));for(var a=0,u=0,c=0,s="",l="";a<i.length;){switch(i[a][0]){case 1:c++,l+=i[a][1];break;case Eu:u++,s+=i[a][1];break;case 0:if(u>=1&&c>=1){i.splice(a-u-c,u+c),a=a-u-c;for(var f=this.diff_main(s,l,!1,n),h=f.length-1;h>=0;h--)i.splice(a,0,f[h]);a+=f.length}c=0,u=0,s="",l=""}a++}return i.pop(),i},wu.prototype.diff_bisect_=function(e,t,n){for(var r=e.length,o=t.length,i=Math.ceil((r+o)/2),a=i,u=2*i,c=new Array(u),s=new Array(u),l=0;l<u;l++)c[l]=-1,s[l]=-1;c[a+1]=0,s[a+1]=0;for(var f=r-o,h=f%2!=0,d=0,p=0,v=0,y=0,m=0;m<i&&!((new Date).getTime()>n);m++){for(var b=-m+d;b<=m-p;b+=2){for(var g=a+b,_=(k=b==-m||b!=m&&c[g-1]<c[g+1]?c[g+1]:c[g-1]+1)-b;k<r&&_<o&&e.charAt(k)==t.charAt(_);)k++,_++;if(c[g]=k,k>r)p+=2;else if(_>o)d+=2;else if(h&&(O=a+f-b)>=0&&O<u&&-1!=s[O]&&k>=(E=r-s[O]))return this.diff_bisectSplit_(e,t,k,_,n)}for(var w=-m+v;w<=m-y;w+=2){for(var E,O=a+w,S=(E=w==-m||w!=m&&s[O-1]<s[O+1]?s[O+1]:s[O-1]+1)-w;E<r&&S<o&&e.charAt(r-E-1)==t.charAt(o-S-1);)E++,S++;if(s[O]=E,E>r)y+=2;else if(S>o)v+=2;else if(!h){var k;if((g=a+f-w)>=0&&g<u&&-1!=c[g])if(_=a+(k=c[g])-g,k>=(E=r-E))return this.diff_bisectSplit_(e,t,k,_,n)}}}return[new wu.Diff(Eu,e),new wu.Diff(1,t)]},wu.prototype.diff_bisectSplit_=function(e,t,n,r,o){var i=e.substring(0,n),a=t.substring(0,r),u=e.substring(n),c=t.substring(r),s=this.diff_main(i,a,!1,o),l=this.diff_main(u,c,!1,o);return s.concat(l)},wu.prototype.diff_linesToChars_=function(e,t){var n=[],r={};function o(e){for(var t="",o=0,a=-1,u=n.length;a<e.length-1;){-1==(a=e.indexOf("\n",o))&&(a=e.length-1);var c=e.substring(o,a+1);(r.hasOwnProperty?r.hasOwnProperty(c):void 0!==r[c])?t+=String.fromCharCode(r[c]):(u==i&&(c=e.substring(o),a=e.length),t+=String.fromCharCode(u),r[c]=u,n[u++]=c),o=a+1}return t}n[0]="";var i=4e4,a=o(e);return i=65535,{chars1:a,chars2:o(t),lineArray:n}},wu.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],o=[],i=0;i<r.length;i++)o[i]=t[r.charCodeAt(i)];e[n][1]=o.join("")}},wu.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(i,o)==t.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},wu.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},wu.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var o=Math.min(n,r);if(e==t)return o;for(var i=0,a=1;;){var u=e.substring(o-a),c=t.indexOf(u);if(-1==c)return i;a+=c,0!=c&&e.substring(o-a)!=t.substring(0,a)||(i=a,a++)}},wu.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var o=this;function i(e,t,n){for(var r,i,a,u,c=e.substring(n,n+Math.floor(e.length/4)),s=-1,l="";-1!=(s=t.indexOf(c,s+1));){var f=o.diff_commonPrefix(e.substring(n),t.substring(s)),h=o.diff_commonSuffix(e.substring(0,n),t.substring(0,s));l.length<h+f&&(l=t.substring(s-h,s)+t.substring(s,s+f),r=e.substring(0,n-h),i=e.substring(n+f),a=t.substring(0,s-h),u=t.substring(s+f))}return 2*l.length>=e.length?[r,i,a,u,l]:null}var a,u,c,s,l,f=i(n,r,Math.ceil(n.length/4)),h=i(n,r,Math.ceil(n.length/2));return f||h?(a=h?f&&f[4].length>h[4].length?f:h:f,e.length>t.length?(u=a[0],c=a[1],s=a[2],l=a[3]):(s=a[0],l=a[1],u=a[2],c=a[3]),[u,c,s,l,a[4]]):null},wu.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],r=0,o=null,i=0,a=0,u=0,c=0,s=0;i<e.length;)0==e[i][0]?(n[r++]=i,a=c,u=s,c=0,s=0,o=e[i][1]):(1==e[i][0]?c+=e[i][1].length:s+=e[i][1].length,o&&o.length<=Math.max(a,u)&&o.length<=Math.max(c,s)&&(e.splice(n[r-1],0,new wu.Diff(Eu,o)),e[n[r-1]+1][0]=1,r--,i=--r>0?n[r-1]:-1,a=0,u=0,c=0,s=0,o=null,t=!0)),i++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),i=1;i<e.length;){if(e[i-1][0]==Eu&&1==e[i][0]){var l=e[i-1][1],f=e[i][1],h=this.diff_commonOverlap_(l,f),d=this.diff_commonOverlap_(f,l);h>=d?(h>=l.length/2||h>=f.length/2)&&(e.splice(i,0,new wu.Diff(0,f.substring(0,h))),e[i-1][1]=l.substring(0,l.length-h),e[i+1][1]=f.substring(h),i++):(d>=l.length/2||d>=f.length/2)&&(e.splice(i,0,new wu.Diff(0,l.substring(0,d))),e[i-1][0]=1,e[i-1][1]=f.substring(0,f.length-d),e[i+1][0]=Eu,e[i+1][1]=l.substring(d),i++),i++}i++}},wu.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),r=t.charAt(0),o=n.match(wu.nonAlphaNumericRegex_),i=r.match(wu.nonAlphaNumericRegex_),a=o&&n.match(wu.whitespaceRegex_),u=i&&r.match(wu.whitespaceRegex_),c=a&&n.match(wu.linebreakRegex_),s=u&&r.match(wu.linebreakRegex_),l=c&&e.match(wu.blanklineEndRegex_),f=s&&t.match(wu.blanklineStartRegex_);return l||f?5:c||s?4:o&&!a&&u?3:a||u?2:o||i?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var r=e[n-1][1],o=e[n][1],i=e[n+1][1],a=this.diff_commonSuffix(r,o);if(a){var u=o.substring(o.length-a);r=r.substring(0,r.length-a),o=u+o.substring(0,o.length-a),i=u+i}for(var c=r,s=o,l=i,f=t(r,o)+t(o,i);o.charAt(0)===i.charAt(0);){r+=o.charAt(0),o=o.substring(1)+i.charAt(0),i=i.substring(1);var h=t(r,o)+t(o,i);h>=f&&(f=h,c=r,s=o,l=i)}e[n-1][1]!=c&&(c?e[n-1][1]=c:(e.splice(n-1,1),n--),e[n][1]=s,l?e[n+1][1]=l:(e.splice(n+1,1),n--))}n++}},wu.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,wu.whitespaceRegex_=/\s/,wu.linebreakRegex_=/[\r\n]/,wu.blanklineEndRegex_=/\n\r?\n$/,wu.blanklineStartRegex_=/^\r?\n\r?\n/,wu.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],r=0,o=null,i=0,a=!1,u=!1,c=!1,s=!1;i<e.length;)0==e[i][0]?(e[i][1].length<this.Diff_EditCost&&(c||s)?(n[r++]=i,a=c,u=s,o=e[i][1]):(r=0,o=null),c=s=!1):(e[i][0]==Eu?s=!0:c=!0,o&&(a&&u&&c&&s||o.length<this.Diff_EditCost/2&&a+u+c+s==3)&&(e.splice(n[r-1],0,new wu.Diff(Eu,o)),e[n[r-1]+1][0]=1,r--,o=null,a&&u?(c=s=!0,r=0):(i=--r>0?n[r-1]:-1,c=s=!1),t=!0)),i++;t&&this.diff_cleanupMerge(e)},wu.prototype.diff_cleanupMerge=function(e){e.push(new wu.Diff(0,""));for(var t,n=0,r=0,o=0,i="",a="";n<e.length;)switch(e[n][0]){case 1:o++,a+=e[n][1],n++;break;case Eu:r++,i+=e[n][1],n++;break;case 0:r+o>1?(0!==r&&0!==o&&(0!==(t=this.diff_commonPrefix(a,i))&&(n-r-o>0&&0==e[n-r-o-1][0]?e[n-r-o-1][1]+=a.substring(0,t):(e.splice(0,0,new wu.Diff(0,a.substring(0,t))),n++),a=a.substring(t),i=i.substring(t)),0!==(t=this.diff_commonSuffix(a,i))&&(e[n][1]=a.substring(a.length-t)+e[n][1],a=a.substring(0,a.length-t),i=i.substring(0,i.length-t))),n-=r+o,e.splice(n,r+o),i.length&&(e.splice(n,0,new wu.Diff(Eu,i)),n++),a.length&&(e.splice(n,0,new wu.Diff(1,a)),n++),n++):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,o=0,r=0,i="",a=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&this.diff_cleanupMerge(e)},wu.prototype.diff_xIndex=function(e,t){var n,r=0,o=0,i=0,a=0;for(n=0;n<e.length&&(1!==e[n][0]&&(r+=e[n][1].length),e[n][0]!==Eu&&(o+=e[n][1].length),!(r>t));n++)i=r,a=o;return e.length!=n&&e[n][0]===Eu?a:a+(t-i)},wu.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,r=/</g,o=/>/g,i=/\n/g,a=0;a<e.length;a++){var u=e[a][0],c=e[a][1].replace(n,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(i,"&para;<br>");switch(u){case 1:t[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case Eu:t[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[a]="<span>"+c+"</span>"}}return t.join("")},wu.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},wu.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==Eu&&(t[n]=e[n][1]);return t.join("")},wu.prototype.diff_levenshtein=function(e){for(var t=0,n=0,r=0,o=0;o<e.length;o++){var i=e[o][0],a=e[o][1];switch(i){case 1:n+=a.length;break;case Eu:r+=a.length;break;case 0:t+=Math.max(n,r),n=0,r=0}}return t+=Math.max(n,r)},wu.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case Eu:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},wu.prototype.diff_fromDelta=function(e,t){for(var n=[],r=0,o=0,i=t.split(/\t/g),a=0;a<i.length;a++){var u=i[a].substring(1);switch(i[a].charAt(0)){case"+":try{n[r++]=new wu.Diff(1,decodeURI(u))}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var c=parseInt(u,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+u);var s=e.substring(o,o+=c);"="==i[a].charAt(0)?n[r++]=new wu.Diff(0,s):n[r++]=new wu.Diff(Eu,s);break;default:if(i[a])throw new Error("Invalid diff operation in diff_fromDelta: "+i[a])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return n},wu.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},wu.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),o=this;function i(e,r){var i=e/t.length,a=Math.abs(n-r);return o.Match_Distance?i+a/o.Match_Distance:a?1:i}var a=this.Match_Threshold,u=e.indexOf(t,n);-1!=u&&(a=Math.min(i(0,u),a),-1!=(u=e.lastIndexOf(t,n+t.length))&&(a=Math.min(i(0,u),a)));var c,s,l=1<<t.length-1;u=-1;for(var f,h=t.length+e.length,d=0;d<t.length;d++){for(c=0,s=h;c<s;)i(d,n+s)<=a?c=s:h=s,s=Math.floor((h-c)/2+c);h=s;var p=Math.max(1,n-s+1),v=Math.min(n+s,e.length)+t.length,y=Array(v+2);y[v+1]=(1<<d)-1;for(var m=v;m>=p;m--){var b=r[e.charAt(m-1)];if(y[m]=0===d?(y[m+1]<<1|1)&b:(y[m+1]<<1|1)&b|(f[m+1]|f[m])<<1|1|f[m+1],y[m]&l){var g=i(d,m-1);if(g<=a){if(a=g,!((u=m-1)>n))break;p=Math.max(1,2*n-u)}}}if(i(d+1,n)>a)break;f=y}return u},wu.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},wu.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var n=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var o=t.substring(e.start2-r,e.start2);o&&e.diffs.unshift(new wu.Diff(0,o));var i=t.substring(e.start2+e.length1,e.start2+e.length1+r);i&&e.diffs.push(new wu.Diff(0,i)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+i.length,e.length2+=o.length+i.length}},wu.prototype.patch_make=function(e,t,n){var r,o;if("string"==typeof e&&"string"==typeof t&&void 0===n)r=e,(o=this.diff_main(r,t,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&void 0===t&&void 0===n)o=e,r=this.diff_text1(o);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===n)r=e,o=t;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");r=e,o=n}if(0===o.length)return[];for(var i=[],a=new wu.patch_obj,u=0,c=0,s=0,l=r,f=r,h=0;h<o.length;h++){var d=o[h][0],p=o[h][1];switch(u||0===d||(a.start1=c,a.start2=s),d){case 1:a.diffs[u++]=o[h],a.length2+=p.length,f=f.substring(0,s)+p+f.substring(s);break;case Eu:a.length1+=p.length,a.diffs[u++]=o[h],f=f.substring(0,s)+f.substring(s+p.length);break;case 0:p.length<=2*this.Patch_Margin&&u&&o.length!=h+1?(a.diffs[u++]=o[h],a.length1+=p.length,a.length2+=p.length):p.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(a,l),i.push(a),a=new wu.patch_obj,u=0,l=f,c=s)}1!==d&&(c+=p.length),d!==Eu&&(s+=p.length)}return u&&(this.patch_addContext_(a,l),i.push(a)),i},wu.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],o=new wu.patch_obj;o.diffs=[];for(var i=0;i<r.diffs.length;i++)o.diffs[i]=new wu.Diff(r.diffs[i][0],r.diffs[i][1]);o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,t[n]=o}return t},wu.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var r=0,o=[],i=0;i<e.length;i++){var a,u,c=e[i].start2+r,s=this.diff_text1(e[i].diffs),l=-1;if(s.length>this.Match_MaxBits?-1!=(a=this.match_main(t,s.substring(0,this.Match_MaxBits),c))&&(-1==(l=this.match_main(t,s.substring(s.length-this.Match_MaxBits),c+s.length-this.Match_MaxBits))||a>=l)&&(a=-1):a=this.match_main(t,s,c),-1==a)o[i]=!1,r-=e[i].length2-e[i].length1;else if(o[i]=!0,r=a-c,s==(u=-1==l?t.substring(a,a+s.length):t.substring(a,l+this.Match_MaxBits)))t=t.substring(0,a)+this.diff_text2(e[i].diffs)+t.substring(a+s.length);else{var f=this.diff_main(s,u,!1);if(s.length>this.Match_MaxBits&&this.diff_levenshtein(f)/s.length>this.Patch_DeleteThreshold)o[i]=!1;else{this.diff_cleanupSemanticLossless(f);for(var h,d=0,p=0;p<e[i].diffs.length;p++){var v=e[i].diffs[p];0!==v[0]&&(h=this.diff_xIndex(f,d)),1===v[0]?t=t.substring(0,a+h)+v[1]+t.substring(a+h):v[0]===Eu&&(t=t.substring(0,a+h)+t.substring(a+this.diff_xIndex(f,d+v[1].length))),v[0]!==Eu&&(d+=v[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),o]},wu.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",r=1;r<=t;r++)n+=String.fromCharCode(r);for(r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var o=e[0],i=o.diffs;if(0==i.length||0!=i[0][0])i.unshift(new wu.Diff(0,n)),o.start1-=t,o.start2-=t,o.length1+=t,o.length2+=t;else if(t>i[0][1].length){var a=t-i[0][1].length;i[0][1]=n.substring(i[0][1].length)+i[0][1],o.start1-=a,o.start2-=a,o.length1+=a,o.length2+=a}return 0==(i=(o=e[e.length-1]).diffs).length||0!=i[i.length-1][0]?(i.push(new wu.Diff(0,n)),o.length1+=t,o.length2+=t):t>i[i.length-1][1].length&&(a=t-i[i.length-1][1].length,i[i.length-1][1]+=n.substring(0,a),o.length1+=a,o.length2+=a),n},wu.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var r=e[n];e.splice(n--,1);for(var o=r.start1,i=r.start2,a="";0!==r.diffs.length;){var u=new wu.patch_obj,c=!0;for(u.start1=o-a.length,u.start2=i-a.length,""!==a&&(u.length1=u.length2=a.length,u.diffs.push(new wu.Diff(0,a)));0!==r.diffs.length&&u.length1<t-this.Patch_Margin;){var s=r.diffs[0][0],l=r.diffs[0][1];1===s?(u.length2+=l.length,i+=l.length,u.diffs.push(r.diffs.shift()),c=!1):s===Eu&&1==u.diffs.length&&0==u.diffs[0][0]&&l.length>2*t?(u.length1+=l.length,o+=l.length,c=!1,u.diffs.push(new wu.Diff(s,l)),r.diffs.shift()):(l=l.substring(0,t-u.length1-this.Patch_Margin),u.length1+=l.length,o+=l.length,0===s?(u.length2+=l.length,i+=l.length):c=!1,u.diffs.push(new wu.Diff(s,l)),l==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(l.length))}a=(a=this.diff_text2(u.diffs)).substring(a.length-this.Patch_Margin);var f=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==f&&(u.length1+=f.length,u.length2+=f.length,0!==u.diffs.length&&0===u.diffs[u.diffs.length-1][0]?u.diffs[u.diffs.length-1][1]+=f:u.diffs.push(new wu.Diff(0,f))),c||e.splice(++n,0,u)}}},wu.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},wu.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var i=n[r].match(o);if(!i)throw new Error("Invalid patch string: "+n[r]);var a=new wu.patch_obj;for(t.push(a),a.start1=parseInt(i[1],10),""===i[2]?(a.start1--,a.length1=1):"0"==i[2]?a.length1=0:(a.start1--,a.length1=parseInt(i[2],10)),a.start2=parseInt(i[3],10),""===i[4]?(a.start2--,a.length2=1):"0"==i[4]?a.length2=0:(a.start2--,a.length2=parseInt(i[4],10)),r++;r<n.length;){var u=n[r].charAt(0);try{var c=decodeURI(n[r].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==u)a.diffs.push(new wu.Diff(Eu,c));else if("+"==u)a.diffs.push(new wu.Diff(1,c));else if(" "==u)a.diffs.push(new wu.Diff(0,c));else{if("@"==u)break;if(""!==u)throw new Error('Invalid patch mode "'+u+'" in: '+c)}r++}}return t},(wu.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case Eu:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},_u.exports=wu,_u.exports.diff_match_patch=wu,_u.exports.DIFF_DELETE=Eu,_u.exports.DIFF_INSERT=1,_u.exports.DIFF_EQUAL=0;var xu=function(e){var t=[65279,160],n=0;if(0===e.length)return n;for(var r=0;r<e.length;r+=1){var o=e.charCodeAt(r);t.includes(o)||(n=(n<<5)-n+o,n&=n)}return n},Iu=function(e,t){var n=function(t){var n,r,l,f=e[t],h=f.text;if(u){var d=Tu(gu(f.text,o,i),2),p=d[0],v=d[1],y=f.text.length-v;h=f.text.substring(p,y)}var m=function(e){try{return"structuredClone"in globalThis?structuredClone(e):JSON.parse(JSON.stringify(e))}catch(t){return e}}(a[h]);(null==m?void 0:m.timedOut)&&(s+=1),(null==m?void 0:m.contentToReplace)&&m.contentToReplace.forEach(function(e){e.startIndex=e.startIndex+f.start,e.endIndex=e.endIndex+f.start}),(null==m||null===(n=m.fluencyEdits)||void 0===n?void 0:n.result)&&(null==m||null===(l=m.fluencyEdits)||void 0===l||null===(r=l.result)||void 0===r?void 0:r.length)>0&&(m.isFluencyEdits=!0,m.fluencyEdits.result.length>1&&(m.isSentenceLevelFluencyEdits=!0)),c.push(ku({text:f.text,start:f.start,end:f.end,pastCumulativeLength:f.start,sentenceId:"".concat(xu(f.text+t)),isSentencePhrase:!1},m?{grammarResponse:m}:null))},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a={},u=o&&i;r&&r.sentences&&r.sentences.forEach(function(e){return a[e.text]=e});for(var c=[],s=0,l=0;l<e.length;l++)n(l);return t.sentences=c,t.sentenceTimeOutCount=s,t},Du=function(e){for(var t=0;t<e.sentences.length;t++){var n=e.sentences[t];if(n.timedOut&&(e.timedOut=!0),n.modelID&&"NA"!==n.modelID&&(e.modelID=n.modelID),n.discriminatorID&&"NA"!==n.discriminatorID&&(e.discriminatorID=n.discriminatorID),n.explainerID&&"NA"!==n.explainerID&&(e.explainerID=n.explainerID),e.timedOut&&e.modelID&&"NA"!==e.modelID)break}var r=Array.from(function(e){var t=new Set;return e.sentences.forEach(function(e){e.modelID&&t.add(e.modelID)}),t}(e));return e.modelIDArr=r,e};function ju(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Au(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var Cu=function(e,t){if(!t||!e)return t;var n=null==t?void 0:t.map(function(e){var t=a.GENERIC;return Au(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ju(e,t,n[t])})}return e}({},e),{type:t})});return n};function Ru(){}function Nu(e,t,n,r,o){for(var i,a=[];t;)a.push(t),i=t.previousComponent,delete t.previousComponent,t=i;a.reverse();for(var u=0,c=a.length,s=0,l=0;u<c;u++){var f=a[u];if(f.removed){if(f.value=e.join(r.slice(l,l+f.count)),l+=f.count,u&&a[u-1].added){var h=a[u-1];a[u-1]=a[u],a[u]=h}}else{if(!f.added&&o){var d=n.slice(s,s+f.count);d=d.map(function(e,t){var n=r[l+t];return n.length>e.length?n:e}),f.value=e.join(d)}else f.value=e.join(n.slice(s,s+f.count));s+=f.count,f.added||(l+=f.count)}}var p=a[c-1];return c>1&&"string"==typeof p.value&&(p.added||p.removed)&&e.equals("",p.value)&&(a[c-2].value+=p.value,a.pop()),a}Ru.prototype={diff:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.callback;"function"==typeof r&&(o=r,r={}),this.options=r;var i=this;function a(e){return o?(setTimeout(function(){o(void 0,e)},0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var u=(t=this.removeEmpty(this.tokenize(t))).length,c=e.length,s=1,l=u+c;r.maxEditLength&&(l=Math.min(l,r.maxEditLength));var f=null!==(n=r.timeout)&&void 0!==n?n:1/0,h=Date.now()+f,d=[{oldPos:-1,lastComponent:void 0}],p=this.extractCommon(d[0],t,e,0);if(d[0].oldPos+1>=c&&p+1>=u)return a([{value:this.join(t),count:t.length}]);var v=-1/0,y=1/0;function m(){for(var n=Math.max(v,-s);n<=Math.min(y,s);n+=2){var r=void 0,o=d[n-1],l=d[n+1];o&&(d[n-1]=void 0);var f=!1;if(l){var h=l.oldPos-n;f=l&&0<=h&&h<u}var m=o&&o.oldPos+1<c;if(f||m){if(r=!m||f&&o.oldPos+1<l.oldPos?i.addToPath(l,!0,void 0,0):i.addToPath(o,void 0,!0,1),p=i.extractCommon(r,t,e,n),r.oldPos+1>=c&&p+1>=u)return a(Nu(i,r.lastComponent,t,e,i.useLongestToken));d[n]=r,r.oldPos+1>=c&&(y=Math.min(y,n-1)),p+1>=u&&(v=Math.max(v,n+1))}else d[n]=void 0}s++}if(o)!function e(){setTimeout(function(){if(s>l||Date.now()>h)return o();m()||e()},0)}();else for(;s<=l&&Date.now()<=h;){var b=m();if(b)return b}},addToPath:function(e,t,n,r){var o=e.lastComponent;return o&&o.added===t&&o.removed===n?{oldPos:e.oldPos+r,lastComponent:{count:o.count+1,added:t,removed:n,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:t,removed:n,previousComponent:o}}},extractCommon:function(e,t,n,r){for(var o=t.length,i=n.length,a=e.oldPos,u=a-r,c=0;u+1<o&&a+1<i&&this.equals(t[u+1],n[a+1]);)u++,a++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=a,u},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var Lu=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Mu=/\S/,Fu=new Ru;function Uu(e,t,n){return n=function(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(n,{ignoreWhitespace:!0}),Fu.diff(e,t,n)}Fu.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!Mu.test(e)&&!Mu.test(t)},Fu.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&Lu.test(t[n])&&Lu.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};var Gu=new Ru;function Bu(e){return Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(e)}Gu.tokenize=function(e){this.options.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var o=n[r];r%2&&!this.options.newlineIsToken?t[t.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),t.push(o))}return t},(new Ru).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new Ru).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var Wu=Object.prototype.toString,$u=new Ru;function zu(e,t,n,r,o){var i,a;for(t=t||[],n=n||[],r&&(e=r(o,e)),i=0;i<t.length;i+=1)if(t[i]===e)return n[i];if("[object Array]"===Wu.call(e)){for(t.push(e),a=new Array(e.length),n.push(a),i=0;i<e.length;i+=1)a[i]=zu(e[i],t,n,r,o);return t.pop(),n.pop(),a}if(e&&e.toJSON&&(e=e.toJSON()),"object"===Bu(e)&&null!==e){t.push(e),a={},n.push(a);var u,c=[];for(u in e)e.hasOwnProperty(u)&&c.push(u);for(c.sort(),i=0;i<c.length;i+=1)a[u=c[i]]=zu(e[u],t,n,r,u);t.pop(),n.pop()}else a=e;return a}$u.useLongestToken=!0,$u.tokenize=Gu.tokenize,$u.castInput=function(e){var t=this.options,n=t.undefinedReplacement,r=t.stringifyReplacer,o=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(zu(e,null,null,o),o,"  ")},$u.equals=function(e,t){return Ru.prototype.equals.call($u,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var Hu=new Ru;function Vu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){qu(e,t,n[t])})}return e}function Xu(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Yu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Hu.tokenize=function(e){return e.slice()},Hu.join=Hu.removeEmpty=function(e){return e};var Ju={_:"Underscore",",":"Comma",";":"Semicolon",":":"Colon","!":"Exclamation Mark","?":"Question Mark",".":"Period","'":"Apostrophe"},Qu=function(e){var t=ec(e.originalWord,e.replacementWord).textDiffs,n=Yu(e.explainers||[],1)[0],r=(null==n?void 0:n.five_word_title)||"Replace with";return Xu(Ku({},e),{explainers:[Xu(Ku({},n),{category:r,textDiffs:t})]})},Zu=function(e){try{return e.map(function(e){var t=e.sentences.map(function(e){var t,n=((null==e||null===(t=e.grammarResponse)||void 0===t?void 0:t.contentToReplace)||[]).map(Qu);return Xu(Ku({},e),{grammarResponse:Xu(Ku({},e.grammarResponse),{contentToReplace:n})})});return Xu(Ku({},e),{sentences:t})})}catch(t){return e}},ec=function(e,t){var n=[],r=tc(e,t),o=r.isAddedCase,i=r.isRemovedCase,a=r.diffArray,u=" "===t;return 0===t.length||u||(i?n=a:t in Ju||o&&(n=a)),{textDiffs:n}},tc=function(e,t){var n=nc(e,t),r=[],o=[],i=!1,a=!1,u=!0,c=!1,s=void 0;try{for(var l,f=n[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value;h.added&&(r.push(h),i=!0),h.removed&&(o.push(h),a=!0)}}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}return{addedObj:r,diffArray:n,isAddedCase:i&&0===o.length,isRemovedCase:a&&0===r.length,removedObj:o}},nc=function(e,t){return Uu(e,t)};function rc(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function oc(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var ic={logEvent:function(){}},ac=function(e){return(t=function(){var t;return oc(this,function(n){return t=e.logEvent,ic.logEvent=t,[2]})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){rc(i,r,o,a,u,"next",e)}function u(e){rc(i,r,o,a,u,"throw",e)}a(void 0)})})();var t};function uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cc(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function sc(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){cc(i,r,o,a,u,"next",e)}function u(e){cc(i,r,o,a,u,"throw",e)}a(void 0)})}}function lc(e,t,n){return t=dc(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bc()?Reflect.construct(t,n||[],dc(e).constructor):t.apply(e,n))}function fc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dc(e){return dc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dc(e)}function pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){hc(e,t,n[t])})}return e}function vc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function yc(e,t){return yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yc(e,t)}function mc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(bc=function(){return!!e})()}function gc(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var _c=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hc(r=lc(this,t),"_option",void 0),hc(r,"_isFallback",!1),hc(r,"_metaData",{signal:void 0,headers:{},skipCacheCheck:!1}),hc(r,"_recommendation",[]),r._option=e,r._metaData=n,r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yc(e,t)}(t,e),n=t,r=[{key:"recommendation",get:function(){return this._recommendation}},{key:"isFallback",get:function(){return this._isFallback}},{key:"_fallback",value:function(){this._isFallback=!1}},{key:"_isShortCircuit",value:function(){var e;return 0===(null===(e=this._option.texts)||void 0===e?void 0:e.length)}},{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"_setLanguage",value:function(){return sc(function(){var e,t,n,r,o,i;return gc(this,function(a){return e=this._option.language,t=mc(e.split("-"),2),n=t[0],r=t[1],o={uk:"gb"},i="".concat(n),r&&(i="".concat(i,"-").concat(o[r]||r)),this._option.language=i,[2]})}).call(this)}},{key:"_processTexts",value:function(e,t,n){var r=[];return[this._option.texts.map(function(o){var i=vc(pc({},o),{pre:o.pre||"",post:o.post||""});if(!e)return i;var a=mc(gu(o.text,t,n),2),u=a[0],c=a[1],s=o.text.length-c;return r.push({start:u,end:s}),vc(pc({},i),{text:o.text.substring(u,s)})}),r]}},{key:"getCorrectedOffSetRecommendation",value:function(e){var t,n=this;if(0===e.length)return this._recommendation;var r=null===(t=this._recommendation)||void 0===t?void 0:t.map(function(t){var r;return vc(pc({},t),{recommendations:(null==t||null===(r=t.recommendations)||void 0===r?void 0:r.map(function(t,n){var r,o=((null==e?void 0:e[n])||{start:0}).start,i=null==t||null===(r=t.phrases)||void 0===r?void 0:r.map(function(e){var t;return e.phraseDiff=(null==e?void 0:e.phraseDiff)?null==e||null===(t=e.phraseDiff)||void 0===t?void 0:t.map(function(e){return vc(pc({},e),{sourceStart:e.sourceStart+o,sourceEnd:e.sourceEnd+o,targetStart:e.targetStart+o,targetEnd:e.targetEnd+o})}):[],vc(pc({},e),{start:e.start+o,end:e.end+o})});return vc(pc({},t),{phrases:i})}))||n._recommendation})});return r}},{key:"_filterTexts",value:function(e){return sc(function(){var t,n,r,o;return gc(this,function(i){switch(i.label){case 0:t=[],n=[],r=0,i.label=1;case 1:return r<this._option.texts.length?(o=this._option.texts[r],[4,this.isSentenceInIgnoreCache(o)]):[3,4];case 2:i.sent()||o.text.length<e?t.push({index:r,value:o}):n.push(o),i.label=3;case 3:return r++,[3,1];case 4:return[2,{filteredTexts:n,removedTexts:t}]}})}).call(this)}},{key:"isSentenceInIgnoreCache",value:function(e){return sc(function(){var t,n,r;return gc(this,function(o){switch(o.label){case 0:return[4,Jn(e.text.trim())];case 1:return t=o.sent(),[4,ne.get(t)];case 2:return(n=void 0!==o.sent())?[4,ne.getDatabaseSize()]:[3,4];case 3:r=o.sent(),ic.logEvent("recommendation/system/sentenceInIgnoreCache",{count:r}),o.label=4;case 4:return[2,n]}})})()}},{key:"_handleNoValidTexts",value:function(e){return e.map(function(e){return vc(pc({},e.value),{recommendations:[],model_id:"",discriminator_id:"",explainer_id:""})})}},{key:"_load",value:function(){return sc(function(){var e,t,n,r,o,i,a,u,c,s,l,f,d,p,v,y,m,b,g,_,w,E,O,S,k,P,T,x;return gc(this,function(I){switch(I.label){case 0:return e=this,this._beforeLoad(),this.isSkipped?[2,this]:(n=(t=Te).timeout,r=t.retry,o=t.cacheDuration,[4,h.get("VALID_START_SENTENCE_REGEX")]);case 1:return i=I.sent(),[4,h.get("VALID_END_SENTENCE_REGEX")];case 2:return a=I.sent(),u=i&&a,c=mc(this._processTexts(!!u,i,a),2),s=c[0],l=c[1],this._option.texts=s,[4,h.get("RECOMMENDATION_MIN_TEXT_LENGTH")];case 3:return f=+I.sent()||10,this._setLanguage(),d=JSON.parse(JSON.stringify(this._option.texts)),[4,this._filterTexts(f)];case 4:return p=I.sent(),v=p.filteredTexts,y=p.removedTexts,0===v.length?(this._recommendation=this._handleNoValidTexts(y),[2,this]):(this._option.texts=v,[4,h.get("ENABLE_RECOMMENDATION_CONTEXT")]);case 5:return m="true"===I.sent(),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map(function(e){var n,r,o=Boolean(null===(n=e.paragraph)||void 0===n?void 0:n.rteMap),i=o?Oo((null===(r=e.paragraph)||void 0===r?void 0:r.rteMap)||{}):[],a=o&&e.paragraph&&e.relativeOffset?Eo(e.paragraph.text,e.relativeOffset.text.start,e.relativeOffset.text.end+1,e.paragraph.rteMap||{},i):"";return Po({text:e.text,pre:t&&e.pre||"",post:t&&e.post||""},a&&{textHtml:a})})}(this._option.texts,m),[4,h.get("MAX_RECOMMENDATION_CONCURRENT_REQUESTS")];case 6:return g=+I.sent(),[4,h.get("IS_PREMIUM_USER")];case 7:return _="true"===I.sent()?g:5,[4,h.get("RECOMMENDATION_SENTENCES_PER_BATCH")];case 8:w=+I.sent(),this._option&&""===this._option.writingGoal&&delete this._option.writingGoal,I.label=9;case 9:return I.trys.push([9,11,,12]),k=this,[4,Pr.post("api/utils/recommendation?v2=true",pc({json:vc(pc({},this._option),{texts:b}),headers:(null===(E=this._metaData)||void 0===E?void 0:E.headers)||{},batchKey:"texts",batch:w,timeout:n,retry:r,cacheDuration:o,maxConcurrentRequests:_,skipCacheCheck:this._metaData.skipCacheCheck},this._metaData.signal&&{signal:this._metaData.signal}))];case 10:k._apiResponse=I.sent();try{this._apiResponse=JSON.parse(JSON.stringify(this._apiResponse))}catch(e){}return(null==y?void 0:y.length)>0&&y.forEach(function(t){var n,r;null===(r=e._apiResponse)||void 0===r||null===(n=r.data)||void 0===n||n.splice(t.index,0,vc(pc({},t.value),{recommendations:[]}))}),Array.isArray(this._apiResponse.data)&&0!==(null===(O=this._apiResponse.data)||void 0===O?void 0:O.length)?(this._recommendation=Do(this._apiResponse.data,d),this._recommendation=this.getCorrectedOffSetRecommendation(l)):this._recommendation=d.map(function(e){return vc(pc({},e),{model_id:"",discriminator_id:"",explainer_id:"",recommendations:[]})}),this._recommendation=null===(S=this._recommendation)||void 0===S?void 0:S.map(function(e){var t;return vc(pc({},e),{recommendations:null===(t=e.recommendations)||void 0===t?void 0:t.map(function(e){var t;return vc(pc({},e),{phrases:null===(t=e.phrases)||void 0===t?void 0:t.map(function(e){var t=Uu(e.originalPhrase,e.text);return vc(pc({},e),{textDiffs:t})})})})})}),[3,12];case 11:if(P=I.sent(),null===(T=this._metaData.signal)||void 0===T?void 0:T.aborted)throw(x=new Error("AbortError")).reason="AbortError",x;return this._recommendation=d.map(function(e){return vc(pc({},e),{model_id:"",discriminator_id:"",explainer_id:"",recommendations:[]})}),K.error(P),this._skipLoad("apiError",this._fallback.bind(this)),[3,12];case 12:return[2,this]}})}).call(this)}}],o=[{key:"getInstance",value:function(e,n){return sc(function(){return gc(this,function(r){switch(r.label){case 0:return[4,new t(e,n)._load()];case 1:return[2,r.sent()]}})})()}}],r&&fc(n.prototype,r),o&&fc(n,o),t}(Cr);function wc(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ec(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){wc(i,r,o,a,u,"next",e)}function u(e){wc(i,r,o,a,u,"throw",e)}a(void 0)})}}function Oc(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Sc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ec(function(){return Oc(this,function(n){switch(n.label){case 0:return[4,_c.getInstance(e,t)];case 1:return[2,n.sent().recommendation]}})})()},kc=function(e){return Ec(function(){return Oc(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Pr.post("utils/recommendations-list",{json:{language:e},retry:{limit:0}})];case 1:return[2,t.sent().data];case 2:return t.sent(),[2,[]];case 3:return[2]}})})()},Pc=function(e){return Ec(function(){var t;return Oc(this,function(n){switch(n.label){case 0:return e.text.length>0?[4,Jn(e.text.trim())]:[3,3];case 1:return t=n.sent(),[4,ne.set(t,"",2592e5)];case 2:n.sent(),n.label=3;case 3:return[2]}})})()};function Tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xc(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ic(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){xc(i,r,o,a,u,"next",e)}function u(e){xc(i,r,o,a,u,"throw",e)}a(void 0)})}}function Dc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Dc(e,t,n[t])})}return e}function Ac(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Cc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||Nc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rc(e){return function(e){if(Array.isArray(e))return Tc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nc(e,t){if(e){if("string"==typeof e)return Tc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tc(e,t):void 0}}function Lc(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Mc=function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],s=arguments.length>9&&void 0!==arguments[9]&&arguments[9],l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:void 0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:{},p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:function(){};return Ic(function(){var v,y,m,b,g,_,w,E,O,S,k,P,T,x,I,D,j,A;return Lc(this,function(C){switch(C.label){case 0:v=h.get("GC_BATCH"),y=h.get("SS_BATCH"),m=ai("REGIONAL_LANGUAGE")||"",b=Ac(jc({gcBatch:+v,ssBatch:+y},i&&{signal:i}),{headers:jc({"X-Regional-Language":m},d)}),C.label=1;case 1:return C.trys.push([1,7,,8]),[4,h.get("GC_RESPONSE_POST_PROCESS")];case 2:return g="true"===C.sent(),null!==e?[3,4]:[4,Fc(t.paragraphsState,n,b,r,o,p,a,u,c,s,l,f)];case 3:if(w=C.sent(),E=w.grammarResponse,O=w.currentParagraphs,S=O,g&&(S=Zu(O)),t.paragraphsState=S,null===(_=b.signal)||void 0===_?void 0:_.aborted)throw(k=new Error("AbortError")).reason="AbortError",k;return[2,{grammarResponse:E,currentTextState:t}];case 4:return P=function(e,t){var n=[],r={},o={};return t.forEach(function(t){var i=e.find(function(e){return e.text===t.text&&e.id===t.id&&e.startIndex===t.startIndex});if(i&&i.sentences.length>0){r[t.paraID]=Pu(ku({},t),{sentences:i.sentences});var a=t.startIndex-i.startIndex;o[t.paraID]=a}else n.push(t),r[t.paraID]=t,e.find(function(e){return e.paraID===t.paraID})}),{changedParagraphs:n,updatedParagraphState:r,newIndexOffsetForExistingParas:o}}(e.paragraphsState,t.paragraphsState),T=P.changedParagraphs,x=P.updatedParagraphState,I=P.newIndexOffsetForExistingParas,[4,Fc(T,n,b,r,o,p)];case 5:return[2,{grammarResponse:C.sent().grammarResponse,currentTextState:t,updatedParagraphState:x,newIndexOffsetForExistingParas:I}];case 6:return[3,8];case 7:if(D=C.sent(),null===(j=b.signal)||void 0===j?void 0:j.aborted)throw(A=new Error("AbortError")).reason="AbortError",A;throw D;case 8:return[2]}})})()},Fc=function(e,t,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8],s=arguments.length>9&&void 0!==arguments[9]&&arguments[9],l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",f=arguments.length>11?arguments[11]:void 0;return Ic(function(){var d,p,v,y,m,b,g,_,w,E,O;return Lc(this,function(S){switch(S.label){case 0:return d={modelID:"NA",discriminatorID:"NA",explainerID:"NA",timedOut:!1,sentences:[]},p=[],v=[],[4,h.get("VALID_START_SENTENCE_REGEX")];case 1:return y=S.sent(),[4,h.get("VALID_END_SENTENCE_REGEX")];case 2:m=S.sent(),b=function(e){return Ic(function(){return Lc(this,function(t){return e.forEach(function(e){if("fulfilled"===e.status){var t,n=e.value,r=n.paraState,o=n.gcResponse,i=n.sentences;(t=d.sentences).push.apply(t,Rc(o.sentences)),Iu(i,r,d,y,m)}}),[2]})})()},g=0,S.label=3;case 3:return g<e.length?(_=e[g],p.push(Uc(_,t,n,r,o,i,a,u,c,v,s,l,g,f)),w=p.length===n.ssBatch,E=g===e.length-1,w||E?[4,Promise.allSettled(p)]:[3,8]):[3,9];case 4:return O=S.sent(),"true"===ai("ENABLE_RECOMMENDATION_CALLBACK")?[3,6]:[4,Promise.allSettled(v)];case 5:S.sent(),S.label=6;case 6:return[4,b(O)];case 7:S.sent(),p=[],S.label=8;case 8:return g++,[3,3];case 9:return Du(d),[2,{grammarResponse:d,currentParagraphs:e}]}})})()},Uc=function(e,t,n,r,o,i){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=arguments.length>9?arguments[9]:void 0,f=arguments.length>10&&void 0!==arguments[10]&&arguments[10],d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",p=arguments.length>12?arguments[12]:void 0,v=arguments.length>13?arguments[13]:void 0;return new Promise(function(y){Ic(function(){var m,b,g,_,w,E,O,S,k,P,T,x,I,D,j,A,C,R;return Lc(this,function(N){switch(N.label){case 0:return[4,bu({text:e.text,language:t.language,metaData:n})];case 1:return m=N.sent().sentences,i&&i(m,p),[4,h.get("VALID_START_SENTENCE_REGEX")];case 2:return b=N.sent(),[4,h.get("VALID_END_SENTENCE_REGEX")];case 3:return g=N.sent(),[4,h.get("DISABLE_GC_AFTER_FIX_ERROR")];case 4:return _="false"!==N.sent(),w=u&&_,E=u&&c===(null==m?void 0:m.length),w||E||f?(O=function(e){return{modelID:"NA",discriminatorID:"NA",explainerID:"NA",timedOut:!1,sentences:e.map(function(e){return{fixed:e.text,text:e.text,timedOut:!1,modelID:"NA",discriminatorID:"NA",explainerID:"NA",isFluencyModeRequired:!1,isSentenceFragmented:!1,isSentencePassive:!1,isSentenceCliche:!1,isSentenceUnclear:!1,isFluencyEdits:!1,isSentenceVerbose:!1,isSentenceInformal:!1,isSentenceComplex:!1,isSentenceNominalized:!1,isSentenceBland:!1,isRepeatedWords:!1,isSentenceLevelFluencyEdits:!1,fluencyEdits:null,verbosity:null,nominalizedVerbs:null,blandWords:null,contentToReplace:[],repetitiveWordSuggestion:[]}})}}(m),e=Iu(m,e,O,b,g),f&&Wc(e,m,O,s,r,o,n,l,b,g,d),y({paraState:e,gcResponse:O,sentences:m}),[2]):(S=function(e,t){try{if(e){var n=Cu(e,t);if(n&&(null==n?void 0:n.length))return n}return t}catch(e){return t}}(null==e?void 0:e.rteMap,m),k=So(S,e.text,null==e?void 0:e.rteMap),P=[],T=t.checkForClarity||t.checkForCliche||t.checkForFragment,x=!(!b||!g),t.text=k.map(function(e,t){var n,r,o,i,u=jc({text:e.text,type:e.type||a.GENERIC,isLast:t===m.length-1},T?{left:null!==(o=null===(n=m[t-1])||void 0===n?void 0:n.text)&&void 0!==o?o:""}:null,T?{right:null!==(i=null===(r=m[t+1])||void 0===r?void 0:r.text)&&void 0!==i?i:""}:null,e.textHtml?{textHtml:e.textHtml}:{});if(!x)return u;var c=Cc(gu(e.text,b,g),2),s=c[0],l=c[1],f=e.text.length-l;return P.push({start:s,end:f}),Ac(jc({},u),{text:e.text.substring(s,f)})}),void 0!==v&&(t.quickFixEnabled=v),I=jc(Ac(jc({},n),{batch:n.gcBatch}),n.signal&&{signal:n.signal}),[4,Gc(t,I)]);case 5:return D=N.sent(),j=D.sentences.map(function(e,t){var n;if(0===P.length)return e;var r=((null==P?void 0:P[t])||{start:0}).start,o=null==e||null===(n=e.contentToReplace)||void 0===n?void 0:n.map(function(e){return Ac(jc({},e),{startIndex:e.startIndex+r,endIndex:e.endIndex+r})});return Ac(jc({},e),{contentToReplace:o})}),D.sentences=j,r?(e=Iu(m,e,D,b,g),[4,h.get("GC_RESPONSE_POST_PROCESS")]):[3,7];case 6:A="true"===N.sent(),C=e,A&&(C=null===(R=Zu([e]))||void 0===R?void 0:R[0]),r(C),N.label=7;case 7:return Wc(e,m,D,s,r,o,n,l,b,g,d),y({paraState:e,gcResponse:D,sentences:m}),[2]}})})()})},Gc=function(e,t){return Ic(function(){var n;return Lc(this,function(r){switch(r.label){case 0:return[4,no.getInstance(e,t)];case 1:return n=r.sent()._apiResponse,[4,h.get("PERSONALIZATION")];case 2:return"true"===r.sent()&&(n=function(e){try{return e.sentences=e.sentences.map(function(e){return e.contentToReplace=e.contentToReplace.filter(function(e){return!e.isSuppressed}),e}),e}catch(t){return e}}(n)),[2,n]}})})()};function Bc(e){return Ic(function(){var t,n,r,o,i,a,u,c,s,l,f,d;return Lc(this,function(p){switch(p.label){case 0:return t=e.recommendationInput,n=e.recommendationResponseCallback,r=e.writingGoal,o=void 0===r?"":r,[4,h.get("REGIONAL_LANGUAGE")];case 1:return i=p.sent(),[4,h.get("INPUT_LANGUAGE")];case 2:return a=p.sent()||"en",[4,h.get("RECOMMENDATION_DISABLED_CATEGORIES")];case 3:return u=p.sent(),[4,h.get("RECOMMENDATION_PRE_VALIDATE_CHECK")];case 4:return c=p.sent(),s=t,"true"===c&&(s=t.filter(function(e){var t;return 0===(null===(t=e.errors)||void 0===t?void 0:t.length)&&""!==e.text.trim()&&!0!==e.gcTimedOut}).filter(function(e){var t;return null===(t=e.errors)||void 0===t?void 0:t.every(function(e){return e.isSuppressed})})),0===s.length?[2]:(l=[],f=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i={language:"".concat(e.toLowerCase(),"-").concat(t.toLowerCase()),texts:n,writingGoal:o};return r?To(Po({},i),{disabledCategories:r}):i}(a,i,s,u,o),[4,Sc(f,{signal:e.signal,headers:e.headers})]);case 5:return(null==(d=p.sent())?void 0:d.length)>0&&(n&&n(d),l.push(d)),[2,l]}})})()}var Wc=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,s=arguments.length>9?arguments[9]:void 0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"";return Ic(function(){var f,h;return Lc(this,function(d){var p,v;return r&&(f=e,o||(f=Iu(t,e,n,c,s)),v=(p=[f]).flatMap(function(e,t){var n=e.paraID;return e.sentences.map(function(e,r){var o,i,a,u,c=e.start,s=e.text,l=(null===(o=p[t].sentences[r-1])||void 0===o?void 0:o.text)||"",f=(null===(i=p[t].sentences[r+1])||void 0===i?void 0:i.text)||"",h=null===(a=e.grammarResponse)||void 0===a?void 0:a.contentToReplace.map(function(e){return{replacementWord:e.replacementWord,startIndex:e.startIndex,endIndex:e.endIndex,originalWord:e.originalWord,isSuppressed:e.isSuppressed}});return{paraId:n,sentenceId:e.sentenceId,offset:c,errors:h,gcTimedOut:(null===(u=e.grammarResponse)||void 0===u?void 0:u.timedOut)||!1,text:s,pre:l,post:f}})}),h=Bc({recommendationInput:v,recommendationResponseCallback:i,signal:a.signal,headers:a.headers,writingGoal:l}),u.push(h)),[2]})})()};function $c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zc(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Hc(e){return function(e){if(Array.isArray(e))return $c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Vc=function(e){var t=[65279,160],n=0;if(0===e.length)return n;for(var r=0;r<e.length;r+=1){var o=e.charCodeAt(r);t.includes(o)||(n=(n<<5)-n+o,n&=n)}return n},qc={"en-us":"English (US)","de-de":"German (Germany)","pt-br":"Portuguese (Brazil)","ca-es":"Catalan (Spain)"},Kc=function(e,t){var n=Xc(e,t);return qc[n]||"English (US)"},Xc=function(e,t){return t?"".concat((e||"en").toLowerCase(),"-").concat(t.toLowerCase()):e},Yc={English:"EN",German:"DE",French:"FR",Spanish:"ES",Portuguese:"PT",Swiss_German:"DE-CH",Dutch:"NL"},Jc=[{code:Yc.Dutch,name:"Dutch"},{code:Yc.English,name:"English"},{code:Yc.French,name:"French"},{code:Yc.German,name:"German"},{code:Yc.Swiss_German,name:"German (Swiss)"},{code:Yc.Portuguese,name:"Portuguese (Brazilian)"},{code:Yc.Spanish,name:"Spanish"}],Qc={"\xa0":" "};function Zc(e){for(var t="",n=0;n<e.length;n++)e[n]in Qc?t+=Qc[e[n]]:t+=e[n];return t}function es(e){try{var t=new URL(e);if(e.startsWith("https://docs.google.com/")){var n=function(e){var t=e.split("/");if(t.length>3&&"docs.google.com"===t[2]){var n=t[3];return null!=n?n:""}return""}(e);return n?t.origin+"/"+n:t.origin}return t.origin}catch(t){return e}}function ts(e){if(null===e||"object"!=(void 0===e?"undefined":(t=e)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t))return e;var t;if(zc(e,Date))return new Date(e);if(zc(e,RegExp))return new RegExp(e);var n=Array.isArray(e)?[]:{};for(var r in e)n[r]=ts(e[r]);return n}function ns(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function os(e){return function(e){if(Array.isArray(e))return ns(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ns(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ns(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var is=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"_defaultLTResponse",value:function(){return{language:{name:"",code:"",detectedLanguage:{name:"",code:"",confidence:0,source:""}},matches:[],sentenceRanges:[],extendedSentenceRanges:[]}}},{key:"_createLanguageObject",value:function(e,t,n){return{name:e,code:t,detectedLanguage:{name:e,code:t,confidence:n,source:""}}}},{key:"_createSentenceRanges",value:function(e){return e.sentences.map(function(e){return[e.start,e.end]})}},{key:"_createExtendedSentenceRanges",value:function(e,t,n){return e.sentences.map(function(e){var r={from:e.start,to:e.end,detectedLanguages:[{language:t,rate:0}]};return n&&(r.checkStatus=n(e)),r})}},{key:"_getGrammarMatches",value:function(e,t){var n,r=this,o=[];return null==e||null===(n=e.sentences)||void 0===n||n.forEach(function(e){var n,i,a,u=(null==e||null===(n=e.grammarResponse)||void 0===n?void 0:n.modelID)||"";null==e||null===(a=e.grammarResponse)||void 0===a||null===(i=a.contentToReplace)||void 0===i||i.forEach(function(e){if(!r._isReplacementInvalid(e)&&!e.isSuppressed){var n=r._createLTMatch(e,t,u);o.push(n)}})}),o}},{key:"_isReplacementInvalid",value:function(e){var t=""===(null==e?void 0:e.replacementWord),n=""===(null==e?void 0:e.originalWord),r=Zc(null==e?void 0:e.replacementWord)===Zc(null==e?void 0:e.originalWord);return t&&n||r}},{key:"_createLTMatch",value:function(e,t,n){var r,o,i,a,u=(null===(r=e.explainers)||void 0===r?void 0:r[0])||{},c=(null===(o=u.multiple_spelling_suggestion)||void 0===o?void 0:o.filter(function(t){return t!==e.originalWord}))||[],s=this._getIssueType(e,u),l=this._getRuleType(e,s),f=[];return f="style"===s?(null==e||null===(i=e.suggestedWords)||void 0===i?void 0:i.suggestions.map(function(e){return{value:e||"",shortDescription:""}}))||[]:[{value:(null==e?void 0:e.replacementWord)||"",shortDescription:""}].concat(os(c.map(function(e){return{value:e||"",shortDescription:""}}))),{message:u.user_explanation||"",shortMessage:u.category||"",upsellShortMessage:"",goodExample:u.good_example||"",badExample:u.bad_example||"",replacements:f,offset:null==e?void 0:e.startIndex,length:(null==e?void 0:e.endIndex)-(null==e?void 0:e.startIndex)+1,type:{typeName:(null==u?void 0:u.type)||""},rule:{id:l,description:u.example_summary||"",issueType:s,urls:[{value:""}],category:{id:null!==(a=u.error_type_id)&&void 0!==a?a:"",name:u.title||""},isPremium:t,confidence:0,operation:u.operation||"",modelId:n||"",textDiffs:u.textDiffs||[]},ignoreForIncompleteSentence:!1,contextForSureMatch:0}}},{key:"_getIssueType",value:function(e,t){return t.error_type_name?t.error_type_name:e.isSuggestedWord?"style":""}},{key:"_getRuleType",value:function(e,t){return e.isSpellingSuggestion?"SPELLING_RULE":t||e.originalWord+"/"+e.replacementWord}},{key:"_convertToSingleSentenceArray",value:function(e){for(var t=e.length-1;t>0;t--){var n,r=e[t-1],o=e[t];(n=r.sentences).push.apply(n,os(o.sentences)),e.splice(t,1)}return e}}])&&rs(t.prototype,n),r&&rs(t,r),e}();function as(e,t,n){return t=cs(t),function(e,t){if(t&&("object"==(n=t,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof t))return t;var n;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ls()?Reflect.construct(t,n||[],cs(e).constructor):t.apply(e,n))}function us(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cs(e){return cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cs(e)}function ss(e,t){return ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ss(e,t)}function ls(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ls=function(){return!!e})()}var hs,ds,ps,vs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),as(this,t,arguments)}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ss(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}],(r=[{key:"transform",value:function(e){var t,n=e.paragraphState,r=e.langData,o=e.isPremium,i=void 0!==o&&o,a=r.language,u=r.confidence,c=r.region,s=null===(t=this._convertToSingleSentenceArray(n))||void 0===t?void 0:t[0],l=function(e){var t=new Set,n=new Set;try{var r=!0,o=!1,i=void 0;try{for(var a,u=e.sentences[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c,s,l,f=a.value;null==f||null===(s=f.grammarResponse)||void 0===s||null===(c=s.contentToReplace)||void 0===c||c.forEach(function(e){e.modelID&&""!==e.modelID.trim()&&"NA"!==e.modelID.trim()&&t.add(e.modelID)}),(null==f||null===(l=f.grammarResponse)||void 0===l?void 0:l.modelID)&&""!==f.grammarResponse.modelID.trim()&&"NA"!==f.grammarResponse.modelID.trim()&&n.add(f.grammarResponse.modelID)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return t.size>0?Hc(t):Hc(n)}catch(e){return[]}}(s),f=Kc(a,c),h=Xc(a,c),d=this._defaultLTResponse();return d.language=this._createLanguageObject(f,h,u),d.sentenceRanges=this._createSentenceRanges(s),d.extendedSentenceRanges=this._createExtendedSentenceRanges(s,a,function(e){var t;return(null==e||null===(t=e.grammarResponse)||void 0===t?void 0:t.timedOut)?"failure":"success"}),d.matches=this._getGrammarMatches(s,i),d.metaData={textErrors:{errorModelId:l}},d}}])&&us(n.prototype,r),o&&us(n,o),t}(is);ps=void 0,(ds="instance")in(hs=vs)?Object.defineProperty(hs,ds,{value:ps,enumerable:!0,configurable:!0,writable:!0}):hs[ds]=ps;var ys=vs.getInstance();function ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bs(e,t,n){return t=_s(t),function(e,t){if(t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Os()?Reflect.construct(t,n||[],_s(e).constructor):t.apply(e,n))}function gs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _s(e){return _s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_s(e)}function ws(e,t){return ws=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ws(e,t)}function Es(e){return function(e){if(Array.isArray(e))return ms(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ms(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Os(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Os=function(){return!!e})()}var Ss=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bs(this,t,arguments)}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ws(e,t)}(t,e),n=t,r=[{key:"transform",value:function(e){var t,n=e.paragraphState,r=e.langData,o=e.isPremium,i=void 0!==o&&o,a=r.language,u=r.confidence,c=r.region,s=null===(t=this._convertToSingleSentenceArray(n))||void 0===t?void 0:t[0],l=function(e){var t=new Set,n=new Set;try{var r=!0,o=!1,i=void 0;try{for(var a,u=e.sentences[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c,s,l,f,h=a.value;null==h||null===(s=h.recommendationResponse)||void 0===s||null===(c=s.recommendations)||void 0===c||c.forEach(function(e){e.modelId&&""!==e.modelId.trim()&&t.add(e.modelId)}),(null==h||null===(l=h.recommendationResponse)||void 0===l?void 0:l.model_id)&&""!==h.recommendationResponse.model_id.trim()&&n.add(null===(f=h.recommendationResponse)||void 0===f?void 0:f.model_id)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return t.size>0?Hc(t):Hc(n)}catch(e){return[]}}(s),f=Kc(a,c),h=Xc(a,c),d=this._defaultLTResponse();return d.language=this._createLanguageObject(f,h,u),d.sentenceRanges=this._createSentenceRanges(s),d.extendedSentenceRanges=this._createExtendedSentenceRanges(s,a),d.matches=this._getRecommendationMatches(s,i),d.metaData={textErrors:{recommendationModelId:l}},d}},{key:"_getRecommendationMatches",value:function(e,t){var n,r=this,o=[];return null==e||null===(n=e.sentences)||void 0===n||n.forEach(function(e){if(null==e?void 0:e.recommendationResponse){var n,i=r._getRecommendationLTMatches(null==e?void 0:e.recommendationResponse,t);(n=o).push.apply(n,Es(i))}}),o}},{key:"_getRecommendationIssueType",value:function(e){return e.isPhraseLevel?"PHRASAL_RECOMMENDATION":"RECOMMENDATION"}},{key:"getTitle",value:function(e,t){var n;return t||!0===e.isLocked||!1===e.isLocked||void 0===e.isLocked&&(null==e||null===(n=e.text)||void 0===n?void 0:n.length)>0?e.cardName:e.upsellCardName}},{key:"_getRecommendationLTMatches",value:function(e,t){var n,r=this,o=[];return null==e||null===(n=e.recommendations)||void 0===n||n.forEach(function(n){var i;null==n||null===(i=n.phrases)||void 0===i||i.map(function(i){var a,u=n.type,c=i.originalPhrase||"",s=(null==i?void 0:i.text)||"";r._isReplacementInvalid({originalWord:c,replacementWord:s})||c.trim()!==s.trim()&&(t&&0===(null==i||null===(a=i.text)||void 0===a?void 0:a.length)||o.push({message:i.toolTip||"",shortMessage:r.getTitle(i,t),upsellShortMessage:i.upsellCardName||"",goodExample:"",badExample:"",replacements:[{value:i.text||"",htmlValue:i.textHtml||"",shortDescription:""}],offset:i.start,length:i.end-i.start,type:{typeName:""},rule:{id:u,description:"",issueType:r._getRecommendationIssueType(n),urls:[{value:""}],category:{id:i.internalErrorCategory||"",name:i.category||""},isPremium:t,confidence:0,operation:"",modelId:e.model_id||"",textDiffs:(null==i?void 0:i.textDiffs)||[],isPhrase:n.isPhraseLevel,phraseDiff:i.phraseDiff||[],importanceScore:i.importanceScore||0,showInline:i.showInline||!1,isFromCache:(null==e?void 0:e._cached)||!1},isLocked:i.isLocked,ignoreForIncompleteSentence:!1,contextForSureMatch:0}))})}),o}},{key:"transformForceRecommendation",value:function(e){var t=this,n=e.recommendation,r=e.langData,o=e.isPremium,i=void 0!==o&&o,a=r.language,u=r.confidence,c=r.region,s=Kc(a,c),l=Xc(a,c),f=this._defaultLTResponse();f.language=this._createLanguageObject(s,l,u),f.sentenceRanges=n.map(function(e){var t,n;return[null!==(t=e.offset)&&void 0!==t?t:0,e.text.length+(null!==(n=e.offset)&&void 0!==n?n:0)]}),f.extendedSentenceRanges=n.map(function(e){var t,n;return{from:null!==(t=e.offset)&&void 0!==t?t:0,to:e.text.length+(null!==(n=e.offset)&&void 0!==n?n:0),detectedLanguages:[{language:a,rate:0}]}});var h=[];null==n||n.forEach(function(e){var n,r=t._getRecommendationLTMatches(e,i);r&&(n=h).push.apply(n,Es(r))}),f.matches=h;var d=null==n?void 0:n.flatMap(function(e){var t;return null===(t=e.recommendations)||void 0===t?void 0:t.map(function(e){return e.modelId})}),p=n.map(function(e){return e.model_id});return f.metaData={textErrors:{recommendationModelId:d.length>0?d:p}},f}}],o=[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}],r&&gs(n.prototype,r),o&&gs(n,o),t}(is);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ss,"instance",void 0);var ks=Ss.getInstance();function Ps(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ts(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ps(i,r,o,a,u,"next",e)}function u(e){Ps(i,r,o,a,u,"throw",e)}a(void 0)})}}function xs(e,t,n){return t=js(t),function(e,t){if(t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Rs()?Reflect.construct(t,n||[],js(e).constructor):t.apply(e,n))}function Is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ds(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function js(e){return js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},js(e)}function As(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ds(e,t,n[t])})}return e}function Cs(e,t){return Cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Cs(e,t)}function Rs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Rs=function(){return!!e})()}function Ns(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Ls=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ds(r=xs(this,t),"_text",void 0),Ds(r,"_language",""),Ds(r,"_metaData",void 0),Ds(r,"_response",{language:"",score:0,languagePreferenceByCountry:[]}),Ds(r,"_isFallback",!1),r._text=e,r._metaData=n,r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cs(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e,n){return Ts(function(){return Ns(this,function(r){switch(r.label){case 0:return[4,new t(e,n)._load()];case 1:return[2,r.sent()]}})})()}}],(r=[{key:"language",get:function(){return this._language}},{key:"response",get:function(){return this._response}},{key:"isFallback",get:function(){return this._isFallback}},{key:"_fallback",value:function(){this._language="",this._isFallback=!1}},{key:"_isShortCircuit",value:function(){return 0===this._text.length}},{key:"_beforeLoad",value:function(){this._isShortCircuit()&&this._skipLoad("shortCircuit",this._fallback.bind(this))}},{key:"cacheKey",value:function(){return Ts(function(){return Ns(this,function(e){switch(e.label){case 0:return[4,Jn(this._text)];case 1:return[2,e.sent()]}})}).call(this)}},{key:"_load",value:function(){return Ts(function(){var e,t,n,r,o,i,a,u,c;return Ns(this,function(s){switch(s.label){case 0:return this._beforeLoad(),this.isSkipped?[2,this]:(t=(e=ke).retry,n=e.timeout,r=e.cacheDuration,[4,this.cacheKey()]);case 1:o=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),a=this,[4,Pr.post("utils/detect-language",As({json:{text:this._text},headers:(null===(i=this._metaData)||void 0===i?void 0:i.headers)||{},retry:t,timeout:n,cacheDuration:r,maxConcurrentRequests:1,cacheKey:o},this._metaData.signal&&{signal:this._metaData.signal}))];case 3:return a._apiResponse=s.sent(),this._language=this._apiResponse.data.language,this._response=this._apiResponse.data,[3,5];case 4:if(s.sent(),this._skipLoad("apiError",this._fallback.bind(this)),null===(u=this._metaData.signal)||void 0===u?void 0:u.aborted)throw(c=new Error("AbortError")).reason="AbortError",c;return[3,5];case 5:return[2,this]}})}).call(this)}}])&&Is(n.prototype,r),o&&Is(n,o),t}(Cr);function Ms(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Fs(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Ms(i,r,o,a,u,"next",e)}function u(e){Ms(i,r,o,a,u,"throw",e)}a(void 0)})}}function Us(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bs(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Ws=null,$s=function(){return Fs(function(){return Bs(this,function(e){switch(e.label){case 0:return Ws?[3,2]:[4,Promise.resolve().then(function(){return $f})];case 1:Ws=e.sent(),e.label=2;case 2:return[2,Ws]}})})()},zs=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gs(this,"langDetectModel",void 0),Gs(this,"isLoading",null),Gs(this,"isLoadedSuccessfully",!1),Gs(this,"fastTextInstance",null)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}],(n=[{key:"initialize",value:function(){return Fs(function(){var e,t,n,r,o,i;return Bs(this,function(a){switch(a.label){case 0:if(e=this,this.isLoading&&this.isLoadedSuccessfully)return[2,this.isLoading];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,$s()];case 2:return t=a.sent(),n=h.get("ON_DEVICE_LANGUAGE_CONFIG"),r=(null==n?void 0:n.modelPath)||"",o=(null==n?void 0:n.wasmPath)||"",this.fastTextInstance||(this.fastTextInstance=(new t.FastText).loadModel(r,o)),this.isLoading=this.fastTextInstance.then(function(t){return e.langDetectModel=t,e.isLoadedSuccessfully=!0,!0}).catch(function(){throw e.isLoadedSuccessfully=!1,e.fastTextInstance=null,!1}),[2,this.isLoading];case 3:throw i=a.sent(),this.isLoadedSuccessfully=!1,this.fastTextInstance=null,i;case 4:return[2]}})}).call(this)}},{key:"getModel",value:function(){return this.langDetectModel}}])&&Us(t.prototype,n),r&&Us(t,r),e}();function Hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vs(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function qs(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Vs(i,r,o,a,u,"next",e)}function u(e){Vs(i,r,o,a,u,"throw",e)}a(void 0)})}}function Ks(e,t,n){return t=Js(t),function(e,t){if(t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nl()?Reflect.construct(t,n||[],Js(e).constructor):t.apply(e,n))}function Xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Js(e){return Js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Js(e)}function Qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ys(e,t,n[t])})}return e}function Zs(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function el(e,t){return el=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},el(e,t)}function tl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nl=function(){return!!e})()}function rl(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}Gs(zs,"instance",void 0);var ol=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ys(n=Ks(this,t),"_text",void 0),Ys(n,"_result",null),Ys(n,"fastTextManager",void 0),Ys(n,"SLOW_THRESHOLD",150),Ys(n,"FALLBACK_THRESHOLD",400),n._text=e,n.fastTextManager=zs.getInstance(),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&el(e,t)}(t,e),n=t,o=[{key:"sanitizeText",value:function(e){return e.replace(/(\r\n|\n|\r)/gm," ").replace(RegExp("[^\\p{L}\\p{N}\\s]","gu")," ").replace(/\s+/g," ").trim()}},{key:"result",get:function(){return this._result}},{key:"_beforeLoad",value:function(){this._text?this._text=this.sanitizeText(this._text):this._skipLoad("shortCircuit",function(){})}},{key:"identifyLanguage",value:function(e,t){return qs(function(){var n,o,i,a,u,c,l;return rl(this,function(f){try{return n=this.fastTextManager.getModel(),o=tl(n.predict(this._text).get(0),2),i=o[0],a=o[1],u=performance.now()-t,c=a.replace(/^__label__/,""),l=i.toFixed(2),(null==e?void 0:e.slowThreshold)&&u>(e.slowThreshold||this.SLOW_THRESHOLD)&&this.handleSlowDetection(e,u,c),s({eventName:r.ON_DEVICE_LANG_DETECT_COMPLETE,data:{language:c,timeTaken:u,textLength:this._text.length}}),[2,{language:c,score:l}]}catch(e){return s({eventName:r.ON_DEVICE_LANG_DETECT_ERROR,data:{error:e.message,textLength:this._text.length}}),[2,null]}})}).call(this)}},{key:"handleSlowDetection",value:function(e,t,n){s({eventName:r.ON_DEVICE_LANG_DETECT_TOGGLE,data:{service:"languageDetect",value:!1,language:n,timeTaken:t,reason:"slowThreshold"}})}},{key:"_load",value:function(){return qs(function(){var e,n,o,i,a,u,c,l;return rl(this,function(f){switch(f.label){case 0:return e=this,this._beforeLoad(),this.isSkipped?[2,this]:[4,Jn(this._text)];case 1:return o=f.sent(),[4,ye(o)];case 2:return(i=f.sent())?(this._result={language:i.data.language,score:i.data.score},[2,this]):[4,t.initialize()];case 3:return f.sent(),(null===(n=this.fastTextManager.getModel())||void 0===n?void 0:n.predict)?(a=h.get("ON_DEVICE_LANGUAGE_CONFIG"),u=new Promise(function(t){return setTimeout(function(){return t(null)},a.fallbackThreshold||e.FALLBACK_THRESHOLD)}),c=performance.now(),l=this,[4,Promise.race([this.identifyLanguage(a,c),u])]):[2,this];case 4:return l._result=f.sent(),this._result?[3,5]:(s({eventName:r.ON_DEVICE_LANG_DETECT_TIMEOUT,data:{textLength:this._text.length}}),[3,7]);case 5:return[4,me(o,{data:Zs(Qs({},this._result),{languagePreferenceByCountry:[],status:200}),type:"detect-language:on-device"},864e5)];case 6:f.sent(),f.label=7;case 7:return[2,this]}})}).call(this)}}],i=[{key:"getInstance",value:function(e){return qs(function(){return rl(this,function(n){switch(n.label){case 0:return[4,new t(e)._load()];case 1:return[2,n.sent()]}})})()}},{key:"initialize",value:function(){return qs(function(){return rl(this,function(e){switch(e.label){case 0:return[4,zs.getInstance().initialize()];case 1:return[2,e.sent()]}})})()}}],o&&Xs(n.prototype,o),i&&Xs(n,i),t}(Cr);function il(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function al(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var ul=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t=function(){var t,r;return al(this,function(o){switch(o.label){case 0:if(!(null==(t=h.get("ON_DEVICE_LANGUAGE_CONFIG"))?void 0:t.enabled))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,ol.getInstance(e)];case 2:return(r=o.sent()).result?[2,{language:r.result.language,score:r.result.score,isOnDevice:!0,languagePreferenceByCountry:[]}]:[3,4];case 3:return o.sent(),[3,4];case 4:return(null==n?void 0:n.skipHttpRequest)?[2,{language:"",score:0,languagePreferenceByCountry:[]}]:[4,Ls.getInstance(e,n)];case 5:return[2,o.sent().response]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){il(i,r,o,a,u,"next",e)}function u(e){il(i,r,o,a,u,"throw",e)}a(void 0)})})()};function cl(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function sl(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var ll=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t=function(){return sl(this,function(t){switch(t.label){case 0:return[4,Wo.getInstance(e,n)];case 1:return[2,t.sent().unlocked]}})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){cl(i,r,o,a,u,"next",e)}function u(e){cl(i,r,o,a,u,"throw",e)}a(void 0)})})()};function fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hl(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function dl(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){hl(i,r,o,a,u,"next",e)}function u(e){hl(i,r,o,a,u,"throw",e)}a(void 0)})}}function pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){vl(e,t,n[t])})}return e}function ml(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function bl(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function gl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||wl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _l(e){return function(e){if(Array.isArray(e))return fl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wl(e,t){if(e){if("string"==typeof e)return fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fl(e,t):void 0}}function El(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Ol=function(){function e(){var t=this,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vl(this,"_GC_SUPPORTED_LANGUAGES",Jc),vl(this,"_PLATFORM_TYPE","chrome-active"),vl(this,"_PLATFORM_VERSION",""),vl(this,"_inProgressLangDetectRequests",new Map),vl(this,"setGCCoreConfig",function(e){return dl(function(){var t,n,r,o,i,a,u,c,s,l,f;return El(this,function(h){t=e.GC_SUPPORTED_LANGUAGES,n=bl(e,["GC_SUPPORTED_LANGUAGES"]),t&&(this._GC_SUPPORTED_LANGUAGES=t),e.PLATFORM_TYPE&&(this._PLATFORM_TYPE=e.PLATFORM_TYPE),e.PLATFORM_VERSION&&(this._PLATFORM_VERSION=e.PLATFORM_VERSION),r=["GC_SUPPORTED_LANGUAGES"],o=!0,i=!1,a=void 0;try{for(u=Object.entries(n)[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)s=gl(c.value,2),l=s[0],f=s[1],r.includes(l)||void 0===f||ui(l,f)}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return[2]})}).call(t)}),vl(this,"transformRequest",function(e){return{currTextState:{text:"",paragraphsState:function(e){for(var t=[],n=0;n<(null==e?void 0:e.length);n++){var r=e[n],o={paraID:"".concat(Vc((r.text||"")+n)),id:"gc-editor",text:r.text,startIndex:r.offset,endIndex:r.offset+r.text.length-1,paraType:"text",fontSize:"14px",sentences:[],rteMap:null==r?void 0:r.rteMap};t.push(o)}return t}(e)}}}),vl(this,"_detectLanguageIfNeeded",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return dl(function(){var n,o,i,a,u,c,s;return El(this,function(l){switch(l.label){case 0:return n=gl(e.split("-")||[],1),(o=n[0])?[2,{language:o,confidence:1}]:(this._inProgressLangDetectRequests.size>1&&this._inProgressLangDetectRequests.clear(),(null==t?void 0:t.length)<15?[2,{language:Yc.English.toLowerCase(),confidence:1}]:(i=(null==t?void 0:t.slice(0,1e3))||"",this._inProgressLangDetectRequests.has(i)?[4,this._inProgressLangDetectRequests.get(i)]:[3,2]));case 1:return[2,{language:(a=l.sent()).language,confidence:a.score}];case 2:return c=ul(i,ml(yl({},r),{signal:null!==(u=null==r?void 0:r.signal)&&void 0!==u?u:void 0})),this._inProgressLangDetectRequests.set(i,c),[4,c];case 3:return[2,{language:(s=l.sent()).language,confidence:s.score}]}})}).call(n)}),vl(this,"_getRegion",function(e,t){var n;if(!t)return"";var r=gl(t.split("-"),2),o=r[0],i=r[1];return i||((null==e||null===(n=e.find(function(e){return e.startsWith(o)}))||void 0===n?void 0:n.split("-")[1])||"")}),vl(this,"unsupportedLanguageResponse",function(e){var t=Xc(e.language,e.region),n=ys._defaultLTResponse();return n.language=ys._createLanguageObject("NoopLanguage",t,e.confidence),n}),vl(this,"isSupportedLanguage",function(e){return t._GC_SUPPORTED_LANGUAGES.some(function(t){return t.code===e.toUpperCase()})}),vl(this,"_convertRecommendationSentenceIndexToParagraphRelative",function(e,t){if(0===(null==e?void 0:e.length))return[];var n=JSON.parse(JSON.stringify(t));if(null==n||n.forEach(function(t){t.sentences.forEach(function(n){var r=null==e?void 0:e.find(function(e){return(null==n?void 0:n.sentenceId)===(null==e?void 0:e.sentenceId)&&(null==t?void 0:t.paraID)===(null==e?void 0:e.paraId)});r&&(n.recommendationResponse=r)})}),1===n.length)return n[0].sentences[n[0].sentences.length-1].end=n[0].sentences[n[0].sentences.length-1].end+1,n;var r=0;return n.forEach(function(e){var t,n,o=null==e||null===(t=e.sentences)||void 0===t?void 0:t.length;null==e||null===(n=e.sentences)||void 0===n||n.map(function(e,t){var n,i;e.start=e.start+r,e.end=t===o-1?e.end+r+1:e.end+r,null==e||null===(i=e.recommendationResponse)||void 0===i||null===(n=i.recommendations)||void 0===n||n.forEach(function(t,n){t.phrases.forEach(function(t,o){var i,a=ml(yl({},t),{start:t.start+r,end:t.end+r});(null==e||null===(i=e.recommendationResponse)||void 0===i?void 0:i.recommendations)&&(e.recommendationResponse.recommendations[n].phrases[o]=a),t.phraseDiff&&t.phraseDiff.length>0&&t.phraseDiff.forEach(function(t,i){var a,u,c,s,l,f,h=ml(yl({},t),{sourceStart:t.sourceStart+r,sourceEnd:t.sourceEnd+r,targetStart:t.targetStart+r,targetEnd:t.targetEnd+r});(null==e||null===(f=e.recommendationResponse)||void 0===f||null===(l=f.recommendations)||void 0===l||null===(s=l[n])||void 0===s||null===(c=s.phrases)||void 0===c||null===(u=c[o])||void 0===u||null===(a=u.phraseDiff)||void 0===a?void 0:a[i])&&(e.recommendationResponse.recommendations[n].phrases[o].phraseDiff[i]=h)})})})}),r=r+e.text.length+2}),n}),vl(this,"trackRecommendationAnalytics",function(e,t,n){try{var r,o,i={cache:0,api:0};e.map(function(e){e._cached?i.cache++:e.text&&i.api++});var a=t.matches.map(function(e){return{category:e.rule.category.name,modelID:null==e?void 0:e.rule.modelId,isRecommendation:!0}});s({eventName:"gc_model_stats",data:{hostUrl:null===(r=n.metaData)||void 0===r?void 0:r.hostUrl,editorID:null===(o=n.metaData)||void 0===o?void 0:o.instanceId,errors:a,numberOfSentencesProcessedForGC:0,numberOfSentencesProcessedForReco:i.api+i.cache}})}catch(e){}}),vl(this,"getRecommendations",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dl(function(){var n,r,o,i,a,u,c,s,l,f;return El(this,function(h){switch(h.label){case 0:return i=(null==e||null===(n=e.metaData)||void 0===n?void 0:n.hostUrl)?es(null==e||null===(r=e.metaData)||void 0===r?void 0:r.hostUrl):"",a={"x-website-origin":i||"","x-website-url":(null==e||null===(o=e.metaData)||void 0===o?void 0:o.hostUrl)||"","platform-type":this._PLATFORM_TYPE,"platform-version":this._PLATFORM_VERSION},[4,Sc(e.input,ml(yl({},t),{headers:yl({},t.headers,a)}))];case 1:return u=h.sent(),c="true"===ai("IS_PREMIUM_USER"),s=ai("INPUT_LANGUAGE"),l=ai("REGIONAL_LANGUAGE"),f=ks.transformForceRecommendation({recommendation:u,langData:{language:s,region:l,confidence:0},isPremium:c}),this.trackRecommendationAnalytics(u,f,e),[2,f]}})}).call(n)}),vl(this,"getUnlockedRecommendation",function(e,n){return dl(function(){var t,r,o,i,a,u,c,s,l,f;return El(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,,3]),i=(null==e||null===(t=e.metaData)||void 0===t?void 0:t.hostUrl)?es(null==e||null===(r=e.metaData)||void 0===r?void 0:r.hostUrl):"",a={"x-website-origin":i||"","x-website-url":(null==e||null===(o=e.metaData)||void 0===o?void 0:o.hostUrl)||"","platform-type":this._PLATFORM_TYPE,"platform-version":this._PLATFORM_VERSION},u=ml(yl({},n),{headers:yl({},n.headers,a)}),[4,ll(e,u)];case 1:return c=h.sent(),s="true"===ai("IS_PREMIUM_USER"),l=ai("INPUT_LANGUAGE"),f=ai("REGIONAL_LANGUAGE"),(null==c?void 0:c.recommendation)?[2,{recommendation:ks.transformForceRecommendation({recommendation:[null==c?void 0:c.recommendation],langData:{language:l,region:f,confidence:0},isPremium:s}),quota:null==c?void 0:c.quota}]:[2,void 0];case 2:throw h.sent();case 3:return[2]}})}).call(t)}),vl(this,"_getGrammarErrors",function(e,t,n,r){return Mc(e.prevState,e.currentState,e.gcParams,t,n,e.signal,e.hasUserAcceptedSuggestion,e.changedParagraphsSentencesLength,e.shouldCallRecommendation,e.appliedFixAll,e.writingGoal,e.quickFixEnabled,e.header,r)}),vl(this,"reportGrammarAnalysisResults",function(e,t,n,r,o){try{var i,a,u=function(e){try{var t=0,n=0,r=e.flatMap(function(e){return null==e?void 0:e.sentences}),o=!0,i=!1,a=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s,l=u.value;!0===(null===(s=l.grammarResponse)||void 0===s?void 0:s._cached)?t++:l.grammarResponse&&""!==l.text&&n++}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return{cache:t,api:n,total:t+n}}catch(e){return{cache:0,api:0,total:0}}}(e),c=t.map(function(e){return{category:null==e?void 0:e.rule.category.name,modelID:null==e?void 0:e.rule.modelId,isRecommendation:!0}}),l=n.matches.map(function(e){return{category:"",modelID:null==e?void 0:e.rule.modelId,isRecommendation:!1}});s({eventName:"gc_model_stats",data:{hostUrl:null===(i=o.metaData)||void 0===i?void 0:i.hostUrl,editorID:null===(a=o.metaData)||void 0===a?void 0:a.instanceId,errors:_l(c).concat(_l(l)),numberOfSentencesProcessedForGC:u.total,numberOfSentencesProcessedForReco:r.api+r.cache}})}catch(e){}}),vl(this,"_onDeviceSentenceSplitter",function(e,n){return dl(function(){var t,r,o,i,a,u,c,s,l,f,h,d;return El(this,function(p){switch(p.label){case 0:t=[],r=!0,o=!1,i=void 0,p.label=1;case 1:p.trys.push([1,6,7,8]),a=e[Symbol.iterator](),p.label=2;case 2:return(r=(u=a.next()).done)?[3,5]:(c=u.value,[4,bu({text:c.text,language:n,metaData:{ssBatch:1}},{skipHttpRequest:!0})]);case 3:s=p.sent().sentences,t.push(s),p.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return l=p.sent(),o=!0,i=l,[3,8];case 7:try{r||null==a.return||a.return()}finally{if(o)throw i}return[7];case 8:return f=e.map(function(e,n){return ml(yl({},e),{sentences:t[n]||[]})}),h=this._convertSentenceIndexToParagraphRelative(f),d=h.flatMap(function(e){return e.sentences.map(function(e){return[e.start,e.end]})}),[2,d]}})}).call(t)}),vl(this,"getGrammarErrors",function(e){return dl(function(){var t,n,r,o,i,a,u,c,s,l,f,h,d,p,v,y,m,b,g,_,w,E,O,S,k,P,T,x,I,D,j,A,C,R,N,L,M,F,U;return El(this,function(G){switch(G.label){case 0:t=this,G.label=1;case 1:return G.trys.push([1,4,,5]),o=e.input,i=e.gcParams,a=e.handleResponseCallback,u=e.signal,c=void 0===u?null:u,s=e.metaData,l="true"===ai("IS_PREMIUM_USER"),f="true"===ai("ENABLE_RECOMMENDATION_CALLBACK"),h=es((null==s?void 0:s.hostUrl)||""),d=this._prepareCustomHeaders(h,null==s?void 0:s.hostUrl),p={},v=this.transformRequest(o.paragraphs).currTextState,[4,this._detectLanguageIfNeeded(o.language,o.editorCompleteText,{signal:c,headers:d})];case 2:return y=G.sent(),m=y.language,b=y.confidence,g=this._getRegion(o.preferredVariants,o.language||m),this.isSupportedLanguage(m)?(ui("INPUT_LANGUAGE",m),ui("REGIONAL_LANGUAGE",g),_=[],w=!1,E={cache:0,api:0},O=function(e){a&&(null==a||a(ys.transform({paragraphState:[e],langData:{language:m,region:g,confidence:b},isPremium:l}),"grammar-check-response"))},S=function(e){var n=t._convertRecommendationSentenceIndexToParagraphRelative(e,v.paragraphsState),r=ks.transform({paragraphState:n,langData:{language:m,region:g,confidence:b},isPremium:l});f||w?null==a||a(r,"recommendation-response"):_.push(r)},k=function(e,n){var r=x.currentState;if(p[n]=_l(e),r.paragraphsState.length===Object.keys(p).length){var o=r.paragraphsState.map(function(e,t){var n=ts(p[t]||[]);return ml(yl({},e),{sentences:n,grammarResponse:{}})}),i=t._convertSentenceIndexToParagraphRelative(o),u=ys.transform({paragraphState:i,langData:{language:m,region:g,confidence:b},isPremium:l});null==a||a(u,"sentence-splitter-response")}},P=i?ml(yl({},i),{language:null==m?void 0:m.toUpperCase()}):{language:null==m?void 0:m.toUpperCase()},T=Xc(m,g),d["qb-dialect"]=T,x=yl({prevState:null,currentState:v,gcParams:P,header:d,hasUserAcceptedSuggestion:o.hasUserAppliedFix,changedParagraphsSentencesLength:o.changedParagraphsSentencesLength,shouldCallRecommendation:!o.disableRecommendations,appliedFixAll:o.appliedFixAll,writingGoal:o.writingGoal,quickFixEnabled:!!(null==o?void 0:o.quickFixEnabled)},c&&{signal:c}),[4,this._getGrammarErrors(x,O,S,k)]):[2,this.unsupportedLanguageResponse({language:m,region:g,confidence:b})];case 3:return I=G.sent(),D=I.currentTextState.paragraphsState,j=D.map(function(e){return{totalSentences:e.sentences.length,totalGcErrors:null==e?void 0:e.sentenceTimeOutCount,errorCodes:[]}}),w=!0,A=this._convertSentenceIndexToParagraphRelative(D),C=ys.transform({paragraphState:A,langData:{language:m,region:g,confidence:b},isPremium:l}),R=null==_?void 0:_.flatMap(function(e){return null==e?void 0:e.matches}),N=_l(new Set(_.flatMap(function(e){var t,n;return null==e||null===(n=e.metaData)||void 0===n||null===(t=n.textErrors)||void 0===t?void 0:t.recommendationModelId}))),L=ml(yl({},C),{matches:_l(C.matches).concat(_l(R)),metaData:{textErrors:{errorModelId:null==C||null===(r=C.metaData)||void 0===r||null===(n=r.textErrors)||void 0===n?void 0:n.errorModelId,recommendationModelId:N},errorInfo:j}}),this.reportGrammarAnalysisResults(D,R,C,E,e),[2,L];case 4:if(M=G.sent(),null===(F=e.signal)||void 0===F?void 0:F.aborted)throw(U=new Error("AbortError")).reason="AbortError",U;throw M;case 5:return[2]}})}).call(t)})}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){return e._instance||(e._instance=new e),e._instance}}],(n=[{key:"_convertSentenceIndexToParagraphRelative",value:function(e){if(1===e.length)return e[0].sentences.forEach(function(e){var t=e.text.trimEnd().length,n=e.start+t;e.end=n}),e[0].sentences[e[0].sentences.length-1].end=e[0].sentences[e[0].sentences.length-1].end+1,e;var t=[],n=0;return e.forEach(function(e){var r=e.sentences.length,o=e.sentences.map(function(e,t){var o,i=e.text.trimEnd().length,a=e.start+i;e.start=e.start+n,e.end=t===r-1?a+n+1:a+n;var u=null===(o=e.grammarResponse)||void 0===o?void 0:o.contentToReplace.map(function(e){return ml(yl({},e),{startIndex:e.startIndex+n,endIndex:e.endIndex+n})});return ml(yl({},e),{grammarResponse:ml(yl({},e.grammarResponse),{contentToReplace:u})})});n=n+e.text.length+2,t.push(ml(yl({},e),{sentences:o}))}),t}},{key:"_prepareCustomHeaders",value:function(e,t){return{"x-website-origin":e||"","x-website-url":t||"","platform-type":this._PLATFORM_TYPE,"platform-version":this._PLATFORM_VERSION,"qb-Product":"GRAMMAR_CHECKER"}}}])&&pl(t.prototype,n),r&&pl(t,r),e}();vl(Ol,"_instance",void 0);var Sl=null==Ol?void 0:Ol.getInstance(),kl=Sl.setGCCoreConfig,Pl=Sl.getGrammarErrors,Tl=Sl.getRecommendations,xl=Sl.getUnlockedRecommendation,Il=function(){return Pr.get("config/lang/gc-preferences",{headers:{}}).then(function(e){var t;return null===(t=e.data)||void 0===t?void 0:t[0]})},Dl=function(e){return Pr.patch("config/lang/gc-preferences",{json:{rulesMap:e}}).then(function(e){var t;return null===(t=e.data)||void 0===t?void 0:t[0]})};function jl(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Al(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){jl(i,r,o,a,u,"next",e)}function u(e){jl(i,r,o,a,u,"throw",e)}a(void 0)})}}function Cl(e,t,n){return t=Ll(t),function(e,t){if(t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fl()?Reflect.construct(t,n||[],Ll(e).constructor):t.apply(e,n))}function Rl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ll(e){return Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ll(e)}function Ml(e,t){return Ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ml(e,t)}function Fl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Fl=function(){return!!e})()}function Ul(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Gl=!1,Bl=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Nl(n=Cl(this,t),"forced",!1),Nl(n,"timeStamp",""),n.forced=e,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ml(e,t)}(t,e),n=t,o=[{key:"getInstance",value:function(e){return Al(function(){return Ul(this,function(n){switch(n.label){case 0:return[4,new t(e)._load()];case 1:return[2,n.sent()]}})})()}}],(r=[{key:"_isShortCircuit",value:function(){return Gl}},{key:"getTimeStamp",value:function(){return this.timeStamp}},{key:"_fallback",value:function(){return Al(function(){var e;return Ul(this,function(t){return this.timeStamp=null!==(e=h.get("PERSONALISATION_UPDATED_AT"))&&void 0!==e?e:"",[2]})}).call(this)}},{key:"_beforeLoad",value:function(){return Al(function(){return Ul(this,function(e){switch(e.label){case 0:return this.forced&&(Gl=!1,this.forced=!1),this._isShortCircuit()?[4,this._skipLoad("shortCircuit",this._fallback.bind(this))]:[3,2];case 1:e.sent(),e.label=2;case 2:return Gl||(Gl=!0,setTimeout(function(){Gl=!1},3e5)),[2]}})}).call(this)}},{key:"_load",value:function(){return Al(function(){var e;return Ul(this,function(t){switch(t.label){case 0:return[4,this._beforeLoad()];case 1:return t.sent(),this.isSkipped?[2,this]:[4,h.get("USER_ID_TOKEN")];case 2:if(!t.sent())return this._fallback.bind(this),[2,this];t.label=3;case 3:return t.trys.push([3,5,,6]),e=this,[4,Pr.get("api/config/lang/updated-at",{searchParams:{langauge:"default",product:"default"}})];case 4:return e._apiResponse=t.sent(),this.timeStamp=this._apiResponse.data[0].updated_at,[3,6];case 5:return t.sent(),this._skipLoad("apiError",this._fallback.bind(this)),[3,6];case 6:return[2,this]}})}).call(this)}}])&&Rl(n.prototype,r),o&&Rl(n,o),t}(Cr);function Wl(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function $l(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Wl(i,r,o,a,u,"next",e)}function u(e){Wl(i,r,o,a,u,"throw",e)}a(void 0)})}}function zl(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Hl=function(e){return $l(function(){return zl(this,function(t){switch(t.label){case 0:return[4,Bl.getInstance(e)];case 1:return[2,t.sent().timeStamp]}})})()},Vl=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return $l(function(){var t,n;return zl(this,function(r){switch(r.label){case 0:return[4,Hl(e)];case 1:return t=r.sent(),n=ai("PERSONALISATION_UPDATED_AT")||"",t.toString()!==n&&ui("PERSONALISATION_UPDATED_AT",t.toString()),[2,t]}})})()};function ql(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Kl(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){ql(i,r,o,a,u,"next",e)}function u(e){ql(i,r,o,a,u,"throw",e)}a(void 0)})}}function Xl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Xl(e,t,n[t])})}return e}function Jl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function Ql(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Zl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",r=arguments.length>3?arguments[3]:void 0;return Kl(function(){var o,i,a,u;return Ql(this,function(c){return i=(o=xe).timeout,a=o.retry,u=o.cacheDuration,[2,Pr.post("api/utils/quality-score",{json:Jl(Yl({text:e},t.length>0?{tasks:t}:{},r&&{writingType:r}),{language:n}),batchKey:"text",timeout:i,retry:a,cacheDuration:u,maxConcurrentRequests:4,batch:8}).then(function(e){return e})]})})()},ef=function(e){var t=e.sentences,n=e.tasks,r=void 0===n?[]:n,o=e.language,i=void 0===o?"en":o,a=e.writingType;return Kl(function(){var e,n,o,u,c;return Ql(this,function(s){return n=(e=xe).timeout,o=e.retry,u=e.cacheDuration,c=Jl(Yl({sentences:t},r.length>0?{tasks:r}:{},a&&{writingType:a}),{language:i}),[2,Pr.post("api/utils/quality-score-with-context",{json:c,batchKey:"sentences",timeout:n,retry:o,cacheDuration:u,maxConcurrentRequests:4,batch:8}).then(function(e){return e})]})})()};function tf(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function nf(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var rf=300,of=600,af=function(e){return(t=function(){var t;return nf(this,function(n){if(e.length<rf)throw new Error("Input text needs to be at least ".concat(rf," characters"));return t=e.substring(0,of),[2,Pr.post("api/utils/auto-name-document",{json:{text:t}}).then(function(e){return e.data.title})]})},function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){tf(i,r,o,a,u,"next",e)}function u(e){tf(i,r,o,a,u,"throw",e)}a(void 0)})})();var t};function uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cf(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function sf(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){cf(i,r,o,a,u,"next",e)}function u(e){cf(i,r,o,a,u,"throw",e)}a(void 0)})}}function lf(e,t,n){return t=yf(t),function(e,t){if(t&&("object"===Ef(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kf()?Reflect.construct(t,n||[],yf(e).constructor):t.apply(e,n))}function ff(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hf(e,t,n){return hf=kf()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&gf(o,n.prototype),o},hf.apply(null,arguments)}function df(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pf(e,t,n){return t&&df(e.prototype,t),n&&df(e,n),e}function vf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yf(e){return yf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yf(e)}function mf(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gf(e,t)}function bf(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function gf(e,t){return gf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gf(e,t)}function _f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||Of(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wf(e){return function(e){if(Array.isArray(e))return uf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Of(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ef(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function Of(e,t){if(e){if("string"==typeof e)return uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uf(e,t):void 0}}function Sf(e){var t="function"==typeof Map?new Map:void 0;return Sf=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return hf(e,arguments,yf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),gf(r,e)},Sf(e)}function kf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(kf=function(){return!!e})()}function Pf(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Tf=function(){return sf(function(){var e,t,n,r,o,i,a,u,c,s,l,f,h,d,p,v,y,m,b,g,_,w,E,O,S,k,P,T,x,I,D,j,A,C,R,N,L,M,F,U,G,B,W,$,z,H,V,q,K,X,Y,J,Q,Z,ee,te,ne,re,oe,ie,ae,ue,ce,se,le,fe,he,de,pe,ve,ye,me,be,ge,_e,we,Ee,Oe,Se,ke,Pe,Te,xe,Ie,De,je,Ae,Ce,Re,Ne,Le,Me,Fe,Ue,Ge,Be,We,$e,ze,He,Ve,qe,Ke,Xe,Ye,Je,Qe,Ze,et,tt,nt,rt,ot,it,at,ut,ct,st,lt,ft,ht,dt,pt,vt,yt,mt,bt,gt,_t,wt,Et,Ot,St,kt,Pt,Tt,xt,It,Dt,jt,At,Ct,Rt,Nt,Lt,Mt,Ft,Ut,Gt,Bt,Wt,$t,zt,Ht,Vt,qt,Kt,Xt,Yt,Jt,Qt,Zt,en,tn,nn,rn,on,an,un,cn,sn,ln,fn,hn,dn,pn,vn,yn,mn,bn,gn,_n,wn,En,On,Sn,kn,Pn,Tn,xn,In,Dn,jn,An,Cn,Rn,Nn,Ln,Mn,Fn,Un,Gn,Bn,Wn,$n,zn,Hn,Vn,qn,Kn,Xn,Yn,Jn,Qn,Zn,er,tr,nr,rr,or,ir,ar,ur,cr,sr,lr,fr,hr,dr,pr,vr,yr,mr,br,gr,_r,wr,Er,Or,Sr,kr,Pr,Tr,xr,Ir,Dr,jr,Ar=arguments;function Cr(e,t){e||Vr("Assertion failed"+(t?": "+t:""))}function Rr(){if(!_){var e=mr();0==e&&(e+=4);var t=P[e>>2],n=P[e+4>>2];34821223==t&&2310721022==n||Vr("Stack overflow! Stack cookie has been overwritten at ".concat(V(e),", expected hex dwords 0x89BACDFE and 0x2135467, but received ").concat(V(n)," ").concat(V(t))),1668509029!=P[0]&&Vr("Runtime error: The application has corrupted its heap memory area (address zero)!")}}function Nr(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object.getOwnPropertyDescriptor(r,e)||Object.defineProperty(r,e,{configurable:!0,get:function(){var r=n?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":"";Vr("`Module.".concat(e,"` has been replaced by `").concat(t,"`")+r)}})}function Lr(e){Object.getOwnPropertyDescriptor(r,e)||Object.defineProperty(r,e,{configurable:!0,set:function(){Vr("Attempt to set `Module.".concat(e,"` after it has already been processed.  This can happen, for example, when code is injected via '--post-js' rather than '--pre-js'"))}})}function Mr(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}function Fr(e,t){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get:function(){t()}})}function Ur(e,t){Fr(e,function(){X("`".concat(e,"` is not longer defined by emscripten. ").concat(t))})}function Gr(e){Fr(e,function(){var t="`".concat(e,"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line"),n=e;n.startsWith("_")||(n="$"+e),t+=" (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='".concat(n,"')"),Mr(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),X(t)}),Br(e)}function Br(e){Object.getOwnPropertyDescriptor(r,e)||Object.defineProperty(r,e,{configurable:!0,get:function(){var t="'".concat(e,"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)");Mr(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),Vr(t)}})}function Wr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(N||void 0===N)&&(r=console).warn.apply(r,wf(t))}function $r(){var e=g.buffer;r.HEAP8=w=new Int8Array(e),r.HEAP16=O=new Int16Array(e),r.HEAPU8=E=new Uint8Array(e),r.HEAPU16=S=new Uint16Array(e),r.HEAP32=k=new Int32Array(e),r.HEAPU32=P=new Uint32Array(e),r.HEAPF32=T=new Float32Array(e),r.HEAPF64=D=new Float64Array(e),r.HEAP64=x=new BigInt64Array(e),r.HEAPU64=I=new BigUint64Array(e)}function zr(e){var t;L++,null===(t=r.monitorRunDependencies)||void 0===t||t.call(r,L),e?(Cr(!F[e]),F[e]=1,null===U&&"undefined"!=typeof setInterval&&(U=setInterval(function(){if(_)return clearInterval(U),void(U=null);var e=!1;for(var t in F)e||(e=!0,m("still waiting on run dependencies:")),m("dependency: ".concat(t));e&&m("(end of list)")},1e4))):m("warning: run dependency added without ID")}function Hr(e){var t;if(L--,null===(t=r.monitorRunDependencies)||void 0===t||t.call(r,L),e?(Cr(F[e]),delete F[e]):m("warning: run dependency removed without ID"),0==L&&(null!==U&&(clearInterval(U),U=null),M)){var n=M;M=null,n()}}function Vr(e){var t;null===(t=r.onAbort)||void 0===t||t.call(r,e),m(e="Aborted("+e+")"),_=!0;var n=new WebAssembly.RuntimeError(e);throw i(n),n}function qr(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];Cr(j,"native function `".concat(e,"` called before runtime initialization"));var i=ur[e];return Cr(i,"exported native function `".concat(e,"` not found")),Cr(r.length<=t,"native function `".concat(e,"` called with ").concat(r.length," args but expects ").concat(t)),i.apply(void 0,wf(r))}}function Kr(){return r.locateFile?(Wr("locateFile:",e="fasttext_wasm.wasm","scriptDirectory:",d),r.locateFile?r.locateFile(e,d):d+e):"";var e}function Xr(e){if(e==G&&b)return new Uint8Array(b);if(v)return v(e);throw"both async and sync fetching of the wasm failed"}function Yr(e){return sf(function(){var t;return Pf(this,function(n){switch(n.label){case 0:if(b)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,p(e)];case 2:return t=n.sent(),[2,new Uint8Array(t)];case 3:return n.sent(),[3,4];case 4:return[2,Xr(e)]}})})()}function Jr(e,t){return sf(function(){var n,r;return Pf(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Yr(e)];case 1:return n=o.sent(),[4,WebAssembly.instantiate(n,t)];case 2:return[2,o.sent()];case 3:return r=o.sent(),m("failed to asynchronously prepare wasm: ".concat(r)),A(G)&&m("warning: Loading from a file URI (".concat(G,") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing")),Vr(r),[3,4];case 4:return[2]}})})()}function Qr(){return sf(function(){var e,t,n,o,a;function u(e,t){return ur=e.exports,Cr(g=ur.memory,"memory not found in wasm exports"),$r(),Cr(At=ur.__indirect_function_table,"table not found in wasm exports"),Hr("wasm-instantiate"),ur}return Pf(this,function(c){switch(c.label){case 0:if(zr("wasm-instantiate"),e=r,t={env:ar,wasi_snapshot_preview1:ar},r.instantiateWasm)return[2,new Promise(function(e,n){try{r.instantiateWasm(t,function(t,n){u(t),e(t.exports)})}catch(e){m("Module.instantiateWasm callback failed with error: ".concat(e)),n(e)}})];null!=G||(G=Kr()),Wr("asynchronously preparing wasm"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,(l=b,f=G,h=t,sf(function(){var e,t;return Pf(this,function(n){switch(n.label){case 0:if(l||"function"!=typeof WebAssembly.instantiateStreaming||A(f)||s)return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),e=fetch(f,{credentials:"same-origin"}),[4,WebAssembly.instantiateStreaming(e,h)];case 2:return[2,n.sent()];case 3:return t=n.sent(),m("wasm streaming compile failed: ".concat(t)),m("falling back to ArrayBuffer instantiation"),[3,4];case 4:return[2,Jr(f,h)]}})})())];case 2:return n=c.sent(),o=function(t){return Cr(r===e,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),e=null,u(t.instance)}(n),[2,o];case 3:return a=c.sent(),i(a),[2,Promise.reject(a)];case 4:return[2]}var l,f,h})})()}function Zr(e,t,n){Ge.varargs=n;try{var r=Ge.getStreamFromFD(e);switch(t){case 0:if((o=ye())<0)return-28;for(;Ue.streams[o];)o++;return Ue.dupStream(r,o).fd;case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var o=ye();return r.flags|=o,0;case 12:return o=me(),O[o+0>>1]=2,0}return-28}catch(e){if(void 0===Ue||"ErrnoError"!==e.name)throw e;return-e.errno}}function eo(e,t,n){Ge.varargs=n;try{var r=Ge.getStreamFromFD(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return r.tty?0:-59;case 21505:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcgets){var o=r.tty.ops.ioctl_tcgets(r),i=me();k[i>>2]=o.c_iflag||0,k[i+4>>2]=o.c_oflag||0,k[i+8>>2]=o.c_cflag||0,k[i+12>>2]=o.c_lflag||0;for(var a=0;a<32;a++)w[i+a+17]=o.c_cc[a]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcsets){i=me();var u=k[i>>2],c=k[i+4>>2],s=k[i+8>>2],l=k[i+12>>2],f=[];for(a=0;a<32;a++)f.push(w[i+a+17]);return r.tty.ops.ioctl_tcsets(r.tty,t,{c_iflag:u,c_oflag:c,c_cflag:s,c_lflag:l,c_cc:f})}return 0;case 21519:return r.tty?(i=me(),k[i>>2]=0,0):-59;case 21520:return r.tty?-28:-59;case 21531:return i=me(),Ue.ioctl(r,t,i);case 21523:if(!r.tty)return-59;if(r.tty.ops.ioctl_tiocgwinsz){var h=r.tty.ops.ioctl_tiocgwinsz(r.tty);i=me(),O[i>>1]=h[0],O[i+2>>1]=h[1]}return 0;default:return-28}}catch(e){if(void 0===Ue||"ErrnoError"!==e.name)throw e;return-e.errno}}function to(e,t,n,r){Ge.varargs=r;try{t=Ge.getStr(t),t=Ge.calculateAt(e,t);var o=r?ye():0;return Ue.open(t,n,o).fd}catch(e){if(void 0===Ue||"ErrnoError"!==e.name)throw e;return-e.errno}}function no(e){return this.fromWireType(P[e>>2])}function ro(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t.argPackAdvance)throw new TypeError("registerType registeredInstance requires argPackAdvance");return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.name;if(e||ot('type "'.concat(r,'" must have a positive integer typeid pointer')),He.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;ot("Cannot register type '".concat(r,"' twice"))}if(He[e]=t,delete Ve[e],ze.hasOwnProperty(e)){var o=ze[e];delete ze[e],o.forEach(function(e){return e()})}}(e,t,n)}function oo(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=gt(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function o(){return this.isSmartPointer?_t(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):_t(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,a=this.registeredClass.getActualType(t),u=yt[a];if(!u)return o.call(this);i=this.isConst?u.constPointerType:u.pointerType;var c=vt(t,this.registeredClass,i.registeredClass);return null===c?o.call(this):this.isSmartPointer?_t(i.registeredClass.instancePrototype,{ptrType:i,ptr:c,smartPtrType:this,smartPtr:e}):_t(i.registeredClass.instancePrototype,{ptrType:i,ptr:c})}function io(){}function ao(e,t,n,r,o,i,a,u){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=u,this.pureVirtualFunctions=[]}function uo(e,t){if(null===t)return this.isReference&&ot("null is not a valid ".concat(this.name)),0;t.$$||ot('Cannot pass "'.concat(Ze(t),'" as a ').concat(this.name)),t.$$.ptr||ot("Cannot pass deleted object as a pointer of type ".concat(this.name));var n=t.$$.ptrType.registeredClass;return xt(t.$$.ptr,n,this.registeredClass)}function co(e,t){var n;if(null===t)return this.isReference&&ot("null is not a valid ".concat(this.name)),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t&&t.$$||ot('Cannot pass "'.concat(Ze(t),'" as a ').concat(this.name)),t.$$.ptr||ot("Cannot pass deleted object as a pointer of type ".concat(this.name)),!this.isConst&&t.$$.ptrType.isConst&&ot("Cannot convert argument of type ".concat(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name," to parameter type ").concat(this.name));var r=t.$$.ptrType.registeredClass;if(n=xt(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&ot("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:ot("Cannot convert argument of type ".concat(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name," to parameter type ").concat(this.name));break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var o=t.clone();n=this.rawShare(n,Yt.toHandle(function(){return o.delete()})),null!==e&&e.push(this.rawDestructor,n)}break;default:ot("Unsupporting sharing policy")}return n}function so(e,t){if(null===t)return this.isReference&&ot("null is not a valid ".concat(this.name)),0;t.$$||ot('Cannot pass "'.concat(Ze(t),'" as a ').concat(this.name)),t.$$.ptr||ot("Cannot pass deleted object as a pointer of type ".concat(this.name)),t.$$.ptrType.isConst&&ot("Cannot convert argument of type ".concat(t.$$.ptrType.name," to parameter type ").concat(this.name));var n=t.$$.ptrType.registeredClass;return xt(t.$$.ptr,n,this.registeredClass)}function lo(e,t,n,r,o,i,a,u,c,s,l){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=u,this.rawConstructor=c,this.rawShare=s,this.rawDestructor=l,o||void 0!==t.baseClass?this.toWireType=co:r?(this.toWireType=uo,this.destructorFunction=null):(this.toWireType=so,this.destructorFunction=null)}function fo(e,t,n,r,o,i){var a=t.length;a<2&&ot("argTypes array size mismatch! Must at least get return value and 'this' types!"),Cr(!i,"Async bindings are only supported with JSPI.");var u=null!==t[1]&&null!==n,c=function(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].destructorFunction)return!0;return!1}(t),s="void"!==t[0].name,l=a-2,f=function(e){for(var t=e.length-2,n=e.length-1;n>=2&&e[n].optional;--n)t--;return t}(t),h=new Array(l),d=[],p=[];return St(e,function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var v;!function(e,t,n,r,o){if(e<t||e>n){var i=t==n?t:"".concat(t," to ").concat(n);o("function ".concat(r," called with ").concat(e," arguments, expected ").concat(i))}}(i.length,f,l,e,ot),p.length=0,d.length=u?2:1,d[0]=o,u&&(v=t[1].toWireType(p,this),d[1]=v);for(var y=0;y<l;++y)h[y]=t[y+2].toWireType(p,i[y]),d.push(h[y]);return function(e){if(c)$e(p);else for(var n=u?1:2;n<t.length;n++){var r=1===n?v:h[n-2];null!==t[n].destructorFunction&&t[n].destructorFunction(r)}if(s)return t[0].fromWireType(e)}(r.apply(void 0,wf(d)))})}function ho(e,t,n){if(t=Fn(t),!Mn(e))return 28;var r;if(0===e)r=Nn();else{if(!Ln)return 52;r=Rn()}var o=Math.round(1e3*r*1e3);return x[n>>3]=BigInt(o),0}function po(e){try{var t=Ge.getStreamFromFD(e);return Ue.close(t),0}catch(e){if(void 0===Ue||"ErrnoError"!==e.name)throw e;return e.errno}}function vo(e,t,n,r){try{var o=Ge.getStreamFromFD(e),i=Kn(o,t,n);return P[r>>2]=i,0}catch(e){if(void 0===Ue||"ErrnoError"!==e.name)throw e;return e.errno}}function yo(e,t,n,r){t=Fn(t);try{if(isNaN(t))return 61;var o=Ge.getStreamFromFD(e);return Ue.llseek(o,t,n),x[r>>3]=BigInt(o.position),o.getdents&&0===t&&0===n&&(o.getdents=null),0}catch(e){if(void 0===Ue||"ErrnoError"!==e.name)throw e;return e.errno}}function mo(e,t,n,r){try{var o=Ge.getStreamFromFD(e),i=Xn(o,t,n);return P[r>>2]=i,0}catch(e){if(void 0===Ue||"ErrnoError"!==e.name)throw e;return e.errno}}function bo(){var e;e="fetchSettings",Object.getOwnPropertyDescriptor(r,e)&&Vr("`Module.".concat(e,"` was supplied but `").concat(e,"` not included in INCOMING_MODULE_JS_API"))}function go(e,t,n){var r=K();try{return Ct(e)(t,n)}catch(e){if(q(r),!bf(e,C))throw e;pr(1,0)}}function _o(e,t,n,r){var o=K();try{return Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function wo(e,t,n,r,o){var i=K();try{Ct(e)(t,n,r,o)}catch(e){if(q(i),!bf(e,C))throw e;pr(1,0)}}function Eo(e,t,n){var r=K();try{Ct(e)(t,n)}catch(e){if(q(r),!bf(e,C))throw e;pr(1,0)}}function Oo(e,t){var n=K();try{Ct(e)(t)}catch(e){if(q(n),!bf(e,C))throw e;pr(1,0)}}function So(e,t){var n=K();try{return Ct(e)(t)}catch(e){if(q(n),!bf(e,C))throw e;pr(1,0)}}function ko(e){var t=K();try{Ct(e)()}catch(e){if(q(t),!bf(e,C))throw e;pr(1,0)}}function Po(e,t,n,r,o,i){var a=K();try{return Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function To(e,t,n,r){var o=K();try{Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function xo(e,t,n,r,o,i,a){var u=K();try{return Ct(e)(t,n,r,o,i,a)}catch(e){if(q(u),!bf(e,C))throw e;pr(1,0)}}function Io(e,t,n,r,o,i){var a=K();try{Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function Do(e,t,n){var r=K();try{return Ct(e)(t,n)}catch(e){if(q(r),!bf(e,C))throw e;return pr(1,0),0n}}function jo(e,t,n,r,o,i){var a=K();try{Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function Ao(e,t,n,r,o){var i=K();try{return Ct(e)(t,n,r,o)}catch(e){if(q(i),!bf(e,C))throw e;pr(1,0)}}function Co(e){var t=K();try{return Ct(e)()}catch(e){if(q(t),!bf(e,C))throw e;pr(1,0)}}function Ro(e,t,n){var r=K();try{return Ct(e)(t,n)}catch(e){if(q(r),!bf(e,C))throw e;pr(1,0)}}function No(e,t,n,r){var o=K();try{Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function Lo(e,t,n){var r=K();try{return Ct(e)(t,n)}catch(e){if(q(r),!bf(e,C))throw e;pr(1,0)}}function Mo(e,t,n,r){var o=K();try{return Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function Fo(e,t,n,r,o,i,a){var u=K();try{Ct(e)(t,n,r,o,i,a)}catch(e){if(q(u),!bf(e,C))throw e;pr(1,0)}}function Uo(e,t,n,r){var o=K();try{return Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function Go(e,t,n){var r=K();try{Ct(e)(t,n)}catch(e){if(q(r),!bf(e,C))throw e;pr(1,0)}}function Bo(e,t){var n=K();try{return Ct(e)(t)}catch(e){if(q(n),!bf(e,C))throw e;return pr(1,0),0n}}function Wo(e,t,n,r,o){var i=K();try{Ct(e)(t,n,r,o)}catch(e){if(q(i),!bf(e,C))throw e;pr(1,0)}}function $o(e,t,n,r,o,i,a){var u=K();try{Ct(e)(t,n,r,o,i,a)}catch(e){if(q(u),!bf(e,C))throw e;pr(1,0)}}function zo(e,t,n,r){var o=K();try{return Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function Ho(e,t,n,r,o,i){var a=K();try{Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function Vo(e,t,n,r,o,i,a){var u=K();try{Ct(e)(t,n,r,o,i,a)}catch(e){if(q(u),!bf(e,C))throw e;pr(1,0)}}function qo(e,t){var n=K();try{return Ct(e)(t)}catch(e){if(q(n),!bf(e,C))throw e;pr(1,0)}}function Ko(e,t,n,r,o){var i=K();try{Ct(e)(t,n,r,o)}catch(e){if(q(i),!bf(e,C))throw e;pr(1,0)}}function Xo(e,t,n,r){var o=K();try{return Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function Yo(e,t,n,r){var o=K();try{Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function Jo(e,t,n){var r=K();try{Ct(e)(t,n)}catch(e){if(q(r),!bf(e,C))throw e;pr(1,0)}}function Qo(e,t,n,r,o,i,a){var u=K();try{Ct(e)(t,n,r,o,i,a)}catch(e){if(q(u),!bf(e,C))throw e;pr(1,0)}}function Zo(e,t,n,r,o,i){var a=K();try{Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function ei(e,t,n,r,o){var i=K();try{Ct(e)(t,n,r,o)}catch(e){if(q(i),!bf(e,C))throw e;pr(1,0)}}function ti(e,t,n,r,o){var i=K();try{Ct(e)(t,n,r,o)}catch(e){if(q(i),!bf(e,C))throw e;pr(1,0)}}function ni(e,t,n,r,o,i){var a=K();try{return Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function ri(e,t,n,r,o,i){var a=K();try{Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function oi(e,t,n){var r=K();try{Ct(e)(t,n)}catch(e){if(q(r),!bf(e,C))throw e;pr(1,0)}}function ii(e){var t=K();try{return Ct(e)()}catch(e){if(q(t),!bf(e,C))throw e;return pr(1,0),0n}}function ai(e,t,n,r,o,i){var a=K();try{Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function ui(e,t,n,r,o,i){var a=K();try{return Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function ci(e,t,n,r,o,i){var a=K();try{return Ct(e)(t,n,r,o,i)}catch(e){if(q(a),!bf(e,C))throw e;pr(1,0)}}function si(e,t,n,r,o,i,a,u){var c=K();try{return Ct(e)(t,n,r,o,i,a,u)}catch(e){if(q(c),!bf(e,C))throw e;pr(1,0)}}function li(e,t,n,r,o,i,a,u,c,s,l){var f=K();try{return Ct(e)(t,n,r,o,i,a,u,c,s,l)}catch(e){if(q(f),!bf(e,C))throw e;pr(1,0)}}function fi(e,t,n,r,o){var i=K();try{return Ct(e)(t,n,r,o)}catch(e){if(q(i),!bf(e,C))throw e;return pr(1,0),0n}}function hi(e,t,n,r,o,i,a,u,c,s,l,f,h){var d=K();try{return Ct(e)(t,n,r,o,i,a,u,c,s,l,f,h)}catch(e){if(q(d),!bf(e,C))throw e;pr(1,0)}}function di(e,t,n,r){var o=K();try{return Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function pi(e,t,n,r){var o=K();try{return Ct(e)(t,n,r)}catch(e){if(q(o),!bf(e,C))throw e;pr(1,0)}}function vi(e,t,n,r,o,i,a,u){var c=K();try{Ct(e)(t,n,r,o,i,a,u)}catch(e){if(q(c),!bf(e,C))throw e;pr(1,0)}}function yi(e,t,n,r,o,i,a,u,c,s,l,f){var h=K();try{return Ct(e)(t,n,r,o,i,a,u,c,s,l,f)}catch(e){if(q(h),!bf(e,C))throw e;pr(1,0)}}function mi(e,t,n,r,o,i,a,u,c,s,l){var f=K();try{Ct(e)(t,n,r,o,i,a,u,c,s,l)}catch(e){if(q(f),!bf(e,C))throw e;pr(1,0)}}function bi(e,t,n,r,o,i,a,u,c,s,l,f,h,d,p,v){var y=K();try{Ct(e)(t,n,r,o,i,a,u,c,s,l,f,h,d,p,v)}catch(e){if(q(y),!bf(e,C))throw e;pr(1,0)}}function gi(){var e;yr(),e=mr(),Wr("writeStackCookie: ".concat(V(e))),Cr(!(3&e)),0==e&&(e+=4),P[e>>2]=34821223,P[e+4>>2]=2310721022,P[0]=1668509029}function _i(){if(L>0)return Wr("run() called, but dependencies remain, so not running"),void(M=_i);if(gi(),function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)H(r.preRun.shift());Lr("preRun"),B(z)}(),L>0)return Wr("run() called, but dependencies remain, so not running"),void(M=_i);function e(){var e;Cr(!kr),kr=!0,r.calledRun=!0,_||(Wr("initRuntime"),Cr(!j),j=!0,Rr(),r.noFSInit||Ue.initialized||Ue.init(),Te.init(),ur.__wasm_call_ctors(),Ue.ignorePermissions=!1,o(r),null===(e=r.onRuntimeInitialized)||void 0===e||e.call(r),Lr("onRuntimeInitialized"),Cr(!r._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(Rr(),r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)$(r.postRun.shift());Lr("postRun"),B(W)}())}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){return r.setStatus("")},1),e()},1)):e(),Rr()}return Pf(this,function(G){switch(G.label){case 0:if(e=this,r=t=Ar.length>0&&void 0!==Ar[0]?Ar[0]:{},a=new Promise(function(e,t){o=e,i=t}),u="object"==("undefined"==typeof window?"undefined":Ef(window)),c="undefined"!=typeof WorkerGlobalScope,s="object"==("undefined"==typeof process?"undefined":Ef(process))&&"object"==Ef(process.versions)&&"string"==typeof process.versions.node&&"renderer"!=process.type,l=!u&&!s&&!c,f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){vf(e,t,n[t])})}return e}({},r),h="./this.program",d="",s);else if(l){if("object"==("undefined"==typeof process?"undefined":Ef(process))&&"function"==typeof require||"object"==("undefined"==typeof window?"undefined":Ef(window))||"undefined"!=typeof WorkerGlobalScope)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else{if(!u&&!c)throw new Error("environment detection error");if(c?d=self.location.href:"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),d=d.startsWith("blob:")?"":d.slice(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1),"object"!=("undefined"==typeof window?"undefined":Ef(window))&&"undefined"==typeof WorkerGlobalScope)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");c&&(v=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=function(e){return sf(function(){var t;return Pf(this,function(n){switch(n.label){case 0:return A(e)?[2,new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n(r.status)},r.onerror=n,r.send(null)})]:[4,fetch(e,{credentials:"same-origin"})];case 1:if((t=n.sent()).ok)return[2,t.arrayBuffer()];throw new Error(t.status+" : "+t.url)}})})()}}if(y=r.print||function(){}.bind(),m=r.printErr||function(){}.bind(),Object.assign(r,f),f=null,bo(),r.arguments&&r.arguments,Nr("arguments","arguments_"),r.thisProgram&&(h=r.thisProgram),Nr("thisProgram","thisProgram"),Cr(void 0===r.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),Cr(void 0===r.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),Cr(void 0===r.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),Cr(void 0===r.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),Cr(void 0===r.read,"Module.read option was removed"),Cr(void 0===r.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),Cr(void 0===r.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),Cr(void 0===r.setWindowTitle,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),Cr(void 0===r.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Nr("asm","wasmExports"),Nr("readAsync","readAsync"),Nr("readBinary","readBinary"),Nr("setWindowTitle","setWindowTitle"),Cr(!l,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable."),b=r.wasmBinary,Nr("wasmBinary","wasmBinary"),"object"!=("undefined"==typeof WebAssembly?"undefined":Ef(WebAssembly))&&m("no native wasm support detected"),_=!1,j=!1,A=function(e){return e.startsWith("file://")},C=function(e){function t(){return ff(this,t),lf(this,t,arguments)}return mf(t,e),t}(Sf(Error)),R=function(e){function t(e){var n;ff(this,t),(n=lf(this,t,[e])).excPtr=e;var r=ir(e);return n.name=r[0],n.message=r[1],n}return mf(t,e),t}(C),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"}(),r.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");return Ur("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Ur("asm","Please use wasmExports instead"),N=!0,Cr(!r.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),Cr("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),Cr(!r.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),Cr(!r.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),L=0,M=null,F={},U=null,B=function(e){for(;e.length>0;)e.shift()(r)},W=[],$=function(e){return W.unshift(e)},z=[],H=function(e){return z.unshift(e)},r.noExitRuntime,V=function(e){return Cr("number"==typeof e),"0x"+(e>>>=0).toString(16).padStart(8,"0")},q=function(e){return br(e)},K=function(){return _r()},X=function(e){var t;(t=X).shown||(t.shown={}),X.shown[e]||(X.shown[e]=1,s&&(e="warning: "+e),m(e))},Y="undefined"!=typeof TextDecoder?new TextDecoder:void 0,J=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN),r=t;e[r]&&!(r>=n);)++r;if(r-t>16&&e.buffer&&Y)return Y.decode(e.subarray(t,r));for(var o="";t<r;){var i=e[t++];if(128&i){var a=63&e[t++];if(192!=(224&i)){var u=63&e[t++];if(224==(240&i)?i=(15&i)<<12|a<<6|u:(240!=(248&i)&&X("Invalid UTF-8 leading byte "+V(i)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),i=(7&i)<<18|a<<12|u<<6|63&e[t++]),i<65536)o+=String.fromCharCode(i);else{var c=i-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&i)<<6|a)}else o+=String.fromCharCode(i)}return o},Q=function(e,t){return Cr("number"==typeof e,"UTF8ToString expects a number (got ".concat(void 0===e?"undefined":Ef(e),")")),e?J(E,e,t):""},Z=function(e,t,n,r){return Vr("Assertion failed: ".concat(Q(e),", at: ")+[t?Q(t):"unknown filename",n,r?Q(r):"unknown function"])},ee=[],te=0,ne=function(e){var t=new ae(e);return t.get_caught()||(t.set_caught(!0),te--),t.set_rethrown(!1),ee.push(t),Wr("__cxa_begin_catch "+[V(e),"stack",ee]),Er(e),sr(e)},re=function(){if(!ee.length)return 0;var e=ee[ee.length-1];return Er(e.excPtr),e.excPtr},oe=0,ie=function(){pr(0,0),Cr(ee.length>0);var e=ee.pop();Wr("__cxa_end_catch popped "+[e,oe,"stack",ee]),wr(e.excPtr),oe=0},ae=function(){function e(t){ff(this,e),this.excPtr=t,this.ptr=t-24}return pf(e,[{key:"set_type",value:function(e){P[this.ptr+4>>2]=e}},{key:"get_type",value:function(){return P[this.ptr+4>>2]}},{key:"set_destructor",value:function(e){P[this.ptr+8>>2]=e}},{key:"get_destructor",value:function(){return P[this.ptr+8>>2]}},{key:"set_caught",value:function(e){e=e?1:0,w[this.ptr+12]=e}},{key:"get_caught",value:function(){return 0!=w[this.ptr+12]}},{key:"set_rethrown",value:function(e){e=e?1:0,w[this.ptr+13]=e}},{key:"get_rethrown",value:function(){return 0!=w[this.ptr+13]}},{key:"init",value:function(e,t){Wr("ExceptionInfo init: "+[e,t]),this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t)}},{key:"set_adjusted_ptr",value:function(e){P[this.ptr+16>>2]=e}},{key:"get_adjusted_ptr",value:function(){return P[this.ptr+16>>2]}}]),e}(),ue=function(e){return vr(e)},ce=function(e){var t=null==oe?void 0:oe.excPtr;if(!t)return ue(0),0;var n=new ae(t);n.set_adjusted_ptr(t);var r=n.get_type();if(!r)return ue(0),t;Wr("findMatchingCatch on "+V(t));var o=!0,i=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;if(0===s||s===r)break;var l=n.ptr+16;if(Sr(s,r,l))return Wr("  findMatchingCatch found "+[V(n.get_adjusted_ptr()),s]),ue(s),t}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return ue(r),t},se=function(){return ce([])},le=function(e){return ce([e])},fe=function(){var e=ee.pop();e||Vr("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(ee.push(e),e.set_rethrown(!0),e.set_caught(!1),te++),Wr("__cxa_rethrow, popped "+[V(t),oe,"stack",ee]),oe=new R(t)},he=function(e){if(e){var t=new ae(e);ee.push(t),t.set_rethrown(!0),fe()}},de=function(e,t,n){throw Wr("__cxa_throw: "+[V(e),t,V(n)]),new ae(e).init(t,n),oe=new R(e),te++,oe},pe=function(){return te},ve=function(e){throw Wr("__resumeException "+[V(e),oe]),oe||(oe=new R(e)),oe},me=ye=function(){Cr(null!=Ge.varargs);var e=k[+Ge.varargs>>2];return Ge.varargs+=4,e},be={isAbs:function(e){return"/"===e.charAt(0)},splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t=be.isAbs(e),n="/"===e.slice(-1);return(e=be.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=be.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.slice(0,-1)),n+r):"."},basename:function(e){return e&&e.match(/([^\/]+|\/)\/*$/)[1]},join:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return be.normalize(t.join("/"))},join2:function(e,t){return be.normalize(e+"/"+t)}},ge=function(){if(s){var e=require("crypto");return function(t){return e.randomFillSync(t)}}return function(e){return crypto.getRandomValues(e)}},_e=function(e){(_e=ge())(e)},we={resolve:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r="",o=!1,i=t.length-1;i>=-1&&!o;i--){var a=i>=0?t[i]:Ue.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");if(!a)return"";r=a+"/"+r,o=be.isAbs(a)}return(o?"/":"")+(r=be.normalizeArray(r.split("/").filter(function(e){return!!e}),!o).join("/"))||"."},relative:function(e,t){var n=function(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)};e=we.resolve(e).slice(1),t=we.resolve(t).slice(1);for(var r=n(e.split("/")),o=n(t.split("/")),i=Math.min(r.length,o.length),a=i,u=0;u<i;u++)if(r[u]!==o[u]){a=u;break}var c=[];for(u=a;u<r.length;u++)c.push("..");return(c=c.concat(o.slice(a))).join("/")}},Ee=[],Oe=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},Se=function(e,t,n,r){if(Cr("string"==typeof e,"stringToUTF8Array expects a string (got ".concat(void 0===e?"undefined":Ef(e),")")),!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var u=e.charCodeAt(a);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&e.charCodeAt(++a)),u<=127){if(n>=i)break;t[n++]=u}else if(u<=2047){if(n+1>=i)break;t[n++]=192|u>>6,t[n++]=128|63&u}else if(u<=65535){if(n+2>=i)break;t[n++]=224|u>>12,t[n++]=128|u>>6&63,t[n++]=128|63&u}else{if(n+3>=i)break;u>1114111&&X("Invalid Unicode code point "+V(u)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[n++]=240|u>>18,t[n++]=128|u>>12&63,t[n++]=128|u>>6&63,t[n++]=128|63&u}}return t[n]=0,n-o},ke=function(e,t,n){var r=n>0?n:Oe(e)+1,o=new Array(r),i=Se(e,o,0,o.length);return t&&(o.length=i),o},Pe=function(){if(!Ee.length){var e=null;if(s){var t=Buffer.alloc(256),n=0,r=process.stdin.fd;try{n=fs.readSync(r,t,0,256)}catch(e){if(!e.toString().includes("EOF"))throw e;n=0}n>0&&(e=t.slice(0,n).toString("utf-8"))}else"undefined"!=typeof window&&"function"==typeof window.prompt&&null!==(e=window.prompt("Input: "))&&(e+="\n");if(!e)return null;Ee=ke(e,!0)}return Ee.shift()},Te={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Te.ttys[e]={input:[],output:[],ops:t},Ue.registerDevice(e,Te.stream_ops)},stream_ops:{open:function(e){var t=Te.ttys[e.node.rdev];if(!t)throw new Ue.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,n,r,o){if(!e.tty||!e.tty.ops.get_char)throw new Ue.ErrnoError(60);for(var i=0,a=0;a<r;a++){var u;try{u=e.tty.ops.get_char(e.tty)}catch(e){throw new Ue.ErrnoError(29)}if(void 0===u&&0===i)throw new Ue.ErrnoError(6);if(null==u)break;i++,t[n+a]=u}return i&&(e.node.atime=Date.now()),i},write:function(e,t,n,r,o){if(!e.tty||!e.tty.ops.put_char)throw new Ue.ErrnoError(60);try{for(var i=0;i<r;i++)e.tty.ops.put_char(e.tty,t[n+i])}catch(e){throw new Ue.ErrnoError(29)}return r&&(e.node.mtime=e.node.ctime=Date.now()),i}},default_tty_ops:{get_char:function(e){return Pe()},put_char:function(e,t){null===t||10===t?(y(J(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){var t;(null===(t=e.output)||void 0===t?void 0:t.length)>0&&(y(J(e.output)),e.output=[])},ioctl_tcgets:function(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets:function(e,t,n){return 0},ioctl_tiocgwinsz:function(e){return[24,80]}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(m(J(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){var t;(null===(t=e.output)||void 0===t?void 0:t.length)>0&&(m(J(e.output)),e.output=[])}}},xe=function(e){Vr("internal error: mmapAlloc called but `emscripten_builtin_memalign` native symbol not exported")},Ie={ops_table:null,mount:function(e){return Ie.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){var o;if(Ue.isBlkdev(n)||Ue.isFIFO(n))throw new Ue.ErrnoError(63);(o=Ie).ops_table||(o.ops_table={dir:{node:{getattr:Ie.node_ops.getattr,setattr:Ie.node_ops.setattr,lookup:Ie.node_ops.lookup,mknod:Ie.node_ops.mknod,rename:Ie.node_ops.rename,unlink:Ie.node_ops.unlink,rmdir:Ie.node_ops.rmdir,readdir:Ie.node_ops.readdir,symlink:Ie.node_ops.symlink},stream:{llseek:Ie.stream_ops.llseek}},file:{node:{getattr:Ie.node_ops.getattr,setattr:Ie.node_ops.setattr},stream:{llseek:Ie.stream_ops.llseek,read:Ie.stream_ops.read,write:Ie.stream_ops.write,mmap:Ie.stream_ops.mmap,msync:Ie.stream_ops.msync}},link:{node:{getattr:Ie.node_ops.getattr,setattr:Ie.node_ops.setattr,readlink:Ie.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ie.node_ops.getattr,setattr:Ie.node_ops.setattr},stream:Ue.chrdev_stream_ops}});var i=Ue.createNode(e,t,n,r);return Ue.isDir(i.mode)?(i.node_ops=Ie.ops_table.dir.node,i.stream_ops=Ie.ops_table.dir.stream,i.contents={}):Ue.isFile(i.mode)?(i.node_ops=Ie.ops_table.file.node,i.stream_ops=Ie.ops_table.file.stream,i.usedBytes=0,i.contents=null):Ue.isLink(i.mode)?(i.node_ops=Ie.ops_table.link.node,i.stream_ops=Ie.ops_table.link.stream):Ue.isChrdev(i.mode)&&(i.node_ops=Ie.ops_table.chrdev.node,i.stream_ops=Ie.ops_table.chrdev.stream),i.atime=i.mtime=i.ctime=Date.now(),e&&(e.contents[t]=i,e.atime=e.mtime=e.ctime=i.atime),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Ue.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Ue.isDir(e.mode)?t.size=4096:Ue.isFile(e.mode)?t.size=e.usedBytes:Ue.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){for(var n=0,r=["mode","atime","mtime","ctime"];n<r.length;n++){var o=r[n];null!=t[o]&&(e[o]=t[o])}void 0!==t.size&&Ie.resizeFileStorage(e,t.size)},lookup:function(e,t){throw new Ue.ErrnoError(44)},mknod:function(e,t,n,r){return Ie.createNode(e,t,n,r)},rename:function(e,t,n){var r;try{r=Ue.lookupNode(t,n)}catch(e){}if(r){if(Ue.isDir(e.mode))for(var o in r.contents)throw new Ue.ErrnoError(55);Ue.hashRemoveNode(r)}delete e.parent.contents[e.name],t.contents[n]=e,e.name=n,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink:function(e,t){delete e.contents[t],e.ctime=e.mtime=Date.now()},rmdir:function(e,t){var n=Ue.lookupNode(e,t);for(var r in n.contents)throw new Ue.ErrnoError(55);delete e.contents[t],e.ctime=e.mtime=Date.now()},readdir:function(e){return[".",".."].concat(wf(Object.keys(e.contents)))},symlink:function(e,t,n){var r=Ie.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!Ue.isLink(e.mode))throw new Ue.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,o){var i=e.node.contents;if(o>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-o,r);if(Cr(a>=0),a>8&&i.subarray)t.set(i.subarray(o,o+a),n);else for(var u=0;u<a;u++)t[n+u]=i[o+u];return a},write:function(e,t,n,r,o,i){if(Cr(!bf(t,ArrayBuffer)),t.buffer===w.buffer&&(i=!1),!r)return 0;var a=e.node;if(a.mtime=a.ctime=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return Cr(0===o,"canOwn must imply no weird position inside the file"),a.contents=t.subarray(n,n+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===o)return a.contents=t.slice(n,n+r),a.usedBytes=r,r;if(o+r<=a.usedBytes)return a.contents.set(t.subarray(n,n+r),o),r}if(Ie.expandFileStorage(a,o+r),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(n,n+r),o);else for(var u=0;u<r;u++)a.contents[o+u]=t[n+u];return a.usedBytes=Math.max(a.usedBytes,o+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&Ue.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new Ue.ErrnoError(28);return r},mmap:function(e,t,n,r,o){if(!Ue.isFile(e.node.mode))throw new Ue.ErrnoError(43);var i,a,u=e.node.contents;if(2&o||!u||u.buffer!==w.buffer){if(a=!0,!(i=xe()))throw new Ue.ErrnoError(48);u&&((n>0||n+t<u.length)&&(u=u.subarray?u.subarray(n,n+t):Array.prototype.slice.call(u,n,n+t)),w.set(u,i))}else a=!1,i=u.byteOffset;return{ptr:i,allocated:a}},msync:function(e,t,n,r,o){return Ie.stream_ops.write(e,t,0,r,n,!1),0}}},De=function(e){return sf(function(){var t;return Pf(this,function(n){switch(n.label){case 0:return[4,p(e)];case 1:return Cr(t=n.sent(),'Loading data file "'.concat(e,'" failed (no arrayBuffer).')),[2,new Uint8Array(t)]}})})()},je=function(e,t,n,r,o,i){Ue.createDataFile(e,t,n,r,o,i)},Ae=r.preloadPlugins||[],Ce=function(e,t,n,r){"undefined"!=typeof Browser&&Browser.init();var o=!1;return Ae.forEach(function(i){o||i.canHandle(t)&&(i.handle(e,t,n,r),o=!0)}),o},Re=function(e,t,n,r,o,i,a,u,c,s){var l=function(n){function l(n){null==s||s(),u||je(e,t,n,r,o,c),null==i||i(),Hr(h)}Ce(n,f,l,function(){null==a||a(),Hr(h)})||l(n)},f=t?we.resolve(be.join2(e,t)):e,h=function(e){for(var t=e;;){if(!F[e])return e;e=t+Math.random()}}("cp ".concat(f));zr(h),"string"==typeof n?De(n).then(l,a):l(n)},Ne=function(e){var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===t)throw new Error("Unknown file open mode: ".concat(e));return t},Le=function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},Me=function(e){return Q(dr(e))},Fe={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},Ue={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:function(e){function t(e){var n;for(var r in ff(this,t),vf(n=lf(this,t,[j?Me(e):""]),"name","ErrnoError"),n.errno=e,Fe)if(Fe[r]===e){n.code=r;break}return n}return mf(t,e),t}(Sf(Error)),FSStream:function(){function e(){ff(this,e),vf(this,"shared",{})}return pf(e,[{key:"object",get:function(){return this.node},set:function(e){this.node=e}},{key:"isRead",get:function(){return 1!=(2097155&this.flags)}},{key:"isWrite",get:function(){return!!(2097155&this.flags)}},{key:"isAppend",get:function(){return 1024&this.flags}},{key:"flags",get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},{key:"position",get:function(){return this.shared.position},set:function(e){this.shared.position=e}}]),e}(),FSNode:function(){function e(t,n,r,o){ff(this,e),vf(this,"node_ops",{}),vf(this,"stream_ops",{}),vf(this,"readMode",365),vf(this,"writeMode",146),vf(this,"mounted",null),t||(t=this),this.parent=t,this.mount=t.mount,this.id=Ue.nextInode++,this.name=n,this.mode=r,this.rdev=o,this.atime=this.mtime=this.ctime=Date.now()}return pf(e,[{key:"read",get:function(){return(this.mode&this.readMode)===this.readMode},set:function(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}},{key:"write",get:function(){return(this.mode&this.writeMode)===this.writeMode},set:function(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}},{key:"isFolder",get:function(){return Ue.isDir(this.mode)}},{key:"isDevice",get:function(){return Ue.isChrdev(this.mode)}}]),e}(),lookupPath:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Ue.ErrnoError(44);null!==(n=(t=r).follow_mount)&&void 0!==n||(t.follow_mount=!0),be.isAbs(e)||(e=Ue.cwd()+"/"+e);e:for(var o=0;o<40;o++){for(var i=e.split("/").filter(function(e){return!!e}),a=Ue.root,u="/",c=0;c<i.length;c++){var s=c===i.length-1;if(s&&r.parent)break;if("."!==i[c])if(".."!==i[c]){u=be.join2(u,i[c]);try{a=Ue.lookupNode(a,i[c])}catch(e){if(44===(null==e?void 0:e.errno)&&s&&r.noent_okay)return{path:u};throw e}if(!Ue.isMountpoint(a)||s&&!r.follow_mount||(a=a.mounted.root),Ue.isLink(a.mode)&&(!s||r.follow)){if(!a.node_ops.readlink)throw new Ue.ErrnoError(52);var l=a.node_ops.readlink(a);be.isAbs(l)||(l=be.dirname(u)+"/"+l),e=l+"/"+i.slice(c+1).join("/");continue e}}else u=be.dirname(u),a=a.parent}return{path:u,node:a}}throw new Ue.ErrnoError(32)},getPath:function(e){for(var t;;){if(Ue.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?"".concat(n,"/").concat(t):n+t:n}t=t?"".concat(e.name,"/").concat(t):e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Ue.nameTable.length},hashAddNode:function(e){var t=Ue.hashName(e.parent.id,e.name);e.name_next=Ue.nameTable[t],Ue.nameTable[t]=e},hashRemoveNode:function(e){var t=Ue.hashName(e.parent.id,e.name);if(Ue.nameTable[t]===e)Ue.nameTable[t]=e.name_next;else for(var n=Ue.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=Ue.mayLookup(e);if(n)throw new Ue.ErrnoError(n);for(var r=Ue.hashName(e.id,t),o=Ue.nameTable[r];o;o=o.name_next){var i=o.name;if(o.parent.id===e.id&&i===t)return o}return Ue.lookup(e,t)},createNode:function(e,t,n,r){Cr("object"==(void 0===e?"undefined":Ef(e)));var o=new Ue.FSNode(e,t,n,r);return Ue.hashAddNode(o),o},destroyNode:function(e){Ue.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return!(49152&~e)},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return Ue.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2},mayLookup:function(e){if(!Ue.isDir(e.mode))return 54;var t=Ue.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){if(!Ue.isDir(e.mode))return 54;try{return Ue.lookupNode(e,t),20}catch(e){}return Ue.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=Ue.lookupNode(e,t)}catch(e){return e.errno}var o=Ue.nodePermissions(e,"wx");if(o)return o;if(n){if(!Ue.isDir(r.mode))return 54;if(Ue.isRoot(r)||Ue.getPath(r)===Ue.cwd())return 10}else if(Ue.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?Ue.isLink(e.mode)?32:Ue.isDir(e.mode)&&("r"!==Ue.flagsToPermissionString(t)||576&t)?31:Ue.nodePermissions(e,Ue.flagsToPermissionString(t)):44},checkOpExists:function(e,t){if(!e)throw new Ue.ErrnoError(t);return e},MAX_OPEN_FDS:4096,nextfd:function(){for(var e=0;e<=Ue.MAX_OPEN_FDS;e++)if(!Ue.streams[e])return e;throw new Ue.ErrnoError(33)},getStreamChecked:function(e){var t=Ue.getStream(e);if(!t)throw new Ue.ErrnoError(8);return t},getStream:function(e){return Ue.streams[e]},createStream:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Cr(t>=-1),e=Object.assign(new Ue.FSStream,e),-1==t&&(t=Ue.nextfd()),e.fd=t,Ue.streams[t]=e,e},closeStream:function(e){Ue.streams[e]=null},dupStream:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=Ue.createStream(e,r);return null===(n=o.stream_ops)||void 0===n||null===(t=n.dup)||void 0===t||t.call(n,o),o},doSetAttr:function(e,t,n){var r=null==e?void 0:e.stream_ops.setattr,o=r?e:t;null!=r||(r=t.node_ops.setattr),Ue.checkOpExists(r,63),r(o,n)},chrdev_stream_ops:{open:function(e){var t,n,r=Ue.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,null===(t=(n=e.stream_ops).open)||void 0===t||t.call(n,e)},llseek:function(){throw new Ue.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){Ue.devices[e]={stream_ops:t}},getDevice:function(e){return Ue.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r,o=n.pop();t.push(o),(r=n).push.apply(r,wf(o.mounts))}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),Ue.syncFSRequests++,Ue.syncFSRequests>1&&m("warning: ".concat(Ue.syncFSRequests," FS.syncfs operations in flight at once, probably just doing extra work"));var n=Ue.getMounts(Ue.root.mount),r=0;function o(e){return Cr(Ue.syncFSRequests>0),Ue.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,o(e));++r>=n.length&&o(null)}n.forEach(function(t){if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)})},mount:function(e,t,n){if("string"==typeof e)throw e;var r,o="/"===n,i=!n;if(o&&Ue.root)throw new Ue.ErrnoError(10);if(!o&&!i){var a=Ue.lookupPath(n,{follow_mount:!1});if(n=a.path,r=a.node,Ue.isMountpoint(r))throw new Ue.ErrnoError(10);if(!Ue.isDir(r.mode))throw new Ue.ErrnoError(54)}var u={type:e,opts:t,mountpoint:n,mounts:[]},c=e.mount(u);return c.mount=u,u.root=c,o?Ue.root=c:r&&(r.mounted=u,r.mount&&r.mount.mounts.push(u)),c},unmount:function(e){var t=Ue.lookupPath(e,{follow_mount:!1});if(!Ue.isMountpoint(t.node))throw new Ue.ErrnoError(28);var n=t.node,r=n.mounted,o=Ue.getMounts(r);Object.keys(Ue.nameTable).forEach(function(e){for(var t=Ue.nameTable[e];t;){var n=t.name_next;o.includes(t.mount)&&Ue.destroyNode(t),t=n}}),n.mounted=null;var i=n.mount.mounts.indexOf(r);Cr(-1!==i),n.mount.mounts.splice(i,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=Ue.lookupPath(e,{parent:!0}).node,o=be.basename(e);if(!o)throw new Ue.ErrnoError(28);if("."===o||".."===o)throw new Ue.ErrnoError(20);var i=Ue.mayCreate(r,o);if(i)throw new Ue.ErrnoError(i);if(!r.node_ops.mknod)throw new Ue.ErrnoError(63);return r.node_ops.mknod(r,o,t,n)},statfs:function(e){return Ue.statfsNode(Ue.lookupPath(e,{follow:!0}).node)},statfsStream:function(e){return Ue.statfsNode(e.node)},statfsNode:function(e){var t={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:Ue.nextInode,ffree:Ue.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(t,e.node_ops.statfs(e.mount.opts.root)),t},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:438;return t&=4095,t|=32768,Ue.mknod(e,t,0)},mkdir:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:511;return t&=1023,t|=16384,Ue.mknod(e,t,0)},mkdirTree:function(e,t){var n=e.split("/"),r="",o=!0,i=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value;if(s){(r||be.isAbs(e))&&(r+="/"),r+=s;try{Ue.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}},mkdev:function(e,t,n){return void 0===n&&(n=t,t=438),t|=8192,Ue.mknod(e,t,n)},symlink:function(e,t){if(!we.resolve(e))throw new Ue.ErrnoError(44);var n=Ue.lookupPath(t,{parent:!0}).node;if(!n)throw new Ue.ErrnoError(44);var r=be.basename(t),o=Ue.mayCreate(n,r);if(o)throw new Ue.ErrnoError(o);if(!n.node_ops.symlink)throw new Ue.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,o=be.dirname(e),i=be.dirname(t),a=be.basename(e),u=be.basename(t);if(n=Ue.lookupPath(e,{parent:!0}).node,r=Ue.lookupPath(t,{parent:!0}).node,!n||!r)throw new Ue.ErrnoError(44);if(n.mount!==r.mount)throw new Ue.ErrnoError(75);var c,s=Ue.lookupNode(n,a),l=we.relative(e,i);if("."!==l.charAt(0))throw new Ue.ErrnoError(28);if("."!==(l=we.relative(t,o)).charAt(0))throw new Ue.ErrnoError(55);try{c=Ue.lookupNode(r,u)}catch(e){}if(s!==c){var f=Ue.isDir(s.mode),h=Ue.mayDelete(n,a,f);if(h)throw new Ue.ErrnoError(h);if(h=c?Ue.mayDelete(r,u,f):Ue.mayCreate(r,u))throw new Ue.ErrnoError(h);if(!n.node_ops.rename)throw new Ue.ErrnoError(63);if(Ue.isMountpoint(s)||c&&Ue.isMountpoint(c))throw new Ue.ErrnoError(10);if(r!==n&&(h=Ue.nodePermissions(n,"w")))throw new Ue.ErrnoError(h);Ue.hashRemoveNode(s);try{n.node_ops.rename(s,r,u),s.parent=r}catch(e){throw e}finally{Ue.hashAddNode(s)}}},rmdir:function(e){var t=Ue.lookupPath(e,{parent:!0}).node,n=be.basename(e),r=Ue.lookupNode(t,n),o=Ue.mayDelete(t,n,!0);if(o)throw new Ue.ErrnoError(o);if(!t.node_ops.rmdir)throw new Ue.ErrnoError(63);if(Ue.isMountpoint(r))throw new Ue.ErrnoError(10);t.node_ops.rmdir(t,n),Ue.destroyNode(r)},readdir:function(e){var t=Ue.lookupPath(e,{follow:!0}).node,n=Ue.checkOpExists(t.node_ops.readdir,54);return n(t)},unlink:function(e){var t=Ue.lookupPath(e,{parent:!0}).node;if(!t)throw new Ue.ErrnoError(44);var n=be.basename(e),r=Ue.lookupNode(t,n),o=Ue.mayDelete(t,n,!1);if(o)throw new Ue.ErrnoError(o);if(!t.node_ops.unlink)throw new Ue.ErrnoError(63);if(Ue.isMountpoint(r))throw new Ue.ErrnoError(10);t.node_ops.unlink(t,n),Ue.destroyNode(r)},readlink:function(e){var t=Ue.lookupPath(e).node;if(!t)throw new Ue.ErrnoError(44);if(!t.node_ops.readlink)throw new Ue.ErrnoError(28);return t.node_ops.readlink(t)},stat:function(e,t){var n=Ue.lookupPath(e,{follow:!t}).node;return Ue.checkOpExists(n.node_ops.getattr,63)(n)},fstat:function(e){var t=Ue.getStreamChecked(e),n=t.node,r=t.stream_ops.getattr,o=r?t:n;return null!=r||(r=n.node_ops.getattr),Ue.checkOpExists(r,63),r(o)},lstat:function(e){return Ue.stat(e,!0)},doChmod:function(e,t,n,r){Ue.doSetAttr(e,t,{mode:4095&n|-4096&t.mode,ctime:Date.now(),dontFollow:r})},chmod:function(e,t,n){var r;r="string"==typeof e?Ue.lookupPath(e,{follow:!n}).node:e,Ue.doChmod(null,r,t,n)},lchmod:function(e,t){Ue.chmod(e,t,!0)},fchmod:function(e,t){var n=Ue.getStreamChecked(e);Ue.doChmod(n,n.node,t,!1)},doChown:function(e,t,n){Ue.doSetAttr(e,t,{timestamp:Date.now(),dontFollow:n})},chown:function(e,t,n,r){var o;o="string"==typeof e?Ue.lookupPath(e,{follow:!r}).node:e,Ue.doChown(null,o,r)},lchown:function(e,t,n){Ue.chown(e,t,n,!0)},fchown:function(e,t,n){var r=Ue.getStreamChecked(e);Ue.doChown(r,r.node,!1)},doTruncate:function(e,t,n){if(Ue.isDir(t.mode))throw new Ue.ErrnoError(31);if(!Ue.isFile(t.mode))throw new Ue.ErrnoError(28);var r=Ue.nodePermissions(t,"w");if(r)throw new Ue.ErrnoError(r);Ue.doSetAttr(e,t,{size:n,timestamp:Date.now()})},truncate:function(e,t){if(t<0)throw new Ue.ErrnoError(28);var n;n="string"==typeof e?Ue.lookupPath(e,{follow:!0}).node:e,Ue.doTruncate(null,n,t)},ftruncate:function(e,t){var n=Ue.getStreamChecked(e);if(t<0||!(2097155&n.flags))throw new Ue.ErrnoError(28);Ue.doTruncate(n,n.node,t)},utime:function(e,t,n){var r=Ue.lookupPath(e,{follow:!0}).node;Ue.checkOpExists(r.node_ops.setattr,63)(r,{atime:t,mtime:n})},open:function(e,t){var n,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:438;if(""===e)throw new Ue.ErrnoError(44);if(i=64&(t="string"==typeof t?Ne(t):t)?4095&i|32768:0,"object"==(void 0===e?"undefined":Ef(e)))n=e;else{o=e.endsWith("/");var a=Ue.lookupPath(e,{follow:!(131072&t),noent_okay:!0});n=a.node,e=a.path}var u=!1;if(64&t)if(n){if(128&t)throw new Ue.ErrnoError(20)}else{if(o)throw new Ue.ErrnoError(31);n=Ue.mknod(e,511|i,0),u=!0}if(!n)throw new Ue.ErrnoError(44);if(Ue.isChrdev(n.mode)&&(t&=-513),65536&t&&!Ue.isDir(n.mode))throw new Ue.ErrnoError(54);if(!u){var c=Ue.mayOpen(n,t);if(c)throw new Ue.ErrnoError(c)}512&t&&!u&&Ue.truncate(n,0),t&=-131713;var s=Ue.createStream({node:n,path:Ue.getPath(n),flags:t,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),u&&Ue.chmod(n,511&i),!r.logReadFiles||1&t||e in Ue.readFiles||(Ue.readFiles[e]=1),s},close:function(e){if(Ue.isClosed(e))throw new Ue.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Ue.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(Ue.isClosed(e))throw new Ue.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Ue.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new Ue.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,o){if(Cr(n>=0),r<0||o<0)throw new Ue.ErrnoError(28);if(Ue.isClosed(e))throw new Ue.ErrnoError(8);if(1==(2097155&e.flags))throw new Ue.ErrnoError(8);if(Ue.isDir(e.node.mode))throw new Ue.ErrnoError(31);if(!e.stream_ops.read)throw new Ue.ErrnoError(28);var i=void 0!==o;if(i){if(!e.seekable)throw new Ue.ErrnoError(70)}else o=e.position;var a=e.stream_ops.read(e,t,n,r,o);return i||(e.position+=a),a},write:function(e,t,n,r,o,i){if(Cr(n>=0),r<0||o<0)throw new Ue.ErrnoError(28);if(Ue.isClosed(e))throw new Ue.ErrnoError(8);if(!(2097155&e.flags))throw new Ue.ErrnoError(8);if(Ue.isDir(e.node.mode))throw new Ue.ErrnoError(31);if(!e.stream_ops.write)throw new Ue.ErrnoError(28);e.seekable&&1024&e.flags&&Ue.llseek(e,0,2);var a=void 0!==o;if(a){if(!e.seekable)throw new Ue.ErrnoError(70)}else o=e.position;var u=e.stream_ops.write(e,t,n,r,o,i);return a||(e.position+=u),u},mmap:function(e,t,n,r,o){if(2&r&&!(2&o)&&2!=(2097155&e.flags))throw new Ue.ErrnoError(2);if(1==(2097155&e.flags))throw new Ue.ErrnoError(2);if(!e.stream_ops.mmap)throw new Ue.ErrnoError(43);if(!t)throw new Ue.ErrnoError(28);return e.stream_ops.mmap(e,t,n,r,o)},msync:function(e,t,n,r,o){return Cr(n>=0),e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,o):0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new Ue.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.flags=n.flags||0,n.encoding=n.encoding||"binary","utf8"!==n.encoding&&"binary"!==n.encoding)throw new Error('Invalid encoding type "'.concat(n.encoding,'"'));var r=Ue.open(e,n.flags),o=Ue.stat(e).size,i=new Uint8Array(o);return Ue.read(r,i,0,o,0),"utf8"===n.encoding?t=J(i):"binary"===n.encoding&&(t=i),Ue.close(r),t},writeFile:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.flags=n.flags||577;var r=Ue.open(e,n.flags,n.mode);if("string"==typeof t){var o=new Uint8Array(Oe(t)+1),i=Se(t,o,0,o.length);Ue.write(r,o,0,i,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Ue.write(r,t,0,t.byteLength,void 0,n.canOwn)}Ue.close(r)},cwd:function(){return Ue.currentPath},chdir:function(e){var t=Ue.lookupPath(e,{follow:!0});if(null===t.node)throw new Ue.ErrnoError(44);if(!Ue.isDir(t.node.mode))throw new Ue.ErrnoError(54);var n=Ue.nodePermissions(t.node,"x");if(n)throw new Ue.ErrnoError(n);Ue.currentPath=t.path},createDefaultDirectories:function(){Ue.mkdir("/tmp"),Ue.mkdir("/home"),Ue.mkdir("/home/web_user")},createDefaultDevices:function(){Ue.mkdir("/dev"),Ue.registerDevice(Ue.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,o){return r},llseek:function(){return 0}}),Ue.mkdev("/dev/null",Ue.makedev(1,3)),Te.register(Ue.makedev(5,0),Te.default_tty_ops),Te.register(Ue.makedev(6,0),Te.default_tty1_ops),Ue.mkdev("/dev/tty",Ue.makedev(5,0)),Ue.mkdev("/dev/tty1",Ue.makedev(6,0));var e=new Uint8Array(1024),t=0,n=function(){return 0===t&&(_e(e),t=e.byteLength),e[--t]};Ue.createDevice("/dev","random",n),Ue.createDevice("/dev","urandom",n),Ue.mkdir("/dev/shm"),Ue.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Ue.mkdir("/proc");var e=Ue.mkdir("/proc/self");Ue.mkdir("/proc/self/fd"),Ue.mount({mount:function(){var t=Ue.createNode(e,"fd",16895,73);return t.stream_ops={llseek:Ie.stream_ops.llseek},t.node_ops={lookup:function(e,t){var n=+t,r=Ue.getStreamChecked(n),o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}},id:n+1};return o.parent=o,o},readdir:function(){return Array.from(Ue.streams.entries()).filter(function(e){var t=_f(e,2);return t[0],t[1]}).map(function(e){var t=_f(e,2),n=t[0];return t[1],n.toString()})}},t}},{},"/proc/self/fd")},createStandardStreams:function(e,t,n){e?Ue.createDevice("/dev","stdin",e):Ue.symlink("/dev/tty","/dev/stdin"),t?Ue.createDevice("/dev","stdout",null,t):Ue.symlink("/dev/tty","/dev/stdout"),n?Ue.createDevice("/dev","stderr",null,n):Ue.symlink("/dev/tty1","/dev/stderr");var r=Ue.open("/dev/stdin",0),o=Ue.open("/dev/stdout",1),i=Ue.open("/dev/stderr",1);Cr(0===r.fd,"invalid handle for stdin (".concat(r.fd,")")),Cr(1===o.fd,"invalid handle for stdout (".concat(o.fd,")")),Cr(2===i.fd,"invalid handle for stderr (".concat(i.fd,")"))},staticInit:function(){Ue.nameTable=new Array(4096),Ue.mount(Ie,{},"/"),Ue.createDefaultDirectories(),Ue.createDefaultDevices(),Ue.createSpecialDirectories(),Ue.filesystems={MEMFS:Ie}},init:function(e,t,n){Cr(!Ue.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Ue.initialized=!0,null!=e||(e=r.stdin),null!=t||(t=r.stdout),null!=n||(n=r.stderr),Ue.createStandardStreams(e,t,n)},quit:function(){Ue.initialized=!1,hr(0);var e=!0,t=!1,n=void 0;try{for(var r,o=Ue.streams[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;i&&Ue.close(i)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},findObject:function(e,t){var n=Ue.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=Ue.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Ue.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=be.basename(e),r=Ue.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:function(e,t,n,r){e="string"==typeof e?e:Ue.getPath(e);for(var o=t.split("/").reverse();o.length;){var i=o.pop();if(i){var a=be.join2(e,i);try{Ue.mkdir(a)}catch(e){if(20!=e.errno)throw e}e=a}}return a},createFile:function(e,t,n,r,o){var i=be.join2("string"==typeof e?e:Ue.getPath(e),t),a=Le(r,o);return Ue.create(i,a)},createDataFile:function(e,t,n,r,o,i){var a=t;e&&(e="string"==typeof e?e:Ue.getPath(e),a=t?be.join2(e,t):e);var u=Le(r,o),c=Ue.create(a,u);if(n){if("string"==typeof n){for(var s=new Array(n.length),l=0,f=n.length;l<f;++l)s[l]=n.charCodeAt(l);n=s}Ue.chmod(c,146|u);var h=Ue.open(c,577);Ue.write(h,n,0,n.length,0,i),Ue.close(h),Ue.chmod(c,u)}},createDevice:function(e,t,n,r){var o,i,a=be.join2("string"==typeof e?e:Ue.getPath(e),t),u=Le(!!n,!!r);null!==(i=(o=Ue.createDevice).major)&&void 0!==i||(o.major=64);var c=Ue.makedev(Ue.createDevice.major++,0);return Ue.registerDevice(c,{open:function(e){e.seekable=!1},close:function(e){var t;(null==r||null===(t=r.buffer)||void 0===t?void 0:t.length)&&r(10)},read:function(e,t,r,o,i){for(var a=0,u=0;u<o;u++){var c;try{c=n()}catch(e){throw new Ue.ErrnoError(29)}if(void 0===c&&0===a)throw new Ue.ErrnoError(6);if(null==c)break;a++,t[r+u]=c}return a&&(e.node.atime=Date.now()),a},write:function(e,t,n,o,i){for(var a=0;a<o;a++)try{r(t[n+a])}catch(e){throw new Ue.ErrnoError(29)}return o&&(e.node.mtime=e.node.ctime=Date.now()),a}}),Ue.mkdev(a,u,c)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=v(e.url),e.usedBytes=e.contents.length}catch(e){throw new Ue.ErrnoError(29)}},createLazyFile:function(e,t,n,r,o){var i=function(){function e(){ff(this,e),vf(this,"lengthKnown",!1),vf(this,"chunks",[])}return pf(e,[{key:"get",value:function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}}},{key:"setDataGetter",value:function(e){this.getter=e}},{key:"cacheLength",value:function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),o=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;o||(a=r);var u=this;u.setDataGetter(function(e){var t=e*a,o=(e+1)*a-1;if(o=Math.min(o,r-1),void 0===u.chunks[e]&&(u.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",n,!1),r!==a&&o.setRequestHeader("Range","bytes="+e+"-"+t),o.responseType="arraybuffer",o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+n+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):ke(o.responseText||"",!0)}(t,o)),void 0===u.chunks[e])throw new Error("doXHR failed!");return u.chunks[e]}),!i&&r||(a=r=1,r=this.getter(0).length,a=r,y("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=a,this.lengthKnown=!0}},{key:"length",get:function(){return this.lengthKnown||this.cacheLength(),this._length}},{key:"chunkSize",get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}]),e}();if("undefined"!=typeof XMLHttpRequest){if(!c)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a={isDevice:!1,contents:new i}}else a={isDevice:!1,url:n};var u=Ue.createFile(e,t,a,r,o);a.contents?u.contents=a.contents:a.url&&(u.contents=null,u.url=a.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var s={};function l(e,t,n,r,o){var i=e.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,r);if(Cr(a>=0),i.slice)for(var u=0;u<a;u++)t[n+u]=i[o+u];else for(u=0;u<a;u++)t[n+u]=i.get(o+u);return a}return Object.keys(u.stream_ops).forEach(function(e){var t=u.stream_ops[e];s[e]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ue.forceLoadFile(u),t.apply(void 0,wf(n))}}),s.read=function(e,t,n,r,o){return Ue.forceLoadFile(u),l(e,t,n,r,o)},s.mmap=function(e,t,n,r,o){Ue.forceLoadFile(u);var i=xe();if(!i)throw new Ue.ErrnoError(48);return l(e,w,i,t,n),{ptr:i,allocated:!0}},u.stream_ops=s,u},absolutePath:function(){Vr("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder:function(){Vr("FS.createFolder has been removed; use FS.mkdir instead")},createLink:function(){Vr("FS.createLink has been removed; use FS.symlink instead")},joinPath:function(){Vr("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc:function(){Vr("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath:function(){Vr("FS.standardizePath has been removed; use PATH.normalize instead")}},Ge={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(be.isAbs(t))return t;var r;if(r=-100===e?Ue.cwd():Ge.getStreamFromFD(e).path,0==t.length){if(!n)throw new Ue.ErrnoError(44);return r}return r+"/"+t},writeStat:function(e,t){k[e>>2]=t.dev,k[e+4>>2]=t.mode,P[e+8>>2]=t.nlink,k[e+12>>2]=t.uid,k[e+16>>2]=t.gid,k[e+20>>2]=t.rdev,x[e+24>>3]=BigInt(t.size),k[e+32>>2]=4096,k[e+36>>2]=t.blocks;var n=t.atime.getTime(),r=t.mtime.getTime(),o=t.ctime.getTime();return x[e+40>>3]=BigInt(Math.floor(n/1e3)),P[e+48>>2]=n%1e3*1e3*1e3,x[e+56>>3]=BigInt(Math.floor(r/1e3)),P[e+64>>2]=r%1e3*1e3*1e3,x[e+72>>3]=BigInt(Math.floor(o/1e3)),P[e+80>>2]=o%1e3*1e3*1e3,x[e+88>>3]=BigInt(t.ino),0},writeStatFs:function(e,t){k[e+4>>2]=t.bsize,k[e+40>>2]=t.bsize,k[e+8>>2]=t.blocks,k[e+12>>2]=t.bfree,k[e+16>>2]=t.bavail,k[e+20>>2]=t.files,k[e+24>>2]=t.ffree,k[e+28>>2]=t.fsid,k[e+44>>2]=t.flags,k[e+36>>2]=t.namelen},doMsync:function(e,t,n,r,o){if(!Ue.isFile(t.node.mode))throw new Ue.ErrnoError(43);if(2&r)return 0;var i=E.slice(e,e+n);Ue.msync(t,i,o,n,r)},getStreamFromFD:function(e){return Ue.getStreamChecked(e)},varargs:void 0,getStr:function(e){return Q(e)}},Be=function(){return Vr("native code called abort()")},We={},$e=function(e){for(;e.length;){var t=e.pop();e.pop()(t)}},ze={},He={},Ve={},qe=r.InternalError=function(e){function t(e){var n;return ff(this,t),(n=lf(this,t,[e])).name="InternalError",n}return mf(t,e),t}(Sf(Error)),Ke=function(e){throw new qe(e)},Xe=function(e,t,n){var r=function(t){var r=n(t);r.length!==e.length&&Ke("Mismatched type converter count");for(var o=0;o<e.length;++o)ro(e[o],r[o])};e.forEach(function(e){return Ve[e]=t});var o=new Array(t.length),i=[],a=0;t.forEach(function(e,t){He.hasOwnProperty(e)?o[t]=He[e]:(i.push(e),ze.hasOwnProperty(e)||(ze[e]=[]),ze[e].push(function(){o[t]=He[e],++a===i.length&&r(o)}))}),0===i.length&&r(o)},Ye=function(e){var t=We[e];delete We[e];var n=t.elements,r=n.length,o=n.map(function(e){return e.getterReturnType}).concat(n.map(function(e){return e.setterArgumentType})),i=t.rawConstructor,a=t.rawDestructor;Xe([e],o,function(e){return n.forEach(function(t,n){var o=e[n],i=t.getter,a=t.getterContext,u=e[n+r],c=t.setter,s=t.setterContext;t.read=function(e){return o.fromWireType(i(a,e))},t.write=function(e,t){var n=[];c(s,e,u.toWireType(n,t)),$e(n)}}),[{name:t.name,fromWireType:function(e){for(var t=new Array(r),o=0;o<r;++o)t[o]=n[o].read(e);return a(e),t},toWireType:function(e,o){if(r!==o.length)throw new TypeError("Incorrect number of tuple elements for ".concat(t.name,": expected=").concat(r,", actual=").concat(o.length));for(var u=i(),c=0;c<r;++c)n[c].write(u,o[c]);return null!==e&&e.push(a,u),u},argPackAdvance:ut,readValueFromPointer:no,destructorFunction:a}]})},Je={},Qe=function(e){var t=Je[e];delete Je[e];var n=t.rawConstructor,r=t.rawDestructor,o=t.fields,i=o.map(function(e){return e.getterReturnType}).concat(o.map(function(e){return e.setterArgumentType}));Xe([e],i,function(e){var i={};return o.forEach(function(t,n){var r=t.fieldName,a=e[n],u=e[n].optional,c=t.getter,s=t.getterContext,l=e[n+o.length],f=t.setter,h=t.setterContext;i[r]={read:function(e){return a.fromWireType(c(s,e))},write:function(e,t){var n=[];f(h,e,l.toWireType(n,t)),$e(n)},optional:u}}),[{name:t.name,fromWireType:function(e){var t={};for(var n in i)t[n]=i[n].read(e);return r(e),t},toWireType:function(e,t){for(var o in i)if(!(o in t)&&!i[o].optional)throw new TypeError('Missing field: "'.concat(o,'"'));var a=n();for(o in i)i[o].write(a,t[o]);return null!==e&&e.push(r,a),a},argPackAdvance:ut,readValueFromPointer:no,destructorFunction:r}]})},Ze=function(e){if(null===e)return"null";var t=void 0===e?"undefined":Ef(e);return"object"===t||"array"===t||"function"===t?e.toString():""+e},et=function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);tt=e},nt=function(e){for(var t="",n=e;E[n];)t+=tt[E[n++]];return t},rt=r.BindingError=function(e){function t(e){var n;return ff(this,t),(n=lf(this,t,[e])).name="BindingError",n}return mf(t,e),t}(Sf(Error)),ot=function(e){throw new rt(e)},it=function(e,t,n){switch(t){case 1:return n?function(e){return w[e]}:function(e){return E[e]};case 2:return n?function(e){return O[e>>1]}:function(e){return S[e>>1]};case 4:return n?function(e){return k[e>>2]}:function(e){return P[e>>2]};case 8:return n?function(e){return x[e>>3]}:function(e){return I[e>>3]};default:throw new TypeError("invalid integer width (".concat(t,"): ").concat(e))}},at=function(e,t,n,r,o){var i=-1!=(t=nt(t)).indexOf("u");i&&(o=(1n<<64n)-1n),ro(e,{name:t,fromWireType:function(e){return e},toWireType:function(e,n){if("bigint"!=(void 0===n?"undefined":Ef(n))&&"number"!=typeof n)throw new TypeError('Cannot convert "'.concat(Ze(n),'" to ').concat(this.name));if("number"==typeof n&&(n=BigInt(n)),n<r||n>o)throw new TypeError('Passing a number "'.concat(Ze(n),'" from JS side to C/C++ side to an argument of type "').concat(t,'", which is outside the valid range [').concat(r,", ").concat(o,"]!"));return n},argPackAdvance:ut,readValueFromPointer:it(t,n,!i),destructorFunction:null})},ut=8,ct=function(e,t,n,r){ro(e,{name:t=nt(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:r},argPackAdvance:ut,readValueFromPointer:function(e){return this.fromWireType(E[e])},destructorFunction:null})},st=function(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}},lt=function(e){ot(e.$$.ptrType.registeredClass.name+" instance already deleted")},ft=!1,ht=function(e){},dt=function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},pt=function(e){e.count.value-=1,0===e.count.value&&dt(e)},vt=function(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=vt(e,t,n.baseClass);return null===r?null:n.downcast(r)},yt={},mt={},bt=function(e,t){for(void 0===t&&ot("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t},gt=function(e,t){return t=bt(e,t),mt[t]},_t=function(e,t){return t.ptrType&&t.ptr||Ke("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Ke("Both smartPtrType and smartPtr must be specified"),t.count={value:1},wt(Object.create(e,{$$:{value:t,writable:!0}}))},wt=function(e){return"undefined"==typeof FinalizationRegistry?(wt=function(e){return e},e):(ft=new FinalizationRegistry(function(e){pt(e.$$)}),wt=function(e){var t=e.$$;if(t.smartPtr){var n={$$:t},r=t.ptrType.registeredClass,o=new Error("Embind found a leaked C++ instance ".concat(r.name," <").concat(V(t.ptr),">.\n")+"We'll free it automatically in this case, but this functionality is not reliable across various environments.\nMake sure to invoke .delete() manually once you're done with the instance instead.\nOriginally allocated");"captureStackTrace"in Error&&Error.captureStackTrace(o,oo),n.leakWarning=o.stack.replace(/^Error: /,""),ft.register(e,n,e)}return e},ht=function(e){return ft.unregister(e)},wt(e))},Et=[],Ot=function(){var e=io.prototype;Object.assign(e,{isAliasOf:function(e){if(!bf(this,io))return!1;if(!bf(e,io))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,o=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)o=r.upcast(o),r=r.baseClass;return t===r&&n===o},clone:function(){if(this.$$.ptr||lt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=wt(Object.create(Object.getPrototypeOf(this),{$$:{value:st(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete:function(){this.$$.ptr||lt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ot("Object already scheduled for deletion"),ht(this),pt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted:function(){return!this.$$.ptr},deleteLater:function(){return this.$$.ptr||lt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ot("Object already scheduled for deletion"),Et.push(this),Et.length,this.$$.deleteScheduled=!0,this}});var t=Symbol.dispose;t&&(e[t]=e.delete)},St=function(e,t){return Object.defineProperty(t,"name",{value:e})},kt=function(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e[t].overloadTable.hasOwnProperty(o.length)||ot("Function '".concat(n,"' called with an invalid number of arguments (").concat(o.length,") - expects one of (").concat(e[t].overloadTable,")!")),e[t].overloadTable[o.length].apply(this,o)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}},Pt=function(e,t,n){r.hasOwnProperty(e)?((void 0===n||void 0!==r[e].overloadTable&&void 0!==r[e].overloadTable[n])&&ot("Cannot register public name '".concat(e,"' twice")),kt(r,e,e),r[e].overloadTable.hasOwnProperty(n)&&ot("Cannot register multiple overloads of a function with the same number of arguments (".concat(n,")!")),r[e].overloadTable[n]=t):(r[e]=t,r[e].argCount=n)},Tt=function(e){Cr("string"==typeof e);var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_".concat(e):e},xt=function(e,t,n){for(;t!==n;)t.upcast||ot("Expected null or instance of ".concat(n.name,", got an instance of ").concat(t.name)),e=t.upcast(e),t=t.baseClass;return e},It=function(){Object.assign(lo.prototype,{getPointee:function(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor:function(e){var t;null===(t=this.rawDestructor)||void 0===t||t.call(this,e)},argPackAdvance:ut,readValueFromPointer:no,fromWireType:oo})},Dt=function(e,t,n){r.hasOwnProperty(e)||Ke("Replacing nonexistent public symbol"),void 0!==r[e].overloadTable&&void 0!==n?r[e].overloadTable[n]=t:(r[e]=t,r[e].argCount=n)},jt=[],Ct=function(e){var t=jt[e];return t||(jt[e]=t=At.get(e)),Cr(At.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t},Rt=function(e,t){Cr(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]),"Async bindings are only supported with JSPI."),e=nt(e);var n=Ct(t);return"function"!=typeof n&&ot("unknown function pointer with signature ".concat(e,": ").concat(t)),n},Nt=function(e){function t(){return ff(this,t),lf(this,t,arguments)}return mf(t,e),t}(Sf(Error)),Lt=function(e){var t=cr(e),n=nt(t);return lr(t),n},Mt=function(e,t){var n=[],r={};throw t.forEach(function e(t){r[t]||He[t]||(Ve[t]?Ve[t].forEach(e):(n.push(t),r[t]=!0))}),new Nt("".concat(e,": ")+n.map(Lt).join([", "]))},Ft=function(e,t,n,r,o,i,a,u,c,s,l,f,h){l=nt(l),i=Rt(o,i),u&&(u=Rt(a,u)),s&&(s=Rt(c,s)),h=Rt(f,h);var d=Tt(l);Pt(d,function(){Mt("Cannot construct ".concat(l," due to unbound types"),[r])}),Xe([e,t,n],r?[r]:[],function(t){var n,o;t=t[0],o=r?(n=t.registeredClass).instancePrototype:io.prototype;var a=St(l,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Object.getPrototypeOf(this)!==c)throw new rt("Use 'new' to construct ".concat(l));if(void 0===v.constructor_body)throw new rt("".concat(l," has no accessible constructor"));var r=v.constructor_body[t.length];if(void 0===r)throw new rt("Tried to invoke ctor of ".concat(l," with invalid number of parameters (").concat(t.length,") - expected (").concat(Object.keys(v.constructor_body).toString(),") parameters instead!"));return r.apply(this,t)}),c=Object.create(o,{constructor:{value:a}});a.prototype=c;var f,p,v=new ao(l,a,c,h,n,i,u,s);v.baseClass&&(null!==(p=(f=v.baseClass).__derivedClasses)&&void 0!==p||(f.__derivedClasses=[]),v.baseClass.__derivedClasses.push(v));var y=new lo(l,v,!0,!1,!1),m=new lo(l+"*",v,!1,!1,!1),b=new lo(l+" const*",v,!1,!0,!1);return yt[e]={pointerType:m,constPointerType:b},Dt(d,a),[y,m,b]})},Ut=function(e,t){for(var n=[],r=0;r<e;r++)n.push(P[t+4*r>>2]);return n},Gt=function(e,t,n,r,o,i){Cr(t>0);var a=Ut(t,n);o=Rt(r,o),Xe([],[e],function(e){e=e[0];var n="constructor ".concat(e.name);if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new rt("Cannot register multiple constructors with identical number of parameters (".concat(t-1,") for class '").concat(e.name,"'! Overload resolution is currently only performed using the parameter count, not actual type info!"));return e.registeredClass.constructor_body[t-1]=function(){Mt("Cannot construct ".concat(e.name," due to unbound types"),a)},Xe([],a,function(r){return r.splice(1,0,null),e.registeredClass.constructor_body[t-1]=fo(n,r,null,o,i),[]}),[]})},Bt=function(e){var t=(e=e.trim()).indexOf("(");return-1===t?e:(Cr(e.endsWith(")"),"Parentheses for argument names should match."),e.slice(0,t))},Wt=function(e,t,n,r,o,i,a,u,c,s){var l=Ut(n,r);t=nt(t),t=Bt(t),i=Rt(o,i,c),Xe([],[e],function(e){var r=function(){Mt("Cannot call ".concat(o," due to unbound types"),l)};e=e[0];var o="".concat(e.name,".").concat(t);t.startsWith("@@")&&(t=Symbol[t.substring(2)]),u&&e.registeredClass.pureVirtualFunctions.push(t);var s=e.registeredClass.instancePrototype,f=s[t];return void 0===f||void 0===f.overloadTable&&f.className!==e.name&&f.argCount===n-2?(r.argCount=n-2,r.className=e.name,s[t]=r):(kt(s,t,o),s[t].overloadTable[n-2]=r),Xe([],l,function(r){var u=fo(o,r,e,i,a,c);return void 0===s[t].overloadTable?(u.argCount=n-2,s[t]=u):s[t].overloadTable[n-2]=u,[]}),[]})},$t=function(e,t,n){return bf(e,Object)||ot("".concat(n,' with invalid "this": ').concat(e)),bf(e,t.registeredClass.constructor)||ot("".concat(n,' incompatible with "this" of type ').concat(e.constructor.name)),e.$$.ptr||ot("cannot call emscripten binding method ".concat(n," on deleted object")),xt(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)},zt=function(e,t,n,r,o,i,a,u,c,s){t=nt(t),o=Rt(r,o),Xe([],[e],function(e){e=e[0];var r="".concat(e.name,".").concat(t),l={get:function(){Mt("Cannot access ".concat(r," due to unbound types"),[n,a])},enumerable:!0,configurable:!0};return l.set=c?function(){return Mt("Cannot access ".concat(r," due to unbound types"),[n,a])}:function(e){return ot(r+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,l),Xe([],c?[n,a]:[n],function(n){var a=n[0],l={get:function(){var t=$t(this,e,r+" getter");return a.fromWireType(o(i,t))},enumerable:!0};if(c){c=Rt(u,c);var f=n[1];l.set=function(t){var n=$t(this,e,r+" setter"),o=[];c(s,n,f.toWireType(o,t)),$e(o)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,l),[]}),[]})},Ht=[],Vt=[],qt=function(e){e>9&&0===--Vt[e+1]&&(Cr(void 0!==Vt[e],"Decref for unallocated handle."),Vt[e]=void 0,Ht.push(e))},Kt=function(){return Vt.length/2-5-Ht.length},Xt=function(){Vt.push(0,1,void 0,1,null,1,!0,1,!1,1),Cr(10===Vt.length),r.count_emval_handles=Kt},Yt={toValue:function(e){return e||ot("Cannot use deleted val. handle = ".concat(e)),Cr(2===e||void 0!==Vt[e]&&e%2==0,"invalid handle: ".concat(e)),Vt[e]},toHandle:function(e){switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:var t=Ht.pop()||Vt.length;return Vt[t]=e,Vt[t+1]=1,t}}},Jt={name:"emscripten::val",fromWireType:function(e){var t=Yt.toValue(e);return qt(e),t},toWireType:function(e,t){return Yt.toHandle(t)},argPackAdvance:ut,readValueFromPointer:no,destructorFunction:null},Qt=function(e){return ro(e,Jt)},Zt=function(e,t,n){switch(t){case 1:return n?function(e){return this.fromWireType(w[e])}:function(e){return this.fromWireType(E[e])};case 2:return n?function(e){return this.fromWireType(O[e>>1])}:function(e){return this.fromWireType(S[e>>1])};case 4:return n?function(e){return this.fromWireType(k[e>>2])}:function(e){return this.fromWireType(P[e>>2])};default:throw new TypeError("invalid integer width (".concat(t,"): ").concat(e))}},en=function(e,t,n,r){var o=function(){};t=nt(t),o.values={},ro(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:ut,readValueFromPointer:Zt(t,n,r),destructorFunction:null}),Pt(t,o)},tn=function(e,t){var n=He[e];return void 0===n&&ot("".concat(t," has unknown type ").concat(Lt(e))),n},nn=function(e,t,n){var r=tn(e,"enum");t=nt(t);var o=r.constructor,i=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:St("".concat(r.name,"_").concat(t),function(){})}});o.values[n]=i,o[t]=i},rn=function(e,t){switch(t){case 4:return function(e){return this.fromWireType(T[e>>2])};case 8:return function(e){return this.fromWireType(D[e>>3])};default:throw new TypeError("invalid float width (".concat(t,"): ").concat(e))}},on=function(t,n,r){ro(t,{name:n=nt(n),fromWireType:function(e){return e},toWireType:function(t,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError("Cannot convert ".concat(Ze(n)," to ").concat(e.name));return n},argPackAdvance:ut,readValueFromPointer:rn(n,r),destructorFunction:null})},an=function(e,t,n,r,o){t=nt(t),-1===o&&(o=4294967295);var i=function(e){return e};if(0===r){var a=32-8*n;i=function(e){return e<<a>>>a}}var u,c=t.includes("unsigned"),s=function(e,n){if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'.concat(Ze(e),'" to ').concat(n));if(e<r||e>o)throw new TypeError('Passing a number "'.concat(Ze(e),'" from JS side to C/C++ side to an argument of type "').concat(t,'", which is outside the valid range [').concat(r,", ").concat(o,"]!"))};u=c?function(e,t){return s(t,this.name),t>>>0}:function(e,t){return s(t,this.name),t},ro(e,{name:t,fromWireType:i,toWireType:u,argPackAdvance:ut,readValueFromPointer:it(t,n,0!==r),destructorFunction:null})},un=function(e,t,n){var r=function(e){var t=P[e>>2],n=P[e+4>>2];return new o(w.buffer,n,t)},o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][t];ro(e,{name:n=nt(n),fromWireType:r,argPackAdvance:ut,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},cn=function(e,t,n){return Cr("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Se(e,E,t,n)},sn=function(e,t){ro(e,{name:t=nt(t),fromWireType:function(e){for(var t,n=P[e>>2],r=e+4,o=r,i=0;i<=n;++i){var a=r+i;if(i==n||0==E[a]){var u=Q(o,a-o);void 0===t?t=u:(t+=String.fromCharCode(0),t+=u),o=a+1}}return lr(e),t},toWireType:function(e,t){var n;bf(t,ArrayBuffer)&&(t=new Uint8Array(t));var r="string"==typeof t;r||ArrayBuffer.isView(t)&&1==t.BYTES_PER_ELEMENT||ot("Cannot pass non-string to std::string"),n=r?Oe(t):t.length;var o=fr(4+n+1),i=o+4;return P[o>>2]=n,r?cn(t,i,n+1):E.set(t,i),null!==e&&e.push(lr,o),o},argPackAdvance:ut,readValueFromPointer:no,destructorFunction:function(e){lr(e)}})},ln="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,fn=function(e,t){Cr(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var n=e,r=n>>1,o=r+t/2;!(r>=o)&&S[r];)++r;if((n=r<<1)-e>32&&ln)return ln.decode(E.subarray(e,n));for(var i="",a=0;!(a>=t/2);++a){var u=O[e+2*a>>1];if(0==u)break;i+=String.fromCharCode(u)}return i},hn=function(e,t,n){if(Cr(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),Cr("number"==typeof n,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),null!=n||(n=2147483647),n<2)return 0;for(var r=t,o=(n-=2)<2*e.length?n/2:e.length,i=0;i<o;++i){var a=e.charCodeAt(i);O[t>>1]=a,t+=2}return O[t>>1]=0,t-r},dn=function(e){return 2*e.length},pn=function(e,t){Cr(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var n=0,r="";!(n>=t/4);){var o=k[e+4*n>>2];if(0==o)break;if(++n,o>=65536){var i=o-65536;r+=String.fromCharCode(55296|i>>10,56320|1023&i)}else r+=String.fromCharCode(o)}return r},vn=function(e,t,n){if(Cr(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),Cr("number"==typeof n,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),null!=n||(n=2147483647),n<4)return 0;for(var r=t,o=r+n-4,i=0;i<e.length;++i){var a=e.charCodeAt(i);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++i)),k[t>>2]=a,(t+=4)+4>o)break}return k[t>>2]=0,t-r},yn=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t},mn=function(e,t,n){var r,o,i,a;n=nt(n),2===t?(r=fn,o=hn,a=dn,i=function(e){return S[e>>1]}):4===t&&(r=pn,o=vn,a=yn,i=function(e){return P[e>>2]}),ro(e,{name:n,fromWireType:function(e){for(var n,o=P[e>>2],a=e+4,u=0;u<=o;++u){var c=e+4+u*t;if(u==o||0==i(c)){var s=r(a,c-a);void 0===n?n=s:(n+=String.fromCharCode(0),n+=s),a=c+t}}return lr(e),n},toWireType:function(e,r){"string"!=typeof r&&ot("Cannot pass non-string to C++ string type ".concat(n));var i=a(r),u=fr(4+i+t);return P[u>>2]=i/t,o(r,u+4,i+t),null!==e&&e.push(lr,u),u},argPackAdvance:ut,readValueFromPointer:no,destructorFunction:function(e){lr(e)}})},bn=function(e,t,n,r,o,i){We[e]={name:nt(t),rawConstructor:Rt(n,r),rawDestructor:Rt(o,i),elements:[]}},gn=function(e,t,n,r,o,i,a,u,c){We[e].elements.push({getterReturnType:t,getter:Rt(n,r),getterContext:o,setterArgumentType:i,setter:Rt(a,u),setterContext:c})},_n=function(e,t,n,r,o,i){Je[e]={name:nt(t),rawConstructor:Rt(n,r),rawDestructor:Rt(o,i),fields:[]}},wn=function(e,t,n,r,o,i,a,u,c,s){Je[e].fields.push({fieldName:nt(t),getterReturnType:n,getter:Rt(r,o),getterContext:i,setterArgumentType:a,setter:Rt(u,c),setterContext:s})},En=function(e,t){ro(e,{isVoid:!0,name:t=nt(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},On=[],Sn=function(e,t,n,r){return(e=On[e])(null,t=Yt.toValue(t),n,r)},kn=function(e){var t=On.length;return On.push(e),t},Pn=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=tn(P[t+4*r>>2],"parameter ".concat(r));return n},Tn=function(e,t,n){var r=[],o=e.toWireType(r,n);return r.length&&(P[t>>2]=Yt.toHandle(r)),o},xn=Reflect.construct,In=function(e,t,n){var r=Pn(e,t),o=r.shift();e--;var i=new Array(e),a="methodCaller<(".concat(r.map(function(e){return e.name}).join(", "),") => ").concat(o.name,">");return kn(St(a,function(t,a,u,c){for(var s=0,l=0;l<e;++l)i[l]=r[l].readValueFromPointer(c+s),s+=r[l].argPackAdvance;var f=1===n?xn(a,i):a.apply(t,i);return Tn(o,u,f)}))},Dn=function(e){e>9&&(Vt[e+1]+=1)},jn=function(e){var t=Yt.toValue(e);$e(t),qt(e)},An=function(e,t){var n=(e=tn(e,"_emval_take_value")).readValueFromPointer(t);return Yt.toHandle(n)},Cn=function(e,t,n,r){var o=(new Date).getFullYear(),i=new Date(o,0,1),a=new Date(o,6,1),u=i.getTimezoneOffset(),c=a.getTimezoneOffset(),s=Math.max(u,c);P[e>>2]=60*s,k[t>>2]=Number(u!=c);var l=function(e){var t=e>=0?"-":"+",n=Math.abs(e),r=String(Math.floor(n/60)).padStart(2,"0"),o=String(n%60).padStart(2,"0");return"UTC".concat(t).concat(r).concat(o)},f=l(u),h=l(c);Cr(f),Cr(h),Cr(Oe(f)<=16,"timezone name truncated to fit in TZNAME_MAX (".concat(f,")")),Cr(Oe(h)<=16,"timezone name truncated to fit in TZNAME_MAX (".concat(h,")")),c<u?(cn(f,n,17),cn(h,r,17)):(cn(f,r,17),cn(h,n,17))},Rn=function(){return performance.now()},Nn=function(){return Date.now()},Ln=1,Mn=function(e){return e>=0&&e<=3},Fn=function(e){return e<-9007199254740992||e>9007199254740992?NaN:Number(e)},Un=function(e,t){return Cr(t,"alignment argument is required"),Math.ceil(e/t)*t},Gn=function(e){var t=g.buffer,n=(e-t.byteLength+65535)/65536|0;Wr("growMemory: ".concat(e," (+").concat(e-t.byteLength," bytes / ").concat(n," pages)"));try{return g.grow(n),$r(),1}catch(n){m("growMemory: Attempted to grow heap from ".concat(t.byteLength," bytes to ").concat(e," bytes, but got error: ").concat(n))}},Bn=function(e){var t=E.length;Cr((e>>>=0)>t);var n=2147483648;if(e>n)return m("Cannot enlarge memory, requested ".concat(e," bytes, but the limit is ").concat(n," bytes!")),!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var i=Math.min(n,Un(Math.max(e,o),65536));if(Gn(i))return!0}return m("Failed to grow the heap from ".concat(t," bytes to ").concat(i," bytes, not enough memory!")),!1},Wn={},$n=function(){return h||"./this.program"},zn=function(){if(!zn.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==("undefined"==typeof navigator?"undefined":Ef(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:$n()};for(var t in Wn)void 0===Wn[t]?delete e[t]:e[t]=Wn[t];var n=[];for(var t in e)n.push("".concat(t,"=").concat(e[t]));zn.strings=n}return zn.strings},Hn=function(e,t){for(var n=0;n<e.length;++n)Cr(e.charCodeAt(n)===(255&e.charCodeAt(n))),w[t++]=e.charCodeAt(n);w[t]=0},Vn=function(e,t){var n=0;return zn().forEach(function(r,o){var i=t+n;P[e+4*o>>2]=i,Hn(r,i),n+=r.length+1}),0},qn=function(e,t){var n=zn();P[e>>2]=n.length;var r=0;return n.forEach(function(e){return r+=e.length+1}),P[t>>2]=r,0},Kn=function(e,t,n,r){for(var o=0,i=0;i<n;i++){var a=P[t>>2],u=P[t+4>>2];t+=8;var c=Ue.read(e,w,a,u,r);if(c<0)return-1;if(o+=c,c<u)break;void 0!==r&&(r+=c)}return o},Xn=function(e,t,n,r){for(var o=0,i=0;i<n;i++){var a=P[t>>2],u=P[t+4>>2];t+=8;var c=Ue.write(e,w,a,u,r);if(c<0)return-1;if(o+=c,c<u)break;void 0!==r&&(r+=c)}return o},Yn=function(e){return e},Jn=Ue.createPath,Qn=function(e){return Ue.unlink(e)},Zn=Ue.createLazyFile,er=Ue.createDevice,tr=function(e){return Er(e)},r.incrementExceptionRefcount=tr,nr=function(e){return wr(e)},r.decrementExceptionRefcount=nr,rr=function(e){return gr(e)},or=function(e){var t=K(),n=rr(4),r=rr(4);Or(e,n,r);var o,i=P[n>>2],a=P[r>>2],u=Q(i);return lr(i),a&&(o=Q(a),lr(a)),q(t),[u,o]},ir=function(e){return or(e)},r.getExceptionMessage=ir,Ue.createPreloadedFile=Re,Ue.staticInit(),r.FS_createPath=Ue.createPath,r.FS_createDataFile=Ue.createDataFile,r.FS_createPreloadedFile=Ue.createPreloadedFile,r.FS_unlink=Ue.unlink,r.FS_createLazyFile=Ue.createLazyFile,r.FS_createDevice=Ue.createDevice,et(),Ot(),It(),Xt(),ar={__assert_fail:Z,__cxa_begin_catch:ne,__cxa_current_primary_exception:re,__cxa_end_catch:ie,__cxa_find_matching_catch_2:se,__cxa_find_matching_catch_3:le,__cxa_rethrow:fe,__cxa_rethrow_primary_exception:he,__cxa_throw:de,__cxa_uncaught_exceptions:pe,__resumeException:ve,__syscall_fcntl64:Zr,__syscall_ioctl:eo,__syscall_openat:to,_abort_js:Be,_embind_finalize_value_array:Ye,_embind_finalize_value_object:Qe,_embind_register_bigint:at,_embind_register_bool:ct,_embind_register_class:Ft,_embind_register_class_constructor:Gt,_embind_register_class_function:Wt,_embind_register_class_property:zt,_embind_register_emval:Qt,_embind_register_enum:en,_embind_register_enum_value:nn,_embind_register_float:on,_embind_register_integer:an,_embind_register_memory_view:un,_embind_register_std_string:sn,_embind_register_std_wstring:mn,_embind_register_value_array:bn,_embind_register_value_array_element:gn,_embind_register_value_object:_n,_embind_register_value_object_field:wn,_embind_register_void:En,_emval_call:Sn,_emval_decref:qt,_emval_get_method_caller:In,_emval_incref:Dn,_emval_run_destructors:jn,_emval_take_value:An,_tzset_js:Cn,clock_time_get:ho,emscripten_get_now:Rn,emscripten_resize_heap:Bn,environ_get:Vn,environ_sizes_get:qn,fd_close:po,fd_read:vo,fd_seek:yo,fd_write:mo,invoke_dii:Lo,invoke_diii:pi,invoke_fi:qo,invoke_fiii:di,invoke_fiij:Xo,invoke_i:Co,invoke_ii:So,invoke_iii:go,invoke_iiif:Mo,invoke_iiii:_o,invoke_iiiii:Ao,invoke_iiiiid:ci,invoke_iiiiif:ni,invoke_iiiiii:Po,invoke_iiiiiii:xo,invoke_iiiiiiii:si,invoke_iiiiiiiiiii:li,invoke_iiiiiiiiiiii:yi,invoke_iiiiiiiiiiiii:hi,invoke_iiiiij:ui,invoke_iij:Ro,invoke_iiji:zo,invoke_iijj:Uo,invoke_j:ii,invoke_ji:Bo,invoke_jiiii:fi,invoke_jij:Do,invoke_v:ko,invoke_vi:Oo,invoke_vid:oi,invoke_vif:Go,invoke_viffddj:Qo,invoke_viffi:Wo,invoke_vifii:ti,invoke_vii:Eo,invoke_viif:Yo,invoke_viifi:ei,invoke_viifii:Zo,invoke_viii:To,invoke_viiifi:jo,invoke_viiifii:Vo,invoke_viiii:wo,invoke_viiiid:ri,invoke_viiiif:Ho,invoke_viiiifi:$o,invoke_viiiii:Io,invoke_viiiiii:Fo,invoke_viiiiiii:vi,invoke_viiiiiiiiii:mi,invoke_viiiiiiiiiiiiiii:bi,invoke_viijf:Ko,invoke_viijii:ai,invoke_vij:Jo,invoke_vijj:No,llvm_eh_typeid_for:Yn},[4,Qr()];case 1:if(ur=G.sent(),cr=qr("__getTypeName",1),sr=qr("__cxa_get_exception_ptr",1),lr=qr("free",1),fr=qr("malloc",1),hr=qr("fflush",1),dr=qr("strerror",1),pr=qr("setThrew",2),vr=qr("_emscripten_tempret_set",1),yr=ur.emscripten_stack_init,ur.emscripten_stack_get_free,ur.emscripten_stack_get_base,mr=ur.emscripten_stack_get_end,br=ur._emscripten_stack_restore,gr=ur._emscripten_stack_alloc,_r=ur.emscripten_stack_get_current,wr=qr("__cxa_decrement_exception_refcount",1),Er=qr("__cxa_increment_exception_refcount",1),Or=qr("__get_exception_message",3),Sr=qr("__cxa_can_catch",3),r.addRunDependency=zr,r.removeRunDependency=Hr,r.addOnPostRun=$,r.FS_createPreloadedFile=Re,r.FS_unlink=Qn,r.FS_createPath=Jn,r.FS_createDevice=er,r.FS=Ue,r.FS_createDataFile=je,r.FS_createLazyFile=Zn,["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getTempRet0","zeroMemory","exitJS","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","listenOnce","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","HandleAllocator","getNativeTypeSize","addOnInit","addOnPostCtor","addOnPreMain","addOnExit","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","stringToNewUTF8","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","demangle","stackTrace","getFunctionArgsName","createJsInvokerSignature","createJsInvoker","PureVirtualError","registerInheritedInstance","unregisterInheritedInstance","getInheritedInstanceCount","getLiveInheritedInstances","setDelayFunction","getStringOrSymbol","emval_get_global"].forEach(Gr),["run","out","err","callMain","abort","wasmMemory","wasmExports","writeStackCookie","checkStackCookie","prettyPrint","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","stackAlloc","setTempRet0","ptrToString","getHeapMax","growMemory","ENV","ERRNO_CODES","strError","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","jstoi_s","getExecutableName","asyncLoad","alignMemory","mmapAlloc","wasmTable","noExitRuntime","addOnPreRun","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","checkWasiClock","doReadv","doWritev","initRandomFill","randomFill","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","findMatchingCatch","getExceptionMessageCommon","incrementExceptionRefcount","decrementExceptionRefcount","getExceptionMessage","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_readFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr","InternalError","BindingError","throwInternalError","throwBindingError","registeredTypes","awaitingDependencies","typeDependencies","tupleRegistrations","structRegistrations","sharedRegisterType","whenDependentTypesAreResolved","embind_charCodes","embind_init_charCodes","readLatin1String","getTypeName","getFunctionName","heap32VectorToArray","requireRegisteredType","usesDestructorStack","checkArgCount","getRequiredArgCount","UnboundTypeError","GenericWireTypeSize","EmValType","EmValOptionalType","throwUnboundTypeError","ensureOverloadTable","exposePublicSymbol","replacePublicSymbol","createNamedFunction","embindRepr","registeredInstances","getBasestPointer","getInheritedInstance","registeredPointers","registerType","integerReadValueFromPointer","enumReadValueFromPointer","floatReadValueFromPointer","readPointer","runDestructors","craftInvokerFunction","embind__requireFunction","genericPointerToWireType","constNoSmartPtrRawPointerToWireType","nonConstNoSmartPtrRawPointerToWireType","init_RegisteredPointer","RegisteredPointer","RegisteredPointer_fromWireType","runDestructor","releaseClassHandle","finalizationRegistry","detachFinalizer_deps","detachFinalizer","attachFinalizer","makeClassHandle","init_ClassHandle","ClassHandle","throwInstanceAlreadyDeleted","deletionQueue","flushPendingDeletes","delayFunction","RegisteredClass","shallowCopyInternalPointer","downcastPointer","upcastPointer","validateThis","char_0","char_9","makeLegalFunctionName","emval_freelist","emval_handles","emval_symbols","init_emval","count_emval_handles","Emval","emval_returnValue","emval_lookupTypes","emval_methodCallers","emval_addMethodCaller","reflectConstruct"].forEach(Br),r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();Lr("preInit"),_i(),n=a,Pr=!0,Tr=!1,xr=void 0;try{for(Ir=function(){var e=jr.value;e in t||Object.defineProperty(t,e,{configurable:!0,get:function(){Vr("Access to module property ('".concat(e,"') is no longer possible via the module constructor argument; Instead, use the result of the module constructor."))}})},Dr=Object.keys(r)[Symbol.iterator]();!(Pr=(jr=Dr.next()).done);Pr=!0)Ir()}catch(e){Tr=!0,xr=e}finally{try{Pr||null==Dr.return||Dr.return()}finally{if(Tr)throw xr}}return[2,n]}})}).apply(this,arguments)};function xf(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function If(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){xf(i,r,o,a,u,"next",e)}function u(e){xf(i,r,o,a,u,"throw",e)}a(void 0)})}}function Df(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Af(e,t,n){return t&&jf(e.prototype,t),n&&jf(e,n),e}function Cf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rf(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var Nf=null,Lf="train.txt",Mf="test.txt",Ff="model.bin",Uf=function(){function e(){Df(this,e),Cf(this,"f",void 0),Cf(this,"fastTextModule",void 0),Cf(this,"initialized",void 0),this.f=null,this.fastTextModule=null,this.initialized=!1}return Af(e,[{key:"init",value:function(e){return If(function(){var t;return Rf(this,function(n){switch(n.label){case 0:return this.initialized?[2]:(t=this,[4,Tf({locateFile:function(t){return t.endsWith(".wasm")?e:t}})]);case 1:return t.fastTextModule=n.sent(),Nf&&this.fastTextModule.addOnPostRun(Nf),this.f=new this.fastTextModule.FastText,this.initialized=!0,[2]}})}).call(this)}},{key:"_malloc",value:function(e){return this.fastTextModule._malloc(e)}},{key:"HEAPU8",get:function(){return this.fastTextModule.HEAPU8}},{key:"FS",get:function(){return this.fastTextModule.FS}},{key:"loadModel",value:function(e,t){return If(function(){var n,r;return Rf(this,function(o){switch(o.label){case 0:return n=this,this.initialized?[3,2]:[4,this.init(t)];case 1:o.sent(),o.label=2;case 2:return r=this.f,[2,new Promise(function(t,o){fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){var t=new Uint8Array(e);n.fastTextModule.FS.writeFile("model.bin",t)}).then(function(){r.loadModel("model.bin"),t(new Wf(r))}).catch(function(e){o(e)})})]}})}).call(this)}},{key:"_train",value:function(e,t){return If(function(e,t){var n,r,o,i,a,u=arguments;return Rf(this,function(c){switch(c.label){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:{},r=u.length>3&&void 0!==u[3]?u[3]:null,this.initialized?[3,2]:[4,this.init()];case 1:c.sent(),c.label=2;case 2:return i=(null===(o=globalThis)||void 0===o?void 0:o.fetch)||fetch,a=this.f,[2,new Promise(function(o,u){i(e).then(function(e){return e.arrayBuffer()}).then(function(e){var t=new Uint8Array(e);fastTextModule.FS.writeFile(Lf,t)}).then(function(){var e=new fastTextModule.Args;["lr","lrUpdateRate","dim","ws","epoch","minCount","minCountLabel","neg","wordNgrams","loss","model","bucket","minn","maxn","t","label","verbose","pretrainedVectors","saveOutput","seed","qout","retrain","qnorm","cutoff","dsub","qnorm","autotuneValidationFile","autotuneMetric","autotunePredictions","autotuneDuration","autotuneModelSize"].forEach(function(t){t in n&&(e[t]=n[t])}),e.model=fastTextModule.ModelName[t],e.loss="loss"in n?fastTextModule.LossName[n.loss]:"hs",e.thread=1,e.input=Lf,a.train(e,r),o(new Wf(a))}).catch(function(e){u(e)})})]}})}).apply(this,arguments)}},{key:"trainSupervised",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this._train(e,"supervised",t,n).then(function(e){return e}).catch(function(e){throw e})}},{key:"trainUnsupervised",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return this._train(e,t,n,r).then(function(e){return e}).catch(function(e){throw e})}}]),e}(),Gf=function(e){var t=e*Float32Array.BYTES_PER_ELEMENT,n=this._malloc(t),r=new Uint8Array(this.HEAPU8.buffer,n,t);return{ptr:r.byteOffset,size:e,buffer:r.buffer}},Bf=function(e){return new Float32Array(e.buffer,e.ptr,e.size)},Wf=function(){function e(t){Df(this,e),Cf(this,"f",void 0),this.f=t}return Af(e,[{key:"isQuant",value:function(){return this.f.isQuant}},{key:"getDimension",value:function(){return this.f.args.dim}},{key:"getWordVector",value:function(e){var t=Gf.call(this,this.getDimension());return this.f.getWordVector(t,e),Bf(t)}},{key:"getSentenceVector",value:function(e){if(e.includes("\n"))throw new Error("sentence vector processes one line at a time (remove '\\n')");e+="\n";var t=Gf.call(this,this.getDimension());return this.f.getSentenceVector(t,e),Bf(t)}},{key:"getNearestNeighbors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return this.f.getNN(e,t)}},{key:"getAnalogies",value:function(e,t,n,r){return this.f.getAnalogies(r,e,t,n)}},{key:"getWordId",value:function(e){return this.f.getWordId(e)}},{key:"getSubwordId",value:function(e){return this.f.getSubwordId(e)}},{key:"getSubwords",value:function(e){return this.f.getSubwords(e)}},{key:"getInputVector",value:function(e){var t=Gf.call(this,this.getDimension());return this.f.getInputVector(t,e),Bf(t)}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.f.predict(e,t,n)}},{key:"getInputMatrix",value:function(){if(this.isQuant())throw new Error("Can't get quantized Matrix");return this.f.getInputMatrix()}},{key:"getOutputMatrix",value:function(){if(this.isQuant())throw new Error("Can't get quantized Matrix");return this.f.getOutputMatrix()}},{key:"getWords",value:function(){return this.f.getWords()}},{key:"getLabels",value:function(){return this.f.getLabels()}},{key:"getLine",value:function(e){return this.f.getLine(e)}},{key:"saveModel",value:function(){this.f.saveModel(Ff);var e=fastTextModule.FS.readFile(Ff,{encoding:"binary"});return new Blob([new Uint8Array(e,e.byteOffset,e.length)],{type:" application/octet-stream"})}},{key:"test",value:function(e,t,n){var r,o=(null===(r=globalThis)||void 0===r?void 0:r.fetch)||fetch,i=this.f;return new Promise(function(r,a){o(e).then(function(e){return e.arrayBuffer()}).then(function(e){var t=new Uint8Array(e);fastTextModule.FS.writeFile(Mf,t)}).then(function(){var e=i.test(Mf,t,n);r(e)}).catch(function(e){a(e)})})}}]),e}(),$f=Object.freeze({__proto__:null,FastText:Uf,addOnPostRun:function(e){Nf=e}})}}]);
//# sourceMappingURL=sourceMap/6080.js.map