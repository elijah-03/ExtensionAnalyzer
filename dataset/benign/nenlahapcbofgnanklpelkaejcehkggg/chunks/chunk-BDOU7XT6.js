import{a as y}from"./chunk-AGWLSUX4.js";import{f as g}from"./chunk-KJBXKQ52.js";import{F as u,z as I}from"./chunk-K2PA57PF.js";import{e as d}from"./chunk-3GYLW4KZ.js";var e=d(I());var S=d(u());function b(n){return`${g}${n}`}function R({closeModal:n,iframeLandingPagePath:i,onSignUpComplete:l,onLoadComplete:E,onStepChange:m,requestPayload:p}){let o=(0,e.useRef)(null),[P,U]=(0,e.useState)(!1);(0,e.useEffect)(()=>{if(o.current&&p){let s=o.current;s.onload=()=>{s.contentWindow?.postMessage({type:"init-sp-embedded-create-account-modal",status:"success",payload:p},"*")}}},[o.current]),(0,e.useEffect)(()=>{let s=new AbortController;return chrome.runtime.sendMessage({type:"embeddedSignUpCookieRelaxSameSiteProperty"}).then(r=>{U(!0)}),window.addEventListener("message",async function(r){let a=o.current;if(a&&r.source===a.contentWindow){let{data:t}=r;if(t.type==="embeddedSignUpLoaded")E(a);else if(t.type==="embeddedSignUpPageView")m&&m(t.pageName);else if(t.type==="embeddedSignUpClose")n();else if(t.type==="embeddedSignUpResponse"){let f=await chrome.runtime.sendMessage({type:"embeddedSignUpCookie",response:t.response});f.status==="success"&&(l&&l(f.payload),a.contentWindow?.postMessage({source:"sp-embedded-create-account-modal",status:"success"},"*"))}}},{signal:s.signal}),()=>s.abort()},[]);let c="about:blank";return P&&(c=y()?`${b(i)}?step=offerSent`:b(i)),(0,S.jsx)("iframe",{ref:o,src:c,className:"w-full h-full"})}export{b as a,R as b};
