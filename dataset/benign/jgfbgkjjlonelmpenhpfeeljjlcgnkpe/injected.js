(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}!function(n){n(document).on("click",".loginProcess,.js-uc",(function(){if("bg-info js-uc"==n(this).attr("class")){var e={appResponse:JSON.parse(n("head")[0].innerHTML.match(/appResponse:(.*)/g)[0].replace(/^appResponse: JSON.parse\(\'/,"").replace(/'\),$/,"").replace(/\\'/g,"'")),gwstokenMd5:n("head")[0].innerHTML.match(/gwstokenMd5:(.*)/g)[0].replace(/^gwstokenMd5: "/,"").replace(/",$/,"")},t=e.appResponse.userauth[n(this).attr("data-index")];e.appResponse.userauth=[],e.appResponse.userauth[0]=t,d(e=m(e))}else n("#clloginProcess").hide()}));var a=function(e){this.args=e};n.extend(a.prototype,{runTask:function(){var e=this;switch(e.args.task.type){case"ifSelector":return new Promise((function(t,n){e.handleIfSelector(e.args.task.args,(function(e){t(e)}))}));case"input":return new Promise((function(t,n){e.handleInput(e.args.auth,e.args.task.args,(function(e){t(e)}))}));case"click":return new Promise((function(t,n){e.handleClick(e.args.task.args,(function(e){t(e)}))}));case"recaptchaClick":return new Promise((function(t,n){e.handleRecaptchaClick(e.args.task.args,(function(e){t(e)}))}));case"hitEnter":return new Promise((function(t,n){e.handleHitEnter(e.args.task.args,(function(e){t(e)}))}));case"finishTask":return new Promise((function(e,t){setTimeout((function(){n("#clloginProcess").remove(),e()}),2e3)}));case"wait":return new Promise((function(t,n){setTimeout((function(){t()}),e.args.task.args)}));case"waitForSelector":return new Promise((function(t,n){e.handleWaitForSelector(e.args.task.args,(function(e){t(e)}))}));case"call":return new Promise((function(t,n){e.handleCall(e.args.task.args,(function(e){t(e)}))}))}},handleIfSelector:function(e,t){var a=Date.now(),o=function(){n(e.selector).length>0&&n(e.selector).is(":visible")?t():t({error:"no_such_element"})};if(e.waitForIt)var s=setInterval((function(){var t=Date.now()-a;n(e.selector).length>0&&n(e.selector).is(":visible")&&(o(),clearInterval(s)),e.timeout&&t>e.timeout&&(clearInterval(s),o())}),100);else o()},handleInput:function(e,t,a){var o=this,s=Date.now(),r=t.value?t.value.replace(/^\{auth\./,"").replace("}",""):"",i=t.selector,p=function(){if(n(i).length>0&&n(i).is(":visible")){for(var e=o.args.auth[r],s=0;s<e.length;s++)n(i)[0].dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:e.charAt(s),char:e.charAt(s),shiftKey:!0}));if(n(i).val(o.args.auth[r]),n(i)[0].dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),n(i)[0].dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})),n(i)[0].dispatchEvent(new KeyboardEvent("keydown",{key:"Shift"})),n(i)[0].dispatchEvent(new Event("blur")),t.hitEnter){n(i).focus();var p=n.Event("keypress",{keyCode:13});p.which=13,n(i).trigger(p)}a()}else n("#clloginProcess").remove(),a({error:"no_such_element"})};if(t.waitForIt)var c=setInterval((function(){var e=Date.now()-s;n(i).length>0&&n(i).is(":visible")&&(p(),clearInterval(c)),t.timeout&&e>t.timeout&&(clearInterval(c),p())}),100);else p()},handleClick:function(e,t){var a=Date.now(),o="";if("string"==typeof e)n(o=e).length>0?(n(o)[0].dispatchEvent(new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0})),n(o)[0].dispatchEvent(new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0})),n(o)[0].click(),t()):(n("#clloginProcess").remove(),t({error:"no_such_element"}));else{o=e.selector;var s=function(){n(o).length>0&&n(o).is(":visible")?(n(o)[0].dispatchEvent(new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0})),n(o)[0].dispatchEvent(new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0})),n(o)[0].click(),t()):(n("#clloginProcess").remove(),t({error:"no_such_element"}))};if(e.waitForIt)var r=setInterval((function(){var t=Date.now()-a;if(n(o).length>0&&n(o).is(":visible")){if(e.attributes){var i=!0;if(n.each(e.attributes,(function(e,t){"{falsy}"===t?n(o).attr(e)&&(i=!1):n(o).attr(e)!==t&&(i=!1)})),!i)return e.timeout&&t>e.timeout?(clearInterval(r),void s()):void 0}s(),clearInterval(r)}e.timeout&&t>e.timeout&&(clearInterval(r),s())}),100);else s()}},handleHitEnter:function(e,t){n(e.selector).focus();var a=n.Event("keypress",{keyCode:13});a.which=13,n(e.selector).trigger(a)},handleCall:function(e,t){var n=e.ctx,a=n?e.fn.bind(n):e.fn,o=Array.isArray(e.args)?e.args:[],s=o.indexOf("::callback::");return-1===s?a(o):promiseFromCallback((function(e){o[s]=function(t){e(null,t)},a(o)}))},handleWaitForSelector:function(e,t){var a=Date.now(),o=setInterval((function(){var s=Date.now()-a;n(e.selector).length>0&&n(e.selector).is(":visible")&&(t(),clearInterval(o)),e.timeout&&s>e.timeout&&(clearInterval(o),t())}),100)},handleRecaptchaClick:function(e,t){var a=Date.now(),o=setInterval((function(){if(window.location.href.match(/https:\/\/www.google.com\/recaptcha\/api\d\/anchor/)&&n("#recaptcha-anchor div.recaptcha-checkbox-checkmark").length&&n("#recaptcha-anchor div.recaptcha-checkbox-checkmark").is(":visible")&&(i=n("#recaptcha-anchor div.recaptcha-checkbox-checkmark").get(0),c=(p=n(window).scrollTop())+n(window).height(),(l=n(i).offset().top)+n(i).height()<=c&&l>=p)){var e=!0;if(sessionStorage.getItem("recaptchaaccesstime")&&Date.now()-parseInt(sessionStorage.getItem("recaptchaaccesstime"),10)<7e3&&(e=!1),e){n("#recaptcha-anchor div.recaptcha-checkbox-checkmark").click(),sessionStorage.setItem("recaptchaaccesstime",Date.now()+""),clearInterval(o);var s=Date.now(),r=setInterval((function(){return n("#recaptcha-token").length&&n("#recaptcha-token").val()||Date.now()-s>1e4?(clearInterval(r),t()):void 0}),100);return}if(Date.now()-a>6e4)return clearInterval(o),t(new Error("timeout"))}var i,p,c,l}),500)}});var o="clTrustedDomains";chrome.runtime.onMessage.addListener((function(s,i,p){if("verify-toplevel-domain"===s.type){var c,l=document.getElementsByTagName("img")||[],u=document.getElementsByTagName("script")||[],h=function(e){return!!new RegExp("^(http:|https:|)\\/\\/([a-z]+\\.classlink\\.com)\\/").test(e)},d=!1,m=function(e,n){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=t(e))){a&&(e=a);var o=0,s=function(){};return{s,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,p=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){p=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(p)throw r}}}}(document.getElementsByTagName("link")||[]);try{for(m.s();!(c=m.n()).done;)h(c.value.getAttribute("href"))&&(d=!0)}catch(e){m.e(e)}finally{m.f()}for(var g=0,f=[].concat(e(l),e(u));g<f.length;g++)h(f[g].getAttribute("src"))&&(d=!0);d&&!h(window.location.href)?chrome.storage.sync.get(o,(function(e){-1==(e=e&&e[o]?e[o]:[]).indexOf(window.location.hostname)?(n("head").append("<style>.clext_unset{all:unset} h2 {display:block !important; font-size: calc(1.325rem + .9vw) !important;} p { display:block !important;}</style>"),n("body").append('<div id="clTrustedProcess" class="clext_unset" style="height: 100% !important; display: block !important;width: 100% !important;background: rgba(0,0,0,0.8);position: fixed !important;z-index: 1000 !important;top: 0px !important;left: 0px !important;"><div class="clext_unset" style="width:550px !important;height:200px !important;margin: auto !important; position:absolute !important; top:0 !important; right: 0 !important; left: 0 !important; bottom: 0 !important; background: white !important; padding: 20px 25px 10px 25px !important;-webkit-border-radius: 3px !important;-moz-border-radius: 3px !important;border-radius: 3px !important;-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;text-align: left !important;"><a class="clext_unset cl_trustedProcess" id="cl_closeDiv"  style="position: absolute !important;top: 5px !important;right: 10px !important;text-decoration: none !important;color: red !important;font-weight: bold !important;font-size: 20px !important;cursor: pointer !important;" >X</a><h2 class="clext_unset" style="border-bottom: solid 1px #d4d4d4 !important;color: black !important;background-size: 30px 30px !important;background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gUJCA0BnbIIZgAABrdJREFUSMd9l1tsXFcVhr+1zh7P2I4vcZS7c2kDtptQCrk0qLQphCqleQGBiiCAqKK+IKq+FkHFC6hP8FDxhlQVpMqiFWkE5QVoi4BGDY1pUig4sYibRnGujm+xPZ455+zFw95nZlwnbGlmn7N1zvnX+tdl/1sABodPce7IPgZfemeHWL5BRVSBRAQREAEFRAQFDEHFMEAMPAKEe2+GGXgAg9yM3PCoXh395v3nh4ZHOHtkL9IAHT51QkX3qkhbooIKCEKiAVQLIxAECH9hmIW5CWp4I/4Mb0bure6xkbPf2PvZoeERZHD4VAfIv1S4O5EAkETPAqigGsBUwj0YSFgrQK3hcQT2wVsPeG/kcfYw7j33OuBoAA1eJiIkcVaNBsQ1afH6o8NMMDO8QG6CV0NMgrcaLVIBb3ejHHVi9j0VbQEVnDY9d5EFUcHFOAsh7stoBizEE4mUS6RbPCFeEdyy/CmnwrakxVOnkKjgiviK4ETQyIgWwDHOTarjd81ITMjiQk6IkXmwCG4iW50iXrVJs0oAdRquSwoqGulvJllBuAosZR5vRlmVNCRSME4F8T4YFhnKwne801guiUjwVIKnBeWJKq5hVDAizHCjmrKtq8xDG7tREc5MzjM6XWVNxZF6kGZcMRXw4BV8LjhFSFrKpfCqAC1JoF4JhoVwCBPzNX6yfzv71nUtS7Kx2SpH3xxjbXspeBopdt4wgcQgjyFsxK+IZZiVUoz3bC1n99pODm3ppast4f2pBX5+4GMrQAEGetp57fAuZmsZbYk2ErbAKJqQa+1MCUSvgmdmsOSNVw4N0VN2AHxncD2vX5phoKedO43VZce3BtZz/INJEpWifkNPEItGxKYgsUY0JowTYS7NefXRexqgxXikv5fR6UVO35jH7gB+//ourizWG96KSvA25ocWNVkAhliHGH+8ux2ny5vFTD3n4PH3OHjsDJcW6o31Y+OTnJupNu47S4pTJYkehjyyRutxRe8VUYBGgiHC5cX6Ck8ePnaaVITxJz6Di6305lLKU389z3QtZfbJBygnyvjsEnO1DO1sQ7C42TSbj0qjGxgiQkmFyaWUT6zu5MXPDywD/fafx5jPPO8+/mm++up7HPn9+9S98dPTE1x5Yj+d3jg7uwTAgU09HH9sJ3NpTuo9YrH2Yw9QjNiJgjWT1ZQHN/bw7N4t9FWasb28UOel0xO88IVBVODL927kiwPr6P7FCZ7Z3c+P/3GRPZt7ua+vA4CSCoO97fzu8C5quREJbVKN0EgQM6g45bn921dQ/PRb5xnc2M3nNvVw8dYSL45eY2ymysEtq/n+yQu88J8rTD35wIr3Sio8/+AOjr45Rm/FkcV1NQuN1jByM762Y+2Kl09eneP6YspgbyihrV0V3v7KfayrlPj31AKvX5om/e5DdJWS22b4ju4KImETCXiGK/ZRgMXMszNS1Tp29nVwo1rHJfDLs9d47cIUb0zMsKbi+M2jO3n76hw/+vuHbO5sY2h1Ow9v7l32frtTtneVmViooyJBwfhIsSfsTDeXshXA3W2O44d38Zfxm0zVMn64Zwu/OjjA4a197Fu3iqc/uYkE2NDZxoFNvSve9wZTtZxEJAoGC8nlCTuKE+G3H9y8LV1Dve288fU9PPfOBf50aZqJhRrP7t3C367M8oOTF3hs+2q+dNeaxj7dOq5X61y8tYRTwVugXD7165H5Npd0OhVKIlxZrPPM7n6ODm24rQG13HOjmjJy/Rb9q8rs6uukLQlt9k7j8T+MMl3PqGWe3KCWZwvOKMSZkIuxravM8/+8zIW5JY4MrGdHd4VSS/cqJ0r/qjL9q8r8vzGX5rx7Y56fnbnEtWpKh9OgvzDMgzMzcg8iHkGpYaytlDhx9RYv/3eSDR1trKm4ZQokaZE+AHkMl0Wpk3pjYqHGYurZ2lWmMwkCwXvILChQl0e5kouQmEXJEvbcu7orCFDNfBR/kDQ2FJqap0XSZlHSrq2UyCtG3XuyuC8XzxiG82aax9TLFJwXMrVQ274pCiwqSS9BxIktw8UQfCxMI3rmITXIfegRmY8S2CPOYNp7axcVcgt60XkhA7yAE8Ni/BsnC5ZLXGuhOW+IeSOzEM88XnuiEdiMGvJyseDNyDyk0brcjNQg8+E+zT1pbqQe6t63/CD1ntR8fNaT+lCixbesxXMTfUUGh09tBUZVpENbJG3zVNGUK9qyrQnLjzDN6ogNKXpY0FuAelg0s3skHtoGgD+q6LbW7P3oXOTUipK1ZqyL40sBbPHg5s3jPR8adujckX1j/wMFtGX0ySOVqwAAAABJRU5ErkJggg==) no-repeat 0px 2px !important;padding: 0px 0px 15px 40px !important;margin:0px 0px 10px 0px !important;font-size: 25px !important;height: 33px !important;line-height: 30px !important;">ClassLink OneClick</h2><p class="clext_unset bloading"><b class="clext_unset" style="color:#008ad7 !important;text-transform: capitalize !important;">'+window.location.host+'</b> is not hosted by ClassLink. To enable the OneClick Extension for automatic Single Sign-On (SSO) on this website, please make sure it\'s a trusted site and click Save & Continue?</p><p class="clext_unset bloading" style="padding:10px !important; text-align:right !important;"><button style="background-color: #04AA6D !important;color: white !important;padding: 6px 15px !important;margin: 8px 0 !important;border: none !important;cursor: pointer !important;opacity: 0.9 !important;" class="clext_unset cl_okbtn">Save & continue</button> <button style="background-color: #ccc !important;color: black !important;padding: 6px 15px !important;margin: 8px 0 !important;border: none !important;cursor: pointer !important;opacity: 0.9 !important;" class="clext_unset cl_cancelbtn">Cancel</button></p></div>'),n("#clTrustedProcess .cl_cancelbtn,#clTrustedProcess .cl_closebtn,#clTrustedProcess .cl_closebtn,#clTrustedProcess .cl_trustedProcess").unbind("click").click((function(){n("#clTrustedProcess").remove(),r(s.data)})),n("#clTrustedProcess .cl_okbtn").unbind("click").click((function(){n("#clTrustedProcess").remove(),chrome.storage.sync.get(o,(function(e){if(-1==(e=e&&e[o]?e[o]:[]).indexOf(window.location.hostname)){e.push(window.location.hostname);var t={};t[o]=e,chrome.storage.sync.set(t)}})),r(s.data)})),p(!1)):r(s.data)})):p(!0)}else{if("handle-sso-task"===s.type)return function(e){new a(e).runTask().then((function(e){p(e)}))}(s),!0;"handle-sso"===s.type&&(r(s.data),p())}}));var s,r=function(e){var t="",a="";if(e&&""!=e){n("body").append('<div  id="clloginProcess" style="height: 100%; display: block;width: 100%;background: rgba(0,0,0,0.8);position: fixed;z-index: 1000;top: 0px;left: 0px;"><div  style="width:500px;height:125px;margin: auto; position:absolute; top:0;right: 0; left: 0; bottom: 0; background: white;padding: 20px 25px 10px 25px;-webkit-border-radius: 3px;-moz-border-radius: 3px;border-radius: 3px;-webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);-moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);text-align: left;"><a   class="loginProcess closebtn" id="closeDiv"  style="position: absolute;top: 5px;right: 10px;text-decoration: none;color: red;font-weight: bold;font-size: 20px;" >X</a><h2 style="border-bottom: solid 1px #d4d4d4;color: black;background-size: 30px 30px;background: transparent url(data:image/png;base64,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) no-repeat 0px 2px;padding: 0px 0px 15px 40px !important;margin:0px 0px 10px 0px !important;font-size: 25px;height: 33px;line-height: 30px;">ClassLink OneClick</h2><p class="bloading">Making magic happen...</p></div>');var o=decodeURIComponent(e);if((a=JSON.parse(o)).appResponse.advance_sso){var s=a.appResponse.advance_sso_json;if(a.appResponse.userauth&&a.appResponse.userauth.length>0)for(var r in a.appResponse.userauth[0])try{a.appResponse.userauth[0][r]=CryptoJS.AES.decrypt(a.appResponse.userauth[0][r],a.gwstokenMd5).toString(CryptoJS.enc.Utf8)}catch(e){a.appResponse.userauth[0][r]=a.appResponse.userauth[0][r]}for(var i=0;i<a.appResponse.selectors.length;i++){var p=CryptoJS.AES.decrypt(a.appResponse.selectors[i].value,a.gwstokenMd5).toString(CryptoJS.enc.Utf8);if(a.appResponse.userauth&&0==a.appResponse.userauth.length){var c={};c[a.appResponse.selectors[i].sel]=p,a.appResponse.userauth.push(c)}else a.appResponse.userauth[0][a.appResponse.selectors[i].sel]||(a.appResponse.userauth[0][a.appResponse.selectors[i].sel]=p)}a.appResponse.userauth&&a.appResponse.userauth.length>0&&(s.auth=a.appResponse.userauth[0]),chrome.runtime.sendMessage(chrome.runtime.id,{type:"initiate-sso-tasks",data:s},(function(e){chrome.runtime.lastError})),setTimeout((function(){n("#clloginProcess").remove()}),3e3)}else setTimeout((function(){a.appResponse.pre_auth_script=a.appResponse.pre_auth_script||"",a.appResponse.preauth_delay=a.appResponse.preauth_delay||"",a.appResponse.post_auth_script=a.appResponse.post_auth_script||"",a.appResponse.postauth_delay=a.appResponse.postauth_delay||"";var e=function(){var e=!1;if(a.appResponse.userauth.length>0)for(var o=0;o<a.appResponse.selectors.length;o++)"text"!=a.appResponse.selectors[o].type&&"password"!=a.appResponse.selectors[o].type||(a.appResponse.selectors[o].value=a.appResponse.userauth[0][a.appResponse.selectors[o].sel]);for(var s=0;s<a.appResponse.selectors.length;s++){var r,i="";(r=a.appResponse.selectors[s].value)&&(i=CryptoJS.AES.decrypt(r,a.gwstokenMd5).toString(CryptoJS.enc.Utf8)),""!=i||e||(e=!0),"submit"==a.appResponse.selectors[s].type?t=a.appResponse.selectors[s].sel:n(a.appResponse.selectors[s].sel.replace(":","")).val(i)}a.appResponse.selectors.length>0&&(""==t?n(a.appResponse.selectors[0].sel).closest("form").submit():n(t).trigger("click"),function(){a.appResponse.postauth_delay=a.appResponse.postauth_delay?a.appResponse.postauth_delay:0;var e=a.appResponse.post_auth_script,t=function(){chrome.runtime.sendMessage(chrome.runtime.id,{type:"execute-script",data:e},(function(e){chrome.runtime.lastError}))};""!=a.appResponse.postauth_delay&&""!=a.appResponse.post_auth_script?setTimeout((function(){t()}),a.appResponse.postauth_delay):""!=a.appResponse.post_auth_script&&t()}(),setTimeout((function(){n("#clloginProcess").remove()}),2e3))};""!=a.appResponse.pre_auth_script||""!=a.appResponse.preauth_delay?function(){a.appResponse.preauth_delay=a.appResponse.preauth_delay?a.appResponse.preauth_delay:0;var t=a.appResponse.pre_auth_script,n=function(){chrome.runtime.sendMessage(chrome.runtime.id,{type:"execute-script",data:t},(function(e){chrome.runtime.lastError}))};""!=a.appResponse.preauth_delay&&""!=t?setTimeout((function(){n(),e()}),a.appResponse.preauth_delay):""!=a.appResponse.preauth_delay&&""==t?setTimeout((function(){e()}),a.appResponse.preauth_delay):""==a.appResponse.preauth_delay&&""!=t&&(n(),e())}():e()}),1e3)}},i="^https:\\/\\/(betalaunchpad\\.classlink\\.com|stagingclouddesktop\\.classlink\\.com|launchpad\\.classlink\\.com|my\\.classlink\\.eu|betamyapps\\.classlink\\.com|stagingmyapps\\.classlink\\.com|myapps\\.classlink\\.com|betateacherconsole\\.classlink\\.com|stagingteacherconsole\\.classlink\\.com|teacherconsole\\.classlink\\.com|betamybackpack\\.classlink\\.com|stagingmybackpack\\.classlink\\.com|mybackpack\\.classlink\\.com|staging-login\\.classlink\\.com|beta-login\\.classlink\\.com|login\\.classlink\\.com)(?![w\\.-])";if(new RegExp(i+"/browsersso").test(window.location.href)){var p={appResponse:JSON.parse(n("head")[0].innerHTML.match(/appResponse:(.*)/g)[0].replace(/^appResponse: JSON.parse\(\'/,"").replace(/'\),$/,"").replace(/\\'/g,"'")),gwstokenMd5:n("head")[0].innerHTML.match(/gwstokenMd5:(.*)/g)[0].replace(/^gwstokenMd5: "/,"").replace(/",$/,""),gwstoken:n("head")[0].innerHTML.match(/gwstoken:(.*)/g)[0].replace(/^gwstoken: "/,"").replace(/"$/,"")},c=!1;if(p.appResponse.userauth.length<=1){for(var l=0;l<p.appResponse.selectors.length;l++){var u;if(0!=p.appResponse.userauth.length)break;u=p.appResponse.selectors[l].value;var h=CryptoJS.AES.decrypt(u,p.gwstokenMd5).toString(CryptoJS.enc.Utf8);if(("TEXT"==p.appResponse.selectors[l].type.toUpperCase()||"PASSWORD"==p.appResponse.selectors[l].type.toUpperCase()||"HIDDEN"==p.appResponse.selectors[l].type.toUpperCase())&&""==h){c=!0;break}}p=m(p),c||d(p)}}else new RegExp(i+"/home").test(window.location.href)||new RegExp(i+"/admin").test(window.location.href)||new RegExp(i+"/oauth").test(window.location.href)?window.addEventListener("message",(function(e){try{var t=JSON.parse(atob(e.data));if("stopapptimers"==t.type)chrome.runtime.sendMessage(chrome.runtime.id,t,(function(e){chrome.runtime.lastError}));else if(new RegExp(i).test(e.origin))try{switch(t.type){case"autolaunch":if(t.data.length>0){var n=btoa("islogin_"+window.location.host);chrome.storage.sync.get((function(e){if(!e[n]){var a={};a[n]=!0,chrome.storage.sync.set(a),chrome.runtime.sendMessage(chrome.runtime.id,{type:"initiate-autolaunch",data:t},(function(e){chrome.runtime.lastError}))}}))}break;case"apptimer":chrome.runtime.sendMessage(chrome.runtime.id,{type:"initiate-apptimer",data:t.data},(function(e){chrome.runtime.lastError}));break;case"ssosignout":chrome.runtime.sendMessage(chrome.runtime.id,{type:"initiate-ssosignout",data:t.data},(function(e){chrome.runtime.lastError}))}}catch(e){}}catch(e){}}),!1):(new RegExp(i).test(window.location.origin)&&(n("#login_form_action").length>0||n(".direct-login-container").length>0||n(".direct-login-container").length>=0)||new RegExp(i).test(i+"/quickcard"))&&((s=[]).push(btoa("islogin_"+window.location.host)),window.location.host.includes("beta")?s.push(btoa("islogin_betamyapps.classlink.com")):window.location.host.includes("staging")?s.push(btoa("islogin_stagingmyapps.classlink.com")):s.push(btoa("islogin_myapps.classlink.com")),chrome.storage.sync.remove(s));function d(e){if(!new RegExp(i).test(window.location.origin))return!1;e.LaunchpadUri=window.location.origin;var t=JSON.stringify(e),n=e.appResponse.login_url;chrome.runtime.sendMessage(chrome.runtime.id,{type:"initiate-sso",data:encodeURIComponent(t)},(function(e){chrome.runtime.lastError})),window.location.href=n}function m(e){var t=Object.assign({},e);if(t.appResponse&&t.appResponse.userauth&&t.appResponse.userauth.length>0)for(var n=0;n<t.appResponse.selectors.length;n++)if("text"==t.appResponse.selectors[n].type||"password"==t.appResponse.selectors[n].type){var a=t.appResponse.userauth[0][t.appResponse.selectors[n].sel];if(a){var o=CryptoJS.AES.decrypt(a,t.gwstokenMd5).toString(CryptoJS.enc.Utf8),s="%userauth"+n+"%",r=new RegExp(s,"g");t.appResponse.pre_auth_script&&""!=t.appResponse.pre_auth_script.trim()&&-1!=t.appResponse.pre_auth_script.indexOf(s)&&(t.appResponse.pre_auth_script=t.appResponse.pre_auth_script.replace(r,o)),t.appResponse.post_auth_script&&""!=t.appResponse.post_auth_script.trim()&&-1!=t.appResponse.post_auth_script.indexOf(s)&&(t.appResponse.post_auth_script=t.appResponse.post_auth_script.replace(r,o))}}return t}}(jQuery)})();