!function(){function kU(mU,gK,XS){function at(MQ,ka){if(!gK[MQ]){if(!mU[MQ]){var wU="function"==typeof require&&require;if(!ka&&wU)return wU(MQ,!0);if(wY)return wY(MQ,!0);var Ta=new Error("Cannot find module '"+MQ+"'");throw Ta.code="MODULE_NOT_FOUND",Ta}var cv=gK[MQ]={exports:{}};mU[MQ][0].call(cv.exports,(function(kU){var gK;return at(mU[MQ][1][kU]||kU)}),cv,cv.exports,kU,mU,gK,XS)}return gK[MQ].exports}for(var wY="function"==typeof require&&require,MQ=0;MQ<XS.length;MQ++)at(XS[MQ]);return at}return kU}()({1:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.IMG_FILTER_ID=gK.MSG_CLEANUP=gK.ROOT_VARS_PREFIX=gK.META_PROPERTY=gK.STYLESHEET_COMMON_CLASSNAME=gK.PROXY_SELECTOR=gK.EVENT_PREFIX=gK.STYLESHEET_CORS_SELECTOR=gK.STYLESHEET_SYNC_SELECTOR=gK.STYLESHEET_ROOT_VARS_SELECTOR=gK.STYLESHEET_INLINE_SELECTOR=gK.STYLESHEET_OVERRIDE_SELECTOR=gK.STYLESHEET_VARIABLES_SELECTOR=gK.STYLESHEET_INVERT_SELECTOR=gK.STYLESHEET_TEXT_SELECTOR=gK.STYLESHEET_USER_AGENT_SELECTOR=gK.STYLESHEET_FALLBACK_SELECTOR=gK.MISC_PREFIX=void 0;const XS=kU("./prefix");gK.MISC_PREFIX=XS.PREFIX,gK.STYLESHEET_FALLBACK_SELECTOR=`.${XS.PREFIX}-fb`,gK.STYLESHEET_USER_AGENT_SELECTOR=`.${XS.PREFIX}-ua`,gK.STYLESHEET_TEXT_SELECTOR=`.${XS.PREFIX}-tx`,gK.STYLESHEET_INVERT_SELECTOR=`.${XS.PREFIX}-iv`,gK.STYLESHEET_VARIABLES_SELECTOR=`.${XS.PREFIX}-vb`,gK.STYLESHEET_OVERRIDE_SELECTOR=`.${XS.PREFIX}-or`,gK.STYLESHEET_INLINE_SELECTOR=`.${XS.PREFIX}-il`,gK.STYLESHEET_ROOT_VARS_SELECTOR=`.${XS.PREFIX}-rv`,gK.STYLESHEET_SYNC_SELECTOR=`.${XS.PREFIX}-sn`,gK.STYLESHEET_CORS_SELECTOR=`.${XS.PREFIX}-cr`,gK.EVENT_PREFIX=`__${XS.PREFIX}__`,gK.PROXY_SELECTOR=`.${XS.PREFIX}-pr`,gK.STYLESHEET_COMMON_CLASSNAME=`${XS.PREFIX}m2`,gK.META_PROPERTY=XS.PREFIX,gK.ROOT_VARS_PREFIX=XS.PREFIX,gK.MSG_CLEANUP=gK.EVENT_PREFIX+"cleanUp",gK.IMG_FILTER_ID=`${XS.PREFIX}-image-filter`},{"./prefix":29}],2:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0});const XS=kU("../const"),at=kU("../defaults"),wY=kU("./dynamic-theme"),MQ=kU("./utils/dom");async function ka(kU,mU,gK){"cleanStyle"===(null==kU?void 0:kU.action)&&(0,wY.removeDynamicTheme)()}function wU(){(0,MQ.removeNode)(document.querySelector(XS.STYLESHEET_FALLBACK_SELECTOR))}async function Ta(){chrome.runtime.onMessage.addListener(ka);const kU=await chrome.runtime.sendMessage({action:"getStyle"});if(kU){const mU=window.top===window;(0,wY.createOrUpdateDynamicTheme)(at.DEFAULT_THEME,kU,mU)}else wU()}Ta()},{"../const":1,"../defaults":20,"./dynamic-theme":7,"./utils/dom":18}],3:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.createAdoptedStyleSheetOverride=void 0;const XS=kU("./stylesheet-modifier"),at=new WeakMap,wY=new WeakSet;function MQ(kU){let mU=!1;function gK(mU,gK){const XS=[...kU.adoptedStyleSheets],at=XS.indexOf(mU),wY=XS.indexOf(gK);at!==wY-1&&(wY>=0&&XS.splice(wY,1),XS.splice(at+1,0,gK),kU.adoptedStyleSheets=XS)}function MQ(){mU=!0;const gK=[...kU.adoptedStyleSheets];kU.adoptedStyleSheets.forEach((kU=>{if(wY.has(kU)){const mU=gK.indexOf(kU);mU>=0&&gK.splice(mU,1),at.delete(kU),wY.delete(kU)}})),kU.adoptedStyleSheets=gK}function ka(MQ,ka){kU.adoptedStyleSheets.forEach((kU=>{if(wY.has(kU))return;const wU=kU.rules,Ta=new CSSStyleSheet;function cv(){for(let kU=Ta.cssRules.length-1;kU>=0;kU--)Ta.deleteRule(kU);return gK(kU,Ta),at.set(kU,Ta),wY.add(Ta),Ta}const So=undefined;(0,XS.createStyleSheetModifier)().modifySheet({prepareSheet:cv,sourceCSSRules:wU,theme:MQ,ignoreImageAnalysis:ka,force:!1,isAsyncCancelled:()=>mU})}))}return{render:ka,destroy:MQ}}gK.createAdoptedStyleSheetOverride=MQ},{"./stylesheet-modifier":14}],4:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.replaceCSSFontFace=gK.removeCSSComments=gK.replaceCSSRelativeURLsWithAbsolute=gK.getCSSBaseBath=gK.getCSSURLValue=gK.cssImportRegex=gK.cssURLRegex=gK.iterateCSSDeclarations=gK.iterateCSSRules=void 0;const XS=kU("../../utils/array"),at=kU("../../utils/platform"),wY=kU("../../utils/url"),MQ=kU("../utils/log");function ka(kU,mU,gK){(0,XS.forEach)(kU,(kU=>{if(kU.selectorText)mU(kU);else if(kU.href)try{ka(kU.styleSheet.cssRules,mU,gK)}catch(kU){(0,MQ.logInfo)(`Found a non-loaded link.`),gK&&gK()}else if(kU.media){const XS=Array.from(kU.media),at=XS.some((kU=>kU.startsWith("screen")||kU.startsWith("all")||kU.startsWith("("))),wY=XS.some((kU=>kU.startsWith("print")||kU.startsWith("speech")));!at&&wY||ka(kU.cssRules,mU,gK)}else kU.conditionText?CSS.supports(kU.conditionText)&&ka(kU.cssRules,mU,gK):(0,MQ.logWarn)(`CSSRule type not supported`,kU)}))}gK.iterateCSSRules=ka;const wU=["background","border","border-color","border-bottom","border-left","border-right","border-top","outline","outline-color"],Ta=at.isSafari?wU.map((kU=>{const mU=undefined;return[kU,new RegExp(`${kU}:\\s*(.*?)\\s*;`)]})):null;function cv(kU,mU){(0,XS.forEach)(kU,(gK=>{const XS=kU.getPropertyValue(gK).trim();XS&&mU(gK,XS)}));const gK=kU.cssText;gK.includes("var(")&&(at.isSafari?Ta.forEach((([kU,XS])=>{const at=gK.match(XS);if(at&&at[1]){const gK=at[1].trim();mU(kU,gK)}})):wU.forEach((gK=>{const XS=kU.getPropertyValue(gK);XS&&XS.includes("var(")&&mU(gK,XS)})))}function So(kU){return kU.trim().replace(/[\n\r\\]+/g,"").replace(/^url\((.*)\)$/,"$1").trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1").replace(/(?:\\(.))/g,"$1")}function Hn(kU){const mU=(0,wY.parseURL)(kU);return`${mU.origin}${mU.pathname.replace(/\?.*$/,"").replace(/(\/)([^\/]+)$/i,"$1")}`}function Cd(kU,mU){return kU.replace(gK.cssURLRegex,(kU=>{const gK=So(kU);try{return`url('${(0,wY.getAbsoluteURL)(mU,gK)}')`}catch(mU){return(0,MQ.logWarn)("Not able to replace relative URL with Absolute URL, skipping"),kU}}))}gK.iterateCSSDeclarations=cv,gK.cssURLRegex=/url\((('.*?')|(".*?")|([^\)]*?))\)/g,gK.cssImportRegex=/@import\s*(url\()?(('.+?')|(".+?")|([^\)]*?))\)? ?(screen)?;?/gi,gK.getCSSURLValue=So,gK.getCSSBaseBath=Hn,gK.replaceCSSRelativeURLsWithAbsolute=Cd;const AH=/\/\*[\s\S]*?\*\//g;function aF(kU){return kU.replace(AH,"")}gK.removeCSSComments=aF;const WM=/@font-face\s*{[^}]*}/g;function RA(kU){return kU.replace(WM,"")}gK.replaceCSSFontFace=RA},{"../../utils/array":30,"../../utils/platform":40,"../../utils/url":45,"../utils/log":19}],5:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.combineFixes=gK.findRelevantFix=void 0;const XS=kU("../utils/log"),at=kU("../../utils/url");function wY(kU,mU){if(!Array.isArray(mU)||0===mU.length||"*"!==mU[0].url[0])return(0,XS.logWarn)("selectRelevantFix() failed to construct a single fix",kU,mU),null;let gK=0,wY=null;for(let XS=1;XS<mU.length;XS++)if((0,at.isURLInList)(kU,mU[XS].url)){const kU=mU[XS].url[0].length;(null===wY||gK<kU)&&(gK=kU,wY=XS)}return wY}function MQ(kU){if(0===kU.length||"*"!==kU[0].url[0])return(0,XS.logWarn)("combineFixes() failed to construct a single fix",kU),null;function mU(kU){return kU.filter(Boolean).flat()}return{url:[],invert:mU(kU.map((kU=>kU.invert))),css:kU.map((kU=>kU.css)).filter(Boolean).join("\n"),ignoreInlineStyle:mU(kU.map((kU=>kU.ignoreInlineStyle))),ignoreImageAnalysis:mU(kU.map((kU=>kU.ignoreImageAnalysis))),disableStyleSheetsProxy:kU.some((kU=>kU.disableStyleSheetsProxy))}}gK.findRelevantFix=wY,gK.combineFixes=MQ},{"../../utils/url":45,"../utils/log":19}],6:[function(kU,mU,gK){"use strict";var XS=void 0&&(void 0).__importDefault||function(kU){return kU&&kU.__esModule?kU:{default:kU}};Object.defineProperty(gK,"__esModule",{value:!0}),gK.cleanImageProcessingCache=gK.getFilteredImageDataURL=gK.getImageDetails=void 0;const at=kU("../../generators/svg-filter"),wY=kU("./network"),MQ=kU("../../utils/color"),ka=kU("../../utils/network"),wU=kU("../utils/log"),Ta=XS(kU("../../utils/async-queue")),cv=kU("../../const"),So=new Ta.default;async function Hn(kU){return new Promise((async(mU,gK)=>{let XS;if(kU.startsWith("data:"))XS=kU;else try{XS=await Cd(kU)}catch(kU){return void gK(kU)}try{const gK=await AH(XS);So.addToQueue((()=>{mU(Object.assign({src:kU,dataURL:XS,width:gK.naturalWidth,height:gK.naturalHeight},MJ(gK)))}))}catch(kU){gK(kU)}}))}async function Cd(kU){const mU=undefined;return new URL(kU).origin===location.origin?await(0,ka.loadAsDataURL)(kU):await(0,wY.bgFetch)({url:kU,responseType:"data-url"})}async function AH(kU){return new Promise(((mU,gK)=>{const XS=new Image;XS.onload=()=>mU(XS),XS.onerror=()=>gK(`Unable to load image ${kU}`),XS.src=kU}))}gK.getImageDetails=Hn;const aF=32*32;let WM,RA;function Gm(){const kU=aF,mU=aF;WM=document.createElement("canvas"),WM.width=kU,WM.height=mU,RA=WM.getContext("2d",{willReadFrequently:!0}),RA.imageSmoothingEnabled=!1}function NJ(){WM=null,RA=null}const ys=5*1024*1024;function MJ(kU){WM||Gm();const{naturalWidth:mU,naturalHeight:gK}=kU;if(0===gK||0===mU)return(0,wU.logWarn)(`logWarn(Image is empty ${kU.currentSrc})`),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!1};const XS=undefined;if(mU*gK*4>ys)return(0,wU.logInfo)("Skipped large image analyzing(Larger than 5mb in memory)"),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!0};const at=mU*gK,wY=Math.min(1,Math.sqrt(aF/at)),ka=Math.ceil(mU*wY),Ta=Math.ceil(gK*wY);RA.clearRect(0,0,ka,Ta),RA.drawImage(kU,0,0,mU,gK,0,0,ka,Ta);const cv=undefined,So=RA.getImageData(0,0,ka,Ta).data,Hn=.05,Cd=.4,AH=.7;let NJ=0,MJ=0,cE=0,Oe,xV,hR,EN,Qq,gf,pB,ie;for(hR=0;hR<Ta;hR++)for(xV=0;xV<ka;xV++)Oe=4*(hR*ka+xV),EN=So[Oe+0],Qq=So[Oe+1],gf=So[Oe+2],pB=So[Oe+3],pB/255<Hn?NJ++:(ie=(0,MQ.getSRGBLightness)(EN,Qq,gf),ie<Cd&&MJ++,ie>AH&&cE++);const az=ka*Ta,w=az-NJ,jM=undefined,yl=undefined,Py=undefined,Uo=undefined;return{isDark:MJ/w>=.7,isLight:cE/w>=.7,isTransparent:NJ/az>=.1,isLarge:at>=800*600,isTooLarge:!1}}function cE({dataURL:kU,width:mU,height:gK},XS){const wY=(0,at.getSVGFilterMatrixValue)(XS),MQ=[`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${mU}" height="${gK}">`,"<defs>",`<filter id="${cv.IMG_FILTER_ID}">`,`<feColorMatrix type="matrix" values="${wY}" />`,"</filter>","</defs>",`<image width="${mU}" height="${gK}" filter="url(#${cv.IMG_FILTER_ID})" xlink:href="${kU}" />`,"</svg>"].join("");return`data:image/svg+xml;base64,${btoa(MQ)}`}function Oe(){So&&So.stopQueue(),NJ()}gK.getFilteredImageDataURL=cE,gK.cleanImageProcessingCache=Oe},{"../../const":1,"../../generators/svg-filter":23,"../../utils/async-queue":31,"../../utils/color":33,"../../utils/network":38,"../utils/log":19,"./network":12}],7:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.cleanDynamicThemeCache=gK.removeDynamicTheme=gK.createOrUpdateDynamicThemeInternal=gK.createOrUpdateDynamicTheme=void 0;const XS=kU("./inline-style"),at=kU("./meta-theme-color"),wY=kU("./modify-css"),MQ=kU("./style-manager"),ka=kU("./watch"),wU=kU("../../utils/array"),Ta=kU("../utils/dom"),cv=kU("../utils/log"),So=kU("../../utils/throttle"),Hn=kU("../../utils/math"),Cd=kU("../../generators/css-filter"),AH=kU("../../generators/modify-colors"),aF=kU("../../generators/text-style"),WM=kU("../../utils/uid"),RA=kU("./adopted-style-manger"),Gm=kU("../../utils/platform"),NJ=kU("../../utils/color"),ys=kU("../../utils/url"),MJ=kU("./variables"),cE=kU("../../utils/visibility"),Oe=kU("./fixes"),xV=kU("../../const"),hR=kU("./mv3-proxy"),EN=!1,Qq=(0,WM.generateUID)(),gf=new Map,pB=[];let ie=null,az=null,w=null,jM=[],yl=[];function Py(kU,mU=document.head||document){let gK=mU.querySelector(kU);return gK||(gK=document.createElement("style"),gK.classList.add(xV.STYLESHEET_COMMON_CLASSNAME),gK.classList.add(kU.substring(1)),gK.media="screen",gK.textContent=""),gK}function Uo(kU){(0,cv.logInfo)("MV3 proxy injector: regular path attempts to inject...");const mU=document.createElement("script");mU.src=chrome.runtime.getURL("js/proxy.js"),mU.dataset.arg=JSON.stringify(kU),document.head.prepend(mU)}const oQ=new Map;function mD(kU,mU){oQ.has(mU)&&oQ.get(mU).stop(),oQ.set(mU,(0,Ta.watchForNodePosition)(kU,"head"))}function zx(){(0,wU.forEach)(oQ.values(),(kU=>kU.stop())),oQ.clear()}function WZ(){const kU=Py(xV.STYLESHEET_FALLBACK_SELECTOR,document);kU.textContent=(0,wY.getModifiedFallbackStyle)(ie,{strict:!0}),document.head.insertBefore(kU,document.head.firstChild),mD(kU,"fallback");const mU=Py(xV.STYLESHEET_USER_AGENT_SELECTOR);mU.textContent=(0,wY.getModifiedUserAgentStyle)(ie,w,ie.styleSystemControls),document.head.insertBefore(mU,kU.nextSibling),mD(mU,"user-agent");const gK=Py(xV.STYLESHEET_TEXT_SELECTOR);ie.useFont||ie.textStroke>0?gK.textContent=(0,aF.createTextStyle)(ie):gK.textContent="",document.head.insertBefore(gK,kU.nextSibling),mD(gK,"text");const at=Py(xV.STYLESHEET_INVERT_SELECTOR);az&&Array.isArray(az.invert)&&az.invert.length>0?at.textContent=[`${az.invert.join(", ")} {`,`    filter: ${(0,Cd.getCSSFilterValue)(Object.assign(Object.assign({},ie),{contrast:0===ie.mode?ie.contrast:(0,Hn.clamp)(ie.contrast-10,0,100)}))} !important;`,"}"].join("\n"):at.textContent="",document.head.insertBefore(at,gK.nextSibling),mD(at,"invert");const MQ=Py(xV.STYLESHEET_INLINE_SELECTOR);MQ.textContent=(0,XS.getInlineOverrideStyle)(),document.head.insertBefore(MQ,at.nextSibling),mD(MQ,"inline");const ka=Py(xV.STYLESHEET_OVERRIDE_SELECTOR);ka.textContent=az&&az.css?xy(az.css):"",document.head.appendChild(ka),mD(ka,"override");const wU=Py(xV.STYLESHEET_VARIABLES_SELECTOR),Ta=(0,wY.getSelectionColor)(ie),{darkSchemeBackgroundColor:cv,darkSchemeTextColor:So,lightSchemeBackgroundColor:WM,lightSchemeTextColor:RA,mode:Gm}=ie;let ys=0===Gm?WM:cv,MJ=0===Gm?RA:So;ys=(0,AH.modifyBackgroundColor)((0,NJ.parseColorWithCache)(ys),ie),MJ=(0,AH.modifyForegroundColor)((0,NJ.parseColorWithCache)(MJ),ie),wU.textContent=[`:root {`,`   --${xV.ROOT_VARS_PREFIX}-neutral-background: ${ys};`,`   --${xV.ROOT_VARS_PREFIX}-neutral-text: ${MJ};`,`   --${xV.ROOT_VARS_PREFIX}-selection-background: ${Ta.backgroundColorSelection};`,`   --${xV.ROOT_VARS_PREFIX}-selection-text: ${Ta.foregroundColorSelection};`,`}`].join("\n"),document.head.insertBefore(wU,MQ.nextSibling),mD(wU,"variables");const cE=Py(xV.STYLESHEET_ROOT_VARS_SELECTOR);document.head.insertBefore(cE,wU.nextSibling);const Oe=!(az&&az.disableStyleSheetsProxy);Uo(Oe),document.dispatchEvent(new CustomEvent(hR.EVENT_ARG,{detail:Oe}))}const IK=new Set;function FC(kU){const mU=Py(xV.STYLESHEET_INLINE_SELECTOR,kU);mU.textContent=(0,XS.getInlineOverrideStyle)(),kU.insertBefore(mU,kU.firstChild);const gK=Py(xV.STYLESHEET_OVERRIDE_SELECTOR,kU);gK.textContent=az&&az.css?xy(az.css):"",kU.insertBefore(gK,mU.nextSibling);const at=Py(xV.STYLESHEET_INVERT_SELECTOR,kU);az&&Array.isArray(az.invert)&&az.invert.length>0?at.textContent=[`${az.invert.join(", ")} {`,`    filter: ${(0,Cd.getCSSFilterValue)(Object.assign(Object.assign({},ie),{contrast:0===ie.mode?ie.contrast:(0,Hn.clamp)(ie.contrast-10,0,100)}))} !important;`,"}"].join("\n"):at.textContent="",kU.insertBefore(at,gK.nextSibling),IK.add(kU)}function xy(kU){return kU.replace(/\${(.+?)}/g,((kU,mU)=>{const gK=(0,NJ.parseColorWithCache)(mU);return gK?(0,AH.modifyColor)(gK,ie):((0,cv.logWarn)("Couldn't parse CSSTemplate's color."),mU)}))}function Ql(){const kU=document.querySelector(xV.STYLESHEET_FALLBACK_SELECTOR);kU&&(kU.textContent="")}function RE(){LO();const kU=undefined,mU=(0,MQ.getManageableStyles)(document).filter((kU=>!gf.has(kU))).map((kU=>dI(kU)));mU.map((kU=>kU.details({secondRound:!1}))).filter((kU=>kU&&kU.rules.length>0)).forEach((kU=>{MJ.variablesStore.addRulesForMatching(kU.rules)})),MJ.variablesStore.matchVariablesAndDependants(),MJ.variablesStore.setOnRootVariableChange((()=>{const kU=Py(xV.STYLESHEET_ROOT_VARS_SELECTOR);MJ.variablesStore.putRootVars(kU,ie)}));const gK=Py(xV.STYLESHEET_ROOT_VARS_SELECTOR);MJ.variablesStore.putRootVars(gK,ie),gf.forEach((kU=>kU.render(ie,jM))),0===Hp.size&&Ql(),mU.forEach((kU=>kU.watch()));const at=(0,wU.toArray)(document.querySelectorAll(XS.INLINE_STYLE_SELECTOR));(0,Ta.iterateShadowHosts)(document.documentElement,(kU=>{FC(kU.shadowRoot);const mU=kU.shadowRoot.querySelectorAll(XS.INLINE_STYLE_SELECTOR);mU.length>0&&(0,wU.push)(at,mU)})),at.forEach((kU=>(0,XS.overrideInlineStyle)(kU,ie,yl,jM))),qE(document)}let Zx=0;const Hp=new Set;function dI(kU){const mU=++Zx;function gK(){if(!(0,Ta.isDOMReady)()||!(0,cE.documentIsVisible)()){Hp.add(mU),(0,cv.logInfo)(`Current amount of styles loading: ${Hp.size}`);const kU=document.querySelector(xV.STYLESHEET_FALLBACK_SELECTOR);kU.textContent||(kU.textContent=(0,wY.getModifiedFallbackStyle)(ie,{strict:!1}))}}function XS(){Hp.delete(mU),(0,cv.logInfo)(`Removed loadingStyle ${mU}, now awaiting: ${Hp.size}`),(0,cv.logInfo)(`To-do to be loaded`,Hp),0===Hp.size&&(0,Ta.isDOMReady)()&&Ql()}function at(){const kU=ka.details({secondRound:!0});kU&&(MJ.variablesStore.addRulesForMatching(kU.rules),MJ.variablesStore.matchVariablesAndDependants(),ka.render(ie,jM))}(0,cv.logInfo)(`New manager for element, with loadingStyleID ${mU}`,kU);const ka=(0,MQ.manageStyle)(kU,{update:at,loadingStart:gK,loadingEnd:XS});return gf.set(kU,ka),ka}function SR(kU){const mU=gf.get(kU);mU&&(mU.destroy(),gf.delete(kU))}const kG=(0,So.throttle)((kU=>{gf.forEach((kU=>kU.render(ie,jM))),pB.forEach((kU=>kU.render(ie,jM))),kU&&kU()})),LO=function(){kG.cancel()};function am(){0!==Hp.size?(0,cv.logWarn)(`DOM is ready, but still have styles being loaded.`,Hp):Ql()}function SW(){RE(),lO()}function RQ(){WZ(),(0,cE.documentIsVisible)()||ie.immediateModify?SW():(0,cE.setDocumentVisibilityListener)(SW),(0,at.changeMetaThemeColorWhenAvailable)(ie)}function qE(kU){try{if(Array.isArray(kU.adoptedStyleSheets)&&kU.adoptedStyleSheets.length>0){const mU=(0,RA.createAdoptedStyleSheetOverride)(kU);pB.push(mU),mU.render(ie,jM)}}catch(kU){(0,cv.logWarn)("Error occurred in handleAdoptedStyleSheets: ",kU)}}function lO(){const kU=Array.from(gf.keys());(0,ka.watchForStyleChanges)(kU,(({created:kU,updated:mU,removed:gK,moved:XS})=>{const at=gK,wY=kU.concat(mU).concat(XS).filter((kU=>!gf.has(kU))),MQ=XS.filter((kU=>gf.has(kU)));(0,cv.logInfo)(`Styles to be removed:`,at),at.forEach((kU=>SR(kU)));const ka=wY.map((kU=>dI(kU)));ka.map((kU=>kU.details({secondRound:!1}))).filter((kU=>kU&&kU.rules.length>0)).forEach((kU=>{MJ.variablesStore.addRulesForMatching(kU.rules)})),MJ.variablesStore.matchVariablesAndDependants(),ka.forEach((kU=>kU.render(ie,jM))),ka.forEach((kU=>kU.watch())),MQ.forEach((kU=>gf.get(kU).restore()))}),(kU=>{FC(kU),qE(kU)})),(0,XS.watchForInlineStyles)((kU=>{if((0,XS.overrideInlineStyle)(kU,ie,yl,jM),kU===document.documentElement){const mU=undefined;if((kU.getAttribute("style")||"").includes("--")){MJ.variablesStore.matchVariablesAndDependants();const kU=Py(xV.STYLESHEET_ROOT_VARS_SELECTOR.substring(1));MJ.variablesStore.putRootVars(kU,ie)}}}),(kU=>{FC(kU);const mU=kU.querySelectorAll(XS.INLINE_STYLE_SELECTOR);mU.length>0&&(0,wU.forEach)(mU,(kU=>(0,XS.overrideInlineStyle)(kU,ie,yl,jM)))})),(0,Ta.addDOMReadyListener)(am)}function ge(){gf.forEach((kU=>kU.pause())),zx(),(0,ka.stopWatchingForStyleChanges)(),(0,XS.stopWatchingForInlineStyles)(),(0,Ta.removeDOMReadyListener)(am),(0,Ta.cleanReadyStateCompleteListeners)()}let tj;function sx(){const kU=document.createElement("meta");kU.name=xV.META_PROPERTY,kU.content=Qq,document.head.appendChild(kU)}function Js(){const kU=document.querySelector(`meta[name="${xV.META_PROPERTY}"]`);return kU?kU.content!==Qq:(sx(),!1)}function Qm(kU,mU){if(!mU)return null;if(0===mU.length||"*"!==mU[0].url[0])return(0,cv.logWarn)("selectRelevantFix() failed to construct a single fix",kU,mU),null;const gK=(0,Oe.findRelevantFix)(kU,mU);return gK?(0,Oe.combineFixes)([mU[0],mU[gK]]):mU[0]}function QU(kU,mU,gK){const XS=undefined;DA(kU,Qm(document.location.href,mU),gK)}function DA(kU,mU,gK){if(ie=kU,az=mU,az?(jM=Array.isArray(az.ignoreImageAnalysis)?az.ignoreImageAnalysis:[],yl=Array.isArray(az.ignoreInlineStyle)?az.ignoreInlineStyle:[]):(jM=[],yl=[]),ie.immediateModify&&(0,Ta.setIsDOMReady)((()=>!0)),w=gK,document.head){if(Js())return void tb();RQ()}else{if(!Gm.isFirefox){const kU=Py(xV.STYLESHEET_FALLBACK_SELECTOR);document.documentElement.appendChild(kU),kU.textContent=(0,wY.getModifiedFallbackStyle)(ie,{strict:!0})}const kU=new MutationObserver((()=>{if(document.head){if(kU.disconnect(),Js())return void tb();RQ()}}));kU.observe(document,{childList:!0,subtree:!0})}}function uf(){document.dispatchEvent(new CustomEvent(xV.MSG_CLEANUP)),(0,Ta.removeNode)(document.head.querySelector(xV.PROXY_SELECTOR))}function tb(){Ck(),(0,Ta.removeNode)(document.querySelector(xV.STYLESHEET_FALLBACK_SELECTOR)),document.head&&((0,at.restoreMetaThemeColor)(),(0,Ta.removeNode)(document.head.querySelector(xV.STYLESHEET_USER_AGENT_SELECTOR)),(0,Ta.removeNode)(document.head.querySelector(xV.STYLESHEET_TEXT_SELECTOR)),(0,Ta.removeNode)(document.head.querySelector(xV.STYLESHEET_INVERT_SELECTOR)),(0,Ta.removeNode)(document.head.querySelector(xV.STYLESHEET_INLINE_SELECTOR)),(0,Ta.removeNode)(document.head.querySelector(xV.STYLESHEET_OVERRIDE_SELECTOR)),(0,Ta.removeNode)(document.head.querySelector(xV.STYLESHEET_VARIABLES_SELECTOR)),(0,Ta.removeNode)(document.head.querySelector(xV.STYLESHEET_ROOT_VARS_SELECTOR)),(0,Ta.removeNode)(document.head.querySelector(`meta[name="${xV.META_PROPERTY}"]`)),uf()),IK.forEach((kU=>{(0,Ta.removeNode)(kU.querySelector(xV.STYLESHEET_INLINE_SELECTOR)),(0,Ta.removeNode)(kU.querySelector(xV.STYLESHEET_OVERRIDE_SELECTOR))})),IK.clear(),(0,wU.forEach)(gf.keys(),(kU=>SR(kU))),Hp.clear(),(0,MQ.cleanLoadingLinks)(),(0,wU.forEach)(document.querySelectorAll("."+xV.STYLESHEET_COMMON_CLASSNAME),Ta.removeNode),pB.forEach((kU=>{kU.destroy()})),pB.splice(0),tj&&tj.disconnect()}function Ck(){MJ.variablesStore.clear(),ys.parsedURLCache.clear(),(0,cE.removeDocumentVisibilityListener)(),LO(),ge(),(0,wY.cleanModificationCache)(),(0,NJ.clearColorCache)()}gK.createOrUpdateDynamicTheme=QU,gK.createOrUpdateDynamicThemeInternal=DA,gK.removeDynamicTheme=tb,gK.cleanDynamicThemeCache=Ck},{"../../const":1,"../../generators/css-filter":21,"../../generators/modify-colors":22,"../../generators/text-style":24,"../../utils/array":30,"../../utils/color":33,"../../utils/math":36,"../../utils/platform":40,"../../utils/throttle":42,"../../utils/uid":44,"../../utils/url":45,"../../utils/visibility":46,"../utils/dom":18,"../utils/log":19,"./adopted-style-manger":3,"./fixes":5,"./inline-style":8,"./meta-theme-color":9,"./modify-css":10,"./mv3-proxy":11,"./style-manager":13,"./variables":16,"./watch":17}],8:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.overrideInlineStyle=gK.stopWatchingForInlineStyles=gK.watchForInlineStyles=gK.getInlineOverrideStyle=gK.INLINE_STYLE_SELECTOR=void 0;const XS=kU("../../utils/array"),at=kU("../utils/dom"),wY=kU("./css-rules"),MQ=kU("./modify-css"),ka=kU("./variables"),wU=kU("../../utils/platform"),Ta=kU("../../utils/time"),cv=kU("../../utils/throttle"),So=kU("../../const"),Hn={"background-color":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-bgcolor`,cssProp:"background-color",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-bgcolor`},"background-image":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-bgimage`,cssProp:"background-image",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-bgimage`},"border-color":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-border`,cssProp:"border-color",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-border`},"border-bottom-color":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-border-bottom`,cssProp:"border-bottom-color",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-border-bottom`},"border-left-color":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-border-left`,cssProp:"border-left-color",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-border-left`},"border-right-color":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-border-right`,cssProp:"border-right-color",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-border-right`},"border-top-color":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-border-top`,cssProp:"border-top-color",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-border-top`},"box-shadow":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-boxshadow`,cssProp:"box-shadow",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-boxshadow`},color:{customProp:`--${So.ROOT_VARS_PREFIX}-inline-color`,cssProp:"color",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-color`},fill:{customProp:`--${So.ROOT_VARS_PREFIX}-inline-fill`,cssProp:"fill",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-fill`},stroke:{customProp:`--${So.ROOT_VARS_PREFIX}-inline-stroke`,cssProp:"stroke",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-stroke`},"outline-color":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-outline`,cssProp:"outline-color",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-outline`},"stop-color":{customProp:`--${So.ROOT_VARS_PREFIX}-inline-stopcolor`,cssProp:"stop-color",dataAttr:`data-${So.ROOT_VARS_PREFIX}-inline-stopcolor`}},Cd=Object.values(Hn),AH={};Cd.forEach((({cssProp:kU,customProp:mU})=>AH[mU]=kU));const aF=["style","fill","stop-color","stroke","bgcolor","color"];function WM(){return Cd.map((({dataAttr:kU,customProp:mU,cssProp:gK})=>[`[${kU}] {`,`  ${gK}: var(${mU}) !important;`,"}"].join("\n"))).join("\n")}function RA(kU){const mU=[];return kU instanceof Element&&kU.matches(gK.INLINE_STYLE_SELECTOR)&&mU.push(kU),(kU instanceof Element||wU.isShadowDomSupported&&kU instanceof ShadowRoot||kU instanceof Document)&&(0,XS.push)(mU,kU.querySelectorAll(gK.INLINE_STYLE_SELECTOR)),mU}gK.INLINE_STYLE_SELECTOR=aF.map((kU=>`[${kU}]`)).join(", "),gK.getInlineOverrideStyle=WM;const Gm=new Map,NJ=new Map;function ys(kU,mU){MJ(document,kU,mU),(0,at.iterateShadowHosts)(document.documentElement,(gK=>{MJ(gK.shadowRoot,kU,mU)}))}function MJ(kU,mU,gK){Gm.has(kU)&&(Gm.get(kU).disconnect(),NJ.get(kU).disconnect());const XS=new WeakSet;function wY(kU){RA(kU).forEach((kU=>{XS.has(kU)||(XS.add(kU),mU(kU))})),(0,at.iterateShadowHosts)(kU,(at=>{XS.has(kU)||(XS.add(kU),gK(at.shadowRoot),MJ(at.shadowRoot,mU,gK))}))}const MQ=(0,at.createOptimizedTreeObserver)(kU,{onMinorMutations:({additions:kU})=>{kU.forEach((kU=>wY(kU)))},onHugeMutations:()=>{wY(kU)}});Gm.set(kU,MQ);let ka=0,wU=null;const So=(0,Ta.getDuration)({seconds:10}),Hn=(0,Ta.getDuration)({seconds:2}),AH=50;let WM=[],ys=null;const cE=(0,cv.throttle)((kU=>{kU.forEach((kU=>{aF.includes(kU.attributeName)&&mU(kU.target)}))})),Oe=new MutationObserver((kU=>{if(ys)return void WM.push(...kU);ka++;const mU=Date.now();if(null==wU)wU=mU;else if(ka>=AH){if(mU-wU<So)return ys=setTimeout((()=>{wU=null,ka=0,ys=null;const kU=WM;WM=[],cE(kU)}),Hn),void WM.push(...kU);wU=mU,ka=1}cE(kU)}));Oe.observe(kU,{attributes:!0,attributeFilter:aF.concat(Cd.map((({dataAttr:kU})=>kU))),subtree:!0}),NJ.set(kU,Oe)}function cE(){Gm.forEach((kU=>kU.disconnect())),NJ.forEach((kU=>kU.disconnect())),Gm.clear(),NJ.clear()}gK.watchForInlineStyles=ys,gK.stopWatchingForInlineStyles=cE;const Oe=new WeakMap,xV=["brightness","contrast","grayscale","sepia","mode"];function hR(kU,mU){return aF.map((mU=>`${mU}="${kU.getAttribute(mU)}"`)).concat(xV.map((kU=>`${kU}="${mU[kU]}"`))).join(" ")}function EN(kU,mU){for(let gK=0,XS=mU.length;gK<XS;gK++){const XS=mU[gK];if(kU.matches(XS))return!0}return!1}function Qq(kU,mU,gK,wU){const Ta=undefined;if(hR(kU,mU)===Oe.get(kU))return;const cv=new Set(Object.keys(Hn));function So(gK,XS,at){const wY=gK.startsWith("--"),{customProp:Ta,dataAttr:So}=wY?{}:Hn[gK],Cd=(0,MQ.getModifiableCSSDeclaration)(XS,at,{style:kU.style},ka.variablesStore,wU,null);if(!Cd)return;let AH=Cd.value;if("function"==typeof AH&&(AH=AH(mU)),wY&&"object"==typeof AH){const mU=undefined;AH.declarations.forEach((({property:mU,value:gK})=>{!(gK instanceof Promise)&&kU.style.setProperty(mU,gK)}))}else kU.style.setProperty(Ta,AH),kU.hasAttribute(So)||kU.setAttribute(So,""),cv.delete(gK)}if(gK.length>0&&EN(kU,gK))cv.forEach((mU=>{kU.removeAttribute(Hn[mU].dataAttr)}));else{if(kU.hasAttribute("bgcolor")){let mU=kU.getAttribute("bgcolor");(mU.match(/^[0-9a-f]{3}$/i)||mU.match(/^[0-9a-f]{6}$/i))&&(mU=`#${mU}`),So("background-color","background-color",mU)}if(kU.hasAttribute("color")&&"mask-icon"!==kU.rel){let mU=kU.getAttribute("color");(mU.match(/^[0-9a-f]{3}$/i)||mU.match(/^[0-9a-f]{6}$/i))&&(mU=`#${mU}`),So("color","color",mU)}if(kU instanceof SVGElement){if(kU.hasAttribute("fill")){const mU=32,gK=kU.getAttribute("fill");if("none"!==gK)if(kU instanceof SVGTextElement)So("fill","color",gK);else{const XS=()=>{const{width:XS,height:at}=kU.getBoundingClientRect(),wY=undefined;So("fill",XS>mU||at>mU?"background-color":"color",gK)};(0,at.isReadyStateComplete)()?XS():(0,at.addReadyStateCompleteListener)(XS)}}kU.hasAttribute("stop-color")&&So("stop-color","background-color",kU.getAttribute("stop-color"))}if(kU.hasAttribute("stroke")){const mU=kU.getAttribute("stroke");So("stroke",kU instanceof SVGLineElement||kU instanceof SVGTextElement?"border-color":"color",mU)}kU.style&&(0,wY.iterateCSSDeclarations)(kU.style,((mU,gK)=>{if("background-image"!==mU||!gK.includes("url"))if(Hn.hasOwnProperty(mU)||mU.startsWith("--")&&!AH[mU])So(mU,mU,gK);else{const gK=AH[mU];if(gK&&!kU.style.getPropertyValue(gK)&&!kU.hasAttribute(gK)){if("background-color"===gK&&kU.hasAttribute("bgcolor"))return;kU.style.setProperty(mU,"")}}})),kU.style&&kU instanceof SVGTextElement&&kU.style.fill&&So("fill","color",kU.style.getPropertyValue("fill")),(0,XS.forEach)(cv,(mU=>{kU.removeAttribute(Hn[mU].dataAttr)})),Oe.set(kU,hR(kU,mU))}}gK.overrideInlineStyle=Qq},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../../utils/throttle":42,"../../utils/time":43,"../utils/dom":18,"./css-rules":4,"./modify-css":10,"./variables":16}],9:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.restoreMetaThemeColor=gK.changeMetaThemeColorWhenAvailable=void 0;const XS=kU("../../utils/color"),at=kU("../../generators/modify-colors"),wY=kU("../utils/log"),MQ="theme-color",ka=`meta[name="${MQ}"]`;let wU=null,Ta=null;function cv(kU,mU){wU=wU||kU.content;const gK=(0,XS.parseColorWithCache)(wU);gK?kU.content=(0,at.modifyBackgroundColor)(gK,mU):(0,wY.logWarn)("Invalid meta color",gK)}function So(kU){const mU=document.querySelector(ka);mU?cv(mU,kU):(Ta&&Ta.disconnect(),Ta=new MutationObserver((mU=>{kU:for(let gK=0;gK<mU.length;gK++){const{addedNodes:XS}=mU[gK];for(let mU=0;mU<XS.length;mU++){const gK=XS[mU];if(gK instanceof HTMLMetaElement&&gK.name===MQ){Ta.disconnect(),Ta=null,cv(gK,kU);break kU}}}})),Ta.observe(document.head,{childList:!0}))}function Hn(){Ta&&(Ta.disconnect(),Ta=null);const kU=document.querySelector(ka);kU&&wU&&(kU.content=wU)}gK.changeMetaThemeColorWhenAvailable=So,gK.restoreMetaThemeColor=Hn},{"../../generators/modify-colors":22,"../../utils/color":33,"../utils/log":19}],10:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.cleanModificationCache=gK.getShadowModifier=gK.getShadowModifierWithInfo=gK.getBgImageModifier=gK.getModifiedFallbackStyle=gK.getSelectionColor=gK.getModifiedUserAgentStyle=gK.getModifiableCSSDeclaration=void 0;const XS=kU("../../utils/color"),at=kU("../../utils/math"),wY=kU("../../utils/text"),MQ=kU("../../utils/url"),ka=kU("../../generators/modify-colors"),wU=kU("./css-rules"),Ta=kU("./image"),cv=kU("../utils/log"),So=kU("../../utils/platform"),Hn=kU("../../utils/parsing");function Cd(kU,mU){return Boolean(kU&&kU.getPropertyPriority(mU))}function AH(kU,mU,gK,XS,at,wY){if(kU.startsWith("--")){const MQ=pB(XS,kU,mU,gK,at,wY);if(MQ)return{property:kU,value:MQ,important:Cd(gK.style,kU),sourceValue:mU}}else if(mU.includes("var(")){const at=ie(XS,kU,mU);if(at)return{property:kU,value:at,important:Cd(gK.style,kU),sourceValue:mU}}else{if("color-scheme"===kU)return(0,cv.logWarn)("CSS property color-scheme is not supported"),null;if(kU.includes("color")&&"-webkit-print-color-adjust"!==kU||"fill"===kU||"stroke"===kU||"stop-color"===kU){const XS=cE(kU,mU,gK);if(XS)return{property:kU,value:XS,important:Cd(gK.style,kU),sourceValue:mU}}else if("background-image"===kU||"list-style-image"===kU){const XS=EN(mU,gK,at,wY);if(XS)return{property:kU,value:XS,important:Cd(gK.style,kU),sourceValue:mU}}else if(kU.includes("shadow")){const XS=gf(mU);if(XS)return{property:kU,value:XS,important:Cd(gK.style,kU),sourceValue:mU}}}return null}function aF(...kU){return kU.filter(Boolean).join(", ")}function WM(kU,mU,gK){const XS=[];mU||(XS.push("html {"),XS.push(`    background-color: ${(0,ka.modifyBackgroundColor)({r:255,g:255,b:255},kU)} !important;`),XS.push("}")),XS.push("html {"),XS.push(`    color-scheme: ${1===kU.mode?"dark":"dark light"} !important;`),XS.push("}");const at=aF(mU?"":"html, body",gK?"input, textarea, select, button, dialog":"");return at&&(XS.push(`${at} {`),XS.push(`    background-color: ${(0,ka.modifyBackgroundColor)({r:255,g:255,b:255},kU)};`),XS.push("}")),XS.push(`${aF("html, body",gK?"input, textarea, select, button":"")} {`),XS.push(`    border-color: ${(0,ka.modifyBorderColor)({r:76,g:76,b:76},kU)};`),XS.push(`    color: ${(0,ka.modifyForegroundColor)({r:0,g:0,b:0},kU)};`),XS.push("}"),XS.push("a {"),XS.push(`    color: ${(0,ka.modifyForegroundColor)({r:0,g:64,b:255},kU)};`),XS.push("}"),XS.push("table {"),XS.push(`    border-color: ${(0,ka.modifyBorderColor)({r:128,g:128,b:128},kU)};`),XS.push("}"),XS.push("::placeholder {"),XS.push(`    color: ${(0,ka.modifyForegroundColor)({r:169,g:169,b:169},kU)};`),XS.push("}"),XS.push("input:-webkit-autofill,"),XS.push("textarea:-webkit-autofill,"),XS.push("select:-webkit-autofill {"),XS.push(`    background-color: ${(0,ka.modifyBackgroundColor)({r:250,g:255,b:189},kU)} !important;`),XS.push(`    color: ${(0,ka.modifyForegroundColor)({r:0,g:0,b:0},kU)} !important;`),XS.push("}"),kU.scrollbarColor&&XS.push(NJ(kU)),kU.selectionColor&&XS.push(Gm(kU)),XS.join("\n")}function RA(kU){let mU,gK;if("auto"===kU.selectionColor)mU=(0,ka.modifyBackgroundColor)({r:0,g:96,b:212},Object.assign(Object.assign({},kU),{grayscale:0})),gK=(0,ka.modifyForegroundColor)({r:255,g:255,b:255},Object.assign(Object.assign({},kU),{grayscale:0}));else{const at=(0,XS.parseColorWithCache)(kU.selectionColor),wY=(0,XS.rgbToHSL)(at);mU=kU.selectionColor,gK=wY.l<.5?"#FFF":"#000"}return{backgroundColorSelection:mU,foregroundColorSelection:gK}}function Gm(kU){const mU=[],gK=RA(kU),XS=gK.backgroundColorSelection,at=gK.foregroundColorSelection;return["::selection","::-moz-selection"].forEach((kU=>{mU.push(`${kU} {`),mU.push(`    background-color: ${XS} !important;`),mU.push(`    color: ${at} !important;`),mU.push("}")})),mU.join("\n")}function NJ(kU){const mU=[];let gK,wY,MQ,wU,Ta,cv;if("auto"===kU.scrollbarColor)gK=(0,ka.modifyBackgroundColor)({r:241,g:241,b:241},kU),wY=(0,ka.modifyForegroundColor)({r:96,g:96,b:96},kU),MQ=(0,ka.modifyBackgroundColor)({r:176,g:176,b:176},kU),wU=(0,ka.modifyBackgroundColor)({r:144,g:144,b:144},kU),Ta=(0,ka.modifyBackgroundColor)({r:96,g:96,b:96},kU),cv=(0,ka.modifyBackgroundColor)({r:255,g:255,b:255},kU);else{const mU=(0,XS.parseColorWithCache)(kU.scrollbarColor),ka=(0,XS.rgbToHSL)(mU),cv=ka.l>.5,So=kU=>Object.assign(Object.assign({},ka),{l:(0,at.clamp)(ka.l+kU,0,1)}),Hn=kU=>Object.assign(Object.assign({},ka),{l:(0,at.clamp)(ka.l-kU,0,1)});gK=(0,XS.hslToString)(Hn(.4)),wY=(0,XS.hslToString)(cv?Hn(.4):So(.4)),MQ=(0,XS.hslToString)(ka),wU=(0,XS.hslToString)(So(.1)),Ta=(0,XS.hslToString)(So(.2))}return mU.push("::-webkit-scrollbar {"),mU.push(`    background-color: ${gK};`),mU.push(`    color: ${wY};`),mU.push("}"),mU.push("::-webkit-scrollbar-thumb {"),mU.push(`    background-color: ${MQ};`),mU.push("}"),mU.push("::-webkit-scrollbar-thumb:hover {"),mU.push(`    background-color: ${wU};`),mU.push("}"),mU.push("::-webkit-scrollbar-thumb:active {"),mU.push(`    background-color: ${Ta};`),mU.push("}"),mU.push("::-webkit-scrollbar-corner {"),mU.push(`    background-color: ${cv};`),mU.push("}"),So.isFirefox&&(mU.push("* {"),mU.push(`    scrollbar-color: ${MQ} ${gK};`),mU.push("}")),mU.join("\n")}function ys(kU,{strict:mU}){const gK=[],XS=["microsoft.com","docs.microsoft.com"].includes(location.hostname);return gK.push(`html, body, ${mU?`body :not(iframe)${XS?':not(div[style^="position:absolute;top:0;left:-"]':""}`:"body > :not(iframe)"} {`),gK.push(`    background-color: ${(0,ka.modifyBackgroundColor)({r:255,g:255,b:255},kU)} !important;`),gK.push(`    border-color: ${(0,ka.modifyBorderColor)({r:64,g:64,b:64},kU)} !important;`),gK.push(`    color: ${(0,ka.modifyForegroundColor)({r:0,g:0,b:0},kU)} !important;`),gK.push("}"),gK.join("\n")}gK.getModifiableCSSDeclaration=AH,gK.getModifiedUserAgentStyle=WM,gK.getSelectionColor=RA,gK.getModifiedFallbackStyle=ys;const MJ=new Set(["inherit","transparent","initial","currentcolor","none","unset"]);function cE(kU,mU,gK){if(MJ.has(mU.toLowerCase()))return mU;const at=(0,XS.parseColorWithCache)(mU);return at?kU.includes("background")?gK.style.webkitMaskImage&&"none"!==gK.style.webkitMaskImage||gK.style.webkitMask&&!gK.style.webkitMask.startsWith("none")||gK.style.mask&&"none"!==gK.style.mask||gK.style.getPropertyValue("mask-image")&&"none"!==gK.style.getPropertyValue("mask-image")?kU=>(0,ka.modifyForegroundColor)(at,kU):kU=>(0,ka.modifyBackgroundColor)(at,kU):kU.includes("border")||kU.includes("outline")?kU=>(0,ka.modifyBorderColor)(at,kU):kU=>(0,ka.modifyForegroundColor)(at,kU):((0,cv.logWarn)("Couldn't parse color",mU),null)}const Oe=new Map,xV=new Map;function hR(kU,mU){if(!kU||0===mU.length)return!1;if(mU.some((kU=>"*"===kU)))return!0;const gK=kU.split(/,\s*/g);for(let kU=0;kU<mU.length;kU++){const XS=mU[kU];if(gK.some((kU=>kU===XS)))return!0}return!1}function EN(kU,mU,gK,So){try{const Cd=(0,Hn.parseGradient)(kU),AH=(0,wY.getMatches)(wU.cssURLRegex,kU);if(0===AH.length&&0===Cd.length)return kU;const aF=mU=>{let gK=0;return mU.map((mU=>{const XS=kU.indexOf(mU,gK);return gK=XS+mU.length,{match:mU,index:XS}}))},WM=Cd.map((kU=>Object.assign({type:"gradient"},kU))).concat(aF(AH).map((kU=>Object.assign({type:"url",offset:0},kU)))).sort(((kU,mU)=>kU.index>mU.index?1:-1)),RA=kU=>{const{typeGradient:mU,match:gK,hasComma:at}=kU,MQ=/([^\(\),]+(\([^\(\)]*(\([^\(\)]*\)*[^\(\)]*)?\))?([^\(\), ]|( (?!calc)))*),?/g,wU=/^(from|color-stop|to)\(([^\(\)]*?,\s*)?(.*?)\)$/,Ta=(0,wY.getMatches)(MQ,gK,1).map((kU=>{kU=kU.trim();let mU=(0,XS.parseColorWithCache)(kU);if(mU)return kU=>(0,ka.modifyGradientColor)(mU,kU);const gK=kU.lastIndexOf(" ");if(mU=(0,XS.parseColorWithCache)(kU.substring(0,gK)),mU)return XS=>`${(0,ka.modifyGradientColor)(mU,XS)} ${kU.substring(gK+1)}`;const at=kU.match(wU);return at&&(mU=(0,XS.parseColorWithCache)(at[3]),mU)?kU=>`${at[1]}(${at[2]?`${at[2]}, `:""}${(0,ka.modifyGradientColor)(mU,kU)})`:()=>kU}));return kU=>`${mU}(${Ta.map((mU=>mU(kU))).join(", ")})${at?", ":""}`},Gm=kU=>{var XS;if(hR(mU.selectorText,gK))return null;let at=(0,wU.getCSSURLValue)(kU);const wY=0===at.length,{parentStyleSheet:ka}=mU,Hn=ka&&ka.href?(0,wU.getCSSBaseBath)(ka.href):(null===(XS=ka.ownerNode)||void 0===XS?void 0:XS.baseURI)||location.origin;at=(0,MQ.getAbsoluteURL)(Hn,at);const Cd=`url("${at}")`;return async kU=>{if(wY)return"url('')";let mU;if(Oe.has(at))mU=Oe.get(at);else try{if(xV.has(at)){const kU=xV.get(at);if(mU=await new Promise((mU=>kU.push(mU))),!mU)return null}else xV.set(at,[]),mU=await(0,Ta.getImageDetails)(at),Oe.set(at,mU),xV.get(at).forEach((kU=>kU(mU))),xV.delete(at);if(So())return null}catch(kU){return(0,cv.logWarn)(kU),xV.has(at)&&(xV.get(at).forEach((kU=>kU(null))),xV.delete(at)),Cd}const gK=undefined;return NJ(mU,kU)||Cd}},NJ=(kU,mU)=>{const{isDark:gK,isLight:XS,isTransparent:wY,isLarge:MQ,isTooLarge:ka,width:wU}=kU;let So;if(ka)(0,cv.logInfo)(`Not modifying too large image ${kU.src}`),So=`url("${kU.src}")`;else if(gK&&wY&&1===mU.mode&&!MQ&&wU>2){(0,cv.logInfo)(`Inverting dark image ${kU.src}`);const gK=undefined;So=`url("${(0,Ta.getFilteredImageDataURL)(kU,Object.assign(Object.assign({},mU),{sepia:(0,at.clamp)(mU.sepia+10,0,100)}))}")`}else if(XS&&!wY&&1===mU.mode)if(MQ)(0,cv.logInfo)(`Not modifying light non-transparent large image ${kU.src}`),So="none";else{(0,cv.logInfo)(`Dimming light image ${kU.src}`);const gK=undefined;So=`url("${(0,Ta.getFilteredImageDataURL)(kU,mU)}")`}else if(0===mU.mode&&XS&&!MQ){(0,cv.logInfo)(`Applying filter to image ${kU.src}`);const gK=undefined;So=`url("${(0,Ta.getFilteredImageDataURL)(kU,Object.assign(Object.assign({},mU),{brightness:(0,at.clamp)(mU.brightness-10,5,200),sepia:(0,at.clamp)(mU.sepia+10,0,100)}))}")`}else(0,cv.logInfo)(`Not modifying too large image ${kU.src}`),So=null;return So},ys=[];let MJ=0,cE=!1;return WM.forEach((({type:mU,match:gK,index:XS,typeGradient:at,hasComma:wY,offset:MQ},ka)=>{const wU=XS,Ta=MJ,cv=wU+gK.length+MQ;MJ=cv,Ta!==wU&&(cE?ys.push((()=>{let mU=kU.substring(Ta,wU);return","===mU[0]&&(mU=mU.substring(1)),mU})):ys.push((()=>kU.substring(Ta,wU)))),cE=wY||!1,"url"===mU?ys.push(Gm(gK)):"gradient"===mU&&ys.push(RA({match:gK,index:XS,typeGradient:at,hasComma:wY||!1,offset:MQ})),ka===WM.length-1&&ys.push((()=>kU.substring(cv)))})),kU=>{const mU=ys.filter(Boolean).map((mU=>mU(kU)));if(mU.some((kU=>kU instanceof Promise)))return Promise.all(mU).then((kU=>kU.filter(Boolean).join("")));const gK=mU.join("");return gK.endsWith(", initial")?gK.slice(0,-9):gK}}catch(mU){return(0,cv.logWarn)(`Unable to parse gradient ${kU}`,mU),null}}function Qq(kU){try{let mU=0;const gK=(0,wY.getMatches)(/(^|\s)(?!calc)([a-z]+\(.+?\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,kU,2);let at=0;const MQ=gK.map(((wY,MQ)=>{const wU=mU,Ta=kU.indexOf(wY,mU),cv=Ta+wY.length;mU=cv;const So=(0,XS.parseColorWithCache)(wY);return So?mU=>`${kU.substring(wU,Ta)}${(0,ka.modifyShadowColor)(So,mU)}${MQ===gK.length-1?kU.substring(cv):""}`:(at++,()=>kU.substring(wU,cv))}));return kU=>{const mU=MQ.map((mU=>mU(kU))).join("");return{matchesLength:gK.length,unparseableMatchesLength:at,result:mU}}}catch(mU){return(0,cv.logWarn)(`Unable to parse shadow ${kU}`,mU),null}}function gf(kU){const mU=Qq(kU);return mU?kU=>mU(kU).result:null}function pB(kU,mU,gK,XS,at,wY){return kU.getModifierForVariable({varName:mU,sourceValue:gK,rule:XS,ignoredImgSelectors:at,isCancelled:wY})}function ie(kU,mU,gK){return kU.getModifierForVarDependant(mU,gK)}function az(){(0,ka.clearColorModificationCache)(),Oe.clear(),(0,Ta.cleanImageProcessingCache)(),xV.clear()}gK.getBgImageModifier=EN,gK.getShadowModifierWithInfo=Qq,gK.getShadowModifier=gf,gK.cleanModificationCache=az},{"../../generators/modify-colors":22,"../../utils/color":33,"../../utils/math":36,"../../utils/parsing":39,"../../utils/platform":40,"../../utils/text":41,"../../utils/url":45,"../utils/log":19,"./css-rules":4,"./image":6}],11:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.EVENT_ARG=void 0;const XS=kU("./stylesheet-proxy"),at=kU("../utils/log"),wY=kU("../../const");document.currentScript&&document.currentScript.remove();const MQ=`${wY.MISC_PREFIX}ProxyInjected`,ka=`${wY.EVENT_PREFIX}stylesheetProxy__done`;gK.EVENT_ARG=`${wY.EVENT_PREFIX}stylesheetProxy__arg`;const wU=!document.currentScript;function Ta(kU){(0,XS.injectProxy)(kU),Hn(),document.dispatchEvent(new CustomEvent(ka))}function cv(){const kU=document.currentScript.dataset.arg;if(void 0!==kU){document.documentElement.dataset[MQ]="true";const mU=JSON.parse(kU);(0,at.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${mU}).`),Ta(mU)}}function So(kU){document.removeEventListener(gK.EVENT_ARG,So),void 0===document.documentElement.dataset[MQ]?(document.documentElement.dataset[MQ]="true",(0,at.logInfo)(`MV3 proxy injector: ${wU?"registerd":"dedicated"} path runs injectProxy(${kU.detail}).`),Ta(kU.detail)):(0,at.logInfo)(`MV3 proxy injector: ${wU?"registerd":"dedicated"} path exits because everything is done.`)}function Hn(){document.removeEventListener(gK.EVENT_ARG,So),document.removeEventListener(ka,Hn)}function Cd(){(0,at.logInfo)(`MV3 proxy injector: ${wU?"registerd":"dedicated"} path setup...`),document.addEventListener(gK.EVENT_ARG,So),document.addEventListener(ka,Hn)}function AH(){void 0===document.documentElement.dataset[MQ]?((0,at.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&cv(),Cd()):(0,at.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}AH()},{"../../const":1,"../utils/log":19,"./stylesheet-proxy":15}],12:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.bgFetch=void 0;const XS=kU("../../utils/message");let at=0;const wY=new Map,MQ=new Map;async function ka(kU){return new Promise(((mU,gK)=>{const ka=++at;wY.set(ka,mU),MQ.set(ka,gK),chrome.runtime.sendMessage({type:XS.MessageType.CS_FETCH,data:kU,id:ka})}))}gK.bgFetch=ka,chrome.runtime.onMessage.addListener((({type:kU,data:mU,error:gK,id:at})=>{if(kU===XS.MessageType.BG_FETCH_RESPONSE){const kU=wY.get(at),XS=MQ.get(at);wY.delete(at),MQ.delete(at),gK?XS&&XS(gK):kU&&kU(mU)}}))},{"../../utils/message":37}],13:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.manageStyle=gK.cleanLoadingLinks=gK.getManageableStyles=gK.shouldManageStyle=gK.STYLE_SELECTOR=void 0;const XS=kU("../../utils/array"),at=kU("../../utils/text"),wY=kU("../../utils/url"),MQ=kU("../utils/dom"),ka=kU("../utils/log"),wU=kU("./css-rules"),Ta=kU("./network"),cv=kU("./stylesheet-modifier"),So=kU("../../utils/platform"),Hn=kU("../../const"),Cd=!1;function AH(kU){if(!kU.href)return!1;try{const mU=undefined;return"fonts.googleapis.com"===new URL(kU.href).hostname}catch(mU){return(0,ka.logInfo)(`Couldn't construct ${kU.href} as URL`),!1}}function aF(kU){return(kU instanceof HTMLStyleElement||kU instanceof SVGStyleElement||kU instanceof HTMLLinkElement&&Boolean(kU.rel)&&kU.rel.toLowerCase().includes("stylesheet")&&Boolean(kU.href)&&!kU.disabled&&(!So.isFirefox||!kU.href.startsWith("moz-extension://"))&&!AH(kU))&&!kU.classList.contains(Hn.STYLESHEET_COMMON_CLASSNAME)&&"print"!==kU.media.toLowerCase()&&!kU.classList.contains("stylus")}function WM(kU,mU=[],at=!0){return aF(kU)?mU.push(kU):(kU instanceof Element||So.isShadowDomSupported&&kU instanceof ShadowRoot||kU===document)&&((0,XS.forEach)(kU.querySelectorAll(gK.STYLE_SELECTOR),(kU=>WM(kU,mU,!1))),at&&(0,MQ.iterateShadowHosts)(kU,(kU=>WM(kU.shadowRoot,mU,!1)))),mU}gK.STYLE_SELECTOR='style, link[rel*="stylesheet" i]:not([disabled])',gK.shouldManageStyle=aF,gK.getManageableStyles=WM;const RA=new WeakSet,Gm=new WeakSet;let NJ=!1;document.addEventListener(`${Hn.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{NJ=!0}));let ys=0;const MJ=new Map;function cE(){MJ.clear()}function Oe(kU,{update:mU,loadingStart:gK,loadingEnd:XS}){const at=[];let Ta=kU;for(;(Ta=Ta.nextElementSibling)&&Ta.matches(`.${Hn.STYLESHEET_COMMON_CLASSNAME}`);)at.push(Ta);let AH=at.find((kU=>kU.matches(Hn.STYLESHEET_CORS_SELECTOR)&&!Gm.has(kU)))||null,aF=at.find((kU=>kU.matches(Hn.STYLESHEET_SYNC_SELECTOR)&&!RA.has(kU)))||null,WM=null,cE=null,Oe=!1,hR=!0;const pB=(0,cv.createStyleSheetModifier)(),ie=new MutationObserver((()=>{mU()})),az={attributes:!0,childList:!0,subtree:!0,characterData:!0};function w(){return kU instanceof HTMLStyleElement&&kU.textContent.trim().match(wU.cssImportRegex)}function jM(kU,mU){let gK=!1;if(kU){let XS;kU:for(let at=0,wY=kU.length;at<wY;at++)if(XS=kU[at],XS.href){if(!mU){gK=!0;break kU}if(!XS.href.startsWith("https://fonts.googleapis.com/")&&XS.href.startsWith("http")&&!XS.href.startsWith(location.origin)){gK=!0;break kU}}}return gK}function yl(){if(AH)return(0,ka.logInfo)("[getRulesSync] Using cors-copy."),AH.sheet.cssRules;if(w())return(0,ka.logInfo)("[getRulesSync] CSSImport detected."),null;const mU=Zx();return kU instanceof HTMLLinkElement&&!(0,wY.isRelativeHrefOnAbsolutePath)(kU.href)&&jM(mU,!1)?((0,ka.logInfo)("[getRulesSync] CSSImportRule detected on non-local href."),null):jM(mU,!0)?((0,ka.logInfo)("[getRulesSync] Cross-Origin CSSImportRule detected."),null):((0,ka.logInfo)("[getRulesSync] Using cssRules."),!mU&&(0,ka.logWarn)("[getRulesSync] cssRules is null, trying again."),mU)}function Py(){AH?(kU.nextSibling!==AH&&kU.parentNode.insertBefore(AH,kU.nextSibling),AH.nextSibling!==aF&&kU.parentNode.insertBefore(aF,AH.nextSibling)):kU.nextSibling!==aF&&kU.parentNode.insertBefore(aF,kU.nextSibling)}function Uo(){aF=kU instanceof SVGStyleElement?document.createElementNS("http://www.w3.org/2000/svg","style"):document.createElement("style"),aF.classList.add(Hn.STYLESHEET_COMMON_CLASSNAME),aF.classList.add(Hn.STYLESHEET_SYNC_SELECTOR.substring(1)),aF.media="screen",kU.title&&(aF.title=kU.title),RA.add(aF)}let oQ=!1,mD=!1;const zx=++ys;async function WZ(){let mU,gK;if(kU instanceof HTMLLinkElement){let[XS,at]=Ql();if(at&&(0,ka.logWarn)(at),!XS&&!at&&!So.isSafari||So.isSafari&&!kU.sheet||RE(at)){try{(0,ka.logInfo)(`Linkelement ${zx} is not loaded yet and thus will be await for`,kU),await xV(kU,zx)}catch(kU){(0,ka.logWarn)(kU),mD=!0}if(Oe)return null;[XS,at]=Ql(),at&&(0,ka.logWarn)(at)}if(XS&&!jM(XS,!1))return XS;if(mU=await EN(kU.href),gK=(0,wU.getCSSBaseBath)(kU.href),Oe)return null}else{if(!w())return null;mU=kU.textContent.trim(),gK=(0,wU.getCSSBaseBath)(location.href)}if(mU){try{const XS=await Qq(mU,gK);AH=gf(kU,XS)}catch(kU){(0,ka.logWarn)(kU)}if(AH)return WM=(0,MQ.watchForNodePosition)(AH,"prev-sibling"),AH.sheet.cssRules}return null}function IK(kU){const at=yl();return at?{rules:at}:kU.secondRound?((0,ka.logWarn)("Detected dead-lock at details(), returning early to prevent it."),null):(oQ||mD||(oQ=!0,gK(),WZ().then((kU=>{oQ=!1,XS(),kU&&mU()})).catch((kU=>{(0,ka.logWarn)(kU),oQ=!1,XS()}))),null)}let FC=!1;function xy(kU,gK){const XS=yl();function at(kU){if(kU)for(let mU=kU.cssRules.length-1;mU>=0;mU--)kU.deleteRule(mU)}function wY(){aF||Uo(),cE&&cE.stop(),Py(),null==aF.sheet&&(aF.textContent="");const kU=undefined;return at(aF.sheet),cE?cE.run():cE=(0,MQ.watchForNodePosition)(aF,"prev-sibling",(()=>{FC=!0,ka()})),aF.sheet}function ka(){const at=FC;FC=!1,pB.modifySheet({prepareSheet:wY,sourceCSSRules:XS,theme:kU,ignoreImageAnalysis:gK,force:at,isAsyncCancelled:()=>Oe}),hR=0===aF.sheet.cssRules.length,pB.shouldRebuildStyle()&&(0,MQ.addReadyStateCompleteListener)((()=>mU()))}XS&&(Oe=!1,ka())}function Ql(){try{return null==kU.sheet?[null,null]:[kU.sheet.cssRules,null]}catch(kU){return[null,kU]}}function RE(kU){return kU&&kU.message&&kU.message.includes("loading")}function Zx(){const[kU,mU]=Ql();return mU?((0,ka.logWarn)(mU),null):kU}function Hp(){lO(),Cd||NJ&&kU.sheet||am()}let dI=null,SR=null;function kG(){const kU=Zx();return kU?kU.length:null}function LO(){return kG()!==dI}function am(){dI=kG(),SW();const gK=()=>{LO()&&(dI=kG(),mU()),NJ&&kU.sheet?SW():SR=requestAnimationFrame(gK)};gK()}function SW(){cancelAnimationFrame(SR)}let RQ=!1;function qE(){function kU(){RQ=!1,Oe||mU()}NJ=!0,SW(),RQ||(RQ=!0,"function"==typeof queueMicrotask?queueMicrotask(kU):requestAnimationFrame(kU))}function lO(){kU.addEventListener(`${Hn.EVENT_PREFIX}updateSheet`,qE)}function ge(){kU.removeEventListener(`${Hn.EVENT_PREFIX}updateSheet`,qE)}function tj(){ge(),SW()}function sx(){ie.disconnect(),Oe=!0,WM&&WM.stop(),cE&&cE.stop(),tj()}function Js(){if(sx(),(0,MQ.removeNode)(AH),(0,MQ.removeNode)(aF),XS(),MJ.has(zx)){const kU=MJ.get(zx);MJ.delete(zx),kU&&kU()}}function Qm(){ie.observe(kU,az),kU instanceof HTMLStyleElement&&Hp()}const QU=10;let DA=0;function uf(){aF&&(DA++,DA>QU?(0,ka.logWarn)("Style sheet was moved multiple times",kU):((0,ka.logWarn)("Restore style",aF,kU),Py(),WM&&WM.skip(),cE&&cE.skip(),hR||(FC=!0,mU())))}return{details:IK,render:xy,pause:sx,destroy:Js,watch:Qm,restore:uf}}async function xV(kU,mU){return new Promise(((gK,XS)=>{const at=()=>{kU.removeEventListener("load",wY),kU.removeEventListener("error",MQ),MJ.delete(mU)},wY=()=>{at(),(0,ka.logInfo)(`Linkelement ${mU} has been loaded`),gK()},MQ=()=>{at(),XS(`Linkelement ${mU} couldn't be loaded. ${kU.href}`)};MJ.set(mU,(()=>{at(),XS()})),kU.addEventListener("load",wY),kU.addEventListener("error",MQ),kU.href||MQ()}))}function hR(kU){return(0,wU.getCSSURLValue)(kU.substring(7).trim().replace(/;$/,"").replace(/screen$/,""))}async function EN(kU){return kU.startsWith("data:")?await(await fetch(kU)).text():await(0,Ta.bgFetch)({url:kU,responseType:"text",mimeType:"text/css",origin:window.location.origin})}async function Qq(kU,mU,gK=new Map){kU=(0,wU.removeCSSComments)(kU),kU=(0,wU.replaceCSSFontFace)(kU),kU=(0,wU.replaceCSSRelativeURLsWithAbsolute)(kU,mU);const XS=(0,at.getMatches)(wU.cssImportRegex,kU);for(const at of XS){const XS=hR(at),MQ=(0,wY.getAbsoluteURL)(mU,XS);let Ta;if(gK.has(MQ))Ta=gK.get(MQ);else try{Ta=await EN(MQ),gK.set(MQ,Ta),Ta=await Qq(Ta,(0,wU.getCSSBaseBath)(MQ),gK)}catch(kU){(0,ka.logWarn)(kU),Ta=""}kU=kU.split(at).join(Ta)}return kU=kU.trim()}function gf(kU,mU){if(!mU)return null;const gK=document.createElement("style");return gK.classList.add(Hn.STYLESHEET_COMMON_CLASSNAME),gK.classList.add(Hn.STYLESHEET_CORS_SELECTOR.substring(1)),gK.media="screen",gK.textContent=mU,kU.parentNode.insertBefore(gK,kU.nextSibling),gK.sheet.disabled=!0,Gm.add(gK),gK}gK.cleanLoadingLinks=cE,gK.manageStyle=Oe},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../../utils/text":41,"../../utils/url":45,"../utils/dom":18,"../utils/log":19,"./css-rules":4,"./network":12,"./stylesheet-modifier":14}],14:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.createStyleSheetModifier=void 0;const XS=kU("../../utils/throttle"),at=kU("./css-rules"),wY=kU("./modify-css"),MQ=kU("./variables"),ka=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function wU(kU){let mU="";return ka.forEach((gK=>{mU+=`${gK}:${kU[gK]};`})),mU}const Ta=(0,XS.createAsyncTasksQueue)();function cv(){let kU=0;const mU=new Set,gK=new Map,XS=new Set;let ka=null,cv=!1,So=!1;function Hn(){return cv&&!So}function Cd(Hn){const Cd=Hn.sourceCSSRules,{theme:AH,ignoreImageAnalysis:aF,force:WM,prepareSheet:RA,isAsyncCancelled:Gm}=Hn;let NJ=0===gK.size;const ys=new Set(gK.keys()),MJ=wU(AH),cE=MJ!==ka;cv&&(So=!0);const Oe=[];if((0,at.iterateCSSRules)(Cd,(kU=>{let XS=kU.cssText,ka=!1;if(ys.delete(XS),kU.parentRule instanceof CSSMediaRule&&(XS+=`;${kU.parentRule.media.mediaText}`),mU.has(XS)||(mU.add(XS),ka=!0),!ka)return void Oe.push(gK.get(XS));if(NJ=!0,"revert"===kU.style.all)return;const wU=[];kU.style&&(0,at.iterateCSSDeclarations)(kU.style,((mU,gK)=>{const XS=(0,wY.getModifiableCSSDeclaration)(mU,gK,kU,MQ.variablesStore,aF,Gm);XS&&wU.push(XS)}));let Ta=null;if(wU.length>0){const mU=kU.parentRule;Ta={selector:kU.selectorText,declarations:wU,parentRule:mU},Oe.push(Ta)}gK.set(XS,Ta)}),(()=>{cv=!0})),ys.forEach((kU=>{mU.delete(kU),gK.delete(kU)})),ka=MJ,!WM&&!NJ&&!cE)return;function xV(kU,mU,gK){const{selector:XS,declarations:at}=gK,wY=kU=>{const{property:mU,value:gK,important:XS,sourceValue:at}=kU;return`${mU}: ${null==gK?at:gK}${XS?" !important":""};`};let MQ="";at.forEach((kU=>{MQ+=`${wY(kU)} `}));const ka=`${XS} { ${MQ} }`;kU.insertRule(ka,mU)}kU++;const hR=new Map,EN=new Map;let Qq=0,gf=0;const pB={rule:null,rules:[],isGroup:!0},ie=new WeakMap;function az(kU){if(null==kU)return pB;if(ie.has(kU))return ie.get(kU);const mU={rule:kU,rules:[],isGroup:!0};ie.set(kU,mU);const gK=undefined;return az(kU.parentRule).rules.push(mU),mU}XS.forEach((kU=>kU())),XS.clear(),Oe.filter((kU=>kU)).forEach((({selector:mU,declarations:gK,parentRule:at})=>{const wY=az(at),MQ={selector:mU,declarations:[],isGroup:!1},ka=MQ.declarations;function wU(mU,gK,XS,at){const wY=++Qq,MQ={property:mU,value:null,important:XS,asyncKey:wY,sourceValue:at};ka.push(MQ);const wU=kU;gK.then((mU=>{mU&&!Gm()&&wU===kU&&(MQ.value=mU,Ta.add((()=>{Gm()||wU!==kU||yl(wY)})))}))}function cv(mU,gK,at,wY){const{declarations:MQ,onTypeChange:Ta}=gK,cv=++gf,So=kU,Hn=ka.length;let Cd=[];if(0===MQ.length){const kU={property:mU,value:wY,important:at,sourceValue:wY,varKey:cv};ka.push(kU),Cd=[kU]}MQ.forEach((kU=>{if(kU.value instanceof Promise)wU(kU.property,kU.value,at,wY);else{const mU={property:kU.property,value:kU.value,important:at,sourceValue:wY,varKey:cv};ka.push(mU),Cd.push(mU)}})),Ta.addListener((mU=>{if(Gm()||So!==kU)return;const gK=mU.map((kU=>({property:kU.property,value:kU.value,important:at,sourceValue:wY,varKey:cv}))),XS=ka.indexOf(Cd[0],Hn);ka.splice(XS,Cd.length,...gK),Cd=gK,Py(cv)})),XS.add((()=>Ta.removeListeners()))}wY.rules.push(MQ),gK.forEach((({property:kU,value:mU,important:gK,sourceValue:XS})=>{if("function"==typeof mU){const at=mU(AH);at instanceof Promise?wU(kU,at,gK,XS):kU.startsWith("--")?cv(kU,at,gK,XS):ka.push({property:kU,value:at,important:gK,sourceValue:XS})}else ka.push({property:kU,value:mU,important:gK,sourceValue:XS})}))}));const w=RA();function jM(){function kU(kU,mU){const{rule:gK}=kU;if(gK instanceof CSSMediaRule){const{media:kU}=gK,XS=mU.cssRules.length;return mU.insertRule(`@media ${kU.mediaText} {}`,XS),mU.cssRules[XS]}return mU}function mU(gK,XS,at){gK.rules.forEach((gK=>{if(gK.isGroup){const wY=undefined;mU(gK,kU(gK,XS),at)}else at(gK,XS)}))}mU(pB,w,((kU,mU)=>{const gK=mU.cssRules.length;kU.declarations.forEach((({asyncKey:XS,varKey:at})=>{null!=XS&&hR.set(XS,{rule:kU,target:mU,index:gK}),null!=at&&EN.set(at,{rule:kU,target:mU,index:gK})})),xV(mU,gK,kU)}))}function yl(kU){const{rule:mU,target:gK,index:XS}=hR.get(kU);gK.deleteRule(XS),xV(gK,XS,mU),hR.delete(kU)}function Py(kU){const{rule:mU,target:gK,index:XS}=EN.get(kU);gK.deleteRule(XS),xV(gK,XS,mU)}jM()}return{modifySheet:Cd,shouldRebuildStyle:Hn}}gK.createStyleSheetModifier=cv},{"../../utils/throttle":42,"./css-rules":4,"./modify-css":10,"./variables":16}],15:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.injectProxy=void 0;const XS=kU("../../const");function at(kU){document.dispatchEvent(new CustomEvent(`${XS.EVENT_PREFIX}inlineScriptsAllowed`));const mU=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),gK=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),at=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),wY=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),MQ=kU?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,ka=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),wU=ka?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,Ta="www.vy.no"===location.hostname,cv=Ta?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,So=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",mU),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",gK),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",at),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",wY),document.removeEventListener(`${XS.EVENT_PREFIX}cleanUp`,So),document.removeEventListener(`${XS.EVENT_PREFIX}addUndefinedResolver`,Hn),kU&&Object.defineProperty(Document.prototype,"styleSheets",MQ),ka&&Object.defineProperty(Element.prototype,"getElementsByTagName",wU),Ta&&Object.defineProperty(Node.prototype,"childNodes",cv)},Hn=kU=>{customElements.whenDefined(kU.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${XS.EVENT_PREFIX}isDefined`,{detail:{tag:kU.detail.tag}}))}))};document.addEventListener(XS.MSG_CLEANUP,So),document.addEventListener(`${XS.EVENT_PREFIX}addUndefinedResolver`,Hn);const Cd=new Event(`${XS.EVENT_PREFIX}updateSheet`);function AH(kU,gK,at){return mU.value.call(this,kU,gK,at),this.ownerNode&&!this.ownerNode.classList.contains(XS.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(Cd),-1}function aF(kU,mU){const at=gK.value.call(this,kU,mU);return this.ownerNode&&!this.ownerNode.classList.contains(XS.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(Cd),at}function WM(kU){at.value.call(this,kU),this.ownerNode&&!this.ownerNode.classList.contains(XS.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(Cd)}function RA(kU){wY.value.call(this,kU),this.ownerNode&&!this.ownerNode.classList.contains(XS.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(Cd)}function Gm(){const kU=()=>{const kU=undefined,mU=[...MQ.get.call(this)].filter((kU=>kU.ownerNode&&!kU.ownerNode.classList.contains(XS.STYLESHEET_COMMON_CLASSNAME)));return mU.item=kU=>mU[kU],Object.setPrototypeOf(mU,StyleSheetList.prototype)};let mU=kU();const gK=undefined;return mU=new Proxy(mU,{get:function(mU,gK){return kU()[gK]}}),mU}function NJ(kU){if("style"!==kU)return wU.value.call(this,kU);const mU=()=>{const mU=wU.value.call(this,kU);return Object.setPrototypeOf([...mU].filter((kU=>!kU.classList.contains(XS.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let gK=mU();const at=undefined;return gK=new Proxy(gK,{get:function(kU,gK){return mU()[Number(gK)||gK]}}),gK}function ys(){const kU=cv.get.call(this);return Object.setPrototypeOf([...kU].filter((kU=>!kU.classList||!kU.classList.contains(XS.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},mU,{value:AH})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},gK,{value:aF})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},at,{value:WM})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},wY,{value:RA})),kU&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},MQ,{get:Gm})),ka&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},wU,{value:NJ})),Ta&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},cv,{get:ys}))}gK.injectProxy=at},{"../../const":1}],16:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.replaceCSSVariablesNames=gK.variablesStore=gK.VariablesStore=void 0;const XS=kU("../../generators/modify-colors"),at=kU("../../utils/text"),wY=kU("./css-rules"),MQ=kU("./modify-css"),ka=kU("../../utils/color"),wU=kU("../../const"),Ta=1<<0,cv=1<<1,So=1<<2,Hn=1<<3;class Cd{constructor(){this.varTypes=new Map,this.rulesQueue=[],this.definedVars=new Set,this.varRefs=new Map,this.unknownColorVars=new Set,this.unknownBgVars=new Set,this.undefinedVars=new Set,this.initialVarTypes=new Map,this.changedTypeVars=new Set,this.typeChangeSubscriptions=new Map,this.unstableVarValues=new Map}clear(){this.varTypes.clear(),this.rulesQueue.splice(0),this.definedVars.clear(),this.varRefs.clear(),this.unknownColorVars.clear(),this.unknownBgVars.clear(),this.undefinedVars.clear(),this.initialVarTypes.clear(),this.changedTypeVars.clear(),this.typeChangeSubscriptions.clear(),this.unstableVarValues.clear()}isVarType(kU,mU){return this.varTypes.has(kU)&&(this.varTypes.get(kU)&mU)>0}addRulesForMatching(kU){this.rulesQueue.push(kU)}matchVariablesAndDependants(){this.changedTypeVars.clear(),this.initialVarTypes=new Map(this.varTypes),this.collectRootVariables(),this.collectVariablesAndVarDep(this.rulesQueue),this.rulesQueue.splice(0),this.collectRootVarDependants(),this.varRefs.forEach(((kU,mU)=>{kU.forEach((kU=>{this.varTypes.has(mU)&&this.resolveVariableType(kU,this.varTypes.get(mU))}))})),this.unknownColorVars.forEach((kU=>{this.unknownBgVars.has(kU)?(this.unknownColorVars.delete(kU),this.unknownBgVars.delete(kU),this.resolveVariableType(kU,Ta)):this.isVarType(kU,Ta|cv|So)?this.unknownColorVars.delete(kU):this.undefinedVars.add(kU)})),this.unknownBgVars.forEach((kU=>{const mU=undefined;null!=this.findVarRef(kU,(kU=>this.unknownColorVars.has(kU)||this.isVarType(kU,cv|So)))?this.itarateVarRefs(kU,(kU=>{this.resolveVariableType(kU,Ta)})):this.isVarType(kU,Ta|Hn)?this.unknownBgVars.delete(kU):this.undefinedVars.add(kU)})),this.changedTypeVars.forEach((kU=>{this.typeChangeSubscriptions.has(kU)&&this.typeChangeSubscriptions.get(kU).forEach((kU=>{kU()}))})),this.changedTypeVars.clear()}getModifierForVariable(kU){return mU=>{const{varName:gK,sourceValue:XS,rule:at,ignoredImgSelectors:wY,isCancelled:ka}=kU,wU=()=>{const kU=[],wU=(at,wY,MQ)=>{if(!this.isVarType(gK,at))return;const ka=wY(gK);let wU;if(hR(XS))if(EN(XS)){let kU=yl(XS,this.unstableVarValues);kU||(kU=at===Ta?"#ffffff":"#000000"),wU=MQ(kU,mU)}else wU=Gm(XS,(kU=>wY(kU)),(kU=>MQ(kU,mU)));else wU=MQ(XS,mU);kU.push({property:ka,value:wU})};if(wU(Ta,ys,az),wU(cv,MJ,w),wU(So,cE,jM),this.isVarType(gK,Hn)){const wU=Oe(gK);let Ta=XS;hR(XS)&&(Ta=Gm(XS,(kU=>ys(kU)),(kU=>az(kU,mU))));const cv=(0,MQ.getBgImageModifier)(Ta,at,wY,ka);Ta="function"==typeof cv?cv(mU):cv,kU.push({property:wU,value:Ta})}return kU},Cd=new Set,AH=kU=>{const mU=()=>{const mU=wU();kU(mU)};Cd.add(mU),this.subscribeForVarTypeChange(gK,mU)},aF=()=>{Cd.forEach((kU=>{this.unsubscribeFromVariableTypeChanges(gK,kU)}))};return{declarations:wU(),onTypeChange:{addListener:AH,removeListeners:aF}}}}getModifierForVarDependant(kU,mU){if(mU.match(/^\s*(rgb|hsl)a?\(/)){const gK=kU.startsWith("background"),XS=Qq(kU);return kU=>{let at=yl(mU,this.unstableVarValues);at||(at=gK?"#ffffff":"#000000");const wY=undefined;return(gK?az:XS?w:jM)(at,kU)}}return"background-color"===kU?kU=>Gm(mU,(kU=>ys(kU)),(mU=>az(mU,kU))):Qq(kU)?kU=>Gm(mU,(kU=>MJ(kU)),(mU=>w(mU,kU))):"background"===kU||"background-image"===kU||"box-shadow"===kU?gK=>{const XS=new Set,at=()=>{const at=Gm(mU,(kU=>this.isVarType(kU,Ta)?ys(kU):this.isVarType(kU,Hn)?Oe(kU):(XS.add(kU),kU)),(kU=>az(kU,gK)));if("box-shadow"===kU){const kU=undefined,mU=(0,MQ.getShadowModifierWithInfo)(at)(gK);if(mU.unparseableMatchesLength!==mU.matchesLength)return mU.result}return at},wY=at();return XS.size>0?new Promise((kU=>{const mU=XS.values().next().value,gK=()=>{this.unsubscribeFromVariableTypeChanges(mU,gK);const XS=at();kU(XS)};this.subscribeForVarTypeChange(mU,gK)})):wY}:kU.startsWith("border")||kU.startsWith("outline")?kU=>Gm(mU,(kU=>cE(kU)),(mU=>jM(mU,kU))):null}subscribeForVarTypeChange(kU,mU){this.typeChangeSubscriptions.has(kU)||this.typeChangeSubscriptions.set(kU,new Set);const gK=this.typeChangeSubscriptions.get(kU);gK.has(mU)||gK.add(mU)}unsubscribeFromVariableTypeChanges(kU,mU){this.typeChangeSubscriptions.has(kU)&&this.typeChangeSubscriptions.get(kU).delete(mU)}collectVariablesAndVarDep(kU){kU.forEach((kU=>{(0,wY.iterateCSSRules)(kU,(kU=>{kU.style&&(0,wY.iterateCSSDeclarations)(kU.style,((kU,mU)=>{xV(kU)&&this.inspectVariable(kU,mU),hR(mU)&&this.inspectVarDependant(kU,mU)}))}))}))}collectRootVariables(){(0,wY.iterateCSSDeclarations)(document.documentElement.style,((kU,mU)=>{xV(kU)&&this.inspectVariable(kU,mU)}))}inspectVariable(kU,mU){if(this.unstableVarValues.set(kU,mU),hR(mU)&&EN(mU)&&(this.unknownColorVars.add(kU),this.definedVars.add(kU)),this.definedVars.has(kU))return;this.definedVars.add(kU);const gK=undefined;gf.test(mU)||(0,ka.parseColorWithCache)(mU)?this.unknownColorVars.add(kU):(mU.includes("url(")||mU.includes("linear-gradient(")||mU.includes("radial-gradient("))&&this.resolveVariableType(kU,Hn)}resolveVariableType(kU,mU){const gK=this.initialVarTypes.get(kU)||0,XS=undefined,at=(this.varTypes.get(kU)||0)|mU;this.varTypes.set(kU,at),(at!==gK||this.undefinedVars.has(kU))&&(this.changedTypeVars.add(kU),this.undefinedVars.delete(kU)),this.unknownColorVars.delete(kU),this.unknownBgVars.delete(kU)}collectRootVarDependants(){(0,wY.iterateCSSDeclarations)(document.documentElement.style,((kU,mU)=>{hR(mU)&&this.inspectVarDependant(kU,mU)}))}inspectVarDependant(kU,mU){xV(kU)?this.iterateVarDeps(mU,(mU=>{this.varRefs.has(kU)||this.varRefs.set(kU,new Set),this.varRefs.get(kU).add(mU)})):"background-color"===kU||"box-shadow"===kU?this.iterateVarDeps(mU,(kU=>this.resolveVariableType(kU,Ta))):Qq(kU)?this.iterateVarDeps(mU,(kU=>this.resolveVariableType(kU,cv))):kU.startsWith("border")||kU.startsWith("outline")?this.iterateVarDeps(mU,(kU=>this.resolveVariableType(kU,So))):"background"!==kU&&"background-image"!==kU||this.iterateVarDeps(mU,(kU=>{if(this.isVarType(kU,Ta|Hn))return;const mU=null!=this.findVarRef(kU,(kU=>this.unknownColorVars.has(kU)||this.isVarType(kU,cv|So)));this.itarateVarRefs(kU,(kU=>{mU?this.resolveVariableType(kU,Ta):this.unknownBgVars.add(kU)}))}))}iterateVarDeps(kU,mU){const gK=new Set;NJ(kU,(kU=>gK.add(kU))),gK.forEach((kU=>mU(kU)))}findVarRef(kU,mU,gK=new Set){if(gK.has(kU))return null;gK.add(kU);const XS=undefined;if(mU(kU))return kU;const at=this.varRefs.get(kU);if(!at||0===at.size)return null;for(const kU of at){const XS=this.findVarRef(kU,mU,gK);if(XS)return XS}return null}itarateVarRefs(kU,mU){this.findVarRef(kU,(kU=>(mU(kU),!1)))}setOnRootVariableChange(kU){this.onRootVariableDefined=kU}putRootVars(kU,mU){const gK=kU.sheet;gK.cssRules.length>0&&gK.deleteRule(0);const XS=new Map;(0,wY.iterateCSSDeclarations)(document.documentElement.style,((kU,gK)=>{xV(kU)&&(this.isVarType(kU,Ta)&&XS.set(ys(kU),az(gK,mU)),this.isVarType(kU,cv)&&XS.set(MJ(kU),w(gK,mU)),this.isVarType(kU,So)&&XS.set(cE(kU),jM(gK,mU)),this.subscribeForVarTypeChange(kU,this.onRootVariableDefined))}));const at=[];at.push(":root {");for(const[kU,mU]of XS)at.push(`    ${kU}: ${mU};`);at.push("}");const MQ=at.join("\n");gK.insertRule(MQ)}}function AH(kU,mU=0){const gK=kU.indexOf("var(",mU);if(gK>=0){const mU=(0,at.getParenthesesRange)(kU,gK+3);if(mU)return{start:gK,end:mU.end}}return null}function aF(kU){const mU=[];let gK=0,XS;for(;XS=AH(kU,gK);){const{start:at,end:wY}=XS;mU.push({start:at,end:wY,value:kU.substring(at,wY)}),gK=XS.end+1}return mU}function WM(kU,mU){const gK=aF(kU),XS=gK.length;if(0===XS)return kU;const at=kU.length,wY=gK.map((kU=>mU(kU.value))),MQ=[];MQ.push(kU.substring(0,gK[0].start));for(let mU=0;mU<XS;mU++){MQ.push(wY[mU]);const ka=gK[mU].end,wU=mU<XS-1?gK[mU+1].start:at;MQ.push(kU.substring(ka,wU))}return MQ.join("")}function RA(kU){const mU=kU.indexOf(",");let gK,XS;return mU>=0?(gK=kU.substring(4,mU).trim(),XS=kU.substring(mU+1,kU.length-1).trim()):(gK=kU.substring(4,kU.length-1).trim(),XS=""),{name:gK,fallback:XS}}function Gm(kU,mU,gK){const XS=undefined;return WM(kU,(kU=>{const{name:XS,fallback:at}=RA(kU),wY=mU(XS);if(!at)return`var(${wY})`;let MQ;return MQ=hR(at)?Gm(at,mU,gK):gK?gK(at):at,`var(${wY}, ${MQ})`}))}function NJ(kU,mU){Gm(kU,(kU=>(mU(kU),kU)))}function ys(kU){return`--${wU.ROOT_VARS_PREFIX}-bg${kU}`}function MJ(kU){return`--${wU.ROOT_VARS_PREFIX}-text${kU}`}function cE(kU){return`--${wU.ROOT_VARS_PREFIX}-border${kU}`}function Oe(kU){return`--${wU.ROOT_VARS_PREFIX}-bgimg${kU}`}function xV(kU){return kU.startsWith("--")}function hR(kU){return kU.includes("var(")}function EN(kU){return kU.match(/^\s*(rgb|hsl)a?\(/)}function Qq(kU){return"color"===kU||"caret-color"===kU||"-webkit-text-fill-color"===kU}gK.VariablesStore=Cd,gK.variablesStore=new Cd,gK.replaceCSSVariablesNames=Gm;const gf=/^\d{1,3}, ?\d{1,3}, ?\d{1,3}$/;function pB(kU){if(gf.test(kU)){const mU=kU.split(",");let gK="rgb(";return mU.forEach((kU=>{gK+=`${kU.trim()}, `})),gK=gK.substring(0,gK.length-2),gK+=")",{isRaw:!0,color:gK}}return{isRaw:!1,color:kU}}function ie(kU,mU,gK){const{isRaw:XS,color:at}=pB(kU),wY=(0,ka.parseColorWithCache)(at);if(wY){const kU=gK(wY,mU);if(XS){const mU=(0,ka.parseColorWithCache)(kU);return mU?`${mU.r}, ${mU.g}, ${mU.b}`:kU}return kU}return at}function az(kU,mU){return ie(kU,mU,XS.modifyBackgroundColor)}function w(kU,mU){return ie(kU,mU,XS.modifyForegroundColor)}function jM(kU,mU){return ie(kU,mU,XS.modifyBorderColor)}function yl(kU,mU,gK=new Set){let XS=!1;const at=undefined,wY=WM(kU,(kU=>{const{name:at,fallback:wY}=RA(kU);if(gK.has(at))return XS=!0,null;gK.add(at);const MQ=mU.get(at)||wY;let ka=null;return MQ&&(ka=hR(MQ)?yl(MQ,mU,gK):MQ),ka||(XS=!0,null)}));return XS?null:wY}},{"../../const":1,"../../generators/modify-colors":22,"../../utils/color":33,"../../utils/text":41,"./css-rules":4,"./modify-css":10}],17:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.stopWatchingForStyleChanges=gK.watchForStyleChanges=void 0;const XS=kU("../../utils/array"),at=kU("../utils/dom"),wY=kU("./style-manager"),MQ=kU("../../utils/platform"),ka=kU("../../const"),wU=[];let Ta;const cv=new Map;let So;function Hn(kU){MQ.isDefinedSelectorSupported&&(0,XS.forEach)(kU.querySelectorAll(":not(:defined)"),(kU=>{let mU=kU.tagName.toLowerCase();if(!mU.includes("-")){const gK=kU.getAttribute("is");if(!gK)return;mU=gK}cv.has(mU)||(cv.set(mU,new Set),WM(mU).then((()=>{if(So){const kU=cv.get(mU);cv.delete(mU),So(Array.from(kU))}}))),cv.get(mU).add(kU)}))}let Cd=!1;document.addEventListener(`${ka.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{Cd=!0}));const AH=new Map;function aF(kU){if(Cd=!0,AH.has(kU.detail.tag)){const mU=undefined;AH.get(kU.detail.tag)()}}async function WM(kU){return new Promise((mU=>{if(window.customElements&&"function"==typeof customElements.whenDefined)customElements.whenDefined(kU).then((()=>mU()));else{const gK=()=>{const XS=cv.get(kU);XS&&XS.size>0&&(XS.values().next().value.matches(":defined")?mU():requestAnimationFrame(gK))};requestAnimationFrame(gK)}}))}function RA(kU){So=kU}function Gm(){So=null,cv.clear(),document.removeEventListener(`${ka.EVENT_PREFIX}isDefined`,aF)}function NJ(kU,mU,gK){MJ();const MQ=new Set(kU),cv=new WeakMap,So=new WeakMap;function Cd(kU){cv.set(kU,kU.previousElementSibling),So.set(kU,kU.nextElementSibling)}function AH(kU){cv.delete(kU),So.delete(kU)}function WM(kU){return kU.previousElementSibling!==cv.get(kU)||kU.nextElementSibling!==So.get(kU)}function Gm(kU){const{createdStyles:gK,removedStyles:XS,movedStyles:at}=kU;gK.forEach((kU=>Cd(kU))),at.forEach((kU=>Cd(kU))),XS.forEach((kU=>AH(kU))),gK.forEach((kU=>MQ.add(kU))),XS.forEach((kU=>MQ.delete(kU))),gK.size+XS.size+at.size>0&&mU({created:Array.from(gK),removed:Array.from(XS),moved:Array.from(at),updated:[]})}function NJ({additions:kU,moves:mU,deletions:gK}){const XS=new Set,MQ=new Set,ka=new Set;kU.forEach((kU=>(0,wY.getManageableStyles)(kU).forEach((kU=>XS.add(kU))))),gK.forEach((kU=>(0,wY.getManageableStyles)(kU).forEach((kU=>MQ.add(kU))))),mU.forEach((kU=>(0,wY.getManageableStyles)(kU).forEach((kU=>ka.add(kU))))),Gm({createdStyles:XS,removedStyles:MQ,movedStyles:ka}),kU.forEach((kU=>{(0,at.iterateShadowHosts)(kU,xV),Hn(kU)}))}function ys(kU){const mU=new Set((0,wY.getManageableStyles)(kU)),gK=new Set,XS=new Set,ka=new Set;mU.forEach((kU=>{MQ.has(kU)||gK.add(kU)})),MQ.forEach((kU=>{mU.has(kU)||XS.add(kU)})),mU.forEach((kU=>{gK.has(kU)||XS.has(kU)||!WM(kU)||ka.add(kU)})),Gm({createdStyles:gK,removedStyles:XS,movedStyles:ka}),(0,at.iterateShadowHosts)(kU,xV),Hn(kU)}function cE(kU){const gK=new Set,XS=new Set;kU.forEach((kU=>{const{target:mU}=kU;mU.isConnected&&((0,wY.shouldManageStyle)(mU)?gK.add(mU):mU instanceof HTMLLinkElement&&mU.disabled&&XS.add(mU))})),gK.size+XS.size>0&&mU({updated:Array.from(gK),created:[],removed:Array.from(XS),moved:[]})}function Oe(kU){const mU=(0,at.createOptimizedTreeObserver)(kU,{onMinorMutations:NJ,onHugeMutations:ys}),gK=new MutationObserver(cE);gK.observe(kU,{attributes:!0,attributeFilter:["rel","disabled","media","href"],subtree:!0}),wU.push(mU,gK),Ta.add(kU)}function xV(kU){const{shadowRoot:mU}=kU;null==mU||Ta.has(mU)||(Oe(mU),gK(mU))}kU.forEach(Cd),Oe(document),(0,at.iterateShadowHosts)(document.documentElement,xV),RA((kU=>{const gK=[];kU.forEach((kU=>(0,XS.push)(gK,(0,wY.getManageableStyles)(kU.shadowRoot)))),mU({created:gK,updated:[],removed:[],moved:[]}),kU.forEach((kU=>{const{shadowRoot:mU}=kU;null!=mU&&(xV(kU),(0,at.iterateShadowHosts)(mU,xV),Hn(mU))}))})),document.addEventListener(`${ka.EVENT_PREFIX}isDefined`,aF),Hn(document)}function ys(){wU.forEach((kU=>kU.disconnect())),wU.splice(0,wU.length),Ta=new WeakSet}function MJ(){ys(),Gm()}gK.watchForStyleChanges=NJ,gK.stopWatchingForStyleChanges=MJ},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../utils/dom":18,"./style-manager":13}],18:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.createOptimizedTreeObserver=gK.cleanReadyStateCompleteListeners=gK.addReadyStateCompleteListener=gK.isReadyStateComplete=gK.removeDOMReadyListener=gK.addDOMReadyListener=gK.setIsDOMReady=gK.isDOMReady=gK.iterateShadowHosts=gK.watchForNodePosition=gK.removeNode=gK.createNodeAsap=void 0;const XS=kU("../utils/log"),at=kU("../../utils/throttle"),wY=kU("../../utils/array"),MQ=kU("../../utils/time");function ka({selectNode:kU,createNode:mU,updateNode:gK,selectTarget:XS,createTarget:at,isTargetMutation:wY}){const MQ=XS();if(MQ){const XS=kU();XS?gK(XS):mU(MQ)}else{const gK=new MutationObserver((gK=>{const at=undefined;if(gK.find(wY)){ka();const gK=XS();kU()||mU(gK)}})),MQ=()=>{if("complete"!==document.readyState)return;ka();const gK=XS()||at();kU()||mU(gK)},ka=()=>{document.removeEventListener("readystatechange",MQ),gK.disconnect()};"complete"===document.readyState?MQ():(document.addEventListener("readystatechange",MQ),gK.observe(document,{childList:!0,subtree:!0}))}}function wU(kU){kU&&kU.parentNode&&kU.parentNode.removeChild(kU)}function Ta(kU,mU,gK=Function.prototype){const wY=10,ka=(0,MQ.getDuration)({seconds:2}),wU=(0,MQ.getDuration)({seconds:10}),Ta=kU.previousSibling;let cv=kU.parentNode;if(!cv)throw new Error("Unable to watch for node position: parent element not found");if("prev-sibling"===mU&&!Ta)throw new Error("Unable to watch for node position: there is no previous sibling");let So=0,Hn=null,Cd=null;const AH=(0,at.throttle)((()=>{if(Cd)return;So++;const at=Date.now();if(null==Hn)Hn=at;else if(So>=wY){if(at-Hn<wU)return(0,XS.logWarn)(`Node position watcher paused: retry in ${ka}ms`,kU,Ta),void(Cd=setTimeout((()=>{Hn=null,So=0,Cd=null,AH()}),ka));Hn=at,So=1}if("head"===mU&&Ta&&Ta.parentNode!==cv)return(0,XS.logWarn)("Unable to restore node position: sibling parent changed",kU,Ta,cv),void RA();if("prev-sibling"===mU){if(null==Ta.parentNode)return(0,XS.logWarn)("Unable to restore node position: sibling was removed",kU,Ta,cv),void RA();Ta.parentNode!==cv&&((0,XS.logWarn)("Style was moved to another parent",kU,Ta,cv),NJ(Ta.parentNode))}"head"!==mU||cv.isConnected||(cv=document.head),(0,XS.logWarn)("Restoring node position",kU,Ta,cv),cv.insertBefore(kU,Ta&&Ta.isConnected?Ta.nextSibling:cv.firstChild),aF.takeRecords(),gK&&gK()})),aF=new MutationObserver((()=>{("head"===mU&&(kU.parentNode!==cv||!kU.parentNode.isConnected)||"prev-sibling"===mU&&kU.previousSibling!==Ta)&&AH()})),WM=()=>{aF.observe(cv,{childList:!0})},RA=()=>{clearTimeout(Cd),aF.disconnect(),AH.cancel()},Gm=()=>{aF.takeRecords()},NJ=kU=>{cv=kU,RA(),WM()};return WM(),{run:WM,stop:RA,skip:Gm}}function cv(kU,mU){if(null==kU)return;const gK=document.createTreeWalker(kU,NodeFilter.SHOW_ELEMENT,{acceptNode:kU=>null==kU.shadowRoot?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT});for(let XS=kU.shadowRoot?gK.currentNode:gK.nextNode();null!=XS;XS=gK.nextNode())XS.classList.contains("surfingkeys_hints_host")||(mU(XS),cv(XS.shadowRoot,mU))}gK.createNodeAsap=ka,gK.removeNode=wU,gK.watchForNodePosition=Ta,gK.iterateShadowHosts=cv;let So=()=>"complete"===document.readyState||"interactive"===document.readyState;function Hn(kU){gK.isDOMReady=kU}gK.isDOMReady=So,gK.setIsDOMReady=Hn;const Cd=new Set;function AH(kU){(0,gK.isDOMReady)()?kU():Cd.add(kU)}function aF(kU){Cd.delete(kU)}function WM(){return"complete"===document.readyState}gK.addDOMReadyListener=AH,gK.removeDOMReadyListener=aF,gK.isReadyStateComplete=WM;const RA=new Set;function Gm(kU){WM()?kU():RA.add(kU)}function NJ(){RA.clear()}if(gK.addReadyStateCompleteListener=Gm,gK.cleanReadyStateCompleteListeners=NJ,!(0,gK.isDOMReady)()){const kU=()=>{(0,gK.isDOMReady)()&&(Cd.forEach((kU=>kU())),Cd.clear(),WM()&&(document.removeEventListener("readystatechange",kU),RA.forEach((kU=>kU())),RA.clear()))};document.addEventListener("readystatechange",kU)}const ys=1e3;function MJ(kU){if(kU.length>ys)return!0;let mU=0;for(let gK=0;gK<kU.length;gK++)if(mU+=kU[gK].addedNodes.length,mU>ys)return!0;return!1}function cE(kU){const mU=new Set,gK=new Set,XS=new Set;kU.forEach((kU=>{(0,wY.forEach)(kU.addedNodes,(kU=>{kU instanceof Element&&kU.isConnected&&mU.add(kU)})),(0,wY.forEach)(kU.removedNodes,(kU=>{kU instanceof Element&&(kU.isConnected?(XS.add(kU),mU.delete(kU)):gK.add(kU))}))}));const at=[],MQ=[];return mU.forEach((kU=>{mU.has(kU.parentElement)&&at.push(kU)})),gK.forEach((kU=>{gK.has(kU.parentElement)&&MQ.push(kU)})),at.forEach((kU=>mU.delete(kU))),MQ.forEach((kU=>gK.delete(kU))),{additions:mU,moves:XS,deletions:gK}}const Oe=new Map,xV=new WeakMap;function hR(kU,mU){let XS,at,wY;if(Oe.has(kU))XS=Oe.get(kU),at=xV.get(XS);else{let mU=!1,MQ=!1;XS=new MutationObserver((XS=>{if(MJ(XS))!mU||(0,gK.isDOMReady)()?at.forEach((({onHugeMutations:mU})=>mU(kU))):MQ||(wY=()=>at.forEach((({onHugeMutations:mU})=>mU(kU))),AH(wY),MQ=!0),mU=!0;else{const kU=cE(XS);at.forEach((({onMinorMutations:mU})=>mU(kU)))}})),XS.observe(kU,{childList:!0,subtree:!0}),Oe.set(kU,XS),at=new Set,xV.set(XS,at)}return at.add(mU),{disconnect(){at.delete(mU),wY&&aF(wY),0===at.size&&(XS.disconnect(),xV.delete(XS),Oe.delete(kU))}}}gK.createOptimizedTreeObserver=hR},{"../../utils/array":30,"../../utils/throttle":42,"../../utils/time":43,"../utils/log":19}],19:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.logInfoCollapsed=gK.logWarn=gK.logInfo=void 0;const XS=kU("../../utils/message"),at=!0,wY=!1,MQ="info";function ka(kU,...mU){wY&&MQ&&("info"===MQ||"warn"===kU)&&chrome.runtime.sendMessage({type:XS.MessageType.CS_LOG,data:{level:kU,log:mU}})}function wU(...kU){at&&ka("info",...kU)}function Ta(...kU){at&&ka("warn",...kU)}function cv(kU,...mU){}gK.logInfo=wU,gK.logWarn=Ta,gK.logInfoCollapsed=cv},{"../../utils/message":37}],20:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.DEFAULT_SETTINGS=gK.DEFAULT_COLORSCHEME=gK.DEFAULT_THEME=gK.DEFAULT_COLORS=void 0;const XS=kU("./generators/theme-engines"),at=kU("./utils/platform"),wY=kU("./utils/automation");gK.DEFAULT_COLORS={darkScheme:{background:"#181a1b",text:"#e8e6e3"},lightScheme:{background:"#181a1b",text:"#e8e6e3"}},gK.DEFAULT_THEME={mode:1,brightness:100,contrast:110,grayscale:0,sepia:0,useFont:!1,fontFamily:at.isMacOS?"Helvetica Neue":at.isWindows?"Segoe UI":"Open Sans",textStroke:0,engine:XS.ThemeEngine.dynamicTheme,stylesheet:"",darkSchemeBackgroundColor:gK.DEFAULT_COLORS.darkScheme.background,darkSchemeTextColor:gK.DEFAULT_COLORS.darkScheme.text,lightSchemeBackgroundColor:gK.DEFAULT_COLORS.lightScheme.background,lightSchemeTextColor:gK.DEFAULT_COLORS.lightScheme.text,scrollbarColor:at.isMacOS?"":"auto",selectionColor:"auto",styleSystemControls:!1,lightColorScheme:"Default",darkColorScheme:"Default",immediateModify:!1},gK.DEFAULT_COLORSCHEME={light:{Default:{backgroundColor:gK.DEFAULT_COLORS.lightScheme.background,textColor:gK.DEFAULT_COLORS.lightScheme.text}},dark:{Default:{backgroundColor:gK.DEFAULT_COLORS.darkScheme.background,textColor:gK.DEFAULT_COLORS.darkScheme.text}}},gK.DEFAULT_SETTINGS={enabled:!0,fetchNews:!0,theme:gK.DEFAULT_THEME,presets:[],customThemes:[],siteList:[],siteListEnabled:[],applyToListedOnly:!1,changeBrowserTheme:!1,syncSettings:!0,syncSitesFixes:!1,automation:{enabled:!1,mode:wY.AutomationMode.NONE,behavior:"OnOff"},time:{activation:"18:00",deactivation:"9:00"},location:{latitude:null,longitude:null},previewNewDesign:!1,enableForPDF:!0,enableForProtectedPages:!1,enableContextMenus:!1,detectDarkTheme:!1}},{"./generators/theme-engines":25,"./utils/automation":32,"./utils/platform":40}],21:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.formatInversionFixes=gK.parseInversionFixes=gK.getInversionFixesFor=gK.getCSSFilterValue=gK.cssFilterStyleSheetTemplate=gK.hasFirefoxNewRootBehavior=gK.hasPatchForChromiumIssue501582=gK.FilterMode=void 0;const XS=kU("./utils/format"),at=kU("./utils/matrix"),wY=kU("./utils/parse"),MQ=kU("../utils/text"),ka=kU("../utils/url"),wU=kU("./text-style"),Ta=kU("../utils/platform");var cv;function So(){return!0}function Hn(){return Boolean(Ta.isFirefox&&(0,Ta.compareChromeVersions)(Ta.firefoxVersion,"102.0")>=0)}function Cd(kU,mU,gK,XS,at){const wY=undefined,MQ=undefined;return AH(aF(kU),"invert(100%) hue-rotate(180deg)",kU,mU,gK,XS,at)}function AH(kU,mU,gK,XS,wY,MQ,ka){const Ta=NJ(XS,MQ,ka),Cd=[];if(Cd.push("@media screen {"),kU&&wY&&(Cd.push(""),Cd.push("/* Leading rule */"),Cd.push(WM(kU))),gK.mode===cv.dark&&(Cd.push(""),Cd.push("/* Reverse rule */"),Cd.push(Gm(mU,Ta))),(gK.useFont||gK.textStroke>0)&&(Cd.push(""),Cd.push("/* Font */"),Cd.push((0,wU.createTextStyle)(gK))),Cd.push(""),Cd.push("/* Text contrast */"),Cd.push("html {"),Cd.push("  text-shadow: 0 0 0 !important;"),Cd.push("}"),Cd.push(""),Cd.push("/* Full screen */"),[":-webkit-full-screen",":-moz-full-screen",":fullscreen"].forEach((kU=>{Cd.push(`${kU}, ${kU} * {`),Cd.push("  -webkit-filter: none !important;"),Cd.push("  filter: none !important;"),Cd.push("}")})),wY){const kU=[255,255,255],mU=So()||Hn()||gK.mode!==cv.dark?kU:(0,at.applyColorMatrix)(kU,(0,at.createFilterMatrix)(gK)).map(Math.round);Cd.push(""),Cd.push("/* Page background */"),Cd.push("html {"),Cd.push(`  background: rgb(${mU.join(",")}) !important;`),Cd.push("}")}return Ta.css&&Ta.css.length>0&&gK.mode===cv.dark&&(Cd.push(""),Cd.push("/* Custom rules */"),Cd.push(Ta.css)),Cd.push(""),Cd.push("}"),Cd.join("\n")}function aF(kU){const mU=[];return kU.mode===cv.dark&&mU.push("invert(100%) hue-rotate(180deg)"),100!==kU.brightness&&mU.push(`brightness(${kU.brightness}%)`),100!==kU.contrast&&mU.push(`contrast(${kU.contrast}%)`),0!==kU.grayscale&&mU.push(`grayscale(${kU.grayscale}%)`),0!==kU.sepia&&mU.push(`sepia(${kU.sepia}%)`),0===mU.length?null:mU.join(" ")}function WM(kU){return["html {",`  -webkit-filter: ${kU} !important;`,`  filter: ${kU} !important;`,"}"].join("\n")}function RA(kU){return kU.map((kU=>kU.replace(/\,$/,""))).join(",\n")}function Gm(kU,mU){const gK=[];return mU.invert.length>0&&(gK.push(`${RA(mU.invert)} {`),gK.push(`  -webkit-filter: ${kU} !important;`),gK.push(`  filter: ${kU} !important;`),gK.push("}")),mU.noinvert.length>0&&(gK.push(`${RA(mU.noinvert)} {`),gK.push("  -webkit-filter: none !important;"),gK.push("  filter: none !important;"),gK.push("}")),mU.removebg.length>0&&(gK.push(`${RA(mU.removebg)} {`),gK.push("  background: white !important;"),gK.push("}")),gK.join("\n")}function NJ(kU,mU,gK){const XS=(0,wY.getSitesFixesFor)(kU,mU,gK,{commands:Object.keys(ys),getCommandPropName:kU=>ys[kU],parseCommandValue:(kU,mU)=>"CSS"===kU?mU.trim():(0,MQ.parseArray)(mU)}),at={url:XS[0].url,invert:XS[0].invert||[],noinvert:XS[0].noinvert||[],removebg:XS[0].removebg||[],css:XS[0].css||""};if(kU){const mU=XS.slice(1).filter((mU=>(0,ka.isURLInList)(kU,mU.url))).sort(((kU,mU)=>mU.url[0].length-kU.url[0].length));if(mU.length>0){const kU=mU[0];return{url:kU.url,invert:at.invert.concat(kU.invert||[]),noinvert:at.noinvert.concat(kU.noinvert||[]),removebg:at.removebg.concat(kU.removebg||[]),css:[at.css,kU.css].filter((kU=>kU)).join("\n")}}}return at}!function(kU){kU[kU["light"]=0]="light",kU[kU["dark"]=1]="dark"}(cv=gK.FilterMode||(gK.FilterMode={})),gK.hasPatchForChromiumIssue501582=So,gK.hasFirefoxNewRootBehavior=Hn,gK.default=Cd,gK.cssFilterStyleSheetTemplate=AH,gK.getCSSFilterValue=aF,gK.getInversionFixesFor=NJ;const ys={INVERT:"invert","NO INVERT":"noinvert","REMOVE BG":"removebg",CSS:"css"};function MJ(kU){return(0,wY.parseSitesFixesConfig)(kU,{commands:Object.keys(ys),getCommandPropName:kU=>ys[kU],parseCommandValue:(kU,mU)=>"CSS"===kU?mU.trim():(0,MQ.parseArray)(mU)})}function cE(kU){const mU=kU.slice().sort(((kU,mU)=>(0,ka.compareURLPatterns)(kU.url[0],mU.url[0])));return(0,XS.formatSitesFixesConfig)(mU,{props:Object.values(ys),getPropCommandName:kU=>Object.entries(ys).find((([,mU])=>mU===kU))[0],formatPropValue:(kU,mU)=>"css"===kU?mU.trim().replace(/\n+/g,"\n"):(0,MQ.formatArray)(mU).trim(),shouldIgnoreProp:(kU,mU)=>"css"===kU?!mU:!(Array.isArray(mU)&&mU.length>0)})}gK.parseInversionFixes=MJ,gK.formatInversionFixes=cE},{"../utils/platform":40,"../utils/text":41,"../utils/url":45,"./text-style":24,"./utils/format":26,"./utils/matrix":27,"./utils/parse":28}],22:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.modifyGradientColor=gK.modifyShadowColor=gK.modifyBorderColor=gK.modifyForegroundColor=gK.modifyBackgroundColor=gK.modifyColor=gK.clearColorModificationCache=void 0;const XS=kU("../utils/color"),at=kU("../utils/math"),wY=kU("./utils/matrix");function MQ(kU){const mU=undefined,gK=undefined;return kU[1===kU.mode?"darkSchemeBackgroundColor":"lightSchemeBackgroundColor"]}function ka(kU){const mU=undefined,gK=undefined;return kU[1===kU.mode?"darkSchemeTextColor":"lightSchemeTextColor"]}const wU=new Map;function Ta(){wU.clear()}gK.clearColorModificationCache=Ta;const cv=["r","g","b","a"],So=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function Hn(kU,mU){let gK="";return cv.forEach((mU=>{gK+=`${kU[mU]};`})),So.forEach((kU=>{gK+=`${mU[kU]};`})),gK}function Cd(kU,mU,gK,at,MQ){let ka;wU.has(gK)?ka=wU.get(gK):(ka=new Map,wU.set(gK,ka));const Ta=Hn(kU,mU);if(ka.has(Ta))return ka.get(Ta);const cv=undefined,So=undefined,Cd=undefined,AH=gK((0,XS.rgbToHSL)(kU),null==at?null:(0,XS.parseToHSLWithCache)(at),null==MQ?null:(0,XS.parseToHSLWithCache)(MQ)),{r:aF,g:WM,b:RA,a:Gm}=(0,XS.hslToRGB)(AH),NJ=(0,wY.createFilterMatrix)(mU),[ys,MJ,cE]=(0,wY.applyColorMatrix)([aF,WM,RA],NJ),Oe=1===Gm?(0,XS.rgbToHexString)({r:ys,g:MJ,b:cE}):(0,XS.rgbToString)({r:ys,g:MJ,b:cE,a:Gm});return ka.set(Ta,Oe),Oe}function AH(kU){return kU}function aF(kU,mU){return Cd(kU,mU,AH)}function WM(kU,mU){const gK=MQ(mU),XS=undefined;return Cd(kU,mU,RA,ka(mU),gK)}function RA({h:kU,s:mU,l:gK,a:XS},wY,MQ){const ka=gK<.5;let wU;if(ka)wU=gK<.2||mU<.12;else{const XS=undefined;wU=mU<.24||gK>.8&&(kU>200&&kU<280)}let Ta=kU,cv=gK;wU&&(ka?(Ta=wY.h,cv=wY.s):(Ta=MQ.h,cv=MQ.s));const So=undefined;return{h:Ta,s:cv,l:(0,at.scale)(gK,0,1,wY.l,MQ.l),a:XS}}gK.modifyColor=aF;const Gm=.4;function NJ({h:kU,s:mU,l:gK,a:XS},wY){const MQ=undefined,ka=undefined,wU=mU<.12||gK>.8&&(kU>200&&kU<280);if(gK<.5){const MQ=(0,at.scale)(gK,0,.5,0,Gm);if(wU){const kU=undefined,mU=undefined;return{h:wY.h,s:wY.s,l:MQ,a:XS}}return{h:kU,s:mU,l:MQ,a:XS}}let Ta=(0,at.scale)(gK,.5,1,Gm,wY.l);if(wU){const kU=undefined,mU=undefined;return{h:wY.h,s:wY.s,l:Ta,a:XS}}let cv=kU;const So=undefined;if(kU>60&&kU<180){const mU=undefined;cv=kU>120?(0,at.scale)(kU,120,180,135,180):(0,at.scale)(kU,60,120,60,105)}return cv>40&&cv<80&&(Ta*=.75),{h:cv,s:mU,l:Ta,a:XS}}function ys(kU,mU){if(0===mU.mode)return WM(kU,mU);const gK=MQ(mU);return Cd(kU,Object.assign(Object.assign({},mU),{mode:0}),NJ,gK)}gK.modifyBackgroundColor=ys;const MJ=.55;function cE(kU){return(0,at.scale)(kU,205,245,205,220)}function Oe({h:kU,s:mU,l:gK,a:XS},wY){const MQ=undefined,ka=gK<.2||mU<.24,wU=!ka&&kU>205&&kU<245;if(gK>.5){const MQ=(0,at.scale)(gK,.5,1,MJ,wY.l);if(ka){const kU=undefined,mU=undefined;return{h:wY.h,s:wY.s,l:MQ,a:XS}}let Ta=kU;return wU&&(Ta=cE(kU)),{h:Ta,s:mU,l:MQ,a:XS}}if(ka){const kU=undefined,mU=undefined,MQ=undefined;return{h:wY.h,s:wY.s,l:(0,at.scale)(gK,0,.5,wY.l,MJ),a:XS}}let Ta=kU,cv;return wU?(Ta=cE(kU),cv=(0,at.scale)(gK,0,.5,wY.l,Math.min(1,MJ+.05))):cv=(0,at.scale)(gK,0,.5,wY.l,MJ),{h:Ta,s:mU,l:cv,a:XS}}function xV(kU,mU){if(0===mU.mode)return WM(kU,mU);const gK=ka(mU);return Cd(kU,Object.assign(Object.assign({},mU),{mode:0}),Oe,gK)}function hR({h:kU,s:mU,l:gK,a:XS},wY,MQ){const ka=undefined,wU=undefined;let Ta=kU,cv=mU;(gK<.2||mU<.24)&&(gK<.5?(Ta=wY.h,cv=wY.s):(Ta=MQ.h,cv=MQ.s));const So=undefined;return{h:Ta,s:cv,l:(0,at.scale)(gK,0,1,.5,.2),a:XS}}function EN(kU,mU){if(0===mU.mode)return WM(kU,mU);const gK=ka(mU),XS=MQ(mU);return Cd(kU,Object.assign(Object.assign({},mU),{mode:0}),hR,gK,XS)}function Qq(kU,mU){return ys(kU,mU)}function gf(kU,mU){return ys(kU,mU)}gK.modifyForegroundColor=xV,gK.modifyBorderColor=EN,gK.modifyShadowColor=Qq,gK.modifyGradientColor=gf},{"../utils/color":33,"../utils/math":36,"./utils/matrix":27}],23:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.getSVGReverseFilterMatrixValue=gK.getSVGFilterMatrixValue=gK.createSVGFilterStylesheet=void 0;const XS=kU("./utils/matrix"),at=kU("./css-filter"),wY=kU("../utils/platform"),MQ=kU("../const");function ka(kU,mU,gK,XS,ka){let Ta,Hn;return wY.isFirefox?(Ta=wU(cv(kU)),Hn=wU(So())):(Ta=`url(#${MQ.MISC_PREFIX}-filter)`,Hn=`url(#${MQ.MISC_PREFIX}-reverse-filter)`),(0,at.cssFilterStyleSheetTemplate)(Ta,Hn,kU,mU,gK,XS,ka)}function wU(kU){const mU=`${MQ.MISC_PREFIX}-filter`,gK=['<svg xmlns="http://www.w3.org/2000/svg">',`<filter id="${mU}" style="color-interpolation-filters: sRGB;">`,`<feColorMatrix type="matrix" values="${kU}" />`,"</filter>","</svg>"].join("");return`url(data:image/svg+xml;base64,${btoa(gK)}#${mU})`}function Ta(kU){return kU.slice(0,4).map((kU=>kU.map((kU=>kU.toFixed(3))).join(" "))).join(" ")}function cv(kU){return Ta((0,XS.createFilterMatrix)(kU))}function So(){return Ta(XS.Matrix.invertNHue())}gK.createSVGFilterStylesheet=ka,gK.getSVGFilterMatrixValue=cv,gK.getSVGReverseFilterMatrixValue=So},{"../const":1,"../utils/platform":40,"./css-filter":21,"./utils/matrix":27}],24:[function(kU,mU,gK){"use strict";function XS(kU){const mU=[];return mU.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*="vjs-"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*="mu-"], .glyphicon, .icon) {'),kU.useFont&&kU.fontFamily&&mU.push(`  font-family: ${kU.fontFamily} !important;`),kU.textStroke>0&&(mU.push(`  -webkit-text-stroke: ${kU.textStroke}px !important;`),mU.push(`  text-stroke: ${kU.textStroke}px !important;`)),mU.push("}"),mU.join("\n")}Object.defineProperty(gK,"__esModule",{value:!0}),gK.createTextStyle=void 0,gK.createTextStyle=XS},{}],25:[function(kU,mU,gK){"use strict";var XS;Object.defineProperty(gK,"__esModule",{value:!0}),gK.ThemeEngine=void 0,function(kU){kU["cssFilter"]="cssFilter",kU["svgFilter"]="svgFilter",kU["staticTheme"]="staticTheme",kU["dynamicTheme"]="dynamicTheme"}(XS=gK.ThemeEngine||(gK.ThemeEngine={}))},{}],26:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.formatSitesFixesConfig=void 0;const XS=kU("../../utils/array");function at(kU,mU){const gK=[];return kU.forEach(((at,wY)=>{(0,XS.push)(gK,at.url),mU.props.forEach((kU=>{const XS=mU.getPropCommandName(kU),wY=at[kU];if(mU.shouldIgnoreProp(kU,wY))return;gK.push(""),gK.push(XS);const MQ=mU.formatPropValue(kU,wY);MQ&&gK.push(MQ)})),wY<kU.length-1&&(gK.push(""),gK.push("=".repeat(32)),gK.push(""))})),gK.push(""),gK.join("\n")}gK.formatSitesFixesConfig=at},{"../../utils/array":30}],27:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.Matrix=gK.applyColorMatrix=gK.createFilterMatrix=void 0;const XS=kU("../../utils/math");function at(kU){let mU=gK.Matrix.identity();return 0!==kU.sepia&&(mU=(0,XS.multiplyMatrices)(mU,gK.Matrix.sepia(kU.sepia/100))),0!==kU.grayscale&&(mU=(0,XS.multiplyMatrices)(mU,gK.Matrix.grayscale(kU.grayscale/100))),100!==kU.contrast&&(mU=(0,XS.multiplyMatrices)(mU,gK.Matrix.contrast(kU.contrast/100))),100!==kU.brightness&&(mU=(0,XS.multiplyMatrices)(mU,gK.Matrix.brightness(kU.brightness/100))),1===kU.mode&&(mU=(0,XS.multiplyMatrices)(mU,gK.Matrix.invertNHue())),mU}function wY([kU,mU,gK],at){const wY=[[kU/255],[mU/255],[gK/255],[1],[1]],MQ=(0,XS.multiplyMatrices)(at,wY);return[0,1,2].map((kU=>(0,XS.clamp)(Math.round(255*MQ[kU][0]),0,255)))}gK.createFilterMatrix=at,gK.applyColorMatrix=wY,gK.Matrix={identity:()=>[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],invertNHue:()=>[[.333,-.667,-.667,0,1],[-.667,.333,-.667,0,1],[-.667,-.667,.333,0,1],[0,0,0,1,0],[0,0,0,0,1]],brightness:kU=>[[kU,0,0,0,0],[0,kU,0,0,0],[0,0,kU,0,0],[0,0,0,1,0],[0,0,0,0,1]],contrast(kU){const mU=(1-kU)/2;return[[kU,0,0,0,mU],[0,kU,0,0,mU],[0,0,kU,0,mU],[0,0,0,1,0],[0,0,0,0,1]]},sepia:kU=>[[.393+.607*(1-kU),.769-.769*(1-kU),.189-.189*(1-kU),0,0],[.349-.349*(1-kU),.686+.314*(1-kU),.168-.168*(1-kU),0,0],[.272-.272*(1-kU),.534-.534*(1-kU),.131+.869*(1-kU),0,0],[0,0,0,1,0],[0,0,0,0,1]],grayscale:kU=>[[.2126+.7874*(1-kU),.7152-.7152*(1-kU),.0722-.0722*(1-kU),0,0],[.2126-.2126*(1-kU),.7152+.2848*(1-kU),.0722-.0722*(1-kU),0,0],[.2126-.2126*(1-kU),.7152-.7152*(1-kU),.0722+.9278*(1-kU),0,0],[0,0,0,1,0],[0,0,0,0,1]]}},{"../../utils/math":36}],28:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.isURLInSiteList=gK.indexSiteListConfig=gK.getSitesFixesFor=gK.indexSitesFixesConfig=gK.getDomain=gK.parseSitesFixesConfig=void 0;const XS=kU("../../utils/url"),at=kU("../../utils/text"),wY=6e4;function MQ(kU,mU){const gK=[],XS=undefined;return kU.replace(/\r/g,"").split(/^\s*={2,}\s*$/gm).forEach((kU=>{const XS=kU.split("\n"),wY=[];if(XS.forEach(((kU,mU)=>{kU.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&wY.push(mU)})),0===wY.length)return;const MQ={url:(0,at.parseArray)(XS.slice(0,wY[0]).join("\n"))};wY.forEach(((kU,gK)=>{const at=XS[kU].trim(),ka=XS.slice(kU+1,gK===wY.length-1?XS.length:wY[gK+1]).join("\n"),wU=mU.getCommandPropName(at);if(!wU)return;const Ta=mU.parseCommandValue(at,ka);MQ[wU]=Ta})),gK.push(MQ)})),gK}function ka(kU){try{return new URL(kU).hostname.toLowerCase()}catch(mU){return kU.split("/")[0].toLowerCase()}}function wU(kU){return kU.map((([kU,mU])=>{const gK=kU.toString(36),XS=mU.toString(36);return"0".repeat(4-gK.length)+gK+"0".repeat(3-XS.length)+XS})).join("")}function Ta(kU,mU){const gK=(4+3)*mU,XS=parseInt(kU.substring(gK+0,gK+4),36),at=undefined;return[XS,XS+parseInt(kU.substring(gK+4,gK+4+3),36)]}function cv(kU,mU,gK){kU[mU]?kU[mU].includes(gK)||kU[mU].push(gK):kU[mU]=[gK]}function So(kU){const mU=kU.lastIndexOf("*"),gK=kU.substring(mU+2);if(mU<0||0===gK.length)return kU.split(".");const XS=[gK],at=undefined;return kU.substring(0,mU).split(".").filter(Boolean).forEach((kU=>XS.concat(kU))),XS}function Hn(kU){const mU={},gK={},at=[],wY={},MQ=[];for(let gK=0;gK<kU.length;gK++){const wU=kU[gK],Ta=new Set;for(const kU of wU){const wY=ka(kU);if((0,XS.isFullyQualifiedDomain)(wY))cv(mU,wY,gK);else{if(!(0,XS.isFullyQualifiedDomainWildcard)(wY)){at.push(gK);break}{const kU=So(wY);MQ.push({labels:kU,index:gK}),kU.forEach((kU=>Ta.add(kU)))}}}for(const kU of Ta)wY[kU]?wY[kU]++:wY[kU]=1}for(const{labels:kU,index:mU}of MQ){let XS=kU[0];for(const mU of kU)wY[mU]<wY[XS]&&(XS=mU);cv(gK,XS,mU)}return{domains:mU,domainLabels:gK,nonstandard:at}}function Cd(kU,mU,gK,XS,wY){const MQ=undefined,ka=kU.substring(gK,XS).split("\n"),wU=[];if(ka.forEach(((kU,mU)=>{kU.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&wU.push(mU)})),0===wU.length)return;mU.push([gK,XS-gK]);const Ta=(0,at.parseArray)(ka.slice(0,wU[0]).join("\n"));wY.push(Ta)}function AH(kU){const mU=[],gK=[];let XS=0;const at=/^\s*={2,}\s*$/gm;let wY;for(;wY=at.exec(kU);){const at=wY.index,MQ=wY.index+wY[0].length;Cd(kU,gK,XS,at,mU),XS=MQ}return Cd(kU,gK,XS,kU.length,mU),{urls:mU,offsets:gK}}function aF(kU){const{urls:mU,offsets:gK}=AH(kU),{domains:XS,domainLabels:at,nonstandard:wY}=Hn(mU);return{offsets:wU(gK),domains:XS,domainLabels:at,nonstandard:wY,cacheDomainIndex:{},cacheSiteFix:{},cacheCleanupTimer:null}}function WM(kU,mU,gK){const at=ka(kU),wY=at.split(".");let MQ=[];"*"in mU.domainLabels&&(MQ=MQ.concat(mU.domainLabels["*"]));for(const kU of wY)if(kU in mU.domainLabels){const wY=mU.domainLabels[kU];for(const kU of wY){const mU=gK(kU);for(const gK of mU){const mU=ka(gK);(0,XS.isFullyQualifiedDomainWildcard)(mU)&&(0,XS.fullyQualifiedDomainMatchesWildcard)(mU,at)&&MQ.push(kU)}}}for(let kU=0;kU<wY.length;kU++){const gK=wY.slice(kU).join(".");gK in mU.domains&&(MQ=MQ.concat(mU.domains[gK])),gK in mU.domainLabels&&(MQ=MQ.concat(mU.domainLabels[gK]))}return MQ=MQ.concat(mU.nonstandard),MQ=Array.from(new Set(MQ)),MQ}function RA(kU,mU,gK,XS){if(XS in mU.cacheSiteFix)return mU.cacheSiteFix[XS];const[at,wY]=Ta(mU.offsets,XS),ka=undefined,wU=MQ(kU.substring(at,wY),gK)[0];return mU.cacheSiteFix[XS]=wU,wU}function Gm(kU){clearTimeout(kU.cacheCleanupTimer),kU.cacheCleanupTimer=setTimeout((()=>{kU.cacheCleanupTimer=null,kU.cacheDomainIndex={},kU.cacheSiteFix={}}),wY)}function NJ(kU,mU,gK,XS){const at=[],wY=ka(kU);gK.cacheDomainIndex[wY]||(gK.cacheDomainIndex[wY]=WM(wY,gK,(kU=>RA(mU,gK,XS,kU).url)));const MQ=gK.cacheDomainIndex[wY];for(const kU of MQ){const wY=RA(mU,gK,XS,kU);at.push(wY)}return Gm(gK),at}function ys(kU){const mU=(0,at.parseArray)(kU),gK=mU.map((kU=>[kU])),{domains:XS,domainLabels:wY,nonstandard:MQ}=Hn(gK);return{domains:XS,domainLabels:wY,nonstandard:MQ,urls:mU}}function MJ(kU,mU){const gK=undefined,XS=WM(ka(kU),mU,(kU=>[mU.urls[kU]])),at=[];for(const kU of XS)at.push(mU.urls[kU]);return at}function cE(kU,mU){if(null===mU)return!1;const gK=MJ(kU,mU);return(0,XS.isURLInList)(kU,gK)}gK.parseSitesFixesConfig=MQ,gK.getDomain=ka,gK.indexSitesFixesConfig=aF,gK.getSitesFixesFor=NJ,gK.indexSiteListConfig=ys,gK.isURLInSiteList=cE},{"../../utils/text":41,"../../utils/url":45}],29:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.PREFIX=void 0,gK.PREFIX="dm"},{}],30:[function(kU,mU,gK){"use strict";function XS(kU){return null!=kU.length}function at(kU,mU){if(XS(kU))for(let gK=0,XS=kU.length;gK<XS;gK++)mU(kU[gK]);else for(const gK of kU)mU(gK)}function wY(kU,mU){at(mU,(mU=>kU.push(mU)))}function MQ(kU){const mU=[];for(let gK=0,XS=kU.length;gK<XS;gK++)mU.push(kU[gK]);return mU}Object.defineProperty(gK,"__esModule",{value:!0}),gK.toArray=gK.push=gK.forEach=void 0,gK.forEach=at,gK.push=wY,gK.toArray=MQ},{}],31:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0});class XS{constructor(){this.queue=[],this.timerId=null,this.frameDuration=1e3/60}addToQueue(kU){this.queue.push(kU),this.startQueue()}stopQueue(){null!==this.timerId&&(cancelAnimationFrame(this.timerId),this.timerId=null),this.queue=[]}startQueue(){this.timerId||(this.timerId=requestAnimationFrame((()=>{this.timerId=null;const kU=Date.now();let mU;for(;mU=this.queue.shift();)if(mU(),Date.now()-kU>=this.frameDuration){this.startQueue();break}})))}}gK.default=XS},{}],32:[function(kU,mU,gK){"use strict";var XS;Object.defineProperty(gK,"__esModule",{value:!0}),gK.AutomationMode=void 0,function(kU){kU["NONE"]="",kU["TIME"]="time",kU["SYSTEM"]="system",kU["LOCATION"]="location"}(XS=gK.AutomationMode||(gK.AutomationMode={}))},{}],33:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.getSRGBLightness=gK.lowerCalcExpression=gK.parse=gK.hslToString=gK.rgbToHexString=gK.rgbToString=gK.rgbToHSL=gK.hslToRGB=gK.clearColorCache=gK.parseToHSLWithCache=gK.parseColorWithCache=void 0;const XS=kU("./math-eval"),at=kU("./text"),wY=new Map,MQ=new Map;function ka(kU){if(kU=kU.trim(),MQ.has(kU))return MQ.get(kU);kU.includes("calc(")&&(kU=az(kU));const mU=NJ(kU);return mU&&MQ.set(kU,mU),mU}function wU(kU){if(wY.has(kU))return wY.get(kU);const mU=ka(kU);if(!mU)return null;const gK=So(mU);return wY.set(kU,gK),gK}function Ta(){wY.clear(),MQ.clear()}function cv({h:kU,s:mU,l:gK,a:XS=1}){if(0===mU){const[kU,mU,at]=[gK,gK,gK].map((kU=>Math.round(255*kU)));return{r:kU,g:at,b:mU,a:XS}}const at=(1-Math.abs(2*gK-1))*mU,wY=at*(1-Math.abs(kU/60%2-1)),MQ=gK-at/2,[ka,wU,Ta]=(kU<60?[at,wY,0]:kU<120?[wY,at,0]:kU<180?[0,at,wY]:kU<240?[0,wY,at]:kU<300?[wY,0,at]:[at,0,wY]).map((kU=>Math.round(255*(kU+MQ))));return{r:ka,g:wU,b:Ta,a:XS}}function So({r:kU,g:mU,b:gK,a:XS=1}){const at=kU/255,wY=mU/255,MQ=gK/255,ka=Math.max(at,wY,MQ),wU=Math.min(at,wY,MQ),Ta=ka-wU,cv=(ka+wU)/2;if(0===Ta)return{h:0,s:0,l:cv,a:XS};let So=60*(ka===at?(wY-MQ)/Ta%6:ka===wY?(MQ-at)/Ta+2:(at-wY)/Ta+4);So<0&&(So+=360);const Hn=undefined;return{h:So,s:Ta/(1-Math.abs(2*cv-1)),l:cv,a:XS}}function Hn(kU,mU=0){const gK=kU.toFixed(mU);if(0===mU)return gK;const XS=gK.indexOf(".");if(XS>=0){const kU=gK.match(/0+$/);if(kU)return kU.index===XS+1?gK.substring(0,XS):gK.substring(0,kU.index)}return gK}function Cd(kU){const{r:mU,g:gK,b:XS,a:at}=kU;return null!=at&&at<1?`rgba(${Hn(mU)}, ${Hn(gK)}, ${Hn(XS)}, ${Hn(at,2)})`:`rgb(${Hn(mU)}, ${Hn(gK)}, ${Hn(XS)})`}function AH({r:kU,g:mU,b:gK,a:XS}){return`#${(null!=XS&&XS<1?[kU,mU,gK,Math.round(255*XS)]:[kU,mU,gK]).map((kU=>`${kU<16?"0":""}${kU.toString(16)}`)).join("")}`}function aF(kU){const{h:mU,s:gK,l:XS,a:at}=kU;return null!=at&&at<1?`hsla(${Hn(mU)}, ${Hn(100*gK)}%, ${Hn(100*XS)}%, ${Hn(at,2)})`:`hsl(${Hn(mU)}, ${Hn(100*gK)}%, ${Hn(100*XS)}%)`}gK.parseColorWithCache=ka,gK.parseToHSLWithCache=wU,gK.clearColorCache=Ta,gK.hslToRGB=cv,gK.rgbToHSL=So,gK.rgbToString=Cd,gK.rgbToHexString=AH,gK.hslToString=aF;const WM=/^rgba?\([^\(\)]+\)$/,RA=/^hsla?\([^\(\)]+\)$/,Gm=/^#[0-9a-f]+$/i;function NJ(kU){const mU=kU.trim().toLowerCase();return mU.match(WM)?xV(mU):mU.match(RA)?Qq(mU):mU.match(Gm)?gf(mU):w.has(mU)?pB(mU):jM.has(mU)?ie(mU):"transparent"===kU?{r:0,g:0,b:0,a:0}:null}function ys(kU){const mU=[];let gK=0,XS=!1;const at=kU.indexOf("(");kU=kU.substring(at+1,kU.length-1);for(let at=0;at<kU.length;at++){const wY=kU[at];wY>="0"&&wY<="9"||"."===wY||"+"===wY||"-"===wY?XS=!0:!XS||" "!==wY&&","!==wY&&"/"!==wY?XS||(gK=at+1):(mU.push(kU.substring(gK,at)),XS=!1,gK=at+1)}return XS&&mU.push(kU.substring(gK,kU.length)),mU}function MJ(kU,mU,gK){const XS=ys(kU),at=Object.entries(gK),wY=undefined;return XS.map((kU=>kU.trim())).map(((kU,gK)=>{let XS;const wY=at.find((([mU])=>kU.endsWith(mU)));return XS=wY?parseFloat(kU.substring(0,kU.length-wY[0].length))/wY[1]*mU[gK]:parseFloat(kU),mU[gK]>1?Math.round(XS):XS}))}gK.parse=NJ;const cE=[255,255,255,1],Oe={"%":100};function xV(kU){const[mU,gK,XS,at=1]=MJ(kU,cE,Oe);return{r:mU,g:gK,b:XS,a:at}}const hR=[360,1,1,1],EN={"%":100,deg:360,rad:2*Math.PI,turn:1};function Qq(kU){const[mU,gK,XS,at=1]=MJ(kU,hR,EN);return cv({h:mU,s:gK,l:XS,a:at})}function gf(kU){const mU=kU.substring(1);switch(mU.length){case 3:case 4:{const[kU,gK,XS]=[0,1,2].map((kU=>parseInt(`${mU[kU]}${mU[kU]}`,16))),at=undefined;return{r:kU,g:gK,b:XS,a:3===mU.length?1:parseInt(`${mU[3]}${mU[3]}`,16)/255}}case 6:case 8:{const[kU,gK,XS]=[0,2,4].map((kU=>parseInt(mU.substring(kU,kU+2),16))),at=undefined;return{r:kU,g:gK,b:XS,a:6===mU.length?1:parseInt(mU.substring(6,8),16)/255}}}return null}function pB(kU){const mU=w.get(kU);return{r:mU>>16&255,g:mU>>8&255,b:mU>>0&255,a:1}}function ie(kU){const mU=jM.get(kU);return{r:mU>>16&255,g:mU>>8&255,b:mU>>0&255,a:1}}function az(kU){let mU=0;const gK=(mU,gK,XS)=>{kU=kU.substring(0,mU)+XS+kU.substring(gK)};for(;-1!==(mU=kU.indexOf("calc("));){const wY=(0,at.getParenthesesRange)(kU,mU);if(!wY)break;let MQ=kU.slice(wY.start+1,wY.end-1);const ka=MQ.includes("%");MQ=MQ.split("%").join("");const wU=Math.round((0,XS.evalMath)(MQ));gK(wY.start-4,wY.end,wU+(ka?"%":""))}return kU}gK.lowerCalcExpression=az;const w=new Map(Object.entries({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074})),jM=new Map(Object.entries({ActiveBorder:3906044,ActiveCaption:0,AppWorkspace:11184810,Background:6513614,ButtonFace:16777215,ButtonHighlight:15329769,ButtonShadow:10461343,ButtonText:0,CaptionText:0,GrayText:8355711,Highlight:11720703,HighlightText:0,InactiveBorder:16777215,InactiveCaption:16777215,InactiveCaptionText:0,InfoBackground:16514245,InfoText:0,Menu:16185078,MenuText:16777215,Scrollbar:11184810,ThreeDDarkShadow:0,ThreeDFace:12632256,ThreeDHighlight:16777215,ThreeDLightShadow:16777215,ThreeDShadow:0,Window:15527148,WindowFrame:11184810,WindowText:0,"-webkit-focus-ring-color":15046400}).map((([kU,mU])=>[kU.toLowerCase(),mU])));function yl(kU,mU,gK){return(.2126*kU+.7152*mU+.0722*gK)/255}gK.getSRGBLightness=yl},{"./math-eval":35,"./text":41}],34:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.compareIPV6=gK.isIPV6=void 0;const XS=/\[[0-9:a-zA-Z]+?\]/;function at(kU){const mU=XS.exec(kU);if(!mU)return!1;const gK=kU.indexOf("?");return!(gK>=0&&mU.index>gK)}gK.isIPV6=at;const wY=/\[.*?\](\:\d+)?/;function MQ(kU,mU){const gK=undefined,XS=undefined;return kU.match(wY)[0]===mU.match(wY)[0]}gK.compareIPV6=MQ},{}],35:[function(kU,mU,gK){"use strict";function XS(kU){const mU=[],gK=[];let XS;for(let at=0,MQ=kU.length;at<MQ;at++){const MQ=kU[at];if(MQ&&" "!==MQ){if(wY.has(MQ)){const kU=wY.get(MQ);for(;gK.length;){const XS=wY.get(gK[0]);if(!XS)break;if(!kU.lessOrEqualThan(XS))break;mU.push(gK.shift())}gK.unshift(MQ)}else!XS||wY.has(XS)?mU.push(MQ):mU[mU.length-1]+=MQ;XS=MQ}}mU.push(...gK);const at=[];for(let kU=0,gK=mU.length;kU<gK;kU++){const gK=wY.get(mU[kU]);if(gK){const kU=at.splice(0,2);at.push(gK.exec(kU[1],kU[0]))}else at.unshift(parseFloat(mU[kU]))}return at[0]}Object.defineProperty(gK,"__esModule",{value:!0}),gK.evalMath=void 0,gK.evalMath=XS;class at{constructor(kU,mU){this.precendce=kU,this.execMethod=mU}exec(kU,mU){return this.execMethod(kU,mU)}lessOrEqualThan(kU){return this.precendce<=kU.precendce}}const wY=new Map([["+",new at(1,((kU,mU)=>kU+mU))],["-",new at(1,((kU,mU)=>kU-mU))],["*",new at(2,((kU,mU)=>kU*mU))],["/",new at(2,((kU,mU)=>kU/mU))]])},{}],36:[function(kU,mU,gK){"use strict";function XS(kU,mU,gK,XS,at){return(kU-mU)*(at-XS)/(gK-mU)+XS}function at(kU,mU,gK){return Math.min(gK,Math.max(mU,kU))}function wY(kU,mU){const gK=[];for(let XS=0,at=kU.length;XS<at;XS++){gK[XS]=[];for(let at=0,wY=mU[0].length;at<wY;at++){let wY=0;for(let gK=0,MQ=kU[0].length;gK<MQ;gK++)wY+=kU[XS][gK]*mU[gK][at];gK[XS][at]=wY}}return gK}Object.defineProperty(gK,"__esModule",{value:!0}),gK.multiplyMatrices=gK.clamp=gK.scale=void 0,gK.scale=XS,gK.clamp=at,gK.multiplyMatrices=wY},{}],37:[function(kU,mU,gK){"use strict";var XS;Object.defineProperty(gK,"__esModule",{value:!0}),gK.MessageType=void 0,function(kU){kU["UI_GET_DATA"]="ui-get-data",kU["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",kU["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",kU["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",kU["UI_CHANGE_SETTINGS"]="ui-change-settings",kU["UI_SET_THEME"]="ui-set-theme",kU["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",kU["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",kU["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",kU["UI_LOAD_CONFIG"]="ui-load-config",kU["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",kU["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",kU["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",kU["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",kU["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",kU["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",kU["UI_SAVE_FILE"]="ui-save-file",kU["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",kU["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",kU["BG_CHANGES"]="bg-changes",kU["BG_ADD_CSS_FILTER"]="bg-add-css-filter",kU["BG_ADD_STATIC_THEME"]="bg-add-static-theme",kU["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",kU["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",kU["BG_EXPORT_CSS"]="bg-export-css",kU["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",kU["BG_CLEAN_UP"]="bg-clean-up",kU["BG_RELOAD"]="bg-reload",kU["BG_FETCH_RESPONSE"]="bg-fetch-response",kU["BG_UI_UPDATE"]="bg-ui-update",kU["BG_CSS_UPDATE"]="bg-css-update",kU["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",kU["CS_FRAME_CONNECT"]="cs-frame-connect",kU["CS_FRAME_FORGET"]="cs-frame-forget",kU["CS_FRAME_FREEZE"]="cs-frame-freeze",kU["CS_FRAME_RESUME"]="cs-frame-resume",kU["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",kU["CS_FETCH"]="cs-fetch",kU["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",kU["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",kU["CS_LOG"]="cs-log"}(XS=gK.MessageType||(gK.MessageType={}))},{}],38:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.loadAsText=gK.readResponseAsDataURL=gK.loadAsDataURL=void 0;const XS=kU("./platform");async function at(kU,mU,gK){const at=await fetch(kU,{cache:"force-cache",credentials:"omit",referrer:gK});if(XS.isFirefox&&"text/css"===mU&&kU.startsWith("moz-extension://")&&kU.endsWith(".css"))return at;if(mU&&!at.headers.get("Content-Type").startsWith(mU))throw new Error(`Mime type mismatch when loading ${kU}`);if(!at.ok)throw new Error(`Unable to load ${kU} ${at.status} ${at.statusText}`);return at}async function wY(kU,mU){const gK=await at(kU,mU);return await MQ(gK)}async function MQ(kU){const mU=await kU.blob(),gK=undefined;return await new Promise((kU=>{const gK=new FileReader;gK.onloadend=()=>kU(gK.result),gK.readAsDataURL(mU)}))}async function ka(kU,mU,gK){const XS=await at(kU,mU,gK);return await XS.text()}gK.loadAsDataURL=wY,gK.readResponseAsDataURL=MQ,gK.loadAsText=ka},{"./platform":40}],39:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.parseGradient=void 0;const XS=kU("./text"),at="gradient".length,wY="conic-",MQ=wY.length,ka="radial-",wU="linear-";function Ta(kU){const mU=[];let gK=0,Ta=wY.length;for(;-1!==(gK=kU.indexOf("gradient",Ta));){let cv;if([wU,ka,wY].find((mU=>{if(gK-mU.length>=0){const XS=undefined;if(kU.substring(gK-mU.length,gK)===mU)return"repeating"===kU.slice(gK-mU.length-10,gK-mU.length-1)?(cv=`repeating-${mU}gradient`,!0):"-webkit"===kU.slice(gK-mU.length-8,gK-mU.length-1)?(cv=`-webkit-${mU}gradient`,!0):(cv=`${mU}gradient`,!0)}})),!cv)break;const{start:So,end:Hn}=(0,XS.getParenthesesRange)(kU,gK+at),Cd=kU.substring(So+1,Hn-1);Ta=Hn+1+MQ,mU.push({typeGradient:cv,match:Cd,offset:cv.length+2,index:gK-cv.length+at,hasComma:!0})}return mU.length&&(mU[mU.length-1].hasComma=!1),mU}gK.parseGradient=Ta},{"./text":41}],40:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.isCSSColorSchemePropSupported=gK.isFetchSupported=gK.isXMLHttpRequestSupported=gK.compareChromeVersions=gK.isDefinedSelectorSupported=gK.firefoxVersion=gK.chromiumVersion=gK.isNonPersistent=gK.isMatchMediaChangeEventListenerBuggy=gK.isMatchMediaChangeEventListenerSupported=gK.isShadowDomSupported=gK.isMobile=gK.isMacOS=gK.isWindows=gK.isSafari=gK.isEdge=gK.isOpera=gK.isYaBrowser=gK.isVivaldi=gK.isFirefox=gK.isThunderbird=gK.isChromium=void 0;const XS="undefined"!=typeof navigator,at=XS?navigator.userAgentData&&Array.isArray(navigator.userAgentData.brands)?navigator.userAgentData.brands.map((kU=>`${kU.brand.toLowerCase()} ${kU.version}`)).join(" "):navigator.userAgent.toLowerCase():"some useragent",wY=XS?navigator.userAgentData&&"string"==typeof navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase():navigator.platform.toLowerCase():"some platform";function MQ(kU,mU){const gK=kU.split(".").map((kU=>parseInt(kU))),XS=mU.split(".").map((kU=>parseInt(kU)));for(let kU=0;kU<gK.length;kU++)if(gK[kU]!==XS[kU])return gK[kU]<XS[kU]?-1:1;return 0}gK.isChromium=!0,gK.isThunderbird=!1,gK.isFirefox=!1,gK.isVivaldi=!1,gK.isYaBrowser=!1,gK.isOpera=!1,gK.isEdge=!1,gK.isSafari=!1,gK.isWindows=wY.startsWith("win"),gK.isMacOS=wY.startsWith("mac"),gK.isMobile=XS&&navigator.userAgentData?navigator.userAgentData.mobile:at.includes("mobile"),gK.isShadowDomSupported="function"==typeof ShadowRoot,gK.isMatchMediaChangeEventListenerSupported=!0,gK.isMatchMediaChangeEventListenerBuggy=XS&&navigator.userAgentData&&["Linux","Android"].includes(navigator.userAgentData.platform)||wY.startsWith("linux"),gK.isNonPersistent=!0,gK.chromiumVersion=(()=>{const kU=at.match(/chrom(?:e|ium)(?:\/| )([^ ]+)/);return kU&&kU[1]?kU[1]:""})(),gK.firefoxVersion=(()=>{const kU=at.match(/(?:firefox|librewolf)(?:\/| )([^ ]+)/);return kU&&kU[1]?kU[1]:""})(),gK.isDefinedSelectorSupported=(()=>{try{return document.querySelector(":defined"),!0}catch(kU){return!1}})(),gK.compareChromeVersions=MQ,gK.isXMLHttpRequestSupported="function"==typeof XMLHttpRequest,gK.isFetchSupported="function"==typeof fetch,gK.isCSSColorSchemePropSupported=!0},{}],41:[function(kU,mU,gK){"use strict";function XS(kU,mU){if(!isFinite(mU))throw new Error(`Wrong char index ${mU}`);let gK="",XS=0,at,wY=0;do{XS++,at=wY,wY=kU.indexOf("\n",at+1)}while(wY>=0&&wY<=mU);const MQ=mU-at;return gK+=`line ${XS}, column ${MQ}`,gK+="\n",mU<kU.length?gK+=kU.substring(at+1,wY):gK+=kU.substring(kU.lastIndexOf("\n")+1),gK+="\n",gK+=`${new Array(MQ).join("-")}^`,gK}function at(kU,mU){const gK=Math.min(kU.length,mU.length);for(let XS=0;XS<gK;XS++)if(kU[XS]!==mU[XS])return XS;return kU.length!==mU.length?gK:-1}function wY(kU){return kU.replace(/\r/g,"").split("\n").map((kU=>kU.trim())).filter((kU=>kU))}function MQ(kU){return kU.concat("").join("\n")}function ka(kU,mU,gK=0){const XS=[];let at;for(;at=kU.exec(mU);)XS.push(at[gK]);return XS}function wU(kU){return 2*kU.length}function Ta(kU){function mU(kU){return kU.replace(/^\s+/,"")}function gK(kU){return 0===kU?"":" ".repeat(4*kU)}if(kU.length<5e4){const mU=/[^{}]+{\s*}/;for(;mU.test(kU);)kU=kU.replace(mU,"")}const XS=kU.replace(/\s{2,}/g," ").replace(/\{/g,"{\n").replace(/\}/g,"\n}\n").replace(/\;(?![^\(|\"]*(\)|\"))/g,";\n").replace(/\,(?![^\(|\"]*(\)|\"))/g,",\n").replace(/\n\s*\n/g,"\n").split("\n");let at=0;const wY=[];for(let kU=0,MQ=XS.length;kU<MQ;kU++){const MQ=`${XS[kU]}\n`;MQ.includes("{")?wY.push(gK(at++)+mU(MQ)):MQ.includes("}")?wY.push(gK(--at)+mU(MQ)):wY.push(gK(at)+mU(MQ))}return wY.join("").trim()}function cv(kU,mU=0){const gK=kU.length;let XS=0,at=-1;for(let wY=mU;wY<gK;wY++)if(0===XS){const mU=kU.indexOf("(",wY);if(mU<0)break;at=mU,XS++,wY=mU}else{const mU=kU.indexOf(")",wY);if(mU<0)break;const gK=kU.indexOf("(",wY);if(gK<0||mU<gK){if(XS--,0===XS)return{start:at,end:mU+1};wY=mU}else XS++,wY=gK}return null}Object.defineProperty(gK,"__esModule",{value:!0}),gK.getParenthesesRange=gK.formatCSS=gK.getStringSize=gK.getMatches=gK.formatArray=gK.parseArray=gK.getTextDiffIndex=gK.getTextPositionMessage=void 0,gK.getTextPositionMessage=XS,gK.getTextDiffIndex=at,gK.parseArray=wY,gK.formatArray=MQ,gK.getMatches=ka,gK.getStringSize=wU,gK.formatCSS=Ta,gK.getParenthesesRange=cv},{}],42:[function(kU,mU,gK){"use strict";function XS(kU){let mU=!1,gK=null,XS;const at=(...at)=>{XS=at,gK?mU=!0:(kU(...XS),gK=requestAnimationFrame((()=>{gK=null,mU&&(kU(...XS),mU=!1)})))},wY=()=>{cancelAnimationFrame(gK),mU=!1,gK=null};return Object.assign(at,{cancel:wY})}function at(){const kU=[];let mU=null;function gK(){let gK;for(;gK=kU.shift();)gK();mU=null}function XS(XS){kU.push(XS),mU||(mU=requestAnimationFrame(gK))}function at(){kU.splice(0),cancelAnimationFrame(mU),mU=null}return{add:XS,cancel:at}}Object.defineProperty(gK,"__esModule",{value:!0}),gK.createAsyncTasksQueue=gK.throttle=void 0,gK.throttle=XS,gK.createAsyncTasksQueue=at},{}],43:[function(kU,mU,gK){"use strict";function XS(kU){const mU=kU.split(":").slice(0,2),gK=kU.trim().toLowerCase(),XS=gK.endsWith("am")||gK.endsWith("a.m."),at=gK.endsWith("pm")||gK.endsWith("p.m.");let wY=mU.length>0?parseInt(mU[0]):0;(isNaN(wY)||wY>23)&&(wY=0),XS&&12===wY&&(wY=0),at&&wY<12&&(wY+=12);let MQ=mU.length>1?parseInt(mU[1]):0;return(isNaN(MQ)||MQ>59)&&(MQ=0),[wY,MQ]}function at(kU){return kU.split(":").map((kU=>parseInt(kU)))}function wY(kU,mU){return kU[0]===mU[0]&&kU[1]===mU[1]?0:kU[0]<mU[0]||kU[0]===mU[0]&&kU[1]<mU[1]?-1:1}function MQ(kU,mU,gK=new Date){const XS=at(kU),ka=at(mU),wU=[gK.getHours(),gK.getMinutes()];return wY(XS,ka)>0?MQ(mU,kU,gK):0===wY(XS,ka)?null:wY(wU,XS)<0?(gK.setHours(XS[0]),gK.setMinutes(XS[1]),gK.setSeconds(0),gK.setMilliseconds(0),gK.getTime()):wY(wU,ka)<0?(gK.setHours(ka[0]),gK.setMinutes(ka[1]),gK.setSeconds(0),gK.setMilliseconds(0),gK.getTime()):new Date(gK.getFullYear(),gK.getMonth(),gK.getDate()+1,XS[0],XS[1]).getTime()}function ka(kU,mU,gK=new Date){const XS=at(kU),MQ=at(mU),ka=[gK.getHours(),gK.getMinutes()];return wY(XS,MQ)>0?wY(XS,ka)<=0||wY(ka,MQ)<0:wY(XS,ka)<=0&&wY(ka,MQ)<0}function wU(kU,mU,gK){return mU<kU?gK<=mU||kU<=gK:kU<gK&&gK<mU}function Ta(kU){let mU=0;return kU.seconds&&(mU+=1e3*kU.seconds),kU.minutes&&(mU+=60*kU.minutes*1e3),kU.hours&&(mU+=60*kU.hours*60*1e3),kU.days&&(mU+=24*kU.days*60*60*1e3),mU}function cv(kU){return Ta(kU)/1e3/60}function So(kU,mU,gK){const XS=Date.UTC(gK.getUTCFullYear(),0,0,0,0,0,0),at=Ta({days:1}),wY=Math.floor((gK.getTime()-XS)/at),MQ=90.83333333333333,ka=Math.PI/180,wU=180/Math.PI,cv=mU/15;function So(mU){const gK=wY+((mU?6:18)-cv)/24,XS=.9856*gK-3.289;let at=XS+1.916*Math.sin(XS*ka)+.02*Math.sin(2*XS*ka)+282.634;at>360?at-=360:at<0&&(at+=360);let So=wU*Math.atan(.91764*Math.tan(at*ka));So>360?So-=360:So<0&&(So+=360);const Hn=undefined,Cd=undefined;So+=90*Math.floor(at/90)-90*Math.floor(So/90),So/=15;const AH=.39782*Math.sin(at*ka),aF=Math.cos(Math.asin(AH)),WM=(Math.cos(MQ*ka)-AH*Math.sin(kU*ka))/(aF*Math.cos(kU*ka));if(WM>1)return{alwaysDay:!1,alwaysNight:!0,time:0};if(WM<-1)return{alwaysDay:!0,alwaysNight:!1,time:0};const RA=undefined,Gm=undefined;let NJ=(mU?360-wU*Math.acos(WM):wU*Math.acos(WM))/15+So-.06571*gK-6.622-cv;return NJ>24?NJ-=24:NJ<0&&(NJ+=24),{alwaysDay:!1,alwaysNight:!1,time:Math.round(NJ*Ta({hours:1}))}}const Hn=So(!0),Cd=So(!1);return Hn.alwaysDay||Cd.alwaysDay?{alwaysDay:!0}:Hn.alwaysNight||Cd.alwaysNight?{alwaysNight:!0}:{sunriseTime:Hn.time,sunsetTime:Cd.time}}function Hn(kU,mU,gK=new Date){const XS=So(kU,mU,gK);if(XS.alwaysDay)return!1;if(XS.alwaysNight)return!0;const at=XS.sunriseTime,wY=undefined,MQ=undefined;return wU(XS.sunsetTime,at,gK.getUTCHours()*Ta({hours:1})+gK.getUTCMinutes()*Ta({minutes:1})+gK.getUTCSeconds()*Ta({seconds:1})+gK.getUTCMilliseconds())}function Cd(kU,mU,gK=new Date){const XS=So(kU,mU,gK);if(XS.alwaysDay)return gK.getTime()+Ta({days:1});if(XS.alwaysNight)return gK.getTime()+Ta({days:1});const[at,wY]=XS.sunriseTime<XS.sunsetTime?[XS.sunriseTime,XS.sunsetTime]:[XS.sunsetTime,XS.sunriseTime],MQ=gK.getUTCHours()*Ta({hours:1})+gK.getUTCMinutes()*Ta({minutes:1})+gK.getUTCSeconds()*Ta({seconds:1})+gK.getUTCMilliseconds();return MQ<=at?Date.UTC(gK.getUTCFullYear(),gK.getUTCMonth(),gK.getUTCDate(),0,0,0,at):MQ<=wY?Date.UTC(gK.getUTCFullYear(),gK.getUTCMonth(),gK.getUTCDate(),0,0,0,wY):Date.UTC(gK.getUTCFullYear(),gK.getUTCMonth(),gK.getUTCDate()+1,0,0,0,at)}Object.defineProperty(gK,"__esModule",{value:!0}),gK.nextTimeChangeAtLocation=gK.isNightAtLocation=gK.getDurationInMinutes=gK.getDuration=gK.isInTimeIntervalLocal=gK.nextTimeInterval=gK.parseTime=void 0,gK.parseTime=XS,gK.nextTimeInterval=MQ,gK.isInTimeIntervalLocal=ka,gK.getDuration=Ta,gK.getDurationInMinutes=cv,gK.isNightAtLocation=Hn,gK.nextTimeChangeAtLocation=Cd},{}],44:[function(kU,mU,gK){"use strict";function XS(kU){return(kU<16?"0":"")+kU.toString(16)}function at(){if("randomUUID"in crypto){const kU=crypto.randomUUID();return kU.substring(0,8)+kU.substring(9,13)+kU.substring(14,18)+kU.substring(19,23)+kU.substring(24)}return Array.from(crypto.getRandomValues(new Uint8Array(16))).map((kU=>XS(kU))).join("")}Object.defineProperty(gK,"__esModule",{value:!0}),gK.generateUID=void 0,gK.generateUID=at},{}],45:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.isLocalFile=gK.fullyQualifiedDomainMatchesWildcard=gK.isFullyQualifiedDomainWildcard=gK.isFullyQualifiedDomain=gK.isURLEnabled=gK.isPDF=gK.isURLMatched=gK.isURLInList=gK.compareURLPatterns=gK.getURLHostOrProtocol=gK.isRelativeHrefOnAbsolutePath=gK.getAbsoluteURL=gK.parseURL=gK.parsedURLCache=void 0;const XS=kU("./ipv6"),at=!1;let wY;function MQ(kU){return wY||(wY=document.createElement("a")),wY.href=kU,wY.href}function ka(kU,mU=null){const XS=`${kU}${mU?`;${mU}`:""}`;if(gK.parsedURLCache.has(XS))return gK.parsedURLCache.get(XS);if(mU){const at=new URL(kU,MQ(mU));return gK.parsedURLCache.set(XS,at),at}const at=new URL(MQ(kU));return gK.parsedURLCache.set(kU,at),at}function wU(kU,mU){if(mU.match(/^data\\?\:/))return mU;if(/^\/\//.test(mU))return`${location.protocol}${mU}`;const gK=ka(kU),XS=undefined;return ka(mU,gK.href).href}function Ta(kU){if(kU.startsWith("data:"))return!0;const mU=ka(kU);return mU.protocol===location.protocol&&(mU.hostname===location.hostname&&(mU.port===location.port&&mU.pathname===location.pathname))}function cv(kU){const mU=new URL(kU);return mU.host?mU.host:"file:"===mU.protocol?mU.pathname:mU.protocol}function So(kU,mU){return kU.localeCompare(mU)}function Hn(kU,mU){for(let gK=0;gK<mU.length;gK++)if(Cd(kU,mU[gK]))return!0;return!1}function Cd(kU,mU){const gK=(0,XS.isIPV6)(kU),at=(0,XS.isIPV6)(mU);if(gK&&at)return(0,XS.compareIPV6)(kU,mU);if(!gK&&!at){const gK=AH(mU);return null!==gK&&Boolean(kU.match(gK))}return!1}function AH(kU){try{const mU="^"===(kU=kU.trim())[0],gK="$"===kU[kU.length-1],XS=/\/\$?$/.test(kU);let at,wY,MQ;(at=(kU=kU.replace(/^\^/,"").replace(/\$$/,"").replace(/^.*?\/{2,3}/,"").replace(/\?.*$/,"").replace(/\/$/,"")).indexOf("/"))>=0?(wY=kU.substring(0,at),MQ=kU.replace(/\$/g,"").substring(at)):wY=kU.replace(/\$/g,"");let ka=mU?"^(.*?\\:\\/{2,3})?":"^(.*?\\:\\/{2,3})?([^/]*?\\.)?";const wU=wY.split(".");ka+="(";for(let kU=0;kU<wU.length;kU++)"*"===wU[kU]&&(wU[kU]="[^\\.\\/]+?");return ka+=wU.join("\\."),ka+=")",MQ&&(ka+="(",ka+=MQ.replace("/","\\/"),ka+=")"),ka+=gK?"(\\/?(\\?[^/]*?)?)$":`(\\/${XS?"":"?"}.*?)$`,new RegExp(ka,"i")}catch(kU){return null}}function aF(kU){if(kU.includes(".pdf")){if(kU.includes("?")&&(kU=kU.substring(0,kU.lastIndexOf("?"))),kU.includes("#")&&(kU=kU.substring(0,kU.lastIndexOf("#"))),kU.match(/(wikipedia|wikimedia)\.org/i)&&kU.match(/(wikipedia|wikimedia)\.org\/.*\/[a-z]+\:[^\:\/]+\.pdf/i)||kU.match(/timetravel\.mementoweb\.org\/reconstruct/i)&&kU.match(/\.pdf$/i)||kU.match(/dropbox\.com\/s\//i)&&kU.match(/\.pdf$/i))return!1;if(!kU.endsWith(".pdf"))return!1;for(let mU=kU.length;mU>0;mU--){if("="===kU[mU])return!1;if("/"===kU[mU])return!0}}return!1}function WM(kU,mU,{isProtected:gK,isInDarkList:XS,isDarkThemeDetected:wY},MQ=!0){if(ys(kU)&&!MQ)return!1;if(gK&&!mU.enableForProtectedPages)return!1;if(at)return!0;if(aF(kU))return mU.enableForPDF;const ka=Hn(kU,mU.siteList),wU=Hn(kU,mU.siteListEnabled);return mU.applyToListedOnly?wU||ka:!!wU||!(XS||mU.detectDarkTheme&&wY)&&!ka}function RA(kU){return/^[a-z0-9\.\-]+$/i.test(kU)&&-1===kU.indexOf("..")}function Gm(kU){if(!kU.includes("*")||!/^[a-z0-9\.\-\*]+$/i.test(kU))return!1;const mU=kU.split(".");for(const kU of mU)if("*"!==kU&&!/^[a-z0-9\-]+$/i.test(kU))return!1;return!0}function NJ(kU,mU){const gK=kU.toLowerCase().split("."),XS=mU.toLowerCase().split(".");if(XS.length<gK.length)return!1;for(;gK.length;){const kU=gK.pop(),mU=XS.pop();if("*"!==kU&&kU!==mU)return!1}return!0}function ys(kU){return kU&&kU.startsWith("file:///")}gK.parsedURLCache=new Map,gK.parseURL=ka,gK.getAbsoluteURL=wU,gK.isRelativeHrefOnAbsolutePath=Ta,gK.getURLHostOrProtocol=cv,gK.compareURLPatterns=So,gK.isURLInList=Hn,gK.isURLMatched=Cd,gK.isPDF=aF,gK.isURLEnabled=WM,gK.isFullyQualifiedDomain=RA,gK.isFullyQualifiedDomainWildcard=Gm,gK.fullyQualifiedDomainMatchesWildcard=NJ,gK.isLocalFile=ys},{"./ipv6":34}],46:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),gK.documentIsVisible=gK.removeDocumentVisibilityListener=gK.setDocumentVisibilityListener=void 0;let XS=null,at=!document.hidden;const wY={capture:!0,passive:!0};function MQ(){document.addEventListener("visibilitychange",XS,wY),window.addEventListener("pageshow",XS,wY),window.addEventListener("focus",XS,wY)}function ka(){document.removeEventListener("visibilitychange",XS,wY),window.removeEventListener("pageshow",XS,wY),window.removeEventListener("focus",XS,wY)}function wU(kU){const mU=Boolean(XS);XS=()=>{document.hidden||(Ta(),kU(),at=!0)},mU||MQ()}function Ta(){ka(),XS=null}function cv(){return at}gK.setDocumentVisibilityListener=wU,gK.removeDocumentVisibilityListener=Ta,gK.documentIsVisible=cv},{}],47:[function(kU,mU,gK){"use strict";Object.defineProperty(gK,"__esModule",{value:!0}),kU("../../../darkmode-core/src/js/content/content")},{"../../../darkmode-core/src/js/content/content":2}]},{},[47]);