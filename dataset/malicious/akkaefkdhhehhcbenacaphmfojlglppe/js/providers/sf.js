const SFProvider=class{constructor(a){this.c=a,this.code="sf",setInterval(()=>this.setSongsCount(),1e3)}getItems(a){const b=$(".tracklist-row"),c=this.getPageType(),d=[];if("playlist"===c||"collection"===c)b.each((a,b)=>{const c=$(b),e=c.find(".track-name").text()||c.find(".tracklist-name").text(),f=c.find("a[href*=\"artist/\"]").first().text(),g=f+" - "+e;d.push({id:g,name:g,artist:f,title:e})});else if("album"===c)b.each((a,b)=>{const c=$(b),e=c.find("a[href*=\"artist/\"]").first().text(),f=c.find(".track-name").text()||c.find(".tracklist-name").text(),g=e+" - "+f;d.push({id:g,name:g,artist:e,title:f})});else if("artist"===c){const a=$("h1:eq(1)").text();b.each((b,c)=>{const e=$(c),f=e.find(".track-name").text()||e.find(".tracklist-name").text(),g=a+" - "+f;d.push({id:g,name:g,artist:a,title:f})})}else("show"===c||"episode"===c)&&b.each((a,b)=>{const c=$(b),e=c.find(".track-name").text()||c.find(".tracklist-name").text(),f=c.find("a[href*=\"episode/\"]").text(),g=f+" - "+e;d.push({id:g,name:g,artist:f,title:e})});a(d)}getPageType(){const a=location.href;return a.includes("/playlist/")?"playlist":a.includes("/artist/")?"artist":a.includes("/album/")?"album":a.includes("/collection/")?"collection":a.includes("/episode/")?"episode":a.includes("/show/")?"show":null}setSongsCount(){return this.getItems(a=>{"function"==typeof this.mediaUpdateListener&&this.mediaUpdateListener({tracks:a});const b=a.length;chrome.runtime.sendMessage({action:"setBadge",value:b||0})})}registerMediaUpdateListener(a){this.mediaUpdateListener=a}itinializeMessageListeners(){chrome.runtime.onMessage.addListener(a=>{"pageUpdated"===a.action&&this.setSongsCount()})}};