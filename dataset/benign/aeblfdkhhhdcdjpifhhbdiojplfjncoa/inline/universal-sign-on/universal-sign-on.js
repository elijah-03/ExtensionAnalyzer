
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="cbc12930-930b-52a7-a900-f41adc612218")}catch(e){}}();
import{a as vn,b as S}from"/chunks/chunk-PQBPSXZQ.js";import"/chunks/chunk-7OGXR7VM.js";import{a as hn}from"/chunks/chunk-H2RNA6US.js";import{a as en,b as gn,c as fn,e as B,f as K,i as un,j,k as bn}from"/chunks/chunk-YCUTMSD4.js";import{Aa as mn,C as _n,Ea as kn,Ga as a,Ha as q,Ia as b,Ja as E,L as ln,La as R,Ma as pn,O as tn,P as dn,Va as cn,b as On,fa as xn,j as an,s as sn}from"/chunks/chunk-CARILTDN.js";import{a as y,b as d}from"/chunks/chunk-EXMDW5FT.js";import"/chunks/chunk-U3DUDNXO.js";import"/chunks/chunk-NC7PITUF.js";import{a as Dn}from"/chunks/chunk-YVQAWSEC.js";import{$ as t,Z as on,a as C,aa as w}from"/chunks/chunk-PTEF4S3V.js";import{c as e}from"/chunks/chunk-54UHBIHR.js";var qn=e(y()),Tn=e(On());var f=e(y());var Bn=e(y());var k=e(y());var Y=(i=>(i.ItemCacheNotLoaded="itemCacheNotLoaded",i.ItemNotFound="itemNotFound",i.Unknown="unknown",i))(Y||{});function $(n,o="unknown"){return n.ok?"unknown":n.type==="nolistener"?(console.error("No listener registered for message kind."),"unknown"):Object.values(Y).find(r=>n.error.message===r)??o}var yn=e(d()),Q=(0,k.createContext)({}),wn=({children:n})=>{let o=(0,k.useContext)(S),[r,i]=(0,k.useReducer)(Gn,Mn),_=new URLSearchParams(window.location.search).get("fillSessionPending")==="true",x=(0,k.useCallback)(()=>{i({type:"set-closed",data:!0})},[]),u=(0,k.useCallback)(v=>{t("uso-configuration",void 0).then(l=>{if(l.ok){if(v&&_&&l.data.type==="entry-list"){t("uso-dismiss",{close:!0});return}if(r.success&&l.data.type==="entry-list"){i({type:"set-closed",data:!0});return}!r.config||r.config.type==="pending"?t("uso-resize",{height:l.data.type==="entry-list"&&l.data.data.length>1?136:108}):l.data.type==="entry-list"&&r.config?.type==="entry-list"&&(l.data.data.length>1&&r.config.data.length<=1||l.data.data.length<=1&&r.config.data.length>1)&&t("uso-resize",{height:l.data.data.length>1?136:108}),i({type:"set-config",data:l.data})}else i({type:"set-error",data:$(l)})})},[r.config,r.success]),M=(0,k.useCallback)(v=>{t("uso-click-entry",v).then(l=>{l.ok?i({type:"set-config",data:l.data}):i({type:"set-error",data:$(l)})})},[]),G=r.config?.type==="pending"&&r.prevType==="entry-list",V=!r.configured||r.closed;return(0,k.useEffect)(()=>{u(!0)},[]),(0,k.useEffect)(()=>{o.locked?(i({type:"set-config",data:void 0}),t("uso-resize",{height:108})):u()},[o.locked]),K("accounts-and-vaults-changed",()=>u(),[u]),K("uso-update",()=>{i({type:"set-success",data:!0})},[]),(0,yn.jsx)(Q.Provider,{value:{onEntrySubmit:M,refresh:u,usoConfig:r.config,success:r.success,error:r.error,shouldClose:V,closeInterface:x,entryListToPendingTransitionFlag:G},children:n})},Mn={configured:!1,closed:!0,config:void 0,success:!1,error:void 0,prevType:void 0},Gn=(n,o)=>{switch(o.type){case"set-config":return{...n,prevType:n.config?.type,configured:!0,config:o.data,success:!1,error:void 0,closed:!1};case"set-success":return{...n,success:o.data};case"set-error":return{...n,error:o.data};case"set-closed":return{...n,closed:!0};default:C(o)}};var H=()=>(0,Bn.useContext)(Q);var In=e(y());var I=e(d()),W=({title:n,subtitle:o,icon:r})=>{let i=async m=>{let _=await t("get-custom-icon-url",{itemId:m});if(_.ok)return _.data;if(_.type==="nolistener"){let x="No listener registered for GetCustomIconUrl";throw new Error(x)}else throw _.error};return(0,I.jsxs)(R,{alignItems:"center",direction:"row",gap:"small",wrap:"nowrap",children:[(0,I.jsx)(cn.VaultItem,{size:"medium",name:n,shape:"square",children:r&&(0,I.jsx)(kn,{...r,size:"medium",getCustomIcon:i})}),(0,I.jsxs)(pn,{wrap:"nowrap",marginInlineEnd:"medium",children:[(0,I.jsx)(b.Medium,{as:"label",color:"neutral",truncate:!0,children:n}),o&&(0,I.jsx)(b.Small,{as:"label",color:"neutralWeak",truncate:!0,children:o})]})]})};var A={signInText:"zx",entry:"e_",entryIcon:"nv"};var c=e(d()),U=({entry:n})=>{let o=(0,In.useContext)(j),{onEntrySubmit:r}=H();return(0,c.jsxs)(a,{as:"button",width:"full",focusable:"on",borderRadius:"medium",overflow:"hidden",padding:"xs",display:"flex",justifyContent:"space-between",alignItems:"center",className:A.entry,onClick:()=>r(n),children:[(0,c.jsx)(a,{flexGrow:"1",textAlign:"start",overflow:"hidden",children:(0,c.jsx)(W,{title:n.data.title,subtitle:n.data.subtitle,icon:n.data.icon})}),(0,c.jsx)(a,{as:"span",className:A.entryIcon,display:"flex",children:(0,c.jsx)(Nn,{entry:n})}),(0,c.jsx)(a,{className:A.signInText,paddingRight:"xs",whiteSpace:"nowrap",children:(0,c.jsx)(b.Small,{as:"span",color:"neutralWeak",children:o("sign in")})})]})},Nn=({entry:n})=>{switch(n.type){case"autofill":case"sign-in-with":return null;case"trelica-app":return(0,c.jsx)(mn,{});default:C(n)}};var zn=e(Dn()),P=e(y());var L={entryListParent:"rv",entryListContainer:"Ix",entryListContainerExpanded:"ov",entryList:"ev",expandButton:"Ex"};var p=e(d()),Cn=({entries:n,onExpand:o,onCollapse:r})=>{let i=(0,P.useContext)(j),[m,_]=(0,P.useState)(!1);return(0,p.jsxs)(a,{display:"flex",flexDirection:"column",alignItems:"center",gap:"xs",className:L.entryListParent,children:[(0,p.jsx)(a,{borderBottomLeftRadius:"medium",borderBottomRightRadius:"medium",boxShadow:"low",className:(0,zn.default)(L.entryListContainer,{[L.entryListContainerExpanded]:m}),onTransitionEnd:()=>{m||r()},children:(0,p.jsx)(_n,{thin:!0,children:(0,p.jsx)(a,{as:"ul",className:L.entryList,padding:"xs",children:n.map((x,u)=>(0,p.jsx)(a,{as:"li",children:(0,p.jsx)(U,{entry:x})},`sign-in-entry-${u}`))})})}),(0,p.jsx)(a,{className:L.expandButton,borderRadius:"medium",boxShadow:"low",children:(0,p.jsx)(E.Tertiary,{onClick:()=>{o(),_(!m)},ariaLabel:i(m?"Collapse":"Expand"),"data-testid":"expand-button",width:"full",children:m?(0,p.jsx)(tn,{}):(0,p.jsx)(ln,{})})})]})};var nn=e(y()),O=e(d()),En=()=>{let n=(0,nn.useContext)(j);return(0,nn.useContext)(S).canRequestUnlock?.name==="yes"?(0,O.jsx)(a,{paddingX:"xs",children:(0,O.jsx)(E.Primary,{onClick:()=>{t("request-managed-unlock",void 0)},children:n("Unlock 1Password")})}):(0,O.jsx)(b.Medium,{as:"p",ariaLabel:n("Select the 1Password icon in your browser's toolbar to unlock."),alignment:"center",children:n("Select the 1Password icon in your browser's toolbar to unlock.")})};var z=e(y());var rn={pendingEntry:"iv",countdownContainer:"av"};var g=e(d()),Fn=({seconds:n})=>{let[o,r]=(0,z.useState)(100),[i,m]=(0,z.useState)(n),_=(0,z.useRef)(null);return(0,z.useEffect)(()=>(_.current||(_.current=setInterval(()=>{r(x=>x<=0?100:x-100/n),m(x=>x<=0?n:x-1)},1e3)),()=>{_.current&&(clearInterval(_.current),_.current=null)}),[]),(0,g.jsxs)(R,{gap:"xs",alignItems:"center",children:[(0,g.jsx)(q.Determinate,{value:o,color:o>33?"brand":"critical",ariaValueText:`${i} second${i!==1?"s":""} remaining`})," ",(0,g.jsx)(b.Small,{as:"span",children:i})]})},Rn=({entry:n,timeout:o})=>(0,g.jsxs)(a,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"small",padding:"xs",borderRadius:"medium",className:rn.pendingEntry,children:[(0,g.jsx)(a,{overflow:"hidden",children:(0,g.jsx)(W,{title:n.data.title,subtitle:n.data.subtitle,icon:n.data.icon})}),(0,g.jsx)(a,{className:rn.countdownContainer,children:(0,g.jsx)(Fn,{seconds:o})})]});var D={container:"Cx",opIcon:"lv",iconLocked:"i_"};var s=e(d()),jn=()=>{let n=(0,f.useContext)(S),{success:o,usoConfig:r,refresh:i,shouldClose:m,closeInterface:_,entryListToPendingTransitionFlag:x}=H(),{locked:u,wasLockedNowUnlocked:M,wasUnlockedNowLocked:G}=gn(n.locked),{pendingData:V}=en({wasLockedNowUnlocked:M,wasUnlockedNowLocked:G,hasData:!!r}),v=u||V,l=!v&&r?.type==="pending",Hn={slideUp:{y:-100,opacity:1,transition:{duration:.4,ease:"easeInOut"}},slideIn:{y:0,opacity:1,transition:{duration:.4,ease:"easeInOut"}},hideBanner:{y:"0%",opacity:0},fadeIn:{y:"0%",opacity:1,transition:{duration:.4,ease:"easeOut"}}},N=l&&!x,Wn=N?"hideBanner":"slideUp",An=m?"slideUp":N?"fadeIn":"slideIn",X=(0,f.useRef)(null),Z=(0,f.useRef)(null),F=(0,f.useCallback)(()=>{t("uso-dismiss",{close:!1}),_()},[_]);(0,f.useEffect)(()=>{X.current&&clearTimeout(X.current),r?.type==="pending"&&(X.current=setTimeout(()=>{F()},r.data.timeout*1e3))},[r,F]),(0,f.useEffect)(()=>{Z.current&&clearTimeout(Z.current),o&&(Z.current=setTimeout(()=>i(),1200))},[o,i]);let Un=()=>{if(v)return(0,s.jsx)(En,{});if(!r)return(0,s.jsx)(R,{alignItems:"center",justifyContent:"center",paddingTop:"medium",paddingBottom:"medium",children:(0,s.jsx)(q.Indeterminate,{})});switch(r.type){case"entry-list":return(0,s.jsx)(U,{entry:r.data[0]});case"pending":return(0,s.jsx)(Rn,{entry:r.data.entry,timeout:r.data.timeout});default:C(r)}};return(0,s.jsx)(sn.div,{variants:Hn,initial:Wn,animate:An,onAnimationComplete:Pn=>{Pn==="slideUp"&&m&&t("uso-dismiss",{close:!0})},children:(0,s.jsxs)(a,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,s.jsx)(a,{className:D.container,display:"flex",flexDirection:"column",gap:"medium",paddingY:"xs",paddingX:"medium",boxShadow:"low",justifyContent:"center",width:v?"fit-content":"full",children:(0,s.jsxs)(a,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"full",gap:"small",wrap:"nowrap",children:[(0,s.jsxs)(a,{className:D.opIcon,position:"relative",children:[(0,s.jsx)(hn,{size:"medium"}),v&&(0,s.jsx)(a,{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",borderRadius:"circular",className:D.iconLocked,children:(0,s.jsx)(xn,{color:"inherit"})})]}),(0,s.jsx)(a,{flexGrow:"1",minWidth:"0",children:Un()}),(0,s.jsx)(E.Tertiary,{ariaLabel:"Close",color:"neutral",onClick:F,startAccessory:(0,s.jsx)(dn,{})})]})}),!o&&r?.type==="entry-list"&&r.data.length>1&&(0,s.jsx)(Cn,{entries:r.data.slice(1),onExpand:()=>{t("uso-resize",{height:334})},onCollapse:()=>{t("uso-resize",{height:136})}})]})},N?"fade":"slide")};import $n from"/assets/js/messages.i18n-FL65S2UU.js";var Ln=()=>{on(3),w("app-theme-changed",B("app-theme-changed")),w("update-connectivity-status",B("update-connectivity-status")),w("lock-state-changed",B("lock-state-changed")),w("accounts-and-vaults-changed",B("accounts-and-vaults-changed")),w("language-changed",B("language-changed")),w("can-request-unlock-changed",B("can-request-unlock-changed")),w("uso-update",B("uso-update"))};var h=e(d());document.addEventListener("DOMContentLoaded",()=>{let n=(0,Tn.createRoot)(document.getElementById("root"));Ln(),n.render((0,h.jsx)(vn,{children:(0,h.jsx)(Jn,{})}))});var Jn=()=>{let n=(0,qn.useContext)(S);return(0,h.jsx)(an,{themeOverride:n.appTheme,children:(0,h.jsx)(un,{children:(0,h.jsx)(fn,{children:(0,h.jsx)(bn,{locale:n.locale,messages:$n,children:(0,h.jsx)(wn,{children:(0,h.jsx)(jn,{})})})})})})};

//# debugId=cbc12930-930b-52a7-a900-f41adc612218
