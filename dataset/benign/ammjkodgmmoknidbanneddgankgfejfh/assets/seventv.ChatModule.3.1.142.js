var St=Object.defineProperty;var kt=(o,s,r)=>s in o?St(o,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[s]=r;var ce=(o,s,r)=>(kt(o,typeof s!="symbol"?s+"":s,r),r);import{n as $t,k as Mt,u as X,o as ne,p as We,q as Tt,l as $e,h as It,j as dt,y as ke,z as je,A as Et,b as rt,m as xe,d as V}from"./seventv.GearsIcon.3.1.14.js";import{c as Dt,u as pe,d as Vt}from"./seventv.ReactHooks.3.1.14.js";import{g as Rt,d as Bt}from"./seventv.useModule.3.1.14.js";import{O as Ut}from"./seventv.Async.3.1.14.js";import{C as De,a as ee,M as lt,b as Pt}from"./seventv.ChatMessage.3.1.14.js";import{u as Ce,a as ut}from"./seventv.useChatEmotes.3.1.14.js";import{u as Ze,a as ht}from"./seventv.UiConfirmPrompt.3.1.14.js";import{u as He,c as Nt,d as pt,U as Ht,_ as At,e as Ye,t as Lt,f as xt}from"./seventv.UserTag.3.1.14.js";import{e as Z,x as l,l as d,_ as F,m as e,u as k,B as te,G as h,D as B,I as H,F as q,an as _e,Q as fe,R as ge,q as T,t as Ve,r as P,J as mt,f as Ae,ad as me,h as Ot,O as ye,az as Ft,a as Q,E as we,C as ie,H as Ke,aA as Oe,au as _t,n as Ne,av as Gt,Y as ft,ae as zt,w as Wt,a9 as ct,o as jt,ag as Yt,ar as Kt,a1 as qt,M as Ue,N as oe,ak as Zt,W as Xt}from"./seventv.index.3.1.14.js";import{a as Jt,_ as Qt}from"./seventv.ChatData.vue_vue_type_script_setup_true_lang.3.1.14.js";import{d as es,a as ts,b as ss}from"./seventv.index.3.1.142.js";import{n as as}from"./seventv.useCosmetics.3.1.14.js";import{b as os,d as ns}from"./seventv.Transform.3.1.14.js";import{i as is}from"./seventv.index.3.1.144.js";import{U as Pe}from"./seventv.UiScrollable.3.1.14.js";import{U as Fe}from"./seventv.UiFloating.3.1.14.js";import{v as rs}from"./seventv.v4.3.1.14.js";const ls={class:"seventv-welcome-message"},cs=Z({__name:"11.Connected",props:{msgData:{}},setup(o){return(s,r)=>(l(),d("span",ls," Welcome to the chat room! "))}}),ds=F(cs,[["__scopeId","data-v-39ca32ed"]]),us={},hs={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-brand)"},ps=e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 5v8a2 2 0 0 1-2 2H4a2.002 2.002 0 0 1-2-2V5l4 3 4-4 4 4 4-3z"})],-1),ms=[ps];function _s(o,s){return l(),d("svg",hs,ms)}const gt=F(us,[["render",_s]]),fs={},gs={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},vs=e("g",null,[e("path",{d:"M8.944 2.654c.406-.872 1.706-.872 2.112 0l1.754 3.77 4.2.583c.932.13 1.318 1.209.664 1.853l-3.128 3.083.755 4.272c.163.92-.876 1.603-1.722 1.132L10 15.354l-3.579 1.993c-.846.47-1.885-.212-1.722-1.132l.755-4.272L2.326 8.86c-.654-.644-.268-1.723.664-1.853l4.2-.583 1.754-3.77z"})],-1),bs=[vs];function ys(o,s){return l(),d("svg",gs,bs)}const vt=F(fs,[["render",ys]]),bt=o=>(fe("data-v-58893c52"),o=o(),ge(),o),ws={class:"seventv-sub-message-container seventv-highlight"},Cs={class:"sub-part"},Ss={class:"sub-message-icon"},ks={class:"sub-message-text"},$s={key:0,class:"sub-name bold"},Ms=bt(()=>e("span",{class:"bold"},"Subscribed",-1)),Ts=bt(()=>e("span",null,".",-1)),Is=Z({__name:"14.SubscriptionMessage",props:{msg:{},msgData:{}},setup(o){var f,g;const s=o,r=((f=s.msgData.methods)==null?void 0:f.plan)=="Prime"?"Prime":"Tier "+((g=s.msgData.methods)==null?void 0:g.plan.charAt(0));return(m,p)=>(l(),d("span",ws,[e("div",Cs,[e("div",Ss,[k(r)=="Prime"?(l(),te(gt,{key:0})):(l(),te(vt,{key:1}))]),e("div",ks,[m.msg.author?(l(),d("span",$s,h(m.msg.author.displayName),1)):B("",!0),Ms,H(" with "+h(k(r))+" ",1),m.msgData.sourceData?(l(),d(q,{key:1},[H(" to "+h(m.msgData.sourceData.displayName),1)],64)):B("",!0),Ts])]),m.msg.body?_e(m.$slots,"default",{key:0},void 0,!0):B("",!0)]))}}),Es=F(Is,[["__scopeId","data-v-58893c52"]]),yt=o=>(fe("data-v-98f5cc74"),o=o(),ge(),o),Ds={class:"seventv-sub-message-container seventv-highlight"},Vs={class:"sub-part"},Rs={class:"sub-message-icon"},Bs={class:"sub-message-text"},Us={key:0,class:"sub-name bold"},Ps=yt(()=>e("span",{class:"bold"},"Subscribed",-1)),Ns=yt(()=>e("span",null,". They've subscribed for ",-1)),Hs={class:"bold"},As={key:0,class:"message-part"},Ls=Z({__name:"15.Resubscription",props:{msgData:{}},setup(o){var f,g;const s=o,r=((f=s.msgData.methods)==null?void 0:f.plan)=="Prime"?"Prime":"Tier "+((g=s.msgData.methods)==null?void 0:g.plan.charAt(0));return(m,p)=>{var w;return l(),d("span",Ds,[e("div",Vs,[e("div",Rs,[((w=m.msgData.methods)==null?void 0:w.plan)=="Prime"?(l(),te(gt,{key:0})):(l(),te(vt,{key:1}))]),e("div",Bs,[m.msgData.user?(l(),d("span",Us,h(m.msgData.user.displayName),1)):B("",!0),Ps,H(" with "+h(k(r))+" ",1),m.msgData.sourceData?(l(),d(q,{key:1},[H(" to "+h(m.msgData.sourceData.displayName),1)],64)):B("",!0),Ns,e("span",Hs,h(m.msgData.cumulativeMonths)+" months",1),m.msgData.shouldShareStreakTenure?(l(),d(q,{key:2},[H(" , "+h(m.msgData.streakMonths)+" month"+h((m.msgData.streakMonths??0)>1?"s":"")+" in a row. ",1)],64)):(l(),d(q,{key:3},[H("! ")],64))])]),m.msgData.message?(l(),d("div",As,[_e(m.$slots,"default",{},void 0,!0)])):B("",!0)])}}}),xs=F(Ls,[["__scopeId","data-v-98f5cc74"]]),Os={},Fs={width:"25px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},Gs=e("g",null,[e("path",{"fill-rule":"evenodd",d:"M16 6h2v6h-1v6H3v-6H2V6h2V4.793c0-2.507 3.03-3.762 4.803-1.99.131.131.249.275.352.429L10 4.5l.845-1.268a2.81 2.81 0 01.352-.429C12.969 1.031 16 2.286 16 4.793V6zM6 4.793V6h2.596L7.49 4.341A.814.814 0 006 4.793zm8 0V6h-2.596l1.106-1.659a.814.814 0 011.49.451zM16 8v2h-5V8h5zm-1 8v-4h-4v4h4zM9 8v2H4V8h5zm0 4H5v4h4v-4z","clip-rule":"evenodd"})],-1),zs=[Gs];function Ws(o,s){return l(),d("svg",Fs,zs)}const js=F(Os,[["render",Ws]]),Ys={class:"seventv-sub-message-container seventv-highlight"},Ks={class:"sub-part"},qs={class:"gift-icon"},Zs={class:"sub-message-text"},Xs={class:"sub-name bold"},Js={class:"bold"},Qs={class:"bold"},ea=Z({__name:"21.SubGift",props:{msgData:{}},setup(o){return(s,r)=>{var f;return l(),d("span",Ys,[e("div",Ks,[e("div",qs,[T(js)]),e("div",Zs,[e("span",Xs,h(s.msgData.user.displayName),1),H(" Gifted a "),e("span",Js," Tier "+h((f=s.msgData.methods)==null?void 0:f.plan.charAt(0)),1),H(" Sub to "),e("span",Qs,h(s.msgData.recipientDisplayName),1),s.msgData.sourceData?(l(),d(q,{key:0},[H(" in "+h(s.msgData.sourceData.displayName)+"'s channel! ",1)],64)):B("",!0)])])])}}}),ta=F(ea,[["__scopeId","data-v-1ca08a38"]]),sa=o=>(fe("data-v-530274b2"),o=o(),ge(),o),aa={class:"seventv-raid-message-container seventv-highlight"},oa={class:"bold"},na={class:"bold"},ia=sa(()=>e("span",null,".",-1)),ra=Z({__name:"26.Raid",props:{msgData:{}},setup(o){return(s,r)=>(l(),d("span",aa,[e("span",oa,h(s.msgData.params.displayName),1),H(" raided "),s.msgData.sourceData?(l(),d(q,{key:0},[H(h(s.msgData.sourceData.displayName)+"'s channel ",1)],64)):B("",!0),H(" with a viewer count of "),e("span",na,h(s.msgData.params.viewerCount),1),ia]))}}),la=F(ra,[["__scopeId","data-v-530274b2"]]),ca={},da={alt:"mystery gift",class:"mystery-gift-theme__image",src:"https://static-cdn.jtvnw.net/subs-image-assets/gift-illus.png"};function ua(o,s){return l(),d("img",da)}const ha=F(ca,[["render",ua]]),pa=o=>(fe("data-v-83ef3b9f"),o=o(),ge(),o),ma={class:"seventv-sub-message-container seventv-highlight"},_a={class:"sub-part"},fa={class:"gift-icon"},ga={class:"sub-message-text"},va={class:"sub-name-big"},ba={key:0},ya=pa(()=>e("span",null,".",-1)),wa=Z({__name:"35.SubMysteryGift",props:{msgData:{}},setup(o){return(s,r)=>(l(),d("span",ma,[e("div",_a,[e("div",fa,[T(ha)]),e("div",ga,[e("span",va,h(s.msgData.user.displayName),1),H(" is gifting "+h(s.msgData.massGiftCount)+" Tier "+h(s.msgData.plan.charAt(0))+" Sub"+h(s.msgData.massGiftCount>1?"s":"")+" ",1),s.msgData.sourceData?(l(),d("span",ba,"to "+h(s.msgData.sourceData.displayName)+"'s community",1)):B("",!0),ya,s.msgData.senderCount==s.msgData.massGiftCount?(l(),d(q,{key:1},[H(" It's their first Gift Sub in the channel! ")],64)):(l(),d(q,{key:2},[H(" They've gifted a total of "+h(s.msgData.senderCount)+" Subs in the channel! ",1)],64))])])]))}}),Ca=F(wa,[["__scopeId","data-v-83ef3b9f"]]),Sa={},ka={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},$a=e("g",null,[e("path",{"fill-rule":"evenodd",d:"M3 12l7-10 7 10-7 6-7-6zm2.678-.338L10 5.487l4.322 6.173-.85.728L10 11l-3.473 1.39-.849-.729z","clip-rule":"evenodd"})],-1),Ma=[$a];function Ta(o,s){return l(),d("svg",ka,Ma)}const Ia=F(Sa,[["render",Ta]]),Ea=o=>(fe("data-v-fba6705a"),o=o(),ge(),o),Da={class:"seventv-bits-badge-message-container seventv-highlight"},Va={class:"bits-badge-header"},Ra={class:"bits-icon"},Ba={class:"bits-text"},Ua={class:"bits-username bold"},Pa={class:"bold"},Na={key:0},Ha=Ea(()=>e("span",null,"!",-1)),Aa={key:0,class:"bits-badge-message"},La=Z({__name:"41.BitsBadgeTier",props:{msg:{},msgData:{}},setup(o){return(s,r)=>(l(),d("span",Da,[e("div",Va,[e("div",Ra,[T(Ia)]),e("div",Ba,[e("span",Ua,h(s.msgData.user.displayName),1),H(" just earned a new "),e("span",Pa,h(s.msgData.threshold)+" Bits badge",1),s.msgData.sourceData?(l(),d("span",Na," in "+h(s.msgData.sourceData.displayName)+"'s channel",1)):B("",!0),Ha])]),s.msg.body?(l(),d("div",Aa,[_e(s.$slots,"default",{},void 0,!0)])):B("",!0)]))}}),xa=F(La,[["__scopeId","data-v-fba6705a"]]),Oa={},Fa={type:"color-fill-current",width:"1em",height:"1em",version:"1.1",viewBox:"0 0 20 20",fill:"currentColor"},Ga=e("g",null,[e("path",{d:"M10 6a4 4 0 014 4h-2a2 2 0 00-2-2V6z"}),e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-2 0a6 6 0 11-12 0 6 6 0 0112 0z","clip-rule":"evenodd"})],-1),za=[Ga];function Wa(o,s){return l(),d("svg",Fa,za)}const wt=F(Oa,[["render",Wa]]),ja={class:"seventv-reward-message-container seventv-highlight"},Ya={key:0,class:"reward-part"},Ka={class:"reward-left"},qa={class:"reward-username bold"},Za={class:"reward-name bold"},Xa={class:"reward-cost bold"},Ja=["highlight"],Qa=Z({__name:"43.PointsReward",props:{msg:{},msgData:{}},setup(o){return(s,r)=>(l(),d("span",ja,[s.msgData.reward?(l(),d("div",Ya,[e("div",Ka,[e("span",qa,h(s.msgData.displayName),1),H(" redeemed "),e("span",Za,h(s.msgData.reward.name),1),s.msgData.sourceData?(l(),d(q,{key:0},[H(" in "+h(s.msgData.sourceData.displayName)+"'s channel ",1)],64)):B("",!0)]),e("span",Xa,[T(wt),e("span",null,h(s.msgData.reward.cost),1)])])):B("",!0),s.msgData.message?(l(),d("div",{key:1,class:"message-part",highlight:s.msgData.reward.isHighlighted},[_e(s.$slots,"default",{},void 0,!0)],8,Ja)):B("",!0)]))}}),eo=F(Qa,[["__scopeId","data-v-4b411dab"]]),to={},so={fill:"var(--color-fill-current)",width:"18px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px"},ao=e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 14l7 4V2l-7 4H4a2 2 0 00-2 2v4a2 2 0 002 2h2v4h2v-4h3zm1-6.268l4-2.286v9.108l-4-2.286V7.732zM10 12H4V8h6v4z"},null,-1),oo=[ao];function no(o,s){return l(),d("svg",so,oo)}const io=F(to,[["render",no]]),ro={class:"announce-header"},lo={class:"announce-icon"},co={class:"announce-title"},uo={class:"announce-message"},ho=Z({__name:"48.AnnouncementMessage",props:{msgData:{}},setup(o){const s=o,r=Ce(),f=He(r),g="announcement-line--"+(s.msgData.color=="PRIMARY"&&f.primaryColorHex==null?"purple":s.msgData.color.toLowerCase());return(m,p)=>(l(),d("span",{class:Ve(["seventv-announce-message-container",g])},[e("div",ro,[e("div",lo,[T(io)]),e("div",co,[m.msgData.sourceData?(l(),d(q,{key:0},[H(h(m.msgData.sourceData.displayName)+"'s ",1)],64)):B("",!0),H(" Announcement ")])]),e("div",uo,[_e(m.$slots,"default",{},void 0,!0)])]))}}),po=F(ho,[["__scopeId","data-v-922c1330"]]),mo={},_o={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},fo=e("g",null,[e("path",{"fill-rule":"evenodd",d:"M11 4.5 9 2 4.8 6.9A7.48 7.48 0 0 0 3 11.77C3 15.2 5.8 18 9.23 18h1.65A6.12 6.12 0 0 0 17 11.88c0-1.86-.65-3.66-1.84-5.1L12 3l-1 1.5ZM6.32 8.2 9 5l2 2.5L12 6l1.62 2.07A5.96 5.96 0 0 1 15 11.88c0 2.08-1.55 3.8-3.56 4.08.36-.47.56-1.05.56-1.66 0-.52-.18-1.02-.5-1.43L10 11l-1.5 1.87c-.32.4-.5.91-.5 1.43 0 .6.2 1.18.54 1.64A4.23 4.23 0 0 1 5 11.77c0-1.31.47-2.58 1.32-3.57Z","clip-rule":"evenodd"})],-1),go=[fo];function vo(o,s){return l(),d("svg",_o,go)}const bo=F(mo,[["render",vo]]),Ct=o=>(fe("data-v-94121df6"),o=o(),ge(),o),yo={class:"seventv-viewer-milestone-container seventv-highlight"},wo={class:"milestone-part"},Co={class:"milestone-icon"},So={class:"milestone-text"},ko={class:"milestone-header"},$o={key:0,class:"viewer-name bold"},Mo={class:"milestone-points"},To=Ct(()=>e("span",{class:"bold"},"Watch Streak Reached!: ",-1)),Io={key:0},Eo={key:1},Do=Ct(()=>e("span",null,"!",-1)),Vo={key:0,class:"message-part"},Ro=Z({__name:"51.ViewerMilestone",props:{msg:{},msgData:{}},setup(o){return(s,r)=>(l(),d("span",yo,[e("div",wo,[e("div",Co,[T(bo)]),e("div",So,[e("div",ko,[s.msg.author?(l(),d("span",$o,h(s.msg.author.displayName),1)):B("",!0),e("span",Mo,[H(" + "),T(wt),H(" "+h(s.msgData.copoReward),1)])]),To,s.msg.author?(l(),d("span",Io,h(s.msg.author.displayName),1)):B("",!0),H(" is currently on a "+h(s.msgData.watchStreak)+"-stream streak ",1),s.msgData.sourceData?(l(),d("span",Eo,"in "+h(s.msgData.sourceData.displayName)+"'s channel",1)):B("",!0),Do])]),s.msg.body?(l(),d("div",Vo,[_e(s.$slots,"default",{},void 0,!0)])):B("",!0)]))}}),Bo=F(Ro,[["__scopeId","data-v-94121df6"]]);function Uo(o){const s=o;return Array.isArray(s.messageParts)&&typeof s.messageType=="number"}function Po(o){const s=o;return Array.isArray(s.messageParts)||typeof s.message=="object"}function No(o){return typeof o.moderationType=="number"}const Ho=["id"],Ao=Z({__name:"ChatMessageUnhandled",props:{msg:{}},setup(o){const s=o,r=P(null);return mt(()=>{!r.value||!s.msg.wrappedNode||r.value.appendChild(s.msg.wrappedNode)}),(f,g)=>(l(),d("span",{id:f.msg.id,ref_key:"msgContainer",ref:r,class:"seventv-unhandled-message-ref"},null,8,Ho))}}),Ee=300,Lo=40,Ge=80,xo=1209600;function Oo(o){return o<60?`${Math.round(o)} seconds`:o<60*60?`${Math.round(o/60)} minutes`:o<60*60*24?`${Math.round(o/(60*60))} hours`:`${Math.round(o/(60*60*24))} days`}class Fo{constructor(s=!1){ce(this,"command","");ce(this,"banDuration",null);ce(this,"text","");ce(this,"time",0);ce(this,"banVis",0);ce(this,"unbanVis",0);ce(this,"color","");ce(this,"pos","0px");this.isActor=s}secondsToBanDuration(s){const r=is({start:0,end:s*1e3});return"".concat(r.seconds?`${r.seconds}s`:"",r.days?`${r.days}d`:"",r.hours?`${r.hours}h`:"",r.minutes?`${r.minutes}m`:"")}calculate(s){if(this.pos=`${this.isActor?Math.max(0,s):s}px`,s<-40&&!this.isActor)this.command="unban",this.unbanVis=1;else if(s<Lo){this.command="",this.text="",this.color="";return}else if(s<Ge)this.command="delete",this.text="Delete",this.color="#FFFF00",this.banVis=1;else if(s<Ee&&!this.isActor){const r=Math.pow((s+.25*Ee-Ge)/(1.25*Ee-Ge),10)*xo;this.command="ban",this.banDuration=this.secondsToBanDuration(Math.round(r))||"14d",this.text=String(Oo(r)),this.color="#FFA500",this.banVis=1}else s>=Ee&&!this.isActor&&(this.command="ban",this.banDuration=null,this.text="Ban",this.color="#C40000",this.banVis=1)}}const Go=o=>(fe("data-v-81fef685"),o=o(),ge(),o),zo=Go(()=>e("div",{class:"dots"},null,-1)),Wo=[zo],jo={class:"wrapped"},Yo=Z({__name:"ModSlider",props:{msg:{}},setup(o){var U,O,Y;const s=o,r=Ce(),f=Nt(r,((U=s.msg.author)==null?void 0:U.username)??""),g=P(),m=Ft("Drag to moderate",void 0,{placement:"left"}),p=P(!1),w=P(!1),E=Ae(new Fo(((O=s.msg.author)==null?void 0:O.isActor)??!1)),G=me(E,"pos");let x=0;const se=((Y=s.msg.highlight)==null?void 0:Y.color)??"none",C=Ot(()=>{const M=r.actor.roles,$=s.msg.badges;return!(!M.has("MODERATOR")&&!M.has("BROADCASTER")||$.broadcaster||$.moderator)}),v=M=>{M.stopPropagation(),x=M.pageX,w.value=!0,M.target.setPointerCapture(M.pointerId),m.hide()},D=M=>{var $;if(w.value=!1,E.command&&s.msg.author)switch(E.command){case"ban":f.banUserFromChat((($=E.banDuration)==null?void 0:$.toString())??null);break;case"unban":f.unbanUserFromChat();break;case"delete":f.deleteChatMessage(s.msg.id);break}p.value=!0,setTimeout(()=>p.value=!1,300),E.calculate(0),M.target.releasePointerCapture(M.pointerId)},u=M=>{if(!w.value)return;M.preventDefault();const $=Math.max(Math.min(M.pageX-x,Ee),-60);E.calculate($)};return(M,$)=>C.value?(l(),d("div",{key:0,class:"seventv-ban-slider",style:ye({transform:"translateX("+G.value+")",transition:p.value?"transform 0.3s ease":"none",boxShadow:w.value?"black 0px 0.1rem 0.2rem":"none"})},[e("div",{class:"ban-background",style:ye({backgroundColor:E.color,width:G.value})},[e("span",{class:"text",style:ye({opacity:E.banVis})},h(E.text),5)],4),e("div",{ref_key:"sliderRef",ref:g,class:"grabbable-wrapper",onMouseenter:$[0]||($[0]=re=>k(m).show(g.value)),onMouseleave:$[1]||($[1]=re=>k(m).hide())},[e("div",{class:"grabbable-outer",onPointerdown:v,onPointerup:D,onPointermove:u},[e("div",{class:"grabbable-inner",style:ye({backgroundColor:k(se)})},Wo,4)],32)],544),e("div",jo,[_e(M.$slots,"default",{},void 0,!0)]),e("div",{class:"unban-background",style:ye({width:"calc(-1 *"+G.value+")"})},[e("span",{class:"text",style:ye({opacity:E.unbanVis})}," Unban ",4)],4)],4)):_e(M.$slots,"default",{key:1},void 0,!0)}}),Ko=F(Yo,[["__scopeId","data-v-81fef685"]]),qo=["msg-id"],Zo=Z({__name:"ChatList",props:{list:{},restrictions:{},messageHandler:{},sharedChatData:{}},setup(o,{expose:s}){const r=o,f=Ce(),{identity:g}=$t(Mt()),m=ut(f),p=Ze(f),w=me(p,"displayed"),E=ht(f),G=He(f),x=pt(f),se=es(),C=me(G,"hovering"),v=P(!1),D=X("chat.hide_shared_chat"),u=X("chat.mod_slider"),U=X("chat.mod_messages"),O=X("highlights.basic.mention"),Y=X("highlights.basic.first_time_chatter"),M=X("highlights.basic.self"),$=X("highlights.basic.mention_sound"),re=X("highlights.basic.mention_title_flash"),ve=X("highlights.basic.restricted_low_trust_user"),ue=X("highlights.basic.monitored_low_trust_user"),be=me(r,"messageHandler"),b=me(r,"list"),R=me(r,"sharedChatData"),N=me(r,"restrictions"),t=P(),ae=Object.assign({"/src/app/chat/msg/0.NormalMessage.vue":At,"/src/app/chat/msg/11.Connected.vue":ds,"/src/app/chat/msg/14.SubscriptionMessage.vue":Es,"/src/app/chat/msg/15.Resubscription.vue":xs,"/src/app/chat/msg/21.SubGift.vue":ta,"/src/app/chat/msg/26.Raid.vue":la,"/src/app/chat/msg/35.SubMysteryGift.vue":Ca,"/src/app/chat/msg/41.BitsBadgeTier.vue":xa,"/src/app/chat/msg/43.PointsReward.vue":eo,"/src/app/chat/msg/48.AnnouncementMessage.vue":po,"/src/app/chat/msg/51.ViewerMilestone.vue":Bo,"/src/app/chat/msg/BasicSystemMessage.vue":Ye,"/src/app/chat/msg/EmoteSetUpdateMessage.vue":Jt}),A={},J=/src\/app\/chat\/msg\/(\d+)\.(\w+)\.vue$/;for(const[a,n]of Object.entries(ae)){const[,y]=a.match(J)??[];if(!y)continue;const z=parseInt(y);Number.isNaN(z)||(A[z]=n)}function i(a){return A[a]??null}const Re=a=>{const n=new De(a.id);switch(n.channelID=f.id,p.handlers.forEach(y=>y(a)),a.type){case ee.MESSAGE:case ee.SUBSCRIPTION:case ee.RESUBSCRIPTION:case ee.SUB_GIFT:case ee.RAID:case ee.SUB_MYSTERY_GIFT:case ee.ANNOUNCEMENT_MESSAGE:case ee.RESTRICTED_LOW_TRUST_USER_MESSAGE:case ee.BITS_BADGE_TIER_MESSAGE:case ee.VIEWER_MILESTONE:case ee.CONNECTED:Se(n,a);break;case ee.CHANNEL_POINTS_REWARD:if(!a.animationID)Se(n,a);else return!1;break;case ee.MODERATION:if(!No(a))break;Le(a);break;case ee.MESSAGE_ID_UPDATE:Be(a);break;default:return!1}return!0};function Se(a,n,y=!0){var j,he,Xe,Je,Qe,et,tt,st,at,ot;const z=i(n.type);z&&a.setComponent(z,{msgData:n}),a.instance||a.setComponent(A[0],{msgData:n}),n.type===ee.RESTRICTED_LOW_TRUST_USER_MESSAGE&&ve.value&&a.setHighlight("#ff7d00","Restricted Suspicious User");let W=n.sourceRoomID??((j=n.sharedChat)==null?void 0:j.sourceRoomID)??((he=n.message)==null?void 0:he.sourceRoomID)??null;if(!W&&n.nonce&&(W=a.channelID),D.value&&a.channelID!=W)return;W&&!D.value&&(n.sourceData=(Xe=R.value)==null?void 0:Xe.get(W),a.setSourceData(n.sourceData));const I=n.user??((Je=n.message)==null?void 0:Je.user)??null;if(I){const K=p.chatters[I.userID],L=I.color?G.useHighContrastColors?as(I.color,G.isDarkTheme):I.color:null;if(K&&(K.username=I.userLogin,K.displayName=I.userDisplayName??I.displayName??I.userLogin,K.color=L??K.color,K.intl=I.isIntl),a.setAuthor(K??{id:I.userID,username:I.userLogin??((Qe=I.userDisplayName??I.displayName)==null?void 0:Qe.toLowerCase()),displayName:I.userDisplayName??I.displayName??I.userLogin,intl:I.isIntl,color:L}),a.author&&G.blockedUsers.has(a.author.id)){if(!f.actor.roles.has("MODERATOR")){$e.debug("Ignored message from blocked user",a.author.id);return}a.setHighlight("#9488855A","You Blocked This User")}g.value&&a.author&&a.author.id===g.value.id&&(a.author.isActor=!0),a.badges=n.badges??((et=n.message)==null?void 0:et.badges)??{}}if(Po(n)){if(a.body=(n.messageBody??((tt=n.message)==null?void 0:tt.messageBody)??"").replace(`
`," "),a.first=n.isFirstMsg,typeof n.nonce=="string"&&a.setNonce(n.nonce),n.isFirstMsg&&Y.value&&a.setHighlight("#c832c8","First Message"),a.author){const K=p.lowTrustUsers[a.author.id];K&&K.treatment.type==="ACTIVE_MONITORING"&&ue.value&&a.setHighlight("#ff7d00","Monitored Suspicious User")}if(n.reply){const K=n.reply.parentUserLogin&&n.reply.parentDisplayName?{username:n.reply.parentUserLogin,displayName:n.reply.parentDisplayName}:null,L=n.reply&&n.reply.threadParentMsgId&&n.reply.threadParentUserLogin?{deleted:n.reply.threadParentDeleted,id:n.reply.threadParentMsgId,login:n.reply.threadParentUserLogin}:null;a.parent={id:n.reply.parentMsgId??"",uid:n.reply.parentUid??"",deleted:n.reply.parentDeleted??!1,body:n.reply.parentMessageBody??"",author:K,thread:L},x.checkMatch("~reply",a)}n.messageType===1&&(a.slashMe=!0);for(const K of n.messageParts??((st=n.message)==null?void 0:st.messageParts)??[])switch(K.type){case lt.EMOTE:{const L=K.content;if(!L.alt||(at=L.emoteID)!=null&&at.startsWith("__FFZ__")||(ot=L.emoteID)!=null&&ot.startsWith("__BTTV__"))continue;const nt={id:L.emoteID??"",name:L.alt,flags:0,provider:"PLATFORM",isTwitchCheer:{amount:L.cheerAmount,color:L.cheerColor},data:L.cheerAmount?os({alt:L.alt,cheerAmount:L.cheerAmount,cheerColor:L.cheerColor,images:L.images}):ns({id:L.emoteID,token:L.alt})},it=L.alt+(L.cheerAmount??"");a.nativeEmotes[it]=nt,L.cheerAmount&&(a.nativeEmotes[it.toLowerCase()]=nt);break}case lt.FLAGGEDSEGMENT:{const L=K;if(!L.originalText)continue;a.body=a.body.replace(L.originalText,"*".repeat(L.originalText.length));break}}}if(n.nonce){a.setDeliveryState("IN_FLIGHT");const{stop:K}=It(()=>{a.setDeliveryState("BOUNCED")},1e4);dt(P(a.deliveryState)).toBe("SENT").then(K)}Uo(n)?a.setTimestamp(n.timestamp):n.message&&a.setTimestamp(n.message.timestamp??0);for(const K in x.getAll())x.checkMatch(K,a);f.actor.roles.has("MODERATOR")&&(a.pinnable=!0,a.deletable=!0),y&&p.add(a)}function Le(a){if(a.moderationType===Pt.DELETE){const n=p.find(y=>y.id==a.targetMessageID);n&&(n.moderation.deleted=!0)}else{const n=p.moderated[0];if(n&&n.victim&&n.victim.username===a.userLogin&&n.mod.banDuration===a.duration)return;const y=p.messagesByUser(a.userLogin),z={actionType:a.duration>0?"TIMEOUT":"BAN",banDuration:a.duration,banReason:a.reason,actor:null,banned:!0,deleted:!1,timestamp:Date.now()};let W=null;for(const I of y)I.moderation=z,W||(W=I.author);if(p.moderated.unshift({id:Symbol("seventv-moderation-message"),messages:y.reverse().slice(0,10),mod:z,victim:W||{id:a.userLogin,username:a.userLogin,displayName:a.userLogin,color:""}}),p.moderated.length>125&&Ne(()=>{for(;p.moderated.length>100;)p.moderated.pop()}),U.value&&!f.actor.roles.has("MODERATOR")){const I=new De().setComponent(Ye,{text:a.userLogin+(a.duration>0?` was timed out (${a.duration}s)`:" was permanently banned")});p.add(I)}}}function Be(a){const n=p.find(y=>y.nonce==a.nonce);n&&(n.setID(a.id),n.setDeliveryState("SENT"))}Q(be,(a,n)=>{var y,z;a!==n&&n?((y=N.value)!=null&&y.component.onChatEvent&&p.handlers.delete(N.value.component.onChatEvent),ne(n,"handleMessage")):a&&((z=N.value)!=null&&z.component.onChatEvent&&p.handlers.add(N.value.component.onChatEvent),We(a,"handleMessage",function(W,I){return Re(I)?"":(Me.set(I.id,I),W==null?void 0:W.call(this,I))}))},{immediate:!0});const Me=Ae(new Map),c=new Map;Tt(b.value.domNodes,a=>{const n=new Set(c.keys());for(const[y,z]of Object.entries(a)){if(y==="root"||(n.delete(y),c.has(y)||!Me.has(y)))continue;const W=new De(y+"-unhandled");W.wrappedNode=z,p.add(W),c.set(y,z)}for(const y of n)c.delete(y)},{debounce:100,immediate:!0});const _=ts("Alt");let S=!1;return Q([_,C],([a,n])=>{E.paused?S&&(E.unpause(),S=!1):(n&&G.pauseReason.has("MOUSEOVER")||n&&a&&G.pauseReason.has("ALTKEY"))&&(E.pause(),S=!0)}),Q([g,M],([a,n])=>{n&&a?x.define("~self",{test:y=>!!(y.author&&a)&&y.author.id===a.id,label:"You",color:"#3ad3e0"}):x.remove("~self")},{immediate:!0}),Q(se,a=>{a==="hidden"&&!E.paused?(E.pause(),v.value=!0):v.value&&(E.unpause(),v.value=!1)}),Q([g,O,$,re],([a,n,y,z])=>{const W=a?`\\b${a.username}\\b`:null;if(!W)return;const I=new RegExp(W,"i");n?(x.define("~mention",{test:j=>!!(a&&j.author&&j.author.username!==a.username&&I.test(j.body)),label:"Mentions You",color:"#e13232",soundPath:y?"#ping":void 0,flashTitleFn:z?j=>{var he;return`ðŸ”” @${((he=j.author)==null?void 0:he.username)??"A user"} mentioned you`}:void 0,flashTitle:!0,phrase:!0}),x.define("~reply",{test:j=>!!(j.parent&&j.parent.author&&j.author&&j.author.username!==j.parent.author.username&&I.test(j.parent.author.username)),label:"Replying to You",color:"#e13232",soundPath:y?"#ping":void 0,flashTitleFn:z?j=>{var he;return`ðŸ”” @${((he=j.author)==null?void 0:he.username)??"A user"} replied to you`}:void 0,flashTitle:!0,phrase:!0})):(x.remove("~mention"),x.remove("~reply"))},{immediate:!0}),s({onMessage:Re,onChatMessage:Se}),(a,n)=>(l(),d("main",{ref_key:"chatListEl",ref:t,class:"seventv-chat-list"},[(l(!0),d(q,null,we(w.value,y=>(l(),d("div",{key:y.sym,"msg-id":y.id,class:"seventv-message"},[y.instance?(l(),te(Ke(k(u)&&k(f).actor.roles.has("MODERATOR")&&y.author?Ko:"span"),_t(Oe({key:0},{msg:y})),{default:ie(()=>[(l(),te(Ke(y.instance),Oe(y.componentProps,{msg:y}),{default:ie(z=>[T(Ht,Oe(z,{msg:y,emotes:k(m).active,chatters:k(p).chattersByUsername}),null,16,["msg","emotes","chatters"])]),_:2},1040,["msg"]))]),_:2},1040)):(l(),te(Ao,{key:1,msg:y},null,8,["msg"]))],8,qo))),128))],512))}}),Xo=F(Zo,[["__scopeId","data-v-cc445f6b"]]),Jo={},Qo={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",fill:"currentColor",width:"1em",height:"1em"},en=e("path",{d:"M128 64H0V448H128V64zm192 0H192V448H320V64z"},null,-1),tn=[en];function sn(o,s){return l(),d("svg",Qo,tn)}const an=F(Jo,[["render",sn]]),qe=P(window.__twitch_pubsub_events);Object.defineProperty(window,"__twitch_pubsub_events",{set(o){qe.value=o},get(){return qe.value}});function Te(o,s){ss(qe,"notification",async r=>{let f;try{f=JSON.parse(r.detail)}catch(g){$e.error("Failed to parse pubsub message",g.message);return}f.type===o&&s(f.data)})}const on=Z({__name:"ChatPubSub",setup(o){const s=Ce(),r=Ze(s),f=X("highlights.basic.monitored_low_trust_user"),g=X("highlights.basic.returning_chatter"),m=X("highlights.basic.raider"),p={returning_chatter:0,raider:1};Te("low_trust_user_new_message",w),Te("low_trust_user_treatment_update",E),Te("moderation_action",G),Te("chat_rich_embed",x),Te("chat-highlight",se);async function w(C){const v=C.low_trust_user;if(!v||(r.lowTrustUsers[v.id]={id:v.low_trust_id,types:v.types,banEvasion:{likelihood:v.ban_evasion_evaluation,evaluatedAt:v.evaluated_at},sharedBanChannels:v.shared_ban_channel_ids,treatment:{type:v.treatment,updatedAt:v.updated_at,updatedBy:v.updated_by.login},channelSharedBansUpdatedAt:null},!f.value))return;const D=await r.awaitMessage(C.message_id).catch(u=>{$e.debug("failed to find new message for low trust user",u.message)});D&&D.setHighlight("#ff7d00","Monitored Suspicious User")}async function E(C){const v=r.lowTrustUsers[C.target_user_id];r.lowTrustUsers[C.target_user_id]={id:C.low_trust_id,types:C.types,banEvasion:{evaluatedAt:C.evaluated_at,likelihood:C.ban_evasion_evaluation},sharedBanChannels:(v==null?void 0:v.sharedBanChannels)??[],treatment:{type:C.treatment==="NO_TREATMENT"?"NONE":C.treatment,updatedAt:C.updated_at,updatedBy:C.updated_by.login},channelSharedBansUpdatedAt:null}}async function G(C){const v=C.moderation_action;if(v)switch(v){case"ban":case"timeout":{const D=r.messagesByUser(C.target_user_login);if(!D)return;const u=C.args[1]||null,U=C.args[2]??"";for(const O of D)O.moderation.banReason=U,O.moderation.actor=C.created_by_user_id?{id:C.created_by_user_id,username:C.created_by??"",displayName:C.created_by??"",color:""}:null,O.moderation.banDuration=u?parseInt(u):null,O.moderation.banned=!0;break}}}async function x(C){if(!C.twitch_metadata)return;const D=await r.awaitMessage(C.message_id).catch($=>{$e.debug("failed to find new message for chat rich embed",$.message)});if(!D)return;const{title:u,author_name:U,request_url:O,thumbnail_url:Y,twitch_metadata:M}=C;D.richEmbed.title=u,D.richEmbed.author_name=U,D.richEmbed.request_url=O,D.richEmbed.thumbnail_url=Y,D.richEmbed.twitch_metadata=M}async function se(C){const v=await r.awaitMessage(C.msg_id).catch(U=>{$e.debug("failed to find new message for chat highlight",U.message)});if(!v)return;const D=v.author?r.lowTrustUsers[v.author.id]:null;if(D&&D.treatment.type!=="NONE")return;const u=C.highlights.sort((U,O)=>p[O.type]-p[U.type]);for(const U of u)switch(U.type){case"raider":m.value&&v.setHighlight("#6dd126",v.first?"First Time Chat From Raider":"Raider");break;case"returning_chatter":g.value&&v.setHighlight("#3296e6","Returning Chatter");break}}return(C,v)=>null}}),nn=Z({__name:"ChatTray",setup(o){return(s,r)=>(l(!0),d(q,null,we(k(Lt),({parent:f,component:g,props:m},p)=>(l(),d(q,{key:p},[f.current?(l(),te(ft,{key:0,to:f.current},[(l(),te(Ke(g),_t(Gt(m)),null,16))],8,["to"])):B("",!0)],64))),128))}}),rn={id:"seventv-message-container",class:"seventv-message-container"},ln=Z({__name:"ChatController",props:{controller:{},room:{},list:{},buffer:{},events:{},presentation:{},restrictions:{}},setup(o){const s=o,r=Rt("chat"),{sendMessage:f}=rt(),{list:g,controller:m,room:p,presentation:w}=zt(s),E=document.createElement("seventv-container");E.id="seventv-chat-controller";const G=P(),x=P(E),se=P(null),C=P(E.getBoundingClientRect()),v=P(),D=P(""),u=Ce(s.controller.component.props.channelID,!0);u.setCurrentChannel({...u.base,id:u.id});const U=rt(),O=ut(u),Y=Ze(u),M=ht(u,{scroller:v,bounds:C}),$=He(u),re=xt(u),ve=X("chat.line_limit",150),ue=X("chat.ignore_clear_chat"),be=P(null),b=new Map,R=X("chat.font-april-fools",!1);Q(R,c=>{$.fontAprilFools=c===!1?"Comic Sans MS, Comic Sans, cursive":"inherit"},{immediate:!0}),Wt(()=>{if(!g.value||!g.value.domNodes)return;const c=g.value.domNodes.root;c&&(c.classList.add("seventv-chat-list"),x.value=c)});const N=P(null);Q(g,(c,_)=>{if(!(!c||!c.component)){if(_&&_.component&&c!==_){ne(_.component,"props");return}ke(c.component,"props",{value(S){N.value=S.messageHandlerAPI}})}},{immediate:!0});const t=P([]),ae=je(t,1e3);Q(ae,async c=>{if(c.length)for(const _ of t.value)_.id==="FrankerFaceZWasHere"||_.id==="BETTERTTV_EMOTES"||f("SYNC_TWITCH_SET",{input:ct(_)})}),Q(p,(c,_)=>{!c||!c.component||(_&&_.component&&c!==_&&ne(_.component,"props"),ke(p.value.component,"props",{value(S){switch($.twitchBadgeSets=S.badgeSets,$.primaryColorHex=S.primaryColorHex,D.value=`#${S.primaryColorHex??"755ebc"}`,document.body.style.setProperty("--seventv-channel-accent",D.value),$.useHighContrastColors=S.useHighContrastColors,$.showTimestamps=S.showTimestamps,$.showModerationIcons=S.showModerationIcons,$.pauseReason.clear(),$.pauseReason.add("SCROLL"),S.chatPauseSetting){case"MOUSEOVER_ALTKEY":$.pauseReason.add("ALTKEY"),$.pauseReason.add("MOUSEOVER");break;case"MOUSEOVER":$.pauseReason.add("MOUSEOVER");break;case"ALTKEY":$.pauseReason.add("ALTKEY");break}}}))},{immediate:!0}),ke(m.value.component,"props",{value(c){c.channelID&&(be.value={id:c.channelID,username:c.channelLogin,displayName:c.channelDisplayName,active:!0});const _=new Set;for(const[a,n]of[["VIP",c.isCurrentUserVIP],["EDITOR",c.isCurrentUserEditor],["MODERATOR",c.isCurrentUserModerator||c.channelID===c.userID],["BROADCASTER",c.channelID===c.userID]])n&&_.add(a);u.actor.roles=_,$.isDarkTheme=c.theme,Y.sendMessage=c.chatConnectionAPI.sendMessage,We(c.chatConnectionAPI,"sendMessage",function(a,...n){var y,z,W;if(((y=A.value)==null?void 0:y.size)!=0)for(const[I,j]of((z=A.value)==null?void 0:z.entries())??[])U.sendMessage("CHANNEL_ACTIVE_CHATTER",{channel:{id:I,username:j.login,displayName:j.displayName,active:!0}});else U.sendMessage("CHANNEL_ACTIVE_CHATTER",{channel:ct(u.base)});for(const I of((W=r.instance)==null?void 0:W.messageSendMiddleware.values())??[])n[0]=I(n[0]);return a==null?void 0:a.apply(this,n)});const S=c.emoteSetsData;!S||S.loading||(t.value=S.emoteSets)}});const A=P(null);Q(w,(c,_)=>{if(!(!c||!c.component)){if(_&&_.component&&c!==_){ne(_.component,"props");return}ke(c.component,"props",{value(S){A.value=S.sharedChatDataByChannelID;for(const a of A.value.keys())!b.has(a)&&a!=u.id&&b.set(a,Ce(a,!0))}})}},{immediate:!0});const J=Dt({parentSelector:".stream-chat",predicate:c=>c.props&&(c.props.onShowViewerCard||c.openUserCard)});J.then(([c])=>{c&&re.update("TWITCH","onShowViewerCard",c.props.onShowViewerCard??c.openUserCard)},()=>null),re.update("TWITCH","onShowViewerWarnPopover",(c,_,S)=>{const a=m.value.component.props;a.setWarnUserTarget({targetUserID:c,targetUserLogin:_}),a.setWarnUserPopoverPlacement(S)}),J instanceof Ut&&dt(Et(1e4)).toBeTruthy().then(()=>J.disconnect());const i=P(null),Re=je(i,100),Se=P(!0);Q(Se,c=>{var S;const _=(S=i.value)==null?void 0:S.buffer;c||!_||Le(_)});function Le(c){var S;if(!c.length)return;const _=[];for(const a of c){const n=new De(a.id);if(a.isHistorical||a.type===ee.CONNECTED){n.historical=!0,(S=G.value)==null||S.onChatMessage(n,a,!1),_.push(n);continue}}Y.displayed=_.concat(Y.displayed),Ne(()=>{M.scrollToLive(0)})}Q(Re,(c,_)=>{_&&c!==_?(ne(_,"blockedUsers"),ne(_,"props")):c&&(ke(c,"props",{value(S){Se.value=S.isLoadingHistoricalMessages}}),ke(c,"blockedUsers",{value(S){$.blockedUsers=S}}))}),Q(be,c=>{!c||!u.setCurrentChannel(c)||(Y.clear(),M.unpause(),Ne(O.reset))},{immediate:!0}),Q(()=>s.buffer,c=>{const _=c==null?void 0:c.component;_&&(i.value=_)},{immediate:!0});const Be=P(null);Q(()=>s.events,c=>{!c||!c.component||(Be.value=c.component)},{immediate:!0}),Q(Be,(c,_)=>{_&&ne(_,"onClearChatEvent"),c&&We(c,"onClearChatEvent",S=>{const a=new De().setComponent(Ye,{text:ue.value?"Chat clear prevented by 7TV":"Chat cleared by a moderator"});return ue.value||Y.clear(),Y.add(a),S==null?void 0:S.apply(this,[{channel:""}])})},{immediate:!0});const Me=new ResizeObserver(()=>{C.value=x.value.getBoundingClientRect()});return Me.observe(x.value),jt(()=>{Y.clear()}),Yt(()=>{Me.disconnect(),E.remove(),se.value&&se.value.classList.remove("seventv-checked"),$e.debug("<ChatController> Unmounted"),ne(m.value.component,"props"),g.value&&(ne(g.value.component.props,"messageHandlerAPI"),ne(g.value.component,"props")),p.value&&ne(p.value.component,"props"),document.body.style.removeProperty("--seventv-channel-accent")}),(c,_)=>(l(),d(q,null,[k(u).id?(l(),te(ft,{key:0,to:x.value},[T(Pe,{ref_key:"scrollerRef",ref:v,class:"seventv-chat-scroller",style:ye({fontFamily:k($).fontAprilFools}),onContainerScroll:k(M).onScroll,onContainerWheel:k(M).onWheel,onMouseenter:_[1]||(_[1]=S=>k($).hovering=!0),onMouseleave:_[2]||(_[2]=S=>k($).hovering=!1)},{default:ie(()=>[e("div",rn,[T(Xo,{ref_key:"chatList",ref:G,list:k(g),restrictions:c.restrictions,"shared-chat-data":A.value,"message-handler":N.value},null,8,["list","restrictions","shared-chat-data","message-handler"])]),k(M).paused?(l(),d("div",{key:0,class:"seventv-message-buffer-notice",onClick:_[0]||(_[0]=(...S)=>k(M).unpause&&k(M).unpause(...S))},[T(an),k(M).pauseBuffer.length?(l(),d("span",{key:0,class:Ve({capped:k(M).pauseBuffer.length>=k(ve)})},h(k(M).pauseBuffer.length),3)):B("",!0),e("span",null,h(k(M).pauseBuffer.length>0?"new messages":"Chat Paused"),1)])):B("",!0)]),_:1},8,["style","onContainerScroll","onContainerWheel"]),k(u).loaded?(l(),te(Qt,{key:0})):B("",!0)],8,["to"])):B("",!0),T(nn),T(on)],64))}}),cn=["checked","disabled"],Ie=Z({__name:"FormCheckbox",props:{checked:{type:Boolean},disabled:{type:Boolean}},emits:["update:checked","update:modelValue"],setup(o,{emit:s}){const r=s;function f(g){const m=g.target.checked;r("update:checked",m),r("update:modelValue",m)}return(g,m)=>(l(),d("div",null,[e("input",{id:"checkbox",checked:g.checked,disabled:g.disabled,type:"checkbox",onChange:f},null,40,cn)]))}}),dn=["type","error","autofocus","value","placeholder"],un=Z({__name:"FormInput",props:{label:{},modelValue:{},type:{default:"text"},icon:{},error:{type:Boolean},width:{},appearance:{default:"outline"},autofocus:{type:Boolean}},emits:["update:modelValue","blur"],setup(o,{expose:s,emit:r}){Kt(w=>({cd2da29c:w.width}));const f=o,g=r,m=w=>g("update:modelValue",w.target.value),p=P(null);return s({focus:()=>{var w;return(w=p.value)==null?void 0:w.focus()}}),mt(()=>{p.value&&f.autofocus&&p.value.focus()}),(w,E)=>(l(),d("input",{ref_key:"inputEl",ref:p,type:w.type,autocomplete:"noidontthinkso","data-form-type":"other",error:w.error,autofocus:w.autofocus,value:w.modelValue,placeholder:w.label,onInput:m,onBlur:E[0]||(E[0]=G=>g("blur"))},null,40,dn))}}),de=F(un,[["__scopeId","data-v-5bc955fa"]]),hn={},pn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},mn=e("path",{d:"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 32a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm-96-32a96 96 0 1 0 192 0 96 96 0 1 0 -192 0zM96 240c0-35 17.5-71.1 45.2-98.8S205 96 240 96c8.8 0 16-7.2 16-16s-7.2-16-16-16c-45.4 0-89.2 22.3-121.5 54.5S64 194.6 64 240c0 8.8 7.2 16 16 16s16-7.2 16-16z"},null,-1),_n=[mn];function fn(o,s){return l(),d("svg",pn,_n)}const ze=F(hn,[["render",fn]]),le=o=>(fe("data-v-a026755a"),o=o(),ge(),o),gn={class:"seventv-settings-custom-highlights"},vn=le(()=>e("div",{class:"tabs"},null,-1)),bn={class:"list"},yn=le(()=>e("u",null,[e("h5",null,"Phrases & Words")],-1)),wn=le(()=>e("div",{class:"phrase-item item heading"},[e("div",null,"Pattern"),e("div",null,"Label"),e("div",{class:"centered"},"Flash Title"),e("div",{class:"centered"},"RegExp"),e("div",null,"Case Sensitive"),e("div",null,"Color")],-1)),Cn=["onClick"],Sn=["onClick"],kn={name:"flash-title",class:"centered"},$n={name:"is-regexp",class:"centered"},Mn={name:"case-sensitive",class:"centered"},Tn={name:"color"},In=["onUpdate:modelValue","onInput"],En={class:"sound-options"},Dn=["active","onClick"],Vn=["active","onClick"],Rn=["active"],Bn={key:0},Un=["onInput"],Pn={class:"item create-new"},Nn={name:"pattern"},Hn=le(()=>e("hr",{class:"solid"},null,-1)),An=le(()=>e("u",null,[e("h5",null,"Badges")],-1)),Ln=le(()=>e("div",{class:"badge-item item heading"},[e("div",null,"Badge ID"),e("div",null,"Version"),e("div",null,"Label"),e("div",null,"Badge"),e("div",{class:"centered"},"Flash Title"),e("div",null,"Color")],-1)),xn=["onClick"],On=["onClick"],Fn=["onClick"],Gn={name:"badgeURL"},zn=["onUpdate:modelValue","src"],Wn={name:"flash-title",class:"centered"},jn={name:"color"},Yn=["onUpdate:modelValue","onInput"],Kn={class:"sound-options"},qn=["active","onClick"],Zn=["active","onClick"],Xn=["active"],Jn={key:0},Qn=["onInput"],ei={class:"item create-new"},ti={name:"badge"},si=le(()=>e("option",{value:"",disabled:"",selected:""},"New Badge Highlight",-1)),ai=le(()=>e("hr",{class:"solid"},null,-1)),oi=le(()=>e("u",null,[e("h5",null,"Usernames")],-1)),ni=le(()=>e("div",{class:"username-item item heading"},[e("div",null,"Username"),e("div",null,"Label"),e("div",{class:"centered"},"Flash Title"),e("div",null,"Color")],-1)),ii=["onClick"],ri=["onClick"],li={name:"flash-title",class:"centered"},ci={name:"color"},di=["onUpdate:modelValue","onInput"],ui={class:"sound-options"},hi=["active","onClick"],pi=["active","onClick"],mi=["active"],_i={key:0},fi=["onInput"],gi={class:"item create-new"},vi={name:"pattern"},bi=Z({__name:"SettingsConfigHighlights",setup(o){var be;const s=Ce(),r=pt(s),f=He(s),g=P(""),m=P(""),p=P(""),w=Ae({pattern:new WeakMap,label:new WeakMap,version:new WeakMap}),E=P(),G=P(),x=P(),se=(be=me(f,"twitchBadgeSets").value)==null?void 0:be.globalsBySet,C=[];se.forEach(b=>{b.forEach(R=>{C.push(R)})});function v(b,R){const N=w[R].get(b);N&&N.focus()}function D(b,R){if(!w[R].get(b))return;const t=rs();r.updateId("new-highlight",t),r.save()}function u(b,R){b.flashTitle=R,r.updateFlashTitle(b),r.save()}function U(b,R){b.regexp=R,r.save()}function O(b,R){b.caseSensitive=R,r.save()}function Y(b,R){if(!(R.target instanceof HTMLInputElement))return;const N=R.target.value;b.color=N,r.save()}function M(b,R){var ae;if(!(R.target instanceof HTMLInputElement))return;const N=(ae=R.target.files)==null?void 0:ae[0];if(!N)return;const t=new FileReader;t.onload=A=>{if(!(A.target instanceof FileReader))return;const J=A.target.result;if(J instanceof ArrayBuffer){if(J.byteLength>50*1024)return alert("File is too large! (max 50KB)");delete b.soundPath,b.soundFile={name:N.name,type:N.type,data:J},r.updateSoundData(b),r.save()}},R.target.value="",t.readAsArrayBuffer(N)}function $(b){delete b.soundFile,delete b.soundDef,b.soundPath="#ping",r.save()}function re(b){delete b.soundFile,delete b.soundPath,delete b.soundDef,r.updateSoundData(b),r.save()}function ve(b){r.remove(b.id),r.save()}function ue(b,R){Q(b,(N,t)=>{if(!N||t)return;const ae=r.define(p.value?b.value:"new-highlight",{color:"#8803fc",label:p.value?b.value.split(/\s*\|\s*/)[0]:"",badgeURL:p.value?C.find(A=>A.setID===b.value.split(/\s*\|\s*/)[1]&&A.version===b.value.split(/\s*\|\s*/)[2]).image1x:"",version:p.value?b.value.split(/\s*\|\s*/)[2]:"",pattern:p.value?b.value.split(/\s*\|\s*/)[1]:b.value,[R]:!0},!0);Ne(()=>{const A=w.pattern.get(ae);A&&(A.focus(),b.value="")})})}return ue(g,"phrase"),ue(m,"username"),ue(p,"badge"),(b,R)=>{const N=qt("tooltip");return l(),d("main",gn,[vn,e("div",bn,[yn,wn,T(Pe,null,{default:ie(()=>[(l(!0),d(q,null,we(k(r).getAllPhraseHighlights(),(t,ae,A)=>{var J;return l(),d("div",{key:t.id,class:"phrase-item item"},[e("div",{name:"pattern",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"pattern")},[e("span",null,h(t.pattern),1),T(de,{ref_for:!0,ref:i=>w.pattern.set(t,i),modelValue:t.pattern,"onUpdate:modelValue":i=>t.pattern=i,onBlur:i=>D(t,"pattern")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Cn),e("div",{name:"label",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"label")},[e("span",null,h(t.label),1),T(de,{ref_for:!0,ref:i=>w.label.set(t,i),modelValue:t.label,"onUpdate:modelValue":i=>t.label=i,onBlur:i=>D(t,"label")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Sn),e("div",kn,[T(Ie,{checked:!!t.flashTitle,"onUpdate:checked":i=>u(t,i)},null,8,["checked","onUpdate:checked"])]),e("div",$n,[T(Ie,{checked:!!t.regexp,disabled:t.username,"onUpdate:checked":i=>U(t,i)},null,8,["checked","disabled","onUpdate:checked"])]),e("div",Mn,[T(Ie,{checked:!!t.caseSensitive,disabled:t.username,"onUpdate:checked":i=>O(t,i)},null,8,["checked","disabled","onUpdate:checked"])]),e("div",Tn,[oe(e("input",{"onUpdate:modelValue":i=>t.color=i,type:"color",onInput:i=>Y(t,i)},null,40,In),[[Ue,t.color]])]),e("div",{ref_for:!0,ref_key:"interactRefPhrases",ref:E,name:"interact"},[e("button",{ref_for:!0,ref:"soundEffectButton",class:Ve(["sound-button",{"has-sound":!!t.soundFile}]),tabindex:"0"},[oe(T(ze,null,null,512),[[N,"Set Custom Sound"]]),e("div",En,[(J=E.value)!=null&&J[A]?(l(),te(Fe,{key:0,anchor:E.value[A]},{default:ie(()=>[e("button",{active:!t.soundPath&&!t.soundFile,onClick:i=>re(t)}," No Sound ",8,Dn),e("button",{active:!!t.soundPath&&!t.soundFile,onClick:i=>$(t)}," Default Sound ",8,Vn),e("button",{active:!!t.soundFile},[e("label",null,[H(" Custom Sound"+h(t.soundFile?"":"...")+" ",1),t.soundFile?(l(),d("p",Bn,h(t.soundFile.name),1)):B("",!0),e("input",{type:"file",accept:"audio/midi, audio/mpeg, audio/ogg, audio/wav, audio/webm, audio/vorbis, audio/ogg",onInput:i=>M(t,i)},null,40,Un)])],8,Rn)]),_:2},1032,["anchor"])):B("",!0)])],2),oe(T(xe,{tabindex:"0",onClick:i=>ve(t)},null,8,["onClick"]),[[N,"Remove"]])],512)])}),128))]),_:1}),e("div",Pn,[e("div",Nn,[T(de,{modelValue:g.value,"onUpdate:modelValue":R[0]||(R[0]=t=>g.value=t),label:"New Phrase Highlight..."},{default:ie(()=>[H(" hi ")]),_:1},8,["modelValue"])])]),Hn,An,Ln,T(Pe,null,{default:ie(()=>[(l(!0),d(q,null,we(k(r).getAllBadgeHighlights(),(t,ae,A)=>{var J;return l(),d("div",{key:t.id,class:"badge-item item"},[e("div",{name:"pattern",class:"use-virtual-input",contenteditable:"false",tabindex:"0",onClick:i=>v(t,"pattern")},[e("span",null,h(t.pattern),1),T(de,{ref_for:!0,ref:i=>w.pattern.set(t,i),modelValue:t.pattern,"onUpdate:modelValue":i=>t.pattern=i,onBlur:i=>D(t,"pattern")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,xn),e("div",{name:"version",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"version")},[e("span",null,h(t.version),1),T(de,{ref_for:!0,ref:i=>w.version.set(t,i),modelValue:t.version,"onUpdate:modelValue":i=>t.version=i,onBlur:i=>D(t,"version")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,On),e("div",{name:"label",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"label")},[e("span",null,h(t.label),1),T(de,{ref_for:!0,ref:i=>w.label.set(t,i),modelValue:t.label,"onUpdate:modelValue":i=>t.label=i,onBlur:i=>D(t,"label")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Fn),e("div",Gn,[oe(e("input",{"onUpdate:modelValue":i=>t.badgeURL=i,type:"image",src:t.badgeURL},null,8,zn),[[Ue,t.badgeURL]])]),e("div",Wn,[T(Ie,{checked:!!t.flashTitle,"onUpdate:checked":i=>u(t,i)},null,8,["checked","onUpdate:checked"])]),e("div",jn,[oe(e("input",{"onUpdate:modelValue":i=>t.color=i,type:"color",onInput:i=>Y(t,i)},null,40,Yn),[[Ue,t.color]])]),e("div",{ref_for:!0,ref_key:"interactRefBadges",ref:x,name:"interact"},[e("button",{ref_for:!0,ref:"soundEffectButton",class:Ve(["sound-button",{"has-sound":!!t.soundFile}]),tabindex:"0"},[oe(T(ze,null,null,512),[[N,"Set Custom Sound"]]),e("div",Kn,[(J=x.value)!=null&&J[A]?(l(),te(Fe,{key:0,anchor:x.value[A]},{default:ie(()=>[e("button",{active:!t.soundPath&&!t.soundFile,onClick:i=>re(t)}," No Sound ",8,qn),e("button",{active:!!t.soundPath&&!t.soundFile,onClick:i=>$(t)}," Default Sound ",8,Zn),e("button",{active:!!t.soundFile},[e("label",null,[H(" Custom Sound"+h(t.soundFile?"":"...")+" ",1),t.soundFile?(l(),d("p",Jn,h(t.soundFile.name),1)):B("",!0),e("input",{type:"file",accept:"audio/midi, audio/mpeg, audio/ogg, audio/wav, audio/webm, audio/vorbis, audio/ogg",onInput:i=>M(t,i)},null,40,Qn)])],8,Xn)]),_:2},1032,["anchor"])):B("",!0)])],2),oe(T(xe,{tabindex:"0",onClick:i=>ve(t)},null,8,["onClick"]),[[N,"Remove"]])],512)])}),128))]),_:1}),e("div",ei,[e("div",ti,[oe((l(),d("select",{"onUpdate:modelValue":R[1]||(R[1]=t=>p.value=t),autocomplete:"on"},[si,(l(),d(q,null,we(C,t=>e("option",{key:t.title},h(t.title)+" | "+h(t.setID)+" | "+h(t.version),1)),64))])),[[Zt,p.value],[N,"Badge to highlight"]])])]),ai,oi,ni,T(Pe,null,{default:ie(()=>[(l(!0),d(q,null,we(k(r).getAllUsernameHighlights(),(t,ae,A)=>{var J;return l(),d("div",{key:t.id,class:"username-item item"},[e("div",{name:"pattern",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"pattern")},[e("span",null,h(t.pattern),1),T(de,{ref_for:!0,ref:i=>w.pattern.set(t,i),modelValue:t.pattern,"onUpdate:modelValue":i=>t.pattern=i,onBlur:i=>D(t,"pattern")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,ii),e("div",{name:"label",class:"use-virtual-input",tabindex:"0",onClick:i=>v(t,"label")},[e("span",null,h(t.label),1),T(de,{ref_for:!0,ref:i=>w.label.set(t,i),modelValue:t.label,"onUpdate:modelValue":i=>t.label=i,onBlur:i=>D(t,"label")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,ri),e("div",li,[T(Ie,{checked:!!t.flashTitle,"onUpdate:checked":i=>u(t,i)},null,8,["checked","onUpdate:checked"])]),e("div",ci,[oe(e("input",{"onUpdate:modelValue":i=>t.color=i,type:"color",onInput:i=>Y(t,i)},null,40,di),[[Ue,t.color]])]),e("div",{ref_for:!0,ref_key:"interactRefUsernames",ref:G,name:"interact"},[e("button",{ref_for:!0,ref:"soundEffectButton",class:Ve(["sound-button",{"has-sound":!!t.soundFile}]),tabindex:"0"},[oe(T(ze,null,null,512),[[N,"Set Custom Sound"]]),e("div",ui,[(J=G.value)!=null&&J[A]?(l(),te(Fe,{key:0,anchor:G.value[A]},{default:ie(()=>[e("button",{active:!t.soundPath&&!t.soundFile,onClick:i=>re(t)}," No Sound ",8,hi),e("button",{active:!!t.soundPath&&!t.soundFile,onClick:i=>$(t)}," Default Sound ",8,pi),e("button",{active:!!t.soundFile},[e("label",null,[H(" Custom Sound"+h(t.soundFile?"":"...")+" ",1),t.soundFile?(l(),d("p",_i,h(t.soundFile.name),1)):B("",!0),e("input",{type:"file",accept:"audio/midi, audio/mpeg, audio/ogg, audio/wav, audio/webm, audio/vorbis, audio/ogg",onInput:i=>M(t,i)},null,40,fi)])],8,mi)]),_:2},1032,["anchor"])):B("",!0)])],2),oe(T(xe,{tabindex:"0",onClick:i=>ve(t)},null,8,["onClick"]),[[N,"Remove"]])],512)])}),128))]),_:1}),e("div",gi,[e("div",vi,[T(de,{modelValue:m.value,"onUpdate:modelValue":R[2]||(R[2]=t=>m.value=t),label:"New Username Highlight..."},{default:ie(()=>[H(" hi ")]),_:1},8,["modelValue"])])])])])}}}),yi=F(bi,[["__scopeId","data-v-a026755a"]]),wi={infer:"Infer",12:"12-hour",24:"24-hour"},Ci=Object.entries(wi).map(([o,s])=>[s,o]),Si=[V("chat.show_emote_modifiers","TOGGLE",{path:["Chat","Style"],label:"Show Emote Modifiers",hint:"Show text pollution from BTTV and FFZ emote modifiers (!w, ffzHyper, etc.). Modifiers are not supported yet, this setting only affects the display of their text form",defaultValue:!1}),V("chat.mod_slider","TOGGLE",{path:["Chat","Moderation"],label:"Mod Slider",hint:"Enable the mod slider in channels where you are moderator",defaultValue:!0}),V("chat.mod_messages","TOGGLE",{path:["Chat","Moderation"],label:"Moderation Messages",hint:"If enabled, you will see timeouts/bans in the chat even if you are not a moderator",defaultValue:!1}),V("chat.ignore_clear_chat","TOGGLE",{path:["Chat","Moderation"],label:"Ignore Clear Chat",hint:"If enabled, messages will be kept intact when a moderator clears the chat",defaultValue:!0}),V("chat.slash_me_style","DROPDOWN",{path:["Chat","Style"],label:"/me Style",hint:"How the /me type messages should be displayed",options:[["Nothing",0],["Italic",1],["Colored",2],["Italic + Colored",3]],defaultValue:2}),V("chat.message_batch_duration","SLIDER",{path:["Chat","Performance"],label:"Message Batching",hint:"The time to wait between rendering new messages. Higher values may improve performance and readability, at the cost of chat feeling less responsive",options:{min:25,max:1e3,step:25,unit:"ms",named_thresolds:[[0,50,"Instant"],[50,250,"Fast"],[250,500,"Balanced"],[500,999,"Slow"],[1e3,1e3,"PowerPoint Presentation"]]},defaultValue:250}),V("chat.smooth_scroll_duration","SLIDER",{path:["Chat","Performance"],label:"Smooth scroll chat",hint:"Smoothly scroll new messages into view. This may impact performance.",options:{min:0,max:1500,step:100,unit:"ms"},defaultValue:0}),V("chat.line_limit","SLIDER",{path:["Chat","Performance"],label:"Message Buffer Capacity",hint:"Define the maximum amount of messages displayed in chat. Higher values may affect performance",options:{min:50,max:1e3,step:10,unit:"lines",named_thresolds:[[0,750,""],[751,1e3,"Performance Warning!"]]},defaultValue:150}),V("ui.compact_tooltips","TOGGLE",{path:["Appearance","Style"],label:"Compact tooltips",hint:"Make the tooltips compact instead of showing the full emote",defaultValue:!1}),V("chat.padding","DROPDOWN",{path:["Chat","Style"],label:"Padding Style",ffz_key:"chat.lines.padding",ffz_transform(o){return o?1:0},effect(o){document.body.style.setProperty("--seventv-chat-padding",{0:"1rem",1:"2rem"}[o]??null)},hint:"Change the padding style of chat lines",options:[["Full-Width",0],["Native (Twitch-like)",1]],defaultValue:1}),V("chat.font_size","SLIDER",{path:["Chat","Style"],label:"Font Size",ffz_key:"chat.font-size",ffz_transform(o){return typeof o=="number"?o:13},effect(o){typeof o=="number"&&(o!==13?document.body.style.setProperty("--seventv-chat-font-size",`${o}px`):document.body.style.removeProperty("--seventv-chat-font-size"))},hint:"Change the size of text in chat, when set to default the size will be inferred from Twitch appearence settings",options:{min:1,max:30,step:1,unit:"px",named_values:[[13,13,"Default"]]},defaultValue:13}),V("chat.colored_mentions","DROPDOWN",{path:["Chat","Style"],label:"Mention Style",hint:"Control how mentions are displayed in chat",options:[["Default",0],["Colored",1],["Painted",2]],transform(o){return o===!1?0:2},defaultValue:1}),V("chat.deleted_messages","DROPDOWN",{path:["Chat","Style"],label:"Deleted Message Style",hint:"Control how deleted messages are displayed in chat",effect(o){switch(document.body.style.removeProperty("--seventv-chat-deleted-display"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0.5"),document.body.style.setProperty("--seventv-chat-deleted-prefix","â€”"),o){case 0:document.body.style.setProperty("--seventv-chat-deleted-decoration","none"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0"),document.body.style.setProperty("--seventv-chat-deleted-display","none"),document.body.style.setProperty("--seventv-chat-deleted-prefix","");break;case 1:document.body.style.setProperty("--seventv-chat-deleted-decoration","none");break;case 2:document.body.style.setProperty("--seventv-chat-deleted-decoration","line-through");break;case 3:document.body.style.removeProperty("--seventv-chat-deleted-decoration"),document.body.style.removeProperty("--seventv-chat-deleted-opacity");break}},options:[["Hidden",0],["Dimmed",1],["Strikethrough",2],["Keep",3]],defaultValue:1}),V("chat.timestamp_with_seconds","TOGGLE",{path:["Chat","Style"],label:"Timestamp Seconds",hint:"If checked, timestamps in chat will also show seconds",defaultValue:!1}),V("chat.timestamp_format","DROPDOWN",{path:["Chat","Style"],label:"Timestamp Format",defaultValue:"infer",hint:"Infer will get the format from the current locale.",options:Ci}),V("chat.user_card","TOGGLE",{path:["Chat","Tools"],label:"Improve the User Card",hint:"Replace the default user card with a faster, more useful version",defaultValue:!0}),V("chat.copy_icon_toggle","TOGGLE",{path:["Chat","Tools"],label:"Copy Icon",hint:"Show a 'Copy' icon when hovering over a chat message to copy the message",defaultValue:!0}),V("highlights.basic.mention","TOGGLE",{path:["Highlights","Built-In"],label:"Show Mention Highlights",hint:"Whether or not to highlight messages that mention or reply to you in chat",defaultValue:!0}),V("highlights.basic.mention_sound","TOGGLE",{path:["Highlights","Built-In"],label:"Play Sound on Mention",hint:"Play a sound when you are mentioned in chat",disabledIf:()=>!X("highlights.basic.mention").value,defaultValue:!1}),V("highlights.basic.mention_title_flash","TOGGLE",{path:["Highlights","Built-In"],label:"Flash Title on Mention",hint:"When tabbed out, the username of users who mention you will flash in the title",disabledIf:()=>!X("highlights.basic.mention").value,defaultValue:!0}),V("highlights.basic.monitored_low_trust_user","TOGGLE",{path:["Highlights","Built-In"],label:"Show Monitored Suspicious User Highlights (Moderator only)",hint:"Whether or not to highlight users who are a monitored suspicious user",defaultValue:!0}),V("highlights.basic.restricted_low_trust_user","TOGGLE",{path:["Highlights","Built-In"],label:"Show Restricted Suspicious User Highlights (Moderator only)",hint:"Whether or not to highlight users who are a restricted suspicious user",defaultValue:!0}),V("highlights.basic.returning_chatter","TOGGLE",{path:["Highlights","Built-In"],label:"Show Returning Chatters (Moderator only)",hint:"Whether or not to highlight users who have returned",defaultValue:!1}),V("highlights.basic.raider","TOGGLE",{path:["Highlights","Built-In"],label:"Show Raiders (Moderator only)",hint:"Whether or not to highlight users who are part of a raid",defaultValue:!0}),V("highlights.basic.first_time_chatter","TOGGLE",{path:["Highlights","Built-In"],label:"Show First-Time Chatter Highlights",hint:"Whether or not to highlight users who are chatting for the first time",defaultValue:!0}),V("highlights.basic.self","TOGGLE",{path:["Highlights","Built-In"],label:"Show Highlights for Your Own Messages",hint:"Whether or not to highlight messages sent by yourself",defaultValue:!1}),V("highlights.custom","CUSTOM",{path:["Highlights",""],custom:{component:Xt(yi),gridMode:"new-row"},label:"Custom Highlights",hint:"Create custom highlights for specific words, phrases or all messages from specific users",defaultValue:new Map}),V("highlights.sound_volume","SLIDER",{path:["Highlights","Built-In"],label:"Highlight Sound Volume",hint:"Control the volume at which sound plays upon being mentioned",options:{min:0,max:100,step:1,unit:"%"},defaultValue:75}),V("highlights.display_style","DROPDOWN",{path:["Highlights","Style"],label:"Highlighted Message Style",hint:"Choose how or if, to show highlighted messages in chat",options:[["Standard",0],["Minimal (Solid color)",1],["None (No visual)",2]],defaultValue:0}),V("highlights.opacity","SLIDER",{path:["Highlights","Style"],label:"Highlight Opacity",hint:"Change how bright highlights apear in chat",options:{min:0,max:100,step:1},defaultValue:10}),V("chat.hide_bits_balance","TOGGLE",{label:"Hide Bits From Community Points Button",hint:"Hide the bits balance from the community points button under the chatbox",path:["Chat","Style"],defaultValue:!1}),V("chat.hide_shared_chat","TOGGLE",{label:"Hide Shared Chat",hint:"Hides messages from other chats",path:["Chat","Style"],defaultValue:!1})],ki=Z({__name:"ChatModule",setup(o,{expose:s}){const{dependenciesMet:r,markAsReady:f}=Bt("chat",{name:"Chat",depends_on:[]}),g=Ae(new WeakMap),m=pe({parentSelector:".chat-room__content",maxDepth:100,predicate:u=>{var U;return((U=u.props)==null?void 0:U.primaryColorHex)!==void 0}}),p=pe({parentSelector:".chat-room__content",maxDepth:100,predicate:u=>u.scrollRef},{trackRoot:!0,hooks:{render:function(u){return u.component.props.children.map(O=>O.key?Vt(u,O.key,O):null)}}}),w=pe({parentSelector:".chat-shell, .stream-chat",maxDepth:250,predicate:u=>{var U;return u.pushMessage&&((U=u.props)==null?void 0:U.messageHandlerAPI)}},{hooks:{update(u){g.set(u,!!u.component.props.channelID)}}}),E=pe({parentSelector:".stream-chat",maxDepth:250,predicate:u=>u.prependHistoricalMessages&&u.buffer&&u.blockedUsers}),G=pe({parentSelector:".stream-chat",maxDepth:250,predicate:u=>u.onClearChatEvent}),x=X("chat.hide_bits_balance");pe({childSelector:".community-points-summary",predicate:u=>u.shouldShowBitsBalance},{functionHooks:{shouldShowBitsBalance(u){return x.value?!1:u.call(this)}}});const se=pe({parentSelector:".stream-chat",predicate:u=>u.props&&u.props.sharedChatDataByChannelID}),C=pe({parentSelector:".stream-chat",predicate:u=>u.getRestrictions&&u.onChatEvent}),v=P(!1),D=je(v,200);return Q(()=>[w.instances,w.instances],([u,U])=>v.value=u.length===U.length,{immediate:!0}),f(),s({chatController:w,chatList:p,chatRoom:m,messageSendMiddleware:new Map}),(u,U)=>(l(!0),d(q,null,we(k(w).instances,(O,Y)=>(l(),d(q,{key:O.identifier},[k(r)&&k(D)&&g.get(O)?(l(),te(ln,{key:0,list:k(p).instances[0]??void 0,controller:k(w).instances[Y],room:k(m).instances[0]??void 0,buffer:k(E).instances[0]??void 0,events:k(G).instances[0]??void 0,presentation:k(se).instances[0]??void 0,restrictions:k(C).instances[0]??void 0},null,8,["list","controller","room","buffer","events","presentation","restrictions"])):B("",!0)],64))),128))}}),Gi=Object.freeze(Object.defineProperty({__proto__:null,config:Si,default:ki},Symbol.toStringTag,{value:"Module"}));export{Gi as _};
