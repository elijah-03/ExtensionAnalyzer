!function(){function KR(ZW,LJ,pW){function sG(Us,fP){if(!LJ[Us]){if(!ZW[Us]){var es="function"==typeof require&&require;if(!fP&&es)return es(Us,!0);if(YJ)return YJ(Us,!0);var UH=new Error("Cannot find module '"+Us+"'");throw UH.code="MODULE_NOT_FOUND",UH}var Bh=LJ[Us]={exports:{}};ZW[Us][0].call(Bh.exports,(function(KR){var LJ;return sG(ZW[Us][1][KR]||KR)}),Bh,Bh.exports,KR,ZW,LJ,pW)}return LJ[Us].exports}for(var YJ="function"==typeof require&&require,Us=0;Us<pW.length;Us++)sG(pW[Us]);return sG}return KR}()({1:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.IMG_FILTER_ID=LJ.MSG_CLEANUP=LJ.ROOT_VARS_PREFIX=LJ.META_PROPERTY=LJ.STYLESHEET_COMMON_CLASSNAME=LJ.PROXY_SELECTOR=LJ.EVENT_PREFIX=LJ.STYLESHEET_CORS_SELECTOR=LJ.STYLESHEET_SYNC_SELECTOR=LJ.STYLESHEET_ROOT_VARS_SELECTOR=LJ.STYLESHEET_INLINE_SELECTOR=LJ.STYLESHEET_OVERRIDE_SELECTOR=LJ.STYLESHEET_VARIABLES_SELECTOR=LJ.STYLESHEET_INVERT_SELECTOR=LJ.STYLESHEET_TEXT_SELECTOR=LJ.STYLESHEET_USER_AGENT_SELECTOR=LJ.STYLESHEET_FALLBACK_SELECTOR=LJ.MISC_PREFIX=void 0;const pW=KR("./prefix");LJ.MISC_PREFIX=pW.PREFIX,LJ.STYLESHEET_FALLBACK_SELECTOR=`.${pW.PREFIX}-fb`,LJ.STYLESHEET_USER_AGENT_SELECTOR=`.${pW.PREFIX}-ua`,LJ.STYLESHEET_TEXT_SELECTOR=`.${pW.PREFIX}-tx`,LJ.STYLESHEET_INVERT_SELECTOR=`.${pW.PREFIX}-iv`,LJ.STYLESHEET_VARIABLES_SELECTOR=`.${pW.PREFIX}-vb`,LJ.STYLESHEET_OVERRIDE_SELECTOR=`.${pW.PREFIX}-or`,LJ.STYLESHEET_INLINE_SELECTOR=`.${pW.PREFIX}-il`,LJ.STYLESHEET_ROOT_VARS_SELECTOR=`.${pW.PREFIX}-rv`,LJ.STYLESHEET_SYNC_SELECTOR=`.${pW.PREFIX}-sn`,LJ.STYLESHEET_CORS_SELECTOR=`.${pW.PREFIX}-cr`,LJ.EVENT_PREFIX=`__${pW.PREFIX}__`,LJ.PROXY_SELECTOR=`.${pW.PREFIX}-pr`,LJ.STYLESHEET_COMMON_CLASSNAME=`${pW.PREFIX}m2`,LJ.META_PROPERTY=pW.PREFIX,LJ.ROOT_VARS_PREFIX=pW.PREFIX,LJ.MSG_CLEANUP=LJ.EVENT_PREFIX+"cleanUp",LJ.IMG_FILTER_ID=`${pW.PREFIX}-image-filter`},{"./prefix":29}],2:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0});const pW=KR("../const"),sG=KR("../defaults"),YJ=KR("./dynamic-theme"),Us=KR("./utils/dom");async function fP(KR,ZW,LJ){"cleanStyle"===(null==KR?void 0:KR.action)&&(0,YJ.removeDynamicTheme)()}function es(){(0,Us.removeNode)(document.querySelector(pW.STYLESHEET_FALLBACK_SELECTOR))}async function UH(){chrome.runtime.onMessage.addListener(fP);const KR=await chrome.runtime.sendMessage({action:"getStyle"});if(KR){const ZW=window.top===window;(0,YJ.createOrUpdateDynamicTheme)(sG.DEFAULT_THEME,KR,ZW)}else es()}UH()},{"../const":1,"../defaults":20,"./dynamic-theme":7,"./utils/dom":18}],3:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.createAdoptedStyleSheetOverride=void 0;const pW=KR("./stylesheet-modifier"),sG=new WeakMap,YJ=new WeakSet;function Us(KR){let ZW=!1;function LJ(ZW,LJ){const pW=[...KR.adoptedStyleSheets],sG=pW.indexOf(ZW),YJ=pW.indexOf(LJ);sG!==YJ-1&&(YJ>=0&&pW.splice(YJ,1),pW.splice(sG+1,0,LJ),KR.adoptedStyleSheets=pW)}function Us(){ZW=!0;const LJ=[...KR.adoptedStyleSheets];KR.adoptedStyleSheets.forEach((KR=>{if(YJ.has(KR)){const ZW=LJ.indexOf(KR);ZW>=0&&LJ.splice(ZW,1),sG.delete(KR),YJ.delete(KR)}})),KR.adoptedStyleSheets=LJ}function fP(Us,fP){KR.adoptedStyleSheets.forEach((KR=>{if(YJ.has(KR))return;const es=KR.rules,UH=new CSSStyleSheet;function Bh(){for(let KR=UH.cssRules.length-1;KR>=0;KR--)UH.deleteRule(KR);return LJ(KR,UH),sG.set(KR,UH),YJ.add(UH),UH}const c=undefined;(0,pW.createStyleSheetModifier)().modifySheet({prepareSheet:Bh,sourceCSSRules:es,theme:Us,ignoreImageAnalysis:fP,force:!1,isAsyncCancelled:()=>ZW})}))}return{render:fP,destroy:Us}}LJ.createAdoptedStyleSheetOverride=Us},{"./stylesheet-modifier":14}],4:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.replaceCSSFontFace=LJ.removeCSSComments=LJ.replaceCSSRelativeURLsWithAbsolute=LJ.getCSSBaseBath=LJ.getCSSURLValue=LJ.cssImportRegex=LJ.cssURLRegex=LJ.iterateCSSDeclarations=LJ.iterateCSSRules=void 0;const pW=KR("../../utils/array"),sG=KR("../../utils/platform"),YJ=KR("../../utils/url"),Us=KR("../utils/log");function fP(KR,ZW,LJ){(0,pW.forEach)(KR,(KR=>{if(KR.selectorText)ZW(KR);else if(KR.href)try{fP(KR.styleSheet.cssRules,ZW,LJ)}catch(KR){(0,Us.logInfo)(`Found a non-loaded link.`),LJ&&LJ()}else if(KR.media){const pW=Array.from(KR.media),sG=pW.some((KR=>KR.startsWith("screen")||KR.startsWith("all")||KR.startsWith("("))),YJ=pW.some((KR=>KR.startsWith("print")||KR.startsWith("speech")));!sG&&YJ||fP(KR.cssRules,ZW,LJ)}else KR.conditionText?CSS.supports(KR.conditionText)&&fP(KR.cssRules,ZW,LJ):(0,Us.logWarn)(`CSSRule type not supported`,KR)}))}LJ.iterateCSSRules=fP;const es=["background","border","border-color","border-bottom","border-left","border-right","border-top","outline","outline-color"],UH=sG.isSafari?es.map((KR=>{const ZW=undefined;return[KR,new RegExp(`${KR}:\\s*(.*?)\\s*;`)]})):null;function Bh(KR,ZW){(0,pW.forEach)(KR,(LJ=>{const pW=KR.getPropertyValue(LJ).trim();pW&&ZW(LJ,pW)}));const LJ=KR.cssText;LJ.includes("var(")&&(sG.isSafari?UH.forEach((([KR,pW])=>{const sG=LJ.match(pW);if(sG&&sG[1]){const LJ=sG[1].trim();ZW(KR,LJ)}})):es.forEach((LJ=>{const pW=KR.getPropertyValue(LJ);pW&&pW.includes("var(")&&ZW(LJ,pW)})))}function c(KR){return KR.trim().replace(/[\n\r\\]+/g,"").replace(/^url\((.*)\)$/,"$1").trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1").replace(/(?:\\(.))/g,"$1")}function Db(KR){const ZW=(0,YJ.parseURL)(KR);return`${ZW.origin}${ZW.pathname.replace(/\?.*$/,"").replace(/(\/)([^\/]+)$/i,"$1")}`}function ec(KR,ZW){return KR.replace(LJ.cssURLRegex,(KR=>{const LJ=c(KR);try{return`url('${(0,YJ.getAbsoluteURL)(ZW,LJ)}')`}catch(ZW){return(0,Us.logWarn)("Not able to replace relative URL with Absolute URL, skipping"),KR}}))}LJ.iterateCSSDeclarations=Bh,LJ.cssURLRegex=/url\((('.*?')|(".*?")|([^\)]*?))\)/g,LJ.cssImportRegex=/@import\s*(url\()?(('.+?')|(".+?")|([^\)]*?))\)? ?(screen)?;?/gi,LJ.getCSSURLValue=c,LJ.getCSSBaseBath=Db,LJ.replaceCSSRelativeURLsWithAbsolute=ec;const rS=/\/\*[\s\S]*?\*\//g;function RX(KR){return KR.replace(rS,"")}LJ.removeCSSComments=RX;const dG=/@font-face\s*{[^}]*}/g;function Qj(KR){return KR.replace(dG,"")}LJ.replaceCSSFontFace=Qj},{"../../utils/array":30,"../../utils/platform":40,"../../utils/url":45,"../utils/log":19}],5:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.combineFixes=LJ.findRelevantFix=void 0;const pW=KR("../utils/log"),sG=KR("../../utils/url");function YJ(KR,ZW){if(!Array.isArray(ZW)||0===ZW.length||"*"!==ZW[0].url[0])return(0,pW.logWarn)("selectRelevantFix() failed to construct a single fix",KR,ZW),null;let LJ=0,YJ=null;for(let pW=1;pW<ZW.length;pW++)if((0,sG.isURLInList)(KR,ZW[pW].url)){const KR=ZW[pW].url[0].length;(null===YJ||LJ<KR)&&(LJ=KR,YJ=pW)}return YJ}function Us(KR){if(0===KR.length||"*"!==KR[0].url[0])return(0,pW.logWarn)("combineFixes() failed to construct a single fix",KR),null;function ZW(KR){return KR.filter(Boolean).flat()}return{url:[],invert:ZW(KR.map((KR=>KR.invert))),css:KR.map((KR=>KR.css)).filter(Boolean).join("\n"),ignoreInlineStyle:ZW(KR.map((KR=>KR.ignoreInlineStyle))),ignoreImageAnalysis:ZW(KR.map((KR=>KR.ignoreImageAnalysis))),disableStyleSheetsProxy:KR.some((KR=>KR.disableStyleSheetsProxy))}}LJ.findRelevantFix=YJ,LJ.combineFixes=Us},{"../../utils/url":45,"../utils/log":19}],6:[function(KR,ZW,LJ){"use strict";var pW=void 0&&(void 0).__importDefault||function(KR){return KR&&KR.__esModule?KR:{default:KR}};Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.cleanImageProcessingCache=LJ.getFilteredImageDataURL=LJ.getImageDetails=void 0;const sG=KR("../../generators/svg-filter"),YJ=KR("./network"),Us=KR("../../utils/color"),fP=KR("../../utils/network"),es=KR("../utils/log"),UH=pW(KR("../../utils/async-queue")),Bh=KR("../../const"),c=new UH.default;async function Db(KR){return new Promise((async(ZW,LJ)=>{let pW;if(KR.startsWith("data:"))pW=KR;else try{pW=await ec(KR)}catch(KR){return void LJ(KR)}try{const LJ=await rS(pW);c.addToQueue((()=>{ZW(Object.assign({src:KR,dataURL:pW,width:LJ.naturalWidth,height:LJ.naturalHeight},QI(LJ)))}))}catch(KR){LJ(KR)}}))}async function ec(KR){const ZW=undefined;return new URL(KR).origin===location.origin?await(0,fP.loadAsDataURL)(KR):await(0,YJ.bgFetch)({url:KR,responseType:"data-url"})}async function rS(KR){return new Promise(((ZW,LJ)=>{const pW=new Image;pW.onload=()=>ZW(pW),pW.onerror=()=>LJ(`Unable to load image ${KR}`),pW.src=KR}))}LJ.getImageDetails=Db;const RX=32*32;let dG,Qj;function GU(){const KR=RX,ZW=RX;dG=document.createElement("canvas"),dG.width=KR,dG.height=ZW,Qj=dG.getContext("2d",{willReadFrequently:!0}),Qj.imageSmoothingEnabled=!1}function jE(){dG=null,Qj=null}const Cd=5*1024*1024;function QI(KR){dG||GU();const{naturalWidth:ZW,naturalHeight:LJ}=KR;if(0===LJ||0===ZW)return(0,es.logWarn)(`logWarn(Image is empty ${KR.currentSrc})`),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!1};const pW=undefined;if(ZW*LJ*4>Cd)return(0,es.logInfo)("Skipped large image analyzing(Larger than 5mb in memory)"),{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!0};const sG=ZW*LJ,YJ=Math.min(1,Math.sqrt(RX/sG)),fP=Math.ceil(ZW*YJ),UH=Math.ceil(LJ*YJ);Qj.clearRect(0,0,fP,UH),Qj.drawImage(KR,0,0,ZW,LJ,0,0,fP,UH);const Bh=undefined,c=Qj.getImageData(0,0,fP,UH).data,Db=.05,ec=.4,rS=.7;let jE=0,QI=0,oO=0,Pi,lR,Id,Xi,TX,zR,vy,fI;for(Id=0;Id<UH;Id++)for(lR=0;lR<fP;lR++)Pi=4*(Id*fP+lR),Xi=c[Pi+0],TX=c[Pi+1],zR=c[Pi+2],vy=c[Pi+3],vy/255<Db?jE++:(fI=(0,Us.getSRGBLightness)(Xi,TX,zR),fI<ec&&QI++,fI>rS&&oO++);const xH=fP*UH,xS=xH-jE,Zq=undefined,tQ=undefined,Bl=undefined,Xn=undefined;return{isDark:QI/xS>=.7,isLight:oO/xS>=.7,isTransparent:jE/xH>=.1,isLarge:sG>=800*600,isTooLarge:!1}}function oO({dataURL:KR,width:ZW,height:LJ},pW){const YJ=(0,sG.getSVGFilterMatrixValue)(pW),Us=[`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${ZW}" height="${LJ}">`,"<defs>",`<filter id="${Bh.IMG_FILTER_ID}">`,`<feColorMatrix type="matrix" values="${YJ}" />`,"</filter>","</defs>",`<image width="${ZW}" height="${LJ}" filter="url(#${Bh.IMG_FILTER_ID})" xlink:href="${KR}" />`,"</svg>"].join("");return`data:image/svg+xml;base64,${btoa(Us)}`}function Pi(){c&&c.stopQueue(),jE()}LJ.getFilteredImageDataURL=oO,LJ.cleanImageProcessingCache=Pi},{"../../const":1,"../../generators/svg-filter":23,"../../utils/async-queue":31,"../../utils/color":33,"../../utils/network":38,"../utils/log":19,"./network":12}],7:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.cleanDynamicThemeCache=LJ.removeDynamicTheme=LJ.createOrUpdateDynamicThemeInternal=LJ.createOrUpdateDynamicTheme=void 0;const pW=KR("./inline-style"),sG=KR("./meta-theme-color"),YJ=KR("./modify-css"),Us=KR("./style-manager"),fP=KR("./watch"),es=KR("../../utils/array"),UH=KR("../utils/dom"),Bh=KR("../utils/log"),c=KR("../../utils/throttle"),Db=KR("../../utils/math"),ec=KR("../../generators/css-filter"),rS=KR("../../generators/modify-colors"),RX=KR("../../generators/text-style"),dG=KR("../../utils/uid"),Qj=KR("./adopted-style-manger"),GU=KR("../../utils/platform"),jE=KR("../../utils/color"),Cd=KR("../../utils/url"),QI=KR("./variables"),oO=KR("../../utils/visibility"),Pi=KR("./fixes"),lR=KR("../../const"),Id=KR("./mv3-proxy"),Xi=!1,TX=(0,dG.generateUID)(),zR=new Map,vy=[];let fI=null,xH=null,xS=null,Zq=[],tQ=[];function Bl(KR,ZW=document.head||document){let LJ=ZW.querySelector(KR);return LJ||(LJ=document.createElement("style"),LJ.classList.add(lR.STYLESHEET_COMMON_CLASSNAME),LJ.classList.add(KR.substring(1)),LJ.media="screen",LJ.textContent=""),LJ}function Xn(KR){(0,Bh.logInfo)("MV3 proxy injector: regular path attempts to inject...");const ZW=document.createElement("script");ZW.src=chrome.runtime.getURL("js/proxy.js"),ZW.dataset.arg=JSON.stringify(KR),document.head.prepend(ZW)}const AH=new Map;function BO(KR,ZW){AH.has(ZW)&&AH.get(ZW).stop(),AH.set(ZW,(0,UH.watchForNodePosition)(KR,"head"))}function Zp(){(0,es.forEach)(AH.values(),(KR=>KR.stop())),AH.clear()}function wL(){const KR=Bl(lR.STYLESHEET_FALLBACK_SELECTOR,document);KR.textContent=(0,YJ.getModifiedFallbackStyle)(fI,{strict:!0}),document.head.insertBefore(KR,document.head.firstChild),BO(KR,"fallback");const ZW=Bl(lR.STYLESHEET_USER_AGENT_SELECTOR);ZW.textContent=(0,YJ.getModifiedUserAgentStyle)(fI,xS,fI.styleSystemControls),document.head.insertBefore(ZW,KR.nextSibling),BO(ZW,"user-agent");const LJ=Bl(lR.STYLESHEET_TEXT_SELECTOR);fI.useFont||fI.textStroke>0?LJ.textContent=(0,RX.createTextStyle)(fI):LJ.textContent="",document.head.insertBefore(LJ,KR.nextSibling),BO(LJ,"text");const sG=Bl(lR.STYLESHEET_INVERT_SELECTOR);xH&&Array.isArray(xH.invert)&&xH.invert.length>0?sG.textContent=[`${xH.invert.join(", ")} {`,`    filter: ${(0,ec.getCSSFilterValue)(Object.assign(Object.assign({},fI),{contrast:0===fI.mode?fI.contrast:(0,Db.clamp)(fI.contrast-10,0,100)}))} !important;`,"}"].join("\n"):sG.textContent="",document.head.insertBefore(sG,LJ.nextSibling),BO(sG,"invert");const Us=Bl(lR.STYLESHEET_INLINE_SELECTOR);Us.textContent=(0,pW.getInlineOverrideStyle)(),document.head.insertBefore(Us,sG.nextSibling),BO(Us,"inline");const fP=Bl(lR.STYLESHEET_OVERRIDE_SELECTOR);fP.textContent=xH&&xH.css?Sr(xH.css):"",document.head.appendChild(fP),BO(fP,"override");const es=Bl(lR.STYLESHEET_VARIABLES_SELECTOR),UH=(0,YJ.getSelectionColor)(fI),{darkSchemeBackgroundColor:Bh,darkSchemeTextColor:c,lightSchemeBackgroundColor:dG,lightSchemeTextColor:Qj,mode:GU}=fI;let Cd=0===GU?dG:Bh,QI=0===GU?Qj:c;Cd=(0,rS.modifyBackgroundColor)((0,jE.parseColorWithCache)(Cd),fI),QI=(0,rS.modifyForegroundColor)((0,jE.parseColorWithCache)(QI),fI),es.textContent=[`:root {`,`   --${lR.ROOT_VARS_PREFIX}-neutral-background: ${Cd};`,`   --${lR.ROOT_VARS_PREFIX}-neutral-text: ${QI};`,`   --${lR.ROOT_VARS_PREFIX}-selection-background: ${UH.backgroundColorSelection};`,`   --${lR.ROOT_VARS_PREFIX}-selection-text: ${UH.foregroundColorSelection};`,`}`].join("\n"),document.head.insertBefore(es,Us.nextSibling),BO(es,"variables");const oO=Bl(lR.STYLESHEET_ROOT_VARS_SELECTOR);document.head.insertBefore(oO,es.nextSibling);const Pi=!(xH&&xH.disableStyleSheetsProxy);Xn(Pi),document.dispatchEvent(new CustomEvent(Id.EVENT_ARG,{detail:Pi}))}const PW=new Set;function Z(KR){const ZW=Bl(lR.STYLESHEET_INLINE_SELECTOR,KR);ZW.textContent=(0,pW.getInlineOverrideStyle)(),KR.insertBefore(ZW,KR.firstChild);const LJ=Bl(lR.STYLESHEET_OVERRIDE_SELECTOR,KR);LJ.textContent=xH&&xH.css?Sr(xH.css):"",KR.insertBefore(LJ,ZW.nextSibling);const sG=Bl(lR.STYLESHEET_INVERT_SELECTOR,KR);xH&&Array.isArray(xH.invert)&&xH.invert.length>0?sG.textContent=[`${xH.invert.join(", ")} {`,`    filter: ${(0,ec.getCSSFilterValue)(Object.assign(Object.assign({},fI),{contrast:0===fI.mode?fI.contrast:(0,Db.clamp)(fI.contrast-10,0,100)}))} !important;`,"}"].join("\n"):sG.textContent="",KR.insertBefore(sG,LJ.nextSibling),PW.add(KR)}function Sr(KR){return KR.replace(/\${(.+?)}/g,((KR,ZW)=>{const LJ=(0,jE.parseColorWithCache)(ZW);return LJ?(0,rS.modifyColor)(LJ,fI):((0,Bh.logWarn)("Couldn't parse CSSTemplate's color."),ZW)}))}function UM(){const KR=document.querySelector(lR.STYLESHEET_FALLBACK_SELECTOR);KR&&(KR.textContent="")}function Ff(){zI();const KR=undefined,ZW=(0,Us.getManageableStyles)(document).filter((KR=>!zR.has(KR))).map((KR=>lW(KR)));ZW.map((KR=>KR.details({secondRound:!1}))).filter((KR=>KR&&KR.rules.length>0)).forEach((KR=>{QI.variablesStore.addRulesForMatching(KR.rules)})),QI.variablesStore.matchVariablesAndDependants(),QI.variablesStore.setOnRootVariableChange((()=>{const KR=Bl(lR.STYLESHEET_ROOT_VARS_SELECTOR);QI.variablesStore.putRootVars(KR,fI)}));const LJ=Bl(lR.STYLESHEET_ROOT_VARS_SELECTOR);QI.variablesStore.putRootVars(LJ,fI),zR.forEach((KR=>KR.render(fI,Zq))),0===RR.size&&UM(),ZW.forEach((KR=>KR.watch()));const sG=(0,es.toArray)(document.querySelectorAll(pW.INLINE_STYLE_SELECTOR));(0,UH.iterateShadowHosts)(document.documentElement,(KR=>{Z(KR.shadowRoot);const ZW=KR.shadowRoot.querySelectorAll(pW.INLINE_STYLE_SELECTOR);ZW.length>0&&(0,es.push)(sG,ZW)})),sG.forEach((KR=>(0,pW.overrideInlineStyle)(KR,fI,tQ,Zq))),Ip(document)}let qf=0;const RR=new Set;function lW(KR){const ZW=++qf;function LJ(){if(!(0,UH.isDOMReady)()||!(0,oO.documentIsVisible)()){RR.add(ZW),(0,Bh.logInfo)(`Current amount of styles loading: ${RR.size}`);const KR=document.querySelector(lR.STYLESHEET_FALLBACK_SELECTOR);KR.textContent||(KR.textContent=(0,YJ.getModifiedFallbackStyle)(fI,{strict:!1}))}}function pW(){RR.delete(ZW),(0,Bh.logInfo)(`Removed loadingStyle ${ZW}, now awaiting: ${RR.size}`),(0,Bh.logInfo)(`To-do to be loaded`,RR),0===RR.size&&(0,UH.isDOMReady)()&&UM()}function sG(){const KR=fP.details({secondRound:!0});KR&&(QI.variablesStore.addRulesForMatching(KR.rules),QI.variablesStore.matchVariablesAndDependants(),fP.render(fI,Zq))}(0,Bh.logInfo)(`New manager for element, with loadingStyleID ${ZW}`,KR);const fP=(0,Us.manageStyle)(KR,{update:sG,loadingStart:LJ,loadingEnd:pW});return zR.set(KR,fP),fP}function tz(KR){const ZW=zR.get(KR);ZW&&(ZW.destroy(),zR.delete(KR))}const oF=(0,c.throttle)((KR=>{zR.forEach((KR=>KR.render(fI,Zq))),vy.forEach((KR=>KR.render(fI,Zq))),KR&&KR()})),zI=function(){oF.cancel()};function JL(){0!==RR.size?(0,Bh.logWarn)(`DOM is ready, but still have styles being loaded.`,RR):UM()}function fm(){Ff(),TD()}function Vb(){wL(),(0,oO.documentIsVisible)()||fI.immediateModify?fm():(0,oO.setDocumentVisibilityListener)(fm),(0,sG.changeMetaThemeColorWhenAvailable)(fI)}function Ip(KR){try{if(Array.isArray(KR.adoptedStyleSheets)&&KR.adoptedStyleSheets.length>0){const ZW=(0,Qj.createAdoptedStyleSheetOverride)(KR);vy.push(ZW),ZW.render(fI,Zq)}}catch(KR){(0,Bh.logWarn)("Error occurred in handleAdoptedStyleSheets: ",KR)}}function TD(){const KR=Array.from(zR.keys());(0,fP.watchForStyleChanges)(KR,(({created:KR,updated:ZW,removed:LJ,moved:pW})=>{const sG=LJ,YJ=KR.concat(ZW).concat(pW).filter((KR=>!zR.has(KR))),Us=pW.filter((KR=>zR.has(KR)));(0,Bh.logInfo)(`Styles to be removed:`,sG),sG.forEach((KR=>tz(KR)));const fP=YJ.map((KR=>lW(KR)));fP.map((KR=>KR.details({secondRound:!1}))).filter((KR=>KR&&KR.rules.length>0)).forEach((KR=>{QI.variablesStore.addRulesForMatching(KR.rules)})),QI.variablesStore.matchVariablesAndDependants(),fP.forEach((KR=>KR.render(fI,Zq))),fP.forEach((KR=>KR.watch())),Us.forEach((KR=>zR.get(KR).restore()))}),(KR=>{Z(KR),Ip(KR)})),(0,pW.watchForInlineStyles)((KR=>{if((0,pW.overrideInlineStyle)(KR,fI,tQ,Zq),KR===document.documentElement){const ZW=undefined;if((KR.getAttribute("style")||"").includes("--")){QI.variablesStore.matchVariablesAndDependants();const KR=Bl(lR.STYLESHEET_ROOT_VARS_SELECTOR.substring(1));QI.variablesStore.putRootVars(KR,fI)}}}),(KR=>{Z(KR);const ZW=KR.querySelectorAll(pW.INLINE_STYLE_SELECTOR);ZW.length>0&&(0,es.forEach)(ZW,(KR=>(0,pW.overrideInlineStyle)(KR,fI,tQ,Zq)))})),(0,UH.addDOMReadyListener)(JL)}function VF(){zR.forEach((KR=>KR.pause())),Zp(),(0,fP.stopWatchingForStyleChanges)(),(0,pW.stopWatchingForInlineStyles)(),(0,UH.removeDOMReadyListener)(JL),(0,UH.cleanReadyStateCompleteListeners)()}let kj;function xO(){const KR=document.createElement("meta");KR.name=lR.META_PROPERTY,KR.content=TX,document.head.appendChild(KR)}function Lr(){const KR=document.querySelector(`meta[name="${lR.META_PROPERTY}"]`);return KR?KR.content!==TX:(xO(),!1)}function Vv(KR,ZW){if(!ZW)return null;if(0===ZW.length||"*"!==ZW[0].url[0])return(0,Bh.logWarn)("selectRelevantFix() failed to construct a single fix",KR,ZW),null;const LJ=(0,Pi.findRelevantFix)(KR,ZW);return LJ?(0,Pi.combineFixes)([ZW[0],ZW[LJ]]):ZW[0]}function xo(KR,ZW,LJ){const pW=undefined;Zz(KR,Vv(document.location.href,ZW),LJ)}function Zz(KR,ZW,LJ){if(fI=KR,xH=ZW,xH?(Zq=Array.isArray(xH.ignoreImageAnalysis)?xH.ignoreImageAnalysis:[],tQ=Array.isArray(xH.ignoreInlineStyle)?xH.ignoreInlineStyle:[]):(Zq=[],tQ=[]),fI.immediateModify&&(0,UH.setIsDOMReady)((()=>!0)),xS=LJ,document.head){if(Lr())return void Tp();Vb()}else{if(!GU.isFirefox){const KR=Bl(lR.STYLESHEET_FALLBACK_SELECTOR);document.documentElement.appendChild(KR),KR.textContent=(0,YJ.getModifiedFallbackStyle)(fI,{strict:!0})}const KR=new MutationObserver((()=>{if(document.head){if(KR.disconnect(),Lr())return void Tp();Vb()}}));KR.observe(document,{childList:!0,subtree:!0})}}function Fc(){document.dispatchEvent(new CustomEvent(lR.MSG_CLEANUP)),(0,UH.removeNode)(document.head.querySelector(lR.PROXY_SELECTOR))}function Tp(){jC(),(0,UH.removeNode)(document.querySelector(lR.STYLESHEET_FALLBACK_SELECTOR)),document.head&&((0,sG.restoreMetaThemeColor)(),(0,UH.removeNode)(document.head.querySelector(lR.STYLESHEET_USER_AGENT_SELECTOR)),(0,UH.removeNode)(document.head.querySelector(lR.STYLESHEET_TEXT_SELECTOR)),(0,UH.removeNode)(document.head.querySelector(lR.STYLESHEET_INVERT_SELECTOR)),(0,UH.removeNode)(document.head.querySelector(lR.STYLESHEET_INLINE_SELECTOR)),(0,UH.removeNode)(document.head.querySelector(lR.STYLESHEET_OVERRIDE_SELECTOR)),(0,UH.removeNode)(document.head.querySelector(lR.STYLESHEET_VARIABLES_SELECTOR)),(0,UH.removeNode)(document.head.querySelector(lR.STYLESHEET_ROOT_VARS_SELECTOR)),(0,UH.removeNode)(document.head.querySelector(`meta[name="${lR.META_PROPERTY}"]`)),Fc()),PW.forEach((KR=>{(0,UH.removeNode)(KR.querySelector(lR.STYLESHEET_INLINE_SELECTOR)),(0,UH.removeNode)(KR.querySelector(lR.STYLESHEET_OVERRIDE_SELECTOR))})),PW.clear(),(0,es.forEach)(zR.keys(),(KR=>tz(KR))),RR.clear(),(0,Us.cleanLoadingLinks)(),(0,es.forEach)(document.querySelectorAll("."+lR.STYLESHEET_COMMON_CLASSNAME),UH.removeNode),vy.forEach((KR=>{KR.destroy()})),vy.splice(0),kj&&kj.disconnect()}function jC(){QI.variablesStore.clear(),Cd.parsedURLCache.clear(),(0,oO.removeDocumentVisibilityListener)(),zI(),VF(),(0,YJ.cleanModificationCache)(),(0,jE.clearColorCache)()}LJ.createOrUpdateDynamicTheme=xo,LJ.createOrUpdateDynamicThemeInternal=Zz,LJ.removeDynamicTheme=Tp,LJ.cleanDynamicThemeCache=jC},{"../../const":1,"../../generators/css-filter":21,"../../generators/modify-colors":22,"../../generators/text-style":24,"../../utils/array":30,"../../utils/color":33,"../../utils/math":36,"../../utils/platform":40,"../../utils/throttle":42,"../../utils/uid":44,"../../utils/url":45,"../../utils/visibility":46,"../utils/dom":18,"../utils/log":19,"./adopted-style-manger":3,"./fixes":5,"./inline-style":8,"./meta-theme-color":9,"./modify-css":10,"./mv3-proxy":11,"./style-manager":13,"./variables":16,"./watch":17}],8:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.overrideInlineStyle=LJ.stopWatchingForInlineStyles=LJ.watchForInlineStyles=LJ.getInlineOverrideStyle=LJ.INLINE_STYLE_SELECTOR=void 0;const pW=KR("../../utils/array"),sG=KR("../utils/dom"),YJ=KR("./css-rules"),Us=KR("./modify-css"),fP=KR("./variables"),es=KR("../../utils/platform"),UH=KR("../../utils/time"),Bh=KR("../../utils/throttle"),c=KR("../../const"),Db={"background-color":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-bgcolor`,cssProp:"background-color",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-bgcolor`},"background-image":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-bgimage`,cssProp:"background-image",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-bgimage`},"border-color":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-border`,cssProp:"border-color",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-border`},"border-bottom-color":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-border-bottom`,cssProp:"border-bottom-color",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-border-bottom`},"border-left-color":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-border-left`,cssProp:"border-left-color",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-border-left`},"border-right-color":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-border-right`,cssProp:"border-right-color",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-border-right`},"border-top-color":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-border-top`,cssProp:"border-top-color",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-border-top`},"box-shadow":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-boxshadow`,cssProp:"box-shadow",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-boxshadow`},color:{customProp:`--${c.ROOT_VARS_PREFIX}-inline-color`,cssProp:"color",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-color`},fill:{customProp:`--${c.ROOT_VARS_PREFIX}-inline-fill`,cssProp:"fill",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-fill`},stroke:{customProp:`--${c.ROOT_VARS_PREFIX}-inline-stroke`,cssProp:"stroke",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-stroke`},"outline-color":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-outline`,cssProp:"outline-color",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-outline`},"stop-color":{customProp:`--${c.ROOT_VARS_PREFIX}-inline-stopcolor`,cssProp:"stop-color",dataAttr:`data-${c.ROOT_VARS_PREFIX}-inline-stopcolor`}},ec=Object.values(Db),rS={};ec.forEach((({cssProp:KR,customProp:ZW})=>rS[ZW]=KR));const RX=["style","fill","stop-color","stroke","bgcolor","color"];function dG(){return ec.map((({dataAttr:KR,customProp:ZW,cssProp:LJ})=>[`[${KR}] {`,`  ${LJ}: var(${ZW}) !important;`,"}"].join("\n"))).join("\n")}function Qj(KR){const ZW=[];return KR instanceof Element&&KR.matches(LJ.INLINE_STYLE_SELECTOR)&&ZW.push(KR),(KR instanceof Element||es.isShadowDomSupported&&KR instanceof ShadowRoot||KR instanceof Document)&&(0,pW.push)(ZW,KR.querySelectorAll(LJ.INLINE_STYLE_SELECTOR)),ZW}LJ.INLINE_STYLE_SELECTOR=RX.map((KR=>`[${KR}]`)).join(", "),LJ.getInlineOverrideStyle=dG;const GU=new Map,jE=new Map;function Cd(KR,ZW){QI(document,KR,ZW),(0,sG.iterateShadowHosts)(document.documentElement,(LJ=>{QI(LJ.shadowRoot,KR,ZW)}))}function QI(KR,ZW,LJ){GU.has(KR)&&(GU.get(KR).disconnect(),jE.get(KR).disconnect());const pW=new WeakSet;function YJ(KR){Qj(KR).forEach((KR=>{pW.has(KR)||(pW.add(KR),ZW(KR))})),(0,sG.iterateShadowHosts)(KR,(sG=>{pW.has(KR)||(pW.add(KR),LJ(sG.shadowRoot),QI(sG.shadowRoot,ZW,LJ))}))}const Us=(0,sG.createOptimizedTreeObserver)(KR,{onMinorMutations:({additions:KR})=>{KR.forEach((KR=>YJ(KR)))},onHugeMutations:()=>{YJ(KR)}});GU.set(KR,Us);let fP=0,es=null;const c=(0,UH.getDuration)({seconds:10}),Db=(0,UH.getDuration)({seconds:2}),rS=50;let dG=[],Cd=null;const oO=(0,Bh.throttle)((KR=>{KR.forEach((KR=>{RX.includes(KR.attributeName)&&ZW(KR.target)}))})),Pi=new MutationObserver((KR=>{if(Cd)return void dG.push(...KR);fP++;const ZW=Date.now();if(null==es)es=ZW;else if(fP>=rS){if(ZW-es<c)return Cd=setTimeout((()=>{es=null,fP=0,Cd=null;const KR=dG;dG=[],oO(KR)}),Db),void dG.push(...KR);es=ZW,fP=1}oO(KR)}));Pi.observe(KR,{attributes:!0,attributeFilter:RX.concat(ec.map((({dataAttr:KR})=>KR))),subtree:!0}),jE.set(KR,Pi)}function oO(){GU.forEach((KR=>KR.disconnect())),jE.forEach((KR=>KR.disconnect())),GU.clear(),jE.clear()}LJ.watchForInlineStyles=Cd,LJ.stopWatchingForInlineStyles=oO;const Pi=new WeakMap,lR=["brightness","contrast","grayscale","sepia","mode"];function Id(KR,ZW){return RX.map((ZW=>`${ZW}="${KR.getAttribute(ZW)}"`)).concat(lR.map((KR=>`${KR}="${ZW[KR]}"`))).join(" ")}function Xi(KR,ZW){for(let LJ=0,pW=ZW.length;LJ<pW;LJ++){const pW=ZW[LJ];if(KR.matches(pW))return!0}return!1}function TX(KR,ZW,LJ,es){const UH=undefined;if(Id(KR,ZW)===Pi.get(KR))return;const Bh=new Set(Object.keys(Db));function c(LJ,pW,sG){const YJ=LJ.startsWith("--"),{customProp:UH,dataAttr:c}=YJ?{}:Db[LJ],ec=(0,Us.getModifiableCSSDeclaration)(pW,sG,{style:KR.style},fP.variablesStore,es,null);if(!ec)return;let rS=ec.value;if("function"==typeof rS&&(rS=rS(ZW)),YJ&&"object"==typeof rS){const ZW=undefined;rS.declarations.forEach((({property:ZW,value:LJ})=>{!(LJ instanceof Promise)&&KR.style.setProperty(ZW,LJ)}))}else KR.style.setProperty(UH,rS),KR.hasAttribute(c)||KR.setAttribute(c,""),Bh.delete(LJ)}if(LJ.length>0&&Xi(KR,LJ))Bh.forEach((ZW=>{KR.removeAttribute(Db[ZW].dataAttr)}));else{if(KR.hasAttribute("bgcolor")){let ZW=KR.getAttribute("bgcolor");(ZW.match(/^[0-9a-f]{3}$/i)||ZW.match(/^[0-9a-f]{6}$/i))&&(ZW=`#${ZW}`),c("background-color","background-color",ZW)}if(KR.hasAttribute("color")&&"mask-icon"!==KR.rel){let ZW=KR.getAttribute("color");(ZW.match(/^[0-9a-f]{3}$/i)||ZW.match(/^[0-9a-f]{6}$/i))&&(ZW=`#${ZW}`),c("color","color",ZW)}if(KR instanceof SVGElement){if(KR.hasAttribute("fill")){const ZW=32,LJ=KR.getAttribute("fill");if("none"!==LJ)if(KR instanceof SVGTextElement)c("fill","color",LJ);else{const pW=()=>{const{width:pW,height:sG}=KR.getBoundingClientRect(),YJ=undefined;c("fill",pW>ZW||sG>ZW?"background-color":"color",LJ)};(0,sG.isReadyStateComplete)()?pW():(0,sG.addReadyStateCompleteListener)(pW)}}KR.hasAttribute("stop-color")&&c("stop-color","background-color",KR.getAttribute("stop-color"))}if(KR.hasAttribute("stroke")){const ZW=KR.getAttribute("stroke");c("stroke",KR instanceof SVGLineElement||KR instanceof SVGTextElement?"border-color":"color",ZW)}KR.style&&(0,YJ.iterateCSSDeclarations)(KR.style,((ZW,LJ)=>{if("background-image"!==ZW||!LJ.includes("url"))if(Db.hasOwnProperty(ZW)||ZW.startsWith("--")&&!rS[ZW])c(ZW,ZW,LJ);else{const LJ=rS[ZW];if(LJ&&!KR.style.getPropertyValue(LJ)&&!KR.hasAttribute(LJ)){if("background-color"===LJ&&KR.hasAttribute("bgcolor"))return;KR.style.setProperty(ZW,"")}}})),KR.style&&KR instanceof SVGTextElement&&KR.style.fill&&c("fill","color",KR.style.getPropertyValue("fill")),(0,pW.forEach)(Bh,(ZW=>{KR.removeAttribute(Db[ZW].dataAttr)})),Pi.set(KR,Id(KR,ZW))}}LJ.overrideInlineStyle=TX},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../../utils/throttle":42,"../../utils/time":43,"../utils/dom":18,"./css-rules":4,"./modify-css":10,"./variables":16}],9:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.restoreMetaThemeColor=LJ.changeMetaThemeColorWhenAvailable=void 0;const pW=KR("../../utils/color"),sG=KR("../../generators/modify-colors"),YJ=KR("../utils/log"),Us="theme-color",fP=`meta[name="${Us}"]`;let es=null,UH=null;function Bh(KR,ZW){es=es||KR.content;const LJ=(0,pW.parseColorWithCache)(es);LJ?KR.content=(0,sG.modifyBackgroundColor)(LJ,ZW):(0,YJ.logWarn)("Invalid meta color",LJ)}function c(KR){const ZW=document.querySelector(fP);ZW?Bh(ZW,KR):(UH&&UH.disconnect(),UH=new MutationObserver((ZW=>{KR:for(let LJ=0;LJ<ZW.length;LJ++){const{addedNodes:pW}=ZW[LJ];for(let ZW=0;ZW<pW.length;ZW++){const LJ=pW[ZW];if(LJ instanceof HTMLMetaElement&&LJ.name===Us){UH.disconnect(),UH=null,Bh(LJ,KR);break KR}}}})),UH.observe(document.head,{childList:!0}))}function Db(){UH&&(UH.disconnect(),UH=null);const KR=document.querySelector(fP);KR&&es&&(KR.content=es)}LJ.changeMetaThemeColorWhenAvailable=c,LJ.restoreMetaThemeColor=Db},{"../../generators/modify-colors":22,"../../utils/color":33,"../utils/log":19}],10:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.cleanModificationCache=LJ.getShadowModifier=LJ.getShadowModifierWithInfo=LJ.getBgImageModifier=LJ.getModifiedFallbackStyle=LJ.getSelectionColor=LJ.getModifiedUserAgentStyle=LJ.getModifiableCSSDeclaration=void 0;const pW=KR("../../utils/color"),sG=KR("../../utils/math"),YJ=KR("../../utils/text"),Us=KR("../../utils/url"),fP=KR("../../generators/modify-colors"),es=KR("./css-rules"),UH=KR("./image"),Bh=KR("../utils/log"),c=KR("../../utils/platform"),Db=KR("../../utils/parsing");function ec(KR,ZW){return Boolean(KR&&KR.getPropertyPriority(ZW))}function rS(KR,ZW,LJ,pW,sG,YJ){if(KR.startsWith("--")){const Us=vy(pW,KR,ZW,LJ,sG,YJ);if(Us)return{property:KR,value:Us,important:ec(LJ.style,KR),sourceValue:ZW}}else if(ZW.includes("var(")){const sG=fI(pW,KR,ZW);if(sG)return{property:KR,value:sG,important:ec(LJ.style,KR),sourceValue:ZW}}else{if("color-scheme"===KR)return(0,Bh.logWarn)("CSS property color-scheme is not supported"),null;if(KR.includes("color")&&"-webkit-print-color-adjust"!==KR||"fill"===KR||"stroke"===KR||"stop-color"===KR){const pW=oO(KR,ZW,LJ);if(pW)return{property:KR,value:pW,important:ec(LJ.style,KR),sourceValue:ZW}}else if("background-image"===KR||"list-style-image"===KR){const pW=Xi(ZW,LJ,sG,YJ);if(pW)return{property:KR,value:pW,important:ec(LJ.style,KR),sourceValue:ZW}}else if(KR.includes("shadow")){const pW=zR(ZW);if(pW)return{property:KR,value:pW,important:ec(LJ.style,KR),sourceValue:ZW}}}return null}function RX(...KR){return KR.filter(Boolean).join(", ")}function dG(KR,ZW,LJ){const pW=[];ZW||(pW.push("html {"),pW.push(`    background-color: ${(0,fP.modifyBackgroundColor)({r:255,g:255,b:255},KR)} !important;`),pW.push("}")),pW.push("html {"),pW.push(`    color-scheme: ${1===KR.mode?"dark":"dark light"} !important;`),pW.push("}");const sG=RX(ZW?"":"html, body",LJ?"input, textarea, select, button, dialog":"");return sG&&(pW.push(`${sG} {`),pW.push(`    background-color: ${(0,fP.modifyBackgroundColor)({r:255,g:255,b:255},KR)};`),pW.push("}")),pW.push(`${RX("html, body",LJ?"input, textarea, select, button":"")} {`),pW.push(`    border-color: ${(0,fP.modifyBorderColor)({r:76,g:76,b:76},KR)};`),pW.push(`    color: ${(0,fP.modifyForegroundColor)({r:0,g:0,b:0},KR)};`),pW.push("}"),pW.push("a {"),pW.push(`    color: ${(0,fP.modifyForegroundColor)({r:0,g:64,b:255},KR)};`),pW.push("}"),pW.push("table {"),pW.push(`    border-color: ${(0,fP.modifyBorderColor)({r:128,g:128,b:128},KR)};`),pW.push("}"),pW.push("::placeholder {"),pW.push(`    color: ${(0,fP.modifyForegroundColor)({r:169,g:169,b:169},KR)};`),pW.push("}"),pW.push("input:-webkit-autofill,"),pW.push("textarea:-webkit-autofill,"),pW.push("select:-webkit-autofill {"),pW.push(`    background-color: ${(0,fP.modifyBackgroundColor)({r:250,g:255,b:189},KR)} !important;`),pW.push(`    color: ${(0,fP.modifyForegroundColor)({r:0,g:0,b:0},KR)} !important;`),pW.push("}"),KR.scrollbarColor&&pW.push(jE(KR)),KR.selectionColor&&pW.push(GU(KR)),pW.join("\n")}function Qj(KR){let ZW,LJ;if("auto"===KR.selectionColor)ZW=(0,fP.modifyBackgroundColor)({r:0,g:96,b:212},Object.assign(Object.assign({},KR),{grayscale:0})),LJ=(0,fP.modifyForegroundColor)({r:255,g:255,b:255},Object.assign(Object.assign({},KR),{grayscale:0}));else{const sG=(0,pW.parseColorWithCache)(KR.selectionColor),YJ=(0,pW.rgbToHSL)(sG);ZW=KR.selectionColor,LJ=YJ.l<.5?"#FFF":"#000"}return{backgroundColorSelection:ZW,foregroundColorSelection:LJ}}function GU(KR){const ZW=[],LJ=Qj(KR),pW=LJ.backgroundColorSelection,sG=LJ.foregroundColorSelection;return["::selection","::-moz-selection"].forEach((KR=>{ZW.push(`${KR} {`),ZW.push(`    background-color: ${pW} !important;`),ZW.push(`    color: ${sG} !important;`),ZW.push("}")})),ZW.join("\n")}function jE(KR){const ZW=[];let LJ,YJ,Us,es,UH,Bh;if("auto"===KR.scrollbarColor)LJ=(0,fP.modifyBackgroundColor)({r:241,g:241,b:241},KR),YJ=(0,fP.modifyForegroundColor)({r:96,g:96,b:96},KR),Us=(0,fP.modifyBackgroundColor)({r:176,g:176,b:176},KR),es=(0,fP.modifyBackgroundColor)({r:144,g:144,b:144},KR),UH=(0,fP.modifyBackgroundColor)({r:96,g:96,b:96},KR),Bh=(0,fP.modifyBackgroundColor)({r:255,g:255,b:255},KR);else{const ZW=(0,pW.parseColorWithCache)(KR.scrollbarColor),fP=(0,pW.rgbToHSL)(ZW),Bh=fP.l>.5,c=KR=>Object.assign(Object.assign({},fP),{l:(0,sG.clamp)(fP.l+KR,0,1)}),Db=KR=>Object.assign(Object.assign({},fP),{l:(0,sG.clamp)(fP.l-KR,0,1)});LJ=(0,pW.hslToString)(Db(.4)),YJ=(0,pW.hslToString)(Bh?Db(.4):c(.4)),Us=(0,pW.hslToString)(fP),es=(0,pW.hslToString)(c(.1)),UH=(0,pW.hslToString)(c(.2))}return ZW.push("::-webkit-scrollbar {"),ZW.push(`    background-color: ${LJ};`),ZW.push(`    color: ${YJ};`),ZW.push("}"),ZW.push("::-webkit-scrollbar-thumb {"),ZW.push(`    background-color: ${Us};`),ZW.push("}"),ZW.push("::-webkit-scrollbar-thumb:hover {"),ZW.push(`    background-color: ${es};`),ZW.push("}"),ZW.push("::-webkit-scrollbar-thumb:active {"),ZW.push(`    background-color: ${UH};`),ZW.push("}"),ZW.push("::-webkit-scrollbar-corner {"),ZW.push(`    background-color: ${Bh};`),ZW.push("}"),c.isFirefox&&(ZW.push("* {"),ZW.push(`    scrollbar-color: ${Us} ${LJ};`),ZW.push("}")),ZW.join("\n")}function Cd(KR,{strict:ZW}){const LJ=[],pW=["microsoft.com","docs.microsoft.com"].includes(location.hostname);return LJ.push(`html, body, ${ZW?`body :not(iframe)${pW?':not(div[style^="position:absolute;top:0;left:-"]':""}`:"body > :not(iframe)"} {`),LJ.push(`    background-color: ${(0,fP.modifyBackgroundColor)({r:255,g:255,b:255},KR)} !important;`),LJ.push(`    border-color: ${(0,fP.modifyBorderColor)({r:64,g:64,b:64},KR)} !important;`),LJ.push(`    color: ${(0,fP.modifyForegroundColor)({r:0,g:0,b:0},KR)} !important;`),LJ.push("}"),LJ.join("\n")}LJ.getModifiableCSSDeclaration=rS,LJ.getModifiedUserAgentStyle=dG,LJ.getSelectionColor=Qj,LJ.getModifiedFallbackStyle=Cd;const QI=new Set(["inherit","transparent","initial","currentcolor","none","unset"]);function oO(KR,ZW,LJ){if(QI.has(ZW.toLowerCase()))return ZW;const sG=(0,pW.parseColorWithCache)(ZW);return sG?KR.includes("background")?LJ.style.webkitMaskImage&&"none"!==LJ.style.webkitMaskImage||LJ.style.webkitMask&&!LJ.style.webkitMask.startsWith("none")||LJ.style.mask&&"none"!==LJ.style.mask||LJ.style.getPropertyValue("mask-image")&&"none"!==LJ.style.getPropertyValue("mask-image")?KR=>(0,fP.modifyForegroundColor)(sG,KR):KR=>(0,fP.modifyBackgroundColor)(sG,KR):KR.includes("border")||KR.includes("outline")?KR=>(0,fP.modifyBorderColor)(sG,KR):KR=>(0,fP.modifyForegroundColor)(sG,KR):((0,Bh.logWarn)("Couldn't parse color",ZW),null)}const Pi=new Map,lR=new Map;function Id(KR,ZW){if(!KR||0===ZW.length)return!1;if(ZW.some((KR=>"*"===KR)))return!0;const LJ=KR.split(/,\s*/g);for(let KR=0;KR<ZW.length;KR++){const pW=ZW[KR];if(LJ.some((KR=>KR===pW)))return!0}return!1}function Xi(KR,ZW,LJ,c){try{const ec=(0,Db.parseGradient)(KR),rS=(0,YJ.getMatches)(es.cssURLRegex,KR);if(0===rS.length&&0===ec.length)return KR;const RX=ZW=>{let LJ=0;return ZW.map((ZW=>{const pW=KR.indexOf(ZW,LJ);return LJ=pW+ZW.length,{match:ZW,index:pW}}))},dG=ec.map((KR=>Object.assign({type:"gradient"},KR))).concat(RX(rS).map((KR=>Object.assign({type:"url",offset:0},KR)))).sort(((KR,ZW)=>KR.index>ZW.index?1:-1)),Qj=KR=>{const{typeGradient:ZW,match:LJ,hasComma:sG}=KR,Us=/([^\(\),]+(\([^\(\)]*(\([^\(\)]*\)*[^\(\)]*)?\))?([^\(\), ]|( (?!calc)))*),?/g,es=/^(from|color-stop|to)\(([^\(\)]*?,\s*)?(.*?)\)$/,UH=(0,YJ.getMatches)(Us,LJ,1).map((KR=>{KR=KR.trim();let ZW=(0,pW.parseColorWithCache)(KR);if(ZW)return KR=>(0,fP.modifyGradientColor)(ZW,KR);const LJ=KR.lastIndexOf(" ");if(ZW=(0,pW.parseColorWithCache)(KR.substring(0,LJ)),ZW)return pW=>`${(0,fP.modifyGradientColor)(ZW,pW)} ${KR.substring(LJ+1)}`;const sG=KR.match(es);return sG&&(ZW=(0,pW.parseColorWithCache)(sG[3]),ZW)?KR=>`${sG[1]}(${sG[2]?`${sG[2]}, `:""}${(0,fP.modifyGradientColor)(ZW,KR)})`:()=>KR}));return KR=>`${ZW}(${UH.map((ZW=>ZW(KR))).join(", ")})${sG?", ":""}`},GU=KR=>{var pW;if(Id(ZW.selectorText,LJ))return null;let sG=(0,es.getCSSURLValue)(KR);const YJ=0===sG.length,{parentStyleSheet:fP}=ZW,Db=fP&&fP.href?(0,es.getCSSBaseBath)(fP.href):(null===(pW=fP.ownerNode)||void 0===pW?void 0:pW.baseURI)||location.origin;sG=(0,Us.getAbsoluteURL)(Db,sG);const ec=`url("${sG}")`;return async KR=>{if(YJ)return"url('')";let ZW;if(Pi.has(sG))ZW=Pi.get(sG);else try{if(lR.has(sG)){const KR=lR.get(sG);if(ZW=await new Promise((ZW=>KR.push(ZW))),!ZW)return null}else lR.set(sG,[]),ZW=await(0,UH.getImageDetails)(sG),Pi.set(sG,ZW),lR.get(sG).forEach((KR=>KR(ZW))),lR.delete(sG);if(c())return null}catch(KR){return(0,Bh.logWarn)(KR),lR.has(sG)&&(lR.get(sG).forEach((KR=>KR(null))),lR.delete(sG)),ec}const LJ=undefined;return jE(ZW,KR)||ec}},jE=(KR,ZW)=>{const{isDark:LJ,isLight:pW,isTransparent:YJ,isLarge:Us,isTooLarge:fP,width:es}=KR;let c;if(fP)(0,Bh.logInfo)(`Not modifying too large image ${KR.src}`),c=`url("${KR.src}")`;else if(LJ&&YJ&&1===ZW.mode&&!Us&&es>2){(0,Bh.logInfo)(`Inverting dark image ${KR.src}`);const LJ=undefined;c=`url("${(0,UH.getFilteredImageDataURL)(KR,Object.assign(Object.assign({},ZW),{sepia:(0,sG.clamp)(ZW.sepia+10,0,100)}))}")`}else if(pW&&!YJ&&1===ZW.mode)if(Us)(0,Bh.logInfo)(`Not modifying light non-transparent large image ${KR.src}`),c="none";else{(0,Bh.logInfo)(`Dimming light image ${KR.src}`);const LJ=undefined;c=`url("${(0,UH.getFilteredImageDataURL)(KR,ZW)}")`}else if(0===ZW.mode&&pW&&!Us){(0,Bh.logInfo)(`Applying filter to image ${KR.src}`);const LJ=undefined;c=`url("${(0,UH.getFilteredImageDataURL)(KR,Object.assign(Object.assign({},ZW),{brightness:(0,sG.clamp)(ZW.brightness-10,5,200),sepia:(0,sG.clamp)(ZW.sepia+10,0,100)}))}")`}else(0,Bh.logInfo)(`Not modifying too large image ${KR.src}`),c=null;return c},Cd=[];let QI=0,oO=!1;return dG.forEach((({type:ZW,match:LJ,index:pW,typeGradient:sG,hasComma:YJ,offset:Us},fP)=>{const es=pW,UH=QI,Bh=es+LJ.length+Us;QI=Bh,UH!==es&&(oO?Cd.push((()=>{let ZW=KR.substring(UH,es);return","===ZW[0]&&(ZW=ZW.substring(1)),ZW})):Cd.push((()=>KR.substring(UH,es)))),oO=YJ||!1,"url"===ZW?Cd.push(GU(LJ)):"gradient"===ZW&&Cd.push(Qj({match:LJ,index:pW,typeGradient:sG,hasComma:YJ||!1,offset:Us})),fP===dG.length-1&&Cd.push((()=>KR.substring(Bh)))})),KR=>{const ZW=Cd.filter(Boolean).map((ZW=>ZW(KR)));if(ZW.some((KR=>KR instanceof Promise)))return Promise.all(ZW).then((KR=>KR.filter(Boolean).join("")));const LJ=ZW.join("");return LJ.endsWith(", initial")?LJ.slice(0,-9):LJ}}catch(ZW){return(0,Bh.logWarn)(`Unable to parse gradient ${KR}`,ZW),null}}function TX(KR){try{let ZW=0;const LJ=(0,YJ.getMatches)(/(^|\s)(?!calc)([a-z]+\(.+?\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,KR,2);let sG=0;const Us=LJ.map(((YJ,Us)=>{const es=ZW,UH=KR.indexOf(YJ,ZW),Bh=UH+YJ.length;ZW=Bh;const c=(0,pW.parseColorWithCache)(YJ);return c?ZW=>`${KR.substring(es,UH)}${(0,fP.modifyShadowColor)(c,ZW)}${Us===LJ.length-1?KR.substring(Bh):""}`:(sG++,()=>KR.substring(es,Bh))}));return KR=>{const ZW=Us.map((ZW=>ZW(KR))).join("");return{matchesLength:LJ.length,unparseableMatchesLength:sG,result:ZW}}}catch(ZW){return(0,Bh.logWarn)(`Unable to parse shadow ${KR}`,ZW),null}}function zR(KR){const ZW=TX(KR);return ZW?KR=>ZW(KR).result:null}function vy(KR,ZW,LJ,pW,sG,YJ){return KR.getModifierForVariable({varName:ZW,sourceValue:LJ,rule:pW,ignoredImgSelectors:sG,isCancelled:YJ})}function fI(KR,ZW,LJ){return KR.getModifierForVarDependant(ZW,LJ)}function xH(){(0,fP.clearColorModificationCache)(),Pi.clear(),(0,UH.cleanImageProcessingCache)(),lR.clear()}LJ.getBgImageModifier=Xi,LJ.getShadowModifierWithInfo=TX,LJ.getShadowModifier=zR,LJ.cleanModificationCache=xH},{"../../generators/modify-colors":22,"../../utils/color":33,"../../utils/math":36,"../../utils/parsing":39,"../../utils/platform":40,"../../utils/text":41,"../../utils/url":45,"../utils/log":19,"./css-rules":4,"./image":6}],11:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.EVENT_ARG=void 0;const pW=KR("./stylesheet-proxy"),sG=KR("../utils/log"),YJ=KR("../../const");document.currentScript&&document.currentScript.remove();const Us=`${YJ.MISC_PREFIX}ProxyInjected`,fP=`${YJ.EVENT_PREFIX}stylesheetProxy__done`;LJ.EVENT_ARG=`${YJ.EVENT_PREFIX}stylesheetProxy__arg`;const es=!document.currentScript;function UH(KR){(0,pW.injectProxy)(KR),Db(),document.dispatchEvent(new CustomEvent(fP))}function Bh(){const KR=document.currentScript.dataset.arg;if(void 0!==KR){document.documentElement.dataset[Us]="true";const ZW=JSON.parse(KR);(0,sG.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${ZW}).`),UH(ZW)}}function c(KR){document.removeEventListener(LJ.EVENT_ARG,c),void 0===document.documentElement.dataset[Us]?(document.documentElement.dataset[Us]="true",(0,sG.logInfo)(`MV3 proxy injector: ${es?"registerd":"dedicated"} path runs injectProxy(${KR.detail}).`),UH(KR.detail)):(0,sG.logInfo)(`MV3 proxy injector: ${es?"registerd":"dedicated"} path exits because everything is done.`)}function Db(){document.removeEventListener(LJ.EVENT_ARG,c),document.removeEventListener(fP,Db)}function ec(){(0,sG.logInfo)(`MV3 proxy injector: ${es?"registerd":"dedicated"} path setup...`),document.addEventListener(LJ.EVENT_ARG,c),document.addEventListener(fP,Db)}function rS(){void 0===document.documentElement.dataset[Us]?((0,sG.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&Bh(),ec()):(0,sG.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}rS()},{"../../const":1,"../utils/log":19,"./stylesheet-proxy":15}],12:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.bgFetch=void 0;const pW=KR("../../utils/message");let sG=0;const YJ=new Map,Us=new Map;async function fP(KR){return new Promise(((ZW,LJ)=>{const fP=++sG;YJ.set(fP,ZW),Us.set(fP,LJ),chrome.runtime.sendMessage({type:pW.MessageType.CS_FETCH,data:KR,id:fP})}))}LJ.bgFetch=fP,chrome.runtime.onMessage.addListener((({type:KR,data:ZW,error:LJ,id:sG})=>{if(KR===pW.MessageType.BG_FETCH_RESPONSE){const KR=YJ.get(sG),pW=Us.get(sG);YJ.delete(sG),Us.delete(sG),LJ?pW&&pW(LJ):KR&&KR(ZW)}}))},{"../../utils/message":37}],13:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.manageStyle=LJ.cleanLoadingLinks=LJ.getManageableStyles=LJ.shouldManageStyle=LJ.STYLE_SELECTOR=void 0;const pW=KR("../../utils/array"),sG=KR("../../utils/text"),YJ=KR("../../utils/url"),Us=KR("../utils/dom"),fP=KR("../utils/log"),es=KR("./css-rules"),UH=KR("./network"),Bh=KR("./stylesheet-modifier"),c=KR("../../utils/platform"),Db=KR("../../const"),ec=!1;function rS(KR){if(!KR.href)return!1;try{const ZW=undefined;return"fonts.googleapis.com"===new URL(KR.href).hostname}catch(ZW){return(0,fP.logInfo)(`Couldn't construct ${KR.href} as URL`),!1}}function RX(KR){return(KR instanceof HTMLStyleElement||KR instanceof SVGStyleElement||KR instanceof HTMLLinkElement&&Boolean(KR.rel)&&KR.rel.toLowerCase().includes("stylesheet")&&Boolean(KR.href)&&!KR.disabled&&(!c.isFirefox||!KR.href.startsWith("moz-extension://"))&&!rS(KR))&&!KR.classList.contains(Db.STYLESHEET_COMMON_CLASSNAME)&&"print"!==KR.media.toLowerCase()&&!KR.classList.contains("stylus")}function dG(KR,ZW=[],sG=!0){return RX(KR)?ZW.push(KR):(KR instanceof Element||c.isShadowDomSupported&&KR instanceof ShadowRoot||KR===document)&&((0,pW.forEach)(KR.querySelectorAll(LJ.STYLE_SELECTOR),(KR=>dG(KR,ZW,!1))),sG&&(0,Us.iterateShadowHosts)(KR,(KR=>dG(KR.shadowRoot,ZW,!1)))),ZW}LJ.STYLE_SELECTOR='style, link[rel*="stylesheet" i]:not([disabled])',LJ.shouldManageStyle=RX,LJ.getManageableStyles=dG;const Qj=new WeakSet,GU=new WeakSet;let jE=!1;document.addEventListener(`${Db.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{jE=!0}));let Cd=0;const QI=new Map;function oO(){QI.clear()}function Pi(KR,{update:ZW,loadingStart:LJ,loadingEnd:pW}){const sG=[];let UH=KR;for(;(UH=UH.nextElementSibling)&&UH.matches(`.${Db.STYLESHEET_COMMON_CLASSNAME}`);)sG.push(UH);let rS=sG.find((KR=>KR.matches(Db.STYLESHEET_CORS_SELECTOR)&&!GU.has(KR)))||null,RX=sG.find((KR=>KR.matches(Db.STYLESHEET_SYNC_SELECTOR)&&!Qj.has(KR)))||null,dG=null,oO=null,Pi=!1,Id=!0;const vy=(0,Bh.createStyleSheetModifier)(),fI=new MutationObserver((()=>{ZW()})),xH={attributes:!0,childList:!0,subtree:!0,characterData:!0};function xS(){return KR instanceof HTMLStyleElement&&KR.textContent.trim().match(es.cssImportRegex)}function Zq(KR,ZW){let LJ=!1;if(KR){let pW;KR:for(let sG=0,YJ=KR.length;sG<YJ;sG++)if(pW=KR[sG],pW.href){if(!ZW){LJ=!0;break KR}if(!pW.href.startsWith("https://fonts.googleapis.com/")&&pW.href.startsWith("http")&&!pW.href.startsWith(location.origin)){LJ=!0;break KR}}}return LJ}function tQ(){if(rS)return(0,fP.logInfo)("[getRulesSync] Using cors-copy."),rS.sheet.cssRules;if(xS())return(0,fP.logInfo)("[getRulesSync] CSSImport detected."),null;const ZW=qf();return KR instanceof HTMLLinkElement&&!(0,YJ.isRelativeHrefOnAbsolutePath)(KR.href)&&Zq(ZW,!1)?((0,fP.logInfo)("[getRulesSync] CSSImportRule detected on non-local href."),null):Zq(ZW,!0)?((0,fP.logInfo)("[getRulesSync] Cross-Origin CSSImportRule detected."),null):((0,fP.logInfo)("[getRulesSync] Using cssRules."),!ZW&&(0,fP.logWarn)("[getRulesSync] cssRules is null, trying again."),ZW)}function Bl(){rS?(KR.nextSibling!==rS&&KR.parentNode.insertBefore(rS,KR.nextSibling),rS.nextSibling!==RX&&KR.parentNode.insertBefore(RX,rS.nextSibling)):KR.nextSibling!==RX&&KR.parentNode.insertBefore(RX,KR.nextSibling)}function Xn(){RX=KR instanceof SVGStyleElement?document.createElementNS("http://www.w3.org/2000/svg","style"):document.createElement("style"),RX.classList.add(Db.STYLESHEET_COMMON_CLASSNAME),RX.classList.add(Db.STYLESHEET_SYNC_SELECTOR.substring(1)),RX.media="screen",KR.title&&(RX.title=KR.title),Qj.add(RX)}let AH=!1,BO=!1;const Zp=++Cd;async function wL(){let ZW,LJ;if(KR instanceof HTMLLinkElement){let[pW,sG]=UM();if(sG&&(0,fP.logWarn)(sG),!pW&&!sG&&!c.isSafari||c.isSafari&&!KR.sheet||Ff(sG)){try{(0,fP.logInfo)(`Linkelement ${Zp} is not loaded yet and thus will be await for`,KR),await lR(KR,Zp)}catch(KR){(0,fP.logWarn)(KR),BO=!0}if(Pi)return null;[pW,sG]=UM(),sG&&(0,fP.logWarn)(sG)}if(pW&&!Zq(pW,!1))return pW;if(ZW=await Xi(KR.href),LJ=(0,es.getCSSBaseBath)(KR.href),Pi)return null}else{if(!xS())return null;ZW=KR.textContent.trim(),LJ=(0,es.getCSSBaseBath)(location.href)}if(ZW){try{const pW=await TX(ZW,LJ);rS=zR(KR,pW)}catch(KR){(0,fP.logWarn)(KR)}if(rS)return dG=(0,Us.watchForNodePosition)(rS,"prev-sibling"),rS.sheet.cssRules}return null}function PW(KR){const sG=tQ();return sG?{rules:sG}:KR.secondRound?((0,fP.logWarn)("Detected dead-lock at details(), returning early to prevent it."),null):(AH||BO||(AH=!0,LJ(),wL().then((KR=>{AH=!1,pW(),KR&&ZW()})).catch((KR=>{(0,fP.logWarn)(KR),AH=!1,pW()}))),null)}let Z=!1;function Sr(KR,LJ){const pW=tQ();function sG(KR){if(KR)for(let ZW=KR.cssRules.length-1;ZW>=0;ZW--)KR.deleteRule(ZW)}function YJ(){RX||Xn(),oO&&oO.stop(),Bl(),null==RX.sheet&&(RX.textContent="");const KR=undefined;return sG(RX.sheet),oO?oO.run():oO=(0,Us.watchForNodePosition)(RX,"prev-sibling",(()=>{Z=!0,fP()})),RX.sheet}function fP(){const sG=Z;Z=!1,vy.modifySheet({prepareSheet:YJ,sourceCSSRules:pW,theme:KR,ignoreImageAnalysis:LJ,force:sG,isAsyncCancelled:()=>Pi}),Id=0===RX.sheet.cssRules.length,vy.shouldRebuildStyle()&&(0,Us.addReadyStateCompleteListener)((()=>ZW()))}pW&&(Pi=!1,fP())}function UM(){try{return null==KR.sheet?[null,null]:[KR.sheet.cssRules,null]}catch(KR){return[null,KR]}}function Ff(KR){return KR&&KR.message&&KR.message.includes("loading")}function qf(){const[KR,ZW]=UM();return ZW?((0,fP.logWarn)(ZW),null):KR}function RR(){TD(),ec||jE&&KR.sheet||JL()}let lW=null,tz=null;function oF(){const KR=qf();return KR?KR.length:null}function zI(){return oF()!==lW}function JL(){lW=oF(),fm();const LJ=()=>{zI()&&(lW=oF(),ZW()),jE&&KR.sheet?fm():tz=requestAnimationFrame(LJ)};LJ()}function fm(){cancelAnimationFrame(tz)}let Vb=!1;function Ip(){function KR(){Vb=!1,Pi||ZW()}jE=!0,fm(),Vb||(Vb=!0,"function"==typeof queueMicrotask?queueMicrotask(KR):requestAnimationFrame(KR))}function TD(){KR.addEventListener(`${Db.EVENT_PREFIX}updateSheet`,Ip)}function VF(){KR.removeEventListener(`${Db.EVENT_PREFIX}updateSheet`,Ip)}function kj(){VF(),fm()}function xO(){fI.disconnect(),Pi=!0,dG&&dG.stop(),oO&&oO.stop(),kj()}function Lr(){if(xO(),(0,Us.removeNode)(rS),(0,Us.removeNode)(RX),pW(),QI.has(Zp)){const KR=QI.get(Zp);QI.delete(Zp),KR&&KR()}}function Vv(){fI.observe(KR,xH),KR instanceof HTMLStyleElement&&RR()}const xo=10;let Zz=0;function Fc(){RX&&(Zz++,Zz>xo?(0,fP.logWarn)("Style sheet was moved multiple times",KR):((0,fP.logWarn)("Restore style",RX,KR),Bl(),dG&&dG.skip(),oO&&oO.skip(),Id||(Z=!0,ZW())))}return{details:PW,render:Sr,pause:xO,destroy:Lr,watch:Vv,restore:Fc}}async function lR(KR,ZW){return new Promise(((LJ,pW)=>{const sG=()=>{KR.removeEventListener("load",YJ),KR.removeEventListener("error",Us),QI.delete(ZW)},YJ=()=>{sG(),(0,fP.logInfo)(`Linkelement ${ZW} has been loaded`),LJ()},Us=()=>{sG(),pW(`Linkelement ${ZW} couldn't be loaded. ${KR.href}`)};QI.set(ZW,(()=>{sG(),pW()})),KR.addEventListener("load",YJ),KR.addEventListener("error",Us),KR.href||Us()}))}function Id(KR){return(0,es.getCSSURLValue)(KR.substring(7).trim().replace(/;$/,"").replace(/screen$/,""))}async function Xi(KR){return KR.startsWith("data:")?await(await fetch(KR)).text():await(0,UH.bgFetch)({url:KR,responseType:"text",mimeType:"text/css",origin:window.location.origin})}async function TX(KR,ZW,LJ=new Map){KR=(0,es.removeCSSComments)(KR),KR=(0,es.replaceCSSFontFace)(KR),KR=(0,es.replaceCSSRelativeURLsWithAbsolute)(KR,ZW);const pW=(0,sG.getMatches)(es.cssImportRegex,KR);for(const sG of pW){const pW=Id(sG),Us=(0,YJ.getAbsoluteURL)(ZW,pW);let UH;if(LJ.has(Us))UH=LJ.get(Us);else try{UH=await Xi(Us),LJ.set(Us,UH),UH=await TX(UH,(0,es.getCSSBaseBath)(Us),LJ)}catch(KR){(0,fP.logWarn)(KR),UH=""}KR=KR.split(sG).join(UH)}return KR=KR.trim()}function zR(KR,ZW){if(!ZW)return null;const LJ=document.createElement("style");return LJ.classList.add(Db.STYLESHEET_COMMON_CLASSNAME),LJ.classList.add(Db.STYLESHEET_CORS_SELECTOR.substring(1)),LJ.media="screen",LJ.textContent=ZW,KR.parentNode.insertBefore(LJ,KR.nextSibling),LJ.sheet.disabled=!0,GU.add(LJ),LJ}LJ.cleanLoadingLinks=oO,LJ.manageStyle=Pi},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../../utils/text":41,"../../utils/url":45,"../utils/dom":18,"../utils/log":19,"./css-rules":4,"./network":12,"./stylesheet-modifier":14}],14:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.createStyleSheetModifier=void 0;const pW=KR("../../utils/throttle"),sG=KR("./css-rules"),YJ=KR("./modify-css"),Us=KR("./variables"),fP=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function es(KR){let ZW="";return fP.forEach((LJ=>{ZW+=`${LJ}:${KR[LJ]};`})),ZW}const UH=(0,pW.createAsyncTasksQueue)();function Bh(){let KR=0;const ZW=new Set,LJ=new Map,pW=new Set;let fP=null,Bh=!1,c=!1;function Db(){return Bh&&!c}function ec(Db){const ec=Db.sourceCSSRules,{theme:rS,ignoreImageAnalysis:RX,force:dG,prepareSheet:Qj,isAsyncCancelled:GU}=Db;let jE=0===LJ.size;const Cd=new Set(LJ.keys()),QI=es(rS),oO=QI!==fP;Bh&&(c=!0);const Pi=[];if((0,sG.iterateCSSRules)(ec,(KR=>{let pW=KR.cssText,fP=!1;if(Cd.delete(pW),KR.parentRule instanceof CSSMediaRule&&(pW+=`;${KR.parentRule.media.mediaText}`),ZW.has(pW)||(ZW.add(pW),fP=!0),!fP)return void Pi.push(LJ.get(pW));if(jE=!0,"revert"===KR.style.all)return;const es=[];KR.style&&(0,sG.iterateCSSDeclarations)(KR.style,((ZW,LJ)=>{const pW=(0,YJ.getModifiableCSSDeclaration)(ZW,LJ,KR,Us.variablesStore,RX,GU);pW&&es.push(pW)}));let UH=null;if(es.length>0){const ZW=KR.parentRule;UH={selector:KR.selectorText,declarations:es,parentRule:ZW},Pi.push(UH)}LJ.set(pW,UH)}),(()=>{Bh=!0})),Cd.forEach((KR=>{ZW.delete(KR),LJ.delete(KR)})),fP=QI,!dG&&!jE&&!oO)return;function lR(KR,ZW,LJ){const{selector:pW,declarations:sG}=LJ,YJ=KR=>{const{property:ZW,value:LJ,important:pW,sourceValue:sG}=KR;return`${ZW}: ${null==LJ?sG:LJ}${pW?" !important":""};`};let Us="";sG.forEach((KR=>{Us+=`${YJ(KR)} `}));const fP=`${pW} { ${Us} }`;KR.insertRule(fP,ZW)}KR++;const Id=new Map,Xi=new Map;let TX=0,zR=0;const vy={rule:null,rules:[],isGroup:!0},fI=new WeakMap;function xH(KR){if(null==KR)return vy;if(fI.has(KR))return fI.get(KR);const ZW={rule:KR,rules:[],isGroup:!0};fI.set(KR,ZW);const LJ=undefined;return xH(KR.parentRule).rules.push(ZW),ZW}pW.forEach((KR=>KR())),pW.clear(),Pi.filter((KR=>KR)).forEach((({selector:ZW,declarations:LJ,parentRule:sG})=>{const YJ=xH(sG),Us={selector:ZW,declarations:[],isGroup:!1},fP=Us.declarations;function es(ZW,LJ,pW,sG){const YJ=++TX,Us={property:ZW,value:null,important:pW,asyncKey:YJ,sourceValue:sG};fP.push(Us);const es=KR;LJ.then((ZW=>{ZW&&!GU()&&es===KR&&(Us.value=ZW,UH.add((()=>{GU()||es!==KR||tQ(YJ)})))}))}function Bh(ZW,LJ,sG,YJ){const{declarations:Us,onTypeChange:UH}=LJ,Bh=++zR,c=KR,Db=fP.length;let ec=[];if(0===Us.length){const KR={property:ZW,value:YJ,important:sG,sourceValue:YJ,varKey:Bh};fP.push(KR),ec=[KR]}Us.forEach((KR=>{if(KR.value instanceof Promise)es(KR.property,KR.value,sG,YJ);else{const ZW={property:KR.property,value:KR.value,important:sG,sourceValue:YJ,varKey:Bh};fP.push(ZW),ec.push(ZW)}})),UH.addListener((ZW=>{if(GU()||c!==KR)return;const LJ=ZW.map((KR=>({property:KR.property,value:KR.value,important:sG,sourceValue:YJ,varKey:Bh}))),pW=fP.indexOf(ec[0],Db);fP.splice(pW,ec.length,...LJ),ec=LJ,Bl(Bh)})),pW.add((()=>UH.removeListeners()))}YJ.rules.push(Us),LJ.forEach((({property:KR,value:ZW,important:LJ,sourceValue:pW})=>{if("function"==typeof ZW){const sG=ZW(rS);sG instanceof Promise?es(KR,sG,LJ,pW):KR.startsWith("--")?Bh(KR,sG,LJ,pW):fP.push({property:KR,value:sG,important:LJ,sourceValue:pW})}else fP.push({property:KR,value:ZW,important:LJ,sourceValue:pW})}))}));const xS=Qj();function Zq(){function KR(KR,ZW){const{rule:LJ}=KR;if(LJ instanceof CSSMediaRule){const{media:KR}=LJ,pW=ZW.cssRules.length;return ZW.insertRule(`@media ${KR.mediaText} {}`,pW),ZW.cssRules[pW]}return ZW}function ZW(LJ,pW,sG){LJ.rules.forEach((LJ=>{if(LJ.isGroup){const YJ=undefined;ZW(LJ,KR(LJ,pW),sG)}else sG(LJ,pW)}))}ZW(vy,xS,((KR,ZW)=>{const LJ=ZW.cssRules.length;KR.declarations.forEach((({asyncKey:pW,varKey:sG})=>{null!=pW&&Id.set(pW,{rule:KR,target:ZW,index:LJ}),null!=sG&&Xi.set(sG,{rule:KR,target:ZW,index:LJ})})),lR(ZW,LJ,KR)}))}function tQ(KR){const{rule:ZW,target:LJ,index:pW}=Id.get(KR);LJ.deleteRule(pW),lR(LJ,pW,ZW),Id.delete(KR)}function Bl(KR){const{rule:ZW,target:LJ,index:pW}=Xi.get(KR);LJ.deleteRule(pW),lR(LJ,pW,ZW)}Zq()}return{modifySheet:ec,shouldRebuildStyle:Db}}LJ.createStyleSheetModifier=Bh},{"../../utils/throttle":42,"./css-rules":4,"./modify-css":10,"./variables":16}],15:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.injectProxy=void 0;const pW=KR("../../const");function sG(KR){document.dispatchEvent(new CustomEvent(`${pW.EVENT_PREFIX}inlineScriptsAllowed`));const ZW=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),LJ=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),sG=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),YJ=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),Us=KR?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,fP=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),es=fP?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,UH="www.vy.no"===location.hostname,Bh=UH?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,c=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",ZW),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",LJ),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",sG),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",YJ),document.removeEventListener(`${pW.EVENT_PREFIX}cleanUp`,c),document.removeEventListener(`${pW.EVENT_PREFIX}addUndefinedResolver`,Db),KR&&Object.defineProperty(Document.prototype,"styleSheets",Us),fP&&Object.defineProperty(Element.prototype,"getElementsByTagName",es),UH&&Object.defineProperty(Node.prototype,"childNodes",Bh)},Db=KR=>{customElements.whenDefined(KR.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${pW.EVENT_PREFIX}isDefined`,{detail:{tag:KR.detail.tag}}))}))};document.addEventListener(pW.MSG_CLEANUP,c),document.addEventListener(`${pW.EVENT_PREFIX}addUndefinedResolver`,Db);const ec=new Event(`${pW.EVENT_PREFIX}updateSheet`);function rS(KR,LJ,sG){return ZW.value.call(this,KR,LJ,sG),this.ownerNode&&!this.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(ec),-1}function RX(KR,ZW){const sG=LJ.value.call(this,KR,ZW);return this.ownerNode&&!this.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(ec),sG}function dG(KR){sG.value.call(this,KR),this.ownerNode&&!this.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(ec)}function Qj(KR){YJ.value.call(this,KR),this.ownerNode&&!this.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(ec)}function GU(){const KR=()=>{const KR=undefined,ZW=[...Us.get.call(this)].filter((KR=>KR.ownerNode&&!KR.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)));return ZW.item=KR=>ZW[KR],Object.setPrototypeOf(ZW,StyleSheetList.prototype)};let ZW=KR();const LJ=undefined;return ZW=new Proxy(ZW,{get:function(ZW,LJ){return KR()[LJ]}}),ZW}function jE(KR){if("style"!==KR)return es.value.call(this,KR);const ZW=()=>{const ZW=es.value.call(this,KR);return Object.setPrototypeOf([...ZW].filter((KR=>!KR.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let LJ=ZW();const sG=undefined;return LJ=new Proxy(LJ,{get:function(KR,LJ){return ZW()[Number(LJ)||LJ]}}),LJ}function Cd(){const KR=Bh.get.call(this);return Object.setPrototypeOf([...KR].filter((KR=>!KR.classList||!KR.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},ZW,{value:rS})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},LJ,{value:RX})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},sG,{value:dG})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},YJ,{value:Qj})),KR&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},Us,{get:GU})),fP&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},es,{value:jE})),UH&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},Bh,{get:Cd}))}LJ.injectProxy=sG},{"../../const":1}],16:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.replaceCSSVariablesNames=LJ.variablesStore=LJ.VariablesStore=void 0;const pW=KR("../../generators/modify-colors"),sG=KR("../../utils/text"),YJ=KR("./css-rules"),Us=KR("./modify-css"),fP=KR("../../utils/color"),es=KR("../../const"),UH=1<<0,Bh=1<<1,c=1<<2,Db=1<<3;class ec{constructor(){this.varTypes=new Map,this.rulesQueue=[],this.definedVars=new Set,this.varRefs=new Map,this.unknownColorVars=new Set,this.unknownBgVars=new Set,this.undefinedVars=new Set,this.initialVarTypes=new Map,this.changedTypeVars=new Set,this.typeChangeSubscriptions=new Map,this.unstableVarValues=new Map}clear(){this.varTypes.clear(),this.rulesQueue.splice(0),this.definedVars.clear(),this.varRefs.clear(),this.unknownColorVars.clear(),this.unknownBgVars.clear(),this.undefinedVars.clear(),this.initialVarTypes.clear(),this.changedTypeVars.clear(),this.typeChangeSubscriptions.clear(),this.unstableVarValues.clear()}isVarType(KR,ZW){return this.varTypes.has(KR)&&(this.varTypes.get(KR)&ZW)>0}addRulesForMatching(KR){this.rulesQueue.push(KR)}matchVariablesAndDependants(){this.changedTypeVars.clear(),this.initialVarTypes=new Map(this.varTypes),this.collectRootVariables(),this.collectVariablesAndVarDep(this.rulesQueue),this.rulesQueue.splice(0),this.collectRootVarDependants(),this.varRefs.forEach(((KR,ZW)=>{KR.forEach((KR=>{this.varTypes.has(ZW)&&this.resolveVariableType(KR,this.varTypes.get(ZW))}))})),this.unknownColorVars.forEach((KR=>{this.unknownBgVars.has(KR)?(this.unknownColorVars.delete(KR),this.unknownBgVars.delete(KR),this.resolveVariableType(KR,UH)):this.isVarType(KR,UH|Bh|c)?this.unknownColorVars.delete(KR):this.undefinedVars.add(KR)})),this.unknownBgVars.forEach((KR=>{const ZW=undefined;null!=this.findVarRef(KR,(KR=>this.unknownColorVars.has(KR)||this.isVarType(KR,Bh|c)))?this.itarateVarRefs(KR,(KR=>{this.resolveVariableType(KR,UH)})):this.isVarType(KR,UH|Db)?this.unknownBgVars.delete(KR):this.undefinedVars.add(KR)})),this.changedTypeVars.forEach((KR=>{this.typeChangeSubscriptions.has(KR)&&this.typeChangeSubscriptions.get(KR).forEach((KR=>{KR()}))})),this.changedTypeVars.clear()}getModifierForVariable(KR){return ZW=>{const{varName:LJ,sourceValue:pW,rule:sG,ignoredImgSelectors:YJ,isCancelled:fP}=KR,es=()=>{const KR=[],es=(sG,YJ,Us)=>{if(!this.isVarType(LJ,sG))return;const fP=YJ(LJ);let es;if(Id(pW))if(Xi(pW)){let KR=tQ(pW,this.unstableVarValues);KR||(KR=sG===UH?"#ffffff":"#000000"),es=Us(KR,ZW)}else es=GU(pW,(KR=>YJ(KR)),(KR=>Us(KR,ZW)));else es=Us(pW,ZW);KR.push({property:fP,value:es})};if(es(UH,Cd,xH),es(Bh,QI,xS),es(c,oO,Zq),this.isVarType(LJ,Db)){const es=Pi(LJ);let UH=pW;Id(pW)&&(UH=GU(pW,(KR=>Cd(KR)),(KR=>xH(KR,ZW))));const Bh=(0,Us.getBgImageModifier)(UH,sG,YJ,fP);UH="function"==typeof Bh?Bh(ZW):Bh,KR.push({property:es,value:UH})}return KR},ec=new Set,rS=KR=>{const ZW=()=>{const ZW=es();KR(ZW)};ec.add(ZW),this.subscribeForVarTypeChange(LJ,ZW)},RX=()=>{ec.forEach((KR=>{this.unsubscribeFromVariableTypeChanges(LJ,KR)}))};return{declarations:es(),onTypeChange:{addListener:rS,removeListeners:RX}}}}getModifierForVarDependant(KR,ZW){if(ZW.match(/^\s*(rgb|hsl)a?\(/)){const LJ=KR.startsWith("background"),pW=TX(KR);return KR=>{let sG=tQ(ZW,this.unstableVarValues);sG||(sG=LJ?"#ffffff":"#000000");const YJ=undefined;return(LJ?xH:pW?xS:Zq)(sG,KR)}}return"background-color"===KR?KR=>GU(ZW,(KR=>Cd(KR)),(ZW=>xH(ZW,KR))):TX(KR)?KR=>GU(ZW,(KR=>QI(KR)),(ZW=>xS(ZW,KR))):"background"===KR||"background-image"===KR||"box-shadow"===KR?LJ=>{const pW=new Set,sG=()=>{const sG=GU(ZW,(KR=>this.isVarType(KR,UH)?Cd(KR):this.isVarType(KR,Db)?Pi(KR):(pW.add(KR),KR)),(KR=>xH(KR,LJ)));if("box-shadow"===KR){const KR=undefined,ZW=(0,Us.getShadowModifierWithInfo)(sG)(LJ);if(ZW.unparseableMatchesLength!==ZW.matchesLength)return ZW.result}return sG},YJ=sG();return pW.size>0?new Promise((KR=>{const ZW=pW.values().next().value,LJ=()=>{this.unsubscribeFromVariableTypeChanges(ZW,LJ);const pW=sG();KR(pW)};this.subscribeForVarTypeChange(ZW,LJ)})):YJ}:KR.startsWith("border")||KR.startsWith("outline")?KR=>GU(ZW,(KR=>oO(KR)),(ZW=>Zq(ZW,KR))):null}subscribeForVarTypeChange(KR,ZW){this.typeChangeSubscriptions.has(KR)||this.typeChangeSubscriptions.set(KR,new Set);const LJ=this.typeChangeSubscriptions.get(KR);LJ.has(ZW)||LJ.add(ZW)}unsubscribeFromVariableTypeChanges(KR,ZW){this.typeChangeSubscriptions.has(KR)&&this.typeChangeSubscriptions.get(KR).delete(ZW)}collectVariablesAndVarDep(KR){KR.forEach((KR=>{(0,YJ.iterateCSSRules)(KR,(KR=>{KR.style&&(0,YJ.iterateCSSDeclarations)(KR.style,((KR,ZW)=>{lR(KR)&&this.inspectVariable(KR,ZW),Id(ZW)&&this.inspectVarDependant(KR,ZW)}))}))}))}collectRootVariables(){(0,YJ.iterateCSSDeclarations)(document.documentElement.style,((KR,ZW)=>{lR(KR)&&this.inspectVariable(KR,ZW)}))}inspectVariable(KR,ZW){if(this.unstableVarValues.set(KR,ZW),Id(ZW)&&Xi(ZW)&&(this.unknownColorVars.add(KR),this.definedVars.add(KR)),this.definedVars.has(KR))return;this.definedVars.add(KR);const LJ=undefined;zR.test(ZW)||(0,fP.parseColorWithCache)(ZW)?this.unknownColorVars.add(KR):(ZW.includes("url(")||ZW.includes("linear-gradient(")||ZW.includes("radial-gradient("))&&this.resolveVariableType(KR,Db)}resolveVariableType(KR,ZW){const LJ=this.initialVarTypes.get(KR)||0,pW=undefined,sG=(this.varTypes.get(KR)||0)|ZW;this.varTypes.set(KR,sG),(sG!==LJ||this.undefinedVars.has(KR))&&(this.changedTypeVars.add(KR),this.undefinedVars.delete(KR)),this.unknownColorVars.delete(KR),this.unknownBgVars.delete(KR)}collectRootVarDependants(){(0,YJ.iterateCSSDeclarations)(document.documentElement.style,((KR,ZW)=>{Id(ZW)&&this.inspectVarDependant(KR,ZW)}))}inspectVarDependant(KR,ZW){lR(KR)?this.iterateVarDeps(ZW,(ZW=>{this.varRefs.has(KR)||this.varRefs.set(KR,new Set),this.varRefs.get(KR).add(ZW)})):"background-color"===KR||"box-shadow"===KR?this.iterateVarDeps(ZW,(KR=>this.resolveVariableType(KR,UH))):TX(KR)?this.iterateVarDeps(ZW,(KR=>this.resolveVariableType(KR,Bh))):KR.startsWith("border")||KR.startsWith("outline")?this.iterateVarDeps(ZW,(KR=>this.resolveVariableType(KR,c))):"background"!==KR&&"background-image"!==KR||this.iterateVarDeps(ZW,(KR=>{if(this.isVarType(KR,UH|Db))return;const ZW=null!=this.findVarRef(KR,(KR=>this.unknownColorVars.has(KR)||this.isVarType(KR,Bh|c)));this.itarateVarRefs(KR,(KR=>{ZW?this.resolveVariableType(KR,UH):this.unknownBgVars.add(KR)}))}))}iterateVarDeps(KR,ZW){const LJ=new Set;jE(KR,(KR=>LJ.add(KR))),LJ.forEach((KR=>ZW(KR)))}findVarRef(KR,ZW,LJ=new Set){if(LJ.has(KR))return null;LJ.add(KR);const pW=undefined;if(ZW(KR))return KR;const sG=this.varRefs.get(KR);if(!sG||0===sG.size)return null;for(const KR of sG){const pW=this.findVarRef(KR,ZW,LJ);if(pW)return pW}return null}itarateVarRefs(KR,ZW){this.findVarRef(KR,(KR=>(ZW(KR),!1)))}setOnRootVariableChange(KR){this.onRootVariableDefined=KR}putRootVars(KR,ZW){const LJ=KR.sheet;LJ.cssRules.length>0&&LJ.deleteRule(0);const pW=new Map;(0,YJ.iterateCSSDeclarations)(document.documentElement.style,((KR,LJ)=>{lR(KR)&&(this.isVarType(KR,UH)&&pW.set(Cd(KR),xH(LJ,ZW)),this.isVarType(KR,Bh)&&pW.set(QI(KR),xS(LJ,ZW)),this.isVarType(KR,c)&&pW.set(oO(KR),Zq(LJ,ZW)),this.subscribeForVarTypeChange(KR,this.onRootVariableDefined))}));const sG=[];sG.push(":root {");for(const[KR,ZW]of pW)sG.push(`    ${KR}: ${ZW};`);sG.push("}");const Us=sG.join("\n");LJ.insertRule(Us)}}function rS(KR,ZW=0){const LJ=KR.indexOf("var(",ZW);if(LJ>=0){const ZW=(0,sG.getParenthesesRange)(KR,LJ+3);if(ZW)return{start:LJ,end:ZW.end}}return null}function RX(KR){const ZW=[];let LJ=0,pW;for(;pW=rS(KR,LJ);){const{start:sG,end:YJ}=pW;ZW.push({start:sG,end:YJ,value:KR.substring(sG,YJ)}),LJ=pW.end+1}return ZW}function dG(KR,ZW){const LJ=RX(KR),pW=LJ.length;if(0===pW)return KR;const sG=KR.length,YJ=LJ.map((KR=>ZW(KR.value))),Us=[];Us.push(KR.substring(0,LJ[0].start));for(let ZW=0;ZW<pW;ZW++){Us.push(YJ[ZW]);const fP=LJ[ZW].end,es=ZW<pW-1?LJ[ZW+1].start:sG;Us.push(KR.substring(fP,es))}return Us.join("")}function Qj(KR){const ZW=KR.indexOf(",");let LJ,pW;return ZW>=0?(LJ=KR.substring(4,ZW).trim(),pW=KR.substring(ZW+1,KR.length-1).trim()):(LJ=KR.substring(4,KR.length-1).trim(),pW=""),{name:LJ,fallback:pW}}function GU(KR,ZW,LJ){const pW=undefined;return dG(KR,(KR=>{const{name:pW,fallback:sG}=Qj(KR),YJ=ZW(pW);if(!sG)return`var(${YJ})`;let Us;return Us=Id(sG)?GU(sG,ZW,LJ):LJ?LJ(sG):sG,`var(${YJ}, ${Us})`}))}function jE(KR,ZW){GU(KR,(KR=>(ZW(KR),KR)))}function Cd(KR){return`--${es.ROOT_VARS_PREFIX}-bg${KR}`}function QI(KR){return`--${es.ROOT_VARS_PREFIX}-text${KR}`}function oO(KR){return`--${es.ROOT_VARS_PREFIX}-border${KR}`}function Pi(KR){return`--${es.ROOT_VARS_PREFIX}-bgimg${KR}`}function lR(KR){return KR.startsWith("--")}function Id(KR){return KR.includes("var(")}function Xi(KR){return KR.match(/^\s*(rgb|hsl)a?\(/)}function TX(KR){return"color"===KR||"caret-color"===KR||"-webkit-text-fill-color"===KR}LJ.VariablesStore=ec,LJ.variablesStore=new ec,LJ.replaceCSSVariablesNames=GU;const zR=/^\d{1,3}, ?\d{1,3}, ?\d{1,3}$/;function vy(KR){if(zR.test(KR)){const ZW=KR.split(",");let LJ="rgb(";return ZW.forEach((KR=>{LJ+=`${KR.trim()}, `})),LJ=LJ.substring(0,LJ.length-2),LJ+=")",{isRaw:!0,color:LJ}}return{isRaw:!1,color:KR}}function fI(KR,ZW,LJ){const{isRaw:pW,color:sG}=vy(KR),YJ=(0,fP.parseColorWithCache)(sG);if(YJ){const KR=LJ(YJ,ZW);if(pW){const ZW=(0,fP.parseColorWithCache)(KR);return ZW?`${ZW.r}, ${ZW.g}, ${ZW.b}`:KR}return KR}return sG}function xH(KR,ZW){return fI(KR,ZW,pW.modifyBackgroundColor)}function xS(KR,ZW){return fI(KR,ZW,pW.modifyForegroundColor)}function Zq(KR,ZW){return fI(KR,ZW,pW.modifyBorderColor)}function tQ(KR,ZW,LJ=new Set){let pW=!1;const sG=undefined,YJ=dG(KR,(KR=>{const{name:sG,fallback:YJ}=Qj(KR);if(LJ.has(sG))return pW=!0,null;LJ.add(sG);const Us=ZW.get(sG)||YJ;let fP=null;return Us&&(fP=Id(Us)?tQ(Us,ZW,LJ):Us),fP||(pW=!0,null)}));return pW?null:YJ}},{"../../const":1,"../../generators/modify-colors":22,"../../utils/color":33,"../../utils/text":41,"./css-rules":4,"./modify-css":10}],17:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.stopWatchingForStyleChanges=LJ.watchForStyleChanges=void 0;const pW=KR("../../utils/array"),sG=KR("../utils/dom"),YJ=KR("./style-manager"),Us=KR("../../utils/platform"),fP=KR("../../const"),es=[];let UH;const Bh=new Map;let c;function Db(KR){Us.isDefinedSelectorSupported&&(0,pW.forEach)(KR.querySelectorAll(":not(:defined)"),(KR=>{let ZW=KR.tagName.toLowerCase();if(!ZW.includes("-")){const LJ=KR.getAttribute("is");if(!LJ)return;ZW=LJ}Bh.has(ZW)||(Bh.set(ZW,new Set),dG(ZW).then((()=>{if(c){const KR=Bh.get(ZW);Bh.delete(ZW),c(Array.from(KR))}}))),Bh.get(ZW).add(KR)}))}let ec=!1;document.addEventListener(`${fP.EVENT_PREFIX}inlineScriptsAllowed`,(()=>{ec=!0}));const rS=new Map;function RX(KR){if(ec=!0,rS.has(KR.detail.tag)){const ZW=undefined;rS.get(KR.detail.tag)()}}async function dG(KR){return new Promise((ZW=>{if(window.customElements&&"function"==typeof customElements.whenDefined)customElements.whenDefined(KR).then((()=>ZW()));else{const LJ=()=>{const pW=Bh.get(KR);pW&&pW.size>0&&(pW.values().next().value.matches(":defined")?ZW():requestAnimationFrame(LJ))};requestAnimationFrame(LJ)}}))}function Qj(KR){c=KR}function GU(){c=null,Bh.clear(),document.removeEventListener(`${fP.EVENT_PREFIX}isDefined`,RX)}function jE(KR,ZW,LJ){QI();const Us=new Set(KR),Bh=new WeakMap,c=new WeakMap;function ec(KR){Bh.set(KR,KR.previousElementSibling),c.set(KR,KR.nextElementSibling)}function rS(KR){Bh.delete(KR),c.delete(KR)}function dG(KR){return KR.previousElementSibling!==Bh.get(KR)||KR.nextElementSibling!==c.get(KR)}function GU(KR){const{createdStyles:LJ,removedStyles:pW,movedStyles:sG}=KR;LJ.forEach((KR=>ec(KR))),sG.forEach((KR=>ec(KR))),pW.forEach((KR=>rS(KR))),LJ.forEach((KR=>Us.add(KR))),pW.forEach((KR=>Us.delete(KR))),LJ.size+pW.size+sG.size>0&&ZW({created:Array.from(LJ),removed:Array.from(pW),moved:Array.from(sG),updated:[]})}function jE({additions:KR,moves:ZW,deletions:LJ}){const pW=new Set,Us=new Set,fP=new Set;KR.forEach((KR=>(0,YJ.getManageableStyles)(KR).forEach((KR=>pW.add(KR))))),LJ.forEach((KR=>(0,YJ.getManageableStyles)(KR).forEach((KR=>Us.add(KR))))),ZW.forEach((KR=>(0,YJ.getManageableStyles)(KR).forEach((KR=>fP.add(KR))))),GU({createdStyles:pW,removedStyles:Us,movedStyles:fP}),KR.forEach((KR=>{(0,sG.iterateShadowHosts)(KR,lR),Db(KR)}))}function Cd(KR){const ZW=new Set((0,YJ.getManageableStyles)(KR)),LJ=new Set,pW=new Set,fP=new Set;ZW.forEach((KR=>{Us.has(KR)||LJ.add(KR)})),Us.forEach((KR=>{ZW.has(KR)||pW.add(KR)})),ZW.forEach((KR=>{LJ.has(KR)||pW.has(KR)||!dG(KR)||fP.add(KR)})),GU({createdStyles:LJ,removedStyles:pW,movedStyles:fP}),(0,sG.iterateShadowHosts)(KR,lR),Db(KR)}function oO(KR){const LJ=new Set,pW=new Set;KR.forEach((KR=>{const{target:ZW}=KR;ZW.isConnected&&((0,YJ.shouldManageStyle)(ZW)?LJ.add(ZW):ZW instanceof HTMLLinkElement&&ZW.disabled&&pW.add(ZW))})),LJ.size+pW.size>0&&ZW({updated:Array.from(LJ),created:[],removed:Array.from(pW),moved:[]})}function Pi(KR){const ZW=(0,sG.createOptimizedTreeObserver)(KR,{onMinorMutations:jE,onHugeMutations:Cd}),LJ=new MutationObserver(oO);LJ.observe(KR,{attributes:!0,attributeFilter:["rel","disabled","media","href"],subtree:!0}),es.push(ZW,LJ),UH.add(KR)}function lR(KR){const{shadowRoot:ZW}=KR;null==ZW||UH.has(ZW)||(Pi(ZW),LJ(ZW))}KR.forEach(ec),Pi(document),(0,sG.iterateShadowHosts)(document.documentElement,lR),Qj((KR=>{const LJ=[];KR.forEach((KR=>(0,pW.push)(LJ,(0,YJ.getManageableStyles)(KR.shadowRoot)))),ZW({created:LJ,updated:[],removed:[],moved:[]}),KR.forEach((KR=>{const{shadowRoot:ZW}=KR;null!=ZW&&(lR(KR),(0,sG.iterateShadowHosts)(ZW,lR),Db(ZW))}))})),document.addEventListener(`${fP.EVENT_PREFIX}isDefined`,RX),Db(document)}function Cd(){es.forEach((KR=>KR.disconnect())),es.splice(0,es.length),UH=new WeakSet}function QI(){Cd(),GU()}LJ.watchForStyleChanges=jE,LJ.stopWatchingForStyleChanges=QI},{"../../const":1,"../../utils/array":30,"../../utils/platform":40,"../utils/dom":18,"./style-manager":13}],18:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.createOptimizedTreeObserver=LJ.cleanReadyStateCompleteListeners=LJ.addReadyStateCompleteListener=LJ.isReadyStateComplete=LJ.removeDOMReadyListener=LJ.addDOMReadyListener=LJ.setIsDOMReady=LJ.isDOMReady=LJ.iterateShadowHosts=LJ.watchForNodePosition=LJ.removeNode=LJ.createNodeAsap=void 0;const pW=KR("../utils/log"),sG=KR("../../utils/throttle"),YJ=KR("../../utils/array"),Us=KR("../../utils/time");function fP({selectNode:KR,createNode:ZW,updateNode:LJ,selectTarget:pW,createTarget:sG,isTargetMutation:YJ}){const Us=pW();if(Us){const pW=KR();pW?LJ(pW):ZW(Us)}else{const LJ=new MutationObserver((LJ=>{const sG=undefined;if(LJ.find(YJ)){fP();const LJ=pW();KR()||ZW(LJ)}})),Us=()=>{if("complete"!==document.readyState)return;fP();const LJ=pW()||sG();KR()||ZW(LJ)},fP=()=>{document.removeEventListener("readystatechange",Us),LJ.disconnect()};"complete"===document.readyState?Us():(document.addEventListener("readystatechange",Us),LJ.observe(document,{childList:!0,subtree:!0}))}}function es(KR){KR&&KR.parentNode&&KR.parentNode.removeChild(KR)}function UH(KR,ZW,LJ=Function.prototype){const YJ=10,fP=(0,Us.getDuration)({seconds:2}),es=(0,Us.getDuration)({seconds:10}),UH=KR.previousSibling;let Bh=KR.parentNode;if(!Bh)throw new Error("Unable to watch for node position: parent element not found");if("prev-sibling"===ZW&&!UH)throw new Error("Unable to watch for node position: there is no previous sibling");let c=0,Db=null,ec=null;const rS=(0,sG.throttle)((()=>{if(ec)return;c++;const sG=Date.now();if(null==Db)Db=sG;else if(c>=YJ){if(sG-Db<es)return(0,pW.logWarn)(`Node position watcher paused: retry in ${fP}ms`,KR,UH),void(ec=setTimeout((()=>{Db=null,c=0,ec=null,rS()}),fP));Db=sG,c=1}if("head"===ZW&&UH&&UH.parentNode!==Bh)return(0,pW.logWarn)("Unable to restore node position: sibling parent changed",KR,UH,Bh),void Qj();if("prev-sibling"===ZW){if(null==UH.parentNode)return(0,pW.logWarn)("Unable to restore node position: sibling was removed",KR,UH,Bh),void Qj();UH.parentNode!==Bh&&((0,pW.logWarn)("Style was moved to another parent",KR,UH,Bh),jE(UH.parentNode))}"head"!==ZW||Bh.isConnected||(Bh=document.head),(0,pW.logWarn)("Restoring node position",KR,UH,Bh),Bh.insertBefore(KR,UH&&UH.isConnected?UH.nextSibling:Bh.firstChild),RX.takeRecords(),LJ&&LJ()})),RX=new MutationObserver((()=>{("head"===ZW&&(KR.parentNode!==Bh||!KR.parentNode.isConnected)||"prev-sibling"===ZW&&KR.previousSibling!==UH)&&rS()})),dG=()=>{RX.observe(Bh,{childList:!0})},Qj=()=>{clearTimeout(ec),RX.disconnect(),rS.cancel()},GU=()=>{RX.takeRecords()},jE=KR=>{Bh=KR,Qj(),dG()};return dG(),{run:dG,stop:Qj,skip:GU}}function Bh(KR,ZW){if(null==KR)return;const LJ=document.createTreeWalker(KR,NodeFilter.SHOW_ELEMENT,{acceptNode:KR=>null==KR.shadowRoot?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT});for(let pW=KR.shadowRoot?LJ.currentNode:LJ.nextNode();null!=pW;pW=LJ.nextNode())pW.classList.contains("surfingkeys_hints_host")||(ZW(pW),Bh(pW.shadowRoot,ZW))}LJ.createNodeAsap=fP,LJ.removeNode=es,LJ.watchForNodePosition=UH,LJ.iterateShadowHosts=Bh;let c=()=>"complete"===document.readyState||"interactive"===document.readyState;function Db(KR){LJ.isDOMReady=KR}LJ.isDOMReady=c,LJ.setIsDOMReady=Db;const ec=new Set;function rS(KR){(0,LJ.isDOMReady)()?KR():ec.add(KR)}function RX(KR){ec.delete(KR)}function dG(){return"complete"===document.readyState}LJ.addDOMReadyListener=rS,LJ.removeDOMReadyListener=RX,LJ.isReadyStateComplete=dG;const Qj=new Set;function GU(KR){dG()?KR():Qj.add(KR)}function jE(){Qj.clear()}if(LJ.addReadyStateCompleteListener=GU,LJ.cleanReadyStateCompleteListeners=jE,!(0,LJ.isDOMReady)()){const KR=()=>{(0,LJ.isDOMReady)()&&(ec.forEach((KR=>KR())),ec.clear(),dG()&&(document.removeEventListener("readystatechange",KR),Qj.forEach((KR=>KR())),Qj.clear()))};document.addEventListener("readystatechange",KR)}const Cd=1e3;function QI(KR){if(KR.length>Cd)return!0;let ZW=0;for(let LJ=0;LJ<KR.length;LJ++)if(ZW+=KR[LJ].addedNodes.length,ZW>Cd)return!0;return!1}function oO(KR){const ZW=new Set,LJ=new Set,pW=new Set;KR.forEach((KR=>{(0,YJ.forEach)(KR.addedNodes,(KR=>{KR instanceof Element&&KR.isConnected&&ZW.add(KR)})),(0,YJ.forEach)(KR.removedNodes,(KR=>{KR instanceof Element&&(KR.isConnected?(pW.add(KR),ZW.delete(KR)):LJ.add(KR))}))}));const sG=[],Us=[];return ZW.forEach((KR=>{ZW.has(KR.parentElement)&&sG.push(KR)})),LJ.forEach((KR=>{LJ.has(KR.parentElement)&&Us.push(KR)})),sG.forEach((KR=>ZW.delete(KR))),Us.forEach((KR=>LJ.delete(KR))),{additions:ZW,moves:pW,deletions:LJ}}const Pi=new Map,lR=new WeakMap;function Id(KR,ZW){let pW,sG,YJ;if(Pi.has(KR))pW=Pi.get(KR),sG=lR.get(pW);else{let ZW=!1,Us=!1;pW=new MutationObserver((pW=>{if(QI(pW))!ZW||(0,LJ.isDOMReady)()?sG.forEach((({onHugeMutations:ZW})=>ZW(KR))):Us||(YJ=()=>sG.forEach((({onHugeMutations:ZW})=>ZW(KR))),rS(YJ),Us=!0),ZW=!0;else{const KR=oO(pW);sG.forEach((({onMinorMutations:ZW})=>ZW(KR)))}})),pW.observe(KR,{childList:!0,subtree:!0}),Pi.set(KR,pW),sG=new Set,lR.set(pW,sG)}return sG.add(ZW),{disconnect(){sG.delete(ZW),YJ&&RX(YJ),0===sG.size&&(pW.disconnect(),lR.delete(pW),Pi.delete(KR))}}}LJ.createOptimizedTreeObserver=Id},{"../../utils/array":30,"../../utils/throttle":42,"../../utils/time":43,"../utils/log":19}],19:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.logInfoCollapsed=LJ.logWarn=LJ.logInfo=void 0;const pW=KR("../../utils/message"),sG=!0,YJ=!1,Us="info";function fP(KR,...ZW){YJ&&Us&&("info"===Us||"warn"===KR)&&chrome.runtime.sendMessage({type:pW.MessageType.CS_LOG,data:{level:KR,log:ZW}})}function es(...KR){sG&&fP("info",...KR)}function UH(...KR){sG&&fP("warn",...KR)}function Bh(KR,...ZW){}LJ.logInfo=es,LJ.logWarn=UH,LJ.logInfoCollapsed=Bh},{"../../utils/message":37}],20:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.DEFAULT_SETTINGS=LJ.DEFAULT_COLORSCHEME=LJ.DEFAULT_THEME=LJ.DEFAULT_COLORS=void 0;const pW=KR("./generators/theme-engines"),sG=KR("./utils/platform"),YJ=KR("./utils/automation");LJ.DEFAULT_COLORS={darkScheme:{background:"#181a1b",text:"#e8e6e3"},lightScheme:{background:"#181a1b",text:"#e8e6e3"}},LJ.DEFAULT_THEME={mode:1,brightness:100,contrast:110,grayscale:0,sepia:0,useFont:!1,fontFamily:sG.isMacOS?"Helvetica Neue":sG.isWindows?"Segoe UI":"Open Sans",textStroke:0,engine:pW.ThemeEngine.dynamicTheme,stylesheet:"",darkSchemeBackgroundColor:LJ.DEFAULT_COLORS.darkScheme.background,darkSchemeTextColor:LJ.DEFAULT_COLORS.darkScheme.text,lightSchemeBackgroundColor:LJ.DEFAULT_COLORS.lightScheme.background,lightSchemeTextColor:LJ.DEFAULT_COLORS.lightScheme.text,scrollbarColor:sG.isMacOS?"":"auto",selectionColor:"auto",styleSystemControls:!1,lightColorScheme:"Default",darkColorScheme:"Default",immediateModify:!1},LJ.DEFAULT_COLORSCHEME={light:{Default:{backgroundColor:LJ.DEFAULT_COLORS.lightScheme.background,textColor:LJ.DEFAULT_COLORS.lightScheme.text}},dark:{Default:{backgroundColor:LJ.DEFAULT_COLORS.darkScheme.background,textColor:LJ.DEFAULT_COLORS.darkScheme.text}}},LJ.DEFAULT_SETTINGS={enabled:!0,fetchNews:!0,theme:LJ.DEFAULT_THEME,presets:[],customThemes:[],siteList:[],siteListEnabled:[],applyToListedOnly:!1,changeBrowserTheme:!1,syncSettings:!0,syncSitesFixes:!1,automation:{enabled:!1,mode:YJ.AutomationMode.NONE,behavior:"OnOff"},time:{activation:"18:00",deactivation:"9:00"},location:{latitude:null,longitude:null},previewNewDesign:!1,enableForPDF:!0,enableForProtectedPages:!1,enableContextMenus:!1,detectDarkTheme:!1}},{"./generators/theme-engines":25,"./utils/automation":32,"./utils/platform":40}],21:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.formatInversionFixes=LJ.parseInversionFixes=LJ.getInversionFixesFor=LJ.getCSSFilterValue=LJ.cssFilterStyleSheetTemplate=LJ.hasFirefoxNewRootBehavior=LJ.hasPatchForChromiumIssue501582=LJ.FilterMode=void 0;const pW=KR("./utils/format"),sG=KR("./utils/matrix"),YJ=KR("./utils/parse"),Us=KR("../utils/text"),fP=KR("../utils/url"),es=KR("./text-style"),UH=KR("../utils/platform");var Bh;function c(){return!0}function Db(){return Boolean(UH.isFirefox&&(0,UH.compareChromeVersions)(UH.firefoxVersion,"102.0")>=0)}function ec(KR,ZW,LJ,pW,sG){const YJ=undefined,Us=undefined;return rS(RX(KR),"invert(100%) hue-rotate(180deg)",KR,ZW,LJ,pW,sG)}function rS(KR,ZW,LJ,pW,YJ,Us,fP){const UH=jE(pW,Us,fP),ec=[];if(ec.push("@media screen {"),KR&&YJ&&(ec.push(""),ec.push("/* Leading rule */"),ec.push(dG(KR))),LJ.mode===Bh.dark&&(ec.push(""),ec.push("/* Reverse rule */"),ec.push(GU(ZW,UH))),(LJ.useFont||LJ.textStroke>0)&&(ec.push(""),ec.push("/* Font */"),ec.push((0,es.createTextStyle)(LJ))),ec.push(""),ec.push("/* Text contrast */"),ec.push("html {"),ec.push("  text-shadow: 0 0 0 !important;"),ec.push("}"),ec.push(""),ec.push("/* Full screen */"),[":-webkit-full-screen",":-moz-full-screen",":fullscreen"].forEach((KR=>{ec.push(`${KR}, ${KR} * {`),ec.push("  -webkit-filter: none !important;"),ec.push("  filter: none !important;"),ec.push("}")})),YJ){const KR=[255,255,255],ZW=c()||Db()||LJ.mode!==Bh.dark?KR:(0,sG.applyColorMatrix)(KR,(0,sG.createFilterMatrix)(LJ)).map(Math.round);ec.push(""),ec.push("/* Page background */"),ec.push("html {"),ec.push(`  background: rgb(${ZW.join(",")}) !important;`),ec.push("}")}return UH.css&&UH.css.length>0&&LJ.mode===Bh.dark&&(ec.push(""),ec.push("/* Custom rules */"),ec.push(UH.css)),ec.push(""),ec.push("}"),ec.join("\n")}function RX(KR){const ZW=[];return KR.mode===Bh.dark&&ZW.push("invert(100%) hue-rotate(180deg)"),100!==KR.brightness&&ZW.push(`brightness(${KR.brightness}%)`),100!==KR.contrast&&ZW.push(`contrast(${KR.contrast}%)`),0!==KR.grayscale&&ZW.push(`grayscale(${KR.grayscale}%)`),0!==KR.sepia&&ZW.push(`sepia(${KR.sepia}%)`),0===ZW.length?null:ZW.join(" ")}function dG(KR){return["html {",`  -webkit-filter: ${KR} !important;`,`  filter: ${KR} !important;`,"}"].join("\n")}function Qj(KR){return KR.map((KR=>KR.replace(/\,$/,""))).join(",\n")}function GU(KR,ZW){const LJ=[];return ZW.invert.length>0&&(LJ.push(`${Qj(ZW.invert)} {`),LJ.push(`  -webkit-filter: ${KR} !important;`),LJ.push(`  filter: ${KR} !important;`),LJ.push("}")),ZW.noinvert.length>0&&(LJ.push(`${Qj(ZW.noinvert)} {`),LJ.push("  -webkit-filter: none !important;"),LJ.push("  filter: none !important;"),LJ.push("}")),ZW.removebg.length>0&&(LJ.push(`${Qj(ZW.removebg)} {`),LJ.push("  background: white !important;"),LJ.push("}")),LJ.join("\n")}function jE(KR,ZW,LJ){const pW=(0,YJ.getSitesFixesFor)(KR,ZW,LJ,{commands:Object.keys(Cd),getCommandPropName:KR=>Cd[KR],parseCommandValue:(KR,ZW)=>"CSS"===KR?ZW.trim():(0,Us.parseArray)(ZW)}),sG={url:pW[0].url,invert:pW[0].invert||[],noinvert:pW[0].noinvert||[],removebg:pW[0].removebg||[],css:pW[0].css||""};if(KR){const ZW=pW.slice(1).filter((ZW=>(0,fP.isURLInList)(KR,ZW.url))).sort(((KR,ZW)=>ZW.url[0].length-KR.url[0].length));if(ZW.length>0){const KR=ZW[0];return{url:KR.url,invert:sG.invert.concat(KR.invert||[]),noinvert:sG.noinvert.concat(KR.noinvert||[]),removebg:sG.removebg.concat(KR.removebg||[]),css:[sG.css,KR.css].filter((KR=>KR)).join("\n")}}}return sG}!function(KR){KR[KR["light"]=0]="light",KR[KR["dark"]=1]="dark"}(Bh=LJ.FilterMode||(LJ.FilterMode={})),LJ.hasPatchForChromiumIssue501582=c,LJ.hasFirefoxNewRootBehavior=Db,LJ.default=ec,LJ.cssFilterStyleSheetTemplate=rS,LJ.getCSSFilterValue=RX,LJ.getInversionFixesFor=jE;const Cd={INVERT:"invert","NO INVERT":"noinvert","REMOVE BG":"removebg",CSS:"css"};function QI(KR){return(0,YJ.parseSitesFixesConfig)(KR,{commands:Object.keys(Cd),getCommandPropName:KR=>Cd[KR],parseCommandValue:(KR,ZW)=>"CSS"===KR?ZW.trim():(0,Us.parseArray)(ZW)})}function oO(KR){const ZW=KR.slice().sort(((KR,ZW)=>(0,fP.compareURLPatterns)(KR.url[0],ZW.url[0])));return(0,pW.formatSitesFixesConfig)(ZW,{props:Object.values(Cd),getPropCommandName:KR=>Object.entries(Cd).find((([,ZW])=>ZW===KR))[0],formatPropValue:(KR,ZW)=>"css"===KR?ZW.trim().replace(/\n+/g,"\n"):(0,Us.formatArray)(ZW).trim(),shouldIgnoreProp:(KR,ZW)=>"css"===KR?!ZW:!(Array.isArray(ZW)&&ZW.length>0)})}LJ.parseInversionFixes=QI,LJ.formatInversionFixes=oO},{"../utils/platform":40,"../utils/text":41,"../utils/url":45,"./text-style":24,"./utils/format":26,"./utils/matrix":27,"./utils/parse":28}],22:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.modifyGradientColor=LJ.modifyShadowColor=LJ.modifyBorderColor=LJ.modifyForegroundColor=LJ.modifyBackgroundColor=LJ.modifyColor=LJ.clearColorModificationCache=void 0;const pW=KR("../utils/color"),sG=KR("../utils/math"),YJ=KR("./utils/matrix");function Us(KR){const ZW=undefined,LJ=undefined;return KR[1===KR.mode?"darkSchemeBackgroundColor":"lightSchemeBackgroundColor"]}function fP(KR){const ZW=undefined,LJ=undefined;return KR[1===KR.mode?"darkSchemeTextColor":"lightSchemeTextColor"]}const es=new Map;function UH(){es.clear()}LJ.clearColorModificationCache=UH;const Bh=["r","g","b","a"],c=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function Db(KR,ZW){let LJ="";return Bh.forEach((ZW=>{LJ+=`${KR[ZW]};`})),c.forEach((KR=>{LJ+=`${ZW[KR]};`})),LJ}function ec(KR,ZW,LJ,sG,Us){let fP;es.has(LJ)?fP=es.get(LJ):(fP=new Map,es.set(LJ,fP));const UH=Db(KR,ZW);if(fP.has(UH))return fP.get(UH);const Bh=undefined,c=undefined,ec=undefined,rS=LJ((0,pW.rgbToHSL)(KR),null==sG?null:(0,pW.parseToHSLWithCache)(sG),null==Us?null:(0,pW.parseToHSLWithCache)(Us)),{r:RX,g:dG,b:Qj,a:GU}=(0,pW.hslToRGB)(rS),jE=(0,YJ.createFilterMatrix)(ZW),[Cd,QI,oO]=(0,YJ.applyColorMatrix)([RX,dG,Qj],jE),Pi=1===GU?(0,pW.rgbToHexString)({r:Cd,g:QI,b:oO}):(0,pW.rgbToString)({r:Cd,g:QI,b:oO,a:GU});return fP.set(UH,Pi),Pi}function rS(KR){return KR}function RX(KR,ZW){return ec(KR,ZW,rS)}function dG(KR,ZW){const LJ=Us(ZW),pW=undefined;return ec(KR,ZW,Qj,fP(ZW),LJ)}function Qj({h:KR,s:ZW,l:LJ,a:pW},YJ,Us){const fP=LJ<.5;let es;if(fP)es=LJ<.2||ZW<.12;else{const pW=undefined;es=ZW<.24||LJ>.8&&(KR>200&&KR<280)}let UH=KR,Bh=LJ;es&&(fP?(UH=YJ.h,Bh=YJ.s):(UH=Us.h,Bh=Us.s));const c=undefined;return{h:UH,s:Bh,l:(0,sG.scale)(LJ,0,1,YJ.l,Us.l),a:pW}}LJ.modifyColor=RX;const GU=.4;function jE({h:KR,s:ZW,l:LJ,a:pW},YJ){const Us=undefined,fP=undefined,es=ZW<.12||LJ>.8&&(KR>200&&KR<280);if(LJ<.5){const Us=(0,sG.scale)(LJ,0,.5,0,GU);if(es){const KR=undefined,ZW=undefined;return{h:YJ.h,s:YJ.s,l:Us,a:pW}}return{h:KR,s:ZW,l:Us,a:pW}}let UH=(0,sG.scale)(LJ,.5,1,GU,YJ.l);if(es){const KR=undefined,ZW=undefined;return{h:YJ.h,s:YJ.s,l:UH,a:pW}}let Bh=KR;const c=undefined;if(KR>60&&KR<180){const ZW=undefined;Bh=KR>120?(0,sG.scale)(KR,120,180,135,180):(0,sG.scale)(KR,60,120,60,105)}return Bh>40&&Bh<80&&(UH*=.75),{h:Bh,s:ZW,l:UH,a:pW}}function Cd(KR,ZW){if(0===ZW.mode)return dG(KR,ZW);const LJ=Us(ZW);return ec(KR,Object.assign(Object.assign({},ZW),{mode:0}),jE,LJ)}LJ.modifyBackgroundColor=Cd;const QI=.55;function oO(KR){return(0,sG.scale)(KR,205,245,205,220)}function Pi({h:KR,s:ZW,l:LJ,a:pW},YJ){const Us=undefined,fP=LJ<.2||ZW<.24,es=!fP&&KR>205&&KR<245;if(LJ>.5){const Us=(0,sG.scale)(LJ,.5,1,QI,YJ.l);if(fP){const KR=undefined,ZW=undefined;return{h:YJ.h,s:YJ.s,l:Us,a:pW}}let UH=KR;return es&&(UH=oO(KR)),{h:UH,s:ZW,l:Us,a:pW}}if(fP){const KR=undefined,ZW=undefined,Us=undefined;return{h:YJ.h,s:YJ.s,l:(0,sG.scale)(LJ,0,.5,YJ.l,QI),a:pW}}let UH=KR,Bh;return es?(UH=oO(KR),Bh=(0,sG.scale)(LJ,0,.5,YJ.l,Math.min(1,QI+.05))):Bh=(0,sG.scale)(LJ,0,.5,YJ.l,QI),{h:UH,s:ZW,l:Bh,a:pW}}function lR(KR,ZW){if(0===ZW.mode)return dG(KR,ZW);const LJ=fP(ZW);return ec(KR,Object.assign(Object.assign({},ZW),{mode:0}),Pi,LJ)}function Id({h:KR,s:ZW,l:LJ,a:pW},YJ,Us){const fP=undefined,es=undefined;let UH=KR,Bh=ZW;(LJ<.2||ZW<.24)&&(LJ<.5?(UH=YJ.h,Bh=YJ.s):(UH=Us.h,Bh=Us.s));const c=undefined;return{h:UH,s:Bh,l:(0,sG.scale)(LJ,0,1,.5,.2),a:pW}}function Xi(KR,ZW){if(0===ZW.mode)return dG(KR,ZW);const LJ=fP(ZW),pW=Us(ZW);return ec(KR,Object.assign(Object.assign({},ZW),{mode:0}),Id,LJ,pW)}function TX(KR,ZW){return Cd(KR,ZW)}function zR(KR,ZW){return Cd(KR,ZW)}LJ.modifyForegroundColor=lR,LJ.modifyBorderColor=Xi,LJ.modifyShadowColor=TX,LJ.modifyGradientColor=zR},{"../utils/color":33,"../utils/math":36,"./utils/matrix":27}],23:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.getSVGReverseFilterMatrixValue=LJ.getSVGFilterMatrixValue=LJ.createSVGFilterStylesheet=void 0;const pW=KR("./utils/matrix"),sG=KR("./css-filter"),YJ=KR("../utils/platform"),Us=KR("../const");function fP(KR,ZW,LJ,pW,fP){let UH,Db;return YJ.isFirefox?(UH=es(Bh(KR)),Db=es(c())):(UH=`url(#${Us.MISC_PREFIX}-filter)`,Db=`url(#${Us.MISC_PREFIX}-reverse-filter)`),(0,sG.cssFilterStyleSheetTemplate)(UH,Db,KR,ZW,LJ,pW,fP)}function es(KR){const ZW=`${Us.MISC_PREFIX}-filter`,LJ=['<svg xmlns="http://www.w3.org/2000/svg">',`<filter id="${ZW}" style="color-interpolation-filters: sRGB;">`,`<feColorMatrix type="matrix" values="${KR}" />`,"</filter>","</svg>"].join("");return`url(data:image/svg+xml;base64,${btoa(LJ)}#${ZW})`}function UH(KR){return KR.slice(0,4).map((KR=>KR.map((KR=>KR.toFixed(3))).join(" "))).join(" ")}function Bh(KR){return UH((0,pW.createFilterMatrix)(KR))}function c(){return UH(pW.Matrix.invertNHue())}LJ.createSVGFilterStylesheet=fP,LJ.getSVGFilterMatrixValue=Bh,LJ.getSVGReverseFilterMatrixValue=c},{"../const":1,"../utils/platform":40,"./css-filter":21,"./utils/matrix":27}],24:[function(KR,ZW,LJ){"use strict";function pW(KR){const ZW=[];return ZW.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*="vjs-"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*="mu-"], .glyphicon, .icon) {'),KR.useFont&&KR.fontFamily&&ZW.push(`  font-family: ${KR.fontFamily} !important;`),KR.textStroke>0&&(ZW.push(`  -webkit-text-stroke: ${KR.textStroke}px !important;`),ZW.push(`  text-stroke: ${KR.textStroke}px !important;`)),ZW.push("}"),ZW.join("\n")}Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.createTextStyle=void 0,LJ.createTextStyle=pW},{}],25:[function(KR,ZW,LJ){"use strict";var pW;Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.ThemeEngine=void 0,function(KR){KR["cssFilter"]="cssFilter",KR["svgFilter"]="svgFilter",KR["staticTheme"]="staticTheme",KR["dynamicTheme"]="dynamicTheme"}(pW=LJ.ThemeEngine||(LJ.ThemeEngine={}))},{}],26:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.formatSitesFixesConfig=void 0;const pW=KR("../../utils/array");function sG(KR,ZW){const LJ=[];return KR.forEach(((sG,YJ)=>{(0,pW.push)(LJ,sG.url),ZW.props.forEach((KR=>{const pW=ZW.getPropCommandName(KR),YJ=sG[KR];if(ZW.shouldIgnoreProp(KR,YJ))return;LJ.push(""),LJ.push(pW);const Us=ZW.formatPropValue(KR,YJ);Us&&LJ.push(Us)})),YJ<KR.length-1&&(LJ.push(""),LJ.push("=".repeat(32)),LJ.push(""))})),LJ.push(""),LJ.join("\n")}LJ.formatSitesFixesConfig=sG},{"../../utils/array":30}],27:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.Matrix=LJ.applyColorMatrix=LJ.createFilterMatrix=void 0;const pW=KR("../../utils/math");function sG(KR){let ZW=LJ.Matrix.identity();return 0!==KR.sepia&&(ZW=(0,pW.multiplyMatrices)(ZW,LJ.Matrix.sepia(KR.sepia/100))),0!==KR.grayscale&&(ZW=(0,pW.multiplyMatrices)(ZW,LJ.Matrix.grayscale(KR.grayscale/100))),100!==KR.contrast&&(ZW=(0,pW.multiplyMatrices)(ZW,LJ.Matrix.contrast(KR.contrast/100))),100!==KR.brightness&&(ZW=(0,pW.multiplyMatrices)(ZW,LJ.Matrix.brightness(KR.brightness/100))),1===KR.mode&&(ZW=(0,pW.multiplyMatrices)(ZW,LJ.Matrix.invertNHue())),ZW}function YJ([KR,ZW,LJ],sG){const YJ=[[KR/255],[ZW/255],[LJ/255],[1],[1]],Us=(0,pW.multiplyMatrices)(sG,YJ);return[0,1,2].map((KR=>(0,pW.clamp)(Math.round(255*Us[KR][0]),0,255)))}LJ.createFilterMatrix=sG,LJ.applyColorMatrix=YJ,LJ.Matrix={identity:()=>[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]],invertNHue:()=>[[.333,-.667,-.667,0,1],[-.667,.333,-.667,0,1],[-.667,-.667,.333,0,1],[0,0,0,1,0],[0,0,0,0,1]],brightness:KR=>[[KR,0,0,0,0],[0,KR,0,0,0],[0,0,KR,0,0],[0,0,0,1,0],[0,0,0,0,1]],contrast(KR){const ZW=(1-KR)/2;return[[KR,0,0,0,ZW],[0,KR,0,0,ZW],[0,0,KR,0,ZW],[0,0,0,1,0],[0,0,0,0,1]]},sepia:KR=>[[.393+.607*(1-KR),.769-.769*(1-KR),.189-.189*(1-KR),0,0],[.349-.349*(1-KR),.686+.314*(1-KR),.168-.168*(1-KR),0,0],[.272-.272*(1-KR),.534-.534*(1-KR),.131+.869*(1-KR),0,0],[0,0,0,1,0],[0,0,0,0,1]],grayscale:KR=>[[.2126+.7874*(1-KR),.7152-.7152*(1-KR),.0722-.0722*(1-KR),0,0],[.2126-.2126*(1-KR),.7152+.2848*(1-KR),.0722-.0722*(1-KR),0,0],[.2126-.2126*(1-KR),.7152-.7152*(1-KR),.0722+.9278*(1-KR),0,0],[0,0,0,1,0],[0,0,0,0,1]]}},{"../../utils/math":36}],28:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.isURLInSiteList=LJ.indexSiteListConfig=LJ.getSitesFixesFor=LJ.indexSitesFixesConfig=LJ.getDomain=LJ.parseSitesFixesConfig=void 0;const pW=KR("../../utils/url"),sG=KR("../../utils/text"),YJ=6e4;function Us(KR,ZW){const LJ=[],pW=undefined;return KR.replace(/\r/g,"").split(/^\s*={2,}\s*$/gm).forEach((KR=>{const pW=KR.split("\n"),YJ=[];if(pW.forEach(((KR,ZW)=>{KR.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&YJ.push(ZW)})),0===YJ.length)return;const Us={url:(0,sG.parseArray)(pW.slice(0,YJ[0]).join("\n"))};YJ.forEach(((KR,LJ)=>{const sG=pW[KR].trim(),fP=pW.slice(KR+1,LJ===YJ.length-1?pW.length:YJ[LJ+1]).join("\n"),es=ZW.getCommandPropName(sG);if(!es)return;const UH=ZW.parseCommandValue(sG,fP);Us[es]=UH})),LJ.push(Us)})),LJ}function fP(KR){try{return new URL(KR).hostname.toLowerCase()}catch(ZW){return KR.split("/")[0].toLowerCase()}}function es(KR){return KR.map((([KR,ZW])=>{const LJ=KR.toString(36),pW=ZW.toString(36);return"0".repeat(4-LJ.length)+LJ+"0".repeat(3-pW.length)+pW})).join("")}function UH(KR,ZW){const LJ=(4+3)*ZW,pW=parseInt(KR.substring(LJ+0,LJ+4),36),sG=undefined;return[pW,pW+parseInt(KR.substring(LJ+4,LJ+4+3),36)]}function Bh(KR,ZW,LJ){KR[ZW]?KR[ZW].includes(LJ)||KR[ZW].push(LJ):KR[ZW]=[LJ]}function c(KR){const ZW=KR.lastIndexOf("*"),LJ=KR.substring(ZW+2);if(ZW<0||0===LJ.length)return KR.split(".");const pW=[LJ],sG=undefined;return KR.substring(0,ZW).split(".").filter(Boolean).forEach((KR=>pW.concat(KR))),pW}function Db(KR){const ZW={},LJ={},sG=[],YJ={},Us=[];for(let LJ=0;LJ<KR.length;LJ++){const es=KR[LJ],UH=new Set;for(const KR of es){const YJ=fP(KR);if((0,pW.isFullyQualifiedDomain)(YJ))Bh(ZW,YJ,LJ);else{if(!(0,pW.isFullyQualifiedDomainWildcard)(YJ)){sG.push(LJ);break}{const KR=c(YJ);Us.push({labels:KR,index:LJ}),KR.forEach((KR=>UH.add(KR)))}}}for(const KR of UH)YJ[KR]?YJ[KR]++:YJ[KR]=1}for(const{labels:KR,index:ZW}of Us){let pW=KR[0];for(const ZW of KR)YJ[ZW]<YJ[pW]&&(pW=ZW);Bh(LJ,pW,ZW)}return{domains:ZW,domainLabels:LJ,nonstandard:sG}}function ec(KR,ZW,LJ,pW,YJ){const Us=undefined,fP=KR.substring(LJ,pW).split("\n"),es=[];if(fP.forEach(((KR,ZW)=>{KR.match(/^[A-Z]+(\s[A-Z]+){0,2}$/)&&es.push(ZW)})),0===es.length)return;ZW.push([LJ,pW-LJ]);const UH=(0,sG.parseArray)(fP.slice(0,es[0]).join("\n"));YJ.push(UH)}function rS(KR){const ZW=[],LJ=[];let pW=0;const sG=/^\s*={2,}\s*$/gm;let YJ;for(;YJ=sG.exec(KR);){const sG=YJ.index,Us=YJ.index+YJ[0].length;ec(KR,LJ,pW,sG,ZW),pW=Us}return ec(KR,LJ,pW,KR.length,ZW),{urls:ZW,offsets:LJ}}function RX(KR){const{urls:ZW,offsets:LJ}=rS(KR),{domains:pW,domainLabels:sG,nonstandard:YJ}=Db(ZW);return{offsets:es(LJ),domains:pW,domainLabels:sG,nonstandard:YJ,cacheDomainIndex:{},cacheSiteFix:{},cacheCleanupTimer:null}}function dG(KR,ZW,LJ){const sG=fP(KR),YJ=sG.split(".");let Us=[];"*"in ZW.domainLabels&&(Us=Us.concat(ZW.domainLabels["*"]));for(const KR of YJ)if(KR in ZW.domainLabels){const YJ=ZW.domainLabels[KR];for(const KR of YJ){const ZW=LJ(KR);for(const LJ of ZW){const ZW=fP(LJ);(0,pW.isFullyQualifiedDomainWildcard)(ZW)&&(0,pW.fullyQualifiedDomainMatchesWildcard)(ZW,sG)&&Us.push(KR)}}}for(let KR=0;KR<YJ.length;KR++){const LJ=YJ.slice(KR).join(".");LJ in ZW.domains&&(Us=Us.concat(ZW.domains[LJ])),LJ in ZW.domainLabels&&(Us=Us.concat(ZW.domainLabels[LJ]))}return Us=Us.concat(ZW.nonstandard),Us=Array.from(new Set(Us)),Us}function Qj(KR,ZW,LJ,pW){if(pW in ZW.cacheSiteFix)return ZW.cacheSiteFix[pW];const[sG,YJ]=UH(ZW.offsets,pW),fP=undefined,es=Us(KR.substring(sG,YJ),LJ)[0];return ZW.cacheSiteFix[pW]=es,es}function GU(KR){clearTimeout(KR.cacheCleanupTimer),KR.cacheCleanupTimer=setTimeout((()=>{KR.cacheCleanupTimer=null,KR.cacheDomainIndex={},KR.cacheSiteFix={}}),YJ)}function jE(KR,ZW,LJ,pW){const sG=[],YJ=fP(KR);LJ.cacheDomainIndex[YJ]||(LJ.cacheDomainIndex[YJ]=dG(YJ,LJ,(KR=>Qj(ZW,LJ,pW,KR).url)));const Us=LJ.cacheDomainIndex[YJ];for(const KR of Us){const YJ=Qj(ZW,LJ,pW,KR);sG.push(YJ)}return GU(LJ),sG}function Cd(KR){const ZW=(0,sG.parseArray)(KR),LJ=ZW.map((KR=>[KR])),{domains:pW,domainLabels:YJ,nonstandard:Us}=Db(LJ);return{domains:pW,domainLabels:YJ,nonstandard:Us,urls:ZW}}function QI(KR,ZW){const LJ=undefined,pW=dG(fP(KR),ZW,(KR=>[ZW.urls[KR]])),sG=[];for(const KR of pW)sG.push(ZW.urls[KR]);return sG}function oO(KR,ZW){if(null===ZW)return!1;const LJ=QI(KR,ZW);return(0,pW.isURLInList)(KR,LJ)}LJ.parseSitesFixesConfig=Us,LJ.getDomain=fP,LJ.indexSitesFixesConfig=RX,LJ.getSitesFixesFor=jE,LJ.indexSiteListConfig=Cd,LJ.isURLInSiteList=oO},{"../../utils/text":41,"../../utils/url":45}],29:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.PREFIX=void 0,LJ.PREFIX="dm"},{}],30:[function(KR,ZW,LJ){"use strict";function pW(KR){return null!=KR.length}function sG(KR,ZW){if(pW(KR))for(let LJ=0,pW=KR.length;LJ<pW;LJ++)ZW(KR[LJ]);else for(const LJ of KR)ZW(LJ)}function YJ(KR,ZW){sG(ZW,(ZW=>KR.push(ZW)))}function Us(KR){const ZW=[];for(let LJ=0,pW=KR.length;LJ<pW;LJ++)ZW.push(KR[LJ]);return ZW}Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.toArray=LJ.push=LJ.forEach=void 0,LJ.forEach=sG,LJ.push=YJ,LJ.toArray=Us},{}],31:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0});class pW{constructor(){this.queue=[],this.timerId=null,this.frameDuration=1e3/60}addToQueue(KR){this.queue.push(KR),this.startQueue()}stopQueue(){null!==this.timerId&&(cancelAnimationFrame(this.timerId),this.timerId=null),this.queue=[]}startQueue(){this.timerId||(this.timerId=requestAnimationFrame((()=>{this.timerId=null;const KR=Date.now();let ZW;for(;ZW=this.queue.shift();)if(ZW(),Date.now()-KR>=this.frameDuration){this.startQueue();break}})))}}LJ.default=pW},{}],32:[function(KR,ZW,LJ){"use strict";var pW;Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.AutomationMode=void 0,function(KR){KR["NONE"]="",KR["TIME"]="time",KR["SYSTEM"]="system",KR["LOCATION"]="location"}(pW=LJ.AutomationMode||(LJ.AutomationMode={}))},{}],33:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.getSRGBLightness=LJ.lowerCalcExpression=LJ.parse=LJ.hslToString=LJ.rgbToHexString=LJ.rgbToString=LJ.rgbToHSL=LJ.hslToRGB=LJ.clearColorCache=LJ.parseToHSLWithCache=LJ.parseColorWithCache=void 0;const pW=KR("./math-eval"),sG=KR("./text"),YJ=new Map,Us=new Map;function fP(KR){if(KR=KR.trim(),Us.has(KR))return Us.get(KR);KR.includes("calc(")&&(KR=xH(KR));const ZW=jE(KR);return ZW&&Us.set(KR,ZW),ZW}function es(KR){if(YJ.has(KR))return YJ.get(KR);const ZW=fP(KR);if(!ZW)return null;const LJ=c(ZW);return YJ.set(KR,LJ),LJ}function UH(){YJ.clear(),Us.clear()}function Bh({h:KR,s:ZW,l:LJ,a:pW=1}){if(0===ZW){const[KR,ZW,sG]=[LJ,LJ,LJ].map((KR=>Math.round(255*KR)));return{r:KR,g:sG,b:ZW,a:pW}}const sG=(1-Math.abs(2*LJ-1))*ZW,YJ=sG*(1-Math.abs(KR/60%2-1)),Us=LJ-sG/2,[fP,es,UH]=(KR<60?[sG,YJ,0]:KR<120?[YJ,sG,0]:KR<180?[0,sG,YJ]:KR<240?[0,YJ,sG]:KR<300?[YJ,0,sG]:[sG,0,YJ]).map((KR=>Math.round(255*(KR+Us))));return{r:fP,g:es,b:UH,a:pW}}function c({r:KR,g:ZW,b:LJ,a:pW=1}){const sG=KR/255,YJ=ZW/255,Us=LJ/255,fP=Math.max(sG,YJ,Us),es=Math.min(sG,YJ,Us),UH=fP-es,Bh=(fP+es)/2;if(0===UH)return{h:0,s:0,l:Bh,a:pW};let c=60*(fP===sG?(YJ-Us)/UH%6:fP===YJ?(Us-sG)/UH+2:(sG-YJ)/UH+4);c<0&&(c+=360);const Db=undefined;return{h:c,s:UH/(1-Math.abs(2*Bh-1)),l:Bh,a:pW}}function Db(KR,ZW=0){const LJ=KR.toFixed(ZW);if(0===ZW)return LJ;const pW=LJ.indexOf(".");if(pW>=0){const KR=LJ.match(/0+$/);if(KR)return KR.index===pW+1?LJ.substring(0,pW):LJ.substring(0,KR.index)}return LJ}function ec(KR){const{r:ZW,g:LJ,b:pW,a:sG}=KR;return null!=sG&&sG<1?`rgba(${Db(ZW)}, ${Db(LJ)}, ${Db(pW)}, ${Db(sG,2)})`:`rgb(${Db(ZW)}, ${Db(LJ)}, ${Db(pW)})`}function rS({r:KR,g:ZW,b:LJ,a:pW}){return`#${(null!=pW&&pW<1?[KR,ZW,LJ,Math.round(255*pW)]:[KR,ZW,LJ]).map((KR=>`${KR<16?"0":""}${KR.toString(16)}`)).join("")}`}function RX(KR){const{h:ZW,s:LJ,l:pW,a:sG}=KR;return null!=sG&&sG<1?`hsla(${Db(ZW)}, ${Db(100*LJ)}%, ${Db(100*pW)}%, ${Db(sG,2)})`:`hsl(${Db(ZW)}, ${Db(100*LJ)}%, ${Db(100*pW)}%)`}LJ.parseColorWithCache=fP,LJ.parseToHSLWithCache=es,LJ.clearColorCache=UH,LJ.hslToRGB=Bh,LJ.rgbToHSL=c,LJ.rgbToString=ec,LJ.rgbToHexString=rS,LJ.hslToString=RX;const dG=/^rgba?\([^\(\)]+\)$/,Qj=/^hsla?\([^\(\)]+\)$/,GU=/^#[0-9a-f]+$/i;function jE(KR){const ZW=KR.trim().toLowerCase();return ZW.match(dG)?lR(ZW):ZW.match(Qj)?TX(ZW):ZW.match(GU)?zR(ZW):xS.has(ZW)?vy(ZW):Zq.has(ZW)?fI(ZW):"transparent"===KR?{r:0,g:0,b:0,a:0}:null}function Cd(KR){const ZW=[];let LJ=0,pW=!1;const sG=KR.indexOf("(");KR=KR.substring(sG+1,KR.length-1);for(let sG=0;sG<KR.length;sG++){const YJ=KR[sG];YJ>="0"&&YJ<="9"||"."===YJ||"+"===YJ||"-"===YJ?pW=!0:!pW||" "!==YJ&&","!==YJ&&"/"!==YJ?pW||(LJ=sG+1):(ZW.push(KR.substring(LJ,sG)),pW=!1,LJ=sG+1)}return pW&&ZW.push(KR.substring(LJ,KR.length)),ZW}function QI(KR,ZW,LJ){const pW=Cd(KR),sG=Object.entries(LJ),YJ=undefined;return pW.map((KR=>KR.trim())).map(((KR,LJ)=>{let pW;const YJ=sG.find((([ZW])=>KR.endsWith(ZW)));return pW=YJ?parseFloat(KR.substring(0,KR.length-YJ[0].length))/YJ[1]*ZW[LJ]:parseFloat(KR),ZW[LJ]>1?Math.round(pW):pW}))}LJ.parse=jE;const oO=[255,255,255,1],Pi={"%":100};function lR(KR){const[ZW,LJ,pW,sG=1]=QI(KR,oO,Pi);return{r:ZW,g:LJ,b:pW,a:sG}}const Id=[360,1,1,1],Xi={"%":100,deg:360,rad:2*Math.PI,turn:1};function TX(KR){const[ZW,LJ,pW,sG=1]=QI(KR,Id,Xi);return Bh({h:ZW,s:LJ,l:pW,a:sG})}function zR(KR){const ZW=KR.substring(1);switch(ZW.length){case 3:case 4:{const[KR,LJ,pW]=[0,1,2].map((KR=>parseInt(`${ZW[KR]}${ZW[KR]}`,16))),sG=undefined;return{r:KR,g:LJ,b:pW,a:3===ZW.length?1:parseInt(`${ZW[3]}${ZW[3]}`,16)/255}}case 6:case 8:{const[KR,LJ,pW]=[0,2,4].map((KR=>parseInt(ZW.substring(KR,KR+2),16))),sG=undefined;return{r:KR,g:LJ,b:pW,a:6===ZW.length?1:parseInt(ZW.substring(6,8),16)/255}}}return null}function vy(KR){const ZW=xS.get(KR);return{r:ZW>>16&255,g:ZW>>8&255,b:ZW>>0&255,a:1}}function fI(KR){const ZW=Zq.get(KR);return{r:ZW>>16&255,g:ZW>>8&255,b:ZW>>0&255,a:1}}function xH(KR){let ZW=0;const LJ=(ZW,LJ,pW)=>{KR=KR.substring(0,ZW)+pW+KR.substring(LJ)};for(;-1!==(ZW=KR.indexOf("calc("));){const YJ=(0,sG.getParenthesesRange)(KR,ZW);if(!YJ)break;let Us=KR.slice(YJ.start+1,YJ.end-1);const fP=Us.includes("%");Us=Us.split("%").join("");const es=Math.round((0,pW.evalMath)(Us));LJ(YJ.start-4,YJ.end,es+(fP?"%":""))}return KR}LJ.lowerCalcExpression=xH;const xS=new Map(Object.entries({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074})),Zq=new Map(Object.entries({ActiveBorder:3906044,ActiveCaption:0,AppWorkspace:11184810,Background:6513614,ButtonFace:16777215,ButtonHighlight:15329769,ButtonShadow:10461343,ButtonText:0,CaptionText:0,GrayText:8355711,Highlight:11720703,HighlightText:0,InactiveBorder:16777215,InactiveCaption:16777215,InactiveCaptionText:0,InfoBackground:16514245,InfoText:0,Menu:16185078,MenuText:16777215,Scrollbar:11184810,ThreeDDarkShadow:0,ThreeDFace:12632256,ThreeDHighlight:16777215,ThreeDLightShadow:16777215,ThreeDShadow:0,Window:15527148,WindowFrame:11184810,WindowText:0,"-webkit-focus-ring-color":15046400}).map((([KR,ZW])=>[KR.toLowerCase(),ZW])));function tQ(KR,ZW,LJ){return(.2126*KR+.7152*ZW+.0722*LJ)/255}LJ.getSRGBLightness=tQ},{"./math-eval":35,"./text":41}],34:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.compareIPV6=LJ.isIPV6=void 0;const pW=/\[[0-9:a-zA-Z]+?\]/;function sG(KR){const ZW=pW.exec(KR);if(!ZW)return!1;const LJ=KR.indexOf("?");return!(LJ>=0&&ZW.index>LJ)}LJ.isIPV6=sG;const YJ=/\[.*?\](\:\d+)?/;function Us(KR,ZW){const LJ=undefined,pW=undefined;return KR.match(YJ)[0]===ZW.match(YJ)[0]}LJ.compareIPV6=Us},{}],35:[function(KR,ZW,LJ){"use strict";function pW(KR){const ZW=[],LJ=[];let pW;for(let sG=0,Us=KR.length;sG<Us;sG++){const Us=KR[sG];if(Us&&" "!==Us){if(YJ.has(Us)){const KR=YJ.get(Us);for(;LJ.length;){const pW=YJ.get(LJ[0]);if(!pW)break;if(!KR.lessOrEqualThan(pW))break;ZW.push(LJ.shift())}LJ.unshift(Us)}else!pW||YJ.has(pW)?ZW.push(Us):ZW[ZW.length-1]+=Us;pW=Us}}ZW.push(...LJ);const sG=[];for(let KR=0,LJ=ZW.length;KR<LJ;KR++){const LJ=YJ.get(ZW[KR]);if(LJ){const KR=sG.splice(0,2);sG.push(LJ.exec(KR[1],KR[0]))}else sG.unshift(parseFloat(ZW[KR]))}return sG[0]}Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.evalMath=void 0,LJ.evalMath=pW;class sG{constructor(KR,ZW){this.precendce=KR,this.execMethod=ZW}exec(KR,ZW){return this.execMethod(KR,ZW)}lessOrEqualThan(KR){return this.precendce<=KR.precendce}}const YJ=new Map([["+",new sG(1,((KR,ZW)=>KR+ZW))],["-",new sG(1,((KR,ZW)=>KR-ZW))],["*",new sG(2,((KR,ZW)=>KR*ZW))],["/",new sG(2,((KR,ZW)=>KR/ZW))]])},{}],36:[function(KR,ZW,LJ){"use strict";function pW(KR,ZW,LJ,pW,sG){return(KR-ZW)*(sG-pW)/(LJ-ZW)+pW}function sG(KR,ZW,LJ){return Math.min(LJ,Math.max(ZW,KR))}function YJ(KR,ZW){const LJ=[];for(let pW=0,sG=KR.length;pW<sG;pW++){LJ[pW]=[];for(let sG=0,YJ=ZW[0].length;sG<YJ;sG++){let YJ=0;for(let LJ=0,Us=KR[0].length;LJ<Us;LJ++)YJ+=KR[pW][LJ]*ZW[LJ][sG];LJ[pW][sG]=YJ}}return LJ}Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.multiplyMatrices=LJ.clamp=LJ.scale=void 0,LJ.scale=pW,LJ.clamp=sG,LJ.multiplyMatrices=YJ},{}],37:[function(KR,ZW,LJ){"use strict";var pW;Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.MessageType=void 0,function(KR){KR["UI_GET_DATA"]="ui-get-data",KR["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",KR["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",KR["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",KR["UI_CHANGE_SETTINGS"]="ui-change-settings",KR["UI_SET_THEME"]="ui-set-theme",KR["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",KR["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",KR["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",KR["UI_LOAD_CONFIG"]="ui-load-config",KR["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",KR["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",KR["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",KR["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",KR["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",KR["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",KR["UI_SAVE_FILE"]="ui-save-file",KR["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",KR["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",KR["BG_CHANGES"]="bg-changes",KR["BG_ADD_CSS_FILTER"]="bg-add-css-filter",KR["BG_ADD_STATIC_THEME"]="bg-add-static-theme",KR["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",KR["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",KR["BG_EXPORT_CSS"]="bg-export-css",KR["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",KR["BG_CLEAN_UP"]="bg-clean-up",KR["BG_RELOAD"]="bg-reload",KR["BG_FETCH_RESPONSE"]="bg-fetch-response",KR["BG_UI_UPDATE"]="bg-ui-update",KR["BG_CSS_UPDATE"]="bg-css-update",KR["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",KR["CS_FRAME_CONNECT"]="cs-frame-connect",KR["CS_FRAME_FORGET"]="cs-frame-forget",KR["CS_FRAME_FREEZE"]="cs-frame-freeze",KR["CS_FRAME_RESUME"]="cs-frame-resume",KR["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",KR["CS_FETCH"]="cs-fetch",KR["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",KR["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",KR["CS_LOG"]="cs-log"}(pW=LJ.MessageType||(LJ.MessageType={}))},{}],38:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.loadAsText=LJ.readResponseAsDataURL=LJ.loadAsDataURL=void 0;const pW=KR("./platform");async function sG(KR,ZW,LJ){const sG=await fetch(KR,{cache:"force-cache",credentials:"omit",referrer:LJ});if(pW.isFirefox&&"text/css"===ZW&&KR.startsWith("moz-extension://")&&KR.endsWith(".css"))return sG;if(ZW&&!sG.headers.get("Content-Type").startsWith(ZW))throw new Error(`Mime type mismatch when loading ${KR}`);if(!sG.ok)throw new Error(`Unable to load ${KR} ${sG.status} ${sG.statusText}`);return sG}async function YJ(KR,ZW){const LJ=await sG(KR,ZW);return await Us(LJ)}async function Us(KR){const ZW=await KR.blob(),LJ=undefined;return await new Promise((KR=>{const LJ=new FileReader;LJ.onloadend=()=>KR(LJ.result),LJ.readAsDataURL(ZW)}))}async function fP(KR,ZW,LJ){const pW=await sG(KR,ZW,LJ);return await pW.text()}LJ.loadAsDataURL=YJ,LJ.readResponseAsDataURL=Us,LJ.loadAsText=fP},{"./platform":40}],39:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.parseGradient=void 0;const pW=KR("./text"),sG="gradient".length,YJ="conic-",Us=YJ.length,fP="radial-",es="linear-";function UH(KR){const ZW=[];let LJ=0,UH=YJ.length;for(;-1!==(LJ=KR.indexOf("gradient",UH));){let Bh;if([es,fP,YJ].find((ZW=>{if(LJ-ZW.length>=0){const pW=undefined;if(KR.substring(LJ-ZW.length,LJ)===ZW)return"repeating"===KR.slice(LJ-ZW.length-10,LJ-ZW.length-1)?(Bh=`repeating-${ZW}gradient`,!0):"-webkit"===KR.slice(LJ-ZW.length-8,LJ-ZW.length-1)?(Bh=`-webkit-${ZW}gradient`,!0):(Bh=`${ZW}gradient`,!0)}})),!Bh)break;const{start:c,end:Db}=(0,pW.getParenthesesRange)(KR,LJ+sG),ec=KR.substring(c+1,Db-1);UH=Db+1+Us,ZW.push({typeGradient:Bh,match:ec,offset:Bh.length+2,index:LJ-Bh.length+sG,hasComma:!0})}return ZW.length&&(ZW[ZW.length-1].hasComma=!1),ZW}LJ.parseGradient=UH},{"./text":41}],40:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.isCSSColorSchemePropSupported=LJ.isFetchSupported=LJ.isXMLHttpRequestSupported=LJ.compareChromeVersions=LJ.isDefinedSelectorSupported=LJ.firefoxVersion=LJ.chromiumVersion=LJ.isNonPersistent=LJ.isMatchMediaChangeEventListenerBuggy=LJ.isMatchMediaChangeEventListenerSupported=LJ.isShadowDomSupported=LJ.isMobile=LJ.isMacOS=LJ.isWindows=LJ.isSafari=LJ.isEdge=LJ.isOpera=LJ.isYaBrowser=LJ.isVivaldi=LJ.isFirefox=LJ.isThunderbird=LJ.isChromium=void 0;const pW="undefined"!=typeof navigator,sG=pW?navigator.userAgentData&&Array.isArray(navigator.userAgentData.brands)?navigator.userAgentData.brands.map((KR=>`${KR.brand.toLowerCase()} ${KR.version}`)).join(" "):navigator.userAgent.toLowerCase():"some useragent",YJ=pW?navigator.userAgentData&&"string"==typeof navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase():navigator.platform.toLowerCase():"some platform";function Us(KR,ZW){const LJ=KR.split(".").map((KR=>parseInt(KR))),pW=ZW.split(".").map((KR=>parseInt(KR)));for(let KR=0;KR<LJ.length;KR++)if(LJ[KR]!==pW[KR])return LJ[KR]<pW[KR]?-1:1;return 0}LJ.isChromium=!0,LJ.isThunderbird=!1,LJ.isFirefox=!1,LJ.isVivaldi=!1,LJ.isYaBrowser=!1,LJ.isOpera=!1,LJ.isEdge=!1,LJ.isSafari=!1,LJ.isWindows=YJ.startsWith("win"),LJ.isMacOS=YJ.startsWith("mac"),LJ.isMobile=pW&&navigator.userAgentData?navigator.userAgentData.mobile:sG.includes("mobile"),LJ.isShadowDomSupported="function"==typeof ShadowRoot,LJ.isMatchMediaChangeEventListenerSupported=!0,LJ.isMatchMediaChangeEventListenerBuggy=pW&&navigator.userAgentData&&["Linux","Android"].includes(navigator.userAgentData.platform)||YJ.startsWith("linux"),LJ.isNonPersistent=!0,LJ.chromiumVersion=(()=>{const KR=sG.match(/chrom(?:e|ium)(?:\/| )([^ ]+)/);return KR&&KR[1]?KR[1]:""})(),LJ.firefoxVersion=(()=>{const KR=sG.match(/(?:firefox|librewolf)(?:\/| )([^ ]+)/);return KR&&KR[1]?KR[1]:""})(),LJ.isDefinedSelectorSupported=(()=>{try{return document.querySelector(":defined"),!0}catch(KR){return!1}})(),LJ.compareChromeVersions=Us,LJ.isXMLHttpRequestSupported="function"==typeof XMLHttpRequest,LJ.isFetchSupported="function"==typeof fetch,LJ.isCSSColorSchemePropSupported=!0},{}],41:[function(KR,ZW,LJ){"use strict";function pW(KR,ZW){if(!isFinite(ZW))throw new Error(`Wrong char index ${ZW}`);let LJ="",pW=0,sG,YJ=0;do{pW++,sG=YJ,YJ=KR.indexOf("\n",sG+1)}while(YJ>=0&&YJ<=ZW);const Us=ZW-sG;return LJ+=`line ${pW}, column ${Us}`,LJ+="\n",ZW<KR.length?LJ+=KR.substring(sG+1,YJ):LJ+=KR.substring(KR.lastIndexOf("\n")+1),LJ+="\n",LJ+=`${new Array(Us).join("-")}^`,LJ}function sG(KR,ZW){const LJ=Math.min(KR.length,ZW.length);for(let pW=0;pW<LJ;pW++)if(KR[pW]!==ZW[pW])return pW;return KR.length!==ZW.length?LJ:-1}function YJ(KR){return KR.replace(/\r/g,"").split("\n").map((KR=>KR.trim())).filter((KR=>KR))}function Us(KR){return KR.concat("").join("\n")}function fP(KR,ZW,LJ=0){const pW=[];let sG;for(;sG=KR.exec(ZW);)pW.push(sG[LJ]);return pW}function es(KR){return 2*KR.length}function UH(KR){function ZW(KR){return KR.replace(/^\s+/,"")}function LJ(KR){return 0===KR?"":" ".repeat(4*KR)}if(KR.length<5e4){const ZW=/[^{}]+{\s*}/;for(;ZW.test(KR);)KR=KR.replace(ZW,"")}const pW=KR.replace(/\s{2,}/g," ").replace(/\{/g,"{\n").replace(/\}/g,"\n}\n").replace(/\;(?![^\(|\"]*(\)|\"))/g,";\n").replace(/\,(?![^\(|\"]*(\)|\"))/g,",\n").replace(/\n\s*\n/g,"\n").split("\n");let sG=0;const YJ=[];for(let KR=0,Us=pW.length;KR<Us;KR++){const Us=`${pW[KR]}\n`;Us.includes("{")?YJ.push(LJ(sG++)+ZW(Us)):Us.includes("}")?YJ.push(LJ(--sG)+ZW(Us)):YJ.push(LJ(sG)+ZW(Us))}return YJ.join("").trim()}function Bh(KR,ZW=0){const LJ=KR.length;let pW=0,sG=-1;for(let YJ=ZW;YJ<LJ;YJ++)if(0===pW){const ZW=KR.indexOf("(",YJ);if(ZW<0)break;sG=ZW,pW++,YJ=ZW}else{const ZW=KR.indexOf(")",YJ);if(ZW<0)break;const LJ=KR.indexOf("(",YJ);if(LJ<0||ZW<LJ){if(pW--,0===pW)return{start:sG,end:ZW+1};YJ=ZW}else pW++,YJ=LJ}return null}Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.getParenthesesRange=LJ.formatCSS=LJ.getStringSize=LJ.getMatches=LJ.formatArray=LJ.parseArray=LJ.getTextDiffIndex=LJ.getTextPositionMessage=void 0,LJ.getTextPositionMessage=pW,LJ.getTextDiffIndex=sG,LJ.parseArray=YJ,LJ.formatArray=Us,LJ.getMatches=fP,LJ.getStringSize=es,LJ.formatCSS=UH,LJ.getParenthesesRange=Bh},{}],42:[function(KR,ZW,LJ){"use strict";function pW(KR){let ZW=!1,LJ=null,pW;const sG=(...sG)=>{pW=sG,LJ?ZW=!0:(KR(...pW),LJ=requestAnimationFrame((()=>{LJ=null,ZW&&(KR(...pW),ZW=!1)})))},YJ=()=>{cancelAnimationFrame(LJ),ZW=!1,LJ=null};return Object.assign(sG,{cancel:YJ})}function sG(){const KR=[];let ZW=null;function LJ(){let LJ;for(;LJ=KR.shift();)LJ();ZW=null}function pW(pW){KR.push(pW),ZW||(ZW=requestAnimationFrame(LJ))}function sG(){KR.splice(0),cancelAnimationFrame(ZW),ZW=null}return{add:pW,cancel:sG}}Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.createAsyncTasksQueue=LJ.throttle=void 0,LJ.throttle=pW,LJ.createAsyncTasksQueue=sG},{}],43:[function(KR,ZW,LJ){"use strict";function pW(KR){const ZW=KR.split(":").slice(0,2),LJ=KR.trim().toLowerCase(),pW=LJ.endsWith("am")||LJ.endsWith("a.m."),sG=LJ.endsWith("pm")||LJ.endsWith("p.m.");let YJ=ZW.length>0?parseInt(ZW[0]):0;(isNaN(YJ)||YJ>23)&&(YJ=0),pW&&12===YJ&&(YJ=0),sG&&YJ<12&&(YJ+=12);let Us=ZW.length>1?parseInt(ZW[1]):0;return(isNaN(Us)||Us>59)&&(Us=0),[YJ,Us]}function sG(KR){return KR.split(":").map((KR=>parseInt(KR)))}function YJ(KR,ZW){return KR[0]===ZW[0]&&KR[1]===ZW[1]?0:KR[0]<ZW[0]||KR[0]===ZW[0]&&KR[1]<ZW[1]?-1:1}function Us(KR,ZW,LJ=new Date){const pW=sG(KR),fP=sG(ZW),es=[LJ.getHours(),LJ.getMinutes()];return YJ(pW,fP)>0?Us(ZW,KR,LJ):0===YJ(pW,fP)?null:YJ(es,pW)<0?(LJ.setHours(pW[0]),LJ.setMinutes(pW[1]),LJ.setSeconds(0),LJ.setMilliseconds(0),LJ.getTime()):YJ(es,fP)<0?(LJ.setHours(fP[0]),LJ.setMinutes(fP[1]),LJ.setSeconds(0),LJ.setMilliseconds(0),LJ.getTime()):new Date(LJ.getFullYear(),LJ.getMonth(),LJ.getDate()+1,pW[0],pW[1]).getTime()}function fP(KR,ZW,LJ=new Date){const pW=sG(KR),Us=sG(ZW),fP=[LJ.getHours(),LJ.getMinutes()];return YJ(pW,Us)>0?YJ(pW,fP)<=0||YJ(fP,Us)<0:YJ(pW,fP)<=0&&YJ(fP,Us)<0}function es(KR,ZW,LJ){return ZW<KR?LJ<=ZW||KR<=LJ:KR<LJ&&LJ<ZW}function UH(KR){let ZW=0;return KR.seconds&&(ZW+=1e3*KR.seconds),KR.minutes&&(ZW+=60*KR.minutes*1e3),KR.hours&&(ZW+=60*KR.hours*60*1e3),KR.days&&(ZW+=24*KR.days*60*60*1e3),ZW}function Bh(KR){return UH(KR)/1e3/60}function c(KR,ZW,LJ){const pW=Date.UTC(LJ.getUTCFullYear(),0,0,0,0,0,0),sG=UH({days:1}),YJ=Math.floor((LJ.getTime()-pW)/sG),Us=90.83333333333333,fP=Math.PI/180,es=180/Math.PI,Bh=ZW/15;function c(ZW){const LJ=YJ+((ZW?6:18)-Bh)/24,pW=.9856*LJ-3.289;let sG=pW+1.916*Math.sin(pW*fP)+.02*Math.sin(2*pW*fP)+282.634;sG>360?sG-=360:sG<0&&(sG+=360);let c=es*Math.atan(.91764*Math.tan(sG*fP));c>360?c-=360:c<0&&(c+=360);const Db=undefined,ec=undefined;c+=90*Math.floor(sG/90)-90*Math.floor(c/90),c/=15;const rS=.39782*Math.sin(sG*fP),RX=Math.cos(Math.asin(rS)),dG=(Math.cos(Us*fP)-rS*Math.sin(KR*fP))/(RX*Math.cos(KR*fP));if(dG>1)return{alwaysDay:!1,alwaysNight:!0,time:0};if(dG<-1)return{alwaysDay:!0,alwaysNight:!1,time:0};const Qj=undefined,GU=undefined;let jE=(ZW?360-es*Math.acos(dG):es*Math.acos(dG))/15+c-.06571*LJ-6.622-Bh;return jE>24?jE-=24:jE<0&&(jE+=24),{alwaysDay:!1,alwaysNight:!1,time:Math.round(jE*UH({hours:1}))}}const Db=c(!0),ec=c(!1);return Db.alwaysDay||ec.alwaysDay?{alwaysDay:!0}:Db.alwaysNight||ec.alwaysNight?{alwaysNight:!0}:{sunriseTime:Db.time,sunsetTime:ec.time}}function Db(KR,ZW,LJ=new Date){const pW=c(KR,ZW,LJ);if(pW.alwaysDay)return!1;if(pW.alwaysNight)return!0;const sG=pW.sunriseTime,YJ=undefined,Us=undefined;return es(pW.sunsetTime,sG,LJ.getUTCHours()*UH({hours:1})+LJ.getUTCMinutes()*UH({minutes:1})+LJ.getUTCSeconds()*UH({seconds:1})+LJ.getUTCMilliseconds())}function ec(KR,ZW,LJ=new Date){const pW=c(KR,ZW,LJ);if(pW.alwaysDay)return LJ.getTime()+UH({days:1});if(pW.alwaysNight)return LJ.getTime()+UH({days:1});const[sG,YJ]=pW.sunriseTime<pW.sunsetTime?[pW.sunriseTime,pW.sunsetTime]:[pW.sunsetTime,pW.sunriseTime],Us=LJ.getUTCHours()*UH({hours:1})+LJ.getUTCMinutes()*UH({minutes:1})+LJ.getUTCSeconds()*UH({seconds:1})+LJ.getUTCMilliseconds();return Us<=sG?Date.UTC(LJ.getUTCFullYear(),LJ.getUTCMonth(),LJ.getUTCDate(),0,0,0,sG):Us<=YJ?Date.UTC(LJ.getUTCFullYear(),LJ.getUTCMonth(),LJ.getUTCDate(),0,0,0,YJ):Date.UTC(LJ.getUTCFullYear(),LJ.getUTCMonth(),LJ.getUTCDate()+1,0,0,0,sG)}Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.nextTimeChangeAtLocation=LJ.isNightAtLocation=LJ.getDurationInMinutes=LJ.getDuration=LJ.isInTimeIntervalLocal=LJ.nextTimeInterval=LJ.parseTime=void 0,LJ.parseTime=pW,LJ.nextTimeInterval=Us,LJ.isInTimeIntervalLocal=fP,LJ.getDuration=UH,LJ.getDurationInMinutes=Bh,LJ.isNightAtLocation=Db,LJ.nextTimeChangeAtLocation=ec},{}],44:[function(KR,ZW,LJ){"use strict";function pW(KR){return(KR<16?"0":"")+KR.toString(16)}function sG(){if("randomUUID"in crypto){const KR=crypto.randomUUID();return KR.substring(0,8)+KR.substring(9,13)+KR.substring(14,18)+KR.substring(19,23)+KR.substring(24)}return Array.from(crypto.getRandomValues(new Uint8Array(16))).map((KR=>pW(KR))).join("")}Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.generateUID=void 0,LJ.generateUID=sG},{}],45:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.isLocalFile=LJ.fullyQualifiedDomainMatchesWildcard=LJ.isFullyQualifiedDomainWildcard=LJ.isFullyQualifiedDomain=LJ.isURLEnabled=LJ.isPDF=LJ.isURLMatched=LJ.isURLInList=LJ.compareURLPatterns=LJ.getURLHostOrProtocol=LJ.isRelativeHrefOnAbsolutePath=LJ.getAbsoluteURL=LJ.parseURL=LJ.parsedURLCache=void 0;const pW=KR("./ipv6"),sG=!1;let YJ;function Us(KR){return YJ||(YJ=document.createElement("a")),YJ.href=KR,YJ.href}function fP(KR,ZW=null){const pW=`${KR}${ZW?`;${ZW}`:""}`;if(LJ.parsedURLCache.has(pW))return LJ.parsedURLCache.get(pW);if(ZW){const sG=new URL(KR,Us(ZW));return LJ.parsedURLCache.set(pW,sG),sG}const sG=new URL(Us(KR));return LJ.parsedURLCache.set(KR,sG),sG}function es(KR,ZW){if(ZW.match(/^data\\?\:/))return ZW;if(/^\/\//.test(ZW))return`${location.protocol}${ZW}`;const LJ=fP(KR),pW=undefined;return fP(ZW,LJ.href).href}function UH(KR){if(KR.startsWith("data:"))return!0;const ZW=fP(KR);return ZW.protocol===location.protocol&&(ZW.hostname===location.hostname&&(ZW.port===location.port&&ZW.pathname===location.pathname))}function Bh(KR){const ZW=new URL(KR);return ZW.host?ZW.host:"file:"===ZW.protocol?ZW.pathname:ZW.protocol}function c(KR,ZW){return KR.localeCompare(ZW)}function Db(KR,ZW){for(let LJ=0;LJ<ZW.length;LJ++)if(ec(KR,ZW[LJ]))return!0;return!1}function ec(KR,ZW){const LJ=(0,pW.isIPV6)(KR),sG=(0,pW.isIPV6)(ZW);if(LJ&&sG)return(0,pW.compareIPV6)(KR,ZW);if(!LJ&&!sG){const LJ=rS(ZW);return null!==LJ&&Boolean(KR.match(LJ))}return!1}function rS(KR){try{const ZW="^"===(KR=KR.trim())[0],LJ="$"===KR[KR.length-1],pW=/\/\$?$/.test(KR);let sG,YJ,Us;(sG=(KR=KR.replace(/^\^/,"").replace(/\$$/,"").replace(/^.*?\/{2,3}/,"").replace(/\?.*$/,"").replace(/\/$/,"")).indexOf("/"))>=0?(YJ=KR.substring(0,sG),Us=KR.replace(/\$/g,"").substring(sG)):YJ=KR.replace(/\$/g,"");let fP=ZW?"^(.*?\\:\\/{2,3})?":"^(.*?\\:\\/{2,3})?([^/]*?\\.)?";const es=YJ.split(".");fP+="(";for(let KR=0;KR<es.length;KR++)"*"===es[KR]&&(es[KR]="[^\\.\\/]+?");return fP+=es.join("\\."),fP+=")",Us&&(fP+="(",fP+=Us.replace("/","\\/"),fP+=")"),fP+=LJ?"(\\/?(\\?[^/]*?)?)$":`(\\/${pW?"":"?"}.*?)$`,new RegExp(fP,"i")}catch(KR){return null}}function RX(KR){if(KR.includes(".pdf")){if(KR.includes("?")&&(KR=KR.substring(0,KR.lastIndexOf("?"))),KR.includes("#")&&(KR=KR.substring(0,KR.lastIndexOf("#"))),KR.match(/(wikipedia|wikimedia)\.org/i)&&KR.match(/(wikipedia|wikimedia)\.org\/.*\/[a-z]+\:[^\:\/]+\.pdf/i)||KR.match(/timetravel\.mementoweb\.org\/reconstruct/i)&&KR.match(/\.pdf$/i)||KR.match(/dropbox\.com\/s\//i)&&KR.match(/\.pdf$/i))return!1;if(!KR.endsWith(".pdf"))return!1;for(let ZW=KR.length;ZW>0;ZW--){if("="===KR[ZW])return!1;if("/"===KR[ZW])return!0}}return!1}function dG(KR,ZW,{isProtected:LJ,isInDarkList:pW,isDarkThemeDetected:YJ},Us=!0){if(Cd(KR)&&!Us)return!1;if(LJ&&!ZW.enableForProtectedPages)return!1;if(sG)return!0;if(RX(KR))return ZW.enableForPDF;const fP=Db(KR,ZW.siteList),es=Db(KR,ZW.siteListEnabled);return ZW.applyToListedOnly?es||fP:!!es||!(pW||ZW.detectDarkTheme&&YJ)&&!fP}function Qj(KR){return/^[a-z0-9\.\-]+$/i.test(KR)&&-1===KR.indexOf("..")}function GU(KR){if(!KR.includes("*")||!/^[a-z0-9\.\-\*]+$/i.test(KR))return!1;const ZW=KR.split(".");for(const KR of ZW)if("*"!==KR&&!/^[a-z0-9\-]+$/i.test(KR))return!1;return!0}function jE(KR,ZW){const LJ=KR.toLowerCase().split("."),pW=ZW.toLowerCase().split(".");if(pW.length<LJ.length)return!1;for(;LJ.length;){const KR=LJ.pop(),ZW=pW.pop();if("*"!==KR&&KR!==ZW)return!1}return!0}function Cd(KR){return KR&&KR.startsWith("file:///")}LJ.parsedURLCache=new Map,LJ.parseURL=fP,LJ.getAbsoluteURL=es,LJ.isRelativeHrefOnAbsolutePath=UH,LJ.getURLHostOrProtocol=Bh,LJ.compareURLPatterns=c,LJ.isURLInList=Db,LJ.isURLMatched=ec,LJ.isPDF=RX,LJ.isURLEnabled=dG,LJ.isFullyQualifiedDomain=Qj,LJ.isFullyQualifiedDomainWildcard=GU,LJ.fullyQualifiedDomainMatchesWildcard=jE,LJ.isLocalFile=Cd},{"./ipv6":34}],46:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.documentIsVisible=LJ.removeDocumentVisibilityListener=LJ.setDocumentVisibilityListener=void 0;let pW=null,sG=!document.hidden;const YJ={capture:!0,passive:!0};function Us(){document.addEventListener("visibilitychange",pW,YJ),window.addEventListener("pageshow",pW,YJ),window.addEventListener("focus",pW,YJ)}function fP(){document.removeEventListener("visibilitychange",pW,YJ),window.removeEventListener("pageshow",pW,YJ),window.removeEventListener("focus",pW,YJ)}function es(KR){const ZW=Boolean(pW);pW=()=>{document.hidden||(UH(),KR(),sG=!0)},ZW||Us()}function UH(){fP(),pW=null}function Bh(){return sG}LJ.setDocumentVisibilityListener=es,LJ.removeDocumentVisibilityListener=UH,LJ.documentIsVisible=Bh},{}],47:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),KR("../../../darkmode-core/src/js/content/content")},{"../../../darkmode-core/src/js/content/content":2}]},{},[47]);