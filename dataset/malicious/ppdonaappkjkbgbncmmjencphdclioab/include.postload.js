"use strict";document instanceof HTMLDocument&&document.addEventListener("click",(t=>{if(2==t.button)return;if(0==t.isTrusted)return;let e=t.target;for(;!(e instanceof HTMLAnchorElement);)if(e=e.parentNode,!e)return;let n=null;if("http:"==e.protocol||"https:"==e.protocol);else{let t=/^abp:\/*subscribe\/*\?(.*)/i.exec(e.href);t&&(n=t[1])}if(!n)return;t.preventDefault(),t.stopPropagation();let o=null,r=null;for(let t of n.split("&")){let e=t.split("=",2);if(2==e.length&&/\S/.test(e[1]))switch(e[0]){case"title":o=decodeURIComponent(e[1]);break;case"location":r=decodeURIComponent(e[1])}}r&&(o||(o=r),o=o.trim(),r=r.trim(),/^(https?|ftp):/.test(r)&&ext.backgroundPage.sendMessage({type:"subscriptions.add",title:o,url:r,confirm:!0}))}),!0);