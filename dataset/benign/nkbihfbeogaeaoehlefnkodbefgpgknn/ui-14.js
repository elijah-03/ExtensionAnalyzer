LavaPack.loadBundle([[7704,{"../../../../shared/constants/app":5598,"../../../../shared/constants/metametrics":5613,"../../../../shared/lib/trace":5718,"../../../../shared/modules/browser-runtime.utils":5729,"../../../components/component-library":6325,"../../../contexts/metametrics":6855,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../hooks/useI18nContext":7047,"../../../selectors/selectors":7903,"../../../store/actions":7916,"./confirm-srp-modal":7705,"./recovery-phrase-chips":7706,"prop-types":4893,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=k;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),s=e("react-redux"),r=E(e("prop-types")),i=e("../../../components/component-library"),l=e("../../../helpers/constants/design-system"),c=e("../../../hooks/useI18nContext"),u=e("../../../store/actions"),d=e("../../../contexts/metametrics"),p=e("../../../../shared/constants/metametrics"),m=e("../../../selectors/selectors"),f=e("../../../helpers/constants/routes"),g=e("../../../../shared/constants/app"),h=e("../../../../shared/lib/trace"),y=e("../../../../shared/modules/browser-runtime.utils"),_=E(e("./confirm-srp-modal")),v=E(e("./recovery-phrase-chips"));function E(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}const x=e=>{const t=new Set,n=e.length;if(0===n)return[];for(;t.size<3;){const e=Math.floor(Math.random()*n);t.add(e)}return Array.from(t).map(t=>({index:t,word:e[t]}))};function k({secretRecoveryPhrase:e=""}){const t=(0,s.useDispatch)(),n=(0,o.useNavigate)(),{search:r}=(0,o.useLocation)(),E=(0,c.useI18nContext)(),b=(0,a.useContext)(d.MetaMetricsContext),{bufferedEndTrace:k}=b,T=(0,s.useSelector)(m.getHDEntropyIndex),w=(0,a.useMemo)(()=>e?e.split(" "):[],[e]),S=new URLSearchParams(r),C=S.get("isFromReminder"),N=S.get("isFromSettingsSecurity"),I=new URLSearchParams;C&&I.set("isFromReminder",C),N&&I.set("isFromSettingsSecurity",N);const R=I.toString(),[O,M]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),[D,B]=(0,a.useState)(x(w)),[L,F]=(0,a.useState)("");(0,a.useEffect)(()=>{e||n(`${f.ONBOARDING_REVEAL_SRP_ROUTE}${R?`?${R}`:""}`,{replace:!0})},[n,e,R]);const j=(0,a.useCallback)(()=>{const e=x(w);B(e)},[w]),U=(0,a.useCallback)(e=>{if(e.some(e=>!e.word))F("");else{const t=[...w];e.forEach(e=>{t[e.index]=e.word}),F(t.join(" "))}},[w]),W=(0,a.useCallback)(()=>{P(L===e),M(!0)},[L,e]),z=(0,a.useCallback)(()=>{t((0,u.setSeedPhraseBackedUp)(!0)),b({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.OnboardingWalletSecurityPhraseConfirmed,properties:{hd_entropy_index:T}}),null==k||k({name:h.TraceName.OnboardingNewSrpCreateWallet}),null==k||k({name:h.TraceName.OnboardingJourneyOverall});const e=(0,y.getBrowserName)()===g.PLATFORM_FIREFOX||C?f.ONBOARDING_COMPLETION_ROUTE:f.ONBOARDING_METAMETRICS;n(`${e}${R?`?${R}`:""}`,{replace:!0})},[t,T,n,b,C,R,k]),$=(0,a.useCallback)(()=>{n(f.REVEAL_SRP_LIST_ROUTE,{replace:!0})},[n]);return a.default.createElement(i.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,justifyContent:l.JustifyContent.spaceBetween,height:l.BlockSize.Full,gap:6,className:"recovery-phrase recovery-phrase__confirm","data-testid":"confirm-recovery-phrase"},a.default.createElement(i.Box,null,O&&a.default.createElement(_.default,{isError:!A,onContinue:z,onClose:()=>{j(),M(!1)}}),C&&N?a.default.createElement(i.Box,{className:"recovery-phrase__header",display:l.Display.Grid,alignItems:l.AlignItems.center,gap:1,marginBottom:4,width:l.BlockSize.Full},a.default.createElement(i.ButtonIcon,{iconName:i.IconName.ArrowLeft,color:l.IconColor.iconDefault,size:i.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-confirm-back-button",onClick:()=>n(-1),ariaLabel:E("back")}),a.default.createElement(i.Text,{variant:l.TextVariant.headingSm,textAlign:l.TextAlign.Center},E("confirmRecoveryPhraseTitleSettings")),a.default.createElement(i.ButtonIcon,{iconName:i.IconName.Close,color:l.IconColor.iconDefault,size:i.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-confirm-close-button",onClick:$,ariaLabel:E("close")})):a.default.createElement(a.default.Fragment,null,a.default.createElement(i.Box,{justifyContent:l.JustifyContent.flexStart,marginBottom:4,width:l.BlockSize.Full},a.default.createElement(i.ButtonIcon,{iconName:i.IconName.ArrowLeft,color:l.IconColor.iconDefault,size:i.ButtonIconSize.Md,"data-testid":"confirm-recovery-phrase-back-button",onClick:()=>n(-1),ariaLabel:E("back")})),a.default.createElement(i.Box,{justifyContent:l.JustifyContent.flexStart,marginBottom:4,width:l.BlockSize.Full},a.default.createElement(i.Text,{variant:l.TextVariant.headingLg,as:"h2"},E("confirmRecoveryPhraseTitle")))),a.default.createElement(i.Box,{marginBottom:6},a.default.createElement(i.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault},E("confirmRecoveryPhraseDetails"))),w.length>0&&a.default.createElement(v.default,{secretRecoveryPhrase:w,quizWords:D,confirmPhase:!0,setInputValue:U})),a.default.createElement(i.Box,{width:l.BlockSize.Full},a.default.createElement(i.Button,{variant:i.ButtonVariant.Primary,width:l.BlockSize.Full,"data-testid":"recovery-phrase-confirm",size:i.ButtonSize.Lg,className:"recovery-phrase__footer__confirm--button",onClick:()=>W(),disabled:""===L.trim()},E("continue"))))}k.propTypes={secretRecoveryPhrase:r.default.string}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/confirm-recovery-phrase.js"}],[7705,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onContinue:e,onClose:t,isError:n}){const a=(0,r.useI18nContext)();return o.default.createElement(i.Modal,{isOpen:!0,onClose:()=>null,className:"confirm-srp-modal","data-testid":"confirm-srp-modal"},o.default.createElement(i.ModalOverlay,null),o.default.createElement(i.ModalContent,{alignItems:s.AlignItems.center},o.default.createElement(i.ModalHeader,null,o.default.createElement(i.Box,{textAlign:s.TextAlign.Center},o.default.createElement(i.Icon,{name:n?i.IconName.CircleX:i.IconName.Confirmation,size:i.IconSize.Xl,className:"skip-srp-backup-popover__icon",color:n?s.IconColor.errorDefault:s.IconColor.successDefault}),o.default.createElement(i.Text,{variant:s.TextVariant.headingMd,textAlign:s.TextAlign.Center,marginTop:2,as:"h2"},a(n?"confirmSrpErrorTitle":"confirmSrpSuccessTitle")))),o.default.createElement(i.Box,{paddingLeft:4,paddingRight:4},o.default.createElement(i.Text,{variant:s.TextVariant.bodyMd},a(n?"confirmSrpErrorDescription":"confirmSrpSuccessDescription")),o.default.createElement(i.Box,{marginTop:6},o.default.createElement(i.Button,{"data-testid":"confirm-srp-modal-button",variant:i.ButtonVariant.Primary,size:i.ButtonSize.Lg,onClick:()=>{n?t():e()},block:!0},a(n?"tryAgain":"gotIt"))))))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},s=e("../../../helpers/constants/design-system"),r=e("../../../hooks/useI18nContext"),i=e("../../../components/component-library")}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/confirm-srp-modal.tsx"}],[7706,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,classnames:3913,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=p,n.fakeSeedPhraseWords=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=c(e("classnames")),s=c(e("prop-types")),r=e("../../../components/component-library"),i=e("../../../hooks/useI18nContext"),l=e("../../../helpers/constants/design-system");function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d=n.fakeSeedPhraseWords=["candy","maple","cake","sugar","pudding","cream","honey","rich","smooth","crumble","sweet","treat"];function p({secretRecoveryPhrase:e,phraseRevealed:t=!0,revealPhrase:n,confirmPhase:s,quizWords:c=[],setInputValue:u}){const p=(0,i.useI18nContext)(),m=(0,a.useMemo)(()=>c.map(e=>e.index),[c]),[f,g]=(0,a.useState)(m.map(e=>({index:e,word:"",actualIndexInSrp:-1}))),h=e=>{const t=e.reduce((e,t)=>(""===t.word&&e.push(t.index),e),[]);return t.length?Math.min(...t):-1},[y,_]=(0,a.useState)(h(f)),v=(0,a.useCallback)((e,t)=>{const n=[...f],a=n.findIndex(e=>e.index===y);n[a]={index:y,word:e,actualIndexInSrp:t},g(n),_(h(n))},[f,y]),E=(0,a.useCallback)(e=>{const t=[...f],n=t.findIndex(t=>t.word===e);t[n]={...t[n],word:"",actualIndexInSrp:-1},g(t),_(t[n].index)},[f]);(0,a.useEffect)(()=>{null==u||u(f)},[f,u]),(0,a.useEffect)(()=>{if(c.length){const e=c.map(e=>({index:e.index,word:"",actualIndexInSrp:-1}));g(e),_(h(e))}},[c]);const b=t?e:e.map((e,t)=>d[t%d.length]);return a.default.createElement(r.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,gap:4},a.default.createElement(r.Box,{padding:4,borderRadius:l.BorderRadius.LG,display:l.Display.Grid,width:l.BlockSize.Full,backgroundColor:l.BackgroundColor.backgroundSection,className:"recovery-phrase__secret"},a.default.createElement(r.Box,{key:"recovery-phrase-chips",display:l.Display.Grid,justifyContent:l.JustifyContent.center,alignItems:l.AlignItems.center,gap:2,"data-testid":"recovery-phrase-chips","data-recovery-phrase":e.join(":"),"data-quiz-words":JSON.stringify(c),className:(0,o.default)("recovery-phrase__chips",{"recovery-phrase__chips--hidden":!t})},b.map((e,t)=>{var n;const o=m.includes(t),i=o?(null===(n=f.find(e=>e.index===t))||void 0===n?void 0:n.word)||"":e,c=t===y;return o||!s?a.default.createElement(r.Box,{as:o?"button":"div","data-testid":`recovery-phrase-chip-${t}`,className:"recovery-phrase__text",display:l.Display.Flex,alignItems:l.AlignItems.center,backgroundColor:l.BackgroundColor.backgroundDefault,borderColor:c?l.BorderColor.primaryDefault:l.BorderColor.borderDefault,borderWidth:c?2:1,borderRadius:l.BorderRadius.LG,paddingInline:2,paddingTop:1,paddingBottom:1,gap:1,onClick:()=>{o&&(""===i?_(t):E(i))}},a.default.createElement(r.Text,{color:l.TextColor.textAlternative,className:"recovery-phrase__word-index"},t+1,"."),a.default.createElement(r.Text,null,o?i:e)):a.default.createElement(r.TextField,{testId:`recovery-phrase-chip-${t}`,key:t,value:i,startAccessory:a.default.createElement(r.Text,{color:l.TextColor.textAlternative,className:"recovery-phrase__word-index"},t+1,"."),type:"password",disabled:!0,readOnly:!0})})),!t&&a.default.createElement(r.Box,{key:"recovery-phrase__secret-blocker-container",width:l.BlockSize.Full,height:l.BlockSize.Full,className:"recovery-phrase__secret-blocker-container"},a.default.createElement(r.Box,{display:l.Display.Flex,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center,borderRadius:l.BorderRadius.SM,width:l.BlockSize.Full,height:l.BlockSize.Full,paddingTop:2,paddingBottom:9,paddingInline:0,className:"recovery-phrase__secret-blocker"}),a.default.createElement(r.Box,{as:"button",display:l.Display.Flex,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.center,backgroundColor:l.BackgroundColor.transparent,height:l.BlockSize.Full,width:l.BlockSize.Full,gap:2,className:"recovery-phrase__secret-blocker-text",onClick:()=>{null==n||n()},"data-testid":"recovery-phrase-reveal"},a.default.createElement(r.Icon,{name:r.IconName.EyeSlash,color:l.IconColor.iconDefault,size:r.IconSize.Md}),a.default.createElement(r.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault,fontWeight:l.FontWeight.Medium},p("tapToReveal")),a.default.createElement(r.Text,{variant:l.TextVariant.bodySm,color:l.TextColor.textDefault},p("tapToRevealNote"))))),3===c.length&&a.default.createElement(r.Box,{display:l.Display.Flex,gap:2,width:l.BlockSize.Full},c.map(t=>{const n=t.index;return f.some(e=>e.actualIndexInSrp===n)?a.default.createElement(r.ButtonBase,{"data-testid":`recovery-phrase-quiz-answered-${n}`,key:t.index,color:l.TextColor.textAlternative,borderRadius:l.BorderRadius.LG,block:!0,onClick:()=>{E(t.word)}},e[n]):a.default.createElement(r.Button,{"data-testid":`recovery-phrase-quiz-unanswered-${n}`,key:t.index,variant:r.ButtonVariant.Secondary,borderRadius:l.BorderRadius.LG,block:!0,borderColor:l.BorderColor.primaryDefault,color:l.TextColor.primaryDefault,onClick:()=>{v(t.word,n)}},e[n])})))}p.propTypes={secretRecoveryPhrase:s.default.array,phraseRevealed:s.default.bool,revealPhrase:s.default.func,confirmPhase:s.default.bool,quizWords:s.default.array,setInputValue:s.default.func}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/recovery-phrase-chips.js"}],[7707,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../hooks/useI18nContext":7047,"../../../store/actions":7916,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({setSecretRecoveryPhrase:e}){const t=(0,o.useNavigate)(),n=(0,s.useI18nContext)(),{search:u}=(0,o.useLocation)(),d=new URLSearchParams(u),p=d.get("isFromReminder"),m=d.get("isFromSettingsSecurity"),f=new URLSearchParams;p&&f.set("isFromReminder",p);m&&f.set("isFromSettingsSecurity",m);const g=f.toString(),[h,y]=(0,a.useState)(""),[_,v]=(0,a.useState)(!1),E=(0,a.useCallback)(async n=>{try{const a=await(0,l.getSeedPhrase)(n);e(a),t(`${c.ONBOARDING_REVIEW_SRP_ROUTE}${g?`?${g}`:""}`,{replace:!0})}catch(e){v(!0)}},[e,t,g]),b=(0,a.useCallback)(()=>{t(m?c.REVEAL_SRP_LIST_ROUTE:c.DEFAULT_ROUTE,{replace:!0})},[t,m]);return a.default.createElement(r.Box,{display:i.Display.Flex,flexDirection:i.FlexDirection.Column,justifyContent:i.JustifyContent.spaceBetween,alignItems:i.AlignItems.center,height:i.BlockSize.Full,gap:6,className:"reveal-recovery-phrase","data-testid":"reveal-recovery-phrase"},a.default.createElement(r.Box,{width:i.BlockSize.Full},a.default.createElement(r.Box,{className:"recovery-phrase__header",display:i.Display.Grid,alignItems:i.AlignItems.center,gap:3,marginBottom:4,width:i.BlockSize.Full},a.default.createElement(r.ButtonIcon,{iconName:r.IconName.ArrowLeft,color:i.IconColor.iconDefault,size:r.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-back-button",onClick:b,ariaLabel:n("back")}),a.default.createElement(r.Text,{variant:i.TextVariant.headingSm,textAlign:i.TextAlign.Center},n("revealSecretRecoveryPhrase")),a.default.createElement(r.ButtonIcon,{iconName:r.IconName.Close,color:i.IconColor.iconDefault,size:r.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-close-button",onClick:b,ariaLabel:n("close")})),a.default.createElement(r.Box,{width:i.BlockSize.Full,as:"form",onSubmit:e=>{e.preventDefault(),E(h)}},a.default.createElement(r.FormTextField,{size:r.FormTextFieldSize.Lg,id:"account-details-authenticate",label:n("enterYourPasswordContinue"),onChange:e=>{y(e.target.value),v(!1)},value:h,error:_,helpText:_?n("unlockPageIncorrectPassword"):null,type:r.TextFieldType.Password,labelProps:{fontWeight:i.FontWeight.Medium},autoFocus:!0}))),a.default.createElement(r.Box,{width:i.BlockSize.Full},a.default.createElement(r.Button,{width:i.BlockSize.Full,variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,"data-testid":"reveal-recovery-phrase-continue",className:"reveal-recovery-phrase__footer--button",onClick:()=>E(h)},n("continue"))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),s=e("../../../hooks/useI18nContext"),r=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=e("../../../store/actions"),c=e("../../../helpers/constants/routes");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/reveal-recovery-phrase.tsx"}],[7708,{"../../../../shared/constants/app":5598,"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/onboarding":5620,"../../../../shared/lib/trace":5718,"../../../../shared/modules/browser-runtime.utils":5729,"../../../components/app/srp-details-modal":6195,"../../../components/component-library":6325,"../../../contexts/metametrics":6855,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../hooks/useI18nContext":7047,"../../../selectors":7886,"../../../store/actions":7916,"./recovery-phrase-chips":7706,"prop-types":4893,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=k;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),s=e("react-redux"),r=b(e("prop-types")),i=e("../../../hooks/useI18nContext"),l=e("../../../helpers/constants/routes"),c=e("../../../components/component-library"),u=e("../../../helpers/constants/design-system"),d=e("../../../../shared/constants/metametrics"),p=e("../../../contexts/metametrics"),m=e("../../../selectors"),f=b(e("../../../components/app/srp-details-modal")),g=e("../../../store/actions"),h=e("../../../../shared/lib/trace"),y=e("../../../../shared/modules/browser-runtime.utils"),_=e("../../../../shared/constants/app"),v=e("../../../../shared/constants/onboarding"),E=b(e("./recovery-phrase-chips"));function b(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function k({secretRecoveryPhrase:e}){const t=(0,o.useNavigate)(),n=(0,i.useI18nContext)(),{search:r}=(0,o.useLocation)(),b=(0,s.useDispatch)(),x=(0,s.useSelector)(m.getFirstTimeFlowType),k=(0,a.useContext)(p.MetaMetricsContext),{bufferedEndTrace:T}=k,w=(0,s.useSelector)(m.getHDEntropyIndex),[S,C]=(0,a.useState)(!1),[N,I]=(0,a.useState)(!1),R=new URLSearchParams(r),O=R.get("isFromReminder"),M=R.get("isFromSettingsSecurity"),A=new URLSearchParams;O&&A.set("isFromReminder",O),M&&A.set("isFromSettingsSecurity",M);const P=A.toString();(0,a.useEffect)(()=>{e||t({pathname:l.ONBOARDING_REVEAL_SRP_ROUTE,search:P?`?${P}`:""},{replace:!0})},[t,e,P]);const D=(0,a.useCallback)(()=>{k({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.OnboardingWalletSecurityPhraseWrittenDown,properties:{hd_entropy_index:w}}),t({pathname:l.ONBOARDING_CONFIRM_SRP_ROUTE,search:P?`?${P}`:""})},[w,t,k,P]),B=(0,a.useCallback)(()=>{k({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.SrpDefinitionClicked,properties:{location:"review_recovery_phrase"}}),I(!0)},[k]),L=(0,a.useCallback)(async()=>{await b((0,g.setSeedPhraseBackedUp)(!1)),k({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.OnboardingWalletSecuritySkipConfirmed,properties:{hd_entropy_index:w}}),null==T||T({name:h.TraceName.OnboardingNewSrpCreateWallet}),null==T||T({name:h.TraceName.OnboardingJourneyOverall}),(0,y.getBrowserName)()===_.PLATFORM_FIREFOX||x===v.FirstTimeFlowType.restore?t(l.ONBOARDING_COMPLETION_ROUTE,{replace:!0}):t(l.ONBOARDING_METAMETRICS,{replace:!0})},[T,b,x,w,t,k]),F=(0,a.useCallback)(()=>{t(`${l.ONBOARDING_REVEAL_SRP_ROUTE}${P?`?${P}`:""}`,{replace:!0})},[t,P]),j=(0,a.useCallback)(()=>{t(l.REVEAL_SRP_LIST_ROUTE,{replace:!0})},[t]);return a.default.createElement(c.Box,{display:u.Display.Flex,flexDirection:u.FlexDirection.Column,justifyContent:u.JustifyContent.spaceBetween,alignItems:u.AlignItems.Center,height:u.BlockSize.Full,gap:6,className:"recovery-phrase","data-testid":"recovery-phrase"},a.default.createElement(c.Box,null,N&&a.default.createElement(f.default,{onClose:()=>I(!1)}),O&&M?a.default.createElement(c.Box,{className:"recovery-phrase__header",display:u.Display.Grid,alignItems:u.AlignItems.center,gap:3,marginBottom:4,width:u.BlockSize.Full},a.default.createElement(c.ButtonIcon,{iconName:c.IconName.ArrowLeft,color:u.IconColor.iconDefault,size:c.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-review-back-button",onClick:F,ariaLabel:n("back")}),a.default.createElement(c.Text,{variant:u.TextVariant.headingSm,textAlign:u.TextAlign.Center},n("seedPhraseReviewTitleSettings")),a.default.createElement(c.ButtonIcon,{iconName:c.IconName.Close,color:u.IconColor.iconDefault,size:c.ButtonIconSize.Md,"data-testid":"reveal-recovery-phrase-review-close-button",onClick:j,ariaLabel:n("close")})):a.default.createElement(c.Box,{justifyContent:u.JustifyContent.flexStart,marginBottom:4,width:u.BlockSize.Full},a.default.createElement(c.Text,{variant:u.TextVariant.headingLg,as:"h2"},n("seedPhraseReviewTitle"))),a.default.createElement(c.Box,{marginBottom:6},a.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,color:u.TextColor.textAlternative,marginBottom:6},n("seedPhraseReviewDetails",[a.default.createElement(c.ButtonLink,{key:"seedPhraseReviewDetails",size:c.ButtonLinkSize.Inherit,onClick:B},n("secretRecoveryPhrase"))]))),a.default.createElement(E.default,{secretRecoveryPhrase:e.split(" "),phraseRevealed:S,revealPhrase:()=>{k({category:d.MetaMetricsEventCategory.Onboarding,event:d.MetaMetricsEventName.OnboardingWalletSecurityPhraseRevealed,properties:{hd_entropy_index:w}}),C(!0)}})),a.default.createElement(c.Box,{width:u.BlockSize.Full,display:u.Display.Flex,flexDirection:u.FlexDirection.Column,gap:2},a.default.createElement(c.Button,{width:u.BlockSize.Full,variant:c.ButtonVariant.Primary,size:c.ButtonSize.Lg,"data-testid":"recovery-phrase-continue",className:"recovery-phrase__footer--button",disabled:!S,onClick:D},n("continue")),!O&&a.default.createElement(c.Button,{width:u.BlockSize.Full,variant:c.ButtonVariant.Link,size:c.ButtonSize.Lg,onClick:L,type:"button","data-testid":"recovery-phrase-remind-later"},n("secureWalletRemindLaterButton"))))}k.propTypes={secretRecoveryPhrase:r.default.string}}}},{package:"$root$",file:"ui/pages/onboarding-flow/recovery-phrase/review-recovery-phrase.js"}],[7709,{"../../../contexts/rive-wasm":6857,"@metamask/design-system-react":1741,"@rive-app/react-canvas":2992,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({isLoader:e=!1,skipTransition:t=!1}){const n=Boolean(!1),i=(0,r.useRiveWasmContext)(),{isWasmReady:l,error:c}=i,{buffer:u,error:d,loading:p}=(0,r.useRiveWasmFile)("./images/riv_animations/fox_appear.riv");(0,a.useEffect)(()=>{c&&console.error("[Rive - FoxAppearAnimation] Failed to load WASM:",c),d&&console.error("[Rive - FoxAppearAnimation] Failed to load buffer:",d)},[c,d]);const{riveFile:m,status:f}=(0,o.useRiveFile)({buffer:u}),{rive:g,RiveComponent:h}=(0,o.useRive)({riveFile:m??undefined,stateMachines:m?"FoxRaiseUp":undefined,autoplay:!1,layout:new o.Layout({fit:o.Fit.Contain,alignment:o.Alignment.Center})});if((0,a.useEffect)(()=>{if(g&&l&&!p&&u){const n=g.stateMachineInputs("FoxRaiseUp");if(n){if(t){const e=n.find(e=>"Wiggle"===e.name);e&&e.fire()}else{const e=n.find(e=>"Start"===e.name);e&&e.fire()}if(e){const e=n.find(e=>"Loader2"===e.name);e&&e.fire()}g.play()}}},[g,e,l,t,p,u]),!l||p||!u||"loading"===f||"failed"===f||n)return a.default.createElement(s.Box,{className:""+(e?"riv-animation__fox-container--loader":"riv-animation__fox-container")},e&&a.default.createElement("img",{"data-testid":"loading-indicator",className:"riv-animation__spinner",src:"./images/spinner.gif",alt:""}));return a.default.createElement(s.Box,{className:""+(e?"riv-animation__fox-container--loader":"riv-animation__fox-container")},a.default.createElement(h,{className:"riv-animation__canvas"}),e&&a.default.createElement("img",{"data-testid":"loading-indicator",className:"riv-animation__spinner",src:"./images/spinner.gif",alt:""}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@rive-app/react-canvas"),s=e("@metamask/design-system-react"),r=e("../../../contexts/rive-wasm");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/fox-appear-animation.tsx"}],[7710,{"../../../../shared/constants/metametrics":5613,"../../../components/component-library":6325,"../../../contexts/metametrics":6855,"../../../helpers/constants/common":6897,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"../../../selectors":7886,"./types":7713,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onDone:e,loginError:t}){const n=(0,r.useI18nContext)(),m=(0,a.useContext)(u.MetaMetricsContext),f=(0,o.useSelector)(d.getSocialLoginType);return a.default.createElement(i.Modal,{isOpen:!0,onClose:e,"data-testid":"login-error-modal"},a.default.createElement(i.ModalOverlay,null),a.default.createElement(i.ModalContent,{alignItems:s.AlignItems.center},a.default.createElement(i.ModalHeader,{onClose:e},a.default.createElement(i.Box,{textAlign:s.TextAlign.Center},a.default.createElement(i.Icon,{name:i.IconName.Danger,size:i.IconSize.Xl,color:s.IconColor.warningDefault}),a.default.createElement(i.Text,{variant:s.TextVariant.headingMd,textAlign:s.TextAlign.Center,marginTop:4},t===p.LOGIN_ERROR.UNABLE_TO_CONNECT?n("loginErrorConnectTitle"):t===p.LOGIN_ERROR.SESSION_EXPIRED?n("loginErrorSessionExpiredTitle"):n("loginErrorGenericTitle")))),a.default.createElement(i.Box,{paddingLeft:4,paddingRight:4},a.default.createElement(i.Text,{variant:s.TextVariant.bodyMd},t===p.LOGIN_ERROR.UNABLE_TO_CONNECT?n("loginErrorConnectDescription"):t===p.LOGIN_ERROR.SESSION_EXPIRED?n("loginErrorSessionExpiredDescription"):t===p.LOGIN_ERROR.RESET_WALLET&&f?n("loginErrorResetWalletDescription",[f]):n("loginErrorGenericDescription",[a.default.createElement(i.ButtonLink,{key:"loginErrorGenericDescription",size:i.ButtonLinkSize.Inherit,externalLink:!0,href:c.SUPPORT_LINK,onClick:()=>{m({category:l.MetaMetricsEventCategory.Onboarding,event:l.MetaMetricsEventName.SupportLinkClicked,properties:{url:c.SUPPORT_LINK,location:"Welcome page"}},{contextPropsIntoEventProperties:[l.MetaMetricsContextProp.PageTitle]})}},n("loginErrorGenericSupport"))])),a.default.createElement(i.Box,{marginTop:6},a.default.createElement(i.Button,{"data-testid":"login-error-modal-button",variant:i.ButtonVariant.Primary,size:i.ButtonSize.Lg,onClick:e,block:!0},t===p.LOGIN_ERROR.UNABLE_TO_CONNECT?n("loginErrorConnectButton"):t===p.LOGIN_ERROR.SESSION_EXPIRED?n("loginErrorSessionExpiredButton"):n("loginErrorGenericButton"))))))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),s=e("../../../helpers/constants/design-system"),r=e("../../../hooks/useI18nContext"),i=e("../../../components/component-library"),l=e("../../../../shared/constants/metametrics"),c=e("../../../helpers/constants/common"),u=e("../../../contexts/metametrics"),d=e("../../../selectors"),p=e("./types");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/login-error-modal.tsx"}],[7711,{"../../../../shared/constants/preferences":5622,"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"../../../hooks/useTheme":7076,"./types":7713,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SocialButton=void 0,n.default=function({loginOption:e,handleLogin:t}){const n=(0,i.useI18nContext)(),a=(0,c.useTheme)();return o.default.createElement(s.Box,null,o.default.createElement(p,{"data-testid":e===u.LOGIN_OPTION.EXISTING?"onboarding-import-with-google-button":"onboarding-create-with-google-button",icon:o.default.createElement("img",{src:"images/icons/google.svg",className:"options-modal__social-icon",alt:n("onboardingOptionIcon",["Google"])}),label:e===u.LOGIN_OPTION.EXISTING?n("onboardingSignInWith",["Google"]):n("onboardingContinueWith",["Google"]),marginBottom:4,onClick:()=>t(u.LOGIN_TYPE.GOOGLE)}),o.default.createElement(p,{"data-testid":e===u.LOGIN_OPTION.EXISTING?"onboarding-import-with-apple-button":"onboarding-create-with-apple-button",icon:o.default.createElement(s.Icon,{name:s.IconName.Apple,color:r.IconColor.infoInverse,size:s.IconSize.Lg}),label:e===u.LOGIN_OPTION.EXISTING?n("onboardingSignInWith",["Apple"]):n("onboardingContinueWith",["Apple"]),marginBottom:2,onClick:()=>t(u.LOGIN_TYPE.APPLE)}),o.default.createElement(s.Box,{alignItems:r.AlignItems.center,marginBottom:4,className:"options-modal__or"},o.default.createElement(s.Text,{width:r.BlockSize.Min,variant:r.TextVariant.bodyMd,fontWeight:r.FontWeight.Medium,color:r.TextColor.textAlternative,paddingInline:2,marginInline:"auto",textTransform:r.TextTransform.Lowercase,as:"div",style:{position:"relative",zIndex:1},className:"options-modal__or-text"},n("or"))),o.default.createElement(s.Button,{"data-theme":a===l.ThemeType.dark?l.ThemeType.light:l.ThemeType.dark,"data-testid":e===u.LOGIN_OPTION.EXISTING?"onboarding-import-with-srp-button":"onboarding-create-with-srp-button",variant:s.ButtonVariant.Primary,width:r.BlockSize.Full,size:s.ButtonSize.Lg,onClick:()=>t(u.LOGIN_TYPE.SRP)},e===u.LOGIN_OPTION.EXISTING?n("onboardingSrpImport"):n("onboardingSrpCreate")),o.default.createElement(s.Text,{variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Medium,textAlign:r.TextAlign.Center,paddingTop:8,color:r.TextColor.textDefault,width:r.BlockSize.Full,margin:"auto"},n("onboardingLoginFooter",[o.default.createElement(s.Text,{as:"a",href:"https://consensys.io/terms-of-use",target:"_blank",rel:"noopener noreferrer",variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Medium,color:r.TextColor.primaryDefault,key:"onboardingLoginFooterTermsOfUse"},n("onboardingLoginFooterTermsOfUse")),o.default.createElement(s.Text,{as:"a",variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Medium,href:"https://consensys.io/privacy-notice",target:"_blank",rel:"noopener noreferrer",color:r.TextColor.primaryDefault,key:"onboardingLoginFooterPrivacyNotice"},n("onboardingLoginFooterPrivacyNotice"))])))};var a,o=(a=e("react"))&&a.__esModule?a:{default:a},s=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),i=e("../../../hooks/useI18nContext"),l=e("../../../../shared/constants/preferences"),c=e("../../../hooks/useTheme"),u=e("./types");function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d.apply(null,arguments)}const p=n.SocialButton=o.default.forwardRef(({icon:e,label:t,...n},a)=>o.default.createElement(s.Button,d({ref:a,className:"options-modal__plain-button",variant:s.ButtonVariant.Primary,size:s.ButtonSize.Lg,block:!0},n),o.default.createElement(s.Box,{display:r.Display.Flex,alignItems:r.AlignItems.center,justifyContent:r.JustifyContent.center,width:r.BlockSize.Full,gap:2},e,o.default.createElement(s.Box,null,t))))}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/login-options.tsx"}],[7712,{"../../../../shared/constants/preferences":5622,"../../../contexts/rive-wasm":6857,"../../../hooks/useTheme":7076,"@metamask/design-system-react":1741,"@rive-app/react-canvas":2992,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({setIsAnimationComplete:e,isAnimationComplete:t,skipTransition:n}){const c=(0,a.useRef)(null),u=(0,r.useTheme)(),d=Boolean(!1),p=(0,l.useRiveWasmContext)(),{isWasmReady:m,error:f,setIsAnimationCompleted:g}=p,{buffer:h,error:y,loading:_}=(0,l.useRiveWasmFile)("./images/riv_animations/metamask_wordmark.riv");(0,a.useEffect)(()=>{f&&(console.error("[Rive - MetamaskWordMarkAnimation] Failed to load WASM:",f),e(!0)),y&&(console.error("[Rive - MetamaskWordMarkAnimation] Failed to load buffer:",y),e(!0))},[f,y,e]);const{riveFile:v,status:E}=(0,o.useRiveFile)({buffer:h}),{rive:b,RiveComponent:x}=(0,o.useRive)({riveFile:v??undefined,stateMachines:v?"WordmarkBuildUp":undefined,autoplay:!1,layout:new o.Layout({fit:o.Fit.Contain,alignment:o.Alignment.Center}),onStateChange:n=>{n.data&&Array.isArray(n.data)&&(c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{t||e(!0)},1e3))}});if((0,a.useEffect)(()=>{if(b&&m&&!_&&h){const e=b.stateMachineInputs("WordmarkBuildUp");if(e){const t=e.find(e=>"Dark"===e.name);if(t&&u===i.ThemeType.dark&&(t.value=!0),n){const t=e.find(e=>"Still"===e.name);t&&t.fire()}else{const t=e.find(e=>"Start"===e.name);t&&t.fire()}b.play()}}return()=>{c.current&&(clearTimeout(c.current),g("MetamaskWordMarkAnimation",!0))}},[b,u,m,n,_,h,g]),!m||_||!h||d||"loading"===E||"failed"===E)return"failed"===E&&(t||e(!0)),a.default.createElement(s.Box,{className:"riv-animation__wordmark-container "+("failed"===E?"riv-animation__wordmark-container--complete":"")});return a.default.createElement(s.Box,{className:`riv-animation__wordmark-container ${t&&!n?"riv-animation__wordmark-container--complete":""} ${n?"riv-animation__wordmark-container--skip-transition":""} `},a.default.createElement(x,{className:"riv-animation__canvas"}))};var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("@rive-app/react-canvas"),s=e("@metamask/design-system-react"),r=e("../../../hooks/useTheme"),i=e("../../../../shared/constants/preferences"),l=e("../../../contexts/rive-wasm");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/metamask-wordmark-animation.tsx"}],[7713,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LOGIN_TYPE=n.LOGIN_OPTION=n.LOGIN_ERROR=void 0;n.LOGIN_TYPE={GOOGLE:"google",APPLE:"apple",SRP:"srp"},n.LOGIN_OPTION={NEW:"new",EXISTING:"existing"},n.LOGIN_ERROR={UNABLE_TO_CONNECT:"unable_to_connect",GENERIC:"generic",SESSION_EXPIRED:"session_expired",RESET_WALLET:"reset_wallet"}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/types.ts"}],[7714,{"../../../../shared/constants/preferences":5622,"../../../../shared/modules/environment":5736,"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../hooks/useI18nContext":7047,"../../../hooks/useTheme":7076,"../../../store/actions":7916,"./login-options":7711,"./types":7713,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onLogin:e,isAnimationComplete:t,skipTransition:n=!1}){const a=(0,c.useI18nContext)(),[y,_]=(0,o.useState)(!1),[v,E]=(0,o.useState)(null),[b,x]=(0,o.useState)(!1),k=(0,u.getIsSeedlessOnboardingFeatureEnabled)(),T=(0,s.useDispatch)(),w=(0,o.useRef)(null),S=(0,m.useTheme)(),C=(0,r.useNavigate)(),[N]=(0,r.useSearchParams)(),I=N.get("login");(0,o.useEffect)(()=>()=>{w.current&&clearTimeout(w.current)},[]),(0,o.useEffect)(()=>{I?(_(!0),E(I)):(_(!1),E(null))},[I]);const R=(0,o.useCallback)(async t=>{v&&(_(!1),await T((0,p.setTermsOfUseLastAgreed)((new Date).getTime())),await e(t,v))},[T,v,e]),O=async(t,n)=>{k?(x(!0),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{_(!0),E(t),x(!1),w.current=null,C(`${f.ONBOARDING_WELCOME_ROUTE}?login=${t}`)},100)):(_(!0),E(t),n&&await e(n,t))};return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.Box,{"data-testid":"get-started",style:{opacity:t?1:0,transform:t?"translateY(0) scale(1)":"translateY(80px) scale(0.8)",transition:n?"none":"opacity 0.6s ease-out, transform 0.6s ease-out"},className:"welcome-login"},k&&y&&v?o.default.createElement(i.Box,{className:"welcome-login__options welcome-login__options--fade-in"},o.default.createElement(g.default,{loginOption:v,handleLogin:R})):o.default.createElement(i.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,width:l.BlockSize.Full,gap:4,className:""+(b?"welcome-login__cta--fade-out":"")},o.default.createElement(i.Button,{"data-testid":"onboarding-create-wallet",variant:i.ButtonVariant.Primary,size:i.ButtonSize.Lg,block:!0,onClick:()=>O(h.LOGIN_OPTION.NEW,h.LOGIN_TYPE.SRP)},a("onboardingCreateWallet")),o.default.createElement(i.Button,{"data-theme":S===d.ThemeType.dark?d.ThemeType.light:d.ThemeType.dark,"data-testid":"onboarding-import-wallet",variant:i.ButtonVariant.Primary,size:i.ButtonSize.Lg,block:!0,onClick:()=>O(h.LOGIN_OPTION.EXISTING,h.LOGIN_TYPE.SRP)},a(k?"onboardingImportWallet":"onboardingSrpImport")))))};var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),r=e("react-router-dom-v5-compat"),i=e("../../../components/component-library"),l=e("../../../helpers/constants/design-system"),c=e("../../../hooks/useI18nContext"),u=e("../../../../shared/modules/environment"),d=e("../../../../shared/constants/preferences"),p=e("../../../store/actions"),m=e("../../../hooks/useTheme"),f=e("../../../helpers/constants/routes"),g=(a=e("./login-options"))&&a.__esModule?a:{default:a},h=e("./types");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/welcome-login.tsx"}],[7715,{"../../../../shared/constants/app":5598,"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/onboarding":5620,"../../../../shared/lib/trace":5718,"../../../../shared/modules/browser-runtime.utils":5729,"../../../../shared/modules/environment":5736,"../../../../shared/modules/error":5737,"../../../components/component-library":6325,"../../../contexts/metametrics":6855,"../../../contexts/rive-wasm":6857,"../../../ducks/metamask/metamask":6883,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../selectors":7886,"../../../store/actions":7916,"./fox-appear-animation":7709,"./login-error-modal":7710,"./metamask-wordmark-animation":7712,"./types":7713,"./welcome-login":7714,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,o.useDispatch)(),t=(0,s.useNavigate)(),n=(0,o.useSelector)(l.getCurrentKeyring),T=(0,m.getIsSeedlessOnboardingFeatureEnabled)(),w=(0,o.useSelector)(l.getFirstTimeFlowType),S=(0,o.useSelector)(E.getIsWalletResetInProgress),I=(0,o.useSelector)(l.getIsSocialLoginFlow),R=(0,o.useSelector)(l.getIsParticipateInMetaMetricsSet),[O,M]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),[D,B]=(0,a.useState)(null),L=Boolean(!1),{animationCompleted:F}=(0,v.useRiveWasmContext)(),j=Boolean(null==F?void 0:F.MetamaskWordMarkAnimation),[U,W]=(0,a.useState)(L||j),z=(0,f.getBrowserName)()===g.PLATFORM_FIREFOX,$=(0,a.useCallback)(async()=>{if(!I)return!0;return await e((0,d.getIsSeedlessOnboardingUserAuthenticated)())},[e,I]);(0,a.useEffect)(()=>{let e=!0;return!n||O||S?I&&(async()=>{const n=await $();e&&n&&(w===c.FirstTimeFlowType.socialCreate?t(i.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0}):t(i.ONBOARDING_UNLOCK_ROUTE,{replace:!0}))})():w===c.FirstTimeFlowType.import||w===c.FirstTimeFlowType.restore?t(R?i.ONBOARDING_COMPLETION_ROUTE:i.ONBOARDING_METAMETRICS,{replace:!0}):w===c.FirstTimeFlowType.socialCreate?t(i.ONBOARDING_COMPLETION_ROUTE,{replace:!0}):t(i.ONBOARDING_REVIEW_SRP_ROUTE,{replace:!0}),()=>{e=!1}},[n,t,w,O,R,$,z,S,I]);const q=(0,a.useContext)(u.MetaMetricsContext),{bufferedTrace:V,bufferedEndTrace:G,onboardingParentContext:H}=q,J=(0,a.useCallback)(async()=>{P(!0),M(!0),await e((0,d.setFirstTimeFlowType)(c.FirstTimeFlowType.create)),q({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.WalletSetupStarted,properties:{account_type:p.MetaMetricsEventAccountType.Default}}),null==V||V({name:y.TraceName.OnboardingNewSrpCreateWallet,op:y.TraceOperation.OnboardingUserJourney,parentContext:null==H?void 0:H.current}),t(i.ONBOARDING_CREATE_PASSWORD_ROUTE)},[e,t,q,H,V]),K=(0,a.useCallback)(async()=>{P(!0),await e((0,d.setFirstTimeFlowType)(c.FirstTimeFlowType.import)),q({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.WalletImportStarted,properties:{account_type:p.MetaMetricsEventAccountType.Imported}}),null==V||V({name:y.TraceName.OnboardingExistingSrpImport,op:y.TraceOperation.OnboardingUserJourney,parentContext:null==H?void 0:H.current}),t(i.ONBOARDING_IMPORT_WITH_SRP_ROUTE)},[e,t,q,H,V]),Y=(0,a.useCallback)(async t=>{if(T){null==V||V({name:y.TraceName.OnboardingSocialLoginAttempt,op:y.TraceOperation.OnboardingUserJourney,tags:{provider:t},parentContext:null==H?void 0:H.current});const n=await e((0,d.startOAuthLogin)(t,V,G,q));return null==G||G({name:y.TraceName.OnboardingSocialLoginAttempt}),n}return!0},[e,T,H,V,G,q]),X=(0,a.useCallback)((e,t)=>{const n=e instanceof Error?e.message:"Unknown error";(0,h.isUserCancelledLoginError)(e)?B(null):(null==V||V({name:y.TraceName.OnboardingSocialLoginError,op:y.TraceOperation.OnboardingError,tags:{provider:t,errorMessage:n},parentContext:H.current}),null==G||G({name:y.TraceName.OnboardingSocialLoginError}),null==G||G({name:y.TraceName.OnboardingSocialLoginAttempt,data:{success:!1}}),n!==h.OAuthErrorMessages.INVALID_OAUTH_STATE_ERROR?n!==h.OAuthErrorMessages.NO_REDIRECT_URL_FOUND_ERROR&&n!==h.OAuthErrorMessages.NO_AUTH_CODE_FOUND_ERROR?B(x.LOGIN_ERROR.GENERIC):B(x.LOGIN_ERROR.UNABLE_TO_CONNECT):B(x.LOGIN_ERROR.SESSION_EXPIRED))},[H,V,G]),Q=(0,a.useCallback)(async n=>{P(!0),M(!0),q({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.WalletSetupStarted,properties:{account_type:`${p.MetaMetricsEventAccountType.Default}_${n}`}});try{const a=await Y(n);q({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.SocialLoginCompleted,properties:{account_type:`${p.MetaMetricsEventAccountType.Default}_${n}`}}),a?(null==V||V({name:y.TraceName.OnboardingNewSocialCreateWallet,op:y.TraceOperation.OnboardingUserJourney,parentContext:H.current}),await e((0,d.setFirstTimeFlowType)(c.FirstTimeFlowType.socialCreate)),t(i.ONBOARDING_CREATE_PASSWORD_ROUTE,{replace:!0})):(await e((0,d.setFirstTimeFlowType)(c.FirstTimeFlowType.socialImport)),t(i.ONBOARDING_ACCOUNT_EXIST,{replace:!0}))}catch(e){X(e,n)}finally{P(!1)}},[e,Y,q,t,H,X,V]),Z=(0,a.useCallback)(async n=>{P(!0),q({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.WalletImportStarted,properties:{account_type:`${p.MetaMetricsEventAccountType.Imported}_${n}`}});try{const a=await Y(n);q({category:p.MetaMetricsEventCategory.Onboarding,event:p.MetaMetricsEventName.SocialLoginCompleted,properties:{account_type:`${p.MetaMetricsEventAccountType.Imported}_${n}`}}),a?(await e((0,d.setFirstTimeFlowType)(c.FirstTimeFlowType.socialCreate)),t(i.ONBOARDING_ACCOUNT_NOT_FOUND)):(null==V||V({name:y.TraceName.OnboardingExistingSocialLogin,op:y.TraceOperation.OnboardingUserJourney,parentContext:H.current}),await e((0,d.setFirstTimeFlowType)(c.FirstTimeFlowType.socialImport)),t(i.ONBOARDING_UNLOCK_ROUTE))}catch(e){X(e,n)}finally{P(!1)}},[Y,q,t,H,X,V,e]),ee=(0,a.useCallback)(e=>{(0,h.isUserCancelledLoginError)(e)?B(null):B(x.LOGIN_ERROR.GENERIC)},[]),te=(0,a.useCallback)(async(t,n)=>{try{if(z||e((0,d.setParticipateInMetaMetrics)(null)),t===x.LOGIN_TYPE.SRP)return void(n===x.LOGIN_OPTION.NEW?await J():n===x.LOGIN_OPTION.EXISTING&&await K());if(!T)return;n===x.LOGIN_OPTION.NEW?await Q(t):n===x.LOGIN_OPTION.EXISTING&&await Z(t),z||e((0,d.setParticipateInMetaMetrics)(!0))}catch(e){ee(e)}},[T,e,J,K,Q,z,Z,ee]);return a.default.createElement(r.Box,{display:_.Display.Flex,flexDirection:_.FlexDirection.Column,justifyContent:_.JustifyContent.center,alignItems:_.AlignItems.center,height:_.BlockSize.Full,width:_.BlockSize.Full,className:"welcome-container"},!A&&!L&&a.default.createElement(a.Suspense,{fallback:a.default.createElement(r.Box,null)},a.default.createElement(C,{setIsAnimationComplete:W,isAnimationComplete:U,skipTransition:j})),!A&&a.default.createElement(a.default.Fragment,null,a.default.createElement(b.default,{onLogin:te,isAnimationComplete:U,skipTransition:j}),!L&&U&&a.default.createElement(a.Suspense,{fallback:a.default.createElement(r.Box,null)},a.default.createElement(N,{skipTransition:j})),null!==D&&a.default.createElement(k.default,{onDone:()=>B(null),loginError:D})),!L&&A&&a.default.createElement(a.Suspense,{fallback:a.default.createElement(r.Box,null)},a.default.createElement(N,{isLoader:!0})))};var a=S(e("react")),o=e("react-redux"),s=e("react-router-dom-v5-compat"),r=e("../../../components/component-library"),i=e("../../../helpers/constants/routes"),l=e("../../../selectors"),c=e("../../../../shared/constants/onboarding"),u=e("../../../contexts/metametrics"),d=e("../../../store/actions"),p=e("../../../../shared/constants/metametrics"),m=e("../../../../shared/modules/environment"),f=e("../../../../shared/modules/browser-runtime.utils"),g=e("../../../../shared/constants/app"),h=e("../../../../shared/modules/error"),y=e("../../../../shared/lib/trace"),_=e("../../../helpers/constants/design-system"),v=e("../../../contexts/rive-wasm"),E=e("../../../ducks/metamask/metamask"),b=T(e("./welcome-login")),x=e("./types"),k=T(e("./login-error-modal"));function T(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}const C=(0,a.lazy)(()=>Promise.resolve().then(()=>S(e("./metamask-wordmark-animation")))),N=(0,a.lazy)(()=>Promise.resolve().then(()=>S(e("./fox-appear-animation"))))}}},{package:"$root$",file:"ui/pages/onboarding-flow/welcome/welcome.js"}],[7716,{"../../../components/app/permissions-connect-footer":6029,"../../../components/component-library":6325,"../../../components/ui/account-list":6718,"../../../components/ui/page-container":6798,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"@metamask/keyring-api":2100,"@metamask/permission-controller":2329,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=f(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("@metamask/permission-controller"),r=e("@metamask/keyring-api"),i=e("../../../hooks/useI18nContext"),l=f(e("../../../components/app/permissions-connect-footer")),c=f(e("../../../components/ui/account-list")),u=e("../../../components/ui/page-container"),d=e("../../../helpers/constants/design-system"),p=e("../../../components/component-library");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}const g=({selectedAccountAddresses:e,addressLastConnectedMap:t={},accounts:n,selectAccounts:a,selectNewAccountViaModal:m,cancelPermissionsRequest:f,permissionsRequestId:g,targetSubjectMetadata:h,nativeCurrency:y})=>{const[_,v]=(0,o.useState)(e),E=n.filter(e=>(0,r.isEvmAccountType)(e.type)),b=(0,i.useI18nContext)(),x=Object.keys(e).length>E.length,k=0===n.length?b("connectAccountOrCreate"):(null==h?void 0:h.subjectType)===s.SubjectType.Snap?b("selectAccountsForSnap"):b("selectAccounts");return o.default.createElement(o.default.Fragment,null,o.default.createElement(p.Box,{className:"permissions-connect-choose-account__content",display:d.Display.Flex,flexDirection:d.FlexDirection.Column,backgroundColor:d.BackgroundColor.backgroundAlternative,width:d.BlockSize.Full,height:d.BlockSize.Full,paddingLeft:6,paddingRight:6},o.default.createElement(p.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Column,justifyContent:d.JustifyContent.center,alignItems:d.AlignItems.center,paddingTop:4,paddingBottom:4},o.default.createElement(p.Text,{variant:d.TextVariant.headingMd},b("connectWithMetaMask")),o.default.createElement(p.Text,{variant:d.TextVariant.bodyMd},k)),o.default.createElement(c.default,{accounts:n,selectNewAccountViaModal:m,addressLastConnectedMap:t,nativeCurrency:y,selectedAccounts:_,allAreSelected:()=>E.length===_.size,deselectAll:()=>{v(new Set)},selectAll:()=>{const e=new Set(E.map(e=>e.address));v(e)},handleAccountClick:e=>{const t=new Set(_);t.has(e)?t.delete(e):t.add(e),v(t)}})),o.default.createElement(p.Box,{backgroundColor:d.BackgroundColor.backgroundAlternative,className:"permissions-connect-choose-account__footer",paddingTop:4},(null==h?void 0:h.subjectType)!==s.SubjectType.Snap&&o.default.createElement(l.default,null),o.default.createElement(u.PageContainerFooter,{cancelButtonType:"default",onCancel:()=>f(g),cancelText:b("cancel"),onSubmit:()=>a(_),submitText:b("next"),disabled:x||0===_.size})))};g.propTypes={accounts:a.default.arrayOf(a.default.shape({address:a.default.string,addressLabel:a.default.string,lastConnectedDate:a.default.string,balance:a.default.string})).isRequired,selectAccounts:a.default.func.isRequired,selectNewAccountViaModal:a.default.func.isRequired,nativeCurrency:a.default.string.isRequired,addressLastConnectedMap:a.default.object,cancelPermissionsRequest:a.default.func.isRequired,permissionsRequestId:a.default.string.isRequired,selectedAccountAddresses:a.default.object.isRequired,targetSubjectMetadata:a.default.shape({extensionId:a.default.string,iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,subjectType:a.default.string})};n.default=g}}},{package:"$root$",file:"ui/pages/permissions-connect/choose-account/choose-account.js"}],[7717,{"./choose-account":7716},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./choose-account"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/choose-account/index.js"}],[7718,{"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/network":5617,"../../../../shared/lib/caip25-caveat-merger":5649,"../../../../shared/modules/selectors/networks":5753,"../../../components/component-library":6325,"../../../components/multichain":6568,"../../../components/multichain/create-solana-account-modal/create-solana-account-modal":6539,"../../../components/multichain/pages/page":6674,"../../../components/multichain/pages/review-permissions-page/site-cell/site-cell":6681,"../../../components/ui/tabs":6823,"../../../contexts/metametrics":6855,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/util":6959,"../../../hooks/useI18nContext":7047,"../../../hooks/useOriginTrustSignals":7066,"../../../hooks/useTrustSignals":7090,"../../../selectors":7886,"../../../selectors/multichain":7895,"./utils":7719,"@metamask/chain-agnostic-permission":1359,"@metamask/utils":2914,lodash:4635,react:5080,"react-redux":5021,"react-tippy":5062},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ConnectPage=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),s=e("@metamask/chain-agnostic-permission"),r=e("@metamask/utils"),i=e("lodash"),l=e("react-tippy"),c=e("../../../hooks/useI18nContext"),u=e("../../../selectors"),d=e("../../../../shared/modules/selectors/networks"),p=e("../../../components/component-library"),m=e("../../../components/multichain/pages/page"),f=e("../../../components/multichain/pages/review-permissions-page/site-cell/site-cell"),g=e("../../../helpers/constants/design-system"),h=e("../../../../shared/constants/network"),y=e("../../../selectors/multichain"),_=e("../../../components/ui/tabs"),v=e("../../../components/multichain"),E=e("../../../helpers/utils/util"),b=e("../../../../shared/constants/metametrics"),x=e("../../../contexts/metametrics"),k=e("../../../components/multichain/create-solana-account-modal/create-solana-account-modal"),T=e("../../../../shared/lib/caip25-caveat-merger"),w=e("../../../hooks/useOriginTrustSignals"),S=e("../../../hooks/useTrustSignals"),C=e("./utils");function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}n.ConnectPage=({request:e,permissionsRequestId:t,rejectPermissionsRequest:n,approveConnection:N,targetSubjectMetadata:I})=>{const R=(0,c.useI18nContext)(),O=(0,a.useContext)(x.MetaMetricsContext),M=(0,o.useSelector)(t=>{var n;return(0,u.getPermissions)(t,null===(n=e.metadata)||void 0===n?void 0:n.origin)}),A=(0,a.useMemo)(()=>M?(0,C.getCaip25CaveatValueFromPermissions)(M):null,[M]),P=(0,C.getCaip25CaveatValueFromPermissions)(e.permissions),D=A?(0,T.mergeCaip25CaveatValues)(P,A):P,B=(0,s.getCaipAccountIdsFromCaip25CaveatValue)(D),L=(0,s.getAllScopesFromCaip25CaveatValue)(D),{promptToCreateSolanaAccount:F,isEip1193Request:j}=e.metadata??{},U=(0,o.useSelector)(d.getAllNetworkConfigurationsByCaipChainId),[W,z]=(0,a.useMemo)(()=>Object.entries(U).reduce(([e,t],[n,a])=>{const o=n;return(h.CAIP_FORMATTED_EVM_TEST_CHAINS.includes(o)?t:e).push({...a,caipChainId:o}),[e,t]},[[],[]]),[U]),$=(0,a.useMemo)(()=>[...W,...z].map(({caipChainId:e})=>e),[W,z]),[q,V]=(0,a.useState)(!1),[G,H]=(0,a.useState)(!1),[J,K]=(0,a.useState)(!1),Y=(0,o.useSelector)(y.getMultichainNetwork).chainId,X=z.find(e=>e.caipChainId===Y);let Q=X?[...W,X].map(({caipChainId:e})=>e):W.map(({caipChainId:e})=>e),Z=L.filter(e=>$.includes(e));if(j){Q=Q.filter(e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return t===r.KnownCaipNamespace.Eip155});!Z.some(e=>{const{namespace:t}=(0,r.parseCaipChainId)(e);return t===r.KnownCaipNamespace.Eip155})&&A&&(Z=Array.from(new Set([...Q,...Z])))}const ee=Z.length>0?Z:Q,[te,ne]=(0,a.useState)(ee),ae=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&V(!0),ne(e)},[V,ne]),oe=(0,o.useSelector)(u.getUpdatedAndSortedAccountsWithCaipAccountId),se=(0,s.getAllNamespacesFromCaip25CaveatValue)(D).filter(e=>e!==r.KnownCaipNamespace.Wallet),re=oe.filter(e=>{const{chain:{namespace:t}}=(0,r.parseCaipAccountId)(e.caipAccountId);return se.includes(t)}),ie=re.filter(e=>(0,s.isCaipAccountIdInPermittedAccountIds)(e.caipAccountId,B)),le=(0,C.getDefaultAccounts)(se,ie,re).map(({caipAccountId:e})=>e),[ce,ue]=(0,a.useState)(le),de=(0,a.useCallback)((e,{isUserModified:t=!0}={})=>{t&&V(!0);let n=[...te];e.forEach(e=>{const{chain:{namespace:t}}=(0,r.parseCaipAccountId)(e);if(!n.some(e=>{try{const{namespace:n}=(0,r.parseCaipChainId)(e);return t===n}catch(e){return!1}})){const e=$.filter(e=>{try{const{namespace:n}=(0,r.parseCaipChainId)(e);return t===n}catch(e){return!1}});n=Array.from(new Set([...n,...e]))}}),ae(n,{isUserModified:t}),ue(e)},[V,ue,te,ae,$]);(0,a.useEffect)(()=>{q||(0,i.isEqual)(le,ce)||de(le,{isUserModified:!1})},[q,de,ce,JSON.stringify(le)]);const pe=oe.filter(({caipAccountId:e})=>ce.some(t=>t===e)),me=(0,a.useMemo)(()=>oe.some(({caipAccountId:e})=>{const{chain:t}=(0,r.parseCaipAccountId)(e);return t.namespace===r.KnownCaipNamespace.Solana}),[oe]),fe=(0,a.useCallback)(()=>{H(!0),O({category:b.MetaMetricsEventCategory.Navigation,event:b.MetaMetricsEventName.ViewPermissionedAccounts,properties:{location:"Connect view (accounts tab), Permissions toast, Permissions (dapp)"}})},[O]),ge=(0,a.useCallback)(()=>{K(!0)},[]),he=(0,a.useCallback)(()=>{K(!1)},[]),ye=(0,a.useCallback)(()=>{H(!1)},[]),_e=(0,a.useCallback)(()=>{n(t)},[t,n]),ve=(0,a.useCallback)(()=>{const t={...e,permissions:{...e.permissions,...(0,s.generateCaip25Caveat)(D,ce,te)}};N(t)},[e,D,ce,te,N]),Ee=(0,E.transformOriginToTitle)(I.origin),be=(0,w.useOriginTrustSignals)(I.origin);return a.default.createElement(m.Page,{"data-testid":"connect-page",className:"main-container connect-page",backgroundColor:g.BackgroundColor.backgroundDefault},a.default.createElement(m.Header,{paddingTop:8,paddingBottom:4},a.default.createElement(p.Box,{display:g.Display.Flex,justifyContent:g.JustifyContent.center,marginBottom:8},I.iconUrl?a.default.createElement(a.default.Fragment,null,a.default.createElement(p.Box,{style:{filter:"blur(16px) brightness(1.1)",position:"absolute"}},a.default.createElement(p.AvatarFavicon,{backgroundColor:g.BackgroundColor.backgroundMuted,size:p.AvatarFaviconSize.Xl,src:I.iconUrl,name:Ee})),a.default.createElement(p.AvatarFavicon,{backgroundColor:g.BackgroundColor.backgroundMuted,size:p.AvatarFaviconSize.Lg,src:I.iconUrl,name:Ee,style:{zIndex:1,background:"transparent"}})):a.default.createElement(p.AvatarBase,{size:p.AvatarBaseSize.Lg,display:g.Display.Flex,alignItems:g.AlignItems.center,justifyContent:g.JustifyContent.center,color:g.TextColor.textAlternative,style:{borderWidth:"0px"},backgroundColor:g.BackgroundColor.backgroundMuted},(0,E.isIpAddress)(Ee)?"?":(0,E.getAvatarFallbackLetter)(Ee))),a.default.createElement(p.Box,{display:g.Display.Flex,alignItems:g.AlignItems.center,justifyContent:g.JustifyContent.center,gap:2,marginBottom:1},a.default.createElement(p.Text,{variant:g.TextVariant.headingLg,style:{wordBreak:"break-word",whiteSpace:"normal"}},Ee),be.state===S.TrustSignalDisplayState.Verified&&a.default.createElement(l.Tooltip,{title:R("alertReasonOriginTrustSignalVerified"),position:"bottom",style:{display:"flex"}},a.default.createElement(p.Icon,{name:p.IconName.VerifiedFilled,color:g.IconColor.infoDefault,size:p.IconSize.Sm}))),a.default.createElement(p.Box,{display:g.Display.Flex,justifyContent:g.JustifyContent.center},a.default.createElement(p.Text,{color:g.TextColor.textAlternative},R("connectionDescription")))),a.default.createElement(m.Content,{paddingLeft:4,paddingRight:4,backgroundColor:g.BackgroundColor.transparent},a.default.createElement(_.Tabs,{defaultActiveTabKey:"accounts"},a.default.createElement(_.Tab,{name:R("accounts"),tabKey:"accounts","data-testid":"accounts-tab",className:"flex-1"},a.default.createElement(p.Box,{marginTop:4},a.default.createElement(p.Box,{backgroundColor:g.BackgroundColor.backgroundDefault,borderRadius:g.BorderRadius.XL,style:{overflow:"auto",maxHeight:"268px",scrollbarColor:"var(--color-icon-muted) transparent"}},pe.map(e=>a.default.createElement(v.AccountListItem,{showConnectedStatus:!1,account:e,key:e.caipAccountId,selected:!1})),0===pe.length&&!F&&a.default.createElement(p.Box,{className:"connect-page__accounts-empty",display:g.Display.Flex,justifyContent:g.JustifyContent.center,alignItems:g.AlignItems.center,borderRadius:g.BorderRadius.XL},a.default.createElement(p.ButtonLink,{onClick:fe,"data-testid":"edit"},R("selectAccountToConnect")))),pe.length>0&&a.default.createElement(p.Box,{marginTop:4,display:g.Display.Flex,justifyContent:g.JustifyContent.center},a.default.createElement(p.ButtonLink,{onClick:fe,"data-testid":"edit"},R("editAccounts"))),F&&!me&&a.default.createElement(p.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,justifyContent:g.JustifyContent.center,alignItems:g.AlignItems.center,marginTop:4,gap:2},a.default.createElement(p.Text,{variant:g.TextVariant.bodyMd,color:g.TextColor.textAlternative,textAlign:g.TextAlign.Center},0===pe.length?R("solanaAccountRequired"):R("solanaAccountRequested")),a.default.createElement(p.Button,{variant:p.ButtonVariant.Secondary,width:g.BlockSize.Full,size:p.ButtonSize.Lg,onClick:ge,"data-testid":"create-solana-account"},R("createSolanaAccount"))),J&&a.default.createElement(k.CreateSolanaAccountModal,{onClose:he}),G&&a.default.createElement(v.EditAccountsModal,{accounts:oe,defaultSelectedAccountAddresses:ce,onClose:ye,onSubmit:de}))),a.default.createElement(_.Tab,{name:R("permissions"),tabKey:"permissions","data-testid":"permissions-tab",disabled:F&&!me&&0===pe.length,className:"flex-1"},a.default.createElement(p.Box,{marginTop:4},a.default.createElement(f.SiteCell,{nonTestNetworks:W,testNetworks:z,accounts:oe,onSelectAccountAddresses:de,onSelectChainIds:ae,selectedAccountAddresses:ce,selectedChainIds:te,isConnectFlow:!0}))))),a.default.createElement(m.Footer,null,a.default.createElement(p.Box,{display:g.Display.Flex,flexDirection:g.FlexDirection.Column,gap:4,width:g.BlockSize.Full},a.default.createElement(p.Box,{display:g.Display.Flex,gap:4,width:g.BlockSize.Full},a.default.createElement(p.Button,{block:!0,variant:p.ButtonVariant.Secondary,size:p.ButtonSize.Lg,"data-testid":"cancel-btn",onClick:_e},R("cancel")),a.default.createElement(p.Button,{block:!0,"data-testid":"confirm-btn",size:p.ButtonSize.Lg,onClick:ve,disabled:0===ce.length||0===te.length},R("connect"))))))}}}},{package:"$root$",file:"ui/pages/permissions-connect/connect-page/connect-page.tsx"}],[7719,{"../../../helpers/utils/util":6959,"@metamask/chain-agnostic-permission":1359,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getCaip25CaveatValueFromPermissions=function(e){var t;return(null==e||null===(t=e[o.Caip25EndowmentPermissionName])||void 0===t||null===(t=t.caveats)||void 0===t||null===(t=t.find(e=>e.type===o.Caip25CaveatType))||void 0===t?void 0:t.value)??{optionalScopes:{},requiredScopes:{},sessionProperties:{},isMultichainOrigin:!1}},n.getCaip25PermissionsResponse=function(e,t,n){const a=(0,o.setPermittedEthChainIds)(e,n),s=(0,o.setEthAccounts)(a,t);return{[o.Caip25EndowmentPermissionName]:{caveats:[{type:o.Caip25CaveatType,value:s}]}}},n.getDefaultAccounts=function(e,t,n){const o=[],r=new Set;t.forEach(t=>{const{chain:{namespace:n}}=(0,a.parseCaipAccountId)(t.caipAccountId);e.includes(n)&&(o.push(t),r.add(n))});const i=e.filter(e=>!r.has(e));if(i.length>0){const e=(0,s.sortSelectedInternalAccounts)(n);for(const t of i){const n=e.find(e=>{const{chain:{namespace:n}}=(0,a.parseCaipAccountId)(e.caipAccountId);return n===t});n&&o.push(n)}}return o};var a=e("@metamask/utils"),o=e("@metamask/chain-agnostic-permission"),s=e("../../../helpers/utils/util")}}},{package:"$root$",file:"ui/pages/permissions-connect/connect-page/utils.ts"}],[7720,{"./permissions-connect.container":7722},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./permissions-connect.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/index.js"}],[7721,{"../../../app/scripts/lib/multichain/address":282,"../../../shared/constants/time":5635,"../../../shared/lib/multichain/scope-utils":5707,"../../components/app/permission-page-container":6023,"../../components/app/snaps/snap-authorship-header/snap-authorship-header":6077,"../../components/component-library":6325,"../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-account-wrapper":6433,"../../components/multichain-accounts/state2-wrapper/state2-wrapper":6440,"../../helpers/constants/routes":6904,"../../hooks/useAccountGroupsForPermissions":7024,"../multichain-accounts/multichain-accounts-connect-page/multichain-accounts-connect-page":7647,"../routes/utils":7740,"./choose-account":7717,"./connect-page/connect-page":7718,"./connect-page/utils":7719,"./redirect":7723,"./snaps/snap-install":7725,"./snaps/snap-result":7727,"./snaps/snap-update":7729,"./snaps/snaps-connect":7731,"@metamask/chain-agnostic-permission":1359,"@metamask/permission-controller":2329,"@metamask/rpc-errors":2480,"@metamask/snaps-utils":2781,"@metamask/utils":2914,"prop-types":4893,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=M(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-router-dom-v5-compat"),r=e("@metamask/rpc-errors"),i=e("@metamask/permission-controller"),l=e("@metamask/snaps-utils"),c=e("@metamask/chain-agnostic-permission"),u=e("@metamask/utils"),d=e("../routes/utils"),p=e("../../../app/scripts/lib/multichain/address"),m=e("../../../shared/constants/time"),f=e("../../helpers/constants/routes"),g=M(e("../../components/app/permission-page-container")),h=e("../../components/component-library"),y=M(e("../../components/app/snaps/snap-authorship-header/snap-authorship-header")),_=e("../../components/multichain-accounts/state2-wrapper/state2-wrapper"),v=e("../multichain-accounts/multichain-accounts-connect-page/multichain-accounts-connect-page"),E=e("../../hooks/useAccountGroupsForPermissions"),b=e("../../../shared/lib/multichain/scope-utils"),x=e("../../components/multichain-accounts/permissions/multichain-edit-accounts-page/multichain-edit-account-wrapper"),k=M(e("./choose-account")),T=M(e("./redirect")),w=M(e("./snaps/snaps-connect")),S=M(e("./snaps/snap-install")),C=M(e("./snaps/snap-update")),N=M(e("./snaps/snap-result")),I=e("./connect-page/connect-page"),R=e("./connect-page/utils");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function M(e){return e&&e.__esModule?e:{default:e}}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const P=1200*m.MILLISECOND;function D(e,t){const n=(0,R.getCaip25CaveatValueFromPermissions)(t),a=(0,c.getEthAccounts)(n);return a.length>0?new Set(a.map(e=>e.toLowerCase()).filter(p.isEthAddress)):new Set((0,p.isEthAddress)(e)?[e]:[])}function B(e){const t=(0,R.getCaip25CaveatValueFromPermissions)(e);return(0,c.getPermittedEthChainIds)(t)}class L extends o.Component{constructor(...e){var t;super(...e),A(this,"state",{redirecting:!1,selectedAccountAddresses:D(this.props.currentAddress,null===(t=this.props.permissionsRequest)||void 0===t?void 0:t.permissions),permissionsApproved:null,origin:this.props.origin,targetSubjectMetadata:this.props.targetSubjectMetadata||{},snapsInstallPrivacyWarningShown:this.props.snapsInstallPrivacyWarningShown}),A(this,"selectAccounts",e=>{const{confirmPermissionPath:t,requestType:n,snapsConnectPath:a,snapInstallPath:o,snapUpdatePath:s,snapResultPath:r,navigate:i}=this.props;this.setState({selectedAccountAddresses:e},()=>{switch(n){case"wallet_installSnap":i(o);break;case"wallet_updateSnap":i(s);break;case"wallet_installSnapResult":i(r);break;case"wallet_connectSnaps":i(a,{replace:!0});break;default:i(t)}})}),A(this,"cancelPermissionsRequest",async e=>{const{rejectPermissionsRequest:t}=this.props;e&&(await t(e),this.redirect(!1))}),A(this,"renderSnapChooseAccountState1",()=>{const{accounts:e,nativeCurrency:t,showNewAccountModal:n,newAccountNumber:a,addressLastConnectedMap:s,permissionsRequestId:r,targetSubjectMetadata:i}=this.props,{selectedAccountAddresses:l}=this.state;return o.default.createElement(k.default,{accounts:e,nativeCurrency:t,selectAccounts:e=>this.selectAccounts(e),selectNewAccountViaModal:e=>{n({onCreateNewAccount:t=>e(t),newAccountNumber:a})},addressLastConnectedMap:s,cancelPermissionsRequest:e=>this.cancelPermissionsRequest(e),permissionsRequestId:r,selectedAccountAddresses:l,targetSubjectMetadata:i})}),A(this,"renderSnapChooseAccountState2",()=>{const{permissionsRequestId:e,accountGroups:t,permissionsRequest:n}=this.props,{t:a}=this.context,s=(0,R.getCaip25CaveatValueFromPermissions)(null==n?void 0:n.permissions),r=[],i=(0,c.getAllScopesFromCaip25CaveatValue)(s).filter(e=>{const{namespace:t}=(0,u.parseCaipChainId)(e);return t!==u.KnownCaipNamespace.Wallet}),l=(0,c.getAllNamespacesFromCaip25CaveatValue)(s);return i.length>0&&i.forEach(e=>{r.push(e)}),l.includes(u.KnownCaipNamespace.Eip155)&&r.push(`${u.KnownCaipNamespace.Eip155}:0`),o.default.createElement(x.MultichainEditAccountsPageWrapper,{title:a("connectWithMetaMask"),permissions:null==n?void 0:n.permissions,onSubmit:e=>{const n=t.filter(t=>e.includes(t.id)&&(0,E.supportsChainIds)(t,r)),a=(0,b.getCaip25AccountIdsFromAccountGroupAndScope)(n,r).map(e=>(0,u.parseCaipAccountId)(e).address);this.selectAccounts(new Set(a))},onClose:()=>this.cancelPermissionsRequest(e)})}),A(this,"renderConnectPageState1",()=>{const e={rejectPermissionsRequest:e=>this.cancelPermissionsRequest(e),activeTabOrigin:this.state.origin,request:this.props.permissionsRequest||{},permissionsRequestId:this.props.permissionsRequestId,approveConnection:this.approveConnection,targetSubjectMetadata:this.props.targetSubjectMetadata};return o.default.createElement(I.ConnectPage,e)}),A(this,"renderConnectPageState2",()=>{const e={rejectPermissionsRequest:e=>this.cancelPermissionsRequest(e),activeTabOrigin:this.state.origin,request:this.props.permissionsRequest||{},permissionsRequestId:this.props.permissionsRequestId,approveConnection:this.approveConnection,targetSubjectMetadata:this.props.targetSubjectMetadata};return o.default.createElement(v.MultichainAccountsConnectPage,e)}),A(this,"approveConnection",(...e)=>{const{approvePermissionsRequest:t}=this.props;t(...e),this.redirect(!0)})}componentDidMount(){const{connectPath:e,confirmPermissionPath:t,snapsConnectPath:n,snapInstallPath:a,snapUpdatePath:o,snapResultPath:s,requestType:r,getRequestAccountTabIds:i,permissionsRequest:l,navigate:c,location:u,isRequestingAccounts:d}=this.props;if(i(),l){if(u.pathname===e&&!d)switch(r){case"wallet_installSnap":c(a,{replace:!0});break;case"wallet_updateSnap":c(o,{replace:!0});break;case"wallet_installSnapResult":c(s,{replace:!0});break;case"wallet_connectSnaps":c(n,{replace:!0});break;default:c(t,{replace:!0})}}else c(f.DEFAULT_ROUTE,{replace:!0})}componentDidUpdate(e){var t;const{permissionsRequest:n,lastConnectedInfo:a,targetSubjectMetadata:o}=this.props,{redirecting:s,origin:r}=this.state;if(null!=o&&o.origin&&(null===(t=e.targetSubjectMetadata)||void 0===t?void 0:t.origin)!==(null==o?void 0:o.origin)&&this.setState({targetSubjectMetadata:o}),!n&&e.permissionsRequest&&!s){var i,l;const t=((null===(i=a[r])||void 0===i?void 0:i.lastApproved)||0)>((null===(l=e.lastConnectedInfo[r])||void 0===l?void 0:l.lastApproved)||0);this.redirect(t)}}redirect(e){const{navigate:t,permissionsRequest:n}=this.props;let a=!0;a=!((null==n?void 0:n.permissions)&&Object.keys(n.permissions).includes("wallet_snap")),this.setState({redirecting:a,permissionsApproved:e}),a&&e?setTimeout(()=>t(f.DEFAULT_ROUTE),P):t(f.DEFAULT_ROUTE)}goBack(){const{navigate:e,connectPath:t}=this.props;e(t)}renderTopBar(e){const{targetSubjectMetadata:t}=this.state;return o.default.createElement(h.Box,{style:{boxShadow:t.subjectType===i.SubjectType.Snap&&"var(--shadow-size-lg) var(--color-shadow-default)"}},t.subjectType===i.SubjectType.Snap&&o.default.createElement(y.default,{snapId:t.origin,boxShadow:"none",onCancel:()=>{this.cancelPermissionsRequest(e)}}))}render(){var e;const{accounts:t,permissionsRequest:n,permissionsRequestId:a,connectPath:i,hideTopBar:c,targetSubjectMetadata:u,requestState:p,approvePendingApproval:m,rejectPendingApproval:h,setSnapsInstallPrivacyWarningShownStatus:y,approvePermissionsRequest:v,navigate:E,location:b}=this.props,{selectedAccountAddresses:x,permissionsApproved:k,redirecting:I,snapsInstallPrivacyWarningShown:R}=this.state,O=(0,l.isSnapId)(null==n||null===(e=n.metadata)||void 0===e?void 0:e.origin),M=(0,d.getRelativeLocationForNestedRoutes)(b,i);return o.default.createElement("div",{className:"permissions-connect"},!c&&this.renderTopBar(a),I&&k?o.default.createElement(T.default,{subjectMetadata:u}):o.default.createElement(s.Routes,{location:M},o.default.createElement(s.Route,{path:"/",element:(()=>O?o.default.createElement(_.State2Wrapper,{state1Component:this.renderSnapChooseAccountState1,state2Component:this.renderSnapChooseAccountState2}):o.default.createElement(_.State2Wrapper,{state1Component:this.renderConnectPageState1,state2Component:this.renderConnectPageState2}))()}),o.default.createElement(s.Route,{path:f.CONNECT_CONFIRM_PERMISSIONS_ROUTE,element:o.default.createElement(g.default,{request:n||{},approvePermissionsRequest:(...e)=>{v(...e),this.redirect(!0)},rejectPermissionsRequest:e=>this.cancelPermissionsRequest(e),selectedAccounts:t.filter(e=>x.has(e.address)),requestedChainIds:B(null==n?void 0:n.permissions),targetSubjectMetadata:u,navigate:E,connectPath:i,snapsInstallPrivacyWarningShown:R,setSnapsInstallPrivacyWarningShownStatus:y})}),o.default.createElement(s.Route,{path:f.CONNECT_SNAPS_CONNECT_ROUTE,element:o.default.createElement(w.default,{request:n||{},approveConnection:this.approveConnection,rejectConnection:e=>this.cancelPermissionsRequest(e),targetSubjectMetadata:u,snapsInstallPrivacyWarningShown:R,setSnapsInstallPrivacyWarningShownStatus:y})}),o.default.createElement(s.Route,{path:f.CONNECT_SNAP_INSTALL_ROUTE,element:o.default.createElement(S.default,{request:n||{},requestState:p||{},approveSnapInstall:e=>{m(e,{...n,permissions:p.permissions,approvedAccounts:[...x]}),this.setState({permissionsApproved:!0})},rejectSnapInstall:e=>{h(e,(0,r.serializeError)(r.providerErrors.userRejectedRequest())),this.setState({permissionsApproved:!0})},targetSubjectMetadata:u})}),o.default.createElement(s.Route,{path:f.CONNECT_SNAP_UPDATE_ROUTE,element:o.default.createElement(C.default,{request:n||{},requestState:p||{},approveSnapUpdate:e=>{m(e,{...n,permissions:p.permissions,approvedAccounts:[...x]}),this.setState({permissionsApproved:!0})},rejectSnapUpdate:e=>{h(e,(0,r.serializeError)(r.providerErrors.userRejectedRequest())),this.setState({permissionsApproved:!1})},targetSubjectMetadata:u})}),o.default.createElement(s.Route,{path:f.CONNECT_SNAP_RESULT_ROUTE,element:o.default.createElement(N.default,{request:n||{},requestState:p||{},approveSnapResult:e=>{m(e),this.setState({permissionsApproved:!0})},targetSubjectMetadata:u})})))}}n.default=L,A(L,"propTypes",{approvePermissionsRequest:a.default.func.isRequired,rejectPermissionsRequest:a.default.func.isRequired,getRequestAccountTabIds:a.default.func.isRequired,accounts:a.default.arrayOf(a.default.shape({id:a.default.string.isRequired,address:a.default.string.isRequired,metadata:a.default.shape({name:a.default.string.isRequired,snap:a.default.shape({id:a.default.string.isRequired,name:a.default.string,enabled:a.default.bool}),keyring:a.default.shape({type:a.default.string.isRequired}).isRequired}).isRequired,addressLabel:a.default.string.isRequired,label:a.default.string.isRequired,balance:a.default.string.isRequired})).isRequired,accountGroups:a.default.arrayOf(a.default.shape({id:a.default.string.isRequired,accounts:a.default.arrayOf(a.default.object.isRequired)})).isRequired,currentAddress:a.default.string.isRequired,origin:a.default.string,showNewAccountModal:a.default.func.isRequired,newAccountNumber:a.default.number.isRequired,nativeCurrency:a.default.string,permissionsRequest:a.default.object,addressLastConnectedMap:a.default.object.isRequired,lastConnectedInfo:a.default.object.isRequired,permissionsRequestId:a.default.string,navigate:a.default.func.isRequired,location:a.default.object.isRequired,connectPath:a.default.string.isRequired,confirmPermissionPath:a.default.string.isRequired,requestType:a.default.string.isRequired,snapsConnectPath:a.default.string.isRequired,snapInstallPath:a.default.string.isRequired,snapUpdatePath:a.default.string.isRequired,snapResultPath:a.default.string.isRequired,requestState:a.default.object.isRequired,approvePendingApproval:a.default.func.isRequired,rejectPendingApproval:a.default.func.isRequired,setSnapsInstallPrivacyWarningShownStatus:a.default.func.isRequired,snapsInstallPrivacyWarningShown:a.default.bool.isRequired,hideTopBar:a.default.bool,targetSubjectMetadata:a.default.shape({extensionId:a.default.string,iconUrl:a.default.string,name:a.default.string,origin:a.default.string,subjectType:a.default.string}),isRequestingAccounts:a.default.bool.isRequired}),A(L,"defaultProps",{origin:"",nativeCurrency:"",permissionsRequest:undefined,permissionsRequestId:""}),A(L,"contextTypes",{t:a.default.func})}}},{package:"$root$",file:"ui/pages/permissions-connect/permissions-connect.component.js"}],[7722,{"../../ducks/metamask/metamask":6883,"../../helpers/constants/routes":6904,"../../helpers/utils/util":6959,"../../selectors":7886,"../../selectors/multichain-accounts/account-tree":7890,"../../store/actions":7916,"./permissions-connect.component":7721,"@metamask/chain-agnostic-permission":1359,"@metamask/keyring-api":2100,"@metamask/permission-controller":2329,"@metamask/snaps-rpc-methods":2611,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=e("@metamask/permission-controller"),s=e("@metamask/snaps-rpc-methods"),r=e("react-redux"),i=e("@metamask/keyring-api"),l=e("@metamask/chain-agnostic-permission"),c=e("../../selectors"),u=e("../../ducks/metamask/metamask"),d=e("../../helpers/utils/util"),p=e("../../store/actions"),m=e("../../helpers/constants/routes"),f=e("../../selectors/multichain-accounts/account-tree"),g=(a=e("./permissions-connect.component"))&&a.__esModule?a:{default:a};const h=(0,r.connect)((e,t)=>{var n,a,r;const{match:{params:{id:p}},location:{pathname:g}}=t;let h=(0,c.getPermissionsRequests)(e);h=[...h,...(0,c.getSnapInstallOrUpdateRequests)(e)];const{address:y}=(0,c.getSelectedInternalAccount)(e),_=h.find(e=>e.metadata.id===p),{metadata:v={},diff:E={}}=_||{},{origin:b}=v,x=(0,u.getNativeCurrency)(e),k=Boolean(null==E?void 0:E.permissionDiffMap),T=Boolean((null==_||null===(n=_.permissions)||void 0===n?void 0:n[l.Caip25EndowmentPermissionName])&&!k),w=(0,c.getTargetSubjectMetadata)(e,b)??{name:(0,d.getURLHostName)(b)||b,origin:b,iconUrl:null,extensionId:null,subjectType:o.SubjectType.Unknown};let S=(0,c.getRequestType)(e,p);_&&1===Object.keys(_.permissions||{}).length&&null!==(a=_.permissions)&&void 0!==a&&a[s.WALLET_SNAP_PERMISSION_KEY]&&(S="wallet_connectSnaps");const C=(0,c.getRequestState)(e,p)||{},N=(0,c.getAccountsWithLabels)(e).filter(e=>(0,i.isEvmAccountType)(e.type)),I=(0,c.getLastConnectedInfo)(e)||{},R=(null===(r=I[b])||void 0===r?void 0:r.accounts)||{};Object.keys(R).forEach(e=>{R[e]=(0,d.formatDate)(R[e],"yyyy-MM-dd")});const O=`${m.CONNECT_ROUTE}/${p}`,M=`${O}${m.CONNECT_CONFIRM_PERMISSIONS_ROUTE}`,A=`${O}${m.CONNECT_SNAPS_CONNECT_ROUTE}`,P=`${O}${m.CONNECT_SNAP_INSTALL_ROUTE}`,D=`${O}${m.CONNECT_SNAP_UPDATE_ROUTE}`,B=`${O}${m.CONNECT_SNAP_RESULT_ROUTE}`,L=g===P||g===D||g===B;let F=1+T;F+=L,F=F.toString();let j="";if(g===O)j="1";else if(g===M)j=T?"2":"1";else if(L)j=T?"3":"2";else{if(g!==A)throw new Error("Incorrect path for permissions-connect component");j=1}return{isRequestingAccounts:T,requestType:S,snapsConnectPath:A,snapInstallPath:P,snapUpdatePath:D,snapResultPath:B,confirmPermissionPath:M,requestState:C,hideTopBar:L,snapsInstallPrivacyWarningShown:(0,c.getSnapsInstallPrivacyWarningShown)(e),permissionsRequest:_,permissionsRequestId:p,accounts:N,accountGroups:(0,f.getAccountGroupWithInternalAccounts)(e),currentAddress:y,origin:b,newAccountNumber:N.length+1,nativeCurrency:x,addressLastConnectedMap:R,lastConnectedInfo:I,connectPath:O,totalPages:F,page:j,targetSubjectMetadata:w}},e=>({approvePermissionsRequest:t=>e((0,p.approvePermissionsRequest)(t)),rejectPermissionsRequest:t=>e((0,p.rejectPermissionsRequest)(t)),approvePendingApproval:(t,n)=>e((0,p.resolvePendingApproval)(t,n)),rejectPendingApproval:(t,n)=>e((0,p.rejectPendingApproval)(t,n)),setSnapsInstallPrivacyWarningShownStatus:t=>{e((0,p.setSnapsInstallPrivacyWarningShownStatus)(t))},showNewAccountModal:({onCreateNewAccount:t,newAccountNumber:n})=>e((0,p.showModal)({name:"NEW_ACCOUNT",onCreateNewAccount:t,newAccountNumber:n})),getRequestAccountTabIds:()=>e((0,p.getRequestAccountTabIds)())}))(g.default);n.default=h}}},{package:"$root$",file:"ui/pages/permissions-connect/permissions-connect.container.js"}],[7723,{"./permissions-redirect.component":7724},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./permissions-redirect.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/redirect/index.js"}],[7724,{"../../../components/app/permissions-connect-footer":6029,"../../../components/component-library":6325,"../../../contexts/i18n":6850,"../../../helpers/constants/design-system":6899,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=d;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=c(e("prop-types")),s=e("../../../helpers/constants/design-system"),r=e("../../../contexts/i18n"),i=e("../../../components/component-library"),l=c(e("../../../components/app/permissions-connect-footer"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d({subjectMetadata:e}){const t=(0,a.useContext)(r.I18nContext),[n,o]=(0,a.useState)(e);return(0,a.useEffect)(()=>{e&&e.origin&&o(e)},[e]),a.default.createElement(i.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,width:s.BlockSize.Full,height:s.BlockSize.Full,justifyContent:s.JustifyContent.spaceBetween},a.default.createElement(i.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.center,width:s.BlockSize.Full,height:s.BlockSize.Full,backgroundColor:s.BackgroundColor.backgroundDefault,borderRadius:s.BorderRadius.XS,border:`1px solid ${s.BorderColor.borderMuted}`,boxShadow:"var(--shadow-size-lg) var(--color-shadow-default)"},a.default.createElement(i.Box,{display:s.Display.Flex,marginBottom:4},a.default.createElement(i.Text,{variant:s.TextVariant.headingMd},t("connecting"))),a.default.createElement(i.Box,{display:s.Display.Flex,backgroundColor:s.BackgroundColor.infoMuted,borderRadius:s.BorderRadius.pill,padding:2},a.default.createElement(i.AvatarToken,{src:n.iconUrl,name:n.name,size:i.AvatarTokenSize.Lg}),a.default.createElement(i.Box,{display:s.Display.Flex,alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.center,paddingLeft:4,paddingRight:4},a.default.createElement(i.Icon,{name:i.IconName.Confirmation,size:i.IconSize.Xl,color:s.IconColor.infoDefault})),a.default.createElement(i.AvatarToken,{src:"/images/logo/metamask-fox.svg",size:i.AvatarTokenSize.Lg,name:"metamask-fox"}))),a.default.createElement(i.Box,{backgroundColor:s.BackgroundColor.backgroundDefault,padding:4},a.default.createElement(i.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column},a.default.createElement(l.default,null),a.default.createElement(i.Box,{display:s.Display.Flex,paddingTop:4,width:s.BlockSize.Full,justifyContent:s.JustifyContent.center,alignItems:s.AlignItems.center},a.default.createElement(i.Button,{variant:i.ButtonVariant.Secondary,size:i.ButtonSize.Lg,width:s.BlockSize.Full,marginRight:2,disabled:!0},t("back")),a.default.createElement(i.Button,{variant:i.ButtonVariant.Primary,size:i.ButtonSize.Lg,width:s.BlockSize.Full,marginLeft:2,disabled:!0,loading:!0})))))}d.propTypes={subjectMetadata:o.default.shape({extensionId:o.default.string,iconUrl:o.default.string,subjectType:o.default.string,name:o.default.string.isRequired,origin:o.default.string.isRequired})}}}},{package:"$root$",file:"ui/pages/permissions-connect/redirect/permissions-redirect.component.js"}],[7725,{"./snap-install":7726},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snap-install"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-install/index.js"}],[7726,{"../../../../components/app/permission-connect-header":6021,"../../../../components/app/snaps/install-error/install-error":6068,"../../../../components/app/snaps/snap-authorship-header":6076,"../../../../components/app/snaps/snap-install-warning":6089,"../../../../components/app/snaps/snap-permissions-list":6101,"../../../../components/component-library":6325,"../../../../components/ui/page-container":6798,"../../../../components/ui/pulse-loader/pulse-loader":6807,"../../../../helpers/constants/design-system":6899,"../../../../helpers/utils/util":6959,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useOriginMetadata":7065,"../../../../hooks/useScrollRequired":7070,"../../../../selectors":7886,"../util":7733,"@metamask/snaps-utils":2781,"prop-types":4893,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=T;var a=k(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),r=e("@metamask/snaps-utils"),i=e("../../../../components/ui/page-container"),l=e("../../../../hooks/useI18nContext"),c=k(e("../../../../components/app/snaps/snap-install-warning")),u=e("../../../../helpers/constants/design-system"),d=e("../util"),p=k(e("../../../../components/ui/pulse-loader/pulse-loader")),m=k(e("../../../../components/app/snaps/snap-authorship-header")),f=e("../../../../components/component-library"),g=k(e("../../../../components/app/snaps/snap-permissions-list")),h=e("../../../../hooks/useScrollRequired"),y=k(e("../../../../components/app/snaps/install-error/install-error")),_=e("../../../../hooks/useOriginMetadata"),v=e("../../../../selectors"),E=e("../../../../helpers/utils/util"),b=k(e("../../../../components/app/permission-connect-header"));function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function k(e){return e&&e.__esModule?e:{default:e}}function T({request:e,requestState:t,approveSnapInstall:n,rejectSnapInstall:a,targetSubjectMetadata:x}){var k,T,w;const S=(0,l.useI18nContext)(),C=(0,_.useOriginMetadata)(null==e||null===(k=e.metadata)||void 0===k?void 0:k.dappOrigin)||{},{origin:N,iconUrl:I}=C,[R,O]=(0,o.useState)(!1),M=(0,s.useSelector)(v.getSnapsMetadata),[A,P]=(0,o.useState)(!1),{isScrollable:D,hasScrolledToBottom:B,scrollToBottom:L,ref:F,onScroll:j}=(0,h.useScrollRequired)([t]),U=(0,o.useCallback)(()=>a(e.metadata.id),[e,a]),W=(0,o.useCallback)(()=>n(e.metadata.id),[e,n]),{name:z}=(0,s.useSelector)(e=>(0,v.getSnapMetadata)(e,x.origin)),$=!t.loading&&t.error,q=t.loading,V=(0,r.isSnapId)(null==e||null===(T=e.metadata)||void 0===T?void 0:T.dappOrigin),G=(0,d.getSnapInstallWarnings)((null==t?void 0:t.permissions)??{},S,z,(0,E.getSnapName)(M)),H=G.length>0;return o.default.createElement(f.Box,{className:"snap-install",display:u.Display.Flex,justifyContent:u.JustifyContent.spaceBetween,height:u.BlockSize.Full,borderStyle:u.BorderStyle.none,flexDirection:u.FlexDirection.Column,backgroundColor:u.BackgroundColor.backgroundAlternative},!q&&!$||V?o.default.createElement(m.default,{snapId:q&&V?null==e||null===(w=e.metadata)||void 0===w?void 0:w.dappOrigin:x.origin,onCancel:U}):o.default.createElement(b.default,{origin:N,iconUrl:I}),o.default.createElement(f.Box,{ref:q||$?undefined:F,onScroll:j,className:"snap-install__content",style:{overflowY:"auto",flex:!q&&!$&&"1"},paddingLeft:4,paddingRight:4},q&&o.default.createElement(f.Box,{display:u.Display.Flex,className:"snap-install__content__loader-container",flexDirection:u.FlexDirection.Column,alignItems:u.AlignItems.center,justifyContent:u.JustifyContent.center},o.default.createElement(p.default,null)),$&&o.default.createElement(y.default,{iconName:f.IconName.Warning,title:S("connectionFailed"),description:S("connectionFailedDescription",[o.default.createElement(f.Text,{as:"span",key:"1",fontWeight:u.FontWeight.Medium},z)]),error:t.error}),!$&&!q&&o.default.createElement(o.default.Fragment,null,o.default.createElement(f.Text,{variant:u.TextVariant.headingMd,paddingTop:4,paddingBottom:2,textAlign:"center"},S("installRequest")),o.default.createElement(f.Text,{className:"snap-install__content__permission-description",paddingBottom:4,paddingLeft:4,paddingRight:4,textAlign:u.TextAlign.Center},S("snapInstallRequest",[o.default.createElement(f.Text,{as:"span",key:"2",variant:u.TextVariant.bodyMd,fontWeight:u.FontWeight.Medium},z)])),o.default.createElement(f.Box,{display:u.Display.Flex,backgroundColor:u.BackgroundColor.backgroundDefault,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2,borderRadius:u.BorderRadius.XL},o.default.createElement(g.default,{snapId:x.origin,snapName:z,permissions:t.permissions||{},connections:t.connections||{},onShowAllPermissions:()=>{P(!0)}})),o.default.createElement(f.Box,{className:"snap-install__scroll-button-area"},!D||B||A?null:o.default.createElement(f.AvatarIcon,{className:"snap-install__scroll-button","data-testid":"snap-install-scroll",iconName:f.IconName.Arrow2Down,backgroundColor:u.BackgroundColor.infoDefault,color:u.IconColor.primaryInverse,onClick:L,style:{cursor:"pointer"}})))),o.default.createElement(f.Box,{className:"snap-install__footer",display:u.Display.Flex,alignItems:u.AlignItems.center,flexDirection:u.FlexDirection.Column,backgroundColor:u.BackgroundColor.backgroundAlternative},o.default.createElement(i.PageContainerFooter,{cancelButtonType:"default",hideCancel:$,disabled:q||!$&&D&&!B,onCancel:U,cancelText:S("cancel"),onSubmit:()=>{!$&&H?O(!0):$?U():W()},submitText:S($?"ok":q?"connect":"confirm")})),R&&o.default.createElement(c.default,{onCancel:()=>O(!1),onSubmit:W,warnings:G,snapName:z}))}T.propTypes={request:a.default.object.isRequired,requestState:a.default.object.isRequired,approveSnapInstall:a.default.func.isRequired,rejectSnapInstall:a.default.func.isRequired,targetSubjectMetadata:a.default.shape({iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,sourceCode:a.default.string,version:a.default.string}).isRequired}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-install/snap-install.js"}],[7727,{"./snap-result":7728},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snap-result"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-result/index.js"}],[7728,{"../../../../components/app/snaps/install-error/install-error":6068,"../../../../components/app/snaps/snap-authorship-header":6076,"../../../../components/component-library":6325,"../../../../components/ui/box/box":6724,"../../../../components/ui/page-container":6798,"../../../../components/ui/pulse-loader/pulse-loader":6807,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../selectors":7886,"prop-types":4893,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=y;var a=h(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),r=e("../../../../components/ui/page-container"),i=e("../../../../hooks/useI18nContext"),l=h(e("../../../../components/ui/box/box")),c=e("../../../../helpers/constants/design-system"),u=e("../../../../components/component-library"),d=h(e("../../../../components/ui/pulse-loader/pulse-loader")),p=h(e("../../../../components/app/snaps/install-error/install-error")),m=h(e("../../../../components/app/snaps/snap-authorship-header")),f=e("../../../../selectors");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}function y({request:e,requestState:t,approveSnapResult:n,targetSubjectMetadata:a}){const g=(0,i.useI18nContext)(),h=(0,o.useCallback)(()=>n(e.metadata.id),[e,n]),y=!t.loading&&t.error,_=t.loading,{name:v}=(0,s.useSelector)(e=>(0,f.getSnapMetadata)(e,a.origin));return o.default.createElement(l.default,{className:"page-container snap-result",justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,borderStyle:c.BorderStyle.none,flexDirection:c.FlexDirection.Column,backgroundColor:c.BackgroundColor.backgroundAlternative},o.default.createElement(m.default,{snapId:a.origin,onCancel:h}),o.default.createElement(l.default,{className:"snap-result__content",paddingLeft:4,paddingRight:4,alignItems:c.AlignItems.center,flexDirection:c.FlexDirection.Column,backgroundColor:c.BackgroundColor.backgroundAlternative,height:c.BlockSize.Full,justifyContent:c.JustifyContent.center},_&&o.default.createElement(l.default,{className:"snap-result__content__loader-container",display:c.Display.Flex,flexDirection:c.FlexDirection.Column,alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center,height:c.BlockSize.Full},o.default.createElement(d.default,null)),!_&&!y&&function(e,t){let n;switch(e){case"wallet_installSnap":n=g("snapInstallSuccess");break;case"wallet_updateSnap":n=g("snapUpdateSuccess");break;default:n=g("snapResultSuccess")}return o.default.createElement(l.default,{flexDirection:c.FlexDirection.Column,alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center,height:c.BlockSize.Full,paddingTop:2,paddingBottom:2,backgroundColor:c.BackgroundColor.backgroundAlternative},o.default.createElement(u.AvatarIcon,{className:"snap-result__header__icon",iconName:u.IconName.Confirmation,size:u.AvatarIconSize.Xl,color:c.IconColor.successDefault,backgroundColor:c.BackgroundColor.successMuted}),o.default.createElement(u.Text,{fontWeight:c.FontWeight.Bold,textAlign:c.TextAlign.Center,variant:c.TextVariant.headingLg,paddingBottom:2,marginTop:4},n),o.default.createElement(u.Text,{textAlign:c.TextAlign.Center},g("snapResultSuccessDescription",[o.default.createElement(u.Text,{as:"span",key:"1",fontWeight:c.FontWeight.Medium},t)])))}(t.type,v),y&&function(e,n){let a,s;switch(e){case"wallet_installSnap":a=g("snapInstallationErrorTitle"),s=g("snapInstallationErrorDescription",[o.default.createElement(u.Text,{as:"span",key:"1",fontWeight:c.FontWeight.Medium},n)]);break;case"wallet_updateSnap":a=g("snapUpdateErrorTitle"),s=g("snapUpdateErrorDescription",[o.default.createElement(u.Text,{as:"span",key:"1",fontWeight:c.FontWeight.Medium},n)]);break;default:a=g("snapResultError")}return o.default.createElement(p.default,{error:t.error,title:a,description:s,iconName:u.IconName.Warning})}(t.type,v)),o.default.createElement(l.default,{className:"snap-result__footer",alignItems:c.AlignItems.center,flexDirection:c.FlexDirection.Column,backgroundColor:c.BackgroundColor.backgroundAlternative},o.default.createElement(r.PageContainerFooter,{hideCancel:!0,disabled:_,onSubmit:h,submitText:g("ok").toUpperCase()})))}y.propTypes={request:a.default.object.isRequired,requestState:a.default.object.isRequired,approveSnapResult:a.default.func.isRequired,targetSubjectMetadata:a.default.shape({iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,sourceCode:a.default.string,version:a.default.string}).isRequired}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-result/snap-result.js"}],[7729,{"./snap-update":7730},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snap-update"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-update/index.js"}],[7730,{"../../../../components/app/snaps/install-error/install-error":6068,"../../../../components/app/snaps/snap-authorship-header":6076,"../../../../components/app/snaps/snap-install-warning":6089,"../../../../components/app/snaps/update-snap-permission-list":6193,"../../../../components/component-library":6325,"../../../../components/ui/page-container":6798,"../../../../components/ui/pulse-loader/pulse-loader":6807,"../../../../helpers/constants/design-system":6899,"../../../../helpers/utils/util":6959,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useScrollRequired":7070,"../../../../selectors":7886,"../util":7733,"prop-types":4893,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=b;var a=E(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),r=e("../../../../components/ui/page-container"),i=e("../../../../hooks/useI18nContext"),l=E(e("../../../../components/app/snaps/snap-install-warning")),c=e("../../../../helpers/constants/design-system"),u=E(e("../../../../components/app/snaps/update-snap-permission-list")),d=e("../util"),p=E(e("../../../../components/ui/pulse-loader/pulse-loader")),m=E(e("../../../../components/app/snaps/install-error/install-error")),f=E(e("../../../../components/app/snaps/snap-authorship-header")),g=e("../../../../components/component-library"),h=e("../../../../hooks/useScrollRequired"),y=e("../../../../selectors"),_=e("../../../../helpers/utils/util");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function E(e){return e&&e.__esModule?e:{default:e}}function b({request:e,requestState:t,approveSnapUpdate:n,rejectSnapUpdate:a,targetSubjectMetadata:v}){const E=(0,i.useI18nContext)(),[b,x]=(0,o.useState)(!1),[k,T]=(0,o.useState)(!1),{isScrollable:w,hasScrolledToBottom:S,scrollToBottom:C,ref:N,onScroll:I}=(0,h.useScrollRequired)([t]),R=(0,s.useSelector)(y.getSnapsMetadata),O=(0,o.useCallback)(()=>a(e.metadata.id),[e,a]),M=(0,o.useCallback)(()=>n(e.metadata.id),[e,n]),{name:A}=(0,s.useSelector)(e=>(0,y.getSnapMetadata)(e,v.origin)),P=t.approvedPermissions??{},D=t.unusedPermissions??{},B=t.newPermissions??{},L=t.approvedConnections??{},F=t.unusedConnections??{},j=t.newConnections??{},{newVersion:U}=t,W=t.loading,z=!W&&t.error,$=(0,d.getSnapInstallWarnings)(B,E,A,(0,_.getSnapName)(R)),q=$.length>0;return o.default.createElement(g.Box,{className:"snap-update",display:c.Display.Flex,justifyContent:c.JustifyContent.spaceBetween,height:c.BlockSize.Full,borderStyle:c.BorderStyle.none,flexDirection:c.FlexDirection.Column,backgroundColor:c.BackgroundColor.backgroundAlternative},o.default.createElement(f.default,{snapId:v.origin,onCancel:O}),o.default.createElement(g.Box,{ref:N,onScroll:I,className:"snap-update__content",style:{overflowY:"auto",flex:!W&&"1"},paddingLeft:4,paddingRight:4},!W&&!z&&o.default.createElement(g.Text,{paddingTop:4,paddingBottom:2,variant:c.TextVariant.headingMd,textAlign:"center"},E("updateRequest")),W&&o.default.createElement(g.Box,{className:"snap-update__content__loader-container",display:c.Display.Flex,flexDirection:c.FlexDirection.Column,alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center},o.default.createElement(p.default,null)),z&&o.default.createElement(m.default,{iconName:g.IconName.Warning,error:t.error,title:E("snapUpdateErrorTitle"),description:E("snapUpdateErrorDescription",[o.default.createElement(g.Text,{as:"span",key:"1",fontWeight:c.FontWeight.Medium},A)])}),!z&&!W&&o.default.createElement(o.default.Fragment,null,o.default.createElement(g.Text,{className:"snap-update__content__permission-description",paddingBottom:4,paddingLeft:4,paddingRight:4,textAlign:c.TextAlign.Center},E("snapUpdateRequest",[o.default.createElement(g.Text,{as:"span",key:"2",variant:c.TextVariant.bodyMd,fontWeight:c.FontWeight.Medium},A),o.default.createElement(g.Text,{as:"span",key:"3",variant:c.TextVariant.bodyMd,fontWeight:c.FontWeight.Medium},U)])),o.default.createElement(g.Box,{display:c.Display.Flex,backgroundColor:c.BackgroundColor.backgroundDefault,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2,borderRadius:c.BorderRadius.XL},o.default.createElement(u.default,{approvedPermissions:P,revokedPermissions:D,newPermissions:B,approvedConnections:L,revokedConnections:F,newConnections:j,targetSubjectMetadata:v,showAllPermissions:()=>{T(!0)}})),o.default.createElement(g.Box,{className:"snap-update__scroll-button-area"},!w||S||k?null:o.default.createElement(g.AvatarIcon,{className:"snap-install__scroll-button","data-testid":"snap-update-scroll",iconName:g.IconName.Arrow2Down,backgroundColor:c.BackgroundColor.infoDefault,color:c.IconColor.primaryInverse,onClick:C,style:{cursor:"pointer"}})))),o.default.createElement(g.Box,{className:"snap-update__footer",display:c.Display.Flex,alignItems:c.AlignItems.center,flexDirection:c.FlexDirection.Column,backgroundColor:c.BackgroundColor.backgroundAlternative},o.default.createElement(r.PageContainerFooter,{cancelButtonType:"default",hideCancel:z,disabled:W||!z&&w&&!S,onCancel:O,cancelText:E("cancel"),onSubmit:()=>{!z&&q?x(!0):z?O():M()},submitText:E(z?"ok":"confirm")})),b&&o.default.createElement(l.default,{onCancel:()=>x(!1),onSubmit:M,snapName:A,warnings:$}))}b.propTypes={request:a.default.object.isRequired,requestState:a.default.object.isRequired,approveSnapUpdate:a.default.func.isRequired,rejectSnapUpdate:a.default.func.isRequired,targetSubjectMetadata:a.default.shape({iconUrl:a.default.string,name:a.default.string,origin:a.default.string.isRequired,sourceCode:a.default.string,version:a.default.string}).isRequired}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snap-update/snap-update.js"}],[7731,{"./snaps-connect":7732},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./snaps-connect"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snaps-connect/index.js"}],[7732,{"../../../../components/app/snaps/snap-connect-cell/snap-connect-cell":6080,"../../../../components/app/snaps/snap-icon":6087,"../../../../components/app/snaps/snap-privacy-warning/snap-privacy-warning":6104,"../../../../components/component-library":6325,"../../../../components/ui/page-container":6798,"../../../../components/ui/pulse-loader/pulse-loader":6807,"../../../../helpers/constants/design-system":6899,"../../../../helpers/utils/util":6959,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useOriginMetadata":7065,"../../../../selectors":7886,"@metamask/snaps-utils":2781,"prop-types":4893,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=E;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),s=_(e("prop-types")),r=e("@metamask/snaps-utils"),i=e("../../../../hooks/useI18nContext"),l=e("../../../../components/component-library"),c=e("../../../../helpers/constants/design-system"),u=e("../../../../components/ui/page-container"),d=_(e("../../../../components/app/snaps/snap-connect-cell/snap-connect-cell")),p=e("../../../../helpers/utils/util"),m=_(e("../../../../components/ui/pulse-loader/pulse-loader")),f=_(e("../../../../components/app/snaps/snap-privacy-warning/snap-privacy-warning")),g=e("../../../../selectors"),h=e("../../../../hooks/useOriginMetadata"),y=e("../../../../components/app/snaps/snap-icon");function _(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function E({request:e,approveConnection:t,rejectConnection:n,targetSubjectMetadata:s,snapsInstallPrivacyWarningShown:_,setSnapsInstallPrivacyWarningShownStatus:v}){const E=(0,i.useI18nContext)(),{origin:b}=s,[x,k]=(0,a.useState)(!1),T=(0,o.useSelector)(t=>{var n;return(0,g.getPermissions)(t,null==e||null===(n=e.metadata)||void 0===n?void 0:n.origin)}),w=(0,o.useSelector)(g.getPreinstalledSnaps),S=(0,p.getDedupedSnaps)(e,T),C=S[0],{name:N}=(0,o.useSelector)(e=>(0,g.getSnapMetadata)(e,C)),I=Object.keys(w).includes(C),[R,O]=(0,a.useState)(!I&&!_),M=(0,a.useCallback)(()=>{n(e.metadata.id)},[e,n]),A=(0,a.useCallback)(()=>{try{k(!0),t(e)}finally{k(!1)}},[e,t]),P=()=>{var e;let t=null===(e=(0,h.useOriginMetadata)(b)||{})||void 0===e?void 0:e.hostname;const{name:n}=(0,o.useSelector)(e=>(0,g.getSnapMetadata)(e,(0,r.isSnapId)(b)?b:`npm:${b}`));return(0,r.isSnapId)(b)&&(t=n),x?a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,alignItems:c.AlignItems.center,justifyContent:c.JustifyContent.center,width:c.BlockSize.Full,height:c.BlockSize.Full},a.default.createElement(m.default,null)):(null==S?void 0:S.length)>1?a.default.createElement(l.Box,{flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center,paddingTop:4,width:c.BlockSize.Full,style:{overflowY:"hidden"},backgroundColor:c.BackgroundColor.backgroundAlternative},a.default.createElement(l.Text,{paddingBottom:2,variant:c.TextVariant.headingMd,textAlign:c.TextAlign.Center},E("connectionRequest")),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,textAlign:c.TextAlign.Center},E("multipleSnapConnectionWarning",[a.default.createElement(l.Text,{as:"span",key:"1",variant:c.TextVariant.bodyMd,fontWeight:c.FontWeight.Medium},t),a.default.createElement(l.Text,{as:"span",key:"2",variant:c.TextVariant.bodyMd,fontWeight:c.FontWeight.Medium},null==S?void 0:S.length)])),a.default.createElement(l.Box,{flexDirection:c.FlexDirection.Column,display:c.Display.Flex,marginTop:4,width:c.BlockSize.Full,style:{overflowY:"auto",flex:1}},S.map(e=>a.default.createElement(d.default,{key:`snaps-connect-${e}`,snapId:e,origin:t})))):1===(null==S?void 0:S.length)?a.default.createElement(l.Box,{display:c.Display.Flex,flexDirection:c.FlexDirection.Column,justifyContent:c.JustifyContent.center,alignItems:c.AlignItems.center,width:c.BlockSize.Full,height:c.BlockSize.Full,paddingLeft:4,paddingRight:4,backgroundColor:c.BackgroundColor.backgroundAlternative},a.default.createElement(l.Box,{paddingBottom:2},a.default.createElement(y.SnapIcon,{snapId:S[0],avatarSize:l.IconSize.Xl})),a.default.createElement(l.Text,{paddingBottom:2,variant:c.TextVariant.headingMd,textAlign:"center"},E("connectionRequest")),a.default.createElement(l.Text,{variant:c.TextVariant.bodyMd,textAlign:c.TextAlign.Center,padding:[0,4],overflowWrap:c.OverflowWrap.Anywhere},E("snapConnectionWarning",[a.default.createElement(l.Text,{as:"span",key:"1",variant:c.TextVariant.bodyMd,fontWeight:c.FontWeight.Medium},t),a.default.createElement(l.Text,{as:"span",key:"2",variant:c.TextVariant.bodyMd,fontWeight:c.FontWeight.Medium},N)]))):null};return a.default.createElement(l.Box,{className:"snaps-connect",display:c.Display.Flex,flexDirection:c.FlexDirection.Column,alignItems:c.AlignItems.center,height:c.BlockSize.Full,width:c.BlockSize.Full,backgroundColor:c.BackgroundColor.backgroundAlternative},R&&a.default.createElement(f.default,{onAccepted:()=>{O(!1),v(!0)},onCanceled:M}),a.default.createElement(l.Box,{display:c.Display.Flex,height:c.BlockSize.Full,width:c.BlockSize.Full,paddingLeft:4,paddingRight:4},a.default.createElement(P,null)),a.default.createElement(u.PageContainerFooter,{cancelButtonType:"default",hideCancel:!1,disabled:x,onCancel:M,cancelText:E("cancel"),onSubmit:A,submitText:E("connect")}))}E.propTypes={request:s.default.object.isRequired,approveConnection:s.default.func.isRequired,rejectConnection:s.default.func.isRequired,targetSubjectMetadata:s.default.shape({extensionId:s.default.string,iconUrl:s.default.string,name:s.default.string,origin:s.default.string,subjectType:s.default.string}),snapsInstallPrivacyWarningShown:s.default.bool.isRequired,setSnapsInstallPrivacyWarningShownStatus:s.default.func}}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/snaps-connect/snaps-connect.js"}],[7733,{"../../../helpers/utils/permission":6946},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSnapInstallWarnings=function(e,t,n,o){return Object.entries(e).reduce((e,[s,r])=>{const i=(0,a.getPermissionDescription)({t:t,permissionName:s,permissionValue:r,subjectName:n,getSubjectName:o});return e.concat(i.filter(e=>e.weight<=2))},[])};var a=e("../../../helpers/utils/permission")}}},{package:"$root$",file:"ui/pages/permissions-connect/snaps/util.js"}],[7734,{"./remove-snap-account":7735,"./snap-account-card":7736},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var a={RemoveSnapAccount:!0};Object.defineProperty(n,"RemoveSnapAccount",{enumerable:!0,get:function(){return s.default}});var o,s=(o=e("./remove-snap-account"))&&o.__esModule?o:{default:o},r=e("./snap-account-card");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(a,e)||e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))})}}},{package:"$root$",file:"ui/pages/remove-snap-account/index.ts"}],[7735,{"../../components/app/snaps/snap-authorship-header":6076,"../../components/component-library":6325,"../../helpers/constants/design-system":6899,"../../hooks/useI18nContext":7047,"./snap-account-card":7736,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=c(e("react")),o=e("../../components/component-library"),s=e("../../helpers/constants/design-system"),r=e("../../hooks/useI18nContext"),i=c(e("../../components/app/snaps/snap-authorship-header")),l=e("./snap-account-card");function c(e){return e&&e.__esModule?e:{default:e}}n.default=({snapId:e,publicAddress:t,onCancel:n})=>{const c=(0,r.useI18nContext)();return a.default.createElement(o.Box,{className:"remove-snap-account-page",height:s.BlockSize.Full,width:s.BlockSize.Full,display:s.Display.Flex,borderStyle:s.BorderStyle.none,flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,marginBottom:0},a.default.createElement(i.default,{snapId:e,onCancel:n}),a.default.createElement(o.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.center,padding:4,width:s.BlockSize.Full,style:{flexGrow:1}},a.default.createElement(o.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Row,justifyContent:s.JustifyContent.spaceBetween,width:s.BlockSize.Full},a.default.createElement(o.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,width:s.BlockSize.Full},a.default.createElement(o.Box,{paddingBottom:2},a.default.createElement(o.AvatarIcon,{iconName:o.IconName.UserCircleRemove,color:s.IconColor.errorDefault,backgroundColor:s.BackgroundColor.errorMuted,size:o.AvatarIconSize.Xl})),a.default.createElement(o.Text,{textAlign:s.TextAlign.Center,variant:s.TextVariant.headingLg,paddingBottom:2},c("removeSnapAccountTitle")),a.default.createElement(l.SnapAccountCard,{address:t,remove:!0}),a.default.createElement(o.Text,{variant:s.TextVariant.bodyMd,textAlign:s.TextAlign.Center,overflowWrap:s.OverflowWrap.Anywhere},c("removeSnapAccountDescription"))))))}}}},{package:"$root$",file:"ui/pages/remove-snap-account/remove-snap-account.tsx"}],[7736,{"../../components/component-library":6325,"../../components/multichain/account-list-item":6451,"../../helpers/constants/design-system":6899,"../../selectors":7886,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SnapAccountCard=void 0;var a,o=(a=e("react"))&&a.__esModule?a:{default:a},s=e("react-redux"),r=e("../../selectors"),i=e("../../helpers/constants/design-system"),l=e("../../components/component-library"),c=e("../../components/multichain/account-list-item");n.SnapAccountCard=({address:e,remove:t})=>{const n=(0,s.useSelector)(r.getMetaMaskAccountsOrdered).find(t=>t.address===e);return o.default.createElement(l.Box,{className:t?"snap-account-card-remove":"snap-account-card",borderRadius:i.BorderRadius.LG,marginTop:4,marginBottom:4,width:i.BlockSize.Full,style:{boxShadow:"var(--shadow-size-lg) var(--color-shadow-default)"}},o.default.createElement(c.AccountListItem,{account:n,selected:t||!1}))}}}},{package:"$root$",file:"ui/pages/remove-snap-account/snap-account-card.tsx"}],[7737,{"../../components/ui/loading-indicator":6778,"../../ducks/rewards":6887,"../../ducks/rewards/selectors":6888,"../../helpers/constants/routes":6904,"@metamask/design-system-react":1741,react:5080,"react-redux":5021,"react-router-dom":5048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),r=e("@metamask/design-system-react"),i=e("react-router-dom"),l=(a=e("../../components/ui/loading-indicator"))&&a.__esModule?a:{default:a},c=e("../../ducks/rewards/selectors"),u=e("../../helpers/constants/routes"),d=e("../../ducks/rewards");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}n.default=({navigate:e,location:t})=>{const n=(0,s.useSelector)(c.selectRewardsEnabled),a=(0,i.useLocation)(),p=(0,s.useSelector)(c.selectRewardsOnboardingEnabled),m=(0,s.useDispatch)();return(0,o.useEffect)(()=>{if(n&&p){const e=t??a,n=(e?new URLSearchParams(e.search):new URLSearchParams).get("referral");n&&n.length>0?m((0,d.setOnboardingReferralCode)(n)):m((0,d.setOnboardingReferralCode)(null)),m((0,d.setOnboardingModalOpen)(!0))}e(u.DEFAULT_ROUTE,{replace:!0})},[e,m,n,p,t,a]),o.default.createElement(r.Box,{className:"flex justify-center items-center flex-1"},o.default.createElement(l.default,{alt:"Loading",title:"Loading",isLoading:!0,style:{width:32,height:32,left:5}}))}}}},{package:"$root$",file:"ui/pages/rewards/index.tsx"}],[7738,{"./routes.component":7739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./routes.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/routes/index.js"}],[7739,{"../../../app/scripts/lib/util":353,"../../../shared/constants/app":5598,"../../../shared/constants/preferences":5622,"../../../shared/lib/confirmation.utils":5650,"../../../shared/modules/selectors/networks":5753,"../../components/app/alerts":5786,"../../components/app/assets/nfts/nft-default-image/toggle-ipfs-modal":5823,"../../components/app/assets/nfts/nft-details/nft-full-image.tsx":5828,"../../components/app/basic-configuration-modal":5859,"../../components/app/modals":5968,"../../components/app/modals/keyring-snap-removal-modal":5969,"../../components/app/modals/multichain-accounts/intro-modal":5972,"../../components/app/qr-hardware-popover":6037,"../../components/app/toast-master/toast-master":6214,"../../components/multichain":6568,"../../components/multichain-accounts/multichain-account-list-menu":6408,"../../components/multichain-accounts/permissions/permission-review-page/multichain-review-permissions-page":6435,"../../components/multichain-accounts/state2-wrapper/state2-wrapper":6440,"../../components/multichain/app-header/multichain-meta-fox-logo":6481,"../../components/multichain/network-list-menu/network-confirmation-popover/network-confirmation-popover":6591,"../../components/multichain/pages/connections/index.js":6656,"../../components/multichain/pages/gator-permissions/gator-permissions-page.tsx":6664,"../../components/multichain/pages/gator-permissions/review-permissions/review-gator-permissions-page.tsx":6666,"../../components/multichain/pages/gator-permissions/token-transfer/token-transfer-page.tsx":6667,"../../components/multichain/pages/permissions-page/permissions-page.js":6677,"../../components/multichain/pages/review-permissions-page/review-permissions-page":6678,"../../components/ui/alert":6723,"../../components/ui/loading-screen":6780,"../../ducks/history/history":6880,"../../ducks/metamask/metamask":6883,"../../helpers/constants/routes":6904,"../../helpers/higher-order-components/authenticated/authenticated-v5-compat":6912,"../../helpers/higher-order-components/initialized":6916,"../../helpers/higher-order-components/initialized/initialized-v5-compat":6917,"../../helpers/utils/mm-lazy":6939,"../../hooks/useI18nContext":7047,"../../hooks/useMultichainAccountsIntroModal":7054,"../../layouts/legacy-layout":7095,"../../layouts/root-layout":7096,"../../layouts/route-with-layout":7097,"../../selectors":7886,"../../selectors/approvals":7877,"../../store/actions":7916,"../../store/store":7921,"../asset/index.js":7116,"../bridge/index.tsx":7126,"../bridge/transaction-details/transaction-details":7154,"../confirm-add-suggested-nft/index.js":7161,"../confirm-add-suggested-token/index.js":7163,"../confirmations/components/confirm/smart-account-update":7322,"../confirmations/confirm-transaction/index.js":7417,"../confirmations/confirmation/index.js":7429,"../confirmations/hooks/useConfirmationNavigation":7535,"../confirmations/send/index.ts":7579,"../create-account/create-account.component.js":7603,"../deep-link/deep-link.tsx":7606,"../defi/index.ts":7609,"../home/index.js":7613,"../keychains/restore-vault.js":7615,"../keychains/reveal-seed.js":7616,"../lock/index.js":7617,"../multi-srp/import-srp/index.ts":7621,"../multichain-accounts/account-details":7626,"../multichain-accounts/account-list":7633,"../multichain-accounts/add-wallet-page":7636,"../multichain-accounts/address-qr-code":7638,"../multichain-accounts/multichain-account-address-list-page":7640,"../multichain-accounts/multichain-account-details-page/index.ts":7643,"../multichain-accounts/multichain-account-private-key-list-page":7645,"../multichain-accounts/smart-account-page/index.ts":7648,"../multichain-accounts/wallet-details-page":7650,"../multichain-accounts/wallet-details/index.ts":7652,"../nonevm-balance-check/index.tsx":7654,"../notification-details/index.js":7655,"../notifications-settings/index.js":7661,"../notifications/index.js":7667,"../onboarding-flow/onboarding-flow.js":7700,"../permissions-connect/index.js":7720,"../rewards":7737,"../settings/deprecated-network-modal/DeprecatedNetworkModal":7760,"../settings/index.js":7769,"../shield-plan/index.ts":7815,"../snaps/snap-view/index.js":7829,"../snaps/snaps-list/index.js":7832,"../swaps/index.js":7847,"../unlock-page/index.js":7869,"./utils":7740,classnames:3913,react:5080,"react-idle-timer":4992,"react-redux":5021,"react-router-dom":5048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e;const t=(0,s.useDispatch)(),n=(0,r.useHistory)(),j=(0,r.useLocation)(),Q=(0,l.useAppSelector)(e=>e.appState.alertOpen),Z=(0,l.useAppSelector)(e=>e.appState.alertMessage),ee=(0,l.useAppSelector)(e=>e.appState.isLoading),se=(0,l.useAppSelector)(e=>e.appState.loadingMessage),{autoLockTimeLimit:re=S.DEFAULT_AUTO_LOCK_TIME_LIMIT,privacyMode:ie}=(0,l.useAppSelector)(v.getPreferences),le=(0,l.useAppSelector)(k.getCompletedOnboarding),He=(0,l.useAppSelector)(v.getNetworkToAutomaticallySwitchTo),Je=(0,l.useAppSelector)(v.oldestPendingConfirmationSelector),Ke=(0,l.useAppSelector)(v.getPendingApprovals),Ye=(0,l.useAppSelector)(v.getUnapprovedTransactions),Xe=(0,l.useAppSelector)(E.getApprovalFlows),Qe=(0,l.useAppSelector)(e=>e.metamask.textDirection),Ze=(0,l.useAppSelector)(k.getIsUnlocked),et=(0,l.useAppSelector)(e=>e.metamask.currentCurrency),tt=(0,l.useAppSelector)(e=>{var t;return null===(t=e.metamask.browserEnvironment)||void 0===t?void 0:t.os}),nt=(0,l.useAppSelector)(e=>{var t;return null===(t=e.metamask.browserEnvironment)||void 0===t?void 0:t.browser}),at=(0,l.useAppSelector)(v.getNetworkIdentifier),{type:ot}=(0,l.useAppSelector)(_.getProviderConfig),st=(0,l.useAppSelector)(v.getTheme),rt=(0,l.useAppSelector)(v.getShowExtensionInFullSizeView),it=(0,l.useAppSelector)(e=>e.metamask.forgottenPassword),lt=(0,l.useAppSelector)(e=>e.appState.isAccountMenuOpen),ct=(0,l.useAppSelector)(e=>e.appState.isNetworkMenuOpen),ut=(0,l.useAppSelector)(e=>e.appState.importTokensModalOpen),dt=(0,l.useAppSelector)(e=>e.appState.showBasicFunctionalityModal),pt=(0,l.useAppSelector)(e=>e.appState.deprecatedNetworkModalOpen),mt=(0,l.useAppSelector)(e=>e.appState.accountDetailsAddress),ft=(0,l.useAppSelector)(e=>e.appState.importNftsModal.open),gt=(0,l.useAppSelector)(e=>e.appState.showIpfsModalOpen),ht=(0,l.useAppSelector)(v.getNumberOfAllUnapprovedTransactionsAndMessages),yt=(0,l.useAppSelector)(e=>e.metamask.currentExtensionPopupId),_t=(0,l.useAppSelector)(e=>e.appState.showKeyringRemovalSnapModal),vt=(0,l.useAppSelector)(v.getUnapprovedConfirmations),Et=(0,l.useAppSelector)(v.getIsMultichainAccountsState1Enabled),{showMultichainIntroModal:bt,setShowMultichainIntroModal:xt}=(0,J.useMultichainAccountsIntroModal)(Ze,j),kt=(0,o.useRef)({isUnlocked:Ze,totalUnapprovedConfirmationCount:ht});(0,o.useEffect)(()=>{const e=kt.current;He&&0===ht&&(e.totalUnapprovedConfirmationCount>0||!1===e.isUnlocked&&Ze)&&t((0,b.automaticallySwitchNetwork)(He)),kt.current={isUnlocked:Ze,totalUnapprovedConfirmationCount:ht}},[He,Ze,ht,t]),(0,o.useEffect)(()=>{yt!==undefined&&"metamask"in global&&"object"==typeof global.metamask&&global.metamask&&"id"in global.metamask&&global.metamask.id!==undefined&&yt!==global.metamask.id&&window.close()},[yt]),(0,o.useEffect)(()=>{const e=(0,I.getEnvironmentType)();var t,n;!rt||e!==N.ENVIRONMENT_TYPE_POPUP&&e!==N.ENVIRONMENT_TYPE_SIDEPANEL||(null===(t=global.platform)||void 0===t||null===(n=t.openExtensionInBrowser)||void 0===n||n.call(t))},[rt]),(0,o.useEffect)(()=>{const e=n.listen((e,n)=>{"PUSH"===n&&t((0,x.pageChanged)(e.pathname))});return()=>{e()}},[n,t]),(0,o.useEffect)(()=>{(0,oe.setTheme)(st)},[st]),(0,o.useEffect)(()=>{et||t((0,b.setCurrentCurrency)("usd"))},[et,t]),(0,o.useEffect)(()=>{if((0,I.getEnvironmentType)()!==N.ENVIRONMENT_TYPE_SIDEPANEL)return;const e=j.pathname.startsWith(y.ASSET_ROUTE),t=Ke.some(e=>"wallet_addEthereumChain"===e.type||"wallet_switchEthereumChain"===e.type);var a;e&&!t&&Ze&&(Ke.length>0||(null==Xe?void 0:Xe.length)>0)&&(0,C.navigateToConfirmation)(null===(a=Ke[0])||void 0===a?void 0:a.id,Ke,Boolean(null==Xe?void 0:Xe.length),n,"",j.pathname)},[Ze,Ke,Xe,n,j.pathname]);const Tt=(0,o.useCallback)(()=>{const e=it?r.Route:u.default,n=o.default.createElement(o.Suspense,{fallback:null},o.default.createElement(r.Switch,null,o.default.createElement(ae.RouteWithLayout,{path:y.ONBOARDING_ROUTE,component:ue,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{path:y.LOCK_ROUTE,component:de,exact:!0,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{path:y.UNLOCK_ROUTE,layout:ne.LegacyLayout,exact:!0},ce(pe,{wrapper:d.default,includeNavigate:!0,includeLocation:!0})),o.default.createElement(ae.RouteWithLayout,{path:y.DEEP_LINK_ROUTE,layout:ne.LegacyLayout},ce(Ue,{includeLocation:!0})),o.default.createElement(e,{path:y.RESTORE_VAULT_ROUTE,component:me,exact:!0}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.SMART_ACCOUNT_UPDATE,component:z.SmartAccountUpdate,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{path:`${y.REVEAL_SEED_ROUTE}/:keyringId?`,layout:te.RootLayout},ce(ge,{wrapper:c.default,includeNavigate:!0,includeParams:!0})),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.IMPORT_SRP_ROUTE,component:fe,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.SETTINGS_ROUTE,component:he,layout:te.RootLayout}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.NOTIFICATIONS_SETTINGS_ROUTE,component:ye,layout:te.RootLayout}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:`${y.NOTIFICATIONS_ROUTE}/:uuid`,layout:te.RootLayout,exact:!0},ce(_e,{wrapper:c.default,includeParams:!0,includeNavigate:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.NOTIFICATIONS_ROUTE,component:ve,layout:te.RootLayout}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.SNAPS_ROUTE,component:Ee,exact:!0,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.SNAPS_VIEW_ROUTE,component:be,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{path:`${y.SEND_ROUTE}/:page?`,layout:te.RootLayout},ce(ke,{wrapper:c.default,includeParams:!0,includeNavigate:!0,includeLocation:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:`${y.CONFIRM_TRANSACTION_ROUTE}/:id?`,layout:ne.LegacyLayout},ce(xe,{wrapper:c.default,includeLocation:!0,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:y.SWAPS_ROUTE,layout:ne.LegacyLayout},ce(Te,{wrapper:c.default,includeLocation:!0})),o.default.createElement(ae.RouteWithLayout,{path:`${y.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE}/:srcTxMetaId`,layout:ne.LegacyLayout,exact:!0},ce(U.default,{wrapper:c.default,includeNavigate:!0,includeLocation:!0,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:y.CROSS_CHAIN_SWAP_ROUTE,layout:ne.LegacyLayout},ce(we,{wrapper:c.default,includeLocation:!0})),o.default.createElement(ae.RouteWithLayout,{path:y.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE,layout:ne.LegacyLayout},ce(Ce,{wrapper:c.default,includeNavigate:!0,includeLocation:!0})),o.default.createElement(ae.RouteWithLayout,{path:y.CONFIRM_ADD_SUGGESTED_NFT_ROUTE,layout:ne.LegacyLayout},ce(Ne,{wrapper:c.default,includeNavigate:!0,includeLocation:!0})),o.default.createElement(ae.RouteWithLayout,{path:`${y.CONFIRMATION_V_NEXT_ROUTE}/:id?`,layout:ne.LegacyLayout},ce(Ie,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.NEW_ACCOUNT_ROUTE,component:Re,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{path:`${y.CONNECT_ROUTE}/:id`,layout:te.RootLayout},ce(Se,{wrapper:c.default,includeNavigate:!0,includeLocation:!0,includeMatch:!0})),o.default.createElement(ae.RouteWithLayout,{path:`${y.ASSET_ROUTE}/image/:asset/:id`,layout:te.RootLayout},ce(Oe,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:`${y.ASSET_ROUTE}/:chainId/:asset/:id`,layout:te.RootLayout},ce(Me,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:`${y.ASSET_ROUTE}/:chainId/:asset/`,layout:te.RootLayout},ce(Me,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:`${y.ASSET_ROUTE}/:chainId`,layout:te.RootLayout},ce(Me,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:`${y.DEFI_ROUTE}/:chainId/:protocolId`,layout:te.RootLayout},ce(Ae,{wrapper:c.default,includeNavigate:!0,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:`${y.CONNECTIONS}/:origin`,layout:ne.LegacyLayout,exact:!0},ce(Fe,{wrapper:c.default,includeParams:!0,includeNavigate:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.PERMISSIONS,component:Pe,exact:!0,layout:te.RootLayout}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.GATOR_PERMISSIONS,component:De,exact:!0,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.TOKEN_TRANSFER_ROUTE,component:Be,exact:!0,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:`${y.REVIEW_GATOR_PERMISSIONS_ROUTE}/:chainId/:permissionGroupName`,exact:!0,layout:ne.LegacyLayout},ce(Le,{wrapper:c.default,includeParams:!0,includeNavigate:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:`${y.REVIEW_PERMISSIONS}/:origin`,exact:!0,layout:ne.LegacyLayout},ce(Ge,{wrapper:c.default,includeParams:!0,includeNavigate:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:y.ACCOUNT_LIST_PAGE_ROUTE,exact:!0,layout:te.RootLayout},ce(K.AccountList,{wrapper:c.default})),o.default.createElement(ae.RouteWithLayout,{path:`${y.MULTICHAIN_ACCOUNT_ADDRESS_LIST_PAGE_ROUTE}/:accountGroupId`,exact:!0,layout:te.RootLayout},ce(V.MultichainAccountAddressListPage,{wrapper:c.default,includeLocation:!0,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:`${y.MULTICHAIN_ACCOUNT_PRIVATE_KEY_LIST_PAGE_ROUTE}/:accountGroupId`,exact:!0,layout:ne.LegacyLayout},ce(G.MultichainAccountPrivateKeyListPage,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:y.ADD_WALLET_PAGE_ROUTE,exact:!0,layout:te.RootLayout},ce(Y.AddWalletPage,{wrapper:c.default})),o.default.createElement(ae.RouteWithLayout,{path:`${y.MULTICHAIN_ACCOUNT_DETAILS_PAGE_ROUTE}/:id`,exact:!0,layout:te.RootLayout},ce(ze,{wrapper:c.default,includeParams:!0,paramsAsProps:!0})),o.default.createElement(ae.RouteWithLayout,{path:`${y.MULTICHAIN_SMART_ACCOUNT_PAGE_ROUTE}/:address`,exact:!0,layout:te.RootLayout},ce($e,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:`${y.MULTICHAIN_WALLET_DETAILS_PAGE_ROUTE}/:id`,exact:!0,layout:te.RootLayout},ce(X.WalletDetailsPage,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:y.WALLET_DETAILS_ROUTE,exact:!0,layout:ne.LegacyLayout},ce(We,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:`${y.ACCOUNT_DETAILS_ROUTE}/:address`,exact:!0,layout:ne.LegacyLayout},ce($.MultichainAccountDetails,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{path:`${y.ACCOUNT_DETAILS_QR_CODE_ROUTE}/:address`,exact:!0,layout:ne.LegacyLayout},ce(q.AddressQRCode,{wrapper:c.default,includeParams:!0,paramsAsProps:!1})),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.NONEVM_BALANCE_CHECK_ROUTE,component:qe,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{authenticated:!0,path:y.SHIELD_PLAN_ROUTE,component:Ve,layout:ne.LegacyLayout}),o.default.createElement(ae.RouteWithLayout,{path:y.REWARDS_ROUTE,layout:te.RootLayout},ce(w.default,{wrapper:c.default,includeNavigate:!0,includeLocation:!0})),o.default.createElement(ae.RouteWithLayout,{path:y.DEFAULT_ROUTE,layout:te.RootLayout},ce(je,{wrapper:c.default,includeNavigate:!0,includeLocation:!0}))));return re>0?o.default.createElement(i.default,{onAction:()=>t((0,b.setLastActiveTime)()),throttle:1e3},n):n},[re,it,t]),wt=(0,T.useI18nContext)(),St=se?(0,oe.getConnectingLabel)(se,{providerType:ot,providerId:at},{t:wt}):null,Ct=j.pathname.split("/confirm-transaction/")[1]??(null==Je?void 0:Je.id),Nt=Ke.find(e=>e.id===Ct),It=(0,W.isCorrectSignatureApprovalType)(null==Nt?void 0:Nt.type),Rt=(0,W.isCorrectDeveloperTransactionType)(null===(e=Ye[Ct])||void 0===e?void 0:e.type),Ot=j.pathname===y.DEEP_LINK_ROUTE,Mt=ee&&le&&!vt.some(e=>e.type===N.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES.showSnapAccountRedirect)&&!It&&!Rt&&!Ot,At=Et?o.default.createElement(P.MultichainAccountListMenu,{onClose:()=>t((0,b.toggleAccountMenu)()),privacyMode:ie}):o.default.createElement(g.AccountListMenu,{onClose:()=>t((0,b.toggleAccountMenu)()),privacyMode:ie}),Pt=(0,I.getEnvironmentType)()===N.ENVIRONMENT_TYPE_SIDEPANEL;return o.default.createElement("div",{className:(0,a.default)("app",{[`os-${tt}`]:Boolean(tt),[`browser-${nt}`]:Boolean(nt),"group app--sidepanel":Pt}),dir:Qe},o.default.createElement(R.default,null),o.default.createElement(m.Modal,null),o.default.createElement(f.default,{visible:Q,msg:Z}),(0,oe.isConfirmTransactionRoute)(j.pathname)&&o.default.createElement(B.MultichainMetaFoxLogo,null),lt?At:null,ct?o.default.createElement(g.NetworkListMenu,{onClose:()=>{t((0,b.toggleNetworkMenu)()),t((0,b.setEditedNetwork)())}}):null,o.default.createElement(L.default,null),!mt||Et?null:o.default.createElement(g.AccountDetails,{address:mt}),ft?o.default.createElement(g.ImportNftsModal,{onClose:()=>t((0,b.hideImportNftsModal)())}):null,gt?o.default.createElement(O.ToggleIpfsModal,{onClose:()=>t((0,b.hideIpfsModal)())}):null,dt?o.default.createElement(M.BasicConfigurationModal,null):null,ut?o.default.createElement(g.ImportTokensModal,{onClose:()=>t((0,b.hideImportTokensModal)())}):null,pt?o.default.createElement(D.DeprecatedNetworkModal,{onClose:()=>t((0,b.hideDeprecatedNetworkModal)())}):null,_t&&o.default.createElement(A.default,{isOpen:_t,onClose:()=>t((0,b.hideKeyringRemovalResultModal)())}),bt?o.default.createElement(H.default,{onClose:()=>xt(!1)}):null,Mt?o.default.createElement(p.default,{loadingMessage:St}):null,Tt(),Ze?o.default.createElement(h.default,{history:n}):null,o.default.createElement(F.ToastMaster,{location:j}))};var a=se(e("classnames")),o=le(e("react")),s=e("react-redux"),r=e("react-router-dom"),i=se(e("react-idle-timer")),l=e("../../store/store"),c=se(e("../../helpers/higher-order-components/authenticated/authenticated-v5-compat")),u=se(e("../../helpers/higher-order-components/initialized")),d=se(e("../../helpers/higher-order-components/initialized/initialized-v5-compat")),p=se(e("../../components/ui/loading-screen")),m=e("../../components/app/modals"),f=se(e("../../components/ui/alert")),g=e("../../components/multichain"),h=se(e("../../components/app/alerts")),y=e("../../helpers/constants/routes"),_=e("../../../shared/modules/selectors/networks"),v=e("../../selectors"),E=e("../../selectors/approvals"),b=e("../../store/actions"),x=e("../../ducks/history/history"),k=e("../../ducks/metamask/metamask"),T=e("../../hooks/useI18nContext"),w=se(e("../rewards")),S=e("../../../shared/constants/preferences"),C=e("../confirmations/hooks/useConfirmationNavigation"),N=e("../../../shared/constants/app"),I=e("../../../app/scripts/lib/util"),R=se(e("../../components/app/qr-hardware-popover")),O=e("../../components/app/assets/nfts/nft-default-image/toggle-ipfs-modal"),M=e("../../components/app/basic-configuration-modal"),A=se(e("../../components/app/modals/keyring-snap-removal-modal")),P=e("../../components/multichain-accounts/multichain-account-list-menu"),D=e("../settings/deprecated-network-modal/DeprecatedNetworkModal"),B=e("../../components/multichain/app-header/multichain-meta-fox-logo"),L=se(e("../../components/multichain/network-list-menu/network-confirmation-popover/network-confirmation-popover")),F=e("../../components/app/toast-master/toast-master"),j=e("../../helpers/utils/mm-lazy"),U=se(e("../bridge/transaction-details/transaction-details")),W=e("../../../shared/lib/confirmation.utils"),z=e("../confirmations/components/confirm/smart-account-update"),$=e("../multichain-accounts/account-details"),q=e("../multichain-accounts/address-qr-code"),V=e("../multichain-accounts/multichain-account-address-list-page"),G=e("../multichain-accounts/multichain-account-private-key-list-page"),H=se(e("../../components/app/modals/multichain-accounts/intro-modal")),J=e("../../hooks/useMultichainAccountsIntroModal"),K=e("../multichain-accounts/account-list"),Y=e("../multichain-accounts/add-wallet-page"),X=e("../multichain-accounts/wallet-details-page"),Q=e("../../components/multichain/pages/review-permissions-page/review-permissions-page"),Z=e("../../components/multichain-accounts/permissions/permission-review-page/multichain-review-permissions-page"),ee=e("../../components/multichain-accounts/state2-wrapper/state2-wrapper"),te=e("../../layouts/root-layout"),ne=e("../../layouts/legacy-layout"),ae=e("../../layouts/route-with-layout"),oe=e("./utils");function se(e){return e&&e.__esModule?e:{default:e}}function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},re.apply(null,arguments)}function ie(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(ie=function(e){return e?n:t})(e)}function le(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=ie(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}const ce=(e,t={})=>{const{wrapper:n=null,includeNavigate:a=!1,includeLocation:s=!1,includeParams:r=!1,includeMatch:i=!1,paramsAsProps:l=!0}=t;return t=>{const{history:c,location:u,match:d}=t,p={};var m;a&&(p.navigate=(m=c,(e,t={})=>{"number"==typeof e?m.go(e):t.replace?m.replace(e,t.state):m.push(e,t.state)})),s&&(p.location=u),i&&(p.match=d),r&&(l?Object.assign(p,d.params):p.params=d.params);const f=o.default.createElement(e,p);return n?o.default.createElement(n,{children:f}):f}},ue=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../onboarding-flow/onboarding-flow.js")))),de=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../lock/index.js")))),pe=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../unlock-page/index.js")))),me=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../keychains/restore-vault.js")))),fe=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../multi-srp/import-srp/index.ts")))),ge=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../keychains/reveal-seed.js")))),he=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../settings/index.js")))),ye=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../notifications-settings/index.js")))),_e=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../notification-details/index.js")))),ve=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../notifications/index.js")))),Ee=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../snaps/snaps-list/index.js")))),be=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../snaps/snap-view/index.js")))),xe=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../confirmations/confirm-transaction/index.js")))),ke=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../confirmations/send/index.ts")))),Te=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../swaps/index.js")))),we=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../bridge/index.tsx")))),Se=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../permissions-connect/index.js")))),Ce=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../confirm-add-suggested-token/index.js")))),Ne=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../confirm-add-suggested-nft/index.js")))),Ie=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../confirmations/confirmation/index.js")))),Re=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../create-account/create-account.component.js")))),Oe=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../../components/app/assets/nfts/nft-details/nft-full-image.tsx")))),Me=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../asset/index.js")))),Ae=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../defi/index.ts")))),Pe=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../../components/multichain/pages/permissions-page/permissions-page.js")))),De=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../../components/multichain/pages/gator-permissions/gator-permissions-page.tsx")))),Be=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../../components/multichain/pages/gator-permissions/token-transfer/token-transfer-page.tsx")))),Le=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../../components/multichain/pages/gator-permissions/review-permissions/review-gator-permissions-page.tsx")))),Fe=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../../components/multichain/pages/connections/index.js")))),je=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../home/index.js")))),Ue=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../deep-link/deep-link.tsx")))),We=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../multichain-accounts/wallet-details/index.ts")))),ze=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../multichain-accounts/multichain-account-details-page/index.ts")))),$e=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../multichain-accounts/smart-account-page/index.ts")))),qe=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../nonevm-balance-check/index.tsx")))),Ve=(0,j.mmLazy)(()=>Promise.resolve().then(()=>le(e("../shield-plan/index.ts")))),Ge=o.default.memo(e=>o.default.createElement(ee.State2Wrapper,re({},e,{state1Component:Q.ReviewPermissions,state2Component:Z.MultichainReviewPermissions})))}}},{package:"$root$",file:"ui/pages/routes/routes.component.tsx"}],[7740,{"../../../app/scripts/lib/util":353,"../../../shared/constants/app":5598,"../../../shared/constants/network":5617,"../../../shared/constants/preferences":5622,"../../helpers/constants/routes":6904,"react-router-dom":5048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extractIdFromPathname=function(e,t){if(!e||!t||!e.includes(t))return null;const n=e.split(t)[1];if(!n)return null;return n.split(/[/?#]/u)[0]||null},n.getConnectingLabel=function(e,t,n){if(e)return e;const{providerType:a,providerId:o}=t,{t:s}=n;switch(a){case r.NETWORK_TYPES.MAINNET:return s("connectingToMainnet");case r.NETWORK_TYPES.GOERLI:return s("connectingToGoerli");case r.NETWORK_TYPES.SEPOLIA:return s("connectingToSepolia");case r.NETWORK_TYPES.LINEA_GOERLI:return s("connectingToLineaGoerli");case r.NETWORK_TYPES.LINEA_SEPOLIA:return s("connectingToLineaSepolia");case r.NETWORK_TYPES.LINEA_MAINNET:return s("connectingToLineaMainnet");default:return s("connectingTo",[o])}},n.getRelativeLocationForNestedRoutes=function(e,t){const n=t.endsWith("/")?t.slice(0,-1):t,a=e.pathname.startsWith(n)?e.pathname.slice(n.length)||"/":e.pathname;return{...e,pathname:a}},n.getThemeFromRawTheme=u,n.hideAppHeader=function(e){const{location:t}=e;if(Boolean((0,a.matchPath)(t.pathname,{path:`${l.NOTIFICATIONS_ROUTE}`,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.DEEP_LINK_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.ONBOARDING_ROUTE,exact:!1})))return!0;const n=(0,o.getEnvironmentType)();if(n===s.ENVIRONMENT_TYPE_NOTIFICATION)return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.PERMISSIONS,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.CONNECTIONS,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.REVIEW_PERMISSIONS,exact:!1})))return!0;if(n===s.ENVIRONMENT_TYPE_POPUP&&function(e){const{location:t}=e;return Boolean((0,a.matchPath)(t.pathname,{path:l.CONFIRM_TRANSACTION_ROUTE,exact:!1}))}(e))return!0;const r=Boolean((0,a.matchPath)(t.pathname,{path:l.CONNECT_ROUTE,exact:!1}));if(Boolean((0,a.matchPath)(t.pathname,{path:l.SEND_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.MULTICHAIN_ACCOUNT_DETAILS_PAGE_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.MULTICHAIN_WALLET_DETAILS_PAGE_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.WALLET_DETAILS_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.SNAPS_VIEW_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:`${l.CROSS_CHAIN_SWAP_ROUTE}`,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.ASSET_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.ACCOUNT_DETAILS_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.ACCOUNT_DETAILS_QR_CODE_ROUTE,exact:!1})))return!0;const i=Boolean((0,a.matchPath)(t.pathname,{path:l.CONFIRMATION_V_NEXT_ROUTE,exact:!1})),u=Boolean((0,a.matchPath)(t.pathname,{path:l.IMPORT_SRP_ROUTE,exact:!1}));if(Boolean((0,a.matchPath)(t.pathname,{path:l.SHIELD_PLAN_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.GATOR_PERMISSIONS,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.TOKEN_TRANSFER_ROUTE,exact:!1})))return!0;if(Boolean((0,a.matchPath)(t.pathname,{path:l.REVIEW_GATOR_PERMISSIONS_ROUTE,exact:!1})))return!0;return r||i||c(t.pathname)||u},n.isConfirmTransactionRoute=c,n.setTheme=function(e){document.documentElement.setAttribute("data-theme",u(e))},n.showAppHeader=function(e){const{location:t}=e;return Boolean((0,a.matchPath)(t.pathname,{path:l.DEFAULT_ROUTE,exact:!0}))};var a=e("react-router-dom"),o=e("../../../app/scripts/lib/util"),s=e("../../../shared/constants/app"),r=e("../../../shared/constants/network"),i=e("../../../shared/constants/preferences"),l=e("../../helpers/constants/routes");function c(e){return Boolean((0,a.matchPath)(e,{path:l.CONFIRM_TRANSACTION_ROUTE,exact:!1}))}function u(e){var t;return e===i.ThemeType.os?null!==(t=window)&&void 0!==t&&null!==(t=t.matchMedia("(prefers-color-scheme: dark)"))&&void 0!==t&&t.matches?i.ThemeType.dark:i.ThemeType.light:e}}}},{package:"$root$",file:"ui/pages/routes/utils.js"}],[7741,{"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/preferences":5622,"../../../../shared/constants/smartTransactions":5628,"../../../components/component-library":6325,"../../../components/ui/text-field":6827,"../../../components/ui/toggle-button":6831,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/export-utils":6930,"../../../helpers/utils/settings-search":6949,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=g(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("../../../../shared/constants/metametrics"),r=e("../../../../shared/constants/preferences"),i=e("../../../../shared/constants/smartTransactions"),l=e("../../../components/component-library"),c=g(e("../../../components/ui/text-field")),u=g(e("../../../components/ui/toggle-button")),d=e("../../../helpers/constants/design-system"),p=e("../../../helpers/utils/export-utils"),m=e("../../../helpers/utils/settings-search");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function g(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends o.PureComponent{constructor(...e){super(...e),h(this,"state",{autoLockTimeLimit:this.props.autoLockTimeLimit,autoLockTimeLimitBeforeNormalization:this.props.autoLockTimeLimit,lockTimeError:""}),h(this,"settingsRefs",Array((0,m.getNumberOfSettingRoutesInTab)(this.context.t,this.context.t("advanced"))).fill(undefined).map(()=>o.default.createRef())),h(this,"backupUserData",async()=>{const{fileName:e,data:t}=await this.props.backupUserData();(0,p.exportAsFile)(e,t,p.ExportableContentType.JSON),this.context.trackEvent({event:"User Data Exported",category:"Backup",properties:{}})})}componentDidUpdate(){const{t:e}=this.context;(0,m.handleSettingsRefs)(e,e("advanced"),this.settingsRefs)}componentDidMount(){const{t:e}=this.context,{hideErrorInSettings:t}=this.props;(0,m.handleSettingsRefs)(e,e("advanced"),this.settingsRefs),t()}async getTextFromFile(e){return new Promise((t,n)=>{const a=new window.FileReader;a.onload=e=>{const n=e.target.result;t(n)},a.onerror=e=>{n(e)},a.readAsText(e)})}renderStateLogs(){const{t:e}=this.context,{displayErrorInSettings:t}=this.props;return o.default.createElement(l.Box,{className:"settings-page__content-row",display:d.Display.Flex,flexDirection:d.FlexDirection.Column,ref:this.settingsRefs[0],"data-testid":"advanced-setting-state-logs"},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("stateLogs")),o.default.createElement("span",{className:"settings-page__content-description"},e("stateLogsDescription"))),o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(l.Button,{variant:l.ButtonVariant.Secondary,"data-testid":"advanced-setting-state-logs-button",onClick:()=>{window.logStateString(async(n,a)=>{if(n)t(e("stateLogError"));else try{await(0,p.exportAsFile)(`${e("stateLogFileName")}.json`,a,p.ExportableContentType.JSON)}catch(e){t(e.message)}})}},e("downloadStateLogs")))))}renderResetAccount(){const{t:e}=this.context,{showResetAccountConfirmationModal:t}=this.props;return o.default.createElement(l.Box,{ref:this.settingsRefs[1],className:"settings-page__content-row",display:d.Display.Flex,flexDirection:d.FlexDirection.Column,"data-testid":"advanced-setting-reset-account"},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("clearActivity")),o.default.createElement("span",{className:"settings-page__content-description"},e("clearActivityDescription"))),o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(l.Button,{danger:!0,onClick:e=>{e.preventDefault(),this.context.trackEvent({category:s.MetaMetricsEventCategory.Settings,event:s.MetaMetricsEventName.AccountReset,properties:{}}),t()}},e("clearActivityButton")))))}renderToggleSmartAccountOptIn(){const{t:e}=this.context,{smartAccountOptIn:t,setSmartAccountOptIn:n}=this.props,a=o.default.createElement(l.ButtonLink,{size:l.ButtonLinkSize.Inherit,textProps:{variant:d.TextVariant.bodyMd,alignItems:d.AlignItems.flexStart},as:"a",href:i.SMART_ACCOUNT_LEARN_MORE_URL,target:"_blank",rel:"noopener noreferrer"},e("learnMoreUpperCase"));return o.default.createElement(l.Box,{ref:this.settingsRefs[2],className:"settings-page__content-row","data-testid":"advanced-setting-smart-account-optin",display:d.Display.Flex,flexDirection:d.FlexDirection.Row,justifyContent:d.JustifyContent.spaceBetween,gap:[null,4]},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null," ",e("useSmartAccountTitle")),o.default.createElement("div",{className:"settings-page__content-description"},`${e("useSmartAccountDescription")} `,a)),o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(u.default,{value:t,onToggle:e=>{n(!e)},offLabel:e("off"),onLabel:e("on"),dataTestId:"settings-page-smart-account-optin"})))}renderToggleDismissSmartAccountSuggestion(){const{t:e}=this.context,{dismissSmartAccountSuggestionEnabled:t,setDismissSmartAccountSuggestionEnabled:n}=this.props;return o.default.createElement(l.Box,{ref:this.settingsRefs[3],className:"settings-page__content-row","data-testid":"advanced-setting-dismiss-smart-account-suggestion-enabled",display:d.Display.Flex,flexDirection:d.FlexDirection.Row,justifyContent:d.JustifyContent.spaceBetween,gap:[null,4]},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null," ",e("dismissSmartAccountSuggestionEnabledTitle")),o.default.createElement("div",{className:"settings-page__content-description"},e("dismissSmartAccountSuggestionEnabledDescription"))),o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(u.default,{value:t,onToggle:e=>{n(!e)},offLabel:e("off"),onLabel:e("on"),dataTestId:"settings-page-dismiss-smart-account-suggestion-enabled-toggle"})))}renderToggleStxOptIn(){const{t:e}=this.context,{smartTransactionsEnabled:t,setSmartTransactionsEnabled:n}=this.props,a=o.default.createElement(l.ButtonLink,{size:l.ButtonLinkSize.Inherit,textProps:{variant:d.TextVariant.bodyMd,alignItems:d.AlignItems.flexStart},as:"a",href:i.SMART_TRANSACTIONS_LEARN_MORE_URL,target:"_blank",rel:"noopener noreferrer"},e("learnMoreUpperCase"));return o.default.createElement(l.Box,{ref:this.settingsRefs[4],className:"settings-page__content-row","data-testid":"advanced-setting-enable-smart-transactions",display:d.Display.Flex,flexDirection:d.FlexDirection.Row,justifyContent:d.JustifyContent.spaceBetween,gap:[null,4]},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("smartTransactions")),o.default.createElement("div",{className:"settings-page__content-description"},e("stxOptInSupportedNetworksDescription",[a]))),o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(u.default,{value:t,onToggle:e=>{n(!e)},offLabel:e("off"),onLabel:e("on"),dataTestId:"settings-page-stx-opt-in-toggle"})))}renderHexDataOptIn(){const{t:e}=this.context,{sendHexData:t,setHexDataFeatureFlag:n}=this.props;return o.default.createElement(l.Box,{ref:this.settingsRefs[5],className:"settings-page__content-row",display:d.Display.Flex,flexDirection:d.FlexDirection.Row,justifyContent:d.JustifyContent.spaceBetween,gap:[null,4],"data-testid":"advanced-setting-hex-data"},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("showHexData")),o.default.createElement("div",{className:"settings-page__content-description"},e("showHexDataDescription"))),o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(u.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on"),className:"hex-data-toggle"})))}renderShowConversionInTestnets(){const{t:e}=this.context,{showFiatInTestnets:t,setShowFiatConversionOnTestnetsPreference:n}=this.props;return o.default.createElement(l.Box,{ref:this.settingsRefs[6],className:"settings-page__content-row",display:d.Display.Flex,flexDirection:d.FlexDirection.Row,justifyContent:d.JustifyContent.spaceBetween,gap:[null,4],"data-testid":"advanced-setting-show-testnet-conversion"},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("showFiatConversionInTestnets")),o.default.createElement("div",{className:"settings-page__content-description"},e("showFiatConversionInTestnetsDescription"))),o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(u.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on"),className:"show-fiat-on-testnets-toggle"})))}renderToggleTestNetworks(){const{t:e}=this.context,{showTestNetworks:t,setShowTestNetworks:n}=this.props;return o.default.createElement(l.Box,{ref:this.settingsRefs[5],className:"settings-page__content-row","data-testid":"advanced-setting-show-testnet-conversion",display:d.Display.Flex,flexDirection:d.FlexDirection.Row,justifyContent:d.JustifyContent.spaceBetween,gap:[null,4]},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("showTestnetNetworks")),o.default.createElement("div",{className:"settings-page__content-description"},e("showTestnetNetworksDescription"))),o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(u.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on")})))}renderToggleExtensionInFullSizeView(){const{t:e}=this.context,{showExtensionInFullSizeView:t,setShowExtensionInFullSizeView:n}=this.props;return o.default.createElement(l.Box,{ref:this.settingsRefs[8],className:"settings-page__content-row","data-testid":"advanced-setting-show-extension-in-full-size-view",display:d.Display.Flex,flexDirection:d.FlexDirection.Row,justifyContent:d.JustifyContent.spaceBetween,gap:[null,4]},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("showExtensionInFullSizeView")),o.default.createElement("div",{className:"settings-page__content-description"},e("showExtensionInFullSizeViewDescription"))),o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(u.default,{value:t,onToggle:e=>{n(!e),this.context.trackEvent({event:s.MetaMetricsEventName.SettingsUpdated,category:s.MetaMetricsEventCategory.Settings,properties:{settings_group:"advanced",settings_type:"open_full_screen",old_value:e,new_value:!e,open_full_screen:!e,location:"Advanced Settings"}})},offLabel:e("off"),onLabel:e("on")})))}renderAutoLockTimeLimit(){const{t:e}=this.context,{lockTimeError:t}=this.state,{setAutoLockTimeLimit:n}=this.props;return o.default.createElement(l.Box,{ref:this.settingsRefs[7],className:"settings-page__content-row","data-testid":"advanced-setting-auto-lock",display:d.Display.Flex,flexDirection:d.FlexDirection.Column},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("autoLockTimeLimit")),o.default.createElement("div",{className:"settings-page__content-description"},e("autoLockTimeLimitDescription"))),o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(c.default,{id:"autoTimeout","data-testid":"auto-lockout-time",placeholder:"0",value:this.state.autoLockTimeLimitBeforeNormalization,onChange:e=>this.handleLockChange(e.target.value),error:t,fullWidth:!0,margin:"dense",min:0}),o.default.createElement(l.Button,{variant:l.ButtonVariant.Secondary,"data-testid":"auto-lockout-button",disabled:""!==t,onClick:()=>{n(this.state.autoLockTimeLimit)}},e("save")))))}renderDismissSeedBackupReminderControl(){const{t:e}=this.context,{dismissSeedBackUpReminder:t,setDismissSeedBackUpReminder:n}=this.props;return o.default.createElement(l.Box,{ref:this.settingsRefs[9],className:"settings-page__content-row","data-testid":"advanced-setting-dismiss-reminder",display:d.Display.Flex,flexDirection:d.FlexDirection.Row,justifyContent:d.JustifyContent.spaceBetween,gap:[null,4]},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("dismissReminderField")),o.default.createElement("div",{className:"settings-page__content-description"},e("dismissReminderDescriptionField"))),o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(u.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on")})))}handleLockChange(e){const{t:t}=this.context;if(""===e)return void this.setState({autoLockTimeLimitBeforeNormalization:e,autoLockTimeLimit:r.DEFAULT_AUTO_LOCK_TIME_LIMIT,lockTimeError:""});const n=Number(e);if(Number.isNaN(n)||n<0||n>10080)return void this.setState({autoLockTimeLimitBeforeNormalization:e,autoLockTimeLimit:null,lockTimeError:t("lockTimeInvalid")});const a=n;this.setState({autoLockTimeLimitBeforeNormalization:e,autoLockTimeLimit:a,lockTimeError:""})}renderUserDataBackup(){const{t:e}=this.context;return o.default.createElement(l.Box,{ref:this.settingsRefs[10],className:"settings-page__content-row","data-testid":"advanced-setting-data-backup",display:d.Display.Flex,flexDirection:d.FlexDirection.Column},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("exportYourData")),o.default.createElement("span",{className:"settings-page__content-description"},e("exportYourDataDescription"))),o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(l.Button,{"data-testid":"export-data-button",variant:l.ButtonVariant.Secondary,large:!0,onClick:this.backupUserData},e("exportYourDataButton")))))}renderManageInstitutionalWallets(){const{t:e}=this.context,{manageInstitutionalWallets:t,setManageInstitutionalWallets:n}=this.props;return o.default.createElement(l.Box,{ref:this.settingsRefs[9],className:"settings-page__content-row","data-testid":"advanced-setting-dismiss-reminder",display:d.Display.Flex,flexDirection:d.FlexDirection.Row,justifyContent:d.JustifyContent.spaceBetween,gap:[null,4]},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,e("manageInstitutionalWallets")),o.default.createElement("div",{className:"settings-page__content-description"},e("manageInstitutionalWalletsDescription"))),o.default.createElement("div",{className:"settings-page__content-item-col"},o.default.createElement(u.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on")})))}render(){const{errorInSettings:e}=this.props;return o.default.createElement("div",{className:"settings-page__body"},e?o.default.createElement("div",{className:"settings-tab__error"},e):null,this.renderStateLogs(),this.renderResetAccount(),this.renderToggleSmartAccountOptIn(),this.renderToggleDismissSmartAccountSuggestion(),this.renderToggleStxOptIn(),this.renderHexDataOptIn(),this.renderShowConversionInTestnets(),this.renderToggleTestNetworks(),this.renderManageInstitutionalWallets(),this.renderToggleExtensionInFullSizeView(),this.renderAutoLockTimeLimit(),this.renderUserDataBackup(),this.renderDismissSeedBackupReminderControl())}}n.default=y,h(y,"contextTypes",{t:a.default.func,trackEvent:a.default.func}),h(y,"propTypes",{setHexDataFeatureFlag:a.default.func,displayErrorInSettings:a.default.func,hideErrorInSettings:a.default.func,showResetAccountConfirmationModal:a.default.func,errorInSettings:a.default.string,sendHexData:a.default.bool,showFiatInTestnets:a.default.bool,showTestNetworks:a.default.bool,smartTransactionsEnabled:a.default.bool,autoLockTimeLimit:a.default.number,setAutoLockTimeLimit:a.default.func.isRequired,setShowFiatConversionOnTestnetsPreference:a.default.func.isRequired,setShowTestNetworks:a.default.func.isRequired,setSmartTransactionsEnabled:a.default.func.isRequired,setDismissSeedBackUpReminder:a.default.func.isRequired,dismissSeedBackUpReminder:a.default.bool.isRequired,backupUserData:a.default.func.isRequired,showExtensionInFullSizeView:a.default.bool,setShowExtensionInFullSizeView:a.default.func.isRequired,manageInstitutionalWallets:a.default.bool,setManageInstitutionalWallets:a.default.func.isRequired,dismissSmartAccountSuggestionEnabled:a.default.bool.isRequired,setDismissSmartAccountSuggestionEnabled:a.default.func.isRequired,smartAccountOptIn:a.default.bool.isRequired,setSmartAccountOptIn:a.default.func.isRequired})}}},{package:"$root$",file:"ui/pages/settings/advanced-tab/advanced-tab.component.js"}],[7742,{"../../../../shared/constants/preferences":5622,"../../../../shared/modules/selectors":5751,"../../../ducks/app/app":6868,"../../../selectors":7886,"../../../store/actions":7916,"./advanced-tab.component":7741,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mapStateToProps=n.mapDispatchToProps=n.default=void 0;var a,o=e("react-redux"),s=e("../../../../shared/constants/preferences"),r=e("../../../selectors"),i=e("../../../store/actions"),l=e("../../../../shared/modules/selectors"),c=e("../../../ducks/app/app"),u=(a=e("./advanced-tab.component"))&&a.__esModule?a:{default:a};const d=e=>{const{appState:{errorInSettings:t},metamask:n}=e,{featureFlags:{sendHexData:a}={},dismissSeedBackUpReminder:o,manageInstitutionalWallets:i}=n,{showFiatInTestnets:c,showTestNetworks:u,showExtensionInFullSizeView:d,autoLockTimeLimit:p=s.DEFAULT_AUTO_LOCK_TIME_LIMIT,dismissSmartAccountSuggestionEnabled:m,smartAccountOptIn:f}=(0,r.getPreferences)(e);return{errorInSettings:t,sendHexData:a,showFiatInTestnets:c,showTestNetworks:u,showExtensionInFullSizeView:d,smartTransactionsEnabled:(0,l.getSmartTransactionsPreferenceEnabled)(e),autoLockTimeLimit:p,dismissSeedBackUpReminder:o,manageInstitutionalWallets:i,dismissSmartAccountSuggestionEnabled:m,smartAccountOptIn:f}};n.mapStateToProps=d;const p=e=>({backupUserData:()=>(0,i.backupUserData)(),setHexDataFeatureFlag:t=>e((0,i.setFeatureFlag)("sendHexData",t)),displayErrorInSettings:t=>e((0,c.displayErrorInSettings)(t)),hideErrorInSettings:()=>e((0,c.hideErrorInSettings)()),showResetAccountConfirmationModal:()=>e((0,i.showModal)({name:"CONFIRM_RESET_ACCOUNT"})),setShowFiatConversionOnTestnetsPreference:t=>e((0,i.setShowFiatConversionOnTestnetsPreference)(t)),setShowTestNetworks:t=>e((0,i.setShowTestNetworks)(t)),setShowExtensionInFullSizeView:t=>e((0,i.setShowExtensionInFullSizeView)(t)),setSmartTransactionsEnabled:t=>e((0,i.setSmartTransactionsPreferenceEnabled)(t)),setAutoLockTimeLimit:t=>e((0,i.setAutoLockTimeLimit)(t)),setDismissSeedBackUpReminder:t=>e((0,i.setDismissSeedBackUpReminder)(t)),setManageInstitutionalWallets:t=>e((0,i.setManageInstitutionalWallets)(t)),setDismissSmartAccountSuggestionEnabled:t=>e((0,i.setDismissSmartAccountSuggestionEnabled)(t)),setSmartAccountOptIn:t=>e((0,i.setSmartAccountOptIn)(t))});n.mapDispatchToProps=p;n.default=(0,o.connect)(d,p)(u.default)}}},{package:"$root$",file:"ui/pages/settings/advanced-tab/advanced-tab.container.js"}],[7743,{"./advanced-tab.container":7742},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./advanced-tab.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/advanced-tab/index.js"}],[7744,{"../../../components/app/identity/backup-and-sync-features-toggles/backup-and-sync-features-toggles":5923,"../../../components/app/identity/backup-and-sync-toggle/backup-and-sync-toggle":5924,"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/settings-search":6949,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=(a=e("prop-types"))&&a.__esModule?a:{default:a},r=e("../../../helpers/utils/settings-search"),i=e("../../../helpers/constants/design-system"),l=e("../../../components/component-library"),c=e("../../../components/app/identity/backup-and-sync-features-toggles/backup-and-sync-features-toggles"),u=e("../../../components/app/identity/backup-and-sync-toggle/backup-and-sync-toggle");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends o.PureComponent{constructor(...e){super(...e),p(this,"settingsRefs",Array((0,r.getNumberOfSettingRoutesInTab)(this.context.t,this.context.t("backupAndSync"))).fill(undefined).map(()=>o.default.createRef()))}componentDidUpdate(){const{t:e}=this.context;(0,r.handleSettingsRefs)(e,e("backupAndSync"),this.settingsRefs)}componentDidMount(){const{t:e}=this.context;(0,r.handleSettingsRefs)(e,e("backupAndSync"),this.settingsRefs)}render(){return o.default.createElement("div",{className:"settings-page__body"},o.default.createElement(u.BackupAndSyncToggle,null),o.default.createElement(l.Box,{borderColor:i.BorderColor.borderMuted,width:i.BlockSize.Full,style:{height:"1px",borderBottomWidth:0}}),o.default.createElement(c.BackupAndSyncFeaturesToggles,null))}}n.default=m,p(m,"contextTypes",{t:s.default.func,trackEvent:s.default.func})}}},{package:"$root$",file:"ui/pages/settings/backup-and-sync-tab/backup-and-sync-tab.component.tsx"}],[7745,{"./backup-and-sync-tab.component":7744,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=e("react-redux"),s=(a=e("./backup-and-sync-tab.component"))&&a.__esModule?a:{default:a};n.default=(0,o.connect)(e=>({}),e=>({}))(s.default)}}},{package:"$root$",file:"ui/pages/settings/backup-and-sync-tab/backup-and-sync-tab.container.ts"}],[7746,{"./backup-and-sync-tab.container":7745},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./backup-and-sync-tab.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/backup-and-sync-tab/index.ts"}],[7747,{"../../../../../shared/modules/hexstring-utils":5741,"../../../../../shared/modules/selectors/networks":5753,"../../../../components/app/contact-list/utils":5902,"../../../../components/component-library":6325,"../../../../components/multichain/pages/send/components":6686,"../../../../components/ui/page-container/page-container-footer":6799,"../../../../components/ui/text-field":6827,"../../../../contexts/i18n":6850,"../../../../helpers/constants/design-system":6899,"../../../../helpers/constants/routes":6904,"../../../../helpers/utils/util":6959,"../../../../selectors/multichain":7895,"../../../confirmations/send-legacy/send-content/add-recipient/domain-input":7576,"../../../confirmations/send-legacy/send.constants":7577,"../contact-networks":7752,lodash:4635,"prop-types":4893,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=x(e("prop-types")),s=e("lodash"),r=e("react-redux"),i=x(e("../../../../components/ui/text-field")),l=e("../../../../helpers/constants/routes"),c=e("../../../../helpers/utils/util"),u=x(e("../../../confirmations/send-legacy/send-content/add-recipient/domain-input")),d=x(e("../../../../components/ui/page-container/page-container-footer")),p=e("../../../../../shared/modules/hexstring-utils"),m=e("../../../confirmations/send-legacy/send.constants"),f=e("../../../../components/multichain/pages/send/components"),g=e("../../../../components/app/contact-list/utils"),h=e("../../../../contexts/i18n"),y=e("../../../../components/component-library"),_=e("../../../../helpers/constants/design-system"),v=e("../../../../selectors/multichain"),E=e("../../../../../shared/modules/selectors/networks"),b=e("../contact-networks");function x(e){return e&&e.__esModule?e:{default:e}}function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}const T=({addressBook:e,internalAccounts:t,addToAddressBook:n,navigate:o,scanQrCode:x,qrCodeData:k,qrCodeDetected:T,domainResolutions:w,domainError:S,resetDomainResolution:C})=>{var N,I;const R=(0,a.useContext)(h.I18nContext),[O,M]=(0,a.useState)(""),[A,P]=(0,a.useState)(""),[D,B]=(0,a.useState)(""),[L,F]=(0,a.useState)(""),[j,U]=(0,a.useState)(""),W=(0,r.useSelector)(E.getCurrentChainId),[z,$]=(0,a.useState)(W),[q,V]=(0,a.useState)(!1),G=(0,r.useSelector)(E.getNetworkConfigurationsByChainId),H=(0,a.useCallback)(e=>{const t=!(0,p.isBurnAddress)(e)&&(0,p.isValidHexAddress)(e,{mixedCaseUseChecksum:!0}),n=(0,c.isValidDomainName)(e);B(n||t?null:m.INVALID_RECIPIENT_ADDRESS_ERROR)},[]),J=(0,a.useMemo)(()=>(0,s.debounce)(H,500),[H]),K=n=>{const a=!(0,g.isDuplicateContact)(e,t,n);F(a?null:R("nameAlreadyInUse")),M(n)},Y=e=>{U(e),J(e)};(0,a.useEffect)(()=>{if("address"===(null==k?void 0:k.type)){const e=k.values.address.toLowerCase();[...w.map(({resolvedAddress:e})=>e),A].filter(Boolean).map(e=>e.toLowerCase()).includes(e)||(U(e),H(e),T(null))}},[k,w,A,H,T]);const X=S||D,Q=A||j,Z=!(0,p.isBurnAddress)(Q)&&(0,p.isValidHexAddress)(Q,{mixedCaseUseChecksum:!0});return a.default.createElement("div",{className:"settings-page__content-row address-book__add-contact"},a.default.createElement("div",{className:"address-book__add-contact__content"},a.default.createElement("div",{className:"address-book__view-contact__group address-book__add-contact__content__username"},a.default.createElement("div",{className:"address-book__view-contact__group__label"},R("userName")),a.default.createElement(i.default,{type:"text",id:"nickname",placeholder:R("addAlias"),value:O,onChange:e=>K(e.target.value),fullWidth:!0,margin:"dense",error:L})),a.default.createElement("div",{className:"address-book__view-contact__group"},a.default.createElement("div",{className:"address-book__view-contact__group__label"},R("ethereumPublicAddress")),a.default.createElement(u.default,{scanQrCode:()=>x(),onChange:Y,onPaste:e=>{U(e),H(e)},onReset:()=>{C(),U(""),P("")},userInput:A||j}),a.default.createElement("div",{className:`address-book__view-contact__group__${1===(null==w?void 0:w.length)?"single-":""}resolution-list`},null==w?void 0:w.map(e=>{const{resolvedAddress:t,resolvingSnap:n,addressBookEntryName:o,protocol:s,domainName:r}=e;return a.default.createElement(f.DomainInputResolutionCell,{key:`${t}${n}${s}`,address:t,domainName:o??r,onClick:()=>{K(r),U(t),C()},protocol:s,resolvingSnap:n})})),X&&a.default.createElement("div",{className:"address-book__add-contact__error"},R(X))),a.default.createElement("div",{className:"address-book__view-contact__group"},a.default.createElement("div",{className:"address-book__view-contact__group__label"},R("network")),a.default.createElement(y.Box,{as:"button",padding:3,display:_.Display.Flex,alignItems:_.AlignItems.center,backgroundColor:_.BackgroundColor.transparent,borderColor:_.BorderColor.borderDefault,justifyContent:_.JustifyContent.spaceBetween,borderRadius:_.BorderRadius.XL,onClick:()=>V(!0),className:"network-selector","data-testid":"network-selector"},a.default.createElement(y.Box,{display:_.Display.Flex,gap:2},a.default.createElement(y.AvatarNetwork,{size:y.AvatarNetworkSize.Sm,src:(0,v.getImageForChainId)(z)||undefined,name:null==G||null===(N=G[z])||void 0===N?void 0:N.name}),a.default.createElement(y.Text,null,null==G||null===(I=G[z])||void 0===I?void 0:I.name)),a.default.createElement(y.Icon,{name:y.IconName.ArrowDown,color:_.IconColor.iconDefault,size:y.IconSize.Sm})),q&&a.default.createElement(b.ContactNetworks,{isOpen:!0,onClose:()=>V(!1),selectedChainId:z,onSelect:e=>$(e)}))),a.default.createElement(d.default,{cancelText:R("cancel"),disabled:Boolean(D||L||!Z||!O.trim()),onSubmit:async()=>{await n(Q,O,"",z),o(l.CONTACT_LIST_ROUTE)},onCancel:()=>{o(l.CONTACT_LIST_ROUTE)},submitText:R("save")}))};T.propTypes={addressBook:o.default.array,internalAccounts:o.default.array,addToAddressBook:o.default.func,navigate:o.default.func.isRequired,scanQrCode:o.default.func,qrCodeData:o.default.object,qrCodeDetected:o.default.func,domainResolutions:o.default.arrayOf(o.default.object),domainError:o.default.string,resetDomainResolution:o.default.func};n.default=T}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/add-contact/add-contact.component.js"}],[7748,{"../../../../ducks/app/app":6868,"../../../../ducks/domains":6877,"../../../../helpers/higher-order-components/with-router-hooks/with-router-hooks":6922,"../../../../selectors":7886,"../../../../store/actions":7916,"./add-contact.component":7747,"react-redux":5021,redux:5124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("redux"),o=e("react-redux"),s=d(e("../../../../helpers/higher-order-components/with-router-hooks/with-router-hooks")),r=e("../../../../store/actions"),i=e("../../../../ducks/app/app"),l=e("../../../../ducks/domains"),c=e("../../../../selectors"),u=d(e("./add-contact.component"));function d(e){return e&&e.__esModule?e:{default:e}}n.default=(0,a.compose)(s.default,(0,o.connect)(e=>({addressBook:(0,c.getAddressBook)(e),internalAccounts:(0,c.getInternalAccounts)(e),qrCodeData:(0,i.getQrCodeData)(e),domainError:(0,l.getDomainError)(e),domainResolutions:(0,l.getDomainResolutions)(e)}),e=>({addToAddressBook:(t,n,a,o)=>e((0,r.addToAddressBook)(t,n,a,o)),scanQrCode:()=>e((0,r.showQrScanner)()),qrCodeDetected:t=>e((0,r.qrCodeDetected)(t)),resetDomainResolution:()=>e((0,l.resetDomainResolution)())})))(u.default)}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/add-contact/add-contact.container.js"}],[7749,{"./add-contact.container":7748},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./add-contact.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/add-contact/index.js"}],[7750,{"../../../components/app/contact-list":5900,"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../helpers/utils/settings-search":6949,"./add-contact":7749,"./edit-contact":7755,"./view-contact":7757,classnames:3913,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=f(e("prop-types")),s=f(e("classnames")),r=f(e("../../../components/app/contact-list")),i=e("../../../helpers/constants/routes"),l=e("../../../helpers/utils/settings-search"),c=e("../../../components/component-library"),u=e("../../../helpers/constants/design-system"),d=f(e("./edit-contact")),p=f(e("./add-contact")),m=f(e("./view-contact"));function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends a.Component{constructor(...e){super(...e),h(this,"settingsRefs",Array((0,l.getNumberOfSettingRoutesInTab)(this.context.t,this.context.t("contacts"))).fill(undefined).map(()=>a.default.createRef()))}componentDidUpdate(){const{t:e}=this.context;(0,l.handleSettingsRefs)(e,e("contacts"),this.settingsRefs)}componentDidMount(){const{t:e}=this.context;(0,l.handleSettingsRefs)(e,e("contacts"),this.settingsRefs)}renderAddresses(){const{completeAddressBook:e,internalAccounts:t,navigate:n,selectedAddress:o}=this.props,s=Object.entries(e).map(([e,t])=>t),l=s.filter(({name:e})=>Boolean(e)),d=s.filter(({name:e})=>!e),{t:p}=this.context;return s.length?a.default.createElement("div",null,a.default.createElement(r.default,{addressBook:s,internalAccounts:t,searchForContacts:()=>l,searchForRecents:()=>d,selectRecipient:e=>{n(`${i.CONTACT_VIEW_ROUTE}/${e}`)},selectedAddress:o})):a.default.createElement("div",{className:"address-book__container"},a.default.createElement("div",null,a.default.createElement(c.Icon,{name:c.IconName.Book,color:u.IconColor.iconMuted,className:"address-book__icon",size:c.IconSize.Xl}),a.default.createElement("h4",{className:"address-book__title"},p("buildContactList")),a.default.createElement("p",{className:"address-book__sub-title"},p("addFriendsAndAddresses")),a.default.createElement("button",{className:"address-book__link",onClick:()=>{n(i.CONTACT_ADD_ROUTE)}},"+ ",p("addContact"))))}renderAddButton(){const{navigate:e,viewingContact:t,editingContact:n}=this.props;return a.default.createElement(c.ButtonPrimary,{className:(0,s.default)("address-book-add-button__button",{"address-book-add-button__button--hidden":t||n}),onClick:()=>{e(i.CONTACT_ADD_ROUTE)},margin:4,size:u.Size.LG},this.context.t("addContact"))}renderContactContent(){const{viewingContact:e,editingContact:t,addingContact:n}=this.props;let o=null;return e?o=m.default:t?o=d.default:n&&(o=p.default),o&&a.default.createElement("div",{className:"address-book-contact-content"},a.default.createElement(o,null))}renderAddressBookContent(){const{hideAddressBook:e}=this.props;return e?null:a.default.createElement("div",{ref:this.settingsRefs[0],className:"address-book"},this.renderAddresses())}render(){const{addingContact:e,currentPath:t,completeAddressBook:n}=this.props,o=n;return a.default.createElement("div",{className:"address-book-wrapper"},this.renderAddressBookContent(),this.renderContactContent(),t===i.CONTACT_LIST_ROUTE&&!e&&o.length>0?this.renderAddButton():null)}}n.default=y,h(y,"contextTypes",{t:o.default.func}),h(y,"propTypes",{completeAddressBook:o.default.array,internalAccounts:o.default.array,navigate:o.default.func.isRequired,selectedAddress:o.default.string,viewingContact:o.default.bool,editingContact:o.default.bool,addingContact:o.default.bool,hideAddressBook:o.default.bool,currentPath:o.default.string})}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/contact-list-tab.component.js"}],[7751,{"../../../helpers/constants/routes":6904,"../../../helpers/higher-order-components/with-router-hooks/with-router-hooks":6922,"../../../selectors":7886,"./contact-list-tab.component":7750,"react-redux":5021,redux:5124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("redux"),o=e("react-redux"),s=c(e("../../../helpers/higher-order-components/with-router-hooks/with-router-hooks")),r=e("../../../selectors"),i=e("../../../helpers/constants/routes"),l=c(e("./contact-list-tab.component"));function c(e){return e&&e.__esModule?e:{default:e}}n.default=(0,a.compose)(s.default,(0,o.connect)((e,t)=>{const{location:n}=t,{pathname:a}=n,o=a.match(/[^/]+$/u)[0],s=o.includes("0x"),l=Boolean(a.match(i.CONTACT_VIEW_ROUTE)),c=Boolean(a.match(i.CONTACT_EDIT_ROUTE)),u=Boolean(a.match(i.CONTACT_ADD_ROUTE)),d=l||c||u;return{viewingContact:l,editingContact:c,addingContact:u,addressBook:(0,r.getAddressBook)(e),completeAddressBook:(0,r.getCompleteAddressBook)(e),internalAccounts:(0,r.getInternalAccounts)(e),selectedAddress:s?o:"",hideAddressBook:d,currentPath:a}}))(l.default)}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/contact-list-tab.container.js"}],[7752,{"../../../../shared/constants/bridge":5600,"../../../../shared/constants/network":5617,"../../../../shared/modules/selectors/networks":5753,"../../../components/component-library":6325,"../../../components/multichain":6568,"../../../helpers/constants/design-system":6899,"../../../hooks/useI18nContext":7047,"../../../selectors/multichain":7895,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ContactNetworks=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),s=e("../../../helpers/constants/design-system"),r=e("../../../components/component-library"),i=e("../../../../shared/modules/selectors/networks"),l=e("../../../../shared/constants/network"),c=e("../../../hooks/useI18nContext"),u=e("../../../../shared/constants/bridge"),d=e("../../../components/multichain"),p=e("../../../selectors/multichain");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}n.ContactNetworks=({isOpen:e,onClose:t,selectedChainId:n,onSelect:m})=>{const f=(0,c.useI18nContext)(),g=(0,o.useSelector)(i.getNetworkConfigurationsByChainId),[h,y]=(0,a.useMemo)(()=>Object.entries(g).reduce(([e,t],[n,a])=>((l.TEST_CHAINS.includes(n)?t:e).push(a),[e,t]),[[],[]]),[g]),_=e=>e.map(({name:e,chainId:o})=>a.default.createElement(d.NetworkListItem,{key:o,name:u.NETWORK_TO_SHORT_NETWORK_NAME_MAP[o]??e,selected:n===o,onClick:()=>{null==m||m(o),t()},iconSrc:(0,p.getImageForChainId)(o),iconSize:r.AvatarNetworkSize.Sm,focus:!1,variant:s.TextVariant.bodyMdMedium}));return a.default.createElement(r.Modal,{isOpen:e,onClose:t,className:"multichain-asset-picker__network-modal"},a.default.createElement(r.ModalOverlay,null),a.default.createElement(r.ModalContent,{modalDialogProps:{padding:0}},a.default.createElement(r.ModalHeader,{onBack:t,onClose:t},f("bridgeSelectNetwork")),a.default.createElement(r.Box,{className:"multichain-asset-picker__network-list",display:s.Display.Flex},a.default.createElement(r.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,width:s.BlockSize.Full},_(h),a.default.createElement(r.Box,{padding:4},a.default.createElement(r.Text,{variant:s.TextVariant.bodyMdMedium},f("testnets")),_(y))))))}}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/contact-networks.tsx"}],[7753,{"../../../../../shared/modules/hexstring-utils":5741,"../../../../components/app/contact-list/utils":5902,"../../../../components/app/preferred-avatar":6033,"../../../../components/component-library":6325,"../../../../components/ui/page-container/page-container-footer":6799,"../../../../components/ui/text-field":6827,"../../../../contexts/i18n":6850,"../../../../helpers/constants/design-system":6899,"../../../../selectors/multichain":7895,"../contact-networks":7752,"@metamask/design-system-react":1741,"prop-types":4893,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=v;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=y(e("prop-types")),s=e("react-router-dom-v5-compat"),r=e("@metamask/design-system-react"),i=y(e("../../../../components/ui/text-field")),l=y(e("../../../../components/ui/page-container/page-container-footer")),c=e("../../../../components/app/preferred-avatar"),u=e("../../../../../shared/modules/hexstring-utils"),d=e("../../../../components/component-library"),p=e("../../../../helpers/constants/design-system"),m=e("../../../../components/app/contact-list/utils"),f=e("../../../../selectors/multichain"),g=e("../../../../contexts/i18n"),h=e("../contact-networks");function y(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function v({addressBook:e,internalAccounts:t,networkConfigurations:n,addToAddressBook:o,removeFromAddressBook:y,name:_="",address:v,contactChainId:E,memo:b="",viewRoute:x,listRoute:k}){var T,w;const S=(0,a.useContext)(g.I18nContext),C=(0,s.useNavigate)(),[N,I]=(0,a.useState)(_),[R,O]=(0,a.useState)(v),[M,A]=(0,a.useState)(b),[P,D]=(0,a.useState)(""),[B,L]=(0,a.useState)(""),[F,j]=(0,a.useState)(!1),[U,W]=(0,a.useState)(E),z=n;return v?a.default.createElement("div",{className:"settings-page__content-row address-book__edit-contact","data-testid":"edit-contact"},a.default.createElement(d.Box,{className:"settings-page__header address-book__header--edit",paddingLeft:6,paddingRight:6,width:p.BlockSize.Full,alignItems:p.AlignItems.center},a.default.createElement(d.Box,{display:p.Display.Flex,alignItems:p.AlignItems.center,style:{overflow:"hidden"},paddingRight:2},a.default.createElement(c.PreferredAvatar,{size:r.AvatarAccountSize.Lg,address:v}),a.default.createElement(d.Text,{className:"address-book__header__name",variant:p.TextVariant.bodyLgMedium,marginInlineStart:4,style:{overflow:"hidden"},ellipsis:!0},_||v)),a.default.createElement(d.Box,{className:"settings-page__address-book-button"},a.default.createElement(d.Button,{variant:d.ButtonVariant.Link,danger:!0,style:{display:"contents"},onClick:async()=>{await y(E,v),C(k)},"data-testid":"delete-contact-button"},S("deleteContact")))),a.default.createElement("div",{className:"address-book__edit-contact__content"},a.default.createElement("div",{className:"address-book__view-contact__group","data-testid":"edit-contact-alias"},a.default.createElement("div",{className:"address-book__view-contact__group__label"},S("userName")),a.default.createElement(i.default,{id:"nickname","data-testid":"address-book-edit-contact-name",placeholder:S("addAlias"),value:N,onChange:n=>{const a=n.target.value;D((n=>n===_||!(0,m.isDuplicateContact)(e,t,n))(a)?"":S("nameAlreadyInUse")),I(a)},error:P,fullWidth:!0,className:"text-field-root",margin:"dense"})),a.default.createElement("div",{className:"address-book__view-contact__group","data-testid":"edit-contact-address"},a.default.createElement("div",{className:"address-book__view-contact__group__label"},S("ethereumPublicAddress")),a.default.createElement(i.default,{id:"address","data-testid":"address-book-edit-contact-address",value:R,onChange:e=>O(e.target.value),error:B,fullWidth:!0,multiline:!0,className:"text-field-root",margin:"dense"})),a.default.createElement("div",{className:"address-book__view-contact__group","data-testid":"edit-contact-memo"},a.default.createElement("div",{className:"address-book__view-contact__group__label--capitalized"},S("memo")),a.default.createElement(i.default,{id:"memo",placeholder:b,value:M,onChange:e=>A(e.target.value),fullWidth:!0,multiline:!0,className:"text-field-root",margin:"dense"})),a.default.createElement("div",{className:"address-book__view-contact__group"},a.default.createElement("div",{className:"address-book__view-contact__group__label"},S("network")),a.default.createElement(d.Box,{as:"button",padding:3,display:p.Display.Flex,alignItems:p.AlignItems.center,backgroundColor:p.BackgroundColor.transparent,borderColor:p.BorderColor.borderDefault,justifyContent:p.JustifyContent.spaceBetween,borderRadius:p.BorderRadius.XL,onClick:()=>j(!0),className:"network-selector","data-testid":"network-selector",marginTop:2},a.default.createElement(d.Box,{display:p.Display.Flex,gap:2},a.default.createElement(d.AvatarNetwork,{size:d.AvatarNetworkSize.Sm,src:(0,f.getImageForChainId)(U)||undefined,name:null==z||null===(T=z[U])||void 0===T?void 0:T.name}),a.default.createElement(d.Text,{"data-testid":"address-book-edit-contact-network"},null==z||null===(w=z[U])||void 0===w?void 0:w.name)),a.default.createElement(d.Icon,{name:d.IconName.ArrowDown,color:p.IconColor.iconDefault,size:d.IconSize.Sm})))),a.default.createElement(l.default,{cancelText:S("cancel"),onSubmit:async()=>{const e=U!==E;R&&R!==v?!(0,u.isBurnAddress)(R)&&(0,u.isValidHexAddress)(R,{mixedCaseUseChecksum:!0})?(await y(E,v),await o(R,N||_,M||b,U),C(k)):L(S("invalidAddress")):e?(await y(E,v),await o(v,N||_,M||b,U),C(k)):(await o(v,N||_,M||b,U),C(k))},onCancel:()=>C(`${x}/${v}`),submitText:S("save"),disabled:Boolean(N===_&&R===v&&U===E&&M===b||!N.trim()||P)}),F&&a.default.createElement(h.ContactNetworks,{isOpen:!0,onClose:()=>j(!1),selectedChainId:U,onSelect:e=>W(e)})):a.default.createElement(s.Navigate,{to:{pathname:k}})}v.propTypes={addressBook:o.default.array,internalAccounts:o.default.array,networkConfigurations:o.default.array,addToAddressBook:o.default.func.isRequired,removeFromAddressBook:o.default.func.isRequired,name:o.default.string,address:o.default.string.isRequired,contactChainId:o.default.string,memo:o.default.string,viewRoute:o.default.string.isRequired,listRoute:o.default.string.isRequired}}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/edit-contact/edit-contact.component.js"}],[7754,{"../../../../../shared/modules/selectors/networks":5753,"../../../../helpers/constants/routes":6904,"../../../../helpers/higher-order-components/with-router-hooks/with-router-hooks":6922,"../../../../selectors":7886,"../../../../store/actions":7916,"./edit-contact.component":7753,"react-redux":5021,redux:5124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("redux"),o=e("react-redux"),s=d(e("../../../../helpers/higher-order-components/with-router-hooks/with-router-hooks")),r=e("../../../../selectors"),i=e("../../../../../shared/modules/selectors/networks"),l=e("../../../../helpers/constants/routes"),c=e("../../../../store/actions"),u=d(e("./edit-contact.component"));function d(e){return e&&e.__esModule?e:{default:e}}n.default=(0,a.compose)(s.default,(0,o.connect)((e,t)=>{var n;const{location:a,params:o}=t,s=a.pathname.match(/[^/]+$/u)[0],c=s.includes("0x")?s.toLowerCase():o.id,u=(0,r.getAddressBookEntry)(e,c),d=(0,i.getNetworkConfigurationsByChainId)(e),{memo:p}=u||{},m=(null==u?void 0:u.name)||(null===(n=(0,r.getInternalAccountByAddress)(e,c))||void 0===n?void 0:n.metadata.name),{chainId:f}=(0,i.getProviderConfig)(e),g=(null==u?void 0:u.chainId)||f;return{address:u?c:null,addressBook:(0,r.getAddressBook)(e),internalAccounts:(0,r.getInternalAccounts)(e),contactChainId:g,name:m,memo:p,networkConfigurations:d,viewRoute:l.CONTACT_VIEW_ROUTE,listRoute:l.CONTACT_LIST_ROUTE}},e=>({addToAddressBook:(t,n,a,o)=>e((0,c.addToAddressBook)(t,n,a,o)),removeFromAddressBook:(t,n)=>e((0,c.removeFromAddressBook)(t,n)),toggleNetworkMenu:()=>e((0,c.toggleNetworkMenu)())})))(u.default)}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/edit-contact/edit-contact.container.js"}],[7755,{"./edit-contact.container":7754},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./edit-contact.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/edit-contact/index.js"}],[7756,{"./contact-list-tab.container":7751},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./contact-list-tab.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/index.js"}],[7757,{"./view-contact.container":7759},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./view-contact.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/view-contact/index.js"}],[7758,{"../../../../components/app/preferred-avatar":6033,"../../../../components/component-library":6325,"../../../../components/ui/tooltip":6835,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useCopyToClipboard":7033,"../../../../hooks/useI18nContext":7047,"@metamask/design-system-react":1741,"prop-types":4893,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=m(e("react")),o=m(e("prop-types")),s=e("react-router-dom-v5-compat"),r=e("@metamask/design-system-react"),i=e("../../../../components/component-library"),l=e("../../../../components/app/preferred-avatar"),c=m(e("../../../../components/ui/tooltip")),u=e("../../../../hooks/useI18nContext"),d=e("../../../../hooks/useCopyToClipboard"),p=e("../../../../helpers/constants/design-system");function m(e){return e&&e.__esModule?e:{default:e}}function f({navigate:e,name:t,address:n,checkSummedAddress:o,memo:m,editRoute:f,listRoute:g}){const h=(0,u.useI18nContext)(),[y,_]=(0,d.useCopyToClipboard)();return n?a.default.createElement("div",{className:"settings-page__content-row"},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement(i.Box,{className:"settings-page__header address-book__header",paddingLeft:6,paddingRight:6},a.default.createElement(l.PreferredAvatar,{size:r.AvatarAccountSize.Lg,address:n}),a.default.createElement(i.Text,{className:"address-book__header__name","data-testid":"address-book-name",variant:p.TextVariant.bodyLgMedium,marginInlineStart:4,style:{overflow:"hidden"},ellipsis:!0},t||n)),a.default.createElement("div",{className:"address-book__view-contact__group"},a.default.createElement(i.Button,{variant:i.ButtonVariant.Secondary,onClick:()=>{e(`${f}/${n}`)}},h("edit"))),a.default.createElement("div",{className:"address-book__view-contact__group"},a.default.createElement("div",{className:"address-book__view-contact__group__label"},h("ethereumPublicAddress")),a.default.createElement("div",{className:"address-book__view-contact__group__value"},a.default.createElement("div",{className:"address-book__view-contact__group__static-address","data-testid":"address-book-view-contact-address"},function(e){return`0x${e.slice(2).match(/.{1,4}/gu).join("")}`}(o)),a.default.createElement(c.default,{position:"bottom",title:h(y?"copiedExclamation":"copyToClipboard")},a.default.createElement(i.ButtonIcon,{ariaLabel:"copy",className:"address-book__view-contact__group__static-address--copy-icon",onClick:()=>{_(o)},iconName:y?i.IconName.CopySuccess:i.IconName.Copy,size:i.ButtonIconSize.Lg,color:p.IconColor.primaryDefault})))),m.length>0?a.default.createElement("div",{className:"address-book__view-contact__group"},a.default.createElement("div",{className:"address-book__view-contact__group__label--capitalized"},h("memo")),a.default.createElement("div",{className:"address-book__view-contact__group__static-address"},m)):null)):a.default.createElement(s.Navigate,{to:{pathname:g}})}f.propTypes={name:o.default.string,address:o.default.string,navigate:o.default.func.isRequired,checkSummedAddress:o.default.string,memo:o.default.string,editRoute:o.default.string,listRoute:o.default.string.isRequired};n.default=a.default.memo(f)}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/view-contact/view-contact.component.js"}],[7759,{"../../../../../shared/modules/hexstring-utils":5741,"../../../../helpers/constants/routes":6904,"../../../../helpers/higher-order-components/with-router-hooks/with-router-hooks":6922,"../../../../selectors":7886,"./view-contact.component":7758,"react-redux":5021,redux:5124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("redux"),o=e("react-redux"),s=u(e("../../../../helpers/higher-order-components/with-router-hooks/with-router-hooks")),r=e("../../../../selectors"),i=e("../../../../helpers/constants/routes"),l=e("../../../../../shared/modules/hexstring-utils"),c=u(e("./view-contact.component"));function u(e){return e&&e.__esModule?e:{default:e}}n.default=(0,a.compose)(s.default,(0,o.connect)((e,t)=>{const{location:n,params:a}=t,o=n.pathname.match(/[^/]+$/u)[0],s=o.includes("0x")?o.toLowerCase():a.id,c=(0,r.getInternalAccountByAddress)(e,s),u=(0,r.getAddressBookEntry)(e,s),{memo:d}=u||{};return{name:(null==u?void 0:u.name)||c.metadata.name,address:u?s:null,checkSummedAddress:(0,l.toChecksumHexAddress)(s),memo:d,editRoute:i.CONTACT_EDIT_ROUTE,listRoute:i.CONTACT_LIST_ROUTE}}))(c.default)}}},{package:"$root$",file:"ui/pages/settings/contact-list-tab/view-contact/view-contact.container.js"}],[7760,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/zendesk-url":6911,"../../../hooks/useI18nContext":7047,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DeprecatedNetworkModal=void 0;var a=l(e("react")),o=e("../../../hooks/useI18nContext"),s=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),i=l(e("../../../helpers/constants/zendesk-url"));function l(e){return e&&e.__esModule?e:{default:e}}n.DeprecatedNetworkModal=({onClose:e})=>{const t=(0,o.useI18nContext)();return a.default.createElement(s.Modal,{isOpen:!0,isClosedOnOutsideClick:!1,onClose:e},a.default.createElement(s.ModalOverlay,null),a.default.createElement(s.ModalContent,null,a.default.createElement(s.ModalHeader,{paddingTop:2,paddingBottom:2},t("deprecatedNetwork")),a.default.createElement(s.ModalBody,null,a.default.createElement(s.Box,{paddingBottom:2},a.default.createElement(s.Text,{textAlign:r.TextAlign.Center,variant:r.TextVariant.bodyMd,fontWeight:r.FontWeight.Normal},t("deprecatedNetworkDescription",[a.default.createElement(s.ButtonLink,{key:"import-token-fake-token-warning",rel:"noopener noreferrer",target:"_blank",href:i.default.NETWORK_DEPRECATED,variant:r.TextVariant.bodySm,fontWeight:r.FontWeight.Normal},t("learnMoreUpperCase"))])))),a.default.createElement(s.Box,{display:r.Display.Flex,paddingLeft:4,paddingRight:4,paddingBottom:2},a.default.createElement(s.ButtonPrimary,{block:!0,size:s.ButtonPrimarySize.Lg,onClick:e,textProps:{variant:r.TextVariant.bodyMdMedium},style:{fontSize:"14px"}},t("deprecatedNetworkButtonMsg")))))}}}},{package:"$root$",file:"ui/pages/settings/deprecated-network-modal/DeprecatedNetworkModal.tsx"}],[7761,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../hooks/identity/useAccountSyncing":6985,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDeleteAccountSyncDataProps=n.BackupAndSyncDevSettings=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),r=e("../../../hooks/identity/useAccountSyncing");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const l=({onDelete:e,deleteSuccessful:t,title:n,description:r})=>a.default.createElement("div",{className:"settings-page__content-padded"},a.default.createElement(o.Box,{className:"settings-page__content-row",display:s.Display.Flex,flexDirection:s.FlexDirection.Row,justifyContent:s.JustifyContent.spaceBetween,gap:4},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("span",null,n),a.default.createElement("div",{className:"settings-page__content-description"},r)),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(o.Button,{variant:o.ButtonVariant.Primary,onClick:e},"Reset")),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(o.Box,{display:s.Display.Flex,alignItems:s.AlignItems.center,paddingLeft:2,paddingRight:2,style:{height:"40px",width:"40px"}},a.default.createElement(o.Icon,{className:"settings-page-developer-options__icon-check",name:o.IconName.Check,color:s.IconColor.successDefault,size:o.IconSize.Lg,hidden:!t}))))),c=()=>{const[e,t]=(0,a.useState)(!1),{dispatchDeleteAccountSyncingData:n}=(0,r.useDeleteAccountSyncingDataFromUserStorage)();return{deleteSuccessful:e,onDelete:(0,a.useCallback)(async()=>{await n(),t(!0)},[n,t]),title:"Account syncing",description:"Deletes all user storage entries for the current SRP. This can help if you tested Account Syncing early on and have corrupted data. This will not remove internal accounts already created and renamed. If you want to start from scratch with only the first account and restart syncing from this point on, you will need to reinstall the extension after this action."}};n.useDeleteAccountSyncDataProps=c;n.BackupAndSyncDevSettings=()=>a.default.createElement(a.default.Fragment,null,a.default.createElement(o.Text,{className:"settings-page__security-tab-sub-header__bold"},"Backup and sync"),a.default.createElement(l,c()))}}},{package:"$root$",file:"ui/pages/settings/developer-options-tab/backup-and-sync.tsx"}],[7762,{"../../../../app/scripts/lib/util":353,"../../../../shared/constants/app":5598,"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../helpers/utils/settings-search":6949,"../../../hooks/useI18nContext":7047,"../../../selectors":7886,"../../../store/actions":7916,"./backup-and-sync":7761,"./developer-options-toggle-row-component":7763,"./sentry-test":7765,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),s=e("react-router-dom-v5-compat"),r=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=e("../../../helpers/constants/routes"),c=e("../../../helpers/utils/settings-search"),u=e("../../../hooks/useI18nContext"),d=e("../../../store/actions"),p=e("../../../../app/scripts/lib/util"),m=e("../../../../shared/constants/app"),f=e("../../../selectors"),g=_(e("./developer-options-toggle-row-component")),h=_(e("./sentry-test")),y=e("./backup-and-sync");function _(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}n.default=()=>{const e=(0,u.useI18nContext)(),t=(0,o.useDispatch)(),n=(0,s.useNavigate)(),[_,v]=(0,a.useState)(!1),[E,b]=(0,a.useState)(!1),[x,k]=(0,a.useState)(!0),T=Array((0,c.getNumberOfSettingRoutesInTab)(e,e("developerOptions"))).fill(undefined).map(()=>a.default.createRef());(0,a.useEffect)(()=>{(0,c.handleSettingsRefs)(e,e("developerOptions"),T)},[e,T]);const w=(0,a.useCallback)(()=>{(0,d.resetViewedNotifications)(),v(!0)},[]),S=(0,a.useCallback)(async()=>{await t((0,d.resetOnboarding)()),b(!0);const e=`${l.ONBOARDING_REVIEW_SRP_ROUTE}/?isFromReminder=true`;if((0,p.getEnvironmentType)()===m.ENVIRONMENT_TYPE_POPUP){const{platform:t}=global;null!=t&&t.openExtensionInBrowser&&(null==t||t.openExtensionInBrowser(e,null,!0))}else n(e)},[t,n]),C=(0,o.useSelector)(f.getRemoteFeatureFlags);return a.default.createElement("div",{className:"settings-page__body"},a.default.createElement(r.Text,{className:"settings-page__security-tab-sub-header__bold"},"States"),a.default.createElement(r.Text,{className:"settings-page__security-tab-sub-header",color:i.TextColor.textAlternative,paddingTop:6,ref:T[0]},"Current States"),a.default.createElement("div",{className:"settings-page__content-padded"},a.default.createElement(r.Box,{className:"settings-page__content-row",display:i.Display.Flex,flexDirection:i.FlexDirection.Row,justifyContent:i.JustifyContent.spaceBetween,gap:4},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("span",null,"Remote feature flags"),a.default.createElement("div",{className:"settings-page__content-description"},"Remote feature flag values come from LaunchDarkly by default. If you need to update feature flag values locally for development purposes, you can change feature flag values in .manifest-overrides.json, which will override values coming from LaunchDarkly.")),a.default.createElement("div",{className:"settings-page__content-description","data-testid":"developer-options-remote-feature-flags"},JSON.stringify(C)))),a.default.createElement(r.Text,{className:"settings-page__security-tab-sub-header",color:i.TextColor.textAlternative,paddingTop:6,ref:T[0]},"Reset States"),a.default.createElement("div",{className:"settings-page__content-padded"},a.default.createElement(r.Box,{ref:T[1],className:"settings-page__content-row",display:i.Display.Flex,flexDirection:i.FlexDirection.Row,justifyContent:i.JustifyContent.spaceBetween,gap:4},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("span",null,"Announcements"),a.default.createElement("div",{className:"settings-page__content-description"},"Resets isShown boolean to false for all announcements. Announcements are the notifications shown in the What's New popup modal.")),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(r.Button,{variant:r.ButtonVariant.Primary,onClick:w},"Reset")),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(r.Box,{display:i.Display.Flex,alignItems:i.AlignItems.center,paddingLeft:2,paddingRight:2,style:{height:"40px",width:"40px"}},a.default.createElement(r.Icon,{className:"settings-page-developer-options__icon-check",name:r.IconName.Check,color:i.IconColor.successDefault,size:r.IconSize.Lg,hidden:!_})))),a.default.createElement(r.Box,{ref:T[2],className:"settings-page__content-row",display:i.Display.Flex,flexDirection:i.FlexDirection.Row,justifyContent:i.JustifyContent.spaceBetween,gap:4},a.default.createElement("div",{className:"settings-page__content-item",style:{flex:"1 1 auto"}},a.default.createElement("span",null,"Onboarding"),a.default.createElement("div",{className:"settings-page__content-description"},'Resets various states related to onboarding and redirects to the "Secure Your Wallet" onboarding page.')),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(r.Button,{variant:r.ButtonVariant.Primary,onClick:S},"Reset")),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(r.Box,{display:i.Display.Flex,alignItems:i.AlignItems.center,paddingLeft:2,paddingRight:2,style:{height:"40px",width:"40px"}},a.default.createElement(r.Icon,{className:"settings-page-developer-options__icon-check",name:r.IconName.Check,color:i.IconColor.successDefault,size:r.IconSize.Lg,hidden:!E})))),a.default.createElement(g.default,{title:"Service Worker Keep Alive",description:"Results in a timestamp being continuously saved to session.storage",isEnabled:x,onToggle:e=>(async e=>{await t((0,d.setServiceWorkerKeepAlivePreference)(e)),k(e)})(!e),dataTestId:"developer-options-service-worker-alive-toggle",settingsRef:T[3]})),a.default.createElement(y.BackupAndSyncDevSettings,null),a.default.createElement(h.default,null))}}}},{package:"$root$",file:"ui/pages/settings/developer-options-tab/developer-options-tab.tsx"}],[7763,{"../../../components/component-library":6325,"../../../components/ui/toggle-button":6831,"../../../helpers/constants/design-system":6899,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(e("react")),o=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),r=i(e("../../../components/ui/toggle-button"));function i(e){return e&&e.__esModule?e:{default:e}}n.default=({title:e,description:t,isEnabled:n,onToggle:i,dataTestId:l,settingsRef:c})=>a.default.createElement(o.Box,{ref:c,className:"settings-page__content-row",display:s.Display.Flex,flexDirection:s.FlexDirection.Row,justifyContent:s.JustifyContent.spaceBetween,gap:4},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("div",{className:"settings-page__content-description"},a.default.createElement("span",null,e),a.default.createElement("div",{className:"settings-page__content-description"},t))),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(r.default,{value:n,onToggle:i,offLabel:"Off",onLabel:"On",dataTestId:l})))}}},{package:"$root$",file:"ui/pages/settings/developer-options-tab/developer-options-toggle-row-component.tsx"}],[7764,{"./developer-options-tab":7762},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./developer-options-tab"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/developer-options-tab/index.tsx"}],[7765,{"../../../../shared/lib/trace":5718,"../../../../shared/modules/i18n":5742,"../../../components/component-library":6325,"../../../components/component-library/button/button.types":6303,"../../../ducks/locale/locale":6882,"../../../helpers/constants/design-system":6899,"../../../store/actions":7916,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-redux"),s=e("../../../components/component-library"),r=e("../../../helpers/constants/design-system"),i=e("../../../../shared/lib/trace"),l=e("../../../components/component-library/button/button.types"),c=e("../../../store/actions"),u=e("../../../../shared/modules/i18n"),d=e("../../../ducks/locale/locale");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function m(e){return new Promise(t=>setTimeout(t,e))}function f(){const e=(0,a.useCallback)(async()=>{var e,t;await(null===(e=(t=window.stateHooks).throwTestError)||void 0===e?void 0:e.call(t,"Developer Options"))},[]);return a.default.createElement(E,{name:"Generate UI Error",description:a.default.createElement("span",null,"Generate an unhandled ",a.default.createElement("b",null,"TestError")," in this window."),onClick:e,expectError:!0})}function g(){const e=(0,a.useCallback)(async()=>{var e,t;await(null===(e=(t=window.stateHooks).throwTestBackgroundError)||void 0===e?void 0:e.call(t,"Developer Options"))},[]);return a.default.createElement(E,{name:"Generate Background Error",description:a.default.createElement("span",null,"Generate an unhandled ",a.default.createElement("b",null,"TestError")," in the service worker."),onClick:e,expectError:!0})}function h(){const e=(0,a.useCallback)(async()=>{var e,t;await(null===(e=(t=window.stateHooks).captureTestError)||void 0===e?void 0:e.call(t,"Developer Options"))},[]);return a.default.createElement(E,{name:"Capture UI Error",description:a.default.createElement("span",null,"Capture a ",a.default.createElement("b",null,"TestError")," in this window."),onClick:e})}function y(){const e=(0,a.useCallback)(async()=>{var e,t;await(null===(e=(t=window.stateHooks).captureBackgroundError)||void 0===e?void 0:e.call(t,"Developer Options"))},[]);return a.default.createElement(E,{name:"Capture Background Error",description:a.default.createElement("span",null,"Capture a ",a.default.createElement("b",null,"TestError")," in the service worker."),onClick:e})}function _(){const e=(0,a.useCallback)(async()=>{await(0,i.trace)({name:i.TraceName.DeveloperTest,data:{"test.data.number":123},tags:{"test.tag.number":123}},async e=>{await(0,i.trace)({name:i.TraceName.NestedTest1,data:{"test.data.boolean":!0},tags:{"test.tag.boolean":!0},parentContext:e},()=>m(1e3)),await(0,i.trace)({name:i.TraceName.NestedTest2,data:{"test.data.string":"test"},tags:{"test.tag.string":"test"},parentContext:e},()=>m(500))})},[]);return a.default.createElement(E,{name:"Generate Trace",description:a.default.createElement("span",null,"Generate a ",a.default.createElement("b",null,"Developer Test")," Sentry trace."),onClick:e})}function v({currentLocale:e}){const t=(0,o.useDispatch)();return a.default.createElement(E,{name:"Generate A Page Crash",description:a.default.createElement("span",null,'Trigger the crash on extension to send user feedback to sentry. You can click "Try again" to reload extension'),onClick:async()=>{const n=await(0,u.fetchLocale)(e);await t((0,c.setCurrentLocale)(e,{...n,developerOptions:undefined})),await(0,c.forceUpdateMetamaskState)(t)},expectError:!0,testId:"developer-options-generate-page-crash-button"})}function E({name:e,description:t,onClick:n,expectError:o,testId:i}){const[c,u]=(0,a.useState)(!1),d=(0,a.useCallback)(async()=>{let e=!1;try{await n()}catch(t){throw e=!0,t}finally{!o&&e||u(!0)}},[n]);return a.default.createElement(s.Box,{className:"settings-page__content-row",display:r.Display.Flex,flexDirection:r.FlexDirection.Row,justifyContent:r.JustifyContent.spaceBetween,gap:4},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("div",{className:"settings-page__content-description"},t)),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(s.Button,{variant:s.ButtonVariant.Primary,onClick:d,size:l.ButtonSize.Lg,"data-testid":i},e)),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(s.Box,{display:r.Display.Flex,alignItems:r.AlignItems.center,paddingLeft:2,paddingRight:2,style:{height:"40px",width:"40px"}},a.default.createElement(s.Icon,{className:"settings-page-developer-options__icon-check",name:s.IconName.Check,color:r.IconColor.successDefault,size:s.IconSize.Lg,hidden:!c}))))}n.default=()=>{const e=(0,o.useSelector)(d.getCurrentLocale)||u.FALLBACK_LOCALE;return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Text,{className:"settings-page__security-tab-sub-header__bold"},"Sentry"),a.default.createElement("div",{className:"settings-page__content-padded"},a.default.createElement(f,null),a.default.createElement(g,null),a.default.createElement(h,null),a.default.createElement(y,null),a.default.createElement(_,null),a.default.createElement(v,{currentLocale:e})))}}}},{package:"$root$",file:"ui/pages/settings/developer-options-tab/sentry-test.tsx"}],[7766,{"../../../../shared/constants/metametrics":5613,"../../../components/component-library":6325,"../../../components/ui/toggle-button":6831,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/settings-search":6949,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=u(e("prop-types")),s=u(e("../../../components/ui/toggle-button")),r=e("../../../helpers/utils/settings-search"),i=e("../../../../shared/constants/metametrics"),l=e("../../../components/component-library"),c=e("../../../helpers/constants/design-system");function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends a.PureComponent{constructor(...e){super(...e),p(this,"settingsRefs",Array((0,r.getNumberOfSettingRoutesInTab)(this.context.t,this.context.t("experimental"))).fill(undefined).map(()=>a.default.createRef()))}componentDidUpdate(){const{t:e}=this.context;(0,r.handleSettingsRefs)(e,e("experimental"),this.settingsRefs)}componentDidMount(){const{t:e}=this.context;(0,r.handleSettingsRefs)(e,e("experimental"),this.settingsRefs)}renderToggleSection({title:e,description:t,toggleValue:n,toggleCallback:o,toggleDataTestId:r,toggleContainerDataTestId:i,toggleOffLabel:c,toggleOnLabel:u}){return a.default.createElement(l.Box,{ref:this.settingsRefs[0],className:"settings-page__content-row settings-page__content-row-experimental"},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("span",null,e),a.default.createElement("div",{className:"settings-page__content-description"},t)),a.default.createElement("div",{className:"settings-page__content-item-col","data-testid":i},a.default.createElement(s.default,{value:n,onToggle:o,offLabel:c,onLabel:u,dataTestId:r})))}renderKeyringSnapsToggle(){const{t:e,trackEvent:t}=this.context,{addSnapAccountEnabled:n,setAddSnapAccountEnabled:o}=this.props;return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.Text,{variant:c.TextVariant.headingSm,as:"h4",color:c.TextColor.textAlternative,marginBottom:2,fontWeight:c.FontWeight.Bold},e("snaps")),a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("span",null,e("snapAccounts")),a.default.createElement("div",{className:"settings-page__content-description"},a.default.createElement(l.Text,{variant:c.TextVariant.bodySm,as:"h6",color:c.TextColor.textAlternative},e("snapAccountsDescription")))),this.renderToggleSection({title:e("addSnapAccountToggle"),description:e("addSnapAccountsDescription"),toggleValue:n,toggleCallback:e=>{t({event:i.MetaMetricsEventName.AddSnapAccountEnabled,category:i.MetaMetricsEventCategory.Settings,properties:{enabled:!e}}),o(!e)},toggleContainerDataTestId:"add-account-snap-toggle-div",toggleDataTestId:"add-account-snap-toggle-button",toggleOffLabel:e("off"),toggleOnLabel:e("on")}))}renderNotificationsToggle(){const{t:e}=this.context,{featureNotificationsEnabled:t,setFeatureNotificationsEnabled:n}=this.props;return this.renderToggleSection({title:e("notificationsFeatureToggle"),description:e("notificationsFeatureToggleDescription"),toggleValue:t,toggleCallback:e=>n(!e),toggleDataTestId:"toggle-notifications",toggleOffLabel:e("off"),toggleOnLabel:e("on")})}render(){return a.default.createElement("div",{className:"settings-page__body"},null,this.renderKeyringSnapsToggle())}}n.default=m,p(m,"contextTypes",{t:o.default.func,trackEvent:o.default.func})}}},{package:"$root$",file:"ui/pages/settings/experimental-tab/experimental-tab.component.tsx"}],[7767,{"../../../selectors":7886,"../../../store/actions":7916,"./experimental-tab.component":7766,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=e("react-redux"),s=e("../../../store/actions"),r=e("../../../selectors"),i=(a=e("./experimental-tab.component"))&&a.__esModule?a:{default:a};n.default=(0,o.connect)(e=>{const t=(0,r.getFeatureNotificationsEnabled)(e);return{watchAccountEnabled:(0,r.getIsWatchEthereumAccountEnabled)(e),addSnapAccountEnabled:(0,r.getIsAddSnapAccountEnabled)(e),featureNotificationsEnabled:t}},e=>({setWatchAccountEnabled:e=>(0,s.setWatchEthereumAccountEnabled)(e),setAddSnapAccountEnabled:e=>(0,s.setAddSnapAccountEnabled)(e),setFeatureNotificationsEnabled:t=>e((0,s.setFeatureNotificationsEnabled)(t))}))(i.default)}}},{package:"$root$",file:"ui/pages/settings/experimental-tab/experimental-tab.container.ts"}],[7768,{"./experimental-tab.container":7767},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./experimental-tab.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/experimental-tab/index.js"}],[7769,{"./settings.container":7796},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./settings.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/index.js"}],[7770,{"./info-tab.component":7771},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./info-tab.component"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/info-tab/index.js"}],[7771,{"../../../../shared/constants/metametrics":5613,"../../../components/app/modals/visit-support-data-consent-modal":5993,"../../../components/component-library":6325,"../../../components/ui/button":6727,"../../../helpers/constants/common":6897,"../../../helpers/utils/build-types":6925,"../../../helpers/utils/settings-search":6949,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=p(e("prop-types")),s=p(e("../../../components/ui/button")),r=e("../../../components/component-library"),i=e("../../../helpers/constants/common"),l=e("../../../helpers/utils/build-types"),c=e("../../../helpers/utils/settings-search"),u=e("../../../../shared/constants/metametrics"),d=p(e("../../../components/app/modals/visit-support-data-consent-modal"));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends a.PureComponent{constructor(...e){super(...e),f(this,"state",{version:"13.11.0",isVisitSupportDataConsentModalOpen:!1}),f(this,"settingsRefs",Array((0,c.getNumberOfSettingRoutesInTab)(this.context.t,this.context.t("about"))).fill(undefined).map(()=>a.default.createRef())),f(this,"toggleVisitSupportDataConsentModal",()=>{this.setState(e=>({isVisitSupportDataConsentModalOpen:!e.isVisitSupportDataConsentModalOpen}))})}componentDidUpdate(){const{t:e}=this.context;(0,c.handleSettingsRefs)(e,e("about"),this.settingsRefs)}componentDidMount(){const{t:e}=this.context;(0,c.handleSettingsRefs)(e,e("about"),this.settingsRefs)}renderInfoLinks(){const{t:e}=this.context;return a.default.createElement("div",{className:"settings-page__content-item settings-page__content-item--without-height"},a.default.createElement("div",{ref:this.settingsRefs[1],className:"info-tab__link-header"},e("links")),a.default.createElement("div",{ref:this.settingsRefs[2],className:"info-tab__link-item"},a.default.createElement(s.default,{type:"link",href:"https://metamask.io/privacy.html",target:"_blank",rel:"noopener noreferrer",className:"info-tab__link-text"},e("privacyMsg"))),a.default.createElement("div",{ref:this.settingsRefs[3],className:"info-tab__link-item"},a.default.createElement(s.default,{type:"link",href:"https://metamask.io/terms.html",target:"_blank",rel:"noopener noreferrer",className:"info-tab__link-text"},e("terms"))),(0,l.isBeta)()?a.default.createElement("div",{ref:this.settingsRefs[8],className:"info-tab__link-item"},a.default.createElement(s.default,{type:"link",href:"https://metamask.io/beta-terms.html",target:"_blank",rel:"noopener noreferrer",className:"info-tab__link-text"},e("betaTerms"),a.default.createElement(r.Tag,{label:e("new"),className:"info-tab__tag"}))):null,a.default.createElement("div",{ref:this.settingsRefs[4],className:"info-tab__link-item"},a.default.createElement(s.default,{type:"link",href:`https://raw.githubusercontent.com/MetaMask/metamask-extension/v${this.state.version}/attribution.txt`,target:"_blank",rel:"noopener noreferrer",className:"info-tab__link-text"},e("attributions"))),a.default.createElement("hr",{className:"info-tab__separator"}),a.default.createElement("div",{ref:this.settingsRefs[5],className:"info-tab__link-item"},a.default.createElement(s.default,{type:"link",target:"_blank",rel:"noopener noreferrer",className:"info-tab__link-text",onClick:this.toggleVisitSupportDataConsentModal},e("supportCenter"))),a.default.createElement("div",{ref:this.settingsRefs[6],className:"info-tab__link-item"},a.default.createElement(s.default,{type:"link",href:"https://metamask.io/",target:"_blank",rel:"noopener noreferrer",className:"info-tab__link-text"},e("visitWebSite"))),a.default.createElement("div",{ref:this.settingsRefs[7],className:"info-tab__link-item"},a.default.createElement(s.default,{type:"link",href:i.SUPPORT_REQUEST_LINK,target:"_blank",rel:"noopener noreferrer",className:"info-tab__link-text",onClick:()=>{this.context.trackEvent({category:u.MetaMetricsEventCategory.Settings,event:u.MetaMetricsEventName.SupportLinkClicked,properties:{url:i.SUPPORT_REQUEST_LINK}},{contextPropsIntoEventProperties:[u.MetaMetricsContextProp.PageTitle]})}},e("contactUs"))))}render(){const{t:e}=this.context;return a.default.createElement("div",{className:"settings-page__body"},a.default.createElement("div",{className:"settings-page__content-row"},a.default.createElement("div",{className:"settings-page__content-item settings-page__content-item--without-height"},a.default.createElement("div",{className:"info-tab__item"},a.default.createElement("div",{ref:this.settingsRefs[0],className:"info-tab__version-header"},(0,l.isBeta)()?e("betaMetamaskVersion"):e("metamaskVersion")),a.default.createElement("div",{className:"info-tab__version-number"},this.state.version)),a.default.createElement("div",{className:"info-tab__item"},a.default.createElement("div",{className:"info-tab__about"},e("builtAroundTheWorld")))),this.renderInfoLinks()),a.default.createElement("div",{className:"info-tab__logo-wrapper"},a.default.createElement("img",{src:"./images/logo/metamask-fox.svg",className:"info-tab__logo",alt:"MetaMask Logo"})),this.state.isVisitSupportDataConsentModalOpen&&a.default.createElement(d.default,{isOpen:this.state.isVisitSupportDataConsentModalOpen,onClose:this.toggleVisitSupportDataConsentModal}))}}n.default=g,f(g,"contextTypes",{t:o.default.func,trackEvent:o.default.func})}}},{package:"$root$",file:"ui/pages/settings/info-tab/info-tab.component.js"}],[7772,{"./networks-form":7774},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./networks-form"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/networks-tab/networks-form/index.js"}],[7773,{"../../../../../shared/modules/conversion.utils":5732,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNetworkFormState=void 0;var a=e("react"),o=e("../../../../../shared/modules/conversion.utils");n.useNetworkFormState=e=>{const[t,n]=(0,a.useState)(""),[s,r]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[c,u]=(0,a.useState)({rpcEndpoints:[],defaultRpcEndpointIndex:undefined}),[d,p]=(0,a.useState)({blockExplorerUrls:[],defaultBlockExplorerUrlIndex:undefined});return(0,a.useEffect)(()=>{n((null==e?void 0:e.name)??""),r(e?(0,o.hexToDecimal)(e.chainId):""),l((null==e?void 0:e.nativeCurrency)??""),u({rpcEndpoints:(null==e?void 0:e.rpcEndpoints)??[],defaultRpcEndpointIndex:null==e?void 0:e.defaultRpcEndpointIndex}),p({blockExplorerUrls:(null==e?void 0:e.blockExplorerUrls)??[],defaultBlockExplorerUrlIndex:null==e?void 0:e.defaultBlockExplorerUrlIndex})},[null==e?void 0:e.chainId]),{name:t,setName:n,chainId:s,setChainId:r,ticker:i,setTicker:l,rpcUrls:c,setRpcUrls:u,blockExplorers:d,setBlockExplorers:p,clear:()=>{n(""),r(""),l(""),u({rpcEndpoints:[],defaultRpcEndpointIndex:undefined}),p({blockExplorerUrls:[],defaultBlockExplorerUrlIndex:undefined})}}}}}},{package:"$root$",file:"ui/pages/settings/networks-tab/networks-form/networks-form-state.ts"}],[7774,{"../../../../../shared/constants/metametrics":5613,"../../../../../shared/constants/network":5617,"../../../../../shared/lib/network-utils":5708,"../../../../../shared/lib/only-keep-host":5709,"../../../../../shared/modules/conversion.utils":5732,"../../../../../shared/modules/network.utils":5745,"../../../../../shared/modules/rpc.utils":5748,"../../../../../shared/modules/selectors/networks":5753,"../../../../components/component-library":6325,"../../../../components/multichain/dropdown-editor/dropdown-editor":6547,"../../../../components/multichain/network-list-menu/rpc-list-item":6595,"../../../../contexts/metametrics":6855,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../selectors":7886,"../../../../store/actions":7916,"./use-safe-chains":7775,"@metamask/controller-utils":1383,"@metamask/network-controller":2227,"@metamask/utils":2914,loglevel:4643,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.NetworksForm=void 0;var a,o=(a=e("loglevel"))&&a.__esModule?a:{default:a},s=N(e("react")),r=e("react-redux"),i=e("@metamask/network-controller"),l=e("@metamask/utils"),c=e("@metamask/controller-utils"),u=e("../../../../../shared/constants/metametrics"),d=e("../../../../../shared/constants/network"),p=e("../../../../../shared/modules/conversion.utils"),m=e("../../../../../shared/modules/network.utils"),f=e("../../../../../shared/modules/rpc.utils"),g=e("../../../../../shared/lib/network-utils"),h=e("../../../../contexts/metametrics"),y=e("../../../../hooks/useI18nContext"),_=e("../../../../../shared/modules/selectors/networks"),v=e("../../../../store/actions"),E=e("../../../../components/component-library"),b=e("../../../../helpers/constants/design-system"),x=N(e("../../../../components/multichain/network-list-menu/rpc-list-item")),k=e("../../../../components/multichain/dropdown-editor/dropdown-editor"),T=e("../../../../selectors"),w=e("../../../../../shared/lib/only-keep-host"),S=e("./use-safe-chains");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}const I=({networkFormState:e,existingNetwork:t,trackRpcUpdateFromBanner:n,onRpcAdd:a,onBlockExplorerAdd:C,toggleNetworkMenuAfterSubmit:N=!0,onComplete:I,onEdit:O})=>{var M,A,P,D,B,L,F,j;const U=(0,y.useI18nContext)(),W=(0,r.useDispatch)(),z=(0,s.useContext)(h.MetaMetricsContext),$=(0,s.useRef)(null),q=(0,r.useSelector)(_.getNetworkConfigurationsByChainId),V=(0,r.useSelector)(T.getIsRpcFailoverEnabled),{name:G,setName:H,chainId:J,setChainId:K,ticker:Y,setTicker:X,rpcUrls:Q,setRpcUrls:Z,blockExplorers:ee,setBlockExplorers:te}=e,ne=Q.defaultRpcEndpointIndex===undefined?undefined:Q.rpcEndpoints[Q.defaultRpcEndpointIndex],{safeChains:ae}=(0,S.useSafeChains)(),[oe,se]=(0,s.useState)({}),[re,ie]=(0,s.useState)({}),[le,ce]=(0,s.useState)(),[ue,de]=(0,s.useState)(),[pe,me]=(0,s.useState)(),fe=(0,r.useSelector)(T.getTokenNetworkFilter);(0,s.useEffect)(()=>{var e,t;const n=J?R(J):undefined,a=n?d.NETWORK_TO_NAME_MAP[n]??(null===(e=c.NETWORKS_BYPASSING_VALIDATION[n])||void 0===e?void 0:e.name)??(null==ae||null===(t=ae.find(e=>R(e.chainId)===n))||void 0===t?void 0:t.name):undefined,o=a&&a!==G;ce(o?a:undefined),ie(e=>({...e,name:o?{key:"wrongNetworkName",msg:U("wrongNetworkName")}:undefined}))},[J,G,ae]),(0,s.useEffect)(()=>{var e,t;const n=J?R(J):undefined,a=n?d.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[n]??(null==ae||null===(e=ae.find(e=>R(e.chainId)===n))||void 0===e||null===(e=e.nativeCurrency)||void 0===e?void 0:e.symbol):undefined,o=!!n&&(null===(t=c.NETWORKS_BYPASSING_VALIDATION[n])||void 0===t||null===(t=t.symbol)||void 0===t?void 0:t.toLowerCase())===(null==Y?void 0:Y.toLowerCase()),s=a&&a!==Y&&!o;de(s?a:undefined),ie(e=>({...e,ticker:s?{key:"chainListReturnedDifferentTickerSymbol",msg:U("chainListReturnedDifferentTickerSymbol")}:undefined}))},[J,Y,ae]),(0,s.useEffect)(()=>{let e;J===undefined||""===J?e=undefined:J.startsWith("0x")?/^0x[0-9a-f]+$/iu.test(J)?(0,m.isPrefixedFormattedHexString)(J)||(e=["invalidHexNumber",U("invalidHexNumberLeadingZeros")]):e=["invalidHexNumber",U("invalidHexNumber")]:/^[0-9]+$/u.test(J)?J.startsWith("0")&&(e=["invalidNumberLeadingZeros",U("invalidNumberLeadingZeros")]):e=["invalidNumber",U("invalidNumber")],!J||e||(0,m.isSafeChainId)(parseInt(J,J.startsWith("0x")?16:10))||(e=["invalidChainIdTooBig",U("invalidChainIdTooBig")]);const n=R(J);if(!e&&!t){const t=n?q[n]:undefined;t&&(e=["existingChainId",U("chainIdExistsErrorMsg",[t.name])])}let a;pe&&n&&pe!==n&&(a=["endpointReturnedDifferentChainId",U("endpointReturnedDifferentChainId",[(0,p.hexToDecimal)(pe)])]),se(t=>({...t,chainId:e?{key:e[0],msg:e[1]}:undefined,rpcUrl:a?{key:a[0],msg:a[1]}:undefined}))},[J,pe,null==t?void 0:t.chainId]),(0,s.useEffect)(()=>{var e;const t=null==Q||null===(e=Q.rpcEndpoints)||void 0===e||null===(e=e[(null==Q?void 0:Q.defaultRpcEndpointIndex)??-1])||void 0===e?void 0:e.url;var n;t&&(0,f.jsonRpcRequest)((n=t,n.endsWith("{infuraProjectId}")?n.replace("{infuraProjectId}",d.infuraProjectId??""):n),"eth_chainId").then(e=>{me(e)}).catch(e=>{me(undefined),o.default.warn("Failed to fetch the chainId from the endpoint.",e),se(e=>({...e,rpcUrl:{key:"failedToFetchChainId",msg:U("failedToFetchChainId")}}))})},[J,Q]);return s.default.createElement(E.Box,{height:b.BlockSize.Full,display:b.Display.Flex,justifyContent:b.JustifyContent.spaceBetween,flexDirection:b.FlexDirection.Column,alignItems:b.AlignItems.center,ref:$,className:"networks-tab__scrollable"},s.default.createElement(E.Box,{width:b.BlockSize.Full,paddingLeft:4,paddingRight:4,paddingBottom:2},s.default.createElement(E.FormTextField,{id:"networkName",size:E.FormTextFieldSize.Lg,placeholder:U("enterNetworkName"),"data-testid":"network-form-name-input",autoFocus:!0,helpText:(G&&(null==re||null===(M=re.name)||void 0===M?void 0:M.msg)||le)&&s.default.createElement(s.default.Fragment,null,G&&(null==re||null===(A=re.name)||void 0===A?void 0:A.msg)&&s.default.createElement(E.HelpText,{variant:b.TextVariant.bodySm,severity:E.HelpTextSeverity.Warning},re.name.msg),le&&s.default.createElement(E.Text,{as:"span",variant:b.TextVariant.bodySm,color:b.TextColor.textDefault,"data-testid":"network-form-name-suggestion"},U("suggestedTokenName"),s.default.createElement(E.ButtonLink,{as:"button",variant:b.TextVariant.bodySm,color:b.TextColor.primaryDefault,onClick:()=>{H(le)},paddingLeft:1,paddingRight:1,style:{verticalAlign:"baseline"}},le))),onChange:e=>{var t;H(null===(t=e.target)||void 0===t?void 0:t.value)},label:U("networkName"),labelProps:{children:undefined,variant:b.TextVariant.bodyMdMedium},textFieldProps:{borderRadius:b.BorderRadius.LG},inputProps:{"data-testid":"network-form-network-name"},value:G}),s.default.createElement(k.DropdownEditor,{title:U("defaultRpcUrl"),placeholder:U("addAUrl"),style:k.DropdownEditorStyle.PopoverStyle,items:Q.rpcEndpoints,itemKey:e=>e.url,selectedItemIndex:Q.defaultRpcEndpointIndex,error:Boolean(oe.rpcUrl),buttonDataTestId:"test-add-rpc-drop-down",renderItem:(e,t)=>t||null!=e&&e.name||(null==e?void 0:e.type)===i.RpcEndpointType.Infura?s.default.createElement(x.default,{rpcEndpoint:e}):s.default.createElement(E.Text,{ellipsis:!0,variant:b.TextVariant.bodyMd,paddingTop:3,paddingBottom:3,display:b.Display.Flex,alignItems:b.AlignItems.center,gap:1},(0,x.stripProtocol)((0,x.stripKeyFromInfuraUrl)(e.url)),V&&e.failoverUrls&&e.failoverUrls.length>0?s.default.createElement(E.Tag,{label:U("failover"),display:b.Display.Inline}):null),renderTooltip:(e,t)=>{const n=(0,x.stripKeyFromInfuraUrl)(e.url);return n.length>(t?37:35)?n:undefined},addButtonText:U("addRpcUrl"),itemIsDeletable:e=>e.type!==i.RpcEndpointType.Infura,onItemAdd:a,onItemSelected:e=>Z(t=>({...t,defaultRpcEndpointIndex:e})),onItemDeleted:(e,t)=>{var n;Z({rpcEndpoints:null===(n=Q.rpcEndpoints)||void 0===n?void 0:n.slice(0,e).concat(Q.rpcEndpoints.slice(e+1)),defaultRpcEndpointIndex:t})}}),(null===(P=oe.rpcUrl)||void 0===P?void 0:P.msg)&&s.default.createElement(E.Box,null,s.default.createElement(E.HelpText,{variant:b.TextVariant.bodySm,severity:E.HelpTextSeverity.Danger,"data-testid":"network-form-chain-id-error"},null===(D=oe.rpcUrl)||void 0===D?void 0:D.msg)),V&&ne&&ne.failoverUrls&&ne.failoverUrls.length>0?s.default.createElement(E.FormTextField,{id:"failoverRpcUrl",size:E.FormTextFieldSize.Lg,paddingTop:4,label:U("failoverRpcUrl"),labelProps:{children:undefined,variant:b.TextVariant.bodyMdMedium},textFieldProps:{borderRadius:b.BorderRadius.LG},value:(0,w.onlyKeepHost)(ne.failoverUrls[0]),disabled:!0}):null,s.default.createElement(E.FormTextField,{id:"chainId",size:E.FormTextFieldSize.Lg,placeholder:U("enterChainId"),paddingTop:4,"data-testid":"network-form-chain-id-input",onChange:e=>{var t;K(null===(t=e.target)||void 0===t?void 0:t.value.trim())},error:Boolean(null==oe?void 0:oe.chainId),label:U("chainId"),labelProps:{children:undefined,variant:b.TextVariant.bodyMdMedium},textFieldProps:{borderRadius:b.BorderRadius.LG},inputProps:{"data-testid":"network-form-chain-id"},value:J,disabled:Boolean(t)}),null!==(B=oe.chainId)&&void 0!==B&&B.msg?s.default.createElement(E.HelpText,{variant:b.TextVariant.bodySm,severity:E.HelpTextSeverity.Danger,"data-testid":"network-form-chain-id-error"},oe.chainId.msg):null,"existingChainId"===(null===(L=oe.chainId)||void 0===L?void 0:L.key)?s.default.createElement(E.Box,null,s.default.createElement(E.HelpText,{variant:b.TextVariant.bodySm,severity:E.HelpTextSeverity.Danger,"data-testid":"network-form-chain-id-error"},U("updateOrEditNetworkInformations")," ",s.default.createElement(E.ButtonLink,{as:"button",variant:b.TextVariant.bodySm,color:b.TextColor.primaryDefault,onClick:()=>{const e=R(J);e&&(W((0,v.setEditedNetwork)({chainId:e})),null==O||O())}},U("editNetworkLink")))):null,s.default.createElement(E.FormTextField,{id:"nativeCurrency",size:E.FormTextFieldSize.Lg,placeholder:U("enterSymbol"),paddingTop:4,"data-testid":"network-form-ticker",helpText:ue?s.default.createElement(E.Text,{as:"span",variant:b.TextVariant.bodySm,color:b.TextColor.textDefault,"data-testid":"network-form-ticker-suggestion"},U("suggestedCurrencySymbol"),s.default.createElement(E.ButtonLink,{as:"button",variant:b.TextVariant.bodySm,color:b.TextColor.primaryDefault,onClick:()=>{X(ue)},paddingLeft:1,paddingRight:1,style:{verticalAlign:"baseline"}},ue)):null,onChange:e=>{var t;X(null===(t=e.target)||void 0===t?void 0:t.value)},label:U("currencySymbol"),labelProps:{children:undefined,variant:b.TextVariant.bodyMdMedium},textFieldProps:{borderRadius:b.BorderRadius.LG},inputProps:{"data-testid":"network-form-ticker-input"},value:Y}),Y&&null!==(F=re.ticker)&&void 0!==F&&F.msg?s.default.createElement(E.HelpText,{variant:b.TextVariant.bodySm,severity:E.HelpTextSeverity.Warning,"data-testid":"network-form-ticker-warning"},re.ticker.msg):null,s.default.createElement(k.DropdownEditor,{title:U("blockExplorerUrl"),placeholder:U("addAUrl"),style:k.DropdownEditorStyle.BoxStyle,items:ee.blockExplorerUrls,itemKey:e=>`${e}`,selectedItemIndex:ee.defaultBlockExplorerUrlIndex,addButtonText:U("addBlockExplorerUrl"),onItemAdd:C,buttonDataTestId:"test-explorer-drop-down",onItemSelected:e=>te(t=>({...t,defaultBlockExplorerUrlIndex:e})),onItemDeleted:(e,t)=>{var n;te({blockExplorerUrls:null===(n=ee.blockExplorerUrls)||void 0===n?void 0:n.slice(0,e).concat(ee.blockExplorerUrls.slice(e+1)),defaultBlockExplorerUrlIndex:t})},onDropdownOpened:()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},renderItem:e=>s.default.createElement(E.Text,{as:"button",paddingLeft:0,paddingRight:0,paddingTop:3,paddingBottom:3,color:b.TextColor.textDefault,variant:b.TextVariant.bodyMd,backgroundColor:b.BackgroundColor.transparent,ellipsis:!0},(0,x.stripProtocol)(e)),renderTooltip:e=>e.length>36?e:undefined})),s.default.createElement(E.Box,{className:"networks-tab__network-form__footer",backgroundColor:b.BackgroundColor.backgroundDefault,padding:4,width:b.BlockSize.Full},s.default.createElement(E.ButtonPrimary,{disabled:!G||!J||!Y||!(null!=Q&&null!==(j=Q.rpcEndpoints)&&void 0!==j&&j.length)||Object.values(oe).some(e=>e),onClick:async()=>{try{const s=J?R(J):undefined;if(s===d.CHAIN_IDS.GOERLI)W((0,v.showDeprecatedNetworkModal)());else if(s){var e,a;const r={chainId:s,name:G,nativeCurrency:Y,rpcEndpoints:null==Q?void 0:Q.rpcEndpoints,defaultRpcEndpointIndex:(null==Q?void 0:Q.defaultRpcEndpointIndex)??0,blockExplorerUrls:null==ee?void 0:ee.blockExplorerUrls,defaultBlockExplorerUrlIndex:null==ee?void 0:ee.defaultBlockExplorerUrlIndex};if(t){const e={replacementSelectedRpcEndpointIndex:s===t.chainId?null==Q?void 0:Q.defaultRpcEndpointIndex:undefined};if(await W((0,v.updateNetwork)(r,e)),1===Object.keys(fe).length&&(await W((0,v.setTokenNetworkFilter)({[t.chainId]:!0})),await W((0,v.setEnabledNetworks)(t.chainId))),n){var o;const e=r.rpcEndpoints[r.defaultRpcEndpointIndex],n=null===(o=t.rpcEndpoints)||void 0===o?void 0:o[t.defaultRpcEndpointIndex??0],a=(0,l.hexToNumber)(s),i=e=>(0,g.isPublicEndpointUrl)(e,d.infuraProjectId??"")?(0,w.onlyKeepHost)(e):"custom";z({category:u.MetaMetricsEventCategory.Network,event:u.MetaMetricsEventName.NetworkConnectionBannerRpcUpdated,properties:{chain_id_caip:`eip155:${a}`,from_rpc_domain:null!=n&&n.url?i(n.url):"unknown",to_rpc_domain:i(e.url)}})}}else await W((0,v.addNetwork)(r)),await W((0,v.setEnabledNetworks)(r.chainId));z({event:u.MetaMetricsEventName.CustomNetworkAdded,category:u.MetaMetricsEventCategory.Network,properties:{block_explorer_url:null==ee||null===(e=ee.blockExplorerUrls)||void 0===e?void 0:e[(null==ee?void 0:ee.defaultBlockExplorerUrlIndex)??-1],chain_id:s,network_name:G,source_connection_method:u.MetaMetricsNetworkEventSource.CustomNetworkForm,token_symbol:Y},sensitiveProperties:{rpcUrl:(0,S.rpcIdentifierUtility)(null==Q||null===(a=Q.rpcEndpoints[Q.defaultRpcEndpointIndex??-1])||void 0===a?void 0:a.url,ae??[])}}),W((0,v.setEditedNetwork)({chainId:s,nickname:G,editCompleted:!0,newNetwork:!t}))}}catch(e){console.error(e)}finally{N&&W((0,v.toggleNetworkMenu)()),null==I||I()}},size:E.ButtonPrimarySize.Lg,width:b.BlockSize.Full},U("save"))))};function R(e){return(0,l.isStrictHexString)(e)?e:/^\d+$/u.test(e)?`0x${(0,p.decimalToHex)(e)}`:undefined}n.NetworksForm=I;n.default=I}}},{package:"$root$",file:"ui/pages/settings/networks-tab/networks-form/networks-form.tsx"}],[7775,{"../../../../../shared/constants/network":5617,"../../../../../shared/constants/time":5635,"../../../../../shared/lib/fetch-with-cache":5692,"../../../../../shared/modules/conversion.utils":5732,"../../../../selectors":7886,"@metamask/utils":2914,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSafeChains=n.rpcIdentifierUtility=n.getSafeNativeCurrencySymbol=void 0;var a,o=e("react"),s=e("react-redux"),r=e("@metamask/utils"),i=e("../../../../selectors"),l=(a=e("../../../../../shared/lib/fetch-with-cache"))&&a.__esModule?a:{default:a},c=e("../../../../../shared/constants/network"),u=e("../../../../../shared/constants/time"),d=e("../../../../../shared/modules/conversion.utils");n.useSafeChains=()=>{const e=(0,s.useSelector)(i.useSafeChainsListValidationSelector),[t,n]=(0,o.useState)({safeChains:[]});return(0,o.useEffect)(()=>{let t=!0;return e&&(0,l.default)({url:c.CHAIN_SPEC_URL,functionName:"getSafeChainsList",allowStale:!0,cacheOptions:{cacheRefreshTime:u.DAY}}).then(e=>{t&&n({safeChains:e})}).catch(e=>{t&&n({error:e})}),()=>{t=!1}},[e]),t};n.getSafeNativeCurrencySymbol=(e,t)=>{var n;if(!e||!t)return undefined;const a=(0,r.isStrictHexString)(t)&&parseInt((0,d.hexToDecimal)(t),10);return"number"!=typeof a?undefined:null===(n=e.find(e=>e.chainId===a.toString()))||void 0===n||null===(n=n.nativeCurrency)||void 0===n?void 0:n.symbol};n.rpcIdentifierUtility=(e,t)=>{const{host:n}=new URL(e);for(const e of t)for(const t of e.rpc)try{if(n===new URL(t).host)return n}catch{continue}return"Unknown rpcUrl"}}}},{package:"$root$",file:"ui/pages/settings/networks-tab/networks-form/use-safe-chains.ts"}],[7776,{"../../../../components/component-library":6325,"../../../../helpers/constants/design-system":6899,"../../../../helpers/constants/zendesk-url":6911,"../../../../hooks/useI18nContext":7047,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function({onConfirm:e,onCancel:t}){const n=(0,o.useI18nContext)(),l=a.default.createElement("a",{key:"change-password__link-text",href:i.default.PASSWORD_RESET,target:"_blank",rel:"noopener noreferrer"},a.default.createElement("span",{className:"change-password__link-text"},n("learnMoreUpperCase")));return a.default.createElement(r.Modal,{isOpen:!0,onClose:t,className:"change-password-warning-modal","data-testid":"change-password-warning-modal"},a.default.createElement(r.ModalOverlay,null),a.default.createElement(r.ModalContent,{alignItems:s.AlignItems.center},a.default.createElement(r.ModalHeader,null,a.default.createElement(r.Box,null,a.default.createElement(r.Box,{display:s.Display.Flex,justifyContent:s.JustifyContent.center},a.default.createElement(r.Icon,{name:r.IconName.Danger,size:r.IconSize.Xl,color:s.IconColor.warningDefault})),a.default.createElement(r.Text,{variant:s.TextVariant.headingMd,textAlign:s.TextAlign.Center,marginTop:4},n("changePasswordWarning")),a.default.createElement(r.Text,{variant:s.TextVariant.bodySm,marginTop:4},n("changePasswordWarningDescription")," ",l))),a.default.createElement(r.Box,{paddingLeft:4,paddingRight:4},a.default.createElement(r.Box,{display:s.Display.Flex,marginTop:2,gap:4},a.default.createElement(r.Button,{variant:r.ButtonVariant.Secondary,"data-testid":"change-password-warning-cancel",size:r.ButtonSize.Lg,block:!0,onClick:()=>t()},n("cancel")),a.default.createElement(r.Button,{"data-testid":"change-password-warning-confirm",size:r.ButtonSize.Lg,block:!0,onClick:()=>e()},n("confirm"))))))};var a=l(e("react")),o=e("../../../../hooks/useI18nContext"),s=e("../../../../helpers/constants/design-system"),r=e("../../../../components/component-library"),i=l(e("../../../../helpers/constants/zendesk-url"));function l(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/settings/security-tab/change-password/change-password-warning.tsx"}],[7777,{"../../../../../shared/constants/app-state":5597,"../../../../../shared/constants/metametrics":5613,"../../../../components/app/password-form/password-form":6014,"../../../../components/app/toast-master/utils":6215,"../../../../components/component-library":6325,"../../../../components/ui/mascot":6786,"../../../../components/ui/spinner":6817,"../../../../contexts/metametrics":6855,"../../../../helpers/constants/design-system":6899,"../../../../helpers/constants/routes":6904,"../../../../helpers/constants/zendesk-url":6911,"../../../../helpers/utils/build-types":6925,"../../../../hooks/useI18nContext":7047,"../../../../selectors":7886,"../../../../store/actions":7916,"./change-password-warning":7776,events:4180,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=T(e("events")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),r=e("react-router-dom-v5-compat"),i=e("../../../../components/component-library"),l=e("../../../../helpers/constants/design-system"),c=e("../../../../helpers/utils/build-types"),u=T(e("../../../../components/ui/mascot")),d=T(e("../../../../components/ui/spinner")),p=e("../../../../hooks/useI18nContext"),m=e("../../../../store/actions"),f=T(e("../../../../components/app/password-form/password-form")),g=e("../../../../helpers/constants/routes"),h=e("../../../../components/app/toast-master/utils"),y=e("../../../../../shared/constants/app-state"),_=e("../../../../selectors"),v=T(e("../../../../helpers/constants/zendesk-url")),E=e("../../../../contexts/metametrics"),b=e("../../../../../shared/constants/metametrics"),x=T(e("./change-password-warning"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function T(e){return e&&e.__esModule?e:{default:e}}const w=1,S=2,C=3;n.default=()=>{const e=(0,p.useI18nContext)(),t=(0,s.useDispatch)(),n=(0,r.useNavigate)(),k=(0,o.useContext)(E.MetaMetricsContext),T=(0,s.useSelector)(_.getIsSocialLoginFlow),N=(0,o.useRef)(new a.default),[I,R]=(0,o.useState)(w),[O,M]=(0,o.useState)(""),[A,P]=(0,o.useState)(!1),[D,B]=(0,o.useState)(!1),[L,F]=(0,o.useState)(""),[j,U]=(0,o.useState)(!1),W=async()=>{try{U(!1),R(C),await t((0,m.changePassword)(L,O)),k({category:b.MetaMetricsEventCategory.Settings,event:b.MetaMetricsEventName.PasswordChanged,properties:{biometrics_enabled:!1}}),n(g.SECURITY_ROUTE),t((0,h.setShowPasswordChangeToast)(y.PasswordChangeToastType.Success))}catch(e){console.error(e),R(S),t((0,h.setShowPasswordChangeToast)(y.PasswordChangeToastType.Errored))}},z=o.default.createElement("a",{onClick:e=>{e.stopPropagation(),k({category:b.MetaMetricsEventCategory.Onboarding,event:b.MetaMetricsEventName.ExternalLinkClicked,properties:{text:"Learn More",location:"change_password",url:v.default.PASSWORD_ARTICLE}})},key:"change-password__link-text",href:v.default.PASSWORD_ARTICLE,target:"_blank",rel:"noopener noreferrer"},o.default.createElement("span",{className:"change-password__link-text"},e("learnMoreUpperCaseWithDot")));return(0,o.useEffect)(()=>{(async()=>{T&&await t((0,m.checkIsSeedlessPasswordOutdated)())})()},[t,T]),o.default.createElement(i.Box,{padding:4,className:"change-password"},I===w&&o.default.createElement(i.Box,{as:"form",display:l.Display.Flex,flexDirection:l.FlexDirection.Column,gap:6,justifyContent:l.JustifyContent.spaceBetween,height:l.BlockSize.Full,onSubmit:e=>{e.preventDefault(),(async()=>{try{await(0,m.verifyPassword)(O),P(!1),R(S)}catch(e){P(!0)}})()}},o.default.createElement(i.FormTextField,{id:"current-password",label:e("enterPasswordCurrent"),textFieldProps:{type:i.TextFieldType.Password},size:i.FormTextFieldSize.Lg,labelProps:{marginBottom:1},inputProps:{autoFocus:!0,"data-testid":"verify-current-password-input"},value:O,error:A,helpText:A?e("unlockPageIncorrectPassword"):null,onChange:e=>{M(e.target.value),P(!1)}}),o.default.createElement(i.Button,{type:"submit",block:!0,size:i.ButtonSize.Lg,disabled:A||!O,"data-testid":"verify-current-password-button"},e("continue"))),I===S&&o.default.createElement(i.Box,{as:"form",display:l.Display.Flex,flexDirection:l.FlexDirection.Column,gap:6,justifyContent:l.JustifyContent.spaceBetween,height:l.BlockSize.Full,onSubmit:e=>{e.preventDefault(),T?U(!0):W()}},o.default.createElement(i.Box,null,o.default.createElement(i.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textAlternative,marginBottom:4,as:"h2"},e(T?"createPasswordDetailsSocial":"createPasswordDetails")),o.default.createElement(f.default,{onChange:e=>F(e),pwdInputTestId:"change-password-input",confirmPwdInputTestId:"change-password-confirm-input"}),o.default.createElement(i.Box,{className:"create-password__terms-container",alignItems:l.AlignItems.center,justifyContent:l.JustifyContent.spaceBetween,marginTop:6},o.default.createElement(i.Checkbox,{inputProps:{"data-testid":"change-password-terms"},alignItems:l.AlignItems.flexStart,isChecked:D,onChange:()=>{B(!D)},label:o.default.createElement(o.default.Fragment,null,e(T?"passwordTermsWarningSocial":"passwordTermsWarning"),"",z)}))),o.default.createElement(i.Button,{type:"submit",disabled:!O||!L||!D,"data-testid":"change-password-button",block:!0},e("save"))),I===C&&o.default.createElement(i.Box,{display:l.Display.Flex,flexDirection:l.FlexDirection.Column,alignItems:l.AlignItems.center,marginTop:12},o.default.createElement("div",null,(0,c.isFlask)()||(0,c.isBeta)()?o.default.createElement("img",{src:"./images/logo/metamask-fox.svg",width:"100",height:"100"}):o.default.createElement(u.default,{animationEventEmitter:N.current,width:"100",height:"100"})),o.default.createElement(d.default,{className:"change-password__spinner"}),o.default.createElement(i.Text,{variant:l.TextVariant.bodyLgMedium,marginBottom:4},e("changePasswordLoading")),o.default.createElement(i.Text,{variant:l.TextVariant.bodySm,color:l.TextColor.textAlternative},e("changePasswordLoadingNote"))),j&&o.default.createElement(x.default,{onConfirm:()=>{W()},onCancel:()=>U(!1)}))}}}},{package:"$root$",file:"ui/pages/settings/security-tab/change-password/change-password.tsx"}],[7778,{"./change-password":7777},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./change-password"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/security-tab/change-password/index.ts"}],[7779,{"../../../../../shared/constants/metametrics":5613,"../../../../../shared/lib/ui-utils":5725,"../../../../components/app/clear-metametrics-data":5865,"../../../../components/app/data-deletion-error-modal":5911,"../../../../components/component-library":6325,"../../../../ducks/app/app":6868,"../../../../helpers/constants/design-system":6899,"../../../../helpers/utils/util":6959,"../../../../hooks/useI18nContext":7047,"../../../../selectors":7886,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=g(e("react")),o=e("react-redux"),s=e("../../../../../shared/lib/ui-utils"),r=g(e("../../../../components/app/clear-metametrics-data")),i=e("../../../../components/component-library"),l=e("../../../../helpers/constants/design-system"),c=e("../../../../hooks/useI18nContext"),u=e("../../../../selectors"),d=e("../../../../ducks/app/app"),p=g(e("../../../../components/app/data-deletion-error-modal")),m=e("../../../../helpers/utils/util"),f=e("../../../../../shared/constants/metametrics");function g(e){return e&&e.__esModule?e:{default:e}}const h=a.default.forwardRef(({defaultPrivacySettings:e,...t},n)=>{const g=(0,c.useI18nContext)(),h=(0,o.useDispatch)(),y=(0,o.useSelector)(u.getMetaMetricsId),_=(0,o.useSelector)(u.getMetaMetricsDataDeletionStatus),v=(0,o.useSelector)(u.getMetaMetricsDataDeletionTimestamp),E=(0,m.formatDate)(v,"d/MM/y"),b=(0,o.useSelector)(u.getShowDeleteMetaMetricsDataModal),x=(0,o.useSelector)(u.getShowDataDeletionErrorModal),k=(0,o.useSelector)(u.getLatestMetricsEventTimestamp);let T=!(0,o.useSelector)(u.getParticipateInMetaMetrics);!T&&_&&(T=[f.DeleteRegulationStatus.Initialized,f.DeleteRegulationStatus.Running,f.DeleteRegulationStatus.Finished].includes(_)&&v>k);const w=a.default.createElement("a",{href:s.CONSENSYS_PRIVACY_LINK,target:"_blank",rel:"noopener noreferrer",key:"metametrics-consensys-privacy-link"},g("privacyMsg"));return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.Box,{ref:n,className:"settings-page__content-row",display:l.Display.Flex,flexDirection:l.FlexDirection.Column,gap:4},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("span",null,g("deleteMetaMetricsData")),a.default.createElement("div",{className:"settings-page__content-description"},T&&Boolean(y)?g("deleteMetaMetricsDataRequestedDescription",[E,w]):g("deleteMetaMetricsDataDescription",[w]))),a.default.createElement("div",{className:"settings-page__content-item-col "+(e?"settings-page__button-defaut-settings":"")},Boolean(!y)&&a.default.createElement(i.Box,{display:l.Display.InlineFlex},a.default.createElement(i.Icon,{name:i.IconName.Info,size:i.IconSize.Sm}),a.default.createElement(i.Text,{variant:l.TextVariant.bodyXs,marginLeft:1,marginBottom:2},g("metaMetricsIdNotAvailableError"))),a.default.createElement(i.ButtonPrimary,{"data-testid":"delete-metametrics-data-button",className:"settings-page__button",width:l.BlockSize.Full,onClick:()=>{h((0,d.openDeleteMetaMetricsDataModal)())},disabled:T},g("deleteMetaMetricsData")))),b&&a.default.createElement(r.default,null),x&&a.default.createElement(p.default,null))});n.default=h}}},{package:"$root$",file:"ui/pages/settings/security-tab/delete-metametrics-data-button/delete-metametrics-data-button.tsx"}],[7780,{"./delete-metametrics-data-button":7779},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./delete-metametrics-data-button"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/security-tab/delete-metametrics-data-button/index.ts"}],[7781,{"./security-tab.container":7787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./security-tab.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/security-tab/index.js"}],[7782,{"./metametrics-toggle":7783},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./metametrics-toggle"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/security-tab/metametrics-toggle/index.ts"}],[7783,{"../../../../../shared/constants/metametrics":5613,"../../../../components/component-library":6325,"../../../../components/ui/toggle-button":6831,"../../../../contexts/metametrics":6855,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useMetametrics":7050,"../../../../selectors":7886,"../../../../selectors/identity/backup-and-sync":7885,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),s=e("react-redux"),r=e("../../../../hooks/useI18nContext"),i=e("../../../../contexts/metametrics"),l=e("../../../../hooks/useMetametrics"),c=e("../../../../selectors/identity/backup-and-sync"),u=e("../../../../../shared/constants/metametrics"),d=e("../../../../components/component-library"),p=(a=e("../../../../components/ui/toggle-button"))&&a.__esModule?a:{default:a},m=e("../../../../helpers/constants/design-system"),f=e("../../../../selectors");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}n.default=({dataCollectionForMarketing:e,setDataCollectionForMarketing:t,fromDefaultSettings:n=!1})=>{const a=(0,r.useI18nContext)(),g=(0,o.useContext)(i.MetaMetricsContext),{enableMetametrics:h,error:y}=(0,l.useEnableMetametrics)(),{disableMetametrics:_,error:v}=(0,l.useDisableMetametrics)(),E=y||v,b=(0,s.useSelector)(c.selectIsBackupAndSyncEnabled),x=(0,s.useSelector)(f.getParticipateInMetaMetrics),k=(0,s.useSelector)(f.getUseExternalServices);return o.default.createElement(d.Box,null,o.default.createElement(d.Box,{className:"settings-page__content-row",display:m.Display.Flex,flexDirection:m.FlexDirection.Row,justifyContent:m.JustifyContent.spaceBetween,gap:4,"data-testid":"participate-in-meta-metrics-container"},o.default.createElement("div",{className:"settings-page__content-item"},o.default.createElement("span",null,a("participateInMetaMetrics")),o.default.createElement("div",{className:"settings-page__content-description"},a("participateInMetaMetricsDescription"))),o.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"participate-in-meta-metrics-toggle"},o.default.createElement(p.default,{value:x,disabled:!k,onToggle:a=>(async a=>{a?(await h(),g({category:u.MetaMetricsEventCategory.Settings,event:u.MetaMetricsEventName.TurnOnMetaMetrics,properties:{isProfileSyncingEnabled:b,participateInMetaMetrics:x,location:n?"Default Settings":"Settings"}})):(e&&await t(!1),await _(),g({category:u.MetaMetricsEventCategory.Settings,event:u.MetaMetricsEventName.TurnOffMetaMetrics,properties:{isProfileSyncingEnabled:b,participateInMetaMetrics:x}}),g({category:u.MetaMetricsEventCategory.Settings,event:u.MetaMetricsEventName.AnalyticsPreferenceSelected,properties:{is_metrics_opted_in:!1,has_marketing_consent:!1,location:"Settings"}}))})(!a),offLabel:a("off"),onLabel:a("on")}))),E&&o.default.createElement(d.Box,{paddingBottom:4},o.default.createElement(d.Text,{as:"p",color:m.TextColor.errorDefault,variant:m.TextVariant.bodySm},a("notificationsSettingsBoxError"))))}}}},{package:"$root$",file:"ui/pages/settings/security-tab/metametrics-toggle/metametrics-toggle.tsx"}],[7784,{"./reveal-srp-list":7785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"RevealSrpList",{enumerable:!0,get:function(){return a.RevealSrpList}});var a=e("./reveal-srp-list")}}},{package:"$root$",file:"ui/pages/settings/security-tab/reveal-srp-list/index.ts"}],[7785,{"../../../../components/app/srp-quiz-modal/SRPQuiz":6206,"../../../../components/component-library":6325,"../../../../components/multichain/multi-srp/srp-list/srp-list":6578,"../../../../components/ui/card":6731,"../../../../helpers/constants/design-system":6899,"../../../../helpers/constants/routes":6904,"../../../../hooks/social-sync/useSyncSRPs":7021,"../../../../hooks/useI18nContext":7047,"../../../../selectors":7886,"@metamask/seedless-onboarding-controller":2500,lodash:4635,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RevealSrpList=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=e("react-router-dom-v5-compat"),s=e("react-redux"),r=e("@metamask/seedless-onboarding-controller"),i=e("lodash"),l=e("../../../../components/component-library"),c=y(e("../../../../components/app/srp-quiz-modal/SRPQuiz")),u=e("../../../../components/multichain/multi-srp/srp-list/srp-list"),d=e("../../../../helpers/constants/design-system"),p=e("../../../../hooks/useI18nContext"),m=e("../../../../helpers/constants/routes"),f=e("../../../../selectors"),g=y(e("../../../../components/ui/card")),h=e("../../../../hooks/social-sync/useSyncSRPs");function y(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}n.RevealSrpList=()=>{const e=(0,p.useI18nContext)(),t=(0,o.useNavigate)(),[n,y]=(0,a.useState)(!1),[_,v]=(0,a.useState)(""),E=(0,s.useSelector)(f.getIsSocialLoginFlow),b=(0,s.useSelector)(f.getSocialLoginType),x=(0,s.useSelector)(f.getSocialLoginEmail);(0,h.useSyncSRPs)();return a.default.createElement(l.Box,{className:"srp-reveal-list"},E&&a.default.createElement(l.Box,{paddingTop:4,paddingLeft:4,paddingRight:4},a.default.createElement(l.Text,{marginBottom:2,variant:d.TextVariant.bodyMd,color:d.TextColor.textAlternative,textTransform:d.TextTransform.Uppercase},e("securitySocialLoginLabel",[b])),a.default.createElement(g.default,{className:"srp-reveal-list__social-login-card",backgroundColor:d.BackgroundColor.backgroundMuted,border:!1},a.default.createElement(l.Box,{display:d.Display.Flex,flexDirection:d.FlexDirection.Row,alignItems:d.AlignItems.center,gap:3},a.default.createElement(l.Box,{display:d.Display.Flex,alignItems:d.AlignItems.center,gap:2},b===r.AuthConnection.Apple?a.default.createElement(l.Icon,{name:l.IconName.Apple,color:d.IconColor.iconDefault,size:l.IconSize.Lg}):a.default.createElement("img",{src:"images/icons/google.svg",className:"srp-reveal-list__social-icon",alt:"Google icon"})),a.default.createElement(l.Box,{flexDirection:d.FlexDirection.Column},a.default.createElement(l.Text,{fontWeight:d.FontWeight.Medium},e("securitySocialLoginEnabled")),x&&a.default.createElement(l.Text,{variant:d.TextVariant.bodySm,color:d.TextColor.textAlternative},(e=>{const[t,n]=e.split("@"),a=t.slice(0,1);return`${`${a}${"*".repeat(t.length-a.length)}`}@${n}`})(x))))),a.default.createElement(l.Text,{marginTop:1,variant:d.TextVariant.bodySm,color:d.TextColor.textAlternative},e("securitySocialLoginEnabledDescription",[(0,i.capitalize)(b)])),a.default.createElement(l.Box,{width:d.BlockSize.Full,className:"srp-reveal-list__divider",marginTop:4})),a.default.createElement(l.Box,{paddingTop:4,paddingLeft:4,paddingRight:4,paddingBottom:0,className:"srp-reveal-list__srp-list"},a.default.createElement(l.Text,{marginBottom:2,variant:d.TextVariant.bodyMd,color:d.TextColor.textAlternative,textTransform:d.TextTransform.Uppercase},e("securitySrpLabel")),a.default.createElement(u.SrpList,{onActionComplete:(e,n)=>{if(n){const e=`${m.ONBOARDING_REVIEW_SRP_ROUTE}/?isFromReminder=true&isFromSettingsSecurity=true`;t(e)}else v(e),y(!0)},hideShowAccounts:!1,isSettingsPage:!0})),n&&_&&a.default.createElement(c.default,{keyringId:_,isOpen:n,onClose:()=>y(!1)}))}}}},{package:"$root$",file:"ui/pages/settings/security-tab/reveal-srp-list/reveal-srp-list.tsx"}],[7786,{"../../../../app/scripts/lib/util":353,"../../../../shared/constants/app":5598,"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/network":5617,"../../../../shared/lib/ui-utils":5725,"../../../../shared/modules/environment":5736,"../../../components/app/srp-quiz-modal/SRPQuiz":6206,"../../../components/component-library":6325,"../../../components/ui/popover":6804,"../../../components/ui/text-field":6827,"../../../components/ui/toggle-button":6831,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/routes":6904,"../../../helpers/constants/zendesk-url":6911,"../../../helpers/utils/settings-search":6949,"../../../store/actions":7916,"./delete-metametrics-data-button":7780,"./metametrics-toggle":7782,lodash:4635,loglevel:4643,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("lodash"),o=S(e("prop-types")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),r=S(e("loglevel")),i=e("../../../../app/scripts/lib/util"),l=e("../../../../shared/constants/app"),c=e("../../../../shared/constants/metametrics"),u=e("../../../../shared/constants/network"),d=e("../../../../shared/lib/ui-utils"),p=S(e("../../../components/app/srp-quiz-modal/SRPQuiz")),m=e("../../../components/component-library"),f=S(e("../../../components/ui/text-field")),g=S(e("../../../components/ui/toggle-button")),h=S(e("../../../components/ui/popover")),y=e("../../../helpers/constants/design-system"),_=e("../../../helpers/constants/routes"),v=e("../../../helpers/utils/settings-search"),E=e("../../../store/actions"),b=S(e("../../../helpers/constants/zendesk-url")),x=e("../../../../shared/modules/environment"),k=S(e("./metametrics-toggle")),T=S(e("./delete-metametrics-data-button"));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class N extends s.PureComponent{constructor(...e){super(...e),C(this,"state",{ipfsGateway:this.props.ipfsGateway||u.IPFS_DEFAULT_GATEWAY_URL,ipfsGatewayError:"",srpQuizModalVisible:!1,showDataCollectionDisclaimer:!1,ipfsToggle:this.props.ipfsGateway.length>0,hasEmailMarketingConsentError:!1}),C(this,"settingsRefCounter",0),C(this,"settingsRefs",Array((0,v.getNumberOfSettingRoutesInTab)(this.context.t,this.context.t("securityAndPrivacy"))).fill(undefined).map(()=>s.default.createRef())),C(this,"hideSrpQuizModal",()=>this.setState({srpQuizModalVisible:!1})),C(this,"renderDataCollectionWarning",()=>{const{t:e}=this.context;return s.default.createElement(h.default,{wrapTitle:!0,centerTitle:!0,onClose:()=>this.setState({showDataCollectionDisclaimer:!1}),title:s.default.createElement(m.Icon,{size:m.IconSize.Xl,name:m.IconName.Danger,color:y.IconColor.warningDefault}),footer:s.default.createElement(m.Button,{width:y.BlockSize.Full,type:"primary",onClick:()=>this.setState({showDataCollectionDisclaimer:!1})},e("dataCollectionWarningPopoverButton"))},s.default.createElement(m.Box,{display:y.Display.Flex,flexDirection:y.FlexDirection.Column,gap:2,margin:4},s.default.createElement(m.Text,null,e("dataCollectionWarningPopoverDescription"))))})}componentDidUpdate(e){const{t:t}=this.context;(0,v.handleSettingsRefs)(t,t("securityAndPrivacy"),this.settingsRefs),!0!==e.dataCollectionForMarketing||!0!==this.props.participateInMetaMetrics||!1!==this.props.dataCollectionForMarketing||this.props.socialLoginEnabled||this.setState({showDataCollectionDisclaimer:!0})}async componentDidMount(){const{t:e}=this.context;if((0,v.handleSettingsRefs)(e,e("securityAndPrivacy"),this.settingsRefs),this.props.metaMetricsDataDeletionId&&await(0,E.updateDataDeletionTaskStatus)(),this.props.socialLoginEnabled){const e=await this.props.getMarketingConsent();this.props.setDataCollectionForMarketing(e)}}toggleSetting(e,t){t(!e)}async toggleDataCollectionForMarketing(e){if(this.props.socialLoginEnabled)try{await this.props.setMarketingConsent(e)}catch(e){r.default.error("Error setting marketing consent",e)}this.props.setDataCollectionForMarketing(e),this.props.participateInMetaMetrics?this.context.trackEvent({category:c.MetaMetricsEventCategory.Settings,event:c.MetaMetricsEventName.AnalyticsPreferenceSelected,properties:{is_metrics_opted_in:!0,has_marketing_consent:Boolean(e),location:"Settings"}}):this.props.socialLoginEnabled||this.props.setParticipateInMetaMetrics(!0)}renderSeedWords(){const{t:e}=this.context,{isSeedPhraseBackedUp:t,socialLoginEnabled:n,socialLoginType:o,navigate:r,hdEntropyIndex:i}=this.props;return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{ref:this.settingsRefs[1],className:"settings-page__security-tab-sub-header"},e("secretRecoveryPhrase")),s.default.createElement("div",{className:"settings-page__content-padded"},s.default.createElement(m.Box,{className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Column,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("div",{className:"settings-page__content-description"},e("securitySrpDescription")),s.default.createElement(m.BannerAlert,{"data-testid":"backup-state-banner-alert",description:n?e("securityLoginWithSocial",[(0,a.capitalize)(o)]):e(t?"securityLoginWithSrpBackedUp":"securityLoginWithSrpNotBackedUp"),paddingTop:2,paddingBottom:2,marginTop:4,severity:t?m.BannerAlertSeverity.Success:m.BannerAlertSeverity.Danger})),s.default.createElement("div",{className:"settings-page__content-item-col"},s.default.createElement(m.Button,{"data-testid":"reveal-seed-words",size:m.ButtonSize.Lg,onClick:e=>{e.preventDefault(),this.context.trackEvent({category:c.MetaMetricsEventCategory.Settings,event:c.MetaMetricsEventName.KeyExportSelected,properties:{key_type:c.MetaMetricsEventKeyType.Srp,location:"Settings",hd_entropy_index:i}}),this.context.trackEvent({category:c.MetaMetricsEventCategory.Settings,event:c.MetaMetricsEventName.SrpRevealClicked,properties:{key_type:c.MetaMetricsEventKeyType.Srp,location:"Settings"}}),r(_.REVEAL_SRP_LIST_ROUTE)}},e(n?"securitySrpWalletRecovery":"revealSecretRecoveryPhrase")))),this.state.srpQuizModalVisible&&s.default.createElement(p.default,{isOpen:this.state.srpQuizModalVisible,onClose:this.hideSrpQuizModal})))}renderChangePassword(){const{t:e}=this.context,{navigate:t}=this.props;return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{ref:this.settingsRefs[2],className:"settings-page__security-tab-sub-header"},e("securityChangePasswordTitle")),s.default.createElement("div",{className:"settings-page__content-padded"},s.default.createElement(m.Box,{className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Column,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("div",{className:"settings-page__content-description"},e("securityChangePasswordDescription"))),s.default.createElement("div",{className:"settings-page__content-item-col"},s.default.createElement(m.Button,{"data-testid":"change-password-button",size:m.ButtonSize.Lg,onClick:()=>{t(_.SECURITY_PASSWORD_CHANGE_ROUTE)}},e("securityChangePassword"))))))}renderSecurityAlertsToggle(){const{t:e}=this.context,{securityAlertsEnabled:t,hasActiveShieldSubscription:n}=this.props;return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{ref:this.settingsRefs[16]},s.default.createElement("span",{className:"settings-page__security-tab-sub-header"},e("securityAlerts"))),s.default.createElement("div",{className:"settings-page__content-padded"},s.default.createElement(m.Box,{ref:this.settingsRefs[2],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("div",{className:"settings-page__content-description"},e("securityAlertsDescription",[s.default.createElement("a",{key:"learn_more_link",href:d.SECURITY_ALERTS_LEARN_MORE_LINK,rel:"noreferrer",target:"_blank"},e("learnMoreUpperCase"))]))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"securityAlert"},s.default.createElement(g.default,{value:t,onToggle:this.toggleSecurityAlert.bind(this),offLabel:e("off"),onLabel:e("on"),disabled:n})))))}renderPhishingDetectionToggle(){const{t:e}=this.context,{usePhishDetect:t,setUsePhishDetect:n,hasActiveShieldSubscription:a}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[4],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("usePhishingDetection")),s.default.createElement("div",{className:"settings-page__content-description"},e("usePhishingDetectionDescription"))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"usePhishingDetection"},s.default.createElement(g.default,{value:t,onToggle:e=>{n(!e)},offLabel:e("off"),onLabel:e("on"),disabled:a})))}renderUse4ByteResolutionToggle(){const{t:e}=this.context,{use4ByteResolution:t,setUse4ByteResolution:n}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[4],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("use4ByteResolution")),s.default.createElement("div",{className:"settings-page__content-description"},e("toggleDecodeDescription"))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"4byte-resolution-container"},s.default.createElement(g.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on")})))}renderDataCollectionForMarketing(){const{t:e}=this.context,{dataCollectionForMarketing:t,useExternalServices:n,socialLoginEnabled:a,participateInMetaMetrics:o}=this.props,r=this.toggleDataCollectionForMarketing.bind(this);return s.default.createElement(m.Box,null,s.default.createElement(m.Box,{ref:this.settingsRefs[19],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("dataCollectionForMarketing")),s.default.createElement("div",{className:"settings-page__content-description"},s.default.createElement("span",null,e(a?"dataCollectionForMarketingDescriptionSocialLogin":"dataCollectionForMarketingDescription")))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"data-collection-for-marketing-toggle"},s.default.createElement(g.default,{value:t,disabled:!n||!o,onToggle:e=>r(!e),offLabel:e("off"),onLabel:e("on")}))),this.state.hasEmailMarketingConsentError&&s.default.createElement(m.Box,{paddingBottom:4},s.default.createElement(m.Text,{as:"p",color:y.TextColor.errorDefault,variant:y.TextVariant.bodySm},e("notificationsSettingsBoxError"))))}renderChooseYourNetworkButton(){const{t:e}=this.context,{navigate:t}=this.props;return s.default.createElement(m.Box,{className:"settings-page__content-row","data-testid":"advanced-setting-choose-your-network",display:y.Display.Flex,flexDirection:y.FlexDirection.Column,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("chooseYourNetwork")),s.default.createElement("div",{className:"settings-page__content-description"},e("chooseYourNetworkDescription",[s.default.createElement("a",{href:d.CONSENSYS_PRIVACY_LINK,target:"_blank",rel:"noopener noreferrer",key:"cyn-consensys-privacy-link"},e("privacyMsg")),s.default.createElement("a",{href:b.default.SOLANA_ACCOUNTS,target:"_blank",rel:"noopener noreferrer",key:"cyn-consensys-privacy-link-solana"},e("chooseYourNetworkDescriptionCallToAction"))]))),s.default.createElement("div",{className:"settings-page__content-item-col"},s.default.createElement(m.Button,{type:"secondary",className:"settings-page__button",onClick:()=>{(0,i.getEnvironmentType)()===l.ENVIRONMENT_TYPE_POPUP?global.platform.openExtensionInBrowser(_.ADD_POPULAR_CUSTOM_NETWORK):t(_.ADD_POPULAR_CUSTOM_NETWORK)}},e("addCustomNetwork"))))}renderSafeChainsListValidationToggle(){const{t:e}=this.context,{useSafeChainsListValidation:t,setUseSafeChainsListValidation:n}=this.props,a=e("useSafeChainsListValidationWebsite");return s.default.createElement(m.Box,{ref:this.settingsRefs[14],className:"settings-page__content-row","data-testid":"setting-safe-chains-validation",display:y.Display.Flex,flexDirection:y.FlexDirection.Column,gap:4},s.default.createElement(m.Box,{className:"settings-page__content-row",gap:4,display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("useSafeChainsListValidation")),s.default.createElement("div",{className:"settings-page__content-description"},e("useSafeChainsListValidationDescription",[s.default.createElement("b",{key:"safechain-list-validation-website"},a)]))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"useSafeChainsListValidation"},s.default.createElement(g.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on")}))))}renderIpfsGatewayControl(){const{t:e}=this.context,{setIpfsGateway:t,setIsIpfsGatewayEnabled:n,useAddressBarEnsResolution:a,setUseAddressBarEnsResolution:o}=this.props;let r="";const l=n=>{if(n.length>0)try{const a=(0,i.addUrlProtocolPrefix)(n);a||(r=e("invalidIpfsGateway"));const o=new URL(a);"gateway.ipfs.io"===o.host&&(r=e("forbiddenIpfsGateway")),0===r.length&&t(o.host)}catch(t){r=e("invalidIpfsGateway")}else r=e("invalidIpfsGateway");this.setState({ipfsGateway:n,ipfsGatewayError:r})};return s.default.createElement(m.Box,{ref:this.settingsRefs[7],className:"settings-page__content-row","data-testid":"setting-ipfs-gateway",display:y.Display.Flex,flexDirection:y.FlexDirection.Column,gap:4},s.default.createElement(m.Box,{className:"settings-page__content-row",gap:4,display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("ipfsGateway")),s.default.createElement("div",{className:"settings-page__content-description"},e("ipfsGatewayDescription"))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"ipfsToggle"},s.default.createElement(g.default,{value:this.state.ipfsToggle,onToggle:e=>{e?(n(!1),t("")):(n(!0),l(this.state.ipfsGateway)),this.setState({ipfsToggle:!e})},offLabel:e("off"),onLabel:e("on")}))),this.state.ipfsToggle&&s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("addIPFSGateway")),s.default.createElement("div",{className:"settings-page__content-item-col"},s.default.createElement(f.default,{type:"text",value:this.state.ipfsGateway,onChange:e=>l(e.target.value),error:this.state.ipfsGatewayError,fullWidth:!0,margin:"dense"}))),s.default.createElement(m.Box,{className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4,ref:this.settingsRefs[11],marginTop:3,id:"ens-domains"},s.default.createElement("div",null,e("ensDomainsSettingTitle"),s.default.createElement("div",{className:"settings-page__content-description"},s.default.createElement(m.Text,{color:y.TextColor.inherit,variant:y.TextVariant.inherit},e("ensDomainsSettingDescriptionIntroduction")),s.default.createElement(m.Box,{as:"ul",marginTop:4,marginBottom:4,paddingInlineStart:4,style:{listStyleType:"circle"}},s.default.createElement(m.Text,{as:"li",color:y.TextColor.inherit,variant:y.TextVariant.inherit},e("ensDomainsSettingDescriptionPart1")),s.default.createElement(m.Text,{as:"li",color:y.TextColor.inherit,variant:y.TextVariant.inherit},e("ensDomainsSettingDescriptionPart2"))),s.default.createElement(m.Text,{color:y.TextColor.inherit,variant:y.TextVariant.inherit},e("ensDomainsSettingDescriptionOutroduction")))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"ipfs-gateway-resolution-container"},s.default.createElement(g.default,{value:a,onToggle:e=>o(!e),offLabel:e("off"),onLabel:e("on")}))))}renderAutoDetectTokensToggle(){const{t:e}=this.context,{useTokenDetection:t,setUseTokenDetection:n}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[8],className:"settings-page__content-row","data-testid":"advanced-setting-gas-fee-estimation",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4,id:"advanced-settings-autodetect-tokens"},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("autoDetectTokens")),s.default.createElement("div",{className:"settings-page__content-description"},e("autoDetectTokensDescription",[s.default.createElement("a",{href:d.AUTO_DETECT_TOKEN_LEARN_MORE_LINK,target:"_blank",rel:"noopener noreferrer",key:"cyn-consensys-privacy-link"},(0,a.startCase)(e("learnMore")))]))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"autoDetectTokens"},s.default.createElement(g.default,{value:t,onToggle:e=>{this.toggleSetting(e,n)},offLabel:e("off"),onLabel:e("on")})))}renderBatchAccountBalanceRequestsToggle(){const{t:e}=this.context,{useMultiAccountBalanceChecker:t,setUseMultiAccountBalanceChecker:n}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[9],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("useMultiAccountBalanceChecker")),s.default.createElement("div",{className:"settings-page__content-description"},e("useMultiAccountBalanceCheckerSettingDescription"))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"useMultiAccountBalanceChecker"},s.default.createElement(g.default,{value:t,onToggle:e=>{this.toggleSetting(e,n)},offLabel:e("off"),onLabel:e("on")})))}renderCurrencyRateCheckToggle(){const{t:e}=this.context,{useCurrencyRateCheck:t,setUseCurrencyRateCheck:n}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[10],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("currencyRateCheckToggle")),s.default.createElement("div",{className:"settings-page__content-description"},e("currencyRateCheckToggleDescription",[s.default.createElement("a",{key:"coingecko_link",href:d.COINGECKO_LINK,rel:"noreferrer",target:"_blank"},e("coingecko")),s.default.createElement("a",{key:"cryptocompare_link",href:d.CRYPTOCOMPARE_LINK,rel:"noreferrer",target:"_blank"},e("cryptoCompare")),s.default.createElement("a",{key:"privacy_policy_link",href:d.PRIVACY_POLICY_LINK,rel:"noreferrer",target:"_blank"},e("privacyMsg"))]))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"currencyRateCheckToggle"},s.default.createElement(g.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on")})))}renderDisplayNftMediaToggle(){const{t:e}=this.context,{openSeaEnabled:t,setOpenSeaEnabled:n,useNftDetection:a,setUseNftDetection:o}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[12],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4,id:"display-nft-media"},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("displayNftMedia")),s.default.createElement("div",{className:"settings-page__content-description"},e("displayNftMediaDescription"))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"displayNftMedia"},s.default.createElement(g.default,{value:t,onToggle:e=>{this.context.trackEvent({category:c.MetaMetricsEventCategory.Settings,event:"Enabled/Disable OpenSea",properties:{action:"Enabled/Disable OpenSea",legacy_event:!0}}),e&&a&&o(!1),n(!e)},offLabel:e("off"),onLabel:e("on")})))}renderNftDetectionToggle(){const{t:e}=this.context,{openSeaEnabled:t,setOpenSeaEnabled:n,useNftDetection:a,setUseNftDetection:o}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[13],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("useNftDetection")),s.default.createElement("div",{className:"settings-page__content-description"},e("useNftDetectionDescriptionText"))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"useNftDetection"},s.default.createElement(g.default,{value:a,onToggle:e=>{this.context.trackEvent({category:c.MetaMetricsEventCategory.Settings,event:"NFT Detected",properties:{action:"NFT Detected",legacy_event:!0}}),e||t||n(!e),o(!e)},offLabel:e("off"),onLabel:e("on")})))}renderExternalNameSourcesToggle(){const{t:e}=this.context,{useExternalNameSources:t,setUseExternalNameSources:n}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[15],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("externalNameSourcesSetting")),s.default.createElement("div",{className:"settings-page__content-description"},e("externalNameSourcesSettingDescription"))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"useExternalNameSources"},s.default.createElement(g.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on")})))}renderSimulationsToggle(){const{t:e}=this.context,{useTransactionSimulations:t,setUseTransactionSimulations:n,hasActiveShieldSubscription:a}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[17],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("simulationsSettingSubHeader")),s.default.createElement("div",{className:"settings-page__content-description"},e("simulationsSettingDescription",[s.default.createElement("a",{key:"learn_more_link",href:d.TRANSACTION_SIMULATIONS_LEARN_MORE_LINK,rel:"noreferrer",target:"_blank"},e("learnMoreUpperCase"))]))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"useTransactionSimulations"},s.default.createElement(g.default,{value:t,onToggle:e=>{n(!e)},offLabel:e("off"),onLabel:e("on"),disabled:a})))}toggleSecurityAlert(e){const t=!e,{setSecurityAlertsEnabled:n}=this.props;this.context.trackEvent({category:c.MetaMetricsEventCategory.Settings,event:c.MetaMetricsEventName.SettingsUpdated,properties:{blockaid_alerts_enabled:t}}),n(t)}renderUseExternalServices(){const{t:e}=this.context,{useExternalServices:t,toggleExternalServices:n,setBasicFunctionalityModalOpen:a}=this.props;return s.default.createElement(m.Box,{ref:this.settingsRefs[0],className:"settings-page__content-row",display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween,gap:4,"data-testid":"advanced-setting-show-testnet-conversion"},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement(m.Box,{display:y.Display.Flex,justifyContent:y.JustifyContent.spaceBetween,alignItems:y.AlignItems.center,marginBottom:2},s.default.createElement(m.Text,{variant:y.TextVariant.headingSm},e("basicConfigurationLabel")),s.default.createElement(g.default,{value:t,onToggle:()=>{t?a():(n(!0),this.context.trackEvent({category:c.MetaMetricsEventCategory.Settings,event:c.MetaMetricsEventName.SettingsUpdated,properties:{settings_group:"security_privacy",settings_type:"basic_functionality",old_value:!1,new_value:!0,was_notifications_on:!1,was_profile_syncing_on:!1}}))},offLabel:e("off"),onLabel:e("on")})),s.default.createElement(m.Text,{marginBottom:2,color:y.TextColor.textAlternative},e("basicConfigurationDescription",[s.default.createElement("a",{href:"https://consensys.io/privacy-policy",key:"link",target:"_blank",rel:"noreferrer noopener"},e("privacyMsg"))]))),s.default.createElement("div",{className:"settings-page__content-item-col"}))}renderSkipDeepLinkInterstitial(){const{t:e}=this.context,{skipDeepLinkInterstitial:t,setSkipDeepLinkInterstitial:n}=this.props;return s.default.createElement(s.default.Fragment,null,s.default.createElement(m.Box,{ref:this.settingsRefs[3],className:"settings-page__content-row","data-testid":"setting-skip-deep-link-interstitial",display:y.Display.Flex,flexDirection:y.FlexDirection.Column,gap:4,id:"skip-deep-link-interstitial"},s.default.createElement(m.Box,{className:"settings-page__content-row",gap:4,display:y.Display.Flex,flexDirection:y.FlexDirection.Row,justifyContent:y.JustifyContent.spaceBetween},s.default.createElement("div",{className:"settings-page__content-item"},s.default.createElement("span",null,e("skipDeepLinkInterstitial")),s.default.createElement("div",{className:"settings-page__content-description"},e("skipDeepLinkInterstitialDescription"))),s.default.createElement("div",{className:"settings-page__content-item-col","data-testid":"skipDeepLinkInterstitial"},s.default.createElement(g.default,{value:t,onToggle:e=>n(!e),offLabel:e("off"),onLabel:e("on")})))))}render(){const{petnamesEnabled:e,dataCollectionForMarketing:t}=this.props,{showDataCollectionDisclaimer:n}=this.state;return s.default.createElement("div",{className:"settings-page__body"},this.renderUseExternalServices(),n?this.renderDataCollectionWarning():null,s.default.createElement("span",{className:"settings-page__security-tab-sub-header__bold"},this.context.t("security")),this.renderSeedWords(),(0,x.getIsSeedlessOnboardingFeatureEnabled)()&&this.renderChangePassword(),this.renderSecurityAlertsToggle(),s.default.createElement("span",{className:"settings-page__security-tab-sub-header__bold"},this.context.t("privacy")),s.default.createElement("div",null,s.default.createElement("span",{className:"settings-page__security-tab-sub-header"},this.context.t("alerts"))),s.default.createElement("div",{className:"settings-page__content-padded"},this.renderPhishingDetectionToggle()),s.default.createElement("div",{className:"settings-page__content-padded"},this.renderSkipDeepLinkInterstitial()),s.default.createElement("div",null,s.default.createElement("span",{className:"settings-page__security-tab-sub-header"},this.context.t("smartContracts"))),s.default.createElement("div",{className:"settings-page__content-padded"},this.renderUse4ByteResolutionToggle()),s.default.createElement("span",{className:"settings-page__security-tab-sub-header"},this.context.t("transactions")),s.default.createElement("div",{className:"settings-page__content-padded"},this.renderCurrencyRateCheckToggle(),this.renderSimulationsToggle()),s.default.createElement("span",{className:"settings-page__security-tab-sub-header",ref:this.settingsRefs[6]},this.context.t("networkProvider")),s.default.createElement("div",{className:"settings-page__content-padded"},this.renderChooseYourNetworkButton(),this.renderSafeChainsListValidationToggle(),this.renderIpfsGatewayControl()),s.default.createElement("span",{className:"settings-page__security-tab-sub-header"},this.context.t("tokenAutoDetection")),s.default.createElement("div",{className:"settings-page__content-padded"},this.renderAutoDetectTokensToggle(),this.renderBatchAccountBalanceRequestsToggle(),this.renderDisplayNftMediaToggle(),this.renderNftDetectionToggle()),e&&s.default.createElement(s.default.Fragment,null,s.default.createElement("span",{className:"settings-page__security-tab-sub-header"},this.context.t("settingsSubHeadingSignaturesAndTransactions")),s.default.createElement("div",{className:"settings-page__content-padded"},this.renderExternalNameSourcesToggle())),s.default.createElement("span",{className:"settings-page__security-tab-sub-header"},this.context.t("metrics")),s.default.createElement("div",{className:"settings-page__content-padded"},s.default.createElement(k.default,{dataCollectionForMarketing:t,setDataCollectionForMarketing:this.toggleDataCollectionForMarketing.bind(this)}),this.renderDataCollectionForMarketing(),s.default.createElement(T.default,{ref:this.settingsRefs[20]})))}}n.default=N,C(N,"contextTypes",{t:o.default.func,trackEvent:o.default.func}),C(N,"propTypes",{navigate:o.default.func.isRequired,openSeaEnabled:o.default.bool,setOpenSeaEnabled:o.default.func,useNftDetection:o.default.bool,setUseNftDetection:o.default.func,dataCollectionForMarketing:o.default.bool,setDataCollectionForMarketing:o.default.func.isRequired,participateInMetaMetrics:o.default.bool.isRequired,setParticipateInMetaMetrics:o.default.func.isRequired,setUsePhishDetect:o.default.func.isRequired,usePhishDetect:o.default.bool.isRequired,setUse4ByteResolution:o.default.func.isRequired,use4ByteResolution:o.default.bool.isRequired,useTokenDetection:o.default.bool.isRequired,setUseTokenDetection:o.default.func.isRequired,setIpfsGateway:o.default.func.isRequired,setIsIpfsGatewayEnabled:o.default.func.isRequired,ipfsGateway:o.default.string.isRequired,useMultiAccountBalanceChecker:o.default.bool.isRequired,setUseMultiAccountBalanceChecker:o.default.func.isRequired,useSafeChainsListValidation:o.default.bool.isRequired,setUseSafeChainsListValidation:o.default.func.isRequired,useCurrencyRateCheck:o.default.bool.isRequired,setUseCurrencyRateCheck:o.default.func.isRequired,useAddressBarEnsResolution:o.default.bool.isRequired,setUseAddressBarEnsResolution:o.default.func.isRequired,useExternalNameSources:o.default.bool.isRequired,setUseExternalNameSources:o.default.func.isRequired,setBasicFunctionalityModalOpen:o.default.func.isRequired,setUseTransactionSimulations:o.default.func.isRequired,useTransactionSimulations:o.default.bool.isRequired,petnamesEnabled:o.default.bool.isRequired,securityAlertsEnabled:o.default.bool,useExternalServices:o.default.bool,toggleExternalServices:o.default.func,setSkipDeepLinkInterstitial:o.default.func.isRequired,skipDeepLinkInterstitial:o.default.bool,setSecurityAlertsEnabled:o.default.func,metaMetricsDataDeletionId:o.default.string,hdEntropyIndex:o.default.number,isSeedPhraseBackedUp:o.default.bool,socialLoginEnabled:o.default.bool,socialLoginType:o.default.string,setMarketingConsent:o.default.func,getMarketingConsent:o.default.func,hasActiveShieldSubscription:o.default.bool})}}},{package:"$root$",file:"ui/pages/settings/security-tab/security-tab.component.js"}],[7787,{"../../../../shared/modules/selectors/networks":5753,"../../../ducks/app/app":6868,"../../../ducks/metamask/metamask":6883,"../../../helpers/higher-order-components/with-router-hooks/with-router-hooks":6922,"../../../selectors":7886,"../../../selectors/subscription":7912,"../../../store/actions":7916,"./security-tab.component":7786,"react-redux":5021,redux:5124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("react-redux"),o=e("redux"),s=m(e("../../../helpers/higher-order-components/with-router-hooks/with-router-hooks")),r=e("../../../store/actions"),i=e("../../../selectors"),l=e("../../../../shared/modules/selectors/networks"),c=e("../../../ducks/app/app"),u=e("../../../ducks/metamask/metamask"),d=e("../../../selectors/subscription"),p=m(e("./security-tab.component"));function m(e){return e&&e.__esModule?e:{default:e}}n.default=(0,o.compose)(s.default,(0,a.connect)(e=>{const{metamask:t}=e,{usePhishDetect:n,useTokenDetection:a,ipfsGateway:o,useMultiAccountBalanceChecker:s,useSafeChainsListValidation:r,useCurrencyRateCheck:c,useAddressBarEnsResolution:p,openSeaEnabled:m,useNftDetection:f,use4ByteResolution:g,useExternalServices:h,useExternalNameSources:y}=t,{skipDeepLinkInterstitial:_}=(0,i.getPreferences)(e);return{networkConfigurations:(0,l.getNetworkConfigurationsByChainId)(e),participateInMetaMetrics:(0,i.getParticipateInMetaMetrics)(e),dataCollectionForMarketing:(0,i.getDataCollectionForMarketing)(e),usePhishDetect:n,useTokenDetection:a,hasActiveShieldSubscription:(0,d.getIsActiveShieldSubscription)(e),ipfsGateway:o,useMultiAccountBalanceChecker:s,useSafeChainsListValidation:r,useCurrencyRateCheck:c,useAddressBarEnsResolution:p,openSeaEnabled:m,useNftDetection:f,use4ByteResolution:g,useExternalNameSources:y,useExternalServices:h,securityAlertsEnabled:(0,i.getIsSecurityAlertsEnabled)(e),useTransactionSimulations:t.useTransactionSimulations,metaMetricsDataDeletionId:(0,i.getMetaMetricsDataDeletionId)(e),hdEntropyIndex:(0,i.getHDEntropyIndex)(e),skipDeepLinkInterstitial:Boolean(_),isSeedPhraseBackedUp:(0,u.getIsPrimarySeedPhraseBackedUp)(e),socialLoginEnabled:(0,i.getIsSocialLoginFlow)(e),socialLoginType:(0,i.getSocialLoginType)(e)}},e=>({setParticipateInMetaMetrics:t=>e((0,r.setParticipateInMetaMetrics)(t)),setDataCollectionForMarketing:t=>e((0,r.setDataCollectionForMarketing)(t)),setUsePhishDetect:t=>e((0,r.setUsePhishDetect)(t)),setUseCurrencyRateCheck:t=>e((0,r.setUseCurrencyRateCheck)(t)),setUseTokenDetection:t=>e((0,r.setUseTokenDetection)(t)),setIpfsGateway:t=>e((0,r.setIpfsGateway)(t)),setIsIpfsGatewayEnabled:t=>e((0,r.setIsIpfsGatewayEnabled)(t)),setUseMultiAccountBalanceChecker:t=>e((0,r.setUseMultiAccountBalanceChecker)(t)),setUseAddressBarEnsResolution:t=>e((0,r.setUseAddressBarEnsResolution)(t)),setUseSafeChainsListValidation:t=>e((0,r.setUseSafeChainsListValidation)(t)),setBasicFunctionalityModalOpen:()=>e((0,c.openBasicFunctionalityModal)()),setSkipDeepLinkInterstitial:t=>e((0,r.setSkipDeepLinkInterstitial)(t)),setOpenSeaEnabled:t=>e((0,r.setOpenSeaEnabled)(t)),setUseNftDetection:t=>e((0,r.setUseNftDetection)(t)),setUse4ByteResolution:t=>e((0,r.setUse4ByteResolution)(t)),setUseExternalNameSources:t=>e((0,r.setUseExternalNameSources)(t)),toggleExternalServices:t=>e((0,r.toggleExternalServices)(t)),setUseTransactionSimulations:t=>e((0,r.setUseTransactionSimulations)(t)),updateDataDeletionTaskStatus:()=>(0,r.updateDataDeletionTaskStatus)(),setSecurityAlertsEnabled:e=>(0,r.setSecurityAlertsEnabled)(e),getMarketingConsent:()=>(0,r.getMarketingConsent)(),setMarketingConsent:t=>e((0,r.setMarketingConsent)(t))})))(p.default)}}},{package:"$root$",file:"ui/pages/settings/security-tab/security-tab.container.js"}],[7788,{"./settings-search-list":7789},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("./settings-search-list"))&&a.__esModule?a:{default:a};n.default=o.default}}},{package:"$root$",file:"ui/pages/settings/settings-search-list/index.js"}],[7789,{"../../../components/component-library":6325,"../../../contexts/i18n":6850,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/settings-search":6949,classnames:3913,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=p;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=u(e("prop-types")),s=u(e("classnames")),r=e("../../../helpers/utils/settings-search"),i=e("../../../contexts/i18n"),l=e("../../../components/component-library"),c=e("../../../helpers/constants/design-system");function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p({results:e,onClickSetting:t}){const n=(0,a.useContext)(i.I18nContext);return(0,a.useEffect)(r.highlightSearchedText,[e]),a.default.createElement("div",{className:"settings-page__header__search__list"},e.slice(0,5).map(e=>{const{icon:o,iconName:r,tabMessage:i,sectionMessage:u,route:d}=e;return Boolean(o||i||u)&&a.default.createElement("div",{key:`settings_${d}`},a.default.createElement("div",{className:"settings-page__header__search__list__item",onClick:()=>t(e)},r?a.default.createElement(l.Icon,{name:r}):a.default.createElement("i",{className:(0,s.default)("settings-page__header__search__list__item__icon",o)}),a.default.createElement("span",{id:`menu-tab_${d}`,className:(0,s.default)("settings-page__header__search__list__item__tab",{"settings-page__header__search__list__item__tab-multiple-lines":i(n)===n("securityAndPrivacy")})},i(n)),a.default.createElement(l.Icon,{name:l.IconName.ArrowRight,size:c.Size.SM,className:"settings-page__header__search__list__item__caret"}),a.default.createElement("span",{id:`menu-section_${d}`,className:(0,s.default)("settings-page__header__search__list__item__section",{"settings-page__header__search__list__item__section-multiple-lines":i(n)===n("securityAndPrivacy")||i(n)===n("alerts")})},u(n))))}),0===e.length&&a.default.createElement("div",{className:"settings-page__header__search__list__item",style:{cursor:"auto",display:"flex"}},a.default.createElement("span",{className:"settings-page__header__search__list__item__no-matching"},n("settingsSearchMatchingNotFound"))),a.default.createElement("div",{className:"settings-page__header__search__list__item",style:{cursor:"auto",display:"flex"}},a.default.createElement("span",{className:"settings-page__header__search__list__item__request"},n("missingSetting")),a.default.createElement("a",{href:"https://community.metamask.io/c/feature-requests-ideas/13",target:"_blank",rel:"noopener noreferrer",key:"need-help-link",className:"settings-page__header__search__list__item__link"},n("missingSettingRequest"))))}p.propTypes={results:o.default.array,onClickSetting:o.default.func}}}},{package:"$root$",file:"ui/pages/settings/settings-search-list/settings-search-list.js"}],[7790,{"./settings-search":7791},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=(a=e("./settings-search"))&&a.__esModule?a:{default:a};n.default=o.default}}},{package:"$root$",file:"ui/pages/settings/settings-search/index.js"}],[7791,{"../../../../shared/modules/string-utils":5761,"../../../components/component-library":6325,"../../../components/ui/text-field":6827,"../../../contexts/i18n":6850,"../../../helpers/constants/design-system":6899,"@material-ui/core/InputAdornment":967,"fuse.js":4238,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=f;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=p(e("prop-types")),s=p(e("fuse.js")),r=p(e("@material-ui/core/InputAdornment")),i=p(e("../../../components/ui/text-field")),l=e("../../../contexts/i18n"),c=e("../../../../shared/modules/string-utils"),u=e("../../../components/component-library"),d=e("../../../helpers/constants/design-system");function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function f({onSearch:e,error:t,settingsRoutesList:n}){const o=(0,a.useContext)(l.I18nContext),[p,m]=(0,a.useState)(""),[f,g]=(0,a.useState)(d.IconColor.iconMuted),h=Object.values(n),y=new s.default(h,{shouldSort:!0,threshold:.3,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["tabMessage","sectionMessage","descriptionMessage"],getFn:(e,t)=>e[t](o)}),_=t=>{const n=t.trimStart();m(n),g(""===n?d.IconColor.iconMuted:d.IconColor.iconDefault);const a=y.search(n),o=[...h.filter(e=>e.tabMessage&&n&&(0,c.isEqualCaseInsensitive)(e.tab,n)),...a];e({searchQuery:n,results:o})};return a.default.createElement(i.default,{id:"search-settings",placeholder:o("search"),type:"text",value:p,onChange:e=>_(e.target.value),error:t,fullWidth:!0,autoFocus:!0,autoComplete:"off",startAdornment:a.default.createElement(r.default,{position:"start",style:{marginRight:"12px"}},a.default.createElement(u.Icon,{size:u.IconSize.Sm,name:u.IconName.Search,color:f})),endAdornment:a.default.createElement(a.default.Fragment,null,p&&a.default.createElement(r.default,{className:"imageclosectn",position:"end",onClick:()=>_(""),style:{cursor:"pointer"}},a.default.createElement(u.Icon,{name:u.IconName.Close,color:d.IconColor.iconDefault,size:u.IconSize.Xs}))),theme:"bordered"})}f.propTypes={onSearch:o.default.func,error:o.default.string,settingsRoutesList:o.default.array}}}},{package:"$root$",file:"ui/pages/settings/settings-search/settings-search.js"}],[7792,{"./settings-tab.container":7794},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var a,o=(a=e("./settings-tab.container"))&&a.__esModule?a:{default:a}}}},{package:"$root$",file:"ui/pages/settings/settings-tab/index.js"}],[7793,{"../../../../app/_locales/index.json":2,"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/preferences":5622,"../../../components/component-library":6325,"../../../components/ui/dropdown":6750,"../../../components/ui/toggle-button":6831,"../../../helpers/constants/available-conversions.json":6896,"../../../helpers/constants/design-system":6899,"../../../helpers/utils/settings-search":6949,"@metamask/design-system-react":1741,classnames:3913,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=h(e("prop-types")),s=h(e("classnames")),r=e("@metamask/design-system-react"),i=h(e("../../../helpers/constants/available-conversions.json")),l=e("../../../helpers/constants/design-system"),c=h(e("../../../components/ui/dropdown")),u=h(e("../../../components/ui/toggle-button")),d=h(e("../../../../app/_locales/index.json")),p=e("../../../../shared/constants/metametrics"),m=e("../../../helpers/utils/settings-search"),f=e("../../../../shared/constants/preferences"),g=e("../../../components/component-library");function h(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function _(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v=i.default.sort((e,t)=>e.name.toLocaleLowerCase().localeCompare(t.name.toLocaleLowerCase())).map(({code:e,name:t})=>({name:`${e.toUpperCase()} - ${t}`,value:e})),E=d.default.map(e=>({name:`${e.name}`,value:e.code}));class b extends a.PureComponent{constructor(...e){super(...e),_(this,"settingsRefs",Array((0,m.getNumberOfSettingRoutesInTab)(this.context.t,this.context.t("general"))).fill(undefined).map(()=>a.default.createRef()))}componentDidUpdate(){const{t:e}=this.context;(0,m.handleSettingsRefs)(e,e("general"),this.settingsRefs)}componentDidMount(){const{t:e}=this.context;(0,m.handleSettingsRefs)(e,e("general"),this.settingsRefs)}renderCurrentConversion(){const{t:e}=this.context,{currentCurrency:t,setCurrentCurrency:n}=this.props;return a.default.createElement(g.Box,{ref:this.settingsRefs[0],className:"settings-page__content-row",display:l.Display.Flex,flexDirection:l.FlexDirection.Column},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement(g.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault,className:"settings-page__content-item__title"},e("currencyConversion"))),a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(c.default,{"data-testid":"currency-select",id:"select-currency",options:v,selectedOption:t,onChange:e=>{n(e),this.context.trackEvent({category:p.MetaMetricsEventCategory.Settings,event:p.MetaMetricsEventName.CurrentCurrency,properties:{current_currency:e,location:"settings-page"}})},className:"settings-page__content-item__dropdown"}))))}renderCurrentLocale(){const{t:e}=this.context,{updateCurrentLocale:t,currentLocale:n}=this.props;return a.default.createElement(g.Box,{ref:this.settingsRefs[2],className:"settings-page__content-row",display:l.Display.Flex,flexDirection:l.FlexDirection.Column},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement(g.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault,className:"settings-page__content-item__title"},e("currentLanguage"))),a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(c.default,{"data-testid":"locale-select",id:"select-locale",options:E,selectedOption:n,onChange:async e=>t(e)}))))}renderHideZeroBalanceTokensOptIn(){const{t:e}=this.context,{hideZeroBalanceTokens:t,setHideZeroBalanceTokens:n}=this.props;return a.default.createElement(g.Box,{ref:this.settingsRefs[5],className:"settings-page__content-row",display:l.Display.Flex,flexDirection:l.FlexDirection.Row,justifyContent:l.JustifyContent.spaceBetween,alignItems:l.AlignItems.center,id:"toggle-zero-balance"},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement(g.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault,className:"settings-page__content-item__title"},e("hideZeroBalanceTokens"))),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(u.default,{value:t,onToggle:e=>n(!e),"data-testid":"toggle-zero-balance-button"})))}renderBlockieOptIn(){const{t:e}=this.context,{useBlockie:t,avatarType:n,setAvatarType:o,selectedAddress:i}=this.props;let c;return n!==undefined?c=n:t&&(c="blockies"),a.default.createElement(g.Box,{ref:this.settingsRefs[4],className:"settings-page__content-row",display:l.Display.Flex,flexDirection:l.FlexDirection.Column,id:"blockie-optin"},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement(g.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault,className:"settings-page__content-item__title"},e("accountIdenticon")),a.default.createElement(g.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textAlternative,marginBottom:3,className:"settings-page__content-item__description"},e("accountIdenticonDescription")),a.default.createElement("div",{className:"settings-page__content-item__identicon gap-8"},a.default.createElement("button",{"data-testid":"maskicon_icon",onClick:()=>o("maskicon"),className:"flex items-center gap-2 justify-center flex-wrap"},a.default.createElement(r.AvatarAccount,{address:i,variant:r.AvatarAccountVariant.Maskicon,className:(0,s.default)({"outline outline-2 outline-primary-default":"maskicon"===c})}),a.default.createElement(g.Text,{color:l.TextColor.textDefault,variant:l.TextVariant.bodySm,as:"h6"},e("maskicons"))),a.default.createElement("button",{"data-testid":"jazz_icon",onClick:()=>o("jazzicon"),className:"flex items-center gap-2 justify-center flex-wrap"},a.default.createElement(r.AvatarAccount,{id:"jazzicon",address:i,variant:r.AvatarAccountVariant.Jazzicon,className:(0,s.default)({"outline outline-2 outline-primary-default":"jazzicon"===c})}),a.default.createElement(g.Text,{color:l.TextColor.textDefault,variant:l.TextVariant.bodySm,as:"h6"},e("jazzicons"))),a.default.createElement("button",{"data-testid":"blockie_icon",onClick:()=>o("blockies"),className:"flex items-center gap-2 justify-center flex-wrap"},a.default.createElement(r.AvatarAccount,{id:"blockies",address:i,variant:r.AvatarAccountVariant.Blockies,className:(0,s.default)({"outline outline-2 outline-primary-default":"blockies"===c})}),a.default.createElement(g.Text,{color:l.TextColor.textDefault,variant:l.TextVariant.bodySm,as:"h6"},e("blockies"))))))}renderShowNativeTokenAsMainBalance(){const{t:e}=this.context,t=e=>{this.context.trackEvent({category:p.MetaMetricsEventCategory.Settings,event:p.MetaMetricsEventName.SettingsUpdated,properties:{show_native_token_as_main_balance:e}})},{setShowNativeTokenAsMainBalancePreference:n,showNativeTokenAsMainBalance:o}=this.props;return a.default.createElement(g.Box,{ref:this.settingsRefs[1],className:"settings-page__content-row",display:l.Display.Flex,flexDirection:l.FlexDirection.Row,justifyContent:l.JustifyContent.spaceBetween,alignItems:l.AlignItems.center,id:"toggle-show-native-token-as-main-balance"},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement(g.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault,className:"settings-page__content-item__title"},e("showNativeTokenAsMainBalance"))),a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(u.default,{className:"show-native-token-as-main-balance",value:o,onToggle:e=>{n(!e),t(!e)}})))}renderTheme(){const{t:e}=this.context,{theme:t,setTheme:n}=this.props,o=[{name:e("lightTheme"),value:f.ThemeType.light},{name:e("darkTheme"),value:f.ThemeType.dark},{name:e("osTheme"),value:f.ThemeType.os}];return a.default.createElement(g.Box,{ref:this.settingsRefs[3],className:"settings-page__content-row",display:l.Display.Flex,flexDirection:l.FlexDirection.Column},a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement(g.Text,{variant:l.TextVariant.bodyMd,color:l.TextColor.textDefault,className:"settings-page__content-item__title"},this.context.t("theme")),a.default.createElement("div",{className:"settings-page__content-description"},this.context.t("themeDescription"))),a.default.createElement("div",{className:"settings-page__content-item"},a.default.createElement("div",{className:"settings-page__content-item-col"},a.default.createElement(c.default,{id:"select-theme",options:o,selectedOption:t,onChange:e=>{this.context.trackEvent({category:p.MetaMetricsEventCategory.Settings,event:"Theme Changed",properties:{theme_selected:e}}),n(e)}}))))}render(){return a.default.createElement("div",{className:"settings-page__body"},this.renderCurrentConversion(),this.renderShowNativeTokenAsMainBalance(),this.renderCurrentLocale(),this.renderTheme(),this.renderBlockieOptIn(),this.renderHideZeroBalanceTokensOptIn())}}n.default=b,_(b,"contextTypes",{t:o.default.func,metricsEvent:o.default.func,trackEvent:o.default.func}),_(b,"propTypes",{avatarType:o.default.string,setAvatarType:o.default.func,setCurrentCurrency:o.default.func,updateCurrentLocale:o.default.func,currentLocale:o.default.string,useBlockie:o.default.bool,currentCurrency:o.default.string,showNativeTokenAsMainBalance:o.default.bool,setShowNativeTokenAsMainBalancePreference:o.default.func,hideZeroBalanceTokens:o.default.bool,setHideZeroBalanceTokens:o.default.func,selectedAddress:o.default.string,theme:o.default.string,setTheme:o.default.func})}}},{package:"$root$",file:"ui/pages/settings/settings-tab/settings-tab.component.js"}],[7794,{"../../../../shared/modules/selectors/networks":5753,"../../../selectors":7886,"../../../store/actions":7916,"./settings-tab.component":7793,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,o=e("react-redux"),s=e("../../../store/actions"),r=e("../../../selectors"),i=e("../../../../shared/modules/selectors/networks"),l=(a=e("./settings-tab.component"))&&a.__esModule?a:{default:a};n.default=(0,o.connect)(e=>{const{metamask:t}=e,{currentCurrency:n,useBlockie:a,currentLocale:o}=t,{ticker:s}=(0,i.getProviderConfig)(e),{address:l}=(0,r.getSelectedInternalAccount)(e),{hideZeroBalanceTokens:c,showNativeTokenAsMainBalance:u,avatarType:d}=(0,r.getPreferences)(e);return{currentLocale:o,currentCurrency:n,nativeCurrency:s,useBlockie:a,avatarType:d,showNativeTokenAsMainBalance:u,hideZeroBalanceTokens:c,selectedAddress:l,tokenList:(0,r.getTokenList)(e),theme:(0,r.getTheme)(e)}},e=>({setCurrentCurrency:t=>e((0,s.setCurrentCurrency)(t)),setAvatarType:t=>e((0,s.setAvatarType)(t)),updateCurrentLocale:t=>e((0,s.updateCurrentLocale)(t)),setShowNativeTokenAsMainBalancePreference:t=>e((0,s.setShowNativeTokenAsMainBalancePreference)(t)),setParticipateInMetaMetrics:t=>e((0,s.setParticipateInMetaMetrics)(t)),setHideZeroBalanceTokens:t=>e((0,s.setHideZeroBalanceTokens)(t)),setTheme:t=>e((0,s.setTheme)(t))}))(l.default)}}},{package:"$root$",file:"ui/pages/settings/settings-tab/settings-tab.container.js"}],[7795,{"../../../app/scripts/lib/util":353,"../../../shared/constants/app":5598,"../../components/app/password-outdated-modal":6015,"../../components/app/shield-entry-modal":6063,"../../components/app/snaps/snap-icon":6087,"../../components/app/snaps/snap-settings-page":6107,"../../components/app/tab-bar":6209,"../../components/component-library":6325,"../../components/ui/metafox-logo":6792,"../../helpers/constants/design-system":6899,"../../helpers/constants/routes":6904,"../../helpers/utils/settings-search":6949,"./advanced-tab":7743,"./backup-and-sync-tab":7746,"./contact-list-tab":7756,"./developer-options-tab":7764,"./experimental-tab":7768,"./info-tab":7770,"./security-tab":7781,"./security-tab/change-password":7778,"./security-tab/reveal-srp-list":7784,"./settings-search":7790,"./settings-search-list":7788,"./settings-tab":7792,"./transaction-shield-tab":7809,"./transaction-shield-tab/claims-area":7802,classnames:3913,"prop-types":4893,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var r=o?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(a,s,r):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a}(e("react")),o=M(e("prop-types")),s=e("react-router-dom-v5-compat"),r=M(e("classnames")),i=M(e("../../components/app/tab-bar")),l=e("../../helpers/constants/routes"),c=e("../../helpers/utils/settings-search"),u=e("../../components/component-library"),d=e("../../helpers/constants/design-system"),p=M(e("../../components/ui/metafox-logo")),m=e("../../../app/scripts/lib/util"),f=e("../../../shared/constants/app"),g=e("../../components/app/snaps/snap-icon"),h=e("../../components/app/snaps/snap-settings-page"),y=M(e("../../components/app/password-outdated-modal")),_=M(e("../../components/app/shield-entry-modal")),v=M(e("./settings-tab")),E=M(e("./advanced-tab")),b=M(e("./info-tab")),x=M(e("./security-tab")),k=M(e("./contact-list-tab")),T=(M(e("./developer-options-tab")),M(e("./experimental-tab"))),w=M(e("./settings-search")),S=M(e("./settings-search-list")),C=e("./security-tab/reveal-srp-list"),N=M(e("./backup-and-sync-tab")),I=M(e("./security-tab/change-password")),R=M(e("./transaction-shield-tab/claims-area")),O=M(e("./transaction-shield-tab"));function M(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const D=({onMount:e})=>(a.default.useEffect(()=>{e()},[e]),a.default.createElement(s.Navigate,{to:{pathname:l.DEFAULT_ROUTE}}));D.propTypes={onMount:o.default.func.isRequired};class B extends a.PureComponent{constructor(...e){super(...e),P(this,"state",{isSearchList:!1,lastFetchedConversionDate:null,searchResults:[],searchText:"",showShieldEntryModal:!1})}componentDidMount(){this.handleConversionDate(),this.props.shouldShowShieldEntryModal&&(this.props.hasSubscribedToShield?setTimeout(()=>{this.props.navigate(l.TRANSACTION_SHIELD_ROUTE)}):this.setState({showShieldEntryModal:!0}))}componentDidUpdate(){this.handleConversionDate()}handleConversionDate(){const{conversionDate:e}=this.props;null!==e&&this.setState({lastFetchedConversionDate:e})}handleClickSetting(e){const{navigate:t}=this.props;t(e.route),this.setState({isSearchList:"",searchResults:""})}render(){const{navigate:e,backRoute:t,currentPath:n,mostRecentOverviewPage:o,addNewNetwork:s,isPasswordChangePage:i,isRevealSrpListPage:c,isSeedlessPasswordOutdated:g,isTransactionShieldPage:h}=this.props,{t:v}=this.context,E=(0,m.getEnvironmentType)(),b=E===f.ENVIRONMENT_TYPE_POPUP||E===f.ENVIRONMENT_TYPE_SIDEPANEL,x=E===f.ENVIRONMENT_TYPE_SIDEPANEL,k=c||i||h;return a.default.createElement("div",{className:(0,r.default)("main-container main-container--has-shadow settings-page",{"settings-page--selected":n!==l.SETTINGS_ROUTE,"settings-page--sidepanel":x})},this.state.showShieldEntryModal&&a.default.createElement(_.default,{skipEventSubmission:!0,onClose:()=>this.setState({showShieldEntryModal:!1})}),g&&a.default.createElement(y.default,null),a.default.createElement(u.Box,{className:"settings-page__header",padding:4,paddingBottom:2},a.default.createElement("div",{className:(0,r.default)("settings-page__header__title-container",{"settings-page__header__title-container--hide-search":k})},b&&a.default.createElement(a.default.Fragment,null,n===l.SETTINGS_ROUTE?a.default.createElement(p.default,{className:"settings-page__header__title-container__metamask-logo",unsetIconHeight:!0,onClick:()=>e(l.DEFAULT_ROUTE),display:[d.Display.Flex,d.Display.None]}):a.default.createElement(u.ButtonIcon,{ariaLabel:v("back"),iconName:u.IconName.ArrowLeft,className:"settings-page__header__title-container__back-button",color:d.Color.iconDefault,onClick:()=>e(t),display:[d.Display.Flex,d.Display.None],size:u.ButtonIconSize.Md})),this.renderTitle(),this.renderSearch(),a.default.createElement(u.ButtonIcon,{className:"settings-page__header__title-container__close-button",iconName:u.IconName.Close,ariaLabel:v("close"),onClick:()=>{e(s?l.NETWORKS_ROUTE:o)},size:u.ButtonIconSize.Md,marginLeft:"auto"}))),a.default.createElement("div",{className:"settings-page__content"},a.default.createElement("div",{className:"settings-page__content__tabs"},this.renderTabs()),a.default.createElement("div",{className:"settings-page__content__modules"},this.renderSubHeader(),this.renderContent())))}renderTitle(){const{t:e}=this.context,{isPopup:t,pathnameI18nKey:n,addressName:o,snapSettingsTitle:s}=this.props;let r;return r=t&&o?e("details"):n&&t?e(n):s||e("settings"),a.default.createElement("div",{className:"settings-page__header__title-container__title"},a.default.createElement(u.Text,{variant:d.TextVariant.headingMd,ellipsis:!0},r))}renderSearch(){const{isSearchList:e,searchText:t,searchResults:n}=this.state,{isRevealSrpListPage:o,isPasswordChangePage:s,isTransactionShieldPage:r}=this.props;return o||s||r?null:a.default.createElement(u.Box,{className:"settings-page__header__title-container__search",display:[d.Display.Block]},a.default.createElement(w.default,{onSearch:({searchQuery:e="",results:t=[]})=>{this.setState({isSearchList:""!==e,searchResults:t,searchText:e})},settingsRoutesList:(0,c.getSettingsRoutes)()}),e&&t.length>=3&&a.default.createElement(S.default,{results:n,onClickSetting:e=>this.handleClickSetting(e)}))}renderSubHeader(){const{t:e}=this.context,{currentPath:t,isPopup:n,isAddressEntryPage:o,pathnameI18nKey:s,addressName:r,backRoute:i,navigate:c}=this.props;let p;p=e(n&&o?"settings":o?"contacts":s||"general");const m=i!==l.SETTINGS_ROUTE;return!t.startsWith(l.NETWORKS_ROUTE)&&a.default.createElement(u.Box,{className:"settings-page__subheader",padding:4,paddingLeft:6,paddingRight:6,display:d.Display.Flex,flexDirection:d.FlexDirection.Row,alignItems:d.AlignItems.center},m&&a.default.createElement(u.ButtonIcon,{iconName:u.IconName.ArrowLeft,onClick:()=>c(i),marginRight:2,size:u.ButtonIconSize.Md}),a.default.createElement(u.Text,{variant:d.TextVariant.headingSm},p),o&&a.default.createElement("div",{className:"settings-page__subheader--break"},a.default.createElement("span",null," > "),r))}renderTabs(){const{navigate:e,currentPath:t,useExternalServices:n,settingsPageSnaps:o,isMetaMaskShieldFeatureEnabled:r,hasSubscribedToShield:c}=this.props,{t:d}=this.context,p=o.map(({id:e,name:t})=>({content:t,icon:a.default.createElement(g.SnapIcon,{snapId:e,avatarSize:u.IconSize.Md,style:{"--size":"20px"}}),key:`${l.SNAP_SETTINGS_ROUTE}/${encodeURIComponent(e)}`})),m=[{content:d("general"),icon:a.default.createElement(u.Icon,{name:u.IconName.Setting}),key:l.GENERAL_ROUTE},...p,{content:d("advanced"),icon:a.default.createElement("i",{className:"fas fa-sliders-h"}),key:l.ADVANCED_ROUTE},{content:d("backupAndSync"),icon:a.default.createElement(u.Icon,{name:u.IconName.SecurityTime}),key:l.BACKUPANDSYNC_ROUTE},{content:d("contacts"),icon:a.default.createElement(u.Icon,{name:u.IconName.Book}),key:l.CONTACT_LIST_ROUTE},{content:d("securityAndPrivacy"),icon:a.default.createElement(u.Icon,{name:u.IconName.Lock}),key:l.SECURITY_ROUTE},{content:d("experimental"),icon:a.default.createElement(u.Icon,{name:u.IconName.Flask}),key:l.EXPERIMENTAL_ROUTE},{content:d("about"),icon:a.default.createElement(u.Icon,{name:u.IconName.Info}),key:l.ABOUT_US_ROUTE}];return n&&m.splice(4,0,{content:d("notifications"),icon:a.default.createElement(u.Icon,{name:u.IconName.Notification}),key:l.NOTIFICATIONS_SETTINGS_ROUTE}),r&&n&&m.splice(-4,0,{content:d("shieldTx"),icon:a.default.createElement(u.Icon,{name:u.IconName.ShieldLock}),key:l.TRANSACTION_SHIELD_ROUTE}),a.default.createElement(i.default,{tabs:m,isActive:e=>e===l.GENERAL_ROUTE&&t===l.SETTINGS_ROUTE||(!(e!==l.CONTACT_LIST_ROUTE||!t.includes(l.CONTACT_LIST_ROUTE))||(0,s.matchPath)(e,t)),onSelect:t=>{t!==l.TRANSACTION_SHIELD_ROUTE||c?e(t):this.setState({showShieldEntryModal:!0})}})}renderContent(){return a.default.createElement(s.Routes,null,a.default.createElement(s.Route,{path:l.GENERAL_ROUTE,element:a.default.createElement(v.default,{lastFetchedConversionDate:this.state.lastFetchedConversionDate})}),a.default.createElement(s.Route,{path:l.ABOUT_US_ROUTE,element:a.default.createElement(b.default,null)}),a.default.createElement(s.Route,{path:`${l.SNAP_SETTINGS_ROUTE}/:snapId`,element:a.default.createElement(h.SnapSettingsRenderer,null)}),a.default.createElement(s.Route,{path:l.ADVANCED_ROUTE,element:a.default.createElement(E.default,null)}),a.default.createElement(s.Route,{path:l.BACKUPANDSYNC_ROUTE,element:a.default.createElement(N.default,null)}),a.default.createElement(s.Route,{path:l.ADD_NETWORK_ROUTE,element:a.default.createElement(D,{onMount:()=>this.props.toggleNetworkMenu({isAddingNewNetwork:!0})})}),a.default.createElement(s.Route,{path:l.NETWORKS_ROUTE,element:a.default.createElement(D,{onMount:()=>this.props.toggleNetworkMenu()})}),a.default.createElement(s.Route,{path:l.ADD_POPULAR_CUSTOM_NETWORK,element:a.default.createElement(D,{onMount:()=>this.props.toggleNetworkMenu()})}),a.default.createElement(s.Route,{path:l.SECURITY_ROUTE,element:a.default.createElement(x.default,null)}),a.default.createElement(s.Route,{path:l.TRANSACTION_SHIELD_ROUTE,element:a.default.createElement(O.default,null)}),a.default.createElement(s.Route,{path:`${l.TRANSACTION_SHIELD_CLAIM_ROUTES.BASE}/*`,element:a.default.createElement(R.default,null)}),a.default.createElement(s.Route,{path:l.EXPERIMENTAL_ROUTE,element:a.default.createElement(T.default,null)}),!1,a.default.createElement(s.Route,{path:l.CONTACT_LIST_ROUTE,element:a.default.createElement(k.default,null)}),a.default.createElement(s.Route,{path:l.CONTACT_ADD_ROUTE,element:a.default.createElement(k.default,null)}),a.default.createElement(s.Route,{path:`${l.CONTACT_EDIT_ROUTE}/:id`,element:a.default.createElement(k.default,null)}),a.default.createElement(s.Route,{path:`${l.CONTACT_VIEW_ROUTE}/:id`,element:a.default.createElement(k.default,null)}),a.default.createElement(s.Route,{path:l.REVEAL_SRP_LIST_ROUTE,element:a.default.createElement(C.RevealSrpList,null)}),a.default.createElement(s.Route,{path:l.SECURITY_PASSWORD_CHANGE_ROUTE,element:a.default.createElement(I.default,null)}),a.default.createElement(s.Route,{path:"*",element:a.default.createElement(v.default,{lastFetchedConversionDate:this.state.lastFetchedConversionDate})}))}}P(B,"propTypes",{addNewNetwork:o.default.bool,addressName:o.default.string,backRoute:o.default.string,conversionDate:o.default.number,currentPath:o.default.string,hasSubscribedToShield:o.default.bool,isAddressEntryPage:o.default.bool,isMetaMaskShieldFeatureEnabled:o.default.bool,isPasswordChangePage:o.default.bool,isPopup:o.default.bool,isRevealSrpListPage:o.default.bool,isSeedlessPasswordOutdated:o.default.bool,isTransactionShieldPage:o.default.bool,mostRecentOverviewPage:o.default.string.isRequired,navigate:o.default.func.isRequired,pathnameI18nKey:o.default.string,settingsPageSnaps:o.default.array,shouldShowShieldEntryModal:o.default.bool,snapSettingsTitle:o.default.string,toggleNetworkMenu:o.default.func.isRequired,useExternalServices:o.default.bool}),P(B,"contextTypes",{t:o.default.func});n.default=B}}},{package:"$root$",file:"ui/pages/settings/settings.component.js"}]],[],{});