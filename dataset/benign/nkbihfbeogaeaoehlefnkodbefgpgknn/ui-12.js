LavaPack.loadBundle([[7394,{"../../../../components/app/alert-system/contexts/alertMetricsContext":5778,"../../../../components/app/alert-system/inline-alert":5780,"../../../../components/app/alert-system/multiple-alert-modal":5782,"../../../../components/app/confirm/info/row/alert-row/alert-row":5867,"../../../../components/app/confirm/info/row/constants":5868,"../../../../components/app/confirm/info/row/section":5877,"../../../../components/component-library":6325,"../../../../components/ui/icon/preloader/preloader-icon.component":6768,"../../../../components/ui/tooltip":6835,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useAlerts":7027,"../../../../hooks/useI18nContext":7047,"../../../../selectors":7886,"../../hooks/transactions/useIsEnforcedSimulationsSupported":7521,"../../selectors/preferences":7573,"../modals/simulation-settings-modal/simulation-settings-modal":7360,"./balance-change-list":7389,"./useBalanceChanges":7397,"./useSimulationMetrics":7399,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SimulationDetailsLayout=n.SimulationDetails=void 0;var s=e("@metamask/transaction-controller"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),a=e("react-redux"),r=e("../../../../components/app/alert-system/contexts/alertMetricsContext"),i=_(e("../../../../components/app/alert-system/inline-alert")),c=e("../../../../components/app/alert-system/multiple-alert-modal"),u=e("../../../../components/app/confirm/info/row/alert-row/alert-row"),l=e("../../../../components/app/confirm/info/row/constants"),d=e("../../../../components/app/confirm/info/row/section"),m=e("../../../../components/component-library"),p=_(e("../../../../components/ui/icon/preloader/preloader-icon.component")),f=_(e("../../../../components/ui/tooltip")),h=e("../../../../helpers/constants/design-system"),g=_(e("../../../../hooks/useAlerts")),v=e("../../../../hooks/useI18nContext"),T=e("../../../../selectors"),y=e("../modals/simulation-settings-modal/simulation-settings-modal"),k=e("../../selectors/preferences"),S=e("../../hooks/transactions/useIsEnforcedSimulationsSupported"),C=e("./balance-change-list"),A=e("./useBalanceChanges"),w=e("./useSimulationMetrics");function _(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},b.apply(null,arguments)}const E=()=>o.default.createElement("div",{role:"progressbar"},o.default.createElement(p.default,{size:20})),I=({error:e})=>{const t=(0,v.useI18nContext)();return o.default.createElement(m.Text,{color:e.code===s.SimulationErrorCode.Reverted?h.TextColor.warningDefault:h.TextColor.textDefault,variant:h.TextVariant.bodyMd,display:h.Display.Flex,alignItems:h.AlignItems.center},e.code===s.SimulationErrorCode.Reverted&&o.default.createElement(m.Icon,{name:m.IconName.Warning,marginInlineEnd:1}),e.code===s.SimulationErrorCode.Reverted?t("simulationDetailsTransactionReverted"):t("simulationDetailsUnavailable"))},P=()=>{const e=(0,v.useI18nContext)();return o.default.createElement(m.Text,{color:h.TextColor.textDefault,variant:h.TextVariant.bodyMd,width:h.BlockSize.ElevenTwelfths,textAlign:h.TextAlign.Right},e("simulationDetailsNoChanges"))},M=({title:e,titleTooltip:t,transactionId:n})=>{var r;const i=(0,v.useI18nContext)(),c=(0,S.useIsEnforcedSimulationsSupported)(),d=(0,a.useSelector)(k.selectConfirmationAdvancedDetailsOpen),p=(0,a.useSelector)(e=>(0,T.selectTransactionMetadata)(e,n)),f=null==p||null===(r=p.containerTypes)||void 0===r?void 0:r.includes(s.TransactionContainerType.EnforcedSimulations),g=e??i(f?"simulationDetailsTitleEnforced":"simulationDetailsTitle"),C=t??i(f?"simulationDetailsTitleTooltipEnforced":"simulationDetailsTitleTooltip"),[A,w]=(0,o.useState)(!1),_=d&&c;return o.default.createElement(m.Box,{display:h.Display.Flex,flexDirection:h.FlexDirection.Row,justifyContent:h.JustifyContent.spaceBetween,width:h.BlockSize.Full,alignItems:h.AlignItems.center},o.default.createElement(u.ConfirmInfoAlertRow,{alertKey:l.RowAlertKey.Resimulation,label:g,ownerId:n,tooltip:C,tooltipIcon:f&&m.IconName.SecurityTick,tooltipIconColor:f&&h.IconColor.infoDefault,style:{paddingLeft:0,paddingRight:0}}),_&&o.default.createElement(m.ButtonIcon,{iconName:m.IconName.Setting,size:m.ButtonIconSize.Sm,color:h.IconColor.iconMuted,ariaLabel:"simulation-settings",onClick:()=>w(!0)}),A&&o.default.createElement(y.SimulationSettingsModal,{onClose:()=>w(!1)}))},R=()=>{const e=(0,v.useI18nContext)();return o.default.createElement(m.Box,{display:h.Display.Flex,flexDirection:h.FlexDirection.Row,alignItems:h.AlignItems.center,gap:1},o.default.createElement(m.Text,{variant:h.TextVariant.bodyMdMedium},e("simulationDetailsTitle")),o.default.createElement(f.default,{interactive:!0,position:"top",containerClassName:"info-tooltip__tooltip-container",tooltipInnerClassName:"info-tooltip__tooltip-content",tooltipArrowClassName:"info-tooltip__top-tooltip-arrow",html:e("simulationDetailsTitleTooltip"),theme:"tippy-tooltip-info",style:{display:h.Display.Flex}},o.default.createElement(m.Icon,{name:m.IconName.Question,marginLeft:1,color:h.IconColor.iconAlternative,size:m.IconSize.Sm})))},N=({children:e,isTransactionsRedesign:t,transactionId:n,title:s,titleTooltip:a})=>o.default.createElement(m.Box,{display:h.Display.Flex,flexDirection:h.FlexDirection.Row,alignItems:h.AlignItems.center,justifyContent:h.JustifyContent.spaceBetween},t?o.default.createElement(M,{title:s,titleTooltip:a,transactionId:n}):o.default.createElement(R,null),e),O=({title:e,titleTooltip:t,inHeader:n,isTransactionsRedesign:s,transactionId:a,children:r})=>s?o.default.createElement(d.ConfirmInfoSection,{noPadding:!0},o.default.createElement(m.Box,{"data-testid":"simulation-details-layout",className:"simulation-details-layout",display:h.Display.Flex,flexDirection:h.FlexDirection.Column,borderRadius:h.BorderRadius.LG,borderColor:s?h.BorderColor.transparent:h.BorderColor.borderDefault,paddingInline:3,paddingTop:1,paddingBottom:2,margin:s?null:4,gap:3},o.default.createElement(N,{isTransactionsRedesign:s,transactionId:a,title:e,titleTooltip:t},n),r)):o.default.createElement(m.Box,{"data-testid":"simulation-details-layout",className:"simulation-details-layout",display:h.Display.Flex,flexDirection:h.FlexDirection.Column,borderRadius:h.BorderRadius.LG,borderColor:s?h.BorderColor.transparent:h.BorderColor.borderDefault,paddingInline:3,paddingTop:2,paddingBottom:2,margin:s?null:4,gap:3},o.default.createElement(N,{isTransactionsRedesign:s,transactionId:a,titleTooltip:t},n),r);n.SimulationDetailsLayout=O;const D=({transactionId:e})=>{var t,n;const{getFieldAlerts:s}=(0,g.default)(e),a=s(l.RowAlertKey.EstimatedChangesStatic),u=null===(t=a[0])||void 0===t?void 0:t.severity,d=null===(n=a[0])||void 0===n?void 0:n.key,{trackInlineAlertClicked:p}=(0,r.useAlertMetrics)(),[f,h]=(0,o.useState)(!1),v=()=>{h(!1)};return o.default.createElement(o.default.Fragment,null,a.length>0&&o.default.createElement(m.Box,{marginLeft:1},o.default.createElement(i.default,{onClick:()=>{h(!0),p(d)},severity:u,showArrow:!1,textOverride:""})),f&&o.default.createElement(c.MultipleAlertModal,{alertKey:d,ownerId:e,onFinalAcknowledgeClick:v,onClose:v,showCloseIcon:!1,skipAlertNavigation:!0}))};n.SimulationDetails=({transaction:e,enableMetrics:t=!1,isTransactionsRedesign:n=!1,metricsOnly:a=!1,staticRows:r=[],smartTransactionStatus:i})=>{var c;const d=(0,v.useI18nContext)(),{chainId:p,id:f,simulationData:T}=e,y=(0,A.useBalanceChanges)({chainId:p,simulationData:T}),k=!T||y.pending,S=(null==r?void 0:r.length)>0&&r.some(e=>{var t;return(null===(t=e.balanceChanges)||void 0===t?void 0:t.length)>0});(0,w.useSimulationMetrics)({enableMetrics:t,balanceChanges:y.value,loading:k,simulationData:T,transactionId:f});const{getFieldAlerts:_}=(0,g.default)(f),x=null===(c=_(l.RowAlertKey.EstimatedChangesStatic)[0])||void 0===c?void 0:c.severity;if(a)return null;if(k)return o.default.createElement(O,{inHeader:o.default.createElement(E,null),isTransactionsRedesign:n,transactionId:f});const{error:M}=T;if([s.SimulationErrorCode.ChainNotSupported,s.SimulationErrorCode.Disabled].includes(null==M?void 0:M.code)&&!S)return null;if(M&&!S){const e=M.code!==s.SimulationErrorCode.Reverted&&{inHeader:o.default.createElement(I,{error:M})};return o.default.createElement(O,b({isTransactionsRedesign:n,transactionId:f},e),M.code===s.SimulationErrorCode.Reverted&&o.default.createElement(I,{error:M}))}const R=y.value;if(0===R.length&&!S)return o.default.createElement(O,{isTransactionsRedesign:n,transactionId:f,inHeader:o.default.createElement(P,null)});const N=R.filter(e=>e.amount.isNegative()),F=R.filter(e=>!e.amount.isNegative()),B=t=>{const{status:n}=e;return"success"===i?d(t.completed):"pending"===i?d(t.inProgress):n===s.TransactionStatus.confirmed?d(t.completed):n===s.TransactionStatus.submitted||n===s.TransactionStatus.signed||n===s.TransactionStatus.approved?d(t.inProgress):d(t.default)};return o.default.createElement(O,{isTransactionsRedesign:n,transactionId:f},o.default.createElement(m.Box,{display:h.Display.Flex,flexDirection:h.FlexDirection.Column,gap:3},r.map((e,t)=>o.default.createElement(o.Fragment,{key:t},o.default.createElement(C.BalanceChangeList,{heading:e.label,balanceChanges:e.balanceChanges,labelColor:(0,u.getAlertTextColors)(x)}),o.default.createElement(D,{transactionId:f}))),o.default.createElement(C.BalanceChangeList,{heading:B({default:"simulationDetailsOutgoingHeading",inProgress:"simulationDetailsOutgoingHeadingSending",completed:"simulationDetailsOutgoingHeadingSent"}),balanceChanges:N,testId:"simulation-rows-outgoing"}),o.default.createElement(C.BalanceChangeList,{heading:B({default:"simulationDetailsIncomingHeading",inProgress:"simulationDetailsIncomingHeadingReceiving",completed:"simulationDetailsIncomingHeadingReceived"}),balanceChanges:F,testId:"simulation-rows-incoming"})))}}}},{package:"$root$",file:"ui/pages/confirmations/components/simulation-details/simulation-details.tsx"}],[7395,{"../../../../../shared/constants/transaction":5637,"./types":7396},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sortBalanceChanges=n.compareBalanceChanges=void 0;var s=e("../../../../../shared/constants/transaction"),o=e("./types");const a=[s.TokenStandard.none,s.TokenStandard.ERC20,s.TokenStandard.ERC721,s.TokenStandard.ERC1155],r=[(e,t)=>e.fiatAmount===t.fiatAmount?0:e.fiatAmount===o.FIAT_UNAVAILABLE?1:t.fiatAmount===o.FIAT_UNAVAILABLE?-1:t.fiatAmount-e.fiatAmount,(e,t)=>a.indexOf(e.asset.standard)-a.indexOf(t.asset.standard)],i=(e,t)=>{for(const n of r){const s=n(e,t);if(0!==s)return s}return 0};n.compareBalanceChanges=i;n.sortBalanceChanges=e=>[...e].sort(i)}}},{package:"$root$",file:"ui/pages/confirmations/components/simulation-details/sortBalanceChanges.ts"}],[7396,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FIAT_UNAVAILABLE=void 0;n.FIAT_UNAVAILABLE=null}}},{package:"$root$",file:"ui/pages/confirmations/components/simulation-details/types.ts"}],[7397,{"../../../../../shared/constants/transaction":5637,"../../../../ducks/metamask/metamask":6883,"../../../../helpers/utils/util":6959,"../../../../hooks/useAsync":7029,"../../../../selectors":7886,"../../utils/token":7590,"./types":7396,"@metamask/transaction-controller":2868,"bignumber.js":3768,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBalanceChanges=void 0;var s=e("react-redux"),o=e("@metamask/transaction-controller"),a=e("bignumber.js"),r=e("../../../../hooks/useAsync"),i=e("../../../../../shared/constants/transaction"),c=e("../../../../ducks/metamask/metamask"),u=e("../../../../selectors"),l=e("../../../../helpers/utils/util"),d=e("../../utils/token"),m=e("./types");function p(e){return String(e)}function f(e){switch(e){case o.SimulationTokenStandard.erc20:return i.TokenStandard.ERC20;case o.SimulationTokenStandard.erc721:return i.TokenStandard.ERC721;case o.SimulationTokenStandard.erc1155:return i.TokenStandard.ERC1155;default:throw new Error(`Unknown token standard: ${e}`)}}function h({isDecrease:e,difference:t},n){return new a.BigNumber(t,16).times(e?-1:1).shift(-n)}async function g(e,t,n){const s=await(0,l.fetchTokenExchangeRates)(e,t,n);return Object.fromEntries(Object.entries(s).map(([e,t])=>[e.toLowerCase(),t]))}n.useBalanceChanges=({chainId:e,simulationData:t})=>{const n=(0,s.useSelector)(c.getCurrentCurrency),a=(0,s.useSelector)(t=>(0,u.selectConversionRateByChainId)(t,e)),l=(0,s.useSelector)(t=>(0,u.getUSDConversionRateByChainId)(e)(t)),{nativeBalanceChange:v,tokenBalanceChanges:T=[]}=t??{},y=T.filter(e=>e.standard===o.SimulationTokenStandard.erc20).map(e=>e.address),k=(0,r.useAsyncResultOrThrow)(()=>(0,d.fetchAllErc20Decimals)(y,e),[e,JSON.stringify(y)]),S=(0,r.useAsyncResultOrThrow)(()=>g(n,y,e),[JSON.stringify(y),e,n]),C=(0,r.useAsyncResultOrThrow)(async()=>"usd"===n?S.value??{}:g("usd",y,e),[JSON.stringify(y),e,n,S.value]);if(k.pending||S.pending||C.pending||!t)return{pending:!0,value:[]};const A=function(e,t,n,s){if(!e)return undefined;const o={chainId:s,standard:i.TokenStandard.none},a=h(e,18),[r,c]=[t,n].map(e=>e?a.times(p(e)).toNumber():m.FIAT_UNAVAILABLE);return{asset:o,amount:a,fiatAmount:r,usdAmount:c}}(v,a,l,e),w=function(e,t,n,s,o){return e.map(e=>{const a={chainId:o,standard:f(e.standard),address:e.address.toLowerCase(),tokenId:e.id},r=h(e,a.standard===i.TokenStandard.ERC20?t[a.address]??d.ERC20_DEFAULT_DECIMALS:0),c=n[e.address.toLowerCase()],u=s[e.address.toLowerCase()],[l,g]=[c,u].map(e=>e?r.times(p(e)).toNumber():m.FIAT_UNAVAILABLE);return{asset:a,amount:r,fiatAmount:l,usdAmount:g}})}(T,k.value,S.value,C.value,e);return{pending:!1,value:[...A?[A]:[],...w]}}}}},{package:"$root$",file:"ui/pages/confirmations/components/simulation-details/useBalanceChanges.ts"}],[7398,{react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useLoadingTime=function(){const[e]=(0,s.useState)(Date.now()),[t,n]=(0,s.useState)();return{loadingTime:t,setLoadingComplete:()=>{t===undefined&&n((Date.now()-e)/1e3)}}};var s=e("react")}}},{package:"$root$",file:"ui/pages/confirmations/components/simulation-details/useLoadingTime.ts"}],[7399,{"../../../../../shared/constants/metametrics":5613,"../../../../../shared/constants/transaction":5637,"../../../../contexts/metametrics":6855,"../../../../hooks/useDisplayName":7038,"../../../../hooks/useTrustSignals":7090,"../../hooks/useTransactionEventFragment":7564,"./fiat-display":7391,"./useLoadingTime":7398,"@metamask/name-controller":2215,"@metamask/transaction-controller":2868,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SimulationResponseType=n.PetnameType=n.FiatType=n.AssetType=void 0,n.useSimulationMetrics=function({balanceChanges:e,loading:t,simulationData:n,transactionId:c,enableMetrics:d}){var m;const{loadingTime:h,setLoadingComplete:S}=(0,p.useLoadingTime)();t||S();const C=e.filter(({asset:e})=>Boolean(e.address)).map(({asset:e})=>({value:e.address,type:a.NameType.ETHEREUM_ADDRESS,preferContractSymbol:!0,variation:e.chainId})),A=(0,i.useDisplayNames)(C).reduce((t,n,s)=>({...t,[e[s].asset.address??""]:n}),{}),{updateTransactionEventFragment:w}=(0,r.useTransactionEventFragment)();!function(e,t){const n=(0,o.useContext)(u.MetaMetricsContext),[s,a]=(0,o.useState)([]);for(const o of e){const e=o.asset.address??"",r=t[e],i=o.asset.address&&!o.fiatAmount||k(o,r)===v.Unknown,c=s.includes(e);i&&!c&&(n({event:l.MetaMetricsEventName.SimulationIncompleteAssetDisplayed,category:l.MetaMetricsEventCategory.Transactions,properties:{asset_address:o.asset.address,asset_petname:k(o,r),asset_symbol:null==r?void 0:r.contractDisplayName,asset_type:y(o.asset.standard),fiat_conversion_available:o.fiatAmount?g.Available:g.NotAvailable,location:"confirmation"}}),a([...s,e]))}}(e,A);const _=e.filter(e=>!e.amount.isNegative()),x=e.filter(e=>e.amount.isNegative()),b=function(e){var t;if(!e)return f.InProgress;if((null===(t=e.error)||void 0===t?void 0:t.code)===s.SimulationErrorCode.Reverted)return f.Reverted;if(e.error)return f.Failed;if(!(null!=e&&e.nativeBalanceChange||null!=e&&e.tokenBalanceChanges.length))return f.NoChanges;return f.Changes}(n),E={simulation_response:b,simulation_latency:h,...T(_,"simulation_receiving_assets_",A),...T(x,"simulation_sending_assets_",A)},I={properties:E,sensitiveProperties:{}},P=!d||[s.SimulationErrorCode.ChainNotSupported,s.SimulationErrorCode.Disabled].includes(null==n||null===(m=n.error)||void 0===m?void 0:m.code);(0,o.useEffect)(()=>{P||w(I,c)},[P,w,c,JSON.stringify(I)])};var s=e("@metamask/transaction-controller"),o=e("react"),a=e("@metamask/name-controller"),r=e("../../hooks/useTransactionEventFragment"),i=e("../../../../hooks/useDisplayName"),c=e("../../../../../shared/constants/transaction"),u=e("../../../../contexts/metametrics"),l=e("../../../../../shared/constants/metametrics"),d=e("../../../../hooks/useTrustSignals"),m=e("./fiat-display"),p=e("./useLoadingTime");let f=n.SimulationResponseType=function(e){return e.Failed="failed",e.Reverted="transaction_revert",e.NoChanges="no_balance_change",e.Changes="balance_change",e.InProgress="simulation_in_progress",e}({}),h=n.AssetType=function(e){return e.Native="native",e.ERC20="erc20",e.ERC721="erc721",e.ERC1155="erc1155",e}({}),g=n.FiatType=function(e){return e.Available="available",e.NotAvailable="not_available",e}({}),v=n.PetnameType=function(e){return e.Saved="saved",e.Default="default",e.Unknown="unknown",e}({});function T(e,t,n){const s=e.length,o=S(e.map(e=>y(e.asset.standard))),a=S(e.map(e=>e.fiatAmount?g.Available:g.NotAvailable)),r=S(e.map(e=>k(e,n[e.asset.address??""]))),i=e.map(e=>e.usdAmount),c=(0,m.calculateTotalFiat)(i);return function(e,t){return Object.entries(e).reduce((e,[n,s])=>({...e,[`${t}${n}`]:s}),{})}({petname:r,quantity:s,type:o,value:a,total_value:c?Math.abs(c):undefined},t)}function y(e){switch(e){case c.TokenStandard.ERC20:return h.ERC20;case c.TokenStandard.ERC721:return h.ERC721;case c.TokenStandard.ERC1155:return h.ERC1155;default:return h.Native}}function k(e,t={name:"",hasPetname:!1,displayState:d.TrustSignalDisplayState.Unknown,isAccount:!1}){return e.asset.standard===c.TokenStandard.none?v.Default:t.hasPetname?v.Saved:t.name?v.Default:v.Unknown}function S(e){return Array.from(new Set(e))}}}},{package:"$root$",file:"ui/pages/confirmations/components/simulation-details/useSimulationMetrics.ts"}],[7400,{"./smart-contract-with-logo":7401},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SmartContractWithLogo",{enumerable:!0,get:function(){return o.default}});var s,o=(s=e("./smart-contract-with-logo"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/confirmations/components/smart-contract-with-logo/index.ts"}],[7401,{"../../../../components/component-library":6325,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../../helpers/constants/design-system"),r=e("../../../../components/component-library"),i=e("../../../../hooks/useI18nContext");n.default=function(){const e=(0,i.useI18nContext)();return o.default.createElement(r.Box,{display:a.Display.Flex,flexDirection:a.FlexDirection.Row,alignItems:a.AlignItems.center,borderRadius:a.BorderRadius.pill},o.default.createElement("img",{src:"images/logo/metamask-fox.svg",width:"16",height:"16"}),o.default.createElement(r.Text,{marginLeft:2,color:a.TextColor.inherit},e("interactWithSmartContract")))}}}},{package:"$root$",file:"ui/pages/confirmations/components/smart-contract-with-logo/smart-contract-with-logo.tsx"}],[7402,{"./smart-transactions-banner-alert":7403},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SmartTransactionsBannerAlert",{enumerable:!0,get:function(){return s.SmartTransactionsBannerAlert}});var s=e("./smart-transactions-banner-alert")}}},{package:"$root$",file:"ui/pages/confirmations/components/smart-transactions-banner-alert/index.ts"}],[7403,{"../../../../../shared/constants/alerts":5596,"../../../../../shared/constants/smartTransactions":5628,"../../../../../shared/lib/confirmation.utils":5650,"../../../../../shared/modules/selectors":5751,"../../../../../shared/modules/selectors/smart-transactions":5754,"../../../../components/component-library":6325,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../store/actions":7916,"../../context/confirm":7449,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.SmartTransactionsBannerAlert=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=e("react-redux"),a=e("../../../../hooks/useI18nContext"),r=e("../../../../components/component-library"),i=e("../../../../store/actions"),c=e("../../../../../shared/constants/alerts"),u=e("../../../../../shared/constants/smartTransactions"),l=e("../../../../helpers/constants/design-system"),d=e("../../context/confirm"),m=e("../../../../../shared/lib/confirmation.utils"),p=e("../../../../../shared/modules/selectors/smart-transactions"),f=e("../../../../../shared/modules/selectors");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const g=n.SmartTransactionsBannerAlert=s.default.memo(({marginType:e="default"})=>{var t;const n=(0,a.useI18nContext)();let h;try{const e=(0,d.useConfirmContext)();h=null==e?void 0:e.currentConfirmation}catch{h=null}const g=(0,o.useSelector)(e=>{var t;return!1!==(null===(t=e.metamask.alertEnabledness)||void 0===t?void 0:t[c.AlertTypes.smartTransactionsMigration])}),v=(0,o.useSelector)(p.getSmartTransactionsOptInStatusInternal),T=(0,o.useSelector)(p.getSmartTransactionsMigrationAppliedInternal),y=(0,o.useSelector)(f.getChainSupportsSmartTransactions),k=(0,o.useSelector)(f.getSmartTransactionsPreferenceEnabled),S=(0,s.useCallback)(()=>{(0,i.setAlertEnabledness)(c.AlertTypes.smartTransactionsMigration,!1)},[]);s.default.useEffect(()=>{g&&!v&&S()},[g,v,S]);const C=g&&v&&T&&y&&k;if(!(null===h?C:C&&(0,m.isCorrectDeveloperTransactionType)(null===(t=h)||void 0===t?void 0:t.type)))return null;return s.default.createElement(r.Box,{className:"transaction-alerts"},s.default.createElement(r.BannerAlert,{severity:r.BannerAlertSeverity.Info,onClose:S,"data-testid":"smart-transactions-banner-alert",style:(()=>{switch(e){case"none":return{margin:0};case"noTop":return{marginTop:0};case"onlyTop":return{margin:0,marginTop:16};default:return undefined}})()},s.default.createElement(r.Text,{fontWeight:l.FontWeight.Bold},n("smartTransactionsEnabledTitle")),s.default.createElement(r.Text,{as:"p"},s.default.createElement(r.ButtonLink,{href:u.SMART_TRANSACTIONS_LEARN_MORE_URL,onClick:S,externalLink:!0,style:{height:"unset",verticalAlign:"unset"}},n("smartTransactionsEnabledLink")),n("smartTransactionsEnabledDescription"))))});g.displayName="SmartTransactionsBannerAlert";n.default=g}}},{package:"$root$",file:"ui/pages/confirmations/components/smart-transactions-banner-alert/smart-transactions-banner-alert.tsx"}],[7404,{"../../../../components/component-library":6325,"../../../../components/ui/actionable-message":6721,"../../../../hooks/useI18nContext":7047,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=i(e("react")),o=i(e("../../../../components/ui/actionable-message")),a=e("../../../../components/component-library"),r=e("../../../../hooks/useI18nContext");function i(e){return e&&e.__esModule?e:{default:e}}n.default=({message:e,learnMoreLink:t,error:n})=>{const i=(0,r.useI18nContext)();return s.default.createElement(s.default.Fragment,null,s.default.createElement(a.Text,{"data-testid":"snap-account-error-message-text",style:n?{marginBottom:2}:{}},e,Boolean(t)&&s.default.createElement(s.default.Fragment,null," ",s.default.createElement("a",{"data-testid":"snap-account-error-message-learn-more-link",href:t,rel:"noopener noreferrer",target:"_blank"},i("learnMoreUpperCase")))),Boolean(n)&&s.default.createElement(o.default,{type:"danger",message:n,dataTestId:"snap-account-error-message-error"}))}}}},{package:"$root$",file:"ui/pages/confirmations/components/snap-account-error-message/SnapAccountErrorMessage.tsx"}],[7405,{"./SnapAccountErrorMessage":7404},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SnapAccountErrorMessage",{enumerable:!0,get:function(){return o.default}});var s,o=(s=e("./SnapAccountErrorMessage"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/confirmations/components/snap-account-error-message/index.tsx"}],[7406,{"../../../../components/component-library":6325,"../../../../hooks/useI18nContext":7047,"../../../remove-snap-account/snap-account-card":7736,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../../components/component-library"),r=e("../../../../hooks/useI18nContext"),i=e("../../../remove-snap-account/snap-account-card");n.default=({message:e,address:t,learnMoreLink:n})=>{const s=(0,r.useI18nContext)();return o.default.createElement(o.default.Fragment,null,o.default.createElement(i.SnapAccountCard,{address:t}),o.default.createElement(a.Text,{"data-testid":"snap-account-success-message-text"},e,Boolean(n)&&o.default.createElement(o.default.Fragment,null," ",o.default.createElement("a",{"data-testid":"snap-account-success-message-learn-more-link",href:n,rel:"noopener noreferrer",target:"_blank"},s("learnMoreUpperCase")))))}}}},{package:"$root$",file:"ui/pages/confirmations/components/snap-account-success-message/SnapAccountSuccessMessage.tsx"}],[7407,{"./SnapAccountSuccessMessage":7406},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"SnapAccountSuccessMessage",{enumerable:!0,get:function(){return o.default}});var s,o=(s=e("./SnapAccountSuccessMessage"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/confirmations/components/snap-account-success-message/index.tsx"}],[7408,{"../../../../components/component-library":6325,"../../../../helpers/constants/design-system":6899,classnames:3913,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var s=c(e("react")),o=c(e("prop-types")),a=c(e("classnames")),r=e("../../../../helpers/constants/design-system"),i=e("../../../../components/component-library");function c(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},u.apply(null,arguments)}function l({"data-testid":e,detailTitle:t="",detailText:n,detailTotal:o="",hasDetailTextInSeparateRow:c=!1,subTitle:l="",subText:d="",flexWidthValues:m=!1,...p}){return s.default.createElement("div",u({className:"transaction-detail-item","data-testid":e},p),s.default.createElement("div",{className:"transaction-detail-item__row"},s.default.createElement(i.Text,{as:"h6",display:r.Display.Flex,flexWrap:r.FlexWrap.NoWrap,paddingBottom:1,variant:r.TextVariant.bodyMdMedium},t),s.default.createElement("div",{className:(0,a.default)("transaction-detail-item__detail-values",{"transaction-detail-item__detail-values--flex-width":m})},n&&s.default.createElement(i.Text,{as:"h6",color:r.Color.textAlternative,width:c?r.BlockSize.Full:null},n),s.default.createElement(i.Text,{as:"h6",color:r.Color.textDefault,marginLeft:1,textAlign:r.TextAlign.Right,variant:r.TextVariant.bodyMd},o))),s.default.createElement("div",{className:"transaction-detail-item__row"},s.default.isValidElement(l)?s.default.createElement("div",null,l):s.default.createElement(i.Text,{as:"h6",variant:r.TextVariant.bodySm,color:r.Color.textMuted,style:{flex:"1 0 auto"}},l),s.default.createElement(i.Text,{as:"h6",variant:r.TextVariant.bodySm,color:r.Color.textAlternative,textAlign:r.TextAlign.End,className:"transaction-detail-item__row-subText"},d)))}l.propTypes={"data-testid":o.default.string,detailTitle:o.default.oneOfType([o.default.string,o.default.node]),detailText:o.default.oneOfType([o.default.string,o.default.node]),detailTotal:o.default.oneOfType([o.default.string,o.default.node]),hasDetailTextInSeparateRow:o.default.bool,subTitle:o.default.oneOfType([o.default.string,o.default.node]),subText:o.default.oneOfType([o.default.string,o.default.node]),flexWidthValues:o.default.bool}}}},{package:"$root$",file:"ui/pages/confirmations/components/transaction-detail-item/transaction-detail-item.component.js"}],[7409,{"./nested-transaction-tag":7410},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"NestedTransactionTag",{enumerable:!0,get:function(){return s.NestedTransactionTag}});var s=e("./nested-transaction-tag")}}},{package:"$root$",file:"ui/pages/confirmations/components/transactions/nested-transaction-tag/index.ts"}],[7410,{"../../../../../../shared/lib/transactions.utils":5721,"../../../../../components/component-library":6325,"../../../../../components/ui/tooltip":6835,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,"../../confirm/info/hooks/useNestedTransactionLabels":7235,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NestedTransactionTag=function(){const e=(0,o.useI18nContext)(),{currentConfirmation:t}=(0,a.useConfirmContext)(),{nestedTransactions:n}=t??{},d=(0,l.isBatchTransaction)(n),m=(0,r.useNestedTransactionLabels)({nestedTransactions:n});if(!d||1===(null==n?void 0:n.length))return null;const p=e("transactionIncludesTypes",[m.join(", ")]);return s.default.createElement(c.Box,{paddingBottom:4,textAlign:i.TextAlign.Center},s.default.createElement(u.default,{title:p,position:"bottom"},s.default.createElement(c.Tag,{label:e("includesXTransactions",[null==n?void 0:n.length]),startIconName:c.IconName.Info,paddingLeft:2,paddingRight:2,display:i.Display.InlineFlex,backgroundColor:i.BackgroundColor.backgroundMuted,color:i.TextColor.textAlternative,labelProps:{color:i.TextColor.textAlternative}})))};var s=d(e("react")),o=e("../../../../../hooks/useI18nContext"),a=e("../../../context/confirm"),r=e("../../confirm/info/hooks/useNestedTransactionLabels"),i=e("../../../../../helpers/constants/design-system"),c=e("../../../../../components/component-library"),u=d(e("../../../../../components/ui/tooltip")),l=e("../../../../../../shared/lib/transactions.utils");function d(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/confirmations/components/transactions/nested-transaction-tag/nested-transaction-tag.tsx"}],[7411,{"../../../../../../shared/constants/transaction":5637,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,"../../../utils/token":7590,"../../simulation-details/balance-change-row":7390,"../../simulation-details/simulation-details":7394,"@metamask/bridge-controller":1304,"@metamask/controller-utils":1383,"@metamask/design-system-react":1741,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.QuoteSwapSimulationDetails=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=e("@metamask/design-system-react"),a=e("@metamask/bridge-controller"),r=e("@metamask/controller-utils"),i=e("../../../../../../shared/constants/transaction"),c=e("../../../../../hooks/useI18nContext"),u=e("../../../utils/token"),l=e("../../../context/confirm"),d=e("../../simulation-details/balance-change-row"),m=e("../../simulation-details/simulation-details");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const f=(e,t,n,s)=>{let o={...t[e.address.toLowerCase()],chainId:(0,r.toHex)(e.chainId),address:e.address};return(0,a.isNativeAddress)(e.address)&&(o={chainId:(0,r.toHex)(e.chainId),standard:i.TokenStandard.none}),{asset:o,amount:(0,u.calculateTokenAmount)(n??"0x0",e.decimals,16).negated(),fiatAmount:(0,u.calculateTokenAmount)(n??"0x0",e.decimals,16,(0,u.getTokenValueFromRecord)(s,e.address)??0).negated().toNumber(),usdAmount:0}},h=(e,t,n,s)=>{let o={...t[e.address.toLowerCase()],chainId:(0,r.toHex)(e.chainId),address:e.address};return(0,a.isNativeAddress)(e.address)&&(o={chainId:(0,r.toHex)(e.chainId),standard:i.TokenStandard.none}),{asset:o,amount:(0,u.calculateTokenAmount)(n,e.decimals),fiatAmount:(0,u.calculateTokenAmount)(n,e.decimals,10,(0,u.getTokenValueFromRecord)(s,e.address)??0).toNumber(),usdAmount:0}};n.QuoteSwapSimulationDetails=({fiatRates:e,quote:t,sourceTokenAmount:n,tokenDetails:a,tokenAmountDifference:r=0,minDestTokenAmountInUSD:i})=>{const u=(0,c.useI18nContext)(),{currentConfirmation:p}=(0,l.useConfirmContext)(),{id:g}=p,{srcAssetBalanceChange:v,destAssetBalanceChange:T}=(0,s.useMemo)(()=>{if(!t||!a||!e)return{};const{srcAsset:s,destAsset:o,destTokenAmount:r}=t.quote;return{srcAssetBalanceChange:f(s,a,n,e),destAssetBalanceChange:h(o,a,r,e)}},[e,t,n,a]);return t&&a&&e&&v&&T?s.default.createElement(m.SimulationDetailsLayout,{isTransactionsRedesign:!0,transactionId:g,title:u("bestQuote"),titleTooltip:u("bestQuoteTooltip",[`$${i}`])},s.default.createElement(o.Box,{flexDirection:o.BoxFlexDirection.Column,gap:3,"data-testid":"quote-swap-simulation-details"},s.default.createElement(d.BalanceChangeRow,{balanceChange:v,confirmationId:null==p?void 0:p.id,isFirstRow:!0,label:u("simulationDetailsOutgoingHeading"),showFiat:!0}),s.default.createElement(d.BalanceChangeRow,{balanceChange:T,hasIncomingTokens:!0,confirmationId:null==p?void 0:p.id,label:u("simulationDetailsIncomingHeading"),showFiat:!0}),r>0&&s.default.createElement(o.Box,{justifyContent:o.BoxJustifyContent.End},s.default.createElement(o.Box,{className:"quote-swap_highlighted-text",backgroundColor:o.BoxBackgroundColor.SuccessMuted,padding:2},s.default.createElement(o.Text,{color:o.TextColor.SuccessDefault,variant:o.TextVariant.BodyXs},u("getDollarMore",[`$${null==r?void 0:r.toFixed(2)}`])))))):null}}}},{package:"$root$",file:"ui/pages/confirmations/components/transactions/quote-swap-simulation-details/quote-swap-simulation-details.tsx"}],[7412,{"../../../../shared/constants/app":5598,"../../../components/ui/loading-screen":6780,"../../../helpers/constants/routes":6904,"prop-types":4893,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o,a,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),i=m(e("prop-types")),c=e("react-router-dom-v5-compat"),u=m(e("../../../components/ui/loading-screen")),l=e("../../../helpers/constants/routes"),d=e("../../../../shared/constants/app");function m(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}class f extends r.Component{render(){const{txData:e}=this.props;if(e.msgParams){let t=`${l.CONFIRM_TRANSACTION_ROUTE}/${e.id}${l.DECRYPT_MESSAGE_REQUEST_PATH}`;return e.type===d.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY&&(t=`${l.CONFIRM_TRANSACTION_ROUTE}/${e.id}${l.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH}`),r.default.createElement(c.Navigate,{to:t,replace:!0})}return r.default.createElement(u.default,null)}}n.default=f,s=f,o="propTypes",a={txData:i.default.object},(o=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(o))in s?Object.defineProperty(s,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[o]=a}}},{package:"$root$",file:"ui/pages/confirmations/confirm-transaction-switch/confirm-transaction-switch.component.js"}],[7413,{"../../../helpers/constants/routes":6904,"../../../helpers/higher-order-components/with-router-hooks/with-router-hooks":6922,"../../../selectors":7886,"../../routes/utils":7740,"./confirm-transaction-switch.component":7412,"react-redux":5021,redux:5124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-redux"),o=e("redux"),a=e("../../../selectors"),r=e("../../../helpers/constants/routes"),i=l(e("../../../helpers/higher-order-components/with-router-hooks/with-router-hooks")),c=e("../../routes/utils"),u=l(e("./confirm-transaction-switch.component"));function l(e){return e&&e.__esModule?e:{default:e}}n.default=(0,o.compose)(i.default,(0,s.connect)((e,t)=>{const{location:n={},params:s={}}=t,{pathname:o=""}=n,i=`${r.CONFIRM_TRANSACTION_ROUTE}/`,u=(0,c.extractIdFromPathname)(o,i),l=s.id||u,d=(0,a.getUnapprovedTransactions)(e),m=(0,a.unconfirmedTransactionsListSelector)(e);return{txData:m.length?d[l]||m[0]:{}}}))(u.default)}}},{package:"$root$",file:"ui/pages/confirmations/confirm-transaction-switch/confirm-transaction-switch.container.js"}],[7414,{"./confirm-transaction-switch.container":7413},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o=(s=e("./confirm-transaction-switch.container"))&&s.__esModule?s:{default:s};n.default=o.default}}},{package:"$root$",file:"ui/pages/confirmations/confirm-transaction-switch/index.js"}],[7415,{"../confirm-transaction-switch":7414,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return s.default.createElement(o.Routes,null,s.default.createElement(o.Route,{path:"*",element:s.default.createElement(a.default,null)}))};var s=r(e("react")),o=e("react-router-dom-v5-compat"),a=r(e("../confirm-transaction-switch"));function r(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/confirmations/confirm-transaction/confirm-token-transaction-switch.js"}],[7416,{"../../../../app/scripts/lib/util":353,"../../../../shared/constants/app":5598,"../../../../shared/lib/trace":5718,"../../../../shared/modules/selectors/networks":5753,"../../../components/ui/loading-screen":6780,"../../../ducks/confirm-transaction/confirm-transaction.duck":6876,"../../../ducks/history/history":6880,"../../../ducks/send":6891,"../../../helpers/constants/routes":6904,"../../../helpers/utils/transactions.util":6956,"../../../hooks/useAsync":7029,"../../../hooks/usePolling":7067,"../../../hooks/usePrevious":7068,"../../../selectors":7886,"../../../store/actions":7916,"../../confirm-decrypt-message":7165,"../../confirm-encryption-public-key":7168,"../confirm-transaction-switch":7414,"../confirm/confirm":7418,"../hooks/useCurrentConfirmation":7538,"./confirm-token-transaction-switch":7415,"prop-types":4893,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=E(e("prop-types")),a=e("react-redux"),r=e("react-router-dom-v5-compat"),i=e("../../../../shared/constants/app"),c=E(e("../../../components/ui/loading-screen")),u=e("../../../ducks/confirm-transaction/confirm-transaction.duck"),l=e("../../../ducks/history/history"),d=e("../../../ducks/send"),m=e("../../../../shared/modules/selectors/networks"),p=e("../../../helpers/constants/routes"),f=e("../../../helpers/utils/transactions.util"),h=E(e("../../../hooks/usePolling")),g=e("../../../hooks/usePrevious"),v=e("../../../selectors"),T=e("../../../store/actions"),y=E(e("../../confirm-decrypt-message")),k=E(e("../../confirm-encryption-public-key")),S=E(e("../confirm-transaction-switch")),C=E(e("../confirm/confirm")),A=E(e("../hooks/useCurrentConfirmation")),w=e("../../../../app/scripts/lib/util"),_=e("../../../hooks/useAsync"),x=e("../../../../shared/lib/trace"),b=E(e("./confirm-token-transaction-switch"));function E(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}const P=({params:e,location:t}={})=>{const n=(0,a.useDispatch)(),o=(0,r.useNavigate)(),E=(0,r.useParams)(),I=(0,r.useLocation)(),{id:P}=e||E,M=t||I,R=(0,a.useSelector)(l.getMostRecentOverviewPage),N=(0,a.useSelector)(d.getSendTo),O=(0,a.useSelector)(v.unconfirmedTransactionsListSelector),D=(0,a.useSelector)(v.unconfirmedTransactionsHashSelector),F=(0,a.useSelector)(m.getSelectedNetworkClientId),B=O.length||0,L=(0,s.useCallback)(()=>B?D[P]||O[0]:{},[P,B,D,O]),[$,j]=(0,s.useState)(L),G=(0,a.useSelector)(v.use4ByteResolutionSelector),{currentConfirmation:U}=(0,A.default)(P);(0,s.useEffect)(()=>{const e=L();j(e),null!=e&&e.id&&n((0,u.setTransactionToConfirm)(e.id))},[n,L,P,B,D,O]);const{id:W,type:H}=$,V=(0,w.getEnvironmentType)()===i.ENVIRONMENT_TYPE_NOTIFICATION;(0,_.useAsyncResult)(async()=>{var e;if(!V)return undefined;const t=i.TRACE_ENABLED_SIGN_METHODS.includes(H)?null===(e=$.msgParams)||void 0===e||null===(e=e.requestId)||void 0===e?void 0:e.toString():W;return await(0,T.endBackgroundTrace)({name:x.TraceName.NotificationDisplay,id:t})},[W,V,H,$.msgParams]);const q=W,K=(0,f.isTokenMethodAction)(H),z=q&&(!P||P===q),Y=(0,g.usePrevious)(P),Q=(0,g.usePrevious)(q);return(0,h.default)({startPolling:e=>(0,T.gasFeeStartPollingByNetworkClientId)(e.networkClientId),stopPollingByPollingToken:T.gasFeeStopPollingByPollingToken,input:{networkClientId:$.networkClientId??F}}),(0,s.useEffect)(()=>{if(B||N){const{txParams:{data:e}={},origin:t}=$;t!==i.ORIGIN_METAMASK&&n((0,T.getContractMethodData)(e,G));const s=q||P;s&&n((0,u.setTransactionToConfirm)(s))}},[]),(0,s.useEffect)(()=>{if(P&&q&&Y!==P){const{txData:{txParams:{data:e}={},origin:t}={}}=$;n((0,u.clearConfirmTransaction)()),n((0,u.setTransactionToConfirm)(P)),t!==i.ORIGIN_METAMASK&&n((0,T.getContractMethodData)(e,G))}else!Q||q||B?Q&&q&&Q!==q&&P!==q&&o(R,{replace:!0}):n((0,T.setDefaultHomeActiveTabName)("activity")).then(()=>{o(p.DEFAULT_ROUTE,{replace:!0})})},[n,o,R,P,Y,Q,B,$,q,G]),U?s.default.createElement(C.default,{confirmationId:P}):K&&z?s.default.createElement(b.default,{transaction:$}):z?s.default.createElement(r.Routes,{location:M},s.default.createElement(r.Route,{path:`${p.CONFIRM_TRANSACTION_ROUTE}/:id?${p.DECRYPT_MESSAGE_REQUEST_PATH}`,element:s.default.createElement(y.default,null)}),s.default.createElement(r.Route,{path:`${p.CONFIRM_TRANSACTION_ROUTE}/:id?${p.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH}`,element:s.default.createElement(k.default,null)}),s.default.createElement(r.Route,{path:"*",element:s.default.createElement(S.default,null)})):s.default.createElement(c.default,null)};P.propTypes={params:o.default.shape({id:o.default.string}),location:o.default.shape({pathname:o.default.string,search:o.default.string,hash:o.default.string,state:o.default.object,key:o.default.string})};n.default=P}}},{package:"$root$",file:"ui/pages/confirmations/confirm-transaction/confirm-transaction.component.js"}],[7417,{"./confirm-transaction.component":7416},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o=(s=e("./confirm-transaction.component"))&&s.__esModule?s:{default:s};n.default=o.default}}},{package:"$root$",file:"ui/pages/confirmations/confirm-transaction/index.js"}],[7418,{"../../../components/multichain/pages/page":6674,"../../../contexts/gasFee":6849,"../../../contexts/transaction-modal":6863,"../components/advanced-gas-fee-popover":7195,"../components/confirm/blockaid-loading-indicator":7197,"../components/confirm/confirm-alerts":7199,"../components/confirm/footer":7202,"../components/confirm/header":7211,"../components/confirm/info":7242,"../components/confirm/info/shared/gas-fee-token-toast/gas-fee-token-toast":7264,"../components/confirm/ledger-info":7307,"../components/confirm/nav/nav":7310,"../components/confirm/pluggable-section":7311,"../components/confirm/scroll-to-bottom":7316,"../components/confirm/splash":7328,"../components/confirm/title":7333,"../components/edit-gas-fee-popover":7347,"../components/smart-transactions-banner-alert":7402,"../context/confirm":7449,"../context/dapp-swap":7450,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=w(e("react")),o=e("../../../components/multichain/pages/page"),a=e("../../../contexts/gasFee"),r=e("../../../contexts/transaction-modal"),i=w(e("../components/advanced-gas-fee-popover")),c=e("../components/confirm/blockaid-loading-indicator"),u=e("../components/confirm/confirm-alerts"),l=e("../components/confirm/footer"),d=e("../components/confirm/header"),m=e("../components/confirm/info"),p=e("../components/confirm/ledger-info"),f=e("../components/smart-transactions-banner-alert"),h=e("../components/confirm/pluggable-section"),g=w(e("../components/confirm/scroll-to-bottom")),v=e("../components/confirm/title"),T=w(e("../components/edit-gas-fee-popover")),y=e("../context/confirm"),k=e("../components/confirm/nav/nav"),S=e("../components/confirm/info/shared/gas-fee-token-toast/gas-fee-token-toast"),C=e("../components/confirm/splash"),A=e("../context/dapp-swap");function w(e){return e&&e.__esModule?e:{default:e}}const _=()=>s.default.createElement(s.default.Fragment,null,s.default.createElement(T.default,null),s.default.createElement(i.default,null)),x=({children:e})=>{const{currentConfirmation:t}=(0,y.useConfirmContext)();return s.default.createElement(a.GasFeeContextProvider,{transaction:t},e)};n.default=({confirmationId:e})=>s.default.createElement(y.ConfirmContextProvider,{confirmationId:e},s.default.createElement(A.DappSwapContextProvider,null,s.default.createElement(r.TransactionModalContextProvider,null,s.default.createElement(x,null,s.default.createElement(_,null),s.default.createElement(u.ConfirmAlerts,null,s.default.createElement(o.Page,{className:"confirm_wrapper"},s.default.createElement(k.ConfirmNav,null),s.default.createElement(d.Header,null),s.default.createElement(f.SmartTransactionsBannerAlert,{marginType:"noTop"}),s.default.createElement(g.default,null,s.default.createElement(c.BlockaidLoadingIndicator,null),s.default.createElement(p.LedgerInfo,null),s.default.createElement(v.Title,null),s.default.createElement(m.Info,null),s.default.createElement(h.PluggableSection,null)),s.default.createElement(S.GasFeeTokenToast,null),s.default.createElement(l.Footer,null),s.default.createElement(C.Splash,null)))))))}}},{package:"$root$",file:"ui/pages/confirmations/confirm/confirm.tsx"}],[7420,{"../../../../components/app/alert-system/contexts/alertActionHandler":5777,"../../../../components/app/alert-system/contexts/alertMetricsContext":5778,"../../../../components/app/alert-system/multiple-alert-modal":5782,"../../../../hooks/useAlerts":7027,"../../../../selectors":7886,"./useAlertsActions":7421,"./useTemplateConfirmationAlerts":7422,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTemplateAlertContext=n.TemplateAlertContextProvider=n.TemplateAlertContext=void 0;var s,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),a=e("react-redux"),r=(s=e("../../../../hooks/useAlerts"))&&s.__esModule?s:{default:s},i=e("../../../../components/app/alert-system/contexts/alertActionHandler"),c=e("../../../../components/app/alert-system/contexts/alertMetricsContext"),u=e("../../../../components/app/alert-system/multiple-alert-modal"),l=e("../../../../selectors"),d=e("./useTemplateConfirmationAlerts"),m=e("./useAlertsActions");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const f=()=>undefined,h=n.TemplateAlertContext=(0,o.createContext)(undefined);n.TemplateAlertContextProvider=({children:e,confirmationId:t,onSubmit:n})=>{const s=(0,a.useSelector)(l.getMemoizedUnapprovedConfirmations),p=(null==s?void 0:s.find(e=>e.id===t))??s[0],[g,v]=(0,o.useState)(!1),T=null==p?void 0:p.id;(0,d.useTemplateConfirmationAlerts)(p);const{hasAlerts:y}=(0,r.default)(T),k=(0,o.useCallback)(()=>{v(!0)},[v]),S=(0,o.useCallback)(()=>{v(!1)},[v]),C=(0,o.useCallback)(()=>{S(),n()},[S,n]),A=(0,m.useAlertsActions)(S,p);return o.default.createElement(c.AlertMetricsProvider,{metrics:{trackAlertActionClicked:f,trackAlertRender:f,trackInlineAlertClicked:f}},o.default.createElement(i.AlertActionHandlerProvider,{onProcessAction:A},o.default.createElement(h.Provider,{value:{hasAlerts:y,showAlertsModal:k}},o.default.createElement(o.default.Fragment,null,g&&o.default.createElement(u.MultipleAlertModal,{ownerId:T,onFinalAcknowledgeClick:C,onClose:S,showCloseIcon:!1,displayAllAlerts:!0}),e))))};n.useTemplateAlertContext=()=>{const e=(0,o.useContext)(h);if(!e)throw new Error("useTemplateAlertContext must be used within an TemplateAlertContextProvider");return e}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/alerts/TemplateAlertContext.tsx"}],[7421,{"../../../../components/app/confirm/info/row/constants":5868,"../../../../selectors":7886,"../../hooks/useConfirmationNavigation":7535,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAlertsActions=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../../components/app/confirm/info/row/constants"),r=e("../../hooks/useConfirmationNavigation"),i=e("../../../../selectors");n.useAlertsActions=(e,t)=>{const n=(0,o.useSelector)(e=>(0,i.getApprovalsByOrigin)(e,null==t?void 0:t.origin)),{getIndex:c,navigateToIndex:u}=(0,r.useConfirmationNavigation)(),l=(0,s.useCallback)(()=>{var s;const{id:o}=t,a=null==n?void 0:n.filter(e=>e.id!==o),r=c(null===(s=a[0])||void 0===s?void 0:s.id);u(r),e()},[c,t,n,e,u]);return(0,s.useCallback)(e=>{if(e===a.AlertActionKey.ShowPendingConfirmation)l();else console.error("Unknown alert action key:",e)},[l])}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/alerts/useAlertsActions.tsx"}],[7422,{"../../../../ducks/confirm-alerts/confirm-alerts":6875,"./useUpdateEthereumChainAlerts":7423,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTemplateConfirmationAlerts=void 0;var s=e("react-redux"),o=e("react"),a=e("../../../../ducks/confirm-alerts/confirm-alerts"),r=e("./useUpdateEthereumChainAlerts");n.useTemplateConfirmationAlerts=e=>{const t=(0,s.useDispatch)(),n=(0,r.useUpdateEthereumChainAlerts)(e),i=(0,o.useMemo)(()=>n,[n]),c=null==e?void 0:e.id;(0,o.useEffect)(()=>{t((0,a.updateAlerts)(c,i))},[i,c,t]),(0,o.useEffect)(()=>()=>{t((0,a.clearAlerts)(c))},[c,t])}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/alerts/useTemplateConfirmationAlerts.ts"}],[7423,{"../../../../components/app/confirm/info/row/constants":5868,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../selectors":7886,"@metamask/controller-utils":1383,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useUpdateEthereumChainAlerts=function(e){var t;const n=(0,a.useSelector)(t=>(0,c.getApprovalsByOrigin)(t,null==e?void 0:e.origin)),d=(0,u.useI18nContext)();return(0,o.useMemo)(()=>{var t;return(null==n?void 0:n.length)<=1||!l.includes(e.type)&&!0!==(null==e||null===(t=e.requestData)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.isSwitchEthereumChain)?[]:[{actions:[{key:r.AlertActionKey.ShowPendingConfirmation,label:d("reviewPendingTransactions")}],key:"pendingConfirmationFromSameOrigin",message:d(e.type===s.ApprovalType.AddEthereumChain?"pendingConfirmationAddNetworkAlertMessage":"pendingConfirmationSwitchNetworkAlertMessage",[n.length-1]),reason:d("areYouSure"),severity:i.Severity.Warning}]},[null==e?void 0:e.type,null==e||null===(t=e.requestData)||void 0===t?void 0:t.metadata,null==n?void 0:n.length,d])};var s=e("@metamask/controller-utils"),o=e("react"),a=e("react-redux"),r=e("../../../../components/app/confirm/info/row/constants"),i=e("../../../../helpers/constants/design-system"),c=e("../../../../selectors"),u=e("../../../../hooks/useI18nContext");const l=[s.ApprovalType.AddEthereumChain,s.ApprovalType.SwitchEthereumChain]}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/alerts/useUpdateEthereumChainAlerts.ts"}],[7424,{"../../../../../components/component-library":6325,"../../alerts/TemplateAlertContext":7420,classnames:3913,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var s=c(e("react")),o=c(e("prop-types")),a=c(e("classnames")),r=e("../../../../../components/component-library"),i=e("../../alerts/TemplateAlertContext");function c(e){return e&&e.__esModule?e:{default:e}}function u({onSubmit:e,onCancel:t,submitText:n,cancelText:o,alerts:c,loading:u,submitAlerts:l,actionsStyle:d,style:m}){const{hasAlerts:p,showAlertsModal:f}=(0,i.useTemplateAlertContext)(),h=Boolean(t||e);return s.default.createElement("div",{className:"confirmation-footer",style:m},c,l,h&&s.default.createElement("div",{className:"confirmation-footer__actions",style:d},t?s.default.createElement(r.Button,{block:!0,"data-testid":"confirmation-cancel-button",variant:r.ButtonVariant.Secondary,onClick:t,size:r.ButtonSize.Lg},o):null,e&&n?s.default.createElement(r.Button,{block:!0,loading:Boolean(u),"data-testid":"confirmation-submit-button",disabled:Boolean(u),onClick:p?f:e,className:(0,a.default)({centered:!t}),startIconName:p?r.IconName.Info:undefined,size:r.ButtonSize.Lg},n):null))}u.propTypes={alerts:o.default.node,onCancel:o.default.func,cancelText:o.default.string,onSubmit:o.default.func.isRequired,submitText:o.default.string.isRequired,loading:o.default.bool,submitAlerts:o.default.node,style:o.default.object,actionsStyle:o.default.object}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/components/confirmation-footer/confirmation-footer.js"}],[7425,{"./confirmation-footer":7424},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var s,o=(s=e("./confirmation-footer"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/components/confirmation-footer/index.js"}],[7426,{"../../../../../../shared/constants/network":5617,"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var s=c(e("react")),o=c(e("prop-types")),a=e("../../../../../components/component-library"),r=e("../../../../../helpers/constants/design-system"),i=e("../../../../../../shared/constants/network");function c(e){return e&&e.__esModule?e:{default:e}}const u=e=>({...e,name:e.name??i.NETWORK_TO_NAME_MAP[e.chainId],iconUrl:e.iconUrl??i.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[e.chainId]});function l({toNetwork:e,fromNetwork:t}){const n=u(t),o=u(e);return s.default.createElement(a.Box,{className:"confirmation-network-switch",display:r.Display.Flex,height:r.BlockSize.Full,justifyContent:r.JustifyContent.center,marginTop:8},s.default.createElement(a.Box,{className:"confirmation-network-switch__icon",display:r.Display.Block},s.default.createElement(a.AvatarNetwork,{src:n.iconUrl,name:n.name,size:a.AvatarNetworkSize.Xl,marginBottom:2}),s.default.createElement(a.Text,{display:r.Display.Flex,justifyContent:r.JustifyContent.center,"data-testid":"network-switch-from-network"},n.name)),s.default.createElement(a.Box,{className:"confirmation-network-switch__center-icon",display:r.Display.Flex,alignItems:r.AlignItems.center,justifyContent:r.JustifyContent.center},s.default.createElement("i",{className:"fa fa-angle-right fa-lg confirmation-network-switch__check"}),s.default.createElement("div",{className:"confirmation-network-switch__dashed-line"})),s.default.createElement(a.Box,{className:"confirmation-network-switch__icon",display:r.Display.Block},s.default.createElement(a.AvatarNetwork,{src:o.iconUrl,name:o.name,size:a.AvatarNetworkSize.Xl,marginBottom:2}),s.default.createElement(a.Text,{display:r.Display.Flex,justifyContent:r.JustifyContent.center,"data-testid":"network-switch-to-network"},o.name)))}l.propTypes={toNetwork:o.default.shape({chainId:o.default.string.isRequired,name:o.default.string.isRequired}),fromNetwork:o.default.shape({chainId:o.default.string.isRequired,name:o.default.string.isRequired})}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/components/confirmation-network-switch/confirmation-network-switch.js"}],[7427,{"./confirmation-network-switch":7426},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var s,o=(s=e("./confirmation-network-switch"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/components/confirmation-network-switch/index.js"}],[7428,{"../../../../shared/constants/app":5598,"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/network":5617,"../../../../shared/constants/time":5635,"../../../../shared/lib/fetch-with-cache":5692,"../../../../shared/modules/selectors/networks":5753,"../../../components/app/metamask-template-renderer":5933,"../../../components/app/snaps/snap-authorship-header":6076,"../../../components/app/snaps/snap-ui-renderer":6183,"../../../components/component-library":6325,"../../../components/ui/callout":6729,"../../../components/ui/loading-screen":6780,"../../../contexts/metametrics":6855,"../../../helpers/constants/routes":6904,"../../../hooks/useI18nContext":7047,"../../../selectors":7886,"../components/confirm/nav":7309,"../components/confirmation-warning-modal":7337,"../context/confirm":7449,"../hooks/useConfirmationNavigation":7535,"./alerts/TemplateAlertContext":7420,"./components/confirmation-footer":7425,"./templates":7434,"@metamask/controller-utils":1383,"@metamask/snaps-rpc-methods":2611,immer:4413,lodash:4635,loglevel:4643,"prop-types":4893,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=G;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=F(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=D(e("prop-types")),a=e("react-redux"),r=e("react-router-dom-v5-compat"),i=e("lodash"),c=e("immer"),u=D(e("loglevel")),l=e("@metamask/controller-utils"),d=e("@metamask/snaps-rpc-methods"),m=e("../../../../shared/constants/network"),p=D(e("../../../../shared/lib/fetch-with-cache")),f=e("../../../../shared/constants/metametrics"),h=D(e("../../../components/app/metamask-template-renderer")),g=D(e("../components/confirmation-warning-modal")),v=e("../../../helpers/constants/routes"),T=e("../../../hooks/useI18nContext"),y=e("../../../contexts/metametrics"),k=e("../../../selectors"),S=e("../../../../shared/modules/selectors/networks"),C=D(e("../../../components/ui/callout")),A=e("../../../components/component-library"),w=D(e("../../../components/ui/loading-screen")),_=D(e("../../../components/app/snaps/snap-authorship-header")),x=e("../../../components/app/snaps/snap-ui-renderer"),b=e("../../../../shared/constants/app"),E=e("../../../../shared/constants/time"),I=e("../components/confirm/nav"),P=e("../context/confirm"),M=e("../hooks/useConfirmationNavigation"),R=e("./alerts/TemplateAlertContext"),N=D(e("./components/confirmation-footer")),O=e("./templates");function D(e){return e&&e.__esModule?e:{default:e}}function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(F=function(e){return e?n:t})(e)}const B=["result_success","result_error"],L=Object.values(d.DIALOG_APPROVAL_TYPES),$=(0,c.produce)((e,t)=>{var n;switch(t.type){case"dismiss":null!=e&&null!==(n=e[t.confirmationId])&&void 0!==n&&n[t.alertId]&&(e[t.confirmationId][t.alertId].dismissed=!0);break;case"set":e[t.confirmationId]||(e[t.confirmationId]={}),t.alerts.forEach(n=>{e[t.confirmationId][n.id]={...n,dismissed:!1}});break;default:throw new Error("You must provide a type when dispatching an action for alertState")}});function j({confirmation:e,isSnapCustomUIDialog:t,onCancel:n}){const{count:o}=(0,M.useConfirmationNavigation)(),{origin:r}=e??{},i=(0,a.useSelector)(e=>(0,k.getHideSnapBranding)(e,r)),c=t&&!i;return o<=1&&!c?null:s.default.createElement(A.Box,{style:{width:"100%",position:"relative",overflow:"hidden"}},s.default.createElement(I.Nav,{confirmationId:null==e?void 0:e.id}),c&&s.default.createElement(_.default,{snapId:r,onCancel:n}))}function G({redirectToHomeOnZeroConfirmations:e=!0,params:t}){var n;const o=(0,T.useI18nContext)(),c=(0,s.useContext)(y.MetaMetricsContext),_=(0,a.useDispatch)(),I=(0,r.useNavigate)(),M=(0,a.useSelector)(k.getMemoizedUnapprovedTemplatedConfirmations),D=(0,a.useSelector)(k.getUnapprovedTxCount),F=(0,a.useSelector)(k.getApprovalFlows,i.isEqual),G=(0,a.useSelector)(k.getTotalUnapprovedCount),U=(0,a.useSelector)(k.useSafeChainsListValidationSelector),W=(0,a.useSelector)(S.getNetworkConfigurationsByChainId),[H,V]=(0,s.useState)(null),q=(0,r.useParams)(),{id:K}=t||q,z=M.find(e=>e.id===K)??M[0],[Y,Q]=(0,s.useState)({}),[J,Z]=(0,s.useState)(!1),X=(null==z?void 0:z.type)===l.ApprovalType.AddEthereumChain&&!J,[ee,te]=(0,s.useState)(null),[ne,se]=(0,s.useState)(null),[oe,ae]=function(e,{unapprovedTxsCount:t,useSafeChainsListValidation:n,matchedChain:o,providerError:a,preventAlertsForAddChainValidation:r=!1}={}){const[i,c]=(0,s.useReducer)($,{});return(0,s.useEffect)(()=>{let s=!0;return e&&!r&&(0,O.getTemplateAlerts)(e,{unapprovedTxsCount:t,useSafeChainsListValidation:n,matchedChain:o,providerError:a}).then(t=>{s&&t.length>0&&c({type:"set",confirmationId:e.id,alerts:t})}),()=>{s=!1}},[e,t,n,o,a,r]),[i,(0,s.useCallback)(t=>{c({type:"dismiss",confirmationId:e.id,alertId:t})},[e])]}(z,{unapprovedTxsCount:D,useSafeChainsListValidation:U,matchedChain:Y,providerError:ne,preventAlertsForAddChainValidation:X}),[re]=function(e){const[t,n]=(0,s.useState)({});return(0,s.useEffect)(()=>{let t=!0;return e&&(0,O.getTemplateState)(e).then(s=>{t&&Object.values(s).length>0&&n(t=>({...t,[e.id]:s}))}),()=>{t=!1}},[e]),[t]}(z),[ie,ce]=(0,s.useState)(!1),[ue,le]=(0,s.useState)({}),[de,me]=(0,s.useState)(!1),[pe,fe]=(0,s.useState)([]),he=null===(n=(0,a.useSelector)(k.getSnapsMetadata)[null==z?void 0:z.origin])||void 0===n?void 0:n.name,ge=Object.values(d.DIALOG_APPROVAL_TYPES);ge.push(...Object.values(b.SNAP_MANAGE_ACCOUNTS_CONFIRMATION_TYPES));const ve=ge.includes(null==z?void 0:z.type),Te=L.includes(null==z?void 0:z.type),ye=(null==z?void 0:z.type)===l.ApprovalType.SnapDialogPrompt,ke=(null==z?void 0:z.type)===d.DIALOG_APPROVAL_TYPES.default,Se=ve&&he,Ce=ve,Ae=Te||B.includes(null==z?void 0:z.type),we=[l.ApprovalType.SnapDialogPrompt],_e=(0,s.useMemo)(()=>{var e;return z?(0,O.getTemplateValues)({snapName:ve&&Se,...z},o,_,I,{matchedChain:Y,currencySymbolWarning:ee,existingNetworkConfiguration:null==W?void 0:W[null===(e=z.requestData)||void 0===e?void 0:e.chainId]},{t:o,trackEvent:c}):{}},[z,o,_,I,Y,ee,c,ve,Se,W]);if((0,s.useEffect)(()=>{_e.onLoad&&_e.onLoad()},[_e]),(0,s.useEffect)(()=>{0!==M.length||0!==F.length&&0===G||!e||I(v.DEFAULT_ROUTE)},[M,F,G,I,e]),(0,s.useEffect)(()=>{const e=F[F.length-1];V((null==e?void 0:e.loadingText)??null)},[F]),(0,s.useEffect)(()=>{(null==z?void 0:z.type)===l.ApprovalType.AddEthereumChain&&async function(e){try{if(U){var t,n,s,a,r;const c=(await(0,p.default)({url:m.CHAIN_SPEC_URL,allowStale:!0,cacheOptions:{cacheRefreshTime:E.DAY},functionName:"getSafeChainsList"})).find(t=>t.chainId===parseInt(e.requestData.chainId,16));Q(c),Z(!0),se(null);const u=(null===(t=l.NETWORKS_BYPASSING_VALIDATION[null===(n=e.requestData.chainId)||void 0===n?void 0:n.toLowerCase()])||void 0===t||null===(t=t.symbol)||void 0===t?void 0:t.toLowerCase())===(null===(s=e.requestData.ticker)||void 0===s?void 0:s.toLowerCase());var i;(null==c||null===(a=c.nativeCurrency)||void 0===a||null===(a=a.symbol)||void 0===a?void 0:a.toLowerCase())===(null===(r=e.requestData.ticker)||void 0===r?void 0:r.toLowerCase())||u?te(null):te(o("chainListReturnedDifferentTickerSymbol",[null==c||null===(i=c.nativeCurrency)||void 0===i?void 0:i.symbol]))}}catch(e){u.default.warn("Failed to fetch the chainList from chainid.network",e),se(e),Q(null),te(null),Z(!0)}}(z)},[z,o,U,Z]),!z)return F.length>0?s.default.createElement(w.default,{loadingMessage:H}):null;const xe=e=>{(null==e?void 0:e.length)>0?(fe(e),me(!0)):me(!1)},be=async()=>{var e,t,n,s;if(me(!0),null!=z&&null!==(e=z.requestData)&&void 0!==e&&null!==(e=e.fromNetworkConfiguration)&&void 0!==e&&e.chainId&&null!=z&&null!==(t=z.requestData)&&void 0!==t&&null!==(t=t.toNetworkConfiguration)&&void 0!==t&&t.chainId&&c({category:f.MetaMetricsEventCategory.Network,event:f.MetaMetricsEventName.NavNetworkSwitched,properties:{location:"Switch Modal",from_network:z.requestData.fromNetworkConfiguration.chainId,to_network:z.requestData.toNetworkConfiguration.chainId,referrer:{url:window.location.origin}}}),null!==(n=re[z.id])&&void 0!==n&&n.useWarningModal)ce(!0);else{const e=(s=z.type,we.includes(s)?(e=>ue[e]??"")(z.type):null),t=await _e.onSubmit(e);xe(t)}},Ee=_e.onCancel||((null==z?void 0:z.type)===l.ApprovalType.SnapDialogAlert?be:null);return s.default.createElement(P.ConfirmContextProvider,{confirmationId:K},s.default.createElement(R.TemplateAlertContextProvider,{confirmationId:z.id,onSubmit:!_e.hideSubmitButton&&be},s.default.createElement("div",{className:"confirmation-page"},s.default.createElement(j,{confirmation:z,isSnapCustomUIDialog:Te,onCancel:Ee}),s.default.createElement(A.Box,{className:"confirmation-page__content",padding:Ae||Ce?0:4,style:{overflowY:"auto"}},Te?s.default.createElement(x.SnapUIRenderer,{snapId:null==z?void 0:z.origin,interfaceId:null==z?void 0:z.requestData.id,isPrompt:ye,inputValue:ye&&ue[null==z?void 0:z.type],onInputChange:ye&&(e=>{return t=null==z?void 0:z.type,n=e.target.value??"",void le(e=>({...e,[t]:n}));var t,n}),placeholder:ye&&(null==z?void 0:z.requestData.placeholder),onCancel:Ee,useFooter:ke}):s.default.createElement(h.default,{sections:_e.content}),ie&&s.default.createElement(g.default,{onSubmit:async()=>{const e=await _e.onSubmit();await xe(e),ce(!1)},onCancel:_e.onCancel})),!ke&&s.default.createElement(N.default,{alerts:oe[z.id]&&Object.values(oe[z.id]).filter(e=>!1===e.dismissed).map((e,t,n)=>s.default.createElement(C.default,{key:e.id,severity:e.severity,dismiss:()=>ae(e.id),isFirst:0===t,isLast:t===n.length-1,isMultiple:n.length>1},s.default.createElement(h.default,{sections:e.content}))),style:ve?{boxShadow:"var(--shadow-size-lg) var(--color-shadow-default)"}:{},actionsStyle:ve?{borderTop:0}:{},onSubmit:!_e.hideSubmitButton&&be,onCancel:_e.onCancel,submitText:_e.submitText,cancelText:_e.cancelText,loading:de,submitAlerts:pe.map((e,t)=>s.default.createElement(C.default,{key:e.id,severity:e.severity,isFirst:0===t},s.default.createElement(h.default,{sections:e.content})))}))))}G.propTypes={redirectToHomeOnZeroConfirmations:o.default.bool,params:o.default.shape({id:o.default.string})}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/confirmation.js"}],[7429,{"./confirmation":7428},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var s,o=(s=e("./confirmation"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/index.js"}],[7445,{"../../../../shared/constants/network":5617},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypedSignSignaturePrimaryTypes=n.TYPED_SIGNATURE_VERSIONS=n.SPENDING_CAP_UNLIMITED_MSG=n.IGNORE_GAS_LIMIT_CHAIN_IDS=void 0;var s=e("../../../../shared/constants/network");n.IGNORE_GAS_LIMIT_CHAIN_IDS=[s.CHAINLIST_CHAIN_IDS_MAP.MANTLE],n.TYPED_SIGNATURE_VERSIONS={V1:"V1",V3:"V3",V4:"V4"},n.SPENDING_CAP_UNLIMITED_MSG="UNLIMITED MESSAGE",n.TypedSignSignaturePrimaryTypes={PERMIT:"Permit",ORDER:"Order"}}}},{package:"$root$",file:"ui/pages/confirmations/constants/index.ts"}],[7446,{"@metamask/keyring-api":2100},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountTypeLabel=void 0;var s=e("@metamask/keyring-api");n.accountTypeLabel={[s.BtcAccountType.P2pkh]:"Legacy",[s.BtcAccountType.P2sh]:"Nested SegWit",[s.BtcAccountType.P2wpkh]:"Native SegWit",[s.BtcAccountType.P2tr]:"Taproot"}}}},{package:"$root$",file:"ui/pages/confirmations/constants/network.ts"}],[7447,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SendPages=void 0;n.SendPages=function(e){return e.ASSET="asset",e.AMOUNTRECIPIENT="amount-recipient",e.LOADER="loader",e}({})}}},{package:"$root$",file:"ui/pages/confirmations/constants/send.ts"}],[7448,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LOWER_CASED_BURN_ADDRESSES=n.ERC20_DEFAULT_DECIMALS=void 0;n.ERC20_DEFAULT_DECIMALS=18,n.LOWER_CASED_BURN_ADDRESSES=["0x0000000000000000000000000000000000000000","0x000000000000000000000000000000000000dead"]}}},{package:"$root$",file:"ui/pages/confirmations/constants/token.ts"}],[7449,{"../../../../store/actions":7916,"../../hooks/useCurrentConfirmation":7538,"../../hooks/useSyncConfirmPath":7562,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useConfirmContext=n.ConfirmContextProvider=n.ConfirmContext=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=e("@metamask/transaction-controller"),a=e("react-redux"),r=e("../../../../store/actions"),i=u(e("../../hooks/useCurrentConfirmation")),c=u(e("../../hooks/useSyncConfirmPath"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const d=n.ConfirmContext=(0,s.createContext)(undefined);n.ConfirmContextProvider=({children:e,confirmationId:t})=>{const[n,u]=(0,s.useState)(!0),{currentConfirmation:l}=(0,i.default)(t);(0,c.default)(l,t);const m=(0,a.useDispatch)(),p=(0,s.useMemo)(()=>({currentConfirmation:l,isScrollToBottomCompleted:n,setIsScrollToBottomCompleted:u}),[l,n,u]);return(0,s.useEffect)(()=>{!l||l.type!==o.TransactionType.revokeDelegation&&l.type!==o.TransactionType.batch||m((0,r.setAccountDetailsAddress)(""))},[m,l]),s.default.createElement(d.Provider,{value:p},e)};n.useConfirmContext=()=>{const e=(0,s.useContext)(d);if(!e)throw new Error("useConfirmContext must be used within an ConfirmContextProvider");return e}}}},{package:"$root$",file:"ui/pages/confirmations/context/confirm/index.tsx"}],[7450,{"../../hooks/useCurrentConfirmation":7538,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDappSwapContext=n.DappSwapContextProvider=n.DappSwapContext=void 0;var s,o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(s,a,i):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),a=(s=e("../../hooks/useCurrentConfirmation"))&&s.__esModule?s:{default:s};function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}const i=n.DappSwapContext=(0,o.createContext)(undefined);n.DappSwapContextProvider=({children:e})=>{const{currentConfirmation:t}=(0,a.default)(),[n,s]=(0,o.useState)(undefined),[r,c]=(0,o.useState)(!1);(0,o.useEffect)(()=>{s(undefined),c(!1)},[null==t?void 0:t.id,s,c]);const u=(0,o.useMemo)(()=>({isQuotedSwapDisplayedInInfo:r,selectedQuote:n,setSelectedQuote:s,setQuotedSwapDisplayedInInfo:c}),[r,n,s,c]);return o.default.createElement(i.Provider,{value:u},e)};n.useDappSwapContext=()=>{const e=(0,o.useContext)(i);if(!e)throw new Error("useDappSwapContext must be used within an DappSwapContextProvider");return e}}}},{package:"$root$",file:"ui/pages/confirmations/context/dapp-swap/index.tsx"}],[7451,{"../../../../../shared/modules/string-utils":5761,"../../../../selectors":7886,"../send":7452,"ethers/lib/utils":4176,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendMetricsContext=n.SendMetricsContextProvider=n.SendMetricsContext=n.RecipientInputMethod=n.AssetFilterMethod=n.AmountInputType=n.AmountInputMethod=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=e("ethers/lib/utils"),a=e("react-redux"),r=e("../../../../../shared/modules/string-utils"),i=e("../../../../selectors"),c=e("../send");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const l=n.AssetFilterMethod={None:"none",Search:"search",Network:"network"},d=n.AmountInputType={Token:"token",Fiat:"fiat"},m=n.AmountInputMethod={Manual:"manual",Pasted:"pasted",PressedMax:"pressed_max"},p=n.RecipientInputMethod={Manual:"manual",Pasted:"pasted",SelectAccount:"select_account",SelectContact:"select_contact"},f=n.SendMetricsContext=(0,s.createContext)({accountType:undefined,assetListSize:"",amountInputMethod:m.Manual,amountInputType:d.Token,assetFilterMethod:[l.None],recipientInputMethod:p.Manual,setAmountInputMethod:()=>undefined,setAmountInputType:()=>undefined,setAssetFilterMethod:()=>undefined,setAssetListSize:()=>undefined,setRecipientInputMethod:()=>undefined});n.SendMetricsContextProvider=({children:e})=>{const{from:t}=(0,c.useSendContext)(),n=(0,a.useSelector)(i.getInternalAccounts),[u,h]=(0,s.useState)([l.None]),[g,v]=(0,s.useState)(""),[T,y]=(0,s.useState)(m.Manual),[k,S]=(0,s.useState)(d.Token),[C,A]=(0,s.useState)(p.Manual),w=(0,s.useMemo)(()=>{var e;if(null==n||!n.length||!t||!(0,o.isAddress)(t))return undefined;const s=Object.values(n).find(e=>(0,r.isEqualCaseInsensitive)(e.address,t));return(0,i.getAccountTypeForKeyring)(null==s||null===(e=s.metadata)||void 0===e?void 0:e.keyring)},[t,n]);return s.default.createElement(f.Provider,{value:{accountType:w,assetListSize:g,amountInputMethod:T,amountInputType:k,assetFilterMethod:u,recipientInputMethod:C,setAssetListSize:v,setAmountInputMethod:y,setAmountInputType:S,setAssetFilterMethod:h,setRecipientInputMethod:A}},e)};n.useSendMetricsContext=()=>{const e=(0,s.useContext)(f);if(!e)throw new Error("useSendMetricsContext must be used within an SendMetricsContextProvider");return e}}}},{package:"$root$",file:"ui/pages/confirmations/context/send-metrics/index.tsx"}],[7452,{"../../../../selectors/multichain-accounts/account-tree":7890,"@metamask/bridge-controller":1304,"@metamask/controller-utils":1383,"ethereumjs-util":4138,"ethers/lib/utils":4176,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendContext=n.SendContextProvider=n.SendContext=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=e("ethers/lib/utils"),a=e("ethereumjs-util"),r=e("@metamask/bridge-controller"),i=e("@metamask/controller-utils"),c=e("react-redux"),u=e("../../../../selectors/multichain-accounts/account-tree");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const d=n.SendContext=(0,s.createContext)({asset:undefined,chainId:undefined,currentPage:undefined,fromAccount:{},from:"",hexData:undefined,maxValueMode:undefined,to:undefined,toResolved:undefined,updateAsset:()=>undefined,updateCurrentPage:()=>undefined,updateHexData:()=>undefined,updateTo:()=>undefined,updateToResolved:()=>undefined,updateValue:()=>undefined,value:undefined});n.SendContextProvider=({children:e})=>{var t,n;const[l,m]=(0,s.useState)(),p=(0,c.useSelector)(u.getSelectedAccountGroup),f=(0,c.useSelector)(u.getAccountGroupWithInternalAccounts),[h,g]=(0,s.useState)(),[v,T]=(0,s.useState)(),[y,k]=(0,s.useState)(),[S,C]=(0,s.useState)(),[A,w]=(0,s.useState)(),[_,x]=(0,s.useState)(),[b,E]=(0,s.useState)(),I=(0,s.useCallback)((e,t)=>{k(t??!1),x(e)},[x,k]),P=(0,s.useCallback)(e=>{l&&(I("",!1),C(""),w(""),T(undefined)),m(e)},[l,m,T,C,w,I]),M=null!=l&&l.address&&(0,o.isAddress)(null==l?void 0:l.address)&&l.chainId&&!(0,r.isSolanaChainId)(null===(t=l.chainId)||void 0===t?void 0:t.toString())&&!(0,a.isHexString)(l.chainId.toString())?(0,i.toHex)(l.chainId):null==l||null===(n=l.chainId)||void 0===n?void 0:n.toString();return(0,s.useEffect)(()=>{if(null!=l&&l.accountId){var e;const t=null===(e=f.find(e=>e.id===p))||void 0===e?void 0:e.accounts,n=null==t?void 0:t.find(e=>e.id===(null==l?void 0:l.accountId));g(n)}},[null==l?void 0:l.accountId,p,f]),s.default.createElement(d.Provider,{value:{asset:l,chainId:M,currentPage:b,fromAccount:h,from:null==h?void 0:h.address,hexData:v,maxValueMode:y,to:S,toResolved:A??S,updateAsset:P,updateCurrentPage:E,updateHexData:T,updateTo:C,updateToResolved:w,updateValue:I,value:_}},e)};n.useSendContext=()=>{const e=(0,s.useContext)(d);if(!e)throw new Error("useSendContext must be used within an SendContextProvider");return e}}}},{package:"$root$",file:"ui/pages/confirmations/context/send/index.tsx"}],[7453,{"../../../../../shared/constants/network":5617,"../../../../../shared/modules/selectors/networks":5753,"../../../../components/app/confirm/info/row":5875,"../../../../components/app/confirm/info/row/alert-row/alert-row":5867,"../../../../components/app/confirm/info/row/constants":5868,"../../../../components/app/confirm/info/row/section":5877,"../../../../components/component-library":6325,"../../../../helpers/constants/design-system":6899,"../../../../helpers/constants/zendesk-url":6911,"../../../../hooks/useI18nContext":7047,"../../../../selectors":7886,"../../context/confirm":7449,"../../utils/confirm":7584,"@metamask/design-system-react":1741,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddEthereumChain=void 0;var s=y(e("react")),o=e("react-redux"),a=e("@metamask/design-system-react"),r=e("../../../../components/component-library"),i=e("../../../../helpers/constants/design-system"),c=e("../../../../components/app/confirm/info/row/section"),u=e("../../../../components/app/confirm/info/row"),l=e("../../context/confirm"),d=e("../../../../components/app/confirm/info/row/alert-row/alert-row"),m=e("../../../../../shared/modules/selectors/networks"),p=e("../../../../selectors"),f=e("../../../../hooks/useI18nContext"),h=y(e("../../../../helpers/constants/zendesk-url")),g=e("../../utils/confirm"),v=e("../../../../../shared/constants/network"),T=e("../../../../components/app/confirm/info/row/constants");function y(e){return e&&e.__esModule?e:{default:e}}n.AddEthereumChain=()=>{var e;const t=(0,f.useI18nContext)(),{currentConfirmation:n}=(0,l.useConfirmContext)(),{requestData:y,origin:k}=n,S=(0,o.useSelector)(m.getNetworkConfigurationsByChainId)[y.chainId],C=(0,o.useSelector)(p.getSubjectMetadata),A=S?t("updateNetworkConfirmationTitle",[S.name]):t("addNetworkConfirmationTitle",[y.chainName]),w=v.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[y.chainId];return s.default.createElement(s.default.Fragment,null,s.default.createElement(a.Box,{className:"text-center mb-4 mt-8"},s.default.createElement(a.Text,{variant:a.TextVariant.HeadingLg,className:"text-balance mb-2"},A),s.default.createElement(a.Text,{className:"text-alternative"},t("addNetworkDescription"))),s.default.createElement(c.ConfirmInfoSection,null,s.default.createElement(u.ConfirmInfoRow,{label:t("requestFrom"),color:i.TextColor.textAlternative},s.default.createElement(a.Box,{className:"flex gap-1 items-center"},s.default.createElement(a.AvatarFavicon,{size:a.AvatarFaviconSize.Sm,src:null===(e=C[k])||void 0===e?void 0:e.iconUrl,name:k}),s.default.createElement(a.Text,null,(0,g.stripProtocol)(k))))),s.default.createElement(c.ConfirmInfoSection,null,s.default.createElement(d.ConfirmInfoAlertRow,{label:t("network"),color:i.TextColor.textAlternative,alertKey:T.RowAlertKey.ChainName,ownerId:n.id},s.default.createElement(a.Box,{className:"flex items-center gap-1"},s.default.createElement(a.AvatarNetwork,{size:a.AvatarNetworkSize.Xs,src:w,name:y.chainName}),s.default.createElement(a.Text,null,y.chainName))),s.default.createElement(d.ConfirmInfoAlertRow,{label:"RPC",color:i.TextColor.textAlternative,tooltip:t("networkURLDefinition"),tooltipIcon:r.IconName.Question,alertKey:T.RowAlertKey.RpcUrl,ownerId:n.id},s.default.createElement(a.Text,null,(0,g.stripProtocol)(y.rpcUrl)))),s.default.createElement(a.Text,{className:"text-center"},t("watchOutMessage",[s.default.createElement("a",{key:"securityMessageLinkForNetworks",className:"text-primary-default",href:h.default.USER_GUIDE_CUSTOM_NETWORKS,target:"__blank",rel:"noreferrer"},t("securityMessageLinkForNetworks"))])))}}}},{package:"$root$",file:"ui/pages/confirmations/external/add-ethereum-chain/add-ethereum-chain.tsx"}],[7454,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AlertsName=void 0;n.AlertsName=function(e){return e.GasEstimateFailed="gasEstimateFailed",e.GasFeeLow="gasFeeLow",e.GasTooLow="gasTooLow",e.InsufficientBalance="insufficientBalance",e.NetworkBusy="networkBusy",e.NoGasPrice="noGasPrice",e.PendingTransaction="pendingTransactions",e.SigningOrSubmitting="signingOrSubmitting",e.Blockaid="blockaid",e}({})}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/constants.ts"}],[7455,{"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../components/confirm/utils":7335,"../../../context/confirm":7449,"../../../utils":7585,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e;const t=(0,r.useI18nContext)(),{currentConfirmation:n}=(0,u.useConfirmContext)(),{from:l}=(0,i.getConfirmationSender)(n),d=(0,c.isSIWESignatureRequest)(n),m=null==n||null===(e=n.msgParams)||void 0===e||null===(e=e.siwe)||void 0===e||null===(e=e.parsedMessage)||void 0===e?void 0:e.address,p=(null==m?void 0:m.toLowerCase())!==(null==l?void 0:l.toLowerCase()),f=d&&p;return(0,s.useMemo)(()=>f?[{field:o.RowAlertKey.SigningInWith,key:"signingInWith",message:t("alertMessageSignInWrongAccount"),reason:t("alertReasonWrongAccount"),severity:a.Severity.Warning}]:[],[f,t])};var s=e("react"),o=e("../../../../../components/app/confirm/info/row/constants"),a=e("../../../../../helpers/constants/design-system"),r=e("../../../../../hooks/useI18nContext"),i=e("../../../components/confirm/utils"),c=e("../../../utils"),u=e("../../../context/confirm")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/signatures/useAccountMismatchAlerts.ts"}],[7456,{"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,"../../../utils":7585,"@metamask/controller-utils":1383,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,i.useI18nContext)(),{currentConfirmation:t}=(0,u.useConfirmContext)(),{msgParams:n}=t||{},l=(0,c.isSIWESignatureRequest)(t)&&!(0,o.isValidSIWEOrigin)(n);return(0,s.useMemo)(()=>l?[{field:a.RowAlertKey.RequestFrom,key:"requestFrom",message:e("alertMessageSignInDomainMismatch"),reason:e("alertReasonSignIn"),severity:r.Severity.Danger}]:[],[l,e])};var s=e("react"),o=e("@metamask/controller-utils"),a=e("../../../../../components/app/confirm/info/row/constants"),r=e("../../../../../helpers/constants/design-system"),i=e("../../../../../hooks/useI18nContext"),c=e("../../../utils"),u=e("../../../context/confirm")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/signatures/useDomainMismatchAlerts.ts"}],[7457,{"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../../../helpers/constants/zendesk-url":6911,"../../../../../hooks/useI18nContext":7047,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTypeMessage=function(){const e=(0,i.useI18nContext)();return s.default.createElement(o.Text,{variant:a.TextVariant.bodyMd,color:a.TextColor.textDefault},e("alertAccountTypeUpgradeMessage",[s.default.createElement(o.ButtonLink,{href:r.default.ACCOUNT_UPGRADE,key:"link",target:"_blank",rel:"noreferrer noopener",color:a.TextColor.primaryDefault},e("learnMoreUpperCase"))]))};var s=c(e("react")),o=e("../../../../../components/component-library"),a=e("../../../../../helpers/constants/design-system"),r=c(e("../../../../../helpers/constants/zendesk-url")),i=e("../../../../../hooks/useI18nContext");function c(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/AccountTypeMessage.tsx"}],[7458,{"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,"../../../send-legacy/send.utils":7578,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NonContractAddressAlertMessage=void 0;var s,o=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../../../components/component-library"),r=e("../../../../../helpers/constants/design-system"),i=e("../../../../../hooks/useI18nContext"),c=e("../../../context/confirm"),u=e("../../../send-legacy/send.utils");n.NonContractAddressAlertMessage=e=>{const t=(0,i.useI18nContext)(),{currentConfirmation:n}=(0,c.useConfirmContext)(),s=(null==n?void 0:n.chainId)&&e[n.chainId].name,l=(0,u.ellipsify)(null==n?void 0:n.txParams.to);return o.default.createElement(o.default.Fragment,null,o.default.createElement(a.Text,{variant:r.TextVariant.bodyMd,color:r.TextColor.textDefault,"data-testid":"alert-modal__selected-alert"},t("nonContractAddressAlertDesc")),o.default.createElement(a.Text,{variant:r.TextVariant.bodyMd,color:r.TextColor.textDefault,marginTop:2,"data-testid":"alert-modal__selected-alert"},o.default.createElement("strong",null,"Network:")," ",s),o.default.createElement(a.Text,{variant:r.TextVariant.bodyMd,color:r.TextColor.textDefault,"data-testid":"alert-modal__selected-alert"},o.default.createElement("strong",null,"Address:")," ",l))}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/NonContractAddressAlertMessage.tsx"}],[7459,{"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../../../helpers/constants/zendesk-url":6911,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PendingTransactionAlertMessage=void 0;var s=i(e("react")),o=e("../../../../../components/component-library"),a=e("../../../../../helpers/constants/design-system"),r=i(e("../../../../../helpers/constants/zendesk-url"));function i(e){return e&&e.__esModule?e:{default:e}}n.PendingTransactionAlertMessage=e=>s.default.createElement(o.Text,{variant:a.TextVariant.bodyMd,color:a.TextColor.textDefault,"data-testid":"alert-modal__selected-alert"},e("pendingTransactionAlertMessage",[s.default.createElement(o.ButtonLink,{href:r.default.SPEEDUP_CANCEL,key:"link",target:"_blank",rel:"noreferrer noopener",color:a.TextColor.primaryDefault},e("pendingTransactionAlertMessageHyperlink"))]))}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/PendingTransactionAlertMessage.tsx"}],[7460,{"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ShieldCoverageAlertMessage=void 0;var s,o=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../../../components/component-library"),r=e("../../../../../helpers/constants/design-system"),i=e("../../../../../hooks/useI18nContext");n.ShieldCoverageAlertMessage=({modalBodyStr:e})=>{const t=(0,i.useI18nContext)();return o.default.createElement(a.Text,{variant:r.TextVariant.bodyMd,color:r.TextColor.textDefault,"data-testid":"alert-modal__selected-alert"},t(e,[o.default.createElement(a.ButtonLink,{href:"https://metamask.io/transaction-shield",key:"link",target:"_blank",rel:"noreferrer noopener",color:r.TextColor.primaryDefault},t("shieldCoverageAlertMessageLearnHowCoverageWorks")),"$10,000"]))}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/ShieldCoverageAlertMessage.tsx"}],[7461,{"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../components/confirm/info/hooks/useIsUpgradeTransaction":7233,"./AccountTypeMessage":7457,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountTypeUpgrade=function(){const e=(0,o.useI18nContext)(),{isUpgrade:t}=(0,i.useIsUpgradeTransaction)();return(0,s.useMemo)(()=>t?[{field:a.RowAlertKey.AccountTypeUpgrade,key:a.RowAlertKey.AccountTypeUpgrade,content:(0,c.AccountTypeMessage)(),reason:e("alertAccountTypeUpgradeTitle"),severity:r.Severity.Info}]:[],[t,e])};var s=e("react"),o=e("../../../../../hooks/useI18nContext"),a=e("../../../../../components/app/confirm/info/row/constants"),r=e("../../../../../helpers/constants/design-system"),i=e("../../../components/confirm/info/hooks/useIsUpgradeTransaction"),c=e("./AccountTypeMessage")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useAccountTypeUpgrade.ts"}],[7462,{"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../components/confirm/info/hooks/useTransferRecipient":7241,"../../../constants/token":7448,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBurnAddressAlert=function(){const e=(0,r.useI18nContext)(),t=(0,c.useTransferRecipient)(),n=(0,c.useNestedTransactionTransferRecipients)(),u=(0,s.useMemo)(()=>{const e=i.LOWER_CASED_BURN_ADDRESSES.includes((null==t?void 0:t.toLowerCase())??""),s=n.some(e=>i.LOWER_CASED_BURN_ADDRESSES.includes(e.toLowerCase()));return e||s},[t,n]);return(0,s.useMemo)(()=>u?[{key:a.AlertActionKey.InteractingWith,field:a.RowAlertKey.InteractingWith,message:e("alertMessageBurnAddress"),reason:e("alertActionBurnAddress"),severity:o.Severity.Danger,isBlocking:!0}]:[],[u])};var s=e("react"),o=e("../../../../../helpers/constants/design-system"),a=e("../../../../../components/app/confirm/info/row/constants"),r=e("../../../../../hooks/useI18nContext"),i=e("../../../constants/token"),c=e("../../../components/confirm/info/hooks/useTransferRecipient")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useBurnAddressAlert.ts"}],[7463,{"../../../../../hooks/useAsync":7029,"../../../../../store/actions":7916,"ethereumjs-util":4138,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useContractCode=function(e,t){const n=(0,o.useCallback)(async()=>{if(!t||!e)return{contractCode:null,isContractAddress:null};let n=null;try{const o=await(0,a.getCode)(e,t);n=(0,s.addHexPrefix)((0,s.padToEven)(o.slice(2)))}catch(e){n=null}return{contractCode:n,isContractAddress:!!n&&("0x"!==n&&"0x0"!==n)}},[e,t]);return(0,r.useAsyncResult)(n,[e,t])};var s=e("ethereumjs-util"),o=e("react"),a=e("../../../../../store/actions"),r=e("../../../../../hooks/useAsync")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useContractCode.ts"}],[7464,{"../../../../../../shared/constants/verification":5639,"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../../../hooks/useTrustSignals":7090,"../../../../../selectors":7886,"../../../components/confirm/info/hooks/useTransferRecipient":7241,"../../../context/confirm":7449,"@metamask/name-controller":2215,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useFirstTimeInteractionAlert=function(){const e=(0,r.useI18nContext)(),{currentConfirmation:t}=(0,u.useConfirmContext)(),n=(0,a.useSelector)(l.getInternalAccounts),f=(0,d.useTransferRecipient)(),{isFirstTimeInteraction:h,chainId:g,txParams:v}=t??{},T=(null==v?void 0:v.to)??"0x",y=n.some(e=>{var t;return(null===(t=e.address)||void 0===t?void 0:t.toLowerCase())===(null==f?void 0:f.toLowerCase())}),{state:k}=(0,m.useTrustSignal)(T||"",o.NameType.ETHEREUM_ADDRESS,g),S=k===m.TrustSignalDisplayState.Verified,C=Boolean((0,p.getExperience)(T,g)),A=k===m.TrustSignalDisplayState.Loading,w=!y&&h&&!S&&!C&&!A;return(0,s.useMemo)(()=>w?[{actions:[],field:c.RowAlertKey.InteractingWith,isBlocking:!1,key:"firstTimeInteractionTitle",message:e("alertMessageFirstTimeInteraction"),reason:e("alertReasonFirstTimeInteraction"),severity:i.Severity.Warning}]:[],[w,e])};var s=e("react"),o=e("@metamask/name-controller"),a=e("react-redux"),r=e("../../../../../hooks/useI18nContext"),i=e("../../../../../helpers/constants/design-system"),c=e("../../../../../components/app/confirm/info/row/constants"),u=e("../../../context/confirm"),l=e("../../../../../selectors"),d=e("../../../components/confirm/info/hooks/useTransferRecipient"),m=e("../../../../../hooks/useTrustSignals"),p=e("../../../../../../shared/constants/verification")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useFirstTimeInteractionAlert.ts"}],[7465,{"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasEstimateFailedAlerts=function(){const e=(0,a.useI18nContext)(),{currentConfirmation:t}=(0,i.useConfirmContext)(),n=Boolean(null==t?void 0:t.simulationFails);return(0,s.useMemo)(()=>n?[{actions:[{key:r.AlertActionKey.ShowAdvancedGasFeeModal,label:e("alertActionUpdateGas")}],field:r.RowAlertKey.EstimatedFee,key:"gasEstimateFailed",message:e("alertMessageGasEstimateFailed"),reason:e("alertReasonGasEstimateFailed"),severity:o.Severity.Warning}]:[],[n])};var s=e("react"),o=e("../../../../../helpers/constants/design-system"),a=e("../../../../../hooks/useI18nContext"),r=e("../../../../../components/app/confirm/info/row/constants"),i=e("../../../context/confirm")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useGasEstimateFailedAlerts.ts"}],[7466,{"../../../../../../shared/constants/gas":5606,"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../contexts/gasFee":6849,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasFeeLowAlerts=function(){const e=(0,i.useI18nContext)(),{currentConfirmation:t}=(0,u.useConfirmContext)(),{id:n}=t??{},{estimateUsed:l,transaction:d}=(0,o.useGasFeeContext)(),m=n===(null==d?void 0:d.id)&&l===r.PriorityLevels.low;return(0,s.useMemo)(()=>m?[{actions:[{key:c.AlertActionKey.ShowGasFeeModal,label:e("alertActionUpdateGasFeeLevel")}],field:c.RowAlertKey.EstimatedFee,key:"gasFeeLow",message:e("alertMessageGasFeeLow"),reason:e("alertReasonGasFeeLow"),severity:a.Severity.Warning}]:[],[m])};var s=e("react"),o=e("../../../../../contexts/gasFee"),a=e("../../../../../helpers/constants/design-system"),r=e("../../../../../../shared/constants/gas"),i=e("../../../../../hooks/useI18nContext"),c=e("../../../../../components/app/confirm/info/row/constants"),u=e("../../../context/confirm")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useGasFeeLowAlerts.ts"}],[7467,{"../../../../../../shared/modules/conversion.utils":5732,"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,"../../../send-legacy/send.constants":7577,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasTooLowAlerts=function(){var e;const t=(0,i.useI18nContext)(),{currentConfirmation:n}=(0,u.useConfirmContext)(),l=null==n||null===(e=n.txParams)||void 0===e?void 0:e.gas,d=l&&Number((0,a.hexToDecimal)(l))<Number(o.MIN_GAS_LIMIT_DEC);return(0,s.useMemo)(()=>d?[{actions:[{key:c.AlertActionKey.ShowAdvancedGasFeeModal,label:t("alertActionUpdateGas")}],field:c.RowAlertKey.EstimatedFee,isBlocking:!0,key:"gasTooLow",message:t("alertMessageGasTooLow"),reason:t("alertReasonGasTooLow"),severity:r.Severity.Warning}]:[],[d])};var s=e("react"),o=e("../../../send-legacy/send.constants"),a=e("../../../../../../shared/modules/conversion.utils"),r=e("../../../../../helpers/constants/design-system"),i=e("../../../../../hooks/useI18nContext"),c=e("../../../../../components/app/confirm/info/row/constants"),u=e("../../../context/confirm")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useGasTooLowAlerts.ts"}],[7468,{"../../../../../../shared/modules/conversion.utils":5732,"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../../../selectors":7886,"../../../context/confirm":7449,"../../../send-legacy/send.utils":7578,"../../gas/useIsGaslessSupported":7488,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useInsufficientBalanceAlerts=function({ignoreGasFeeToken:e}={}){var t,n;const p=(0,c.useI18nContext)(),{currentConfirmation:f}=(0,l.useConfirmContext)(),{id:h,chainId:g,selectedGasFeeToken:v,gasFeeTokens:T,txParams:{value:y="0x0",from:k=""}={}}=f??{},S=(null==f||null===(t=f.nestedTransactions)||void 0===t?void 0:t.map(e=>e.value??0))??[],C=(0,o.useSelector)(u.getUseTransactionSimulations),A=(0,o.useSelector)(e=>(0,u.getNativeTokenCachedBalanceByChainIdByAccountAddress)(e,k??"")),w=(null==A?void 0:A[g])??"0x0",_=(0,a.sumHexes)(y,...S),{hexMaximumTransactionFee:x}=(0,o.useSelector)(e=>(0,u.selectTransactionFeeById)(e,h)),[b,E]=(0,o.useSelector)(u.getMultichainNetworkConfigurationsByChainId),I=null===(n=b[g]??E[g])||void 0===n?void 0:n.nativeCurrency,P=!(0,d.isBalanceSufficient)({amount:_,gasTotal:x,balance:w}),M=null==f?void 0:f.isGasFeeSponsored,{isSupported:R}=(0,m.useIsGaslessSupported)(),N=M&&R,O=e||!C||Boolean(T),D=P&&O&&(e||!v)&&!N;return(0,s.useMemo)(()=>D?[{actions:[{key:r.AlertActionKey.Buy,label:p("alertActionBuyWithNativeCurrency",[I])}],field:r.RowAlertKey.EstimatedFee,isBlocking:!0,key:"insufficientBalance",message:p("alertMessageInsufficientBalanceWithNativeCurrency",[I]),reason:p("alertReasonInsufficientBalance"),severity:i.Severity.Danger}]:[],[I,D,p])};var s=e("react"),o=e("react-redux"),a=e("../../../../../../shared/modules/conversion.utils"),r=e("../../../../../components/app/confirm/info/row/constants"),i=e("../../../../../helpers/constants/design-system"),c=e("../../../../../hooks/useI18nContext"),u=e("../../../../../selectors"),l=e("../../../context/confirm"),d=e("../../../send-legacy/send.utils"),m=e("../../gas/useIsGaslessSupported")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useInsufficientBalanceAlerts.ts"}],[7469,{"../../../../../../shared/constants/transaction":5637,"../../../../../../shared/modules/transaction.utils":5763,"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useAsync":7029,"../../../../../hooks/useI18nContext":7047,"../../../../../selectors":7886,"../../../../../store/actions":7916,"../../../components/confirm/info/hooks/useBatchApproveBalanceChanges":7227,"../../../context/confirm":7449,"@metamask/transaction-controller":2868,"bignumber.js":3768,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultipleApprovalsAlerts=function(){var e,t;const n=(0,m.useI18nContext)(),{currentConfirmation:v}=(0,h.useConfirmContext)(),{value:T}=(0,f.useBatchApproveBalanceChanges)()??{},y=(0,r.useSelector)(g.getUseTransactionSimulations),k=(0,r.useSelector)(g.selectNonZeroUnusedApprovalsAllowList),S=null==v?void 0:v.nestedTransactions,C=null==v?void 0:v.simulationData,A=null==C?void 0:C.tokenBalanceChanges,w=y&&![s.SimulationErrorCode.ChainNotSupported,s.SimulationErrorCode.Disabled].includes(null==C||null===(e=C.error)||void 0===e?void 0:e.code),_=null==k?void 0:k.includes((null==v?void 0:v.origin)??""),x=(0,a.useMemo)(()=>null!=S&&S.length?function(e){const t=new Set;return e.forEach(e=>{const{data:n,to:s}=e;if(!n||!s)return;const o=(0,c.parseApprovalTransactionData)(n);if(!o)return;const{name:a,tokenAddress:r}=o;let i;switch(a){case"approve":i=r||s;break;case"increaseAllowance":case"setApprovalForAll":i=s;break;default:return}t.add(i)}),Array.from(t)}(S):[],[S]),{value:b}=(0,d.useAsyncResult)(async()=>{var e;return async function(e,t,n){if(!e.length||!t||!n)return{};const s={};return await Promise.all(e.map(async e=>{try{const o=await(0,p.getTokenStandardAndDetailsByChain)(e,n,undefined,t),a=null==o?void 0:o.standard;s[e]=Object.values(i.TokenStandard).includes(a)?a:i.TokenStandard.none}catch(t){console.warn(`Failed to get token standard for ${e}:`,t),s[e]=i.TokenStandard.none}})),s}(x,null==v?void 0:v.chainId,null==v||null===(e=v.txParams)||void 0===e?void 0:e.from)},[x,null==v?void 0:v.chainId,null==v||null===(t=v.txParams)||void 0===t?void 0:t.from]),E=(0,a.useMemo)(()=>{if(null==S||!S.length||null==T||!T.length||!b)return[];const e=function(e,t){const n=[];return e.forEach(e=>{const{data:s,to:o}=e;if(!s||!o)return;const a=(0,c.parseApprovalTransactionData)(s);if(!a)return;const{name:r,amountOrTokenId:u,tokenAddress:l}=a;let d,m;switch(r){case"approve":l?(d=l,m=o):d=o;break;case"increaseAllowance":case"setApprovalForAll":d=o;break;default:return}(function(e,t,n){var s;if(!e)return!0;if(e.isRevokeAll)return!0;if(null!==(s=e.amountOrTokenId)&&void 0!==s&&s.isZero()){if(t[n]===i.TokenStandard.ERC20)return!0}return!1})(a,t,d)||n.push({tokenAddress:d,spenderAddress:m,amount:u})}),n}(S,b);return e},[T,S,b]),I=(0,a.useMemo)(()=>A?function(e){return(null==e?void 0:e.filter(e=>e.isDecrease).map(e=>({tokenAddress:e.address.toLowerCase(),amount:new o.BigNumber(e.difference,16),isDecrease:e.isDecrease})))??[]}(A):[],[A]),P=(0,a.useMemo)(()=>function(e,t){if(0===e.length)return[];return e.filter(e=>!t.find(t=>t.tokenAddress.toLowerCase()===e.tokenAddress.toLowerCase()))}(E,I),[E,I]).length>0&&Boolean(null==v?void 0:v.simulationData)&&w&&!_;return(0,a.useMemo)(()=>P?[{field:u.RowAlertKey.EstimatedChangesStatic,isBlocking:!1,key:"multipleApprovals",reason:n("alertReasonMultipleApprovals"),content:n("alertContentMultipleApprovals"),severity:l.Severity.Danger}]:[],[P,n])};var s=e("@metamask/transaction-controller"),o=e("bignumber.js"),a=e("react"),r=e("react-redux"),i=e("../../../../../../shared/constants/transaction"),c=e("../../../../../../shared/modules/transaction.utils"),u=e("../../../../../components/app/confirm/info/row/constants"),l=e("../../../../../helpers/constants/design-system"),d=e("../../../../../hooks/useAsync"),m=e("../../../../../hooks/useI18nContext"),p=e("../../../../../store/actions"),f=e("../../../components/confirm/info/hooks/useBatchApproveBalanceChanges"),h=e("../../../context/confirm"),g=e("../../../../../selectors")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useMultipleApprovalsAlerts.ts"}],[7470,{"../../../../../../shared/modules/transaction.utils":5763,"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../../../selectors":7886,"../../../context/confirm":7449,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNoGasPriceAlerts=function(){const e=(0,l.useI18nContext)(),t=(0,s.useSelector)(u.getNoGasPriceFetched),{currentConfirmation:n}=(0,d.useConfirmContext)(),m=(null==n?void 0:n.userFeeLevel)&&n.userFeeLevel!==o.UserFeeLevel.CUSTOM&&!(0,r.txParamsAreDappSuggested)(n)&&t;return(0,a.useMemo)(()=>m?[{actions:[{key:c.AlertActionKey.ShowAdvancedGasFeeModal,label:e("alertActionUpdateGasFee")}],field:c.RowAlertKey.EstimatedFee,isBlocking:!0,key:"noGasPrice",message:e("alertMessageNoGasPrice"),reason:e("alertReasonNoGasPrice"),severity:i.Severity.Warning}]:[],[m])};var s=e("react-redux"),o=e("@metamask/transaction-controller"),a=e("react"),r=e("../../../../../../shared/modules/transaction.utils"),i=e("../../../../../helpers/constants/design-system"),c=e("../../../../../components/app/confirm/info/row/constants"),u=e("../../../../../selectors"),l=e("../../../../../hooks/useI18nContext"),d=e("../../../context/confirm")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useNoGasPriceAlerts.ts"}],[7471,{"../../../../../../shared/modules/selectors/networks":5753,"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../components/confirm/info/hooks/useIsUpgradeTransaction":7233,"../../../context/confirm":7449,"./NonContractAddressAlertMessage":7458,"./useContractCode":7463,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNonContractAddressAlerts=function(){var e,t,n;const f=(0,u.useI18nContext)(),{currentConfirmation:h}=(0,l.useConfirmContext)(),g=(0,a.useSelector)(r.getNetworkConfigurationsByChainId),{isUpgrade:v}=(0,d.useIsUpgradeTransaction)(),{pending:T,value:y}=(0,p.useContractCode)(null==h||null===(e=h.txParams)||void 0===e?void 0:e.to,null==h?void 0:h.networkClientId),k=(null==h||null===(t=h.txParams)||void 0===t?void 0:t.data)!==undefined&&"0x"!==(null==h||null===(n=h.txParams)||void 0===n?void 0:n.data),S=null===(null==y?void 0:y.contractCode),C=!T&&!S&&!1===(null==y?void 0:y.isContractAddress),A=(null==h?void 0:h.type)===s.TransactionType.deployContract,w=k&&C&&!A;return(0,o.useMemo)(()=>!w||v?[]:[{field:i.RowAlertKey.InteractingWith,isBlocking:!1,key:"hexDataWhileInteractingWithNonContractAddress",reason:f("nonContractAddressAlertTitle"),content:(0,m.NonContractAddressAlertMessage)(g),severity:c.Severity.Warning}],[w,v,g])};var s=e("@metamask/transaction-controller"),o=e("react"),a=e("react-redux"),r=e("../../../../../../shared/modules/selectors/networks"),i=e("../../../../../components/app/confirm/info/row/constants"),c=e("../../../../../helpers/constants/design-system"),u=e("../../../../../hooks/useI18nContext"),l=e("../../../context/confirm"),d=e("../../../components/confirm/info/hooks/useIsUpgradeTransaction"),m=e("./NonContractAddressAlertMessage"),p=e("./useContractCode")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useNonContractAddressAlerts.ts"}],[7472,{"../../../../../../shared/lib/confirmation.utils":5650,"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../../../selectors":7886,"../../../context/confirm":7449,"./PendingTransactionAlertMessage":7459,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.usePendingTransactionAlerts=function(){const e=(0,c.useI18nContext)(),{currentConfirmation:t}=(0,l.useConfirmContext)(),{type:n}=t??{},m=(0,o.useSelector)(u.submittedPendingTransactionsSelector),p=(0,a.isCorrectDeveloperTransactionType)(n)&&Boolean(m.length);return(0,s.useMemo)(()=>p?[{field:r.RowAlertKey.Speed,key:"pendingTransactions",content:(0,d.PendingTransactionAlertMessage)(e),reason:e("alertReasonPendingTransactions"),severity:i.Severity.Warning}]:[],[p,e])};var s=e("react"),o=e("react-redux"),a=e("../../../../../../shared/lib/confirmation.utils"),r=e("../../../../../components/app/confirm/info/row/constants"),i=e("../../../../../helpers/constants/design-system"),c=e("../../../../../hooks/useI18nContext"),u=e("../../../../../selectors"),l=e("../../../context/confirm"),d=e("./PendingTransactionAlertMessage")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/usePendingTransactionAlerts.ts"}],[7473,{"../../../../../../shared/constants/app":5598,"../../../../../components/app/confirm/info/row/constants":5868,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,"../../../context/dapp-swap":7450,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useResimulationAlert=function(){var e;const t=(0,a.useI18nContext)(),{currentConfirmation:n}=(0,c.useConfirmContext)(),{isQuotedSwapDisplayedInInfo:l}=(0,u.useDappSwapContext)(),d=n,m=null==d||null===(e=d.simulationData)||void 0===e?void 0:e.isUpdatedAfterSecurityCheck,p=(null==d?void 0:d.origin)===o.ORIGIN_METAMASK;return(0,s.useMemo)(()=>!m||p||l?[]:[{actions:[],field:i.RowAlertKey.Resimulation,isBlocking:!1,key:"simulationDetailsTitle",message:t("alertMessageChangeInSimulationResults"),reason:t("alertReasonChangeInSimulationResults"),severity:r.Severity.Danger}],[l,m,p,t])};var s=e("react"),o=e("../../../../../../shared/constants/app"),a=e("../../../../../hooks/useI18nContext"),r=e("../../../../../helpers/constants/design-system"),i=e("../../../../../components/app/confirm/info/row/constants"),c=e("../../../context/confirm"),u=e("../../../context/dapp-swap")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useResimulationAlert.ts"}],[7474,{"../../../../../../shared/lib/confirmation.utils":5650,"../../../../../helpers/constants/design-system":6899,"../../../../../hooks/useI18nContext":7047,"../../../../../selectors":7886,"../../../context/confirm":7449,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSigningOrSubmittingAlerts=function(){const e=(0,i.useI18nContext)(),{currentConfirmation:t}=(0,c.useConfirmContext)(),{type:n}=t??{},l=(0,o.useSelector)(a.getApprovedAndSignedTransactions),d=(0,u.isCorrectDeveloperTransactionType)(n)&&l.length>0;return(0,s.useMemo)(()=>d?[{isBlocking:!0,key:"signingOrSubmitting",message:e("isSigningOrSubmitting"),severity:r.Severity.Danger}]:[],[d])};var s=e("react"),o=e("react-redux"),a=e("../../../../../selectors"),r=e("../../../../../helpers/constants/design-system"),i=e("../../../../../hooks/useI18nContext"),c=e("../../../context/confirm"),u=e("../../../../../../shared/lib/confirmation.utils")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/transactions/useSigningOrSubmittingAlerts.ts"}],[7475,{"../../../../../shared/constants/network":5617,"../../../../../shared/modules/rpc.utils":5748,"../../../../components/app/confirm/info/row/constants":5868,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../settings/networks-tab/networks-form/use-safe-chains":7775,"../../context/confirm":7449,"@metamask/controller-utils":1383,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAddEthereumChainAlerts=function(){var e;const[t,n]=(0,s.useState)([]),m=(0,c.useI18nContext)(),{safeChains:p}=(0,u.useSafeChains)(),{currentConfirmation:f}=(0,r.useConfirmContext)(),h=f,g=null==h||null===(e=h.requestData)||void 0===e?void 0:e.chainId,v=(0,s.useMemo)(()=>p&&g?p.find(e=>Number(e.chainId)===parseInt(g,16)):null,[p,g]);return(0,s.useEffect)(()=>{if(!h)return void n([]);(async()=>{var e,t,s,r,c,u,p,f;const g=[],{requestData:T}=h;if(!v)return void n(g);const y=o.NETWORKS_BYPASSING_VALIDATION[T.chainId.toLowerCase()]||{},k=v.name||T.chainName,S=m("allowAddRpc");g.push({key:"allowAddRpc",message:m("allowAddRpcDescription",[k]),severity:a.Severity.Info,field:d.RowAlertKey.RpcUrl,reason:S,inlineAlertText:"",showArrow:!1}),(null===(e=v.name)||void 0===e?void 0:e.toLowerCase())!==T.chainName.toLowerCase()&&(null==y||null===(t=y.name)||void 0===t?void 0:t.toLowerCase())!==T.chainName.toLowerCase()&&g.push({key:"mismatchedNetworkName",message:m("mismatchedNetworkName"),severity:a.Severity.Warning,field:d.RowAlertKey.ChainName,inlineAlertText:"",showArrow:!1}),(null===(s=v.nativeCurrency)||void 0===s||null===(s=s.symbol)||void 0===s?void 0:s.toLowerCase())!==(null===(r=T.ticker)||void 0===r?void 0:r.toLowerCase())&&(null==y||null===(c=y.symbol)||void 0===c?void 0:c.toLowerCase())!==(null===(u=T.ticker)||void 0===u?void 0:u.toLowerCase())&&g.push({key:"mismatchedNetworkSymbol",message:m("mismatchedNetworkSymbol"),severity:a.Severity.Warning,field:d.RowAlertKey.ChainName,inlineAlertText:"",showArrow:!1});const{origin:C}=new URL(T.rpcUrl);null!==(p=v.rpc)&&void 0!==p&&p.map(e=>new URL(e).origin).includes(C)||null!=y&&null!==(f=y.rpcUrl)&&void 0!==f&&f.includes(C)||g.push({key:"mismatchedRpcUrl",message:m("mismatchedRpcUrl"),severity:a.Severity.Warning,field:d.RowAlertKey.RpcUrl,inlineAlertText:"",showArrow:!1}),i.DEPRECATED_NETWORKS.includes(T.chainId)&&g.push({key:"deprecatedNetwork",message:m("deprecatedNetwork"),severity:a.Severity.Warning,field:d.RowAlertKey.ChainName,inlineAlertText:"",showArrow:!1});try{const e=await(0,l.jsonRpcRequest)(T.rpcUrl,"eth_chainId");T.chainId!==e&&g.push({key:"mismatchedRpcChainId",message:m("mismatchedRpcChainId"),severity:a.Severity.Warning,field:d.RowAlertKey.ChainName,inlineAlertText:"",showArrow:!1})}catch(e){console.error(`Request for method 'eth_chainId' on ${T.rpcUrl} failed`,e),g.push({key:"errorWhileConnectingToRPC",message:m("errorWhileConnectingToRPC"),severity:a.Severity.Warning,field:d.RowAlertKey.RpcUrl,inlineAlertText:"",showArrow:!1})}n(g)})()},[g,v,h,m]),t};var s=e("react"),o=e("@metamask/controller-utils"),a=e("../../../../helpers/constants/design-system"),r=e("../../context/confirm"),i=e("../../../../../shared/constants/network"),c=e("../../../../hooks/useI18nContext"),u=e("../../../settings/networks-tab/networks-form/use-safe-chains"),l=e("../../../../../shared/modules/rpc.utils"),d=e("../../../../components/app/confirm/info/row/constants")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useAddEthereumChainAlerts.ts"}],[7476,{"../../../../../app/scripts/lib/ppom/security-alerts-api":295,"../../../../components/app/confirm/info/row/constants":5868,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useTrustSignals":7090,"../../context/confirm":7449,"@metamask/name-controller":2215,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAddressTrustSignalAlerts=function(){const{currentConfirmation:e}=(0,i.useConfirmContext)(),t=(0,u.useI18nContext)(),n=(0,s.useMemo)(()=>{var t,n;if(!e)return null;if(null!=e&&null!==(t=e.txParams)&&void 0!==t&&t.to)return e.txParams.to;if(null!=e&&null!==(n=e.msgParams)&&void 0!==n&&n.data)try{var s,o;const t=null==e||null===(s=e.msgParams)||void 0===s?void 0:s.data,n="string"==typeof t?JSON.parse(t):t;if(null!=n&&null!==(o=n.domain)&&void 0!==o&&o.verifyingContract)return n.domain.verifyingContract}catch(e){}return null},[e]),{state:d}=(0,c.useTrustSignal)(n||"",o.NameType.ETHEREUM_ADDRESS,null==e?void 0:e.chainId);return(0,s.useMemo)(()=>{if(!n||!(0,l.isSecurityAlertsAPIEnabled)())return[];const e=[];return d===c.TrustSignalDisplayState.Malicious?e.push({actions:[],field:r.RowAlertKey.InteractingWith,isBlocking:!1,key:"trustSignalMalicious",message:t("alertMessageAddressTrustSignalMalicious"),reason:t("nameModalTitleMalicious"),severity:a.Severity.Danger}):d===c.TrustSignalDisplayState.Warning&&e.push({actions:[],field:r.RowAlertKey.InteractingWith,isBlocking:!1,key:"trustSignalWarning",message:t("alertMessageAddressTrustSignal"),reason:t("nameModalTitleWarning"),severity:a.Severity.Warning}),e},[n,d,t])};var s=e("react"),o=e("@metamask/name-controller"),a=e("../../../../helpers/constants/design-system"),r=e("../../../../components/app/confirm/info/row/constants"),i=e("../../context/confirm"),c=e("../../../../hooks/useTrustSignals"),u=e("../../../../hooks/useI18nContext"),l=e("../../../../../app/scripts/lib/ppom/security-alerts-api")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useAddressTrustSignalAlerts.ts"}],[7477,{"../../../../../shared/constants/network":5617,"../../../../../shared/constants/security-provider":5626,"../../../../../shared/lib/confirmation.utils":5650,"../../../../helpers/constants/zendesk-url":6911,"../../../../hooks/useI18nContext":7047,"../../context/confirm":7449,"../../utils":7585,"../useCurrentSignatureSecurityAlertResponse":7539,"./utils":7485,"@blockaid/ppom_release/package.json":619,react:5080,"react-redux":5021,zlib:3874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=h(e("@blockaid/ppom_release/package.json")),o=e("react"),a=e("react-redux"),r=e("../../../../../shared/constants/network"),i=e("../../../../../shared/constants/security-provider"),c=h(e("../../../../helpers/constants/zendesk-url")),u=e("../../../../hooks/useI18nContext"),l=e("../../utils"),d=e("../../../../../shared/lib/confirmation.utils"),m=e("../../context/confirm"),p=h(e("../useCurrentSignatureSecurityAlertResponse")),f=e("./utils");function h(e){return e&&e.__esModule?e:{default:e}}const g=e("zlib"),v=[i.BlockaidResultType.Benign,i.BlockaidResultType.Loading];n.default=()=>{var e;const t=(0,u.useI18nContext)(),{currentConfirmation:n}=(0,m.useConfirmContext)(),h=null==n||null===(e=n.securityAlertResponse)||void 0===e?void 0:e.securityAlertId,T=null==n?void 0:n.type,y=(0,p.default)(),k=(0,a.useSelector)(e=>{var t;return null===(t=e.metamask.transactions.find(e=>{var t;return(null===(t=e.securityAlertResponse)||void 0===t?void 0:t.securityAlertId)===h}))||void 0===t?void 0:t.securityAlertResponse}),S=y||k,C=(0,d.isCorrectDeveloperTransactionType)(T)||l.SIGNATURE_TRANSACTION_TYPES.includes(T),A=v.includes(null==S?void 0:S.result_type);let w;if(S&&n){const{block:e,features:t,reason:o,result_type:a}=S,{chainId:c,msgParams:u,origin:l,type:d,txParams:m}=n,p=a===i.BlockaidResultType.Errored,f={blockNumber:e,blockaidVersion:s.default.version,chain:r.NETWORK_TO_NAME_MAP[c],classification:p?"error":o,domain:l??(null==u?void 0:u.origin)??l,jsonRpcMethod:d,jsonRpcParams:JSON.stringify(m??u),resultType:p?i.BlockaidResultType.Errored:a,reproduce:JSON.stringify(t)};w=JSON.stringify(f)}return(0,o.useMemo)(()=>{if(!C||A||!S)return[];let e=c.default.SUPPORT_URL;if(w){var n;const t=(null==g||null===(n=g.gzipSync)||void 0===n?void 0:n.call(g,w))??w;e=`${i.FALSE_POSITIVE_REPORT_BASE_URL}?data=${encodeURIComponent(t.toString("base64"))}&utm_source=${i.SECURITY_PROVIDER_UTM_SOURCE}`}return[(0,f.normalizeProviderAlert)(S,t,e)]},[C,A,S,w,t])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useBlockaidAlerts.ts"}],[7478,{"../../../../components/app/confirm/info/row/constants":5868,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../context/confirm":7449,"../../utils":7585,"../../utils/confirm":7584,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),o=e("../../../../components/app/confirm/info/row/constants"),a=e("../../../../helpers/constants/design-system"),r=e("../../../../hooks/useI18nContext"),i=e("../../utils/confirm"),c=e("../../utils"),u=e("../../context/confirm");n.default=()=>{var e;const t=(0,r.useI18nContext)(),{currentConfirmation:n}=(0,u.useConfirmContext)(),l=(0,c.isSignatureTransactionType)(n)?null==n||null===(e=n.msgParams)||void 0===e?void 0:e.origin:null==n?void 0:n.origin,d=l===undefined||"metamask"===l||(0,i.isValidASCIIURL)(l);return(0,s.useMemo)(()=>d?[]:[{key:"originSpecialCharacterWarning",reason:t("addressMismatch"),field:o.RowAlertKey.RequestFrom,severity:a.Severity.Warning,message:t("alertMessageAddressMismatchWarning"),alertDetails:[t("addressMismatchOriginal",[l]),t("addressMismatchPunycode",[l?(0,i.toPunycodeURL)(l):""])]}],[l,d,t])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useConfirmationOriginAlerts.ts"}],[7479,{"../../../../components/app/confirm/info/row/constants":5868,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../selectors":7886,"../../../../store/actions":7916,"../../context/confirm":7449,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNetworkAndOriginSwitchingAlerts=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../../components/app/confirm/info/row/constants"),r=e("../../../../helpers/constants/design-system"),i=e("../../../../store/actions"),c=e("../../../../selectors"),u=e("../../../../hooks/useI18nContext"),l=e("../../context/confirm");n.useNetworkAndOriginSwitchingAlerts=()=>{var e;const t=(0,u.useI18nContext)(),{currentConfirmation:n}=(0,l.useConfirmContext)(),{chainId:d="",id:m}=n??{},p=(null==n?void 0:n.origin)??(null==n||null===(e=n.msgParams)||void 0===e?void 0:e.origin)??"",f=(0,o.useSelector)(e=>(0,c.selectNetworkConfigurationByChainId)(e,d)),[h,g]=(0,s.useState)();(0,s.useEffect)(()=>{let e=!0;return(async()=>{const t=await(0,i.getLastInteractedConfirmationInfo)();if(!e)return;g(t);(!t||(null==t?void 0:t.id)!==m)&&(0,i.setLastInteractedConfirmationInfo)({id:m,chainId:d,origin:p,timestamp:(new Date).getTime()})})(),()=>{e=!1}},[m,d,p,g]);return(0,s.useMemo)(()=>{if(!m||!h)return[];const e=[];if(!((new Date).getTime()-h.timestamp<=6e4))return[];const{chainId:n,origin:s}=h;return n!==d&&e.push({key:"networkSwitchInfo",reason:t("networkChanged"),field:a.RowAlertKey.Network,severity:r.Severity.Info,message:t("networkChangedMessage",[(null==f?void 0:f.name)??""])}),s!==p&&e.push({key:"originSwitchInfo",reason:t("originChanged"),field:a.RowAlertKey.RequestFrom,severity:r.Severity.Info,message:t("originChangedMessage",[p??""])}),e},[m,h,null==f?void 0:f.name,d,p,t])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useNetworkAndOriginSwitchingAlerts.ts"}],[7480,{"../../../../components/app/confirm/info/row/constants":5868,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useOriginTrustSignals":7066,"../../../../hooks/useTrustSignals":7090,"../../context/confirm":7449,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOriginTrustSignalAlerts=function(){var e;const t=(0,r.useI18nContext)(),{currentConfirmation:n}=(0,i.useConfirmContext)(),l=(null==n?void 0:n.origin)??(null==n||null===(e=n.msgParams)||void 0===e?void 0:e.origin)??"",{state:d}=(0,u.useOriginTrustSignals)(l);return(0,s.useMemo)(()=>{if(!l)return[];const e=[];return d===c.TrustSignalDisplayState.Malicious?e.push({key:"originTrustSignalMalicious",reason:t("alertReasonOriginTrustSignalMalicious"),field:o.RowAlertKey.RequestFrom,severity:a.Severity.Danger,message:t("alertMessageOriginTrustSignalMalicious")}):d===c.TrustSignalDisplayState.Warning&&e.push({key:"originTrustSignalWarning",reason:t("alertReasonOriginTrustSignalWarning"),field:o.RowAlertKey.RequestFrom,severity:a.Severity.Warning,message:t("alertMessageOriginTrustSignalWarning")}),e},[l,d,t])};var s=e("react"),o=e("../../../../components/app/confirm/info/row/constants"),a=e("../../../../helpers/constants/design-system"),r=e("../../../../hooks/useI18nContext"),i=e("../../context/confirm"),c=e("../../../../hooks/useTrustSignals"),u=e("../../../../hooks/useOriginTrustSignals")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useOriginTrustSignalAlerts.ts"}],[7481,{"../../../../components/app/confirm/info/row/constants":5868,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../selectors/multichain-accounts/account-tree":7890,"../../context/confirm":7449,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSelectedAccountAlerts=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../../selectors/multichain-accounts/account-tree"),r=e("../../../../components/app/confirm/info/row/constants"),i=e("../../../../helpers/constants/design-system"),c=e("../../../../hooks/useI18nContext"),u=e("../../context/confirm");n.useSelectedAccountAlerts=()=>{var e,t,n;const l=(0,c.useI18nContext)(),{currentConfirmation:d}=(0,u.useConfirmContext)(),m=(0,o.useSelector)(a.getSelectedAccountGroup),p=null===(e=(0,o.useSelector)(a.getAccountGroupWithInternalAccounts).find(e=>e.id===m))||void 0===e?void 0:e.accounts,f=(null==d||null===(t=d.msgParams)||void 0===t?void 0:t.from)??(null==d||null===(n=d.txParams)||void 0===n?void 0:n.from),h=null==p?void 0:p.find(e=>e.address.toLowerCase()===(null==f?void 0:f.toLowerCase())),g=!f||h;return(0,s.useMemo)(()=>g?[]:[{key:"selectedAccountWarning",reason:l("selectedAccountMismatch"),field:r.RowAlertKey.SigningInWith,severity:i.Severity.Info,message:l("alertSelectedAccountWarning")}],[g,l])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useSelectedAccountAlerts.ts"}],[7482,{"../../../../components/app/confirm/info/row/constants":5868,"../../../../components/component-library":6325,"../../../../helpers/constants/design-system":6899,"../../../../helpers/constants/routes":6904,"../../../../hooks/useI18nContext":7047,"../../../../selectors/shield/coverage":7906,"../../context/confirm":7449,"../../utils":7585,"../transactions/useEnableShieldCoverageChecks":7520,"../useSignatureEventFragment":7559,"../useTransactionEventFragment":7564,"./transactions/ShieldCoverageAlertMessage":7460,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShieldCoverageAlert=function(){const e=(0,c.useI18nContext)(),{currentConfirmation:t}=(0,l.useConfirmContext)(),{updateSignatureEventFragment:n}=(0,h.useSignatureEventFragment)(),{updateTransactionEventFragment:S}=(0,g.useTransactionEventFragment)(),{id:C}=t??{},{reasonCode:A,status:w}=(0,o.useSelector)(e=>(0,u.getCoverageStatus)(e,C)),_=(0,o.useSelector)(e=>(0,u.getCoverageMetrics)(e,C)),{isEnabled:x,isPaused:b}=(0,d.useEnableShieldCoverageChecks)();let E="covered"===w?"shieldCoverageAlertCovered":y(A);b&&(E="shieldCoverageAlertMessagePaused");const I=x&&Boolean(w)||b,P=(0,a.useNavigate)(),M=(0,s.useCallback)(()=>{P(p.TRANSACTION_SHIELD_ROUTE)},[P]);return(0,s.useEffect)(()=>{if(x||b){const e={shield_result:k(w),shield_reason:E,shield_result_response_latency_ms:(null==_?void 0:_.latency)??T};(0,f.isSignatureTransactionType)(t)?n({properties:e}):S({properties:e},C)}},[t,C,x,b,null==_?void 0:_.latency,E,w,n,S]),(0,s.useMemo)(()=>{if(!I)return[];let n=i.Severity.Disabled,s=e(b?"shieldPaused":"shieldNotCovered");const o=(0,f.isSignatureTransactionType)(t);let a,c=e(b?"shieldCoverageAlertMessageTitlePaused":"shieldCoverageAlertMessageTitle");if(o&&!b&&(c=e("shieldCoverageAlertMessageTitleSignatureRequest")),!b)switch(w){case"covered":n=i.Severity.Success,s=e("shieldCovered"),c=e(o?"shieldCoverageAlertMessageTitleSignatureRequestCovered":"shieldCoverageAlertMessageTitleCovered");break;case"malicious":n=i.Severity.Danger,a=i.BackgroundColor.errorMuted}return[{key:"shieldCoverageAlert",reason:c,field:r.RowAlertKey.ShieldFooterCoverageIndicator,severity:n,content:(0,v.ShieldCoverageAlertMessage)({modalBodyStr:E}),isBlocking:!1,inlineAlertText:s,inlineAlertTextPill:!0,inlineAlertTextBackgroundColor:a,alertDetailsBackgroundColor:i.BackgroundColor.backgroundDefault,inlineAlertIconRight:!0,iconName:m.IconName.Info,iconColor:i.IconColor.inherit,showArrow:!1,isOpenModalOnClick:!0,hideFromAlertNavigation:!0,acknowledgeBypass:!0,customAcknowledgeButtonText:b?e("shieldCoverageAlertMessagePausedAcknowledgeButton"):undefined,customAcknowledgeButtonOnClick:b?M:undefined}]},[I,b,e,t,E,M,w])};var s=e("react"),o=e("react-redux"),a=e("react-router-dom-v5-compat"),r=e("../../../../components/app/confirm/info/row/constants"),i=e("../../../../helpers/constants/design-system"),c=e("../../../../hooks/useI18nContext"),u=e("../../../../selectors/shield/coverage"),l=e("../../context/confirm"),d=e("../transactions/useEnableShieldCoverageChecks"),m=e("../../../../components/component-library"),p=e("../../../../helpers/constants/routes"),f=e("../../utils"),h=e("../useSignatureEventFragment"),g=e("../useTransactionEventFragment"),v=e("./transactions/ShieldCoverageAlertMessage");const T="N/A",y=e=>{let t;switch(e){case"E001":case"E002":case"E003":case"E004":case"E005":case"E006":case"E101":case"E102":case"E103":case"E301":case"E302":case"E500":case"E501":case"E600":case"E601":t="shieldCoverageAlertMessagePotentialRisks";break;case"E007":case"E802":case"E803":default:t="shieldCoverageAlertMessageUnknown";break;case"E008":t="shieldCoverageAlertMessageChainNotSupported";break;case"E104":case"E200":case"E300":case"E400":case"E401":case"E402":t="shieldCoverageAlertMessageTxTypeNotSupported";break;case"E700":case"E701":case"E702":case"E703":t="shieldCoverageAlertMessageSignatureNotSupported";break;case"E800":t="shieldCoverageAlertHighRiskTransaction";break;case"E801":t="shieldCoverageAlertMessageTokenTrustSignalWarning"}return t},k=e=>{switch(e){case"covered":return"covered";case"malicious":return"not_covered_malicious";case"unknown":return"not_covered";default:return"loading"}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useShieldCoverageAlert.ts"}],[7483,{"../../../../../shared/constants/signatures":5627,"../../../../../shared/modules/transaction.utils":5763,"../../../../components/app/confirm/info/row/constants":5868,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useTrustSignals":7090,"../../context/confirm":7449,"../../utils":7585,"@metamask/name-controller":2215,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSpenderAlerts=function(){const e=(0,a.useI18nContext)(),{currentConfirmation:t}=(0,r.useConfirmContext)(),n=(0,s.useMemo)(()=>{var e;if(!t)return null;const n=null===(e=t.txParams)||void 0===e?void 0:e.data;if(n){const e=(0,c.parseApprovalTransactionData)(n);if(null!=e&&e.spender)return e.spender}else if((0,i.isSignatureTransactionType)(t)&&"eth_signTypedData"===t.type){var s;const e=null===(s=t.msgParams)||void 0===s?void 0:s.data;if(e){const t=(0,c.parseTypedDataMessage)(e),{primaryType:n}=t;var o;if(u.PRIMARY_TYPES_PERMIT.includes(n))return(null===(o=t.message)||void 0===o?void 0:o.spender)||null}}return null},[t]),{state:p}=(0,m.useTrustSignal)(n||"",o.NameType.ETHEREUM_ADDRESS,null==t?void 0:t.chainId);return(0,s.useMemo)(()=>{if(!n)return[];const t=[];return p===m.TrustSignalDisplayState.Malicious?t.push({actions:[],field:l.RowAlertKey.Spender,isBlocking:!1,key:"spenderTrustSignalMalicious",message:e("alertMessageAddressTrustSignalMalicious"),reason:e("nameModalTitleMalicious"),severity:d.Severity.Danger}):p===m.TrustSignalDisplayState.Warning&&t.push({actions:[],field:l.RowAlertKey.Spender,isBlocking:!1,key:"spenderTrustSignalWarning",message:e("alertMessageAddressTrustSignal"),reason:e("nameModalTitleWarning"),severity:d.Severity.Warning}),t},[n,p,e])};var s=e("react"),o=e("@metamask/name-controller"),a=e("../../../../hooks/useI18nContext"),r=e("../../context/confirm"),i=e("../../utils"),c=e("../../../../../shared/modules/transaction.utils"),u=e("../../../../../shared/constants/signatures"),l=e("../../../../components/app/confirm/info/row/constants"),d=e("../../../../helpers/constants/design-system"),m=e("../../../../hooks/useTrustSignals")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useSpenderAlerts.ts"}],[7484,{"../../../../components/app/confirm/info/row/constants":5868,"../../../../helpers/constants/design-system":6899,"../../../../hooks/useI18nContext":7047,"../../../../hooks/useTokenTrustSignals":7087,"../../../../hooks/useTrustSignals":7090,"../../context/confirm":7449,"@metamask/transaction-controller":2868,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenTrustSignalAlerts=function(){var e;const t=(0,u.useI18nContext)(),{currentConfirmation:n}=(0,i.useConfirmContext)(),p=n,f=null==p?void 0:p.chainId,h=null==p||null===(e=p.simulationData)||void 0===e?void 0:e.tokenBalanceChanges,g=(0,s.useMemo)(()=>{if(null==h||!h.length)return undefined;const e=h.filter(e=>!e.isDecrease&&e.standard===o.SimulationTokenStandard.erc20&&e.address).map(e=>e.address.toLowerCase());return e.length?e:undefined},[h]),v=(0,l.useTokenTrustSignalsForAddresses)(f,g);return(0,s.useMemo)(()=>{if(null==g||!g.length)return d;const e=null==v?void 0:v.some(e=>e.state===c.TrustSignalDisplayState.Malicious),n=null==v?void 0:v.some(e=>e.state===c.TrustSignalDisplayState.Warning);return e?[{actions:m,field:r.RowAlertKey.IncomingTokens,isBlocking:!1,key:"tokenTrustSignalMalicious",message:t("alertMessageTokenTrustSignalMalicious"),reason:t("alertReasonTokenTrustSignalMalicious"),severity:a.Severity.Danger}]:n?[{actions:m,field:r.RowAlertKey.IncomingTokens,isBlocking:!1,key:"tokenTrustSignalWarning",message:t("alertMessageTokenTrustSignalWarning"),reason:t("alertReasonTokenTrustSignalWarning"),severity:a.Severity.Warning}]:d},[g,v,t])};var s=e("react"),o=e("@metamask/transaction-controller"),a=e("../../../../helpers/constants/design-system"),r=e("../../../../components/app/confirm/info/row/constants"),i=e("../../context/confirm"),c=e("../../../../hooks/useTrustSignals"),u=e("../../../../hooks/useI18nContext"),l=e("../../../../hooks/useTokenTrustSignals");const d=[],m=[]}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/useTokenTrustSignalAlerts.ts"}],[7485,{"../../../../../shared/constants/security-provider":5626,"../../../../helpers/constants/design-system":6899},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.REASON_TO_TITLE_TKEY=n.REASON_TO_DESCRIPTION_TKEY=void 0,n.getProviderAlertSeverity=i,n.normalizeProviderAlert=function(e,t,n){return{key:e.securityAlertId||"",reason:t(r[e.reason]||"blockaidTitleDeceptive"),severity:i(e.result_type),alertDetails:e.features,message:t(a[e.reason]||a.other),provider:s.SecurityProvider.Blockaid,reportUrl:n}};var s=e("../../../../../shared/constants/security-provider"),o=e("../../../../helpers/constants/design-system");const a=n.REASON_TO_DESCRIPTION_TKEY=Object.freeze({[s.BlockaidReason.approvalFarming]:"blockaidDescriptionApproveFarming",[s.BlockaidReason.permitFarming]:"blockaidDescriptionApproveFarming",[s.BlockaidReason.setApprovalForAll]:"blockaidDescriptionApproveFarming",[s.BlockaidReason.blurFarming]:"blockaidDescriptionBlurFarming",[s.BlockaidReason.errored]:"blockaidDescriptionErrored",[s.BlockaidReason.seaportFarming]:"blockaidDescriptionSeaportFarming",[s.BlockaidReason.maliciousDomain]:"blockaidDescriptionMaliciousDomain",[s.BlockaidReason.rawSignatureFarming]:"blockaidDescriptionMightLoseAssets",[s.BlockaidReason.tradeOrderFarming]:"blockaidDescriptionMightLoseAssets",[s.BlockaidReason.rawNativeTokenTransfer]:"blockaidDescriptionTransferFarming",[s.BlockaidReason.transferFarming]:"blockaidDescriptionTransferFarming",[s.BlockaidReason.transferFromFarming]:"blockaidDescriptionTransferFarming",[s.BlockaidReason.other]:"blockaidDescriptionMightLoseAssets"}),r=n.REASON_TO_TITLE_TKEY=Object.freeze({[s.BlockaidReason.errored]:"blockaidTitleMayNotBeSafe",[s.BlockaidReason.rawSignatureFarming]:"blockaidTitleSuspicious"});function i(e){switch(e){case s.BlockaidResultType.Malicious:return o.Severity.Danger;case s.BlockaidResultType.Warning:return o.Severity.Warning;default:return o.Severity.Info}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/alerts/utils.ts"}],[7486,{"../../../../../shared/modules/selectors":5751,"../../../../hooks/useAsync":7029,"../../../../store/actions":7916,"../../context/confirm":7449,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGaslessSupportedSmartTransactions=function(){const{currentConfirmation:e}=(0,i.useConfirmContext)(),{chainId:t}=e??{},n=(0,s.useSelector)(e=>(0,o.getIsSmartTransaction)(e,t)),{value:c,pending:u}=(0,a.useAsyncResult)(async()=>!!t&&(0,r.isSendBundleSupported)(t),[t]);return{isSmartTransaction:Boolean(n),isSupported:Boolean(n&&c),pending:u}};var s=e("react-redux"),o=e("../../../../../shared/modules/selectors"),a=e("../../../../hooks/useAsync"),r=e("../../../../store/actions"),i=e("../../context/confirm")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/gas/useGaslessSupportedSmartTransactions.ts"}],[7487,{"../../../../selectors":7886,"../../context/confirm":7449,"../useIsInsufficientBalance":7551,"./useIsGaslessSupported":7488,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsGaslessLoading=function(){const{currentConfirmation:e}=(0,o.useConfirmContext)(),{gasFeeTokens:t}=e??{},{isSupported:n}=(0,i.useIsGaslessSupported)(),c=(0,s.useSelector)(a.getUseTransactionSimulations),u=(0,r.useIsInsufficientBalance)();return{isGaslessLoading:c&&n&&u&&!t}};var s=e("react-redux"),o=e("../../context/confirm"),a=e("../../../../selectors"),r=e("../useIsInsufficientBalance"),i=e("./useIsGaslessSupported")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/gas/useIsGaslessLoading.ts"}],[7488,{"../../../../hooks/useAsync":7029,"../../../../store/actions":7916,"../../context/confirm":7449,"./useGaslessSupportedSmartTransactions":7486},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsGaslessSupported=function(){var e;const{currentConfirmation:t}=(0,o.useConfirmContext)(),{chainId:n}=t??{},{isSmartTransaction:i,isSupported:c,pending:u}=(0,r.useGaslessSupportedSmartTransactions)(),l=!u&&!c,{value:d}=(0,s.useAsyncResult)(async()=>l?(0,a.isRelaySupported)(n):undefined,[n,l]),m=Boolean(d&&(null==t||null===(e=t.txParams)||void 0===e?void 0:e.to)!==undefined);return{isSupported:Boolean(c||m),isSmartTransaction:i}};var s=e("../../../../hooks/useAsync"),o=e("../../context/confirm"),a=e("../../../../store/actions"),r=e("./useGaslessSupportedSmartTransactions")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/gas/useIsGaslessSupported.ts"}],[7489,{"../../../../../../shared/constants/metametrics":5613,"../../../../../contexts/metametrics":6855,"../../../context/send":7452,"../../../context/send-metrics":7451,"../useSendType":7511,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAmountSelectionMetrics=void 0;var s=e("react"),o=e("../../../../../../shared/constants/metametrics"),a=e("../../../../../contexts/metametrics"),r=e("../../../context/send"),i=e("../../../context/send-metrics"),c=e("../useSendType");n.useAmountSelectionMetrics=()=>{const e=(0,s.useContext)(a.MetaMetricsContext),{chainId:t}=(0,r.useSendContext)(),{isEvmSendType:n}=(0,c.useSendType)(),{accountType:u,amountInputMethod:l,amountInputType:d,setAmountInputMethod:m,setAmountInputType:p}=(0,i.useSendMetricsContext)(),f=(0,s.useCallback)(()=>{m(i.AmountInputMethod.Manual)},[m]),h=(0,s.useCallback)(()=>{m(i.AmountInputMethod.Pasted)},[m]),g=(0,s.useCallback)(()=>{m(i.AmountInputMethod.PressedMax)},[m]),v=(0,s.useCallback)(()=>{p(i.AmountInputType.Fiat)},[p]),T=(0,s.useCallback)(()=>{p(i.AmountInputType.Token)},[p]);return{captureAmountSelected:(0,s.useCallback)(()=>{e({event:o.MetaMetricsEventName.SendAmountSelected,category:o.MetaMetricsEventCategory.Send,properties:{account_type:u,input_method:l,input_type:d,chain_id:n?t:undefined,chain_id_caip:n?undefined:t}},{excludeMetaMetricsId:!1})},[u,l,d,t,n,e]),setAmountInputMethodManual:f,setAmountInputMethodPasted:h,setAmountInputMethodPressedMax:g,setAmountInputTypeFiat:v,setAmountInputTypeToken:T}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/metrics/useAmountSelectionMetrics.ts"}],[7490,{"../../../../../../shared/constants/metametrics":5613,"../../../../../contexts/metametrics":6855,"../../../context/send-metrics":7451,"../useSendAssets":7506,"ethers/lib/utils":4176,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAssetSelectionMetrics=void 0;var s=e("react"),o=e("ethers/lib/utils"),a=e("../../../../../../shared/constants/metametrics"),r=e("../../../../../contexts/metametrics"),i=e("../../../context/send-metrics"),c=e("../useSendAssets");const u="nft",l="native",d="token";n.useAssetSelectionMetrics=()=>{const e=(0,s.useContext)(r.MetaMetricsContext),{tokens:t,nfts:n}=(0,c.useSendAssets)(),{accountType:m,assetFilterMethod:p,assetListSize:f,setAssetFilterMethod:h,setAssetListSize:g}=(0,i.useSendMetricsContext)(),v=(0,s.useCallback)(e=>{const t=new Set([...p,e]),n=Array.from(t).filter(e=>e!==i.AssetFilterMethod.None);h(n)},[h,p]),T=(0,s.useCallback)(e=>{const t=p.filter(t=>t!==e);0===t.length&&t.push(i.AssetFilterMethod.None),h(t)},[h,p]);return{addAssetFilterMethod:v,captureAssetSelected:(0,s.useCallback)(s=>{let r=d;null!=s&&s.tokenId?r=u:"isNative"in s&&null!=s&&s.isNative&&(r=l);const i=(null==s?void 0:s.address)||(null==s?void 0:s.assetId),c=(0,o.isAddress)(i),h=[...t,...n].findIndex(e=>s.tokenId?e.address===s.address&&e.chainId===s.chainId&&e.tokenId===s.tokenId:s.isNative?e.isNative===s.isNative&&e.chainId===s.chainId:e.address===s.address&&e.chainId===s.chainId)+1;e({event:a.MetaMetricsEventName.SendAssetSelected,category:a.MetaMetricsEventCategory.Send,properties:{account_type:m,asset_type:r,asset_list_position:h,asset_list_size:f,chain_id:null==s?void 0:s.chainId,chain_id_caip:c?`eip155:${parseInt(null==s?void 0:s.chainId,16)}`:null==s?void 0:s.chainId,filter_method:p}},{excludeMetaMetricsId:!1})},[m,p,f,e,t,n]),removeAssetFilterMethod:T,setAssetListSize:g}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/metrics/useAssetSelectionMetrics.ts"}],[7491,{"../../../../../../shared/constants/metametrics":5613,"../../../../../contexts/metametrics":6855,"../../../context/send":7452,"../../../context/send-metrics":7451,"../useSendType":7511,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRecipientSelectionMetrics=void 0;var s=e("react"),o=e("../../../../../../shared/constants/metametrics"),a=e("../../../../../contexts/metametrics"),r=e("../../../context/send-metrics"),i=e("../../../context/send"),c=e("../useSendType");n.useRecipientSelectionMetrics=()=>{const e=(0,s.useContext)(a.MetaMetricsContext),{chainId:t}=(0,i.useSendContext)(),{isEvmSendType:n}=(0,c.useSendType)(),{accountType:u,recipientInputMethod:l,setRecipientInputMethod:d}=(0,r.useSendMetricsContext)(),m=(0,s.useCallback)(()=>{d(r.RecipientInputMethod.Manual)},[d]),p=(0,s.useCallback)(()=>{d(r.RecipientInputMethod.Pasted)},[d]),f=(0,s.useCallback)(()=>{d(r.RecipientInputMethod.SelectAccount)},[d]),h=(0,s.useCallback)(()=>{d(r.RecipientInputMethod.SelectContact)},[d]);return{captureRecipientSelected:(0,s.useCallback)(async()=>{e({event:o.MetaMetricsEventName.SendRecipientSelected,category:o.MetaMetricsEventCategory.Send,properties:{account_type:u,input_method:l,chain_id:t,chain_id_caip:n?`eip155:${parseInt(t,16)}`:t}},{excludeMetaMetricsId:!1})},[u,t,n,l,e]),setRecipientInputMethodManual:m,setRecipientInputMethodPasted:p,setRecipientInputMethodSelectAccount:f,setRecipientInputMethodSelectContact:h}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/metrics/useRecipientSelectionMetrics.ts"}],[7492,{"../../../../selectors/multichain-accounts/account-tree":7890,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountAddressSeedIconMap=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../../selectors/multichain-accounts/account-tree");n.useAccountAddressSeedIconMap=()=>{const e=(0,o.useSelector)(a.getAccountGroupWithInternalAccounts);return{accountAddressSeedIconMap:(0,s.useMemo)(()=>{const t=new Map;return e.forEach(e=>{const{accounts:n}=e;if(0===n.length)return;const s=n[0].address;n.forEach(e=>{t.set(e.address.toLowerCase(),s)})}),t},[e])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useAccountAddressSeedIconMap.ts"}],[7493,{"../../../../selectors/multichain-accounts/account-tree":7890,"../../context/send":7452,"../../utils/account":7583,"./useAccountAddressSeedIconMap":7492,"./useSendType":7511,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAccountRecipients=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../../selectors/multichain-accounts/account-tree"),r=e("../../utils/account"),i=e("../../context/send"),c=e("./useSendType"),u=e("./useAccountAddressSeedIconMap");n.useAccountRecipients=()=>{const{isEvmSendType:e,isSolanaSendType:t,isBitcoinSendType:n,isTronSendType:l}=(0,c.useSendType)(),{from:d}=(0,i.useSendContext)(),{accountAddressSeedIconMap:m}=(0,u.useAccountAddressSeedIconMap)(),p=(0,o.useSelector)(a.getWalletsWithAccounts);return(0,s.useMemo)(()=>{const s=[];return Object.values(p).forEach(o=>{var a;const i=null===(a=o.metadata)||void 0===a?void 0:a.name;Object.values(o.groups).forEach(o=>{var a;const c=null===(a=o.metadata)||void 0===a?void 0:a.name;o.accounts.forEach(o=>{if(o.address===d)return;(e&&(0,r.isEVMAccountForSend)(o)||t&&(0,r.isSolanaAccountForSend)(o)||n&&(0,r.isBitcoinAccountForSend)(o)||l&&(0,r.isTronAccountForSend)(o))&&s.push({seedIcon:m.get(o.address.toLowerCase()),accountGroupName:c,accountType:o.type,address:o.address,walletName:i})})})}),s},[d,e,t,n,l,m,p])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useAccountRecipients.ts"}],[7494,{"../../../../hooks/useI18nContext":7047,"../../context/send":7452,"../../types/send":7582,"../../utils/send":7588,"./useBalance":7495,"./useSendType":7511,"./useSnapAmountOnInput":7512,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAmountValidation=void 0,n.validateERC1155Balance=d,n.validatePositiveNumericString=p,n.validateTokenBalance=m;var s=e("react"),o=e("../../../../hooks/useI18nContext"),a=e("../../utils/send"),r=e("../../context/send"),i=e("../../types/send"),c=e("./useSendType"),u=e("./useSnapAmountOnInput"),l=e("./useBalance");function d(e,t,n){if((null==e?void 0:e.standard)!==i.AssetStandard.ERC1155)return undefined;if(null!=e&&e.balance&&t){if(parseInt(t,10)>parseInt(e.balance.toString(),10))return n("insufficientFundsSend")}return undefined}function m(e,t,n,s){const o=(0,a.fromTokenMinUnitsNumeric)(e,10,n);return t.lessThan(o)?s("insufficientFundsSend"):undefined}function p(e,t){return(0,a.isValidPositiveNumericString)(e)?undefined:t("invalidValue")}n.useAmountValidation=()=>{const e=(0,o.useI18nContext)(),{isNonEvmSendType:t}=(0,c.useSendType)(),{asset:n,value:a}=(0,r.useSendContext)(),{validateAmountWithSnap:i}=(0,u.useSnapAmountOnInput)(),{rawBalanceNumeric:f}=(0,l.useBalance)(),[h,g]=(0,s.useState)(undefined),v=(0,s.useCallback)(e=>(g(e),e),[]),T=(0,s.useCallback)(async()=>{if(!t)return undefined;if(f.isZero())return e("insufficientFundsSend");try{var n;const t=await i(a||"0");return(null===(n=t.errors)||void 0===n?void 0:n.length)>0?function(e,t){if("InsufficientBalance"===e)return t("insufficientFundsSend");return t("invalidValue")}(t.errors[0].code,e):undefined}catch(t){return e("invalidValue")}},[e,a,i,t,f]),y=(0,s.useCallback)(async()=>{if(!a)return v(undefined);const t=[()=>p(a,e),()=>d(n,a,e),()=>m(a,f,null==n?void 0:n.decimals,e),T];for(const e of t){const t=await Promise.resolve(e());if(t)return v(t)}return v(undefined)},[n,f,e,a,T,v]),k=(0,s.useCallback)(async()=>{const e=await T();return v(e)},[T,v]);return(0,s.useEffect)(()=>{y()},[y]),{amountError:h,validateNonEvmAmountAsync:k}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useAmountValidation.ts"}],[7495,{"../../../../../shared/modules/Numeric":5727,"../../context/send":7452,"../../utils/send":7588,"@metamask/controller-utils":1383,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBalance=void 0;var s=e("@metamask/controller-utils"),o=e("react"),a=e("../../../../../shared/modules/Numeric"),r=e("../../utils/send"),i=e("../../context/send");n.useBalance=()=>{const{asset:e}=(0,i.useSendContext)(),{balance:t,decimals:n,rawBalanceNumeric:c}=(0,o.useMemo)(()=>{if((null==e?void 0:e.standard)===s.ERC1155){const t=(null==e?void 0:e.balance)??"0";return{balance:t,decimals:0,rawBalanceNumeric:new a.Numeric(t,10)}}return(e=>{if(!e)return{balance:"0",decimals:0,rawBalanceNumeric:new a.Numeric("0",10)};const t=(null==e?void 0:e.rawBalance)??"0x0";return{balance:(0,r.formatToFixedDecimals)((0,r.toTokenMinimalUnit)(t,e.decimals),e.decimals),decimals:e.decimals,rawBalanceNumeric:new a.Numeric(t,16).toBase(10)}})(e)},[e]);return{balance:t,decimals:n,rawBalanceNumeric:c}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useBalance.ts"}],[7496,{"../../../../selectors":7886,"../../context/send":7452,"./useAccountAddressSeedIconMap":7492,"./useSendType":7511,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useContactRecipients=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../../selectors"),r=e("../../context/send"),i=e("./useSendType"),c=e("./useAccountAddressSeedIconMap");n.useContactRecipients=()=>{const{isEvmSendType:e}=(0,i.useSendType)(),t=(0,o.useSelector)(a.getCompleteAddressBook),{accountAddressSeedIconMap:n}=(0,c.useAccountAddressSeedIconMap)(),{chainId:u}=(0,r.useSendContext)();return(0,s.useMemo)(()=>{var s;return e?(null==t||null===(s=t.filter(e=>e.chainId===u))||void 0===s?void 0:s.map(e=>({address:e.address,contactName:e.name,isContact:!0,seedIcon:n.get(e.address.toLowerCase())})))??[]:[]},[t,u,e])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useContactRecipients.ts"}],[7497,{"../../../../helpers/utils/common.util":6926,"../../../../hooks/useMultichainSelector":7057,"../../../../selectors":7886,"../../../../selectors/multichain":7895,"../../context/send":7452,"../../utils/send":7588,"@metamask/controller-utils":1383,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useCurrencyConversions=void 0;var s=e("@metamask/controller-utils"),o=e("react"),a=e("react-redux"),r=e("../../../../selectors"),i=e("../../../../helpers/utils/common.util"),c=e("../../../../selectors/multichain"),u=e("../../../../hooks/useMultichainSelector"),l=e("../../utils/send"),d=e("../../context/send");const m=({amount:e,conversionRate:t})=>e?(0,l.convertedCurrency)(e,t,2)??"0":"0";n.useCurrencyConversions=()=>{const{asset:e,fromAccount:t}=(0,d.useSendContext)(),n=(0,u.useMultichainSelector)(c.getMultichainCurrentCurrency,t),p=(0,a.useSelector)(r.getCrossChainTokenExchangeRates),f=(0,o.useMemo)(()=>{var t;return e?(null===(t=Object.values(p).find(t=>t[e.address]!==undefined))||void 0===t?void 0:t[e.address])??1:1},[e,p]),h=(0,o.useMemo)(()=>{var t;const n=(null==e?void 0:e.address)??(null==e?void 0:e.assetId);return e&&n&&e.standard!==s.ERC1155&&e.standard!==s.ERC721?((null==e||null===(t=e.fiat)||void 0===t?void 0:t.conversionRate)??0)*f:0},[e,f]),g=(0,o.useCallback)(e=>m({amount:e,conversionRate:h}),[h]),v=(0,o.useCallback)(e=>(({amount:e,conversionRate:t,currentCurrency:n})=>{if(!e)return`${(0,i.getCurrencySymbol)(n)}0.00`;const s=e?(0,l.formatToFixedDecimals)(m({amount:e,conversionRate:t}),2,!1):"0.00";return`${(0,i.getCurrencySymbol)(n)}${s}`})({amount:e,conversionRate:h,currentCurrency:n}),[h,n]),T=(0,o.useCallback)(t=>(({asset:e,amount:t,conversionRate:n})=>t?(0,l.convertedCurrency)(t,0===n?0:1/n,null==e?void 0:e.decimals)??"0":"0")({asset:e,amount:t,conversionRate:h}),[e,h]);return{conversionSupportedForAsset:0!==h&&(null==e?void 0:e.standard)!==s.ERC1155&&(null==e?void 0:e.standard)!==s.ERC721,fiatCurrencySymbol:(0,i.getCurrencySymbol)(n),fiatCurrencyName:n,getFiatValue:g,getFiatDisplayValue:v,getNativeValue:T}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useCurrencyConversions.ts"}],[7498,{"../../../../store/actions":7916,"../../types/send":7582,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useERC1155BalanceChecker=void 0;var s=e("react"),o=e("../../../../store/actions"),a=e("../../types/send");n.useERC1155BalanceChecker=()=>({fetchBalanceForNft:(0,s.useCallback)(async e=>{if(e.standard!==a.AssetStandard.ERC1155)return null;try{const t=await(0,o.findNetworkClientIdByChainId)(e.chainId),n=await(0,o.getERC1155BalanceOf)(e.accountAddress,e.address,e.tokenId,t);return{nft:e,balance:Number(n)}}catch(e){return console.error("Error fetching ERC1155 balance:",e),null}},[])})}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useERC1155BalanceChecker.ts"}],[7499,{"../../../../../shared/modules/Numeric":5727,"../../../../ducks/metamask/metamask":6883,"../../../../hooks/useAsync":7029,"../../context/send":7452,"../../utils/send":7588,"./useBalance":7495,"./useSendType":7511,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMaxAmount=n.getEstimatedTotalGas=void 0;var s=e("@metamask/transaction-controller"),o=e("react"),a=e("react-redux"),r=e("../../../../../shared/modules/Numeric"),i=e("../../../../ducks/metamask/metamask"),c=e("../../../../hooks/useAsync"),u=e("../../utils/send"),l=e("../../context/send"),d=e("./useBalance"),m=e("./useSendType");const p=(e,t)=>{if(!t)return new r.Numeric("0",10);const{medium:{suggestedMaxFeePerGas:n}={suggestedMaxFeePerGas:0}}=t,s=new r.Numeric(21e3*n,10),o=new r.Numeric(1e9,10);return s.times(o).add(new r.Numeric(e,16))};n.getEstimatedTotalGas=p;n.useMaxAmount=()=>{const{asset:e,chainId:t,from:n,value:f}=(0,l.useSendContext)(),{isEvmSendType:h,isEvmNativeSendType:g}=(0,m.useSendType)(),{rawBalanceNumeric:v}=(0,d.useBalance)(),T=(0,a.useSelector)(e=>t&&h?(0,i.getGasFeeEstimatesByChainId)(e,t):undefined),{value:y}=(0,c.useAsyncResult)(async()=>g&&(null==e?void 0:e.chainId)!==s.CHAIN_IDS.MAINNET&&n?await(0,u.getLayer1GasFees)({asset:e,chainId:t,from:n,value:f??"0"}):"0x0",[e,t,n,f]),k=(0,o.useCallback)(()=>(({asset:e,layer1GasFees:t,gasFeeEstimates:n,isEvmNativeSendType:s,rawBalanceNumeric:o})=>{if(!e)return"0";let a=new r.Numeric("0",10);s&&(a=p(t,n));const i=o.minus(a);return i.isZero()||i.isNegative()?"0":(0,u.toTokenMinimalUnit)(i.toString(),e.decimals,10)})({asset:e,gasFeeEstimates:T,isEvmNativeSendType:g,layer1GasFees:y??"0x0",rawBalanceNumeric:v}),[e,T,g,y,v]);return{getMaxAmount:k}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useMaxAmount.ts"}],[7500,{"../../../../ducks/domains":6877,"../../../../helpers/utils/util":6959,"../../../../hooks/snaps/useSnapNameResolution":7018,"../../utils/sendValidations":7589,"./useSendType":7511,"@metamask/bridge-controller":1304,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNameValidation=void 0;var s=e("@metamask/bridge-controller"),o=e("react-redux"),a=e("react"),r=e("../../../../helpers/utils/util"),i=e("../../../../hooks/snaps/useSnapNameResolution"),c=e("../../utils/sendValidations"),u=e("../../../../ducks/domains"),l=e("./useSendType");n.useNameValidation=()=>{const{fetchResolutions:e}=(0,i.useSnapNameResolution)(),t=(0,o.useDispatch)(),{isEvmSendType:n}=(0,l.useSendType)();return{validateName:(0,a.useCallback)(async(o,a)=>{if((0,r.isValidDomainName)(a)){var i,l;const r=await e((0,s.formatChainIdToCaip)(o),a);if(0===r.length)return{error:"nameResolutionFailedError"};const d=null===(i=r[0])||void 0===i?void 0:i.resolvedAddress,m=null===(l=r[0])||void 0===l?void 0:l.protocol;return n&&t((0,u.lookupDomainName)(a,o)),{resolvedLookup:d,protocol:m,...(0,c.findConfusablesInRecipient)(a)}}return{error:"nameResolutionFailedError"}},[t,e])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useNameValidation.ts"}],[7501,{"../../../../helpers/constants/routes":6904,"../../constants/send":7447,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNavigateSendPage=void 0;var s=e("react"),o=e("react-router-dom-v5-compat"),a=e("../../../../helpers/constants/routes"),r=e("../../constants/send");n.useNavigateSendPage=()=>{const e=(0,o.useNavigate)(),[t]=(0,o.useSearchParams)();return{goToAmountRecipientPage:(0,s.useCallback)(()=>{e(`${a.SEND_ROUTE}/${r.SendPages.AMOUNTRECIPIENT}?${t.toString()}`)},[t,e]),goToPreviousPage:(0,s.useCallback)(()=>{e(-1)},[e])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useNavigateSendPage.ts"}],[7502,{"../../../../../shared/lib/multichain/accounts":5704,"../../../../../shared/modules/hexstring-utils":5741,"../../../../helpers/utils/util":6959,"../../../../hooks/useI18nContext":7047,"../../context/send":7452,"../../utils/sendValidations":7589,"./useNameValidation":7500,"./useSendType":7511,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRecipientValidation=void 0;var s=e("react"),o=e("../../../../../shared/lib/multichain/accounts"),a=e("../../../../../shared/modules/hexstring-utils"),r=e("../../../../helpers/utils/util"),i=e("../../../../hooks/useI18nContext"),c=e("../../utils/sendValidations"),u=e("../../context/send"),l=e("./useSendType"),d=e("./useNameValidation");n.useRecipientValidation=()=>{const e=(0,i.useI18nContext)(),{asset:t,chainId:n,to:m}=(0,u.useSendContext)(),{isBitcoinSendType:p,isEvmSendType:f,isSolanaSendType:h,isTronSendType:g}=(0,l.useSendType)(),{validateName:v}=(0,d.useNameValidation)(),[T,y]=(0,s.useState)({}),k=(0,s.useRef)(),S=(0,s.useRef)(!1);(0,s.useEffect)(()=>()=>{S.current=!0},[]);const C=(0,s.useCallback)(async e=>e&&n?f&&(0,a.isValidHexAddress)(e)?await(0,c.validateEvmHexAddress)(e,n,null==t?void 0:t.address):h&&(0,o.isSolanaAddress)(e)?(0,c.validateSolanaAddress)(e):p&&(0,o.isBtcMainnetAddress)(e)?(0,c.validateBtcAddress)(e):g&&(0,o.isTronAddress)(e)?(0,c.validateTronAddress)(e):(0,r.isValidDomainName)(e)?await v(n,e):{error:"invalidAddress"}:{},[t,n,p,f,h,g,v]);return(0,s.useEffect)(()=>{k.current!==m&&(async()=>{k.current=m;const e=await C(m);S.current||k.current!==m||y({...e,toAddressValidated:m})})()},[y,m,C]),{recipientConfusableCharacters:null==T?void 0:T.confusableCharacters,recipientError:null!=T&&T.error?e(null==T?void 0:T.error):undefined,recipientResolvedLookup:null==T?void 0:T.resolvedLookup,recipientWarning:null!=T&&T.warning?e(null==T?void 0:T.warning):undefined,resolutionProtocol:null==T?void 0:T.protocol,toAddressValidated:null==T?void 0:T.toAddressValidated}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useRecipientValidation.ts"}],[7503,{"./useAccountRecipients":7493,"./useContactRecipients":7496},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRecipients=void 0;var s=e("./useContactRecipients"),o=e("./useAccountRecipients");n.useRecipients=()=>{const e=(0,o.useAccountRecipients)(),t=(0,s.useContactRecipients)(),n=[...e];return t.forEach(e=>{n.some(t=>t.address.toLowerCase()===e.address.toLowerCase())||n.push(e)}),n}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useRecipients.ts"}],[7504,{"../../../../helpers/constants/routes":6904,"../../../../store/actions":7916,"../../constants/send":7447,"../../context/send":7452,"../../utils/multichain-snaps":7586,"../../utils/send":7588,"./useSendType":7511,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendActions=void 0;var s=e("react"),o=e("react-redux"),a=e("react-router-dom-v5-compat"),r=e("../../../../helpers/constants/routes"),i=e("../../../../store/actions"),c=e("../../constants/send"),u=e("../../utils/multichain-snaps"),l=e("../../utils/send"),d=e("../../context/send"),m=e("./useSendType");n.useSendActions=()=>{const e=(0,o.useDispatch)(),t=(0,a.useNavigate)(),{asset:n,chainId:p,from:f,fromAccount:h,hexData:g,maxValueMode:v,toResolved:T,value:y}=(0,d.useSendContext)(),{isEvmSendType:k}=(0,m.useSendType)(),S=(0,s.useCallback)(async()=>{if(!n)return;const s=T;if(k){e(await(0,l.submitEvmTransaction)({asset:n,chainId:p,from:f,hexData:g,to:s,value:y}));const o=v?`${r.CONFIRM_TRANSACTION_ROUTE}?maxValueMode=${v}`:r.CONFIRM_TRANSACTION_ROUTE;t(o)}else{t(`${r.SEND_ROUTE}/${c.SendPages.LOADER}`),await e((0,i.setDefaultHomeActiveTabName)("activity"));try{await(0,u.sendMultichainTransactionForReview)(h,{fromAccountId:null==h?void 0:h.id,toAddress:s,assetId:n.assetId,amount:(0,l.addLeadingZeroIfNeeded)(y||"0")}),t(r.DEFAULT_ROUTE)}catch(e){}}},[n,p,e,f,h,g,t,k,v,T,y]),C=(0,s.useCallback)(()=>{t(-1)},[t]);return{handleSubmit:S,handleCancel:(0,s.useCallback)(()=>{t(r.DEFAULT_ROUTE)},[t]),handleBack:C}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useSendActions.ts"}],[7505,{react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendAssetFilter=void 0;var s=e("react");function o(e,t){var n,s,o;if(!t.trim())return!0;const a=t.toLowerCase().trim();return!(null===(n=e.name)||void 0===n||!n.toLowerCase().includes(a))||(!(null===(s=e.symbol)||void 0===s||!s.toLowerCase().includes(a))||!(null===(o=e.collection)||void 0===o||null===(o=o.name)||void 0===o||!o.toLowerCase().includes(a)))}n.useSendAssetFilter=({tokens:e,nfts:t,selectedChainId:n,searchQuery:a=""})=>(0,s.useMemo)(()=>{let s=e,r=t;null!==n&&(s=e.filter(e=>e.chainId===n),r=t.filter(e=>e.chainId===n));return{filteredTokens:s.filter(e=>o(e,a)),filteredNfts:r.filter(e=>o(e,a))}},[e,t,n,a])}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useSendAssetFilter.ts"}],[7506,{"./useSendNfts":7507,"./useSendTokens":7510,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendAssets=void 0;var s=e("react"),o=e("./useSendTokens"),a=e("./useSendNfts");n.useSendAssets=()=>{const e=(0,o.useSendTokens)(),t=(0,a.useSendNfts)();return(0,s.useMemo)(()=>({tokens:e,nfts:t}),[e,t])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useSendAssets.ts"}],[7507,{"../../../../selectors/multichain-accounts/account-tree":7890,"../../../../selectors/nft":7898,"../../types/send":7582,"../useChainNetworkNameAndImage":7529,"./useERC1155BalanceChecker":7498,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendNfts=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../../selectors/nft"),r=e("../../../../selectors/multichain-accounts/account-tree"),i=e("../../types/send"),c=e("../useChainNetworkNameAndImage"),u=e("./useERC1155BalanceChecker");n.useSendNfts=()=>{const e=(0,c.useChainNetworkNameAndImageMap)(),t=(0,o.useSelector)(a.getNftsByChainByAccount),[n,l]=(0,s.useState)([]),{fetchBalanceForNft:d}=(0,u.useERC1155BalanceChecker)(),m=(0,o.useSelector)(r.getSelectedAccountGroup),p=(0,o.useSelector)(r.getAccountGroupWithInternalAccounts),f=(0,s.useMemo)(()=>{var n;const s=null==p||null===(n=p.find(e=>e.id===m))||void 0===n?void 0:n.accounts;return function(e,t,n){const s=[];return Object.keys(e).forEach(o=>{const a=null==t?void 0:t.find(e=>e.address===o);a&&Object.keys(e[o]).forEach(t=>{e[o][t].forEach(e=>{const o=n.get(t);s.push({...e,accountId:a.id,accountAddress:a.address,chainId:t,networkImage:null==o?void 0:o.networkImage,networkName:null==o?void 0:o.networkName})})})}),s}(t,s,e)},[null==p?void 0:p.length,e,t,m]),h=(0,s.useCallback)(async e=>{const t=e.filter(e=>e.standard===i.AssetStandard.ERC1155);if(0===t.length)return e;const n=t.map(d),s=await Promise.allSettled(n),o=[...e];return s.forEach(e=>{if("fulfilled"===e.status&&e.value){const{nft:t,balance:n}=e.value,s=o.findIndex(e=>e.address===t.address&&e.tokenId===t.tokenId&&e.chainId===t.chainId&&e.accountId===t.accountId);-1!==s&&(o[s]={...o[s],balance:n})}}),o},[d]);return(0,s.useEffect)(()=>{let e=!1;return(async()=>{const t=(await h(f)).filter(e=>!0===e.isCurrentlyOwned);e||l(t)})(),()=>{e=!0}},[f,h]),n}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useSendNfts.ts"}],[7508,{"../../../../helpers/constants/routes":6904,"../../../../selectors/assets":7878,"../../constants/send":7447,"../../context/send":7452,"./useSendNfts":7507,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendQueryParams=void 0;var s=e("react"),o=e("react-router-dom-v5-compat"),a=e("react-redux"),r=e("../../../../helpers/constants/routes"),i=e("../../../../selectors/assets"),c=e("../../constants/send"),u=e("../../context/send"),l=e("./useSendNfts");n.useSendQueryParams=()=>{const{asset:e,currentPage:t,hexData:n,maxValueMode:d,to:m,updateValue:p,updateCurrentPage:f,updateAsset:h,updateHexData:g,updateTo:v,value:T}=(0,u.useSendContext)(),y=(0,o.useNavigate)(),{pathname:k}=(0,o.useLocation)(),[S]=(0,o.useSearchParams)(),C=(0,l.useSendNfts)(),A=(0,a.useSelector)(i.getAssetsBySelectedAccountGroup),w=(0,s.useMemo)(()=>Object.values(A).flat(),[A]),_=(0,s.useMemo)(()=>{const e=k.split("/").filter(Boolean)[1];return Object.values(c.SendPages).includes(e)?e:undefined},[k]),x=S.get("asset"),b=S.get("amount"),E=S.get("chainId"),I=S.get("tokenId"),P=S.get("hexData"),M=S.get("recipient"),R=S.get("maxValueMode");(0,s.useEffect)(()=>{t!==_&&f(_??c.SendPages.ASSET)},[t,_,f]),(0,s.useEffect)(()=>{if(!_)return;const t=new URLSearchParams(S);T!==undefined&&b!==T&&t.set("amount",T),(null==e?void 0:e.address)!==undefined&&x!==e.address&&t.set("asset",e.assetId??e.address),(null==e?void 0:e.chainId)!==undefined&&E!==e.chainId&&t.set("chainId",e.chainId.toString()),(null==e?void 0:e.tokenId)!==undefined&&I!==e.tokenId&&t.set("tokenId",e.tokenId),d!==undefined&&R!==`${d}`&&t.set("maxValueMode",d.toString()),n!==undefined&&P!==n&&t.set("hexData",n.toString()),m!==undefined&&M!==m&&t.set("recipient",m),y(`${r.SEND_ROUTE}/${_}?${t.toString()}`,{replace:!0})},[e,y,n,d,b,x,E,I,R,M,S,_,m,T]),(0,s.useEffect)(()=>{m===undefined&&M&&v(M)},[m,M,v]),(0,s.useEffect)(()=>{n===undefined&&P&&g(P)},[n,P,g]),(0,s.useEffect)(()=>{T===undefined&&b&&p(b,"true"===R)},[b,R,p,T]),(0,s.useEffect)(()=>{if(e||!E)return;let t=null==w?void 0:w.find(({assetId:e,chainId:t,isNative:n})=>E===t&&(x&&(null==e?void 0:e.toLowerCase())===x.toLowerCase()||!x&&n));t||(t=null==C?void 0:C.find(({address:e,chainId:t,isNative:n,tokenId:s})=>E===t&&I===s&&(x&&(null==e?void 0:e.toLowerCase())===x.toLowerCase()||!x&&n))),t&&h(t)},[e,w,x,E,I,C,h])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useSendQueryParams.ts"}],[7509,{react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendRecipientFilter=void 0;var s=e("react");function o(e,t){var n,s,o,a;if(!t.trim())return!0;const r=t.toLowerCase().trim();return!(null===(n=e.contactName)||void 0===n||!n.toLowerCase().includes(r))||(!(null===(s=e.accountGroupName)||void 0===s||!s.toLowerCase().includes(r))||(!(null===(o=e.walletName)||void 0===o||!o.toLowerCase().includes(r))||!(null===(a=e.address)||void 0===a||!a.toLowerCase().includes(r))))}n.useSendRecipientFilter=({contactRecipients:e,accountRecipients:t,searchQuery:n=""})=>(0,s.useMemo)(()=>{const s=t;return{filteredContactRecipients:e.filter(e=>o(e,n)),filteredAccountRecipients:s.filter(e=>o(e,n))}},[t,e,n])}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useSendRecipientFilter.ts"}],[7510,{"../../../../../shared/constants/network":5617,"../../../../selectors/assets":7878,"../../types/send":7582,"../useChainNetworkNameAndImage":7529,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendTokens=void 0;var s=e("react-redux"),o=e("react"),a=e("../../../../../shared/constants/network"),r=e("../../../../selectors/assets"),i=e("../../types/send"),c=e("../useChainNetworkNameAndImage");n.useSendTokens=()=>{const e=(0,c.useChainNetworkNameAndImageMap)(),t=(0,s.useSelector)(r.getAssetsBySelectedAccountGroup),n=(0,o.useMemo)(()=>Object.values(t).flat(),[t]),u=(0,o.useMemo)(()=>n.filter(e=>{const t="0x0"!==e.rawBalance;return e.isNative||t}),[n]),l=(0,o.useMemo)(()=>u.map(t=>{const n=e.get(t.chainId);let s;return s=t.isNative?a.CHAIN_ID_TOKEN_IMAGE_MAP[t.chainId]??a.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[t.chainId]:t.image,{...t,image:s,networkImage:null==n?void 0:n.networkImage,networkName:null==n?void 0:n.networkName,shortenedBalance:t.balance,standard:t.isNative?i.AssetStandard.Native:i.AssetStandard.ERC20}}),[u,e]);return(0,o.useMemo)(()=>l.sort((e,t)=>{var n,s;return((null===(n=t.fiat)||void 0===n?void 0:n.balance)??0)-((null===(s=e.fiat)||void 0===s?void 0:s.balance)??0)}),[l])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useSendTokens.ts"}],[7511,{"../../context/send":7452,"../../utils/network":7587,"@metamask/bridge-controller":1304,"ethers/lib/utils":4176,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSendType=void 0;var s=e("ethers/lib/utils"),o=e("@metamask/bridge-controller"),a=e("react"),r=e("../../context/send"),i=e("../../utils/network");n.useSendType=()=>{const{asset:e,chainId:t}=(0,r.useSendContext)(),n=(null==e?void 0:e.address)||(null==e?void 0:e.assetId),c=(0,a.useMemo)(()=>n&&null!=e&&e.chainId?(0,s.isAddress)(n)&&!(0,o.isSolanaChainId)(null==e?void 0:e.chainId):undefined,[n,null==e?void 0:e.chainId]),u=(0,a.useMemo)(()=>t?(0,o.isSolanaChainId)(t):undefined,[t]),l=(0,a.useMemo)(()=>t?(0,o.isBitcoinChainId)(t):undefined,[t]),d=(0,a.useMemo)(()=>t?(0,i.isTronChainId)(t):undefined,[t]),m=e?!0===(null==e?void 0:e.isNative):undefined;return(0,a.useMemo)(()=>({isBitcoinSendType:l,isEvmSendType:c,isEvmNativeSendType:c&&m,isNonEvmSendType:u||l||d,isNonEvmNativeSendType:u&&m||l&&m||d&&m,isSolanaSendType:u,isTronSendType:d}),[c,u,m,l,d])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useSendType.ts"}],[7512,{"../../context/send":7452,"../../utils/multichain-snaps":7586,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSnapAmountOnInput=void 0;var s=e("react"),o=e("../../context/send"),a=e("../../utils/multichain-snaps");n.useSnapAmountOnInput=()=>{const{asset:e,fromAccount:t,value:n}=(0,o.useSendContext)();return{validateAmountWithSnap:(0,s.useCallback)(async n=>await(0,a.validateAmountMultichain)(t,{value:n,accountId:t.id,assetId:null==e?void 0:e.assetId}),[t,n,e])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/send/useSnapAmountOnInput.ts"}],[7513,{"../../../../../store/actions":7916,"../../../context/confirm":7449,"../../../context/dapp-swap":7450,"./useDappSwapComparisonMetrics":7517,"@metamask/controller-utils":1383,"@metamask/transaction-controller":2868,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDappSwapActions=function(){var e;const{currentConfirmation:t}=(0,i.useConfirmContext)(),{isQuotedSwapDisplayedInInfo:n,selectedQuote:l}=(0,c.useDappSwapContext)(),{captureSwapSubmit:d}=(0,u.useDappSwapComparisonMetrics)(),m=(0,a.useCallback)(e=>{if(d(),!n)return;const{value:t,gasLimit:a,data:r,to:i}=null==l?void 0:l.trade;if(e.txParams={...e.txParams,value:t,to:i,gas:(0,o.toHex)(a??0),data:r},null!=l&&l.approval){const{data:t,to:n,gasLimit:a,value:r}=null==l?void 0:l.approval;e.batchTransactions=[{data:t,to:n,gas:(0,o.toHex)(a??0),value:r,type:s.TransactionType.swapApproval,isAfter:!1,maxFeePerGas:e.txParams.maxFeePerGas,maxPriorityFeePerGas:e.txParams.maxPriorityFeePerGas}]}e.batchTransactionsOptions={},e.nestedTransactions=undefined},[d,n,l]),p=(0,a.useCallback)(()=>{var e;const n=null===(e=t.securityAlertResponse)||void 0===e?void 0:e.securityAlertId;n&&(0,r.deleteDappSwapComparisonData)(n)},[null==t||null===(e=t.securityAlertResponse)||void 0===e?void 0:e.securityAlertId]);return{updateSwapWithQuoteDetails:m,onDappSwapCompleted:p}};var s=e("@metamask/transaction-controller"),o=e("@metamask/controller-utils"),a=e("react"),r=e("../../../../../store/actions"),i=e("../../../context/confirm"),c=e("../../../context/dapp-swap"),u=e("./useDappSwapComparisonMetrics")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/dapp-swap-comparison/useDappSwapActions.ts"}],[7514,{"../../../context/confirm":7449,"@metamask/transaction-controller":2868,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDappSwapCheck=function(){const{currentConfirmation:e}=(0,a.useConfirmContext)(),{origin:t,type:n}=e??{txParams:{data:""}};return{isSwapToBeCompared:(0,o.useMemo)(()=>!(t!==r&&t!==i||n!==s.TransactionType.contractInteraction&&n!==s.TransactionType.batch),[t,n])}};var s=e("@metamask/transaction-controller"),o=e("react"),a=e("../../../context/confirm");const r="https://app.uniswap.org",i="https://metamask.github.io"}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/dapp-swap-comparison/useDappSwapCheck.ts"}],[7515,{"../../../../../../shared/lib/sentry":5711,"../../../../../../shared/modules/dapp-swap-comparison/dapp-swap-comparison-utils":5734,"../../../../../selectors/remote-feature-flags":7900,"../../../context/confirm":7449,"../../../selectors/confirm":7571,"../../../utils/token":7590,"./useDappSwapComparisonLatencyMetrics":7516,"./useDappSwapComparisonMetrics":7517,"./useDappSwapUSDValues":7519,"bignumber.js":3768,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDappSwapComparisonInfo=function(){var e;const{dappSwapQa:t}=(0,a.useSelector)(c.getRemoteFeatureFlags),{currentConfirmation:n}=(0,d.useConfirmContext)(),{quotes:g,latency:v,commands:T,error:y,tokenAddresses:k}=(0,a.useSelector)(e=>{var t;return(0,l.selectDappSwapComparisonData)(e,(null==n||null===(t=n.securityAlertResponse)||void 0===t?void 0:t.securityAlertId)??"")})??{quotes:undefined},{chainId:S,gasUsed:C,gasLimitNoBuffer:A,simulationData:w,txParams:_,nestedTransactions:x}=n??{txParams:{}},{data:b,gas:E}=_??{},{requestDetectionLatency:I,updateRequestDetectionLatency:P,updateSwapComparisonLatency:M}=(0,m.useDappSwapComparisonLatencyMetrics)(),{captureDappSwapComparisonFailed:R,captureDappSwapComparisonLoading:N,captureDappSwapComparisonMetricsProperties:O}=(0,f.useDappSwapComparisonMetrics)();(0,o.useEffect)(()=>{y&&R(y,T)},[R,y,T]);const{commands:D,quotesInput:F,amountMin:B}=(0,o.useMemo)(()=>{let e="";try{let s=b;var t;if(null!=x&&x.length)s=null==x||null===(t=x.find(({data:e})=>null==e?void 0:e.startsWith(h)))||void 0===t?void 0:t.data;const o=(0,i.parseTransactionData)(s);e=o.commands;const a=(0,i.getDataFromSwap)(S,o.commandBytes,o.inputs);var n;if(a.quotesInput)(0,i.checkValidSingleOrBatchTransaction)(x,null===(n=a.quotesInput)||void 0===n?void 0:n.srcTokenAddress),P(),N(e);return{...a,commands:e}}catch(t){return(0,r.captureException)(t),R(`Error getting data from swap: ${t.toString()}`,e),{commands:undefined,quotesInput:undefined,amountMin:undefined}}},[R,N,S,b,x,P]),{fiatRates:L,getGasUSDValue:$,getTokenUSDValue:j,getDestinationTokenUSDValue:G,tokenDetails:U,tokenInfoPending:W}=(0,p.useDappSwapUSDValues)({tokenAddresses:k,destTokenAddress:null==F?void 0:F.destTokenAddress}),{bestQuote:H,selectedQuote:V}=(0,o.useMemo)(()=>{try{if(B===undefined||null==g||!g.length||W)return{bestQuote:undefined,selectedQuote:undefined};const{bestQuote:e,bestFilteredQuote:n}=(0,i.getBestQuote)(g,B,G,$);return{bestQuote:e,selectedQuote:n||(null!=t&&t.enabled?e:undefined)}}catch(e){return(0,r.captureException)(e),R(`Error getting best quote: ${e.toString()}`,D),{bestQuote:undefined,selectedQuote:undefined}}},[B,D,R,null==t?void 0:t.enabled,$,G,g,W]);(0,o.useEffect)(()=>{try{var e,t;if(!(B!==undefined&&H&&F&&w&&U))return;const n=M(),{destTokenAddress:o,srcTokenAmount:a,srcTokenAddress:r}=F,{approval:c,quote:{destTokenAmount:l,minDestTokenAmount:d},trade:m}=H,p=$(new s.BigNumber(((null==c?void 0:c.effectiveGas)??(null==c?void 0:c.gasLimit)??0)+((null==m?void 0:m.effectiveGas)??(null==m?void 0:m.gasLimit)??0),10)),f=$(new s.BigNumber(C??A??E??"0x0",16)),h=(0,i.getBalanceChangeFromSimulationData)(o,w);O({properties:{swap_dapp_comparison:"completed",swap_dapp_commands:D,swap_dapp_from_token_simulated_value_usd:j(a,r),swap_dapp_to_token_simulated_value_usd:G(h),swap_dapp_minimum_received_value_usd:G(B),swap_dapp_network_fee_usd:f,swap_mm_from_token_simulated_value_usd:j(a,r),swap_mm_to_token_simulated_value_usd:G(l),swap_mm_minimum_received_value_usd:G(d),swap_mm_slippage:H.quote.slippage,swap_mm_quote_provider:H.quote.aggregator,swap_mm_network_fee_usd:p,swap_comparison_total_latency_ms:n,swap_dapp_request_detection_latency_ms:I,swap_mm_quote_response_latency_ms:(null==v?void 0:v.toString())??"N_A"},sensitiveProperties:{swap_from_token_contract:r,swap_from_token_symbol:(null===(e=(0,u.getTokenValueFromRecord)(U,r))||void 0===e?void 0:e.symbol)??"N/A",swap_to_token_contract:o,swap_to_token_symbol:(null===(t=(0,u.getTokenValueFromRecord)(U,o))||void 0===t?void 0:t.symbol)??"N/A"}})}catch(e){(0,r.captureException)(e),R(`Error calculating metrics values: ${e.toString()}`,D)}},[B,H,R,D,O,E,A,C,$,G,j,g,F,v,I,M,w,U,W]);const{selectedQuoteValueDifference:q=0,gasDifference:K=0,tokenAmountDifference:z=0}=(0,o.useMemo)(()=>{if(!(V&&F&&w&&U))return{};const{destTokenAddress:e}=F,{approval:t,quote:{destTokenAmount:n},trade:o}=V,a=new s.BigNumber($(new s.BigNumber(((null==t?void 0:t.effectiveGas)??(null==t?void 0:t.gasLimit)??0)+((null==o?void 0:o.effectiveGas)??(null==o?void 0:o.gasLimit)??0),10))),r=new s.BigNumber(G(n)),c=r.minus(a),u=new s.BigNumber($(new s.BigNumber(C??A??E??"0x0",16))),l=new s.BigNumber(G((0,i.getBalanceChangeFromSimulationData)(e,w))),d=l.minus(u);return{selectedQuoteValueDifference:c.minus(d).toNumber(),gasDifference:u.minus(a).toNumber(),tokenAmountDifference:r.minus(l).toNumber()}},[V,G,$,E,A,C,F,w,U]);return{fiatRates:L,gasDifference:K,minDestTokenAmountInUSD:G((null==V||null===(e=V.quote)||void 0===e?void 0:e.minDestTokenAmount)??"0",2),selectedQuote:V,selectedQuoteValueDifference:q,sourceTokenAmount:null==F?void 0:F.srcTokenAmount,tokenAmountDifference:z,tokenDetails:U}};var s=e("bignumber.js"),o=e("react"),a=e("react-redux"),r=e("../../../../../../shared/lib/sentry"),i=e("../../../../../../shared/modules/dapp-swap-comparison/dapp-swap-comparison-utils"),c=e("../../../../../selectors/remote-feature-flags"),u=e("../../../utils/token"),l=e("../../../selectors/confirm"),d=e("../../../context/confirm"),m=e("./useDappSwapComparisonLatencyMetrics"),p=e("./useDappSwapUSDValues"),f=e("./useDappSwapComparisonMetrics");const h="0x3593564c"}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/dapp-swap-comparison/useDappSwapComparisonInfo.ts"}],[7516,{react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDappSwapComparisonLatencyMetrics=function(){const e=(0,s.useRef)((new Date).getTime()),t=(0,s.useRef)(),n=(0,s.useRef)(),a=(0,s.useCallback)(()=>{t.current===undefined&&(t.current=(new Date).getTime()-(e.current??0))},[]),r=(0,s.useCallback)(()=>(n.current!==undefined||(n.current=(new Date).getTime()-(e.current??0)),n.current.toString()),[]);return{requestDetectionLatency:(t.current??o).toString(),swapComparisonLatency:(n.current??o).toString(),updateRequestDetectionLatency:a,updateSwapComparisonLatency:r}};var s=e("react");const o="N/A"}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/dapp-swap-comparison/useDappSwapComparisonLatencyMetrics.ts"}],[7517,{"../../../context/confirm":7449,"../../../context/dapp-swap":7450,"../../useTransactionEventFragment":7564,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDappSwapComparisonMetrics=function(){const{currentConfirmation:e}=(0,o.useConfirmContext)(),{isQuotedSwapDisplayedInInfo:t,selectedQuote:n}=(0,a.useDappSwapContext)(),{updateTransactionEventFragment:i}=(0,r.useTransactionEventFragment)(),{id:c}=e??{},u=(0,s.useRef)("loading"),l=(0,s.useCallback)(e=>{u.current=e.properties.swap_dapp_comparison,i(e,c)},[c,i]),d=(0,s.useCallback)(e=>{l({properties:e})},[l]),m=(0,s.useCallback)(()=>{n&&l({properties:{swap_final_selected:t?"metamask":"dapp"}})},[l,t,n]),p=(0,s.useCallback)(e=>{l({properties:{swap_dapp_comparison:u.current??"loading",swap_dapp_commands:e}})},[l]),f=(0,s.useCallback)((e,t)=>{l({properties:{swap_dapp_comparison:e??"failed",swap_dapp_commands:t??""}})},[l]);return{captureDappSwapComparisonDisplayProperties:d,captureDappSwapComparisonFailed:f,captureDappSwapComparisonLoading:p,captureDappSwapComparisonMetricsProperties:l,captureSwapSubmit:m}};var s=e("react"),o=e("../../../context/confirm"),a=e("../../../context/dapp-swap"),r=e("../../useTransactionEventFragment")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/dapp-swap-comparison/useDappSwapComparisonMetrics.ts"}],[7518,{"../../../../../hooks/bridge/useRewards":6973,"../../../../../hooks/useI18nContext":7047,"../../../context/confirm":7449,"../../../context/dapp-swap":7450},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDappSwapComparisonRewardText=void 0;var s=e("../../../../../hooks/bridge/useRewards"),o=e("../../../../../hooks/useI18nContext"),a=e("../../../context/confirm"),r=e("../../../context/dapp-swap");n.useDappSwapComparisonRewardText=()=>{var e;const{currentConfirmation:t}=(0,a.useConfirmContext)(),{selectedQuote:n}=(0,r.useDappSwapContext)(),i=(0,o.useI18nContext)(),{shouldShowRewardsRow:c,isLoading:u,estimatedPoints:l,hasError:d,accountOptedIn:m}=(0,s.useRewardsWithQuote)({quote:(null==n?void 0:n.quote)??null,fromAddress:(null==t||null===(e=t.txParams)||void 0===e?void 0:e.from)??"",chainId:(null==t?void 0:t.chainId)??""});return!c||d||u||!m?null:l?{text:i("dappSwapRewardText",[l.toString()]),estimatedPoints:l}:null}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/dapp-swap-comparison/useDappSwapComparisonRewardText.ts"}],[7519,{"../../../../../helpers/utils/token-insights":6954,"../../../../../helpers/utils/util":6959,"../../../../../hooks/useAsync":7029,"../../../context/confirm":7449,"../../../utils/token":7590,"@metamask/assets-controllers":1233,"@metamask/bridge-controller":1304,"@metamask/transaction-controller":2868,"bignumber.js":3768,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDappSwapUSDValues=function({tokenAddresses:e=[],destTokenAddress:t}){const{currentConfirmation:n}=(0,m.useConfirmContext)(),{chainId:f,txParams:h}=n??{txParams:{}},{maxFeePerGas:g}=h??{},{value:v,pending:T}=(0,u.useAsyncResult)(async()=>{const t=e.filter(e=>!(0,l.isNativeAddress)(e)),n=await(0,c.fetchTokenExchangeRates)("usd",t,f);if(f===r.CHAIN_IDS.POLYGON){n[(0,a.getNativeAssetForChainId)(f).address]=n[p]}return n},[f,null==e?void 0:e.length]),{value:y,pending:k}=(0,u.useAsyncResult)(async()=>{let t=await(0,d.fetchAllTokenDetails)(e,f);return e.forEach(e=>{(0,l.isNativeAddress)(e)&&(t={...t,[e]:(0,a.getNativeAssetForChainId)(f)})}),t},[f,null==e?void 0:e.length]),S=(0,i.useCallback)((e,t,n)=>{var o;if(!y||!v)return"0";const a=new s.BigNumber(Math.pow(10,parseInt((null===(o=(0,d.getTokenValueFromRecord)(y,t))||void 0===o?void 0:o.decimals)??"18",10))),r=new s.BigNumber((0,d.getTokenValueFromRecord)(v,t)??0),i=new s.BigNumber(e??0).dividedBy(a).times(r);return n?i.toFixed(n):i.toString(10)},[v,y]),C=(0,i.useCallback)((e,n)=>t?S(e,t,n):"0",[S,t]);return{getGasUSDValue:(0,i.useCallback)(e=>{if(!g)return"0";const t=new s.BigNumber(g,16).times(e).toString(10),n=(0,o.getNativeTokenAddress)(f);return S(t,n)},[f,S,g]),getTokenUSDValue:S,getDestinationTokenUSDValue:C,tokenDetails:y,fiatRates:v,tokenInfoPending:T||k}};var s=e("bignumber.js"),o=e("@metamask/assets-controllers"),a=e("@metamask/bridge-controller"),r=e("@metamask/transaction-controller"),i=e("react"),c=e("../../../../../helpers/utils/util"),u=e("../../../../../hooks/useAsync"),l=e("../../../../../helpers/utils/token-insights"),d=e("../../../utils/token"),m=e("../../../context/confirm");const p="0x0000000000000000000000000000000000001010"}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/dapp-swap-comparison/useDappSwapUSDValues.ts"}],[7520,{"../../../../../shared/lib/shield":5712,"../../../../hooks/subscription/useSubscription":7022,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEnableShieldCoverageChecks=void 0;var s=e("react"),o=e("../../../../hooks/subscription/useSubscription"),a=e("../../../../../shared/lib/shield");n.useEnableShieldCoverageChecks=()=>{const{subscriptions:e}=(0,o.useUserSubscriptions)();return{isEnabled:(0,s.useMemo)(()=>(0,a.getIsShieldSubscriptionActive)(e),[e]),isPaused:(0,s.useMemo)(()=>(0,a.getIsShieldSubscriptionPaused)(e),[e])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/useEnableShieldCoverageChecks.ts"}],[7521,{"../../context/confirm":7449,"@metamask/controller-utils":1383},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsEnforcedSimulationsSupported=function(){var e;const{currentConfirmation:t}=(0,o.useConfirmContext)(),{delegationAddress:n,origin:a,simulationData:r}=t;!a||s.ORIGIN_METAMASK,Boolean(n),Boolean(null==r?void 0:r.nativeBalanceChange)||Boolean(null==r||null===(e=r.tokenBalanceChanges)||void 0===e?void 0:e.length);return!1};var s=e("@metamask/controller-utils"),o=e("../../context/confirm")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/useIsEnforcedSimulationsSupported.ts"}],[7522,{"../../../../helpers/constants/routes":6904,"@metamask/transaction-controller":2868,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useShieldConfirm=void 0;var s=e("@metamask/transaction-controller"),o=e("react"),a=e("react-router-dom-v5-compat"),r=e("../../../../helpers/constants/routes");n.useShieldConfirm=()=>{const e=(0,a.useNavigate)();return{handleShieldSubscriptionApprovalTransactionAfterConfirm:(0,o.useCallback)(t=>{t.type===s.TransactionType.shieldSubscriptionApprove&&e(`${r.TRANSACTION_SHIELD_ROUTE}?waitForSubscriptionCreation=true`)},[e]),handleShieldSubscriptionApprovalTransactionAfterConfirmErr:(0,o.useCallback)(t=>{t.type===s.TransactionType.shieldSubscriptionApprove&&e(-1)},[e])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/useShieldConfirm.ts"}],[7523,{"../../../../selectors":7886,"../../../../store/actions":7916,"../../components/confirm/info/hooks/useGasFeeToken":7232,"../../context/confirm":7449,"../gas/useGaslessSupportedSmartTransactions":7486,"../gas/useIsGaslessSupported":7488,"./dapp-swap-comparison/useDappSwapActions":7513,"./useShieldConfirm":7522,"@metamask/transaction-controller":2868,lodash:4635,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionConfirm=function(){const e=(0,r.useDispatch)(),t=(0,r.useSelector)(i.getCustomNonceValue),n=(0,u.useSelectedGasFeeToken)(),{currentConfirmation:h}=(0,c.useConfirmContext)(),{isSupported:g}=(0,m.useGaslessSupportedSmartTransactions)(),{isSupported:v}=(0,d.useIsGaslessSupported)(),{onDappSwapCompleted:T,updateSwapWithQuoteDetails:y}=(0,f.useDappSwapActions)(),k=(0,a.useMemo)(()=>(0,o.cloneDeep)(h),[h]),S=(0,a.useCallback)(()=>{n&&(k.batchTransactions=[{...n.transferTransaction,type:s.TransactionType.gasPayment}],k.txParams.gas=n.gas,k.txParams.maxFeePerGas=n.maxFeePerGas,k.isGasFeeSponsored=v&&h.isGasFeeSponsored,k.txParams.maxPriorityFeePerGas=n.maxPriorityFeePerGas)},[v,k,n,null==h?void 0:h.isGasFeeSponsored]),C=(0,a.useCallback)(()=>{k.isExternalSign=!0,k.isGasFeeSponsored=v&&h.isGasFeeSponsored},[v,k,null==h?void 0:h.isGasFeeSponsored]),{handleShieldSubscriptionApprovalTransactionAfterConfirm:A,handleShieldSubscriptionApprovalTransactionAfterConfirmErr:w}=(0,p.useShieldConfirm)();return{onTransactionConfirm:(0,a.useCallback)(async()=>{k.customNonceValue=t,y(k),g?S():n&&C(),A(k);try{await e((0,l.updateAndApproveTx)(k,!0,""))}catch(e){throw w(k),e}T()},[k,t,g,e,S,C,n,A,w,T,y])}};var s=e("@metamask/transaction-controller"),o=e("lodash"),a=e("react"),r=e("react-redux"),i=e("../../../../selectors"),c=e("../../context/confirm"),u=e("../../components/confirm/info/hooks/useGasFeeToken"),l=e("../../../../store/actions"),d=e("../gas/useIsGaslessSupported"),m=e("../gas/useGaslessSupportedSmartTransactions"),p=e("./useShieldConfirm"),f=e("./dapp-swap-comparison/useDappSwapActions")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/transactions/useTransactionConfirm.ts"}],[7524,{"../../../store/actions":7916,"../context/confirm":7449,"@metamask/controller-utils":1383,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isAddEthereumChainType=function(e){return(null==e?void 0:e.type)===a.ApprovalType.AddEthereumChain},n.useAddEthereumChain=void 0;var s=e("react"),o=e("react-redux"),a=e("@metamask/controller-utils"),r=e("../context/confirm"),i=e("../../../store/actions");n.useAddEthereumChain=()=>{const e=(0,o.useDispatch)(),{currentConfirmation:t}=(0,r.useConfirmContext)(),{id:n,origin:a,requestData:c}=t??{};return{onSubmit:(0,s.useCallback)(async()=>{await e((0,i.resolvePendingApproval)(n,c))},[n,a,c,e])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useAddEthereumChain.ts"}],[7525,{"../../../../shared/modules/string-utils":5761,"../../../ducks/metamask/metamask":6883,"../../../helpers/utils/token-util":6955,"../../../hooks/usePrevious":7068,"../../../hooks/useTokenTracker":7086,"../../../selectors":7886,"../../../store/actions":7916,lodash:4635,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAssetDetails=function(e,t,n,p){const f=(0,a.useDispatch)(),h=(0,a.useSelector)(e=>(0,m.selectNftsByChainId)(e,p)),g=(0,a.useSelector)(e=>(0,r.getTokensByChainId)(e,p),s.isEqual).find(t=>(0,u.isEqualCaseInsensitive)(t.address,e)),[v,T]=(0,o.useState)(null),{tokensWithBalances:y}=(0,d.useTokenTracker)({tokens:g?[g]:[]}),k=(0,l.usePrevious)(e),S=(0,l.usePrevious)(t),C=(0,l.usePrevious)(n),A=(0,l.usePrevious)(y);if((0,o.useEffect)(()=>{(e||t||n)&&(e!==k||t!==S||n!==C||A&&A!==y)&&async function(){f((0,c.showLoadingIndication)());try{const s=await(0,i.getAssetDetails)(e,t,n,h,p);T(s)}catch(e){console.warn("Unable to set asset details",{error:e,transactionData:n})}f((0,c.hideLoadingIndication)())}()},[p,f,k,C,S,e,t,n,h,y,A]),!e&&!t&&!n)return{};if(v){const{standard:t,symbol:n,image:s,name:o,balance:a,tokenId:r,toAddress:i,tokenAmount:c,decimals:u,tokenURI:l}=v;return{toAddress:i,tokenId:r,decimals:u,tokenAmount:c,assetAddress:e,assetStandard:t,tokenSymbol:n??"",tokenImage:s,userBalance:a,assetName:o,tokenURI:l}}return{}};var s=e("lodash"),o=e("react"),a=e("react-redux"),r=e("../../../ducks/metamask/metamask"),i=e("../../../helpers/utils/token-util"),c=e("../../../store/actions"),u=e("../../../../shared/modules/string-utils"),l=e("../../../hooks/usePrevious"),d=e("../../../hooks/useTokenTracker"),m=e("../../../selectors")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useAssetDetails.js"}],[7526,{"../../../../shared/constants/transaction":5637,"../../../hooks/useAsync":7029,"../../../store/actions":7916,"../../../store/controller-actions/transaction-controller":7920,"../context/confirm":7449,"./alerts/transactions/useInsufficientBalanceAlerts":7468,"./gas/useIsGaslessSupported":7488,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useAutomaticGasFeeTokenSelect=function(){var e,t;const n=(0,o.useDispatch)(),{isSupported:m,isSmartTransaction:p}=(0,d.useIsGaslessSupported)(),[f,h]=(0,s.useState)(!0),{currentConfirmation:g}=(0,u.useConfirmContext)(),v=Boolean(null===(e=(0,l.useInsufficientBalanceAlerts)())||void 0===e?void 0:e.length),{gasFeeTokens:T,id:y,selectedGasFeeToken:k}=g;let S=null==T||null===(t=T[0])||void 0===t?void 0:t.tokenAddress;var C;p||S!==a.NATIVE_TOKEN_ADDRESS||(S=null==T||null===(C=T[1])||void 0===C?void 0:C.tokenAddress);const A=(0,s.useCallback)(async()=>{await(0,c.updateSelectedGasFeeToken)(y,S),await(0,i.forceUpdateMetamaskState)(n)},[n,y,S]),w=m&&v&&!k&&Boolean(S);(0,r.useAsyncResult)(async()=>{T&&y&&f&&w&&(await A(),h(!1))},[w,A,f,T,y])};var s=e("react"),o=e("react-redux"),a=e("../../../../shared/constants/transaction"),r=e("../../../hooks/useAsync"),i=e("../../../store/actions"),c=e("../../../store/controller-actions/transaction-controller"),u=e("../context/confirm"),l=e("./alerts/transactions/useInsufficientBalanceAlerts"),d=e("./gas/useIsGaslessSupported")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useAutomaticGasFeeTokenSelect.ts"}],[7527,{"../../../../shared/constants/network":5617,"../../../hooks/useAccountTotalFiatBalance":7026,"../../../selectors":7886,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBalance=void 0;var s=e("react-redux"),o=e("../../../selectors"),a=e("../../../../shared/constants/network"),r=e("../../../hooks/useAccountTotalFiatBalance");n.useBalance=e=>{const t=(0,s.useSelector)(o.getShouldHideZeroBalanceTokens),n=(0,s.useSelector)(t=>(0,o.getInternalAccountByAddress)(t,e)),{totalWeiBalance:i}=(0,r.useAccountTotalFiatBalance)(n,t),c=(0,s.useSelector)(o.getCurrentNetwork),u=(0,s.useSelector)(o.getShowFiatInTestnets),l=a.TEST_NETWORKS.includes(null==c?void 0:c.nickname)&&!u;let d=i;const m=(0,s.useSelector)(o.getSelectedAccountCachedBalance);return e?(l&&(d=m),{balance:d}):{}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useBalance.js"}],[7528,{"../../../../shared/constants/transaction":5637,"../../../selectors":7886,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useBatchAuthorizationRequests=void 0;var s=e("react-redux"),o=e("../../../selectors"),a=e("../../../../shared/constants/transaction");n.useBatchAuthorizationRequests=(e,t)=>({hasPendingRequests:(0,s.useSelector)(o.getTransactions).filter(n=>{var s;return n.chainId===t&&a.IN_PROGRESS_TRANSACTION_STATUSES.includes(n.status)&&((null===(s=n.txParams.authorizationList)||void 0===s?void 0:s.length)??0)>0&&n.txParams.from===e}).length>0})}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useBatchAuthorizationRequests.ts"}],[7529,{"../../../../shared/modules/selectors/networks":5753,"../../../selectors/multichain":7895,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useChainNetworkNameAndImageMap=void 0;var s=e("react-redux"),o=e("react"),a=e("../../../selectors/multichain"),r=e("../../../../shared/modules/selectors/networks");n.useChainNetworkNameAndImageMap=()=>{const e=(0,s.useSelector)(r.getAllNetworkConfigurationsByCaipChainId);return(0,o.useMemo)(()=>{const t=new Map;return Object.values(e).forEach(e=>{const n=e.chainId,s=(0,a.getImageForChainId)(n),o=null==e?void 0:e.name;t.set(n,{networkName:o??"",networkImage:s??""})}),t},[e])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useChainNetworkNameAndImage.ts"}],[7530,{"../../../ducks/confirm-transaction/confirm-transaction.duck":6876,"../../../store/actions":7916,"../context/confirm":7449,"./useConfirmSendNavigation":7531,"@metamask/rpc-errors":2480,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useConfirmActions=void 0;var s=e("@metamask/rpc-errors"),o=e("react"),a=e("react-redux"),r=e("../../../ducks/confirm-transaction/confirm-transaction.duck"),i=e("../../../store/actions"),c=e("../context/confirm"),u=e("./useConfirmSendNavigation");n.useConfirmActions=()=>{const e=(0,a.useDispatch)(),{currentConfirmation:t}=(0,c.useConfirmContext)(),{navigateBackIfSend:n}=(0,u.useConfirmSendNavigation)(),{id:l}=t||{},d=(0,o.useCallback)(async({location:t}={})=>{if(!l)return;const n=s.providerErrors.userRejectedRequest();n.data={location:t};const o=(0,s.serializeError)(n);await e((0,i.rejectPendingApproval)(l,o))},[l,e]),m=(0,o.useCallback)(()=>{e((0,i.updateCustomNonce)("")),e((0,i.setNextNonce)("")),e((0,r.clearConfirmTransaction)())},[e]);return{onCancel:(0,o.useCallback)(async({location:e,navigateBackForSend:s=!1})=>{t&&(s&&n(),await d({location:e}),m())},[t,n,d,m]),resetTransactionState:m}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useConfirmActions.ts"}],[7531,{"../context/confirm":7449,"./useRedesignedSendFlow":7557,"@metamask/transaction-controller":2868,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useConfirmSendNavigation=void 0;var s=e("@metamask/transaction-controller"),o=e("react"),a=e("react-router-dom-v5-compat"),r=e("../context/confirm"),i=e("./useRedesignedSendFlow");const c=[s.TransactionType.simpleSend,s.TransactionType.tokenMethodTransfer,s.TransactionType.tokenMethodTransferFrom,s.TransactionType.tokenMethodSafeTransferFrom];n.useConfirmSendNavigation=()=>{const e=(0,a.useNavigate)(),{currentConfirmation:t}=(0,r.useConfirmContext)(),{enabled:n}=(0,i.useRedesignedSendFlow)();return{navigateBackIfSend:(0,o.useCallback)(()=>{if(!n)return;const{origin:s,type:o}=t;"metamask"===s&&o&&c.includes(o)&&e(-1)},[t,e,n])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useConfirmSendNavigation.ts"}],[7532,{"../../../components/app/confirm/info/row/constants":5868,"../../../contexts/transaction-modal":6863,"../../../hooks/ramps/useRamps/useRamps":7004,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o=e("react"),a=e("../../../components/app/confirm/info/row/constants"),r=(s=e("../../../hooks/ramps/useRamps/useRamps"))&&s.__esModule?s:{default:s},i=e("../../../contexts/transaction-modal");n.default=()=>{const{openBuyCryptoInPdapp:e}=(0,r.default)(),{openModal:t}=(0,i.useTransactionModalContext)();return(0,o.useCallback)(n=>{switch(n){case a.AlertActionKey.Buy:e();break;case a.AlertActionKey.ShowAdvancedGasFeeModal:t("advancedGasFee");break;case a.AlertActionKey.ShowGasFeeModal:t("editGasFee");break;default:console.error("Unknown alert action key:",n)}},[e])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useConfirmationAlertActions.ts"}],[7533,{"../../../hooks/useAlerts":7027,"../context/confirm":7449,"../utils":7585,"./alerts/constants":7454,"./useSignatureEventFragment":7559,"./useTransactionEventFragment":7564,react:5080,uuid:5554},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ALERTS_NAME_METRICS=void 0,n.useConfirmationAlertMetrics=function(){const{currentConfirmation:e}=(0,c.useConfirmContext)(),t=(null==e?void 0:e.id)??"",{alerts:n,isAlertConfirmed:s}=(0,r.default)(t),{updateSignatureEventFragment:a}=(0,l.useSignatureEventFragment)(),{updateTransactionEventFragment:u}=(0,d.useTransactionEventFragment)(),[m,g]=(0,o.useState)({alert_visualized:[],alert_visualized_count:0,alert_key_clicked:[],alert_action_clicked:[]}),v=n.length>0?{alert_triggered_count:n.length,alert_triggered:f(n),alert_resolved_count:n.filter(e=>s(e.key)).length,alert_resolved:f(n.filter(e=>s(e.key))),...m}:undefined,T=(0,o.useCallback)(e=>{g(t=>{const n={...t},s=h(e);return n.alert_visualized=p(t.alert_visualized,s),n.alert_visualized_count=n.alert_visualized.length,n})},[]),y=(0,o.useCallback)(e=>{g(t=>{const n={...t},s=h(e);return n.alert_key_clicked=p(t.alert_key_clicked,s),n})},[]),k=(0,o.useCallback)(e=>{g(t=>{const n={...t},s=h(e);return n.alert_action_clicked=p(t.alert_action_clicked,s),n})},[]),S=(0,o.useCallback)(()=>{v&&((0,i.isSignatureTransactionType)(e)?a({properties:v}):u({properties:v},t))},[JSON.stringify(v),u,t]);return(0,o.useEffect)(()=>{S()},[S]),{trackAlertRender:T,trackInlineAlertClicked:y,trackAlertActionClicked:k}};var s,o=e("react"),a=e("uuid"),r=(s=e("../../../hooks/useAlerts"))&&s.__esModule?s:{default:s},i=e("../utils"),c=e("../context/confirm"),u=e("./alerts/constants"),l=e("./useSignatureEventFragment"),d=e("./useTransactionEventFragment");const m=n.ALERTS_NAME_METRICS={[u.AlertsName.GasEstimateFailed]:"gas_estimate_failed",[u.AlertsName.GasFeeLow]:"gas_fee_low",[u.AlertsName.GasTooLow]:"gas_too_low",[u.AlertsName.InsufficientBalance]:"insufficient_balance",[u.AlertsName.NetworkBusy]:"network_busy",[u.AlertsName.NoGasPrice]:"no_gas_price",[u.AlertsName.PendingTransaction]:"pending_transaction",[u.AlertsName.SigningOrSubmitting]:"signing_or_submitting",[u.AlertsName.Blockaid]:"blockaid"};function p(e,t){return[...new Set([...e,t])]}function f(e){return e.map(e=>h(e.key))}function h(e){return(0,a.validate)(e)?m[u.AlertsName.Blockaid]:m[e]??e}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useConfirmationAlertMetrics.ts"}],[7534,{"./alerts/signatures/useAccountMismatchAlerts":7455,"./alerts/signatures/useDomainMismatchAlerts":7456,"./alerts/transactions/useAccountTypeUpgrade":7461,"./alerts/transactions/useBurnAddressAlert":7462,"./alerts/transactions/useFirstTimeInteractionAlert":7464,"./alerts/transactions/useGasEstimateFailedAlerts":7465,"./alerts/transactions/useGasFeeLowAlerts":7466,"./alerts/transactions/useGasTooLowAlerts":7467,"./alerts/transactions/useInsufficientBalanceAlerts":7468,"./alerts/transactions/useMultipleApprovalsAlerts":7469,"./alerts/transactions/useNoGasPriceAlerts":7470,"./alerts/transactions/useNonContractAddressAlerts":7471,"./alerts/transactions/usePendingTransactionAlerts":7472,"./alerts/transactions/useResimulationAlert":7473,"./alerts/transactions/useSigningOrSubmittingAlerts":7474,"./alerts/useAddEthereumChainAlerts":7475,"./alerts/useAddressTrustSignalAlerts":7476,"./alerts/useBlockaidAlerts":7477,"./alerts/useConfirmationOriginAlerts":7478,"./alerts/useNetworkAndOriginSwitchingAlerts":7479,"./alerts/useOriginTrustSignalAlerts":7480,"./alerts/useSelectedAccountAlerts":7481,"./alerts/useShieldCoverageAlert":7482,"./alerts/useSpenderAlerts":7483,"./alerts/useTokenTrustSignalAlerts":7484,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){const e=(0,T.default)(),t=(0,y.default)(),n=function(){const e=(0,o.default)(),t=(0,a.default)();return(0,s.useMemo)(()=>[...e,...t],[e,t])}(),I=function(){const e=(0,r.useAccountTypeUpgrade)(),t=(0,E.useBurnAddressAlert)(),n=(0,i.useFirstTimeInteractionAlert)(),o=(0,c.useGasEstimateFailedAlerts)(),a=(0,u.useGasFeeLowAlerts)(),T=(0,l.useGasTooLowAlerts)(),y=(0,d.useInsufficientBalanceAlerts)(),k=(0,m.useMultipleApprovalsAlerts)(),S=(0,p.useNoGasPriceAlerts)(),C=(0,f.useNonContractAddressAlerts)(),A=(0,h.usePendingTransactionAlerts)(),w=(0,g.useResimulationAlert)(),b=(0,x.useShieldCoverageAlert)(),I=(0,v.useSigningOrSubmittingAlerts)(),P=(0,_.useTokenTrustSignalAlerts)();return(0,s.useMemo)(()=>[...e,...t,...n,...o,...a,...T,...y,...k,...S,...C,...A,...w,...b,...I,...P],[e,t,n,o,a,T,y,k,S,C,A,w,b,I,P])}(),P=(0,S.useSelectedAccountAlerts)(),M=(0,k.useNetworkAndOriginSwitchingAlerts)(),R=(0,C.useAddressTrustSignalAlerts)(),N=(0,A.useOriginTrustSignalAlerts)(),O=(0,w.useSpenderAlerts)(),D=(0,b.useAddEthereumChainAlerts)();return(0,s.useMemo)(()=>[...e,...t,...n,...I,...P,...M,...R,...N,...O,...D],[e,t,n,I,P,M,R,N,O,D])};var s=e("react"),o=I(e("./alerts/signatures/useAccountMismatchAlerts")),a=I(e("./alerts/signatures/useDomainMismatchAlerts")),r=e("./alerts/transactions/useAccountTypeUpgrade"),i=e("./alerts/transactions/useFirstTimeInteractionAlert"),c=e("./alerts/transactions/useGasEstimateFailedAlerts"),u=e("./alerts/transactions/useGasFeeLowAlerts"),l=e("./alerts/transactions/useGasTooLowAlerts"),d=e("./alerts/transactions/useInsufficientBalanceAlerts"),m=e("./alerts/transactions/useMultipleApprovalsAlerts"),p=e("./alerts/transactions/useNoGasPriceAlerts"),f=e("./alerts/transactions/useNonContractAddressAlerts"),h=e("./alerts/transactions/usePendingTransactionAlerts"),g=e("./alerts/transactions/useResimulationAlert"),v=e("./alerts/transactions/useSigningOrSubmittingAlerts"),T=I(e("./alerts/useBlockaidAlerts")),y=I(e("./alerts/useConfirmationOriginAlerts")),k=e("./alerts/useNetworkAndOriginSwitchingAlerts"),S=e("./alerts/useSelectedAccountAlerts"),C=e("./alerts/useAddressTrustSignalAlerts"),A=e("./alerts/useOriginTrustSignalAlerts"),w=e("./alerts/useSpenderAlerts"),_=e("./alerts/useTokenTrustSignalAlerts"),x=e("./alerts/useShieldCoverageAlert"),b=e("./alerts/useAddEthereumChainAlerts"),E=e("./alerts/transactions/useBurnAddressAlert");function I(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useConfirmationAlerts.ts"}],[7535,{"../../../helpers/constants/routes":6904,"../../../selectors":7886,"../confirmation/templates":7434,"../utils":7585,"@metamask/controller-utils":1383,lodash:4635,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.navigateToConfirmation=p,n.useConfirmationNavigation=function(){const e=(0,o.useSelector)(d.selectPendingApprovalsForNavigation),t=(0,o.useSelector)(d.getApprovalFlows,i.isEqual),n=(0,a.useNavigate)(),{search:r}=(0,a.useLocation)(),c=e.length,u=(0,s.useCallback)(t=>t?e.findIndex(({id:e})=>e===t):0,[e]),l=(0,s.useCallback)(s=>{p(s,e,Boolean(null==t?void 0:t.length),n,r,undefined)},[null==t?void 0:t.length,e,n,r]),m=(0,s.useCallback)(t=>{const n=e[t];l(null==n?void 0:n.id)},[e,l]),f=(0,s.useCallback)(t=>{const n=e.filter(e=>e.id!==t);if(n.length>=1){const e=u(n[0].id);m(e)}},[e,u,m]);return{confirmations:e,count:c,getIndex:u,navigateToId:l,navigateToIndex:m,navigateNext:f}};var s=e("react"),o=e("react-redux"),a=e("react-router-dom-v5-compat"),r=e("@metamask/controller-utils"),i=e("lodash"),c=e("../confirmation/templates"),u=e("../../../helpers/constants/routes"),l=e("../utils"),d=e("../../../selectors");const m=[r.ApprovalType.WalletRequestPermissions,"wallet_installSnap","wallet_updateSnap","wallet_installSnapResult"];function p(e,t,n,s,o="",a){var i;const d=(e,t=!0)=>{if(a){const t=e.split(/[?#]/u)[0];if(a===t)return}"replace"in s&&"function"==typeof s.replace?t?s.replace(e):s.push(e):s(e,{replace:t})},p=(null==t?void 0:t.length)<=0||!e;if(n&&p)return void d(`${u.CONFIRMATION_V_NEXT_ROUTE}`);if(p)return;const f=t.find(t=>t.id===e);if(!f)return;const h=f.type;if(c.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(h))return void d(`${u.CONFIRMATION_V_NEXT_ROUTE}/${e}`);if((0,l.isSignatureTransactionType)(f))return void d(`${u.CONFIRM_TRANSACTION_ROUTE}/${e}${u.SIGNATURE_REQUEST_PATH}`);if(h===r.ApprovalType.Transaction){let t=`${u.CONFIRM_TRANSACTION_ROUTE}/${e}`;return o.length&&(t=`${t}${o}`),void d(t)}if(h===r.ApprovalType.AddEthereumChain)return void d(`${u.CONFIRM_TRANSACTION_ROUTE}/${e}`);if(h===r.ApprovalType.EthDecrypt)return void d(`${u.CONFIRM_TRANSACTION_ROUTE}/${e}${u.DECRYPT_MESSAGE_REQUEST_PATH}`);if(h===r.ApprovalType.EthGetEncryptionPublicKey)return void d(`${u.CONFIRM_TRANSACTION_ROUTE}/${e}${u.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH}`);if(m.includes(h))return void d(`${u.CONNECT_ROUTE}/${e}`);const g=null==f||null===(i=f.requestData)||void 0===i||null===(i=i.asset)||void 0===i?void 0:i.tokenId;h!==r.ApprovalType.WatchAsset||g?h===r.ApprovalType.WatchAsset&&g&&d(`${u.CONFIRM_ADD_SUGGESTED_NFT_ROUTE}`):d(`${u.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE}`)}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useConfirmationNavigation.ts"}],[7536,{"../../../../shared/constants/network":5617,"../../../hooks/useI18nContext":7047,"../../../selectors":7886,"../context/confirm":7449,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-redux"),o=e("../../../../shared/constants/network"),a=e("../../../hooks/useI18nContext"),r=e("../context/confirm"),i=e("../../../selectors");n.default=function(){const e=(0,a.useI18nContext)(),{currentConfirmation:t}=(0,r.useConfirmContext)(),n=null==t?void 0:t.chainId,c=(0,s.useSelector)(e=>(0,i.selectNetworkConfigurationByChainId)(e,n));let u="",l="";return t&&(u=(null==c?void 0:c.name)??o.NETWORK_TO_NAME_MAP[n]??e("privateNetwork"),l=o.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[n]),{networkImageUrl:l,networkDisplayName:u}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useConfirmationNetworkInfo.ts"}],[7537,{"../../../selectors":7886,"../../../selectors/multichain-accounts/account-tree":7890,"../components/confirm/utils":7335,"../context/confirm":7449,"../selectors/accounts":7570,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-redux"),o=e("../../../selectors"),a=e("../components/confirm/utils"),r=e("../context/confirm"),i=e("../selectors/accounts"),c=e("../../../selectors/multichain-accounts/account-tree");n.default=function(){const{currentConfirmation:e}=(0,r.useConfirmContext)(),t=(0,s.useSelector)(o.getIsMultichainAccountsState2Enabled),{from:n}=(0,a.getConfirmationSender)(e),u=n??"",l=(0,s.useSelector)(e=>(0,i.selectAccountGroupNameByInternalAccount)(e,u)),d=(0,s.useSelector)(e=>(0,i.selectInternalAccountNameByAddress)(e,u)),m=(0,s.useSelector)(e=>(0,c.getWalletIdAndNameByAccountAddress)(e,u)),p=(0,s.useSelector)(c.getWalletsWithAccounts),f=t?l:d;return{hasMoreThanOneWallet:Object.keys(p).length>1,isBIP44:t,senderAddress:u,senderName:f??"",walletName:(null==m?void 0:m.name)??""}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useConfirmationRecipientInfo.ts"}],[7538,{"../../../../shared/lib/confirmation.utils":5650,"../../../selectors":7886,"../../../selectors/signatures":7907,"@metamask/controller-utils":1383,react:5080,"react-redux":5021,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("@metamask/controller-utils"),o=e("react"),a=e("react-redux"),r=e("react-router-dom-v5-compat"),i=e("../../../selectors"),c=e("../../../selectors/signatures"),u=e("../../../../shared/lib/confirmation.utils");n.default=e=>{const{id:t}=(0,r.useParams)(),n=(0,a.useSelector)(i.oldestPendingConfirmationSelector),l=e??t??(null==n?void 0:n.id),d=(0,a.useSelector)(e=>(0,i.selectPendingApproval)(e,l)),m=(0,a.useSelector)(e=>(0,i.getUnapprovedTransaction)(e,l)),p=(0,a.useSelector)(e=>(0,c.selectUnapprovedMessage)(e,l)),f=(0,u.shouldUseRedesignForSignatures)({approvalType:null==d?void 0:d.type}),h=(0,u.shouldUseRedesignForTransactions)({transactionMetadataType:null==m?void 0:m.type}),g=f||h;return(0,o.useMemo)(()=>{if((null==d?void 0:d.type)===s.ApprovalType.AddEthereumChain)return{currentConfirmation:d};if(!g)return{currentConfirmation:undefined};return{currentConfirmation:m??p??undefined}},[m,p,g,d])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useCurrentConfirmation.ts"}],[7539,{"../context/confirm":7449,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react-redux"),o=e("../context/confirm");n.default=()=>{var e;const{currentConfirmation:t}=(0,o.useConfirmContext)(),n=null==t||null===(e=t.securityAlertResponse)||void 0===e?void 0:e.securityAlertId;return(0,s.useSelector)(e=>{var t;return n===undefined?undefined:null===(t=e.metamask.signatureSecurityAlertResponses)||void 0===t?void 0:t[n]})}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useCurrentSignatureSecurityAlertResponse.ts"}],[7540,{"../components/simulation-details/useLoadingTime":7398,"../context/confirm":7449,"./useSignatureEventFragment":7559,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDecodedSignatureMetrics=function(e){var t;const{updateSignatureEventFragment:n}=(0,r.useSignatureEventFragment)(),{currentConfirmation:c}=(0,o.useConfirmContext)(),{loadingTime:u,setLoadingComplete:l}=(0,a.useLoadingTime)(),{decodingLoading:d,decodingData:m}=c;!1===d&&l();const p=(0,s.useMemo)(()=>((null==m?void 0:m.stateChanges)??[]).map(e=>e.changeType),[m]),f=(null==m||null===(t=m.error)||void 0===t?void 0:t.type)??(p.length?i.Change:i.NoChange);(0,s.useEffect)(()=>{var t;e&&n(d?{properties:{decoding_response:i.InProgress}}:{properties:{decoding_change_types:p,decoding_description:(null==m||null===(t=m.error)||void 0===t?void 0:t.message)??null,decoding_latency:u??null,decoding_response:f}})},[f,d,p,u,n])};var s=e("react"),o=e("../context/confirm"),a=e("../components/simulation-details/useLoadingTime"),r=e("./useSignatureEventFragment"),i=function(e){return e.Change="CHANGE",e.NoChange="NO_CHANGE",e.InProgress="decoding_in_progress",e}(i||{})}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useDecodedSignatureMetrics.ts"}],[7541,{"../../../ducks/send":6891,"../../../selectors":7886,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useDraftTransactionWithTxParams=void 0;var s=e("react-redux"),o=e("../../../ducks/send"),a=e("../../../selectors");n.useDraftTransactionWithTxParams=()=>{const e=(0,s.useSelector)(o.getCurrentDraftTransaction),t=(0,s.useSelector)(a.getUnapprovedTransactions);let n={};if(0!==Object.keys(e).length){var r,i,c,u,l,d,m,p,f,h;const s=t[e.id];n={txParams:{gasPrice:null===(r=e.gas)||void 0===r?void 0:r.gasPrice,gas:null!=s&&s.userEditedGasLimit?null==s||null===(i=s.txParams)||void 0===i?void 0:i.gas:null===(c=e.gas)||void 0===c?void 0:c.gasLimit,maxFeePerGas:null!=s&&null!==(u=s.txParams)&&void 0!==u&&u.maxFeePerGas?null==s||null===(l=s.txParams)||void 0===l?void 0:l.maxFeePerGas:null===(d=e.gas)||void 0===d?void 0:d.maxFeePerGas,maxPriorityFeePerGas:null!=s&&null!==(m=s.txParams)&&void 0!==m&&m.maxPriorityFeePerGas?null==s||null===(p=s.txParams)||void 0===p?void 0:p.maxPriorityFeePerGas:null===(f=e.gas)||void 0===f?void 0:f.maxPriorityFeePerGas,value:null===(h=e.amount)||void 0===h?void 0:h.value,type:e.transactionType},userFeeLevel:null==s?void 0:s.userFeeLevel}}return n}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useDraftTransactionWithTxParams.js"}],[7542,{"../../../../shared/lib/eip7702-utils":5689,"../../../selectors":7886,"../../../store/actions":7916,"./useConfirmationNavigation":7535,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"EIP_7702_REVOKE_ADDRESS",{enumerable:!0,get:function(){return a.EIP_7702_REVOKE_ADDRESS}}),n.useEIP7702Account=function({chainId:e,onRedirect:t}={chainId:"0x"}){const n=(0,o.useDispatch)(),[u,l]=(0,s.useState)(),{confirmations:d,navigateToId:m}=(0,c.useConfirmationNavigation)(),p=(0,o.useSelector)(t=>(0,i.selectDefaultRpcEndpointByChainId)(t,e))??{defaultRpcEndpoint:{}},{networkClientId:f}=p,h=d.some(e=>e.id===u),g=(0,s.useCallback)(async e=>{const t=await(0,a.createEIP7702DowngradeTransaction)({address:e,networkClientId:f},async(e,t)=>await n((0,r.addTransactionAndRouteToConfirmationPage)(e,t)));l(t.transactionId)},[n,f]),v=(0,s.useCallback)(async(e,t)=>{const s=await(0,a.createEIP7702UpgradeTransaction)({address:e,upgradeContractAddress:t,networkClientId:f},async(e,t)=>await n((0,r.addTransactionAndRouteToConfirmationPage)(e,t)));l(s.transactionId)},[n,f]),T=(0,s.useCallback)(async e=>(0,a.isAccountUpgraded)(e,f,r.getCode),[f]);return(0,s.useEffect)(()=>{h&&(m(u),null==t||t())},[h,m,u,t]),{isUpgraded:T,downgradeAccount:g,upgradeAccount:v}};var s=e("react"),o=e("react-redux"),a=e("../../../../shared/lib/eip7702-utils"),r=e("../../../store/actions"),i=e("../../../selectors"),c=e("./useConfirmationNavigation")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useEIP7702Account.ts"}],[7543,{"../../../../shared/constants/keyring":5609,"../../../../shared/constants/network":5617,"../../../../shared/modules/network.utils":5745,"../../../hooks/useAsync":7029,"../../../selectors":7886,"../../../store/controller-actions/transaction-controller":7920,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useEIP7702Networks=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../../shared/constants/keyring"),r=e("../../../../shared/constants/network"),i=e("../../../../shared/modules/network.utils"),c=e("../../../selectors"),u=e("../../../hooks/useAsync"),l=e("../../../store/controller-actions/transaction-controller");n.useEIP7702Networks=e=>{var t;const n=(0,o.useSelector)(t=>(0,c.getMemoizedInternalAccountByAddress)(t,e)),d=null==n||null===(t=n.metadata)||void 0===t||null===(t=t.keyring)||void 0===t?void 0:t.type,m=d&&a.KEYRING_TYPES_SUPPORTING_7702.includes(d),[p]=(0,o.useSelector)(c.getMultichainNetworkConfigurationsByChainId),[f={},h={}]=(0,s.useMemo)(()=>m?Object.entries(p).reduce(([e,t],[n,s])=>{try{const o=s.isEvm?(0,i.convertCaipToHexChainId)(n):n;(r.TEST_CHAINS.includes(o)?t:e)[o]=s}catch(e){}return[e,t]},[{},{}]):[{},{}],[m,p]),g=(0,s.useMemo)(()=>({...f,...h}),[f,h]),{pending:v,value:T}=(0,u.useAsyncResult)(async()=>{if(!m)return[];const t=Object.keys(g);return await(0,l.isAtomicBatchSupported)({address:e,chainIds:t})},[e,m,g]),y=(0,s.useMemo)(()=>{if(!T||!m)return[];const e=[];return Object.values(g).forEach(t=>{try{const n=(0,i.convertCaipToHexChainId)(t.chainId),s=T.find(({chainId:e})=>e===n);s&&e.push({...s,...t,chainIdHex:n})}catch(e){}}),e.sort((e,t)=>parseInt(e.chainIdHex,16)-parseInt(t.chainIdHex,16)),e},[m,g,T]);return{network7702List:y,networkSupporting7702Present:(null==y?void 0:y.length)>0,pending:v&&m}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useEIP7702Networks.ts"}],[7544,{"../../../../shared/constants/gas":5606,"../../../../shared/modules/conversion.utils":5732,"../../../../shared/modules/gas.utils":5740,"../../../helpers/constants/common":6897,"../../../helpers/utils/transactions.util":6956,"../../../hooks/useCurrencyDisplay":7034,"../../../hooks/useUserPreferencedCurrency":7091,"../../../selectors":7886,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasEstimates=function({editGasMode:e,gasEstimateType:t,gasFeeEstimates:n,gasLimit:m,gasPrice:p,maxFeePerGas:f,maxPriorityFeePerGas:h,minimumGasLimit:g,transaction:v}){const T=(0,s.useSelector)(e=>(0,i.checkNetworkAndAccountSupports1559)(e,null==v?void 0:v.networkClientId))&&!(0,c.isLegacyTransaction)(null==v?void 0:v.txParams),{currency:y,numberOfDecimals:k}=(0,l.useUserPreferencedCurrency)(r.PRIMARY);let S={gasLimit:(0,d.decimalToHex)(m),gasLimitNoBuffer:null==v?void 0:v.gasLimitNoBuffer};S=T?{...S,maxFeePerGas:(0,d.decGWEIToHexWEI)(f||p||"0"),maxPriorityFeePerGas:(0,d.decGWEIToHexWEI)(h||f||p||"0"),baseFeePerGas:(0,d.decGWEIToHexWEI)((null==n?void 0:n.estimatedBaseFee)??"0")}:{...S,gasPrice:t===o.GasEstimateTypes.none?"0x0":(0,d.decGWEIToHexWEI)(p)};const C=(0,a.getMaximumGasTotalInHexWei)(S);e===o.EditGasModes.swaps&&(S={...S,gasLimit:g});const A=(0,a.getMinimumGasTotalInHexWei)(S),[w]=(0,u.useCurrencyDisplay)(A,{numberOfDecimals:k,currency:y});return{estimatedMinimumNative:w,maximumCostInHexWei:C,minimumCostInHexWei:A}};var s=e("react-redux"),o=e("../../../../shared/constants/gas"),a=e("../../../../shared/modules/gas.utils"),r=e("../../../helpers/constants/common"),i=e("../../../selectors"),c=e("../../../helpers/utils/transactions.util"),u=e("../../../hooks/useCurrencyDisplay"),l=e("../../../hooks/useUserPreferencedCurrency"),d=e("../../../../shared/modules/conversion.utils")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useGasEstimates.js"}],[7545,{"../../../../shared/constants/gas":5606,"../../../../shared/modules/Numeric":5727,"../../../helpers/constants/gas":6901,"../../../helpers/constants/transactions":6910,"../../../helpers/utils/transactions.util":6956,"../../../helpers/utils/util":6959,"../../../selectors":7886,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasFeeErrors=function({gasEstimateType:e,gasFeeEstimates:t,isGasEstimatesLoading:n,gasLimit:u,gasPrice:l,maxPriorityFeePerGas:d,maxFeePerGas:k,minimumCostInHexWei:S,minimumGasLimit:C,transaction:A}){const w=(0,o.useSelector)(i.checkNetworkAndAccountSupports1559)&&!(0,c.isLegacyTransaction)(null==A?void 0:A.txParams),_=e===r.GasEstimateTypes.feeMarket,x=p(u,C),b=f(d,w),E=h(k,b,d,w),I=g(_,l,w,A),P=v(t,_,n,d,w),M=T(t,n,_,E,b,k,w),R=(0,s.useMemo)(()=>{const e={};return x&&(e.gasLimit=x),b&&(e.maxPriorityFee=b),E&&(e.maxFee=E),I&&(e.gasPrice=I),e},[x,b,E,I]),N=(0,s.useMemo)(()=>{const e={};return P&&(e.maxPriorityFee=P),M&&(e.maxFee=M),e},[P,M]),O=Boolean(Object.keys(R).length),D=(0,s.useMemo)(()=>({...N,...R}),[R,N]),F=(0,o.useSelector)(e=>{var t;return(0,i.getTargetAccount)(e,null==A||null===(t=A.txParams)||void 0===t?void 0:t.from)},o.shallowEqual),B=F!==undefined&&(null==A?void 0:A.type)!==a.TransactionType.incoming&&(null==A?void 0:A.status)in m.PENDING_STATUS_HASH&&y(S,A,F.balance);return{gasErrors:D,hasGasErrors:O,balanceError:B,hasSimulationError:Boolean(null==A?void 0:A.simulationFails)}};var s=e("react"),o=e("react-redux"),a=e("@metamask/transaction-controller"),r=e("../../../../shared/constants/gas"),i=e("../../../selectors"),c=e("../../../helpers/utils/transactions.util"),u=e("../../../helpers/utils/util"),l=e("../../../helpers/constants/gas"),d=e("../../../../shared/modules/Numeric"),m=e("../../../helpers/constants/transactions");const p=(e,t)=>new d.Numeric(e,10).lessThan(new d.Numeric(t||r.GAS_LIMITS.SIMPLE,16))?l.GAS_FORM_ERRORS.GAS_LIMIT_OUT_OF_BOUNDS:undefined,f=(e,t)=>t&&(0,u.bnLessThan)(e,0)?l.GAS_FORM_ERRORS.MAX_PRIORITY_FEE_BELOW_MINIMUM:undefined,h=(e,t,n,s)=>t||!s?undefined:(0,u.bnGreaterThan)(n,e)?l.GAS_FORM_ERRORS.MAX_FEE_IMBALANCE:undefined,g=(e,t,n,s)=>{var o;return n&&e?undefined:(!n||null!=s&&null!==(o=s.txParams)&&void 0!==o&&o.gasPrice)&&(0,u.bnLessThan)(t||0,0)?l.GAS_FORM_ERRORS.GAS_PRICE_TOO_LOW:undefined},v=(e,t,n,s,o)=>{var a;return o&&t&&!n?(0,u.bnLessThan)(s,null==e||null===(a=e.low)||void 0===a?void 0:a.suggestedMaxPriorityFeePerGas)?l.GAS_FORM_ERRORS.MAX_PRIORITY_FEE_TOO_LOW:null!=e&&e.high&&(0,u.bnGreaterThan)(s,1.5*e.high.suggestedMaxPriorityFeePerGas)?l.GAS_FORM_ERRORS.MAX_PRIORITY_FEE_HIGH_WARNING:undefined:undefined},T=(e,t,n,s,o,a,r)=>{var i;return o||s||!n||!r||t?undefined:(0,u.bnLessThan)(a,null==e||null===(i=e.low)||void 0===i?void 0:i.suggestedMaxFeePerGas)?l.GAS_FORM_ERRORS.MAX_FEE_TOO_LOW:null!=e&&e.high&&(0,u.bnGreaterThan)(a,1.5*e.high.suggestedMaxFeePerGas)?l.GAS_FORM_ERRORS.MAX_FEE_HIGH_WARNING:undefined},y=(e,t,n)=>{var s;if(e===undefined||n===undefined)return!1;const o=new d.Numeric(e,16).add(new d.Numeric((null==t||null===(s=t.txParams)||void 0===s?void 0:s.value)||"0x0",16)),a=new d.Numeric(n,16);return o.greaterThan(a)}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useGasFeeErrors.js"}],[7546,{"../../../../shared/constants/common":5601,"../../../../shared/constants/gas":5606,"../../../../shared/modules/Numeric":5727,"../../../../shared/modules/conversion.utils":5732,"../../../helpers/constants/gas":6901,"../../../helpers/utils/gas":6932,"../../../helpers/utils/transactions.util":6956,"../../../hooks/useGasFeeEstimates":7044,"../../../selectors":7886,"./useGasEstimates":7544,"./useGasFeeErrors":7545,"./useGasPriceInput":7547,"./useMaxFeePerGasInput":7553,"./useMaxPriorityFeePerGasInput":7554,"./useTransactionFunctions":7566,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasFeeInputs=function(e=a.GasRecommendations.medium,t,n="0x5208",S=a.EditGasModes.modifyInPlace){var C;const A={txParams:null==t?void 0:t.txParams,id:null==t?void 0:t.id,userFeeLevel:null==t?void 0:t.userFeeLevel,originalGasEstimate:null==t?void 0:t.originalGasEstimate,userEditedGasLimit:null==t?void 0:t.userEditedGasLimit};null!=t&&t.previousGas&&(A.previousGas=null==t?void 0:t.previousGas);const[w,_]=(0,s.useState)(A),x=(0,l.editGasModeIsSpeedUpOrCancel)(S)?w:t,b=(0,o.useSelector)(e=>(0,i.selectNetworkConfigurationByChainId)(e,null==x?void 0:x.chainId)),E=null==b||null===(C=b.rpcEndpoints)||void 0===C||null===(C=C[null==b?void 0:b.defaultRpcEndpointIndex])||void 0===C?void 0:C.networkClientId,I=(0,o.useSelector)(i.checkNetworkAndAccountSupports1559)&&!(0,c.isLegacyTransaction)(null==x?void 0:x.txParams),{gasEstimateType:P,gasFeeEstimates:M,isGasEstimatesLoading:R,isNetworkBusy:N}=(0,u.useGasFeeEstimates)(E),O=(0,o.useSelector)(i.getAdvancedInlineGasShown),[D,F]=(0,s.useState)(()=>{var t,n;return O&&null!=x&&null!==(t=x.txParams)&&void 0!==t&&t.maxPriorityFeePerGas&&null!=x&&null!==(n=x.txParams)&&void 0!==n&&n.maxFeePerGas?null:x?(null==x?void 0:x.userFeeLevel)||null:e}),[B,L]=(0,s.useState)(()=>D||a.PriorityLevels.custom),[$,j]=(0,s.useState)(()=>{var e,t;return Number((0,d.hexToDecimal)((null==x||null===(e=x.txParams)||void 0===e?void 0:e.gasLimit)??(null==x||null===(t=x.txParams)||void 0===t?void 0:t.gas)??"0x0"))}),G=Number((0,d.hexToDecimal)(null==x?void 0:x.originalGasEstimate));(0,s.useEffect)(()=>{if(I){var e,t,n,s;null!=x&&x.userFeeLevel&&F(null==x?void 0:x.userFeeLevel);const o=new m.Numeric((null==x||null===(e=x.txParams)||void 0===e?void 0:e.gas)??"0x0",16).times(new m.Numeric((null==x||null===(t=x.txParams)||void 0===t?void 0:t.maxFeePerGas)??"0x0",16)).toPrefixedHexString(),r=new m.Numeric(o,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.ETH).toBase(10).toString();Number(r)>Number(k)?L(a.PriorityLevels.dappSuggestedHigh):null!=x&&x.userFeeLevel&&L(null==x?void 0:x.userFeeLevel),j(Number((0,d.hexToDecimal)((null==x||null===(n=x.txParams)||void 0===n?void 0:n.gasLimit)??(null==x||null===(s=x.txParams)||void 0===s?void 0:s.gas)??"0x0")))}},[L,j,F,I,x]);const{gasPrice:U,setGasPrice:W,setGasPriceHasBeenManuallySet:H}=(0,h.useGasPriceInput)({estimateToUse:D,gasEstimateType:P,gasFeeEstimates:M,transaction:x}),{maxFeePerGas:V,setMaxFeePerGas:q}=(0,g.useMaxFeePerGasInput)({estimateToUse:D,gasEstimateType:P,gasFeeEstimates:M,transaction:x}),{maxPriorityFeePerGas:K,setMaxPriorityFeePerGas:z}=(0,v.useMaxPriorityFeePerGasInput)({estimateToUse:D,gasEstimateType:P,gasFeeEstimates:M,transaction:x}),{estimatedMinimumNative:Y,maximumCostInHexWei:Q,minimumCostInHexWei:J}=(0,T.useGasEstimates)({editGasMode:S,gasEstimateType:P,gasFeeEstimates:M,gasLimit:$,gasPrice:U,maxFeePerGas:V,maxPriorityFeePerGas:K,minimumGasLimit:n,transaction:x}),{balanceError:Z,gasErrors:X,hasGasErrors:ee,hasSimulationError:te}=(0,f.useGasFeeErrors)({gasEstimateType:P,gasFeeEstimates:M,isGasEstimatesLoading:R,gasLimit:$,gasPrice:U,maxPriorityFeePerGas:K,maxFeePerGas:V,minimumCostInHexWei:J,minimumGasLimit:n,transaction:x}),ne=(0,s.useCallback)(()=>{if(X.gasLimit===r.GAS_FORM_ERRORS.GAS_LIMIT_OUT_OF_BOUNDS){var e;const t=(0,d.hexToDecimal)(null==x||null===(e=x.txParams)||void 0===e?void 0:e.gas),s=(0,d.hexToDecimal)(n);j(t>s?t:s)}},[n,X.gasLimit,x]),{cancelTransaction:se,speedUpTransaction:oe,updateTransaction:ae,updateTransactionToTenPercentIncreasedGasFee:re,updateTransactionUsingDAPPSuggestedValues:ie,updateTransactionUsingEstimate:ce}=(0,y.useTransactionFunctions)({defaultEstimateToUse:e,editGasMode:S,gasFeeEstimates:M,gasLimit:$,maxPriorityFeePerGas:K,minimumGasLimit:n,transaction:x,setRetryTxMeta:_}),ue=(0,s.useCallback)(()=>{F(a.CUSTOM_GAS_ESTIMATE),ne(),W(U),j($),q(V),z(K),H(!0),L("custom")},[F,ne,W,U,j,$,q,V,z,K,H]);return{transaction:x,maxFeePerGas:V,maxPriorityFeePerGas:K,gasPrice:U,setGasPrice:W,gasLimit:$,setGasLimit:j,properGasLimit:G,editGasMode:S,estimateToUse:D,estimatedMinimumNative:Y,maximumCostInHexWei:Q,minimumCostInHexWei:J,estimateUsed:B,gasFeeEstimates:M,isNetworkBusy:N,onManualChange:ue,balanceError:Z,gasErrors:X,hasGasErrors:ee,hasSimulationError:te,minimumGasLimitDec:(0,d.hexToDecimal)(n),supportsEIP1559:I,cancelTransaction:se,speedUpTransaction:oe,updateTransaction:ae,updateTransactionToTenPercentIncreasedGasFee:re,updateTransactionUsingDAPPSuggestedValues:ie,updateTransactionUsingEstimate:ce}};var s=e("react"),o=e("react-redux"),a=e("../../../../shared/constants/gas"),r=e("../../../helpers/constants/gas"),i=e("../../../selectors"),c=e("../../../helpers/utils/transactions.util"),u=e("../../../hooks/useGasFeeEstimates"),l=e("../../../helpers/utils/gas"),d=e("../../../../shared/modules/conversion.utils"),m=e("../../../../shared/modules/Numeric"),p=e("../../../../shared/constants/common"),f=e("./useGasFeeErrors"),h=e("./useGasPriceInput"),g=e("./useMaxFeePerGasInput"),v=e("./useMaxPriorityFeePerGasInput"),T=e("./useGasEstimates"),y=e("./useTransactionFunctions");const k="1"}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useGasFeeInputs.js"}],[7547,{"../../../../shared/constants/gas":5606,"../../../../shared/modules/conversion.utils":5732,"../../../helpers/utils/transactions.util":6956,"./utils":7569,lodash:4635,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGasPriceInput=function({estimateToUse:e,gasEstimateType:t,gasFeeEstimates:n,transaction:l}){const[d,m]=(0,s.useState)((null==l?void 0:l.userFeeLevel)===a.CUSTOM_GAS_ESTIMATE),[p,f]=(0,s.useState)(()=>{const{gasPrice:e}=(null==l?void 0:l.txParams)||{};return e&&(0,c.feeParamsAreCustom)(l)?Number((0,i.hexWEIToDecGWEI)(e)):null}),[h]=(0,s.useState)(n),g=(0,o.isEqual)(h,n);return{gasPrice:null!==p&&(d||g||(0,r.isLegacyTransaction)(null==l?void 0:l.txParams))?p:u(n,t,e),setGasPrice:f,setGasPriceHasBeenManuallySet:m}};var s=e("react"),o=e("lodash"),a=e("../../../../shared/constants/gas"),r=e("../../../helpers/utils/transactions.util"),i=e("../../../../shared/modules/conversion.utils"),c=e("./utils");function u(e,t,n){return t===a.GasEstimateTypes.legacy?(null==e?void 0:e[n])??"0":t===a.GasEstimateTypes.ethGasPrice?(null==e?void 0:e.gasPrice)??"0":"0"}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useGasPriceInput.js"}],[7548,{"../../../../shared/constants/transaction":5637,"../../../hooks/useAsync":7029,"../utils/token":7590},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useGetTokenStandardAndDetails=void 0;var s=e("../../../../shared/constants/transaction"),o=e("../../../hooks/useAsync"),a=e("../utils/token");n.useGetTokenStandardAndDetails=e=>{const{value:t}=(0,o.useAsyncResult)(async()=>e?await(0,a.memoizedGetTokenStandardAndDetails)(e):Promise.resolve(null),[e]);if(!t)return{decimalsNumber:undefined};const{decimals:n,standard:r}=t||{};if(r===s.TokenStandard.ERC20){const e=(0,a.parseTokenDetailDecimals)(n)??a.ERC20_DEFAULT_DECIMALS;t.decimalsNumber=e}return t}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useGetTokenStandardAndDetails.ts"}],[7549,{"../../../../shared/modules/conversion.utils":5732,"../../../../shared/modules/transaction.utils":5763,"../../../helpers/utils/gas":6932,"../../../hooks/useGasFeeEstimates":7044,"bignumber.js":3768,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIncrementedGasFees=function(e){const{gasFeeEstimates:t={}}=(0,u.useGasFeeEstimates)(e.networkClientId);return(0,a.useMemo)(()=>{var n,s,o,a;const r={gasLimit:null===(n=e.txParams)||void 0===n?void 0:n.gas,gas:null===(s=e.txParams)||void 0===s?void 0:s.gas},c=(null==t||null===(o=t.medium)||void 0===o?void 0:o.suggestedMaxFeePerGas)??"0",u=(null==t||null===(a=t.medium)||void 0===a?void 0:a.suggestedMaxPriorityFeePerGas)??"0";if((0,i.isEIP1559Transaction)(e)){var d,m;const t=null===(d=e.txParams)||void 0===d?void 0:d.maxFeePerGas,n=null===(m=e.txParams)||void 0===m?void 0:m.maxPriorityFeePerGas;r.maxFeePerGas=t===undefined||t.startsWith("-")?"0x0":l(t,c),r.maxPriorityFeePerGas=n===undefined||n.startsWith("-")?"0x0":l(n,u)}else{var p;const t=null===(p=e.txParams)||void 0===p?void 0:p.gasPrice;r.gasPrice=t===undefined||t.startsWith("-")?"0x0":l(t,c)}return r},[e,t])};var s,o=(s=e("bignumber.js"))&&s.__esModule?s:{default:s},a=e("react"),r=e("../../../../shared/modules/conversion.utils"),i=e("../../../../shared/modules/transaction.utils"),c=e("../../../helpers/utils/gas"),u=e("../../../hooks/useGasFeeEstimates");function l(e,t){const n=(0,c.addTenPercentAndRound)(e),s=(0,r.decGWEIToHexWEI)(t);return new o.default(n,16).greaterThan(new o.default(s,16))?n:s}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useIncrementedGasFees.js"}],[7550,{"../../../selectors":7886,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsBIP44=void 0;var s=e("react-redux"),o=e("../../../selectors");n.useIsBIP44=()=>(0,s.useSelector)(o.getIsMultichainAccountsState2Enabled)}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useIsBIP44.ts"}],[7551,{"./alerts/transactions/useInsufficientBalanceAlerts":7468},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useIsInsufficientBalance=function(){return Boolean((0,s.useInsufficientBalanceAlerts)({ignoreGasFeeToken:!0}).length)};var s=e("./alerts/transactions/useInsufficientBalanceAlerts")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useIsInsufficientBalance.ts"}],[7552,{"../../../../shared/constants/hardware-wallets":5607,"../../../ducks/app/app":6868,"../../../ducks/metamask/metamask":6883,"../../../store/actions":7916,"../context/confirm":7449,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../../shared/constants/hardware-wallets"),r=e("../../../ducks/app/app"),i=e("../../../ducks/metamask/metamask"),c=e("../../../store/actions"),u=e("../context/confirm");n.default=()=>{var e,t;const n=(0,o.useDispatch)(),{currentConfirmation:l}=(0,u.useConfirmContext)(),d=(0,o.useSelector)(i.getLedgerTransportType),m=(0,o.useSelector)(r.getLedgerTransportStatus),p=(0,o.useSelector)(r.getLedgerWebHidConnectedStatus),f=(null==l||null===(e=l.msgParams)||void 0===e?void 0:e.from)??(null==l||null===(t=l.txParams)||void 0===t?void 0:t.from),h=(0,o.useSelector)(e=>f&&(0,i.isAddressLedger)(e,f));return(0,s.useEffect)(()=>{if(!h)return;(async()=>{if(d===a.LedgerTransportTypes.webhid&&p===a.WebHIDConnectedStatuses.connected&&m===a.HardwareTransportStates.none)try{const e=await(0,c.attemptLedgerTransportCreation)();n((0,r.setLedgerTransportStatus)(e?a.HardwareTransportStates.verified:a.HardwareTransportStates.unknownFailure))}catch(e){e.message.match("Failed to open the device")?n((0,r.setLedgerTransportStatus)(a.HardwareTransportStates.deviceOpenFailure)):e.message.match("the device is already open")?n((0,r.setLedgerTransportStatus)(a.HardwareTransportStates.verified)):n((0,r.setLedgerTransportStatus)(a.HardwareTransportStates.unknownFailure))}})(),(async()=>{if(d===a.LedgerTransportTypes.webhid&&p!==a.WebHIDConnectedStatuses.connected){var e;const t=await(null===(e=window.navigator)||void 0===e||null===(e=e.hid)||void 0===e?void 0:e.getDevices()),s=null==t?void 0:t.some(e=>e.vendorId===Number(a.LEDGER_USB_VENDOR_ID));n((0,r.setLedgerWebHidConnectedStatus)(s?a.WebHIDConnectedStatuses.connected:a.WebHIDConnectedStatuses.notConnected))}})()},[n,d,h,p,m]),(0,s.useEffect)(()=>h?()=>{n((0,r.setLedgerTransportStatus)(a.HardwareTransportStates.none))}:undefined,[n]),{isLedgerWallet:h}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useLedgerConnection.ts"}],[7553,{"../../../../shared/modules/conversion.utils":5732,"../../../helpers/utils/transactions.util":6956,"../../../selectors":7886,"./utils":7569,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMaxFeePerGasInput=function({estimateToUse:e,gasEstimateType:t,gasFeeEstimates:n,transaction:i}){const l=(0,o.useSelector)(a.checkNetworkAndAccountSupports1559)&&!(0,r.isLegacyTransaction)(null==i?void 0:i.txParams),d=l?u(i,n):0,[m,p]=(0,s.useState)(()=>d&&(0,c.feeParamsAreCustom)(i)?d:null);(0,s.useEffect)(()=>{l&&d&&p(d)},[d,p,l]);return{maxFeePerGas:m??(0,c.getGasFeeEstimate)("suggestedMaxFeePerGas",n,t,e,d||0),setMaxFeePerGas:p}};var s=e("react"),o=e("react-redux"),a=e("../../../selectors"),r=e("../../../helpers/utils/transactions.util"),i=e("../../../../shared/modules/conversion.utils"),c=e("./utils");const u=(e,t)=>{if(null!=t&&t[null==e?void 0:e.userFeeLevel])return t[e.userFeeLevel].suggestedMaxFeePerGas;const{maxFeePerGas:n,gasPrice:s}=(null==e?void 0:e.txParams)||{};return Number((0,i.hexWEIToDecGWEI)(n||s))}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useMaxFeePerGasInput.js"}],[7554,{"../../../../shared/modules/conversion.utils":5732,"../../../helpers/utils/transactions.util":6956,"../../../selectors":7886,"./utils":7569,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMaxPriorityFeePerGasInput=function({estimateToUse:e,gasEstimateType:t,gasFeeEstimates:n,transaction:i}){const d=(0,s.useSelector)(a.checkNetworkAndAccountSupports1559)&&!(0,r.isLegacyTransaction)(null==i?void 0:i.txParams),m=d?l(i,n):null,[p,f]=(0,o.useState)(()=>!u(m)&&(0,c.feeParamsAreCustom)(i)?m:null);(0,o.useEffect)(()=>{d&&!u(m)&&f(m)},[m,f,d]);return{maxPriorityFeePerGas:p??(0,c.getGasFeeEstimate)("suggestedMaxPriorityFeePerGas",n,t,e,m||0),setMaxPriorityFeePerGas:f}};var s=e("react-redux"),o=e("react"),a=e("../../../selectors"),r=e("../../../helpers/utils/transactions.util"),i=e("../../../../shared/modules/conversion.utils"),c=e("./utils");const u=e=>null===e||e===undefined,l=(e,t)=>{if(null!=t&&t[null==e?void 0:e.userFeeLevel])return t[e.userFeeLevel].suggestedMaxPriorityFeePerGas;const{maxPriorityFeePerGas:n,maxFeePerGas:s,gasPrice:o}=(null==e?void 0:e.txParams)||{},a=n||s||o;return a?Number((0,i.hexWEIToDecGWEI)(a)):null}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useMaxPriorityFeePerGasInput.js"}],[7555,{"../../../hooks/useGetAssetImageUrl":7045,"../../../selectors":7886,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useNftImageUrl=function(e){const t=(0,o.useSelector)(a.getIpfsGateway),n=(0,r.default)(e,t),s=e&&!e.startsWith("ipfs:");return s?e:n};var s,o=e("react-redux"),a=e("../../../selectors"),r=(s=e("../../../hooks/useGetAssetImageUrl"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useNftImageUrl.ts"}],[7556,{"../../../selectors":7886,"../../../store/actions":7916,"./useCurrentConfirmation":7538,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useOriginThrottling=function(){var e;const t=(0,a.useDispatch)(),n=(0,a.useSelector)(i.selectThrottledOrigins),{currentConfirmation:s}=(0,c.default)(),l=(null==s?void 0:s.origin)||(null==s||null===(e=s.messageParams)||void 0===e?void 0:e.origin),d=n[l],m=u(d),p=(0,o.useCallback)(()=>{t((0,r.updateThrottledOriginState)(l,{rejections:0,lastRejection:0}))},[t,l]);return{origin:l,resetOrigin:p,shouldThrottleOrigin:m}};var s,o=e("react"),a=e("react-redux"),r=e("../../../store/actions"),i=e("../../../selectors"),c=(s=e("./useCurrentConfirmation"))&&s.__esModule?s:{default:s};const u=e=>{if(!e)return!1;const t=Date.now(),{rejections:n,lastRejection:s}=e;return n+1>=3&&t-s<=3e4}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useOriginThrottling.ts"}],[7557,{"../../../selectors/remote-feature-flags":7900,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useRedesignedSendFlow=void 0;var s=e("react-redux"),o=e("../../../selectors/remote-feature-flags");n.useRedesignedSendFlow=()=>{const{sendRedesign:e}=(0,s.useSelector)(o.getRemoteFeatureFlags),{enabled:t}=e??{};return!1===t?{enabled:!1}:{enabled:!0}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useRedesignedSendFlow.ts"}],[7558,{"../../../ducks/confirm-alerts/confirm-alerts":6875,"../context/confirm":7449,"./useConfirmationAlerts":7534,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o=e("react"),a=e("react-redux"),r=e("../../../ducks/confirm-alerts/confirm-alerts"),i=e("../context/confirm"),c=(s=e("./useConfirmationAlerts"))&&s.__esModule?s:{default:s};n.default=()=>{const e=(0,a.useDispatch)(),{currentConfirmation:t}=(0,i.useConfirmContext)(),n=(0,c.default)(),s=null==t?void 0:t.id;(0,o.useEffect)(()=>{e((0,r.updateAlerts)(s,n))},[n,s]),(0,o.useEffect)(()=>()=>{e((0,r.clearAlerts)(s))},[s])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useSetConfirmationAlerts.ts"}],[7559,{"../../../helpers/utils/metrics":6938,"../../../store/actions":7916,"../context/confirm":7449,"../utils":7585,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSignatureEventFragment=void 0;var s=e("react"),o=e("../../../helpers/utils/metrics"),a=e("../../../store/actions"),r=e("../context/confirm"),i=e("../utils");n.useSignatureEventFragment=()=>{var e;const{currentConfirmation:t}=(0,r.useConfirmContext)(),n=(0,i.isSignatureTransactionType)(t)&&(null==t||null===(e=t.msgParams)||void 0===e?void 0:e.requestId),c=n?(0,o.generateSignatureUniqueId)(n):null;return{updateSignatureEventFragment:(0,s.useCallback)(async e=>{c&&(0,a.updateEventFragment)(c,e)},[c])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useSignatureEventFragment.ts"}],[7560,{"../../../../shared/constants/transaction":5637,"../../../store/actions":7916,"../context/confirm":7449,"@metamask/rpc-errors":2480,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSmartAccountActions=function(){const e=(0,a.useDispatch)(),{currentConfirmation:t}=(0,i.useConfirmContext)(),{id:n,chainId:u,txParams:l}=t??{},{from:d}=l??{};return{handleRejectUpgrade:(0,o.useCallback)(async()=>{if(!u||!d)return;const t=new s.JsonRpcError(c.EIP5792ErrorCode.RejectedUpgrade,"User rejected account upgrade"),o=(0,s.serializeError)(t);e((0,r.rejectPendingApproval)(n,o))},[e,n,u,d])}};var s=e("@metamask/rpc-errors"),o=e("react"),a=e("react-redux"),r=e("../../../store/actions"),i=e("../context/confirm"),c=e("../../../../shared/constants/transaction")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useSmartAccountActions.ts"}],[7561,{"../../../../shared/modules/selectors":5751,"../../../store/actions":7916,"../../swaps/swaps.util":7864,"../context/confirm":7449,loglevel:4643,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useSmartTransactionFeatureFlags=function(){const e=(0,o.useDispatch)(),{currentConfirmation:t}=(0,l.useConfirmContext)(),{id:n,txParams:s,networkClientId:d}=t??{},m=Boolean(s),p=(0,o.useSelector)(i.getSmartTransactionsPreferenceEnabled),f=(0,o.useSelector)(i.getChainSupportsSmartTransactions);(0,a.useEffect)(()=>{m&&n&&p&&f&&Promise.all([(0,c.fetchSwapsFeatureFlags)(),(0,u.fetchSmartTransactionsLiveness)({networkClientId:d})()]).then(([t])=>{var n;e((0,u.setSwapsFeatureFlags)(t)),e((0,u.setSmartTransactionsRefreshInterval)(null===(n=t.smartTransactions)||void 0===n?void 0:n.batchStatusPollingInterval))}).catch(e=>{r.default.debug("Error updating smart transaction feature flags",e)})},[m,n,p,f,d])};var s,o=e("react-redux"),a=e("react"),r=(s=e("loglevel"))&&s.__esModule?s:{default:s},i=e("../../../../shared/modules/selectors"),c=e("../../swaps/swaps.util"),u=e("../../../store/actions"),l=e("../context/confirm")}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useSmartTransactionFeatureFlags.ts"}],[7562,{"../../../helpers/constants/routes":6904,"./useConfirmationNavigation":7535,react:5080,"react-router-dom-v5-compat":5043},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),o=e("react-router-dom-v5-compat"),a=e("../../../helpers/constants/routes"),r=e("./useConfirmationNavigation");n.default=(e,t)=>{const{navigateToId:n}=(0,r.useConfirmationNavigation)(),i=(0,o.useLocation)(),c=(0,o.useParams)(),u=t||c.id;(0,s.useEffect)(()=>{(i.pathname.startsWith(a.CONFIRM_TRANSACTION_ROUTE)||i.pathname.startsWith(a.CONFIRMATION_V_NEXT_ROUTE))&&!u&&e&&n(e.id)},[u,e,n,i.pathname])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useSyncConfirmPath.ts"}],[7563,{"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/transaction":5637,"../../../contexts/metametrics":6855,"../utils/token":7590,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("react"),o=e("../../../../shared/constants/metametrics"),a=e("../../../../shared/constants/transaction"),r=e("../../../contexts/metametrics"),i=e("../utils/token");n.default=(e,t,n,c=o.MetaMetricsEventLocation.SignatureConfirmation)=>{const u=(0,s.useContext)(r.MetaMetricsContext),l=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(e===undefined||n===undefined||l.current)return;const{decimals:s,standard:r}=n||{};if(r!==a.TokenStandard.ERC20)return;(0,i.parseTokenDetailDecimals)(s)===undefined&&(u({event:o.MetaMetricsEventName.SimulationIncompleteAssetDisplayed,category:o.MetaMetricsEventCategory.Confirmations,properties:{token_decimals_available:"not_available",asset_address:t,asset_type:a.TokenStandard.ERC20,chain_id:e,location:c,ui_customizations:[o.MetaMetricsEventUiCustomization.RedesignedConfirmation]}}),l.current=!0)},[n,e,c,t,u])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useTrackERC20WithoutDecimalInformation.ts"}],[7564,{"../../../contexts/gasFee":6849,"../../../selectors":7886,"../../../store/actions":7916,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionEventFragment=void 0;var s=e("react"),o=e("react-redux"),a=e("../../../contexts/gasFee"),r=e("../../../store/actions"),i=e("../../../selectors");n.useTransactionEventFragment=()=>{const{transaction:e}=(0,a.useGasFeeContext)(),t=(0,o.useSelector)(t=>(0,i.selectMatchingFragment)(t,{fragmentOptions:{},existingId:`transaction-added-${null==e?void 0:e.id}`})),n=Boolean(t),c=null==e?void 0:e.id;return{updateTransactionEventFragment:(0,s.useCallback)(async(e,t)=>{const s=t||c;s&&(n||await(0,r.createTransactionEventFragment)(s),(0,r.updateEventFragment)(`transaction-added-${s}`,e),(0,r.updateEventFragment)(`transaction-submitted-${s}`,e))},[n,c])}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useTransactionEventFragment.js"}],[7565,{"../../../hooks/useWindowFocus":7092,"../../../store/actions":7916,"../context/confirm":7449,"@metamask/transaction-controller":2868,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionFocusEffect=void 0;var s=e("react"),o=e("react-redux"),a=e("@metamask/transaction-controller"),r=e("../../../store/actions"),i=e("../../../hooks/useWindowFocus"),c=e("../context/confirm");const u=new Set([a.TransactionType.batch,a.TransactionType.contractInteraction,a.TransactionType.deployContract,a.TransactionType.simpleSend,a.TransactionType.smart,a.TransactionType.tokenMethodTransfer,a.TransactionType.tokenMethodTransferFrom,a.TransactionType.tokenMethodSafeTransferFrom]);n.useTransactionFocusEffect=()=>{const{currentConfirmation:e}=(0,c.useConfirmContext)(),{id:t,type:n}=e??{},a=(0,i.useWindowFocus)(),l=(0,o.useDispatch)(),[d,m]=(0,s.useState)(null),p=(0,s.useCallback)(async(e,t)=>{await l((0,r.setTransactionActive)(e,t))},[l]);(0,s.useEffect)(()=>{u.has(n)?a&&d!==t?(d&&p(d,!1),m(t),p(t,!0)):!a&&d&&(p(d,!1),m(null)):d&&(p(d,!1),m(null))},[d,t,a,p,n])}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useTransactionFocusEffect.ts"}],[7566,{"../../../../shared/constants/gas":5606,"../../../../shared/modules/conversion.utils":5732,"../../../helpers/utils/gas":6932,"../../../store/actions":7916,"bignumber.js":3768,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTransactionFunctions=void 0;var s,o=e("react"),a=e("react-redux"),r=(s=e("bignumber.js"))&&s.__esModule?s:{default:s},i=e("../../../../shared/constants/gas"),c=e("../../../helpers/utils/gas"),u=e("../../../store/actions"),l=e("../../../../shared/modules/conversion.utils");n.useTransactionFunctions=({defaultEstimateToUse:e,editGasMode:t,estimatedBaseFee:n,gasFeeEstimates:s,gasLimit:d,maxPriorityFeePerGas:m,transaction:p,setRetryTxMeta:f})=>{const h=(0,a.useDispatch)(),g=(0,o.useCallback)(()=>{if(t!==i.EditGasModes.cancel&&t!==i.EditGasModes.speedUp||p.previousGas)return{};const{maxFeePerGas:e,maxPriorityFeePerGas:n,gasLimit:s}=(null==p?void 0:p.txParams)??{};return{previousGas:{maxFeePerGas:e,maxPriorityFeePerGas:n,gasLimit:s}}},[t,null==p?void 0:p.previousGas,null==p?void 0:p.txParams]),v=(0,o.useCallback)(async({estimateUsed:n,gasLimit:s,maxFeePerGas:o,maxPriorityFeePerGas:a,estimateSuggested:r})=>{const v={gas:(0,l.decimalToHex)(s||d),gasLimit:(0,l.decimalToHex)(s||d),estimateSuggested:r||e,estimateUsed:n};o&&(v.maxFeePerGas=o),a&&(v.maxPriorityFeePerGas=a||(0,l.decGWEIToHexWEI)(m));const T=g(),y={...p,userFeeLevel:n||i.PriorityLevels.custom,txParams:{...p.txParams,...v},...T};t===i.EditGasModes.swaps?(h((0,u.updateSwapsUserFeeLevel)(n||i.PriorityLevels.custom)),h((0,u.updateCustomSwapsEIP1559GasParams)(v))):(0,c.editGasModeIsSpeedUpOrCancel)(t)?f(y):(v.userEditedGasLimit=y.userEditedGasLimit,v.userFeeLevel=y.userFeeLevel,T&&T.previousGas&&await h((0,u.updatePreviousGasParams)(y.id,T.previousGas)),await h((0,u.updateTransactionGasFees)(y.id,v)))},[e,h,t,d,g,m,p,f]),T=(0,o.useCallback)(()=>{h((0,u.createCancelTransaction)(p.id,p.txParams,{estimatedBaseFee:n}))},[h,n,p]),y=(0,o.useCallback)(()=>{h((0,u.createSpeedUpTransaction)(p.id,p.txParams,{estimatedBaseFee:n}))},[h,n,p]),k=(0,o.useCallback)((t=!1)=>{const{gas:n,maxFeePerGas:o,maxPriorityFeePerGas:a}=p.previousGas||p.txParams,u=new r.default(a,16).isZero()?(0,l.decGWEIToHexWEI)(s[e].suggestedMaxPriorityFeePerGas):a,d="0x0"===a?i.CUSTOM_GAS_ESTIMATE:i.PriorityLevels.tenPercentIncreased;s&&v({estimateSuggested:t?e:i.PriorityLevels.tenPercentIncreased,estimateUsed:d,gasLimit:n,maxFeePerGas:(0,c.addTenPercentAndRound)(o),maxPriorityFeePerGas:(0,c.addTenPercentAndRound)(u)})},[e,s,p,v]),S=(0,o.useCallback)(e=>{if(null==s||!s[e])return;const{suggestedMaxFeePerGas:t,suggestedMaxPriorityFeePerGas:n}=s[e];v({estimateUsed:e,maxFeePerGas:(0,l.decGWEIToHexWEI)(t),maxPriorityFeePerGas:(0,l.decGWEIToHexWEI)(n)})},[s,v]),C=(0,o.useCallback)(()=>{const{maxFeePerGas:e,maxPriorityFeePerGas:t}=(null==p?void 0:p.dappSuggestedGasFees)??{};v({estimateUsed:i.PriorityLevels.dAppSuggested,maxFeePerGas:e,maxPriorityFeePerGas:t})},[p,v]);return{cancelTransaction:T,speedUpTransaction:y,updateTransaction:v,updateTransactionToTenPercentIncreasedGasFee:k,updateTransactionUsingDAPPSuggestedValues:C,updateTransactionUsingEstimate:S}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useTransactionFunctions.js"}],[7567,{"../../../../shared/constants/app":5598,"../../../../shared/constants/transaction":5637,"../../../../shared/modules/transaction.utils":5763,"../constants":7445,"../utils":7585,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTypedSignSignatureInfo=void 0;var s=e("react"),o=e("../utils"),a=e("../../../../shared/modules/transaction.utils"),r=e("../../../../shared/constants/transaction"),i=e("../../../../shared/constants/app"),c=e("../constants");n.useTypedSignSignatureInfo=e=>{const t=(0,s.useMemo)(()=>e&&(0,o.isSignatureTransactionType)(e)&&(null==e?void 0:e.type)===i.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA?(0,o.isPermitSignatureRequest)(e)?c.TypedSignSignaturePrimaryTypes.PERMIT:(0,o.isOrderSignatureRequest)(e)?c.TypedSignSignaturePrimaryTypes.ORDER:undefined:undefined,[e]),n=(0,s.useMemo)(()=>{var n;if(t!==c.TypedSignSignaturePrimaryTypes.PERMIT)return undefined;const{message:{tokenId:s}}=(0,a.parseTypedDataMessage)(null==e||null===(n=e.msgParams)||void 0===n?void 0:n.data);return s!==undefined?r.TokenStandard.ERC721:undefined},[e,t]);return{primaryType:t,tokenStandard:n}}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useTypedSignSignatureInfo.ts"}],[7568,{"../../../../shared/constants/app":5598,"../../../../shared/modules/transaction.utils":5763,"../context/confirm":7449,"../selectors/preferences":7573,"../utils":7585,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTypesSignSimulationEnabledInfo=function(){var e;const{currentConfirmation:t}=(0,c.useConfirmContext)(),n=(0,s.useSelector)(i.selectUseTransactionSimulations),a=null==t||null===(e=t.msgParams)||void 0===e?void 0:e.signatureMethod,u=a===o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V4||a===o.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA_V3,d=(0,r.isPermitSignatureRequest)(t),m=u&&l(t);if(!t)return undefined;return n&&u&&(d||m)};var s=e("react-redux"),o=e("../../../../shared/constants/app"),a=e("../../../../shared/modules/transaction.utils"),r=e("../utils"),i=e("../selectors/preferences"),c=e("../context/confirm");const u=[{domainName:"Seaport",primaryTypeList:["BulkOrder"],versionList:["1.4","1.5","1.6"]},{domainName:"Seaport",primaryTypeList:["OrderComponents"]}],l=e=>{var t;const n=null===(t=e.msgParams)||void 0===t?void 0:t.data;if(!n)return!1;const{domain:{name:s,version:o},primaryType:r}=(0,a.parseTypedDataMessage)(n);return u.some(({domainName:e,primaryTypeList:t,versionList:n})=>s===e&&t.includes(r)&&(!n||n.includes(o)))}}}},{package:"$root$",file:"ui/pages/confirmations/hooks/useTypesSignSimulationEnabledInfo.ts"}],[7569,{"../../../../shared/constants/gas":5606},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.feeParamsAreCustom=void 0,n.getGasFeeEstimate=function(e,t,n,o,a="0"){var r;return n===s.GasEstimateTypes.feeMarket?(null==t||null===(r=t[o])||void 0===r?void 0:r[e])??String(a):String(a)};var s=e("../../../../shared/constants/gas");n.feeParamsAreCustom=e=>!(null!=e&&e.userFeeLevel)||(null==e?void 0:e.userFeeLevel)===s.CUSTOM_GAS_ESTIMATE}}},{package:"$root$",file:"ui/pages/confirmations/hooks/utils.js"}],[7570,{"../../../../shared/modules/selectors/util":5755,"../../../helpers/utils/util":6959,"../../../selectors":7886,"../../../selectors/multichain-accounts/account-tree":7890},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectInternalAccountNameByAddress=n.selectAccountGroupNameByInternalAccount=void 0;var s=e("../../../../shared/modules/selectors/util"),o=e("../../../helpers/utils/util"),a=e("../../../selectors/multichain-accounts/account-tree"),r=e("../../../selectors");n.selectAccountGroupNameByInternalAccount=(0,s.createDeepEqualSelector)([(e,t)=>t?{groups:(0,a.getAccountGroupsByAddress)(e,[t]),address:null==t?void 0:t.toLowerCase()}:{groups:[],address:null}],({groups:e,address:t})=>{var n;if(!t||!e.length)return null;const s=e.find(e=>e.accounts.some(e=>{var n;return(null===(n=e.address)||void 0===n?void 0:n.toLowerCase())===t}));return(null==s||null===(n=s.metadata)||void 0===n?void 0:n.name)??null}),n.selectInternalAccountNameByAddress=(0,s.createDeepEqualSelector)([(e,t)=>({accounts:(0,r.accountsWithSendEtherInfoSelector)(e),address:t})],({accounts:e,address:t})=>{var n;if(!t||null==e||!e.length)return null;const s=(0,o.getAccountByAddress)(e,t);return(null==s||null===(n=s.metadata)||void 0===n?void 0:n.name)??null})}}},{package:"$root$",file:"ui/pages/confirmations/selectors/accounts.ts"}],[7572,{"./confirm":7571},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=e("./confirm");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/selectors/index.ts"}],[7574,{"../../../../../../app/scripts/lib/util":353,"../../../../../../shared/modules/hexstring-utils":5741,"../../../../../components/app/preferred-avatar":6033,"../../../../../components/component-library":6325,"../../../../../helpers/constants/design-system":6899,"../../../../../helpers/utils/util":6959,"@metamask/utils":2914,classnames:3913,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=p(e("prop-types")),a=p(e("classnames")),r=e("@metamask/utils"),i=e("../../../../../../app/scripts/lib/util"),c=e("../../../../../helpers/utils/util"),u=e("../../../../../../shared/modules/hexstring-utils"),l=e("../../../../../components/component-library"),d=e("../../../../../components/app/preferred-avatar"),m=e("../../../../../helpers/constants/design-system");function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends s.Component{constructor(...e){super(...e),h(this,"onPaste",e=>{var t;if(null!==(t=e.clipboardData.items)&&void 0!==t&&t.length){const t=e.clipboardData.items[0];null==t||t.getAsString(e=>{const t=e.trim();!(0,u.isBurnAddress)(t)&&(0,u.isValidHexAddress)(t,{mixedCaseUseChecksum:!0})&&this.props.onPaste((0,i.addHexPrefix)(t))})}}),h(this,"onChange",({target:{value:e}})=>{const{onValidAddressTyped:t,internalSearch:n,onChange:s,lookupDomainName:o,resetDomainResolution:a}=this.props,c=e.trim();if(n)return s(c),null;if((0,r.isHexString)(c))if(a(),t&&!(0,u.isBurnAddress)(c)&&(0,u.isValidHexAddress)(c,{mixedCaseUseChecksum:!0})){const e=(0,i.addHexPrefix)(c);s(e),t(e)}else s(c);else s(c),o(c);return null})}componentDidMount(){this.props.initializeDomainSlice()}render(){const{t:e}=this.context,{className:t,selectedAddress:n,selectedName:o,userInput:r}=this.props,i=Boolean(n),p=o&&n?(0,c.shortenAddress)((0,u.toChecksumHexAddress)(n)):undefined;return s.default.createElement("div",{className:(0,a.default)("ens-input",t)},s.default.createElement("div",{className:(0,a.default)("ens-input__wrapper",{"ens-input__wrapper__status-icon--error":!1,"ens-input__wrapper__status-icon--valid":!1,"ens-input__wrapper--valid":i})},i?s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"ens-input__wrapper__input ens-input__wrapper__input--selected","data-testid":"ens-input-selected"},s.default.createElement(d.PreferredAvatar,{address:n}),s.default.createElement("div",{className:"ens-input__selected-input__title"},o||n,p?s.default.createElement(l.Text,{color:m.TextColor.textAlternative,variant:m.TextVariant.bodySm,ellipsis:!0},p):null)),s.default.createElement(l.ButtonIcon,{iconName:l.IconName.Close,ariaLabel:e("close"),onClick:this.props.onReset,className:"ens-input__wrapper__action-icon-button",size:l.IconSize.Sm})):s.default.createElement(s.default.Fragment,null,s.default.createElement("input",{className:"ens-input__wrapper__input",type:"text",dir:"auto",placeholder:e("recipientAddressPlaceholderNew"),onChange:this.onChange,onPaste:this.onPaste,spellCheck:"false",value:n||r,autoFocus:!0,"data-testid":"ens-input"}),s.default.createElement(l.ButtonIcon,{className:"ens-input__wrapper__action-icon-button",onClick:()=>{(null==r?void 0:r.length)>0?this.props.onReset():this.props.scanQrCode()},iconName:r?l.IconName.Close:l.IconName.Scan,ariaLabel:e(r?"close":"scanQrCode"),color:r?m.IconColor.iconDefault:m.IconColor.primaryDefault,"data-testid":"ens-qr-scan-button"}))))}}n.default=g,h(g,"contextTypes",{t:o.default.func,metricsEvent:o.default.func}),h(g,"propTypes",{className:o.default.string,selectedAddress:o.default.string,selectedName:o.default.string,scanQrCode:o.default.func,onPaste:o.default.func,onValidAddressTyped:o.default.func,internalSearch:o.default.bool,userInput:o.default.string,onChange:o.default.func.isRequired,onReset:o.default.func.isRequired,lookupDomainName:o.default.func.isRequired,initializeDomainSlice:o.default.func.isRequired,resetDomainResolution:o.default.func.isRequired})}}},{package:"$root$",file:"ui/pages/confirmations/send-legacy/send-content/add-recipient/domain-input.component.js"}],[7575,{"../../../../../ducks/domains":6877,"../../../../../selectors":7886,"./domain-input.component":7574,lodash:4635,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o=e("lodash"),a=e("react-redux"),r=e("../../../../../ducks/domains"),i=e("../../../../../selectors"),c=(s=e("./domain-input.component"))&&s.__esModule?s:{default:s};n.default=(0,a.connect)(function(e){return{useBlockie:(0,i.getUseBlockie)(e)}},function(e){return{lookupDomainName:(0,o.debounce)(t=>e((0,r.lookupDomainName)(t)),150),initializeDomainSlice:()=>e((0,r.initializeDomainSlice)()),resetDomainResolution:(0,o.debounce)(()=>e((0,r.resetDomainResolution)()),300)}})(c.default)}}},{package:"$root$",file:"ui/pages/confirmations/send-legacy/send-content/add-recipient/domain-input.container.js"}],[7576,{"./domain-input.container":7575},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var s,o=(s=e("./domain-input.container"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/confirmations/send-legacy/send-content/add-recipient/domain-input.js"}],[7579,{"./send":7581},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Send",{enumerable:!0,get:function(){return s.Send}});var s=e("./send")}}},{package:"$root$",file:"ui/pages/confirmations/send/index.ts"}],[7580,{"../../../components/component-library":6325,"../../../helpers/constants/design-system":6899,"../components/send/amount-recipient":7362,"../components/send/asset":7369,"../components/send/header":7371,"../components/send/loader":7374,"../constants/send":7447,"../context/send":7452,"../hooks/send/useSendQueryParams":7508,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SendInner=void 0;var s,o=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../helpers/constants/design-system"),r=e("../../../components/component-library"),i=e("../components/send/amount-recipient"),c=e("../components/send/header"),u=e("../components/send/asset"),l=e("../components/send/loader"),d=e("../constants/send"),m=e("../context/send"),p=e("../hooks/send/useSendQueryParams");const f=({children:e})=>o.default.createElement(r.Box,{alignItems:a.AlignItems.center,backgroundColor:a.BackgroundColor.backgroundDefault,className:"redesigned__send__container",display:a.Display.Flex,flexDirection:a.FlexDirection.Column,height:a.BlockSize.Full,justifyContent:a.JustifyContent.center,style:{flex:"1 0 auto",minHeight:0},width:a.BlockSize.Full},o.default.createElement(r.Box,{backgroundColor:a.BackgroundColor.backgroundSection,className:"redesigned__send__wrapper",display:a.Display.Flex,height:a.BlockSize.Full,justifyContent:a.JustifyContent.center,width:a.BlockSize.Full,borderRadius:a.BorderRadius.LG},o.default.createElement(r.Box,{className:"redesigned__send__content",display:a.Display.Flex,flexDirection:a.FlexDirection.Column,height:a.BlockSize.Full,style:{maxWidth:"650px"},width:a.BlockSize.Full},o.default.createElement(r.Box,{className:"redesigned__send__sticky-header"},o.default.createElement(c.Header,null)),o.default.createElement(r.Box,{className:"redesigned__send__content-wrapper"},e))));n.SendInner=()=>{(0,p.useSendQueryParams)();const{currentPage:e}=(0,m.useSendContext)();return e===d.SendPages.LOADER?o.default.createElement(l.Loader,null):e===d.SendPages.ASSET?o.default.createElement(f,null,o.default.createElement(u.Asset,null)):e===d.SendPages.AMOUNTRECIPIENT?o.default.createElement(f,null,o.default.createElement(i.AmountRecipient,null)):null}}}},{package:"$root$",file:"ui/pages/confirmations/send/send-inner.tsx"}],[7581,{"../../../components/multichain/pages/send":6698,"../context/send":7452,"../context/send-metrics":7451,"../hooks/useRedesignedSendFlow":7557,"./send-inner":7580,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Send=void 0;var s,o=(s=e("react"))&&s.__esModule?s:{default:s},a=e("../../../components/multichain/pages/send"),r=e("../context/send"),i=e("../context/send-metrics"),c=e("../hooks/useRedesignedSendFlow"),u=e("./send-inner");n.Send=()=>{const{enabled:e}=(0,c.useRedesignedSendFlow)();return e?o.default.createElement(r.SendContextProvider,null,o.default.createElement(i.SendMetricsContextProvider,null,o.default.createElement(u.SendInner,null))):o.default.createElement(a.SendPage,null)}}}},{package:"$root$",file:"ui/pages/confirmations/send/send.tsx"}],[7582,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NFT_STANDARDS=n.AssetStandard=void 0;let s=n.AssetStandard=function(e){return e.Native="native",e.ERC20="ERC20",e.ERC721="ERC721",e.ERC1155="ERC1155",e}({});n.NFT_STANDARDS=[s.ERC721,s.ERC1155]}}},{package:"$root$",file:"ui/pages/confirmations/types/send.ts"}],[7583,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isTronAccountForSend=n.isSolanaAccountForSend=n.isEVMAccountForSend=n.isBitcoinAccountForSend=void 0;n.isEVMAccountForSend=e=>{var t;return!!e&&(!!e.type.startsWith("eip155:")||!(null===(t=e.scopes)||void 0===t||!t.some(e=>e.startsWith("eip155:"))))};n.isSolanaAccountForSend=e=>{var t;return!!e&&(!!e.type.startsWith("solana:")||!(null===(t=e.scopes)||void 0===t||!t.some(e=>e.startsWith("solana:"))))};n.isBitcoinAccountForSend=e=>{var t;return!!e&&(!!e.type.startsWith("bip122:")||!(null===(t=e.scopes)||void 0===t||!t.some(e=>e.startsWith("bip122:"))))};n.isTronAccountForSend=e=>{var t;return!!e&&(!!e.type.startsWith("tron:")||!(null===(t=e.scopes)||void 0===t||!t.some(e=>e.startsWith("tron:"))))}}}},{package:"$root$",file:"ui/pages/confirmations/utils/account.ts"}],[7584,{"../../../../shared/constants/signatures":5627,"../../../../shared/modules/transaction.utils":5763,"../../../helpers/utils/util":6959,"../constants":7445,"@metamask/transaction-controller":2868},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toPunycodeURL=n.stripProtocol=n.parseSanitizeTypedDataMessage=n.isValidASCIIURL=n.isSignatureTransactionType=n.isSIWESignatureRequest=n.isPermitSignatureRequest=n.isOrderSignatureRequest=n.SIGNATURE_TRANSACTION_TYPES=void 0;var s=e("@metamask/transaction-controller"),o=e("../../../../shared/constants/signatures"),a=e("../../../../shared/modules/transaction.utils"),r=e("../../../helpers/utils/util"),i=e("../constants");const c=n.SIGNATURE_TRANSACTION_TYPES=[s.TransactionType.personalSign,s.TransactionType.signTypedData],u=e=>e&&c.includes(e.type);n.isSignatureTransactionType=u;n.parseSanitizeTypedDataMessage=e=>{const{message:t,primaryType:n,types:s}=(0,a.parseTypedDataMessage)(e);return{sanitizedMessage:(0,r.sanitizeMessage)(t,n,s),primaryType:n}};n.isSIWESignatureRequest=e=>{var t;return Boolean(null==e||null===(t=e.msgParams)||void 0===t||null===(t=t.siwe)||void 0===t?void 0:t.isSIWEMessage)};n.isOrderSignatureRequest=e=>{var t,n;if(!e||!u(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:s}=(0,a.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return o.PRIMARY_TYPES_ORDER.includes(s)};n.isPermitSignatureRequest=e=>{var t,n;if(!e||!u(e)||"eth_signTypedData"!==e.type||(null===(t=e.msgParams)||void 0===t||null===(t=t.version)||void 0===t?void 0:t.toUpperCase())===i.TYPED_SIGNATURE_VERSIONS.V1)return!1;const{primaryType:s}=(0,a.parseTypedDataMessage)(null===(n=e.msgParams)||void 0===n?void 0:n.data);return o.PRIMARY_TYPES_PERMIT.includes(s)};n.isValidASCIIURL=e=>{try{return!(!e||0===e.length)&&e.includes(new URL(e).host)}catch(t){return console.error(`Failed to detect if URL hostname contains non-ASCII characters: ${e}. Error: ${t}`),!1}};n.toPunycodeURL=e=>{try{const t=new URL(e);return"/"===t.pathname&&!e.endsWith("/")?t.href.slice(0,-1):t.href}catch(e){return console.error(`Failed to convert URL to Punycode: ${e}`),undefined}};n.stripProtocol=e=>e.replace(/^\w+:\/\//u,"")}}},{package:"$root$",file:"ui/pages/confirmations/utils/confirm.ts"}],[7585,{"./confirm":7584},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var s=e("./confirm");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))})}}},{package:"$root$",file:"ui/pages/confirmations/utils/index.ts"}],[7586,{"../../../store/actions":7916,"@metamask/snaps-utils":2781},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sendMultichainTransactionForReview=async function(e,t){var n;return await(0,o.handleSnapRequest)({snapId:null===(n=e.metadata)||void 0===n||null===(n=n.snap)||void 0===n?void 0:n.id,origin:"metamask",handler:s.HandlerType.OnClientRequest,request:{method:"confirmSend",params:t}})},n.validateAmountMultichain=async function(e,t){var n;return await(0,o.handleSnapRequest)({snapId:null===(n=e.metadata)||void 0===n||null===(n=n.snap)||void 0===n?void 0:n.id,origin:"metamask",handler:s.HandlerType.OnClientRequest,request:{method:"onAmountInput",params:t}})};var s=e("@metamask/snaps-utils"),o=e("../../../store/actions")}}},{package:"$root$",file:"ui/pages/confirmations/utils/multichain-snaps.ts"}],[7587,{"../../../../shared/constants/multichain/networks":5616,"../../../../shared/constants/network":5617,"@metamask/keyring-api":2100,"@metamask/utils":2914},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getImageForChainId=function(e){return{...a.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP,...r.MULTICHAIN_TOKEN_IMAGE_MAP}[e]},n.isTronChainId=void 0;var s=e("@metamask/utils"),o=e("@metamask/keyring-api"),a=e("../../../../shared/constants/network"),r=e("../../../../shared/constants/multichain/networks");n.isTronChainId=e=>(0,s.isCaipChainId)(e)&&[`${o.TrxScope.Mainnet}`,`${o.TrxScope.Nile}`,`${o.TrxScope.Shasta}`].includes(e)}}},{package:"$root$",file:"ui/pages/confirmations/utils/network.ts"}],[7588,{"../../../../shared/modules/Numeric":5727,"../../../helpers/constants/routes":6904,"../../../store/actions":7916,"../send-legacy/send.utils":7578,"@metamask/controller-utils":1383,"@metamask/transaction-controller":2868,"ethereumjs-util":4138},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addLeadingZeroIfNeeded=void 0,n.convertedCurrency=function(e,t,n){if(!v(e))return undefined;return l(d(new r.Numeric(e,10).applyConversionRate(t).toString(),n)??"")},n.formatToFixedDecimals=function(e,t=5,n=!0){if(!e||!v(e))return"0";const s=new r.Numeric(e,10);if(s.isZero())return"0";let o=parseInt(null==t?void 0:t.toString(),10);o=o<5?o:5;const a=1/Math.pow(10,o);if(s.lessThan(new r.Numeric(a,10)))return`< ${a}`;const i=s.toString().split("."),c=i[0];let u=i[1]??"";u=u.length>o?u.slice(0,o):u.padEnd(o,"0");if(!u)return c;return n?l(`${c}.${u}`):`${c}.${u}`},n.getLayer1GasFees=n.getFractionLength=n.fromTokenMinimalUnitsNumeric=n.fromTokenMinimalUnitsHexNumeric=n.fromTokenMinimalUnits=n.fromTokenMinUnitsNumeric=void 0,n.isValidPositiveNumericString=v,n.trimTrailingZeros=n.toTokenMinimalUnitNumeric=n.toTokenMinimalUnit=n.submitEvmTransaction=n.removeAdditionalDecimalPlaces=n.prepareEVMTransaction=n.navigateToSendRoute=void 0;var s=e("@metamask/controller-utils"),o=e("@metamask/transaction-controller"),a=e("ethereumjs-util"),r=e("../../../../shared/modules/Numeric"),i=e("../../../store/actions"),c=e("../send-legacy/send.utils"),u=e("../../../helpers/constants/routes");const l=e=>e.replace(/(\.\d*?[1-9])0+$/gu,"$1").replace(/\.0*$/u,"");n.trimTrailingZeros=l;const d=(e,t)=>{if(!e)return undefined;const n=parseInt((null==t?void 0:t.toString())??"0",10),s=e.replace(/^-/u,"").split("."),o=s[0];let a=s[1]??"";return a.length>n&&(a=a.slice(0,n)),a?`${o}.${a}`:o};n.removeAdditionalDecimalPlaces=d;const m=(e,t,n)=>{const s=parseInt((null==n?void 0:n.toString())??"0",10),o=Math.pow(10,Number(s));return new r.Numeric(e,t).times(o,10)};n.fromTokenMinUnitsNumeric=m;const p=(e,t)=>m(e,10,t);n.fromTokenMinimalUnitsNumeric=p;const f=(e,t)=>(0,a.addHexPrefix)(p(e,t).toBase(16).toString());n.fromTokenMinimalUnits=f;n.fromTokenMinimalUnitsHexNumeric=(e,t)=>m(e,16,t);const h=(e,t=0,n)=>{const s=parseInt((null==t?void 0:t.toString())??"0",10),o=Math.pow(10,Number(s));return new r.Numeric(e,n??16).divide(o,10)};n.toTokenMinimalUnitNumeric=h;n.toTokenMinimalUnit=(e,t=0,n)=>d(h(e,t,n).toBase(10).toString(),t);const g=(e,t,n="0x")=>{const{from:o,to:a,value:r}=t,i={from:o},u=e.tokenId?r:f(r??"0",e.decimals);return e.isNative?(i.data=n,i.to=a,i.value=u,i):e.standard===s.ERC1155?(i.data=(0,c.generateERC1155TransferData)({fromAddress:o,toAddress:a,tokenId:e.tokenId,amount:u}),i.to=e.address,i.value="0x0",i):e.standard===s.ERC721?(i.data=(0,c.generateERC721TransferData)({fromAddress:o,toAddress:a,tokenId:e.tokenId}),i.to=e.address,i.value="0x0",i):(i.data=(0,c.generateERC20TransferData)({toAddress:a,amount:u,sendToken:e}),i.to=e.address,i.value="0x0",i)};n.prepareEVMTransaction=g;n.submitEvmTransaction=async({asset:e,chainId:t,from:n,hexData:a,to:r,value:c})=>{const u=g(e,{from:n,to:r,value:c},a),l=await(0,i.findNetworkClientIdByChainId)(t);let d;return e.isNative?d=o.TransactionType.simpleSend:e.standard===s.ERC20?d=o.TransactionType.tokenMethodTransfer:e.standard===s.ERC721?d=o.TransactionType.tokenMethodTransferFrom:e.standard===s.ERC1155&&(d=o.TransactionType.tokenMethodSafeTransferFrom),(0,i.addTransactionAndRouteToConfirmationPage)(u,{networkClientId:l,type:d})};function v(e){if(!/^(\d+(\.\d+)?|\.\d+)$/u.test(e))return!1;try{return new r.Numeric(e,10).greaterThanOrEqualTo(new r.Numeric("0",10))}catch(e){return!1}}n.getLayer1GasFees=async({asset:e,chainId:t,from:n,value:s})=>await(0,i.getLayer1GasFeeValue)({chainId:t,transactionParams:{value:f(s,e.decimals),from:n}});n.navigateToSendRoute=(e,t,n)=>{if(t)if(n){const t=new URLSearchParams,{address:s,chainId:o,tokenId:a}=n;s&&t.append("asset",s),o&&t.append("chainId",o),a&&t.append("tokenId",a),e(`${u.SEND_ROUTE}/amount-recipient?${t.toString()}`)}else e(`${u.SEND_ROUTE}/asset`);else e(u.SEND_ROUTE)};n.getFractionLength=e=>(e.replace(/^-/u,"").split(".")[1]??"").length;n.addLeadingZeroIfNeeded=e=>{if(!e)return e;const t=e.replace(/^-/u,"").split("."),n=t[0],s=t[1]??"";return n.length?e:`0.${s}`}}}},{package:"$root$",file:"ui/pages/confirmations/utils/send.ts"}],[7589,{"../../../../shared/lib/multichain/accounts":5704,"../../../store/actions":7916,"../constants/token":7448,"unicode-confusables":5517},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateTronAddress=n.validateSolanaAddress=n.validateEvmHexAddress=n.validateBtcAddress=n.findConfusablesInRecipient=void 0;var s=e("unicode-confusables"),o=e("../../../../shared/lib/multichain/accounts"),a=e("../../../store/actions"),r=e("../constants/token");n.findConfusablesInRecipient=e=>{const t=(0,s.confusables)(e),n=new Set,o=t.filter(({point:e})=>!n.has(e)&&(n.add(e),!0)).filter(({similarTo:e})=>e!==undefined);if(o.length){return o.some(({similarTo:e})=>""===e)?{error:"invalidAddress",warning:"confusableZeroWidthUnicode"}:{confusableCharacters:o}}return{}};n.validateEvmHexAddress=async(e,t,n)=>{if(r.LOWER_CASED_BURN_ADDRESSES.includes(e.toLowerCase()))return{error:"invalidAddress"};if((null==e?void 0:e.toLowerCase())===(null==n?void 0:n.toLowerCase()))return{error:"contractAddressError"};if(t){const n=await(0,a.getTokenStandardAndDetailsByChain)(e,undefined,undefined,t);if(null!=n&&n.standard)return{error:"tokenContractError"}}return{}};const i=["1nc1nerator11111111111111111111111111111111","So11111111111111111111111111111111111111112"];n.validateSolanaAddress=e=>i.includes(e)?{error:"invalidAddress"}:(0,o.isSolanaAddress)(e)?{}:{error:"invalidAddress"};n.validateBtcAddress=e=>(0,o.isBtcMainnetAddress)(e)?{}:{error:"invalidAddress"};n.validateTronAddress=e=>(0,o.isTronAddress)(e)?{}:{error:"invalidAddress"}}}},{package:"$root$",file:"ui/pages/confirmations/utils/sendValidations.ts"}],[7590,{"../../../store/actions":7916,"bignumber.js":3768,lodash:4635},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchErc20Decimals=n.fetchAllTokenDetails=n.fetchAllErc20Decimals=n.calculateTokenAmount=n.ERC20_DEFAULT_DECIMALS=void 0,n.getTokenValueFromRecord=function(e,t){const n=Object.keys(e).find(e=>e.toLowerCase()===t.toLowerCase());return n?e[n]:undefined},n.parseTokenDetailDecimals=n.memoizedGetTokenStandardAndDetails=void 0;var s=e("bignumber.js"),o=e("lodash"),a=e("../../../store/actions");const r=n.ERC20_DEFAULT_DECIMALS=18,i=e=>{if(!e)return undefined;for(const t of[10,16]){const n=parseInt(e,t);if(isFinite(n))return n}return undefined};n.parseTokenDetailDecimals=i;n.memoizedGetTokenStandardAndDetails=(0,o.memoize)(async(e,t,n)=>{try{return e?await(0,a.getTokenStandardAndDetails)(e,t,n):{}}catch{return{}}});const c=async(e,t)=>{try{const n=await(0,a.getTokenStandardAndDetailsByChain)(e,undefined,undefined,t),{decimals:s}=n;return i(s)??r}catch{return r}};n.fetchErc20Decimals=c;n.fetchAllErc20Decimals=async(e,t)=>{const n=[...new Set(e.map(e=>e.toLowerCase()))],s=await Promise.all(n.map(e=>c(e,t)));return Object.fromEntries(s.map((e,t)=>[n[t],e]))};n.fetchAllTokenDetails=async(e,t)=>{const n=[...new Set(e.map(e=>e.toLowerCase()))],s=await Promise.all(n.map(e=>(0,a.getTokenStandardAndDetailsByChain)(e,undefined,undefined,t)));return Object.fromEntries(s.map((e,t)=>[n[t],e]))};n.calculateTokenAmount=(e,t,n=10,o=1)=>{const a=new s.BigNumber(10).pow(t??0);return new s.BigNumber(String(e),n).div(a).times(o)}}}},{package:"$root$",file:"ui/pages/confirmations/utils/token.ts"}],[7591,{"../../components/app/connected-accounts-list":5887,"../../components/app/connected-accounts-permissions":5889,"../../components/app/connected-sites-list/connected-snaps":5893,"../../components/component-library":6325,"../../components/ui/popover":6804,"../../helpers/constants/design-system":6899,"../../helpers/utils/util":6959,"../../hooks/useI18nContext":7047,"../../selectors":7886,"@metamask/snaps-utils":2781,"prop-types":4893,react:5080,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=v;var s=g(e("prop-types")),o=g(e("react")),a=e("react-redux"),r=e("@metamask/snaps-utils"),i=g(e("../../components/ui/popover")),c=g(e("../../components/app/connected-accounts-list")),u=g(e("../../components/app/connected-accounts-permissions")),l=e("../../helpers/utils/util"),d=e("../../hooks/useI18nContext"),m=g(e("../../components/app/connected-sites-list/connected-snaps")),p=e("../../helpers/constants/design-system"),f=e("../../components/component-library"),h=e("../../selectors");function g(e){return e&&e.__esModule?e:{default:e}}function v({accountToConnect:e=null,activeTabOrigin:t,isActiveTabExtension:n,connectAccount:s,connectedAccounts:g,history:v,mostRecentOverviewPage:T,permissions:y=undefined,selectedAddress:k,removePermittedAccount:S,setSelectedAccount:C,subjectMetadata:A,originOfActiveTab:w,permissionSubjects:_}){var x,b,E;const I=(0,d.useI18nContext)(),P=(0,a.useSelector)(h.getInternalAccounts),M=A[w],R=(null===(x=_[w])||void 0===x?void 0:x.origin)===(null==M?void 0:M.origin)&&(null===(b=_[w])||void 0===b?void 0:b.permissions[r.WALLET_SNAP_PERMISSION_KEY]),N=R&&Object.keys(null===(E=_[w])||void 0===E||null===(E=E.permissions)||void 0===E||null===(E=E.wallet_snap)||void 0===E||null===(E=E.caveats[0])||void 0===E?void 0:E.value),O=R&&(null==N?void 0:N.map(e=>A[e])),D=g.length>0?I("connectedAccountsDescriptionPlural",[g.length]):I("connectedAccountsDescriptionSingular");let F;return F=g.length&&!R?D:R&&!g.length?I("connectedSnapAndNoAccountDescription"):g&&R?null:I("connectedAccountsEmptyDescription"),o.default.createElement(i.default,{title:n?I("currentExtension"):(0,l.getURLHost)(t),headerProps:{paddingLeft:4,paddingRight:4},subtitle:F,onClose:()=>v.push(T),footerClassName:"connected-accounts__footer",ConnectedAccountsPermissions:{},footer:g.length>0&&o.default.createElement(u.default,{permissions:y})},o.default.createElement(f.Box,null,g.length>0?o.default.createElement(f.Box,{marginLeft:4},o.default.createElement(f.Text,{variant:p.TextVariant.bodyMdMedium,color:p.TextColor.textAlternative},I("accountsConnected"),"(",g.length,")")):null,o.default.createElement(c.default,{accountToConnect:e,connectAccount:s,connectedAccounts:g,selectedAddress:k,removePermittedAccount:S,setSelectedAddress:e=>{const{id:t}=P.find(t=>t.address===e);C(t)},shouldRenderListOptions:!0})),R&&O.length>0&&o.default.createElement(o.default.Fragment,null,o.default.createElement(f.Box,{marginLeft:4},o.default.createElement(f.Text,{variant:p.TextVariant.bodyMdMedium,color:p.TextColor.textAlternative},I("snapsConnected"),"(",N.length,")")),o.default.createElement(m.default,{connectedSubjects:O})))}v.propTypes={accountToConnect:s.default.object,activeTabOrigin:s.default.string.isRequired,connectAccount:s.default.func.isRequired,connectedAccounts:s.default.array.isRequired,mostRecentOverviewPage:s.default.string.isRequired,permissions:s.default.array,isActiveTabExtension:s.default.bool.isRequired,selectedAddress:s.default.string.isRequired,removePermittedAccount:s.default.func.isRequired,setSelectedAccount:s.default.func.isRequired,history:s.default.object.isRequired,subjectMetadata:s.default.arrayOf(s.default.object).isRequired,originOfActiveTab:s.default.string,permissionSubjects:s.default.object}}}},{package:"$root$",file:"ui/pages/connected-accounts/connected-accounts.component.js"}],[7592,{"../../ducks/history/history":6880,"../../helpers/utils/util":6959,"../../selectors":7886,"../../store/actions":7916,"./connected-accounts.component":7591,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o=e("react-redux"),a=e("../../selectors"),r=e("../../helpers/utils/util"),i=e("../../store/actions"),c=e("../../ducks/history/history"),u=(s=e("./connected-accounts.component"))&&s.__esModule?s:{default:s};n.default=(0,o.connect)(e=>{var t;const{activeTab:n}=e,s=(0,a.getAccountToConnectToActiveTab)(e),o=(0,a.getOrderedConnectedAccountsForActiveTab)(e),i=(0,a.getInternalAccounts)(e),u=new Map(i.map(e=>[e.address,e])),l=o.map(e=>{var t;return{...e,name:null===(t=u.get(e.address))||void 0===t?void 0:t.metadata.name}}),d=s&&{...s,name:null===(t=i.find(e=>e.address===(null==s?void 0:s.address)))||void 0===t?void 0:t.metadata.name},m=(0,a.getPermissionsForActiveTab)(e),{address:p}=(0,a.getSelectedInternalAccount)(e),f=(0,a.getSubjectMetadata)(e),h=(0,a.getOriginOfCurrentTab)(e),g=(0,a.getPermissionSubjects)(e);return{accountToConnect:d,isActiveTabExtension:(0,r.isExtensionUrl)(n),activeTabOrigin:n.origin,connectedAccounts:l,mostRecentOverviewPage:(0,c.getMostRecentOverviewPage)(e),permissions:m,selectedAddress:p,subjectMetadata:f,originOfActiveTab:h,permissionSubjects:g}},e=>({addPermittedAccount:(t,n)=>e((0,i.addPermittedAccount)(t,n)),removePermittedAccount:(t,n)=>e((0,i.removePermittedAccount)(t,n)),setSelectedAccount:t=>e((0,i.setSelectedInternalAccount)(t))}),(e,t,n)=>{const{activeTabOrigin:s}=e;return{...n,...e,...t,connectAccount:e=>t.addPermittedAccount(s,e),removePermittedAccount:e=>t.removePermittedAccount(s,e)}})(u.default)}}},{package:"$root$",file:"ui/pages/connected-accounts/connected-accounts.container.js"}],[7593,{"./connected-accounts.container":7592},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var s,o=(s=e("./connected-accounts.container"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/connected-accounts/index.js"}],[7594,{"../../components/app/connected-sites-list":5894,"../../components/component-library":6325,"../../components/ui/popover/popover.component":6805,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=u(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),a=u(e("../../components/app/connected-sites-list")),r=u(e("../../components/ui/popover/popover.component")),i=e("../../components/component-library");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends o.Component{constructor(...e){super(...e),l(this,"state",{sitePendingDisconnect:null}),l(this,"setPendingDisconnect",e=>{this.setState({sitePendingDisconnect:{subjectKey:e}})}),l(this,"clearPendingDisconnect",()=>{this.setState({sitePendingDisconnect:null})}),l(this,"disconnectAccount",()=>{const{disconnectAccount:e}=this.props,{sitePendingDisconnect:t}=this.state;e(t.subjectKey),this.clearPendingDisconnect()}),l(this,"disconnectAllAccounts",()=>{const{disconnectAllAccounts:e}=this.props,{sitePendingDisconnect:t}=this.state;e(t.subjectKey),this.clearPendingDisconnect()})}componentDidMount(){const{getOpenMetamaskTabsIds:e}=this.props;e()}renderConnectedSitesList(){return o.default.createElement(a.default,{connectedSubjects:this.props.connectedSubjects,onDisconnect:this.setPendingDisconnect})}renderConnectedSitesPopover(){const{accountLabel:e,closePopover:t,connectedSubjects:n,tabToConnect:s,requestAccountsPermission:a}=this.props,{t:i}=this.context;return o.default.createElement(r.default,{className:"connected-sites",title:i("connectedSites"),subtitle:n.length?i("connectedSitesDescription",[e]):i("connectedSitesEmptyDescription",[e]),onClose:t,footer:s?o.default.createElement("a",{className:"connected-sites__text-button",onClick:a},i("connectManually")):null,footerClassName:"connected-sites__add-site-manually"},this.renderConnectedSitesList())}renderDisconnectPopover(){const{closePopover:e,permittedAccountsByOrigin:t}=this.props,{t:n}=this.context,{sitePendingDisconnect:{subjectKey:s}}=this.state,a=t[s].length;return o.default.createElement(r.default,{className:"connected-sites",title:n("disconnectPrompt",[s]),subtitle:n("disconnectAllAccountsConfirmationDescription"),onClose:e,footer:o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"connected-sites__footer-row"},o.default.createElement(i.Button,{variant:i.ButtonVariant.Secondary,onClick:this.clearPendingDisconnect,block:!0},n("cancel")),o.default.createElement(i.Button,{variant:i.ButtonVariant.Primary,onClick:this.disconnectAccount,block:!0},n("disconnect"))),a>1?o.default.createElement("div",{className:"connected-sites__footer-row"},o.default.createElement("a",{className:"connected-sites__text-button",onClick:this.disconnectAllAccounts},n("disconnectAllAccounts"))):null),footerClassName:"connected-sites__confirmation"})}render(){const{sitePendingDisconnect:e}=this.state;return e?this.renderDisconnectPopover():this.renderConnectedSitesPopover()}}n.default=d,l(d,"contextTypes",{t:s.default.func}),l(d,"defaultProps",{tabToConnect:null}),l(d,"propTypes",{accountLabel:s.default.string.isRequired,closePopover:s.default.func.isRequired,connectedSubjects:s.default.arrayOf(s.default.object).isRequired,disconnectAllAccounts:s.default.func.isRequired,disconnectAccount:s.default.func.isRequired,getOpenMetamaskTabsIds:s.default.func.isRequired,permittedAccountsByOrigin:s.default.objectOf(s.default.arrayOf(s.default.string)).isRequired,tabToConnect:s.default.object,requestAccountsPermission:s.default.func.isRequired})}}},{package:"$root$",file:"ui/pages/connected-sites/connected-sites.component.js"}],[7595,{"../../ducks/history/history":6880,"../../helpers/constants/routes":6904,"../../selectors":7886,"../../store/actions":7916,"./connected-sites.component":7594,"react-redux":5021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,o=e("react-redux"),a=e("../../store/actions"),r=e("../../selectors"),i=e("../../helpers/constants/routes"),c=e("../../ducks/history/history"),u=(s=e("./connected-sites.component"))&&s.__esModule?s:{default:s};n.default=(0,o.connect)(e=>{var t;const{openMetaMaskTabs:n}=e.appState,{id:s}=e.activeTab,o=(0,r.getConnectedSubjectsForSelectedAddress)(e),a=(0,r.getOriginOfCurrentTab)(e),i=(0,r.getPermittedAccountsByOrigin)(e),{address:u}=(0,r.getSelectedInternalAccount)(e),l=!(null!==(t=i[a])&&void 0!==t&&t.length);let d;return a&&l&&!n[s]&&(d={origin:a}),{accountLabel:(0,r.getSelectedInternalAccount)(e).metadata.name,connectedSubjects:o,subjects:(0,r.getPermissionSubjects)(e),mostRecentOverviewPage:(0,c.getMostRecentOverviewPage)(e),permittedAccountsByOrigin:i,selectedAddress:u,tabToConnect:d}},e=>({getOpenMetamaskTabsIds:()=>e((0,a.getOpenMetamaskTabsIds)()),disconnectAccount:(t,n)=>{e((0,a.removePermittedAccount)(t,n))},disconnectAllAccounts:(t,n)=>{const s=Object.values(n.permissions).map(({parentCapability:e})=>e);e((0,a.removePermissionsFor)({[t]:s}))},requestAccountsAndChainPermissionsWithId:t=>e((0,a.requestAccountsAndChainPermissionsWithId)(t))}),(e,t,n)=>{const{connectedSubjects:s,subjects:o,mostRecentOverviewPage:a,selectedAddress:r,tabToConnect:c}=e,{disconnectAccount:u,disconnectAllAccounts:l,requestAccountsAndChainPermissionsWithId:d}=t,{history:m}=n,p=()=>m.push(a);return{...n,...e,...t,closePopover:p,disconnectAccount:e=>{u(e,r),1===s.length&&p()},disconnectAllAccounts:e=>{l(e,o[e]),1===s.length&&p()},requestAccountsPermission:async()=>{const e=await d(c.origin);m.push(`${i.CONNECT_ROUTE}/${e}`)}}})(u.default)}}},{package:"$root$",file:"ui/pages/connected-sites/connected-sites.container.js"}],[7596,{"./connected-sites.container":7595},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o.default}});var s,o=(s=e("./connected-sites.container"))&&s.__esModule?s:{default:s}}}},{package:"$root$",file:"ui/pages/connected-sites/index.js"}],[7597,{"../../../../shared/lib/ui-utils":5725,"../../../hooks/useI18nContext":7047,"@metamask/design-system-react":1741,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.HyperliquidReferralConsent=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),o=e("@metamask/design-system-react"),a=e("../../../hooks/useI18nContext"),r=e("../../../../shared/lib/ui-utils");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const c=({text:e})=>s.default.createElement("a",{href:r.HYPERLIQUID_REFERRAL_LEARN_MORE_URL,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--color-primary-default)",cursor:"pointer"}},e),u=()=>s.default.createElement("img",{src:"./images/hyperliquid-referral.png",alt:"Hyperliquid referral",width:"full"});n.HyperliquidReferralConsent=({onActionComplete:e,selectedAddress:t})=>{const n=(0,a.useI18nContext)(),[r,i]=(0,s.useState)(!0);return s.default.createElement(o.Box,{flexDirection:o.BoxFlexDirection.Column,className:"h-full"},s.default.createElement(o.Box,{flexDirection:o.BoxFlexDirection.Column,alignItems:o.BoxAlignItems.Center,gap:4,className:"mb-6"},s.default.createElement(o.Text,{textAlign:o.TextAlign.Center,variant:o.TextVariant.HeadingMd,fontWeight:o.FontWeight.Bold},n("hyperliquidReferralTitle")),s.default.createElement(o.Text,{variant:o.TextVariant.BodyMd,color:o.TextColor.TextAlternative},n("hyperliquidReferralSubtitle")," ",s.default.createElement(c,{text:n("learnMoreUpperCase")}))),s.default.createElement(o.Box,{flexDirection:o.BoxFlexDirection.Column,justifyContent:o.BoxJustifyContent.Between,alignItems:o.BoxAlignItems.Center,className:"h-full"},s.default.createElement(o.Box,{paddingBottom:6,paddingHorizontal:4},s.default.createElement(u,null)),s.default.createElement(o.Box,{flexDirection:o.BoxFlexDirection.Column,gap:4},s.default.createElement(o.Box,{backgroundColor:o.BoxBackgroundColor.BackgroundSection,padding:3,className:"rounded-lg"},s.default.createElement(o.Checkbox,{id:"hyperliquid-referral-consent-checkbox",isSelected:r,onChange:()=>{i(!r)},label:n("hyperliquidReferralCheckboxLabel"),labelProps:{variant:o.TextVariant.BodySm,color:o.TextColor.TextAlternative},className:"items-start cursor-pointer"})),s.default.createElement(o.Button,{onClick:()=>{e({approved:r,selectedAddress:t})}},n("confirm")))))}}}},{package:"$root$",file:"ui/pages/core/hyperliquid-referral-consent/hyperliquid-referral-consent.tsx"}],[7598,{"./hyperliquid-referral-consent":7597},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"HyperliquidReferralConsent",{enumerable:!0,get:function(){return s.HyperliquidReferralConsent}});var s=e("./hyperliquid-referral-consent")}}},{package:"$root$",file:"ui/pages/core/hyperliquid-referral-consent/index.ts"}],[7599,{"../../../../shared/constants/hardware-wallets":5607,"../../../../shared/constants/metametrics":5613,"../../../components/component-library":6325,"../../../components/ui/check-box":6733,"../../../components/ui/dropdown":6750,"../../../helpers/utils/util":6959,"./utils":7602,"@metamask/etherscan-link":1994,"prop-types":4893,react:5080},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=f(e("prop-types")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}(e("react")),a=e("@metamask/etherscan-link"),r=e("../../../components/component-library"),i=f(e("../../../components/ui/check-box")),c=f(e("../../../components/ui/dropdown")),u=e("../../../helpers/utils/util"),l=e("../../../../shared/constants/hardware-wallets"),d=e("../../../../shared/constants/metametrics"),m=e("./utils");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends o.Component{constructor(...e){super(...e),h(this,"state",{pathValue:null}),h(this,"goToNextPage",()=>{5===this.props.accounts.length?this.props.getPage(this.props.device,1,this.props.selectedPath,!1):this.props.onAccountRestriction()}),h(this,"goToPreviousPage",()=>{this.props.getPage(this.props.device,-1,this.props.selectedPath,!1)})}componentDidMount(){const{device:e}=this.props,{trackEvent:t}=this.context;t({event:d.MetaMetricsEventName.ConnectHardwareWalletAccountSelectorViewed,properties:{device_type:(0,m.capitalizeStr)(e)}})}setPath(e){this.setState({pathValue:e})}isFirstPage(){var e;return 0===(null===(e=this.props.accounts[0])||void 0===e?void 0:e.index)}renderHdPathSelector(){const{device:e,selectedPath:t,hdPaths:n,onPathChange:s}=this.props,{pathValue:a}=this.state;return o.default.createElement("div",null,o.default.createElement("h3",{className:"hw-connect__hdPath__title"},this.context.t("selectHdPath")),o.default.createElement("p",{className:"hw-connect__msg"},this.context.t("selectPathHelp")),o.default.createElement("div",{className:"hw-connect__hdPath"},o.default.createElement(c.default,{className:"hw-connect__hdPath__select",options:n[e],selectedOption:a||t,onChange:e=>{this.setPath(e),s(e)}})))}renderHeader(){const{device:e}=this.props,t=[l.HardwareDeviceNames.ledger,l.HardwareDeviceNames.lattice,l.HardwareDeviceNames.trezor,l.HardwareDeviceNames.oneKey].includes(e);return o.default.createElement("div",{className:"hw-connect"},o.default.createElement("h3",{className:"hw-connect__unlock-title"},this.context.t("selectAnAccount")),t?this.renderHdPathSelector():null,o.default.createElement("h3",{className:"hw-connect__hdPath__title"},this.context.t("selectAnAccount")))}renderAccounts(){const{accounts:e,connectedAccounts:t,rpcPrefs:n,chainId:s}=this.props;return o.default.createElement("div",{className:"hw-account-list"},e.map((e,r)=>{const c=t.includes(e.address.toLowerCase()),l=e.index,m=this.props.selectedAccounts.includes(e.index)||c,p=(0,a.getAccountLink)(e.address,s,n),f=(0,u.getURLHostName)(p);return o.default.createElement("div",{className:"hw-account-list__item",key:e.address,"data-testid":"hw-account-list__item",title:c?this.context.t("selectAnAccountAlreadyConnected"):""},o.default.createElement("div",{className:"hw-account-list__item__checkbox"},o.default.createElement(i.default,{id:`address-${r}`,checked:m,disabled:c,onClick:()=>{this.props.onAccountChange(l)}}),o.default.createElement("label",{className:"hw-account-list__item__label",htmlFor:`address-${r}`},o.default.createElement("span",{className:"hw-account-list__item__index"},e.index+1),`${e.address.slice(0,4)}...${e.address.slice(-4)}`,o.default.createElement("span",{className:"hw-account-list__item__balance"},`${e.balance}`))),o.default.createElement("a",{className:"hw-account-list__item__link",onClick:()=>{this.context.trackEvent({category:d.MetaMetricsEventCategory.Accounts,event:"Clicked Block Explorer Link",properties:{actions:"Hardware Connect",link_type:"Account Tracker",block_explorer_domain:f}}),global.platform.openTab({url:p})},target:"_blank",rel:"noopener noreferrer",title:this.context.t("genericExplorerView",[f])},o.default.createElement("i",{className:"fa fa-share-square",style:{color:"var(--color-icon-default)"}})))}))}renderPagination(){return o.default.createElement("div",{className:"hw-list-pagination"},o.default.createElement("button",{className:"hw-list-pagination__button",disabled:this.isFirstPage(),onClick:this.goToPreviousPage,"data-testid":"hw-list-pagination__prev-button"},`< ${this.context.t("prev")}`),o.default.createElement("button",{className:"hw-list-pagination__button",onClick:this.goToNextPage},`${this.context.t("next")} >`))}renderButtons(){const e=0===this.props.selectedAccounts.length;return e&&({}.disabled=!0),o.default.createElement("div",{className:"new-external-account-form__buttons"},o.default.createElement(r.Button,{variant:r.ButtonVariant.Secondary,size:r.ButtonSize.Lg,block:!0,onClick:this.props.onCancel.bind(this)},this.context.t("cancel")),o.default.createElement(r.Button,{variant:r.ButtonVariant.Primary,size:r.ButtonSize.Lg,block:!0,className:"new-external-account-form__button unlock",disabled:e,onClick:this.props.onUnlockAccounts.bind(this,this.props.device,this.props.selectedPath)},this.context.t("unlock")))}renderForgetDevice(){return o.default.createElement("div",{className:"hw-forget-device-container"},o.default.createElement("a",{onClick:this.props.onForgetDevice.bind(this,this.props.device,this.props.selectedPath)},this.context.t("forgetDevice")))}render(){return o.default.createElement("div",{className:"new-external-account-form account-list"},this.renderHeader(),this.renderAccounts(),this.renderPagination(),this.renderButtons(),this.renderForgetDevice())}}g.propTypes={onPathChange:s.default.func.isRequired,selectedPath:s.default.string.isRequired,device:s.default.string.isRequired,accounts:s.default.array.isRequired,connectedAccounts:s.default.array.isRequired,onAccountChange:s.default.func.isRequired,onForgetDevice:s.default.func.isRequired,getPage:s.default.func.isRequired,chainId:s.default.string,rpcPrefs:s.default.object,selectedAccounts:s.default.array.isRequired,onUnlockAccounts:s.default.func,onCancel:s.default.func,onAccountRestriction:s.default.func,hdPaths:s.default.object.isRequired},g.contextTypes={t:s.default.func,trackEvent:s.default.func};n.default=g}}},{package:"$root$",file:"ui/pages/create-account/connect-hardware/account-list.js"}],[7600,{"../../../../shared/constants/hardware-wallets":5607,"../../../../shared/constants/keyring":5609,"../../../../shared/constants/metametrics":5613,"../../../../shared/constants/time":5635,"../../../../shared/modules/selectors/networks":5753,"../../../components/component-library":6325,"../../../ducks/history/history":6880,"../../../helpers/constants/design-system":6899,"../../../helpers/constants/zendesk-url":6911,"../../../helpers/higher-order-components/with-router-hooks/with-router-hooks":6922,"../../../helpers/utils/util":6959,"../../../selectors":7886,"../../../selectors/selectors":7903,"../../../store/actions":7916,"./account-list":7599,"./select-hardware":7601,"./utils":7602,"prop-types":4893,react:5080,"react-redux":5021,redux:5124},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.TREZOR_HD_PATHS=n.LEDGER_HD_PATHS=n.LATTICE_HD_PATHS=void 0;var s=x(e("react")),o=w(e("prop-types")),a=e("react-redux"),r=e("redux"),i=x(e("../../../store/actions")),c=e("../../../../shared/modules/selectors/networks"),u=e("../../../selectors"),l=e("../../../helpers/utils/util"),d=e("../../../ducks/history/history"),m=e("../../../../shared/constants/time"),p=e("../../../../shared/constants/hardware-wallets"),f=e("../../../components/component-library"),h=w(e("../../../helpers/constants/zendesk-url")),g=e("../../../helpers/constants/design-system"),v=e("../../../selectors/selectors"),T=w(e("../../../helpers/higher-order-components/with-router-hooks/with-router-hooks")),y=e("../../../../shared/constants/keyring"),k=e("../../../../shared/constants/metametrics"),S=w(e("./account-list")),C=w(e("./select-hardware")),A=e("./utils");function w(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var s={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var r=o?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(s,a,r):s[a]=e[a]}return s.default=e,n&&n.set(e,s),s}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=n.LEDGER_HD_PATHS=[{name:"Ledger Live",value:p.LEDGER_LIVE_PATH},{name:"Legacy (MEW / MyCrypto)",value:p.MEW_PATH},{name:"BIP44 Standard (e.g. MetaMask, Trezor)",value:p.BIP44_PATH}],I=n.LATTICE_HD_PATHS=[{name:`Standard (${p.LATTICE_STANDARD_BIP44_PATH})`,value:p.LATTICE_STANDARD_BIP44_PATH},{name:`Ledger Live (${p.LATTICE_LEDGER_LIVE_PATH})`,value:p.LATTICE_LEDGER_LIVE_PATH},{name:`Ledger Legacy (${p.LATTICE_MEW_PATH})`,value:p.LATTICE_MEW_PATH}],P=n.TREZOR_HD_PATHS=[{name:"BIP44 Standard (e.g. MetaMask, Trezor)",value:p.BIP44_PATH},{name:"Legacy (Ledger / MEW / MyCrypto)",value:p.MEW_PATH},{name:"Trezor Testnets",value:p.TREZOR_TESTNET_PATH}],M={ledger:E,lattice:I,trezor:P,oneKey:P};class R extends s.Component{constructor(...e){super(...e),b(this,"state",{error:null,selectedAccounts:[],accounts:[],browserSupported:!0,unlocked:!1,device:null,isFirefox:!1}),b(this,"connectToHardwareWallet",e=>{if(this.setState({device:e}),this.state.accounts.length)return;const t=this.getHardwareWalletKeyrings().length;this.context.trackEvent({event:k.MetaMetricsEventName.ConnectHardwareWalletClicked,properties:{device_type:(0,A.capitalizeStr)(e),connected_device_count:t}}),this.getPage(e,0,this.props.defaultHdPaths[e],!0)}),b(this,"onPathChange",e=>{this.props.setHardwareWalletDefaultHdPath({device:this.state.device,path:e}),this.setState({selectedAccounts:[]}),this.getPage(this.state.device,0,e)}),b(this,"onAccountChange",e=>{let{selectedAccounts:t}=this.state;t.includes(e)?t=t.filter(t=>e!==t):t.push(e),this.setState({selectedAccounts:t,error:null})}),b(this,"onAccountRestriction",()=>{this.setState({error:this.context.t("ledgerAccountRestriction")})}),b(this,"getPage",(e,t,n,s)=>{this.props.connectHardware(e,t,n,s,this.context.t).then(t=>{if(t.length){0!==this.state.accounts.length||this.state.unlocked||this.showTemporaryAlert();const n=t.map(e=>{var t;const n=e.address.toLowerCase(),s=(null===(t=this.props.accounts[n])||void 0===t?void 0:t.balance)||null;return e.balance=s?(0,l.formatBalance)(s,6):"...",e});this.setState({accounts:n,unlocked:!0,device:e,error:null})}}).catch(e=>{const t="string"==typeof e?e:e.message,n=Object.keys(p.LEDGER_ERRORS_CODES).find(e=>t.includes(e));var s,o;"Window blocked"===t?this.setState({browserSupported:!1,error:null}):t.includes(p.U2F_ERROR)?this.setState({error:p.U2F_ERROR}):"LEDGER_LOCKED"===t||"LEDGER_WRONG_APP"===t?this.setState({error:this.context.t("ledgerLocked")}):t.includes("timeout")?this.setState({error:this.context.t("ledgerTimeout")}):n?this.setState({error:`${t} - ${s=n,Object.keys(p.LEDGER_ERRORS_CODES).includes(s)?o(p.LEDGER_ERRORS_CODES[s]):s}`}):t.toLowerCase().includes("KeystoneError#pubkey_account.no_expected_account".toLowerCase())?this.setState({error:this.context.t("QRHardwarePubkeyAccountOutOfRange")}):"Window closed"!==t&&"Popup closed"!==t&&!1===t.toLowerCase().includes("KeystoneError#sync_cancel".toLowerCase())&&this.setState({error:t})})}),b(this,"onForgetDevice",(e,t)=>{const{trackEvent:n}=this.context,{forgetDevice:s}=this.props;s(e).then(t=>{n({event:k.MetaMetricsEventName.HardwareWalletForgotten,properties:{device_type:(0,A.capitalizeStr)(e)}}),this.setState({error:null,selectedAccounts:[],accounts:[],unlocked:!1})}).catch(s=>{n({event:k.MetaMetricsEventName.HardwareWalletConnectionFailed,properties:{hd_path:t,device_type:(0,A.capitalizeStr)(e),error:s.message}}),this.setState({error:s.message})})}),b(this,"onUnlockAccounts",async(e,t)=>{const{navigate:n,mostRecentOverviewPage:s,unlockHardwareWalletAccounts:o,hdEntropyIndex:a}=this.props,{selectedAccounts:r}=this.state,{trackEvent:i}=this.context;0===r.length&&this.setState({error:this.context.t("accountSelectionRequired")});const c=p.MEW_PATH===t?this.context.t("hardwareWalletLegacyDescription"):"";return o(r,e,t||null,c).then(o=>{this.context.trackEvent({category:k.MetaMetricsEventCategory.Accounts,event:k.MetaMetricsEventName.AccountAdded,properties:{account_type:k.MetaMetricsEventAccountType.Hardware,account_hardware_type:e,is_suggested_name:!0}});const a=this.getHardwareWalletKeyrings(),r=a.length,c=a.some(t=>t.type===p.DEVICE_KEYRING_MAP[e]);i({event:k.MetaMetricsEventName.HardwareWalletAccountConnected,properties:{device_type:(0,A.capitalizeStr)(e),hd_path:t,connected_device_count:c?r:r+1}}),n(s)}).catch(n=>{this.context.trackEvent({category:k.MetaMetricsEventCategory.Accounts,event:k.MetaMetricsEventName.AccountAddFailed,properties:{account_type:k.MetaMetricsEventAccountType.Hardware,account_hardware_type:e,error:n.message,hd_entropy_index:a}}),i({event:k.MetaMetricsEventName.HardwareWalletConnectionFailed,properties:{hd_path:t,device_type:(0,A.capitalizeStr)(e),error:n.message}}),this.setState({error:n.message})})}),b(this,"onCancel",()=>{const{navigate:e,mostRecentOverviewPage:t}=this.props;e(t)})}UNSAFE_componentWillReceiveProps(e){const{accounts:t}=e,n=this.state.accounts.map(e=>{var n;const s=e.address.toLowerCase(),o=(null===(n=t[s])||void 0===n?void 0:n.balance)||null;return e.balance=o?(0,l.formatBalance)(o,6):"...",e});this.setState({accounts:n})}componentDidMount(){this.checkIfUnlocked();const e=window.navigator.userAgent;/Firefox/u.test(e)&&this.setState({isFirefox:!0})}getHardwareWalletKeyrings(){const{keyrings:e}=this.props;return e.filter(e=>[y.KeyringType.ledger,y.KeyringType.trezor,y.KeyringType.lattice,y.KeyringType.qr,y.KeyringType.oneKey].includes(e.type)&&e.accounts.length>0)}async checkIfUnlocked(){for(const e of[p.HardwareDeviceNames.trezor,p.HardwareDeviceNames.oneKey,p.HardwareDeviceNames.ledger,p.HardwareDeviceNames.lattice]){const t=this.props.defaultHdPaths[e];await this.props.checkHardwareStatus(e,t)&&this.state.device&&(this.setState({unlocked:!0}),this.getPage(e,0,t))}}showTemporaryAlert(){this.props.showAlert(this.context.t("hardwareWalletConnected")),setTimeout(e=>{this.props.hideAlert()},5*m.SECOND)}renderError(){return this.state.error===p.U2F_ERROR?"ledger"===this.state.device&&this.state.isFirefox?s.default.createElement(s.default.Fragment,null,s.default.createElement(f.Text,{color:g.TextColor.warningDefault,margin:[5,5,2]},this.context.t("troubleConnectingToLedgerU2FOnFirefox",[s.default.createElement(f.Button,{variant:f.BUTTON_VARIANT.LINK,href:h.default.HARDWARE_CONNECTION,size:f.BUTTON_SIZES.INHERIT,key:"u2f-error-1",as:"a",block:!1,target:"_blank",rel:"noopener noreferrer"},this.context.t("troubleConnectingToLedgerU2FOnFirefox2"))])),s.default.createElement(f.Text,{color:g.TextColor.warningDefault,margin:[5,5,2]},this.context.t("troubleConnectingToLedgerU2FOnFirefoxLedgerSolution",[s.default.createElement(f.Button,{variant:f.BUTTON_VARIANT.LINK,href:h.default.LEDGER_FIREFOX_U2F_GUIDE,size:f.BUTTON_SIZES.INHERIT,key:"u2f-error-1",as:"a",target:"_blank",rel:"noopener noreferrer"},this.context.t("troubleConnectingToLedgerU2FOnFirefoxLedgerSolution2"))]))):s.default.createElement(f.Text,{color:g.TextColor.warningDefault,margin:[5,5,2]},this.context.t("troubleConnectingToWallet",[this.state.device,s.default.createElement(f.Button,{variant:f.BUTTON_VARIANT.LINK,href:h.default.HARDWARE_CONNECTION,key:"u2f-error-1"},this.context.t("walletConnectionGuide"))])):this.state.error?s.default.createElement("span",{className:"hw-connect__error"},this.state.error):null}renderContent(){return this.state.accounts.length?s.default.createElement(S.default,{onPathChange:this.onPathChange,selectedPath:this.props.defaultHdPaths[this.state.device],device:this.state.device,accounts:this.state.accounts,connectedAccounts:this.props.connectedAccounts,selectedAccounts:this.state.selectedAccounts,onAccountChange:this.onAccountChange,chainId:this.props.chainId,rpcPrefs:this.props.rpcPrefs,getPage:this.getPage,onUnlockAccounts:this.onUnlockAccounts,onForgetDevice:this.onForgetDevice,onCancel:this.onCancel,onAccountRestriction:this.onAccountRestriction,hdPaths:M}):s.default.createElement(C.default,{connectToHardwareWallet:this.connectToHardwareWallet,browserSupported:this.state.browserSupported,ledgerTransportType:this.props.ledgerTransportType,onCancel:this.onCancel})}render(){return s.default.createElement(s.default.Fragment,null,this.renderError(),this.renderContent())}}b(R,"contextTypes",{t:o.default.func}),R.propTypes={connectHardware:o.default.func,checkHardwareStatus:o.default.func,forgetDevice:o.default.func,showAlert:o.default.func,hideAlert:o.default.func,unlockHardwareWalletAccounts:o.default.func,setHardwareWalletDefaultHdPath:o.default.func,navigate:o.default.func,chainId:o.default.string,rpcPrefs:o.default.object,accounts:o.default.object,connectedAccounts:o.default.array.isRequired,defaultHdPaths:o.default.object,mostRecentOverviewPage:o.default.string.isRequired,ledgerTransportType:o.default.oneOf(Object.values(p.LedgerTransportTypes)),hdEntropyIndex:o.default.number,keyrings:o.default.array.isRequired};R.contextTypes={t:o.default.func,trackEvent:o.default.func};n.default=(0,r.compose)(T.default,(0,a.connect)(e=>({chainId:(0,c.getCurrentChainId)(e),rpcPrefs:(0,u.getRpcPrefsForCurrentProvider)(e),accounts:(0,u.getMetaMaskAccounts)(e),connectedAccounts:(0,u.getMetaMaskAccountsConnected)(e),defaultHdPaths:e.appState.defaultHdPaths,mostRecentOverviewPage:(0,d.getMostRecentOverviewPage)(e),ledgerTransportType:e.metamask.ledgerTransportType,hdEntropyIndex:(0,v.getHDEntropyIndex)(e),keyrings:e.metamask.keyrings}),e=>({setHardwareWalletDefaultHdPath:({device:t,path:n})=>e(i.setHardwareWalletDefaultHdPath({device:t,path:n})),connectHardware:(t,n,s,o,a)=>e(i.connectHardware(t,n,s,o,a)),checkHardwareStatus:(t,n)=>e(i.checkHardwareStatus(t,n)),forgetDevice:t=>e(i.forgetDevice(t)),unlockHardwareWalletAccounts:(t,n,s,o)=>e(i.unlockHardwareWalletAccounts(t,n,s,o)),showAlert:t=>e(i.showAlert(t)),hideAlert:()=>e(i.hideAlert())})))(R)}}},{package:"$root$",file:"ui/pages/create-account/connect-hardware/index.js"}]],[],{});