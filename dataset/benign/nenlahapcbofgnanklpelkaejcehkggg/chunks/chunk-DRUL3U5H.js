import{a as x,b as O,c as P,d as V}from"./chunk-NXWKPA26.js";import{a as T,b as U}from"./chunk-RVO3M5CT.js";import{a as l,b as d}from"./chunk-N3S7YKRT.js";import{J as A,L,a as k,b as C,d as S,i as _}from"./chunk-HH5UG254.js";import{c as R}from"./chunk-EA7CGSTM.js";import{b as v}from"./chunk-N2ICXIKO.js";import{a as N}from"./chunk-6JGDJAZ5.js";import{a as y}from"./chunk-CQXN2NRJ.js";import{a as E}from"./chunk-UW4IVTWM.js";import{a as B}from"./chunk-6ILBPYHJ.js";import{b as G}from"./chunk-GNZEMFDT.js";import{b as D,h as t,n,v as b}from"./chunk-4XUWKJYA.js";import{b as q,c as F}from"./chunk-AYDLOBCW.js";import{e as f}from"./chunk-3GYLW4KZ.js";var J=f(q()),u=f(F()),h=f(G());var I=()=>b("getEnergyCashbackDomains");window.__wb_timing.cashbackRequireAt=performance.now();var i,g=!1;async function j(){await J.default.all([B(),y(),_(),N(),I(),O(),x()]).spread((a,e,s,c,o,r,m)=>{E(a),t.merge({siteAPIData:e}),t.merge({cashback:s}),t.set("lifetimeSavings",c),t.set("energyCashbackDomains",o),t.set(["couponView","elasticityUserDomain"],r),t.set("domainLists",m)}),n("ext_instant_init_notifs")||document.readyState!=="loading"?p():document.addEventListener("DOMContentLoaded",p)}async function p(a=!1){g=a;let e=t.get("siteAPIData"),s=u.default.get(e,"tld");D(s);let c=t.get("cashback");t.set("cashbackVisible",!1);let o=await l("emailCreateAccount");if(o&&JSON.parse(o)?.shouldLoadNotification&&(await d("emailCreateAccount"),R(u.default.get(c,"reward",null))),(k()||C())&&!A())return S(),!1;let r=await l("affiliateRedirect");if(r){let w=JSON.parse(r);t.set("affiliateRedirect",w),await d("affiliateRedirect")}let m=t.get(["deweyResult"]);M(m),z()}async function z(){v.emitter.on("result",async a=>{let e=await P();V(e),M(a)})}async function M(a){t.get("cashbackVisible")||!a||i||H(a)}async function H(a){if(!(i&&!g)){if(n("ext_to_eml_abe_checkout")||n("ext_to_ma_abe_checkout")){i=!0;let e=await T(a,["cartPage","checkoutPage"],{allowOnly:[h.BonusOfferType.firstTimeEmailActivationBonus,h.BonusOfferType.desktopToMobileAppBonus]});if(e){U(e);return}}i=!0,L(a,{devRewardTest:g}).then(()=>{i=t.get("cashbackVisible")})}}j();export{p as a};
