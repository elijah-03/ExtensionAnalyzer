(()=>{const e=new Map,n=new Map,t=window.chrome&&window.chrome.runtime;async function o(){window.postMessage({type:"pdfPing",source:"extension",data:{}},window.location.origin)}t.onMessage.addListener((t=>{var o;"pdfContentChunk"===t.action?function(t){const o=e.get(t.fileName);n.set(t.fileName,t.totalChunks),o&&(o[t.chunkIndex]=new Uint8Array(t.data))}(t):"pdfContentChunkDone"===t.action?function(t){const o=e.get(t.fileName),i=n.get(t.fileName);if(o&&void 0!==i&&o.length===i&&o.every((e=>void 0!==e))){const i=new Blob(o,{type:"application/pdf"}),a=URL.createObjectURL(i);e.delete(t.fileName),n.delete(t.fileName),window.postMessage({type:"pdfContent",source:"extension",data:{url:a,fileName:t.fileName}},window.location.origin)}else window.postMessage({type:"pdfContent",source:"extension",data:{errorType:-1,fileName:t.fileName}},window.location.origin)}(t):"pdfContentGetError"===t.action&&(o=t,e.delete(o.fileName),n.delete(o.fileName),window.postMessage({type:"pdfContent",source:"extension",data:{errorType:"overSize"===o.errorType?-2:-1,fileName:o.fileName}},window.location.origin))})),window.addEventListener("message",(async n=>{var i;n.source===window&&n.origin===window.location.origin&&"page"===n.data.source&&("pdfPing"===n.data.type&&o(),"getPdfContentFromPdfPlugin"===n.data.type&&(i=n.data.data,e.set(i,[]),t.sendMessage({action:"getPdfContent",url:i})))})),o()})();