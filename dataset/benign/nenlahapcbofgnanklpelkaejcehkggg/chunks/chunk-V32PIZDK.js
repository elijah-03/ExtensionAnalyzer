import{a as Tt}from"./chunk-3SM435XU.js";import{a as Qt,b as Xt,c as Ai,d as Mi,e as Fi}from"./chunk-5MNKLLPH.js";import{a as Zt}from"./chunk-IQFNOK3G.js";import{a as Li}from"./chunk-HPSGHK7L.js";import{b as A}from"./chunk-GXPO46BF.js";import{a as Ni,c as Ii}from"./chunk-XZWN3GGK.js";import{a as Oi}from"./chunk-2Q63MOXU.js";import{a as Ei,e as Bi}from"./chunk-DPMK7ZVG.js";import{f as dt}from"./chunk-D3B67B3M.js";import{a as xe}from"./chunk-H6FSK4DZ.js";import{a as ut}from"./chunk-2GAAOKGQ.js";import{c as Di,d as ke,f as Kt,l as Jt,q as ti}from"./chunk-KJBXKQ52.js";import{h as ot,m as Ri,n as D,o as E,v as Ti}from"./chunk-4XUWKJYA.js";import{a as Pi,d as ye}from"./chunk-VM2OHO33.js";import{a as Ci,b as ve}from"./chunk-74K3EJN3.js";import{a as Si,d as we}from"./chunk-W7K6NY26.js";import{F as P,z as j}from"./chunk-K2PA57PF.js";import{b as be,c as Rt}from"./chunk-AYDLOBCW.js";import{a as Q,c as Gt}from"./chunk-JENJKWHP.js";import{c as ge,e as b}from"./chunk-3GYLW4KZ.js";var Qi=ge((ht,pi)=>{(function(o,e){typeof ht=="object"&&typeof pi=="object"?pi.exports=e(j()):typeof define=="function"&&define.amd?define(["react"],e):typeof ht=="object"?ht.ReactConfetti=e(j()):o.ReactConfetti=e(o.React)})(typeof self<"u"?self:ht,function(o){return function(e){var n={};function a(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,a),t.l=!0,t.exports}return a.m=e,a.c=n,a.d=function(r,t,i){a.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:i})},a.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},a.t=function(r,t){if(1&t&&(r=a(r)),8&t||4&t&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&t&&typeof r!="string")for(var s in r)a.d(i,s,function(p){return r[p]}.bind(null,s));return i},a.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return a.d(t,"a",t),t},a.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},a.p="",a(a.s=2)}([function(e,n){e.exports=o},function(e,n,a){"use strict";var r={linear:function(t,i,s,p){return(s-i)*t/p+i},easeInQuad:function(t,i,s,p){return(s-i)*(t/=p)*t+i},easeOutQuad:function(t,i,s,p){return-(s-i)*(t/=p)*(t-2)+i},easeInOutQuad:function(t,i,s,p){var c=s-i;return(t/=p/2)<1?c/2*t*t+i:-c/2*(--t*(t-2)-1)+i},easeInCubic:function(t,i,s,p){return(s-i)*(t/=p)*t*t+i},easeOutCubic:function(t,i,s,p){return(s-i)*((t=t/p-1)*t*t+1)+i},easeInOutCubic:function(t,i,s,p){var c=s-i;return(t/=p/2)<1?c/2*t*t*t+i:c/2*((t-=2)*t*t+2)+i},easeInQuart:function(t,i,s,p){return(s-i)*(t/=p)*t*t*t+i},easeOutQuart:function(t,i,s,p){return-(s-i)*((t=t/p-1)*t*t*t-1)+i},easeInOutQuart:function(t,i,s,p){var c=s-i;return(t/=p/2)<1?c/2*t*t*t*t+i:-c/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(t,i,s,p){return(s-i)*(t/=p)*t*t*t*t+i},easeOutQuint:function(t,i,s,p){return(s-i)*((t=t/p-1)*t*t*t*t+1)+i},easeInOutQuint:function(t,i,s,p){var c=s-i;return(t/=p/2)<1?c/2*t*t*t*t*t+i:c/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(t,i,s,p){var c=s-i;return-c*Math.cos(t/p*(Math.PI/2))+c+i},easeOutSine:function(t,i,s,p){return(s-i)*Math.sin(t/p*(Math.PI/2))+i},easeInOutSine:function(t,i,s,p){return-(s-i)/2*(Math.cos(Math.PI*t/p)-1)+i},easeInExpo:function(t,i,s,p){return t==0?i:(s-i)*Math.pow(2,10*(t/p-1))+i},easeOutExpo:function(t,i,s,p){var c=s-i;return t==p?i+c:c*(1-Math.pow(2,-10*t/p))+i},easeInOutExpo:function(t,i,s,p){var c=s-i;return t===0?i:t===p?i+c:(t/=p/2)<1?c/2*Math.pow(2,10*(t-1))+i:c/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(t,i,s,p){return-(s-i)*(Math.sqrt(1-(t/=p)*t)-1)+i},easeOutCirc:function(t,i,s,p){return(s-i)*Math.sqrt(1-(t=t/p-1)*t)+i},easeInOutCirc:function(t,i,s,p){var c=s-i;return(t/=p/2)<1?-c/2*(Math.sqrt(1-t*t)-1)+i:c/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(t,i,s,p){var c,g,y,h=s-i;return y=1.70158,t===0?i:(t/=p)==1?i+h:((g=0)||(g=.3*p),(c=h)<Math.abs(h)?(c=h,y=g/4):y=g/(2*Math.PI)*Math.asin(h/c),-c*Math.pow(2,10*(t-=1))*Math.sin((t*p-y)*(2*Math.PI)/g)+i)},easeOutElastic:function(t,i,s,p){var c,g,y,h=s-i;return y=1.70158,t===0?i:(t/=p)==1?i+h:((g=0)||(g=.3*p),(c=h)<Math.abs(h)?(c=h,y=g/4):y=g/(2*Math.PI)*Math.asin(h/c),c*Math.pow(2,-10*t)*Math.sin((t*p-y)*(2*Math.PI)/g)+h+i)},easeInOutElastic:function(t,i,s,p){var c,g,y,h=s-i;return y=1.70158,t===0?i:(t/=p/2)==2?i+h:((g=0)||(g=p*.44999999999999996),(c=h)<Math.abs(h)?(c=h,y=g/4):y=g/(2*Math.PI)*Math.asin(h/c),t<1?c*Math.pow(2,10*(t-=1))*Math.sin((t*p-y)*(2*Math.PI)/g)*-.5+i:c*Math.pow(2,-10*(t-=1))*Math.sin((t*p-y)*(2*Math.PI)/g)*.5+h+i)},easeInBack:function(t,i,s,p,c){return c===void 0&&(c=1.70158),(s-i)*(t/=p)*t*((c+1)*t-c)+i},easeOutBack:function(t,i,s,p,c){return c===void 0&&(c=1.70158),(s-i)*((t=t/p-1)*t*((c+1)*t+c)+1)+i},easeInOutBack:function(t,i,s,p,c){var g=s-i;return c===void 0&&(c=1.70158),(t/=p/2)<1?g/2*(t*t*((1+(c*=1.525))*t-c))+i:g/2*((t-=2)*t*((1+(c*=1.525))*t+c)+2)+i},easeInBounce:function(t,i,s,p){var c=s-i;return c-r.easeOutBounce(p-t,0,c,p)+i},easeOutBounce:function(t,i,s,p){var c=s-i;return(t/=p)<.36363636363636365?c*(7.5625*t*t)+i:t<.7272727272727273?c*(7.5625*(t-=.5454545454545454)*t+.75)+i:t<.9090909090909091?c*(7.5625*(t-=.8181818181818182)*t+.9375)+i:c*(7.5625*(t-=.9545454545454546)*t+.984375)+i},easeInOutBounce:function(t,i,s,p){var c=s-i;return t<p/2?.5*r.easeInBounce(2*t,0,c,p)+i:.5*r.easeOutBounce(2*t-p,0,c,p)+.5*c+i}};e.exports=r},function(e,n,a){e.exports=a(3)},function(e,n,a){"use strict";a.r(n),a.d(n,"ReactConfetti",function(){return yi});var r,t,i=a(0),s=a.n(i),p=a(1),c=a.n(p);function g(l,u){return l+Math.random()*(u-l)}function y(l,u){for(var _=0;_<u.length;_++){var d=u[_];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function h(l,u,_){return u in l?Object.defineProperty(l,u,{value:_,enumerable:!0,configurable:!0,writable:!0}):l[u]=_,l}(function(l){l[l.Circle=0]="Circle",l[l.Square=1]="Square",l[l.Strip=2]="Strip"})(r||(r={})),function(l){l[l.Positive=1]="Positive",l[l.Negative=-1]="Negative"}(t||(t={}));var L=function(){function l(x,k,m,R){(function(zt,lt){if(!(zt instanceof lt))throw new TypeError("Cannot call a class as a function")})(this,l),h(this,"context",void 0),h(this,"radius",void 0),h(this,"x",void 0),h(this,"y",void 0),h(this,"w",void 0),h(this,"h",void 0),h(this,"vx",void 0),h(this,"vy",void 0),h(this,"shape",void 0),h(this,"angle",void 0),h(this,"angularSpin",void 0),h(this,"color",void 0),h(this,"rotateY",void 0),h(this,"rotationDirection",void 0),h(this,"getOptions",void 0),this.getOptions=k;var T,C,I=this.getOptions(),W=I.colors,B=I.initialVelocityX,et=I.initialVelocityY;this.context=x,this.x=m,this.y=R,this.w=g(5,20),this.h=g(5,20),this.radius=g(5,10),this.vx=typeof B=="number"?g(-B,B):g(B.min,B.max),this.vy=typeof et=="number"?g(-et,0):g(et.min,et.max),this.shape=(T=0,C=2,Math.floor(T+Math.random()*(C-T+1))),this.angle=g(0,360)*Math.PI/180,this.angularSpin=g(-.2,.2),this.color=W[Math.floor(Math.random()*W.length)],this.rotateY=g(0,1),this.rotationDirection=g(0,1)?t.Positive:t.Negative}var u,_,d;return u=l,(_=[{key:"update",value:function(){var x=this.getOptions(),k=x.gravity,m=x.wind,R=x.friction,T=x.opacity,C=x.drawShape;this.x+=this.vx,this.y+=this.vy,this.vy+=k,this.vx+=m,this.vx*=R,this.vy*=R,this.rotateY>=1&&this.rotationDirection===t.Positive?this.rotationDirection=t.Negative:this.rotateY<=-1&&this.rotationDirection===t.Negative&&(this.rotationDirection=t.Positive);var I=.1*this.rotationDirection;if(this.rotateY+=I,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=T,this.context.lineCap="round",this.context.lineWidth=2,C&&typeof C=="function")C.call(this,this.context);else switch(this.shape){case r.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case r.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case r.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}])&&y(u.prototype,_),d&&y(u,d),l}();function N(l,u,_){return u in l?Object.defineProperty(l,u,{value:_,enumerable:!0,configurable:!0,writable:!0}):l[u]=_,l}var M=function l(u,_){var d=this;(function(k,m){if(!(k instanceof m))throw new TypeError("Cannot call a class as a function")})(this,l),N(this,"canvas",void 0),N(this,"context",void 0),N(this,"getOptions",void 0),N(this,"x",0),N(this,"y",0),N(this,"w",0),N(this,"h",0),N(this,"lastNumberOfPieces",0),N(this,"tweenInitTime",Date.now()),N(this,"particles",[]),N(this,"particlesGenerated",0),N(this,"removeParticleAt",function(k){d.particles.splice(k,1)}),N(this,"getParticle",function(){var k=g(d.x,d.w+d.x),m=g(d.y,d.h+d.y);return new L(d.context,d.getOptions,k,m)}),N(this,"animate",function(){var k=d.canvas,m=d.context,R=d.particlesGenerated,T=d.lastNumberOfPieces,C=d.getOptions(),I=C.run,W=C.recycle,B=C.numberOfPieces,et=C.debug,zt=C.tweenFunction,lt=C.tweenDuration;if(!I)return!1;var Ht=d.particles.length,pt=W?Ht:R,Ut=Date.now();if(pt<B){T!==B&&(d.tweenInitTime=Ut,d.lastNumberOfPieces=B);for(var wi=d.tweenInitTime,he=zt(Ut-wi>lt?lt:Math.max(0,Ut-wi),pt,B,lt),vi=Math.round(he-pt),ki=0;ki<vi;ki++)d.particles.push(d.getParticle());d.particlesGenerated+=vi}return et&&(m.font="12px sans-serif",m.fillStyle="#333",m.textAlign="right",m.fillText("Particles: ".concat(Ht),k.width-10,k.height-20)),d.particles.forEach(function(ct,xi){ct.update(),(ct.y>k.height||ct.y<-100||ct.x>k.width+100||ct.x<-100)&&(W&&pt<=B?d.particles[xi]=d.getParticle():d.removeParticleAt(xi))}),Ht>0||pt<B}),this.canvas=u;var x=this.canvas.getContext("2d");if(!x)throw new Error("Could not get canvas context");this.context=x,this.getOptions=_};function $(l,u){var _=Object.keys(l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);u&&(d=d.filter(function(x){return Object.getOwnPropertyDescriptor(l,x).enumerable})),_.push.apply(_,d)}return _}function z(l){for(var u=1;u<arguments.length;u++){var _=arguments[u]!=null?arguments[u]:{};u%2?$(Object(_),!0).forEach(function(d){F(l,d,_[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(_)):$(Object(_)).forEach(function(d){Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(_,d))})}return l}function kt(l,u){for(var _=0;_<u.length;_++){var d=u[_];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function F(l,u,_){return u in l?Object.defineProperty(l,u,{value:_,enumerable:!0,configurable:!0,writable:!0}):l[u]=_,l}var rt={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:c.a.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0},Ft=function(){function l(x,k){var m=this;(function(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")})(this,l),F(this,"canvas",void 0),F(this,"context",void 0),F(this,"_options",void 0),F(this,"generator",void 0),F(this,"rafId",void 0),F(this,"setOptionsWithDefaults",function(T){var C={confettiSource:{x:0,y:0,w:m.canvas.width,h:0}};m._options=z(z(z({},C),rt),T),Object.assign(m,T.confettiSource)}),F(this,"update",function(){var T=m.options,C=T.run,I=T.onConfettiComplete,W=m.canvas,B=m.context;C&&(B.fillStyle="white",B.clearRect(0,0,W.width,W.height)),m.generator.animate()?m.rafId=requestAnimationFrame(m.update):(I&&typeof I=="function"&&m.generator.particlesGenerated>0&&I.call(m,m),m._options.run=!1)}),F(this,"reset",function(){m.generator&&m.generator.particlesGenerated>0&&(m.generator.particlesGenerated=0,m.generator.particles=[],m.generator.lastNumberOfPieces=0)}),F(this,"stop",function(){m.options={run:!1},m.rafId&&(cancelAnimationFrame(m.rafId),m.rafId=void 0)}),this.canvas=x;var R=this.canvas.getContext("2d");if(!R)throw new Error("Could not get canvas context");this.context=R,this.generator=new M(this.canvas,function(){return m.options}),this.options=k,this.update()}var u,_,d;return u=l,(_=[{key:"options",get:function(){return this._options},set:function(x){var k=this._options&&this._options.run,m=this._options&&this._options.recycle;this.setOptionsWithDefaults(x),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof x.recycle=="boolean"&&x.recycle&&m===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof x.run=="boolean"&&x.run&&k===!1&&this.update()}}])&&kt(u.prototype,_),d&&kt(u,d),l}();function Lt(l){return function(u){if(Array.isArray(u))return tt(u)}(l)||function(u){if(typeof Symbol<"u"&&Symbol.iterator in Object(u))return Array.from(u)}(l)||U(l)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function H(l){return(H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(l)}function Z(){return(Z=Object.assign||function(l){for(var u=1;u<arguments.length;u++){var _=arguments[u];for(var d in _)Object.prototype.hasOwnProperty.call(_,d)&&(l[d]=_[d])}return l}).apply(this,arguments)}function xt(l,u){var _=Object.keys(l);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);u&&(d=d.filter(function(x){return Object.getOwnPropertyDescriptor(l,x).enumerable})),_.push.apply(_,d)}return _}function Pt(l){for(var u=1;u<arguments.length;u++){var _=arguments[u]!=null?arguments[u]:{};u%2?xt(Object(_),!0).forEach(function(d){st(l,d,_[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(_)):xt(Object(_)).forEach(function(d){Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(_,d))})}return l}function St(l,u){return function(_){if(Array.isArray(_))return _}(l)||function(_,d){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var x=[],k=!0,m=!1,R=void 0;try{for(var T,C=_[Symbol.iterator]();!(k=(T=C.next()).done)&&(x.push(T.value),!d||x.length!==d);k=!0);}catch(I){m=!0,R=I}finally{try{k||C.return==null||C.return()}finally{if(m)throw R}}return x}}(l,u)||U(l,u)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function U(l,u){if(l){if(typeof l=="string")return tt(l,u);var _=Object.prototype.toString.call(l).slice(8,-1);return _==="Object"&&l.constructor&&(_=l.constructor.name),_==="Map"||_==="Set"?Array.from(l):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?tt(l,u):void 0}}function tt(l,u){(u==null||u>l.length)&&(u=l.length);for(var _=0,d=new Array(u);_<u;_++)d[_]=l[_];return d}function Ct(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}function G(l,u){for(var _=0;_<u.length;_++){var d=u[_];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}function it(l,u){return(it=Object.setPrototypeOf||function(_,d){return _.__proto__=d,_})(l,u)}function Vt(l){var u=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var _,d=Wt(l);if(u){var x=Wt(this).constructor;_=Reflect.construct(d,arguments,x)}else _=d.apply(this,arguments);return jt(this,_)}}function jt(l,u){return!u||H(u)!=="object"&&typeof u!="function"?$t(l):u}function $t(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function Wt(l){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)})(l)}function st(l,u,_){return u in l?Object.defineProperty(l,u,{value:_,enumerable:!0,configurable:!0,writable:!0}):l[u]=_,l}var me=s.a.createRef(),Yt=function(l){(function(m,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(R&&R.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),R&&it(m,R)})(k,l);var u,_,d,x=Vt(k);function k(m){var R;Ct(this,k);for(var T=arguments.length,C=new Array(T>1?T-1:0),I=1;I<T;I++)C[I-1]=arguments[I];return st($t(R=x.call.apply(x,[this,m].concat(C))),"canvas",s.a.createRef()),st($t(R),"confetti",void 0),R.canvas=m.canvasRef||me,R}return u=k,(_=[{key:"componentDidMount",value:function(){if(this.canvas.current){var m=qt(this.props)[0];this.confetti=new Ft(this.canvas.current,m)}}},{key:"componentDidUpdate",value:function(){var m=qt(this.props)[0];this.confetti&&(this.confetti.options=m)}},{key:"componentWillUnmount",value:function(){this.confetti&&this.confetti.stop(),this.confetti=void 0}},{key:"render",value:function(){var m=St(qt(this.props),2),R=m[0],T=m[1],C=Pt({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},T.style);return s.a.createElement("canvas",Z({width:R.width,height:R.height,ref:this.canvas},T,{style:C}))}}])&&G(u.prototype,_),d&&G(u,d),k}(i.Component);function qt(l){var u={},_={},d=[].concat(Lt(Object.keys(rt)),["confettiSource","drawShape","onConfettiComplete"]),x=["canvasRef"];for(var k in l){var m=l[k];d.includes(k)?u[k]=m:x.includes(k)?x[k]=m:_[k]=m}return[u,_,{}]}st(Yt,"defaultProps",Pt({},rt)),st(Yt,"displayName","ReactConfetti");var yi=s.a.forwardRef(function(l,u){return s.a.createElement(Yt,Z({canvasRef:u},l))});n.default=yi}]).default})});Gt();function ii(o=0,e=0,n="disable_price_run"){return D(n)&&e>0&&o<=e?(Q(`***price run is disabled for items <= $${Math.round(e)/100}***`),!0):!1}var bi=b(Rt());var ue=b(j()),de=b(be()),f=b(Rt());we();ve();var Dt=b(j()),Vi=b(ke());var nt=o=>{let{containerNamespace:e,children:n}=o,a=ot.get(["additionalContentNamespace",e])();if(!a)return null;let r=".__wikibuy",t=(0,Dt.useRef)();return t.current||(t.current=document.createElement("div"),a.querySelector(r).appendChild(t.current)),(0,Dt.useEffect)(()=>()=>a.querySelector(r).removeChild(t.current),[]),Vi.default.createPortal(n,t.current)};var Wi=b(j()),Yi=b(Rt());function ei(o){return Ti("showFollow",o)}Gt();function X(){return D("retail_pc_blocks")}async function ji(o){if(X())try{let e=Ni(o);if(e)return await Ii(e)}catch(e){Q("getBlocksContent error",e)}}var $i=b(j());var K=b(P()),oi=class extends $i.Component{render(){return(0,K.jsx)("div",{className:`annotation-tooltip-component ${this.props.classes||""}`,onClick:e=>{e.stopPropagation()},children:(0,K.jsxs)("div",{className:"annotation-tooltip-container",children:[(0,K.jsxs)("div",{className:"header",children:[(0,K.jsx)(ut,{}),(0,K.jsx)(Oi,{onClick:this.props.onCloseTooltip.bind(this,"x")})]}),this.props.children]})})}},_t=oi;var Nt=b(P());function Ot(o){return o.content?(0,Nt.jsxs)("div",{className:o.classes,onClick:e=>e.stopPropagation(),children:[(0,Nt.jsx)(Bi,{client:Ei.DESKTOP_WEB,config:{rootEl:"div",logLevel:null},content:o.content,data:o.data,onEvent:e=>{let n=e?.eventName;if(n==="retail_pc_dismiss_popover")o.onCloseTooltip?.();else if(n==="retail_pc_visit_merchant"){let r=o.data?.results?.find(t=>t.match.id===e?.data?.propsData?.resultid);r&&o.visitMerchant?.(r.match)}else n==="retail_pc_view_c1_pdp"&&o.viewProductPage?.()}}),o.children]}):null}var v=b(P()),Pe={"amazon.com":"Amazon","homedepot.com":"Home Depot","bestbuy.com":"Best Buy","target.com":"Target"};function Se(o){if(!o)return{};let e=o.product?.vendor,n=o.product?.vendorName||Pe[e]||e;o.meta?.paymentsSupport&&(n="Capital One Shopping"),n=n==="Amazon"&&!o.origin?"Amz. Marketplace":n;let a={},r=o.pricing?.coupons?.length?"use code":"",t=o.pricing?.reward||{};r&&!o.meta?.paymentsSupport?(a.isCoupon=!0,a.value=r):t.amount&&t.type==="percentage"?(a.isReward=!0,a.type=t.type,a.value=t.amount/100):t.amount&&(a.isReward=!0,a.value=A(t.amount,{currency:t.amountCurrency||t.currency}));let i=o.meta?.verificationClassifierOutput?.verified,s=o.details?.estimatedDeliveryMinDays,p=o.details?.estimatedDeliveryMaxDays,c=s===p?p?`${p} days`:"":`${s} - ${p} days`;return{match:o,seller:n,delivery:c,specialOffer:a,total:A(o.pricing?.total),afterRewardTotal:A(o.pricing?.afterRewardTotal||o.pricing?.total),isSellerVerified:i}}var at=class extends Wi.Component{componentDidMount(){E("page",`offersListAnnotationTooltip${this.props.deweyPC?"_runv4":""}`,{view:this.props.view,type:"notificationHover",searchIndex:this.props.searchIndex})}render(){let e=Yi.default.get(this.props,"showViewAllOffers",!0)&&this.props.wbid,n=this.props?.filteredResults.map(Se),a=n.find(s=>s.specialOffer.isCoupon||s.specialOffer.isReward),r=D("notif_rounded_border")?"rounded-btn":"",t=!this.props.fullRunComplete,i=D("retail_pc_transparent_pricing_offers_list");return X()?(0,v.jsx)(Ot,{classes:"retail-pc-savings-list-blocks",content:this.props.blocksContent,data:{results:n,findingMoreOffers:t,showViewAllOffers:e},onCloseTooltip:this.props.hideSavingsDetails,visitMerchant:this.visitMerchant.bind(this),viewProductPage:()=>this.props.viewProductPage("view")}):(0,v.jsx)(_t,{classes:`result-table-tooltip ${(this.props.originVendor||"").replace(".com","")} ${i?"transparent-pricing":""}`,onCloseTooltip:()=>this.props.hideSavingsDetails(),children:(0,v.jsxs)("div",{className:"result-list",children:[(0,v.jsx)("div",{className:"list-header",children:i?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h3",{className:"seller",children:"Seller"}),a?(0,v.jsx)("h3",{className:"special-offer",children:"Special Offer"}):null,(0,v.jsx)("h3",{className:"total",children:"Total"}),(0,v.jsx)("h3",{className:"after-reward-total",children:"After Rewards"})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h3",{className:"seller",children:"Seller"}),(0,v.jsx)("h3",{className:"delivery",children:"Delivery"}),a?(0,v.jsx)("h3",{className:"special-offer",children:"Special Offer"}):null,(0,v.jsx)("h3",{className:"after-reward-total",children:"Est. Total"})]})}),n.map(s=>{let{match:p,seller:c,delivery:g,specialOffer:y,total:h,afterRewardTotal:L,isSellerVerified:N}=s;return(0,v.jsxs)("div",{className:"result-list-item",onClick:M=>{M.stopPropagation(),this.visitMerchant(p)},children:[(0,v.jsx)("h3",{className:`seller ${N?"verified":""}`,children:c}),i?null:(0,v.jsx)("h3",{className:"delivery",children:(0,v.jsx)("span",{children:g})}),a?(0,v.jsx)("h3",{className:"special-offer",children:y.isCoupon?(0,v.jsx)("span",{className:"icon-coupon coupon",children:y.value}):y.isReward&&y.type==="percentage"?(0,v.jsxs)("span",{className:"palmetto",children:[`+${y.value}% `," ",(0,v.jsx)("span",{className:"reward-break",children:"back"})]}):y.isReward?(0,v.jsxs)("span",{className:"palmetto",children:[`+${y.value}`," ",(0,v.jsx)("span",{className:"reward-break",children:"in Rewards"})]}):null}):null,i?(0,v.jsx)("h3",{className:"total",children:h}):null,(0,v.jsx)("h3",{className:`after-reward-total primary-btn-large ${r}`,children:L})]},p.id)}),t?(0,v.jsx)("h5",{className:"finding-more bold",children:"Finding more offers"}):null,e?(0,v.jsxs)("span",{children:[(0,v.jsx)("div",{className:"rule"}),(0,v.jsx)("h5",{style:{textAlign:"center",marginTop:"10px"},children:(0,v.jsx)("span",{className:"primary-link",onClick:s=>{s.preventDefault(),this.props.viewProductPage("view")},children:"View all offers"})})]}):null]})})}visitMerchant(e){ei({details:e,run:this.props.run,productData:e.product}),this.props.visitMerchant(e,!0)}};var qi=b(j());var V=b(P()),zi=({data:o,onCloseTooltip:e})=>{let{ctaText:n,deviceType:a,image:r,link:t,reward:i,subheaderText:s}=o,p=()=>{E("track","wirelessDevicePcExperience",{view:name,label:n,deviceType:a}),window.open(t,"_blank")},c=()=>{e&&(E("page","wirelessTooltip",{type:"notificationDismiss",label:a}),e())};return(0,qi.useEffect)(()=>{E("page","wirelessTooltip",{type:"notificationHover",label:a})},[]),(0,V.jsx)(_t,{onCloseTooltip:c,classes:"wireless-pc-annotation",children:(0,V.jsxs)("div",{className:"wireless-pc-annotation-main align-center",children:[(0,V.jsxs)("p",{children:[(0,V.jsxs)("div",{className:"wireless-header",children:[(0,V.jsx)("span",{className:"favorable",children:i})," in Rewards"]}),s]}),(0,V.jsx)("p",{children:(0,V.jsx)("img",{src:r,alt:"Wireless Price Comparison"})}),(0,V.jsx)("span",{className:"text"}),(0,V.jsx)("button",{className:"primary-btn-large full-button",onClick:p,children:n})]})})};var Hi=o=>Tt("getCart",o);var ni=o=>Tt("getEstimate",o);var ai=b(Rt());Gt();var ft={transparentPricingVersion2VariantB:"transparentPricingVersion2VariantB",transparentPricingVersion3Variant1:"transparentPricingVersion3Variant1",transparentPricingVersion3Variant2:"transparentPricingVersion3Variant2"},J={...ft,standardPricing:"standardPricing"};function mt(o){let e=ai.default.get(o,"savingsWithRewards")||ai.default.get(o,"savings")||0;return Math.max(0,e)}function Ce(o,e){if(D("disable_pc_savings_alert")){Q("PC savings alert is disabled.");return}E("track","priceRunSavings",{quoteId:o,pageType:e})}function Ui(o,e,n,a,r){if(o&&!e.has(o)&&n&&a){e.add(o);try{Ce(o,r)}catch(i){Q("*** failure to send savings alert ***",i)}}return e}function ri(){let o;return D("retail_pc_transparent_pricing_variant_b")?o=J.transparentPricingVersion2VariantB:D("retail_pc_transparent_pricing_v3_variant_1")?o=J.transparentPricingVersion3Variant1:D("retail_pc_transparent_pricing_v3_variant_2")?o=J.transparentPricingVersion3Variant2:o=J.standardPricing,o}var wt=b(j()),vt=b(xe());var Gi=b(j());ye();function si(){let o=document.querySelector("#honeyContainer"),e=document.querySelector("#piggyWrapper");if(o){let n=o.shadowRoot.querySelector("#honey-shadow").style;if(o.shadowRoot.querySelector("#cornerContent")&&(n.opacity==="1"||n.visibility==="visible"))return{updated:!0,offset:"455px"}}return e&&(e.offsetWidth>0||e.offsetHeight>0)?{updated:!0,offset:"340px"}:document.querySelector(".ebates-notification")||document.querySelector(".ebates-hover.ebates-hover-top")?{updated:!0,offset:"420px"}:{updated:!1,offset:"0"}}function li(o,e=200,n={}){let{maxBackoff:a=7e3,maxTries:r=25}=n,t=async()=>{let i=1;for(;e<a;){let s=si();s.updated&&o(s.offset),await Pi(e),i>r&&(e*=1.5),i+=1}};(0,Gi.useEffect)(()=>{t()},[])}var re=b(j()),Bt=b(Qi());var Xi=b(P()),Re=({onClick:o})=>(0,Xi.jsx)("div",{className:"close icon-x",onClick:o}),ci=Re;var Ji=b(P()),Te=({savings:o,children:e})=>(0,Ji.jsx)("p",{className:`text-2xl font-bold leading-9 ${o?"text-favorable":""}`,children:e}),Ki=Te;var It=b(P()),De=({children:o})=>(0,It.jsx)("div",{style:{textDecoration:"line-through",textDecorationColor:"red",marginTop:"-5px"},children:o}),Oe=({children:o})=>(0,It.jsx)(De,{children:(0,It.jsx)("p",{className:"leading-6 font-bold text-neutralsecondary",children:o})}),Zi=Oe;var gt=b(P()),Ne=({deal:o})=>(0,gt.jsxs)("div",{id:"dealPricing",style:{flexBasis:"50px"},children:[(0,gt.jsx)(Ki,{savings:o.rawSavings>0,children:o.dealPrice}),o.rawSavings>0?(0,gt.jsx)(Zi,{children:o.listPrice}):null]}),te=Ne;var ie=b(P()),Ie=({flexBasis:o,children:e,className:n=""})=>(0,ie.jsx)("p",{className:`fine-print-text text-[8px] leading-[12px] font-bold ${n}`,style:{color:"rgb(103, 103, 103)",flexBasis:`${o}`},children:e}),bt=Ie;var ee=b(P()),Ee=({children:o})=>(0,ee.jsx)("div",{className:"header",children:o}),ui=Ee;var di=b(P()),Be=({src:o,width:e,height:n,margin:a,alt:r})=>(0,di.jsx)("div",{style:{width:e,height:n,margin:a},children:(0,di.jsx)("img",{src:o,style:{width:"auto",height:"auto",fontSize:"8px",maxWidth:e,maxHeight:n},alt:r})}),_i=Be;var ne=b(P()),Ae=({rawSavings:o,formattedSavings:e,onClick:n})=>{let a=o&&o>0?`Save ${e}`:"View Offer",r=D("notif_rounded_border")?"rounded-btn":"";return(0,ne.jsx)(dt,{onClick:n,className:`w-full text-base h-[40px] ${r} green-btn`,children:a})},oe=Ae;function Et(o,e=""){let n=(o||e.replace(".com","")).replace(/[\u2019\u0027]/g,"'");return n.endsWith("'s")?n:n.endsWith("s")?`${n}'`:n?`${n}'s`:""}var S=b(P()),Me=(o,e)=>{let n="Amazing Deal",a="Great Deal",r="Good Deal",t=[{badgeText:n,badgeColor:"favorable"},{badgeText:a,badgeColor:"interaction"},{badgeText:r,badgeColor:"secondary"}],i=A(e),s=(U,tt,Ct)=>{let G=[];U>0&&G.push(`Includes ${A(U)} Shipping + Handling`),tt>0&&G.push(`after ${A(tt)} in Capital One Shopping Rewards`),Ct>0&&G.push(`Arrives in ${Ct} days`);let it="";return G.map((Vt,jt)=>{jt!=0&&(it+=", "),it+=Vt}),it},{id:p,product:c,pricing:g,shippingDays:y,savingsPercent:h=0,savingsWithRewardsPercent:L=0}=o,{image:N,vendor:M,vendorName:$,title:z,condition:kt}=c,{afterRewardTotal:F,total:rt,shipping:Ft,loyaltyAmount:Lt}=g,H=Math.max(L,h),Z=H>=.2?n:H>.1?a:H>0&&H<=.1?r:null,{badgeText:xt=null,badgeColor:Pt=null}=Z&&t.find(U=>U.badgeText===Z)||{},St=mt(o);return{id:p,vendorName:$,vendorDomain:M,productImageAlt:z,productImage:N,dealPrice:A(F||rt),finePrint:s(Ft,Lt,y),listPrice:i,rawSavings:St,formattedSavings:A(St).replace("-",""),itemCondition:kt||"Brand New",badgeText:xt,badgeColor:Pt,vendorPossessiveForm:Et($,M)}},Y=o=>A(o,{removeCents:!1}),Fe={transparentPricingVersion2VariantB:({savings:o})=>(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"text-base font-bold text-start text-green-500",children:["Save ",Y(o)," with Rewards and savings"]})}),transparentPricingVersion3Variant1:({savings:o,advertiserSubtotal:e,originSubtotal:n})=>(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"text-base text-black mt-3",children:["Save ",(0,S.jsx)("span",{className:"font-black",children:Y(o)})," in Rewards",e<n?" and savings!":"!"]})}),transparentPricingVersion3Variant2:({advertiserTotal:o,originTotal:e,afterRewardTotal:n,loyaltyAmount:a})=>(0,S.jsx)(S.Fragment,{children:o<e?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"text-md mt-2 mb-2",children:[(0,S.jsx)("span",{className:"font-bold text-green-500",children:Y(o)})," ",(0,S.jsx)("div",{style:{display:"inline",textDecoration:"line-through",textDecorationColor:"red"},children:(0,S.jsx)("span",{className:"text-gray-500 text-neutralsecondary",children:Y(e)})})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{className:"font-bold text-md text-black",children:Y(n)})," ",(0,S.jsx)("span",{className:"text-sm leading-4 text-gray-500",children:"after rewards"})]})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"text-black text-md mt-2 mb-2",children:["Pay ",(0,S.jsx)("span",{className:"font-bold",children:Y(o)})]}),(0,S.jsxs)("div",{className:"text-black text-md mb-2",children:["Get"," ",(0,S.jsx)("span",{className:"font-bold text-green-500",children:Y(a)})," ","back"]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{className:"font-bold text-black text-md",children:Y(n)})," ",(0,S.jsx)("span",{className:"text-sm text-gray-500",children:"after rewards"})]})]})})},Le=(o,e,n)=>{let a=mt(o),r={savings:a,loyaltyAmount:o.pricing.loyaltyAmount||0,advertiserTotal:o.pricing.total,advertiserSubtotal:o.pricing.afterDiscountSubtotal||o.pricing.subtotal,originSubtotal:n.subtotal,originTotal:n.total,afterRewardTotal:o.pricing.afterRewardTotal||o.pricing.total},t=Fe[e];return{isTransparentPricing:!0,SavingsInfo:()=>(0,S.jsx)(t,{...r}),productImage:o.product.image,productImageAlt:o.product.title,advertiserVendor:o.product.vendorName||o.product.vendor,savings:a,displayType:e}},Ve=(o,e,n)=>{if(Object.values(ft).includes(n))return Le(o,n,e.originResult.pricing);let r=Me(o,e.originResult.pricing.total);return e?.savingsPreferredImage&&(r.productImage=e.savingsPreferredImage),r},ae=Ve;var w=b(P()),je=({vendorName:o,vendorDomain:e,productImageAlt:n,productImage:a,itemCondition:r,dealPrice:t,finePrint:i,listPrice:s,onCloseTooltip:p,viewProductPage:c,rawSavings:g,formattedSavings:y})=>{let h=D("notif_rounded_border")?"rounded-notification":"";return(0,w.jsxs)("div",{className:`annotation-tooltip-component creatives ${h}`,onClick:L=>{L.stopPropagation()},children:[(0,w.jsxs)(ui,{children:[(0,w.jsx)(ut,{}),(0,w.jsx)(ci,{onClick:p})]}),(0,w.jsx)("div",{className:"annotation-tooltip-container",children:(0,w.jsxs)("div",{className:"annotation-tooltip-body min-w-[170px]",children:[(0,w.jsx)("p",{className:"leading-6 font-bold",children:"Savings Alert!"}),(0,w.jsx)(_i,{alt:n,src:a,width:"96px",height:"96px",margin:"auto"}),(0,w.jsxs)(bt,{className:"item-condition",children:["Item Condition: ",r]}),(0,w.jsxs)(bt,{children:[Et(o,e)," price is..."]}),(0,w.jsx)(te,{deal:{rawSavings:g,dealPrice:t,listPrice:s}}),(0,w.jsx)(bt,{children:i}),(0,w.jsx)(oe,{rawSavings:g,formattedSavings:y,onClick:()=>c()}),(0,w.jsx)(bt,{className:"exclusions",children:"Exclusions may apply"})]})}),(0,w.jsx)(Bt.default,{width:300,height:600,gravity:.08,wind:.01,numberOfPieces:400,opacity:.7,recycle:!1,style:{top:"-5px"}})]})},$e=({onCloseTooltip:o,viewProductPage:e,SavingsInfo:n,productImage:a,productImageAlt:r,advertiserVendor:t,savings:i,displayType:s})=>{let p=D("notif_rounded_border");return(0,w.jsxs)("div",{className:`annotation-tooltip-component creatives ${p?"rounded-notification":""} price-transparent`,onClick:c=>{c.stopPropagation()},children:[(0,w.jsxs)(ui,{children:[(0,w.jsx)(ut,{}),(0,w.jsx)(ci,{onClick:o})]}),(0,w.jsx)("div",{className:"annotation-tooltip-container",children:s===ft.transparentPricingVersion2VariantB?(0,w.jsxs)("div",{className:"annotation-tooltip-body min-w-[300px] text-gray-600",children:[(0,w.jsx)(n,{}),(0,w.jsx)(dt,{onClick:()=>e(),className:`mt-2 w-[185px] text-base h-[40px] ${p?"rounded-btn":""} green-btn`,children:"Save Now"}),(0,w.jsx)("div",{className:"text-xs mt-1 text-gray-300",children:"Exclusions may apply"})]}):(0,w.jsxs)("div",{className:"annotation-tooltip-body min-w-[170px] text-black",children:[(0,w.jsx)("div",{className:"leading-6 font-bold mb-1 text-md",children:"Savings Alert!"}),(0,w.jsx)(_i,{alt:r,src:a,width:"96px",height:"96px",margin:"auto"}),(0,w.jsx)(n,{}),(0,w.jsxs)("div",{className:"mt-1.5 mb-1.5 text-sm text-gray-500",children:["Available at ",t]}),(0,w.jsxs)(dt,{onClick:()=>e(),className:`mt-2 w-[185px] text-base h-[40px] ${p?"rounded-btn":""} green-btn`,children:["Save ",A(i)]}),(0,w.jsx)("div",{className:"text-xs mt-2 text-gray-500",children:"Exclusions may apply"})]})}),(0,w.jsx)(Bt.default,{width:600,height:600,gravity:.08,wind:.01,numberOfPieces:400,opacity:.7,recycle:!1,style:{top:"-5px"}})]})},We=({bestResult:o,run:e,onCloseTooltip:n,viewProductPage:a,notificationLabel:r="creativeTooltip_bau",blocksContent:t,bestDealDisplayType:i=J.standardPricing})=>{(0,re.useEffect)(()=>{E("page",r,{view:"quoteCompleteNotification",type:"notificationHover"})},[r]);let s=ae(o,e,i),p=()=>a(r);return X()?(0,w.jsx)(Ot,{classes:"retail-pc-best-deal-blocks",content:t,data:s,onCloseTooltip:n,viewProductPage:p,children:(0,w.jsx)(Bt.default,{width:600,height:600,gravity:.08,wind:.01,numberOfPieces:400,opacity:.7,recycle:!1,style:{top:"-5px"}})}):s.isTransparentPricing?(0,w.jsx)($e,{...s,onCloseTooltip:n,viewProductPage:p}):(0,w.jsx)(je,{...s,onCloseTooltip:n,viewProductPage:p})},se=We;var At=se;var yt=b(P()),Ye=o=>{let[a,r]=(0,wt.useState)(!0),[t,i]=(0,wt.useState)("");return(0,wt.useEffect)(()=>{r(!1)},[]),li(i),(0,yt.jsx)("div",{className:a?"disabled price-comparison-floating-notif":"price-comparison-floating-notif",style:{top:"16px",bottom:"auto",left:"auto",right:t||"230px"},children:(0,yt.jsx)(vt.Motion,{style:{opacity:(0,vt.spring)(a?0:1,{stiffness:180,damping:20}),y:(0,vt.spring)(a?-100:0,{stiffness:180,damping:20})},children:({opacity:s,y:p})=>(0,yt.jsx)("div",{className:"notification",style:{transform:`translate3d(0,${p}%,0)`,opacity:`${s}`},children:(0,yt.jsx)(At,{...o,notificationLabel:"creativeTooltip_bau_floating_notif"})})})})},Mt=Ye;var O=b(P()),q="product-estimate-annotation-addtl-content",fi="floatingRetailPC",le="retailPC",pe="wirelessPC",ce="retailPCBestDeal",mi=o=>{let{saveButtonDomElem:e,children:n,showSavingsDetails:a,hideSavingsDetails:r}=o;if(!e)return null;let i=!!ot.get(["additionalContentNamespace",q])().querySelector(`.__${q}.open-right`),{bottom:s,right:p,left:c}=e.getBoundingClientRect(),g=document.documentElement;return(0,O.jsx)("div",{className:"product-estimate-annotation",onMouseEnter:a,onMouseLeave:r,style:{position:"absolute",top:s+window.scrollY,...i?{right:g.clientWidth-p+window.scrollX,left:"auto"}:{right:"auto",left:c+window.scrollX},zIndex:2147483647,width:"min-content"},children:n})},hi=class extends ue.Component{constructor(...e){super(...e);let n=f.default.get(this.props.input,"deweyPC",!1);this.state={runId:null,deweyPC:n,isPDPEnabled:!n||D("universal_pc_canonical"),preventInitialShow:!1},this.runIdSavingsAlertSent=new Set}pollingRetriesCount=0;componentWillMount(){let e=ot.get("pageViewId"),n=this.props?.pageType;this.props.asin?ni({asin:f.default.get(this.props,"asin"),originMerchantId:f.default.get(this.props,"originMerchantId"),discount:f.default.get(this.props,"discount"),sellerId:f.default.get(this.props,"sellerId"),product:f.default.get(this.props,"product"),price:f.default.get(this.props,"price"),runCollectionId:f.default.get(this.props,"runCollectionId"),pageViewId:e,pageType:n}).then(a=>{let r=f.default.get(a,"pricing.updatedPricingRunId");this.setState({runId:r});let t;r!==f.default.get(a.cart,"items[0].id")?this.pollForComplete(r):t=!0,this.setState({error:a.error,cart:a.cart,pricing:a.pricing,product:a.product,fullRunComplete:t})}):this.props.input&&ni({product:f.default.get(this.props.input,"product"),gtin:f.default.get(this.props.input,"product.gtin"),unpricedResults:f.default.get(this.props.input,"unpricedResults"),meta:f.default.get(this.props.input,"meta"),deweyPC:this.state.deweyPC,buttonNotMountedInline:f.default.get(this.props,"buttonNotMountedInline",!1),pageViewId:e,pageType:n}).then(a=>{let r=f.default.get(a,"pricing.updatedPricingRunId");this.setState({runId:r});let t;r!==f.default.get(a.cart,"items[0].id")?this.pollForComplete(r):t=!0,this.setState({error:a.error,cart:a.cart,pricing:a.pricing,product:a.product,fullRunComplete:t})})}async setBlocksNotification(){if(!X())return;let e=this.getSavingsData(this.state.cart?.items?.[0]);if(!this.state.blocksSavingsNotif&&e.savings&&!this.isFetchingBlockSavingsNotif){this.isFetchingBlockSavingsNotif=!0;try{let n=this.props.isFloatingNotif?"retail-pc-savings-popover":"retail-pc-savings-list",a=await ji(n);a&&this.setState({blocksSavingsNotif:a})}finally{this.isFetchingBlockSavingsNotif=!1}}}componentDidMount(){this.setBlocksNotification(),E("page",`productEstimateAnnotation${this.state.deweyPC?"_runv4":""}`,{view:"productEstimateNotificaton",type:"annotation",searchIndex:this.props.searchIndex}),this.pollingRetriesCount=0,this.isInteractingWithTooltip=!1,this.isInteractingWithSaveButton=!1,this.saveButton&&(this.saveButton.addEventListener("mouseenter",this.onEnterSavingsButton.bind(this)),this.saveButton.addEventListener("mouseleave",this.onLeaveSavingsButton.bind(this)));try{document.querySelector("#web .reg").style.setProperty("overflow","visible","important")}catch{}this.props.simulateResize&&window.dispatchEvent(new Event("resize"))}componentDidUpdate(e,n){let a=n.cart?.items?.[0]?.id,r=this.state.cart?.items?.[0]?.id;r&&a!==r&&this.setBlocksNotification()}savingsButtonOnClick(e,n,a){return e&&n?this.viewWirelessDevicePage.bind(this,a):e?this.viewProductPage.bind(this,"savingsButton"):()=>{}}shouldShowSavingsDetails(e=!1,n=0){return(this.props.isFloatingNotif||this.props.isBestDealNotif)&&!this.state.preventInitialShow&&e&&n>=1e3?!0:this.state.showSavingsDetails}getPDPData(){return this.state.deweyPC?f.default.get(this.state.cart,"items[0].universalPCCanonical"):this.state.product}getSavingsData(e={}){let n=f.default.get(e,"inputData.vendor"),a=0,r=[],t=f.default.filter(e.results,y=>{let h=f.default.get(y,"product.vendorName"),L=f.default.get(y,"origin");if(n!=="amazon.com"&&L)return!1;if(h==="eBay"&&!f.default.get(y,"meta.paymentsSupport")){if(a<3)return a++,r.push(h),!0}else if(f.default.get(y,"pricing.total")&&r.indexOf(h)===-1&&r.length<12)return f.default.get(y,"meta.paymentsSupport")||r.push(h),!0}),i=e.originResult||f.default.find(e.results,{origin:!0});if(i){f.default.set(i,"meta.verificationClassifierOutput.verified",!0),f.default.set(i,"origin",!0);let y=f.default.findIndex(t,h=>h.id===i.id);if(y>-1){let h=t[y].redirectUrl;t[y]={...i,redirectUrl:h}}}let s=e.result||f.default.find(e.results,{heroOffer:!0}),p=f.default.get(s,"pricing.afterRewardTotal")||f.default.get(this.bestResult,"pricing.total"),c;f.default.get(i,"pricing.total")&&p&&(c=mt(s));let g=f.default.get(s,"pricing.afterRewardTotal")<f.default.get(e,"originResult.pricing.total")?f.default.get(s,"pricing.reward.amount"):null;return{filteredResults:t,bestResult:s,reward:g,savings:c}}getPopoverType(e,n,a,r){let t=n&&a&&e,i=t&&this.props.isFloatingNotif,s=t&&this.props.isBestDealNotif,p=r&&e,c;return i?c=fi:s?c=ce:t?c=le:p&&(c=pe),c}render(){let e=this.state.cart||!!this.state.error,n=f.default.get(this.state,"cart.items[0]");e&&this.props.runCompleteCb&&this.props.runCompleteCb(),Ri()&&this.state.runId&&E("page","disableNotifPcTest",{quoteId:this.state.runId,view:"productEstimateAnnotation",type:"test"});let{savings:a,filteredResults:r,bestResult:t,reward:i}=this.getSavingsData(n);this.bestResult=t;let s=ot.get("deweyResult")||{},{pageType:p}=s,c=f.default.get(this.props,p==="productPage"?"notification.wirelessPriceComparison":`notification.wirelessPriceComparisonCart.${this.props.asin}`),g=e&&!a&&c&&c.valid,y=`${e?`${g||(a||i)&&r.length?"savings":"no-savings"}`:"searching"}`,h=this.state.showSavingsDetails,L=f.default.get(this.getPDPData(),"wbid"),N=D("notif_rounded_border")?"rounded-btn":"";this.runIdSavingsAlertSent=Ui(n?.id,this.runIdSavingsAlertSent,e,!!a,this.props?.pageType);let M=this.getPopoverType(this.shouldShowSavingsDetails(e,a),a,r.length,g),$=this.props.hasSavingsButton&&(0,O.jsxs)("div",{className:`savings-button ${y} ${N}`,onClick:this.savingsButtonOnClick(e,g,c&&c.link),ref:z=>this.saveButton=z,children:[(0,O.jsx)(Xt,{}),e?a?(0,O.jsx)(Fi,{savings:a,reward:i}):g?(0,O.jsx)(Ai,{data:c}):(0,O.jsx)(Mi,{}):(0,O.jsx)(Qt,{}),M===fi?(0,O.jsx)(nt,{containerNamespace:q,children:(0,O.jsx)(Mt,{run:n,bestResult:this.bestResult,viewProductPage:this.viewProductPage.bind(this),onCloseTooltip:()=>this.hideSavingsDetails(),blocksContent:this.state.blocksSavingsNotif,bestDealDisplayType:ri()})}):M===ce?(0,O.jsx)(nt,{containerNamespace:q,children:(0,O.jsx)(mi,{saveButtonDomElem:this.saveButton,showSavingsDetails:()=>this.isInteractingWithTooltip=!0,hideSavingsDetails:this.onLeaveToolTip.bind(this),children:(0,O.jsx)(At,{bestResult:this.bestResult,run:n,onCloseTooltip:()=>{this.hideSavingsDetails()},viewProductPage:this.viewProductPage.bind(this),blocksContent:this.state.blocksSavingsNotif,bestDealDisplayType:ri()})})}):M===le?(0,O.jsx)(nt,{containerNamespace:q,children:(0,O.jsx)(mi,{saveButtonDomElem:this.saveButton,showSavingsDetails:()=>this.isInteractingWithTooltip=!0,hideSavingsDetails:this.onLeaveToolTip.bind(this),children:(0,O.jsx)(at,{wbid:L,originVendor:this.props.originVendor,view:"productEstimateAnnotation",hideSavingsDetails:()=>{this.isInteractingWithTooltip=!1,this.hideSavingsDetails()},viewProductPage:this.viewProductPage.bind(this),visitMerchant:this.visitMerchant.bind(this),filteredResults:r,searchIndex:this.props.searchIndex,fullRunComplete:this.state.fullRunComplete,run:n,deweyPC:this.state.deweyPC,showViewAllOffers:this.state.isPDPEnabled,blocksContent:this.state.blocksSavingsNotif})})}):M===pe?(0,O.jsx)(nt,{containerNamespace:q,children:(0,O.jsx)(mi,{saveButtonDomElem:this.saveButton,showSavingsDetails:()=>this.isInteractingWithTooltip=!0,hideSavingsDetails:this.onLeaveToolTip.bind(this),children:(0,O.jsx)(zi,{data:c,onCloseTooltip:()=>this.hideSavingsDetails()})})}):null]});return(0,O.jsx)("div",{className:`product-estimate-annotation ${h?"tooltip-open":""}`,children:$||(M===fi?(0,O.jsx)(Mt,{run:n,bestResult:this.bestResult,viewProductPage:this.viewProductPage.bind(this),onCloseTooltip:()=>this.hideSavingsDetails(),blocksContent:this.state.blocksSavingsNotif}):null)})}onEnterSavingsButton(){this.isInteractingWithSaveButton=!0,this.showSavingsDetails()}onLeaveSavingsButton(){this.isInteractingWithSaveButton=!1,this.scheduledHidingSavingsDetails()}onLeaveToolTip(){this.isInteractingWithTooltip=!1,this.scheduledHidingSavingsDetails()}showSavingsDetails(){this.setState({showSavingsDetails:!0})}hideSavingsDetails(){this.setState({showSavingsDetails:!1,preventInitialShow:!0})}scheduledHidingSavingsDetails(){this.props.isFloatingNotif||setTimeout(()=>{this.isInteractingWithTooltip||this.isInteractingWithSaveButton||this.hideSavingsDetails()},500)}viewWirelessDevicePage(e){e&&Zt(e)}viewProductPage(e){if(!f.default.get(this.state,"isPDPEnabled"))return;let n=this.getPDPData(),a=f.default.get(n,"wbid"),r=f.default.get(n,"url"),t=this.state.useEstimateRun?f.default.get(this.state,"pricing.estimateRunId"):f.default.get(this.state,"pricing.updatedPricingRunId");E("trackClick","viewProductPage","",{view:this.props.view,pageLocation:"annotation",productId:a,productUrl:r,label:String(e),searchIndex:this.props.searchIndex,quoteId:t,pageType:this.props?.pageType}),a&&r&&t?Zt(`${Kt}${r}?extReq=true${t?`&run=${t}`:""}${this.props.originVendor?`&originVendor=${this.props.originVendor}`:""}`):f.default.get(this.state,"cart.items[0].inputData.isv4",!1)&&this.props.isFloatingNotif&&this.bestResult&&!this.bestResult.origin&&this.visitMerchant(this.bestResult)}visitMerchant(e){let n=this.state.useEstimateRun?f.default.get(this.state,"pricing.estimateRunId"):f.default.get(this.state,"pricing.updatedPricingRunId"),a=f.default.get(e,"id"),r=f.default.get(e,"resultId"),t=f.default.get(e,"meta.paymentsSupport"),i=f.default.get(e,"product.url");if(t)window.open(`${Kt}/run/${n}/place-order/${a}`),E("trackClick","checkout","",{view:"resultListTooltip",pageLocation:"annotation",matchDomain:f.default.get(e,"product.vendor"),matchUrl:i,matchId:a,resultId:r,quoteId:n,searchIndex:this.props.searchIndex});else{let s="visitMerchant",{clickId:p,redirectId:c}=Ci(),g="product_view_offer",y;if(e?.redirectUrl){let h={extensionVersion:chrome.runtime.getManifest().version,redirectId:c,clickEvent:s,quoteId:n,subExperience:g};y=Si(e.redirectUrl,h)}else{let h=!!f.default.get(e,"pricing.reward");y=Li({params:{channel:h?"cashback-ims":"cart",clickEvent:s,destUrl:i,destDomain:f.default.get(e,"product.vendor"),redirectId:c,subExperience:g,vendorMetaId:f.default.get(e,"pricing.reward.id"),token:f.default.get(e,"pricing.reward.token"),runId:n},isWbPublisher:!0})}window.open(y),E("track",s,{view:"resultListTooltip",pageLocation:"annotation",matchDomain:f.default.get(e,"product.vendor"),matchUrl:i,matchId:a,resultId:r,quoteId:n,clickId:p,redirectId:c,searchIndex:this.props.searchIndex})}}async pollForComplete(e){if(e&&this.pollingRetriesCount<Jt){let n=await Hi({runId:e});n?(!f.default.get(n,"items[0].originResult.pricing.total")&&f.default.get(n,"items[0].results.length")===1?this.setState({fullRunComplete:!0,useEstimateRun:!0}):this.setState({cart:n,fullRunComplete:!0}),this.pollingRetriesCount=0):(this.pollingRetriesCount+=1,await de.default.resolve().delay(2e3),this.pollForComplete(e))}else this.pollingRetriesCount>=Jt&&this.setState({cart:{items:[]},fullRunComplete:!0})}},gi=Di({notification:["notification"]},hi);var fe=b(P()),_e="offers";function qe(o){return o.disablePriceRun?o.disablePriceRun():ii(bi.default.get(o,"input.product.price")||bi.default.get(o,"price"),o.cutOffPriceForPriceRunsInCents)}function ze({insertAfterElement:o,additionalClass:e,cssUrl:n,removeExistingApp:a=!1},r={}){if(qe(r))return;function t(s){return D("show_price_comparison")?(0,fe.jsx)(gi,{...s}):null}let{isFloatingNotif:i=!1}=r;return i&&!o?ti({appName:_e,cssUrl:n||"offers.css",additionalClass:`__product-estimate-annotation ${e||""}`,app:t(r),removeExistingApp:a,disableTopPositioningObserver:!0}):ti({appName:_e,cssUrl:n||"offers.css",additionalClass:`__product-estimate-annotation ${e||""}`,app:t({...r,hasSavingsButton:!!o}),insertAfterElement:o,removeExistingApp:a,additionalContent:{namespace:q,positionOnTop:i},disableTopPositioningObserver:!0})}export{ii as a,nt as b,_t as c,zi as d,X as e,ji as f,mt as g,Ui as h,ri as i,Ot as j,At as k,Mt as l,_e as m,ze as n};
