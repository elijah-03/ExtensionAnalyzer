
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="926e2dac-2199-5b77-97f9-aa5503b0fdbe")}catch(e){}}();
import{a as Ge}from"/chunks/chunk-LHBZYIHC.js";import{a as jn,b as Oe}from"/chunks/chunk-6TVYR7MV.js";import{a as Qr,b as wr}from"/chunks/chunk-K647UWNN.js";import"/chunks/chunk-7OGXR7VM.js";import{a as Ke}from"/chunks/chunk-BM7RV4DC.js";import{c as Me,e as _r,f as Jn,i as Ve,j as c,k as Ne}from"/chunks/chunk-YCUTMSD4.js";import{$b as Te,A as ue,B as fe,C as Kn,D as Bn,Ea as N,Eb as ur,Fa as In,Fc as Jr,Ga as be,Gb as Se,Hb as Yr,Hc as Fe,Ia as Kr,Ib as Be,Ja as he,La as ve,Lb as Ie,Ma as we,Mb as ln,Mc as Jo,Nb as sn,Ob as fr,Pb as Yn,Qb as Xn,Rb as bn,Sb as br,Tb as Ce,Ub as hr,Wa as ye,Wb as Ee,Xb as ze,Yb as vr,Zb as Re,_b as Le,ac as De,b as $o,bc as Xr,cc as qe,dc as je,ec as Zr,fc as $r,g as pe,gc as Ae,hc as Pe,i as fn,ic as qn,j as ke,jc as He,k as E,kc as We,nc as Zn,qc as $n,x as ge,xc as Cn}from"/chunks/chunk-CARILTDN.js";import{a as b,b as _}from"/chunks/chunk-EXMDW5FT.js";import"/chunks/chunk-U3DUDNXO.js";import"/chunks/chunk-3ZEXWRW2.js";import"/chunks/chunk-YUOMCGI6.js";import{c as Ue}from"/chunks/chunk-OYVYWA4C.js";import"/chunks/chunk-ELSMRAMV.js";import"/chunks/chunk-OK4UQCTS.js";import"/chunks/chunk-NC7PITUF.js";import{a as Sn}from"/chunks/chunk-YVQAWSEC.js";import{$ as x,A as lr,B as me,D as Tn,E as ce,K as xn,N as $,Z as xe,_ as Dn,a as Y,aa as sr,q as de,z as Ur}from"/chunks/chunk-PTEF4S3V.js";import{c as t}from"/chunks/chunk-54UHBIHR.js";var Vn=t(b()),Zo=t($o());var P=t(b());var Ye=t(b()),Ze=t(_()),I=(0,Ye.createContext)({}),Xe=({bridge:r,fillingAndSavingTelemetry:e,children:o})=>(0,Ze.jsx)(I.Provider,{value:{fillingAndSavingTelemetry:e,bridge:r},children:o});var $e=t(Sn()),dr=t(b());var ne={wrapper:"Re",currency:"Qd"};var mr=t(_()),ni=/^[0-9]*(\.[0-9]{0,2})?$/;function ri(r){if(r.length===0||r===".")return;let[e,o]=r.startsWith(".")?[void 0,r.substring(1)]:r.split("."),i=e?parseInt(e,10):0,a=o?o.length===2?parseInt(o,10):parseInt(o,10)*10:0;return i*100+a}function yr({id:r,onChange:e,placeholder:o}){let i=(0,dr.useContext)(c),{state:a}=(0,dr.useContext)(fn),[l,m]=(0,dr.useState)("");function d(k){let n=k.target.value;n.match(ni)&&(m(n),e(ri(n)))}return(0,mr.jsxs)("div",{className:(0,$e.default)(ne.wrapper,{[ne.currency]:l}),children:[l&&(0,mr.jsx)("span",{children:"$"}),(0,mr.jsx)(br,{id:r,placeholder:o,variant:a.primaryInput==="touch"?"large":"medium",type:"text",inputMode:"decimal",maxLength:8,value:l,onChange:d,"aria-label":i("Enter the amount in dollars")})]})}var Qe=t(Sn());var Je="/assets/svg/app_icon-64-L7VWMEDC.svg?url";var re={closeButton:"Yb",header:"Ni"};var An=t(_()),pn=({title:r,className:e,onClose:o,disabledClose:i})=>(0,An.jsxs)("div",{className:(0,Qe.default)(re.header,e),children:[(0,An.jsx)("img",{src:Je,alt:""}),typeof r=="string"?(0,An.jsx)("h1",{children:r}):r,o&&(0,An.jsx)("div",{className:re.closeButton,children:(0,An.jsx)(E,{onClick:o,mode:"transparent",disabled:i,children:(0,An.jsx)(N,{size:"mini",sources:[{type:"ThemedIcon",content:{file:$.Close}}]})})})]});var ro=t(b());var cr=t(Sn()),Sr=t(b());var En={wrapper:"Fb",dialog:"Ui",footer:"Ki",actions:"nx",error:"Jb",secondary:"Qb"};var J=t(_());function Br({children:r,className:e,title:o,confirmButtonText:i,cancelButtonText:a,onConfirm:l,footerClassName:m,actionButtonsClassName:d,onCancel:k,isConfirmDisabled:n,isCancelDisabled:s,errorMessage:u,handleFocus:g,SaveButtonAccessory:p}){let C=(0,Sr.useRef)(null),A=(0,Sr.useContext)(c),Z=g===!0||g===void 0;return(0,J.jsx)("form",{onSubmit:W=>{W.preventDefault(),l&&l()},children:(0,J.jsxs)("div",{id:"dialog",className:(0,cr.default)(En.dialog,e),children:[(0,J.jsx)(pn,{title:o}),(0,J.jsxs)("div",{className:En.wrapper,children:[r,(0,J.jsxs)("div",{className:(0,cr.default)(En.footer,m),children:[(0,J.jsxs)("div",{className:d?(0,cr.default)(En.actions,d):En.actions,children:[l&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(E,{autoFocus:Z,className:En.submit,disabled:n,mode:"primary",ref:C,type:"submit",children:i??A("Confirm")}),p&&(0,J.jsx)(p,{ref:C})]}),k&&(0,J.jsx)(E,{onClick:k,autoFocus:Z&&!l,disabled:s,children:a??A("Cancel")})]}),(0,J.jsx)("p",{"aria-live":"assertive","aria-hidden":!!u,className:(0,cr.default)(En.secondary,En.error),children:u})]})]})]})})}var no={error:"nh"};var ee=t(_());function Pn({header:r,message:e}){let o=(0,ro.useContext)(c);return(0,ee.jsx)(Br,{title:r,confirmButtonText:o("OK"),onConfirm:async()=>x("close-modal",void 0),children:(0,ee.jsx)("p",{className:no.error,children:e})})}var O={dialogWrapper:"rx",header:"ox",itemTitle:"ex",error:"rh",details:"Ul",detailsRow:"Or",label:"oh",reason:"je",memo:"eh",footer:"dn",integrationInfo:"ix",account:"ax",inlineIcon:"ih",actionButtons:"Le",submit:"ah"};var eo=t(b());var Er=t(b());var Ir={list:"Kl"};var Cr=t(_());function zr({selectedItem:r,accounts:e,setSelectedAccount:o,disabled:i,selectClassName:a}){let l=(0,Er.useContext)(c),m=(0,Er.useRef)(null);return(0,Cr.jsx)(Bn,{accessibilityLabel:l("Select account"),ref:m,buttonClassName:a,listClassName:Ir.list,items:e.map(d=>({type:"text",id:d.uuid,icon:d.icon&&(0,Cr.jsx)(N,{...d.icon,size:"mini",className:Ir.icon}),value:d.name,typeAhead:d.name,selected:d.uuid===r?.uuid,onSelect:()=>o(d)})),disabled:i,children:r?(0,Cr.jsx)(In,{icon:r.icon&&{...r.icon,className:Ir.locationIcon,size:"mini"},label:r.name,size:"small",disabled:i}):l("Choose an account")})}var zn=t(_());function oo({accounts:r,selectedAccount:e,isSubmitting:o,onSelectAccount:i,onSubmit:a}){let l=(0,eo.useContext)(c);return(0,zn.jsxs)("div",{className:O.footer,children:[(0,zn.jsxs)("span",{className:O.integrationInfo,children:[(0,zn.jsx)(N,{className:O.inlineIcon,sources:[{type:"DefaultIcon",content:{file:Tn.BrexVault}}],size:"mini",shape:de.Circle}),(0,zn.jsx)("p",{children:l("Brex cards are stored and sync from Brex.com.")})]}),(0,zn.jsxs)("div",{className:O.actionButtons,children:[(0,zn.jsx)(zr,{selectedItem:e,accounts:r,setSelectedAccount:i,disabled:r?.length===1}),(0,zn.jsx)(E,{className:O.submit,mode:"primary",onClick:a,working:o,children:l("Create & Fill")})]})]})}var R=t(_()),si=new URLSearchParams(window.location.search);function _i({accounts:r,idempotentKey:e}){let{bridge:o}=(0,P.useContext)(I),i=(0,P.useContext)(c),{state:a}=(0,P.useContext)(fn),l=(0,P.useContext)(jn),[m,d]=(0,P.useState)(!1),[k,n]=(0,P.useState)(),[s,u]=(0,P.useState)(""),[g,p]=(0,P.useState)(),[C,A]=(0,P.useState)(me.Monthly),[Z,W]=(0,P.useState)("one-year"),[v,y]=(0,P.useState)(""),[U,M]=(0,P.useState)(r[0]),T=l==="small"&&a.primaryInput==="touch",rn={MONTHLY:i("every month"),QUARTERLY:i("every quarter"),YEARLY:i("every year"),ONE_TIME:i("one time")},cn={"seven-days":i("in 7 Days"),"one-month":i("in 1 Month"),"one-year":i("in 1 Year"),custom:i("Custom"),none:i("None")};function wn(B){switch(B.data.type){case"IntegrationDisabled":return i("The integration with Brex has been disabled, please reconnect it on 1Password.com");case"UnableToGetToken":return i("A problem occurred when communicating with Brex.com. Please try again");case"AppLocked":return i("1Password is locked. Please try again after unlocking.");case"DidNotAcceptFill":return;case"Validation":switch(B.data.data){case"TitleRequired":return i("A title is required");case"SpendLimitRequired":return i("The spending limit is required");case"SpendLimitDurationRequired":return i("A duration for the spending limit is required");case"LockAfterRequired":return i("Lock card is required");case"ReasonForCardRequired":return i("The reason for a card is required");default:Y(B.data)}break;case"UnableToCreateCard":return i("Unable to create card, please try again.");default:Y(B.data)}}return(0,R.jsx)(Cn,{ariaLabel:i("Create Brex vendor card\u2026"),buttonOrientation:T?"vertical":"horizontal",headerAccessories:(0,R.jsx)(pn,{title:i("Create Brex vendor card\u2026"),className:O.header,onClose:async()=>x("close-modal",void 0)}),children:(0,R.jsxs)("div",{className:O.dialogWrapper,children:[(0,R.jsx)(qn,{type:"icon",className:O.itemTitle,onChange:u,icon:{id:"id",sources:[{type:"DefaultIcon",content:{file:Tn.BrexVendor}}]},placeholder:i("Title"),value:s,autoFocus:!0}),(0,R.jsxs)("div",{className:O.details,children:[(0,R.jsxs)("div",{className:O.detailsRow,children:[(0,R.jsx)(yr,{onChange:B=>p(B),placeholder:i("Set Spending Limit")}),(0,R.jsx)(Bn,{items:Object.keys(rn).map(B=>{let K=B;return{id:B,type:"text",typeAhead:rn[K],value:rn[K],onSelect:()=>A(K),selected:K===C}}),children:rn[C]})]}),(0,R.jsxs)("div",{className:O.detailsRow,children:[(0,R.jsx)("span",{className:O.label,children:i("Lock Card")}),(0,R.jsx)(Bn,{items:Object.keys(cn).filter(B=>B!=="custom").map(B=>{let K=B;return{id:K,type:"text",typeAhead:cn[K],value:cn[K],onSelect:()=>W(K),selected:K===Z}}),children:cn[Z]})]})]}),(0,R.jsxs)("div",{className:O.reason,children:[(0,R.jsx)(br,{placeholder:i("Reason for card"),onChange:B=>y(B.target.value),value:v,icon:"edit",variant:"large"}),(0,R.jsx)("p",{children:(0,R.jsx)("span",{className:O.memo,children:i("Brex will auto-fill transaction memos on this card.")})})]}),k&&(0,R.jsxs)("div",{className:O.error,"aria-errormessage":"error","aria-live":"polite",children:[(0,R.jsx)(N,{size:"mini",sources:[{type:"ThemedIcon",content:{file:$.Warning}}]}),(0,R.jsx)("div",{children:k})]}),(0,R.jsx)(oo,{accounts:r,selectedAccount:U,isSubmitting:m,onSelectAccount:B=>M(B),onSubmit:async()=>{d(!0),n(void 0);let B=await o.fillNewBrexCard({accountUuid:U.uuid,title:s,spendLimit:g??0,spendLimitDuration:C,lockCardType:Z==="custom"?{type:"custom",data:""}:{type:Z},reasonForCard:v,frameIdentifier:si.get("frameIdentifier")??void 0,idempotentKey:e});B.type==="Success"?x("close-modal",void 0):(n(wn(B)),d(!1))}})]})})}function io(){let{bridge:r}=(0,P.useContext)(I),e=(0,P.useContext)(c),[o,i]=(0,P.useState)(void 0);return(0,P.useEffect)(()=>{r.getBrexDialogConfiguration().then(i)},[r]),o?o.type==="Success"?(0,R.jsx)(_i,{accounts:o.data.accounts,idempotentKey:o.data.idempotentKey}):(0,R.jsx)(Pn,{header:e("An error has occurred"),message:e("An unexpected error occurred. Please contact support@1password.com")}):null}var hn=t(b());var ao={"*":"strong","`":"mark"};function di(r){let e="",o=[],i=new Map;for(let[a,l]of[...r].entries()){if(Object.keys(ao).includes(l)){let m=ao[l];i.size===0?(o.push(e),e="",i.set(m,"")):i.keys().next().value===m&&(o.push(...i.entries()),i.clear());continue}if(i.size>0){let m=i.keys().next().value;i.set(m,i.get(m)+l);continue}e+=l,e&&a===r.length-1&&o.push(e)}return o}function to(r){return typeof r!="string"?[]:r.split(/\r?\n/g).reduce((e,o)=>(e.push(...di(o)),e),[])}var Qn=t(_());function Rr({input:r}){let e=to(r),o=[];for(let[i,a]of e.entries())a instanceof Array?a[0]==="strong"?o.push((0,Qn.jsx)("strong",{children:a[1]},i)):e[0]==="mark"&&o.push((0,Qn.jsx)("mark",{children:a[1]},i)):o.push(a);return(0,Qn.jsx)(Qn.Fragment,{children:o})}var oe={content:"Yl",inlineIcon:"lh"};var F=t(_());function lo(){let{bridge:r}=(0,hn.useContext)(I),e=(0,hn.useContext)(c),[o,i]=(0,hn.useState)(void 0),a=(0,hn.useId)();return(0,hn.useEffect)(()=>{r.canRequestUnlock().then(i)},[r]),(0,F.jsxs)(Xn,{ariaLabel:a,onClose:async()=>x("close-modal",void 0),open:!0,children:[(0,F.jsxs)(ln,{children:[(0,F.jsx)(Yn,{}),(0,F.jsx)(sn,{id:a,text:e("Your account is offline.")})]}),(0,F.jsx)("div",{className:oe.content,children:(0,F.jsx)(ci,{keyboardShortcut:o?.data?.keyboardShortcut})}),(0,F.jsx)(bn,{children:(0,F.jsx)(E,{onClick:async()=>x("close-modal",void 0),children:e("Close")})})]})}var ci=({keyboardShortcut:r})=>{let e=(0,hn.useContext)(c),o=r?(0,F.jsx)(Rr,{input:e("Press {shortcut} to open 1Password.",{shortcut:`*${r}*`})}):e("Press the 1Password icon in your browser\u2019s toolbar to open 1Password.");return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Kr,{as:"p",variant:"medium",alignment:"center",children:o}),(0,F.jsx)(Kr,{as:"p",variant:"medium",alignment:"center",children:e.$("Then tap the offline indicator ( <offlineIndicator /> ) and finish signing in to save your changes.",{offlineIndicator:()=>(0,F.jsx)("span",{className:oe.inlineIcon,children:(0,F.jsx)(N,{sources:[{type:"ThemedIcon",content:{file:$.NoConnection}}],size:"mini"},"offline-icon")},"icon-container")})})]})};var D=t(b());var kn={titleStyles:"lx",stackLabel:"_h",fieldWrapper:"_x",regenerateButton:"sh",regenerateContainer:"th",btnWrapper:"sx",errorMessage:"dh",header:"tx",selectedIcon:"xh",accountSelector:"Yi",accountSelectorSeparator:"mh",listItem:"kh",select:"Fl",icon:"ph"};var Q=t(_()),pi=3,ie=15,ki=({accounts:r})=>{let{bridge:e}=(0,D.useContext)(I),o=(0,D.useContext)(c),{state:i}=(0,D.useContext)(fn),a=(0,D.useContext)(jn),[l,m]=(0,D.useState)(),[d,k]=(0,D.useState)(!1),[n,s]=(0,D.useState)(0),[u,g]=(0,D.useState)(0),[p,C]=(0,D.useState)(r[0]),[A,Z]=(0,D.useState)(r[0].emailAliasAccounts[0]),[W,v]=(0,D.useState)(void 0),y=u>0?o("Regenerate again in {secondsLeft}s",{secondsLeft:u}):o("Regenerate"),U=r.reduce(function(L,V){return L+V.emailAliasAccounts.length},0),M=l?[{type:"plainText",content:{text:l.substring(0,l.lastIndexOf("@"))}},{type:"secondaryText",content:{text:l.substring(l.lastIndexOf("@"))}}]:[{type:"secondaryText",content:{text:"unable to generate Masked Email"}}];async function T(L){m(void 0),v(void 0),k(!0);let V=await L.generateEmailAlias();V.type==="Success"?m(V.data):v(V.data),k(!1)}async function rn(){if(l){let L=await e.fillEmailAlias(l);if(L.type==="Error"){v(L.data);return}else L.data||x("close-modal",void 0)}else x("close-modal",void 0)}let cn=async L=>{if(L.preventDefault(),await T(e),n+1>=ie){let V=n-ie||1;g(V*pi)}s(n+1)};(0,D.useEffect)(()=>{u>0&&setTimeout(()=>g(u-1),1e3)},[u]),(0,D.useEffect)(()=>{e.startEmailAliasSession({accountUuid:p.uuid,emailAliasAccountId:A.id}).then(L=>{if(L.type==="Error"){v(L.data);return}T(e)})},[e,p,A]);let wn={key:"primaryButton",value:o("Fill Email"),disabled:!l,onClick:async()=>await rn()},B={key:"secondaryButton",value:o("Cancel"),onClick:()=>{l&&e.cancelEmailAliasSession(),x("close-modal",void 0)}},K={key:"regenerateButton",value:y,working:d,mode:"primaryAlt",disabled:d||n>=ie&&u>0,onClick:cn},Gr=()=>{let L=[];return r.map((V,w)=>{L.push({type:"groupLabel",id:V.uuid,value:V.name.toUpperCase(),className:kn.listItem}),V.emailAliasAccounts.map(yn=>{yn.name&&L.push({type:"text",id:`${yn.id}|${V.uuid}`,value:yn.name,typeAhead:yn.name,selected:A.id===yn.id&&p.uuid===V.uuid,onSelect:()=>{C(V),Z(yn)},className:kn.listItem})}),w+1<r.length&&L.push({type:"separator",id:`separator${w}`})}),L},tr=a==="small"&&i.primaryInput==="touch";return(0,Q.jsx)(Cn,{ariaLabel:o("Create Masked Email"),buttonOrientation:tr?"vertical":"horizontal",headerAccessories:(0,Q.jsx)(pn,{title:o("Create Masked Email"),className:kn.header}),primaryButton:wn,secondaryButton:tr?K:B,tertiaryButton:tr?B:K,children:(0,Q.jsxs)("div",{className:kn.fieldWrapper,children:[U>1&&(0,Q.jsx)($n,{useId:!0,label:o("Assign to Account"),labelTextClassName:kn.titleStyles,className:kn.stackLabel,children:(0,Q.jsx)(Bn,{buttonClassName:kn.select,items:Gr(),matchTriggerWidth:!0,children:(0,Q.jsxs)("div",{className:kn.accountSelector,children:[(0,Q.jsx)(In,{icon:{...p.icon,size:"mini"},label:p.name,size:"small"}),(0,Q.jsx)("div",{className:kn.accountSelectorSeparator}),A.name&&(0,Q.jsx)(In,{label:A.name,size:"small"})]})})}),(0,Q.jsx)(hr,{label:o("email"),borderStyle:ce.TopAndBottom,value:d?o("loading..."):M}),W&&(0,Q.jsx)("div",{className:kn.errorMessage,children:W})]})})},so=()=>{let{bridge:r}=(0,D.useContext)(I),e=(0,D.useContext)(c),[o,i]=(0,D.useState)(void 0);return(0,D.useEffect)(()=>{r.getEmailAliasDialogConfiguration().then(i)},[r]),o?o.type==="Success"?(0,Q.jsx)(ki,{accounts:o.data.accounts}):(0,Q.jsx)(Pn,{header:e("An error has occurred"),message:e("An unexpected error occurred. Please contact support@1password.com")}):null};var Rn=t(b());var _o={content:"gh"};var _n=t(_());function ae(){let{bridge:r}=(0,Rn.useContext)(I),e=(0,Rn.useContext)(c),[o,i]=(0,Rn.useState)(void 0),a=(0,Rn.useId)();return(0,Rn.useEffect)(()=>{r.canRequestUnlock().then(i)},[r]),(0,_n.jsxs)(Xn,{ariaLabel:a,onClose:async()=>x("close-modal",void 0),open:!0,children:[(0,_n.jsxs)(ln,{children:[(0,_n.jsx)(Yn,{}),(0,_n.jsx)(sn,{id:a,text:e("1Password is locked")})]}),(0,_n.jsx)("div",{className:_o.content,children:(0,_n.jsx)("p",{children:o?.name==="no"&&o.data.keyboardShortcut?(0,_n.jsx)(Rr,{input:e("Press {shortcut} to unlock 1Password",{shortcut:`*${o.data.keyboardShortcut}*`})}):e("To continue saving with 1Password, unlock an account.")})}),(0,_n.jsxs)(bn,{children:[o?.name==="yes"&&(0,_n.jsx)(E,{mode:"primary",onClick:async()=>x("request-managed-unlock",void 0),children:e("Open 1Password")}),(0,_n.jsx)(E,{onClick:async()=>x("close-modal",void 0),children:e("Close")})]})]})}var Tr=t(Sn()),q=t(b());function Lr(r,e){switch(r){case"NoValidAccounts":return{header:e("Unable to enable integration"),message:e("A 1Password membership is required to integrate with Privacy.")};case"UnableToGetFundingAccounts":return{header:e("An error has occurred"),message:e("Please ensure there is at least one Funding Source associated with your Privacy.com account, then try again.")};case"UnknownError":return{header:e("An error has occurred"),message:e("An unexpected error occurred. Please contact support@1password.com")};default:Y(r)}}var co=t(Sn());var mo={detailsRow:"Jl"};var xo=t(_()),nr=({className:r,children:e})=>(0,xo.jsx)("div",{className:(0,co.default)(mo.detailsRow,r),children:e});var h={detailsRowPrimaryElement:"dx",detailsRowSecondaryElement:"n_",select:"ch",label:"rr",loadingText:"xx",checkbox:"fh",header:"uh",itemTitle:"bh",dialogWrapper:"mx",details:"qe",error:"hh",actionButtons:"yo",vaultSelect:"kx",submit:"vh"};var po=t(b());var rr=t(_()),te=({vaultListElements:r,onSelectVault:e,selectedVault:o,onButtonClick:i,working:a,disabled:l=!1})=>{let m=(0,po.useContext)(c);return(0,rr.jsxs)("div",{className:h.actionButtons,children:[(0,rr.jsx)("div",{children:r&&e&&(0,rr.jsx)(wr,{buttonClassName:h.vaultSelect,vaultListElements:r,selectedVaultId:o,onSelect:e})}),(0,rr.jsx)(E,{className:h.submit,mode:"primary",onClick:i,working:a,disabled:l||!o,"data-testid":"privacy-create-dialog-submit-button",children:m("Create & Fill")})]})};var ko=t(b());var go=t(_()),le=({onChange:r,value:e})=>{let o=(0,ko.useContext)(c);return(0,go.jsx)(qn,{type:"icon",className:h.itemTitle,onChange:r,icon:{id:"id",sources:[{type:"DefaultIcon",content:{file:Tn.PrivacyCom}}]},placeholder:o("Title"),value:e,autoFocus:!0,"data-test-id":"privacy-card-name-input"})};var f=t(_()),bi=new URLSearchParams(window.location.search);function hi({suggestedVaultId:r,vaultListElements:e,fundingAccounts:o,defaultCardName:i}){let a=(0,q.useContext)(c),{bridge:l}=(0,q.useContext)(I),{state:m}=(0,q.useContext)(fn),d=(0,q.useContext)(jn),[k,n]=(0,q.useState)(i??""),[s,u]=(0,q.useState)(),[g,p]=(0,q.useState)(!1),[C,A]=(0,q.useState)(!1),[Z,W]=(0,q.useState)(!1),[v,y]=(0,q.useState)(xn.Monthly),[U,M]=(0,q.useState)(r),[T,rn]=(0,q.useState)(o[0]),[cn,wn]=(0,q.useState)(),B=d==="small"&&m.primaryInput==="touch";function K(w){switch(w){case xn.Monthly:return a("every month");case xn.Annually:return a("every year");case xn.Transaction:return a("every transaction");case xn.Forever:return a("forever");default:return}}function Gr(w){switch(w.type){case"IntegrationDisabled":return a("Please enable the Privacy integration from the Developer Tools context menu.");case"AppLocked":return a("1Password is locked. Please try again after unlocking.");case"VaultLocked":return a("This vault is locked. Please try again after unlocking.");case"SaveFailed":return a("Unable to save item. Check that the vault is unlocked and try again.");case"EmptyCardName":return a("Please enter a name for the card.");case"CardNameTooLarge":return a("Please enter a smaller name for the card.");case"EmptyLimit":return a("You must provide a spending limit for the card.");case"LimitTooLarge":return a("Please enter a smaller spending limit for the card.");case"PageUrlParseError":return a("Unable to parse URL");case"HttpError":return a("We were unable to reach Privacy. Please check your internet connection and try again.");case"InvalidApiKey":return a("Unable to authenticate with Privacy. Please check your API key and try again.");case"ApiError":return w.content.message?a("Error creating card: {message}",{message:w.content.message}):a("Error creating card.");case"BrainError":return a("Unable to create credit card item from Privacy Card.");case"NoVaultSelected":return a("Please select a vault.");default:return a("An unexpected error occurred.")}}async function tr(){if(!U){wn({type:"NoVaultSelected",content:void 0}),W(!1);return}W(!0);try{if(T){let w=await l.fillNewPrivacyCard({params:{itemTitle:k,fundingToken:T.token,limitAmount:g?s:void 0,limitDuration:g?v:void 0},vaultId:U,frameIdentifier:bi.get("frameIdentifier")??void 0,apiKey:T.apiKey});wn(w.error)}}finally{W(!1)}}function L(w){let yn=K(w);return{type:"text",id:w,value:yn,onSelect:()=>y(w),typeAhead:yn||"",selected:v===w}}function V(w){return{type:"text",id:w.token,value:w.label,onSelect:()=>rn(w),typeAhead:w.label,selected:w.token===T.token}}return(0,f.jsxs)(Cn,{ariaLabel:a("Create Privacy Card"),buttonOrientation:B?"vertical":"horizontal",headerAccessories:(0,f.jsx)(pn,{title:a("Create Privacy Card"),className:h.header,onClose:async()=>x("close-modal",void 0)}),children:[(0,f.jsxs)("div",{className:h.dialogWrapper,children:[(0,f.jsx)(le,{onChange:n,value:k}),(0,f.jsxs)("div",{className:h.details,children:[(0,f.jsx)(nr,{children:(0,f.jsx)($n,{label:a("Spending Limit"),className:(0,Tr.default)(h.label,h.checkbox),children:(0,f.jsx)(Jr,{checked:g,onClick:()=>{p(!g),u(void 0),y(xn.Monthly),wn(void 0)},"data-test-id":"privacy-spend-limit-toggle"})})}),g&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(nr,{children:[(0,f.jsx)("div",{"data-test-id":"privacy-spend-limit-amount",className:h.detailsRowPrimaryElement,children:(0,f.jsx)(yr,{id:"currencyInput",onChange:w=>{u(w),wn(void 0)},placeholder:a("Set Spending Limit")})}),(0,f.jsx)("div",{"data-test-id":"privacy-spend-limit-frequency",className:h.detailsRowSecondaryElement,children:(0,f.jsx)(Qr,{"data-test-id":"privacy-spend-limit-frequency",items:[L(xn.Monthly),L(xn.Annually),L(xn.Transaction),L(xn.Forever)],useCustomButton:!0,children:(0,f.jsx)(E,{accessory:"select",className:h.select,disabled:C,children:K(v)})})})]}),(0,f.jsx)(nr,{children:(0,f.jsx)($n,{label:a("Single Use"),className:(0,Tr.default)(h.label,h.checkbox),children:(0,f.jsx)(Jr,{checked:C,onClick:()=>{A(!C),wn(void 0)},"data-test-id":"privacy-single-use-toggle"})})})]}),(0,f.jsxs)(nr,{children:[(0,f.jsx)("div",{className:h.detailsRowPrimaryElement,children:(0,f.jsx)(Be,{children:a("Funding Source")})}),(0,f.jsx)("div",{className:h.detailsRowSecondaryElement,children:(0,f.jsx)(Qr,{items:o.map(V),buttonClassName:h.select,useCustomButton:!0,children:(0,f.jsx)(E,{accessory:"select",className:h.select,children:o.find(w=>w.token===T.token)?.label})})})]})]}),cn&&(0,f.jsxs)("div",{className:h.error,"aria-errormessage":"error","aria-live":"polite",children:[(0,f.jsx)(N,{size:"mini",sources:[{type:"ThemedIcon",content:{file:$.Warning}}]}),(0,f.jsx)("div",{children:Gr(cn)})]})]}),(0,f.jsx)(te,{vaultListElements:e,selectedVault:U,onSelectVault:w=>M(w.content.id),onButtonClick:tr,working:Z})]})}function uo(){let{bridge:r}=(0,q.useContext)(I),e=(0,q.useContext)(c),[o,i]=(0,q.useState)();return(0,q.useEffect)(()=>{r.getPrivacyDialogConfiguration().then(i)},[r]),o?o.response.type==="Success"?(0,f.jsx)(hi,{suggestedVaultId:o.response.data.suggestedVaultId,vaultListElements:o.response.data.vaultListElements,fundingAccounts:o.response.data.fundingAccounts,defaultCardName:o.response.data.defaultCardName}):(0,f.jsx)(Pn,{...Lr(o.response.data,e)}):(0,f.jsxs)(Cn,{ariaLabel:e("Create Privacy Card"),headerAccessories:(0,f.jsx)(pn,{title:e("Create Privacy Card"),className:h.header,onClose:async()=>x("close-modal",void 0)}),children:[(0,f.jsxs)("div",{className:h.dialogWrapper,children:[(0,f.jsx)(le,{onChange:()=>{},value:e("Privacy Card")}),(0,f.jsx)("div",{className:h.details,children:(0,f.jsx)(nr,{children:(0,f.jsx)($n,{label:e("Connecting to Privacy Card\u2026"),className:(0,Tr.default)(h.label,h.checkbox),labelTextClassName:h.loadingText,children:(0,f.jsx)(ur,{className:h.spinner})})})})]}),(0,f.jsx)(te,{disabled:!0})]})}var gn=t(b());var Dr={labelText:"yh",select:"Bh"};var en=t(_());function wi({suggestedAccountUuid:r,accounts:e}){let{bridge:o}=(0,gn.useContext)(I),i=(0,gn.useContext)(c),[a,l]=(0,gn.useState)(),[m,d]=(0,gn.useState)(e.find(s=>s.uuid===r)||e[0]);function k(s){switch(s){case"AccountLocked":return e.length>1?i("Please unlock the selected account to enable the integration."):i("Please unlock 1Password to enable the integration.");case"FailedToCreateApiKey":return i("Unable to enable the Privacy integration. Please try again later.");default:Y(s)}}async function n(){let s=await o.enablePrivacyIntegration({accountUuid:m.uuid});l(s.error)}return(0,en.jsx)(Br,{title:i("Add to 1Password"),confirmButtonText:i("Add to 1Password"),errorMessage:a&&k(a),onConfirm:async()=>n(),onCancel:async()=>x("close-modal",void 0),children:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("p",{className:Dr.labelText,children:i("Use 1Password to create and fill Privacy Cards everywhere you pay online, and save merchant cards for future use.")}),e.length>0?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("label",{className:Dr.labelText,children:i("Choose an account")}),(0,en.jsx)(zr,{selectedItem:m,accounts:e,disabled:e.length<2,setSelectedAccount:d,selectClassName:Dr.select})]}):void 0]})})}function fo(){let{bridge:r}=(0,gn.useContext)(I),e=(0,gn.useContext)(c),[o,i]=(0,gn.useState)();return(0,gn.useEffect)(()=>{r.getPrivacyEnableDialogConfiguration().then(i)},[r]),o?o.response.type==="Success"?(0,en.jsx)(wi,{suggestedAccountUuid:o.response.data.suggestedAccountUuid,accounts:o.response.data.accounts}):(0,en.jsx)(Pn,{...Lr(o.response.data,e)}):null}var nn=t(b());var vo=t(b());var z=t(b()),ho=t(_()),jr=({children:r,initialElements:e=[],initialCallout:o,onError:i})=>{let[a,l]=(0,z.useState)(new Map),[m,d]=(0,z.useState)(e),[k,n]=(0,z.useState)(o),s=(0,z.useContext)(c),u=(0,z.useRef)(i);(0,z.useInsertionEffect)(()=>{u.current=i},[i]);let g=(0,z.useCallback)((...v)=>{let y=u.current;return y(...v)},[]);(0,z.useEffect)(()=>{e.length>0&&d(e)},[e]),(0,z.useEffect)(()=>{n(o)},[o]);let p=(0,z.useCallback)(async(v,y=[])=>{let U=[...y,...Array.from(a.values())];return x("save-dialog-edit-item",{type:v,data:{values:U}}).then(M=>M.ok?(M.data.type==="viewModel"&&n(M.data.data.callout),M.data.type==="error"?(g(M.data.data.message),M.data):(l(T=>{for(let[rn,cn]of a)T.get(rn)===cn&&T.delete(rn);return T.size!==a.size?new Map(T):T}),M.data)):(g(M.type),{type:"error",data:{message:""}})).catch(()=>(g(s("An unexpected error occurred. Please contact support@1password.com")),{type:"error",data:{message:""}}))},[a,s,g]),C=(0,z.useCallback)(()=>{p("save")},[p]),A=(0,z.useCallback)(async(v=[])=>p("update",v).then(y=>(y&&y.type==="viewModel"&&d(y.data.elements),y)),[p]),Z=(0,z.useCallback)(v=>{yi(v)?l(y=>new Map(y).set(v.content.id,v)):A([v]).catch(y=>console.error("Failed to update",y))},[A]);(0,z.useEffect)(()=>{if(!a.size)return;let v=window.setTimeout(A,250);return()=>{window.clearTimeout(v)}},[A,a]);let W=(0,z.useMemo)(()=>{let v=Dn.createActiveSpan("elementsWithDraftChanges","saveDialog");if(!m)return[];if(!a.size)return m;let y=window.structuredClone(m);for(let[U,M]of a)for(let T of y){T.header&&bo({type:"sectionHeader",content:T.header},M,U);for(let rn of T.elements)bo(rn,M,U)}return Dn.endActiveSpan(v),y},[m,a]);return(0,ho.jsx)(Ln.Provider,{value:{sections:W,calloutBanner:k,updateItem:Z,saveItem:C},children:r})},Ln=(0,z.createContext)({});function yi(r){switch(r.type){case"text":case"concealedText":case"monthYear":case"dayMonthYear":return!0}return!1}function qr(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var Si=r=>{let e=i=>typeof i=="object"&&i!==null&&qr(i,"type")&&i.type==="textField",o=i=>typeof i=="object"&&i!==null&&qr(i,"type")&&i.type==="textFieldWithSuggestions";return qr(r,"label")&&(e(r.label)||o(r.label))?r.label.content:void 0},Bi=r=>{let e=i=>typeof i=="object"&&i!==null&&"type"in i&&(i.type==="textField"||i.type==="textFieldWithSuggestions"),o=i=>typeof i=="object"&&i!==null&&"id"in i&&"placeholder"in i&&"text"in i;if(r&&qr(r,"textField")){if(o(r.textField))return r.textField;if(e(r.textField))return r.textField.content}};function bo(r,e,o){switch(e.type){case"text":case"concealedText":{let i=Bi(r.content),a=Si(r.content),{text:l}=e.content;if(i?.id===o&&(i.text=l),a?.id===o&&(a.text=l),"components"in r.content)for(let m of r.content.components)m.content.id===o&&(m.content.text=l)}break;case"monthYear":if(r.type==="monthYear"&&r.content.id===o&&r.content.value){let{month:i,year:a}=e.content;r.content.value={month:i,year:a}}break;case"dayMonthYear":{r.type==="dayMonthYear"&&r.content.id===o&&(r.content.value=e.content.utcTimestamp);break}default:Y(e)}}var Ar=t(_()),xr=({errorMessage:r})=>{let{calloutBanner:e}=(0,vo.useContext)(Ln);if(r)return(0,Ar.jsx)(Yr,{icon:{id:"warning",sources:[{type:"ThemedIcon",content:{file:$.Warning}}]},role:"status",variant:"warning",children:r});if(e){let{icon:o,variant:i,text:a}=e;return(0,Ar.jsx)(Yr,{icon:o,role:"alert",variant:i,children:(0,Ar.jsx)(Se,{value:a})})}return null};var Bo=t(b());var pr=t(b());var wo=t(_()),Hn=({inTutorial:r})=>{let{fillingAndSavingTelemetry:e}=(0,pr.useContext)(I),o=(0,pr.useContext)(c),i=(0,pr.useCallback)(()=>{e&&x("record-click-event-all-accounts",{event:{componentType:"button",source:"save_dialog",componentName:"SAVE_DIALOG_CLOSE"}}),x("close-modal",void 0)},[e]);return(0,wo.jsx)(fr,{label:o("Close"),disabled:r,onClick:i,type:"close"})};var yo={hiddenTitleBarText:"Sh",loadingSpinner:"zh"};var So={loadingSpinner:"Ih","fade-in":"cx"};var se=t(_()),Wn=()=>(0,se.jsx)("div",{className:So.loadingSpinner,children:(0,se.jsx)(ur,{})});var vn=t(_()),Io=({titleId:r})=>{let e=(0,Bo.useContext)(c);return(0,vn.jsxs)(vn.Fragment,{children:[(0,vn.jsxs)(ln,{children:[(0,vn.jsx)("div",{className:yo.hiddenTitleBarText,children:(0,vn.jsx)(sn,{id:r,text:e("Loading\u2026")})}),(0,vn.jsx)(Hn,{})]}),(0,vn.jsx)(Wn,{})]})};var Do=t(Sn()),qo=t(Jo()),X=t(b());var Fn={content:"ux",scrollableContent:"bx",reduceTopPadding:"qh",noFlex:"Th",vaultSelectorOption:"Hh",disabled:"Wh"};var To=t(Sn()),Mr=t(b());var Ro=t(Sn()),Fr=t(b());var Hr=t(b());var Co={button:"Dr",expanded:"hx"};var Eo=t(b());var Pr={container:"vx",value:"Ah",pill:"wx"};var er=t(_()),Nn=({value:r})=>{let e=(0,Eo.useContext)(c);return r?(0,er.jsxs)("div",{className:Pr.container,children:[(0,er.jsx)("div",{className:Pr.value,children:r}),(0,er.jsx)("div",{className:Pr.pill,children:(0,er.jsx)(Ie,{color:"inherit",level:6,truncate:1,children:e("Previous")})})]}):null};var On=t(_()),zo=({previousValue:r,...e})=>{let[o,i]=(0,Hr.useState)(!1),a=(0,Hr.useContext)(c),l=o?r:a("Reveal to see previous value"),m=a(o?"Conceal previous value":"Reveal previous value"),d=o?$.Hide:$.Show;return r?(0,On.jsx)(Xr,{...e,value:{...e.value,concealedValue:o?e.value.value:e.value.concealedValue},accessory:(0,On.jsx)(Nn,{value:l}),accessoryAction:(0,On.jsx)(Ee,{value:m,children:(0,On.jsx)("button",{className:Co.button,onClick:()=>i(!o),children:(0,On.jsx)(N,{size:"mini",sources:[{type:"ThemedIcon",content:{file:d}}]})})})}):(0,On.jsx)(Xr,{...e})};var Wr={element:"Gh",primary:"Mh",secondary:"yx"};var S=t(_()),Lo=({compact:r,element:e,onChange:o,topBorder:i})=>{let[a,l]=(0,Fr.useState)(""),m=async n=>x("edit-item-filter",n,{enableTracing:!1}).then(s=>s.ok?s.data:{filteredSuggestions:[]}),d=_e(m,o),k=(0,Fr.useContext)(c);return(0,S.jsx)("div",{className:(0,Ro.default)(Wr.element,{[Wr.primary]:i==="primary",[Wr.seconary]:i==="secondary"}),children:(()=>{switch(e.type){case"add":{let{content:n}=e;return(0,S.jsx)(Ce,{compact:r,icon:n.icon,onClick:()=>o(n.saveValue),value:n.label},n.id)}case"address":{let{content:n}=e;return(0,S.jsx)(Re,{compact:r,components:n.components,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},filterSuggestions:m,label:d(n.label),onInputChange:(s,u)=>o({type:"text",content:{id:s,text:u}}),onSuggestionSelected:o},n.id)}case"customConcealed":case"concealed":{let{content:n}=e;return(0,S.jsx)(zo,{compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},getPasswordGenerator:async()=>Promise.resolve({type:"password",content:{entropy:0,password:"",styledText:[]}}),label:d(n.label),accessibilityLabel:n.textField.accessibilityLabel,value:{concealedValue:n.textField.concealedText,id:n.textField.id,onChange:s=>{o({type:"concealedText",content:{id:n.textField.id,...s}})},placeholder:n.textField.placeholder,value:n.textField.text},previousValue:n.textField.previousValue},n.id)}case"dayMonthYear":{let{content:n}=e;return(0,S.jsx)(Le,{compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},id:n.id,label:d(n.label),value:Ti(n.value),onChange:s=>{if(s){let u=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds())),g=Math.floor(u.getTime()/1e3).toString();o({type:"dayMonthYear",content:{id:n.id,utcTimestamp:g}})}else o({type:"dayMonthYear",content:{id:n.id,utcTimestamp:void 0}})},openCalendarTooltip:n.openCalendarTooltip},n.id)}case"document":{let{content:n}=e;return(0,S.jsx)(ze,{filename:n.previewLabel,fileStatus:{type:"ready",content:{actions:[]}},icon:n.icon,uuid:n.id,documentPlaceholder:n.newDocumentPlaceholder,fileStatusIcon:n.addFileButtonIcon},n.id)}case"editableLabelAndText":{let{content:n}=e;return(0,S.jsx)(vr,{accessory:(0,S.jsx)(Nn,{value:n.textField.content.previousValue}),compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:d(n.label),value:{id:n.textField.content.id,onChange:s=>{o({type:"text",content:{id:n.textField.content.id,text:s}})},placeholder:n.textField.content.placeholder,value:n.textField.content.text}},n.id)}case"url":{let{content:n}=e;return(0,S.jsx)(Te,{accessory:(0,S.jsx)(Nn,{value:n.textField.content.previousValue}),id:n.id,compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:d(n.label),toolAction:n.toolAction?.toolType.type==="autofillBehavior"?{...n.toolAction,onChange:o}:void 0,value:{id:n.textField.content.id,onChange:s=>{o({type:"text",content:{id:n.textField.content.id,text:s}})},placeholder:n.textField.content.placeholder,value:n.textField.content.text}},n.id)}case"totp":{let{content:n}=e,s=n.textField.concealedText;return(0,S.jsx)(vr,{compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:d(n.label),value:{concealedInput:s!==void 0,concealedValue:s,id:n.textField.id,onChange:u=>{o({type:"text",content:{id:n.textField.id,text:u}})},placeholder:n.textField.placeholder,value:n.textField.text}},n.id)}case"linkedItem":{let{content:n}=e;return(0,S.jsx)($r,{compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},icon:n.icon,subtitle:n.subtitle,title:n.title},n.id)}case"monthYear":{let{content:n}=e;return(0,S.jsx)(je,{accessory:(0,S.jsx)(Nn,{value:(u=>u?`${u.month} / ${u.year}`:"")(n.previousValue)}),compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},id:n.id,label:d(n.label),onChange:u=>{o({type:"monthYear",content:{id:n.id,...u}})},placeholder:n.placeholder,value:n.value},n.id)}case"note":{let{content:n}=e;return(0,S.jsx)(Zr,{compact:r,label:d(n.label),value:{id:n.textField.id,onChange:s=>{o({type:"text",content:{id:n.textField.id,text:s}})},placeholder:n.textField.placeholder,value:n.textField.text}},n.id)}case"passkey":{let{content:n}=e;return(0,S.jsx)(He,{compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:n.label.type==="label"?n.label.content:void 0,createdAt:n.createdAt},n.id)}case"editableLabelAndTextArea":{let{content:n}=e;return(0,S.jsx)(Zr,{compact:r,label:d(n.label),value:{id:n.textField.id,onChange:s=>{o({type:"text",content:{id:n.textField.id,text:s}})},placeholder:n.textField.placeholder,value:n.textField.text},buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o}},n.id)}case"tags":{let{content:n}=e;return(0,S.jsx)(Pe,{accessibilityLabel:n.accessibilityLabel,addTag:{icon:n.addTagIcon,onBlur:()=>{a&&(o({type:"tag",content:{type:"create",content:a}}),l(""))},onChange:l,onSubmit:s=>{o({type:"tag",content:{type:"create",content:s}}),l("")},placeholder:n.addTagPlaceholder,value:a,suggestions:n.suggestions,filterSuggestions:m},compact:r,label:n.label,onActionSelected:o,tags:n.tags},n.id)}case"textWithSuggestions":{let{content:n}=e;return(0,S.jsx)(qe,{accessory:(0,S.jsx)(Nn,{value:n.textField.previousValue}),compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},filterSuggestions:m,label:d(n.label),suggestions:n.textField.suggestions,input:{id:n.textField.id,onChange:s=>{o({type:"text",content:{id:n.textField.id,text:s}})},placeholder:n.textField.placeholder,value:n.textField.text},accessibilityLabel:n.textField.accessibilityLabel},n.id)}case"title":{let{content:n}=e;return(0,S.jsx)(qn,{type:"icon",compact:r,icon:n.icon,id:n.textField.content.id,onChange:s=>{o({type:"text",content:{id:n.textField.content.id,text:s}})},"aria-label":k("Input field for the item's title"),placeholder:n.textField.content.placeholder,value:n.textField.content.text},n.id)}case"file":{let{content:n}=e;return(0,S.jsx)($r,{compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},icon:n.icon,subtitle:"",title:n.filename},n.id)}case"unsupported":{let{content:n}=e;return(0,S.jsx)(hr,{compact:r,label:n.label,value:n.displayValue},n.id)}case"readOnlyLabelAndText":{let{content:n}=e;return(0,S.jsx)(vr,{compact:r,buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},label:d(n.label),value:n.value,inlineIcon:n.icon},n.id)}case"ssoLogin":{let{content:n}=e;return(0,S.jsx)(We,{buttonAction:n.buttonAction&&{type:"ButtonAction",...n.buttonAction,onButtonClick:o},icon:n.icon,label:d(n.label),options:n.menuEntries,subtitle:n.subtitle,title:n.title,onSsoOptionSelected:o},n.id)}case"addMore":case"callToAction":case"standaloneFile":return null;case"location":return null;case"addLocation":return null;case"shortcut":return null;case"formattedText":return null;default:Y(e)}})()})},Ti=r=>{if(!r)return;let e=new Date(parseInt(r,10)*1e3);return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,1,0)},_e=(r,e)=>o=>{let i=a=>({id:a.id,onChange:l=>e({type:"text",content:{id:a.id,text:l}}),placeholder:a.placeholder,value:a.text});switch(o.type){case"label":return o.content;case"textField":return i(o.content);case"textFieldWithSuggestions":return{...i(o.content),suggestions:o.content.suggestions,onSuggestionSelected:l=>e({type:"text",content:{id:o.content.id,text:l}}),filterSuggestions:r,accessibilityLabel:o.content.accessibilityLabel};default:Y(o)}};var or={singleSpacingBefore:"Oh",doubleSpacingBefore:"Dh",primary:"Bx",secondary:"Ph"};var ir=t(_()),Vr=({section:r})=>{let{updateItem:e}=(0,Mr.useContext)(Ln),i=_e(async a=>x("edit-item-filter",a,{enableTracing:!1}).then(l=>l.ok?l.data:{filteredSuggestions:[]}),e);return(0,ir.jsx)("div",{className:(0,To.default)(or[r.aboveSpacing+"Spacing"],{[or.singleSpacingBefore]:r.aboveSpacing===Ur.Single,[or.doubleSpacingBefore]:r.aboveSpacing===Ur.Double,[or.primary]:r.kind===lr.Primary,[or.secondary]:r.kind===lr.Secondary}),children:r.elements.map((a,l)=>{let m=(r?.header||l>0)&&l<r.elements.length,d=r.kind===lr.Primary||r.kind===lr.Secondary?r.kind:void 0;return(0,ir.jsxs)(Mr.default.Fragment,{children:[r.header&&l===0&&(0,ir.jsx)(Ae,{buttonAction:r.header.buttonAction&&{type:"ButtonAction",...r.header.buttonAction,onButtonClick:e},value:i(r.header.label)}),(0,ir.jsx)(Lo,{element:a,onChange:e,topBorder:m?d:void 0})]},`${r.id}-${a.content.id}`)})})};var j=t(_()),jo=({calloutBanner:r,focusFieldId:e,showTutorialTooltip:o,underTabBar:i,vaultSelector:a,onVaultChange:l})=>{let{sections:m,saveItem:d}=(0,X.useContext)(Ln),k=(0,X.useRef)(null),n=(0,X.useContext)(c),{fillingAndSavingTelemetry:s}=(0,X.useContext)(I),u=(0,X.useCallback)(()=>{s&&x("record-click-event-first-account",{event:{componentType:"button",source:"save_dialog",componentName:"SAVE_DIALOG_SAVE"}}),d()},[s,d]),g=(0,qo.default)(u,100);(0,X.useEffect)(()=>{e&&document.getElementById(e)?.focus()},[e,m.length]);let p=()=>m.length===0?(0,j.jsx)(Wn,{}):(0,j.jsx)(Kn,{elevateOnScroll:"both",thin:!0,children:(0,j.jsx)("div",{className:(0,Do.default)(Fn.scrollableContent,{[Fn.reduceTopPadding]:i}),children:m.map(C=>(0,j.jsx)(Vr,{section:C},C.id))})});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:Fn.content,children:p()}),(0,j.jsxs)(bn,{description:r,children:[a?(0,j.jsx)(qi,{onChange:l,options:a.elements,selected:a.selectedOption}):null,(0,j.jsx)("div",{className:Fn.noFlex,children:(0,j.jsx)(E,{mode:"primary",ref:k,onClick:g,disabled:!a?.selectedOption,children:n("Save")})}),o?(0,j.jsx)(ge,{children:(0,j.jsx)(Ke,{initialPlacement:"right",primaryText:n("Step 3: Review or edit your new login item, then save it."),secondaryText:n("Once saved, we'll remember it for you."),targetRef:k})}):null]})]})},qi=({onChange:r,options:e,selected:o})=>{let i=(0,X.useContext)(c),[a,l]=(0,X.useState)("bottom-start");(0,X.useEffect)(()=>{let k=n=>{let s=n.target;s.visualViewport?.height&&s.visualViewport.height>800?l("top-start"):l("bottom-start")};return window.addEventListener("resize",k),window.visualViewport?.height&&window.visualViewport.height>800&&l("top-start"),()=>window.removeEventListener("resize",k)},[]);let m=(0,X.useMemo)(()=>e.length===0?[{type:"text",className:Fn.disabled,id:"no-vaults",typeAhead:i("All vaults are disabled."),value:i("All vaults are disabled."),disabled:!0,onSelect:()=>{}}]:e.map(k=>{switch(k.type){case"header":return{id:k.data.id,type:"groupLabel",value:k.data.label};case"option":{let{data:n}=k;return{className:Fn.vaultSelectorOption,disabled:n.state==="disabled",id:n.id,onSelect:()=>r(n.id),selected:n.state==="selected",type:"text",typeAhead:n.label,value:(0,j.jsx)(In,{disabled:n.state==="disabled",icon:{...n.icon,size:"medium"},label:n.label,secondaryLabel:n.subtitle})}}case"separator":return{id:k.data.id,type:"separator"};default:Y(k)}}),[i,e,r]);return(0,j.jsx)(Bn,{placement:a,items:m,children:e.length===0?(0,j.jsx)("span",{className:Fn.disabled,children:i("All vaults are disabled.")}):o?(0,j.jsx)(Zn,{items:o}):i("Select a vault")})};var Ao=t(b());var on=t(_()),Po=({errorMessage:r})=>{let e=(0,Ao.useContext)(c);return(0,on.jsxs)(on.Fragment,{children:[(0,on.jsxs)(ln,{children:[(0,on.jsx)(sn,{text:e("Error")}),(0,on.jsx)(Hn,{})]}),(0,on.jsx)(Wn,{}),(0,on.jsxs)(bn,{description:(0,on.jsx)(xr,{errorMessage:r}),children:[(0,on.jsx)(E,{mode:"primaryAlt",onClick:()=>void x("open-support-link",void 0),children:e("Get Help\u2026")}),(0,on.jsx)(E,{mode:"primary",onClick:async()=>x("close-modal",void 0),children:e("Close")})]})]})};var un=t(b());var Gn={header:"Vh",separator:"Xh",selectableRow:"Qi",textLabel:"Zh",chevron:"Nh",items:"o_"};var dn=t(_()),Ho=({items:r,onItemSelected:e})=>{let o=(0,un.useRef)(null),i=(0,un.useRef)(!1),a=(0,un.useRef)(null),l=(0,un.useMemo)(()=>r.reduce((g,p)=>(p.type==="option"&&g.push(p.data),g),[]),[r]),m=(0,un.useMemo)(()=>l.map(g=>g.id),[l]),[d,k]=ue(m),n=(0,un.useContext)(c);(0,un.useLayoutEffect)(()=>{a.current?.querySelector("li[aria-selected=true]")?.scrollIntoView({block:"nearest"})},[d]),pe({next:[{key:"ArrowDown"},{key:"n",modifiers:{ctrl:!0},os:"macos"}],previous:[{key:"ArrowUp"},{key:"p",modifiers:{ctrl:!0},os:"macos"}],selectWithEnter:{key:"Enter"},selectWithSpace:{key:" "}},{next:()=>k.next(),previous:()=>k.previous(),selectWithEnter:()=>{let g=l.find(p=>p.id===d);g&&e(g.id)},selectWithSpace:()=>{if(!s){let g=l.find(p=>p.id===d);g&&e(g.id)}}},o);let s=fe(g=>{for(let p of l)if(p.label.replace(/\s+/g,"").toLowerCase().startsWith(g.toLowerCase())){k.entry(p.id);break}},o),u=async g=>{let p=await x("get-custom-icon-url",{itemId:g});if(p.ok)return p.data;if(p.type==="nolistener"){let C="No listener registered for GetCustomIconUrl";throw new Error(C)}else throw p.error};return(0,dn.jsx)(Kn,{elevateOnScroll:"top",ref:a,thin:!0,children:(0,dn.jsx)("ul",{"aria-activedescendant":d,"aria-label":n("Existing items"),className:Gn.items,onBlur:()=>k.none(),onFocus:()=>{!d&&!i.current&&k.entry(m[0]),i.current&&(i.current=!1)},onMouseDown:g=>{g.currentTarget!==document.activeElement&&(i.current=!0)},ref:o,role:"listbox",tabIndex:0,children:r.map(g=>{switch(g.type){case"header":{let{data:p}=g;return(0,dn.jsx)("li",{className:Gn.header,children:(0,dn.jsx)(Zn,{items:[{icon:p.accountIcon,text:p.accountLabel},{icon:p.vaultIcon,text:p.vaultLabel}]})},p.id)}case"option":{let{data:p}=g;return(0,dn.jsxs)("li",{"aria-selected":d===p.id||void 0,className:Gn.selectableRow,"data-theme":d===p.id?"dark":void 0,id:p.id,onClick:()=>e(p.id),role:"option",children:[(0,dn.jsx)(In,{className:Gn.textLabel,icon:(0,dn.jsx)(N,{...p.icon,size:"medium",getCustomIcon:u}),label:p.label,secondaryLabel:p.subtitle}),(0,dn.jsx)(N,{className:Gn.chevron,sources:[{type:"ThemedIcon",content:{file:$.ChevronRight}}],size:"mini"})]},p.id)}case"separator":return(0,dn.jsx)("li",{children:(0,dn.jsx)("hr",{className:Gn.separator})},g.data.id)}})})})};var Wo={tabsContainer:"Uh"};var Fo=t(b());var ar=t(_()),Mo=({titleId:r,inTutorial:e})=>{let o=(0,Fo.useContext)(c);return(0,ar.jsxs)(ln,{children:[(0,ar.jsx)(Yn,{}),(0,ar.jsx)(sn,{id:r,text:o("Save Item")}),(0,ar.jsx)(Hn,{inTutorial:e})]})};var Mn=t(_()),Vo=({autoFocus:r,activeTabId:e,children:o,onTabChange:i,tabs:a,titleId:l,inTutorial:m})=>(0,Mn.jsxs)(Mn.Fragment,{children:[(0,Mn.jsx)(Mo,{titleId:l,inTutorial:m}),a.length>0?(0,Mn.jsx)("div",{className:Wo.tabsContainer,children:(0,Mn.jsx)(Fe,{autoFocus:r,activeTabId:e,onTabClick:i,tabs:a})}):null,o]});var Un=t(b());var kr={content:"Sx",scrollableContent:"Kh",itemLocation:"Yh",noFlex:"Fh"};var H=t(_()),No=({calloutBanner:r,focusFieldId:e,itemLocation:o,onBack:i,titleId:a})=>{let{sections:l,saveItem:m}=(0,Un.useContext)(Ln),d=(0,Un.useContext)(c),k=(0,Un.useCallback)(()=>{x("record-click-event-first-account",{event:{componentType:"button",source:"save_dialog",componentName:"SAVE_DIALOG_UPDATE"}}),m()},[m]);return(0,Un.useEffect)(()=>{!e||l.length===0||document.getElementById(e)?.focus()},[e,l.length]),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(ln,{children:[(0,H.jsx)(fr,{autoFocus:!0,label:d("Back"),onClick:i,type:"back"}),(0,H.jsx)(sn,{centered:!0,id:a,text:d("Update Item")}),(0,H.jsx)(Hn,{})]}),(0,H.jsx)("div",{className:kr.content,children:l.length===0?(0,H.jsx)(Wn,{}):(0,H.jsx)(Kn,{elevateOnScroll:"both",thin:!0,children:(0,H.jsx)("div",{className:kr.scrollableContent,children:l.map(n=>(0,H.jsx)(Vr,{section:n},n.id))})})}),(0,H.jsxs)(bn,{description:r,children:[o?(0,H.jsx)("div",{className:kr.itemLocation,children:(0,H.jsx)(Zn,{items:o})}):null,(0,H.jsx)("div",{className:kr.noFlex,children:(0,H.jsx)(E,{mode:"primary",onClick:k,children:d("Update")})})]})]})};var gr=t(b());var Go=t(_()),Oo=({children:r,id:e,itemLocation:o,initialViewModel:i,onError:a})=>{let[l,m]=(0,gr.useState)({itemLocation:o}),[d,k]=(0,gr.useState)(i),n=i!==void 0;return(0,gr.useEffect)(()=>{!e||n||x("save-dialog-update-item-view",{id:e}).then(s=>{s.ok?(m({focusFieldId:s.data.viewModel.focus?.textFieldId??s.data.viewModel.focus?.elementId,itemLocation:s.data.itemLocation}),k(s.data.viewModel)):console.error("Failed to get SaveDialogUpdateItemView")})},[e,n]),(0,Go.jsx)(jr,{initialElements:d?.elements,onError:a,initialCallout:d?.callout,children:r?.(l)})};var mn=t(_()),Uo=()=>{let[r,e]=(0,nn.useReducer)(Hi,{currentView:"waiting-for-initial-config"}),{bridge:o}=(0,nn.useContext)(I),i=r.initialNewItemView!==void 0,a=(0,nn.useContext)(c),l=(0,nn.useId)();(0,nn.useEffect)(()=>{!i&&(r.currentView==="new-item"||r.currentView==="updatable-item-list")&&x("save-dialog-new-item-view",void 0).then(n=>{n.ok?e({type:"new-item-view",data:n.data}):e({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")})}).catch(()=>e({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")}))},[i,r.currentView,a]);let m=(0,nn.useCallback)(async()=>x("save-dialog-configuration",void 0).then(n=>{if(n.ok)switch(n.data.type){case"success":e({type:"configure",data:n.data.data});break;case"error":e({type:"error",error:n.data.data&&n.data.data.length>0?n.data.data:a("An unexpected error occurred. Please contact support@1password.com")})}else e({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")})}).catch(()=>e({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")})),[a]),d=(0,nn.useCallback)(()=>{x("close-modal",void 0)},[]);(0,nn.useEffect)(()=>{m().catch(d)},[m,d]),Jn("vaults-changed",m,[]),(0,nn.useEffect)(()=>{let n=o.on("refresh-items",m);return()=>{o.off("refresh-items",n)}},[m,a]);let k=()=>{if(r.currentView==="update-item")return(0,mn.jsx)(Oo,{id:r.updateItemId,initialViewModel:r.initialUpdateItemView?.viewModel,itemLocation:r.initialUpdateItemView?.itemLocation,onError:s=>e({type:"error",error:s}),children:({itemLocation:s,focusFieldId:u})=>(0,mn.jsx)(No,{calloutBanner:(0,mn.jsx)(xr,{errorMessage:r.errorMessage}),focusFieldId:u,itemLocation:s,onBack:()=>e({type:"current-view",data:r.updatableItems&&r.updatableItems.itemListElements.length>0?"updatable-item-list":"new-item"}),titleId:l})});let n=r.updatableItems?[{id:"new-item",label:a("New Item")},{id:"updatable-item-list",label:a("Update Existing")}]:[];return(0,mn.jsx)(jr,{initialElements:r.initialNewItemView?.viewModel.elements,initialCallout:r.initialNewItemView?.viewModel.callout,onError:s=>e({type:"error",error:s}),children:(0,mn.jsx)(Vo,{autoFocus:r.currentView==="updatable-item-list",activeTabId:r.currentView,onTabChange:s=>{s!=="new-item"&&s!=="updatable-item-list"||e({type:"current-view",data:s})},tabs:n,titleId:l,inTutorial:r.initialNewItemView?.inTutorial,children:r.currentView==="updatable-item-list"?(0,mn.jsx)(Ho,{items:r.updatableItems?.itemListElements??[],onItemSelected:s=>{e({type:"current-view",data:"update-item"}),e({type:"update-item-id",data:s})}}):(0,mn.jsx)(jo,{calloutBanner:(0,mn.jsx)(xr,{errorMessage:r.errorMessage}),focusFieldId:(()=>{if(!(r.previousView==="waiting-for-initial-config"))return;let u=r.initialNewItemView?.viewModel.focus;return u?.textFieldId??u?.elementId})(),showTutorialTooltip:r.initialNewItemView?.inTutorial,underTabBar:n.length>0,vaultSelector:r.initialNewItemView?.vaultSelector,onVaultChange:s=>{x("save-dialog-vault-selector",s).then(u=>{u.ok?e({type:"update-vault-selector",data:u.data}):e({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")})}).catch(()=>e({type:"error",error:a("An unexpected error occurred. Please contact support@1password.com")}))}})})})};return(0,mn.jsx)(Xn,{role:"dialog",ariaLabel:a("Save or update information dialog in 1Password"),height:500,onClose:d,open:!0,children:r.currentView==="waiting-for-initial-config"?r.errorMessage?(0,mn.jsx)(Po,{errorMessage:r.errorMessage}):(0,mn.jsx)(Io,{titleId:l}):Dn.syncObserve("render","saveDialog",()=>k())})},Hi=(r,e)=>{switch(e.type){case"configure":{let{updatableItems:o,initialView:i,showUpdatableItemList:a}=e.data,l=r.currentView==="updatable-item-list"&&o&&o.itemListElements.length>0;return{...r,currentView:a||l?"updatable-item-list":i.type,initialNewItemView:i.type==="new-item"?i.data:r.initialNewItemView,initialUpdateItemView:i.type==="update-item"?i.data:r.initialUpdateItemView,previousView:r.currentView,updatableItems:o}}case"current-view":{let o=r.currentView!=="update-item"&&e.data==="update-item",i=r.currentView==="update-item"&&e.data!=="update-item";return{...r,currentView:e.data,initialNewItemView:o?void 0:r.initialNewItemView,initialUpdateItemView:i?void 0:r.initialUpdateItemView,previousView:r.currentView}}case"new-item-view":return{...r,initialNewItemView:e.data};case"update-item-id":return{...r,updateItemId:e.data};case"update-vault-selector":{let{vaultSelector:o,viewModel:i}=e.data;return{...r,initialNewItemView:r.initialNewItemView?{...r.initialNewItemView,vaultSelector:o,viewModel:i||r.initialNewItemView.viewModel}:void 0}}case"error":return{...r,errorMessage:e.error};default:Y(e)}};var Ko=t(Sn()),tn=t(b());var Nr={marginReset:"Jh",paddingReset:"Qh"};var an=t(_());function Fi({suggestedVaultUuid:r,vaults:e,title:o}){let{bridge:i}=(0,tn.useContext)(I),a=(0,tn.useContext)(c),{state:l}=(0,tn.useContext)(fn),m=(0,tn.useContext)(jn),[d,k]=(0,tn.useState)(o),[n,s]=(0,tn.useState)(r),[u,g]=(0,tn.useState)(),[p,C]=(0,tn.useState)(!1),{withChangedSettings:A,handleSettingChange:Z,state:W}=Ge("SaveDialog_Ssh"),v=async()=>{if(!W.context||!n)return;g(!1),C(!0),await x("generate-and-fill-ssh-key",{title:d,context:W.context,accountVaultUuid:n})?(x("close-modal",void 0),i.onSshKeyCreated()):(g(!0),C(!1))},y=m==="small"&&l.primaryInput==="touch";if(W.elements)return(0,an.jsx)(Cn,{ariaLabel:a("Create & Fill SSH Key"),buttonOrientation:y?"vertical":"horizontal",headerAccessories:(0,an.jsx)(pn,{title:a("Create & Fill SSH Key"),onClose:async()=>x("close-modal",void 0),disabledClose:p}),children:(0,an.jsxs)(we,{"data-testid":"ssh-body",padding:"medium",gap:"medium",children:[(0,an.jsx)(qn,{id:"editableTitle",type:"icon",className:(0,Ko.default)(Nr.marginRest,Nr.paddingReset),onChange:k,icon:{id:"itemIcon",sources:[{type:"DefaultIcon",content:{file:Tn.Ssh}}]},placeholder:a("Title"),value:d,autoFocus:!0}),(0,an.jsx)(De,{elements:A(W.elements),onChange:Z,onButtonClick:()=>{console.warn("This is impossible")}}),u&&(0,an.jsx)(ye.Critical,{title:a("An unexpected error occurred. Please contact support@1password.com")}),(0,an.jsxs)(ve,{direction:y?"column":"row",alignItems:y?"flex-end":void 0,wrap:"nowrap",gap:"small",children:[(0,an.jsx)(wr,{selectedVaultId:n,vaultListElements:e,onSelect:U=>s(U.content.id),buttonClassName:Nr.marginReset}),(0,an.jsx)(be,{flexShrink:"0",children:(0,an.jsx)(he.Primary,{onClick:v,loading:p,disabled:!W.context||!n,children:a("Create & Fill")})})]})]})})}var Yo=()=>{let[r,e]=(0,tn.useState)();return(0,tn.useEffect)(()=>{x("get-ssh-create-dialog-configuration",void 0).then(o=>{o.ok?e(o.data):console.error("Failed to get SshKeyCreateDialogConfiguration")})},[]),r?(0,an.jsx)(Fi,{suggestedVaultUuid:r.vaults.suggestedVaultId,vaults:r.vaults.vaultListElements,title:r.title}):null};var Or=class{constructor(e){this.transport=e}on(e,o){return this.transport.on(e,o)}off(e,o){return this.transport.off(e,o)}async getPrivacyEnableDialogConfiguration(){return this.transport.request({name:"get-privacy-enable-dialog-configuration",data:void 0})}async getPrivacyDialogConfiguration(){return this.transport.request({name:"get-privacy-create-dialog-configuration",data:void 0})}async onSshKeyCreated(){return this.transport.request({name:"on-ssh-key-created"})}async enablePrivacyIntegration(e){return this.transport.request({name:"enable-privacy-integration",data:e})}async fillNewPrivacyCard(e){return this.transport.request({name:"fill-new-privacy-card",data:e})}async canRequestUnlock(){return this.transport.request({name:"can-request-unlock",data:void 0})}async getEmailAliasDialogConfiguration(){return this.transport.request({name:"get-email-alias-dialog-configuration"})}async startEmailAliasSession(e){return this.transport.request({name:"start-email-alias-session",data:e})}async generateEmailAlias(){return this.transport.request({name:"generate-email-alias",data:void 0})}async cancelEmailAliasSession(){return this.transport.request({name:"cancel-email-alias-session",data:void 0})}async fillEmailAlias(e){return this.transport.request({name:"fill-new-email-alias",data:e})}async getBrexDialogConfiguration(){return this.transport.request({name:"get-brex-dialog-configuration",data:void 0})}async fillNewBrexCard(e){return this.transport.request({name:"fill-new-brex-card",data:e})}};import Mi from"/assets/js/messages.i18n-ZO4Z24RJ.js";var Xo=()=>{xe(3),sr("app-theme-changed",_r("app-theme-changed")),sr("update-connectivity-status",_r("update-connectivity-status")),sr("vaults-changed",_r("vaults-changed")),sr("lock-state-changed",_r("lock-state-changed"))};var G=t(_());document.addEventListener("DOMContentLoaded",()=>{let r=new Or(Ue());Xo(),(0,Zo.createRoot)(document.getElementById("root")).render((0,G.jsx)(Ni,{bridge:r}))});var Vi=new Dn("b5x-save-dialog",r=>{x("send-trace",r,{enableTracing:!1})});function Ni({bridge:r,telemetryEnabledOverrideForTesting:e}){let[o,i]=(0,Vn.useState)(),[a,l]=(0,Vn.useState)(window.location.hash),[m,d]=(0,Vn.useState)(e??!1);(0,Vn.useEffect)(()=>{x("get-app-configuration",void 0).then(n=>{n.ok?(d(n.data.unleashFeatures["b5x-filling-saving-telemetry"]),i(n.data)):console.error("Failed to fetch get app configuration.")}),x("has-pre-registration-flag","b5x-pre-auth-tracing").then(n=>{n.ok&&n.data===!0&&Vi.startObserver()})},[r]),Jn("lock-state-changed",n=>{i(s=>{if(s)return{...s,locked:n.locked}})},[]),Jn("app-theme-changed",n=>{i(s=>{if(s)return{...s,appTheme:n.appTheme}})},[]),Jn("update-connectivity-status",n=>{i(s=>{if(s)return{...s,connectivityStatus:n}})},[]),(0,Vn.useEffect)(()=>{let n=()=>l(window.location.hash);return window.addEventListener("hashchange",n),()=>window.removeEventListener("hashchange",n)},[]),(0,Vn.useEffect)(()=>{m&&x("record-view-event-all-accounts",{event:{componentType:"dialog",source:"save_dialog",componentName:`DIALOG_VIEW_save_dialog_${a}`}})},[m,a]);let k=()=>{if(!o)return null;if(o.locked)return(0,G.jsx)(ae,{});if(o.connectivityStatus!=="online")return(0,G.jsx)(lo,{});switch(a){case"#brex-create-credit-card":return(0,G.jsx)(io,{});case"#privacy-create-credit-card":return(0,G.jsx)(uo,{});case"#privacy-enable-integration":return(0,G.jsx)(fo,{});case"#create-an-email-alias":return(0,G.jsx)(so,{});case"#save-dialog":return(0,G.jsx)(Uo,{});case"#loading":return null;case"#create-ssh-key":return(0,G.jsx)(Yo,{});default:return(0,G.jsx)(ae,{})}};return(0,G.jsx)(ke,{themeOverride:o?.appTheme,children:(0,G.jsx)(Ve,{children:(0,G.jsx)(Oe,{children:(0,G.jsx)(Me,{children:(0,G.jsx)(Xe,{bridge:r,fillingAndSavingTelemetry:m,children:(0,G.jsx)(Ne,{locale:o?.locale||"en",messages:Mi,children:Dn.syncObserve("componentToRender","modal",()=>k())})})})})})})}export{Ni as App};

//# debugId=926e2dac-2199-5b77-97f9-aa5503b0fdbe
