/*! For license information please see coupon-modal.js.LICENSE.txt */
"use strict";(self.webpackChunksource=self.webpackChunksource||[]).push([[729],{17167:(e,o,t)=>{t.d(o,{A:()=>v});var n=t(65081),a=t.n(n),r=(t(77810),t(89322)),l=t(73286),i=t(57321),s=t(83127),c=t(86895),d=t(50339),u=t(25385),p=t(53583),m=t(10519);const h=function({children:e,showShadow:o,...t}){const{isMinMedium:n}=(0,p.E1)(),r={base:"h2.base",medium:"h3.medium"};return(0,m.Y)(u.A,a()({color:"text.primary",alignItems:"center",as:n?"h3":"h2",fontSize:r,fontFamily:r,fontWeight:r,lineHeight:r,pt:"xlarge",pb:"medium",px:"large",textAlign:"center",boxShadow:o?"default":"none"},t),e)};var f=t(53923);const g=function({showShadow:e,children:o,...t}){return(0,m.Y)(f.az,a()({pt:"grande",pb:"large",px:"large",width:"100%",textAlign:"center",boxShadow:e?"navigationBottom":"none"},t),o)};var C=t(24208),x=t(84394);const v=({modalContent:e,modalFooterStyle:o,modalBodyStyle:t,modalHeaderStyle:n,exitIconStyle:u,dialogStyle:p={},size:f="default",isOpen:v=!1,onClose:b,showCloseIcon:y=!0,scrollBehavior:w="inside",children:S,viewEvent:E,payloads:k=[],additionalPayloadData:O={},modalContentProps:P,...T})=>{const{space:Y}=(0,r.DP)(),[A,D,I,M,B]=(0,c.u)(v),{trackEvent:R}=(0,d.$V)(),[z,H]=k,U=(0,x.VD)({topicPayloadNodes:[z],tilePayloadNode:H});return(0,m.Y)(l.aF,a()({isOpen:v,onClose:()=>{M(!1),b&&(R("Close Modal",{...U,...O}),b())},size:f,scrollBehavior:w,dialogStyle:"full"===f?{maxHeight:"100vh",...p}:{my:"auto",maxHeight:"80vh",mx:`min(${Y.xlarge}, 100vw)`,...p}},T),(0,m.Y)(l.mH,null),(0,m.Y)(C.d,a()({as:i.$,viewEvent:E,payloads:k},P),e?.header?(0,m.Y)(l.rQ,{p:0,zIndex:1},(0,m.Y)(h,a()({showShadow:A&&D},n),e.header)):null,y?(0,m.Y)(l.s_,{zIndex:1},(0,m.Y)(s.A,a()({fill:"text.secondary"},u))):null,S?(0,m.Y)(l.cw,a()({ref:B,px:"large",py:"medium",onScroll:I},t),S):null,e?.footer?(0,m.Y)(l.jl,{p:0},(0,m.Y)(g,a()({showShadow:A&&D},o),e.footer)):null))}},45445:(e,o,t)=>{t.r(o),t.d(o,{default:()=>pe});var n=t(77810),a=t(53583),r=t(65081),l=t.n(r),i=t(17167),s=t(53923),c=t(3282),d=t(10519);const u=function({ctaText:e,onCtaClick:o,showShadow:t,...n}){return o?(0,d.Y)(s.az,l()({pt:"grande",pb:"large",px:"large",width:{base:"100%",medium:"auto"},textAlign:"center",boxShadow:t?"navigationBottom":"none"},n),(0,d.Y)(c.$,{variant:"primary",tabIndex:0,size:"large",onClick:o,maxWidth:{base:"100%",medium:360}},(0,d.Y)(s.az,{isTruncated:!0},e))):null};var p=t(62273),m=t(84611),h=t(89322),f=t(63918),g=t(71997),C=t(93003),x=t(33905),v=t(27212),b=t(54311),y=t(95447),w=t(94433),S=t(99299),E=t(63274),k=t(57071),O=t(68641),P=t(93013);function T(){return T=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},T.apply(this,arguments)}function Y(e,o){if(null==e)return{};var t,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],o.indexOf(t)>=0||(a[t]=e[t]);return a}var A={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},D=["openDelay","closeDelay","closeOnClick","closeOnMouseDown","closeOnEsc","onOpen","onClose","placement","id","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction"];var I=["children","label","shouldWrapChildren","aria-label","hasArrow","bg","portalProps","background","backgroundColor","bgColor"],M=(0,h.Bv)(E.P.div),B=(0,h.Rf)((function(e,o){var t,a,r=(0,h.Vl)("Tooltip",e),l=(0,h.MN)(e),i=(0,h.DP)(),s=l.children,c=l.label,d=l.shouldWrapChildren,u=l["aria-label"],p=l.hasArrow,f=l.bg,g=l.portalProps,C=l.background,x=l.backgroundColor,v=l.bgColor,E=Y(l,I),B=null!=(t=null!=(a=null!=C?C:x)?a:f)?t:v;B&&(r.bg=B,r[b.U.arrowBg.var]=(0,w.f4)(i,"colors",B));var R,z=function(e){void 0===e&&(e={});var o=e,t=o.openDelay,a=void 0===t?0:t,r=o.closeDelay,l=void 0===r?0:r,i=o.closeOnClick,s=void 0===i||i,c=o.closeOnMouseDown,d=o.closeOnEsc,u=void 0===d||d,p=o.onOpen,h=o.onClose,f=o.placement,g=o.id,C=o.isOpen,x=o.defaultIsOpen,v=o.arrowSize,y=void 0===v?10:v,S=o.arrowShadowColor,E=o.arrowPadding,k=o.modifiers,A=o.isDisabled,I=o.gutter,M=o.offset,B=o.direction,R=Y(o,D),z=(0,m.j1)({isOpen:C,defaultIsOpen:x,onOpen:p,onClose:h}),H=z.isOpen,U=z.onOpen,j=z.onClose,F=(0,b.E)({enabled:H,placement:f,arrowPadding:E,modifiers:k,gutter:I,offset:M,direction:B}),_=F.referenceRef,N=F.getPopperProps,$=F.getArrowInnerProps,V=F.getArrowProps,W=(0,m.Bi)(g,"tooltip"),J=n.useRef(null),K=n.useRef(),L=n.useRef(),Q=n.useCallback((function(){A||(K.current=window.setTimeout(U,a))}),[A,U,a]),X=n.useCallback((function(){K.current&&clearTimeout(K.current),L.current=window.setTimeout(j,l)}),[l,j]),Z=n.useCallback((function(){s&&X()}),[s,X]),G=n.useCallback((function(){c&&X()}),[c,X]),q=n.useCallback((function(e){H&&"Escape"===e.key&&X()}),[H,X]);(0,O.b)("keydown",u?q:void 0),n.useEffect((function(){return function(){clearTimeout(K.current),clearTimeout(L.current)}}),[]),(0,O.b)("mouseleave",X,(function(){return J.current}));var ee=n.useCallback((function(e,o){return void 0===e&&(e={}),void 0===o&&(o=null),T({},e,{ref:(0,P.Px)(J,o,_),onMouseEnter:(0,w.Hj)(e.onMouseEnter,Q),onClick:(0,w.Hj)(e.onClick,Z),onMouseDown:(0,w.Hj)(e.onMouseDown,G),onFocus:(0,w.Hj)(e.onFocus,Q),onBlur:(0,w.Hj)(e.onBlur,X),"aria-describedby":H?W:void 0})}),[Q,X,G,H,W,Z,_]),oe=n.useCallback((function(e,o){var t;return void 0===e&&(e={}),void 0===o&&(o=null),N(T({},e,{style:T({},e.style,(t={},t[b.U.arrowSize.var]=y?(0,w.px)(y):void 0,t[b.U.arrowShadowColor.var]=S,t))}),o)}),[N,y,S]),te=n.useCallback((function(e,o){return void 0===e&&(e={}),void 0===o&&(o=null),T({ref:o},R,e,{id:W,role:"tooltip",style:T({},e.style,{position:"relative",transformOrigin:b.U.transformOrigin.varRef})})}),[R,W]);return{isOpen:H,show:Q,hide:X,getTriggerProps:ee,getTooltipProps:te,getTooltipPositionerProps:oe,getArrowProps:V,getArrowInnerProps:$}}(T({},E,{direction:i.direction}));if((0,w.Kg)(s)||d)R=n.createElement(h.Bv.span,T({tabIndex:0},z.getTriggerProps()),s);else{var H=n.Children.only(s);R=n.cloneElement(H,z.getTriggerProps(H.props,H.ref))}var U=!!u,j=z.getTooltipProps({},o),F=U?(0,w.cJ)(j,["role","id"]):j,_=(0,w.Up)(j,["role","id"]);return c?n.createElement(n.Fragment,null,R,n.createElement(k.N,null,z.isOpen&&n.createElement(y.ZL,g,n.createElement(h.Bv.div,T({},z.getTooltipPositionerProps(),{__css:{zIndex:r.zIndex,pointerEvents:"none"}}),n.createElement(M,T({variants:A},F,{initial:"exit",animate:"enter",exit:"exit",__css:r}),c,U&&n.createElement(S.s6,_,u),p&&n.createElement(h.Bv.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper"},n.createElement(h.Bv.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:r.bg}}))))))):n.createElement(n.Fragment,null,s)}));w.gt&&(B.displayName="Tooltip");var R=t(23259);const z={coupon:g.A,referral:C.A},H={hasTooltip:!1,label:"Code Copied","aria-label":"Code Copied",canDisplayTooltip:!0,closeOnClick:!0,placement:"top"},U=(0,n.forwardRef)((({code:e,isSmall:o=!1,variant:t="coupon",onCodeClick:a,tooltipProps:r,...i},c)=>{const{onCopy:u}=(0,m.iD)(e),[p,g]=(0,n.useState)(!1),{radii:C}=(0,h.DP)(),b=(0,v.Q)({focusBorderRadius:C.ui,focusBorderSpacing:"xxsmall"}),y=p?x.A:z[t],w={...H,...r};return(0,d.Y)(B,l()({isOpen:w.canDisplayTooltip&&p&&w.hasTooltip},w),(0,d.Y)(s.so,l()({ref:c,as:"button",onClick:()=>{u(),g(!0),a&&a()},color:"text.action",borderStyle:"dashed",borderColor:"text.action",borderRadius:C.tag,px:o?"xsmall":"large",py:o?"xxsmall":"medium",sx:b,align:"center"},i),(0,d.Y)(y,{pr:"xsmall",fill:"text.action",width:"xxxsmall"}),(0,d.Y)(f.A,{textStyle:"tagSmall"},e)))})),j=(0,R.l)({dataMapper:e=>({id:e.id,subtype:e.variant??"coupon",type:"Button",size:e.isSmall?"small":"large"}),domHandlerData:[{handler:"onClick",eventType:"Button Clicked"}]})(U),F=(0,n.forwardRef)((({bodyText:e,couponCode:o,onCodeClick:t,canDisplayTooltip:n=!0,...a},r)=>(0,d.Y)(s.BJ,l()({width:"100%",justifyContent:"center",alignItems:"center",mt:"0",py:"medium",spacing:"medium",px:"large"},a),o||e?(0,d.Y)(p.A,{color:"text.primary",fontFamily:{base:"bannerSmall.base",medium:"bannerSmall.medium"},fontSize:{base:"subheaderSmall.base",medium:"subheaderSmall.medium"},lineHeight:{base:"subheaderSmall.base",medium:"subheaderSmall.medium"},fontWeight:{base:"subheaderSmall.base",medium:"subheaderSmall.medium"},mt:"0",textAlign:"center",display:"block",whiteSpace:"pre-line"},`${o?"Copy and paste the code at checkout.":""} ${e||""}`):null,o?(0,d.Y)(j,{ref:r,code:o,isSmall:!1,variant:"coupon",onCodeClick:t,tooltipProps:{hasTooltip:!0,canDisplayTooltip:n}}):null)));var _=t(86895);let N=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.MOBILE_SAFARI="Mobile Safari",e.FIREFOX="Firefox",e.OPERA="Opera",e.EDGE="Edge",e.IE="IE",e.AVAST="Avast",e}({});const $=n.createContext({browser:N.CHROME,isMobileOrTablet:!1});$.Provider;var V=t(99460),W=t(33868);const J=()=>n.useContext(W.z),K=()=>n.useContext($),L=n.createContext(null),Q=n.createContext({search:null,categoryMenu:null}),X=(Q.Provider,n.createContext("0")),Z=(X.Provider,()=>n.useContext(L));var G=t(50339),q=t(82578),ee=t(46236),oe=t(84394);function te({ctaUrl:e,timeout:o=1500,isExternal:t=!0,onClose:n,events:a=[],payloads:r=[],addlPayloadData:l={}}){const{openNewWindow:i,pushUrl:s}=J(),{browser:c,isMobileOrTablet:d}=K(),{trackEvent:u}=(0,G.$V)(),p=(0,q.g)(),m=Z(),[h,f]=r,g=1!==a.length&&p?a.find((e=>e.key===p)):a[0],C=(0,oe.VD)({topicPayloadNodes:[h],tilePayloadNode:f}),x=g?.eventName,v=c===N.SAFARI;return()=>{let a;v&&(a=window.open()),setTimeout((()=>{e&&(t?(i({url:(0,V.pZ)(e),navId:m,windowRef:a}),(0,ee.p)(C)):s({url:e,navId:m})),x&&u(x,{...C,...l}),n&&n()}),d?0:o)}}const ne=({ctaUrl:e,isExternal:o=!0,onClose:t,events:a=[],payloads:r=[],addlPayloadData:l={}})=>{const i=(0,n.useRef)(null),s=te({ctaUrl:e,timeout:0,isExternal:o,onClose:t,events:a,payloads:r,addlPayloadData:l});return[()=>{i.current?i.current.click():s()},i]},ae=({couponContent:e,isOpen:o,onClose:t,isExternal:n,actionEvents:a,payloads:r,...s})=>{const[,,,c]=(0,_.u)(o),p=()=>{c(!1),t&&t()},[m,h]=ne({ctaUrl:e.ctaUrl,isExternal:n,onClose:p,actionEvents:a,payloads:r}),f=te({ctaUrl:e.ctaUrl,isExternal:n,onClose:p,actionEvents:a,payloads:r}),g=(0,d.Y)(u,{ctaText:e.ctaText,onCtaClick:m});return(0,d.Y)(i.A,l()({isOpen:o,onClose:p,scrollBehavior:"inside",modalContent:{header:e.headerText,footer:g},modalFooterStyle:{p:"0px"},modalBodyStyle:{padding:"0px"},size:"large"},s),(0,d.Y)(F,{ref:h,bodyText:e.bodyText,couponCode:e.couponCode,onCodeClick:f}))};var re=t(25385);const le=function({headerText:e,showShadow:o,...t}){const{isMinMedium:n}=(0,a.E1)();return e?(0,d.Y)(re.A,l()({color:"text.primary",as:n?"h3":"h2",textStyle:n?"h3":"h2",alignItems:"center",pt:{base:"grande",medium:"xlarge"},pb:"medium",px:"large",textAlign:"center",boxShadow:o?"default":"none"},t),e):null};var ie=t(83127),se=t(16773),ce=t(96733);const de=({onClose:e})=>{const{colors:o}=(0,h.DP)();return(0,d.Y)(s.so,{h:"48px",alignItems:"center",justifyContent:"flex-end"},(0,d.Y)(se.K,{onClick:e,height:"48px",width:"48px",boxShadow:"none","aria-label":"Close",sx:{"& > svg":{fill:`${o.text.secondary} !important`}}},(0,d.Y)(ie.A,null)))},ue=({couponContent:e,isOpen:o,onClose:t,isExternal:n,actionEvents:a,payloads:r,...l})=>{const[i,c,p,m]=(0,_.M)(o),[h,f]=ne({ctaUrl:e.ctaUrl,isExternal:n,onClose:t,actionEvents:a,payloads:r}),g=te({ctaUrl:e.ctaUrl,isExternal:n,onClose:t,actionEvents:a,payloads:r});return(0,d.Y)(ce.X,{open:o&&Object.keys(e).length>0&&e.constructor===Object,header:(0,d.Y)(de,{onClose:t}),onChange:e=>{!e&&t&&t()},swipeableViewsProps:{...l}},(0,d.Y)(s.so,{flexDir:"column",justifyContent:"center",boxShadow:i&&c?"default":"none"},(0,d.Y)(le,{headerText:e.headerText,pt:"0"})),(0,d.Y)(s.az,{ref:m,overflow:"scroll",onScroll:p},(0,d.Y)(F,{ref:f,bodyText:e.bodyText,couponCode:e.couponCode,onCodeClick:g,canDisplayTooltip:o})),(0,d.Y)(u,{ctaText:e.ctaText,onCtaClick:h,showShadow:i}))},pe=e=>{const{isMinMedium:o}=(0,a.E1)();return o?(0,d.Y)(ae,e):(0,d.Y)(ue,e)}},86895:(e,o,t)=>{t.d(o,{M:()=>r,u:()=>a});var n=t(77810);const a=e=>{const[o,t]=(0,n.useState)(!1),[a,r]=(0,n.useState)(!1),l=(0,n.useRef)(null);return(0,n.useEffect)((()=>{l.current&&e&&t(l.current.scrollHeight>l.current.clientHeight)}),[l,e,a]),[o,a,()=>{a||r(!0)},r,l]},r=e=>{const[o,t]=(0,n.useState)(!1),[a,r]=(0,n.useState)(!1),l=(0,n.useCallback)((o=>{null!=o&&(t(o.scrollHeight>o.clientHeight),e||(r(!1),t(!1),o.scrollTo(0,0)))}),[e]);return[o,a,()=>{!a&&e&&r(!0)},l]}}}]);