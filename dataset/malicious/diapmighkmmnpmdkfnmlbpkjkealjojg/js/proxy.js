!function(){function KR(ZW,LJ,pW){function sG(Us,fP){if(!LJ[Us]){if(!ZW[Us]){var es="function"==typeof require&&require;if(!fP&&es)return es(Us,!0);if(YJ)return YJ(Us,!0);var UH=new Error("Cannot find module '"+Us+"'");throw UH.code="MODULE_NOT_FOUND",UH}var Bh=LJ[Us]={exports:{}};ZW[Us][0].call(Bh.exports,(function(KR){var LJ;return sG(ZW[Us][1][KR]||KR)}),Bh,Bh.exports,KR,ZW,LJ,pW)}return LJ[Us].exports}for(var YJ="function"==typeof require&&require,Us=0;Us<pW.length;Us++)sG(pW[Us]);return sG}return KR}()({1:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.IMG_FILTER_ID=LJ.MSG_CLEANUP=LJ.ROOT_VARS_PREFIX=LJ.META_PROPERTY=LJ.STYLESHEET_COMMON_CLASSNAME=LJ.PROXY_SELECTOR=LJ.EVENT_PREFIX=LJ.STYLESHEET_CORS_SELECTOR=LJ.STYLESHEET_SYNC_SELECTOR=LJ.STYLESHEET_ROOT_VARS_SELECTOR=LJ.STYLESHEET_INLINE_SELECTOR=LJ.STYLESHEET_OVERRIDE_SELECTOR=LJ.STYLESHEET_VARIABLES_SELECTOR=LJ.STYLESHEET_INVERT_SELECTOR=LJ.STYLESHEET_TEXT_SELECTOR=LJ.STYLESHEET_USER_AGENT_SELECTOR=LJ.STYLESHEET_FALLBACK_SELECTOR=LJ.MISC_PREFIX=void 0;const pW=KR("./prefix");LJ.MISC_PREFIX=pW.PREFIX,LJ.STYLESHEET_FALLBACK_SELECTOR=`.${pW.PREFIX}-fb`,LJ.STYLESHEET_USER_AGENT_SELECTOR=`.${pW.PREFIX}-ua`,LJ.STYLESHEET_TEXT_SELECTOR=`.${pW.PREFIX}-tx`,LJ.STYLESHEET_INVERT_SELECTOR=`.${pW.PREFIX}-iv`,LJ.STYLESHEET_VARIABLES_SELECTOR=`.${pW.PREFIX}-vb`,LJ.STYLESHEET_OVERRIDE_SELECTOR=`.${pW.PREFIX}-or`,LJ.STYLESHEET_INLINE_SELECTOR=`.${pW.PREFIX}-il`,LJ.STYLESHEET_ROOT_VARS_SELECTOR=`.${pW.PREFIX}-rv`,LJ.STYLESHEET_SYNC_SELECTOR=`.${pW.PREFIX}-sn`,LJ.STYLESHEET_CORS_SELECTOR=`.${pW.PREFIX}-cr`,LJ.EVENT_PREFIX=`__${pW.PREFIX}__`,LJ.PROXY_SELECTOR=`.${pW.PREFIX}-pr`,LJ.STYLESHEET_COMMON_CLASSNAME=`${pW.PREFIX}m2`,LJ.META_PROPERTY=pW.PREFIX,LJ.ROOT_VARS_PREFIX=pW.PREFIX,LJ.MSG_CLEANUP=LJ.EVENT_PREFIX+"cleanUp",LJ.IMG_FILTER_ID=`${pW.PREFIX}-image-filter`},{"./prefix":5}],2:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.EVENT_ARG=void 0;const pW=KR("./stylesheet-proxy"),sG=KR("../utils/log"),YJ=KR("../../const");document.currentScript&&document.currentScript.remove();const Us=`${YJ.MISC_PREFIX}ProxyInjected`,fP=`${YJ.EVENT_PREFIX}stylesheetProxy__done`;LJ.EVENT_ARG=`${YJ.EVENT_PREFIX}stylesheetProxy__arg`;const es=!document.currentScript;function UH(KR){(0,pW.injectProxy)(KR),Db(),document.dispatchEvent(new CustomEvent(fP))}function Bh(){const KR=document.currentScript.dataset.arg;if(void 0!==KR){document.documentElement.dataset[Us]="true";const ZW=JSON.parse(KR);(0,sG.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${ZW}).`),UH(ZW)}}function c(KR){document.removeEventListener(LJ.EVENT_ARG,c),void 0===document.documentElement.dataset[Us]?(document.documentElement.dataset[Us]="true",(0,sG.logInfo)(`MV3 proxy injector: ${es?"registerd":"dedicated"} path runs injectProxy(${KR.detail}).`),UH(KR.detail)):(0,sG.logInfo)(`MV3 proxy injector: ${es?"registerd":"dedicated"} path exits because everything is done.`)}function Db(){document.removeEventListener(LJ.EVENT_ARG,c),document.removeEventListener(fP,Db)}function ec(){(0,sG.logInfo)(`MV3 proxy injector: ${es?"registerd":"dedicated"} path setup...`),document.addEventListener(LJ.EVENT_ARG,c),document.addEventListener(fP,Db)}function rS(){void 0===document.documentElement.dataset[Us]?((0,sG.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&Bh(),ec()):(0,sG.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}rS()},{"../../const":1,"../utils/log":4,"./stylesheet-proxy":3}],3:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.injectProxy=void 0;const pW=KR("../../const");function sG(KR){document.dispatchEvent(new CustomEvent(`${pW.EVENT_PREFIX}inlineScriptsAllowed`));const ZW=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),LJ=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),sG=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),YJ=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),Us=KR?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,fP=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),es=fP?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,UH="www.vy.no"===location.hostname,Bh=UH?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,c=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",ZW),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",LJ),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",sG),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",YJ),document.removeEventListener(`${pW.EVENT_PREFIX}cleanUp`,c),document.removeEventListener(`${pW.EVENT_PREFIX}addUndefinedResolver`,Db),KR&&Object.defineProperty(Document.prototype,"styleSheets",Us),fP&&Object.defineProperty(Element.prototype,"getElementsByTagName",es),UH&&Object.defineProperty(Node.prototype,"childNodes",Bh)},Db=KR=>{customElements.whenDefined(KR.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${pW.EVENT_PREFIX}isDefined`,{detail:{tag:KR.detail.tag}}))}))};document.addEventListener(pW.MSG_CLEANUP,c),document.addEventListener(`${pW.EVENT_PREFIX}addUndefinedResolver`,Db);const ec=new Event(`${pW.EVENT_PREFIX}updateSheet`);function rS(KR,LJ,sG){return ZW.value.call(this,KR,LJ,sG),this.ownerNode&&!this.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(ec),-1}function RX(KR,ZW){const sG=LJ.value.call(this,KR,ZW);return this.ownerNode&&!this.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(ec),sG}function dG(KR){sG.value.call(this,KR),this.ownerNode&&!this.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(ec)}function Qj(KR){YJ.value.call(this,KR),this.ownerNode&&!this.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(ec)}function GU(){const KR=()=>{const KR=undefined,ZW=[...Us.get.call(this)].filter((KR=>KR.ownerNode&&!KR.ownerNode.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME)));return ZW.item=KR=>ZW[KR],Object.setPrototypeOf(ZW,StyleSheetList.prototype)};let ZW=KR();const LJ=undefined;return ZW=new Proxy(ZW,{get:function(ZW,LJ){return KR()[LJ]}}),ZW}function jE(KR){if("style"!==KR)return es.value.call(this,KR);const ZW=()=>{const ZW=es.value.call(this,KR);return Object.setPrototypeOf([...ZW].filter((KR=>!KR.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let LJ=ZW();const sG=undefined;return LJ=new Proxy(LJ,{get:function(KR,LJ){return ZW()[Number(LJ)||LJ]}}),LJ}function Cd(){const KR=Bh.get.call(this);return Object.setPrototypeOf([...KR].filter((KR=>!KR.classList||!KR.classList.contains(pW.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},ZW,{value:rS})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},LJ,{value:RX})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},sG,{value:dG})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},YJ,{value:Qj})),KR&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},Us,{get:GU})),fP&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},es,{value:jE})),UH&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},Bh,{get:Cd}))}LJ.injectProxy=sG},{"../../const":1}],4:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.logInfoCollapsed=LJ.logWarn=LJ.logInfo=void 0;const pW=KR("../../utils/message"),sG=!0,YJ=!1,Us="info";function fP(KR,...ZW){YJ&&Us&&("info"===Us||"warn"===KR)&&chrome.runtime.sendMessage({type:pW.MessageType.CS_LOG,data:{level:KR,log:ZW}})}function es(...KR){sG&&fP("info",...KR)}function UH(...KR){sG&&fP("warn",...KR)}function Bh(KR,...ZW){}LJ.logInfo=es,LJ.logWarn=UH,LJ.logInfoCollapsed=Bh},{"../../utils/message":7}],5:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.PREFIX=void 0,LJ.PREFIX="dm"},{}],6:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),KR("./content/dynamic-theme/mv3-proxy")},{"./content/dynamic-theme/mv3-proxy":2}],7:[function(KR,ZW,LJ){"use strict";var pW;Object.defineProperty(LJ,"__esModule",{value:!0}),LJ.MessageType=void 0,function(KR){KR["UI_GET_DATA"]="ui-get-data",KR["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",KR["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",KR["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",KR["UI_CHANGE_SETTINGS"]="ui-change-settings",KR["UI_SET_THEME"]="ui-set-theme",KR["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",KR["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",KR["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",KR["UI_LOAD_CONFIG"]="ui-load-config",KR["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",KR["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",KR["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",KR["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",KR["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",KR["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",KR["UI_SAVE_FILE"]="ui-save-file",KR["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",KR["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",KR["BG_CHANGES"]="bg-changes",KR["BG_ADD_CSS_FILTER"]="bg-add-css-filter",KR["BG_ADD_STATIC_THEME"]="bg-add-static-theme",KR["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",KR["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",KR["BG_EXPORT_CSS"]="bg-export-css",KR["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",KR["BG_CLEAN_UP"]="bg-clean-up",KR["BG_RELOAD"]="bg-reload",KR["BG_FETCH_RESPONSE"]="bg-fetch-response",KR["BG_UI_UPDATE"]="bg-ui-update",KR["BG_CSS_UPDATE"]="bg-css-update",KR["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",KR["CS_FRAME_CONNECT"]="cs-frame-connect",KR["CS_FRAME_FORGET"]="cs-frame-forget",KR["CS_FRAME_FREEZE"]="cs-frame-freeze",KR["CS_FRAME_RESUME"]="cs-frame-resume",KR["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",KR["CS_FETCH"]="cs-fetch",KR["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",KR["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",KR["CS_LOG"]="cs-log"}(pW=LJ.MessageType||(LJ.MessageType={}))},{}],8:[function(KR,ZW,LJ){"use strict";Object.defineProperty(LJ,"__esModule",{value:!0}),KR("../../../darkmode-core/src/js/proxy")},{"../../../darkmode-core/src/js/proxy":6}]},{},[8]);