
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ea89647f-24f3-5109-b7b1-e2da3312c68c")}catch(e){}}();
var $tj=Object.create;var FO=Object.defineProperty;var ncA=Object.getOwnPropertyDescriptor;var wtj=Object.getOwnPropertyNames;var Itj=Object.getPrototypeOf,Ptj=Object.prototype.hasOwnProperty;var Y0=(A=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(A,{get:(j,e)=>(typeof require<"u"?require:j)[e]}):A)(function(A){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+A+'" is not supported')});var RA=(A,j)=>()=>(j||A((j={exports:{}}).exports,j),j.exports),er=(A,j)=>{for(var e in j)FO(A,e,{get:j[e],enumerable:!0})},Otj=(A,j,e,t)=>{if(j&&typeof j=="object"||typeof j=="function")for(let r of wtj(j))!Ptj.call(A,r)&&r!==e&&FO(A,r,{get:()=>j[r],enumerable:!(t=ncA(j,r))||t.enumerable});return A};var J=(A,j,e)=>(e=A!=null?$tj(Itj(A)):{},Otj(j||!A||!A.__esModule?FO(e,"default",{value:A,enumerable:!0}):e,A));var m6=(A,j,e,t)=>{for(var r=t>1?void 0:t?ncA(j,e):j,a=A.length-1,n;a>=0;a--)(n=A[a])&&(r=(t?n(j,e,r):n(r))||r);return t&&r&&FO(j,e,r),r},eG=(A,j)=>(e,t)=>j(e,t,A);var y2=RA((b2,icA)=>{(function(A,j){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],j);else if(typeof b2<"u")j(icA);else{var e={exports:{}};j(e),A.browser=e.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:b2,function(A){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let j="The message port closed before a response was received.",e=t=>{let r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(r).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(D,y=void 0){super(y),this.createItem=D}get(D){return this.has(D)||this.set(D,this.createItem(D)),super.get(D)}}let n=P=>P&&typeof P=="object"&&typeof P.then=="function",o=(P,D)=>(...y)=>{t.runtime.lastError?P.reject(new Error(t.runtime.lastError.message)):D.singleCallbackArg||y.length<=1&&D.singleCallbackArg!==!1?P.resolve(y[0]):P.resolve(y)},i=P=>P==1?"argument":"arguments",s=(P,D)=>function(h,...O){if(O.length<D.minArgs)throw new Error(`Expected at least ${D.minArgs} ${i(D.minArgs)} for ${P}(), got ${O.length}`);if(O.length>D.maxArgs)throw new Error(`Expected at most ${D.maxArgs} ${i(D.maxArgs)} for ${P}(), got ${O.length}`);return new Promise((Q,AA)=>{if(D.fallbackToNoCallback)try{h[P](...O,o({resolve:Q,reject:AA},D))}catch(nA){console.warn(`${P} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,nA),h[P](...O),D.fallbackToNoCallback=!1,D.noCallback=!0,Q()}else D.noCallback?(h[P](...O),Q()):h[P](...O,o({resolve:Q,reject:AA},D))})},l=(P,D,y)=>new Proxy(D,{apply(h,O,Q){return y.call(O,P,...Q)}}),c=Function.call.bind(Object.prototype.hasOwnProperty),k=(P,D={},y={})=>{let h=Object.create(null),O={has(AA,nA){return nA in P||nA in h},get(AA,nA,bA){if(nA in h)return h[nA];if(!(nA in P))return;let XA=P[nA];if(typeof XA=="function")if(typeof D[nA]=="function")XA=l(P,P[nA],D[nA]);else if(c(y,nA)){let dj=s(nA,y[nA]);XA=l(P,P[nA],dj)}else XA=XA.bind(P);else if(typeof XA=="object"&&XA!==null&&(c(D,nA)||c(y,nA)))XA=k(XA,D[nA],y[nA]);else if(c(y,"*"))XA=k(XA,D[nA],y["*"]);else return Object.defineProperty(h,nA,{configurable:!0,enumerable:!0,get(){return P[nA]},set(dj){P[nA]=dj}}),XA;return h[nA]=XA,XA},set(AA,nA,bA,XA){return nA in h?h[nA]=bA:P[nA]=bA,!0},defineProperty(AA,nA,bA){return Reflect.defineProperty(h,nA,bA)},deleteProperty(AA,nA){return Reflect.deleteProperty(h,nA)}},Q=Object.create(P);return new Proxy(Q,O)},u=P=>({addListener(D,y,...h){D.addListener(P.get(y),...h)},hasListener(D,y){return D.hasListener(P.get(y))},removeListener(D,y){D.removeListener(P.get(y))}}),m=new a(P=>typeof P!="function"?P:function(y){let h=k(y,{},{getContent:{minArgs:0,maxArgs:0}});P(h)}),F=new a(P=>typeof P!="function"?P:function(y,h,O){let Q=!1,AA,nA=new Promise(yA=>{AA=function(tj){Q=!0,yA(tj)}}),bA;try{bA=P(y,h,AA)}catch(yA){bA=Promise.reject(yA)}let XA=bA!==!0&&n(bA);if(bA!==!0&&!XA&&!Q)return!1;let dj=yA=>{yA.then(tj=>{O(tj)},tj=>{let LA;tj&&(tj instanceof Error||typeof tj.message=="string")?LA=tj.message:LA="An unexpected error occurred",O({__mozWebExtensionPolyfillReject__:!0,message:LA})}).catch(tj=>{console.error("Failed to send onMessage rejected reply",tj)})};return dj(XA?bA:nA),!0}),S=({reject:P,resolve:D},y)=>{t.runtime.lastError?t.runtime.lastError.message===j?D():P(new Error(t.runtime.lastError.message)):y&&y.__mozWebExtensionPolyfillReject__?P(new Error(y.message)):D(y)},G=(P,D,y,...h)=>{if(h.length<D.minArgs)throw new Error(`Expected at least ${D.minArgs} ${i(D.minArgs)} for ${P}(), got ${h.length}`);if(h.length>D.maxArgs)throw new Error(`Expected at most ${D.maxArgs} ${i(D.maxArgs)} for ${P}(), got ${h.length}`);return new Promise((O,Q)=>{let AA=S.bind(null,{resolve:O,reject:Q});h.push(AA),y.sendMessage(...h)})},x={devtools:{network:{onRequestFinished:u(m)}},runtime:{onMessage:u(F),onMessageExternal:u(F),sendMessage:G.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:G.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},R={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":R},services:{"*":R},websites:{"*":R}},k(t,x,r)};A.exports=e(chrome)}else A.exports=globalThis.browser})});var h7=RA(Ke=>{"use strict";var Ttj=Ke&&Ke.__spreadArray||function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.dual=Ke.getEndomorphismMonoid=Ke.not=Ke.SK=Ke.hole=Ke.pipe=Ke.untupled=Ke.tupled=Ke.absurd=Ke.decrement=Ke.increment=Ke.tuple=Ke.flow=Ke.flip=Ke.constVoid=Ke.constUndefined=Ke.constNull=Ke.constFalse=Ke.constTrue=Ke.constant=Ke.unsafeCoerce=Ke.identity=Ke.apply=Ke.getRing=Ke.getSemiring=Ke.getMonoid=Ke.getSemigroup=Ke.getBooleanAlgebra=void 0;var Ctj=function(A){return function(){return{meet:function(j,e){return function(t){return A.meet(j(t),e(t))}},join:function(j,e){return function(t){return A.join(j(t),e(t))}},zero:function(){return A.zero},one:function(){return A.one},implies:function(j,e){return function(t){return A.implies(j(t),e(t))}},not:function(j){return function(e){return A.not(j(e))}}}}};Ke.getBooleanAlgebra=Ctj;var _tj=function(A){return function(){return{concat:function(j,e){return function(t){return A.concat(j(t),e(t))}}}}};Ke.getSemigroup=_tj;var Stj=function(A){var j=(0,Ke.getSemigroup)(A);return function(){return{concat:j().concat,empty:function(){return A.empty}}}};Ke.getMonoid=Stj;var Htj=function(A){return{add:function(j,e){return function(t){return A.add(j(t),e(t))}},zero:function(){return A.zero},mul:function(j,e){return function(t){return A.mul(j(t),e(t))}},one:function(){return A.one}}};Ke.getSemiring=Htj;var Mtj=function(A){var j=(0,Ke.getSemiring)(A);return{add:j.add,mul:j.mul,one:j.one,zero:j.zero,sub:function(e,t){return function(r){return A.sub(e(r),t(r))}}}};Ke.getRing=Mtj;var Ktj=function(A){return function(j){return j(A)}};Ke.apply=Ktj;function w2(A){return A}Ke.identity=w2;Ke.unsafeCoerce=w2;function Z0(A){return function(){return A}}Ke.constant=Z0;Ke.constTrue=Z0(!0);Ke.constFalse=Z0(!1);Ke.constNull=Z0(null);Ke.constUndefined=Z0(void 0);Ke.constVoid=Ke.constUndefined;function Ntj(A){return function(){for(var j=[],e=0;e<arguments.length;e++)j[e]=arguments[e];return j.length>1?A(j[1],j[0]):function(t){return A(t)(j[0])}}}Ke.flip=Ntj;function scA(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return function(){return j(A.apply(this,arguments))};case 3:return function(){return e(j(A.apply(this,arguments)))};case 4:return function(){return t(e(j(A.apply(this,arguments))))};case 5:return function(){return r(t(e(j(A.apply(this,arguments)))))};case 6:return function(){return a(r(t(e(j(A.apply(this,arguments))))))};case 7:return function(){return n(a(r(t(e(j(A.apply(this,arguments)))))))};case 8:return function(){return o(n(a(r(t(e(j(A.apply(this,arguments))))))))};case 9:return function(){return i(o(n(a(r(t(e(j(A.apply(this,arguments)))))))))}}}Ke.flow=scA;function Ltj(){for(var A=[],j=0;j<arguments.length;j++)A[j]=arguments[j];return A}Ke.tuple=Ltj;function ztj(A){return A+1}Ke.increment=ztj;function Utj(A){return A-1}Ke.decrement=Utj;function lcA(A){throw new Error("Called `absurd` function which should be uncallable")}Ke.absurd=lcA;function Vtj(A){return function(j){return A.apply(void 0,j)}}Ke.tupled=Vtj;function Xtj(A){return function(){for(var j=[],e=0;e<arguments.length;e++)j[e]=arguments[e];return A(j)}}Ke.untupled=Xtj;function Jtj(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return j(A);case 3:return e(j(A));case 4:return t(e(j(A)));case 5:return r(t(e(j(A))));case 6:return a(r(t(e(j(A)))));case 7:return n(a(r(t(e(j(A))))));case 8:return o(n(a(r(t(e(j(A)))))));case 9:return i(o(n(a(r(t(e(j(A))))))));default:{for(var s=arguments[0],l=1;l<arguments.length;l++)s=arguments[l](s);return s}}}Ke.pipe=Jtj;Ke.hole=lcA;var Wtj=function(A,j){return j};Ke.SK=Wtj;function Qtj(A){return function(j){return!A(j)}}Ke.not=Qtj;var Ytj=function(){return{concat:function(A,j){return scA(A,j)},empty:w2}};Ke.getEndomorphismMonoid=Ytj;var Ztj=function(A,j){var e=typeof A=="number"?function(t){return t.length>=A}:A;return function(){var t=Array.from(arguments);return e(arguments)?j.apply(this,t):function(r){return j.apply(void 0,Ttj([r],t,!1))}}};Ke.dual=Ztj});var Ay=RA(jt=>{"use strict";var Arj=jt&&jt.__spreadArray||function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};Object.defineProperty(jt,"__esModule",{value:!0});jt.flatMapReader=jt.flatMapTask=jt.flatMapIO=jt.flatMapEither=jt.flatMapOption=jt.flatMapNullable=jt.liftOption=jt.liftNullable=jt.fromReadonlyNonEmptyArray=jt.has=jt.emptyRecord=jt.emptyReadonlyArray=jt.tail=jt.head=jt.isNonEmpty=jt.singleton=jt.right=jt.left=jt.isRight=jt.isLeft=jt.some=jt.none=jt.isSome=jt.isNone=void 0;var tG=h7(),jrj=function(A){return A._tag==="None"};jt.isNone=jrj;var erj=function(A){return A._tag==="Some"};jt.isSome=erj;jt.none={_tag:"None"};var trj=function(A){return{_tag:"Some",value:A}};jt.some=trj;var rrj=function(A){return A._tag==="Left"};jt.isLeft=rrj;var arj=function(A){return A._tag==="Right"};jt.isRight=arj;var nrj=function(A){return{_tag:"Left",left:A}};jt.left=nrj;var orj=function(A){return{_tag:"Right",right:A}};jt.right=orj;var irj=function(A){return[A]};jt.singleton=irj;var srj=function(A){return A.length>0};jt.isNonEmpty=srj;var lrj=function(A){return A[0]};jt.head=lrj;var crj=function(A){return A.slice(1)};jt.tail=crj;jt.emptyReadonlyArray=[];jt.emptyRecord={};jt.has=Object.prototype.hasOwnProperty;var drj=function(A){return Arj([A[0]],A.slice(1),!0)};jt.fromReadonlyNonEmptyArray=drj;var krj=function(A){return function(j,e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=j.apply(void 0,t);return A.fromEither(a==null?(0,jt.left)(e.apply(void 0,t)):(0,jt.right)(a))}}};jt.liftNullable=krj;var urj=function(A){return function(j,e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=j.apply(void 0,t);return A.fromEither((0,jt.isNone)(a)?(0,jt.left)(e.apply(void 0,t)):(0,jt.right)(a.value))}}};jt.liftOption=urj;var Erj=function(A,j){return(0,tG.dual)(3,function(e,t,r){return j.flatMap(e,(0,jt.liftNullable)(A)(t,r))})};jt.flatMapNullable=Erj;var prj=function(A,j){return(0,tG.dual)(3,function(e,t,r){return j.flatMap(e,(0,jt.liftOption)(A)(t,r))})};jt.flatMapOption=prj;var mrj=function(A,j){return(0,tG.dual)(2,function(e,t){return j.flatMap(e,function(r){return A.fromEither(t(r))})})};jt.flatMapEither=mrj;var Brj=function(A,j){return(0,tG.dual)(2,function(e,t){return j.flatMap(e,function(r){return A.fromIO(t(r))})})};jt.flatMapIO=Brj;var grj=function(A,j){return(0,tG.dual)(2,function(e,t){return j.flatMap(e,function(r){return A.fromTask(t(r))})})};jt.flatMapTask=grj;var hrj=function(A,j){return(0,tG.dual)(2,function(e,t){return j.flatMap(e,function(r){return A.fromReader(t(r))})})};jt.flatMapReader=hrj});var O2=RA(fn=>{"use strict";var qrj=fn&&fn.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),xrj=fn&&fn.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),vrj=fn&&fn.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&qrj(j,A,e);return xrj(j,A),j};Object.defineProperty(fn,"__esModule",{value:!0});fn.sequenceS=fn.sequenceT=fn.getApplySemigroup=fn.apS=fn.apSecond=fn.apFirst=fn.ap=void 0;var Grj=h7(),frj=vrj(Ay());function Frj(A,j){return function(e){return function(t){return A.ap(A.map(t,function(r){return function(a){return j.ap(r,a)}}),e)}}}fn.ap=Frj;function brj(A){return function(j){return function(e){return A.ap(A.map(e,function(t){return function(){return t}}),j)}}}fn.apFirst=brj;function yrj(A){return function(j){return function(e){return A.ap(A.map(e,function(){return function(t){return t}}),j)}}}fn.apSecond=yrj;function $rj(A){return function(j,e){return function(t){return A.ap(A.map(t,function(r){return function(a){var n;return Object.assign({},r,(n={},n[j]=a,n))}}),e)}}}fn.apS=$rj;function wrj(A){return function(j){return{concat:function(e,t){return A.ap(A.map(e,function(r){return function(a){return j.concat(r,a)}}),t)}}}}fn.getApplySemigroup=wrj;function P2(A,j,e){return function(t){for(var r=Array(e.length+1),a=0;a<e.length;a++)r[a]=e[a];return r[e.length]=t,j===0?A.apply(null,r):P2(A,j-1,r)}}var I2={1:function(A){return[A]},2:function(A){return function(j){return[A,j]}},3:function(A){return function(j){return function(e){return[A,j,e]}}},4:function(A){return function(j){return function(e){return function(t){return[A,j,e,t]}}}},5:function(A){return function(j){return function(e){return function(t){return function(r){return[A,j,e,t,r]}}}}}};function Irj(A){return frj.has.call(I2,A)||(I2[A]=P2(Grj.tuple,A-1,[])),I2[A]}function Prj(A){return function(){for(var j=[],e=0;e<arguments.length;e++)j[e]=arguments[e];for(var t=j.length,r=Irj(t),a=A.map(j[0],r),n=1;n<t;n++)a=A.ap(a,j[n]);return a}}fn.sequenceT=Prj;function Orj(A){var j=A.length;switch(j){case 1:return function(e){var t;return t={},t[A[0]]=e,t};case 2:return function(e){return function(t){var r;return r={},r[A[0]]=e,r[A[1]]=t,r}};case 3:return function(e){return function(t){return function(r){var a;return a={},a[A[0]]=e,a[A[1]]=t,a[A[2]]=r,a}}};case 4:return function(e){return function(t){return function(r){return function(a){var n;return n={},n[A[0]]=e,n[A[1]]=t,n[A[2]]=r,n[A[3]]=a,n}}}};case 5:return function(e){return function(t){return function(r){return function(a){return function(n){var o;return o={},o[A[0]]=e,o[A[1]]=t,o[A[2]]=r,o[A[3]]=a,o[A[4]]=n,o}}}}};default:return P2(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r={},a=0;a<j;a++)r[A[a]]=e[a];return r},j-1,[])}}function Rrj(A){return function(j){for(var e=Object.keys(j),t=e.length,r=Orj(e),a=A.map(j[e[0]],r),n=1;n<t;n++)a=A.ap(a,j[e[n]]);return a}}fn.sequenceS=Rrj});var bO=RA(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.asUnit=Wi.as=Wi.getFunctorComposition=Wi.let=Wi.bindTo=Wi.flap=Wi.map=void 0;var Drj=h7();function ccA(A,j){return function(e){return function(t){return A.map(t,function(r){return j.map(r,e)})}}}Wi.map=ccA;function Trj(A){return function(j){return function(e){return A.map(e,function(t){return t(j)})}}}Wi.flap=Trj;function Crj(A){return function(j){return function(e){return A.map(e,function(t){var r;return r={},r[j]=t,r})}}}Wi.bindTo=Crj;function _rj(A){return function(j,e){return function(t){return A.map(t,function(r){var a;return Object.assign({},r,(a={},a[j]=e(r),a))})}}}Wi.let=_rj;function Srj(A,j){var e=ccA(A,j);return{map:function(t,r){return(0,Drj.pipe)(t,e(r))}}}Wi.getFunctorComposition=Srj;function dcA(A){return function(j,e){return A.map(j,function(){return e})}}Wi.as=dcA;function Hrj(A){var j=dcA(A);return function(e){return j(e,void 0)}}Wi.asUnit=Hrj});var ucA=RA(rG=>{"use strict";Object.defineProperty(rG,"__esModule",{value:!0});rG.getApplicativeComposition=rG.getApplicativeMonoid=void 0;var kcA=O2(),Mrj=h7(),Krj=bO();function Nrj(A){var j=(0,kcA.getApplySemigroup)(A);return function(e){return{concat:j(e).concat,empty:A.of(e.empty)}}}rG.getApplicativeMonoid=Nrj;function Lrj(A,j){var e=(0,Krj.getFunctorComposition)(A,j).map,t=(0,kcA.ap)(A,j);return{map:e,of:function(r){return A.of(j.of(r))},ap:function(r,a){return(0,Mrj.pipe)(r,t(a))}}}rG.getApplicativeComposition=Lrj});var R2=RA(sB=>{"use strict";Object.defineProperty(sB,"__esModule",{value:!0});sB.bind=sB.tap=sB.chainFirst=void 0;function zrj(A){var j=EcA(A);return function(e){return function(t){return j(t,e)}}}sB.chainFirst=zrj;function EcA(A){return function(j,e){return A.chain(j,function(t){return A.map(e(t),function(){return t})})}}sB.tap=EcA;function Urj(A){return function(j,e){return function(t){return A.chain(t,function(r){return A.map(e(r),function(a){var n;return Object.assign({},r,(n={},n[j]=a,n))})})}}}sB.bind=Urj});var pcA=RA(yO=>{"use strict";Object.defineProperty(yO,"__esModule",{value:!0});yO.tailRec=void 0;var Vrj=function(A,j){for(var e=j(A);e._tag==="Left";)e=j(e.left);return e.right};yO.tailRec=Vrj});var qcA=RA(B6=>{"use strict";var Xrj=B6&&B6.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),Jrj=B6&&B6.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),Wrj=B6&&B6.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&Xrj(j,A,e);return Jrj(j,A),j};Object.defineProperty(B6,"__esModule",{value:!0});B6.tapEither=B6.filterOrElse=B6.chainFirstEitherK=B6.chainEitherK=B6.fromEitherK=B6.chainOptionK=B6.fromOptionK=B6.fromPredicate=B6.fromOption=void 0;var Qrj=R2(),mcA=h7(),wh=Wrj(Ay());function BcA(A){return function(j){return function(e){return A.fromEither(wh.isNone(e)?wh.left(j()):wh.right(e.value))}}}B6.fromOption=BcA;function Yrj(A){return function(j,e){return function(t){return A.fromEither(j(t)?wh.right(t):wh.left(e(t)))}}}B6.fromPredicate=Yrj;function gcA(A){var j=BcA(A);return function(e){var t=j(e);return function(r){return(0,mcA.flow)(r,t)}}}B6.fromOptionK=gcA;function Zrj(A,j){var e=gcA(A);return function(t){var r=e(t);return function(a){return function(n){return j.chain(n,r(a))}}}}B6.chainOptionK=Zrj;function D2(A){return function(j){return(0,mcA.flow)(j,A.fromEither)}}B6.fromEitherK=D2;function Aaj(A,j){var e=D2(A);return function(t){return function(r){return j.chain(r,e(t))}}}B6.chainEitherK=Aaj;function jaj(A,j){var e=hcA(A,j);return function(t){return function(r){return e(r,t)}}}B6.chainFirstEitherK=jaj;function eaj(A,j){return function(e,t){return function(r){return j.chain(r,function(a){return A.fromEither(e(a)?wh.right(a):wh.left(t(a)))})}}}B6.filterOrElse=eaj;function hcA(A,j){var e=D2(A),t=(0,Qrj.tap)(j);return function(r,a){return t(r,e(a))}}B6.tapEither=hcA});var xcA=RA(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.right=Sr.left=Sr.flap=Sr.Functor=Sr.Bifunctor=Sr.URI=Sr.bimap=Sr.mapLeft=Sr.map=Sr.separated=void 0;var T2=h7(),taj=bO(),raj=function(A,j){return{left:A,right:j}};Sr.separated=raj;var aaj=function(A,j){return(0,T2.pipe)(A,(0,Sr.map)(j))},naj=function(A,j){return(0,T2.pipe)(A,(0,Sr.mapLeft)(j))},oaj=function(A,j,e){return(0,T2.pipe)(A,(0,Sr.bimap)(j,e))},iaj=function(A){return function(j){return(0,Sr.separated)((0,Sr.left)(j),A((0,Sr.right)(j)))}};Sr.map=iaj;var saj=function(A){return function(j){return(0,Sr.separated)(A((0,Sr.left)(j)),(0,Sr.right)(j))}};Sr.mapLeft=saj;var laj=function(A,j){return function(e){return(0,Sr.separated)(A((0,Sr.left)(e)),j((0,Sr.right)(e)))}};Sr.bimap=laj;Sr.URI="Separated";Sr.Bifunctor={URI:Sr.URI,mapLeft:naj,bimap:oaj};Sr.Functor={URI:Sr.URI,map:aaj};Sr.flap=(0,taj.flap)(Sr.Functor);var caj=function(A){return A.left};Sr.left=caj;var daj=function(A){return A.right};Sr.right=daj});var GcA=RA(al=>{"use strict";var kaj=al&&al.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),uaj=al&&al.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),Eaj=al&&al.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&kaj(j,A,e);return uaj(j,A),j};Object.defineProperty(al,"__esModule",{value:!0});al.filterE=al.witherDefault=al.wiltDefault=void 0;var vcA=Eaj(Ay());function paj(A,j){return function(e){var t=A.traverse(e);return function(r,a){return e.map(t(r,a),j.separate)}}}al.wiltDefault=paj;function maj(A,j){return function(e){var t=A.traverse(e);return function(r,a){return e.map(t(r,a),j.compact)}}}al.witherDefault=maj;function Baj(A){return function(j){var e=A.wither(j);return function(t){return function(r){return e(r,function(a){return j.map(t(a),function(n){return n?vcA.some(a):vcA.none})})}}}}al.filterE=Baj});var Xn=RA($=>{"use strict";var gaj=$&&$.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),haj=$&&$.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),FcA=$&&$.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&gaj(j,A,e);return haj(j,A),j};Object.defineProperty($,"__esModule",{value:!0});$.match=$.foldW=$.matchW=$.isRight=$.isLeft=$.fromOption=$.fromPredicate=$.FromEither=$.MonadThrow=$.throwError=$.ChainRec=$.Extend=$.extend=$.Alt=$.alt=$.altW=$.Bifunctor=$.mapLeft=$.bimap=$.Traversable=$.sequence=$.traverse=$.Foldable=$.reduceRight=$.foldMap=$.reduce=$.Monad=$.Chain=$.Applicative=$.Apply=$.ap=$.apW=$.Pointed=$.of=$.asUnit=$.as=$.Functor=$.map=$.getAltValidation=$.getApplicativeValidation=$.getWitherable=$.getFilterable=$.getCompactable=$.getSemigroup=$.getEq=$.getShow=$.URI=$.flatMap=$.right=$.left=void 0;$.chainFirstW=$.chainFirst=$.chain=$.chainW=$.sequenceArray=$.traverseArray=$.traverseArrayWithIndex=$.traverseReadonlyArrayWithIndex=$.traverseReadonlyNonEmptyArrayWithIndex=$.ApT=$.apSW=$.apS=$.bindW=$.bind=$.let=$.bindTo=$.Do=$.exists=$.elem=$.toError=$.toUnion=$.chainNullableK=$.fromNullableK=$.tryCatchK=$.tryCatch=$.fromNullable=$.orElse=$.orElseW=$.swap=$.filterOrElseW=$.filterOrElse=$.flatMapOption=$.flatMapNullable=$.liftOption=$.liftNullable=$.chainOptionKW=$.chainOptionK=$.fromOptionK=$.duplicate=$.flatten=$.flattenW=$.tap=$.apSecondW=$.apSecond=$.apFirstW=$.apFirst=$.flap=$.getOrElse=$.getOrElseW=$.fold=void 0;$.getValidation=$.getValidationMonoid=$.getValidationSemigroup=$.getApplyMonoid=$.getApplySemigroup=$.either=$.stringifyJSON=$.parseJSON=void 0;var bcA=ucA(),jy=O2(),ycA=FcA(R2()),qaj=pcA(),ey=qcA(),lo=h7(),ty=bO(),Nc=FcA(Ay()),QE=xcA(),fcA=GcA();$.left=Nc.left;$.right=Nc.right;$.flatMap=(0,lo.dual)(2,function(A,j){return(0,$.isLeft)(A)?A:j(A.right)});var Qi=function(A,j){return(0,lo.pipe)(A,(0,$.map)(j))},Ih=function(A,j){return(0,lo.pipe)(A,(0,$.ap)(j))},ry=function(A,j,e){return(0,lo.pipe)(A,(0,$.reduce)(j,e))},ay=function(A){return function(j,e){var t=(0,$.foldMap)(A);return(0,lo.pipe)(j,t(e))}},ny=function(A,j,e){return(0,lo.pipe)(A,(0,$.reduceRight)(j,e))},$O=function(A){var j=(0,$.traverse)(A);return function(e,t){return(0,lo.pipe)(e,j(t))}},C2=function(A,j,e){return(0,lo.pipe)(A,(0,$.bimap)(j,e))},_2=function(A,j){return(0,lo.pipe)(A,(0,$.mapLeft)(j))},$cA=function(A,j){return(0,lo.pipe)(A,(0,$.alt)(j))},S2=function(A,j){return(0,lo.pipe)(A,(0,$.extend)(j))},H2=function(A,j){return(0,qaj.tailRec)(j(A),function(e){return(0,$.isLeft)(e)?(0,$.right)((0,$.left)(e.left)):(0,$.isLeft)(e.right)?(0,$.left)(j(e.right.left)):(0,$.right)((0,$.right)(e.right.right))})};$.URI="Either";var xaj=function(A,j){return{show:function(e){return(0,$.isLeft)(e)?"left(".concat(A.show(e.left),")"):"right(".concat(j.show(e.right),")")}}};$.getShow=xaj;var vaj=function(A,j){return{equals:function(e,t){return e===t||((0,$.isLeft)(e)?(0,$.isLeft)(t)&&A.equals(e.left,t.left):(0,$.isRight)(t)&&j.equals(e.right,t.right))}}};$.getEq=vaj;var Gaj=function(A){return{concat:function(j,e){return(0,$.isLeft)(e)?j:(0,$.isLeft)(j)?e:(0,$.right)(A.concat(j.right,e.right))}}};$.getSemigroup=Gaj;var faj=function(A){var j=(0,$.left)(A.empty);return{URI:$.URI,_E:void 0,compact:function(e){return(0,$.isLeft)(e)?e:e.right._tag==="None"?j:(0,$.right)(e.right.value)},separate:function(e){return(0,$.isLeft)(e)?(0,QE.separated)(e,e):(0,$.isLeft)(e.right)?(0,QE.separated)((0,$.right)(e.right.left),j):(0,QE.separated)(j,(0,$.right)(e.right.right))}}};$.getCompactable=faj;var Faj=function(A){var j=(0,$.left)(A.empty),e=(0,$.getCompactable)(A),t=e.compact,r=e.separate,a=function(o,i){return(0,$.isLeft)(o)||i(o.right)?o:j},n=function(o,i){return(0,$.isLeft)(o)?(0,QE.separated)(o,o):i(o.right)?(0,QE.separated)(j,(0,$.right)(o.right)):(0,QE.separated)((0,$.right)(o.right),j)};return{URI:$.URI,_E:void 0,map:Qi,compact:t,separate:r,filter:a,filterMap:function(o,i){if((0,$.isLeft)(o))return o;var s=i(o.right);return s._tag==="None"?j:(0,$.right)(s.value)},partition:n,partitionMap:function(o,i){if((0,$.isLeft)(o))return(0,QE.separated)(o,o);var s=i(o.right);return(0,$.isLeft)(s)?(0,QE.separated)((0,$.right)(s.left),j):(0,QE.separated)(j,(0,$.right)(s.right))}}};$.getFilterable=Faj;var baj=function(A){var j=(0,$.getFilterable)(A),e=(0,$.getCompactable)(A);return{URI:$.URI,_E:void 0,map:Qi,compact:j.compact,separate:j.separate,filter:j.filter,filterMap:j.filterMap,partition:j.partition,partitionMap:j.partitionMap,traverse:$O,sequence:$.sequence,reduce:ry,foldMap:ay,reduceRight:ny,wither:(0,fcA.witherDefault)($.Traversable,e),wilt:(0,fcA.wiltDefault)($.Traversable,e)}};$.getWitherable=baj;var yaj=function(A){return{URI:$.URI,_E:void 0,map:Qi,ap:function(j,e){return(0,$.isLeft)(j)?(0,$.isLeft)(e)?(0,$.left)(A.concat(j.left,e.left)):j:(0,$.isLeft)(e)?e:(0,$.right)(j.right(e.right))},of:$.of}};$.getApplicativeValidation=yaj;var $aj=function(A){return{URI:$.URI,_E:void 0,map:Qi,alt:function(j,e){if((0,$.isRight)(j))return j;var t=e();return(0,$.isLeft)(t)?(0,$.left)(A.concat(j.left,t.left)):t}}};$.getAltValidation=$aj;var waj=function(A){return function(j){return(0,$.isLeft)(j)?j:(0,$.right)(A(j.right))}};$.map=waj;$.Functor={URI:$.URI,map:Qi};$.as=(0,lo.dual)(2,(0,ty.as)($.Functor));$.asUnit=(0,ty.asUnit)($.Functor);$.of=$.right;$.Pointed={URI:$.URI,of:$.of};var Iaj=function(A){return function(j){return(0,$.isLeft)(j)?j:(0,$.isLeft)(A)?A:(0,$.right)(j.right(A.right))}};$.apW=Iaj;$.ap=$.apW;$.Apply={URI:$.URI,map:Qi,ap:Ih};$.Applicative={URI:$.URI,map:Qi,ap:Ih,of:$.of};$.Chain={URI:$.URI,map:Qi,ap:Ih,chain:$.flatMap};$.Monad={URI:$.URI,map:Qi,ap:Ih,of:$.of,chain:$.flatMap};var Paj=function(A,j){return function(e){return(0,$.isLeft)(e)?A:j(A,e.right)}};$.reduce=Paj;var Oaj=function(A){return function(j){return function(e){return(0,$.isLeft)(e)?A.empty:j(e.right)}}};$.foldMap=Oaj;var Raj=function(A,j){return function(e){return(0,$.isLeft)(e)?A:j(e.right,A)}};$.reduceRight=Raj;$.Foldable={URI:$.URI,reduce:ry,foldMap:ay,reduceRight:ny};var Daj=function(A){return function(j){return function(e){return(0,$.isLeft)(e)?A.of((0,$.left)(e.left)):A.map(j(e.right),$.right)}}};$.traverse=Daj;var Taj=function(A){return function(j){return(0,$.isLeft)(j)?A.of((0,$.left)(j.left)):A.map(j.right,$.right)}};$.sequence=Taj;$.Traversable={URI:$.URI,map:Qi,reduce:ry,foldMap:ay,reduceRight:ny,traverse:$O,sequence:$.sequence};var Caj=function(A,j){return function(e){return(0,$.isLeft)(e)?(0,$.left)(A(e.left)):(0,$.right)(j(e.right))}};$.bimap=Caj;var _aj=function(A){return function(j){return(0,$.isLeft)(j)?(0,$.left)(A(j.left)):j}};$.mapLeft=_aj;$.Bifunctor={URI:$.URI,bimap:C2,mapLeft:_2};var Saj=function(A){return function(j){return(0,$.isLeft)(j)?A():j}};$.altW=Saj;$.alt=$.altW;$.Alt={URI:$.URI,map:Qi,alt:$cA};var Haj=function(A){return function(j){return(0,$.isLeft)(j)?j:(0,$.right)(A(j))}};$.extend=Haj;$.Extend={URI:$.URI,map:Qi,extend:S2};$.ChainRec={URI:$.URI,map:Qi,ap:Ih,chain:$.flatMap,chainRec:H2};$.throwError=$.left;$.MonadThrow={URI:$.URI,map:Qi,ap:Ih,of:$.of,chain:$.flatMap,throwError:$.throwError};$.FromEither={URI:$.URI,fromEither:lo.identity};$.fromPredicate=(0,ey.fromPredicate)($.FromEither);$.fromOption=(0,ey.fromOption)($.FromEither);$.isLeft=Nc.isLeft;$.isRight=Nc.isRight;var Maj=function(A,j){return function(e){return(0,$.isLeft)(e)?A(e.left):j(e.right)}};$.matchW=Maj;$.foldW=$.matchW;$.match=$.matchW;$.fold=$.match;var Kaj=function(A){return function(j){return(0,$.isLeft)(j)?A(j.left):j.right}};$.getOrElseW=Kaj;$.getOrElse=$.getOrElseW;$.flap=(0,ty.flap)($.Functor);$.apFirst=(0,jy.apFirst)($.Apply);$.apFirstW=$.apFirst;$.apSecond=(0,jy.apSecond)($.Apply);$.apSecondW=$.apSecond;$.tap=(0,lo.dual)(2,ycA.tap($.Chain));$.flattenW=(0,$.flatMap)(lo.identity);$.flatten=$.flattenW;$.duplicate=(0,$.extend)(lo.identity);$.fromOptionK=(0,ey.fromOptionK)($.FromEither);$.chainOptionK=(0,ey.chainOptionK)($.FromEither,$.Chain);$.chainOptionKW=$.chainOptionK;var wO={fromEither:$.FromEither.fromEither};$.liftNullable=Nc.liftNullable(wO);$.liftOption=Nc.liftOption(wO);var wcA={flatMap:$.flatMap};$.flatMapNullable=Nc.flatMapNullable(wO,wcA);$.flatMapOption=Nc.flatMapOption(wO,wcA);$.filterOrElse=(0,ey.filterOrElse)($.FromEither,$.Chain);$.filterOrElseW=$.filterOrElse;var Naj=function(A){return(0,$.isLeft)(A)?(0,$.right)(A.left):(0,$.left)(A.right)};$.swap=Naj;var Laj=function(A){return function(j){return(0,$.isLeft)(j)?A(j.left):j}};$.orElseW=Laj;$.orElse=$.orElseW;var zaj=function(A){return function(j){return j==null?(0,$.left)(A):(0,$.right)(j)}};$.fromNullable=zaj;var Uaj=function(A,j){try{return(0,$.right)(A())}catch(e){return(0,$.left)(j(e))}};$.tryCatch=Uaj;var Vaj=function(A,j){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,$.tryCatch)(function(){return A.apply(void 0,e)},j)}};$.tryCatchK=Vaj;var Xaj=function(A){var j=(0,$.fromNullable)(A);return function(e){return(0,lo.flow)(e,j)}};$.fromNullableK=Xaj;var Jaj=function(A){var j=(0,$.fromNullableK)(A);return function(e){return(0,$.flatMap)(j(e))}};$.chainNullableK=Jaj;$.toUnion=(0,$.foldW)(lo.identity,lo.identity);function Waj(A){try{return A instanceof Error?A:new Error(String(A))}catch{return new Error}}$.toError=Waj;function IcA(A){return function(j,e){if(e===void 0){var t=IcA(A);return function(r){return t(j,r)}}return(0,$.isLeft)(e)?!1:A.equals(j,e.right)}}$.elem=IcA;var Qaj=function(A){return function(j){return(0,$.isLeft)(j)?!1:A(j.right)}};$.exists=Qaj;$.Do=(0,$.of)(Nc.emptyRecord);$.bindTo=(0,ty.bindTo)($.Functor);var Yaj=(0,ty.let)($.Functor);$.let=Yaj;$.bind=ycA.bind($.Chain);$.bindW=$.bind;$.apS=(0,jy.apS)($.Apply);$.apSW=$.apS;$.ApT=(0,$.of)(Nc.emptyReadonlyArray);var Zaj=function(A){return function(j){var e=A(0,Nc.head(j));if((0,$.isLeft)(e))return e;for(var t=[e.right],r=1;r<j.length;r++){var a=A(r,j[r]);if((0,$.isLeft)(a))return a;t.push(a.right)}return(0,$.right)(t)}};$.traverseReadonlyNonEmptyArrayWithIndex=Zaj;var A6j=function(A){var j=(0,$.traverseReadonlyNonEmptyArrayWithIndex)(A);return function(e){return Nc.isNonEmpty(e)?j(e):$.ApT}};$.traverseReadonlyArrayWithIndex=A6j;$.traverseArrayWithIndex=$.traverseReadonlyArrayWithIndex;var j6j=function(A){return(0,$.traverseReadonlyArrayWithIndex)(function(j,e){return A(e)})};$.traverseArray=j6j;$.sequenceArray=(0,$.traverseArray)(lo.identity);$.chainW=$.flatMap;$.chain=$.flatMap;$.chainFirst=$.tap;$.chainFirstW=$.tap;function e6j(A,j){return(0,$.tryCatch)(function(){return JSON.parse(A)},j)}$.parseJSON=e6j;var t6j=function(A,j){return(0,$.tryCatch)(function(){var e=JSON.stringify(A);if(typeof e!="string")throw new Error("Converting unsupported structure to JSON");return e},j)};$.stringifyJSON=t6j;$.either={URI:$.URI,map:Qi,of:$.of,ap:Ih,chain:$.flatMap,reduce:ry,foldMap:ay,reduceRight:ny,traverse:$O,sequence:$.sequence,bimap:C2,mapLeft:_2,alt:$cA,extend:S2,chainRec:H2,throwError:$.throwError};$.getApplySemigroup=(0,jy.getApplySemigroup)($.Apply);$.getApplyMonoid=(0,bcA.getApplicativeMonoid)($.Applicative);var r6j=function(A,j){return(0,jy.getApplySemigroup)((0,$.getApplicativeValidation)(A))(j)};$.getValidationSemigroup=r6j;var a6j=function(A,j){return(0,bcA.getApplicativeMonoid)((0,$.getApplicativeValidation)(A))(j)};$.getValidationMonoid=a6j;function n6j(A){var j=(0,$.getApplicativeValidation)(A).ap,e=(0,$.getAltValidation)(A).alt;return{URI:$.URI,_E:void 0,map:Qi,of:$.of,chain:$.flatMap,bimap:C2,mapLeft:_2,reduce:ry,foldMap:ay,reduceRight:ny,extend:S2,traverse:$O,sequence:$.sequence,chainRec:H2,throwError:$.throwError,ap:j,alt:e}}$.getValidation=n6j});var tA=RA(X=>{"use strict";var va=X&&X.__extends||function(){var A=function(j,e){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},A(j,e)};return function(j,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");A(j,e);function t(){this.constructor=j}j.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),aG=X&&X.__assign||function(){return aG=Object.assign||function(A){for(var j,e=1,t=arguments.length;e<t;e++){j=arguments[e];for(var r in j)Object.prototype.hasOwnProperty.call(j,r)&&(A[r]=j[r])}return A},aG.apply(this,arguments)},o6j=X&&X.__spreadArray||function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};Object.defineProperty(X,"__esModule",{value:!0});X.partial=X.PartialType=X.type=X.InterfaceType=X.array=X.ArrayType=X.recursion=X.RecursiveType=X.Int=X.brand=X.RefinementType=X.keyof=X.KeyofType=X.literal=X.LiteralType=X.void=X.undefined=X.null=X.UnknownRecord=X.AnyDictionaryType=X.UnknownArray=X.AnyArrayType=X.boolean=X.BooleanType=X.bigint=X.BigIntType=X.number=X.NumberType=X.string=X.StringType=X.unknown=X.UnknownType=X.voidType=X.VoidType=X.UndefinedType=X.nullType=X.NullType=X.getIndex=X.getTags=X.emptyTags=X.mergeAll=X.getDomainKeys=X.appendContext=X.getContextEntry=X.getFunctionName=X.identity=X.Type=X.success=X.failure=X.failures=void 0;X.alias=X.clean=X.StrictType=X.dictionary=X.object=X.ObjectType=X.Dictionary=X.getDefaultContext=X.getValidationError=X.interface=X.Array=X.taggedUnion=X.TaggedUnionType=X.Integer=X.refinement=X.any=X.AnyType=X.never=X.NeverType=X.Function=X.FunctionType=X.exact=X.ExactType=X.strict=X.readonlyArray=X.ReadonlyArrayType=X.readonly=X.ReadonlyType=X.tuple=X.TupleType=X.intersection=X.IntersectionType=X.union=X.UnionType=X.record=X.DictionaryType=void 0;var Fn=Xn();X.failures=Fn.left;var i6j=function(A,j,e){return(0,X.failures)([{value:A,context:j,message:e}])};X.failure=i6j;X.success=Fn.right;var Ga=function(){function A(j,e,t,r){this.name=j,this.is=e,this.validate=t,this.encode=r,this.decode=this.decode.bind(this)}return A.prototype.pipe=function(j,e){var t=this;return e===void 0&&(e="pipe(".concat(this.name,", ").concat(j.name,")")),new A(e,j.is,function(r,a){var n=t.validate(r,a);return(0,Fn.isLeft)(n)?n:j.validate(n.right,a)},this.encode===X.identity&&j.encode===X.identity?X.identity:function(r){return t.encode(j.encode(r))})},A.prototype.asDecoder=function(){return this},A.prototype.asEncoder=function(){return this},A.prototype.decode=function(j){return this.validate(j,[{key:"",type:this,actual:j}])},A}();X.Type=Ga;var s6j=function(A){return A};X.identity=s6j;function RcA(A){return A.displayName||A.name||"<function".concat(A.length,">")}X.getFunctionName=RcA;function l6j(A,j){return{key:A,type:j}}X.getContextEntry=l6j;function Zd(A,j,e,t){for(var r=A.length,a=Array(r+1),n=0;n<r;n++)a[n]=A[n];return a[r]={key:j,type:e,actual:t},a}X.appendContext=Zd;function YE(A,j){for(var e=j.length,t=0;t<e;t++)A.push(j[t])}var Ph=Object.prototype.hasOwnProperty;function K2(A){return Object.keys(A).map(function(j){return"".concat(j,": ").concat(A[j].name)}).join(", ")}function oy(A){for(var j=0;j<A.length;j++)if(A[j].encode!==X.identity)return!1;return!0}function DcA(A){return"{ ".concat(K2(A)," }")}function TcA(A){return"Partial<".concat(A,">")}function c6j(A,j,e,t){t===void 0&&(t="{ [K in ".concat(j.name,"]: ").concat(e.name," }"));var r=A.length;return new X2(t,function(a){return X.UnknownRecord.is(a)&&A.every(function(n){return e.is(a[n])})},function(a,n){var o=X.UnknownRecord.validate(a,n);if((0,Fn.isLeft)(o))return o;for(var i=o.right,s={},l=[],c=!1,k=0;k<r;k++){var u=A[k],m=i[u],F=e.validate(m,Zd(n,u,e,m));if((0,Fn.isLeft)(F))YE(l,F.left);else{var S=F.right;c=c||S!==m,s[u]=S}}return l.length>0?(0,X.failures)(l):(0,X.success)(c||Object.keys(i).length!==r?s:i)},e.encode===X.identity?X.identity:function(a){for(var n={},o=0;o<r;o++){var i=A[o];n[i]=e.encode(a[i])}return n},j,e)}function z2(A){var j;if(ScA(A)){var e=A.value;if(X.string.is(e))return j={},j[e]=null,j}else{if(m6j(A))return A.keys;if(McA(A)){var t=A.types.map(function(r){return z2(r)});return t.some(IO.is)?void 0:Object.assign.apply(Object,o6j([{}],t,!1))}}}X.getDomainKeys=z2;function d6j(A,j,e){return e===void 0&&(e="{ [K in ".concat(A.name,"]: ").concat(j.name," }")),new X2(e,function(t){return X.UnknownRecord.is(t)?Object.keys(t).every(function(r){return A.is(r)&&j.is(t[r])}):OcA(j)&&Array.isArray(t)},function(t,r){if(X.UnknownRecord.is(t)){for(var a={},n=[],o=Object.keys(t),i=o.length,s=!1,l=0;l<i;l++){var c=o[l],k=t[c],u=A.validate(c,Zd(r,c,A,c));if((0,Fn.isLeft)(u))YE(n,u.left);else{var m=u.right;s=s||m!==c,c=m;var F=j.validate(k,Zd(r,c,j,k));if((0,Fn.isLeft)(F))YE(n,F.left);else{var S=F.right;s=s||S!==k,a[c]=S}}}return n.length>0?(0,X.failures)(n):(0,X.success)(s?a:t)}return OcA(j)&&Array.isArray(t)?(0,X.success)(t):(0,X.failure)(t,r)},A.encode===X.identity&&j.encode===X.identity?X.identity:function(t){for(var r={},a=Object.keys(t),n=a.length,o=0;o<n;o++){var i=a[o];r[String(A.encode(i))]=j.encode(t[i])}return r},A,j)}function CcA(A){return"("+A.map(function(j){return j.name}).join(" | ")+")"}function N2(A,j){for(var e=!0,t=!0,r=!X.UnknownRecord.is(A),a=0,n=j;a<n.length;a++){var o=n[a];o!==A&&(e=!1),X.UnknownRecord.is(o)&&(t=!1)}if(e)return A;if(t)return j[j.length-1];for(var i={},s=0,l=j;s<l.length;s++){var o=l[s];for(var c in o)(!Ph.call(i,c)||r||o[c]!==A[c])&&(i[c]=o[c])}return i}X.mergeAll=N2;function L2(A){switch(A._tag){case"RefinementType":case"ReadonlyType":return L2(A.type);case"InterfaceType":case"StrictType":case"PartialType":return A.props;case"IntersectionType":return A.types.reduce(function(j,e){return Object.assign(j,L2(e))},{})}}function PcA(A,j){for(var e=Object.getOwnPropertyNames(A),t=!1,r={},a=0;a<e.length;a++){var n=e[a];Ph.call(j,n)?r[n]=A[n]:t=!0}return t?r:A}function k6j(A){return HcA(A)?"{| ".concat(K2(A.props)," |}"):B6j(A)?TcA("{| ".concat(K2(A.props)," |}")):"Exact<".concat(A.name,">")}function u6j(A){return A.length>0}X.emptyTags={};function _cA(A,j){for(var e=[],t=0,r=A;t<r.length;t++){var a=r[t];j.indexOf(a)!==-1&&e.push(a)}return e}function E6j(A,j){if(A===X.emptyTags)return j;if(j===X.emptyTags)return A;var e=Object.assign({},A);for(var t in j)if(Ph.call(A,t)){var r=_cA(A[t],j[t]);if(u6j(r))e[t]=r;else{e=X.emptyTags;break}}else e[t]=j[t];return e}function p6j(A,j){if(A===X.emptyTags||j===X.emptyTags)return X.emptyTags;var e=X.emptyTags;for(var t in A)if(Ph.call(j,t)){var r=_cA(A[t],j[t]);r.length===0&&(e===X.emptyTags&&(e={}),e[t]=A[t].concat(j[t]))}return e}function OcA(A){return A._tag==="AnyType"}function ScA(A){return A._tag==="LiteralType"}function m6j(A){return A._tag==="KeyofType"}function HcA(A){return A._tag==="InterfaceType"}function B6j(A){return A._tag==="PartialType"}function g6j(A){return A._tag==="StrictType"}function h6j(A){return A._tag==="ExactType"}function q6j(A){return A._tag==="RefinementType"}function x6j(A){return A._tag==="IntersectionType"}function McA(A){return A._tag==="UnionType"}function v6j(A){return A._tag==="RecursiveType"}var M2=[];function lB(A){if(M2.indexOf(A)!==-1)return X.emptyTags;if(HcA(A)||g6j(A)){var j=X.emptyTags;for(var e in A.props){var t=A.props[e];ScA(t)&&(j===X.emptyTags&&(j={}),j[e]=[t.value])}return j}else{if(h6j(A)||q6j(A))return lB(A.type);if(x6j(A))return A.types.reduce(function(a,n){return E6j(a,lB(n))},X.emptyTags);if(McA(A))return A.types.slice(1).reduce(function(a,n){return p6j(a,lB(n))},lB(A.types[0]));if(v6j(A)){M2.push(A);var r=lB(A.type);return M2.pop(),r}}return X.emptyTags}X.getTags=lB;function KcA(A){var j=lB(A[0]),e=Object.keys(j),t=A.length,r=function(s){for(var l=j[s].slice(),c=[j[s]],k=1;k<t;k++){var u=A[k],m=lB(u),F=m[s];if(F===void 0)return"continue-keys";if(F.some(function(S){return l.indexOf(S)!==-1}))return"continue-keys";l.push.apply(l,F),c.push(F)}return{value:[s,c]}};A:for(var a=0,n=e;a<n.length;a++){var o=n[a],i=r(o);if(typeof i=="object")return i.value;switch(i){case"continue-keys":continue A}}}X.getIndex=KcA;var NcA=function(A){va(j,A);function j(){var e=A.call(this,"null",function(t){return t===null},function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="NullType",e}return j}(Ga);X.NullType=NcA;X.nullType=new NcA;X.null=X.nullType;var LcA=function(A){va(j,A);function j(){var e=A.call(this,"undefined",function(t){return t===void 0},function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="UndefinedType",e}return j}(Ga);X.UndefinedType=LcA;var IO=new LcA;X.undefined=IO;var zcA=function(A){va(j,A);function j(){var e=A.call(this,"void",IO.is,IO.validate,X.identity)||this;return e._tag="VoidType",e}return j}(Ga);X.VoidType=zcA;X.voidType=new zcA;X.void=X.voidType;var UcA=function(A){va(j,A);function j(){var e=A.call(this,"unknown",function(t){return!0},X.success,X.identity)||this;return e._tag="UnknownType",e}return j}(Ga);X.UnknownType=UcA;X.unknown=new UcA;var VcA=function(A){va(j,A);function j(){var e=A.call(this,"string",function(t){return typeof t=="string"},function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="StringType",e}return j}(Ga);X.StringType=VcA;X.string=new VcA;var XcA=function(A){va(j,A);function j(){var e=A.call(this,"number",function(t){return typeof t=="number"},function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="NumberType",e}return j}(Ga);X.NumberType=XcA;X.number=new XcA;var JcA=function(A){va(j,A);function j(){var e=A.call(this,"bigint",function(t){return typeof t=="bigint"},function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="BigIntType",e}return j}(Ga);X.BigIntType=JcA;X.bigint=new JcA;var WcA=function(A){va(j,A);function j(){var e=A.call(this,"boolean",function(t){return typeof t=="boolean"},function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="BooleanType",e}return j}(Ga);X.BooleanType=WcA;X.boolean=new WcA;var QcA=function(A){va(j,A);function j(){var e=A.call(this,"UnknownArray",Array.isArray,function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="AnyArrayType",e}return j}(Ga);X.AnyArrayType=QcA;X.UnknownArray=new QcA;X.Array=X.UnknownArray;var YcA=function(A){va(j,A);function j(){var e=A.call(this,"UnknownRecord",function(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)},function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="AnyDictionaryType",e}return j}(Ga);X.AnyDictionaryType=YcA;X.UnknownRecord=new YcA;var ZcA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.value=n,o._tag="LiteralType",o}return j}(Ga);X.LiteralType=ZcA;function G6j(A,j){j===void 0&&(j=JSON.stringify(A));var e=function(t){return t===A};return new ZcA(j,e,function(t,r){return e(t)?(0,X.success)(A):(0,X.failure)(t,r)},X.identity,A)}X.literal=G6j;var AdA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.keys=n,o._tag="KeyofType",o}return j}(Ga);X.KeyofType=AdA;function f6j(A,j){j===void 0&&(j=Object.keys(A).map(function(t){return JSON.stringify(t)}).join(" | "));var e=function(t){return X.string.is(t)&&Ph.call(A,t)};return new AdA(j,e,function(t,r){return e(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity,A)}X.keyof=f6j;var jdA=function(A){va(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a)||this;return i.type=n,i.predicate=o,i._tag="RefinementType",i}return j}(Ga);X.RefinementType=jdA;function edA(A,j,e){return W2(A,j,e)}X.brand=edA;X.Int=edA(X.number,function(A){return Number.isInteger(A)},"Int");var U2=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.runDefinition=n,o._tag="RecursiveType",o}return j}(Ga);X.RecursiveType=U2;Object.defineProperty(U2.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});function F6j(A,j){var e,t=function(){return e||(e=j(r),e.name=A),e},r=new U2(A,function(a){return t().is(a)},function(a,n){return t().validate(a,n)},function(a){return t().encode(a)},t);return r}X.recursion=F6j;var tdA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ArrayType",o}return j}(Ga);X.ArrayType=tdA;function rdA(A,j){return j===void 0&&(j="Array<".concat(A.name,">")),new tdA(j,function(e){return X.UnknownArray.is(e)&&e.every(A.is)},function(e,t){var r=X.UnknownArray.validate(e,t);if((0,Fn.isLeft)(r))return r;for(var a=r.right,n=a.length,o=a,i=[],s=0;s<n;s++){var l=a[s],c=A.validate(l,Zd(t,String(s),A,l));if((0,Fn.isLeft)(c))YE(i,c.left);else{var k=c.right;k!==l&&(o===a&&(o=a.slice()),o[s]=k)}}return i.length>0?(0,X.failures)(i):(0,X.success)(o)},A.encode===X.identity?X.identity:function(e){return e.map(A.encode)},A)}X.array=rdA;var adA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="InterfaceType",o}return j}(Ga);X.InterfaceType=adA;function V2(A,j){j===void 0&&(j=DcA(A));var e=Object.keys(A),t=e.map(function(a){return A[a]}),r=e.length;return new adA(j,function(a){if(X.UnknownRecord.is(a)){for(var n=0;n<r;n++){var o=e[n],i=a[o];if(i===void 0&&!Ph.call(a,o)||!t[n].is(i))return!1}return!0}return!1},function(a,n){var o=X.UnknownRecord.validate(a,n);if((0,Fn.isLeft)(o))return o;for(var i=o.right,s=i,l=[],c=0;c<r;c++){var k=e[c],u=s[k],m=t[c],F=m.validate(u,Zd(n,k,m,u));if((0,Fn.isLeft)(F))YE(l,F.left);else{var S=F.right;(S!==u||S===void 0&&!Ph.call(s,k))&&(s===i&&(s=aG({},i)),s[k]=S)}}return l.length>0?(0,X.failures)(l):(0,X.success)(s)},oy(t)?X.identity:function(a){for(var n=aG({},a),o=0;o<r;o++){var i=e[o],s=t[o].encode;s!==X.identity&&(n[i]=s(a[i]))}return n},A)}X.type=V2;X.interface=V2;var ndA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="PartialType",o}return j}(Ga);X.PartialType=ndA;function b6j(A,j){j===void 0&&(j=TcA(DcA(A)));var e=Object.keys(A),t=e.map(function(a){return A[a]}),r=e.length;return new ndA(j,function(a){if(X.UnknownRecord.is(a)){for(var n=0;n<r;n++){var o=e[n],i=a[o];if(i!==void 0&&!A[o].is(i))return!1}return!0}return!1},function(a,n){var o=X.UnknownRecord.validate(a,n);if((0,Fn.isLeft)(o))return o;for(var i=o.right,s=i,l=[],c=0;c<r;c++){var k=e[c],u=s[k],m=A[k],F=m.validate(u,Zd(n,k,m,u));if((0,Fn.isLeft)(F))u!==void 0&&YE(l,F.left);else{var S=F.right;S!==u&&(s===i&&(s=aG({},i)),s[k]=S)}}return l.length>0?(0,X.failures)(l):(0,X.success)(s)},oy(t)?X.identity:function(a){for(var n=aG({},a),o=0;o<r;o++){var i=e[o],s=a[i];s!==void 0&&(n[i]=t[o].encode(s))}return n},A)}X.partial=b6j;var X2=function(A){va(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a)||this;return i.domain=n,i.codomain=o,i._tag="DictionaryType",i}return j}(Ga);X.DictionaryType=X2;function odA(A,j,e){var t=z2(A);return t?c6j(Object.keys(t),A,j,e):d6j(A,j,e)}X.record=odA;var J2=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="UnionType",o}return j}(Ga);X.UnionType=J2;function idA(A,j){j===void 0&&(j=CcA(A));var e=KcA(A);if(e!==void 0&&A.length>0){var t=e[0],r=e[1],a=r.length,n=function(o){for(var i=0;i<a;i++)if(r[i].indexOf(o)!==-1)return i};return new PO(j,function(o){if(X.UnknownRecord.is(o)){var i=n(o[t]);return i!==void 0?A[i].is(o):!1}return!1},function(o,i){var s=X.UnknownRecord.validate(o,i);if((0,Fn.isLeft)(s))return s;var l=s.right,c=n(l[t]);if(c===void 0)return(0,X.failure)(o,i);var k=A[c];return k.validate(l,Zd(i,String(c),k,l))},oy(A)?X.identity:function(o){var i=n(o[t]);if(i===void 0)throw new Error("no codec found to encode value in union codec ".concat(j));return A[i].encode(o)},A,t)}else return new J2(j,function(o){return A.some(function(i){return i.is(o)})},function(o,i){for(var s=[],l=0;l<A.length;l++){var c=A[l],k=c.validate(o,Zd(i,String(l),c,o));if((0,Fn.isLeft)(k))YE(s,k.left);else return(0,X.success)(k.right)}return(0,X.failures)(s)},oy(A)?X.identity:function(o){for(var i=0,s=A;i<s.length;i++){var l=s[i];if(l.is(o))return l.encode(o)}throw new Error("no codec found to encode value in union type ".concat(j))},A)}X.union=idA;var sdA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="IntersectionType",o}return j}(Ga);X.IntersectionType=sdA;function y6j(A,j){j===void 0&&(j="(".concat(A.map(function(t){return t.name}).join(" & "),")"));var e=A.length;return new sdA(j,function(t){return A.every(function(r){return r.is(t)})},A.length===0?X.success:function(t,r){for(var a=[],n=[],o=0;o<e;o++){var i=A[o],s=i.validate(t,Zd(r,String(o),i,t));(0,Fn.isLeft)(s)?YE(n,s.left):a.push(s.right)}return n.length>0?(0,X.failures)(n):(0,X.success)(N2(t,a))},A.length===0?X.identity:function(t){return N2(t,A.map(function(r){return r.encode(t)}))},A)}X.intersection=y6j;var ldA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="TupleType",o}return j}(Ga);X.TupleType=ldA;function $6j(A,j){j===void 0&&(j="[".concat(A.map(function(t){return t.name}).join(", "),"]"));var e=A.length;return new ldA(j,function(t){return X.UnknownArray.is(t)&&t.length===e&&A.every(function(r,a){return r.is(t[a])})},function(t,r){var a=X.UnknownArray.validate(t,r);if((0,Fn.isLeft)(a))return a;for(var n=a.right,o=n.length>e?n.slice(0,e):n,i=[],s=0;s<e;s++){var l=n[s],c=A[s],k=c.validate(l,Zd(r,String(s),c,l));if((0,Fn.isLeft)(k))YE(i,k.left);else{var u=k.right;u!==l&&(o===n&&(o=n.slice()),o[s]=u)}}return i.length>0?(0,X.failures)(i):(0,X.success)(o)},oy(A)?X.identity:function(t){return A.map(function(r,a){return r.encode(t[a])})},A)}X.tuple=$6j;var cdA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ReadonlyType",o}return j}(Ga);X.ReadonlyType=cdA;function w6j(A,j){return j===void 0&&(j="Readonly<".concat(A.name,">")),new cdA(j,A.is,A.validate,A.encode,A)}X.readonly=w6j;var ddA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ReadonlyArrayType",o}return j}(Ga);X.ReadonlyArrayType=ddA;function I6j(A,j){j===void 0&&(j="ReadonlyArray<".concat(A.name,">"));var e=rdA(A);return new ddA(j,e.is,e.validate,e.encode,A)}X.readonlyArray=I6j;var P6j=function(A,j){return udA(V2(A),j)};X.strict=P6j;var kdA=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ExactType",o}return j}(Ga);X.ExactType=kdA;function udA(A,j){j===void 0&&(j=k6j(A));var e=L2(A);return new kdA(j,A.is,function(t,r){var a=X.UnknownRecord.validate(t,r);if((0,Fn.isLeft)(a))return a;var n=A.validate(t,r);return(0,Fn.isLeft)(n)?n:(0,Fn.right)(PcA(n.right,e))},function(t){return A.encode(PcA(t,e))},A)}X.exact=udA;var EdA=function(A){va(j,A);function j(){var e=A.call(this,"Function",function(t){return typeof t=="function"},function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="FunctionType",e}return j}(Ga);X.FunctionType=EdA;X.Function=new EdA;var pdA=function(A){va(j,A);function j(){var e=A.call(this,"never",function(t){return!1},function(t,r){return(0,X.failure)(t,r)},function(){throw new Error("cannot encode never")})||this;return e._tag="NeverType",e}return j}(Ga);X.NeverType=pdA;X.never=new pdA;var mdA=function(A){va(j,A);function j(){var e=A.call(this,"any",function(t){return!0},X.success,X.identity)||this;return e._tag="AnyType",e}return j}(Ga);X.AnyType=mdA;X.any=new mdA;function W2(A,j,e){return e===void 0&&(e="(".concat(A.name," | ").concat(RcA(j),")")),new jdA(e,function(t){return A.is(t)&&j(t)},function(t,r){var a=A.validate(t,r);if((0,Fn.isLeft)(a))return a;var n=a.right;return j(n)?(0,X.success)(n):(0,X.failure)(n,r)},A.encode,A,j)}X.refinement=W2;X.Integer=W2(X.number,Number.isInteger,"Integer");var PO=function(A){va(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a,n)||this;return i.tag=o,i}return j}(J2);X.TaggedUnionType=PO;var O6j=function(A,j,e){e===void 0&&(e=CcA(j));var t=idA(j,e);return t instanceof PO?t:(console.warn("[io-ts] Cannot build a tagged union for ".concat(e,", returning a de-optimized union")),new PO(e,t.is,t.validate,t.encode,j,A))};X.taggedUnion=O6j;var R6j=function(A,j){return{value:A,context:j}};X.getValidationError=R6j;var D6j=function(A){return[{key:"",type:A}]};X.getDefaultContext=D6j;X.Dictionary=X.UnknownRecord;var BdA=function(A){va(j,A);function j(){var e=A.call(this,"object",function(t){return t!==null&&typeof t=="object"},function(t,r){return e.is(t)?(0,X.success)(t):(0,X.failure)(t,r)},X.identity)||this;return e._tag="ObjectType",e}return j}(Ga);X.ObjectType=BdA;X.object=new BdA;X.dictionary=odA;var T6j=function(A){va(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="StrictType",o}return j}(Ga);X.StrictType=T6j;function C6j(A){return A}X.clean=C6j;function _6j(A){return function(){return A}}X.alias=_6j});var Sy=RA((IIe,YhA)=>{"use strict";var Hpj="2.0.0",Mpj=Number.MAX_SAFE_INTEGER||9007199254740991,Kpj=16,Npj=250,Lpj=["major","premajor","minor","preminor","patch","prepatch","prerelease"];YhA.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Kpj,MAX_SAFE_BUILD_LENGTH:Npj,MAX_SAFE_INTEGER:Mpj,RELEASE_TYPES:Lpj,SEMVER_SPEC_VERSION:Hpj,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Hy=RA((PIe,ZhA)=>{"use strict";var zpj=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...A)=>console.error("SEMVER",...A):()=>{};ZhA.exports=zpj});var YG=RA((S7,AqA)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:$L,MAX_SAFE_BUILD_LENGTH:Upj,MAX_LENGTH:Vpj}=Sy(),Xpj=Hy();S7=AqA.exports={};var Jpj=S7.re=[],Wpj=S7.safeRe=[],Ie=S7.src=[],Qpj=S7.safeSrc=[],Pe=S7.t={},Ypj=0,wL="[a-zA-Z0-9-]",Zpj=[["\\s",1],["\\d",Vpj],[wL,Upj]],Amj=A=>{for(let[j,e]of Zpj)A=A.split(`${j}*`).join(`${j}{0,${e}}`).split(`${j}+`).join(`${j}{1,${e}}`);return A},cr=(A,j,e)=>{let t=Amj(j),r=Ypj++;Xpj(A,r,j),Pe[A]=r,Ie[r]=j,Qpj[r]=t,Jpj[r]=new RegExp(j,e?"g":void 0),Wpj[r]=new RegExp(t,e?"g":void 0)};cr("NUMERICIDENTIFIER","0|[1-9]\\d*");cr("NUMERICIDENTIFIERLOOSE","\\d+");cr("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${wL}*`);cr("MAINVERSION",`(${Ie[Pe.NUMERICIDENTIFIER]})\\.(${Ie[Pe.NUMERICIDENTIFIER]})\\.(${Ie[Pe.NUMERICIDENTIFIER]})`);cr("MAINVERSIONLOOSE",`(${Ie[Pe.NUMERICIDENTIFIERLOOSE]})\\.(${Ie[Pe.NUMERICIDENTIFIERLOOSE]})\\.(${Ie[Pe.NUMERICIDENTIFIERLOOSE]})`);cr("PRERELEASEIDENTIFIER",`(?:${Ie[Pe.NONNUMERICIDENTIFIER]}|${Ie[Pe.NUMERICIDENTIFIER]})`);cr("PRERELEASEIDENTIFIERLOOSE",`(?:${Ie[Pe.NONNUMERICIDENTIFIER]}|${Ie[Pe.NUMERICIDENTIFIERLOOSE]})`);cr("PRERELEASE",`(?:-(${Ie[Pe.PRERELEASEIDENTIFIER]}(?:\\.${Ie[Pe.PRERELEASEIDENTIFIER]})*))`);cr("PRERELEASELOOSE",`(?:-?(${Ie[Pe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ie[Pe.PRERELEASEIDENTIFIERLOOSE]})*))`);cr("BUILDIDENTIFIER",`${wL}+`);cr("BUILD",`(?:\\+(${Ie[Pe.BUILDIDENTIFIER]}(?:\\.${Ie[Pe.BUILDIDENTIFIER]})*))`);cr("FULLPLAIN",`v?${Ie[Pe.MAINVERSION]}${Ie[Pe.PRERELEASE]}?${Ie[Pe.BUILD]}?`);cr("FULL",`^${Ie[Pe.FULLPLAIN]}$`);cr("LOOSEPLAIN",`[v=\\s]*${Ie[Pe.MAINVERSIONLOOSE]}${Ie[Pe.PRERELEASELOOSE]}?${Ie[Pe.BUILD]}?`);cr("LOOSE",`^${Ie[Pe.LOOSEPLAIN]}$`);cr("GTLT","((?:<|>)?=?)");cr("XRANGEIDENTIFIERLOOSE",`${Ie[Pe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);cr("XRANGEIDENTIFIER",`${Ie[Pe.NUMERICIDENTIFIER]}|x|X|\\*`);cr("XRANGEPLAIN",`[v=\\s]*(${Ie[Pe.XRANGEIDENTIFIER]})(?:\\.(${Ie[Pe.XRANGEIDENTIFIER]})(?:\\.(${Ie[Pe.XRANGEIDENTIFIER]})(?:${Ie[Pe.PRERELEASE]})?${Ie[Pe.BUILD]}?)?)?`);cr("XRANGEPLAINLOOSE",`[v=\\s]*(${Ie[Pe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ie[Pe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ie[Pe.XRANGEIDENTIFIERLOOSE]})(?:${Ie[Pe.PRERELEASELOOSE]})?${Ie[Pe.BUILD]}?)?)?`);cr("XRANGE",`^${Ie[Pe.GTLT]}\\s*${Ie[Pe.XRANGEPLAIN]}$`);cr("XRANGELOOSE",`^${Ie[Pe.GTLT]}\\s*${Ie[Pe.XRANGEPLAINLOOSE]}$`);cr("COERCEPLAIN",`(^|[^\\d])(\\d{1,${$L}})(?:\\.(\\d{1,${$L}}))?(?:\\.(\\d{1,${$L}}))?`);cr("COERCE",`${Ie[Pe.COERCEPLAIN]}(?:$|[^\\d])`);cr("COERCEFULL",Ie[Pe.COERCEPLAIN]+`(?:${Ie[Pe.PRERELEASE]})?(?:${Ie[Pe.BUILD]})?(?:$|[^\\d])`);cr("COERCERTL",Ie[Pe.COERCE],!0);cr("COERCERTLFULL",Ie[Pe.COERCEFULL],!0);cr("LONETILDE","(?:~>?)");cr("TILDETRIM",`(\\s*)${Ie[Pe.LONETILDE]}\\s+`,!0);S7.tildeTrimReplace="$1~";cr("TILDE",`^${Ie[Pe.LONETILDE]}${Ie[Pe.XRANGEPLAIN]}$`);cr("TILDELOOSE",`^${Ie[Pe.LONETILDE]}${Ie[Pe.XRANGEPLAINLOOSE]}$`);cr("LONECARET","(?:\\^)");cr("CARETTRIM",`(\\s*)${Ie[Pe.LONECARET]}\\s+`,!0);S7.caretTrimReplace="$1^";cr("CARET",`^${Ie[Pe.LONECARET]}${Ie[Pe.XRANGEPLAIN]}$`);cr("CARETLOOSE",`^${Ie[Pe.LONECARET]}${Ie[Pe.XRANGEPLAINLOOSE]}$`);cr("COMPARATORLOOSE",`^${Ie[Pe.GTLT]}\\s*(${Ie[Pe.LOOSEPLAIN]})$|^$`);cr("COMPARATOR",`^${Ie[Pe.GTLT]}\\s*(${Ie[Pe.FULLPLAIN]})$|^$`);cr("COMPARATORTRIM",`(\\s*)${Ie[Pe.GTLT]}\\s*(${Ie[Pe.LOOSEPLAIN]}|${Ie[Pe.XRANGEPLAIN]})`,!0);S7.comparatorTrimReplace="$1$2$3";cr("HYPHENRANGE",`^\\s*(${Ie[Pe.XRANGEPLAIN]})\\s+-\\s+(${Ie[Pe.XRANGEPLAIN]})\\s*$`);cr("HYPHENRANGELOOSE",`^\\s*(${Ie[Pe.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ie[Pe.XRANGEPLAINLOOSE]})\\s*$`);cr("STAR","(<|>)?=?\\s*\\*");cr("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");cr("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var cD=RA((OIe,jqA)=>{"use strict";var jmj=Object.freeze({loose:!0}),emj=Object.freeze({}),tmj=A=>A?typeof A!="object"?jmj:A:emj;jqA.exports=tmj});var IL=RA((RIe,rqA)=>{"use strict";var eqA=/^[0-9]+$/,tqA=(A,j)=>{let e=eqA.test(A),t=eqA.test(j);return e&&t&&(A=+A,j=+j),A===j?0:e&&!t?-1:t&&!e?1:A<j?-1:1},rmj=(A,j)=>tqA(j,A);rqA.exports={compareIdentifiers:tqA,rcompareIdentifiers:rmj}});var es=RA((DIe,nqA)=>{"use strict";var dD=Hy(),{MAX_LENGTH:aqA,MAX_SAFE_INTEGER:kD}=Sy(),{safeRe:uD,t:ED}=YG(),amj=cD(),{compareIdentifiers:ZG}=IL(),PL=class A{constructor(j,e){if(e=amj(e),j instanceof A){if(j.loose===!!e.loose&&j.includePrerelease===!!e.includePrerelease)return j;j=j.version}else if(typeof j!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof j}".`);if(j.length>aqA)throw new TypeError(`version is longer than ${aqA} characters`);dD("SemVer",j,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;let t=j.trim().match(e.loose?uD[ED.LOOSE]:uD[ED.FULL]);if(!t)throw new TypeError(`Invalid Version: ${j}`);if(this.raw=j,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>kD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>kD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>kD||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){let a=+r;if(a>=0&&a<kD)return a}return r}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(j){if(dD("SemVer.compare",this.version,this.options,j),!(j instanceof A)){if(typeof j=="string"&&j===this.version)return 0;j=new A(j,this.options)}return j.version===this.version?0:this.compareMain(j)||this.comparePre(j)}compareMain(j){return j instanceof A||(j=new A(j,this.options)),ZG(this.major,j.major)||ZG(this.minor,j.minor)||ZG(this.patch,j.patch)}comparePre(j){if(j instanceof A||(j=new A(j,this.options)),this.prerelease.length&&!j.prerelease.length)return-1;if(!this.prerelease.length&&j.prerelease.length)return 1;if(!this.prerelease.length&&!j.prerelease.length)return 0;let e=0;do{let t=this.prerelease[e],r=j.prerelease[e];if(dD("prerelease compare",e,t,r),t===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(t===void 0)return-1;if(t===r)continue;return ZG(t,r)}while(++e)}compareBuild(j){j instanceof A||(j=new A(j,this.options));let e=0;do{let t=this.build[e],r=j.build[e];if(dD("build compare",e,t,r),t===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(t===void 0)return-1;if(t===r)continue;return ZG(t,r)}while(++e)}inc(j,e,t){if(j.startsWith("pre")){if(!e&&t===!1)throw new Error("invalid increment argument: identifier is empty");if(e){let r=`-${e}`.match(this.options.loose?uD[ED.PRERELEASELOOSE]:uD[ED.PRERELEASE]);if(!r||r[1]!==e)throw new Error(`invalid identifier: ${e}`)}}switch(j){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,t),this.inc("pre",e,t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,t),this.inc("pre",e,t);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let r=Number(t)?1:0;if(this.prerelease.length===0)this.prerelease=[r];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(e===this.prerelease.join(".")&&t===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(e){let a=[e,r];t===!1&&(a=[e]),ZG(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${j}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};nqA.exports=PL});var Vh=RA((TIe,iqA)=>{"use strict";var oqA=es(),nmj=(A,j,e=!1)=>{if(A instanceof oqA)return A;try{return new oqA(A,j)}catch(t){if(!e)return null;throw t}};iqA.exports=nmj});var lqA=RA((CIe,sqA)=>{"use strict";var omj=Vh(),imj=(A,j)=>{let e=omj(A,j);return e?e.version:null};sqA.exports=imj});var dqA=RA((_Ie,cqA)=>{"use strict";var smj=Vh(),lmj=(A,j)=>{let e=smj(A.trim().replace(/^[=v]+/,""),j);return e?e.version:null};cqA.exports=lmj});var EqA=RA((SIe,uqA)=>{"use strict";var kqA=es(),cmj=(A,j,e,t,r)=>{typeof e=="string"&&(r=t,t=e,e=void 0);try{return new kqA(A instanceof kqA?A.version:A,e).inc(j,t,r).version}catch{return null}};uqA.exports=cmj});var BqA=RA((HIe,mqA)=>{"use strict";var pqA=Vh(),dmj=(A,j)=>{let e=pqA(A,null,!0),t=pqA(j,null,!0),r=e.compare(t);if(r===0)return null;let a=r>0,n=a?e:t,o=a?t:e,i=!!n.prerelease.length;if(!!o.prerelease.length&&!i){if(!o.patch&&!o.minor)return"major";if(o.compareMain(n)===0)return o.minor&&!o.patch?"minor":"patch"}let l=i?"pre":"";return e.major!==t.major?l+"major":e.minor!==t.minor?l+"minor":e.patch!==t.patch?l+"patch":"prerelease"};mqA.exports=dmj});var hqA=RA((MIe,gqA)=>{"use strict";var kmj=es(),umj=(A,j)=>new kmj(A,j).major;gqA.exports=umj});var xqA=RA((KIe,qqA)=>{"use strict";var Emj=es(),pmj=(A,j)=>new Emj(A,j).minor;qqA.exports=pmj});var GqA=RA((NIe,vqA)=>{"use strict";var mmj=es(),Bmj=(A,j)=>new mmj(A,j).patch;vqA.exports=Bmj});var FqA=RA((LIe,fqA)=>{"use strict";var gmj=Vh(),hmj=(A,j)=>{let e=gmj(A,j);return e&&e.prerelease.length?e.prerelease:null};fqA.exports=hmj});var jd=RA((zIe,yqA)=>{"use strict";var bqA=es(),qmj=(A,j,e)=>new bqA(A,e).compare(new bqA(j,e));yqA.exports=qmj});var wqA=RA((UIe,$qA)=>{"use strict";var xmj=jd(),vmj=(A,j,e)=>xmj(j,A,e);$qA.exports=vmj});var PqA=RA((VIe,IqA)=>{"use strict";var Gmj=jd(),fmj=(A,j)=>Gmj(A,j,!0);IqA.exports=fmj});var pD=RA((XIe,RqA)=>{"use strict";var OqA=es(),Fmj=(A,j,e)=>{let t=new OqA(A,e),r=new OqA(j,e);return t.compare(r)||t.compareBuild(r)};RqA.exports=Fmj});var TqA=RA((JIe,DqA)=>{"use strict";var bmj=pD(),ymj=(A,j)=>A.sort((e,t)=>bmj(e,t,j));DqA.exports=ymj});var _qA=RA((WIe,CqA)=>{"use strict";var $mj=pD(),wmj=(A,j)=>A.sort((e,t)=>$mj(t,e,j));CqA.exports=wmj});var My=RA((QIe,SqA)=>{"use strict";var Imj=jd(),Pmj=(A,j,e)=>Imj(A,j,e)>0;SqA.exports=Pmj});var mD=RA((YIe,HqA)=>{"use strict";var Omj=jd(),Rmj=(A,j,e)=>Omj(A,j,e)<0;HqA.exports=Rmj});var OL=RA((ZIe,MqA)=>{"use strict";var Dmj=jd(),Tmj=(A,j,e)=>Dmj(A,j,e)===0;MqA.exports=Tmj});var RL=RA((A1e,KqA)=>{"use strict";var Cmj=jd(),_mj=(A,j,e)=>Cmj(A,j,e)!==0;KqA.exports=_mj});var BD=RA((j1e,NqA)=>{"use strict";var Smj=jd(),Hmj=(A,j,e)=>Smj(A,j,e)>=0;NqA.exports=Hmj});var gD=RA((e1e,LqA)=>{"use strict";var Mmj=jd(),Kmj=(A,j,e)=>Mmj(A,j,e)<=0;LqA.exports=Kmj});var DL=RA((t1e,zqA)=>{"use strict";var Nmj=OL(),Lmj=RL(),zmj=My(),Umj=BD(),Vmj=mD(),Xmj=gD(),Jmj=(A,j,e,t)=>{switch(j){case"===":return typeof A=="object"&&(A=A.version),typeof e=="object"&&(e=e.version),A===e;case"!==":return typeof A=="object"&&(A=A.version),typeof e=="object"&&(e=e.version),A!==e;case"":case"=":case"==":return Nmj(A,e,t);case"!=":return Lmj(A,e,t);case">":return zmj(A,e,t);case">=":return Umj(A,e,t);case"<":return Vmj(A,e,t);case"<=":return Xmj(A,e,t);default:throw new TypeError(`Invalid operator: ${j}`)}};zqA.exports=Jmj});var VqA=RA((r1e,UqA)=>{"use strict";var Wmj=es(),Qmj=Vh(),{safeRe:hD,t:qD}=YG(),Ymj=(A,j)=>{if(A instanceof Wmj)return A;if(typeof A=="number"&&(A=String(A)),typeof A!="string")return null;j=j||{};let e=null;if(!j.rtl)e=A.match(j.includePrerelease?hD[qD.COERCEFULL]:hD[qD.COERCE]);else{let i=j.includePrerelease?hD[qD.COERCERTLFULL]:hD[qD.COERCERTL],s;for(;(s=i.exec(A))&&(!e||e.index+e[0].length!==A.length);)(!e||s.index+s[0].length!==e.index+e[0].length)&&(e=s),i.lastIndex=s.index+s[1].length+s[2].length;i.lastIndex=-1}if(e===null)return null;let t=e[2],r=e[3]||"0",a=e[4]||"0",n=j.includePrerelease&&e[5]?`-${e[5]}`:"",o=j.includePrerelease&&e[6]?`+${e[6]}`:"";return Qmj(`${t}.${r}.${a}${n}${o}`,j)};UqA.exports=Ymj});var JqA=RA((a1e,XqA)=>{"use strict";var TL=class{constructor(){this.max=1e3,this.map=new Map}get(j){let e=this.map.get(j);if(e!==void 0)return this.map.delete(j),this.map.set(j,e),e}delete(j){return this.map.delete(j)}set(j,e){if(!this.delete(j)&&e!==void 0){if(this.map.size>=this.max){let r=this.map.keys().next().value;this.delete(r)}this.map.set(j,e)}return this}};XqA.exports=TL});var ed=RA((n1e,ZqA)=>{"use strict";var Zmj=/\s+/g,CL=class A{constructor(j,e){if(e=jBj(e),j instanceof A)return j.loose===!!e.loose&&j.includePrerelease===!!e.includePrerelease?j:new A(j.raw,e);if(j instanceof _L)return this.raw=j.value,this.set=[[j]],this.formatted=void 0,this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=j.trim().replace(Zmj," "),this.set=this.raw.split("||").map(t=>this.parseRange(t.trim())).filter(t=>t.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let t=this.set[0];if(this.set=this.set.filter(r=>!QqA(r[0])),this.set.length===0)this.set=[t];else if(this.set.length>1){for(let r of this.set)if(r.length===1&&iBj(r[0])){this.set=[r];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let j=0;j<this.set.length;j++){j>0&&(this.formatted+="||");let e=this.set[j];for(let t=0;t<e.length;t++)t>0&&(this.formatted+=" "),this.formatted+=e[t].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(j){let t=((this.options.includePrerelease&&nBj)|(this.options.loose&&oBj))+":"+j,r=WqA.get(t);if(r)return r;let a=this.options.loose,n=a?ll[$s.HYPHENRANGELOOSE]:ll[$s.HYPHENRANGE];j=j.replace(n,BBj(this.options.includePrerelease)),D6("hyphen replace",j),j=j.replace(ll[$s.COMPARATORTRIM],tBj),D6("comparator trim",j),j=j.replace(ll[$s.TILDETRIM],rBj),D6("tilde trim",j),j=j.replace(ll[$s.CARETTRIM],aBj),D6("caret trim",j);let o=j.split(" ").map(c=>sBj(c,this.options)).join(" ").split(/\s+/).map(c=>mBj(c,this.options));a&&(o=o.filter(c=>(D6("loose invalid filter",c,this.options),!!c.match(ll[$s.COMPARATORLOOSE])))),D6("range list",o);let i=new Map,s=o.map(c=>new _L(c,this.options));for(let c of s){if(QqA(c))return[c];i.set(c.value,c)}i.size>1&&i.has("")&&i.delete("");let l=[...i.values()];return WqA.set(t,l),l}intersects(j,e){if(!(j instanceof A))throw new TypeError("a Range is required");return this.set.some(t=>YqA(t,e)&&j.set.some(r=>YqA(r,e)&&t.every(a=>r.every(n=>a.intersects(n,e)))))}test(j){if(!j)return!1;if(typeof j=="string")try{j=new eBj(j,this.options)}catch{return!1}for(let e=0;e<this.set.length;e++)if(gBj(this.set[e],j,this.options))return!0;return!1}};ZqA.exports=CL;var ABj=JqA(),WqA=new ABj,jBj=cD(),_L=Ky(),D6=Hy(),eBj=es(),{safeRe:ll,t:$s,comparatorTrimReplace:tBj,tildeTrimReplace:rBj,caretTrimReplace:aBj}=YG(),{FLAG_INCLUDE_PRERELEASE:nBj,FLAG_LOOSE:oBj}=Sy(),QqA=A=>A.value==="<0.0.0-0",iBj=A=>A.value==="",YqA=(A,j)=>{let e=!0,t=A.slice(),r=t.pop();for(;e&&t.length;)e=t.every(a=>r.intersects(a,j)),r=t.pop();return e},sBj=(A,j)=>(D6("comp",A,j),A=dBj(A,j),D6("caret",A),A=lBj(A,j),D6("tildes",A),A=uBj(A,j),D6("xrange",A),A=pBj(A,j),D6("stars",A),A),ws=A=>!A||A.toLowerCase()==="x"||A==="*",lBj=(A,j)=>A.trim().split(/\s+/).map(e=>cBj(e,j)).join(" "),cBj=(A,j)=>{let e=j.loose?ll[$s.TILDELOOSE]:ll[$s.TILDE];return A.replace(e,(t,r,a,n,o)=>{D6("tilde",A,t,r,a,n,o);let i;return ws(r)?i="":ws(a)?i=`>=${r}.0.0 <${+r+1}.0.0-0`:ws(n)?i=`>=${r}.${a}.0 <${r}.${+a+1}.0-0`:o?(D6("replaceTilde pr",o),i=`>=${r}.${a}.${n}-${o} <${r}.${+a+1}.0-0`):i=`>=${r}.${a}.${n} <${r}.${+a+1}.0-0`,D6("tilde return",i),i})},dBj=(A,j)=>A.trim().split(/\s+/).map(e=>kBj(e,j)).join(" "),kBj=(A,j)=>{D6("caret",A,j);let e=j.loose?ll[$s.CARETLOOSE]:ll[$s.CARET],t=j.includePrerelease?"-0":"";return A.replace(e,(r,a,n,o,i)=>{D6("caret",A,r,a,n,o,i);let s;return ws(a)?s="":ws(n)?s=`>=${a}.0.0${t} <${+a+1}.0.0-0`:ws(o)?a==="0"?s=`>=${a}.${n}.0${t} <${a}.${+n+1}.0-0`:s=`>=${a}.${n}.0${t} <${+a+1}.0.0-0`:i?(D6("replaceCaret pr",i),a==="0"?n==="0"?s=`>=${a}.${n}.${o}-${i} <${a}.${n}.${+o+1}-0`:s=`>=${a}.${n}.${o}-${i} <${a}.${+n+1}.0-0`:s=`>=${a}.${n}.${o}-${i} <${+a+1}.0.0-0`):(D6("no pr"),a==="0"?n==="0"?s=`>=${a}.${n}.${o}${t} <${a}.${n}.${+o+1}-0`:s=`>=${a}.${n}.${o}${t} <${a}.${+n+1}.0-0`:s=`>=${a}.${n}.${o} <${+a+1}.0.0-0`),D6("caret return",s),s})},uBj=(A,j)=>(D6("replaceXRanges",A,j),A.split(/\s+/).map(e=>EBj(e,j)).join(" ")),EBj=(A,j)=>{A=A.trim();let e=j.loose?ll[$s.XRANGELOOSE]:ll[$s.XRANGE];return A.replace(e,(t,r,a,n,o,i)=>{D6("xRange",A,t,r,a,n,o,i);let s=ws(a),l=s||ws(n),c=l||ws(o),k=c;return r==="="&&k&&(r=""),i=j.includePrerelease?"-0":"",s?r===">"||r==="<"?t="<0.0.0-0":t="*":r&&k?(l&&(n=0),o=0,r===">"?(r=">=",l?(a=+a+1,n=0,o=0):(n=+n+1,o=0)):r==="<="&&(r="<",l?a=+a+1:n=+n+1),r==="<"&&(i="-0"),t=`${r+a}.${n}.${o}${i}`):l?t=`>=${a}.0.0${i} <${+a+1}.0.0-0`:c&&(t=`>=${a}.${n}.0${i} <${a}.${+n+1}.0-0`),D6("xRange return",t),t})},pBj=(A,j)=>(D6("replaceStars",A,j),A.trim().replace(ll[$s.STAR],"")),mBj=(A,j)=>(D6("replaceGTE0",A,j),A.trim().replace(ll[j.includePrerelease?$s.GTE0PRE:$s.GTE0],"")),BBj=A=>(j,e,t,r,a,n,o,i,s,l,c,k)=>(ws(t)?e="":ws(r)?e=`>=${t}.0.0${A?"-0":""}`:ws(a)?e=`>=${t}.${r}.0${A?"-0":""}`:n?e=`>=${e}`:e=`>=${e}${A?"-0":""}`,ws(s)?i="":ws(l)?i=`<${+s+1}.0.0-0`:ws(c)?i=`<${s}.${+l+1}.0-0`:k?i=`<=${s}.${l}.${c}-${k}`:A?i=`<${s}.${l}.${+c+1}-0`:i=`<=${i}`,`${e} ${i}`.trim()),gBj=(A,j,e)=>{for(let t=0;t<A.length;t++)if(!A[t].test(j))return!1;if(j.prerelease.length&&!e.includePrerelease){for(let t=0;t<A.length;t++)if(D6(A[t].semver),A[t].semver!==_L.ANY&&A[t].semver.prerelease.length>0){let r=A[t].semver;if(r.major===j.major&&r.minor===j.minor&&r.patch===j.patch)return!0}return!1}return!0}});var Ky=RA((o1e,axA)=>{"use strict";var Ny=Symbol("SemVer ANY"),ML=class A{static get ANY(){return Ny}constructor(j,e){if(e=AxA(e),j instanceof A){if(j.loose===!!e.loose)return j;j=j.value}j=j.trim().split(/\s+/).join(" "),HL("comparator",j,e),this.options=e,this.loose=!!e.loose,this.parse(j),this.semver===Ny?this.value="":this.value=this.operator+this.semver.version,HL("comp",this)}parse(j){let e=this.options.loose?jxA[exA.COMPARATORLOOSE]:jxA[exA.COMPARATOR],t=j.match(e);if(!t)throw new TypeError(`Invalid comparator: ${j}`);this.operator=t[1]!==void 0?t[1]:"",this.operator==="="&&(this.operator=""),t[2]?this.semver=new txA(t[2],this.options.loose):this.semver=Ny}toString(){return this.value}test(j){if(HL("Comparator.test",j,this.options.loose),this.semver===Ny||j===Ny)return!0;if(typeof j=="string")try{j=new txA(j,this.options)}catch{return!1}return SL(j,this.operator,this.semver,this.options)}intersects(j,e){if(!(j instanceof A))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new rxA(j.value,e).test(this.value):j.operator===""?j.value===""?!0:new rxA(this.value,e).test(j.semver):(e=AxA(e),e.includePrerelease&&(this.value==="<0.0.0-0"||j.value==="<0.0.0-0")||!e.includePrerelease&&(this.value.startsWith("<0.0.0")||j.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&j.operator.startsWith(">")||this.operator.startsWith("<")&&j.operator.startsWith("<")||this.semver.version===j.semver.version&&this.operator.includes("=")&&j.operator.includes("=")||SL(this.semver,"<",j.semver,e)&&this.operator.startsWith(">")&&j.operator.startsWith("<")||SL(this.semver,">",j.semver,e)&&this.operator.startsWith("<")&&j.operator.startsWith(">")))}};axA.exports=ML;var AxA=cD(),{safeRe:jxA,t:exA}=YG(),SL=DL(),HL=Hy(),txA=es(),rxA=ed()});var Ly=RA((i1e,nxA)=>{"use strict";var hBj=ed(),qBj=(A,j,e)=>{try{j=new hBj(j,e)}catch{return!1}return j.test(A)};nxA.exports=qBj});var ixA=RA((s1e,oxA)=>{"use strict";var xBj=ed(),vBj=(A,j)=>new xBj(A,j).set.map(e=>e.map(t=>t.value).join(" ").trim().split(" "));oxA.exports=vBj});var lxA=RA((l1e,sxA)=>{"use strict";var GBj=es(),fBj=ed(),FBj=(A,j,e)=>{let t=null,r=null,a=null;try{a=new fBj(j,e)}catch{return null}return A.forEach(n=>{a.test(n)&&(!t||r.compare(n)===-1)&&(t=n,r=new GBj(t,e))}),t};sxA.exports=FBj});var dxA=RA((c1e,cxA)=>{"use strict";var bBj=es(),yBj=ed(),$Bj=(A,j,e)=>{let t=null,r=null,a=null;try{a=new yBj(j,e)}catch{return null}return A.forEach(n=>{a.test(n)&&(!t||r.compare(n)===1)&&(t=n,r=new bBj(t,e))}),t};cxA.exports=$Bj});var ExA=RA((d1e,uxA)=>{"use strict";var KL=es(),wBj=ed(),kxA=My(),IBj=(A,j)=>{A=new wBj(A,j);let e=new KL("0.0.0");if(A.test(e)||(e=new KL("0.0.0-0"),A.test(e)))return e;e=null;for(let t=0;t<A.set.length;++t){let r=A.set[t],a=null;r.forEach(n=>{let o=new KL(n.semver.version);switch(n.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!a||kxA(o,a))&&(a=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${n.operator}`)}}),a&&(!e||kxA(e,a))&&(e=a)}return e&&A.test(e)?e:null};uxA.exports=IBj});var mxA=RA((k1e,pxA)=>{"use strict";var PBj=ed(),OBj=(A,j)=>{try{return new PBj(A,j).range||"*"}catch{return null}};pxA.exports=OBj});var xD=RA((u1e,qxA)=>{"use strict";var RBj=es(),hxA=Ky(),{ANY:DBj}=hxA,TBj=ed(),CBj=Ly(),BxA=My(),gxA=mD(),_Bj=gD(),SBj=BD(),HBj=(A,j,e,t)=>{A=new RBj(A,t),j=new TBj(j,t);let r,a,n,o,i;switch(e){case">":r=BxA,a=_Bj,n=gxA,o=">",i=">=";break;case"<":r=gxA,a=SBj,n=BxA,o="<",i="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(CBj(A,j,t))return!1;for(let s=0;s<j.set.length;++s){let l=j.set[s],c=null,k=null;if(l.forEach(u=>{u.semver===DBj&&(u=new hxA(">=0.0.0")),c=c||u,k=k||u,r(u.semver,c.semver,t)?c=u:n(u.semver,k.semver,t)&&(k=u)}),c.operator===o||c.operator===i||(!k.operator||k.operator===o)&&a(A,k.semver))return!1;if(k.operator===i&&n(A,k.semver))return!1}return!0};qxA.exports=HBj});var vxA=RA((E1e,xxA)=>{"use strict";var MBj=xD(),KBj=(A,j,e)=>MBj(A,j,">",e);xxA.exports=KBj});var fxA=RA((p1e,GxA)=>{"use strict";var NBj=xD(),LBj=(A,j,e)=>NBj(A,j,"<",e);GxA.exports=LBj});var yxA=RA((m1e,bxA)=>{"use strict";var FxA=ed(),zBj=(A,j,e)=>(A=new FxA(A,e),j=new FxA(j,e),A.intersects(j,e));bxA.exports=zBj});var wxA=RA((B1e,$xA)=>{"use strict";var UBj=Ly(),VBj=jd();$xA.exports=(A,j,e)=>{let t=[],r=null,a=null,n=A.sort((l,c)=>VBj(l,c,e));for(let l of n)UBj(l,j,e)?(a=l,r||(r=l)):(a&&t.push([r,a]),a=null,r=null);r&&t.push([r,null]);let o=[];for(let[l,c]of t)l===c?o.push(l):!c&&l===n[0]?o.push("*"):c?l===n[0]?o.push(`<=${c}`):o.push(`${l} - ${c}`):o.push(`>=${l}`);let i=o.join(" || "),s=typeof j.raw=="string"?j.raw:String(j);return i.length<s.length?i:j}});var TxA=RA((g1e,DxA)=>{"use strict";var IxA=ed(),LL=Ky(),{ANY:NL}=LL,zy=Ly(),zL=jd(),XBj=(A,j,e={})=>{if(A===j)return!0;A=new IxA(A,e),j=new IxA(j,e);let t=!1;A:for(let r of A.set){for(let a of j.set){let n=WBj(r,a,e);if(t=t||n!==null,n)continue A}if(t)return!1}return!0},JBj=[new LL(">=0.0.0-0")],PxA=[new LL(">=0.0.0")],WBj=(A,j,e)=>{if(A===j)return!0;if(A.length===1&&A[0].semver===NL){if(j.length===1&&j[0].semver===NL)return!0;e.includePrerelease?A=JBj:A=PxA}if(j.length===1&&j[0].semver===NL){if(e.includePrerelease)return!0;j=PxA}let t=new Set,r,a;for(let u of A)u.operator===">"||u.operator===">="?r=OxA(r,u,e):u.operator==="<"||u.operator==="<="?a=RxA(a,u,e):t.add(u.semver);if(t.size>1)return null;let n;if(r&&a){if(n=zL(r.semver,a.semver,e),n>0)return null;if(n===0&&(r.operator!==">="||a.operator!=="<="))return null}for(let u of t){if(r&&!zy(u,String(r),e)||a&&!zy(u,String(a),e))return null;for(let m of j)if(!zy(u,String(m),e))return!1;return!0}let o,i,s,l,c=a&&!e.includePrerelease&&a.semver.prerelease.length?a.semver:!1,k=r&&!e.includePrerelease&&r.semver.prerelease.length?r.semver:!1;c&&c.prerelease.length===1&&a.operator==="<"&&c.prerelease[0]===0&&(c=!1);for(let u of j){if(l=l||u.operator===">"||u.operator===">=",s=s||u.operator==="<"||u.operator==="<=",r){if(k&&u.semver.prerelease&&u.semver.prerelease.length&&u.semver.major===k.major&&u.semver.minor===k.minor&&u.semver.patch===k.patch&&(k=!1),u.operator===">"||u.operator===">="){if(o=OxA(r,u,e),o===u&&o!==r)return!1}else if(r.operator===">="&&!zy(r.semver,String(u),e))return!1}if(a){if(c&&u.semver.prerelease&&u.semver.prerelease.length&&u.semver.major===c.major&&u.semver.minor===c.minor&&u.semver.patch===c.patch&&(c=!1),u.operator==="<"||u.operator==="<="){if(i=RxA(a,u,e),i===u&&i!==a)return!1}else if(a.operator==="<="&&!zy(a.semver,String(u),e))return!1}if(!u.operator&&(a||r)&&n!==0)return!1}return!(r&&s&&!a&&n!==0||a&&l&&!r&&n!==0||k||c)},OxA=(A,j,e)=>{if(!A)return j;let t=zL(A.semver,j.semver,e);return t>0?A:t<0||j.operator===">"&&A.operator===">="?j:A},RxA=(A,j,e)=>{if(!A)return j;let t=zL(A.semver,j.semver,e);return t<0?A:t>0||j.operator==="<"&&A.operator==="<="?j:A};DxA.exports=XBj});var vD=RA((h1e,SxA)=>{"use strict";var UL=YG(),CxA=Sy(),QBj=es(),_xA=IL(),YBj=Vh(),ZBj=lqA(),Agj=dqA(),jgj=EqA(),egj=BqA(),tgj=hqA(),rgj=xqA(),agj=GqA(),ngj=FqA(),ogj=jd(),igj=wqA(),sgj=PqA(),lgj=pD(),cgj=TqA(),dgj=_qA(),kgj=My(),ugj=mD(),Egj=OL(),pgj=RL(),mgj=BD(),Bgj=gD(),ggj=DL(),hgj=VqA(),qgj=Ky(),xgj=ed(),vgj=Ly(),Ggj=ixA(),fgj=lxA(),Fgj=dxA(),bgj=ExA(),ygj=mxA(),$gj=xD(),wgj=vxA(),Igj=fxA(),Pgj=yxA(),Ogj=wxA(),Rgj=TxA();SxA.exports={parse:YBj,valid:ZBj,clean:Agj,inc:jgj,diff:egj,major:tgj,minor:rgj,patch:agj,prerelease:ngj,compare:ogj,rcompare:igj,compareLoose:sgj,compareBuild:lgj,sort:cgj,rsort:dgj,gt:kgj,lt:ugj,eq:Egj,neq:pgj,gte:mgj,lte:Bgj,cmp:ggj,coerce:hgj,Comparator:qgj,Range:xgj,satisfies:vgj,toComparators:Ggj,maxSatisfying:fgj,minSatisfying:Fgj,minVersion:bgj,validRange:ygj,outside:$gj,gtr:wgj,ltr:Igj,intersects:Pgj,simplifyRange:Ogj,subset:Rgj,SemVer:QBj,re:UL.re,src:UL.src,tokens:UL.t,SEMVER_SPEC_VERSION:CxA.SEMVER_SPEC_VERSION,RELEASE_TYPES:CxA.RELEASE_TYPES,compareIdentifiers:_xA.compareIdentifiers,rcompareIdentifiers:_xA.rcompareIdentifiers}});var Wo=RA((QL,jf)=>{(function(A,j){typeof QL=="object"&&typeof jf<"u"?jf.exports=j():typeof define=="function"&&define.amd?define(j):A.moment=j()})(QL,function(){"use strict";var A;function j(){return A.apply(null,arguments)}function e(d){A=d}function t(d){return d instanceof Array||Object.prototype.toString.call(d)==="[object Array]"}function r(d){return d!=null&&Object.prototype.toString.call(d)==="[object Object]"}function a(d,E){return Object.prototype.hasOwnProperty.call(d,E)}function n(d){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(d).length===0;var E;for(E in d)if(a(d,E))return!1;return!0}function o(d){return d===void 0}function i(d){return typeof d=="number"||Object.prototype.toString.call(d)==="[object Number]"}function s(d){return d instanceof Date||Object.prototype.toString.call(d)==="[object Date]"}function l(d,E){var g=[],v,_=d.length;for(v=0;v<_;++v)g.push(E(d[v],v));return g}function c(d,E){for(var g in E)a(E,g)&&(d[g]=E[g]);return a(E,"toString")&&(d.toString=E.toString),a(E,"valueOf")&&(d.valueOf=E.valueOf),d}function k(d,E,g,v){return ClA(d,E,g,v,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(d){return d._pf==null&&(d._pf=u()),d._pf}var F;Array.prototype.some?F=Array.prototype.some:F=function(d){var E=Object(this),g=E.length>>>0,v;for(v=0;v<g;v++)if(v in E&&d.call(this,E[v],v,E))return!0;return!1};function S(d){var E=null,g=!1,v=d._d&&!isNaN(d._d.getTime());if(v&&(E=m(d),g=F.call(E.parsedDateParts,function(_){return _!=null}),v=E.overflow<0&&!E.empty&&!E.invalidEra&&!E.invalidMonth&&!E.invalidWeekday&&!E.weekdayMismatch&&!E.nullInput&&!E.invalidFormat&&!E.userInvalidated&&(!E.meridiem||E.meridiem&&g),d._strict&&(v=v&&E.charsLeftOver===0&&E.unusedTokens.length===0&&E.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(d))d._isValid=v;else return v;return d._isValid}function G(d){var E=k(NaN);return d!=null?c(m(E),d):m(E).userInvalidated=!0,E}var x=j.momentProperties=[],R=!1;function P(d,E){var g,v,_,sA=x.length;if(o(E._isAMomentObject)||(d._isAMomentObject=E._isAMomentObject),o(E._i)||(d._i=E._i),o(E._f)||(d._f=E._f),o(E._l)||(d._l=E._l),o(E._strict)||(d._strict=E._strict),o(E._tzm)||(d._tzm=E._tzm),o(E._isUTC)||(d._isUTC=E._isUTC),o(E._offset)||(d._offset=E._offset),o(E._pf)||(d._pf=m(E)),o(E._locale)||(d._locale=E._locale),sA>0)for(g=0;g<sA;g++)v=x[g],_=E[v],o(_)||(d[v]=_);return d}function D(d){P(this,d),this._d=new Date(d._d!=null?d._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),R===!1&&(R=!0,j.updateOffset(this),R=!1)}function y(d){return d instanceof D||d!=null&&d._isAMomentObject!=null}function h(d){j.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+d)}function O(d,E){var g=!0;return c(function(){if(j.deprecationHandler!=null&&j.deprecationHandler(null,d),g){var v=[],_,sA,zA,we=arguments.length;for(sA=0;sA<we;sA++){if(_="",typeof arguments[sA]=="object"){_+=`
[`+sA+"] ";for(zA in arguments[0])a(arguments[0],zA)&&(_+=zA+": "+arguments[0][zA]+", ");_=_.slice(0,-2)}else _=arguments[sA];v.push(_)}h(d+`
Arguments: `+Array.prototype.slice.call(v).join("")+`
`+new Error().stack),g=!1}return E.apply(this,arguments)},E)}var Q={};function AA(d,E){j.deprecationHandler!=null&&j.deprecationHandler(d,E),Q[d]||(h(E),Q[d]=!0)}j.suppressDeprecationWarnings=!1,j.deprecationHandler=null;function nA(d){return typeof Function<"u"&&d instanceof Function||Object.prototype.toString.call(d)==="[object Function]"}function bA(d){var E,g;for(g in d)a(d,g)&&(E=d[g],nA(E)?this[g]=E:this["_"+g]=E);this._config=d,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function XA(d,E){var g=c({},d),v;for(v in E)a(E,v)&&(r(d[v])&&r(E[v])?(g[v]={},c(g[v],d[v]),c(g[v],E[v])):E[v]!=null?g[v]=E[v]:delete g[v]);for(v in d)a(d,v)&&!a(E,v)&&r(d[v])&&(g[v]=c({},g[v]));return g}function dj(d){d!=null&&this.set(d)}var yA;Object.keys?yA=Object.keys:yA=function(d){var E,g=[];for(E in d)a(d,E)&&g.push(E);return g};var tj={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function LA(d,E,g){var v=this._calendar[d]||this._calendar.sameElse;return nA(v)?v.call(E,g):v}function Qj(d,E,g){var v=""+Math.abs(d),_=E-v.length,sA=d>=0;return(sA?g?"+":"":"-")+Math.pow(10,Math.max(0,_)).toString().substr(1)+v}var Oj=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ej=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Yj={},Tj={};function mj(d,E,g,v){var _=v;typeof v=="string"&&(_=function(){return this[v]()}),d&&(Tj[d]=_),E&&(Tj[E[0]]=function(){return Qj(_.apply(this,arguments),E[1],E[2])}),g&&(Tj[g]=function(){return this.localeData().ordinal(_.apply(this,arguments),d)})}function qj(d){return d.match(/\[[\s\S]/)?d.replace(/^\[|\]$/g,""):d.replace(/\\/g,"")}function _e(d){var E=d.match(Oj),g,v;for(g=0,v=E.length;g<v;g++)Tj[E[g]]?E[g]=Tj[E[g]]:E[g]=qj(E[g]);return function(_){var sA="",zA;for(zA=0;zA<v;zA++)sA+=nA(E[zA])?E[zA].call(_,d):E[zA];return sA}}function Tt(d,E){return d.isValid()?(E=Cj(E,d.localeData()),Yj[E]=Yj[E]||_e(E),Yj[E](d)):d.localeData().invalidDate()}function Cj(d,E){var g=5;function v(_){return E.longDateFormat(_)||_}for(Ej.lastIndex=0;g>=0&&Ej.test(d);)d=d.replace(Ej,v),Ej.lastIndex=0,g-=1;return d}var xt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function At(d){var E=this._longDateFormat[d],g=this._longDateFormat[d.toUpperCase()];return E||!g?E:(this._longDateFormat[d]=g.match(Oj).map(function(v){return v==="MMMM"||v==="MM"||v==="DD"||v==="dddd"?v.slice(1):v}).join(""),this._longDateFormat[d])}var Ce="Invalid date";function fe(){return this._invalidDate}var ir="%d",Ar=/\d{1,2}/;function Pt(d){return this._ordinal.replace("%d",d)}var Jr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Kr(d,E,g,v){var _=this._relativeTime[g];return nA(_)?_(d,E,g,v):_.replace(/%d/i,d)}function _r(d,E){var g=this._relativeTime[d>0?"future":"past"];return nA(g)?g(E):g.replace(/%s/i,E)}var ca={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ct(d){return typeof d=="string"?ca[d]||ca[d.toLowerCase()]:void 0}function ut(d){var E={},g,v;for(v in d)a(d,v)&&(g=ct(v),g&&(E[g]=d[v]));return E}var hr={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function o6(d){var E=[],g;for(g in d)a(d,g)&&E.push({unit:g,priority:hr[g]});return E.sort(function(v,_){return v.priority-_.priority}),E}var se=/\d/,iA=/\d\d/,hA=/\d{3}/,HA=/\d{4}/,fj=/[+-]?\d{6}/,xj=/\d\d?/,ye=/\d\d\d\d?/,Bj=/\d\d\d\d\d\d?/,cA=/\d{1,3}/,rA=/\d{1,4}/,wA=/[+-]?\d{1,6}/,Xj=/\d+/,fr=/[+-]?\d+/,Gn=/Z|[+-]\d\d:?\d\d/gi,Bi=/Z|[+-]\d\d(?::?\d\d)?/gi,na=/[+-]?\d+(\.\d{1,3})?/,zn=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Un=/^[1-9]\d?/,zE=/^([1-9]\d|\d)/,Wd;Wd={};function le(d,E,g){Wd[d]=nA(E)?E:function(v,_){return v&&g?g:E}}function tl(d,E){return a(Wd,d)?Wd[d](E._strict,E._locale):new RegExp(Kc(d))}function Kc(d){return gi(d.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(E,g,v,_,sA){return g||v||_||sA}))}function gi(d){return d.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Vn(d){return d<0?Math.ceil(d)||0:Math.floor(d)}function jr(d){var E=+d,g=0;return E!==0&&isFinite(E)&&(g=Vn(E)),g}var B7={};function St(d,E){var g,v=E,_;for(typeof d=="string"&&(d=[d]),i(E)&&(v=function(sA,zA){zA[E]=jr(sA)}),_=d.length,g=0;g<_;g++)B7[d[g]]=v}function Yl(d,E){St(d,function(g,v,_,sA){_._w=_._w||{},E(g,_._w,_,sA)})}function f(d,E,g){E!=null&&a(B7,d)&&B7[d](E,g._a,g,d)}function C(d){return d%4===0&&d%100!==0||d%400===0}var T=0,B=1,U=2,uA=3,GA=4,jj=5,Fj=6,w=7,K=8;mj("Y",0,0,function(){var d=this.year();return d<=9999?Qj(d,4):"+"+d}),mj(0,["YY",2],0,function(){return this.year()%100}),mj(0,["YYYY",4],0,"year"),mj(0,["YYYYY",5],0,"year"),mj(0,["YYYYYY",6,!0],0,"year"),le("Y",fr),le("YY",xj,iA),le("YYYY",rA,HA),le("YYYYY",wA,fj),le("YYYYYY",wA,fj),St(["YYYYY","YYYYYY"],T),St("YYYY",function(d,E){E[T]=d.length===2?j.parseTwoDigitYear(d):jr(d)}),St("YY",function(d,E){E[T]=j.parseTwoDigitYear(d)}),St("Y",function(d,E){E[T]=parseInt(d,10)});function Y(d){return C(d)?366:365}j.parseTwoDigitYear=function(d){return jr(d)+(jr(d)>68?1900:2e3)};var N=gA("FullYear",!0);function dA(){return C(this.year())}function gA(d,E){return function(g){return g!=null?(BA(this,d,g),j.updateOffset(this,E),this):fA(this,d)}}function fA(d,E){if(!d.isValid())return NaN;var g=d._d,v=d._isUTC;switch(E){case"Milliseconds":return v?g.getUTCMilliseconds():g.getMilliseconds();case"Seconds":return v?g.getUTCSeconds():g.getSeconds();case"Minutes":return v?g.getUTCMinutes():g.getMinutes();case"Hours":return v?g.getUTCHours():g.getHours();case"Date":return v?g.getUTCDate():g.getDate();case"Day":return v?g.getUTCDay():g.getDay();case"Month":return v?g.getUTCMonth():g.getMonth();case"FullYear":return v?g.getUTCFullYear():g.getFullYear();default:return NaN}}function BA(d,E,g){var v,_,sA,zA,we;if(!(!d.isValid()||isNaN(g))){switch(v=d._d,_=d._isUTC,E){case"Milliseconds":return void(_?v.setUTCMilliseconds(g):v.setMilliseconds(g));case"Seconds":return void(_?v.setUTCSeconds(g):v.setSeconds(g));case"Minutes":return void(_?v.setUTCMinutes(g):v.setMinutes(g));case"Hours":return void(_?v.setUTCHours(g):v.setHours(g));case"Date":return void(_?v.setUTCDate(g):v.setDate(g));case"FullYear":break;default:return}sA=g,zA=d.month(),we=d.date(),we=we===29&&zA===1&&!C(sA)?28:we,_?v.setUTCFullYear(sA,zA,we):v.setFullYear(sA,zA,we)}}function UA(d){return d=ct(d),nA(this[d])?this[d]():this}function hj(d,E){if(typeof d=="object"){d=ut(d);var g=o6(d),v,_=g.length;for(v=0;v<_;v++)this[g[v].unit](d[g[v].unit])}else if(d=ct(d),nA(this[d]))return this[d](E);return this}function Zj(d,E){return(d%E+E)%E}var JA;Array.prototype.indexOf?JA=Array.prototype.indexOf:JA=function(d){var E;for(E=0;E<this.length;++E)if(this[E]===d)return E;return-1};function Hj(d,E){if(isNaN(d)||isNaN(E))return NaN;var g=Zj(E,12);return d+=(E-g)/12,g===1?C(d)?29:28:31-g%7%2}mj("M",["MM",2],"Mo",function(){return this.month()+1}),mj("MMM",0,0,function(d){return this.localeData().monthsShort(this,d)}),mj("MMMM",0,0,function(d){return this.localeData().months(this,d)}),le("M",xj,Un),le("MM",xj,iA),le("MMM",function(d,E){return E.monthsShortRegex(d)}),le("MMMM",function(d,E){return E.monthsRegex(d)}),St(["M","MM"],function(d,E){E[B]=jr(d)-1}),St(["MMM","MMMM"],function(d,E,g,v){var _=g._locale.monthsParse(d,v,g._strict);_!=null?E[B]=_:m(g).invalidMonth=d});var Jj="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ne=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,$j=zn,MA=zn;function KA(d,E){return d?t(this._months)?this._months[d.month()]:this._months[(this._months.isFormat||ne).test(E)?"format":"standalone"][d.month()]:t(this._months)?this._months:this._months.standalone}function bj(d,E){return d?t(this._monthsShort)?this._monthsShort[d.month()]:this._monthsShort[ne.test(E)?"format":"standalone"][d.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function oj(d,E,g){var v,_,sA,zA=d.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],v=0;v<12;++v)sA=k([2e3,v]),this._shortMonthsParse[v]=this.monthsShort(sA,"").toLocaleLowerCase(),this._longMonthsParse[v]=this.months(sA,"").toLocaleLowerCase();return g?E==="MMM"?(_=JA.call(this._shortMonthsParse,zA),_!==-1?_:null):(_=JA.call(this._longMonthsParse,zA),_!==-1?_:null):E==="MMM"?(_=JA.call(this._shortMonthsParse,zA),_!==-1?_:(_=JA.call(this._longMonthsParse,zA),_!==-1?_:null)):(_=JA.call(this._longMonthsParse,zA),_!==-1?_:(_=JA.call(this._shortMonthsParse,zA),_!==-1?_:null))}function YA(d,E,g){var v,_,sA;if(this._monthsParseExact)return oj.call(this,d,E,g);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),v=0;v<12;v++){if(_=k([2e3,v]),g&&!this._longMonthsParse[v]&&(this._longMonthsParse[v]=new RegExp("^"+this.months(_,"").replace(".","")+"$","i"),this._shortMonthsParse[v]=new RegExp("^"+this.monthsShort(_,"").replace(".","")+"$","i")),!g&&!this._monthsParse[v]&&(sA="^"+this.months(_,"")+"|^"+this.monthsShort(_,""),this._monthsParse[v]=new RegExp(sA.replace(".",""),"i")),g&&E==="MMMM"&&this._longMonthsParse[v].test(d))return v;if(g&&E==="MMM"&&this._shortMonthsParse[v].test(d))return v;if(!g&&this._monthsParse[v].test(d))return v}}function kj(d,E){if(!d.isValid())return d;if(typeof E=="string"){if(/^\d+$/.test(E))E=jr(E);else if(E=d.localeData().monthsParse(E),!i(E))return d}var g=E,v=d.date();return v=v<29?v:Math.min(v,Hj(d.year(),g)),d._isUTC?d._d.setUTCMonth(g,v):d._d.setMonth(g,v),d}function at(d){return d!=null?(kj(this,d),j.updateOffset(this,!0),this):fA(this,"Month")}function Ht(){return Hj(this.year(),this.month())}function dt(d){return this._monthsParseExact?(a(this,"_monthsRegex")||eA.call(this),d?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=$j),this._monthsShortStrictRegex&&d?this._monthsShortStrictRegex:this._monthsShortRegex)}function Mt(d){return this._monthsParseExact?(a(this,"_monthsRegex")||eA.call(this),d?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=MA),this._monthsStrictRegex&&d?this._monthsStrictRegex:this._monthsRegex)}function eA(){function d(Ut,Qr){return Qr.length-Ut.length}var E=[],g=[],v=[],_,sA,zA,we;for(_=0;_<12;_++)sA=k([2e3,_]),zA=gi(this.monthsShort(sA,"")),we=gi(this.months(sA,"")),E.push(zA),g.push(we),v.push(we),v.push(zA);E.sort(d),g.sort(d),v.sort(d),this._monthsRegex=new RegExp("^("+v.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+E.join("|")+")","i")}function sr(d,E,g,v,_,sA,zA){var we;return d<100&&d>=0?(we=new Date(d+400,E,g,v,_,sA,zA),isFinite(we.getFullYear())&&we.setFullYear(d)):we=new Date(d,E,g,v,_,sA,zA),we}function qr(d){var E,g;return d<100&&d>=0?(g=Array.prototype.slice.call(arguments),g[0]=d+400,E=new Date(Date.UTC.apply(null,g)),isFinite(E.getUTCFullYear())&&E.setUTCFullYear(d)):E=new Date(Date.UTC.apply(null,arguments)),E}function kr(d,E,g){var v=7+E-g,_=(7+qr(d,0,v).getUTCDay()-E)%7;return-_+v-1}function Kt(d,E,g,v,_){var sA=(7+g-v)%7,zA=kr(d,v,_),we=1+7*(E-1)+sA+zA,Ut,Qr;return we<=0?(Ut=d-1,Qr=Y(Ut)+we):we>Y(d)?(Ut=d+1,Qr=we-Y(d)):(Ut=d,Qr=we),{year:Ut,dayOfYear:Qr}}function ur(d,E,g){var v=kr(d.year(),E,g),_=Math.floor((d.dayOfYear()-v-1)/7)+1,sA,zA;return _<1?(zA=d.year()-1,sA=_+zt(zA,E,g)):_>zt(d.year(),E,g)?(sA=_-zt(d.year(),E,g),zA=d.year()+1):(zA=d.year(),sA=_),{week:sA,year:zA}}function zt(d,E,g){var v=kr(d,E,g),_=kr(d+1,E,g);return(Y(d)-v+_)/7}mj("w",["ww",2],"wo","week"),mj("W",["WW",2],"Wo","isoWeek"),le("w",xj,Un),le("ww",xj,iA),le("W",xj,Un),le("WW",xj,iA),Yl(["w","ww","W","WW"],function(d,E,g,v){E[v.substr(0,1)]=jr(d)});function I6(d){return ur(d,this._week.dow,this._week.doy).week}var Wr={dow:0,doy:6};function b(){return this._week.dow}function I(){return this._week.doy}function M(d){var E=this.localeData().week(this);return d==null?E:this.add((d-E)*7,"d")}function lA(d){var E=ur(this,1,4).week;return d==null?E:this.add((d-E)*7,"d")}mj("d",0,"do","day"),mj("dd",0,0,function(d){return this.localeData().weekdaysMin(this,d)}),mj("ddd",0,0,function(d){return this.localeData().weekdaysShort(this,d)}),mj("dddd",0,0,function(d){return this.localeData().weekdays(this,d)}),mj("e",0,0,"weekday"),mj("E",0,0,"isoWeekday"),le("d",xj),le("e",xj),le("E",xj),le("dd",function(d,E){return E.weekdaysMinRegex(d)}),le("ddd",function(d,E){return E.weekdaysShortRegex(d)}),le("dddd",function(d,E){return E.weekdaysRegex(d)}),Yl(["dd","ddd","dddd"],function(d,E,g,v){var _=g._locale.weekdaysParse(d,v,g._strict);_!=null?E.d=_:m(g).invalidWeekday=d}),Yl(["d","e","E"],function(d,E,g,v){E[v]=jr(d)});function QA(d,E){return typeof d!="string"?d:isNaN(d)?(d=E.weekdaysParse(d),typeof d=="number"?d:null):parseInt(d,10)}function uj(d,E){return typeof d=="string"?E.weekdaysParse(d)%7||7:isNaN(d)?null:d}function Mj(d,E){return d.slice(E,7).concat(d.slice(0,E))}var Fe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ua="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),so="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),rl=zn,fs=zn,Qd=zn;function Jv(d,E){var g=t(this._weekdays)?this._weekdays:this._weekdays[d&&d!==!0&&this._weekdays.isFormat.test(E)?"format":"standalone"];return d===!0?Mj(g,this._week.dow):d?g[d.day()]:g}function Zl(d){return d===!0?Mj(this._weekdaysShort,this._week.dow):d?this._weekdaysShort[d.day()]:this._weekdaysShort}function Ac(d){return d===!0?Mj(this._weekdaysMin,this._week.dow):d?this._weekdaysMin[d.day()]:this._weekdaysMin}function Wv(d,E,g){var v,_,sA,zA=d.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],v=0;v<7;++v)sA=k([2e3,1]).day(v),this._minWeekdaysParse[v]=this.weekdaysMin(sA,"").toLocaleLowerCase(),this._shortWeekdaysParse[v]=this.weekdaysShort(sA,"").toLocaleLowerCase(),this._weekdaysParse[v]=this.weekdays(sA,"").toLocaleLowerCase();return g?E==="dddd"?(_=JA.call(this._weekdaysParse,zA),_!==-1?_:null):E==="ddd"?(_=JA.call(this._shortWeekdaysParse,zA),_!==-1?_:null):(_=JA.call(this._minWeekdaysParse,zA),_!==-1?_:null):E==="dddd"?(_=JA.call(this._weekdaysParse,zA),_!==-1||(_=JA.call(this._shortWeekdaysParse,zA),_!==-1)?_:(_=JA.call(this._minWeekdaysParse,zA),_!==-1?_:null)):E==="ddd"?(_=JA.call(this._shortWeekdaysParse,zA),_!==-1||(_=JA.call(this._weekdaysParse,zA),_!==-1)?_:(_=JA.call(this._minWeekdaysParse,zA),_!==-1?_:null)):(_=JA.call(this._minWeekdaysParse,zA),_!==-1||(_=JA.call(this._weekdaysParse,zA),_!==-1)?_:(_=JA.call(this._shortWeekdaysParse,zA),_!==-1?_:null))}function g7(d,E,g){var v,_,sA;if(this._weekdaysParseExact)return Wv.call(this,d,E,g);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),v=0;v<7;v++){if(_=k([2e3,1]).day(v),g&&!this._fullWeekdaysParse[v]&&(this._fullWeekdaysParse[v]=new RegExp("^"+this.weekdays(_,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[v]=new RegExp("^"+this.weekdaysShort(_,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[v]=new RegExp("^"+this.weekdaysMin(_,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[v]||(sA="^"+this.weekdays(_,"")+"|^"+this.weekdaysShort(_,"")+"|^"+this.weekdaysMin(_,""),this._weekdaysParse[v]=new RegExp(sA.replace(".",""),"i")),g&&E==="dddd"&&this._fullWeekdaysParse[v].test(d))return v;if(g&&E==="ddd"&&this._shortWeekdaysParse[v].test(d))return v;if(g&&E==="dd"&&this._minWeekdaysParse[v].test(d))return v;if(!g&&this._weekdaysParse[v].test(d))return v}}function X0(d){if(!this.isValid())return d!=null?this:NaN;var E=fA(this,"Day");return d!=null?(d=QA(d,this.localeData()),this.add(d-E,"d")):E}function DAj(d){if(!this.isValid())return d!=null?this:NaN;var E=(this.day()+7-this.localeData()._week.dow)%7;return d==null?E:this.add(d-E,"d")}function TAj(d){if(!this.isValid())return d!=null?this:NaN;if(d!=null){var E=uj(d,this.localeData());return this.day(this.day()%7?E:E-7)}else return this.day()||7}function CAj(d){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||c2.call(this),d?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=rl),this._weekdaysStrictRegex&&d?this._weekdaysStrictRegex:this._weekdaysRegex)}function _Aj(d){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||c2.call(this),d?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=fs),this._weekdaysShortStrictRegex&&d?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function SAj(d){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||c2.call(this),d?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qd),this._weekdaysMinStrictRegex&&d?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function c2(){function d(Fs,WE){return WE.length-Fs.length}var E=[],g=[],v=[],_=[],sA,zA,we,Ut,Qr;for(sA=0;sA<7;sA++)zA=k([2e3,1]).day(sA),we=gi(this.weekdaysMin(zA,"")),Ut=gi(this.weekdaysShort(zA,"")),Qr=gi(this.weekdays(zA,"")),E.push(we),g.push(Ut),v.push(Qr),_.push(we),_.push(Ut),_.push(Qr);E.sort(d),g.sort(d),v.sort(d),_.sort(d),this._weekdaysRegex=new RegExp("^("+_.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+v.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+g.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+E.join("|")+")","i")}function d2(){return this.hours()%12||12}function HAj(){return this.hours()||24}mj("H",["HH",2],0,"hour"),mj("h",["hh",2],0,d2),mj("k",["kk",2],0,HAj),mj("hmm",0,0,function(){return""+d2.apply(this)+Qj(this.minutes(),2)}),mj("hmmss",0,0,function(){return""+d2.apply(this)+Qj(this.minutes(),2)+Qj(this.seconds(),2)}),mj("Hmm",0,0,function(){return""+this.hours()+Qj(this.minutes(),2)}),mj("Hmmss",0,0,function(){return""+this.hours()+Qj(this.minutes(),2)+Qj(this.seconds(),2)});function wlA(d,E){mj(d,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),E)})}wlA("a",!0),wlA("A",!1);function IlA(d,E){return E._meridiemParse}le("a",IlA),le("A",IlA),le("H",xj,zE),le("h",xj,Un),le("k",xj,Un),le("HH",xj,iA),le("hh",xj,iA),le("kk",xj,iA),le("hmm",ye),le("hmmss",Bj),le("Hmm",ye),le("Hmmss",Bj),St(["H","HH"],uA),St(["k","kk"],function(d,E,g){var v=jr(d);E[uA]=v===24?0:v}),St(["a","A"],function(d,E,g){g._isPm=g._locale.isPM(d),g._meridiem=d}),St(["h","hh"],function(d,E,g){E[uA]=jr(d),m(g).bigHour=!0}),St("hmm",function(d,E,g){var v=d.length-2;E[uA]=jr(d.substr(0,v)),E[GA]=jr(d.substr(v)),m(g).bigHour=!0}),St("hmmss",function(d,E,g){var v=d.length-4,_=d.length-2;E[uA]=jr(d.substr(0,v)),E[GA]=jr(d.substr(v,2)),E[jj]=jr(d.substr(_)),m(g).bigHour=!0}),St("Hmm",function(d,E,g){var v=d.length-2;E[uA]=jr(d.substr(0,v)),E[GA]=jr(d.substr(v))}),St("Hmmss",function(d,E,g){var v=d.length-4,_=d.length-2;E[uA]=jr(d.substr(0,v)),E[GA]=jr(d.substr(v,2)),E[jj]=jr(d.substr(_))});function MAj(d){return(d+"").toLowerCase().charAt(0)==="p"}var KAj=/[ap]\.?m?\.?/i,NAj=gA("Hours",!0);function LAj(d,E,g){return d>11?g?"pm":"PM":g?"am":"AM"}var PlA={calendar:tj,longDateFormat:xt,invalidDate:Ce,ordinal:ir,dayOfMonthOrdinalParse:Ar,relativeTime:Jr,months:Jj,monthsShort:ce,week:Wr,weekdays:Fe,weekdaysMin:so,weekdaysShort:Ua,meridiemParse:KAj},V6={},J0={},W0;function zAj(d,E){var g,v=Math.min(d.length,E.length);for(g=0;g<v;g+=1)if(d[g]!==E[g])return g;return v}function OlA(d){return d&&d.toLowerCase().replace("_","-")}function UAj(d){for(var E=0,g,v,_,sA;E<d.length;){for(sA=OlA(d[E]).split("-"),g=sA.length,v=OlA(d[E+1]),v=v?v.split("-"):null;g>0;){if(_=pO(sA.slice(0,g).join("-")),_)return _;if(v&&v.length>=g&&zAj(sA,v)>=g-1)break;g--}E++}return W0}function VAj(d){return!!(d&&d.match("^[^/\\\\]*$"))}function pO(d){var E=null,g;if(V6[d]===void 0&&typeof jf<"u"&&jf&&jf.exports&&VAj(d))try{E=W0._abbr,g=Y0,g("./locale/"+d),nB(E)}catch{V6[d]=null}return V6[d]}function nB(d,E){var g;return d&&(o(E)?g=UE(d):g=k2(d,E),g?W0=g:typeof console<"u"&&console.warn&&console.warn("Locale "+d+" not found. Did you forget to load it?")),W0._abbr}function k2(d,E){if(E!==null){var g,v=PlA;if(E.abbr=d,V6[d]!=null)AA("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),v=V6[d]._config;else if(E.parentLocale!=null)if(V6[E.parentLocale]!=null)v=V6[E.parentLocale]._config;else if(g=pO(E.parentLocale),g!=null)v=g._config;else return J0[E.parentLocale]||(J0[E.parentLocale]=[]),J0[E.parentLocale].push({name:d,config:E}),null;return V6[d]=new dj(XA(v,E)),J0[d]&&J0[d].forEach(function(_){k2(_.name,_.config)}),nB(d),V6[d]}else return delete V6[d],null}function XAj(d,E){if(E!=null){var g,v,_=PlA;V6[d]!=null&&V6[d].parentLocale!=null?V6[d].set(XA(V6[d]._config,E)):(v=pO(d),v!=null&&(_=v._config),E=XA(_,E),v==null&&(E.abbr=d),g=new dj(E),g.parentLocale=V6[d],V6[d]=g),nB(d)}else V6[d]!=null&&(V6[d].parentLocale!=null?(V6[d]=V6[d].parentLocale,d===nB()&&nB(d)):V6[d]!=null&&delete V6[d]);return V6[d]}function UE(d){var E;if(d&&d._locale&&d._locale._abbr&&(d=d._locale._abbr),!d)return W0;if(!t(d)){if(E=pO(d),E)return E;d=[d]}return UAj(d)}function JAj(){return yA(V6)}function u2(d){var E,g=d._a;return g&&m(d).overflow===-2&&(E=g[B]<0||g[B]>11?B:g[U]<1||g[U]>Hj(g[T],g[B])?U:g[uA]<0||g[uA]>24||g[uA]===24&&(g[GA]!==0||g[jj]!==0||g[Fj]!==0)?uA:g[GA]<0||g[GA]>59?GA:g[jj]<0||g[jj]>59?jj:g[Fj]<0||g[Fj]>999?Fj:-1,m(d)._overflowDayOfYear&&(E<T||E>U)&&(E=U),m(d)._overflowWeeks&&E===-1&&(E=w),m(d)._overflowWeekday&&E===-1&&(E=K),m(d).overflow=E),d}var WAj=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,QAj=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,YAj=/Z|[+-]\d\d(?::?\d\d)?/,mO=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],E2=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ZAj=/^\/?Date\((-?\d+)/i,Ajj=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,jjj={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function RlA(d){var E,g,v=d._i,_=WAj.exec(v)||QAj.exec(v),sA,zA,we,Ut,Qr=mO.length,Fs=E2.length;if(_){for(m(d).iso=!0,E=0,g=Qr;E<g;E++)if(mO[E][1].exec(_[1])){zA=mO[E][0],sA=mO[E][2]!==!1;break}if(zA==null){d._isValid=!1;return}if(_[3]){for(E=0,g=Fs;E<g;E++)if(E2[E][1].exec(_[3])){we=(_[2]||" ")+E2[E][0];break}if(we==null){d._isValid=!1;return}}if(!sA&&we!=null){d._isValid=!1;return}if(_[4])if(YAj.exec(_[4]))Ut="Z";else{d._isValid=!1;return}d._f=zA+(we||"")+(Ut||""),m2(d)}else d._isValid=!1}function ejj(d,E,g,v,_,sA){var zA=[tjj(d),ce.indexOf(E),parseInt(g,10),parseInt(v,10),parseInt(_,10)];return sA&&zA.push(parseInt(sA,10)),zA}function tjj(d){var E=parseInt(d,10);return E<=49?2e3+E:E<=999?1900+E:E}function rjj(d){return d.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ajj(d,E,g){if(d){var v=Ua.indexOf(d),_=new Date(E[0],E[1],E[2]).getDay();if(v!==_)return m(g).weekdayMismatch=!0,g._isValid=!1,!1}return!0}function njj(d,E,g){if(d)return jjj[d];if(E)return 0;var v=parseInt(g,10),_=v%100,sA=(v-_)/100;return sA*60+_}function DlA(d){var E=Ajj.exec(rjj(d._i)),g;if(E){if(g=ejj(E[4],E[3],E[2],E[5],E[6],E[7]),!ajj(E[1],g,d))return;d._a=g,d._tzm=njj(E[8],E[9],E[10]),d._d=qr.apply(null,d._a),d._d.setUTCMinutes(d._d.getUTCMinutes()-d._tzm),m(d).rfc2822=!0}else d._isValid=!1}function ojj(d){var E=ZAj.exec(d._i);if(E!==null){d._d=new Date(+E[1]);return}if(RlA(d),d._isValid===!1)delete d._isValid;else return;if(DlA(d),d._isValid===!1)delete d._isValid;else return;d._strict?d._isValid=!1:j.createFromInputFallback(d)}j.createFromInputFallback=O("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(d){d._d=new Date(d._i+(d._useUTC?" UTC":""))});function Qv(d,E,g){return d??E??g}function ijj(d){var E=new Date(j.now());return d._useUTC?[E.getUTCFullYear(),E.getUTCMonth(),E.getUTCDate()]:[E.getFullYear(),E.getMonth(),E.getDate()]}function p2(d){var E,g,v=[],_,sA,zA;if(!d._d){for(_=ijj(d),d._w&&d._a[U]==null&&d._a[B]==null&&sjj(d),d._dayOfYear!=null&&(zA=Qv(d._a[T],_[T]),(d._dayOfYear>Y(zA)||d._dayOfYear===0)&&(m(d)._overflowDayOfYear=!0),g=qr(zA,0,d._dayOfYear),d._a[B]=g.getUTCMonth(),d._a[U]=g.getUTCDate()),E=0;E<3&&d._a[E]==null;++E)d._a[E]=v[E]=_[E];for(;E<7;E++)d._a[E]=v[E]=d._a[E]==null?E===2?1:0:d._a[E];d._a[uA]===24&&d._a[GA]===0&&d._a[jj]===0&&d._a[Fj]===0&&(d._nextDay=!0,d._a[uA]=0),d._d=(d._useUTC?qr:sr).apply(null,v),sA=d._useUTC?d._d.getUTCDay():d._d.getDay(),d._tzm!=null&&d._d.setUTCMinutes(d._d.getUTCMinutes()-d._tzm),d._nextDay&&(d._a[uA]=24),d._w&&typeof d._w.d<"u"&&d._w.d!==sA&&(m(d).weekdayMismatch=!0)}}function sjj(d){var E,g,v,_,sA,zA,we,Ut,Qr;E=d._w,E.GG!=null||E.W!=null||E.E!=null?(sA=1,zA=4,g=Qv(E.GG,d._a[T],ur(P6(),1,4).year),v=Qv(E.W,1),_=Qv(E.E,1),(_<1||_>7)&&(Ut=!0)):(sA=d._locale._week.dow,zA=d._locale._week.doy,Qr=ur(P6(),sA,zA),g=Qv(E.gg,d._a[T],Qr.year),v=Qv(E.w,Qr.week),E.d!=null?(_=E.d,(_<0||_>6)&&(Ut=!0)):E.e!=null?(_=E.e+sA,(E.e<0||E.e>6)&&(Ut=!0)):_=sA),v<1||v>zt(g,sA,zA)?m(d)._overflowWeeks=!0:Ut!=null?m(d)._overflowWeekday=!0:(we=Kt(g,v,_,sA,zA),d._a[T]=we.year,d._dayOfYear=we.dayOfYear)}j.ISO_8601=function(){},j.RFC_2822=function(){};function m2(d){if(d._f===j.ISO_8601){RlA(d);return}if(d._f===j.RFC_2822){DlA(d);return}d._a=[],m(d).empty=!0;var E=""+d._i,g,v,_,sA,zA,we=E.length,Ut=0,Qr,Fs;for(_=Cj(d._f,d._locale).match(Oj)||[],Fs=_.length,g=0;g<Fs;g++)sA=_[g],v=(E.match(tl(sA,d))||[])[0],v&&(zA=E.substr(0,E.indexOf(v)),zA.length>0&&m(d).unusedInput.push(zA),E=E.slice(E.indexOf(v)+v.length),Ut+=v.length),Tj[sA]?(v?m(d).empty=!1:m(d).unusedTokens.push(sA),f(sA,v,d)):d._strict&&!v&&m(d).unusedTokens.push(sA);m(d).charsLeftOver=we-Ut,E.length>0&&m(d).unusedInput.push(E),d._a[uA]<=12&&m(d).bigHour===!0&&d._a[uA]>0&&(m(d).bigHour=void 0),m(d).parsedDateParts=d._a.slice(0),m(d).meridiem=d._meridiem,d._a[uA]=ljj(d._locale,d._a[uA],d._meridiem),Qr=m(d).era,Qr!==null&&(d._a[T]=d._locale.erasConvertYear(Qr,d._a[T])),p2(d),u2(d)}function ljj(d,E,g){var v;return g==null?E:d.meridiemHour!=null?d.meridiemHour(E,g):(d.isPM!=null&&(v=d.isPM(g),v&&E<12&&(E+=12),!v&&E===12&&(E=0)),E)}function cjj(d){var E,g,v,_,sA,zA,we=!1,Ut=d._f.length;if(Ut===0){m(d).invalidFormat=!0,d._d=new Date(NaN);return}for(_=0;_<Ut;_++)sA=0,zA=!1,E=P({},d),d._useUTC!=null&&(E._useUTC=d._useUTC),E._f=d._f[_],m2(E),S(E)&&(zA=!0),sA+=m(E).charsLeftOver,sA+=m(E).unusedTokens.length*10,m(E).score=sA,we?sA<v&&(v=sA,g=E):(v==null||sA<v||zA)&&(v=sA,g=E,zA&&(we=!0));c(d,g||E)}function djj(d){if(!d._d){var E=ut(d._i),g=E.day===void 0?E.date:E.day;d._a=l([E.year,E.month,g,E.hour,E.minute,E.second,E.millisecond],function(v){return v&&parseInt(v,10)}),p2(d)}}function kjj(d){var E=new D(u2(TlA(d)));return E._nextDay&&(E.add(1,"d"),E._nextDay=void 0),E}function TlA(d){var E=d._i,g=d._f;return d._locale=d._locale||UE(d._l),E===null||g===void 0&&E===""?G({nullInput:!0}):(typeof E=="string"&&(d._i=E=d._locale.preparse(E)),y(E)?new D(u2(E)):(s(E)?d._d=E:t(g)?cjj(d):g?m2(d):ujj(d),S(d)||(d._d=null),d))}function ujj(d){var E=d._i;o(E)?d._d=new Date(j.now()):s(E)?d._d=new Date(E.valueOf()):typeof E=="string"?ojj(d):t(E)?(d._a=l(E.slice(0),function(g){return parseInt(g,10)}),p2(d)):r(E)?djj(d):i(E)?d._d=new Date(E):j.createFromInputFallback(d)}function ClA(d,E,g,v,_){var sA={};return(E===!0||E===!1)&&(v=E,E=void 0),(g===!0||g===!1)&&(v=g,g=void 0),(r(d)&&n(d)||t(d)&&d.length===0)&&(d=void 0),sA._isAMomentObject=!0,sA._useUTC=sA._isUTC=_,sA._l=g,sA._i=d,sA._f=E,sA._strict=v,kjj(sA)}function P6(d,E,g,v){return ClA(d,E,g,v,!1)}var Ejj=O("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var d=P6.apply(null,arguments);return this.isValid()&&d.isValid()?d<this?this:d:G()}),pjj=O("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var d=P6.apply(null,arguments);return this.isValid()&&d.isValid()?d>this?this:d:G()});function _lA(d,E){var g,v;if(E.length===1&&t(E[0])&&(E=E[0]),!E.length)return P6();for(g=E[0],v=1;v<E.length;++v)(!E[v].isValid()||E[v][d](g))&&(g=E[v]);return g}function mjj(){var d=[].slice.call(arguments,0);return _lA("isBefore",d)}function Bjj(){var d=[].slice.call(arguments,0);return _lA("isAfter",d)}var gjj=function(){return Date.now?Date.now():+new Date},Q0=["year","quarter","month","week","day","hour","minute","second","millisecond"];function hjj(d){var E,g=!1,v,_=Q0.length;for(E in d)if(a(d,E)&&!(JA.call(Q0,E)!==-1&&(d[E]==null||!isNaN(d[E]))))return!1;for(v=0;v<_;++v)if(d[Q0[v]]){if(g)return!1;parseFloat(d[Q0[v]])!==jr(d[Q0[v]])&&(g=!0)}return!0}function qjj(){return this._isValid}function xjj(){return Yd(NaN)}function BO(d){var E=ut(d),g=E.year||0,v=E.quarter||0,_=E.month||0,sA=E.week||E.isoWeek||0,zA=E.day||0,we=E.hour||0,Ut=E.minute||0,Qr=E.second||0,Fs=E.millisecond||0;this._isValid=hjj(E),this._milliseconds=+Fs+Qr*1e3+Ut*6e4+we*1e3*60*60,this._days=+zA+sA*7,this._months=+_+v*3+g*12,this._data={},this._locale=UE(),this._bubble()}function gO(d){return d instanceof BO}function B2(d){return d<0?Math.round(-1*d)*-1:Math.round(d)}function vjj(d,E,g){var v=Math.min(d.length,E.length),_=Math.abs(d.length-E.length),sA=0,zA;for(zA=0;zA<v;zA++)(g&&d[zA]!==E[zA]||!g&&jr(d[zA])!==jr(E[zA]))&&sA++;return sA+_}function SlA(d,E){mj(d,0,0,function(){var g=this.utcOffset(),v="+";return g<0&&(g=-g,v="-"),v+Qj(~~(g/60),2)+E+Qj(~~g%60,2)})}SlA("Z",":"),SlA("ZZ",""),le("Z",Bi),le("ZZ",Bi),St(["Z","ZZ"],function(d,E,g){g._useUTC=!0,g._tzm=g2(Bi,d)});var Gjj=/([\+\-]|\d\d)/gi;function g2(d,E){var g=(E||"").match(d),v,_,sA;return g===null?null:(v=g[g.length-1]||[],_=(v+"").match(Gjj)||["-",0,0],sA=+(_[1]*60)+jr(_[2]),sA===0?0:_[0]==="+"?sA:-sA)}function h2(d,E){var g,v;return E._isUTC?(g=E.clone(),v=(y(d)||s(d)?d.valueOf():P6(d).valueOf())-g.valueOf(),g._d.setTime(g._d.valueOf()+v),j.updateOffset(g,!1),g):P6(d).local()}function q2(d){return-Math.round(d._d.getTimezoneOffset())}j.updateOffset=function(){};function fjj(d,E,g){var v=this._offset||0,_;if(!this.isValid())return d!=null?this:NaN;if(d!=null){if(typeof d=="string"){if(d=g2(Bi,d),d===null)return this}else Math.abs(d)<16&&!g&&(d=d*60);return!this._isUTC&&E&&(_=q2(this)),this._offset=d,this._isUTC=!0,_!=null&&this.add(_,"m"),v!==d&&(!E||this._changeInProgress?NlA(this,Yd(d-v,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,j.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?v:q2(this)}function Fjj(d,E){return d!=null?(typeof d!="string"&&(d=-d),this.utcOffset(d,E),this):-this.utcOffset()}function bjj(d){return this.utcOffset(0,d)}function yjj(d){return this._isUTC&&(this.utcOffset(0,d),this._isUTC=!1,d&&this.subtract(q2(this),"m")),this}function $jj(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var d=g2(Gn,this._i);d!=null?this.utcOffset(d):this.utcOffset(0,!0)}return this}function wjj(d){return this.isValid()?(d=d?P6(d).utcOffset():0,(this.utcOffset()-d)%60===0):!1}function Ijj(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Pjj(){if(!o(this._isDSTShifted))return this._isDSTShifted;var d={},E;return P(d,this),d=TlA(d),d._a?(E=d._isUTC?k(d._a):P6(d._a),this._isDSTShifted=this.isValid()&&vjj(d._a,E.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Ojj(){return this.isValid()?!this._isUTC:!1}function Rjj(){return this.isValid()?this._isUTC:!1}function HlA(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Djj=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Tjj=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Yd(d,E){var g=d,v=null,_,sA,zA;return gO(d)?g={ms:d._milliseconds,d:d._days,M:d._months}:i(d)||!isNaN(+d)?(g={},E?g[E]=+d:g.milliseconds=+d):(v=Djj.exec(d))?(_=v[1]==="-"?-1:1,g={y:0,d:jr(v[U])*_,h:jr(v[uA])*_,m:jr(v[GA])*_,s:jr(v[jj])*_,ms:jr(B2(v[Fj]*1e3))*_}):(v=Tjj.exec(d))?(_=v[1]==="-"?-1:1,g={y:yh(v[2],_),M:yh(v[3],_),w:yh(v[4],_),d:yh(v[5],_),h:yh(v[6],_),m:yh(v[7],_),s:yh(v[8],_)}):g==null?g={}:typeof g=="object"&&("from"in g||"to"in g)&&(zA=Cjj(P6(g.from),P6(g.to)),g={},g.ms=zA.milliseconds,g.M=zA.months),sA=new BO(g),gO(d)&&a(d,"_locale")&&(sA._locale=d._locale),gO(d)&&a(d,"_isValid")&&(sA._isValid=d._isValid),sA}Yd.fn=BO.prototype,Yd.invalid=xjj;function yh(d,E){var g=d&&parseFloat(d.replace(",","."));return(isNaN(g)?0:g)*E}function MlA(d,E){var g={};return g.months=E.month()-d.month()+(E.year()-d.year())*12,d.clone().add(g.months,"M").isAfter(E)&&--g.months,g.milliseconds=+E-+d.clone().add(g.months,"M"),g}function Cjj(d,E){var g;return d.isValid()&&E.isValid()?(E=h2(E,d),d.isBefore(E)?g=MlA(d,E):(g=MlA(E,d),g.milliseconds=-g.milliseconds,g.months=-g.months),g):{milliseconds:0,months:0}}function KlA(d,E){return function(g,v){var _,sA;return v!==null&&!isNaN(+v)&&(AA(E,"moment()."+E+"(period, number) is deprecated. Please use moment()."+E+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),sA=g,g=v,v=sA),_=Yd(g,v),NlA(this,_,d),this}}function NlA(d,E,g,v){var _=E._milliseconds,sA=B2(E._days),zA=B2(E._months);d.isValid()&&(v=v??!0,zA&&kj(d,fA(d,"Month")+zA*g),sA&&BA(d,"Date",fA(d,"Date")+sA*g),_&&d._d.setTime(d._d.valueOf()+_*g),v&&j.updateOffset(d,sA||zA))}var _jj=KlA(1,"add"),Sjj=KlA(-1,"subtract");function LlA(d){return typeof d=="string"||d instanceof String}function Hjj(d){return y(d)||s(d)||LlA(d)||i(d)||Kjj(d)||Mjj(d)||d===null||d===void 0}function Mjj(d){var E=r(d)&&!n(d),g=!1,v=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],_,sA,zA=v.length;for(_=0;_<zA;_+=1)sA=v[_],g=g||a(d,sA);return E&&g}function Kjj(d){var E=t(d),g=!1;return E&&(g=d.filter(function(v){return!i(v)&&LlA(d)}).length===0),E&&g}function Njj(d){var E=r(d)&&!n(d),g=!1,v=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],_,sA;for(_=0;_<v.length;_+=1)sA=v[_],g=g||a(d,sA);return E&&g}function Ljj(d,E){var g=d.diff(E,"days",!0);return g<-6?"sameElse":g<-1?"lastWeek":g<0?"lastDay":g<1?"sameDay":g<2?"nextDay":g<7?"nextWeek":"sameElse"}function zjj(d,E){arguments.length===1&&(arguments[0]?Hjj(arguments[0])?(d=arguments[0],E=void 0):Njj(arguments[0])&&(E=arguments[0],d=void 0):(d=void 0,E=void 0));var g=d||P6(),v=h2(g,this).startOf("day"),_=j.calendarFormat(this,v)||"sameElse",sA=E&&(nA(E[_])?E[_].call(this,g):E[_]);return this.format(sA||this.localeData().calendar(_,this,P6(g)))}function Ujj(){return new D(this)}function Vjj(d,E){var g=y(d)?d:P6(d);return this.isValid()&&g.isValid()?(E=ct(E)||"millisecond",E==="millisecond"?this.valueOf()>g.valueOf():g.valueOf()<this.clone().startOf(E).valueOf()):!1}function Xjj(d,E){var g=y(d)?d:P6(d);return this.isValid()&&g.isValid()?(E=ct(E)||"millisecond",E==="millisecond"?this.valueOf()<g.valueOf():this.clone().endOf(E).valueOf()<g.valueOf()):!1}function Jjj(d,E,g,v){var _=y(d)?d:P6(d),sA=y(E)?E:P6(E);return this.isValid()&&_.isValid()&&sA.isValid()?(v=v||"()",(v[0]==="("?this.isAfter(_,g):!this.isBefore(_,g))&&(v[1]===")"?this.isBefore(sA,g):!this.isAfter(sA,g))):!1}function Wjj(d,E){var g=y(d)?d:P6(d),v;return this.isValid()&&g.isValid()?(E=ct(E)||"millisecond",E==="millisecond"?this.valueOf()===g.valueOf():(v=g.valueOf(),this.clone().startOf(E).valueOf()<=v&&v<=this.clone().endOf(E).valueOf())):!1}function Qjj(d,E){return this.isSame(d,E)||this.isAfter(d,E)}function Yjj(d,E){return this.isSame(d,E)||this.isBefore(d,E)}function Zjj(d,E,g){var v,_,sA;if(!this.isValid())return NaN;if(v=h2(d,this),!v.isValid())return NaN;switch(_=(v.utcOffset()-this.utcOffset())*6e4,E=ct(E),E){case"year":sA=hO(this,v)/12;break;case"month":sA=hO(this,v);break;case"quarter":sA=hO(this,v)/3;break;case"second":sA=(this-v)/1e3;break;case"minute":sA=(this-v)/6e4;break;case"hour":sA=(this-v)/36e5;break;case"day":sA=(this-v-_)/864e5;break;case"week":sA=(this-v-_)/6048e5;break;default:sA=this-v}return g?sA:Vn(sA)}function hO(d,E){if(d.date()<E.date())return-hO(E,d);var g=(E.year()-d.year())*12+(E.month()-d.month()),v=d.clone().add(g,"months"),_,sA;return E-v<0?(_=d.clone().add(g-1,"months"),sA=(E-v)/(v-_)):(_=d.clone().add(g+1,"months"),sA=(E-v)/(_-v)),-(g+sA)||0}j.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",j.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Aej(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function jej(d){if(!this.isValid())return null;var E=d!==!0,g=E?this.clone().utc():this;return g.year()<0||g.year()>9999?Tt(g,E?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):nA(Date.prototype.toISOString)?E?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Tt(g,"Z")):Tt(g,E?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function eej(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var d="moment",E="",g,v,_,sA;return this.isLocal()||(d=this.utcOffset()===0?"moment.utc":"moment.parseZone",E="Z"),g="["+d+'("]',v=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",_="-MM-DD[T]HH:mm:ss.SSS",sA=E+'[")]',this.format(g+v+_+sA)}function tej(d){d||(d=this.isUtc()?j.defaultFormatUtc:j.defaultFormat);var E=Tt(this,d);return this.localeData().postformat(E)}function rej(d,E){return this.isValid()&&(y(d)&&d.isValid()||P6(d).isValid())?Yd({to:this,from:d}).locale(this.locale()).humanize(!E):this.localeData().invalidDate()}function aej(d){return this.from(P6(),d)}function nej(d,E){return this.isValid()&&(y(d)&&d.isValid()||P6(d).isValid())?Yd({from:this,to:d}).locale(this.locale()).humanize(!E):this.localeData().invalidDate()}function oej(d){return this.to(P6(),d)}function zlA(d){var E;return d===void 0?this._locale._abbr:(E=UE(d),E!=null&&(this._locale=E),this)}var UlA=O("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(d){return d===void 0?this.localeData():this.locale(d)});function VlA(){return this._locale}var qO=1e3,Yv=60*qO,xO=60*Yv,XlA=(365*400+97)*24*xO;function Zv(d,E){return(d%E+E)%E}function JlA(d,E,g){return d<100&&d>=0?new Date(d+400,E,g)-XlA:new Date(d,E,g).valueOf()}function WlA(d,E,g){return d<100&&d>=0?Date.UTC(d+400,E,g)-XlA:Date.UTC(d,E,g)}function iej(d){var E,g;if(d=ct(d),d===void 0||d==="millisecond"||!this.isValid())return this;switch(g=this._isUTC?WlA:JlA,d){case"year":E=g(this.year(),0,1);break;case"quarter":E=g(this.year(),this.month()-this.month()%3,1);break;case"month":E=g(this.year(),this.month(),1);break;case"week":E=g(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":E=g(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":E=g(this.year(),this.month(),this.date());break;case"hour":E=this._d.valueOf(),E-=Zv(E+(this._isUTC?0:this.utcOffset()*Yv),xO);break;case"minute":E=this._d.valueOf(),E-=Zv(E,Yv);break;case"second":E=this._d.valueOf(),E-=Zv(E,qO);break}return this._d.setTime(E),j.updateOffset(this,!0),this}function sej(d){var E,g;if(d=ct(d),d===void 0||d==="millisecond"||!this.isValid())return this;switch(g=this._isUTC?WlA:JlA,d){case"year":E=g(this.year()+1,0,1)-1;break;case"quarter":E=g(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":E=g(this.year(),this.month()+1,1)-1;break;case"week":E=g(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":E=g(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":E=g(this.year(),this.month(),this.date()+1)-1;break;case"hour":E=this._d.valueOf(),E+=xO-Zv(E+(this._isUTC?0:this.utcOffset()*Yv),xO)-1;break;case"minute":E=this._d.valueOf(),E+=Yv-Zv(E,Yv)-1;break;case"second":E=this._d.valueOf(),E+=qO-Zv(E,qO)-1;break}return this._d.setTime(E),j.updateOffset(this,!0),this}function lej(){return this._d.valueOf()-(this._offset||0)*6e4}function cej(){return Math.floor(this.valueOf()/1e3)}function dej(){return new Date(this.valueOf())}function kej(){var d=this;return[d.year(),d.month(),d.date(),d.hour(),d.minute(),d.second(),d.millisecond()]}function uej(){var d=this;return{years:d.year(),months:d.month(),date:d.date(),hours:d.hours(),minutes:d.minutes(),seconds:d.seconds(),milliseconds:d.milliseconds()}}function Eej(){return this.isValid()?this.toISOString():null}function pej(){return S(this)}function mej(){return c({},m(this))}function Bej(){return m(this).overflow}function gej(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}mj("N",0,0,"eraAbbr"),mj("NN",0,0,"eraAbbr"),mj("NNN",0,0,"eraAbbr"),mj("NNNN",0,0,"eraName"),mj("NNNNN",0,0,"eraNarrow"),mj("y",["y",1],"yo","eraYear"),mj("y",["yy",2],0,"eraYear"),mj("y",["yyy",3],0,"eraYear"),mj("y",["yyyy",4],0,"eraYear"),le("N",x2),le("NN",x2),le("NNN",x2),le("NNNN",wej),le("NNNNN",Iej),St(["N","NN","NNN","NNNN","NNNNN"],function(d,E,g,v){var _=g._locale.erasParse(d,v,g._strict);_?m(g).era=_:m(g).invalidEra=d}),le("y",Xj),le("yy",Xj),le("yyy",Xj),le("yyyy",Xj),le("yo",Pej),St(["y","yy","yyy","yyyy"],T),St(["yo"],function(d,E,g,v){var _;g._locale._eraYearOrdinalRegex&&(_=d.match(g._locale._eraYearOrdinalRegex)),g._locale.eraYearOrdinalParse?E[T]=g._locale.eraYearOrdinalParse(d,_):E[T]=parseInt(d,10)});function hej(d,E){var g,v,_,sA=this._eras||UE("en")._eras;for(g=0,v=sA.length;g<v;++g){switch(typeof sA[g].since){case"string":_=j(sA[g].since).startOf("day"),sA[g].since=_.valueOf();break}switch(typeof sA[g].until){case"undefined":sA[g].until=1/0;break;case"string":_=j(sA[g].until).startOf("day").valueOf(),sA[g].until=_.valueOf();break}}return sA}function qej(d,E,g){var v,_,sA=this.eras(),zA,we,Ut;for(d=d.toUpperCase(),v=0,_=sA.length;v<_;++v)if(zA=sA[v].name.toUpperCase(),we=sA[v].abbr.toUpperCase(),Ut=sA[v].narrow.toUpperCase(),g)switch(E){case"N":case"NN":case"NNN":if(we===d)return sA[v];break;case"NNNN":if(zA===d)return sA[v];break;case"NNNNN":if(Ut===d)return sA[v];break}else if([zA,we,Ut].indexOf(d)>=0)return sA[v]}function xej(d,E){var g=d.since<=d.until?1:-1;return E===void 0?j(d.since).year():j(d.since).year()+(E-d.offset)*g}function vej(){var d,E,g,v=this.localeData().eras();for(d=0,E=v.length;d<E;++d)if(g=this.clone().startOf("day").valueOf(),v[d].since<=g&&g<=v[d].until||v[d].until<=g&&g<=v[d].since)return v[d].name;return""}function Gej(){var d,E,g,v=this.localeData().eras();for(d=0,E=v.length;d<E;++d)if(g=this.clone().startOf("day").valueOf(),v[d].since<=g&&g<=v[d].until||v[d].until<=g&&g<=v[d].since)return v[d].narrow;return""}function fej(){var d,E,g,v=this.localeData().eras();for(d=0,E=v.length;d<E;++d)if(g=this.clone().startOf("day").valueOf(),v[d].since<=g&&g<=v[d].until||v[d].until<=g&&g<=v[d].since)return v[d].abbr;return""}function Fej(){var d,E,g,v,_=this.localeData().eras();for(d=0,E=_.length;d<E;++d)if(g=_[d].since<=_[d].until?1:-1,v=this.clone().startOf("day").valueOf(),_[d].since<=v&&v<=_[d].until||_[d].until<=v&&v<=_[d].since)return(this.year()-j(_[d].since).year())*g+_[d].offset;return this.year()}function bej(d){return a(this,"_erasNameRegex")||v2.call(this),d?this._erasNameRegex:this._erasRegex}function yej(d){return a(this,"_erasAbbrRegex")||v2.call(this),d?this._erasAbbrRegex:this._erasRegex}function $ej(d){return a(this,"_erasNarrowRegex")||v2.call(this),d?this._erasNarrowRegex:this._erasRegex}function x2(d,E){return E.erasAbbrRegex(d)}function wej(d,E){return E.erasNameRegex(d)}function Iej(d,E){return E.erasNarrowRegex(d)}function Pej(d,E){return E._eraYearOrdinalRegex||Xj}function v2(){var d=[],E=[],g=[],v=[],_,sA,zA,we,Ut,Qr=this.eras();for(_=0,sA=Qr.length;_<sA;++_)zA=gi(Qr[_].name),we=gi(Qr[_].abbr),Ut=gi(Qr[_].narrow),E.push(zA),d.push(we),g.push(Ut),v.push(zA),v.push(we),v.push(Ut);this._erasRegex=new RegExp("^("+v.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+E.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+d.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+g.join("|")+")","i")}mj(0,["gg",2],0,function(){return this.weekYear()%100}),mj(0,["GG",2],0,function(){return this.isoWeekYear()%100});function vO(d,E){mj(0,[d,d.length],0,E)}vO("gggg","weekYear"),vO("ggggg","weekYear"),vO("GGGG","isoWeekYear"),vO("GGGGG","isoWeekYear"),le("G",fr),le("g",fr),le("GG",xj,iA),le("gg",xj,iA),le("GGGG",rA,HA),le("gggg",rA,HA),le("GGGGG",wA,fj),le("ggggg",wA,fj),Yl(["gggg","ggggg","GGGG","GGGGG"],function(d,E,g,v){E[v.substr(0,2)]=jr(d)}),Yl(["gg","GG"],function(d,E,g,v){E[v]=j.parseTwoDigitYear(d)});function Oej(d){return QlA.call(this,d,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Rej(d){return QlA.call(this,d,this.isoWeek(),this.isoWeekday(),1,4)}function Dej(){return zt(this.year(),1,4)}function Tej(){return zt(this.isoWeekYear(),1,4)}function Cej(){var d=this.localeData()._week;return zt(this.year(),d.dow,d.doy)}function _ej(){var d=this.localeData()._week;return zt(this.weekYear(),d.dow,d.doy)}function QlA(d,E,g,v,_){var sA;return d==null?ur(this,v,_).year:(sA=zt(d,v,_),E>sA&&(E=sA),Sej.call(this,d,E,g,v,_))}function Sej(d,E,g,v,_){var sA=Kt(d,E,g,v,_),zA=qr(sA.year,0,sA.dayOfYear);return this.year(zA.getUTCFullYear()),this.month(zA.getUTCMonth()),this.date(zA.getUTCDate()),this}mj("Q",0,"Qo","quarter"),le("Q",se),St("Q",function(d,E){E[B]=(jr(d)-1)*3});function Hej(d){return d==null?Math.ceil((this.month()+1)/3):this.month((d-1)*3+this.month()%3)}mj("D",["DD",2],"Do","date"),le("D",xj,Un),le("DD",xj,iA),le("Do",function(d,E){return d?E._dayOfMonthOrdinalParse||E._ordinalParse:E._dayOfMonthOrdinalParseLenient}),St(["D","DD"],U),St("Do",function(d,E){E[U]=jr(d.match(xj)[0])});var YlA=gA("Date",!0);mj("DDD",["DDDD",3],"DDDo","dayOfYear"),le("DDD",cA),le("DDDD",hA),St(["DDD","DDDD"],function(d,E,g){g._dayOfYear=jr(d)});function Mej(d){var E=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return d==null?E:this.add(d-E,"d")}mj("m",["mm",2],0,"minute"),le("m",xj,zE),le("mm",xj,iA),St(["m","mm"],GA);var Kej=gA("Minutes",!1);mj("s",["ss",2],0,"second"),le("s",xj,zE),le("ss",xj,iA),St(["s","ss"],jj);var Nej=gA("Seconds",!1);mj("S",0,0,function(){return~~(this.millisecond()/100)}),mj(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),mj(0,["SSS",3],0,"millisecond"),mj(0,["SSSS",4],0,function(){return this.millisecond()*10}),mj(0,["SSSSS",5],0,function(){return this.millisecond()*100}),mj(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),mj(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),mj(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),mj(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),le("S",cA,se),le("SS",cA,iA),le("SSS",cA,hA);var oB,ZlA;for(oB="SSSS";oB.length<=9;oB+="S")le(oB,Xj);function Lej(d,E){E[Fj]=jr(("0."+d)*1e3)}for(oB="S";oB.length<=9;oB+="S")St(oB,Lej);ZlA=gA("Milliseconds",!1),mj("z",0,0,"zoneAbbr"),mj("zz",0,0,"zoneName");function zej(){return this._isUTC?"UTC":""}function Uej(){return this._isUTC?"Coordinated Universal Time":""}var Uj=D.prototype;Uj.add=_jj,Uj.calendar=zjj,Uj.clone=Ujj,Uj.diff=Zjj,Uj.endOf=sej,Uj.format=tej,Uj.from=rej,Uj.fromNow=aej,Uj.to=nej,Uj.toNow=oej,Uj.get=UA,Uj.invalidAt=Bej,Uj.isAfter=Vjj,Uj.isBefore=Xjj,Uj.isBetween=Jjj,Uj.isSame=Wjj,Uj.isSameOrAfter=Qjj,Uj.isSameOrBefore=Yjj,Uj.isValid=pej,Uj.lang=UlA,Uj.locale=zlA,Uj.localeData=VlA,Uj.max=pjj,Uj.min=Ejj,Uj.parsingFlags=mej,Uj.set=hj,Uj.startOf=iej,Uj.subtract=Sjj,Uj.toArray=kej,Uj.toObject=uej,Uj.toDate=dej,Uj.toISOString=jej,Uj.inspect=eej,typeof Symbol<"u"&&Symbol.for!=null&&(Uj[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Uj.toJSON=Eej,Uj.toString=Aej,Uj.unix=cej,Uj.valueOf=lej,Uj.creationData=gej,Uj.eraName=vej,Uj.eraNarrow=Gej,Uj.eraAbbr=fej,Uj.eraYear=Fej,Uj.year=N,Uj.isLeapYear=dA,Uj.weekYear=Oej,Uj.isoWeekYear=Rej,Uj.quarter=Uj.quarters=Hej,Uj.month=at,Uj.daysInMonth=Ht,Uj.week=Uj.weeks=M,Uj.isoWeek=Uj.isoWeeks=lA,Uj.weeksInYear=Cej,Uj.weeksInWeekYear=_ej,Uj.isoWeeksInYear=Dej,Uj.isoWeeksInISOWeekYear=Tej,Uj.date=YlA,Uj.day=Uj.days=X0,Uj.weekday=DAj,Uj.isoWeekday=TAj,Uj.dayOfYear=Mej,Uj.hour=Uj.hours=NAj,Uj.minute=Uj.minutes=Kej,Uj.second=Uj.seconds=Nej,Uj.millisecond=Uj.milliseconds=ZlA,Uj.utcOffset=fjj,Uj.utc=bjj,Uj.local=yjj,Uj.parseZone=$jj,Uj.hasAlignedHourOffset=wjj,Uj.isDST=Ijj,Uj.isLocal=Ojj,Uj.isUtcOffset=Rjj,Uj.isUtc=HlA,Uj.isUTC=HlA,Uj.zoneAbbr=zej,Uj.zoneName=Uej,Uj.dates=O("dates accessor is deprecated. Use date instead.",YlA),Uj.months=O("months accessor is deprecated. Use month instead",at),Uj.years=O("years accessor is deprecated. Use year instead",N),Uj.zone=O("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Fjj),Uj.isDSTShifted=O("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Pjj);function Vej(d){return P6(d*1e3)}function Xej(){return P6.apply(null,arguments).parseZone()}function AcA(d){return d}var da=dj.prototype;da.calendar=LA,da.longDateFormat=At,da.invalidDate=fe,da.ordinal=Pt,da.preparse=AcA,da.postformat=AcA,da.relativeTime=Kr,da.pastFuture=_r,da.set=bA,da.eras=hej,da.erasParse=qej,da.erasConvertYear=xej,da.erasAbbrRegex=yej,da.erasNameRegex=bej,da.erasNarrowRegex=$ej,da.months=KA,da.monthsShort=bj,da.monthsParse=YA,da.monthsRegex=Mt,da.monthsShortRegex=dt,da.week=I6,da.firstDayOfYear=I,da.firstDayOfWeek=b,da.weekdays=Jv,da.weekdaysMin=Ac,da.weekdaysShort=Zl,da.weekdaysParse=g7,da.weekdaysRegex=CAj,da.weekdaysShortRegex=_Aj,da.weekdaysMinRegex=SAj,da.isPM=MAj,da.meridiem=LAj;function GO(d,E,g,v){var _=UE(),sA=k().set(v,E);return _[g](sA,d)}function jcA(d,E,g){if(i(d)&&(E=d,d=void 0),d=d||"",E!=null)return GO(d,E,g,"month");var v,_=[];for(v=0;v<12;v++)_[v]=GO(d,v,g,"month");return _}function G2(d,E,g,v){typeof d=="boolean"?(i(E)&&(g=E,E=void 0),E=E||""):(E=d,g=E,d=!1,i(E)&&(g=E,E=void 0),E=E||"");var _=UE(),sA=d?_._week.dow:0,zA,we=[];if(g!=null)return GO(E,(g+sA)%7,v,"day");for(zA=0;zA<7;zA++)we[zA]=GO(E,(zA+sA)%7,v,"day");return we}function Jej(d,E){return jcA(d,E,"months")}function Wej(d,E){return jcA(d,E,"monthsShort")}function Qej(d,E,g){return G2(d,E,g,"weekdays")}function Yej(d,E,g){return G2(d,E,g,"weekdaysShort")}function Zej(d,E,g){return G2(d,E,g,"weekdaysMin")}nB("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(d){var E=d%10,g=jr(d%100/10)===1?"th":E===1?"st":E===2?"nd":E===3?"rd":"th";return d+g}}),j.lang=O("moment.lang is deprecated. Use moment.locale instead.",nB),j.langData=O("moment.langData is deprecated. Use moment.localeData instead.",UE);var VE=Math.abs;function Atj(){var d=this._data;return this._milliseconds=VE(this._milliseconds),this._days=VE(this._days),this._months=VE(this._months),d.milliseconds=VE(d.milliseconds),d.seconds=VE(d.seconds),d.minutes=VE(d.minutes),d.hours=VE(d.hours),d.months=VE(d.months),d.years=VE(d.years),this}function ecA(d,E,g,v){var _=Yd(E,g);return d._milliseconds+=v*_._milliseconds,d._days+=v*_._days,d._months+=v*_._months,d._bubble()}function jtj(d,E){return ecA(this,d,E,1)}function etj(d,E){return ecA(this,d,E,-1)}function tcA(d){return d<0?Math.floor(d):Math.ceil(d)}function ttj(){var d=this._milliseconds,E=this._days,g=this._months,v=this._data,_,sA,zA,we,Ut;return d>=0&&E>=0&&g>=0||d<=0&&E<=0&&g<=0||(d+=tcA(f2(g)+E)*864e5,E=0,g=0),v.milliseconds=d%1e3,_=Vn(d/1e3),v.seconds=_%60,sA=Vn(_/60),v.minutes=sA%60,zA=Vn(sA/60),v.hours=zA%24,E+=Vn(zA/24),Ut=Vn(rcA(E)),g+=Ut,E-=tcA(f2(Ut)),we=Vn(g/12),g%=12,v.days=E,v.months=g,v.years=we,this}function rcA(d){return d*4800/146097}function f2(d){return d*146097/4800}function rtj(d){if(!this.isValid())return NaN;var E,g,v=this._milliseconds;if(d=ct(d),d==="month"||d==="quarter"||d==="year")switch(E=this._days+v/864e5,g=this._months+rcA(E),d){case"month":return g;case"quarter":return g/3;case"year":return g/12}else switch(E=this._days+Math.round(f2(this._months)),d){case"week":return E/7+v/6048e5;case"day":return E+v/864e5;case"hour":return E*24+v/36e5;case"minute":return E*1440+v/6e4;case"second":return E*86400+v/1e3;case"millisecond":return Math.floor(E*864e5)+v;default:throw new Error("Unknown unit "+d)}}function XE(d){return function(){return this.as(d)}}var acA=XE("ms"),atj=XE("s"),ntj=XE("m"),otj=XE("h"),itj=XE("d"),stj=XE("w"),ltj=XE("M"),ctj=XE("Q"),dtj=XE("y"),ktj=acA;function utj(){return Yd(this)}function Etj(d){return d=ct(d),this.isValid()?this[d+"s"]():NaN}function $h(d){return function(){return this.isValid()?this._data[d]:NaN}}var ptj=$h("milliseconds"),mtj=$h("seconds"),Btj=$h("minutes"),gtj=$h("hours"),htj=$h("days"),qtj=$h("months"),xtj=$h("years");function vtj(){return Vn(this.days()/7)}var JE=Math.round,AG={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Gtj(d,E,g,v,_){return _.relativeTime(E||1,!!g,d,v)}function ftj(d,E,g,v){var _=Yd(d).abs(),sA=JE(_.as("s")),zA=JE(_.as("m")),we=JE(_.as("h")),Ut=JE(_.as("d")),Qr=JE(_.as("M")),Fs=JE(_.as("w")),WE=JE(_.as("y")),iB=sA<=g.ss&&["s",sA]||sA<g.s&&["ss",sA]||zA<=1&&["m"]||zA<g.m&&["mm",zA]||we<=1&&["h"]||we<g.h&&["hh",we]||Ut<=1&&["d"]||Ut<g.d&&["dd",Ut];return g.w!=null&&(iB=iB||Fs<=1&&["w"]||Fs<g.w&&["ww",Fs]),iB=iB||Qr<=1&&["M"]||Qr<g.M&&["MM",Qr]||WE<=1&&["y"]||["yy",WE],iB[2]=E,iB[3]=+d>0,iB[4]=v,Gtj.apply(null,iB)}function Ftj(d){return d===void 0?JE:typeof d=="function"?(JE=d,!0):!1}function btj(d,E){return AG[d]===void 0?!1:E===void 0?AG[d]:(AG[d]=E,d==="s"&&(AG.ss=E-1),!0)}function ytj(d,E){if(!this.isValid())return this.localeData().invalidDate();var g=!1,v=AG,_,sA;return typeof d=="object"&&(E=d,d=!1),typeof d=="boolean"&&(g=d),typeof E=="object"&&(v=Object.assign({},AG,E),E.s!=null&&E.ss==null&&(v.ss=E.s-1)),_=this.localeData(),sA=ftj(this,!g,v,_),g&&(sA=_.pastFuture(+this,sA)),_.postformat(sA)}var F2=Math.abs;function jG(d){return(d>0)-(d<0)||+d}function fO(){if(!this.isValid())return this.localeData().invalidDate();var d=F2(this._milliseconds)/1e3,E=F2(this._days),g=F2(this._months),v,_,sA,zA,we=this.asSeconds(),Ut,Qr,Fs,WE;return we?(v=Vn(d/60),_=Vn(v/60),d%=60,v%=60,sA=Vn(g/12),g%=12,zA=d?d.toFixed(3).replace(/\.?0+$/,""):"",Ut=we<0?"-":"",Qr=jG(this._months)!==jG(we)?"-":"",Fs=jG(this._days)!==jG(we)?"-":"",WE=jG(this._milliseconds)!==jG(we)?"-":"",Ut+"P"+(sA?Qr+sA+"Y":"")+(g?Qr+g+"M":"")+(E?Fs+E+"D":"")+(_||v||d?"T":"")+(_?WE+_+"H":"")+(v?WE+v+"M":"")+(d?WE+zA+"S":"")):"P0D"}var ja=BO.prototype;ja.isValid=qjj,ja.abs=Atj,ja.add=jtj,ja.subtract=etj,ja.as=rtj,ja.asMilliseconds=acA,ja.asSeconds=atj,ja.asMinutes=ntj,ja.asHours=otj,ja.asDays=itj,ja.asWeeks=stj,ja.asMonths=ltj,ja.asQuarters=ctj,ja.asYears=dtj,ja.valueOf=ktj,ja._bubble=ttj,ja.clone=utj,ja.get=Etj,ja.milliseconds=ptj,ja.seconds=mtj,ja.minutes=Btj,ja.hours=gtj,ja.days=htj,ja.weeks=vtj,ja.months=qtj,ja.years=xtj,ja.humanize=ytj,ja.toISOString=fO,ja.toString=fO,ja.toJSON=fO,ja.locale=zlA,ja.localeData=VlA,ja.toIsoString=O("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",fO),ja.lang=UlA,mj("X",0,0,"unix"),mj("x",0,0,"valueOf"),le("x",fr),le("X",na),St("X",function(d,E,g){g._d=new Date(parseFloat(d)*1e3)}),St("x",function(d,E,g){g._d=new Date(jr(d))});return j.version="2.30.1",e(P6),j.fn=Uj,j.min=mjj,j.max=Bjj,j.now=gjj,j.utc=k,j.unix=Vej,j.months=Jej,j.isDate=s,j.locale=nB,j.invalid=G,j.duration=Yd,j.isMoment=y,j.weekdays=Qej,j.parseZone=Xej,j.localeData=UE,j.isDuration=gO,j.monthsShort=Wej,j.weekdaysMin=Zej,j.defineLocale=k2,j.updateLocale=XAj,j.locales=JAj,j.weekdaysShort=Yej,j.normalizeUnits=ct,j.relativeTimeRounding=Ftj,j.relativeTimeThreshold=btj,j.calendarFormat=Ljj,j.prototype=Uj,j.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},j})});var Fo=RA((I1e,ef)=>{"use strict";var z={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(A){this.toString=function(){return"CORRUPT: "+this.message},this.message=A},invalid:function(A){this.toString=function(){return"INVALID: "+this.message},this.message=A},bug:function(A){this.toString=function(){return"BUG: "+this.message},this.message=A},notReady:function(A){this.toString=function(){return"NOT READY: "+this.message},this.message=A}}};typeof ef<"u"&&ef.exports&&(ef.exports=z);typeof define=="function"&&define([],function(){return z});z.bn=function(A){this.initWith(A)};z.bn.prototype={radix:24,maxMul:8,l:z.bn,copy:function(){return new this.l(this)},initWith:function(A){var j=0,e;switch(typeof A){case"object":this.limbs=A.limbs.slice(0);break;case"number":this.limbs=[A],this.normalize();break;case"string":for(A=A.replace(/^0x/,""),this.limbs=[],e=this.radix/4,j=0;j<A.length;j+=e)this.limbs.push(parseInt(A.substring(Math.max(A.length-j-e,0),A.length-j),16));break;default:this.limbs=[0]}return this},equals:function(A){typeof A=="number"&&(A=new this.l(A));var j=0,e;for(this.fullReduce(),A.fullReduce(),e=0;e<this.limbs.length||e<A.limbs.length;e++)j|=this.getLimb(e)^A.getLimb(e);return j===0},getLimb:function(A){return A>=this.limbs.length?0:this.limbs[A]},greaterEquals:function(A){typeof A=="number"&&(A=new this.l(A));var j=0,e=0,t,r,a;for(t=Math.max(this.limbs.length,A.limbs.length)-1;0<=t;t--)r=this.getLimb(t),a=A.getLimb(t),e|=a-r&~j,j|=r-a&~e;return(e|~j)>>>31},toString:function(){this.fullReduce();var A="",j,e,t=this.limbs;for(j=0;j<this.limbs.length;j++){for(e=t[j].toString(16);j<this.limbs.length-1&&6>e.length;)e="0"+e;A=e+A}return"0x"+A},addM:function(A){typeof A!="object"&&(A=new this.l(A));var j=this.limbs,e=A.limbs;for(A=j.length;A<e.length;A++)j[A]=0;for(A=0;A<e.length;A++)j[A]+=e[A];return this},doubleM:function(){var A,j=0,e,t=this.radix,r=this.radixMask,a=this.limbs;for(A=0;A<a.length;A++)e=a[A],e=e+e+j,a[A]=e&r,j=e>>t;return j&&a.push(j),this},halveM:function(){var A,j=0,e,t=this.radix,r=this.limbs;for(A=r.length-1;0<=A;A--)e=r[A],r[A]=e+j>>1,j=(e&1)<<t;return r[r.length-1]||r.pop(),this},subM:function(A){typeof A!="object"&&(A=new this.l(A));var j=this.limbs,e=A.limbs;for(A=j.length;A<e.length;A++)j[A]=0;for(A=0;A<e.length;A++)j[A]-=e[A];return this},mod:function(A){var j=!this.greaterEquals(new z.bn(0));A=new z.bn(A).normalize();var e=new z.bn(this).normalize(),t=0;for(j&&(e=new z.bn(0).subM(e).normalize());e.greaterEquals(A);t++)A.doubleM();for(j&&(e=A.sub(e).normalize());0<t;t--)A.halveM(),e.greaterEquals(A)&&e.subM(A).normalize();return e.trim()},inverseMod:function(A){var j=new z.bn(1),e=new z.bn(0),t=new z.bn(this),r=new z.bn(A),a,n=1;if(!(A.limbs[0]&1))throw new z.exception.invalid("inverseMod: p must be odd");do for(t.limbs[0]&1&&(t.greaterEquals(r)||(a=t,t=r,r=a,a=j,j=e,e=a),t.subM(r),t.normalize(),j.greaterEquals(e)||j.addM(A),j.subM(e)),t.halveM(),j.limbs[0]&1&&j.addM(A),j.normalize(),j.halveM(),a=n=0;a<t.limbs.length;a++)n|=t.limbs[a];while(n);if(!r.equals(1))throw new z.exception.invalid("inverseMod: p and x must be relatively prime");return e},add:function(A){return this.copy().addM(A)},sub:function(A){return this.copy().subM(A)},mul:function(A){typeof A=="number"&&(A=new this.l(A));var j,e=this.limbs,t=A.limbs,r=e.length,a=t.length,n=new this.l,o=n.limbs,i,s=this.maxMul;for(j=0;j<this.limbs.length+A.limbs.length+1;j++)o[j]=0;for(j=0;j<r;j++){for(i=e[j],A=0;A<a;A++)o[j+A]+=i*t[A];--s||(s=this.maxMul,n.cnormalize())}return n.cnormalize().reduce()},square:function(){return this.mul(this)},power:function(A){A=new z.bn(A).normalize().trim().limbs;var j,e,t=new this.l(1),r=this;for(j=0;j<A.length;j++)for(e=0;e<this.radix&&(A[j]&1<<e&&(t=t.mul(r)),!(j==A.length-1&&A[j]>>e+1==0));e++)r=r.square();return t},mulmod:function(A,j){return this.mod(j).mul(A.mod(j)).mod(j)},powermod:function(A,j){if(A=new z.bn(A),j=new z.bn(j),(j.limbs[0]&1)==1){var e=this.montpowermod(A,j);if(e!=0)return e}for(var t,r=A.normalize().trim().limbs,a=new this.l(1),n=this,e=0;e<r.length;e++)for(t=0;t<this.radix&&(r[e]&1<<t&&(a=a.mulmod(n,j)),!(e==r.length-1&&r[e]>>t+1==0));t++)n=n.mulmod(n,j);return a},montpowermod:function(A,j){function e(F,S){var G=S%F.radix;return(F.limbs[Math.floor(S/F.radix)]&1<<G)>>G}function t(F,S){var G,x,R=(1<<s+1)-1;for(G=F.mul(S),x=G.mul(u),x.limbs=x.limbs.slice(0,i.limbs.length),x.limbs.length==i.limbs.length&&(x.limbs[i.limbs.length-1]&=R),x=x.mul(j),x=G.add(x).normalize().trim(),x.limbs=x.limbs.slice(i.limbs.length-1),G=0;G<x.limbs.length;G++)0<G&&(x.limbs[G-1]|=(x.limbs[G]&R)<<n-s-1),x.limbs[G]>>=s+1;return x.greaterEquals(j)&&x.subM(j),x}A=new z.bn(A).normalize().trim(),j=new z.bn(j);var r,a,n=this.radix,o=new this.l(1);r=this.copy();var i,s,l;for(l=A.bitLength(),i=new z.bn({limbs:j.copy().normalize().trim().limbs.map(function(){return 0})}),s=this.radix;0<s;s--)if((j.limbs[j.limbs.length-1]>>s&1)==1){i.limbs[i.limbs.length-1]=1<<s;break}if(l==0)return this;l=18>l?1:48>l?3:144>l?4:768>l?5:6;var c=i.copy(),k=j.copy();a=new z.bn(1);for(var u=new z.bn(0),m=i.copy();m.greaterEquals(1);)m.halveM(),(a.limbs[0]&1)==0?(a.halveM(),u.halveM()):(a.addM(k),a.halveM(),u.halveM(),u.addM(c));if(a=a.normalize(),u=u.normalize(),c.doubleM(),k=c.mulmod(c,j),!c.mul(a).sub(j.mul(u)).equals(1))return!1;for(r=t(r,k),o=t(o,k),c={},a=(1<<l-1)-1,c[1]=r.copy(),c[2]=t(r,r),r=1;r<=a;r++)c[2*r+1]=t(c[2*r-1],c[2]);for(r=A.bitLength()-1;0<=r;)if(e(A,r)==0)o=t(o,o),--r;else{for(k=r-l+1;e(A,k)==0;)k++;for(m=0,a=k;a<=r;a++)m+=e(A,a)<<a-k,o=t(o,o);o=t(o,c[m]),r=k-1}return t(o,1)},trim:function(){var A=this.limbs,j;do j=A.pop();while(A.length&&j===0);return A.push(j),this},reduce:function(){return this},fullReduce:function(){return this.normalize()},normalize:function(){var A=0,j,e=this.placeVal,t=this.ipv,r,a=this.limbs,n=a.length,o=this.radixMask;for(j=0;j<n||A!==0&&A!==-1;j++)A=(a[j]||0)+A,r=a[j]=A&o,A=(A-r)*t;return A===-1&&(a[j-1]-=e),this.trim(),this},cnormalize:function(){var A=0,j,e=this.ipv,t,r=this.limbs,a=r.length,n=this.radixMask;for(j=0;j<a-1;j++)A=r[j]+A,t=r[j]=A&n,A=(A-t)*e;return r[j]+=A,this},toBits:function(A){this.fullReduce(),A=A||this.exponent||this.bitLength();var j=Math.floor((A-1)/24),e=z.bitArray,t=[e.partial((A+7&-8)%this.radix||this.radix,this.getLimb(j))];for(j--;0<=j;j--)t=e.concat(t,[e.partial(Math.min(this.radix,A),this.getLimb(j))]),A-=this.radix;return t},bitLength:function(){this.fullReduce();for(var A=this.radix*(this.limbs.length-1),j=this.limbs[this.limbs.length-1];j;j>>>=1)A++;return A+7&-8}};z.bn.fromBits=function(A){var j=new this,e=[],t=z.bitArray,r=this.prototype,a=Math.min(this.bitLength||4294967296,t.bitLength(A)),n=a%r.radix||r.radix;for(e[0]=t.extract(A,0,n);n<a;n+=r.radix)e.unshift(t.extract(A,n,r.radix));return j.limbs=e,j};z.bn.prototype.ipv=1/(z.bn.prototype.placeVal=Math.pow(2,z.bn.prototype.radix));z.bn.prototype.radixMask=(1<<z.bn.prototype.radix)-1;z.bn.pseudoMersennePrime=function(A,j){function e(n){this.initWith(n)}var t=e.prototype=new z.bn,r,a;for(r=t.modOffset=Math.ceil(a=A/t.radix),t.exponent=A,t.offset=[],t.factor=[],t.minOffset=r,t.fullMask=0,t.fullOffset=[],t.fullFactor=[],t.modulus=e.modulus=new z.bn(Math.pow(2,A)),t.fullMask=0|-Math.pow(2,A%t.radix),r=0;r<j.length;r++)t.offset[r]=Math.floor(j[r][0]/t.radix-a),t.fullOffset[r]=Math.ceil(j[r][0]/t.radix-a),t.factor[r]=j[r][1]*Math.pow(.5,A-j[r][0]+t.offset[r]*t.radix),t.fullFactor[r]=j[r][1]*Math.pow(.5,A-j[r][0]+t.fullOffset[r]*t.radix),t.modulus.addM(new z.bn(Math.pow(2,j[r][0])*j[r][1])),t.minOffset=Math.min(t.minOffset,-t.offset[r]);return t.l=e,t.modulus.cnormalize(),t.reduce=function(){var n,o,i,s=this.modOffset,l=this.limbs,c=this.offset,k=this.offset.length,u=this.factor,m;for(n=this.minOffset;l.length>s;){for(i=l.pop(),m=l.length,o=0;o<k;o++)l[m+c[o]]-=u[o]*i;n--,n||(l.push(0),this.cnormalize(),n=this.minOffset)}return this.cnormalize(),this},t.ga=t.fullMask===-1?t.reduce:function(){var n=this.limbs,o=n.length-1,i,s;if(this.reduce(),o===this.modOffset-1){for(s=n[o]&this.fullMask,n[o]-=s,i=0;i<this.fullOffset.length;i++)n[o+this.fullOffset[i]]-=this.fullFactor[i]*s;this.normalize()}},t.fullReduce=function(){var n,o;for(this.ga(),this.addM(this.modulus),this.addM(this.modulus),this.normalize(),this.ga(),o=this.limbs.length;o<this.modOffset;o++)this.limbs[o]=0;for(n=this.greaterEquals(this.modulus),o=0;o<this.limbs.length;o++)this.limbs[o]-=this.modulus.limbs[o]*n;return this.cnormalize(),this},t.inverse=function(){return this.power(this.modulus.sub(2))},e.fromBits=z.bn.fromBits,e};var H7=z.bn.pseudoMersennePrime;z.bn.prime={p127:H7(127,[[0,-1]]),p25519:H7(255,[[0,-19]]),p192k:H7(192,[[32,-1],[12,-1],[8,-1],[7,-1],[6,-1],[3,-1],[0,-1]]),p224k:H7(224,[[32,-1],[12,-1],[11,-1],[9,-1],[7,-1],[4,-1],[1,-1],[0,-1]]),p256k:H7(256,[[32,-1],[9,-1],[8,-1],[7,-1],[6,-1],[4,-1],[0,-1]]),p192:H7(192,[[0,-1],[64,-1]]),p224:H7(224,[[0,1],[96,-1]]),p256:H7(256,[[0,-1],[96,1],[192,1],[224,-1]]),p384:H7(384,[[0,-1],[32,1],[96,-1],[128,-1]]),p521:H7(521,[[0,-1]])};z.bn.random=function(A,j){typeof A!="object"&&(A=new z.bn(A));for(var e,t,r=A.limbs.length,a=A.limbs[r-1]+1,n=new z.bn;;){do e=z.random.randomWords(r,j),0>e[r-1]&&(e[r-1]+=4294967296);while(Math.floor(e[r-1]/a)===Math.floor(4294967296/a));for(e[r-1]%=a,t=0;t<r-1;t++)e[t]&=A.radixMask;if(n.limbs=e,!n.greaterEquals(A))return n}};z.cipher.aes=function(A){this.I[0][0][0]||this.N();var j,e,t,r,a=this.I[0][4],n=this.I[1];j=A.length;var o=1;if(j!==4&&j!==6&&j!==8)throw new z.exception.invalid("invalid aes key size");for(this.f=[t=A.slice(0),r=[]],A=j;A<4*j+28;A++)e=t[A-1],(A%j===0||j===8&&A%j===4)&&(e=a[e>>>24]<<24^a[e>>16&255]<<16^a[e>>8&255]<<8^a[e&255],A%j===0&&(e=e<<8^e>>>24^o<<24,o=o<<1^283*(o>>7))),t[A]=t[A-j]^e;for(j=0;A;j++,A--)e=t[j&3?A:A-4],r[j]=4>=A||4>j?e:n[0][a[e>>>24]]^n[1][a[e>>16&255]]^n[2][a[e>>8&255]]^n[3][a[e&255]]};z.cipher.aes.prototype={encrypt:function(A){return zxA(this,A,0)},decrypt:function(A){return zxA(this,A,1)},I:[[[],[],[],[],[]],[[],[],[],[],[]]],N:function(){var A=this.I[0],j=this.I[1],e=A[4],t=j[4],r,a,n,o=[],i=[],s,l,c,k;for(r=0;256>r;r++)i[(o[r]=r<<1^283*(r>>7))^r]=r;for(a=n=0;!e[a];a^=s||1,n=i[n]||1)for(c=n^n<<1^n<<2^n<<3^n<<4,c=c>>8^c&255^99,e[a]=c,t[c]=a,l=o[r=o[s=o[a]]],k=16843009*l^65537*r^257*s^16843008*a,l=257*o[c]^16843008*c,r=0;4>r;r++)A[r][a]=l=l<<24^l>>>8,j[r][c]=k=k<<24^k>>>8;for(r=0;5>r;r++)A[r]=A[r].slice(0),j[r]=j[r].slice(0)}};function zxA(A,j,e){if(j.length!==4)throw new z.exception.invalid("invalid aes block size");var t=A.f[e],r=j[0]^t[0],a=j[e?3:1]^t[1],n=j[2]^t[2];j=j[e?1:3]^t[3];var o,i,s,l=t.length/4-2,c,k=4,u=[0,0,0,0];o=A.I[e],A=o[0];var m=o[1],F=o[2],S=o[3],G=o[4];for(c=0;c<l;c++)o=A[r>>>24]^m[a>>16&255]^F[n>>8&255]^S[j&255]^t[k],i=A[a>>>24]^m[n>>16&255]^F[j>>8&255]^S[r&255]^t[k+1],s=A[n>>>24]^m[j>>16&255]^F[r>>8&255]^S[a&255]^t[k+2],j=A[j>>>24]^m[r>>16&255]^F[a>>8&255]^S[n&255]^t[k+3],k+=4,r=o,a=i,n=s;for(c=0;4>c;c++)u[e?3&-c:c]=G[r>>>24]<<24^G[a>>16&255]<<16^G[n>>8&255]<<8^G[j&255]^t[k++],o=r,r=a,a=n,n=j,j=o;return u}z.bitArray={bitSlice:function(A,j,e){return A=z.bitArray.fa(A.slice(j/32),32-(j&31)).slice(1),e===void 0?A:z.bitArray.clamp(A,e-j)},extract:function(A,j,e){var t=Math.floor(-j-e&31);return((j+e-1^j)&-32?A[j/32|0]<<32-t^A[j/32+1|0]>>>t:A[j/32|0]>>>t)&(1<<e)-1},concat:function(A,j){if(A.length===0||j.length===0)return A.concat(j);var e=A[A.length-1],t=z.bitArray.getPartial(e);return t===32?A.concat(j):z.bitArray.fa(j,t,e|0,A.slice(0,A.length-1))},bitLength:function(A){var j=A.length;return j===0?0:32*(j-1)+z.bitArray.getPartial(A[j-1])},clamp:function(A,j){if(32*A.length<j)return A;A=A.slice(0,Math.ceil(j/32));var e=A.length;return j=j&31,0<e&&j&&(A[e-1]=z.bitArray.partial(j,A[e-1]&2147483648>>j-1,1)),A},partial:function(A,j,e){return A===32?j:(e?j|0:j<<32-A)+1099511627776*A},getPartial:function(A){return Math.round(A/1099511627776)||32},equal:function(A,j){if(z.bitArray.bitLength(A)!==z.bitArray.bitLength(j))return!1;var e=0,t;for(t=0;t<A.length;t++)e|=A[t]^j[t];return e===0},fa:function(A,j,e,t){var r;for(r=0,t===void 0&&(t=[]);32<=j;j-=32)t.push(e),e=0;if(j===0)return t.concat(A);for(r=0;r<A.length;r++)t.push(e|A[r]>>>j),e=A[r]<<32-j;return r=A.length?A[A.length-1]:0,A=z.bitArray.getPartial(r),t.push(z.bitArray.partial(j+A&31,32<j+A?e:t.pop(),1)),t},ya:function(A,j){return[A[0]^j[0],A[1]^j[1],A[2]^j[2],A[3]^j[3]]},byteswapM:function(A){var j,e;for(j=0;j<A.length;++j)e=A[j],A[j]=e>>>24|e>>>8&65280|(e&65280)<<8|e<<24;return A}};z.codec.bytes={fromBits:function(A){var j=[],e=z.bitArray.bitLength(A),t,r;for(t=0;t<e/8;t++)(t&3)===0&&(r=A[t/4]),j.push(r>>>24),r<<=8;return j},toBits:function(A){var j=[],e,t=0;for(e=0;e<A.length;e++)t=t<<8|A[e],(e&3)===3&&(j.push(t),t=0);return e&3&&j.push(z.bitArray.partial(8*(e&3),t)),j}};z.codec.utf8String={fromBits:function(A){var j="",e=z.bitArray.bitLength(A),t,r;for(t=0;t<e/8;t++)(t&3)===0&&(r=A[t/4]),j+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(j))},toBits:function(A){A=unescape(encodeURIComponent(A));var j=[],e,t=0;for(e=0;e<A.length;e++)t=t<<8|A.charCodeAt(e),(e&3)===3&&(j.push(t),t=0);return e&3&&j.push(z.bitArray.partial(8*(e&3),t)),j}};z.codec.hex={fromBits:function(A){var j="",e;for(e=0;e<A.length;e++)j+=((A[e]|0)+0xf00000000000).toString(16).substr(4);return j.substr(0,z.bitArray.bitLength(A)/4)},toBits:function(A){var j,e=[],t;for(A=A.replace(/\s|0x/g,""),t=A.length,A=A+"00000000",j=0;j<A.length;j+=8)e.push(parseInt(A.substr(j,8),16)^0);return z.bitArray.clamp(e,4*t)}};z.codec.base32={L:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",ca:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(A,j,e){var t=z.codec.base32.BASE,r=z.codec.base32.REMAINING,a="",n=0,o=z.codec.base32.L,i=0,s=z.bitArray.bitLength(A);for(e&&(o=z.codec.base32.ca),e=0;a.length*t<s;)a+=o.charAt((i^A[e]>>>n)>>>r),n<t?(i=A[e]<<t-n,n+=r,e++):(i<<=t,n-=t);for(;a.length&7&&!j;)a+="=";return a},toBits:function(A,j){A=A.replace(/\s|=/g,"").toUpperCase();var e=z.codec.base32.BITS,t=z.codec.base32.BASE,r=z.codec.base32.REMAINING,a=[],n,o=0,i=z.codec.base32.L,s=0,l,c="base32";for(j&&(i=z.codec.base32.ca,c="base32hex"),n=0;n<A.length;n++){if(l=i.indexOf(A.charAt(n)),0>l){if(!j)try{return z.codec.base32hex.toBits(A)}catch{}throw new z.exception.invalid("this isn't "+c+"!")}o>r?(o-=r,a.push(s^l>>>o),s=l<<e-o):(o+=t,s^=l<<e-o)}return o&56&&a.push(z.bitArray.partial(o&56,s,1)),a}};z.codec.base32hex={fromBits:function(A,j){return z.codec.base32.fromBits(A,j,1)},toBits:function(A){return z.codec.base32.toBits(A,1)}};z.codec.base64={L:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(A,j,e){var t="",r=0,a=z.codec.base64.L,n=0,o=z.bitArray.bitLength(A);for(e&&(a=a.substr(0,62)+"-_"),e=0;6*t.length<o;)t+=a.charAt((n^A[e]>>>r)>>>26),6>r?(n=A[e]<<6-r,r+=26,e++):(n<<=6,r-=6);for(;t.length&3&&!j;)t+="=";return t},toBits:function(A,j){A=A.replace(/\s|=/g,"");var e=[],t,r=0,a=z.codec.base64.L,n=0,o;for(j&&(a=a.substr(0,62)+"-_"),t=0;t<A.length;t++){if(o=a.indexOf(A.charAt(t)),0>o)throw new z.exception.invalid("this isn't base64: '"+A.charAt(t)+"', "+t+" -- "+A.length);26<r?(r-=26,e.push(n^o>>>r),n=o<<32-r):(r+=6,n^=o<<32-r)}return r&56&&e.push(z.bitArray.partial(r&56,n,1)),e}};z.codec.base64url={fromBits:function(A){return z.codec.base64.fromBits(A,1,1)},toBits:function(A){return z.codec.base64.toBits(A,1)}};z.hash.sha256=function(A){this.f[0]||this.N(),A?(this.i=A.i.slice(0),this.g=A.g.slice(0),this.c=A.c):this.reset()};z.hash.sha256.hash=function(A){return new z.hash.sha256().update(A).finalize()};z.hash.sha256.prototype={blockSize:512,reset:function(){return this.i=this.s.slice(0),this.g=[],this.c=0,this},update:function(A){typeof A=="string"&&(A=z.codec.utf8String.toBits(A));var j,e=this.g=z.bitArray.concat(this.g,A);if(j=this.c,A=this.c=j+z.bitArray.bitLength(A),9007199254740991<A)throw new z.exception.invalid("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array<"u"){var t=new Uint32Array(e),r=0;for(j=512+j-(512+j&511);j<=A;j+=512)this.j(t.subarray(16*r,16*(r+1))),r+=1;e.splice(0,16*r)}else for(j=512+j-(512+j&511);j<=A;j+=512)this.j(e.splice(0,16));return this},finalize:function(){var A,e=this.g,j=this.i,e=z.bitArray.concat(e,[z.bitArray.partial(1,1)]);for(A=e.length+2;A&15;A++)e.push(0);for(e.push(Math.floor(this.c/4294967296)),e.push(this.c|0);e.length;)this.j(e.splice(0,16));return this.reset(),j},s:[],f:[],N:function(){function A(a){return 4294967296*(a-Math.floor(a))|0}for(var j=0,e=2,t,r;64>j;e++){for(r=!0,t=2;t*t<=e;t++)if(e%t===0){r=!1;break}r&&(8>j&&(this.s[j]=A(Math.pow(e,.5))),this.f[j]=A(Math.pow(e,1/3)),j++)}},j:function(A){var j,e,t,r=this.i,a=this.f,n=r[0],o=r[1],i=r[2],s=r[3],l=r[4],c=r[5],k=r[6],u=r[7];for(j=0;64>j;j++)16>j?e=A[j]:(e=A[j+1&15],t=A[j+14&15],e=A[j&15]=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+A[j&15]+A[j+9&15]|0),e=e+u+(l>>>6^l>>>11^l>>>25^l<<26^l<<21^l<<7)+(k^l&(c^k))+a[j],u=k,k=c,c=l,l=s+e|0,s=i,i=o,o=n,n=e+(o&i^s&(o^i))+(o>>>2^o>>>13^o>>>22^o<<30^o<<19^o<<10)|0;r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+l|0,r[5]=r[5]+c|0,r[6]=r[6]+k|0,r[7]=r[7]+u|0}};z.hash.sha1=function(A){A?(this.i=A.i.slice(0),this.g=A.g.slice(0),this.c=A.c):this.reset()};z.hash.sha1.hash=function(A){return new z.hash.sha1().update(A).finalize()};z.hash.sha1.prototype={blockSize:512,reset:function(){return this.i=this.s.slice(0),this.g=[],this.c=0,this},update:function(A){typeof A=="string"&&(A=z.codec.utf8String.toBits(A));var j,e=this.g=z.bitArray.concat(this.g,A);if(j=this.c,A=this.c=j+z.bitArray.bitLength(A),9007199254740991<A)throw new z.exception.invalid("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array<"u"){var t=new Uint32Array(e),r=0;for(j=this.blockSize+j-(this.blockSize+j&this.blockSize-1);j<=A;j+=this.blockSize)this.j(t.subarray(16*r,16*(r+1))),r+=1;e.splice(0,16*r)}else for(j=this.blockSize+j-(this.blockSize+j&this.blockSize-1);j<=A;j+=this.blockSize)this.j(e.splice(0,16));return this},finalize:function(){var A,e=this.g,j=this.i,e=z.bitArray.concat(e,[z.bitArray.partial(1,1)]);for(A=e.length+2;A&15;A++)e.push(0);for(e.push(Math.floor(this.c/4294967296)),e.push(this.c|0);e.length;)this.j(e.splice(0,16));return this.reset(),j},s:[1732584193,4023233417,2562383102,271733878,3285377520],f:[1518500249,1859775393,2400959708,3395469782],j:function(A){var j,e,t,r,a,n,o=this.i,i;if(typeof Uint32Array<"u")for(i=Array(80),e=0;16>e;e++)i[e]=A[e];else i=A;for(e=o[0],t=o[1],r=o[2],a=o[3],n=o[4],A=0;79>=A;A++)16<=A&&(j=i[A-3]^i[A-8]^i[A-14]^i[A-16],i[A]=j<<1|j>>>31),j=19>=A?t&r|~t&a:39>=A?t^r^a:59>=A?t&r|t&a|r&a:79>=A?t^r^a:void 0,j=(e<<5|e>>>27)+j+n+i[A]+this.f[Math.floor(A/20)]|0,n=a,a=r,r=t<<30|t>>>2,t=e,e=j;o[0]=o[0]+e|0,o[1]=o[1]+t|0,o[2]=o[2]+r|0,o[3]=o[3]+a|0,o[4]=o[4]+n|0}};z.hash.sha512=function(A){this.f[0]||this.N(),A?(this.i=A.i.slice(0),this.g=A.g.slice(0),this.c=A.c):this.reset()};z.hash.sha512.hash=function(A){return new z.hash.sha512().update(A).finalize()};z.hash.sha512.prototype={blockSize:1024,reset:function(){return this.i=this.s.slice(0),this.g=[],this.c=0,this},update:function(A){typeof A=="string"&&(A=z.codec.utf8String.toBits(A));var j,e=this.g=z.bitArray.concat(this.g,A);if(j=this.c,A=this.c=j+z.bitArray.bitLength(A),9007199254740991<A)throw new z.exception.invalid("Cannot hash more than 2^53 - 1 bits");if(typeof Uint32Array<"u"){var t=new Uint32Array(e),r=0;for(j=1024+j-(1024+j&1023);j<=A;j+=1024)this.j(t.subarray(32*r,32*(r+1))),r+=1;e.splice(0,32*r)}else for(j=1024+j-(1024+j&1023);j<=A;j+=1024)this.j(e.splice(0,32));return this},finalize:function(){var A,e=this.g,j=this.i,e=z.bitArray.concat(e,[z.bitArray.partial(1,1)]);for(A=e.length+4;A&31;A++)e.push(0);for(e.push(0),e.push(0),e.push(Math.floor(this.c/4294967296)),e.push(this.c|0);e.length;)this.j(e.splice(0,32));return this.reset(),j},s:[],ra:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],f:[],ta:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],N:function(){function A(n){return 4294967296*(n-Math.floor(n))|0}function j(n){return 1099511627776*(n-Math.floor(n))&255}for(var e=0,t=2,r,a;80>e;t++){for(a=!0,r=2;r*r<=t;r++)if(t%r===0){a=!1;break}a&&(8>e&&(this.s[2*e]=A(Math.pow(t,.5)),this.s[2*e+1]=j(Math.pow(t,.5))<<24|this.ra[e]),this.f[2*e]=A(Math.pow(t,1/3)),this.f[2*e+1]=j(Math.pow(t,1/3))<<24|this.ta[e],e++)}},j:function(A){var j,e,t=this.i,r=this.f,a=t[0],n=t[1],o=t[2],i=t[3],s=t[4],l=t[5],c=t[6],k=t[7],u=t[8],m=t[9],F=t[10],S=t[11],G=t[12],x=t[13],R=t[14],P=t[15],D;if(typeof Uint32Array<"u"){D=Array(160);for(var y=0;32>y;y++)D[y]=A[y]}else D=A;var y=a,h=n,O=o,Q=i,AA=s,nA=l,bA=c,XA=k,dj=u,yA=m,tj=F,LA=S,Qj=G,Oj=x,Ej=R,Yj=P;for(A=0;80>A;A++){if(16>A)j=D[2*A],e=D[2*A+1];else{e=D[2*(A-15)];var Ce=D[2*(A-15)+1];j=(Ce<<31|e>>>1)^(Ce<<24|e>>>8)^e>>>7;var fe=(e<<31|Ce>>>1)^(e<<24|Ce>>>8)^(e<<25|Ce>>>7);e=D[2*(A-2)];var qj=D[2*(A-2)+1],Ce=(qj<<13|e>>>19)^(e<<3|qj>>>29)^e>>>6,qj=(e<<13|qj>>>19)^(qj<<3|e>>>29)^(e<<26|qj>>>6),Tj=D[2*(A-7)],Tt=D[2*(A-16)],Cj=D[2*(A-16)+1];e=fe+D[2*(A-7)+1],j=j+Tj+(e>>>0<fe>>>0?1:0),e+=qj,j+=Ce+(e>>>0<qj>>>0?1:0),e+=Cj,j+=Tt+(e>>>0<Cj>>>0?1:0)}D[2*A]=j|=0,D[2*A+1]=e|=0;var Tj=dj&tj^~dj&Qj,mj=yA&LA^~yA&Oj,qj=y&O^y&AA^O&AA,_e=h&Q^h&nA^Q&nA,Tt=(h<<4|y>>>28)^(y<<30|h>>>2)^(y<<25|h>>>7),Cj=(y<<4|h>>>28)^(h<<30|y>>>2)^(h<<25|y>>>7),xt=r[2*A],At=r[2*A+1],Ce=Yj+((dj<<18|yA>>>14)^(dj<<14|yA>>>18)^(yA<<23|dj>>>9)),fe=Ej+((yA<<18|dj>>>14)^(yA<<14|dj>>>18)^(dj<<23|yA>>>9))+(Ce>>>0<Yj>>>0?1:0),Ce=Ce+mj,fe=fe+(Tj+(Ce>>>0<mj>>>0?1:0)),Ce=Ce+At,fe=fe+(xt+(Ce>>>0<At>>>0?1:0)),Ce=Ce+e|0,fe=fe+(j+(Ce>>>0<e>>>0?1:0));e=Cj+_e,j=Tt+qj+(e>>>0<Cj>>>0?1:0),Ej=Qj,Yj=Oj,Qj=tj,Oj=LA,tj=dj,LA=yA,yA=XA+Ce|0,dj=bA+fe+(yA>>>0<XA>>>0?1:0)|0,bA=AA,XA=nA,AA=O,nA=Q,O=y,Q=h,h=Ce+e|0,y=fe+j+(h>>>0<Ce>>>0?1:0)|0}n=t[1]=n+h|0,t[0]=a+y+(n>>>0<h>>>0?1:0)|0,i=t[3]=i+Q|0,t[2]=o+O+(i>>>0<Q>>>0?1:0)|0,l=t[5]=l+nA|0,t[4]=s+AA+(l>>>0<nA>>>0?1:0)|0,k=t[7]=k+XA|0,t[6]=c+bA+(k>>>0<XA>>>0?1:0)|0,m=t[9]=m+yA|0,t[8]=u+dj+(m>>>0<yA>>>0?1:0)|0,S=t[11]=S+LA|0,t[10]=F+tj+(S>>>0<LA>>>0?1:0)|0,x=t[13]=x+Oj|0,t[12]=G+Qj+(x>>>0<Oj>>>0?1:0)|0,P=t[15]=P+Yj|0,t[14]=R+Ej+(P>>>0<Yj>>>0?1:0)|0}};z.mode.gcm={name:"gcm",encrypt:function(A,j,e,t,r){var a=j.slice(0);return j=z.bitArray,t=t||[],A=z.mode.gcm.aa(!0,A,a,t,e,r||128),j.concat(A.data,A.tag)},decrypt:function(A,j,e,t,r){var a=j.slice(0),n=z.bitArray,o=n.bitLength(a);if(r=r||128,t=t||[],r<=o?(j=n.bitSlice(a,o-r),a=n.bitSlice(a,0,o-r)):(j=a,a=[]),A=z.mode.gcm.aa(!1,A,a,t,e,r),!n.equal(A.tag,j))throw new z.exception.corrupt("gcm: tag doesn't match");return A.data},qa:function(A,j){var e,t,r,a,n,o=z.bitArray.ya;for(r=[0,0,0,0],a=j.slice(0),e=0;128>e;e++){for((t=(A[Math.floor(e/32)]&1<<31-e%32)!==0)&&(r=o(r,a)),n=(a[3]&1)!==0,t=3;0<t;t--)a[t]=a[t]>>>1|(a[t-1]&1)<<31;a[0]>>>=1,n&&(a[0]^=-520093696)}return r},D:function(A,j,e){var t,r=e.length;for(j=j.slice(0),t=0;t<r;t+=4)j[0]^=4294967295&e[t],j[1]^=4294967295&e[t+1],j[2]^=4294967295&e[t+2],j[3]^=4294967295&e[t+3],j=z.mode.gcm.qa(j,A);return j},aa:function(A,j,e,t,r,a){var n,o,i,s,l,c,k,u,m=z.bitArray;for(c=e.length,k=m.bitLength(e),u=m.bitLength(t),o=m.bitLength(r),n=j.encrypt([0,0,0,0]),o===96?(r=r.slice(0),r=m.concat(r,[1])):(r=z.mode.gcm.D(n,[0,0,0,0],r),r=z.mode.gcm.D(n,r,[0,0,Math.floor(o/4294967296),o&4294967295])),o=z.mode.gcm.D(n,[0,0,0,0],t),l=r.slice(0),t=o.slice(0),A||(t=z.mode.gcm.D(n,o,e)),s=0;s<c;s+=4)l[3]++,i=j.encrypt(l),e[s]^=i[0],e[s+1]^=i[1],e[s+2]^=i[2],e[s+3]^=i[3];return e=m.clamp(e,k),A&&(t=z.mode.gcm.D(n,o,e)),A=[Math.floor(u/4294967296),u&4294967295,Math.floor(k/4294967296),k&4294967295],t=z.mode.gcm.D(n,t,A),i=j.encrypt(r),t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3],{tag:m.bitSlice(t,0,a),data:e}}};z.misc.hmac=function(A,j){this.ba=j=j||z.hash.sha256;var e=[[],[]],t,r=j.prototype.blockSize/32;for(this.K=[new j,new j],A.length>r&&(A=j.hash(A)),t=0;t<r;t++)e[0][t]=A[t]^909522486,e[1][t]=A[t]^1549556828;this.K[0].update(e[0]),this.K[1].update(e[1]),this.Y=new j(this.K[0])};z.misc.hmac.prototype.encrypt=z.misc.hmac.prototype.mac=function(A){if(this.ha)throw new z.exception.invalid("encrypt on already updated hmac called!");return this.update(A),this.digest(A)};z.misc.hmac.prototype.reset=function(){this.Y=new this.ba(this.K[0]),this.ha=!1};z.misc.hmac.prototype.update=function(A){this.ha=!0,this.Y.update(A)};z.misc.hmac.prototype.digest=function(){var A=this.Y.finalize(),A=new this.ba(this.K[1]).update(A).finalize();return this.reset(),A};z.misc.pbkdf2=function(A,j,e,t,r){if(e=e||1e4,0>t||0>e)throw new z.exception.invalid("invalid params to pbkdf2");typeof A=="string"&&(A=z.codec.utf8String.toBits(A)),typeof j=="string"&&(j=z.codec.utf8String.toBits(j)),r=r||z.misc.hmac,A=new r(A);var a,n,o,i,s=[],l=z.bitArray;for(i=1;32*s.length<(t||1);i++){for(r=a=A.encrypt(l.concat(j,[i])),n=1;n<e;n++)for(a=A.encrypt(a),o=0;o<a.length;o++)r[o]^=a[o];s=s.concat(r)}return t&&(s=l.clamp(s,t)),s};z.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},pa:function(A,j,e,t){e=e||{},t=t||{};var r=z.json,a=r.w({iv:z.random.randomWords(4,0)},r.defaults),n;if(r.w(a,e),e=a.adata,typeof a.salt=="string"&&(a.salt=z.codec.base64.toBits(a.salt)),typeof a.iv=="string"&&(a.iv=z.codec.base64.toBits(a.iv)),!z.mode[a.mode]||!z.cipher[a.cipher]||typeof A=="string"&&100>=a.iter||a.ts!==64&&a.ts!==96&&a.ts!==128||a.ks!==128&&a.ks!==192&&a.ks!==256||2>a.iv.length||4<a.iv.length)throw new z.exception.invalid("json encrypt: invalid parameters");return typeof A=="string"?(n=z.misc.cachedPbkdf2(A,a),A=n.key.slice(0,a.ks/32),a.salt=n.salt):z.ecc&&A instanceof z.ecc.elGamal.publicKey&&(n=A.kem(),a.kemtag=n.tag,A=n.key.slice(0,a.ks/32)),typeof j=="string"&&(j=z.codec.utf8String.toBits(j)),typeof e=="string"&&(a.adata=e=z.codec.utf8String.toBits(e)),n=new z.cipher[a.cipher](A),r.w(t,a),t.key=A,a.ct=a.mode==="ccm"&&z.arrayBuffer&&z.arrayBuffer.ccm&&j instanceof ArrayBuffer?z.arrayBuffer.ccm.encrypt(n,j,a.iv,e,a.ts):z.mode[a.mode].encrypt(n,j,a.iv,e,a.ts),a},encrypt:function(A,j,e,t){var r=z.json,a=r.pa.apply(r,arguments);return r.encode(a)},oa:function(A,j,e,t){e=e||{},t=t||{};var r=z.json;j=r.w(r.w(r.w({},r.defaults),j),e,!0);var a,n;if(a=j.adata,typeof j.salt=="string"&&(j.salt=z.codec.base64.toBits(j.salt)),typeof j.iv=="string"&&(j.iv=z.codec.base64.toBits(j.iv)),!z.mode[j.mode]||!z.cipher[j.cipher]||typeof A=="string"&&100>=j.iter||j.ts!==64&&j.ts!==96&&j.ts!==128||j.ks!==128&&j.ks!==192&&j.ks!==256||!j.iv||2>j.iv.length||4<j.iv.length)throw new z.exception.invalid("json decrypt: invalid parameters");return typeof A=="string"?(n=z.misc.cachedPbkdf2(A,j),A=n.key.slice(0,j.ks/32),j.salt=n.salt):z.ecc&&A instanceof z.ecc.elGamal.secretKey&&(A=A.unkem(z.codec.base64.toBits(j.kemtag)).slice(0,j.ks/32)),typeof a=="string"&&(a=z.codec.utf8String.toBits(a)),n=new z.cipher[j.cipher](A),a=j.mode==="ccm"&&z.arrayBuffer&&z.arrayBuffer.ccm&&j.ct instanceof ArrayBuffer?z.arrayBuffer.ccm.decrypt(n,j.ct,j.iv,j.tag,a,j.ts):z.mode[j.mode].decrypt(n,j.ct,j.iv,a,j.ts),r.w(t,j),t.key=A,e.raw===1?a:z.codec.utf8String.fromBits(a)},decrypt:function(A,j,e,t){var r=z.json;return r.oa(A,r.decode(j),e,t)},encode:function(A){var j,e="{",t="";for(j in A)if(A.hasOwnProperty(j)){if(!j.match(/^[a-z0-9]+$/i))throw new z.exception.invalid("json encode: invalid property name");switch(e+=t+'"'+j+'":',t=",",typeof A[j]){case"number":case"boolean":e+=A[j];break;case"string":e+='"'+escape(A[j])+'"';break;case"object":e+='"'+z.codec.base64.fromBits(A[j],0)+'"';break;default:throw new z.exception.bug("json encode: unsupported type")}}return e+"}"},decode:function(A){if(A=A.replace(/\s/g,""),!A.match(/^\{.*\}$/))throw new z.exception.invalid("json decode: this isn't json!");A=A.replace(/^\{|\}$/g,"").split(/,/);var j={},e,t;for(e=0;e<A.length;e++){if(!(t=A[e].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new z.exception.invalid("json decode: this isn't json!");t[3]!=null?j[t[2]]=parseInt(t[3],10):t[4]!=null?j[t[2]]=t[2].match(/^(ct|adata|salt|iv)$/)?z.codec.base64.toBits(t[4]):unescape(t[4]):t[5]!=null&&(j[t[2]]=t[5]==="true")}return j},w:function(A,j,e){if(A===void 0&&(A={}),j===void 0)return A;for(var t in j)if(j.hasOwnProperty(t)){if(e&&A[t]!==void 0&&A[t]!==j[t])throw new z.exception.invalid("required parameter overridden");A[t]=j[t]}return A},Aa:function(A,j){var e={},t;for(t in A)A.hasOwnProperty(t)&&A[t]!==j[t]&&(e[t]=A[t]);return e},za:function(A,j){var e={},t;for(t=0;t<j.length;t++)A[j[t]]!==void 0&&(e[j[t]]=A[j[t]]);return e}};z.encrypt=z.json.encrypt;z.decrypt=z.json.decrypt;z.misc.wa={};z.misc.cachedPbkdf2=function(A,j){var e=z.misc.wa,t;return j=j||{},t=j.iter||1e3,e=e[A]=e[A]||{},t=e[t]=e[t]||{firstSalt:j.salt&&j.salt.length?j.salt.slice(0):z.random.randomWords(2,0)},e=j.salt===void 0?t.firstSalt:j.salt,t[e]=t[e]||z.misc.pbkdf2(A,e,j.iter),{key:t[e].slice(0),salt:e.slice(0)}};z.ecc={};z.ecc.point=function(A,j,e){j===void 0?this.isIdentity=!0:(j instanceof z.bn&&(j=new A.field(j)),e instanceof z.bn&&(e=new A.field(e)),this.x=j,this.y=e,this.isIdentity=!1),this.curve=A};z.ecc.point.prototype={toJac:function(){return new z.ecc.pointJac(this.curve,this.x,this.y,new this.curve.field(1))},mult:function(A){return this.toJac().mult(A,this).toAffine()},mult2:function(A,j,e){return this.toJac().mult2(A,this,j,e).toAffine()},multiples:function(){var A,j,e;if(this.da===void 0)for(e=this.toJac().doubl(),A=this.da=[new z.ecc.point(this.curve),this,e.toAffine()],j=3;16>j;j++)e=e.add(this),A.push(e.toAffine());return this.da},negate:function(){var A=new this.curve.field(0).sub(this.y).normalize().reduce();return new z.ecc.point(this.curve,this.x,A)},isValid:function(){return this.y.square().equals(this.curve.b.add(this.x.mul(this.curve.a.add(this.x.square()))))},toBits:function(){return z.bitArray.concat(this.x.toBits(),this.y.toBits())}};z.ecc.pointJac=function(A,j,e,t){j===void 0?this.isIdentity=!0:(this.x=j,this.y=e,this.z=t,this.isIdentity=!1),this.curve=A};z.ecc.pointJac.prototype={add:function(A){var j,e,t,r;if(this.curve!==A.curve)throw new z.exception.invalid("sjcl['ecc']['add'](): Points must be on the same curve to add them!");return this.isIdentity?A.toJac():A.isIdentity?this:(j=this.z.square(),e=A.x.mul(j).subM(this.x),e.equals(0)?this.y.equals(A.y.mul(j.mul(this.z)))?this.doubl():new z.ecc.pointJac(this.curve):(j=A.y.mul(j.mul(this.z)).subM(this.y),t=e.square(),A=j.square(),r=e.square().mul(e).addM(this.x.add(this.x).mul(t)),A=A.subM(r),j=this.x.mul(t).subM(A).mul(j),t=this.y.mul(e.square().mul(e)),j=j.subM(t),e=this.z.mul(e),new z.ecc.pointJac(this.curve,A,j,e)))},doubl:function(){if(this.isIdentity)return this;var j=this.y.square(),e=j.mul(this.x.mul(4)),t=j.square().mul(8),j=this.z.square(),A=this.curve.a.toString()==new z.bn(-3).toString()?this.x.sub(j).mul(3).mul(this.x.add(j)):this.x.square().mul(3).add(j.square().mul(this.curve.a)),j=A.square().subM(e).subM(e),e=e.sub(j).mul(A).subM(t),t=this.y.add(this.y).mul(this.z);return new z.ecc.pointJac(this.curve,j,e,t)},toAffine:function(){if(this.isIdentity||this.z.equals(0))return new z.ecc.point(this.curve);var A=this.z.inverse(),j=A.square();return new z.ecc.point(this.curve,this.x.mul(j).fullReduce(),this.y.mul(j.mul(A)).fullReduce())},mult:function(A,j){typeof A=="number"?A=[A]:A.limbs!==void 0&&(A=A.normalize().limbs);var e,t,r=new z.ecc.point(this.curve).toJac(),a=j.multiples();for(e=A.length-1;0<=e;e--)for(t=z.bn.prototype.radix-4;0<=t;t-=4)r=r.doubl().doubl().doubl().doubl().add(a[A[e]>>t&15]);return r},mult2:function(A,j,e,t){typeof A=="number"?A=[A]:A.limbs!==void 0&&(A=A.normalize().limbs),typeof e=="number"?e=[e]:e.limbs!==void 0&&(e=e.normalize().limbs);var r,a=new z.ecc.point(this.curve).toJac();j=j.multiples();var n=t.multiples(),o,i;for(t=Math.max(A.length,e.length)-1;0<=t;t--)for(o=A[t]|0,i=e[t]|0,r=z.bn.prototype.radix-4;0<=r;r-=4)a=a.doubl().doubl().doubl().doubl().add(j[o>>r&15]).add(n[i>>r&15]);return a},negate:function(){return this.toAffine().negate().toJac()},isValid:function(){var j=this.z.square(),A=j.square(),j=A.mul(j);return this.y.square().equals(this.curve.b.mul(j).add(this.x.mul(this.curve.a.mul(A).add(this.x.square()))))}};z.ecc.curve=function(A,j,e,t,r,a){this.field=A,this.r=new z.bn(j),this.a=new A(e),this.b=new A(t),this.G=new z.ecc.point(this,new A(r),new A(a))};z.ecc.curve.prototype.fromBits=function(A){var j=z.bitArray,e=this.field.prototype.exponent+7&-8;if(A=new z.ecc.point(this,this.field.fromBits(j.bitSlice(A,0,e)),this.field.fromBits(j.bitSlice(A,e,2*e))),!A.isValid())throw new z.exception.corrupt("not on the curve!");return A};z.ecc.curves={c192:new z.ecc.curve(z.bn.prime.p192,"0xffffffffffffffffffffffff99def836146bc9b1b4d22831",-3,"0x64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1","0x188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012","0x07192b95ffc8da78631011ed6b24cdd573f977a11e794811"),c224:new z.ecc.curve(z.bn.prime.p224,"0xffffffffffffffffffffffffffff16a2e0b8f03e13dd29455c5c2a3d",-3,"0xb4050a850c04b3abf54132565044b0b7d7bfd8ba270b39432355ffb4","0xb70e0cbd6bb4bf7f321390b94a03c1d356c21122343280d6115c1d21","0xbd376388b5f723fb4c22dfe6cd4375a05a07476444d5819985007e34"),c256:new z.ecc.curve(z.bn.prime.p256,"0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",-3,"0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b","0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),c384:new z.ecc.curve(z.bn.prime.p384,"0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973",-3,"0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef","0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7","0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),c521:new z.ecc.curve(z.bn.prime.p521,"0x1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409",-3,"0x051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","0xC6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","0x11839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650"),k192:new z.ecc.curve(z.bn.prime.p192k,"0xfffffffffffffffffffffffe26f2fc170f69466a74defd8d",0,3,"0xdb4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d","0x9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"),k224:new z.ecc.curve(z.bn.prime.p224k,"0x010000000000000000000000000001dce8d2ec6184caf0a971769fb1f7",0,5,"0xa1455b334df099df30fc28a169a467e9e47075a90f7e650eb6b7a45c","0x7e089fed7fba344282cafbd6f7e319f7c0b0bd59e2ca4bdb556d61a5"),k256:new z.ecc.curve(z.bn.prime.p256k,"0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",0,7,"0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};z.ecc.curveName=function(A){for(var j in z.ecc.curves)if(z.ecc.curves.hasOwnProperty(j)&&z.ecc.curves[j]===A)return j;throw new z.exception.invalid("no such curve")};z.ecc.deserialize=function(A){if(!A||!A.curve||!z.ecc.curves[A.curve])throw new z.exception.invalid("invalid serialization");if(["elGamal","ecdsa"].indexOf(A.type)===-1)throw new z.exception.invalid("invalid type");var j=z.ecc.curves[A.curve];if(A.secretKey){if(!A.exponent)throw new z.exception.invalid("invalid exponent");var e=new z.bn(A.exponent);return new z.ecc[A.type].secretKey(j,e)}if(!A.point)throw new z.exception.invalid("invalid point");return e=j.fromBits(z.codec.hex.toBits(A.point)),new z.ecc[A.type].publicKey(j,e)};z.ecc.basicKey={publicKey:function(A,j){this.o=A,this.C=A.r.bitLength(),j instanceof Array?this.B=A.fromBits(j):this.B=j,this.serialize=function(){var e=z.ecc.curveName(A);return{type:this.getType(),secretKey:!1,point:z.codec.hex.fromBits(this.B.toBits()),curve:e}},this.get=function(){var r=this.B.toBits(),e=z.bitArray.bitLength(r),t=z.bitArray.bitSlice(r,0,e/2),r=z.bitArray.bitSlice(r,e/2);return{x:t,y:r}}},secretKey:function(A,j){this.o=A,this.C=A.r.bitLength(),this.M=j,this.serialize=function(){var e=this.get(),t=z.ecc.curveName(A);return{type:this.getType(),secretKey:!0,exponent:z.codec.hex.fromBits(e),curve:t}},this.get=function(){return this.M.toBits()}}};z.ecc.basicKey.generateKeys=function(A){return function(j,e,t){if(j=j||256,typeof j=="number"&&(j=z.ecc.curves["c"+j],j===void 0))throw new z.exception.invalid("no such curve");return t=t||z.bn.random(j.r,e),e=j.G.mult(t),{pub:new z.ecc[A].publicKey(j,e),sec:new z.ecc[A].secretKey(j,t)}}};z.ecc.elGamal={generateKeys:z.ecc.basicKey.generateKeys("elGamal"),publicKey:function(A,j){z.ecc.basicKey.publicKey.apply(this,arguments)},secretKey:function(A,j){z.ecc.basicKey.secretKey.apply(this,arguments)}};z.ecc.elGamal.publicKey.prototype={kem:function(A){A=z.bn.random(this.o.r,A);var j=this.o.G.mult(A).toBits();return{key:z.hash.sha256.hash(this.B.mult(A).toBits()),tag:j}},getType:function(){return"elGamal"}};z.ecc.elGamal.secretKey.prototype={unkem:function(A){return z.hash.sha256.hash(this.o.fromBits(A).mult(this.M).toBits())},dh:function(A){return z.hash.sha256.hash(A.B.mult(this.M).toBits())},dhJavaEc:function(A){return A.B.mult(this.M).x.toBits()},getType:function(){return"elGamal"}};z.ecc.ecdsa={generateKeys:z.ecc.basicKey.generateKeys("ecdsa")};z.ecc.ecdsa.publicKey=function(A,j){z.ecc.basicKey.publicKey.apply(this,arguments)};z.ecc.ecdsa.publicKey.prototype={verify:function(A,j,e){z.bitArray.bitLength(A)>this.C&&(A=z.bitArray.clamp(A,this.C));var a=z.bitArray,t=this.o.r,o=this.C,r=z.bn.fromBits(a.bitSlice(j,0,o)),a=z.bn.fromBits(a.bitSlice(j,o,2*o)),n=e?a:a.inverseMod(t),o=z.bn.fromBits(A).mul(n).mod(t),n=r.mul(n).mod(t),o=this.o.G.mult2(o,n,this.B).x;if(r.equals(0)||a.equals(0)||r.greaterEquals(t)||a.greaterEquals(t)||!o.equals(r)){if(e===void 0)return this.verify(A,j,!0);throw new z.exception.corrupt("signature didn't check out")}return!0},getType:function(){return"ecdsa"}};z.ecc.ecdsa.secretKey=function(A,j){z.ecc.basicKey.secretKey.apply(this,arguments)};z.ecc.ecdsa.secretKey.prototype={sign:function(A,j,e,t){z.bitArray.bitLength(A)>this.C&&(A=z.bitArray.clamp(A,this.C));var r=this.o.r,a=r.bitLength();return t=t||z.bn.random(r.sub(1),j).add(1),j=this.o.G.mult(t).x.mod(r),A=z.bn.fromBits(A).add(j.mul(this.M)),e=e?A.inverseMod(r).mul(t).mod(r):A.mul(t.inverseMod(r)).mod(r),z.bitArray.concat(j.toBits(a),e.toBits(a))},getType:function(){return"ecdsa"}};z.prng=function(A){this.m=[new z.hash.sha256],this.F=[0],this.X=0,this.P={},this.W=0,this.$={},this.ea=this.u=this.H=this.na=0,this.f=[0,0,0,0,0,0,0,0],this.A=[0,0,0,0],this.U=void 0,this.V=A,this.O=!1,this.T={progress:{},seeded:{}},this.J=this.ma=0,this.R=1,this.S=2,this.ja=65536,this.Z=[0,48,64,96,128,192,256,384,512,768,1024],this.ka=3e4,this.ia=80};z.prng.prototype={randomWords:function(A,j){var e=[],t;t=this.isReady(j);var r;if(t===this.J)throw new z.exception.notReady("generator isn't seeded");if(t&this.S){t=!(t&this.R),r=[];var a=0,n;for(this.ea=r[0]=new Date().valueOf()+this.ka,n=0;16>n;n++)r.push(4294967296*Math.random()|0);for(n=0;n<this.m.length&&(r=r.concat(this.m[n].finalize()),a+=this.F[n],this.F[n]=0,t||!(this.X&1<<n));n++);for(this.X>=1<<this.m.length&&(this.m.push(new z.hash.sha256),this.F.push(0)),this.u-=a,a>this.H&&(this.H=a),this.X++,this.f=z.hash.sha256.hash(this.f.concat(r)),this.U=new z.cipher.aes(this.f),t=0;4>t&&(this.A[t]=this.A[t]+1|0,!this.A[t]);t++);}for(t=0;t<A;t+=4)(t+1)%this.ja===0&&VxA(this),r=YL(this),e.push(r[0],r[1],r[2],r[3]);return VxA(this),e.slice(0,A)},setDefaultParanoia:function(A,j){if(A===0&&j!=="Setting paranoia=0 will ruin your security; use it only for testing")throw new z.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.V=A},addEntropy:function(A,j,e){e=e||"user";var t,r,a=new Date().valueOf(),n=this.P[e],o=this.isReady(),i=0;switch(t=this.$[e],t===void 0&&(t=this.$[e]=this.na++),n===void 0&&(n=this.P[e]=0),this.P[e]=(this.P[e]+1)%this.m.length,typeof A){case"number":j===void 0&&(j=1),this.m[n].update([t,this.W++,1,j,a,1,A|0]);break;case"object":if(e=Object.prototype.toString.call(A),e==="[object Uint32Array]"){for(r=[],e=0;e<A.length;e++)r.push(A[e]);A=r}else for(e!=="[object Array]"&&(i=1),e=0;e<A.length&&!i;e++)typeof A[e]!="number"&&(i=1);if(!i){if(j===void 0)for(e=j=0;e<A.length;e++)for(r=A[e];0<r;)j++,r=r>>>1;this.m[n].update([t,this.W++,2,j,a,A.length].concat(A))}break;case"string":j===void 0&&(j=A.length),this.m[n].update([t,this.W++,3,j,a,A.length]),this.m[n].update(A);break;default:i=1}if(i)throw new z.exception.bug("random: addEntropy only supports number, array of numbers or string");this.F[n]+=j,this.u+=j,o===this.J&&(this.isReady()!==this.J&&UxA("seeded",Math.max(this.H,this.u)),UxA("progress",this.getProgress()))},isReady:function(A){return A=this.Z[A!==void 0?A:this.V],this.H&&this.H>=A?this.F[0]>this.ia&&new Date().valueOf()>this.ea?this.S|this.R:this.R:this.u>=A?this.S|this.J:this.J},getProgress:function(A){return A=this.Z[A||this.V],this.H>=A||this.u>A?1:this.u/A},startCollectors:function(){if(!this.O){if(this.h={loadTimeCollector:Xy(this,this.ua),mouseCollector:Xy(this,this.va),keyboardCollector:Xy(this,this.sa),accelerometerCollector:Xy(this,this.la),touchCollector:Xy(this,this.xa)},window.addEventListener)window.addEventListener("load",this.h.loadTimeCollector,!1),window.addEventListener("mousemove",this.h.mouseCollector,!1),window.addEventListener("keypress",this.h.keyboardCollector,!1),window.addEventListener("devicemotion",this.h.accelerometerCollector,!1),window.addEventListener("touchmove",this.h.touchCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this.h.loadTimeCollector),document.attachEvent("onmousemove",this.h.mouseCollector),document.attachEvent("keypress",this.h.keyboardCollector);else throw new z.exception.bug("can't attach event");this.O=!0}},stopCollectors:function(){this.O&&(window.removeEventListener?(window.removeEventListener("load",this.h.loadTimeCollector,!1),window.removeEventListener("mousemove",this.h.mouseCollector,!1),window.removeEventListener("keypress",this.h.keyboardCollector,!1),window.removeEventListener("devicemotion",this.h.accelerometerCollector,!1),window.removeEventListener("touchmove",this.h.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.h.loadTimeCollector),document.detachEvent("onmousemove",this.h.mouseCollector),document.detachEvent("keypress",this.h.keyboardCollector)),this.O=!1)},addEventListener:function(A,j){this.T[A][this.ma++]=j},removeEventListener:function(A,j){var e,t,r=this.T[A],a=[];for(t in r)r.hasOwnProperty(t)&&r[t]===j&&a.push(t);for(e=0;e<a.length;e++)t=a[e],delete r[t]},sa:function(){Vy(this,1)},va:function(A){var j,e;try{j=A.x||A.clientX||A.offsetX||0,e=A.y||A.clientY||A.offsetY||0}catch{e=j=0}j!=0&&e!=0&&this.addEntropy([j,e],2,"mouse"),Vy(this,0)},xa:function(A){A=A.touches[0]||A.changedTouches[0],this.addEntropy([A.pageX||A.clientX,A.pageY||A.clientY],1,"touch"),Vy(this,0)},ua:function(){Vy(this,2)},la:function(A){if(A=A.accelerationIncludingGravity.x||A.accelerationIncludingGravity.y||A.accelerationIncludingGravity.z,window.orientation){var j=window.orientation;typeof j=="number"&&this.addEntropy(j,1,"accelerometer")}A&&this.addEntropy(A,2,"accelerometer"),Vy(this,0)}};function UxA(A,j){var e,t=z.random.T[A],r=[];for(e in t)t.hasOwnProperty(e)&&r.push(t[e]);for(e=0;e<r.length;e++)r[e](j)}function Vy(A,j){typeof window<"u"&&window.performance&&typeof window.performance.now=="function"?A.addEntropy(window.performance.now(),j,"loadtime"):A.addEntropy(new Date().valueOf(),j,"loadtime")}function VxA(A){A.f=YL(A).concat(YL(A)),A.U=new z.cipher.aes(A.f)}function YL(A){for(var j=0;4>j&&(A.A[j]=A.A[j]+1|0,!A.A[j]);j++);return A.U.encrypt(A.A)}function Xy(A,j){return function(){j.apply(A,arguments)}}z.random=new z.prng(6);A:try{if(TD=typeof ef<"u"&&ef.exports){try{CD=Y0("crypto")}catch{CD=null}TD=DD=CD}if(TD&&DD.randomBytes)Jy=DD.randomBytes(128),Jy=new Uint32Array(new Uint8Array(Jy).buffer),z.random.addEntropy(Jy,1024,"crypto['randomBytes']");else if(typeof window<"u"&&typeof Uint32Array<"u"){if(Wy=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(Wy);else if(window.msCrypto&&window.msCrypto.getRandomValues)window.msCrypto.getRandomValues(Wy);else break A;z.random.addEntropy(Wy,1024,"crypto['getRandomValues']")}}catch(A){typeof window<"u"&&window.console}var Jy,DD,Wy,TD,CD});var lq=RA((D4,rfA)=>{(function(){var A,j=0xdeadbeefcafe,e=(j&16777215)==15715070;function t(b,I,M){b!=null&&(typeof b=="number"?this.fromNumber(b,I,M):I==null&&typeof b!="string"?this.fromString(b,256):this.fromString(b,I))}function r(){return new t(null)}function a(b,I,M,lA,QA,uj){for(;--uj>=0;){var Mj=I*this[b++]+M[lA]+QA;QA=Math.floor(Mj/67108864),M[lA++]=Mj&67108863}return QA}function n(b,I,M,lA,QA,uj){for(var Mj=I&32767,Fe=I>>15;--uj>=0;){var Ua=this[b]&32767,so=this[b++]>>15,rl=Fe*Ua+so*Mj;Ua=Mj*Ua+((rl&32767)<<15)+M[lA]+(QA&1073741823),QA=(Ua>>>30)+(rl>>>15)+Fe*so+(QA>>>30),M[lA++]=Ua&1073741823}return QA}function o(b,I,M,lA,QA,uj){for(var Mj=I&16383,Fe=I>>14;--uj>=0;){var Ua=this[b]&16383,so=this[b++]>>14,rl=Fe*Ua+so*Mj;Ua=Mj*Ua+((rl&16383)<<14)+M[lA]+QA,QA=(Ua>>28)+(rl>>14)+Fe*so,M[lA++]=Ua&268435455}return QA}var i=typeof navigator<"u";i&&e&&navigator.appName=="Microsoft Internet Explorer"?(t.prototype.am=n,A=30):i&&e&&navigator.appName!="Netscape"?(t.prototype.am=a,A=26):(t.prototype.am=o,A=28),t.prototype.DB=A,t.prototype.DM=(1<<A)-1,t.prototype.DV=1<<A;var s=52;t.prototype.FV=Math.pow(2,s),t.prototype.F1=s-A,t.prototype.F2=2*A-s;var l="0123456789abcdefghijklmnopqrstuvwxyz",c=new Array,k,u;for(k=48,u=0;u<=9;++u)c[k++]=u;for(k=97,u=10;u<36;++u)c[k++]=u;for(k=65,u=10;u<36;++u)c[k++]=u;function m(b){return l.charAt(b)}function F(b,I){var M=c[b.charCodeAt(I)];return M??-1}function S(b){for(var I=this.t-1;I>=0;--I)b[I]=this[I];b.t=this.t,b.s=this.s}function G(b){this.t=1,this.s=b<0?-1:0,b>0?this[0]=b:b<-1?this[0]=b+this.DV:this.t=0}function x(b){var I=r();return I.fromInt(b),I}function R(b,I){var M;if(I==16)M=4;else if(I==8)M=3;else if(I==256)M=8;else if(I==2)M=1;else if(I==32)M=5;else if(I==4)M=2;else{this.fromRadix(b,I);return}this.t=0,this.s=0;for(var lA=b.length,QA=!1,uj=0;--lA>=0;){var Mj=M==8?b[lA]&255:F(b,lA);if(Mj<0){b.charAt(lA)=="-"&&(QA=!0);continue}QA=!1,uj==0?this[this.t++]=Mj:uj+M>this.DB?(this[this.t-1]|=(Mj&(1<<this.DB-uj)-1)<<uj,this[this.t++]=Mj>>this.DB-uj):this[this.t-1]|=Mj<<uj,uj+=M,uj>=this.DB&&(uj-=this.DB)}M==8&&(b[0]&128)!=0&&(this.s=-1,uj>0&&(this[this.t-1]|=(1<<this.DB-uj)-1<<uj)),this.clamp(),QA&&t.ZERO.subTo(this,this)}function P(){for(var b=this.s&this.DM;this.t>0&&this[this.t-1]==b;)--this.t}function D(b){if(this.s<0)return"-"+this.negate().toString(b);var I;if(b==16)I=4;else if(b==8)I=3;else if(b==2)I=1;else if(b==32)I=5;else if(b==4)I=2;else return this.toRadix(b);var M=(1<<I)-1,lA,QA=!1,uj="",Mj=this.t,Fe=this.DB-Mj*this.DB%I;if(Mj-- >0)for(Fe<this.DB&&(lA=this[Mj]>>Fe)>0&&(QA=!0,uj=m(lA));Mj>=0;)Fe<I?(lA=(this[Mj]&(1<<Fe)-1)<<I-Fe,lA|=this[--Mj]>>(Fe+=this.DB-I)):(lA=this[Mj]>>(Fe-=I)&M,Fe<=0&&(Fe+=this.DB,--Mj)),lA>0&&(QA=!0),QA&&(uj+=m(lA));return QA?uj:"0"}function y(){var b=r();return t.ZERO.subTo(this,b),b}function h(){return this.s<0?this.negate():this}function O(b){var I=this.s-b.s;if(I!=0)return I;var M=this.t;if(I=M-b.t,I!=0)return this.s<0?-I:I;for(;--M>=0;)if((I=this[M]-b[M])!=0)return I;return 0}function Q(b){var I=1,M;return(M=b>>>16)!=0&&(b=M,I+=16),(M=b>>8)!=0&&(b=M,I+=8),(M=b>>4)!=0&&(b=M,I+=4),(M=b>>2)!=0&&(b=M,I+=2),(M=b>>1)!=0&&(b=M,I+=1),I}function AA(){return this.t<=0?0:this.DB*(this.t-1)+Q(this[this.t-1]^this.s&this.DM)}function nA(b,I){var M;for(M=this.t-1;M>=0;--M)I[M+b]=this[M];for(M=b-1;M>=0;--M)I[M]=0;I.t=this.t+b,I.s=this.s}function bA(b,I){for(var M=b;M<this.t;++M)I[M-b]=this[M];I.t=Math.max(this.t-b,0),I.s=this.s}function XA(b,I){var M=b%this.DB,lA=this.DB-M,QA=(1<<lA)-1,uj=Math.floor(b/this.DB),Mj=this.s<<M&this.DM,Fe;for(Fe=this.t-1;Fe>=0;--Fe)I[Fe+uj+1]=this[Fe]>>lA|Mj,Mj=(this[Fe]&QA)<<M;for(Fe=uj-1;Fe>=0;--Fe)I[Fe]=0;I[uj]=Mj,I.t=this.t+uj+1,I.s=this.s,I.clamp()}function dj(b,I){I.s=this.s;var M=Math.floor(b/this.DB);if(M>=this.t){I.t=0;return}var lA=b%this.DB,QA=this.DB-lA,uj=(1<<lA)-1;I[0]=this[M]>>lA;for(var Mj=M+1;Mj<this.t;++Mj)I[Mj-M-1]|=(this[Mj]&uj)<<QA,I[Mj-M]=this[Mj]>>lA;lA>0&&(I[this.t-M-1]|=(this.s&uj)<<QA),I.t=this.t-M,I.clamp()}function yA(b,I){for(var M=0,lA=0,QA=Math.min(b.t,this.t);M<QA;)lA+=this[M]-b[M],I[M++]=lA&this.DM,lA>>=this.DB;if(b.t<this.t){for(lA-=b.s;M<this.t;)lA+=this[M],I[M++]=lA&this.DM,lA>>=this.DB;lA+=this.s}else{for(lA+=this.s;M<b.t;)lA-=b[M],I[M++]=lA&this.DM,lA>>=this.DB;lA-=b.s}I.s=lA<0?-1:0,lA<-1?I[M++]=this.DV+lA:lA>0&&(I[M++]=lA),I.t=M,I.clamp()}function tj(b,I){var M=this.abs(),lA=b.abs(),QA=M.t;for(I.t=QA+lA.t;--QA>=0;)I[QA]=0;for(QA=0;QA<lA.t;++QA)I[QA+M.t]=M.am(0,lA[QA],I,QA,0,M.t);I.s=0,I.clamp(),this.s!=b.s&&t.ZERO.subTo(I,I)}function LA(b){for(var I=this.abs(),M=b.t=2*I.t;--M>=0;)b[M]=0;for(M=0;M<I.t-1;++M){var lA=I.am(M,I[M],b,2*M,0,1);(b[M+I.t]+=I.am(M+1,2*I[M],b,2*M+1,lA,I.t-M-1))>=I.DV&&(b[M+I.t]-=I.DV,b[M+I.t+1]=1)}b.t>0&&(b[b.t-1]+=I.am(M,I[M],b,2*M,0,1)),b.s=0,b.clamp()}function Qj(b,I,M){var lA=b.abs();if(!(lA.t<=0)){var QA=this.abs();if(QA.t<lA.t){I?.fromInt(0),M!=null&&this.copyTo(M);return}M==null&&(M=r());var uj=r(),Mj=this.s,Fe=b.s,Ua=this.DB-Q(lA[lA.t-1]);Ua>0?(lA.lShiftTo(Ua,uj),QA.lShiftTo(Ua,M)):(lA.copyTo(uj),QA.copyTo(M));var so=uj.t,rl=uj[so-1];if(rl!=0){var fs=rl*(1<<this.F1)+(so>1?uj[so-2]>>this.F2:0),Qd=this.FV/fs,Jv=(1<<this.F1)/fs,Zl=1<<this.F2,Ac=M.t,Wv=Ac-so,g7=I??r();for(uj.dlShiftTo(Wv,g7),M.compareTo(g7)>=0&&(M[M.t++]=1,M.subTo(g7,M)),t.ONE.dlShiftTo(so,g7),g7.subTo(uj,uj);uj.t<so;)uj[uj.t++]=0;for(;--Wv>=0;){var X0=M[--Ac]==rl?this.DM:Math.floor(M[Ac]*Qd+(M[Ac-1]+Zl)*Jv);if((M[Ac]+=uj.am(0,X0,M,Wv,0,so))<X0)for(uj.dlShiftTo(Wv,g7),M.subTo(g7,M);M[Ac]<--X0;)M.subTo(g7,M)}I!=null&&(M.drShiftTo(so,I),Mj!=Fe&&t.ZERO.subTo(I,I)),M.t=so,M.clamp(),Ua>0&&M.rShiftTo(Ua,M),Mj<0&&t.ZERO.subTo(M,M)}}}function Oj(b){var I=r();return this.abs().divRemTo(b,null,I),this.s<0&&I.compareTo(t.ZERO)>0&&b.subTo(I,I),I}function Ej(b){this.m=b}function Yj(b){return b.s<0||b.compareTo(this.m)>=0?b.mod(this.m):b}function Tj(b){return b}function mj(b){b.divRemTo(this.m,null,b)}function qj(b,I,M){b.multiplyTo(I,M),this.reduce(M)}function _e(b,I){b.squareTo(I),this.reduce(I)}Ej.prototype.convert=Yj,Ej.prototype.revert=Tj,Ej.prototype.reduce=mj,Ej.prototype.mulTo=qj,Ej.prototype.sqrTo=_e;function Tt(){if(this.t<1)return 0;var b=this[0];if((b&1)==0)return 0;var I=b&3;return I=I*(2-(b&15)*I)&15,I=I*(2-(b&255)*I)&255,I=I*(2-((b&65535)*I&65535))&65535,I=I*(2-b*I%this.DV)%this.DV,I>0?this.DV-I:-I}function Cj(b){this.m=b,this.mp=b.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<b.DB-15)-1,this.mt2=2*b.t}function xt(b){var I=r();return b.abs().dlShiftTo(this.m.t,I),I.divRemTo(this.m,null,I),b.s<0&&I.compareTo(t.ZERO)>0&&this.m.subTo(I,I),I}function At(b){var I=r();return b.copyTo(I),this.reduce(I),I}function Ce(b){for(;b.t<=this.mt2;)b[b.t++]=0;for(var I=0;I<this.m.t;++I){var M=b[I]&32767,lA=M*this.mpl+((M*this.mph+(b[I]>>15)*this.mpl&this.um)<<15)&b.DM;for(M=I+this.m.t,b[M]+=this.m.am(0,lA,b,I,0,this.m.t);b[M]>=b.DV;)b[M]-=b.DV,b[++M]++}b.clamp(),b.drShiftTo(this.m.t,b),b.compareTo(this.m)>=0&&b.subTo(this.m,b)}function fe(b,I){b.squareTo(I),this.reduce(I)}function ir(b,I,M){b.multiplyTo(I,M),this.reduce(M)}Cj.prototype.convert=xt,Cj.prototype.revert=At,Cj.prototype.reduce=Ce,Cj.prototype.mulTo=ir,Cj.prototype.sqrTo=fe;function Ar(){return(this.t>0?this[0]&1:this.s)==0}function Pt(b,I){if(b>4294967295||b<1)return t.ONE;var M=r(),lA=r(),QA=I.convert(this),uj=Q(b)-1;for(QA.copyTo(M);--uj>=0;)if(I.sqrTo(M,lA),(b&1<<uj)>0)I.mulTo(lA,QA,M);else{var Mj=M;M=lA,lA=Mj}return I.revert(M)}function Jr(b,I){var M;return b<256||I.isEven()?M=new Ej(I):M=new Cj(I),this.exp(b,M)}t.prototype.copyTo=S,t.prototype.fromInt=G,t.prototype.fromString=R,t.prototype.clamp=P,t.prototype.dlShiftTo=nA,t.prototype.drShiftTo=bA,t.prototype.lShiftTo=XA,t.prototype.rShiftTo=dj,t.prototype.subTo=yA,t.prototype.multiplyTo=tj,t.prototype.squareTo=LA,t.prototype.divRemTo=Qj,t.prototype.invDigit=Tt,t.prototype.isEven=Ar,t.prototype.exp=Pt,t.prototype.toString=D,t.prototype.negate=y,t.prototype.abs=h,t.prototype.compareTo=O,t.prototype.bitLength=AA,t.prototype.mod=Oj,t.prototype.modPowInt=Jr,t.ZERO=x(0),t.ONE=x(1);function Kr(){var b=r();return this.copyTo(b),b}function _r(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function ca(){return this.t==0?this.s:this[0]<<24>>24}function ct(){return this.t==0?this.s:this[0]<<16>>16}function ut(b){return Math.floor(Math.LN2*this.DB/Math.log(b))}function hr(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function o6(b){if(b==null&&(b=10),this.signum()==0||b<2||b>36)return"0";var I=this.chunkSize(b),M=Math.pow(b,I),lA=x(M),QA=r(),uj=r(),Mj="";for(this.divRemTo(lA,QA,uj);QA.signum()>0;)Mj=(M+uj.intValue()).toString(b).substr(1)+Mj,QA.divRemTo(lA,QA,uj);return uj.intValue().toString(b)+Mj}function se(b,I){this.fromInt(0),I==null&&(I=10);for(var M=this.chunkSize(I),lA=Math.pow(I,M),QA=!1,uj=0,Mj=0,Fe=0;Fe<b.length;++Fe){var Ua=F(b,Fe);if(Ua<0){b.charAt(Fe)=="-"&&this.signum()==0&&(QA=!0);continue}Mj=I*Mj+Ua,++uj>=M&&(this.dMultiply(lA),this.dAddOffset(Mj,0),uj=0,Mj=0)}uj>0&&(this.dMultiply(Math.pow(I,uj)),this.dAddOffset(Mj,0)),QA&&t.ZERO.subTo(this,this)}function iA(b,I,M){if(typeof I=="number")if(b<2)this.fromInt(1);else for(this.fromNumber(b,M),this.testBit(b-1)||this.bitwiseTo(t.ONE.shiftLeft(b-1),rA,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(I);)this.dAddOffset(2,0),this.bitLength()>b&&this.subTo(t.ONE.shiftLeft(b-1),this);else{var lA=new Array,QA=b&7;lA.length=(b>>3)+1,I.nextBytes(lA),QA>0?lA[0]&=(1<<QA)-1:lA[0]=0,this.fromString(lA,256)}}function hA(){var b=this.t,I=new Array;I[0]=this.s;var M=this.DB-b*this.DB%8,lA,QA=0;if(b-- >0)for(M<this.DB&&(lA=this[b]>>M)!=(this.s&this.DM)>>M&&(I[QA++]=lA|this.s<<this.DB-M);b>=0;)M<8?(lA=(this[b]&(1<<M)-1)<<8-M,lA|=this[--b]>>(M+=this.DB-8)):(lA=this[b]>>(M-=8)&255,M<=0&&(M+=this.DB,--b)),(lA&128)!=0&&(lA|=-256),QA==0&&(this.s&128)!=(lA&128)&&++QA,(QA>0||lA!=this.s)&&(I[QA++]=lA);return I}function HA(b){return this.compareTo(b)==0}function fj(b){return this.compareTo(b)<0?this:b}function xj(b){return this.compareTo(b)>0?this:b}function ye(b,I,M){var lA,QA,uj=Math.min(b.t,this.t);for(lA=0;lA<uj;++lA)M[lA]=I(this[lA],b[lA]);if(b.t<this.t){for(QA=b.s&this.DM,lA=uj;lA<this.t;++lA)M[lA]=I(this[lA],QA);M.t=this.t}else{for(QA=this.s&this.DM,lA=uj;lA<b.t;++lA)M[lA]=I(QA,b[lA]);M.t=b.t}M.s=I(this.s,b.s),M.clamp()}function Bj(b,I){return b&I}function cA(b){var I=r();return this.bitwiseTo(b,Bj,I),I}function rA(b,I){return b|I}function wA(b){var I=r();return this.bitwiseTo(b,rA,I),I}function Xj(b,I){return b^I}function fr(b){var I=r();return this.bitwiseTo(b,Xj,I),I}function Gn(b,I){return b&~I}function Bi(b){var I=r();return this.bitwiseTo(b,Gn,I),I}function na(){for(var b=r(),I=0;I<this.t;++I)b[I]=this.DM&~this[I];return b.t=this.t,b.s=~this.s,b}function zn(b){var I=r();return b<0?this.rShiftTo(-b,I):this.lShiftTo(b,I),I}function Un(b){var I=r();return b<0?this.lShiftTo(-b,I):this.rShiftTo(b,I),I}function zE(b){if(b==0)return-1;var I=0;return(b&65535)==0&&(b>>=16,I+=16),(b&255)==0&&(b>>=8,I+=8),(b&15)==0&&(b>>=4,I+=4),(b&3)==0&&(b>>=2,I+=2),(b&1)==0&&++I,I}function Wd(){for(var b=0;b<this.t;++b)if(this[b]!=0)return b*this.DB+zE(this[b]);return this.s<0?this.t*this.DB:-1}function le(b){for(var I=0;b!=0;)b&=b-1,++I;return I}function tl(){for(var b=0,I=this.s&this.DM,M=0;M<this.t;++M)b+=le(this[M]^I);return b}function Kc(b){var I=Math.floor(b/this.DB);return I>=this.t?this.s!=0:(this[I]&1<<b%this.DB)!=0}function gi(b,I){var M=t.ONE.shiftLeft(b);return this.bitwiseTo(M,I,M),M}function Vn(b){return this.changeBit(b,rA)}function jr(b){return this.changeBit(b,Gn)}function B7(b){return this.changeBit(b,Xj)}function St(b,I){for(var M=0,lA=0,QA=Math.min(b.t,this.t);M<QA;)lA+=this[M]+b[M],I[M++]=lA&this.DM,lA>>=this.DB;if(b.t<this.t){for(lA+=b.s;M<this.t;)lA+=this[M],I[M++]=lA&this.DM,lA>>=this.DB;lA+=this.s}else{for(lA+=this.s;M<b.t;)lA+=b[M],I[M++]=lA&this.DM,lA>>=this.DB;lA+=b.s}I.s=lA<0?-1:0,lA>0?I[M++]=lA:lA<-1&&(I[M++]=this.DV+lA),I.t=M,I.clamp()}function Yl(b){var I=r();return this.addTo(b,I),I}function f(b){var I=r();return this.subTo(b,I),I}function C(b){var I=r();return this.multiplyTo(b,I),I}function T(){var b=r();return this.squareTo(b),b}function B(b){var I=r();return this.divRemTo(b,I,null),I}function U(b){var I=r();return this.divRemTo(b,null,I),I}function uA(b){var I=r(),M=r();return this.divRemTo(b,I,M),new Array(I,M)}function GA(b){this[this.t]=this.am(0,b-1,this,0,0,this.t),++this.t,this.clamp()}function jj(b,I){if(b!=0){for(;this.t<=I;)this[this.t++]=0;for(this[I]+=b;this[I]>=this.DV;)this[I]-=this.DV,++I>=this.t&&(this[this.t++]=0),++this[I]}}function Fj(){}function w(b){return b}function K(b,I,M){b.multiplyTo(I,M)}function Y(b,I){b.squareTo(I)}Fj.prototype.convert=w,Fj.prototype.revert=w,Fj.prototype.mulTo=K,Fj.prototype.sqrTo=Y;function N(b){return this.exp(b,new Fj)}function dA(b,I,M){var lA=Math.min(this.t+b.t,I);for(M.s=0,M.t=lA;lA>0;)M[--lA]=0;var QA;for(QA=M.t-this.t;lA<QA;++lA)M[lA+this.t]=this.am(0,b[lA],M,lA,0,this.t);for(QA=Math.min(b.t,I);lA<QA;++lA)this.am(0,b[lA],M,lA,0,I-lA);M.clamp()}function gA(b,I,M){--I;var lA=M.t=this.t+b.t-I;for(M.s=0;--lA>=0;)M[lA]=0;for(lA=Math.max(I-this.t,0);lA<b.t;++lA)M[this.t+lA-I]=this.am(I-lA,b[lA],M,0,0,this.t+lA-I);M.clamp(),M.drShiftTo(1,M)}function fA(b){this.r2=r(),this.q3=r(),t.ONE.dlShiftTo(2*b.t,this.r2),this.mu=this.r2.divide(b),this.m=b}function BA(b){if(b.s<0||b.t>2*this.m.t)return b.mod(this.m);if(b.compareTo(this.m)<0)return b;var I=r();return b.copyTo(I),this.reduce(I),I}function UA(b){return b}function hj(b){for(b.drShiftTo(this.m.t-1,this.r2),b.t>this.m.t+1&&(b.t=this.m.t+1,b.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);b.compareTo(this.r2)<0;)b.dAddOffset(1,this.m.t+1);for(b.subTo(this.r2,b);b.compareTo(this.m)>=0;)b.subTo(this.m,b)}function Zj(b,I){b.squareTo(I),this.reduce(I)}function JA(b,I,M){b.multiplyTo(I,M),this.reduce(M)}fA.prototype.convert=BA,fA.prototype.revert=UA,fA.prototype.reduce=hj,fA.prototype.mulTo=JA,fA.prototype.sqrTo=Zj;function Hj(b,I){var M=b.bitLength(),lA,QA=x(1),uj;if(M<=0)return QA;M<18?lA=1:M<48?lA=3:M<144?lA=4:M<768?lA=5:lA=6,M<8?uj=new Ej(I):I.isEven()?uj=new fA(I):uj=new Cj(I);var Mj=new Array,Fe=3,Ua=lA-1,so=(1<<lA)-1;if(Mj[1]=uj.convert(this),lA>1){var rl=r();for(uj.sqrTo(Mj[1],rl);Fe<=so;)Mj[Fe]=r(),uj.mulTo(rl,Mj[Fe-2],Mj[Fe]),Fe+=2}var fs=b.t-1,Qd,Jv=!0,Zl=r(),Ac;for(M=Q(b[fs])-1;fs>=0;){for(M>=Ua?Qd=b[fs]>>M-Ua&so:(Qd=(b[fs]&(1<<M+1)-1)<<Ua-M,fs>0&&(Qd|=b[fs-1]>>this.DB+M-Ua)),Fe=lA;(Qd&1)==0;)Qd>>=1,--Fe;if((M-=Fe)<0&&(M+=this.DB,--fs),Jv)Mj[Qd].copyTo(QA),Jv=!1;else{for(;Fe>1;)uj.sqrTo(QA,Zl),uj.sqrTo(Zl,QA),Fe-=2;Fe>0?uj.sqrTo(QA,Zl):(Ac=QA,QA=Zl,Zl=Ac),uj.mulTo(Zl,Mj[Qd],QA)}for(;fs>=0&&(b[fs]&1<<M)==0;)uj.sqrTo(QA,Zl),Ac=QA,QA=Zl,Zl=Ac,--M<0&&(M=this.DB-1,--fs)}return uj.revert(QA)}function Jj(b){var I=this.s<0?this.negate():this.clone(),M=b.s<0?b.negate():b.clone();if(I.compareTo(M)<0){var lA=I;I=M,M=lA}var QA=I.getLowestSetBit(),uj=M.getLowestSetBit();if(uj<0)return I;for(QA<uj&&(uj=QA),uj>0&&(I.rShiftTo(uj,I),M.rShiftTo(uj,M));I.signum()>0;)(QA=I.getLowestSetBit())>0&&I.rShiftTo(QA,I),(QA=M.getLowestSetBit())>0&&M.rShiftTo(QA,M),I.compareTo(M)>=0?(I.subTo(M,I),I.rShiftTo(1,I)):(M.subTo(I,M),M.rShiftTo(1,M));return uj>0&&M.lShiftTo(uj,M),M}function ce(b){if(b<=0)return 0;var I=this.DV%b,M=this.s<0?b-1:0;if(this.t>0)if(I==0)M=this[0]%b;else for(var lA=this.t-1;lA>=0;--lA)M=(I*M+this[lA])%b;return M}function ne(b){var I=b.isEven();if(this.isEven()&&I||b.signum()==0)return t.ZERO;for(var M=b.clone(),lA=this.clone(),QA=x(1),uj=x(0),Mj=x(0),Fe=x(1);M.signum()!=0;){for(;M.isEven();)M.rShiftTo(1,M),I?((!QA.isEven()||!uj.isEven())&&(QA.addTo(this,QA),uj.subTo(b,uj)),QA.rShiftTo(1,QA)):uj.isEven()||uj.subTo(b,uj),uj.rShiftTo(1,uj);for(;lA.isEven();)lA.rShiftTo(1,lA),I?((!Mj.isEven()||!Fe.isEven())&&(Mj.addTo(this,Mj),Fe.subTo(b,Fe)),Mj.rShiftTo(1,Mj)):Fe.isEven()||Fe.subTo(b,Fe),Fe.rShiftTo(1,Fe);M.compareTo(lA)>=0?(M.subTo(lA,M),I&&QA.subTo(Mj,QA),uj.subTo(Fe,uj)):(lA.subTo(M,lA),I&&Mj.subTo(QA,Mj),Fe.subTo(uj,Fe))}if(lA.compareTo(t.ONE)!=0)return t.ZERO;if(Fe.compareTo(b)>=0)return Fe.subtract(b);if(Fe.signum()<0)Fe.addTo(b,Fe);else return Fe;return Fe.signum()<0?Fe.add(b):Fe}var $j=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],MA=(1<<26)/$j[$j.length-1];function KA(b){var I,M=this.abs();if(M.t==1&&M[0]<=$j[$j.length-1]){for(I=0;I<$j.length;++I)if(M[0]==$j[I])return!0;return!1}if(M.isEven())return!1;for(I=1;I<$j.length;){for(var lA=$j[I],QA=I+1;QA<$j.length&&lA<MA;)lA*=$j[QA++];for(lA=M.modInt(lA);I<QA;)if(lA%$j[I++]==0)return!1}return M.millerRabin(b)}function bj(b){var I=this.subtract(t.ONE),M=I.getLowestSetBit();if(M<=0)return!1;var lA=I.shiftRight(M);b=b+1>>1,b>$j.length&&(b=$j.length);for(var QA=r(),uj=0;uj<b;++uj){QA.fromInt($j[Math.floor(Math.random()*$j.length)]);var Mj=QA.modPow(lA,this);if(Mj.compareTo(t.ONE)!=0&&Mj.compareTo(I)!=0){for(var Fe=1;Fe++<M&&Mj.compareTo(I)!=0;)if(Mj=Mj.modPowInt(2,this),Mj.compareTo(t.ONE)==0)return!1;if(Mj.compareTo(I)!=0)return!1}}return!0}t.prototype.chunkSize=ut,t.prototype.toRadix=o6,t.prototype.fromRadix=se,t.prototype.fromNumber=iA,t.prototype.bitwiseTo=ye,t.prototype.changeBit=gi,t.prototype.addTo=St,t.prototype.dMultiply=GA,t.prototype.dAddOffset=jj,t.prototype.multiplyLowerTo=dA,t.prototype.multiplyUpperTo=gA,t.prototype.modInt=ce,t.prototype.millerRabin=bj,t.prototype.clone=Kr,t.prototype.intValue=_r,t.prototype.byteValue=ca,t.prototype.shortValue=ct,t.prototype.signum=hr,t.prototype.toByteArray=hA,t.prototype.equals=HA,t.prototype.min=fj,t.prototype.max=xj,t.prototype.and=cA,t.prototype.or=wA,t.prototype.xor=fr,t.prototype.andNot=Bi,t.prototype.not=na,t.prototype.shiftLeft=zn,t.prototype.shiftRight=Un,t.prototype.getLowestSetBit=Wd,t.prototype.bitCount=tl,t.prototype.testBit=Kc,t.prototype.setBit=Vn,t.prototype.clearBit=jr,t.prototype.flipBit=B7,t.prototype.add=Yl,t.prototype.subtract=f,t.prototype.multiply=C,t.prototype.divide=B,t.prototype.remainder=U,t.prototype.divideAndRemainder=uA,t.prototype.modPow=Hj,t.prototype.modInverse=ne,t.prototype.pow=N,t.prototype.gcd=Jj,t.prototype.isProbablePrime=KA,t.prototype.square=T,t.prototype.Barrett=fA;var oj,YA,kj;function at(b){YA[kj++]^=b&255,YA[kj++]^=b>>8&255,YA[kj++]^=b>>16&255,YA[kj++]^=b>>24&255,kj>=Wr&&(kj-=Wr)}function Ht(){at(new Date().getTime())}if(YA==null){YA=new Array,kj=0;var dt;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var Mt=new Uint8Array(32);for(window.crypto.getRandomValues(Mt),dt=0;dt<32;++dt)YA[kj++]=Mt[dt]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var eA=window.crypto.random(32);for(dt=0;dt<eA.length;++dt)YA[kj++]=eA.charCodeAt(dt)&255}}for(;kj<Wr;)dt=Math.floor(65536*Math.random()),YA[kj++]=dt>>>8,YA[kj++]=dt&255;kj=0,Ht()}function sr(){if(oj==null){for(Ht(),oj=I6(),oj.init(YA),kj=0;kj<YA.length;++kj)YA[kj]=0;kj=0}return oj.next()}function qr(b){var I;for(I=0;I<b.length;++I)b[I]=sr()}function kr(){}kr.prototype.nextBytes=qr;function Kt(){this.i=0,this.j=0,this.S=new Array}function ur(b){var I,M,lA;for(I=0;I<256;++I)this.S[I]=I;for(M=0,I=0;I<256;++I)M=M+this.S[I]+b[I%b.length]&255,lA=this.S[I],this.S[I]=this.S[M],this.S[M]=lA;this.i=0,this.j=0}function zt(){var b;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,b=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=b,this.S[b+this.S[this.i]&255]}Kt.prototype.init=ur,Kt.prototype.next=zt;function I6(){return new Kt}var Wr=256;t.SecureRandom=kr,t.BigInteger=t,typeof D4<"u"?D4=rfA.exports=t:(this.BigInteger=t,this.SecureRandom=kr)}).call(D4)});var BFA=RA(()=>{});var gFA=RA((bMe,ET)=>{(function(A){"use strict";var j=function(f){var C,T=new Float64Array(16);if(f)for(C=0;C<f.length;C++)T[C]=f[C];return T},e=function(){throw new Error("no PRNG")},t=new Uint8Array(16),r=new Uint8Array(32);r[0]=9;var a=j(),n=j([1]),o=j([56129,1]),i=j([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),s=j([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=j([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),c=j([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),k=j([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function u(f,C,T,B){f[C]=T>>24&255,f[C+1]=T>>16&255,f[C+2]=T>>8&255,f[C+3]=T&255,f[C+4]=B>>24&255,f[C+5]=B>>16&255,f[C+6]=B>>8&255,f[C+7]=B&255}function m(f,C,T,B,U){var uA,GA=0;for(uA=0;uA<U;uA++)GA|=f[C+uA]^T[B+uA];return(1&GA-1>>>8)-1}function F(f,C,T,B){return m(f,C,T,B,16)}function S(f,C,T,B){return m(f,C,T,B,32)}function G(f,C,T,B){for(var U=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,uA=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,GA=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,jj=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,Fj=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,w=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,K=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,Y=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,N=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,dA=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,gA=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,fA=T[16]&255|(T[17]&255)<<8|(T[18]&255)<<16|(T[19]&255)<<24,BA=T[20]&255|(T[21]&255)<<8|(T[22]&255)<<16|(T[23]&255)<<24,UA=T[24]&255|(T[25]&255)<<8|(T[26]&255)<<16|(T[27]&255)<<24,hj=T[28]&255|(T[29]&255)<<8|(T[30]&255)<<16|(T[31]&255)<<24,Zj=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,JA=U,Hj=uA,Jj=GA,ce=jj,ne=Fj,$j=w,MA=K,KA=Y,bj=N,oj=dA,YA=gA,kj=fA,at=BA,Ht=UA,dt=hj,Mt=Zj,eA,sr=0;sr<20;sr+=2)eA=JA+at|0,ne^=eA<<7|eA>>>25,eA=ne+JA|0,bj^=eA<<9|eA>>>23,eA=bj+ne|0,at^=eA<<13|eA>>>19,eA=at+bj|0,JA^=eA<<18|eA>>>14,eA=$j+Hj|0,oj^=eA<<7|eA>>>25,eA=oj+$j|0,Ht^=eA<<9|eA>>>23,eA=Ht+oj|0,Hj^=eA<<13|eA>>>19,eA=Hj+Ht|0,$j^=eA<<18|eA>>>14,eA=YA+MA|0,dt^=eA<<7|eA>>>25,eA=dt+YA|0,Jj^=eA<<9|eA>>>23,eA=Jj+dt|0,MA^=eA<<13|eA>>>19,eA=MA+Jj|0,YA^=eA<<18|eA>>>14,eA=Mt+kj|0,ce^=eA<<7|eA>>>25,eA=ce+Mt|0,KA^=eA<<9|eA>>>23,eA=KA+ce|0,kj^=eA<<13|eA>>>19,eA=kj+KA|0,Mt^=eA<<18|eA>>>14,eA=JA+ce|0,Hj^=eA<<7|eA>>>25,eA=Hj+JA|0,Jj^=eA<<9|eA>>>23,eA=Jj+Hj|0,ce^=eA<<13|eA>>>19,eA=ce+Jj|0,JA^=eA<<18|eA>>>14,eA=$j+ne|0,MA^=eA<<7|eA>>>25,eA=MA+$j|0,KA^=eA<<9|eA>>>23,eA=KA+MA|0,ne^=eA<<13|eA>>>19,eA=ne+KA|0,$j^=eA<<18|eA>>>14,eA=YA+oj|0,kj^=eA<<7|eA>>>25,eA=kj+YA|0,bj^=eA<<9|eA>>>23,eA=bj+kj|0,oj^=eA<<13|eA>>>19,eA=oj+bj|0,YA^=eA<<18|eA>>>14,eA=Mt+dt|0,at^=eA<<7|eA>>>25,eA=at+Mt|0,Ht^=eA<<9|eA>>>23,eA=Ht+at|0,dt^=eA<<13|eA>>>19,eA=dt+Ht|0,Mt^=eA<<18|eA>>>14;JA=JA+U|0,Hj=Hj+uA|0,Jj=Jj+GA|0,ce=ce+jj|0,ne=ne+Fj|0,$j=$j+w|0,MA=MA+K|0,KA=KA+Y|0,bj=bj+N|0,oj=oj+dA|0,YA=YA+gA|0,kj=kj+fA|0,at=at+BA|0,Ht=Ht+UA|0,dt=dt+hj|0,Mt=Mt+Zj|0,f[0]=JA>>>0&255,f[1]=JA>>>8&255,f[2]=JA>>>16&255,f[3]=JA>>>24&255,f[4]=Hj>>>0&255,f[5]=Hj>>>8&255,f[6]=Hj>>>16&255,f[7]=Hj>>>24&255,f[8]=Jj>>>0&255,f[9]=Jj>>>8&255,f[10]=Jj>>>16&255,f[11]=Jj>>>24&255,f[12]=ce>>>0&255,f[13]=ce>>>8&255,f[14]=ce>>>16&255,f[15]=ce>>>24&255,f[16]=ne>>>0&255,f[17]=ne>>>8&255,f[18]=ne>>>16&255,f[19]=ne>>>24&255,f[20]=$j>>>0&255,f[21]=$j>>>8&255,f[22]=$j>>>16&255,f[23]=$j>>>24&255,f[24]=MA>>>0&255,f[25]=MA>>>8&255,f[26]=MA>>>16&255,f[27]=MA>>>24&255,f[28]=KA>>>0&255,f[29]=KA>>>8&255,f[30]=KA>>>16&255,f[31]=KA>>>24&255,f[32]=bj>>>0&255,f[33]=bj>>>8&255,f[34]=bj>>>16&255,f[35]=bj>>>24&255,f[36]=oj>>>0&255,f[37]=oj>>>8&255,f[38]=oj>>>16&255,f[39]=oj>>>24&255,f[40]=YA>>>0&255,f[41]=YA>>>8&255,f[42]=YA>>>16&255,f[43]=YA>>>24&255,f[44]=kj>>>0&255,f[45]=kj>>>8&255,f[46]=kj>>>16&255,f[47]=kj>>>24&255,f[48]=at>>>0&255,f[49]=at>>>8&255,f[50]=at>>>16&255,f[51]=at>>>24&255,f[52]=Ht>>>0&255,f[53]=Ht>>>8&255,f[54]=Ht>>>16&255,f[55]=Ht>>>24&255,f[56]=dt>>>0&255,f[57]=dt>>>8&255,f[58]=dt>>>16&255,f[59]=dt>>>24&255,f[60]=Mt>>>0&255,f[61]=Mt>>>8&255,f[62]=Mt>>>16&255,f[63]=Mt>>>24&255}function x(f,C,T,B){for(var U=B[0]&255|(B[1]&255)<<8|(B[2]&255)<<16|(B[3]&255)<<24,uA=T[0]&255|(T[1]&255)<<8|(T[2]&255)<<16|(T[3]&255)<<24,GA=T[4]&255|(T[5]&255)<<8|(T[6]&255)<<16|(T[7]&255)<<24,jj=T[8]&255|(T[9]&255)<<8|(T[10]&255)<<16|(T[11]&255)<<24,Fj=T[12]&255|(T[13]&255)<<8|(T[14]&255)<<16|(T[15]&255)<<24,w=B[4]&255|(B[5]&255)<<8|(B[6]&255)<<16|(B[7]&255)<<24,K=C[0]&255|(C[1]&255)<<8|(C[2]&255)<<16|(C[3]&255)<<24,Y=C[4]&255|(C[5]&255)<<8|(C[6]&255)<<16|(C[7]&255)<<24,N=C[8]&255|(C[9]&255)<<8|(C[10]&255)<<16|(C[11]&255)<<24,dA=C[12]&255|(C[13]&255)<<8|(C[14]&255)<<16|(C[15]&255)<<24,gA=B[8]&255|(B[9]&255)<<8|(B[10]&255)<<16|(B[11]&255)<<24,fA=T[16]&255|(T[17]&255)<<8|(T[18]&255)<<16|(T[19]&255)<<24,BA=T[20]&255|(T[21]&255)<<8|(T[22]&255)<<16|(T[23]&255)<<24,UA=T[24]&255|(T[25]&255)<<8|(T[26]&255)<<16|(T[27]&255)<<24,hj=T[28]&255|(T[29]&255)<<8|(T[30]&255)<<16|(T[31]&255)<<24,Zj=B[12]&255|(B[13]&255)<<8|(B[14]&255)<<16|(B[15]&255)<<24,JA=U,Hj=uA,Jj=GA,ce=jj,ne=Fj,$j=w,MA=K,KA=Y,bj=N,oj=dA,YA=gA,kj=fA,at=BA,Ht=UA,dt=hj,Mt=Zj,eA,sr=0;sr<20;sr+=2)eA=JA+at|0,ne^=eA<<7|eA>>>25,eA=ne+JA|0,bj^=eA<<9|eA>>>23,eA=bj+ne|0,at^=eA<<13|eA>>>19,eA=at+bj|0,JA^=eA<<18|eA>>>14,eA=$j+Hj|0,oj^=eA<<7|eA>>>25,eA=oj+$j|0,Ht^=eA<<9|eA>>>23,eA=Ht+oj|0,Hj^=eA<<13|eA>>>19,eA=Hj+Ht|0,$j^=eA<<18|eA>>>14,eA=YA+MA|0,dt^=eA<<7|eA>>>25,eA=dt+YA|0,Jj^=eA<<9|eA>>>23,eA=Jj+dt|0,MA^=eA<<13|eA>>>19,eA=MA+Jj|0,YA^=eA<<18|eA>>>14,eA=Mt+kj|0,ce^=eA<<7|eA>>>25,eA=ce+Mt|0,KA^=eA<<9|eA>>>23,eA=KA+ce|0,kj^=eA<<13|eA>>>19,eA=kj+KA|0,Mt^=eA<<18|eA>>>14,eA=JA+ce|0,Hj^=eA<<7|eA>>>25,eA=Hj+JA|0,Jj^=eA<<9|eA>>>23,eA=Jj+Hj|0,ce^=eA<<13|eA>>>19,eA=ce+Jj|0,JA^=eA<<18|eA>>>14,eA=$j+ne|0,MA^=eA<<7|eA>>>25,eA=MA+$j|0,KA^=eA<<9|eA>>>23,eA=KA+MA|0,ne^=eA<<13|eA>>>19,eA=ne+KA|0,$j^=eA<<18|eA>>>14,eA=YA+oj|0,kj^=eA<<7|eA>>>25,eA=kj+YA|0,bj^=eA<<9|eA>>>23,eA=bj+kj|0,oj^=eA<<13|eA>>>19,eA=oj+bj|0,YA^=eA<<18|eA>>>14,eA=Mt+dt|0,at^=eA<<7|eA>>>25,eA=at+Mt|0,Ht^=eA<<9|eA>>>23,eA=Ht+at|0,dt^=eA<<13|eA>>>19,eA=dt+Ht|0,Mt^=eA<<18|eA>>>14;f[0]=JA>>>0&255,f[1]=JA>>>8&255,f[2]=JA>>>16&255,f[3]=JA>>>24&255,f[4]=$j>>>0&255,f[5]=$j>>>8&255,f[6]=$j>>>16&255,f[7]=$j>>>24&255,f[8]=YA>>>0&255,f[9]=YA>>>8&255,f[10]=YA>>>16&255,f[11]=YA>>>24&255,f[12]=Mt>>>0&255,f[13]=Mt>>>8&255,f[14]=Mt>>>16&255,f[15]=Mt>>>24&255,f[16]=MA>>>0&255,f[17]=MA>>>8&255,f[18]=MA>>>16&255,f[19]=MA>>>24&255,f[20]=KA>>>0&255,f[21]=KA>>>8&255,f[22]=KA>>>16&255,f[23]=KA>>>24&255,f[24]=bj>>>0&255,f[25]=bj>>>8&255,f[26]=bj>>>16&255,f[27]=bj>>>24&255,f[28]=oj>>>0&255,f[29]=oj>>>8&255,f[30]=oj>>>16&255,f[31]=oj>>>24&255}function R(f,C,T,B){G(f,C,T,B)}function P(f,C,T,B){x(f,C,T,B)}var D=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function y(f,C,T,B,U,uA,GA){var jj=new Uint8Array(16),Fj=new Uint8Array(64),w,K;for(K=0;K<16;K++)jj[K]=0;for(K=0;K<8;K++)jj[K]=uA[K];for(;U>=64;){for(R(Fj,jj,GA,D),K=0;K<64;K++)f[C+K]=T[B+K]^Fj[K];for(w=1,K=8;K<16;K++)w=w+(jj[K]&255)|0,jj[K]=w&255,w>>>=8;U-=64,C+=64,B+=64}if(U>0)for(R(Fj,jj,GA,D),K=0;K<U;K++)f[C+K]=T[B+K]^Fj[K];return 0}function h(f,C,T,B,U){var uA=new Uint8Array(16),GA=new Uint8Array(64),jj,Fj;for(Fj=0;Fj<16;Fj++)uA[Fj]=0;for(Fj=0;Fj<8;Fj++)uA[Fj]=B[Fj];for(;T>=64;){for(R(GA,uA,U,D),Fj=0;Fj<64;Fj++)f[C+Fj]=GA[Fj];for(jj=1,Fj=8;Fj<16;Fj++)jj=jj+(uA[Fj]&255)|0,uA[Fj]=jj&255,jj>>>=8;T-=64,C+=64}if(T>0)for(R(GA,uA,U,D),Fj=0;Fj<T;Fj++)f[C+Fj]=GA[Fj];return 0}function O(f,C,T,B,U){var uA=new Uint8Array(32);P(uA,B,U,D);for(var GA=new Uint8Array(8),jj=0;jj<8;jj++)GA[jj]=B[jj+16];return h(f,C,T,GA,uA)}function Q(f,C,T,B,U,uA,GA){var jj=new Uint8Array(32);P(jj,uA,GA,D);for(var Fj=new Uint8Array(8),w=0;w<8;w++)Fj[w]=uA[w+16];return y(f,C,T,B,U,Fj,jj)}var AA=function(f){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var C,T,B,U,uA,GA,jj,Fj;C=f[0]&255|(f[1]&255)<<8,this.r[0]=C&8191,T=f[2]&255|(f[3]&255)<<8,this.r[1]=(C>>>13|T<<3)&8191,B=f[4]&255|(f[5]&255)<<8,this.r[2]=(T>>>10|B<<6)&7939,U=f[6]&255|(f[7]&255)<<8,this.r[3]=(B>>>7|U<<9)&8191,uA=f[8]&255|(f[9]&255)<<8,this.r[4]=(U>>>4|uA<<12)&255,this.r[5]=uA>>>1&8190,GA=f[10]&255|(f[11]&255)<<8,this.r[6]=(uA>>>14|GA<<2)&8191,jj=f[12]&255|(f[13]&255)<<8,this.r[7]=(GA>>>11|jj<<5)&8065,Fj=f[14]&255|(f[15]&255)<<8,this.r[8]=(jj>>>8|Fj<<8)&8191,this.r[9]=Fj>>>5&127,this.pad[0]=f[16]&255|(f[17]&255)<<8,this.pad[1]=f[18]&255|(f[19]&255)<<8,this.pad[2]=f[20]&255|(f[21]&255)<<8,this.pad[3]=f[22]&255|(f[23]&255)<<8,this.pad[4]=f[24]&255|(f[25]&255)<<8,this.pad[5]=f[26]&255|(f[27]&255)<<8,this.pad[6]=f[28]&255|(f[29]&255)<<8,this.pad[7]=f[30]&255|(f[31]&255)<<8};AA.prototype.blocks=function(f,C,T){for(var B=this.fin?0:2048,U,uA,GA,jj,Fj,w,K,Y,N,dA,gA,fA,BA,UA,hj,Zj,JA,Hj,Jj,ce=this.h[0],ne=this.h[1],$j=this.h[2],MA=this.h[3],KA=this.h[4],bj=this.h[5],oj=this.h[6],YA=this.h[7],kj=this.h[8],at=this.h[9],Ht=this.r[0],dt=this.r[1],Mt=this.r[2],eA=this.r[3],sr=this.r[4],qr=this.r[5],kr=this.r[6],Kt=this.r[7],ur=this.r[8],zt=this.r[9];T>=16;)U=f[C+0]&255|(f[C+1]&255)<<8,ce+=U&8191,uA=f[C+2]&255|(f[C+3]&255)<<8,ne+=(U>>>13|uA<<3)&8191,GA=f[C+4]&255|(f[C+5]&255)<<8,$j+=(uA>>>10|GA<<6)&8191,jj=f[C+6]&255|(f[C+7]&255)<<8,MA+=(GA>>>7|jj<<9)&8191,Fj=f[C+8]&255|(f[C+9]&255)<<8,KA+=(jj>>>4|Fj<<12)&8191,bj+=Fj>>>1&8191,w=f[C+10]&255|(f[C+11]&255)<<8,oj+=(Fj>>>14|w<<2)&8191,K=f[C+12]&255|(f[C+13]&255)<<8,YA+=(w>>>11|K<<5)&8191,Y=f[C+14]&255|(f[C+15]&255)<<8,kj+=(K>>>8|Y<<8)&8191,at+=Y>>>5|B,N=0,dA=N,dA+=ce*Ht,dA+=ne*(5*zt),dA+=$j*(5*ur),dA+=MA*(5*Kt),dA+=KA*(5*kr),N=dA>>>13,dA&=8191,dA+=bj*(5*qr),dA+=oj*(5*sr),dA+=YA*(5*eA),dA+=kj*(5*Mt),dA+=at*(5*dt),N+=dA>>>13,dA&=8191,gA=N,gA+=ce*dt,gA+=ne*Ht,gA+=$j*(5*zt),gA+=MA*(5*ur),gA+=KA*(5*Kt),N=gA>>>13,gA&=8191,gA+=bj*(5*kr),gA+=oj*(5*qr),gA+=YA*(5*sr),gA+=kj*(5*eA),gA+=at*(5*Mt),N+=gA>>>13,gA&=8191,fA=N,fA+=ce*Mt,fA+=ne*dt,fA+=$j*Ht,fA+=MA*(5*zt),fA+=KA*(5*ur),N=fA>>>13,fA&=8191,fA+=bj*(5*Kt),fA+=oj*(5*kr),fA+=YA*(5*qr),fA+=kj*(5*sr),fA+=at*(5*eA),N+=fA>>>13,fA&=8191,BA=N,BA+=ce*eA,BA+=ne*Mt,BA+=$j*dt,BA+=MA*Ht,BA+=KA*(5*zt),N=BA>>>13,BA&=8191,BA+=bj*(5*ur),BA+=oj*(5*Kt),BA+=YA*(5*kr),BA+=kj*(5*qr),BA+=at*(5*sr),N+=BA>>>13,BA&=8191,UA=N,UA+=ce*sr,UA+=ne*eA,UA+=$j*Mt,UA+=MA*dt,UA+=KA*Ht,N=UA>>>13,UA&=8191,UA+=bj*(5*zt),UA+=oj*(5*ur),UA+=YA*(5*Kt),UA+=kj*(5*kr),UA+=at*(5*qr),N+=UA>>>13,UA&=8191,hj=N,hj+=ce*qr,hj+=ne*sr,hj+=$j*eA,hj+=MA*Mt,hj+=KA*dt,N=hj>>>13,hj&=8191,hj+=bj*Ht,hj+=oj*(5*zt),hj+=YA*(5*ur),hj+=kj*(5*Kt),hj+=at*(5*kr),N+=hj>>>13,hj&=8191,Zj=N,Zj+=ce*kr,Zj+=ne*qr,Zj+=$j*sr,Zj+=MA*eA,Zj+=KA*Mt,N=Zj>>>13,Zj&=8191,Zj+=bj*dt,Zj+=oj*Ht,Zj+=YA*(5*zt),Zj+=kj*(5*ur),Zj+=at*(5*Kt),N+=Zj>>>13,Zj&=8191,JA=N,JA+=ce*Kt,JA+=ne*kr,JA+=$j*qr,JA+=MA*sr,JA+=KA*eA,N=JA>>>13,JA&=8191,JA+=bj*Mt,JA+=oj*dt,JA+=YA*Ht,JA+=kj*(5*zt),JA+=at*(5*ur),N+=JA>>>13,JA&=8191,Hj=N,Hj+=ce*ur,Hj+=ne*Kt,Hj+=$j*kr,Hj+=MA*qr,Hj+=KA*sr,N=Hj>>>13,Hj&=8191,Hj+=bj*eA,Hj+=oj*Mt,Hj+=YA*dt,Hj+=kj*Ht,Hj+=at*(5*zt),N+=Hj>>>13,Hj&=8191,Jj=N,Jj+=ce*zt,Jj+=ne*ur,Jj+=$j*Kt,Jj+=MA*kr,Jj+=KA*qr,N=Jj>>>13,Jj&=8191,Jj+=bj*sr,Jj+=oj*eA,Jj+=YA*Mt,Jj+=kj*dt,Jj+=at*Ht,N+=Jj>>>13,Jj&=8191,N=(N<<2)+N|0,N=N+dA|0,dA=N&8191,N=N>>>13,gA+=N,ce=dA,ne=gA,$j=fA,MA=BA,KA=UA,bj=hj,oj=Zj,YA=JA,kj=Hj,at=Jj,C+=16,T-=16;this.h[0]=ce,this.h[1]=ne,this.h[2]=$j,this.h[3]=MA,this.h[4]=KA,this.h[5]=bj,this.h[6]=oj,this.h[7]=YA,this.h[8]=kj,this.h[9]=at},AA.prototype.finish=function(f,C){var T=new Uint16Array(10),B,U,uA,GA;if(this.leftover){for(GA=this.leftover,this.buffer[GA++]=1;GA<16;GA++)this.buffer[GA]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(B=this.h[1]>>>13,this.h[1]&=8191,GA=2;GA<10;GA++)this.h[GA]+=B,B=this.h[GA]>>>13,this.h[GA]&=8191;for(this.h[0]+=B*5,B=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=B,B=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=B,T[0]=this.h[0]+5,B=T[0]>>>13,T[0]&=8191,GA=1;GA<10;GA++)T[GA]=this.h[GA]+B,B=T[GA]>>>13,T[GA]&=8191;for(T[9]-=8192,U=(B^1)-1,GA=0;GA<10;GA++)T[GA]&=U;for(U=~U,GA=0;GA<10;GA++)this.h[GA]=this.h[GA]&U|T[GA];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,uA=this.h[0]+this.pad[0],this.h[0]=uA&65535,GA=1;GA<8;GA++)uA=(this.h[GA]+this.pad[GA]|0)+(uA>>>16)|0,this.h[GA]=uA&65535;f[C+0]=this.h[0]>>>0&255,f[C+1]=this.h[0]>>>8&255,f[C+2]=this.h[1]>>>0&255,f[C+3]=this.h[1]>>>8&255,f[C+4]=this.h[2]>>>0&255,f[C+5]=this.h[2]>>>8&255,f[C+6]=this.h[3]>>>0&255,f[C+7]=this.h[3]>>>8&255,f[C+8]=this.h[4]>>>0&255,f[C+9]=this.h[4]>>>8&255,f[C+10]=this.h[5]>>>0&255,f[C+11]=this.h[5]>>>8&255,f[C+12]=this.h[6]>>>0&255,f[C+13]=this.h[6]>>>8&255,f[C+14]=this.h[7]>>>0&255,f[C+15]=this.h[7]>>>8&255},AA.prototype.update=function(f,C,T){var B,U;if(this.leftover){for(U=16-this.leftover,U>T&&(U=T),B=0;B<U;B++)this.buffer[this.leftover+B]=f[C+B];if(T-=U,C+=U,this.leftover+=U,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(T>=16&&(U=T-T%16,this.blocks(f,C,U),C+=U,T-=U),T){for(B=0;B<T;B++)this.buffer[this.leftover+B]=f[C+B];this.leftover+=T}};function nA(f,C,T,B,U,uA){var GA=new AA(uA);return GA.update(T,B,U),GA.finish(f,C),0}function bA(f,C,T,B,U,uA){var GA=new Uint8Array(16);return nA(GA,0,T,B,U,uA),F(f,C,GA,0)}function XA(f,C,T,B,U){var uA;if(T<32)return-1;for(Q(f,0,C,0,T,B,U),nA(f,16,f,32,T-32,f),uA=0;uA<16;uA++)f[uA]=0;return 0}function dj(f,C,T,B,U){var uA,GA=new Uint8Array(32);if(T<32||(O(GA,0,32,B,U),bA(C,16,C,32,T-32,GA)!==0))return-1;for(Q(f,0,C,0,T,B,U),uA=0;uA<32;uA++)f[uA]=0;return 0}function yA(f,C){var T;for(T=0;T<16;T++)f[T]=C[T]|0}function tj(f){var C,T,B=1;for(C=0;C<16;C++)T=f[C]+B+65535,B=Math.floor(T/65536),f[C]=T-B*65536;f[0]+=B-1+37*(B-1)}function LA(f,C,T){for(var B,U=~(T-1),uA=0;uA<16;uA++)B=U&(f[uA]^C[uA]),f[uA]^=B,C[uA]^=B}function Qj(f,C){var T,B,U,uA=j(),GA=j();for(T=0;T<16;T++)GA[T]=C[T];for(tj(GA),tj(GA),tj(GA),B=0;B<2;B++){for(uA[0]=GA[0]-65517,T=1;T<15;T++)uA[T]=GA[T]-65535-(uA[T-1]>>16&1),uA[T-1]&=65535;uA[15]=GA[15]-32767-(uA[14]>>16&1),U=uA[15]>>16&1,uA[14]&=65535,LA(GA,uA,1-U)}for(T=0;T<16;T++)f[2*T]=GA[T]&255,f[2*T+1]=GA[T]>>8}function Oj(f,C){var T=new Uint8Array(32),B=new Uint8Array(32);return Qj(T,f),Qj(B,C),S(T,0,B,0)}function Ej(f){var C=new Uint8Array(32);return Qj(C,f),C[0]&1}function Yj(f,C){var T;for(T=0;T<16;T++)f[T]=C[2*T]+(C[2*T+1]<<8);f[15]&=32767}function Tj(f,C,T){for(var B=0;B<16;B++)f[B]=C[B]+T[B]}function mj(f,C,T){for(var B=0;B<16;B++)f[B]=C[B]-T[B]}function qj(f,C,T){var B,U,uA=0,GA=0,jj=0,Fj=0,w=0,K=0,Y=0,N=0,dA=0,gA=0,fA=0,BA=0,UA=0,hj=0,Zj=0,JA=0,Hj=0,Jj=0,ce=0,ne=0,$j=0,MA=0,KA=0,bj=0,oj=0,YA=0,kj=0,at=0,Ht=0,dt=0,Mt=0,eA=T[0],sr=T[1],qr=T[2],kr=T[3],Kt=T[4],ur=T[5],zt=T[6],I6=T[7],Wr=T[8],b=T[9],I=T[10],M=T[11],lA=T[12],QA=T[13],uj=T[14],Mj=T[15];B=C[0],uA+=B*eA,GA+=B*sr,jj+=B*qr,Fj+=B*kr,w+=B*Kt,K+=B*ur,Y+=B*zt,N+=B*I6,dA+=B*Wr,gA+=B*b,fA+=B*I,BA+=B*M,UA+=B*lA,hj+=B*QA,Zj+=B*uj,JA+=B*Mj,B=C[1],GA+=B*eA,jj+=B*sr,Fj+=B*qr,w+=B*kr,K+=B*Kt,Y+=B*ur,N+=B*zt,dA+=B*I6,gA+=B*Wr,fA+=B*b,BA+=B*I,UA+=B*M,hj+=B*lA,Zj+=B*QA,JA+=B*uj,Hj+=B*Mj,B=C[2],jj+=B*eA,Fj+=B*sr,w+=B*qr,K+=B*kr,Y+=B*Kt,N+=B*ur,dA+=B*zt,gA+=B*I6,fA+=B*Wr,BA+=B*b,UA+=B*I,hj+=B*M,Zj+=B*lA,JA+=B*QA,Hj+=B*uj,Jj+=B*Mj,B=C[3],Fj+=B*eA,w+=B*sr,K+=B*qr,Y+=B*kr,N+=B*Kt,dA+=B*ur,gA+=B*zt,fA+=B*I6,BA+=B*Wr,UA+=B*b,hj+=B*I,Zj+=B*M,JA+=B*lA,Hj+=B*QA,Jj+=B*uj,ce+=B*Mj,B=C[4],w+=B*eA,K+=B*sr,Y+=B*qr,N+=B*kr,dA+=B*Kt,gA+=B*ur,fA+=B*zt,BA+=B*I6,UA+=B*Wr,hj+=B*b,Zj+=B*I,JA+=B*M,Hj+=B*lA,Jj+=B*QA,ce+=B*uj,ne+=B*Mj,B=C[5],K+=B*eA,Y+=B*sr,N+=B*qr,dA+=B*kr,gA+=B*Kt,fA+=B*ur,BA+=B*zt,UA+=B*I6,hj+=B*Wr,Zj+=B*b,JA+=B*I,Hj+=B*M,Jj+=B*lA,ce+=B*QA,ne+=B*uj,$j+=B*Mj,B=C[6],Y+=B*eA,N+=B*sr,dA+=B*qr,gA+=B*kr,fA+=B*Kt,BA+=B*ur,UA+=B*zt,hj+=B*I6,Zj+=B*Wr,JA+=B*b,Hj+=B*I,Jj+=B*M,ce+=B*lA,ne+=B*QA,$j+=B*uj,MA+=B*Mj,B=C[7],N+=B*eA,dA+=B*sr,gA+=B*qr,fA+=B*kr,BA+=B*Kt,UA+=B*ur,hj+=B*zt,Zj+=B*I6,JA+=B*Wr,Hj+=B*b,Jj+=B*I,ce+=B*M,ne+=B*lA,$j+=B*QA,MA+=B*uj,KA+=B*Mj,B=C[8],dA+=B*eA,gA+=B*sr,fA+=B*qr,BA+=B*kr,UA+=B*Kt,hj+=B*ur,Zj+=B*zt,JA+=B*I6,Hj+=B*Wr,Jj+=B*b,ce+=B*I,ne+=B*M,$j+=B*lA,MA+=B*QA,KA+=B*uj,bj+=B*Mj,B=C[9],gA+=B*eA,fA+=B*sr,BA+=B*qr,UA+=B*kr,hj+=B*Kt,Zj+=B*ur,JA+=B*zt,Hj+=B*I6,Jj+=B*Wr,ce+=B*b,ne+=B*I,$j+=B*M,MA+=B*lA,KA+=B*QA,bj+=B*uj,oj+=B*Mj,B=C[10],fA+=B*eA,BA+=B*sr,UA+=B*qr,hj+=B*kr,Zj+=B*Kt,JA+=B*ur,Hj+=B*zt,Jj+=B*I6,ce+=B*Wr,ne+=B*b,$j+=B*I,MA+=B*M,KA+=B*lA,bj+=B*QA,oj+=B*uj,YA+=B*Mj,B=C[11],BA+=B*eA,UA+=B*sr,hj+=B*qr,Zj+=B*kr,JA+=B*Kt,Hj+=B*ur,Jj+=B*zt,ce+=B*I6,ne+=B*Wr,$j+=B*b,MA+=B*I,KA+=B*M,bj+=B*lA,oj+=B*QA,YA+=B*uj,kj+=B*Mj,B=C[12],UA+=B*eA,hj+=B*sr,Zj+=B*qr,JA+=B*kr,Hj+=B*Kt,Jj+=B*ur,ce+=B*zt,ne+=B*I6,$j+=B*Wr,MA+=B*b,KA+=B*I,bj+=B*M,oj+=B*lA,YA+=B*QA,kj+=B*uj,at+=B*Mj,B=C[13],hj+=B*eA,Zj+=B*sr,JA+=B*qr,Hj+=B*kr,Jj+=B*Kt,ce+=B*ur,ne+=B*zt,$j+=B*I6,MA+=B*Wr,KA+=B*b,bj+=B*I,oj+=B*M,YA+=B*lA,kj+=B*QA,at+=B*uj,Ht+=B*Mj,B=C[14],Zj+=B*eA,JA+=B*sr,Hj+=B*qr,Jj+=B*kr,ce+=B*Kt,ne+=B*ur,$j+=B*zt,MA+=B*I6,KA+=B*Wr,bj+=B*b,oj+=B*I,YA+=B*M,kj+=B*lA,at+=B*QA,Ht+=B*uj,dt+=B*Mj,B=C[15],JA+=B*eA,Hj+=B*sr,Jj+=B*qr,ce+=B*kr,ne+=B*Kt,$j+=B*ur,MA+=B*zt,KA+=B*I6,bj+=B*Wr,oj+=B*b,YA+=B*I,kj+=B*M,at+=B*lA,Ht+=B*QA,dt+=B*uj,Mt+=B*Mj,uA+=38*Hj,GA+=38*Jj,jj+=38*ce,Fj+=38*ne,w+=38*$j,K+=38*MA,Y+=38*KA,N+=38*bj,dA+=38*oj,gA+=38*YA,fA+=38*kj,BA+=38*at,UA+=38*Ht,hj+=38*dt,Zj+=38*Mt,U=1,B=uA+U+65535,U=Math.floor(B/65536),uA=B-U*65536,B=GA+U+65535,U=Math.floor(B/65536),GA=B-U*65536,B=jj+U+65535,U=Math.floor(B/65536),jj=B-U*65536,B=Fj+U+65535,U=Math.floor(B/65536),Fj=B-U*65536,B=w+U+65535,U=Math.floor(B/65536),w=B-U*65536,B=K+U+65535,U=Math.floor(B/65536),K=B-U*65536,B=Y+U+65535,U=Math.floor(B/65536),Y=B-U*65536,B=N+U+65535,U=Math.floor(B/65536),N=B-U*65536,B=dA+U+65535,U=Math.floor(B/65536),dA=B-U*65536,B=gA+U+65535,U=Math.floor(B/65536),gA=B-U*65536,B=fA+U+65535,U=Math.floor(B/65536),fA=B-U*65536,B=BA+U+65535,U=Math.floor(B/65536),BA=B-U*65536,B=UA+U+65535,U=Math.floor(B/65536),UA=B-U*65536,B=hj+U+65535,U=Math.floor(B/65536),hj=B-U*65536,B=Zj+U+65535,U=Math.floor(B/65536),Zj=B-U*65536,B=JA+U+65535,U=Math.floor(B/65536),JA=B-U*65536,uA+=U-1+37*(U-1),U=1,B=uA+U+65535,U=Math.floor(B/65536),uA=B-U*65536,B=GA+U+65535,U=Math.floor(B/65536),GA=B-U*65536,B=jj+U+65535,U=Math.floor(B/65536),jj=B-U*65536,B=Fj+U+65535,U=Math.floor(B/65536),Fj=B-U*65536,B=w+U+65535,U=Math.floor(B/65536),w=B-U*65536,B=K+U+65535,U=Math.floor(B/65536),K=B-U*65536,B=Y+U+65535,U=Math.floor(B/65536),Y=B-U*65536,B=N+U+65535,U=Math.floor(B/65536),N=B-U*65536,B=dA+U+65535,U=Math.floor(B/65536),dA=B-U*65536,B=gA+U+65535,U=Math.floor(B/65536),gA=B-U*65536,B=fA+U+65535,U=Math.floor(B/65536),fA=B-U*65536,B=BA+U+65535,U=Math.floor(B/65536),BA=B-U*65536,B=UA+U+65535,U=Math.floor(B/65536),UA=B-U*65536,B=hj+U+65535,U=Math.floor(B/65536),hj=B-U*65536,B=Zj+U+65535,U=Math.floor(B/65536),Zj=B-U*65536,B=JA+U+65535,U=Math.floor(B/65536),JA=B-U*65536,uA+=U-1+37*(U-1),f[0]=uA,f[1]=GA,f[2]=jj,f[3]=Fj,f[4]=w,f[5]=K,f[6]=Y,f[7]=N,f[8]=dA,f[9]=gA,f[10]=fA,f[11]=BA,f[12]=UA,f[13]=hj,f[14]=Zj,f[15]=JA}function _e(f,C){qj(f,C,C)}function Tt(f,C){var T=j(),B;for(B=0;B<16;B++)T[B]=C[B];for(B=253;B>=0;B--)_e(T,T),B!==2&&B!==4&&qj(T,T,C);for(B=0;B<16;B++)f[B]=T[B]}function Cj(f,C){var T=j(),B;for(B=0;B<16;B++)T[B]=C[B];for(B=250;B>=0;B--)_e(T,T),B!==1&&qj(T,T,C);for(B=0;B<16;B++)f[B]=T[B]}function xt(f,C,T){var B=new Uint8Array(32),U=new Float64Array(80),uA,GA,jj=j(),Fj=j(),w=j(),K=j(),Y=j(),N=j();for(GA=0;GA<31;GA++)B[GA]=C[GA];for(B[31]=C[31]&127|64,B[0]&=248,Yj(U,T),GA=0;GA<16;GA++)Fj[GA]=U[GA],K[GA]=jj[GA]=w[GA]=0;for(jj[0]=K[0]=1,GA=254;GA>=0;--GA)uA=B[GA>>>3]>>>(GA&7)&1,LA(jj,Fj,uA),LA(w,K,uA),Tj(Y,jj,w),mj(jj,jj,w),Tj(w,Fj,K),mj(Fj,Fj,K),_e(K,Y),_e(N,jj),qj(jj,w,jj),qj(w,Fj,Y),Tj(Y,jj,w),mj(jj,jj,w),_e(Fj,jj),mj(w,K,N),qj(jj,w,o),Tj(jj,jj,K),qj(w,w,jj),qj(jj,K,N),qj(K,Fj,U),_e(Fj,Y),LA(jj,Fj,uA),LA(w,K,uA);for(GA=0;GA<16;GA++)U[GA+16]=jj[GA],U[GA+32]=w[GA],U[GA+48]=Fj[GA],U[GA+64]=K[GA];var dA=U.subarray(32),gA=U.subarray(16);return Tt(dA,dA),qj(gA,gA,dA),Qj(f,gA),0}function At(f,C){return xt(f,C,r)}function Ce(f,C){return e(C,32),At(f,C)}function fe(f,C,T){var B=new Uint8Array(32);return xt(B,T,C),P(f,t,B,D)}var ir=XA,Ar=dj;function Pt(f,C,T,B,U,uA){var GA=new Uint8Array(32);return fe(GA,U,uA),ir(f,C,T,B,GA)}function Jr(f,C,T,B,U,uA){var GA=new Uint8Array(32);return fe(GA,U,uA),Ar(f,C,T,B,GA)}var Kr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _r(f,C,T,B){for(var U=new Int32Array(16),uA=new Int32Array(16),GA,jj,Fj,w,K,Y,N,dA,gA,fA,BA,UA,hj,Zj,JA,Hj,Jj,ce,ne,$j,MA,KA,bj,oj,YA,kj,at=f[0],Ht=f[1],dt=f[2],Mt=f[3],eA=f[4],sr=f[5],qr=f[6],kr=f[7],Kt=C[0],ur=C[1],zt=C[2],I6=C[3],Wr=C[4],b=C[5],I=C[6],M=C[7],lA=0;B>=128;){for(ne=0;ne<16;ne++)$j=8*ne+lA,U[ne]=T[$j+0]<<24|T[$j+1]<<16|T[$j+2]<<8|T[$j+3],uA[ne]=T[$j+4]<<24|T[$j+5]<<16|T[$j+6]<<8|T[$j+7];for(ne=0;ne<80;ne++)if(GA=at,jj=Ht,Fj=dt,w=Mt,K=eA,Y=sr,N=qr,dA=kr,gA=Kt,fA=ur,BA=zt,UA=I6,hj=Wr,Zj=b,JA=I,Hj=M,MA=kr,KA=M,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=(eA>>>14|Wr<<18)^(eA>>>18|Wr<<14)^(Wr>>>9|eA<<23),KA=(Wr>>>14|eA<<18)^(Wr>>>18|eA<<14)^(eA>>>9|Wr<<23),bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,MA=eA&sr^~eA&qr,KA=Wr&b^~Wr&I,bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,MA=Kr[ne*2],KA=Kr[ne*2+1],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,MA=U[ne%16],KA=uA[ne%16],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,Jj=YA&65535|kj<<16,ce=bj&65535|oj<<16,MA=Jj,KA=ce,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=(at>>>28|Kt<<4)^(Kt>>>2|at<<30)^(Kt>>>7|at<<25),KA=(Kt>>>28|at<<4)^(at>>>2|Kt<<30)^(at>>>7|Kt<<25),bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,MA=at&Ht^at&dt^Ht&dt,KA=Kt&ur^Kt&zt^ur&zt,bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,dA=YA&65535|kj<<16,Hj=bj&65535|oj<<16,MA=w,KA=UA,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=Jj,KA=ce,bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,w=YA&65535|kj<<16,UA=bj&65535|oj<<16,Ht=GA,dt=jj,Mt=Fj,eA=w,sr=K,qr=Y,kr=N,at=dA,ur=gA,zt=fA,I6=BA,Wr=UA,b=hj,I=Zj,M=JA,Kt=Hj,ne%16===15)for($j=0;$j<16;$j++)MA=U[$j],KA=uA[$j],bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=U[($j+9)%16],KA=uA[($j+9)%16],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,Jj=U[($j+1)%16],ce=uA[($j+1)%16],MA=(Jj>>>1|ce<<31)^(Jj>>>8|ce<<24)^Jj>>>7,KA=(ce>>>1|Jj<<31)^(ce>>>8|Jj<<24)^(ce>>>7|Jj<<25),bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,Jj=U[($j+14)%16],ce=uA[($j+14)%16],MA=(Jj>>>19|ce<<13)^(ce>>>29|Jj<<3)^Jj>>>6,KA=(ce>>>19|Jj<<13)^(Jj>>>29|ce<<3)^(ce>>>6|Jj<<26),bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,U[$j]=YA&65535|kj<<16,uA[$j]=bj&65535|oj<<16;MA=at,KA=Kt,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=f[0],KA=C[0],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,f[0]=at=YA&65535|kj<<16,C[0]=Kt=bj&65535|oj<<16,MA=Ht,KA=ur,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=f[1],KA=C[1],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,f[1]=Ht=YA&65535|kj<<16,C[1]=ur=bj&65535|oj<<16,MA=dt,KA=zt,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=f[2],KA=C[2],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,f[2]=dt=YA&65535|kj<<16,C[2]=zt=bj&65535|oj<<16,MA=Mt,KA=I6,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=f[3],KA=C[3],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,f[3]=Mt=YA&65535|kj<<16,C[3]=I6=bj&65535|oj<<16,MA=eA,KA=Wr,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=f[4],KA=C[4],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,f[4]=eA=YA&65535|kj<<16,C[4]=Wr=bj&65535|oj<<16,MA=sr,KA=b,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=f[5],KA=C[5],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,f[5]=sr=YA&65535|kj<<16,C[5]=b=bj&65535|oj<<16,MA=qr,KA=I,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=f[6],KA=C[6],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,f[6]=qr=YA&65535|kj<<16,C[6]=I=bj&65535|oj<<16,MA=kr,KA=M,bj=KA&65535,oj=KA>>>16,YA=MA&65535,kj=MA>>>16,MA=f[7],KA=C[7],bj+=KA&65535,oj+=KA>>>16,YA+=MA&65535,kj+=MA>>>16,oj+=bj>>>16,YA+=oj>>>16,kj+=YA>>>16,f[7]=kr=YA&65535|kj<<16,C[7]=M=bj&65535|oj<<16,lA+=128,B-=128}return B}function ca(f,C,T){var B=new Int32Array(8),U=new Int32Array(8),uA=new Uint8Array(256),GA,jj=T;for(B[0]=1779033703,B[1]=3144134277,B[2]=1013904242,B[3]=2773480762,B[4]=1359893119,B[5]=2600822924,B[6]=528734635,B[7]=1541459225,U[0]=4089235720,U[1]=2227873595,U[2]=4271175723,U[3]=1595750129,U[4]=2917565137,U[5]=725511199,U[6]=4215389547,U[7]=327033209,_r(B,U,C,T),T%=128,GA=0;GA<T;GA++)uA[GA]=C[jj-T+GA];for(uA[T]=128,T=256-128*(T<112?1:0),uA[T-9]=0,u(uA,T-8,jj/536870912|0,jj<<3),_r(B,U,uA,T),GA=0;GA<8;GA++)u(f,8*GA,B[GA],U[GA]);return 0}function ct(f,C){var T=j(),B=j(),U=j(),uA=j(),GA=j(),jj=j(),Fj=j(),w=j(),K=j();mj(T,f[1],f[0]),mj(K,C[1],C[0]),qj(T,T,K),Tj(B,f[0],f[1]),Tj(K,C[0],C[1]),qj(B,B,K),qj(U,f[3],C[3]),qj(U,U,s),qj(uA,f[2],C[2]),Tj(uA,uA,uA),mj(GA,B,T),mj(jj,uA,U),Tj(Fj,uA,U),Tj(w,B,T),qj(f[0],GA,jj),qj(f[1],w,Fj),qj(f[2],Fj,jj),qj(f[3],GA,w)}function ut(f,C,T){var B;for(B=0;B<4;B++)LA(f[B],C[B],T)}function hr(f,C){var T=j(),B=j(),U=j();Tt(U,C[2]),qj(T,C[0],U),qj(B,C[1],U),Qj(f,B),f[31]^=Ej(T)<<7}function o6(f,C,T){var B,U;for(yA(f[0],a),yA(f[1],n),yA(f[2],n),yA(f[3],a),U=255;U>=0;--U)B=T[U/8|0]>>(U&7)&1,ut(f,C,B),ct(C,f),ct(f,f),ut(f,C,B)}function se(f,C){var T=[j(),j(),j(),j()];yA(T[0],l),yA(T[1],c),yA(T[2],n),qj(T[3],l,c),o6(f,T,C)}function iA(f,C,T){var B=new Uint8Array(64),U=[j(),j(),j(),j()],uA;for(T||e(C,32),ca(B,C,32),B[0]&=248,B[31]&=127,B[31]|=64,se(U,B),hr(f,U),uA=0;uA<32;uA++)C[uA+32]=f[uA];return 0}var hA=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function HA(f,C){var T,B,U,uA;for(B=63;B>=32;--B){for(T=0,U=B-32,uA=B-12;U<uA;++U)C[U]+=T-16*C[B]*hA[U-(B-32)],T=Math.floor((C[U]+128)/256),C[U]-=T*256;C[U]+=T,C[B]=0}for(T=0,U=0;U<32;U++)C[U]+=T-(C[31]>>4)*hA[U],T=C[U]>>8,C[U]&=255;for(U=0;U<32;U++)C[U]-=T*hA[U];for(B=0;B<32;B++)C[B+1]+=C[B]>>8,f[B]=C[B]&255}function fj(f){var C=new Float64Array(64),T;for(T=0;T<64;T++)C[T]=f[T];for(T=0;T<64;T++)f[T]=0;HA(f,C)}function xj(f,C,T,B){var U=new Uint8Array(64),uA=new Uint8Array(64),GA=new Uint8Array(64),jj,Fj,w=new Float64Array(64),K=[j(),j(),j(),j()];ca(U,B,32),U[0]&=248,U[31]&=127,U[31]|=64;var Y=T+64;for(jj=0;jj<T;jj++)f[64+jj]=C[jj];for(jj=0;jj<32;jj++)f[32+jj]=U[32+jj];for(ca(GA,f.subarray(32),T+32),fj(GA),se(K,GA),hr(f,K),jj=32;jj<64;jj++)f[jj]=B[jj];for(ca(uA,f,T+64),fj(uA),jj=0;jj<64;jj++)w[jj]=0;for(jj=0;jj<32;jj++)w[jj]=GA[jj];for(jj=0;jj<32;jj++)for(Fj=0;Fj<32;Fj++)w[jj+Fj]+=uA[jj]*U[Fj];return HA(f.subarray(32),w),Y}function ye(f,C){var T=j(),B=j(),U=j(),uA=j(),GA=j(),jj=j(),Fj=j();return yA(f[2],n),Yj(f[1],C),_e(U,f[1]),qj(uA,U,i),mj(U,U,f[2]),Tj(uA,f[2],uA),_e(GA,uA),_e(jj,GA),qj(Fj,jj,GA),qj(T,Fj,U),qj(T,T,uA),Cj(T,T),qj(T,T,U),qj(T,T,uA),qj(T,T,uA),qj(f[0],T,uA),_e(B,f[0]),qj(B,B,uA),Oj(B,U)&&qj(f[0],f[0],k),_e(B,f[0]),qj(B,B,uA),Oj(B,U)?-1:(Ej(f[0])===C[31]>>7&&mj(f[0],a,f[0]),qj(f[3],f[0],f[1]),0)}function Bj(f,C,T,B){var U,uA=new Uint8Array(32),GA=new Uint8Array(64),jj=[j(),j(),j(),j()],Fj=[j(),j(),j(),j()];if(T<64||ye(Fj,B))return-1;for(U=0;U<T;U++)f[U]=C[U];for(U=0;U<32;U++)f[U+32]=B[U];if(ca(GA,f,T),fj(GA),o6(jj,Fj,GA),se(Fj,C.subarray(32)),ct(jj,Fj),hr(uA,jj),T-=64,S(C,0,uA,0)){for(U=0;U<T;U++)f[U]=0;return-1}for(U=0;U<T;U++)f[U]=C[U+64];return T}var cA=32,rA=24,wA=32,Xj=16,fr=32,Gn=32,Bi=32,na=32,zn=32,Un=rA,zE=wA,Wd=Xj,le=64,tl=32,Kc=64,gi=32,Vn=64;A.lowlevel={crypto_core_hsalsa20:P,crypto_stream_xor:Q,crypto_stream:O,crypto_stream_salsa20_xor:y,crypto_stream_salsa20:h,crypto_onetimeauth:nA,crypto_onetimeauth_verify:bA,crypto_verify_16:F,crypto_verify_32:S,crypto_secretbox:XA,crypto_secretbox_open:dj,crypto_scalarmult:xt,crypto_scalarmult_base:At,crypto_box_beforenm:fe,crypto_box_afternm:ir,crypto_box:Pt,crypto_box_open:Jr,crypto_box_keypair:Ce,crypto_hash:ca,crypto_sign:xj,crypto_sign_keypair:iA,crypto_sign_open:Bj,crypto_secretbox_KEYBYTES:cA,crypto_secretbox_NONCEBYTES:rA,crypto_secretbox_ZEROBYTES:wA,crypto_secretbox_BOXZEROBYTES:Xj,crypto_scalarmult_BYTES:fr,crypto_scalarmult_SCALARBYTES:Gn,crypto_box_PUBLICKEYBYTES:Bi,crypto_box_SECRETKEYBYTES:na,crypto_box_BEFORENMBYTES:zn,crypto_box_NONCEBYTES:Un,crypto_box_ZEROBYTES:zE,crypto_box_BOXZEROBYTES:Wd,crypto_sign_BYTES:le,crypto_sign_PUBLICKEYBYTES:tl,crypto_sign_SECRETKEYBYTES:Kc,crypto_sign_SEEDBYTES:gi,crypto_hash_BYTES:Vn,gf:j,D:i,L:hA,pack25519:Qj,unpack25519:Yj,M:qj,A:Tj,S:_e,Z:mj,pow2523:Cj,add:ct,set25519:yA,modL:HA,scalarmult:o6,scalarbase:se};function jr(f,C){if(f.length!==cA)throw new Error("bad key size");if(C.length!==rA)throw new Error("bad nonce size")}function B7(f,C){if(f.length!==Bi)throw new Error("bad public key size");if(C.length!==na)throw new Error("bad secret key size")}function St(){for(var f=0;f<arguments.length;f++)if(!(arguments[f]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Yl(f){for(var C=0;C<f.length;C++)f[C]=0}A.randomBytes=function(f){var C=new Uint8Array(f);return e(C,f),C},A.secretbox=function(f,C,T){St(f,C,T),jr(T,C);for(var B=new Uint8Array(wA+f.length),U=new Uint8Array(B.length),uA=0;uA<f.length;uA++)B[uA+wA]=f[uA];return XA(U,B,B.length,C,T),U.subarray(Xj)},A.secretbox.open=function(f,C,T){St(f,C,T),jr(T,C);for(var B=new Uint8Array(Xj+f.length),U=new Uint8Array(B.length),uA=0;uA<f.length;uA++)B[uA+Xj]=f[uA];return B.length<32||dj(U,B,B.length,C,T)!==0?null:U.subarray(wA)},A.secretbox.keyLength=cA,A.secretbox.nonceLength=rA,A.secretbox.overheadLength=Xj,A.scalarMult=function(f,C){if(St(f,C),f.length!==Gn)throw new Error("bad n size");if(C.length!==fr)throw new Error("bad p size");var T=new Uint8Array(fr);return xt(T,f,C),T},A.scalarMult.base=function(f){if(St(f),f.length!==Gn)throw new Error("bad n size");var C=new Uint8Array(fr);return At(C,f),C},A.scalarMult.scalarLength=Gn,A.scalarMult.groupElementLength=fr,A.box=function(f,C,T,B){var U=A.box.before(T,B);return A.secretbox(f,C,U)},A.box.before=function(f,C){St(f,C),B7(f,C);var T=new Uint8Array(zn);return fe(T,f,C),T},A.box.after=A.secretbox,A.box.open=function(f,C,T,B){var U=A.box.before(T,B);return A.secretbox.open(f,C,U)},A.box.open.after=A.secretbox.open,A.box.keyPair=function(){var f=new Uint8Array(Bi),C=new Uint8Array(na);return Ce(f,C),{publicKey:f,secretKey:C}},A.box.keyPair.fromSecretKey=function(f){if(St(f),f.length!==na)throw new Error("bad secret key size");var C=new Uint8Array(Bi);return At(C,f),{publicKey:C,secretKey:new Uint8Array(f)}},A.box.publicKeyLength=Bi,A.box.secretKeyLength=na,A.box.sharedKeyLength=zn,A.box.nonceLength=Un,A.box.overheadLength=A.secretbox.overheadLength,A.sign=function(f,C){if(St(f,C),C.length!==Kc)throw new Error("bad secret key size");var T=new Uint8Array(le+f.length);return xj(T,f,f.length,C),T},A.sign.open=function(f,C){if(St(f,C),C.length!==tl)throw new Error("bad public key size");var T=new Uint8Array(f.length),B=Bj(T,f,f.length,C);if(B<0)return null;for(var U=new Uint8Array(B),uA=0;uA<U.length;uA++)U[uA]=T[uA];return U},A.sign.detached=function(f,C){for(var T=A.sign(f,C),B=new Uint8Array(le),U=0;U<B.length;U++)B[U]=T[U];return B},A.sign.detached.verify=function(f,C,T){if(St(f,C,T),C.length!==le)throw new Error("bad signature size");if(T.length!==tl)throw new Error("bad public key size");var B=new Uint8Array(le+f.length),U=new Uint8Array(le+f.length),uA;for(uA=0;uA<le;uA++)B[uA]=C[uA];for(uA=0;uA<f.length;uA++)B[uA+le]=f[uA];return Bj(U,B,B.length,T)>=0},A.sign.keyPair=function(){var f=new Uint8Array(tl),C=new Uint8Array(Kc);return iA(f,C),{publicKey:f,secretKey:C}},A.sign.keyPair.fromSecretKey=function(f){if(St(f),f.length!==Kc)throw new Error("bad secret key size");for(var C=new Uint8Array(tl),T=0;T<C.length;T++)C[T]=f[32+T];return{publicKey:C,secretKey:new Uint8Array(f)}},A.sign.keyPair.fromSeed=function(f){if(St(f),f.length!==gi)throw new Error("bad seed size");for(var C=new Uint8Array(tl),T=new Uint8Array(Kc),B=0;B<32;B++)T[B]=f[B];return iA(C,T,!0),{publicKey:C,secretKey:T}},A.sign.publicKeyLength=tl,A.sign.secretKeyLength=Kc,A.sign.seedLength=gi,A.sign.signatureLength=le,A.hash=function(f){St(f);var C=new Uint8Array(Vn);return ca(C,f,f.length),C},A.hash.hashLength=Vn,A.verify=function(f,C){return St(f,C),f.length===0||C.length===0||f.length!==C.length?!1:m(f,0,C,0,f.length)===0},A.setPRNG=function(f){e=f},function(){var f=typeof self<"u"?self.crypto||self.msCrypto:null;if(f&&f.getRandomValues){var C=65536;A.setPRNG(function(T,B){var U,uA=new Uint8Array(B);for(U=0;U<B;U+=C)f.getRandomValues(uA.subarray(U,U+Math.min(B-U,C)));for(U=0;U<B;U++)T[U]=uA[U];Yl(uA)})}else typeof Y0<"u"&&(f=BFA(),f&&f.randomBytes&&A.setPRNG(function(T,B){var U,uA=f.randomBytes(B);for(U=0;U<B;U++)T[U]=uA[U];Yl(uA)}))}()})(typeof ET<"u"&&ET.exports?ET.exports:self.nacl=self.nacl||{})});var JFA=RA((jNe,BFj)=>{BFj.exports="/assets/wasm/b5_hpke_bg-57LZZQD2.wasm"});var wwA=RA((SUe,twj)=>{twj.exports="/assets/wasm/confidential_computing_bg-QRWMMSG2.wasm"});var pS=RA(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});ES.ByteSequence=void 0;var $eA=class{constructor(j){this.base64Value=j}toBase64(){return this.base64Value}};ES.ByteSequence=$eA});var QI=RA(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.isByteSequence=qd.isInnerList=qd.isValidKeyStr=qd.isValidTokenStr=qd.isAscii=void 0;var BRj=/^[\x20-\x7E]*$/,gRj=/^[a-zA-Z*][:/!#$%&'*+\-.^_`|~A-Za-z0-9]*$/,hRj=/^[a-z*][*\-_.a-z0-9]*$/;function qRj(A){return BRj.test(A)}qd.isAscii=qRj;function xRj(A){return gRj.test(A)}qd.isValidTokenStr=xRj;function vRj(A){return hRj.test(A)}qd.isValidKeyStr=vRj;function GRj(A){return Array.isArray(A[0])}qd.isInnerList=GRj;function fRj(A){return typeof A=="object"&&"base64Value"in A}qd.isByteSequence=fRj});var BS=RA(mS=>{"use strict";Object.defineProperty(mS,"__esModule",{value:!0});mS.Token=void 0;var FRj=QI(),weA=class{constructor(j){if(!(0,FRj.isValidTokenStr)(j))throw new TypeError("Invalid character in Token string. Tokens must start with *, A-Z and the rest of the string may only contain a-z, A-Z, 0-9, :/!#$%&'*+-.^_`|~");this.value=j}toString(){return this.value}};mS.Token=weA});var tOA=RA(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.serializeKey=Ia.serializeParameters=Ia.serializeToken=Ia.serializeByteSequence=Ia.serializeBoolean=Ia.serializeString=Ia.serializeDecimal=Ia.serializeInteger=Ia.serializeBareItem=Ia.serializeInnerList=Ia.serializeItem=Ia.serializeDictionary=Ia.serializeList=Ia.SerializeError=void 0;var bRj=pS(),yRj=BS(),gS=QI(),Pg=class extends Error{};Ia.SerializeError=Pg;function $Rj(A){return A.map(j=>(0,gS.isInnerList)(j)?IeA(j):hS(j)).join(", ")}Ia.serializeList=$Rj;function wRj(A){return Array.from(A.entries()).map(([j,e])=>{let t=OeA(j);return e[0]===!0?t+=qS(e[1]):(t+="=",(0,gS.isInnerList)(e)?t+=IeA(e):t+=hS(e)),t}).join(", ")}Ia.serializeDictionary=wRj;function hS(A){return PeA(A[0])+qS(A[1])}Ia.serializeItem=hS;function IeA(A){return`(${A[0].map(j=>hS(j)).join(" ")})${qS(A[1])}`}Ia.serializeInnerList=IeA;function PeA(A){if(typeof A=="number")return Number.isInteger(A)?Q8A(A):Y8A(A);if(typeof A=="string")return Z8A(A);if(A instanceof yRj.Token)return eOA(A);if(A instanceof bRj.ByteSequence)return jOA(A);if(typeof A=="boolean")return AOA(A);throw new Pg(`Cannot serialize values of type ${typeof A}`)}Ia.serializeBareItem=PeA;function Q8A(A){if(A<-999999999999999||A>999999999999999)throw new Pg("Structured headers can only encode integers in the range range of -999,999,999,999,999 to 999,999,999,999,999 inclusive");return A.toString()}Ia.serializeInteger=Q8A;function Y8A(A){let j=A.toFixed(3).replace(/0+$/,"");if(j.split(".")[0].replace("-","").length>12)throw new Pg("Fractional numbers are not allowed to have more than 12 significant digits before the decimal point");return j}Ia.serializeDecimal=Y8A;function Z8A(A){if(!(0,gS.isAscii)(A))throw new Pg("Only ASCII strings may be serialized");return`"${A.replace(/("|\\)/g,j=>"\\"+j)}"`}Ia.serializeString=Z8A;function AOA(A){return A?"?1":"?0"}Ia.serializeBoolean=AOA;function jOA(A){return`:${A.toBase64()}:`}Ia.serializeByteSequence=jOA;function eOA(A){return A.toString()}Ia.serializeToken=eOA;function qS(A){return Array.from(A).map(([j,e])=>{let t=";"+OeA(j);return e!==!0&&(t+="="+PeA(e)),t}).join("")}Ia.serializeParameters=qS;function OeA(A){if(!(0,gS.isValidKeyStr)(A))throw new Pg("Keys in dictionaries must only contain lowercase letter, numbers, _-*. and must start with a letter or *");return A}Ia.serializeKey=OeA});var nOA=RA(Mk=>{"use strict";Object.defineProperty(Mk,"__esModule",{value:!0});Mk.ParseError=Mk.parseItem=Mk.parseList=Mk.parseDictionary=void 0;var IRj=pS(),rOA=BS(),PRj=QI();function ORj(A){return new TF(A).parseDictionary()}Mk.parseDictionary=ORj;function RRj(A){return new TF(A).parseList()}Mk.parseList=RRj;function DRj(A){return new TF(A).parseItem()}Mk.parseItem=DRj;var M6=class extends Error{constructor(j,e){super(`Parse error: ${e} at offset ${j}`)}};Mk.ParseError=M6;var TF=class{constructor(j){this.input=j,this.pos=0}parseDictionary(){this.skipWS();let j=new Map;for(;!this.eof();){let e=this.parseKey(),t;if(this.lookChar()==="="?(this.pos++,t=this.parseItemOrInnerList()):t=[!0,this.parseParameters()],j.set(e,t),this.skipOWS(),this.eof())return j;if(this.expectChar(","),this.pos++,this.skipOWS(),this.eof())throw new M6(this.pos,"Dictionary contained a trailing comma")}return j}parseList(){this.skipWS();let j=[];for(;!this.eof();){if(j.push(this.parseItemOrInnerList()),this.skipOWS(),this.eof())return j;if(this.expectChar(","),this.pos++,this.skipOWS(),this.eof())throw new M6(this.pos,"A list may not end with a trailing comma")}return j}parseItem(j=!0){j&&this.skipWS();let e=[this.parseBareItem(),this.parseParameters()];return j&&this.checkTrail(),e}parseItemOrInnerList(){return this.lookChar()==="("?this.parseInnerList():this.parseItem(!1)}parseInnerList(){this.expectChar("("),this.pos++;let j=[];for(;!this.eof();){if(this.skipWS(),this.lookChar()===")")return this.pos++,[j,this.parseParameters()];j.push(this.parseItem(!1));let e=this.lookChar();if(e!==" "&&e!==")")throw new M6(this.pos,"Expected a whitespace or ) after every item in an inner list")}throw new M6(this.pos,"Could not find end of inner list")}parseBareItem(){let j=this.lookChar();if(j===void 0)throw new M6(this.pos,"Unexpected end of string");if(j.match(/^[-0-9]/))return this.parseIntegerOrDecimal();if(j==='"')return this.parseString();if(j.match(/^[A-Za-z*]/))return this.parseToken();if(j===":")return this.parseByteSequence();if(j==="?")return this.parseBoolean();throw new M6(this.pos,"Unexpected input")}parseParameters(){let j=new Map;for(;!this.eof()&&this.lookChar()===";";){this.pos++,this.skipWS();let t=this.parseKey(),r=!0;this.lookChar()==="="&&(this.pos++,r=this.parseBareItem()),j.set(t,r)}return j}parseIntegerOrDecimal(){let j="integer",e=1,t="";if(this.lookChar()==="-"&&(e=-1,this.pos++),!aOA(this.lookChar()))throw new M6(this.pos,"Expected a digit (0-9)");for(;!this.eof();){let r=this.getChar();if(aOA(r))t+=r;else if(j==="integer"&&r==="."){if(t.length>12)throw new M6(this.pos,"Exceeded maximum decimal length");t+=".",j="decimal"}else{this.pos--;break}if(j==="integer"&&t.length>15)throw new M6(this.pos,"Exceeded maximum integer length");if(j==="decimal"&&t.length>16)throw new M6(this.pos,"Exceeded maximum decimal length")}if(j==="integer")return parseInt(t,10)*e;if(t.endsWith("."))throw new M6(this.pos,"Decimal cannot end on a period");if(t.split(".")[1].length>3)throw new M6(this.pos,"Number of digits after the decimal point cannot exceed 3");return parseFloat(t)*e}parseString(){let j="";for(this.expectChar('"'),this.pos++;!this.eof();){let e=this.getChar();if(e==="\\"){if(this.eof())throw new M6(this.pos,"Unexpected end of input");let t=this.getChar();if(t!=="\\"&&t!=='"')throw new M6(this.pos,"A backslash must be followed by another backslash or double quote");j+=t}else{if(e==='"')return j;if((0,PRj.isAscii)(e))j+=e;else throw new M6(this.pos,"Strings must be in the ASCII range")}}throw new M6(this.pos,"Unexpected end of input")}parseToken(){let j="";for(;!this.eof();){let e=this.lookChar();if(e===void 0||!/^[:/!#$%&'*+\-.^_`|~A-Za-z0-9]$/.test(e))return new rOA.Token(j);j+=this.getChar()}return new rOA.Token(j)}parseByteSequence(){this.expectChar(":"),this.pos++;let j=this.input.indexOf(":",this.pos);if(j===-1)throw new M6(this.pos,'Could not find a closing ":" character to mark end of Byte Sequence');let e=this.input.substring(this.pos,j);if(this.pos+=e.length+1,!/^[A-Za-z0-9+/=]*$/.test(e))throw new M6(this.pos,"ByteSequence does not contain a valid base64 string");return new IRj.ByteSequence(e)}parseBoolean(){this.expectChar("?"),this.pos++;let j=this.getChar();if(j==="1")return!0;if(j==="0")return!1;throw new M6(this.pos,'Unexpected character. Expected a "1" or a "0"')}parseKey(){var j;if(!(!((j=this.lookChar())===null||j===void 0)&&j.match(/^[a-z*]/)))throw new M6(this.pos,"A key must begin with an asterisk or letter (a-z)");let e="";for(;!this.eof();){let t=this.lookChar();if(t===void 0||!/^[a-z0-9_\-.*]$/.test(t))return e;e+=this.getChar()}return e}lookChar(){return this.input[this.pos]}expectChar(j){if(this.lookChar()!==j)throw new M6(this.pos,`Expected ${j}`)}getChar(){return this.input[this.pos++]}eof(){return this.pos>=this.input.length}skipOWS(){for(;;){let j=this.input.substr(this.pos,1);if(j===" "||j==="	")this.pos++;else break}}skipWS(){for(;this.lookChar()===" ";)this.pos++}checkTrail(){if(this.skipWS(),!this.eof())throw new M6(this.pos,"Unexpected characters at end of input")}};Mk.default=TF;var TRj=/^[0-9]$/;function aOA(A){return A===void 0?!1:TRj.test(A)}});var oOA=RA(xd=>{"use strict";var CRj=xd&&xd.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),xS=xd&&xd.__exportStar||function(A,j){for(var e in A)e!=="default"&&!Object.prototype.hasOwnProperty.call(j,e)&&CRj(j,A,e)};Object.defineProperty(xd,"__esModule",{value:!0});xd.Token=void 0;xS(tOA(),xd);xS(nOA(),xd);xS(pS(),xd);xS(QI(),xd);var _Rj=BS();Object.defineProperty(xd,"Token",{enumerable:!0,get:function(){return _Rj.Token}})});var $OA=RA((Lat,vDj)=>{vDj.exports="/assets/wasm/b5_trustlog_bg-JCDBQOQY.wasm"});var xrA=RA((hrA,qrA)=>{(function(A,j){typeof define=="function"&&define.amd?define([],j):typeof qrA=="object"&&typeof hrA<"u"?qrA.exports=j():A.Papa=j()})(hrA,function A(){"use strict";var j=typeof self<"u"?self:typeof window<"u"?window:j!==void 0?j:{},e=!j.document&&!!j.postMessage,t=j.IS_PAPA_WORKER||!1,r={},a=0,n={parse:function(y,h){var O=(h=h||{}).dynamicTyping||!1;if(D(O)&&(h.dynamicTypingFunction=O,O={}),h.dynamicTyping=O,h.transform=!!D(h.transform)&&h.transform,h.worker&&n.WORKERS_SUPPORTED){var Q=function(){if(!n.WORKERS_SUPPORTED)return!1;var nA=(XA=j.URL||j.webkitURL||null,dj=A.toString(),n.BLOB_URL||(n.BLOB_URL=XA.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",dj,")();"],{type:"text/javascript"})))),bA=new j.Worker(nA),XA,dj;return bA.onmessage=S,bA.id=a++,r[bA.id]=bA}();return Q.userStep=h.step,Q.userChunk=h.chunk,Q.userComplete=h.complete,Q.userError=h.error,h.step=D(h.step),h.chunk=D(h.chunk),h.complete=D(h.complete),h.error=D(h.error),delete h.worker,void Q.postMessage({input:y,config:h,workerId:Q.id})}var AA=null;return n.NODE_STREAM_INPUT,typeof y=="string"?(y=function(nA){return nA.charCodeAt(0)===65279?nA.slice(1):nA}(y),AA=h.download?new s(h):new c(h)):y.readable===!0&&D(y.read)&&D(y.on)?AA=new k(h):(j.File&&y instanceof File||y instanceof Object)&&(AA=new l(h)),AA.stream(y)},unparse:function(y,h){var O=!1,Q=!0,AA=",",nA=`\r
`,bA='"',XA=bA+bA,dj=!1,yA=null,tj=!1;(function(){if(typeof h=="object"){if(typeof h.delimiter!="string"||n.BAD_DELIMITERS.filter(function(Ej){return h.delimiter.indexOf(Ej)!==-1}).length||(AA=h.delimiter),(typeof h.quotes=="boolean"||typeof h.quotes=="function"||Array.isArray(h.quotes))&&(O=h.quotes),typeof h.skipEmptyLines!="boolean"&&typeof h.skipEmptyLines!="string"||(dj=h.skipEmptyLines),typeof h.newline=="string"&&(nA=h.newline),typeof h.quoteChar=="string"&&(bA=h.quoteChar),typeof h.header=="boolean"&&(Q=h.header),Array.isArray(h.columns)){if(h.columns.length===0)throw new Error("Option columns is empty");yA=h.columns}h.escapeChar!==void 0&&(XA=h.escapeChar+bA),(typeof h.escapeFormulae=="boolean"||h.escapeFormulae instanceof RegExp)&&(tj=h.escapeFormulae instanceof RegExp?h.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var LA=new RegExp(m(bA),"g");if(typeof y=="string"&&(y=JSON.parse(y)),Array.isArray(y)){if(!y.length||Array.isArray(y[0]))return Qj(null,y,dj);if(typeof y[0]=="object")return Qj(yA||Object.keys(y[0]),y,dj)}else if(typeof y=="object")return typeof y.data=="string"&&(y.data=JSON.parse(y.data)),Array.isArray(y.data)&&(y.fields||(y.fields=y.meta&&y.meta.fields||yA),y.fields||(y.fields=Array.isArray(y.data[0])?y.fields:typeof y.data[0]=="object"?Object.keys(y.data[0]):[]),Array.isArray(y.data[0])||typeof y.data[0]=="object"||(y.data=[y.data])),Qj(y.fields||[],y.data||[],dj);throw new Error("Unable to serialize unrecognized input");function Qj(Ej,Yj,Tj){var mj="";typeof Ej=="string"&&(Ej=JSON.parse(Ej)),typeof Yj=="string"&&(Yj=JSON.parse(Yj));var qj=Array.isArray(Ej)&&0<Ej.length,_e=!Array.isArray(Yj[0]);if(qj&&Q){for(var Tt=0;Tt<Ej.length;Tt++)0<Tt&&(mj+=AA),mj+=Oj(Ej[Tt],Tt);0<Yj.length&&(mj+=nA)}for(var Cj=0;Cj<Yj.length;Cj++){var xt=qj?Ej.length:Yj[Cj].length,At=!1,Ce=qj?Object.keys(Yj[Cj]).length===0:Yj[Cj].length===0;if(Tj&&!qj&&(At=Tj==="greedy"?Yj[Cj].join("").trim()==="":Yj[Cj].length===1&&Yj[Cj][0].length===0),Tj==="greedy"&&qj){for(var fe=[],ir=0;ir<xt;ir++){var Ar=_e?Ej[ir]:ir;fe.push(Yj[Cj][Ar])}At=fe.join("").trim()===""}if(!At){for(var Pt=0;Pt<xt;Pt++){0<Pt&&!Ce&&(mj+=AA);var Jr=qj&&_e?Ej[Pt]:Pt;mj+=Oj(Yj[Cj][Jr],Pt)}Cj<Yj.length-1&&(!Tj||0<xt&&!Ce)&&(mj+=nA)}}return mj}function Oj(Ej,Yj){if(Ej==null)return"";if(Ej.constructor===Date)return JSON.stringify(Ej).slice(1,25);var Tj=!1;tj&&typeof Ej=="string"&&tj.test(Ej)&&(Ej="'"+Ej,Tj=!0);var mj=Ej.toString().replace(LA,XA);return(Tj=Tj||O===!0||typeof O=="function"&&O(Ej,Yj)||Array.isArray(O)&&O[Yj]||function(qj,_e){for(var Tt=0;Tt<_e.length;Tt++)if(-1<qj.indexOf(_e[Tt]))return!0;return!1}(mj,n.BAD_DELIMITERS)||-1<mj.indexOf(AA)||mj.charAt(0)===" "||mj.charAt(mj.length-1)===" ")?bA+mj+bA:mj}}};if(n.RECORD_SEP="",n.UNIT_SEP="",n.BYTE_ORDER_MARK="\uFEFF",n.BAD_DELIMITERS=["\r",`
`,'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!e&&!!j.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=F,n.ParserHandle=u,n.NetworkStreamer=s,n.FileStreamer=l,n.StringStreamer=c,n.ReadableStreamStreamer=k,j.jQuery){var o=j.jQuery;o.fn.parse=function(y){var h=y.config||{},O=[];return this.each(function(nA){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&j.FileReader)||!this.files||this.files.length===0)return!0;for(var bA=0;bA<this.files.length;bA++)O.push({file:this.files[bA],inputElem:this,instanceConfig:o.extend({},h)})}),Q(),this;function Q(){if(O.length!==0){var nA,bA,XA,dj,yA=O[0];if(D(y.before)){var tj=y.before(yA.file,yA.inputElem);if(typeof tj=="object"){if(tj.action==="abort")return nA="AbortError",bA=yA.file,XA=yA.inputElem,dj=tj.reason,void(D(y.error)&&y.error({name:nA},bA,XA,dj));if(tj.action==="skip")return void AA();typeof tj.config=="object"&&(yA.instanceConfig=o.extend(yA.instanceConfig,tj.config))}else if(tj==="skip")return void AA()}var LA=yA.instanceConfig.complete;yA.instanceConfig.complete=function(Qj){D(LA)&&LA(Qj,yA.file,yA.inputElem),AA()},n.parse(yA.file,yA.instanceConfig)}else D(y.complete)&&y.complete()}function AA(){O.splice(0,1),Q()}}}function i(y){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(h){var O=R(h);O.chunkSize=parseInt(O.chunkSize),h.step||h.chunk||(O.chunkSize=null),this._handle=new u(O),(this._handle.streamer=this)._config=O}.call(this,y),this.parseChunk=function(h,O){if(this.isFirstChunk&&D(this._config.beforeFirstChunk)){var Q=this._config.beforeFirstChunk(h);Q!==void 0&&(h=Q)}this.isFirstChunk=!1,this._halted=!1;var AA=this._partialLine+h;this._partialLine="";var nA=this._handle.parse(AA,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var bA=nA.meta.cursor;this._finished||(this._partialLine=AA.substring(bA-this._baseIndex),this._baseIndex=bA),nA&&nA.data&&(this._rowCount+=nA.data.length);var XA=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(t)j.postMessage({results:nA,workerId:n.WORKER_ID,finished:XA});else if(D(this._config.chunk)&&!O){if(this._config.chunk(nA,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);nA=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(nA.data),this._completeResults.errors=this._completeResults.errors.concat(nA.errors),this._completeResults.meta=nA.meta),this._completed||!XA||!D(this._config.complete)||nA&&nA.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),XA||nA&&nA.meta.paused||this._nextChunk(),nA}this._halted=!0},this._sendError=function(h){D(this._config.error)?this._config.error(h):t&&this._config.error&&j.postMessage({workerId:n.WORKER_ID,error:h,finished:!1})}}function s(y){var h;(y=y||{}).chunkSize||(y.chunkSize=n.RemoteChunkSize),i.call(this,y),this._nextChunk=e?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),e||(h.onload=P(this._chunkLoaded,this),h.onerror=P(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!e),this._config.downloadRequestHeaders){var O=this._config.downloadRequestHeaders;for(var Q in O)h.setRequestHeader(Q,O[Q])}if(this._config.chunkSize){var AA=this._start+this._config.chunkSize-1;h.setRequestHeader("Range","bytes="+this._start+"-"+AA)}try{h.send(this._config.downloadRequestBody)}catch(nA){this._chunkError(nA.message)}e&&h.status===0&&this._chunkError()}},this._chunkLoaded=function(){h.readyState===4&&(h.status<200||400<=h.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:h.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(O){var Q=O.getResponseHeader("Content-Range");return Q===null?-1:parseInt(Q.substring(Q.lastIndexOf("/")+1))}(h),this.parseChunk(h.responseText)))},this._chunkError=function(O){var Q=h.statusText||O;this._sendError(new Error(Q))}}function l(y){var h,O;(y=y||{}).chunkSize||(y.chunkSize=n.LocalChunkSize),i.call(this,y);var Q=typeof FileReader<"u";this.stream=function(AA){this._input=AA,O=AA.slice||AA.webkitSlice||AA.mozSlice,Q?((h=new FileReader).onload=P(this._chunkLoaded,this),h.onerror=P(this._chunkError,this)):h=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var AA=this._input;if(this._config.chunkSize){var nA=Math.min(this._start+this._config.chunkSize,this._input.size);AA=O.call(AA,this._start,nA)}var bA=h.readAsText(AA,this._config.encoding);Q||this._chunkLoaded({target:{result:bA}})},this._chunkLoaded=function(AA){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(AA.target.result)},this._chunkError=function(){this._sendError(h.error)}}function c(y){var h;i.call(this,y=y||{}),this.stream=function(O){return h=O,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var O,Q=this._config.chunkSize;return Q?(O=h.substring(0,Q),h=h.substring(Q)):(O=h,h=""),this._finished=!h,this.parseChunk(O)}}}function k(y){i.call(this,y=y||{});var h=[],O=!0,Q=!1;this.pause=function(){i.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){i.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(AA){this._input=AA,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Q&&h.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),h.length?this.parseChunk(h.shift()):O=!0},this._streamData=P(function(AA){try{h.push(typeof AA=="string"?AA:AA.toString(this._config.encoding)),O&&(O=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(nA){this._streamError(nA)}},this),this._streamError=P(function(AA){this._streamCleanUp(),this._sendError(AA)},this),this._streamEnd=P(function(){this._streamCleanUp(),Q=!0,this._streamData("")},this),this._streamCleanUp=P(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function u(y){var h,O,Q,AA=Math.pow(2,53),nA=-AA,bA=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,XA=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,dj=this,yA=0,tj=0,LA=!1,Qj=!1,Oj=[],Ej={data:[],errors:[],meta:{}};if(D(y.step)){var Yj=y.step;y.step=function(Cj){if(Ej=Cj,qj())mj();else{if(mj(),Ej.data.length===0)return;yA+=Cj.data.length,y.preview&&yA>y.preview?O.abort():(Ej.data=Ej.data[0],Yj(Ej,dj))}}}function Tj(Cj){return y.skipEmptyLines==="greedy"?Cj.join("").trim()==="":Cj.length===1&&Cj[0].length===0}function mj(){return Ej&&Q&&(Tt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),Q=!1),y.skipEmptyLines&&(Ej.data=Ej.data.filter(function(Cj){return!Tj(Cj)})),qj()&&function(){if(!Ej)return;function Cj(At,Ce){D(y.transformHeader)&&(At=y.transformHeader(At,Ce)),Oj.push(At)}if(Array.isArray(Ej.data[0])){for(var xt=0;qj()&&xt<Ej.data.length;xt++)Ej.data[xt].forEach(Cj);Ej.data.splice(0,1)}else Ej.data.forEach(Cj)}(),function(){if(!Ej||!y.header&&!y.dynamicTyping&&!y.transform)return Ej;function Cj(At,Ce){var fe,ir=y.header?{}:[];for(fe=0;fe<At.length;fe++){var Ar=fe,Pt=At[fe];y.header&&(Ar=fe>=Oj.length?"__parsed_extra":Oj[fe]),y.transform&&(Pt=y.transform(Pt,Ar)),Pt=_e(Ar,Pt),Ar==="__parsed_extra"?(ir[Ar]=ir[Ar]||[],ir[Ar].push(Pt)):ir[Ar]=Pt}return y.header&&(fe>Oj.length?Tt("FieldMismatch","TooManyFields","Too many fields: expected "+Oj.length+" fields but parsed "+fe,tj+Ce):fe<Oj.length&&Tt("FieldMismatch","TooFewFields","Too few fields: expected "+Oj.length+" fields but parsed "+fe,tj+Ce)),ir}var xt=1;return!Ej.data.length||Array.isArray(Ej.data[0])?(Ej.data=Ej.data.map(Cj),xt=Ej.data.length):Ej.data=Cj(Ej.data,0),y.header&&Ej.meta&&(Ej.meta.fields=Oj),tj+=xt,Ej}()}function qj(){return y.header&&Oj.length===0}function _e(Cj,xt){return At=Cj,y.dynamicTypingFunction&&y.dynamicTyping[At]===void 0&&(y.dynamicTyping[At]=y.dynamicTypingFunction(At)),(y.dynamicTyping[At]||y.dynamicTyping)===!0?xt==="true"||xt==="TRUE"||xt!=="false"&&xt!=="FALSE"&&(function(Ce){if(bA.test(Ce)){var fe=parseFloat(Ce);if(nA<fe&&fe<AA)return!0}return!1}(xt)?parseFloat(xt):XA.test(xt)?new Date(xt):xt===""?null:xt):xt;var At}function Tt(Cj,xt,At,Ce){var fe={type:Cj,code:xt,message:At};Ce!==void 0&&(fe.row=Ce),Ej.errors.push(fe)}this.parse=function(Cj,xt,At){var Ce=y.quoteChar||'"';if(y.newline||(y.newline=function(Ar,Pt){Ar=Ar.substring(0,1048576);var Jr=new RegExp(m(Pt)+"([^]*?)"+m(Pt),"gm"),Kr=(Ar=Ar.replace(Jr,"")).split("\r"),_r=Ar.split(`
`),ca=1<_r.length&&_r[0].length<Kr[0].length;if(Kr.length===1||ca)return`
`;for(var ct=0,ut=0;ut<Kr.length;ut++)Kr[ut][0]===`
`&&ct++;return ct>=Kr.length/2?`\r
`:"\r"}(Cj,Ce)),Q=!1,y.delimiter)D(y.delimiter)&&(y.delimiter=y.delimiter(Cj),Ej.meta.delimiter=y.delimiter);else{var fe=function(Ar,Pt,Jr,Kr,_r){var ca,ct,ut,hr;_r=_r||[",","	","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var o6=0;o6<_r.length;o6++){var se=_r[o6],iA=0,hA=0,HA=0;ut=void 0;for(var fj=new F({comments:Kr,delimiter:se,newline:Pt,preview:10}).parse(Ar),xj=0;xj<fj.data.length;xj++)if(Jr&&Tj(fj.data[xj]))HA++;else{var ye=fj.data[xj].length;hA+=ye,ut!==void 0?0<ye&&(iA+=Math.abs(ye-ut),ut=ye):ut=ye}0<fj.data.length&&(hA/=fj.data.length-HA),(ct===void 0||iA<=ct)&&(hr===void 0||hr<hA)&&1.99<hA&&(ct=iA,ca=se,hr=hA)}return{successful:!!(y.delimiter=ca),bestDelimiter:ca}}(Cj,y.newline,y.skipEmptyLines,y.comments,y.delimitersToGuess);fe.successful?y.delimiter=fe.bestDelimiter:(Q=!0,y.delimiter=n.DefaultDelimiter),Ej.meta.delimiter=y.delimiter}var ir=R(y);return y.preview&&y.header&&ir.preview++,h=Cj,O=new F(ir),Ej=O.parse(h,xt,At),mj(),LA?{meta:{paused:!0}}:Ej||{meta:{paused:!1}}},this.paused=function(){return LA},this.pause=function(){LA=!0,O.abort(),h=D(y.chunk)?"":h.substring(O.getCharIndex())},this.resume=function(){dj.streamer._halted?(LA=!1,dj.streamer.parseChunk(h,!0)):setTimeout(dj.resume,3)},this.aborted=function(){return Qj},this.abort=function(){Qj=!0,O.abort(),Ej.meta.aborted=!0,D(y.complete)&&y.complete(Ej),h=""}}function m(y){return y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function F(y){var h,O=(y=y||{}).delimiter,Q=y.newline,AA=y.comments,nA=y.step,bA=y.preview,XA=y.fastMode,dj=h=y.quoteChar===void 0||y.quoteChar===null?'"':y.quoteChar;if(y.escapeChar!==void 0&&(dj=y.escapeChar),(typeof O!="string"||-1<n.BAD_DELIMITERS.indexOf(O))&&(O=","),AA===O)throw new Error("Comment character same as delimiter");AA===!0?AA="#":(typeof AA!="string"||-1<n.BAD_DELIMITERS.indexOf(AA))&&(AA=!1),Q!==`
`&&Q!=="\r"&&Q!==`\r
`&&(Q=`
`);var yA=0,tj=!1;this.parse=function(LA,Qj,Oj){if(typeof LA!="string")throw new Error("Input must be a string");var Ej=LA.length,Yj=O.length,Tj=Q.length,mj=AA.length,qj=D(nA),_e=[],Tt=[],Cj=[],xt=yA=0;if(!LA)return Bj();if(y.header&&!Qj){var At=LA.split(Q)[0].split(O),Ce=[],fe={},ir=!1;for(var Ar in At){var Pt=At[Ar];D(y.transformHeader)&&(Pt=y.transformHeader(Pt,Ar));var Jr=Pt,Kr=fe[Pt]||0;for(0<Kr&&(ir=!0,Jr=Pt+"_"+Kr),fe[Pt]=Kr+1;Ce.includes(Jr);)Jr=Jr+"_"+Kr;Ce.push(Jr)}if(ir){var _r=LA.split(Q);_r[0]=Ce.join(O),LA=_r.join(Q)}}if(XA||XA!==!1&&LA.indexOf(h)===-1){for(var ca=LA.split(Q),ct=0;ct<ca.length;ct++){if(Cj=ca[ct],yA+=Cj.length,ct!==ca.length-1)yA+=Q.length;else if(Oj)return Bj();if(!AA||Cj.substring(0,mj)!==AA){if(qj){if(_e=[],HA(Cj.split(O)),cA(),tj)return Bj()}else HA(Cj.split(O));if(bA&&bA<=ct)return _e=_e.slice(0,bA),Bj(!0)}}return Bj()}for(var ut=LA.indexOf(O,yA),hr=LA.indexOf(Q,yA),o6=new RegExp(m(dj)+m(h),"g"),se=LA.indexOf(h,yA);;)if(LA[yA]!==h)if(AA&&Cj.length===0&&LA.substring(yA,yA+mj)===AA){if(hr===-1)return Bj();yA=hr+Tj,hr=LA.indexOf(Q,yA),ut=LA.indexOf(O,yA)}else if(ut!==-1&&(ut<hr||hr===-1))Cj.push(LA.substring(yA,ut)),yA=ut+Yj,ut=LA.indexOf(O,yA);else{if(hr===-1)break;if(Cj.push(LA.substring(yA,hr)),ye(hr+Tj),qj&&(cA(),tj))return Bj();if(bA&&_e.length>=bA)return Bj(!0)}else for(se=yA,yA++;;){if((se=LA.indexOf(h,se+1))===-1)return Oj||Tt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_e.length,index:yA}),xj();if(se===Ej-1)return xj(LA.substring(yA,se).replace(o6,h));if(h!==dj||LA[se+1]!==dj){if(h===dj||se===0||LA[se-1]!==dj){ut!==-1&&ut<se+1&&(ut=LA.indexOf(O,se+1)),hr!==-1&&hr<se+1&&(hr=LA.indexOf(Q,se+1));var iA=fj(hr===-1?ut:Math.min(ut,hr));if(LA.substr(se+1+iA,Yj)===O){Cj.push(LA.substring(yA,se).replace(o6,h)),LA[yA=se+1+iA+Yj]!==h&&(se=LA.indexOf(h,yA)),ut=LA.indexOf(O,yA),hr=LA.indexOf(Q,yA);break}var hA=fj(hr);if(LA.substring(se+1+hA,se+1+hA+Tj)===Q){if(Cj.push(LA.substring(yA,se).replace(o6,h)),ye(se+1+hA+Tj),ut=LA.indexOf(O,yA),se=LA.indexOf(h,yA),qj&&(cA(),tj))return Bj();if(bA&&_e.length>=bA)return Bj(!0);break}Tt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_e.length,index:yA}),se++}}else se++}return xj();function HA(rA){_e.push(rA),xt=yA}function fj(rA){var wA=0;if(rA!==-1){var Xj=LA.substring(se+1,rA);Xj&&Xj.trim()===""&&(wA=Xj.length)}return wA}function xj(rA){return Oj||(rA===void 0&&(rA=LA.substring(yA)),Cj.push(rA),yA=Ej,HA(Cj),qj&&cA()),Bj()}function ye(rA){yA=rA,HA(Cj),Cj=[],hr=LA.indexOf(Q,yA)}function Bj(rA){return{data:_e,errors:Tt,meta:{delimiter:O,linebreak:Q,aborted:tj,truncated:!!rA,cursor:xt+(Qj||0)}}}function cA(){nA(Bj()),_e=[],Tt=[]}},this.abort=function(){tj=!0},this.getCharIndex=function(){return yA}}function S(y){var h=y.data,O=r[h.workerId],Q=!1;if(h.error)O.userError(h.error,h.file);else if(h.results&&h.results.data){var AA={abort:function(){Q=!0,G(h.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(D(O.userStep)){for(var nA=0;nA<h.results.data.length&&(O.userStep({data:h.results.data[nA],errors:h.results.errors,meta:h.results.meta},AA),!Q);nA++);delete h.results}else D(O.userChunk)&&(O.userChunk(h.results,AA,h.file),delete h.results)}h.finished&&!Q&&G(h.workerId,h.results)}function G(y,h){var O=r[y];D(O.userComplete)&&O.userComplete(h),O.terminate(),delete r[y]}function x(){throw new Error("Not implemented.")}function R(y){if(typeof y!="object"||y===null)return y;var h=Array.isArray(y)?[]:{};for(var O in y)h[O]=R(y[O]);return h}function P(y,h){return function(){y.apply(h,arguments)}}function D(y){return typeof y=="function"}return t&&(j.onmessage=function(y){var h=y.data;if(n.WORKER_ID===void 0&&h&&(n.WORKER_ID=h.workerId),typeof h.input=="string")j.postMessage({workerId:n.WORKER_ID,results:n.parse(h.input,h.config),finished:!0});else if(j.File&&h.input instanceof File||h.input instanceof Object){var O=n.parse(h.input,h.config);O&&j.postMessage({workerId:n.WORKER_ID,results:O,finished:!0})}}),(s.prototype=Object.create(i.prototype)).constructor=s,(l.prototype=Object.create(i.prototype)).constructor=l,(c.prototype=Object.create(c.prototype)).constructor=c,(k.prototype=Object.create(i.prototype)).constructor=k,n})});var jH=RA(nm=>{"use strict";var xDA=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",MKj=xDA+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",vDA="["+xDA+"]["+MKj+"]*",KKj=new RegExp("^"+vDA+"$"),NKj=function(A,j){let e=[],t=j.exec(A);for(;t;){let r=[];r.startIndex=j.lastIndex-t[0].length;let a=t.length;for(let n=0;n<a;n++)r.push(t[n]);e.push(r),t=j.exec(A)}return e},LKj=function(A){let j=KKj.exec(A);return!(j===null||typeof j>"u")};nm.isExist=function(A){return typeof A<"u"};nm.isEmptyObject=function(A){return Object.keys(A).length===0};nm.merge=function(A,j,e){if(j){let t=Object.keys(j),r=t.length;for(let a=0;a<r;a++)e==="strict"?A[t[a]]=[j[t[a]]]:A[t[a]]=j[t[a]]}};nm.getValue=function(A){return nm.isExist(A)?A:""};nm.isName=LKj;nm.getAllMatches=NKj;nm.nameRegexp=vDA});var yrA=RA(yDA=>{"use strict";var brA=jH(),zKj={allowBooleanAttributes:!1,unpairedTags:[]};yDA.validate=function(A,j){j=Object.assign({},zKj,j);let e=[],t=!1,r=!1;A[0]==="\uFEFF"&&(A=A.substr(1));for(let a=0;a<A.length;a++)if(A[a]==="<"&&A[a+1]==="?"){if(a+=2,a=fDA(A,a),a.err)return a}else if(A[a]==="<"){let n=a;if(a++,A[a]==="!"){a=FDA(A,a);continue}else{let o=!1;A[a]==="/"&&(o=!0,a++);let i="";for(;a<A.length&&A[a]!==">"&&A[a]!==" "&&A[a]!=="	"&&A[a]!==`
`&&A[a]!=="\r";a++)i+=A[a];if(i=i.trim(),i[i.length-1]==="/"&&(i=i.substring(0,i.length-1),a--),!ZKj(i)){let c;return i.trim().length===0?c="Invalid space after '<'.":c="Tag '"+i+"' is an invalid name.",ao("InvalidTag",c,Xs(A,a))}let s=XKj(A,a);if(s===!1)return ao("InvalidAttr","Attributes for '"+i+"' have open quote.",Xs(A,a));let l=s.value;if(a=s.index,l[l.length-1]==="/"){let c=a-l.length;l=l.substring(0,l.length-1);let k=bDA(l,j);if(k===!0)t=!0;else return ao(k.err.code,k.err.msg,Xs(A,c+k.err.line))}else if(o)if(s.tagClosed){if(l.trim().length>0)return ao("InvalidTag","Closing tag '"+i+"' can't have attributes or invalid starting.",Xs(A,n));if(e.length===0)return ao("InvalidTag","Closing tag '"+i+"' has not been opened.",Xs(A,n));{let c=e.pop();if(i!==c.tagName){let k=Xs(A,c.tagStartPos);return ao("InvalidTag","Expected closing tag '"+c.tagName+"' (opened in line "+k.line+", col "+k.col+") instead of closing tag '"+i+"'.",Xs(A,n))}e.length==0&&(r=!0)}}else return ao("InvalidTag","Closing tag '"+i+"' doesn't have proper closing.",Xs(A,a));else{let c=bDA(l,j);if(c!==!0)return ao(c.err.code,c.err.msg,Xs(A,a-l.length+c.err.line));if(r===!0)return ao("InvalidXml","Multiple possible root nodes found.",Xs(A,a));j.unpairedTags.indexOf(i)!==-1||e.push({tagName:i,tagStartPos:n}),t=!0}for(a++;a<A.length;a++)if(A[a]==="<")if(A[a+1]==="!"){a++,a=FDA(A,a);continue}else if(A[a+1]==="?"){if(a=fDA(A,++a),a.err)return a}else break;else if(A[a]==="&"){let c=QKj(A,a);if(c==-1)return ao("InvalidChar","char '&' is not expected.",Xs(A,a));a=c}else if(r===!0&&!GDA(A[a]))return ao("InvalidXml","Extra text at the end",Xs(A,a));A[a]==="<"&&a--}}else{if(GDA(A[a]))continue;return ao("InvalidChar","char '"+A[a]+"' is not expected.",Xs(A,a))}if(t){if(e.length==1)return ao("InvalidTag","Unclosed tag '"+e[0].tagName+"'.",Xs(A,e[0].tagStartPos));if(e.length>0)return ao("InvalidXml","Invalid '"+JSON.stringify(e.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return ao("InvalidXml","Start tag expected.",1);return!0};function GDA(A){return A===" "||A==="	"||A===`
`||A==="\r"}function fDA(A,j){let e=j;for(;j<A.length;j++)if(A[j]=="?"||A[j]==" "){let t=A.substr(e,j-e);if(j>5&&t==="xml")return ao("InvalidXml","XML declaration allowed only at the start of the document.",Xs(A,j));if(A[j]=="?"&&A[j+1]==">"){j++;break}else continue}return j}function FDA(A,j){if(A.length>j+5&&A[j+1]==="-"&&A[j+2]==="-"){for(j+=3;j<A.length;j++)if(A[j]==="-"&&A[j+1]==="-"&&A[j+2]===">"){j+=2;break}}else if(A.length>j+8&&A[j+1]==="D"&&A[j+2]==="O"&&A[j+3]==="C"&&A[j+4]==="T"&&A[j+5]==="Y"&&A[j+6]==="P"&&A[j+7]==="E"){let e=1;for(j+=8;j<A.length;j++)if(A[j]==="<")e++;else if(A[j]===">"&&(e--,e===0))break}else if(A.length>j+9&&A[j+1]==="["&&A[j+2]==="C"&&A[j+3]==="D"&&A[j+4]==="A"&&A[j+5]==="T"&&A[j+6]==="A"&&A[j+7]==="["){for(j+=8;j<A.length;j++)if(A[j]==="]"&&A[j+1]==="]"&&A[j+2]===">"){j+=2;break}}return j}var UKj='"',VKj="'";function XKj(A,j){let e="",t="",r=!1;for(;j<A.length;j++){if(A[j]===UKj||A[j]===VKj)t===""?t=A[j]:t!==A[j]||(t="");else if(A[j]===">"&&t===""){r=!0;break}e+=A[j]}return t!==""?!1:{value:e,index:j,tagClosed:r}}var JKj=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function bDA(A,j){let e=brA.getAllMatches(A,JKj),t={};for(let r=0;r<e.length;r++){if(e[r][1].length===0)return ao("InvalidAttr","Attribute '"+e[r][2]+"' has no space in starting.",R1(e[r]));if(e[r][3]!==void 0&&e[r][4]===void 0)return ao("InvalidAttr","Attribute '"+e[r][2]+"' is without value.",R1(e[r]));if(e[r][3]===void 0&&!j.allowBooleanAttributes)return ao("InvalidAttr","boolean attribute '"+e[r][2]+"' is not allowed.",R1(e[r]));let a=e[r][2];if(!YKj(a))return ao("InvalidAttr","Attribute '"+a+"' is an invalid name.",R1(e[r]));if(!t.hasOwnProperty(a))t[a]=1;else return ao("InvalidAttr","Attribute '"+a+"' is repeated.",R1(e[r]))}return!0}function WKj(A,j){let e=/\d/;for(A[j]==="x"&&(j++,e=/[\da-fA-F]/);j<A.length;j++){if(A[j]===";")return j;if(!A[j].match(e))break}return-1}function QKj(A,j){if(j++,A[j]===";")return-1;if(A[j]==="#")return j++,WKj(A,j);let e=0;for(;j<A.length;j++,e++)if(!(A[j].match(/\w/)&&e<20)){if(A[j]===";")break;return-1}return j}function ao(A,j,e){return{err:{code:A,msg:j,line:e.line||e,col:e.col}}}function YKj(A){return brA.isName(A)}function ZKj(A){return brA.isName(A)}function Xs(A,j){let e=A.substring(0,j).split(/\r?\n/);return{line:e.length,col:e[e.length-1].length+1}}function R1(A){return A.startIndex+A[1].length}});var wDA=RA($rA=>{var $DA={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(A,j){return j},attributeValueProcessor:function(A,j){return j},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(A,j,e){return A}},ANj=function(A){return Object.assign({},$DA,A)};$rA.buildOptions=ANj;$rA.defaultOptions=$DA});var PDA=RA((mct,IDA)=>{"use strict";var wrA=class{constructor(j){this.tagname=j,this.child=[],this[":@"]={}}add(j,e){j==="__proto__"&&(j="#__proto__"),this.child.push({[j]:e})}addChild(j){j.tagname==="__proto__"&&(j.tagname="#__proto__"),j[":@"]&&Object.keys(j[":@"]).length>0?this.child.push({[j.tagname]:j.child,":@":j[":@"]}):this.child.push({[j.tagname]:j.child})}};IDA.exports=wrA});var RDA=RA((Bct,ODA)=>{var jNj=jH();function eNj(A,j){let e={};if(A[j+3]==="O"&&A[j+4]==="C"&&A[j+5]==="T"&&A[j+6]==="Y"&&A[j+7]==="P"&&A[j+8]==="E"){j=j+9;let t=1,r=!1,a=!1,n="";for(;j<A.length;j++)if(A[j]==="<"&&!a){if(r&&aNj(A,j))j+=7,[entityName,val,j]=tNj(A,j+1),val.indexOf("&")===-1&&(e[sNj(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(r&&nNj(A,j))j+=8;else if(r&&oNj(A,j))j+=8;else if(r&&iNj(A,j))j+=9;else if(rNj)a=!0;else throw new Error("Invalid DOCTYPE");t++,n=""}else if(A[j]===">"){if(a?A[j-1]==="-"&&A[j-2]==="-"&&(a=!1,t--):t--,t===0)break}else A[j]==="["?r=!0:n+=A[j];if(t!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:e,i:j}}function tNj(A,j){let e="";for(;j<A.length&&A[j]!=="'"&&A[j]!=='"';j++)e+=A[j];if(e=e.trim(),e.indexOf(" ")!==-1)throw new Error("External entites are not supported");let t=A[j++],r="";for(;j<A.length&&A[j]!==t;j++)r+=A[j];return[e,r,j]}function rNj(A,j){return A[j+1]==="!"&&A[j+2]==="-"&&A[j+3]==="-"}function aNj(A,j){return A[j+1]==="!"&&A[j+2]==="E"&&A[j+3]==="N"&&A[j+4]==="T"&&A[j+5]==="I"&&A[j+6]==="T"&&A[j+7]==="Y"}function nNj(A,j){return A[j+1]==="!"&&A[j+2]==="E"&&A[j+3]==="L"&&A[j+4]==="E"&&A[j+5]==="M"&&A[j+6]==="E"&&A[j+7]==="N"&&A[j+8]==="T"}function oNj(A,j){return A[j+1]==="!"&&A[j+2]==="A"&&A[j+3]==="T"&&A[j+4]==="T"&&A[j+5]==="L"&&A[j+6]==="I"&&A[j+7]==="S"&&A[j+8]==="T"}function iNj(A,j){return A[j+1]==="!"&&A[j+2]==="N"&&A[j+3]==="O"&&A[j+4]==="T"&&A[j+5]==="A"&&A[j+6]==="T"&&A[j+7]==="I"&&A[j+8]==="O"&&A[j+9]==="N"}function sNj(A){if(jNj.isName(A))return A;throw new Error(`Invalid entity name ${A}`)}ODA.exports=eNj});var TDA=RA((gct,DDA)=>{var lNj=/^[-+]?0x[a-fA-F0-9]+$/,cNj=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var dNj={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function kNj(A,j={}){if(j=Object.assign({},dNj,j),!A||typeof A!="string")return A;let e=A.trim();if(j.skipLike!==void 0&&j.skipLike.test(e))return A;if(j.hex&&lNj.test(e))return Number.parseInt(e,16);{let t=cNj.exec(e);if(t){let r=t[1],a=t[2],n=uNj(t[3]),o=t[4]||t[6];if(!j.leadingZeros&&a.length>0&&r&&e[2]!==".")return A;if(!j.leadingZeros&&a.length>0&&!r&&e[1]!==".")return A;{let i=Number(e),s=""+i;return s.search(/[eE]/)!==-1||o?j.eNotation?i:A:e.indexOf(".")!==-1?s==="0"&&n===""||s===n||r&&s==="-"+n?i:A:a?n===s||r+n===s?i:A:e===s||e===r+s?i:A}}else return A}}function uNj(A){return A&&A.indexOf(".")!==-1&&(A=A.replace(/0+$/,""),A==="."?A="0":A[0]==="."?A="0"+A:A[A.length-1]==="."&&(A=A.substr(0,A.length-1))),A}DDA.exports=kNj});var IrA=RA((hct,CDA)=>{function ENj(A){return typeof A=="function"?A:Array.isArray(A)?j=>{for(let e of A)if(typeof e=="string"&&j===e||e instanceof RegExp&&e.test(j))return!0}:()=>!1}CDA.exports=ENj});var HDA=RA((qct,SDA)=>{"use strict";var _DA=jH(),D1=PDA(),pNj=RDA(),mNj=TDA(),BNj=IrA(),PrA=class{constructor(j){this.options=j,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCharCode(Number.parseInt(t,16))}},this.addExternalEntities=gNj,this.parseXml=GNj,this.parseTextData=hNj,this.resolveNameSpace=qNj,this.buildAttributesMap=vNj,this.isItStopNode=yNj,this.replaceEntitiesValue=FNj,this.readStopNodeData=wNj,this.saveTextToParentTag=bNj,this.addChild=fNj,this.ignoreAttributesFn=BNj(this.options.ignoreAttributes)}};function gNj(A){let j=Object.keys(A);for(let e=0;e<j.length;e++){let t=j[e];this.lastEntities[t]={regex:new RegExp("&"+t+";","g"),val:A[t]}}}function hNj(A,j,e,t,r,a,n){if(A!==void 0&&(this.options.trimValues&&!t&&(A=A.trim()),A.length>0)){n||(A=this.replaceEntitiesValue(A));let o=this.options.tagValueProcessor(j,A,e,r,a);return o==null?A:typeof o!=typeof A||o!==A?o:this.options.trimValues?RrA(A,this.options.parseTagValue,this.options.numberParseOptions):A.trim()===A?RrA(A,this.options.parseTagValue,this.options.numberParseOptions):A}}function qNj(A){if(this.options.removeNSPrefix){let j=A.split(":"),e=A.charAt(0)==="/"?"/":"";if(j[0]==="xmlns")return"";j.length===2&&(A=e+j[1])}return A}var xNj=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function vNj(A,j,e){if(this.options.ignoreAttributes!==!0&&typeof A=="string"){let t=_DA.getAllMatches(A,xNj),r=t.length,a={};for(let n=0;n<r;n++){let o=this.resolveNameSpace(t[n][1]);if(this.ignoreAttributesFn(o,j))continue;let i=t[n][4],s=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(s=this.options.transformAttributeName(s)),s==="__proto__"&&(s="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let l=this.options.attributeValueProcessor(o,i,j);l==null?a[s]=i:typeof l!=typeof i||l!==i?a[s]=l:a[s]=RrA(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[s]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){let n={};return n[this.options.attributesGroupName]=a,n}return a}}var GNj=function(A){A=A.replace(/\r\n?/g,`
`);let j=new D1("!xml"),e=j,t="",r="";for(let a=0;a<A.length;a++)if(A[a]==="<")if(A[a+1]==="/"){let o=qx(A,">",a,"Closing Tag is not closed."),i=A.substring(a+2,o).trim();if(this.options.removeNSPrefix){let c=i.indexOf(":");c!==-1&&(i=i.substr(c+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),e&&(t=this.saveTextToParentTag(t,e,r));let s=r.substring(r.lastIndexOf(".")+1);if(i&&this.options.unpairedTags.indexOf(i)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${i}>`);let l=0;s&&this.options.unpairedTags.indexOf(s)!==-1?(l=r.lastIndexOf(".",r.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=r.lastIndexOf("."),r=r.substring(0,l),e=this.tagsNodeStack.pop(),t="",a=o}else if(A[a+1]==="?"){let o=OrA(A,a,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(t=this.saveTextToParentTag(t,e,r),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){let i=new D1(o.tagName);i.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(i[":@"]=this.buildAttributesMap(o.tagExp,r,o.tagName)),this.addChild(e,i,r)}a=o.closeIndex+1}else if(A.substr(a+1,3)==="!--"){let o=qx(A,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){let i=A.substring(a+4,o-2);t=this.saveTextToParentTag(t,e,r),e.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}a=o}else if(A.substr(a+1,2)==="!D"){let o=pNj(A,a);this.docTypeEntities=o.entities,a=o.i}else if(A.substr(a+1,2)==="!["){let o=qx(A,"]]>",a,"CDATA is not closed.")-2,i=A.substring(a+9,o);t=this.saveTextToParentTag(t,e,r);let s=this.parseTextData(i,e.tagname,r,!0,!1,!0,!0);s==null&&(s=""),this.options.cdataPropName?e.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]):e.add(this.options.textNodeName,s),a=o+2}else{let o=OrA(A,a,this.options.removeNSPrefix),i=o.tagName,s=o.rawTagName,l=o.tagExp,c=o.attrExpPresent,k=o.closeIndex;this.options.transformTagName&&(i=this.options.transformTagName(i)),e&&t&&e.tagname!=="!xml"&&(t=this.saveTextToParentTag(t,e,r,!1));let u=e;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(e=this.tagsNodeStack.pop(),r=r.substring(0,r.lastIndexOf("."))),i!==j.tagname&&(r+=r?"."+i:i),this.isItStopNode(this.options.stopNodes,r,i)){let m="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)i[i.length-1]==="/"?(i=i.substr(0,i.length-1),r=r.substr(0,r.length-1),l=i):l=l.substr(0,l.length-1),a=o.closeIndex;else if(this.options.unpairedTags.indexOf(i)!==-1)a=o.closeIndex;else{let S=this.readStopNodeData(A,s,k+1);if(!S)throw new Error(`Unexpected end of ${s}`);a=S.i,m=S.tagContent}let F=new D1(i);i!==l&&c&&(F[":@"]=this.buildAttributesMap(l,r,i)),m&&(m=this.parseTextData(m,i,r,!0,c,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),F.add(this.options.textNodeName,m),this.addChild(e,F,r)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){i[i.length-1]==="/"?(i=i.substr(0,i.length-1),r=r.substr(0,r.length-1),l=i):l=l.substr(0,l.length-1),this.options.transformTagName&&(i=this.options.transformTagName(i));let m=new D1(i);i!==l&&c&&(m[":@"]=this.buildAttributesMap(l,r,i)),this.addChild(e,m,r),r=r.substr(0,r.lastIndexOf("."))}else{let m=new D1(i);this.tagsNodeStack.push(e),i!==l&&c&&(m[":@"]=this.buildAttributesMap(l,r,i)),this.addChild(e,m,r),e=m}t="",a=k}}else t+=A[a];return j.child};function fNj(A,j,e){let t=this.options.updateTag(j.tagname,e,j[":@"]);t===!1||(typeof t=="string"&&(j.tagname=t),A.addChild(j))}var FNj=function(A){if(this.options.processEntities){for(let j in this.docTypeEntities){let e=this.docTypeEntities[j];A=A.replace(e.regx,e.val)}for(let j in this.lastEntities){let e=this.lastEntities[j];A=A.replace(e.regex,e.val)}if(this.options.htmlEntities)for(let j in this.htmlEntities){let e=this.htmlEntities[j];A=A.replace(e.regex,e.val)}A=A.replace(this.ampEntity.regex,this.ampEntity.val)}return A};function bNj(A,j,e,t){return A&&(t===void 0&&(t=Object.keys(j.child).length===0),A=this.parseTextData(A,j.tagname,e,!1,j[":@"]?Object.keys(j[":@"]).length!==0:!1,t),A!==void 0&&A!==""&&j.add(this.options.textNodeName,A),A=""),A}function yNj(A,j,e){let t="*."+e;for(let r in A){let a=A[r];if(t===a||j===a)return!0}return!1}function $Nj(A,j,e=">"){let t,r="";for(let a=j;a<A.length;a++){let n=A[a];if(t)n===t&&(t="");else if(n==='"'||n==="'")t=n;else if(n===e[0])if(e[1]){if(A[a+1]===e[1])return{data:r,index:a}}else return{data:r,index:a};else n==="	"&&(n=" ");r+=n}}function qx(A,j,e,t){let r=A.indexOf(j,e);if(r===-1)throw new Error(t);return r+j.length-1}function OrA(A,j,e,t=">"){let r=$Nj(A,j+1,t);if(!r)return;let a=r.data,n=r.index,o=a.search(/\s/),i=a,s=!0;o!==-1&&(i=a.substring(0,o),a=a.substring(o+1).trimStart());let l=i;if(e){let c=i.indexOf(":");c!==-1&&(i=i.substr(c+1),s=i!==r.data.substr(c+1))}return{tagName:i,tagExp:a,closeIndex:n,attrExpPresent:s,rawTagName:l}}function wNj(A,j,e){let t=e,r=1;for(;e<A.length;e++)if(A[e]==="<")if(A[e+1]==="/"){let a=qx(A,">",e,`${j} is not closed`);if(A.substring(e+2,a).trim()===j&&(r--,r===0))return{tagContent:A.substring(t,e),i:a};e=a}else if(A[e+1]==="?")e=qx(A,"?>",e+1,"StopNode is not closed.");else if(A.substr(e+1,3)==="!--")e=qx(A,"-->",e+3,"StopNode is not closed.");else if(A.substr(e+1,2)==="![")e=qx(A,"]]>",e,"StopNode is not closed.")-2;else{let a=OrA(A,e,">");a&&((a&&a.tagName)===j&&a.tagExp[a.tagExp.length-1]!=="/"&&r++,e=a.closeIndex)}}function RrA(A,j,e){if(j&&typeof A=="string"){let t=A.trim();return t==="true"?!0:t==="false"?!1:mNj(A,e)}else return _DA.isExist(A)?A:""}SDA.exports=PrA});var NDA=RA(KDA=>{"use strict";function INj(A,j){return MDA(A,j)}function MDA(A,j,e){let t,r={};for(let a=0;a<A.length;a++){let n=A[a],o=PNj(n),i="";if(e===void 0?i=o:i=e+"."+o,o===j.textNodeName)t===void 0?t=n[o]:t+=""+n[o];else{if(o===void 0)continue;if(n[o]){let s=MDA(n[o],j,i),l=RNj(s,j);n[":@"]?ONj(s,n[":@"],i,j):Object.keys(s).length===1&&s[j.textNodeName]!==void 0&&!j.alwaysCreateTextNode?s=s[j.textNodeName]:Object.keys(s).length===0&&(j.alwaysCreateTextNode?s[j.textNodeName]="":s=""),r[o]!==void 0&&r.hasOwnProperty(o)?(Array.isArray(r[o])||(r[o]=[r[o]]),r[o].push(s)):j.isArray(o,i,l)?r[o]=[s]:r[o]=s}}}return typeof t=="string"?t.length>0&&(r[j.textNodeName]=t):t!==void 0&&(r[j.textNodeName]=t),r}function PNj(A){let j=Object.keys(A);for(let e=0;e<j.length;e++){let t=j[e];if(t!==":@")return t}}function ONj(A,j,e,t){if(j){let r=Object.keys(j),a=r.length;for(let n=0;n<a;n++){let o=r[n];t.isArray(o,e+"."+o,!0,!0)?A[o]=[j[o]]:A[o]=j[o]}}}function RNj(A,j){let{textNodeName:e}=j,t=Object.keys(A).length;return!!(t===0||t===1&&(A[e]||typeof A[e]=="boolean"||A[e]===0))}KDA.prettify=INj});var zDA=RA((vct,LDA)=>{var{buildOptions:DNj}=wDA(),TNj=HDA(),{prettify:CNj}=NDA(),_Nj=yrA(),DrA=class{constructor(j){this.externalEntities={},this.options=DNj(j)}parse(j,e){if(typeof j!="string")if(j.toString)j=j.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(e){e===!0&&(e={});let a=_Nj.validate(j,e);if(a!==!0)throw Error(`${a.err.msg}:${a.err.line}:${a.err.col}`)}let t=new TNj(this.options);t.addExternalEntities(this.externalEntities);let r=t.parseXml(j);return this.options.preserveOrder||r===void 0?r:CNj(r,this.options)}addEntity(j,e){if(e.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(j.indexOf("&")!==-1||j.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(e==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[j]=e}};LDA.exports=DrA});var WDA=RA((Gct,JDA)=>{var SNj=`
`;function HNj(A,j){let e="";return j.format&&j.indentBy.length>0&&(e=SNj),VDA(A,j,"",e)}function VDA(A,j,e,t){let r="",a=!1;for(let n=0;n<A.length;n++){let o=A[n],i=MNj(o);if(i===void 0)continue;let s="";if(e.length===0?s=i:s=`${e}.${i}`,i===j.textNodeName){let m=o[i];KNj(s,j)||(m=j.tagValueProcessor(i,m),m=XDA(m,j)),a&&(r+=t),r+=m,a=!1;continue}else if(i===j.cdataPropName){a&&(r+=t),r+=`<![CDATA[${o[i][0][j.textNodeName]}]]>`,a=!1;continue}else if(i===j.commentPropName){r+=t+`<!--${o[i][0][j.textNodeName]}-->`,a=!0;continue}else if(i[0]==="?"){let m=UDA(o[":@"],j),F=i==="?xml"?"":t,S=o[i][0][j.textNodeName];S=S.length!==0?" "+S:"",r+=F+`<${i}${S}${m}?>`,a=!0;continue}let l=t;l!==""&&(l+=j.indentBy);let c=UDA(o[":@"],j),k=t+`<${i}${c}`,u=VDA(o[i],j,s,l);j.unpairedTags.indexOf(i)!==-1?j.suppressUnpairedNode?r+=k+">":r+=k+"/>":(!u||u.length===0)&&j.suppressEmptyNode?r+=k+"/>":u&&u.endsWith(">")?r+=k+`>${u}${t}</${i}>`:(r+=k+">",u&&t!==""&&(u.includes("/>")||u.includes("</"))?r+=t+j.indentBy+u+t:r+=u,r+=`</${i}>`),a=!0}return r}function MNj(A){let j=Object.keys(A);for(let e=0;e<j.length;e++){let t=j[e];if(A.hasOwnProperty(t)&&t!==":@")return t}}function UDA(A,j){let e="";if(A&&!j.ignoreAttributes)for(let t in A){if(!A.hasOwnProperty(t))continue;let r=j.attributeValueProcessor(t,A[t]);r=XDA(r,j),r===!0&&j.suppressBooleanAttributes?e+=` ${t.substr(j.attributeNamePrefix.length)}`:e+=` ${t.substr(j.attributeNamePrefix.length)}="${r}"`}return e}function KNj(A,j){A=A.substr(0,A.length-j.textNodeName.length-1);let e=A.substr(A.lastIndexOf(".")+1);for(let t in j.stopNodes)if(j.stopNodes[t]===A||j.stopNodes[t]==="*."+e)return!0;return!1}function XDA(A,j){if(A&&A.length>0&&j.processEntities)for(let e=0;e<j.entities.length;e++){let t=j.entities[e];A=A.replace(t.regex,t.val)}return A}JDA.exports=HNj});var YDA=RA((fct,QDA)=>{"use strict";var NNj=WDA(),LNj=IrA(),zNj={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(A,j){return j},attributeValueProcessor:function(A,j){return j},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function _g(A){this.options=Object.assign({},zNj,A),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=LNj(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=XNj),this.processTextOrObjNode=UNj,this.options.format?(this.indentate=VNj,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}_g.prototype.build=function(A){return this.options.preserveOrder?NNj(A,this.options):(Array.isArray(A)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(A={[this.options.arrayNodeName]:A}),this.j2x(A,0,[]).val)};_g.prototype.j2x=function(A,j,e){let t="",r="",a=e.join(".");for(let n in A)if(Object.prototype.hasOwnProperty.call(A,n))if(typeof A[n]>"u")this.isAttribute(n)&&(r+="");else if(A[n]===null)this.isAttribute(n)?r+="":n[0]==="?"?r+=this.indentate(j)+"<"+n+"?"+this.tagEndChar:r+=this.indentate(j)+"<"+n+"/"+this.tagEndChar;else if(A[n]instanceof Date)r+=this.buildTextValNode(A[n],n,"",j);else if(typeof A[n]!="object"){let o=this.isAttribute(n);if(o&&!this.ignoreAttributesFn(o,a))t+=this.buildAttrPairStr(o,""+A[n]);else if(!o)if(n===this.options.textNodeName){let i=this.options.tagValueProcessor(n,""+A[n]);r+=this.replaceEntitiesValue(i)}else r+=this.buildTextValNode(A[n],n,"",j)}else if(Array.isArray(A[n])){let o=A[n].length,i="",s="";for(let l=0;l<o;l++){let c=A[n][l];if(!(typeof c>"u"))if(c===null)n[0]==="?"?r+=this.indentate(j)+"<"+n+"?"+this.tagEndChar:r+=this.indentate(j)+"<"+n+"/"+this.tagEndChar;else if(typeof c=="object")if(this.options.oneListGroup){let k=this.j2x(c,j+1,e.concat(n));i+=k.val,this.options.attributesGroupName&&c.hasOwnProperty(this.options.attributesGroupName)&&(s+=k.attrStr)}else i+=this.processTextOrObjNode(c,n,j,e);else if(this.options.oneListGroup){let k=this.options.tagValueProcessor(n,c);k=this.replaceEntitiesValue(k),i+=k}else i+=this.buildTextValNode(c,n,"",j)}this.options.oneListGroup&&(i=this.buildObjectNode(i,n,s,j)),r+=i}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){let o=Object.keys(A[n]),i=o.length;for(let s=0;s<i;s++)t+=this.buildAttrPairStr(o[s],""+A[n][o[s]])}else r+=this.processTextOrObjNode(A[n],n,j,e);return{attrStr:t,val:r}};_g.prototype.buildAttrPairStr=function(A,j){return j=this.options.attributeValueProcessor(A,""+j),j=this.replaceEntitiesValue(j),this.options.suppressBooleanAttributes&&j==="true"?" "+A:" "+A+'="'+j+'"'};function UNj(A,j,e,t){let r=this.j2x(A,e+1,t.concat(j));return A[this.options.textNodeName]!==void 0&&Object.keys(A).length===1?this.buildTextValNode(A[this.options.textNodeName],j,r.attrStr,e):this.buildObjectNode(r.val,j,r.attrStr,e)}_g.prototype.buildObjectNode=function(A,j,e,t){if(A==="")return j[0]==="?"?this.indentate(t)+"<"+j+e+"?"+this.tagEndChar:this.indentate(t)+"<"+j+e+this.closeTag(j)+this.tagEndChar;{let r="</"+j+this.tagEndChar,a="";return j[0]==="?"&&(a="?",r=""),(e||e==="")&&A.indexOf("<")===-1?this.indentate(t)+"<"+j+e+a+">"+A+r:this.options.commentPropName!==!1&&j===this.options.commentPropName&&a.length===0?this.indentate(t)+`<!--${A}-->`+this.newLine:this.indentate(t)+"<"+j+e+a+this.tagEndChar+A+this.indentate(t)+r}};_g.prototype.closeTag=function(A){let j="";return this.options.unpairedTags.indexOf(A)!==-1?this.options.suppressUnpairedNode||(j="/"):this.options.suppressEmptyNode?j="/":j=`></${A}`,j};_g.prototype.buildTextValNode=function(A,j,e,t){if(this.options.cdataPropName!==!1&&j===this.options.cdataPropName)return this.indentate(t)+`<![CDATA[${A}]]>`+this.newLine;if(this.options.commentPropName!==!1&&j===this.options.commentPropName)return this.indentate(t)+`<!--${A}-->`+this.newLine;if(j[0]==="?")return this.indentate(t)+"<"+j+e+"?"+this.tagEndChar;{let r=this.options.tagValueProcessor(j,A);return r=this.replaceEntitiesValue(r),r===""?this.indentate(t)+"<"+j+e+this.closeTag(j)+this.tagEndChar:this.indentate(t)+"<"+j+e+">"+r+"</"+j+this.tagEndChar}};_g.prototype.replaceEntitiesValue=function(A){if(A&&A.length>0&&this.options.processEntities)for(let j=0;j<this.options.entities.length;j++){let e=this.options.entities[j];A=A.replace(e.regex,e.val)}return A};function VNj(A){return this.options.indentBy.repeat(A)}function XNj(A){return A.startsWith(this.options.attributeNamePrefix)&&A!==this.options.textNodeName?A.substr(this.attrPrefixLen):!1}QDA.exports=_g});var TrA=RA((Fct,ZDA)=>{"use strict";var JNj=yrA(),WNj=zDA(),QNj=YDA();ZDA.exports={XMLParser:WNj,XMLValidator:JNj,XMLBuilder:QNj}});var cTA=RA((N1,dH)=>{(function(A,j){"use strict";var e="1.0.37",t="",r="?",a="function",n="undefined",o="object",i="string",s="major",l="model",c="name",k="type",u="vendor",m="version",F="architecture",S="console",G="mobile",x="tablet",R="smarttv",P="wearable",D="embedded",y=500,h="Amazon",O="Apple",Q="ASUS",AA="BlackBerry",nA="Browser",bA="Chrome",XA="Edge",dj="Firefox",yA="Google",tj="Huawei",LA="LG",Qj="Microsoft",Oj="Motorola",Ej="Opera",Yj="Samsung",Tj="Sharp",mj="Sony",qj="Xiaomi",_e="Zebra",Tt="Facebook",Cj="Chromium OS",xt="Mac OS",At=function(se,iA){var hA={};for(var HA in se)iA[HA]&&iA[HA].length%2===0?hA[HA]=iA[HA].concat(se[HA]):hA[HA]=se[HA];return hA},Ce=function(se){for(var iA={},hA=0;hA<se.length;hA++)iA[se[hA].toUpperCase()]=se[hA];return iA},fe=function(se,iA){return typeof se===i?ir(iA).indexOf(ir(se))!==-1:!1},ir=function(se){return se.toLowerCase()},Ar=function(se){return typeof se===i?se.replace(/[^\d\.]/g,t).split(".")[0]:j},Pt=function(se,iA){if(typeof se===i)return se=se.replace(/^\s\s*/,t),typeof iA===n?se:se.substring(0,y)},Jr=function(se,iA){for(var hA=0,HA,fj,xj,ye,Bj,cA;hA<iA.length&&!Bj;){var rA=iA[hA],wA=iA[hA+1];for(HA=fj=0;HA<rA.length&&!Bj&&rA[HA];)if(Bj=rA[HA++].exec(se),Bj)for(xj=0;xj<wA.length;xj++)cA=Bj[++fj],ye=wA[xj],typeof ye===o&&ye.length>0?ye.length===2?typeof ye[1]==a?this[ye[0]]=ye[1].call(this,cA):this[ye[0]]=ye[1]:ye.length===3?typeof ye[1]===a&&!(ye[1].exec&&ye[1].test)?this[ye[0]]=cA?ye[1].call(this,cA,ye[2]):j:this[ye[0]]=cA?cA.replace(ye[1],ye[2]):j:ye.length===4&&(this[ye[0]]=cA?ye[3].call(this,cA.replace(ye[1],ye[2])):j):this[ye]=cA||j;hA+=2}},Kr=function(se,iA){for(var hA in iA)if(typeof iA[hA]===o&&iA[hA].length>0){for(var HA=0;HA<iA[hA].length;HA++)if(fe(iA[hA][HA],se))return hA===r?j:hA}else if(fe(iA[hA],se))return hA===r?j:hA;return se},_r={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ca={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ct={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,m],[/opios[\/ ]+([\w\.]+)/i],[m,[c,Ej+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[c,Ej]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[c,"UC"+nA]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[c,"Smart Lenovo "+nA]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+nA],m],[/\bfocus\/([\w\.]+)/i],[m,[c,dj+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[c,Ej+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[c,Ej+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[c,"MIUI "+nA]],[/fxios\/([-\w\.]+)/i],[m,[c,dj]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+nA]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+nA],m],[/samsungbrowser\/([\w\.]+)/i],[m,[c,Yj+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],m],[/metasr[\/ ]?([\d\.]+)/i],[m,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,m],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,Tt],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[c,bA+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,bA+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[c,"Android "+nA]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[m,Kr,_r]],[/(webkit|khtml)\/([\w\.]+)/i],[c,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[c,dj+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,m],[/(cobalt)\/([\w\.]+)/i],[c,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[F,"amd64"]],[/(ia32(?=;))/i],[[F,ir]],[/((?:i[346]|x)86)[;\)]/i],[[F,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[F,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[F,"armhf"]],[/windows (ce|mobile); ppc;/i],[[F,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[F,/ower/,t,ir]],[/(sun4\w)[;\)]/i],[[F,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[F,ir]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[u,Yj],[k,x]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[u,Yj],[k,G]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[u,O],[k,G]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[u,O],[k,x]],[/(macintosh);/i],[l,[u,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[u,Tj],[k,G]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[u,tj],[k,x]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[u,tj],[k,G]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[u,qj],[k,G]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[u,qj],[k,x]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[u,"OPPO"],[k,G]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[u,"Vivo"],[k,G]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[u,"Realme"],[k,G]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[u,Oj],[k,G]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[u,Oj],[k,x]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[u,LA],[k,x]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[u,LA],[k,G]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[u,"Lenovo"],[k,x]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[u,"Nokia"],[k,G]],[/(pixel c)\b/i],[l,[u,yA],[k,x]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[u,yA],[k,G]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[u,mj],[k,G]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[u,mj],[k,x]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[u,"OnePlus"],[k,G]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[u,h],[k,x]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[u,h],[k,G]],[/(playbook);[-\w\),; ]+(rim)/i],[l,u,[k,x]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[u,AA],[k,G]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[u,Q],[k,x]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[u,Q],[k,G]],[/(nexus 9)/i],[l,[u,"HTC"],[k,x]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[l,/_/g," "],[k,G]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[u,"Acer"],[k,x]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[u,"Meizu"],[k,G]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[u,"Ulefone"],[k,G]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,l,[k,G]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,l,[k,x]],[/(surface duo)/i],[l,[u,Qj],[k,x]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[u,"Fairphone"],[k,G]],[/(u304aa)/i],[l,[u,"AT&T"],[k,G]],[/\bsie-(\w*)/i],[l,[u,"Siemens"],[k,G]],[/\b(rct\w+) b/i],[l,[u,"RCA"],[k,x]],[/\b(venue[\d ]{2,7}) b/i],[l,[u,"Dell"],[k,x]],[/\b(q(?:mv|ta)\w+) b/i],[l,[u,"Verizon"],[k,x]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[u,"Barnes & Noble"],[k,x]],[/\b(tm\d{3}\w+) b/i],[l,[u,"NuVision"],[k,x]],[/\b(k88) b/i],[l,[u,"ZTE"],[k,x]],[/\b(nx\d{3}j) b/i],[l,[u,"ZTE"],[k,G]],[/\b(gen\d{3}) b.+49h/i],[l,[u,"Swiss"],[k,G]],[/\b(zur\d{3}) b/i],[l,[u,"Swiss"],[k,x]],[/\b((zeki)?tb.*\b) b/i],[l,[u,"Zeki"],[k,x]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],l,[k,x]],[/\b(ns-?\w{0,9}) b/i],[l,[u,"Insignia"],[k,x]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[u,"NextBook"],[k,x]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],l,[k,G]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],l,[k,G]],[/\b(ph-1) /i],[l,[u,"Essential"],[k,G]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[u,"Envizen"],[k,x]],[/\b(trio[-\w\. ]+) b/i],[l,[u,"MachSpeed"],[k,x]],[/\btu_(1491) b/i],[l,[u,"Rotor"],[k,x]],[/(shield[\w ]+) b/i],[l,[u,"Nvidia"],[k,x]],[/(sprint) (\w+)/i],[u,l,[k,G]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[u,Qj],[k,G]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[u,_e],[k,x]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[u,_e],[k,G]],[/smart-tv.+(samsung)/i],[u,[k,R]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[u,Yj],[k,R]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,LA],[k,R]],[/(apple) ?tv/i],[u,[l,O+" TV"],[k,R]],[/crkey/i],[[l,bA+"cast"],[u,yA],[k,R]],[/droid.+aft(\w+)( bui|\))/i],[l,[u,h],[k,R]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[u,Tj],[k,R]],[/(bravia[\w ]+)( bui|\))/i],[l,[u,mj],[k,R]],[/(mitv-\w{5}) bui/i],[l,[u,qj],[k,R]],[/Hbbtv.*(technisat) (.*);/i],[u,l,[k,R]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,Pt],[l,Pt],[k,R]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[k,R]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,l,[k,S]],[/droid.+; (shield) bui/i],[l,[u,"Nvidia"],[k,S]],[/(playstation [345portablevi]+)/i],[l,[u,mj],[k,S]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[u,Qj],[k,S]],[/((pebble))app/i],[u,l,[k,P]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[u,O],[k,P]],[/droid.+; (glass) \d/i],[l,[u,yA],[k,P]],[/droid.+; (wt63?0{2,3})\)/i],[l,[u,_e],[k,P]],[/(quest( 2| pro)?)/i],[l,[u,Tt],[k,P]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[k,D]],[/(aeobc)\b/i],[l,[u,h],[k,D]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[k,G]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[k,x]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[k,x]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[k,G]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[c,XA+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[m,Kr,ca]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,Kr,ca],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,xt],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,m],[/\(bb(10);/i],[m,[c,AA]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[c,dj+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[c,bA+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,Cj],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,m],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,m]]},ut=function(se,iA){if(typeof se===o&&(iA=se,se=j),!(this instanceof ut))return new ut(se,iA).getResult();var hA=typeof A!==n&&A.navigator?A.navigator:j,HA=se||(hA&&hA.userAgent?hA.userAgent:t),fj=hA&&hA.userAgentData?hA.userAgentData:j,xj=iA?At(ct,iA):ct,ye=hA&&hA.userAgent==HA;return this.getBrowser=function(){var Bj={};return Bj[c]=j,Bj[m]=j,Jr.call(Bj,HA,xj.browser),Bj[s]=Ar(Bj[m]),ye&&hA&&hA.brave&&typeof hA.brave.isBrave==a&&(Bj[c]="Brave"),Bj},this.getCPU=function(){var Bj={};return Bj[F]=j,Jr.call(Bj,HA,xj.cpu),Bj},this.getDevice=function(){var Bj={};return Bj[u]=j,Bj[l]=j,Bj[k]=j,Jr.call(Bj,HA,xj.device),ye&&!Bj[k]&&fj&&fj.mobile&&(Bj[k]=G),ye&&Bj[l]=="Macintosh"&&hA&&typeof hA.standalone!==n&&hA.maxTouchPoints&&hA.maxTouchPoints>2&&(Bj[l]="iPad",Bj[k]=x),Bj},this.getEngine=function(){var Bj={};return Bj[c]=j,Bj[m]=j,Jr.call(Bj,HA,xj.engine),Bj},this.getOS=function(){var Bj={};return Bj[c]=j,Bj[m]=j,Jr.call(Bj,HA,xj.os),ye&&!Bj[c]&&fj&&fj.platform!="Unknown"&&(Bj[c]=fj.platform.replace(/chrome os/i,Cj).replace(/macos/i,xt)),Bj},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return HA},this.setUA=function(Bj){return HA=typeof Bj===i&&Bj.length>y?Pt(Bj,y):Bj,this},this.setUA(HA),this};ut.VERSION=e,ut.BROWSER=Ce([c,m,s]),ut.CPU=Ce([F]),ut.DEVICE=Ce([l,u,k,S,G,R,x,P,D]),ut.ENGINE=ut.OS=Ce([c,m]),typeof N1!==n?(typeof dH!==n&&dH.exports&&(N1=dH.exports=ut),N1.UAParser=ut):typeof define===a&&define.amd?define(function(){return ut}):typeof A!==n&&(A.UAParser=ut);var hr=typeof A!==n&&(A.jQuery||A.Zepto);if(hr&&!hr.ua){var o6=new ut;hr.ua=o6.getResult(),hr.ua.get=function(){return o6.getUA()},hr.ua.set=function(se){o6.setUA(se);var iA=o6.getResult();for(var hA in iA)hr.ua[hA]=iA[hA]}}})(typeof window=="object"?window:N1)});var CTA=RA((QEt,iUj)=>{iUj.exports="/assets/wasm/b5_mycelium_bg-YUPNY72U.wasm"});var g_A=RA((kqt,zH)=>{var ZCA,A_A,j_A,e_A,t_A,r_A,a_A,n_A,o_A,LH,JaA,i_A,s_A,Fb,l_A,c_A,d_A,k_A,u_A,E_A,p_A,m_A,B_A;(function(A){var j=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(t){A(e(j,e(t)))}):typeof zH=="object"&&typeof zH.exports=="object"?A(e(j,e(zH.exports))):A(e(j));function e(t,r){return t!==j&&(typeof Object.create=="function"?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(a,n){return t[a]=r?r(a,n):n}}})(function(A){var j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};ZCA=function(e,t){j(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},A_A=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},j_A=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},e_A=function(e,t,r,a){var n=arguments.length,o=n<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,r):a,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(n<3?i(o):n>3?i(t,r,o):i(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o},t_A=function(e,t){return function(r,a){t(r,a,e)}},r_A=function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},a_A=function(e,t,r,a){function n(o){return o instanceof r?o:new r(function(i){i(o)})}return new(r||(r=Promise))(function(o,i){function s(k){try{c(a.next(k))}catch(u){i(u)}}function l(k){try{c(a.throw(k))}catch(u){i(u)}}function c(k){k.done?o(k.value):n(k.value).then(s,l)}c((a=a.apply(e,t||[])).next())})},n_A=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,n,o,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(k){return l([c,k])}}function l(c){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(k){c=[6,k],n=0}finally{a=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},B_A=function(e,t,r,a){a===void 0&&(a=r),e[a]=t[r]},o_A=function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])},LH=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JaA=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),n,o=[],i;try{for(;(t===void 0||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},i_A=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(JaA(arguments[t]));return e},s_A=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var a=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,n++)a[n]=o[i];return a},Fb=function(e){return this instanceof Fb?(this.v=e,this):new Fb(e)},l_A=function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(e,t||[]),n,o=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(m){a[m]&&(n[m]=function(F){return new Promise(function(S,G){o.push([m,F,S,G])>1||s(m,F)})})}function s(m,F){try{l(a[m](F))}catch(S){u(o[0][3],S)}}function l(m){m.value instanceof Fb?Promise.resolve(m.value.v).then(c,k):u(o[0][2],m)}function c(m){s("next",m)}function k(m){s("throw",m)}function u(m,F){m(F),o.shift(),o.length&&s(o[0][0],o[0][1])}},c_A=function(e){var t,r;return t={},a("next"),a("throw",function(n){throw n}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(n,o){t[n]=e[n]?function(i){return(r=!r)?{value:Fb(e[n](i)),done:n==="return"}:o?o(i):i}:o}},d_A=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof LH=="function"?LH(e):e[Symbol.iterator](),r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r);function a(o){r[o]=e[o]&&function(i){return new Promise(function(s,l){i=e[o](i),n(s,l,i.done,i.value)})}}function n(o,i,s,l){Promise.resolve(l).then(function(c){o({value:c,done:s})},i)}},k_A=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},u_A=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},E_A=function(e){return e&&e.__esModule?e:{default:e}},p_A=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},m_A=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r},A("__extends",ZCA),A("__assign",A_A),A("__rest",j_A),A("__decorate",e_A),A("__param",t_A),A("__metadata",r_A),A("__awaiter",a_A),A("__generator",n_A),A("__exportStar",o_A),A("__createBinding",B_A),A("__values",LH),A("__read",JaA),A("__spread",i_A),A("__spreadArrays",s_A),A("__await",Fb),A("__asyncGenerator",l_A),A("__asyncDelegator",c_A),A("__asyncValues",d_A),A("__makeTemplateObject",k_A),A("__importStar",u_A),A("__importDefault",E_A),A("__classPrivateFieldGet",p_A),A("__classPrivateFieldSet",m_A)})});var L_A=RA(eM=>{"use strict";Object.defineProperty(eM,"__esModule",{value:!0});eM.AccountType=void 0;var N_A;(function(A){A.Individual="I",A.Family="F",A.Team="B",A.Unsupported="Unsupported"})(N_A||(eM.AccountType=N_A={}))});var U_A=RA(tM=>{"use strict";Object.defineProperty(tM,"__esModule",{value:!0});tM.BillingStatus=void 0;var z_A;(function(A){A.Active="A",A.Pending="P",A.CancelAtEnd="C",A.Frozen="F",A.Lapsed="L",A.Trialing="T",A.Unsupported="Unsupported"})(z_A||(tM.BillingStatus=z_A={}))});var Ra=RA(Kn=>{"use strict";var V_A=Kn&&Kn.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),PVj=Kn&&Kn.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),OVj=Kn&&Kn.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&V_A(j,A,e);return PVj(j,A),j},X_A=Kn&&Kn.__exportStar||function(A,j){for(var e in A)e!=="default"&&!Object.prototype.hasOwnProperty.call(j,e)&&V_A(j,A,e)},J_A;Object.defineProperty(Kn,"__esModule",{value:!0});Kn.TelemetryStringC=Kn.TS=Kn.TelemetryString=Kn.exactPartial=Kn.exactType=void 0;var Cx=OVj(tA()),RVj=(A,j)=>Cx.exact(Cx.type(A),j);Kn.exactType=RVj;var DVj=(A,j)=>Cx.exact(Cx.partial(A),j);Kn.exactPartial=DVj;var TVj=Symbol("string"),Wg=class{constructor(j){this[J_A]=0,this.str=j}telemetryString(){return this}};Kn.TelemetryString=Wg;J_A=TVj;Wg.assertSafeForTelemetry=A=>new Wg(A);var rM=Wg.assertSafeForTelemetry,CVj=(A,j)=>rM(A.map(e=>e.telemetryString().str).join(j?.telemetryString().str)),_Vj=(A,...j)=>CVj(A.flatMap((e,t)=>{let r=j[t];return r!==void 0?[rM(e),r.telemetryString()]:[rM(e)]}),rM(""));Kn.TS=_Vj;Kn.TelemetryStringC=new Cx.Type("TelemetryString",A=>A instanceof Wg,(A,j)=>A instanceof Wg?Cx.success(A.str):Cx.failure(A,j,"cannot decode unknown value to TelemetryString"),A=>JSON.stringify(A.str));X_A(L_A(),Kn);X_A(U_A(),Kn)});var Q_A=RA(Ru=>{"use strict";var SVj=Ru&&Ru.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),HVj=Ru&&Ru.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),MVj=Ru&&Ru.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&SVj(j,A,e);return HVj(j,A),j};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.AccountContext=void 0;var li=MVj(tA()),W_A=Ra();Ru.AccountContext=li.exact(li.type({schema:li.literal("iglu:com.1password.core/account_context/jsonschema/1-0-0"),data:li.exact(li.intersection([li.type({user_uuid:W_A.TelemetryStringC,account_uuid:W_A.TelemetryStringC,account_type:li.union([li.literal("I"),li.literal("F"),li.literal("B")])}),li.partial({billing_status:li.union([li.literal("A"),li.literal("P"),li.literal("C"),li.literal("F"),li.literal("L"),li.literal("T")])})]))}))});var Y_A=RA(Du=>{"use strict";var KVj=Du&&Du.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),NVj=Du&&Du.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),LVj=Du&&Du.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&KVj(j,A,e);return NVj(j,A),j};Object.defineProperty(Du,"__esModule",{value:!0});Du.AppContext=void 0;var _x=LVj(tA()),aM=Ra();Du.AppContext=_x.exact(_x.type({schema:_x.literal("iglu:com.1password.core/app_context/jsonschema/2-1-0"),data:_x.exact(_x.intersection([_x.type({name:aM.TelemetryStringC,version:aM.TelemetryStringC}),_x.partial({app_used_locale:aM.TelemetryStringC,app_default_locale:aM.TelemetryStringC})]))}))});var Z_A=RA(Tu=>{"use strict";var zVj=Tu&&Tu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),UVj=Tu&&Tu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),VVj=Tu&&Tu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&zVj(j,A,e);return UVj(j,A),j};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.DeviceContext=void 0;var Sx=VVj(tA()),nM=Ra();Tu.DeviceContext=Sx.exact(Sx.type({schema:Sx.literal("iglu:com.1password.core/device_context/jsonschema/1-1-1"),data:Sx.exact(Sx.intersection([Sx.type({device_uuid:nM.TelemetryStringC}),Sx.partial({os_name:nM.TelemetryStringC,os_version:nM.TelemetryStringC,os_locale:nM.TelemetryStringC})]))}))});var ASA=RA(Cu=>{"use strict";var XVj=Cu&&Cu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),JVj=Cu&&Cu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),WVj=Cu&&Cu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&XVj(j,A,e);return JVj(j,A),j};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.ExperimentationContext=void 0;var wb=WVj(tA()),QVj=Ra();Cu.ExperimentationContext=wb.exact(wb.type({schema:wb.literal("iglu:com.1password.core/experimentation_context/jsonschema/1-0-0"),data:wb.exact(wb.type({assigned_experiments:wb.array(QVj.TelemetryStringC)}))}))});var jSA=RA(_u=>{"use strict";var YVj=_u&&_u.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),ZVj=_u&&_u.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),AXj=_u&&_u.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&YVj(j,A,e);return ZVj(j,A),j};Object.defineProperty(_u,"__esModule",{value:!0});_u.FeatureFlagContext=void 0;var Ib=AXj(tA()),jXj=Ra();_u.FeatureFlagContext=Ib.exact(Ib.type({schema:Ib.literal("iglu:com.1password.core/feature_flag_context/jsonschema/1-0-1"),data:Ib.exact(Ib.type({assigned_flags:Ib.array(jXj.TelemetryStringC)}))}))});var eSA=RA(Su=>{"use strict";var eXj=Su&&Su.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),tXj=Su&&Su.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),rXj=Su&&Su.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&eXj(j,A,e);return tXj(j,A),j};Object.defineProperty(Su,"__esModule",{value:!0});Su.SessionContext=void 0;var gP=rXj(tA()),aXj=Ra();Su.SessionContext=gP.exact(gP.type({schema:gP.literal("iglu:com.1password.core/session_context/jsonschema/1-0-0"),data:gP.exact(gP.type({session_uuid:aXj.TelemetryStringC}))}))});var tSA=RA(oM=>{"use strict";Object.defineProperty(oM,"__esModule",{value:!0});oM.AllContexts=void 0;var nXj=Q_A(),oXj=Y_A(),iXj=Z_A(),sXj=ASA(),lXj=jSA(),cXj=eSA();oM.AllContexts={AccountContext:nXj.AccountContext,AppContext:oXj.AppContext,DeviceContext:iXj.DeviceContext,ExperimentationContext:sXj.ExperimentationContext,FeatureFlagContext:lXj.FeatureFlagContext,SessionContext:cXj.SessionContext}});var rSA=RA(Hu=>{"use strict";var dXj=Hu&&Hu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),kXj=Hu&&Hu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),uXj=Hu&&Hu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&dXj(j,A,e);return kXj(j,A),j};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.AppLock=void 0;var Em=uXj(tA()),EXj=Ra();Hu.AppLock=Em.exact(Em.type({schema:Em.literal("iglu:com.1password.app/app_lock/jsonschema/1-0-2"),data:Em.exact(Em.intersection([Em.type({lock_reason:EXj.TelemetryStringC,autolock_duration_setting:Em.Int}),Em.partial({idle_duration_seconds:Em.Int})]))}))});var aSA=RA(Mu=>{"use strict";var pXj=Mu&&Mu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),mXj=Mu&&Mu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),BXj=Mu&&Mu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&pXj(j,A,e);return mXj(j,A),j};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.AppUnlock=void 0;var gn=BXj(tA());Mu.AppUnlock=gn.exact(gn.type({schema:gn.literal("iglu:com.1password.app/app_unlock/jsonschema/1-2-0"),data:gn.exact(gn.intersection([gn.type({unlock_method:gn.union([gn.literal("BIOMETRIC"),gn.literal("PASSWORD"),gn.literal("PIN"),gn.literal("SSO"),gn.literal("PASSKEY"),gn.literal("B5WEB"),gn.literal("SLS"),gn.literal("DEVICE_UNLOCK"),gn.literal("APPLE_WATCH")]),status:gn.union([gn.literal("SUCCESS"),gn.literal("FAIL"),gn.literal("REQUEST")])}),gn.partial({count_locked:gn.Int,count_unlocked:gn.Int})]))}))});var nSA=RA(Ku=>{"use strict";var gXj=Ku&&Ku.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),hXj=Ku&&Ku.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),qXj=Ku&&Ku.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&gXj(j,A,e);return hXj(j,A),j};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.AutolockDurationSettingUpdate=void 0;var Yk=qXj(tA());Ku.AutolockDurationSettingUpdate=Yk.exact(Yk.type({schema:Yk.literal("iglu:com.1password.app/autolock-duration-setting_update/jsonschema/1-0-0"),data:Yk.exact(Yk.type({autolock_duration_setting_status:Yk.union([Yk.literal("SUCCESSFUL"),Yk.literal("FAILED"),Yk.literal("REQUESTED")]),autolock_duration_before:Yk.Int,autolock_duration_after:Yk.Int}))}))});var iSA=RA(Nu=>{"use strict";var xXj=Nu&&Nu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),vXj=Nu&&Nu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),GXj=Nu&&Nu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&xXj(j,A,e);return vXj(j,A),j};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.BackgroundAction=void 0;var Hx=GXj(tA()),oSA=Ra();Nu.BackgroundAction=Hx.exact(Hx.type({schema:Hx.literal("iglu:com.1password.app/background_action/jsonschema/1-0-1"),data:Hx.exact(Hx.intersection([Hx.type({name:oSA.TelemetryStringC}),Hx.partial({category:oSA.TelemetryStringC})]))}))});var lSA=RA(Lu=>{"use strict";var fXj=Lu&&Lu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),FXj=Lu&&Lu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),bXj=Lu&&Lu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&fXj(j,A,e);return FXj(j,A),j};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.CliRequest=void 0;var Mx=bXj(tA()),sSA=Ra();Lu.CliRequest=Mx.exact(Mx.type({schema:Mx.literal("iglu:com.1password.app/cli_request/jsonschema/1-0-0"),data:Mx.exact(Mx.intersection([Mx.type({command:sSA.TelemetryStringC}),Mx.partial({command_alias:sSA.TelemetryStringC})]))}))});var cSA=RA(zu=>{"use strict";var yXj=zu&&zu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),$Xj=zu&&zu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),wXj=zu&&zu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&yXj(j,A,e);return $Xj(j,A),j};Object.defineProperty(zu,"__esModule",{value:!0});zu.Click=void 0;var Kx=wXj(tA()),iM=Ra();zu.Click=Kx.exact(Kx.type({schema:Kx.literal("iglu:com.1password.app/click/jsonschema/1-0-0"),data:Kx.exact(Kx.intersection([Kx.type({component_type:iM.TelemetryStringC,component_name:iM.TelemetryStringC}),Kx.partial({source:iM.TelemetryStringC,category:iM.TelemetryStringC})]))}))});var dSA=RA(Uu=>{"use strict";var IXj=Uu&&Uu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),PXj=Uu&&Uu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),OXj=Uu&&Uu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&IXj(j,A,e);return PXj(j,A),j};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.DeveloperEnvironmentVariablesUpdate=void 0;var Pb=OXj(tA());Uu.DeveloperEnvironmentVariablesUpdate=Pb.exact(Pb.type({schema:Pb.literal("iglu:com.1password.app/developer-environment-variables_update/jsonschema/1-0-0"),data:Pb.exact(Pb.type({active_variables_count:Pb.Int}))}))});var kSA=RA(Vu=>{"use strict";var RXj=Vu&&Vu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),DXj=Vu&&Vu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),TXj=Vu&&Vu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&RXj(j,A,e);return DXj(j,A),j};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.ExportDiagnosticsReport=void 0;var Ll=TXj(tA());Vu.ExportDiagnosticsReport=Ll.exact(Ll.type({schema:Ll.literal("iglu:com.1password.app/export_diagnostics_report/jsonschema/1-0-0"),data:Ll.exact(Ll.intersection([Ll.type({report_source:Ll.union([Ll.literal("B5X"),Ll.literal("DESKTOP")])}),Ll.partial({export_status:Ll.union([Ll.literal("SUCCESSFUL"),Ll.literal("FAILED")]),browser_console_logs_included:Ll.Int})]))}))});var uSA=RA(Xu=>{"use strict";var CXj=Xu&&Xu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),_Xj=Xu&&Xu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),SXj=Xu&&Xu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&CXj(j,A,e);return _Xj(j,A),j};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.FilterBusinessWatchtowerReport=void 0;var hP=SXj(tA()),HXj=Ra();Xu.FilterBusinessWatchtowerReport=hP.exact(hP.type({schema:hP.literal("iglu:com.1password.app/filter_business_watchtower_report/jsonschema/1-0-0"),data:hP.exact(hP.type({filter_selection:HXj.TelemetryStringC}))}))});var ESA=RA(Ju=>{"use strict";var MXj=Ju&&Ju.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),KXj=Ju&&Ju.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),NXj=Ju&&Ju.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&MXj(j,A,e);return KXj(j,A),j};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.InlineMenuRender=void 0;var k6=NXj(tA());Ju.InlineMenuRender=k6.exact(k6.type({schema:k6.literal("iglu:com.1password.app/inline_menu_render/jsonschema/1-0-0"),data:k6.exact(k6.intersection([k6.type({overall_status:k6.union([k6.literal("NOT_STARTED"),k6.literal("INCOMPLETE"),k6.literal("COMPLETED")]),dom_scan_status:k6.union([k6.literal("NOT_STARTED"),k6.literal("INCOMPLETE"),k6.literal("COMPLETED")]),analyze_frame_status:k6.union([k6.literal("NOT_STARTED"),k6.literal("INCOMPLETE"),k6.literal("COMPLETED")]),render_menu_status:k6.union([k6.literal("NOT_STARTED"),k6.literal("INCOMPLETE"),k6.literal("COMPLETED")])}),k6.partial({overall_duration_ms:k6.Int,dom_scan_duration_ms:k6.Int,analyze_frame_duration_ms:k6.Int,render_menu_duration_ms:k6.Int})]))}))});var pSA=RA(Wu=>{"use strict";var LXj=Wu&&Wu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),zXj=Wu&&Wu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),UXj=Wu&&Wu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&LXj(j,A,e);return zXj(j,A),j};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.Input=void 0;var Nx=UXj(tA()),sM=Ra();Wu.Input=Nx.exact(Nx.type({schema:Nx.literal("iglu:com.1password.app/input/jsonschema/1-0-0"),data:Nx.exact(Nx.intersection([Nx.type({component_type:sM.TelemetryStringC,component_name:sM.TelemetryStringC}),Nx.partial({source:sM.TelemetryStringC,category:sM.TelemetryStringC})]))}))});var mSA=RA(Qu=>{"use strict";var VXj=Qu&&Qu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),XXj=Qu&&Qu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),JXj=Qu&&Qu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&VXj(j,A,e);return XXj(j,A),j};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.InviteUser=void 0;var Js=JXj(tA());Qu.InviteUser=Js.exact(Js.type({schema:Js.literal("iglu:com.1password.app/invite_user/jsonschema/2-0-0"),data:Js.exact(Js.type({member_type:Js.union([Js.literal("REGULAR"),Js.literal("GUEST")]),invites_count:Js.Int,source:Js.union([Js.literal("GUIDED_SETUP"),Js.literal("INVITE_MODAL")]),status:Js.union([Js.literal("SUCCESS"),Js.literal("FAIL")])}))}))});var BSA=RA(Yu=>{"use strict";var WXj=Yu&&Yu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),QXj=Yu&&Yu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),YXj=Yu&&Yu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&WXj(j,A,e);return QXj(j,A),j};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.ItemAutofill=void 0;var _j=YXj(tA()),ZXj=Ra();Yu.ItemAutofill=_j.exact(_j.type({schema:_j.literal("iglu:com.1password.app/item_autofill/jsonschema/1-2-0"),data:_j.exact(_j.intersection([_j.type({template_uuid:ZXj.TelemetryStringC,status:_j.union([_j.literal("SUCCESS"),_j.literal("FAIL"),_j.literal("REQUEST")])}),_j.partial({fill_method:_j.union([_j.literal("OPEN_AND_FILL"),_j.literal("QUICK_ACCESS"),_j.literal("INLINE"),_j.literal("POPUP"),_j.literal("UNIVERSAL_AUTOFILL"),_j.literal("USO_PROMPT"),_j.literal("KEYBOARD_SHORTCUT"),_j.literal("SYSTEM_PROMPT"),_j.literal("ITEM_LIST"),_j.literal("SAVE_AND_FILL"),_j.literal("LAUNCHER_SEARCH")]),social_login_type:_j.union([_j.literal("amazon"),_j.literal("apple"),_j.literal("discord"),_j.literal("facebook"),_j.literal("github"),_j.literal("google"),_j.literal("microsoft"),_j.literal("okta"),_j.literal("slack"),_j.literal("twitter")]),fields_filled:_j.array(_j.union([_j.literal("ssh-key-title"),_j.literal("ssh-key"),_j.literal("name"),_j.literal("honorific-prefix"),_j.literal("given-name"),_j.literal("additional-name"),_j.literal("family-name"),_j.literal("honorific-suffix"),_j.literal("nickname"),_j.literal("organization-title"),_j.literal("username"),_j.literal("new-password"),_j.literal("current-password"),_j.literal("one-time-code"),_j.literal("organization"),_j.literal("street-address"),_j.literal("address-line1"),_j.literal("address-line2"),_j.literal("address-line3"),_j.literal("address-level1"),_j.literal("address-level2"),_j.literal("address-level3"),_j.literal("address-level4"),_j.literal("country"),_j.literal("country-name"),_j.literal("postal-code"),_j.literal("cc-name"),_j.literal("cc-given-name"),_j.literal("cc-additional-name"),_j.literal("cc-family-name"),_j.literal("cc-number"),_j.literal("cc-exp"),_j.literal("cc-exp-month"),_j.literal("cc-exp-year"),_j.literal("cc-csc"),_j.literal("cc-type"),_j.literal("transaction-currency"),_j.literal("transaction-amount"),_j.literal("language"),_j.literal("bday"),_j.literal("bday-day"),_j.literal("bday-month"),_j.literal("bday-year"),_j.literal("sex"),_j.literal("url"),_j.literal("photo"),_j.literal("tel"),_j.literal("tel-country-code"),_j.literal("tel-national"),_j.literal("tel-area-code"),_j.literal("tel-local"),_j.literal("tel-local-prefix"),_j.literal("tel-local-suffix"),_j.literal("tel-extension"),_j.literal("email"),_j.literal("impp"),_j.literal("crypto-address"),_j.literal("crypto-recovery-seed"),_j.literal("recovery-code")])),is_default:_j.boolean,passkey_filled:_j.boolean})]))}))});var gSA=RA(Zu=>{"use strict";var AJj=Zu&&Zu.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),jJj=Zu&&Zu.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),eJj=Zu&&Zu.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&AJj(j,A,e);return jJj(j,A),j};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.ItemCreate=void 0;var F6=eJj(tA()),tJj=Ra();Zu.ItemCreate=F6.exact(F6.type({schema:F6.literal("iglu:com.1password.app/item_create/jsonschema/1-0-3"),data:F6.exact(F6.intersection([F6.type({template_uuid:tJj.TelemetryStringC,status:F6.union([F6.literal("SUCCESS"),F6.literal("FAIL"),F6.literal("REQUEST")])}),F6.partial({create_method:F6.union([F6.literal("SAVE_DIALOG"),F6.literal("AUTOSAVE"),F6.literal("PASSKEY"),F6.literal("MANUAL")]),tags_added_count:F6.Int,vault_type:F6.union([F6.literal("PERSONAL"),F6.literal("EVERYONE"),F6.literal("TRANSFER"),F6.literal("USER_CREATED"),F6.literal("SYSTEM"),F6.literal("GENERATED_PASSWORDS"),F6.literal("MANAGED_APPLICATIONS")]),passkey_added:F6.boolean})]))}))});var hSA=RA(AE=>{"use strict";var rJj=AE&&AE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),aJj=AE&&AE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),nJj=AE&&AE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&rJj(j,A,e);return aJj(j,A),j};Object.defineProperty(AE,"__esModule",{value:!0});AE.ItemImport=void 0;var Nj=nJj(tA());AE.ItemImport=Nj.exact(Nj.type({schema:Nj.literal("iglu:com.1password.app/item_import/jsonschema/1-1-0"),data:Nj.exact(Nj.intersection([Nj.type({import_source:Nj.union([Nj.literal("CHROME"),Nj.literal("SAFARI"),Nj.literal("FIREFOX"),Nj.literal("EDGE"),Nj.literal("BRAVE"),Nj.literal("DIFFERENT_BROWSER"),Nj.literal("LASTPASS"),Nj.literal("ICLOUD_KEYCHAIN"),Nj.literal("DASHLANE"),Nj.literal("KEYPASS"),Nj.literal("KEYPASSXC"),Nj.literal("ROBOFORM"),Nj.literal("DELINEA_SECRET_SERVER"),Nj.literal("1PASSWORD"),Nj.literal("DIFFERENT_PASSWORD_MANAGER"),Nj.literal("MEMORIZED_PASSWORDS"),Nj.literal("PEN_AND_PAPER"),Nj.literal("SPREADSHEET"),Nj.literal("CSV"),Nj.literal("BITWARDEN"),Nj.literal("KEEPER"),Nj.literal("I_DONT_SEE_MY_OPTION")]),item_imported_count:Nj.Int,login_imported_count:Nj.Int}),Nj.partial({import_source_category:Nj.union([Nj.literal("MY_BROWSER"),Nj.literal("A_PASSWORD_MANAGER"),Nj.literal("SOMEWHERE_ELSE")]),item_type_edited_count:Nj.Int,item_label_added_count:Nj.Int,import_error_stage:Nj.union([Nj.literal("START"),Nj.literal("LOG_IN"),Nj.literal("ADMIN_OPTIONS"),Nj.literal("IMPORT"),Nj.literal("FINALIZE")]),import_status:Nj.union([Nj.literal("SUCCESS"),Nj.literal("FAIL"),Nj.literal("REQUEST")]),import_error:Nj.union([Nj.literal("COULDNT_OPEN_FILE"),Nj.literal("BAD_INPUT_FILE_TYPE"),Nj.literal("NO_ACCOUNTS"),Nj.literal("NO_VAULTS"),Nj.literal("FAILED_DECRYPT_BYTES"),Nj.literal("NO_ASSOCIATED_KEY_ID"),Nj.literal("DOCUMENT_BAD_INTEGRITY_HASH"),Nj.literal("DESERIALIZE_ERROR"),Nj.literal("MALFORMED_ZIP"),Nj.literal("ZIP_ERROR"),Nj.literal("CSV"),Nj.literal("IO_ERROR"),Nj.literal("SERIALIZE_ERROR"),Nj.literal("UNSUPPORTED_EXPORT_FORMAT"),Nj.literal("UNBALANCED_QUOTE"),Nj.literal("CRYPTO_ERROR"),Nj.literal("DECRYPTED_FILE_ERROR"),Nj.literal("CSV_FIELD_COUNT_MISMATCH"),Nj.literal("IMPORT_CANCELLED"),Nj.literal("NETWORK"),Nj.literal("FAILED_TO_CREATE_VAULT"),Nj.literal("BINARY_NOT_FOUND"),Nj.literal("BINARY_FAILED_TO_START"),Nj.literal("FAILED_TO_CONVERT_JSON"),Nj.literal("FAILED_TO_COMMUNICATE"),Nj.literal("MISSING_PRIVATE_VAULT"),Nj.literal("MODEL"),Nj.literal("OBJECT"),Nj.literal("TEMPLATE_NOT_FOUND"),Nj.literal("LP_APPLICATION"),Nj.literal("LP_HTTP"),Nj.literal("LP_LOGIN"),Nj.literal("LP_USERNAME"),Nj.literal("LP_PASSWORD"),Nj.literal("LP_WRONG_OTP"),Nj.literal("LP_LASTPASS_API_CHANGED"),Nj.literal("LP_MALFORMED_FILE"),Nj.literal("LP_SERVER"),Nj.literal("LP_TOO_MANY_REQUESTS"),Nj.literal("LP_IDP_NOT_SUPPORTED"),Nj.literal("LP_PASSWORD_RESET_REQUESTED"),Nj.literal("LP_SHARED_FOLDERS"),Nj.literal("LP_OIDC"),Nj.literal("LP_DUO_MFA"),Nj.literal("LP_UNIFIED_LOGIN"),Nj.literal("OTHER")])})]))}))});var qSA=RA(jE=>{"use strict";var oJj=jE&&jE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),iJj=jE&&jE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),sJj=jE&&jE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&oJj(j,A,e);return iJj(j,A),j};Object.defineProperty(jE,"__esModule",{value:!0});jE.ItemLocationUpdate=void 0;var pm=sJj(tA()),lJj=Ra();jE.ItemLocationUpdate=pm.exact(pm.type({schema:pm.literal("iglu:com.1password.app/item_location_update/jsonschema/1-0-0"),data:pm.exact(pm.type({template_uuid:lJj.TelemetryStringC,update:pm.union([pm.literal("SET_VIA_MAP"),pm.literal("SET_VIA_TEXT"),pm.literal("REMOVED")])}))}))});var xSA=RA(eE=>{"use strict";var cJj=eE&&eE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),dJj=eE&&eE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),kJj=eE&&eE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&cJj(j,A,e);return dJj(j,A),j};Object.defineProperty(eE,"__esModule",{value:!0});eE.ItemShare=void 0;var An=kJj(tA());eE.ItemShare=An.exact(An.type({schema:An.literal("iglu:com.1password.app/item_share/jsonschema/1-0-0"),data:An.exact(An.intersection([An.type({link_expire:An.union([An.literal("1_HOUR"),An.literal("1_DAY"),An.literal("7_DAYS"),An.literal("14_DAYS"),An.literal("30_DAYS")]),available_to:An.union([An.literal("ANYONE_WITH_LINK"),An.literal("ONLY_SOME_PEOPLE")]),only_view_one_time:An.boolean,status:An.union([An.literal("SUCCESS"),An.literal("FAIL")])}),An.partial({share_method:An.union([An.literal("COPY_LINK"),An.literal("SHARE_LINK")]),email_added_count:An.Int})]))}))});var vSA=RA(tE=>{"use strict";var uJj=tE&&tE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),EJj=tE&&tE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),pJj=tE&&tE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&uJj(j,A,e);return EJj(j,A),j};Object.defineProperty(tE,"__esModule",{value:!0});tE.ItemUpdate=void 0;var Co=pJj(tA()),mJj=Ra();tE.ItemUpdate=Co.exact(Co.type({schema:Co.literal("iglu:com.1password.app/item_update/jsonschema/1-2-0"),data:Co.exact(Co.intersection([Co.type({template_uuid:mJj.TelemetryStringC,status:Co.union([Co.literal("SUCCESS"),Co.literal("FAIL"),Co.literal("REQUEST")])}),Co.partial({update_method:Co.union([Co.literal("MANUAL"),Co.literal("SAVE_DIALOG"),Co.literal("AUTOSAVE"),Co.literal("PASSKEY"),Co.literal("ONE_TIME_CODE")]),passkey_added:Co.boolean,one_time_password_added:Co.boolean})]))}))});var GSA=RA(rE=>{"use strict";var BJj=rE&&rE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),gJj=rE&&rE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),hJj=rE&&rE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&BJj(j,A,e);return gJj(j,A),j};Object.defineProperty(rE,"__esModule",{value:!0});rE.PageView=void 0;var Ki=hJj(tA());rE.PageView=Ki.exact(Ki.type({schema:Ki.literal("iglu:com.1password.app/page_view/jsonschema/1-0-1"),data:Ki.exact(Ki.type({page_name:Ki.union([Ki.literal("PROFILE"),Ki.literal("ALL_ITEMS"),Ki.literal("FAVORITES"),Ki.literal("WATCHTOWER"),Ki.literal("VAULT"),Ki.literal("TAG"),Ki.literal("ARCHIVE"),Ki.literal("RECENTLY_DELETED"),Ki.literal("CATEGORIES"),Ki.literal("LABS_HOMEPAGE"),Ki.literal("LABS_NEARBY_ITEMS")])}))}))});var fSA=RA(aE=>{"use strict";var qJj=aE&&aE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),xJj=aE&&aE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),vJj=aE&&aE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&qJj(j,A,e);return xJj(j,A),j};Object.defineProperty(aE,"__esModule",{value:!0});aE.ProfileDefaultUpdate=void 0;var Ob=vJj(tA()),GJj=Ra();aE.ProfileDefaultUpdate=Ob.exact(Ob.type({schema:Ob.literal("iglu:com.1password.app/profile-default_update/jsonschema/1-0-0"),data:Ob.exact(Ob.type({template_uuid:GJj.TelemetryStringC,set:Ob.boolean}))}))});var FSA=RA(nE=>{"use strict";var fJj=nE&&nE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),FJj=nE&&nE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),bJj=nE&&nE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&fJj(j,A,e);return FJj(j,A),j};Object.defineProperty(nE,"__esModule",{value:!0});nE.SettingReset=void 0;var Rb=bJj(tA()),yJj=Ra();nE.SettingReset=Rb.exact(Rb.type({schema:Rb.literal("iglu:com.1password.app/setting_reset/jsonschema/1-0-0"),data:Rb.exact(Rb.type({setting_path:yJj.TelemetryStringC,json_version:Rb.Int}))}))});var bSA=RA(oE=>{"use strict";var $Jj=oE&&oE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),wJj=oE&&oE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),IJj=oE&&oE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&$Jj(j,A,e);return wJj(j,A),j};Object.defineProperty(oE,"__esModule",{value:!0});oE.SignIn=void 0;var r6=IJj(tA());oE.SignIn=r6.exact(r6.type({schema:r6.literal("iglu:com.1password.app/sign_in/jsonschema/2-1-0"),data:r6.exact(r6.intersection([r6.type({unlock_method:r6.union([r6.literal("PASSWORD"),r6.literal("SSO"),r6.literal("PASSKEY"),r6.literal("EXTENSION_DELEGATED")]),sign_in_flow:r6.union([r6.literal("MYCELIUM_QR_CODE"),r6.literal("REDIRECT_FROM_BROWSER"),r6.literal("MANUAL_ENTRY"),r6.literal("SCAN_SETUP_CODE"),r6.literal("FOUND_ACCOUNTS"),r6.literal("MYCELIUM_QR_CODE_REVERSE")]),reauthentication:r6.boolean}),r6.partial({time_to_complete_sec:r6.Int,accessed_find_emergency_kit_link:r6.boolean,invalid_secret_key_error_count:r6.Int,invalid_email_address_error_count:r6.Int,invalid_sign_in_address_count:r6.Int,unable_to_sign_in_error_count:r6.Int,enrollment_required:r6.boolean,enrollment_failure_count:r6.Int})]))}))});var ySA=RA(iE=>{"use strict";var PJj=iE&&iE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),OJj=iE&&iE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),RJj=iE&&iE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&PJj(j,A,e);return OJj(j,A),j};Object.defineProperty(iE,"__esModule",{value:!0});iE.SortBusinessWatchtowerReport=void 0;var qP=RJj(tA()),DJj=Ra();iE.SortBusinessWatchtowerReport=qP.exact(qP.type({schema:qP.literal("iglu:com.1password.app/sort_business_watchtower_report/jsonschema/1-0-0"),data:qP.exact(qP.type({sort_selection:DJj.TelemetryStringC}))}))});var $SA=RA(sE=>{"use strict";var TJj=sE&&sE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),CJj=sE&&sE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),_Jj=sE&&sE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&TJj(j,A,e);return CJj(j,A),j};Object.defineProperty(sE,"__esModule",{value:!0});sE.SshAgentSignRequest=void 0;var Nn=_Jj(tA());sE.SshAgentSignRequest=Nn.exact(Nn.type({schema:Nn.literal("iglu:com.1password.app/ssh-agent_sign-request/jsonschema/1-1-0"),data:Nn.exact(Nn.intersection([Nn.type({key_type:Nn.union([Nn.literal("Ed25519"),Nn.literal("Rsa")])}),Nn.partial({is_host_bookmarked:Nn.boolean,is_bookmarks_config_file_enabled:Nn.boolean,is_agent_config_file_enabled:Nn.boolean,workflow_git:Nn.boolean,workflow_signing:Nn.boolean,workflow_sftp:Nn.boolean,workflow_docker:Nn.boolean,workflow_wsl:Nn.boolean,workflow_terminal:Nn.boolean,workflow_agent_forwarding:Nn.boolean,workflow_background:Nn.boolean,workflow_openssh:Nn.boolean})]))}))});var wSA=RA(lE=>{"use strict";var SJj=lE&&lE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),HJj=lE&&lE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),MJj=lE&&lE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&SJj(j,A,e);return HJj(j,A),j};Object.defineProperty(lE,"__esModule",{value:!0});lE.SshAuthPromptApprove=void 0;var xo=MJj(tA());lE.SshAuthPromptApprove=xo.exact(xo.type({schema:xo.literal("iglu:com.1password.app/ssh-auth-prompt_approve/jsonschema/1-0-0"),data:xo.exact(xo.intersection([xo.type({approval_method:xo.union([xo.literal("APPROVE_BUTTON"),xo.literal("ACCOUNT_PASSWORD"),xo.literal("SSO"),xo.literal("SYSTEM_AUTH_EMBEDDED_TOUCH_ID"),xo.literal("SYSTEM_AUTH_EMBEDDED_APPLE_WATCH"),xo.literal("SYSTEM_AUTH_POPUP_TOUCH_ID"),xo.literal("SYSTEM_AUTH_POPUP_APPLE_WATCH"),xo.literal("SYSTEM_AUTH_POPUP_LINUX"),xo.literal("SYSTEM_AUTH_POPUP_WINDOWS_HELLO"),xo.literal("PASSKEY")]),for_all_applications:xo.boolean}),xo.partial({rich_auth_prompt:xo.boolean})]))}))});var ISA=RA(cE=>{"use strict";var KJj=cE&&cE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),NJj=cE&&cE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),LJj=cE&&cE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&KJj(j,A,e);return NJj(j,A),j};Object.defineProperty(cE,"__esModule",{value:!0});cE.SshKeyExport=void 0;var ci=LJj(tA());cE.SshKeyExport=ci.exact(ci.type({schema:ci.literal("iglu:com.1password.app/ssh-key_export/jsonschema/1-0-0"),data:ci.exact(ci.intersection([ci.type({export_format:ci.union([ci.literal("PKCS8"),ci.literal("PKCS1"),ci.literal("OPENSSH")]),is_encrypted:ci.boolean,export_method:ci.union([ci.literal("COPY"),ci.literal("DOWNLOAD")])}),ci.partial({key_type:ci.union([ci.literal("RSA"),ci.literal("ED25519")])})]))}))});var PSA=RA(dE=>{"use strict";var zJj=dE&&dE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),UJj=dE&&dE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),VJj=dE&&dE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&zJj(j,A,e);return UJj(j,A),j};Object.defineProperty(dE,"__esModule",{value:!0});dE.SubscriptionCancel=void 0;var xP=VJj(tA()),XJj=Ra();dE.SubscriptionCancel=xP.exact(xP.type({schema:xP.literal("iglu:com.1password.app/subscription_cancel/jsonschema/1-0-0"),data:xP.exact(xP.type({cancelled_subscription_tier:XJj.TelemetryStringC}))}))});var OSA=RA(kE=>{"use strict";var JJj=kE&&kE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),WJj=kE&&kE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),QJj=kE&&kE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&JJj(j,A,e);return WJj(j,A),j};Object.defineProperty(kE,"__esModule",{value:!0});kE.SubscriptionStart=void 0;var di=QJj(tA()),YJj=Ra();kE.SubscriptionStart=di.exact(di.type({schema:di.literal("iglu:com.1password.app/subscription_start/jsonschema/1-0-0"),data:di.exact(di.type({subscription_tier:YJj.TelemetryStringC,pre_subscription_billing_status:di.union([di.literal("TRIAL"),di.literal("FROZEN"),di.literal("OTHER")]),subscription_payment_method:di.array(di.union([di.literal("CREDIT_CARD"),di.literal("GIFT_CARD"),di.literal("OTHER")])),subscription_payment_frequency:di.union([di.literal("MONTHLY"),di.literal("ANNUAL"),di.literal("OTHER")])}))}))});var DSA=RA(uE=>{"use strict";var ZJj=uE&&uE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),AWj=uE&&uE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),jWj=uE&&uE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&ZJj(j,A,e);return AWj(j,A),j};Object.defineProperty(uE,"__esModule",{value:!0});uE.SubscriptionUpdate=void 0;var Qg=jWj(tA()),RSA=Ra();uE.SubscriptionUpdate=Qg.exact(Qg.type({schema:Qg.literal("iglu:com.1password.app/subscription_update/jsonschema/1-0-0"),data:Qg.exact(Qg.type({subscription_update_type:Qg.union([Qg.literal("TIER"),Qg.literal("PAYMENT_FREQUENCY")]),subscription_updated_from:RSA.TelemetryStringC,subscription_updated_to:RSA.TelemetryStringC}))}))});var TSA=RA(EE=>{"use strict";var eWj=EE&&EE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),tWj=EE&&EE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),rWj=EE&&EE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&eWj(j,A,e);return tWj(j,A),j};Object.defineProperty(EE,"__esModule",{value:!0});EE.SwitchChange=void 0;var mm=rWj(tA());EE.SwitchChange=mm.exact(mm.type({schema:mm.literal("iglu:com.1password.app/switch_change/jsonschema/1-0-0"),data:mm.exact(mm.type({switch_name:mm.union([mm.literal("LABS_EXPERIMENT_NEARBY_ITEMS"),mm.literal("USE_MAPS")]),enabled:mm.boolean}))}))});var CSA=RA(pE=>{"use strict";var aWj=pE&&pE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),nWj=pE&&pE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),oWj=pE&&pE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&aWj(j,A,e);return nWj(j,A),j};Object.defineProperty(pE,"__esModule",{value:!0});pE.View=void 0;var Lx=oWj(tA()),lM=Ra();pE.View=Lx.exact(Lx.type({schema:Lx.literal("iglu:com.1password.app/view/jsonschema/1-0-0"),data:Lx.exact(Lx.intersection([Lx.type({component_type:lM.TelemetryStringC,component_name:lM.TelemetryStringC}),Lx.partial({source:lM.TelemetryStringC,category:lM.TelemetryStringC})]))}))});var SSA=RA(mE=>{"use strict";var iWj=mE&&mE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),sWj=mE&&mE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),lWj=mE&&mE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&iWj(j,A,e);return sWj(j,A),j};Object.defineProperty(mE,"__esModule",{value:!0});mE.AmplitudeExposure=void 0;var zx=lWj(tA()),_SA=Ra();mE.AmplitudeExposure=zx.exact(zx.type({schema:zx.literal("iglu:com.1password.preauth/amplitude_exposure/jsonschema/1-0-0"),data:zx.exact(zx.intersection([zx.type({flag_key:_SA.TelemetryStringC}),zx.partial({variant:_SA.TelemetryStringC})]))}))});var MSA=RA(BE=>{"use strict";var cWj=BE&&BE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),dWj=BE&&BE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),kWj=BE&&BE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&cWj(j,A,e);return dWj(j,A),j};Object.defineProperty(BE,"__esModule",{value:!0});BE.BackgroundActionPreauth=void 0;var Ux=kWj(tA()),HSA=Ra();BE.BackgroundActionPreauth=Ux.exact(Ux.type({schema:Ux.literal("iglu:com.1password.preauth/background_action_preauth/jsonschema/1-0-0"),data:Ux.exact(Ux.intersection([Ux.type({name:HSA.TelemetryStringC}),Ux.partial({category:HSA.TelemetryStringC})]))}))});var KSA=RA(gE=>{"use strict";var uWj=gE&&gE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),EWj=gE&&gE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),pWj=gE&&gE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&uWj(j,A,e);return EWj(j,A),j};Object.defineProperty(gE,"__esModule",{value:!0});gE.ClickPreauth=void 0;var Vx=pWj(tA()),cM=Ra();gE.ClickPreauth=Vx.exact(Vx.type({schema:Vx.literal("iglu:com.1password.preauth/click_preauth/jsonschema/1-0-0"),data:Vx.exact(Vx.intersection([Vx.type({component_type:cM.TelemetryStringC,component_name:cM.TelemetryStringC}),Vx.partial({source:cM.TelemetryStringC,category:cM.TelemetryStringC})]))}))});var NSA=RA(hE=>{"use strict";var mWj=hE&&hE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),BWj=hE&&hE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),gWj=hE&&hE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&mWj(j,A,e);return BWj(j,A),j};Object.defineProperty(hE,"__esModule",{value:!0});hE.InputPreauth=void 0;var Xx=gWj(tA()),dM=Ra();hE.InputPreauth=Xx.exact(Xx.type({schema:Xx.literal("iglu:com.1password.preauth/input_preauth/jsonschema/1-0-0"),data:Xx.exact(Xx.intersection([Xx.type({component_type:dM.TelemetryStringC,component_name:dM.TelemetryStringC}),Xx.partial({source:dM.TelemetryStringC,category:dM.TelemetryStringC})]))}))});var LSA=RA(xE=>{"use strict";var hWj=xE&&xE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),qWj=xE&&xE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),xWj=xE&&xE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&hWj(j,A,e);return qWj(j,A),j};Object.defineProperty(xE,"__esModule",{value:!0});xE.SignupCookiePresencePreauth=void 0;var qE=xWj(tA());xE.SignupCookiePresencePreauth=qE.exact(qE.type({schema:qE.literal("iglu:com.1password.preauth/signup_cookie_presence_preauth/jsonschema/1-0-0"),data:qE.exact(qE.type({referrer_present:qE.boolean,cjevent_present:qE.boolean,infr_present:qE.boolean,gspk_present:qE.boolean,affiliate_present:qE.boolean}))}))});var zSA=RA(vE=>{"use strict";var vWj=vE&&vE.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),GWj=vE&&vE.__setModuleDefault||(Object.create?function(A,j){Object.defineProperty(A,"default",{enumerable:!0,value:j})}:function(A,j){A.default=j}),fWj=vE&&vE.__importStar||function(A){if(A&&A.__esModule)return A;var j={};if(A!=null)for(var e in A)e!=="default"&&Object.prototype.hasOwnProperty.call(A,e)&&vWj(j,A,e);return GWj(j,A),j};Object.defineProperty(vE,"__esModule",{value:!0});vE.ViewPreauth=void 0;var Jx=fWj(tA()),kM=Ra();vE.ViewPreauth=Jx.exact(Jx.type({schema:Jx.literal("iglu:com.1password.preauth/view_preauth/jsonschema/1-0-0"),data:Jx.exact(Jx.intersection([Jx.type({component_type:kM.TelemetryStringC,component_name:kM.TelemetryStringC}),Jx.partial({source:kM.TelemetryStringC,category:kM.TelemetryStringC})]))}))});var YSA=RA(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.PreAuthEvents=Yg.isHighVolumeEventType=Yg.AllEvents=void 0;var FWj=rSA(),bWj=aSA(),yWj=nSA(),$Wj=iSA(),wWj=lSA(),IWj=cSA(),PWj=dSA(),OWj=kSA(),RWj=uSA(),DWj=ESA(),TWj=pSA(),CWj=mSA(),_Wj=BSA(),SWj=gSA(),HWj=hSA(),MWj=qSA(),KWj=xSA(),NWj=vSA(),LWj=GSA(),zWj=fSA(),UWj=FSA(),VWj=bSA(),XWj=ySA(),JWj=$SA(),WWj=wSA(),QWj=ISA(),YWj=PSA(),ZWj=OSA(),AQj=DSA(),jQj=TSA(),eQj=CSA(),USA=SSA(),VSA=MSA(),XSA=KSA(),JSA=NSA(),WSA=LSA(),QSA=zSA();Yg.AllEvents={AppLock:FWj.AppLock,AppUnlock:bWj.AppUnlock,AutolockDurationSettingUpdate:yWj.AutolockDurationSettingUpdate,BackgroundAction:$Wj.BackgroundAction,CliRequest:wWj.CliRequest,Click:IWj.Click,DeveloperEnvironmentVariablesUpdate:PWj.DeveloperEnvironmentVariablesUpdate,ExportDiagnosticsReport:OWj.ExportDiagnosticsReport,FilterBusinessWatchtowerReport:RWj.FilterBusinessWatchtowerReport,InlineMenuRender:DWj.InlineMenuRender,Input:TWj.Input,InviteUser:CWj.InviteUser,ItemAutofill:_Wj.ItemAutofill,ItemCreate:SWj.ItemCreate,ItemImport:HWj.ItemImport,ItemLocationUpdate:MWj.ItemLocationUpdate,ItemShare:KWj.ItemShare,ItemUpdate:NWj.ItemUpdate,PageView:LWj.PageView,ProfileDefaultUpdate:zWj.ProfileDefaultUpdate,SettingReset:UWj.SettingReset,SignIn:VWj.SignIn,SortBusinessWatchtowerReport:XWj.SortBusinessWatchtowerReport,SshAgentSignRequest:JWj.SshAgentSignRequest,SshAuthPromptApprove:WWj.SshAuthPromptApprove,SshKeyExport:QWj.SshKeyExport,SubscriptionCancel:YWj.SubscriptionCancel,SubscriptionStart:ZWj.SubscriptionStart,SubscriptionUpdate:AQj.SubscriptionUpdate,SwitchChange:jQj.SwitchChange,View:eQj.View,AmplitudeExposure:USA.AmplitudeExposure,BackgroundActionPreauth:VSA.BackgroundActionPreauth,ClickPreauth:XSA.ClickPreauth,InputPreauth:JSA.InputPreauth,SignupCookiePresencePreauth:WSA.SignupCookiePresencePreauth,ViewPreauth:QSA.ViewPreauth};var tQj=new Set(["AppUnlock","ItemAutofill"]),rQj=A=>tQj.has(A);Yg.isHighVolumeEventType=rQj;Yg.PreAuthEvents={AmplitudeExposure:USA.AmplitudeExposure,BackgroundActionPreauth:VSA.BackgroundActionPreauth,ClickPreauth:XSA.ClickPreauth,InputPreauth:JSA.InputPreauth,SignupCookiePresencePreauth:WSA.SignupCookiePresencePreauth,ViewPreauth:QSA.ViewPreauth}});var Dd=RA(Ws=>{"use strict";var aQj=Ws&&Ws.__createBinding||(Object.create?function(A,j,e,t){t===void 0&&(t=e);var r=Object.getOwnPropertyDescriptor(j,e);(!r||("get"in r?!j.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return j[e]}}),Object.defineProperty(A,t,r)}:function(A,j,e,t){t===void 0&&(t=e),A[t]=j[e]}),nQj=Ws&&Ws.__exportStar||function(A,j){for(var e in A)e!=="default"&&!Object.prototype.hasOwnProperty.call(j,e)&&aQj(j,A,e)};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.isHighVolumeEventType=Ws.PreAuthEvents=Ws.AllEvents=Ws.AllContexts=void 0;var oQj=tSA();Object.defineProperty(Ws,"AllContexts",{enumerable:!0,get:function(){return oQj.AllContexts}});var c6A=YSA();Object.defineProperty(Ws,"AllEvents",{enumerable:!0,get:function(){return c6A.AllEvents}});Object.defineProperty(Ws,"PreAuthEvents",{enumerable:!0,get:function(){return c6A.PreAuthEvents}});Object.defineProperty(Ws,"isHighVolumeEventType",{enumerable:!0,get:function(){return c6A.isHighVolumeEventType}});nQj(Ra(),Ws)});var V6A=RA((wP,_b)=>{var hQj=200,LHA="__lodash_hash_undefined__",zHA=9007199254740991,H6A="[object Arguments]",qQj="[object Array]",UHA="[object Boolean]",VHA="[object Date]",xQj="[object Error]",M6A="[object Function]",XHA="[object GeneratorFunction]",vM="[object Map]",JHA="[object Number]",K6A="[object Object]",OHA="[object Promise]",WHA="[object RegExp]",GM="[object Set]",QHA="[object String]",YHA="[object Symbol]",R6A="[object WeakMap]",ZHA="[object ArrayBuffer]",fM="[object DataView]",AMA="[object Float32Array]",jMA="[object Float64Array]",eMA="[object Int8Array]",tMA="[object Int16Array]",rMA="[object Int32Array]",aMA="[object Uint8Array]",nMA="[object Uint8ClampedArray]",oMA="[object Uint16Array]",iMA="[object Uint32Array]",vQj=/[\\^$.*+?()[\]{}|]/g,GQj=/\w*$/,fQj=/^\[object .+?Constructor\]$/,FQj=/^(?:0|[1-9]\d*)$/,b6={};b6[H6A]=b6[qQj]=b6[ZHA]=b6[fM]=b6[UHA]=b6[VHA]=b6[AMA]=b6[jMA]=b6[eMA]=b6[tMA]=b6[rMA]=b6[vM]=b6[JHA]=b6[K6A]=b6[WHA]=b6[GM]=b6[QHA]=b6[YHA]=b6[aMA]=b6[nMA]=b6[oMA]=b6[iMA]=!0;b6[xQj]=b6[M6A]=b6[R6A]=!1;var bQj=typeof global=="object"&&global&&global.Object===Object&&global,yQj=typeof self=="object"&&self&&self.Object===Object&&self,Gm=bQj||yQj||Function("return this")(),sMA=typeof wP=="object"&&wP&&!wP.nodeType&&wP,RHA=sMA&&typeof _b=="object"&&_b&&!_b.nodeType&&_b,$Qj=RHA&&RHA.exports===sMA;function wQj(A,j){return A.set(j[0],j[1]),A}function IQj(A,j){return A.add(j),A}function PQj(A,j){for(var e=-1,t=A?A.length:0;++e<t&&j(A[e],e,A)!==!1;);return A}function OQj(A,j){for(var e=-1,t=j.length,r=A.length;++e<t;)A[r+e]=j[e];return A}function lMA(A,j,e,t){var r=-1,a=A?A.length:0;for(t&&a&&(e=A[++r]);++r<a;)e=j(e,A[r],r,A);return e}function RQj(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}function DQj(A,j){return A?.[j]}function cMA(A){var j=!1;if(A!=null&&typeof A.toString!="function")try{j=!!(A+"")}catch{}return j}function DHA(A){var j=-1,e=Array(A.size);return A.forEach(function(t,r){e[++j]=[r,t]}),e}function N6A(A,j){return function(e){return A(j(e))}}function THA(A){var j=-1,e=Array(A.size);return A.forEach(function(t){e[++j]=t}),e}var TQj=Array.prototype,CQj=Function.prototype,FM=Object.prototype,O6A=Gm["__core-js_shared__"],CHA=function(){var A=/[^.]+$/.exec(O6A&&O6A.keys&&O6A.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),dMA=CQj.toString,jh=FM.hasOwnProperty,bM=FM.toString,_Qj=RegExp("^"+dMA.call(jh).replace(vQj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_HA=$Qj?Gm.Buffer:void 0,SHA=Gm.Symbol,HHA=Gm.Uint8Array,SQj=N6A(Object.getPrototypeOf,Object),HQj=Object.create,MQj=FM.propertyIsEnumerable,KQj=TQj.splice,MHA=Object.getOwnPropertySymbols,NQj=_HA?_HA.isBuffer:void 0,LQj=N6A(Object.keys,Object),D6A=Mb(Gm,"DataView"),IP=Mb(Gm,"Map"),T6A=Mb(Gm,"Promise"),C6A=Mb(Gm,"Set"),_6A=Mb(Gm,"WeakMap"),PP=Mb(Object,"create"),zQj=ov(D6A),UQj=ov(IP),VQj=ov(T6A),XQj=ov(C6A),JQj=ov(_6A),KHA=SHA?SHA.prototype:void 0,NHA=KHA?KHA.valueOf:void 0;function nv(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function WQj(){this.__data__=PP?PP(null):{}}function QQj(A){return this.has(A)&&delete this.__data__[A]}function YQj(A){var j=this.__data__;if(PP){var e=j[A];return e===LHA?void 0:e}return jh.call(j,A)?j[A]:void 0}function ZQj(A){var j=this.__data__;return PP?j[A]!==void 0:jh.call(j,A)}function AYj(A,j){var e=this.__data__;return e[A]=PP&&j===void 0?LHA:j,this}nv.prototype.clear=WQj;nv.prototype.delete=QQj;nv.prototype.get=YQj;nv.prototype.has=ZQj;nv.prototype.set=AYj;function fm(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function jYj(){this.__data__=[]}function eYj(A){var j=this.__data__,e=yM(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():KQj.call(j,e,1),!0}function tYj(A){var j=this.__data__,e=yM(j,A);return e<0?void 0:j[e][1]}function rYj(A){return yM(this.__data__,A)>-1}function aYj(A,j){var e=this.__data__,t=yM(e,A);return t<0?e.push([A,j]):e[t][1]=j,this}fm.prototype.clear=jYj;fm.prototype.delete=eYj;fm.prototype.get=tYj;fm.prototype.has=rYj;fm.prototype.set=aYj;function Sb(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function nYj(){this.__data__={hash:new nv,map:new(IP||fm),string:new nv}}function oYj(A){return $M(this,A).delete(A)}function iYj(A){return $M(this,A).get(A)}function sYj(A){return $M(this,A).has(A)}function lYj(A,j){return $M(this,A).set(A,j),this}Sb.prototype.clear=nYj;Sb.prototype.delete=oYj;Sb.prototype.get=iYj;Sb.prototype.has=sYj;Sb.prototype.set=lYj;function Hb(A){this.__data__=new fm(A)}function cYj(){this.__data__=new fm}function dYj(A){return this.__data__.delete(A)}function kYj(A){return this.__data__.get(A)}function uYj(A){return this.__data__.has(A)}function EYj(A,j){var e=this.__data__;if(e instanceof fm){var t=e.__data__;if(!IP||t.length<hQj-1)return t.push([A,j]),this;e=this.__data__=new Sb(t)}return e.set(A,j),this}Hb.prototype.clear=cYj;Hb.prototype.delete=dYj;Hb.prototype.get=kYj;Hb.prototype.has=uYj;Hb.prototype.set=EYj;function pYj(A,j){var e=z6A(A)||HYj(A)?RQj(A.length,String):[],t=e.length,r=!!t;for(var a in A)(j||jh.call(A,a))&&!(r&&(a=="length"||TYj(a,t)))&&e.push(a);return e}function kMA(A,j,e){var t=A[j];(!(jh.call(A,j)&&mMA(t,e))||e===void 0&&!(j in A))&&(A[j]=e)}function yM(A,j){for(var e=A.length;e--;)if(mMA(A[e][0],j))return e;return-1}function mYj(A,j){return A&&uMA(j,U6A(j),A)}function S6A(A,j,e,t,r,a,n){var o;if(t&&(o=a?t(A,r,a,n):t(A)),o!==void 0)return o;if(!wM(A))return A;var i=z6A(A);if(i){if(o=OYj(A),!j)return wYj(A,o)}else{var s=av(A),l=s==M6A||s==XHA;if(KYj(A))return vYj(A,j);if(s==K6A||s==H6A||l&&!a){if(cMA(A))return a?A:{};if(o=RYj(l?{}:A),!j)return IYj(A,mYj(o,A))}else{if(!b6[s])return a?A:{};o=DYj(A,s,S6A,j)}}n||(n=new Hb);var c=n.get(A);if(c)return c;if(n.set(A,o),!i)var k=e?PYj(A):U6A(A);return PQj(k||A,function(u,m){k&&(m=u,u=A[m]),kMA(o,m,S6A(u,j,e,t,m,A,n))}),o}function BYj(A){return wM(A)?HQj(A):{}}function gYj(A,j,e){var t=j(A);return z6A(A)?t:OQj(t,e(A))}function hYj(A){return bM.call(A)}function qYj(A){if(!wM(A)||_Yj(A))return!1;var j=gMA(A)||cMA(A)?_Qj:fQj;return j.test(ov(A))}function xYj(A){if(!pMA(A))return LQj(A);var j=[];for(var e in Object(A))jh.call(A,e)&&e!="constructor"&&j.push(e);return j}function vYj(A,j){if(j)return A.slice();var e=new A.constructor(A.length);return A.copy(e),e}function L6A(A){var j=new A.constructor(A.byteLength);return new HHA(j).set(new HHA(A)),j}function GYj(A,j){var e=j?L6A(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.byteLength)}function fYj(A,j,e){var t=j?e(DHA(A),!0):DHA(A);return lMA(t,wQj,new A.constructor)}function FYj(A){var j=new A.constructor(A.source,GQj.exec(A));return j.lastIndex=A.lastIndex,j}function bYj(A,j,e){var t=j?e(THA(A),!0):THA(A);return lMA(t,IQj,new A.constructor)}function yYj(A){return NHA?Object(NHA.call(A)):{}}function $Yj(A,j){var e=j?L6A(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.length)}function wYj(A,j){var e=-1,t=A.length;for(j||(j=Array(t));++e<t;)j[e]=A[e];return j}function uMA(A,j,e,t){e||(e={});for(var r=-1,a=j.length;++r<a;){var n=j[r],o=t?t(e[n],A[n],n,e,A):void 0;kMA(e,n,o===void 0?A[n]:o)}return e}function IYj(A,j){return uMA(A,EMA(A),j)}function PYj(A){return gYj(A,U6A,EMA)}function $M(A,j){var e=A.__data__;return CYj(j)?e[typeof j=="string"?"string":"hash"]:e.map}function Mb(A,j){var e=DQj(A,j);return qYj(e)?e:void 0}var EMA=MHA?N6A(MHA,Object):zYj,av=hYj;(D6A&&av(new D6A(new ArrayBuffer(1)))!=fM||IP&&av(new IP)!=vM||T6A&&av(T6A.resolve())!=OHA||C6A&&av(new C6A)!=GM||_6A&&av(new _6A)!=R6A)&&(av=function(A){var j=bM.call(A),e=j==K6A?A.constructor:void 0,t=e?ov(e):void 0;if(t)switch(t){case zQj:return fM;case UQj:return vM;case VQj:return OHA;case XQj:return GM;case JQj:return R6A}return j});function OYj(A){var j=A.length,e=A.constructor(j);return j&&typeof A[0]=="string"&&jh.call(A,"index")&&(e.index=A.index,e.input=A.input),e}function RYj(A){return typeof A.constructor=="function"&&!pMA(A)?BYj(SQj(A)):{}}function DYj(A,j,e,t){var r=A.constructor;switch(j){case ZHA:return L6A(A);case UHA:case VHA:return new r(+A);case fM:return GYj(A,t);case AMA:case jMA:case eMA:case tMA:case rMA:case aMA:case nMA:case oMA:case iMA:return $Yj(A,t);case vM:return fYj(A,t,e);case JHA:case QHA:return new r(A);case WHA:return FYj(A);case GM:return bYj(A,t,e);case YHA:return yYj(A)}}function TYj(A,j){return j=j??zHA,!!j&&(typeof A=="number"||FQj.test(A))&&A>-1&&A%1==0&&A<j}function CYj(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}function _Yj(A){return!!CHA&&CHA in A}function pMA(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||FM;return A===e}function ov(A){if(A!=null){try{return dMA.call(A)}catch{}try{return A+""}catch{}}return""}function SYj(A){return S6A(A,!0,!0)}function mMA(A,j){return A===j||A!==A&&j!==j}function HYj(A){return MYj(A)&&jh.call(A,"callee")&&(!MQj.call(A,"callee")||bM.call(A)==H6A)}var z6A=Array.isArray;function BMA(A){return A!=null&&NYj(A.length)&&!gMA(A)}function MYj(A){return LYj(A)&&BMA(A)}var KYj=NQj||UYj;function gMA(A){var j=wM(A)?bM.call(A):"";return j==M6A||j==XHA}function NYj(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=zHA}function wM(A){var j=typeof A;return!!A&&(j=="object"||j=="function")}function LYj(A){return!!A&&typeof A=="object"}function U6A(A){return BMA(A)?pYj(A):xYj(A)}function zYj(){return[]}function UYj(){return!1}_b.exports=SYj});var iK=RA((zP,Jb)=>{var pZj=200,RnA="__lodash_hash_undefined__",rK=1,SKA=2,HKA=9007199254740991,QM="[object Arguments]",bnA="[object Array]",mZj="[object AsyncFunction]",MKA="[object Boolean]",KKA="[object Date]",NKA="[object Error]",LKA="[object Function]",BZj="[object GeneratorFunction]",YM="[object Map]",zKA="[object Number]",gZj="[object Null]",Xb="[object Object]",yKA="[object Promise]",hZj="[object Proxy]",UKA="[object RegExp]",ZM="[object Set]",VKA="[object String]",qZj="[object Symbol]",xZj="[object Undefined]",ynA="[object WeakMap]",XKA="[object ArrayBuffer]",AK="[object DataView]",vZj="[object Float32Array]",GZj="[object Float64Array]",fZj="[object Int8Array]",FZj="[object Int16Array]",bZj="[object Int32Array]",yZj="[object Uint8Array]",$Zj="[object Uint8ClampedArray]",wZj="[object Uint16Array]",IZj="[object Uint32Array]",PZj=/[\\^$.*+?()[\]{}|]/g,OZj=/^\[object .+?Constructor\]$/,RZj=/^(?:0|[1-9]\d*)$/,N6={};N6[vZj]=N6[GZj]=N6[fZj]=N6[FZj]=N6[bZj]=N6[yZj]=N6[$Zj]=N6[wZj]=N6[IZj]=!0;N6[QM]=N6[bnA]=N6[XKA]=N6[MKA]=N6[AK]=N6[KKA]=N6[NKA]=N6[LKA]=N6[YM]=N6[zKA]=N6[Xb]=N6[UKA]=N6[ZM]=N6[VKA]=N6[ynA]=!1;var JKA=typeof global=="object"&&global&&global.Object===Object&&global,DZj=typeof self=="object"&&self&&self.Object===Object&&self,Im=JKA||DZj||Function("return this")(),WKA=typeof zP=="object"&&zP&&!zP.nodeType&&zP,$KA=WKA&&typeof Jb=="object"&&Jb&&!Jb.nodeType&&Jb,QKA=$KA&&$KA.exports===WKA,GnA=QKA&&JKA.process,wKA=function(){try{return GnA&&GnA.binding&&GnA.binding("util")}catch{}}(),IKA=wKA&&wKA.isTypedArray;function TZj(A,j){for(var e=-1,t=A==null?0:A.length,r=0,a=[];++e<t;){var n=A[e];j(n,e,A)&&(a[r++]=n)}return a}function CZj(A,j){for(var e=-1,t=j.length,r=A.length;++e<t;)A[r+e]=j[e];return A}function _Zj(A,j){for(var e=-1,t=A==null?0:A.length;++e<t;)if(j(A[e],e,A))return!0;return!1}function SZj(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}function HZj(A){return function(j){return A(j)}}function MZj(A,j){return A.has(j)}function KZj(A,j){return A?.[j]}function NZj(A){var j=-1,e=Array(A.size);return A.forEach(function(t,r){e[++j]=[r,t]}),e}function LZj(A,j){return function(e){return A(j(e))}}function zZj(A){var j=-1,e=Array(A.size);return A.forEach(function(t){e[++j]=t}),e}var UZj=Array.prototype,VZj=Function.prototype,aK=Object.prototype,fnA=Im["__core-js_shared__"],YKA=VZj.toString,IE=aK.hasOwnProperty,PKA=function(){var A=/[^.]+$/.exec(fnA&&fnA.keys&&fnA.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),ZKA=aK.toString,XZj=RegExp("^"+YKA.call(IE).replace(PZj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),OKA=QKA?Im.Buffer:void 0,jK=Im.Symbol,RKA=Im.Uint8Array,ANA=aK.propertyIsEnumerable,JZj=UZj.splice,lv=jK?jK.toStringTag:void 0,DKA=Object.getOwnPropertySymbols,WZj=OKA?OKA.isBuffer:void 0,QZj=LZj(Object.keys,Object),$nA=Wb(Im,"DataView"),UP=Wb(Im,"Map"),wnA=Wb(Im,"Promise"),InA=Wb(Im,"Set"),PnA=Wb(Im,"WeakMap"),VP=Wb(Object,"create"),YZj=kv($nA),ZZj=kv(UP),AAe=kv(wnA),jAe=kv(InA),eAe=kv(PnA),TKA=jK?jK.prototype:void 0,FnA=TKA?TKA.valueOf:void 0;function cv(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function tAe(){this.__data__=VP?VP(null):{},this.size=0}function rAe(A){var j=this.has(A)&&delete this.__data__[A];return this.size-=j?1:0,j}function aAe(A){var j=this.__data__;if(VP){var e=j[A];return e===RnA?void 0:e}return IE.call(j,A)?j[A]:void 0}function nAe(A){var j=this.__data__;return VP?j[A]!==void 0:IE.call(j,A)}function oAe(A,j){var e=this.__data__;return this.size+=this.has(A)?0:1,e[A]=VP&&j===void 0?RnA:j,this}cv.prototype.clear=tAe;cv.prototype.delete=rAe;cv.prototype.get=aAe;cv.prototype.has=nAe;cv.prototype.set=oAe;function Pm(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function iAe(){this.__data__=[],this.size=0}function sAe(A){var j=this.__data__,e=nK(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():JZj.call(j,e,1),--this.size,!0}function lAe(A){var j=this.__data__,e=nK(j,A);return e<0?void 0:j[e][1]}function cAe(A){return nK(this.__data__,A)>-1}function dAe(A,j){var e=this.__data__,t=nK(e,A);return t<0?(++this.size,e.push([A,j])):e[t][1]=j,this}Pm.prototype.clear=iAe;Pm.prototype.delete=sAe;Pm.prototype.get=lAe;Pm.prototype.has=cAe;Pm.prototype.set=dAe;function dv(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function kAe(){this.size=0,this.__data__={hash:new cv,map:new(UP||Pm),string:new cv}}function uAe(A){var j=oK(this,A).delete(A);return this.size-=j?1:0,j}function EAe(A){return oK(this,A).get(A)}function pAe(A){return oK(this,A).has(A)}function mAe(A,j){var e=oK(this,A),t=e.size;return e.set(A,j),this.size+=e.size==t?0:1,this}dv.prototype.clear=kAe;dv.prototype.delete=uAe;dv.prototype.get=EAe;dv.prototype.has=pAe;dv.prototype.set=mAe;function eK(A){var j=-1,e=A==null?0:A.length;for(this.__data__=new dv;++j<e;)this.add(A[j])}function BAe(A){return this.__data__.set(A,RnA),this}function gAe(A){return this.__data__.has(A)}eK.prototype.add=eK.prototype.push=BAe;eK.prototype.has=gAe;function ih(A){var j=this.__data__=new Pm(A);this.size=j.size}function hAe(){this.__data__=new Pm,this.size=0}function qAe(A){var j=this.__data__,e=j.delete(A);return this.size=j.size,e}function xAe(A){return this.__data__.get(A)}function vAe(A){return this.__data__.has(A)}function GAe(A,j){var e=this.__data__;if(e instanceof Pm){var t=e.__data__;if(!UP||t.length<pZj-1)return t.push([A,j]),this.size=++e.size,this;e=this.__data__=new dv(t)}return e.set(A,j),this.size=e.size,this}ih.prototype.clear=hAe;ih.prototype.delete=qAe;ih.prototype.get=xAe;ih.prototype.has=vAe;ih.prototype.set=GAe;function fAe(A,j){var e=tK(A),t=!e&&HAe(A),r=!e&&!t&&OnA(A),a=!e&&!t&&!r&&oNA(A),n=e||t||r||a,o=n?SZj(A.length,String):[],i=o.length;for(var s in A)(j||IE.call(A,s))&&!(n&&(s=="length"||r&&(s=="offset"||s=="parent")||a&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||DAe(s,i)))&&o.push(s);return o}function nK(A,j){for(var e=A.length;e--;)if(tNA(A[e][0],j))return e;return-1}function FAe(A,j,e){var t=j(A);return tK(A)?t:CZj(t,e(A))}function JP(A){return A==null?A===void 0?xZj:gZj:lv&&lv in Object(A)?OAe(A):SAe(A)}function CKA(A){return XP(A)&&JP(A)==QM}function jNA(A,j,e,t,r){return A===j?!0:A==null||j==null||!XP(A)&&!XP(j)?A!==A&&j!==j:bAe(A,j,e,t,jNA,r)}function bAe(A,j,e,t,r,a){var n=tK(A),o=tK(j),i=n?bnA:oh(A),s=o?bnA:oh(j);i=i==QM?Xb:i,s=s==QM?Xb:s;var l=i==Xb,c=s==Xb,k=i==s;if(k&&OnA(A)){if(!OnA(j))return!1;n=!0,l=!1}if(k&&!l)return a||(a=new ih),n||oNA(A)?eNA(A,j,e,t,r,a):IAe(A,j,i,e,t,r,a);if(!(e&rK)){var u=l&&IE.call(A,"__wrapped__"),m=c&&IE.call(j,"__wrapped__");if(u||m){var F=u?A.value():A,S=m?j.value():j;return a||(a=new ih),r(F,S,e,t,a)}}return k?(a||(a=new ih),PAe(A,j,e,t,r,a)):!1}function yAe(A){if(!nNA(A)||CAe(A))return!1;var j=rNA(A)?XZj:OZj;return j.test(kv(A))}function $Ae(A){return XP(A)&&aNA(A.length)&&!!N6[JP(A)]}function wAe(A){if(!_Ae(A))return QZj(A);var j=[];for(var e in Object(A))IE.call(A,e)&&e!="constructor"&&j.push(e);return j}function eNA(A,j,e,t,r,a){var n=e&rK,o=A.length,i=j.length;if(o!=i&&!(n&&i>o))return!1;var s=a.get(A);if(s&&a.get(j))return s==j;var l=-1,c=!0,k=e&SKA?new eK:void 0;for(a.set(A,j),a.set(j,A);++l<o;){var u=A[l],m=j[l];if(t)var F=n?t(m,u,l,j,A,a):t(u,m,l,A,j,a);if(F!==void 0){if(F)continue;c=!1;break}if(k){if(!_Zj(j,function(S,G){if(!MZj(k,G)&&(u===S||r(u,S,e,t,a)))return k.push(G)})){c=!1;break}}else if(!(u===m||r(u,m,e,t,a))){c=!1;break}}return a.delete(A),a.delete(j),c}function IAe(A,j,e,t,r,a,n){switch(e){case AK:if(A.byteLength!=j.byteLength||A.byteOffset!=j.byteOffset)return!1;A=A.buffer,j=j.buffer;case XKA:return!(A.byteLength!=j.byteLength||!a(new RKA(A),new RKA(j)));case MKA:case KKA:case zKA:return tNA(+A,+j);case NKA:return A.name==j.name&&A.message==j.message;case UKA:case VKA:return A==j+"";case YM:var o=NZj;case ZM:var i=t&rK;if(o||(o=zZj),A.size!=j.size&&!i)return!1;var s=n.get(A);if(s)return s==j;t|=SKA,n.set(A,j);var l=eNA(o(A),o(j),t,r,a,n);return n.delete(A),l;case qZj:if(FnA)return FnA.call(A)==FnA.call(j)}return!1}function PAe(A,j,e,t,r,a){var n=e&rK,o=_KA(A),i=o.length,s=_KA(j),l=s.length;if(i!=l&&!n)return!1;for(var c=i;c--;){var k=o[c];if(!(n?k in j:IE.call(j,k)))return!1}var u=a.get(A);if(u&&a.get(j))return u==j;var m=!0;a.set(A,j),a.set(j,A);for(var F=n;++c<i;){k=o[c];var S=A[k],G=j[k];if(t)var x=n?t(G,S,k,j,A,a):t(S,G,k,A,j,a);if(!(x===void 0?S===G||r(S,G,e,t,a):x)){m=!1;break}F||(F=k=="constructor")}if(m&&!F){var R=A.constructor,P=j.constructor;R!=P&&"constructor"in A&&"constructor"in j&&!(typeof R=="function"&&R instanceof R&&typeof P=="function"&&P instanceof P)&&(m=!1)}return a.delete(A),a.delete(j),m}function _KA(A){return FAe(A,NAe,RAe)}function oK(A,j){var e=A.__data__;return TAe(j)?e[typeof j=="string"?"string":"hash"]:e.map}function Wb(A,j){var e=KZj(A,j);return yAe(e)?e:void 0}function OAe(A){var j=IE.call(A,lv),e=A[lv];try{A[lv]=void 0;var t=!0}catch{}var r=ZKA.call(A);return t&&(j?A[lv]=e:delete A[lv]),r}var RAe=DKA?function(A){return A==null?[]:(A=Object(A),TZj(DKA(A),function(j){return ANA.call(A,j)}))}:LAe,oh=JP;($nA&&oh(new $nA(new ArrayBuffer(1)))!=AK||UP&&oh(new UP)!=YM||wnA&&oh(wnA.resolve())!=yKA||InA&&oh(new InA)!=ZM||PnA&&oh(new PnA)!=ynA)&&(oh=function(A){var j=JP(A),e=j==Xb?A.constructor:void 0,t=e?kv(e):"";if(t)switch(t){case YZj:return AK;case ZZj:return YM;case AAe:return yKA;case jAe:return ZM;case eAe:return ynA}return j});function DAe(A,j){return j=j??HKA,!!j&&(typeof A=="number"||RZj.test(A))&&A>-1&&A%1==0&&A<j}function TAe(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}function CAe(A){return!!PKA&&PKA in A}function _Ae(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||aK;return A===e}function SAe(A){return ZKA.call(A)}function kv(A){if(A!=null){try{return YKA.call(A)}catch{}try{return A+""}catch{}}return""}function tNA(A,j){return A===j||A!==A&&j!==j}var HAe=CKA(function(){return arguments}())?CKA:function(A){return XP(A)&&IE.call(A,"callee")&&!ANA.call(A,"callee")},tK=Array.isArray;function MAe(A){return A!=null&&aNA(A.length)&&!rNA(A)}var OnA=WZj||zAe;function KAe(A,j){return jNA(A,j)}function rNA(A){if(!nNA(A))return!1;var j=JP(A);return j==LKA||j==BZj||j==mZj||j==hZj}function aNA(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=HKA}function nNA(A){var j=typeof A;return A!=null&&(j=="object"||j=="function")}function XP(A){return A!=null&&typeof A=="object"}var oNA=IKA?HZj(IKA):$Ae;function NAe(A){return MAe(A)?fAe(A):wAe(A)}function LAe(){return[]}function zAe(){return!1}Jb.exports=KAe});var mUA=RA((_8,b0)=>{var VzA=200,a6e="Expected a function",CiA="__lodash_hash_undefined__",A5=1,$0=2,_iA=1/0,XzA=9007199254740991,JN="[object Arguments]",wiA="[object Array]",JzA="[object Boolean]",WzA="[object Date]",QzA="[object Error]",YzA="[object Function]",n6e="[object GeneratorFunction]",WN="[object Map]",ZzA="[object Number]",F0="[object Object]",_zA="[object Promise]",AUA="[object RegExp]",QN="[object Set]",jUA="[object String]",eUA="[object Symbol]",IiA="[object WeakMap]",tUA="[object ArrayBuffer]",YN="[object DataView]",o6e="[object Float32Array]",i6e="[object Float64Array]",s6e="[object Int8Array]",l6e="[object Int16Array]",c6e="[object Int32Array]",d6e="[object Uint8Array]",k6e="[object Uint8ClampedArray]",u6e="[object Uint16Array]",E6e="[object Uint32Array]",p6e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m6e=/^\w*$/,B6e=/^\./,g6e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h6e=/[\\^$.*+?()[\]{}|]/g,q6e=/\\(\\)?/g,x6e=/^\[object .+?Constructor\]$/,v6e=/^(?:0|[1-9]\d*)$/,z6={};z6[o6e]=z6[i6e]=z6[s6e]=z6[l6e]=z6[c6e]=z6[d6e]=z6[k6e]=z6[u6e]=z6[E6e]=!0;z6[JN]=z6[wiA]=z6[tUA]=z6[JzA]=z6[YN]=z6[WzA]=z6[QzA]=z6[YzA]=z6[WN]=z6[ZzA]=z6[F0]=z6[AUA]=z6[QN]=z6[jUA]=z6[IiA]=!1;var rUA=typeof global=="object"&&global&&global.Object===Object&&global,G6e=typeof self=="object"&&self&&self.Object===Object&&self,xh=rUA||G6e||Function("return this")(),aUA=typeof _8=="object"&&_8&&!_8.nodeType&&_8,SzA=aUA&&typeof b0=="object"&&b0&&!b0.nodeType&&b0,f6e=SzA&&SzA.exports===aUA,HzA=f6e&&rUA.process,MzA=function(){try{return HzA&&HzA.binding("util")}catch{}}(),KzA=MzA&&MzA.isTypedArray;function F6e(A,j){var e=A?A.length:0;return!!e&&w6e(A,j,0)>-1}function b6e(A,j,e){for(var t=-1,r=A?A.length:0;++t<r;)if(e(j,A[t]))return!0;return!1}function y6e(A,j){for(var e=-1,t=A?A.length:0;++e<t;)if(j(A[e],e,A))return!0;return!1}function $6e(A,j,e,t){for(var r=A.length,a=e+(t?1:-1);t?a--:++a<r;)if(j(A[a],a,A))return a;return-1}function w6e(A,j,e){if(j!==j)return $6e(A,I6e,e);for(var t=e-1,r=A.length;++t<r;)if(A[t]===j)return t;return-1}function I6e(A){return A!==A}function P6e(A){return function(j){return j?.[A]}}function O6e(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}function R6e(A){return function(j){return A(j)}}function D6e(A,j){return A.has(j)}function T6e(A,j){return A?.[j]}function PiA(A){var j=!1;if(A!=null&&typeof A.toString!="function")try{j=!!(A+"")}catch{}return j}function C6e(A){var j=-1,e=Array(A.size);return A.forEach(function(t,r){e[++j]=[r,t]}),e}function _6e(A,j){return function(e){return A(j(e))}}function SiA(A){var j=-1,e=Array(A.size);return A.forEach(function(t){e[++j]=t}),e}var S6e=Array.prototype,H6e=Function.prototype,j5=Object.prototype,yiA=xh["__core-js_shared__"],NzA=function(){var A=/[^.]+$/.exec(yiA&&yiA.keys&&yiA.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),nUA=H6e.toString,Wm=j5.hasOwnProperty,w0=j5.toString,M6e=RegExp("^"+nUA.call(Wm).replace(h6e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),LzA=xh.Symbol,zzA=xh.Uint8Array,K6e=j5.propertyIsEnumerable,N6e=S6e.splice,L6e=_6e(Object.keys,Object),OiA=I0(xh,"DataView"),S8=I0(xh,"Map"),RiA=I0(xh,"Promise"),y0=I0(xh,"Set"),DiA=I0(xh,"WeakMap"),H8=I0(Object,"create"),z6e=Tv(OiA),U6e=Tv(S8),V6e=Tv(RiA),X6e=Tv(y0),J6e=Tv(DiA),ZN=LzA?LzA.prototype:void 0,$iA=ZN?ZN.valueOf:void 0,UzA=ZN?ZN.toString:void 0;function Rv(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function W6e(){this.__data__=H8?H8(null):{}}function Q6e(A){return this.has(A)&&delete this.__data__[A]}function Y6e(A){var j=this.__data__;if(H8){var e=j[A];return e===CiA?void 0:e}return Wm.call(j,A)?j[A]:void 0}function Z6e(A){var j=this.__data__;return H8?j[A]!==void 0:Wm.call(j,A)}function Ane(A,j){var e=this.__data__;return e[A]=H8&&j===void 0?CiA:j,this}Rv.prototype.clear=W6e;Rv.prototype.delete=Q6e;Rv.prototype.get=Y6e;Rv.prototype.has=Z6e;Rv.prototype.set=Ane;function Qm(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function jne(){this.__data__=[]}function ene(A){var j=this.__data__,e=e5(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():N6e.call(j,e,1),!0}function tne(A){var j=this.__data__,e=e5(j,A);return e<0?void 0:j[e][1]}function rne(A){return e5(this.__data__,A)>-1}function ane(A,j){var e=this.__data__,t=e5(e,A);return t<0?e.push([A,j]):e[t][1]=j,this}Qm.prototype.clear=jne;Qm.prototype.delete=ene;Qm.prototype.get=tne;Qm.prototype.has=rne;Qm.prototype.set=ane;function Ym(A){var j=-1,e=A?A.length:0;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function nne(){this.__data__={hash:new Rv,map:new(S8||Qm),string:new Rv}}function one(A){return t5(this,A).delete(A)}function ine(A){return t5(this,A).get(A)}function sne(A){return t5(this,A).has(A)}function lne(A,j){return t5(this,A).set(A,j),this}Ym.prototype.clear=nne;Ym.prototype.delete=one;Ym.prototype.get=ine;Ym.prototype.has=sne;Ym.prototype.set=lne;function M8(A){var j=-1,e=A?A.length:0;for(this.__data__=new Ym;++j<e;)this.add(A[j])}function cne(A){return this.__data__.set(A,CiA),this}function dne(A){return this.__data__.has(A)}M8.prototype.add=M8.prototype.push=cne;M8.prototype.has=dne;function Jm(A){this.__data__=new Qm(A)}function kne(){this.__data__=new Qm}function une(A){return this.__data__.delete(A)}function Ene(A){return this.__data__.get(A)}function pne(A){return this.__data__.has(A)}function mne(A,j){var e=this.__data__;if(e instanceof Qm){var t=e.__data__;if(!S8||t.length<VzA-1)return t.push([A,j]),this;e=this.__data__=new Ym(t)}return e.set(A,j),this}Jm.prototype.clear=kne;Jm.prototype.delete=une;Jm.prototype.get=Ene;Jm.prototype.has=pne;Jm.prototype.set=mne;function Bne(A,j){var e=Dv(A)||uUA(A)?O6e(A.length,String):[],t=e.length,r=!!t;for(var a in A)(j||Wm.call(A,a))&&!(r&&(a=="length"||lUA(a,t)))&&e.push(a);return e}function e5(A,j){for(var e=A.length;e--;)if(kUA(A[e][0],j))return e;return-1}function oUA(A,j){j=r5(j,A)?[j]:iUA(j);for(var e=0,t=j.length;A!=null&&e<t;)A=A[a5(j[e++])];return e&&e==t?A:void 0}function gne(A){return w0.call(A)}function hne(A,j){return A!=null&&j in Object(A)}function HiA(A,j,e,t,r){return A===j?!0:A==null||j==null||!n5(A)&&!o5(j)?A!==A&&j!==j:qne(A,j,HiA,e,t,r)}function qne(A,j,e,t,r,a){var n=Dv(A),o=Dv(j),i=wiA,s=wiA;n||(i=qh(A),i=i==JN?F0:i),o||(s=qh(j),s=s==JN?F0:s);var l=i==F0&&!PiA(A),c=s==F0&&!PiA(j),k=i==s;if(k&&!l)return a||(a=new Jm),n||Nne(A)?sUA(A,j,e,t,r,a):One(A,j,i,e,t,r,a);if(!(r&$0)){var u=l&&Wm.call(A,"__wrapped__"),m=c&&Wm.call(j,"__wrapped__");if(u||m){var F=u?A.value():A,S=m?j.value():j;return a||(a=new Jm),e(F,S,t,r,a)}}return k?(a||(a=new Jm),Rne(A,j,e,t,r,a)):!1}function xne(A,j,e,t){var r=e.length,a=r,n=!t;if(A==null)return!a;for(A=Object(A);r--;){var o=e[r];if(n&&o[2]?o[1]!==A[o[0]]:!(o[0]in A))return!1}for(;++r<a;){o=e[r];var i=o[0],s=A[i],l=o[1];if(n&&o[2]){if(s===void 0&&!(i in A))return!1}else{var c=new Jm;if(t)var k=t(s,l,i,A,j,c);if(!(k===void 0?HiA(l,s,t,A5|$0,c):k))return!1}}return!0}function vne(A){if(!n5(A)||_ne(A))return!1;var j=pUA(A)||PiA(A)?M6e:x6e;return j.test(Tv(A))}function Gne(A){return o5(A)&&KiA(A.length)&&!!z6[w0.call(A)]}function fne(A){return typeof A=="function"?A:A==null?Vne:typeof A=="object"?Dv(A)?yne(A[0],A[1]):bne(A):Jne(A)}function Fne(A){if(!Sne(A))return L6e(A);var j=[];for(var e in Object(A))Wm.call(A,e)&&e!="constructor"&&j.push(e);return j}function bne(A){var j=Dne(A);return j.length==1&&j[0][2]?dUA(j[0][0],j[0][1]):function(e){return e===A||xne(e,A,j)}}function yne(A,j){return r5(A)&&cUA(j)?dUA(a5(A),j):function(e){var t=zne(e,A);return t===void 0&&t===j?Une(e,A):HiA(j,t,void 0,A5|$0)}}function $ne(A){return function(j){return oUA(j,A)}}function wne(A){if(typeof A=="string")return A;if(NiA(A))return UzA?UzA.call(A):"";var j=A+"";return j=="0"&&1/A==-_iA?"-0":j}function Ine(A,j,e){var t=-1,r=F6e,a=A.length,n=!0,o=[],i=o;if(e)n=!1,r=b6e;else if(a>=VzA){var s=j?null:Pne(A);if(s)return SiA(s);n=!1,r=D6e,i=new M8}else i=j?[]:o;A:for(;++t<a;){var l=A[t],c=j?j(l):l;if(l=e||l!==0?l:0,n&&c===c){for(var k=i.length;k--;)if(i[k]===c)continue A;j&&i.push(c),o.push(l)}else r(i,c,e)||(i!==o&&i.push(c),o.push(l))}return o}function iUA(A){return Dv(A)?A:Hne(A)}var Pne=y0&&1/SiA(new y0([,-0]))[1]==_iA?function(A){return new y0(A)}:Xne;function sUA(A,j,e,t,r,a){var n=r&$0,o=A.length,i=j.length;if(o!=i&&!(n&&i>o))return!1;var s=a.get(A);if(s&&a.get(j))return s==j;var l=-1,c=!0,k=r&A5?new M8:void 0;for(a.set(A,j),a.set(j,A);++l<o;){var u=A[l],m=j[l];if(t)var F=n?t(m,u,l,j,A,a):t(u,m,l,A,j,a);if(F!==void 0){if(F)continue;c=!1;break}if(k){if(!y6e(j,function(S,G){if(!k.has(G)&&(u===S||e(u,S,t,r,a)))return k.add(G)})){c=!1;break}}else if(!(u===m||e(u,m,t,r,a))){c=!1;break}}return a.delete(A),a.delete(j),c}function One(A,j,e,t,r,a,n){switch(e){case YN:if(A.byteLength!=j.byteLength||A.byteOffset!=j.byteOffset)return!1;A=A.buffer,j=j.buffer;case tUA:return!(A.byteLength!=j.byteLength||!t(new zzA(A),new zzA(j)));case JzA:case WzA:case ZzA:return kUA(+A,+j);case QzA:return A.name==j.name&&A.message==j.message;case AUA:case jUA:return A==j+"";case WN:var o=C6e;case QN:var i=a&$0;if(o||(o=SiA),A.size!=j.size&&!i)return!1;var s=n.get(A);if(s)return s==j;a|=A5,n.set(A,j);var l=sUA(o(A),o(j),t,r,a,n);return n.delete(A),l;case eUA:if($iA)return $iA.call(A)==$iA.call(j)}return!1}function Rne(A,j,e,t,r,a){var n=r&$0,o=TiA(A),i=o.length,s=TiA(j),l=s.length;if(i!=l&&!n)return!1;for(var c=i;c--;){var k=o[c];if(!(n?k in j:Wm.call(j,k)))return!1}var u=a.get(A);if(u&&a.get(j))return u==j;var m=!0;a.set(A,j),a.set(j,A);for(var F=n;++c<i;){k=o[c];var S=A[k],G=j[k];if(t)var x=n?t(G,S,k,j,A,a):t(S,G,k,A,j,a);if(!(x===void 0?S===G||e(S,G,t,r,a):x)){m=!1;break}F||(F=k=="constructor")}if(m&&!F){var R=A.constructor,P=j.constructor;R!=P&&"constructor"in A&&"constructor"in j&&!(typeof R=="function"&&R instanceof R&&typeof P=="function"&&P instanceof P)&&(m=!1)}return a.delete(A),a.delete(j),m}function t5(A,j){var e=A.__data__;return Cne(j)?e[typeof j=="string"?"string":"hash"]:e.map}function Dne(A){for(var j=TiA(A),e=j.length;e--;){var t=j[e],r=A[t];j[e]=[t,r,cUA(r)]}return j}function I0(A,j){var e=T6e(A,j);return vne(e)?e:void 0}var qh=gne;(OiA&&qh(new OiA(new ArrayBuffer(1)))!=YN||S8&&qh(new S8)!=WN||RiA&&qh(RiA.resolve())!=_zA||y0&&qh(new y0)!=QN||DiA&&qh(new DiA)!=IiA)&&(qh=function(A){var j=w0.call(A),e=j==F0?A.constructor:void 0,t=e?Tv(e):void 0;if(t)switch(t){case z6e:return YN;case U6e:return WN;case V6e:return _zA;case X6e:return QN;case J6e:return IiA}return j});function Tne(A,j,e){j=r5(j,A)?[j]:iUA(j);for(var t,r=-1,n=j.length;++r<n;){var a=a5(j[r]);if(!(t=A!=null&&e(A,a)))break;A=A[a]}if(t)return t;var n=A?A.length:0;return!!n&&KiA(n)&&lUA(a,n)&&(Dv(A)||uUA(A))}function lUA(A,j){return j=j??XzA,!!j&&(typeof A=="number"||v6e.test(A))&&A>-1&&A%1==0&&A<j}function r5(A,j){if(Dv(A))return!1;var e=typeof A;return e=="number"||e=="symbol"||e=="boolean"||A==null||NiA(A)?!0:m6e.test(A)||!p6e.test(A)||j!=null&&A in Object(j)}function Cne(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}function _ne(A){return!!NzA&&NzA in A}function Sne(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||j5;return A===e}function cUA(A){return A===A&&!n5(A)}function dUA(A,j){return function(e){return e==null?!1:e[A]===j&&(j!==void 0||A in Object(e))}}var Hne=MiA(function(A){A=Lne(A);var j=[];return B6e.test(A)&&j.push(""),A.replace(g6e,function(e,t,r,a){j.push(r?a.replace(q6e,"$1"):t||e)}),j});function a5(A){if(typeof A=="string"||NiA(A))return A;var j=A+"";return j=="0"&&1/A==-_iA?"-0":j}function Tv(A){if(A!=null){try{return nUA.call(A)}catch{}try{return A+""}catch{}}return""}function Mne(A,j){return A&&A.length?Ine(A,fne(j,2)):[]}function MiA(A,j){if(typeof A!="function"||j&&typeof j!="function")throw new TypeError(a6e);var e=function(){var t=arguments,r=j?j.apply(this,t):t[0],a=e.cache;if(a.has(r))return a.get(r);var n=A.apply(this,t);return e.cache=a.set(r,n),n};return e.cache=new(MiA.Cache||Ym),e}MiA.Cache=Ym;function kUA(A,j){return A===j||A!==A&&j!==j}function uUA(A){return Kne(A)&&Wm.call(A,"callee")&&(!K6e.call(A,"callee")||w0.call(A)==JN)}var Dv=Array.isArray;function EUA(A){return A!=null&&KiA(A.length)&&!pUA(A)}function Kne(A){return o5(A)&&EUA(A)}function pUA(A){var j=n5(A)?w0.call(A):"";return j==YzA||j==n6e}function KiA(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=XzA}function n5(A){var j=typeof A;return!!A&&(j=="object"||j=="function")}function o5(A){return!!A&&typeof A=="object"}function NiA(A){return typeof A=="symbol"||o5(A)&&w0.call(A)==eUA}var Nne=KzA?R6e(KzA):Gne;function Lne(A){return A==null?"":wne(A)}function zne(A,j,e){var t=A==null?void 0:oUA(A,j);return t===void 0?e:t}function Une(A,j){return A!=null&&Tne(A,j,hne)}function TiA(A){return EUA(A)?Bne(A):Fne(A)}function Vne(A){return A}function Xne(){}function Jne(A){return r5(A)?P6e(a5(A)):$ne(A)}b0.exports=Mne});var EVA=RA((z8,QiA)=>{(function(j,e){typeof z8=="object"&&typeof QiA=="object"?QiA.exports=e():typeof define=="function"&&define.amd?define([],e):typeof z8=="object"?z8.jsQR=e():j.jsQR=e()})(typeof self<"u"?self:z8,function(){return function(A){var j={};function e(t){if(j[t])return j[t].exports;var r=j[t]={i:t,l:!1,exports:{}};return A[t].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=A,e.c=j,e.d=function(t,r,a){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=3)}([function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=function(){function r(a,n){this.width=n,this.height=a.length/n,this.data=a}return r.createEmpty=function(a,n){return new r(new Uint8ClampedArray(a*n),a)},r.prototype.get=function(a,n){return a<0||a>=this.width||n<0||n>=this.height?!1:!!this.data[n*this.width+a]},r.prototype.set=function(a,n,o){this.data[n*this.width+a]=o?1:0},r.prototype.setRegion=function(a,n,o,i,s){for(var l=n;l<n+i;l++)for(var c=a;c<a+o;c++)this.set(c,l,!!s)},r}();j.BitMatrix=t},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(2);function r(n,o){return n^o}j.addOrSubtractGF=r;var a=function(){function n(o,i,s){this.primitive=o,this.size=i,this.generatorBase=s,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var l=1,c=0;c<this.size;c++)this.expTable[c]=l,l=l*2,l>=this.size&&(l=(l^this.primitive)&this.size-1);for(var c=0;c<this.size-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new t.default(this,Uint8ClampedArray.from([0])),this.one=new t.default(this,Uint8ClampedArray.from([1]))}return n.prototype.multiply=function(o,i){return o===0||i===0?0:this.expTable[(this.logTable[o]+this.logTable[i])%(this.size-1)]},n.prototype.inverse=function(o){if(o===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[o]-1]},n.prototype.buildMonomial=function(o,i){if(o<0)throw new Error("Invalid monomial degree less than 0");if(i===0)return this.zero;var s=new Uint8ClampedArray(o+1);return s[0]=i,new t.default(this,s)},n.prototype.log=function(o){if(o===0)throw new Error("Can't take log(0)");return this.logTable[o]},n.prototype.exp=function(o){return this.expTable[o]},n}();j.default=a},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(1),r=function(){function a(n,o){if(o.length===0)throw new Error("No coefficients.");this.field=n;var i=o.length;if(i>1&&o[0]===0){for(var s=1;s<i&&o[s]===0;)s++;if(s===i)this.coefficients=n.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(i-s);for(var l=0;l<this.coefficients.length;l++)this.coefficients[l]=o[s+l]}}else this.coefficients=o}return a.prototype.degree=function(){return this.coefficients.length-1},a.prototype.isZero=function(){return this.coefficients[0]===0},a.prototype.getCoefficient=function(n){return this.coefficients[this.coefficients.length-1-n]},a.prototype.addOrSubtract=function(n){var o;if(this.isZero())return n;if(n.isZero())return this;var i=this.coefficients,s=n.coefficients;i.length>s.length&&(o=[s,i],i=o[0],s=o[1]);for(var l=new Uint8ClampedArray(s.length),c=s.length-i.length,k=0;k<c;k++)l[k]=s[k];for(var k=c;k<s.length;k++)l[k]=t.addOrSubtractGF(i[k-c],s[k]);return new a(this.field,l)},a.prototype.multiply=function(n){if(n===0)return this.field.zero;if(n===1)return this;for(var o=this.coefficients.length,i=new Uint8ClampedArray(o),s=0;s<o;s++)i[s]=this.field.multiply(this.coefficients[s],n);return new a(this.field,i)},a.prototype.multiplyPoly=function(n){if(this.isZero()||n.isZero())return this.field.zero;for(var o=this.coefficients,i=o.length,s=n.coefficients,l=s.length,c=new Uint8ClampedArray(i+l-1),k=0;k<i;k++)for(var u=o[k],m=0;m<l;m++)c[k+m]=t.addOrSubtractGF(c[k+m],this.field.multiply(u,s[m]));return new a(this.field,c)},a.prototype.multiplyByMonomial=function(n,o){if(n<0)throw new Error("Invalid degree less than 0");if(o===0)return this.field.zero;for(var i=this.coefficients.length,s=new Uint8ClampedArray(i+n),l=0;l<i;l++)s[l]=this.field.multiply(this.coefficients[l],o);return new a(this.field,s)},a.prototype.evaluateAt=function(n){var o=0;if(n===0)return this.getCoefficient(0);var i=this.coefficients.length;if(n===1)return this.coefficients.forEach(function(l){o=t.addOrSubtractGF(o,l)}),o;o=this.coefficients[0];for(var s=1;s<i;s++)o=t.addOrSubtractGF(this.field.multiply(n,o),this.coefficients[s]);return o},a}();j.default=r},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(4),r=e(5),a=e(11),n=e(12);function o(l){var c=n.locate(l);if(!c)return null;for(var k=0,u=c;k<u.length;k++){var m=u[k],F=a.extract(l,m),S=r.decode(F.matrix);if(S)return{binaryData:S.bytes,data:S.text,chunks:S.chunks,version:S.version,location:{topRightCorner:F.mappingFunction(m.dimension,0),topLeftCorner:F.mappingFunction(0,0),bottomRightCorner:F.mappingFunction(m.dimension,m.dimension),bottomLeftCorner:F.mappingFunction(0,m.dimension),topRightFinderPattern:m.topRight,topLeftFinderPattern:m.topLeft,bottomLeftFinderPattern:m.bottomLeft,bottomRightAlignmentPattern:m.alignmentPattern}}}return null}var i={inversionAttempts:"attemptBoth"};function s(l,c,k,u){u===void 0&&(u={});var m=i;Object.keys(m||{}).forEach(function(D){m[D]=u[D]||m[D]});var F=m.inversionAttempts==="attemptBoth"||m.inversionAttempts==="invertFirst",S=m.inversionAttempts==="onlyInvert"||m.inversionAttempts==="invertFirst",G=t.binarize(l,c,k,F),x=G.binarized,R=G.inverted,P=o(S?R:x);return!P&&(m.inversionAttempts==="attemptBoth"||m.inversionAttempts==="invertFirst")&&(P=o(S?x:R)),P}s.default=s,j.default=s},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(0),r=8,a=24;function n(s,l,c){return s<l?l:s>c?c:s}var o=function(){function s(l,c){this.width=l,this.data=new Uint8ClampedArray(l*c)}return s.prototype.get=function(l,c){return this.data[c*this.width+l]},s.prototype.set=function(l,c,k){this.data[c*this.width+l]=k},s}();function i(s,l,c,k){if(s.length!==l*c*4)throw new Error("Malformed data passed to binarizer.");for(var u=new o(l,c),m=0;m<l;m++)for(var F=0;F<c;F++){var S=s[(F*l+m)*4+0],G=s[(F*l+m)*4+1],x=s[(F*l+m)*4+2];u.set(m,F,.2126*S+.7152*G+.0722*x)}for(var R=Math.ceil(l/r),P=Math.ceil(c/r),D=new o(R,P),y=0;y<P;y++)for(var h=0;h<R;h++){for(var O=0,Q=1/0,AA=0,F=0;F<r;F++)for(var m=0;m<r;m++){var nA=u.get(h*r+m,y*r+F);O+=nA,Q=Math.min(Q,nA),AA=Math.max(AA,nA)}var bA=O/Math.pow(r,2);if(AA-Q<=a&&(bA=Q/2,y>0&&h>0)){var XA=(D.get(h,y-1)+2*D.get(h-1,y)+D.get(h-1,y-1))/4;Q<XA&&(bA=XA)}D.set(h,y,bA)}var dj=t.BitMatrix.createEmpty(l,c),yA=null;k&&(yA=t.BitMatrix.createEmpty(l,c));for(var y=0;y<P;y++)for(var h=0;h<R;h++){for(var tj=n(h,2,R-3),LA=n(y,2,P-3),O=0,Qj=-2;Qj<=2;Qj++)for(var Oj=-2;Oj<=2;Oj++)O+=D.get(tj+Qj,LA+Oj);for(var Ej=O/25,Qj=0;Qj<r;Qj++)for(var Oj=0;Oj<r;Oj++){var m=h*r+Qj,F=y*r+Oj,Yj=u.get(m,F);dj.set(m,F,Yj<=Ej),k&&yA.set(m,F,!(Yj<=Ej))}}return k?{binarized:dj,inverted:yA}:{binarized:dj}}j.binarize=i},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(0),r=e(6),a=e(9),n=e(10);function o(x,R){for(var P=x^R,D=0;P;)D++,P&=P-1;return D}function i(x,R){return R<<1|x}var s=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],l=[function(x){return(x.y+x.x)%2===0},function(x){return x.y%2===0},function(x){return x.x%3===0},function(x){return(x.y+x.x)%3===0},function(x){return(Math.floor(x.y/2)+Math.floor(x.x/3))%2===0},function(x){return x.x*x.y%2+x.x*x.y%3===0},function(x){return(x.y*x.x%2+x.y*x.x%3)%2===0},function(x){return((x.y+x.x)%2+x.y*x.x%3)%2===0}];function c(x){var R=17+4*x.versionNumber,P=t.BitMatrix.createEmpty(R,R);P.setRegion(0,0,9,9,!0),P.setRegion(R-8,0,8,9,!0),P.setRegion(0,R-8,9,8,!0);for(var D=0,y=x.alignmentPatternCenters;D<y.length;D++)for(var h=y[D],O=0,Q=x.alignmentPatternCenters;O<Q.length;O++){var AA=Q[O];h===6&&AA===6||h===6&&AA===R-7||h===R-7&&AA===6||P.setRegion(h-2,AA-2,5,5,!0)}return P.setRegion(6,9,1,R-17,!0),P.setRegion(9,6,R-17,1,!0),x.versionNumber>6&&(P.setRegion(R-11,0,3,6,!0),P.setRegion(0,R-11,6,3,!0)),P}function k(x,R,P){for(var D=l[P.dataMask],y=x.height,h=c(R),O=[],Q=0,AA=0,nA=!0,bA=y-1;bA>0;bA-=2){bA===6&&bA--;for(var XA=0;XA<y;XA++)for(var dj=nA?y-1-XA:XA,yA=0;yA<2;yA++){var tj=bA-yA;if(!h.get(tj,dj)){AA++;var LA=x.get(tj,dj);D({y:dj,x:tj})&&(LA=!LA),Q=i(LA,Q),AA===8&&(O.push(Q),AA=0,Q=0)}}nA=!nA}return O}function u(x){var R=x.height,P=Math.floor((R-17)/4);if(P<=6)return n.VERSIONS[P-1];for(var D=0,y=5;y>=0;y--)for(var h=R-9;h>=R-11;h--)D=i(x.get(h,y),D);for(var O=0,h=5;h>=0;h--)for(var y=R-9;y>=R-11;y--)O=i(x.get(h,y),O);for(var Q=1/0,AA,nA=0,bA=n.VERSIONS;nA<bA.length;nA++){var XA=bA[nA];if(XA.infoBits===D||XA.infoBits===O)return XA;var dj=o(D,XA.infoBits);dj<Q&&(AA=XA,Q=dj),dj=o(O,XA.infoBits),dj<Q&&(AA=XA,Q=dj)}if(Q<=3)return AA}function m(x){for(var R=0,P=0;P<=8;P++)P!==6&&(R=i(x.get(P,8),R));for(var D=7;D>=0;D--)D!==6&&(R=i(x.get(8,D),R));for(var y=x.height,h=0,D=y-1;D>=y-7;D--)h=i(x.get(8,D),h);for(var P=y-8;P<y;P++)h=i(x.get(P,8),h);for(var O=1/0,Q=null,AA=0,nA=s;AA<nA.length;AA++){var bA=nA[AA],XA=bA.bits,dj=bA.formatInfo;if(XA===R||XA===h)return dj;var yA=o(R,XA);yA<O&&(Q=dj,O=yA),R!==h&&(yA=o(h,XA),yA<O&&(Q=dj,O=yA))}return O<=3?Q:null}function F(x,R,P){var D=R.errorCorrectionLevels[P],y=[],h=0;if(D.ecBlocks.forEach(function(LA){for(var Qj=0;Qj<LA.numBlocks;Qj++)y.push({numDataCodewords:LA.dataCodewordsPerBlock,codewords:[]}),h+=LA.dataCodewordsPerBlock+D.ecCodewordsPerBlock}),x.length<h)return null;x=x.slice(0,h);for(var O=D.ecBlocks[0].dataCodewordsPerBlock,Q=0;Q<O;Q++)for(var AA=0,nA=y;AA<nA.length;AA++){var bA=nA[AA];bA.codewords.push(x.shift())}if(D.ecBlocks.length>1)for(var XA=D.ecBlocks[0].numBlocks,dj=D.ecBlocks[1].numBlocks,Q=0;Q<dj;Q++)y[XA+Q].codewords.push(x.shift());for(;x.length>0;)for(var yA=0,tj=y;yA<tj.length;yA++){var bA=tj[yA];bA.codewords.push(x.shift())}return y}function S(x){var R=u(x);if(!R)return null;var P=m(x);if(!P)return null;var D=k(x,R,P),y=F(D,R,P.errorCorrectionLevel);if(!y)return null;for(var h=y.reduce(function(yA,tj){return yA+tj.numDataCodewords},0),O=new Uint8ClampedArray(h),Q=0,AA=0,nA=y;AA<nA.length;AA++){var bA=nA[AA],XA=a.decode(bA.codewords,bA.codewords.length-bA.numDataCodewords);if(!XA)return null;for(var dj=0;dj<bA.numDataCodewords;dj++)O[Q++]=XA[dj]}try{return r.decode(O,R.versionNumber)}catch{return null}}function G(x){if(x==null)return null;var R=S(x);if(R)return R;for(var P=0;P<x.width;P++)for(var D=P+1;D<x.height;D++)x.get(P,D)!==x.get(D,P)&&(x.set(P,D,!x.get(P,D)),x.set(D,P,!x.get(D,P)));return S(x)}j.decode=G},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(7),r=e(8),a;(function(u){u.Numeric="numeric",u.Alphanumeric="alphanumeric",u.Byte="byte",u.Kanji="kanji",u.ECI="eci"})(a=j.Mode||(j.Mode={}));var n;(function(u){u[u.Terminator=0]="Terminator",u[u.Numeric=1]="Numeric",u[u.Alphanumeric=2]="Alphanumeric",u[u.Byte=4]="Byte",u[u.Kanji=8]="Kanji",u[u.ECI=7]="ECI"})(n||(n={}));function o(u,m){for(var F=[],S="",G=[10,12,14][m],x=u.readBits(G);x>=3;){var R=u.readBits(10);if(R>=1e3)throw new Error("Invalid numeric value above 999");var P=Math.floor(R/100),D=Math.floor(R/10)%10,y=R%10;F.push(48+P,48+D,48+y),S+=P.toString()+D.toString()+y.toString(),x-=3}if(x===2){var R=u.readBits(7);if(R>=100)throw new Error("Invalid numeric value above 99");var P=Math.floor(R/10),D=R%10;F.push(48+P,48+D),S+=P.toString()+D.toString()}else if(x===1){var R=u.readBits(4);if(R>=10)throw new Error("Invalid numeric value above 9");F.push(48+R),S+=R.toString()}return{bytes:F,text:S}}var i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(u,m){for(var F=[],S="",G=[9,11,13][m],x=u.readBits(G);x>=2;){var R=u.readBits(11),P=Math.floor(R/45),D=R%45;F.push(i[P].charCodeAt(0),i[D].charCodeAt(0)),S+=i[P]+i[D],x-=2}if(x===1){var P=u.readBits(6);F.push(i[P].charCodeAt(0)),S+=i[P]}return{bytes:F,text:S}}function l(u,m){for(var F=[],S="",G=[8,16,16][m],x=u.readBits(G),R=0;R<x;R++){var P=u.readBits(8);F.push(P)}try{S+=decodeURIComponent(F.map(function(D){return"%"+("0"+D.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:F,text:S}}function c(u,m){for(var F=[],S="",G=[8,10,12][m],x=u.readBits(G),R=0;R<x;R++){var P=u.readBits(13),D=Math.floor(P/192)<<8|P%192;D<7936?D+=33088:D+=49472,F.push(D>>8,D&255),S+=String.fromCharCode(r.shiftJISTable[D])}return{bytes:F,text:S}}function k(u,m){for(var F,S,G,x,R=new t.BitStream(u),P=m<=9?0:m<=26?1:2,D={text:"",bytes:[],chunks:[],version:m};R.available()>=4;){var y=R.readBits(4);if(y===n.Terminator)return D;if(y===n.ECI)R.readBits(1)===0?D.chunks.push({type:a.ECI,assignmentNumber:R.readBits(7)}):R.readBits(1)===0?D.chunks.push({type:a.ECI,assignmentNumber:R.readBits(14)}):R.readBits(1)===0?D.chunks.push({type:a.ECI,assignmentNumber:R.readBits(21)}):D.chunks.push({type:a.ECI,assignmentNumber:-1});else if(y===n.Numeric){var h=o(R,P);D.text+=h.text,(F=D.bytes).push.apply(F,h.bytes),D.chunks.push({type:a.Numeric,text:h.text})}else if(y===n.Alphanumeric){var O=s(R,P);D.text+=O.text,(S=D.bytes).push.apply(S,O.bytes),D.chunks.push({type:a.Alphanumeric,text:O.text})}else if(y===n.Byte){var Q=l(R,P);D.text+=Q.text,(G=D.bytes).push.apply(G,Q.bytes),D.chunks.push({type:a.Byte,bytes:Q.bytes,text:Q.text})}else if(y===n.Kanji){var AA=c(R,P);D.text+=AA.text,(x=D.bytes).push.apply(x,AA.bytes),D.chunks.push({type:a.Kanji,bytes:AA.bytes,text:AA.text})}}if(R.available()===0||R.readBits(R.available())===0)return D}j.decode=k},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=function(){function r(a){this.byteOffset=0,this.bitOffset=0,this.bytes=a}return r.prototype.readBits=function(a){if(a<1||a>32||a>this.available())throw new Error("Cannot read "+a.toString()+" bits");var n=0;if(this.bitOffset>0){var o=8-this.bitOffset,i=a<o?a:o,s=o-i,l=255>>8-i<<s;n=(this.bytes[this.byteOffset]&l)>>s,a-=i,this.bitOffset+=i,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(a>0){for(;a>=8;)n=n<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,a-=8;if(a>0){var s=8-a,l=255>>s<<s;n=n<<a|(this.bytes[this.byteOffset]&l)>>s,this.bitOffset+=a}}return n},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}();j.BitStream=t},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(1),r=e(2);function a(s,l,c,k){var u;l.degree()<c.degree()&&(u=[c,l],l=u[0],c=u[1]);for(var m=l,F=c,S=s.zero,G=s.one;F.degree()>=k/2;){var x=m,R=S;if(m=F,S=G,m.isZero())return null;F=x;for(var P=s.zero,D=m.getCoefficient(m.degree()),y=s.inverse(D);F.degree()>=m.degree()&&!F.isZero();){var h=F.degree()-m.degree(),O=s.multiply(F.getCoefficient(F.degree()),y);P=P.addOrSubtract(s.buildMonomial(h,O)),F=F.addOrSubtract(m.multiplyByMonomial(h,O))}if(G=P.multiplyPoly(S).addOrSubtract(R),F.degree()>=m.degree())return null}var Q=G.getCoefficient(0);if(Q===0)return null;var AA=s.inverse(Q);return[G.multiply(AA),F.multiply(AA)]}function n(s,l){var c=l.degree();if(c===1)return[l.getCoefficient(1)];for(var k=new Array(c),u=0,m=1;m<s.size&&u<c;m++)l.evaluateAt(m)===0&&(k[u]=s.inverse(m),u++);return u!==c?null:k}function o(s,l,c){for(var k=c.length,u=new Array(k),m=0;m<k;m++){for(var F=s.inverse(c[m]),S=1,G=0;G<k;G++)m!==G&&(S=s.multiply(S,t.addOrSubtractGF(1,s.multiply(c[G],F))));u[m]=s.multiply(l.evaluateAt(F),s.inverse(S)),s.generatorBase!==0&&(u[m]=s.multiply(u[m],F))}return u}function i(s,l){var c=new Uint8ClampedArray(s.length);c.set(s);for(var k=new t.default(285,256,0),u=new r.default(k,c),m=new Uint8ClampedArray(l),F=!1,S=0;S<l;S++){var G=u.evaluateAt(k.exp(S+k.generatorBase));m[m.length-1-S]=G,G!==0&&(F=!0)}if(!F)return c;var x=new r.default(k,m),R=a(k,k.buildMonomial(l,1),x,l);if(R===null)return null;var P=n(k,R[0]);if(P==null)return null;for(var D=o(k,R[1],P),y=0;y<P.length;y++){var h=c.length-1-k.log(P[y]);if(h<0)return null;c[h]=t.addOrSubtractGF(c[h],D[y])}return c}j.decode=i},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=e(0);function r(i,s,l,c){var k=i.x-s.x+l.x-c.x,u=i.y-s.y+l.y-c.y;if(k===0&&u===0)return{a11:s.x-i.x,a12:s.y-i.y,a13:0,a21:l.x-s.x,a22:l.y-s.y,a23:0,a31:i.x,a32:i.y,a33:1};var m=s.x-l.x,F=c.x-l.x,S=s.y-l.y,G=c.y-l.y,x=m*G-F*S,R=(k*G-F*u)/x,P=(m*u-k*S)/x;return{a11:s.x-i.x+R*s.x,a12:s.y-i.y+R*s.y,a13:R,a21:c.x-i.x+P*c.x,a22:c.y-i.y+P*c.y,a23:P,a31:i.x,a32:i.y,a33:1}}function a(i,s,l,c){var k=r(i,s,l,c);return{a11:k.a22*k.a33-k.a23*k.a32,a12:k.a13*k.a32-k.a12*k.a33,a13:k.a12*k.a23-k.a13*k.a22,a21:k.a23*k.a31-k.a21*k.a33,a22:k.a11*k.a33-k.a13*k.a31,a23:k.a13*k.a21-k.a11*k.a23,a31:k.a21*k.a32-k.a22*k.a31,a32:k.a12*k.a31-k.a11*k.a32,a33:k.a11*k.a22-k.a12*k.a21}}function n(i,s){return{a11:i.a11*s.a11+i.a21*s.a12+i.a31*s.a13,a12:i.a12*s.a11+i.a22*s.a12+i.a32*s.a13,a13:i.a13*s.a11+i.a23*s.a12+i.a33*s.a13,a21:i.a11*s.a21+i.a21*s.a22+i.a31*s.a23,a22:i.a12*s.a21+i.a22*s.a22+i.a32*s.a23,a23:i.a13*s.a21+i.a23*s.a22+i.a33*s.a23,a31:i.a11*s.a31+i.a21*s.a32+i.a31*s.a33,a32:i.a12*s.a31+i.a22*s.a32+i.a32*s.a33,a33:i.a13*s.a31+i.a23*s.a32+i.a33*s.a33}}function o(i,s){for(var l=a({x:3.5,y:3.5},{x:s.dimension-3.5,y:3.5},{x:s.dimension-6.5,y:s.dimension-6.5},{x:3.5,y:s.dimension-3.5}),c=r(s.topLeft,s.topRight,s.alignmentPattern,s.bottomLeft),k=n(c,l),u=t.BitMatrix.createEmpty(s.dimension,s.dimension),m=function(P,D){var y=k.a13*P+k.a23*D+k.a33;return{x:(k.a11*P+k.a21*D+k.a31)/y,y:(k.a12*P+k.a22*D+k.a32)/y}},F=0;F<s.dimension;F++)for(var S=0;S<s.dimension;S++){var G=S+.5,x=F+.5,R=m(G,x);u.set(S,F,i.get(Math.floor(R.x),Math.floor(R.y)))}return{matrix:u,mappingFunction:m}}j.extract=o},function(A,j,e){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var t=4,r=.5,a=1.5,n=function(G,x){return Math.sqrt(Math.pow(x.x-G.x,2)+Math.pow(x.y-G.y,2))};function o(G){return G.reduce(function(x,R){return x+R})}function i(G,x,R){var P,D,y,h,O=n(G,x),Q=n(x,R),AA=n(G,R),nA,bA,XA;return Q>=O&&Q>=AA?(P=[x,G,R],nA=P[0],bA=P[1],XA=P[2]):AA>=Q&&AA>=O?(D=[G,x,R],nA=D[0],bA=D[1],XA=D[2]):(y=[G,R,x],nA=y[0],bA=y[1],XA=y[2]),(XA.x-bA.x)*(nA.y-bA.y)-(XA.y-bA.y)*(nA.x-bA.x)<0&&(h=[XA,nA],nA=h[0],XA=h[1]),{bottomLeft:nA,topLeft:bA,topRight:XA}}function s(G,x,R,P){var D=(o(c(G,R,P,5))/7+o(c(G,x,P,5))/7+o(c(R,G,P,5))/7+o(c(x,G,P,5))/7)/4;if(D<1)throw new Error("Invalid module size");var y=Math.round(n(G,x)/D),h=Math.round(n(G,R)/D),O=Math.floor((y+h)/2)+7;switch(O%4){case 0:O++;break;case 2:O--;break}return{dimension:O,moduleSize:D}}function l(G,x,R,P){var D=[{x:Math.floor(G.x),y:Math.floor(G.y)}],y=Math.abs(x.y-G.y)>Math.abs(x.x-G.x),h,O,Q,AA;y?(h=Math.floor(G.y),O=Math.floor(G.x),Q=Math.floor(x.y),AA=Math.floor(x.x)):(h=Math.floor(G.x),O=Math.floor(G.y),Q=Math.floor(x.x),AA=Math.floor(x.y));for(var nA=Math.abs(Q-h),bA=Math.abs(AA-O),XA=Math.floor(-nA/2),dj=h<Q?1:-1,yA=O<AA?1:-1,tj=!0,LA=h,Qj=O;LA!==Q+dj;LA+=dj){var Oj=y?Qj:LA,Ej=y?LA:Qj;if(R.get(Oj,Ej)!==tj&&(tj=!tj,D.push({x:Oj,y:Ej}),D.length===P+1))break;if(XA+=bA,XA>0){if(Qj===AA)break;Qj+=yA,XA-=nA}}for(var Yj=[],Tj=0;Tj<P;Tj++)D[Tj]&&D[Tj+1]?Yj.push(n(D[Tj],D[Tj+1])):Yj.push(0);return Yj}function c(G,x,R,P){var D,y=x.y-G.y,h=x.x-G.x,O=l(G,x,R,Math.ceil(P/2)),Q=l(G,{x:G.x-h,y:G.y-y},R,Math.ceil(P/2)),AA=O.shift()+Q.shift()-1;return(D=Q.concat(AA)).concat.apply(D,O)}function k(G,x){var R=o(G)/o(x),P=0;return x.forEach(function(D,y){P+=Math.pow(G[y]-D*R,2)}),{averageSize:R,error:P}}function u(G,x,R){try{var P=c(G,{x:-1,y:G.y},R,x.length),D=c(G,{x:G.x,y:-1},R,x.length),y={x:Math.max(0,G.x-G.y)-1,y:Math.max(0,G.y-G.x)-1},h=c(G,y,R,x.length),O={x:Math.min(R.width,G.x+G.y)+1,y:Math.min(R.height,G.y+G.x)+1},Q=c(G,O,R,x.length),AA=k(P,x),nA=k(D,x),bA=k(h,x),XA=k(Q,x),dj=Math.sqrt(AA.error*AA.error+nA.error*nA.error+bA.error*bA.error+XA.error*XA.error),yA=(AA.averageSize+nA.averageSize+bA.averageSize+XA.averageSize)/4,tj=(Math.pow(AA.averageSize-yA,2)+Math.pow(nA.averageSize-yA,2)+Math.pow(bA.averageSize-yA,2)+Math.pow(XA.averageSize-yA,2))/yA;return dj+tj}catch{return 1/0}}function m(G,x){for(var R=Math.round(x.x);G.get(R,Math.round(x.y));)R--;for(var P=Math.round(x.x);G.get(P,Math.round(x.y));)P++;for(var D=(R+P)/2,y=Math.round(x.y);G.get(Math.round(D),y);)y--;for(var h=Math.round(x.y);G.get(Math.round(D),h);)h++;var O=(y+h)/2;return{x:D,y:O}}function F(G){for(var x=[],R=[],P=[],D=[],y=function(Oj){for(var Ej=0,Yj=!1,Tj=[0,0,0,0,0],mj=function(_e){var Tt=G.get(_e,Oj);if(Tt===Yj)Ej++;else{Tj=[Tj[1],Tj[2],Tj[3],Tj[4],Ej],Ej=1,Yj=Tt;var Cj=o(Tj)/7,xt=Math.abs(Tj[0]-Cj)<Cj&&Math.abs(Tj[1]-Cj)<Cj&&Math.abs(Tj[2]-3*Cj)<3*Cj&&Math.abs(Tj[3]-Cj)<Cj&&Math.abs(Tj[4]-Cj)<Cj&&!Tt,At=o(Tj.slice(-3))/3,Ce=Math.abs(Tj[2]-At)<At&&Math.abs(Tj[3]-At)<At&&Math.abs(Tj[4]-At)<At&&Tt;if(xt){var fe=_e-Tj[3]-Tj[4],ir=fe-Tj[2],Ar={startX:ir,endX:fe,y:Oj},Pt=R.filter(function(_r){return ir>=_r.bottom.startX&&ir<=_r.bottom.endX||fe>=_r.bottom.startX&&ir<=_r.bottom.endX||ir<=_r.bottom.startX&&fe>=_r.bottom.endX&&Tj[2]/(_r.bottom.endX-_r.bottom.startX)<a&&Tj[2]/(_r.bottom.endX-_r.bottom.startX)>r});Pt.length>0?Pt[0].bottom=Ar:R.push({top:Ar,bottom:Ar})}if(Ce){var Jr=_e-Tj[4],Kr=Jr-Tj[3],Ar={startX:Kr,y:Oj,endX:Jr},Pt=D.filter(function(ct){return Kr>=ct.bottom.startX&&Kr<=ct.bottom.endX||Jr>=ct.bottom.startX&&Kr<=ct.bottom.endX||Kr<=ct.bottom.startX&&Jr>=ct.bottom.endX&&Tj[2]/(ct.bottom.endX-ct.bottom.startX)<a&&Tj[2]/(ct.bottom.endX-ct.bottom.startX)>r});Pt.length>0?Pt[0].bottom=Ar:D.push({top:Ar,bottom:Ar})}}},qj=-1;qj<=G.width;qj++)mj(qj);x.push.apply(x,R.filter(function(_e){return _e.bottom.y!==Oj&&_e.bottom.y-_e.top.y>=2})),R=R.filter(function(_e){return _e.bottom.y===Oj}),P.push.apply(P,D.filter(function(_e){return _e.bottom.y!==Oj})),D=D.filter(function(_e){return _e.bottom.y===Oj})},h=0;h<=G.height;h++)y(h);x.push.apply(x,R.filter(function(Oj){return Oj.bottom.y-Oj.top.y>=2})),P.push.apply(P,D);var O=x.filter(function(Oj){return Oj.bottom.y-Oj.top.y>=2}).map(function(Oj){var Ej=(Oj.top.startX+Oj.top.endX+Oj.bottom.startX+Oj.bottom.endX)/4,Yj=(Oj.top.y+Oj.bottom.y+1)/2;if(G.get(Math.round(Ej),Math.round(Yj))){var Tj=[Oj.top.endX-Oj.top.startX,Oj.bottom.endX-Oj.bottom.startX,Oj.bottom.y-Oj.top.y+1],mj=o(Tj)/Tj.length,qj=u({x:Math.round(Ej),y:Math.round(Yj)},[1,1,3,1,1],G);return{score:qj,x:Ej,y:Yj,size:mj}}}).filter(function(Oj){return!!Oj}).sort(function(Oj,Ej){return Oj.score-Ej.score}).map(function(Oj,Ej,Yj){if(Ej>t)return null;var Tj=Yj.filter(function(qj,_e){return Ej!==_e}).map(function(qj){return{x:qj.x,y:qj.y,score:qj.score+Math.pow(qj.size-Oj.size,2)/Oj.size,size:qj.size}}).sort(function(qj,_e){return qj.score-_e.score});if(Tj.length<2)return null;var mj=Oj.score+Tj[0].score+Tj[1].score;return{points:[Oj].concat(Tj.slice(0,2)),score:mj}}).filter(function(Oj){return!!Oj}).sort(function(Oj,Ej){return Oj.score-Ej.score});if(O.length===0)return null;var Q=i(O[0].points[0],O[0].points[1],O[0].points[2]),AA=Q.topRight,nA=Q.topLeft,bA=Q.bottomLeft,XA=S(G,P,AA,nA,bA),dj=[];XA&&dj.push({alignmentPattern:{x:XA.alignmentPattern.x,y:XA.alignmentPattern.y},bottomLeft:{x:bA.x,y:bA.y},dimension:XA.dimension,topLeft:{x:nA.x,y:nA.y},topRight:{x:AA.x,y:AA.y}});var yA=m(G,AA),tj=m(G,nA),LA=m(G,bA),Qj=S(G,P,yA,tj,LA);return Qj&&dj.push({alignmentPattern:{x:Qj.alignmentPattern.x,y:Qj.alignmentPattern.y},bottomLeft:{x:LA.x,y:LA.y},topLeft:{x:tj.x,y:tj.y},topRight:{x:yA.x,y:yA.y},dimension:Qj.dimension}),dj.length===0?null:dj}j.locate=F;function S(G,x,R,P,D){var y,h,O;try{y=s(P,R,D,G),h=y.dimension,O=y.moduleSize}catch{return null}var Q={x:R.x-P.x+D.x,y:R.y-P.y+D.y},AA=(n(P,D)+n(P,R))/2/O,nA=1-3/AA,bA={x:P.x+nA*(Q.x-P.x),y:P.y+nA*(Q.y-P.y)},XA=x.map(function(yA){var tj=(yA.top.startX+yA.top.endX+yA.bottom.startX+yA.bottom.endX)/4,LA=(yA.top.y+yA.bottom.y+1)/2;if(G.get(Math.floor(tj),Math.floor(LA))){var Qj=[yA.top.endX-yA.top.startX,yA.bottom.endX-yA.bottom.startX,yA.bottom.y-yA.top.y+1],Oj=o(Qj)/Qj.length,Ej=u({x:Math.floor(tj),y:Math.floor(LA)},[1,1,1],G),Yj=Ej+n({x:tj,y:LA},bA);return{x:tj,y:LA,score:Yj}}}).filter(function(yA){return!!yA}).sort(function(yA,tj){return yA.score-tj.score}),dj=AA>=15&&XA.length?XA[0]:bA;return{alignmentPattern:dj,dimension:h}}}]).default})});var mJA=RA((eO,M0)=>{var Pie=200,YXA="__lodash_hash_undefined__",Oie=800,Rie=16,ZXA=9007199254740991,AJA="[object Arguments]",Die="[object Array]",Tie="[object AsyncFunction]",Cie="[object Boolean]",_ie="[object Date]",Sie="[object Error]",jJA="[object Function]",Hie="[object GeneratorFunction]",Mie="[object Map]",Kie="[object Number]",Nie="[object Null]",eJA="[object Object]",Lie="[object Proxy]",zie="[object RegExp]",Uie="[object Set]",Vie="[object String]",Xie="[object Undefined]",Jie="[object WeakMap]",Wie="[object ArrayBuffer]",Qie="[object DataView]",Yie="[object Float32Array]",Zie="[object Float64Array]",Ase="[object Int8Array]",jse="[object Int16Array]",ese="[object Int32Array]",tse="[object Uint8Array]",rse="[object Uint8ClampedArray]",ase="[object Uint16Array]",nse="[object Uint32Array]",ose=/[\\^$.*+?()[\]{}|]/g,ise=/^\[object .+?Constructor\]$/,sse=/^(?:0|[1-9]\d*)$/,U6={};U6[Yie]=U6[Zie]=U6[Ase]=U6[jse]=U6[ese]=U6[tse]=U6[rse]=U6[ase]=U6[nse]=!0;U6[AJA]=U6[Die]=U6[Wie]=U6[Cie]=U6[Qie]=U6[_ie]=U6[Sie]=U6[jJA]=U6[Mie]=U6[Kie]=U6[eJA]=U6[zie]=U6[Uie]=U6[Vie]=U6[Jie]=!1;var tJA=typeof global=="object"&&global&&global.Object===Object&&global,lse=typeof self=="object"&&self&&self.Object===Object&&self,aO=tJA||lse||Function("return this")(),rJA=typeof eO=="object"&&eO&&!eO.nodeType&&eO,tO=rJA&&typeof M0=="object"&&M0&&!M0.nodeType&&M0,aJA=tO&&tO.exports===rJA,HsA=aJA&&tJA.process,NXA=function(){try{var A=tO&&tO.require&&tO.require("util").types;return A||HsA&&HsA.binding&&HsA.binding("util")}catch{}}(),LXA=NXA&&NXA.isTypedArray;function cse(A,j,e){switch(e.length){case 0:return A.call(j);case 1:return A.call(j,e[0]);case 2:return A.call(j,e[0],e[1]);case 3:return A.call(j,e[0],e[1],e[2])}return A.apply(j,e)}function dse(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}function kse(A){return function(j){return A(j)}}function use(A,j){return A?.[j]}function Ese(A,j){return function(e){return A(j(e))}}var pse=Array.prototype,mse=Function.prototype,_5=Object.prototype,MsA=aO["__core-js_shared__"],S5=mse.toString,eB=_5.hasOwnProperty,zXA=function(){var A=/[^.]+$/.exec(MsA&&MsA.keys&&MsA.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}(),nJA=_5.toString,Bse=S5.call(Object),gse=RegExp("^"+S5.call(eB).replace(ose,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T5=aJA?aO.Buffer:void 0,UXA=aO.Symbol,VXA=aO.Uint8Array,XXA=T5?T5.allocUnsafe:void 0,oJA=Ese(Object.getPrototypeOf,Object),JXA=Object.create,hse=_5.propertyIsEnumerable,qse=pse.splice,Kv=UXA?UXA.toStringTag:void 0,C5=function(){try{var A=VsA(Object,"defineProperty");return A({},"",{}),A}catch{}}(),xse=T5?T5.isBuffer:void 0,WXA=Math.max,vse=Date.now,iJA=VsA(aO,"Map"),rO=VsA(Object,"create"),Gse=function(){function A(){}return function(j){if(!Lv(j))return{};if(JXA)return JXA(j);A.prototype=j;var e=new A;return A.prototype=void 0,e}}();function Nv(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function fse(){this.__data__=rO?rO(null):{},this.size=0}function Fse(A){var j=this.has(A)&&delete this.__data__[A];return this.size-=j?1:0,j}function bse(A){var j=this.__data__;if(rO){var e=j[A];return e===YXA?void 0:e}return eB.call(j,A)?j[A]:void 0}function yse(A){var j=this.__data__;return rO?j[A]!==void 0:eB.call(j,A)}function $se(A,j){var e=this.__data__;return this.size+=this.has(A)?0:1,e[A]=rO&&j===void 0?YXA:j,this}Nv.prototype.clear=fse;Nv.prototype.delete=Fse;Nv.prototype.get=bse;Nv.prototype.has=yse;Nv.prototype.set=$se;function tB(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function wse(){this.__data__=[],this.size=0}function Ise(A){var j=this.__data__,e=H5(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():qse.call(j,e,1),--this.size,!0}function Pse(A){var j=this.__data__,e=H5(j,A);return e<0?void 0:j[e][1]}function Ose(A){return H5(this.__data__,A)>-1}function Rse(A,j){var e=this.__data__,t=H5(e,A);return t<0?(++this.size,e.push([A,j])):e[t][1]=j,this}tB.prototype.clear=wse;tB.prototype.delete=Ise;tB.prototype.get=Pse;tB.prototype.has=Ose;tB.prototype.set=Rse;function K0(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}function Dse(){this.size=0,this.__data__={hash:new Nv,map:new(iJA||tB),string:new Nv}}function Tse(A){var j=K5(this,A).delete(A);return this.size-=j?1:0,j}function Cse(A){return K5(this,A).get(A)}function _se(A){return K5(this,A).has(A)}function Sse(A,j){var e=K5(this,A),t=e.size;return e.set(A,j),this.size+=e.size==t?0:1,this}K0.prototype.clear=Dse;K0.prototype.delete=Tse;K0.prototype.get=Cse;K0.prototype.has=_se;K0.prototype.set=Sse;function N0(A){var j=this.__data__=new tB(A);this.size=j.size}function Hse(){this.__data__=new tB,this.size=0}function Mse(A){var j=this.__data__,e=j.delete(A);return this.size=j.size,e}function Kse(A){return this.__data__.get(A)}function Nse(A){return this.__data__.has(A)}function Lse(A,j){var e=this.__data__;if(e instanceof tB){var t=e.__data__;if(!iJA||t.length<Pie-1)return t.push([A,j]),this.size=++e.size,this;e=this.__data__=new K0(t)}return e.set(A,j),this.size=e.size,this}N0.prototype.clear=Hse;N0.prototype.delete=Mse;N0.prototype.get=Kse;N0.prototype.has=Nse;N0.prototype.set=Lse;function zse(A,j){var e=zsA(A),t=!e&&LsA(A),r=!e&&!t&&dJA(A),a=!e&&!t&&!r&&uJA(A),n=e||t||r||a,o=n?dse(A.length,String):[],i=o.length;for(var s in A)(j||eB.call(A,s))&&!(n&&(s=="length"||r&&(s=="offset"||s=="parent")||a&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||lJA(s,i)))&&o.push(s);return o}function KsA(A,j,e){(e!==void 0&&!N5(A[j],e)||e===void 0&&!(j in A))&&UsA(A,j,e)}function Use(A,j,e){var t=A[j];(!(eB.call(A,j)&&N5(t,e))||e===void 0&&!(j in A))&&UsA(A,j,e)}function H5(A,j){for(var e=A.length;e--;)if(N5(A[e][0],j))return e;return-1}function UsA(A,j,e){j=="__proto__"&&C5?C5(A,j,{configurable:!0,enumerable:!0,value:e,writable:!0}):A[j]=e}var Vse=nle();function M5(A){return A==null?A===void 0?Xie:Nie:Kv&&Kv in Object(A)?ole(A):kle(A)}function QXA(A){return nO(A)&&M5(A)==AJA}function Xse(A){if(!Lv(A)||cle(A))return!1;var j=JsA(A)?gse:ise;return j.test(mle(A))}function Jse(A){return nO(A)&&kJA(A.length)&&!!U6[M5(A)]}function Wse(A){if(!Lv(A))return dle(A);var j=cJA(A),e=[];for(var t in A)t=="constructor"&&(j||!eB.call(A,t))||e.push(t);return e}function sJA(A,j,e,t,r){A!==j&&Vse(j,function(a,n){if(r||(r=new N0),Lv(a))Qse(A,j,n,e,sJA,t,r);else{var o=t?t(NsA(A,n),a,n+"",A,j,r):void 0;o===void 0&&(o=a),KsA(A,n,o)}},EJA)}function Qse(A,j,e,t,r,a,n){var o=NsA(A,e),i=NsA(j,e),s=n.get(i);if(s){KsA(A,e,s);return}var l=a?a(o,i,e+"",A,j,n):void 0,c=l===void 0;if(c){var k=zsA(i),u=!k&&dJA(i),m=!k&&!u&&uJA(i);l=i,k||u||m?zsA(o)?l=o:Ble(o)?l=tle(o):u?(c=!1,l=Ale(i,!0)):m?(c=!1,l=ele(i,!0)):l=[]:gle(i)||LsA(i)?(l=o,LsA(o)?l=hle(o):(!Lv(o)||JsA(o))&&(l=ile(i))):c=!1}c&&(n.set(i,l),r(l,i,t,a,n),n.delete(i)),KsA(A,e,l)}function Yse(A,j){return Ele(ule(A,j,pJA),A+"")}var Zse=C5?function(A,j){return C5(A,"toString",{configurable:!0,enumerable:!1,value:xle(j),writable:!0})}:pJA;function Ale(A,j){if(j)return A.slice();var e=A.length,t=XXA?XXA(e):new A.constructor(e);return A.copy(t),t}function jle(A){var j=new A.constructor(A.byteLength);return new VXA(j).set(new VXA(A)),j}function ele(A,j){var e=j?jle(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.length)}function tle(A,j){var e=-1,t=A.length;for(j||(j=Array(t));++e<t;)j[e]=A[e];return j}function rle(A,j,e,t){var r=!e;e||(e={});for(var a=-1,n=j.length;++a<n;){var o=j[a],i=t?t(e[o],A[o],o,e,A):void 0;i===void 0&&(i=A[o]),r?UsA(e,o,i):Use(e,o,i)}return e}function ale(A){return Yse(function(j,e){var t=-1,r=e.length,a=r>1?e[r-1]:void 0,n=r>2?e[2]:void 0;for(a=A.length>3&&typeof a=="function"?(r--,a):void 0,n&&sle(e[0],e[1],n)&&(a=r<3?void 0:a,r=1),j=Object(j);++t<r;){var o=e[t];o&&A(j,o,t,a)}return j})}function nle(A){return function(j,e,t){for(var r=-1,a=Object(j),n=t(j),o=n.length;o--;){var i=n[A?o:++r];if(e(a[i],i,a)===!1)break}return j}}function K5(A,j){var e=A.__data__;return lle(j)?e[typeof j=="string"?"string":"hash"]:e.map}function VsA(A,j){var e=use(A,j);return Xse(e)?e:void 0}function ole(A){var j=eB.call(A,Kv),e=A[Kv];try{A[Kv]=void 0;var t=!0}catch{}var r=nJA.call(A);return t&&(j?A[Kv]=e:delete A[Kv]),r}function ile(A){return typeof A.constructor=="function"&&!cJA(A)?Gse(oJA(A)):{}}function lJA(A,j){var e=typeof A;return j=j??ZXA,!!j&&(e=="number"||e!="symbol"&&sse.test(A))&&A>-1&&A%1==0&&A<j}function sle(A,j,e){if(!Lv(e))return!1;var t=typeof j;return(t=="number"?XsA(e)&&lJA(j,e.length):t=="string"&&j in e)?N5(e[j],A):!1}function lle(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}function cle(A){return!!zXA&&zXA in A}function cJA(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||_5;return A===e}function dle(A){var j=[];if(A!=null)for(var e in Object(A))j.push(e);return j}function kle(A){return nJA.call(A)}function ule(A,j,e){return j=WXA(j===void 0?A.length-1:j,0),function(){for(var t=arguments,r=-1,a=WXA(t.length-j,0),n=Array(a);++r<a;)n[r]=t[j+r];r=-1;for(var o=Array(j+1);++r<j;)o[r]=t[r];return o[j]=e(n),cse(A,this,o)}}function NsA(A,j){if(!(j==="constructor"&&typeof A[j]=="function")&&j!="__proto__")return A[j]}var Ele=ple(Zse);function ple(A){var j=0,e=0;return function(){var t=vse(),r=Rie-(t-e);if(e=t,r>0){if(++j>=Oie)return arguments[0]}else j=0;return A.apply(void 0,arguments)}}function mle(A){if(A!=null){try{return S5.call(A)}catch{}try{return A+""}catch{}}return""}function N5(A,j){return A===j||A!==A&&j!==j}var LsA=QXA(function(){return arguments}())?QXA:function(A){return nO(A)&&eB.call(A,"callee")&&!hse.call(A,"callee")},zsA=Array.isArray;function XsA(A){return A!=null&&kJA(A.length)&&!JsA(A)}function Ble(A){return nO(A)&&XsA(A)}var dJA=xse||vle;function JsA(A){if(!Lv(A))return!1;var j=M5(A);return j==jJA||j==Hie||j==Tie||j==Lie}function kJA(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=ZXA}function Lv(A){var j=typeof A;return A!=null&&(j=="object"||j=="function")}function nO(A){return A!=null&&typeof A=="object"}function gle(A){if(!nO(A)||M5(A)!=eJA)return!1;var j=oJA(A);if(j===null)return!0;var e=eB.call(j,"constructor")&&j.constructor;return typeof e=="function"&&e instanceof e&&S5.call(e)==Bse}var uJA=LXA?kse(LXA):Jse;function hle(A){return rle(A,EJA(A))}function EJA(A){return XsA(A)?zse(A,!0):Wse(A)}var qle=ale(function(A,j,e){sJA(A,j,e)});function xle(A){return function(){return A}}function pJA(A){return A}function vle(){return!1}M0.exports=qle});var vJA=RA(U5=>{"use strict";Object.defineProperty(U5,"__esModule",{value:!0});U5.GenericEntity=void 0;var z5=tA();U5.GenericEntity=z5.exact(z5.type({schema:z5.string,data:z5.UnknownRecord}))});var GJA=RA(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.SnowplowDataJsonKeys=mi.SnowplowEvent=mi.SnowplowEventData=mi.SnowplowUrl=mi.Platform=mi.EventType=void 0;var Fle=vJA(),n6=tA(),rlA;(function(A){A.SelfDescribingEvent="ue",A.Unknown=""})(rlA=mi.EventType||(mi.EventType={}));var rB;(function(A){A.Web="web",A.Mobile="mob",A.Desktop="pc",A.ServerSide="srv",A.App="app",A.Tv="tv",A.GameConsole="cnsl",A.Thing="iot"})(rB=mi.Platform||(mi.Platform={}));var V5;(function(A){A.UnstructuredEvent="iglu:com.snowplowanalytics.snowplow/unstruct_event/jsonschema/1-0-0",A.Context="iglu:com.snowplowanalytics.snowplow/contexts/jsonschema/1-0-0",A.PayloadData="iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4"})(V5=mi.SnowplowUrl||(mi.SnowplowUrl={}));var ble=n6.exact(n6.type({schema:n6.literal(V5.UnstructuredEvent),data:n6.record(n6.string,n6.any)})),yle=n6.exact(n6.type({schema:n6.literal(V5.Context),data:n6.array(Fle.GenericEntity)}));mi.SnowplowEventData=n6.exact(n6.intersection([n6.type({eventType:n6.union([n6.literal(rlA.SelfDescribingEvent),n6.literal(rlA.Unknown)]),payload:ble,platform:n6.keyof({[rB.App]:void 0,[rB.Desktop]:void 0,[rB.GameConsole]:void 0,[rB.Mobile]:void 0,[rB.ServerSide]:void 0,[rB.Thing]:void 0,[rB.Tv]:void 0,[rB.Web]:void 0}),appId:n6.string,trackerId:n6.string,namespace:n6.string,createdTimestamp:n6.number}),n6.partial({context:yle,eventUuid:n6.string,sentTimestamp:n6.number})]));mi.SnowplowEvent=n6.exact(n6.type({schema:n6.literal(V5.PayloadData),data:n6.array(mi.SnowplowEventData)}));mi.SnowplowDataJsonKeys={eventType:"e",payload:"ue_pr",context:"co",platform:"p",appId:"aid",trackerId:"tv",namespace:"tna",eventUuid:"eid",createdTimestamp:"dtm",sentTimestamp:"stm"}});var fJA=RA(z0=>{"use strict";Object.defineProperty(z0,"__esModule",{value:!0});z0.produceSnowplowJson=z0.buildSnowplowEvent=void 0;var L0=GJA();function $le(A,j,e,t,r,a=Date.now(),n){let o={schema:L0.SnowplowUrl.PayloadData,data:[{eventType:L0.EventType.SelfDescribingEvent,payload:{schema:L0.SnowplowUrl.UnstructuredEvent,data:t},context:r&&r.length>0?{schema:L0.SnowplowUrl.Context,data:r}:null,platform:L0.Platform.Web,appId:A,trackerId:j,namespace:e,eventUuid:n,createdTimestamp:a,sentTimestamp:Date.now()}]};return Object.freeze(o)}z0.buildSnowplowEvent=$le;function wle(A){let j=Ile(L0.SnowplowDataJsonKeys,A.data[0]);return JSON.stringify({schema:A.schema,data:[j]})}z0.produceSnowplowJson=wle;var Ile=(A,j)=>Object.keys(j).filter(e=>j[e]).reduce((e,t)=>({...e,[A[t]||t]:typeof j[t]=="string"?j[t]:JSON.stringify(j[t])}),{})});var bJA=RA(U0=>{"use strict";Object.defineProperty(U0,"__esModule",{value:!0});U0.validateContexts=U0.validateEvent=void 0;var FJA=Xn();function Ple(A,j,e){let t=A[j],a={schema:t.type.props.schema.value,data:e},n=t.decode(a);if(FJA.isRight(n))return n.right;throw Error("Failed to validate event")}U0.validateEvent=Ple;function Ole(A,j){let e=[];if(!(!j||j.length==0))return j.forEach(t=>{let r=A[t.contextType],n={schema:r.type.props.schema.value,data:t.data},o=r.decode(n);if(FJA.isRight(o))e.push(o.right);else throw Error(`Failed to validate context for ${String(t.contextType)}`)}),e}U0.validateContexts=Ole});var wJA=RA(X5=>{"use strict";Object.defineProperty(X5,"__esModule",{value:!0});X5.SnowplowTracker=void 0;var yJA=fJA(),$JA=bJA(),alA=class{constructor(j,e,t){this.config=j,this.allEvents=e,this.allContexts=t,this.config=j,this.allEvents=e,this.allContexts=t}async record(j,e,t){try{let r=(0,$JA.validateEvent)(this.allEvents,j,e),a=(0,$JA.validateContexts)(this.allContexts,t),n=(0,yJA.buildSnowplowEvent)(this.config.appId,this.config.trackerId,this.config.namespace,r,a),o=(0,yJA.produceSnowplowJson)(n);await this.sendToSnowplow(o)}catch(r){throw new Error(`{An error occurred during event recording. The event may not have been sent. Error Output: ${r}}`)}}async sendToSnowplow(j){await fetch(this.config.collectorUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:j})}};X5.SnowplowTracker=alA});var IJA=RA(J5=>{"use strict";Object.defineProperty(J5,"__esModule",{value:!0});J5.SnowplowTracker=void 0;var Rle=wJA();Object.defineProperty(J5,"SnowplowTracker",{enumerable:!0,get:function(){return Rle.SnowplowTracker}})});var ocA;(function(A){(function(j){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),t=r(A);typeof e.Reflect>"u"?e.Reflect=A:t=r(e.Reflect,t),j(t);function r(a,n){return function(o,i){typeof a[o]!="function"&&Object.defineProperty(a,o,{configurable:!0,writable:!0,value:i}),n&&n(o,i)}}})(function(j){var e=Object.prototype.hasOwnProperty,t=typeof Symbol=="function",r=t&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=t&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",n=typeof Object.create=="function",o={__proto__:[]}instanceof Array,i=!n&&!o,s={create:n?function(){return se(Object.create(null))}:o?function(){return se({__proto__:null})}:function(){return se({})},has:i?function(iA,hA){return e.call(iA,hA)}:function(iA,hA){return hA in iA},get:i?function(iA,hA){return e.call(iA,hA)?iA[hA]:void 0}:function(iA,hA){return iA[hA]}},l=Object.getPrototypeOf(Function),c=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",k=!c&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ut(),u=!c&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:hr(),m=!c&&typeof WeakMap=="function"?WeakMap:o6(),F=new m;function S(iA,hA,HA,fj){if(Yj(HA)){if(!Ce(iA))throw new TypeError;if(!ir(hA))throw new TypeError;return AA(iA,hA)}else{if(!Ce(iA))throw new TypeError;if(!qj(hA))throw new TypeError;if(!qj(fj)&&!Yj(fj)&&!Tj(fj))throw new TypeError;return Tj(fj)&&(fj=void 0),HA=At(HA),nA(iA,hA,HA,fj)}}j("decorate",S);function G(iA,hA){function HA(fj,xj){if(!qj(fj))throw new TypeError;if(!Yj(xj)&&!Ar(xj))throw new TypeError;LA(iA,hA,fj,xj)}return HA}j("metadata",G);function x(iA,hA,HA,fj){if(!qj(HA))throw new TypeError;return Yj(fj)||(fj=At(fj)),LA(iA,hA,HA,fj)}j("defineMetadata",x);function R(iA,hA,HA){if(!qj(hA))throw new TypeError;return Yj(HA)||(HA=At(HA)),XA(iA,hA,HA)}j("hasMetadata",R);function P(iA,hA,HA){if(!qj(hA))throw new TypeError;return Yj(HA)||(HA=At(HA)),dj(iA,hA,HA)}j("hasOwnMetadata",P);function D(iA,hA,HA){if(!qj(hA))throw new TypeError;return Yj(HA)||(HA=At(HA)),yA(iA,hA,HA)}j("getMetadata",D);function y(iA,hA,HA){if(!qj(hA))throw new TypeError;return Yj(HA)||(HA=At(HA)),tj(iA,hA,HA)}j("getOwnMetadata",y);function h(iA,hA){if(!qj(iA))throw new TypeError;return Yj(hA)||(hA=At(hA)),Qj(iA,hA)}j("getMetadataKeys",h);function O(iA,hA){if(!qj(iA))throw new TypeError;return Yj(hA)||(hA=At(hA)),Oj(iA,hA)}j("getOwnMetadataKeys",O);function Q(iA,hA,HA){if(!qj(hA))throw new TypeError;Yj(HA)||(HA=At(HA));var fj=bA(hA,HA,!1);if(Yj(fj)||!fj.delete(iA))return!1;if(fj.size>0)return!0;var xj=F.get(hA);return xj.delete(HA),xj.size>0||F.delete(hA),!0}j("deleteMetadata",Q);function AA(iA,hA){for(var HA=iA.length-1;HA>=0;--HA){var fj=iA[HA],xj=fj(hA);if(!Yj(xj)&&!Tj(xj)){if(!ir(xj))throw new TypeError;hA=xj}}return hA}function nA(iA,hA,HA,fj){for(var xj=iA.length-1;xj>=0;--xj){var ye=iA[xj],Bj=ye(hA,HA,fj);if(!Yj(Bj)&&!Tj(Bj)){if(!qj(Bj))throw new TypeError;fj=Bj}}return fj}function bA(iA,hA,HA){var fj=F.get(iA);if(Yj(fj)){if(!HA)return;fj=new k,F.set(iA,fj)}var xj=fj.get(hA);if(Yj(xj)){if(!HA)return;xj=new k,fj.set(hA,xj)}return xj}function XA(iA,hA,HA){var fj=dj(iA,hA,HA);if(fj)return!0;var xj=ct(hA);return Tj(xj)?!1:XA(iA,xj,HA)}function dj(iA,hA,HA){var fj=bA(hA,HA,!1);return Yj(fj)?!1:Cj(fj.has(iA))}function yA(iA,hA,HA){var fj=dj(iA,hA,HA);if(fj)return tj(iA,hA,HA);var xj=ct(hA);if(!Tj(xj))return yA(iA,xj,HA)}function tj(iA,hA,HA){var fj=bA(hA,HA,!1);if(!Yj(fj))return fj.get(iA)}function LA(iA,hA,HA,fj){var xj=bA(HA,fj,!0);xj.set(iA,hA)}function Qj(iA,hA){var HA=Oj(iA,hA),fj=ct(iA);if(fj===null)return HA;var xj=Qj(fj,hA);if(xj.length<=0)return HA;if(HA.length<=0)return xj;for(var ye=new u,Bj=[],cA=0,rA=HA;cA<rA.length;cA++){var wA=rA[cA],Xj=ye.has(wA);Xj||(ye.add(wA),Bj.push(wA))}for(var fr=0,Gn=xj;fr<Gn.length;fr++){var wA=Gn[fr],Xj=ye.has(wA);Xj||(ye.add(wA),Bj.push(wA))}return Bj}function Oj(iA,hA){var HA=[],fj=bA(iA,hA,!1);if(Yj(fj))return HA;for(var xj=fj.keys(),ye=Jr(xj),Bj=0;;){var cA=_r(ye);if(!cA)return HA.length=Bj,HA;var rA=Kr(cA);try{HA[Bj]=rA}catch(wA){try{ca(ye)}finally{throw wA}}Bj++}}function Ej(iA){if(iA===null)return 1;switch(typeof iA){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return iA===null?1:6;default:return 6}}function Yj(iA){return iA===void 0}function Tj(iA){return iA===null}function mj(iA){return typeof iA=="symbol"}function qj(iA){return typeof iA=="object"?iA!==null:typeof iA=="function"}function _e(iA,hA){switch(Ej(iA)){case 0:return iA;case 1:return iA;case 2:return iA;case 3:return iA;case 4:return iA;case 5:return iA}var HA=hA===3?"string":hA===5?"number":"default",fj=Pt(iA,r);if(fj!==void 0){var xj=fj.call(iA,HA);if(qj(xj))throw new TypeError;return xj}return Tt(iA,HA==="default"?"number":HA)}function Tt(iA,hA){if(hA==="string"){var HA=iA.toString;if(fe(HA)){var fj=HA.call(iA);if(!qj(fj))return fj}var xj=iA.valueOf;if(fe(xj)){var fj=xj.call(iA);if(!qj(fj))return fj}}else{var xj=iA.valueOf;if(fe(xj)){var fj=xj.call(iA);if(!qj(fj))return fj}var ye=iA.toString;if(fe(ye)){var fj=ye.call(iA);if(!qj(fj))return fj}}throw new TypeError}function Cj(iA){return!!iA}function xt(iA){return""+iA}function At(iA){var hA=_e(iA,3);return mj(hA)?hA:xt(hA)}function Ce(iA){return Array.isArray?Array.isArray(iA):iA instanceof Object?iA instanceof Array:Object.prototype.toString.call(iA)==="[object Array]"}function fe(iA){return typeof iA=="function"}function ir(iA){return typeof iA=="function"}function Ar(iA){switch(Ej(iA)){case 3:return!0;case 4:return!0;default:return!1}}function Pt(iA,hA){var HA=iA[hA];if(HA!=null){if(!fe(HA))throw new TypeError;return HA}}function Jr(iA){var hA=Pt(iA,a);if(!fe(hA))throw new TypeError;var HA=hA.call(iA);if(!qj(HA))throw new TypeError;return HA}function Kr(iA){return iA.value}function _r(iA){var hA=iA.next();return hA.done?!1:hA}function ca(iA){var hA=iA.return;hA&&hA.call(iA)}function ct(iA){var hA=Object.getPrototypeOf(iA);if(typeof iA!="function"||iA===l||hA!==l)return hA;var HA=iA.prototype,fj=HA&&Object.getPrototypeOf(HA);if(fj==null||fj===Object.prototype)return hA;var xj=fj.constructor;return typeof xj!="function"||xj===iA?hA:xj}function ut(){var iA={},hA=[],HA=function(){function Bj(cA,rA,wA){this._index=0,this._keys=cA,this._values=rA,this._selector=wA}return Bj.prototype["@@iterator"]=function(){return this},Bj.prototype[a]=function(){return this},Bj.prototype.next=function(){var cA=this._index;if(cA>=0&&cA<this._keys.length){var rA=this._selector(this._keys[cA],this._values[cA]);return cA+1>=this._keys.length?(this._index=-1,this._keys=hA,this._values=hA):this._index++,{value:rA,done:!1}}return{value:void 0,done:!0}},Bj.prototype.throw=function(cA){throw this._index>=0&&(this._index=-1,this._keys=hA,this._values=hA),cA},Bj.prototype.return=function(cA){return this._index>=0&&(this._index=-1,this._keys=hA,this._values=hA),{value:cA,done:!0}},Bj}();return function(){function Bj(){this._keys=[],this._values=[],this._cacheKey=iA,this._cacheIndex=-2}return Object.defineProperty(Bj.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Bj.prototype.has=function(cA){return this._find(cA,!1)>=0},Bj.prototype.get=function(cA){var rA=this._find(cA,!1);return rA>=0?this._values[rA]:void 0},Bj.prototype.set=function(cA,rA){var wA=this._find(cA,!0);return this._values[wA]=rA,this},Bj.prototype.delete=function(cA){var rA=this._find(cA,!1);if(rA>=0){for(var wA=this._keys.length,Xj=rA+1;Xj<wA;Xj++)this._keys[Xj-1]=this._keys[Xj],this._values[Xj-1]=this._values[Xj];return this._keys.length--,this._values.length--,cA===this._cacheKey&&(this._cacheKey=iA,this._cacheIndex=-2),!0}return!1},Bj.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=iA,this._cacheIndex=-2},Bj.prototype.keys=function(){return new HA(this._keys,this._values,fj)},Bj.prototype.values=function(){return new HA(this._keys,this._values,xj)},Bj.prototype.entries=function(){return new HA(this._keys,this._values,ye)},Bj.prototype["@@iterator"]=function(){return this.entries()},Bj.prototype[a]=function(){return this.entries()},Bj.prototype._find=function(cA,rA){return this._cacheKey!==cA&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=cA)),this._cacheIndex<0&&rA&&(this._cacheIndex=this._keys.length,this._keys.push(cA),this._values.push(void 0)),this._cacheIndex},Bj}();function fj(Bj,cA){return Bj}function xj(Bj,cA){return cA}function ye(Bj,cA){return[Bj,cA]}}function hr(){return function(){function iA(){this._map=new k}return Object.defineProperty(iA.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),iA.prototype.has=function(hA){return this._map.has(hA)},iA.prototype.add=function(hA){return this._map.set(hA,hA),this},iA.prototype.delete=function(hA){return this._map.delete(hA)},iA.prototype.clear=function(){this._map.clear()},iA.prototype.keys=function(){return this._map.keys()},iA.prototype.values=function(){return this._map.values()},iA.prototype.entries=function(){return this._map.entries()},iA.prototype["@@iterator"]=function(){return this.keys()},iA.prototype[a]=function(){return this.keys()},iA}()}function o6(){var iA=16,hA=s.create(),HA=fj();return function(){function rA(){this._key=fj()}return rA.prototype.has=function(wA){var Xj=xj(wA,!1);return Xj!==void 0?s.has(Xj,this._key):!1},rA.prototype.get=function(wA){var Xj=xj(wA,!1);return Xj!==void 0?s.get(Xj,this._key):void 0},rA.prototype.set=function(wA,Xj){var fr=xj(wA,!0);return fr[this._key]=Xj,this},rA.prototype.delete=function(wA){var Xj=xj(wA,!1);return Xj!==void 0?delete Xj[this._key]:!1},rA.prototype.clear=function(){this._key=fj()},rA}();function fj(){var rA;do rA="@@WeakMap@@"+cA();while(s.has(hA,rA));return hA[rA]=!0,rA}function xj(rA,wA){if(!e.call(rA,HA)){if(!wA)return;Object.defineProperty(rA,HA,{value:s.create()})}return rA[HA]}function ye(rA,wA){for(var Xj=0;Xj<wA;++Xj)rA[Xj]=Math.random()*255|0;return rA}function Bj(rA){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(rA)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(rA)):ye(new Uint8Array(rA),rA):ye(new Array(rA),rA)}function cA(){var rA=Bj(iA);rA[6]=rA[6]&79|64,rA[8]=rA[8]&191|128;for(var wA="",Xj=0;Xj<iA;++Xj){var fr=rA[Xj];(Xj===4||Xj===6||Xj===8)&&(wA+="-"),fr<16&&(wA+="0"),wA+=fr.toString(16).toLowerCase()}return wA}}function se(iA){return iA.__=void 0,delete iA.__,iA}})})(ocA||(ocA={}));self.browser||(self.browser=y2());var $2="contentScriptMetadata";var DA=J(tA()),S6j=DA.union([DA.literal("none"),DA.literal("name"),DA.literal("honorific-prefix"),DA.literal("given-name"),DA.literal("additional-name"),DA.literal("family-name"),DA.literal("honorific-suffix"),DA.literal("nickname"),DA.literal("organization-title"),DA.literal("username"),DA.literal("new-password"),DA.literal("current-password"),DA.literal("one-time-code"),DA.literal("organization"),DA.literal("street-address"),DA.literal("address-line1"),DA.literal("address-line2"),DA.literal("address-line3"),DA.literal("address-level1"),DA.literal("address-level2"),DA.literal("address-level3"),DA.literal("address-level4"),DA.literal("country"),DA.literal("country-name"),DA.literal("postal-code"),DA.literal("cc-name"),DA.literal("cc-given-name"),DA.literal("cc-additional-name"),DA.literal("cc-family-name"),DA.literal("cc-number"),DA.literal("cc-exp"),DA.literal("cc-exp-month"),DA.literal("cc-exp-year"),DA.literal("cc-csc"),DA.literal("cc-type"),DA.literal("transaction-currency"),DA.literal("transaction-amount"),DA.literal("language"),DA.literal("bday"),DA.literal("bday-day"),DA.literal("bday-month"),DA.literal("bday-year"),DA.literal("sex"),DA.literal("url"),DA.literal("photo"),DA.literal("tel"),DA.literal("tel-country-code"),DA.literal("tel-national"),DA.literal("tel-area-code"),DA.literal("tel-local"),DA.literal("tel-local-prefix"),DA.literal("tel-local-suffix"),DA.literal("tel-extension"),DA.literal("email"),DA.literal("impp"),DA.literal("crypto-address"),DA.literal("crypto-recovery-seed")]),H6j=DA.union([DA.literal("001"),DA.literal("002"),DA.literal("003"),DA.literal("004"),DA.literal("005"),DA.literal("006"),DA.literal("100"),DA.literal("101"),DA.literal("102"),DA.literal("103"),DA.literal("104"),DA.literal("105"),DA.literal("106"),DA.literal("107"),DA.literal("108"),DA.literal("109"),DA.literal("110"),DA.literal("111"),DA.literal("112"),DA.literal("113"),DA.literal("114"),DA.literal("115")]),Rke=DA.union([DA.literal("login"),DA.literal("credit-card"),DA.literal("secure-note"),DA.literal("identity"),DA.literal("password"),DA.literal("document"),DA.literal("software-license"),DA.literal("bank-account"),DA.literal("database"),DA.literal("driver-license"),DA.literal("outdoor-license"),DA.literal("membership"),DA.literal("passport"),DA.literal("reward-program"),DA.literal("ssn"),DA.literal("wireless-router"),DA.literal("server"),DA.literal("email"),DA.literal("api-credential"),DA.literal("medical-record"),DA.literal("ssh"),DA.literal("crypto-wallet")]),M6j=DA.readonly(DA.strict({title:DA.string,fields:DA.array(DA.strict({autocomplete:S6j,value:DA.union([DA.string,DA.array(DA.readonly(DA.number)),DA.undefined])})),notes:DA.union([DA.string,DA.undefined])})),K6j=DA.readonly(DA.strict({type:H6j,saveRequest:M6j})),gdA=DA.union([DA.readonly(DA.strict({name:DA.literal("hello")})),DA.readonly(DA.strict({name:DA.literal("create-item"),data:K6j}))]),N6j=DA.readonly(DA.strict({buildNumber:DA.number})),L6j=DA.readonly(DA.strict({saved:DA.boolean})),Dke=DA.union([DA.readonly(DA.strict({name:DA.literal("hello"),data:N6j})),DA.readonly(DA.strict({name:DA.literal("create-item"),data:L6j}))]);function hdA(A){return!!(A&&typeof A=="object"&&["Success","Error"].includes(A.type))}var Oh="OPShouldLockNotification",nl="OPDidLockNotification",br="OPDidUnlockNotification",Jn="OPFeatureFlagsUpdatedNotification",Rh="AccountHandlerDidLockNotification",ZE="AccountHandlerAccountDestroyedNotification",q7="UpdateAccounts",Ak="AccountRemoved",Yi="AccountAdded",Dh="OPDidConnectToDesktop",x7="NotificationsExpired",v7="SignInWithButtonsUpdated",G7="SignInWithCompleted",nG="SignInWithFlowStarted",OO="SignInWithProviderClick",oG="SignInWithUnexpectedNavigation",cB="PageChange",f7="ItemFilled",Je="001",ea="002",qdA="003",O6="004",ol="005",RO="006",xdA="099",iy="100",vdA="101",GdA="102",DO="103",fdA="104",FdA="105",TO="106",bdA="0$$",ydA="107",CO="108",$dA="109",wdA="110",IdA="111",jc="112",PdA="113",Zi="114",iG="115",OdA="116";var RdA="912";var Q2="P",Y2="E",sG="B",lG="F",_O="I";var SO="_execute_action",HO="_execute_browser_action",MO="lock";function U6j(A){return browser.runtime.getManifest().manifest_version===A}function ka(){return U6j(3)}var DdA=[{browserName:"Chromium",channelName:"local",extensionId:"hjlinigoblmkhjejkmbegnoaljkphmgo"},{browserName:"Chromium",channelName:"internalNightly",extensionId:"bkpbhnjcbehoklfkljkkbbmipaphipgl"},{browserName:"Chromium",channelName:"nightly",extensionId:"gejiddohjgogedgjnonbofjigllpkmbf"},{browserName:"Chromium",channelName:"beta",extensionId:"khgocmkkpikpnmmkgmdnfckapcdkgfaf"},{browserName:"Chromium",channelName:"stable",extensionId:"aeblfdkhhhdcdjpifhhbdiojplfjncoa"}];var wj;(function(A){A.SshKeyTitle="ssh-key-title",A.SshKey="ssh-key",A.None="none",A.Name="name",A.HonorificPrefix="honorific-prefix",A.GivenName="given-name",A.AdditionalName="additional-name",A.FamilyName="family-name",A.HonorificSuffix="honorific-suffix",A.Nickname="nickname",A.OrganizationTitle="organization-title",A.Username="username",A.NewPassword="new-password",A.CurrentPassword="current-password",A.OneTimeCode="one-time-code",A.Organization="organization",A.StreetAddress="street-address",A.AddressLine1="address-line1",A.AddressLine2="address-line2",A.AddressLine3="address-line3",A.AddressLevel1="address-level1",A.AddressLevel2="address-level2",A.AddressLevel3="address-level3",A.AddressLevel4="address-level4",A.Country="country",A.CountryName="country-name",A.PostalCode="postal-code",A.CcName="cc-name",A.CcGivenName="cc-given-name",A.CcAdditionalName="cc-additional-name",A.CcFamilyName="cc-family-name",A.CcNumber="cc-number",A.CcExp="cc-exp",A.CcExpMonth="cc-exp-month",A.CcExpYear="cc-exp-year",A.CcCsc="cc-csc",A.CcType="cc-type",A.TransactionCurrency="transaction-currency",A.TransactionAmount="transaction-amount",A.Language="language",A.Bday="bday",A.BdayDay="bday-day",A.BdayMonth="bday-month",A.BdayYear="bday-year",A.Sex="sex",A.Url="url",A.Photo="photo",A.Tel="tel",A.TelCountryCode="tel-country-code",A.TelNational="tel-national",A.TelAreaCode="tel-area-code",A.TelLocal="tel-local",A.TelLocalPrefix="tel-local-prefix",A.TelLocalSuffix="tel-local-suffix",A.TelExtension="tel-extension",A.Email="email",A.Impp="impp",A.CryptoAddress="crypto-address",A.CryptoRecoverySeed="crypto-recovery-seed",A.RecoveryCode="recovery-code"})(wj||(wj={}));var KO;(function(A){A.ClickOpid="clickOpid",A.ClickQuerySelector="clickQuerySelector",A.FillOpid="fillOpid",A.FillQuerySelector="fillQuerySelector",A.FocusOpid="focusOpid",A.Submit="submit"})(KO||(KO={}));var NO;(function(A){A.Favorite="favorite",A.Lock="lock",A.Chevron="chevron",A.ChevronPressed="chevronPressed",A.Key="key"})(NO||(NO={}));var ec;(function(A){A.Circle="circle",A.RoundedRect="roundedRect",A.Rect="rect"})(ec||(ec={}));var TdA;(function(A){A.SecretKey="secretKey",A.Sso="sso",A.WebAuthn="webAuthn"})(TdA||(TdA={}));var CdA;(function(A){A.Vault="vault",A.Archive="archive",A.Favorites="favorites",A.Categories="categories",A.WatchtowerCompromised="watchtowerCompromised",A.WatchtowerVulnerable="watchtowerVulnerable",A.WatchtowerReused="watchtowerReused",A.WatchtowerWeak="watchtowerWeak",A.WatchtowerUnsecured="watchtowerUnsecured",A.WatchtowerInactiveMfa="watchtowerInactiveMfa",A.WatchtowerInWrongAccount="watchtowerInWrongAccount",A.WatchtowerPasskeyAvailable="watchtowerPasskeyAvailable",A.WatchtowerExpiring="watchtowerExpiring"})(CdA||(CdA={}));var Ap;(function(A){A.FeatureFlags="feature_flags",A.LegacySearchResult="legacy_search_result",A.SmartSearchResult="smart_search_result",A.SmartSearchFilterVault="smart_search_filter_vault",A.LegacySearchFilterVault="legacy_search_filter_vault",A.SmartSearchFilterFavorite="smart_search_filter_favorite",A.LegacySearchFilterFavorite="legacy_search_filter_favorite",A.SmartSearchFilterCategory="smart_search_filter_category",A.LegacySearchFilterCategory="legacy_search_filter_category",A.SmartSearchFilterTag="smart_search_filter_tag",A.LegacySearchFilterTag="legacy_search_filter_tag",A.SmartSearchFilterUntag="smart_search_filter_untag",A.LegacySearchFilterUntag="legacy_search_filter_untag",A.SetUpAnotherDevice="set_up_another_device",A.CopyLink="copy_link",A.ShareLink="share_link",A.SetUpAnotherDeviceSetupCode="set_up_another_device_setup_code",A.RemoveCard="remove_card",A.SafariExtensionCard="safari_extension_card",A.ProfileCard="profile_card",A.LabsCard="labs_card",A.AppleWatchCard="apple_watch_card",A.CustomizeHomeCard="customize_home_card",A.PinnedFieldsCard="pinned_fields_card",A.AutofillCard="autofill_card",A.Profile="profile_view",A.Watchtower="watchtower",A.WatchtowerPasswordStrengthBar="password_strength_bar",A.WatchtowerCompromisedWebsites="compromised_websites",A.WatchtowerVulnerablePasswords="vulnerable_passwords",A.WatchtowerPasskeysAvailable="passkeys_available",A.WatchtowerWrongAccount="items_wrong_account",A.WatchtowerReusedPasswords="reused_passwords",A.WatchtowerWeakPasswords="weak_passwords",A.WatchtowerUnsecuredWebsites="unsecured_websites",A.Watchtower2FA="2FA",A.WatchtowerExpiringItems="expiring_items",A.WatchtowerDuplicateItems="duplicate_items",A.WatchtowerConflictingShortcuts="conflicting_shortcuts",A.WatchtowerDeveloperCredentials="dev_credentials_learn_more",A.WatchtowerRecoveryCodes="setup_recovery_code",A.WatchtowerDataInvolvedInBreach="data_involved_in_breach",A.WatchtowerIgnoredAlerts="ignored_alerts",A.StartHere="start_here",A.AddToBrowser="add_to_browser",A.SetUpAutofill="set_up_autofill",A.OpenTutorial="open_tutorial",A.ImportNext="import_next",A.InviteNext="invite_next",A.InviteSkip="invite_skip",A.DevicesNext="devices_next",A.ImportAddFirstItems="add_first_items",A.ImportMoreToAdd="have_more_to_add",A.ImportAddItemsChooseMethod="add_items_choose_method",A.MigrateDataToOnePassword="migrate_data_to_1p",A.ImportDoNotAskAboutMigrationsAgain="dont_ask_migrations_again",A.ImportCreateSingleItem="create_one_new_item",A.Cancel="cancel",A.DismissMigrateDataTo1P="dismiss_migrate_data_to_1p",A.ItemImport="item_import",A.Safari="safari",A.Firefox="firefox",A.Chrome="chrome",A.Edge="edge",A.Bitwarden="bitwarden",A.Brave="brave",A.DifferentBrowser="different_browser",A.LastPass="lastpass",A.ICloudKeychain="icloud_keychain",A.Dashlane="dashlane",A.Keepass="keepass",A.KeepassXc="keepass_xc",A.Roboform="roboform",A.DeliniaSecretServer="delinea_secret_server",A.OnePassword="1password",A.DifferentPasswordManager="different_password_manager",A.MemorizedPasswords="memorized_passwords",A.PenAndPaper="pen_and_paper",A.Spreadsheet="spreadsheet",A.Csv="csv",A.DoNotSeeMyOption="i_dont_see_my_option",A.AddNewItemScreenGettingStarted="getting_started",A.AddNewItemScreenDeveloperTools="developer_tools",A.AddNewItemScreenMostPopularLogins="popular_logins",A.AddNewItemScreenCryptoBasics="crypto_basics",A.AddNewItemScreenTravelEssentials="travel_essentials",A.PinExtension="pin_extension",A.Done="done",A.Skip="skip",A.GetExtension="get_extension",A.ClickOpenBrowser="click_open_browser",A.GoToAutofillSettings="go_to_autofill_settings",A.UseAutofill="use_autofill",A.AutofillIsOn="autofill_is_on",A.AutofillIsReady="autofill_is_ready",A.AutofillEnrollmentFailed="autofill_enrollment_failed",A.AutofillStepOne="autofill_step_1",A.AutofillStepTwo="autofill_step_2",A.AutofillStepThree="autofill_step_3",A.AutofillStepFour="autofill_step_4",A.ClickPasswordField="click_password_field",A.UseSuggestedPassword="use_suggested_password",A.PracticeSaveAndFill="practice_save_and_fill",A.SaveItem="save_item",A.SavedInOnePassword="saved_in_1password",A.SelectUsernameField="select_username_field",A.FillWithOneClick="fill_with_one_click",A.YouAreDone="youre_done",A.ManageAccount="manage_account",A.People="people",A.InvitePeople="invite_people",A.Invite="invite",A.Accounts="accounts",A.AccountPage="account_page",A.FindInList="find_in_list",A.GlobalSearchField="global_search_field",A.PullToSearch="pull_to_search",A.ItemTemplate="item_template",A.ItemSharing="item_sharing",A.ExportData="export_data",A.GitCommitSigning="git_commit_signing",A.EditAutomatically="edit_automatically",A.CopySnippet="copy_snippet",A.Close="close",A.SettingsDeveloper="settings_developer",A.DeveloperExperienceOnboarding="developer_experience_onboarding",A.DeveloperExperienceEnable="developer_experience_enable",A.DeveloperExperienceDismiss="developer_experience_dismiss",A.DeveloperExperienceSetting="developer_experience_setting",A.DeveloperWatchtowerSetting="developer_watchtower_setting",A.DeveloperExperienceHome="developer_experience_home",A.DeveloperExperienceSsh="developer_experience_ssh",A.DeveloperExperienceCli="developer_experience_cli",A.DeveloperExperienceWatchtower="developer_experience_watchtower",A.DeveloperExperienceEnvironments="developer_experience_environments",A.DeveloperExperienceActivity="developer_experience_activity",A.SshBookmarksCreate="ssh_bookmarks_create",A.SshBookmarksDelete="ssh_bookmarks_delete",A.SshBookmarksConnect="ssh_bookmarks_connect",A.SshBookmarksConfigSetting="ssh_bookmarks_config_setting",A.CopySecretReference="copy_secret_reference",A.MobileHome="mobile_home",A.ChromeAutofillPromptScreen="chrome_autofill_prompt_screen",A.BraveAutofillPromptScreen="brave_autofill_prompt_screen",A.GetStarted="get_started",A.AutofillOnChrome="autofill_on_chrome",A.DefaultTerminalSetting="default_terminal_setting",A.SshAgentSetting="ssh_agent_setting",A.AntiPeekModeToggleOn="anti_peek_mode_toggle_on",A.AntiPeekModeToggleOff="anti_peek_mode_toggle_off",A.AntiPeekModeShareBlocked="anti_peek_mode_share_blocked",A.MobileHomeScreeenCustomize="mobile_home_screen_customize",A.NearbyOnboardingSetLocation="nearby_onboarding_set_location",A.UseMaps="use_maps",A.HelpMenu="help_menu",A.SupportCenterLink="support_center_link",A.TutorialVideosLinks="tutorial_videos_link",A.CommunityForumLink="community_forum_link",A.ContactSupportLink="contact_support_link",A.LatestReleasesLink="latest_releases_link",A.ReportXamIssue="report_xam_issue",A.SendDiagnosticsReport="send_diagnostics_report",A.GettingStartedPlatform="getting_started_platform",A.SecurityReview="security_review",A.PreviewChanges="preview_changes",A.ApplyNewSettings="apply_new_settings",A.KeepExistingSettings="keep_existing_settings",A.CustomizeInSettings="customize_in_settings",A.CloseSecurityReviewIcon="close_security_review_icon",A.UnlockBiometrics="unlock_biometrics",A.UnlockDevicePasscode="unlock_device_passcode",A.UnlockMacPassword="unlock_mac_password",A.UnlockWindowsTpm="unlock_windows_tpm",A.AutomaticWindowsHelloPrompt="automatic_windows_hello_prompt",A.RequireAccountPasswordTime="require_account_password_time",A.SetUpRecoveryCode="set_up_recovery_code",A.DeclineRecoveryCode="decline_recovery_code",A.RecoveryCode="recovery_code",A.UnlockWhenDeviceUnlocks="unlock_when_device_unlocks",A.AskToUnlockAgainTime="ask_to_unlock_again_time",A.LockWhenDeviceLocks="lock_when_device_locks",A.LockAfterExitTime="lock_after_exit_time",A.LockAfterIdleTime="lock_after_idle_time",A.UserFeedback="user_feedback",A.SubmitUserFeedback="submit_user_feedback",A.LabsHomepage="labs_homepage",A.VerifierHomepage="verifier_homepage",A.VerifierBillboards="verifier_billboards",A.VerifierSearch="verifier_search",A.VerifierRecentAction="verifier_recent_action",A.VerifierComposeScreen="verifier_compose_screen",A.VerifierComposeNoteField="verifier_compose_note_field",A.SendVerificationRequest="send_verification_request",A.VerifierChallengeReceived="verifier_challenge_received",A.VerifierRequesterRow="verifier_requester_row",A.VerifierConfirmChallenge="verifier_confirm_challenge",A.VerifierRejectChallenge="verifier_reject_challenge",A.VerifierResponseReceived="verifier_response_received",A.StopInteractingDisclosure="stop_interacting_disclosure",A.Variables="variables",A.Destinations="destinations",A.DeleteIcon="delete_icon",A.ValueConcealRevealToggleIcon="value_conceal_reveal_toggle_icon",A.DeleteLocalFileMount="delete_local_file_mount",A.DeleteDestination="delete_destination",A.ManageAccess="manage_access",A.CopyIcon="copy_icon",A.InstallExtensionWarning="install_extension_warning",A.InstallExtensionBlocked="install_extension_block",A.InstallExtension="install_extension",A.EnableExtension="enable_extension",A.Recheck="recheck",A.Snooze="snooze",A.LearnMoreLink="learn_more_data_safety_link",A.InstallExtensionBanner="install_extension_banner",A.InstallExtensionBannerDismiss="install_extension_banner_dismiss",A.EnableExtensionWarning="enable_extension_warning",A.EnableExtensionBlocked="enable_extension_blocking",A.EssentialSetupTelemetryModalRemindMeLater="essential_setup_telemetry_modal_remind_me_later",A.AutofillNotEnabled="autofill_not_enabled",A.AutofillSnackbarFixButton="autofill_snackbar_fix_button",A.AutofillSnackbarDismissButton="autofill_snackbar_dismiss_button",A.AutomaticLock="automatic_lock",A.LinkedAppEnrollmentApprovingDevice="linked_app_enrollment_approving_device",A.TransferKey="transfer_key",A.DenyAccess="deny_access",A.CancelEnrollmentPending="cancel_enrollment_pending",A.SelectPreset="select_preset",A.Dismiss="dismiss",A.TakeSurvey="take_survey",A.PickSecurityPreset="pick_security_preset",A.DismissSecurityReview="dismiss_security_review"})(Ap||(Ap={}));var _dA;(function(A){A.Archive="archive",A.None="none"})(_dA||(_dA={}));var sy;(function(A){A.Enabled="enabled",A.Disabled="disabled"})(sy||(sy={}));var ly;(function(A){A.Default="default",A.Destructive="destructive",A.DestructiveAlt="destructiveAlt",A.Primary="primary",A.PrimaryAlt="primaryAlt",A.PrimaryWhite="primaryWhite",A.Transparent="transparent",A.TransparentBlue="transparentBlue"})(ly||(ly={}));var SdA;(function(A){A.Subtle="subtle",A.Warning="warning",A.Info="info",A.SolidBlue="solidBlue",A.SolidPurple="solidPurple",A.SolidGreen="solidGreen",A.SolidRed="solidRed"})(SdA||(SdA={}));var HdA;(function(A){A.Ascending="ascending",A.Descending="descending"})(HdA||(HdA={}));var LO;(function(A){A.Name="name",A.MainCategory="mainCategory",A.FrequentlyUsed="frequentlyUsed",A.RecentlyUsed="recentlyUsed"})(LO||(LO={}));var jp;(function(A){A.Individual="I",A.Family="F",A.Team="B",A.Unsupported="Unsupported"})(jp||(jp={}));var F7;(function(A){A.Registered="R",A.Active="A",A.Suspended="S",A.Deleted="D",A.Purging="X",A.Purged="Z",A.Unsupported="Unsupported"})(F7||(F7={}));var cy;(function(A){A.Active="A",A.Pending="P",A.CancelAtEnd="C",A.Frozen="F",A.Lapsed="L",A.Trialing="T",A.Unsupported="Unsupported"})(cy||(cy={}));var b7;(function(A){A.Personal="P",A.Everyone="E",A.Transfer="T",A.UserCreated="U",A.System="S",A.GeneratedPasswords="G",A.ManagedApplications="M",A.DeveloperEnvironment="D",A.Unsupported="Unsupported"})(b7||(b7={}));var Lc;(function(A){A.PendingActivation="P",A.Active="A",A.Suspended="S",A.Deleted="D",A.MustMigrateAuth="M",A.RecoveryStarted="1",A.RecoveryAccepted="2",A.Registered="R",A.EmailVerifiedIncomplete="V",A.ProvisionPending="T",A.ProvisionStarted="3",A.ProvisionAccepted="4",A.ProvisionSuspended="5",A.Purging="X",A.Purged="Z",A.Unsupported="Unsupported"})(Lc||(Lc={}));var MdA;(function(A){A.Primary="primary",A.PrimaryOutline="primaryOutline",A.DangerOutline="dangerOutline",A.Grey="grey",A.Invisible="invisible"})(MdA||(MdA={}));var KdA;(function(A){A.GuidedSignInExperience="guidedSignInExperience"})(KdA||(KdA={}));var NdA;(function(A){A.Active="active",A.Frozen="frozen",A.Guest="guest",A.Locked="locked"})(NdA||(NdA={}));var cG;(function(A){A.DownloadExtension="download-extension",A.SetUpAutofill="set-up-autofill",A.MigrateData="migrate-data",A.Practice="practice",A.AccessPasswords="access-passwords",A.InviteFamilyMembers="invite-family-members",A.PinExtension="pin-extension"})(cG||(cG={}));var LdA;(function(A){A.PhoneOrTablet="phoneOrTablet",A.Computer="computer"})(LdA||(LdA={}));var zdA;(function(A){A.AddDesktopApp="addDesktopApp",A.AddMobileApp="addMobileApp",A.AddExtension="addExtension"})(zdA||(zdA={}));var dy;(function(A){A.Navigation="Navigation",A.Interaction="Interaction",A.WithProvider="WithProvider"})(dy||(dy={}));var tc;(function(A){A.OnePassword="OnePassword",A.Bitwarden="Bitwarden",A.Chrome="Chrome",A.Edge="Edge",A.Dashlane="Dashlane",A.LastPass="LastPass",A.Keeper="Keeper",A.Okta="Okta",A.Unknown="Unknown"})(tc||(tc={}));var Th;(function(A){A.Google="Google",A.Microsoft="Microsoft"})(Th||(Th={}));var UdA;(function(A){A.SshKeyUsage="SshKeyUsage",A.CliAccountAccess="CliAccountAccess"})(UdA||(UdA={}));var VdA;(function(A){A.Street="Street",A.City="City",A.Country="Country",A.Zip="Zip",A.State="State"})(VdA||(VdA={}));var XdA;(function(A){A.Us="us",A.Browser="browser"})(XdA||(XdA={}));var Ch;(function(A){A.Unknown="unknown",A.Button="button",A.Checkbox="checkbox",A.Color="color",A.Date="date",A.DatetimeLocal="datetime-local",A.Email="email",A.File="file",A.Hidden="hidden",A.Image="image",A.Month="month",A.Number="number",A.Password="password",A.Radio="radio",A.Range="range",A.Reset="reset",A.Search="search",A.Submit="submit",A.Tel="tel",A.Text="text",A.Time="time",A.Url="url",A.Week="week",A.SelectOne="select-one",A.SelectMultiple="select-multiple",A.Textarea="textarea"})(Ch||(Ch={}));var ky;(function(A){A.ActiveFieldOnly="activeFieldOnly",A.AllFields="allFields",A.UserEdited="userEdited"})(ky||(ky={}));var jk;(function(A){A.Brex="Brex",A.Privacy="Privacy"})(jk||(jk={}));var zc;(function(A){A.None="none",A.Login="login",A.Registration="registration",A.ChangePassword="change-password",A.OneTimeCode="one-time-code",A.ChangeEmail="change-email",A.SshKey="ssh-key",A.Payment="payment"})(zc||(zc={}));var JdA;(function(A){A.Home="home",A.Work="work",A.Mobile="mobile",A.Fax="fax",A.Pager="pager"})(JdA||(JdA={}));var WdA;(function(A){A.SystemPrompt="systemPrompt",A.ItemList="itemList",A.SaveAndFill="saveAndFill"})(WdA||(WdA={}));var QdA;(function(A){A.SshAgent="SshAgent",A.Activity="Activity"})(QdA||(QdA={}));var ek;(function(A){A.SecuritySettingsFlexible="SecuritySettingsFlexible",A.SecuritySettingsBalanced="SecuritySettingsBalanced",A.SecuritySettingsStrict="SecuritySettingsStrict"})(ek||(ek={}));var YdA;(function(A){A.Include="include",A.Exclude="exclude"})(YdA||(YdA={}));var ZdA;(function(A){A.Online="Online",A.Offline="Offline",A.Unknown="Unknown"})(ZdA||(ZdA={}));var AkA;(function(A){A.Name="name",A.LockState="lockState",A.SignedIn="signedIn"})(AkA||(AkA={}));var jkA;(function(A){A.Good="good",A.WillBlock="will_block",A.Blocked="blocked",A.Notify="notify"})(jkA||(jkA={}));var ekA;(function(A){A.Active="A",A.Deleted="D",A.Unsupported="Unsupported"})(ekA||(ekA={}));var tkA;(function(A){A.Owners="O",A.Administrators="A",A.Recovery="R",A.ExternalAccountManagers="E",A.TeamMembers="M",A.UserDefined="U",A.Unsupported="Unsupported"})(tkA||(tkA={}));var rkA;(function(A){A.CopyItemJson="copyItemJson"})(rkA||(rkA={}));var tk;(function(A){A.Default="Default",A.Host="Host",A.Never="Never"})(tk||(tk={}));var akA;(function(A){A.Regular="R",A.Service="S",A.Guest="G",A.Unsupported="Unsupported"})(akA||(akA={}));var nkA;(function(A){A.Name="name",A.Email="email"})(nkA||(nkA={}));var okA;(function(A){A.CacheFirst="cacheFirst",A.NetworkOnly="networkOnly"})(okA||(okA={}));var ikA;(function(A){A.Complete="complete",A.Dismissed="dismissed",A.Incomplete="incomplete"})(ikA||(ikA={}));var skA;(function(A){A.Add="add",A.Remove="remove"})(skA||(skA={}));var lkA;(function(A){A.Locked="locked",A.Unlocked="unlocked"})(lkA||(lkA={}));var ckA;(function(A){A.Day="day",A.Week="week",A.Month="month",A.Year="year"})(ckA||(ckA={}));var dkA;(function(A){A.PayAsYouGo="payAsYouGo",A.PayUpFront="payUpFront",A.FreeTrial="freeTrial"})(dkA||(dkA={}));var kkA;(function(A){A.Individual="individual",A.Family="family",A.TeamStarterPack="teamStarterPack"})(kkA||(kkA={}));var ukA;(function(A){A.Password="password",A.OneTimePassword="oneTimePassword"})(ukA||(ukA={}));var EkA;(function(A){A.Png="png",A.Svg="svg",A.OnesAndZeros="onesAndZeros"})(EkA||(EkA={}));var pkA;(function(A){A.DateCreated="dateCreated",A.DateModified="dateModified",A.Title="title",A.RecentlyUsed="recentlyUsed",A.FrequentlyUsed="frequentlyUsed",A.PasswordStrength="passwordStrength",A.MostRelevant="mostRelevant"})(pkA||(pkA={}));var mkA;(function(A){A.Ascending="ascending",A.Descending="descending"})(mkA||(mkA={}));var BkA;(function(A){A.Active="Active",A.Archived="Archived",A.Deleted="Deleted"})(BkA||(BkA={}));var gkA;(function(A){A.FrozenAccount="frozenAccount",A.SsoMigration="ssoMigration",A.RecentlyDeleted="recentlyDeleted"})(gkA||(gkA={}));var hkA;(function(A){A.Dismiss="dismiss",A.Cancel="cancel"})(hkA||(hkA={}));var dB;(function(A){A.Info="info",A.Warn="warn",A.Error="error",A.Exception="exception"})(dB||(dB={}));var qkA;(function(A){A.None="none",A.Single="single",A.Double="double"})(qkA||(qkA={}));var xkA;(function(A){A.Title="title",A.Primary="primary",A.Secondary="secondary",A.Tags="tags",A.CallToAction="callToAction",A.ItemLocation="itemLocation"})(xkA||(xkA={}));var vkA;(function(A){A.RetainOriginal="RetainOriginal",A.TrashOriginal="TrashOriginal"})(vkA||(vkA={}));var uy;(function(A){A.BiometricsOnly="BiometricsOnly",A.BiometricsOrWatch="BiometricsOrWatch",A.WatchOnly="WatchOnly",A.NoneAvailable="NoneAvailable"})(uy||(uy={}));var zO;(function(A){A.Unknown="Unknown",A.NoneAvailable="NoneAvailable",A.TouchId="TouchId",A.FaceId="FaceId"})(zO||(zO={}));var Uo;(function(A){A.Available="Available",A.NotAvailable="NotAvailable",A.SensorUnavailable="SensorUnavailable",A.NotEnrolled="NotEnrolled",A.Lockout="Lockout",A.NotInteractive="NotInteractive",A.WatchNotAvailable="WatchNotAvailable",A.EnrollmentChanged="EnrollmentChanged",A.Disconnected="Disconnected",A.NotPaired="NotPaired",A.Unknown="Unknown"})(Uo||(Uo={}));var UO;(function(A){A.Active="ACTIVE",A.Shipped="SHIPPED",A.Expired="EXPIRED",A.Locked="LOCKED",A.Terminated="TERMINATED"})(UO||(UO={}));var GkA;(function(A){A.Virtual="VIRTUAL",A.Physical="PHYSICAL"})(GkA||(GkA={}));var fkA;(function(A){A.Card="CARD",A.User="USER"})(fkA||(fkA={}));var FkA;(function(A){A.AED="AED",A.AFN="AFN",A.ALL="ALL",A.AMD="AMD",A.XCG="XCG",A.AOA="AOA",A.ARS="ARS",A.AUD="AUD",A.AWG="AWG",A.AZN="AZN",A.BAM="BAM",A.BBD="BBD",A.BDT="BDT",A.BGN="BGN",A.BHD="BHD",A.BIF="BIF",A.BMD="BMD",A.BND="BND",A.BOB="BOB",A.BOV="BOV",A.BRL="BRL",A.BSD="BSD",A.BTN="BTN",A.BWP="BWP",A.BYN="BYN",A.BZD="BZD",A.CAD="CAD",A.CDF="CDF",A.CHE="CHE",A.CHF="CHF",A.CHW="CHW",A.CLF="CLF",A.CLP="CLP",A.CNY="CNY",A.COP="COP",A.COU="COU",A.CRC="CRC",A.CUC="CUC",A.CUP="CUP",A.CVE="CVE",A.CZK="CZK",A.DJF="DJF",A.DKK="DKK",A.DOP="DOP",A.DZD="DZD",A.EGP="EGP",A.ERN="ERN",A.ETB="ETB",A.EUR="EUR",A.FJD="FJD",A.FKP="FKP",A.GBP="GBP",A.GEL="GEL",A.GHS="GHS",A.GIP="GIP",A.GMD="GMD",A.GNF="GNF",A.GTQ="GTQ",A.GYD="GYD",A.HKD="HKD",A.HNL="HNL",A.HRK="HRK",A.HTG="HTG",A.HUF="HUF",A.IDR="IDR",A.ILS="ILS",A.INR="INR",A.IQD="IQD",A.IRR="IRR",A.ISK="ISK",A.JMD="JMD",A.JOD="JOD",A.JPY="JPY",A.KES="KES",A.KGS="KGS",A.KHR="KHR",A.KMF="KMF",A.KPW="KPW",A.KRW="KRW",A.KWD="KWD",A.KYD="KYD",A.KZT="KZT",A.LAK="LAK",A.LBP="LBP",A.LKR="LKR",A.LRD="LRD",A.LSL="LSL",A.LYD="LYD",A.MAD="MAD",A.MDL="MDL",A.MGA="MGA",A.MKD="MKD",A.MMK="MMK",A.MNT="MNT",A.MOP="MOP",A.MRU="MRU",A.MUR="MUR",A.MVR="MVR",A.MWK="MWK",A.MXN="MXN",A.MXV="MXV",A.MYR="MYR",A.MZN="MZN",A.NAD="NAD",A.NGN="NGN",A.NIO="NIO",A.NOK="NOK",A.NPR="NPR",A.NZD="NZD",A.OMR="OMR",A.PAB="PAB",A.PEN="PEN",A.PGK="PGK",A.PHP="PHP",A.PKR="PKR",A.PLN="PLN",A.PYG="PYG",A.QAR="QAR",A.RON="RON",A.RSD="RSD",A.RUB="RUB",A.RWF="RWF",A.SAR="SAR",A.SBD="SBD",A.SCR="SCR",A.SDG="SDG",A.SEK="SEK",A.SGD="SGD",A.SHP="SHP",A.SLE="SLE",A.SLL="SLL",A.SOS="SOS",A.SRD="SRD",A.SSP="SSP",A.STN="STN",A.SVC="SVC",A.SYP="SYP",A.SZL="SZL",A.THB="THB",A.TJS="TJS",A.TMT="TMT",A.TND="TND",A.TOP="TOP",A.TRY="TRY",A.TTD="TTD",A.TWD="TWD",A.TZS="TZS",A.UAH="UAH",A.UGX="UGX",A.USD="USD",A.USN="USN",A.UYI="UYI",A.UYU="UYU",A.UYW="UYW",A.UZS="UZS",A.VED="VED",A.VES="VES",A.VND="VND",A.VUV="VUV",A.WST="WST",A.XAF="XAF",A.XAG="XAG",A.XAU="XAU",A.XBA="XBA",A.XBB="XBB",A.XBC="XBC",A.XBD="XBD",A.XCD="XCD",A.XDR="XDR",A.XOF="XOF",A.XPD="XPD",A.XPF="XPF",A.XPT="XPT",A.XSU="XSU",A.XTS="XTS",A.XUA="XUA",A.XXX="XXX",A.YER="YER",A.ZAR="ZAR",A.ZMW="ZMW",A.ZWL="ZWL",A.ZWG="ZWG"})(FkA||(FkA={}));var bkA;(function(A){A.Monthly="MONTHLY",A.Quarterly="QUARTERLY",A.Yearly="YEARLY",A.OneTime="ONE_TIME"})(bkA||(bkA={}));var Ey;(function(A){A.Production="Production",A.Staging="Staging"})(Ey||(Ey={}));var ykA;(function(A){A.Invited="INVITED",A.Active="ACTIVE",A.Closed="CLOSED",A.Disabled="DISABLED",A.Deleted="DELETED",A.PendingActivation="PENDING_ACTIVATION"})(ykA||(ykA={}));var VO;(function(A){A.Granted="GRANTED",A.Denied="DENIED",A.Unknown="UNKNOWN"})(VO||(VO={}));var $kA;(function(A){A.SignOut="signOut",A.Lock="lock"})($kA||($kA={}));var wkA;(function(A){A.Set="Set",A.Clear="Clear",A.Mixed="Mixed"})(wkA||(wkA={}));var IkA;(function(A){A.Dark="dark",A.Light="light",A.System="system"})(IkA||(IkA={}));var PkA;(function(A){A.AndroidBiometricUnlock="AndroidBiometricUnlock",A.AndroidDevicePinUnlock="AndroidDevicePinUnlock",A.AndroidBiometricOrDevicePinUnlock="AndroidBiometricOrDevicePinUnlock",A.NoneAvailable="NoneAvailable"})(PkA||(PkA={}));var OkA;(function(A){A.Option="option",A.CtrlAlt="ctrlAlt",A.None="none"})(OkA||(OkA={}));var RkA;(function(A){A.MainWindow="mainWindow",A.QuickAccess="quickAccess",A.Menu="menu"})(RkA||(RkA={}));var rn;(function(A){A.Autofill="autofill",A.Download="download",A.Go="go",A.OpenURL="openURL",A.Move="move",A.Copy="copy",A.Archive="archive",A.Restore="restore",A.Export="export",A.Tag="tag",A.Share="share",A.CreatePrivacyCard="createPrivacyCard",A.CreateBrexVendorCard="createBrexVendorCard",A.CatalogAppLaunch="catalogAppLaunch"})(rn||(rn={}));var DkA;(function(A){A.Transparent="transparent",A.Primary="primary"})(DkA||(DkA={}));var TkA;(function(A){A.MerchantLocked="MERCHANT_LOCKED",A.SingleUse="SINGLE_USE"})(TkA||(TkA={}));var CkA;(function(A){A.Transaction="TRANSACTION",A.Monthly="MONTHLY",A.Annually="ANNUALLY",A.Forever="FOREVER"})(CkA||(CkA={}));var _kA;(function(A){A.RevealSecretKey="revealSecretKey",A.ConcealSecretKey="concealSecretKey",A.CopySignInAddress="copySignInAddress",A.CopyEmail="copyEmail",A.CopySecretKey="copySecretKey",A.CopyLink="copyLink",A.CopySsoProvider="copySsoProvider",A.LargeTypeSignInAddress="largeTypeSignInAddress",A.LargeTypeEmail="largeTypeEmail",A.LargeTypeSecretKey="largeTypeSecretKey",A.LargeTypeSsoProvider="largeTypeSsoProvider",A.ChangeEmail="changeEmail",A.ChangeSecretKey="changeSecretKey"})(_kA||(_kA={}));var SkA;(function(A){A.SetUpAnotherDevice="setUpAnotherDevice",A.ManageAccount="manageAccount",A.CreateVault="createVault"})(SkA||(SkA={}));var HkA;(function(A){A.Packed="packed",A.Tpm="tpm",A.AndroidKey="android-key",A.AndroidSafetynet="android-safetynet",A.FidoU2f="fido-u2f",A.Apple="apple",A.None="none"})(HkA||(HkA={}));var MkA;(function(A){A.Dashlane="dashlane"})(MkA||(MkA={}));var KkA;(function(A){A.Bitwarden="bitwarden",A.Safari="safari",A.ICloud="iCloud",A.OnePux="onePux",A.Chrome="chrome"})(KkA||(KkA={}));var NkA;(function(A){A.AttentionSevere="attentionSevere",A.Attention="attention",A.Recommendation="recommendation"})(NkA||(NkA={}));var lr;(function(A){A.AccountFamily="accountFamily",A.AccountIndividual="accountIndividual",A.AccountTeam="accountTeam",A.AllCategories="allCategories",A.AllItems="allItems",A.ApiCredentials="apiCredentials",A.Archive="archive",A.AutoFill1Password="autoFill1Password",A.AutoFillKey="autoFillKey",A.AutoFillKeyboard="autoFillKeyboard",A.AutoFillSettings="autoFillSettings",A.AutoFillToggle="autoFillToggle",A.BankAccount="bankAccount",A.BrexCorporate="brexCorporate",A.BrexVault="brexVault",A.BrexVendor="brexVendor",A.Browserbase="browserbase",A.CreditCard="creditCard",A.CreditCardAmex="creditCardAmex",A.CreditCardDiscover="creditCardDiscover",A.CreditCardMastercard="creditCardMastercard",A.CreditCardVisa="creditCardVisa",A.CryptoWallet="cryptoWallet",A.Database="database",A.Developer="developer",A.DeveloperActivity="developerActivity",A.DeveloperBiometrics="developerBiometrics",A.DeveloperCli="developerCli",A.DeveloperEnvironments="developerEnvironments",A.DeveloperEnvironmentFileMount="developerEnvironmentFileMount",A.DeveloperSsh="developerSsh",A.DeveloperSshBookmark="developerSshBookmark",A.DeveloperWatchtower="developerWatchtower",A.DeviceListAndroidPhone="deviceListAndroidPhone",A.DeviceListAndroidTablet="deviceListAndroidTablet",A.DeviceListBrave="deviceListBrave",A.DeviceListChrome="deviceListChrome",A.DeviceListCLI="deviceListCLI",A.DeviceListEdge="deviceListEdge",A.DeviceListFirefox="deviceListFirefox",A.DeviceListGeneric="deviceListGeneric",A.DeviceListIMac="deviceListIMac",A.DeviceListIPad="deviceListIPad",A.DeviceListIPhone="deviceListIPhone",A.DeviceListMacbookPro="deviceListMacbookPro",A.DeviceListOpera="deviceListOpera",A.DeviceListPC="deviceListPC",A.DeviceListPCLaptop="deviceListPCLaptop",A.DeviceListBraveExtension="deviceListBraveExtension",A.DeviceListChromeExtension="deviceListChromeExtension",A.DeviceListOperaExtension="deviceListOperaExtension",A.DeviceListFirefoxExtension="deviceListFirefoxExtension",A.DeviceListEdgeExtension="deviceListEdgeExtension",A.DeviceListSafariExtension="deviceListSafariExtension",A.DeviceListSafari="deviceListSafari",A.DeviceVerified="deviceVerified",A.Document="document",A.DocumentImage="documentImage",A.DocumentSpreadsheet="documentSpreadsheet",A.DocumentText="documentText",A.DocumentZip="documentZip",A.DriverLicense="driverLicense",A.Email="email",A.EmptyAllItems="emptyAllItems",A.EmptyArchive="emptyArchive",A.EmptyFavorites="emptyFavorites",A.EmptyNoVaults="emptyNoVaults",A.EmptyRecentlyDeleted="emptyRecentlyDeleted",A.EmptyWatchtowerCompromisedWebsites="emptyWatchtowerCompromisedWebsites",A.EmptyWatchtowerDashboard="emptyWatchtowerDashboard",A.EmptyWatchtowerExpiring="emptyWatchtowerExpiring",A.EmptyWatchtowerInactiveMfa="emptyWatchtowerInactiveMfa",A.EmptyWatchtowerInWrongAccount="emptyWatchtowerInWrongAccount",A.EmptyWatchtowerPasskeyAvailable="emptyWatchtowerPasskeyAvailable",A.EmptyWatchtowerPasswordStrength="emptyWatchtowerPasswordStrength",A.EmptyWatchtowerDuplicateItem="emptyWatchtowerDuplicateItem",A.EmptyWatchtowerReusedPasswords="emptyWatchtowerReusedPasswords",A.EmptyWatchtowerUnsecuredWebsites="emptyWatchtowerUnsecuredWebsites",A.EmptyWatchtowerVulnerablePasswords="emptyWatchtowerVulnerablePasswords",A.EmptyWatchtowerWeakPasswords="emptyWatchtowerWeakPasswords",A.Everything="everything",A.Fastmail="fastmail",A.Favorites="favorites",A.Git="git",A.HighlightsBrowserExtension="highlightsBrowserExtension",A.HighlightsDevices="highlightsDevices",A.HighlightsFaceID="highlightsFaceID",A.HighlightsFamily="highlightsFamily",A.HighlightsHandUp="highlightsHandUp",A.HighlightsItemCatalog="highlightsItemCatalog",A.HighlightsItemSharing="highlightsItemSharing",A.HighlightsKey="highlightsKey",A.HighlightsManaging="highlightsManaging",A.HighlightsPasswordlessAuthentication="highlightsPasswordlessAuthentication",A.HighlightsPerformance="highlightsPerformance",A.HighlightsPlatforms="highlightsPlatforms",A.HighlightsQuickAccess="highlightsQuickAccess",A.HighlightsRedesign="highlightsRedesign",A.HighlightsSecurity="highlightsSecurity",A.HighlightsStrongPasswords="highlightsStrongPasswords",A.HighlightsSupport="highlightsSupport",A.HighlightsTeam="highlightsTeam",A.HighlightsWatchtower="highlightsWatchtower",A.HighlightsWebsite="highlightsWebsite",A.HomeAllItems="homeAllItems",A.HomeArchived="homeArchived",A.HomeCategories="homeCategories",A.HomeFavorites="homeFavorites",A.HomeFrequentlyUsed="homeFrequentlyUsed",A.HomeNearby="homeNearby",A.HomePinned="homePinned",A.HomeRecentlyAdded="homeRecentlyAdded",A.HomeRecentlyCreated="homeRecentlyCreated",A.HomeRecentlyDeleted="homeRecentlyDeleted",A.HomeRecentlyModified="homeRecentlyModified",A.HomeRecentlyUsed="homeRecentlyUsed",A.HomeScreenBillboardAppleWatchTransparent="homeScreenBillboardAppleWatchTransparent",A.HomeScreenBillboardCustomizeHomeTransparent="homeScreenBillboardCustomizeHomeTransparent",A.HomeScreenBillboardIllustrationAppleWatch="homeScreenBillboardIllustrationAppleWatch",A.HomeScreenBillboardIllustrationAutoFill="homeScreenBillboardIllustrationAutoFill",A.HomeScreenBillboardIllustrationCustomizeHome="homeScreenBillboardIllustrationCustomizeHome",A.HomeScreenBillboardIllustrationPinnedFields="homeScreenBillboardIllustrationPinnedFields",A.HomeScreenBillboardIllustrationSafariExtension="homeScreenBillboardIllustrationSafariExtension",A.HomeScreenBillboardPinnedFieldsTransparent="homeScreenBillboardPinnedFieldsTransparent",A.HomeScreenBillboardProfileTransparent="homeScreenBillboardProfileTransparent",A.HomeScreenBillboardSafariTransparent="homeScreenBillboardSafariTransparent",A.HomeScreenBillboardTipsTransparent="homeScreenBillboardTipsTransparent",A.HomeScreenBillboardWarningTransparent="homeScreenBillboardWarningTransparent",A.HomeScreenInterstitialAppleWatch="homeScreenInterstitialAppleWatch",A.HomeScreenInterstitialEmptyHome="homeScreenInterstitialEmptyHome",A.HomeScreenInterstitialPinnedFields="homeScreenInterstitialPinnedFields",A.HomeTags="homeTags",A.HomeTips="homeTips",A.HomeVaults="homeVaults",A.HomeWatchtower="homeWatchtower",A.Identity="identity",A.ImportGuideBitwarden="importGuideBitwarden",A.ImportGuideCsv="importGuideCsv",A.ImportGuideDashlane="importGuideDashlane",A.ImportGuideDelinea="importGuideDelinea",A.ImportGuideKeypass="importGuideKeypass",A.ImportGuideKeypassXc="importGuideKeypassXc",A.ImportGuideLastPass="importGuideLastPass",A.ImportGuideMemorized="importGuideMemorized",A.ImportGuideOnePassword="importGuideOnePassword",A.ImportGuidePen="importGuidePen",A.ImportGuideRoboForm="importGuideRoboForm",A.ImportGuideSpreadsheet="importGuideSpreadsheet",A.ItemSharing="itemSharing",A.KeyEmpty="keyEmpty",A.KeyError="keyError",A.KeyFilled="keyFilled",A.LabsHero="labsHero",A.Login="login",A.ManageAccountBusiness="manageAccountBusiness",A.ManageAccountData="manageAccountData",A.ManageAccountDevices="manageAccountDevices",A.ManageAccountFamily="manageAccountFamily",A.ManageAccountIndividual="manageAccountIndividual",A.ManageAccountPeople="manageAccountPeople",A.ManageAccountSubscription="manageAccountSubscription",A.ManageAccountVaults="manageAccountVaults",A.ManageAccountTeam="manageAccountTeam",A.MedicalRecord="medicalRecord",A.Membership="membership",A.OnePasswordVerified="onePasswordVerified",A.OperatingSystemAndroid="operatingSystemAndroid",A.OperatingSystemIos="operatingSystemIos",A.OperatingSystemLinux="operatingSystemLinux",A.OperatingSystemMac="operatingSystemMac",A.OperatingSystemOther="operatingSystemOther",A.OperatingSystemWindows="operatingSystemWindows",A.OutdoorLicense="outdoorLicense",A.Passkey="passkey",A.Passport="passport",A.Password="password",A.PersonVerified="personVerified",A.PinUnlockSettings="pinUnlockSettings",A.PinUnlockWarning="pinUnlockWarning",A.Placeholder="placeholder",A.PrivacyCom="privacyCom",A.Profile="profile",A.RecentlyCreated="recentlyCreated",A.RecentlyDeleted="recentlyDeleted",A.Rewards="rewards",A.Router="router",A.Search="search",A.SecureNote="secureNote",A.Server="server",A.SettingsAbout="settingsAbout",A.SettingsAccounts="settingsAccounts",A.SettingsAdvanced="settingsAdvanced",A.SettingsAppearance="settingsAppearance",A.SettingsAutoFill="settingsAutoFill",A.SettingsBrowser="settingsBrowser",A.SettingsCollections="settingsCollections",A.SettingsDeveloper="settingsDeveloper",A.SettingsGeneral="settingsGeneral",A.SettingsHelp="settingsHelp",A.SettingsLabs="settingsLabs",A.SettingsLabsExperimentFeatureFlags="settingsLabsExperimentFeatureFlags",A.SettingsLabsExperimentPrivacyMode="settingsLabsExperimentPrivacyMode",A.SettingsNotifications="settingsNotifications",A.SettingsPrivacy="settingsPrivacy",A.SettingsReview="settingsReview",A.SettingsSafariExtension="settingsSafariExtension",A.SettingsSecurity="settingsSecurity",A.SignIn1Password="signIn1Password",A.SignInAndRecovery="signInAndRecovery",A.SignInBannerIllustration="signInBannerIllustration",A.SignInEmergencyKit="signInEmergencyKit",A.SignInGoogle="signInGoogle",A.SignInManual="signInManual",A.SignInOkta="signInOkta",A.SignInPasskey="signInPasskey",A.SignInScanQR="signInScanQR",A.SignInSSO="signInSSO",A.Snippet="snippet",A.SocialSecurityNumber="socialSecurityNumber",A.SoftwareLicense="softwareLicense",A.Ssh="ssh",A.SsoDeviceIcon="ssoDeviceIcon",A.SsoLoginAmazon="ssoLoginAmazon",A.SsoLoginAmazonAttachment="ssoLoginAmazonAttachment",A.SsoLoginApple="ssoLoginApple",A.SsoLoginAppleAttachment="ssoLoginAppleAttachment",A.SsoLoginFacebook="ssoLoginFacebook",A.SsoLoginFacebookAttachment="ssoLoginFacebookAttachment",A.SsoLoginGitHub="ssoLoginGitHub",A.SsoLoginGitHubAttachment="ssoLoginGitHubAttachment",A.SsoLoginGoogle="ssoLoginGoogle",A.SsoLoginGoogleAttachment="ssoLoginGoogleAttachment",A.SsoLoginMicrosoft="ssoLoginMicrosoft",A.SsoLoginMicrosoftAttachment="ssoLoginMicrosoftAttachment",A.SsoLoginTwitter="ssoLoginTwitter",A.SsoLoginTwitterAttachment="ssoLoginTwitterAttachment",A.SsoLoginOkta="ssoLoginOkta",A.SsoLoginOktaAttachment="ssoLoginOktaAttachment",A.SsoLoginSlack="ssoLoginSlack",A.SsoLoginSlackAttachment="ssoLoginSlackAttachment",A.SsoLoginDiscord="ssoLoginDiscord",A.SsoLoginDiscordAttachment="ssoLoginDiscordAttachment",A.Suggestions="suggestions",A.Tag="tag",A.Tombstone="tombstone",A.TutorialGlobe="tutorialGlobe",A.UnknownCategory="unknownCategory",A.Vault="vault",A.VaultPlaceholder="vaultPlaceholder",A.VaultGuarded="vaultGuarded",A.Watchtower="watchtower",A.Verifier="verifier"})(lr||(lr={}));var LkA;(function(A){A.Syncing="syncing",A.NotSyncedYet="notSyncedYet",A.OutOfSync="outOfSync",A.InSync="inSync",A.Unknown="unknown"})(LkA||(LkA={}));var zkA;(function(A){A.Accepted="Accepted",A.UserFallBack="UserFallBack",A.Cancelled="Cancelled",A.Denied="Denied",A.NotEnabled="NotEnabled"})(zkA||(zkA={}));var UkA;(function(A){A.ChooseFile="chooseFile",A.ChoosePhoto="choosePhoto",A.CapturePhoto="capturePhoto",A.ScanDocument="scanDocument"})(UkA||(UkA={}));var VkA;(function(A){A.DayMonthYear="dayMonthYear",A.MonthYear="monthYear"})(VkA||(VkA={}));var XkA;(function(A){A.WrongAccount="wrongAccount",A.WrongAccountByPolicy="wrongAccountByPolicy"})(XkA||(XkA={}));var JkA;(function(A){A.ShareWithFamily="ShareWithFamily",A.ShareWithTeam="ShareWithTeam"})(JkA||(JkA={}));var WkA;(function(A){A.Enabled="enabled",A.DisabledByUser="disabledByUser",A.DisabledByAdmin="disabledByAdmin",A.NoMapNoReason="noMapNoReason"})(WkA||(WkA={}));var QkA;(function(A){A.DefaultKeyboard="DefaultKeyboard",A.NumberPad="NumberPad",A.NamePhonePad="NamePhonePad",A.NumbersAndPunctuation="NumbersAndPunctuation",A.EmailAddress="EmailAddress",A.Url="Url"})(QkA||(QkA={}));var YkA;(function(A){A.None="None",A.Words="Words",A.Sentences="Sentences",A.AllCharacters="AllCharacters"})(YkA||(YkA={}));var ZkA;(function(A){A.ChooseFile="chooseFile",A.ChoosePhoto="choosePhoto",A.RemoveIcon="removeIcon"})(ZkA||(ZkA={}));var A7A;(function(A){A.Text="text",A.Url="url",A.Email="email",A.Address="address",A.DayMonthYear="dayMonthYear",A.MonthYear="monthYear",A.OneTimePassword="oneTimePassword",A.Password="password",A.Phone="phone",A.SecurityQuestion="securityQuestion",A.File="file",A.SshKey="sshKey",A.SsoLogin="ssoLogin"})(A7A||(A7A={}));var j7A;(function(A){A.ItemCreated="itemCreated",A.ItemSaved="itemSaved",A.ItemConvertedToLogin="itemConvertedToLogin"})(j7A||(j7A={}));var e7A;(function(A){A.Top="Top",A.Middle="Middle",A.Bottom="Bottom",A.TopAndBottom="TopAndBottom"})(e7A||(e7A={}));var t7A;(function(A){A.Informational="informational",A.Success="success",A.Warning="warning",A.Critical="critical"})(t7A||(t7A={}));var r7A;(function(A){A.Full="full",A.Long="long",A.Medium="medium",A.Short="short"})(r7A||(r7A={}));var a7A;(function(A){A.Single="single",A.Double="double"})(a7A||(a7A={}));var n7A;(function(A){A.Edit="edit",A.Autofill="autofill",A.OpenAndFill="openAndFill",A.OpenUrl="openUrl"})(n7A||(n7A={}));var o7A;(function(A){A.Normal="Normal",A.Warning="Warning"})(o7A||(o7A={}));var i7A;(function(A){A.BaseApp="baseApp",A.AutoFillItemSelect="autoFillItemSelect",A.AutoFillFieldSelect="autoFillFieldSelect"})(i7A||(i7A={}));var s7A;(function(A){A.Default="default",A.Destructive="destructive",A.Primary="primary",A.Transparent="transparent"})(s7A||(s7A={}));var l7A;(function(A){A.Success="success"})(l7A||(l7A={}));var c7A;(function(A){A.AutoFill="autoFill",A.Biometrics="biometrics",A.BiometricsFace="biometricsFace",A.SystemTray="systemTray",A.BrowserExtension="browserExtension",A.Telemetry="telemetry"})(c7A||(c7A={}));var d7A;(function(A){A.AutoFill="AutoFill",A.Biometrics="Biometrics",A.SystemTray="SystemTray",A.MigrateDataFromOpSeven="MigrateDataFromOpSeven",A.Telemetry="Telemetry"})(d7A||(d7A={}));var k7A;(function(A){A.Strong="strong",A.Moderate="moderate"})(k7A||(k7A={}));var u7A;(function(A){A.Csv="Csv",A.OnePif2="OnePif2",A.OnePux="OnePux",A.Cxf="Cxf"})(u7A||(u7A={}));var E7A;(function(A){A.Critical="critical",A.Warning="warning"})(E7A||(E7A={}));var p7A;(function(A){A.OpenSsh="OpenSSH",A.Pkcs8="PKCS#8",A.Pkcs1="PKCS#1"})(p7A||(p7A={}));var m7A;(function(A){A.Finished="Finished",A.Running="Running",A.Failed="Failed"})(m7A||(m7A={}));var B7A;(function(A){A.Enabled="ENABLED",A.Pending="PENDING"})(B7A||(B7A={}));var py;(function(A){A.Uploading="Uploading",A.Available="Available",A.Missing="Missing"})(py||(py={}));var dG;(function(A){A.Characters="Characters",A.Words="Words",A.Pin="Pin",A.PasswordRules="PasswordRules"})(dG||(dG={}));var y7;(function(A){A.Digits="Digits",A.DigitsAndSymbols="DigitsAndSymbols",A.Spaces="Spaces",A.Hyphens="Hyphens",A.Underscores="Underscores",A.Periods="Periods",A.Commas="Commas"})(y7||(y7={}));var my;(function(A){A.FullWords="FullWords",A.Syllables="Syllables",A.ThreeLetters="ThreeLetters"})(my||(my={}));var _h;(function(A){A.Enabled="enabled",A.Disabled="disabled",A.Deleted="deleted"})(_h||(_h={}));var XO;(function(A){A.Chrome="chrome",A.Firefox="firefox",A.SafariMacos="safari-macos",A.SafariIos="safari-ios"})(XO||(XO={}));var JO;(function(A){A.Brex="Brex"})(JO||(JO={}));var g7A;(function(A){A.RecentlyUsed="recentlyUsed",A.FrequentlyUsed="frequentlyUsed"})(g7A||(g7A={}));var h7A;(function(A){A.Zero="zero",A.One="one"})(h7A||(h7A={}));var q7A;(function(A){A.Twelve="twelve",A.TwentyFour="twentyFour"})(q7A||(q7A={}));var x7A;(function(A){A.Raw="raw",A.Padded="padded"})(x7A||(x7A={}));var v7A;(function(A){A.Csv="csv",A.Json="json",A.OnePux="onePux"})(v7A||(v7A={}));var G7A;(function(A){A.Button="Button",A.Link="Link"})(G7A||(G7A={}));var f7A;(function(A){A.Green="green",A.Grey="grey",A.Red="red",A.Purple="purple"})(f7A||(f7A={}));var an;(function(A){A.Amazon="amazon",A.Apple="apple",A.Discord="discord",A.Facebook="facebook",A.GitHub="github",A.Google="google",A.Microsoft="microsoft",A.Okta="okta",A.Slack="slack",A.Twitter="twitter"})(an||(an={}));var F7A;(function(A){A.Active="active",A.Deleted="deleted",A.Archived="archived"})(F7A||(F7A={}));var b7A;(function(A){A.Large="large",A.Medium="medium"})(b7A||(b7A={}));var y7A;(function(A){A.RSAOAEP="RSA-OAEP",A.RSAOAEP256="RSA-OAEP-256",A.A256GCM="A256GCM",A.ECDHES="ECDH-ES",A.ES256="ES256"})(y7A||(y7A={}));var $7A;(function(A){A.RSA="RSA",A.Oct="oct",A.EC="EC",A.OKP="OKP"})($7A||($7A={}));var w7A;(function(A){A.Sign="sign",A.Verify="verify",A.Encrypt="encrypt",A.Decrypt="decrypt",A.WrapKey="wrapKey",A.UnwrapKey="unwrapKey",A.DeriveKey="deriveKey",A.DeriveBits="deriveBits"})(w7A||(w7A={}));var I7A;(function(A){A.WhenUnlocked="WhenUnlocked",A.AfterFirstUnlock="AfterFirstUnlock",A.WhenPasscodeSetThisDeviceOnly="WhenPasscodeSetThisDeviceOnly",A.WhenUnlockedThisDeviceOnly="WhenUnlockedThisDeviceOnly",A.AfterFirstUnlockThisDeviceOnly="AfterFirstUnlockThisDeviceOnly"})(I7A||(I7A={}));var P7A;(function(A){A.AccountOverview="accountOverview",A.YourDetails="yourDetails",A.People="people",A.TrustedDevices="trustedDevices",A.Telemetry="telemetry",A.SetUpAnotherDevice="setUpAnotherDevice",A.Subscription="subscription",A.EmergencyKit="emergencyKit",A.Vaults="vaults",A.SignInAndRecovery="signInAndRecovery"})(P7A||(P7A={}));var O7A;(function(A){A.Text="text",A.Numeric="numeric",A.Password="password"})(O7A||(O7A={}));var R7A;(function(A){A.GreyscaleWhite="greyscaleWhite",A.GreyscaleBlack="greyscaleBlack",A.ShadingHeavy="shadingHeavy",A.ShadingExtraFaint="shadingExtraFaint",A.ReadableGreen="readableGreen",A.ReadablePurple="readablePurple",A.ReadableBlue="readableBlue",A.ReadableRed="readableRed",A.TintGreen="tintGreen",A.TintPurple="tintPurple",A.TintBlue="tintBlue",A.TintRed="tintRed"})(R7A||(R7A={}));var D7A;(function(A){A.CategoryBackground="categoryBackground",A.Invite="invite"})(D7A||(D7A={}));var T7A;(function(A){A.TelemetryOptOut="TelemetryOptOut"})(T7A||(T7A={}));var C7A;(function(A){A.Address="Address",A.Email="Email",A.SecretKey="SecretKey",A.Password="Password"})(C7A||(C7A={}));var _7A;(function(A){A.Leftward="leftward",A.Rightward="rightward"})(_7A||(_7A={}));var S7A;(function(A){A.SignIn="signIn",A.CheckAccount="checkAccount"})(S7A||(S7A={}));var H7A;(function(A){A.Web="web",A.Email="email"})(H7A||(H7A={}));var M7A;(function(A){A.ToggleFullScreen="toggleFullScreen",A.Services="services",A.Hide="hide",A.HideOthers="hideOthers",A.Unhide="unhide",A.ToggleDevTools="toggleDevTools",A.Undo="undo",A.Redo="redo",A.Cut="cut",A.Copy="copy",A.SelectAll="selectAll",A.Close="close",A.Minimize="minimize",A.Zoom="zoom",A.Front="front",A.Paste="paste",A.Reload="reload",A.StartSpeaking="startSpeaking",A.StopSpeaking="stopSpeaking",A.Help="help",A.Window="window",A.EditMenu="editMenu"})(M7A||(M7A={}));var K7A;(function(A){A.None="none",A.Info="info",A.Error="error",A.Question="question",A.Warning="warning"})(K7A||(K7A={}));var N7A;(function(A){A.Home="home",A.Items="items",A.Sidebar="sidebar"})(N7A||(N7A={}));var L7A;(function(A){A.Vaults="vaults",A.Favorites="favorites",A.RecentlyCreated="recentlyCreated",A.RecentlyModified="recentlyModified",A.RecentlyUsed="recentlyUsed",A.FrequentlyUsed="frequentlyUsed",A.Tags="tags",A.AllItems="allItems",A.Archived="archived",A.RecentlyDeleted="recentlyDeleted",A.Categories="categories",A.ItemFieldGroup="itemFieldGroup",A.BillboardGroup="billboardGroup",A.Profile="profile",A.Nearby="nearby",A.ActivationHub="activationHub",A.SecuritySetup="securitySetup"})(L7A||(L7A={}));var z7A;(function(A){A.NearbyItems="nearbyItems"})(z7A||(z7A={}));var U7A;(function(A){A.Home="Home",A.Items="Items",A.Watchtower="Watchtower",A.Verifier="Verifier"})(U7A||(U7A={}));var V7A;(function(A){A.Member="member",A.Organizer="organizer",A.Guest="guest"})(V7A||(V7A={}));var X7A;(function(A){A.AuthorizedDriven="authorizedDriven",A.UnauthorizedDriven="unauthorizedDriven"})(X7A||(X7A={}));var J7A;(function(A){A.Account="account",A.LockedAccount="lockedAccount",A.VaultCollection="vaultCollection"})(J7A||(J7A={}));var ep;(function(A){A.Locked="Locked",A.Unlocked="Unlocked"})(ep||(ep={}));var W7A;(function(A){A.General="general",A.Appearance="appearance",A.Security="security",A.Privacy="privacy",A.Browser="browser",A.SafariExtension="safariExtension",A.Notifications="notifications",A.AutoFill="autoFill",A.Advanced="advanced",A.Help="help",A.About1Password="about1Password",A.Review="review",A.Developers="developers",A.ManageAccounts="manageAccounts",A.ManageCollections="manageCollections",A.Labs="labs",A.TestUserPreferences="testUserPreferences"})(W7A||(W7A={}));var By;(function(A){A.Unlock="unlock",A.AuthPrompt="authPrompt",A.Reauthentication="reauthentication"})(By||(By={}));var Q7A;(function(A){A.InvalidRequest="InvalidRequest",A.UnAuthorizedClient="UnAuthorizedClient",A.AccessDenied="AccessDenied",A.UnSupportedResponseType="UnSupportedResponseType",A.InvalidScope="InvalidScope",A.ServerError="ServerError",A.TemporarilyUnavailable="TemporarilyUnavailable",A.Unknown="Unknown"})(Q7A||(Q7A={}));var Y7A;(function(A){A.InvalidRequest="invalid_request",A.InvalidClient="invalid_client",A.InvalidGrant="invalid_grant",A.InvalidScope="invalid_scope",A.UnauthorizedClient="unauthorized_client",A.UnsupportedGrantType="unsupported_grant_type",A.Unknown="unknown"})(Y7A||(Y7A={}));var Z7A;(function(A){A.SyncAll="syncAll"})(Z7A||(Z7A={}));var AuA;(function(A){A.AccountSignout="AccountSignout",A.Deletion="Deletion",A.Deauthorization="Deauthorization",A.SsoAccountSignout="SsoAccountSignout"})(AuA||(AuA={}));var juA;(function(A){A.Primary="primary",A.ItemDetails="itemDetails",A.Settings="settings",A.QuickAccess="quickAccess",A.AuthPrompt="authPrompt",A.PasskeyPrompt="passkeyPrompt",A.LargeType="largeType",A.KeyboardShortcutsQX="keyboardShortcutsQX",A.AutofillAccessibility="autofillAccessibility",A.LargeQrCode="largeQrCode",A.None="none"})(juA||(juA={}));var euA;(function(A){A.Account="account",A.LockedAccount="lockedAccount",A.VaultCollection="vaultCollection"})(euA||(euA={}));var tuA;(function(A){A.StandardSearch="standardSearch",A.SmartSearch="smartSearch",A.Meta="meta"})(tuA||(tuA={}));var ruA;(function(A){A.ForceStatusUpdate="forceStatusUpdate",A.ResetAllFlags="resetAllFlags"})(ruA||(ruA={}));var auA;(function(A){A.Light="light",A.Dark="dark",A.System="system"})(auA||(auA={}));var nuA;(function(A){A.Save="save",A.Generate="generate",A.Done="done"})(nuA||(nuA={}));var ouA;(function(A){A.Bitwarden="bitwarden",A.Brave="brave",A.Chrome="chrome",A.Csv="csv",A.Dashlane="dashlane",A.Delinea="delinea",A.Edge="edge",A.Firefox="firefox",A.ICloud="iCloud",A.Keepass="keepass",A.KeePassXc="keePassXc",A.LastPass="lastPass",A.OnePux="onePux",A.RoboForm="roboForm",A.Safari="safari",A.Standalone="standalone"})(ouA||(ouA={}));var iuA;(function(A){A.Error="Error",A.Warn="Warn",A.Info="Info",A.Debug="Debug",A.Trace="Trace"})(iuA||(iuA={}));var kG;(function(A){A.Url="Url",A.Email="Email",A.Phone="Phone",A.MapApple="MapApple",A.MapGoogle="MapGoogle",A.MapDuckDuckGo="MapDuckDuckGo"})(kG||(kG={}));var uG;(function(A){A.Macos="macos",A.Windows="windows",A.Linux="linux",A.Ios="ios",A.Android="android",A.Browser="browser",A.Extension="extension",A.Unknown="Unknown"})(uG||(uG={}));var suA;(function(A){A.Once="Once",A.Transaction="Transaction",A.Monthly="Monthly",A.Annually="Annually",A.Forever="Forever"})(suA||(suA={}));var luA;(function(A){A.Primary="Primary",A.Secondary="Secondary",A.Tertiary="Tertiary"})(luA||(luA={}));var cuA;(function(A){A.AutofillRequestAccessibilityPermissions="AutofillRequestAccessibilityPermissions"})(cuA||(cuA={}));var duA;(function(A){A.AutofillShortcut="autofillShortcut",A.QuickAccessShortcut="quickAccessShortcut"})(duA||(duA={}));var kuA;(function(A){A.ItemList="itemList",A.Item="item",A.Watchtower="watchtower",A.Unknown="unknown"})(kuA||(kuA={}));var uuA;(function(A){A.Clipboard="clipboard",A.Desktop="desktop"})(uuA||(uuA={}));var EuA;(function(A){A.PlainText="plainText",A.Html="html"})(EuA||(EuA={}));var puA;(function(A){A.Production="Production",A.Beta="Beta",A.Nightly="Nightly"})(puA||(puA={}));var il;(function(A){A.FaceID="faceID",A.TouchID="touchID",A.Passcode="passcode",A.None="none"})(il||(il={}));var kB;(function(A){A.SecretKey="secretKey",A.Sso="sso",A.WebAuthn="webAuthn"})(kB||(kB={}));var EG;(function(A){A.Ramp="ramp"})(EG||(EG={}));var uB;(function(A){A.Login="login",A.CreditCard="credit-card",A.ApiKey="api-key",A.CryptoWallet="crypto-wallet"})(uB||(uB={}));var muA;(function(A){A.LockApp="lockApp"})(muA||(muA={}));var BuA;(function(A){A.CreateCollection="CreateCollection",A.ManageCollections="ManageCollections",A.SetUpAnotherDevice="SetUpAnotherDevice",A.AccountsManagement="AccountsManagement",A.AdminDashboard="AdminDashboard",A.Settings="Settings",A.ScanQrCode="ScanQrCode",A.MobileHelpMenu="MobileHelpMenu"})(BuA||(BuA={}));var guA;(function(A){A.Attention="attention",A.Critical="critical",A.Neutral="neutral",A.Informational="informational",A.Success="success"})(guA||(guA={}));var huA;(function(A){A.InterfaceDensityCompact="interfaceDensityCompact",A.InterfaceDensityComfortable="interfaceDensityComfortable",A.AppIconLight="appIconLight",A.AppIconDark="appIconDark"})(huA||(huA={}));var quA;(function(A){A.Leading="leading",A.Centered="centered",A.Trailing="trailing"})(quA||(quA={}));var xuA;(function(A){A.AnyoneWithTheLink="AnyoneWithTheLink",A.OnlySomePeople="OnlySomePeople"})(xuA||(xuA={}));var vuA;(function(A){A.Modal="Modal",A.ErrorStrip="ErrorStrip"})(vuA||(vuA={}));var GuA;(function(A){A.OneHour="OneHour",A.OneDay="OneDay",A.SevenDays="SevenDays",A.FourteenDays="FourteenDays",A.ThirtyDays="ThirtyDays"})(GuA||(GuA={}));var fuA;(function(A){A.Invisible="Invisible",A.VisibleChecked="VisibleChecked",A.VisibleUnchecked="VisibleUnchecked"})(fuA||(fuA={}));var FuA;(function(A){A.CopyLink="CopyLink",A.ShareLink="ShareLink"})(FuA||(FuA={}));var buA;(function(A){A.SecretKey="secretKey",A.Sso="sso",A.Passkey="passkey"})(buA||(buA={}));var yuA;(function(A){A.Header="header",A.List="list",A.ListFlexible="listFlexible"})(yuA||(yuA={}));var $uA;(function(A){A.QuickAccess="quickAccess",A.Autofill="autofill"})($uA||($uA={}));var wuA;(function(A){A.Increment="increment",A.Decrement="decrement",A.Reset="reset"})(wuA||(wuA={}));var pG;(function(A){A.AllItems="allItems",A.AppleWatchAdd="appleWatchAdd",A.AppleWatchRemove="appleWatchRemove",A.Archive="archive",A.ArchiveLarge="archiveLarge",A.BiometricUnlockAppleFaceId="biometricUnlockAppleFaceId",A.BiometricUnlockAppleTouchId="biometricUnlockAppleTouchId",A.BiometricUnlockAppleWatch="biometricUnlockAppleWatch",A.BiometricUnlock="biometricUnlock",A.BiometricUnlockFingerprint="biometricUnlockFingerprint",A.BiometricUnlockWindowsHello="biometricUnlockWindowsHello",A.Cancel="cancel",A.CancelOutline="cancelOutline",A.Checkmark="checkmark",A.CheckmarkCircle="checkmarkCircle",A.CheckmarkFilled="checkmarkFilled",A.ChevronDown="chevronDown",A.ChevronLeft="chevronLeft",A.ChevronRight="chevronRight",A.ChevronUp="chevronUp",A.Circle="circle",A.Close="close",A.CollapsedMenu="collapsedMenu",A.Copy="copy",A.CreditCard="creditCard",A.CustomizeHome="customizeHome",A.Delete="delete",A.DeleteRow="deleteRow",A.Disclosure="disclosure",A.Document="document",A.DocumentEmpty="documentEmpty",A.Download="download",A.DragHandle="dragHandle",A.Dropdown="dropdown",A.Edit="edit",A.Email="email",A.EmergencyKit="emergencyKit",A.ExternalLink="externalLink",A.FavoriteOff="favoriteOff",A.FavoriteOn="favoriteOn",A.Filter="filter",A.Find="find",A.Folder="folder",A.Frozen="frozen",A.Git="git",A.Help="help",A.HelpBubble="helpBubble",A.Hide="hide",A.Import="import",A.Information="information",A.InsertText="insertText",A.Integration="integration",A.ItemHistory="itemHistory",A.ItemSharing="itemSharing",A.Ladybug="ladybug",A.LargeType="largeType",A.Link="link",A.Lock="lock",A.Minus="minus",A.Missing="missing",A.ModeDark="modeDark",A.ModeLight="modeLight",A.ModeSystem="modeSystem",A.Move="move",A.NavigateBack="navigateBack",A.NavigateForward="navigateForward",A.NewWindow="newWindow",A.NoConnection="noConnection",A.NoConnectionLarge="noConnectionLarge",A.NoResults="noResults",A.Notifications="notifications",A.OnePassword="onePassword",A.OnePasswordLocked="onePasswordLocked",A.OpenInBrowser="openInBrowser",A.Overflow="overflow",A.OverflowApple="overflowApple",A.OverflowHorizontal="overflowHorizontal",A.Passkey="passkey",A.Password="password",A.Paste="paste",A.PersonLocation="personLocation",A.Pin="pin",A.PinUnlock="pinUnlock",A.Plus="plus",A.PlusSmall="plusSmall",A.PreviousSize="previousSize",A.Print="print",A.Unpin="unpin",A.QrCodeScan="qrCodeScan",A.RecentlyDeleted="recentlyDeleted",A.RecentlyDeletedLarge="recentlyDeletedLarge",A.Refresh="refresh",A.Report="report",A.Restore="restore",A.Review="review",A.Search="search",A.Select="select",A.Settings="settings",A.SettingsAdvanced="settingsAdvanced",A.Share="share",A.ShareHistory="shareHistory",A.Show="show",A.Sidebar="sidebar",A.SignIn="signIn",A.Sort="sort",A.Suggestions="suggestions",A.TabBarHome="tabBarHome",A.TabBarItems="tabBarItems",A.TabBarSearch="tabBarSearch",A.TabBarSettings="tabBarSettings",A.TabBarVerifier="tabBarVerifier",A.TabBarWatchtower="tabBarWatchtower",A.Tags="tags",A.Terminal="terminal",A.Trash="trash",A.TrashLarge="trashLarge",A.TravelMode="travelMode",A.Twitter="twitter",A.Unlock="unlock",A.UnlockSettingBiometric="unlockSettingBiometric",A.UnlockSettingBiometricDisabled="unlockSettingBiometricDisabled",A.UnlockSettingBiometricAppleFaceId="unlockSettingBiometricAppleFaceId",A.UnlockSettingBiometricAppleFaceIdDisabled="unlockSettingBiometricAppleFaceIdDisabled",A.UnlockSettingBiometricAppleTouchId="unlockSettingBiometricAppleTouchId",A.UnlockSettingBiometricAppleTouchIdDisabled="unlockSettingBiometricAppleTouchIdDisabled",A.UnlockSettingBiometricAppleWatch="unlockSettingBiometricAppleWatch",A.UnlockSettingPassword="unlockSettingPassword",A.UnlockSettingPinUnlock="unlockSettingPinUnlock",A.UnlockSettingPinUnlockDisabled="unlockSettingPinUnlockDisabled",A.Upload="upload",A.User="user",A.Users="users",A.UserSmall="userSmall",A.UsersSmall="usersSmall",A.VerifierAccepted="verifierAccepted",A.VerifierPending="verifierPending",A.VerifierRejected="verifierRejected",A.VerifierShield="verifierShield",A.Warning="warning",A.WarningLarge="warningLarge",A.Watchtower="watchtower",A.WatchtowerCompromisedDomain="watchtowerCompromisedDomain",A.WatchtowerExpiring="watchtowerExpiring",A.WatchtowerReusedPassword="watchtowerReusedPassword",A.WatchtowerTwoFactorAvailable="watchtowerTwoFactorAvailable",A.WatchtowerUnsecuredWebsite="watchtowerUnsecuredWebsite",A.WatchtowerVulnerablePassword="watchtowerVulnerablePassword",A.WatchtowerWeakPassword="watchtowerWeakPassword",A.WatchtowerDuplicateItem="watchtowerDuplicateItem",A.WatchtowerWrongAccount="watchtowerWrongAccount",A.WhatsApp="whatsApp"})(pG||(pG={}));var Ir;(function(A){A.ImportantEphemeral="importantEphemeral",A.Persistent="persistent",A.Ephemeral="ephemeral"})(Ir||(Ir={}));var $7;(function(A){A.AppleOtpAuth="apple-otpauth",A.OtpAuth="otpauth",A.Yjotp="yjotp"})($7||($7={}));var IuA;(function(A){A.New="New",A.Existing="Existing"})(IuA||(IuA={}));var PuA;(function(A){A.View="view",A.Edit="edit",A.Manage="manage"})(PuA||(PuA={}));var OuA;(function(A){A.NoViewersRemainingAndUserCanManageVaults="noViewersRemainingAndUserCanManageVaults",A.NoViewersRemainingAndUserCannotManageVaults="noViewersRemainingAndUserCannotManageVaults",A.YouCannotViewAndUserCanManageVaults="youCannotViewAndUserCanManageVaults",A.YouCannotViewAndUserCannotManageVaults="youCannotViewAndUserCannotManageVaults"})(OuA||(OuA={}));var RuA;(function(A){A.View="view",A.ViewAndEdit="viewAndEdit",A.Manage="manage",A.ManageAndView="manageAndView",A.FullAccess="fullAccess",A.Custom="custom"})(RuA||(RuA={}));var DuA;(function(A){A.CompromisedLogins="compromisedLogins",A.VulnerablePasswords="vulnerablePasswords",A.WeakPasswords="weakPasswords",A.UnsecuredUrl="unsecuredUrl",A.DuplicatePassword="duplicatePassword",A.TwoFactorAvailable="twoFactorAvailable",A.PasskeyAvailable="passkeyAvailable",A.Expiring="expiring",A.LastpassImpacted="lastpassImpacted",A.WrongAccount="wrongAccount",A.DuplicateItem="duplicateItem",A.ConflictingShortcut="conflictingShortcut",A.DeveloperWatchtower="developerWatchtower",A.RecoveryCodes="recoveryCodes"})(DuA||(DuA={}));var TuA;(function(A){A.SlideOne="SlideOne",A.SlideTwo="SlideTwo",A.SlideThree="SlideThree",A.SlideFour="SlideFour",A.SlideFive="SlideFive"})(TuA||(TuA={}));var CuA;(function(A){A.Basic="basic",A.Extended="extended"})(CuA||(CuA={}));var _uA;(function(A){A.Required="required",A.Optional="optional",A.Excluded="excluded"})(_uA||(_uA={}));var SuA;(function(A){A.Group="group",A.User="user"})(SuA||(SuA={}));var HuA;(function(A){A.All="All",A.Locked="Locked",A.Unlocked="Unlocked"})(HuA||(HuA={}));var tp;(function(A){A.ExampleAction="example_action",A.ClipboardCleared="clipboard_cleared",A.SearchHistoryCleared="search_history_cleared",A.ExportSucceeded="export_succeeded",A.SecurityPresetAppliedEasyAndSecure="security_preset_applied_easy_and_secure",A.SecurityPresetAppliedWorkdaySecurity="security_preset_applied_workday_security",A.SecurityPresetAppliedStrictestSecurity="security_preset_applied_strictest_security",A.SecurityPresetAppliedCustom="security_preset_applied_custom",A.UserFeedbackSuccessful="user_feedback_successful",A.UserFeedbackUnsuccessful="user_feedback_unsuccessful",A.VerifierSendingChallenge="verifier_sent_challenge",A.VerifierSendingConfirmation="verifier_sending_confirmation",A.VerifierSendingRejection="verifier_sending_rejection",A.CreateEnvironment="create_environment",A.DeleteEnvironment="delete_environment",A.RenameEnvironment="rename_environment",A.CreateAwsIntegration="create_aws_integration",A.CreateLocalFileMount="create_local_file_mount",A.PinExtension="pin_extension",A.TelemetryModalOptIn="telemetry_modal_opt_in",A.TelemetryModalOptOut="telemetry_modal_opt_out",A.ManageAccountDataUsageOptIn="manage_account_data_usage_opt_in",A.ManageAccountDataUsageOptOut="manage_account_data_usage_opt_out",A.LinkedAppEnrollmentSuccess="linked_app_enrollment_success",A.LinkedAppEnrollmentCodeRegenerated="linked_app_enrollment_code_regenerated",A.AgenticAutofillRequestApproved="agentic_autofill_request_approved",A.UnlockBiometricSystemFailure="unlock_failure_biometric_system",A.UnlockBiometricSystemKeyStorageFailure="unlock_failure_key_storage",A.UnlockBiometricSystemKeyEncryptionFailure="unlock_failure_key_encryption",A.UnlockBiometricSystemKeyPermissionFailure="unlock_failure_key_permissions",A.UnlockBiometricSystemKeyExpiryFailure="unlock_failure_key_expiry",A.LocalEnvFileRead="local_env_file_read"})(tp||(tp={}));var MuA;(function(A){A.Success="success",A.Failed="failed"})(MuA||(MuA={}));var KuA;(function(A){A.Shipping="shipping",A.Billing="billing"})(KuA||(KuA={}));var mG;(function(A){A.UnverifiedUser="UnverifiedUser",A.AddressInUse="AddressInUse",A.RateLimit="RateLimit",A.OverQuota="OverQuota",A.RequestError="RequestError",A.InternalError="InternalError"})(mG||(mG={}));var NuA;(function(A){A.RegionMatchesAnAccount="regionMatchesAnAccount",A.RegionWillChange="regionWillChange",A.InvalidMyceliumData="invalidMyceliumData"})(NuA||(NuA={}));var LuA;(function(A){A.Interrupted="Interrupted",A.NoCredential="NoCredential",A.UserCanceled="UserCanceled",A.Unknown="Unknown",A.UnexpectedCredentialType="UnexpectedCredentialType",A.ApplicationError="ApplicationError"})(LuA||(LuA={}));var zuA;(function(A){A.Error="Error",A.Success="Success"})(zuA||(zuA={}));var UuA;(function(A){A.Created="created",A.Error="error"})(UuA||(UuA={}));var VuA;(function(A){A.Removed="removed",A.NotFound="notFound",A.NotConfirmed="notConfirmed"})(VuA||(VuA={}));var XuA;(function(A){A.Deleted="Deleted",A.Error="Error"})(XuA||(XuA={}));var JuA;(function(A){A.AccountNotFound="accountNotFound",A.AccountLocked="accountLocked"})(JuA||(JuA={}));var WuA;(function(A){A.InvalidEmail="invalidEmail",A.InvalidSignInAddress="invalidSignInAddress",A.ServerRequestFailed="serverRequestFailed"})(WuA||(WuA={}));var QuA;(function(A){A.Generic="generic"})(QuA||(QuA={}));var YuA;(function(A){A.FailedToGetAccount="failedToGetAccount",A.FailedToCheckDeviceHealth="failedToCheckDeviceHealth"})(YuA||(YuA={}));var ZuA;(function(A){A.ConnectionFailed="connectionFailed",A.AccountNotFound="accountNotFound",A.AccountLocked="accountLocked",A.UserGuest="userGuest",A.UserSuspended="userSuspended",A.FilterVaultNotFound="filterVaultNotFound",A.ServerRequestFailed="serverRequestFailed",A.Internal="internal"})(ZuA||(ZuA={}));var AEA;(function(A){A.NoItemsFound="noItemsFound"})(AEA||(AEA={}));var jEA;(function(A){A.Internal="internal"})(jEA||(jEA={}));var eEA;(function(A){A.NetworkConnectionFailed="networkConnectionFailed",A.AuthorizationAccountNotFound="authorizationAccountNotFound",A.AuthorizationAccountLocked="authorizationAccountLocked",A.AuthorizationUserGuest="authorizationUserGuest",A.AuthorizationUserSuspended="authorizationUserSuspended",A.SpecialFilterVaultNotFound="specialFilterVaultNotFound",A.SpecialFilterVaultCannotManageAccess="specialFilterVaultCannotManageAccess"})(eEA||(eEA={}));var tEA;(function(A){A.ClientError="clientError",A.ItemEntityIdParseError="itemEntityIdParseError",A.ItemNotFound="itemNotFound",A.CouldNotLoadPreviousItemVersion="couldNotLoadPreviousItemVersion",A.CouldNotRestorePreviousItemVersion="couldNotRestorePreviousItemVersion"})(tEA||(tEA={}));var rEA;(function(A){A.Success="success",A.Failed="failed",A.Error="error"})(rEA||(rEA={}));var aEA;(function(A){A.Success="success",A.Error="error"})(aEA||(aEA={}));var nEA;(function(A){A.ConnectionFailed="connectionFailed",A.AccountNotFound="accountNotFound",A.AccountLocked="accountLocked",A.AccountFrozen="accountFrozen",A.AccountNotFamily="accountNotFamily",A.UserGuest="userGuest",A.UserSuspended="userSuspended",A.VaultNotFound="vaultNotFound",A.VaultAccessCannotBeManaged="vaultAccessCannotBeManaged",A.PermissionMissingManage="permissionMissingManage",A.Internal="internal"})(nEA||(nEA={}));var oEA;(function(A){A.Error="Error",A.Success="Success"})(oEA||(oEA={}));var iEA;(function(A){A.Android="Android",A.Apple="Apple",A.Mac="Mac",A.MacSystemPassword="MacSystemPassword"})(iEA||(iEA={}));var sEA;(function(A){A.Updated="updated",A.Error="error"})(sEA||(sEA={}));var lEA;(function(A){A.Invalid="invalid"})(lEA||(lEA={}));var cEA;(function(A){A.BadLength="badLength",A.BadVersion="badVersion"})(cEA||(cEA={}));var dEA;(function(A){A.Empty="empty",A.MissingEnterpriseSubdomain="missingEnterpriseSubdomain",A.BadDomain="badDomain",A.MissingDomain="missingDomain",A.LooksLikeEmail="looksLikeEmail",A.ParseError="parseError"})(dEA||(dEA={}));var kEA;(function(A){A.CannotRemoveReadWithoutManage="cannotRemoveReadWithoutManage"})(kEA||(kEA={}));var uEA;(function(A){A.NoAppStoreProvided="noAppStoreProvided",A.CannotMakePayment="cannotMakePayment",A.PurchaseFailed="purchaseFailed",A.ProductNotFound="productNotFound",A.CannotDecodeProductIdentifier="cannotDecodeProductIdentifier",A.NoAppStoreResult="noAppStoreResult",A.FailedToDeserializeResponse="failedToDeserializeResponse",A.ExistingPurchaseInProgress="existingPurchaseInProgress",A.UnsupportedPlatform="unsupportedPlatform"})(uEA||(uEA={}));var EEA;(function(A){A.Check="Check",A.MarkAsShown="MarkAsShown"})(EEA||(EEA={}));var pEA;(function(A){A.Granted="granted",A.NotGranted="notGranted"})(pEA||(pEA={}));var mEA;(function(A){A.NotDetermined="notDetermined",A.Denied="denied",A.Authorized="authorized",A.Provisional="provisional",A.Ephemeral="ephemeral",A.Unknown="unknown"})(mEA||(mEA={}));var BEA;(function(A){A.Cli="Cli",A.Ssh="Ssh",A.DeveloperEnvironment="DeveloperEnvironment",A.SecureRemoteAutofill="SecureRemoteAutofill"})(BEA||(BEA={}));var gEA;(function(A){A.CredentialsSentSuccessfully="credentialsSentSuccessfully",A.IncorrectCodeChosen="incorrectCodeChosen",A.PromptTimeout="promptTimeout",A.PromptDenied="promptDenied",A.NetworkError="networkError",A.ChannelClosed="channelClosed",A.FeatureDisabled="featureDisabled"})(gEA||(gEA={}));var hEA;(function(A){A.DeviceUnlocked="DeviceUnlocked",A.DeviceWoke="DeviceWoke"})(hEA||(hEA={}));var qEA;(function(A){A.Chrome="chrome",A.Firefox="firefox",A.SafariMacos="safari-macos",A.SafariIos="safari-ios"})(qEA||(qEA={}));var xEA;(function(A){A.UrlParseFailed="UrlParseFailed",A.TemplateParseFailed="TemplateParseFailed",A.FailedToFindValueForFieldIdentifier="FailedToFindValueForFieldIdentifier",A.FailedToGenerateLargeType="FailedToGenerateLargeType",A.FailedToGenerateWatchtowerReport="FailedToGenerateWatchtowerReport",A.SshKeyParseFailed="SshKeyParseFailed",A.FailedToFindTemplateField="FailedToFindTemplateField",A.InvalidTemplateType="InvalidTemplateType"})(xEA||(xEA={}));var vEA;(function(A){A.AuthenticationSuccessful="AuthenticationSuccessful",A.AuthenticationFailed="AuthenticationFailed",A.UserCancel="UserCancel",A.UserFallBack="UserFallBack",A.SystemCancel="SystemCancel",A.PasscodeNotSet="PasscodeNotSet",A.BiometryNotAvailable="BiometryNotAvailable",A.BiometryNotEnrolled="BiometryNotEnrolled",A.BiometryLockout="BiometryLockout",A.AppCancel="AppCancel",A.InvalidContext="InvalidContext",A.NotInteractive="NotInteractive",A.WatchNotAvailable="WatchNotAvailable",A.LocalizedStringsFailure="LocalizedStringsFailure",A.FailureReasonUnknown="FailureReasonUnknown",A.Timeout="Timeout",A.BiometryAlreadyInProgress="BiometryAlreadyInProgress"})(vEA||(vEA={}));var GEA;(function(A){A.None="None",A.Biometry="Biometry",A.DeviceCredential="DeviceCredential",A.BiometryOrDeviceCredential="BiometryOrDeviceCredential"})(GEA||(GEA={}));var fEA;(function(A){A.MainAppNotRunning="MainAppNotRunning"})(fEA||(fEA={}));var BG;(function(A){A.MainAppNotRunning="MainAppNotRunning",A.MainAppOpenTimeout="MainAppOpenTimeout",A.CannotOpenMainApp="CannotOpenMainApp",A.UnknownInvocation="UnknownInvocation",A.BrowserHelperNotRegistered="BrowserHelperNotRegistered"})(BG||(BG={}));var WO;(function(A){A.BrowserSignatureInvalid="BrowserSignatureInvalid",A.UnknownBrowser="UnknownBrowser"})(WO||(WO={}));var FEA;(function(A){A.Success="success",A.Failed="failed"})(FEA||(FEA={}));var rc;(function(A){A.Visa="Visa",A.Mastercard="Mastercard",A.AmericanExpress="AmericanExpress",A.Discover="Discover",A.Jcb="Jcb",A.Maestro="Maestro",A.VisaElectron="VisaElectron",A.UnionPay="UnionPay"})(rc||(rc={}));var bEA;(function(A){A.Create="webauthn.create",A.Get="webauthn.get",A.PaymentGet="payment.get"})(bEA||(bEA={}));var rp;(function(A){A.FeatureFlagsLabsScreen="feature_flags_labs_screen",A.SetUpAnotherDeviceModal="set_up_another_device_modal",A.SetUpAnotherDeviceScreen="set_up_another_device_screen",A.HomepageScreen="homepage_screen",A.WatchtowerScreen="watchtower_screen",A.StartHereModal="start_here_modal",A.StartHereScreen="start_here_screen",A.AllItemsScreen="all_items_screen",A.AddItemsChooseMethodScreen="add_items_choose_method_screen",A.MigrateYourDataScreen="migrate_your_data_screen",A.PinExtensionScreen="pin_extension_screen",A.GetExtensionScreen="get_extension_screen",A.SetUpAutofillScreen="set_up_autofill_screen",A.PracticeSaveAndFillScreen="practice_save_and_fill_screen",A.AddNewItemScreen="add_new_item_screen",A.ProfileMenu="profile_menu",A.InvitePeopleModal="invite_people_modal",A.InvitePeopleScreen="invite_people_screen",A.ItemTemplateScreen="item_template_screen",A.ItemDetailsScreen="item_details_screen",A.ExportDataModal="export_data_modal",A.GitCommitSigningModal="git_commit_signing_modal",A.DeveloperExperienceHomeScreen="developer_experience_home_screen",A.DeveloperExperienceOnboardingCallout="developer_experience_onboarding_callout",A.SettingsDeveloperScreen="settings_developer_screen",A.DeveloperExperienceSshScreen="developer_experience_ssh_screen",A.DeveloperExperienceActivityScreen="developer_experience_activity_screen",A.CopyItemMenu="copy_item_menu",A.ChromeAutofillPromptScreen="chrome_autofill_prompt_screen",A.BraveAutofillPromptScreen="brave_autofill_prompt_screen",A.AutofillSettingsScreen="autofill_settings_screen",A.SettingsLabsScreen="settings_labs_screen",A.QuickAccessSearchFieldResult="quick_access_search_field_result",A.HelpMenu="help_menu",A.SecurityReviewModal="security_review_modal",A.SecuritySettingsScreen="security_settings_screen",A.RecoveryCodeModal="recovery_code_modal",A.AutofillScreen="autofill_screen",A.UserFeedbackScreen="user_feedback_screen",A.VerifierView="verifier_view",A.VerifierComposeScreen="verifier_compose_screen",A.VerifierChallengeReceivedScreen="verifier_challenge_received_screen",A.VerifierResponseReceivedScreen="verifier_response_received_screen",A.DeveloperEnvironmentScreen="developer_environment_screen",A.DeveloperEnvironmentVariablesTab="developer_environment_variables_tab",A.DeveloperEnvironmentDestinationsTab="developer_environment_destinations_tab",A.InstallExtensionWarningModal="install_extension_warning_modal",A.InstallExtensionBlockingModal="install_extension_block_modal",A.InstallExtensionBanner="install_extension_banner",A.EnableExtensionWarningModal="enable_extension_warning_modal",A.EnableExtensionBlockingModal="enable_extension_block_modal",A.AutofillNotEnabledSnackbar="autofill_not_enabled_snackbar",A.LinkedAppEnrollmentApprovingDeviceModal="linked_app_enrollment_approving_device_modal",A.LinkedAppEnrollmentApprovingDeviceScreen="linked_app_enrollment_approving_device_screen",A.NotificationScreen="notification_screen",A.PickSecurityPresetNotification="pick_security_preset_notification"})(rp||(rp={}));var ap;(function(A){A.Button="button",A.TextLink="text_link",A.Modal="modal",A.Screen="screen",A.MediaCard="mediacard",A.Switch="switch",A.SwitchOn="switch_on",A.SwitchOff="switch_off",A.CheckboxOn="checkbox_on",A.CheckboxOff="checkbox_off",A.ToolTip="tooltip",A.Callout="callout",A.Select="select",A.SearchField="search_field",A.Radio="radio",A.Disclosure="disclosure",A.Menu="menu",A.Link="link",A.Banner="banner",A.Billboard="billboard",A.TextField="text_field",A.ListRow="list_row",A.Snackbar="snackbar",A.Notification="notification"})(ap||(ap={}));var yEA;(function(A){A.Success="success",A.Failed="failed"})(yEA||(yEA={}));var $EA;(function(A){A.Success="success",A.NotFound="notFound"})($EA||($EA={}));var wEA;(function(A){A.Success="success",A.Failure="failure"})(wEA||(wEA={}));var IEA;(function(A){A.Metric="metric",A.USImperial="uSImperial"})(IEA||(IEA={}));var PEA;(function(A){A.Fastmail="fastmail"})(PEA||(PEA={}));var OEA;(function(A){A.FailedMfaPrompt="FailedMfaPrompt",A.InvalidMfaPromptResponse="InvalidMfaPromptResponse",A.NoMfaOptions="NoMfaOptions",A.MfaTimedOut="MfaTimedOut"})(OEA||(OEA={}));var gG;(function(A){A.ObservabilityAndExperimentation="ObservabilityAndExperimentation",A.TrelicaActivityTracking="TrelicaActivityTracking",A.ManagedCredentials="ManagedCredentials"})(gG||(gG={}));var REA;(function(A){A.UnableToFindDevice="UnableToFindDevice",A.NoStoredDSecret="NoStoredDSecret"})(REA||(REA={}));var DEA;(function(A){A.Pages="pages",A.Signin="signin",A.Unlock="unlock"})(DEA||(DEA={}));var TEA;(function(A){A.FeatureFlags="featureFlags",A.AutoType="autoType",A.Snippets="snippets",A.PrivacyMode="privacyMode"})(TEA||(TEA={}));var CEA;(function(A){A.DeniedByUser="deniedByUser",A.PromptError="promptError",A.AppError="appError"})(CEA||(CEA={}));var Sh;(function(A){A.SignUp="signUp",A.LinkExisting="linkExisting"})(Sh||(Sh={}));var _EA;(function(A){A.CacheEmpty="cacheEmpty",A.NoApps="noApps"})(_EA||(_EA={}));var SEA;(function(A){A.Challenge="C",A.Verification="V",A.Rejection="R"})(SEA||(SEA={}));var HEA;(function(A){A.Unavailable="unavailable",A.RequesterAccountNotAvailable="requesterAccountNotAvailable",A.UserLookupError="userLookupError",A.InternalError="internalError"})(HEA||(HEA={}));var MEA;(function(A){A.Desktop="Desktop",A.Phone="Phone",A.Tablet="Tablet",A.Browser="Browser"})(MEA||(MEA={}));var KEA;(function(A){A.GuidedSetup="GuidedSetup",A.InviteModal="InviteModal"})(KEA||(KEA={}));var NEA;(function(A){A.Light="Light",A.Dark="Dark"})(NEA||(NEA={}));var LEA;(function(A){A.InputJsonDeserializationFailed="InputJsonDeserializationFailed",A.MissingTemplateUuid="MissingTemplateUuid",A.MissingItemUrl="MissingItemUrl",A.BadVersionInt="BadVersionInt"})(LEA||(LEA={}));var zEA;(function(A){A.AccountNotFound="accountNotFound",A.FeatureDisabled="featureDisabled",A.AccountTypeNotSupported="accountTypeNotSupported"})(zEA||(zEA={}));var UEA;(function(A){A.Member="member",A.Admin="admin",A.Owner="owner"})(UEA||(UEA={}));var VEA;(function(A){A.NetworkError="networkError",A.PermissionDenied="permissionDenied"})(VEA||(VEA={}));var XEA;(function(A){A.Failed="failed"})(XEA||(XEA={}));var JEA;(function(A){A.Code="Code",A.Yubikey="Yubikey"})(JEA||(JEA={}));var WEA;(function(A){A.Decimal="decimal",A.PaddedDecimal="paddedDecimal",A.Abbreviated="abbreviated",A.Full="full",A.Narrow="narrow"})(WEA||(WEA={}));var QEA;(function(A){A.Ok="ok",A.Dismissed="dismissed",A.Timeout="timeout",A.AccountLocked="accountLocked",A.AccountNotFound="accountNotFound",A.UnsupportedClientType="unsupportedClientType",A.PasswordUnlockRequired="passwordUnlockRequired",A.AppMustBeLockedToContinue="appMustBeLockedToContinue",A.SystemAuthDisabled="systemAuthDisabled",A.NotAvailable="notAvailable",A.ClientOutOfDate="clientOutOfDate",A.PromptError="promptError"})(QEA||(QEA={}));var gy;(function(A){A.InvalidRequest="InvalidRequest",A.JsonSerializeError="JsonSerializeError",A.DeviceKeyNotFound="DeviceKeyNotFound",A.EncryptCredentialBundleError="EncryptCredentialBundleError",A.DecryptCredentialBundleError="DecryptCredentialBundleError",A.StoreError="StoreError",A.DecryptDeviceKeyError="DecryptDeviceKeyError",A.DeviceKeyGenerationError="DeviceKeyGenerationError",A.WriteDeviceKeyToStorageError="WriteDeviceKeyToStorageError",A.EncryptDeviceKeyError="EncryptDeviceKeyError",A.Unknown="Unknown"})(gy||(gy={}));var YEA;(function(A){A.Initializing="initializing",A.Connected="connected",A.PermissionErrors="permissionErrors",A.ValidationErrors="validationErrors",A.SynchronizationErrors="synchronizationErrors",A.IncompatibleSandbox="incompatibleSandbox",A.UnableToConnect="unableToConnect"})(YEA||(YEA={}));var Hh;(function(A){A.UserSuspended="userSuspended",A.Other="other"})(Hh||(Hh={}));var ZEA;(function(A){A.Decimal="decimal",A.PaddedDecimal="paddedDecimal"})(ZEA||(ZEA={}));var ApA;(function(A){A.Install="Install",A.Uninstall="Uninstall"})(ApA||(ApA={}));var jpA;(function(A){A.SessionNotFound="sessionNotFound"})(jpA||(jpA={}));var epA;(function(A){A.Username="username",A.Password="password",A.Totp="totp",A.Sso="sso"})(epA||(epA={}));var tpA;(function(A){A.SessionNotFound="sessionNotFound",A.NoDataSource="noDataSource",A.UnexpectedError="unexpectedError"})(tpA||(tpA={}));var rpA;(function(A){A.SessionNotFound="sessionNotFound",A.AlreadyExists="alreadyExists",A.Unsupported="unsupported",A.Io="io"})(rpA||(rpA={}));var apA;(function(A){A.FailedToGenerateRandom="failedToGenerateRandom"})(apA||(apA={}));var npA;(function(A){A.SessionNotFound="sessionNotFound",A.NoDataSource="noDataSource",A.Io="io",A.FailedToCreateFileSupport="failedToCreateFileSupport",A.Offline="offline",A.Cancelled="cancelled",A.Other="other",A.MalformedZip="malformedZip",A.MalformedFile="malformedFile",A.MalformedCsv="malformedCsv"})(npA||(npA={}));var opA;(function(A){A.Start="start",A.ProcessingExportedAccount="processingExportedAccount",A.Saving="saving"})(opA||(opA={}));var ipA;(function(A){A.AccountLocked="AccountLocked",A.Ok="Ok"})(ipA||(ipA={}));var spA;(function(A){A.Ok="Ok",A.NoUnlockedAccounts="NoUnlockedAccounts"})(spA||(spA={}));var hy;(function(A){A.Ok="Ok",A.FailedToSync="FailedToSync",A.AccountNotFound="AccountNotFound"})(hy||(hy={}));var w7;(function(A){A.InvalidRequest="InvalidRequest",A.MissingAccountInformation="MissingAccountInformation",A.MissingUnlockInformationInKeychain="MissingUnlockInformationInKeychain",A.MissingDSecret="MissingDSecret",A.CannotUnlockAccounts="CannotUnlockAccounts",A.CannotEncodeResponse="CannotEncodeResponse",A.Unknown="Unknown",A.CannotEncryptCredentialBundle="CannotEncryptCredentialBundle",A.CannotDecryptCredentialBundle="CannotDecryptCredentialBundle",A.UserDefaultsError="UserDefaultsError"})(w7||(w7={}));var lpA;(function(A){A.Uppercase="uppercase",A.Lowercase="lowercase"})(lpA||(lpA={}));var cpA;(function(A){A.LimitReached="limitReached",A.InternalError="internalError",A.AccountLocked="accountLocked"})(cpA||(cpA={}));var dpA;(function(A){A.Success="success",A.Failure="failure"})(dpA||(dpA={}));var kpA;(function(A){A.Success="success",A.Failure="failure"})(kpA||(kpA={}));var upA;(function(A){A.Success="success",A.NoAppsForUser="noAppsForUser",A.NoApps="noApps"})(upA||(upA={}));var EpA;(function(A){A.Success="success",A.NotFound="notFound"})(EpA||(EpA={}));var ppA;(function(A){A.Success="success",A.Failed="failed"})(ppA||(ppA={}));var mpA;(function(A){A.InvalidSession="InvalidSession",A.SessionLocked="SessionLocked",A.SessionNotConfigured="SessionNotConfigured",A.NakedDomainFailed="NakedDomainFailed",A.InvalidItemTemplate="InvalidItemTemplate",A.BrainSaveObject="BrainSaveObject",A.InvalidSaveRequest="InvalidSaveRequest"})(mpA||(mpA={}));var BpA;(function(A){A.EnvironmentSizeLimitExceeded="environmentSizeLimitExceeded",A.AppError="appError"})(BpA||(BpA={}));var gpA;(function(A){A.DeniedByUser="deniedByUser",A.InvalidResponse="invalidResponse"})(gpA||(gpA={}));var hpA;(function(A){A.Unavailable="unavailable",A.UnableToLoadSettings="unableToLoadSettings",A.UnableToSaveSettings="unableToSaveSettings"})(hpA||(hpA={}));var qpA;(function(A){A.Terrible="Terrible",A.Weak="Weak",A.Fair="Fair",A.Good="Good",A.VeryGood="VeryGood",A.Excellent="Excellent",A.Fantastic="Fantastic",A.NotSpecified="NotSpecified"})(qpA||(qpA={}));var xpA;(function(A){A.Default="default",A.Privacy="privacy",A.Ramp="ramp",A.Stripe="stripe"})(xpA||(xpA={}));var vpA;(function(A){A.LimitReached="limitReached",A.InternalError="internalError"})(vpA||(vpA={}));var GpA;(function(A){A.Warning="warning",A.Info="info"})(GpA||(GpA={}));var fpA;(function(A){A.ItemCreated="itemCreated",A.Cancelled="cancelled"})(fpA||(fpA={}));var FpA;(function(A){A.Accepted="Accepted",A.Denied="Denied"})(FpA||(FpA={}));var bpA;(function(A){A.GenerateDeviceUuidError="GenerateDeviceUuidError",A.SetDeviceUuidError="SetDeviceUuidError",A.EncryptCredentialBundleError="EncryptCredentialBundleError",A.DecryptCredentialBundleError="DecryptCredentialBundleError",A.DeleteDeviceKeyError="DeleteDeviceKeyError"})(bpA||(bpA={}));var Uc;(function(A){A.FeatureFlags="feature_flags",A.ItemSearch="item_search",A.SetUpAnotherDevice="set_up_another_device",A.Homepage="homepage",A.Watchtower="watchtower",A.ActivationHub="activation_hub",A.ManualItemCreate="manual_item_create",A.ItemImport="item_import",A.ExtensionSetup="extension_setup",A.SetUpAutofill="set_up_autofill",A.MobileAutofillTutorial="mobile_autofill_tutorial",A.ExtensionSaveFillTutorial="extension_save_fill_tutorial",A.ManageAccount="manage_account",A.Accounts="accounts",A.InviteMembers="invite_members",A.ItemSharing="item_sharing",A.ExportItems="export_items",A.GitCommitSigning="git_commit_signing",A.DeveloperExperience="developer_experience",A.SshBookmarks="ssh_bookmarks",A.Item="item",A.PasskeySave="passkey_save",A.ChromeAutofillPrompt="chrome_autofill_prompt",A.BraveAutofillPrompt="brave_autofill_prompt",A.DeveloperSettings="developer_settings",A.AntiPeekMode="anti_peek_mode",A.PrivacySettings="privacy_settings",A.HelpMenu="help_menu",A.SecurityReview="security_review",A.Feedback="feedback",A.Verifier="verifier",A.VerifierSendingRequest="verifier_sending_request",A.VerifierReceivingRequest="verifier_receiving_request",A.VerifierReceivingResponse="verifier_receiving_response",A.DeveloperEnvironments="developer_environments",A.ExtensionInstall="extension_install",A.EssentialSetupTelemetryModal="essential_setup_telemetry_modal",A.ExtensionSurvey="extension_survey",A.LinkedAppEnrollment="linked_app_enrollment",A.AgenticAutofill="agentic_autofill",A.BiometricSystemUnlockFailure="app_unlock_biometric_system_errors"})(Uc||(Uc={}));var ypA;(function(A){A.New="New",A.InReview="InReview",A.Managed="Managed",A.Accepted="Accepted",A.Ignored="Ignored",A.PlanToClose="PlanToClose",A.Closed="Closed"})(ypA||(ypA={}));var Mh;(function(A){A.Launcher="l",A.Autofill="p"})(Mh||(Mh={}));var $pA;(function(A){A.Allow="allow",A.Deny="deny",A.Dismiss="dismiss"})($pA||($pA={}));var wpA;(function(A){A.Success="success",A.Failure="failure"})(wpA||(wpA={}));var IpA;(function(A){A.Initialization="initialization",A.Create="create",A.Edit="edit",A.Delete="delete"})(IpA||(IpA={}));var PpA;(function(A){A.Private="Private",A.Others="Others",A.Everyone="Everyone"})(PpA||(PpA={}));var OpA;(function(A){A.CannotRemoveReadWithoutManage="cannotRemoveReadWithoutManage"})(OpA||(OpA={}));var RpA;(function(A){A.Simplified="simplified"})(RpA||(RpA={}));var DpA;(function(A){A.Success="success",A.Error="error"})(DpA||(DpA={}));var TpA;(function(A){A.Failed="failed"})(TpA||(TpA={}));var CpA;(function(A){A.QuickAccess="quickAccess",A.SsoAuthPrompt="ssoAuthPrompt"})(CpA||(CpA={}));var _pA;(function(A){A.MarkAsShown="MarkAsShown"})(_pA||(_pA={}));var SpA;(function(A){A.AccountNotFound="accountNotFound",A.AccountTypeNotSupported="accountTypeNotSupported",A.AccountFeatureNotSupported="accountFeatureNotSupported",A.LockedCacheEmpty="lockedCacheEmpty",A.ReadAndDecryptFailed="readAndDecryptFailed"})(SpA||(SpA={}));var HpA;(function(A){A.AccountNotFound="accountNotFound",A.AccountTypeNotSupported="accountTypeNotSupported",A.AccountFeatureNotSupported="accountFeatureNotSupported",A.AccountLocked="accountLocked",A.UnlockedCacheEmpty="unlockedCacheEmpty",A.NoAppsAvailable="noAppsAvailable"})(HpA||(HpA={}));var MpA;(function(A){A.AccountNotFound="accountNotFound",A.AccountNotSupported="accountNotSupported"})(MpA||(MpA={}));var KpA;(function(A){A.Failed="failed"})(KpA||(KpA={}));var NpA;(function(A){A.AccountState="accountState",A.UserState="userState",A.BillingStatus="billingStatus",A.Permission="permission"})(NpA||(NpA={}));var LpA;(function(A){A.FeatureFlag="featureFlag",A.Entitlement="entitlement",A.Policy="policy"})(LpA||(LpA={}));var zpA;(function(A){A.CleanUp="CleanUp",A.ConnectionInterrupted="ConnectionInterrupted",A.ConnectionInvalidated="ConnectionInvalidated",A.ConnectionTimeout="ConnectionTimeout",A.ContextDropped="ContextDropped",A.ServerInvalid="ServerInvalid"})(zpA||(zpA={}));var UpA={ar:"ar-arab-eg","az-arab":"az-arab-ir","az-ir":"az-arab-ir",be:"be-cyrl-by",da:"da-latn-dk",el:"el-grek-gr",en:"en-latn-us",fa:"fa-arab-ir",ja:"ja-jpan-jp",ko:"ko-kore-kr",pt:"pt-latn-br",sr:"sr-cyrl-rs","sr-ru":"sr-latn-ru",sv:"sv-latn-se",ta:"ta-taml-in",uk:"uk-cyrl-ua",zh:"zh-hans-cn","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-gb":"zh-hant-gb","zh-us":"zh-hant-us"},X6j=["az","bg","cs","de","es","fi","fr","hu","it","lt","lv","nl","pl","ro","ru"];function VpA(A){if(UpA.hasOwnProperty(A))return new I7(UpA[A]);let j=new I7(A);return X6j.includes(j.language)?(j.region=j.language.toUpperCase(),j):null}var J6j="([a-z]{2,3}|\\*)",W6j="(?:-([a-z]{4}|\\*))",Q6j="(?:-([a-z]{2}|\\*))",Y6j="(?:-([a-z]{3}|\\*))",Z6j=new RegExp(`^${J6j}${W6j}?${Q6j}?${Y6j}?$`,"i"),QO=["language","script","region","variant"],I7=class{constructor(j){let e=Z6j.exec(j.replace(/_/g,"-"));if(!e){this.isWellFormed=!1;return}let[,t,r,a,n]=e;t&&(this.language=t.toLowerCase()),r&&(this.script=r[0].toUpperCase()+r.slice(1)),a&&(this.region=a.toUpperCase()),this.variant=n,this.isWellFormed=!0}isEqual(j){return QO.every(e=>this[e]===j[e])}matches(j,e=!1,t=!1){return QO.every(r=>e&&this[r]===void 0||t&&j[r]===void 0||this[r]===j[r])}toString(){return QO.map(j=>this[j]).filter(j=>j!==void 0).join("-")}clearVariants(){this.variant=void 0}clearRegion(){this.region=void 0}addLikelySubtags(){let j=VpA(this.toString().toLowerCase());return j?(QO.forEach(e=>this[e]=j[e]),!0):!1}};function Z2(A,j,e){let t=new Set,r=new Map;for(let a of j)new I7(a).isWellFormed&&r.set(a,new I7(a));A:for(let a of A){let n=a.toLowerCase(),o=new I7(n);if(o.language!==void 0){for(let i of r.keys())if(n===i.toLowerCase()){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}for(let[i,s]of r.entries())if(s.matches(o,!0,!1)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}if(o.addLikelySubtags()){for(let[i,s]of r.entries())if(s.matches(o,!0,!1)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}}o.clearVariants();for(let[i,s]of r.entries())if(s.matches(o,!0,!0)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}if(o.clearRegion(),o.addLikelySubtags()){for(let[i,s]of r.entries())if(s.matches(o,!0,!1)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}}o.clearRegion();for(let[i,s]of r.entries())if(s.matches(o,!0,!0)){if(t.add(i),r.delete(i),e==="lookup")return Array.from(t);if(e==="filtering")continue;continue A}}}return Array.from(t)}function XpA(A,j,e,t,r){let a=A[j];if(a!==void 0){if(e==="boolean"?a=new Boolean(a):e==="string"&&(a=String(a)),t!==void 0&&t.indexOf(a)===-1)throw new Error("Invalid option value");return a}return r}function YO(A,j,e={}){let t=XpA(e,"defaultLocale","string"),r=XpA(e,"strategy","string",["filtering","matching","lookup"],"filtering");if(r==="lookup"&&!t)throw new Error("defaultLocale cannot be undefined for strategy `lookup`");let a=Array.from(Object(A)).map(i=>String(i)),n=Array.from(Object(j)).map(i=>String(i)),o=Z2(a,n,r);return r==="lookup"?o.length===0&&o.push(t):t&&!o.includes(t)&&o.push(t),o}var yL={};er(yL,{Browser:()=>Qt,OperatingSystem:()=>_a,getBrowserInfo:()=>IB,getHighEntropyBrowserInfo:()=>WhA,getLimitedBrowserInfo:()=>lD,getWindowsVersionFromClientHint:()=>QhA});var Anj=typeof global=="object"&&global&&global.Object===Object&&global,ZO=Anj;var jnj=typeof self=="object"&&self&&self.Object===Object&&self,enj=ZO||jnj||Function("return this")(),ua=enj;var tnj=ua.Symbol,Vo=tnj;var JpA=Object.prototype,rnj=JpA.hasOwnProperty,anj=JpA.toString,qy=Vo?Vo.toStringTag:void 0;function nnj(A){var j=rnj.call(A,qy),e=A[qy];try{A[qy]=void 0;var t=!0}catch{}var r=anj.call(A);return t&&(j?A[qy]=e:delete A[qy]),r}var WpA=nnj;var onj=Object.prototype,inj=onj.toString;function snj(A){return inj.call(A)}var QpA=snj;var lnj="[object Null]",cnj="[object Undefined]",YpA=Vo?Vo.toStringTag:void 0;function dnj(A){return A==null?A===void 0?cnj:lnj:YpA&&YpA in Object(A)?WpA(A):QpA(A)}var fo=dnj;function knj(A){return A!=null&&typeof A=="object"}var i6=knj;var unj="[object Symbol]";function Enj(A){return typeof A=="symbol"||i6(A)&&fo(A)==unj}var rk=Enj;function pnj(A,j){for(var e=-1,t=A==null?0:A.length,r=Array(t);++e<t;)r[e]=j(A[e],e,A);return r}var Xo=pnj;var mnj=Array.isArray,tr=mnj;var Bnj=1/0,ZpA=Vo?Vo.prototype:void 0,AmA=ZpA?ZpA.toString:void 0;function jmA(A){if(typeof A=="string")return A;if(tr(A))return Xo(A,jmA)+"";if(rk(A))return AmA?AmA.call(A):"";var j=A+"";return j=="0"&&1/A==-Bnj?"-0":j}var Vc=jmA;var gnj=/\s/;function hnj(A){for(var j=A.length;j--&&gnj.test(A.charAt(j)););return j}var emA=hnj;var qnj=/^\s+/;function xnj(A){return A&&A.slice(0,emA(A)+1).replace(qnj,"")}var AR=xnj;function vnj(A){var j=typeof A;return A!=null&&(j=="object"||j=="function")}var fa=vnj;var tmA=NaN,Gnj=/^[-+]0x[0-9a-f]+$/i,fnj=/^0b[01]+$/i,Fnj=/^0o[0-7]+$/i,bnj=parseInt;function ynj(A){if(typeof A=="number")return A;if(rk(A))return tmA;if(fa(A)){var j=typeof A.valueOf=="function"?A.valueOf():A;A=fa(j)?j+"":j}if(typeof A!="string")return A===0?A:+A;A=AR(A);var e=fnj.test(A);return e||Fnj.test(A)?bnj(A.slice(2),e?2:8):Gnj.test(A)?tmA:+A}var ak=ynj;var rmA=1/0,$nj=17976931348623157e292;function wnj(A){if(!A)return A===0?A:0;if(A=ak(A),A===rmA||A===-rmA){var j=A<0?-1:1;return j*$nj}return A===A?A:0}var amA=wnj;function Inj(A){var j=amA(A),e=j%1;return j===j?e?j-e:j:0}var hi=Inj;function Pnj(A){return A}var bs=Pnj;var Onj="[object AsyncFunction]",Rnj="[object Function]",Dnj="[object GeneratorFunction]",Tnj="[object Proxy]";function Cnj(A){if(!fa(A))return!1;var j=fo(A);return j==Rnj||j==Dnj||j==Onj||j==Tnj}var hG=Cnj;var _nj=ua["__core-js_shared__"],jR=_nj;var nmA=function(){var A=/[^.]+$/.exec(jR&&jR.keys&&jR.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}();function Snj(A){return!!nmA&&nmA in A}var omA=Snj;var Hnj=Function.prototype,Mnj=Hnj.toString;function Knj(A){if(A!=null){try{return Mnj.call(A)}catch{}try{return A+""}catch{}}return""}var np=Knj;var Nnj=/[\\^$.*+?()[\]{}|]/g,Lnj=/^\[object .+?Constructor\]$/,znj=Function.prototype,Unj=Object.prototype,Vnj=znj.toString,Xnj=Unj.hasOwnProperty,Jnj=RegExp("^"+Vnj.call(Xnj).replace(Nnj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wnj(A){if(!fa(A)||omA(A))return!1;var j=hG(A)?Jnj:Lnj;return j.test(np(A))}var imA=Wnj;function Qnj(A,j){return A?.[j]}var smA=Qnj;function Ynj(A,j){var e=smA(A,j);return imA(e)?e:void 0}var sl=Ynj;var Znj=sl(ua,"WeakMap"),Kh=Znj;var Aoj=Kh&&new Kh,qG=Aoj;var joj=qG?function(A,j){return qG.set(A,j),A}:bs,eR=joj;var lmA=Object.create,eoj=function(){function A(){}return function(j){if(!fa(j))return{};if(lmA)return lmA(j);A.prototype=j;var e=new A;return A.prototype=void 0,e}}(),EB=eoj;function toj(A){return function(){var j=arguments;switch(j.length){case 0:return new A;case 1:return new A(j[0]);case 2:return new A(j[0],j[1]);case 3:return new A(j[0],j[1],j[2]);case 4:return new A(j[0],j[1],j[2],j[3]);case 5:return new A(j[0],j[1],j[2],j[3],j[4]);case 6:return new A(j[0],j[1],j[2],j[3],j[4],j[5]);case 7:return new A(j[0],j[1],j[2],j[3],j[4],j[5],j[6])}var e=EB(A.prototype),t=A.apply(e,j);return fa(t)?t:e}}var op=toj;var roj=1;function aoj(A,j,e){var t=j&roj,r=op(A);function a(){var n=this&&this!==ua&&this instanceof a?r:A;return n.apply(t?e:this,arguments)}return a}var cmA=aoj;function noj(A,j,e){switch(e.length){case 0:return A.call(j);case 1:return A.call(j,e[0]);case 2:return A.call(j,e[0],e[1]);case 3:return A.call(j,e[0],e[1],e[2])}return A.apply(j,e)}var pB=noj;var ooj=Math.max;function ioj(A,j,e,t){for(var r=-1,a=A.length,n=e.length,o=-1,i=j.length,s=ooj(a-n,0),l=Array(i+s),c=!t;++o<i;)l[o]=j[o];for(;++r<n;)(c||r<a)&&(l[e[r]]=A[r]);for(;s--;)l[o++]=A[r++];return l}var tR=ioj;var soj=Math.max;function loj(A,j,e,t){for(var r=-1,a=A.length,n=-1,o=e.length,i=-1,s=j.length,l=soj(a-o,0),c=Array(l+s),k=!t;++r<l;)c[r]=A[r];for(var u=r;++i<s;)c[u+i]=j[i];for(;++n<o;)(k||r<a)&&(c[u+e[n]]=A[r++]);return c}var rR=loj;function coj(A,j){for(var e=A.length,t=0;e--;)A[e]===j&&++t;return t}var dmA=coj;function doj(){}var xG=doj;var koj=4294967295;function aR(A){this.__wrapped__=A,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=koj,this.__views__=[]}aR.prototype=EB(xG.prototype);aR.prototype.constructor=aR;var vG=aR;function uoj(){}var nR=uoj;var Eoj=qG?function(A){return qG.get(A)}:nR,oR=Eoj;var poj={},AL=poj;var moj=Object.prototype,Boj=moj.hasOwnProperty;function goj(A){for(var j=A.name+"",e=AL[j],t=Boj.call(AL,j)?e.length:0;t--;){var r=e[t],a=r.func;if(a==null||a==A)return r.name}return j}var kmA=goj;function iR(A,j){this.__wrapped__=A,this.__actions__=[],this.__chain__=!!j,this.__index__=0,this.__values__=void 0}iR.prototype=EB(xG.prototype);iR.prototype.constructor=iR;var xy=iR;function hoj(A,j){var e=-1,t=A.length;for(j||(j=Array(t));++e<t;)j[e]=A[e];return j}var mB=hoj;function qoj(A){if(A instanceof vG)return A.clone();var j=new xy(A.__wrapped__,A.__chain__);return j.__actions__=mB(A.__actions__),j.__index__=A.__index__,j.__values__=A.__values__,j}var umA=qoj;var xoj=Object.prototype,voj=xoj.hasOwnProperty;function sR(A){if(i6(A)&&!tr(A)&&!(A instanceof vG)){if(A instanceof xy)return A;if(voj.call(A,"__wrapped__"))return umA(A)}return new xy(A)}sR.prototype=xG.prototype;sR.prototype.constructor=sR;var EmA=sR;function Goj(A){var j=kmA(A),e=EmA[j];if(typeof e!="function"||!(j in vG.prototype))return!1;if(A===e)return!0;var t=oR(e);return!!t&&A===t[0]}var pmA=Goj;var foj=800,Foj=16,boj=Date.now;function yoj(A){var j=0,e=0;return function(){var t=boj(),r=Foj-(t-e);if(e=t,r>0){if(++j>=foj)return arguments[0]}else j=0;return A.apply(void 0,arguments)}}var lR=yoj;var $oj=lR(eR),cR=$oj;var woj=/\{\n\/\* \[wrapped with (.+)\] \*/,Ioj=/,? & /;function Poj(A){var j=A.match(woj);return j?j[1].split(Ioj):[]}var mmA=Poj;var Ooj=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Roj(A,j){var e=j.length;if(!e)return A;var t=e-1;return j[t]=(e>1?"& ":"")+j[t],j=j.join(e>2?", ":" "),A.replace(Ooj,`{
/* [wrapped with `+j+`] */
`)}var BmA=Roj;function Doj(A){return function(){return A}}var gmA=Doj;var Toj=function(){try{var A=sl(Object,"defineProperty");return A({},"",{}),A}catch{}}(),GG=Toj;var Coj=GG?function(A,j){return GG(A,"toString",{configurable:!0,enumerable:!1,value:gmA(j),writable:!0})}:bs,hmA=Coj;var _oj=lR(hmA),fG=_oj;function Soj(A,j){for(var e=-1,t=A==null?0:A.length;++e<t&&j(A[e],e,A)!==!1;);return A}var dR=Soj;function Hoj(A,j,e,t){for(var r=A.length,a=e+(t?1:-1);t?a--:++a<r;)if(j(A[a],a,A))return a;return-1}var kR=Hoj;function Moj(A){return A!==A}var qmA=Moj;function Koj(A,j,e){for(var t=e-1,r=A.length;++t<r;)if(A[t]===j)return t;return-1}var xmA=Koj;function Noj(A,j,e){return j===j?xmA(A,j,e):kR(A,qmA,e)}var BB=Noj;function Loj(A,j){var e=A==null?0:A.length;return!!e&&BB(A,j,0)>-1}var uR=Loj;var zoj=1,Uoj=2,Voj=8,Xoj=16,Joj=32,Woj=64,Qoj=128,Yoj=256,Zoj=512,Aij=[["ary",Qoj],["bind",zoj],["bindKey",Uoj],["curry",Voj],["curryRight",Xoj],["flip",Zoj],["partial",Joj],["partialRight",Woj],["rearg",Yoj]];function jij(A,j){return dR(Aij,function(e){var t="_."+e[0];j&e[1]&&!uR(A,t)&&A.push(t)}),A.sort()}var vmA=jij;function eij(A,j,e){var t=j+"";return fG(A,BmA(t,vmA(mmA(t),e)))}var ER=eij;var tij=1,rij=2,aij=4,nij=8,GmA=32,fmA=64;function oij(A,j,e,t,r,a,n,o,i,s){var l=j&nij,c=l?n:void 0,k=l?void 0:n,u=l?a:void 0,m=l?void 0:a;j|=l?GmA:fmA,j&=~(l?fmA:GmA),j&aij||(j&=~(tij|rij));var F=[A,j,r,u,c,m,k,o,i,s],S=e.apply(void 0,F);return pmA(A)&&cR(S,F),S.placeholder=t,ER(S,A,j)}var pR=oij;function iij(A){var j=A;return j.placeholder}var mR=iij;var sij=9007199254740991,lij=/^(?:0|[1-9]\d*)$/;function cij(A,j){var e=typeof A;return j=j??sij,!!j&&(e=="number"||e!="symbol"&&lij.test(A))&&A>-1&&A%1==0&&A<j}var P7=cij;var dij=Math.min;function kij(A,j){for(var e=A.length,t=dij(j.length,e),r=mB(A);t--;){var a=j[t];A[t]=P7(a,e)?r[a]:void 0}return A}var FmA=kij;var bmA="__lodash_placeholder__";function uij(A,j){for(var e=-1,t=A.length,r=0,a=[];++e<t;){var n=A[e];(n===j||n===bmA)&&(A[e]=bmA,a[r++]=e)}return a}var Nh=uij;var Eij=1,pij=2,mij=8,Bij=16,gij=128,hij=512;function ymA(A,j,e,t,r,a,n,o,i,s){var l=j&gij,c=j&Eij,k=j&pij,u=j&(mij|Bij),m=j&hij,F=k?void 0:op(A);function S(){for(var G=arguments.length,x=Array(G),R=G;R--;)x[R]=arguments[R];if(u)var P=mR(S),D=dmA(x,P);if(t&&(x=tR(x,t,r,u)),a&&(x=rR(x,a,n,u)),G-=D,u&&G<s){var y=Nh(x,P);return pR(A,j,ymA,S.placeholder,e,x,y,o,i,s-G)}var h=c?e:this,O=k?h[A]:A;return G=x.length,o?x=FmA(x,o):m&&G>1&&x.reverse(),l&&i<G&&(x.length=i),this&&this!==ua&&this instanceof S&&(O=F||op(O)),O.apply(h,x)}return S}var BR=ymA;function qij(A,j,e){var t=op(A);function r(){for(var a=arguments.length,n=Array(a),o=a,i=mR(r);o--;)n[o]=arguments[o];var s=a<3&&n[0]!==i&&n[a-1]!==i?[]:Nh(n,i);if(a-=s.length,a<e)return pR(A,j,BR,r.placeholder,void 0,n,s,void 0,void 0,e-a);var l=this&&this!==ua&&this instanceof r?t:A;return pB(l,this,n)}return r}var $mA=qij;var xij=1;function vij(A,j,e,t){var r=j&xij,a=op(A);function n(){for(var o=-1,i=arguments.length,s=-1,l=t.length,c=Array(l+i),k=this&&this!==ua&&this instanceof n?a:A;++s<l;)c[s]=t[s];for(;i--;)c[s++]=arguments[++o];return pB(k,r?e:this,c)}return n}var wmA=vij;var ImA="__lodash_placeholder__",jL=1,Gij=2,fij=4,PmA=8,vy=128,OmA=256,Fij=Math.min;function bij(A,j){var e=A[1],t=j[1],r=e|t,a=r<(jL|Gij|vy),n=t==vy&&e==PmA||t==vy&&e==OmA&&A[7].length<=j[8]||t==(vy|OmA)&&j[7].length<=j[8]&&e==PmA;if(!(a||n))return A;t&jL&&(A[2]=j[2],r|=e&jL?0:fij);var o=j[3];if(o){var i=A[3];A[3]=i?tR(i,o,j[4]):o,A[4]=i?Nh(A[3],ImA):j[4]}return o=j[5],o&&(i=A[5],A[5]=i?rR(i,o,j[6]):o,A[6]=i?Nh(A[5],ImA):j[6]),o=j[7],o&&(A[7]=o),t&vy&&(A[8]=A[8]==null?j[8]:Fij(A[8],j[8])),A[9]==null&&(A[9]=j[9]),A[0]=j[0],A[1]=r,A}var RmA=bij;var yij="Expected a function",DmA=1,$ij=2,eL=8,tL=16,rL=32,TmA=64,CmA=Math.max;function wij(A,j,e,t,r,a,n,o){var i=j&$ij;if(!i&&typeof A!="function")throw new TypeError(yij);var s=t?t.length:0;if(s||(j&=~(rL|TmA),t=r=void 0),n=n===void 0?n:CmA(hi(n),0),o=o===void 0?o:hi(o),s-=r?r.length:0,j&TmA){var l=t,c=r;t=r=void 0}var k=i?void 0:oR(A),u=[A,j,e,t,r,l,c,a,n,o];if(k&&RmA(u,k),A=u[0],j=u[1],e=u[2],t=u[3],r=u[4],o=u[9]=u[9]===void 0?i?0:A.length:CmA(u[9]-s,0),!o&&j&(eL|tL)&&(j&=~(eL|tL)),!j||j==DmA)var m=cmA(A,j,e);else j==eL||j==tL?m=$mA(A,j,o):(j==rL||j==(DmA|rL))&&!r.length?m=wmA(A,j,e,t):m=BR.apply(void 0,u);var F=k?eR:cR;return ER(F(m,u),A,j)}var _mA=wij;function Iij(A,j,e){j=="__proto__"&&GG?GG(A,j,{configurable:!0,enumerable:!0,value:e,writable:!0}):A[j]=e}var As=Iij;function Pij(A,j){return A===j||A!==A&&j!==j}var Xc=Pij;var Oij=Object.prototype,Rij=Oij.hasOwnProperty;function Dij(A,j,e){var t=A[j];(!(Rij.call(A,j)&&Xc(t,e))||e===void 0&&!(j in A))&&As(A,j,e)}var gB=Dij;function Tij(A,j,e,t){var r=!e;e||(e={});for(var a=-1,n=j.length;++a<n;){var o=j[a],i=t?t(e[o],A[o],o,e,A):void 0;i===void 0&&(i=A[o]),r?As(e,o,i):gB(e,o,i)}return e}var js=Tij;var SmA=Math.max;function Cij(A,j,e){return j=SmA(j===void 0?A.length-1:j,0),function(){for(var t=arguments,r=-1,a=SmA(t.length-j,0),n=Array(a);++r<a;)n[r]=t[j+r];r=-1;for(var o=Array(j+1);++r<j;)o[r]=t[r];return o[j]=e(n),pB(A,this,o)}}var gR=Cij;function _ij(A,j){return fG(gR(A,j,bs),A+"")}var O7=_ij;var Sij=9007199254740991;function Hij(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=Sij}var FG=Hij;function Mij(A){return A!=null&&FG(A.length)&&!hG(A)}var bn=Mij;function Kij(A,j,e){if(!fa(e))return!1;var t=typeof j;return(t=="number"?bn(e)&&P7(j,e.length):t=="string"&&j in e)?Xc(e[j],A):!1}var ac=Kij;function Nij(A){return O7(function(j,e){var t=-1,r=e.length,a=r>1?e[r-1]:void 0,n=r>2?e[2]:void 0;for(a=A.length>3&&typeof a=="function"?(r--,a):void 0,n&&ac(e[0],e[1],n)&&(a=r<3?void 0:a,r=1),j=Object(j);++t<r;){var o=e[t];o&&A(j,o,t,a)}return j})}var bG=Nij;var Lij=Object.prototype;function zij(A){var j=A&&A.constructor,e=typeof j=="function"&&j.prototype||Lij;return A===e}var R7=zij;function Uij(A,j){for(var e=-1,t=Array(A);++e<A;)t[e]=j(e);return t}var yG=Uij;var Vij="[object Arguments]";function Xij(A){return i6(A)&&fo(A)==Vij}var aL=Xij;var HmA=Object.prototype,Jij=HmA.hasOwnProperty,Wij=HmA.propertyIsEnumerable,Qij=aL(function(){return arguments}())?aL:function(A){return i6(A)&&Jij.call(A,"callee")&&!Wij.call(A,"callee")},nk=Qij;function Yij(){return!1}var MmA=Yij;var LmA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,KmA=LmA&&typeof module=="object"&&module&&!module.nodeType&&module,Zij=KmA&&KmA.exports===LmA,NmA=Zij?ua.Buffer:void 0,Asj=NmA?NmA.isBuffer:void 0,jsj=Asj||MmA,ok=jsj;var esj="[object Arguments]",tsj="[object Array]",rsj="[object Boolean]",asj="[object Date]",nsj="[object Error]",osj="[object Function]",isj="[object Map]",ssj="[object Number]",lsj="[object Object]",csj="[object RegExp]",dsj="[object Set]",ksj="[object String]",usj="[object WeakMap]",Esj="[object ArrayBuffer]",psj="[object DataView]",msj="[object Float32Array]",Bsj="[object Float64Array]",gsj="[object Int8Array]",hsj="[object Int16Array]",qsj="[object Int32Array]",xsj="[object Uint8Array]",vsj="[object Uint8ClampedArray]",Gsj="[object Uint16Array]",fsj="[object Uint32Array]",R6={};R6[msj]=R6[Bsj]=R6[gsj]=R6[hsj]=R6[qsj]=R6[xsj]=R6[vsj]=R6[Gsj]=R6[fsj]=!0;R6[esj]=R6[tsj]=R6[Esj]=R6[rsj]=R6[psj]=R6[asj]=R6[nsj]=R6[osj]=R6[isj]=R6[ssj]=R6[lsj]=R6[csj]=R6[dsj]=R6[ksj]=R6[usj]=!1;function Fsj(A){return i6(A)&&FG(A.length)&&!!R6[fo(A)]}var zmA=Fsj;function bsj(A){return function(j){return A(j)}}var Jc=bsj;var UmA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gy=UmA&&typeof module=="object"&&module&&!module.nodeType&&module,ysj=Gy&&Gy.exports===UmA,nL=ysj&&ZO.process,$sj=function(){try{var A=Gy&&Gy.require&&Gy.require("util").types;return A||nL&&nL.binding&&nL.binding("util")}catch{}}(),ys=$sj;var VmA=ys&&ys.isTypedArray,wsj=VmA?Jc(VmA):zmA,hB=wsj;var Isj=Object.prototype,Psj=Isj.hasOwnProperty;function Osj(A,j){var e=tr(A),t=!e&&nk(A),r=!e&&!t&&ok(A),a=!e&&!t&&!r&&hB(A),n=e||t||r||a,o=n?yG(A.length,String):[],i=o.length;for(var s in A)(j||Psj.call(A,s))&&!(n&&(s=="length"||r&&(s=="offset"||s=="parent")||a&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||P7(s,i)))&&o.push(s);return o}var hR=Osj;function Rsj(A,j){return function(e){return A(j(e))}}var qR=Rsj;var Dsj=qR(Object.keys,Object),XmA=Dsj;var Tsj=Object.prototype,Csj=Tsj.hasOwnProperty;function _sj(A){if(!R7(A))return XmA(A);var j=[];for(var e in Object(A))Csj.call(A,e)&&e!="constructor"&&j.push(e);return j}var $G=_sj;function Ssj(A){return bn(A)?hR(A):$G(A)}var Va=Ssj;var Hsj=Object.prototype,Msj=Hsj.hasOwnProperty,Ksj=bG(function(A,j){if(R7(j)||bn(j)){js(j,Va(j),A);return}for(var e in j)Msj.call(j,e)&&gB(A,e,j[e])}),fy=Ksj;function Nsj(A){var j=[];if(A!=null)for(var e in Object(A))j.push(e);return j}var JmA=Nsj;var Lsj=Object.prototype,zsj=Lsj.hasOwnProperty;function Usj(A){if(!fa(A))return JmA(A);var j=R7(A),e=[];for(var t in A)t=="constructor"&&(j||!zsj.call(A,t))||e.push(t);return e}var WmA=Usj;function Vsj(A){return bn(A)?hR(A,!0):WmA(A)}var Wc=Vsj;var Xsj=bG(function(A,j,e,t){js(j,Va(j),A,t)}),oL=Xsj;var Jsj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wsj=/^\w*$/;function Qsj(A,j){if(tr(A))return!1;var e=typeof A;return e=="number"||e=="symbol"||e=="boolean"||A==null||rk(A)?!0:Wsj.test(A)||!Jsj.test(A)||j!=null&&A in Object(j)}var wG=Qsj;var Ysj=sl(Object,"create"),ip=Ysj;function Zsj(){this.__data__=ip?ip(null):{},this.size=0}var QmA=Zsj;function Alj(A){var j=this.has(A)&&delete this.__data__[A];return this.size-=j?1:0,j}var YmA=Alj;var jlj="__lodash_hash_undefined__",elj=Object.prototype,tlj=elj.hasOwnProperty;function rlj(A){var j=this.__data__;if(ip){var e=j[A];return e===jlj?void 0:e}return tlj.call(j,A)?j[A]:void 0}var ZmA=rlj;var alj=Object.prototype,nlj=alj.hasOwnProperty;function olj(A){var j=this.__data__;return ip?j[A]!==void 0:nlj.call(j,A)}var ABA=olj;var ilj="__lodash_hash_undefined__";function slj(A,j){var e=this.__data__;return this.size+=this.has(A)?0:1,e[A]=ip&&j===void 0?ilj:j,this}var jBA=slj;function IG(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}IG.prototype.clear=QmA;IG.prototype.delete=YmA;IG.prototype.get=ZmA;IG.prototype.has=ABA;IG.prototype.set=jBA;var iL=IG;function llj(){this.__data__=[],this.size=0}var eBA=llj;function clj(A,j){for(var e=A.length;e--;)if(Xc(A[e][0],j))return e;return-1}var qB=clj;var dlj=Array.prototype,klj=dlj.splice;function ulj(A){var j=this.__data__,e=qB(j,A);if(e<0)return!1;var t=j.length-1;return e==t?j.pop():klj.call(j,e,1),--this.size,!0}var tBA=ulj;function Elj(A){var j=this.__data__,e=qB(j,A);return e<0?void 0:j[e][1]}var rBA=Elj;function plj(A){return qB(this.__data__,A)>-1}var aBA=plj;function mlj(A,j){var e=this.__data__,t=qB(e,A);return t<0?(++this.size,e.push([A,j])):e[t][1]=j,this}var nBA=mlj;function PG(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}PG.prototype.clear=eBA;PG.prototype.delete=tBA;PG.prototype.get=rBA;PG.prototype.has=aBA;PG.prototype.set=nBA;var xB=PG;var Blj=sl(ua,"Map"),vB=Blj;function glj(){this.size=0,this.__data__={hash:new iL,map:new(vB||xB),string:new iL}}var oBA=glj;function hlj(A){var j=typeof A;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?A!=="__proto__":A===null}var iBA=hlj;function qlj(A,j){var e=A.__data__;return iBA(j)?e[typeof j=="string"?"string":"hash"]:e.map}var GB=qlj;function xlj(A){var j=GB(this,A).delete(A);return this.size-=j?1:0,j}var sBA=xlj;function vlj(A){return GB(this,A).get(A)}var lBA=vlj;function Glj(A){return GB(this,A).has(A)}var cBA=Glj;function flj(A,j){var e=GB(this,A),t=e.size;return e.set(A,j),this.size+=e.size==t?0:1,this}var dBA=flj;function OG(A){var j=-1,e=A==null?0:A.length;for(this.clear();++j<e;){var t=A[j];this.set(t[0],t[1])}}OG.prototype.clear=oBA;OG.prototype.delete=sBA;OG.prototype.get=lBA;OG.prototype.has=cBA;OG.prototype.set=dBA;var Lh=OG;var Flj="Expected a function";function sL(A,j){if(typeof A!="function"||j!=null&&typeof j!="function")throw new TypeError(Flj);var e=function(){var t=arguments,r=j?j.apply(this,t):t[0],a=e.cache;if(a.has(r))return a.get(r);var n=A.apply(this,t);return e.cache=a.set(r,n)||a,n};return e.cache=new(sL.Cache||Lh),e}sL.Cache=Lh;var kBA=sL;var blj=500;function ylj(A){var j=kBA(A,function(t){return e.size===blj&&e.clear(),t}),e=j.cache;return j}var uBA=ylj;var $lj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wlj=/\\(\\)?/g,Ilj=uBA(function(A){var j=[];return A.charCodeAt(0)===46&&j.push(""),A.replace($lj,function(e,t,r,a){j.push(r?a.replace(wlj,"$1"):t||e)}),j}),EBA=Ilj;function Plj(A){return A==null?"":Vc(A)}var on=Plj;function Olj(A,j){return tr(A)?A:wG(A,j)?[A]:EBA(on(A))}var Qc=Olj;var Rlj=1/0;function Dlj(A){if(typeof A=="string"||rk(A))return A;var j=A+"";return j=="0"&&1/A==-Rlj?"-0":j}var Yc=Dlj;function Tlj(A,j){j=Qc(j,A);for(var e=0,t=j.length;A!=null&&e<t;)A=A[Yc(j[e++])];return e&&e==t?A:void 0}var D7=Tlj;function Clj(A,j,e){var t=A==null?void 0:D7(A,j);return t===void 0?e:t}var Fy=Clj;function _lj(A,j){for(var e=-1,t=j.length,r=A.length;++e<t;)A[r+e]=j[e];return A}var RG=_lj;var pBA=Vo?Vo.isConcatSpreadable:void 0;function Slj(A){return tr(A)||nk(A)||!!(pBA&&A&&A[pBA])}var mBA=Slj;function BBA(A,j,e,t,r){var a=-1,n=A.length;for(e||(e=mBA),r||(r=[]);++a<n;){var o=A[a];j>0&&e(o)?j>1?BBA(o,j-1,e,t,r):RG(r,o):t||(r[r.length]=o)}return r}var fB=BBA;function Hlj(A){var j=A==null?0:A.length;return j?fB(A,1):[]}var ik=Hlj;function Mlj(A){return fG(gR(A,void 0,ik),A+"")}var xR=Mlj;var Klj=qR(Object.getPrototypeOf,Object),DG=Klj;var Nlj="[object Object]",Llj=Function.prototype,zlj=Object.prototype,gBA=Llj.toString,Ulj=zlj.hasOwnProperty,Vlj=gBA.call(Object);function Xlj(A){if(!i6(A)||fo(A)!=Nlj)return!1;var j=DG(A);if(j===null)return!0;var e=Ulj.call(j,"constructor")&&j.constructor;return typeof e=="function"&&e instanceof e&&gBA.call(e)==Vlj}var vR=Xlj;function Jlj(A,j,e){var t=-1,r=A.length;j<0&&(j=-j>r?0:r+j),e=e>r?r:e,e<0&&(e+=r),r=j>e?0:e-j>>>0,j>>>=0;for(var a=Array(r);++t<r;)a[t]=A[t+j];return a}var TG=Jlj;function Wlj(A,j,e){var t=A.length;return e=e===void 0?t:e,!j&&e>=t?A:TG(A,j,e)}var CG=Wlj;var Qlj="\\ud800-\\udfff",Ylj="\\u0300-\\u036f",Zlj="\\ufe20-\\ufe2f",Acj="\\u20d0-\\u20ff",jcj=Ylj+Zlj+Acj,ecj="\\ufe0e\\ufe0f",tcj="\\u200d",rcj=RegExp("["+tcj+Qlj+jcj+ecj+"]");function acj(A){return rcj.test(A)}var _G=acj;function ncj(A){return A.split("")}var hBA=ncj;var qBA="\\ud800-\\udfff",ocj="\\u0300-\\u036f",icj="\\ufe20-\\ufe2f",scj="\\u20d0-\\u20ff",lcj=ocj+icj+scj,ccj="\\ufe0e\\ufe0f",dcj="["+qBA+"]",lL="["+lcj+"]",cL="\\ud83c[\\udffb-\\udfff]",kcj="(?:"+lL+"|"+cL+")",xBA="[^"+qBA+"]",vBA="(?:\\ud83c[\\udde6-\\uddff]){2}",GBA="[\\ud800-\\udbff][\\udc00-\\udfff]",ucj="\\u200d",fBA=kcj+"?",FBA="["+ccj+"]?",Ecj="(?:"+ucj+"(?:"+[xBA,vBA,GBA].join("|")+")"+FBA+fBA+")*",pcj=FBA+fBA+Ecj,mcj="(?:"+[xBA+lL+"?",lL,vBA,GBA,dcj].join("|")+")",Bcj=RegExp(cL+"(?="+cL+")|"+mcj+pcj,"g");function gcj(A){return A.match(Bcj)||[]}var bBA=gcj;function hcj(A){return _G(A)?bBA(A):hBA(A)}var FB=hcj;function qcj(A,j,e,t){var r=-1,a=A==null?0:A.length;for(t&&a&&(e=A[++r]);++r<a;)e=j(e,A[r],r,A);return e}var GR=qcj;function xcj(A){return function(j){return A?.[j]}}var fR=xcj;var vcj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Gcj=fR(vcj),yBA=Gcj;var fcj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fcj="\\u0300-\\u036f",bcj="\\ufe20-\\ufe2f",ycj="\\u20d0-\\u20ff",$cj=Fcj+bcj+ycj,wcj="["+$cj+"]",Icj=RegExp(wcj,"g");function Pcj(A){return A=on(A),A&&A.replace(fcj,yBA).replace(Icj,"")}var $BA=Pcj;var Ocj=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Rcj(A){return A.match(Ocj)||[]}var wBA=Rcj;var Dcj=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Tcj(A){return Dcj.test(A)}var IBA=Tcj;var TBA="\\ud800-\\udfff",Ccj="\\u0300-\\u036f",_cj="\\ufe20-\\ufe2f",Scj="\\u20d0-\\u20ff",Hcj=Ccj+_cj+Scj,CBA="\\u2700-\\u27bf",_BA="a-z\\xdf-\\xf6\\xf8-\\xff",Mcj="\\xac\\xb1\\xd7\\xf7",Kcj="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ncj="\\u2000-\\u206f",Lcj=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",SBA="A-Z\\xc0-\\xd6\\xd8-\\xde",zcj="\\ufe0e\\ufe0f",HBA=Mcj+Kcj+Ncj+Lcj,MBA="['\u2019]",PBA="["+HBA+"]",Ucj="["+Hcj+"]",KBA="\\d+",Vcj="["+CBA+"]",NBA="["+_BA+"]",LBA="[^"+TBA+HBA+KBA+CBA+_BA+SBA+"]",Xcj="\\ud83c[\\udffb-\\udfff]",Jcj="(?:"+Ucj+"|"+Xcj+")",Wcj="[^"+TBA+"]",zBA="(?:\\ud83c[\\udde6-\\uddff]){2}",UBA="[\\ud800-\\udbff][\\udc00-\\udfff]",SG="["+SBA+"]",Qcj="\\u200d",OBA="(?:"+NBA+"|"+LBA+")",Ycj="(?:"+SG+"|"+LBA+")",RBA="(?:"+MBA+"(?:d|ll|m|re|s|t|ve))?",DBA="(?:"+MBA+"(?:D|LL|M|RE|S|T|VE))?",VBA=Jcj+"?",XBA="["+zcj+"]?",Zcj="(?:"+Qcj+"(?:"+[Wcj,zBA,UBA].join("|")+")"+XBA+VBA+")*",Adj="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",jdj="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",edj=XBA+VBA+Zcj,tdj="(?:"+[Vcj,zBA,UBA].join("|")+")"+edj,rdj=RegExp([SG+"?"+NBA+"+"+RBA+"(?="+[PBA,SG,"$"].join("|")+")",Ycj+"+"+DBA+"(?="+[PBA,SG+OBA,"$"].join("|")+")",SG+"?"+OBA+"+"+RBA,SG+"+"+DBA,jdj,Adj,KBA,tdj].join("|"),"g");function adj(A){return A.match(rdj)||[]}var JBA=adj;function ndj(A,j,e){return A=on(A),j=e?void 0:j,j===void 0?IBA(A)?JBA(A):wBA(A):A.match(j)||[]}var WBA=ndj;var odj="['\u2019]",idj=RegExp(odj,"g");function sdj(A){return function(j){return GR(WBA($BA(j).replace(idj,"")),A,"")}}var QBA=sdj;var ldj=ua.isFinite,cdj=Math.min;function ddj(A){var j=Math[A];return function(e,t){if(e=ak(e),t=t==null?0:cdj(hi(t),292),t&&ldj(e)){var r=(on(e)+"e").split("e"),a=j(r[0]+"e"+(+r[1]+t));return r=(on(a)+"e").split("e"),+(r[0]+"e"+(+r[1]-t))}return j(e)}}var YBA=ddj;var kdj=Math.ceil,udj=Math.max;function Edj(A,j,e){(e?ac(A,j,e):j===void 0)?j=1:j=udj(hi(j),0);var t=A==null?0:A.length;if(!t||j<1)return[];for(var r=0,a=0,n=Array(kdj(t/j));r<t;)n[a++]=TG(A,r,r+=j);return n}var Jo=Edj;function pdj(A,j,e){return A===A&&(e!==void 0&&(A=A<=e?A:e),j!==void 0&&(A=A>=j?A:j)),A}var HG=pdj;function mdj(A,j,e){return e===void 0&&(e=j,j=void 0),e!==void 0&&(e=ak(e),e=e===e?e:0),j!==void 0&&(j=ak(j),j=j===j?j:0),HG(ak(A),j,e)}var dL=mdj;function Bdj(){this.__data__=new xB,this.size=0}var ZBA=Bdj;function gdj(A){var j=this.__data__,e=j.delete(A);return this.size=j.size,e}var AgA=gdj;function hdj(A){return this.__data__.get(A)}var jgA=hdj;function qdj(A){return this.__data__.has(A)}var egA=qdj;var xdj=200;function vdj(A,j){var e=this.__data__;if(e instanceof xB){var t=e.__data__;if(!vB||t.length<xdj-1)return t.push([A,j]),this.size=++e.size,this;e=this.__data__=new Lh(t)}return e.set(A,j),this.size=e.size,this}var tgA=vdj;function MG(A){var j=this.__data__=new xB(A);this.size=j.size}MG.prototype.clear=ZBA;MG.prototype.delete=AgA;MG.prototype.get=jgA;MG.prototype.has=egA;MG.prototype.set=tgA;var T7=MG;function Gdj(A,j){return A&&js(j,Va(j),A)}var rgA=Gdj;function fdj(A,j){return A&&js(j,Wc(j),A)}var agA=fdj;var sgA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ngA=sgA&&typeof module=="object"&&module&&!module.nodeType&&module,Fdj=ngA&&ngA.exports===sgA,ogA=Fdj?ua.Buffer:void 0,igA=ogA?ogA.allocUnsafe:void 0;function bdj(A,j){if(j)return A.slice();var e=A.length,t=igA?igA(e):new A.constructor(e);return A.copy(t),t}var FR=bdj;function ydj(A,j){for(var e=-1,t=A==null?0:A.length,r=0,a=[];++e<t;){var n=A[e];j(n,e,A)&&(a[r++]=n)}return a}var KG=ydj;function $dj(){return[]}var bR=$dj;var wdj=Object.prototype,Idj=wdj.propertyIsEnumerable,lgA=Object.getOwnPropertySymbols,Pdj=lgA?function(A){return A==null?[]:(A=Object(A),KG(lgA(A),function(j){return Idj.call(A,j)}))}:bR,NG=Pdj;function Odj(A,j){return js(A,NG(A),j)}var cgA=Odj;var Rdj=Object.getOwnPropertySymbols,Ddj=Rdj?function(A){for(var j=[];A;)RG(j,NG(A)),A=DG(A);return j}:bR,yR=Ddj;function Tdj(A,j){return js(A,yR(A),j)}var dgA=Tdj;function Cdj(A,j,e){var t=j(A);return tr(A)?t:RG(t,e(A))}var $R=Cdj;function _dj(A){return $R(A,Va,NG)}var by=_dj;function Sdj(A){return $R(A,Wc,yR)}var LG=Sdj;var Hdj=sl(ua,"DataView"),wR=Hdj;var Mdj=sl(ua,"Promise"),IR=Mdj;var Kdj=sl(ua,"Set"),bB=Kdj;var kgA="[object Map]",Ndj="[object Object]",ugA="[object Promise]",EgA="[object Set]",pgA="[object WeakMap]",mgA="[object DataView]",Ldj=np(wR),zdj=np(vB),Udj=np(IR),Vdj=np(bB),Xdj=np(Kh),zh=fo;(wR&&zh(new wR(new ArrayBuffer(1)))!=mgA||vB&&zh(new vB)!=kgA||IR&&zh(IR.resolve())!=ugA||bB&&zh(new bB)!=EgA||Kh&&zh(new Kh)!=pgA)&&(zh=function(A){var j=fo(A),e=j==Ndj?A.constructor:void 0,t=e?np(e):"";if(t)switch(t){case Ldj:return mgA;case zdj:return kgA;case Udj:return ugA;case Vdj:return EgA;case Xdj:return pgA}return j});var nc=zh;var Jdj=Object.prototype,Wdj=Jdj.hasOwnProperty;function Qdj(A){var j=A.length,e=new A.constructor(j);return j&&typeof A[0]=="string"&&Wdj.call(A,"index")&&(e.index=A.index,e.input=A.input),e}var BgA=Qdj;var Ydj=ua.Uint8Array,zG=Ydj;function Zdj(A){var j=new A.constructor(A.byteLength);return new zG(j).set(new zG(A)),j}var UG=Zdj;function Akj(A,j){var e=j?UG(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.byteLength)}var ggA=Akj;var jkj=/\w*$/;function ekj(A){var j=new A.constructor(A.source,jkj.exec(A));return j.lastIndex=A.lastIndex,j}var hgA=ekj;var qgA=Vo?Vo.prototype:void 0,xgA=qgA?qgA.valueOf:void 0;function tkj(A){return xgA?Object(xgA.call(A)):{}}var vgA=tkj;function rkj(A,j){var e=j?UG(A.buffer):A.buffer;return new A.constructor(e,A.byteOffset,A.length)}var PR=rkj;var akj="[object Boolean]",nkj="[object Date]",okj="[object Map]",ikj="[object Number]",skj="[object RegExp]",lkj="[object Set]",ckj="[object String]",dkj="[object Symbol]",kkj="[object ArrayBuffer]",ukj="[object DataView]",Ekj="[object Float32Array]",pkj="[object Float64Array]",mkj="[object Int8Array]",Bkj="[object Int16Array]",gkj="[object Int32Array]",hkj="[object Uint8Array]",qkj="[object Uint8ClampedArray]",xkj="[object Uint16Array]",vkj="[object Uint32Array]";function Gkj(A,j,e){var t=A.constructor;switch(j){case kkj:return UG(A);case akj:case nkj:return new t(+A);case ukj:return ggA(A,e);case Ekj:case pkj:case mkj:case Bkj:case gkj:case hkj:case qkj:case xkj:case vkj:return PR(A,e);case okj:return new t;case ikj:case ckj:return new t(A);case skj:return hgA(A);case lkj:return new t;case dkj:return vgA(A)}}var GgA=Gkj;function fkj(A){return typeof A.constructor=="function"&&!R7(A)?EB(DG(A)):{}}var OR=fkj;var Fkj="[object Map]";function bkj(A){return i6(A)&&nc(A)==Fkj}var fgA=bkj;var FgA=ys&&ys.isMap,ykj=FgA?Jc(FgA):fgA,bgA=ykj;var $kj="[object Set]";function wkj(A){return i6(A)&&nc(A)==$kj}var ygA=wkj;var $gA=ys&&ys.isSet,Ikj=$gA?Jc($gA):ygA,wgA=Ikj;var Pkj=1,Okj=2,Rkj=4,IgA="[object Arguments]",Dkj="[object Array]",Tkj="[object Boolean]",Ckj="[object Date]",_kj="[object Error]",PgA="[object Function]",Skj="[object GeneratorFunction]",Hkj="[object Map]",Mkj="[object Number]",OgA="[object Object]",Kkj="[object RegExp]",Nkj="[object Set]",Lkj="[object String]",zkj="[object Symbol]",Ukj="[object WeakMap]",Vkj="[object ArrayBuffer]",Xkj="[object DataView]",Jkj="[object Float32Array]",Wkj="[object Float64Array]",Qkj="[object Int8Array]",Ykj="[object Int16Array]",Zkj="[object Int32Array]",A7j="[object Uint8Array]",j7j="[object Uint8ClampedArray]",e7j="[object Uint16Array]",t7j="[object Uint32Array]",g6={};g6[IgA]=g6[Dkj]=g6[Vkj]=g6[Xkj]=g6[Tkj]=g6[Ckj]=g6[Jkj]=g6[Wkj]=g6[Qkj]=g6[Ykj]=g6[Zkj]=g6[Hkj]=g6[Mkj]=g6[OgA]=g6[Kkj]=g6[Nkj]=g6[Lkj]=g6[zkj]=g6[A7j]=g6[j7j]=g6[e7j]=g6[t7j]=!0;g6[_kj]=g6[PgA]=g6[Ukj]=!1;function RR(A,j,e,t,r,a){var n,o=j&Pkj,i=j&Okj,s=j&Rkj;if(e&&(n=r?e(A,t,r,a):e(A)),n!==void 0)return n;if(!fa(A))return A;var l=tr(A);if(l){if(n=BgA(A),!o)return mB(A,n)}else{var c=nc(A),k=c==PgA||c==Skj;if(ok(A))return FR(A,o);if(c==OgA||c==IgA||k&&!r){if(n=i||k?{}:OR(A),!o)return i?dgA(A,agA(n,A)):cgA(A,rgA(n,A))}else{if(!g6[c])return r?A:{};n=GgA(A,c,o)}}a||(a=new T7);var u=a.get(A);if(u)return u;a.set(A,n),wgA(A)?A.forEach(function(S){n.add(RR(S,j,e,S,A,a))}):bgA(A)&&A.forEach(function(S,G){n.set(G,RR(S,j,e,G,A,a))});var m=s?i?LG:by:i?Wc:Va,F=l?void 0:m(A);return dR(F||A,function(S,G){F&&(G=S,S=A[G]),gB(n,G,RR(S,j,e,G,A,a))}),n}var VG=RR;var r7j=4;function a7j(A){return VG(A,r7j)}var oc=a7j;var n7j=1,o7j=4;function i7j(A){return VG(A,n7j|o7j)}var yy=i7j;function s7j(A){for(var j=-1,e=A==null?0:A.length,t=0,r=[];++j<e;){var a=A[j];a&&(r[t++]=a)}return r}var Yr=s7j;var l7j="__lodash_hash_undefined__";function c7j(A){return this.__data__.set(A,l7j),this}var RgA=c7j;function d7j(A){return this.__data__.has(A)}var DgA=d7j;function DR(A){var j=-1,e=A==null?0:A.length;for(this.__data__=new Lh;++j<e;)this.add(A[j])}DR.prototype.add=DR.prototype.push=RgA;DR.prototype.has=DgA;var TR=DR;function k7j(A,j){for(var e=-1,t=A==null?0:A.length;++e<t;)if(j(A[e],e,A))return!0;return!1}var CR=k7j;function u7j(A,j){return A.has(j)}var _R=u7j;var E7j=1,p7j=2;function m7j(A,j,e,t,r,a){var n=e&E7j,o=A.length,i=j.length;if(o!=i&&!(n&&i>o))return!1;var s=a.get(A),l=a.get(j);if(s&&l)return s==j&&l==A;var c=-1,k=!0,u=e&p7j?new TR:void 0;for(a.set(A,j),a.set(j,A);++c<o;){var m=A[c],F=j[c];if(t)var S=n?t(F,m,c,j,A,a):t(m,F,c,A,j,a);if(S!==void 0){if(S)continue;k=!1;break}if(u){if(!CR(j,function(G,x){if(!_R(u,x)&&(m===G||r(m,G,e,t,a)))return u.push(x)})){k=!1;break}}else if(!(m===F||r(m,F,e,t,a))){k=!1;break}}return a.delete(A),a.delete(j),k}var SR=m7j;function B7j(A){var j=-1,e=Array(A.size);return A.forEach(function(t,r){e[++j]=[r,t]}),e}var TgA=B7j;function g7j(A){var j=-1,e=Array(A.size);return A.forEach(function(t){e[++j]=t}),e}var XG=g7j;var h7j=1,q7j=2,x7j="[object Boolean]",v7j="[object Date]",G7j="[object Error]",f7j="[object Map]",F7j="[object Number]",b7j="[object RegExp]",y7j="[object Set]",$7j="[object String]",w7j="[object Symbol]",I7j="[object ArrayBuffer]",P7j="[object DataView]",CgA=Vo?Vo.prototype:void 0,kL=CgA?CgA.valueOf:void 0;function O7j(A,j,e,t,r,a,n){switch(e){case P7j:if(A.byteLength!=j.byteLength||A.byteOffset!=j.byteOffset)return!1;A=A.buffer,j=j.buffer;case I7j:return!(A.byteLength!=j.byteLength||!a(new zG(A),new zG(j)));case x7j:case v7j:case F7j:return Xc(+A,+j);case G7j:return A.name==j.name&&A.message==j.message;case b7j:case $7j:return A==j+"";case f7j:var o=TgA;case y7j:var i=t&h7j;if(o||(o=XG),A.size!=j.size&&!i)return!1;var s=n.get(A);if(s)return s==j;t|=q7j,n.set(A,j);var l=SR(o(A),o(j),t,r,a,n);return n.delete(A),l;case w7j:if(kL)return kL.call(A)==kL.call(j)}return!1}var _gA=O7j;var R7j=1,D7j=Object.prototype,T7j=D7j.hasOwnProperty;function C7j(A,j,e,t,r,a){var n=e&R7j,o=by(A),i=o.length,s=by(j),l=s.length;if(i!=l&&!n)return!1;for(var c=i;c--;){var k=o[c];if(!(n?k in j:T7j.call(j,k)))return!1}var u=a.get(A),m=a.get(j);if(u&&m)return u==j&&m==A;var F=!0;a.set(A,j),a.set(j,A);for(var S=n;++c<i;){k=o[c];var G=A[k],x=j[k];if(t)var R=n?t(x,G,k,j,A,a):t(G,x,k,A,j,a);if(!(R===void 0?G===x||r(G,x,e,t,a):R)){F=!1;break}S||(S=k=="constructor")}if(F&&!S){var P=A.constructor,D=j.constructor;P!=D&&"constructor"in A&&"constructor"in j&&!(typeof P=="function"&&P instanceof P&&typeof D=="function"&&D instanceof D)&&(F=!1)}return a.delete(A),a.delete(j),F}var SgA=C7j;var _7j=1,HgA="[object Arguments]",MgA="[object Array]",HR="[object Object]",S7j=Object.prototype,KgA=S7j.hasOwnProperty;function H7j(A,j,e,t,r,a){var n=tr(A),o=tr(j),i=n?MgA:nc(A),s=o?MgA:nc(j);i=i==HgA?HR:i,s=s==HgA?HR:s;var l=i==HR,c=s==HR,k=i==s;if(k&&ok(A)){if(!ok(j))return!1;n=!0,l=!1}if(k&&!l)return a||(a=new T7),n||hB(A)?SR(A,j,e,t,r,a):_gA(A,j,i,e,t,r,a);if(!(e&_7j)){var u=l&&KgA.call(A,"__wrapped__"),m=c&&KgA.call(j,"__wrapped__");if(u||m){var F=u?A.value():A,S=m?j.value():j;return a||(a=new T7),r(F,S,e,t,a)}}return k?(a||(a=new T7),SgA(A,j,e,t,r,a)):!1}var NgA=H7j;function LgA(A,j,e,t,r){return A===j?!0:A==null||j==null||!i6(A)&&!i6(j)?A!==A&&j!==j:NgA(A,j,e,t,LgA,r)}var MR=LgA;var M7j=1,K7j=2;function N7j(A,j,e,t){var r=e.length,a=r,n=!t;if(A==null)return!a;for(A=Object(A);r--;){var o=e[r];if(n&&o[2]?o[1]!==A[o[0]]:!(o[0]in A))return!1}for(;++r<a;){o=e[r];var i=o[0],s=A[i],l=o[1];if(n&&o[2]){if(s===void 0&&!(i in A))return!1}else{var c=new T7;if(t)var k=t(s,l,i,A,j,c);if(!(k===void 0?MR(l,s,M7j|K7j,t,c):k))return!1}}return!0}var zgA=N7j;function L7j(A){return A===A&&!fa(A)}var KR=L7j;function z7j(A){for(var j=Va(A),e=j.length;e--;){var t=j[e],r=A[t];j[e]=[t,r,KR(r)]}return j}var UgA=z7j;function U7j(A,j){return function(e){return e==null?!1:e[A]===j&&(j!==void 0||A in Object(e))}}var NR=U7j;function V7j(A){var j=UgA(A);return j.length==1&&j[0][2]?NR(j[0][0],j[0][1]):function(e){return e===A||zgA(e,A,j)}}var VgA=V7j;function X7j(A,j){return A!=null&&j in Object(A)}var XgA=X7j;function J7j(A,j,e){j=Qc(j,A);for(var t=-1,r=j.length,a=!1;++t<r;){var n=Yc(j[t]);if(!(a=A!=null&&e(A,n)))break;A=A[n]}return a||++t!=r?a:(r=A==null?0:A.length,!!r&&FG(r)&&P7(n,r)&&(tr(A)||nk(A)))}var JgA=J7j;function W7j(A,j){return A!=null&&JgA(A,j,XgA)}var LR=W7j;var Q7j=1,Y7j=2;function Z7j(A,j){return wG(A)&&KR(j)?NR(Yc(A),j):function(e){var t=Fy(e,A);return t===void 0&&t===j?LR(e,A):MR(j,t,Q7j|Y7j)}}var WgA=Z7j;function Auj(A){return function(j){return j?.[A]}}var JG=Auj;function juj(A){return function(j){return D7(j,A)}}var QgA=juj;function euj(A){return wG(A)?JG(Yc(A)):QgA(A)}var YgA=euj;function tuj(A){return typeof A=="function"?A:A==null?bs:typeof A=="object"?tr(A)?WgA(A[0],A[1]):VgA(A):YgA(A)}var h6=tuj;function ruj(A,j,e,t){for(var r=-1,a=A==null?0:A.length;++r<a;){var n=A[r];j(t,n,e(n),A)}return t}var ZgA=ruj;function auj(A){return function(j,e,t){for(var r=-1,a=Object(j),n=t(j),o=n.length;o--;){var i=n[A?o:++r];if(e(a[i],i,a)===!1)break}return j}}var zR=auj;var nuj=zR(),UR=nuj;function ouj(A,j){return A&&UR(A,j,Va)}var yB=ouj;function iuj(A,j){return function(e,t){if(e==null)return e;if(!bn(e))return A(e,t);for(var r=e.length,a=j?r:-1,n=Object(e);(j?a--:++a<r)&&t(n[a],a,n)!==!1;);return e}}var VR=iuj;var suj=VR(yB),C7=suj;function luj(A,j,e,t){return C7(A,function(r,a,n){j(t,r,e(r),n)}),t}var AhA=luj;function cuj(A,j){return function(e,t){var r=tr(e)?ZgA:AhA,a=j?j():{};return r(e,A,h6(t,2),a)}}var $B=cuj;var duj=Object.prototype,kuj=duj.hasOwnProperty,uuj=$B(function(A,j,e){kuj.call(A,e)?++A[e]:As(A,e,1)}),uL=uuj;var Euj=8;function EL(A,j,e){j=e?void 0:j;var t=_mA(A,Euj,void 0,void 0,void 0,void 0,void 0,j);return t.placeholder=EL.placeholder,t}EL.placeholder={};var pL=EL;var puj=function(){return ua.Date.now()},XR=puj;var muj="Expected a function",Buj=Math.max,guj=Math.min;function huj(A,j,e){var t,r,a,n,o,i,s=0,l=!1,c=!1,k=!0;if(typeof A!="function")throw new TypeError(muj);j=ak(j)||0,fa(e)&&(l=!!e.leading,c="maxWait"in e,a=c?Buj(ak(e.maxWait)||0,j):a,k="trailing"in e?!!e.trailing:k);function u(y){var h=t,O=r;return t=r=void 0,s=y,n=A.apply(O,h),n}function m(y){return s=y,o=setTimeout(G,j),l?u(y):n}function F(y){var h=y-i,O=y-s,Q=j-h;return c?guj(Q,a-O):Q}function S(y){var h=y-i,O=y-s;return i===void 0||h>=j||h<0||c&&O>=a}function G(){var y=XR();if(S(y))return x(y);o=setTimeout(G,F(y))}function x(y){return o=void 0,k&&t?u(y):(t=r=void 0,n)}function R(){o!==void 0&&clearTimeout(o),s=0,t=i=r=o=void 0}function P(){return o===void 0?n:x(XR())}function D(){var y=XR(),h=S(y);if(t=arguments,r=this,i=y,h){if(o===void 0)return m(i);if(c)return clearTimeout(o),o=setTimeout(G,j),u(i)}return o===void 0&&(o=setTimeout(G,j)),n}return D.cancel=R,D.flush=P,D}var jhA=huj;var ehA=Object.prototype,quj=ehA.hasOwnProperty,xuj=O7(function(A,j){A=Object(A);var e=-1,t=j.length,r=t>2?j[2]:void 0;for(r&&ac(j[0],j[1],r)&&(t=1);++e<t;)for(var a=j[e],n=Wc(a),o=-1,i=n.length;++o<i;){var s=n[o],l=A[s];(l===void 0||Xc(l,ehA[s])&&!quj.call(A,s))&&(A[s]=a[s])}return A}),$y=xuj;function vuj(A,j,e){(e!==void 0&&!Xc(A[j],e)||e===void 0&&!(j in A))&&As(A,j,e)}var wy=vuj;function Guj(A){return i6(A)&&bn(A)}var WG=Guj;function fuj(A,j){if(!(j==="constructor"&&typeof A[j]=="function")&&j!="__proto__")return A[j]}var Iy=fuj;function Fuj(A){return js(A,Wc(A))}var thA=Fuj;function buj(A,j,e,t,r,a,n){var o=Iy(A,e),i=Iy(j,e),s=n.get(i);if(s){wy(A,e,s);return}var l=a?a(o,i,e+"",A,j,n):void 0,c=l===void 0;if(c){var k=tr(i),u=!k&&ok(i),m=!k&&!u&&hB(i);l=i,k||u||m?tr(o)?l=o:WG(o)?l=mB(o):u?(c=!1,l=FR(i,!0)):m?(c=!1,l=PR(i,!0)):l=[]:vR(i)||nk(i)?(l=o,nk(o)?l=thA(o):(!fa(o)||hG(o))&&(l=OR(i))):c=!1}c&&(n.set(i,l),r(l,i,t,a,n),n.delete(i)),wy(A,e,l)}var rhA=buj;function ahA(A,j,e,t,r){A!==j&&UR(j,function(a,n){if(r||(r=new T7),fa(a))rhA(A,j,n,e,ahA,t,r);else{var o=t?t(Iy(A,n),a,n+"",A,j,r):void 0;o===void 0&&(o=a),wy(A,n,o)}},Wc)}var nhA=ahA;function yuj(A,j,e){for(var t=-1,r=A==null?0:A.length;++t<r;)if(e(j,A[t]))return!0;return!1}var ohA=yuj;function $uj(A){var j=A==null?0:A.length;return j?A[j-1]:void 0}var wB=$uj;function wuj(A){return typeof A=="function"?A:bs}var ihA=wuj;var Iuj=zR(!0),shA=Iuj;function Puj(A,j){return A&&shA(A,j,Va)}var lhA=Puj;var Ouj=VR(lhA,!0),chA=Ouj;function Ruj(A,j,e){A=on(A),j=Vc(j);var t=A.length;e=e===void 0?t:HG(hi(e),0,t);var r=e;return e-=j.length,e>=0&&A.slice(e,r)==j}var JR=Ruj;var dhA=/[\\^$.*+?()[\]{}|]/g,Duj=RegExp(dhA.source);function Tuj(A){return A=on(A),A&&Duj.test(A)?A.replace(dhA,"\\$&"):A}var mL=Tuj;function Cuj(A,j){var e=[];return C7(A,function(t,r,a){j(t,r,a)&&e.push(t)}),e}var khA=Cuj;function _uj(A,j){var e=tr(A)?KG:khA;return e(A,h6(j,3))}var _7=_uj;function Suj(A){return function(j,e,t){var r=Object(j);if(!bn(j)){var a=h6(e,3);j=Va(j),e=function(o){return a(r[o],o,r)}}var n=A(j,e,t);return n>-1?r[a?j[n]:n]:void 0}}var uhA=Suj;var Huj=Math.max;function Muj(A,j,e){var t=A==null?0:A.length;if(!t)return-1;var r=e==null?0:hi(e);return r<0&&(r=Huj(t+r,0)),kR(A,h6(j,3),r)}var Py=Muj;var Kuj=uhA(Py),sn=Kuj;function Nuj(A,j,e){var t;return e(A,function(r,a,n){if(j(r,a,n))return t=a,!1}),t}var EhA=Nuj;function Luj(A,j){return EhA(A,h6(j,3),yB)}var BL=Luj;function zuj(A){return A&&A.length?A[0]:void 0}var WR=zuj;function Uuj(A,j){var e=-1,t=bn(A)?Array(A.length):[];return C7(A,function(r,a,n){t[++e]=j(r,a,n)}),t}var QR=Uuj;function Vuj(A,j){var e=tr(A)?Xo:QR;return e(A,h6(j,3))}var yn=Vuj;function Xuj(A,j){return fB(yn(A,j),1)}var Zc=Xuj;var Juj=Object.prototype,Wuj=Juj.hasOwnProperty,Quj=$B(function(A,j,e){Wuj.call(A,e)?A[e].push(j):As(A,e,[j])}),sp=Quj;var Yuj="[object String]";function Zuj(A){return typeof A=="string"||!tr(A)&&i6(A)&&fo(A)==Yuj}var YR=Zuj;function AEj(A,j){return Xo(j,function(e){return A[e]})}var phA=AEj;function jEj(A){return A==null?[]:phA(A,Va(A))}var q6=jEj;var eEj=Math.max;function tEj(A,j,e,t){A=bn(A)?A:q6(A),e=e&&!t?hi(e):0;var r=A.length;return e<0&&(e=eEj(r+e,0)),YR(A)?e<=r&&A.indexOf(j,e)>-1:!!r&&BB(A,j,e)>-1}var Fr=tEj;function rEj(A,j){return j.length<2?A:D7(A,TG(j,0,-1))}var mhA=rEj;var aEj="[object Date]";function nEj(A){return i6(A)&&fo(A)==aEj}var BhA=nEj;var ghA=ys&&ys.isDate,oEj=ghA?Jc(ghA):BhA,Oy=oEj;var iEj="[object Map]",sEj="[object Set]",lEj=Object.prototype,cEj=lEj.hasOwnProperty;function dEj(A){if(A==null)return!0;if(bn(A)&&(tr(A)||typeof A=="string"||typeof A.splice=="function"||ok(A)||hB(A)||nk(A)))return!A.length;var j=nc(A);if(j==iEj||j==sEj)return!A.size;if(R7(A))return!$G(A).length;for(var e in A)if(cEj.call(A,e))return!1;return!0}var Ry=dEj;function kEj(A){return A==null}var gL=kEj;var uEj="[object RegExp]";function EEj(A){return i6(A)&&fo(A)==uEj}var hhA=EEj;var qhA=ys&&ys.isRegExp,pEj=qhA?Jc(qhA):hhA,xhA=pEj;var mEj=QBA(function(A,j,e){return A+(e?"-":"")+j.toLowerCase()}),ZR=mEj;var BEj=$B(function(A,j,e){As(A,e,j)}),Ca=BEj;function gEj(A,j){var e={};return j=h6(j,3),yB(A,function(t,r,a){As(e,j(t,r,a),t)}),e}var AD=gEj;function hEj(A,j){var e={};return j=h6(j,3),yB(A,function(t,r,a){As(e,r,j(t,r,a))}),e}var ic=hEj;var qEj=bG(function(A,j,e){nhA(A,j,e)}),sk=qEj;function xEj(A,j){return j=Qc(j,A),A=mhA(A,j),A==null||delete A[Yc(wB(j))]}var vhA=xEj;function vEj(A){return vR(A)?void 0:A}var GhA=vEj;var GEj=1,fEj=2,FEj=4,bEj=xR(function(A,j){var e={};if(A==null)return e;var t=!1;j=Xo(j,function(a){return a=Qc(a,A),t||(t=a.length>1),a}),js(A,LG(A),e),t&&(e=VG(e,GEj|fEj|FEj,GhA));for(var r=j.length;r--;)vhA(e,j[r]);return e}),qi=bEj;function yEj(A,j,e,t){if(!fa(A))return A;j=Qc(j,A);for(var r=-1,a=j.length,n=a-1,o=A;o!=null&&++r<a;){var i=Yc(j[r]),s=e;if(i==="__proto__"||i==="constructor"||i==="prototype")return A;if(r!=n){var l=o[i];s=t?t(l,i,o):void 0,s===void 0&&(s=fa(l)?l:P7(j[r+1])?[]:{})}gB(o,i,s),o=o[i]}return A}var fhA=yEj;function $Ej(A,j,e){for(var t=-1,r=j.length,a={};++t<r;){var n=j[t],o=D7(A,n);e(o,n)&&fhA(a,Qc(n,A),o)}return a}var jD=$Ej;function wEj(A,j){if(A==null)return{};var e=Xo(LG(A),function(t){return[t]});return j=h6(j),jD(A,e,function(t,r){return j(t,r[0])})}var Dy=wEj;function IEj(A,j){var e=A.length;for(A.sort(j);e--;)A[e]=A[e].value;return A}var FhA=IEj;function PEj(A,j){if(A!==j){var e=A!==void 0,t=A===null,r=A===A,a=rk(A),n=j!==void 0,o=j===null,i=j===j,s=rk(j);if(!o&&!s&&!a&&A>j||a&&n&&i&&!o&&!s||t&&n&&i||!e&&i||!r)return 1;if(!t&&!a&&!s&&A<j||s&&e&&r&&!t&&!a||o&&e&&r||!n&&r||!i)return-1}return 0}var bhA=PEj;function OEj(A,j,e){for(var t=-1,r=A.criteria,a=j.criteria,n=r.length,o=e.length;++t<n;){var i=bhA(r[t],a[t]);if(i){if(t>=o)return i;var s=e[t];return i*(s=="desc"?-1:1)}}return A.index-j.index}var yhA=OEj;function REj(A,j,e){j.length?j=Xo(j,function(a){return tr(a)?function(n){return D7(n,a.length===1?a[0]:a)}:a}):j=[bs];var t=-1;j=Xo(j,Jc(h6));var r=QR(A,function(a,n,o){var i=Xo(j,function(s){return s(a)});return{criteria:i,index:++t,value:a}});return FhA(r,function(a,n){return yhA(a,n,e)})}var $hA=REj;var DEj=JG("length"),whA=DEj;var PhA="\\ud800-\\udfff",TEj="\\u0300-\\u036f",CEj="\\ufe20-\\ufe2f",_Ej="\\u20d0-\\u20ff",SEj=TEj+CEj+_Ej,HEj="\\ufe0e\\ufe0f",MEj="["+PhA+"]",hL="["+SEj+"]",qL="\\ud83c[\\udffb-\\udfff]",KEj="(?:"+hL+"|"+qL+")",OhA="[^"+PhA+"]",RhA="(?:\\ud83c[\\udde6-\\uddff]){2}",DhA="[\\ud800-\\udbff][\\udc00-\\udfff]",NEj="\\u200d",ThA=KEj+"?",ChA="["+HEj+"]?",LEj="(?:"+NEj+"(?:"+[OhA,RhA,DhA].join("|")+")"+ChA+ThA+")*",zEj=ChA+ThA+LEj,UEj="(?:"+[OhA+hL+"?",hL,RhA,DhA,MEj].join("|")+")",IhA=RegExp(qL+"(?="+qL+")|"+UEj+zEj,"g");function VEj(A){for(var j=IhA.lastIndex=0;IhA.test(A);)++j;return j}var _hA=VEj;function XEj(A){return _G(A)?_hA(A):whA(A)}var ShA=XEj;var JEj=$B(function(A,j,e){A[e?0:1].push(j)},function(){return[[],[]]}),Ty=JEj;function WEj(A,j){return jD(A,j,function(e,t){return LR(A,t)})}var HhA=WEj;var QEj=xR(function(A,j){return A==null?{}:HhA(A,j)}),eD=QEj;function YEj(A,j,e,t,r){return r(A,function(a,n,o){e=t?(t=!1,a):j(e,a,n,o)}),e}var tD=YEj;function ZEj(A,j,e){var t=tr(A)?GR:tD,r=arguments.length<3;return t(A,h6(j,4),e,r,C7)}var xi=ZEj;function Apj(A,j,e,t){var r=A==null?0:A.length;for(t&&r&&(e=A[--r]);r--;)e=j(e,A[r],r,A);return e}var MhA=Apj;function jpj(A,j,e){var t=tr(A)?MhA:tD,r=arguments.length<3;return t(A,h6(j,4),e,r,chA)}var xL=jpj;var epj=YBA("round"),rD=epj;var tpj="[object Map]",rpj="[object Set]";function apj(A){if(A==null)return 0;if(bn(A))return YR(A)?ShA(A):A.length;var j=nc(A);return j==tpj||j==rpj?A.size:$G(A).length}var Ad=apj;function npj(A,j){var e;return C7(A,function(t,r,a){return e=j(t,r,a),!e}),!!e}var KhA=npj;function opj(A,j,e){var t=tr(A)?CR:KhA;return e&&ac(A,j,e)&&(j=void 0),t(A,h6(j,3))}var Cy=opj;var ipj=O7(function(A,j){if(A==null)return[];var e=j.length;return e>1&&ac(A,j[0],j[1])?j=[]:e>2&&ac(j[0],j[1],j[2])&&(j=[j[0]]),$hA(A,fB(j,1),[])}),aD=ipj;var spj=4294967295;function lpj(A,j,e){return e&&typeof e!="number"&&ac(A,j,e)&&(j=e=void 0),e=e===void 0?spj:e>>>0,e?(A=on(A),A&&(typeof j=="string"||j!=null&&!xhA(j))&&(j=Vc(j),!j&&_G(A))?CG(FB(A),0,e):A.split(j,e)):[]}var vL=lpj;function cpj(A,j,e){return A=on(A),e=e==null?0:HG(hi(e),0,A.length),j=Vc(j),A.slice(e,e+j.length)==j}var lp=cpj;var dpj="Expected a function";function kpj(A,j,e){var t=!0,r=!0;if(typeof A!="function")throw new TypeError(dpj);return fa(e)&&(t="leading"in e?!!e.leading:t,r="trailing"in e?!!e.trailing:r),jhA(A,j,{leading:t,maxWait:j,trailing:r})}var GL=kpj;var upj=9007199254740991,fL=4294967295,Epj=Math.min;function ppj(A,j){if(A=hi(A),A<1||A>upj)return[];var e=fL,t=Epj(A,fL);j=ihA(j),A-=fL;for(var r=yG(t,j);++e<A;)j(e);return r}var Uh=ppj;function mpj(A,j){for(var e=A.length;e--&&BB(j,A[e],0)>-1;);return e}var NhA=mpj;function Bpj(A,j){for(var e=-1,t=A.length;++e<t&&BB(j,A[e],0)>-1;);return e}var nD=Bpj;function gpj(A,j,e){if(A=on(A),A&&(e||j===void 0))return AR(A);if(!A||!(j=Vc(j)))return A;var t=FB(A),r=FB(j),a=nD(t,r),n=NhA(t,r)+1;return CG(t,a,n).join("")}var FL=gpj;var hpj=/^\s+/;function qpj(A,j,e){if(A=on(A),A&&(e||j===void 0))return A.replace(hpj,"");if(!A||!(j=Vc(j)))return A;var t=FB(A),r=nD(t,FB(j));return CG(t,r).join("")}var QG=qpj;var xpj={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vpj=fR(xpj),LhA=vpj;var zhA=/&(?:amp|lt|gt|quot|#39);/g,Gpj=RegExp(zhA.source);function fpj(A){return A=on(A),A&&Gpj.test(A)?A.replace(zhA,LhA):A}var UhA=fpj;var Fpj=1/0,bpj=bB&&1/XG(new bB([,-0]))[1]==Fpj?function(A){return new bB(A)}:nR,VhA=bpj;var ypj=200;function $pj(A,j,e){var t=-1,r=uR,a=A.length,n=!0,o=[],i=o;if(e)n=!1,r=ohA;else if(a>=ypj){var s=j?null:VhA(A);if(s)return XG(s);n=!1,r=_R,i=new TR}else i=j?[]:o;A:for(;++t<a;){var l=A[t],c=j?j(l):l;if(l=e||l!==0?l:0,n&&c===c){for(var k=i.length;k--;)if(i[k]===c)continue A;j&&i.push(c),o.push(l)}else r(i,c,e)||(i!==o&&i.push(c),o.push(l))}return o}var oD=$pj;var wpj=O7(function(A){return oD(fB(A,1,WG,!0))}),iD=wpj;function Ipj(A){return A&&A.length?oD(A):[]}var _y=Ipj;var Ppj=Math.max;function Opj(A){if(!(A&&A.length))return[];var j=0;return A=KG(A,function(e){if(WG(e))return j=Ppj(e.length,j),!0}),yG(j,function(e){return Xo(A,JG(e))})}var XhA=Opj;function Rpj(A,j){if(!(A&&A.length))return[];var e=XhA(A);return j==null?e:Xo(e,function(t){return pB(j,void 0,t)})}var JhA=Rpj;var Dpj=O7(function(A){var j=A.length,e=j>1?A[j-1]:void 0;return e=typeof e=="function"?(A.pop(),e):void 0,JhA(A,e)}),sD=Dpj;var Qt;(function(A){A.Brave="Brave",A.Chrome="Chrome",A.Firefox="Firefox",A.Safari="Safari",A.Edge="Microsoft Edge",A.Opera="Opera",A.IE="Internet Explorer",A.AndroidBrowser="Android Browser",A.WebKit="WebKit",A.Other="Browser"})(Qt||(Qt={}));var _a;(function(A){A.macOS="MacOSX",A.iOS="iOS",A.Windows="Windows",A.Android="Android",A.Linux="Linux",A.ChromeOS="ChromeOS",A.Other=""})(_a||(_a={}));var IB=async A=>{let j=await WhA(A);return j===void 0?lD(A):j},Tpj=new Map([["Brave",Qt.Brave],["Google Chrome",Qt.Chrome],["Microsoft Edge",Qt.Edge],["Opera",Qt.Opera],["Chromium",Qt.Chrome]]),Cpj=new Map([["Android",_a.Android],["Chrome OS",_a.ChromeOS],["Fuchsia",_a.Other],["iOS",_a.iOS],["Linux",_a.Linux],["macOS",_a.macOS],["Windows",_a.Windows],["Unknown",_a.Other]]),WhA=async A=>{if(!navigator.userAgentData?.getHighEntropyValues)return;let j;try{j=await navigator.userAgentData.getHighEntropyValues(["fullVersionList","platformVersion"])}catch{return}if(!j.fullVersionList||!j.platform||!j.platformVersion)return;let{fullVersionList:e,platform:t,platformVersion:r}=j,a={name:Qt.Other,version:"0",osName:_a.Other,osVersion:r};for(let[n,o]of Tpj){if(a.version!=="0")break;for(let i of e)if(n===i.brand){a.name=o,a.version=i.version;break}}if(a.name===Qt.Opera){let n=bL(A,/OPR\/([\d.]+)/);if(n==="")return;a.version=n}if(a.version!=="0")return a.osName=Cpj.get(t)??_a.Other,a.osName===_a.Windows&&(a.osVersion=QhA(a.osVersion)),a},QhA=A=>{let j=A.split(".");if(!j[0])return A;let e=Number.parseInt(j[0],10);if(Number.isNaN(e)||e<0)return A;if(e>0&&e<13)return"10.0";if(e>=13)return"11.0";if(!j[1])return A;switch(Number.parseInt(j[1],10)){case 1:return"7.0";case 2:return"8.0";case 3:return"8.1";default:return A}},lD=A=>{A=A.toLowerCase();let j=sn(_pj,o=>Fr(A,o.term)),e=j?j.name:Qt.Other;e===Qt.Chrome&&"brave"in navigator&&(e=Qt.Brave);let t=j?bL(A,j.versionRegex):"",r=sn(Spj,o=>Fr(A,o.term)),a=r?r.name:_a.Other,n=r?bL(A,r.versionRegex):"";return a===_a.macOS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(a=_a.iOS,n=""),{name:e,version:t,osName:a,osVersion:n}},bL=(A,j)=>{if(!j)return"";let t=j.exec(A)?.[1];return t!==void 0?t.replace(/_/g,"."):""},_pj=[{term:"msie",name:Qt.IE,versionRegex:/msie ([\d.]+)/},{term:"trident",name:Qt.IE,versionRegex:/rv:([\d.]+)/},{term:"edge",name:Qt.Edge,versionRegex:/edge\/([\d.]+)/},{term:"edg",name:Qt.Edge,versionRegex:/edg\/([\d.]+)/},{term:"opr",name:Qt.Opera,versionRegex:/opr\/([\d.]+)/},{term:"opera mobi",name:Qt.Opera,versionRegex:/version\/([\d.]+)/},{term:"opios",name:Qt.Opera,versionRegex:/opios\/([\d.]+)/},{term:"firefox",name:Qt.Firefox,versionRegex:/firefox\/([\d.]+)/},{term:"fxios",name:Qt.Firefox,versionRegex:/fxios\/([\d.]+)/},{term:"chrome",name:Qt.Chrome,versionRegex:/chrome\/([\d.]+)/},{term:"crios",name:Qt.Chrome,versionRegex:/crios\/([\d.]+)/},{term:"android",name:Qt.AndroidBrowser},{term:"safari",name:Qt.Safari,versionRegex:/version\/([\d.]+)/},{term:"applewebkit",name:Qt.WebKit,versionRegex:/applewebkit\/([\d.]+)/}],Spj=[{term:"iphone",name:_a.iOS,versionRegex:/os ([\d._]+)/},{term:"ipad",name:_a.iOS,versionRegex:/os ([\d._]+)/},{term:"ipod",name:_a.iOS,versionRegex:/os ([\d._]+)/},{term:"mac os x",name:_a.macOS,versionRegex:/os x ([\d._]+)/},{term:"android;",name:_a.Android,versionRegex:/android; ([\d.]+)/},{term:"android",name:_a.Android,versionRegex:/android ([\d.]+)/},{term:"linux",name:_a.Linux},{term:"cros",name:_a.ChromeOS},{term:"windows",name:_a.Windows,versionRegex:/windows nt ([\d.]+)/}];var GD=J(vD());var x1e=[{name:Qt.Brave,minVersion:"128.0.0",displayVersion:"1.69.0"},{name:Qt.Chrome,minVersion:"128.0.0",displayVersion:"128"},{name:Qt.Edge,minVersion:"128.0.0",displayVersion:"128"},{name:Qt.Firefox,minVersion:"128.0.0",displayVersion:"128"},{name:Qt.Opera,minVersion:"114.0.0",displayVersion:"114"},{name:Qt.Safari,minVersion:"16.0.0",displayVersion:"16"}];async function cp(){return IB(navigator.userAgent)}function HxA(A){if(A!==void 0)return Dgj()?A.replace("MacCtrl","Ctrl"):A}function Dgj(){return navigator.platform?.indexOf("Mac")>-1||navigator?.userAgentData?.platform==="macOS"}var vi=()=>!0,vt=()=>!1,T6=()=>!1,Bt=()=>!1,ve=()=>T6()||Bt();function fD(){try{return WebAssembly&&typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"}catch{return!1}}async function FD(){try{let{version:A}=await cp(),j=parseInt(A,10);if(ve()&&!Number.isNaN(j)&&j<16)return!1}catch{console.error("Failed to check for Safari 15 in the context of passkeys")}return!Bt()}async function bD(){if(!(chrome.action?.getUserSettings!==void 0||browser.browserAction?.getUserSettings!==void 0))return!1;let j;return chrome.action?.getUserSettings!==void 0?j=await chrome.action.getUserSettings():j=await browser.browserAction.getUserSettings(),j.isOnToolbar??!1}function yD(){return{passwordType:"smart",length:4}}function $D(){return{passwordType:"characters",length:20,requireDigits:!0,requireSymbols:!0}}function MxA(){return{passwordType:"words",length:4,separatorType:"hyphens",capitalize:!1,fullWords:!0}}function wD(){return{passwordType:"pin",length:4}}function ID(){return{passwordType:"words",fullWords:!1,length:5,separatorType:"hyphens",capitalize:!1}}function PD(){return{passwordType:"ed25519",length:0}}function OD(){return{passwordType:"rsa",length:4096}}var _gj=["de","en","es","fr","it","ja","nl","ko","pt","ru","zh-CN","zh-TW"];var Sgj=()=>"production";var Hgj=20160,Mgj=480,KxA=60,Gi=-1,RD=1,VL=Hgj,XL="",JL="config",lk={autoLockEnabled:!0,autoLockMinutes:Mgj,appLauncherLaunchAppsInNewTab:!1,appLauncherShowBookmarksBar:!0,appLauncherUseBackgroundImage:!0,autoLockOnDeviceSleep:!1,securityPreset:ek.SecuritySettingsBalanced,autoSaveExceptions:[],ignoreAccounts:[],inlineEnabled:!0,inlineSaveEnabled:!0,socialLoginsEnabled:!ve(),inlineShowAutomatically:!0,saveNewItemsIn:XL,showNotifications:!0,generator:[yD(),$D(),MxA(),wD(),ID(),PD(),OD()],defaultPassGenType:"smart",syllables:!1,newHibpEnabled:!1,language:Kgj(),languageChanged:!1,defaultPasswordManager:!1,showTags:!0,defaultItemList:"suggestions",watchtowerNotifications:!1,showChangelogPopupOnInteraction:!1,useSharedLockState:!0,slsChannel:Sgj(),showRichIcons:!vt(),firefoxDataCollection:!1,appTheme:"system",appWidth:"double-pane",authenticatePasskeys:!Bt(),shouldCachePasskeyIds:!0,devtoolsEnabled:!1,autoSaveEnabled:!0,autoSaveCreditCardsEnabled:!0,autoSaveIdentitiesEnabled:!0,autoSaveTotpEnabled:!0,autoSubmitLogins:!0,accountsEnabledForBiometry:[],showLockedStateNotifications:!0,showPhishingWarnings:!1,requireFillSensitivePrompt:!1,requireFillCreditCardPrompt:!0,requireFillLoginPrompt:!1,universalSignOnEnabled:!0,advancedSignInUrls:!0};function Kgj(){return typeof navigator>"u"?"en":YO(navigator.languages,_gj,{defaultLocale:"en",strategy:"lookup"})[0]}var WL={};er(WL,{L:()=>p,LoggableString:()=>aj,LoggableStringC:()=>LxA,assertLogSafe:()=>W,assertLogSafeNum:()=>dp,joinLogsafe:()=>Uy});var Af=J(tA()),NxA,Ngj=Symbol(),aj=class{constructor(j){this[NxA]=0,this.toString=()=>this.str,this.toJSON=()=>this.str,this.loggableString=()=>this,this.replace=(e,t)=>W(this.str.replace(e,t.str)),this.concat=e=>W(this.str+e.str),this.str=j}};NxA=Ngj;aj.assertLogSafe=A=>new aj(A);var Uy=(A,j)=>W(A.map(e=>e.str).join(j?.str)),W=aj.assertLogSafe,p=(A,...j)=>Uy(A.flatMap((e,t)=>{let r=j[t];return r!==void 0?[W(e),r]:[W(e)]}),W("")),dp=A=>W(A.toString(10)),LxA=new Af.Type("LoggableString",A=>A instanceof aj,(A,j)=>A instanceof aj?Af.success(A):Af.failure(A,j,"cannot decode unknown value to LoggableString"),A=>A.str);function te(A){throw new Error("Unexpected value, should have never reached this point.")}function cl(A,j,e){if(e){console.error(`${e.str}: Unexpected value of variable: "${j.str}"`);return}console.error(`Unexpected value of variable: "${j.str}"`)}var YTA=J(Wo()),mUj=J(Fo());var NA={};er(NA,{AccountAttrs:()=>_t,BeginDomainVerificationResponse:()=>G_,Bookmark:()=>vu,BoundCellType:()=>im,CCHeader:()=>Z6,CanOnlyPerformOidcAuth:()=>X9j,CanOnlyPerformPasswordAuth:()=>J9j,CanPerformOidcAuth:()=>H1,CanPerformPasswordAuth:()=>cH,CellAttr:()=>Hg,CodeResponse:()=>dC,Context:()=>rx,ContextInitialization:()=>USj,DEFAULT_PAGE_LIMIT:()=>eTA,DateFilterDirection:()=>vq,DefaultByCreationParams:()=>Pw,DsecretProxyResponse:()=>oC,DsecretResponse:()=>nC,DuoResponse:()=>sC,EMAIL_KEY_HANDLE:()=>pV,EMAIL_VERIFICATION_LENGTH:()=>Fzj,EmailVerificationError:()=>zF,FeatureFlagManager:()=>grA,FirewallRule:()=>qC,FirewallRuleAction:()=>Tq,FirewallRuleAnonymousType:()=>Cq,FirewallRuleScopeType:()=>lu,FirewallRuleType:()=>Dq,FirewallRules:()=>xC,GetAccountReportCsvResponse:()=>e_,GetVerifiedDomainsResponse:()=>b_,GroupSortAttrs:()=>eaA,HIBPDataClass:()=>qtA,HeaderType:()=>C1,HibpUser:()=>v_,INITIAL_EXTRA_DATA_STATE:()=>p9j,INITIAL_PAGINATION_STATE:()=>E9j,ImportFormat:()=>Hl,ItemKind:()=>Id,ItemShareAvailableTo:()=>uu,ItemShareLinkExpiration:()=>sm,ItemShareRejectedRecipientsError:()=>oH,LoginHeader:()=>wd,MAX_CODE_ATTEMPTS_ALLOWED:()=>tzj,MEMBERSHIPS_BATCH_SIZE:()=>ZI,MfaResponse:()=>kC,MfaType:()=>Oi,MigratingUserEmails:()=>mTA,MigratingUserState:()=>mI,ModernAppVersion:()=>pC,MustEnableResponse:()=>cC,PendingVerifiedDomain:()=>F_,RecoveryAttemptPostCompletion:()=>mH,RecoveryCodeAttemptIdentityVerified:()=>U1,RecoveryCodeAuthenticationError:()=>Gx,RecoveryCodeEmailResendError:()=>V1,RecoveryCodeEmailVerification:()=>pH,RecoveryCodeEmailVerificationError:()=>lb,RecoveryCodeSelectVerification:()=>EH,SecureNoteHeader:()=>Sg,SignupSource:()=>Z7,SortDir:()=>jaA,TOKEN_PREFIX:()=>ttA,TOKEN_VERSION:()=>rtA,TOTP_KEY_HANDLE:()=>EV,TotpResponse:()=>iC,TrustLog:()=>Fc,TrustLogError:()=>KeA,USER_MIGRATION_BATCH_SIZE:()=>MOA,UserSignupType:()=>ib,UsoTelemetryActions:()=>Bs,VaultsReportAttributes:()=>cI,VaultsReportTypes:()=>lI,VerifiedDomain:()=>f_,VerifiedDomainType:()=>EI,WebAuthnResponse:()=>lC,_checkPwnedPasswords:()=>QOA,acceptBanner:()=>oHj,acceptLinkRequest:()=>PCj,acceptProvisionWithSSOIdentity:()=>K9j,acknowledgeNotification:()=>KLj,activateStripeBilling:()=>_Hj,addAccessorToVaults:()=>dMj,addAccessorsToVault:()=>urA,addAclsToObjectData:()=>rTj,addAdminToProvisioningGroup:()=>G9j,addCard:()=>GHj,addCredentialBundle:()=>j3j,addMigratingUsers:()=>Y3j,addObjectDataToGroup:()=>tTj,addOrUpdateAddress:()=>CHj,addRecoveryKeysetToGroup:()=>WF,assignGroupsToApplication:()=>Czj,attachAsChildAccount:()=>oMj,batchGetWatchtowerReports:()=>lRA,beginAccountRegistration:()=>aTA,beginChangeEmail:()=>YSj,beginDomainVerification:()=>C3j,beginPasskeyAccountRegistration:()=>nTA,beginProvisionedUserSignup:()=>L9j,beginUserRecovery:()=>a4j,beginUserSignup:()=>N9j,bootstrapObjectDataAccess:()=>ltA,brex:()=>QHj,browserSupportsWebAuthn:()=>Y1j,calculatePercentageCompleted:()=>xCj,canAccessXamPql:()=>Uzj,canOnlyPerformWebauthnAuth:()=>W9j,canPerformTrustedDeviceBasedAuth:()=>sTA,canPerformWebauthnAuth:()=>M1,cancelChangeEmail:()=>AHj,cancelDeviceEnrollment:()=>f3j,cancelMspAccountLinkRequest:()=>y_j,cancelStripeSubscription:()=>OHj,cancelUserRecovery:()=>CS,changeAccountTier:()=>BMj,changeDefaultCard:()=>orA,changeDefaultPaymentMethod:()=>KRA,changeDomain:()=>k_j,changeMasterPassword:()=>QSj,changeServiceAccountAvatar:()=>lSj,changeServiceAccountName:()=>sSj,changeTemplatesState:()=>lKj,changeUserAvatar:()=>s4j,changeUserName:()=>l4j,changed:()=>po,checkChildAccountCode:()=>aMj,checkDomainAvailability:()=>l_j,checkGiftCard:()=>rKj,checkProvisioningEmailVerification:()=>x4j,checkPwnedPasswords:()=>mtA,clearAllCaches:()=>KtA,clearAllCachesForContext:()=>NtA,clearContextCache:()=>aeA,clearPartialUserCache:()=>OtA,clearPartialUserCacheForContext:()=>RtA,clearServiceAccountCache:()=>HtA,clearServiceAccountCacheForContext:()=>MtA,clearUserCache:()=>WeA,clearUserCacheForContext:()=>QeA,clearVaultCache:()=>UeA,clearVaultCacheForContext:()=>VeA,clearVaultWithPreviewsCache:()=>XeA,clearVaultWithPreviewsCacheForContext:()=>JeA,completeAccountRegistration:()=>oTA,completeActivationHubTask:()=>K_j,completeChangeEmailForPasswordUser:()=>jHj,completeChangeEmailForSsoUser:()=>eHj,completeDomainVerification:()=>_3j,completeMFASignInWithDSecret:()=>HSj,completeMFASignInWithDSecretProxy:()=>_Sj,completeMFASignInWithDuo:()=>MSj,completeMFASignInWithEnable:()=>KSj,completeMFASignInWithTOTP:()=>CSj,completeMFASignInWithWebAuthn:()=>SSj,completePasskeyAccountRegistration:()=>iTA,completeProvisionedUserSignup:()=>h4j,completeReplyToConfirmation:()=>U2j,completeUserProvision:()=>f4j,completeUserRecovery:()=>n4j,completeUserSignup:()=>z9j,confirmUsers:()=>JDj,convertAccountV3:()=>mMj,convertToBusiness:()=>pMj,convertToFamily:()=>EMj,convertToIndividual:()=>uMj,createAccountGatedFeatureTrial:()=>Hzj,createAccountMspLinkRequest:()=>b_j,createAccountMspLinkRequestPreflight:()=>O_j,createAccountTemplateConfig:()=>D_j,createAccountTransferVaultPreflight:()=>LeA,createAdminWatchtowerKeyset:()=>bRA,createAppleSubscription:()=>THj,createChildAccountRelationship:()=>tMj,createConnectToken:()=>ASj,createDataStreamingToken:()=>jSj,createDetailedVaultReportingKeysetV2:()=>dzj,createEamGroup:()=>w_j,createGeneratedPasswordsVault:()=>a1,createGroup:()=>itA,createGroupMembership:()=>Rg,createHealthMonitoringCheck:()=>rTA,createItemShare:()=>Z2j,createManagedAccount:()=>GCj,createManagedCredentialAccessors:()=>FLj,createManagedCredentials:()=>xLj,createManagedVault:()=>PDj,createMonitoringCheck:()=>SLj,createNewContext:()=>TRA,createObjectData:()=>ctA,createObjectDataAccess:()=>u1,createPersonalVault:()=>dx,createPlayStoreSubscription:()=>DHj,createPolicyTemplate:()=>AUj,createProvisionManager:()=>q9j,createProvisionManagersGroup:()=>h9j,createProvisionUser:()=>jtA,createProvisioningIntegrationToken:()=>_4j,createProvisioningProgressStep:()=>J3j,createProvisioningServiceAccount:()=>tTA,createRecoveryCodeAndPolicy:()=>qzj,createRemoteAutofillMyceliumChannel:()=>uUj,createServiceAccountPreflight:()=>DtA,createServiceAccountV3:()=>CtA,createSetupIntent:()=>LLj,createSharedVault:()=>KS,createSignedSupportRequest:()=>$9j,createSsoApplication:()=>Pzj,createSsoSettings:()=>a3j,createSystemVault:()=>lx,createUserManagedServiceAccountObjectData:()=>Z4j,createVault:()=>RDj,createVaultForAccountTransfer:()=>zeA,createVaultItems:()=>y4A,createWatchtowerPubkey:()=>GtA,createWebauthnCredentials:()=>pTA,credentialBundleFromAuthResponse:()=>r3j,csvToVaultItems:()=>XrA,declineLinkRequest:()=>OCj,declineMspAccountLinkRequest:()=>$_j,decryptItemShare:()=>eLj,decryptKeysets:()=>Sk,decryptObjectData:()=>stA,delegateSession:()=>WSj,deleteAccessorFromVault:()=>WRA,deleteAccount:()=>u_j,deleteAccountCookie:()=>mSj,deleteCard:()=>FHj,deleteCompanyLogo:()=>__j,deleteDevice:()=>tHj,deleteGroup:()=>L4j,deleteInactiveDevices:()=>rHj,deleteInviteVault:()=>T2j,deleteItemShare:()=>sLj,deleteManagedCredentialAccessor:()=>$Lj,deleteObjectData:()=>zOA,deleteObjectDataAccess:()=>eTj,deletePendingPaymentMethod:()=>bHj,deleteRecoveryKey:()=>xzj,deleteSsoApplication:()=>Ozj,deleteUserCookie:()=>BSj,deleteUsers:()=>AtA,deleteVault:()=>_Dj,deleteVaultItemHistory:()=>VCj,deleteVaultPreflight:()=>CDj,deleteVerifiedDomain:()=>M3j,deleteWebauthnCredentialForUser:()=>V3j,derivePartsFromShareSecret:()=>tLj,detachChildAccount:()=>nMj,detailsToUser:()=>RRA,disableMFA:()=>z1j,disableServiceAccountAccess:()=>NDj,disableTravelSafe:()=>MDj,dismissBanner:()=>iHj,enableMFA:()=>L1j,enableServiceAccountAccess:()=>KDj,enableTravelSafe:()=>HDj,encryptVaultForAPI:()=>n1,endTrialPeriod:()=>RHj,enforceManagedCredentialPolicy:()=>PLj,fetchAccountHandoffCertificate:()=>Szj,fetchAppCatalogApplications:()=>$zj,fetchCommonTemplates:()=>w1,fetchIdentityAccessToken:()=>wzj,fetchUserApplications:()=>Izj,fetchVerificationActionSummary:()=>Qzj,finalizeMspAccountLinkRequest:()=>P_j,finalizeMspAccountLinkRequestPreflight:()=>I_j,findCachedUser:()=>o1,findDecryptedKeyset:()=>Y6,findLongestRowLength:()=>ZS,findProvisionedUserState:()=>v4j,findSsoSettings:()=>i3j,finishConfirmation:()=>g4j,finishConfirmationSsoUser:()=>R4j,generateCredentialsFileAndBearerToken:()=>lMj,generateDSecretHmac:()=>O_,generateDemoVaultItems:()=>bMj,generateEmailTemplatePreview:()=>LMj,generateEmployeeVault:()=>RS,generateNewKeysetForGroup:()=>Uk,generateReplyToConfirmation:()=>z2j,generateSessionFile:()=>F9j,generateSessionFileWithServiceAccount:()=>b9j,generateShareSecret:()=>V4A,generateWatchtowerReportForItem:()=>oRA,generateWatchtowerReportForItems:()=>vtA,getAccountBasedFeaturesFromService:()=>LtA,getAccountFeatures:()=>f1,getAccountMspLinkRequest:()=>F_j,getAccountOverview:()=>LI,getAccountReport:()=>o9j,getAccountReportCSV:()=>l9j,getAccountShareSettings:()=>cLj,getAccountSsoApplications:()=>Dzj,getAccountTemplateConfig:()=>R_j,getAccountTransfersDetails:()=>W3j,getAccountUserCounts:()=>f_j,getAccountWithAttrs:()=>go,getActivationHubTasks:()=>M_j,getActiveKeysetForGroup:()=>Gd,getActivityFeed:()=>U_j,getAdministratorsGroup:()=>_S,getAllCreditCardItems:()=>JCj,getAllIntegrations:()=>I2j,getAllObjectDataRecordsWithDataSpec1:()=>aTj,getAllPoliciesForCurrentAccount:()=>UTj,getAllTemplates:()=>Es,getAllowAccountCreationPolicy:()=>cTj,getAllowMapsPolicy:()=>xTj,getAppLauncherAllowedPolicy:()=>bTj,getAppLauncherAllowedPolicyLocked:()=>$Tj,getApplicationDetails:()=>Tzj,getAutoDeleteSuspendedUsersPolicies:()=>BTj,getAutoLockPolicy:()=>oTj,getAutoLockPolicyDefaultDefinition:()=>ktA,getAutofillConfirmationPolicyAction:()=>PTj,getAutomatedQuest:()=>Bzj,getAvailableTiers:()=>irA,getAvailableTiersV3:()=>$Hj,getB5xSupportsSharingSrpx:()=>fSj,getBanners:()=>nHj,getBillingStats:()=>SHj,getBrexClientInfo:()=>ZHj,getCard:()=>yHj,getCentralAccountHubToken:()=>Jzj,getChildAccountRelationship:()=>rMj,getCliIntegrationPolicy:()=>TTj,getCombinedObjectAccessors:()=>Y4j,getContextCache:()=>zI,getCreateVaultPreflight:()=>OS,getCustomIconForItem:()=>MCj,getDashboardReport:()=>A9j,getDateForVaultsFilter:()=>uw,getDefaultIdentityTemplate:()=>oKj,getDefaultPolicyDefinition:()=>zTj,getDefaultTemplate:()=>iKj,getDefaultTiers:()=>IHj,getDefaultVaultPermissions:()=>lzj,getDeletedItemsForVault:()=>LCj,getDeveloperEnvironmentsPolicy:()=>_Tj,getDeveloperReport:()=>$Mj,getDeveloperServiceAccountsReport:()=>RMj,getDeveloperServiceAccountsReportCsv:()=>DMj,getDeveloperSharedVaultsReport:()=>PMj,getDeveloperSharedVaultsReportCsv:()=>OMj,getDeveloperUsersReport:()=>wMj,getDeveloperUsersReportCsv:()=>IMj,getDeviceEnrollmentStatus:()=>q3j,getDeviceTrustAccessToken:()=>Wzj,getDistributor:()=>_Mj,getDistributorEntitlementFromCode:()=>CMj,getDocument:()=>hRA,getDocumentBlob:()=>_Cj,getDomain:()=>px,getEmailAccountConfig:()=>H_j,getEmailSubscriptions:()=>HMj,getEmailTemplateByUuid:()=>NMj,getEmailTemplates:()=>KMj,getEncryptedCredentialBundle:()=>e3j,getEncryptedManagedAccountKey:()=>q1,getEncryptedManagedAccountKeyForGroup:()=>FtA,getEncryptedManagedAccountKeyForGroupWithKeyset:()=>RCj,getEnrollment:()=>G3j,getEntireAccount:()=>ZF,getEveryoneVault:()=>jm,getExtensionAdoptionOverview:()=>B9j,getExtensionAdoptionReport:()=>m9j,getExtensionAdoptionReportCsv:()=>g9j,getExtensionAllowedPolicy:()=>GTj,getExtensionAllowedPolicyLocked:()=>FTj,getFeatures:()=>G1,getFile:()=>xRA,getFilteredActivityLogReports:()=>N_j,getFilteredActivityLogTotalReports:()=>z_j,getFirewallRules:()=>ZMj,getGeneratedPasswordsVault:()=>PS,getGiftCards:()=>eKj,getGridSlackChannels:()=>v2j,getGridSlackGroups:()=>x2j,getGridSlackTeams:()=>f2j,getGridSlackUsers:()=>G2j,getGroup:()=>Ka,getGroupDeadline:()=>c3j,getGroupMembersCsv:()=>X4j,getGroupMspPermissions:()=>yCj,getGroupPubKeys:()=>TeA,getGroupUsersWithPermissions:()=>x1,getGroups:()=>S4j,getHasDetailedVaultReportingKeyset:()=>kzj,getHibpDomainReport:()=>tCj,getHibpDomainReportCSV:()=>rCj,getHibpReport:()=>xtA,getHostedProvisioningIntegration:()=>l1,getHostedProvisioningIntegrationState:()=>D4j,getHostedProvisioningManagedGroupUUIDs:()=>KOA,getHostedProvisioningServiceAccount:()=>VF,getIcons:()=>i2j,getIncomingPackages:()=>e_j,getInitializationExport:()=>DRA,getInitializationExportFromNewContext:()=>JSj,getInsightsTeamReport:()=>l2j,getInsightsTeamReportCsv:()=>c2j,getInsightsTeamReportOverview:()=>s2j,getInsightsTopSharedCredentials:()=>d2j,getIntegrations:()=>_tA,getInviteVaults:()=>R2j,getInvoiceDetails:()=>kHj,getInvoicePDF:()=>uHj,getInvoices:()=>dHj,getIsValidPurchaseOrderToken:()=>qHj,getIsValidStripePurchaseOrderToken:()=>xHj,getItemPasswordPolicy:()=>hTj,getItemShareSettings:()=>J2j,getLastViewedReports:()=>u9j,getLaunchSessionData:()=>FCj,getLinkRequests:()=>ICj,getMFA:()=>V1j,getMFAConfig:()=>X1j,getManagableGroups:()=>otA,getManagedAccountAccessDetails:()=>ELj,getManagedAccountBaseUri:()=>uRA,getManagedAccountDetails:()=>uLj,getManagedAccountUri:()=>bCj,getManagedAccounts:()=>dLj,getManagedAccountsNetSeats:()=>gLj,getManagedCredential:()=>hLj,getManagedCredentialAccessors:()=>bLj,getManagedCredentialPolicies:()=>wLj,getManagedCredentialPolicy:()=>ILj,getManagedCredentials:()=>qLj,getManagedCredentialsForPolicy:()=>GLj,getModernAppVersions:()=>iMj,getMonitoringStatus:()=>HLj,getMoreIncomingPackages:()=>t_j,getMspDistributorLinkPreview:()=>pHj,getMspLastInvoiceData:()=>mHj,getMspLinkRequest:()=>wCj,getMspNfrSeats:()=>EHj,getMspProjectedInvoiceData:()=>BHj,getMukSrpXCredentials:()=>arA,getNeedsKolideHealthCheckPolicy:()=>wTj,getNotifiableTaxJurisdiction:()=>KHj,getNotifications:()=>MLj,getObjectData:()=>YF,getObjectDataAccessPreflight:()=>XOA,getObjectDataAccessorsForObjectType:()=>VOA,getOidcAuthMethod:()=>lTA,getOidcProviderName:()=>A3j,getOidcWellKnownConfig:()=>d3j,getOldDevicesReport:()=>s9j,getOpxSupportsDelegatedSessionSignInEvent:()=>bSj,getOpxSupportsSignInEvent:()=>qSj,getOpxSupportsSingleSignInEvent:()=>vSj,getOverviewReport:()=>i9j,getOwnersGroup:()=>SS,getPackagesForVaultItem:()=>A_j,getPartialUsers:()=>PtA,getPartialUsersCount:()=>W_j,getPartialUsersV2:()=>J_j,getPasskeySitesList:()=>htA,getPaymentMethod:()=>ULj,getPendingDeviceEnrollments:()=>v3j,getPendingInvitation:()=>WLj,getPendingInvitations:()=>O2j,getPerson:()=>Fu,getPersonalVault:()=>em,getPersonalVaultOnlyIfCached:()=>IDj,getPolicyList:()=>VTj,getPolicyTemplateChildAccounts:()=>rUj,getPolicyTemplatePolicies:()=>Zzj,getPolicyTemplates:()=>Yzj,getPreAuthFeatures:()=>ztA,getPreAuthFeaturesFromService:()=>UtA,getPreRegistrationFeature:()=>VS,getPreRegistrationFeatures:()=>US,getPreviousVersionOfItem:()=>XCj,getProvisionDetailsV2:()=>m4j,getProvisionManager:()=>v9j,getProvisionManagersGroup:()=>s1,getProvisionManagersV2:()=>x9j,getProvisioningGroup:()=>$4j,getReceivingVault:()=>fRA,getRecoveryAttempts:()=>fzj,getRecoveryDetails:()=>c4j,getRecoveryGroup:()=>Bo,getRecoveryKeyDetails:()=>gTA,getRecoveryKeyset:()=>JF,getRecoveryPolicy:()=>BTA,getRecoveryPolicyAndKeyDetails:()=>Gzj,getRecoveryPolicyUuids:()=>vzj,getRegisterURL:()=>I9j,getReleaseChannelsPolicy:()=>sTj,getReleaseChannelsPolicyDefaultDefinition:()=>utA,getRemainingAmount:()=>MHj,getReportingPolicy:()=>JOA,getReportingPolicyWrapper:()=>EtA,getResendDetails:()=>y4j,getRestrictFailedLoginAttemptsPolicy:()=>ETj,getSecureRemoteAutofillPolicy:()=>MTj,getSecurityGroup:()=>K4j,getSecuritySettingsPresetsPolicy:()=>NTj,getServiceAccount:()=>nSj,getServiceAccountGroupMemberships:()=>StA,getServiceAccountTypeSlug:()=>k2j,getServiceAccountVaultAccesses:()=>rSj,getServiceAccounts:()=>tSj,getShareAuditDetails:()=>rLj,getShareHistoryForItem:()=>V2j,getShareSeviceAuthToken:()=>iLj,getSidebarNavPolicies:()=>kTj,getSignInMethods:()=>V9j,getSignupDetails:()=>D9j,getSlackApp:()=>YrA,getSlackChannels:()=>q2j,getSlackGroups:()=>F2j,getSlackUsers:()=>y2j,getSpecialVault:()=>r1,getSshBookmarksPolicy:()=>RTj,getSsoMigrationExpiredReport:()=>B3j,getSsoMigrationPendingReport:()=>m3j,getSsoMigrationReportGroups:()=>E3j,getSsoMigrationReportOverview:()=>u3j,getSsoMigrationSuccessfulReport:()=>g3j,getSsoSettings:()=>o3j,getSubscription:()=>Vs,getSupportAccountsList:()=>w3j,getSystemVault:()=>Nk,getTaxAdvice:()=>srA,getTeamMembersGroup:()=>zk,getTemplates:()=>dDA,getTrustpilotReviewData:()=>D3j,getTwoFactorSitesList:()=>gtA,getUpdateGroupManagedCompanyPermissionsRequest:()=>TCj,getUpdateSingleMspLimitedAccessPermissionRequest:()=>DCj,getUpgradeTiers:()=>wHj,getUsageReportsWithCursors:()=>t9j,getUsageReportsWithFilters:()=>e9j,getUserCombinedObjectDataAccess:()=>kx,getUserCombinedObjectDataAccesses:()=>Q4j,getUserCombinedObjectDataAccessesForObjectTypes:()=>LOA,getUserCookies:()=>pSj,getUserMspPermissions:()=>kRA,getUserPubKeys:()=>vc,getUserReport:()=>j9j,getUserUsageReportOverview:()=>r9j,getValidPromotionFromCode:()=>hHj,getVault:()=>fd,getVaultAccessForAdmin:()=>LDj,getVaultItemHistory:()=>UCj,getVaultItemWithUuid:()=>mRA,getVaultItems:()=>bd,getVaultItemsOverviews:()=>BRA,getVaultManagers:()=>T3j,getVaultReport:()=>a9j,getVaultReportingSync:()=>uzj,getVaultUserAccessCount:()=>zDj,getVaults:()=>Dg,getVaultsByCreation:()=>yDj,getVaultsForAccountTransfer:()=>wDj,getVaultsReport:()=>n9j,getVaultsV2:()=>bDj,getVerifiedDomains:()=>S3j,getWatchtowerData:()=>BtA,getWatchtowerPubkey:()=>gCj,getWatchtowerReportCounts:()=>sRA,getWatchtowerReports:()=>hCj,getWatchtowerStats:()=>qCj,getWebAuthnAssertion:()=>Q1j,getWebauthnAuthMethod:()=>Z9j,getWebauthnCredentialsForUser:()=>U3j,grantGroupAccessToWatchtowerKeyset:()=>g_j,handleDelegatedSessionRequest:()=>NSj,handleDelegatedSessionSignInSuccess:()=>trA,handleLegacySignInSuccess:()=>ORA,handleObjectDataMigration:()=>nTj,handleSignInSuccess:()=>tm,handleTrustedDeviceUpgradeRequest:()=>yzj,hasAutoDeleteSuspendedUsersUnleashFlag:()=>mTj,hostedProvisioningIntegrationExists:()=>T4j,importPasskeySitesList:()=>ACj,importTwoFactorSitesList:()=>ZTj,importVaultItems:()=>$4A,importWatchtowerData:()=>YTj,importer:()=>QrA,initialize:()=>VSj,invalidateCache:()=>pr,inviteUsersViaEmail:()=>C2j,inviteViaSlack:()=>_2j,isEncryptedOd:()=>dtA,isItemShareRejectedRecipientsError:()=>Y2j,isOwnerOrAdminOrEamGroupMember:()=>Nzj,isOwnerOrEamGroupFromContext:()=>Kzj,isOwnerOrSecurityOrAdminOrEamGroup:()=>Lzj,isOwnerOrSecurityOrEamGroupFromContext:()=>zzj,isSignedInAccountLoaded:()=>eDj,isTrustLogError:()=>fDj,kickoffDeviceEnrollment:()=>h3j,legacySignUpAccount:()=>O9j,linkAccountToPartner:()=>HHj,linkDistributorByEntitlementCode:()=>SMj,loadAllWatchtowerDataLists:()=>g1,loadCommonPasswordsList:()=>WTj,loadHibpReport:()=>aCj,loadPasskeySitesList:()=>eRA,loadPassphraseWordList:()=>XTj,loadTwoFactorSitesList:()=>ARA,loadUniverse:()=>FRA,loadWatchtowerData:()=>YOA,lockedOutDeleteAccount:()=>p_j,lookUpInvitation:()=>H2j,lookUpTeamInvitation:()=>M2j,makeWebAuthnCredential:()=>W1j,markAwayForTravel:()=>t4j,markBackFromTravel:()=>r4j,markGroupReadyForPurging:()=>z4j,markPackageAsRead:()=>r_j,markSignatureInvalid:()=>b3j,mergeInPubKeys:()=>SF,migrateUsersToHostedProvisioning:()=>C4j,migrateVaults:()=>OLj,oAuthRefreshToken:()=>AMj,parse:()=>bc,parseMigratingUsersCsv:()=>Z3j,patchSsoApplication:()=>Rzj,patchVaultItems:()=>Tl,performCreateServiceAccountWithTrustLogUpdate:()=>NeA,performOperationWithTrustLogUpdate:()=>Gu,performSignInAccountChecks:()=>wtA,personalVaultName:()=>c1,postBrexRefreshToken:()=>XRA,postBrexVerifier:()=>YHj,postFastmailRefreshToken:()=>VMj,postFastmailVerifier:()=>UMj,postFirewallRules:()=>YMj,postHibpDomainReportNotify:()=>eCj,postImage:()=>ItA,postSlackAccessToken:()=>w2j,postSlackNonce:()=>$2j,postTemplate:()=>sKj,postUniqueUserCountForGroups:()=>J4j,postUpdatedCredentials:()=>_RA,prepProvisionUser:()=>i1,prepServiceAccount:()=>TtA,prepareSSOUserForRegistration:()=>aaA,privacycom:()=>ZLj,processIncomingPackages:()=>$tA,promptConfirmChangeEmail:()=>ZSj,publishCompanyLogo:()=>S_j,purgeDeletedVaultItemForVault:()=>zCj,putGroupApplicationAssignment:()=>W4j,putVaultReportingSnapshotsV2:()=>EaA,reEncryptRequiredData:()=>UOA,reactivateUsers:()=>i4j,receiveMsgA:()=>azj,receiveMsgB:()=>caA,receiveSharedCredentials:()=>szj,receiveTagA:()=>ozj,receiveTagB:()=>kaA,recoverUserWithSSOIdentity:()=>M9j,recoveryVerifyEmailAuth:()=>u4j,recoveryVerifyEmailResend:()=>k4j,recoveryVerifyEmailStart:()=>d4j,recreateProvisionManager:()=>y9j,redeemGiftCard:()=>tKj,refreshKeysets:()=>oS,refreshKeysetsIfNecessary:()=>UI,regenerateSignUpLink:()=>N2j,registerAccount:()=>_9j,registerHostedProvisioningIntegration:()=>w4j,registerPasskeyAccount:()=>S9j,registerPasskeyForUser:()=>z3j,registerServiceAccountTokenRequest:()=>v1,registerUserWithSSOIdentity:()=>H9j,registerWebauthnCredential:()=>uTA,reloadUniverse:()=>o_j,removeEmptyColumns:()=>vrA,removePackage:()=>a_j,removePackages:()=>ZCj,removePolicyTemplatePolicies:()=>tUj,removeSCIMSetupAdministrator:()=>f9j,renameServiceAccountToken:()=>Y_j,reportAuditEvent:()=>L_j,reportManagedCredentialUsage:()=>fLj,reportOutdatedBrowser:()=>JLj,reportUsoAction:()=>ezj,requestAccountDeletion:()=>I3j,requestBrexAccessToken:()=>jMj,requestInvoiceEmail:()=>vHj,requestSupportEmail:()=>$3j,require2FAOnNextSignIn:()=>aHj,resendAllUserProvision:()=>b4j,resendInvitations:()=>S2j,resendProvisioningEmailVerification:()=>G4j,resendUserProvision:()=>F4j,resendVerificationEmail:()=>U9j,resetContext:()=>aS,retryOnTrustLogConflict:()=>IOA,revokeAllServiceAccountTokensForAccount:()=>Z_j,revokeInvitations:()=>L2j,revokeServiceAccountToken:()=>Q_j,revokeVaultAccess:()=>prA,runBackgroundMigrations:()=>pUj,runBlockingMigrations:()=>EUj,saveDecryptedKeysets:()=>nS,saveNotificationSettings:()=>NLj,scrubClientSecret:()=>K1,searchGroupsCount:()=>H4j,sendFeedback:()=>AKj,sendGroup:()=>bu,sendItemSnapshotToServer:()=>mzj,sendMFACode:()=>U1j,sendMsgA:()=>laA,sendMsgB:()=>nzj,sendNoSigninPastMonthEmail:()=>k9j,sendPackage:()=>j_j,sendPackages:()=>QCj,sendPerformanceTraces:()=>Vzj,sendPreAuthPerformanceTraces:()=>Xzj,sendProvisionStartedConfirmation:()=>B4j,sendProvisionedConfirmation:()=>q4j,sendSsoMigrationReminderEmail:()=>p3j,sendTagA:()=>daA,sendTagB:()=>izj,sendTestEmailWithOverrides:()=>zMj,sendUnredeemedFamilyAccountEmail:()=>d9j,sendUnusedPrivateVaultEmail:()=>c9j,sendVault:()=>cx,setActiveUser:()=>YeA,setB5xSupportsSharingSrpx:()=>FSj,setCachedUsers:()=>VDj,setOpxSupportsDelegatedSessionSignInEvent:()=>ySj,setOpxSupportsSignInEvent:()=>xSj,setOpxSupportsSingleSignInEvent:()=>GSj,setUserCookie:()=>XtA,setupCredentialBundle:()=>t3j,setupMsp:()=>ftA,shareCredentials:()=>uaA,shouldReportWithSnapshots:()=>z1,signIn:()=>mx,signInWithCredentialBundle:()=>ZtA,signInWithEmailAndPasswordGetUniverse:()=>PSj,signInWithFederatedSession:()=>$Sj,signInWithPasskeyAuth:()=>wSj,signInWithProvisioningCredentialBundleAuth:()=>ISj,signInWithRecoveryCodePasskeys:()=>OSj,signInWithRecoveryCodePwSk:()=>RSj,signOut:()=>zSj,signUpAccount:()=>R9j,signUpAndGetInfo:()=>P9j,ssoValidateEnd:()=>l3j,ssoValidateStart:()=>s3j,startOidcAuth:()=>VLj,startRecoveryWithRecoveryCode:()=>bzj,startUserProvision:()=>etA,submitDepartureSurvey:()=>R3j,subscribeWithStripe:()=>PHj,suspendMigratedUser:()=>jzj,suspendUserProvision:()=>p4j,suspendUsers:()=>_OA,teamInvitePerson:()=>K2j,toWatchtowerReportForApi:()=>cCj,transformRecipientsToApiFormat:()=>ob,trimItemForSharing:()=>z4A,unlinkManagedAccount:()=>kLj,unloadAllWatchtowerDataLists:()=>h1,unloadCommonPasswordsList:()=>QTj,unloadPasskeySitesList:()=>tRA,unloadPassphraseWordList:()=>JTj,unloadTwoFactorSitesList:()=>jRA,unloadWatchtowerData:()=>ZOA,unsafeCancelDeviceEnrollment:()=>F3j,unsafeGetDeviceEnrollmentStatus:()=>x3j,updateAccount:()=>c_j,updateAccountGatedFeatureTrial:()=>Mzj,updateAccountShareSettings:()=>lLj,updateAccountTemplateConfig:()=>T_j,updateAllowAccountCreationPolicy:()=>dTj,updateAllowMapsPolicy:()=>vTj,updateAppLauncherAllowedPolicy:()=>yTj,updateApplicationDeviceCheckStatus:()=>_zj,updateApplicationDeviceCheckStatuses:()=>hTA,updateAutoDeleteSuspendedUsersPolicies:()=>gTj,updateAutoLockPolicy:()=>iTj,updateAutofillConfirmationPolicyAction:()=>OTj,updateBillingSettings:()=>d_j,updateBulkGroupVaultAccessPermissions:()=>ErA,updateCard:()=>fHj,updateCliIntegrationPolicy:()=>CTj,updateDefaultVaultPermissions:()=>czj,updateDeveloperEnvironmentsPolicy:()=>STj,updateEmailSubscriptions:()=>MMj,updateExtensionAllowedPolicy:()=>fTj,updateGroupAttrs:()=>U4j,updateGroupMembershipRole:()=>nDj,updateGroupMemberships:()=>ax,updateGroupMspPermissions:()=>$Cj,updateGroupPermissions:()=>V4j,updateHostedProvisioningEmailDomains:()=>O4j,updateHostedProvisioningNotificationEmails:()=>P4j,updateHostedProvisioningState:()=>I4j,updateInviteVault:()=>D2j,updateItemPasswordPolicy:()=>qTj,updateLocalCredentials:()=>CRA,updateManagedAccount:()=>fCj,updateManagedCompanyMspPermissions:()=>pLj,updateManagedCredential:()=>vLj,updateManagedCredentialAccessor:()=>yLj,updateMigratingUserState:()=>Azj,updateNeedsKolideHealthCheckPolicy:()=>ITj,updatePaymentMethod:()=>zLj,updatePolicyTemplateName:()=>jUj,updatePolicyTemplatePolicies:()=>eUj,updateReleaseChannelsPolicy:()=>lTj,updateReportingPolicy:()=>HTj,updateRestrictFailedLoginAttemptsPolicy:()=>pTj,updateSecureRemoteAutofillPolicy:()=>KTj,updateSecuritySettingsPresetsPolicy:()=>LTj,updateServerSignup:()=>T9j,updateServerSignupAccountType:()=>C9j,updateServiceAccount:()=>cSj,updateSidebarNavPolicies:()=>uTj,updateSlackApp:()=>b2j,updateSshBookmarksPolicy:()=>DTj,updateSsoSettings:()=>n3j,updateSubscription:()=>gHj,updateUser:()=>UDj,updateUserMemberships:()=>fS,updateVault:()=>TS,updateVaultAccessPermissions:()=>kMj,updateVaultClientAccess:()=>SDj,updateVerifiedDomain:()=>H3j,updateWebauthnCredentialForUser:()=>X3j,upgradeGuestToMember:()=>YDj,uploadCompanyLogo:()=>C_j,uploadDocument:()=>SCj,uploadFile:()=>HCj,uploadVaultItemSnapshots:()=>pzj,uploadWatchtowerReports:()=>BCj,verifyLockedOutAccountDeletion:()=>E_j,verifyMasterPassword:()=>nrA,verifyOidc:()=>XLj,verifyPasskey:()=>L3j,verifyTotp:()=>J1j,verifyWebauthnCredentialAttestation:()=>ETA});var aA={};er(aA,{ACTIVITIES_BATCH_SIZE:()=>n0j,AbortSignal:()=>PyA,AcceptedLinkRequestsResponse:()=>s$A,AccessorACL:()=>pc,AccessorPreview:()=>E$A,AccessorPubKey:()=>ObA,AccessorState:()=>Ew,AccessorType:()=>Sf,Account:()=>t0A,AccountAttrs:()=>Tw,AccountFlags:()=>UbA,AccountInfo:()=>c1A,AccountLinkRequest:()=>i0A,AccountMeta:()=>zT,AccountRegistrationResponse:()=>d1A,AccountSettings:()=>YT,AccountSupportInfo:()=>v1A,AccountTemplatesResponse:()=>ybA,AccountTransferDetails:()=>D1A,AccountUserCounts:()=>n0A,Action:()=>x8A,ActionSummary:()=>v8A,ActionType:()=>AS,Activity:()=>kX,ActivityFeedType:()=>dX,ActivityLogTotalReports:()=>x0A,ActivityWithCursor:()=>q0A,AddRecoverableMaterialRequest:()=>V8j,AddRecoverableMaterialResponse:()=>r8A,AdminIdentityVerificationResponse:()=>G8A,AffectedUserCountsResponse:()=>fbA,AllPoliciesResponse:()=>bwA,AllowAccountCreationLastUpdatedByUser:()=>C$A,AllowAccountCreationPolicyDefinition:()=>T$A,AllowAccountCreationPolicyResponse:()=>_$A,AllowMapsPolicyDefinition:()=>K$A,AllowMapsPolicyResponse:()=>N$A,AllowedWatchtowerDomainsSettings:()=>Nbj,AppCatalogConfiguration:()=>u8A,AppLauncherAllowedPolicyDefinition:()=>C$j,AssignedGroup:()=>QyA,AttestationConveyancePreference:()=>GyA,Auth:()=>BX,AuthMethod:()=>ku,AuthParams:()=>Yf,AuthStates:()=>Sw,AuthenticationExtensionsClientInputs:()=>wyA,AuthenticatorAssertionResponse:()=>RyA,AuthenticatorAttachment:()=>FyA,AuthenticatorAttestationResponse:()=>OyA,AuthenticatorSelectionCriteria:()=>yyA,AuthenticatorTransport:()=>fyA,AutoDeleteSuspendedUsersPolicyRequest:()=>j0A,AutoDeleteSuspendedUsersPolicyResponse:()=>FV,AutoDeleteSuspendedUsersSettings:()=>Lbj,AutoLockLastUpdatedByUser:()=>y$A,AutoLockPolicyDefinition:()=>mQ,AutoLockPolicyResponse:()=>$$A,AutofillConfirmationPolicyDefinition:()=>X$j,BannerClosedStatus:()=>Zf,BannerGroupTimeouts:()=>D0A,BannerInstance:()=>R0A,BannerInstances:()=>$X,BaseCreateManagedCredential:()=>qT,BaseEncryptedData:()=>mw,BaseManagedCredential:()=>Mf,BaseManagedCredentialAccessor:()=>Gq,BasePerson:()=>HC,BaseUpdatedManagedCredential:()=>xT,BeginDomainVerificationResponse:()=>G_,BillingInfo:()=>WbA,BillingSettings:()=>JbA,BillingSupportInfo:()=>x1A,BleAuthenticatorTransport:()=>lyA,BrexClientInfoResponse:()=>M1A,BrexRefreshToken:()=>H1A,BrexRequestAccessTokenResponse:()=>K1A,BrexVerifier:()=>S1A,CheckDomainAvailabilityResponse:()=>r0A,CheckDomainRequest:()=>zbj,CliIntegrationPolicyDefinition:()=>swA,CliIntegrationPolicyResponse:()=>lwA,ClientRestrictionSettings:()=>ZbA,CodeResponse:()=>dC,CombinedObjectAccessor:()=>p$A,CompanyRole:()=>o_,CompleteAuthResponse:()=>uC,CompleteRecoveryRequest:()=>zIj,ConfirmKeyResponse:()=>f0A,CreateAccessorRequest:()=>jFj,CreateGroupRequest:()=>Dbj,CreateManagedCredential:()=>HFA,CreateProvisioningTokenRequest:()=>MIj,CreateProvisioningTokenResponse:()=>dIA,CreateRecoveryKeyRequest:()=>H8j,CreateRecoveryPolicyRequest:()=>z8j,CreateRecoveryPolicyResponse:()=>t8A,CreateServiceAccountPreflightResponse:()=>t1A,CredentialAssertionResponse:()=>xyj,CredentialBundleAuthResponse:()=>jF,CredentialCreationOptions:()=>fC,CredentialCreationResponse:()=>qyj,DEFAULT_RELEASE_CHANNEL:()=>LC,DataType:()=>Tn,DecryptedMyceliumSecret:()=>y0j,DefaultByCreationParams:()=>Pw,DelegateSessionResponse:()=>F0A,DeleteGroupRequest:()=>_bj,DeleteUsersRequest:()=>w$j,DepartureReason:()=>WZ,DepartureType:()=>JZ,DeveloperEnvironmentsPolicyDefinition:()=>dwA,DeveloperEnvironmentsPolicyResponse:()=>kwA,DeviceEnrollment:()=>B1A,DeviceEnrollmentRequest:()=>c1j,DeviceEnrollmentResponse:()=>m1A,DeviceEnrollmentState:()=>B_,DeviceEnrollmentStateCodec:()=>g_,DeviceEnrollmentStatusResponse:()=>TZ,DiscouragedUserVerificationRequirement:()=>pyA,DsecretProxyResponse:()=>oC,DsecretResponse:()=>nC,DuoResponse:()=>sC,DuoSettings:()=>VT,Durations:()=>VIj,EMAIL_KEY_HANDLE:()=>pV,EamUserRole:()=>PC,EmailDomains:()=>sIA,EmailNotificationTypes:()=>Qq,EnableMfaResponse:()=>KbA,EnableTrustLogRequest:()=>sOj,EncryptedCredentialBundle:()=>_p,EncryptedDeviceCredentials:()=>dyj,EnforcePolicyRequest:()=>eFj,EnforcedPolicy:()=>Qy,EntityCounts:()=>ZT,Event:()=>s0j,ExpiresIn:()=>zW,ExtendedPartialUser:()=>cX,ExtensionAdoptionExtraData:()=>VIA,ExtensionAdoptionPaginationReport:()=>UIA,ExtensionAdoptionReport:()=>XIA,ExtensionAdoptionReportCsv:()=>JIA,ExtensionAllowedPolicyDefinition:()=>O$j,FastmailAccountId:()=>_1A,FastmailVerifier:()=>C1A,Feature:()=>U1A,FeaturesList:()=>BI,Feedback:()=>oyj,File:()=>WX,FileReference:()=>Y0A,FinalizeMspAccountLinkRequestPreflight:()=>s0A,FindSsoGroupDeadlineResponse:()=>GbA,FinishUserConfirmationResponse:()=>uIA,FirewallRule:()=>qC,FirewallRuleScope:()=>Q0A,FirewallRules:()=>xC,GatedFeatureTrial:()=>e0A,GenerateEmailTemplatePreviewRequestIo:()=>ryj,GenericAccountPolicy:()=>pu,GetAccountHandoffCertificateResponse:()=>B8A,GetAccountReportCsvResponse:()=>e_,GetActivationHubTasksResponse:()=>d0A,GetAppCatalogApplicationsResponse:()=>E8A,GetCombinedObjectAccessorsResponse:()=>B$A,GetCredentialsForPolicyResponse:()=>_FA,GetEmailTemplateResponse:()=>V0A,GetEmailTemplatesResponse:()=>U0A,GetGroupMembersCsvResponse:()=>RbA,GetGroupsResponse:()=>Tbj,GetIdentityAccessTokenResponse:()=>p8A,GetIntegrationsResponse:()=>e1A,GetPendingInvitationResponseIo:()=>f$A,GetPolicyListResponseIo:()=>$wA,GetServiceAccountsResponse:()=>A1A,GetSignInAttemptRequest:()=>e1j,GetSignInAttemptsResponse:()=>n1A,GetSignInAttemptsResponseV2:()=>o1A,GetSlackChannelsResponse:()=>vZ,GetSuggestedDomainResponse:()=>a0A,GetUserApplicationsResponse:()=>m8A,GetUserCredentialsResponse:()=>DyA,GetVerifiedDomainsResponse:()=>b_,GetWebAuthnChallengeResponse:()=>NbA,GetXamAccessTokenResponse:()=>WjA,Group:()=>$q,GroupApplicationAssignmentRequest:()=>Hbj,GroupMembership:()=>dr,HibpBreach:()=>lAA,HibpDomainReport:()=>I1A,HibpDomainReportCsv:()=>P1A,HibpUser:()=>v_,HostedProvisioningAttrs:()=>nI,HostedProvisioningIntegration:()=>oIA,HostedProvisioningIntegrationResponse:()=>iIA,HostedProvisioningIntegrationState:()=>cF,HybridAliasAuthenticatorTransport:()=>dyA,HybridAuthenticatorTransport:()=>cyA,IconSet:()=>Jf,IdentityProviders:()=>Hs,IncomingPackage:()=>_C,IncomingPackageOverviewV2:()=>WW,IncomingPackageV2:()=>G$A,InsightsBreachesSortAttrs:()=>kJ,InsightsPaginationQueryParams:()=>Uw,InsightsReportsSortAttrs:()=>uJ,InsightsSortingQueryParams:()=>Cp,InsightsTeamReport:()=>ayA,InsightsTeamReportCsv:()=>nyA,InsightsTeamReportOverview:()=>tyA,InsightsTeamReportUser:()=>ryA,InsightsTeamUsageIssueType:()=>pJ,InsightsTeamUsageSortAttrs:()=>EJ,InsightsTopSharedCredential:()=>oyA,Integration:()=>j1A,InternalAuthenticatorTransport:()=>kyA,InviteSettings:()=>XbA,ItemDetailResponse:()=>Z0A,ItemHistoryMetadata:()=>AyA,ItemHistoryResponse:()=>jyA,ItemPasswordPolicyDefinition:()=>U$A,ItemPasswordPolicyResponse:()=>V$A,ItemShareAvailableTo:()=>uu,ItemShareRecipientType:()=>yk,ItemShareState:()=>$C,ItemUsageAction:()=>Ww,ItemsResponse:()=>eJ,KolideApp:()=>NyA,LastAuthDeviceForEnrollment:()=>p1A,LastAuthDeviceType:()=>m_,LastAuthDeviceTypeCodec:()=>E1A,LastViewedReport:()=>NIA,LastViewedReports:()=>LIA,LimitedVaultsResponse:()=>IbA,LinkRequestItem:()=>i$A,LinkedChildAccount:()=>jwA,LocationMeta:()=>$0A,MAX_ALLOWED_FAILED_LOGIN_ATTEMPTS:()=>I$j,MAX_EMAIL_BATCH_SIZE:()=>dI,MINIMUM_CHARACTER_COUNT:()=>z$A,MIN_ALLOWED_FAILED_LOGIN_ATTEMPTS:()=>KC,MIN_LOCKOUT_PERIOD:()=>NC,ManagedAccount:()=>tF,ManagedAccountAccessDetailsResponse:()=>A$A,ManagedAccountGroup:()=>ZyA,ManagedAccountKey:()=>og,ManagedAccountNetSeats:()=>j$A,ManagedAccountState:()=>ti,ManagedAccountUser:()=>YyA,ManagedCompanyAccess:()=>r$A,ManagedCompanyMspGroupPermission:()=>BW,ManagedCompanyMspGroupPermissionsRequest:()=>d$j,ManagedCredentialAccessor:()=>fq,ManagedCredentialPolicy:()=>Hf,ManagedCredentialSource:()=>zz,ManagedCredentialState:()=>hT,MasterPasswordPolicySettings:()=>WT,MasterPasswordPolicyType:()=>Iq,MfaCodeParams:()=>TbA,MfaConfig:()=>MbA,MfaParams:()=>SbA,MfaResponse:()=>kC,MfaTotpParams:()=>CbA,MfaType:()=>Oi,MfaWebAuthnParams:()=>_bA,MigrateUsersData:()=>KIj,MigrateUsersResponse:()=>EIA,MigratingUserState:()=>mI,ModernAppVersion:()=>pC,MonitoringStatus:()=>t$A,MsgA:()=>T0A,MsgB:()=>C0A,MspGroupPermissionsRequest:()=>c$j,MspGroupPermissionsResponse:()=>n$A,MspInfo:()=>VbA,MspLinkRequestResponse:()=>o$A,MspUserPermissionsResponse:()=>a$A,MustEnableResponse:()=>cC,MyceliumChannelHelloResponse:()=>FX,MyceliumChannelJoinResponse:()=>bX,MyceliumChannelMsgTwoResponse:()=>w0A,MyceliumChannelMsgnResponse:()=>yX,MyceliumChannelReplyResponse:()=>y0A,MyceliumChannelStartResponse:()=>fX,MyceliumChannelSwitchSourceErrResponse:()=>k0j,MyceliumDelegatedSession:()=>I0A,MyceliumLocationMeta:()=>b0A,MyceliumRefreshTokenDetails:()=>P0A,NativeOidcState:()=>Byj,NeedsKolideHealthCheckPolicyDefinition:()=>J$A,NeedsKolideHealthCheckPolicyResponse:()=>Q$A,NeedsKolideHealthCheckUpdatedByUser:()=>W$A,NfcAuthenticatorTransport:()=>uyA,NotificationType:()=>yW,ObjectData:()=>Zw,ObjectDataAccess:()=>ig,ObjectDataAccessAcl:()=>ai,ObjectDataAccessAclCodec:()=>c$A,ObjectDataAccessAclScopeCodec:()=>d$A,ObjectDataAccessPreflightResponse:()=>h$A,ObjectDataAccessScope:()=>Di,ObjectDataAccessScopeCodec:()=>RC,ObjectDataAccessState:()=>aF,ObjectDataAccessStateCodec:()=>k$A,ObjectDataAccessorType:()=>fl,ObjectDataAccessorTypeCodec:()=>OW,ObjectDataAccessorsForObjectTypeResponse:()=>TC,ObjectDataAcl:()=>OC,ObjectDataAclCodec:()=>B$j,ObjectDataPreflightResponse:()=>g$A,ObjectDataValue:()=>u$A,ObjectDataWithSpec1Response:()=>q$A,ObjectType:()=>ss,OidcAuth:()=>Vw,OidcAuthMethod:()=>CyA,OptionalVaultReportingSyncResponse:()=>X1A,Package:()=>x$A,PackageOverviews:()=>QW,PartialUser:()=>uo,PasswordAuth:()=>yC,PasswordAuthMethod:()=>TyA,PatchVaultItemsResponse:()=>eyA,PendingVerifiedDomain:()=>F_,PerfTrace:()=>nOj,Person:()=>sg,PlatformSecuritySettings:()=>xwA,PolicyContextMap:()=>zC,PolicyContexts:()=>ke,PolicyListItem:()=>ywA,PolicyNames:()=>ee,PolicyState:()=>BT,PolicyTemplate:()=>tI,PolicyTemplateChildAccountsResponse:()=>ewA,PolicyTemplatePoliciesResponse:()=>twA,PolicyTemplatePolicy:()=>Y$A,PolicyTemplatesPagination:()=>Z$A,PolicyTemplatesResponse:()=>AwA,PolicyType:()=>gT,PostRecoveryKeyUserRegistrationRequest:()=>rOj,PostRecoveryKeyUserRegistrationResponse:()=>k8A,PreferredUserVerificationRequirement:()=>myA,PreviewGroup:()=>$bA,PreviewUser:()=>wbA,ProvisionCredentialBundle:()=>kIA,ProvisionedGroupKeyset:()=>tIA,ProvisionedKeys:()=>rIA,ProvisionedVaultKey:()=>eIA,ProvisioningGroupPlaintextKeyset:()=>cIA,ProvisioningRegistrationData:()=>HIj,ProvisioningServiceIdp:()=>Kp,ProvisioningSettings:()=>JT,PsaPlaintextKeyset:()=>aIA,PublicKeyCredentialCreationOptions:()=>IyA,PublicKeyCredentialDescriptor:()=>$yA,PublicKeyCredentialParameters:()=>qyA,PublicKeyCredentialRpEntity:()=>xyA,PublicKeyCredentialType:()=>GC,PublicKeyCredentialUserEntity:()=>vyA,ReadOnlyAuth:()=>SyA,RecoverableGroupKeyset:()=>mIA,RecoverableKeys:()=>SY,RecoverableKeysForPeople:()=>gIA,RecoverablePackageKey:()=>BIA,RecoverableVaultKey:()=>pIA,RecoveryAttempt:()=>o8A,RecoveryAttemptIdentityVerificationCompleteAux:()=>s8A,RecoveryAttemptsResponse:()=>i8A,RecoveryGetAttemptStatusResponse:()=>l8A,RecoveryGetMaterialResponse:()=>d8A,RecoveryKeyResponse:()=>e8A,RecoveryKeyStartRequest:()=>R8j,RecoveryKeyState:()=>OjA,RecoveryPolicyResponse:()=>n8A,RecoveryPolicyUuidsResponse:()=>a8A,RecoverySrpARequest:()=>T8j,RecoverySrpBResponse:()=>A8A,RecoverySrpConfirmKeyRequest:()=>_8j,RecoverySrpConfirmKeyResponse:()=>j8A,RegisterDetailedVaultReportingKeyRequest:()=>H1j,RegisterDetailedVaultReportingKeyResponse:()=>V1A,RegisterProvisioningResponse:()=>nIA,ReleaseChannelsPolicyDefinition:()=>wQ,ReleaseChannelsPolicyResponse:()=>H$A,ReplyToEmailSettings:()=>QbA,ReportAccount:()=>DIA,ReportAccountUser:()=>OIA,ReportCursors:()=>FIA,ReportDashboardOverview:()=>hIA,ReportItem:()=>KY,ReportItemUsage:()=>bIA,ReportOldDevice:()=>MIA,ReportOldDeviceDevice:()=>HIA,ReportOldDevices:()=>KIA,ReportOldDevicesOverview:()=>SIA,ReportOldDevicesOverviewClient:()=>_IA,ReportOverview:()=>CIA,ReportSectionAccountOverview:()=>RIA,ReportSectionExtendedAccountOverview:()=>TIA,ReportSectionUserItemUsage:()=>vIA,ReportSectionUserOverview:()=>qIA,ReportSectionVaultItemUsage:()=>wIA,ReportSectionVaultOverview:()=>yIA,ReportSections:()=>sI,ReportUser:()=>GIA,ReportUserItemUsage:()=>xIA,ReportUserItemUsageOverview:()=>fIA,ReportVault:()=>IIA,ReportVaultItemUsage:()=>$IA,ReportVaults:()=>PIA,ReportingPolicyDefinition:()=>EwA,ReportingPolicyResponse:()=>pwA,RequestError:()=>jS,RequesterLocation:()=>ZjA,RequiredUserVerificationRequirement:()=>ByA,ResidentKeyRequirement:()=>GJ,RestrictFailedLoginAttemptsPolicyDefinition:()=>O$A,RestrictFailedLoginAttemptsPolicyResponse:()=>R$A,SecureRemoteAutofillPolicyDefinition:()=>BwA,SecureRemoteAutofillPolicyResponse:()=>gwA,SecuritySettings:()=>qwA,SecuritySettingsPresetsPolicyDefinition:()=>GwA,SecuritySettingsPresetsPolicyDefinitionV1:()=>vwA,SecuritySettingsPresetsPolicyResponse:()=>fwA,SendMfaCodeResponse:()=>HbA,SendMsgbRequest:()=>w0j,SendTagbRequest:()=>I0j,Sender:()=>v$A,ServiceAccount:()=>YIA,ServiceAccountBillables:()=>lZ,ServiceAccountToken:()=>a_,ServiceAccountType:()=>Gt,ServiceAccountUser:()=>ZIA,ServiceAccountVaultAccess:()=>sZ,ServiceAccountsPartialUser:()=>Hw,SessionKeyRestoreResponse:()=>N1A,SessionKeySaveResponse:()=>OAA,SetUpCredentialBundleRequest:()=>$yj,SetUpCredentialBundleResponse:()=>HyA,SharedCredentialBundle:()=>H0A,SidebarNavPolicy:()=>I$A,SidebarNavigationPoliciesSettings:()=>QT,SignDeviceTrustPublicKeyResponse:()=>N0A,SignInAttemptReasons:()=>Lp,SignInAuxInfoTypes:()=>gg,SignInTokenDetails:()=>du,Signup:()=>uI,SignupFeatureCreditCardForm:()=>i1A,SignupFeatureUnlockWithPasskey:()=>s1A,SignupFeatures:()=>l1A,SlackApp:()=>c_,SlackAppState:()=>Ik,SlackChannel:()=>u_,SlackGroup:()=>p_,SlackNonce:()=>d_,SlackSettings:()=>UT,SlackTeam:()=>E_,SlackUser:()=>k_,SlackUsers:()=>xZ,SrpResponse:()=>G0A,SshBookmarksPolicyDefinition:()=>nwA,SshBookmarksPolicyResponse:()=>owA,SsoApplication:()=>yg,SsoAuthResponse:()=>syA,SsoAuthenticationPolicy:()=>PT,SsoFederationSettings:()=>xbA,SsoGroup:()=>EU,SsoMigrationGracePeriod:()=>Iw,SsoMigrationReportExpiredRecord:()=>h1A,SsoMigrationReportPendingRecord:()=>g1A,SsoMigrationReportSucccessfulRecord:()=>q1A,SsoOidcIdentity:()=>n1j,SsoOidcState:()=>gyj,SsoOidcWellKnownSettingsRequest:()=>bbj,SsoSettings:()=>RT,SsoSignInOptions:()=>yyj,SsoState:()=>OT,SsoValidateResponse:()=>vbA,StandardMfaParams:()=>KT,StartAuthResponse:()=>v0A,StartEmailVerificationRequest:()=>Z8j,StartEmailVerificationResponse:()=>c8A,StartRecoveryResponse:()=>ZPA,SubmitEmailVerificationRequest:()=>jOj,SupportGetAccounts:()=>F1A,SupportInfo:()=>f1A,SupportSettings:()=>XT,TOTP_KEY_HANDLE:()=>EV,TagA:()=>_0A,TagB:()=>S0A,Task:()=>c0A,TeamMemberPoliciesSettings:()=>A0A,TimePeriod:()=>gd,TotpResponse:()=>iC,TraceSubmissionResult:()=>VjA,TrustedDeviceUpgradeEventRequest:()=>kyj,TrustpilotData:()=>$1A,TwoFactorSettings:()=>YbA,UnacceptedLinkRequest:()=>MV,UniqueUserCountForGroupsRequest:()=>Sbj,UniqueUserCountResponse:()=>DbA,UpdateGroupAttrsRequest:()=>Cbj,UpdateGroupMembershipsResponse:()=>oV,UpdateHostedProvisioningIntegration:()=>lIA,UpdateObjectDataRequest:()=>g$j,UpdateSignupRequest:()=>a1j,UpdatedManagedCredential:()=>tFj,UsbAuthenticatorTransport:()=>EyA,User:()=>Dw,UserCombinedObjectDataAccess:()=>DC,UserCombinedObjectDataAccessResponse:()=>m$A,UserCookie:()=>w1A,UserExtensionInstallReport:()=>zIA,UserFilterType:()=>kF,UserFlags:()=>zbA,UserKeysets:()=>KyA,UserMeta:()=>o1j,UserPubKey:()=>b$A,UserSupportInfo:()=>G1A,UserVerificationRequirement:()=>byA,UserWebauthnCredential:()=>FC,ValidatedLinkRequest:()=>o0A,VariantPayload:()=>z1A,Vault:()=>Ii,VaultAccess:()=>fk,VaultClaim:()=>r_,VaultItem:()=>bk,VaultItemTemplate:()=>Wf,VaultItemTemplateAttrs:()=>bbA,VaultItemTemplateIcons:()=>FbA,VaultManagers:()=>O1A,VaultsReportAttributes:()=>cI,VaultsReportTypes:()=>lI,VerificationEvent:()=>iOj,VerifiedDomain:()=>f_,VerifiedDomainType:()=>EI,VerifyMfaResponse:()=>Qf,WatchtowerReportItem:()=>u0A,WatchtowerReportVaultData:()=>k0A,WatchtowerReports:()=>E0A,WatchtowerStats:()=>p0A,WebAuthnResponse:()=>lC,WebauthnAssertion:()=>vJ,WebauthnAuth:()=>Xw,WebauthnAuthMethod:()=>_yA,WebauthnCredentialDescriptor:()=>gyA,WebauthnPublicKeyRequest:()=>hyA,WellKnownUrlRequest:()=>ybj,WellKnownUrlResponse:()=>qbA,acceptLinkRequest:()=>FW,acceptProvision:()=>YC,acknowledgeNotification:()=>IW,activateAccount:()=>yV,activateRecoveryKey:()=>L8j,addCredentialBundle:()=>PJ,addDevice:()=>Lw,addObjectData:()=>AI,addRecoverableMaterial:()=>X8j,addRecoveryKeysetToGroup:()=>cV,addVaultAccess:()=>ST,backfillTrustLog:()=>eeA,beginChangeEmail:()=>vV,beginDomainVerification:()=>pAA,beginRecovery:()=>CY,billing:()=>Ye,cancelChangeEmail:()=>GV,cancelDeviceEnrollment:()=>HZ,cancelMspAccountLinkRequest:()=>NV,cancelRecovery:()=>_Y,changeAccountType:()=>Cw,changeAccountTypeV3:()=>SV,changeDomain:()=>CV,changeTemplatesState:()=>fU,changeUserAvatar:()=>eI,changeUserName:()=>jI,checkDomainAvailability:()=>DV,checkProvisioningEmailVerification:()=>qY,completeActivationHubTask:()=>aX,completeAuth:()=>qX,completeChangeEmail:()=>LT,completeDomainVerification:()=>mAA,completeProvisionedUserSignup:()=>IY,completeRecovery:()=>iI,completeReplyToConfirmation:()=>LJ,completeUserProvision:()=>fY,confirmKeyAuth:()=>hX,confirmUsersWithMemberships:()=>oQ,confirmUsersWithMembershipsAndVaultAccessList:()=>sQ,confirmUsersWithVaultAccessList:()=>iQ,continueRecovery:()=>ZC,convertPwnedApiResponseToHashes:()=>y1A,createAccountGatedFeatureTrialAction:()=>zjA,createAccountMspLinkRequest:()=>zV,createAccountMspLinkRequestPreflight:()=>LV,createAccountTemplateConfig:()=>YV,createAccountTransferVaultPreflight:()=>CU,createGroup:()=>rV,createItemShare:()=>YJ,createLaunchSession:()=>dW,createManagedAccount:()=>sW,createManagedCredentialAccessors:()=>_z,createManagedCredentials:()=>Xz,createMonitoringCheck:()=>Yw,createObjectData:()=>_W,createObjectDataAccess:()=>DW,createPolicyTemplate:()=>N$j,createProvisionUser:()=>lY,createProvisioningIntegrationToken:()=>$Y,createProvisioningProgressStep:()=>qAA,createRecoveryKey:()=>M8j,createRecoveryPolicy:()=>U8j,createServiceAccountPreflight:()=>kZ,createServiceAccountV3:()=>cZ,createSsoApp:()=>CjA,createSsoSettings:()=>pU,createVault:()=>_U,createVaultForAccountTransfer:()=>SU,createWatchtowerPubkey:()=>sX,declineLinkRequest:()=>bW,declineMspAccountLinkRequest:()=>UV,delegateSession:()=>Nw,deleteAccessorFromVault:()=>LU,deleteAccount:()=>PV,deleteAccountCookie:()=>iAA,deleteAllDevices:()=>Z0j,deleteCompanyLogo:()=>jX,deleteDevice:()=>SX,deleteEmailNotificationSettings:()=>uOj,deleteGroup:()=>aV,deleteInactiveDevices:()=>HX,deleteInviteVault:()=>XJ,deleteItemShare:()=>eW,deleteManagedCredentialAccessor:()=>Hz,deleteObjectData:()=>MW,deleteObjectDataAccess:()=>TW,deleteRecoveryKey:()=>N8j,deleteSsoApp:()=>_jA,deleteUserCookie:()=>sAA,deleteUserCredential:()=>$J,deleteUsers:()=>nQ,deleteVault:()=>NU,deleteVaultItemHistory:()=>cJ,deleteVaultPreflight:()=>KU,deleteVerifiedDomain:()=>hAA,destroySessionRestorationKey:()=>C1j,disableMfa:()=>BV,disableServiceAccountAccess:()=>QU,disableTravelSafe:()=>JU,distributors:()=>Yq,enableMfa:()=>mV,enableMfaWithAuth:()=>vX,enableServiceAccountAccess:()=>WU,enableTravelSafe:()=>XU,enableTrustLog:()=>jeA,endpointForFile:()=>Z,enforceManagedCredentialPolicy:()=>Lz,extendSession:()=>Mw,externalUserActorType:()=>i0j,finalizeMspAccountLinkRequest:()=>XV,finalizeMspAccountLinkRequestPreflight:()=>VV,findFirstDateOfDuration:()=>XIj,findGroups:()=>YU,findOldestUsageDate:()=>JIj,findPartialUsers:()=>eC,findProvisionedUserState:()=>xY,findRecoveryDetails:()=>OY,findVaults:()=>Ow,finishConfirmationSsoUser:()=>vY,finishUserConfirmation:()=>wY,generateEmailTemplatePreview:()=>XX,generateReplyToConfirmation:()=>NJ,getAccountApplications:()=>HjA,getAccountBasedFeaturesFromService:()=>CAA,getAccountHandoffCertificate:()=>LjA,getAccountMspLinkRequest:()=>KV,getAccountOverview:()=>JV,getAccountReport:()=>JY,getAccountReportCsv:()=>YY,getAccountShareSettings:()=>rW,getAccountTemplateConfig:()=>QV,getAccountTemplates:()=>vU,getAccountTransfersDetails:()=>xAA,getAccountUserCounts:()=>HV,getAccountWithAttrs:()=>bV,getActivationHubTasks:()=>rX,getActivityFeed:()=>mX,getActivityLogDefaultStartTime:()=>aC,getAffectedUserCounts:()=>wbj,getAllObjectDataWithDataSpec1:()=>NW,getAllPoliciesForCurrentAccount:()=>WQ,getAllowAcocuntCreationPolicy:()=>fQ,getAllowMapsPolicy:()=>RQ,getAppCatalogApplications:()=>RjA,getAppDetails:()=>MjA,getAppLauncherAllowedPolicy:()=>_$j,getAppLauncherAllowedPolicyLocked:()=>H$j,getAuthMethods:()=>IJ,getAutoDeleteSuspendedUsersPolicies:()=>bQ,getAutoLockPolicy:()=>gQ,getAutoLockPolicyDefaultDefinition:()=>BQ,getAutofillConfirmationPolicyApi:()=>J$j,getAutomatedQuest:()=>PjA,getBannersForSession:()=>wX,getBrexClientInfo:()=>wAA,getCentralAccountHubToken:()=>YjA,getCliIntegrationPolicy:()=>LQ,getCombinedObjectAccessors:()=>HW,getCommonPasswordsList:()=>jAA,getCreateVaultPreflight:()=>TU,getDashboardReport:()=>MY,getDateForVaultsFilter:()=>uw,getDefaultTemplate:()=>CT,getDefaultVaultPermissions:()=>RAA,getDeletedVaultItems:()=>sJ,getDetailedVaultReportingPubkeyV2:()=>HAA,getDeveloperEnvironmentsPolicy:()=>UQ,getDeveloperReport:()=>PX,getDeveloperServiceAccountsReport:()=>CX,getDeveloperServiceAccountsReportCsv:()=>_X,getDeveloperSharedVaultsReport:()=>DX,getDeveloperSharedVaultsReportCsv:()=>TX,getDeveloperUsersReport:()=>OX,getDeveloperUsersReportCsv:()=>RX,getDeviceEnrollmentStatus:()=>CZ,getDeviceTrustAccessToken:()=>QjA,getEmailAccountConfig:()=>tX,getEmailNotificationSettings:()=>cOj,getEmailSubscriptions:()=>NX,getEmailTemplateByUuid:()=>UX,getEmailTemplates:()=>zX,getEncryptedCredentialBundle:()=>RJ,getEnrollment:()=>KZ,getEveryoneVault:()=>PU,getExtensionAdoptionOverview:()=>rZ,getExtensionAdoptionReport:()=>tZ,getExtensionAdoptionReportCsv:()=>aZ,getExtensionAllowedPolicy:()=>R$j,getExtensionAllowedPolicyLocked:()=>T$j,getFeatures:()=>TAA,getFile:()=>BC,getFileIdsFromItemUuid:()=>YX,getFileKey:()=>gC,getFileV2:()=>QX,getFileWithRedirect:()=>ZX,getFilteredActivityLogReports:()=>uX,getFilteredActivityLogTotalReports:()=>EX,getFirewallRules:()=>jJ,getGeneratedPasswordsVault:()=>OU,getGridSlackChannels:()=>FZ,getGridSlackGroups:()=>bZ,getGridSlackTeams:()=>$Z,getGridSlackUsers:()=>yZ,getGroup:()=>AV,getGroupDeadline:()=>hU,getGroupMembersCsv:()=>dV,getGroupMspPermissions:()=>xW,getGroupPubKeys:()=>jV,getGroups:()=>MT,getHasDetailedVaultReportingKeyset:()=>MAA,getHibpDomainReport:()=>dAA,getHibpDomainReportCsv:()=>kAA,getHibpReport:()=>cAA,getHostedProvisioningIntegration:()=>yY,getIcons:()=>xU,getIdentityAccessToken:()=>DjA,getIncomingPackage:()=>XW,getIncomingPackageV2:()=>F$j,getIncomingPackages:()=>VW,getIncomingPackagesV2:()=>G$j,getInsightsTeamReport:()=>BJ,getInsightsTeamReportCsv:()=>gJ,getInsightsTeamReportOverview:()=>mJ,getInsightsTopSharedCredentials:()=>hJ,getIntegrations:()=>dZ,getInviteVaults:()=>UJ,getItemPasswordPolicy:()=>TQ,getItemReportWithCursors:()=>LY,getItemReportWithFilters:()=>zY,getItemShareAuditDetails:()=>AW,getItemSharePreflight:()=>QJ,getIterableQuests:()=>P8j,getKeysets:()=>aW,getKolideAgentEnrollmentToken:()=>eyj,getKolideApps:()=>e$j,getLastViewedReports:()=>eZ,getLinkRequests:()=>gW,getManagedAccountAccessDetails:()=>uW,getManagedAccountDetails:()=>kW,getManagedAccounts:()=>iW,getManagedAccountsNetSeats:()=>EW,getManagedCredential:()=>Uz,getManagedCredentialAccessors:()=>Cz,getManagedCredentialPolicies:()=>Kz,getManagedCredentialPolicy:()=>Nz,getManagedCredentials:()=>Vz,getManagedCredentialsForPolicy:()=>Wz,getManagedVault:()=>wU,getMfa:()=>hV,getMfaConfig:()=>qV,getModernAppVersions:()=>IX,getMonitoringStatus:()=>mW,getMoreIncomingPackages:()=>f$j,getMspLinkRequest:()=>fW,getNeedsKolideHealthCheckPolicy:()=>SQ,getNotifications:()=>wW,getNotifierUrl:()=>l$A,getObjectDataAccess:()=>CW,getObjectDataAccessForUserAndType:()=>q$j,getObjectDataAccessPreflight:()=>oF,getObjectDataAccessorsForObjectType:()=>SW,getObjectDataPreflight:()=>CC,getOldDevicesReport:()=>QY,getOverviewReport:()=>WY,getPackagesForVaultItem:()=>JW,getPartialUsers:()=>rg,getPartialUsersCount:()=>tC,getPasskeySitesList:()=>rAA,getPassphraseWordList:()=>AAA,getPendingDeviceEnrollments:()=>SZ,getPendingInvitation:()=>AQ,getPendingInvitations:()=>CJ,getPersonalVault:()=>IU,getPolicyList:()=>QQ,getPolicyTemplateChildAccounts:()=>V$j,getPolicyTemplatePolicies:()=>K$j,getPolicyTemplates:()=>M$j,getPreAuthFeatures:()=>_AA,getPreAuthFeaturesFromService:()=>SAA,getPreviousVersionOfItem:()=>iJ,getProvisionDetailsV2:()=>mY,getProvisionedPersonalVault:()=>GY,getProvisioningIntegrationExists:()=>pY,getPwnedHashList:()=>ZZ,getRecoverableKeysForPeople:()=>HY,getRecoveryAttempts:()=>Q8j,getRecoveryKey:()=>K8j,getRecoveryPolicies:()=>J8j,getRecoveryPolicy:()=>W8j,getReleaseChannelsPolicy:()=>PQ,getReleaseChannelsPolicyDefaultDefinition:()=>IQ,getReportingPolicy:()=>Q$j,getResendDetails:()=>EY,getRestrictFailedLoginAttemptsPolicy:()=>vQ,getSecureRemoteAutofillPolicy:()=>XQ,getSecuritySettingsPresetsPolicy:()=>jwj,getServiceAccount:()=>uZ,getServiceAccounts:()=>kI,getShareHistoryForItem:()=>WJ,getShareSeviceAuthToken:()=>jW,getSidebarNavPolicies:()=>qQ,getSignInAttempts:()=>t1j,getSignInAttemptsV2:()=>r1j,getSignupDetails:()=>s_,getSlackApp:()=>IZ,getSlackChannels:()=>fZ,getSlackGroups:()=>wZ,getSlackUsers:()=>GZ,getSshBookmarksPolicy:()=>KQ,getSsoMigrationExpiredReport:()=>v1j,getSsoMigrationPendingReport:()=>q1j,getSsoMigrationReportGroups:()=>B1j,getSsoMigrationReportOverview:()=>E1j,getSsoMigrationSuccessfulReport:()=>f1j,getSsoSettings:()=>DT,getSuggestedDomain:()=>TV,getSupportAccountsList:()=>VZ,getSystemVault:()=>$U,getTrustpilotReviewData:()=>aAA,getTwoFactorSitesList:()=>tAA,getUser:()=>rQ,getUserApplications:()=>TjA,getUserCombinedObjectDataAccess:()=>RW,getUserCookies:()=>nAA,getUserCredentials:()=>yJ,getUserItemUsageOverview:()=>UY,getUserMspPermissions:()=>qW,getUserProvisionedKeys:()=>FY,getUserPubKeys:()=>aQ,getUserReport:()=>NY,getVault:()=>yU,getVaultAccessForAdmin:()=>HU,getVaultItemDetails:()=>aJ,getVaultItemHistory:()=>oJ,getVaultItemVersion:()=>nJ,getVaultItems:()=>rJ,getVaultItemsOverviews:()=>tJ,getVaultManagers:()=>EAA,getVaultReport:()=>VY,getVaultReportingSync:()=>NAA,getVaultUserAccessCount:()=>MU,getVaults:()=>_T,getVaultsByCreation:()=>bU,getVaultsForAccountTransfer:()=>FU,getVaultsReport:()=>XY,getVerificationActionSummary:()=>AeA,getVerifiedDomains:()=>BAA,getWatchtowerData:()=>eAA,getWatchtowerPubkey:()=>jC,getWatchtowerReport:()=>oX,getWatchtowerStats:()=>iX,getWebAuthnChallenge:()=>Kbj,inviteUsersViaEmail:()=>SJ,inviteViaSlack:()=>_J,isValidReportParams:()=>j_,joinAccount:()=>$V,kickoffDeviceEnrollment:()=>DZ,legacySignUpAccount:()=>pZ,lockedOutDeleteAccount:()=>RV,lookUpInvitation:()=>DJ,lookUpTeamInvitation:()=>TJ,markAwayForTravel:()=>cQ,markBackFromTravel:()=>dQ,markGroupReadyForPurging:()=>nV,markPackageAsRead:()=>YW,markSignatureInvalid:()=>NZ,migrateUsersToHostedProvisioning:()=>PY,myceliumChannelSendMsgNu:()=>h0j,myceliumChannelSendMsgNv:()=>v0j,myceliumChannelSendReplyAndJoinV:()=>m0j,myceliumChannelStartU:()=>l0j,myceliumChannelStartV:()=>c0j,myceliumChannelSwitchRegionU:()=>d0j,myceliumCloseChannelU:()=>b0j,myceliumCloseChannelV:()=>F0j,myceliumGetHelloU:()=>E0j,myceliumGetHelloV:()=>u0j,myceliumGetMsgNu:()=>g0j,myceliumGetMsgNv:()=>x0j,myceliumGetMsgTwoV:()=>q0j,myceliumGetReconnectTokenU:()=>f0j,myceliumGetReconnectTokenV:()=>G0j,myceliumGetReplyU:()=>B0j,myceliumPutReplyU:()=>p0j,parseUrlSearchParamsFromObject:()=>F$A,patchApplicationDeviceCheckStatus:()=>NjA,patchGroupMemberships:()=>sV,patchMigratingUserState:()=>GAA,patchSsoApp:()=>SjA,patchUserMemberships:()=>lV,patchVaultItems:()=>dJ,performBannerAction:()=>EC,postAccount:()=>l_,postAuth:()=>gX,postBrexRefreshToken:()=>$AA,postBrexVerifier:()=>yAA,postFastmailRefreshToken:()=>bAA,postFastmailVerifier:()=>FAA,postFirewallRules:()=>AJ,postHibpDomainReportNotify:()=>uAA,postImage:()=>_V,postMigratingUsers:()=>vAA,postOidcWellKnownUrl:()=>qU,postPurgeDeletedVaultItems:()=>lJ,postSlackAccessToken:()=>RZ,postSlackNonce:()=>OZ,postTemplate:()=>GU,postUniqueUserCountForGroups:()=>kV,promptConfirmChangeEmail:()=>fV,publishCompanyLogo:()=>eX,putApplicationGroupAssignments:()=>KjA,putGroupApplicationAssignment:()=>uV,putVaultReportingSnapshotsV2:()=>LAA,reactivateUsers:()=>kQ,reauthorizeDevice:()=>MX,receiveMsgA:()=>O0j,receiveMsgB:()=>D0j,receiveSharedCredentialBundle:()=>H0j,receiveTagA:()=>C0j,receiveTagB:()=>S0j,recoveryKeyAuthV1Begin:()=>C8j,recoveryKeyAuthV1ConfirmKey:()=>S8j,recoveryKeyBeginAttempt:()=>D8j,recoveryKeyGetAttemptStatus:()=>Y8j,recoveryKeyGetMaterial:()=>tOj,recoveryKeyPostRegistration:()=>aOj,recoveryKeyStartEmailVerification:()=>AOj,recoveryKeySubmitEmailVerification:()=>eOj,recoveryVerifyEmailAuth:()=>TY,recoveryVerifyEmailResend:()=>DY,recoveryVerifyEmailStart:()=>RY,regenerateSignUpLink:()=>zJ,registerDetailedVaultReportingKey:()=>KAA,registerProvisioningIntegration:()=>bY,registerServiceAccountToken:()=>n_,registerWebauthnCredential:()=>FJ,regularUserActorType:()=>o0j,removePackageV2:()=>ZW,removePackages:()=>SC,removePolicyTemplateDefinition:()=>U$j,renameServiceAccountToken:()=>nZ,reportAuditEvent:()=>pX,reportItemUsage:()=>Tyj,reportManagedCredentialUsage:()=>pW,reportOutdatedBrowser:()=>LW,reportUsoAction:()=>PAA,requestAccountDeletion:()=>XZ,requestBrexAccessToken:()=>IAA,requestSupportEmail:()=>UZ,require2FAOnNextSignIn:()=>KX,resendAllUsersProvision:()=>uY,resendInvitations:()=>MJ,resendProvisioningEmailVerification:()=>hY,resendUserProvision:()=>kY,resendVerificationEmail:()=>qZ,resetEmailNotificationSettings:()=>dOj,restoreSessionRestorationKey:()=>T1j,revokeAllServiceAccountTokensForAccount:()=>iZ,revokeInvitations:()=>KJ,revokeServiceAccountToken:()=>oZ,saveNotificationSettings:()=>PW,saveSessionRestorationKey:()=>R1j,saveSessionRestorationKeyU:()=>D1j,searchGroupsCount:()=>ZU,sendFeedback:()=>JX,sendMfaCode:()=>gV,sendMsgA:()=>P0j,sendMsgB:()=>R0j,sendNoSigninPastMonthEmail:()=>jZ,sendPackageV2:()=>v$j,sendPackages:()=>UW,sendPerformanceTraces:()=>XjA,sendPreAuthPerformanceTraces:()=>JjA,sendProvisionStartedConfirmation:()=>BY,sendProvisionedConfirmation:()=>gY,sendSsoMigrationReminderEmail:()=>g1j,sendTagA:()=>T0j,sendTagB:()=>_0j,sendTestEmailWithOverrides:()=>VX,sendUnredeemedFamilyAccountEmail:()=>AZ,sendUnusedPrivateVaultEmail:()=>ZY,setUserCookie:()=>oAA,setupCredentialBundle:()=>OJ,setupMsp:()=>hW,shareCredentialBundle:()=>M0j,signDeviceTrustPublicKey:()=>Ayj,signOut:()=>Kw,signUpAccount:()=>mZ,signUpAndGetInfo:()=>hZ,signUpUser:()=>i_,ssoValidateEnd:()=>gU,ssoValidateStart:()=>BU,startAuth:()=>iu,startOidcAuth:()=>qJ,startUserProvision:()=>cY,submitDepartureSurvey:()=>QZ,submitNewUserAuth:()=>GX,suspendMigratedUser:()=>fAA,suspendUserProvision:()=>dY,suspendUsers:()=>lQ,teamInvitePerson:()=>HJ,timePeriodToDate:()=>A_,trackIterableQuestEvent:()=>O8j,trustlogRequestCallback:()=>eS,unlinkManagedAccount:()=>cW,unsafeCancelDeviceEnrollment:()=>MZ,unsafeGetDeviceEnrollmentStatus:()=>_Z,updateAccount:()=>wV,updateAccountGatedFeatureTrialAction:()=>UjA,updateAccountShareSettings:()=>tW,updateAccountTemplateConfig:()=>ZV,updateAllowAccountCreationPolicy:()=>FQ,updateAllowMapsPolicy:()=>DQ,updateAppLauncherAllowedPolicy:()=>S$j,updateAutoDeleteSuspendedUsersPolicies:()=>yQ,updateAutoLockPolicy:()=>hQ,updateAutofillConfirmationPolicyApi:()=>W$j,updateBillingSettings:()=>IV,updateBulkGroupVaultAccessPermissions:()=>VU,updateCliIntegrationPolicy:()=>zQ,updateDefaultVaultPermissions:()=>DAA,updateDeveloperEnvironmentsPolicy:()=>VQ,updateEmailNotificationSettings:()=>kOj,updateEmailSubscriptions:()=>LX,updateExtensionAllowedPolicy:()=>D$j,updateGroupAttrs:()=>eV,updateGroupMembershipRole:()=>iV,updateGroupMspPermissions:()=>GW,updateGroupPermissions:()=>tV,updateGroupVaultAccessPermissions:()=>UU,updateHostedProvisioningIntegration:()=>oI,updateInviteVault:()=>VJ,updateItemPasswordPolicy:()=>CQ,updateManagedAccount:()=>lW,updateManagedCompanyMspPermissions:()=>vW,updateManagedCredential:()=>Jz,updateManagedCredentialAccessor:()=>Sz,updateNeedsKolideHealthCheckPolicy:()=>HQ,updateObjectData:()=>KW,updatePersonVaultAccessPermissions:()=>zU,updatePolicyTemplateName:()=>L$j,updateReleaseChannelsPolicy:()=>OQ,updateReportingPolicy:()=>Y$j,updateRestrictFailedLoginAttemptsPolicy:()=>GQ,updateSecureRemoteAutofillPolicy:()=>JQ,updateSecuritySettingsPresetsPolicy:()=>ewj,updateServiceAccount:()=>EZ,updateSidebarNavPolicies:()=>xQ,updateSignup:()=>BZ,updateSignupAccountType:()=>gZ,updateSlackApp:()=>PZ,updateSshBookmarksPolicy:()=>NQ,updateSsoSettings:()=>mU,updateTemplatePolicyDefinition:()=>z$j,updateUser:()=>uQ,updateUserCredential:()=>wJ,updateVault:()=>RU,updateVaultClientAccess:()=>DU,updateVerifiedDomain:()=>gAA,upgradeGuestToMember:()=>EQ,uploadCompanyLogo:()=>AX,uploadFile:()=>hC,uploadWatchtowerReport:()=>nX,userFilterTypeOptions:()=>WIj,validateItemShareRecipients:()=>ZJ,verifyLockedOutAccountDeletion:()=>OV,verifyMfa:()=>xX,verifyOidc:()=>xJ,verifyPasskey:()=>fJ,verifyTotp:()=>xV,verifyWebauthnCredentialAttestation:()=>bJ});var Xh=J(tA()),Qy=Xh.readonly(Xh.type({enforced:Xh.boolean,fromTemplate:Xh.boolean}),"EnforcedPolicy");var pA=J(tA());var S6={};er(S6,{Auk:()=>rr,CredentialBundle:()=>yi,CryptoVersion:()=>hl,CurrentItemSnapshotPayloadVersion:()=>Uf,DEFAULT_SRP_METHOD:()=>jT,DeviceKey:()=>_s,EncryptedVaultItemSnapshot:()=>Fw,EncryptedVaultItemSnapshotWithServerData:()=>jbA,Envelope:()=>Cs,EnvelopeC:()=>gq,InputRecoveryKey:()=>xq,JwkX25519PriKey:()=>yT,JwkX25519PubKey:()=>zf,KeyDerivationInfo:()=>Y4,ManagedAccountKey:()=>Ts,ManagedAccountLinkAuthKey:()=>xk,ManagedAccountPublicKeyMac:()=>nT,ManagedCredentialKey:()=>Lf,ManagedCredentialPolicyKey:()=>WB,PAPER_KEY_PREFIX:()=>qq,RECOVERY_CODE_LENGTH:()=>wFA,RecoveryKey:()=>ld,SecretKey:()=>ba,SecretKeyFormat:()=>Zn,ServiceAccountThrottleKeypair:()=>Tf,SnapshotWatchtowerReport:()=>oU,SrpMethod:()=>bi,SrpMethodPrefix:()=>tu,SrpStarter:()=>KB,SrpV:()=>NB,SrpX:()=>Ai,TagRouteKey:()=>_f,UrlAutofillParentKey:()=>Cf,UrlAutofillSessionKey:()=>hq,VaultItemSnapshot:()=>fw,VaultItemSnapshotEnvelope:()=>$p,VaultItemSnapshotServerData:()=>$T,VaultItemSnapshotWithAdditionalAndServerData:()=>ebA,VaultReportingPrivateKey:()=>Rp,VaultReportingPublicKey:()=>nu,VaultSnapshotAdditionalData:()=>nw,exactPartial:()=>Ofj,exactType:()=>aT,password_key_derivation_consts:()=>Dp,unsafePrimitives:()=>dn});var LB=J(tA());var q={};er(q,{ACCOUNT_NAME_MAX_LENGTH:()=>AfA,ClientInfo:()=>tz,ClientShortCode:()=>Bk,ClientShortCodeCodec:()=>vfA,CountryCode:()=>oq,CountryRequiresProvince:()=>_vj,DEBUG:()=>Evj,DEVICE_ENROLLMENT_CODE_LENGTH:()=>$fA,DOMAIN_INVALID_CHARS:()=>dvj,DOMAIN_MAX_LENGTH:()=>y3,DOMAIN_MIN_LENGTH:()=>lvj,ExceptionType:()=>$n,IsoStringDate:()=>co,LoggableError:()=>xe,MULTIPLE_FORWARD_SLASH_REGEX:()=>efA,MasterPasswordPolicyMinLength:()=>z4,NEVER:()=>pq,OpUserAgentConfig:()=>$Gj,OptionalIsoStringDate:()=>KD,PASS_CHAR_SET:()=>ju,PROMO_CODE_MAX_LENGTH:()=>xvj,RfcNumericDate:()=>a$,SERVICE_ACCOUNT_NAME_MAX_LENGTH:()=>ovj,SERVICE_ACCOUNT_TOKEN_NAME_MAX_LENGTH:()=>ivj,SHORT_DOMAIN_MIN_LENGTH:()=>cvj,UNSANITARY_CHARACTERS_REGEX:()=>jfA,URL_MAX_LENGTH:()=>svj,UUID_LENGTH:()=>dfA,VAULT_AND_GROUP_DESC_MAX_LENGTH:()=>uvj,VAULT_AND_GROUP_NAME_MAX_LENGTH:()=>kvj,ab2str:()=>ln,addMinimumWait:()=>bvj,addProtocolToUrlIfNeeded:()=>qp,arrayBuffer:()=>r$,arrayEquals:()=>W3,asValidAccountName:()=>Dvj,asValidDomain:()=>Rvj,base32ToBytes:()=>e9,base64ToBase64url:()=>HD,base64byteLength:()=>t9,base64urlToBytes:()=>ej,batchChain:()=>W6,batchPromiseAll:()=>P4,bitsAsClientUuid:()=>ufA,blobToBase64DataURI:()=>iq,browserInfo:()=>yL,bytesAsBase64Url:()=>JxA,bytesAsClientUuid:()=>SB,bytesToBase32:()=>t$,bytesToBase64url:()=>Aj,bytesToBits:()=>Ea,bytesToHex:()=>Wn,calculatePasswordStrength:()=>bf,canUseTrustedDeviceAuth:()=>_Gj,chainPromises:()=>yvj,clean:()=>wvj,combineComparators:()=>W$,commaSeparatedListToArray:()=>O4,compact:()=>CB,compactFilter:()=>mvj,compare:()=>Fi,compareDates:()=>iz,compareStrings:()=>J$,composeComparator:()=>gk,concatUint8Arrays:()=>In,config:()=>Pr,count:()=>hGj,crypto:()=>$A,dateFromGolang:()=>X6,dateToGolang:()=>kp,decode:()=>cj,deriveHmacSha256:()=>ez,desktopClientNameToClientShortCode:()=>rz,ep:()=>gvj,errors:()=>CA,events:()=>Bq,filterCharacters:()=>Tvj,flipCoin:()=>z3,formatCommaSeparatedList:()=>$vj,fromStringEnum:()=>pe,fromStringUnion:()=>MD,generateDeviceEnrollmentCode:()=>SGj,generatePassphrase:()=>az,generatePassword:()=>Fp,generateRandomID:()=>N$,generateUUID:()=>Se,generateUUIDStyleHash:()=>lGj,getCallbackPromise:()=>I4,getCountryCodeFromDomain:()=>R4,getFileExtension:()=>Pvj,getHostnameFromUrl:()=>MGj,getModifierKey:()=>Ivj,getOpUserAgentString:()=>Ff,getOrderedComparator:()=>TGj,getRandomNumberWithByteLength:()=>K4,getRandomValueFromRange:()=>s6,getSanitizedName:()=>tfA,getServerDomainFromAccountDomain:()=>fi,getTime:()=>Q$,getUuidModulo:()=>cGj,getValidGroupUuid:()=>mk,getValidUserUuid:()=>$o,getValidVaultUuid:()=>K$,hasCommonPasswordsList:()=>IGj,hasDetailedVaultReportingFeature:()=>HGj,hasExtensionInstalled:()=>vGj,hexToBytes:()=>up,hmacSha256Hex:()=>GGj,hmacWithSecretAndData:()=>Gp,ignore:()=>L,inBetween:()=>P3,initOnceBuilder:()=>mq,isBusinessRelated:()=>lz,isDebugMode:()=>Qn,isItemInWrongAccount:()=>dz,isNonWebSignupSource:()=>fvj,isPaymentMethod:()=>V$,isValidAccessorUuid:()=>N3,isValidAccountUuid:()=>nGj,isValidDistributorEntitlementCodeFormat:()=>$4,isValidDomain:()=>P$,isValidEmail:()=>sq,isValidGroupUuid:()=>K3,isValidIPAddressOrCIDR:()=>yGj,isValidInvitationUuid:()=>oGj,isValidInviteDomain:()=>hvj,isValidItemUuid:()=>M$,isValidMspLinkRequestUuid:()=>iGj,isValidNumber:()=>I$,isValidPromoCodeFormat:()=>I3,isValidPurchaseOrderTokenFormat:()=>w4,isValidServerToken:()=>qvj,isValidSignupSource:()=>Gvj,isValidSignupVerificationCode:()=>Fvj,isValidTemplateUuid:()=>sGj,isValidUserUuid:()=>H$,isValidVaultUuid:()=>dq,joinPath:()=>y4,json:()=>Yo,json2ab:()=>Qe,jsonAsBase64Url:()=>PB,jsonBytes:()=>Ne,logsafe:()=>WL,mapObject:()=>$3,maskString:()=>CGj,moveArrayItem:()=>Bvj,normalizeAndFilterUniqueUrls:()=>cz,normalizeToUrl:()=>IfA,normalizeUTF8:()=>w3,notification:()=>Vt,numToUint8Array:()=>j9,obfuscateCardWithBrand:()=>xGj,passwordIsInDictionary:()=>RGj,prehash:()=>nz,readFile:()=>Ovj,readonlyArrayOmitNullish:()=>Qh,reportError:()=>Or,reportErrors:()=>L$,reportInvalid:()=>Rs,rsa:()=>R$,secureDecodeReporter:()=>a9,selectRandomElement:()=>uGj,sentry:()=>J3,setCommonPasswordsList:()=>X4,setDebugMode:()=>Ygj,setPassphraseWordList:()=>V4,shouldReportForPrivateVaults:()=>sz,str2ab:()=>Ij,stringify:()=>pvj,totp:()=>uz,unsafeDecodeAs:()=>BGj,usTerritories:()=>Svj,utf8:()=>XxA,wait:()=>Pn,withDefault:()=>qA,withDefaultUndefined:()=>Gj,withEncoding:()=>Qgj,withFallback:()=>Qo});var $n;(function(A){A.ContextError=p`ContextError`,A.RequestError=p`RequestError`,A.ValidationError=p`ValidationError`})($n||($n={}));var xe=class extends Error{get loggableMessage(){return this._message}set loggableMessage(j){this._message=j}get loggableName(){return this._name}set loggableName(j){this._name=j}get message(){return this._message.str}set message(j){this._message=j}get name(){return this._name.str}set name(j){this._name=j}constructor(j){super(),this._message=p``,this._name=p`Error`,j.message&&(this.message=j.message),j.stackOverrideError instanceof Error&&(this.stack=j.stackOverrideError.stack),this.metaData=j.metaData,this.name=j.errorClass,this.severityLevel=j.severityLevel,this.tags=j.tags,this.userUuid=j.userUuid,this.sampleRate=j.sampleRate}};var tf=J(Xn()),be=J(tA());var X6=A=>typeof A!="string"||A.indexOf("0001")===0?void 0:new Date(A),kp=A=>A?A.toISOString():"";var CA={};er(CA,{ClientError:()=>K7,ClientErrorCode:()=>td,HTTPStatusCode:()=>sc,ItemStatusCode:()=>ZL,LegacyServerError:()=>_D,SecretKeyIdOrFormatMismatchedError:()=>Zy,SecretKeyMissingError:()=>Yy,ServerError:()=>M7,ServerErrorCode:()=>Jh,ServerErrorReason:()=>ts,getError:()=>A$,getErrorMessage:()=>C6,getErrorString:()=>j$,isClientError:()=>N7,isErrorLike:()=>lc,isLegacyServerError:()=>e$,isNewServerError:()=>rd,isNewServerErrorWithStatus:()=>A9,isOldKeyError:()=>zgj,isSecretKeyIdOrFormatMismatchedError:()=>Vgj,isSecretKeyMissingError:()=>Ugj,isSecretKeyPrefixInvalidError:()=>Xgj,isServerError:()=>Wh});var ts;(function(A){A.deprecated="deprecated",A.cannotHandleRequest="cannot_handle_request",A.firewallRule="firewall_rule",A.provisioningEnabled="provisioning_enabled",A.billingBadCardCVV="bad_cc_cvv",A.billingCardDeclined="cc_declined",A.billingCardProcessingError="cc_processing_error",A.billingBadCardNumber="bad_cc_number",A.billingBadCardExpiry="bad_cc_expiry",A.billingCardExpired="cc_expired",A.billingBadCardZIP="bad_cc_zip",A.billingCardMissing="cc_missing",A.billingRateLimiting="too_many_billing_requests",A.billingBadProvider="billing_provider_incorrect",A.billingInsufficientCredit="insufficient_credit",A.billingGiftCardAcceptedInsufficientCredit="gift_card_accepted_insufficient_credit",A.billingStripeDown="stripe_down",A.billingSubscriptionIncomplete="subscription_incomplete",A.billingFrozen="billing_is_frozen",A.billingAccountPaidWithCredit="account_paid_with_credit",A.slackUserLimitReached="slack_users_limit_reached",A.slackInvitesZeroSent="slack_invites_zero_sent",A.slackTimeout="slack_timeout",A.userSuspended="user_suspended",A.userDeleted="user_deleted",A.userIsGuest="user_is_guest",A.recoveryAccepted="recovery_accepted",A.transferAccepted="transfer_accepted",A.notEnrolled="not_enrolled",A.provisionSuspended="provision_suspended",A.dnsRecordNotFound="dns_record_not_found",A.maxAttemptExceeded="max_attempt_exceeded",A.accountTierMismatchOnSubscribe="account_tier_mismatch_subscribe",A.tooManyVaultAccessCreditsInUseToChangeAccountType="too_many_vault_access_credits_in_use_to_change_account_type",A.maxVaultAccessCredits="maximum_vault_access_credits",A.pendingProvisioningUsers="pending_provisioning_users",A.incorrectSetupIntentStatus="incorrect_setup_intent_status",A.membershipUpdateRequiresRecovery="membership_update_requires_recovery",A.provisioningNotManager="not_provision_manager",A.invalidSkPrefixFormat="invalid_sk_prefix_format",A.activeManagedAccountsExist="active_managed_accounts_exist",A.alreadyUsed="already_used",A.accountTypeMismatch="account_type_mismatch",A.partnershipAccountTypeMismatch="partnership_account_type_mismatch",A.partnershipAlreadyUsed="partnership_api_activation_code_already_used",A.missingEntitlementCode="no_entitlement_code",A.distributorLinkAccountNotMsp="distributor_link_account_not_msp",A.emailAlreadyInUse="email_already_in_use",A.invitesLimitReached="invites_limit_reached",A.invitesRateLimitReached="invites_rate_limit_reached",A.invitesBatchLimitReached="invites_batch_limit_reached",A.invitesLimitReachedIAP="invites_limit_reached_iap",A.confirmationLimitReached="confirmation_limit_reached",A.accountMaxGuestsExceeded="account_max_guests_exceeded",A.accountMaxMembersExceeded="account_max_members_exceeded",A.passwordAuthNotAllowed="password_auth_not_allowed",A.oidcUserDoesNotMatch="oidc_user_does_not_match",A.oidcGenericDomainNotAllowed="oidc_generic_domain_not_allowed",A.ownersGroupCannotSso="owners_group_sso_not_allowed",A.idpConfigurationNotAllowed="identity_provider_config_permission_not_allowed",A.privateAppWithoutSecret="private_app_without_secret",A.publicAppWithSecret="public_app_with_secret",A.missingOidcClientSecret="missing_oidc_client_secret",A.oidcUserPendingProvision="oidc_user_pending_provision_started",A.accountAlreadyExists="account_already_exists",A.accountCreationForbidden="account_creation_forbidden",A.accountCreationForbiddenInvitePending="account_creation_forbidden_invite_pending",A.accountCreationForbiddenInviteExpired="account_creation_forbidden_invite_expired",A.addressIncomplete="address_incomplete",A.addressIncorrect="address_incorrect",A.avataxAPI="avatax_api",A.taxAdviceInvalidRequest="taxadvice_invalid_request",A.unsupported="unsupported",A.accountPolicy="account_policy",A.mustEnrollInitialTrustedDevice="must_enroll_initial_device",A.deviceNotEnrolled="device_not_enrolled",A.ssoMigrationDeadlinePassed="sso_migration_deadline_passed",A.maximumAttemptsReached="maximum_attempts_reached",A.incorrectValue="incorrect_value",A.expired="expired",A.recentRecoveryAborted="recent_recovery_aborted",A.recentLogin="recent_login",A.crossPhysicalDeviceDelegationNotAllowed="cross_physical_device_delegation_not_allowed",A.noOwnerExists="no_owner_exists",A.domainNotAvailable="domain_not_available",A.mfaRequired="mfa_required",A.reauthenticationRequired="reauthentication_required",A.mspInvalidSigninAddress="invalid_signin_address",A.mspLinkRequestNotFound="msp_link_request_not_found",A.mspLinkRequestAlreadyAccepted="msp_link_request_already_accepted",A.failedLoginAttemptLockout="failed_login_attempt_lockout",A.provisionedUserWithDisallowedDomainExists="provisioned_user_not_included_in_allowed_email_domains_list_exists",A.atLeastOneDomainRequiredForHostedProvisioning="at_least_one_domain_required_for_hosted_provisioning",A.hostedProvisioningCannotBeDeletedWithInvitedUsers="hosted_provisioning_integration_cannot_be_deleted_with_invited_users",A.trustLogConflict="trust_log_conflict"})(ts||(ts={}));var M7=class extends Error{constructor(j,e){super(),this.code=j,this.reason=e,this.name="ServerError",this.message=this.code+(this.reason?` (${this.reason})`:"")}},Jh;(function(A){A[A.badRequest=100]="badRequest",A[A.operationNotPermitted=101]="operationNotPermitted",A[A.authenticationRequired=102]="authenticationRequired",A[A.internalServerError=103]="internalServerError",A[A.incorrectVersionValue=104]="incorrectVersionValue",A[A.unknownImageFormat=105]="unknownImageFormat",A[A.registrationFailed=106]="registrationFailed",A[A.suspendedLoginFailed=107]="suspendedLoginFailed",A[A.oneMustRemain=108]="oneMustRemain",A[A.deletedLoginFailed=109]="deletedLoginFailed",A[A.cannotHandleRequest=110]="cannotHandleRequest",A[A.domainNotAvailable=112]="domainNotAvailable",A[A.recoveryAcceptedLoginFailed=113]="recoveryAcceptedLoginFailed",A[A.resourceAlreadyUsed=115]="resourceAlreadyUsed",A[A.cannotRemoveYourselfFromGroup=116]="cannotRemoveYourselfFromGroup",A[A.resourceNotFound=117]="resourceNotFound",A[A.requestTooLarge=118]="requestTooLarge",A[A.resourceInvalid=119]="resourceInvalid",A[A.blockedEmailDomain=122]="blockedEmailDomain",A[A.deprecatedClient=125]="deprecatedClient",A[A.invalidPromotionCoupon=126]="invalidPromotionCoupon",A[A.incorrectAttrVersion=127]="incorrectAttrVersion",A[A.emailDomainIsRestricted=129]="emailDomainIsRestricted",A[A.cardBadCVV=200]="cardBadCVV",A[A.cardDeclined=201]="cardDeclined",A[A.cardProcessingError=202]="cardProcessingError",A[A.cardBadNum=203]="cardBadNum",A[A.cardBadExpiry=204]="cardBadExpiry",A[A.cardExpired=205]="cardExpired",A[A.cardBadZip=206]="cardBadZip",A[A.cardMissing=207]="cardMissing",A[A.stripeRateLimit=208]="stripeRateLimit",A[A.badProvider=481]="badProvider",A[A.insufficientCredit=482]="insufficientCredit",A[A.addressIncomplete=483]="addressIncomplete",A[A.resourceExpired=410]="resourceExpired",A[A.resourceLocked=423]="resourceLocked",A[A.reauthenticationRequired=450]="reauthenticationRequired",A[A.mfaRequired=451]="mfaRequired",A[A.memberConfirmationLimitReached=484]="memberConfirmationLimitReached",A[A.guestConfirmationLimitReached=485]="guestConfirmationLimitReached",A[A.memberReactivationLimitReached=486]="memberReactivationLimitReached",A[A.guestReactivationLimitReached=487]="guestReactivationLimitReached",A[A.unknownError=900]="unknownError"})(Jh||(Jh={}));var sc;(function(A){A[A.badRequest=400]="badRequest",A[A.unauthorized=401]="unauthorized",A[A.forbidden=403]="forbidden",A[A.notFound=404]="notFound",A[A.conflict=409]="conflict",A[A.preconditionFailed=412]="preconditionFailed",A[A.locked=423]="locked",A[A.tooManyRequests=429]="tooManyRequests",A[A.registrationFailed=432]="registrationFailed",A[A.userOrDeviceNotAllowed=433]="userOrDeviceNotAllowed",A[A.applicationError=434]="applicationError",A[A.suspendedUserError=435]="suspendedUserError",A[A.deletedUserError=436]="deletedUserError",A[A.resourceInvalid=441]="resourceInvalid",A[A.deprecatedClient=445]="deprecatedClient",A[A.internalServerError=500]="internalServerError"})(sc||(sc={}));var ZL;(function(A){A[A.ok=0]="ok",A[A.expired=1]="expired",A[A.validationError=100]="validationError",A[A.permissionError=101]="permissionError",A[A.serverError=103]="serverError",A[A.incorrectItemVersion=104]="incorrectItemVersion"})(ZL||(ZL={}));var _D=class extends Error{constructor(j,e){super(),this.code=j,this.message=e?`${e} (${j})`:j.toString(),this.name="LegacyServerError"}},td;(function(A){A[A.incorrectMasterPassword=102]="incorrectMasterPassword",A[A.invalidEmailOrPassword=103]="invalidEmailOrPassword",A[A.mustVerifyEmail=104]="mustVerifyEmail",A[A.serverRequestTimedOut=105]="serverRequestTimedOut",A[A.deviceDeleted=106]="deviceDeleted",A[A.sequenceNumberTooLarge=107]="sequenceNumberTooLarge",A[A.invalidImage=108]="invalidImage",A[A.invalidMFA=110]="invalidMFA",A[A.noRsaOaep256Support=111]="noRsaOaep256Support",A[A.invalidSigningKeyPair=112]="invalidSigningKeyPair",A[A.invalidFileType=113]="invalidFileType",A[A.signatureVerificationFailed=114]="signatureVerificationFailed",A[A.restrictedCountry=115]="restrictedCountry",A[A.fileTooLarge=116]="fileTooLarge",A[A.unexpectedFetchError=117]="unexpectedFetchError",A[A.corruptedFile=118]="corruptedFile",A[A.unsupportedMFA=119]="unsupportedMFA",A[A.emailAlreadyInUseByGuest=120]="emailAlreadyInUseByGuest",A[A.emailAlreadyInUseByMember=121]="emailAlreadyInUseByMember",A[A.missingFileId=122]="missingFileId",A[A.popupFailed=123]="popupFailed",A[A.popupBlocked=124]="popupBlocked",A[A.unknownError=900]="unknownError"})(td||(td={}));var K7=class extends Error{constructor(j,e){super(),this.code=j,this.loggableMessage=e?W(`${e.str} (${j})`):W(j.toString()),this.message=this.loggableMessage.str,this.name="ClientError"}},A$=(A,j)=>{if(N7(A)){let r=j?W(`${j.str} ${A.loggableMessage.str}`):A.loggableMessage;return new K7(A.code,r)}let e=C6(A),t=j?`${j.str} ${e}`:e;return e$(A)?new _D(A.code,t):rd(A)?A:new Error(t)},lc=A=>typeof A=="object"&&A!==null&&"name"in A&&typeof A.name=="string"&&"message"in A&&typeof A.message=="string",Lgj=A=>"StringifiedError: "+JSON.stringify(A),j$=A=>{try{if(typeof A=="object"){let j=A?.toString?.();if(j&&j!=="[object Object]"&&j!=="[object Error]")return j}return Lgj(A)}catch(j){return j$(j)}},C6=A=>lc(A)?A.message:"An unexpected error occurred",N7=(A,j)=>lc(A)&&A.name==="ClientError"&&(!j||j===A.code||Array.isArray(j)&&Fr(j,A.code)),Wh=(A,j,e)=>rd(A,j,e)||e$(A,j),rd=(A,j,e)=>{if(!lc(A))return!1;let t=!j||j===A.reason||Array.isArray(j)&&Fr(j,A.reason),r=e!==void 0&&e===A.code;return A.name==="ServerError"&&(t||r)},A9=(A,j)=>lc(A)&&A.name==="ServerError"&&j===A.code,e$=(A,j)=>lc(A)&&A.name==="LegacyServerError"&&(!j||j===A.code||Array.isArray(j)&&Fr(j,A.code)),zgj=A=>lc(A)&&A.message==="Unsupported JWK algorithm RSA-OAEP-256",Yy=class A extends Error{constructor(j){super(),this.message="Secret Key ("+j+") not found",this.name=A.ERROR_NAME}};Yy.ERROR_NAME="SecretKeyMissingError";var Ugj=A=>lc(A)&&A.name===Yy.ERROR_NAME,Zy=class A extends Error{constructor(j,e,t,r){super(),this.message=`User's Secret Key ID (${e}) or format (${r}) doesn't match either response's Secret Key ID (${j}) or format (${t})`,this.name=A.ERROR_NAME}};Zy.ERROR_NAME="SecretKeyIdOrFormatIsWrong";var Vgj=A=>lc(A)&&A.name===Zy.ERROR_NAME,Xgj=A=>rd(A,ts.invalidSkPrefixFormat);var Is=J(Fo()),Jgj=()=>{if(typeof TextDecoder>"u")return A=>{if(typeof A!="object"||A===null||!("byteLength"in A))throw new TypeError("Failed to decode bytes: The provided value is not of type '(ArrayBuffer or ArrayBufferView)'.");return Is.codec.utf8String.fromBits(Is.codec.bytes.toBits(new Uint8Array(A)))};{let A=new TextDecoder;return A.decode.bind(A)}},Wgj=()=>{if(typeof TextEncoder>"u")return A=>new Uint8Array(Is.codec.bytes.fromBits(Is.codec.utf8String.toBits(A)));{let A=new TextEncoder;return A.encode.bind(A)}},ln=Jgj(),Ij=Wgj(),Qe=A=>Ij(JSON.stringify(A)),j9=(A,j)=>{if(!Number.isInteger(A)||!Number.isInteger(j)||Number.isNaN(A)||Number.isNaN(j))throw new TypeError("A parameter to numToUint8Array wasn't an integer.");if(A<0)throw new Error("numToUint8Array doesn't allow negative numbers.");if(A>Math.pow(2,j*8)-1)throw new Error("Number requires a byte array greater than specified output length.");let e=new Uint8Array(j);for(let t=0;t<j;t++)e[t]=A%256,A=A>>>8;return e},Ea=Is.codec.bytes.toBits.bind(Is.codec.bytes),Aj=A=>{let j="";for(let t,r=A.length,a=0,n=0;n<r;n++)t=n%3,a|=A[n]<<(16>>>t&24),(t===2||r-n===1)&&(j+=String.fromCharCode(SD(a>>>18&63),SD(a>>>12&63),SD(a>>>6&63),SD(a&63)),a=0);let e=(3-A.length%3)%3;return e===0?j:j.slice(0,-e)},SD=A=>A<26?A+65:A<52?A+71:A<62?A-4:A===62?45:95,e9=A=>new Uint8Array(Is.codec.bytes.fromBits(Is.codec.base32.toBits(A))),t$=A=>Is.codec.base32.fromBits(Ea(A),!0),ej=A=>(A=HD(A),new Uint8Array(Is.codec.bytes.fromBits(Is.codec.base64url.toBits(A)))),HD=A=>A.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),t9=A=>{let j=A.length;return A[j-1]==="="&&(j-=1,A[j-1]==="="&&(j-=1)),Math.floor(3*j/4)},Wn=A=>Is.codec.hex.fromBits(Ea(A)),up=A=>{let j=A.length%2===1?"0"+A:A;return new Uint8Array(Is.codec.bytes.fromBits(Is.codec.hex.toBits(j)))};var qA=(A,j)=>new be.Type(`withDefault(${A.name}, ${JSON.stringify(j)})`,A.is,(e,t)=>A.validate(e??yy(j),t),A.encode),Gj=A=>{let j=be.union([A,be.undefined]);return new be.Type(`withDefaultUndefined(${A.name})`,j.is,(e,t)=>be.undefined.is(e??void 0)?be.success(void 0):A.validate(e,t),j.encode)},Qo=(A,j)=>new be.Type(`withFallback(${A.name})`,A.is,(e,t)=>{let r=A.validate(e,t);try{return(0,tf.isLeft)(r)?be.success(j(e)):r}catch(a){return be.failure(e,t,C6(a))}},A.encode),Qgj=(A,j,e=j.name)=>new be.Type(e,j.is,j.validate,A),pe=(A,j)=>{let e=t=>typeof t=="string"&&q6(A).includes(t);return new be.Type(j,e,(t,r)=>e(t)?be.success(t):be.failure(t,r),be.identity)},MD=A=>{let j=e=>typeof e=="string";return new be.Type(A,j,(e,t)=>j(e)?be.success(e):be.failure(e,t),be.identity)},Qh=A=>{let j=t=>t!==null&&typeof t<"u",e=be.readonlyArray(be.union([A,be.null,be.undefined]));return new be.Type(`readonlyArrayOmitNullish(${A.name})`,t=>e.is(t)&&t.every(j),(t,r)=>{let a=e.validate(t,r);return a._tag==="Left"?a:be.success(a.right.filter(j))},be.identity)},L=new be.Type("ignore",be.void.is,()=>be.success(void 0),be.void.encode),XxA=new be.Type("utf8",be.string.is,(A,j)=>{try{return be.success(ln(A))}catch(e){return be.failure(A,j,C6(e))}},Ij),Yo=new be.Type("json",be.unknown.is,(A,j)=>{let e=be.string.validate(A,j);if((0,tf.isLeft)(e))return e;try{let t=JSON.parse(e.right);return be.success(t)}catch(t){return be.failure(A,j,C6(t))}},JSON.stringify),Ne=XxA.pipe(Yo,"jsonBytes"),JxA=new be.Type("bytesAsBase64Url",A=>A instanceof Uint8Array,(A,j)=>{let e=be.string.validate(A,j);if((0,tf.isLeft)(e))return e;try{return be.success(ej(e.right))}catch(t){return be.failure(A,j,C6(t))}},Aj),PB=JxA.pipe(Ne,"jsonAsBase64Url"),r$=new be.Type("arrayBuffer",A=>A instanceof ArrayBuffer,(A,j)=>A instanceof ArrayBuffer?be.success(A):be.failure(A,j),be.identity),a$=new be.Type("RfcNumericDate",A=>Oy(A),(A,j)=>{let e=be.number.validate(A,j);if((0,tf.isLeft)(e))return e;try{let t=new Date(e.right*1e3);if(Number.isNaN(t.getTime()))throw new TypeError("Invalid Date input");return be.success(t)}catch(t){return be.failure(A,j,C6(t))}},A=>{let j=A.getTime();if(Number.isNaN(j))throw new TypeError("Invalid Date object");return Math.floor(j/1e3)}),co=new be.Type("IsoStringDate",A=>Oy(A),(A,j)=>{let e=be.string.validate(A,j);if((0,tf.isLeft)(e))return e;try{let t=X6(e.right);if(!t)throw new TypeError("Invalid Date input");if(Number.isNaN(t.getTime()))throw new TypeError("Invalid Date input");return be.success(t)}catch(t){return be.failure(A,j,C6(t))}},A=>{let j=A.getTime();if(Number.isNaN(j))throw new TypeError("Invalid Date object");return A.toISOString()}),KD=new be.Type("OptionalIsoStringDate",A=>typeof A>"u"||Oy(A),(A,j)=>{if(typeof A!="string"||A.indexOf("0001")===0)return be.success(void 0);try{let e=new Date(A);if(Number.isNaN(e.getTime()))throw new TypeError("Invalid Date input");return be.success(e)}catch(e){return be.failure(A,j,C6(e))}},A=>{let j=A?.getTime();if(Number.isNaN(j))throw new TypeError("Invalid Date object");return A?.toISOString()});var gfA=J(Xn());var r9=!1,Ygj=A=>{r9!==A&&(r9=A)},Qn=()=>r9;var WxA=J(Xn()),ND=class{get message(){return this.msg.str}constructor(j){this.name="LoggableTypeError",this.toString=()=>this.name+": "+this.message,this.msg=j}},QxA=(A,j)=>(0,WxA.isLeft)(A)?cc(A.left,j):L7(A.right),L7=A=>({type:"ok",value:A,unwrap:()=>A}),cc=(A,j)=>({type:"err",value:A,unwrap:()=>{throw j?j(A):A}});var a9={};er(a9,{SecurePathReporter:()=>n$,stringify:()=>AvA});var ZxA=J(Xn());var AvA=A=>typeof A=="function"?A.displayName||A.name||`<function ${A.length}>`:typeof A=="number"&&!Number.isFinite(A)?Number.isNaN(A)?"NaN":A>0?"Infinity":"-Infinity":A===null?"null":typeof A>"u"?"undefined":typeof A=="object"&&Array.isArray(A)?"(type: array)":`(type: ${typeof A})`,Zgj=A=>A.map(({key:j,type:e})=>j+": "+e.name).join("/"),Ahj=A=>p`Invalid value ${W(AvA(A.value))} supplied to ${W(Zgj(A.context))}`,YxA=A=>A.map(Ahj),jhj=()=>[p`No errors!`],n$={report:(0,ZxA.fold)(YxA,jhj),reportFailure:YxA};var J3={};er(J3,{ExceptionType:()=>U3,assertLogSafeAndNormalizeDevice:()=>BfA,init:()=>pGj,isInitialized:()=>mGj,reportError:()=>Or,reportErrors:()=>L$});var jvA=Object.prototype.toString;function o$(A){switch(jvA.call(A)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return U7(A,Error)}}function rf(A,j){return jvA.call(A)===`[object ${j}]`}function af(A){return rf(A,"ErrorEvent")}function LD(A){return rf(A,"DOMError")}function n9(A){return rf(A,"DOMException")}function dl(A){return rf(A,"String")}function nf(A){return typeof A=="object"&&A!==null&&"__sentry_template_string__"in A&&"__sentry_template_values__"in A}function Yh(A){return A===null||nf(A)||typeof A!="object"&&typeof A!="function"}function ck(A){return rf(A,"Object")}function Zh(A){return typeof Event<"u"&&U7(A,Event)}function o9(A){return typeof Element<"u"&&U7(A,Element)}function i9(A){return rf(A,"RegExp")}function z7(A){return!!(A&&A.then&&typeof A.then=="function")}function s9(A){return ck(A)&&"nativeEvent"in A&&"preventDefault"in A&&"stopPropagation"in A}function l9(A){return typeof A=="number"&&A!==A}function U7(A,j){try{return A instanceof j}catch{return!1}}function i$(A){return!!(typeof A=="object"&&A!==null&&(A.__isVue||A._isVue))}function V7(A,j=0){return typeof A!="string"||j===0||A.length<=j?A:`${A.slice(0,j)}...`}function zD(A,j){if(!Array.isArray(A))return"";let e=[];for(let t=0;t<A.length;t++){let r=A[t];try{i$(r)?e.push("[VueViewModel]"):e.push(String(r))}catch{e.push("[value cannot be serialized]")}}return e.join(j)}function evA(A,j,e=!1){return dl(A)?i9(j)?j.test(A):dl(j)?e?A===j:A.includes(j):!1:!1}function of(A,j=[],e=!1){return j.some(t=>evA(A,t,e))}function s$(A,j,e=250,t,r,a,n){if(!a.exception||!a.exception.values||!n||!U7(n.originalException,Error))return;let o=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;o&&(a.exception.values=ehj(c9(A,j,r,n.originalException,t,a.exception.values,o,0),e))}function c9(A,j,e,t,r,a,n,o){if(a.length>=e+1)return a;let i=[...a];if(U7(t[r],Error)){tvA(n,o);let s=A(j,t[r]),l=i.length;rvA(s,r,l,o),i=c9(A,j,e,t[r],r,[s,...i],s,l)}return Array.isArray(t.errors)&&t.errors.forEach((s,l)=>{if(U7(s,Error)){tvA(n,o);let c=A(j,s),k=i.length;rvA(c,`errors[${l}]`,k,o),i=c9(A,j,e,s,r,[c,...i],c,k)}}),i}function tvA(A,j){A.mechanism=A.mechanism||{type:"generic",handled:!0},A.mechanism={...A.mechanism,...A.type==="AggregateError"&&{is_exception_group:!0},exception_id:j}}function rvA(A,j,e,t){A.mechanism=A.mechanism||{type:"generic",handled:!0},A.mechanism={...A.mechanism,type:"chained",source:j,exception_id:e,parent_id:t}}function ehj(A,j){return A.map(e=>(e.value&&(e.value=V7(e.value,j)),e))}function UD(A){return A&&A.Math==Math?A:void 0}var Yt=typeof globalThis=="object"&&UD(globalThis)||typeof window=="object"&&UD(window)||typeof self=="object"&&UD(self)||typeof global=="object"&&UD(global)||function(){return this}()||{};function Aq(){return Yt}function l$(A,j,e){let t=e||Yt,r=t.__SENTRY__=t.__SENTRY__||{};return r[A]||(r[A]=j())}var d9=Aq(),thj=80;function c$(A,j={}){if(!A)return"<unknown>";try{let e=A,t=5,r=[],a=0,n=0,o=" > ",i=o.length,s,l=Array.isArray(j)?j:j.keyAttrs,c=!Array.isArray(j)&&j.maxStringLength||thj;for(;e&&a++<t&&(s=rhj(e,l),!(s==="html"||a>1&&n+r.length*i+s.length>=c));)r.push(s),n+=s.length,e=e.parentNode;return r.reverse().join(o)}catch{return"<unknown>"}}function rhj(A,j){let e=A,t=[],r,a,n,o,i;if(!e||!e.tagName)return"";if(d9.HTMLElement&&e instanceof HTMLElement&&e.dataset&&e.dataset.sentryComponent)return e.dataset.sentryComponent;t.push(e.tagName.toLowerCase());let s=j&&j.length?j.filter(c=>e.getAttribute(c)).map(c=>[c,e.getAttribute(c)]):null;if(s&&s.length)s.forEach(c=>{t.push(`[${c[0]}="${c[1]}"]`)});else if(e.id&&t.push(`#${e.id}`),r=e.className,r&&dl(r))for(a=r.split(/\s+/),i=0;i<a.length;i++)t.push(`.${a[i]}`);let l=["aria-label","type","name","title","alt"];for(i=0;i<l.length;i++)n=l[i],o=e.getAttribute(n),o&&t.push(`[${n}="${o}"]`);return t.join("")}function k9(){try{return d9.document.location.href}catch{return""}}function u9(A){if(!d9.HTMLElement)return null;let j=A,e=5;for(let t=0;t<e;t++){if(!j)return null;if(j instanceof HTMLElement&&j.dataset.sentryComponent)return j.dataset.sentryComponent;j=j.parentNode}return null}var X7=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var ahj="Sentry Logger ",d$=["debug","info","warn","error","log","assert","trace"],sf={};function OB(A){if(!("console"in Yt))return A();let j=Yt.console,e={},t=Object.keys(sf);t.forEach(r=>{let a=sf[r];e[r]=j[r],j[r]=a});try{return A()}finally{t.forEach(r=>{j[r]=e[r]})}}function nhj(){let A=!1,j={enable:()=>{A=!0},disable:()=>{A=!1},isEnabled:()=>A};return X7?d$.forEach(e=>{j[e]=(...t)=>{A&&OB(()=>{Yt.console[e](`${ahj}[${e}]:`,...t)})}}):d$.forEach(e=>{j[e]=()=>{}}),j}var $e=nhj();var ohj=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ihj(A){return A==="http"||A==="https"}function ad(A,j=!1){let{host:e,path:t,pass:r,port:a,projectId:n,protocol:o,publicKey:i}=A;return`${o}://${i}${j&&r?`:${r}`:""}@${e}${a?`:${a}`:""}/${t&&`${t}/`}${n}`}function avA(A){let j=ohj.exec(A);if(!j){OB(()=>{console.error(`Invalid Sentry Dsn: ${A}`)});return}let[e,t,r="",a,n="",o]=j.slice(1),i="",s=o,l=s.split("/");if(l.length>1&&(i=l.slice(0,-1).join("/"),s=l.pop()),s){let c=s.match(/^\d+/);c&&(s=c[0])}return nvA({host:a,pass:r,path:i,projectId:s,port:n,protocol:e,publicKey:t})}function nvA(A){return{protocol:A.protocol,publicKey:A.publicKey||"",pass:A.pass||"",host:A.host,port:A.port||"",path:A.path||"",projectId:A.projectId}}function shj(A){if(!X7)return!0;let{port:j,projectId:e,protocol:t}=A;return["protocol","publicKey","host","projectId"].find(n=>A[n]?!1:($e.error(`Invalid Sentry Dsn: ${n} missing`),!0))?!1:e.match(/^\d+$/)?ihj(t)?j&&isNaN(parseInt(j,10))?($e.error(`Invalid Sentry Dsn: Invalid port ${j}`),!1):!0:($e.error(`Invalid Sentry Dsn: Invalid protocol ${t}`),!1):($e.error(`Invalid Sentry Dsn: Invalid projectId ${e}`),!1)}function VD(A){let j=typeof A=="string"?avA(A):nvA(A);if(!(!j||!shj(j)))return j}var rs=class extends Error{constructor(j,e="warn"){super(j),this.message=j,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=e}};function J6(A,j,e){if(!(j in A))return;let t=A[j],r=e(t);typeof r=="function"&&XD(r,t),A[j]=r}function Ep(A,j,e){try{Object.defineProperty(A,j,{value:e,writable:!0,configurable:!0})}catch{X7&&$e.log(`Failed to add non-enumerable property "${j}" to object`,A)}}function XD(A,j){try{let e=j.prototype||{};A.prototype=j.prototype=e,Ep(A,"__sentry_original__",j)}catch{}}function jq(A){return A.__sentry_original__}function p9(A){return Object.keys(A).map(j=>`${encodeURIComponent(j)}=${encodeURIComponent(A[j])}`).join("&")}function JD(A){if(o$(A))return{message:A.message,name:A.name,stack:A.stack,...ivA(A)};if(Zh(A)){let j={type:A.type,target:ovA(A.target),currentTarget:ovA(A.currentTarget),...ivA(A)};return typeof CustomEvent<"u"&&U7(A,CustomEvent)&&(j.detail=A.detail),j}else return A}function ovA(A){try{return o9(A)?c$(A):Object.prototype.toString.call(A)}catch{return"<unknown>"}}function ivA(A){if(typeof A=="object"&&A!==null){let j={};for(let e in A)Object.prototype.hasOwnProperty.call(A,e)&&(j[e]=A[e]);return j}else return{}}function m9(A,j=40){let e=Object.keys(JD(A));if(e.sort(),!e.length)return"[object has no keys]";if(e[0].length>=j)return V7(e[0],j);for(let t=e.length;t>0;t--){let r=e.slice(0,t).join(", ");if(!(r.length>j))return t===e.length?r:V7(r,j)}return""}function Ps(A){return E9(A,new Map)}function E9(A,j){if(lhj(A)){let e=j.get(A);if(e!==void 0)return e;let t={};j.set(A,t);for(let r of Object.keys(A))typeof A[r]<"u"&&(t[r]=E9(A[r],j));return t}if(Array.isArray(A)){let e=j.get(A);if(e!==void 0)return e;let t=[];return j.set(A,t),A.forEach(r=>{t.push(E9(r,j))}),t}return A}function lhj(A){if(!ck(A))return!1;try{let j=Object.getPrototypeOf(A).constructor.name;return!j||j==="Object"}catch{return!0}}var cvA=50,svA=/\(error: (.*)\)/,lvA=/captureMessage|captureException/;function WD(...A){let j=A.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,t=0)=>{let r=[],a=e.split(`
`);for(let n=t;n<a.length;n++){let o=a[n];if(o.length>1024)continue;let i=svA.test(o)?o.replace(svA,"$1"):o;if(!i.match(/\S*Error: /)){for(let s of j){let l=s(i);if(l){r.push(l);break}}if(r.length>=cvA)break}}return dvA(r)}}function g9(A){return Array.isArray(A)?WD(...A):A}function dvA(A){if(!A.length)return[];let j=Array.from(A);return/sentryWrapped/.test(j[j.length-1].function||"")&&j.pop(),j.reverse(),lvA.test(j[j.length-1].function||"")&&(j.pop(),lvA.test(j[j.length-1].function||"")&&j.pop()),j.slice(0,cvA).map(e=>({...e,filename:e.filename||j[j.length-1].filename,function:e.function||"?"}))}var B9="<anonymous>";function nd(A){try{return!A||typeof A!="function"?B9:A.name||B9}catch{return B9}}var QD={},kvA={};function kl(A,j){QD[A]=QD[A]||[],QD[A].push(j)}function ul(A,j){kvA[A]||(j(),kvA[A]=!0)}function Zo(A,j){let e=A&&QD[A];if(e)for(let t of e)try{t(j)}catch(r){X7&&$e.error(`Error while triggering instrumentation handler.
Type: ${A}
Name: ${nd(t)}
Error:`,r)}}function h9(A){let j="console";kl(j,A),ul(j,chj)}function chj(){"console"in Yt&&d$.forEach(function(A){A in Yt.console&&J6(Yt.console,A,function(j){return sf[A]=j,function(...e){Zo("console",{args:e,level:A});let r=sf[A];r&&r.apply(Yt.console,e)}})})}function bo(){let A=Yt,j=A.crypto||A.msCrypto,e=()=>Math.random()*16;try{if(j&&j.randomUUID)return j.randomUUID().replace(/-/g,"");j&&j.getRandomValues&&(e=()=>{let t=new Uint8Array(1);return j.getRandomValues(t),t[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,t=>(t^(e()&15)>>t/4).toString(16))}function uvA(A){return A.exception&&A.exception.values?A.exception.values[0]:void 0}function dk(A){let{message:j,event_id:e}=A;if(j)return j;let t=uvA(A);return t?t.type&&t.value?`${t.type}: ${t.value}`:t.type||t.value||e||"<unknown>":e||"<unknown>"}function lf(A,j,e){let t=A.exception=A.exception||{},r=t.values=t.values||[],a=r[0]=r[0]||{};a.value||(a.value=j||""),a.type||(a.type=e||"Error")}function pp(A,j){let e=uvA(A);if(!e)return;let t={type:"generic",handled:!0},r=e.mechanism;if(e.mechanism={...t,...r,...j},j&&"data"in j){let a={...r&&r.data,...j.data};e.mechanism.data=a}}function YD(A){if(A&&A.__sentry_captured__)return!0;try{Ep(A,"__sentry_captured__",!0)}catch{}return!1}function k$(A){return Array.isArray(A)?A:[A]}var cf=Yt,dhj=1e3,EvA,q9,x9;function v9(A){let j="dom";kl(j,A),ul(j,khj)}function khj(){if(!cf.document)return;let A=Zo.bind(null,"dom"),j=pvA(A,!0);cf.document.addEventListener("click",j,!1),cf.document.addEventListener("keypress",j,!1),["EventTarget","Node"].forEach(e=>{let t=cf[e]&&cf[e].prototype;!t||!t.hasOwnProperty||!t.hasOwnProperty("addEventListener")||(J6(t,"addEventListener",function(r){return function(a,n,o){if(a==="click"||a=="keypress")try{let i=this,s=i.__sentry_instrumentation_handlers__=i.__sentry_instrumentation_handlers__||{},l=s[a]=s[a]||{refCount:0};if(!l.handler){let c=pvA(A);l.handler=c,r.call(this,a,c,o)}l.refCount++}catch{}return r.call(this,a,n,o)}}),J6(t,"removeEventListener",function(r){return function(a,n,o){if(a==="click"||a=="keypress")try{let i=this,s=i.__sentry_instrumentation_handlers__||{},l=s[a];l&&(l.refCount--,l.refCount<=0&&(r.call(this,a,l.handler,o),l.handler=void 0,delete s[a]),Object.keys(s).length===0&&delete i.__sentry_instrumentation_handlers__)}catch{}return r.call(this,a,n,o)}}))})}function uhj(A){if(A.type!==q9)return!1;try{if(!A.target||A.target._sentryId!==x9)return!1}catch{}return!0}function Ehj(A,j){return A!=="keypress"?!1:!j||!j.tagName?!0:!(j.tagName==="INPUT"||j.tagName==="TEXTAREA"||j.isContentEditable)}function pvA(A,j=!1){return e=>{if(!e||e._sentryCaptured)return;let t=phj(e);if(Ehj(e.type,t))return;Ep(e,"_sentryCaptured",!0),t&&!t._sentryId&&Ep(t,"_sentryId",bo());let r=e.type==="keypress"?"input":e.type;uhj(e)||(A({event:e,name:r,global:j}),q9=e.type,x9=t?t._sentryId:void 0),clearTimeout(EvA),EvA=cf.setTimeout(()=>{x9=void 0,q9=void 0},dhj)}}function phj(A){try{return A.target}catch{return null}}var G9=Aq();function ZD(){if(!("fetch"in G9))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function u$(A){return A&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(A.toString())}function f9(){if(typeof EdgeRuntime=="string")return!0;if(!ZD())return!1;if(u$(G9.fetch))return!0;let A=!1,j=G9.document;if(j&&typeof j.createElement=="function")try{let e=j.createElement("iframe");e.hidden=!0,j.head.appendChild(e),e.contentWindow&&e.contentWindow.fetch&&(A=u$(e.contentWindow.fetch)),j.head.removeChild(e)}catch(e){X7&&$e.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return A}function b9(A){let j="fetch";kl(j,A),ul(j,mhj)}function mhj(){f9()&&J6(Yt,"fetch",function(A){return function(...j){let{method:e,url:t}=Bhj(j),r={args:j,fetchData:{method:e,url:t},startTimestamp:Date.now()};return Zo("fetch",{...r}),A.apply(Yt,j).then(a=>{let n={...r,endTimestamp:Date.now(),response:a};return Zo("fetch",n),a},a=>{let n={...r,endTimestamp:Date.now(),error:a};throw Zo("fetch",n),a})}})}function F9(A,j){return!!A&&typeof A=="object"&&!!A[j]}function mvA(A){return typeof A=="string"?A:A?F9(A,"url")?A.url:A.toString?A.toString():"":""}function Bhj(A){if(A.length===0)return{method:"GET",url:""};if(A.length===2){let[e,t]=A;return{url:mvA(e),method:F9(t,"method")?String(t.method).toUpperCase():"GET"}}let j=A[0];return{url:mvA(j),method:F9(j,"method")?String(j.method).toUpperCase():"GET"}}var A4=null;function y9(A){let j="error";kl(j,A),ul(j,ghj)}function ghj(){A4=Yt.onerror,Yt.onerror=function(A,j,e,t,r){return Zo("error",{column:t,error:r,line:e,msg:A,url:j}),A4&&!A4.__SENTRY_LOADER__?A4.apply(this,arguments):!1},Yt.onerror.__SENTRY_INSTRUMENTED__=!0}var j4=null;function $9(A){let j="unhandledrejection";kl(j,A),ul(j,hhj)}function hhj(){j4=Yt.onunhandledrejection,Yt.onunhandledrejection=function(A){return Zo("unhandledrejection",A),j4&&!j4.__SENTRY_LOADER__?j4.apply(this,arguments):!0},Yt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var e4=Aq();function BvA(){let A=e4.chrome,j=A&&A.app&&A.app.runtime,e="history"in e4&&!!e4.history.pushState&&!!e4.history.replaceState;return!j&&e}var E$=Yt,t4;function p$(A){let j="history";kl(j,A),ul(j,qhj)}function qhj(){if(!BvA())return;let A=E$.onpopstate;E$.onpopstate=function(...e){let t=E$.location.href,r=t4;if(t4=t,Zo("history",{from:r,to:t}),A)try{return A.apply(this,e)}catch{}};function j(e){return function(...t){let r=t.length>2?t[2]:void 0;if(r){let a=t4,n=String(r);t4=n,Zo("history",{from:a,to:n})}return e.apply(this,t)}}J6(E$.history,"pushState",j),J6(E$.history,"replaceState",j)}var xhj=Yt,eq="__sentry_xhr_v3__";function w9(A){let j="xhr";kl(j,A),ul(j,vhj)}function vhj(){if(!xhj.XMLHttpRequest)return;let A=XMLHttpRequest.prototype;J6(A,"open",function(j){return function(...e){let t=Date.now(),r=dl(e[0])?e[0].toUpperCase():void 0,a=Ghj(e[1]);if(!r||!a)return j.apply(this,e);this[eq]={method:r,url:a,request_headers:{}},r==="POST"&&a.match(/sentry_key/)&&(this.__sentry_own_request__=!0);let n=()=>{let o=this[eq];if(o&&this.readyState===4){try{o.status_code=this.status}catch{}let i={args:[r,a],endTimestamp:Date.now(),startTimestamp:t,xhr:this};Zo("xhr",i)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?J6(this,"onreadystatechange",function(o){return function(...i){return n(),o.apply(this,i)}}):this.addEventListener("readystatechange",n),J6(this,"setRequestHeader",function(o){return function(...i){let[s,l]=i,c=this[eq];return c&&dl(s)&&dl(l)&&(c.request_headers[s.toLowerCase()]=l),o.apply(this,i)}}),j.apply(this,e)}}),J6(A,"send",function(j){return function(...e){let t=this[eq];if(!t)return j.apply(this,e);e[0]!==void 0&&(t.body=e[0]);let r={args:[t.method,t.url],startTimestamp:Date.now(),xhr:this};return Zo("xhr",r),j.apply(this,e)}})}function Ghj(A){if(dl(A))return A;try{return A.toString()}catch{}}function I9(){return"npm"}function gvA(){let A=typeof WeakSet=="function",j=A?new WeakSet:[];function e(r){if(A)return j.has(r)?!0:(j.add(r),!1);for(let a=0;a<j.length;a++)if(j[a]===r)return!0;return j.push(r),!1}function t(r){if(A)j.delete(r);else for(let a=0;a<j.length;a++)if(j[a]===r){j.splice(a,1);break}}return[e,t]}function kk(A,j=100,e=1/0){try{return r4("",A,j,e)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function a4(A,j=3,e=100*1024){let t=kk(A,j);return yhj(t)>e?a4(A,j-1,e):t}function r4(A,j,e=1/0,t=1/0,r=gvA()){let[a,n]=r;if(j==null||["number","boolean","string"].includes(typeof j)&&!l9(j))return j;let o=fhj(A,j);if(!o.startsWith("[object "))return o;if(j.__sentry_skip_normalization__)return j;let i=typeof j.__sentry_override_normalization_depth__=="number"?j.__sentry_override_normalization_depth__:e;if(i===0)return o.replace("object ","");if(a(j))return"[Circular ~]";let s=j;if(s&&typeof s.toJSON=="function")try{let u=s.toJSON();return r4("",u,i-1,t,r)}catch{}let l=Array.isArray(j)?[]:{},c=0,k=JD(j);for(let u in k){if(!Object.prototype.hasOwnProperty.call(k,u))continue;if(c>=t){l[u]="[MaxProperties ~]";break}let m=k[u];l[u]=r4(u,m,i-1,t,r),c++}return n(j),l}function fhj(A,j){try{if(A==="domain"&&j&&typeof j=="object"&&j._events)return"[Domain]";if(A==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&j===global)return"[Global]";if(typeof window<"u"&&j===window)return"[Window]";if(typeof document<"u"&&j===document)return"[Document]";if(i$(j))return"[VueViewModel]";if(s9(j))return"[SyntheticEvent]";if(typeof j=="number"&&j!==j)return"[NaN]";if(typeof j=="function")return`[Function: ${nd(j)}]`;if(typeof j=="symbol")return`[${String(j)}]`;if(typeof j=="bigint")return`[BigInt: ${String(j)}]`;let e=Fhj(j);return/^HTML(\w*)Element$/.test(e)?`[HTMLElement: ${e}]`:`[object ${e}]`}catch(e){return`**non-serializable** (${e})`}}function Fhj(A){let j=Object.getPrototypeOf(A);return j?j.constructor.name:"null prototype"}function bhj(A){return~-encodeURI(A).split(/%..|./).length}function yhj(A){return bhj(JSON.stringify(A))}var mp;(function(A){A[A.PENDING=0]="PENDING";let e=1;A[A.RESOLVED=e]="RESOLVED";let t=2;A[A.REJECTED=t]="REJECTED"})(mp||(mp={}));function uk(A){return new dc(j=>{j(A)})}function tq(A){return new dc((j,e)=>{e(A)})}var dc=class A{constructor(j){A.prototype.__init.call(this),A.prototype.__init2.call(this),A.prototype.__init3.call(this),A.prototype.__init4.call(this),this._state=mp.PENDING,this._handlers=[];try{j(this._resolve,this._reject)}catch(e){this._reject(e)}}then(j,e){return new A((t,r)=>{this._handlers.push([!1,a=>{if(!j)t(a);else try{t(j(a))}catch(n){r(n)}},a=>{if(!e)r(a);else try{t(e(a))}catch(n){r(n)}}]),this._executeHandlers()})}catch(j){return this.then(e=>e,j)}finally(j){return new A((e,t)=>{let r,a;return this.then(n=>{a=!1,r=n,j&&j()},n=>{a=!0,r=n,j&&j()}).then(()=>{if(a){t(r);return}e(r)})})}__init(){this._resolve=j=>{this._setResult(mp.RESOLVED,j)}}__init2(){this._reject=j=>{this._setResult(mp.REJECTED,j)}}__init3(){this._setResult=(j,e)=>{if(this._state===mp.PENDING){if(z7(e)){e.then(this._resolve,this._reject);return}this._state=j,this._value=e,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===mp.PENDING)return;let j=this._handlers.slice();this._handlers=[],j.forEach(e=>{e[0]||(this._state===mp.RESOLVED&&e[1](this._value),this._state===mp.REJECTED&&e[2](this._value),e[0]=!0)})}}};function P9(A){let j=[];function e(){return A===void 0||j.length<A}function t(n){return j.splice(j.indexOf(n),1)[0]}function r(n){if(!e())return tq(new rs("Not adding Promise because buffer limit was reached."));let o=n();return j.indexOf(o)===-1&&j.push(o),o.then(()=>t(o)).then(null,()=>t(o).then(null,()=>{})),o}function a(n){return new dc((o,i)=>{let s=j.length;if(!s)return o(!0);let l=setTimeout(()=>{n&&n>0&&o(!1)},n);j.forEach(c=>{uk(c).then(()=>{--s||(clearTimeout(l),o(!0))},i)})})}return{$:j,add:r,drain:a}}function m$(A){if(!A)return{};let j=A.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!j)return{};let e=j[6]||"",t=j[8]||"";return{host:j[4],path:j[5],protocol:j[2],search:e,hash:t,relative:j[5]+e+t}}var hvA=["fatal","error","warning","log","info","debug"];function O9(A){return A==="warn"?"warning":hvA.includes(A)?A:"log"}var qvA=1e3;function J7(){return Date.now()/qvA}function $hj(){let{performance:A}=Yt;if(!A||!A.now)return J7;let j=Date.now()-A.now(),e=A.timeOrigin==null?j:A.timeOrigin;return()=>(e+A.now())/qvA}var df=$hj();var B$,whj=(()=>{let{performance:A}=Yt;if(!A||!A.now){B$="none";return}let j=3600*1e3,e=A.now(),t=Date.now(),r=A.timeOrigin?Math.abs(A.timeOrigin+e-t):j,a=r<j,n=A.timing&&A.timing.navigationStart,i=typeof n=="number"?Math.abs(n+e-t):j,s=i<j;return a||s?r<=i?(B$="timeOrigin",A.timeOrigin):(B$="navigationStart",n):(B$="dateNow",t)})();function od(A,j=[]){return[A,j]}function D9(A,j){let[e,t]=A;return[e,[...t,j]]}function n4(A,j){let e=A[1];for(let t of e){let r=t[0].type;if(j(t,r))return!0}return!1}function R9(A,j){return(j||new TextEncoder).encode(A)}function T9(A,j){let[e,t]=A,r=JSON.stringify(e);function a(n){typeof r=="string"?r=typeof n=="string"?r+n:[R9(r,j),n]:r.push(typeof n=="string"?R9(n,j):n)}for(let n of t){let[o,i]=n;if(a(`
${JSON.stringify(o)}
`),typeof i=="string"||i instanceof Uint8Array)a(i);else{let s;try{s=JSON.stringify(i)}catch{s=JSON.stringify(kk(i))}a(s)}}return typeof r=="string"?r:Ihj(r)}function Ihj(A){let j=A.reduce((r,a)=>r+a.length,0),e=new Uint8Array(j),t=0;for(let r of A)e.set(r,t),t+=r.length;return e}function C9(A,j){let e=typeof A.data=="string"?R9(A.data,j):A.data;return[Ps({type:"attachment",length:e.length,filename:A.filename,content_type:A.contentType,attachment_type:A.attachmentType}),e]}var Phj={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function o4(A){return Phj[A]}function i4(A){if(!A||!A.sdk)return;let{name:j,version:e}=A.sdk;return{name:j,version:e}}function _9(A,j,e,t){let r=A.sdkProcessingMetadata&&A.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:A.event_id,sent_at:new Date().toISOString(),...j&&{sdk:j},...!!e&&t&&{dsn:ad(t)},...r&&{trace:Ps({...r})}}}function S9(A,j,e){let t=[{type:"client_report"},{timestamp:e||J7(),discarded_events:A}];return od(j?{dsn:j}:{},[t])}function xvA(A,j=Date.now()){let e=parseInt(`${A}`,10);if(!isNaN(e))return e*1e3;let t=Date.parse(`${A}`);return isNaN(t)?6e4:t-j}function vvA(A,j){return A[j]||A.all||0}function H9(A,j,e=Date.now()){return vvA(A,j)>e}function M9(A,{statusCode:j,headers:e},t=Date.now()){let r={...A},a=e&&e["x-sentry-rate-limits"],n=e&&e["retry-after"];if(a)for(let o of a.trim().split(",")){let[i,s,,,l]=o.split(":",5),c=parseInt(i,10),k=(isNaN(c)?60:c)*1e3;if(!s)r.all=t+k;else for(let u of s.split(";"))u==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(r[u]=t+k):r[u]=t+k}else n?r.all=t+xvA(n,t):j===429&&(r.all=t+60*1e3);return r}function GvA(A,j){return A(j.stack||"",1)}function K9(A,j){let e={type:j.name||j.constructor.name,value:j.message},t=GvA(A,j);return t.length&&(e.stacktrace={frames:t}),e}var oa=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var RB="production";function g$(){return l$("globalEventProcessors",()=>[])}function N9(A){g$().push(A)}function kf(A,j,e,t=0){return new dc((r,a)=>{let n=A[t];if(j===null||typeof n!="function")r(j);else{let o=n({...j},e);oa&&n.id&&o===null&&$e.log(`Event processor "${n.id}" dropped event`),z7(o)?o.then(i=>kf(A,i,e,t+1).then(r)).then(null,a):kf(A,o,e,t+1).then(r).then(null,a)}})}function s4(A){let j=df(),e={sid:bo(),init:!0,timestamp:j,started:j,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Ohj(e)};return A&&Ek(e,A),e}function Ek(A,j={}){if(j.user&&(!A.ipAddress&&j.user.ip_address&&(A.ipAddress=j.user.ip_address),!A.did&&!j.did&&(A.did=j.user.id||j.user.email||j.user.username)),A.timestamp=j.timestamp||df(),j.abnormal_mechanism&&(A.abnormal_mechanism=j.abnormal_mechanism),j.ignoreDuration&&(A.ignoreDuration=j.ignoreDuration),j.sid&&(A.sid=j.sid.length===32?j.sid:bo()),j.init!==void 0&&(A.init=j.init),!A.did&&j.did&&(A.did=`${j.did}`),typeof j.started=="number"&&(A.started=j.started),A.ignoreDuration)A.duration=void 0;else if(typeof j.duration=="number")A.duration=j.duration;else{let e=A.timestamp-A.started;A.duration=e>=0?e:0}j.release&&(A.release=j.release),j.environment&&(A.environment=j.environment),!A.ipAddress&&j.ipAddress&&(A.ipAddress=j.ipAddress),!A.userAgent&&j.userAgent&&(A.userAgent=j.userAgent),typeof j.errors=="number"&&(A.errors=j.errors),j.status&&(A.status=j.status)}function l4(A,j){let e={};j?e={status:j}:A.status==="ok"&&(e={status:"exited"}),Ek(A,e)}function Ohj(A){return Ps({sid:`${A.sid}`,init:A.init,started:new Date(A.started*1e3).toISOString(),timestamp:new Date(A.timestamp*1e3).toISOString(),status:A.status,errors:A.errors,did:typeof A.did=="number"||typeof A.did=="string"?`${A.did}`:void 0,duration:A.duration,abnormal_mechanism:A.abnormal_mechanism,attrs:{release:A.release,environment:A.environment,ip_address:A.ipAddress,user_agent:A.userAgent}})}var Rhj=1;function fvA(A){let{spanId:j,traceId:e}=A.spanContext(),{data:t,op:r,parent_span_id:a,status:n,tags:o,origin:i}=DB(A);return Ps({data:t,op:r,parent_span_id:a,span_id:j,status:n,tags:o,trace_id:e,origin:i})}function DB(A){return Dhj(A)?A.getSpanJSON():typeof A.toJSON=="function"?A.toJSON():{}}function Dhj(A){return typeof A.getSpanJSON=="function"}function FvA(A){let{traceFlags:j}=A.spanContext();return!!(j&Rhj)}function yvA(A,j,e,t,r,a){let{normalizeDepth:n=3,normalizeMaxBreadth:o=1e3}=A,i={...j,event_id:j.event_id||e.event_id||bo(),timestamp:j.timestamp||J7()},s=e.integrations||A.integrations.map(S=>S.name);Thj(i,A),Shj(i,s),j.type===void 0&&Chj(i,A.stackParser);let l=Mhj(t,e.captureContext);e.mechanism&&pp(i,e.mechanism);let c=r&&r.getEventProcessors?r.getEventProcessors():[],k=wvA().getScopeData();if(a){let S=a.getScopeData();L9(k,S)}if(l){let S=l.getScopeData();L9(k,S)}let u=[...e.attachments||[],...k.attachments];u.length&&(e.attachments=u),c4(i,k);let m=[...c,...g$(),...k.eventProcessors];return kf(m,i,e).then(S=>(S&&_hj(S),typeof n=="number"&&n>0?Hhj(S,n,o):S))}function Thj(A,j){let{environment:e,release:t,dist:r,maxValueLength:a=250}=j;"environment"in A||(A.environment="environment"in j?e:RB),A.release===void 0&&t!==void 0&&(A.release=t),A.dist===void 0&&r!==void 0&&(A.dist=r),A.message&&(A.message=V7(A.message,a));let n=A.exception&&A.exception.values&&A.exception.values[0];n&&n.value&&(n.value=V7(n.value,a));let o=A.request;o&&o.url&&(o.url=V7(o.url,a))}var bvA=new WeakMap;function Chj(A,j){let e=Yt._sentryDebugIds;if(!e)return;let t,r=bvA.get(j);r?t=r:(t=new Map,bvA.set(j,t));let a=Object.keys(e).reduce((n,o)=>{let i,s=t.get(o);s?i=s:(i=j(o),t.set(o,i));for(let l=i.length-1;l>=0;l--){let c=i[l];if(c.filename){n[c.filename]=e[o];break}}return n},{});try{A.exception.values.forEach(n=>{n.stacktrace.frames.forEach(o=>{o.filename&&(o.debug_id=a[o.filename])})})}catch{}}function _hj(A){let j={};try{A.exception.values.forEach(t=>{t.stacktrace.frames.forEach(r=>{r.debug_id&&(r.abs_path?j[r.abs_path]=r.debug_id:r.filename&&(j[r.filename]=r.debug_id),delete r.debug_id)})})}catch{}if(Object.keys(j).length===0)return;A.debug_meta=A.debug_meta||{},A.debug_meta.images=A.debug_meta.images||[];let e=A.debug_meta.images;Object.keys(j).forEach(t=>{e.push({type:"sourcemap",code_file:t,debug_id:j[t]})})}function Shj(A,j){j.length>0&&(A.sdk=A.sdk||{},A.sdk.integrations=[...A.sdk.integrations||[],...j])}function Hhj(A,j,e){if(!A)return null;let t={...A,...A.breadcrumbs&&{breadcrumbs:A.breadcrumbs.map(r=>({...r,...r.data&&{data:kk(r.data,j,e)}}))},...A.user&&{user:kk(A.user,j,e)},...A.contexts&&{contexts:kk(A.contexts,j,e)},...A.extra&&{extra:kk(A.extra,j,e)}};return A.contexts&&A.contexts.trace&&t.contexts&&(t.contexts.trace=A.contexts.trace,A.contexts.trace.data&&(t.contexts.trace.data=kk(A.contexts.trace.data,j,e))),A.spans&&(t.spans=A.spans.map(r=>{let a=DB(r).data;return a&&(r.data=kk(a,j,e)),r})),t}function Mhj(A,j){if(!j)return A;let e=A?A.clone():new W7;return e.update(j),e}function $vA(A){if(A)return Khj(A)?{captureContext:A}:Lhj(A)?{captureContext:A}:A}function Khj(A){return A instanceof W7||typeof A=="function"}var Nhj=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Lhj(A){return Object.keys(A).some(j=>Nhj.includes(j))}function uf(A,j){return El().captureException(A,$vA(j))}function h$(A,j){return El().captureEvent(A,j)}function Q7(A,j){El().addBreadcrumb(A,j)}function Ef(...A){let j=El();if(A.length===2){let[e,t]=A;return e?j.withScope(()=>(j.getStackTop().scope=e,t(e))):j.withScope(t)}return j.withScope(A[0])}function wn(){return El().getClient()}function Bp(){return El().getScope()}function q$(A){let j=wn(),e=pf(),t=Bp(),{release:r,environment:a=RB}=j&&j.getOptions()||{},{userAgent:n}=Yt.navigator||{},o=s4({release:r,environment:a,user:t.getUser()||e.getUser(),...n&&{userAgent:n},...A}),i=e.getSession();return i&&i.status==="ok"&&Ek(i,{status:"exited"}),d4(),e.setSession(o),t.setSession(o),o}function d4(){let A=pf(),j=Bp(),e=j.getSession()||A.getSession();e&&l4(e),IvA(),A.setSession(),j.setSession()}function IvA(){let A=pf(),j=Bp(),e=wn(),t=j.getSession()||A.getSession();t&&e&&e.captureSession&&e.captureSession(t)}function x$(A=!1){if(A){d4();return}IvA()}function k4(A){return A.transaction}function z9(A,j,e){let t=j.getOptions(),{publicKey:r}=j.getDsn()||{},{segment:a}=e&&e.getUser()||{},n=Ps({environment:t.environment||RB,release:t.release,user_segment:a,public_key:r,trace_id:A});return j.emit&&j.emit("createDsc",n),n}function PvA(A){let j=wn();if(!j)return{};let e=z9(DB(A).trace_id||"",j,Bp()),t=k4(A);if(!t)return e;let r=t&&t._frozenDynamicSamplingContext;if(r)return r;let{sampleRate:a,source:n}=t.metadata;a!=null&&(e.sample_rate=`${a}`);let o=DB(t);return n&&n!=="url"&&(e.transaction=o.description),e.sampled=String(FvA(t)),j.emit&&j.emit("createDsc",e),e}function c4(A,j){let{fingerprint:e,span:t,breadcrumbs:r,sdkProcessingMetadata:a}=j;zhj(A,j),t&&Xhj(A,t),Jhj(A,e),Uhj(A,r),Vhj(A,a)}function L9(A,j){let{extra:e,tags:t,user:r,contexts:a,level:n,sdkProcessingMetadata:o,breadcrumbs:i,fingerprint:s,eventProcessors:l,attachments:c,propagationContext:k,transactionName:u,span:m}=j;v$(A,"extra",e),v$(A,"tags",t),v$(A,"user",r),v$(A,"contexts",a),v$(A,"sdkProcessingMetadata",o),n&&(A.level=n),u&&(A.transactionName=u),m&&(A.span=m),i.length&&(A.breadcrumbs=[...A.breadcrumbs,...i]),s.length&&(A.fingerprint=[...A.fingerprint,...s]),l.length&&(A.eventProcessors=[...A.eventProcessors,...l]),c.length&&(A.attachments=[...A.attachments,...c]),A.propagationContext={...A.propagationContext,...k}}function v$(A,j,e){if(e&&Object.keys(e).length){A[j]={...A[j]};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[j][t]=e[t])}}function zhj(A,j){let{extra:e,tags:t,user:r,contexts:a,level:n,transactionName:o}=j,i=Ps(e);i&&Object.keys(i).length&&(A.extra={...i,...A.extra});let s=Ps(t);s&&Object.keys(s).length&&(A.tags={...s,...A.tags});let l=Ps(r);l&&Object.keys(l).length&&(A.user={...l,...A.user});let c=Ps(a);c&&Object.keys(c).length&&(A.contexts={...c,...A.contexts}),n&&(A.level=n),o&&(A.transaction=o)}function Uhj(A,j){let e=[...A.breadcrumbs||[],...j];A.breadcrumbs=e.length?e:void 0}function Vhj(A,j){A.sdkProcessingMetadata={...A.sdkProcessingMetadata,...j}}function Xhj(A,j){A.contexts={trace:fvA(j),...A.contexts};let e=k4(j);if(e){A.sdkProcessingMetadata={dynamicSamplingContext:PvA(j),...A.sdkProcessingMetadata};let t=DB(e).description;t&&(A.tags={transaction:t,...A.tags})}}function Jhj(A,j){A.fingerprint=A.fingerprint?k$(A.fingerprint):[],j&&(A.fingerprint=A.fingerprint.concat(j)),A.fingerprint&&!A.fingerprint.length&&delete A.fingerprint}var Whj=100,U9,W7=class A{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=OvA()}static clone(j){return j?j.clone():new A}clone(){let j=new A;return j._breadcrumbs=[...this._breadcrumbs],j._tags={...this._tags},j._extra={...this._extra},j._contexts={...this._contexts},j._user=this._user,j._level=this._level,j._span=this._span,j._session=this._session,j._transactionName=this._transactionName,j._fingerprint=this._fingerprint,j._eventProcessors=[...this._eventProcessors],j._requestSession=this._requestSession,j._attachments=[...this._attachments],j._sdkProcessingMetadata={...this._sdkProcessingMetadata},j._propagationContext={...this._propagationContext},j._client=this._client,j}setClient(j){this._client=j}getClient(){return this._client}addScopeListener(j){this._scopeListeners.push(j)}addEventProcessor(j){return this._eventProcessors.push(j),this}setUser(j){return this._user=j||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Ek(this._session,{user:j}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(j){return this._requestSession=j,this}setTags(j){return this._tags={...this._tags,...j},this._notifyScopeListeners(),this}setTag(j,e){return this._tags={...this._tags,[j]:e},this._notifyScopeListeners(),this}setExtras(j){return this._extra={...this._extra,...j},this._notifyScopeListeners(),this}setExtra(j,e){return this._extra={...this._extra,[j]:e},this._notifyScopeListeners(),this}setFingerprint(j){return this._fingerprint=j,this._notifyScopeListeners(),this}setLevel(j){return this._level=j,this._notifyScopeListeners(),this}setTransactionName(j){return this._transactionName=j,this._notifyScopeListeners(),this}setContext(j,e){return e===null?delete this._contexts[j]:this._contexts[j]=e,this._notifyScopeListeners(),this}setSpan(j){return this._span=j,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let j=this._span;return j&&j.transaction}setSession(j){return j?this._session=j:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(j){if(!j)return this;let e=typeof j=="function"?j(this):j;if(e instanceof A){let t=e.getScopeData();this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&Object.keys(t.user).length&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint.length&&(this._fingerprint=t.fingerprint),e.getRequestSession()&&(this._requestSession=e.getRequestSession()),t.propagationContext&&(this._propagationContext=t.propagationContext)}else if(ck(e)){let t=j;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=OvA(),this}addBreadcrumb(j,e){let t=typeof e=="number"?e:Whj;if(t<=0)return this;let r={timestamp:J7(),...j},a=this._breadcrumbs;return a.push(r),this._breadcrumbs=a.length>t?a.slice(-t):a,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(j){return this._attachments.push(j),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){let{_breadcrumbs:j,_attachments:e,_contexts:t,_tags:r,_extra:a,_user:n,_level:o,_fingerprint:i,_eventProcessors:s,_propagationContext:l,_sdkProcessingMetadata:c,_transactionName:k,_span:u}=this;return{breadcrumbs:j,attachments:e,contexts:t,tags:r,extra:a,user:n,level:o,fingerprint:i||[],eventProcessors:s,propagationContext:l,sdkProcessingMetadata:c,transactionName:k,span:u}}applyToEvent(j,e={},t=[]){c4(j,this.getScopeData());let r=[...t,...g$(),...this._eventProcessors];return kf(r,j,e)}setSDKProcessingMetadata(j){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...j},this}setPropagationContext(j){return this._propagationContext=j,this}getPropagationContext(){return this._propagationContext}captureException(j,e){let t=e&&e.event_id?e.event_id:bo();if(!this._client)return $e.warn("No client configured on scope - will not capture exception!"),t;let r=new Error("Sentry syntheticException");return this._client.captureException(j,{originalException:j,syntheticException:r,...e,event_id:t},this),t}captureMessage(j,e,t){let r=t&&t.event_id?t.event_id:bo();if(!this._client)return $e.warn("No client configured on scope - will not capture message!"),r;let a=new Error(j);return this._client.captureMessage(j,e,{originalException:j,syntheticException:a,...t,event_id:r},this),r}captureEvent(j,e){let t=e&&e.event_id?e.event_id:bo();return this._client?(this._client.captureEvent(j,{...e,event_id:t},this),t):($e.warn("No client configured on scope - will not capture event!"),t)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(j=>{j(this)}),this._notifyingListeners=!1)}};function wvA(){return U9||(U9=new W7),U9}function OvA(){return{traceId:bo(),spanId:bo().substring(16)}}var mf="7.119.1";var RvA=parseFloat(mf),Qhj=100,G$=class{constructor(j,e,t,r=RvA){this._version=r;let a;e?a=e:(a=new W7,a.setClient(j));let n;t?n=t:(n=new W7,n.setClient(j)),this._stack=[{scope:a}],j&&this.bindClient(j),this._isolationScope=n}isOlderThan(j){return this._version<j}bindClient(j){let e=this.getStackTop();e.client=j,e.scope.setClient(j),j&&j.setupIntegrations&&j.setupIntegrations()}pushScope(){let j=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:j}),j}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(j){let e=this.pushScope(),t;try{t=j(e)}catch(r){throw this.popScope(),r}return z7(t)?t.then(r=>(this.popScope(),r),r=>{throw this.popScope(),r}):(this.popScope(),t)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(j,e){let t=this._lastEventId=e&&e.event_id?e.event_id:bo(),r=new Error("Sentry syntheticException");return this.getScope().captureException(j,{originalException:j,syntheticException:r,...e,event_id:t}),t}captureMessage(j,e,t){let r=this._lastEventId=t&&t.event_id?t.event_id:bo(),a=new Error(j);return this.getScope().captureMessage(j,e,{originalException:j,syntheticException:a,...t,event_id:r}),r}captureEvent(j,e){let t=e&&e.event_id?e.event_id:bo();return j.type||(this._lastEventId=t),this.getScope().captureEvent(j,{...e,event_id:t}),t}lastEventId(){return this._lastEventId}addBreadcrumb(j,e){let{scope:t,client:r}=this.getStackTop();if(!r)return;let{beforeBreadcrumb:a=null,maxBreadcrumbs:n=Qhj}=r.getOptions&&r.getOptions()||{};if(n<=0)return;let i={timestamp:J7(),...j},s=a?OB(()=>a(i,e)):i;s!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",s,e),t.addBreadcrumb(s,n))}setUser(j){this.getScope().setUser(j),this.getIsolationScope().setUser(j)}setTags(j){this.getScope().setTags(j),this.getIsolationScope().setTags(j)}setExtras(j){this.getScope().setExtras(j),this.getIsolationScope().setExtras(j)}setTag(j,e){this.getScope().setTag(j,e),this.getIsolationScope().setTag(j,e)}setExtra(j,e){this.getScope().setExtra(j,e),this.getIsolationScope().setExtra(j,e)}setContext(j,e){this.getScope().setContext(j,e),this.getIsolationScope().setContext(j,e)}configureScope(j){let{scope:e,client:t}=this.getStackTop();t&&j(e)}run(j){let e=V9(this);try{j(this)}finally{V9(e)}}getIntegration(j){let e=this.getClient();if(!e)return null;try{return e.getIntegration(j)}catch{return oa&&$e.warn(`Cannot retrieve integration ${j.id} from the current Hub`),null}}startTransaction(j,e){let t=this._callExtensionMethod("startTransaction",j,e);return oa&&!t&&(this.getClient()?$e.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):$e.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),t}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(j=!1){if(j)return this.endSession();this._sendSessionUpdate()}endSession(){let e=this.getStackTop().scope,t=e.getSession();t&&l4(t),this._sendSessionUpdate(),e.setSession()}startSession(j){let{scope:e,client:t}=this.getStackTop(),{release:r,environment:a=RB}=t&&t.getOptions()||{},{userAgent:n}=Yt.navigator||{},o=s4({release:r,environment:a,user:e.getUser(),...n&&{userAgent:n},...j}),i=e.getSession&&e.getSession();return i&&i.status==="ok"&&Ek(i,{status:"exited"}),this.endSession(),e.setSession(o),o}shouldSendDefaultPii(){let j=this.getClient(),e=j&&j.getOptions();return!!(e&&e.sendDefaultPii)}_sendSessionUpdate(){let{scope:j,client:e}=this.getStackTop(),t=j.getSession();t&&e&&e.captureSession&&e.captureSession(t)}_callExtensionMethod(j,...e){let r=E4().__SENTRY__;if(r&&r.extensions&&typeof r.extensions[j]=="function")return r.extensions[j].apply(this,e);oa&&$e.warn(`Extension method ${j} couldn't be found, doing nothing.`)}};function E4(){return Yt.__SENTRY__=Yt.__SENTRY__||{extensions:{},hub:void 0},Yt}function V9(A){let j=E4(),e=u4(j);return DvA(j,A),e}function El(){let A=E4();if(A.__SENTRY__&&A.__SENTRY__.acs){let j=A.__SENTRY__.acs.getCurrentHub();if(j)return j}return Yhj(A)}function pf(){return El().getIsolationScope()}function Yhj(A=E4()){return(!Zhj(A)||u4(A).isOlderThan(RvA))&&DvA(A,new G$),u4(A)}function Zhj(A){return!!(A&&A.__SENTRY__&&A.__SENTRY__.hub)}function u4(A){return l$("hub",()=>new G$,A)}function DvA(A,j){if(!A)return!1;let e=A.__SENTRY__=A.__SENTRY__||{};return e.hub=j,!0}function Aqj(A,j){return j&&(A.sdk=A.sdk||{},A.sdk.name=A.sdk.name||j.name,A.sdk.version=A.sdk.version||j.version,A.sdk.integrations=[...A.sdk.integrations||[],...j.integrations||[]],A.sdk.packages=[...A.sdk.packages||[],...j.packages||[]]),A}function TvA(A,j,e,t){let r=i4(e),a={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!t&&j&&{dsn:ad(j)}},n="aggregates"in A?[{type:"sessions"},A]:[{type:"session"},A.toJSON()];return od(a,[n])}function CvA(A,j,e,t){let r=i4(e),a=A.type&&A.type!=="replay_event"?A.type:"event";Aqj(A,e&&e.sdk);let n=_9(A,r,t,j);return delete A.sdkProcessingMetadata,od(n,[[{type:a},A]])}var jqj="7";function eqj(A){let j=A.protocol?`${A.protocol}:`:"",e=A.port?`:${A.port}`:"";return`${j}//${A.host}${e}${A.path?`/${A.path}`:""}/api/`}function tqj(A){return`${eqj(A)}${A.projectId}/envelope/`}function rqj(A,j){return p9({sentry_key:A.publicKey,sentry_version:jqj,...j&&{sentry_client:`${j.name}/${j.version}`}})}function _vA(A,j={}){let e=typeof j=="string"?j:j.tunnel,t=typeof j=="string"||!j._metadata?void 0:j._metadata.sdk;return e||`${tqj(A)}?${rqj(A,t)}`}var SvA=[];function aqj(A){let j={};return A.forEach(e=>{let{name:t}=e,r=j[t];r&&!r.isDefaultInstance&&e.isDefaultInstance||(j[t]=e)}),Object.keys(j).map(e=>j[e])}function X9(A){let j=A.defaultIntegrations||[],e=A.integrations;j.forEach(n=>{n.isDefaultInstance=!0});let t;Array.isArray(e)?t=[...j,...e]:typeof e=="function"?t=k$(e(j)):t=j;let r=aqj(t),a=nqj(r,n=>n.name==="Debug");if(a!==-1){let[n]=r.splice(a,1);r.push(n)}return r}function HvA(A,j){let e={};return j.forEach(t=>{t&&W9(A,t,e)}),e}function J9(A,j){for(let e of j)e&&e.afterAllSetup&&e.afterAllSetup(A)}function W9(A,j,e){if(e[j.name]){oa&&$e.log(`Integration skipped because it was already installed: ${j.name}`);return}if(e[j.name]=j,SvA.indexOf(j.name)===-1&&(j.setupOnce(N9,El),SvA.push(j.name)),j.setup&&typeof j.setup=="function"&&j.setup(A),A.on&&typeof j.preprocessEvent=="function"){let t=j.preprocessEvent.bind(j);A.on("preprocessEvent",(r,a)=>t(r,a,A))}if(A.addEventProcessor&&typeof j.processEvent=="function"){let t=j.processEvent.bind(j),r=Object.assign((a,n)=>t(a,n,A),{id:j.name});A.addEventProcessor(r)}oa&&$e.log(`Integration installed: ${j.name}`)}function nqj(A,j){for(let e=0;e<A.length;e++)if(j(A[e])===!0)return e;return-1}function Yn(A,j){return Object.assign(function(...t){return j(...t)},{id:A})}function MvA(A){let j="";for(let e of A){let t=Object.entries(e.tags),r=t.length>0?`|#${t.map(([a,n])=>`${a}:${n}`).join(",")}`:"";j+=`${e.name}@${e.unit}:${e.metric}|${e.metricType}${r}|T${e.timestamp}
`}return j}function KvA(A,j,e,t){let r={sent_at:new Date().toISOString()};e&&e.sdk&&(r.sdk={name:e.sdk.name,version:e.sdk.version}),t&&j&&(r.dsn=ad(j));let a=oqj(A);return od(r,[a])}function oqj(A){let j=MvA(A);return[{type:"statsd",length:j.length},j]}var NvA="Not capturing exception because it's already been captured.",f$=class{constructor(j){if(this._options=j,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],j.dsn?this._dsn=VD(j.dsn):oa&&$e.warn("No DSN provided, client will not send events."),this._dsn){let e=_vA(this._dsn,j);this._transport=j.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...j.transportOptions,url:e})}}captureException(j,e,t){if(YD(j)){oa&&$e.log(NvA);return}let r=e&&e.event_id;return this._process(this.eventFromException(j,e).then(a=>this._captureEvent(a,e,t)).then(a=>{r=a})),r}captureMessage(j,e,t,r){let a=t&&t.event_id,n=nf(j)?j:String(j),o=Yh(j)?this.eventFromMessage(n,e,t):this.eventFromException(j,t);return this._process(o.then(i=>this._captureEvent(i,t,r)).then(i=>{a=i})),a}captureEvent(j,e,t){if(e&&e.originalException&&YD(e.originalException)){oa&&$e.log(NvA);return}let r=e&&e.event_id,n=(j.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(j,e,n||t).then(o=>{r=o})),r}captureSession(j){typeof j.release!="string"?oa&&$e.warn("Discarded session because of missing or non-string release"):(this.sendSession(j),Ek(j,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(j){let e=this._transport;return e?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(j).then(t=>e.flush(j).then(r=>t&&r))):uk(!0)}close(j){return this.flush(j).then(e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(j){this._eventProcessors.push(j)}setupIntegrations(j){(j&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(j){return this.getIntegrationByName(j)}getIntegrationByName(j){return this._integrations[j]}getIntegration(j){try{return this._integrations[j.id]||null}catch{return oa&&$e.warn(`Cannot retrieve integration ${j.id} from the current Client`),null}}addIntegration(j){let e=this._integrations[j.name];W9(this,j,this._integrations),e||J9(this,[j])}sendEvent(j,e={}){this.emit("beforeSendEvent",j,e);let t=CvA(j,this._dsn,this._options._metadata,this._options.tunnel);for(let a of e.attachments||[])t=D9(t,C9(a,this._options.transportOptions&&this._options.transportOptions.textEncoder));let r=this._sendEnvelope(t);r&&r.then(a=>this.emit("afterSendEvent",j,a),null)}sendSession(j){let e=TvA(j,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}recordDroppedEvent(j,e,t){if(this._options.sendClientReports){let r=typeof t=="number"?t:1,a=`${j}:${e}`;oa&&$e.log(`Recording outcome: "${a}"${r>1?` (${r} times)`:""}`),this._outcomes[a]=(this._outcomes[a]||0)+r}}captureAggregateMetrics(j){oa&&$e.log(`Flushing aggregated metrics, number of metrics: ${j.length}`);let e=KvA(j,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}on(j,e){this._hooks[j]||(this._hooks[j]=[]),this._hooks[j].push(e)}emit(j,...e){this._hooks[j]&&this._hooks[j].forEach(t=>t(...e))}_setupIntegrations(){let{integrations:j}=this._options;this._integrations=HvA(this,j),J9(this,j),this._integrationsInitialized=!0}_updateSessionFromEvent(j,e){let t=!1,r=!1,a=e.exception&&e.exception.values;if(a){r=!0;for(let i of a){let s=i.mechanism;if(s&&s.handled===!1){t=!0;break}}}let n=j.status==="ok";(n&&j.errors===0||n&&t)&&(Ek(j,{...t&&{status:"crashed"},errors:j.errors||Number(r||t)}),this.captureSession(j))}_isClientDoneProcessing(j){return new dc(e=>{let t=0,r=1,a=setInterval(()=>{this._numProcessing==0?(clearInterval(a),e(!0)):(t+=r,j&&t>=j&&(clearInterval(a),e(!1)))},r)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(j,e,t,r=pf()){let a=this.getOptions(),n=Object.keys(this._integrations);return!e.integrations&&n.length>0&&(e.integrations=n),this.emit("preprocessEvent",j,e),yvA(a,j,e,t,this,r).then(o=>{if(o===null)return o;let i={...r.getPropagationContext(),...t?t.getPropagationContext():void 0};if(!(o.contexts&&o.contexts.trace)&&i){let{traceId:l,spanId:c,parentSpanId:k,dsc:u}=i;o.contexts={trace:{trace_id:l,span_id:c,parent_span_id:k},...o.contexts};let m=u||z9(l,this,t);o.sdkProcessingMetadata={dynamicSamplingContext:m,...o.sdkProcessingMetadata}}return o})}_captureEvent(j,e={},t){return this._processEvent(j,e,t).then(r=>r.event_id,r=>{if(oa){let a=r;a.logLevel==="log"?$e.log(a.message):$e.warn(a)}})}_processEvent(j,e,t){let r=this.getOptions(),{sampleRate:a}=r,n=zvA(j),o=LvA(j),i=j.type||"error",s=`before send for type \`${i}\``;if(o&&typeof a=="number"&&Math.random()>a)return this.recordDroppedEvent("sample_rate","error",j),tq(new rs(`Discarding event because it's not included in the random sample (sampling rate = ${a})`,"log"));let l=i==="replay_event"?"replay":i,k=(j.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(j,e,t,k).then(u=>{if(u===null)throw this.recordDroppedEvent("event_processor",l,j),new rs("An event processor returned `null`, will not send event.","log");if(e.data&&e.data.__sentry__===!0)return u;let F=sqj(r,u,e);return iqj(F,s)}).then(u=>{if(u===null){if(this.recordDroppedEvent("before_send",l,j),n){let G=1+(j.spans||[]).length;this.recordDroppedEvent("before_send","span",G)}throw new rs(`${s} returned \`null\`, will not send event.`,"log")}let m=t&&t.getSession();if(!n&&m&&this._updateSessionFromEvent(m,u),n){let S=u.sdkProcessingMetadata&&u.sdkProcessingMetadata.spanCountBeforeProcessing||0,G=u.spans?u.spans.length:0,x=S-G;x>0&&this.recordDroppedEvent("before_send","span",x)}let F=u.transaction_info;if(n&&F&&u.transaction!==j.transaction){let S="custom";u.transaction_info={...F,source:S}}return this.sendEvent(u,e),u}).then(null,u=>{throw u instanceof rs?u:(this.captureException(u,{data:{__sentry__:!0},originalException:u}),new rs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${u}`))})}_process(j){this._numProcessing++,j.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_sendEnvelope(j){if(this.emit("beforeEnvelope",j),this._isEnabled()&&this._transport)return this._transport.send(j).then(null,e=>{oa&&$e.error("Error while sending event:",e)});oa&&$e.error("Transport disabled")}_clearOutcomes(){let j=this._outcomes;return this._outcomes={},Object.keys(j).map(e=>{let[t,r]=e.split(":");return{reason:t,category:r,quantity:j[e]}})}};function iqj(A,j){let e=`${j} must return \`null\` or a valid event.`;if(z7(A))return A.then(t=>{if(!ck(t)&&t!==null)throw new rs(e);return t},t=>{throw new rs(`${j} rejected with ${t}`)});if(!ck(A)&&A!==null)throw new rs(e);return A}function sqj(A,j,e){let{beforeSend:t,beforeSendTransaction:r}=A;if(LvA(j)&&t)return t(j,e);if(zvA(j)&&r){if(j.spans){let a=j.spans.length;j.sdkProcessingMetadata={...j.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return r(j,e)}return j}function LvA(A){return A.type===void 0}function zvA(A){return A.type==="transaction"}function Q9(A,j){j.debug===!0&&(oa?$e.enable():OB(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Bp().update(j.initialScope);let t=new A(j);Y9(t),lqj(t)}function Y9(A){let e=El().getStackTop();e.client=A,e.scope.setClient(A)}function lqj(A){A.init?A.init():A.setupIntegrations&&A.setupIntegrations()}var cqj=30;function Bf(A,j,e=P9(A.bufferSize||cqj)){let t={},r=n=>e.drain(n);function a(n){let o=[];if(n4(n,(c,k)=>{let u=o4(k);if(H9(t,u)){let m=UvA(c,k);A.recordDroppedEvent("ratelimit_backoff",u,m)}else o.push(c)}),o.length===0)return uk();let i=od(n[0],o),s=c=>{n4(i,(k,u)=>{let m=UvA(k,u);A.recordDroppedEvent(c,o4(u),m)})},l=()=>j({body:T9(i,A.textEncoder)}).then(c=>(c.statusCode!==void 0&&(c.statusCode<200||c.statusCode>=300)&&oa&&$e.warn(`Sentry responded with status code ${c.statusCode} to sent event.`),t=M9(t,c),c),c=>{throw s("network_error"),c});return e.add(l).then(c=>c,c=>{if(c instanceof rs)return oa&&$e.error("Skipped sending event because buffer is full."),s("queue_overflow"),uk();throw c})}return a.__sentry__baseTransport__=!0,{send:a,flush:r}}function UvA(A,j){if(!(j!=="event"&&j!=="transaction"))return Array.isArray(A)?A[1]:void 0}function Z9(A,j,e=[j],t="npm"){let r=A._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${j}`,packages:e.map(a=>({name:`${t}:@sentry/${a}`,version:mf})),version:mf}),A._metadata=r}var dqj=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],kqj=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],VvA="InboundFilters",uqj=(A={})=>({name:VvA,setupOnce(){},processEvent(j,e,t){let r=t.getOptions(),a=Eqj(A,r);return pqj(j,a)?null:j}}),F$=uqj,m4=Yn(VvA,F$);function Eqj(A={},j={}){return{allowUrls:[...A.allowUrls||[],...j.allowUrls||[]],denyUrls:[...A.denyUrls||[],...j.denyUrls||[]],ignoreErrors:[...A.ignoreErrors||[],...j.ignoreErrors||[],...A.disableErrorDefaults?[]:dqj],ignoreTransactions:[...A.ignoreTransactions||[],...j.ignoreTransactions||[],...A.disableTransactionDefaults?[]:kqj],ignoreInternal:A.ignoreInternal!==void 0?A.ignoreInternal:!0}}function pqj(A,j){return j.ignoreInternal&&xqj(A)?(oa&&$e.warn(`Event dropped due to being internal Sentry Error.
Event: ${dk(A)}`),!0):mqj(A,j.ignoreErrors)?(oa&&$e.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${dk(A)}`),!0):Bqj(A,j.ignoreTransactions)?(oa&&$e.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${dk(A)}`),!0):gqj(A,j.denyUrls)?(oa&&$e.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${dk(A)}.
Url: ${p4(A)}`),!0):hqj(A,j.allowUrls)?!1:(oa&&$e.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${dk(A)}.
Url: ${p4(A)}`),!0)}function mqj(A,j){return A.type||!j||!j.length?!1:qqj(A).some(e=>of(e,j))}function Bqj(A,j){if(A.type!=="transaction"||!j||!j.length)return!1;let e=A.transaction;return e?of(e,j):!1}function gqj(A,j){if(!j||!j.length)return!1;let e=p4(A);return e?of(e,j):!1}function hqj(A,j){if(!j||!j.length)return!0;let e=p4(A);return e?of(e,j):!0}function qqj(A){let j=[];A.message&&j.push(A.message);let e;try{e=A.exception.values[A.exception.values.length-1]}catch{}return e&&e.value&&(j.push(e.value),e.type&&j.push(`${e.type}: ${e.value}`)),oa&&j.length===0&&$e.error(`Could not extract message for event ${dk(A)}`),j}function xqj(A){try{return A.exception.values[0].type==="SentryError"}catch{}return!1}function vqj(A=[]){for(let j=A.length-1;j>=0;j--){let e=A[j];if(e&&e.filename!=="<anonymous>"&&e.filename!=="[native code]")return e.filename||null}return null}function p4(A){try{let j;try{j=A.exception.values[0].stacktrace.frames}catch{}return j?vqj(j):null}catch{return oa&&$e.error(`Cannot extract url for event ${dk(A)}`),null}}var XvA,WvA="FunctionToString",JvA=new WeakMap,Gqj=()=>({name:WvA,setupOnce(){XvA=Function.prototype.toString;try{Function.prototype.toString=function(...A){let j=jq(this),e=JvA.has(wn())&&j!==void 0?j:this;return XvA.apply(e,A)}}catch{}},setup(A){JvA.set(A,!0)}}),rq=Gqj,B4=Yn(WvA,rq);var fqj="cause",Fqj=5,QvA="LinkedErrors",bqj=(A={})=>{let j=A.limit||Fqj,e=A.key||fqj;return{name:QvA,setupOnce(){},preprocessEvent(t,r,a){let n=a.getOptions();s$(K9,n.stackParser,n.maxValueLength,e,j,t,r)}}},yqj=bqj,YvA=Yn(QvA,yqj);var A3={};er(A3,{FunctionToString:()=>B4,InboundFilters:()=>m4,LinkedErrors:()=>YvA});var ZvA=A3;var Hr=Yt,j3=0;function e3(){return j3>0}function Uqj(){j3++,setTimeout(()=>{j3--})}function TB(A,j={},e){if(typeof A!="function")return A;try{let r=A.__sentry_wrapped__;if(r)return typeof r=="function"?r:A;if(jq(A))return A}catch{return A}let t=function(){let r=Array.prototype.slice.call(arguments);try{e&&typeof e=="function"&&e.apply(this,arguments);let a=r.map(n=>TB(n,j));return A.apply(this,a)}catch(a){throw Uqj(),Ef(n=>{n.addEventProcessor(o=>(j.mechanism&&(lf(o,void 0,void 0),pp(o,j.mechanism)),o.extra={...o.extra,arguments:r},o)),uf(a)}),a}};try{for(let r in A)Object.prototype.hasOwnProperty.call(A,r)&&(t[r]=A[r])}catch{}XD(t,A),Ep(A,"__sentry_wrapped__",t);try{Object.getOwnPropertyDescriptor(t,"name").configurable&&Object.defineProperty(t,"name",{get(){return A.name}})}catch{}return t}var Os=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function a3(A,j){let e=n3(A,j),t={type:j&&j.name,value:Wqj(j)};return e.length&&(t.stacktrace={frames:e}),t.type===void 0&&t.value===""&&(t.value="Unrecoverable error caught"),t}function Vqj(A,j,e,t){let r=wn(),a=r&&r.getOptions().normalizeDepth,n={exception:{values:[{type:Zh(j)?j.constructor.name:t?"UnhandledRejection":"Error",value:Qqj(j,{isUnhandledRejection:t})}]},extra:{__serialized__:a4(j,a)}};if(e){let o=n3(A,e);o.length&&(n.exception.values[0].stacktrace={frames:o})}return n}function t3(A,j){return{exception:{values:[a3(A,j)]}}}function n3(A,j){let e=j.stacktrace||j.stack||"",t=Jqj(j);try{return A(e,t)}catch{}return[]}var Xqj=/Minified React error #\d+;/i;function Jqj(A){if(A){if(typeof A.framesToPop=="number")return A.framesToPop;if(Xqj.test(A.message))return 1}return 0}function Wqj(A){let j=A&&A.message;return j?j.error&&typeof j.error.message=="string"?j.error.message:j:"No error message"}function AGA(A,j,e,t){let r=e&&e.syntheticException||void 0,a=g4(A,j,r,t);return pp(a),a.level="error",e&&e.event_id&&(a.event_id=e.event_id),uk(a)}function jGA(A,j,e="info",t,r){let a=t&&t.syntheticException||void 0,n=r3(A,j,a,r);return n.level=e,t&&t.event_id&&(n.event_id=t.event_id),uk(n)}function g4(A,j,e,t,r){let a;if(af(j)&&j.error)return t3(A,j.error);if(LD(j)||n9(j)){let n=j;if("stack"in j)a=t3(A,j);else{let o=n.name||(LD(n)?"DOMError":"DOMException"),i=n.message?`${o}: ${n.message}`:o;a=r3(A,i,e,t),lf(a,i)}return"code"in n&&(a.tags={...a.tags,"DOMException.code":`${n.code}`}),a}return o$(j)?t3(A,j):ck(j)||Zh(j)?(a=Vqj(A,j,e,r),pp(a,{synthetic:!0}),a):(a=r3(A,j,e,t),lf(a,`${j}`,void 0),pp(a,{synthetic:!0}),a)}function r3(A,j,e,t){let r={};if(t&&e){let a=n3(A,e);a.length&&(r.exception={values:[{value:j,stacktrace:{frames:a}}]})}if(nf(j)){let{__sentry_template_string__:a,__sentry_template_values__:n}=j;return r.logentry={message:a,params:n},r}return r.message=j,r}function Qqj(A,{isUnhandledRejection:j}){let e=m9(A),t=j?"promise rejection":"exception";return af(A)?`Event \`ErrorEvent\` captured as ${t} with message \`${A.message}\``:Zh(A)?`Event \`${Yqj(A)}\` (type=${A.type}) captured as ${t}`:`Object captured as ${t} with keys: ${e}`}function Yqj(A){try{let j=Object.getPrototypeOf(A);return j?j.constructor.name:void 0}catch{}}function eGA(A,{metadata:j,tunnel:e,dsn:t}){let r={event_id:A.event_id,sent_at:new Date().toISOString(),...j&&j.sdk&&{sdk:{name:j.sdk.name,version:j.sdk.version}},...!!e&&!!t&&{dsn:ad(t)}},a=Zqj(A);return od(r,[a])}function Zqj(A){return[{type:"user_report"},A]}var h4=class extends f${constructor(j){let e=Hr.SENTRY_SDK_SOURCE||I9();Z9(j,"browser",["browser"],e),super(j),j.sendClientReports&&Hr.document&&Hr.document.addEventListener("visibilitychange",()=>{Hr.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(j,e){return AGA(this._options.stackParser,j,e,this._options.attachStacktrace)}eventFromMessage(j,e="info",t){return jGA(this._options.stackParser,j,e,t,this._options.attachStacktrace)}captureUserFeedback(j){if(!this._isEnabled()){Os&&$e.warn("SDK not enabled, will not capture user feedback.");return}let e=eGA(j,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(e)}_prepareEvent(j,e,t){return j.platform=j.platform||"javascript",super._prepareEvent(j,e,t)}_flushOutcomes(){let j=this._clearOutcomes();if(j.length===0){Os&&$e.log("No outcomes to send");return}if(!this._dsn){Os&&$e.log("No dsn provided, will not send outcomes");return}Os&&$e.log("Sending outcomes:",j);let e=S9(j,this._options.tunnel&&ad(this._dsn));this._sendEnvelope(e)}};var b$;function tGA(){if(b$)return b$;if(u$(Hr.fetch))return b$=Hr.fetch.bind(Hr);let A=Hr.document,j=Hr.fetch;if(A&&typeof A.createElement=="function")try{let e=A.createElement("iframe");e.hidden=!0,A.head.appendChild(e);let t=e.contentWindow;t&&t.fetch&&(j=t.fetch),A.head.removeChild(e)}catch(e){Os&&$e.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return b$=j.bind(Hr)}function rGA(){b$=void 0}function aGA(A,j=tGA()){let e=0,t=0;function r(a){let n=a.body.length;e+=n,t++;let o={body:a.body,method:"POST",referrerPolicy:"origin",headers:A.headers,keepalive:e<=6e4&&t<15,...A.fetchOptions};try{return j(A.url,o).then(i=>(e-=n,t--,{statusCode:i.status,headers:{"x-sentry-rate-limits":i.headers.get("X-Sentry-Rate-Limits"),"retry-after":i.headers.get("Retry-After")}}))}catch(i){return rGA(),e-=n,t--,tq(i)}}return Bf(A,r)}var Axj=4;function nGA(A){function j(e){return new dc((t,r)=>{let a=new XMLHttpRequest;a.onerror=r,a.onreadystatechange=()=>{a.readyState===Axj&&t({statusCode:a.status,headers:{"x-sentry-rate-limits":a.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":a.getResponseHeader("Retry-After")}})},a.open("POST",A.url);for(let n in A.headers)Object.prototype.hasOwnProperty.call(A.headers,n)&&a.setRequestHeader(n,A.headers[n]);a.send(e.body)})}return Bf(A,j)}var q4="?";var jxj=30,exj=40,txj=50;function o3(A,j,e,t){let r={filename:A,function:j,in_app:!0};return e!==void 0&&(r.lineno=e),t!==void 0&&(r.colno=t),r}var rxj=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,axj=/\((\S*)(?::(\d+))(?::(\d+))\)/,nxj=A=>{let j=rxj.exec(A);if(j){if(j[2]&&j[2].indexOf("eval")===0){let a=axj.exec(j[2]);a&&(j[2]=a[1],j[3]=a[2],j[4]=a[3])}let[t,r]=iGA(j[1]||q4,j[2]);return o3(r,t,j[3]?+j[3]:void 0,j[4]?+j[4]:void 0)}},oxj=[jxj,nxj],ixj=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,sxj=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,lxj=A=>{let j=ixj.exec(A);if(j){if(j[3]&&j[3].indexOf(" > eval")>-1){let a=sxj.exec(j[3]);a&&(j[1]=j[1]||"eval",j[3]=a[1],j[4]=a[2],j[5]="")}let t=j[3],r=j[1]||q4;return[r,t]=iGA(r,t),o3(t,r,j[4]?+j[4]:void 0,j[5]?+j[5]:void 0)}},cxj=[txj,lxj],dxj=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,kxj=A=>{let j=dxj.exec(A);return j?o3(j[2],j[1]||q4,+j[3],j[4]?+j[4]:void 0):void 0},uxj=[exj,kxj];var Exj=[oxj,cxj,uxj],oGA=WD(...Exj),iGA=(A,j)=>{let e=A.indexOf("safari-extension")!==-1,t=A.indexOf("safari-web-extension")!==-1;return e||t?[A.indexOf("@")!==-1?A.split("@")[0]:q4,e?`safari-extension:${j}`:`safari-web-extension:${j}`]:[A,j]};var x4=1024,sGA="Breadcrumbs",pxj=(A={})=>{let j={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...A};return{name:sGA,setupOnce(){},setup(e){j.console&&h9(gxj(e)),j.dom&&v9(Bxj(e,j.dom)),j.xhr&&w9(hxj(e)),j.fetch&&b9(qxj(e)),j.history&&p$(xxj(e)),j.sentry&&e.on&&e.on("beforeSendEvent",mxj(e))}}},i3=pxj,lGA=Yn(sGA,i3);function mxj(A){return function(e){wn()===A&&Q7({category:`sentry.${e.type==="transaction"?"transaction":"event"}`,event_id:e.event_id,level:e.level,message:dk(e)},{event:e})}}function Bxj(A,j){return function(t){if(wn()!==A)return;let r,a,n=typeof j=="object"?j.serializeAttribute:void 0,o=typeof j=="object"&&typeof j.maxStringLength=="number"?j.maxStringLength:void 0;o&&o>x4&&(Os&&$e.warn(`\`dom.maxStringLength\` cannot exceed ${x4}, but a value of ${o} was configured. Sentry will use ${x4} instead.`),o=x4),typeof n=="string"&&(n=[n]);try{let s=t.event,l=vxj(s)?s.target:s;r=c$(l,{keyAttrs:n,maxStringLength:o}),a=u9(l)}catch{r="<unknown>"}if(r.length===0)return;let i={category:`ui.${t.name}`,message:r};a&&(i.data={"ui.component_name":a}),Q7(i,{event:t.event,name:t.name,global:t.global})}}function gxj(A){return function(e){if(wn()!==A)return;let t={category:"console",data:{arguments:e.args,logger:"console"},level:O9(e.level),message:zD(e.args," ")};if(e.level==="assert")if(e.args[0]===!1)t.message=`Assertion failed: ${zD(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1);else return;Q7(t,{input:e.args,level:e.level})}}function hxj(A){return function(e){if(wn()!==A)return;let{startTimestamp:t,endTimestamp:r}=e,a=e.xhr[eq];if(!t||!r||!a)return;let{method:n,url:o,status_code:i,body:s}=a,l={method:n,url:o,status_code:i},c={xhr:e.xhr,input:s,startTimestamp:t,endTimestamp:r};Q7({category:"xhr",data:l,type:"http"},c)}}function qxj(A){return function(e){if(wn()!==A)return;let{startTimestamp:t,endTimestamp:r}=e;if(r&&!(e.fetchData.url.match(/sentry_key/)&&e.fetchData.method==="POST"))if(e.error){let a=e.fetchData,n={data:e.error,input:e.args,startTimestamp:t,endTimestamp:r};Q7({category:"fetch",data:a,level:"error",type:"http"},n)}else{let a=e.response,n={...e.fetchData,status_code:a&&a.status},o={input:e.args,response:a,startTimestamp:t,endTimestamp:r};Q7({category:"fetch",data:n,type:"http"},o)}}}function xxj(A){return function(e){if(wn()!==A)return;let t=e.from,r=e.to,a=m$(Hr.location.href),n=t?m$(t):void 0,o=m$(r);(!n||!n.path)&&(n=a),a.protocol===o.protocol&&a.host===o.host&&(r=o.relative),a.protocol===n.protocol&&a.host===n.host&&(t=n.relative),Q7({category:"navigation",data:{from:t,to:r}})}}function vxj(A){return!!A&&!!A.target}var kGA="Dedupe",Gxj=()=>{let A;return{name:kGA,setupOnce(){},processEvent(j){if(j.type)return j;try{if(fxj(j,A))return Os&&$e.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return A=j}}},s3=Gxj,uGA=Yn(kGA,s3);function fxj(A,j){return j?!!(Fxj(A,j)||bxj(A,j)):!1}function Fxj(A,j){let e=A.message,t=j.message;return!(!e&&!t||e&&!t||!e&&t||e!==t||!pGA(A,j)||!EGA(A,j))}function bxj(A,j){let e=cGA(j),t=cGA(A);return!(!e||!t||e.type!==t.type||e.value!==t.value||!pGA(A,j)||!EGA(A,j))}function EGA(A,j){let e=dGA(A),t=dGA(j);if(!e&&!t)return!0;if(e&&!t||!e&&t||(e=e,t=t,t.length!==e.length))return!1;for(let r=0;r<t.length;r++){let a=t[r],n=e[r];if(a.filename!==n.filename||a.lineno!==n.lineno||a.colno!==n.colno||a.function!==n.function)return!1}return!0}function pGA(A,j){let e=A.fingerprint,t=j.fingerprint;if(!e&&!t)return!0;if(e&&!t||!e&&t)return!1;e=e,t=t;try{return e.join("")===t.join("")}catch{return!1}}function cGA(A){return A.exception&&A.exception.values&&A.exception.values[0]}function dGA(A){let j=A.exception;if(j)try{return j.values[0].stacktrace.frames}catch{return}}var BGA="GlobalHandlers",yxj=(A={})=>{let j={onerror:!0,onunhandledrejection:!0,...A};return{name:BGA,setupOnce(){Error.stackTraceLimit=50},setup(e){j.onerror&&($xj(e),mGA("onerror")),j.onunhandledrejection&&(wxj(e),mGA("onunhandledrejection"))}}},l3=yxj,gGA=Yn(BGA,l3);function $xj(A){y9(j=>{let{stackParser:e,attachStacktrace:t}=qGA();if(wn()!==A||e3())return;let{msg:r,url:a,line:n,column:o,error:i}=j,s=i===void 0&&dl(r)?Oxj(r,a,n,o):hGA(g4(e,i||r,void 0,t,!1),a,n,o);s.level="error",h$(s,{originalException:i,mechanism:{handled:!1,type:"onerror"}})})}function wxj(A){$9(j=>{let{stackParser:e,attachStacktrace:t}=qGA();if(wn()!==A||e3())return;let r=Ixj(j),a=Yh(r)?Pxj(r):g4(e,r,void 0,t,!0);a.level="error",h$(a,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Ixj(A){if(Yh(A))return A;let j=A;try{if("reason"in j)return j.reason;if("detail"in j&&"reason"in j.detail)return j.detail.reason}catch{}return A}function Pxj(A){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(A)}`}]}}}function Oxj(A,j,e,t){let r=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,a=af(A)?A.message:A,n="Error",o=a.match(r);return o&&(n=o[1],a=o[2]),hGA({exception:{values:[{type:n,value:a}]}},j,e,t)}function hGA(A,j,e,t){let r=A.exception=A.exception||{},a=r.values=r.values||[],n=a[0]=a[0]||{},o=n.stacktrace=n.stacktrace||{},i=o.frames=o.frames||[],s=isNaN(parseInt(t,10))?void 0:t,l=isNaN(parseInt(e,10))?void 0:e,c=dl(j)&&j.length>0?j:k9();return i.length===0&&i.push({colno:s,filename:c,function:"?",in_app:!0,lineno:l}),A}function mGA(A){Os&&$e.log(`Global Handler attached: ${A}`)}function qGA(){let A=wn();return A&&A.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}var xGA="HttpContext",Rxj=()=>({name:xGA,setupOnce(){},preprocessEvent(A){if(!Hr.navigator&&!Hr.location&&!Hr.document)return;let j=A.request&&A.request.url||Hr.location&&Hr.location.href,{referrer:e}=Hr.document||{},{userAgent:t}=Hr.navigator||{},r={...A.request&&A.request.headers,...e&&{Referer:e},...t&&{"User-Agent":t}},a={...A.request,...j&&{url:j},headers:r};A.request=a}}),c3=Rxj,vGA=Yn(xGA,c3);var Dxj="cause",Txj=5,GGA="LinkedErrors",Cxj=(A={})=>{let j=A.limit||Txj,e=A.key||Dxj;return{name:GGA,setupOnce(){},preprocessEvent(t,r,a){let n=a.getOptions();s$(a3,n.stackParser,n.maxValueLength,e,j,t,r)}}},d3=Cxj,fGA=Yn(GGA,d3);var _xj=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],bGA="TryCatch",Sxj=(A={})=>{let j={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...A};return{name:bGA,setupOnce(){j.setTimeout&&J6(Hr,"setTimeout",FGA),j.setInterval&&J6(Hr,"setInterval",FGA),j.requestAnimationFrame&&J6(Hr,"requestAnimationFrame",Hxj),j.XMLHttpRequest&&"XMLHttpRequest"in Hr&&J6(XMLHttpRequest.prototype,"send",Mxj);let e=j.eventTarget;e&&(Array.isArray(e)?e:_xj).forEach(Kxj)}}},k3=Sxj,yGA=Yn(bGA,k3);function FGA(A){return function(...j){let e=j[0];return j[0]=TB(e,{mechanism:{data:{function:nd(A)},handled:!1,type:"instrument"}}),A.apply(this,j)}}function Hxj(A){return function(j){return A.apply(this,[TB(j,{mechanism:{data:{function:"requestAnimationFrame",handler:nd(A)},handled:!1,type:"instrument"}})])}}function Mxj(A){return function(...j){let e=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in e&&typeof e[r]=="function"&&J6(e,r,function(a){let n={mechanism:{data:{function:r,handler:nd(a)},handled:!1,type:"instrument"}},o=jq(a);return o&&(n.mechanism.data.handler=nd(o)),TB(a,n)})}),A.apply(this,j)}}function Kxj(A){let j=Hr,e=j[A]&&j[A].prototype;!e||!e.hasOwnProperty||!e.hasOwnProperty("addEventListener")||(J6(e,"addEventListener",function(t){return function(r,a,n){try{typeof a.handleEvent=="function"&&(a.handleEvent=TB(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:nd(a),target:A},handled:!1,type:"instrument"}}))}catch{}return t.apply(this,[r,TB(a,{mechanism:{data:{function:"addEventListener",handler:nd(a),target:A},handled:!1,type:"instrument"}}),n])}}),J6(e,"removeEventListener",function(t){return function(r,a,n){let o=a;try{let i=o&&o.__sentry_wrapped__;i&&t.call(this,r,i,n)}catch{}return t.call(this,r,o,n)}}))}var $GA=[F$(),rq(),k3(),i3(),l3(),d3(),s3(),c3()];function wGA(A){return[...$GA]}function u3(A={}){A.defaultIntegrations===void 0&&(A.defaultIntegrations=wGA()),A.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(A.release=__SENTRY_RELEASE__),Hr.SENTRY_RELEASE&&Hr.SENTRY_RELEASE.id&&(A.release=Hr.SENTRY_RELEASE.id)),A.autoSessionTracking===void 0&&(A.autoSessionTracking=!0),A.sendClientReports===void 0&&(A.sendClientReports=!0);let j={...A,stackParser:g9(A.stackParser||oGA),integrations:X9(A),transport:A.transport||(ZD()?aGA:nGA)};Q9(h4,j),A.autoSessionTracking&&Nxj()}function Nxj(){if(typeof Hr.document>"u"){Os&&$e.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}q$({ignoreDuration:!0}),x$(),p$(({from:A,to:j})=>{A!==void 0&&A!==j&&(q$({ignoreDuration:!0}),x$())})}var E3={};er(E3,{Breadcrumbs:()=>lGA,Dedupe:()=>uGA,GlobalHandlers:()=>gGA,HttpContext:()=>vGA,LinkedErrors:()=>fGA,TryCatch:()=>yGA});var IGA=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var RGA="Dedupe",Lxj=()=>{let A;return{name:RGA,setupOnce(){},processEvent(j){if(j.type)return j;try{if(Uxj(j,A))return IGA&&$e.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return A=j}}},y$=Lxj,zxj=Yn(RGA,y$);function Uxj(A,j){return j?!!(Vxj(A,j)||Xxj(A,j)):!1}function Vxj(A,j){let e=A.message,t=j.message;return!(!e&&!t||e&&!t||!e&&t||e!==t||!TGA(A,j)||!DGA(A,j))}function Xxj(A,j){let e=PGA(j),t=PGA(A);return!(!e||!t||e.type!==t.type||e.value!==t.value||!TGA(A,j)||!DGA(A,j))}function DGA(A,j){let e=OGA(A),t=OGA(j);if(!e&&!t)return!0;if(e&&!t||!e&&t||(e=e,t=t,t.length!==e.length))return!1;for(let r=0;r<t.length;r++){let a=t[r],n=e[r];if(a.filename!==n.filename||a.lineno!==n.lineno||a.colno!==n.colno||a.function!==n.function)return!1}return!0}function TGA(A,j){let e=A.fingerprint,t=j.fingerprint;if(!e&&!t)return!0;if(e&&!t||!e&&t)return!1;e=e,t=t;try{return e.join("")===t.join("")}catch{return!1}}function PGA(A){return A.exception&&A.exception.values&&A.exception.values[0]}function OGA(A){let j=A.exception;if(j)try{return j.values[0].stacktrace.frames}catch{return}}var CGA={};Hr.Sentry&&Hr.Sentry.Integrations&&(CGA=Hr.Sentry.Integrations);var UTe={...CGA,...ZvA,...E3};var Pr={};er(Pr,{clientDescriptor:()=>B3,device:()=>G4,getDevice:()=>aq,getb5xDevice:()=>f4,initializeDevice:()=>Qxj,isEdge:()=>$$,setDevice:()=>HGA,setDeviceUsesCredentialBundle:()=>g3,setIsEdge:()=>Yxj});var m3=!1,G4,B3,_GA,SGA,v4,p3,aq=()=>G4,f4=()=>v4,HGA=(A,j)=>{let e=Number.parseInt(A.clientVersion,10)||0,t=A.clientName+"/"+e;j&&(m3=!0),A.fromDeviceInit?(v4=A,p3=t,Wxj()):(_GA=A,SGA=t,h3())},g3=()=>{m3=!0,h3()},h3=()=>{G4=_GA,B3=SGA},Wxj=()=>{m3||(v4&&p3?(G4=v4,B3=p3):h3())},Qxj=HGA,$$=!1,Yxj=A=>$$=A;var $A={};er($A,{Jwe:()=>xf,JweB:()=>Fa,JweHeader:()=>Wvj,JwkEcPriKey:()=>_B,JwkEcPriKeyDeprecated:()=>Xvj,JwkEcPubKey:()=>cq,JwkRsaPriKey:()=>pk,JwkRsaPubKey:()=>Au,JwkSymKey:()=>yo,JwkSymKeyOptionalKid:()=>Uvj,Jws:()=>Qvj,JwsB:()=>Jvj,JwsHeader:()=>Yvj,JwtHeader:()=>Zvj,KeysetCiphertext:()=>ns,KeysetCiphertextV2:()=>AGj,correctJwkEcPriKey:()=>C3,correctJwkEcPubKey:()=>_3,correctJwkNumber:()=>as,correctJwkRsaPriKeyIfNeeded:()=>T$,correctJwkRsaPubKeyIfNeeded:()=>D$,exportKey:()=>_$,exportUnvalidatedKey:()=>C$,getRandomBytes:()=>ta,getRandomValues:()=>S$,getRsaKeySize:()=>T3,getSalt:()=>S3,init:()=>cfA,isUsingWebkitSubtle:()=>lfA,keyOpsToBitMask:()=>Nvj,setSupport:()=>aGj,sha256:()=>Lvj,subtle:()=>De,supports:()=>xp,testsComplete:()=>tGj,testsError:()=>rGj,unsafeHashStringSha1UpperHex:()=>zvj,waitForInit:()=>jGj,waitForTests:()=>eGj,webkitSubtle:()=>C4});var FA=J(tA());var Nt="A256GCM",w$=A=>A===Nt,gp="mp",MGA={name:"AES-GCM",length:256},gf=A=>{if(A===Nt)return MGA;throw new Error("Unexpected enc")};var KGA=()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global};var Zxj=function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};function q3(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return function(){return j(A.apply(this,arguments))};case 3:return function(){return e(j(A.apply(this,arguments)))};case 4:return function(){return t(e(j(A.apply(this,arguments))))};case 5:return function(){return r(t(e(j(A.apply(this,arguments)))))};case 6:return function(){return a(r(t(e(j(A.apply(this,arguments))))))};case 7:return function(){return n(a(r(t(e(j(A.apply(this,arguments)))))))};case 8:return function(){return o(n(a(r(t(e(j(A.apply(this,arguments))))))))};case 9:return function(){return i(o(n(a(r(t(e(j(A.apply(this,arguments)))))))))}}}function x3(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return j(A);case 3:return e(j(A));case 4:return t(e(j(A)));case 5:return r(t(e(j(A))));case 6:return a(r(t(e(j(A)))));case 7:return n(a(r(t(e(j(A))))));case 8:return o(n(a(r(t(e(j(A)))))));case 9:return i(o(n(a(r(t(e(j(A))))))));default:{for(var s=arguments[0],l=1;l<arguments.length;l++)s=arguments[l](s);return s}}}var hf=function(A,j){var e=typeof A=="number"?function(t){return t.length>=A}:A;return function(){var t=Array.from(arguments);return e(arguments)?j.apply(this,t):function(r){return j.apply(void 0,Zxj([r],t,!1))}}};var NGA=function(A){return A._tag==="Some"},LGA={_tag:"None"},zGA=function(A){return{_tag:"Some",value:A}};function v3(A){return function(j,e){return A.map(j,function(){return e})}}function UGA(A){var j=v3(A);return function(e){return j(e,void 0)}}function F4(A){return function(j,e){return A.chain(j,function(t){return A.map(e(t),function(){return t})})}}function VGA(A){return function(j){return q3(j,A.fromEither)}}function XGA(A,j){var e=VGA(A),t=F4(j);return function(r,a){return t(r,e(a))}}var hp=LGA,nq=zGA;var evj=function(A){return A._tag==="Left"?hp:nq(A.right)},JGA=function(A,j){return x3(A,b4(j))},tvj=function(A,j){return x3(A,rvj(j))};var G3="Option";var b4=function(A){return function(j){return qf(j)?hp:nq(A(j.value))}},WGA={URI:G3,map:JGA},BCe=hf(2,v3(WGA)),gCe=UGA(WGA);var rvj=function(A){return function(j){return qf(j)||qf(A)?hp:nq(j.value(A.value))}};var f3=hf(2,function(A,j){return qf(A)?hp:j(A.value)}),QGA={URI:G3,map:JGA,ap:tvj,chain:f3};var hCe=hf(2,function(A,j){return qf(A)?j():A});var F3=evj,avj={URI:G3,fromEither:F3},b3=NGA,qf=function(A){return A._tag==="None"};var YGA=function(A){return function(j){return qf(j)?A():j.value}};var qCe=hf(2,F4(QGA)),xCe=hf(2,XGA(avj,QGA));var ZGA=function(A){return A==null?hp:nq(A)};var Z7;(function(A){A.Web="B",A.iOS="I",A.Android="A",A.Windows="W",A.Mac="M",A.CLI="C",A.API="P",A.ThirdParty="T",A.MobileWeb="O"})(Z7||(Z7={}));var AfA=60,ovj=64,ivj=64,svj=100,y3=32,lvj=5,cvj=3,dvj=/\W|_/g,kvj=60,uvj=255,Evj=!1,pvj=A=>JSON.stringify(A)||typeof A,CB=Yr,mvj=(A,j)=>A.filter(e=>!!e&&j(e)),$3=(A,j,e)=>xi(e,(t,r,a)=>({...t,[A(r,a)]:j(r,a)}),{}),y4=(...A)=>A.reduce((j,e)=>typeof e!="string"||e.length===0?j:j.length===0?e:JR(j,"/")&&lp(e,"/")?j+e.slice(1):JR(j,"/")||lp(e,"/")?j+e:j+"/"+e,""),Bvj=(A,j,e)=>{if(j<0||j>=A.length)throw new Error("moveArrayItem: currentIndex out of bounds");if(e<0||e>=A.length)throw new Error("moveArrayItem: newIndex out of bounds");return j===e?A.slice():A.map((t,r)=>r===e?A[j]:j<=r&&r<e?A[r+1]:e<r&&r<=j?A[r-1]:t)},w3=A=>A?A.trim().normalize("NFKD"):"",iq=async A=>new Promise((j,e)=>{let t=new FileReader;t.onloadend=()=>{let r=t.result;if(typeof r!="string"){e(new Error("Invalid FileReader result."));return}let a="data:attachment/file"+r.slice(r.search(/[,;]/));j(a)},t.readAsDataURL(A)}),In=A=>{let j=A.reduce((t,r)=>t+r.byteLength,0),e=new Uint8Array(j);return A.reduce((t,r)=>(e.set(r,t),t+r.byteLength),0),e},gvj=(A,j)=>A.trim().toLowerCase()+":"+j,I$=A=>typeof A=="number"&&!Number.isNaN(A),sq=A=>{if(!A||A.length<6||A.length>255)return!1;let j=A.trim().split("@"),e=j[1];return j.length===2&&/^[\w'+-]([\w'+.-]*[\w'+-])?@\w([\w.-]*\w)?\.[A-Za-z]{2,20}$/.test(A)&&e!==void 0&&P$(e)},P$=A=>/^([\da-z]([\da-z-]*[\da-z])?\.)+[\da-z]{2,}$/i.test(A),hvj=A=>{let j=lp(A,"*.")?A.slice(2):A;return P$(j)},qvj=A=>/^[2-7A-Z]{13}$/.test(A),xvj=20,I3=A=>/^[\dA-Z]{1,11}(-[\dA-Z]{8})?$/.test(A),$4=A=>/^[a-z0-9]{1,11}(-?[a-z0-9]{1,11})?$/i.test(A),w4=A=>/^[\dA-Z]{26}$/.test(A),vvj=["B","I","A","W","M","C","P","T"],Gvj=A=>Fr(vvj,A),fvj=A=>A!==Z7.Web&&A!==Z7.MobileWeb&&A!==Z7.ThirdParty,Fvj=A=>/^\d{6}$/.test(A),Pn=async A=>new Promise(j=>{setTimeout(j,A)}),bvj=async(A,j)=>(await Pn(A),j),I4=()=>{let A,j,e=hp,t=hp,r=()=>{if(b3(e))return"Promise was already resolved";if(b3(t))return"Promise was already rejected"},a=new Promise((n,o)=>{A=i=>{let s=r();return s||(e=nq(i),n(i)),s},j=i=>{let s=r();return s||(t=nq(i),o(i)),s}});if(!A||!j)throw new Error("CallbackPromise functions were not initialized");return{resolve:A,reject:j,promise:a}},W6=async(A,j,e)=>Jo(e,j).reduce(async(t,r)=>t.then(async a=>{let n=await A(r);return[...a,...n]}),Promise.resolve([])),P4=async(A,j,e)=>W6(async t=>Promise.all(t.map(A)),j,e),yvj=async(A,j)=>{let e=[];for(let t=0;t<j;t++)e.push(await A());return e},O4=A=>A?A.split(",").map(j=>j.trim()).filter(j=>j!==""):[],$vj=(A,j)=>{if(!A)return"";let e=j?", ":",";return O4(A).join(e)},wvj=A=>A.toLowerCase().replace(/\s/g,""),Ivj=()=>navigator.userAgent.includes("Mac OS X")?"\u2318":"ctrl",Pvj=A=>!A||!A.includes(".")?"":wB(A.split("."))?.toLowerCase()??"",jfA=/["%;<>[\\\]{}]/g,efA=/\/{2,}/g,tfA=A=>A?A.replace(jfA,"").replace(efA,"/"):"",Ovj=async A=>new Promise((j,e)=>{let t=new FileReader;t.addEventListener("load",()=>{if(!t.result||typeof t.result!="object"||!("byteLength"in t.result)){e(new Error("Invalid FileReader result."));return}t.result.byteLength,j(t.result)}),t.addEventListener("error",()=>{e(t.error??new Error("Unexpected FileReader error"))}),t.readAsArrayBuffer(A)}),Rvj=A=>{let j=A.trim().toLowerCase().replace(/^https:\/\//,"").replace(/\.1password\.com(.*)/,"").replace(/\s+/g,"-").replace(/[^\da-z-]/g,"").replace(/-+/g,"-");return j.length>y3&&(j=j.slice(0,y3)),j},Dvj=A=>tfA(A).slice(0,AfA),Tvj=(A,j)=>{if(!A)return"";if(!j)return A;let e=new RegExp("[^"+j+"]","g");return A.replace(e,"")},Cvj=/[\d+.A-Za-z-]+/,qp=A=>new RegExp("^"+Cvj.source+":").test(A)?A:"https://"+A,fi=A=>{if(!A)return"";let j=A.split(".");return!j||j.length<2?"":j.slice(1).join(".")},oq;(function(A){A.US="us",A.CA="ca",A.EU="eu",A.ES="es",A.IN="in"})(oq||(oq={}));var _vj=[oq.US,oq.CA,oq.ES,oq.IN],Svj=["as","gu","mh","mp","fm","pw","pr","vi"],R4=A=>{if(!A)return"us";let j=A.split(".");if(!j||j.length<2)return"us";let e=j[j.length-1];if(!e)return"us";if(Fr(e,":")){let[t]=e.split(":");t!==void 0&&(e=t)}switch(e){case"ca":return"ca";case"eu":return"eu";default:return"us"}},P3=(A,j,e)=>A>j&&A<=e;var R$={};er(R$,{primesAreReversed:()=>nfA,swapPrimes:()=>ofA,swapPrimesIfNeeded:()=>O3});var afA=J(lq()),O$=J(Fo()),nfA=A=>T4(A.p).compareTo(T4(A.q))<0,O3=A=>nfA(A)?ofA(A):A,ofA=A=>({...A,p:A.q,q:A.p,dp:A.dq,dq:A.dp,qi:Mvj(A.q,A.p)}),T4=A=>{let j=O$.codec.hex.fromBits(O$.codec.base64url.toBits(A));return new afA.BigInteger(j,16)},Hvj=A=>{let j=A.toString(16),e=j.length%2===1?"0"+j:j;return O$.codec.base64url.fromBits(O$.codec.hex.toBits(e))},Mvj=(A,j)=>Hvj(T4(j).modInverse(T4(A)));var ifA=p`web-api/util/crypto.ts`,as=(A,j,e)=>{if(!A)return A;let t=ej(A);if(!t||t.length===0)return A;if(t.length>j)throw new Error("JWK number is longer than expected");if(e==="pad"){if(t.length===j)return A;let r=new Uint8Array(j);r.set(t,j-t.length),t=r}else{if(t[0]!==0)return A;let r=0;for(;r<t.length&&t[r]===0;)r+=1;t=t.subarray(r)}return Aj(t)},S4=A=>qi(A,"use"),D$=A=>{let j=$$?"pad":"trim",e={...A,e:as(A.e,3,j),n:as(A.n,T3(A),j)};return S4(e)},T$=A=>{let j=$$?"pad":"trim",e=T3(A),t=e/2,r={...A,d:as(A.d,e,j),dp:as(A.dp,t,j),dq:as(A.dq,t,j),e:as(A.e,3,j),n:as(A.n,e,j),p:as(A.p,t,j),q:as(A.q,t,j),qi:as(A.qi,t,j)};return O3(S4(r))},T3=A=>{let j=t9(A.n),e=[256,384,512].find(t=>t>=j);if(!e)throw new Error("RSA modulus is larger than 4096-bit");return e},C3=A=>S4({...A,x:as(A.x,32,"pad"),y:as(A.y,32,"pad"),d:as(A.d,32,"pad")}),_3=A=>S4({...A,x:as(A.x,32,"pad"),y:as(A.y,32,"pad")}),Kvj={sign:1,verify:2,encrypt:4,decrypt:8,wrapKey:16,unwrapKey:32,deriveKey:64,deriveBits:128},Nvj=A=>A.reduce((j,e)=>j|Kvj[e],0),Lvj=async A=>{let j=await De.digest({name:"SHA-256"},A);return new Uint8Array(j)},zvj=async A=>Promise.resolve().then(async()=>De.digest({name:"SHA-1"},Ij(A)).then(j=>Wn(new Uint8Array(j)).toUpperCase())),S3=A=>Aj(ta(A/8)),_4=A=>"byteLength"in A&&typeof A.byteLength=="number",C$=async(A,j)=>{let e=await De.exportKey("jwk",j);return _4(e)&&Rs([p`Unexpected ArrayBuffer: data`],ifA,p`exportUnvalidatedKey`),{..._4(e)?cj(e,Ne).unwrap():e,kid:A}},_$=async(A,j,e)=>{let t=await De.exportKey("jwk",j);_4(t)&&Rs([p`Unexpected ArrayBuffer: data`],ifA,p`exportKey`);let r=_4(t)?cj(t,Ne).unwrap():t;return cj({...r,kid:A},e).unwrap()},sfA=FA.union([FA.tuple([FA.literal("encrypt"),FA.literal("decrypt")]),FA.tuple([FA.literal("decrypt"),FA.literal("encrypt")])]),yo=FA.readonly(FA.type({kid:FA.string,ext:FA.boolean,kty:FA.literal("oct"),key_ops:sfA,alg:FA.string,k:FA.string}),"JwkSymKey"),Uvj=FA.readonly(FA.type({kid:qA(FA.string,""),ext:FA.boolean,kty:FA.literal("oct"),key_ops:sfA,alg:FA.string,k:FA.string}),"JwkSymKeyOptionalKid"),Au=FA.readonly(FA.intersection([FA.type({kid:FA.string,ext:FA.boolean,key_ops:Qo(FA.tuple([FA.literal("encrypt")]),A=>(Or(new xe({errorClass:W("JwkRsaPubKey_key_ops"),message:p`JwkRsaPubKey_key_ops value: ${W(JSON.stringify(A))}`})),["encrypt"])),kty:FA.literal("RSA"),alg:FA.string,e:FA.string,n:FA.string},"type"),FA.partial({use:FA.literal("enc")},"partial")]),"JwkRsaPubKey"),pk=FA.readonly(FA.intersection([FA.type({kid:FA.string,ext:FA.boolean,key_ops:Qo(FA.tuple([FA.literal("decrypt")]),()=>["decrypt"]),kty:FA.literal("RSA"),alg:FA.string,e:FA.string,n:FA.string,d:FA.string,dp:FA.string,dq:FA.string,p:FA.string,q:FA.string,qi:FA.string},"type"),FA.partial({use:FA.literal("enc")},"partial")]),"JwkRsaPriKey"),H3=FA.union([FA.literal("P-256"),FA.literal("P-384")]),cq=FA.readonly(FA.intersection([FA.type({kid:FA.string,ext:FA.boolean,kty:FA.literal("EC"),key_ops:FA.tuple([FA.literal("verify")]),crv:H3,x:FA.string,y:FA.string},"type"),FA.partial({use:FA.literal("sig")},"partial")]),"JwkEcPubKey"),_B=FA.readonly(FA.intersection([FA.type({kid:FA.string,ext:FA.boolean,kty:FA.literal("EC"),key_ops:FA.tuple([FA.literal("sign")]),crv:H3,x:FA.string,y:FA.string,d:FA.string},"type"),FA.partial({use:FA.literal("sig")},"partial")]),"JwkEcPriKey"),Vvj=FA.union([FA.tuple([FA.literal("sign"),FA.literal("verify")]),FA.tuple([FA.literal("verify"),FA.literal("sign")]),FA.tuple([FA.literal("sign")])]),Xvj=FA.readonly(FA.intersection([FA.type({kid:FA.string,ext:FA.boolean,kty:FA.literal("EC"),key_ops:Vvj,crv:H3,x:FA.string,y:FA.string,d:FA.string},"type"),FA.partial({use:FA.literal("sig")},"partial")]),"JwkEcPriKeyDeprecated"),Jvj=FA.readonly(FA.type({kid:FA.string,alg:FA.string,s:FA.string}),"JwsB"),Fa=FA.intersection([FA.type({kid:FA.string,enc:FA.string,cty:FA.string,data:FA.string},"type"),FA.partial({iv:Gj(FA.string),alg:FA.string,p2c:FA.number,p2s:FA.string},"partial")],"JweB"),xf=FA.readonly(FA.type({protected:FA.string,encrypted_key:FA.string,iv:FA.string,ciphertext:FA.string,tag:FA.string}),"Jwe"),Wvj=FA.readonly(FA.type({typ:FA.literal("jose+json"),alg:FA.string,enc:FA.literal(Nt),kid:FA.string}),"JweHeader"),Qvj=FA.readonly(FA.type({protected:FA.string,payload:FA.string,signature:FA.string}),"Jws"),Yvj=FA.readonly(FA.type({typ:FA.literal("jose+json"),alg:FA.string,kid:FA.string}),"JwsHeader"),Zvj=FA.readonly(FA.type({typ:FA.literal("JWT"),kid:FA.union([FA.string,FA.undefined]),alg:FA.literal("ES256")}),"JwtHeader"),ns=FA.readonly(FA.intersection([FA.type({uuid:FA.string,sn:FA.number,encryptedBy:FA.string,encSymKey:Fa,pubKey:Au,encPriKey:Fa},"type"),FA.partial({spubKey:cq,encSPriKey:Fa},"partial")]),"KeysetCiphertext"),AGj=FA.readonly(FA.type({uuid:FA.string,sn:FA.number,spec:FA.literal(2),ePubKey:Au,sPubKey:cq,encKeyData:xf}),"KeysetCiphertextV2"),S$,ta=A=>S$(new Uint8Array(A)),De,C4,lfA=!1,R3=I4(),M3=I4(),jGj=R3.promise,eGj=M3.promise,tGj=M3.resolve,rGj=M3.reject,D3=KGA(),cfA=(A=D3?.crypto)=>{try{if(typeof A>"u")throw new TypeError("Crypto is unavailable");S$=A.getRandomValues.bind(A),De=A.subtle,C4=A.webkitSubtle,!De&&C4&&(De=C4,lfA=!0),R3.resolve()}catch(j){R3.reject(j)}};D3?.crypto&&cfA(D3.crypto);var xp={jwkImport:!0,rsaOaep256:!0,nativeAesGcm:!0,nativePbes2:!0,nativeEcdsa:!0},aGj=A=>{xp={...xp,...A}};var vp=J(Fo());var dfA=26,Se=()=>N$(16),H4=A=>/^[2-7A-Z]{26}$/.test(A),M4=A=>/^[\da-z]{26}$/.test(A),nGj=H4,H$=H4,oGj=H4,iGj=H4,M$=M4,dq=M4,K3=M4,sGj=M4,N3=A=>A==="group"?K3:H$,L3=A=>j=>typeof j=="string"?A(j)?j:"":j&&j.uuid&&A(j.uuid)?j.uuid:"",kfA=A=>vp.codec.base32.fromBits(A,!0).slice(0,dfA),ufA=A=>kfA(A).toLowerCase(),SB=A=>ufA(vp.codec.bytes.toBits(A)),lGj=A=>kfA(vp.hash.sha256.hash(A.toLowerCase())),cGj=(A,j)=>{let e=A.slice(0,8);try{let t=vp.codec.base32.toBits(e);return vp.bitArray.extract(t,0,vp.bitArray.bitLength(t))%j}catch{return 0}},$o=L3(H$),K$=L3(dq),mk=L3(K3);var dGj=9007199254740991,kGj=-9007199254740991,EfA=6,N$=A=>{let j=ta(A||4);return SB(j)},uGj=A=>{if(A.length===0)throw new Error("selectRandomElement: Cannot select element of empty array");return A[s6(0,A.length-1)]},pfA=2,EGj=2**(pfA*8),z3=(A=.5)=>K4(pfA)/EGj<A,s6=(A,j)=>{if(typeof j!="number"||typeof A!="number")throw new TypeError("Boundaries must be defined");if(j<A)throw new Error("Upper boundary cannot be less than lower boundary");if(j===A)return A;let e=j-A+1,t=Math.ceil(Math.log(e)/Math.log(2)/8);if(t>EfA||j>dGj||A<kGj)throw new Error("Boundaries are too large for JavaScript");let r=256**t,a=r-r%e,n=new Uint8Array(t),o;do o=mfA(S$(n));while(o>=a);let i=o%e+A;if(i<A||j<i)throw new Error("Somehow managed to generate a result out of range");return i},K4=A=>{if(A>EfA||A<1)throw new Error("Byte length must be in [1, 6]");return mfA(ta(A))},mfA=A=>xi(A,(j,e,t)=>j+e*256**t,0);var U3;(function(A){A.ContextError=p`ContextError`,A.RequestError=p`RequestError`,A.ValidationError=p`ValidationError`})(U3||(U3={}));var Or=A=>{if(!X3||A.sampleRate!==void 0&&!z3(A.sampleRate))return;let j=aq();Ef(e=>{let t=sk({},j?BfA(j):{},A.metaData??{});for(let[r,a]of Object.entries(t))e.setContext(r,a);if(A.severityLevel&&e.setLevel(A.severityLevel),A.userUuid&&e.setUser({id:A.userUuid.str}),V3&&e.setTag("source",V3),A.tags)for(let[r,a]of Object.entries(A.tags))e.setTag(r,a.str);uf(A)})},BfA=A=>{let j=A.osName==="MacOSX"?"macOS":A.osName;return{app:{device_app_hash:W(A.uuid??""),app_name:W(A.clientName??""),app_build:W(A.clientVersion??"")},browser:{name:W(A.name??""),version:W(A.model??"")},os:{name:W(j??""),version:W(A.osVersion??"")}}},L$=A=>{for(let j of A)Or(j)},X3=!1,V3,pGj=({appVersion:A,dsn:j,environment:e,sampleRate:t=1,source:r})=>{u3({defaultIntegrations:!1,sendDefaultPii:!1,autoSessionTracking:!1,dsn:j,environment:e,integrations:[y$(),rq()],release:A,sampleRate:t}),V3=r,X3=!0},mGj=()=>X3;var cj=(A,j,e)=>{let t=e?.mode??"default",r=QxA((0,gfA.mapLeft)(n$.reportFailure)(j.decode(A)),gGj);return r.type==="err"&&((t==="unsafe_report_only"||e?.file||e?.func)&&Rs(r.value,e?.file||p`unknown`,e?.func||p`unknown`,e?.errorClass,e?.context),t==="unsafe_report_only"&&!Qn())?L7(A):r},BGj=A=>j=>cj(j,A).unwrap(),gGj=A=>new ND(Uy(A,p`\n`)),Rs=(A,j,e,t,r)=>{let a=A.map(n=>{let o=Uy(Yr([r,n]),p`: `);return console.error(`${j.str}#${e.str} failed to decode: ${o.str}`),new xe({errorClass:t||$n.ValidationError,message:o})});L$(a)};var hGj=(A,j)=>A.reduce((e,t,r,a)=>j(t,r,a)?e+1:e,0),W3=(A,j)=>A.length===j.length&&A.every(e=>j.includes(e));var Eq={};er(Eq,{BUSINESS_TIER:()=>qGj,Card:()=>kq,CurrencyCodes:()=>Q3,GiftCard:()=>z$,InAppPurchaseSelectedSubscriptionTier:()=>Az,Invoice:()=>N4,RestrictionType:()=>Z3,Subscription:()=>pl,getBlankTier:()=>L4});var kq;(function(A){let j;(function(t){t.Visa="visa",t.Mastercard="mastercard",t.Amex="amex",t.Discover="discover",t.UsBankAccount="us_bank_account",t.AcssDebit="acss_debit",t.SepaDebit="sepa_debit",t.Unknown="unknown",t.AmericanExpress="american express"})(j=A.Brand||(A.Brand={}));let e=new Map([[j.Visa,"Visa"],[j.Mastercard,"Mastercard"],[j.Amex,"American Express"],[j.Discover,"Discover"],[j.UsBankAccount,"US Bank Account"],[j.AcssDebit,"ACSS Debit"],[j.SepaDebit,"SEPA Debit"],[j.Unknown,"Unknown"]]);A.getBrandText=t=>e.has(t)?e.get(t)||"Unknown":e.get(j.Unknown)||"Unknown",A.getValidBrand=t=>{switch(t=t?.toLocaleLowerCase(),t){case j.Visa:case j.Mastercard:case j.Discover:case j.AcssDebit:case j.SepaDebit:case j.UsBankAccount:return t;case j.AmericanExpress:case j.Amex:return j.Amex;case void 0:default:return j.Unknown}},A.isExpired=t=>{if(!t.expYear||!t.expMonth)return!1;let r=new Date,a=new Date(t.expYear,t.expMonth);return r>a}})(kq||(kq={}));var Q3;(function(A){A.None="none",A.USD="USD",A.CAD="CAD",A.EUR="EUR"})(Q3||(Q3={}));var z$;(function(A){A.create=j=>Object.freeze({code:"",redeemedAt:"",amount:0,description:"",purchaserEmail:"",...j}),A.CodePrefix="GC"})(z$||(z$={}));var N4;(function(A){A.getSubscriptionLineItems=j=>_7(j.lines,e=>e.quantity>0),A.getAdjustmentLineItems=j=>_7(j.lines,e=>!e.quantity),A.getDiscountAmount=j=>{if(j.discount&&j.discount.coupon){let e=xi(j.lines,(t,r)=>r.discountable?t+r.amount:t,0);return j.discount.coupon.amountOff||e*j.discount.coupon.percentOff/100}return 0}})(N4||(N4={}));var kc=J(tA());var vf;(function(A){A.Monthly="M",A.Yearly="Y",A.Daily="D",A.ThreeYear="3",A.FiveYear="5",A.Other="O"})(vf||(vf={}));var Gf=pe(vf,"Frequency"),uq=kc.readonly(kc.type({frequency:Gf,sortOrder:kc.number,currency:kc.string,display:kc.readonly(kc.type({amount:kc.number,isPerUser:kc.boolean}))}),"Plan");var Y3={"test-feature-flag":!1,"b5web-auto-sign-in":!1,"b5web-mycelium-forward-sign-in":!1,"b5web-dark-mode":!1,"safari-web-extension-iap":!1,"b5web-b2b-signup-requirePhoneNumber":!1,"b5-bpo-client-notification":!1,"pre-auth-telemetry-data-collection":!1,"distributor-sign-up":!1,"distributor-change-of-channel":!1,"b5web-signup-cookie-telemetry":!1,"b5web-feature-rollout-service-traffic-enabled":!1};var U$={"b5web-audit-events-playground":!1,"b2b-individual-vault-reporting":!1,"b2b-complete-trust-identity":!1,"b2b-xam-identity-device-trust-handoff":!1,"b2b-private-vault-reporting-in-business-watchtower":!1,"b5web-core-app-ui-v1-opt-in":!1,"b5web-core-app-ui-v1-opt-out":!1,"b5web-core-app-ui-v1-no-opt":!1,"b5web-device-trust-marketing":!1,"msp-net-seat-usage":!1,"msp-link-existing-account":!1,"b5-msp-account-billed-usage":!1,"msp-force-mfa-enrolment":!1,"msp-edit-managed-account":!1,"msp-limited-access-to-companies":!1,"msp-company-details-page":!1,"msp-email-notifications":!1,"eam-role-based-vault-permissions":!1,"eam-role-based-vault-permissions-ui":!1,"distributor-sign-up":!1,"b5web-linked-accounts":!1,"b5web-linked-accounts-beta":!1,"b5web-billing-signup-payment-form":!1,"telemetry-data-collection":!1,"b2b-telemetry-setting-UI":!1,"b5web-admin-new-invitations-page":!1,"b5web-admin-scim-timer-banner":!1,"b5web-sidebar-refresh-2025":!1,"b5-optimise-vault-access-projections":!1,"b5-extension-report":!1,"b5-extension-report-user-search":!1,"b5-extension-report-csv-download":!1,"b5web-admin-policies-ui":!1,"ct-minimum-client-version":!1,"b5web-admin-developer-report":!1,"b5-insights-new-reports-landing-page":!1,"b5web-service-accounts-for-all":!1,"b5-multiple-authentication-types":!1,"b2b-b5web-sidebar-talk-to-sales":!1,"b5web-generate-recovery-code-individual":!1,"b5web-generate-recovery-code-family":!1,"b5-auto-lock-policy":!1,"core-ssh-bookmarks":!1,"op-cli-integration-policy":!1,"core-developer-environments-policy":!1,"b2b-reporting-policy":!1,"b5-policies-framework":!1,"b5web-admin-knox-firewall-rules":!1,"b5web-hosted-provisioning":!1,"b5web-hosted-provisioning-audit-events":!1,"b5web-hosted-provisioning-regenerate-credentials":!1,"b5web-self-hosted-provisioning-redesign":!1,"b5-public-key-verification":!1,"b5-public-key-verification-backfill":!1,"b5web-admin-custom-emails":!1,"b5-policies-restrict-failed-login-attempts":!1,"b5-policies-auto-delete-suspended-users":!1,"b5-policies-auto-delete-suspended-users-dev-time-options":!1,"b5-policies-release-channels":!1,"b5-policies-item-password":!1,"b5-developer-addon":!1,"b5web-developer-environments":!1,"b5web-developer-tools-active-page-improvements":!1,"b5-integrations-crowdstrike":!1,"b5-integrations-blumira":!1,"b5-integrations-rapid7":!1,"b5-integrations-stellarcyber":!1,"b5-integrations-2025-events-report-additions":!1,"b2b-xam-sso-configuration-beta-iteration":!1,"b2b-xam-app-catalog":!1,"b5web-b2b-xam-pql":!1,"b5web-b2b-xam-pql-ab-testing":!1,"b5web-business-support-email":!1,"auth-self-serve-migration-v1":!1,"b5-allow-maps-policy":!1,"b5-reverse-mycelium":!1,"authx-verifier":!1,"b5-tsp-new-monthly-pricing":!1,"b5-unlimited-connect-vacs":!1,"b5-invoice-enhancements-add-po-number":!1,"test-account-based-feature":!1,"extension-first-for-sso":!1,"extension-first-for-sso-scim":!1,"extension-first-for-scim":!1,"extension-allowed-policy-enabled":!1,"b5web-progress-timer":!1,"b5web-admin-new-confirm-all-invites-button":!1,"b2b-extension-first-guided-setup":!1,"kolide-epm-mobile":!1,"b5-b2b-app-launcher-policy":!1,"b5web-policy-templates":!1,"b5web-policy-templates-tabs":!1,"b5-dropbox-passwords-import":!1,"b5web-details-pages-activity-log-refactor":!1,"b5-msp-remove-nfr-seats":!1,"b5web-feature-rollout-service-auth-traffic-enabled":!1,"security-for-ai-secure-remote-autofill":!1,"b5-authx-security_review-policy":!1,"b5-admin-auto-fill-prompt-policy":!1,"managed-credentials-deploy":!1,"b5web-perf-improvements-details-tabs":!1,"experiment-b5web-view-vault-items-production-20250925":!1,"b5web-quest-live-business-chat":!1,"b5web-quests-iterable":!1,"b5-business-insights-sharedcred-incentive":!1,"authx-autolock_settings-profiles":!1,"b5web-provisioned-group-resend-all-invitations":!1};var qGj="20180220_b_business",hfA=()=>({...U$,accountCreationPolicy:!1,accountSettings:!1,activityLog:!1,businessInvitationsPage:!1,businessSupportPhone:!1,businessSupportEmail:!1,clientVaultAccess:!1,customGroups:!1,customTemplates:!1,enforced2FA:!1,fineACL:!1,customDefaultAcl:!1,blockedDomains:!1,keepSuccessfulSignInAttempts:!1,groups:!1,groupPermissions:!1,guests:!1,itemSendingV1:!1,itemSharing:!1,members:!1,mfaDuo:!1,prioritySupport:!1,reports:!1,slack:!1,slackInvite:!1,teamInvite:!1,travelAdminMode:!1,familyChildAccounts:!1,firewallRules:!1,firewallRulesForGroups:!1,masterPasswordPolicy:!1,clientRestrictions:!1,signInAttemptsReport:!1,dontNotifyAdmins:!1,disableWebNotifMenu:!1,peoplePageServerSearch:!1,chronologicallySortedVaultPage:!1,customSupport:!1,dontShareWithOwners:!1,mpRequirementsCustom:!1,limitGroupVaultAccess:!1,vaultsReport:!1,email2fa:!1,replyToInviteEmail:!1,accountTransfer:!1,autoDeleteSuspendedUsers:!1,hibpDomainReport:!1,provisioning:!1,keepAdminWatchtowerReports:!1,viewAdminWatchtowerReports:!1,keepAdminWatchtowerPrivateVaultReports:!1,integrationHubProvisioning:!1,integrationHubDataStreaming:!1,itemUsageDataStreaming:!1,integrationHubMFA:!1,integrationHubAlerts:!1,integrationHubRequestAccessBusiness:!1,integrationHubRequestAccessTeams:!1,integrationHubRequestAccessFamilies:!1,insightsDashboard:!1,churnSurvey:!1,npsSurvey:!1,integrationHubEmailAlias:!1,shareService:!1,serviceAccounts:!1,shareServiceAdminControl:!1,itemSharingDomainRecipients:!1,itemSharingFiles:!1,integrationHubJumpCloud:!1,integrationHubGoogleWorkspace:!1,keepItemUsageAction:!1,singleSignOn:!1,singleSignOnAuth0:!1,singleSignOnAzure:!1,singleSignOnGeneric:!1,singleSignOnGoogle:!1,integrationHubUserManagedServiceAccounts:!1,managedServiceAccountTierAQuota:!1,managedServiceAccountTierBQuota:!1,managedServiceAccountTierARateLimit:!1,integrationHubBrex:!1,integrationHubRamp:!1,phantomIntegration:!1,deferActiveUserSubscriptionDowngrade:!1,liveBusinessChat:!1,emergencyKitSetting:!1,billingInfoDataMigrated:!1,unlockWithPasskey:!1,detailPageLimits:!1,telemetry:!1,automatedQuest:!1,unredeemedFamilyAccountEmails:!1,itemsInWrongAccountPolicy:!1,eraseClientForSuspendedUsers:!1,eraseClientForUsersOutsideGracePeriod:!1,detailedVaultReporting:!1,managedServiceProvider:!1,requireStrongAuthOnSensitiveActions:!1,linkedChildAccounts:!1,linkToParentAccount:!1,upgradeOnParentLink:!1,developerAddon:!1,developerAddonLegacyServiceAccounts:!1,developerAddonLegacyConnect:!1,b2bXamDeviceTrust:!1,b2bXamDeviceTrustEpmIntegration:!1,b2bXam:!1,b2bXamTrelica:!1,ssoMigrationReport:!1,salesAssistBillingOnly:!1,xamBilling:!1,kolideEPMMobile:!1}),Z3;(function(A){A.Tier="T",A.AccountType="A"})(Z3||(Z3={}));var L4=A=>({name:A||"",successorTierName:"",accountType:"",sortOrder:0,isPublic:!1,trialDays:0,backupDays:0,guestsIncluded:0,maxGuests:0,membersIncluded:0,maxMembers:0,minQuantity:0,storagePerAccount:0,storagePerUser:0,plans:[],marketingText:{name:"",localizedFeatures:[],defaultPriceDisplayFrequency:vf.Yearly,viewDetailsURL:""},hasFeature:hfA(),hasGatedFeature:hfA(),tierChangeMappings:[],features:[]});var pl;(function(A){A.create=()=>({freezesAt:"2100-01-01T00:00:00.000Z",guests:0,members:0,provider:"",status:"",storageUsed:0,tier:void 0,settings:{billingCompanyName:"",billingAddress:"",billingEmails:"",billingPurchaseOrderNumber:""},balance:0,cards:[],coupon:void 0,pendingCreditAmount:0,nextInvoice:void 0,hasInvoices:!1,plan:void 0,stripe:void 0,purchaseOrder:void 0,stripePurchaseOrder:void 0,customerAddress:{country:"",provinceOrState:"",zip:""},billingStats:void 0,availableTiers:[],pendingPaymentMethods:[]});let j;(function(e){e.Trial="T",e.Active="A",e.Lapsed="L",e.CancelAtPeriodEnd="C",e.Frozen="F",e.Pending="P"})(j=A.Status||(A.Status={})),A.Provider={Undefined:"U",Stripe:"S",StripePurchaseOrder:"C",PurchaseOrder:"O",ThirdParty:"T",NotBilled:"N",ParentAccount:"R",AppleSubscription:"A",PayPal:"P",GooglePlayStore:"G",ManagedServiceProvider:"M",Distributor:"D",UnifiedBillingPlatform:"B"},A.canBillForAdditionalUsers=e=>!Fr([A.Provider.AppleSubscription,A.Provider.GooglePlayStore],e.provider),A.isDirectlyBilled=e=>Fr([A.Provider.Stripe,A.Provider.StripePurchaseOrder,A.Provider.Undefined],e.provider),A.isDirectlyBilledPurchaseOrder=e=>e.provider===A.Provider.StripePurchaseOrder,A.shouldShowBilling=e=>Fr([A.Provider.Undefined,A.Provider.Stripe,A.Provider.StripePurchaseOrder,A.Provider.AppleSubscription,A.Provider.GooglePlayStore,A.Provider.ParentAccount,A.Provider.PurchaseOrder,A.Provider.ThirdParty,A.Provider.NotBilled,A.Provider.ManagedServiceProvider,A.Provider.Distributor,A.Provider.UnifiedBillingPlatform],e.provider),A.shouldShowBillingAndSeats=e=>Fr([A.Provider.Undefined,A.Provider.Stripe,A.Provider.Distributor,A.Provider.ThirdParty],e.provider),A.canChangeAccountType=(e,t)=>t?t.isAccountManaged&&t.subscription.provider!==A.Provider.ManagedServiceProvider:!Fr([A.Provider.AppleSubscription,A.Provider.GooglePlayStore,A.Provider.PurchaseOrder,A.Provider.ThirdParty,A.Provider.NotBilled,A.Provider.ManagedServiceProvider],e.provider),A.hasFeature=e=>e.tier?e.tier.hasFeature:L4().hasFeature,A.hasGatedFeature=e=>e.tier?e.tier.hasGatedFeature:L4().hasGatedFeature,A.hasPendingCredit=e=>typeof e.pendingCreditAmount=="number"&&e.pendingCreditAmount>0,A.hasAvailableCredit=e=>-1*e.balance+e.pendingCreditAmount>0,A.hasCoupon=e=>e.coupon!==void 0&&e.coupon.stripeCouponUID!==""&&(e.coupon.amountOff||e.coupon.percentOff)!==0,A.hasTrialTimeLeft=(e,t)=>{if((e.provider===A.Provider.Distributor||e.provider===A.Provider.ThirdParty)&&(e.status===j.Trial||e.status===j.Active)&&t){if(!t.trialStartedAt)return!1;let r=new Date(t.trialStartedAt);return r.setDate(r.getDate()+t.trialDays),r.getTime()>Date.now()}if(e.provider===A.Provider.Stripe&&e.stripe!==void 0&&e.stripe.status==="trialing"){let r=X6(e.stripe.trialEnd);return!!r&&r.getTime()>Date.now()}return!1},A.getDefaultCardholderName=e=>{let t=sn(e.cards,r=>r.isDefault);return t?t.name:void 0},A.getCurrency=e=>{if(e.plan)return e.plan.currency;if(e.availableTiers&&e.availableTiers[0]&&e.availableTiers[0].plans&&e.availableTiers[0].plans[0])return e.availableTiers[0].plans[0].currency}})(pl||(pl={}));var Az;(function(A){A.FamilyAnnual="family.annual",A.FamilyMonthly="family.monthly",A.IndividualAnnual="individual.annual",A.IndividualMonthly="individual.monthly"})(Az||(Az={}));var xGj=(A,j)=>{if(j===kq.Brand.Unknown)return`Ending in ${A.slice(-4)}`;let e=String.fromCodePoint(8226).repeat(4);return`${kq.getBrandText(j)} ${e}${A.slice(-4)}`},V$=A=>A.startsWith("pm_");var vGj=()=>{let A=!!document?.body?.dataset?.onepasswordExtensionVersion,j=!!document?.body?.dataset?.b5xBuildNumber;return A||j};var uc=J(Fo()),jz=(A,j)=>new uc.default.misc.hmac(A,uc.default.hash.sha256).encrypt(j),GGj=(A,j)=>{let e=uc.default.codec.hex.toBits(A),t=uc.default.codec.hex.toBits(j),r=jz(e,t);return uc.default.codec.hex.fromBits(r)},ez=(A,j)=>{let e=uc.default.codec.base64url.toBits(A),t=uc.default.codec.utf8String.toBits(j),r=jz(e,t);return new uc.default.misc.hmac(r,uc.default.hash.sha256)},Gp=(A,j)=>{if(A.byteLength!==32)throw new Error("Invalid secret length: "+A.byteLength);let e=uc.default.codec.bytes.toBits(A),t=uc.default.codec.utf8String.toBits(j),r=uc.default.codec.bytes.fromBits(jz(e,t));return new Uint8Array(r)};var fp="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",ko="[a-fA-F\\d]{1,4}",qfA=`
(
(?:${ko}:){7}(?:${ko}|:)|                                // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${ko}:){6}(?:${fp}|:${ko}|:)|                         // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${ko}:){5}(?::${fp}|(:${ko}){1,2}|:)|                 // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${ko}:){4}(?:(:${ko}){0,1}:${fp}|(:${ko}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${ko}:){3}(?:(:${ko}){0,2}:${fp}|(:${ko}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${ko}:){2}(?:(:${ko}){0,3}:${fp}|(:${ko}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${ko}:){1}(?:(:${ko}){0,4}:${fp}|(:${ko}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::((?::${ko}){0,5}:${fp}|(?::${ko}){1,7}|:))           // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(%[0-9a-zA-Z]{1,})?                                           // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),fGj=`${fp}\\/(3[0-2]|[12]?[0-9])`,FGj=`${qfA}\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])`,ff;(function(A){A[A.v4=1]="v4",A[A.v6=2]="v6",A[A.v4cidr=3]="v4cidr",A[A.v6cidr=4]="v6cidr"})(ff||(ff={}));var bGj=A=>{if(new RegExp(`^${fp}$`).test(A))return ff.v4;if(new RegExp(`^${qfA}$`).test(A))return ff.v6;if(new RegExp(`^${fGj}$`).test(A))return ff.v4cidr;if(new RegExp(`^${FGj}$`).test(A))return ff.v6cidr},yGj=A=>!!bGj(A);var Q6=J(tA());var Bk;(function(A){A.OnePasswordForAndroid="A",A.OnePasswordForWeb="B",A.OnePasswordCli="C",A.OnePasswordForIos="I",A.OnePasswordForLinux="L",A.OnePasswordForMac="M",A.OnePasswordForTeamsApi="P",A.OnePasswordScimBridge="S",A.OnePasswordExtension="X",A.OnePasswordForWindows="W",A.BackofficeCli="BOC",A.OnePasswordConnect="CON",A.CsExtension="CSX",A.ExtendedAccessManagement="XAM"})(Bk||(Bk={}));var vfA=pe(Bk,"ClientShortCode"),tz=Q6.readonly(Q6.intersection([Q6.type({shortCode:vfA,buildNum:Q6.number},"type"),Q6.partial({channel:Q6.keyof({beta:!0,nightly:!0,dev:!0}),commitHash:Q6.string},"partial")]),"ClientInfo"),$Gj=Q6.readonly(Q6.intersection([Q6.type({client:tz,deviceUuid:Q6.string},"type"),Q6.partial({innerClient:tz,browserName:Q6.string,browserVersion:Q6.string,osName:Q6.string,osVersion:Q6.string,architecture:Q6.string},"partial")]),"OpUserAgentInit"),wGj=1,Ff=(A,j)=>[wGj,A.client.shortCode,xfA(A.client),A.deviceUuid,A.innerClient?.shortCode||"",xfA(A.innerClient),A.browserName||j.name||"unknown",A.browserVersion||j.version||"unknown",A.osName||j.osName||"unknown",A.osVersion||j.osVersion||"unknown",A.architecture||""].join("|"),xfA=A=>A?A.channel&&A.commitHash?[A.buildNum,A.channel,A.commitHash].join("-"):A.channel?[A.buildNum,A.channel].join("-"):A.buildNum.toString(10):"",rz=A=>{switch(A){case"1Password for Mac":return Bk.OnePasswordForMac;case"1Password for Windows":return Bk.OnePasswordForWindows;case"1Password for Linux":return Bk.OnePasswordForLinux;default:return}};var U4=J(Fo());var z4;(function(A){A[A.Minimum=10]="Minimum",A[A.Medium=12]="Medium",A[A.Strict=14]="Strict"})(z4||(z4={}));var X$,HB,V4=A=>{X$=A},X4=A=>{HB=A},IGj=()=>!!HB,ju={UPPERCASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",LOWERCASE:"abcdefghijklmnopqrstuvwxyz",DIGITS:"0123456789",SYMBOLS:"#$%&()*+,.;<=>?@[]^{}"},Fp=(A,j)=>{let e="";for(let r=0;r<j;++r){let a=s6(0,A.length-1);e+=A[a]}let t=j*Math.log(A.length)/Math.log(2);return[e,t]},az=A=>{if(!X$)throw new Error("Word list is not loaded");A=Math.max(1,Math.min(20,Math.ceil(A)));let j=[];for(let t=1;t<=A;t++){let r=X$[s6(0,X$.length-1)];r!==void 0&&j.push(r)}let e=A*Math.log(X$.length)/Math.log(2);return[j,e]},bf=(A,j)=>{if(!A)return 0;let e=[...A].length;typeof j=="string"&&j.length>0&&A.toLowerCase().includes(j.toLowerCase())&&(e-=[...j].length+1,e=Math.max(0,e));let t=OGj(e);if(t=t*2,HB&&HB.includes(A.toLowerCase()))return 1;let r=A.toLowerCase();r=r.replace(/0/g,"o"),r=r.replace(/1/g,"l"),r=r.replace(/3/g,"e"),r=r.replace(/4/g,"a"),r=r.replace(/5/g,"s"),r=r.replace(/7/g,"t"),HB&&HB.includes(r)&&(t=4);let a=[ju.LOWERCASE,ju.UPPERCASE,ju.DIGITS," ",`.?!,;:-"'()`,"`~@#$%^&*[]{}+=_|\\/<>"],n=0;for(let o of a)PGj(A,o)&&(n+=1);return t+=(n-1)*6,Math.min(100,Math.round(t))},PGj=(A,j)=>{if(!A)return!1;let e=new Set(j);return[...A].some(t=>e.has(t))},OGj=A=>{let j=[0,4,6,8,10,12,14,16,18,20,21],e=0;return A>20&&(e+=A-20,A=20),A>10&&(e+=(A-10)*1.5,A=10),e+=j[A]??0,e},RGj=A=>{let j=A.toLowerCase(),e=DGj(j);return HB?Cy(HB,t=>t.length<z4.Minimum?!1:t===j||e.test(t)):!1},DGj=A=>{let j={0:"o",1:"[li]",2:"too?",3:"e",4:"(a|for)",5:"s",7:"t",8:"a(te?)?","@":"at?",$:"s",x:"(c?ks|x)",z:"[sz]"},e="",t="";for(let r of[...A])j[r]?(e+=GfA(t)+j[r],t=""):t+=r;return e+=GfA(t),new RegExp(`^${e}$`)},GfA=A=>A?mL(A):"",nz=A=>{if(A.length===0)return"";let j=U4.hash.sha256.hash(A);return U4.codec.base64url.fromBits(j).replace(/=+$/,"")};var oz=J(Wo()),W$=(...A)=>xL(A,(j,e)=>(t,r)=>e(t,r)||j(t,r),(j,e)=>0),gk=A=>j=>(e,t)=>A(j(e),j(t)),TGj=(A,j=!0)=>j?A:yf(A),yf=A=>(j,e)=>A(e,j),ffA=(A=0,j=0)=>A-j,FfA=(A=!1,j=!1)=>A===j?0:A?1:-1,J$=(A="",j="")=>A.localeCompare(j,void 0,{numeric:!0}),pq="0001-01-01T00:00:00Z",iz=(A=new Date(pq),j=new Date(pq))=>A.getTime()-j.getTime(),bfA=(A=pq,j=pq)=>yfA(A).diff(yfA(j)),yfA=(A=pq)=>{let j=(0,oz.default)(A);return j.isValid()?j:(0,oz.default)(pq)},Fi={booleans:gk(FfA),dates:gk(iz),moments:gk(bfA),numbers:gk(ffA),strings:gk(J$),desc:{booleans:gk(yf(FfA)),dates:gk(yf(iz)),moments:gk(yf(bfA)),numbers:gk(yf(ffA)),strings:gk(yf(J$))}};var CGj=(A,j)=>{let e=new Set(j);return[...A].filter(t=>e.has(t)).join("")};var _Gj=A=>A.account?A.account?.hasFeature.singleSignOn||A.account?.hasFeature.unlockWithPasskey:!1,$fA=8,SGj=()=>{let A=ju.UPPERCASE,[j,e]=Fp(A,$fA);return j};var sz=A=>A?.hasFeature["b2b-private-vault-reporting-in-business-watchtower"]&&A?.hasFeature.keepAdminWatchtowerPrivateVaultReports||!1;var HGj=A=>A?.hasBackOfficeFeature.detailedVaultReporting&&A?.hasUnleashFeature["b2b-individual-vault-reporting"]||!1,lz=(A,j,e)=>{if(!j)return!1;if(!e||!sq(e)||A.length===0)return!0;let t=e.split("@");return t[1]?A.includes(t[1].trim().toLowerCase()):!0};var wfA=J(Wo()),Q$=A=>A instanceof Date?A.valueOf():typeof A=="string"?(0,wfA.default)(A).valueOf():0;var IfA=A=>{let j=A;return A.split("://").length===1&&(j="https://"+j),j.toLowerCase()},cz=A=>{let j=A.flatMap(e=>{let t=IfA(e);try{return new URL(t).host}catch{return}}).filter(e=>e!==void 0);return _y(j)},MGj=A=>{let j=A.replace(/^\w+:\/\//,"");if(!j)return"";try{return new URL(`https://${j}`).hostname.replace(/^www\./,"")}catch{return""}};var dz=(A,j)=>{if(j.length===0)return!1;let e=A.username?A.username.value:"";if(!e)return!1;let t=e.split("@");return t[1]?!j.includes(t[1].trim().toLowerCase()):!1};var mq=(A,j)=>{let e=!1;return async()=>{if(!e&&typeof A=="function"){e=!0;try{await A(await j())}catch(t){throw e=!1,t}}}};var Bq={};er(Bq,{EventEmitter:()=>kz});var kz=class{constructor(){this._events={}}emit(j,...e){let t=this._events["~"+j];return t?(t.forEach(r=>{r.once&&this.off(j,r.fn,!0),r.fn(...e)}),!0):!1}on(j,e,t=!1){let r={fn:e,once:t},a="~"+j,n=this._events[a];return n?n.push(r):this._events[a]=[r],this}off(j,e,t=!1){let r="~"+j,a=this._events[r];if(!a)return this;let n=a.filter(o=>o.fn!==e||t&&!o.once);return n.length>0?this._events[r]=n:delete this._events[r],this}removeAllListeners(j){return j?delete this._events["~"+j]:this._events={},this}};var Vt={};er(Vt,{ClientStateChanged:()=>zGj,LanguageRefreshed:()=>JGj,RecoveryStarted:()=>nfj,ReloadForced:()=>jfj,ServerChanged:()=>UGj,ServerChangedFromSelf:()=>QGj,ServerChangedWithData:()=>XGj,ServerConnected:()=>VGj,SessionExpired:()=>efj,SessionInitError:()=>ZGj,SessionInitialized:()=>YGj,SessionRequestIdChanged:()=>Afj,SignedIn:()=>tfj,SignedOut:()=>rfj,SpecialNavChanged:()=>NGj,TimeoutWarning:()=>afj,TopBarContentChanged:()=>KGj,UniverseReloaded:()=>LGj,UsersChanged:()=>WGj});var KGj="TopBarContentChanged",NGj="SpecialNavChanged",LGj="UniverseReloaded",zGj="ClientStateChanged",UGj="ServerChanged",VGj="ServerConnected",XGj="ServerChangedWithData",JGj="LanguageRefreshed",WGj="UsersChanged",QGj="ServerChangedFromSelf",YGj="SessionInitialized",ZGj="SessionInitError",Afj="SessionRequestIdChanged",jfj="ReloadForced",efj="SessionExpired",tfj="SignedIn",rfj="SignedOut",afj="TimeoutWarning",nfj="RecoveryStarted";var uz={};er(uz,{DEFAULT_DIGITS:()=>ofj,DEFAULT_PERIOD:()=>ifj,generateSecret:()=>sfj});var PfA=J(Fo());var ofj=6,ifj=30,sfj=()=>PfA.codec.base32.fromBits(Ea(ta(10)));var gt=()=>{throw new Error("JSON.stringify has been disabled for this type. Seralization for this type is either disallowed, or must be invoked explicitly.")};var id=J(tA());var Y$,$f="mp",lfj=16,OfA=lfj*8,wf="A256GCM",Ez="AES-GCM",cfj={name:Ez,length:256},bp=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_Aes256EncryptionResult",this.data=j,this.iv=e}};bp.new=A=>new bp(A.data,A.iv);var Ds=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_Aes256EncryptionKey",this.toJSON=gt,this.encryptRaw=async(t,r=void 0)=>{let a=await dfj(),n={name:Ez,iv:a,tagLength:OfA};r!==void 0&&(n.additionalData=r);let o=await De.encrypt(n,this.encryptionKey,t),i=new Uint8Array(o);return bp.new({data:i,iv:a})},this.decryptRaw=async(t,r=void 0)=>{let a={name:Ez,iv:t.iv,tagLength:OfA};r!==void 0&&(a.additionalData=r);let n=await De.decrypt(a,this.encryptionKey,t.data);return new Uint8Array(n)},this.exportJwk=async()=>{let t=await De.exportKey("jwk",this.encryptionKey);return cj({...t,kid:this.kid},yo).unwrap()},this.exportCryptoKey=async()=>this.encryptionKey,this.exportRawBytes=async()=>new Uint8Array(await De.exportKey("raw",this.encryptionKey)),this.encryptionKey=j,this.kid=e}};Y$=Ds;Ds.generate=async()=>Y$.fromRawBytes(ta(32),Se());Ds.fromRawBytes=async(A,j)=>{if(A.length!==32)throw new Error("Bad key len");let e=await De.importKey("raw",A,cfj,!0,["encrypt","decrypt"]);return new Y$(e,j)};Ds.inspectJwk=async A=>{if(A.alg!==wf)throw new Error(`Unexpected alg: ${A.alg}`);if(A.ext!==!0)throw new Error("Unexpected ext");if(A.key_ops.length!==2||!A.key_ops.includes("encrypt")||!A.key_ops.includes("decrypt"))throw new Error(`Invalid key_ops: ${JSON.stringify(A.key_ops)}`);if(A.kty!=="oct")throw new Error(`Unexpected kty: ${A.kty}`)};Ds.fromJwk=async A=>{await Y$.inspectJwk(A);let j=ej(A.k);return Y$.fromRawBytes(j,A.kid)};var dfj=async()=>ta(12);var Z$,RfA="b5+jwk+json",On=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_GENERALIZED_KEYS_JwebAes256EncryptionKey",this.toJSON=gt,this.encryptRaw=async(e,t=void 0)=>this.encryptionKey.encryptRaw(e,t),this.decryptRaw=async(e,t=void 0)=>this.encryptionKey.decryptRaw(e,t),this.processJweB=(e,t=!1)=>{if(e.kid!==this.kid)throw new Error("Invalid JweB: bad KID");if(e.enc!==wf)throw new Error("Invalid JweB: bad enc");if(e.cty!==RfA)throw new Error("Invalid JweB: bad cty");if(e.iv===void 0||e.iv.length<12)throw new Error("Invalid JweB: bad iv length");if(e.data.length<32)throw new Error("Invalid JweB: bad data length");let r=ej(e.data),a=ej(e.iv),n=bp.new({data:r,iv:a});if(t){if(this.kid!==$f)throw new Error("Cannot extract derivation info if not MP");if(e.alg===void 0||e.p2c===void 0||e.p2s===void 0)return{encrypted:n,kdfInfo:void 0};let o={alg:e.alg,enc:e.enc,iterations:e.p2c,salt:e.p2s};return{encrypted:n,kdfInfo:o}}if(e.alg!==void 0||e.p2c!==void 0||e.p2s!==void 0)throw new Error("Unexpected derivation info");return{encrypted:n,kdfInfo:void 0}},this.encryptJweB=async(e,t=void 0)=>{let{data:r,iv:a}=await this.encryptRaw(e,t);return{kid:this.kid,enc:wf,cty:RfA,iv:Aj(a),data:Aj(r)}},this.decryptJweB=async(e,t=void 0)=>{let{encrypted:r,kdfInfo:a}=this.processJweB(e,!1);return this.decryptRaw(r,t)},this.encryptAndEncodeUnauthenticatedKdfInfo=async(e,t,r=void 0)=>{let a=await this.encryptJweB(e,r);return a.alg=t.alg,a.p2c=t.iterations,a.p2s=t.salt,a},this.decryptAndExtractUnauthenticatedKdfInfo=async(e,t=void 0)=>{let{encrypted:r,kdfInfo:a}=this.processJweB(e,!0);return{plaintext:await this.decryptRaw(r,t),unverifiedKdfInfo:a}},this.exportJwk=async()=>this.encryptionKey.exportJwk(),this.exportCryptoKey=async()=>this.encryptionKey.exportCryptoKey(),this.exportRawBytes=async()=>this.encryptionKey.exportRawBytes(),this.encryptionKey=j,this.kid=j.kid}};Z$=On;On.generate=async()=>new Z$(await Ds.generate());On.fromRawBytes=async(A,j)=>Z$.fromAes256Key(await Ds.fromRawBytes(A,j));On.fromAes256Key=async A=>new Z$(A);On.fromJwk=async A=>Z$.fromAes256Key(await Ds.fromJwk(A));var ml=async(A,j,e,t,r)=>{let a=await De.importKey("raw",j,{name:"HKDF"},!1,["deriveBits"]),n={name:"HKDF",hash:A,info:e,salt:t},o=await De.deriveBits(n,a,r*8);return new Uint8Array(o)};var Nr;(function(A){A.Sha256="SHA-256",A.Sha384="SHA-384",A.Sha512="SHA-512"})(Nr||(Nr={}));var Ec=async(A,j=Nr.Sha256)=>{let e=await De.digest({name:j},A);return new Uint8Array(e)};var TfA=1e5,DfA=1e4,J4=65e4,CfA=128,kfj=async(A,j,e,t,r)=>{if(t<DfA)throw new Error(`PBKDF2 cannot operate with fewer than ${DfA} interations, ${t} was supplied.`);let a=Ij(j),n=await De.importKey("raw",a,{name:"PBKDF2"},!1,["deriveBits"]),o={name:"PBKDF2",salt:e,iterations:t,hash:{name:A}},i=await De.deriveBits(o,n,r*8);return new Uint8Array(i)},Aw=async(A,j,e,t)=>{let r=ufj(A);return kfj(r.alg,j,e,t,r.length)},pz="PBES2-HS256";var W4="PBES2g-HS256";var Q4=W4,ufj=A=>{switch(A){case pz:case W4:return{alg:Nr.Sha256,length:32};default:throw new Error(`Invalid PBKDF2 alg: ${A}`)}};var eu,Y4=id.readonly(id.exact(id.type({alg:id.string,iterations:id.number,salt:id.string,enc:id.string})),"KeyDerivationInfo"),rr=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_Auk",this.toJSON=gt,this.KID=()=>"mp",this.exportJwk=async()=>this.key.exportJwk(),this.exportJwkJSON=async()=>JSON.stringify(await this.key.exportJwk()),this.verifyMasterPassword=async(t,r)=>{let n=await(await eu.derive(t,r)).__crypto_internal.deriveConfirmationKey();return(await this.__crypto_internal.deriveConfirmationKey()).every((i,s)=>i===n[s])},this.__crypto_internal={deriveConfirmationKey:async()=>{let t=new Uint8Array;return ml(Nr.Sha256,await this.key.exportRawBytes(),Ij("confirmationsigner"),t,32)}},this.encrypt=async t=>{if(this.derivationInfo===void 0)throw new Error("Missing derivation info for AUK");return this.key.encryptAndEncodeUnauthenticatedKdfInfo(t,this.derivationInfo)},this.decrypt=async t=>{let{plaintext:r,unverifiedKdfInfo:a}=await this.key.decryptAndExtractUnauthenticatedKdfInfo(t);return this.derivationInfo===void 0&&(this.derivationInfo=a),r},this.key=j,this.derivationInfo=e}};eu=rr;rr.fromRawBytes=async(A,j)=>{if(A.length!==32)throw new Error("Bad key len");return new eu(await On.fromRawBytes(A,$f),j)};rr.generateForTrustedDevice=async()=>eu.fromRawBytes(ta(32),Z4());rr.__testGenerate=async()=>eu.fromRawBytes(ta(32),Z4());rr.fromJwk=async(A,j=void 0)=>{if(A.kid!==$f)throw new Error("KeyID for Auk is incorrect");return new eu(await On.fromJwk(A),j)};rr.fromJwkWithRandomKdfInfoSsoOnly=async A=>{if(A.kid!==$f)throw new Error("KeyID for Auk is incorrect");return new eu(await On.fromJwk(A),Z4())};rr.deriveKdfBytes=async(A,j)=>{let{email:e,password:t}=j,{alg:r,iterations:a,salt:n}=A,o=e.trim().toLowerCase(),i=pfj(t);if(r.startsWith("PBES2-")){let s=await Efj(t);return Aw(r,`${o}:${s}`,ej(n),a)}else if(r.startsWith("PBES2g-")){let s=Ij(o),l=Ij(r),c=await ml(Nr.Sha256,ej(n),l,s,32);return Aw(r,i,c,a)}else throw new Error("Unknown derivation alg")};rr.derive=async(A,j)=>{let{email:e,password:t,secretKey:r}=j,a=await eu.deriveKdfBytes(A,{email:e,password:t}),n=await r.combineWithBytes(a);return eu.fromRawBytes(n,A)};rr.deriveDefaultKdf=async A=>eu.derive(Z4(),A);var Z4=()=>({alg:Q4,iterations:J4,enc:wf,salt:S3(CfA)}),Efj=async A=>{if(A.length===0)return"";let j=await Ec(Ij(A),Nr.Sha256);return Aj(j).replace(/=+$/,"")},pfj=A=>A?A.trim().normalize("NFKD"):"";var MfA=J(lq());var MB=J(lq());var _fA,If=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SessionKey",this.toJSON=gt,this.rawKey=j}};_fA=If;If.__crypto_internal={new:async A=>new _fA(A)};var mz,SfA,yp;(function(A){A.Group4096="4096"})(yp||(yp={}));var tu;(function(A){A.Srp="SRP-",A.SrpG="SRPg-"})(tu||(tu={}));var bi=class{constructor(j,e){this.toString=()=>this.prefix+this.srpGroupName,this.prefix=j,this.srpGroupName=e}get group(){return eT[this.srpGroupName]}};bi.fromParts=(A,j)=>new bi(A,j);bi.fromString=A=>{let j=Bfj[A];if(!j)throw new Error("Unknown SRP method");return j};var mfj=[bi.fromParts(tu.Srp,yp.Group4096),bi.fromParts(tu.SrpG,yp.Group4096)],Bfj=Object.fromEntries(mfj.map(A=>[A.toString(),A])),gfj=yp.Group4096,hfj=tu.SrpG,jT=bi.fromParts(hfj,gfj),eT={[yp.Group4096]:{N:new MB.BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A92108011A723C12A787E6D788719A10BDBA5B2699C327186AF4E23C1A946834B6150BDA2583E9CA2AD44CE8DBBBC2DB04DE8EF92E8EFC141FBECAA6287C59474E6BC05D99B2964FA090C3A2233BA186515BE7ED1F612970CEE2D7AFB81BDD762170481CD0069127D5B05AA993B4EA988D8FDDC186FFB7DC90A6C08F4DF435C934063199FFFFFFFFFFFFFFFF",16),g:new MB.BigInteger("5")}},KB=class{constructor(j,e,t,r,a,n){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SrpStarter",this.toJSON=gt,this.recieveBigBhex=async o=>{let{g:i,N:s}=this.group,l=new MB.BigInteger(o,16);if(l.mod(s).equals(MB.BigInteger.ZERO)||l.mod(s).equals(MB.BigInteger.ONE))throw new Error("Invalid SRP B value");let[c,k]=await Promise.all([qfj(this.group),xfj(this.group,this.bigA,l)]),u=this.littleA.add(k.multiply(this.x)),m=l.subtract(i.modPow(this.x,s).multiply(c)),F=Ij(AT(m.modPow(u,s))),S=await Ec(F,Nr.Sha256);return jw.__crypto_internal.new(S,this.group,this.bigA,l,this.salt,this.identity)},this.littleA=j,this.bigA=e,this.group=t,this.x=r,this.salt=a,this.identity=n}get bigAhex(){return AT(this.bigA)}};mz=KB;KB.__crypto_internal={new:async(A,j,e,t)=>{let r=gz(ta(32)),{g:a,N:n}=j,o=a.modPow(r,n);return new mz(r,o,j,A,e,t)},__testNew:async(A,j,e,t,r,a)=>new mz(r,a,j,A,e,t)};var AT=A=>A.toString(16).replace(/^(0x)?0*/,""),gz=A=>new MB.BigInteger(Wn(A),16),Pf=A=>up(A.toString(16)),qfj=async A=>{let{g:j,N:e}=A,t=Bz(j,e),r=await Ec(In([Pf(e),t]),Nr.Sha256);return gz(r)},Bz=(A,j)=>{let e=up(j.toString(16)).byteLength,t=up(A.mod(j).toString(16)),r=e-t.byteLength;if(r===0)return t;if(r<0)return t.slice(-2);let a=new Uint8Array(e);return a.set(t,r),a},xfj=async(A,j,e)=>{let{g:t,N:r}=A,a=Bz(j,r),n=Bz(e,r),o=await Ec(In([a,n]),Nr.Sha256),i=gz(o);if(i.mod(r).equals(MB.BigInteger.ZERO))throw new Error("Invalid SRP u value (u mod N = 0)");return i},jw=class{constructor(j,e,t){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_UnconfirmedSrpSessionKey",this.toJSON=gt,this.recieveServerHash=async r=>{let a=await Ec(In([Pf(this.bigA),this.m,this.rawKey]),Nr.Sha256),n=Aj(a);if(r!==n)throw new Error("Invalid server hash");return If.__crypto_internal.new(this.rawKey)},this.__crypto_internal={rawKey:()=>this.rawKey},this.rawKey=j,this.m=e,this.bigA=t}get clientHash(){return Aj(this.m)}};SfA=jw;jw.__crypto_internal={new:async(A,j,e,t,r,a)=>{let n=await vfj(j,a,r,e,t,A);return new SfA(A,n,e)}};var vfj=async(A,j,e,t,r,a)=>{let{g:n,N:o}=A,[i,s]=await Promise.all([Ec(Pf(o),Nr.Sha256),Ec(Pf(n),Nr.Sha256)]),l=Gfj(i,s),c=await Ec(Ij(j),Nr.Sha256);return Ec(In([l,c,e,Pf(t),Pf(r),a]),Nr.Sha256)},Gfj=(A,j)=>{if(A.length!==j.length)throw new Error("cannot xor with mismatched lengths");let e=new Uint8Array(A.length);for(let[t,r]of A.entries()){let a=j[t];if(a===void 0)throw new Error("xor: bByte undefined");e[t]=r^a}return e};var HfA,NB=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SrpV",this.toJSON=gt,this.exportServerHex=async()=>AT(this.v),this.group=j,this.v=e}};HfA=NB;NB.__crypto_internal={fromBigInt:async(A,j)=>new HfA(A,j)};var tT,hz=32,Ai=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_SrpX",this.toJSON=gt,this.exportBytes=()=>{let e=up(this.x.toString(16)),t=hz-e.length;if(t===0)return e;if(t<0)throw new Error(`SrpX bytes exceeded expected length ${t}`);let r=new Uint8Array(hz).fill(0);return r.set(e,t),r},this.exportHex=()=>Wn(this.exportBytes()),this.exportBase64Url=()=>Aj(up(this.exportHex())),this.verifier=async e=>{let{g:t,N:r}=e;return NB.__crypto_internal.fromBigInt(e,t.modPow(this.x,r))},this.beginAuth=async(e,t,r)=>KB.__crypto_internal.new(this.x,e,t,r),this.x=j}};tT=Ai;Ai.fromRawBytes=async A=>{if(A.length>hz)throw new Error("Bad key len");return new tT(new MfA.BigInteger(Wn(A),16))};Ai.generateForTrustedDevice=async()=>tT.fromRawBytes(ta(32));Ai.fromHex=async A=>tT.fromRawBytes(up(A));var ew,KfA=LB.readonly(LB.exact(LB.type({srpx:LB.string,auk:yo})),"SerializedCredentialBundle"),yi=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_CredentialBundle",this.toJSON=gt,this.__crypto_internal={serialize:async()=>Qe(KfA.encode({srpx:Aj(this.srpx.exportBytes()),auk:await this.auk.exportJwk()}))},this.srpx=j,this.auk=e}};ew=yi;yi.new=async A=>new ew(A.srpx,A.auk);yi.generateForTrustedDevice=async()=>ew.new({srpx:await Ai.generateForTrustedDevice(),auk:await rr.generateForTrustedDevice()});yi.forActiveUser=async A=>{if(!A.user?.masterKey)throw new Error("No auk found");let j=A.user?.masterKey;if(!(j instanceof rr))throw new TypeError("Master key is not a valid Auk");if(!A.session.auth?.srpX)throw new Error("No srpx found");let e=await Ai.fromHex(A.session.auth.srpX);return ew.new({srpx:e,auk:j})};yi.unsafeIfInputNotTrustworthyDeserialize=async A=>{let j=cj(A,Ne.pipe(KfA)).unwrap();return ew.new({srpx:await Ai.fromRawBytes(ej(j.srpx)),auk:await rr.fromJwkWithRandomKdfInfoSsoOnly(j.auk)})};var NfA=J(lq()),tw=J(Fo()),rw=A=>{let j=tw.codec.hex.fromBits(tw.codec.base64url.toBits(A));return new NfA.BigInteger(j,16)},LfA=A=>{let j=A.toString(16),e=j.length%2===1?"0"+j:j;return tw.codec.base64url.fromBits(tw.codec.hex.toBits(e))};var hk=A=>{if(A.length===0||A[0]!==0)return A;let j=0;for(;j<A.length&&A[j]===0;)j+=1;return A=A.subarray(j),A};var qz,zfA,rT,UfA,VfA="b5+jwk+json",qk;(function(A){A.OAEP_256="RSA-OAEP-256",A.OAEP="RSA-OAEP"})(qk||(qk={}));var ffj={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},Ffj={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},aw={[qk.OAEP]:Ffj,[qk.OAEP_256]:ffj},bfj=Symbol(),zB=class{constructor(j,e,t){this[zfA]=0,this.toJSON=gt,this.encryptRaw=async r=>{if(r.length>2048/8)throw new Error("Plaintext is too large.");return new Uint8Array(await De.encrypt(aw[this.alg],this.key,r))},this.encryptJweB=async r=>({kid:this.kid,enc:this.alg,cty:VfA,data:Aj(await this.encryptRaw(r))}),this.exportJwk=async()=>{let r=await De.exportKey("jwk",this.key);return cj({...r,kid:this.kid},Au).unwrap()},this.kid=j,this.key=e,this.alg=t}};qz=zB,zfA=bfj;zB.fromComponents=async(A,j,e)=>{let{e:t,n:r}=e,a={kid:A,ext:!0,key_ops:["encrypt"],kty:"RSA",alg:j,e:Aj(hk(t)),n:Aj(hk(r))},n=await De.importKey("jwk",a,aw[j],!0,["encrypt"]);return new qz(A,n,j)};zB.fromJwk=async A=>{if(A.alg!==qk.OAEP&&A.alg!==qk.OAEP_256)throw new Error(`Unexpected algorithm "${A.alg}"`);return qz.fromComponents(A.kid,A.alg,{e:ej(A.e),n:ej(A.n)})};var yfj=Symbol(),Of=class{constructor(j,e,t){this[UfA]=0,this.toJSON=gt,this.decryptRaw=async r=>De.decrypt(aw[this.alg],this.key,r).then(a=>new Uint8Array(a)),this.decryptJweB=async r=>{if(VfA!==r.cty)throw new Error("Unexpected content type");if(r.kid!==this.kid)throw new Error("Content encrypted with wrong key");if(r.enc!==this.alg)throw new Error(`Unexpected algorithm "${r.enc}", expected: "${this.alg}"`);let a=ej(r.data);if(a.length===0)throw new Error("Invalid ciphertext, zero length");return this.decryptRaw(a)},this.exportJwk=async()=>{let r=await De.exportKey("jwk",this.key);return cj({...r,kid:this.kid},pk).unwrap()},this.publicKey=async()=>{let{e:r,n:a}=await this.exportJwk();return zB.fromComponents(this.kid,this.alg,{e:ej(r),n:ej(a)})},this.kid=j,this.key=e,this.alg=t}};rT=Of,UfA=yfj;Of.fromComponents=async(A,j,e)=>{let{e:t,n:r,d:a,dp:n,dq:o,p:i,q:s,qi:l}=e,c={kid:A,ext:!0,key_ops:["decrypt"],kty:"RSA",alg:j,e:Aj(hk(t)),n:Aj(hk(r)),d:Aj(hk(a)),dp:Aj(hk(n)),dq:Aj(hk(o)),p:Aj(hk(i)),q:Aj(hk(s)),qi:Aj(hk(l))};c=wfj(c);let k=await De.importKey("jwk",c,aw[j],!0,["decrypt"]);return new rT(A,k,j)};Of.fromJwk=async A=>{if(A.alg!==qk.OAEP&&A.alg!==qk.OAEP_256)throw new Error("Unexpected algorithm");return rT.fromComponents(A.kid,A.alg,{e:ej(A.e),n:ej(A.n),d:ej(A.d),dp:ej(A.dp),dq:ej(A.dq),p:ej(A.p),q:ej(A.q),qi:ej(A.qi)})};Of.generate=async(A=qk.OAEP)=>{if(A!==qk.OAEP&&A!==qk.OAEP_256)throw new Error("Unexpected algorithm");let j=await De.generateKey(aw[A],!0,["encrypt","decrypt"]);return new rT(Se(),j.privateKey,A)};var $fj=A=>rw(A.p).compareTo(rw(A.q))<0,wfj=A=>$fj(A)?Ifj(A):A,Ifj=A=>({...A,p:A.q,q:A.p,dp:A.dq,dq:A.dp,qi:Pfj(A.q,A.p)}),Pfj=(A,j)=>LfA(rw(j).modInverse(rw(A)));var xz,Ts=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedAccountKey",this.toJSON=gt,this.KID=()=>this.key.kid,this.exportJwk=async()=>this.key.exportJwk(),this.encryptSelfWithKeyset=async e=>(await zB.fromJwk(e)).encryptJweB(Qe(await this.key.exportJwk())),this.encrypt=async e=>this.key.encryptJweB(e),this.decrypt=async e=>this.key.decryptJweB(e),this.key=j}};xz=Ts;Ts.generate=async()=>new xz(await On.generate());Ts.fromJwk=async A=>new xz(await On.fromJwk(A));var Bl=J(tA());var aT=(A,j)=>Bl.exact(Bl.type(A),j),Ofj=(A,j)=>Bl.exact(Bl.partial(A),j),WfA=1,UB=2,Cs=class{constructor(j,e,t,r){this.toBytes=()=>{let a=new ArrayBuffer(1+UB+this.kid.length+UB+this.purpose.length+UB+this.content.length),n=new DataView(a),o=0;n.setUint8(o,WfA),o+=1;let i=Ij(this.kid);o+=XfA(n,o,i);let s=Ij(this.purpose);if(o+=XfA(n,o,s),o+=QfA(n,o,this.purposeVersion),o+=YfA(n,o,this.content),o!==a.byteLength)throw new Error("written invalid byte length");return new Uint8Array(a)},this.toBase64Url=()=>Aj(this.toBytes()),this.toJSON=this.toBase64Url,this.kid=j,this.purpose=e,this.purposeVersion=t,this.content=r}};Cs.fromParts=A=>new Cs(A.kid,A.purpose,A.purposeVersion,A.content);Cs.fromBytes=A=>{let j=A.buffer,e=new DataView(j),t=0,r=e.getUint8(t);if(t+=1,r!==WfA)throw new Error(`unknown envelope format version ${r}`);let{bytes:a,len:n}=JfA(e,t);t+=n;let{bytes:o,len:i}=JfA(e,t);t+=i;let s=ZfA(e,t);t+=UB;let l=ln(a),c=ln(o),k=AFA(e,t,e.byteLength-t);return Cs.fromParts({kid:l,purpose:c,purposeVersion:s,content:k})};Cs.fromBase64Url=A=>Cs.fromBytes(ej(A));var QfA=(A,j,e)=>{if(e>65535||e<0)throw new Error("unsupported number");return A.setUint16(j,e,!0),UB},YfA=(A,j,e)=>{for(let[t,r]of e.entries())A.setUint8(j+t,r);return e.length},XfA=(A,j,e)=>{let t=QfA(A,j,e.length);return UB+YfA(A,j+t,e)},ZfA=(A,j)=>A.getUint16(j,!0),AFA=(A,j,e)=>{let t=new Uint8Array(e);for(let r=0;r<e;r++)t[r]=A.getUint8(j+r);return t},JfA=(A,j)=>{let e=ZfA(A,j),t=AFA(A,j+UB,e);return{len:UB+e,bytes:t}},gq=new Bl.Type("Envelope",A=>A instanceof Cs,(A,j)=>{if(typeof A!="string")return Bl.failure(A,j,"input is not a string");let e;try{e=Cs.fromBase64Url(A)}catch{return Bl.failure(A,j,"failed to decode input")}return Bl.success(e)},A=>A.toBase64Url());var gl=J(tA());var vz,jFA="1P_ENVELOPE_VAULT_REPORTING_ITEM_SNAPSHOT",eFA=1,tFA=aT({encKey:gl.string,data:gl.string,additionalData:gl.string},"VaultSnapshotContent"),nw=aT({clientCreatedAt:gl.string,hasUrl:gl.boolean,itemVersion:gl.number,payloadVersion:gl.number,templateUuid:gl.string,timestamp:gl.string,vaultItemUuid:gl.string,isBusinessRelated:gl.boolean},"VaultSnapshotAdditionalData"),$p=class{constructor(j,e,t,r){this.toEnvelope=()=>{let a={encKey:Aj(this.encKey),data:Aj(this.data),additionalData:Aj(this.unauthenticatedRawAd)};return Cs.fromParts({kid:this.kid,purpose:jFA,purposeVersion:eFA,content:Ne.pipe(tFA).encode(a)})},this.kid=j,this.encKey=e,this.data=t,this.unauthenticatedRawAd=r,this.unauthenticatedDecoded=cj(r,Ne.pipe(nw)).unwrap()}};vz=$p;$p.fromEnvelope=async A=>{if(A.purpose!==jFA)throw new Error("invalid purpose");if(A.purposeVersion!==eFA)throw new Error("invalid purpose version");let j=cj(A.content,Ne.pipe(tFA)).unwrap();return new vz(A.kid,ej(j.encKey),ej(j.data),ej(j.additionalData))};$p.fromPieces=(A,j,e,t)=>new vz(A,j,e,t);var Gz,sd=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_PRIMITIVES_GENERALIZED_KEYS_HkdfKey",this.toJSON=gt,this.deriveExportableCryptoKey=async(t,r,a)=>De.deriveKey({name:"HKDF",...t},this.kdfKey,r,!0,a),this.deriveAes256Key=async(t,r)=>{let a=await this.deriveExportableCryptoKey(t,{name:"AES-GCM",length:256},["encrypt","decrypt"]),n=new Uint8Array(await De.exportKey("raw",a));return Ds.fromRawBytes(n,r)},this.deriveCryptoKey=async(t,r,a)=>De.deriveKey({name:"HKDF",...t},this.kdfKey,r,!1,a),this.hkdfOutput=async t=>this.hkdfOutputWithCustomSalt({hash:t.hash,info:t.info,salt:new Uint8Array,len:t.len}),this.hkdfOutputWithCustomSalt=async t=>{let r={name:"HKDF",hash:t.hash,info:t.info,salt:t.salt};return new Uint8Array(await De.deriveBits(r,this.kdfKey,t.len*8))},this.exportRawIkm=()=>this.rawIkm,this.rawIkm=j,this.kdfKey=e,this.length=j.length}};Gz=sd;sd.generate=async()=>Gz.fromRawBytes(ta(32));sd.fromRawBytes=async A=>{if(A.length<32)throw new Error("Bad key len");let j=await De.importKey("raw",A,{name:"HKDF"},!1,["deriveKey","deriveBits"]);return new Gz(A,j)};var Rf,oFA,VB;(function(A){A[A.V1=1]="V1"})(VB||(VB={}));var rFA="1P_MSP_LINK_AUTH_ENC_v",Rfj=["sign","verify"],Dfj="SHA-256",iFA=32,aFA="1P_MANAGED_ACCOUNT_LINK_AUTH",nT=gq,xk=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedAccountLinkAuthKey",this.toJSON=gt,this.exportAsVersionPrefixedBytes=async()=>{let e=await De.exportKey("raw",this.rawKey),t=new Uint8Array(e.byteLength+1);return t.set([VB.V1]),t.set(new Uint8Array(e),1),new Uint8Array(t)},this.exportAsBase64Url=async()=>{let e=await this.exportAsVersionPrefixedBytes();return Aj(e)},this.sign=async e=>{let t=await De.sign("HMAC",this.rawKey,await nFA(e));return Cs.fromParts({kid:"",content:new Uint8Array(t),purpose:aFA,purposeVersion:VB.V1})},this.verify=async(e,t)=>{if(e.purpose!==aFA)throw new Error("Purpose does not match");if(e.purposeVersion!==VB.V1)throw new Error("Unsupported purpose version");return De.verify("HMAC",this.rawKey,e.content,await nFA(t))},this.encryptSelfWithOwnersGroupKeyset=async e=>(await Df.fromOwnersGroupKeyset(e)).encryptJweB(await this.exportAsVersionPrefixedBytes()),this.rawKey=j}};Rf=xk;xk.__crypto_internal={importFromVersionPrefixedBytes:async A=>{if(A[0]!==VB.V1)throw new Error("Unsupported key version");return Rf.__crypto_internal.fromRawBytes(A.slice(1))},fromRawBytes:async A=>{if(A.byteLength!==iFA)throw new Error("Invalid key length");return new Rf(await De.importKey("raw",A,{name:"HMAC",hash:Dfj},!0,Rfj))}};xk.generate=async()=>Rf.__crypto_internal.fromRawBytes(ta(iFA));xk.fromBase64Url=async A=>Rf.__crypto_internal.importFromVersionPrefixedBytes(ej(A));xk.decryptFromOwnersGroupKeyset=async(A,j)=>{let e=await Df.fromOwnersGroupKeyset(A);return Rf.__crypto_internal.importFromVersionPrefixedBytes(await e.decryptJweB(j))};var nFA=async A=>{let j=await A.exportKey();return Qe(j)},Df=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedAccountLinkAuthKeyEncryptionKey",this.toJSON=gt,this.encryptJweB=async e=>this.rawKey.encryptJweB(e),this.decryptJweB=async e=>this.rawKey.decryptJweB(e),this.rawKey=j}};oFA=Df;Df.fromOwnersGroupKeyset=async A=>{if(A.symKey.jwk===void 0)throw new Error("Keyset symmetric key is not exportable");let j=ej(A.symKey.jwk.k);if(j.byteLength!==32)throw new Error("Symmetric key length is not 32 bytes");let t=await(await sd.fromRawBytes(j)).deriveAes256Key({hash:Nr.Sha256,info:Ij(rFA+VB.V1),salt:new Uint8Array},A.symKey.jwk.kid+":"+rFA+VB.V1);return new oFA(await On.fromAes256Key(t))};var ru=J(tA());var Iz={};er(Iz,{deobfuscate:()=>lw,obfuscate:()=>sw});var kT=J(Fo());var wp=J(Fo());var fz=()=>ta(12);var Tfj=async A=>$A.supports.nativeAesGcm?Fz(A,"cek"):bz(A,"cek"),Fz=async(A,j)=>{let e=j||Se(),t=await $A.subtle.generateKey(gf(A),!0,["encrypt","decrypt"]);return{type:"native",jwk:await $A.exportKey(e,t,$A.JwkSymKey),imported:t}},bz=async(A,j)=>await cT({uuid:j||Se(),enc:A,rawKey:$A.getRandomBytes(32)}),lFA=128,sFA=16,XB=A=>({ciphertext:A.slice(0,-sFA),tag:A.slice(-sFA)}),cFA=async({enc:A,plaintext:j,additionalData:e})=>{let t=await Tfj(A);return{...await Cfj({key:t,plaintext:j,additionalData:e}),cek:ej(t.jwk.k)}},Cfj=async({key:A,plaintext:j,additionalData:e})=>A.type==="native"?oT({key:A.imported,plaintext:j,additionalData:e}):iT({cipher:A.imported,plaintext:j,additionalData:e}),oT=async({key:A,plaintext:j,additionalData:e})=>{let t=fz(),r={name:A.algorithm.name,iv:t,...e?{additionalData:e}:{},tagLength:lFA},a=await $A.subtle.encrypt(r,A,j),n=new Uint8Array(a);return{iv:t,...XB(n)}},iT=async({cipher:A,plaintext:j,additionalData:e})=>{let t=fz(),r=wp.mode.gcm.encrypt(A,Ea(j),Ea(t),e?Ea(e):void 0,lFA),a=new Uint8Array(wp.codec.bytes.fromBits(r));return{iv:t,...XB(a)}},dFA=async({enc:A,cek:j,iv:e,ciphertext:t,additionalData:r,tag:a})=>{let n=await Sfj({enc:A,rawKey:j,uuid:"cek"});return _fj({key:n,iv:e,ciphertext:t,additionalData:r,tag:a})},_fj=async({key:A,iv:j,ciphertext:e,additionalData:t,tag:r})=>A.type==="native"?sT({key:A.imported,iv:j,ciphertext:e,additionalData:t,tag:r}):lT({cipher:A.imported,iv:j,ciphertext:e,additionalData:t,tag:r}),sT=async({key:A,ciphertext:j,tag:e,additionalData:t,iv:r})=>{let a={name:A.algorithm.name,iv:r,...t?{additionalData:t}:{},tagLength:e.byteLength*8},n=In([j,e]),o=await $A.subtle.decrypt(a,A,n);return new Uint8Array(o)},lT=async({cipher:A,ciphertext:j,tag:e,additionalData:t,iv:r})=>{let a=In([j,e]),n=wp.mode.gcm.decrypt(A,Ea(a),Ea(r),t?Ea(t):void 0,e.byteLength*8);return new Uint8Array(wp.codec.bytes.fromBits(n))},yz=async A=>{let j=gf(A.alg);return await $A.subtle.importKey("jwk",A,j,!0,["encrypt","decrypt"])},kFA=async A=>{let j=ej(A.k);return new wp.cipher.aes(Ea(j))},Sfj=async A=>$A.supports.nativeAesGcm?$z(A):cT(A),$z=async({uuid:A,enc:j,rawKey:e})=>{let t=gf(j);if(e.length*8!==t.length)throw new Error("Invalid raw key length");let r=await $A.subtle.importKey("raw",e,t,!0,["encrypt","decrypt"]);return{type:"native",jwk:await $A.exportKey(A,r,$A.JwkSymKey),imported:r}},cT=async({uuid:A,enc:j,rawKey:e})=>{let t=gf(j);if(e.length*8!==t.length)throw new Error("Invalid raw key length");let r=new wp.cipher.aes(Ea(e));return{type:"sjcl",jwk:{kid:A,alg:j,kty:"oct",key_ops:["encrypt","decrypt"],k:Aj(e),ext:!0},imported:r}};var uFA,ow="b5+jwk+json",iw=A=>{if(A.kid!==gp)throw new Error("Data is not encrypted with master key");if(!A.alg||!A.p2c||!A.p2s)throw new Error("Missing derivation info");return{alg:A.alg,enc:A.enc,iterations:A.p2c,salt:A.p2s}},$i=class{constructor(j=""){this.generate=async(e,t)=>{if(this.uuid)throw new Error("SymmetricKey UUID already exists, will not regenerate.");let{imported:r,jwk:a}=await Fz(e,t);return this.key=r,this.jwk=a,this.uuid=a.kid,this.jwk},this.importRawKey=async(e,t)=>{let{imported:r,jwk:a}=await $z({uuid:this.uuid,enc:e,rawKey:t});return this.key=r,this.jwk=a,this.uuid=a.kid,this.jwk},this.encrypt=async e=>{if(!this.key)throw new Error("Missing key");if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg");if(this.uuid===gp&&!this.derivation)throw new Error("Missing derivation info for MUK");let{iv:t,ciphertext:r,tag:a}=await oT({key:this.key,plaintext:e}),n=In([r,a]);return{kid:this.uuid,enc:this.jwk.alg,cty:ow,iv:Aj(t),data:Aj(n)}},this.decrypt=async e=>{if(ow!==e.cty)throw new Error("Unexpected content type");if(e.kid!==this.uuid)throw new Error("Key IDs do not match");if(!e.iv)throw new Error("Missing initialization vector");if(!this.key)throw new Error("Missing key");let{ciphertext:t,tag:r}=XB(ej(e.data));return await sT({key:this.key,ciphertext:t,tag:r,iv:ej(e.iv)})},this.encryptFile=async e=>{if(!this.key)throw new Error("Missing key");if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg");let{iv:t,ciphertext:r,tag:a}=await oT({key:this.key,plaintext:e});return{data:In([r,a]),iv:Aj(t)}},this.decryptFile=async e=>{let{data:t,iv:r}=e;if(!r)throw new Error("Missing initialization vector");if(!this.key)throw new Error("Missing key");let{ciphertext:a,tag:n}=XB(t);return await sT({key:this.key,ciphertext:a,tag:n,iv:ej(r)})},this.decryptWithKeyset=async(e,t)=>w$(t.enc)?this.decryptWithKey(e.symKey,t):this.decryptWithKey(e.ekeyPair,t),this.decryptWithKey=async(e,t)=>{let r=await e.decrypt(t);return this.jwk=cj(r,Ne.pipe(yo)).unwrap(),this.uuid=this.jwk.kid,this.key=await yz(this.jwk),this},this.encryptWithKey=async e=>{if(!this.jwk)throw new Error("Missing JWK");return e.encrypt(Qe(this.jwk))},this.uuid=j}};uFA=$i;$i.newFromJwkSymKey=async A=>{let j=new uFA(A.kid);return j.key=await yz(A),j.jwk=A,j};var EFA="b5+jwk+json",Ot=A=>xp.nativeAesGcm?new $i(A):new dT(A),Mfj=async(A,j)=>{let e=Ot(gp);return await e.importRawKey(A,j),e},dT=class extends $i{constructor(j){super(j),this.generate=async(e,t)=>{if(this.uuid)throw new Error("SymmetricKeyPf UUID already exists, will not regenerate");let{imported:r,jwk:a}=await bz(e,t);return this.jwk=a,this.uuid=a.kid,this.cipher=r,a},this.importRawKey=async(e,t)=>{let{imported:r,jwk:a}=await cT({uuid:this.uuid,enc:e,rawKey:t});return this.cipher=r,this.jwk=a,this.jwk},this.encrypt=async e=>{if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg.");if(!this.cipher)throw new Error("Missing cipher");if(this.uuid===gp&&!this.derivation)throw new Error("Missing derivation info for MUK");let{iv:t,ciphertext:r,tag:a}=await iT({cipher:this.cipher,plaintext:e}),n=In([r,a]);return{kid:this.uuid,enc:this.jwk.alg,cty:EFA,iv:Aj(t),data:Aj(n)}},this.decrypt=async e=>{if(EFA!==e.cty)throw new Error("Unexpected content type.");if(e.kid!==this.uuid)throw new Error("Key IDs do not match.");if(!e.iv)throw new Error("Missing initialization vector");if(!this.cipher)throw new Error("Missing cipher");let{ciphertext:t,tag:r}=XB(ej(e.data));return await lT({cipher:this.cipher,ciphertext:t,tag:r,iv:ej(e.iv)})},this.encryptFile=async e=>{if(!this.key)throw new Error("Missing key");if(!this.jwk||!this.jwk.alg)throw new Error("Missing JWK alg");if(!this.cipher)throw new Error("Missing cipher");let{iv:t,ciphertext:r,tag:a}=await iT({cipher:this.cipher,plaintext:e});return{data:In([r,a]),iv:Aj(t)}},this.decryptFile=async e=>{let{data:t,iv:r}=e;if(!r)throw new Error("Missing initialization vector");if(!this.key)throw new Error("Missing key");if(!this.cipher)throw new Error("Missing cipher");let{ciphertext:a,tag:n}=XB(t);return await lT({cipher:this.cipher,ciphertext:a,tag:n,iv:ej(r)})},this.decryptWithKey=async(e,t)=>{let r=await e.decrypt(t),a=Ne.pipe(yo);return this.jwk=cj(r,a).unwrap(),this.uuid=this.jwk.kid,this.cipher=await kFA(this.jwk),this}}};var pFA="03h4kf8euth5ks9skel3lfis9s",Kfj="f737s0",wz="3tnqywhecddkhvl375l6yu7qri",Nfj="Obfuscation Does Not Provide Security But It Doesn't Hurt",mFA=kT.codec.hex.fromBits(kT.hash.sha1.hash(Nfj)).slice(0,32),sw=async A=>{let j=Ij(mFA),e=Ot(wz);return await e.importRawKey(Nt,j),e.encrypt(Ij(A))},lw=async A=>{if(!A)return"";let j="",e="";if(A.kid===pFA)j=Pr.device.uuid+Kfj,e=pFA;else if(A.kid===wz)j=mFA,e=wz;else throw new Error("Unrecognized key ID.");if(j.length!==32)throw new Error("Missing or invalid obfuscation key.");let t=Ot(e);await t.importRawKey(Nt,Ij(j));let r=await t.decrypt(A);return ln(r)};var cw,Lfj="2",zfj=ru.readonly(ru.exact(ru.type({kid:ru.string,k:ru.string,s:ru.string})),"SerializedDeviceKey"),uT=class{constructor(){this.KEY_DOMAIN_SEPARATOR="1P_SSO_CREDENTIAL_BUNDLE_KEY:LOCAL",this.AD_DOMAIN_SEPARATOR="1P_SSO_CREDENTIAL_BUNDLE:LOCAL"+Lfj}async serialize(j){return j.__crypto_internal.serialize()}async deserialize(j){return yi.unsafeIfInputNotTrustworthyDeserialize(j)}},_s=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_DeviceKey",this.toJSON=gt,this.computeContextSummary=async(t,r)=>{let a=await this.hkdfKey.deriveCryptoKey({hash:"SHA-384",info:Ij("1P_DEVICE_KEY_CONTEXT_SUMMARY_KEY"),salt:Ij(this.kid)},{name:"HMAC",hash:"SHA-384"},["sign"]),n=await De.sign({name:"HMAC"},a,Qe({accountUuid:t,userUuid:r}));return Aj(new Uint8Array(n))},this.serialize=async(t,r)=>{let a={kid:this.kid,k:Aj(this.hkdfKey.exportRawIkm()),s:await this.computeContextSummary(t,r)};return JSON.stringify(a)},this.deriveAes256JwebKey=async t=>On.fromAes256Key(await this.hkdfKey.deriveAes256Key({hash:"SHA-384",info:Ij(t.KEY_DOMAIN_SEPARATOR),salt:Ij(this.kid)},this.kid)),this.encrypt=async(t,r)=>(await this.deriveAes256JwebKey(t)).encryptJweB(await t.serialize(r),Ij(t.AD_DOMAIN_SEPARATOR)),this.decrypt=async(t,r)=>{let n=await(await this.deriveAes256JwebKey(t)).decryptJweB(r,Ij(t.AD_DOMAIN_SEPARATOR));return t.deserialize(n)},this.encryptCredentialBundle=async t=>this.encrypt(new uT,t),this.decryptCredentialBundle=async t=>this.decrypt(new uT,t),this.exportObfuscated=async(t,r)=>{let a=await sw(await this.serialize(t,r));return JSON.stringify(a)},this.kid=j,this.hkdfKey=e}};cw=_s;_s.generate=async()=>cw.fromRawBytes(ta(32),Se());_s.fromRawBytes=async(A,j)=>{if(A.length!==32)throw new Error("Bad key len");return new cw(j,await sd.fromRawBytes(A))};_s.fromSerialized=async(A,j,e)=>{let t=cj(A,Yo.pipe(zfj)).unwrap(),r=await cw.fromRawBytes(ej(t.k),t.kid);if(await r.computeContextSummary(j,e)!==t.s)throw new Error("Bad summary value");return r};_s.fromObfuscated=async(A,j,e)=>{let t=cj(A,Yo.pipe(Fa)).unwrap();return cw.fromSerialized(await lw(t),j,e)};var xFA=J(gFA());var hFA,qFA,Ufj=Symbol(),Tf=class{constructor(j,e){this[qFA]="B5_CRYPTO_KEYS_ServiceAccountThrottleKeypair",this.toJSON=gt,this.exportSeed=()=>this.seed,this.getPublicKey=async()=>this.pub,this.getPublicKeyHex=async()=>Wn(this.pub),this.seed=j,this.pub=e}};hFA=Tf,qFA=Ufj;Tf.generate=async()=>{let A=ta(32),j=xFA.sign.keyPair.fromSeed(A);return new hFA(A,j.publicKey)};var au,Zn;(function(A){A.A2="A2",A.A3="A3",A.TrustedDevice="TD"})(Zn||(Zn={}));var Pz=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_SecretKey_UnknownFormat",this.format=j}toString(){return this.format}},pT="23456789ABCDEFGHJKLMNPQRSTVWXYZ",ba=class{constructor(j,e,t){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_SecretKey",this.toJSON=gt,this.identifier=()=>`${this.format.toString()}-${this.id}`,this.maskedString=()=>this.identifier()+" \u2022\u2022\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022",this.unwrapFormatAsKnown=()=>{let r=this.format;switch(r){case Zn.A3:case Zn.A2:case Zn.TrustedDevice:return r;default:throw new Error("Unknown secret key format")}},this.formatKey=()=>{let r=this.rawKeyMaterial,a;try{a=this.unwrapFormatAsKnown()}catch{throw new Error("Cannot display secret key with unknown format")}switch(a){case Zn.A3:return[r.slice(0,6),r.slice(6,11),r.slice(11,16),r.slice(16,21),r.slice(21,26)].join("-");case Zn.A2:return[r.slice(0,5),r.slice(5,10),r.slice(10,15),r.slice(15,20),r.slice(20,25)].join("-");case Zn.TrustedDevice:return new Array(6).join("*")}},this.exportSensitiveReadableString=()=>{let r=this.formatKey();return`${this.identifier()}-${r}`},this.combineWithBytes=async r=>{let a=Ij(this.rawKeyMaterial),n=Ij(this.format.toString()),o=Ij(this.id),i=await ml(Nr.Sha256,a,n,o,r.length),s=new Uint8Array(r.length);for(let[l,c]of r.entries()){let k=i[l];if(k===void 0)throw new Error("combineWithBytes: personalByte undefined");s[l]=c^k}return s},this.id=j,this.format=e,this.rawKeyMaterial=t}async exportObfuscated(){return sw(this.exportSensitiveReadableString())}static async fromObfuscated(j){return au.fromInput(await lw(j))}isTrustedDeviceFormat(){return this.format===Zn.TrustedDevice}__testKeyStrLen(){return this.rawKeyMaterial.length}__testKeyMaterialEquals(j){return this.rawKeyMaterial===j.rawKeyMaterial}};au=ba;ba.validateExpectedFormat=(A,j)=>{let{id:e,rawKeyMaterial:t}=j;switch(A){case Zn.A2:{if(j.id.length!==6)throw new Error(`Invalid SecretKey ID length; expected 6, got: ${e.length}`);if(j.rawKeyMaterial.length!==25)throw new Error(`Invalid SecretKey key length; expected 25, got: ${t.length}`);break}case Zn.A3:{if(j.id.length!==6)throw new Error(`Invalid SecretKey ID length; expected 6, got: ${e.length}`);if(j.rawKeyMaterial.length!==26)throw new Error(`Invalid SecretKey key length; expected 26, got: ${t.length}`);break}case Zn.TrustedDevice:{if(e.length!==6)throw new Error(`Invalid SecretKey ID length; expected 6, got: ${e.length}`);if(t.length!==0)throw new Error(`Invalid SecretKey key length; expected 0, got: ${t.length}`);break}default:throw new Error("Unreachable")}};ba.validateParams=A=>{let{id:j,format:e,rawKeyMaterial:t}=A,r;switch(A.format){case Zn.A2:case Zn.A3:case Zn.TrustedDevice:{r=A.format,au.validateExpectedFormat(r,{id:j,rawKeyMaterial:t});break}default:{r=new Pz(A.format),au.validateExpectedFormat(Zn.A3,{id:j,rawKeyMaterial:t});break}}return{id:j,format:r,rawKeyMaterial:t}};ba.new=A=>{let{id:j,format:e,rawKeyMaterial:t}=au.validateParams(A);return new au(j,e,t)};ba.generate=async()=>au.new({id:Fp(pT,6)[0],format:Zn.A3,rawKeyMaterial:Fp(pT,26)[0]});ba.generateForTrustedDevice=async()=>au.new({id:Fp(pT,6)[0],format:Zn.TrustedDevice,rawKeyMaterial:""});ba.forTrustedDevice=async A=>au.new({id:A,format:Zn.TrustedDevice,rawKeyMaterial:""});ba.fromInput=A=>{let j=new RegExp(`[^${pT}]`,"gmi");A=A.toUpperCase().replace(j,"");let e=A.slice(0,2),t=A.slice(2,8),r=A.slice(8);return au.new({id:t,format:e,rawKeyMaterial:r})};var vFA,GFA,fFA="b5x_autofill_parent_key",Cf=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_UrlAutofillParentKey",this.toJSON=gt,this.deriveSessionKey=async e=>{let t=Math.floor(e/1e3),r=j9(t-t%10,8),a=new Uint8Array(0),n=await ml(Nr.Sha256,this.rawKey,r,a,32);return hq.fromBytes(n)},this.rawKey=j,this.kid=fFA}};vFA=Cf;Cf.fromAuk=async A=>{let j=await A.exportJwk(),e=Ij(fFA),t=new Uint8Array(0),r=await ml(Nr.Sha256,ej(j.k),e,t,32);return new vFA(r)};var Vfj="b5x_session_subkey",hq=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_UrlAutofillSessionKey",this.toJSON=gt,this.decrypt=async e=>{if(e.length!==54)throw new Error("Input bytes to decrypt() are incorrect length.");let a=e.slice(0,12),n=e.slice(12),o=bp.new({data:n,iv:a}),i=await this.key.decryptRaw(o);return ln(i)},this.key=j}};GFA=hq;hq.fromBytes=async A=>{let j=await Ds.fromRawBytes(A,Vfj);return new GFA(j)};var Rz,Ip,yFA,$FA,hl;(function(A){A.V1="v1"})(hl||(hl={}));var AKe=hl.V1,qq="1PRK",Oz=52,wFA=Oz+qq.length,Xfj=Ij("1P_RECOVERY_KEY_UUID"),Jfj="1P_RECOVERY_KEY_AUTH_",FFA="1P_RECOVERY_KEY_ENC_",bFA=Ij("1P_RECOVERY_KEY_ENC_RECOVERABLE_MATERIAL_v1"),IFA=Ij("1P_ENC_KEY_RECOVERY_KEY_AD_v1"),xq=class{constructor(j,e){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_InputRecoveryKey",this.toJSON=gt,this.toRecoveryKey=async t=>ld.__crypto_internal.fromHkdfKey(t,this.rawKey),this.rawKey=e,this.kid=j}};Rz=xq;xq.fromBytes=async A=>{if(A.length!==32)throw new Error(`Bad key length: ${A.length}`);let j=await sd.fromRawBytes(A),e=await PFA(j);return new Rz(e,j)};xq.fromPaperKey=async A=>{if(!A.startsWith(qq))throw new Error("Bad paper key: unknown prefix");let e=A.slice(qq.length).replace(new RegExp("[-]","g"),"").toUpperCase().replace(new RegExp("[0]","g"),"O").replace(new RegExp("[1]","g"),"I"),t=await Wfj(e);return Rz.fromBytes(t)};var PFA=async A=>t$(await A.hkdfOutput({hash:Nr.Sha256,info:Xfj,len:16})).toLowerCase(),Wfj=async A=>{let j=e9(A);if(t$(j)!==A)throw new Error("invalid base32 input");return j},ld=class{constructor(j,e,t,r,a){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_RecoveryKey",this.toJSON=gt,this.__crypto_internal={authKey:()=>this.authKey,encKey:()=>this.encKey},this.rawKeyAsBase32=()=>t$(this.rawKey.exportRawIkm()).toUpperCase(),this.rawKeyAsChunkedBase32=()=>{let n=this.rawKeyAsBase32();if(n.length!==Oz)throw new Error(`Malformed recovery key: bad serialised length: ${n.length}`);let o=[],i=4;for(let s=0;s<Oz;s+=i)o.push(n.slice(s,s+i));return o.join("-")},this.serialiseToSensitivePaperKey=async()=>qq+"-"+this.rawKeyAsChunkedBase32(),this.serialiseToObfuscatedPaperKey=async()=>{let n=this.rawKeyAsChunkedBase32(),o=n.slice(n.length-4);return qq+" \u2022\u2022\u2022\u2022\u2022\u2022 "+o},this.encryptSelfAndKeyset=async n=>{switch(this.version){case hl.V1:{let[o,i]=await Promise.all([this.encryptSelfWithKeysetV1(n),this.encKey.encryptKeyset(n)]);return{encRecoveryKey:o,encKeysetSymKey:i}}}},this.decryptKeysetSymKey=async n=>this.encKey.decryptKeysetSymKey(n),this.beginAuth=async()=>this.authKey.beginAuth(this.kid),this.exportVerifier=async()=>this.authKey.exportVerifier().then(n=>({srpv:n})),this.checkIntegrity=async(n,o,i,s)=>{if(n.symKey.jwk===void 0)throw new Error("missing user keyset symmetric key");let l=await Ec(Qe(o),Nr.Sha256);if(Aj(l)!==i)throw new Error("integrity check failed for recoverable material");if((await this.decryptKeysetSymKey(o)).k!==n.symKey.jwk.k)throw new Error("decrypted keyset does not match expected keyset");let k=await Ip.decryptFromKeyset(this.version,n,s);if(Aj(k.rawKey.exportRawIkm())!==Aj(this.rawKey.exportRawIkm()))throw new Error("decrypted recovery key does not match recovery key")},this.encryptSelfWithKeysetV1=async n=>{if(n.symKey.jwk===void 0)throw new Error("Keyset symmetric key not exportable");return(await On.fromJwk(n.symKey.jwk)).encryptJweB(this.rawKey.exportRawIkm(),IFA)},this.version=j,this.rawKey=t,this.kid=e,this.authKey=r,this.encKey=a}};Ip=ld;ld.__crypto_internal={fromHkdfKey:async(A,j)=>{let e=await PFA(j),[t,r]=await Promise.all([Ip.deriveAuthKeyV1(j),Ip.deriveEncKeyV1(e,j)]);return new Ip(A,e,j,t,r)},fromBytes:async(A,j)=>{let e=await sd.fromRawBytes(j);return Ip.__crypto_internal.fromHkdfKey(A,e)}};ld.generate=async(A=hl.V1)=>Ip.__crypto_internal.fromBytes(A,ta(32));ld.decryptFromKeyset=async(A,j,e)=>{if(j.symKey.jwk===void 0)throw new Error("Keyset symmetric key not exportable");switch(A){case hl.V1:return Ip.decryptRecoveryKeyWithKeysetV1(j,e)}};ld.deriveAuthKeyV1=async A=>dw.fromBytes(await A.hkdfOutput({hash:Nr.Sha256,info:Ij(Jfj+hl.V1),len:32}));ld.deriveEncKeyV1=async(A,j)=>kw.fromBytes(await j.hkdfOutput({hash:Nr.Sha256,info:Ij(FFA+hl.V1),len:32}),A+":"+FFA+hl.V1);ld.decryptRecoveryKeyWithKeysetV1=async(A,j)=>{if(A.symKey.jwk===void 0)throw new Error("Keyset symmetric key not exportable");let t=await(await On.fromJwk(A.symKey.jwk)).decryptJweB(j,IFA);return Ip.__crypto_internal.fromBytes(hl.V1,t)};var dw=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_RecoveryAuthKeyV1",this.toJSON=gt,this.beginAuth=async e=>this.srpx.beginAuth(eT[yp.Group4096],new Uint8Array(16).fill(0),e),this.exportVerifier=async()=>this.srpx.verifier(eT[yp.Group4096]).then(async e=>e.exportServerHex()),this.__crypto_internal={srpx:()=>this.srpx},this.srpx=j}};yFA=dw;dw.fromBytes=async A=>new yFA(await Ai.fromRawBytes(A));var kw=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPERATOR="B5_CRYPTO_KEYS_RecoveryEncKeyV1",this.toJSON=gt,this.encryptKeyset=async e=>{if(e.symKey.jwk===void 0)throw new Error("Keyset symmetric key not exportable");return this.key.encryptJweB(Qe(yo.encode(e.symKey.jwk)),bFA)},this.decryptKeysetSymKey=async e=>{let t=await this.key.decryptJweB(e,bFA);return cj(t,Ne.pipe(yo)).unwrap()},this.__crypto_internal={key:()=>this.key},this.key=j}};$FA=kw;kw.fromBytes=async(A,j)=>new $FA(await On.fromRawBytes(A,j));var OFA,RFA="1P_WEB_TAG_ROUTE_HKDF_KEY",_f=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_TagRouteKey",this.toJSON=gt,this.hmacTag=e=>{let t=Gp(this.rawKey,e);return SB(t)},this.rawKey=j,this.kid=RFA}};OFA=_f;_f.fromActiveKeyset=async A=>{let j=A.symKey.jwk;if(!j)throw new Error("fromActiveKeyset could not find symmetric key");let e=Ij(RFA),t=new Uint8Array(0),r=await ml(Nr.Sha256,ej(j.k),e,t,32);return new OFA(r)};var Sa=J(tA());var Z=A=>j=>Qfj((...e)=>({...j(...e),filename:A})),DFA=W,Qfj=A=>async(j,...e)=>{let t={body:void 0,...A(...e)},a=t.responseType===L?{...t.options??{},responseType:"ignore"}:t.options,n=t.encrypted??!0,o=DFA(t.name),i=DFA(t.filename),s=await j.request({name:o,method:t.method,url:t.url,body:t.body,encrypted:n,decryptResponse:t.decryptResponse,options:a}),l=await Yfj({response:s,responseType:a?.responseType??"json",endpointName:o});return cj(l,t.responseType,{mode:t.validation,file:i,func:o}).unwrap()},Yfj=async({response:A,responseType:j,endpointName:e})=>{try{switch(j){case"json":{let t=await A.text();return t===""?void 0:JSON.parse(t)}case"arraybuffer":return await A.arrayBuffer();case"text":return await A.text();case"ignore":return}}catch{let t=W(j),r=p`Failed to decode response as ${t} for ${e}`,a=A.headers.get("Content-Type"),n=new xe({errorClass:$n.ValidationError,message:r,metaData:{response:{statusCode:dp(A.status),contentType:a?W(a):W("unknown")}}});throw console.error(r.str),Or(n),n}};var Xa=J(tA());var JB=J(tA());var Dz=J(Wo()),nt=A=>{let j=ic(A,r=>Zfj(r)),e=Dy(j,r=>r.length>0),t=yn(e,(r,a)=>encodeURIComponent(a)+"="+r);return t.length>0?"?"+t.join("&"):""},Zfj=A=>Array.isArray(A)?A.map(j=>encodeURIComponent(Tz(j))).join(","):encodeURIComponent(Tz(A)),Tz=A=>typeof A>"u"||A===null?"":typeof A=="string"?A:Array.isArray(A)?A.map(j=>Tz(j)).join(","):JSON.stringify(A),vk=(A,j)=>j.slice(0,15).filter((e,t)=>(A&1<<t)!==0),ql=(A,j)=>{let e=t=>typeof t=="string"&&q6(A).includes(t);return new JB.Type(j,e,(t,r)=>e(t)?JB.success(t):JB.failure(t,r),JB.identity)},vq;(function(A){A.Older="older",A.Newer="newer"})(vq||(vq={}));var uw=(A,j)=>A===vq.Newer?Dz.default.utc(j).startOf("day"):Dz.default.utc(j).endOf("day");var mT=Z("web-api/api/managed_credential_accessors.ts"),Sf;(function(A){A.Group="G",A.User="U"})(Sf||(Sf={}));var pc;(function(A){A.Manage="M",A.Read="R"})(pc||(pc={}));var Ew;(function(A){A.Active="A",A.Testing="T",A.Deleted="D"})(Ew||(Ew={}));var Gq=Xa.readonly(Xa.intersection([Xa.type({accessorType:ql(Sf,"AccessorType"),accessorUuid:Xa.string,acl:Xa.array(ql(pc,"AccessorACL")),encItemKey:Fa,encryptedBy:Xa.string}),Xa.partial({credentialUuid:Xa.string,expiry:Xa.string})]),"BaseManagedCredentialAccessor"),fq=Xa.readonly(Xa.intersection([Gq,Xa.type({uuid:Xa.string,state:ql(Ew,"AccessorState")})]),"ManagedCredentialAccessor"),jFj=Xa.readonly(Xa.intersection([Gq,Xa.partial({state:ql(Ew,"AccessorState")})]),"CreateAccessorRequest"),EKe=Xa.readonly(Xa.type({acl:Xa.array(ql(pc,"AccessorACL")),encryptedBy:Xa.string,encItemKey:Fa}),"UpdateManagedCredentialAccessor"),Cz=mT(A=>({name:"getManagedCredentialAccessors",method:"GET",url:`/credentials-api/v1/credentials/${A}/accessors`,responseType:Xa.array(fq)})),_z=mT((A,j)=>({name:"createManagedCredentialAccessors",method:"POST",body:j,url:`/credentials-api/v1/credentials/${A}/accessors`,responseType:Xa.array(fq)})),Sz=mT((A,j,e)=>({name:"updateManagedCredentialAccessor",method:"PATCH",body:e,url:`/credentials-api/v1/credentials/${A}/accessors/${j}`,responseType:L})),Hz=mT((A,j)=>({name:"deleteManagedCredentialAccessor",method:"DELETE",url:`/credentials-api/v1/credentials/${A}/accessors/${j}`,responseType:L}));var Mz=Z("web-api/api/managed_credential_policies.ts"),BT;(function(A){A.Pending="P",A.Enforced="E",A.Deleted="D"})(BT||(BT={}));var gT;(function(A){A.Individual="I",A.Shared="S"})(gT||(gT={}));var Hf=Sa.readonly(Sa.type({uuid:Sa.string,managedCredentialB5Uuid:Sa.union([Sa.string,Sa.null]),accountUuid:Sa.string,urls:Sa.array(Sa.string),usernames:Sa.array(Sa.string),version:Sa.number,state:ql(BT,"PolicyState"),type:ql(gT,"PolicyType"),sendNotifications:Sa.boolean,createdAt:Sa.string,updatedAt:Sa.string}),"ManagedCredentialPolicy"),eFj=Sa.readonly(Sa.type({policyUuid:Sa.string,managedCredentialB5Uuid:Sa.string,accessors:Sa.array(Gq)}),"EnforcePolicyRequest"),Kz=Mz(()=>({name:"getManagedCredentialsPolicies",method:"GET",url:"/credentials-api/v1/policies",responseType:Sa.array(Hf)})),Nz=Mz(A=>({name:"getManagedCredentialPolicy",method:"GET",url:`/credentials-api/v1/policies/${A}`,responseType:Hf})),Lz=Mz(A=>({name:"enforceManagedCredentialPolicy",method:"POST",body:A,url:`/credentials-api/v1/policies/${A.policyUuid}/enforce`,responseType:Hf}));var CFA,TFA="1P_WEB_MANAGED_CREDENTIAL_POLICY_HKDF_KEY",WB=class{constructor(j){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedCredentialPolicyKey",this.toJSON=gt,this.encrypt=async e=>await this.symmetricKey.encrypt(Qe(e)),this.decrypt=async e=>{let t=await this.symmetricKey.decrypt(e);return cj(t,Ne.pipe(Hf)).unwrap()},this.symmetricKey=j}};CFA=WB;WB.fromActiveKeyset=async A=>{let j=A.symKey.jwk;if(!j)throw new Error("fromActiveKeyset could not find symmetric key");let e=Ij(TFA),t=new Uint8Array(0),r=await ml(Nr.Sha256,ej(j.k),e,t,32),a=new $i(TFA);return await a.importRawKey(Nt,r),new CFA(a)};var os=J(tA());var Rt=J(tA());var pw=Z("web-api/api/managed_credential.ts"),hT;(function(A){A.Uplifted="U",A.Managed="M",A.Archived="A"})(hT||(hT={}));var zz=Rt.readonly(Rt.type({vaultUuid:Rt.string,itemUuid:Rt.string,itemVersion:Rt.number},"ManagedCredentialSource")),mw=Rt.readonly(Rt.type({encOverview:Fa,encDetails:Fa}),"BaseEncryptedData"),Mf=Rt.readonly(Rt.type({b5Uuid:Rt.string,templateUuid:Rt.string,policyUuid:Rt.string,createdAt:Rt.string,updatedAt:Rt.string,creatorUuid:Rt.string,changerUuid:Rt.string,version:Rt.number,encryptedBy:Rt.string,source:zz,state:pe(hT,"ManagedCredentialState")},"BaseManagedCredential")),_FA=Rt.readonly(Rt.intersection([Mf,mw]),"GetCredentialsForPolicyResponse"),SFA=Rt.readonly(Rt.intersection([Mf,mw,Rt.type({accessors:Rt.array(fq)})]),"ManagedCredential"),qT=Rt.type({b5Uuid:Rt.string,policyUuid:Rt.string,templateUuid:Rt.string,creatorUuid:Rt.string,encryptedBy:Rt.string,source:zz,accessors:Rt.array(Gq)},"BaseCreateManagedCredential"),HFA=Rt.readonly(Rt.intersection([qT,mw]),"CreateManagedCredential"),OKe=Rt.array(HFA,"CreateManagedCredentialRequest"),xT=Rt.readonly(Rt.type({b5Uuid:Rt.string,templateUuid:Rt.string,changerUuid:Rt.string}),"BaseUpdatedManagedCredential"),tFj=Rt.readonly(Rt.intersection([xT,mw]),"UpdatedManagedCredential"),Uz=pw(A=>({name:"getManagedCredential",method:"GET",url:`/credentials-api/v1/credentials/${A}`,responseType:SFA})),Vz=pw(()=>({name:"getManagedCredentials",method:"GET",url:"/credentials-api/v1/credentials",responseType:Rt.array(SFA)})),Xz=pw(A=>({name:"createManagedCredential",method:"POST",url:"/credentials-api/v2/credentials",body:A,responseType:L})),Jz=pw(A=>({name:"updateManagedCredential",method:"PATCH",url:`/credentials-api/v1/credentials/${A.b5Uuid}`,body:A,responseType:L})),Wz=pw(A=>({name:"getManagedCredentialsForPolicy",method:"GET",url:`/credentials-api/v1/policies/${A}/credentials`,responseType:Rt.array(_FA)}));var vA=J(tA());var vT=J(Wo());var ar=pL((A,j,e)=>{throw console.error(`[${A}#${j}]`,e),e});var CKe=30,Sj;(function(A){A.LoginUuid="001",A.CreditCardUuid="002",A.SecureNoteUuid="003",A.IdentityUuid="004",A.PasswordUuid="005",A.DocumentUuid="006",A.SoftwareUuid="100",A.BankAccountUuid="101",A.DatabaseUuid="102",A.DriverLicenseUuid="103",A.OutdoorLicenseUuid="104",A.MembershipUuid="105",A.PassportUuid="106",A.RewardsUuid="107",A.SocialSecurityNumberUuid="108",A.RouterUuid="109",A.ServerUuid="110",A.EmailUuid="111",A.ApiCredentialUuid="112",A.MedicalRecordUuid="113",A.SshKeyUuid="114",A.CryptoWalletUuid="115",A.SnippetUuid="116",A.InboxKeysUuid="901",A.ManagedApplicationUuid="912",A.sort=j=>{let e={};e[A.LoginUuid]=1,e[A.SecureNoteUuid]=2,e[A.CreditCardUuid]=3,e[A.IdentityUuid]=4,e[A.PasswordUuid]=5,e[A.DocumentUuid]=6;let t=[],r=[];return j.forEach(a=>{e[a.uuid]?t.push(a):r.push(a)}),t.sort((a,n)=>{let o=e[a.uuid]||10,i=e[n.uuid]||10;return o-i}),r.sort((a,n)=>a.singularName.localeCompare(n.singularName)),t.concat(r)},A.StateActive="A",A.StateHidden="H",A.StateDeleted="D"})(Sj||(Sj={}));var MFA=p`model/vault_item`,rFj=ar(MFA.str),Bw;(function(A){A[A.FANTASTIC=100]="FANTASTIC",A[A.EXCELLENT=85]="EXCELLENT",A[A.VERY_GOOD=73]="VERY_GOOD",A[A.GOOD=60]="GOOD",A[A.FAIR=53]="FAIR",A[A.WEAK=44]="WEAK",A[A.TERRIBLE=26]="TERRIBLE"})(Bw||(Bw={}));var gw;(function(A){A[A.FANTASTIC=75]="FANTASTIC",A[A.EXCELLENT=64]="EXCELLENT",A[A.VERY_GOOD=55]="VERY_GOOD",A[A.GOOD=45]="GOOD",A[A.FAIR=40]="FAIR",A[A.WEAK=33]="WEAK",A[A.TERRIBLE=20]="TERRIBLE"})(gw||(gw={}));var kA=class A{constructor(j,e,t){this.addToPasswordHistory=r=>{this.details.passwordHistory||(this.details.passwordHistory=[]);let a={time:Math.floor(Date.now()/1e3),value:r};this.details.passwordHistory.push(a)},this.getSortedPasswordHistory=()=>!this.details||!this.details.passwordHistory?[]:this.details.passwordHistory.slice().sort((r,a)=>typeof r.time=="number"&&typeof a.time=="number"?a.time-r.time:typeof r.time=="number"?-1:typeof a.time=="number"?1:0),this.parseTemplate=r=>{if(!r||(this.templateUuid=r.uuid,!r.attrs||!r.attrs.contents))return;let a=r.attrs.contents,{localizedStrings:n}=r.attrs;for(let o of a){let i=o.fields,s=[];if(i)for(let l of i){let c="";l.type===A.FieldType.Address&&(c={street:"",city:"",country:"",zip:"",state:""}),(l.type===A.FieldType.MonthYear||l.type===A.FieldType.Date)&&(c=void 0),s.push({k:l.type,n:l.name,v:c,t:l.title||n[l.name]||"",a:l.attributes,inputTraits:l.inputTraits,m:l.menuitems})}this.details.sections.push({name:o.set,title:o.title||n["set."+o.set]||"",fields:s})}},this.decryptWithKey=async(r,a,n)=>{this.encOverview=a,this.encDetails=n;try{let o={mode:"unsafe_report_only",file:p`web-api/model/vault_item.ts`,func:p`decryptWithKey`,errorClass:p`VaultItemValidationError`,context:p`Error decoding decrypted bytes for vault/${W(this.vault.uuid)}/item/${W(this.uuid)}: `},i=r.decrypt(a).then(l=>{let c=cj(l,Ne).unwrap(),k=cj(c,Kf,o);this.overview=k.unwrap()}),s=n&&r.decrypt(n).then(l=>{let c=cj(l,Ne).unwrap(),k=cj(c,Nf,o);this.details=k.unwrap()});await Promise.all(Yr([i,s]))}catch(o){console.error("Item is corrupt:",this.vault.uuid,this.uuid,o),this.overview={title:"Corrupted Item",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1}}return(this.details===null||typeof this.details!="object"||this.overview===null||typeof this.overview!="object")&&(this.overview={title:"Corrupted Item",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1},this.details={sections:[]},console.error("Item is corrupt:",this.vault.uuid,this.uuid)),Array.isArray(this.details.sections)||(this.details.sections=[]),this},this.decrypt=async(r,a)=>{if(!this.vault.activeKey)throw new Error("Missing vault's active key");return this.decryptWithKey(this.vault.activeKey,r,a)},this.encryptWithKey=async r=>Promise.resolve().then(async()=>{if(!this.details)throw new Error("Missing item details");return Promise.all([r.encrypt(Ne.pipe(Kf).encode(this.overview)),r.encrypt(Ne.pipe(Nf).encode(this.details))])}).catch(rFj("encryptWithKey")),this.encrypt=async()=>{let r=this.vault.activeKey;if(!r)throw new Error("Missing vault's active key");let[a,n]=await this.encryptWithKey(r);return this.encryptedBy=r.uuid,this.encOverview=a,this.encDetails=n,this},this.clone=()=>{let r=yy(this),a=new A(this.vault);return a.overview=r.overview,a.details=r.details,a.faveIndex=r.faveIndex,a.state=r.state,a.templateUuid=r.templateUuid,a.createdAt=r.createdAt,a.updatedAt=r.updatedAt,a},this.exportToJson=()=>{let r={overview:this.overview,details:this.details,createdAt:this.createdAt,updatedAt:this.updatedAt,faveIndex:this.faveIndex||0,trashed:this.state,templateUuid:this.templateUuid,uuid:this.uuid};return Yo.pipe(Qz).encode(r)},this.vault=j,this.uuid=t||Se(),this.itemVersion=0,this.createdAt=new Date,this.updatedAt=this.createdAt,this.state=A.ItemState.Active,this.overview={title:"",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1,URLs:[]},this.details={sections:[],fields:[]},this.isNewItem=!1,this.isRestoredItem=!1,this.parseTemplate(e)}get title(){return this.overview.title||""}set title(j){this.overview.title=j}get subtitle(){return this.templateUuid===Sj.SecureNoteUuid&&this.notes?this.notes.slice(0,80).split(`
`)[0]||"":typeof this.overview.ainfo!="string"?"":this.overview.ainfo||""}get notes(){return this.details&&this.details.notesPlain||""}set notes(j){this.details.notesPlain=j,this.templateUuid===Sj.SecureNoteUuid&&(this.overview.ainfo=j.slice(0,80).split(`
`)[0]||"")}get tags(){return this.overview.tags||[]}set tags(j){this.overview.tags=j.filter(e=>e.length>0)||[]}addTag(j){let e=this.tags||[];j.length===0||e.includes(j)||(this.tags=[...e,j])}removeTag(j){let e=this.tags||[];this.tags=e.filter(t=>t!==j)}get webFormFields(){return this.details?this.details.fields||[]:[]}set webFormFields(j){this.details.fields=j}get username(){if(!(!this.details||!this.details.fields))return sn(this.details.fields,j=>j.designation==="username")}set username(j){j&&(this.details&&this.details.fields?this.details.fields.push(j):this.details.fields=[j])}get url(){return this.overview&&this.overview.url||""}set url(j){this.overview.url=j;let e={l:"",u:j};this.overview.URLs?this.overview.URLs=[...this.overview.URLs,e]:this.overview.URLs=[e]}setUsername(j){this.username?this.username.value=j:this.username={name:"username",value:j,type:"T",designation:"username"},this.overview.ainfo=j}getPassword(){if(this.details){if(this.templateUuid===Sj.LoginUuid){let j=sn(this.details.fields,e=>e.designation==="password");return j?j.value:""}else if(this.templateUuid===Sj.PasswordUuid)return this.details.password}}setPassword(j,e=!1,t=0){if(!this.details||this.templateUuid!==Sj.LoginUuid&&this.templateUuid!==Sj.PasswordUuid)return;let r=this.getPassword();r&&r!==j&&this.addToPasswordHistory(r),this.templateUuid===Sj.LoginUuid?this.details.fields=oFj(n=>n.designation==="password",{name:"password",value:j,type:"P",designation:"password"},this.details.fields):this.templateUuid===Sj.PasswordUuid&&(this.details.password=j),this.overview.pbe=e?rD(t,6):0,this.overview.pgrng=e;let a=e?A.getPasswordStrengthFromEntropy(t):bf(j,this.username?this.username.value:"");this.overview.ps=rD(a,6)}get passwordUpdatedAt(){let j=this.getSortedPasswordHistory()[0];return j?j.time:typeof this.getPassword()=="string"&&this.createdAt?Math.floor(this.createdAt.getTime()/1e3):0}toString(){return"[object VaultItem]"}};(function(A){A.SectionFieldAdditionalAttributes=vA.partial({guarded:vA.string,clipboardFilter:vA.string,multiline:vA.string,generate:vA.string,placeholder:vA.string,provider:vA.type({type:vA.literal("fastmail"),data:vA.type({aliasId:vA.string,accountId:vA.string})},"EmailProvider"),sshKeyAttributes:vA.type({fingerprint:vA.string,keyType:vA.intersection([vA.type({t:vA.string},"required"),vA.partial({c:vA.number},"partial")]),privateKey:vA.string,publicKey:vA.string})},"SectionFieldAdditionalAttributes"),A.SectionFieldInputTraits=vA.partial({keyboard:vA.string,autocorrection:vA.string,autocapitalization:vA.string},"SectionFieldInputTraits");let j=new vA.Type("GeneratedString",k=>vA.string.is(k)&&k.length>0,(k,u)=>{let m=vA.string.validate(k??"",u);return m._tag==="Left"?m:vA.success(m.right||Se())},vA.string.encode);A.SectionField=vA.intersection([vA.type({k:qA(vA.string,"string"),n:j,v:vA.unknown,t:qA(vA.string,"")},"required"),vA.partial({a:A.SectionFieldAdditionalAttributes,inputTraits:Gj(A.SectionFieldInputTraits),m:vA.readonlyArray(vA.string)},"partial")],"SectionField"),A.Section=vA.type({name:qA(vA.string,""),title:qA(vA.string,""),fields:Gj(vA.array(A.SectionField))},"Section"),A.WebFormField=vA.intersection([vA.type({value:qA(vA.string,""),type:qA(vA.string,"T")},"required"),vA.partial({designation:vA.string,id:vA.string,name:vA.string},"partial")],"WebFormField"),A.PreviouslyUsedPassword=vA.type({time:Gj(vA.number),value:Qo(vA.string,()=>"")},"PreviouslyUsedPassword"),A.DocumentAttributes=vA.intersection([vA.type({fileName:vA.string,documentId:qA(vA.string,""),unencryptedSize:vA.number,encryptedSize:vA.number,integrityHash:vA.string,encryptionKey:$A.JwkSymKeyOptionalKid,nonce:vA.string},"required"),vA.partial({signingKey:$A.JwkSymKey},"partial")],"DocumentAttributes"),A.FileAttributes=vA.intersection([vA.type({fileId:qA(vA.string,""),encryptionKey:$A.JwkSymKey,nonce:vA.string},"required"),vA.partial({signingKey:$A.JwkSymKey},"partial")],"FileAttributes"),A.UrlField=vA.intersection([vA.type({l:qA(vA.string,""),u:qA(vA.string,"")},"required"),vA.partial({m:qA(vA.string,"default")},"partial")]),A.PasskeyPrfOverview=vA.type({numCreds:vA.number},"PasskeyPrfOverview"),A.PasskeyOverview=vA.type({credentialId:vA.string,rpId:Gj(vA.string),userHandle:Gj(vA.string),prf:Gj(A.PasskeyPrfOverview)},"PasskeyOverview"),A.GeoLocation=vA.type({lat:vA.number,lon:vA.number},"GeoLocation"),A.ItemLocation=vA.type({k:vA.string,n:vA.string,v:vA.union([A.GeoLocation,vA.undefined,vA.null])},"ItemLocation");let e;(function(k){k.Amazon="amazon",k.Apple="apple",k.Discord="discord",k.Facebook="facebook",k.Github="github",k.Google="google",k.Microsoft="microsoft",k.Okta="okta",k.Slack="slack",k.Twitter="twitter"})(e=A.SsoLoginProvider||(A.SsoLoginProvider={})),A.SsoLoginItemReference=vA.type({itemUuid:vA.string,vaultUuid:vA.string},"SsoLoginItemReference"),A.SsoLoginField=vA.intersection([vA.type({provider:vA.string}),vA.partial({item:A.SsoLoginItemReference})],"SsoFieldData"),A.ManagedApplicationField=vA.type({applicationUuid:vA.string,email:vA.string,loginInitiationUrl:vA.string}),A.Icons=vA.type({detail:Gj(A.FileAttributes)},"Icons"),A.WatchtowerExclusions=vA.type({compromised:vA.boolean,vulnerable:vA.boolean,reused:vA.boolean,weak:vA.boolean,unsecured:vA.boolean,inactiveMfa:vA.boolean,expiring:vA.boolean},"WatchtowerExclusions"),A.PasskeyPrf=vA.type({alg:vA.literal("HMAC_SHA256"),credWithUv:vA.string},"PasskeyPrf");let t=vA.type({type:vA.literal("webauthn"),createdAt:vA.number,privateKey:vA.string,userHandle:vA.string,prf:Gj(A.PasskeyPrf)},"WebAuthnPasskey"),r=vA.type({type:vA.literal("passage"),createdAt:vA.number,privateKey:vA.string,userHandle:vA.string,passageIdentifier:vA.string},"PassagePasskey");A.UnknownPasskey=vA.intersection([vA.type({type:vA.string,createdAt:vA.number},"UnknownPasskey"),vA.UnknownRecord]),A.Passkey=vA.union([t,r],"Passkey"),A.isKnownPasskey=k=>!!k&&(k.type==="webauthn"||k.type==="passage");let a;(function(k){k.String="string",k.Concealed="concealed",k.Date="date",k.Phone="phone",k.Address="address",k.Url="URL",k.Email="email",k.MonthYear="monthYear",k.Gender="gender",k.CreditCardType="cctype",k.Reference="reference",k.Menu="menu",k.Country="country",k.Month="month",k.OneTimePassword="totp",k.File="file",k.SshKey="sshKey",k.SsoLogin="ssoLogin",k.PasskeyType="passkeyType",k.ManagedApplication="managedApplication"})(a=A.FieldType||(A.FieldType={})),A.TOTP_PREFIX="TOTP_",A.isTotpField=k=>k.k===a.Concealed&&lp(k.n,A.TOTP_PREFIX);let n=1024*32,o=1024*1024*4;A.MaxOverviewSize=n/1.5,A.MaxDetailSize=o/1.5,A.FieldName={CreditCard:{CreditCardNumber:"ccnum",Expiry:"expiry"},Identity:{FirstName:"firstname",LastName:"lastname"},Passport:{Expiry:"expiry_date"},DriverLicense:{Expiry:"expiry_date"},Membership:{Expiry:"expiry_date"},MedicalRecord:{Date:"date"}};let i;(function(k){k.Active="N",k.Archived="Y",k.Deleted="D"})(i=A.ItemState||(A.ItemState={})),A.getDateValueFromString=k=>{let u=vT.default.utc(k.trim(),"YYYY-MM-DD",!0).set({hours:12,minutes:1,seconds:0,milliseconds:0}).unix();return I$(u)?u:void 0},A.getDateStringFromValue=k=>{if(typeof k!="number")return"";let u="YYYY-MM-DD",m=vT.default.utc(k,"X").format(u);return A.getDateValueFromString(m)===k?m:(0,vT.default)(k,"X").format(u)},A.findFieldWithName=(k,u)=>{if(!(!u.details||!u.details.sections))for(let m of u.details.sections){let F=sn(m.fields,S=>S.n===k);if(F)return F}};let s=k=>{try{return new URL(qp(k)).hostname}catch{return}};A.getHighlightedUrl=k=>{let u=s(k);if(!u)return[{type:"Plain",content:k}];let m=k.toLowerCase().indexOf(u);if(m===-1)return[{type:"Plain",content:k}];let F=m+u.length;return Yr([m!==0&&{type:"Plain",content:k.slice(0,m)},{type:"Highlighted",content:k.slice(m,F)},F!==k.length&&{type:"Plain",content:k.slice(F)}])},A.getAddressValue=k=>{let{v:u}=k;if(aFj(u))return{street:typeof u.street=="string"?u.street:"",city:typeof u.city=="string"?u.city:"",state:typeof u.state=="string"?u.state:"",zip:typeof u.zip=="string"?u.zip:"",country:typeof u.country=="string"?u.country:""}},A.getManagedApplicationValues=k=>k.k===A.FieldType.ManagedApplication&&"v"in k&&A.ManagedApplicationField.is(k.v)?k.v:void 0,A.getSsoValue=k=>{if(k.k===A.FieldType.SsoLogin&&"v"in k&&typeof k.v=="object")return k.v},A.getStringValue=k=>"value"in k&&typeof k.value=="string"?k.value:"v"in k&&typeof k.v=="string"?k.v:"",A.getNumberValue=k=>"v"in k&&typeof k.v=="number"&&!Number.isNaN(k.v)?k.v:void 0,A.getDocumentAttributesFromField=k=>{if(k.k===A.FieldType.File&&"v"in k&&typeof k.v=="object")return k.v??void 0},A.getPasswordStrengthFromEntropy=k=>dL(k,0,gw.FANTASTIC)/gw.FANTASTIC*100,A.getPasswordStrength=(k,u,m,F)=>typeof m=="boolean"&&m&&typeof F=="number"?A.getPasswordStrengthFromEntropy(F):bf(k,u),A.getCreditCardSubtitle=k=>{if(k.length>=8){let u=k.slice(0,4),m=k.slice(-4);return u+" **** "+m}return""},A.copyAsCorruptedItem=k=>{let u=new A(k.vault,void 0,k.uuid);return u.overview={title:"Corrupted Item",url:"",ainfo:"",ps:0,pbe:0,pgrng:!1},u.details={sections:[]},u.createdAt=k.createdAt,u.updatedAt=k.updatedAt,u.faveIndex=k.faveIndex,u.state=k.state,u.templateUuid=k.templateUuid,u.itemVersion=k.itemVersion,u},A.importFromJson=(k,u,m)=>{let F=cj(u,Yo).unwrap(),S=cj(F,Qz,{mode:"unsafe_report_only",file:MFA,func:p`importFromJson`}).unwrap(),G=m?.generateNewUuid||!M$(S.uuid)?void 0:S.uuid,x=new A(k,void 0,G);return x.overview=S.overview,x.details=S.details,x.createdAt=S.createdAt?new Date(S.createdAt):new Date,x.updatedAt=S.updatedAt?new Date(S.updatedAt):new Date,x.faveIndex=S.faveIndex,x.state=S.trashed,x.templateUuid=S.templateUuid,x},A.getRichIconUrl=({templateUuid:k,title:u,url:m},F=64)=>{if(Sj.SoftwareUuid===k)return`https://c.1password.com/richicons/images/software/${F}/${c(u)}.png`;if(Sj.LoginUuid===k){if(!m)return"";/^[\w-]+:\/\//.test(m)||(m="https://"+m);try{let G=new URL(m).hostname;return nFj(G)?`https://c.1password.com/richicons/images/login/${F}/${G}.png`:""}catch{return""}}return""};let l=[" serial number"," software license"," company license"," family license"," license"," app"," shareware"," lizenz"],c=k=>{let u=k.toLowerCase().replace(/[^\d a-z]/g," ").replace(/ {2,}/g," ").trim();u.startsWith("license for ")&&(u=u.slice(12));for(let m of l)if(u.endsWith(m)){u=u.slice(0,-m.length);break}return u.replace(/ /g,"")}})(kA||(kA={}));var Kf=vA.intersection([vA.type({title:qA(vA.string,""),ainfo:Qo(qA(vA.string,""),A=>{if(typeof A=="number")return A.toString(10);throw new Error("Unexpected ainfo type")})},"required"),vA.partial({url:vA.string,ps:Gj(vA.number),pbe:vA.number,pgrng:vA.boolean,passkey:Gj(kA.PasskeyOverview),tags:Gj(Qh(vA.string)),locations:Gj(Qh(kA.ItemLocation)),URLs:vA.array(kA.UrlField),icons:kA.Icons,watchtowerExclusions:kA.WatchtowerExclusions,b5UserUUID:vA.string,b5AccountUUID:vA.string,integration:vA.string},"partial")],"VaultItemOverview"),Nf=vA.intersection([vA.type({sections:qA(vA.array(kA.Section),[])},"required"),vA.partial({fields:Gj(vA.array(kA.WebFormField)),backupKeys:vA.array(vA.string),notesPlain:vA.string,password:Gj(vA.string),passwordHistory:vA.array(kA.PreviouslyUsedPassword),passkey:Gj(vA.union([kA.Passkey,kA.UnknownPasskey])),documentAttributes:kA.DocumentAttributes,customData:vA.record(vA.string,vA.unknown)},"partial")],"VaultItemDetails"),Qz=vA.type({uuid:vA.string,templateUuid:Gj(vA.string),faveIndex:Gj(vA.number),createdAt:Gj(co),updatedAt:Gj(co),overview:Kf,details:Nf,trashed:vA.string},"ExternalVaultItem"),aFj=A=>typeof A=="object"&&A!==null,nFj=A=>{let j=A.split(".");return j.length>=2&&j.every(e=>e.length>0)},oFj=(A,j,e)=>{if(typeof e>"u")return[j];let t=Py(e,A);return t>-1?e.map((r,a)=>a===t?j:r):[...e,j]};var GT=Kf,fT=Nf,hw=os.readonly(os.type({overview:GT,details:fT}),"BaseManagedCredentialData"),iFj=os.readonly(os.intersection([Mf,hw,os.type({accessors:os.array(fq)},"accessors")]),"ManagedCredential"),sFj=os.readonly(os.intersection([Mf,hw]),"GetCredentialsForPolicyResponse"),lFj=os.readonly(os.intersection([xT,hw]),"UpdatedManagedCredential"),cFj=os.readonly(os.intersection([qT,hw]),"CreateManagedCredential");var Lf=class{constructor(){this._PHANTOM_TYPE_DOMAIN_SEPARATOR="B5_CRYPTO_KEYS_ManagedCredentialKey",this.toJSON=gt,this.generate=async()=>{await this.symmetricKey.generate(Nt)},this.encryptCreate=async j=>{let{overview:e,details:t,...r}=j,a=await this.symmetricKey.encrypt(Qe(e)),n=await this.symmetricKey.encrypt(Qe(t));return{...r,encOverview:a,encDetails:n}},this.encryptUpdated=async j=>{let{overview:e,details:t,...r}=j,a=await this.symmetricKey.encrypt(Qe(e)),n=await this.symmetricKey.encrypt(Qe(t));return{...r,encOverview:a,encDetails:n}},this.encrypt=async j=>{let{overview:e,details:t,...r}=j,a=await this.symmetricKey.encrypt(Qe(e)),n=await this.symmetricKey.encrypt(Qe(t));return{...r,encOverview:a,encDetails:n}},this.decrypt=async j=>{let{encOverview:e,encDetails:t,...r}=j,a=await this.symmetricKey.decrypt(e),n=cj(a,Ne.pipe(GT)).unwrap(),o=await this.symmetricKey.decrypt(t),i=cj(o,Ne.pipe(fT)).unwrap();return{...r,details:i,overview:n}},this.decryptWithKeyset=async(j,e)=>(await this.symmetricKey.decryptWithKeyset(j,e),this),this.wrapWithKey=async j=>this.symmetricKey.encryptWithKey(j),this.symmetricKey=new $i}get uuid(){return this.symmetricKey.uuid}};var yr=J(tA());var kt,Op=new Array(128).fill(void 0);Op.push(void 0,null,!0,!1);function _6(A){return Op[A]}var vw=Op.length;function kFj(A){A<132||(Op[A]=vw,vw=A)}function FT(A){let j=_6(A);return kFj(A),j}var LFA=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&LFA.decode();var qw=null;function jU(){return(qw===null||qw.byteLength===0)&&(qw=new Uint8Array(kt.memory.buffer)),qw}function Yz(A,j){return A=A>>>0,LFA.decode(jU().subarray(A,A+j))}function cn(A){vw===Op.length&&Op.push(Op.length+1);let j=vw;return vw=Op[j],Op[j]=A,j}var xw=null;function Ss(){return(xw===null||xw.byteLength===0)&&(xw=new Int32Array(kt.memory.buffer)),xw}function Gw(A,j){return A=A>>>0,jU().subarray(A/1,A/1+j)}var xl=0;function mc(A,j){let e=j(A.length*1,1)>>>0;return jU().set(A,e/1),xl=A.length,e}function zFA(A,j,e,t){try{let o=kt.__wbindgen_add_to_stack_pointer(-16),i=mc(A,kt.__wbindgen_malloc),s=xl,l=mc(j,kt.__wbindgen_malloc),c=xl,k=mc(e,kt.__wbindgen_malloc),u=xl,m=mc(t,kt.__wbindgen_malloc),F=xl;kt.seal_x25519_chacha20poly1305(o,i,s,l,c,k,u,m,F);var r=Ss()[o/4+0],a=Ss()[o/4+1],n=Ss()[o/4+2];if(n)throw FT(a);return Zz.__wrap(r)}finally{kt.__wbindgen_add_to_stack_pointer(16)}}function UFA(A,j,e,t,r){try{let l=kt.__wbindgen_add_to_stack_pointer(-16),c=mc(A,kt.__wbindgen_malloc),k=xl,u=mc(j,kt.__wbindgen_malloc),m=xl,F=mc(e,kt.__wbindgen_malloc),S=xl,G=mc(t,kt.__wbindgen_malloc),x=xl,R=mc(r,kt.__wbindgen_malloc),P=xl;kt.open_x25519_chacha20poly1305(l,c,k,u,m,F,S,G,x,R,P);var a=Ss()[l/4+0],n=Ss()[l/4+1],o=Ss()[l/4+2],i=Ss()[l/4+3];if(i)throw FT(o);var s=Gw(a,n).slice();return kt.__wbindgen_free(a,n*1,1),s}finally{kt.__wbindgen_add_to_stack_pointer(16)}}function Pp(A,j){try{return A.apply(this,j)}catch(e){kt.__wbindgen_exn_store(cn(e))}}var KFA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>kt.__wbg_encappedkeyandciphertext_free(A>>>0)),Zz=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,KFA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,KFA.unregister(this),j}free(){let j=this.__destroy_into_raw();kt.__wbg_encappedkeyandciphertext_free(j)}get encapped_key(){try{let r=kt.__wbindgen_add_to_stack_pointer(-16);kt.__wbg_get_encappedkeyandciphertext_encapped_key(r,this.__wbg_ptr);var j=Ss()[r/4+0],e=Ss()[r/4+1],t=Gw(j,e).slice();return kt.__wbindgen_free(j,e*1,1),t}finally{kt.__wbindgen_add_to_stack_pointer(16)}}set encapped_key(j){let e=mc(j,kt.__wbindgen_malloc),t=xl;kt.__wbg_set_encappedkeyandciphertext_encapped_key(this.__wbg_ptr,e,t)}get ciphertext(){try{let r=kt.__wbindgen_add_to_stack_pointer(-16);kt.__wbg_get_encappedkeyandciphertext_ciphertext(r,this.__wbg_ptr);var j=Ss()[r/4+0],e=Ss()[r/4+1],t=Gw(j,e).slice();return kt.__wbindgen_free(j,e*1,1),t}finally{kt.__wbindgen_add_to_stack_pointer(16)}}set ciphertext(j){let e=mc(j,kt.__wbindgen_malloc),t=xl;kt.__wbg_set_encappedkeyandciphertext_ciphertext(this.__wbg_ptr,e,t)}},NFA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>kt.__wbg_hpkeerror_free(A>>>0)),AU=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,NFA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,NFA.unregister(this),j}free(){let j=this.__destroy_into_raw();kt.__wbg_hpkeerror_free(j)}},uFj=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>kt.__wbg_x25519keypair_free(A>>>0)),bT=class{__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,uFj.unregister(this),j}free(){let j=this.__destroy_into_raw();kt.__wbg_x25519keypair_free(j)}get public_key(){try{let r=kt.__wbindgen_add_to_stack_pointer(-16);kt.__wbg_get_encappedkeyandciphertext_encapped_key(r,this.__wbg_ptr);var j=Ss()[r/4+0],e=Ss()[r/4+1],t=Gw(j,e).slice();return kt.__wbindgen_free(j,e*1,1),t}finally{kt.__wbindgen_add_to_stack_pointer(16)}}set public_key(j){let e=mc(j,kt.__wbindgen_malloc),t=xl;kt.__wbg_set_encappedkeyandciphertext_encapped_key(this.__wbg_ptr,e,t)}get private_key(){try{let r=kt.__wbindgen_add_to_stack_pointer(-16);kt.__wbg_get_encappedkeyandciphertext_ciphertext(r,this.__wbg_ptr);var j=Ss()[r/4+0],e=Ss()[r/4+1],t=Gw(j,e).slice();return kt.__wbindgen_free(j,e*1,1),t}finally{kt.__wbindgen_add_to_stack_pointer(16)}}set private_key(j){let e=mc(j,kt.__wbindgen_malloc),t=xl;kt.__wbg_set_encappedkeyandciphertext_ciphertext(this.__wbg_ptr,e,t)}constructor(){let j=kt.x25519keypair_new();return this.__wbg_ptr=j>>>0,this}};async function EFj(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function pFj(){let A={};return A.wbg={},A.wbg.__wbg_hpkeerror_new=function(j){let e=AU.__wrap(j);return cn(e)},A.wbg.__wbindgen_object_drop_ref=function(j){FT(j)},A.wbg.__wbg_crypto_1d1f22824a6a080c=function(j){let e=_6(j).crypto;return cn(e)},A.wbg.__wbindgen_is_object=function(j){let e=_6(j);return typeof e=="object"&&e!==null},A.wbg.__wbg_process_4a72847cc503995b=function(j){let e=_6(j).process;return cn(e)},A.wbg.__wbg_versions_f686565e586dd935=function(j){let e=_6(j).versions;return cn(e)},A.wbg.__wbg_node_104a2ff8d6ea03a2=function(j){let e=_6(j).node;return cn(e)},A.wbg.__wbindgen_is_string=function(j){return typeof _6(j)=="string"},A.wbg.__wbg_require_cca90b1a94a0255b=function(){return Pp(function(){let j=module.require;return cn(j)},arguments)},A.wbg.__wbindgen_is_function=function(j){return typeof _6(j)=="function"},A.wbg.__wbindgen_string_new=function(j,e){let t=Yz(j,e);return cn(t)},A.wbg.__wbg_msCrypto_eb05e62b530a1508=function(j){let e=_6(j).msCrypto;return cn(e)},A.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return Pp(function(j,e){_6(j).randomFillSync(FT(e))},arguments)},A.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return Pp(function(j,e){_6(j).getRandomValues(_6(e))},arguments)},A.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(j,e){let t=new Function(Yz(j,e));return cn(t)},A.wbg.__wbg_call_27c0f87801dedf93=function(){return Pp(function(j,e){let t=_6(j).call(_6(e));return cn(t)},arguments)},A.wbg.__wbindgen_object_clone_ref=function(j){let e=_6(j);return cn(e)},A.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return Pp(function(){let j=self.self;return cn(j)},arguments)},A.wbg.__wbg_window_c6fb939a7f436783=function(){return Pp(function(){let j=window.window;return cn(j)},arguments)},A.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return Pp(function(){let j=globalThis.globalThis;return cn(j)},arguments)},A.wbg.__wbg_global_207b558942527489=function(){return Pp(function(){let j=global.global;return cn(j)},arguments)},A.wbg.__wbindgen_is_undefined=function(j){return _6(j)===void 0},A.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return Pp(function(j,e,t){let r=_6(j).call(_6(e),_6(t));return cn(r)},arguments)},A.wbg.__wbg_buffer_12d079cc21e14bdb=function(j){let e=_6(j).buffer;return cn(e)},A.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(j,e,t){let r=new Uint8Array(_6(j),e>>>0,t>>>0);return cn(r)},A.wbg.__wbg_new_63b92bc8671ed464=function(j){let e=new Uint8Array(_6(j));return cn(e)},A.wbg.__wbg_set_a47bac70306a19a7=function(j,e,t){_6(j).set(_6(e),t>>>0)},A.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(j){let e=new Uint8Array(j>>>0);return cn(e)},A.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(j,e,t){let r=_6(j).subarray(e>>>0,t>>>0);return cn(r)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(Yz(j,e))},A.wbg.__wbindgen_memory=function(){let j=kt.memory;return cn(j)},A}function mFj(A,j){return kt=A.exports,VFA.__wbindgen_wasm_module=j,xw=null,qw=null,kt}async function VFA(A){if(kt!==void 0)return kt;typeof A>"u"&&(A=new URL("b5_hpke_bg.wasm",import.meta.url));let j=pFj();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await EFj(await A,j);return mFj(e,t)}var XFA=VFA;var wi=J(tA());var eU,WFA,tU,QFA,rU=mq(XFA,async()=>{let{default:A}=await Promise.resolve().then(()=>J(JFA()));return A}),gFj=Symbol(),QB=class{constructor(j){this[WFA]=0,this.toJSON=gt,this.exportJwk=async e=>({kid:e,kty:"OKP",crv:"X25519",x:Aj(this.publicKey)}),this.seal=async(e,t,r)=>{let a=zFA(this.publicKey,e,t,r);return{ciphertext:a.ciphertext,encappedKey:a.encapped_key}},this.publicKey=j}};eU=QB,WFA=gFj;QB.fromJwk=async A=>{await rU();let j=ej(A.x);return eU.__crypto_internal.fromBytes(j)};QB.__crypto_internal={fromBytes:async A=>{if(A.length!==32)throw new Error(`invalid length: ${A.length}`);return new eU(A)}};var hFj=Symbol(),YB=class{constructor(j,e){this[QFA]=0,this.toJSON=gt,this.exportSensitiveJwk=async t=>({kid:t,kty:"OKP",crv:"X25519",d:Aj(this.privateKey),x:Aj(this.rawPublicKey)}),this.publicKey=async()=>QB.__crypto_internal.fromBytes(this.rawPublicKey),this.open=async(t,r,a,n)=>UFA(this.privateKey,t,r,a,n),this.privateKey=j,this.rawPublicKey=e}};tU=YB,QFA=hFj;YB.fromJwk=async A=>{await rU();let j=ej(A.x),e=ej(A.d);if(j.length!==32)throw new Error(`invalid (pub) length: ${j.length}`);if(e.length!==32)throw new Error(`invalid (pri) length: ${e.length}`);return new tU(ej(A.d),ej(A.x))};YB.generate=async()=>{await rU();let A=new bT;return new tU(A.private_key,A.public_key)};var zf=wi.readonly(wi.type({kid:wi.string,kty:wi.literal("OKP"),crv:wi.literal("X25519"),x:wi.string},"type"),"JwkX25519PubKey"),yT=wi.readonly(wi.type({kid:wi.string,kty:wi.literal("OKP"),crv:wi.literal("X25519"),d:wi.string,x:wi.string},"type"),"JwkX25519PriKey");var aU,YFA,nU,ZFA,AbA=Ij("1P_VAULT_REPORTING_ITEM_SNAPSHOT_V1"),qFj=Symbol(),nu=class{constructor(j,e){this[YFA]=0,this.toJSON=gt,this.exportJwk=async()=>this.publicKey.exportJwk(this.kid),this.encrypt=async t=>{let r=Ne.pipe(nw).encode(t.additionalData),a=Ne.pipe(fw).encode(t.snapshot),n=await this.publicKey.seal(AbA,a,r);return $p.fromPieces(this.kid,n.encappedKey,n.ciphertext,r).toEnvelope()},this.kid=j,this.publicKey=e}};aU=nu,YFA=qFj;nu.fromJwk=async A=>new aU(A.kid,await QB.fromJwk(A));nu.__crypto_internal={fromPubkey:async(A,j)=>new aU(A,j)};var xFj=Symbol(),Rp=class{constructor(j,e){this[ZFA]=0,this.toJSON=gt,this.exportSensitiveJwk=async()=>this.privateKey.exportSensitiveJwk(this.uuid),this.publicKey=async()=>nu.__crypto_internal.fromPubkey(this.uuid,await this.privateKey.publicKey()),this.decrypt=async t=>{let r=await $p.fromEnvelope(t.encryptedSnapshot);if(r.kid!==this.uuid)throw new Error("Incorrect kid");let a=await this.privateKey.open(r.encKey,AbA,r.data,r.unauthenticatedRawAd);return{snapshot:cj(a,Ne.pipe(fw)).unwrap(),additionalData:r.unauthenticatedDecoded,serverData:t.serverData}},this.uuid=j,this.privateKey=e}};nU=Rp,ZFA=xFj;Rp.fromJwk=async A=>new nU(A.kid,await YB.fromJwk(A));Rp.generate=async()=>new nU(Se(),await YB.generate());var oU=yr.exact(yr.partial({compromisedDomain:yr.string,vulnerablePassword:yr.boolean,passwordStrength:yr.number,reusedPassword:yr.boolean,unsecuredWebsite:yr.boolean,inactiveTwoFactor:yr.string,inactivePasskey:yr.string,expiringSoon:yr.boolean,expired:yr.boolean,itemsInWrongAccount:yr.boolean},"SnapshotWatchtowerReport")),fw=yr.intersection([yr.exact(yr.type({title:qA(yr.string,"")},"required")),yr.exact(yr.partial({username:yr.string,domains:yr.array(yr.string),watchtowerReport:oU,vaultName:yr.string},"optional"))],"VaultItemSnapshot"),Uf=4,Fw=gq,$T=yr.type({uuid:yr.string,trashed:yr.string,vaultUuid:yr.string},"VaultItemSnapshotServerData"),jbA=yr.type({encryptedSnapshot:Fw,serverData:$T},"EncryptedVaultItemSnapshotWithServerData"),ebA=yr.readonly(yr.exact(yr.type({snapshot:fw,additionalData:nw,serverData:$T})),"VaultItemSnapshotWithAdditionalAndServerData");var dn;(function(A){A.rawHkdf=ml,A.rawPbkdf2UsingPbes2Alg=Aw,A.Sha2Mode=Nr})(dn||(dn={}));var Dp;(function(A){A.PBES2_ALG_256=pz,A.PBES2_ALG_256_G=W4,A.DEFAULT_PBES2_ALG=Q4,A.DEFAULT_ITERATIONS=J4,A.ITERATIONS_100_000=TfA})(Dp||(Dp={}));var Ye={};er(Ye,{AvailableTiers:()=>hbA,BillingStats:()=>wT,Card:()=>ZB,Charge:()=>nbA,ChildAccountRelationship:()=>iU,Coupon:()=>bq,CreatePaymentMethodRequest:()=>tbj,CustomerAddress:()=>sU,Discount:()=>obA,Feature:()=>BbA,Frequency:()=>vf,FrequencyCodec:()=>Gf,GiftCard:()=>tbA,Invoice:()=>$w,InvoiceLine:()=>abA,InvoicePdf:()=>ibA,MspLastInvoiceData:()=>sbA,MspProjectedInvoiceData:()=>lbA,OpTaxNumber:()=>rbA,PendingPaymentMethod:()=>dU,Plan:()=>uq,Promotion:()=>Vf,PurchaseOrder:()=>ubA,PurchaseOrderStatus:()=>IT,RemainingAmount:()=>dbA,SetupIntent:()=>cU,StripePurchaseOrder:()=>EbA,StripePurchaseOrderStatus:()=>kU,StripeSubscription:()=>kbA,Subscription:()=>pbA,TaxAdvice:()=>mbA,Tier:()=>eg,TierChangeMapping:()=>gbA,UpdatePaymentMethodRequest:()=>ebj,activateStripeBilling:()=>xbj,addCard:()=>fFj,addOrUpdateAddress:()=>_Fj,attachAsChildAccount:()=>PFj,cancelStripeSubscription:()=>Ebj,changeDefaultCard:()=>FFj,changeDefaultPaymentMethod:()=>obj,changeTier:()=>uU,checkChildAccountCode:()=>OFj,checkGiftCard:()=>MFj,createAppleSubscription:()=>gbj,createChildAccountRelationship:()=>wFj,createPaymentMethod:()=>rbj,createPlayStoreSubscription:()=>Bbj,createSetupIntent:()=>Abj,createUnverifiedSetupIntent:()=>jbj,deleteCard:()=>bFj,deletePaymentMethod:()=>ibj,deletePendingPaymentMethod:()=>lbj,detachChildAccount:()=>RFj,endTrialPeriod:()=>pbj,getAvailableTiers:()=>vbj,getAvailableTiersV3:()=>Gbj,getBillingStats:()=>GFj,getCard:()=>$Fj,getChildAccountRelationship:()=>IFj,getDefaultTiers:()=>Fbj,getGiftCards:()=>HFj,getInvoiceDetails:()=>NFj,getInvoicePDF:()=>LFj,getInvoices:()=>KFj,getIsValidPurchaseOrderToken:()=>hbj,getIsValidStripePurchaseOrderToken:()=>qbj,getMspDistributorLinkPreview:()=>QFj,getMspLastInvoiceData:()=>UFj,getMspNfrInfo:()=>JFj,getMspProjectedInvoiceData:()=>VFj,getPaymentMethod:()=>nbj,getRemainingAmount:()=>dbj,getSubscription:()=>kbj,getTaxAdvice:()=>mbj,getUpgradeTiers:()=>fbj,getValidPromotionFromCode:()=>TFj,linkAccountToPartner:()=>ZFj,redeemGiftCard:()=>SFj,requestInvoiceEmail:()=>zFj,updateCard:()=>yFj,updatePaymentMethod:()=>abj,updateStripeSubscription:()=>ubj});var Tp=J(tA());var vFj=Z("web-api/api/billing/billing_stats.ts"),wT=Tp.readonly(Tp.type({activeMembers:Tp.number,activeGuests:Tp.number,billedMembers:Tp.number,billedGuests:Tp.number}),"BillingStats"),GFj=vFj(()=>({name:"getBillingStats",method:"GET",url:"/api/v1/billing/stats",responseType:wT}));var kn=J(tA());var bw=Z("web-api/api/billing/card.ts"),ZB=kn.readonly(kn.type({stripeCardUid:kn.string,brand:kn.string,country:kn.string,isDefault:kn.boolean,expMonth:kn.number,expYear:kn.number,name:kn.string,state:kn.union([kn.string,kn.undefined]),zip:kn.union([kn.string,kn.undefined]),lastFour:qA(kn.string,"")}),"Card"),fFj=bw(A=>({name:"addCard",method:"POST",url:"/api/v1/cards",body:A,responseType:L})),FFj=bw(A=>({name:"changeDefaultCard",method:"PATCH",url:`/api/v1/cards/${A.stripeCardUid}/default`,responseType:L})),bFj=bw(A=>({name:"deleteCard",method:"DELETE",url:`/api/v1/cards/${A}`,responseType:L})),yFj=bw((A,j)=>({name:"updateCard",method:"PATCH",url:`/api/v1/card/${A}`,body:j,responseType:L})),$Fj=bw(A=>({name:"getCard",method:"GET",url:`/api/v1/cards/${A}`,responseType:ZB}));var Fq=J(tA());var yw=Z("web-api/api/billing/child_account_relationship.ts"),iU=Fq.readonly(Fq.type({code:Fq.string,state:Fq.string}),"ChildAccountRelationship"),wFj=yw(()=>({name:"createChildAccountRelationship",method:"POST",url:"/api/v1/account/child",responseType:iU})),IFj=yw(()=>({name:"getChildAccountRelationship",method:"GET",url:"/api/v1/account/child",responseType:iU})),PFj=yw(A=>({name:"attachAsChildAccount",method:"POST",url:"/api/v1/account/child/attach",body:{code:A},responseType:L})),OFj=yw(A=>({name:"checkChildAccountCode",method:"POST",url:`/api/v1/account/child/${encodeURIComponent(A)}/check`,responseType:L})),RFj=yw(()=>({name:"detachChildAccount",method:"DELETE",url:"/api/v1/account/child",responseType:L}));var Ja=J(tA());var DFj=Z("web-api/api/billing/coupon.ts"),bq=Ja.readonly(Ja.type({stripeCouponUID:Ja.string,amountOff:Ja.number,percentOff:Ja.number,createdAt:Ja.string,currency:Ja.string,duration:Ja.string,durationInMonths:Ja.number}),"Coupon"),Vf=Ja.readonly(Ja.type({name:Ja.string,description:Ja.string,trialDays:Ja.number,addTrialDays:Ja.boolean,coupon:Ja.union([bq,Ja.undefined]),suppressPromotionDescription:Ja.boolean,thirdPartyBilling:Ja.boolean,automatedPartnership:Ja.boolean,showBilling:Ja.boolean}),"Promotion"),TFj=DFj((A,j)=>({name:"getValidPromotionFromCode",method:"GET",url:`/api/v2/coupon/${A}/${j}/check`,encrypted:!1,responseType:Vf}));var Ag=J(tA());var CFj=Z("web-api/api/billing/customer_address.ts"),sU=Ag.readonly(Ag.type({country:Ag.string,provinceOrState:Ag.string,zip:Ag.string}),"CustomerAddress"),_Fj=CFj(A=>({name:"addOrUpdateAddress",method:"POST",url:"/api/v1/billing/address",body:A,responseType:L}));var Bc=J(tA());var lU=Z("web-api/api/billing/gift_card.ts"),tbA=Bc.readonly(Bc.type({code:Bc.string,redeemedAt:Bc.string,amount:Bc.number,description:Bc.string,purchaserEmail:Bc.string}),"GiftCard"),SFj=lU(A=>({name:"redeemGiftCard",method:"POST",url:"/api/v1/giftcard/redeem",body:A,responseType:L})),HFj=lU(()=>({name:"getGiftCards",method:"GET",url:"/api/v1/giftcards",responseType:Bc.readonlyArray(tbA)})),MFj=lU(A=>({name:"checkGiftCard",method:"POST",url:`/api/v1/giftcard/${encodeURIComponent(A)}/check`,responseType:L}));var TA=J(tA());var Xf=Z("web-api/api/billing/invoice.ts"),rbA=TA.readonly(TA.intersection([TA.type({label:TA.string,number:TA.string,effective:TA.string}),TA.partial({requiredStatement:TA.union([TA.string,TA.null])})]),"OpTaxNumber"),abA=TA.readonly(TA.type({stripeInvoiceLineUID:TA.string,amount:TA.number,currency:TA.string,description:TA.string,periodStart:TA.string,periodEnd:TA.string,priceUID:TA.union([TA.string,TA.undefined]),planUID:TA.union([TA.string,TA.undefined]),quantity:qA(TA.number,0),proration:qA(TA.boolean,!1),discountable:qA(TA.boolean,!1),taxName:qA(TA.string,"")}),"InvoiceLine"),nbA=TA.readonly(TA.type({uid:TA.string,amount:TA.number,captured:TA.boolean,created:TA.string,currency:TA.string,paid:TA.boolean,refunded:TA.boolean,amountRefunded:TA.number,desc:TA.string,failMsg:TA.string,failCode:TA.string,meta:qA(TA.record(TA.string,TA.string),{}),email:TA.string,statement:TA.string,status:TA.string,source:TA.union([ZB,TA.null])}),"Charge"),obA=TA.readonly(TA.type({coupon:TA.union([bq,TA.null]),start:TA.string,end:TA.string}),"Discount"),$w=TA.readonly(TA.type({stripeInvoiceUID:TA.string,accountName:TA.string,address:TA.string,amountDue:TA.number,attemptCount:TA.number,attempted:TA.boolean,billTo:TA.string,charge:TA.union([nbA,TA.null]),closed:TA.boolean,currency:TA.string,date:TA.string,description:TA.string,discount:TA.union([obA,TA.null]),endingBalance:TA.number,forgiven:TA.boolean,lines:qA(Qh(abA),[]),metadata:qA(TA.record(TA.string,TA.string),{}),nextPaymentAttempt:TA.string,willRetry:TA.boolean,paid:TA.boolean,periodStart:TA.string,periodEnd:TA.string,startingBalance:TA.number,statementDescriptor:TA.string,subtotal:TA.number,tax:TA.number,taxPercent:TA.number,total:TA.number,taxName:TA.string,taxNumber:qA(TA.string,""),isTaxExempt:qA(TA.boolean,!1),opTaxNumbers:TA.union([TA.readonlyArray(rbA),TA.null]),showDefaultTaxMsg:TA.boolean}),"Invoice"),ibA=TA.readonly(TA.type({fileName:TA.string,contentType:TA.string,contents:TA.string}),"InvoicePDF"),sbA=TA.readonly(TA.union([TA.type({mspName:TA.string,periodStart:TA.string,periodEnd:TA.string,taxPercent:TA.number,paid:TA.boolean,forgiven:TA.boolean,currency:TA.string,subtotal:TA.number,discountCoupon:TA.union([bq,TA.null]),amountDue:TA.number,startingBalance:TA.number,endingBalance:TA.number,taxNumber:TA.string,pricePerSeat:TA.number,mspNetSeats:TA.number,managedAccountNetSeats:TA.number}),TA.null])),lbA=TA.readonly(TA.union([TA.type({periodStart:TA.string,periodEnd:TA.string,mspName:TA.string,mspProjectedNetSeats:TA.number,managedAccountProjectedNetSeats:TA.number,pricePerSeat:TA.number,taxExempt:TA.boolean,taxPercent:TA.number,currency:TA.string}),TA.null])),KFj=Xf((A=0,j=20)=>({name:"getInvoices",method:"GET",url:`/api/v1/invoices?page=${A}&limit=${j}`,responseType:TA.readonlyArray($w)})),NFj=Xf(A=>({name:"getInvoiceDetails",method:"GET",url:`/api/v1/invoice/${A}`,responseType:$w})),LFj=Xf(A=>({name:"getInvoicePdf",method:"GET",url:`/api/v1/invoice/${A}/pdf`,responseType:ibA})),zFj=Xf(A=>({name:"requestInvoiceEmail",method:"POST",url:`/api/v1/invoice/${A}/email`,responseType:L})),UFj=Xf(()=>({name:"getMspLastInvoiceData",method:"GET",url:"/api/v2/billing/msp/last-invoice",responseType:sbA})),VFj=Xf(()=>({name:"getMspProjectedInvoiceData",method:"GET",url:"/api/v2/billing/msp/projected-invoice",responseType:lbA}));var is=J(tA());var cbA=Z("web-api/api/billing/msp.ts"),XFj=is.readonly(is.type({mspAccountSeatPrice:is.number,membersIncluded:is.number},"MSPNfrData")),JFj=cbA(()=>({name:"getMspNfrInfo",method:"GET",url:"/api/v1/billing/msp/nfr-info",responseType:XFj})),WFj=is.readonly(is.type({distributorName:is.string,domain:is.string,lastBillingDate:is.number,daysUsed:is.number,remainingCredits:is.number,amountDue:is.number},"MSPDistributorLinkPreview")),QFj=cbA(A=>({name:"getMspDistributorLinkPreview",method:"GET",url:`/api/v1/billing/msp/distributor-link/preview?entitlement=${A}`,responseType:WFj}));var YFj=Z("web-api/api/billing/partnership.ts"),ZFj=YFj(A=>({name:"linkAccountToPartner",method:"POST",url:"/api/v1/billing/partnership/link",body:A,responseType:L}));var Ao=J(tA());var yq=Z("web-api/api/billing/payment.ts"),cU=Ao.readonly(Ao.type({uid:Ao.string,clientSecret:Ao.string}),"SetupIntent"),Abj=yq(()=>({name:"createSetupIntent",method:"POST",url:"/api/v1/billing/payment/setup_intents",encrypted:!0,responseType:cU})),jbj=yq((A,j)=>({name:"createUnverifiedSetupIntent",method:"POST",url:"/api/v1/billing/payment/unverified_setup_intents",body:{setupIntentCode:A,signupUid:j},encrypted:!1,responseType:cU})),ebj=Ao.readonly(Ao.type({name:Ao.string,country:Ao.string,state:Ao.string,zip:Ao.string,expYear:Ao.number,expMonth:Ao.number}),"UpdatePaymentMethodRequest"),tbj=Ao.readonly(Ao.type({setupIntentUid:Ao.string,isDefault:Ao.boolean}),"CreatePaymentMethodRequest"),rbj=yq(A=>({name:"createPaymentMethod",method:"POST",url:"/api/v1/paymentmethod",body:A,responseType:L})),abj=yq((A,j)=>({name:"updatePaymentMethod",method:"PATCH",url:`/api/v1/paymentmethod/${A}`,body:j,responseType:L})),nbj=yq(A=>({name:"getPaymentMethod",method:"GET",url:`/api/v1/paymentmethod/${A}`,responseType:ZB})),obj=yq(A=>({name:"changeDefaultPaymentMethod",method:"PATCH",url:`/api/v1/paymentmethod/${A}/default`,responseType:L})),ibj=yq(A=>({name:"deletePaymentMethod",method:"DELETE",url:`/api/v1/paymentmethod/${A}`,responseType:L}));var cd=J(tA());var sbj=Z("web-api/api/billing/pendingpaymentmethod.ts"),dU=cd.readonly(cd.type({id:cd.number,accountId:cd.number,setupIntentUid:cd.string,isDefault:cd.boolean,isFailed:cd.boolean}),"PendingPaymentMethod"),lbj=sbj(A=>({name:"deletePendingPaymentMethod",method:"DELETE",url:`/api/v1/pendingPaymentMethod/${A}`,responseType:L}));var jg=J(tA());var cbj=Z("web-api/api/billing/remaining_amount.ts"),dbA=jg.readonly(jg.type({remainingAmount:jg.number,isPartialRefund:jg.boolean})),dbj=cbj((A="credit")=>({name:"getRemainingAmount",method:"GET",url:`/api/v1/billing/remaining?type=${A}`,responseType:dbA}));var Ae=J(tA());var ou=Z("web-api/api/billing/subscription.ts"),kbA=Ae.readonly(Ae.type({stripeSubscriptionUid:Ae.string,cancelAtPeriodEnd:Ae.boolean,canceledAt:Ae.string,currentPeriodEnd:Ae.string,currentPeriodStart:Ae.string,endedAt:Ae.string,quantity:Ae.number,start:Ae.string,status:Ae.string,taxPercent:Ae.number,effectiveTaxRate:Ae.number,trialEnd:Ae.string,trialStart:Ae.string,taxNumber:Ae.string,isTaxExempt:Ae.boolean,country:Ae.string,provinceOrState:Ae.string,zip:Ae.string}),"StripeSubscription"),IT;(function(A){A.Paid="P",A.Outstanding="O",A.Special="S"})(IT||(IT={}));var ubA=Ae.readonly(Ae.type({state:Ae.string,teamMembers:Ae.number,totalPrice:Ae.number,paymentStatus:pe(IT,"PurchaseOrderStatus"),startDate:Ae.string,endDate:Ae.string}),"PurchaseOrder"),kU;(function(A){A.Approved="A",A.Pending="P",A.Canceled="C",A.Delinquent="D"})(kU||(kU={}));var EbA=Ae.readonly(Ae.type({state:Ae.string,teamMembers:Ae.number,memberPrice:Ae.number,billingStartDate:Ae.string,customerPO:Ae.string,frequency:Ae.union([Ae.literal("Y"),Ae.literal("M")]),secretsAutomationPrice:Ae.number,vaultAccessCredits:Ae.number}),"StripePurchaseOrder"),pbA=Ae.readonly(Ae.type({balance:Ae.number,subscription:kbA,plan:Ae.union([uq,Ae.undefined]),cards:Ae.union([Ae.readonlyArray(ZB),Ae.null]),nextInvoice:Ae.union([$w,Ae.undefined]),hasInvoices:Ae.boolean,purchaseOrder:Ae.union([ubA,Ae.undefined]),stripePurchaseOrder:Ae.union([EbA,Ae.undefined]),customerAddress:Ae.union([sU,Ae.undefined]),pendingCreditAmount:qA(Ae.number,0),coupon:Ae.union([bq,Ae.undefined]),pendingPaymentMethods:Ae.union([Ae.array(dU),Ae.undefined]),billingStats:Ae.union([wT,Ae.undefined])}),"Subscription"),kbj=ou(()=>({name:"getSubscription",method:"GET",url:"/api/v2/billing",responseType:pbA})),ubj=ou(A=>({name:"updateStripeSubscription",method:"POST",url:"/api/v2/subscription",body:A,responseType:L})),Ebj=ou(()=>({name:"cancelStripeSubscription",method:"DELETE",url:"/api/v1/subscription",responseType:L})),pbj=ou(()=>({name:"endTrialPeriod",method:"DELETE",url:"/api/v1/subscription/trial",responseType:L})),mbA=Ae.readonly(Ae.type({countryCode:Ae.string,provinceCode:Ae.string,postalCode:Ae.string,taxRate:Ae.number,taxRateString:Ae.string,effectiveTaxRate:Ae.number,effectiveTaxRateString:Ae.string,taxName:Ae.string,originalPrice:Ae.number,totalPrice:Ae.number,totalTax:Ae.number,useTaxData:Ae.boolean}),"TaxAdvice"),mbj=ou(A=>({name:"getTaxAdvice",method:"POST",url:"/api/v2/taxadvice",body:A,responseType:mbA,encrypted:!1})),Bbj=ou(A=>({name:"createPlayStoreSubscription",method:"POST",url:"/api/v1/subscriptions/playstore",body:A,responseType:L})),gbj=ou(A=>({name:"createAppleSubscription",method:"POST",url:"/api/v1/subscriptions/apple",body:A,options:{dataType:"arraybuffer"},responseType:L})),hbj=ou(A=>({name:"getIsValidPurchaseOrderToken",method:"GET",url:`/api/v1/purchase_order/${A}/check`,responseType:L})),qbj=ou(A=>({name:"getIsValidStripePurchaseOrderToken",method:"GET",url:`/api/v1/stripe_purchase_order/${A}/check`,responseType:L})),xbj=ou(A=>({name:"activateStripeBilling",method:"POST",url:"/api/v1/billing/activate",body:A,responseType:L}));var ht=J(tA());var ww=Z("web-api/api/billing/tier.ts"),BbA=ht.readonly(ht.type({title:ht.string,desc:ht.string}),"Feature"),gbA=ht.readonly(ht.type({tierId:ht.number,restrictionType:ht.string,accountType:ht.string,mappedTierName:ht.union([ht.string,ht.undefined])}),"TierChangeMapping"),eg=ht.readonly(ht.type({name:ht.string,successorTierName:Gj(ht.string),accountType:ht.string,isPublic:ht.boolean,sortOrder:ht.number,trialDays:ht.number,backupDays:ht.number,guestsIncluded:ht.number,maxGuests:ht.number,membersIncluded:ht.number,maxMembers:ht.number,minQuantity:ht.number,storagePerAccount:ht.number,storagePerUser:ht.number,marketingText:ht.readonly(ht.type({defaultPriceDisplayFrequency:Gf,localizedFeatures:qA(ht.readonlyArray(BbA),[]),name:ht.string,viewDetailsURL:ht.string})),features:qA(ht.readonlyArray(ht.string),[]),gatedFeatures:qA(ht.readonlyArray(ht.string),[]),plans:qA(ht.readonlyArray(uq),[]),tierChangeRestrictions:qA(ht.readonlyArray(gbA),[])}),"Tier"),hbA=ht.readonly(ht.type({currentTier:eg,listOfTiers:ht.readonlyArray(eg)}),"AvailableTiers"),vbj=ww(()=>({name:"getAvailableTiers",method:"GET",url:"/api/v2/billing/tiers",responseType:ht.readonlyArray(eg)})),Gbj=ww(()=>({name:"getAvailableTiersV3",method:"GET",url:"/api/v3/billing/tiers",responseType:hbA})),fbj=ww(()=>({name:"getUpgradeTiers",method:"GET",url:"/api/v2/billing/tiers/upgrades",responseType:ht.readonlyArray(eg)})),Fbj=ww(()=>({name:"getDefaultTiers",method:"GET",url:"/api/v2/billing/tiers/defaults",responseType:ht.readonlyArray(eg)})),uU=ww(A=>({name:"changeTier",method:"PUT",url:"/api/v1/billing/tiers/switch",body:A,responseType:L}));var ae=J(tA());var qe=J(tA());var tg=Z("web-api/api/sso_settings.ts"),Hs;(function(A){A.Okta="Okta",A.Azure="Azure",A.Google="Google",A.Duo="Duo",A.OneLogin="OneLogin",A.JumpCloud="JumpCloud",A.Ping="Ping",A.Unknown="Unknown",A.Generic="Generic",A.Auth0="Auth0"})(Hs||(Hs={}));var PT;(function(A){A.None="N",A.Everyone="E",A.SelectedGroups="S",A.ExceptGuests="G",A.ExcludedGroups="X"})(PT||(PT={}));var OT;(function(A){A.Active="A",A.Disabled="D"})(OT||(OT={}));var EU=qe.type({enabledAt:qe.string,deadline:qe.string},"SsoGroup"),Iw=qe.readonly(qe.partial({remainingUnlocks:qe.number,deadlineDate:qe.string,state:qe.string}),"SsoMigrationGracePeriod"),bbj=qe.type({clientId:qe.string,identityProvider:qe.string,wellKnownUrl:qe.string},"SsoOidcWellKnownSettingsRequest"),qbA=qe.readonly(qe.type({authorizationEndpoint:qe.string,issuer:qe.string,tokenEndpoint:qe.string,userInfoEndpoint:qe.string}),"WellKnownUrlResponse"),ybj=qe.readonly(qe.type({url:qe.string}),"WellKnownUrlRequest"),$bj=qe.intersection([qe.type({clientId:qe.string,authEndpoint:qe.string,identityProvider:pe(Hs,"IdentityProviders"),issuer:qe.string,tokenEndpoint:qe.string,userInfoEndpoint:qe.string,privateApp:qe.boolean,displayName:Gj(qe.string)},"type"),qe.partial({wellKnownExpiresAt:qe.string,wellKnownUrl:qe.string,clientSecret:qe.string},"partial")],"SsoOidcSettings"),xbA=qe.readonly(qe.type({oidcSettings:$bj}),"SsoFederationSettings"),RT=qe.readonly(qe.intersection([qe.type({authenticationPolicy:pe(PT,"SsoAuthenticationPolicy"),federationType:qe.string,state:pe(OT,"SsoState"),federationSettings:xbA},"type"),qe.partial({gracePeriodAuthCount:qe.number,ssoGroups:qe.array(qe.string,"ssoGroups"),gracePeriodDuration:qe.number,lastVerifiedAt:qe.union([qe.string,qe.undefined],"lastVerifiedAt"),offlineAccessSessionDuration:qe.number,lastUpdatedAt:qe.string},"partial")]),"SsoSettings"),vbA=qe.readonly(qe.type({authRedirect:qe.string}),"SsoValidateResponse"),GbA=qe.readonly(qe.type({deadline:qe.string}),"FindSsoGroupDeadlineResponse"),fbA=qe.readonly(qe.type({totalRecoveryUsers:qe.number,usersToRecover:qe.array(qe.string,"usersToRecover"),groupsSsoBreakdowns:qe.array(qe.type({groupUuid:qe.string,userCount:qe.number}),"groupsSsoBreakdowns")}),"AffectedUserCounts"),DT=tg(()=>({name:"getSsoSettings",method:"GET",url:"/api/v2/sso/settings",responseType:RT})),pU=tg(A=>({name:"createSsoSettings",method:"POST",url:"/api/v2/sso/settings",body:A,responseType:RT})),mU=tg(A=>({name:"updateSsoSettings",method:"PUT",url:"/api/v2/sso/settings",responseType:RT,body:A})),BU=tg(A=>({name:"ssoValidateStart",method:"POST",url:"/api/v2/sso/settings/oidc/validate/start",body:A,responseType:vbA})),gU=tg(A=>({name:"ssoValidateEnd",method:"POST",url:"/api/v2/sso/settings/oidc/validate/verify",body:A,responseType:L})),wbj=tg((A,j,e)=>({name:"getAffectedUserCounts",method:"POST",url:"/api/v3/sso/settings/recovery/breakdown",body:{ssoGroupsIncluded:A,ssoGroupsExcluded:j,authPolicyType:e},responseType:fbA})),hU=tg(A=>({name:"getGroupDeadline",method:"GET",url:`/api/v2/sso/group/${A}/deadline`,responseType:GbA})),qU=tg(A=>({name:"postOidcWellKnownUrl",method:"POST",url:"/api/v2/sso/wellknown",body:A,responseType:qbA}));var Be=J(tA());var Gk=J(tA());var Ibj=Z("web-api/api/icons.ts"),Jf=Gk.readonly(Gk.type({version:Gk.string,icons:Gk.readonlyArray(Gk.type({url:Gk.string,description:Gk.string}))}),"IconSet"),xU=Ibj(A=>({name:"getIcons",method:"GET",url:`/api/v1/icons/${A}`,responseType:Jf}));var ga=J(tA());var TT=Z("web-api/api/vault_item_template.ts"),FbA=ga.readonly(ga.partial({source:ga.string,detail:ga.string}),"VaultItemTemplateIcons"),bbA=ga.partial({subtitle:ga.string,hidden:ga.string,availability:ga.string,icons:FbA},"VaultItemTemplateAttrs"),Wf=ga.intersection([ga.type({uuid:ga.string,singularName:ga.string,pluralName:ga.string,icon:ga.string,sourceIcon:ga.string,activeItemCount:qA(ga.number,0),state:qA(ga.string,""),version:qA(ga.number,0),createdAt:KD,updatedAt:KD},"type"),ga.partial({templateUuid:ga.string,attrs:bbA},"partial")],"VaultItemTemplate"),ybA=ga.readonly(ga.type({version:ga.number,templates:ga.readonlyArray(Wf)}),"AccountTemplatesResponse"),vU=TT(A=>{let j="/api/v3/templates";return A&&(j+="/all"),{name:"getAccountTemplates",method:"GET",url:j,responseType:ybA}}),CT=TT(A=>({name:"getDefaultTemplate",method:"GET",url:`/api/v2/template/default/${A}`,responseType:Wf,encrypted:!1})),GU=TT(A=>({name:"postTemplate",method:"POST",url:"/api/v1/template",body:Wf.encode(A),responseType:L})),fU=TT((A,j)=>({name:"changeTemplatesState",method:"PATCH",url:`/api/v1/template/${A.join(",")}/state/${j}`,responseType:L}));var Ha=Z("web-api/api/vault.ts"),$bA=Be.readonly(Be.type({uuid:Be.string,avatar:Be.string,type:Be.string}),"PreviewGroup"),wbA=Be.readonly(Be.type({uuid:Be.string,avatar:Be.string,initials:Be.string}),"PreviewUser"),fk=Be.readonly(Be.type({vaultUuid:Be.string,accessorType:Be.keyof({group:!0,user:!0}),accessorUuid:Be.string,vaultKeySN:Be.number,encVaultKey:Be.union([$A.JweB,Be.undefined]),encryptedBy:Be.string,acl:Be.number,leaseTimeout:Be.number}),"VaultAccess"),Ii=Be.readonly(Be.intersection([Be.type({uuid:Be.string,type:Be.string,attrVersion:Be.number,contentVersion:Be.number,encAttrs:$A.JweB},"type"),Be.partial({createdAt:Be.string,updatedAt:Be.string,access:Be.readonlyArray(fk),combinedAccess:fk,activeItemCount:Be.number,clientAccess:Be.number,archivedKeys:Be.readonlyArray($A.JweB),itemCategories:Be.readonlyArray(Wf),previewGroups:Be.readonlyArray($bA),previewUsers:Be.readonlyArray(wbA)},"partial")]),"Vault"),Pbj=["accessors","archived-keys","categories","combined-access"],_T=Ha(A=>{let j=[A.withAccessorPreviews?"accessor-previews":void 0,"combined-access"].filter(t=>t!==void 0).join(",");return{name:"getVaults",method:"GET",url:`/api/v1/vaults${nt({user:A.user,group:A.group,permission:A.permission,attrs:j||void 0,limit:A.limit})}`,responseType:Be.array(Ii)}}),Ow=Ha(A=>{let j=[A.withAccessorPreviews?"accessor-previews":void 0,"combined-access"].filter(r=>r!==void 0).join(","),e=nt({attrs:j||void 0}),t=Dy({userUuid:A.user,groupUuid:A.group,permission:A.permission,attrs:j||void 0,limit:A.limit,vaultUuids:A.vaultUuids,vaultTypes:A.types},bs);return{name:"getVaults",method:"POST",url:`/api/v1/vaults${e}`,body:{...t},responseType:Be.array(Ii)}}),FU=Ha(()=>({name:"getVaultsForAccountTransfer",method:"GET",url:"/api/v1/vaults/account-transfer",responseType:Be.array(Ii)}));var Pw={getDateString:A=>uw(A,void 0).toISOString(),direction:vq.Older,limit:25},IbA=Be.readonly(Be.type({vaults:Be.readonlyArray(Ii),hasMoreData:Be.boolean}),"LimitedVaultsResponse"),bU=Ha((A,j,e)=>{let t=encodeURIComponent(A||Pw.getDateString(j)),r=nt({limit:e.limit||Pw.limit});return{name:"getVaultsByCreation",method:"GET",url:`/api/v1/vaults/timeline/${t}/${j}${r}`,responseType:IbA}}),yU=Ha((A,j)=>{let e=vk(j,Pbj),t=e.length>0?"?attrs="+e.join(","):"";return{name:"getVault",method:"GET",url:`/api/v3/vault/${A}${t}`,responseType:Ii}}),Rw=Gj(Ii),$U=Ha(()=>({name:"getSystemVault",method:"GET",url:"/api/v1/vault/system",responseType:Rw})),wU=Ha(()=>({name:"getManagedVault",method:"GET",url:"/api/v1/vault/managed",responseType:Rw})),IU=Ha(()=>({name:"getPersonalVault",method:"GET",url:"/api/v1/vault/personal",responseType:Rw})),PU=Ha(()=>({name:"getEveryoneVault",method:"GET",url:"/api/v1/vault/everyone",responseType:Rw})),OU=Ha(()=>({name:"getGeneratedPasswordsVault",method:"GET",url:"/api/v1/vault/generatedpasswords",responseType:Rw})),RU=Ha(A=>({name:"updateVault",method:"PUT",url:`/api/v3/vault/${A.uuid}/attrs`,body:A,responseType:L})),DU=Ha((A,j)=>({name:"updateVaultClientAccess",method:"PUT",url:"/api/v1/vault/clientaccess",body:{uuid:A,clientAccess:j},responseType:L})),ST=Ha((A,j)=>({name:"addVaultAccess",method:"PATCH",url:`/api/v2/vault/${A}/vaultaccess`,body:{vaultaccess:j},responseType:L})),PbA=Be.readonly(Be.intersection([Be.type({mandatoryGroupUuids:Be.readonlyArray(Be.string),adminGroupUuids:Be.readonlyArray(Be.string),enableAdminGroupsByDefault:Be.boolean}),Be.partial({iconSet:Jf})]),"CreateVaultPreflight"),TU=Ha(A=>({name:"getCreateVaultPreflight",method:"GET",url:`/api/v1/vault/preflight/create?type=${A}`,responseType:PbA})),CU=Ha(()=>({name:"createAccountTransferVaultPreflight",method:"GET",url:"/api/v1/vault/preflight/account-transfer/create",responseType:PbA})),_U=Ha(A=>({name:"createVault",method:"POST",url:"/api/v2/vault",body:A,responseType:L})),SU=Ha(A=>({name:"createVaultForAccountTransfer",method:"POST",url:"/api/v1/vault/account-transfer",body:A,responseType:L})),Obj=Be.readonly(Be.type({vaultUuid:Be.string,accessorUuid:Be.string,accessorType:Be.keyof({group:!0,user:!0})}),"VaultAccessForAdmin"),HU=Ha((A,j)=>{let e=nt({acl:j});return{name:"getVaultAccessForAdmin",method:"GET",url:`/api/v1/vault/${A}/access${e}`,responseType:Be.array(Obj)}}),MU=Ha((A,j)=>{let e=nt({acl:j});return{name:"getVaultUserAccessCount",method:"GET",url:`/api/v1/vault/${A}/count-all-users-with-access${e}`,responseType:Be.number}}),Rbj=Be.readonly(Be.type({archivedItemCount:Be.number}),"DeleteVaultPreflight"),KU=Ha(A=>({name:"deleteVaultPreflight",method:"GET",url:`/api/v1/vault/preflight/delete/${A}`,responseType:Rbj})),NU=Ha(A=>({name:"deleteVault",method:"DELETE",url:`/api/v4/vault/${A}`,responseType:L})),LU=Ha((A,j,e)=>({name:"deleteAccessorFromVault",method:"DELETE",url:`/api/v1/vault/${A}/${e?"group":"person"}/${j}`,responseType:L})),zU=Ha((A,j,e)=>({name:"updatePersonVaultAccessPermissions",method:"PATCH",url:`/api/v1/acl/person/${A}/${j}/${e}`,responseType:L})),UU=Ha((A,j,e)=>({name:"updateGroupVaultAccessPermissions",method:"PATCH",url:`/api/v1/acl/group/${A}/${j}/${e}`,responseType:L})),VU=Ha(A=>({name:"updateBulkGroupVaultAccessPermissions",method:"PATCH",url:"/api/v2/acl/groups",body:A,responseType:L})),XU=Ha(A=>({name:"enableTravelSafe",method:"PUT",url:`/api/v1/vault/${A}/enabletravel`,responseType:L})),JU=Ha(A=>({name:"disableTravelSafe",method:"PUT",url:`/api/v1/vault/${A}/disabletravel`,responseType:L})),WU=Ha(A=>({name:"enableServiceAccountAccess",method:"PUT",url:`/api/v1/vault/${A}/enableserviceaccountaccess`,responseType:L})),QU=Ha(A=>({name:"enableServiceAccountAccess",method:"PUT",url:`/api/v1/vault/${A}/disableserviceaccountaccess`,responseType:L}));var Pi=Z("web-api/api/groups.ts"),dr;(function(A){let j;(function(a){a.Manager="A",a.Member="R"})(j=A.Role||(A.Role={}));let e=pe(j,"Role"),t;(function(a){a.Active="A",a.Deleted="D",a.Inactive="I"})(t=A.State||(A.State={}));let r=pe(t,"State");A.Type=ae.readonly(ae.type({groupUuid:ae.string,memberUuid:ae.string,role:e,state:r,version:ae.number}),"GroupMembership")})(dr||(dr={}));var HT=["pubkey","memberships","vault-access","recoverable-ks","user-counts"],Dbj=ae.intersection([ae.type({uuid:ae.string,type:ae.string,name:ae.string,desc:ae.string,pubKey:$A.JwkRsaPubKey,activeKeysetUuid:ae.string,attrVersion:ae.number,archivedKeysets:ae.readonlyArray($A.KeysetCiphertext),avatar:ae.string,memberships:ae.array(dr.Type)},"type"),ae.partial({recoverableKeyset:$A.KeysetCiphertext,recoveryKeyset:$A.KeysetCiphertext,trustLogEntry:ae.string},"partial")]),$q=ae.intersection([ae.type({uuid:ae.string,name:ae.string,type:ae.string,desc:ae.string,attrVersion:ae.number,activeKeysetUuid:ae.string,permissions:ae.number},"type"),ae.partial({createdAt:ae.string,updatedAt:ae.string,avatar:ae.string,archivedKeysets:ae.readonlyArray($A.KeysetCiphertext),userMembership:dr.Type,sso:EU,recoverableKeyset:$A.KeysetCiphertext,recoveryKeyset:$A.KeysetCiphertext,pubKey:$A.JwkRsaPubKey,memberships:ae.array(dr.Type),vaultAccess:ae.readonlyArray(fk),userCount:ae.number},"partial")],"Group"),Tbj=ae.readonly(ae.type({groups:ae.array($q),totalCount:ae.number}),"GroupsResponse"),MT=Pi((A,j)=>{let e=vk(A,HT);return{name:"getGroups",method:"GET",url:`/api/v1/groups${nt({attrs:e,limit:j?.limit,membershipsOnly:j?.membershipsOnly,offset:j?.offset,search:j?.search,types:j?.types,sort:j?.sort,sortDir:j?.sortDir,user:j?.user,vault:j?.vault})}`,responseType:ae.array($q)}}),YU=Pi((A,j)=>({name:"findGroups",method:"POST",url:"/api/v1/groups",body:{...{attrs:vk(A,HT),groupUuids:j?.groupUuids,membershipsOnly:j?.membershipsOnly,search:j?.search,types:j?.types,user:j?.user,vault:j?.vault,limit:j?.limit,offset:j?.offset,sort:j?.sort,sortDir:j?.sortDir}},responseType:ae.array($q),encrypted:!0})),ZU=Pi((A,j)=>{let e=vk(A,HT),t=e.length>0?"?attrs="+e.join(","):"",r=nt({search:j?.search,user:j?.user,vault:j?.vault});return{name:"searchGroupsCount",method:"GET",url:`/api/v1/groups/count${t}${r}`,responseType:ae.number}}),AV=Pi((A,j)=>{let e=vk(j,HT),t=e.length>0?"?attrs="+e.join(","):"";return{name:"getGroup",method:"GET",url:`/api/v2/group/${A}${t}`,responseType:$q}}),ObA=ae.readonly(ae.intersection([ae.type({uuid:ae.string,pubKey:$A.JwkRsaPubKey},"type"),ae.partial({spubKey:$A.JwkEcPubKey},"partial")]),"AccessorPubKey"),jV=Pi(A=>({name:"getGroupPubKeys",method:"GET",url:`/api/v1/group/pubkeys?uuids=${A.join(",")}`,responseType:ae.array(ObA)})),Cbj=ae.readonly(ae.intersection([ae.type({name:ae.string,desc:ae.string,attrVersion:ae.number},"type"),ae.partial({avatar:ae.string},"partial")])),eV=Pi((A,j)=>({name:"updateGroup",method:"PUT",url:`/api/v1/group/${A}/attrs`,body:j,responseType:L})),tV=Pi((A,j)=>({name:"updateGroupPermissions",method:"PUT",url:`/api/v1/group/${A}/permissions`,body:{permissions:j},responseType:L})),rV=Pi(A=>({name:"createGroup",method:"POST",url:"/api/v1/group",body:A,responseType:L})),_bj=ae.readonly(ae.partial({trustLogEntry:ae.string}),"DeleteGroupRequest"),aV=Pi((A,j)=>({name:"deleteGroup",method:"DELETE",url:`/api/v2/group/${A}`,body:j,responseType:L})),nV=Pi(A=>({name:"markGroupReadyForPurging",method:"POST",url:`/api/v1/group/${A}/purge`,responseType:L})),oV=ae.readonly(ae.partial({currentUserMustResetPassword:ae.boolean}),"UpdateGroupMembershipsResponse"),iV=Pi((A,j,e)=>({name:"updateGroupMembershipRole",method:"PATCH",url:`/api/v1/group/${j}/person/${A}/role/${e}`,responseType:L})),sV=Pi((A,j)=>({name:"patchGroupMemberships",method:"PATCH",url:`/api/v3/group/${A}/membership`,body:j,responseType:oV})),lV=Pi((A,j)=>({name:"patchUserMemberships",method:"PATCH",url:`/api/v2/user/${A}/membership`,body:j,responseType:oV})),cV=Pi(A=>({name:"addRecoveryKeysetToGroup",method:"PUT",url:`/api/v1/group/${A.uuid}/recoverykeyset`,body:A,responseType:L})),RbA=ae.readonly(ae.type({csv:ae.string}),"GetGroupMembersCsvResponse"),dV=Pi(A=>({name:"getGroupMembersCsv",method:"GET",url:`/api/v1/group/${A}/members/csv`,responseType:RbA})),DbA=ae.readonly(ae.type({count:ae.number}),"UniqueUserCountResponse"),Sbj=ae.readonly(ae.type({groupUuids:ae.array(ae.string)}),"UniqueUserCountForGroupsRequest"),kV=Pi(A=>({name:"postUniqueUserCountForGroups",method:"POST",url:"/api/v3/group/unique/users",body:A,responseType:DbA})),Hbj=ae.readonly(ae.type({applicationUuids:ae.array(ae.string)}),"GroupApplicationAssignmentRequest"),uV=Pi((A,j)=>({name:"putGroupApplicationAssignment",method:"PUT",url:`/api/v1/group/${A}/assign-applications`,body:j,responseType:L}));var qt=J(tA());var wq=Z("web-api/api/mfa.ts"),EV="totp",pV="email",Oi;(function(A){A.Totp="T",A.Duo="D",A.Dsecret="S",A.DsecretProxy="P",A.WebAuthn="W",A.Email="E"})(Oi||(Oi={}));var KT=qt.readonly(qt.intersection([qt.type({type:pe(Oi,"MfaType"),keyHandle:qt.string,keyValue:qt.string},"type"),qt.partial({createdAt:qt.string,updatedAt:qt.string},"partial")]),"StandardMfaParams"),TbA=qt.readonly(qt.intersection([KT,qt.type({digits:qt.number,code:qt.string})]),"MfaCodeParams"),CbA=qt.readonly(qt.intersection([KT,qt.partial({digits:qt.number,totpClientData:qt.string})]),"MfaTotpParams"),_bA=qt.readonly(qt.intersection([KT,qt.partial({keyName:qt.string,webAuthnClientData:qt.string})]),"MfaWebAuthnParams"),SbA=qt.union([CbA,_bA,TbA]),Qf=qt.partial({dsecret:qt.string,ssoMigrationGracePeriod:Iw},"VerifyMfaResponse"),HbA=qt.readonly(qt.type({length:qt.number,method:qt.string}),"SendMfaCodeResponse"),MbA=qt.readonly(qt.type({allowedTypes:qt.array(pe(Oi,"MfaType")),canDisableAll:qt.boolean,enforced:qt.boolean,hasMFA:qt.boolean}),"MfaConfig"),KbA=qt.union([Qf,qt.null],"EnableMfaResponse"),mV=wq(A=>({name:"enableMfa",method:"POST",url:"/api/v1/user/mfa",body:A,responseType:KbA})),BV=wq(A=>({name:"disableMfa",method:"PUT",url:`/api/v1/user/mfa/${A}`,responseType:L})),gV=wq(A=>({name:"sendMfaCode",method:"POST",url:"/api/v1/user/mfa/code",body:A,responseType:HbA,encrypted:!1})),hV=wq(()=>({name:"getMfa",method:"GET",url:"/api/v1/user/mfa",responseType:qt.array(SbA)})),qV=wq(()=>({name:"getMfaConfig",method:"GET",url:"/api/v1/user/mfa/config",responseType:MbA})),xV=wq(A=>({name:"verifyTotp",method:"POST",url:"/api/v1/user/mfa/totp/verify",body:{totpCode:A},responseType:Qf})),NbA=qt.readonly(qt.type({challenge:qt.string,rpid:qt.string}),"GetWebAuthnChallengeResponse"),Kbj=wq(()=>({name:"getWebAuthnChallenge",method:"GET",url:"/api/v1/user/mfa/webauthn/challenge",responseType:NbA}));var ot=J(tA());var NT=Z("web-api/api/user.ts"),vV=NT(A=>({name:"beginChangeEmail",method:"POST",url:"/api/v1/emailchange/begin",body:{email:A},responseType:L})),LT=NT((A,j)=>({name:"completeChangeEmail",method:"POST",url:"/api/v1/emailchange/complete",body:{auth:A,token:j},responseType:L})),GV=NT(A=>({name:"cancelChangeEmail",method:"POST",url:"/api/v1/emailchange/cancel",body:{email:A},responseType:L})),fV=NT(()=>({name:"promptConfirmChangeEmail",method:"POST",url:"/api/v1/emailchange/propose/verify",responseType:L})),Dw=ot.readonly(ot.intersection([ot.type({uuid:ot.string,createdAt:ot.string,lastAuthAt:ot.string,email:ot.string,firstName:ot.string,lastName:ot.string,name:ot.string,attrVersion:ot.number,keysetVersion:ot.number,state:ot.string,type:ot.string,avatar:ot.string,language:ot.string,accountKeyFormat:ot.string,accountKeyUuid:ot.string,combinedPermissions:ot.number,newsletterPrefs:ot.number,preferences:ot.number,keysets:ot.union([ot.readonlyArray($A.KeysetCiphertext),ot.null]),vaultAccess:ot.union([ot.readonlyArray(fk),ot.null]),hasMFAEnabled:ot.boolean},"type"),ot.partial({updatedAt:ot.string,memberships:ot.array(dr.Type),externalGUID:ot.string,csToken:ot.string},"partial")]),"User"),LbA=ot.readonly(ot.intersection([ot.type({uuid:ot.string,firstName:ot.string,lastName:ot.string,name:ot.string,email:ot.string,avatar:ot.string,state:ot.string,type:ot.string}),ot.partial({combinedPermissions:ot.number})]));var Rn=Z("web-api/api/account.ts"),zT=pA.partial({companySize:pA.string},"AccountMeta"),zbA=pA.readonly(pA.type({hasPackages:pA.boolean,hasNativeClient:pA.boolean,hasNonSafariClient:pA.boolean,hasMspConsoleAccess:pA.boolean,mustMigrate:pA.boolean}),"UserFlags"),UbA=pA.readonly(pA.type({hasRecoveryMembers:pA.boolean,isAccountManaged:pA.boolean}),"AccountFlags"),VbA=pA.readonly(pA.type({accountName:pA.union([pA.string,pA.undefined]),accountDomain:pA.union([pA.string,pA.undefined])}),"MspInfo"),XbA=pA.readonly(pA.type({inviteSecret:pA.string,inviteEmailDomains:Gj(pA.string)}),"InviteSettings"),JbA=pA.readonly(pA.type({billingCompanyName:qA(pA.string,""),billingAddress:qA(pA.string,""),billingEmails:qA(pA.string,""),billingPurchaseOrderNumber:qA(pA.string,"")}),"BillingSettings"),WbA=pA.readonly(pA.type({trialStartedAt:pA.string,trialDays:pA.number,status:pA.string,provider:pA.string,freezesAt:pA.string,members:pA.number,guests:pA.number,settings:JbA}),"BillingInfo"),UT=pA.type({alerts:pA.string,notifications:pA.string},"SlackSettings"),VT=pA.partial({isEnabled:pA.boolean,rememberDays:pA.number,integrationKey:pA.string,secretKey:pA.string,host:pA.string},"DuoSettings"),XT=pA.readonly(pA.type({url:Gj(pA.string)}),"SupportSettings"),QbA=pA.readonly(pA.type({address:pA.string,verified:pA.boolean}),"ReplyToEmailSettings"),JT=pA.readonly(pA.partial({isEnabled:pA.boolean,notificationEmails:pA.string,monitoringEnabled:pA.boolean,monitoringDomain:pA.string,deploymentOption:pA.string,identityProvider:pA.string,replyToEmail:QbA}),"ProvisioningSettings"),Iq;(function(A){A.Minimum="",A.Medium="M",A.Strict="S",A.Custom="C"})(Iq||(Iq={}));var WT=pA.readonly(pA.type({type:pe(Iq,"MasterPasswordPolicyType"),customString:qA(pA.string,"")}),"MasterPasswordPolicySettings"),YbA=pA.readonly(pA.intersection([pA.type({enforced:qA(pA.boolean,!1)},"type"),pA.partial({availableTypes:Gj(pA.readonlyArray(pe(Oi,"MfaType")))},"partial")]),"TwoFactorSettings"),Nbj=pA.readonlyArray(pA.string),ZbA=pA.readonly(pA.type({requireModernApps:qA(pA.boolean,!1)}),"ClientRestrictionSettings"),QT=pA.readonly(pA.partial({hideDeveloperTools:qA(pA.boolean,!1),hideIntegrations:qA(pA.boolean,!1),updatedAt:co}),"SidebarNavigationPoliciesSettings"),A0A=pA.readonly(pA.partial({blockFileStorage:qA(pA.boolean,!1),blockPasskeyAuthenticator:qA(pA.boolean,!1),privateVaultsBusinessWatchtowerReportingEnabled:qA(pA.boolean,!0),allowedWatchtowerDomains:Gj(pA.string),telemetryOptOut:qA(pA.boolean,!1),needsKolideHealthCheck:qA(pA.boolean,!1)}),"TeamMemberPoliciesSettings"),Lbj=pA.readonly(pA.type({isEnabled:qA(pA.boolean,!1),daysUntilDelete:Gj(pA.number)}),"AutoDeleteSuspendedUsersSettings"),j0A=pA.readonly(pA.type({enabled:qA(pA.boolean,!1),daysUntilDelete:Gj(pA.number)})),FV=pA.readonly(pA.type({definition:j0A}),"AutoDeleteSuspendedUsersPolicyResponse"),YT=pA.type({slackURLs:Gj(UT),betaIsEnabled:qA(pA.boolean,!1),richIconsAreDisabled:qA(pA.boolean,!1),duo:Gj(VT),support:Gj(XT),provisioning:Gj(JT),masterPasswordPolicy:Gj(WT),twoFactor:Gj(YbA),clientRestrictions:Gj(ZbA),teamMemberPolicies:Gj(A0A),disableEmergencyKit:qA(pA.boolean,!1),sidebarNavigationPolicies:Gj(QT)},"AccountSettings"),ZT=pA.readonly(pA.type({groups:pA.number,invitations:pA.number,users:pA.number,vaults:pA.number,activeGuests:pA.number,activeUsers:pA.number,activeManagedAccounts:pA.number}),"EntityCounts"),e0A=pA.type({gatedFeature:pA.string,trialDays:pA.number,remainingDays:pA.number,optedOut:pA.boolean},"GatedFeatureTrial"),t0A=pA.readonly(pA.intersection([pA.type({uuid:pA.string,name:pA.string,domain:pA.string,type:pA.string,state:pA.string,avatar:pA.string,attrVersion:pA.number,createdAt:pA.string},"type"),pA.partial({storageUsed:pA.number,baseAttachmentURL:pA.string,baseAvatarURL:pA.string,me:Dw,meta:zT,counts:ZT,users:pA.array(LbA),groups:pA.array($q),tier:eg,userFlags:zbA,accountFlags:UbA,invite:XbA,billing:WbA,promotions:pA.array(Vf),settings:YT,gatedFeatureTrials:pA.array(e0A),mspInfo:VbA},"partial")]),"Account"),zbj=pA.readonly(pA.partial({domain:pA.string,email:pA.string}),"CheckDomainRequests"),Tw;(function(A){A.AccountFlags="account-flags",A.Billing="billing",A.Counts="counts",A.Groups="groups",A.Invite="invite",A.Me="me",A.MeMemberships="me.memberships",A.Meta="meta",A.Promotions="promotions",A.Settings="settings",A.SettingsTeamMemberPolicies="settings.team-member-policies",A.Tier="tier",A.UserFlags="user-flags",A.Users="users",A.GatedFeatureTrials="account-gated-feature-trials"})(Tw||(Tw={}));var bV=Rn(A=>({name:"getAccountWithAttrs",method:"GET",url:`/api/v3/account${nt({attrs:A})}`,responseType:t0A})),yV=Rn((A,j)=>({name:"activateAccount",method:"PUT",url:"/api/v1/account/activate",body:{vaults:A,groups:j},responseType:L})),$V=Rn(A=>({name:"joinAccount",method:"PUT",url:"/api/v1/person/join",body:{vault:A},responseType:L})),wV=Rn(A=>({name:"updateAccount",method:"PUT",url:"/api/v1/account/attrs",body:A,responseType:L})),IV=Rn(A=>({name:"updateBillingSettings",method:"PUT",url:"/api/v1/account/billingsettings",body:A,responseType:L})),PV=Rn(()=>({name:"deleteAccount",method:"DELETE",url:"/api/v1/account",responseType:L})),OV=Rn((A,j)=>({name:"verifyLockedOutAccountDeletion",method:"GET",url:`/api/v1/account/${A}/${j}/verifydeletion`,responseType:L})),RV=Rn((A,j)=>({name:"lockedOutDeleteAccount",method:"DELETE",url:`/api/v1/account/${A}/${j}`,responseType:L})),r0A=pA.readonly(pA.type({result:pA.boolean}),"CheckDomainAvailabilityResponse"),DV=Rn((A,j)=>({name:"checkDomainAvailability",method:"POST",url:"/api/v1/domain/check",body:{domain:A,email:j},responseType:r0A,encrypted:!1})),a0A=pA.readonly(pA.type({domain:pA.string}),"GetSuggestedDomainResponse"),TV=Rn(A=>({name:"getSuggestedDomain",method:"POST",url:"/api/v1/domain/suggestion",body:{accountName:A},responseType:a0A,encrypted:!1})),CV=Rn(A=>({name:"changeDomain",method:"PUT",url:`/api/v1/account/domain/${A}`,responseType:L})),_V=Rn(A=>({name:"postImage",method:"POST",url:"/api/v1/image",body:A,responseType:pA.string,options:{dataType:"arraybuffer",responseType:"text"},encrypted:!1})),Cw=Rn(A=>({name:"changeAccountType",method:"PUT",url:"/api/v2/account/type",body:A,responseType:L})),SV=Rn(A=>({name:"changeAccountTypeV3",method:"PUT",url:"/api/v3/account/type",body:A,responseType:L})),n0A=pA.readonly(pA.type({activeMembers:pA.number,activeGuests:pA.number,billedMembers:pA.number,billedGuests:pA.number}),"AccountUserCounts"),HV=Rn(()=>({name:"getAccountUserCounts",method:"GET",url:"/api/v1/account/counts",responseType:n0A})),F2e=pA.readonly(pA.type({encAuthenticationKey:$A.JweB,signInAddress:pA.string},"CreateAccountMspLinkRequest")),MV=pA.readonly(pA.type({linkRequestUuid:pA.string,mspDomain:pA.string,mspAccountName:pA.undefined,encAuthenticationKey:$A.JweB,groupPublicKeyMac:pA.undefined,eamGroupKeyset:pA.undefined,expirationTime:pA.string,acceptedAt:pA.undefined,isMspLinkRequest:qA(pA.boolean,!0)}),"UnacceptedLinkRequest"),o0A=pA.readonly(pA.type({linkRequestUuid:pA.string,mspDomain:pA.string,mspAccountName:pA.string,encAuthenticationKey:$A.JweB,groupPublicKeyMac:nT,eamGroupKeyset:$A.KeysetCiphertext,expirationTime:pA.string,acceptedAt:pA.string,isMspLinkRequest:qA(pA.boolean,!0)}),"ValidatedLinkRequest"),i0A=pA.union([MV,o0A]),KV=Rn(()=>({name:"getAccountMspLinkRequest",method:"GET",url:"/api/v1/msp-link-request",responseType:i0A})),NV=Rn(A=>({name:"cancelMspAccountLinkRequest",method:"DELETE",url:`/api/v1/msp-link-request/${A}`,responseType:L})),LV=Rn(()=>({name:"createAccountMspLinkRequestPreflight",method:"GET",url:"/api/v1/msp-link-request/preflight",responseType:L})),zV=Rn(A=>({name:"createAccountMspLinkRequest",method:"POST",url:"/api/v1/msp-link-request",body:A,responseType:MV})),UV=Rn(A=>({name:"declineMspAccountLinkRequest",method:"PATCH",url:`/api/v1/msp/link-request/${A}/decline`,responseType:L})),s0A=pA.readonly(pA.type({eamGroupExists:pA.boolean,objectTypesNeeded:pA.readonlyArray(pA.string),vaultsNeeded:pA.readonlyArray(pA.string)}),"FinalizeMspAccountLinkRequestPreflight"),VV=Rn(()=>({name:"finalizeMspAccountLinkRequestPreflight",method:"GET",url:"/api/v1/msp-link-request/finalize/preflight",responseType:s0A})),XV=Rn(()=>({name:"finalizeMspAccountLinkRequest",method:"POST",url:"/api/v1/msp-link-request/finalize",responseType:L}));var Le=J(tA());var Ubj=Z("web-api/api/account_overview.ts"),Vbj=Le.readonly(Le.intersection([Le.type({accessVersion:Le.number,attrVersion:Le.number,contentVersion:Le.number,uuid:Le.string},"type"),Le.partial({snapshotContentVersion:Le.number,watchtowerReportNeedsUpdating:Le.boolean},"partial")]),"VaultOverview"),Xbj=Le.readonly(Le.type({permissions:Le.number}),"UserOverview"),Jbj=Le.readonly(Le.intersection([Le.type({status:Le.keyof({A:!0,C:!0,F:!0,L:!0,T:!0,P:!0}),storageUsed:qA(Le.number,0)},"type"),Le.partial({accountWillFreezeAt:Le.string,storageCapacity:Le.number},"partial")]),"BillingOverview"),Wbj=Le.readonly(Le.type({isEnabled:Le.boolean,serverItemSnapshotPayloadVersion:Le.number,hasPubKey:Le.boolean,isPolicyEnabled:Le.boolean}),"DetailedVaultReporting"),Qbj=Le.readonly(Le.type({lastUpdatedAt:Le.number}),"ActivationHubOverview"),Ybj=Le.readonly(Le.type({credentialsVersion:Le.string,policiesVersion:Le.string},"ManagedCredentialsVersions")),Zbj=Le.readonly(Le.intersection([Le.type({notifier:Le.string,accountVersion:Le.number,billingVersion:Le.number,templateVersion:Le.number,userVersion:Le.number,keysetVersion:Le.number,policiesVersion:Le.union([Le.number,Le.undefined]),userOverview:Xbj,billingOverview:Jbj,hasPackages:Le.boolean,supportsItemUsage:Le.boolean},"type"),Le.partial({vaults:Le.readonlyArray(Vbj),watchtowerReportVersion:Le.number,detailedVaultReporting:Wbj,activationHubOverview:Qbj,kolideAppsVersion:Le.number,managedCredentials:Ybj},"partial")]),"AccountOverview"),JV=Ubj(()=>({name:"getAccountOverview",method:"GET",url:"/api/v2/overview",responseType:Zbj}));var Fk=J(tA());var WV=Z("web-api/api/email_templates.ts"),A0j=Fk.type({createdAt:Fk.string,subjectOverride:Fk.string,templateConfig:Fk.string,templateUuid:Fk.string,updatedAt:Fk.string},"IoAccountTemplateConfig"),QV=WV(A=>({name:"getAccountTemplateConfig",method:"GET",url:`/api/v1/email-templates/account-template-config/${A}`,responseType:A0j})),YV=WV(A=>({name:"createAccountTemplateConfig",body:{...A},method:"POST",url:"/api/v1/email-templates/account-template-config",responseType:Fk.null})),ZV=WV(A=>({name:"updateAccountTemplateConfig",body:{...A},method:"PUT",url:"/api/v1/email-templates/account-template-config",responseType:Fk.null}));var dd=J(tA());var AC=Z("web-api/api/account_config.ts"),j0j=dd.type({companyLogoUrl:dd.string}),e0j=dd.type({companyLogoUrl:dd.string,createdAt:dd.string,updatedAt:dd.string},"IoAccountConfig"),AX=AC(A=>({name:"uploadCompanyLogo",method:"POST",url:"/api/v1/email-templates/email-account-config/logo",body:A,responseType:j0j,options:{dataType:"arraybuffer"}})),jX=AC(A=>({name:"deleteCompanyLogo",method:"DELETE",url:"/api/v1/email-templates/email-account-config/logo",body:{isDraftLogo:A},responseType:L})),eX=AC(()=>({name:"publishCompanyLogo",method:"POST",url:"/api/v1/email-templates/email-account-config/logo/publish",body:dd.null,responseType:dd.void})),tX=AC(()=>({name:"getEmailAccountConfig",method:"GET",url:"/api/v1/email-templates/email-account-config",responseType:e0j}));var un=J(tA());var l0A=Z("web-api/api/activation_hub.ts"),c0A=un.readonly(un.type({uuid:un.string,name:un.string,description:un.string,dismissable:un.boolean,tags:un.array(un.string),ordering:un.number,dependencies:un.array(un.string),completedAt:Gj(un.string),dismissed:Gj(un.boolean)}),"Task"),d0A=un.readonly(un.type({total:un.number,tasks:un.array(c0A)},"GetActivationHubTasksResponse")),rX=l0A(A=>({name:"getActivationHubTasks",method:"GET",url:`/api/v2/activation-hub/tasks/list${nt({product:A.product,platform:A.platform,audience:A.audience,limit:A.limit})}`,responseType:d0A})),aX=l0A(A=>({name:"completeActivationHubTask",method:"PUT",url:`/api/v1/activation-hub/tasks/${A.uuid}/completed`,body:{dismissed:A.dismiss,completedAt:A.completedAt},responseType:L}));var ia=J(tA());var _w=Z("web-api/api/admin_watchtower.ts"),t0j=ia.readonly(ia.type({pubKey:Au}),"WatchtowerPubkey"),k0A=ia.readonly(ia.type({encryptedBy:ia.string,vaultKeySn:ia.number,encVaultKey:$A.JweB,encVaultAttrs:$A.JweB,combinedAcl:ia.number}),"WatchtowerReportVaultData"),u0A=ia.readonly(ia.intersection([ia.type({uuid:ia.string,vaultUuid:ia.string,vaultType:ia.string,updatedAt:ia.string,isOutdated:ia.boolean,encData:$A.Jwe},"type"),ia.partial({vaultName:ia.string,vaultData:k0A},"partial")]),"WatchtowerReportItem"),E0A=ia.readonly(ia.type({reports:ia.array(u0A),nextStartUuid:ia.string}),"WatchtowerReports"),p0A=ia.readonly(ia.type({accountVaultCount:ia.number,accountEmptyVaultCount:ia.number}),"WatchtowerStats"),jC=_w(()=>({name:"getWatchtowerPubkey",method:"GET",url:"/api/v1/report/watchtower/pubkey",responseType:t0j})),nX=_w((A,j)=>({name:"uploadWatchtowerReport",method:"POST",url:`/api/v1/report/watchtower/vault/${A}`,body:j,responseType:L})),oX=_w((A,j)=>({name:"getWatchtowerReport",method:"GET",url:`/api/v1/report/watchtower${nt({vaultTypes:A,startUuid:j})}`,responseType:E0A})),iX=_w(A=>({name:"getWatchtowerStats",method:"GET",url:`/api/v1/report/watchtower/stats${nt({vaultTypes:A})}`,responseType:p0A})),sX=_w((A,j)=>({name:"createWatchtowerPubkey",method:"POST",url:`/api/v1/report/watchtower/pubkey/${A}`,body:{pubKey:j},responseType:L}));var Rr=J(tA()),h0A=J(Wo());var Lr=J(tA());var Pq=A=>A?encodeURIComponent(A).length>150:!1;var lX=Z("web-api/api/partial_user.ts"),uo=Lr.readonly(Lr.type({uuid:Lr.string,name:Lr.string,email:Lr.string,avatar:Lr.string,state:Lr.string,type:Lr.string}),"PartialUser"),Gt;(function(A){A.Provisioning="P",A.Connect="C",A.DataStreaming="D",A.Cli="X",A.UserManaged="M",A.Na="",A.Slack="slack",A.Duo="duo",A.MaskedEmails="MaskedEmails",A.Brex="Brex",A.PrivacyCom="PrivacyCom"})(Gt||(Gt={}));var Hw=Lr.intersection([uo,Lr.readonly(Lr.type({createdAt:Lr.string,creatorUuid:Lr.string,serviceAccountType:pe(Gt,"ServiceAccountType")},"type")),Lr.partial({canActiveUserViewDetails:Lr.boolean,permissions:Lr.number},"partial")],"ServiceAccountsPartialUser"),Sw;(function(A){A.Migrated="MIGRATED",A.PendingMigration="PENDING_MIGRATION",A.InAuthRecovery="IN_AUTH_RECOVERY",A.PendingAuthRecovery="PENDING_AUTH_RECOVERY",A.Other="OTHER"})(Sw||(Sw={}));var cX=Lr.readonly(Lr.intersection([uo,Lr.partial({combinedPermissions:Lr.number,authState:pe(Sw,"AuthStates")},"partial")]),"ExtendedPartialUser"),B0A=Lr.readonly(Lr.intersection([Lr.type({totalCount:Lr.number,users:Lr.readonlyArray(cX)},"type"),Lr.partial({serviceAccounts:Lr.readonlyArray(Hw)},"partial")]),"GetPartialUsersResponse"),r0j=350,rg=async(A,j,e)=>{if(Pq(j.search))return{totalCount:0,users:[],serviceAccounts:[]};let t=j.emails?_y(j.emails):[],r=[];for(let n of t){let o=r.length-1,i=r[o];o>=0&&i!==void 0&&i.length+n.length<r0j?r[o]+=","+n:r.push(n)}let a=g0A(j.attrs);if(r.length>0){let n=r.map(async i=>{let s={...j,attrs:a,membershipLimit:e,emails:i,limit:j.limit,offset:j.offset,sort:j.sort,sortDir:j.sortDir,userUuids:void 0,usePostRequest:void 0};return m0A(A,nt(s))});return(await Promise.all(n)).reduce((i,s)=>({totalCount:i.totalCount+s.totalCount,users:[...i.users,...s.users],serviceAccounts:[...i.serviceAccounts||[],...s.serviceAccounts||[]]}),{totalCount:0,users:[],serviceAccounts:[]})}else{let n={...j,attrs:a,limit:j.limit,offset:j.offset,sort:j.sort,sortDir:j.sortDir,userUuids:void 0,usePostRequest:void 0};return m0A(A,nt(n))}},m0A=lX(A=>({name:"getUsers",method:"GET",url:`/api/v3/users${A}`,responseType:B0A})),eC=lX(A=>({name:"findPartialUsers",method:"POST",url:"/api/v3/users",body:{...{attrs:g0A(A.attrs),emails:A.emails,group:A.group,states:A.states,types:A.types,search:A.search,userUuids:A.userUuids,vault:A.vault,limit:A.limit,offset:A.offset,sort:A.sort,sortDir:A.sortDir}},responseType:B0A,encrypted:!0})),tC=lX(A=>({name:"getUsersCount",method:"GET",url:`/api/v2/users/count${nt({emails:A?.emails,states:A?.states,types:A?.types,group:A?.group,search:A?.search,vault:A?.vault})}`,responseType:Lr.number})),a0j={combinedPermissions:"combined-permissions",authState:"auth-state"},g0A=A=>A.map(j=>a0j[j]);var rC=Z("web-api/api/activity.ts"),n0j=100,o0j="regular_user",i0j="external_user",aC=()=>(0,h0A.default)().subtract(13,"month"),kX=Rr.readonly(Rr.intersection([Rr.type({actor:uo,time:Rr.string,ipAddress:Rr.string,action:Rr.string},"type"),Rr.partial({eid:Rr.number,uuid:Rr.string,objectType:Rr.string,objectUuid:Rr.string,auxInfo:Rr.string,auxUUID:Rr.string,sessionUuid:Rr.string,actorType:Rr.string},"partial")]),"Activity"),s0j=Rr.readonly(Rr.type({objectType:Rr.string,action:Rr.string}),"Event"),q0A=Rr.readonly(Rr.type({auditEvents:Rr.readonlyArray(kX),cursor:Rr.string,hasMore:Rr.boolean,totalCount:Rr.number}),"ActivityWithCursor"),uX=rC((A,j,e,t,r,a,n,o,i)=>({name:"getFilteredActivityLogReports",method:"POST",url:"/api/v4/auditevents",body:{cursor:A,limit:j,startTime:e,endTime:t,direction:r,events:a,actorUuids:n,memberUuids:o,genericUuids:i},responseType:q0A})),x0A=Rr.readonly(Rr.type({count:Rr.number,hasMore:Rr.boolean}),"AuditEventsTotalReports"),EX=rC((A,j,e,t,r,a)=>({name:"getFilteredActivityLogTotalReports",method:"POST",url:"/api/v1/auditevents/summary",body:{startTime:A,endTime:j,events:e,actorUuids:t,memberUuids:r,genericUuids:a},responseType:x0A})),pX=rC(A=>({name:"reportAuditEvent",method:"POST",url:"/api/v1/auditevents/report",body:A,responseType:L})),dX;(function(A){A.Group="G",A.Vault="V",A.Person="P",A.ServiceAccount="S"})(dX||(dX={}));var mX=rC((A,j)=>{let e=nt({type:A});return{name:"getActivityFeed",method:"GET",url:`/api/v1/auditevents/feed/${j}${e}`,responseType:Rr.readonlyArray(kX)}});var PA=J(tA());var l6=Z("web-api/api/auth.ts"),BX=PA.type({method:PA.string,alg:PA.string,iterations:PA.number,salt:PA.string,v:PA.string}),Yf=PA.type({method:PA.string,alg:PA.string,iterations:PA.number,salt:PA.string},"AuthParams"),v0A=PA.intersection([PA.type({status:PA.string},"type"),PA.partial({sessionID:PA.string,accountKeyFormat:PA.string,accountKeyUuid:PA.string,userAuth:Yf,newDomain:PA.string,newHost:PA.string,newEmail:PA.string},"partial")],"StartAuthResponse"),iu=l6(A=>({name:"startAuth",method:"POST",url:"/api/v3/auth/start",body:A,responseType:v0A,encrypted:!1})),G0A=PA.type({userB:PA.string},"SrpResponse"),gX=l6(A=>({name:"postAuth",method:"POST",url:"/api/v2/auth",body:{userA:A},responseType:G0A,encrypted:!1})),f0A=PA.type({serverVerifyHash:PA.string},"SrpResponse"),hX=l6(A=>({name:"confirmKeyAuth",method:"POST",url:"/api/v2/auth/confirm-key",body:{clientVerifyHash:A},responseType:f0A,encrypted:!1})),nC=PA.type({enabled:PA.boolean},"DsecretResponse"),oC=PA.type({enabled:PA.boolean},"DsecretProxyResponse"),iC=PA.type({enabled:PA.boolean,digits:PA.number},"TotpResponse"),sC=PA.intersection([PA.type({enabled:PA.boolean,host:PA.string,sigRequest:PA.string},"type"),PA.partial({authURL:PA.string},"partial")],"DuoResponse"),lC=PA.type({enabled:PA.boolean,keyHandles:PA.array(PA.string),challenge:PA.string,rpid:PA.string},"WebAuthnResponse"),cC=PA.intersection([PA.type({enabled:PA.boolean,availableTypes:qA(PA.readonlyArray(pe(Oi,"MfaType")),[])},"type"),PA.partial({webAuthnChallenge:PA.string,webAuthnRpid:PA.string},"partial")],"MustEnableResponse"),dC=PA.readonly(PA.type({enabled:PA.boolean,digits:qA(PA.number,0),methods:PA.array(PA.string)}),"CodeResponse"),kC=PA.partial({dsecret:nC,dsecretProxy:oC,totp:iC,duo:sC,webAuthn:lC,mustEnable:cC,code:dC},"MfaResponse"),uC=PA.intersection([PA.type({notifier:PA.string},"type"),PA.partial({accountUuid:PA.string,userUuid:PA.string,mfa:kC,ssoMigrationGracePeriod:Iw},"partial")],"CompleteAuthResponse"),qX=l6(A=>({name:"completeAuth",method:"POST",url:"/api/v2/auth/complete",body:A,responseType:uC})),xX=l6(A=>({name:"verifyMfa",method:"POST",url:"/api/v1/auth/mfa",body:A,responseType:Qf})),vX=l6(A=>({name:"enableMfaWithAuth",method:"POST",url:"/api/v1/auth/mfa/enable",body:A,responseType:Qf})),GX=l6(A=>({name:"submitNewUserAuth",method:"POST",url:"/api/v1/user/auth",body:A,responseType:L})),Mw=l6(()=>({name:"extendSession",method:"PUT",url:"/api/v1/session/touch",responseType:L})),Kw=l6(()=>({name:"signOut",method:"PUT",url:"/api/v1/session/signout",responseType:L})),F0A=PA.readonly(PA.type({sessionUuid:PA.string,sessionKey:$A.JwkSymKey,notifier:PA.string},"DelegateSessionResponse")),Nw=l6((A,j)=>({name:"delegateSession",method:"POST",url:"/api/v2/delegatesession",body:{device:A,isNewPhysicalDevice:j},responseType:F0A})),fX=PA.readonly(PA.type({channelSeed:PA.string,channelUuid:PA.string,initiatorAuth:PA.string},"MyceliumChannelStartResponse")),l0j=l6((A,j)=>({name:"myceliumChannelStartU",method:"POST",url:"/api/v2/mycelium/u",body:{deviceUuid:A,hello:j},responseType:fX,encrypted:!1})),c0j=l6(A=>({name:"myceliumChannelStartV",method:"POST",url:"/api/v2/mycelium/v",body:{hello:A},responseType:fX,encrypted:!0})),b0A=PA.type({lastAuthIP:PA.string,city:PA.string,country:PA.string,countryCode:PA.string}),FX=PA.type({hello:PA.string,locationMeta:b0A},"MyceliumChannelHelloResponse"),d0j=l6((A,j,e)=>({name:"myceliumChannelSwitchRegionU",method:"PUT",url:`/api/v2/mycelium/u/${A}/switch-region`,body:{region:e},options:{headers:{ChannelJoinAuth:j}},responseType:L,encrypted:!1})),k0j=PA.type({region:PA.array(PA.number)},"MyceliumChannelSwitchSourceErrResponse"),u0j=l6((A,j)=>({name:"myceliumGetHelloV",method:"GET",url:`/api/v2/mycelium/v/${A}/1`,options:{headers:{ChannelJoinAuth:j}},responseType:FX,encrypted:!0})),E0j=l6((A,j)=>({name:"myceliumGetHelloU",method:"GET",url:`/api/v2/mycelium/u/${A}/1`,options:{headers:{ChannelJoinAuth:j}},responseType:FX,encrypted:!1})),p0j=l6((A,j,e)=>({name:"myceliumPutReplyU",method:"PUT",url:`/api/v2/mycelium/u/${A}/2`,body:e,options:{headers:{ChannelJoinAuth:j}},responseType:bX,encrypted:!1})),bX=PA.type({responderAuth:PA.string},"MyceliumChannelJoinResponse"),m0j=l6((A,j,e)=>({name:"myceliumChannelSendReplyAndJoinV",method:"PUT",url:`/api/v2/mycelium/v/${A}/2`,options:{headers:{ChannelJoinAuth:j}},body:{reply:e},responseType:bX,encrypted:!0})),y0A=PA.union([PA.type({reply:PA.string},"MyceliumChannelReplyResponse"),PA.undefined]),B0j=l6((A,j)=>({name:"myceliumGetReplyU",method:"GET",url:`/api/v2/mycelium/u/${A}/2`,options:{headers:{ChannelAuth:j}},responseType:y0A,encrypted:!1})),yX=PA.union([PA.type({msg:PA.string},"MyceliumChannelMsgnResponse"),PA.undefined]),g0j=l6((A,j,e)=>({name:"myceliumGetMsgNu",method:"GET",url:`/api/v2/mycelium/u/${j}/${A}`,options:{headers:{ChannelAuth:e}},responseType:yX,encrypted:!1})),h0j=l6((A,j,e,t)=>({name:"myceliumChannelSendMsgNu",method:"PUT",url:`/api/v2/mycelium/u/${j}/${A}`,options:{headers:{ChannelAuth:e}},body:{msg:t},responseType:L,encrypted:!1})),$0A=PA.union([PA.type({city:PA.string,country:PA.string,countryCode:PA.string,lastAuthIP:PA.string},"LocationMeta"),PA.undefined]),w0A=PA.union([PA.type({locationMeta:$0A,reply:PA.string},"MyceliumChannelMsgTwoResponse"),PA.undefined]),q0j=l6((A,j)=>({name:"myceliumGetMsgTwoV",method:"GET",url:`/api/v2/mycelium/v/${A}/2`,options:{headers:{ChannelAuth:j}},responseType:w0A,encrypted:!0})),x0j=l6((A,j,e)=>({name:"myceliumGetMsgNv",method:"GET",url:`/api/v2/mycelium/v/${j}/${A}`,options:{headers:{ChannelAuth:e}},responseType:yX,encrypted:!0})),v0j=l6((A,j,e,t)=>({name:"myceliumChannelSendMsgNv",method:"PUT",url:`/api/v2/mycelium/v/${j}/${A}`,options:{headers:{ChannelAuth:e}},body:{msg:t},responseType:L,encrypted:!0})),G0j=l6((A,j)=>({name:"myceliumGetReconnectTokenV",method:"POST",url:`/api/v2/mycelium/v/${A}/reconnect`,options:{headers:{ChannelAuth:j}},encrypted:!0,responseType:PA.type({reconnectToken:PA.string})})),f0j=l6((A,j)=>({name:"myceliumGetReconnectTokenU",method:"POST",url:`/api/v2/mycelium/u/${A}/reconnect`,options:{headers:{ChannelAuth:j}},encrypted:!1,responseType:PA.type({reconnectToken:PA.string})})),F0j=l6((A,j)=>({name:"myceliumCloseChannelV",method:"DELETE",url:`/api/v2/mycelium/v/${A}`,options:{headers:{ChannelAuth:j}},encrypted:!0,responseType:L})),b0j=l6((A,j)=>({name:"myceliumCloseChannelU",method:"DELETE",url:`/api/v2/mycelium/u/${A}`,options:{headers:{ChannelAuth:j}},encrypted:!1,responseType:L})),I0A=PA.type({session_uuid:PA.string,session_key:yo,notifier_url:PA.string}),P0A=PA.type({token:PA.string,exp:PA.string}),y0j=PA.type({secret:PA.type({credential_bundle:PA.type({auk:yo,srpx:PA.string}),account_details:PA.type({sign_in_address:PA.string,user_uuid:PA.string,account_uuid:PA.string,email:PA.string}),delegated_auth:PA.type({session:PA.union([I0A,PA.undefined,PA.null]),refresh_token:PA.union([P0A,PA.undefined,PA.null])}),extra_credentials:PA.union([PA.type({password_secret_key:PA.type({secret_key:PA.string})}),PA.type({sso:PA.type({account_key_uuid:PA.string,sso_provider_name:PA.string})}),PA.type({webauthn:PA.type({account_key_uuid:PA.string})})])})});var ji=J(tA());var O0A=Z("web-api/api/banners.ts"),Zf;(function(A){A.Accept="A",A.Dismiss="D"})(Zf||(Zf={}));var R0A=ji.readonly(ji.type({uuid:ji.string,banner:ji.string,group:ji.number}),"BannerInstance"),D0A=ji.readonlyArray(ji.type({group:ji.number,until:ji.string}),"BannerGroupTimeouts"),$X=ji.readonly(ji.type({instances:Gj(ji.array(R0A)),snooze:qA(D0A,[])}),"BannerInstances"),wX=O0A(A=>({name:"getBannersForSession",method:"GET",url:`/api/v2/banner/instances?groups=${A}`,responseType:$X})),EC=O0A((A,j)=>({name:"performBannerAction",method:"POST",url:`/api/v2/banner/instance/${A}/status`,body:{status:j},responseType:$X}));var vl=J(tA());var $0j=Z("web-api/api/client_restrictions.ts"),pC=vl.readonly(vl.intersection([vl.type({clientName:vl.string,version:vl.string},"type"),vl.partial({osVersion:vl.string},"partial")]),"ModernAppVersion"),IX=$0j(()=>({name:"getModernAppVersions",method:"GET",url:"/api/v1/modern-app-versions",responseType:vl.array(pC)}));var H6=J(tA());var su=Z("web-api/api/cpace.ts"),T0A=H6.readonly(H6.type({msga:H6.string}),"MsgA"),C0A=H6.readonly(H6.type({msgb:H6.string}),"MsgB"),_0A=H6.readonly(H6.type({taga:H6.string}),"TagA"),S0A=H6.readonly(H6.type({tagb:H6.string}),"TagB"),w0j=H6.readonly(H6.type({msgb:H6.string,signInToken:H6.string}),"SendMsgbRequest"),I0j=H6.readonly(H6.type({tagb:H6.string,signInToken:H6.string}),"SendTagbRequest"),H0A=H6.readonly(H6.type({encCreds:$A.JweB}),"SharedCredentialBundle"),P0j=su((A,j)=>({name:"sendMsgA",method:"PUT",url:`/api/v3/device/enrollments/${j}/cpace/msga`,body:{msga:A},responseType:L})),O0j=su((A,j)=>({name:"receiveMsgA",method:"POST",url:`/api/v3/device/enrollments/${j}/cpace/msga`,body:{signInToken:A},responseType:Gj(T0A),encrypted:!1})),R0j=su((A,j,e)=>({name:"sendMsgB",method:"PUT",url:`/api/v3/device/enrollments/${e}/cpace/msgb`,body:{msgb:A,signInToken:j},responseType:L,encrypted:!1})),D0j=su(A=>({name:"receiveMsgB",method:"GET",url:`/api/v3/device/enrollments/${A}/cpace/msgb`,responseType:Gj(C0A),decryptResponse:"mustDecryptExceptUndefined"})),T0j=su((A,j)=>({name:"sendTagA",method:"PUT",url:`/api/v3/device/enrollments/${j}/cpace/taga`,body:{taga:A},responseType:L})),C0j=su((A,j)=>({name:"receiveTagA",method:"POST",url:`/api/v3/device/enrollments/${j}/cpace/taga`,body:{signInToken:A},responseType:Gj(_0A),encrypted:!1})),_0j=su((A,j,e)=>({name:"sendTagB",method:"PUT",url:`/api/v3/device/enrollments/${e}/cpace/tagb`,body:{tagb:A,signInToken:j},responseType:L,encrypted:!1})),S0j=su(A=>({name:"receiveTagB",method:"GET",url:`/api/v3/device/enrollments/${A}/cpace/tagb`,responseType:Gj(S0A),decryptResponse:"mustDecryptExceptUndefined"})),H0j=su((A,j)=>({name:"receiveSharedCredentialBundle",method:"POST",url:`/api/v3/device/enrollments/${j}/share/credentials`,body:{signInToken:A},responseType:Gj(H0A),encrypted:!1})),M0j=su((A,j)=>({name:"shareCredentialBundle",method:"PUT",url:`/api/v3/device/enrollments/${A}/share/credentials`,body:{encCreds:j},responseType:L}));var oe=J(tA());var Oq=Z("web-api/api/developer_report.ts"),M0A=oe.readonly(oe.type({count:oe.number,templateUuid:oe.string}),"DeveloperReportItemCount"),K0j=oe.readonly(oe.type({numInPrivateVaults:oe.number,numInSharedVaults:oe.number}),"DeveloperReportItems"),N0j=oe.readonly(oe.type({developerItems:oe.record(oe.string,K0j),numUsers:oe.number,numUsersCli:oe.number,numUsersSsh:oe.number,numServiceAccounts:oe.number,numServiceAccountsActive:oe.number}),"DeveloperReport"),PX=Oq(A=>({name:"getDeveloperReport",method:"POST",url:"/api/v1/report/developer",responseType:N0j,body:{filterGroups:A}})),L0j=oe.readonly(oe.type({avatar:oe.string,cliLastAccessed:oe.union([oe.string,oe.null]),developerItems:oe.readonlyArray(M0A),firstName:oe.string,lastName:oe.string,uuid:oe.string}),"DeveloperUsersReportUser"),z0j=oe.readonly(oe.type({numUsers:oe.number,users:oe.array(L0j)}),"DeveloperUsersReport"),OX=Oq((A,j,e,t,r)=>({name:"getDeveloperUsersReport",method:"POST",url:"/api/v1/report/developer/users",body:{filterGroups:e,pageNum:A,perPage:j,sortBy:t,sortDir:r},responseType:z0j})),U0j=oe.readonly(oe.type({csv:oe.string}),"DeveloperUsersReportCsv"),RX=Oq((A,j,e)=>({name:"getDeveloperUsersReportCsv",method:"POST",url:"/api/v1/report/developer/users/csv",responseType:U0j,body:{filterGroups:A,sortBy:j,sortDir:e}})),V0j=oe.readonly(oe.type({developerItems:oe.readonlyArray(M0A),uuid:oe.string,vault:oe.union([Ii,oe.null])}),"DeveloperSharedVaultsReportVault"),X0j=oe.readonly(oe.type({numSharedVaults:oe.number,sharedVaults:oe.array(V0j)}),"DeveloperSharedVaultsReport"),DX=Oq((A,j,e,t,r)=>({name:"getDeveloperSharedVaultsReport",method:"POST",url:"/api/v1/report/developer/shared-vaults",responseType:X0j,body:{filterGroups:e,pageNum:A,perPage:j,sortBy:t,sortDir:r}})),J0j=oe.readonly(oe.type({csv:oe.string}),"DeveloperSharedVaultsReportCsv"),TX=Oq((A,j,e)=>({name:"getDeveloperSharedVaultsReportCsv",method:"POST",url:"/api/v1/report/developer/shared-vaults/csv",responseType:J0j,body:{filterGroups:A,sortBy:j,sortDir:e}})),W0j=oe.readonly(oe.type({numAccounts:oe.number,avatar:oe.string,canCreateVaults:oe.boolean,isCreatorActive:oe.boolean,lastAccessedAt:oe.union([oe.string,oe.null]),name:oe.string,numDeveloperItems:oe.number,numVaults:oe.number,tokenCreatedAt:oe.string,tokenExpiry:oe.union([oe.string,oe.null]),tokenLastRotatedAt:oe.union([oe.string,oe.null]),uuid:oe.string},"DeveloperServiceAccountItem")),Q0j=oe.readonly(oe.type({numServiceAccounts:oe.number,serviceAccounts:oe.array(W0j)}),"DeveloperServiceAccountsReport"),CX=Oq((A,j,e,t)=>({name:"getDeveloperServiceAccountsReport",method:"POST",url:"/api/v1/report/developer/service-accounts",responseType:Q0j,body:{pageNum:A,perPage:j,sortBy:e,sortDir:t}})),Y0j=oe.readonly(oe.type({csv:oe.string}),"DeveloperServiceAccountsReportCsv"),_X=Oq((A,j)=>({name:"getDeveloperServiceAccountsReportCsv",method:"POST",url:"/api/v1/report/developer/service-accounts/csv",responseType:Y0j,body:{sortBy:A,sortDir:j}}));var AF=Z("web-api/api/device.ts"),Lw=AF(A=>({name:"addDevice",method:"POST",url:"/api/v1/device",body:A,encrypted:!1,responseType:L})),SX=AF((A,j)=>({name:"deleteDevice",method:"DELETE",url:j?`/api/v1/device/${A}/${j}`:`/api/v1/device/${A}`,responseType:L})),HX=AF(()=>({name:"deleteInactiveDevices",method:"DELETE",url:"/api/v1/device/old",responseType:L})),MX=AF(A=>({name:"reauthorizeDevice",method:"PUT",url:`/api/v1/device/${A}/reauthorize`,responseType:L})),KX=AF(A=>({name:"require2FAOnNextSignIn",method:"DELETE",url:`/api/v1/device/${A}/dsecret`,responseType:L})),Z0j=AF(A=>({name:"deleteAllDevices",method:"DELETE",url:`/api/v2/devices/${A}`,responseType:L}));var ag=J(tA());var K0A=Z("web-api/api/device_trust.ts"),N0A=ag.type({payload:ag.string,signature:ag.string,signedBy:ag.string},"SignDeviceTrustPublicKeyResponse"),Ayj=K0A(A=>({name:"signDeviceTrustPublicKey",method:"POST",url:"/api/v1/device-trust/sign-public-key",body:{publicKey:A},encrypted:!0,responseType:N0A})),jyj=ag.type({token:ag.string}),eyj=K0A(()=>({name:"getKolideAgentEnrollmentToken",method:"GET",url:"/api/v1/device-trust/kolide-enrollment-token",encrypted:!0,responseType:jyj}));var kd=J(tA());var L0A=Z("web-api/api/email_subscriptions.ts"),tyj=kd.readonly(kd.type({subscriptions:kd.type({newsletter:kd.boolean,events:kd.boolean,content:kd.boolean,announcements:kd.boolean,research:kd.boolean,unsubscribed:kd.boolean})}),"EmailSubscriptions"),NX=L0A(()=>({name:"getEmailSubscriptions",method:"GET",url:"/api/v1/emailsubscriptions",responseType:tyj})),LX=L0A(A=>({name:"updateEmailSubscriptions",method:"PUT",url:"/api/v1/emailsubscriptions",body:A,responseType:L}));var x6=J(tA());var mC=Z("web-api/api/email_templates.ts"),z0A=x6.type({canCustomize:x6.boolean,content:x6.string,createdAt:x6.string,description:x6.string,options:x6.string,subjectLine:x6.string,title:x6.string,updatedAt:x6.string,templateUuid:x6.string,templateType:x6.string}),U0A=x6.array(z0A),V0A=z0A,zX=mC(()=>({name:"getEmailTemplates",method:"GET",url:"/api/v1/email-templates",responseType:U0A})),UX=mC(A=>({name:"getEmailTemplateByUuid",method:"GET",url:`/api/v1/email-templates/${A}`,responseType:V0A})),VX=mC(A=>({name:"sendTestEmailWithOverrides",method:"POST",body:{recipientUserUUID:A.recipientUserUuid,templateUUID:A.templateUuid,unsafeTemplateOverride:A.templateOverride,unsafeSubjectLine:A.subjectLine},url:"/api/v1/email-templates/send-preview",responseType:x6.void})),ryj=x6.type({templateUuid:x6.string,contentOverrides:x6.string,subjectOverrides:x6.string}),ayj=x6.type({renderedHtmlCacheKey:x6.string,plaintextContent:x6.string,subjectLine:x6.string}),XX=mC(A=>({name:"GenerateEmailTemplatePreview",method:"POST",url:"/api/v1/email-templates/preview",body:{...A},responseType:ayj}));var Rq=J(tA());var nyj=Z("web-api/api/feedback.ts"),oyj=Rq.type({message:Rq.string,canContact:Rq.boolean,url:Rq.string},"Feedback"),JX=nyj(A=>({name:"sendFeedback",method:"POST",url:"/api/v1/feedback",body:A,responseType:L}));var ud=J(tA());var zw=Z("web-api/api/file.ts"),WX=ud.intersection([ud.type({fileId:ud.string},"type"),ud.partial({signingKey:$A.JwkSymKey},"partial")],"File"),X0A=42e4,J0A=A=>"fileId"in A?A.fileId:A.documentId,BC=async(A,j,e,t)=>{let r=J0A(j);if(!r)throw new CA.ClientError(CA.ClientErrorCode.missingFileId,W("Missing file ID"));let a=j.signingKey?`/api/v2/file/${t}/${e}/${encodeURIComponent(r)}`:`/api/v1/file/${encodeURIComponent(r)}`,n=await ZX(A,a);if(typeof n=="object"&&n?.byteLength===2&&ln(n)==="{}"){let o=p`Requested corrupted file ${W(r)} for vault ${W(t)} and item ${W(e)}`;throw console.error(o),Or(new xe({errorClass:p`CorruptedFileError`,message:o,severityLevel:"warning"})),new CA.ClientError(CA.ClientErrorCode.corruptedFile,W("This file is corrupted."))}return n},QX=async(A,j,e,t)=>{let r=J0A(j);if(!r)throw new CA.ClientError(CA.ClientErrorCode.missingFileId,W("Missing file ID"));let a=`/api/v2/file/${t}/${e}/${encodeURIComponent(r)}`,n=await ZX(A,a);if(typeof n=="object"&&n?.byteLength===2&&ln(n)==="{}"){let o=p`Requested corrupted file ${W(r)} for vault ${W(t)} and item ${W(e)}`;throw console.error(o),Or(new xe({errorClass:p`CorruptedFileError`,message:o,severityLevel:"warning"})),new CA.ClientError(CA.ClientErrorCode.corruptedFile,W("This file is corrupted."))}return n},YX=zw((A,j)=>({name:"getFileIdsFromItemUuid",method:"GET",url:`/api/v1/files/${j}/${A}`,responseType:ud.array(ud.string)})),gC=zw(A=>({name:"getFileKey",method:"GET",url:`/api/v3/filekey/${A}`,responseType:WX})),hC=zw(A=>({name:"uploadFile",method:"POST",url:"/api/v2/file",body:A,options:{timeout:X0A,dataType:"arraybuffer"},responseType:WX,encrypted:!1,decryptResponse:"mustDecrypt"})),ZX=async(A,j)=>{let e=await iyj(A,j);return await syj(A,e)},iyj=zw(A=>({name:"getFileRedirectUrl",method:"GET",url:A,options:{responseType:"text",headers:{"X-Use-302-Redirect":"false"}},responseType:ud.string,encrypted:!1})),syj=zw(A=>({name:"getFileFromUrl",method:"GET",url:A,options:{responseType:"arraybuffer",timeout:X0A},responseType:r$,encrypted:!1}));var Wa=J(tA());var Dq;(function(A){A.Country="country",A.Continent="continent",A.Ip="ip",A.Anonymous="anonymous",A.All="all"})(Dq||(Dq={}));var Tq;(function(A){A.Allow="allow",A.Report="report",A.Challenge="challenge",A.Deny="deny",A.Continue="continue"})(Tq||(Tq={}));var Cq;(function(A){A.Tor="T",A.Vpn="V",A.Proxy="P",A.CloudProvider="C"})(Cq||(Cq={}));var lu;(function(A){A.Group="group",A.Global="global"})(lu||(lu={}));var W0A=Z("web-api/api/firewall_rules.ts"),Q0A=Wa.readonly(Wa.intersection([Wa.type({type:pe(lu,"FirewallRuleScopeType")},"type"),Wa.partial({uuid:Wa.string},"partial")]),"FirewallRuleScope"),qC=Wa.readonly(Wa.intersection([Wa.type({type:pe(Dq,"FirewallRuleType"),action:pe(Tq,"FirewallRuleAction"),value:Wa.readonly(qA(Wa.array(Wa.union([pe(Cq,"FirewallRuleAnonymousType"),Wa.string])),[]))},"type"),Wa.partial({scope:Wa.readonlyArray(Q0A)},"partial")]),"FirewallRule"),xC=Wa.readonly(Wa.type({rules:Wa.union([Wa.readonlyArray(qC),Wa.null])}),"FirewallRules"),AJ=W0A(A=>({name:"postFirewallRules",method:"POST",url:"/api/v1/firewallrules",body:A,responseType:L})),jJ=W0A(()=>({name:"getFirewallRules",method:"GET",url:"/api/v1/firewallrules",responseType:xC}));var Dr=J(tA());var Ve=J(tA());var cu=Z("web-api/api/vault_item.ts"),Y0A=Ve.readonly(Ve.type({fileId:Ve.string,signature:Ve.string}),"FileReference"),bk=Ve.intersection([Ve.type({uuid:Ve.string,templateUuid:Ve.string,itemVersion:Ve.number,encryptedBy:Ve.string,encOverview:$A.JweB},"type"),Ve.partial({faveIndex:Ve.number,trashed:Ve.string,createdAt:Ve.string,updatedAt:Ve.string,changerUuid:Ve.string,packageUuid:Ve.string,encDetails:$A.JweB,fileReferences:Ve.readonlyArray(Y0A)},"partial")],"VaultItem"),eJ=Ve.intersection([Ve.type({contentVersion:Ve.number,batchComplete:Ve.boolean},"type"),Ve.partial({items:Ve.readonlyArray(bk),deletedItemUuids:Ve.readonlyArray(Ve.string)},"partial")],"ItemsResponse"),tJ=cu(A=>({name:"getVaultItemsOverviews",method:"GET",url:`/api/v1/vault/${A}/items/overviews`,responseType:eJ})),rJ=cu((A,j)=>({name:"getVaultItems",method:"GET",url:`/api/v2/vault/${A}/${j}/items`,responseType:eJ})),Z0A=Ve.readonly(Ve.type({item:bk}),"ItemDetailResponse"),aJ=cu((A,j)=>({name:"getVaultItemDetails",method:"GET",url:`/api/v1/vault/${A}/item/${j}`,responseType:Z0A})),nJ=cu((A,j)=>({name:"getVaultItemVersion",method:"GET",url:`/api/v1/vault/${A}/itemversion/${j}`,responseType:Ve.number})),AyA=Ve.readonly(Ve.type({changerUUID:Ve.string,changerFullName:Ve.string,changerEmail:Ve.string,changerAvatar:Ve.string,updatedAt:Ve.string,itemVersion:Ve.number}),"ItemHistoryMetadata"),jyA=Ve.readonly(Ve.type({history:Ve.array(AyA)}),"ItemHistoryResponse"),oJ=cu((A,j)=>({name:"getVaultItemHistory",method:"GET",url:`/api/v1/vault/${A}/item/${j}/history`,responseType:jyA})),iJ=cu((A,j,e)=>({name:"getPreviousVersionOfItem",method:"GET",url:`/api/v1/vault/${A}/item/${j}/history/${e}`,responseType:bk})),lyj=Ve.type({retentionDays:Ve.number,since:Ve.string,items:Ve.array(bk)},"DeletedVaultItemsResponse"),sJ=cu(A=>({name:"getDeletedVaultItems",method:"GET",url:`/api/v2/vault/${A}/items/deleted`,responseType:lyj})),lJ=cu((A,j)=>({name:"postPurgeDeletedVaultItems",method:"POST",url:`/api/v2/vault/${A}/items/deleted/purge`,body:{itemUuids:j},responseType:L})),cJ=cu((A,j)=>({name:"deleteVaultItemHistory",method:"DELETE",url:`/api/v1/vault/${A}/item/${j}/history/all`,responseType:L})),eyA=Ve.type({contentVersion:Ve.number,updatedItems:qA(Ve.record(Ve.string,Ve.number),{}),failedItems:qA(Ve.record(Ve.string,Ve.number),{})},"PatchVaultItemsResponse"),dJ=cu((A,j,e)=>({name:"patchVaultItems",method:"PATCH",url:`/api/v3/vault/${A}/${j}/items`,body:e,responseType:eyA}));var vC=Z("web-api/api/insights.ts"),Cp;(function(A){A.Filter="filter",A.Attribute="sort-by",A.Direction="sort-direction"})(Cp||(Cp={}));var kJ;(function(A){A.Email="email",A.BreachesCount="breaches-count",A.BreachName="breach-name",A.Date="date",A.MembersCount="members-count",A.Invited="invited"})(kJ||(kJ={}));var uJ;(function(A){A.VaultName="vault-name",A.VaultType="vault-type",A.ItemsCount="items-count",A.IssuesCount="issues-count"})(uJ||(uJ={}));var EJ;(function(A){A.TeamMember="team-member",A.AccessDate="access-date",A.JoinDate="join-date"})(EJ||(EJ={}));var tyA=Dr.readonly(Dr.type({noLinkedAccountCount:Dr.number,notUsing1PasswordCount:Dr.number,notUsingPrivateCount:Dr.number,teamMembersCount:Dr.number,guestUsersCount:Dr.number}),"InsightsTeamReportOverview"),mJ=vC(()=>({name:"getInsightsTeamReportOverview",method:"GET",url:"/api/v1/insights/teamusage/overview",responseType:tyA})),ryA=Dr.readonly(Dr.type({uuid:Dr.string,email:Dr.string,name:Dr.string,createdAt:Dr.string,avatar:Gj(Dr.string),lastAuthAt:Gj(Dr.string),isNotified:Dr.boolean,numGroups:Gj(Dr.number),privateVaultItems:Gj(Dr.number)}),"InsightsTeamReportUser"),Uw;(function(A){A.PageNumber="page-number",A.ItemsPerPage="items-per-page"})(Uw||(Uw={}));var pJ;(function(A){A.Signins="no-recent-usage",A.FamilyAccount="no-family-accounts",A.PrivateVault="no-private-vault-usage"})(pJ||(pJ={}));var ayA=Dr.readonly(Dr.type({users:Dr.readonlyArray(ryA)}),"InsightsTeamReport"),BJ=vC((A,j,e,t,r)=>({name:"getInsightsTeamReport",method:"GET",url:`/api/v1/insights/teamusage${nt({[Cp.Filter]:A,[Uw.PageNumber]:j,[Uw.ItemsPerPage]:e,[Cp.Attribute]:t,[Cp.Direction]:r})}`,responseType:ayA})),nyA=Dr.readonly(Dr.type({csv:Dr.string}),"InsightsTeamReportCsv"),gJ=vC((A,j,e)=>({name:"getInsightsTeamReportCsv",method:"GET",url:"/api/v1/insights/teamusage/csv"+nt({[Cp.Filter]:A,[Cp.Attribute]:j,[Cp.Direction]:e}),responseType:nyA})),oyA=Dr.readonly(Dr.type({vaultItem:bk,timesUsedLastWeek:Dr.number,peopleWithAccessCount:Dr.number,vaultUuid:Dr.string}),"InsightsTopSharedCredential"),cyj=Dr.readonly(Dr.type({topSharedCredentials:Dr.readonlyArray(oyA)}),"InsightsTopSharedCredentialsResponse"),hJ=vC(()=>({name:"getInsightsTopSharedCredentials",method:"GET",url:"/api/v1/report/shared-credentials/",responseType:cyj}));var Rj=J(tA());var Jt=J(tA());var Xt=J(tA());var ei=J(tA());var du=ei.type({token:ei.string,publicKey:ei.string},"signInTokenDetails"),dyj=ei.readonly(ei.type({encCredentials:xf,v:ei.literal(1)}),"EncryptedDeviceCredentials"),_p=ei.readonly(ei.type({encCredentials:Fa,v:ei.literal(2)}),"EncryptedCredentialBundle"),kyj=ei.type({requestId:ei.number,accountUuid:ei.string,userUuid:ei.string},"TrustedDeviceUpgradeEventRequest");var iyA=Z("web-api/api/oidc.ts"),uyj=Xt.readonly(Xt.intersection([Xt.type({authRedirect:Xt.string}),Xt.partial({newEmail:Xt.string})]),"StartOidcAuthResponse"),qJ=iyA(A=>({name:"startOidcAuth",method:"POST",url:"/api/v3/auth/sso/oidc/start",body:A,options:{headers:{"X-AgileBits-Client":Pr.clientDescriptor}},responseType:uyj,encrypted:!1})),Eyj=Xt.readonly(Xt.type({accountUuid:Xt.string,userUuid:Xt.string,email:Xt.string,sessionUuid:Xt.string}),"VerifyOidcResponseUserData"),pyj=Xt.union([Xt.literal("found"),Xt.literal("must_enroll_initial_device"),Xt.literal("device_not_enrolled"),Xt.literal("sso_migration_deadline_passed")],"VerifyOidcResponseType"),syA=Xt.intersection([Xt.type({signInTokenDetails:du},"signInTokenDetails"),Xt.partial({encSignInRefreshTokenDetails:xf},"encSignInRefreshTokenDetails")]),jF=Xt.intersection([_p,Xt.readonly(Xt.type({accountKeyFormat:Xt.string,accountKeyUuid:Xt.string,userAuth:Yf}),"extra")],"CredentialBundleAuthResponse"),myj=Xt.intersection([Xt.type({type:pyj},"type"),Xt.type({user:Eyj},"user"),Xt.partial({auth:jF},"auth"),Xt.type({ssoAuth:syA},"ssoAuth")],"VerifyOidcResponse"),xJ=iyA((A,j,e,t)=>({name:"verifyOIDC",method:"POST",url:"/api/v3/auth/sso/oidc/verify",options:{headers:{"X-AgileBits-Client":Pr.clientDescriptor}},encrypted:!1,body:{code:A,state:j,device:e,signInRefreshTokenClientKey:t},responseType:myj})),Byj=Xt.readonly(Xt.type({b5_state:Xt.string,redirect_uuid:Xt.string}),"NativeOidcState"),gyj=Xt.readonly(Xt.type({b5State:Xt.string,accountUuid:Xt.string,clientShortCode:Xt.string}),"SsoOidcState");var VA=J(tA());var eF=Z("web-api/api/webauthn.ts"),GC=VA.literal("public-key"),lyA=VA.literal("ble"),cyA=VA.literal("hybrid"),dyA=VA.literal("cable"),kyA=VA.literal("internal"),uyA=VA.literal("nfc"),EyA=VA.literal("usb"),pyA=VA.literal("discouraged"),myA=VA.literal("preferred"),ByA=VA.literal("required"),gyA=VA.type({type:GC,id:VA.string,transports:Gj(VA.array(VA.union([lyA,cyA,dyA,kyA,uyA,EyA],"WebauthnCredentialDescriptorType")))},"WebauthnCredentialDescriptor"),hyj=VA.type({appid:Gj(VA.string),credProps:Gj(VA.boolean),hmacSecret:Gj(VA.boolean)},"WebauthnCredentialExtensionClientInputs"),hyA=VA.type({challenge:VA.string,timeout:Gj(VA.number),rpId:Gj(VA.string),allowCredentials:Gj(VA.array(gyA)),userVerification:Gj(VA.union([pyA,myA,ByA])),extensions:Gj(hyj)},"WebauthnPublicKeyRequest"),vJ=VA.readonly(VA.type({publicKey:hyA},"WebauthnAssertion")),qyA=VA.readonly(VA.type({alg:VA.number,type:GC}),"PublicKeyCredentialParameters"),xyA=VA.readonly(VA.intersection([VA.type({name:VA.string}),VA.partial({id:VA.string})]),"PublicKeyCredentialRpEntity"),vyA=VA.readonly(VA.type({displayName:VA.string,id:VA.string,name:VA.string}),"PublicKeyCredentialUserEntity"),GyA=VA.keyof({direct:void 0,enterprise:void 0,indirect:void 0,none:void 0}),fyA=VA.keyof({ble:void 0,hybrid:void 0,internal:void 0,nfc:void 0,usb:void 0}),FyA=VA.keyof({"cross-platform":void 0,platform:void 0}),GJ=VA.keyof({discouraged:void 0,preferred:void 0,required:void 0}),byA=GJ,yyA=VA.readonly(VA.partial({authenticatorAttachment:FyA,requireResidentKey:VA.boolean,residentKey:GJ,userVerification:byA}),"AuthenticatorSelectionCriteria"),$yA=VA.readonly(VA.intersection([VA.type({id:r$,type:GC}),VA.partial({transports:VA.array(fyA)})]),"PublicKeyCredentialDescriptor"),wyA=VA.readonly(VA.partial({appId:VA.string,credProps:VA.boolean,hmacCreateSecret:VA.boolean}),"AuthenticationExtensionsClientInputs"),IyA=VA.readonly(VA.intersection([VA.type({challenge:VA.string,pubKeyCredParams:VA.array(qyA),rp:xyA,user:vyA}),VA.partial({attestation:GyA,authenticatorSelection:yyA,excludeCredentials:VA.array($yA),extensions:wyA,timeout:VA.number})]),"PublicKeyCredentialCreationOptions"),PyA=VA.readonly(VA.type({aborted:VA.boolean,onabort:VA.Function,reason:VA.any,throwIfAborted:VA.Function,addEventListener:VA.Function,removeEventListener:VA.Function}),"AbortSignal"),fC=VA.readonly(VA.partial({publicKey:IyA,signal:PyA}),"CredentialCreationOptions"),OyA=VA.exact(VA.type({clientDataJSON:VA.string,attestationObject:Gj(VA.string),transports:Gj(VA.array(VA.string))})),qyj=VA.exact(VA.type({id:VA.string,type:VA.string,rawId:VA.string,response:OyA}),"CredentialCreationResponse"),RyA=VA.exact(VA.type({clientDataJSON:VA.string,authenticatorData:Gj(VA.string),signature:Gj(VA.string),userHandle:Gj(VA.string)})),xyj=VA.exact(VA.type({id:VA.string,type:VA.string,rawId:VA.string,response:RyA}),"CredentialAssertionResponse"),vyj=VA.readonly(VA.type({accountUuid:VA.string,userUuid:VA.string,email:VA.string,sessionUuid:VA.string}),"VerifyPasskeyResponseUserData"),Gyj=VA.union([VA.literal("found"),VA.literal("must_enroll_initial_device"),VA.literal("device_not_enrolled")],"VerifyPasskeyResponseType"),fyj=VA.type({type:Gyj,user:vyj,auth:Gj(jF),signInTokenDetails:du},"VerifyPasskeyResponse"),Fyj=VA.type({challenge:fC},"RegisterWebauthnCredentialResponse"),FC=VA.readonly(VA.type({name:VA.string,createdAt:VA.string,updatedAt:VA.string,credentialId:VA.string})),fJ=eF((A,j,e,t)=>({name:"verifyPasskey",method:"POST",url:"/api/v3/auth/passkey/verify",options:{headers:{"X-AgileBits-Client":Pr.clientDescriptor}},encrypted:!1,body:{userUuid:A,device:j,assertion:e,keyId:t},responseType:fyj})),FJ=eF(()=>({name:"registerWebauthnCredential",method:"POST",url:"/api/v2/auth/webauthn/register",encrypted:!0,responseType:Fyj})),bJ=eF((A,j)=>({name:"verifyWebauthnCredentialAttestation",method:"POST",url:"/api/v2/auth/webauthn/register/challenge",encrypted:!0,body:{name:A,attestation:j},responseType:FC})),DyA=VA.readonly(VA.type({credentials:VA.array(FC,"credentials")})),yJ=eF(A=>({name:"getUserCredentials",method:"GET",url:`/api/v2/users/${A}/credentials`,responseType:DyA})),$J=eF((A,j)=>({name:"deleteUserCredential",method:"DELETE",url:`/api/v2/users/${A}/credentials/${j}`,responseType:L})),wJ=eF((A,j)=>({name:"updateUserCredentials",method:"PATCH",url:`/api/v2/users/credential/${A}`,encrypted:!0,body:{name:j},responseType:FC}));var bC=Z("web-api/api/auth_methods.ts"),yC="PASSWORD+SK",Vw="OIDC",Xw="WEBAUTHN",TyA=Jt.type({type:Jt.literal(yC)},"PasswordAuthMethod"),CyA=Jt.intersection([Jt.type({type:Jt.literal(Vw)},"type"),Jt.partial({provider:Jt.string,iconUrl:Jt.string},"partial")],"OidcAuthMethod"),_yA=Jt.type({type:Jt.literal(Xw),assertion:vJ},"type"),ku=Jt.readonly(Jt.union([TyA,CyA,_yA]),"AuthMethod"),byj=Jt.intersection([Jt.readonly(Jt.type({authMethods:qA(Jt.array(ku),[])}),"authMethods"),Jt.partial({userUuid:Jt.string},"userUuid"),Jt.partial({signInAddress:Jt.string},"signInAddress")],"AuthMethodResponse"),IJ=bC((A,j)=>({name:"getAuthMethods",method:"POST",url:"/api/v2/auth/methods",body:{email:A,userUuid:j},responseType:byj,encrypted:!1})),SyA=Jt.readonly(Jt.type({method:Jt.string,alg:Jt.string,iterations:Jt.number,salt:Jt.string,v:Jt.string}),"ReadOnlyAuth"),yyj=Jt.readonly(Jt.partial({authOnly:Jt.boolean,landingPage:Jt.string}),"SsoSignInOptions"),PJ=bC((A,j,e)=>({name:"addCredentialBundle",method:"POST",url:"/api/v3/user/devicecredentials",body:{deviceCredentials:A,keyId:j,enrollmentUuid:e},responseType:L})),$yj=Jt.readonly(Jt.type({deviceCredentials:_p,auth:SyA,activeKeyset:ns}),"SetUpCredentialBundleRequest"),HyA=Jt.readonly(Jt.type({accountKeyUuid:Jt.string}),"SetUpCredentialBundleResponse"),OJ=bC((A,j,e)=>({name:"setupCredentialBundle",method:"PUT",url:"/api/v3/user/devicecredentials",body:{deviceCredentials:A,auth:j,activeKeyset:e},responseType:HyA})),RJ=bC(A=>({name:"getEncryptedCredentialBundle",method:"GET",url:`/api/v3/auth/devicecredentials?keyUuid=${A}`,responseType:jF}));var Gl=Z("web-api/api/invitation.ts"),wyj=Rj.readonly(Rj.type({secret:Rj.string,accountName:Rj.string}),"TeamInvitationDetails"),Jw=Rj.readonly(Rj.type({uuid:Rj.string,token:Rj.union([Rj.string,Rj.undefined]),accountUuid:Rj.string,accountName:Rj.union([Rj.string,Rj.undefined]),accountType:Rj.union([Rj.string,Rj.undefined]),accountHost:Rj.string,disableEmergencyKit:qA(Rj.boolean,!1),email:Rj.string,language:Rj.string,senderFullName:Rj.union([Rj.string,Rj.undefined]),senderEmail:Rj.union([Rj.string,Rj.undefined]),state:Rj.union([Rj.string,Rj.undefined]),type:Rj.union([Rj.string,Rj.undefined]),sentAt:Rj.union([Rj.string,Rj.undefined]),timeout:Rj.union([Rj.number,Rj.undefined]),acceptedAt:Rj.union([Rj.string,Rj.undefined]),revokedAt:Rj.union([Rj.string,Rj.undefined]),migratingFrom:Rj.union([Rj.string,Rj.undefined]),accountUsesNewKeysets:Rj.boolean,passwordRules:Rj.string,iconSet:Gj(Jf),accountAuthMethods:qA(Rj.array(ku),[]),isManaged:qA(Rj.boolean,!1),extensionFirstForSso:qA(Rj.boolean,!1),extensionAllowedPolicyFeatureEnabled:qA(Rj.boolean,!1),b2bExtensionFirstGuidedSetupEnabled:qA(Rj.boolean,!1)}),"InvitationDetails"),Iyj=Rj.readonly(Rj.type({email:Rj.string,reason:Rj.union([Rj.literal("is_existing_user"),Rj.literal("is_existing_guest")])}),"FailedInvites"),Pyj=Rj.readonly(Rj.type({successfulInvites:Rj.array(Jw),failedInvites:Rj.array(Iyj)}),"InviteResponse"),Oyj=Rj.readonly(Rj.type({state:Rj.string,inviteUuid:Rj.union([Rj.string,Rj.undefined]),userUuid:Rj.union([Rj.string,Rj.undefined]),vaultAcl:Rj.union([Rj.number,Rj.undefined]),vaultUuid:Rj.union([Rj.string,Rj.undefined]),shouldConfirm:Rj.boolean}),"InviteVaultV2"),DJ=Gl((A,j)=>({name:"lookUpInvitation",method:"GET",url:`/api/v1/invite/${A}/${j}`,responseType:Jw,encrypted:!1})),TJ=Gl(A=>({name:"lookUpTeamInvitation",method:"GET",url:`/api/v1/teaminvite/${A}`,encrypted:!1,responseType:wyj})),CJ=Gl(()=>({name:"getPendingInvitations",method:"GET",url:"/api/v1/invites",responseType:Rj.array(Jw)})),_J=Gl(A=>({name:"inviteViaSlack",method:"POST",url:"/api/v1/invite/slack",body:A,options:{timeout:6e4},responseType:Rj.array(Jw)})),SJ=Gl((A,j,e)=>({name:"inviteUsersViaEmail",method:"POST",url:`/api/v1/invite${e?`?source=${e}`:""}`,body:{invites:A,type:j},responseType:Rj.array(Pyj)})),HJ=Gl(A=>({name:"teamInvitePerson",method:"POST",url:"/api/v1/teaminvite",body:A,responseType:L,encrypted:!1})),MJ=Gl(A=>({name:"resendInvitations",method:"GET",url:`/api/v1/invite/resend/${A.join(",")}`,responseType:Rj.array(Jw)})),KJ=Gl(A=>({name:"revokeInvitations",method:"DELETE",url:`/api/v1/invite/${A.join(",")}`,responseType:L})),NJ=Gl(A=>({name:"generateReplyToConfirmation",method:"POST",url:"/api/v1/invite/replyto/begin",body:{email:A},responseType:L})),LJ=Gl((A,j)=>({name:"completeReplyToConfirmation",method:"POST",url:"/api/v1/invite/replyto/complete",body:{token:j,email:A},responseType:L})),Ryj=Rj.readonly(Rj.type({inviteSecret:Rj.string}),"RegenerateSignUpLinkResponse"),zJ=Gl(()=>({name:"regenerateSignUpLink",method:"PUT",url:"/api/v1/account/teaminvite/regenerate",responseType:Ryj})),UJ=Gl(A=>({name:"getInviteVaults",method:"GET",url:`/api/v2/invitevault${nt(A)}`,responseType:Rj.array(Oyj)})),VJ=Gl(A=>({name:"updateInviteVault",method:"PUT",url:"/api/v2/invitevault",body:A,responseType:L})),XJ=Gl(A=>({name:"deleteInviteVault",method:"DELETE",url:"/api/v2/invitevault",body:A,responseType:L}));var Dyj=Z("web-api/api/item_usage.ts"),Ww;(function(A){A.Fill="fill",A.SelectSsoProvider="select-sso-provider",A.EnterItemEditMode="enter-item-edit-mode",A.Export="export",A.Share="share",A.SecureCopy="secure-copy",A.Reveal="reveal"})(Ww||(Ww={}));var Tyj=Dyj(A=>({name:"reportItemUsage",method:"POST",url:"/api/v3/user/itemusage",body:A,responseType:L}));var gj=J(tA());var Sp=Z("web-api/api/item_share.ts"),uu;(function(A){A.AnyoneWithTheLink="P",A.OnlySomePeople="A"})(uu||(uu={}));var Qw=pe(uu,"ItemShareAvailableTo"),yk;(function(A){A.Email="E",A.Domain="D"})(yk||(yk={}));var MyA=pe(yk,"ItemShareRecipientType"),Cyj=gj.intersection([gj.type({allowed:gj.boolean,maxSize:gj.number}),gj.partial({allowedTypes:gj.readonlyArray(Qw),allowedRecipientTypes:gj.readonlyArray(MyA),maxExpiry:gj.number,defaultExpiry:gj.number,maxViews:gj.union([gj.number,gj.undefined])})]),_yj=gj.readonly(gj.type({allowedTypes:gj.readonlyArray(Qw),allowedRecipientTypes:gj.readonlyArray(MyA),maxExpiry:gj.number,defaultExpiry:gj.number,maxViews:gj.union([gj.number,gj.undefined]),files:Cyj}),"ItemSharePreflightResponse"),$C;(function(A){A.Active="A",A.Inactive="I"})($C||($C={}));var Syj=pe($C,"ItemShareState"),Hyj=gj.readonly(gj.type({type:gj.literal(yk.Email),email:gj.string}),"ItemShareRecipientEmail"),Myj=gj.readonly(gj.type({type:gj.literal(yk.Domain),domain:gj.string}),"ItemShareRecipientDomain"),JJ=gj.union([Hyj,Myj]),Kyj=gj.readonly(gj.type({uuid:gj.string,state:Syj,itemVersion:gj.number,createdAt:co,expiresAt:co,sharedBy:gj.readonly(gj.type({uuid:gj.string,name:gj.union([gj.string,gj.undefined])})),encShareSecret:gj.union([Fa,gj.undefined]),url:gj.string,type:Qw,recipients:gj.union([gj.readonlyArray(JJ),gj.undefined]),viewCount:gj.number,maxViews:gj.union([gj.number,gj.undefined]),canDelete:gj.boolean})),Nyj=gj.readonly(gj.type({shares:gj.readonlyArray(Kyj)})),WJ=Sp((A,j)=>({name:"getSharedHistoryForItem",method:"GET",url:`/api/v4/itemshare/${A}/${j}`,responseType:Nyj})),QJ=Sp((A,j)=>({name:"getItemSharePreflight",method:"GET",url:`/api/v4/itemshare/preflight/${A}/${j}`,responseType:_yj})),Lyj=gj.readonly(gj.type({url:gj.string}),"CreateItemShareResponse"),YJ=Sp(A=>({name:"createItemShare",method:"POST",url:"/api/v4/itemshare",body:A,responseType:Lyj})),zyj=gj.readonly(gj.type({rejectedRecipients:gj.readonlyArray(JJ)})),ZJ=Sp(A=>({name:"validateItemShareRecipients",method:"POST",url:"/api/v4/itemshare/validate-recipients",body:A,responseType:zyj})),Uyj=gj.readonly(gj.type({uuid:gj.string,ip:gj.string,accessorEmail:gj.string,timestamp:co,action:gj.string,location:gj.union([gj.readonly(gj.type({city:gj.string,country:gj.string,countryCode:gj.string}),"ItemShareAuditLocation"),gj.undefined])}),"ItemShareAuditEvent"),Vyj=gj.readonly(gj.type({createdAt:co,expiresAt:co,maxViews:gj.union([gj.number,gj.undefined]),state:gj.string,accessType:Qw,sharedBy:gj.string,recipients:qA(gj.readonlyArray(JJ),[]),events:qA(gj.readonlyArray(Uyj),[])}),"ItemShareAuditDetailsResponse"),AW=Sp(A=>({name:"getItemShareAuditDetails",method:"GET",url:`/api/v3/itemshare/audit/${A}`,responseType:Vyj})),Xyj=gj.readonly(gj.type({token:gj.string,email:gj.string,expiresAt:co}),"ShareSeviceAuthTokenResponse"),jW=Sp(()=>({name:"getShareSeviceAuthToken",method:"GET",url:"/api/v3/itemshare/token",responseType:Xyj})),eW=Sp((A,j,e)=>({name:"deleteItemShare",method:"DELETE",url:`/api/v3/itemshare/${A}/${j}/${e}`,responseType:L})),tW=Sp(A=>({name:"updateAccountShareSettings",method:"POST",url:"/api/v3/itemshare/admin/settings",body:A,responseType:L})),Jyj=gj.readonly(gj.type({allowedDomains:qA(gj.readonlyArray(gj.string),[]),allowedTypes:gj.readonlyArray(Qw),enforceAllowedDomains:gj.boolean,allowFiles:gj.union([gj.boolean,gj.undefined]),defaultExpiry:gj.number,maxExpiry:gj.number,maxViews:gj.union([gj.number,gj.undefined]),allowTeamJoin:gj.boolean})),rW=Sp(()=>({name:"getAccountShareSettings",method:"GET",url:"/api/v3/itemshare/admin/settings",responseType:Jyj}));var ng=J(tA());var Qyj=Z("web-api/api/keyset.ts"),KyA=ng.readonly(ng.type({version:ng.number,keysets:ng.readonlyArray(ns)}),"UserKeysets"),aW=Qyj(()=>({name:"getKeysets",method:"GET",url:"/api/v2/account/keysets",responseType:KyA}));var Dn=J(tA());var Yyj=Z("web-api/api/kolide.ts"),NyA=Dn.readonly(Dn.type({name:Dn.string,include_url_patterns:Dn.array(Dn.string),exclude_url_patterns:Dn.array(Dn.string)}),"KolideApp"),Zyj=Dn.record(Dn.string,NyA,"KolideAppList"),A$j=Dn.readonly(Dn.type({app_list:Zyj,enabled:Dn.boolean,generated_at:Dn.string}),"KolidePayload"),j$j=Dn.readonly(Dn.type({account_uuid:Dn.string,definition:A$j}),"KolideAppsResponse"),e$j=Yyj(()=>({name:"getKolideApps",method:"GET",url:"/api/v2/policies/device-trust",responseType:j$j}));var Lj=J(tA());var WyA=J(tA());var nW=J(lq());var gc=A=>new nW.BigInteger(A.toString(10),10),wC=A=>Number.parseInt(A.toString(10),10),LyA=(A,j)=>gc(A).and(gc(j)).equals(gc(j)),zyA=(A,j)=>gc(A).and(gc(j)).compareTo(nW.BigInteger.ZERO)>0,UyA=(A,j)=>wC(gc(A).or(gc(j))),VyA=(A,j)=>wC(gc(A).xor(gc(j))),XyA=(A,j)=>wC(gc(A).andNot(gc(j))),JyA=A=>wC(xi(A,(j,e)=>j.or(gc(e)),gc(0)));var Kj;(function(A){A.codec=WyA.number,A.empty=()=>0,A.equals=(j,e)=>j===e,A.fromHex=j=>Number.parseInt(j,16),A.toHex=j=>j.toString(16),A.combine=JyA,A.disable=XyA,A.enable=UyA,A.includes=LyA,A.includesAny=zyA,A.toggle=VyA})(Kj||(Kj={}));var xr=Kj.fromHex,tt={BelongsToTeamMembersGroup:xr("000000001"),BelongsToOwnersGroup:xr("000000002"),BelongsToAdminsGroup:xr("000000004"),BelongsToRecoveryGroup:xr("000000008"),BelongsToUserDefinedGroup:xr("000000010"),BelongsToSecurityGroup:xr("000000020"),BelongsToExternalAccountManagersGroup:xr("000000040"),BelongsToProvisioningGroup:xr("000000080"),Recover:xr("000000100"),ViewAdminConsole:xr("000000200"),ViewActivities:xr("000000400"),ViewTemplates:xr("000000800"),ViewPeople:xr("000001000"),AddPerson:xr("000002000"),ChangePersonName:xr("000004000"),SuspendPerson:xr("000008000"),DeletePerson:xr("000010000"),ViewVaults:xr("000020000"),UsePersonalVault:xr("000040000"),CreateVault:xr("000080000"),ManageTemplates:xr("000100000"),ManageVaults:xr("000200000"),ViewGroups:xr("000400000"),ManageGroups:xr("000800000"),ViewTeamSettings:xr("001000000"),ChangeTeamSettings:xr("002000000"),ChangeTeamAttrs:xr("004000000"),ChangeTeamDomain:xr("008000000"),SuspendTeam:xr("010000000"),DeleteTeam:xr("020000000"),ViewBilling:xr("040000000"),ManageBilling:xr("080000000"),ProvisionPeople:xr("10000000000"),BeginRecovery:xr("80000000000"),ViewSecurityReports:xr("20000000000"),BackofficeView:xr("0100000000000"),BackofficeViewAdvanced:xr("0200000000000"),BackofficeUpdate:xr("0400000000000"),BackofficeChangeDomain:xr("0800000000000"),BackofficeSuspendTeam:xr("1000000000000"),BackofficeDeleteTeam:xr("2000000000000")},r$j={Recovery:tt.Recover,ViewAdminConsole:Kj.combine([tt.ViewAdminConsole,tt.ViewActivities,tt.ViewPeople,tt.ViewVaults,tt.ViewTemplates,tt.ViewGroups,tt.ViewTeamSettings]),ManagePeople1:Kj.combine([tt.AddPerson,tt.DeletePerson]),ManagePeople2:tt.ChangePersonName,SuspendPerson:tt.SuspendPerson,CreateVault:tt.CreateVault,ManageAllVaults:tt.ManageVaults,ManageAllGroups:tt.ManageGroups,ManageTeamSettings:Kj.combine([tt.ChangeTeamSettings,tt.ChangeTeamAttrs,tt.ChangeTeamDomain,tt.ManageTemplates]),DeleteTeam:Kj.combine([tt.SuspendTeam,tt.DeleteTeam]),ManageBilling:Kj.combine([tt.ViewBilling,tt.ManageBilling]),ProvisionPeople:Kj.combine([tt.ProvisionPeople,tt.BeginRecovery]),ViewSecurityReports:tt.ViewSecurityReports},IC=Kj.combine([tt.Recover,tt.ManageGroups,tt.ManageVaults]),oW=Kj.combine([tt.BelongsToOwnersGroup,tt.BelongsToAdminsGroup,tt.BelongsToRecoveryGroup,IC]),Ms;(function(A){A.ViewConsole="view-console",A.Add="add",A.Unlink="unlink",A.Launch="launch",A.Edit="edit",A.FreezeUnfreeze="freeze-unfreeze"})(Ms||(Ms={}));var _q=Z("web-api/api/managed_account.ts"),og=Lj.readonly(Lj.type({kid:Lj.string,encryptedBy:Lj.string,encKey:$A.JweB},"ManagedAccountKey")),ti;(function(A){A.Active="A",A.Unlinked="U"})(ti||(ti={}));var PC;(function(A){A.Full="F",A.Limited="L"})(PC||(PC={}));var tF=Lj.readonly(Lj.intersection([Lj.type({uuid:Lj.string,name:Lj.string}),Lj.partial({state:pe(ti,"ManagedAccountState"),domain:Lj.string,avatar:Lj.string,website:Lj.string,country:Lj.string,region:Lj.string,activeSeats:Lj.number,startedManagingDate:Lj.string,lastLaunchedAt:Lj.string,acl:Lj.array(pe(Ms,"MspPermissions")),managedAccountKey:og})]),"ManagedAccount"),a$j=Lj.readonly(Lj.intersection([Lj.type({name:Lj.string,country:Lj.string}),Lj.partial({website:Lj.string,region:Lj.string})]),"CompanyDetails"),M9e=Lj.partial({name:Lj.string,country:Lj.string,website:Lj.string,region:Lj.string},"UpdateCompanyDetails"),K9e=Lj.readonly(Lj.type({companyDetails:a$j,managedAccountKey:og,eamUserKeyset:$A.KeysetCiphertext},"CreateManagedAccountRequest")),N9e=Lj.readonly(Lj.type({managedAccountUuid:Lj.string})),n$j=Lj.readonly(Lj.type({sessionUuid:Lj.string,sessionKey:$A.JwkSymKey,managedAccountKey:og,encryptedByKey:$A.KeysetCiphertext,notifier:Lj.string},"LaunchSessionResponse")),L9e=Lj.readonly(Lj.type({type:Lj.string,accountUuid:Lj.string,sessionUuid:Lj.string,sessionKey:$A.JwkSymKey,managedAccountKey:$A.JwkSymKey,encryptedByKey:$A.KeysetCiphertext,notifier:Lj.string,languageCode:Lj.string}),"LaunchSessionData"),z9e=Lj.readonly(Lj.type({type:Lj.string},"MessageRelayReady")),QyA=Lj.readonly(Lj.intersection([Lj.type({name:Lj.string,uuid:Lj.string,type:Lj.string}),Lj.partial({avatar:Lj.string})]),"AssignedGroup"),YyA=Lj.readonly(Lj.intersection([Lj.type({uuid:Lj.string,name:Lj.string,email:Lj.string,state:Lj.string,acl:Lj.array(pe(Ms,"MspPermissions")),assignedThroughGroups:Lj.array(QyA)}),Lj.partial({avatar:Lj.string,role:pe(PC,"EamUserRole")})]),"ManagedAccountUser"),ZyA=Lj.readonly(Lj.intersection([Lj.type({uuid:Lj.string,name:Lj.string,acl:Lj.array(pe(Ms,"MspPermissions")),lastUpdated:Lj.string,userCount:Lj.number,type:Lj.string}),Lj.partial({avatar:Lj.string})]),"ManagedAccountGroup"),A$A=Lj.readonly(Lj.type({users:Lj.array(YyA),groups:Lj.array(ZyA)}),"ManagedAccountAccessDetailsResponse"),iW=_q(A=>({name:"getManagedAccounts",method:"GET",url:A?"/api/v1/msp/managed-accounts?include-keys=true":"/api/v1/msp/managed-accounts",responseType:Lj.array(tF)})),sW=_q(A=>({name:"createManagedAccount",method:"POST",url:"/api/v1/msp/managed-accounts",body:A,responseType:tF})),lW=_q((A,j)=>({name:"updateManagedAccount",method:"PATCH",url:`/api/v1/msp/managed-accounts/${A}`,body:j,responseType:L})),cW=_q(A=>({name:"unlinkManagedAccount",method:"DELETE",url:`/api/v1/msp/managed-accounts/${A}`,responseType:L})),dW=_q(A=>({name:"createLaunchSession",method:"POST",url:"/api/v1/msp/launch",body:A,responseType:n$j})),kW=_q(A=>({name:"getManagedAccountDetails",method:"GET",url:`/api/v1/msp/managed-accounts/${A}`,responseType:tF})),uW=_q(A=>({name:"getManagedAccountAccessDetails",method:"GET",url:`/api/v1/msp/access/managed-accounts/${A}`,responseType:A$A}));var Ri=J(tA());var o$j=Z("web-api/api/managed_account_net_seats.ts"),j$A=Ri.readonly(Ri.type({uuid:Ri.string,name:Ri.string,netSeats:Ri.number,avatar:Gj(Ri.string),website:Gj(Ri.string),domain:Ri.string},"ManagedAccountNetSeats")),J9e=Ri.type({startDate:Gj(Ri.string),endDate:Gj(Ri.string)}),EW=o$j(A=>{let j=new URLSearchParams;return A.startDate&&j.set("startDate",A.startDate),A.endDate&&j.set("endDate",A.endDate),{name:"getManagedAccountsNetSeats",method:"GET",url:`/api/v1/msp/managed-accounts/net-seats?${j.toString()}`,responseType:Ri.array(j$A)}});var i$j=Z("web-api/api/managed_credential_usage.ts"),pW=i$j(A=>({name:"reportManagedCredentialUsage",method:"POST",url:"/credentials-api/v1/credentials/usage",body:A,responseType:L}));var Ed=J(tA());var e$A=Z("web-api/api/monitoring.ts"),t$A=Ed.readonly(Ed.partial({status:Ed.union([Ed.literal("error"),Ed.literal("ok"),Ed.literal("unknown")]),lastChecked:Ed.string}),"MonitoringStatus"),Yw=e$A(A=>({name:"createMonitoringCheck",method:"POST",url:"/api/v1/monitoring",body:A,responseType:L})),mW=e$A(()=>({name:"getMonitoringStatus",method:"GET",url:"/api/v1/monitoring/status",responseType:t$A}));var He=J(tA());var Hp=Z("web-api/api/msp.ts"),r$A=He.readonly(He.intersection([He.type({uuid:He.string,name:He.string,acl:He.array(pe(Ms,"MspPermission"))}),He.partial({key:og})]),"ManagedCompanyAccess"),s$j=He.readonly(He.type({accessorUuid:He.string,accessorType:He.string,encKey:ns,encryptedBy:He.string},"MspAccess")),l$j=He.readonly(He.array(s$j)),s3e=He.readonly(He.type({access:l$j})),a$A=He.readonly(He.intersection([He.type({acl:He.array(pe(Ms,"MspPermission"))}),He.partial({encKeyset:ns})]),"MspUserPermissionsResponse"),n$A=He.readonly(He.partial({acl:qA(He.array(pe(Ms,"MspPermission")),[]),managedCompanies:He.array(r$A)}),"MspGroupPermissionsResponse"),c$j=He.intersection([He.type({acl:qA(He.array(He.string),[])}),He.partial({encKey:ns,encryptedBy:He.string})],"MspGroupPermissionsRequest"),o$A=He.type({linkRequestUuid:He.string,encAuthenticationKey:Fa,expirationTime:He.string,acceptedAt:He.union([He.string,He.undefined]),managedAccount:tF},"MspLinkRequestResponse"),i$A=He.type({linkRequestUuid:He.string,managedAccountName:He.string,managedAccountDomain:He.string,managedAccountUuid:He.string,expiresAt:He.string},"LinkRequestItem"),s$A=He.type({linkRequests:He.array(i$A)},"AcceptedLinkRequestsResponse"),l3e=He.type({encManagedAccountKey:og,eamUserKeyset:ns,eamGroupKeyset:ns,groupPublicKeyMac:gq},"AcceptLinkRequest"),gW=Hp(()=>({name:"getLinkRequests",method:"GET",url:"/api/v1/msp/link-requests",responseType:s$A})),hW=Hp(A=>({name:"setupMsp",method:"POST",url:"/api/v1/msp",body:A,responseType:L})),qW=Hp(()=>({name:"getUserMspPermissions",method:"GET",url:"/api/v1/msp",responseType:a$A})),xW=Hp(A=>({name:"getGroupMspPermissions",method:"GET",url:`/api/v1/msp/access/group/${A}`,responseType:n$A})),BW=He.readonly(He.intersection([He.type({groupUuid:He.string,managedAccountUuid:He.string}),He.partial({acl:Gj(He.array(pe(Ms,"MspPermission"))),managedAccountKey:og})]),"ManagedCompanyMspGroupPermission"),d$j=He.partial({update:He.array(BW),remove:He.array(BW)},"ManagedCompanyMspGroupPermissionsRequest"),vW=Hp(A=>({name:"updateManagedCompanyMspPermissions",method:"PATCH",url:"/api/v1/msp/access",body:A,responseType:L})),GW=Hp((A,j)=>({name:"updateGroupMspPermissions",method:"PUT",url:`/api/v1/msp/access/group/${A}`,body:j,responseType:L})),fW=Hp(A=>({name:"getMspLinkRequest",method:"GET",url:`/api/v1/msp/link-request/${A}`,responseType:o$A})),FW=Hp((A,j)=>({name:"acceptLinkRequest",method:"PATCH",url:`/api/v1/msp/link-request/${A}/accept`,body:j,responseType:L})),bW=Hp(A=>({name:"declineLinkRequest",method:"PATCH",url:`/api/v1/msp/link-request/${A}/decline`,responseType:L}));var ri=J(tA());var $W=Z("web-api/api/notifications.ts"),yW;(function(A){A.DeviceEnrollment="DEVICE_ENROLL"})(yW||(yW={}));var k$j=ri.intersection([ri.type({uuid:ri.string,type:ri.string},"type"),ri.partial({payload:ri.string},"partial")],"Notification"),u$j=ri.readonly(ri.type({notifications:ri.readonlyArray(k$j)}),"NotificationsResponse"),wW=$W(()=>({name:"getNotifications",method:"GET",url:"/api/v2/notification",responseType:u$j})),IW=$W(A=>({name:"acknowledgeNotification",method:"POST",url:"/api/v2/notification/acknowledge",body:A,responseType:L})),u3e=ri.readonly(ri.type({token:ri.string}),"SaveSettingsRequest"),PW=$W(A=>({name:"saveNotificationSettings",method:"POST",url:"/api/v2/notification/settings",body:A,responseType:L}));var rF=J(tA());var E$j=Z("web-api/api/notifier.ts"),p$j=rF.readonly(rF.type({notifierUrl:rF.string},"type"),"GetNotifierUrlResponse"),l$A=E$j(()=>({name:"getNotifierUrl",method:"GET",url:"/api/v2/notifier/url",responseType:p$j}));var de=J(tA());var Fl=Z("web-api/api/object_access.ts"),Tn;(function(A){A.ConnectCredentialsFull="full",A.ConnectCredentialsSigningPrivateKeyToken="signing-private-key,token",A.SigningPrivateKey="signing-private-key",A.AdminWatchtowerKeysetPrivateKey="private-key",A.UserManagedServiceAccountCreator="usermanaged-service-account-creator",A.None=""})(Tn||(Tn={}));var m$j=pe(Tn,"DataType"),ss;(function(A){A.ServiceAccountConnect="serviceaccount.connect",A.ServiceAccountDataStreaming="serviceaccount.streaming",A.AdminWatchtowerKeyset="keyset.adminwatchtower",A.ServiceAccountUserManaged="serviceaccount.usermanaged"})(ss||(ss={}));var nF=pe(ss,"ObjectType"),Di;(function(A){A.Manage="scope:manage",A.Every="scope:every",A.Some="scope:some"})(Di||(Di={}));var RC=pe(Di,"ObjectDataAccessScope"),ai;(function(A){A.ServiceAccountTokenCreate="token-create",A.ServiceAccountTokenRevoke="token-delete",A.ServiceAccountTokenEdit="token-edit",A.ServiceAccountCreate="sa-create",A.ServiceAccountEdit="sa-edit",A.ServiceAccountDelete="sa-delete",A.ServiceAccountCreatorManaged="sa-creator-managed",A.ServiceAccountConnectVaultAccessEdit="vault-access-edit",A.ServiceAccountConnectAddRemove="add-remove"})(ai||(ai={}));var c$A=pe(ai,"ObjectDataAccessAcl"),d$A=de.union([RC,c$A]),OC;OC||(OC={});var B$j=pe(OC,"ObjectDataAcl"),aF;(function(A){A.Active="A"})(aF||(aF={}));var k$A=pe(aF,"ObjectDataAccessState"),fl;(function(A){A.Group="G",A.User="U"})(fl||(fl={}));var OW=pe(fl,"ObjectDataAccessorType"),u$A=de.readonly(de.union([de.type({dataType:m$j,encKey:$A.JweB,encData:$A.JweB}),de.type({dataType:de.literal(Tn.None)}),de.intersection([de.type({dataType:de.literal(Tn.UserManagedServiceAccountCreator)}),de.partial({creatorUuid:de.string})])]),"ObjectDataValue"),Zw=de.readonly(de.type({objectType:nF,objectUuid:de.string,data:u$A,encryptedBy:de.string,acl:de.readonlyArray(de.string)})),g$j=de.readonly(de.type({data:Zw}),"UpdateObjectDataRequest"),E$A=de.readonly(de.type({avatar:de.string,name:de.string,type:de.string}),"AccessorPreview"),p$A=de.readonly(de.intersection([de.type({accessorType:OW,accessorUuid:de.string,acl:de.readonlyArray(de.string),objectType:de.string,objectUuid:de.string,scope:RC},"type"),de.partial({accessorPreview:E$A},"partial")],"CombinedObjectAccessor")),DC=de.readonly(de.type({objectType:nF,scope:RC,keysets:de.readonlyArray($A.KeysetCiphertext),data:de.readonlyArray(Zw)}),"UserCombinedObjectDataAccess"),m$A=de.readonly(de.type({combinedAccess:DC}),"UserCombinedObjectDataAccessResponse"),RW=Fl(A=>({name:"getUserCombinedObjectDataAccess",method:"GET",url:`/api/v1/objects/${A}/access/combined`,responseType:m$A})),B$A=de.readonly(de.type({access:de.array(p$A)})),ig=de.readonly(de.intersection([de.type({state:k$A,objectType:nF,accessorUuid:de.string,accessorType:OW,kid:de.string,pubKey:$A.JwkRsaPubKey,encryptedBy:de.string,createdAt:de.string,updatedAt:de.string,acl:de.array(d$A)},"type"),de.partial({encKeyset:$A.KeysetCiphertext},"partial")]),"ObjectDataAccess"),DW=Fl(A=>({name:"createObjectDataAccess",method:"POST",url:`/api/v1/objects/${A.access.objectType}/access`,body:A,responseType:L})),TW=Fl((A,j,e)=>({name:"deleteObjectDataAccess",method:"DELETE",url:`/api/v1/objects/${A}/access/${e}/${j}`,responseType:L})),TC=de.readonly(de.type({access:de.readonlyArray(ig)})),CW=Fl((A,j,e)=>({name:"getObjectDataAccess",method:"GET",url:`/api/v1/objects/${A}/access/${j}/${e}`,responseType:TC})),_W=Fl((A,j)=>({name:"createObjectData",method:"POST",url:`/api/v1/objects/${A}`,body:j,responseType:L})),SW=Fl(A=>({name:"getObjectDataAccessorsForObjectType",method:"GET",url:`/api/v1/objects/${A}/access`,responseType:TC})),g$A=de.readonly(de.type({objectType:nF,accessors:de.readonlyArray(ig)}),"ObjectDataPreflightResponse"),HW=Fl((A,j,e)=>{let t=nt({accessorDetails:e.accessorDetails});return{name:"getCombinedObjectAccessors",method:"GET",url:`/api/v1/objects/${A}/${j}/access/combined${t}`,responseType:B$A}}),CC=async(A,j)=>{try{return await h$j(A,j)}catch(e){let t=A$(e);if(A9(t,sc.notFound))return;throw t}},h$j=Fl(A=>({name:"getObjectDataPreflightWith404",method:"GET",url:`/api/v2/objects/${A}/preflight`,responseType:g$A})),h$A=de.readonly(de.type({objectType:nF,requiredGroups:qA(de.readonlyArray(de.string),[]),existingAccess:de.union([ig,de.undefined]),keyset:de.union([$A.KeysetCiphertext,de.undefined]),data:qA(de.readonlyArray(Zw),[])}),"ObjectDataAccessPreflightResponse"),oF=Fl((A,j,e)=>{let t=`/api/v1/objects/${A}/access/preflight/${j}`;return e&&(t+=`?accessoruuid=${e}`),{name:"getObjectDataAccessPreflight",method:"GET",url:t,responseType:h$A}}),AI=Fl((A,j)=>({name:"addObjectData",method:"PATCH",url:`/api/v1/objects/${A}`,body:j,responseType:L})),MW=Fl((A,j,e,t)=>({name:"deleteObjectData",method:"DELETE",url:`/api/v1/objects/${A}/${j}/${e}/${t}`,responseType:L})),q$j=Fl(A=>({name:"getObjectDataAccessForUserAndType",method:"GET",url:`/api/v1/objects/${A}/access/user`,responseType:TC})),KW=Fl((A,j,e,t,r)=>({name:"updateObjectData",method:"PUT",url:`/api/v1/objects/${A}/${j}/${e}/${t}`,body:r,responseType:L})),q$A=de.readonly(de.type({objectType:nF,objectData:de.readonlyArray(Zw)}),"ObjectDataWithSpec1Response"),NW=Fl(A=>({name:"getAllObjectDataWithDataSpec1",method:"GET",url:`/api/v1/objects/${A}/dataspec/1`,responseType:q$A}));var x$j=Z("web-api/api/outdated_browser.ts"),LW=x$j(A=>({name:"reportOutdatedBrowser",method:"POST",url:"/api/v2/report-outdated-browser",body:A,responseType:L}));var yt=J(tA());var $k=Z("web-api/api/package.ts"),x$A=yt.intersection([yt.type({sourceVaultUuid:yt.string,senderUuid:yt.string,recipientUuid:yt.string,itemUuid:yt.string,itemVersion:yt.number,templateUuid:yt.string,encKey:$A.JweB,recoverableEncKey:$A.JweB,encOverview:$A.JweB,signature:$A.JwsB},"type"),yt.partial({uuid:yt.string,createdAt:yt.string,updatedAt:yt.string,clientCreatedAt:yt.string,clientUpdatedAt:yt.string,encDetails:$A.JweB},"partial")],"Package"),_C=yt.readonly(yt.intersection([x$A,yt.type({uuid:yt.string},"type")]),"IncomingPackage"),UW=$k(A=>({name:"sendPackages",method:"PATCH",url:"/api/v1/packages",body:A,responseType:L})),VW=$k(()=>({name:"getIncomingPackages",method:"GET",url:"/api/v1/packages/incoming",responseType:yt.array(_C)})),XW=$k(A=>({name:"getIncomingPackage",method:"GET",url:`/api/v1/package/${A}`,responseType:_C})),JW=$k((A,j)=>({name:"getPackagesForVaultItem",method:"GET",url:`/api/v1/packages/sent/${A}/${j}`,responseType:yt.array(_C)})),SC=$k(A=>({name:"removePackages",method:"DELETE",url:"/api/v1/packages",body:A,responseType:L})),v$A=yt.readonly(yt.type({uuid:yt.string,name:yt.string,email:yt.string,avatar:yt.string,signingKey:$A.JwkEcPubKey}),"Sender"),WW=yt.readonly(yt.intersection([yt.type({uuid:yt.string,formatVersion:yt.number,sender:v$A,createdAt:yt.string,expiresAt:yt.string,encOverview:$A.JweB},"type"),yt.partial({readAt:yt.string},"partial")]),"IncomingPackageOverviewV2"),G$A=yt.readonly(yt.intersection([WW,yt.type({encDetails:$A.JweB},"type")]),"IncomingPackageV2"),zW;(function(A){A[A.OneDay=86400]="OneDay",A[A.OneWeek=604800]="OneWeek",A[A.OneMonth=2678400]="OneMonth",A[A.TwoMonths=5356800]="TwoMonths"})(zW||(zW={}));var QW=yt.readonly(yt.type({packages:yt.readonlyArray(WW),totalCount:yt.number}),"PackageOverviews"),v$j=$k(A=>({name:"sendPackageV2",method:"POST",url:"/api/v2/packages",body:A,responseType:L})),G$j=$k(()=>({name:"getIncomingPackagesV2",method:"GET",url:"/api/v2/packages",responseType:QW})),f$j=$k(A=>({name:"getMoreIncomingPackages",method:"GET",url:`/api/v2/packages${nt(A)}`,responseType:QW})),F$j=$k(A=>({name:"getIncomingPackageV2",method:"GET",url:`/api/v2/packages/${A}`,responseType:G$A})),YW=$k(A=>({name:"markPackageAsRead",method:"PATCH",url:`/api/v2/packages/${A}/read`,responseType:L})),ZW=$k(A=>({name:"removePackageV2",method:"DELETE",url:`/api/v2/packages/${A}`,responseType:L}));var hc=J(tA());var b$j=Z("web-api/api/pending_invitations.ts"),y$j=hc.type({uuid:hc.string,email:hc.string,userType:hc.string,expiresAt:hc.string,status:hc.string}),f$A=hc.type({pendingInvitations:hc.array(y$j),totalCount:hc.number},"GetPendingInvitationResponse"),F$A=A=>{let j=new URLSearchParams;return Object.entries(A).forEach(([e,t])=>{j.append(e,t.toString())}),j.toString()},AQ=b$j(A=>({name:"getPendingInvitation",method:"GET",url:`/api/v1/pending-invitations?${F$A(A)}`,responseType:f$A}));var ze=J(tA());var tQ={};er(tQ,{AppBuild:()=>jQ,AppRelease:()=>pd,AppReleases:()=>eQ,Device:()=>bl});var v6=J(tA());var bl;(function(A){A.Type=v6.intersection([v6.type({uuid:v6.string,clientName:v6.string,clientVersion:v6.string}),v6.partial({name:v6.string,model:v6.string,osName:v6.string,osVersion:v6.string,userAgent:v6.string,lastAuthIP:v6.string,avatar:v6.string,locationCity:v6.string,locationCountry:v6.string,locationCountryCode:v6.string,state:v6.string,createdAt:v6.string,updatedAt:v6.string,lastAuthAt:v6.string,fromDeviceInit:v6.boolean})],"Device");let j=5184e6;A.isInactive=e=>{let t=Date.now()-j;return!!e.lastAuthAt&&Q$(e.lastAuthAt)<t},A.compareAuthDates=(e,t)=>Q$(t.lastAuthAt)-Q$(e.lastAuthAt)})(bl||(bl={}));var Wt=J(tA()),jQ=Wt.readonly(Wt.type({version:Wt.string,url:Wt.union([Wt.string,Wt.undefined]),buildnum:Wt.number,bbn:Wt.union([Wt.string,Wt.undefined])},"AppBuild")),pd=Wt.readonly(Wt.type({release:Wt.union([jQ,Wt.undefined]),beta:Wt.union([jQ,Wt.undefined])},"AppRelease")),eQ=Wt.readonly(Wt.type({B:Wt.union([pd,Wt.undefined]),CLI:Wt.union([pd,Wt.undefined]),KNOX:Wt.union([pd,Wt.undefined]),OPA4:Wt.union([pd,Wt.undefined]),OPI4:Wt.union([pd,Wt.undefined]),OPM4:Wt.union([pd,Wt.undefined]),OPM7:Wt.union([pd,Wt.undefined]),OPM8:Wt.union([pd,Wt.undefined]),OPW4:Wt.union([pd,Wt.undefined]),OPW8:Wt.union([pd,Wt.undefined]),SCIM:Wt.union([pd,Wt.undefined])},"AppReleases"));var yl=Z("web-api/api/person.ts"),HC=ze.intersection([ze.type({uuid:ze.string,email:ze.string,name:ze.string,state:ze.string,type:ze.string,attrVersion:ze.number,keysetVersion:ze.number},"type"),ze.partial({avatar:ze.string,language:ze.string,combinedPermissions:ze.number,newsletterPrefs:ze.number,preferences:ze.number,externalGUID:ze.string,createdAt:ze.string,updatedAt:ze.string,lastAuthAt:ze.string},"partial")],"BasePerson"),sg=ze.intersection([HC,ze.partial({hasMFAEnabled:ze.boolean,proposedEmail:ze.string,pubKey:$A.JwkRsaPubKey},"partial"),ze.type({personalItemsCount:ze.union([ze.number,ze.null]),keysets:ze.union([ze.readonlyArray($A.KeysetCiphertext),ze.null]),memberships:ze.union([ze.readonlyArray(dr.Type),ze.null]),vaultAccess:ze.union([ze.readonlyArray(fk),ze.null]),devices:ze.union([ze.readonlyArray(bl.Type),ze.null])},"type")],"Person"),$$j=["pubkey","keysets","groups","vault-access","devices","personal-items-count","proposed-email-change"],rQ=yl((A,j,e)=>{let t=vk(j,$$j),r=nt({states:"all",...e,attrs:t});return{name:"getUser",method:"GET",url:`/api/v2/user/${A}${r}`,responseType:sg,options:{timeout:6e4}}}),b$A=ze.readonly(ze.intersection([ze.type({uuid:ze.string,pubKey:$A.JwkRsaPubKey},"type"),ze.partial({spubKey:$A.JwkEcPubKey},"partial")]),"UserPubKey"),aQ=yl(A=>({name:"getUserPubKeys",method:"GET",url:`/api/v2/user/pubkeys?uuids=${A.join(",")}`,responseType:ze.array(b$A)})),jI=yl(A=>({name:"changeUserName",method:"POST",url:"/api/v1/person/name",body:A,responseType:L})),eI=yl(A=>({name:"changeUserAvatar",method:"POST",url:"/api/v1/person/avatar",body:A,responseType:L})),w$j=ze.readonly(ze.intersection([ze.type({uuids:ze.readonlyArray(ze.string)},"type"),ze.partial({trustLogEntry:ze.string},"partial")])),nQ=yl(A=>({name:"deleteUsers",method:"DELETE",url:"/api/v3/people",body:A,responseType:L})),oQ=yl((A,j,e)=>({name:"confirmUsersWithMemberships",method:"PUT",url:"/api/v2/people/confirm",body:{peopleUuids:A,groupMemberships:j,trustLogEntry:e},responseType:L})),iQ=yl((A,j,e)=>({name:"confirmUsersWithVaultAccessList",method:"PUT",url:"/api/v2/people/confirm",body:{peopleUuids:A,vaultaccess:j,trustLogEntry:e},responseType:L})),sQ=yl((A,j,e,t)=>({name:"confirmUsersWithMembershipsAndVaultAccessList",method:"PUT",url:"/api/v2/people/confirm",body:{peopleUuids:A,groupMemberships:j,vaultaccess:e,trustLogEntry:t},responseType:L})),lQ=yl(A=>({name:"suspendUsers",method:"PUT",url:`/api/v1/people/suspend/${A.join(",")}`,responseType:L})),cQ=yl(A=>({name:"markAwayForTravel",method:"PUT",url:"/api/v1/people/enabletravel",body:{uuids:A},responseType:L})),dQ=yl(A=>({name:"markBackFromTravel",method:"PUT",url:"/api/v1/people/disabletravel",body:{uuids:A},responseType:L})),kQ=yl(A=>({name:"reactivateUsers",method:"PUT",url:`/api/v1/people/reactivate/${A.join(",")}`,responseType:L})),uQ=yl(A=>({name:"updateUser",method:"POST",url:"/api/v1/user/attrs",body:A,responseType:L})),EQ=yl((A,j,e)=>({name:"upgradeGuestToMember",method:"PUT",responseType:L,url:`/api/v3/user/upgrade-guest/${A}`,body:{vault:j,membership:e}}));var $t=J(tA());var jo=J(tA());var pQ=Z("web-api/api/policies/auto_lock.ts"),mQ=jo.readonly(jo.type({enabled:qA(jo.boolean,!1),lockAfterIdleTimeMin:qA(jo.number,480)}),"AutoLockPolicyDefinition"),y$A=jo.readonly(jo.partial({uuid:jo.string,firstName:jo.string,lastName:jo.string}),"AutoLockLastUpdatedByUser"),$$A=jo.readonly(jo.intersection([Qy,jo.type({definition:mQ}),jo.partial({lastUpdated:jo.string,lastUpdatedByUser:y$A})]),"AutoLockPolicyResponse"),BQ=pQ(()=>({name:"getAutoLockPolicyDefaultDefinition",method:"GET",url:`/api/v1/policies/${ke.AdminExperience}/${ee.AutoLock}/definition`,responseType:mQ})),gQ=pQ(()=>({name:"getAutoLockPolicy",method:"GET",url:`/api/v1/policies/${ke.AdminExperience}/${ee.AutoLock}`,responseType:$$A})),hQ=pQ(A=>({name:"updateAutoLockPolicy",method:"POST",url:`/api/v1/policies/${ke.AdminExperience}/${ee.AutoLock}`,body:{definition:A},responseType:L}));var MC=J(tA());var w$A=Z("web-api/api/policies/sidebar_navigation.ts"),I$A=MC.readonly(MC.type({definition:QT}),"SidebarNavPolicy"),qQ=w$A(()=>({name:"getSidebarNavPolicies",method:"GET",url:`/api/v1/policies/${ke.AdminExperience}/${ee.SidebarNav}`,responseType:I$A})),xQ=w$A(A=>({name:"updateSidebarNavPolicies",method:"POST",url:`/api/v1/policies/${ke.AdminExperience}/${ee.SidebarNav}`,body:{definition:A},responseType:L}));var wk=J(tA());var P$A=Z("web-api/api/policies/restrict_failed_login_attempts.ts"),KC=3,I$j=10,NC=10,O$A=wk.readonly(wk.type({enabled:qA(wk.boolean,!1),allowedAttempts:qA(wk.number,KC),lockoutPeriodMin:qA(wk.number,NC)}),"RestrictFailedLoginAttemptsPolicyDefinition"),R$A=wk.readonly(wk.type({definition:O$A}),"RestrictFailedLoginAttemptsPolicyResponse"),vQ=P$A(()=>({name:"getRestrictFailedLoginAttemptsPolicy",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.RestrictFailedLoginAttempts}`,responseType:R$A})),GQ=P$A(A=>({name:"updateRestrictFailedLoginAttemptsPolicy",method:"POST",url:`/api/v2/policies/${ke.AdminExperience}/${ee.RestrictFailedLoginAttempts}`,body:{definition:A},responseType:L}));var wo=J(tA());var D$A=Z("web-api/api/policies/allow_account_creation.ts"),T$A=wo.readonly(wo.type({enabled:qA(wo.boolean,!1)}),"AllowAccountCreationDefinition"),C$A=wo.readonly(wo.partial({uuid:wo.string,firstName:wo.string,lastName:wo.string}),"AllowAccountCreationLastUpdatedByUser"),_$A=wo.readonly(wo.intersection([wo.type({definition:T$A}),wo.partial({lastUpdated:wo.string,lastUpdatedByUser:C$A})]),"AllowAccountCreationResponse"),fQ=D$A(()=>({name:"getAllowAccountCreationPolicy",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.AllowAccountCreation}`,responseType:_$A})),FQ=D$A(A=>({name:"updateAllowAccountCreationPolicy",method:"POST",url:`/api/v2/policies/${ke.AdminExperience}/${ee.AllowAccountCreation}`,body:{definition:A},responseType:L}));var S$A=Z("web-api/api/policies/auto_delete_suspended_users.ts"),bQ=S$A(()=>({name:"getAutoDeleteSuspendedUsersPolicies",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.AutoDeleteSuspendedUsers}`,responseType:FV})),yQ=S$A(A=>({name:"updateAutoDeleteSuspendedUsersPolicies",method:"POST",url:`/api/v2/policies/${ke.AdminExperience}/${ee.AutoDeleteSuspendedUsers}`,body:{definition:A},responseType:L}));var Eu=J(tA());var $Q=Z("web-api/api/policies/release_channels.ts"),LC=200,wQ=Eu.readonly(Eu.type({restrictTo:qA(Eu.number,LC)}),"ReleaseChannelsPolicyDefinition"),H$A=Eu.readonly(Eu.intersection([Qy,Eu.type({definition:wQ})]),"ReleaseChannelsPolicyResponse"),IQ=$Q(()=>({name:"getReleaseChannelsPolicyDefaultDefinition",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.ReleaseChannels}/definition`,responseType:wQ})),PQ=$Q(()=>({name:"getReleaseChannelsPolicy",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.ReleaseChannels}`,responseType:H$A})),OQ=$Q(A=>({name:"updateReleaseChannelsPolicy",method:"POST",url:`/api/v2/policies/${ke.AdminExperience}/${ee.ReleaseChannels}`,body:{definition:A},responseType:L}));var lg=J(tA());var M$A=Z("web-api/api/policies/allow_maps.ts"),K$A=lg.readonly(lg.type({mapsEnabled:qA(lg.boolean,!1)}),"AllowMapsPolicyDefinition"),N$A=lg.readonly(lg.type({definition:K$A}),"AllowMapsPolicyResponse"),RQ=M$A(()=>({name:"getAllowMapsPolicy",method:"GET",url:`/api/v2/policies/${ke.IdentityPeopleAccounts}/${ee.AllowMaps}`,responseType:N$A})),DQ=M$A(A=>({name:"updateAllowMapsPolicy",method:"POST",url:`/api/v2/policies/${ke.IdentityPeopleAccounts}/${ee.AllowMaps}`,body:{definition:A},responseType:L}));var ni=J(tA());var L$A=Z("web-api/api/policies/item_password.ts"),z$A=20,P$j=[],U$A=ni.readonly(ni.type({enabled:qA(ni.boolean,!1),minimumCharacters:qA(ni.number,z$A),includeSymbols:qA(ni.boolean,!1),includeNumbers:qA(ni.boolean,!1),includeUppercaseLetters:qA(ni.boolean,!1),includeLowercaseLetters:qA(ni.boolean,!1),excludedDomains:qA(ni.array(ni.string),P$j)}),"ItemPasswordPolicyDefinition"),V$A=ni.readonly(ni.type({definition:U$A}),"ItemPasswordPolicyResponse"),TQ=L$A(()=>({name:"getItemPasswordPolicy",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.ItemPassword}`,responseType:V$A})),CQ=L$A(A=>({name:"updateItemPasswordPolicy",method:"POST",url:`/api/v2/policies/${ke.AdminExperience}/${ee.ItemPassword}`,body:{definition:A},responseType:L}));var iF=J(tA());var _Q=Z("web-api/api/policies/skip_extension_download.ts"),O$j=iF.readonly(iF.type({enabled:qA(iF.boolean,!0)}),"ExtensionAllowedPolicyDefinition"),R$j=_Q(()=>({name:"getExtensionAllowedPolicy",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.ExtensionAllowed}`,responseType:pu})),D$j=_Q(A=>({name:"updateExtensionAllowedPolicy",method:"POST",url:`/api/v2/policies/${ke.AdminExperience}/${ee.ExtensionAllowed}`,body:{definition:A},responseType:L})),T$j=_Q(()=>({name:"unauthenticatedGetExtensionAllowedPolicy",method:"GET",url:`/api/v1/policies/locked/${ke.AdminExperience}/${ee.ExtensionAllowed}`,responseType:pu,encrypted:!1}));var Io=J(tA());var X$A=Z("web-api/api/policies/kolide_health_check.ts"),J$A=Io.readonly(Io.type({enabled:qA(Io.boolean,!1)}),"NeedsKolideHealthCheckPolicyDefinition"),W$A=Io.readonly(Io.partial({uuid:Io.string,firstName:Io.string,lastName:Io.string}),"NeedsKolideHealthCheckUpdatedByUser"),Q$A=Io.readonly(Io.intersection([Io.type({definition:J$A}),Io.partial({lastUpdated:Io.string,lastUpdatedByUser:W$A})]),"NeedsKolideHealthCheckPolicyResponse"),SQ=X$A(()=>({name:"getNeedsKolideHealthCheckPolicy",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.KolideHealthCheck}`,responseType:Q$A})),HQ=X$A(A=>({name:"updateNeedsKolideHealthCheckPolicy",method:"POST",url:`/api/v2/policies/${ke.AdminExperience}/${ee.KolideHealthCheck}`,body:{definition:A},responseType:L}));var cg=J(tA());var MQ=Z("web-api/api/policies/app_launcher_allowed.ts"),C$j=cg.readonly(cg.type({appLauncherPolicyEnabled:qA(cg.boolean,!1),appCatalogUrl:qA(cg.string,"")}),"AppLauncherAllowedPolicyDefinition"),_$j=MQ(()=>({name:"getAppLauncherAllowedPolicy",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.AppLauncherAllowed}`,responseType:pu})),S$j=MQ(A=>({name:"updateAppLauncherAllowedPolicy",method:"POST",url:`/api/v2/policies/${ke.AdminExperience}/${ee.AppLauncherAllowed}`,body:{definition:A},responseType:L})),H$j=MQ(()=>({name:"unauthenticatedGetAppLauncherAllowedPolicy",method:"GET",url:`/api/v1/policies/locked/${ke.AdminExperience}/${ee.AppLauncherAllowed}`,responseType:pu,encrypted:!1}));var nr=J(tA());var Sq=Z("web-api/api/policy_templates.ts"),Y$A=nr.type({policyContext:nr.string,policyName:nr.string,definition:nr.any,enforced:qA(nr.boolean,!0)}),tI=nr.type({name:nr.string,templateUuid:nr.string,createdAt:nr.string,updatedAt:nr.string,numChildAccounts:nr.number}),Z$A=nr.type({page:nr.number,itemsPerPage:nr.number,totalItems:nr.number,totalPages:nr.number,sortBy:nr.string,sort:nr.string}),AwA=nr.type({templates:nr.array(tI),pagination:Z$A}),jwA=nr.type({uuid:nr.string,name:nr.string,state:ql(ti,"ManagedAccountState"),domain:nr.string,country:nr.string,region:nr.string,startedManagingDate:qA(nr.string,"")}),ewA=nr.type({name:nr.string,templateUuid:nr.string,childAccounts:nr.array(jwA),pagination:nr.type({page:nr.number,itemsPerPage:nr.number,totalItems:nr.number,totalPages:nr.number})}),M$j=Sq(A=>{let j={page:A.currentPage??1,itemsPerPage:A.itemsPerPage??100};return{name:"getPolicyTemplates",method:"GET",url:`/api/v1/policy-templates${nt(j)}`,responseType:AwA}}),twA=nr.type({template:tI,policies:nr.array(Y$A)}),K$j=Sq(A=>({name:"getPolicyTemplatePolicies",method:"GET",url:`/api/v1/policy-templates/${A}/policies`,responseType:twA})),N$j=Sq(A=>({name:"createPolicyTemplate",method:"POST",url:"/api/v1/policy-templates",body:{name:A},responseType:tI})),L$j=Sq((A,j)=>({name:"updatePolicyTemplateName",method:"PUT",url:`/api/v1/policy-templates/${j}`,body:{name:A},responseType:tI})),z$j=Sq(({policyTemplateUuid:A,policyContext:j,policyName:e,definition:t,enforced:r})=>({name:"updateTemplatePolicyDefinition",method:"PUT",url:`/api/v1/policy-templates/${A}/policies/${j}/${e}`,body:{definition:t,enforced:r},responseType:L})),U$j=Sq(({policyTemplateUuid:A,policyContext:j,policyName:e,definition:t,enforced:r})=>({name:"removePolicyTemplateDefinition",method:"DELETE",url:`/api/v1/policy-templates/${A}/policies/${j}/${e}`,body:{definition:t,enforced:r},responseType:L})),V$j=Sq(A=>{let j={page:A.currentPage??1,itemsPerPage:A.itemsPerPage??100};return{name:"getPolicyTemplateChildAccounts",method:"GET",url:`/api/v1/policy-templates/${A.templateUuid}/child-accounts${nt(j)}`,responseType:ewA}});var dg=J(tA());var rwA=Z("web-api/api/policies/autofill_confirmation_policy.ts"),X$j=dg.readonly(dg.type({creditCardItems:dg.boolean,loginItems:dg.boolean,identityItems:dg.boolean}),"AutofillConfirmationPolicyDefinition"),J$j=rwA(()=>({name:"getAutofillConfirmationPolicyApi",method:"GET",url:`/api/v2/policies/${ke.AdminExperience}/${ee.AutofillConfirmation}`,responseType:pu})),W$j=rwA(A=>({name:"updateAutofillConfirmationPolicyApi",method:"POST",url:`/api/v2/policies/${ke.AdminExperience}/${ee.AutofillConfirmation}`,body:{definition:A},responseType:L}));var kg=J(tA());var awA=Z("web-api/api/policies/developer/ssh_bookmarks.ts"),nwA=kg.readonly(kg.type({allowSshBookmarksSyncToDisk:qA(kg.boolean,!0)})),owA=kg.readonly(kg.type({definition:nwA}),"SshBookmarksPolicyResponse"),KQ=awA(()=>({name:"getSshBookmarksPolicy",method:"GET",url:`/api/v2/policies/${ke.Developer}/${ee.SshBookmarks}`,responseType:owA})),NQ=awA(A=>({name:"updateSshBookmarksPolicy",method:"POST",url:`/api/v2/policies/${ke.Developer}/${ee.SshBookmarks}`,body:{definition:A},responseType:L}));var Mp=J(tA());var iwA=Z("web-api/api/policies/developer/cli_integration.ts"),swA=Mp.readonly(Mp.type({enabled:qA(Mp.boolean,!1),enableCliIntegration:qA(Mp.boolean,!0)})),lwA=Mp.readonly(Mp.type({definition:swA}),"CliIntegrationPolicyResponse"),LQ=iwA(()=>({name:"getCliIntegrationPolicy",method:"GET",url:`/api/v2/policies/${ke.Developer}/${ee.CliIntegration}`,responseType:lwA})),zQ=iwA(A=>({name:"updateCliIntegrationPolicy",method:"POST",url:`/api/v2/policies/${ke.Developer}/${ee.CliIntegration}`,body:{definition:A},responseType:L}));var ug=J(tA());var cwA=Z("web-api/api/policies/developer/developer_environments.ts"),dwA=ug.readonly(ug.type({enableDeveloperEnvironments:qA(ug.boolean,!0)}),"DeveloperEnvironmentsPolicyDefinition"),kwA=ug.readonly(ug.type({definition:dwA}),"DeveloperEnvironmentsPolicyResponse"),UQ=cwA(()=>({name:"getDeveloperEnvironmentsPolicy",method:"GET",url:`/api/v2/policies/${ke.Developer}/${ee.DeveloperEnvironments}`,responseType:kwA})),VQ=cwA(A=>({name:"updateDeveloperEnvironmentsPolicy",method:"POST",url:`/api/v2/policies/${ke.Developer}/${ee.DeveloperEnvironments}`,body:{definition:A},responseType:L}));var md=J(tA());var uwA=Z("web-api/api/policies/insights/reporting.ts"),EwA=md.readonly(md.type({allowedEmailDomains:qA(md.array(md.string),[]),appDiscoveryEnabled:qA(md.boolean,!1)}),"ReportingPolicyDefinition"),pwA=md.readonly(md.type({definition:EwA}),"ReportingPolicyResponse"),Q$j=uwA(()=>({name:"getReportingPolicy",method:"GET",url:`/api/v2/policies/${ke.Insights}/${ee.Reporting}`,responseType:pwA})),Y$j=uwA(A=>({name:"updateReportingPolicy",method:"POST",url:`/api/v2/policies/${ke.Insights}/${ee.Reporting}`,body:{definition:A},responseType:L}));var Eg=J(tA());var mwA=Z("web-api/api/policies/security_for_ai/secure_remote_autofill.ts"),BwA=Eg.readonly(Eg.type({enabled:qA(Eg.boolean,!1)})),gwA=Eg.readonly(Eg.type({definition:BwA}),"SecureRemoteAutofillPolicyResponse"),XQ=mwA(()=>({name:"getSecureRemoteAutofillPolicy",method:"GET",url:`/api/v2/policies/${ke.SecurityForAI}/${ee.SecureRemoteAutofill}`,responseType:gwA})),JQ=mwA(A=>({name:"updateSecureRemoteAutofillPolicy",method:"POST",url:`/api/v2/policies/${ke.SecurityForAI}/${ee.SecureRemoteAutofill}`,body:{definition:A},responseType:L}));var Dt=J(tA());var hwA=Z("web-api/api/policies/auth-exp/security_settings_presets.ts"),Z$j=Dt.union([Dt.literal("windows"),Dt.literal("macos"),Dt.literal("linux"),Dt.literal("android"),Dt.literal("ios"),Dt.literal("extension"),Dt.literal("browser")]),Awj=Dt.union([Dt.literal("never"),Dt.literal("one-day"),Dt.literal("one-week"),Dt.literal("two-weeks"),Dt.literal("thirty-days")]),qwA=Dt.readonly(Dt.partial({autoLockEnabled:Dt.boolean,autoLockIdleInterval:Dt.number,autoLockOnDeviceLockOrSleep:Dt.boolean,autoLockOnDeviceSleep:Dt.boolean,biometricUnlock:Dt.boolean,deviceBasedUnlock:Dt.boolean,deviceBasedUnlockExpiryInterval:Dt.number,devicePasswordFallbackUnlock:Dt.boolean,devicePasscodeUnlock:Dt.boolean,passwordReminderInterval:Awj,windowsHelloUseSecureHardware:Dt.boolean}),"SecuritySettings"),xwA=Dt.readonly(Dt.type({clientPlatform:Z$j,enforcedSettings:qwA}),"PlatformSecuritySettings"),vwA=Dt.readonly(Dt.type({securityReviewEnabled:qA(Dt.boolean,!1),platformSettings:Dt.array(xwA)}),"SecuritySettingsPresetsPolicyDefinitionV1"),GwA=Dt.readonly(Dt.intersection([Dt.type({enabled:qA(Dt.boolean,!1),version:Dt.number}),Dt.partial({v1:vwA})]),"SecuritySettingsPresetsPolicyDefinition"),fwA=Dt.readonly(Dt.type({definition:GwA}),"SecuritySettingsPresetsPolicyResponse"),jwj=hwA(()=>({name:"getSecuritySettingsPresetsPolicy",method:"GET",url:`/api/v2/policies/${ke.AuthenticationExperience}/${ee.SecuritySettingsPresets}`,responseType:fwA})),ewj=hwA(A=>({name:"updateSecuritySettingsPresetsPolicy",method:"POST",url:`/api/v2/policies/${ke.AuthenticationExperience}/${ee.SecuritySettingsPresets}`,body:{definition:A},responseType:L}));var ke;(function(A){A.AdminExperience="admin-exp",A.IdentityPeopleAccounts="identity-people-and-accounts",A.Developer="developer",A.Insights="insights",A.SecurityForAI="security-for-ai",A.AuthenticationExperience="auth-exp"})(ke||(ke={}));var ee;(function(A){A.AutofillConfirmation="autofill-confirmation",A.AllowAccountCreation="allow-account-creation",A.AutoLock="auto-lock",A.SidebarNav="sidebar-nav",A.RestrictFailedLoginAttempts="restrict-failed-login-attempts",A.AutoDeleteSuspendedUsers="auto-delete-suspended-users",A.ReleaseChannels="release-channels",A.ItemPassword="item-password",A.ExtensionAllowed="extension-allowed",A.AppLauncherAllowed="app-launcher-allowed",A.KolideHealthCheck="needs-kolide-mobile-health-check",A.AllowMaps="allow-maps",A.SshBookmarks="ssh-bookmarks",A.CliIntegration="cli-integration",A.DeveloperEnvironments="developer-environments",A.Reporting="reporting",A.SecureRemoteAutofill="secure-remote-autofill",A.SecuritySettingsPresets="security-settings-presets"})(ee||(ee={}));var zC={[ee.AllowAccountCreation]:ke.AdminExperience,[ee.AutoLock]:ke.AdminExperience,[ee.SidebarNav]:ke.AdminExperience,[ee.RestrictFailedLoginAttempts]:ke.AdminExperience,[ee.AutoDeleteSuspendedUsers]:ke.AdminExperience,[ee.ReleaseChannels]:ke.AdminExperience,[ee.ItemPassword]:ke.AdminExperience,[ee.ExtensionAllowed]:ke.AdminExperience,[ee.AppLauncherAllowed]:ke.AdminExperience,[ee.AutofillConfirmation]:ke.AdminExperience,[ee.KolideHealthCheck]:ke.AdminExperience,[ee.AllowMaps]:ke.IdentityPeopleAccounts,[ee.SshBookmarks]:ke.Developer,[ee.CliIntegration]:ke.Developer,[ee.DeveloperEnvironments]:ke.Developer,[ee.Reporting]:ke.Insights,[ee.SecureRemoteAutofill]:ke.SecurityForAI,[ee.SecuritySettingsPresets]:ke.AuthenticationExperience},FwA=Z("web-api/api/policies/index.ts"),pu=$t.readonly($t.type({uuid:$t.union([$t.string,$t.undefined]),policyContext:$t.string,policyName:$t.string,definition:$t.any,lastUpdated:$t.union([$t.string,$t.undefined]),lastUpdatedByUser:$t.union([$t.readonly($t.type({uuid:$t.string,firstName:$t.string,lastName:$t.string})),$t.undefined]),version:$t.number}),"GenericAccountPolicyResponse"),bwA=$t.readonly($t.type({policies:$t.readonlyArray(pu),version:$t.number}),"AllPoliciesResponse"),WQ=FwA(()=>({name:"getAllPoliciesForCurrentAccount",method:"GET",url:"/api/v1/policies/all",responseType:bwA})),ywA=$t.type({context:$t.string,createdAt:$t.string,disabled:$t.boolean,id:$t.number,name:$t.string,updatedAt:$t.string,uuid:$t.string}),$wA=$t.type({pagination:$t.type({itemsPerPage:$t.number,page:$t.number,sort:$t.string,sortBy:$t.string,totalItems:$t.number,totalPages:$t.number}),policies:$t.array(ywA)}),QQ=FwA(({availableInTemplates:A})=>({name:"getPolicyList",method:"GET",url:`/api/v1/policies${nt({availableInTemplates:A})}`,responseType:$wA}));var pj=J(tA());var rwj=Object.create,CwA=Object.defineProperty,awj=Object.getOwnPropertyDescriptor,_wA=Object.getOwnPropertyNames,nwj=Object.getPrototypeOf,owj=Object.prototype.hasOwnProperty,Oo=(A,j)=>function(){return j||(0,A[_wA(A)[0]])((j={exports:{}}).exports,j),j.exports},iwj=(A,j,e,t)=>{if(j&&typeof j=="object"||typeof j=="function")for(let r of _wA(j))!owj.call(A,r)&&r!==e&&CwA(A,r,{get:()=>j[r],enumerable:!(t=awj(j,r))||t.enumerable});return A},eY=(A,j,e)=>(e=A!=null?rwj(nwj(A)):{},iwj(j||!A||!A.__esModule?CwA(e,"default",{value:A,enumerable:!0}):e,A)),Nq=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/function.js"(A){"use strict";var j=A&&A.__spreadArray||function(h,O,Q){if(Q||arguments.length===2)for(var AA=0,nA=O.length,bA;AA<nA;AA++)(bA||!(AA in O))&&(bA||(bA=Array.prototype.slice.call(O,0,AA)),bA[AA]=O[AA]);return h.concat(bA||Array.prototype.slice.call(O))};Object.defineProperty(A,"__esModule",{value:!0}),A.dual=A.getEndomorphismMonoid=A.SK=A.hole=A.constVoid=A.constUndefined=A.constNull=A.constFalse=A.constTrue=A.unsafeCoerce=A.apply=A.getRing=A.getSemiring=A.getMonoid=A.getSemigroup=A.getBooleanAlgebra=void 0,A.identity=i,A.constant=s,A.flip=l,A.flow=c,A.tuple=k,A.increment=u,A.decrement=m,A.absurd=F,A.tupled=S,A.untupled=G,A.pipe=x,A.not=P;var e=function(h){return function(){return{meet:function(O,Q){return function(AA){return h.meet(O(AA),Q(AA))}},join:function(O,Q){return function(AA){return h.join(O(AA),Q(AA))}},zero:function(){return h.zero},one:function(){return h.one},implies:function(O,Q){return function(AA){return h.implies(O(AA),Q(AA))}},not:function(O){return function(Q){return h.not(O(Q))}}}}};A.getBooleanAlgebra=e;var t=function(h){return function(){return{concat:function(O,Q){return function(AA){return h.concat(O(AA),Q(AA))}}}}};A.getSemigroup=t;var r=function(h){var O=(0,A.getSemigroup)(h);return function(){return{concat:O().concat,empty:function(){return h.empty}}}};A.getMonoid=r;var a=function(h){return{add:function(O,Q){return function(AA){return h.add(O(AA),Q(AA))}},zero:function(){return h.zero},mul:function(O,Q){return function(AA){return h.mul(O(AA),Q(AA))}},one:function(){return h.one}}};A.getSemiring=a;var n=function(h){var O=(0,A.getSemiring)(h);return{add:O.add,mul:O.mul,one:O.one,zero:O.zero,sub:function(Q,AA){return function(nA){return h.sub(Q(nA),AA(nA))}}}};A.getRing=n;var o=function(h){return function(O){return O(h)}};A.apply=o;function i(h){return h}A.unsafeCoerce=i;function s(h){return function(){return h}}A.constTrue=s(!0),A.constFalse=s(!1),A.constNull=s(null),A.constUndefined=s(void 0),A.constVoid=A.constUndefined;function l(h){return function(){for(var O=[],Q=0;Q<arguments.length;Q++)O[Q]=arguments[Q];return O.length>1?h(O[1],O[0]):function(AA){return h(AA)(O[0])}}}function c(h,O,Q,AA,nA,bA,XA,dj,yA){switch(arguments.length){case 1:return h;case 2:return function(){return O(h.apply(this,arguments))};case 3:return function(){return Q(O(h.apply(this,arguments)))};case 4:return function(){return AA(Q(O(h.apply(this,arguments))))};case 5:return function(){return nA(AA(Q(O(h.apply(this,arguments)))))};case 6:return function(){return bA(nA(AA(Q(O(h.apply(this,arguments))))))};case 7:return function(){return XA(bA(nA(AA(Q(O(h.apply(this,arguments)))))))};case 8:return function(){return dj(XA(bA(nA(AA(Q(O(h.apply(this,arguments))))))))};case 9:return function(){return yA(dj(XA(bA(nA(AA(Q(O(h.apply(this,arguments)))))))))}}}function k(){for(var h=[],O=0;O<arguments.length;O++)h[O]=arguments[O];return h}function u(h){return h+1}function m(h){return h-1}function F(h){throw new Error("Called `absurd` function which should be uncallable")}function S(h){return function(O){return h.apply(void 0,O)}}function G(h){return function(){for(var O=[],Q=0;Q<arguments.length;Q++)O[Q]=arguments[Q];return h(O)}}function x(h,O,Q,AA,nA,bA,XA,dj,yA){switch(arguments.length){case 1:return h;case 2:return O(h);case 3:return Q(O(h));case 4:return AA(Q(O(h)));case 5:return nA(AA(Q(O(h))));case 6:return bA(nA(AA(Q(O(h)))));case 7:return XA(bA(nA(AA(Q(O(h))))));case 8:return dj(XA(bA(nA(AA(Q(O(h)))))));case 9:return yA(dj(XA(bA(nA(AA(Q(O(h))))))));default:{for(var tj=arguments[0],LA=1;LA<arguments.length;LA++)tj=arguments[LA](tj);return tj}}}A.hole=F;var R=function(h,O){return O};A.SK=R;function P(h){return function(O){return!h(O)}}var D=function(){return{concat:function(h,O){return c(h,O)},empty:i}};A.getEndomorphismMonoid=D;var y=function(h,O){var Q=typeof h=="number"?function(AA){return AA.length>=h}:h;return function(){var AA=Array.from(arguments);return Q(arguments)?O.apply(this,AA):function(nA){return O.apply(void 0,j([nA],AA,!1))}}};A.dual=y}}),WC=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/internal.js"(A){"use strict";var j=A&&A.__spreadArray||function(h,O,Q){if(Q||arguments.length===2)for(var AA=0,nA=O.length,bA;AA<nA;AA++)(bA||!(AA in O))&&(bA||(bA=Array.prototype.slice.call(O,0,AA)),bA[AA]=O[AA]);return h.concat(bA||Array.prototype.slice.call(O))};Object.defineProperty(A,"__esModule",{value:!0}),A.flatMapReader=A.flatMapTask=A.flatMapIO=A.flatMapEither=A.flatMapOption=A.flatMapNullable=A.liftOption=A.liftNullable=A.fromReadonlyNonEmptyArray=A.has=A.emptyRecord=A.emptyReadonlyArray=A.tail=A.head=A.isNonEmpty=A.singleton=A.right=A.left=A.isRight=A.isLeft=A.some=A.none=A.isSome=A.isNone=void 0;var e=Nq(),t=function(h){return h._tag==="None"};A.isNone=t;var r=function(h){return h._tag==="Some"};A.isSome=r,A.none={_tag:"None"};var a=function(h){return{_tag:"Some",value:h}};A.some=a;var n=function(h){return h._tag==="Left"};A.isLeft=n;var o=function(h){return h._tag==="Right"};A.isRight=o;var i=function(h){return{_tag:"Left",left:h}};A.left=i;var s=function(h){return{_tag:"Right",right:h}};A.right=s;var l=function(h){return[h]};A.singleton=l;var c=function(h){return h.length>0};A.isNonEmpty=c;var k=function(h){return h[0]};A.head=k;var u=function(h){return h.slice(1)};A.tail=u,A.emptyReadonlyArray=[],A.emptyRecord={},A.has=Object.prototype.hasOwnProperty;var m=function(h){return j([h[0]],h.slice(1),!0)};A.fromReadonlyNonEmptyArray=m;var F=function(h){return function(O,Q){return function(){for(var AA=[],nA=0;nA<arguments.length;nA++)AA[nA]=arguments[nA];var bA=O.apply(void 0,AA);return h.fromEither(bA==null?(0,A.left)(Q.apply(void 0,AA)):(0,A.right)(bA))}}};A.liftNullable=F;var S=function(h){return function(O,Q){return function(){for(var AA=[],nA=0;nA<arguments.length;nA++)AA[nA]=arguments[nA];var bA=O.apply(void 0,AA);return h.fromEither((0,A.isNone)(bA)?(0,A.left)(Q.apply(void 0,AA)):(0,A.right)(bA.value))}}};A.liftOption=S;var G=function(h,O){return(0,e.dual)(3,function(Q,AA,nA){return O.flatMap(Q,(0,A.liftNullable)(h)(AA,nA))})};A.flatMapNullable=G;var x=function(h,O){return(0,e.dual)(3,function(Q,AA,nA){return O.flatMap(Q,(0,A.liftOption)(h)(AA,nA))})};A.flatMapOption=x;var R=function(h,O){return(0,e.dual)(2,function(Q,AA){return O.flatMap(Q,function(nA){return h.fromEither(AA(nA))})})};A.flatMapEither=R;var P=function(h,O){return(0,e.dual)(2,function(Q,AA){return O.flatMap(Q,function(nA){return h.fromIO(AA(nA))})})};A.flatMapIO=P;var D=function(h,O){return(0,e.dual)(2,function(Q,AA){return O.flatMap(Q,function(nA){return h.fromTask(AA(nA))})})};A.flatMapTask=D;var y=function(h,O){return(0,e.dual)(2,function(Q,AA){return O.flatMap(Q,function(nA){return h.fromReader(AA(nA))})})};A.flatMapReader=y}}),SwA=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Apply.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(G,x,R,P){P===void 0&&(P=R);var D=Object.getOwnPropertyDescriptor(x,R);(!D||("get"in D?!x.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return x[R]}}),Object.defineProperty(G,P,D)}:function(G,x,R,P){P===void 0&&(P=R),G[P]=x[R]}),e=A&&A.__setModuleDefault||(Object.create?function(G,x){Object.defineProperty(G,"default",{enumerable:!0,value:x})}:function(G,x){G.default=x}),t=A&&A.__importStar||function(G){if(G&&G.__esModule)return G;var x={};if(G!=null)for(var R in G)R!=="default"&&Object.prototype.hasOwnProperty.call(G,R)&&j(x,G,R);return e(x,G),x};Object.defineProperty(A,"__esModule",{value:!0}),A.ap=n,A.apFirst=o,A.apSecond=i,A.apS=s,A.getApplySemigroup=l,A.sequenceT=m,A.sequenceS=S;var r=Nq(),a=t(WC());function n(G,x){return function(R){return function(P){return G.ap(G.map(P,function(D){return function(y){return x.ap(D,y)}}),R)}}}function o(G){return function(x){return function(R){return G.ap(G.map(R,function(P){return function(){return P}}),x)}}}function i(G){return function(x){return function(R){return G.ap(G.map(R,function(){return function(P){return P}}),x)}}}function s(G){return function(x,R){return function(P){return G.ap(G.map(P,function(D){return function(y){var h;return Object.assign({},D,(h={},h[x]=y,h))}}),R)}}}function l(G){return function(x){return{concat:function(R,P){return G.ap(G.map(R,function(D){return function(y){return x.concat(D,y)}}),P)}}}}function c(G,x,R){return function(P){for(var D=Array(R.length+1),y=0;y<R.length;y++)D[y]=R[y];return D[R.length]=P,x===0?G.apply(null,D):c(G,x-1,D)}}var k={1:function(G){return[G]},2:function(G){return function(x){return[G,x]}},3:function(G){return function(x){return function(R){return[G,x,R]}}},4:function(G){return function(x){return function(R){return function(P){return[G,x,R,P]}}}},5:function(G){return function(x){return function(R){return function(P){return function(D){return[G,x,R,P,D]}}}}}};function u(G){return a.has.call(k,G)||(k[G]=c(r.tuple,G-1,[])),k[G]}function m(G){return function(){for(var x=[],R=0;R<arguments.length;R++)x[R]=arguments[R];for(var P=x.length,D=u(P),y=G.map(x[0],D),h=1;h<P;h++)y=G.ap(y,x[h]);return y}}function F(G){var x=G.length;switch(x){case 1:return function(R){var P;return P={},P[G[0]]=R,P};case 2:return function(R){return function(P){var D;return D={},D[G[0]]=R,D[G[1]]=P,D}};case 3:return function(R){return function(P){return function(D){var y;return y={},y[G[0]]=R,y[G[1]]=P,y[G[2]]=D,y}}};case 4:return function(R){return function(P){return function(D){return function(y){var h;return h={},h[G[0]]=R,h[G[1]]=P,h[G[2]]=D,h[G[3]]=y,h}}}};case 5:return function(R){return function(P){return function(D){return function(y){return function(h){var O;return O={},O[G[0]]=R,O[G[1]]=P,O[G[2]]=D,O[G[3]]=y,O[G[4]]=h,O}}}}};default:return c(function(){for(var R=[],P=0;P<arguments.length;P++)R[P]=arguments[P];for(var D={},y=0;y<x;y++)D[G[y]]=R[y];return D},x-1,[])}}function S(G){return function(x){for(var R=Object.keys(x),P=R.length,D=F(R),y=G.map(x[R[0]],D),h=1;h<P;h++)y=G.ap(y,x[R[h]]);return y}}}}),tY=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Functor.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.map=e,A.flap=t,A.bindTo=r,A.let=a,A.getFunctorComposition=n,A.as=o,A.asUnit=i;var j=Nq();function e(s,l){return function(c){return function(k){return s.map(k,function(u){return l.map(u,c)})}}}function t(s){return function(l){return function(c){return s.map(c,function(k){return k(l)})}}}function r(s){return function(l){return function(c){return s.map(c,function(k){var u;return u={},u[l]=k,u})}}}function a(s){return function(l,c){return function(k){return s.map(k,function(u){var m;return Object.assign({},u,(m={},m[l]=c(u),m))})}}}function n(s,l){var c=e(s,l);return{map:function(k,u){return(0,j.pipe)(k,c(u))}}}function o(s){return function(l,c){return s.map(l,function(){return c})}}function i(s){var l=o(s);return function(c){return l(c,void 0)}}}}),swj=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Applicative.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getApplicativeMonoid=r,A.getApplicativeComposition=a;var j=SwA(),e=Nq(),t=tY();function r(n){var o=(0,j.getApplySemigroup)(n);return function(i){return{concat:o(i).concat,empty:n.of(i.empty)}}}function a(n,o){var i=(0,t.getFunctorComposition)(n,o).map,s=(0,j.ap)(n,o);return{map:i,of:function(l){return n.of(o.of(l))},ap:function(l,c){return(0,e.pipe)(l,s(c))}}}}}),HwA=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Chain.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.chainFirst=j,A.tap=e,A.bind=t;function j(r){var a=e(r);return function(n){return function(o){return a(o,n)}}}function e(r){return function(a,n){return r.chain(a,function(o){return r.map(n(o),function(){return o})})}}function t(r){return function(a,n){return function(o){return r.chain(o,function(i){return r.map(n(i),function(s){var l;return Object.assign({},i,(l={},l[a]=s,l))})})}}}}}),lwj=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/ChainRec.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.tailRec=void 0;var j=function(e,t){for(var r=t(e);r._tag==="Left";)r=t(r.left);return r.right};A.tailRec=j}}),cwj=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/FromEither.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(S,G,x,R){R===void 0&&(R=x);var P=Object.getOwnPropertyDescriptor(G,x);(!P||("get"in P?!G.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return G[x]}}),Object.defineProperty(S,R,P)}:function(S,G,x,R){R===void 0&&(R=x),S[R]=G[x]}),e=A&&A.__setModuleDefault||(Object.create?function(S,G){Object.defineProperty(S,"default",{enumerable:!0,value:G})}:function(S,G){S.default=G}),t=A&&A.__importStar||function(S){if(S&&S.__esModule)return S;var G={};if(S!=null)for(var x in S)x!=="default"&&Object.prototype.hasOwnProperty.call(S,x)&&j(G,S,x);return e(G,S),G};Object.defineProperty(A,"__esModule",{value:!0}),A.fromOption=o,A.fromPredicate=i,A.fromOptionK=s,A.chainOptionK=l,A.fromEitherK=c,A.chainEitherK=k,A.chainFirstEitherK=u,A.filterOrElse=m,A.tapEither=F;var r=HwA(),a=Nq(),n=t(WC());function o(S){return function(G){return function(x){return S.fromEither(n.isNone(x)?n.left(G()):n.right(x.value))}}}function i(S){return function(G,x){return function(R){return S.fromEither(G(R)?n.right(R):n.left(x(R)))}}}function s(S){var G=o(S);return function(x){var R=G(x);return function(P){return(0,a.flow)(P,R)}}}function l(S,G){var x=s(S);return function(R){var P=x(R);return function(D){return function(y){return G.chain(y,P(D))}}}}function c(S){return function(G){return(0,a.flow)(G,S.fromEither)}}function k(S,G){var x=c(S);return function(R){return function(P){return G.chain(P,x(R))}}}function u(S,G){var x=F(S,G);return function(R){return function(P){return x(P,R)}}}function m(S,G){return function(x,R){return function(P){return G.chain(P,function(D){return S.fromEither(x(D)?n.right(D):n.left(R(D)))})}}}function F(S,G){var x=c(S),R=(0,r.tap)(G);return function(P,D){return R(P,x(D))}}}}),dwj=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Separated.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.right=A.left=A.flap=A.Functor=A.Bifunctor=A.URI=A.bimap=A.mapLeft=A.map=A.separated=void 0;var j=Nq(),e=tY(),t=function(k,u){return{left:k,right:u}};A.separated=t;var r=function(k,u){return(0,j.pipe)(k,(0,A.map)(u))},a=function(k,u){return(0,j.pipe)(k,(0,A.mapLeft)(u))},n=function(k,u,m){return(0,j.pipe)(k,(0,A.bimap)(u,m))},o=function(k){return function(u){return(0,A.separated)((0,A.left)(u),k((0,A.right)(u)))}};A.map=o;var i=function(k){return function(u){return(0,A.separated)(k((0,A.left)(u)),(0,A.right)(u))}};A.mapLeft=i;var s=function(k,u){return function(m){return(0,A.separated)(k((0,A.left)(m)),u((0,A.right)(m)))}};A.bimap=s,A.URI="Separated",A.Bifunctor={URI:A.URI,mapLeft:a,bimap:n},A.Functor={URI:A.URI,map:r},A.flap=(0,e.flap)(A.Functor);var l=function(k){return k.left};A.left=l;var c=function(k){return k.right};A.right=c}}),kwj=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Witherable.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(i,s,l,c){c===void 0&&(c=l);var k=Object.getOwnPropertyDescriptor(s,l);(!k||("get"in k?!s.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(i,c,k)}:function(i,s,l,c){c===void 0&&(c=l),i[c]=s[l]}),e=A&&A.__setModuleDefault||(Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s}),t=A&&A.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var l in i)l!=="default"&&Object.prototype.hasOwnProperty.call(i,l)&&j(s,i,l);return e(s,i),s};Object.defineProperty(A,"__esModule",{value:!0}),A.wiltDefault=a,A.witherDefault=n,A.filterE=o;var r=t(WC());function a(i,s){return function(l){var c=i.traverse(l);return function(k,u){return l.map(c(k,u),s.separate)}}}function n(i,s){return function(l){var c=i.traverse(l);return function(k,u){return l.map(c(k,u),s.compact)}}}function o(i){return function(s){var l=i.wither(s);return function(c){return function(k){return l(k,function(u){return s.map(c(u),function(m){return m?r.some(u):r.none})})}}}}}}),rY=Oo({"../../node_modules/.pnpm/fp-ts@2.16.9/node_modules/fp-ts/lib/Either.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(cA,rA,wA,Xj){Xj===void 0&&(Xj=wA);var fr=Object.getOwnPropertyDescriptor(rA,wA);(!fr||("get"in fr?!rA.__esModule:fr.writable||fr.configurable))&&(fr={enumerable:!0,get:function(){return rA[wA]}}),Object.defineProperty(cA,Xj,fr)}:function(cA,rA,wA,Xj){Xj===void 0&&(Xj=wA),cA[Xj]=rA[wA]}),e=A&&A.__setModuleDefault||(Object.create?function(cA,rA){Object.defineProperty(cA,"default",{enumerable:!0,value:rA})}:function(cA,rA){cA.default=rA}),t=A&&A.__importStar||function(cA){if(cA&&cA.__esModule)return cA;var rA={};if(cA!=null)for(var wA in cA)wA!=="default"&&Object.prototype.hasOwnProperty.call(cA,wA)&&j(rA,cA,wA);return e(rA,cA),rA};Object.defineProperty(A,"__esModule",{value:!0}),A.match=A.foldW=A.matchW=A.isRight=A.isLeft=A.fromOption=A.fromPredicate=A.FromEither=A.MonadThrow=A.throwError=A.ChainRec=A.Extend=A.extend=A.Alt=A.alt=A.altW=A.Bifunctor=A.mapLeft=A.bimap=A.Traversable=A.sequence=A.traverse=A.Foldable=A.reduceRight=A.foldMap=A.reduce=A.Monad=A.Chain=A.Applicative=A.Apply=A.ap=A.apW=A.Pointed=A.of=A.asUnit=A.as=A.Functor=A.map=A.getAltValidation=A.getApplicativeValidation=A.getWitherable=A.getFilterable=A.getCompactable=A.getSemigroup=A.getEq=A.getShow=A.URI=A.flatMap=A.right=A.left=void 0,A.either=A.stringifyJSON=A.chainFirstW=A.chainFirst=A.chain=A.chainW=A.sequenceArray=A.traverseArray=A.traverseArrayWithIndex=A.traverseReadonlyArrayWithIndex=A.traverseReadonlyNonEmptyArrayWithIndex=A.ApT=A.apSW=A.apS=A.bindW=A.bind=A.let=A.bindTo=A.Do=A.exists=A.toUnion=A.chainNullableK=A.fromNullableK=A.tryCatchK=A.tryCatch=A.fromNullable=A.orElse=A.orElseW=A.swap=A.filterOrElseW=A.filterOrElse=A.flatMapOption=A.flatMapNullable=A.liftOption=A.liftNullable=A.chainOptionKW=A.chainOptionK=A.fromOptionK=A.duplicate=A.flatten=A.flattenW=A.tap=A.apSecondW=A.apSecond=A.apFirstW=A.apFirst=A.flap=A.getOrElse=A.getOrElseW=A.fold=void 0,A.getValidationMonoid=A.getValidationSemigroup=A.getApplyMonoid=A.getApplySemigroup=void 0,A.toError=ct,A.elem=ut,A.parseJSON=HA,A.getValidation=Bj;var r=swj(),a=SwA(),n=t(HwA()),o=lwj(),i=cwj(),s=Nq(),l=tY(),c=t(WC()),k=dwj(),u=kwj();A.left=c.left,A.right=c.right,A.flatMap=(0,s.dual)(2,function(cA,rA){return(0,A.isLeft)(cA)?cA:rA(cA.right)});var m=function(cA,rA){return(0,s.pipe)(cA,(0,A.map)(rA))},F=function(cA,rA){return(0,s.pipe)(cA,(0,A.ap)(rA))},S=function(cA,rA,wA){return(0,s.pipe)(cA,(0,A.reduce)(rA,wA))},G=function(cA){return function(rA,wA){var Xj=(0,A.foldMap)(cA);return(0,s.pipe)(rA,Xj(wA))}},x=function(cA,rA,wA){return(0,s.pipe)(cA,(0,A.reduceRight)(rA,wA))},R=function(cA){var rA=(0,A.traverse)(cA);return function(wA,Xj){return(0,s.pipe)(wA,rA(Xj))}},P=function(cA,rA,wA){return(0,s.pipe)(cA,(0,A.bimap)(rA,wA))},D=function(cA,rA){return(0,s.pipe)(cA,(0,A.mapLeft)(rA))},y=function(cA,rA){return(0,s.pipe)(cA,(0,A.alt)(rA))},h=function(cA,rA){return(0,s.pipe)(cA,(0,A.extend)(rA))},O=function(cA,rA){return(0,o.tailRec)(rA(cA),function(wA){return(0,A.isLeft)(wA)?(0,A.right)((0,A.left)(wA.left)):(0,A.isLeft)(wA.right)?(0,A.left)(rA(wA.right.left)):(0,A.right)((0,A.right)(wA.right.right))})};A.URI="Either";var Q=function(cA,rA){return{show:function(wA){return(0,A.isLeft)(wA)?"left(".concat(cA.show(wA.left),")"):"right(".concat(rA.show(wA.right),")")}}};A.getShow=Q;var AA=function(cA,rA){return{equals:function(wA,Xj){return wA===Xj||((0,A.isLeft)(wA)?(0,A.isLeft)(Xj)&&cA.equals(wA.left,Xj.left):(0,A.isRight)(Xj)&&rA.equals(wA.right,Xj.right))}}};A.getEq=AA;var nA=function(cA){return{concat:function(rA,wA){return(0,A.isLeft)(wA)?rA:(0,A.isLeft)(rA)?wA:(0,A.right)(cA.concat(rA.right,wA.right))}}};A.getSemigroup=nA;var bA=function(cA){var rA=(0,A.left)(cA.empty);return{URI:A.URI,_E:void 0,compact:function(wA){return(0,A.isLeft)(wA)?wA:wA.right._tag==="None"?rA:(0,A.right)(wA.right.value)},separate:function(wA){return(0,A.isLeft)(wA)?(0,k.separated)(wA,wA):(0,A.isLeft)(wA.right)?(0,k.separated)((0,A.right)(wA.right.left),rA):(0,k.separated)(rA,(0,A.right)(wA.right.right))}}};A.getCompactable=bA;var XA=function(cA){var rA=(0,A.left)(cA.empty),wA=(0,A.getCompactable)(cA),Xj=wA.compact,fr=wA.separate,Gn=function(na,zn){return(0,A.isLeft)(na)||zn(na.right)?na:rA},Bi=function(na,zn){return(0,A.isLeft)(na)?(0,k.separated)(na,na):zn(na.right)?(0,k.separated)(rA,(0,A.right)(na.right)):(0,k.separated)((0,A.right)(na.right),rA)};return{URI:A.URI,_E:void 0,map:m,compact:Xj,separate:fr,filter:Gn,filterMap:function(na,zn){if((0,A.isLeft)(na))return na;var Un=zn(na.right);return Un._tag==="None"?rA:(0,A.right)(Un.value)},partition:Bi,partitionMap:function(na,zn){if((0,A.isLeft)(na))return(0,k.separated)(na,na);var Un=zn(na.right);return(0,A.isLeft)(Un)?(0,k.separated)((0,A.right)(Un.left),rA):(0,k.separated)(rA,(0,A.right)(Un.right))}}};A.getFilterable=XA;var dj=function(cA){var rA=(0,A.getFilterable)(cA),wA=(0,A.getCompactable)(cA);return{URI:A.URI,_E:void 0,map:m,compact:rA.compact,separate:rA.separate,filter:rA.filter,filterMap:rA.filterMap,partition:rA.partition,partitionMap:rA.partitionMap,traverse:R,sequence:A.sequence,reduce:S,foldMap:G,reduceRight:x,wither:(0,u.witherDefault)(A.Traversable,wA),wilt:(0,u.wiltDefault)(A.Traversable,wA)}};A.getWitherable=dj;var yA=function(cA){return{URI:A.URI,_E:void 0,map:m,ap:function(rA,wA){return(0,A.isLeft)(rA)?(0,A.isLeft)(wA)?(0,A.left)(cA.concat(rA.left,wA.left)):rA:(0,A.isLeft)(wA)?wA:(0,A.right)(rA.right(wA.right))},of:A.of}};A.getApplicativeValidation=yA;var tj=function(cA){return{URI:A.URI,_E:void 0,map:m,alt:function(rA,wA){if((0,A.isRight)(rA))return rA;var Xj=wA();return(0,A.isLeft)(Xj)?(0,A.left)(cA.concat(rA.left,Xj.left)):Xj}}};A.getAltValidation=tj;var LA=function(cA){return function(rA){return(0,A.isLeft)(rA)?rA:(0,A.right)(cA(rA.right))}};A.map=LA,A.Functor={URI:A.URI,map:m},A.as=(0,s.dual)(2,(0,l.as)(A.Functor)),A.asUnit=(0,l.asUnit)(A.Functor),A.of=A.right,A.Pointed={URI:A.URI,of:A.of};var Qj=function(cA){return function(rA){return(0,A.isLeft)(rA)?rA:(0,A.isLeft)(cA)?cA:(0,A.right)(rA.right(cA.right))}};A.apW=Qj,A.ap=A.apW,A.Apply={URI:A.URI,map:m,ap:F},A.Applicative={URI:A.URI,map:m,ap:F,of:A.of},A.Chain={URI:A.URI,map:m,ap:F,chain:A.flatMap},A.Monad={URI:A.URI,map:m,ap:F,of:A.of,chain:A.flatMap};var Oj=function(cA,rA){return function(wA){return(0,A.isLeft)(wA)?cA:rA(cA,wA.right)}};A.reduce=Oj;var Ej=function(cA){return function(rA){return function(wA){return(0,A.isLeft)(wA)?cA.empty:rA(wA.right)}}};A.foldMap=Ej;var Yj=function(cA,rA){return function(wA){return(0,A.isLeft)(wA)?cA:rA(wA.right,cA)}};A.reduceRight=Yj,A.Foldable={URI:A.URI,reduce:S,foldMap:G,reduceRight:x};var Tj=function(cA){return function(rA){return function(wA){return(0,A.isLeft)(wA)?cA.of((0,A.left)(wA.left)):cA.map(rA(wA.right),A.right)}}};A.traverse=Tj;var mj=function(cA){return function(rA){return(0,A.isLeft)(rA)?cA.of((0,A.left)(rA.left)):cA.map(rA.right,A.right)}};A.sequence=mj,A.Traversable={URI:A.URI,map:m,reduce:S,foldMap:G,reduceRight:x,traverse:R,sequence:A.sequence};var qj=function(cA,rA){return function(wA){return(0,A.isLeft)(wA)?(0,A.left)(cA(wA.left)):(0,A.right)(rA(wA.right))}};A.bimap=qj;var _e=function(cA){return function(rA){return(0,A.isLeft)(rA)?(0,A.left)(cA(rA.left)):rA}};A.mapLeft=_e,A.Bifunctor={URI:A.URI,bimap:P,mapLeft:D};var Tt=function(cA){return function(rA){return(0,A.isLeft)(rA)?cA():rA}};A.altW=Tt,A.alt=A.altW,A.Alt={URI:A.URI,map:m,alt:y};var Cj=function(cA){return function(rA){return(0,A.isLeft)(rA)?rA:(0,A.right)(cA(rA))}};A.extend=Cj,A.Extend={URI:A.URI,map:m,extend:h},A.ChainRec={URI:A.URI,map:m,ap:F,chain:A.flatMap,chainRec:O},A.throwError=A.left,A.MonadThrow={URI:A.URI,map:m,ap:F,of:A.of,chain:A.flatMap,throwError:A.throwError},A.FromEither={URI:A.URI,fromEither:s.identity},A.fromPredicate=(0,i.fromPredicate)(A.FromEither),A.fromOption=(0,i.fromOption)(A.FromEither),A.isLeft=c.isLeft,A.isRight=c.isRight;var xt=function(cA,rA){return function(wA){return(0,A.isLeft)(wA)?cA(wA.left):rA(wA.right)}};A.matchW=xt,A.foldW=A.matchW,A.match=A.matchW,A.fold=A.match;var At=function(cA){return function(rA){return(0,A.isLeft)(rA)?cA(rA.left):rA.right}};A.getOrElseW=At,A.getOrElse=A.getOrElseW,A.flap=(0,l.flap)(A.Functor),A.apFirst=(0,a.apFirst)(A.Apply),A.apFirstW=A.apFirst,A.apSecond=(0,a.apSecond)(A.Apply),A.apSecondW=A.apSecond,A.tap=(0,s.dual)(2,n.tap(A.Chain)),A.flattenW=(0,A.flatMap)(s.identity),A.flatten=A.flattenW,A.duplicate=(0,A.extend)(s.identity),A.fromOptionK=(0,i.fromOptionK)(A.FromEither),A.chainOptionK=(0,i.chainOptionK)(A.FromEither,A.Chain),A.chainOptionKW=A.chainOptionK;var Ce={fromEither:A.FromEither.fromEither};A.liftNullable=c.liftNullable(Ce),A.liftOption=c.liftOption(Ce);var fe={flatMap:A.flatMap};A.flatMapNullable=c.flatMapNullable(Ce,fe),A.flatMapOption=c.flatMapOption(Ce,fe),A.filterOrElse=(0,i.filterOrElse)(A.FromEither,A.Chain),A.filterOrElseW=A.filterOrElse;var ir=function(cA){return(0,A.isLeft)(cA)?(0,A.right)(cA.left):(0,A.left)(cA.right)};A.swap=ir;var Ar=function(cA){return function(rA){return(0,A.isLeft)(rA)?cA(rA.left):rA}};A.orElseW=Ar,A.orElse=A.orElseW;var Pt=function(cA){return function(rA){return rA==null?(0,A.left)(cA):(0,A.right)(rA)}};A.fromNullable=Pt;var Jr=function(cA,rA){try{return(0,A.right)(cA())}catch(wA){return(0,A.left)(rA(wA))}};A.tryCatch=Jr;var Kr=function(cA,rA){return function(){for(var wA=[],Xj=0;Xj<arguments.length;Xj++)wA[Xj]=arguments[Xj];return(0,A.tryCatch)(function(){return cA.apply(void 0,wA)},rA)}};A.tryCatchK=Kr;var _r=function(cA){var rA=(0,A.fromNullable)(cA);return function(wA){return(0,s.flow)(wA,rA)}};A.fromNullableK=_r;var ca=function(cA){var rA=(0,A.fromNullableK)(cA);return function(wA){return(0,A.flatMap)(rA(wA))}};A.chainNullableK=ca,A.toUnion=(0,A.foldW)(s.identity,s.identity);function ct(cA){try{return cA instanceof Error?cA:new Error(String(cA))}catch{return new Error}}function ut(cA){return function(rA,wA){if(wA===void 0){var Xj=ut(cA);return function(fr){return Xj(rA,fr)}}return(0,A.isLeft)(wA)?!1:cA.equals(rA,wA.right)}}var hr=function(cA){return function(rA){return(0,A.isLeft)(rA)?!1:cA(rA.right)}};A.exists=hr,A.Do=(0,A.of)(c.emptyRecord),A.bindTo=(0,l.bindTo)(A.Functor);var o6=(0,l.let)(A.Functor);A.let=o6,A.bind=n.bind(A.Chain),A.bindW=A.bind,A.apS=(0,a.apS)(A.Apply),A.apSW=A.apS,A.ApT=(0,A.of)(c.emptyReadonlyArray);var se=function(cA){return function(rA){var wA=cA(0,c.head(rA));if((0,A.isLeft)(wA))return wA;for(var Xj=[wA.right],fr=1;fr<rA.length;fr++){var Gn=cA(fr,rA[fr]);if((0,A.isLeft)(Gn))return Gn;Xj.push(Gn.right)}return(0,A.right)(Xj)}};A.traverseReadonlyNonEmptyArrayWithIndex=se;var iA=function(cA){var rA=(0,A.traverseReadonlyNonEmptyArrayWithIndex)(cA);return function(wA){return c.isNonEmpty(wA)?rA(wA):A.ApT}};A.traverseReadonlyArrayWithIndex=iA,A.traverseArrayWithIndex=A.traverseReadonlyArrayWithIndex;var hA=function(cA){return(0,A.traverseReadonlyArrayWithIndex)(function(rA,wA){return cA(wA)})};A.traverseArray=hA,A.sequenceArray=(0,A.traverseArray)(s.identity),A.chainW=A.flatMap,A.chain=A.flatMap,A.chainFirst=A.tap,A.chainFirstW=A.tap;function HA(cA,rA){return(0,A.tryCatch)(function(){return JSON.parse(cA)},rA)}var fj=function(cA,rA){return(0,A.tryCatch)(function(){var wA=JSON.stringify(cA);if(typeof wA!="string")throw new Error("Converting unsupported structure to JSON");return wA},rA)};A.stringifyJSON=fj,A.either={URI:A.URI,map:m,of:A.of,ap:F,chain:A.flatMap,reduce:S,foldMap:G,reduceRight:x,traverse:R,sequence:A.sequence,bimap:P,mapLeft:D,alt:y,extend:h,chainRec:O,throwError:A.throwError},A.getApplySemigroup=(0,a.getApplySemigroup)(A.Apply),A.getApplyMonoid=(0,r.getApplicativeMonoid)(A.Applicative);var xj=function(cA,rA){return(0,a.getApplySemigroup)((0,A.getApplicativeValidation)(cA))(rA)};A.getValidationSemigroup=xj;var ye=function(cA,rA){return(0,r.getApplicativeMonoid)((0,A.getApplicativeValidation)(cA))(rA)};A.getValidationMonoid=ye;function Bj(cA){var rA=(0,A.getApplicativeValidation)(cA).ap,wA=(0,A.getAltValidation)(cA).alt;return{URI:A.URI,_E:void 0,map:m,of:A.of,chain:A.flatMap,bimap:P,mapLeft:D,reduce:S,foldMap:G,reduceRight:x,extend:h,traverse:R,sequence:A.sequence,chainRec:O,throwError:A.throwError,ap:rA,alt:wA}}}}),uwj=Oo({"../../node_modules/.pnpm/io-ts@2.2.22_fp-ts@2.16.9/node_modules/io-ts/lib/index.js"(A){"use strict";var j=A&&A.__extends||function(){var w=function(K,Y){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,dA){N.__proto__=dA}||function(N,dA){for(var gA in dA)Object.prototype.hasOwnProperty.call(dA,gA)&&(N[gA]=dA[gA])},w(K,Y)};return function(K,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");w(K,Y);function N(){this.constructor=K}K.prototype=Y===null?Object.create(Y):(N.prototype=Y.prototype,new N)}}(),e=A&&A.__assign||function(){return e=Object.assign||function(w){for(var K,Y=1,N=arguments.length;Y<N;Y++){K=arguments[Y];for(var dA in K)Object.prototype.hasOwnProperty.call(K,dA)&&(w[dA]=K[dA])}return w},e.apply(this,arguments)},t=A&&A.__spreadArray||function(w,K,Y){if(Y||arguments.length===2)for(var N=0,dA=K.length,gA;N<dA;N++)(gA||!(N in K))&&(gA||(gA=Array.prototype.slice.call(K,0,N)),gA[N]=K[N]);return w.concat(gA||Array.prototype.slice.call(K))};Object.defineProperty(A,"__esModule",{value:!0}),A.partial=A.PartialType=A.type=A.InterfaceType=A.array=A.ArrayType=A.recursion=A.RecursiveType=A.Int=A.brand=A.RefinementType=A.keyof=A.KeyofType=A.literal=A.LiteralType=A.void=A.undefined=A.null=A.UnknownRecord=A.AnyDictionaryType=A.UnknownArray=A.AnyArrayType=A.boolean=A.BooleanType=A.bigint=A.BigIntType=A.number=A.NumberType=A.string=A.StringType=A.unknown=A.UnknownType=A.voidType=A.VoidType=A.UndefinedType=A.nullType=A.NullType=A.getIndex=A.getTags=A.emptyTags=A.mergeAll=A.getDomainKeys=A.appendContext=A.getContextEntry=A.getFunctionName=A.identity=A.Type=A.success=A.failure=A.failures=void 0,A.alias=A.clean=A.StrictType=A.dictionary=A.object=A.ObjectType=A.Dictionary=A.getDefaultContext=A.getValidationError=A.interface=A.Array=A.taggedUnion=A.TaggedUnionType=A.Integer=A.refinement=A.any=A.AnyType=A.never=A.NeverType=A.Function=A.FunctionType=A.exact=A.ExactType=A.strict=A.readonlyArray=A.ReadonlyArrayType=A.readonly=A.ReadonlyType=A.tuple=A.TupleType=A.intersection=A.IntersectionType=A.union=A.UnionType=A.record=A.DictionaryType=void 0;var r=rY();A.failures=r.left;var a=function(w,K,Y){return(0,A.failures)([{value:w,context:K,message:Y}])};A.failure=a,A.success=r.right;var n=function(){function w(K,Y,N,dA){this.name=K,this.is=Y,this.validate=N,this.encode=dA,this.decode=this.decode.bind(this)}return w.prototype.pipe=function(K,Y){var N=this;return Y===void 0&&(Y="pipe(".concat(this.name,", ").concat(K.name,")")),new w(Y,K.is,function(dA,gA){var fA=N.validate(dA,gA);return(0,r.isLeft)(fA)?fA:K.validate(fA.right,gA)},this.encode===A.identity&&K.encode===A.identity?A.identity:function(dA){return N.encode(K.encode(dA))})},w.prototype.asDecoder=function(){return this},w.prototype.asEncoder=function(){return this},w.prototype.decode=function(K){return this.validate(K,[{key:"",type:this,actual:K}])},w}();A.Type=n;var o=function(w){return w};A.identity=o;function i(w){return w.displayName||w.name||"<function".concat(w.length,">")}A.getFunctionName=i;function s(w,K){return{key:w,type:K}}A.getContextEntry=s;function l(w,K,Y,N){for(var dA=w.length,gA=Array(dA+1),fA=0;fA<dA;fA++)gA[fA]=w[fA];return gA[dA]={key:K,type:Y,actual:N},gA}A.appendContext=l;function c(w,K){for(var Y=K.length,N=0;N<Y;N++)w.push(K[N])}var k=Object.prototype.hasOwnProperty;function u(w){return Object.keys(w).map(function(K){return"".concat(K,": ").concat(w[K].name)}).join(", ")}function m(w){for(var K=0;K<w.length;K++)if(w[K].encode!==A.identity)return!1;return!0}function F(w){return"{ ".concat(u(w)," }")}function S(w){return"Partial<".concat(w,">")}function G(w,K,Y,N){N===void 0&&(N="{ [K in ".concat(K.name,"]: ").concat(Y.name," }"));for(var dA=w.length,gA={},fA=0;fA<dA;fA++)gA[w[fA]]=Y;var BA=(0,A.strict)(gA,N);return new Xj(N,function(UA){return BA.is(UA)},BA.validate,BA.encode,K,Y)}function x(w){var K;if(yA(w)){var Y=w.value;if(A.string.is(Y))return K={},K[Y]=null,K}else{if(tj(w))return w.keys;if(mj(w)){var N=w.types.map(function(dA){return x(dA)});return N.some(fe.is)?void 0:Object.assign.apply(Object,t([{}],N,!1))}}}A.getDomainKeys=x;function R(w,K){for(var Y=Object.keys(w),N=Y.length,dA=!1,gA={},fA=0;fA<N;fA++){var BA=Y[fA];K.is(BA)?gA[BA]=w[BA]:dA=!0}return dA?gA:w}function P(w,K,Y){return Y===void 0&&(Y="{ [K in ".concat(w.name,"]: ").concat(K.name," }")),new Xj(Y,function(N){return A.UnknownRecord.is(N)?Object.keys(N).every(function(dA){return!w.is(dA)||K.is(N[dA])}):dj(K)&&Array.isArray(N)},function(N,dA){if(A.UnknownRecord.is(N)){for(var gA={},fA=[],BA=Object.keys(N),UA=BA.length,hj=!1,Zj=0;Zj<UA;Zj++){var JA=BA[Zj],Hj=N[JA],Jj=w.validate(JA,l(dA,JA,w,JA));if((0,r.isLeft)(Jj))hj=!0;else{var ce=Jj.right;hj=hj||ce!==JA,JA=ce;var ne=K.validate(Hj,l(dA,JA,K,Hj));if((0,r.isLeft)(ne))c(fA,ne.left);else{var $j=ne.right;hj=hj||$j!==Hj,gA[JA]=$j}}}return fA.length>0?(0,A.failures)(fA):(0,A.success)(hj?gA:N)}return dj(K)&&Array.isArray(N)?(0,A.success)(N):(0,A.failure)(N,dA)},w.encode===A.identity&&K.encode===A.identity?function(N){return R(N,w)}:function(N){for(var dA={},gA=Object.keys(R(N,w)),fA=gA.length,BA=0;BA<fA;BA++){var UA=gA[BA];dA[String(w.encode(UA))]=K.encode(N[UA])}return dA},w,K)}function D(w){return"("+w.map(function(K){return K.name}).join(" | ")+")"}function y(w,K){for(var Y=!0,N=!0,dA=!A.UnknownRecord.is(w),gA=0,fA=K;gA<fA.length;gA++){var BA=fA[gA];BA!==w&&(Y=!1),A.UnknownRecord.is(BA)&&(N=!1)}if(Y)return w;if(N)return K[K.length-1];for(var UA={},hj=0,Zj=K;hj<Zj.length;hj++){var BA=Zj[hj];for(var JA in BA)(!k.call(UA,JA)||dA||BA[JA]!==w[JA])&&(UA[JA]=BA[JA])}return UA}A.mergeAll=y;function h(w){switch(w._tag){case"RefinementType":case"ReadonlyType":return h(w.type);case"InterfaceType":case"StrictType":case"PartialType":return w.props;case"IntersectionType":return w.types.reduce(function(K,Y){return Object.assign(K,h(Y))},{})}}function O(w,K){for(var Y=Object.getOwnPropertyNames(w),N=!1,dA={},gA=0;gA<Y.length;gA++){var fA=Y[gA];k.call(K,fA)?dA[fA]=w[fA]:N=!0}return N?dA:w}function Q(w){return LA(w)?"{| ".concat(u(w.props)," |}"):Qj(w)?S("{| ".concat(u(w.props)," |}")):"Exact<".concat(w.name,">")}function AA(w){return w.length>0}A.emptyTags={};function nA(w,K){for(var Y=[],N=0,dA=w;N<dA.length;N++){var gA=dA[N];K.indexOf(gA)!==-1&&Y.push(gA)}return Y}function bA(w,K){if(w===A.emptyTags)return K;if(K===A.emptyTags)return w;var Y=Object.assign({},w);for(var N in K)if(k.call(w,N)){var dA=nA(w[N],K[N]);if(AA(dA))Y[N]=dA;else{Y=A.emptyTags;break}}else Y[N]=K[N];return Y}function XA(w,K){if(w===A.emptyTags||K===A.emptyTags)return A.emptyTags;var Y=A.emptyTags;for(var N in w)if(k.call(K,N)){var dA=nA(w[N],K[N]);dA.length===0&&(Y===A.emptyTags&&(Y={}),Y[N]=w[N].concat(K[N]))}return Y}function dj(w){return w._tag==="AnyType"}function yA(w){return w._tag==="LiteralType"}function tj(w){return w._tag==="KeyofType"}function LA(w){return w._tag==="InterfaceType"}function Qj(w){return w._tag==="PartialType"}function Oj(w){return w._tag==="StrictType"}function Ej(w){return w._tag==="ExactType"}function Yj(w){return w._tag==="RefinementType"}function Tj(w){return w._tag==="IntersectionType"}function mj(w){return w._tag==="UnionType"}function qj(w){return w._tag==="RecursiveType"}function _e(w){return w._tag==="ReadonlyType"}var Tt=[];function Cj(w){if(Tt.indexOf(w)!==-1)return A.emptyTags;if(LA(w)||Oj(w)){var K=A.emptyTags;for(var Y in w.props){var N=w.props[Y];yA(N)&&(K===A.emptyTags&&(K={}),K[Y]=[N.value])}return K}else{if(Ej(w)||Yj(w)||_e(w))return Cj(w.type);if(Tj(w))return w.types.reduce(function(gA,fA){return bA(gA,Cj(fA))},A.emptyTags);if(mj(w))return w.types.slice(1).reduce(function(gA,fA){return XA(gA,Cj(fA))},Cj(w.types[0]));if(qj(w)){Tt.push(w);var dA=Cj(w.type);return Tt.pop(),dA}}return A.emptyTags}A.getTags=Cj;function xt(w){var K=Cj(w[0]),Y=Object.keys(K),N=w.length,dA=function(hj){for(var Zj=K[hj].slice(),JA=[K[hj]],Hj=1;Hj<N;Hj++){var Jj=w[Hj],ce=Cj(Jj),ne=ce[hj];if(ne===void 0)return"continue-keys";if(ne.some(function($j){return Zj.indexOf($j)!==-1}))return"continue-keys";Zj.push.apply(Zj,ne),JA.push(ne)}return{value:[hj,JA]}};A:for(var gA=0,fA=Y;gA<fA.length;gA++){var BA=fA[gA],UA=dA(BA);if(typeof UA=="object")return UA.value;switch(UA){case"continue-keys":continue A}}}A.getIndex=xt;var At=function(w){j(K,w);function K(){var Y=w.call(this,"null",function(N){return N===null},function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="NullType",Y}return K}(n);A.NullType=At,A.nullType=new At,A.null=A.nullType;var Ce=function(w){j(K,w);function K(){var Y=w.call(this,"undefined",function(N){return N===void 0},function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="UndefinedType",Y}return K}(n);A.UndefinedType=Ce;var fe=new Ce;A.undefined=fe;var ir=function(w){j(K,w);function K(){var Y=w.call(this,"void",fe.is,fe.validate,A.identity)||this;return Y._tag="VoidType",Y}return K}(n);A.VoidType=ir,A.voidType=new ir,A.void=A.voidType;var Ar=function(w){j(K,w);function K(){var Y=w.call(this,"unknown",function(N){return!0},A.success,A.identity)||this;return Y._tag="UnknownType",Y}return K}(n);A.UnknownType=Ar,A.unknown=new Ar;var Pt=function(w){j(K,w);function K(){var Y=w.call(this,"string",function(N){return typeof N=="string"},function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="StringType",Y}return K}(n);A.StringType=Pt,A.string=new Pt;var Jr=function(w){j(K,w);function K(){var Y=w.call(this,"number",function(N){return typeof N=="number"},function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="NumberType",Y}return K}(n);A.NumberType=Jr,A.number=new Jr;var Kr=function(w){j(K,w);function K(){var Y=w.call(this,"bigint",function(N){return typeof N=="bigint"},function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="BigIntType",Y}return K}(n);A.BigIntType=Kr,A.bigint=new Kr;var _r=function(w){j(K,w);function K(){var Y=w.call(this,"boolean",function(N){return typeof N=="boolean"},function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="BooleanType",Y}return K}(n);A.BooleanType=_r,A.boolean=new _r;var ca=function(w){j(K,w);function K(){var Y=w.call(this,"UnknownArray",Array.isArray,function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="AnyArrayType",Y}return K}(n);A.AnyArrayType=ca,A.UnknownArray=new ca,A.Array=A.UnknownArray;var ct=function(w){j(K,w);function K(){var Y=w.call(this,"UnknownRecord",function(N){return N!==null&&typeof N=="object"&&!Array.isArray(N)},function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="AnyDictionaryType",Y}return K}(n);A.AnyDictionaryType=ct,A.UnknownRecord=new ct;var ut=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.value=fA,BA._tag="LiteralType",BA}return K}(n);A.LiteralType=ut;function hr(w,K){K===void 0&&(K=JSON.stringify(w));var Y=function(N){return N===w};return new ut(K,Y,function(N,dA){return Y(N)?(0,A.success)(w):(0,A.failure)(N,dA)},A.identity,w)}A.literal=hr;var o6=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.keys=fA,BA._tag="KeyofType",BA}return K}(n);A.KeyofType=o6;function se(w,K){K===void 0&&(K=Object.keys(w).map(function(N){return JSON.stringify(N)}).join(" | "));var Y=function(N){return A.string.is(N)&&k.call(w,N)};return new o6(K,Y,function(N,dA){return Y(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity,w)}A.keyof=se;var iA=function(w){j(K,w);function K(Y,N,dA,gA,fA,BA){var UA=w.call(this,Y,N,dA,gA)||this;return UA.type=fA,UA.predicate=BA,UA._tag="RefinementType",UA}return K}(n);A.RefinementType=iA;function hA(w,K,Y){return f(w,K,Y)}A.brand=hA,A.Int=hA(A.number,function(w){return Number.isInteger(w)},"Int");var HA=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.runDefinition=fA,BA._tag="RecursiveType",BA}return K}(n);A.RecursiveType=HA,Object.defineProperty(HA.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});function fj(w,K){var Y,N=function(){return Y||(Y=K(dA),Y.name=w),Y},dA=new HA(w,function(gA){return N().is(gA)},function(gA,fA){return N().validate(gA,fA)},function(gA){return N().encode(gA)},N);return dA}A.recursion=fj;var xj=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.type=fA,BA._tag="ArrayType",BA}return K}(n);A.ArrayType=xj;function ye(w,K){return K===void 0&&(K="Array<".concat(w.name,">")),new xj(K,function(Y){return A.UnknownArray.is(Y)&&Y.every(w.is)},function(Y,N){var dA=A.UnknownArray.validate(Y,N);if((0,r.isLeft)(dA))return dA;for(var gA=dA.right,fA=gA.length,BA=gA,UA=[],hj=0;hj<fA;hj++){var Zj=gA[hj],JA=w.validate(Zj,l(N,String(hj),w,Zj));if((0,r.isLeft)(JA))c(UA,JA.left);else{var Hj=JA.right;Hj!==Zj&&(BA===gA&&(BA=gA.slice()),BA[hj]=Hj)}}return UA.length>0?(0,A.failures)(UA):(0,A.success)(BA)},w.encode===A.identity?A.identity:function(Y){return Y.map(w.encode)},w)}A.array=ye;var Bj=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.props=fA,BA._tag="InterfaceType",BA}return K}(n);A.InterfaceType=Bj;function cA(w,K){K===void 0&&(K=F(w));var Y=Object.keys(w),N=Y.map(function(gA){return w[gA]}),dA=Y.length;return new Bj(K,function(gA){if(A.UnknownRecord.is(gA)){for(var fA=0;fA<dA;fA++){var BA=Y[fA],UA=gA[BA];if(UA===void 0&&!k.call(gA,BA)||!N[fA].is(UA))return!1}return!0}return!1},function(gA,fA){var BA=A.UnknownRecord.validate(gA,fA);if((0,r.isLeft)(BA))return BA;for(var UA=BA.right,hj=UA,Zj=[],JA=0;JA<dA;JA++){var Hj=Y[JA],Jj=hj[Hj],ce=N[JA],ne=ce.validate(Jj,l(fA,Hj,ce,Jj));if((0,r.isLeft)(ne))c(Zj,ne.left);else{var $j=ne.right;($j!==Jj||$j===void 0&&!k.call(hj,Hj))&&(hj===UA&&(hj=e({},UA)),hj[Hj]=$j)}}return Zj.length>0?(0,A.failures)(Zj):(0,A.success)(hj)},m(N)?A.identity:function(gA){for(var fA=e({},gA),BA=0;BA<dA;BA++){var UA=Y[BA],hj=N[BA].encode;hj!==A.identity&&(fA[UA]=hj(gA[UA]))}return fA},w)}A.type=cA,A.interface=cA;var rA=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.props=fA,BA._tag="PartialType",BA}return K}(n);A.PartialType=rA;function wA(w,K){K===void 0&&(K=S(F(w)));var Y=Object.keys(w),N=Y.map(function(gA){return w[gA]}),dA=Y.length;return new rA(K,function(gA){if(A.UnknownRecord.is(gA)){for(var fA=0;fA<dA;fA++){var BA=Y[fA],UA=gA[BA];if(UA!==void 0&&!w[BA].is(UA))return!1}return!0}return!1},function(gA,fA){var BA=A.UnknownRecord.validate(gA,fA);if((0,r.isLeft)(BA))return BA;for(var UA=BA.right,hj=UA,Zj=[],JA=0;JA<dA;JA++){var Hj=Y[JA],Jj=hj[Hj],ce=w[Hj],ne=ce.validate(Jj,l(fA,Hj,ce,Jj));if((0,r.isLeft)(ne))Jj!==void 0&&c(Zj,ne.left);else{var $j=ne.right;$j!==Jj&&(hj===UA&&(hj=e({},UA)),hj[Hj]=$j)}}return Zj.length>0?(0,A.failures)(Zj):(0,A.success)(hj)},m(N)?A.identity:function(gA){for(var fA=e({},gA),BA=0;BA<dA;BA++){var UA=Y[BA],hj=gA[UA];hj!==void 0&&(fA[UA]=N[BA].encode(hj))}return fA},w)}A.partial=wA;var Xj=function(w){j(K,w);function K(Y,N,dA,gA,fA,BA){var UA=w.call(this,Y,N,dA,gA)||this;return UA.domain=fA,UA.codomain=BA,UA._tag="DictionaryType",UA}return K}(n);A.DictionaryType=Xj;function fr(w,K,Y){var N=x(w);return N?G(Object.keys(N),w,K,Y):P(w,K,Y)}A.record=fr;var Gn=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.types=fA,BA._tag="UnionType",BA}return K}(n);A.UnionType=Gn;function Bi(w,K){K===void 0&&(K=D(w));var Y=xt(w);if(Y!==void 0&&w.length>0){var N=Y[0],dA=Y[1],gA=dA.length,fA=function(BA){for(var UA=0;UA<gA;UA++)if(dA[UA].indexOf(BA)!==-1)return UA};return new C(K,function(BA){if(A.UnknownRecord.is(BA)){var UA=fA(BA[N]);return UA!==void 0?w[UA].is(BA):!1}return!1},function(BA,UA){var hj=A.UnknownRecord.validate(BA,UA);if((0,r.isLeft)(hj))return hj;var Zj=hj.right,JA=fA(Zj[N]);if(JA===void 0)return(0,A.failure)(BA,UA);var Hj=w[JA];return Hj.validate(Zj,l(UA,String(JA),Hj,Zj))},m(w)?A.identity:function(BA){var UA=fA(BA[N]);if(UA===void 0)throw new Error("no codec found to encode value in union codec ".concat(K));return w[UA].encode(BA)},w,N)}else return new Gn(K,function(BA){return w.some(function(UA){return UA.is(BA)})},function(BA,UA){for(var hj=[],Zj=0;Zj<w.length;Zj++){var JA=w[Zj],Hj=JA.validate(BA,l(UA,String(Zj),JA,BA));if((0,r.isLeft)(Hj))c(hj,Hj.left);else return(0,A.success)(Hj.right)}return(0,A.failures)(hj)},m(w)?A.identity:function(BA){for(var UA=0,hj=w;UA<hj.length;UA++){var Zj=hj[UA];if(Zj.is(BA))return Zj.encode(BA)}throw new Error("no codec found to encode value in union type ".concat(K))},w)}A.union=Bi;var na=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.types=fA,BA._tag="IntersectionType",BA}return K}(n);A.IntersectionType=na;function zn(w,K){K===void 0&&(K="(".concat(w.map(function(N){return N.name}).join(" & "),")"));var Y=w.length;return new na(K,function(N){return w.every(function(dA){return dA.is(N)})},w.length===0?A.success:function(N,dA){for(var gA=[],fA=[],BA=0;BA<Y;BA++){var UA=w[BA],hj=UA.validate(N,l(dA,String(BA),UA,N));(0,r.isLeft)(hj)?c(fA,hj.left):gA.push(hj.right)}return fA.length>0?(0,A.failures)(fA):(0,A.success)(y(N,gA))},w.length===0?A.identity:function(N){return y(N,w.map(function(dA){return dA.encode(N)}))},w)}A.intersection=zn;var Un=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.types=fA,BA._tag="TupleType",BA}return K}(n);A.TupleType=Un;function zE(w,K){K===void 0&&(K="[".concat(w.map(function(N){return N.name}).join(", "),"]"));var Y=w.length;return new Un(K,function(N){return A.UnknownArray.is(N)&&N.length===Y&&w.every(function(dA,gA){return dA.is(N[gA])})},function(N,dA){var gA=A.UnknownArray.validate(N,dA);if((0,r.isLeft)(gA))return gA;for(var fA=gA.right,BA=fA.length>Y?fA.slice(0,Y):fA,UA=[],hj=0;hj<Y;hj++){var Zj=fA[hj],JA=w[hj],Hj=JA.validate(Zj,l(dA,String(hj),JA,Zj));if((0,r.isLeft)(Hj))c(UA,Hj.left);else{var Jj=Hj.right;Jj!==Zj&&(BA===fA&&(BA=fA.slice()),BA[hj]=Jj)}}return UA.length>0?(0,A.failures)(UA):(0,A.success)(BA)},m(w)?A.identity:function(N){return w.map(function(dA,gA){return dA.encode(N[gA])})},w)}A.tuple=zE;var Wd=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.type=fA,BA._tag="ReadonlyType",BA}return K}(n);A.ReadonlyType=Wd;function le(w,K){return K===void 0&&(K="Readonly<".concat(w.name,">")),new Wd(K,w.is,w.validate,w.encode,w)}A.readonly=le;var tl=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.type=fA,BA._tag="ReadonlyArrayType",BA}return K}(n);A.ReadonlyArrayType=tl;function Kc(w,K){K===void 0&&(K="ReadonlyArray<".concat(w.name,">"));var Y=ye(w);return new tl(K,Y.is,Y.validate,Y.encode,w)}A.readonlyArray=Kc;var gi=function(w,K){return jr(cA(w),K)};A.strict=gi;var Vn=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.type=fA,BA._tag="ExactType",BA}return K}(n);A.ExactType=Vn;function jr(w,K){K===void 0&&(K=Q(w));var Y=h(w);return new Vn(K,w.is,function(N,dA){var gA=A.UnknownRecord.validate(N,dA);if((0,r.isLeft)(gA))return gA;var fA=w.validate(N,dA);return(0,r.isLeft)(fA)?fA:(0,r.right)(O(fA.right,Y))},function(N){return w.encode(O(N,Y))},w)}A.exact=jr;var B7=function(w){j(K,w);function K(){var Y=w.call(this,"Function",function(N){return typeof N=="function"},function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="FunctionType",Y}return K}(n);A.FunctionType=B7,A.Function=new B7;var St=function(w){j(K,w);function K(){var Y=w.call(this,"never",function(N){return!1},function(N,dA){return(0,A.failure)(N,dA)},function(){throw new Error("cannot encode never")})||this;return Y._tag="NeverType",Y}return K}(n);A.NeverType=St,A.never=new St;var Yl=function(w){j(K,w);function K(){var Y=w.call(this,"any",function(N){return!0},A.success,A.identity)||this;return Y._tag="AnyType",Y}return K}(n);A.AnyType=Yl,A.any=new Yl;function f(w,K,Y){return Y===void 0&&(Y="(".concat(w.name," | ").concat(i(K),")")),new iA(Y,function(N){return w.is(N)&&K(N)},function(N,dA){var gA=w.validate(N,dA);if((0,r.isLeft)(gA))return gA;var fA=gA.right;return K(fA)?(0,A.success)(fA):(0,A.failure)(fA,dA)},w.encode,w,K)}A.refinement=f,A.Integer=f(A.number,Number.isInteger,"Integer");var C=function(w){j(K,w);function K(Y,N,dA,gA,fA,BA){var UA=w.call(this,Y,N,dA,gA,fA)||this;return UA.tag=BA,UA}return K}(Gn);A.TaggedUnionType=C;var T=function(w,K,Y){Y===void 0&&(Y=D(K));var N=Bi(K,Y);return N instanceof C?N:(console.warn("[io-ts] Cannot build a tagged union for ".concat(Y,", returning a de-optimized union")),new C(Y,N.is,N.validate,N.encode,K,w))};A.taggedUnion=T;var B=function(w,K){return{value:w,context:K}};A.getValidationError=B;var U=function(w){return[{key:"",type:w}]};A.getDefaultContext=U,A.Dictionary=A.UnknownRecord;var uA=function(w){j(K,w);function K(){var Y=w.call(this,"object",function(N){return N!==null&&typeof N=="object"},function(N,dA){return Y.is(N)?(0,A.success)(N):(0,A.failure)(N,dA)},A.identity)||this;return Y._tag="ObjectType",Y}return K}(n);A.ObjectType=uA,A.object=new uA,A.dictionary=fr;var GA=function(w){j(K,w);function K(Y,N,dA,gA,fA){var BA=w.call(this,Y,N,dA,gA)||this;return BA.props=fA,BA._tag="StrictType",BA}return K}(n);A.StrictType=GA;function jj(w){return w}A.clean=jj;function Fj(w){return function(){return w}}A.alias=Fj}}),Ewj=Oo({"../../node_modules/.pnpm/io-ts@2.2.22_fp-ts@2.16.9/node_modules/io-ts/lib/PathReporter.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.PathReporter=A.success=A.failure=void 0;var j=rY(),e=uwj();function t(i){return typeof i=="function"?(0,e.getFunctionName)(i):typeof i=="number"&&!isFinite(i)?isNaN(i)?"NaN":i>0?"Infinity":"-Infinity":JSON.stringify(i)}function r(i){return i.map(function(s){var l=s.key,c=s.type;return"".concat(l,": ").concat(c.name)}).join("/")}function a(i){return i.message!==void 0?i.message:"Invalid value ".concat(t(i.value)," supplied to ").concat(r(i.context))}function n(i){return i.map(a)}A.failure=n;function o(){return["No errors!"]}A.success=o,A.PathReporter={report:(0,j.fold)(n,o)}}}),aY=Oo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/types.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.ByteSequence=void 0;var j=class{constructor(e){this.base64Value=e}toBase64(){return this.base64Value}};A.ByteSequence=j}}),QC=Oo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/util.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.isByteSequence=A.isInnerList=A.isValidKeyStr=A.isValidTokenStr=A.isAscii=void 0;var j=/^[\x20-\x7E]*$/,e=/^[a-zA-Z*][:/!#$%&'*+\-.^_`|~A-Za-z0-9]*$/,t=/^[a-z*][*\-_.a-z0-9]*$/;function r(s){return j.test(s)}A.isAscii=r;function a(s){return e.test(s)}A.isValidTokenStr=a;function n(s){return t.test(s)}A.isValidKeyStr=n;function o(s){return Array.isArray(s[0])}A.isInnerList=o;function i(s){return typeof s=="object"&&"base64Value"in s}A.isByteSequence=i}}),nY=Oo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/token.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Token=void 0;var j=QC(),e=class{constructor(t){if(!(0,j.isValidTokenStr)(t))throw new TypeError("Invalid character in Token string. Tokens must start with *, A-Z and the rest of the string may only contain a-z, A-Z, 0-9, :/!#$%&'*+-.^_`|~");this.value=t}toString(){return this.value}};A.Token=e}}),pwj=Oo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/serializer.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.serializeKey=A.serializeParameters=A.serializeToken=A.serializeByteSequence=A.serializeBoolean=A.serializeString=A.serializeDecimal=A.serializeInteger=A.serializeBareItem=A.serializeInnerList=A.serializeItem=A.serializeDictionary=A.serializeList=A.SerializeError=void 0;var j=aY(),e=nY(),t=QC(),r=class extends Error{};A.SerializeError=r;function a(x){return x.map(R=>(0,t.isInnerList)(R)?i(R):o(R)).join(", ")}A.serializeList=a;function n(x){return Array.from(x.entries()).map(([R,P])=>{let D=G(R);return P[0]===!0?D+=S(P[1]):(D+="=",(0,t.isInnerList)(P)?D+=i(P):D+=o(P)),D}).join(", ")}A.serializeDictionary=n;function o(x){return s(x[0])+S(x[1])}A.serializeItem=o;function i(x){return`(${x[0].map(R=>o(R)).join(" ")})${S(x[1])}`}A.serializeInnerList=i;function s(x){if(typeof x=="number")return Number.isInteger(x)?l(x):c(x);if(typeof x=="string")return k(x);if(x instanceof e.Token)return F(x);if(x instanceof j.ByteSequence)return m(x);if(typeof x=="boolean")return u(x);throw new r(`Cannot serialize values of type ${typeof x}`)}A.serializeBareItem=s;function l(x){if(x<-999999999999999||x>999999999999999)throw new r("Structured headers can only encode integers in the range range of -999,999,999,999,999 to 999,999,999,999,999 inclusive");return x.toString()}A.serializeInteger=l;function c(x){let R=x.toFixed(3).replace(/0+$/,"");if(R.split(".")[0].replace("-","").length>12)throw new r("Fractional numbers are not allowed to have more than 12 significant digits before the decimal point");return R}A.serializeDecimal=c;function k(x){if(!(0,t.isAscii)(x))throw new r("Only ASCII strings may be serialized");return`"${x.replace(/("|\\)/g,R=>"\\"+R)}"`}A.serializeString=k;function u(x){return x?"?1":"?0"}A.serializeBoolean=u;function m(x){return`:${x.toBase64()}:`}A.serializeByteSequence=m;function F(x){return x.toString()}A.serializeToken=F;function S(x){return Array.from(x).map(([R,P])=>{let D=";"+G(R);return P!==!0&&(D+="="+s(P)),D}).join("")}A.serializeParameters=S;function G(x){if(!(0,t.isValidKeyStr)(x))throw new r("Keys in dictionaries must only contain lowercase letter, numbers, _-*. and must start with a letter or *");return x}A.serializeKey=G}}),mwj=Oo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/parser.js"(A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.ParseError=A.parseItem=A.parseList=A.parseDictionary=void 0;var j=aY(),e=nY(),t=QC();function r(c){return new i(c).parseDictionary()}A.parseDictionary=r;function a(c){return new i(c).parseList()}A.parseList=a;function n(c){return new i(c).parseItem()}A.parseItem=n;var o=class extends Error{constructor(c,k){super(`Parse error: ${k} at offset ${c}`)}};A.ParseError=o;var i=class{constructor(c){this.input=c,this.pos=0}parseDictionary(){this.skipWS();let c=new Map;for(;!this.eof();){let k=this.parseKey(),u;if(this.lookChar()==="="?(this.pos++,u=this.parseItemOrInnerList()):u=[!0,this.parseParameters()],c.set(k,u),this.skipOWS(),this.eof())return c;if(this.expectChar(","),this.pos++,this.skipOWS(),this.eof())throw new o(this.pos,"Dictionary contained a trailing comma")}return c}parseList(){this.skipWS();let c=[];for(;!this.eof();){if(c.push(this.parseItemOrInnerList()),this.skipOWS(),this.eof())return c;if(this.expectChar(","),this.pos++,this.skipOWS(),this.eof())throw new o(this.pos,"A list may not end with a trailing comma")}return c}parseItem(c=!0){c&&this.skipWS();let k=[this.parseBareItem(),this.parseParameters()];return c&&this.checkTrail(),k}parseItemOrInnerList(){return this.lookChar()==="("?this.parseInnerList():this.parseItem(!1)}parseInnerList(){this.expectChar("("),this.pos++;let c=[];for(;!this.eof();){if(this.skipWS(),this.lookChar()===")")return this.pos++,[c,this.parseParameters()];c.push(this.parseItem(!1));let k=this.lookChar();if(k!==" "&&k!==")")throw new o(this.pos,"Expected a whitespace or ) after every item in an inner list")}throw new o(this.pos,"Could not find end of inner list")}parseBareItem(){let c=this.lookChar();if(c===void 0)throw new o(this.pos,"Unexpected end of string");if(c.match(/^[-0-9]/))return this.parseIntegerOrDecimal();if(c==='"')return this.parseString();if(c.match(/^[A-Za-z*]/))return this.parseToken();if(c===":")return this.parseByteSequence();if(c==="?")return this.parseBoolean();throw new o(this.pos,"Unexpected input")}parseParameters(){let c=new Map;for(;!this.eof()&&this.lookChar()===";";){this.pos++,this.skipWS();let u=this.parseKey(),m=!0;this.lookChar()==="="&&(this.pos++,m=this.parseBareItem()),c.set(u,m)}return c}parseIntegerOrDecimal(){let c="integer",k=1,u="";if(this.lookChar()==="-"&&(k=-1,this.pos++),!l(this.lookChar()))throw new o(this.pos,"Expected a digit (0-9)");for(;!this.eof();){let m=this.getChar();if(l(m))u+=m;else if(c==="integer"&&m==="."){if(u.length>12)throw new o(this.pos,"Exceeded maximum decimal length");u+=".",c="decimal"}else{this.pos--;break}if(c==="integer"&&u.length>15)throw new o(this.pos,"Exceeded maximum integer length");if(c==="decimal"&&u.length>16)throw new o(this.pos,"Exceeded maximum decimal length")}if(c==="integer")return parseInt(u,10)*k;if(u.endsWith("."))throw new o(this.pos,"Decimal cannot end on a period");if(u.split(".")[1].length>3)throw new o(this.pos,"Number of digits after the decimal point cannot exceed 3");return parseFloat(u)*k}parseString(){let c="";for(this.expectChar('"'),this.pos++;!this.eof();){let k=this.getChar();if(k==="\\"){if(this.eof())throw new o(this.pos,"Unexpected end of input");let u=this.getChar();if(u!=="\\"&&u!=='"')throw new o(this.pos,"A backslash must be followed by another backslash or double quote");c+=u}else{if(k==='"')return c;if((0,t.isAscii)(k))c+=k;else throw new o(this.pos,"Strings must be in the ASCII range")}}throw new o(this.pos,"Unexpected end of input")}parseToken(){let c="";for(;!this.eof();){let k=this.lookChar();if(k===void 0||!/^[:/!#$%&'*+\-.^_`|~A-Za-z0-9]$/.test(k))return new e.Token(c);c+=this.getChar()}return new e.Token(c)}parseByteSequence(){this.expectChar(":"),this.pos++;let c=this.input.indexOf(":",this.pos);if(c===-1)throw new o(this.pos,'Could not find a closing ":" character to mark end of Byte Sequence');let k=this.input.substring(this.pos,c);if(this.pos+=k.length+1,!/^[A-Za-z0-9+/=]*$/.test(k))throw new o(this.pos,"ByteSequence does not contain a valid base64 string");return new j.ByteSequence(k)}parseBoolean(){this.expectChar("?"),this.pos++;let c=this.getChar();if(c==="1")return!0;if(c==="0")return!1;throw new o(this.pos,'Unexpected character. Expected a "1" or a "0"')}parseKey(){var c;if(!(!((c=this.lookChar())===null||c===void 0)&&c.match(/^[a-z*]/)))throw new o(this.pos,"A key must begin with an asterisk or letter (a-z)");let k="";for(;!this.eof();){let u=this.lookChar();if(u===void 0||!/^[a-z0-9_\-.*]$/.test(u))return k;k+=this.getChar()}return k}lookChar(){return this.input[this.pos]}expectChar(c){if(this.lookChar()!==c)throw new o(this.pos,`Expected ${c}`)}getChar(){return this.input[this.pos++]}eof(){return this.pos>=this.input.length}skipOWS(){for(;;){let c=this.input.substr(this.pos,1);if(c===" "||c==="	")this.pos++;else break}}skipWS(){for(;this.lookChar()===" ";)this.pos++}checkTrail(){if(this.skipWS(),!this.eof())throw new o(this.pos,"Unexpected characters at end of input")}};A.default=i;var s=/^[0-9]$/;function l(c){return c===void 0?!1:s.test(c)}}}),Bwj=Oo({"../../node_modules/.pnpm/structured-headers@1.0.1/node_modules/structured-headers/dist/index.js"(A){"use strict";var j=A&&A.__createBinding||(Object.create?function(r,a,n,o){o===void 0&&(o=n);var i=Object.getOwnPropertyDescriptor(a,n);(!i||("get"in i?!a.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return a[n]}}),Object.defineProperty(r,o,i)}:function(r,a,n,o){o===void 0&&(o=n),r[o]=a[n]}),e=A&&A.__exportStar||function(r,a){for(var n in r)n!=="default"&&!Object.prototype.hasOwnProperty.call(a,n)&&j(a,r,n)};Object.defineProperty(A,"__esModule",{value:!0}),A.Token=void 0,e(pwj(),A),e(mwj(),A),e(aY(),A),e(QC(),A);var t=nY();Object.defineProperty(A,"Token",{enumerable:!0,get:function(){return t.Token}})}}),sa;function rI(A){let j=sa.__externref_table_alloc();return sa.__wbindgen_export_2.set(j,A),j}function Hq(A,j){try{return A.apply(this,j)}catch(e){let t=rI(e);sa.__wbindgen_exn_store(t)}}var MwA=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&MwA.decode();var aI=null;function lF(){return(aI===null||aI.byteLength===0)&&(aI=new Uint8Array(sa.memory.buffer)),aI}function UC(A,j){return A=A>>>0,MwA.decode(lF().subarray(A,A+j))}function Mq(A){return A==null}var IwA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>{sa.__wbindgen_export_3.get(A.dtor)(A.a,A.b)});function gwj(A,j,e,t){let r={a:A,b:j,cnt:1,dtor:e},a=(...n)=>{r.cnt++;let o=r.a;r.a=0;try{return t(o,r.b,...n)}finally{--r.cnt===0?(sa.__wbindgen_export_3.get(r.dtor)(o,r.b),IwA.unregister(r)):r.a=o}};return a.original=r,IwA.register(a,r,r),a}function ZQ(A){let j=typeof A;if(j=="number"||j=="boolean"||A==null)return`${A}`;if(j=="string")return`"${A}"`;if(j=="symbol"){let r=A.description;return r==null?"Symbol":`Symbol(${r})`}if(j=="function"){let r=A.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(A)){let r=A.length,a="[";r>0&&(a+=ZQ(A[0]));for(let n=1;n<r;n++)a+=", "+ZQ(A[n]);return a+="]",a}let e=/\[object ([^\]]+)\]/.exec(toString.call(A)),t;if(e&&e.length>1)t=e[1];else return toString.call(A);if(t=="Object")try{return"Object("+JSON.stringify(A)+")"}catch{return"Object"}return A instanceof Error?`${A.name}: ${A.message}
${A.stack}`:t}var mg=0,XC=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},hwj=typeof XC.encodeInto=="function"?function(A,j){return XC.encodeInto(A,j)}:function(A,j){let e=XC.encode(A);return j.set(e),{read:A.length,written:e.length}};function AY(A,j,e){if(e===void 0){let o=XC.encode(A),i=j(o.length,1)>>>0;return lF().subarray(i,i+o.length).set(o),mg=o.length,i}let t=A.length,r=j(t,1)>>>0,a=lF(),n=0;for(;n<t;n++){let o=A.charCodeAt(n);if(o>127)break;a[r+n]=o}if(n!==t){n!==0&&(A=A.slice(n)),r=e(r,t,t=n+A.length*3,1)>>>0;let o=lF().subarray(r+n,r+t),i=hwj(A,o);n+=i.written,r=e(r,t,n,1)>>>0}return mg=n,r}var Kq=null;function sF(){return(Kq===null||Kq.buffer.detached===!0||Kq.buffer.detached===void 0&&Kq.buffer!==sa.memory.buffer)&&(Kq=new DataView(sa.memory.buffer)),Kq}function PwA(A,j){let e=j(A.length*1,1)>>>0;return lF().set(A,e/1),mg=A.length,e}function YQ(A){let j=sa.__wbindgen_export_2.get(A);return sa.__externref_table_dealloc(A),j}function qwj(A,j){return A=A>>>0,lF().subarray(A/1,A/1+j)}function xwj(A,j,e){return sa.createSession(A,j,e)}function vwj(A,j,e){sa.closure288_externref_shim(A,j,e)}function Gwj(A,j,e,t){sa.closure169_externref_shim(A,j,e,t)}var VC=Object.freeze({Local:0,0:"Local",Lower:1,1:"Lower",Upper:2,2:"Upper"}),OwA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>sa.__wbg_enclavesession_free(A>>>0,1)),fwj=class KwA{static __wrap(j){j=j>>>0;let e=Object.create(KwA.prototype);return e.__wbg_ptr=j,OwA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,OwA.unregister(this),j}free(){let j=this.__destroy_into_raw();sa.__wbg_enclavesession_free(j,0)}decryptMessage(j){let e=PwA(j,sa.__wbindgen_malloc),t=mg,r=sa.enclavesession_decryptMessage(this.__wbg_ptr,e,t);if(r[3])throw YQ(r[2]);var a=qwj(r[0],r[1]).slice();return sa.__wbindgen_free(r[0],r[1]*1,1),a}encryptMessage(j,e){let t=AY(j,sa.__wbindgen_malloc,sa.__wbindgen_realloc),r=mg,a=PwA(e,sa.__wbindgen_malloc),n=mg,o=sa.enclavesession_encryptMessage(this.__wbg_ptr,t,r,a,n);if(o[2])throw YQ(o[1]);return YQ(o[0])}};async function Fwj(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function bwj(){let A={};return A.wbg={},A.wbg.__wbg_buffer_61b7ce01341d7f88=function(j){return j.buffer},A.wbg.__wbg_call_500db948e69c7330=function(){return Hq(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_call_b0d8e36992d9900d=function(){return Hq(function(j,e){return j.call(e)},arguments)},A.wbg.__wbg_crypto_ed58b8e10a292839=function(j){return j.crypto},A.wbg.__wbg_done_f22c1561fa919baa=function(j){return j.done},A.wbg.__wbg_enclavesession_new=function(j){return fwj.__wrap(j)},A.wbg.__wbg_getRandomValues_bcb4912f16000dc4=function(){return Hq(function(j,e){j.getRandomValues(e)},arguments)},A.wbg.__wbg_get_9aa3dff3f0266054=function(j,e){return j[e>>>0]},A.wbg.__wbg_get_bbccf8970793c087=function(){return Hq(function(j,e){return Reflect.get(j,e)},arguments)},A.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(j,e){return j[e]},A.wbg.__wbg_instanceof_ArrayBuffer_670ddde44cdb2602=function(j){let e;try{e=j instanceof ArrayBuffer}catch{e=!1}return e},A.wbg.__wbg_instanceof_Uint8Array_28af5bc19d6acad8=function(j){let e;try{e=j instanceof Uint8Array}catch{e=!1}return e},A.wbg.__wbg_isArray_1ba11a930108ec51=function(j){return Array.isArray(j)},A.wbg.__wbg_isSafeInteger_12f5549b2fca23f4=function(j){return Number.isSafeInteger(j)},A.wbg.__wbg_iterator_23604bb983791576=function(){return Symbol.iterator},A.wbg.__wbg_length_65d1cd11729ced11=function(j){return j.length},A.wbg.__wbg_length_d65cf0786bfc5739=function(j){return j.length},A.wbg.__wbg_msCrypto_0a36e2ec3a343d26=function(j){return j.msCrypto},A.wbg.__wbg_new_254fa9eac11932ae=function(){return new Array},A.wbg.__wbg_new_3d446df9155128ef=function(j,e){try{var t={a:j,b:e},r=(n,o)=>{let i=t.a;t.a=0;try{return Gwj(i,t.b,n,o)}finally{t.a=i}};return new Promise(r)}finally{t.a=t.b=0}},A.wbg.__wbg_new_3ff5b33b1ce712df=function(j){return new Uint8Array(j)},A.wbg.__wbg_new_688846f374351c92=function(){return new Object},A.wbg.__wbg_newnoargs_fd9e4bf8be2bc16d=function(j,e){return new Function(UC(j,e))},A.wbg.__wbg_newwithbyteoffsetandlength_ba35896968751d91=function(j,e,t){return new Uint8Array(j,e>>>0,t>>>0)},A.wbg.__wbg_newwithlength_34ce8f1051e74449=function(j){return new Uint8Array(j>>>0)},A.wbg.__wbg_next_01dd9234a5bf6d05=function(){return Hq(function(j){return j.next()},arguments)},A.wbg.__wbg_next_137428deb98342b0=function(j){return j.next},A.wbg.__wbg_node_02999533c4ea02e3=function(j){return j.node},A.wbg.__wbg_now_64d0bb151e5d3889=function(){return Date.now()},A.wbg.__wbg_process_5c1d670bc53614b8=function(j){return j.process},A.wbg.__wbg_queueMicrotask_2181040e064c0dc8=function(j){queueMicrotask(j)},A.wbg.__wbg_queueMicrotask_ef9ac43769cbcc4f=function(j){return j.queueMicrotask},A.wbg.__wbg_randomFillSync_ab2cfe79ebbf2740=function(){return Hq(function(j,e){j.randomFillSync(e)},arguments)},A.wbg.__wbg_require_79b1e9274cde3c87=function(){return Hq(function(){return module.require},arguments)},A.wbg.__wbg_resolve_0bf7c44d641804f9=function(j){return Promise.resolve(j)},A.wbg.__wbg_set_1d80752d0d5f0b21=function(j,e,t){j[e>>>0]=t},A.wbg.__wbg_set_23d69db4e5c66a6e=function(j,e,t){j.set(e,t>>>0)},A.wbg.__wbg_set_3f1d0b984ed272ed=function(j,e,t){j[e]=t},A.wbg.__wbg_static_accessor_GLOBAL_0be7472e492ad3e3=function(){let j=typeof global>"u"?null:global;return Mq(j)?0:rI(j)},A.wbg.__wbg_static_accessor_GLOBAL_THIS_1a6eb482d12c9bfb=function(){let j=typeof globalThis>"u"?null:globalThis;return Mq(j)?0:rI(j)},A.wbg.__wbg_static_accessor_SELF_1dc398a895c82351=function(){let j=typeof self>"u"?null:self;return Mq(j)?0:rI(j)},A.wbg.__wbg_static_accessor_WINDOW_ae1c80c7eea8d64a=function(){let j=typeof window>"u"?null:window;return Mq(j)?0:rI(j)},A.wbg.__wbg_subarray_46adeb9b86949d12=function(j,e,t){return j.subarray(e>>>0,t>>>0)},A.wbg.__wbg_then_0438fad860fe38e1=function(j,e){return j.then(e)},A.wbg.__wbg_then_0ffafeddf0e182a4=function(j,e,t){return j.then(e,t)},A.wbg.__wbg_value_4c32fd138a88eee2=function(j){return j.value},A.wbg.__wbg_versions_c71aa1626a93e0a1=function(j){return j.versions},A.wbg.__wbindgen_as_number=function(j){return+j},A.wbg.__wbindgen_boolean_get=function(j){let e=j;return typeof e=="boolean"?e?1:0:2},A.wbg.__wbindgen_cb_drop=function(j){let e=j.original;return e.cnt--==1?(e.a=0,!0):!1},A.wbg.__wbindgen_closure_wrapper583=function(j,e,t){return gwj(j,e,289,vwj)},A.wbg.__wbindgen_debug_string=function(j,e){let t=ZQ(e),r=AY(t,sa.__wbindgen_malloc,sa.__wbindgen_realloc),a=mg;sF().setInt32(j+4*1,a,!0),sF().setInt32(j+4*0,r,!0)},A.wbg.__wbindgen_error_new=function(j,e){return new Error(UC(j,e))},A.wbg.__wbindgen_in=function(j,e){return j in e},A.wbg.__wbindgen_init_externref_table=function(){let j=sa.__wbindgen_export_2,e=j.grow(4);j.set(0,void 0),j.set(e+0,void 0),j.set(e+1,null),j.set(e+2,!0),j.set(e+3,!1)},A.wbg.__wbindgen_is_function=function(j){return typeof j=="function"},A.wbg.__wbindgen_is_object=function(j){let e=j;return typeof e=="object"&&e!==null},A.wbg.__wbindgen_is_string=function(j){return typeof j=="string"},A.wbg.__wbindgen_is_undefined=function(j){return j===void 0},A.wbg.__wbindgen_jsval_loose_eq=function(j,e){return j==e},A.wbg.__wbindgen_memory=function(){return sa.memory},A.wbg.__wbindgen_number_get=function(j,e){let t=e,r=typeof t=="number"?t:void 0;sF().setFloat64(j+8*1,Mq(r)?0:r,!0),sF().setInt32(j+4*0,!Mq(r),!0)},A.wbg.__wbindgen_string_get=function(j,e){let t=e,r=typeof t=="string"?t:void 0;var a=Mq(r)?0:AY(r,sa.__wbindgen_malloc,sa.__wbindgen_realloc),n=mg;sF().setInt32(j+4*1,n,!0),sF().setInt32(j+4*0,a,!0)},A.wbg.__wbindgen_string_new=function(j,e){return UC(j,e)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(UC(j,e))},A}function ywj(A,j){return sa=A.exports,NwA.__wbindgen_wasm_module=j,Kq=null,aI=null,sa.__wbindgen_start(),sa}async function NwA(A){if(sa!==void 0)return sa;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof A>"u"&&(A=new URL("confidential_computing_bg.wasm",import.meta.url));let j=bwj();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await Fwj(await A,j);return ywj(e,t)}var $wj=NwA,wwj=eY(rY(),1),Iwj=eY(Ewj(),1),Pwj=(A,j)=>{let e=j.decode(A);if((0,wwj.isLeft)(e))throw new Error("Failed to decode: "+(0,Iwj.failure)(e.left).join(", "));return e.right},Owj=A=>typeof A=="object"&&A!==null&&"name"in A&&typeof A.name=="string"&&"message"in A&&typeof A.message=="string",Rwj=eY(Bwj(),1);var Dwj="Proxy-Status",Twj="SessionBridge",LwA="Session expired";var Cwj=async(A,j)=>{switch(_wj(A.headers)){case 1:{let t=new Uint8Array(await A.arrayBuffer());return new Response(j(t),A)}case 0:throw A.status===401?new Error(LwA):new Error("Failed to proxy request to enclave service");case 2:throw new Error("Failed to proxy request to Session Bridge");default:throw new Error("Unsupported response origin")}},_wj=A=>{let j=A.get(Dwj);if(!j)return 2;let t=(0,Rwj.parseList)(j)[0];if(!t)return 2;let[r,a]=t,n=a.get("error");return r.toString()===Twj?n?0:1:2},Swj=function(A,j,e){if(e||arguments.length===2)for(var t=0,r=j.length,a;t<r;t++)(a||!(t in j))&&(a||(a=Array.prototype.slice.call(j,0,t)),a[t]=j[t]);return A.concat(a||Array.prototype.slice.call(j))};function Hwj(A){return A}function zwA(A,j,e,t,r,a,n,o,i){switch(arguments.length){case 1:return A;case 2:return j(A);case 3:return e(j(A));case 4:return t(e(j(A)));case 5:return r(t(e(j(A))));case 6:return a(r(t(e(j(A)))));case 7:return n(a(r(t(e(j(A))))));case 8:return o(n(a(r(t(e(j(A)))))));case 9:return i(o(n(a(r(t(e(j(A))))))));default:{for(var s=arguments[0],l=1;l<arguments.length;l++)s=arguments[l](s);return s}}}var oY=function(A,j){var e=typeof A=="number"?function(t){return t.length>=A}:A;return function(){var t=Array.from(arguments);return e(arguments)?j.apply(this,t):function(r){return j.apply(void 0,Swj([r],t,!1))}}},Mwj=function(A){return A._tag==="Left"},Kwj=function(A){return{_tag:"Left",left:A}},Nwj=function(A){return{_tag:"Right",right:A}};function UwA(A){return function(j,e){return A.map(j,function(){return e})}}function Lwj(A){var j=UwA(A);return function(e){return j(e,void 0)}}function zwj(A){return function(j,e){return A.chain(j,function(t){return A.map(e(t),function(){return t})})}}var Uwj=Kwj,iY=Nwj,Vwj=oY(2,function(A,j){return Bg(A)?A:j(A.right)}),VwA=function(A,j){return zwA(A,Jwj(j))},Xwj=function(A,j){return zwA(A,Qwj(j))},sY="Either",Jwj=function(A){return function(j){return Bg(j)?j:iY(A(j.right))}},XwA={URI:sY,map:VwA},HUe=oY(2,UwA(XwA)),MUe=Lwj(XwA),Wwj=function(A){return function(j){return Bg(j)?j:Bg(A)?A:iY(j.right(A.right))}},Qwj=Wwj,Ywj={URI:sY,map:VwA,ap:Xwj,chain:Vwj},Zwj={URI:sY,fromEither:Hwj},Bg=Mwj,KUe=oY(2,zwj(Ywj)),NUe={fromEither:Zwj.fromEither},ya=function(){var A=function(j,e){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},A(j,e)};return function(j,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");A(j,e);function t(){this.constructor=j}j.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),JC=function(){return JC=Object.assign||function(A){for(var j,e=1,t=arguments.length;e<t;e++){j=arguments[e];for(var r in j)Object.prototype.hasOwnProperty.call(j,r)&&(A[r]=j[r])}return A},JC.apply(this,arguments)},JwA=Uwj,Bd=function(A,j,e){return JwA([{value:A,context:j,message:e}])},$l=iY,Ma=function(){function A(j,e,t,r){this.name=j,this.is=e,this.validate=t,this.encode=r,this.decode=this.decode.bind(this)}return A.prototype.pipe=function(j,e){var t=this;return e===void 0&&(e="pipe(".concat(this.name,", ").concat(j.name,")")),new A(e,j.is,function(r,a){var n=t.validate(r,a);return Bg(n)?n:j.validate(n.right,a)},this.encode===Po&&j.encode===Po?Po:function(r){return t.encode(j.encode(r))})},A.prototype.asDecoder=function(){return this},A.prototype.asEncoder=function(){return this},A.prototype.decode=function(j){return this.validate(j,[{key:"",type:this,actual:j}])},A}(),Po=function(A){return A};function AIj(A){return A.displayName||A.name||"<function".concat(A.length,">")}function jIj(A,j,e,t){for(var r=A.length,a=Array(r+1),n=0;n<r;n++)a[n]=A[n];return a[r]={key:j,type:e,actual:t},a}function eIj(A,j){for(var e=j.length,t=0;t<e;t++)A.push(j[t])}var RwA=Object.prototype.hasOwnProperty;function tIj(A){return Object.keys(A).map(function(j){return"".concat(j,": ").concat(A[j].name)}).join(", ")}function rIj(A){for(var j=0;j<A.length;j++)if(A[j].encode!==Po)return!1;return!0}function aIj(A){return"{ ".concat(tIj(A)," }")}var nIj=function(A){ya(j,A);function j(){var e=A.call(this,"null",function(t){return t===null},function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="NullType",e}return j}(Ma),LUe=new nIj,oIj=function(A){ya(j,A);function j(){var e=A.call(this,"undefined",function(t){return t===void 0},function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="UndefinedType",e}return j}(Ma),DwA=new oIj,iIj=function(A){ya(j,A);function j(){var e=A.call(this,"void",DwA.is,DwA.validate,Po)||this;return e._tag="VoidType",e}return j}(Ma),zUe=new iIj,sIj=function(A){ya(j,A);function j(){var e=A.call(this,"unknown",function(t){return!0},$l,Po)||this;return e._tag="UnknownType",e}return j}(Ma),UUe=new sIj,lIj=function(A){ya(j,A);function j(){var e=A.call(this,"string",function(t){return typeof t=="string"},function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="StringType",e}return j}(Ma),jY=new lIj,cIj=function(A){ya(j,A);function j(){var e=A.call(this,"number",function(t){return typeof t=="number"},function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="NumberType",e}return j}(Ma),WwA=new cIj,dIj=function(A){ya(j,A);function j(){var e=A.call(this,"bigint",function(t){return typeof t=="bigint"},function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="BigIntType",e}return j}(Ma),VUe=new dIj,kIj=function(A){ya(j,A);function j(){var e=A.call(this,"boolean",function(t){return typeof t=="boolean"},function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="BooleanType",e}return j}(Ma),XUe=new kIj,uIj=function(A){ya(j,A);function j(){var e=A.call(this,"UnknownArray",Array.isArray,function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="AnyArrayType",e}return j}(Ma),JUe=new uIj,EIj=function(A){ya(j,A);function j(){var e=A.call(this,"UnknownRecord",function(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)},function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="AnyDictionaryType",e}return j}(Ma),TwA=new EIj,WUe=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.value=n,o._tag="LiteralType",o}return j}(Ma),QUe=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.keys=n,o._tag="KeyofType",o}return j}(Ma),pIj=function(A){ya(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a)||this;return i.type=n,i.predicate=o,i._tag="RefinementType",i}return j}(Ma);function mIj(A,j,e){return ZwA(A,j,e)}var YUe=mIj(WwA,function(A){return Number.isInteger(A)},"Int"),BIj=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.runDefinition=n,o._tag="RecursiveType",o}return j}(Ma);Object.defineProperty(BIj.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0});var ZUe=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ArrayType",o}return j}(Ma),gIj=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="InterfaceType",o}return j}(Ma);function QwA(A,j){j===void 0&&(j=aIj(A));var e=Object.keys(A),t=e.map(function(a){return A[a]}),r=e.length;return new gIj(j,function(a){if(TwA.is(a)){for(var n=0;n<r;n++){var o=e[n],i=a[o];if(i===void 0&&!RwA.call(a,o)||!t[n].is(i))return!1}return!0}return!1},function(a,n){var o=TwA.validate(a,n);if(Bg(o))return o;for(var i=o.right,s=i,l=[],c=0;c<r;c++){var k=e[c],u=s[k],m=t[c],F=m.validate(u,jIj(n,k,m,u));if(Bg(F))eIj(l,F.left);else{var S=F.right;(S!==u||S===void 0&&!RwA.call(s,k))&&(s===i&&(s=JC({},i)),s[k]=S)}}return l.length>0?JwA(l):$l(s)},rIj(t)?Po:function(a){for(var n=JC({},a),o=0;o<r;o++){var i=e[o],s=t[o].encode;s!==Po&&(n[i]=s(a[i]))}return n},A)}var AVe=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="PartialType",o}return j}(Ma),jVe=function(A){ya(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a)||this;return i.domain=n,i.codomain=o,i._tag="DictionaryType",i}return j}(Ma),hIj=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="UnionType",o}return j}(Ma),eVe=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="IntersectionType",o}return j}(Ma),tVe=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.types=n,o._tag="TupleType",o}return j}(Ma),qIj=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ReadonlyType",o}return j}(Ma);function YwA(A,j){return j===void 0&&(j="Readonly<".concat(A.name,">")),new qIj(j,A.is,A.validate,A.encode,A)}var rVe=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ReadonlyArrayType",o}return j}(Ma),aVe=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.type=n,o._tag="ExactType",o}return j}(Ma),xIj=function(A){ya(j,A);function j(){var e=A.call(this,"Function",function(t){return typeof t=="function"},function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="FunctionType",e}return j}(Ma),nVe=new xIj,vIj=function(A){ya(j,A);function j(){var e=A.call(this,"never",function(t){return!1},function(t,r){return Bd(t,r)},function(){throw new Error("cannot encode never")})||this;return e._tag="NeverType",e}return j}(Ma),oVe=new vIj,GIj=function(A){ya(j,A);function j(){var e=A.call(this,"any",function(t){return!0},$l,Po)||this;return e._tag="AnyType",e}return j}(Ma),iVe=new GIj;function ZwA(A,j,e){return e===void 0&&(e="(".concat(A.name," | ").concat(AIj(j),")")),new pIj(e,function(t){return A.is(t)&&j(t)},function(t,r){var a=A.validate(t,r);if(Bg(a))return a;var n=a.right;return j(n)?$l(n):Bd(n,r)},A.encode,A,j)}var sVe=ZwA(WwA,Number.isInteger,"Integer"),lVe=function(A){ya(j,A);function j(e,t,r,a,n,o){var i=A.call(this,e,t,r,a,n)||this;return i.tag=o,i}return j}(hIj),fIj=function(A){ya(j,A);function j(){var e=A.call(this,"object",function(t){return t!==null&&typeof t=="object"},function(t,r){return e.is(t)?$l(t):Bd(t,r)},Po)||this;return e._tag="ObjectType",e}return j}(Ma),cVe=new fIj,dVe=function(A){ya(j,A);function j(e,t,r,a,n){var o=A.call(this,e,t,r,a)||this;return o.props=n,o._tag="StrictType",o}return j}(Ma),FIj=YwA(QwA({handshakeMessage:jY,sessionUuid:jY},"SessionHandshakeResponse")),kVe=YwA(QwA({handshakeMessage:jY}),"SessionHandshakeRequest");var bIj=async A=>{if(!A.ok)throw new Error(`Failed to complete request with status ${A.status}: ${await A.text()}`);return Pwj(await A.json(),FIj)},yIj=async A=>await Promise.all(A.map(async j=>{let t=await(await fetch(j)).arrayBuffer();return new Uint8Array(t)})),$Ij=class AIA{constructor(j){this.sessionFactory=j,this.session=void 0}static create(j){let{verificationMode:e,performSessionHandshake:t}=j,r=VC.Upper;switch(e){case"unsafe-local":r=VC.Local;break;case"unsafe-lower":r=VC.Lower;break;case"upper":r=VC.Upper;break;default:throw new Error("invalid verification mode")}let a=async()=>xwj(async n=>t(n).then(bIj),yIj,r);return new AIA(a)}async fetch(j){try{return await this.fetchWithoutRefresh(j)}catch(e){if(Owj(e)&&e.message===LwA)return this.freeSession(),await this.fetchWithoutRefresh(j);throw e}}async fetchWithoutRefresh({destinationPath:j,bytes:e,sendRequest:t}){this.session??(this.session=await this.sessionFactory());let{message:r,sessionUuid:a}=this.session.encryptMessage(j,e),n=await t({sessionUuid:a,encryptedRequest:r});return await Cwj(n,this.session.decryptMessage.bind(this.session))}freeSession(){this.session&&(this.session.free(),this.session=void 0)}},pg,jIA=async A=>pg?(pg=await pg,pg):(pg=wIj(A),pg=await pg,pg),wIj=async A=>{let{default:j}=await Promise.resolve().then(()=>J(wwA(),1));return await $wj(j),$Ij.create(A)};var Lq=A=>async(j,e,...t)=>{let{name:r,url:a,method:n="POST",destinationPath:o,body:i,responseType:s,timeout:l=3e4,srpEncrypted:c=!0,abortController:k}=A(...t),u=PIj(e),F=await(await jIA({performSessionHandshake:OIj({session:j}),verificationMode:u})).fetch({bytes:Ne.encode(i),destinationPath:o,sendRequest:RIj({session:j,name:r,url:a,method:n,timeout:l,srpEncrypted:c,abortController:k})});if(!F.ok)throw new Error("Request to the enclave failed due to internal error");let S=new Uint8Array(await F.arrayBuffer());return cj(S,Ne.pipe(s)).unwrap()},IIj=["b5dev.com","b5dev.ca","b5dev.eu","b5test.com","b5test.ca","b5test.eu","b5rev.com"],PIj=A=>{let j=A.split(":",1)[0]??"";return j.endsWith(".b5local.com")?"unsafe-local":IIj.some(e=>j.endsWith(`.${e}`))?"unsafe-lower":"upper"},OIj=({session:A})=>async j=>A.request({encrypted:!1,method:"POST",name:p`confidentialComputingCreateSession`,url:"/api/v1/confidential-computing/session",body:j}),RIj=({session:A,name:j,url:e,method:t,timeout:r,srpEncrypted:a,abortController:n})=>async({encryptedRequest:o,sessionUuid:i})=>A.request({name:j,url:e,method:t,body:o,encrypted:a,options:{dataType:"arraybuffer",headers:{"Enclave-Session-Uuid":i},timeout:r,abortController:n}});var eo=Z("web-api/api/provision.ts"),DIj=pj.readonly(pj.type({uuid:pj.string,accountName:pj.string,accountType:pj.string,accountUuid:pj.string,domain:pj.string,name:pj.string,email:pj.string,userState:pj.string,accountUsesNewKeysets:pj.union([pj.boolean,pj.undefined]),accountAuthMethods:pj.readonlyArray(ku),account2faTypes:qA(pj.readonlyArray(pe(Oi,"MfaType")),[]),accountKeyUuid:pj.string,accountKeyFormat:pj.string,enforce2faSetup:pj.boolean,disableEmergencyKit:qA(pj.boolean,!1),passwordRules:pj.string,b5WebProgressTimerEnabled:qA(pj.boolean,!1),extensionFirstForSsoScimEnabled:qA(pj.boolean,!1),extensionFirstForScimEnabled:qA(pj.boolean,!1),extensionAllowedPolicyFeatureEnabled:qA(pj.boolean,!1)}),"Provision"),TIj=pj.readonly(pj.type({valid:pj.boolean}),"ProvisioningEmailVerificationValidity"),CIj=pj.readonly(pj.type({userState:pj.string}),"ProvisioningUserState"),_Ij=pj.readonly(pj.type({exists:pj.boolean}),"HostedProvisioningIntegrationExists"),SIj=pj.readonly(pj.type({lastResendAt:pj.union([pj.string,pj.undefined]),resendAllCooldown:pj.number}),"ResendDetails"),lY=eo(A=>({name:"createProvisionUser",method:"POST",url:"/api/v1/provision/user",body:A,responseType:sg})),cY=eo((A,j)=>({name:"startUserProvision",method:"PUT",url:`/api/v1/provision/user/${encodeURIComponent(A)}/start${nt(j)}`,responseType:L})),dY=eo(A=>({name:"suspendUserProvision",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(A)}/suspend`,responseType:L})),kY=eo(A=>({name:"resendUserProvision",method:"PUT",url:"/api/v1/provision/resend",body:A,responseType:L})),uY=eo(A=>({name:"resendAllUsersProvision",method:"PUT",url:"/api/v1/provision/resend-all",body:A?{groupUUID:A}:{},responseType:L})),EY=eo(()=>({name:"getResendDetails",method:"GET",url:"/api/v1/provision/resend-all/details",responseType:SIj})),pY=eo(()=>({name:"getProvisioningIntegrationExists",method:"GET",url:"/api/v1/hp/integrations/exists",responseType:_Ij})),mY=eo((A,j)=>({name:"getProvisionDetails",method:"POST",url:`/api/v2/provision/user/${encodeURIComponent(A)}/details`,responseType:DIj,encrypted:!1,body:j})),BY=eo((A,j)=>({name:"sendProvisionStartedConfirmation",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(A)}/send`,responseType:L,encrypted:!1,body:j})),gY=eo((A,j)=>({name:"sendProvisionedConfirmation",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(A)}/confirm/start`,responseType:L,encrypted:!1,body:j})),hY=eo((A,j)=>({name:"resendProvisioningEmailVerification",method:"PUT",url:`/api/v2/provision/user/${encodeURIComponent(A)}/${j}/resend-verification`,responseType:L})),qY=eo((A,j,e)=>({name:"checkProvisioningEmailVerification",method:"GET",url:`/api/v2/provision/user/${encodeURIComponent(A)}/${j}/${e}`,encrypted:!1,responseType:TIj})),xY=eo((A,j)=>({name:"findProvisionedUserState",method:"POST",url:`/api/v2/provision/user/${encodeURIComponent(A)}/state`,encrypted:!1,body:j,responseType:CIj})),YC=eo(A=>({name:"acceptProvision",method:"POST",url:"/api/v1/provision/user/accept",body:A,responseType:L,encrypted:!1})),vY=eo(A=>({name:"finishConfirmationSsoUser",method:"PUT",url:"/api/v1/provision/user/confirm/finish/sso",body:A,responseType:L,encrypted:!0})),GY=eo(A=>({name:"getProvisionedPersonalVault",method:"GET",url:`/api/v1/provision/user/${encodeURIComponent(A)}/personalvault`,responseType:Ii})),eIA=pj.readonly(pj.type({vaultUuid:pj.string,vaultKeySN:pj.number,encryptedBy:pj.string,encVaultKey:$A.JweB}),"ProvisionedVaultKey"),tIA=pj.readonly(pj.type({groupUuid:pj.string,keyset:$A.KeysetCiphertext}),"ProvisionedGroupKeyset"),rIA=pj.readonly(pj.type({keyset:$A.KeysetCiphertext,vaultKeys:pj.readonlyArray(eIA),groupKeysets:pj.readonlyArray(tIA)}),"ProvisionedKeys"),fY=eo((A,j)=>({name:"completeUserProvision",method:"PUT",url:`/api/v1/provision/user/${encodeURIComponent(A)}/complete`,body:j,responseType:L})),FY=eo(A=>({name:"getUserProvisionedKeys",method:"GET",url:`/api/v1/provision/user/${encodeURIComponent(A)}/keys`,responseType:rIA})),aIA=pj.readonly(pj.type({uuid:pj.string,sn:pj.number,priKey:$A.JwkRsaPriKey,symKey:$A.JwkSymKey,signingKey:$A.JwkEcPriKey}),"PsaPlaintextKeyset"),HIj=pj.readonly(pj.type({psaKeyset:aIA,provisioningGroupPublicKey:$A.JwkRsaPubKey,emailDomains:pj.array(pj.string),recoveryGroupUuid:pj.string,notificationEmails:pj.array(pj.string),identityProvider:pj.string}),"ProvisioningRegistrationData"),nIA=pj.readonly(pj.type({apiSecret:pj.string}),"RegisterProvisioningResponse"),bY=Lq((A,j)=>({method:"POST",name:p`registerProvisioningIntegration`,url:`/api/v1/hp/integrations/${j}`,destinationPath:"/provisioning-key-service/api/v1/integration/create",body:A,responseType:nIA})),nI;(function(A){A.EncryptedPuk="encrypted-puk"})(nI||(nI={}));var cF;(function(A){A.Active="A",A.Suspended="S"})(cF||(cF={}));var Kp;(function(A){A.EntraId="ENTRA_ID",A.Okta="OKTA",A.Unknown="UNKNOWN"})(Kp||(Kp={}));var oIA=pj.readonly(pj.intersection([pj.type({state:pe(cF,"HostedProvisioningIntegrationState"),notificationEmails:pj.array(pj.string),identityProvider:qA(pe(Kp,"ProvisioningServiceIdp"),Kp.Unknown)}),pj.partial({encryptedPuk:$A.JweB})]),"HostedProvisioningIntegration"),iIA=pj.readonly(pj.type({integration:oIA}),"HostedProvisioningIntegrationResponse"),yY=eo((A,j)=>({name:"getHostedProvisioningIntegration",method:"GET",url:`/api/v1/hp/integrations/${A}${nt({attrs:j})}`,responseType:iIA})),sIA=pj.readonly(pj.type({list:pj.string,signature:pj.string}),"EmailDomains"),lIA=pj.readonly(pj.partial({emailDomains:sIA,state:pj.string,notificationEmails:pj.array(pj.string)}),"UpdateHostedProvisioningIntegration"),oI=eo((A,j)=>({name:"updateHostedProvisioningIntegration",method:"PATCH",url:`/api/v1/hp/integrations/${A}`,body:j,responseType:lIA})),cIA=pj.readonly(pj.type({uuid:pj.string,sn:pj.number,priKey:$A.JwkRsaPriKey,symKey:$A.JwkSymKey}),"ProvisioningGroupPlaintextKeyset"),MIj=pj.readonly(pj.type({provisioningGroupPlaintextKeyset:cIA}),"CreateProvisioningTokenRequest"),dIA=pj.readonly(pj.type({apiSecret:pj.string}),"CreateProvisioningTokenResponse"),$Y=Lq((A,j)=>({method:"POST",name:p`createProvisioningIntegrationToken`,url:`/api/v1/hp/integrations/${A}/token`,destinationPath:"/provisioning-key-service/api/v1/integration/token",body:j,responseType:dIA})),kIA=pj.readonly(pj.type({srpx:pj.string,auk:$A.JwkSymKey}),"ProvisionCredentialBundle"),uIA=pj.readonly(pj.type({credentialBundle:kIA}),"FinishUserConfirmationResponse"),wY=Lq(A=>({method:"POST",name:p`finishUserConfirmation`,url:"/api/v1/provision/user/confirm/finish",destinationPath:"/provisioning-key-service/api/v1/user/confirm/finish",srpEncrypted:!1,body:A,responseType:uIA})),IY=eo(A=>({method:"PUT",name:"completeProvisionedUserSignup",url:"/api/v1/provision/user/confirm/finish",body:A,responseType:L})),KIj=pj.readonly(pj.type({apiSecret:pj.string,userUuids:pj.readonly(pj.array(pj.string))}),"MigrateUsersData"),EIA=pj.readonly(pj.type({}),"MigrateUsersResponse"),PY=Lq((A,j)=>({method:"POST",name:p`migrateUsersToHostedProvisioning`,url:`/api/v1/provision/user-migrations/${j}`,destinationPath:"/provisioning-key-service/api/v1/user-migrations",body:A,responseType:EIA}));var Ue=J(tA());var Np=Z("web-api/api/recovery.ts"),NIj=Ue.readonly(Ue.type({uuid:Ue.string,accountUuid:Ue.string,accountName:Ue.string,accountType:Ue.string,domain:Ue.string,name:Ue.string,email:Ue.string,passwordRules:Ue.string,accountUsesNewKeysets:Ue.union([Ue.boolean,Ue.undefined]),accountAuthMethods:Ue.array(ku),disableEmergencyKit:qA(Ue.boolean,!1),recoveryKeysExist:qA(Ue.boolean,!1),isPkvEnabled:qA(Ue.boolean,!1)}),"Recovery"),CVe=Ue.readonly(Ue.type({token:Ue.string}),"FindRecoveryDetails"),_Ve=Ue.readonly(Ue.type({token:Ue.string,emailVerificationChallenge:Ue.string}),"RecoveryChallengeVerify"),LIj=Ue.readonly(Ue.type({emailVerificationSuccessToken:Ue.string}),"RecoveryChallengeVerifyResponse"),OY=Np((A,j)=>({name:"findRecoveryDetails",method:"POST",url:`/api/v1/recover/${encodeURIComponent(A)}/details`,body:j,responseType:NIj,encrypted:!1})),RY=Np((A,j)=>({name:"recoveryVerifyEmailStart",method:"POST",url:`/api/v2/recover/${encodeURIComponent(A)}/verify-email/start`,body:j,responseType:L,encrypted:!1})),DY=Np((A,j)=>({name:"recoveryVerifyEmailResend",method:"POST",url:`/api/v2/recover/${encodeURIComponent(A)}/verify-email/resend`,body:j,responseType:L,encrypted:!1})),TY=Np((A,j)=>({name:"recoveryVerifyEmailAuth",method:"POST",url:`/api/v2/recover/${encodeURIComponent(A)}/verify-email/verify`,body:j,responseType:LIj,encrypted:!1})),CY=Np(A=>({name:"beginRecovery",method:"PUT",url:`/api/v1/recover/begin/${A.join(",")}`,responseType:L})),ZC=Np(A=>({name:"continueRecovery",method:"POST",url:"/api/v2/recover/continue",body:A,responseType:L,encrypted:!1})),_Y=Np(A=>({name:"cancelRecovery",method:"PUT",url:`/api/v1/recover/cancel/${A.join(",")}`,responseType:L})),pIA=Ue.readonly(Ue.type({vaultUuid:Ue.string,vaultKeySN:Ue.number,encryptedBy:Ue.string,encVaultKey:$A.JweB}),"RecoverableVaultKey"),mIA=Ue.readonly(Ue.type({groupUuid:Ue.string,keyset:$A.KeysetCiphertext}),"RecoverableGroupKeyset"),BIA=Ue.readonly(Ue.type({packageUuid:Ue.string,key:$A.JweB}),"RecoverablePackageKey"),SY=Ue.readonly(Ue.type({vaultKeys:Ue.readonlyArray(pIA),groupKeysets:Ue.readonlyArray(mIA),packageKeys:Ue.readonlyArray(BIA)}),"RecoverableKeys"),gIA=Ue.readonly(Ue.type({keys:Ue.readonlyArray(SY)}),"RecoverableKeysForPeople"),zIj=Ue.readonly(Ue.intersection([Ue.type({keys:Ue.readonlyArray(SY)},"type"),Ue.partial({trustLogEntry:Ue.string},"partial")])),iI=Np((A,j)=>({name:"completeRecovery",method:"PUT",url:`/api/v1/recover/complete/${A.join(",")}`,body:j,responseType:L})),HY=Np(A=>({name:"getRecoverableKeysForPeople",method:"GET",url:`/api/v1/recover/keys/${A.join(",")}`,responseType:gIA}));var En=J(tA());var UIj=Z("web-api/api/dashboard.ts"),hIA=En.readonly(En.intersection([En.type({activeUsersCount:En.number,deletedUsersCount:En.number,invitedUsersCount:En.number,invitedUsersToConfirm:En.array(uo),invitedUsersToConfirmCount:En.number,guestUsersCount:En.number,recoveredUsersToConfirm:En.array(uo),recoveredUsersToConfirmCount:En.number,recoveringUsersCount:En.number,suspendedUsersCount:En.number,travelingUsers:En.array(uo),travelingUsersCount:En.number}),En.partial({activeUsersExtensionInstalls:En.number})]),"ReportDashboardOverview"),MY=UIj(()=>({name:"getDashboardReport",method:"GET",url:"/api/v1/report/dashboard",responseType:hIA}));var mA=J(tA());var dF=J(Wo()),gd;(function(A){A[A.AllTime=0]="AllTime",A[A.LastWeek=7]="LastWeek",A[A.LastMonth=30]="LastMonth",A[A.Last2Months=60]="Last2Months",A[A.Last3Months=90]="Last3Months",A[A.Last6Months=180]="Last6Months",A[A.Last12Months=365]="Last12Months"})(gd||(gd={}));var A_=A=>{if(A===gd.AllTime)return new Date(0);let j=A<30?{days:A}:{months:A/30};return(0,dF.default)().subtract(j).toDate()},VIj=[gd.LastWeek,gd.LastMonth,gd.Last2Months,gd.Last3Months,gd.Last6Months,gd.Last12Months,gd.AllTime],XIj=A=>j=>j===gd.AllTime?0:(0,dF.default)(A).subtract(j,"days").valueOf(),JIj=A=>j=>xi(j,(e,t)=>(0,dF.default)(t.lastUsedAt).isSameOrBefore(e)?(0,dF.default)(t.lastUsedAt):e,(0,dF.default)(A)).valueOf();var Ti=Z("web-api/api/report.ts"),dI=50,sI;(function(A){A.Overview="overview",A.ExtendedOverview="extended",A.Users="users"})(sI||(sI={}));var lI;(function(A){A.NoManager="nomanager",A.HighPopulation="highlyshared"})(lI||(lI={}));var cI;(function(A){A.UsersCount="userscount"})(cI||(cI={}));var kF;(function(A){A.Active="active",A.All="all",A.Inactive="inactive"})(kF||(kF={}));var WIj=[kF.All,kF.Active,kF.Inactive],QIj=mA.type({vaultUuid:mA.string,count:mA.number}),qIA=mA.readonly(mA.type({user:sg,groupCount:mA.number,vaultCount:mA.number,itemCount:mA.number}),"ReportSectionUserOverview"),xIA=mA.readonly(mA.type({vaultUuid:mA.string,itemUuid:mA.string,lastUsedAt:mA.string,lastUsedVersion:mA.number,action:mA.union([mA.string,mA.undefined])}),"ReportUserItemUsage"),vIA=mA.readonly(mA.type({itemUsages:mA.readonlyArray(xIA),vaults:mA.readonlyArray(Ii),vaultItemsByVault:mA.record(mA.string,mA.readonlyArray(bk))}),"ReportSectionUserItemUsage"),GIA=mA.readonly(mA.partial({overview:qIA,itemUsage:vIA}),"ReportUser"),fIA=mA.readonly(mA.type({usageByVaults:mA.array(QIj),totalUsage:mA.number}),"ReportUserItemUsageOverview"),FIA=mA.readonly(mA.partial({current:mA.string,later:mA.string,earlier:mA.string}),"ReportCursors"),bIA=mA.readonly(mA.type({vaultUuid:mA.string,userUuid:mA.string,itemUuid:mA.string,usedAt:mA.string,usedVersion:mA.number,action:mA.union([mA.string,mA.undefined])}),"ReportItemUsage"),KY=mA.readonly(mA.type({cursors:FIA,itemUsages:mA.readonlyArray(bIA),vaults:mA.record(mA.string,Ii),vaultItems:mA.record(mA.string,bk),partialUsers:mA.record(mA.string,uo),hasMore:mA.boolean}),"ReportItem"),yIA=mA.readonly(mA.type({vault:Ii,userCount:mA.number,groupCount:mA.number,currentUserUuids:mA.array(mA.string)}),"ReportSectionVaultOverview"),$IA=mA.readonly(mA.type({userUuid:mA.string,itemUuid:mA.string,lastUsedAt:mA.string,lastUsedVersion:mA.number,action:mA.union([mA.string,mA.undefined])}),"ReportVaultItemUsage"),wIA=mA.readonly(mA.type({itemUsages:mA.readonlyArray($IA),vault:Ii,vaultItems:mA.readonlyArray(bk),usersByUserUuid:mA.record(mA.string,uo)}),"ReportSectionVaultItemUsage"),IIA=mA.readonly(mA.partial({overview:yIA,itemUsage:wIA}),"ReportVault"),YIj=mA.readonly(mA.type({usersCount:mA.number,vault:Ii}),"ReportVaultsItem"),PIA=mA.readonly(mA.type({items:mA.readonlyArray(YIj)}),"ReportVaults"),OIA=mA.readonly(mA.type({deviceCount:mA.number,hasMFAEnabled:mA.boolean,hasLinkedAccount:mA.boolean,lastAuthAt:Gj(mA.string),createdAt:mA.string,personalItemCount:mA.number,personalVaultContentVersion:mA.number,user:uo}),"ReportAccountUser"),RIA=mA.readonly(mA.type({userCount:mA.number,groupCount:mA.number,vaultCount:mA.number}),"ReportSectionAccountOverview"),DIA=mA.readonly(mA.partial({overview:RIA,users:mA.readonlyArray(OIA)}),"ReportAccount"),TIA=mA.readonly(mA.type({userActiveCount:mA.number,userSuspendedCount:mA.number,userPendingCount:mA.number,userInRecoveryCount:mA.number,userGuestCount:mA.number,invitesPendingCount:mA.number,groupCount:mA.number,vaultCount:mA.number,vaultSharedCount:mA.number,privateVaultCount:mA.number,privateVaultItemsCount:mA.number,itemCount:mA.number,itemSharedCount:mA.number,deviceCount:mA.number,fileCount:mA.number,fileSize:mA.number}),"ReportSectionExtendedAccountOverview"),CIA=mA.readonly(mA.type({extended:TIA}),"ReportOverview"),_IA=mA.readonly(mA.type({clientName:mA.string,count:mA.number,modernCount:mA.number}),"ReportOldDevicesOverviewClient"),SIA=mA.readonly(mA.type({clients:mA.readonlyArray(_IA)}),"ReportOldDevicesOverview"),HIA=mA.readonly(mA.type({uuid:mA.string,name:mA.string,clientName:mA.string,osName:mA.string,osVersion:mA.string,lastAuthAt:mA.string}),"ReportOldDeviceDevice"),MIA=mA.readonly(mA.type({device:HIA,user:uo}),"ReportOldDevice"),KIA=mA.readonly(mA.type({overview:SIA,devices:mA.readonlyArray(MIA)}),"ReportOldDevices"),NIA=mA.readonly(mA.type({reportName:mA.string,lastViewedAt:mA.string}),"LastViewedReport"),LIA=mA.readonly(mA.type({reports:mA.readonlyArray(NIA)}),"LastViewedReports"),zIA=mA.readonly(mA.type({userUuid:mA.string,userState:mA.string,type:mA.string,firstName:mA.string,lastName:mA.string,email:mA.string,lastAuthAt:Gj(mA.string),deviceName:Gj(mA.string),deviceClientName:Gj(mA.string),extensionInstallCount:qA(mA.number,0),userItemCount:qA(mA.number,0)}),"UserExtensionInstallReport"),UIA=mA.readonly(mA.type({currentPage:mA.number,itemsPerPage:mA.number,itemsReturned:mA.number,totalItems:mA.number,totalPages:mA.number}),"ExtensionAdoptionPaginationReport"),VIA=mA.readonly(mA.type({activeUsersLastWeek:mA.number,activeUsersWithExtensionInstalls:mA.number,totalActiveUsers:mA.number}),"ExtensionAdoptionExtraData"),XIA=mA.readonly(mA.type({data:mA.array(zIA),pagination:UIA}),"ExtensionAdoptionReport"),JIA=mA.readonly(mA.type({csv:mA.string}),"ExtensionAdoptionReportCsv"),j_=A=>"itemUuid"in A&&M$(A.itemUuid)?dq(A.vaultUuid):"vaultUuid"in A&&dq(A.vaultUuid)||"userUuid"in A&&H$(A.userUuid),NY=Ti((A,j)=>({name:"getUserReport",method:"GET",url:`/api/v1/report/user/${A}?sections=${j.join(",")}`,responseType:GIA})),LY=Ti((A,j)=>({name:"getItemReportWithCursors",method:"GET",url:`/api/v1/report/itemusage/history${nt({...AD(A,(t,r)=>ZR(r)),cursor:j.earlier})}`,responseType:KY,validation:"unsafe_report_only"})),zY=Ti((A,j)=>({name:"getItemReportWithFilters",method:"GET",url:`/api/v1/report/itemusage/history${nt({...AD(A,(t,r)=>ZR(r)),date:j.date.toISOString(),todate:A_(j.toDate).toISOString(),limit:j.limit})}`,responseType:KY,validation:"unsafe_report_only"})),UY=Ti((A,j)=>({name:"getUserItemUsageOverview",method:"GET",url:`/api/v1/report/itemusage/overview${nt({"user-uuid":A,date:j.date.toISOString(),todate:A_(j.toDate).toISOString()})}`,responseType:fIA})),VY=Ti((A,j)=>({name:"getVaultReport",method:"GET",url:`/api/v1/report/vault/${A}?sections=${j.join(",")}`,responseType:IIA})),XY=Ti((A,j)=>{let e=`/api/v1/report/vaults/${A}`;return j.length>0&&(e+=`?attrs=${j.join(",")}`),{name:"getVaultsReport",method:"GET",url:e,responseType:PIA}}),JY=Ti(A=>({name:"getAccountReport",method:"GET",url:`/api/v2/report/account?sections=${A.join(",")}`,responseType:DIA})),WY=Ti(A=>({name:"getOverviewReport",method:"GET",url:`/api/v1/report/overview?sections=${A.join(",")}`,responseType:CIA,options:{timeout:6e4}})),QY=Ti(()=>({name:"getOldDevicesReport",method:"GET",url:"/api/v1/report/devices/old",responseType:KIA})),e_=mA.readonly(mA.type({csv:mA.string}),"GetAccountReportCsvResponse"),YY=Ti(()=>({name:"getAccountReportCsv",method:"GET",url:"/api/v1/report/account/csv",responseType:e_})),ZY=Ti(A=>({name:"sendUnusedPrivateVaultEmail",method:"POST",url:"/api/v1/report/teamusage/unused-private-vault/notify",body:{recipients:A},responseType:L})),AZ=Ti(A=>({name:"sendUnredeemedFamilyAccountEmail",method:"POST",url:"/api/v1/report/teamusage/unredeemed-family-account/notify",body:{recipients:A},responseType:L})),jZ=Ti(A=>({name:"sendNoSigninPastMonthEmail",method:"POST",url:"/api/v1/report/teamusage/no-signin-past-month/notify",body:{recipients:A},responseType:L})),eZ=Ti(()=>({name:"getLastViewedReports",method:"GET",url:"/api/v1/report/lastviewed",responseType:LIA})),tZ=Ti(A=>{let j={currentPage:A?.currentPage,itemsPerPage:A?.itemsPerPage,extensionStatus:A?.extensionStatus,search:A?.search,sortBy:A?.sortBy,sortDirection:A?.sortDirection};return{name:"getExtensionAdoptionReport",method:"POST",url:"/api/v1/report/extension-adoption",responseType:XIA,body:j}}),rZ=Ti(()=>({name:"getExtensionAdoptionOverview",method:"GET",url:"/api/v1/report/extension-adoption/overview",responseType:VIA})),aZ=Ti(()=>({name:"getExtensionAdoptionReportCsv",method:"GET",url:"/api/v1/report/extension-adoption/csv",responseType:JIA}));var et=J(tA());var Er=J(tA());var t_=Z("web-api/api/serviceaccount_tokens.ts"),r_=Er.type({u:Er.string,a:Er.number},"VaultClaim"),WIA=Er.intersection([Er.type({jti:Er.string,issuer:Er.string,audience:Er.string,features:Er.readonlyArray(Er.string)},"type"),Er.partial({expiry:Er.string,vaults:Er.readonlyArray(r_),signatureHash:Er.string},"partial")],"TokenInfo"),a_=Er.intersection([Er.type({name:Er.string,state:Er.string,signedBy:Er.string,createdAt:Er.string,tokenInfo:WIA},"type"),Er.partial({expiresAt:Er.string},"partial")],"ServiceAccountToken"),eXe=Er.type({name:Er.string,subject:Er.string,account_uuid:Er.string,token_info:Er.intersection([WIA,Er.type({signatureHash:Er.string})]),kid:Er.string},"RegisterServiceAccountTokenRequest"),ZIj=Er.readonly(Er.type({id:Er.string}),"RegisterServiceAccountTokenResponse"),tXe=Er.type({name:Er.string},"RenameServiceAccountTokenRequest"),n_=t_(A=>({name:"registerServiceAccountToken",method:"POST",url:"/api/v2/serviceaccounts/token",body:A,responseType:ZIj})),nZ=t_((A,j,e)=>{let t=encodeURIComponent(A),r=encodeURIComponent(j);return{name:"renameServiceAccountToken",method:"PATCH",url:`/api/v1/serviceaccounts/${t}/tokens/${r}`,body:e,responseType:L}}),oZ=t_((A,j)=>{let e=encodeURIComponent(A),t=encodeURIComponent(j);return{name:"revokeServiceAccountToken",method:"DELETE",url:`/api/v1/serviceaccounts/${e}/tokens/${t}`,responseType:L}}),iZ=t_(()=>({name:"revokeAllServiceAccountTokensForAccount",method:"DELETE",url:"/api/v1/serviceaccounts/tokens",responseType:L}));var uF=Z("web-api/api/serviceaccounts.ts"),sZ=et.type({totalVaults:et.number,displayable:et.array(fk)},"ServiceAccountVaultAccess"),lZ=et.type({credits:et.number},"ServiceAccountBillables"),QIA=pe(Gt,"ServiceAccountType"),YIA=et.intersection([HC,et.readonly(et.type({creatorUuid:et.string,serviceAccountType:QIA},"type")),et.partial({tokens:et.readonlyArray(a_),serviceAccountVaultAccess:et.readonly(sZ),billables:et.readonly(lZ),permissions:et.number,rotatedAt:et.string,expiresAt:et.string},"partial")],"ServiceAccount"),ZIA=et.intersection([Dw,et.readonly(et.type({createdAt:et.string,creatorUuid:et.string,serviceAccountType:QIA,tokensVersion:et.number},"type")),et.partial({creatorFirstName:et.string,creatorLastName:et.string,creatorState:et.string,tokens:et.array(a_),devices:et.array(bl.Type),serviceAccountVaultAccess:et.readonly(sZ),billables:et.readonly(lZ),rotatedAt:et.string},"partial")],"ServiceAccountUser"),A1A=et.readonly(et.type({serviceAccounts:et.array(Hw)}),"GetServiceAccountsResponse"),j1A=et.readonly(et.intersection([et.type({serviceAccount:ZIA},"type"),et.partial({devices:et.array(bl.Type)},"partial")],"Integration")),e1A=et.readonly(et.intersection([et.type({integrations:et.array(j1A)},"type"),et.partial({releases:eQ},"partial")],"GetIntegrationsResponse")),cZ=uF(A=>({name:"createServiceAccountV3",method:"POST",url:"/api/v3/serviceaccounts",body:A,responseType:sg})),dZ=uF(A=>({name:"getIntegrations",method:"GET",url:`/api/v1/integrations${A.length>0?nt({attrs:A}):""}`,responseType:e1A,options:{timeout:6e4}})),kI=uF(()=>({name:"getServiceAccounts",method:"GET",url:"/api/v1/serviceaccounts",responseType:A1A})),t1A=et.readonly(et.type({email:et.string,token:et.string,uuid:et.string,throttleKey:et.string,accessors:et.readonlyArray(ig)},"CreateServiceAccountPreflightResponse")),kZ=uF(A=>({name:"createServiceAccountPreflight",method:"GET",url:`/api/v1/serviceaccounts/preflight/${encodeURIComponent(A)}`,responseType:t1A})),uZ=uF((A,j)=>({name:"getServiceAccount",method:"GET",url:`/api/v1/serviceaccount/${A}${j.length>0?nt({attrs:j}):""}`,responseType:YIA})),EZ=uF((A,j)=>({name:"updateServiceAccount",method:"PATCH",url:`/api/v1/serviceaccount/${A}`,body:j,responseType:L}));var We=J(tA());var r1A=Z("web-api/api/sign_in_attempts.ts"),Lp;(function(A){A.Reported="report_firewall_rule",A.Blocked="firewall_rule",A.Credentials="credentials",A.Mfa="mfa",A.AppVersion="app_version",A.Sso="sso"})(Lp||(Lp={}));var gg;(function(A){A.Country="country",A.Continent="continent",A.Ip="ip",A.Anonymous="anonymous",A.All="all"})(gg||(gg={}));var A1j=We.union([We.literal(Lp.Reported),We.literal(Lp.Blocked),We.literal(Lp.Credentials),We.literal(Lp.Mfa),We.literal(Lp.AppVersion),We.literal(Lp.Sso)],"SignInAttemptReasonsEnum"),j1j=We.union([We.literal(gg.Country),We.literal(gg.Continent),We.literal(gg.Ip),We.literal(gg.Anonymous),We.literal(gg.All)],"SignInAuxInfoTypesEnum"),a1A=We.readonly(We.intersection([We.type({country:We.string,date:We.string,deviceUuid:We.string,email:We.string,ip:We.string,location:We.string,osName:We.string,clientName:We.string,point:We.type({lat:We.number,lon:We.number}),reason:A1j,userUuid:We.string,uuid:We.string},"type"),We.partial({auxInfo:We.partial({type:j1j,value:We.string})},"partial")]),"SignInAttempt"),n1A=We.readonly(We.type({attempts:We.readonlyArray(a1A)}),"GetSignInAttemptsResponse"),e1j=We.readonly(We.partial({userUuid:We.string,includeStates:We.array(We.string),excludeStates:We.array(We.string),limit:We.number,cursor:We.string}),"GetSignInAttemptRequest"),o1A=We.readonly(We.type({attempts:We.array(a1A),cursor:We.string,hasMore:We.boolean,totalCount:We.number}),"GetSignInAttemptsResponseV2"),t1j=r1A(()=>({name:"getSignInAttempts",method:"GET",url:"/api/v1/signinattempts",responseType:n1A})),r1j=r1A(A=>({name:"getSigninAttemptsV2",method:"POST",url:"/api/v2/signinattempts",body:A,responseType:o1A}));var ue=J(tA());var zp=Z("web-api/api/signup.ts"),a1j=ue.readonly(ue.partial({promoCode:ue.string},"partial"),"UpdateSignupRequest"),i1A=ue.readonly(ue.type({isEnabled:ue.boolean,isRequired:ue.boolean}),"SignupFeatureCreditCardForm"),s1A=ue.readonly(ue.type({isRequired:ue.boolean,challenge:fC}),"SignupFeatureUnlockWithPasskey"),l1A=ue.readonly(ue.partial({creditCardForm:i1A,passkey:s1A}),"SignupFeatures"),c1A=ue.readonly(ue.type({accountUuid:ue.string,accountName:ue.string,domain:ue.string,avatar:ue.string,type:ue.string,userAvatar:ue.string,accountKeyFormat:ue.string,accountKeyUuid:ue.string,lastAuthAt:ue.string,createdAt:ue.string}),"AccountInfo"),uI=ue.readonly(ue.intersection([ue.type({uuid:ue.string,domain:ue.string,state:ue.string,createdAt:ue.string,completedAt:ue.string,expiresAt:ue.string,name:ue.string,type:ue.string,source:ue.string,email:ue.string,language:ue.string,availablePlans:ue.array(uq),tierName:ue.string,trialEndsAt:ue.string,features:l1A,setupIntentCode:ue.string},"SignupRequired"),ue.partial({stepUuid:ue.string,promoCode:ue.string,flowServiceUuid:ue.string,setupIntentCode:ue.string,defaultBillingFrequency:Gf,duplicateAccounts:ue.array(c1A),accountCreationDisabled:ue.boolean},"SignupPartial")],"Signup")),n1j=ue.readonly(ue.type({type:ue.literal("O"),payload:ue.type({code:ue.string,state:ue.string})}),"SsoOidcIdentity"),o_;(function(A){A.CtoCiso="CTO/CISO",A.Devops="DevOps",A.Engineering="Engineering",A.Executive="Executive",A.Finance="Finance",A.Hr="HR",A.It="IT",A.Legal="Legal",A.Marketing="Marketing",A.Operations="Operations",A.Sales="Sales",A.Security="Security",A.Other="Other"})(o_||(o_={}));var o1j=ue.readonly(ue.type({companyRole:pe(o_,"CompanyRole")}),"UserMeta"),i1j=ue.readonly(ue.type({emailResendToken:ue.string}),"AccountSignUp"),pZ=zp(A=>({name:"legacySignUpAccount",method:"POST",url:"/api/v1/signup",body:A,responseType:L,encrypted:!1,options:{withCredentials:!0}})),mZ=zp(A=>({name:"signUpAccount",method:"POST",url:"/api/v2/signup",body:A,responseType:i1j,encrypted:!1,options:{withCredentials:!0}})),s1j=ue.intersection([ue.readonly(ue.type({userUuid:ue.string},"readonlyUserUuid")),ue.readonly(ue.partial({sessionUuid:ue.string,signInTokenDetails:du},"readonlyAuthDetails"))],"UserRegistrationResponse"),i_=zp(A=>({name:"signUpUser",method:"POST",url:"/api/v2/user",body:A,responseType:s1j,encrypted:!1})),s_=zp(A=>({name:"getSignupDetails",method:"GET",url:`/api/v2/signup/${A}`,responseType:uI,encrypted:!1})),BZ=zp((A,j)=>({name:"updateSignup",method:"PATCH",url:`/api/v3/signup/${A}`,body:j,responseType:uI})),gZ=zp((A,j)=>({name:"updateSignupAccountType",method:"PATCH",url:`/api/v2/signup/${A}`,body:j,responseType:uI})),hZ=zp((A,j,e)=>({name:"signUpAndGetInfo",method:"GET",url:`/api/v2/signup/${A}?email=${encodeURIComponent(j)}&account-type=${e}`,responseType:uI,encrypted:!1})),d1A=ue.readonly(ue.type({accountUuid:ue.string,userUuid:ue.string,signInTokenDetails:Gj(du)}),"AccountRegistrationResponse"),l_=zp(A=>({name:"postAccount",method:"POST",url:"/api/v1/account",body:A,responseType:d1A,encrypted:!1})),qZ=zp(A=>({name:"resendVerificationEmail",method:"POST",url:`/api/v1/signup/resend/${A}`,responseType:L}));var Oe=J(tA());var Pk=Z("web-api/api/slack.ts"),k1A=9e4,Ik;(function(A){A.Active="A",A.Inactive="I",A.NotLoaded="N"})(Ik||(Ik={}));var c_=Oe.readonly(Oe.type({state:pe(Ik,"SlackAppState"),notifChannelUid:Oe.string,alertChannelUid:Oe.string,scope:Oe.string,teamName:Oe.string,alertNotifTeamUid:Oe.string,enterpriseUid:Oe.string,enterpriseName:Oe.string,enterpriseUrl:Oe.string,enterpriseTeams:qA(Oe.readonlyArray(Oe.string),[]),isGranular:Oe.boolean}),"SlackApp"),d_=Oe.readonly(Oe.type({nonce:Oe.string}),"SlackNonce"),k_=Oe.readonly(Oe.intersection([Oe.type({email:Oe.string,hasPendingInvite:Oe.boolean,hasTeamUser:Oe.boolean,name:Oe.string,uid:Oe.string},"type"),Oe.partial({avatar:Oe.string,handle:Oe.string},"partial")]),"SlackUser"),xZ=Oe.readonly(Oe.type({users:Oe.array(k_)}),"SlackUsers"),u_=Oe.readonly(Oe.intersection([Oe.type({name:Oe.string,uid:Oe.string,numMembers:Oe.number,isPrivate:Oe.boolean},"type"),Oe.partial({topic:Oe.string},"partial")]),"SlackChannel"),vZ=Oe.readonly(Oe.type({channels:Oe.array(u_),cursor:Oe.string}),"GetSlackChannelsResponse"),E_=Oe.readonly(Oe.type({uid:Oe.string,name:Oe.string}),"SlackTeam"),l1j=Oe.readonly(Oe.type({teams:Oe.array(E_)}),"SlackTeams"),p_=Oe.readonly(Oe.type({uid:Oe.string,name:Oe.string,numMembers:Oe.number,handle:Oe.string}),"SlackGroup"),u1A=Oe.readonly(Oe.type({userGroups:Oe.array(p_)}),"SlackGroups"),GZ=Pk(()=>({name:"getSlackUsers",method:"GET",url:"/api/v1/slack/users",responseType:xZ})),fZ=Pk(A=>({name:"getSlackChannels",method:"GET",options:{timeout:k1A},url:`/api/v3/slack/channels${nt({cursor:A})}`,responseType:vZ})),FZ=Pk((A,j)=>({name:"getGridSlackChannels",method:"GET",options:{timeout:k1A},url:`/api/v3/slack/grid/teams/${A}/channels${nt({cursor:j})}`,responseType:vZ})),bZ=Pk(A=>({name:"getGridSlackGroups",method:"GET",url:`/api/v3/slack/grid/teams/${A}/usergroups`,responseType:u1A})),yZ=Pk(A=>({name:"getGridSlackUsers",method:"GET",url:`/api/v1/slack/grid/teams/${A}/users`,responseType:xZ})),$Z=Pk(()=>({name:"getGridSlackTeams",method:"GET",url:"/api/v1/slack/grid/teams",responseType:l1j})),wZ=Pk(()=>({name:"getSlackGroups",method:"GET",url:"/api/v1/slack/usergroups",responseType:u1A})),IZ=Pk(()=>({name:"getSlackApp",method:"GET",url:"/api/v2/slack/app",responseType:c_})),PZ=Pk(A=>({name:"updateSlackApp",method:"PUT",url:"/api/v1/slack/app",body:A,responseType:L})),OZ=Pk(()=>({name:"postSlackNonce",method:"POST",url:"/api/v1/slack/oauth/nonce",responseType:d_})),RZ=Pk(A=>({name:"postSlackAccessToken",method:"POST",url:"/api/v1/slack/oauth/verify",body:A,responseType:L}));var $a=J(tA());var hg=Z("web-api/api/sso_enrollment.ts"),m_;(function(A){A.Web="WEB",A.Core="CORE",A.B5x="B5X",A.Unknown="UNKNOWN"})(m_||(m_={}));var E1A=pe(m_,"LastAuthDeviceType"),p1A=$a.intersection([$a.type({clientType:E1A},"type"),$a.partial({clientName:$a.string},"partial")],"LastAuthDeviceForEnrollment"),c1j=$a.readonly($a.type({signInToken:$a.string}),"DeviceEnrollmentRequest"),m1A=$a.intersection([$a.type({enrollmentUuid:$a.string,accountKeyUuid:$a.string},"type"),$a.partial({lastDevice:p1A},"partial")],"DeviceEnrollmentResponse"),B_;(function(A){A.SelectingVerifier="SELECTING_VERIFIER",A.WaitingForCode="WAITING_FOR_CODE",A.PendingValidation="PENDING_VALIDATION",A.Success="SUCCESS"})(B_||(B_={}));var g_=pe(B_,"DeviceEnrollmentState"),DZ=hg(A=>({name:"kickoffDeviceEnrollment",method:"POST",url:"/api/v3/device/enrollments",encrypted:!1,body:{signInToken:A},responseType:m1A})),TZ=$a.readonly($a.type({status:g_}),"DeviceEnrollmentStatusResponse"),CZ=hg(A=>({name:"getDeviceEnrollmentStatus",method:"GET",url:`/api/v3/device/enrollments/${A}/status`,responseType:TZ})),_Z=hg((A,j)=>({name:"unsafeGetDeviceEnrollmentStatus",method:"POST",url:"/api/v3/device/enrollments/status",encrypted:!1,body:{enrollmentUuid:A,signInToken:j},responseType:TZ})),d1j=$a.readonly($a.type({enrollmentUuid:$a.string,status:g_,device:bl.Type}),"TrustedDeviceEnrollment"),k1j=$a.readonly($a.type({enrollments:$a.array(d1j)}),"AvailableTrustedDeviceEnrollmentsResponse"),SZ=hg(()=>({name:"getPendingDeviceEnrollments",method:"GET",responseType:k1j,url:"/api/v3/device/enrollments"})),HZ=hg(A=>({name:"cancelDeviceEnrollment",method:"DELETE",url:`/api/v2/device/enrollments/${A}`,responseType:L,options:{responseType:"text"}})),MZ=hg((A,j)=>({name:"unsafeCancelDeviceEnrollment",method:"DELETE",url:"/api/v2/device/enrollments",body:{enrollmentUuid:A,signInToken:j},encrypted:!1,responseType:L,options:{responseType:"text"}})),B1A=$a.readonly($a.type({newDeviceUuid:$a.string,verifyingDeviceUuid:$a.string,status:g_}),"DeviceEnrollment"),KZ=hg(A=>({name:"getEnrollment",method:"GET",responseType:B1A,url:`/api/v3/device/enrollments/${A}`})),NZ=hg(A=>({name:"markSignatureInvalid",method:"POST",url:`/api/v3/device/enrollments/${A}/invalid`,responseType:L,options:{responseType:"text"}}));var Xe=J(tA());var EF=Z("web-api/api/sso_migration_report.ts"),LZ=Xe.readonly(Xe.type({userUuid:Xe.string,name:Xe.string,email:Xe.string,avatar:Xe.string,state:Xe.string,type:Xe.string})),u1j=Xe.readonly(Xe.type({total:Xe.number,pending:Xe.number,expired:Xe.number,successful:Xe.number}),"SsoMigrationReportOverviewResponse"),E1j=EF(()=>({name:"getSsoMigrationReportOverview",method:"GET",url:"/api/v1/report/sso/overview",responseType:u1j})),p1j=Xe.readonly(Xe.type({uuid:Xe.string,name:Xe.string}),"SsoGroupPolicy"),m1j=Xe.readonly(Xe.type({groupPolicies:Xe.array(p1j)}),"SsoMigrationReportGroupsResponse"),B1j=EF(()=>({name:"getSsoMigrationReportGroups",method:"GET",url:"/api/v1/report/sso/groups",responseType:m1j})),g1j=EF(A=>({name:"sendSsoMigrationReminderEmail",method:"POST",url:"/api/v1/report/sso/notify",body:{recipients:A},responseType:L})),OXe=Xe.readonly(Xe.intersection([Xe.type({pageSize:Xe.number,pageNum:Xe.number,sortBy:MD("SsoMigrationReportSortBy"),sortDir:MD("SortDirection")}),Xe.partial({users:Xe.array(Xe.string),groups:Xe.array(Xe.string)})]),"SsoReportFilters"),g1A=Xe.readonly(Xe.intersection([Xe.exact(LZ),Xe.type({deadline:Xe.string}),Xe.partial({lastReminder:Xe.string})]),"SsoMigrationReportPendingRecord"),h1j=Xe.readonly(Xe.type({pendingRecords:Xe.array(g1A)}),"SsoMigrationReportPendingResponse"),q1j=EF(A=>({name:"getSsoMigrationPendingReport",method:"POST",url:"/api/v1/report/sso/pending",body:A,responseType:h1j})),h1A=Xe.readonly(Xe.intersection([Xe.exact(LZ),Xe.type({deadline:Xe.string})]),"SsoMigrationReportExpiredRecord"),x1j=Xe.readonly(Xe.type({expiredRecords:Xe.array(h1A)}),"SsoMigrationReportExpiredResponse"),v1j=EF(A=>({name:"getSsoMigrationExpiredReport",method:"POST",url:"/api/v1/report/sso/expired",body:A,responseType:x1j})),q1A=Xe.readonly(Xe.exact(LZ),"SsoMigrationReportSuccessfulRecord"),G1j=Xe.readonly(Xe.type({successfulRecords:Xe.array(q1A)}),"SsoMigrationReportSuccessfulResponse"),f1j=EF(A=>({name:"getSsoMigrationSuccessfulReport",method:"POST",url:"/api/v1/report/sso/success",body:A,responseType:G1j}));var pa=J(tA());var zZ=Z("web-api/api/support.ts"),x1A=pa.readonly(pa.type({provider:pa.string,status:pa.string}),"BillingSupportInfo"),v1A=pa.readonly(pa.type({name:pa.string,uuid:pa.string,domain:pa.string,type:pa.string,state:pa.string,tierName:pa.string,avatar:pa.string,createdAt:pa.string,canBeDeleted:pa.boolean,billing:x1A}),"AccountSupportInfo"),G1A=pa.readonly(pa.type({avatar:pa.string,accountKeyFormat:pa.string,accountKeyUuid:pa.string,lastAuthAt:pa.string,uuid:pa.string}),"UserSupportInfo"),f1A=pa.readonly(pa.type({account:v1A,user:G1A}),"SupportInfo"),F1A=pa.readonly(pa.type({accounts:pa.array(f1A)}),"SupportGetAccounts"),UZ=zZ(A=>({name:"requestSupportEmail",method:"GET",url:`/api/v1/support/start/${encodeURIComponent(A)}`,responseType:L})),VZ=zZ((A,j)=>({name:"getSupportAccountsList",method:"GET",url:`/api/v1/support/getaccounts/${encodeURIComponent(A)}/token/${j}`,encrypted:!1,responseType:F1A})),XZ=zZ((A,j,e)=>{let t=`email=${encodeURIComponent(j)}&token=${e}`;return{name:"requestAccountDeletion",method:"GET",url:`/api/v1/support/senddelete/account/${A}?${t}`,responseType:L}});var b1j=Z("web-api/api/survey.ts"),JZ;(function(A){A.Cancellation="cancellation",A.Deletion="deletion"})(JZ||(JZ={}));var WZ;(function(A){A.DuplicateAccount="duplicate_account",A.DidNotUse="did_not_use",A.CouldNotUnderstand="could_not_understand",A.TooExpensive="too_expensive",A.MeNotYou="me_not_you",A.Other="other"})(WZ||(WZ={}));var QZ=b1j(A=>({name:"submitDepartureSurvey",method:"POST",url:"/api/v1/survey",body:A,responseType:L,encrypted:!1}));var Ks=J(tA());var h_=async(A,j,e,t)=>y1j(t?.timeout,t?.abortController,j,{method:A,body:YZ(e,t?.dataType),cache:t?.cache?"default":"reload",credentials:t?.withCredentials?"include":"omit",headers:t?.headers}),YZ=(A,j)=>{if(!(typeof A>"u"||A===null)){if(A instanceof ArrayBuffer&&(A=new Uint8Array(A)),A instanceof Uint8Array){if(j==="arraybuffer")return A;throw new TypeError("Expected arraybuffer data type")}if(typeof A=="string"){if(j==="text")return Ij(A);throw new TypeError("Expected text data type")}if(j==="json")return Qe(A);throw new TypeError("Unexpected request body and data type")}},y1j=async(A,j,e,t)=>{if(typeof A>"u")return fetch(e,t);if(typeof AbortController>"u")return Promise.race([fetch(e,t),new Promise((a,n)=>{setTimeout(()=>n(b1A()),A)})]);let r=j??new AbortController;return Promise.race([fetch(e,{...t,signal:r.signal}),new Promise((a,n)=>{setTimeout(()=>{n(b1A()),r.abort()},A)})])},b1A=()=>new K7(td.serverRequestTimedOut,W("The request took too long. Check your Internet connection and try again."));var pF=async(A,j)=>h_("GET",A,void 0,j).then(async e=>{if(e.status<200||e.status>=300)throw new M7(e.status);return j?.responseType==="text"?e.text():e.json()}),ZZ=async A=>{let j=`https://api.pwnedpasswords.com/range/${A}`;return pF(j,{responseType:"text",timeout:5e3,cache:!0}).then(e=>cj(e,Ks.string).unwrap()).then(y1A(A))},y1A=A=>j=>j.trim().split(`
`).map(e=>`${A}${e.slice(0,35)}`),AAA=async A=>pF(y4(A,"generator/combined_words.txt"),{responseType:"text"}).then(j=>cj(j,Ks.string).unwrap()).then(j=>j.trim().split(`
`)),jAA=async A=>pF(y4(A,"banlist/combined_words.txt"),{responseType:"text"}).then(j=>cj(j,Ks.string).unwrap()).then(j=>j.trim().split(`
`)),eAA=async()=>pF("https://watchtower.1password.com/api/v1/compromised-sites",{cache:!0}).then(A=>cj(A,Ks.record(Ks.string,Ks.number)).unwrap()),tAA=async()=>pF("https://watchtower.1password.com/api/v1/2fa-sites",{cache:!0}).then(A=>cj(A,Ks.record(Ks.string,Ks.string)).unwrap()),rAA=async()=>pF("https://watchtower.1password.com/api/v1/passkey-sites",{cache:!0}).then(A=>cj(A,Ks.record(Ks.string,Ks.string)).unwrap());var Up=J(tA());var $1j=Z("web-api/api/trustpilot.ts"),$1A=Up.readonly(Up.type({reviewLink:Up.string,rating:Up.number,numberOfReviews:Up.number}),"TrustpilotData"),aAA=$1j(()=>({name:"getTrustpilotReviewData",method:"GET",url:"/api/v1/trustpilot-review",responseType:$1A}));var Ro=J(tA());var q_=Z("web-api/api/user_cookie.ts"),w1A=Ro.readonly(Ro.type({userUuid:Ro.string,userEmail:Ro.string,userName:Ro.string,userAvatarURL:Ro.string,usingMyDomain:Ro.boolean,accountUuid:Ro.string,accountType:Ro.string,accountName:Ro.string,accountDomain:Ro.string,accountAvatarURL:Ro.string,hasPrioritySupport:Ro.boolean}),"UserCookie"),nAA=q_(A=>({name:"getUserCookies",method:"GET",url:`https://accounts.${A}/api/v1/accountcookies`,options:{withCredentials:!0,timeout:5e3},responseType:qA(Ro.array(w1A),[]),encrypted:!1})),oAA=q_(A=>({name:"setUserCookie",method:"PATCH",url:`https://accounts.${A}/api/v1/accountcookie`,options:{withCredentials:!0},responseType:L})),iAA=q_((A,j)=>({name:"deleteAccountCookie",method:"DELETE",url:`https://accounts.${A}/api/v1/accountcookie/account/${j}`,options:{withCredentials:!0},responseType:L})),sAA=q_((A,j)=>({name:"deleteUserCookie",method:"DELETE",url:`https://accounts.${A}/api/v1/accountcookie/user/${j}`,options:{withCredentials:!0},responseType:L}));var Zt=J(tA());var x_=Z("web-api/api/hibp.ts"),lAA=Zt.readonly(Zt.type({name:Zt.string,domain:Zt.string,title:Zt.string,date:Zt.string,addedDate:Zt.string,description:Zt.string,dataClasses:Zt.array(Zt.string),isSpamList:qA(Zt.boolean,!1),notifiedDate:Gj(Zt.string)}),"HibpBreach"),v_=Zt.readonly(Zt.intersection([Zt.type({email:Zt.string,breachNames:Zt.array(Zt.string)},"type"),Zt.partial({aliases:Zt.array(Zt.string),user:uo,invitePending:Zt.boolean,inviteExpired:Zt.boolean},"partial")]),"HibpUser"),I1A=Zt.readonly(Zt.type({domains:Zt.array(Zt.string),users:Zt.array(v_),breaches:Zt.array(lAA),lastRunAt:Gj(Zt.string),isTruncated:Zt.boolean,numActive:Zt.number,numInactive:Zt.number}),"HibpDomainReport"),P1A=Zt.readonly(Zt.type({csv:Zt.string}),"HibpDomainReportCsv"),cAA=x_(()=>({name:"getHibpReport",method:"GET",url:"/api/v1/report/hibp",options:{timeout:6e4},responseType:Zt.array(lAA)})),dAA=x_(A=>({name:"getHibpDomainReport",method:"GET",url:`/api/v1/report/hibp/domain/${A}`,options:{timeout:6e4},responseType:I1A})),kAA=x_((A,j)=>{let e=nt({reportType:j});return{name:"getHibpDomainReportCsv",method:"GET",url:`/api/v1/report/hibp/domain/${A}/csv${e}`,options:{timeout:6e4},responseType:P1A}}),uAA=x_(A=>({name:"postHibpDomainReportNotify",method:"POST",url:"/api/v1/report/hibp/domain/notify",body:A,responseType:L}));var mF=J(tA());var w1j=Z("web-api/api/vault_managers.ts"),O1A=mF.readonly(mF.type({managers:mF.readonlyArray(uo)}),"VaultManagers"),EAA=w1j(A=>({name:"getVaultManagers",method:"GET",url:`/api/v1/vault/${A}/managers`,responseType:O1A}));var G6=J(tA());var pI=Z("web-api/api/verified_domain.ts"),EI;(function(A){A.Email="E",A.Dns="D"})(EI||(EI={}));var G_=G6.readonly(G6.partial({txtRecord:G6.string}),"BeginDomainVerificationResponse"),pAA=pI((A,j,e)=>({name:"beginDomainVerification",method:"POST",url:"/api/v1/verifieddomains/begin",body:{type:A,domain:j,emailMailbox:e},responseType:G_})),mAA=pI((A,j,e)=>({name:"completeDomainVerification",method:"POST",url:"/api/v1/verifieddomains/complete",body:{type:A,domain:j,token:e},responseType:L})),f_=G6.readonly(G6.intersection([G6.type({domain:G6.string},"type"),G6.partial({aliasOf:G6.string},"partial")]),"VerifiedDomain"),F_=G6.readonly(G6.intersection([G6.type({domain:G6.string,type:G6.string},"type"),G6.partial({txtRecord:G6.string},"partial")]),"PendingVerifiedDomain"),b_=G6.readonly(G6.type({verified:G6.readonlyArray(f_),pending:G6.readonlyArray(F_)}),"GetVerifiedDomainsResponse"),BAA=pI(()=>({name:"getVerifiedDomains",method:"GET",url:"/api/v1/verifieddomains",responseType:b_})),gAA=pI(A=>({name:"updateVerifiedDomain",method:"PUT",url:"/api/v1/verifieddomains/update",body:A,responseType:L})),hAA=pI(A=>({name:"deleteVerifiedDomain",method:"DELETE",url:`/api/v1/verifieddomains/${A}`,responseType:L}));var I1j=Z("web-api/api/wizard_progress.ts"),qAA=I1j(A=>({name:"createProvisioningProgressStep",method:"POST",url:"/api/v1/wizard/provisioning/progress",body:A,responseType:L}));var to=J(tA());var y_=Z("web-api/api/account_transfer.ts"),R1A=to.readonly(to.intersection([to.type({uuid:to.string},"type"),to.partial({domain:to.string},"partial")]),"AccountTransferAccount"),P1j=to.readonly(to.type({pending:to.number,complete:to.number,declined:to.number}),"AccountTransferUserCounts"),D1A=to.readonly(to.intersection([to.type({originAccount:R1A,destinationAccount:R1A},"type"),to.partial({userCounts:P1j},"partial")]),"AccountTransferDetails"),xAA=y_(()=>({name:"getAccountTransfersDetails",method:"GET",url:"/api/v1/account/transfer",responseType:D1A})),vAA=y_(A=>({name:"postMigratingUsers",method:"POST",url:"/api/v1/accountmigration/users",body:A,responseType:L})),mI;(function(A){A.Pending="P",A.Complete="C",A.Declined="D",A.Inactive="I"})(mI||(mI={}));var GAA=y_(A=>({name:"patchMigratingUserState",method:"PATCH",url:`/api/v1/accountmigration/user/${A}`,responseType:L})),fAA=y_(()=>({name:"suspendMigratedUser",method:"PUT",url:"/api/v1/accountmigration/user/suspend",responseType:L}));var Ok=J(tA());var T1A=Z("web-api/api/fastmail.ts"),C1A=Ok.readonly(Ok.type({verifier:Ok.string,nonce:Ok.string}),"FastmailVerifier"),_1A=Ok.readonly(Ok.type({accountId:Ok.string,refreshToken:Ok.string},"FastmailAccountId")),FAA=T1A(()=>({name:"postFastmailVerifier",method:"POST",url:"/api/v1/fastmail/verifier",responseType:C1A})),bAA=T1A(A=>({name:"postFastmailRefreshToken",method:"POST",url:"/api/v1/fastmail/oauth/exchange",body:A,responseType:_1A}));var ro=J(tA());var $_=Z("web-api/api/brex.ts"),S1A=ro.readonly(ro.type({nonce:ro.string,verifier:Gj(ro.string)}),"BrexVerifier"),H1A=ro.readonly(ro.type({refreshToken:ro.string,accountId:ro.string},"BrexRefreshToken")),yAA=$_(()=>({name:"postBrexVerifier",method:"POST",url:"/api/v1/brex/verifier",responseType:S1A})),$AA=$_(A=>({name:"postBrexRefreshToken",method:"POST",url:"/api/v1/brex/oauth/exchange",body:A,responseType:H1A})),M1A=ro.readonly(ro.type({clientSecret:Gj(ro.string),clientId:ro.string},"BrexClientInfoResponse")),K1A=ro.readonly(ro.type({refreshToken:ro.string,accessToken:ro.string,expiresIn:ro.number},"BrexRequestAccessTokenResponse")),wAA=$_(()=>({name:"getBrexClientInfo",method:"GET",url:"/api/v1/brex/clientinfo",responseType:M1A})),IAA=$_(A=>({name:"requestBrexAccessToken",method:"POST",url:"/api/v1/brex/oauth/accesstoken",body:A,responseType:K1A}));var O1j=Z("web-api/api/telemetry.ts"),PAA=O1j(A=>({name:"reportUsoAction",method:"POST",url:`/api/v1/uso/telemetry/${A}`,responseType:L}));var Vp=J(tA());var w_=Z("web-api/api/session_restoration.ts"),OAA=Vp.readonly(Vp.type({sessionRestorationToken:Vp.string,tokenPubKey:Vp.string},"SessionKeySaveResponse")),R1j=w_((A,j)=>({name:"saveSessionRestorationKey",method:"POST",url:"/api/v2/session-restore/save-key",body:{jwk:A,redirectState:j},responseType:OAA,encrypted:!0,decryptResponse:"dontDecrypt"})),D1j=w_((A,j)=>({name:"saveSessionRestorationKey",method:"POST",url:"/api/v2/session-restore/save-key/u",body:{jwk:A,redirectState:j},responseType:OAA,encrypted:!1})),N1A=Vp.readonly(Vp.type({sessionRestorationKey:$A.JwkSymKey},"SessionKeyRestoreResponse")),T1j=w_((A,j)=>({name:"saveSessionRestorationKey",method:"POST",encrypted:!1,url:"/api/v2/session-restore/restore-key",body:{sessionRestorationToken:A,redirectState:j},responseType:N1A})),C1j=w_(A=>({name:"destroySessionRestorationKey",method:"DELETE",encrypted:!1,url:"/api/v2/session-restore/destroy-key",body:{sessionRestorationToken:A},responseType:L}));var BF=J(tA());var L1A=Z("web-api/api/default_vault_permissions.ts"),_1j=BF.readonly(BF.type({acl:BF.number})),RAA=L1A(()=>({name:"getDefaultVaultPermissions",method:"GET",responseType:_1j,url:"/api/v3/account/defaultvaultacl"})),DAA=L1A(A=>({name:"getDefaultVaultPermissions",method:"PUT",responseType:L,url:"/api/v3/account/defaultvaultacl",body:A}));var Cn=J(tA());var I_=Z("web-api/api/features.ts"),z1A=Cn.readonly(Cn.type({name:Cn.string,value:Cn.string}),"VariantPayload"),U1A=Cn.readonly(Cn.intersection([Cn.type({name:Cn.string}),Cn.partial({variantPayload:Qo(Cn.union([z1A,Cn.undefined]),A=>{Qn()&&console.warn(`Unexpected variantPayload type. Received ${typeof A} with structure ${JSON.stringify(A)}. Setting variantPayload to undefined.`)})},"partial")]),"Feature"),BI=Cn.readonly(Cn.type({features:Cn.readonlyArray(U1A)}),"FeaturesList"),TAA=I_((A,j,e)=>({name:"getFeatures",method:"POST",url:"/api/v2/features",body:{features:A},options:{headers:{...j&&{"x-datadog-trace-id":j.toString()},...e&&{"x-datadog-parent-id":e.toString()}}},responseType:BI})),CAA=I_((A,j,e,t,r)=>({name:"getAuthFeaturesFromService",method:"POST",url:"/api/account-features",body:{features:A,baseFeatureContext:j,authFeatureContext:e},options:{headers:{...t&&{"x-datadog-trace-id":t.toString()},...r&&{"x-datadog-parent-id":r.toString()}}},responseType:BI})),_AA=I_((A,j,e)=>({name:"getPreAuthFeatures",method:"POST",url:"/api/v2/pre-registration-features",body:{features:A},options:{headers:{...j&&{"x-datadog-trace-id":j.toString()},...e&&{"x-datadog-parent-id":e.toString()}}},responseType:BI,encrypted:!1})),SAA=I_((A,j,e,t)=>({name:"getPreAuthFeaturesFromService",method:"POST",url:"/api/pre-registration-features",body:{features:A,baseFeatureContext:j},options:{headers:{...e&&{"x-datadog-trace-id":e.toString()},...t&&{"x-datadog-parent-id":t.toString()}}},responseType:BI,encrypted:!1}));var _n=J(tA());var P_=Z("web-api/api/detailed_vault_reporting.ts"),S1j=_n.readonly(_n.type({pubKey:zf}),"DetailedVaultReportingPubkeyV2"),HAA=P_(()=>({name:"getDetailedVaultReportingPubkeyV2",method:"GET",url:"/api/v2/report/dvr/pubkey",responseType:S1j})),MAA=P_(()=>({name:"getHasDetailedVaultReportingKeyset",method:"GET",url:"/api/v1/report/dvr/pubkey/ping",responseType:_n.boolean})),H1j=_n.readonly(_n.type({dvrPrivateKey:_n.string}),"RegisterDetailedVaultReportingKeyRequest"),V1A=_n.readonly(_n.type({}),"RegisterDetailedVaultReportingKeyResponse"),KAA=Lq(A=>({method:"POST",name:p`registerDetailedVaultReportingKey`,url:"/api/v1/report/dvr/register-epm-app-discovery",destinationPath:"/epm-login-discovery/api/v1/register",body:A,responseType:V1A})),M1j=_n.readonly(_n.intersection([_n.type({vaultUuid:_n.string}),_n.partial({items:_n.array(_n.string,"vaultItemUuids")})]),"VaultReportingSyncResponse"),X1A=Gj(M1j),NAA=P_(()=>({name:"getVaultReportingSync",method:"GET",url:"/api/v1/report/dvr/sync",responseType:X1A})),LAA=P_(A=>({name:"putVaultReportingSnapshotsV2",method:"PUT",url:"/api/v2/report/dvr/snapshots",body:A,responseType:L}));var Za=J(tA());var xA={};er(xA,{Account:()=>Et,AccountMeta:()=>zT,AccountSettings:()=>YT,Activity:()=>fF,AdminWatchtowerKeysetObjectDataValue:()=>z_,AuditEventReportRequest:()=>wPj,Auth:()=>ra,AuthCodec:()=>njA,AuthParams:()=>FF,BaseManagedCredentialData:()=>hw,BasicNewsletter:()=>l8j,BitSet:()=>Kj,CONTENT_TYPE:()=>ow,ChildAccountRelationship:()=>Xq,ColorType:()=>wF,CreateManagedCredential:()=>cFj,DEFAULT_ISSUER:()=>GjA,DataType:()=>Tn,DetailedVaultReportingObjectDataValue:()=>HPA,DetailedVaultReportingObjectDataValueV2:()=>MPA,DisplayPermission:()=>r$j,DuoSettings:()=>VT,ECDSAPrivateKey:()=>vg,ECDSAPrivateKeyPF:()=>gF,ECDSAPublicKey:()=>Qa,ECDSAPublicKeyPF:()=>hF,EmailProviderDomains:()=>SPj,EmptyObjectDataValue:()=>NPA,EncryptedVaultItemSnapshotBatchV2:()=>x8j,EncryptionKeyPair:()=>wl,EncryptionKeyPairPlaintext:()=>ePj,EntityCounts:()=>ZT,Env:()=>ojA,ExternalVaultItem:()=>Qz,File:()=>GI,FirewallRuleAction:()=>Tq,FirewallRuleAnonymousType:()=>Cq,FirewallRuleScopeType:()=>lu,FirewallRuleType:()=>Dq,GENERATED_FAMILY_DOMAIN_PREFIX:()=>yPj,GetCredentialsForPolicyResponse:()=>sFj,Group:()=>IA,GroupMembershipWithKeyset:()=>hI,IntegrationTranslatableValues:()=>ijA,Invitation:()=>Bu,InviteVaultV2:()=>Fg,InviteVaultV2List:()=>M_,JWK_ALG_A256GCM:()=>Nt,KID_MASTER_PASSWORD:()=>gp,Keyset:()=>Ya,KeysetCiphertext:()=>ns,LocalAuth:()=>gu,LocalAuthVerifier:()=>fI,MY_DOMAIN:()=>Il,ManagedCredential:()=>iFj,ManagedCredentialDetails:()=>fT,ManagedCredentialOverview:()=>GT,MasterPasswordPolicySettings:()=>WT,MasterPasswordPolicyType:()=>Iq,MspPermission:()=>Ms,Named:()=>Xp,ObjectDataAccess:()=>ig,ObjectDataAccessAcl:()=>ai,ObjectDataAccessScope:()=>Di,ObjectDataAccessorType:()=>fl,ObjectDataType:()=>hjA,ObjectType:()=>ss,OldUser:()=>Eo,PASSWORD_ENTROPY:()=>gw,PASSWORD_STRENGTH:()=>Bw,Package:()=>Wq,PackageV2:()=>xjA,Permission:()=>tt,Person:()=>zr,Preference:()=>Wp,Promotion:()=>Vf,ProvisionedGroupKeyset:()=>RI,ProvisionedKeys:()=>DI,ProvisionedVaultKey:()=>OI,ProvisioningSettings:()=>JT,RSAPrivateKey:()=>xg,RSAPublicKey:()=>Zr,RecoverableGroupKeyset:()=>CI,RecoverableKeys:()=>SI,RecoverableKeysForPeople:()=>HI,RecoverablePackageKey:()=>_I,RecoverableVaultKey:()=>TI,RecoveryKeysetPermissions:()=>IC,RestrictedHostedProvisioningManagedGroupPermissions:()=>oW,START_DOMAIN:()=>sPA,SerializableLocalAuthCredentials:()=>EPA,ServiceAccountActions:()=>XPA,ServiceAccountConnectObjectDataValue:()=>U_,ServiceAccountJwtClaims:()=>UPA,ServiceAccountJwtPrivateClaims:()=>zPA,ServiceAccountStreamingObjectDataValue:()=>SPA,ServiceAccountTokenState:()=>E8j,ServiceAccountUser:()=>ks,ServiceAccountUserManagedObjectDataValue:()=>KPA,SigningKeyPair:()=>Gg,SlackApp:()=>c_,SlackAppState:()=>Ik,SlackChannel:()=>u_,SlackGroup:()=>p_,SlackInvitationScope:()=>bjA,SlackNonce:()=>d_,SlackSettings:()=>UT,SlackTeam:()=>E_,SlackUser:()=>k_,SnapshotVaultTypes:()=>$jA,SupportSettings:()=>XT,SymmetricKey:()=>$i,SymmetricKeyPf:()=>dT,TEMPLATE_TITLE_MAX_LENGTH:()=>CKe,TokenFeatures:()=>KI,UpdatedManagedCredential:()=>lFj,User:()=>Dj,UserCombinedObjectDataAccess:()=>DC,UserCookie:()=>NI,Vault:()=>sj,VaultAccess:()=>wt,VaultAttrs:()=>X_,VaultClientAccess:()=>bg,VaultItem:()=>kA,VaultItemDetails:()=>Nf,VaultItemOverview:()=>Kf,VaultItemTemplate:()=>Sj,VaultSnapshotInsertScopeType:()=>$F,WC_ALG_A256GCM:()=>MGA,WatchtowerDataStructureV1:()=>IPj,WatchtowerDataStructureV2:()=>ajA,WatchtowerStructureVersion:()=>H_,billing:()=>Eq,compareSlackUsers:()=>p8j,createEmptySlackApp:()=>yjA,createServiceAccountJwt:()=>fjA,createServiceAccountTokenInfo:()=>d8j,createSymmetricKey:()=>Ot,crypto1:()=>Iz,crypto2:()=>MI,cryptoTests:()=>Z_,decryptSigningKeyPair:()=>T_,distributors:()=>YPA,ecdsa:()=>yI,extractDerivationInfo:()=>iw,getAcceptedInviteVaultsKeyedByUserUuid:()=>HPj,getImportedPubKey:()=>zq,getNativeKeyAlg:()=>gf,getSlackUserInitials:()=>m8j,importMasterKey:()=>Mfj,importPubKey:()=>cs,isGenericDomain:()=>$Pj,isSlackGridApp:()=>h8j,isSymKeyAlg:()=>w$,localAuthCredentialsToSerializable:()=>pPA,newSnapshotForItemV2:()=>Q_,rsa:()=>K_,slackAppHasScope:()=>B8j,slackAppIsActive:()=>g8j,tokenSignatureHash:()=>FjA,validServiceAccountAcl:()=>u8j,vaultACL:()=>me});var qg=J(Fo());var vr=X6,ls=kp;var ij=A=>async(j,e)=>Promise.resolve().then(e).catch(ar(A,j)),Sn=async(A,j,e=0)=>{let t=A.join("#"),r=zAA[t];if(r?.promise&&K1j(r,e))return r.promise;let a=Promise.resolve().then(j);return zAA[t]={promise:a,timeFinished:1/0},a.then(n=>(J1A(t),n),n=>{throw J1A(t),n})},K1j=(A,j)=>Date.now()-A.timeFinished<j,zAA={},J1A=A=>{let j=zAA[A];j&&(j.timeFinished=Date.now())};var N1j="action/mfa",gI=ij(N1j);var L1j=async(A,j)=>gI("enableMFA",async()=>{let e=await mV(A.session,j);return A.user&&(e&&e.dsecret&&(A.user.dSecret=e.dsecret),A.user.hasMFAEnabled=!0),e??void 0}),z1j=async(A,j)=>{try{await BV(A.session,j),A.user&&(A.user.dSecret=void 0,A.user.hasMFAEnabled=!1)}catch(e){throw console.error("disableMfa failed: "+e),e}},U1j=async(A,j)=>gI("sendMFACode",async()=>gV(A.session,j)),V1j=async A=>gI("getMFA",async()=>(await hV(A.session)).map(e=>({...e,createdAt:vr(e.createdAt),updatedAt:vr(e.updatedAt)}))),X1j=async A=>gI("getMFAConfig",async()=>qV(A.session)),J1j=async(A,j)=>gI("verifyTotp",async()=>xV(A.session,j)),O_=(A,j)=>{let t=new qg.misc.hmac(qg.codec.base64url.toBits(A),qg.hash.sha256).encrypt(qg.codec.base32.toBits(j));return qg.codec.base64url.fromBits(t).slice(0,8)},W1A=A=>({type:"public-key",id:ej(A)}),W1j=async(A,j,e,t,r)=>{if(!navigator.credentials||!navigator.credentials.create)throw new Error("Browser does not support WebAuthn.");if(!A.user)throw new Error("Missing user");let a=e.map(l=>W1A(l)),n=await navigator.credentials.create({publicKey:{challenge:ej(t),rp:{id:r,name:"1Password"},user:{id:Ij(A.user.uuid),name:A.user.email,displayName:A.user.name},pubKeyCredParams:[{type:"public-key",alg:-7}],timeout:6e4,attestation:"none",authenticatorSelection:{authenticatorAttachment:"cross-platform",userVerification:"discouraged",residentKey:"discouraged"},excludeCredentials:a}});if(!n)throw new Error("Credential is missing.");let{attestationObject:o,clientDataJSON:i}=n.response;return{type:Oi.WebAuthn,keyHandle:n.id,keyValue:Aj(new Uint8Array(o)),keyName:j,webAuthnClientData:Aj(new Uint8Array(i))}},Q1j=async(A,j,e)=>{if(!navigator.credentials||!navigator.credentials.get)throw new Error("Browser does not support WebAuthn.");let t=A.map(i=>W1A(i));if(t.length===0)throw new Error("No key handles provided.");let r=await navigator.credentials.get({publicKey:{challenge:ej(j),rpId:e,allowCredentials:t,userVerification:"discouraged",timeout:6e4}});if(!r)throw new Error("Failed to get credential response.");let{signature:a,authenticatorData:n,clientDataJSON:o}=r.response;return{keyHandle:r.id,signature:Aj(new Uint8Array(a)),authData:Aj(new Uint8Array(n)),clientData:Aj(new Uint8Array(o))}},Y1j=()=>{let A=navigator.credentials;return!!(A&&A.get&&A.create&&window.PublicKeyCredential)};var hI;(function(A){A.create=j=>({...Z1j,...j})})(hI||(hI={}));var Z1j={role:dr.Role.Member,state:dr.State.Active,version:1};var D_=J(tA());var APj="model/rsa_public_key",jPj=ar(APj),zq=async A=>Promise.resolve().then(async()=>"jwk"in A?A:cs(A)),cs=async A=>new Zr(A.kid,void 0,A).import(),Zr=class A{constructor(j,e,t){this.encrypt=async r=>Promise.resolve().then(async()=>{let a,n;if(r.length>2048/8)throw new Error("Plaintext is too large.");if(!this.jwk)throw new Error("Missing JWK encryption key.");if(!this.key)throw new Error("Missing encryption key.");if(this.jwk.alg===A.JWK_ALG_RSA_OAEP)n=A.JWK_ALG_RSA_OAEP,a=A.WC_ALG_RSA_OAEP;else if(this.jwk.alg===A.JWK_ALG_RSA_OAEP_256)n=A.JWK_ALG_RSA_OAEP_256,a=A.WC_ALG_RSA_OAEP_256;else throw new Error("Unsupported encryption alg");return $A.subtle.encrypt(a,this.key,r).then(o=>{let i=new Uint8Array(o),s=Aj(i);return{kid:this.uuid,enc:n,cty:A.CONTENT_TYPE,data:s}})}).catch(jPj("encrypt")),this.import=async r=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK");let a=this.jwk.kid,n=!0,o;if(this.jwk.alg===A.JWK_ALG_RSA_OAEP_256)o=A.WC_ALG_RSA_OAEP_256;else if(this.jwk.alg===A.JWK_ALG_RSA_OAEP)o=A.WC_ALG_RSA_OAEP;else throw new Error("Unexpected algorithm");return this.jwk=D$(this.jwk),this.key=await $A.subtle.importKey("jwk",this.jwk,o,n,["encrypt"]),this.uuid=a,this},this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await C$(this.uuid,this.key),this.jwk},this.uuid=j,this.key=e,this.jwk=t}};Zr.CONTENT_TYPE="b5+jwk+json";Zr.JWK_ALG_RSA_OAEP_256="RSA-OAEP-256";Zr.WC_ALG_RSA_OAEP_256={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}};Zr.JWK_ALG_RSA_OAEP="RSA-OAEP";Zr.WC_ALG_RSA_OAEP={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}};Zr.DEFAULT_ALG=Zr.WC_ALG_RSA_OAEP;var R_=p`model/rsa_private_key`,Q1A=ar(R_.str),xg=class{constructor(j,e,t){this.decrypt=async r=>Promise.resolve().then(async()=>{typeof r=="string"&&Rs([p`Unexpected JSON string: json`],R_,p`decrypt`);let a=cj(typeof r=="string"?JSON.parse(r):r,Fa,{mode:"unsafe_report_only",file:R_,func:p`decrypt`}).unwrap();if(Zr.CONTENT_TYPE!==a.cty)throw new Error("Unexpected content type");if(a.kid!==this.uuid)throw new Error("Content encrypted with wrong key");if(!this.key)throw new Error("Missing decryption key");let n;if(a.enc===Zr.JWK_ALG_RSA_OAEP_256){if(!xp.rsaOaep256)throw new CA.ClientError(CA.ClientErrorCode.noRsaOaep256Support,W("Browser does not support RSA-OAEP-256"));n=Zr.WC_ALG_RSA_OAEP_256}else if(a.enc===Zr.JWK_ALG_RSA_OAEP)n=Zr.WC_ALG_RSA_OAEP;else throw new Error("Unexpected algorithm");let o=ej(a.data);return $A.subtle.decrypt(n,this.key,o).then(i=>new Uint8Array(i))}).catch(Q1A("decrypt")),this.import=async r=>Promise.resolve().then(async()=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK");let a=this.jwk.kid,n=!0,o;if(this.jwk.alg===Zr.JWK_ALG_RSA_OAEP_256)o=Zr.WC_ALG_RSA_OAEP_256;else if(this.jwk.alg===Zr.JWK_ALG_RSA_OAEP)o=Zr.WC_ALG_RSA_OAEP;else throw new Error("RSAPrivateKey failed to import, unexpected alg");return this.jwk=T$(this.jwk),$A.subtle.importKey("jwk",this.jwk,o,n,["decrypt"]).then(i=>(this.key=i,this.uuid=a,this))}).catch(Q1A("import")),this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await C$(this.uuid,this.key),this.jwk},this.encryptWithKey=async r=>{if(!this.jwk)throw new Error("Missing JWK");return r.encrypt(Qe(this.jwk))},this.decryptWithKey=async(r,a)=>{let n=await r.decrypt(a),o=cj(n,Ne).unwrap(),i=cj(o,pk,{mode:"unsafe_report_only",file:R_,func:p`decryptWithKey`}).unwrap();return this.import(i)},this.uuid=j,this.key=e,this.jwk=t}};var UAA=p`web-api/model/encryption_key_pair.ts`,ePj=D_.readonly(D_.type({pubKey:Au,priKey:pk}),"EncryptionKeyPairPlaintext"),wl=class{constructor(j,e,t){this.uuid=j,this.pubKey=e,this.priKey=t,this.encryptWithKey=async r=>{let a=await this.priKey.encryptWithKey(r),n=this.pubKey.jwk;if(!n)throw new Error("Missing public key");return{pubKey:n,encPriKey:a}},this.encrypt=e.encrypt,this.decrypt=t.decrypt}};(function(A){A.generate=async j=>{let e=async()=>tPj(j).then(rPj),r=Uh(31,()=>e),a=e();return xi(r,async(o,i)=>o.catch(async()=>i()),a).catch(o=>{throw new Error(`Failed to generate valid encryption keys after 32 attempts. <${C6(o)}>`)})},A.decryptWithKey=async(j,{pubKey:e,encPriKey:t})=>{let r={mode:"unsafe_report_only",file:UAA,func:p`decryptWithKey`};typeof e=="string"&&Rs([p`Unexpected JSON string: pubKey`],UAA,p`decryptWithKey`),typeof t=="string"&&Rs([p`Unexpected JSON string: encPriKey`],UAA,p`decryptWithKey`);let a=cj(typeof e=="string"?JSON.parse(e):e,Au,r).unwrap(),n=cj(typeof t=="string"?JSON.parse(t):t,Fa,r).unwrap(),o=a.kid,[i,s]=await Promise.all([new Zr(o).import(a),new xg(o).decryptWithKey(j,n)]);if(i.uuid!==s.uuid)throw new Error("Public and private key IDs do not match");return new A(o,i,s)}})(wl||(wl={}));var tPj=async A=>{let j=["encrypt","decrypt"],t=Zr.DEFAULT_ALG,r=A||Se(),{publicKey:a,privateKey:n}=await $A.subtle.generateKey(t,!0,j);if(!a||!n)throw new Error("Did not generate key pair properly");let o=new Zr(r,a),i=new xg(r,n);return await Promise.all([o.exportKey(),i.exportKey()]),new wl(r,o,i)},rPj=async A=>{let j={pubKey:A.pubKey.jwk,priKey:A.priKey.jwk};if(R$.primesAreReversed(j.priKey))throw new Error("p < q");let e=Ot(),t=e.generate(Nt).then(async()=>A.encryptWithKey(e)).then(async o=>wl.decryptWithKey(e,o)),r="I've got a golden ticket!",a=t.then(async o=>o.encrypt(Ij(r)));return Promise.all([t,a]).then(async([o,i])=>o.decrypt(i)).then(async o=>ln(o)===r?Promise.resolve():Promise.reject(new Error("Decryption failed"))).then(()=>A)};var ePA=J(Fo());var Y1A="model/ecdsa_public_key",aPj=ar(Y1A),nPj=ij(Y1A),Qa=class A{constructor(j,e,t){this.verify=async(r,a)=>Promise.resolve().then(async()=>{if(a.alg!=="ES256")throw new Error("Unknown jwk signature alg:"+a.alg);let n=A.DEFAULT_SIGN_ALG;if(a.kid!==this.uuid)throw new Error("Unexpected signature kid:"+a.kid+" != "+this.uuid);if(!this.key)throw new Error("Missing public key");return $A.subtle.verify(n,this.key,ej(a.s),r).then(o=>!!o)}).catch(aPj("verify")),this.import=async r=>nPj("import",async()=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK key");let a=this.jwk.kid;if(this.jwk=_3(this.jwk),this.jwk.kty!=="EC"||this.jwk.crv!=="P-256")throw new Error("Unexpected EC key/crv: "+this.jwk.kty+", "+this.jwk.crv+".");let n=!0,o=A.KEY_ALG_ES256,i=["verify"],s=await $A.subtle.importKey("jwk",this.jwk,o,n,i).catch(()=>{throw new CA.ClientError(CA.ClientErrorCode.invalidSigningKeyPair,W("Invalid public key"))});return this.uuid=a,this.key=s,this}),this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await _$(this.uuid,this.key,cq),this.jwk},this.uuid=j||"",this.key=e,this.jwk=t}};Qa.KEY_ALG_ES256={name:"ECDSA",namedCurve:"P-256"};Qa.SIGN_ALG_ES256={name:"ECDSA",hash:{name:"SHA-256"},jwkAlgorithmIdentifier:"ES256"};Qa.DEFAULT_KEY_ALG=Qa.KEY_ALG_ES256;Qa.DEFAULT_SIGN_ALG=Qa.SIGN_ALG_ES256;var VAA=p`web-api/model/ecdsa_private_key.ts`,oPj=ar(VAA.str),iPj=ij(VAA.str),vg=class{constructor(j,e,t){this.sign=async r=>Promise.resolve().then(async()=>{if(!this.key)throw new Error("Missing private key");let a=Qa.DEFAULT_SIGN_ALG;return $A.subtle.sign(a,this.key,r).then(n=>({kid:this.uuid,alg:a.jwkAlgorithmIdentifier,s:Aj(new Uint8Array(n))}))}).catch(oPj("sign")),this.import=async r=>iPj("import",async()=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK key");let a=this.jwk.kid;if(this.jwk=C3(this.jwk),this.jwk.kty!=="EC"||this.jwk.crv!=="P-256")throw new Error("Unexpected EC key/crv: "+this.jwk.kty+", "+this.jwk.crv+".");let n=Qa.KEY_ALG_ES256,o=!0,i=["sign"],s=await $A.subtle.importKey("jwk",this.jwk,n,o,i).catch(()=>{throw new CA.ClientError(CA.ClientErrorCode.invalidSigningKeyPair,W("Invalid private key"))});return this.key=s,this.uuid=a,this}),this.exportKey=async()=>{if(!this.key)throw new Error("Missing key");return this.jwk=await _$(this.uuid,this.key,_B),this.jwk},this.encryptWithKey=async r=>{if(!this.jwk)throw new Error("Missing JWK");if(!r)throw new Error("No key given");let a=Qe(this.jwk);if(!a)throw new Error("Missing plaintext");return r.encrypt(a)},this.decryptWithKey=async(r,a)=>{let n=await r.decrypt(a),o=cj(n,Ne).unwrap(),i=cj(o,_B,{mode:"unsafe_report_only",file:VAA,func:p`decryptWithKey`}).unwrap();return this.import(i)},this.uuid=j||"",this.key=e,this.jwk=t}};var mu=J(Fo());var sPj="model/ecdsa_private_key_pf",XAA=ar(sPj),gF=class extends vg{constructor(j,e,t,r){super(j,void 0,r),this.sign=async a=>Promise.resolve().then(()=>{if(!this.sjclKey)throw new Error("Missing private key");let n=Qa.DEFAULT_SIGN_ALG,o=mu.hash.sha256.hash(Ea(a)),i=this.sjclKey.sign(o,1,!1);return{kid:this.uuid,alg:n.jwkAlgorithmIdentifier,s:Aj(new Uint8Array(mu.codec.bytes.fromBits(i)))}}).catch(XAA("sign")),this.import=async a=>Promise.resolve().then(()=>{if(a&&(this.jwk=a),!this.jwk)throw new Error("Missing JWK key");let n=ej(this.jwk.d),o=mu.bn.fromBits(Ea(n));return this.sjclKey=new mu.ecc.ecdsa.secretKey(mu.ecc.curves.c256,o),this}).catch(XAA("import")),this.exportKey=async()=>Promise.resolve().then(async()=>{if(!this.pubKey)throw new Error("Missing public key");if(!this.sjclKey)throw new Error("Missing private key");let a=this.sjclKey;return this.pubKey.exportKey().then(n=>{let o=mu.codec.bytes.fromBits(a.get());return this.jwk={crv:"P-256",ext:!0,key_ops:["sign"],kty:"EC",kid:this.uuid,d:Aj(new Uint8Array(o)),x:n.x,y:n.y},this.jwk})}).catch(XAA("exportKey")),this.sjclKey=t,this.pubKey=e}};var Rk=J(Fo());var lPj="model/ecdsa_public_key_pf",JAA=ar(lPj),hF=class extends Qa{constructor(j,e,t){super(j,void 0,t),this.verify=async(r,a)=>Promise.resolve().then(()=>{let n=Qa.DEFAULT_SIGN_ALG;if(!this.sjclKey)throw new Error("Missing public key");if(a.kid!==this.uuid)throw new Error("Signing key mismatch, expected '"+this.uuid+"' got '"+a.kid+"'");if(a.alg!==n.jwkAlgorithmIdentifier)throw new Error("Unsupported signature algorithm: "+a.alg);let o=Ea(ej(a.s)),i=Rk.hash.sha256.hash(Ea(r));return this.sjclKey.verify(i,o,!1)}).catch(JAA("verify")),this.import=async r=>Promise.resolve().then(()=>{if(r&&(this.jwk=r),!this.jwk)throw new Error("Missing JWK key");let a=ej(this.jwk.x),n=ej(this.jwk.y),o=Rk.codec.hex.fromBits(Ea(a))+Rk.codec.hex.fromBits(Ea(n));return this.sjclKey=new Rk.ecc.ecdsa.publicKey(Rk.ecc.curves.c256,Rk.codec.hex.toBits(o)),this}).catch(JAA("import")),this.exportKey=async()=>Promise.resolve().then(()=>{if(!this.sjclKey)throw new Error("Missing public key");let r=this.sjclKey.get();return this.jwk={crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",kid:this.uuid,x:Aj(new Uint8Array(Rk.codec.bytes.fromBits(r.x))),y:Aj(new Uint8Array(Rk.codec.bytes.fromBits(r.y)))},this.jwk}).catch(JAA("exportKey")),this.sjclKey=e}};var qF=p`web-api/model/signing_key_pair.ts`,WAA=ar(qF.str),Z1A=ij(qF.str),Gg=class{constructor(j){this.generate=async e=>Promise.resolve().then(async()=>{let t=$A.supports.nativeEcdsa?this._generateNative:this._generatePolyfill,r=async()=>t(e).then(uPj),a=5,n=Uh(a-1,()=>r),o=r();return xi(n,async(s,l)=>s.catch(async()=>l()),o).catch(s=>{throw new Error(`Failed to generate valid signing keys after ${a} attempts. <${C6(s)}>`)})}),this._generateNative=async e=>{let t=["sign","verify"],a=Qa.DEFAULT_KEY_ALG;this.uuid=e||Se();let n=await $A.subtle.generateKey(a,!0,t);this.pubKey=new Qa(this.uuid,n.publicKey),this.priKey=new vg(this.uuid,n.privateKey);let o=this.pubKey.exportKey(),i=this.priKey.exportKey();return await Promise.all([i,o]),this},this._generatePolyfill=async e=>{let t=Qa.DEFAULT_SIGN_ALG.jwkAlgorithmIdentifier;if(t!=="ES256")throw new Error("Unsupported ECDSA polyfill: "+t);e=e||Se(),this.uuid=e;let r=ePA.ecc.ecdsa.generateKeys(256,1),a=new hF(e,r.pub),n=new gF(e,a,r.sec);this.pubKey=a,this.priKey=n;let o=this.pubKey.exportKey(),i=this.priKey.exportKey();return await Promise.all([i,o]),this},this.sign=async e=>Promise.resolve().then(async()=>{if(!this.priKey)throw new Error("Missing signing key");return this.priKey.sign(e)}).catch(WAA("sign")),this.verify=async(e,t)=>Promise.resolve().then(async()=>{if(!this.pubKey)throw new Error("Missing public key");return this.pubKey.verify(e,t)}).catch(WAA("verify")),this.export=async()=>Promise.resolve().then(async()=>{if(!this.pubKey)throw new Error("Missing public key");if(!this.priKey)throw new Error("Missing private key");return Promise.all([this.pubKey.exportKey(),this.priKey.exportKey()]).then(()=>this)}).catch(WAA("export")),this.import=async e=>Z1A("import",async()=>{if(e.pubKey.kid!==e.priKey.kid)throw new Error("invalid signing keypair");if(this.uuid=e.pubKey.kid,!this.pubKey||!this.priKey){let t=kPj(this.uuid);this.pubKey=t.pubKey,this.priKey=t.priKey}return await Promise.all([this.pubKey.import(e.pubKey),this.priKey.import(e.priKey)]),this}),this.encryptWithKey=async e=>{if(!this.priKey)throw new Error("Missing private key");if(!this.pubKey||!this.pubKey.jwk)throw new Error("Missing public key");let t=await this.priKey.encryptWithKey(e);return{pubKey:this.pubKey.jwk,encPriKey:t}},this.decryptWithKey=async(e,t)=>Z1A("decryptWithKey",async()=>{let{pubKey:r,encPriKey:a}=cPj(t);this.uuid=r.kid;let n=await dPj(e,a);if(n.kid!==r.kid)throw new Error("Public and private key IDs do not match.");return this.import({pubKey:r,priKey:n})}),this.uuid=j||""}plaintextJSON(){if(!this.pubKey)throw new Error("Missing public key");if(!this.priKey)throw new Error("Missing private key");return{pubKey:this.pubKey.jwk,priKey:this.priKey.jwk}}},cPj=A=>{typeof A.pubKey=="string"&&Rs([p`Unexpected JSON string: json.pubKey`],qF,p`parseStringsIfNecessary`),typeof A.encPriKey=="string"&&Rs([p`Unexpected JSON string: json.encPriKey`],qF,p`parseStringsIfNecessary`);let j={mode:"unsafe_report_only",file:qF,func:p`parseStringsIfNecessary`};return{pubKey:cj(APA(A.pubKey),cq,j).unwrap(),encPriKey:cj(APA(A.encPriKey),Fa,j).unwrap()}},APA=A=>typeof A=="string"?JSON.parse(A):A,dPj=async(A,j)=>{let e=cj(await A.decrypt(j),Ne).unwrap();return cj(e,_B,{mode:"unsafe_report_only",file:qF,func:p`decryptJson`}).unwrap()},kPj=A=>{if($A.supports.nativeEcdsa)return{pubKey:new Qa(A),priKey:new vg(A)};{let j=new hF(A);return{pubKey:j,priKey:new gF(A,j)}}},jPA=new Uint8Array([73,39,118,101,32,103,111,116,32,97,32,103,111,108,100,101,110,32,116,105,99,107,101,116,33]),uPj=async A=>Promise.resolve().then(async()=>{let j=A.plaintextJSON(),e=new Gg().import(j),t=e.then(async a=>a.sign(jPA));return Promise.all([e,t]).then(async([a,n])=>a.verify(jPA,n)).then(a=>{if(!a)throw new Error("Signature failed verification")}).then(()=>A)});var Ya=class{constructor(j,e,t,r,a=0){this.uuid=j,this.symKey=e,this.ekeyPair=t,this.skeyPair=r,this.sn=a,this.generateSigningKeys=async()=>(this.skeyPair=new Gg(this.uuid),this.skeyPair.generate(this.uuid)),this.sign=async n=>{if(!this.skeyPair)throw new Error("Failed to sign, skeyPair missing");return this.skeyPair.sign(n)},this.verify=async(n,o)=>{if(!this.skeyPair)throw new Error("Failed to verify, skeyPair missing");return this.skeyPair.verify(n,o)},this.encrypt=async n=>this.ekeyPair.encrypt(n),this.decrypt=async n=>this.ekeyPair.decrypt(n),this.encryptWithKey=async n=>{let[o,i,s]=await Promise.all([this.symKey.encryptWithKey(n),this.ekeyPair.encryptWithKey(this.symKey),this.skeyPair&&this.skeyPair.priKey?this.skeyPair.encryptWithKey(this.symKey):Promise.resolve(void 0)]);return{uuid:this.uuid,sn:this.sn,encryptedBy:o.kid,encSymKey:o,pubKey:i.pubKey,encPriKey:i.encPriKey,spubKey:s?.pubKey,encSPriKey:s?.encPriKey}}}hasSigningKeys(){return!!this.skeyPair&&!!this.skeyPair.pubKey}};(function(A){A.generateWithSigningKeys=async()=>tPA(!0),A.generateWithoutSigningKeys=async()=>tPA(!1),A.decryptWithKeyset=async(j,e)=>{let t=e.encSymKey.enc,r=w$(t)?j.symKey:j.ekeyPair;return A.decryptWithKey(r,e)},A.decryptWithKey=async(j,e)=>{let{sn:t,uuid:r,pubKey:a,encSymKey:n,encPriKey:o,spubKey:i,encSPriKey:s}=e,l=await Ot().decryptWithKey(j,n),[c,k]=await Promise.all([wl.decryptWithKey(l,{pubKey:a,encPriKey:o}),T_(l,{pubKey:i,encPriKey:s})]);return new A(r,l,c,k,t)}})(Ya||(Ya={}));var tPA=async A=>{let j=Se(),e=Ot(),[,t,r]=await Promise.all([e.generate(Nt,j),wl.generate(j),A?new Gg(j).generate(j):Promise.resolve(void 0)]);return new Ya(j,e,t,r)},T_=async(A,{pubKey:j,encPriKey:e})=>{if(!(!j||!e))try{return await new Gg().decryptWithKey(A,{pubKey:j,encPriKey:e})}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.invalidSigningKeyPair)){Or(new xe({errorClass:p`ImportSigningKeys`,message:p`Failed to import signing key`,stackOverrideError:t,severityLevel:"warning"}));return}else throw t}};var me={};er(me,{ALL:()=>pPj,ALL_EXPORT:()=>jjA,ALL_READ:()=>aPA,ALL_WRITE:()=>nPA,ArchiveItem:()=>vF,CreateItem:()=>Vq,DEFAULT_VAULT_CREATION_ACL:()=>xPj,DeleteItem:()=>GF,Export:()=>ZAA,Import:()=>YAA,MANAGED_VAULT_ACL:()=>hPj,Manage:()=>Uq,NoAccess:()=>EPj,Print:()=>AjA,RWE:()=>__,ReadItem:()=>xF,Recover:()=>rPA,RevealPassword:()=>C_,SendItem:()=>QAA,TOKEN_READ:()=>mPj,TOKEN_WRITE:()=>BPj,UMSA_TOKEN_WRITE:()=>gPj,UpdateItem:()=>fg,ViewHistory:()=>qI,changeVaultAccessPermissions:()=>vPj,includesFrozenACL:()=>xI,isEffectivelyZero:()=>qPj,vaultAccessDependencies:()=>oPA});var EPj=0,rPA=1,Uq=2,C_=16,xF=32,fg=64,Vq=128,vF=256,GF=512,qI=1024,QAA=1048576,YAA=2097152,ZAA=4194304,AjA=8388608,pPj=2147483646,aPA=Kj.combine([xF,C_,qI]),nPA=Kj.combine([fg,Vq,YAA,vF,GF]),jjA=Kj.combine([ZAA,AjA,QAA]),mPj=Kj.combine([xF,C_]),BPj=Kj.combine([fg,Vq,vF]),gPj=Kj.combine([Vq,fg,GF,vF]),__=Kj.combine([aPA,nPA,jjA]),hPj=Kj.combine([xF,fg,Vq,GF,qI]),qPj=A=>{let j=Kj.combine([__,Uq,rPA]);return!Kj.includesAny(A,j)},xPj=__,xI=A=>(A&fg)>0||(A&Vq)>0||(A&GF)>0||(A&vF)>0,vPj=(A,j)=>{let e=0,t=0;fPj(A,j)?e=Kj.enable(A,j):e=Kj.toggle(A,j);for(let r of oPA)t=Kj.toggle(A,e),e=GPj(e,t,r.parent,r.children);return e},oPA=[{parent:xF,children:Kj.disable(__,xF)},{parent:Vq,children:YAA},{parent:fg,children:Kj.combine([vF,GF])},{parent:C_,children:Kj.combine([jjA,qI,fg])},{parent:qI,children:Kj.combine([ZAA,AjA,QAA])}],GPj=(A,j,e,t)=>{let r=Kj.disable(e,A);return Kj.includesAny(j,r)?Kj.disable(A,t):Kj.includesAny(A,t)?Kj.enable(A,e):A},fPj=(A,j)=>{let e=Kj.includesAny(A,j),t=Kj.includes(A,j);return e&&!t};var ejA=ic,FPj="model/group",tjA=ij(FPj),IA=class A{constructor(j){this.accessorType="group",this.decryptRecoverableKeyset=async e=>tjA("decryptRecoverableKeyset",async()=>this.recoverableKeyset?e.uuid!==this.recoverableKeyset.encryptedBy?Promise.reject(new Error("Cannot decrypt the group's keyset. It is not encrypted by the given keyset.")):Ya.decryptWithKeyset(e,this.recoverableKeyset):Promise.reject(new Error("Missing recoverable keyset."))),this.createMembership=async(e,t,r)=>tjA("createMembership",async()=>{if(!t.pubKey)throw Or(new xe({errorClass:$n.ValidationError,userUuid:t.uuid?W(t.uuid):void 0,message:p`Missing member's public key`})),new Error("Missing member's public key.");if(!e)throw Or(new xe({errorClass:$n.ValidationError,userUuid:t.uuid?W(t.uuid):void 0,message:p`Missing group's active keyset`})),new Error("Missing group's active keyset.");let a=await zq(t.pubKey),n=await e.encryptWithKey(a);return hI.create({keyset:n,groupUuid:this.uuid,memberUuid:t.uuid,...r})}),this.addMembership=async(e,t,r)=>tjA("addMembership",async()=>this.createMembership(e,t,r).then(a=>(this._memberships[a.memberUuid]=a,a))),this.setVaultAccessList=e=>{this._vaultACLs=void 0,this._vaultAccessMap=Ca(e,t=>t.vaultUuid)},this.enableKeysetRecovery=async(e,t)=>{if(this.type===A.TypeExternalAccountManagers)return this.recoverableKeyset=void 0,this;if(!t.pubKey)throw new Error("Missing recovery group's public key");return this.recoverableKeyset=await e.encryptWithKey(t.pubKey),this},this.enableRecoverCapability=async e=>{if(!e)throw new Error("Missing recovery keyset.");if(!this.pubKey)throw new Error("Missing public key");let t=await e.encryptWithKey(this.pubKey);return this.recoveryKeyset=t,this},this.uuid=j.uuid?j.uuid:Se(),this.name=j.name,this.type=j.type,this.desc=j.desc,this.activeKeysetUuid=j.activeKeysetUuid,this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.attrVersion=j.attrVersion||0,this.avatar=j.avatar||"",this.permissions=j.permissions||Kj.empty(),this.userCount=j.userCount,this.archivedKeysets=[],this._memberships={},this._sso=j.sso,this._vaultAccessMap={},this._vaultACLs=void 0,this._attrMask=0}hasAttrMask(j){return(this._attrMask&j)===j}addAttrMask(j){this._attrMask|=j}get isTypeUserDefined(){return this.type===A.TypeUserDefined}get isTypeTeamMembers(){return this.type===A.TypeTeamMembers}get isTypeOwners(){return this.type===A.TypeOwners}get isTypeAdmins(){return this.type===A.TypeAdmins}get isTypeSecurity(){return this.type===A.TypeSecurity}get isTypeMSPAdministrators(){return this.type===A.TypeMSPAdministrators}get isTypeExternalAccountManagers(){return this.type===A.TypeExternalAccountManagers}get isTypeProvisioning(){return this.type===A.TypeProvisioning}get isTypeRecovery(){return this.type===A.TypeRecovery}get canBeDeleted(){return this.isTypeUserDefined||this.isTypeProvisioning}setOverview(j){this.uuid=j.uuid?j.uuid:Se(),this.name=j.name,this.type=j.type,this.desc=j.desc,this.activeKeysetUuid=j.activeKeysetUuid,this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.attrVersion=j.attrVersion||0,this.avatar=j.avatar||"",this.permissions=j.permissions||Kj.empty(),this.userCount=j.userCount,this._sso=j.sso}_getLoadedVaultAccessMap(){if(!this.hasAttrMask(A.Attr.VaultAccess))throw new Error("Vault access list has not been loaded");return this._vaultAccessMap}getAccessorVaultUuids(){return this.getVaultUuids()}getVaultUuids(){return ejA(this._getLoadedVaultAccessMap(),()=>!0)}getVaultAccessMap(){return this._getLoadedVaultAccessMap()}getVaultACLs(){return this._vaultACLs||(this._vaultACLs=ejA(this._getLoadedVaultAccessMap(),j=>j.acl)),this._vaultACLs}hasVaultACL(j,e,t){return t&&xI(e)?!1:((this.getVaultACLs()[j.uuid]||0)&e)===e}hasPermission(...j){return Kj.includes(this.permissions,Kj.combine(j))}getPeopleUuids(){return ejA(this._memberships,()=>!0)}get pubKey(){return this._pubKey}set pubKey(j){j&&(this._pubKey=j,this.addAttrMask(A.Attr.PubKey))}getMembership(j){return this._memberships[j]}get memberships(){return Yr(q6(this._memberships))}set memberships(j){if(this._memberships={},j){for(let e of j)this._memberships[e.memberUuid]=e;this.addAttrMask(A.Attr.Memberships)}}get ssoConfig(){return this._sso}ssoMigrationGracePeriodDeadline(){return this._sso?.deadline}removeMember(j){this._memberships=qi(this._memberships,j.uuid)}get vaultAccessList(){return Yr(q6(this._getLoadedVaultAccessMap()))}getUnsafeVaultAccessList(){return Yr(q6(this._vaultAccessMap))}setVaultAccess(j){this._vaultACLs=void 0,this._vaultAccessMap={...this._vaultAccessMap,[j.vaultUuid]:j}}removeVaultAccess(j){this._vaultAccessMap=qi(this._vaultAccessMap,j.uuid)}clearCachedAccessInfo(){this._memberships={},this._vaultAccessMap={},this._vaultACLs=void 0,this.recoveryKeyset=void 0}compare(j){return iPA(this)-iPA(j)||J$(this.name,j.name)}toString(){return"[object Group]"}};IA.TypeOwners="O";IA.TypeAdmins="A";IA.TypeRecovery="R";IA.TypeTeamMembers="M";IA.TypeUserDefined="U";IA.TypeMSPAdministrators="T";IA.TypeExternalAccountManagers="E";IA.TypeSecurity="S";IA.TypeProvisioning="P";IA.TypeBackofficeUsers="X";IA.TypeBackofficeBilling="Y";IA.TypeBackofficeSecurity="W";IA.TypeBackofficeDevelopers="V";IA.TypeBackofficeFinance="F";IA.TypeBackofficeContent="C";IA.TypeBackofficeOwners="Z";IA.TypeBackofficeAdvanced="D";IA.Attr={None:0,PubKey:1,Memberships:2,VaultAccess:4,RecoverableKeyset:8,UserCounts:16,All:255};var iPA=A=>bPj[A.type]||0,bPj=[IA.TypeOwners,IA.TypeAdmins,IA.TypeRecovery,IA.TypeSecurity,IA.TypeTeamMembers,IA.TypeBackofficeOwners,IA.TypeBackofficeSecurity,IA.TypeBackofficeAdvanced,IA.TypeBackofficeDevelopers,IA.TypeBackofficeContent,IA.TypeBackofficeBilling,IA.TypeBackofficeUsers,IA.TypeUserDefined].reduce((A,j,e)=>({...A,[j]:e}),{});var S_=class{constructor(){this.groupsByUuid={},this.clearAll()}clearAll(){this.setGroups([])}setGroups(j){this.groupsByUuid={},this.recoveryGroup=void 0;let e={};for(let t of j){if(t.type===IA.TypeRecovery){this.recoveryGroup=t;continue}else this.groupsByUuid[t.uuid]=t;Fr([IA.TypeAdmins,IA.TypeOwners,IA.TypeTeamMembers,IA.TypeSecurity,IA.TypeMSPAdministrators],t.type)&&(e[t.type]=t)}this.administratorsGroup=e[IA.TypeAdmins],this.ownersGroup=e[IA.TypeOwners],this.teamMembersGroup=e[IA.TypeTeamMembers],this.securityGroup=e[IA.TypeSecurity],this.mspAdministratorsGroup=e[IA.TypeMSPAdministrators]}getGroup(j){let e=this.groupsByUuid[j];return!e&&this.recoveryGroup&&this.recoveryGroup.uuid===j?this.recoveryGroup:e}getGroups(){return(this.recoveryGroup?[this.recoveryGroup]:[]).concat(q6(this.groupsByUuid))}getManagableGroups(){return q6(this.groupsByUuid)}};var rjA=(A,j)=>A?.subscription.status===j;var Il="my",sPA="start",yPj="pg8-;",$Pj=A=>A===Il||A===sPA,Et=class A{static isValidType(j){return j===A.Type.Family||j===A.Type.Individual||j===A.Type.Business}static get defaultSettings(){return{slackURLs:{alerts:"",notifications:""},betaIsEnabled:!1,richIconsAreDisabled:!1,duo:{isEnabled:!1,rememberDays:30,integrationKey:"",secretKey:"",host:""},support:{url:""},provisioning:{isEnabled:!1,notificationEmails:"",monitoringEnabled:!1,monitoringDomain:"",deploymentOption:"",identityProvider:"",replyToEmail:{address:"",verified:!1}},masterPasswordPolicy:{type:Iq.Minimum,customString:""},twoFactor:{enforced:!1},clientRestrictions:{requireModernApps:!1},teamMemberPolicies:{blockFileStorage:!1,blockPasskeyAuthenticator:!1,privateVaultsBusinessWatchtowerReportingEnabled:!0,allowedWatchtowerDomains:"",telemetryOptOut:!1},disableEmergencyKit:!1,sidebarNavigationPolicies:{hideDeveloperTools:!1,hideIntegrations:!1}}}constructor(j){this.uuid=j.uuid,this.type=j.type,this.avatar=j.avatar||"",this.domain=j.domain||"",this.inviteEmail=j.invite&&j.invite.inviteEmailDomains||"",this.inviteSecret=j.invite&&j.invite.inviteSecret||"",this.name=j.name||"",this.state=j.state,this.attrVersion=j.attrVersion,this.baseAvatarURL=j.baseAvatarURL,this.baseAttachmentURL=j.baseAttachmentURL,this.settings=j.settings?$y({},j.settings,A.defaultSettings):A.defaultSettings,this.features={},this.gatedFeatures={},this.gatedFeatureTrials=[],this.hasNativeClient=j.userFlags?j.userFlags.hasNativeClient:!1,this.hasNonSafariClient=j.userFlags?j.userFlags.hasNonSafariClient:!1,this.hasPackages=j.userFlags?j.userFlags.hasPackages:!1,this.hasMspConsoleAccess=j.userFlags?j.userFlags.hasMspConsoleAccess:!1,this.mustMigrate=j.userFlags?j.userFlags.mustMigrate:!1,this.hasRecoveryMembers=j.accountFlags?j.accountFlags.hasRecoveryMembers:!1,this.isAccountManaged=j.accountFlags?j.accountFlags.isAccountManaged:!1,this.mspInfo=j?.mspInfo||{accountName:void 0,accountDomain:void 0},this.activities=[],this.promotions=[],this.meta={companySize:void 0},this.counts={groups:0,invitations:0,users:0,vaults:0,activeGuests:0,activeUsers:0,activeManagedAccounts:0},this.subscription=pl.create(),this.trialDays=j.billing?.trialDays||0,this._cache=new S_}setAttrs(j){this.uuid=j.uuid,this.type=j.type,this.avatar=j.avatar||"",this.domain=j.domain||"",j.invite&&(this.inviteEmail=j.invite.inviteEmailDomains||"",this.inviteSecret=j.invite.inviteSecret||""),this.name=j.name||"",this.state=j.state,this.attrVersion=j.attrVersion,this.baseAvatarURL=j.baseAvatarURL,this.baseAttachmentURL=j.baseAttachmentURL,j.settings?this.settings=$y({},j.settings,A.defaultSettings):this.settings=$y({},this.settings,A.defaultSettings),j.userFlags&&(this.hasNativeClient=j.userFlags.hasNativeClient,this.hasNonSafariClient=j.userFlags.hasNonSafariClient,this.hasPackages=j.userFlags.hasPackages,this.hasMspConsoleAccess=j.userFlags.hasMspConsoleAccess,this.mustMigrate=j.userFlags.mustMigrate),j.accountFlags&&(this.hasRecoveryMembers=j.accountFlags.hasRecoveryMembers,this.isAccountManaged=j.accountFlags.isAccountManaged),j.billing&&(this.trialDays=j.billing.trialDays)}get hasFeature(){return{...pl.hasFeature(this.subscription),...this.features}}get hasBackOfficeFeature(){return{...pl.hasFeature(this.subscription)}}get hasUnleashFeature(){return{...this.features}}get fspPhase(){return this.features["b5web-core-app-ui-v1-no-opt"]?"no-opt":this.features["b5web-core-app-ui-v1-opt-out"]?"opt-out":this.features["b5web-core-app-ui-v1-opt-in"]?"opt-in":void 0}get hasGatedFeature(){return pl.hasGatedFeature(this.subscription)}get isFamily(){return this.type===A.Type.Family}get isIndividual(){return this.type===A.Type.Individual}get isBusiness(){return this.type===A.Type.Business}get isManagedServiceProvider(){return!!this.hasBackOfficeFeature?.managedServiceProvider}get isBackoffice(){return this.domain==="backoffice"}urlHost(j){return(this.isIndividual?Il:this.domain)+"."+j}urlOrigin(j){return"https://"+this.urlHost(j)}supportsBetaFeatures(){let j=this.hasFeature;return j.mfaDuo||j.customTemplates||j.itemSendingV1||j.reports}get administratorsGroup(){return this._cache.administratorsGroup}get ownersGroup(){return this._cache.ownersGroup}get recoveryGroup(){return this._cache.recoveryGroup}get teamMembersGroup(){return this._cache.teamMembersGroup}get securityGroup(){return this._cache.securityGroup}get mspAdministratorsGroup(){return this._cache.mspAdministratorsGroup}get groups(){return this._cache.getManagableGroups()}findGroup(j){return this._cache.getGroup(j)}setGroups(j){this._cache.setGroups(j)}pushGroup(j){this._cache.groupsByUuid[j.uuid]=j,j.isTypeSecurity&&(this._cache.securityGroup=j)}removeGroup(j){let e=mk(j);delete this._cache.groupsByUuid[e]}};Et.StateRegistered="R";Et.StateActive="A";Et.StateSuspended="S";Et.StateDeleted="D";Et.defaultMfaTypes=[Oi.Totp,Oi.WebAuthn];(function(A){let j;(function(e){e.Individual="I",e.Family="F",e.Business="B"})(j=A.Type||(A.Type={})),A.isProvisioningEnabled=(e,t)=>!!e?.settings.provisioning?.isEnabled||t===cF.Active,A.isDuoEnabled=e=>!!e?.settings.duo?.isEnabled,A.isFrozen=e=>rjA(e,pl.Status.Frozen),A.isTrial=e=>rjA(e,pl.Status.Trial),A.isActive=e=>rjA(e,pl.Status.Active),A.isInExtendedPromotionalTrial=e=>e?.trialDays>=60,A.hasLinkedAccountsFeature=e=>!!(e?.hasBackOfficeFeature.linkedChildAccounts&&e?.hasUnleashFeature["b5web-linked-accounts"])})(Et||(Et={}));var qc=J(tA());var wPj=qc.readonly(qc.intersection([qc.type({objectType:qc.string,action:qc.string},"required"),qc.partial({objectUUID:qc.string,reportType:qc.string},"optional")]),"AuditEventReportRequest"),fF;(function(A){A.fromApi=j=>({actor:j.actor,eid:j.eid||0,uuid:j.uuid||"",time:X6(j.time),ipAddress:j.ipAddress,action:j.action,objectType:j.objectType||"",objectUuid:j.objectUuid||"",auxInfo:j.auxInfo||"",auxUuid:j.auxUUID||"",actorType:j.actorType||""}),A.ObjectType={Account:"account",Billing:"billing",User:"user",Signup:"signup",Device:"device",Group:"group",Tier:"tier",Plan:"plan",Policy:"policy",GroupMembership:"gm",Vault:"vault",VaultItem:"item",VaultItems:"items",VaultItemHistory:"itemhist",VaultKey:"vaultkey",Template:"template",UserVaultAccess:"uva",GroupVaultAccess:"gva",Invite:"invite",EmailChange:"ec",ServiceAccount:"sa",StripeSubscription:"sub",StripeCard:"card",StripePaymentMethod:"pm",StripeEvent:"strpevnt",Report:"report",SlackApp:"slackapp",File:"file",FamilyChildAccount:"famchild",Promotion:"promo",PromotionOffer:"promoffr",CJPartner:"cjprtner",ServiceAccountToken:"satoken",MigratingUser:"miguser",ObjectDelegatedSession:"dlgdsess",SsoSettings:"sso",SignInToken:"ssotkn",RecoveryKey:"rkey",ManagedAccount:"mngdacc",MSPLinkRequest:"msplreq",FederatedApplication:"fedapp",FederatedApplicationAssignment:"faassign",FederatedSession:"fedsess",ProvisioningIntegration:"provint",EmailNotificationSettings:"emlnotif"},A.Action={Verify:"verify",Activate:"activate",Reactivate:"reactive",Suspend:"suspend",BeginRecovery:"beginr",CancelRecovery:"cancelr",CompleteRecovery:"completr",UpgradeGuestToMember:"upguest",Begin:"begin",Complete:"complete",Propose:"propose",Provision:"provsn",Join:"join",Create:"create",Update:"update",Delete:"delete",Purge:"purge",View:"view",Export:"export",ReAuth:"reauth",Convert:"convert",Cancel:"cancel",EditCustomEmail:"editce",EnableMFA:"enblmfa",UpdateMFA:"updatmfa",DisableMFA:"disblmfa",EnableDuo:"enblduo",UpdateDuo:"updatduo",DisableDuo:"disblduo",Enabled:"enabled",Disabled:"disabled",Changed:"changed",Hide:"hide",Unhide:"unhide",Patch:"patch",Grant:"grant",Revoke:"revoke",TokenRename:"trename",TokenRevoke:"trevoke",TokenVerify:"tverify",Expire:"expire",GroupJoin:"join",GroupLeave:"leave",GroupRole:"role",Refund:"refund",ResetBilling:"resbill",AddPromotion:"addpromo",RemovePromotion:"rmpromo",RedeemPromotion:"rdmpromo",RevokePromotion:"rvkpromo",EnableThanksGivingPromo:"enbltgp",DisableThanksGivingPromo:"disbltgp",AddCoupon:"addcoupn",EmailDeletion:"emaildel",ResendEmail:"rsndmail",SendProvisionStartedEmail:"sendts",ResendProvisionStartedEmail:"resendts",ResendAllProvisionStartedEmail:"prsndall",EnableTravel:"trvlaway",DisableTravel:"trvlback",EnableSync:"syncon",DisableSync:"syncoff",ChangeKeyset:"changeks",ChangeMasterPassword:"changemp",ChangeSecretKey:"changesk",ChangeName:"changenm",ChangeLanguage:"changela",UpdateAttributes:"updatea",AttachChild:"attchild",DetachChild:"detchild",RedeemChild:"rdmchild",UpdateFirewallRule:"updatfw",DeauthorizeOldDevices:"deolddev",DeauthorizeAllDevices:"dealldev",Send:"sendpkg",Share:"share",DeleteShare:"delshare",Unknown:"unknown",Reject:"reject",AddCredit:"addcred",SetCoupon:"setcoupn",RemoveCoupon:"rmcoupn",ChangeTier:"changetr",ResetTrial:"restrial",EndTrial:"endtrial",RecalculateAccountTrial:"recaltrl",AddPurchaseOrder:"addpo",AddStripePurchaseOrder:"addspo",RetryInvoice:"retryinv",Ignore:"ignore",Requeue:"requeue",ClearCache:"clrcache",ResetInviteRateLimit:"rsivrtlt",UpdatePurchaseOrder:"updatepo",UpdateStripePurchaseOrder:"udatespo",ClearFailedMFACount:"clrflmfa",AddTaxNumber:"addtxnum",RemoveTaxNumber:"rmtaxnum",RetryAppleReceipt:"rtaplrct",Replace:"replace",AutoDelete:"autodel",UserLockout:"lockout",AddVerifiedDomain:"vrfydmn",UpdateVerifiedDomain:"uvrfydmn",DeleteVerifiedDomain:"dvrfydmn",UpdateItemShareAdminSettings:"uisas",ActionMigratingUserComplete:"musercom",ActionMigratingUserDeclined:"muserdec",ActionAddAccountTransfer:"addaxfr",ActionRemoveAccountTransfer:"remaxfr",ActionEnableSSO:"enblsso",ActionDisableSSO:"disblsso",ActionChangeSSOAuthenticationPolicy:"chngpsso",ActionChangeSSOGracePeriodDuration:"chngdsso",ActionUpdateSSOClientSecret:"chngcsso",ActionDeleteSSOGroup:"delgsso",ActionAddSSOGroup:"addgsso",ActionEnrollTrustedDevice:"tdvcsso",ActionSetupCredentialBundleAuth:"sdvcsso",ActionDelegateSession:"dlgsess",NewSignInToken:"ssotkn",RatchetSignInToken:"ssotknr",SignInWithSignInToken:"ssotknv",ActionEnableDVR:"enbldvr",ActionDisableDVR:"disbldvr",LaunchInto:"launchi",Unlink:"unlink",ActionLaunch:"launch",ActionFail:"fail",Accept:"accept",ActionMSPUpdatePermission:"upmspprm",ActionMSPRemovePermission:"rmmspprm",AddEmailRecipient:"addrcpnt",RemoveEmailRecipient:"rmrcpnt",ResetEmailNotificationSettings:"resetens"},A.ReportType={ReportBusinessWatchtower:"business-watchtower",ReportInsightsPasswordHealth:"insights-password-health",ReportDomainBreach:"domain-breach-report",ReportInsightsBreachChecks:"insights-breach-checks",ReportInsightsTeamUsage:"insights-team-usage",ReportSignInAttempts:"sign-in-attempts",ReportVerifications:"verifications-report",ReportActivityLog:"activity-log",ReportUserItemUsages:"user-usage-report",ReportVaultItemUsages:"vault-usage-report",ReportItemUsages:"item-usage-report",ReportDevice:"device-report",ReportTeam:"team-report",ReportOverview:"overview-report",ReportDeveloper:"developer-report",ReportFoundApps:"found-apps-report",ReportFoundAppDetails:"found-app-details-report",ReportSsoMigration:"sso-migration-report",ReportAdoption:"adoption-report"},A.PolicyType={PolicyReporting:"reporting",PolicyUndefined:"undefined"}})(fF||(fF={}));var wa=J(tA()),H_=2,IPj=wa.readonly(wa.intersection([wa.type({cw:wa.number,rp:wa.number,wp:wa.number,i2fa:wa.number,exp:wa.number,tot:wa.number}),wa.partial({uw:wa.number,vp:wa.number})])),ajA=wa.readonly(wa.intersection([wa.type({cw:wa.number,rp:wa.number,wp:wa.number,i2fa:wa.number,exp:wa.number,tot:wa.number}),wa.partial({uw:wa.number,vp:wa.number,wa:wa.number})]));var xc=J(tA()),cPA=J(lq()),vI=J(Fo());var FF=xc.readonly(xc.type({method:xc.string,alg:xc.string,iterations:xc.number,salt:xc.string}),"AuthParams"),njA=xc.readonly(xc.type({params:FF,srpX:xc.string}),"Auth"),ra;(function(A){A.generate=async j=>A.generateWithParams(j,lPA()),A.generateWithParams=async(j,e)=>{let t=await OPj(j,e);return{params:e,srpX:t}},A.createFromPreComputedX=(j,e)=>({srpX:Wn(j),params:e||lPA()}),A.getForUpload=j=>({...j.params,v:TPj(j)})})(ra||(ra={}));var PPj=128,lPA=()=>({method:jT.toString(),alg:Dp.DEFAULT_PBES2_ALG,iterations:Dp.DEFAULT_ITERATIONS,salt:$A.getSalt(PPj)}),OPj=async(A,j)=>{switch(bi.fromString(j.method).prefix){case tu.SrpG:return RPj(A,j);case tu.Srp:return DPj(A,j)}},RPj=async(A,j)=>{let{email:e,secretKey:t,password:r}=dPA(A),a=ej(j.salt),n=Ij(e),o=Ij(j.method),i=await dn.rawHkdf(dn.Sha2Mode.Sha256,a,o,n,32),s=await dn.rawPbkdf2UsingPbes2Alg(j.alg,r,i,j.iterations),l=await t.combineWithBytes(s);return Wn(l)},DPj=async(A,j)=>{let{email:e,secretKey:t,password:r}=dPA(A),a=ej(j.salt),n=await dn.rawPbkdf2UsingPbes2Alg(j.alg,nz(r),a,j.iterations),o=await t.combineWithBytes(n),i=new vI.hash.sha1;i.update(Ea(a)),i.update(vI.hash.sha1.hash(e+":"+Wn(o)));let s=i.finalize();return vI.codec.hex.fromBits(s)},TPj=A=>{let{g:j,N:e}=bi.fromString(A.params.method).group,t=CPj(A.srpX);return _Pj(j.modPow(t,e))},dPA=({email:A,password:j,secretKey:e})=>({email:A.trim().toLowerCase(),password:w3(j),secretKey:e}),CPj=A=>new cPA.BigInteger(A,16),_Pj=A=>A.toString(16).replace(/^(0x)?0*/,"");var Xq;(function(A){A.create=e=>Object.freeze({code:"",state:"",...e}),A.CodePrefix="CA";let j;(function(e){e.Active="A",e.Ready="R"})(j=A.State||(A.State={}))})(Xq||(Xq={}));var ojA;(function(A){A.Prd="1password.com",A.Pca="1password.ca",A.Peu="1password.eu",A.Ent="ent.1password.com",A.Stg="b5staging.com",A.Dev="b5dev.com",A.Dca="b5dev.ca",A.Deu="b5dev.eu",A.Tst="b5test.com",A.Tca="b5test.ca",A.Teu="b5test.eu",A.Rev="b5rev.com",A.Lcl="b5local.com:3000",A.LclHot="b5local.com:4000"})(ojA||(ojA={}));var Jq=J(Fo()),GI=class{constructor(j,e){if(!j){let t=new Error("Created new File without a file ID");console.warn(t)}if(!e){let t=new Error(`Created new File (${j}) without a signing key`);console.warn(t)}this.fileId=j,this.signingKey=e}signReference(j,e){let t=new Jq.misc.hmac(Jq.codec.base64url.toBits(this.signingKey.k),Jq.hash.sha256),r=this.signingKey.kid+this.fileId+j+e.toString();return Jq.codec.base64url.fromBits(t.encrypt(r))}};var Xp;(function(A){A.getInitials=({name:j})=>vL(FL(j)," ").filter(e=>!!e).slice(0,2).reduce((e,t)=>e+[...t][0],"").toLocaleUpperCase()})(Xp||(Xp={}));var ijA;(function(A){A.workspace="workspace"})(ijA||(ijA={}));var kPA=J(Wo());var SPj=["126.com","163.com","aim.com","airmail.com","aol.com","att.net","bellsouth.net","charter.net","comcast.net","cox.net","earthlink.net","facebook.com","fastmail.com","fastmail.fm","gmail.com","guerrillamail.com","hotmail.com","hushmail.com","icloud.com","inbox.ru","juno.com","live.com","mac.com","mail.ru","mailinator.com","me.com","msn.com","outlook.com","protonmail.com","qq.com","sbcglobal.net","snkmail.com","tempmail.us","thrma.com","trbvm.com","verizon.net","yahoo.com","yandex.com","yandex.ru","yp.ycare.de","zoho.com"],Bu=class{constructor(j){this.uuid=j.uuid,this.email=j.email||"",this.accountName=j.accountName||"",this.accountType=j.accountType||"",this.language=j.language,this.state=j.state||"",this.type=j.type||"",this.sentAt=X6(j.sentAt),this.timeout=j.timeout||0,this.revokedAt=X6(j.revokedAt),this.acceptedAt=X6(j.acceptedAt)}get expiresAt(){return(0,kPA.default)(this.sentAt).add(this.timeout,"hours").toDate()}get isExpired(){return Date.now()-this.expiresAt.valueOf()>0}get joined(){}get lastAuthAt(){}travelModeIsEnabled(){return!1}};Bu.StatePending="P";Bu.StateAccepted="A";Bu.StateRevoked="R";Bu.TypeRegular="R";Bu.TypeGuest="G";var Fg=class{constructor(j){this.state=j.state,this.shouldConfirm=j.shouldConfirm,this.inviteUuid=j.inviteUuid,this.userUuid=j.userUuid,this.vaultUuid=j.vaultUuid,this.vaultAcl=j.vaultAcl}};Fg.StatePending="P";Fg.StateAccepted="A";var M_=class{constructor(j){this.vaults=j}get shouldConfirm(){return this.vaults.every(j=>j.shouldConfirm)}},HPj=A=>{let j=A.vaults.filter(e=>e.state===Fg.StateAccepted&&e.userUuid);return ic(sp(j,e=>e.userUuid),e=>new M_(e))};var Pl=J(tA());var MPj=p`web-api/model/local_auth.ts`,KPj="localauthv2keykid",uPA="fool me twice",NPj="shame on you",EPA=Pl.readonly(Pl.type({email:Pl.string,srpX:Pl.string,muk:yo,secretKey:Gj(Pl.string),signInAddress:Pl.string,userAuth:FF,throttleSecret:Gj(Pl.readonly(Pl.type({seed:Pl.string,uuid:Pl.string}))),deviceUuid:Gj(Pl.string)}),"SerializableLocalAuthCredentials"),pPA=(A,j)=>{let e=A.throttleKeypair?Wn(A.throttleKeypair.exportSeed()):void 0;return{signInAddress:A.signInAddress,userAuth:A.userAuth,email:A.email,srpX:A.srpX,muk:A.muk,secretKey:A.secretKey,throttleSecret:e&&j?{seed:e,uuid:j}:void 0,deviceUuid:A.deviceUuid}},gu;(function(A){A.generate=async j=>{let{bearerToken:e,...t}=await A.generateVerifierAndToken();try{let r=await fI.deriveKey(t,e),a=Ne.encode(pPA(j)),n=await r.encrypt(a);return{localAuth:{verifier:t,encCredentials:n},credentials:j,bearerToken:e}}catch(r){throw new Error("new LocalAuth failed: "+r)}},A.decryptCredentials=async(j,e)=>{try{let r=await(await fI.deriveKey(j.verifier,e)).decrypt(j.encCredentials),a=cj(r,Ne).unwrap();return cj(a,EPA,{mode:"unsafe_report_only",file:MPj,func:p`decryptCredentials`}).unwrap()}catch(t){throw new Error("credentials failed: "+t)}},A.generateVerifierAndToken=async()=>{let j=LPj();return{...await UPj(j),bearerToken:j}}})(gu||(gu={}));var LPj=()=>{let A=ta(24);return Aj(A)},zPj=()=>{let A=ta(16);return Aj(A)},UPj=async A=>{let j=zPj(),e=await sjA(A,j),t=Gp(e,uPA),r=Aj(t);return{salt:j,localHash:r}},fI;(function(A){let j=async(e,t)=>{try{let r=await sjA(t,e.salt),a=Gp(r,uPA),n=Aj(a);if(e.localHash!==n)throw new Error("Authentication failed, invalid bearer token")}catch(r){throw new Error("validateBearerToken failed: "+r)}};A.deriveKey=async(e,t)=>{try{await j(e,t);let r=await sjA(t,e.salt),a=Gp(r,NPj),n=Ot(KPj);return await n.importRawKey(Nt,a),n}catch(r){throw new Error("deriveKey failed: "+r)}}})(fI||(fI={}));var sjA=async(A,j)=>{try{let e=ej(j);return dn.rawPbkdf2UsingPbes2Alg(Dp.PBES2_ALG_256,A,e,Dp.ITERATIONS_100_000)}catch(e){throw new Error("token PBKDF2 failed: "+e)}};var II=J(Xn()),$r=J(tA());var N_=J(tA());var yI={};er(yI,{DEFAULT_KEY_ALG:()=>qPA,DEFAULT_SIGN_ALG:()=>VPj,JWK_ALG_ES256:()=>Dk,JWK_CRV_ES256:()=>BPA,WC_IMPORT_ALG_ES256:()=>ljA,WC_SIGN_ALG_ES256:()=>cjA,_importPriKeyNative:()=>vPA,_importPriKeySjcl:()=>bPA,_importPubKeyNative:()=>GPA,_importPubKeySjcl:()=>yPA,_signNative:()=>fPA,_signSjcl:()=>$PA,_verifyNative:()=>FPA,_verifySjcl:()=>wPA,generateJwkPair:()=>djA,generateKeyPair:()=>xPA,importPriKey:()=>bF,importPubKey:()=>FI,sign:()=>yF,verify:()=>bI});var Ci=J(Fo());var Dk="ES256",BPA="P-256",ljA={name:"ECDSA",namedCurve:"P-256"},cjA={name:"ECDSA",hash:{name:"SHA-256"}},gPA=A=>{if(A.kty==="EC"||A.crv===BPA)return ljA;throw new Error("Unexpected EC kty/crv: "+A.kty+", "+A.crv+".")},hPA=A=>{if(A!==Dk)throw new Error("Unexpected algorithm identifier");return cjA},qPA=ljA,VPj=cjA,djA=async A=>{let{priKey:j,pubKey:e}=await xPA(A);return{priKey:j.jwk,pubKey:e.jwk}},xPA=async A=>{let j=$A.supports.nativeEcdsa?XPj:JPj,e=async()=>j(A).then(YPj),t=5,r=Uh(t-1,()=>e),a=e();return xi(r,async(o,i)=>o.catch(async()=>i()),a).catch(o=>{throw new Error(`Failed to generate valid signing keys after ${t} attempts. <${C6(o)}>`)})},bF=async A=>"imported"in A?A:$A.supports.nativeEcdsa?await vPA(A):await bPA(A),FI=async A=>"imported"in A?A:$A.supports.nativeEcdsa?await GPA(A):await yPA(A),yF=async({alg:A,key:j,signingInput:e})=>j.type==="native"?fPA({alg:A,key:j.imported,signingInput:e}):$PA({alg:A,key:j.imported,signingInput:e}),bI=async({alg:A,key:j,signingInput:e,signature:t})=>j.type==="native"?FPA({alg:A,key:j.imported,signingInput:e,signature:t}):wPA({alg:A,key:j.imported,signingInput:e,signature:t}),XPj=async A=>{let j=["sign","verify"],t=qPA,r=A||Se(),{publicKey:a,privateKey:n}=await $A.subtle.generateKey(t,!0,j);if(!a||!n)throw new Error("Did not generate key pair properly");let[o,i]=await Promise.all([$A.exportKey(r,a,$A.JwkEcPubKey),$A.exportKey(r,n,$A.JwkEcPriKey)]);return{uuid:r,priKey:{type:"native",jwk:i,imported:n},pubKey:{type:"native",jwk:o,imported:a}}},vPA=async A=>{let j=gPA(A),e=$A.correctJwkEcPriKey(A),t=await $A.subtle.importKey("jwk",e,j,!0,["sign"]).catch(()=>{throw new CA.ClientError(CA.ClientErrorCode.invalidSigningKeyPair,W("Invalid private key"))});return{type:"native",jwk:e,imported:t}},GPA=async A=>{let j=gPA(A),e=$A.correctJwkEcPubKey(A),t=await $A.subtle.importKey("jwk",e,j,!0,["verify"]).catch(()=>{throw new CA.ClientError(CA.ClientErrorCode.invalidSigningKeyPair,W("Invalid public key"))});return{type:"native",jwk:e,imported:t}},fPA=async({alg:A,key:j,signingInput:e})=>{let t=await $A.subtle.sign(hPA(A),j,e);return new Uint8Array(t)},FPA=async({alg:A,key:j,signingInput:e,signature:t})=>{let r=await $A.subtle.verify(hPA(A),j,t,e);if(typeof r!="boolean")throw new TypeError("Unknown verification value: "+r);return r},JPj=async A=>{let j=A||Se(),{pub:e,sec:t}=Ci.ecc.ecdsa.generateKeys(256,1),r=await QPj(e,j),a=await WPj(t,r);return{uuid:j,priKey:{type:"sjcl",jwk:a,imported:t},pubKey:{type:"sjcl",jwk:r,imported:e}}},bPA=async A=>{let j=$A.correctJwkEcPriKey(A),e=ej(j.d),t=Ci.bn.fromBits(Ea(e)),r=new Ci.ecc.ecdsa.secretKey(Ci.ecc.curves.c256,t);return{type:"sjcl",jwk:j,imported:r}},yPA=async A=>{let j=$A.correctJwkEcPubKey(A),e=ej(j.x),t=ej(j.y),r=Wn(e)+Wn(t);if(r.length!==128)throw new Error("Invalid length for ECDSA point: "+r.length);let a=new Ci.ecc.ecdsa.publicKey(Ci.ecc.curves.c256,Ci.codec.hex.toBits(r));return{type:"sjcl",jwk:j,imported:a}},$PA=async({alg:A,key:j,signingInput:e})=>{if(A!==Dk)throw new Error("Unsupported algorithm");let t=Ci.hash.sha256.hash(Ea(e)),r=j.sign(t,1,!1);return new Uint8Array(Ci.codec.bytes.fromBits(r))},wPA=async({alg:A,key:j,signingInput:e,signature:t})=>{if(A!==Dk)throw new Error("Unsupported signature algorithm: "+A);let r=Ea(t),a=Ci.hash.sha256.hash(Ea(e));return j.verify(a,r,!1)},WPj=async(A,j)=>{let e=new Uint8Array(Ci.codec.bytes.fromBits(A.get()));return{...j,key_ops:["sign"],d:Aj(e)}},QPj=async(A,j)=>{let{x:e,y:t}=A.get();return{crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",kid:j,x:Aj(new Uint8Array(Ci.codec.bytes.fromBits(e))),y:Aj(new Uint8Array(Ci.codec.bytes.fromBits(t)))}},mPA=Ij("I've got a golden ticket!"),YPj=async A=>{let j=await bF(A.priKey.jwk),e=await yF({alg:Dk,key:j,signingInput:mPA}),t=await FI(A.pubKey.jwk);if(!await bI({alg:Dk,key:t,signingInput:mPA,signature:e}))throw new Error("Signature failed verification");return A};var K_={};er(K_,{DEFAULT_PARAMS:()=>A8j,JWK_ALG_RSA_OAEP:()=>OPA,JWK_ALG_RSA_OAEP_256:()=>IPA,WC_KEY_GEN_RSA_OAEP:()=>ujA,WC_KEY_GEN_RSA_OAEP_256:()=>PPA,_decrypt:()=>CPA,_encrypt:()=>_PA,_importPriKey:()=>DPA,_importPubKey:()=>TPA,decrypt:()=>mjA,decryptJweB:()=>j8j,encrypt:()=>pjA,encryptJweB:()=>e8j,generateKeyPair:()=>EjA});var ZPj="model/rsa",kjA=ij(ZPj),IPA="RSA-OAEP-256",PPA={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},OPA="RSA-OAEP",ujA={name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},A8j=ujA,EjA=async A=>kjA("generateKeyPair",async()=>{let j=await wl.generate(A),e=j.pubKey.jwk,t=j.priKey.jwk;if(!e||!t)throw new Error("Missing plain text key pair.");return{pubKey:e,priKey:t}}),j8j=async(A,j)=>kjA("decrypt",async()=>(await new xg(A.kid,void 0,A).import()).decrypt(j)),e8j=async(A,j)=>kjA("encrypt",async()=>(await cs(A)).encrypt(j)),t8j=A=>{switch(A){case IPA:{if(!xp.rsaOaep256)throw new CA.ClientError(CA.ClientErrorCode.noRsaOaep256Support,W("Browser does not support RSA-OAEP-256"));return PPA}case OPA:return ujA}throw new Error("Unexpected alg: "+A)},RPA=A=>{let{name:j,hash:e}=t8j(A);return{name:j,hash:e}},pjA=async(A,j)=>await _PA(await TPA(A),j),mjA=async(A,j)=>await CPA(await DPA(A),j),DPA=async A=>{let j=RPA(A.alg),e=T$(A);return De.importKey("jwk",e,j,!0,["decrypt"])},TPA=async A=>{let j=RPA(A.alg),e=D$(A);return De.importKey("jwk",e,j,!0,["encrypt"])},CPA=async(A,j)=>{let e=await De.decrypt(A.algorithm,A,j);return new Uint8Array(e)},_PA=async(A,j)=>{if(j.length>256)throw new Error("Plaintext is too large.");let e=await De.encrypt({name:A.algorithm.name},A,j);return new Uint8Array(e)};var $I=async(A,j)=>{let e="jwk"in A?A.jwk:"encryptionKeyPair"in A?A.encryptionKeyPair.pubKey:A;if(typeof e>"u")throw new TypeError("Missing JWK");if(e.kty!=="RSA")throw new Error(`Unexpected key type: ${e.kty}`);return r8j(e,j)},wI=async(A,j)=>{let e="jwk"in A?A.jwk:"encryptionKeyPair"in A?A.encryptionKeyPair.priKey:A;if(typeof e>"u")throw new TypeError("Missing JWK");if(e.kty!=="RSA")throw new Error(`Unexpected key type: ${e.kty}`);return a8j(e,j)},r8j=async(A,j)=>{let e={alg:A.alg,enc:Nt,kid:A.kid,typ:"jose+json"},t=Aj(Qe(e)),{cek:r,ciphertext:a,tag:n,iv:o}=await cFA({enc:e.enc,plaintext:j,additionalData:Ij(t)}),i=await pjA(A,r);return{protected:t,encrypted_key:Aj(i),iv:Aj(o),ciphertext:Aj(a),tag:Aj(n)}},a8j=async(A,j)=>{let e=cj(j.protected,PB.pipe($A.JweHeader)).unwrap();if(e.kid!==A.kid)throw new Error("Encrypted with incorrect key");if(e.alg!==A.alg)throw new Error("Key algorithm does not match encrypted data");let t=ej(j.encrypted_key),r=await mjA(A,t);return{content:await dFA({enc:e.enc,cek:r,iv:ej(j.iv),ciphertext:ej(j.ciphertext),additionalData:Ij(j.protected),tag:ej(j.tag)}),header:e}};var L_=N_.readonly(N_.type({ePriKey:pk,sPriKey:_B}),"KeysetEncKeyData"),BjA;(function(A){A.fromClassicKeyset=j=>{if(!j.ekeyPair.priKey.jwk||!j.ekeyPair.pubKey.jwk)throw new Error("Missing encryption key pair");if(!j.skeyPair?.priKey?.jwk||!j.skeyPair?.pubKey?.jwk)throw new Error("Missing signing key pair");return{uuid:j.uuid,sn:j.sn,spec:2,encryptionKeyPair:{priKey:j.ekeyPair.priKey.jwk,pubKey:j.ekeyPair.pubKey.jwk},signingKeyPair:{priKey:j.skeyPair.priKey.jwk,pubKey:j.skeyPair.pubKey.jwk}}},A.generate=async()=>{let j=Se(),[e,t]=await Promise.all([EjA(j),djA(j)]);return{uuid:j,sn:0,spec:2,encryptionKeyPair:e,signingKeyPair:t}},A.encryptKeyset=async(j,e)=>{let t={ePriKey:e.encryptionKeyPair.priKey,sPriKey:e.signingKeyPair.priKey},r=await $I(j,Ne.encode(t));return{uuid:e.uuid,sn:e.sn,spec:2,ePubKey:e.encryptionKeyPair.pubKey,sPubKey:e.signingKeyPair.pubKey,encKeyData:r}},A.decryptKeyset=async(j,e)=>{let{uuid:t,sn:r,spec:a,ePubKey:n,sPubKey:o,encKeyData:i}=e,s=await wI(j,i),{ePriKey:l,sPriKey:c}=cj(s.content,Ne.pipe(L_)).unwrap();return{uuid:t,sn:r,spec:a,encryptionKeyPair:{priKey:l,pubKey:n},signingKeyPair:{priKey:c,pubKey:o}}}})(BjA||(BjA={}));var z_=L_,dYe=$r.readonly($r.type({email:$r.string,hexMuk:$r.string,srpComputedX:$r.readonly($r.type({hexX:$r.string,userAuth:FF})),url:$r.string,userUuid:$r.string}),"Credentials"),SPA=$r.readonly($r.type({signingKey:$A.JwkEcPriKeyDeprecated}),"ServiceAccountStreamingODValue"),gjA=$r.readonly($r.strict({token:$r.string,sPriKey:$A.JwkEcPriKey})),n8j=$r.readonly($r.type({token:$r.string,signingKey:$A.JwkEcPriKeyDeprecated})),U_=new $r.Type("ServiceAccountConnectObjectDataValue",gjA.is,A=>{let j=$r.union([n8j,gjA]).decode(A);if((0,II.isRight)(j)){let e=j.right;return"signingKey"in e?(0,II.right)({token:e.token,sPriKey:{...e.signingKey,key_ops:["sign"]}}):(0,II.right)(e)}return j},gjA.encode),HPA=$r.readonly($r.exact($r.type({ePriKey:pk})),"DetailedVaultReportingObjectDataValue"),MPA=$r.readonly($r.exact($r.type({ePriKey:yT})),"DetailedVaultReportingObjectDataValueV2"),KPA=$r.readonly($r.type({creatorUuid:$r.string}),"ServiceAccountUserManagedObjectDataValue"),NPA=$r.readonly($r.undefined,"EmptyObjectDataValue"),hjA=$r.union([z_,HPA,MPA,U_,SPA,KPA,NPA],"ObjectDataType");var Jp=Kj.fromHex,Wp={TravelMode:Jp("000000001"),WelcomeMessageDismissed:Jp("000000002"),ReviewBannerDismissed:Jp("000000004"),TrashArchiveRenameAcknowledged:Jp("000000008"),EKitDownloaded:Jp("000000010"),TelemetryNotificationAcknowledged:Jp("000000020"),TelemetryOptIn:Jp("000000040"),ImportBannerDismissed:Jp("000000080"),InformationSaleOptOut:Jp("000000100")};var Dj;(function(A){let j;(function(r){r.Registered="R",r.VerifiedIncomplete="V",r.PendingActivation="P",r.Active="A",r.Suspended="S",r.Deleted="D",r.RecoveryStarted="1",r.RecoveryAccepted="2",r.ProvisionPending="T",r.ProvisionStarted="3",r.Provisioned="N",r.ProvisionAccepted="4",r.ProvisionSuspended="5",r.HostedProvisionSuspended="B",r.Purging="X",r.Purged="Z",r.MustMigrateAuth="M"})(j=A.State||(A.State={})),A.AllStates=[A.State.Registered,A.State.VerifiedIncomplete,A.State.PendingActivation,A.State.Active,A.State.Suspended,A.State.Deleted,A.State.RecoveryStarted,A.State.RecoveryAccepted,A.State.ProvisionPending,A.State.ProvisionStarted,A.State.Provisioned,A.State.ProvisionAccepted,A.State.ProvisionSuspended,A.State.HostedProvisionSuspended,A.State.Purging,A.State.Purged,A.State.MustMigrateAuth];let e;(function(r){r.Regular="R",r.Guest="G",r.ServiceAccount="S",r.ExternalAccountManagement="E"})(e=A.Type||(A.Type={})),A.getInitials=Xp.getInitials,A.compareByFullName=Fi.strings(r=>r.name),A.isOwner=r=>{if(typeof r.combinedPermissions>"u")throw new TypeError("missing combinedPermissions");return Kj.includes(r.combinedPermissions,tt.BelongsToOwnersGroup)},A.isSecurity=r=>{if(typeof r.combinedPermissions>"u")throw new TypeError("missing combinedPermissions");return Kj.includes(r.combinedPermissions,tt.BelongsToSecurityGroup)},A.isAdmin=r=>{if(typeof r.combinedPermissions>"u")throw new TypeError("missing combinedPermissions");return Kj.includes(r.combinedPermissions,tt.BelongsToAdminsGroup)},A.isProvisionManager=r=>{if(typeof r.combinedPermissions>"u")throw new TypeError("missing combinedPermissions");return Kj.includes(r.combinedPermissions,tt.ProvisionPeople)&&!A.isOwner(r)&&!A.isAdmin(r)},A.isGuest=r=>r.type===e.Guest,A.isMember=r=>r.type===e.Regular,A.canRecoverPeople=r=>r.combinedPermissions!==void 0&&Kj.includes(r.combinedPermissions,tt.Recover),A.isUserDefined=r=>r.combinedPermissions!==void 0&&Kj.includes(r.combinedPermissions,tt.BelongsToUserDefinedGroup),A.isExternalAccountManagement=r=>r.type===e.ExternalAccountManagement,A.isServiceAccount=r=>r.type===e.ServiceAccount,A.isActive=r=>r.state===j.Active,A.isSuspended=r=>r.state===j.Suspended,A.isProvisionStarted=r=>r.state===j.ProvisionStarted,A.isProvisioned=r=>r.state===j.Provisioned,A.isProvisionSuspended=r=>r.state===j.ProvisionSuspended,A.isHostedProvisionSuspended=r=>r.state===j.HostedProvisionSuspended,A.isEnrolled=r=>Fr([j.Active,j.ProvisionPending,j.ProvisionStarted,j.Provisioned,j.ProvisionSuspended,j.HostedProvisionSuspended,j.Suspended,j.RecoveryStarted,j.RecoveryAccepted],r.state),A.canBeRecovered=r=>r.state===j.Active&&(r.type===e.Regular||r.type===e.Guest),A.canBeDeleted=r=>{switch(r.state){case j.Suspended:case j.PendingActivation:case j.ProvisionPending:case j.ProvisionStarted:case j.Provisioned:case j.ProvisionAccepted:case j.ProvisionSuspended:case j.HostedProvisionSuspended:return!0;case j.Active:return r.type===e.ServiceAccount;default:return!1}},A.canHaveNameChanged=r=>Fr([j.Active,j.PendingActivation,j.RecoveryStarted,j.RecoveryAccepted,j.ProvisionPending,j.ProvisionStarted,j.Provisioned,j.ProvisionAccepted,j.ProvisionSuspended],r.state),A.canUseTravelMode=r=>(r.state===j.Active||r.state===j.RecoveryStarted||r.state===j.RecoveryAccepted)&&(r.type===e.Regular||r.type===e.Guest),A.isOptedInToTelemetry=r=>r.preferences!==void 0&&Kj.includes(r.preferences,Wp.TelemetryOptIn),A.managesSomeGroup=r=>!r||!r.groupMemberships||r.groupMemberships.length===0?!1:A.isOwner(r)||A.isAdmin(r)||r.hasPermission(tt.ManageGroups)||r.groupMemberships.some(a=>a.role===dr.Role.Manager),A.canHaveGroupsManaged=r=>!A.isGuest(r)&&A.isEnrolled(r),A.canHaveVaultsManaged=A.isEnrolled,A.canReceivePackage=r=>A.isMember(r)&&Fr([A.State.PendingActivation,A.State.Active,A.State.Suspended,A.State.RecoveryStarted,A.State.RecoveryAccepted,A.State.ProvisionAccepted],r.state),A.canCreateReportOn=r=>Fr([j.Registered,j.Active,j.Suspended,j.Deleted,j.RecoveryStarted,j.RecoveryAccepted,j.ProvisionPending,j.ProvisionStarted,j.Provisioned,j.ProvisionAccepted,j.ProvisionSuspended],r.state),A.mustBeRecordedToTrustLogWhenDeleted=r=>Fr([j.Active,j.Suspended,j.MustMigrateAuth,j.RecoveryStarted,j.RecoveryAccepted,j.ProvisionAccepted,j.HostedProvisionSuspended],r.state);let t;(function(r){r.Recoverable="Recoverable",r.CanHaveGroupsManaged="CanHaveGroupsManaged",r.CanUseTravelMode="CanUseTravelMode",r.CanReceivePackage="CanReceivePackage",r.CanCreateReportOn="CanCreateReportOn"})(t=A.FilterTypes||(A.FilterTypes={})),A.Filters={[t.Recoverable]:{states:[A.State.Active],types:[A.Type.Regular,A.Type.Guest]},[t.CanHaveGroupsManaged]:{states:[A.State.Active,A.State.RecoveryAccepted,A.State.RecoveryStarted,A.State.Suspended],types:[A.Type.Regular]},[t.CanUseTravelMode]:{states:[j.Active,j.RecoveryStarted,j.RecoveryAccepted],types:[e.Regular,e.Guest]},[t.CanReceivePackage]:{states:[A.State.PendingActivation,A.State.Active,A.State.Suspended,A.State.RecoveryStarted,A.State.RecoveryAccepted,A.State.ProvisionAccepted],types:[e.Regular]},[t.CanCreateReportOn]:{states:[A.State.Registered,A.State.Active,A.State.Suspended,A.State.Deleted,A.State.RecoveryStarted,A.State.RecoveryAccepted,A.State.ProvisionPending,A.State.ProvisionStarted,A.State.Provisioned,A.State.ProvisionAccepted,A.State.ProvisionSuspended],types:[A.Type.Regular,A.Type.Guest]}}})(Dj||(Dj={}));var V_=q6,o8j=Zc,zr=class A{constructor(j){this.accessorType="user",this.uuid=j.uuid||"",this.name=j.name||"",this.state=j.state||"",this.type=j.type||"",this.attrVersion=j.attrVersion||0,this.keysetVersion=j.keysetVersion||0,this.avatar=j.avatar||"",this.language=j.language||"en",this.combinedPermissions=j.combinedPermissions||Kj.empty(),this.newsletterPrefs=j.newsletterPrefs||0,this.preferences=j.preferences||Kj.empty(),this.externalGUID=j.externalGUID,this.hasMFAEnabled=j.hasMFAEnabled,this.proposedEmail=j.proposedEmail,this.email=j.email||"",this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.lastAuthAt=j.lastAuthAt,this.csToken=j.csToken,this.pubKey=void 0,this.activeKeyset=void 0,this.archivedKeysets=[],this._groupMemberships=[],this._directVaultAccessMap={},this._groupVaultAccessMap={},this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0,this._attrMask=0,this.devices=[],this.personalItemsCount=void 0}hasAttrMask(j){return(this._attrMask&j)===j}addAttrMask(j){this._attrMask|=j}isOwner(){return this.hasPermission(tt.BelongsToOwnersGroup)}setAttrs(j){return this.name=j.name||"",this.state=j.state||"",this.type=j.type||"",this.attrVersion=j.attrVersion||0,this.keysetVersion=j.keysetVersion||0,this.avatar=j.avatar||"",this.language=j.language||"en",this.combinedPermissions=j.combinedPermissions||Kj.empty(),this.newsletterPrefs=j.newsletterPrefs||0,this.preferences=j.preferences||Kj.empty(),this.externalGUID=j.externalGUID,this.hasMFAEnabled=j.hasMFAEnabled,this.proposedEmail=j.proposedEmail,this.email=j.email||"",this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.lastAuthAt=j.lastAuthAt,this.csToken=j.csToken,this}setActiveKeyset(j){j?(this.activeKeyset=j,this.pubKey=j.ekeyPair.pubKey):(this.activeKeyset=void 0,this.pubKey=void 0)}hasPermission(...j){return Kj.includes(this.combinedPermissions,Kj.combine(j))}hasPreference(...j){return this.preferences?Kj.includes(this.preferences,Kj.combine(j)):!1}async generateNewKeyset(){return Promise.reject(new Error("Not supported"))}get joined(){return this.createdAt}get initials(){return this._initials||(this._initials=Xp.getInitials(this)),this._initials}clearCachedInitials(){this._initials=""}travelModeIsEnabled(){return this.preferences!==void 0&&Kj.includes(this.preferences,Wp.TravelMode)}getAccessorVaultUuids(){return ic(this._directVaultAccessMap,()=>!0)}getVaultUuids(){let j=iD(Va(this._directVaultAccessMap),Va(this._groupVaultAccessMap)),e={};return j.forEach(t=>{e[t]=!0}),e}getVaultACLs(){if(!this._combinedVaultACLs){let j=iD(Va(this._directVaultAccessMap),Va(this._groupVaultAccessMap)),e={};j.forEach(t=>{let r=this._directVaultAccessMap[t],a=r?r.acl:0,o=V_(this._groupVaultAccessMap[t]||{}).reduce((i,s)=>i|s.acl,a);e[t]=o}),this._combinedVaultACLs=e}return this._combinedVaultACLs}hasVaultACL(j,e,t){return t&&xI(e)?!1:((this.getVaultACLs()[j.uuid]||0)&e)===e}getGroupUuids(){let j={};for(let e of this._groupMemberships)j[e.groupUuid]=!0;return j}getGroupMembership(j){return sn(this._groupMemberships,e=>e.groupUuid===j.uuid)}setState(j){this.state=j}get isActive(){return this.state===Dj.State.Active}get isEnrolled(){switch(this.state){case Dj.State.Active:case Dj.State.RecoveryAccepted:case Dj.State.RecoveryStarted:case Dj.State.Suspended:return!0;default:return!1}}get isMember(){return this.type===Dj.Type.Regular}get isGuest(){return this.type===Dj.Type.Guest}get isExternalAccountManagement(){return this.type===Dj.Type.ExternalAccountManagement}vaultAccessForVault(j){let e=Fy(this._directVaultAccessMap,j.uuid,void 0),t=V_(this._groupVaultAccessMap[j.uuid]||{}),r=e?[e,...t]:t;if(!r||r.length===0)throw new Error("Vault access for this vault has not been loaded.");return r}getDirectVaultAccessMap(){return oc(this._directVaultAccessMap)}getGroupVaultAccessMap(){return oc(this._groupVaultAccessMap)}getUnsafeVaultAccessList(){if(!this._fullVaultAccessList){let j=V_(this._directVaultAccessMap),e=o8j(this._groupVaultAccessMap,t=>V_(t));this._fullVaultAccessList=j.concat(e)}return this._fullVaultAccessList}get vaultAccessList(){if(!this.hasAttrMask(A.Attr.VaultAccess))throw new Error("Vault access list has not been loaded");return oc(this.getUnsafeVaultAccessList())}set vaultAccessList(j){let[e,t]=Ty(j,r=>r.accessorType==="group");this._directVaultAccessMap=Ca(t,r=>r.vaultUuid),this._groupVaultAccessMap=s8j(e),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}setVaultAccess(j){j.accessorType==="group"?this._groupVaultAccessMap=i8j(this._groupVaultAccessMap,j):this._directVaultAccessMap={...this._directVaultAccessMap,[j.vaultUuid]:j},this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}removeVaultAccess(j){this._directVaultAccessMap=qi(this._directVaultAccessMap,j.uuid),this._groupVaultAccessMap=qi(this._groupVaultAccessMap,j.uuid),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}get unsafeGroupMemberships(){return this._groupMemberships}get groupMemberships(){return oc(this._groupMemberships)}set groupMemberships(j){this._groupMemberships=j.slice(),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}pushGroupMembership(j){this._groupMemberships.push(j),this._fullVaultAccessList=void 0,this._combinedVaultACLs=void 0}markTraveling(j){j?this.preferences=Kj.enable(this.preferences,Wp.TravelMode):this.preferences=Kj.disable(this.preferences,Wp.TravelMode),this.updatedAt=new Date,this.attrVersion++}compare(j){return this.name.localeCompare(j.name)}toString(){return"[object Person]"}};zr.UUIDNewlyCreatedProvisionUser="ANEWLYCREATEDTRANSFERUSER2";zr.UUIDNewlyCreatedServiceAccount="NEWLYCREATEDSERVICEACCOUNT";zr.Attr={None:0,PubKey:1,Keysets:2,Groups:4,VaultAccess:8,Devices:16,PersonalItemsCount:32,ProposedEmailChange:64,All:255};var i8j=(A,j)=>{let e=j.vaultUuid,t=j.accessorUuid;return{...A,[e]:{...A[e],[t]:j}}},s8j=A=>{let j={};return A.forEach(e=>{let t=e.vaultUuid,r=e.accessorUuid,a=j[t]||{};j[t]=a,a[r]=e}),j};var Ol=J(tA());var Ns=Kj.fromHex,bg={Offline:Ns("000000001"),Web:Ns("000000002"),Mac:Ns("000000004"),Windows:Ns("000000008"),IOS:Ns("000000010"),Android:Ns("000000020"),CLI:Ns("000000040"),Extension:Ns("000000080"),SCIM:Ns("000000100"),CSExtension:Ns("000000200"),Linux:Ns("000000400"),Connect:Ns("000000800"),ServiceAccount:Ns("000001000"),All:Ns("0FFFFFFFF"),Travel:Ns("100000000")};var LPA=p`web-api/model/vault.ts`,qjA=ar(LPA.str),PI=(A,j=!1)=>e=>{if(typeof e=="string")return e;let t=typeof e,r=`Unexpected vault attr type. Expected ${A} to be string, received ${t}.`;return!j&&(t==="number"||t==="boolean")?(Qn()&&console.warn(`${r} Converting ${A} to string.`),String(e)):(Qn()&&console.warn(`${r} Setting ${A} to empty string.`),"")},X_=Ol.readonly(Ol.type({name:Qo(Ol.string,PI("name")),type:Qo(Ol.string,PI("type")),desc:Qo(Ol.string,PI("desc")),uuid:Qo(Ol.string,PI("uuid")),avatar:Qo(Ol.string,PI("avatar",!0)),defaultAcl:Qo(Ol.union([Kj.codec,Ol.undefined]),A=>{Qn()&&console.warn(`Unexpected vault attr type. Expected defaultAcl to be number, received ${typeof A}. Setting defaultAcl to undefined.`)})},"VaultAttrs")),sj=class A{constructor(j){this.generateNewKey=async()=>{this.uuid||(this.uuid=Se());let e=this.activeKey,t=Ot();return await t.generate(Nt),t.sn=e?(e.sn||1)+1:1,this.activeKey=t,this.keys.unshift(t),await this.encryptAttrs(),this},this.revokeAccess=async e=>Promise.resolve().then(()=>{this.clearCachedAccessInfo(),this.accessList=_7(this.accessList,t=>t.accessorUuid!==e.uuid),e.accessorType==="user"?this.previewUsers=_7(this.previewUsers,t=>t.uuid!==e.uuid):this.previewGroups=_7(this.previewGroups,t=>t.uuid!==e.uuid),e.removeVaultAccess(this)}),this.getAttrs=()=>({uuid:this.uuid,name:this.name,type:this.type,desc:this.desc,avatar:this.avatar,defaultAcl:this.defaultAcl}),this.encryptAttrs=async()=>Promise.resolve().then(async()=>{if(!this.activeKey)throw new Error("Missing active key");return this.uuid||(this.uuid=Se()),this.activeKey.encrypt(Qe(this.getAttrs())).then(e=>(this.encAttrs=e,this))}).catch(qjA("encryptAttrs")),this.encrypt=async e=>Promise.resolve().then(async()=>{if(!this.activeKey)throw new Error("Missing active key");return this.activeKey.encrypt(e)}).catch(qjA("encrypt")),this.decrypt=async e=>Promise.resolve().then(async()=>{if(!this.activeKey)throw new Error("Missing active key");return this.activeKey.decrypt(e)}).catch(qjA("decrypt")),this.decryptAttrs=async e=>{let t=await this.activeKey?.decrypt(e).then(r=>{let a=cj(r,Ne).unwrap();return cj(a,X_,{mode:"unsafe_report_only",file:LPA,func:p`decryptAttrs`}).unwrap()}).catch(()=>{});return t?.uuid||(t={uuid:this.uuid,name:"Corrupted vault",type:"",desc:"Corrupted vault",avatar:"",defaultAcl:void 0}),this.uuid=t.uuid,this.name=t.name,this.type=t.type,this.desc=t.desc,this.avatar=t.avatar,this.defaultAcl=t.defaultAcl,this},this.uuid=j.uuid?j.uuid:Se(),this.name=typeof j.name=="string"?j.name:"",this.type=j.type,this.desc=typeof j.desc=="string"?j.desc:"",this.defaultAcl=j.defaultAcl,this.avatar=j.avatar||"",this.leaseTimeout=0,this.clientAccess=bg.All,this.createdAt=new Date,this.contentVersion=1,this.activeItemCount=0,this.keys=[],this.accessList=[],this.itemTemplates=[],this.previewGroups=[],this.previewUsers=[],this._attrMask=0,this.attrVersion=1}hasAttrMask(j){return Kj.equals(j,A.Attr.None)?Kj.equals(this._attrMask,A.Attr.None):Kj.includes(this._attrMask,j)}addAttrMask(j){this._attrMask=Kj.combine([this._attrMask,j])}get isPersonal(){return this.type===A.TypePersonal}get isSystem(){return this.type===A.TypeSystem}get isGeneratedPasswords(){return this.type===A.TypeGeneratedPasswords}get isDeveloperEnvironment(){return this.type===A.TypeDeveloperEnvironment}get isManaged(){return this.type===A.TypeManagedApplications}hasClientAccess(...j){return this.clientAccess?Kj.includes(this.clientAccess,Kj.combine(j)):!1}getPeopleUuids(){if(!this._userUuidMap){let j={};for(let e of this.accessList)e.accessorType!=="group"&&(j[e.accessorUuid]=!0);this._userUuidMap=j}return this._userUuidMap}getGroupUuids(){if(!this._groupUuidMap){let j={};for(let e of this.accessList)e.accessorType==="group"&&(j[e.accessorUuid]=!0);this._groupUuidMap=j}return this._groupUuidMap}clearCachedAccessInfo(){this._userUuidMap=void 0,this._groupUuidMap=void 0}setCombinedAcl(j){this._combinedAcl=j,this.addAttrMask(A.Attr.CombinedAccess)}getCombinedAcl(){return this._combinedAcl}setAccessList(j){this.accessList=j,this.clearCachedAccessInfo();let e=[];for(let r of j)r.vaultKey&&(r.vaultKey.sn=r.vaultKeySN,e.push(r.vaultKey));if(e.length===0){console.warn("No vault keys in access list.");return}let t=e.sort((r,a)=>typeof r.sn>"u"?1:typeof a.sn>"u"?-1:a.sn-r.sn);this.activeKey=t[0]}clearAccessList(){this.accessList=[],this.clearCachedAccessInfo()}toString(){return"[object Vault]"}};sj.StateActive="A";sj.StateDeleted="D";sj.TypePersonal="P";sj.TypeEveryone="E";sj.TypeUserCreated="U";sj.TypeProvision="T";sj.TypeSystem="S";sj.TypeGeneratedPasswords="G";sj.TypeReplacement="R";sj.TypeManagedApplications="M";sj.TypeDeveloperEnvironment="D";sj.TypeClientPlaceholder="-";sj.DefaultDescMarker="GYkuBJsjEZmMUuiP";sj.Attr={None:0,Accessors:1,ArchivedKeys:2,ItemCategories:4,CombinedAccess:8,All:255};(function(A){A.compare=W$((j,e)=>j.type===A.TypePersonal?-1:e.type===A.TypePersonal||j.type===A.TypeEveryone?1:e.type===A.TypeEveryone?-1:0,Fi.strings(j=>j.name),Fi.dates(j=>j.createdAt),Fi.strings(j=>j.uuid)),A.activeUserHasAcl=(j,e)=>{let t=j.getCombinedAcl?j.getCombinedAcl():void 0;if(typeof t>"u")throw new TypeError("combinedPermissions not found on vault");return Kj.includes(t,e)}})(sj||(sj={}));var l8j=1,Eo=class extends zr{constructor(j){super(j),this.generateNewKeyset=async()=>{let e=await Ya.generateWithSigningKeys();if(this.activeKeyset){e.sn=this.activeKeyset.sn+1;let t=await this.activeKeyset.encryptWithKey(e.symKey);this.archivedKeysets=[t,...this.archivedKeysets]}else e.sn=1;return this.setActiveKeyset(e),this},this.encryptActiveKeysetWithMasterKey=async()=>{if(!this.activeKeyset)throw new Error("Missing activeKeyset");if(!this.masterKey)throw new Error("Missing masterKey");return this.activeKeyset.encryptWithKey(this.masterKey)},this.getCredentials=()=>{if(!this.email)throw new Error("Missing email");if(!this.password)throw new Error("Missing password");if(!this.secretKey)throw new Error("Missing Secret Key");return{email:this.email,password:this.password,secretKey:this.secretKey}},this.canManageVault=e=>e?sj.activeUserHasAcl(e,Uq):!1,this.password=j.password,this.secretKey=j.secretKey,this.meta=j.meta}};var Wq=class{constructor(j,e,t){this.encryptAndSign=async r=>{if(!this.item)throw new Error("Missing item.");if(!this.recipient.pubKey)throw new Error("Missing recipient's public key");this.key=Ot();let[a]=await Promise.all([cs(this.recipient.pubKey),this.key.generate(Nt)]);if(!this.key.jwk)throw new Error("Missing JWK.");this.encKey=await a.encrypt(Qe(this.key.jwk));let[n,o]=await this.item.encryptWithKey(this.key);this.encOverview=n,this.encDetails=o;let i=In([Ij(this.sender.uuid),Ij(this.recipient.uuid),Qe(this.encOverview),Qe(this.encDetails)]);if(!this.sender.activeKeyset)throw new Error("Missing active keyset.");return this.signature=await this.sender.activeKeyset.sign(i),await this._enableKeyRecovery(r),this},this._enableKeyRecovery=async r=>{if(!r.pubKey)throw new Error("Missing group's public key");if(!this.key)throw new Error("Missing key");return this.recoverableEncKey=await this.key.encryptWithKey(r.pubKey),this},this.verifyAndDecrypt=async(r,a)=>{this.key=Ot();let n=new kA(r,void 0,this.uuid);if(!this.templateUuid)throw new Error("Missing template UUID");if(!this.itemUuid)throw new Error("Missing item UUID");if(!this.encOverview)throw new Error("Missing encrypted overview");if(!this.encKey)throw new Error("Missing encryption key");return await this.key.decryptWithKeyset(a,this.encKey),await n.decryptWithKey(this.key,this.encOverview,this.encDetails),n.templateUuid=this.templateUuid,n.packageUuid=this.uuid,n.uuid=this.itemUuid,n.itemVersion=1,n.state=kA.ItemState.Active,n.createdAt=this.clientCreatedAt,n.updatedAt=this.clientUpdatedAt,this.item=n,this},this.sender=j,this.recipient=e,this.item=t,this.createdAt=new Date}},xjA;(function(A){A.encryptAndSign=async(j,e,t)=>{},A.verifyAndDecrypt=async j=>{}})(xjA||(xjA={}));var OI=class{constructor(j,e){this.vaultUuid=j,this.vaultKey=e,this.encryptWithKey=async t=>{if(typeof this.vaultKey.sn>"u")throw new TypeError("Missing vault key SN");let r=await this.vaultKey.encryptWithKey(t);return{vaultUuid:this.vaultUuid,vaultKeySN:this.vaultKey.sn,encryptedBy:r.kid,encVaultKey:r}}}},RI=class{constructor(j,e){this.groupUuid=j,this.keyset=e,this.encryptWithKey=async t=>({groupUuid:this.groupUuid,keyset:await this.keyset.encryptWithKey(t)})}},DI=class{constructor(j,e){this.vaultKeys=j,this.groupKeysets=e,this.encryptForPerson=async t=>{let r=t.pubKey;if(!r)throw new Error("Missing user's public key");return this.encryptWithPubKey(r)},this.encryptWithPubKey=async t=>{let[r,a]=await Promise.all([Promise.all(this.vaultKeys.map(async n=>n.encryptWithKey(t))),Promise.all(this.groupKeysets.map(async n=>n.encryptWithKey(t)))]);return{vaultKeys:r,groupKeysets:a}}}};var TI=class{constructor(j,e){this.vaultUuid=j,this.vaultKey=e,this.encryptWithKey=async t=>{if(typeof this.vaultKey.sn>"u")throw new TypeError("Missing vault key SN");let r=await this.vaultKey.encryptWithKey(t);return{vaultUuid:this.vaultUuid,vaultKeySN:this.vaultKey.sn,encryptedBy:r.kid,encVaultKey:r}}}},CI=class{constructor(j,e){this.groupUuid=j,this.keyset=e,this.encryptWithKey=async t=>{let r=await this.keyset.encryptWithKey(t);return{groupUuid:this.groupUuid,keyset:r}}}},_I=class{constructor(j,e){this.packageUuid=j,this.key=e,this.encryptWithKey=async t=>{let r=await this.key.encryptWithKey(t);return{packageUuid:this.packageUuid,key:r}}}},SI=class{constructor(j,e,t){this.vaultKeys=j,this.groupKeysets=e,this.packageKeys=t,this.encryptForPerson=async r=>{if(!r.pubKey)throw new Error("Missing user's public key");let a=await cs(r.pubKey),[n,o,i]=await Promise.all([Promise.all(this.vaultKeys.map(async s=>s.encryptWithKey(a))),Promise.all(this.groupKeysets.map(async s=>s.encryptWithKey(a))),Promise.all(this.packageKeys.map(async s=>s.encryptWithKey(a)))]);return{vaultKeys:n,groupKeysets:o,packageKeys:i}}}},HI=class{constructor(j){this.keys=j,this.encryptForPeople=async e=>{if(this.keys.length!==e.length)throw new Error("Number of keys and people do not match.");let t=this.keys.map(async(r,a)=>{let n=e[a];if(n===void 0)throw new Error("encryptForPeople: user not found.");return r.encryptForPerson(n)});return{keys:await Promise.all(t)}}}};var ds=J(tA());var MI={};er(MI,{JwtStandardClaims:()=>J_,Keyset:()=>BjA,KeysetEncKeyData:()=>L_,createToken:()=>W_,decrypt:()=>wI,encrypt:()=>$I,sign:()=>vjA,verify:()=>c8j});var vjA=async(A,j)=>{let e=await bF(A),t={alg:Dk,kid:A.kid,typ:"jose+json"},r=Aj(Qe(t)),a=Aj(j),n=Ij(r+"."+a),o=await yF({alg:t.alg,key:e,signingInput:n});return{protected:r,payload:a,signature:Aj(o)}},c8j=async(A,j)=>{let e=await FI(A),t=PB.pipe($A.JwsHeader),r=cj(j.protected,t).unwrap();if(r.alg!==Dk)throw new Error("Unexpected algorithm");if(r.kid!==A.kid)throw new Error("Incorrect signing key");let a=Ij(j.protected+"."+j.payload),n=ej(j.signature);return{isValid:await bI({alg:r.alg,key:e,signingInput:a,signature:n}),header:r}};var Tk=J(tA());var J_=Tk.readonly(Tk.partial({iss:Tk.string,sub:Tk.string,aud:Tk.readonlyArray(Tk.string),exp:a$,nbf:a$,iat:a$,jti:Tk.string}),"JwtStandardClaims"),W_=async(A,j,e)=>{let t={alg:Dk,kid:A.kid,typ:"JWT"},r=Aj(Qe(t)),a=Aj(Qe(e.encode(j))),n=Ij(r+"."+a),o={...A,key_ops:["sign"]},i=await bF(o),s=await yF({alg:t.alg,key:i,signingInput:n});return r+"."+a+"."+Aj(s)};var GjA="com.1password.b5",KI;(function(A){A.AccessVaults="vaultaccess"})(KI||(KI={}));var d8j=({audience:A,features:j,...e})=>{let t={audience:A,features:j,jti:Se(),issuer:e.issuer||GjA,vaults:e.vaultAccess?k8j(e.vaultAccess):void 0,expiry:e.expiry?e.expiry.toISOString():void 0};return VPA(t),t},zPA=ds.readonly(ds.intersection([ds.type({"1password.com/auuid":ds.string,"1password.com/fts":ds.readonlyArray(ds.string)}),ds.partial({"1password.com/token":ds.string,"1password.com/vts":ds.readonlyArray(r_)})]),"ServiceAccountJwtPrivateClaims"),UPA=ds.intersection([J_,zPA],"ServiceAccountJwtClaims"),fjA=async({signingKey:A,accountUuid:j,serviceAccountUuid:e,createTokenInfo:t,...r})=>{if(!e)throw new Error("SAJWT subject claim not provided.");VPA(t);let a={"1password.com/auuid":j,"1password.com/token":r.bearerToken,"1password.com/fts":t.features,"1password.com/vts":t.vaults,aud:[t.audience],sub:e,exp:t.expiry?new Date(t.expiry):void 0,iat:new Date,nbf:r.notValidBefore,iss:t.issuer||GjA,jti:t.jti};return await W_(A,a,UPA)},VPA=A=>{if(!A.audience)throw new Error("Audience claim is required.");if(A.features.length===0)throw new Error("Token 'features' claim not provided");if(A.vaults?.length&&A.vaults?.length>0&&!A.features.includes(KI.AccessVaults))throw new Error(`Feature ${KI.AccessVaults} is required if including Vault claims.`)},k8j=A=>A.map(({vaultUuid:j,acl:e})=>({u:j,a:e})),FjA=async A=>{let j=A.split(".")[2];if(!j)throw new Error("corrupted token");let e=await $A.sha256(Ij(j));return Wn(e)};var ks=class A{constructor(j){this.uuid=j.uuid||"",this.email=j.email||"",this.creatorUuid=j.creatorUuid,this.serviceAccountType=j.serviceAccountType,this.attrVersion=j.attrVersion||0,this.keysetVersion=j.keysetVersion||0,this.name=j.name||"",this.state=j.state||"",this.type=j.type||"",this.avatar=j.avatar||"",this.language=j.language||"en",this.permissions=j.permissions||0,this.combinedPermissions=j.combinedPermissions||Kj.empty(),this.newsletterPrefs=j.newsletterPrefs||0,this.preferences=j.preferences||Kj.empty(),this.externalGUID=j.externalGUID,this.createdAt=j.createdAt,this.updatedAt=j.updatedAt,this.lastAuthAt=j.lastAuthAt,this.billables=j.billables,this.rotatedAt=j.rotatedAt,this.expiresAt=j.expiresAt,this._tokenJtiMap={},this._attrMask=0,this._serviceAccountVaultAccess=j.serviceAccountVaultAccess}hasAttrMask(j){return(this._attrMask&j)===j}addAttrMask(j){this._attrMask|=j}static translateAttrMaskNames(j){let e=Object.keys(A.Attr).filter(t=>!["None","All"].includes(t)).map(t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/^-+|-+$/g,"").toLowerCase());return vk(j,e)}get tokens(){if(!this.hasAttrMask(A.Attr.Tokens))throw new TypeError("Service Account token list has not been loaded");return Object.values(this._tokenJtiMap)}set tokens(j){this._tokenJtiMap=Ca(j,e=>e.tokenInfo.jti)}getToken(j){if(!this.hasAttrMask(A.Attr.Tokens))throw new TypeError("Service Account token list has not been loaded");return this._tokenJtiMap[j]}get displayableVaultAccess(){if(!this.hasAttrMask(A.Attr.VaultAccess)||!this._serviceAccountVaultAccess)throw new TypeError("Service Account Vault Access has not been loaded.");return this._serviceAccountVaultAccess.displayable}get totalAccessibleVaults(){if(!this.hasAttrMask(A.Attr.VaultAccess)||!this._serviceAccountVaultAccess)throw new TypeError("Service Account Vault Access has not been loaded.");return this._serviceAccountVaultAccess.totalVaults}};ks.Attr={None:0,Tokens:1,VaultAccess:2,Billables:4,All:255};var XPA={CreateToken:ai.ServiceAccountTokenCreate,RevokeToken:ai.ServiceAccountTokenRevoke,EditToken:ai.ServiceAccountTokenEdit,CreateServiceAccount:ai.ServiceAccountCreate,EditServiceAccount:ai.ServiceAccountEdit,DeleteServiceAccount:ai.ServiceAccountDelete,EditVaultAccess:ai.ServiceAccountConnectVaultAccessEdit},u8j=Object.values(XPA),E8j={Active:"A",Revoked:"R"};var bjA;(function(A){A.UsersRead="users:read",A.EmailRead="users:read.email",A.GroupsRead="usergroups:read"})(bjA||(bjA={}));var p8j=()=>{W$((A,j)=>A.hasTeamUser&&!j.hasTeamUser?1:!A.hasTeamUser&&j.hasTeamUser?-1:0,(A,j)=>A.hasPendingInvite&&!j.hasPendingInvite?1:!A.hasPendingInvite&&j.hasPendingInvite?-1:0,Fi.strings(A=>A.name),Fi.strings(A=>A.email))},m8j=Xp.getInitials,B8j=(A,j)=>A?.scope?A.scope.split(",").some(t=>t===j):!1,g8j=A=>A===Ik.Active,h8j=A=>!!A?.enterpriseUid&&!!A.isGranular,yjA=(A=Ik.NotLoaded)=>({state:A,notifChannelUid:"",alertChannelUid:"",scope:"",teamName:"",alertNotifTeamUid:"",enterpriseUid:"",enterpriseName:"",enterpriseUrl:"",enterpriseTeams:[],isGranular:!1});var NI=class{constructor(j){this.setDomainBasedInfo=()=>{this.countryCode=R4(this.accountDomain),this.server=fi(this.accountDomain)},this.getSignInDomain=()=>this.usingMyDomain?Il+"."+this.server:this.accountDomain,this.update=e=>{let t=!1;return this.userUuid!==e.userUuid&&(this.userUuid=e.userUuid,t=!0),this.userEmail!==e.userEmail&&(this.userEmail=e.userEmail,t=!0),this.userName!==e.userName&&(this.userName=e.userName,t=!0),this.userAvatarURL!==e.userAvatarURL&&(this.userAvatarURL=e.userAvatarURL,t=!0),this.usingMyDomain!==e.usingMyDomain&&(this.usingMyDomain=e.usingMyDomain,t=!0),this.accountType!==e.accountType&&(this.accountType=e.accountType,t=!0),this.accountName!==e.accountName&&(this.accountName=e.accountName,t=!0),this.accountDomain!==e.accountDomain&&(this.accountDomain=e.accountDomain,this.setDomainBasedInfo(),t=!0),this.accountAvatarURL!==e.accountAvatarURL&&(this.accountAvatarURL=e.accountAvatarURL,t=!0),this.hasPrioritySupport!==e.hasPrioritySupport&&(this.hasPrioritySupport=e.hasPrioritySupport,t=!0),t},this.userUuid=j.userUuid,this.userEmail=j.userEmail,this.userName=j.userName,this.userAvatarURL=j.userAvatarURL,this.usingMyDomain=j.usingMyDomain,this.accountUuid=j.accountUuid,this.accountType=j.accountType,this.accountName=j.accountName,this.accountDomain=j.accountDomain,this.accountAvatarURL=j.accountAvatarURL,this.hasPrioritySupport=j.hasPrioritySupport,this.countryCode=R4(this.accountDomain),this.server=fi(this.accountDomain)}toString(){return"[object UserCookie]"}};var JPA,q8j="model/vault_access",WPA=ij(q8j),wt=class{constructor(j){if(this.canManageVault=e=>this.vaultUuid===e.uuid&&(this.acl&Uq)===Uq,this.encryptVaultKey=async e=>WPA("encryptVaultKey",async()=>{if(!this.vaultKey)throw new Error("Missing vault key");if(!e)throw new Error("Missing accessor");if(!e.pubKey)throw new Error("Missing accessor's pubKey");return this.vaultKey.encryptWithKey(e.pubKey).then(t=>(this.encVaultKey=t,t))}),this.decryptVaultKey=async e=>{if(!this.encVaultKey)throw new Error("Missing encrypted vault key.");if(!e)throw new Error("Missing keyset");return this.vaultKey=await Ot().decryptWithKeyset(e,this.encVaultKey),this.vaultKey},!dq(j.vaultUuid))throw new Error("Invalid vault UUID");if(!N3(j.accessorType)(j.accessorUuid))throw new Error("Invalid accessor UUID");this.vaultUuid=j.vaultUuid,this.accessorType=j.accessorType,this.accessorUuid=j.accessorUuid,this.vaultKeySN=j.vaultKeySN,this.encVaultKey=j.encVaultKey&&"kid"in j.encVaultKey&&j.encVaultKey.kid?j.encVaultKey:void 0,this.encryptedBy=j.encryptedBy,this.acl=j.acl,this.leaseTimeout=j.leaseTimeout}static combineACLs(j){return j?j.reduce((e,t)=>e|t.acl,0):0}toApi(){return{vaultUuid:this.vaultUuid,accessorType:this.accessorType,accessorUuid:this.accessorUuid,vaultKeySN:this.vaultKeySN,encVaultKey:this.encVaultKey,encryptedBy:this.encryptedBy,acl:this.acl,leaseTimeout:this.leaseTimeout}}};JPA=wt;wt.generate=async(A,j,e)=>WPA("generate",async()=>{if(!A||!A.activeKey)throw new Error("Missing vault key");if(typeof A.activeKey.sn>"u")throw new TypeError("Missing active key SN");if(!j||!j.pubKey)throw new Error("Missing accessor's public key");let t=await zq(j.pubKey),r=await A.activeKey.encryptWithKey(t),a=new JPA({accessorType:j.accessorType,accessorUuid:j.uuid,encryptedBy:t.uuid,encVaultKey:r,leaseTimeout:0,vaultKeySN:A.activeKey.sn,vaultUuid:A.uuid,...e});return a.vaultKey=A.activeKey,a});var Ck=J(tA());var $jA=[sj.TypePersonal,sj.TypeEveryone,sj.TypeUserCreated],$F;(function(A){A.Patch="patch",A.Full="full"})($F||($F={}));var x8j=Ck.type({scope:Ck.string,contentVersion:Ck.number,isFinal:Ck.boolean,vaultUuid:Ck.string,snapshots:Ck.array(Fw)},"EncryptedVaultItemSnapshotBatchV2"),Q_=async(A,j,e)=>{let t={title:A.overview.title};if(A.templateUuid===Sj.LoginUuid&&A.username!==void 0&&(t.username=A.username.value),A.vault.type!==sj.TypePersonal&&(t.vaultName=A.vault.name),A.overview.URLs){let o=A.overview.URLs.map(i=>i.u);t.domains=cz(o)}e&&(t.watchtowerReport=e);let r=!!t.domains?.some(o=>!!o),a={uuid:"",trashed:A.state,vaultUuid:A.vault.uuid},n={clientCreatedAt:kp(A.createdAt),hasUrl:r,itemVersion:A.itemVersion,payloadVersion:Uf,templateUuid:A.templateUuid||"",timestamp:kp(new Date),vaultItemUuid:A.uuid,isBusinessRelated:lz(j,A.templateUuid===Sj.LoginUuid,t.username)};return{snapshot:t,additionalData:n,serverData:a}};var wF;(function(A){A.Lavender="lavender",A.Algae="algae",A.LightBlue="light_blue",A.Sand="sand",A.Red="red",A.Peach="peach"})(wF||(wF={}));var Z_={};er(Z_,{logCryptoSupport:()=>G8j,run:()=>wjA});var wjA=async()=>{if($A.waitForInit!==void 0){await $A.waitForInit;try{await v8j(),$A.testsComplete()}catch(A){$A.testsError(A)}}},QPA,v8j=async()=>{let A=performance.now(),[j,e,t,r]=await Promise.all([Y_($8j),Y_(f8j),Y_(F8j),Y_(b8j)]),a=performance.now();QPA=Math.round(a-A).toString(10),$A.setSupport({jwkImport:j,rsaOaep256:e,nativeAesGcm:t,nativeEcdsa:r})},G8j=()=>{let{jwkImport:A,rsaOaep256:j,nativeAesGcm:e,nativeEcdsa:t}=$A.supports;(Qn()||Object.values($A.supports).includes(!1))&&`${QPA}${A}${j}${e}${t}`},Y_=async A=>Promise.resolve().then(A).then(()=>!0,()=>!1),f8j=async()=>{let A={alg:"RSA-OAEP-256",e:"AQAB",ext:!0,key_ops:["encrypt"],kid:"pdmixa3yhjitikm7uv2fd7veme",kty:"RSA",n:"1HfpUoQjzFj9sXJc1-BsZ5oWYsBhDTZkjLYzPqam5DhezPAIDkoZfBw1B4jG43ez-_WifZf_kRc9zyHl3aoe0bUmVJnr58kGvStscTD0b1n5xkLHsuADf5YqjxYTmBZEkmrewV5xG7TdiYdx7ZboUpRVD6g7yg3xakfYvZuGuIkPlxHvxb4qx-wMe1M81sPZAAoSQl923uMCCIO6y236f2oMSsSDbm-6FynwMo4rWvRuN588pZCfHzhYzchembABVdt2HsHUwZC36fV9T_EuHEjTIiWaSYj1UyMUWvD8bVwehlDV4_NBiU-IuL3s8SDJCSQW4zHiTQG8qVEUpkPBew"};return new Zr("").import(A)},F8j=async()=>{let A=new $i;await A.generate(Nt,void 0),await A.encrypt(Ij("A3-TEST"));let j=A.jwk?.k;if(!j)throw new Error("Missing key value");let e=ej(j);await new $i().importRawKey(Nt,e)},b8j=async()=>$A.subtle.generateKey(Qa.DEFAULT_KEY_ALG,!0,["sign","verify"]),y8j={alg:"RSA-OAEP",e:"AQAB",ext:!0,key_ops:["encrypt"],kty:"RSA",n:"lW5zhTLlU1ayN9uDy4_9uNT3I2bTX24565Gr5yuKnNRGpE3rT9rGzjgPDamcKPIi4fPCP0HFFpS35D6F1zlOsy2uPFwXC6HGZVRvXoHaAcTq3HRTkQ2HpWnxI9R0XwJMDaxCwDFalAYSEYkQC6k7CFT87PPTKzCgnfVqX3aHAU2LzfjlQL1KtVU1Qy8QwUv_LgI9tjbbFrn62sAWruJItG65pHbWH0Gyp_Kna4HCiL4zjiWVxMOqwLt1Qkj_vkJwJ8pA7ooJEuTXCpxkoikEyxxRCDWxSbICyaD90MVpyXt2iaFaZc8ntS_JiofeMmm0iZ0uNJ3B0oT-twe0Dn2Edw",kid:"tyy2gvlws7xxnpqvayhqeg5e5y"},$8j=async()=>$A.subtle.importKey("jwk",y8j,Zr.WC_ALG_RSA_OAEP,!0,["encrypt"]);var YPA={};var IjA=Z("web-api/api/quest.ts"),w8j=Za.readonly(Za.intersection([Za.type({id:Za.number,title:Za.string,description:Za.string,url:Za.string,priorityLevel:Za.number,image:Za.string,badgeColor:ql(wF,"ColorType"),questColor:ql(wF,"ColorType")}),Za.partial({badgeText:Za.string})]),"Quest"),PjA=IjA(()=>({name:"getAutomatedQuest",method:"GET",url:"/api/v1/quest",responseType:Za.union([w8j,Za.null])})),I8j=Za.type({messageId:Za.string,customPayload:Za.unknown,priorityLevel:Za.number},"IterableQuest"),P8j=IjA(()=>({name:"getIterableQuests",method:"GET",url:"/api/v2/quest/all",responseType:Za.array(I8j)})),O8j=IjA(A=>({name:"trackIterableQuestEvent",method:"POST",url:"/api/v2/quest/event",body:A,responseType:L}));var _A=J(tA());var _i=Z("web-api/api/recovery_key.ts"),R8j=_A.exact(_A.type({recoveryKeyUuid:_A.string}),"RecoveryKeyStartRequest"),ZPA=_A.exact(_A.type({sessionUuid:_A.string,cryptoVersion:_A.string}),"StartRecoveryResponse"),D8j=_i(A=>({name:"recoveryKeyBeginAttempt",method:"POST",url:"/api/v2/recovery-keys/session/new",body:A,responseType:ZPA,encrypted:!1})),T8j=_A.exact(_A.type({bigA:_A.string}),"RecoverySrpARequest"),A8A=_A.exact(_A.type({bigB:_A.string}),"RecoverySrpBResponse"),C8j=_i(A=>({name:"recoveryKeyAuthV1Begin",method:"POST",url:"/api/v2/recovery-keys/session/auth/cv1/start",body:A,responseType:A8A,encrypted:!1})),_8j=_A.exact(_A.type({clientHash:_A.string}),"RecoverySrpConfirmKeyRequest"),j8A=_A.exact(_A.type({serverHash:_A.string}),"RecoverySrpConfirmKeyResponse"),S8j=_i(A=>({name:"recoveryKeyAuthV1ConfirmKey",method:"POST",url:"/api/v2/recovery-keys/session/auth/cv1/confirm",body:A,responseType:j8A,encrypted:!1})),H8j=_A.type({uuid:_A.string,label:_A.union([_A.string,_A.null]),enc:_A.string,encryptedBy:_A.string,cryptoVersion:_A.string,verifierParam:_A.string}),M8j=_i(A=>({name:"createRecoveryKey",method:"POST",url:"/api/v2/recovery-keys/keys",body:A,responseType:L})),OjA;(function(A){A.Provisional="PROVISIONAL",A.PolicyAdded="PROVISIONAL_POLICY_ADDED",A.PendingActivation="PENDING_ACTIVATION",A.Active="ACTIVE",A.Suspended="SUSPENDED",A.Deleted="DELETED",A.Displaced="DISPLACED"})(OjA||(OjA={}));var e8A=_A.type({uuid:_A.string,label:_A.union([_A.string,_A.null]),state:_A.string,enc:_A.string,encryptedBy:_A.string,cryptoVersion:_A.string,verifierParam:_A.string,createdAt:_A.string,updatedAt:_A.string}),K8j=_i(A=>({name:"getRecoveryKey",method:"GET",url:`/api/v2/recovery-keys/keys/${A}`,responseType:e8A})),N8j=_i(A=>({name:"deleteRecoveryKey",method:"DELETE",url:`/api/v2/recovery-keys/keys/${A}`,responseType:L})),L8j=_i(A=>({name:"activateRecoveryKey",method:"POST",url:`/api/v2/recovery-keys/keys/${A}/activate`,responseType:L})),z8j=_A.type({recoveryKeyUuid:_A.string,feature:_A.string,custody:_A.string,configuration:_A.type({userVerification:_A.array(_A.string),delaySecs:_A.number}),specVersion:_A.string}),t8A=_A.type({uuid:_A.string}),U8j=_i(A=>({name:"createRecoveryPolicy",method:"POST",url:"/api/v2/recovery-keys/policies",body:A,responseType:t8A})),V8j=_A.type({encryptedKeyMaterial:_A.string}),r8A=_A.type({integrity:_A.string}),X8j=_i((A,j)=>({name:"addRecoverableMaterial",method:"POST",url:`/api/v2/recovery-keys/keys/${A}/material`,body:j,responseType:r8A})),a8A=_A.type({policyUuids:_A.array(_A.string)}),J8j=_i((A,j)=>({name:"getRecoveryPolicies",method:"GET",url:`/api/v2/recovery-keys/policies${nt({feature:A,state:j})}`,responseType:a8A})),n8A=_A.exact(_A.type({uuid:_A.string,recoveryKeyUuid:_A.string,feature:_A.string,custody:_A.string,configuration:_A.exact(_A.type({userVerification:_A.array(_A.string),delaySecs:_A.number})),specVersion:_A.string,createdAt:_A.string,updatedAt:_A.string})),W8j=_i(A=>({name:"getRecoveryPolicy",method:"GET",url:`/api/v2/recovery-keys/policies/${A}`,responseType:n8A})),o8A=_A.type({uuid:_A.string,policyUuid:_A.string,state:_A.string,createdAt:_A.string,updatedAt:_A.string,expiresAt:_A.string}),i8A=_A.type({recoveryAttempts:_A.array(o8A)}),Q8j=_i(()=>({name:"getRecoveryAttempts",method:"GET",url:"/api/v2/recovery-keys/attempts",responseType:i8A})),s8A=_A.type({userUuid:_A.string,accountUuid:_A.string,accountName:_A.string,accountType:_A.string,domain:_A.string,name:_A.string,email:_A.string,passwordRules:_A.string,accountUsesNewKeysets:_A.boolean,accountAuthMethods:_A.array(ku),disableEmergencyKit:_A.boolean}),l8A=_A.union([_A.type({attemptState:_A.union([_A.literal("KEY_VERIFIER_ACCEPTED"),_A.literal("EMAIL_VERIFICATION_PENDING")]),policySpecVersion:_A.string,custody:_A.string,aux:_A.type({verificationModes:_A.array(_A.string)})}),_A.type({attemptState:_A.literal("ID_VERIFICATION_COMPLETE"),policySpecVersion:_A.string,custody:_A.string,aux:s8A})],"RecoveryGetAttemptStatusResponse"),Y8j=_i(()=>({name:"recoveryKeyGetAttemptStatus",method:"GET",url:"/api/v2/recovery-keys/session/status",responseType:l8A,encrypted:!0})),Z8j=_A.exact(_A.type({email:_A.union([_A.string,_A.undefined])})),c8A=_A.exact(_A.type({sentToEmail:_A.string})),AOj=_i((A,j)=>({name:"recoveryKeyStartEmailVerification",method:"POST",url:`/api/v2/recovery-keys/session/identity-verification/email/start${A?"?resend=true":""}`,body:j,responseType:c8A,encrypted:!0})),jOj=_A.exact(_A.type({emailVerificationChallenge:_A.string})),eOj=_i(A=>({name:"recoveryKeySubmitEmailVerification",method:"POST",url:"/api/v2/recovery-keys/session/identity-verification/email/submit",body:A,responseType:L,encrypted:!0})),d8A=_A.exact(_A.type({encryptedKeyMaterial:_A.string,encryptedKeyset:ns}),"RecoveryGetMaterialResponse"),tOj=_i(()=>({name:"recoveryKeyGetMaterial",method:"GET",url:"/api/v2/recovery-keys/session/material",responseType:d8A,encrypted:!0})),rOj=_A.exact(_A.type({accountKeyFormat:_A.string,accountKeyUuid:_A.string,language:_A.string,device:bl.Type,keyset:ns,userAuth:BX,deviceCredentials:_A.union([_p,_A.undefined])})),k8A=_A.exact(_A.type({sessionUuid:_A.string,signInTokenDetails:_A.union([du,_A.undefined]),email:_A.string,userUuid:_A.string,accountUuid:_A.string})),aOj=_i(A=>({name:"recoveryKeyPostRegistration",method:"POST",url:"/api/v2/recovery-keys/session/complete",body:A,responseType:k8A,encrypted:!0}));var nj=J(tA());var _k=Z("web-api/api/identity.ts"),u8A=nj.readonly(nj.type({name:nj.string,website_url:nj.string,provision_tags:nj.array(nj.string),uuid:nj.string})),E8A=nj.readonly(nj.array(u8A)),p8A=nj.readonly(nj.type({identityAccessToken:nj.string})),yg;(function(A){let j;(function(c){c.Oidc="OIDC",c.Saml="SAML"})(j=A.SsoProtocolType||(A.SsoProtocolType={}));let e;(function(c){c.Group="group",c.User="user"})(e=A.ApplicationAssignmentResourceType||(A.ApplicationAssignmentResourceType={}));let t=pe(j,"SsoProtocolType"),r=pe(e,"ApplicationAssignmentResourceType"),a;(function(c){c.Active="active",c.Inactive="inactive",c.Pending="pending"})(a=A.ApplicationStatusType||(A.ApplicationStatusType={}));let n=pe(a,"ApplicationStatusType"),o=nj.readonly(nj.partial({allowed_redirect_uris:nj.array(nj.string),allowed_logout_uris:nj.array(nj.string),initiate_login_uri:nj.string,client_secret:nj.union([nj.string,nj.undefined])})),i=nj.readonly(nj.partial({configuration_type:nj.union([nj.literal("metadata"),nj.literal("explicit")]),service_provider_metadata_url:nj.union([nj.string,nj.undefined]),service_provider_metadata_xml:nj.union([nj.string,nj.undefined]),acs_url:nj.union([nj.string,nj.undefined]),entity_id:nj.union([nj.string,nj.undefined]),relay_state:nj.union([nj.string,nj.undefined]),name_id_format:nj.union([nj.string,nj.undefined]),logout_url:nj.union([nj.string,nj.undefined]),binding_type:nj.union([nj.string,nj.undefined]),user_attributes:nj.record(nj.string,nj.string),group_attributes:nj.record(nj.string,nj.string)})),s=nj.readonly(nj.partial({OidcConfiguration:nj.union([o,nj.undefined]),SamlConfiguration:nj.union([i,nj.undefined])})),l=nj.readonly(nj.type({resource_type:nj.union([r,nj.string]),resource_uuid:nj.string}));A.ManagedApplication=nj.readonly(nj.type({assignments:nj.union([nj.array(l),nj.undefined]),catalog_uuid:nj.union([nj.string,nj.undefined]),configuration:s,created_at:nj.string,kolide_enabled:nj.boolean,name:nj.string,status:n,type:nj.union([t,nj.string]),updated_at:nj.string,url:nj.union([nj.string,nj.undefined]),uuid:nj.string}),"SsoApplication"),A.ManagedApplicationsResponse=nj.readonly(nj.type({applications:nj.array(A.ManagedApplication)})),A.PatchManagedApplicationRequest=nj.readonly(nj.type({configuration:s,name:nj.string,type:nj.union([t,nj.string])}),"SsoApplication"),A.ManagedApplicationConfiguration=nj.readonly(nj.type({configuration:s,name:nj.string,type:nj.union([t,nj.string])}),"SsoApplication"),A.ManagedApplicationDisplayProperties=nj.readonly(nj.type({login_initiation_url:nj.string,name:nj.string,uuid:nj.string,service_provider_url:nj.string}))})(yg||(yg={}));var m8A=nj.readonly(nj.type({userApplications:nj.array(yg.ManagedApplicationDisplayProperties)},"UserApplication")),B8A=nj.readonly(nj.type({certificate:nj.string})),RjA=_k(()=>({name:"getAppCatalogApplications",method:"GET",url:"/api/v1/app-catalog/applications",responseType:E8A})),DjA=_k(()=>({name:"getIdentityAccessToken",method:"POST",url:"/api/v1/oidc/token",responseType:p8A})),TjA=_k(()=>({name:"getUserApplications",method:"GET",url:"/api/v1/user/applications",responseType:m8A})),CjA=_k(A=>({name:"createSsoApp",method:"POST",url:"/api/v1/idp/application",body:A,responseType:yg.ManagedApplication})),_jA=_k(A=>({name:"deleteSsoApp",method:"DELETE",url:`/api/v1/idp/applications/${A}`,responseType:L})),SjA=_k((A,j)=>({name:"patchSsoApp",method:"PATCH",url:`/api/v1/idp/applications/${A}`,body:j,responseType:yg.ManagedApplication})),HjA=_k(A=>{let j="/api/v1/idp/applications";return{name:"getAccountApplications",method:"GET",url:A?`${j}${nt({includeDeleted:A})}`:j,responseType:yg.ManagedApplicationsResponse}}),MjA=_k(A=>({name:"getApplicationDetails",method:"GET",url:`/api/v1/idp/applications/${A}`,responseType:yg.ManagedApplication})),KjA=_k((A,j)=>({name:"putApplicationGroupAssignment",method:"PUT",url:`/api/v1/applications/${A}/assign-groups`,body:{groupUuids:j},responseType:L})),NjA=_k(A=>({name:"patchApplicationDeviceCheckStatus",method:"PATCH",url:"/api/v1/idp/applications/device_check_status",body:A,responseType:L})),LjA=_k(()=>({name:"getAccountHandoffCertificate",method:"GET",url:"/api/v1/idp/account-certificate",responseType:B8A}));var g8A=Z("web-api/api/account_gated_feature_trials.ts"),zjA=g8A(A=>({name:"createAccountGatedFeatureTrialAction",method:"POST",url:"/api/v1/accountgatedfeaturetrial",body:A,responseType:L})),UjA=g8A(A=>({name:"updateAccountGatedFeatureTrialAction",method:"PATCH",url:"/api/v1/accountgatedfeaturetrial",body:A,responseType:L}));var Aa=J(tA());var h8A=Z("web-api/api/tracing.ts"),nOj=Aa.readonly(Aa.intersection([Aa.type({name:Aa.string,traceId:Aa.number,spanId:Aa.number,start:Aa.number,duration:Aa.number,service:Aa.string,resource:Aa.string,error:Aa.number}),Aa.partial({parentId:Aa.number,type:Aa.string,meta:Aa.record(Aa.string,Aa.string),metrics:Aa.record(Aa.string,Aa.number)})]),"PerfTrace"),VjA=Aa.readonly(Aa.type({success:Aa.number,reason:Aa.union([Aa.string,Aa.undefined])}),"TraceSubmissionResult"),XjA=h8A(A=>({name:"sendPerformanceTraces",method:"PUT",url:"/api/v2/perftrace",body:A,responseType:VjA})),JjA=h8A(A=>({name:"sendPreAuthPerformanceTraces",method:"PUT",url:"/api/v2/preauth-perftrace",body:A,responseType:VjA,encrypted:!1}));var IF=J(tA());var q8A=Z("web-api/api/xam.ts"),WjA=IF.readonly(IF.type({token:IF.string})),QjA=q8A(()=>({name:"getDeviceTrustAccessToken",method:"GET",url:"/api/v1/device-trust/token",responseType:WjA})),YjA=q8A(()=>({name:"getCentralAccountHubToken",method:"GET",url:"/api/v1/central-account-hub/token",responseType:WjA}));var or=J(tA());var oOj=Z("web-api/api/identity_verification.ts"),AS;(function(A){A.C="C",A.V="V",A.R="R"})(AS||(AS={}));var x8A=pe(AS,"ActionType"),ZjA=or.readonly(or.partial({city:or.string,country:or.string,countryCode:or.string,timeZone:or.string,latitude:or.number,longitude:or.number}),"RequesterLocation"),v8A=or.readonly(or.type({challengeUuid:or.string,requesterUserUuid:or.string,respondentUserUuid:or.string,action:x8A,expiresAt:or.union([or.string,or.undefined]),createdAt:or.string,requesterLocation:or.union([ZjA,or.undefined])}),"ActionSummary"),iOj=or.readonly(or.type({challengeUuid:or.string,requesterUserUuid:or.string,respondentUserUuid:or.string,status:or.union([or.literal("verified"),or.literal("rejected"),or.literal("expired"),or.literal("pending")]),createdAt:or.string,requesterLocation:or.union([ZjA,or.undefined])}),"VerificationEvent"),G8A=or.readonly(or.type({actions:or.array(v8A)}),"AdminIdentityVerificationResponse"),AeA=oOj(()=>({name:"getVerificationActionSummary",method:"GET",url:"/api/v1/identity-verification/account/actions",responseType:G8A}));var PF=J(tA());var f8A=Z("web-api/api/trustlog.ts"),jS=class extends Error{constructor(j,e){super(),this.code=j,this.name="RequestError",this.message=this.code+": "+e}},eS=A=>async({endpoint:j,method:e,body:t,encrypted:r=!0})=>{let a="/api/v1/atlas"+j,n=await A.request({name:p`atlasRequestCallback`,url:a,method:e,body:t,encrypted:r,options:{dataType:"json"}});if(!n.ok)throw new jS(n.status,await n.text());return n.json()},sOj=PF.readonly(PF.type({entry:PF.string},"EnableTrustLogRequest")),jeA=f8A(A=>({name:"enableTrustLog",method:"POST",url:"/api/v1/atlas/trustlog/enable",body:A,responseType:L})),eeA=f8A(()=>({name:"backfillTrustLog",method:"POST",url:"/api/v1/atlas/trustlog/backfill",responseType:L,options:{timeout:9e4}}));var aa=J(tA());var tS=Z("web-api/api/email_notifications.ts"),Qq;(function(A){A.InviteAccepted="inviteaccepted",A.RecoveryContinued="recoverycontinued"})(Qq||(Qq={}));var lOj=aa.readonly(aa.type({email:aa.string,name:aa.string,uuid:aa.string}),"EmailNotificationRecipientUser"),F8A=aa.readonly(aa.partial({users:aa.array(lOj),emails:aa.array(aa.string)}),"EmailNotificationRecipients"),teA=aa.readonly(aa.partial({inviteaccepted:F8A,recoverycontinued:F8A}),"EmailNotificationSettingsResponse"),mjt=aa.readonly(aa.type({templateName:aa.union([aa.literal(Qq.InviteAccepted),aa.literal(Qq.RecoveryContinued)])}),"ResetEmailNotificationSettingsRequest"),Bjt=aa.readonly(aa.partial({[Qq.InviteAccepted]:aa.readonly(aa.partial({user:aa.string,email:aa.string})),[Qq.RecoveryContinued]:aa.readonly(aa.partial({user:aa.string,email:aa.string}))}),"UpdateEmailNotificationSettingsRequest"),cOj=tS(()=>({name:"getEmailNotificationSettings",method:"GET",url:"/api/v1/email-notifications/settings",responseType:teA})),dOj=tS(A=>({name:"resetEmailNotificationSettings",method:"POST",url:"/api/v1/email-notifications/settings/reset",body:A,responseType:L})),kOj=tS(A=>({name:"updateEmailNotificationSettings",method:"PATCH",url:"/api/v1/email-notifications/settings",body:A,responseType:teA})),uOj=tS(A=>({name:"deleteEmailNotificationSettings",method:"DELETE",url:"/api/v1/email-notifications/settings",body:A,responseType:teA}));var Yq={};er(Yq,{Distributor:()=>rS,DistributorChangeOfChannel:()=>w8A,DistributorEntitlement:()=>I8A,DistributorInfo:()=>b8A,DistributorProduct:()=>$8A,getDistributor:()=>pOj,getDistributorEntitlementFromCode:()=>mOj,linkDistributorByEntitlementCode:()=>BOj});var Qp=J(tA());var EOj=Z("web-api/src/api/distributors/distributor.ts"),rS=Qp.partial({name:Qp.string,iconUrl:Qp.string,url:Qp.string},"Distributor"),b8A=Qp.partial({distributor:rS,activatedAt:Qp.string,status:Qp.string},"DistributorInfo"),pOj=EOj(()=>({name:"getDistributor",method:"GET",url:"/api/v1/distributor",responseType:b8A}));var Do=J(tA());var y8A=Z("web-api/api/distributors/entitlement.ts"),$8A=Do.partial({environment:Do.string,productId:Do.string,productSource:Do.string},"DistributorProduct"),w8A=Do.partial({onePasswordDomain:Do.string},"DistributorChangeOfChannel"),I8A=Do.readonly(Do.intersection([Do.type({companyName:Do.string,contactEmail:Do.string,distributor:rS,entitlementCode:Do.string,product:$8A,status:Do.string}),Do.partial({changeOfChannel:w8A})]),"DistributorEntitlement"),mOj=y8A(A=>({name:"getDistributorEntitlementFromCode",method:"GET",url:`/api/v1/distributors/entitlement/${A}/check`,encrypted:!1,responseType:I8A})),BOj=y8A(A=>({name:"linkDistributorByEntitlementCode",method:"POST",url:"/api/v1/distributors/link",body:{entitlementCode:A},responseType:L}));var ma={};er(ma,{PARSE_WATCHTOWER_REPORT_STEPS:()=>z8A,accountToAPI:()=>sS,billing:()=>hu,decryptDocument:()=>lS,decryptFile:()=>DF,encryptDocument:()=>ceA,encryptFile:()=>keA,fileId:()=>kS,groupToAPI:()=>Ax,packageFromAPI:()=>cS,packageToAPI:()=>EeA,packagesFromAPI:()=>ueA,parseAccount:()=>leA,parseAdminWatchtowerReports:()=>feA,parseAndDecryptVaultAccessList:()=>VI,parseFirewallRules:()=>deA,parseGroup:()=>iS,parseGroups:()=>RF,parsePerson:()=>Hk,parseProvisionedGroupKeyset:()=>M8A,parseProvisionedKeys:()=>meA,parseProvisionedVaultKey:()=>H8A,parseServiceAccount:()=>ex,parseVault:()=>us,parseVaults:()=>wg,personToAPI:()=>XI,recoverableKeysForPeopleFromAPI:()=>geA,reportSectionItemUsageFromApi:()=>dS,serviceAccountToApi:()=>eRj,signupFromAPI:()=>veA,userCookiesFromAPI:()=>GeA,userReportFromAPI:()=>heA,vaultAccessToAPI:()=>Rl,vaultItemFromAPI:()=>qu,vaultItemTemplateFromAPI:()=>$g,vaultItemTemplatesFromAPI:()=>oeA,vaultItemToApi:()=>JI,vaultItemsFromAPI:()=>Ig,vaultReportFromAPI:()=>qeA,vaultToAPI:()=>hd,vaultsReportFromAPI:()=>xeA,vaultsToAPI:()=>seA});var hu={};er(hu,{parseAvailableTiersFromAPI:()=>qOj,parseAvailableTiersV3:()=>xOj,parseTiersFromAPI:()=>P8A,subscriptionDetailAttrsFromAPI:()=>gOj,tierFromAPI:()=>OF});var gOj=A=>{let j=A.cards&&A.cards.length>0?A.cards.slice().sort(hOj):[];return{balance:A.balance||0,cards:j,pendingCreditAmount:A.pendingCreditAmount||0,plan:A.plan,coupon:A.coupon,nextInvoice:A.nextInvoice,hasInvoices:A.hasInvoices,stripe:A.subscription,purchaseOrder:A.purchaseOrder,stripePurchaseOrder:A.stripePurchaseOrder,customerAddress:A.customerAddress,pendingPaymentMethods:A.pendingPaymentMethods||[],billingStats:A.billingStats}},hOj=(A,j)=>A.expYear!==j.expYear?j.expYear-A.expYear:A.expMonth!==j.expMonth?j.expMonth-A.expMonth:A.name!==j.name?A.name.localeCompare(j.name):A.stripeCardUid.localeCompare(j.stripeCardUid);var qOj=(A,j)=>{if(!A||A.length===0)return[];let e=[];for(let t of A){let r=OF(t);j.tier&&j.tier.name===r.name&&(j.tier.plans=r.plans,r.sortOrder=-1),e.push(r)}return aD(e,"sortOrder")},xOj=A=>({currentTier:OF(A.currentTier),listOfTiers:P8A(A.listOfTiers)}),P8A=A=>A.map(j=>OF(j)),OF=(A,j)=>{let e=A.features.reduce((i,s)=>({...i,[s]:!0}),Eq.getBlankTier().hasFeature),t=A.gatedFeatures.reduce((i,s)=>({...i,[s]:!0}),Eq.getBlankTier().hasGatedFeature),r=[];A.plans&&(r=aD(A.plans,"sortOrder"));let a=[];A.tierChangeRestrictions.length>0&&(a=A.tierChangeRestrictions);let{successorTierName:n}=A,o={...qi(A,["features"]),...qi(A,["gatedFeatures"]),marketingText:{...A.marketingText,localizedFeatures:A.marketingText.localizedFeatures},successorTierName:n,hasFeature:e,hasGatedFeature:t,plans:r,tierChangeMappings:a};return o.plans.length===0&&j&&j.plans&&j.plans.length>0&&j.name===o.name&&(o.plans=j.plans),o};var LI=async A=>await JV(A.session);var zI=(A,j)=>({getEntry:fOj(A.id,j),getEntries:GOj(A.id,j),saveEntry:FOj(A.id,j),saveEntries:O8A(A.id,j)}),aS=A=>{let j=vOj();return Zq={...Zq,[A]:j},j},Zq={},vOj=()=>({keysets:{}}),reA=(A,j)=>(Zq[A]||aS(A))[j],GOj=(A,j)=>()=>reA(A,j),fOj=(A,j)=>e=>reA(A,j)[e],FOj=(A,j)=>(e,t)=>{O8A(A,j)({[e]:t})},O8A=(A,j)=>e=>{let t=reA(A,j);Zq={...Zq,[A]:{...Zq[A],[j]:fy({},t,e)}}},aeA=()=>{Zq={}};var bOj="action/keyset",neA=ij(bOj),nS=(A,j)=>{let e=Ca(j,"uuid");zI(A,"keysets").saveEntries(e)},Sk=async(A,j)=>neA("decryptKeysets",async()=>{let e=A.user&&A.user.masterKey,t=Ca(j,n=>n.uuid),r=zI(A,"keysets"),a=Promise.resolve([]);for(let n of j)a=a.then(async o=>R8A(n.uuid,t,r,e).then(i=>(A.user&&n.encryptedBy===e?.KID()&&(A.user.activeKeyset=i,A.user.pubKey=i.ekeyPair.pubKey),[...o,i])));return a}),Y6=(A,j)=>zI(A,"keysets").getEntry(j),R8A=async(A,j,e,t,r=0)=>neA("getDecryptedKeyset",async()=>{if(r>50)throw new Error("Infinite loop!");let a=e.getEntry(A);if(a)return a;let n=j[A];if(n)return yOj(n,j,e,t,r+1).then(o=>(e.saveEntry(o.uuid,o),o));throw new Error("Could not find keyset. <"+A+">")}),yOj=async(A,j,e,t,r=0)=>neA("decryptKeysetFindParent",async()=>{if(A.encryptedBy===t?.KID())return t?Ya.decryptWithKey(t,A):Promise.reject(new Error("Missing master key"));let a=A.encryptedBy||A.encSymKey.kid;if(!a)throw new Error("Missing encryptedBy.");if(a===A.uuid)throw new Error("Keyset is self-encrypted.");return R8A(a,j,e,t,r).then(async n=>Ya.decryptWithKeyset(n,A))}),UI=async A=>{if(!A.user)return;let j=A.accountOverview;if(A.accountOverview=await LI(A),!j||A.accountOverview&&A.accountOverview.keysetVersion!==j.keysetVersion)return oS(A)},oS=async A=>{let{keysets:j}=await aW(A.session);if(!A.user)throw new Error("Missing user");if(!A.user.masterKey){let e=j.find(r=>r.encryptedBy===gp);if(!e)throw new Error("Could not find active keyset");let t=iw(e.encSymKey);A.user.masterKey=await rr.derive(t,A.user.getCredentials())}return Sk(A,j)};var Rl=A=>{if(!A.acl||me.isEffectivelyZero(A.acl))throw new Error("invalid vault acl");if(!A.encVaultKey)throw new Error("missing vault access key");return{vaultUuid:A.vaultUuid,accessorType:A.accessorType,accessorUuid:A.accessorUuid,acl:A.acl,leaseTimeout:A.leaseTimeout,vaultKeySN:A.vaultKeySN,encryptedBy:A.encVaultKey.kid,encVaultKey:A.encVaultKey}};var oeA=A=>A.map($g).sort(Fi.strings(j=>j.uuid)),$g=A=>{let j=A.uuid||A.templateUuid||"",e={uuid:j,localizedStrings:{},contents:[],...A.attrs};return{...A,uuid:j,sidebarIcon:A.sourceIcon,attrs:e}};var $Oj="parser/vault",ieA=ij($Oj),wg=async(A,j)=>ieA("parseVaults",async()=>j?Promise.all(j.map(async e=>us(A,e))):[]),D8A=async(A,j,e)=>ieA("parseAndDecryptVaultAccessRecord",async()=>{let t=new wt({...e,vaultUuid:j.uuid});if(!t.encVaultKey)return t;let r=Y6(A,t.encVaultKey.kid);return r?t.decryptVaultKey(r).then(a=>(j.activeKey||(j.activeKey=a),t)).catch(a=>(console.error("parser/vault#parseAndDecryptVaultAccessRecord",a),t)):t}),wOj=A=>new sj({uuid:A,name:"",type:sj.TypeClientPlaceholder,desc:""}),VI=async(A,j)=>ieA("parseAndDecryptVaultAccessList",async()=>{if(!j)return Promise.resolve(void 0);if(j.length===0)return Promise.resolve([]);let e=yn(j,async t=>D8A(A,wOj(t.vaultUuid),t));return Promise.all(e)}),us=async(A,j,e,t)=>{let r=t||new sj({uuid:j.uuid,name:"",type:j.type,desc:""});if(r.createdAt=vr(j.createdAt),r.updatedAt=vr(j.updatedAt),r.attrVersion=j.attrVersion,r.contentVersion=j.contentVersion,r.activeItemCount=j.activeItemCount||0,r.clientAccess=j.clientAccess||Kj.empty(),j.previewUsers&&(r.previewUsers=j.previewUsers.slice()),j.previewGroups&&(r.previewGroups=j.previewGroups.slice()),j.itemCategories&&(r.itemTemplates=oeA(j.itemCategories.slice())),j.combinedAccess&&r.setCombinedAcl(j.combinedAccess.acl),!j.access)throw new Error(`Missing vault access information: ${j.uuid}`);let a=j.access.map(async o=>D8A(A,r,o)),n=await Promise.all(a);return r.setAccessList(n),await r.decryptAttrs(j.encAttrs),e&&r.addAttrMask(e),r},seA=(A,j)=>{let e=j?sp(j,"vaultUuid"):{};return A.map(t=>hd(t,e[t.uuid]))},hd=(A,j)=>{if(!A.uuid)throw new Error("Vault missing uuid");if(!A.encAttrs)throw new Error("Vault missing EncAttrs");if(!A.type)throw new Error("Vault missing type");return{uuid:A.uuid,type:A.type,attrVersion:A.attrVersion,contentVersion:A.contentVersion,encAttrs:A.encAttrs,access:j&&j.length>0?j.map(Rl):void 0}};var IOj="parser/group",T8A=ij(IOj),RF=async(A,j)=>T8A("parseGroups",async()=>Promise.all(j.map(async e=>iS(A,e)))),iS=async(A,j,e,t)=>T8A("parseGroup",async()=>{let r={uuid:j.uuid,name:j.name,desc:j.desc,type:j.type,activeKeysetUuid:j.activeKeysetUuid,createdAt:vr(j.createdAt),updatedAt:vr(j.updatedAt),attrVersion:j.attrVersion,avatar:j.avatar,permissions:j.permissions,userCount:j.userCount,sso:j.sso},a=t||new IA(r);t&&a.setOverview(r),j.recoverableKeyset&&(a.recoverableKeyset=j.recoverableKeyset);let n=Promise.resolve(),o;return j.pubKey&&(o=new Zr(j.pubKey.kid,void 0,j.pubKey),n=o.import()),n.then(async()=>(a.clearCachedAccessInfo(),j.memberships&&(a.memberships=j.memberships),o&&(a.pubKey=o),e&&a.addAttrMask(e),j.vaultAccess&&j.vaultAccess.length>0?VI(A,j.vaultAccess).then(i=>{i&&a.setVaultAccessList(i)}).catch(i=>{throw console.error("Failed to parse accessList:",i),i}):Promise.resolve())).then(async()=>j.recoveryKeyset?(a.recoveryKeyset=j.recoveryKeyset,Y6(A,j.activeKeysetUuid)&&a.type!==IA.TypeRecovery?Sk(A,[a.recoveryKeyset]).catch(async()=>Promise.resolve()):Promise.resolve()):Promise.resolve()).then(async()=>Promise.resolve(a))}),Ax=(A,j)=>{let e={uuid:A.uuid,name:A.name,type:A.type,desc:A.desc,activeKeysetUuid:A.activeKeysetUuid||"",attrVersion:A.attrVersion,recoverableKeyset:A.recoverableKeyset,recoveryKeyset:A.recoveryKeyset,avatar:A.avatar,permissions:A.permissions};if(A.archivedKeysets.length>0&&(e.archivedKeysets=A.archivedKeysets),(j&IA.Attr.PubKey)!==0&&A.pubKey&&(e.pubKey=A.pubKey.jwk),(j&IA.Attr.Memberships)!==0&&(e.memberships=A.memberships),(j&IA.Attr.VaultAccess)!==0){let t=A.getUnsafeVaultAccessList();t&&t.length>0&&(e.vaultAccess=t.map(Rl))}return e};var POj="parser/person",C8A=ij(POj),OOj=async A=>C8A("_importPubKey",async()=>A?new Zr(A.kid,void 0,A).import():Promise.resolve(void 0)),Hk=async(A,j,e=0,t)=>C8A("parsePerson",async()=>{let r=ROj(j),a=t?t.setAttrs(r):new zr(r);a.addAttrMask(e);let n=j.personalItemsCount;n&&(a.personalItemsCount=n);let o=j.devices;o&&(a.devices=o);let i=j.proposedEmail;return i&&(a.proposedEmail=i),j.memberships&&j.memberships.length>0&&(a.groupMemberships=j.memberships),OOj(j.pubKey).then(async s=>(s&&(a.pubKey=s),VI(A,j.vaultAccess))).then(s=>(s&&(a.vaultAccessList=s),a))}),ROj=A=>{let j=A.csToken??void 0;return{uuid:A.uuid,name:A.name,state:A.state,type:A.type,attrVersion:A.attrVersion,keysetVersion:A.keysetVersion,language:A.language,avatar:A.avatar,combinedPermissions:A.combinedPermissions,newsletterPrefs:A.newsletterPrefs,preferences:A.preferences,externalGUID:A.externalGUID||"",hasMFAEnabled:A.hasMFAEnabled,email:A.email,createdAt:vr(A.createdAt),updatedAt:vr(A.updatedAt),lastAuthAt:vr(A.lastAuthAt),csToken:j}},XI=A=>({uuid:A.uuid,email:A.email,name:A.name,attrVersion:A.attrVersion,keysetVersion:A.keysetVersion,state:A.state,type:A.type,avatar:A.avatar,language:A.language,newsletterPrefs:A.newsletterPrefs,preferences:A.preferences,externalGUID:A.externalGUID,hasMFAEnabled:A.hasMFAEnabled,keysets:null,memberships:null,vaultAccess:null,devices:null,personalItemsCount:null});var DOj="parser/account",TOj=ij(DOj),leA=async(A,j)=>TOj("parseAccount",async()=>{if(!j)return Promise.reject(new Error("Server JSON is empty"));A.account?A.account.setAttrs(j):A.account=new Et(j);let e=A.account;if(A.account.createdAt=vr(j.createdAt),j.me&&A.setUserUUID(j.me.uuid),j.billing){A.account.trialStartedAt=vr(j.billing.trialStartedAt),A.account.trialDays=j.billing.trialDays;let n=j.tier?OF(j.tier,A.account.subscription.tier):A.account.subscription.tier,o={billingCompanyName:"",billingAddress:"",billingEmails:"",billingPurchaseOrderNumber:""};A.account.subscription={...A.account.subscription,freezesAt:j.billing.freezesAt,guests:j.billing.guests,members:j.billing.members,provider:j.billing.provider,status:j.billing.status,storageUsed:j.storageUsed||0,tier:n,settings:{...o,...j.billing.settings}}}j.meta&&(A.account.meta=j.meta),j.promotions&&(A.account.promotions=j.promotions),j.counts&&(A.account.counts=j.counts);let t=Promise.resolve();if(!A.user)return Promise.reject(new Error("Missing user"));if(j.gatedFeatureTrials&&(A.account.gatedFeatureTrials=j.gatedFeatureTrials),j.mspInfo&&(A.account.mspInfo=j.mspInfo),j.groups){let n=j.groups;t=t.then(async()=>RF(A,n)).then(o=>{e.setGroups(o)})}let a;if(j.me){let n=j.me;t=t.then(async()=>{let o=zr.Attr.PubKey|zr.Attr.Groups|zr.Attr.VaultAccess;return Hk(A,n,o,A.user)}).then(async o=>{let i=o&&Dj.isExternalAccountManagement(o);return!A.config.inWebView&&!i&&(A.session.setLanguage(o.language),A.nc.emit(Vt.LanguageRefreshed)),a=o,Promise.resolve([])})}return t.then(async()=>A.account?Promise.resolve({account:A.account,activeUser:a}):Promise.reject(new Error("Missing account")))}),sS=A=>{if(!A.uuid)throw new Error("Account missing uuid");if(!A.type)throw new Error("Account missing type");return{uuid:A.uuid,type:A.type,attrVersion:A.attrVersion,avatar:A.avatar,createdAt:ls(A.createdAt),domain:A.domain,invite:{inviteEmailDomains:A.inviteEmail,inviteSecret:A.inviteSecret},name:A.name,state:A.state,trialStartedAt:ls(A.trialStartedAt),trialDays:A.trialDays,settings:A.settings,billingSettings:A.subscription.settings}};var lS=async(A,j)=>{let e=A.encryptionKey;if(!e.alg)throw new Error("Missing key algorithm");let t=e.alg,r=Ot(e.kid),a=new Uint8Array(j);if(await _8A(a)!==HD(A.integrityHash))throw new Error("Integrity hash does not match.");return await r.importRawKey(t,ej(e.k)),r.decryptFile({data:a,iv:A.nonce})},ceA=async(A,j)=>{let e=Ot(),t=await e.generate(Nt),r=new Uint8Array(A),{data:a,iv:n}=await e.encryptFile(r);if(!n)throw new Error("Missing nonce");return{data:a.buffer,attributes:{documentId:"",encryptedSize:a.byteLength||0,encryptionKey:t,fileName:j||"",integrityHash:await _8A(a),nonce:n,unencryptedSize:A.byteLength||0}}},_8A=async A=>{let j=await $A.subtle.digest({name:"SHA-256"},A);return Aj(new Uint8Array(j))};var COj="parser/firewall_rules",_Oj=ij(COj),deA=async A=>_Oj("parseFirewallRules",async()=>{let j=[],e=[],t=[];if(A.rules===null)return{globalRules:j,groupRules:e};for(let r of A.rules){if(r===void 0)continue;let a={type:r.type,scope:r.scope,value:r.value,action:r.action};if(r.scope&&r.scope.length>1)throw new Error("More firewall scopes than expected. Scope may only be either 'Global' or 'Group'");if(r.scope===void 0||r.scope[0]?.type===lu.Global){j.push(a);continue}if(r.scope[0]?.type===lu.Group){let n=t[0]?.scope&&t[0]?.scope[0]?.uuid?t[0].scope[0]?.uuid:"";if(t.length===0){t.push(a);continue}if(r.scope[0]?.uuid===n){t.push(a);continue}let o={rules:[...t],groupUuid:n};e.push(o),t.length=0,t.push(a)}}if(t.length!==0){let r={rules:[...t],groupUuid:t[0]?.scope&&t[0]?.scope[0]?.uuid?t[0].scope[0]?.uuid:""};e.push(r)}return{globalRules:j,groupRules:e}});var DF=async(A,j)=>{let e=A.encryptionKey;if(!e.alg)throw new Error("Missing key algorithm");let t={kid:e.kid,enc:e.alg,cty:ow,iv:A.nonce,data:Aj(new Uint8Array(j))},r=Ot(e.kid);return await r.importRawKey(e.alg,ej(e.k)),r.decrypt(t)},keA=async A=>{let j=Ot();await j.generate(Nt);let e=await j.encrypt(new Uint8Array(A)),t=ej(e.data);if(!e.iv)throw new Error("Missing iv");if(!j.jwk)throw new Error("No encryption key.");return{data:t.buffer,attributes:{fileId:"",encryptionKey:j.jwk,nonce:e.iv}}};var SOj="parser/package",S8A=ij(SOj),ueA=async(A,j,e,t)=>S8A("packagesFromAPI",async()=>!e||e.length===0?[]:Promise.all(e.map(async r=>cS(A,j,r,t))).catch(()=>[])),cS=async(A,j,e,t)=>S8A("packageFromAPI",async()=>{let r=await t([e.senderUuid,e.recipientUuid]),a=r.find(c=>c.uuid===e.recipientUuid),n=r.find(c=>c.uuid===e.senderUuid);if(!a||!n)throw new Error("Missing recipient or sender.");let o=await cs(n.pubKey),i=new zr({uuid:n.uuid});i.pubKey=o;let s=new Wq(i,a);if(s.uuid=e.uuid,s.createdAt=vr(e.createdAt),s.updatedAt=vr(e.updatedAt),s.itemUuid=e.itemUuid,s.itemVersion=e.itemVersion,s.templateUuid=e.templateUuid,s.clientCreatedAt=vr(e.clientCreatedAt),s.clientUpdatedAt=vr(e.clientUpdatedAt),s.encKey=e.encKey,s.recoverableEncKey=e.recoverableEncKey,s.encOverview=e.encOverview,s.encDetails=e.encDetails,s.signature=e.signature,!A.user)throw new Error("Missing user");let l=a.uuid===A.user.uuid&&A.user.activeKeyset;return l?s.verifyAndDecrypt(j,l):s}),EeA=A=>{if(!A.item)throw new Error("Missing item");if(!A.encKey)throw new Error("Missing encKey");if(!A.recoverableEncKey)throw new Error("Missing recoverableEncKey");if(!A.encOverview)throw new Error("Missing encOverview");if(!A.signature)throw new Error("Missing signature");if(!A.item.templateUuid)throw new Error("Missing template UUID");let j={uuid:A.uuid,senderUuid:A.sender.uuid,recipientUuid:A.recipient.uuid,sourceVaultUuid:A.item.vault.uuid,itemUuid:A.item.uuid,itemVersion:A.item.itemVersion,templateUuid:A.item.templateUuid,encKey:A.encKey,recoverableEncKey:A.recoverableEncKey,encOverview:A.encOverview,encDetails:A.encDetails,signature:A.signature};return A.createdAt&&(j.createdAt=ls(A.createdAt)),A.updatedAt&&(j.updatedAt=ls(A.updatedAt)),A.item.createdAt&&(j.clientCreatedAt=ls(A.item.createdAt)),A.item.updatedAt&&(j.clientUpdatedAt=ls(A.item.updatedAt)),j};var HOj="parser/provisioned_keys",peA=ij(HOj),H8A=async(A,j)=>peA("parseProvisionedVaultKey",async()=>Ot().decryptWithKeyset(j,A.encVaultKey).then(e=>(e.sn=A.vaultKeySN,new OI(A.vaultUuid,e)))),M8A=async(A,j)=>peA("parseProvisionedGroupKeyset",async()=>Ya.decryptWithKeyset(j,A.keyset).then(e=>new RI(A.groupUuid,e))),meA=async(A,j)=>peA("parseProvisionedKeys",async()=>{let e=Y6(A,j.keyset.encryptedBy);return e?Ya.decryptWithKeyset(e,j.keyset).then(async t=>{let r=Promise.all(yn(j.vaultKeys,async n=>H8A(n,t))),a=Promise.all(yn(j.groupKeysets,async n=>M8A(n,t)));return Promise.all([r,a])}).then(([t,r])=>new DI(t,r)):Promise.reject(new Error("Missing keyset for decrypting provisioned user keyset"))});var MOj="parser/recoverable_keys",BeA=ij(MOj),KOj=async(A,j)=>BeA("recoverableVaultKeyFromAPI",async()=>{let e=Y6(A,j.encryptedBy);return e?Ot().decryptWithKeyset(e,j.encVaultKey).then(t=>(t.sn=j.vaultKeySN,new TI(j.vaultUuid,t))):Promise.reject(new Error("Could not find keyset"))}),NOj=async(A,j)=>BeA("recoverableGroupKeysetFromAPI",async()=>{let e=Y6(A,j.keyset.encryptedBy);return e?Ya.decryptWithKeyset(e,j.keyset).then(t=>new CI(j.groupUuid,t)):Promise.reject(new Error("Could not find keyset"))}),LOj=async(A,j)=>BeA("recoverablePackageKeyFromAPI",async()=>{let e=Y6(A,j.key.kid);return e?Ot().decryptWithKeyset(e,j.key).then(t=>new _I(j.packageUuid,t)):Promise.reject(new Error("Could not find keyset"))}),zOj=async(A,j)=>{let[e,t,r]=await Promise.all([Promise.all(j.vaultKeys.map(async a=>KOj(A,a))),Promise.all(j.groupKeysets.map(async a=>NOj(A,a))),Promise.all(j.packageKeys.map(async a=>LOj(A,a)))]);return new SI(e,t,r)},geA=async(A,j)=>{let e=j.keys.map(async r=>zOj(A,r)),t=await Promise.all(e);return new HI(t)};var UOj="parser/vault_item",K8A=ij(UOj),dS=async(A,j)=>{if(j.itemUsages.length===0)return[];let e=Yr(q6(j.vaults)),t=Ca(await Promise.all(yn(e,async n=>us(A,n))),"uuid"),r={};return(await Promise.all(j.itemUsages.map(async n=>{let o=j.vaultItems[n.itemUuid];if(!o)return;let i=t[n.vaultUuid];if(i&&!r[n.itemUuid])return qu(o,i)}))).forEach(n=>{n&&(r[n.uuid]=n)}),Yr(j.itemUsages.map(n=>{let o=r[n.itemUuid];if(o!==void 0)return{...n,vaultItem:o}}))},Ig=async(A,j)=>K8A("vaultItemsFromAPI",async()=>Promise.all(A.map(async e=>qu(e,j)))),qu=async(A,j)=>K8A("vaultItemFromAPI",async()=>{let e=j instanceof sj?new kA(j,void 0,A.uuid):j;return e.templateUuid=A.templateUuid,e.faveIndex=A.faveIndex||0,e.state=A.trashed||"",e.createdAt=vr(A.createdAt),e.updatedAt=vr(A.updatedAt),e.changerUuid=A.changerUuid||"",e.itemVersion=A.itemVersion,e.encryptedBy=A.encryptedBy,e.decrypt(A.encOverview,A.encDetails)}),JI=async A=>{let j=await A.encrypt();if(!j.templateUuid)throw new Error("Missing templateUuid");if(!j.encryptedBy)throw new Error("Missing encryptedBy");if(!j.encOverview)throw new Error("Missing encOverview");let e={uuid:j.uuid,templateUuid:j.templateUuid,packageUuid:j.packageUuid,itemVersion:j.itemVersion,encryptedBy:j.encryptedBy,encOverview:j.encOverview,encDetails:j.encDetails,trashed:j.state};j.updatedAt&&(e.updatedAt=ls(j.updatedAt)),j.createdAt&&(e.createdAt=ls(j.createdAt)),typeof j.faveIndex=="number"&&j.faveIndex>0&&(e.faveIndex=j.faveIndex);let t=Zc(A.details.sections??[],r=>Yr((r.fields??[]).map(a=>kA.getDocumentAttributesFromField(a))));return e.fileReferences=CB([j.details.documentAttributes,j.overview?.icons?.detail,...t].map(r=>{if(!r)return;if(!r.signingKey){console.error(new Error("Cannot handle file with no signing key"));return}let a=new GI(kS(r),r.signingKey);return{fileId:a.fileId,signature:a.signReference(j.uuid,j.itemVersion)}})),e},kS=A=>A.documentId||A.fileId;var VOj="parser/report",jx=ij(VOj),XOj=yn,JOj=async(A,j,e)=>jx("parseUserOverview",async()=>j?Hk(A,j.user,void 0,e).then(t=>({user:t,groupCount:j.groupCount,vaultCount:j.vaultCount,itemCount:j.itemCount})):Promise.resolve(void 0)),WOj=async(A,j)=>jx("parseVaultOverview",async()=>j?us(A,j.vault).then(e=>({vault:e,userCount:j.userCount,groupCount:j.groupCount,currentUserUuids:j.currentUserUuids})):Promise.resolve(void 0)),QOj=async(A,j)=>jx("parseUserItemUsage",async()=>j?wg(A,j.vaults).then(async e=>{let t=Ca(e,"uuid"),r=XOj(j.vaultItemsByVault,async(a,n)=>{let o=t[n];if(o&&a&&a.length>0)return Ig(a,o)});return CB(await Promise.all(r))}).then(e=>{let t=ik(e);return{itemUsages:N8A(t,j.itemUsages)}}):Promise.resolve(void 0)),YOj=async(A,j)=>jx("parseVaultItemUsage",async()=>j?us(A,j.vault).then(async e=>e?Ig(j.vaultItems,e):Promise.reject(new Error("Server vault is empty"))).then(e=>({itemUsages:N8A(e,j.itemUsages),usersByUserUuid:j.usersByUserUuid})):Promise.resolve(void 0)),heA=async(A,j,e)=>jx("userReportFromAPI",async()=>{if(!j)return Promise.reject(new Error("Server JSON is empty"));let{overview:t,itemUsage:r}=j,[a,n]=await Promise.all([JOj(A,t,e),QOj(A,r)]);return{overview:a,itemUsage:n}}),qeA=async(A,j)=>jx("vaultReportFromAPI",async()=>{if(!j)return Promise.reject(new Error("Server JSON is empty"));let{overview:e,itemUsage:t}=j,[r,a]=await Promise.all([WOj(A,e),YOj(A,t)]);return{overview:r,itemUsage:a}}),xeA=async(A,j)=>jx("vaultsReportFromAPI",async()=>{if(!j)return Promise.reject(new Error("Server JSON is empty"));let e=j.items.map(async t=>{let r=await us(A,t.vault);return{...t,vault:r}});return Promise.all(e)}),N8A=(A,j)=>{let e=Ca(A,"uuid");return j.map(t=>{let r=e[t.itemUuid];if(r===void 0)throw new Error("itemUsagesFromApi: vaultItem not found");return{...t,vaultItem:r}})};var ZOj="parser/serviceaccounts",ARj=ij(ZOj),ex=async(A,j=0,e)=>ARj("parseServiceAccount",async()=>{let t=jRj(A),r=e?new ks({...e,...t}):new ks(t);return r.addAttrMask(j),A.tokens&&A.tokens.length>0&&(r.tokens=[...A.tokens]),r}),jRj=A=>({uuid:A.uuid,name:A.name,state:A.state,type:A.type,attrVersion:A.attrVersion,keysetVersion:A.keysetVersion,language:A.language,permissions:A.permissions,avatar:A.avatar,combinedPermissions:A.combinedPermissions,newsletterPrefs:A.newsletterPrefs,preferences:A.preferences,externalGUID:A.externalGUID||"",email:A.email,createdAt:vr(A.createdAt),updatedAt:vr(A.updatedAt),lastAuthAt:vr(A.lastAuthAt),creatorUuid:A.creatorUuid,serviceAccountType:A.serviceAccountType,serviceAccountVaultAccess:A.serviceAccountVaultAccess?tRj(A.serviceAccountVaultAccess):void 0,billables:A.billables,rotatedAt:vr(A.rotatedAt),expiresAt:vr(A.expiresAt)}),eRj=A=>({uuid:A.uuid,name:A.name,state:A.state,type:A.type,attrVersion:A.attrVersion,keysetVersion:A.keysetVersion,language:A.language,avatar:A.avatar,permissions:A.permissions,combinedPermissions:A.combinedPermissions,newsletterPrefs:A.newsletterPrefs,preferences:A.preferences,externalGUID:A.externalGUID||"",email:A.email,creatorUuid:A.creatorUuid,serviceAccountType:A.serviceAccountType}),tRj=({totalVaults:A,displayable:j})=>({totalVaults:A,displayable:j.map(e=>new wt(e))});var veA=A=>({availablePlans:A.availablePlans||[],completedAt:vr(A.completedAt),createdAt:vr(A.createdAt),domain:A.domain,email:A.email,expiresAt:vr(A.expiresAt),language:A.language,name:A.name,source:A.source,state:A.state,promoCode:A.promoCode,tierName:A.tierName,defaultBillingFrequency:A.defaultBillingFrequency,trialEndsAt:vr(A.trialEndsAt),type:A.type,uuid:A.uuid,stepUuid:A.stepUuid,features:A.features,duplicateAccounts:A.duplicateAccounts,flowServiceUuid:A.flowServiceUuid,setupIntentCode:A.setupIntentCode});var GeA=A=>A.map(j=>new NI({userUuid:j.userUuid,userEmail:j.userEmail,userName:j.userName,userAvatarURL:j.userAvatarURL,usingMyDomain:!!j.usingMyDomain,accountUuid:j.accountUuid,accountType:j.accountType,accountName:j.accountName,accountDomain:j.accountDomain,accountAvatarURL:j.accountAvatarURL,hasPrioritySupport:!!j.hasPrioritySupport}));var L8A=p`parser/admin_watchtower`,rRj=ij(L8A.str),z8A=2,feA=async(A,j,e,t)=>{let r=!!A.account?.hasBackOfficeFeature.itemsInWrongAccountPolicy;return(await rRj("parseAdminWatchtowerReports",async()=>Promise.all(j.map(async n=>{try{return await aRj(A,n,e,r,t)}catch(o){if(t!==void 0)for(let i=0;i<z8A;i++)t();return}})))).filter(n=>n!==void 0)},aRj=async(A,j,e,t,r)=>{if(!e.data)throw new Error("Admin Watchtower decryption key does not exist");let a=await nRj(e.data.ePriKey,j.encData,r),n=await oRj(A,j.vaultData,r),o=a.cw+a.rp+(a.vp??0)+a.wp+(a.uw??0)+a.i2fa+a.exp+(t&&a.wa||0);return{uuid:j.uuid,vaultUuid:j.vaultUuid,vaultType:j.vaultType,vaultName:j.vaultName,combinedAcl:j.vaultData?.combinedAcl,updatedAt:j.updatedAt,isOutdated:j.isOutdated,reportData:a,totalIssues:o,vaultAttrs:n}},nRj=async(A,j,e)=>{let t=await wI(A,j),r=cj(t.content,Ne.pipe(ajA)).unwrap();return e?.(),r},oRj=async(A,j,e)=>{if(j===void 0){e?.();return}let t=Y6(A,j.encVaultKey.kid);if(!t)throw new Error("No vault access keyset found");let n=await(await Ot().decryptWithKeyset(t,j.encVaultKey)).decrypt(j.encVaultAttrs),o=cj(n,Ne).unwrap(),i=cj(o,X_,{mode:"unsafe_report_only",file:L8A,func:p`parseAndDecryptVaultAttrs`}).unwrap();return e?.(),i};var NOA=J(Wo());var Yp=J(tA());var U8A=1e3,iRj=3e4,sRj=3e5,V8A=Yp.readonly(Yp.type({account:Yp.string,user:Yp.string,device:Yp.string,session:Yp.string}),"ServerNotification"),uS=class{constructor(j,e){this.connect=t=>{if(!t){console.warn("Notifier not available");return}""+t,this.websocket=new WebSocket(t),this._closing=!1,this.websocket.addEventListener("open",()=>{""+t,(this._disconnected===void 0||this._disconnected&&Date.now()-this._disconnected>sRj)&&this.connectHandler(),this._disconnected=void 0}),this.websocket.addEventListener("close",()=>{if(""+t,this.websocket=void 0,!this._closing){this._notifierReconnectDelay*=1.3;let r=this._notifierReconnectDelay;if(!this._disconnected){this._disconnected=Date.now();let a=s6(0,this._notifierReconnectJitter);r+=a}`${r}`,setTimeout(()=>this.connect(t),r)}}),this.websocket.addEventListener("message",r=>{this._notifierReconnectDelay=U8A,this.eventHandler(r)})},this.disconnect=()=>{this._closing=!0,this.websocket?.close(),this.websocket=void 0},this.eventHandler=j,this.connectHandler=e,this._notifierReconnectDelay=U8A,this._notifierReconnectJitter=iRj,this._closing=!1}};var X8A=ic,lRj=q6,Ls=()=>({contexts:{},getAllEntries(A){return cRj(this,A)},getEntry(A,j,e){return kRj(this,A,j,e)},withEntries(A,j,e){return uRj(this,A,j,e)},withOnlyEntries(A,j,e){return ERj(this,A,j,e)},withoutEntries(A,j){return pRj(this,A,j)},withoutContext(A){return mRj(this,A)}}),beA=A=>{FeA={...FeA,[A]:Date.now()}},cRj=(A,j)=>{let e=A.contexts[j];if(e&&e.timestamp>W8A(j))return yn(lRj(e.entries),t=>t.value)},dRj=A=>({attrMask:0,...A}),kRj=(A,j,e,t)=>{let{attrMask:r}=dRj(t),a=A.contexts[j],n=a&&a.entries[e];if(n&&n.timestamp>W8A(j)&&(n.attrMask&r)===r)return n.value},J8A=A=>({attrMask:0,timestamp:Date.now(),...A}),uRj=(A,j,e,t)=>{let{attrMask:r,timestamp:a}=J8A(t),n=A.contexts[j],o=n&&n.entries||{},i=X8A(e,l=>({attrMask:r,value:l,timestamp:a})),s={...o,...i};return yeA(A,j,{entries:s})},ERj=(A,j,e,t)=>{let{attrMask:r,timestamp:a}=J8A(t),n=X8A(e,o=>({attrMask:r,value:o,timestamp:a}));return yeA(A,j,{entries:n,timestamp:a})},pRj=(A,j,e)=>{let t=A.contexts[j],r=t&&t.entries||{},a=qi(r,e);return yeA(A,j,{entries:a})},mRj=(A,j)=>({...A,contexts:qi(A.contexts,j)}),yeA=(A,j,e)=>{let t=A.contexts[j]||{};return{...A,contexts:{...A.contexts,[j]:{entries:{},timestamp:0,...t,...e}}}},FeA={},W8A=A=>FeA[A]||0;var Og=J(tA());var tx=J(Fo()),lOA=J(oOA());var YI,SRj="action/Session",vS=ij(SRj),cOA="v1",HRj="He never wears a Mac, in the pouring rain. Very strange.",MRj=6e5,KRj=21e5,NRj=A=>{[`\u2B06\uFE0F ${A.method} ${A.url}`,`Session: ${A.sessionUuid}`,`Request: ${A.requestId instanceof aj?A.requestId.str:A.requestId}`].join(`
`)},ReA=(A,j,e)=>{[`\u2705 ${A.method} ${A.url}`,`Session: ${A.sessionUuid}`,`Request: ${A.requestId instanceof aj?A.requestId.str:A.requestId}`,`Time: ${Math.round(j-A.start)} ms`,typeof e=="number"&&`Bytes: ${e}`].filter(r=>typeof r=="string").join(`
`)},DeA=(A,j,e)=>{[`\u274C (${e}) ${A.method} ${A.url}`,`Session: ${A.sessionUuid}`,`Request: ${A.requestId instanceof aj?A.requestId.str:A.requestId}`,`Time: ${Math.round(j-A.start)} ms`].join(`
`)},vd=class{constructor(j,e,t,r={}){this.setOpUserAgent=async a=>{await IB(navigator.userAgent).then(n=>this._opuaStr=Ff(a,n))},this.clearSessionKey=()=>{this._sessionKey=void 0},this.refreshSession=()=>{if(!this.isSignedIn)return;let a=this._lastSessionExtension?Date.now()-this._lastSessionExtension:void 0;if(a!==void 0&&a>KRj){this.nc.emit(Vt.SessionExpired);return}(a===void 0||a>MRj)&&(Mw(this).catch(n=>{}),this._lastSessionExtension=Date.now())},this.setSessionUuid=a=>{this._sessionUuid=a},this.setLanguage=a=>{sk(this._options,{headers:{"Accept-Language":a}})},this.importSessionKey=async a=>vS("importSessionKey",async()=>{let n=Ot(this._sessionUuid);return n.importRawKey(Nt,a).then(async()=>(this._sessionKey=n,n.jwk?(this._sessionHmac=YI.createSessionHmac(n.jwk.k),Promise.resolve(void 0)):Promise.reject(new Error("Missing JWK"))))}),this.importAdditionalRestoreContext=a=>{this._additionalRestoreContext=a},this.importAuth=a=>{this._auth=a},this.getAdditionalRestoreContext=()=>{let a=this._additionalRestoreContext;if(this._additionalRestoreContext=void 0,a===void 0)throw new Error("Missing context restore key");return a},this.createMacHeaderValueForRequest=async(a,n)=>{if(!this._sessionHmac)throw new Error("Missing session HMAC");if(!this._sessionUuid)throw new Error("Missing session ID");if(!this.requestId)throw new Error("Missing request ID");let o=this.requestId++,i=YI.getMacMessage(this._sessionUuid,a,n,o);return[await YI.createMacHeaderValue(i,o,this._sessionHmac),o]},this.request=async a=>{let{encrypted:n,method:o,url:i,body:s,options:l,name:c}=a,k=i[0]==="/"?`https://${this._host}${i}`:i,u=new URL(k).host,m=`accounts.${fi(this._host)}`,F=u===this._host||u===m,S,G=sk({},this._options,l),x=G.headers||{};if(F){if(x["OP-User-Agent"]=this._opuaStr||Ff(this._opua,await IB(navigator.userAgent)),this._sessionUuid&&(x["X-AgileBits-Session-ID"]=this._sessionUuid,this._sessionKey)){let[h,O]=await this.createMacHeaderValueForRequest(o,k);S=O,x["X-AgileBits-MAC"]=h,this.nc.emit(Vt.SessionRequestIdChanged)}G={...G,headers:x}}let R=s;if(n&&s){if(!this._sessionKey)throw new Error("Missing session key");let h=YZ(s,G.dataType);h&&(R=await this._sessionKey.encrypt(h),G.dataType="json")}S||(S=W(N$(8)));let P=G.responseType??"json",D=a.decryptResponse??(P==="json"&&n?"mustDecrypt":"dontDecrypt"),y={name:c,method:o,url:i,sessionUuid:this._sessionUuid||"[none]",requestId:S,start:performance.now(),responseType:P,decryptResponse:D};return NRj(y),h_(o,k,R,G).then(VRj(y,this._sessionKey,h=>{this.isSignedIn&&this.nc.emit(Vt.SessionExpired,{isReauthenticationRequired:h?.isReauthenticationRequired??!1})}),WRj(y))},this.encrypt=async a=>vS("encrypt",async()=>this._sessionKey?this._sessionKey.encrypt(Qe(a)):Promise.reject(new Error("Missing session key"))),this._startAuth=async(a,n)=>{if(!Pr.device)throw new Error("Missing device identifier");if(!a.secretKey)throw new Error("Missing Secret Key");this._sessionKey&&console.warn("SessionKey already exist, will reset sessionKey and sessionUuid");let o=a.secretKey,i=Pr.device;this.requestId=0,this._sessionHmac=void 0,this.setSessionUuid(void 0),this._sessionKey=void 0;let s={email:a.email,skFormat:o.format.toString(),skid:o.id,deviceUuid:i.uuid,userUuid:a.uuid},l=await iu(this,s);if(l.newHost)return{type:"domain_changed",newHost:l.newHost};if(l.newEmail)return{type:"email_changed",newEmail:l.newEmail};if(l.status==="device-not-registered"){this.setSessionUuid(l.sessionID),await Lw(this,i);let c={email:a.email,skFormat:o.format.toString(),skid:o.id,deviceUuid:i.uuid,userUuid:a.uuid},k=await iu(this,c);return this._handleStartAuthResponse(k,a)}if(l.status==="device-deleted")if(n){this.setSessionUuid(l.sessionID),await MX(this,i.uuid);let c={email:a.email,skFormat:o.format.toString(),skid:o.id,deviceUuid:i.uuid,userUuid:a.uuid},k=await iu(this,c);return this._handleStartAuthResponse(k,a)}else throw new CA.ClientError(CA.ClientErrorCode.deviceDeleted,W("This device has been deauthorized. Sign in again to reauthorize it."));return this._handleStartAuthResponse(l,a)},this._handleStartAuthResponse=async(a,n)=>{if(!a.accountKeyFormat)throw new Error("Invalid response, missing accountKeyFormat");if(!a.accountKeyUuid)throw new Error("Invalid response, missing accountKeyUuid");if(!a.sessionID)throw new Error("Invalid response, missing sessionID");if(!a.userAuth)throw new Error("Invalid response, missing userAuth");if(!n.secretKey)throw new CA.SecretKeyMissingError(a.accountKeyUuid);if(n.secretKey.id!==a.accountKeyUuid||n.secretKey.format!==a.accountKeyFormat)throw new CA.SecretKeyIdOrFormatMismatchedError(a.accountKeyUuid,n.secretKey.id,a.accountKeyFormat,n.secretKey.format.toString());return{type:"auth_success",secretKey:n.secretKey,sessionUuid:a.sessionID,authParams:a.userAuth}},this._performSrpExchange=async(a,n,o)=>{try{if(!this._sessionUuid)throw new Error("Missing session ID");let s=QRj(n,o),l=await(await Ai.fromHex(a.srpX)).beginAuth(bi.fromString(a.params.method).group,ej(a.params.salt),s),c=await gX(this,l.bigAhex),k=await l.recieveBigBhex(c.userB),u=await hX(this,k.clientHash);return(await k.recieveServerHash(u.serverVerifyHash)).rawKey}catch(i){throw CA.isServerError(i,CA.ServerErrorCode.authenticationRequired,CA.HTTPStatusCode.unauthorized)?new CA.ClientError(CA.ClientErrorCode.invalidEmailOrPassword,W("Invalid email or password")):i}},this.initialize=async(a,n=!1)=>{if(!n&&!a.rawSessionKey)throw new Error("Session key was expected but missing");if(!n&&!a.sessionUuid)throw new Error("Session UUID was expected but missing");this._isVerified=!0,this.setSessionUuid(a.sessionUuid),this._serverConfig=a.serverConfig,this.requestId=a.requestId,this._auth=a.auth,await this.importSessionKey(a.rawSessionKey)},this.signin=async(a,n,o)=>{this._isVerified=!1;let i=await this._startAuth(a,n);if(i.type!=="auth_success")return i;if(this.setSessionUuid(i.sessionUuid),a.secretKey=i.secretKey,o)this._auth={srpX:o,params:i.authParams};else if(a.password)this._auth=await ra.generateWithParams({email:a.email,password:a.password,secretKey:a.secretKey},i.authParams);else throw new Error("Missing password or srpX");this.requestId=1;let s=await this._performSrpExchange(this._auth,a.secretKey.id,a.email);return await this.importSessionKey(s),this.complete(a)},this.signInWithCredentialBundle=async(a,n,o,i,s)=>{this._isVerified=!1,this._auth={srpX:n.exportHex(),params:a},this.requestId=1;let l=await this._performSrpExchange(this._auth,i,s);return await this.importSessionKey(l),this.complete(void 0,o)},this.complete=async(a,n)=>{if(!this._sessionUuid)return Promise.reject(new Error("Missing session ID"));let o={client:Pr.clientDescriptor,signInToken:n};Pr.device.name&&(o.device=Pr.device);try{let i=await qX(this,o);return this._serverConfig=i,this._ssoMigrationGracePeriod=i.ssoMigrationGracePeriod,a&&i.userUuid&&(a.uuid=i.userUuid),a&&this.ssoMigrationGracePeriod?.state===Dj.State.MustMigrateAuth&&(a.state=Dj.State.MustMigrateAuth),i.mfa?{type:"mfa_required",details:i.mfa}:(this._isVerified=!0,this._lastSessionExtension=Date.now(),{type:"verified_session",session:this})}catch(i){throw this._isVerified=!1,i}},this.verifyOidc=async(a,n,o)=>{let i=await xJ(this,a,n,o,void 0);return this.setSessionUuid(i.user.sessionUuid),i},this.verifyPasskey=async(a,n,o,i)=>{let s=await fJ(this,a,n,o,i);return this.setSessionUuid(s.user.sessionUuid),s},this.registerWebauthnCredential=async()=>FJ(this),this.verifyWebauthnCredentialAttestation=async(a,n)=>bJ(this,a,n),this.verifyMfa=async a=>vS("verifyMfa",async()=>{if(!this._sessionUuid)return Promise.reject(new Error("Missing session ID"));let n={sessionId:this._sessionUuid,client:Pr.clientDescriptor};switch(a.type){case"dSecret":{n.dsecret={dshmac:a.dshmac};break}case"dSecretProxy":{n.dsecretProxy={deviceUuid:a.deviceUuid,dshmac:a.dshmac};break}case"totp":{n.totp={code:a.code};break}case"email":{n.code={code:a.code};break}case"webAuthn":{n.webAuthn=a.data;break}case"duo":{n.duo={sigResponse:a.sigResponse};break}case"duov4":{n.duov4={code:a.code};break}}return xX(this,n).then(async o=>(this._isVerified=!0,this._lastSessionExtension=Date.now(),this._ssoMigrationGracePeriod=o.ssoMigrationGracePeriod,Promise.resolve(o))).catch(async o=>{throw this._isVerified=!1,CA.isServerError(o,CA.ServerErrorCode.authenticationRequired,CA.HTTPStatusCode.unauthorized)?new CA.ClientError(CA.ClientErrorCode.invalidMFA,p`MFA authentication failed`):o})}),this.enableMfaWithAuth=async a=>vS("enableMfaWithAuth",async()=>{if(!this._sessionUuid)throw new Error("Missing session ID");let n={sessionId:this._sessionUuid,client:Pr.clientDescriptor,mfa:a};try{let o=await vX(this,n);return this._isVerified=!0,this._lastSessionExtension=Date.now(),o}catch(o){throw this._isVerified=!1,CA.isServerError(o,CA.ServerErrorCode.badRequest,CA.HTTPStatusCode.badRequest)?new CA.ClientError(CA.ClientErrorCode.invalidMFA,W("MFA authentication failed")):o}}),this._host=j,this.nc=new Bq.EventEmitter,this._onRequestIdChange=r.onRequestIdChange,this._options={dataType:"json",responseType:"json",cache:!1,attempts:1,timeout:3e4},this._isVerified=!1,this._requestId=0,this._sessionHmac=void 0,this.setSessionUuid(void 0),this._sessionKey=void 0,this.setLanguage(e),this._opuaStr=void 0,this._opua=t,this.setOpUserAgent(t)}get auth(){return this._auth}get requestId(){return this._requestId}set requestId(j){this._requestId=j,this._sessionUuid&&this._onRequestIdChange?.(j,this._sessionUuid)}get sessionUuid(){return this._sessionUuid||""}get sessionKey(){return this._sessionKey}get serverConfig(){return this._serverConfig}get ssoMigrationGracePeriod(){return this._ssoMigrationGracePeriod}get isSignedIn(){return!!this._sessionKey&&this._isVerified}};YI=vd;vd.fromDelegatedSession=(A,j,e,t)=>{let r=new YI(A,j,e);return r.initialize({rawSessionKey:ej(t.sessionKey.k),requestId:s6(0,16777215),serverConfig:{notifier:t.notifier},sessionUuid:t.sessionUuid}),r};vd.createSessionHmac=A=>ez(A,HRj);vd.getMacMessage=(A,j,e,t)=>{let r=new URL(e);return[A,j.toUpperCase(),`${r.hostname}/${QG(r.pathname,"/")}?${QG(r.search,"?")}`,cOA,t].join("|")};vd.createMacHeaderValue=async(A,j,e)=>{let t=new Uint8Array(tx.codec.bytes.fromBits(e.encrypt(A))),r=Aj(t.subarray(0,12));return[cOA,j,r].join("|")};var LRj=Og.type({reason:Og.string}),zRj=Og.type({errorCode:Og.number,errorMessage:Og.string}),URj=(A,j,e)=>{if(A===CA.HTTPStatusCode.tooManyRequests){let t=e("X-Rate-Limit-Retry-In"),r=t?Number.parseInt(t,10):void 0,a=new CA.ServerError(CA.HTTPStatusCode.tooManyRequests);return a.waitLength=r,a}return A===CA.HTTPStatusCode.deprecatedClient?new CA.ServerError(A,CA.ServerErrorReason.deprecated):zRj.is(j)?new CA.LegacyServerError(j.errorCode,j.errorMessage):LRj.is(j)?new CA.ServerError(A,j.reason):typeof j=="string"&&j.length>0?new CA.ServerError(A,j):new CA.ServerError(A)},VRj=(A,j,e)=>async t=>{let r=XRj(t.headers.get("Proxy-Status"));return r?r.error?sOA(A,e,t):iOA(A,j,t):t.status>=200&&t.status<300?iOA(A,j,t):sOA(A,e,t)},XRj=A=>{if(!A)return;let j=(0,lOA.parseList)(A).map(([e,t])=>({svc:e.toString(),params:t})).find(({svc:e})=>e==="B5");if(j)return{error:j.params.get("error")?.toString()}},CF;(function(A){A.ActuallyEmpty="ActuallyEmpty",A.Success1="Success1",A.EmptyArray="EmptyArray",A.EmptyDict="EmptyDict"})(CF||(CF={}));var JRj=A=>{if(A.length===0)return CF.ActuallyEmpty;switch(ln(A)){case'{"success": 1}':return CF.Success1;case"[]":return CF.EmptyArray;case"{}":return CF.EmptyDict;default:return!1}},iOA=async(A,j,e)=>{if(A.responseType!=="json")return ReA(A,performance.now()),e;let t=e.clone(),r=new Uint8Array(await e.arrayBuffer()),a=performance.now(),n=JRj(r);if((()=>{switch(A.decryptResponse){case"mustDecrypt":return!0;case"mustDecryptExceptUndefined":return!n;case"dontDecrypt":return!1}})()){if(!j)throw Or(_F(p`handleRequestSuccess`,p`Response should be decrypted but session is missing`,A)),new Error("Response should be decrypted but session is missing");if(n){let i=s=>W(s);Or(_F(p`handleRequestSuccess`,p`Response should be decrypted but it wasn't present: THIS WILL FAIL IN FUTURE PLEASE FIX ME. "empty" variant: ${i(n)}`,A))}else try{let i=cj(r,Ne.pipe(Fa)).unwrap(),s=await j.decrypt(i);return ReA(A,a,s.byteLength),new Response(s,e)}catch(i){throw console.error("Failed to decrypt response",i),Or(_F(p`handleRequestSuccess`,p`Failed to decrypt response`,A)),i}}return ReA(A,a),t},sOA=async(A,j,e)=>{DeA(A,performance.now(),e.status);let t,r=e.headers.get("Content-Type");if(r==="text/plain; charset=utf-8")try{let n=await e.text();try{t=JSON.parse(n)}catch{t=n}}catch(n){let o=p`Failed to read ${dp(e.status)} response body as text`;throw console.error(o,n),e.status!==CA.HTTPStatusCode.unauthorized&&Or(_F(p`handleRequestError`,o,A)),new CA.ServerError(e.status)}else if(r==="application/json"){let n=await e.text();throw JSON.parse(n)}else{let n=p`Unexpected content type for ${dp(e.status)} response: ${r?W(r):p``}`;throw console.error(n),[407,418,450,499,502,503,504].includes(e.status)||Or(_F(p`handleRequestError`,n,A)),new CA.ServerError(e.status)}let a=URj(e.status,t,n=>e.headers.get(n));throw CA.isNewServerError(a,CA.ServerErrorReason.reauthenticationRequired)||CA.isLegacyServerError(a,CA.ServerErrorCode.reauthenticationRequired)||CA.isNewServerError(a,CA.ServerErrorReason.mfaRequired)||CA.isLegacyServerError(a,CA.ServerErrorCode.mfaRequired)?j({isReauthenticationRequired:!0}):CA.isServerError(a,CA.ServerErrorCode.authenticationRequired,CA.HTTPStatusCode.unauthorized)&&j(),a},WRj=A=>j=>{if(CA.isClientError(j,CA.ClientErrorCode.serverRequestTimedOut))throw DeA(A,performance.now(),"timeout"),j;DeA(A,performance.now(),"no status"),console.error("Unexpected fetch error:",j);let e=(()=>{if(j instanceof Error)switch(j.name){case"AbortError":return p`AbortError`;case"NotAllowedError":return p`NotAllowedError`;case"TypeError":return p`TypeError`;default:return p`[Unexpected error name]`}else return p`[Invalid error type]`})();throw Or(_F(p`handleFetchError`,p`Unexpected fetch error: ${e}`,A)),new CA.ClientError(CA.ClientErrorCode.unexpectedFetchError,W("The request failed unexpectedly. Check your Internet connection and try again."))},_F=(A,j,{name:e=p`unknown`,sessionUuid:t,requestId:r})=>new xe({errorClass:$n.RequestError,message:p`${j}: func: ${A} req: ${e}`,metaData:{request:{name:e,sessionUuid:W(t),requestId:typeof r=="number"?dp(r):r}}}),QRj=(A,j)=>{let e=tx.hash.sha256.hash(Ea(Ij(A))),t=j.trim().normalize("NFKD").toLowerCase(),r=tx.hash.sha256.hash(Ea(Ij(t))),a=new tx.hash.sha256;return a.update(e),a.update(r),Aj(new Uint8Array(tx.codec.bytes.fromBits(a.finalize())))};var YRj=p`web-api/action/context.ts"`,ZRj=0,rx=class{constructor(j){this.updateOpuaConfig=async r=>{this.config.opua=sk({},this.config.opua,r),await this.session.setOpUserAgent(this.config.opua)},this.onNotifierConnected=()=>{pr(this),this.sendServerEvent(Vt.ServerConnected)},this.onNotificationReceived=r=>{let a=cj(r.data,Yo.pipe(V8A),{file:YRj,func:p`onNotificationReceived`});a.type==="ok"?a.value.session===this.session.sessionUuid?this.nc.emit(Vt.ServerChangedFromSelf):(pr(this),this.sendServerEvent(Vt.ServerChanged)):console.error(new Error("Invalid server notification"))},this.sendServerEvent=GL(async r=>{let a;try{a=await UI(this)}catch(n){console.error("Failed to refresh keysets",n)}this.nc.emit(r),a&&this.nc.emit(Vt.ServerChangedWithData,{keysets:a})},5e3,{leading:!0,trailing:!0}),this.config=oL({demoGeneratorIsEnabled:!1,host:"start.1password.com",env:"prd",internalFeaturesAreEnabled:!1,inWebView:!1,server:"1password.com",shouldResetWhenSessionExpires:!0,siblingDomains:[],txtBase:"/txt",opua:{client:{shortCode:Bk.OnePasswordForWeb,buildNum:0},deviceUuid:""}},j,(r,a)=>gL(a)||typeof a=="string"&&a.length===0?r:a),this.nc=new Bq.EventEmitter,this.id=++ZRj,beA(this.id);let{notifier:e,session:t}=this.reset();this.notifier=e,this.session=t}get lang(){return this.config.lang||navigator.language||"en"}reset(){let j=this.config.lang||navigator.language||"en";return this.session=new vd(this.config.host,j,this.config.opua,{onRequestIdChange:this.config.onRequestIdChange}),this.notifier&&this.notifier.disconnect(),this.notifier=new uS(this.onNotificationReceived,this.onNotifierConnected),this.session.nc.on(Vt.SessionExpired,e=>{this.nc.emit(Vt.SessionExpired,e),this.config.shouldResetWhenSessionExpires&&this.reset()}),this.nc.on(Vt.SignedOut,()=>{this.reset()}),this.account=void 0,this.user=void 0,this.userAuth=void 0,this.accountOverview=void 0,{notifier:this.notifier,session:this.session}}get user(){return this._user}set user(j){this._user=j}setUserUUID(j){if(!this._user)throw new Error("User is not set yet");this._user.uuid=j}get account(){return this._account}set account(j){this._account=j}get domain(){if(this.account)return this.account.domain;let j=this.config.host.split(".").shift();if(!j)throw new Error("No domain found, invalid host provided.");return j}resetWithHost(j){if(!ADj(j))throw new Error("Invalid host");let e=jDj(j);if(!e)throw new Error("Invalid host");this.config.host=j,this.config.server=e,this.reset()}isSignedIn(){return this.session.isSignedIn}loadVaultReportingPubKey(){this.dvrPubKey||(this.dvrPubKey=(async()=>{try{let j=await HAA(this.session);return nu.fromJwk(j.pubKey)}catch(j){throw console.error("Failed to retrieve Detailed Vault Reporting public key",j),j}})())}},ADj=A=>{try{let j=new URL(`https://${A}`);return A===j.host}catch{return!1}},jDj=A=>typeof A!="string"||!A?"":A.slice(A.indexOf(".")+1),pr=A=>{beA(A.id)},po=A=>{A.nc.emit(Vt.ClientStateChanged)},eDj=A=>A.session.isSignedIn&&A.user&&A.user.uuid&&A.user.keysetVersion>0&&A.user.attrVersion>0;var tDj="action/pub_key",rDj=ij(tDj),dOA=195,SF=(A,j)=>{let e=Ca(A,"uuid");return j.map(t=>{let r=e[t.uuid];if(r===void 0)throw new Error("mergeInPubKeys: accessor not found");return{...r,pubKey:t.pubKey,spubKey:t.spubKey}})},vc=async(A,j)=>{let e=Yr(j.map($o));return e.length===0?[]:W6(async r=>aQ(A.session,r),dOA,e)},TeA=async(A,j)=>rDj("getGroupPubKeys",async()=>{let e=Yr(j.map(mk));return e.length===0?[]:W6(async r=>jV(A.session,r),dOA,e)});var aDj="action/group_membership",GS=ij(aDj),ZI=100,Rg=async(A,j,e,t)=>GS("createGroupMembership",async()=>Gd(A,e).then(async r=>e.createMembership(r,j,t))),nDj=async(A,j)=>GS("updateGroupMembershipRole",async()=>iV(A.session,j.memberUuid,j.groupUuid,j.role).then(()=>pr(A))),ax=async(A,j)=>GS("updateGroupMemberships",async()=>{let{add:e,remove:t,group:r}=j;if(e.length+t.length===0)return{currentUserMustResetPassword:!1};let a=await Ka(A,r),n=await Gd(A,a),o=async l=>{let c=await vc(A,e.map(u=>u.uuid)),k=Ca(c,"uuid");return Promise.all(l.map(async u=>{let m=k[u.uuid];if(m===void 0)throw new Error("updateGroupMemberships: userPubKey undefined");return{memberUuid:u.uuid,keyset:await oDj(n,m),role:u.role||dr.Role.Member}}))},i=sD(Jo(e,ZI),Jo(t,ZI),(l,c)=>({add:l&&o(l)||[],remove:c&&c.map($o)||[]})),s=[];for(let l of i){let k={add:await l.add,remove:l.remove},u=await sV(A.session,a.uuid,k);s=[...s,u]}return a.hasPermission(tt.Recover)&&A.account&&(A.account.hasRecoveryMembers=!0),pr(A),{currentUserMustResetPassword:s.some(l=>!!l.currentUserMustResetPassword)}}),fS=async(A,j)=>GS("updateUserMemberships",async()=>{let{add:e,remove:t,user:r}=j;if(e.length+t.length===0)return{currentUserMustResetPassword:!1};let a=$o(r),[n]=await vc(A,[a]);if(!n||n.uuid!==a)throw new Error("Missing user's public key.");let o=async l=>{let c=await Ka(A,l.uuid);return Rg(A,n,c,{role:l.role||dr.Role.Member})},i=sD(Jo(e,ZI),Jo(t,ZI),(l,c)=>({add:l&&l.map(o)||[],remove:c&&c.map(mk)||[]})),s=[];for(let l of i){let k={add:await Promise.all(l.add),remove:l.remove},u=await lV(A.session,a,k);s=[...s,u]}return pr(A),{currentUserMustResetPassword:s.some(l=>!!l.currentUserMustResetPassword)}}),oDj=async(A,j)=>{let e=await zq(j.pubKey);return A.encryptWithKey(e)};var FS="Hosted Provisioning";var EA,A1=null;function HF(){return(A1===null||A1.byteLength===0)&&(A1=new Uint8Array(EA.memory.buffer)),A1}var yS=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&yS.decode();var iDj=2146435072,CeA=0;function sDj(A,j){return CeA+=j,CeA>=iDj&&(yS=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}},yS.decode(),CeA=j),yS.decode(HF().subarray(A,A+j))}function f6(A,j){return A=A>>>0,sDj(A,j)}var Ct=0,$S=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},lDj=typeof $S.encodeInto=="function"?function(A,j){return $S.encodeInto(A,j)}:function(A,j){let e=$S.encode(A);return j.set(e),{read:A.length,written:e.length}};function Hn(A,j,e){if(e===void 0){let o=$S.encode(A),i=j(o.length,1)>>>0;return HF().subarray(i,i+o.length).set(o),Ct=o.length,i}let t=A.length,r=j(t,1)>>>0,a=HF(),n=0;for(;n<t;n++){let o=A.charCodeAt(n);if(o>127)break;a[r+n]=o}if(n!==t){n!==0&&(A=A.slice(n)),r=e(r,t,t=n+A.length*3,1)>>>0;let o=HF().subarray(r+n,r+t),i=lDj(A,o);n+=i.written,r=e(r,t,n,1)>>>0}return Ct=n,r}var nx=null;function oi(){return(nx===null||nx.buffer.detached===!0||nx.buffer.detached===void 0&&nx.buffer!==EA.memory.buffer)&&(nx=new DataView(EA.memory.buffer)),nx}function Gc(A){let j=EA.__externref_table_alloc();return EA.__wbindgen_export_4.set(j,A),j}function pn(A,j){try{return A.apply(this,j)}catch(e){let t=Gc(e);EA.__wbindgen_exn_store(t)}}function mo(A){return A==null}function KF(A,j){return A=A>>>0,HF().subarray(A/1,A/1+j)}function _eA(A){let j=typeof A;if(j=="number"||j=="boolean"||A==null)return`${A}`;if(j=="string")return`"${A}"`;if(j=="symbol"){let r=A.description;return r==null?"Symbol":`Symbol(${r})`}if(j=="function"){let r=A.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(A)){let r=A.length,a="[";r>0&&(a+=_eA(A[0]));for(let n=1;n<r;n++)a+=", "+_eA(A[n]);return a+="]",a}let e=/\[object ([^\]]+)\]/.exec(toString.call(A)),t;if(e&&e.length>1)t=e[1];else return toString.call(A);if(t=="Object")try{return"Object("+JSON.stringify(A)+")"}catch{return"Object"}return A instanceof Error?`${A.name}: ${A.message}
${A.stack}`:t}var kOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>{EA.__wbindgen_export_5.get(A.dtor)(A.a,A.b)});function bS(A,j,e,t){let r={a:A,b:j,cnt:1,dtor:e},a=(...n)=>{r.cnt++;let o=r.a;r.a=0;try{return t(o,r.b,...n)}finally{--r.cnt===0?(EA.__wbindgen_export_5.get(r.dtor)(o,r.b),kOA.unregister(r)):r.a=o}};return a.original=r,kOA.register(a,r,r),a}function uOA(A,j){A=A>>>0;let e=oi(),t=[];for(let r=A;r<A+4*j;r+=4)t.push(EA.__wbindgen_export_4.get(e.getUint32(r,!0)));return EA.__externref_drop_slice(A,j),t}function Zp(A,j){let e=j(A.length*4,4)>>>0;for(let t=0;t<A.length;t++){let r=Gc(A[t]);oi().setUint32(e+4*t,r,!0)}return Ct=A.length,e}function xu(A,j){if(!(A instanceof j))throw new Error(`expected instance of ${j.name}`)}function wS(A){let j=EA.__wbindgen_export_4.get(A);return EA.__externref_table_dealloc(A),j}function fc(A,j){let e=j(A.length*1,1)>>>0;return HF().set(A,e/1),Ct=A.length,e}function cDj(A,j,e){let t=EA.closure78_externref_shim_multivalue_shim(A,j,e);if(t[1])throw wS(t[0])}function dDj(A,j,e){EA.closure305_externref_shim(A,j,e)}function kDj(A,j){EA.wasm_bindgen__convert__closures_____invoke__h49d0e303be2f2d0f(A,j)}function uDj(A,j,e){EA.closure268_externref_shim(A,j,e)}function EDj(A,j,e,t){EA.closure473_externref_shim(A,j,e,t)}var pDj=["pending","done"],mDj=["readonly","readwrite","versionchange","readwriteflush","cleanup"],EOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_accountuuid_free(A>>>0,1)),j1=class{__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,EOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_accountuuid_free(j,0)}constructor(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct,r=EA.accountuuid_new(e,t);return this.__wbg_ptr=r>>>0,EOA.register(this,this.__wbg_ptr,this),this}},pOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_bookmark_free(A>>>0,1)),vu=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,pOA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,pOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_bookmark_free(j,0)}},mOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_entrybytes_free(A>>>0,1)),IS=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,mOA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,mOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_entrybytes_free(j,0)}toBase64Url(){let j,e;try{let t=EA.entrybytes_toBase64Url(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}toBase64(){let j,e;try{let t=EA.entrybytes_toBase64(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}},BOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_entrydetails_free(A>>>0,1)),SeA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,BOA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,BOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_entrydetails_free(j,0)}get entry(){let j=EA.__wbg_get_entrydetails_entry(this.__wbg_ptr);return IS.__wrap(j)}set entry(j){xu(j,IS);var e=j.__destroy_into_raw();EA.__wbg_set_entrydetails_entry(this.__wbg_ptr,e)}get new_bookmark(){let j=EA.__wbg_get_entrydetails_new_bookmark(this.__wbg_ptr);return vu.__wrap(j)}set new_bookmark(j){xu(j,vu);var e=j.__destroy_into_raw();EA.__wbg_set_entrydetails_new_bookmark(this.__wbg_ptr,e)}},gOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_group_free(A>>>0,1)),HeA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,gOA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,gOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_group_free(j,0)}get uuid(){let j,e;try{let t=EA.__wbg_get_group_uuid(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}set uuid(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct;EA.__wbg_set_group_uuid(this.__wbg_ptr,e,t)}get keysetUuid(){let j,e;try{let t=EA.__wbg_get_group_keysetUuid(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}set keysetUuid(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct;EA.__wbg_set_group_keysetUuid(this.__wbg_ptr,e,t)}get seededEncryptionKey(){return EA.__wbg_get_group_seededEncryptionKey(this.__wbg_ptr)}set seededEncryptionKey(j){EA.__wbg_set_group_seededEncryptionKey(this.__wbg_ptr,j)}get symKeyVerifier(){return EA.__wbg_get_group_symKeyVerifier(this.__wbg_ptr)}set symKeyVerifier(j){EA.__wbg_set_group_symKeyVerifier(this.__wbg_ptr,mo(j)?0:Gc(j))}get isRecovery(){return EA.__wbg_get_group_isRecovery(this.__wbg_ptr)!==0}set isRecovery(j){EA.__wbg_set_group_isRecovery(this.__wbg_ptr,j)}},hOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_groupoperationdetails_free(A>>>0,1)),e1=class A{static __unwrap(j){return j instanceof A?j.__destroy_into_raw():0}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,hOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_groupoperationdetails_free(j,0)}get uuid(){let j,e;try{let t=EA.__wbg_get_groupoperationdetails_uuid(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}set uuid(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct;EA.__wbg_set_groupoperationdetails_uuid(this.__wbg_ptr,e,t)}get keyset_uuid(){let j,e;try{let t=EA.__wbg_get_groupoperationdetails_keyset_uuid(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}set keyset_uuid(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct;EA.__wbg_set_groupoperationdetails_keyset_uuid(this.__wbg_ptr,e,t)}get enc_public_key_bytes(){let j=EA.__wbg_get_groupoperationdetails_enc_public_key_bytes(this.__wbg_ptr);var e=KF(j[0],j[1]).slice();return EA.__wbindgen_free(j[0],j[1]*1,1),e}set enc_public_key_bytes(j){let e=fc(j,EA.__wbindgen_malloc),t=Ct;EA.__wbg_set_groupoperationdetails_enc_public_key_bytes(this.__wbg_ptr,e,t)}get symmetric_key_bytes(){let j=EA.__wbg_get_groupoperationdetails_symmetric_key_bytes(this.__wbg_ptr);var e=KF(j[0],j[1]).slice();return EA.__wbindgen_free(j[0],j[1]*1,1),e}set symmetric_key_bytes(j){let e=fc(j,EA.__wbindgen_malloc),t=Ct;EA.__wbg_set_groupoperationdetails_symmetric_key_bytes(this.__wbg_ptr,e,t)}constructor(j,e,t,r){let a=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),n=Ct,o=Hn(e,EA.__wbindgen_malloc,EA.__wbindgen_realloc),i=Ct,s=fc(t,EA.__wbindgen_malloc),l=Ct,c=fc(r,EA.__wbindgen_malloc),k=Ct,u=EA.groupoperationdetails_new(a,n,o,i,s,l,c,k);return this.__wbg_ptr=u>>>0,hOA.register(this,this.__wbg_ptr,this),this}},qOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_recoveryauth_free(A>>>0,1)),t1=class{__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,qOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_recoveryauth_free(j,0)}constructor(j,e){let t=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),r=Ct,a=Hn(e,EA.__wbindgen_malloc,EA.__wbindgen_realloc),n=Ct,o=EA.recoveryauth_new(t,r,a,n);return this.__wbg_ptr=o>>>0,qOA.register(this,this.__wbg_ptr,this),this}},xOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_signedbookmarkbytes_free(A>>>0,1)),MF=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,xOA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,xOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_signedbookmarkbytes_free(j,0)}toBase64Url(){let j,e;try{let t=EA.signedbookmarkbytes_toBase64Url(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}toBase64(){let j,e;try{let t=EA.signedbookmarkbytes_toBase64(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}},vOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_user_free(A>>>0,1)),MeA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,vOA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,vOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_user_free(j,0)}get uuid(){let j,e;try{let t=EA.__wbg_get_user_uuid(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}set uuid(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct;EA.__wbg_set_user_uuid(this.__wbg_ptr,e,t)}get keysetUuid(){let j,e;try{let t=EA.__wbg_get_user_keysetUuid(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}set keysetUuid(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct;EA.__wbg_set_user_keysetUuid(this.__wbg_ptr,e,t)}get seededEncryptionKey(){return EA.__wbg_get_user_seededEncryptionKey(this.__wbg_ptr)}set seededEncryptionKey(j){EA.__wbg_set_user_seededEncryptionKey(this.__wbg_ptr,j)}get identityKey(){return EA.__wbg_get_user_identityKey(this.__wbg_ptr)}set identityKey(j){EA.__wbg_set_user_identityKey(this.__wbg_ptr,j)}},GOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_useroperationdetails_free(A>>>0,1)),NF=class A{static __unwrap(j){return j instanceof A?j.__destroy_into_raw():0}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,GOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_useroperationdetails_free(j,0)}get uuid(){let j,e;try{let t=EA.__wbg_get_useroperationdetails_uuid(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}set uuid(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct;EA.__wbg_set_groupoperationdetails_uuid(this.__wbg_ptr,e,t)}get keyset_uuid(){let j,e;try{let t=EA.__wbg_get_useroperationdetails_keyset_uuid(this.__wbg_ptr);return j=t[0],e=t[1],f6(t[0],t[1])}finally{EA.__wbindgen_free(j,e,1)}}set keyset_uuid(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct;EA.__wbg_set_groupoperationdetails_keyset_uuid(this.__wbg_ptr,e,t)}get identity_public_key_bytes(){let j=EA.__wbg_get_useroperationdetails_identity_public_key_bytes(this.__wbg_ptr);var e=KF(j[0],j[1]).slice();return EA.__wbindgen_free(j[0],j[1]*1,1),e}set identity_public_key_bytes(j){let e=fc(j,EA.__wbindgen_malloc),t=Ct;EA.__wbg_set_groupoperationdetails_enc_public_key_bytes(this.__wbg_ptr,e,t)}get seeded_encryption_key_bytes(){let j=EA.__wbg_get_useroperationdetails_seeded_encryption_key_bytes(this.__wbg_ptr),e;return j[0]!==0&&(e=KF(j[0],j[1]).slice(),EA.__wbindgen_free(j[0],j[1]*1,1)),e}set seeded_encryption_key_bytes(j){var e=mo(j)?0:fc(j,EA.__wbindgen_malloc),t=Ct;EA.__wbg_set_useroperationdetails_seeded_encryption_key_bytes(this.__wbg_ptr,e,t)}constructor(j,e,t,r){let a=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),n=Ct,o=Hn(e,EA.__wbindgen_malloc,EA.__wbindgen_realloc),i=Ct,s=fc(t,EA.__wbindgen_malloc),l=Ct;var c=mo(r)?0:fc(r,EA.__wbindgen_malloc),k=Ct;let u=EA.useroperationdetails_new(a,n,o,i,s,l,c,k);return this.__wbg_ptr=u>>>0,GOA.register(this,this.__wbg_ptr,this),this}},fOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_useruuid_free(A>>>0,1)),ox=class{__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,fOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_useruuid_free(j,0)}constructor(j){let e=Hn(j,EA.__wbindgen_malloc,EA.__wbindgen_realloc),t=Ct,r=EA.accountuuid_new(e,t);return this.__wbg_ptr=r>>>0,fOA.register(this,this.__wbg_ptr,this),this}},FOA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>EA.__wbg_wasmtrustlogclient_free(A>>>0,1)),LF=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,FOA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,FOA.unregister(this),j}free(){let j=this.__destroy_into_raw();EA.__wbg_wasmtrustlogclient_free(j,0)}getGroups(j){let e=Zp(j,EA.__wbindgen_malloc),t=Ct;return EA.wasmtrustlogclient_getGroups(this.__wbg_ptr,e,t)}getUsers(j){let e=Zp(j,EA.__wbindgen_malloc),t=Ct;return EA.wasmtrustlogclient_getUsers(this.__wbg_ptr,e,t)}require_signatures(){return EA.wasmtrustlogclient_require_signatures(this.__wbg_ptr)}create_add_users_entry(j){let e=Zp(j,EA.__wbindgen_malloc),t=Ct;return EA.wasmtrustlogclient_create_add_users_entry(this.__wbg_ptr,e,t)}create_update_users_entry(j){let e=Zp(j,EA.__wbindgen_malloc),t=Ct;return EA.wasmtrustlogclient_create_update_users_entry(this.__wbg_ptr,e,t)}create_remove_users_entry(j){let e=Zp(j,EA.__wbindgen_malloc),t=Ct;return EA.wasmtrustlogclient_create_remove_users_entry(this.__wbg_ptr,e,t)}create_remove_seeded_encryption_keys_entry(j){let e=Zp(j,EA.__wbindgen_malloc),t=Ct;return EA.wasmtrustlogclient_create_remove_seeded_encryption_keys_entry(this.__wbg_ptr,e,t)}create_add_groups_entry(j){let e=Zp(j,EA.__wbindgen_malloc),t=Ct;return EA.wasmtrustlogclient_create_add_groups_entry(this.__wbg_ptr,e,t)}create_update_groups_entry(j){let e=Zp(j,EA.__wbindgen_malloc),t=Ct;return EA.wasmtrustlogclient_create_update_groups_entry(this.__wbg_ptr,e,t)}create_remove_groups_entry(j){let e=Zp(j,EA.__wbindgen_malloc),t=Ct;return EA.wasmtrustlogclient_create_remove_groups_entry(this.__wbg_ptr,e,t)}get_bookmark(){return EA.wasmtrustlogclient_get_bookmark(this.__wbg_ptr)}fast_forward(){return EA.wasmtrustlogclient_fast_forward(this.__wbg_ptr)}sign_bookmark(j){xu(j,vu);var e=j.__destroy_into_raw();let t=EA.wasmtrustlogclient_sign_bookmark(this.__wbg_ptr,e);if(t[2])throw wS(t[1]);return MF.__wrap(t[0])}sign_bookmark_with_key(j,e){let t=fc(j,EA.__wbindgen_malloc),r=Ct;xu(e,vu);var a=e.__destroy_into_raw();let n=EA.wasmtrustlogclient_sign_bookmark_with_key(this.__wbg_ptr,t,r,a);if(n[2])throw wS(n[1]);return MF.__wrap(n[0])}sign_and_submit_bookmark(j){xu(j,vu);var e=j.__destroy_into_raw();return EA.wasmtrustlogclient_sign_and_submit_bookmark(this.__wbg_ptr,e)}create_recovery_bookmark(j){xu(j,t1);var e=j.__destroy_into_raw();return EA.wasmtrustlogclient_create_recovery_bookmark(this.__wbg_ptr,e)}write_local_bookmark(j){xu(j,MF);var e=j.__destroy_into_raw();return EA.wasmtrustlogclient_write_local_bookmark(this.__wbg_ptr,e)}static new(j,e,t,r){xu(e,ox);var a=e.__destroy_into_raw();let n=fc(t,EA.__wbindgen_malloc),o=Ct,i=fc(r,EA.__wbindgen_malloc),s=Ct,l=EA.wasmtrustlogclient_new(j,a,n,o,i,s);if(l[2])throw wS(l[1]);return A.__wrap(l[0])}static new_indexed_db(j,e,t,r,a){xu(e,j1);var n=e.__destroy_into_raw();xu(t,ox);var o=t.__destroy_into_raw();let i=fc(r,EA.__wbindgen_malloc),s=Ct,l=fc(a,EA.__wbindgen_malloc),c=Ct;return EA.wasmtrustlogclient_new_indexed_db(j,n,o,i,s,l,c)}},BDj=new Set(["basic","cors","default"]);async function gDj(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.ok&&BDj.has(A.type)&&A.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function hDj(){let A={};return A.wbg={},A.wbg.__wbg_Error_1f3748b298f99708=function(j,e){return Error(f6(j,e))},A.wbg.__wbg_Number_577a493fc95ea223=function(j){return Number(j)},A.wbg.__wbg_String_8f0eb39a4a4c2f66=function(j,e){let t=String(e),r=Hn(t,EA.__wbindgen_malloc,EA.__wbindgen_realloc),a=Ct;oi().setInt32(j+4*1,a,!0),oi().setInt32(j+4*0,r,!0)},A.wbg.__wbg_Window_41559019033ede94=function(j){return j.Window},A.wbg.__wbg_WorkerGlobalScope_d324bffbeaef9f3a=function(j){return j.WorkerGlobalScope},A.wbg.__wbg_abort_496881624c2d80da=function(){return pn(function(j){j.abort()},arguments)},A.wbg.__wbg_bookmark_new=function(j){return vu.__wrap(j)},A.wbg.__wbg_bound_5807fb7ebc427c03=function(){return pn(function(j,e,t,r){return IDBKeyRange.bound(j,e,t!==0,r!==0)},arguments)},A.wbg.__wbg_call_2f8d426a20a307fe=function(){return pn(function(j,e){return j.call(e)},arguments)},A.wbg.__wbg_call_f53f0647ceb9c567=function(){return pn(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_commit_a54edce65f3858f2=function(){return pn(function(j){j.commit()},arguments)},A.wbg.__wbg_createObjectStore_7e79e7f6de6b5f4a=function(){return pn(function(j,e,t,r){return j.createObjectStore(f6(e,t),r)},arguments)},A.wbg.__wbg_done_4a7743b6f942c9f3=function(j){return j.done},A.wbg.__wbg_entrydetails_new=function(j){return SeA.__wrap(j)},A.wbg.__wbg_error_443a583c581ba303=function(){return pn(function(j){let e=j.error;return mo(e)?0:Gc(e)},arguments)},A.wbg.__wbg_error_f1c7f60980cd4558=function(j,e){console.error(f6(j,e))},A.wbg.__wbg_getItem_7083c7e8090b4e20=function(){return pn(function(j,e,t,r){let a=e.getItem(f6(t,r));var n=mo(a)?0:Hn(a,EA.__wbindgen_malloc,EA.__wbindgen_realloc),o=Ct;oi().setInt32(j+4*1,o,!0),oi().setInt32(j+4*0,n,!0)},arguments)},A.wbg.__wbg_getTime_5b1dd03bb6d4b784=function(j){return j.getTime()},A.wbg.__wbg_get_27b4bcbec57323ca=function(){return pn(function(j,e){return Reflect.get(j,e)},arguments)},A.wbg.__wbg_get_59c6316d15f9f1d0=function(j,e){return j[e>>>0]},A.wbg.__wbg_get_a0f588b1e212306e=function(){return pn(function(j,e){return j.get(e)},arguments)},A.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(j,e){return j[e]},A.wbg.__wbg_global_f5c2926e57ba457f=function(j){return j.global},A.wbg.__wbg_group_new=function(j){return HeA.__wrap(j)},A.wbg.__wbg_groupoperationdetails_unwrap=function(j){return e1.__unwrap(j)},A.wbg.__wbg_indexedDB_54f01430b1e194e8=function(){return pn(function(j){let e=j.indexedDB;return mo(e)?0:Gc(e)},arguments)},A.wbg.__wbg_indexedDB_5ca7b44ac8de3945=function(){return pn(function(j){let e=j.indexedDB;return mo(e)?0:Gc(e)},arguments)},A.wbg.__wbg_indexedDB_ab8fe0e72e0f6df8=function(){return pn(function(j){let e=j.indexedDB;return mo(e)?0:Gc(e)},arguments)},A.wbg.__wbg_instanceof_ArrayBuffer_59339a3a6f0c10ea=function(j){let e;try{e=j instanceof ArrayBuffer}catch{e=!1}return e},A.wbg.__wbg_instanceof_CursorSys_4b6a8aba0e823e75=function(j){let e;try{e=j instanceof IDBCursorWithValue}catch{e=!1}return e},A.wbg.__wbg_instanceof_DomException_2a64eb8d6b89808e=function(j){let e;try{e=j instanceof DOMException}catch{e=!1}return e},A.wbg.__wbg_instanceof_Error_1e51a63e1736444c=function(j){let e;try{e=j instanceof Error}catch{e=!1}return e},A.wbg.__wbg_instanceof_IdbDatabase_48c551909b7652c5=function(j){let e;try{e=j instanceof IDBDatabase}catch{e=!1}return e},A.wbg.__wbg_instanceof_IdbRequest_591f189bf6c335cc=function(j){let e;try{e=j instanceof IDBRequest}catch{e=!1}return e},A.wbg.__wbg_instanceof_Uint8Array_91f3c5adee7e6672=function(j){let e;try{e=j instanceof Uint8Array}catch{e=!1}return e},A.wbg.__wbg_instanceof_Window_7f29e5c72acbfd60=function(j){let e;try{e=j instanceof Window}catch{e=!1}return e},A.wbg.__wbg_isArray_bc2498eba6fcb71f=function(j){return Array.isArray(j)},A.wbg.__wbg_isSafeInteger_6091d6e3ee1b65fd=function(j){return Number.isSafeInteger(j)},A.wbg.__wbg_iterator_96378c3c9a17347c=function(){return Symbol.iterator},A.wbg.__wbg_length_246fa1f85a0dea5b=function(j){return j.length},A.wbg.__wbg_length_904c0910ed998bf3=function(j){return j.length},A.wbg.__wbg_localStorage_3e7df12e18c45ecc=function(){return pn(function(j){let e=j.localStorage;return mo(e)?0:Gc(e)},arguments)},A.wbg.__wbg_lowerBound_a69278c0c79604e8=function(){return pn(function(j,e){return IDBKeyRange.lowerBound(j,e!==0)},arguments)},A.wbg.__wbg_message_86bd7dcf158b1dda=function(j){return j.message},A.wbg.__wbg_message_c368bb199e6a5ba3=function(j,e){let t=e.message,r=Hn(t,EA.__wbindgen_malloc,EA.__wbindgen_realloc),a=Ct;oi().setInt32(j+4*1,a,!0),oi().setInt32(j+4*0,r,!0)},A.wbg.__wbg_name_209424bdcd2d8b87=function(j,e){let t=e.name,r=Hn(t,EA.__wbindgen_malloc,EA.__wbindgen_realloc),a=Ct;oi().setInt32(j+4*1,a,!0),oi().setInt32(j+4*0,r,!0)},A.wbg.__wbg_new0_85cc856927102294=function(){return new Date},A.wbg.__wbg_newVersion_3f9c187821ce66ef=function(j,e){let t=e.newVersion;oi().setFloat64(j+8*1,mo(t)?0:t,!0),oi().setInt32(j+4*0,!mo(t),!0)},A.wbg.__wbg_new_1930cbb8d9ffc31b=function(){return new Object},A.wbg.__wbg_new_56407f99198feff7=function(){return new Map},A.wbg.__wbg_new_9190433fb67ed635=function(j){return new Uint8Array(j)},A.wbg.__wbg_new_97ddeb994a38bb69=function(j,e){return new Error(f6(j,e))},A.wbg.__wbg_new_d5e3800b120e37e1=function(j,e){try{var t={a:j,b:e},r=(n,o)=>{let i=t.a;t.a=0;try{return EDj(i,t.b,n,o)}finally{t.a=i}};return new Promise(r)}finally{t.a=t.b=0}},A.wbg.__wbg_new_e969dc3f68d25093=function(){return new Array},A.wbg.__wbg_newfromslice_d0d56929c6d9c842=function(j,e){return new Uint8Array(KF(j,e))},A.wbg.__wbg_newnoargs_a81330f6e05d8aca=function(j,e){return new Function(f6(j,e))},A.wbg.__wbg_next_2e6b37020ac5fe58=function(){return pn(function(j){return j.next()},arguments)},A.wbg.__wbg_next_3de8f2669431a3ff=function(j){return j.next},A.wbg.__wbg_objectStore_4f9dafdbff77fd83=function(){return pn(function(j,e,t){return j.objectStore(f6(e,t))},arguments)},A.wbg.__wbg_oldVersion_5a8efa3235792860=function(j){return j.oldVersion},A.wbg.__wbg_open_bf329a7c677f6eb3=function(){return pn(function(j,e,t,r){return j.open(f6(e,t),r>>>0)},arguments)},A.wbg.__wbg_prototypesetcall_c5f74efd31aea86b=function(j,e,t){Uint8Array.prototype.set.call(KF(j,e),t)},A.wbg.__wbg_push_cd3ac7d5b094565d=function(j,e){return j.push(e)},A.wbg.__wbg_put_adbbd8f247db7544=function(){return pn(function(j,e){return j.put(e)},arguments)},A.wbg.__wbg_queueMicrotask_bcc6e26d899696db=function(j){return j.queueMicrotask},A.wbg.__wbg_queueMicrotask_f24a794d09c42640=function(j){queueMicrotask(j)},A.wbg.__wbg_readyState_b35e1ef1330a629e=function(j){let e=j.readyState;return(pDj.indexOf(e)+1||3)-1},A.wbg.__wbg_resolve_5775c0ef9222f556=function(j){return Promise.resolve(j)},A.wbg.__wbg_result_b30a0a7bc6b6345f=function(){return pn(function(j){return j.result},arguments)},A.wbg.__wbg_setItem_328cbcd44fb5d487=function(){return pn(function(j,e,t,r,a){j.setItem(f6(e,t),f6(r,a))},arguments)},A.wbg.__wbg_set_31197016f65a6a19=function(j,e,t){return j.set(e,t)},A.wbg.__wbg_set_3f1d0b984ed272ed=function(j,e,t){j[e]=t},A.wbg.__wbg_set_d636a0463acf1dbc=function(j,e,t){j[e>>>0]=t},A.wbg.__wbg_setkeypath_8d8c800a95646c4d=function(j,e){j.keyPath=e},A.wbg.__wbg_setname_b226a825d1533eb4=function(j,e,t){j.name=f6(e,t)},A.wbg.__wbg_setonabort_2b64fe553e1f30a5=function(j,e){j.onabort=e},A.wbg.__wbg_setoncomplete_2dee9e6e91eb390c=function(j,e){j.oncomplete=e},A.wbg.__wbg_setonerror_1c09126416a8732a=function(j,e){j.onerror=e},A.wbg.__wbg_setonerror_d12d470adff34fe2=function(j,e){j.onerror=e},A.wbg.__wbg_setonsuccess_81a109828a9b7d7c=function(j,e){j.onsuccess=e},A.wbg.__wbg_setonupgradeneeded_41c59fde839b5142=function(j,e){j.onupgradeneeded=e},A.wbg.__wbg_signedbookmarkbytes_new=function(j){return MF.__wrap(j)},A.wbg.__wbg_static_accessor_GLOBAL_1f13249cc3acc96d=function(){let j=typeof global>"u"?null:global;return mo(j)?0:Gc(j)},A.wbg.__wbg_static_accessor_GLOBAL_THIS_df7ae94b1e0ed6a3=function(){let j=typeof globalThis>"u"?null:globalThis;return mo(j)?0:Gc(j)},A.wbg.__wbg_static_accessor_SELF_6265471db3b3c228=function(){let j=typeof self>"u"?null:self;return mo(j)?0:Gc(j)},A.wbg.__wbg_static_accessor_WINDOW_16fb482f8ec52863=function(){let j=typeof window>"u"?null:window;return mo(j)?0:Gc(j)},A.wbg.__wbg_target_bfb4281bfa013115=function(j){let e=j.target;return mo(e)?0:Gc(e)},A.wbg.__wbg_then_8d2fcccde5380a03=function(j,e,t){return j.then(e,t)},A.wbg.__wbg_then_9cc266be2bf537b6=function(j,e){return j.then(e)},A.wbg.__wbg_toString_1144ec2f872e8cf3=function(j){return j.toString()},A.wbg.__wbg_transaction_49b670ca47d6a732=function(){return pn(function(j,e,t,r){return j.transaction(f6(e,t),mDj[r])},arguments)},A.wbg.__wbg_transaction_f2dbf044d934536e=function(j){return j.transaction},A.wbg.__wbg_upperBound_ac8444b712c38f26=function(){return pn(function(j,e){return IDBKeyRange.upperBound(j,e!==0)},arguments)},A.wbg.__wbg_user_new=function(j){return MeA.__wrap(j)},A.wbg.__wbg_useroperationdetails_unwrap=function(j){return NF.__unwrap(j)},A.wbg.__wbg_value_09d0b4eaab48b91d=function(j){return j.value},A.wbg.__wbg_wasmtrustlogclient_new=function(j){return LF.__wrap(j)},A.wbg.__wbg_wbindgenbooleanget_59f830b1a70d2530=function(j){let e=j,t=typeof e=="boolean"?e:void 0;return mo(t)?16777215:t?1:0},A.wbg.__wbg_wbindgencbdrop_a85ed476c6a370b9=function(j){let e=j.original;return e.cnt--==1?(e.a=0,!0):!1},A.wbg.__wbg_wbindgendebugstring_bb652b1bc2061b6d=function(j,e){let t=_eA(e),r=Hn(t,EA.__wbindgen_malloc,EA.__wbindgen_realloc),a=Ct;oi().setInt32(j+4*1,a,!0),oi().setInt32(j+4*0,r,!0)},A.wbg.__wbg_wbindgenin_192b210aa1c401e9=function(j,e){return j in e},A.wbg.__wbg_wbindgenisfunction_ea72b9d66a0e1705=function(j){return typeof j=="function"},A.wbg.__wbg_wbindgenisnull_e1388bbe88158c3f=function(j){return j===null},A.wbg.__wbg_wbindgenisobject_dfe064a121d87553=function(j){let e=j;return typeof e=="object"&&e!==null},A.wbg.__wbg_wbindgenisstring_4b74e4111ba029e6=function(j){return typeof j=="string"},A.wbg.__wbg_wbindgenisundefined_71f08a6ade4354e7=function(j){return j===void 0},A.wbg.__wbg_wbindgenjsvallooseeq_9dd7bb4b95ac195c=function(j,e){return j==e},A.wbg.__wbg_wbindgennumberget_d855f947247a3fbc=function(j,e){let t=e,r=typeof t=="number"?t:void 0;oi().setFloat64(j+8*1,mo(r)?0:r,!0),oi().setInt32(j+4*0,!mo(r),!0)},A.wbg.__wbg_wbindgenstringget_43fe05afe34b0cb1=function(j,e){let t=e,r=typeof t=="string"?t:void 0;var a=mo(r)?0:Hn(r,EA.__wbindgen_malloc,EA.__wbindgen_realloc),n=Ct;oi().setInt32(j+4*1,n,!0),oi().setInt32(j+4*0,a,!0)},A.wbg.__wbg_wbindgenthrow_4c11a24fca429ccf=function(j,e){throw new Error(f6(j,e))},A.wbg.__wbindgen_cast_11d0cb6a4c2f9561=function(j,e){return bS(j,e,265,uDj)},A.wbg.__wbindgen_cast_2241b6af4c4b2941=function(j,e){return f6(j,e)},A.wbg.__wbindgen_cast_3c129354eba1ab4e=function(j,e){return bS(j,e,77,cDj)},A.wbg.__wbindgen_cast_422ee1f777044945=function(j,e){return bS(j,e,265,kDj)},A.wbg.__wbindgen_cast_8d64fe854ca61107=function(j,e){var t=uOA(j,e).slice();return EA.__wbindgen_free(j,e*4,4),t},A.wbg.__wbindgen_cast_96b15ac640259c56=function(j,e){var t=uOA(j,e).slice();return EA.__wbindgen_free(j,e*4,4),t},A.wbg.__wbindgen_cast_aa8ecaad96f3664e=function(j,e){return bS(j,e,304,dDj)},A.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(j){return j},A.wbg.__wbindgen_init_externref_table=function(){let j=EA.__wbindgen_export_4,e=j.grow(4);j.set(0,void 0),j.set(e+0,void 0),j.set(e+1,null),j.set(e+2,!0),j.set(e+3,!1)},A}function qDj(A,j){return EA=A.exports,bOA.__wbindgen_wasm_module=j,nx=null,A1=null,EA.__wbindgen_start(),EA}async function bOA(A){if(EA!==void 0)return EA;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof A>"u"&&(A=new URL("b5_trustlog_bg.wasm",import.meta.url));let j=hDj();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await gDj(await A,j);return qDj(e,t)}var yOA=bOA;var zs,Fc=class{constructor(j,e){this.isPkvEnabled=async()=>{if(this.pkvEnabled===void 0){let t=await this.client.get_bookmark();this.pkvEnabled=!!t}return this.pkvEnabled},this.requireSignatures=async()=>{if(await this.isPkvEnabled())return;await eeA(this.session);let t;try{t=await this.client.require_signatures()}catch(r){throw console.error("requireSignatures failed:",r),r}await jeA(this.session,{entry:t.entry.toBase64()}),await this.signAndSubmitBookmark(t.new_bookmark),this.pkvEnabled=!0},this.createAddUsersEntry=async t=>{let r=await Promise.all(t.map(async a=>{if(!a.identityPublicKey.key)throw new Error("Missing identity public key.");let n=new Uint8Array(await De.exportKey("spki",a.identityPublicKey.key));if(!a.encryptionPublicKey.key)throw new Error("Missing encryption public key.");let o=new Uint8Array(await De.exportKey("spki",a.encryptionPublicKey.key));return new NF(a.uuid,a.keysetUuid,n,o)}));try{return await this.client.create_add_users_entry(r)}catch(a){throw console.error("createAddUsersEntry failed:",a),a}},this.createUpdateUsersEntry=async t=>{let r=await Promise.all(t.map(async a=>{if(!a.identityPublicKey.key)throw new Error("Missing identity public key.");let n=new Uint8Array(await De.exportKey("spki",a.identityPublicKey.key));if(!a.encryptionPublicKey.key)throw new Error("Missing encryption public key.");let o=new Uint8Array(await De.exportKey("spki",a.encryptionPublicKey.key));return new NF(a.uuid,a.keysetUuid,n,o)}));try{return await this.client.create_update_users_entry(r)}catch(a){throw console.error("createUpdateUsersEntry failed: ",a),a}},this.createRemoveUsersEntry=async t=>{try{return await this.client.create_remove_users_entry(t)}catch(r){throw console.error("createRemoveUsersEntry failed: ",r),r}},this.createAddGroupsEntry=async t=>{let r=await Promise.all(t.map(async a=>{if(!a.encryptionPublicKey.key)throw new Error("Missing encryption public key.");let n=new Uint8Array(await De.exportKey("spki",a.encryptionPublicKey.key));if(!a.symmetricKey.key)throw new Error("Missing symmetric key.");let o=new Uint8Array(await De.exportKey("raw",a.symmetricKey.key));return new e1(a.uuid,a.keysetUuid,n,o)}));try{return this.client.create_add_groups_entry(r)}catch(a){throw console.error("createAddGroupsEntry failed:",a),a}},this.createRemoveGroupsEntry=async t=>{try{return await this.client.create_remove_groups_entry(t)}catch(r){throw console.error("createRemoveGroupsEntry failed: ",r),r}},this.fastForward=async()=>{try{await this.client.get_bookmark(),await this.client.fast_forward()}catch(t){throw console.error("fastForward failed: ",t),t}},this.signBookmark=async t=>{try{return this.client.sign_bookmark(t)}catch(r){throw console.error("signBookmark failed: ",r),r}},this.signBookmarkWithKey=async(t,r)=>{if(!t.key)throw new Error("Missing symmetric key.");let a=new Uint8Array(await De.exportKey("raw",t.key));try{return this.client.sign_bookmark_with_key(a,r)}catch(n){throw console.error("signBookmarkWithKey failed: ",n),n}},this.signAndSubmitBookmark=async t=>{try{return await this.client.sign_and_submit_bookmark(t)}catch(r){throw console.error("signAndSubmitBookmark failed: ",r),r}},this.createRecoveryBookmark=async t=>{let r=new t1(t.userUuid,t.token);try{return await this.client.create_recovery_bookmark(r)}catch(a){throw console.error("createRecoveryBookmark failed:",a),a}},this.writeLocalBookmark=t=>{try{this.client.write_local_bookmark(t)}catch(r){throw console.error("writeLocalBookmark failed:",r),r}},this.getUserKeysetUuids=async t=>(await this.client.getUsers(t)).map(a=>({uuid:a.uuid,keysetUuid:a.keysetUuid})),this.getGroups=async t=>{let r=await this.client.getGroups(t);return Promise.all(r.map(async a=>{let n=a.keysetUuid;return{uuid:a.uuid,keysetUuid:n,encryptionPublicKey:await new Zr(n).import(a.seededEncryptionKey),symKeyVerifier:a.symKeyVerifier,isRecovery:a.isRecovery}}))},this.getUsers=async t=>{let r=await this.client.getUsers(t);return Promise.all(r.map(async a=>{let n=a.keysetUuid;return{uuid:a.uuid,keysetUuid:n,identityPublicKey:await new Qa(n).import(a.identityKey),encryptionPublicKey:await new Zr(n).import(a.seededEncryptionKey)}}))},this.client=j,this.session=e}static async getInstanceForAccount(j){return await zs.init(j,"indexed-db")}static async getInstance(j){return zs.instance?await zs.instance:(zs.instance=zs.init(j,"browserStorage"),zs.instance)}static async getInstanceIfEnabled(j){if(!j.account?.hasUnleashFeature["b5-public-key-verification"])return;let e=await zs.getInstance(j);if(await e.isPkvEnabled())return e}static clearInstance(){zs.instance=void 0}};zs=Fc;Fc.instance=void 0;Fc.wasmInitialized="uninitialized";Fc.initWasm=async()=>{zs.wasmInitialized!=="initialized"&&(zs.wasmInitialized==="uninitialized"&&(zs.wasmInitialized=(async()=>(await GDj(),"initialized"))()),await zs.wasmInitialized)};Fc.init=async(A,j)=>{await zs.initWasm();let e=A.user?.uuid;if(!e)throw new Error("Missing user UUID.");let t=A.user?.activeKeyset?.skeyPair?.priKey?.key;if(!t)throw new Error("Missing identity key.");let r=new Uint8Array(await De.exportKey("pkcs8",t)),a=A.user?.activeKeyset?.symKey.key;if(!a)throw new Error("Missing symmetric key.");let n=new Uint8Array(await De.exportKey("raw",a)),o;if(j==="browserStorage")o=LF.new(eS(A.session),new ox(e),r,n);else{let i=A.account?.uuid;if(!i)throw new Error("Missing account UUID");o=await LF.new_indexed_db(eS(A.session),new j1(i),new ox(e),r,n)}return new zs(o,A.session)};var GDj=mq(yOA,async()=>{let{default:A}=await Promise.resolve().then(()=>J($OA()));return A}),Gu=async(A,j,e)=>wOA(A,async a=>({trustLogEntryDetails:await j(a)}),async a=>e(a?.trustLogEntry)),NeA=async(A,j,e)=>wOA(A,j,async r=>{let a=r&&{trustLogEntry:r.trustLogEntry,serviceAccountBookmark:r.serviceAccountBookmark.toBase64Url()};return e(a)}),wOA=async(A,j,e,t=3)=>{let r=await Fc.getInstanceIfEnabled(A);if(!r)return e();let{newBookmark:a,oResult:n}=await IOA(async()=>{await r.fastForward();let o=await j(r),{trustLogEntryDetails:i,...s}=o;return{oResult:await e({...s,trustLogEntry:i.entry.toBase64Url()}),newBookmark:o.trustLogEntryDetails.new_bookmark}},t);try{await r.signAndSubmitBookmark(a)}catch(o){console.error("Failed to save bookmark.",o)}return n},IOA=async(A,j=3)=>{let e=1;for(;;)try{return await A()}catch(t){if(q.errors.isServerError(t,q.errors.ServerErrorReason.trustLogConflict,q.errors.HTTPStatusCode.preconditionFailed)&&e<j){console.warn("Failed to update trust log due to conflict",t),e+=1;continue}throw t}},KeA=class extends Error{},fDj=A=>lc(A)&&A.name==="TrustLogError";var sx="action/vault",POA=ar(sx),Am=ij(sx),OOA={attrs:sj.Attr.None,mustReload:!1},FDj={mustReload:!1,withAccessorPreviews:!1},Kk=Ls(),ix=Ls(),bDj=async(A,j)=>{let{hasClientAccess:e,permissions:t,types:r,usePostRequest:a=!1}=j,n=!!(t&&Kj.includes(t,me.ReadItem)),o={...OOA,...j,permission:n?"read":void 0};return(await Sn([sx,"getVaultsV2",A.id,JSON.stringify(o)],async()=>{let s=a?await Ow(A.session,o):await _T(A.session,o);return await wg(A,s)},j.cacheAllowanceMs)).filter(s=>(!e||s.hasClientAccess(bg.Web))&&(!r||r.includes(s.type))&&(!t||sj.activeUserHasAcl(s,t)))};var yDj=async(A,j,e,t)=>Sn([sx,"getVaultsV2",A.id,JSON.stringify({...t,date:j,direction:e})],async()=>{let{vaults:r,hasMoreData:a}=await bU(A.session,j,e,t||{}),n=await wg(A,r);return{hasMoreData:a,vaults:n}}),Dg=async(A,j)=>Am("getVaults",async()=>{let e={...FDj,...j},{mustReload:t,withAccessorPreviews:r}=e;if(!t){let a=r?ix.getAllEntries(A.id):Kk.getAllEntries(A.id)||ix.getAllEntries(A.id);if(a)return a}return Sn([sx,"getVaults",A.id],async()=>_T(A.session,{withAccessorPreviews:r}).then(async a=>Promise.all([wg(A,a),Date.now()])).then(([a,n])=>{let o=Ca(a,"uuid");return r?ix=ix.withOnlyEntries(A.id,o,{timestamp:n}):Kk=Kk.withOnlyEntries(A.id,o,{timestamp:n}),a}))}),fd=async(A,j,e)=>Am("getVault",async()=>{let t=K$(j);if(!t)throw new Error("Invalid vault reference");let{attrs:r,mustReload:a}={...OOA,...e},n=a?void 0:Kk.getEntry(A.id,t,{attrMask:r});return n&&n.hasAttrMask(r)?n:Sn([sx,"getVault",A.id,t],async()=>yU(A.session,t,r).then(async o=>Promise.all([us(A,o,r,n),Date.now()])).then(([o,i])=>(Kk=Kk.withEntries(A.id,{[t]:o},{attrMask:r,timestamp:i}),o)))}),$Dj=new Map([[sj.TypePersonal,IU],[sj.TypeEveryone,PU],[sj.TypeSystem,$U],[sj.TypeManagedApplications,wU],[sj.TypeGeneratedPasswords,OU]]),fu=Ls(),r1=async(A,j,e)=>{let t=$Dj.get(j);if(!t)throw new Error("Unsupported vault type.");if(!e||!e.mustReload){let n=fu.getEntry(A.id,j);if(n)return n}let r=await t(A.session);if(!r)return;let a=await us(A,r);return fu=fu.withEntries(A.id,{[j]:a}),a},jm=async(A,j)=>r1(A,sj.TypeEveryone,j),em=async(A,j)=>r1(A,sj.TypePersonal,j),wDj=async A=>Sn([sx,"getVaultsForAccountTransfer",A.id],async()=>{let j=await FU(A.session);return wg(A,j)}),IDj=A=>fu.getEntry(A.id,sj.TypePersonal),Nk=async A=>r1(A,sj.TypeSystem),lx=async A=>Am("createSystemVault",async()=>{if(!A.user)throw new Error("Missing user");let{mandatoryGroupUuids:j}=await OS(A,sj.TypeSystem),e=new sj({desc:sj.DefaultDescMarker,name:"System",type:sj.TypeSystem});await e.generateNewKey();let t=await ROA(A,e,j),{uuid:r}=await cx(A,e,t),a=await fd(A,r,{attrs:sj.Attr.All,mustReload:!0});return fu=fu.withEntries(A.id,{[sj.TypeSystem]:a}),a}),PDj=async A=>Am("createManagedVault",async()=>{if(!A.user)throw new Error("Missing user");let{mandatoryGroupUuids:j}=await OS(A,sj.TypeManagedApplications),e=new sj({desc:sj.DefaultDescMarker,name:"Managed",type:sj.TypeManagedApplications});await e.generateNewKey();let t=await ODj(A,e,j),r=await cx(A,e,t);return fu=fu.withEntries(A.id,{[sj.TypeManagedApplications]:r}),r}),PS=async A=>r1(A,sj.TypeGeneratedPasswords),a1=async A=>Am("createGeneratedPasswordsVault",async()=>{if(!A.user)throw new Error("Missing user");let{mandatoryGroupUuids:j}=await OS(A,sj.TypeGeneratedPasswords),e=new sj({desc:sj.DefaultDescMarker,name:"Generated Passwords",type:sj.TypeGeneratedPasswords});await e.generateNewKey();let t=await ROA(A,e,j),r=await cx(A,e,t);return fu=fu.withEntries(A.id,{[sj.TypeGeneratedPasswords]:r}),r}),ROA=async(A,j,e)=>{if(!A.user)throw new Error("Missing user");return Promise.all([wt.generate(j,A.user,{acl:me.DEFAULT_VAULT_CREATION_ACL}),...e.map(DS(A,j))])},ODj=async(A,j,e)=>{if(!A.user)throw new Error("Missing user");return Promise.all([wt.generate(j,A.user,{acl:me.MANAGED_VAULT_ACL}),...e.map(DS(A,j))])},OS=async(A,j)=>Am("getCreateVaultPreflight",async()=>TU(A.session,j)),LeA=async A=>CU(A.session),RDj=async(A,j,e)=>{let t=new sj(j);if(await t.generateNewKey(),!A.user)throw new Error("Missing user");let r=A.user.type!==Dj.Type.ExternalAccountManagement,a=await Promise.all([...r?[wt.generate(t,A.user,{acl:me.ALL})]:[],...e.map(DS(A,t))]);return cx(A,t,a)},RS=async A=>{let{user:j,account:e}=A;if(!j)throw new Error("Missing user.");if(!e)throw new Error("Missing account.");let t=dx(e.type),r=await Bo(A,{attrs:IA.Attr.PubKey});await t.generateNewKey();let a=[wt.generate(t,j,{acl:me.RWE|me.Manage}),wt.generate(t,r,{acl:me.Recover})],n=await Promise.all(a);return hd(t,n)},zeA=async(A,j,e)=>{let t={...j,type:sj.TypeUserCreated},r=new sj(t);if(await r.generateNewKey(),!A.user)throw new Error("Missing user");let a=await Promise.all([wt.generate(r,A.user,{acl:me.ALL}),...e.map(DS(A,r))]);return TDj(A,r,a)},DDj={[IA.TypeRecovery]:me.Recover,[IA.TypeOwners]:me.Manage,[IA.TypeAdmins]:me.Manage,[IA.TypeExternalAccountManagers]:me.Manage},DS=(A,j)=>async e=>{let t=await Ka(A,e,{attrs:IA.Attr.PubKey}),r=DDj[t.type];if(typeof r!="number"||r===0)throw new Error("System group ACL is not defined for this group");return wt.generate(j,t,{acl:r})},n1=async(A,j,e)=>{if(await j.encryptAttrs(),!A.user)throw new Error("Missing user");if(!A.user.activeKeyset)throw new Error("Missing user");if(!j.activeKey)throw new Error("Missing active key");return await j.activeKey.encryptWithKey(A.user.activeKeyset.ekeyPair),hd(j,e)},DOA=(A,j)=>{A.getCombinedAcl()===void 0&&A.setCombinedAcl(j.reduce((e,t)=>e|t.acl,0))},cx=async(A,j,e)=>{let t=await n1(A,j,e);return await _U(A.session,t),DOA(j,e),j},TDj=async(A,j,e)=>{let t=await n1(A,j,e);return await SU(A.session,t),DOA(j,e),j},CDj=async(A,j)=>KU(A.session,j.uuid),_Dj=async(A,j)=>{await NU(A.session,j.uuid),Kk=Kk.withoutEntries(A.id,[j.uuid])},TS=async(A,j)=>Am("updateVault",async()=>j.encryptAttrs().then(async e=>RU(A.session,hd(e)))),SDj=async(A,j,e)=>{await DU(A.session,j,e)},HDj=async(A,j)=>{await XU(A.session,j.uuid),pr(A)},MDj=async(A,j)=>{await JU(A.session,j.uuid),pr(A)},KDj=async(A,j)=>{await WU(A.session,j.uuid),pr(A)},NDj=async(A,j)=>{await QU(A.session,j.uuid),pr(A)},UeA=()=>{Kk=Ls()},VeA=A=>{Kk=Kk.withoutContext(A.id)},XeA=()=>{ix=Ls()},JeA=A=>{ix=ix.withoutContext(A.id)},LDj=(A,j,e)=>Am("getVaultAccessForAdmin",async()=>HU(A.session,j,e).catch(POA("getVaultAccessForAdmin"))),zDj=(A,j,e)=>Am("getVaultUserAccessCount",async()=>MU(A.session,j,e).catch(POA("getVaultUserAccessCount")));var TOA="action/user",ii=ij(TOA),UF=15,Lk=Ls(),UDj=async(A,j)=>ii("updateUser",async()=>{let e=j||A.user;return e?uQ(A.session,XI(e)):Promise.reject(new Error("Missing user"))}),o1=(A,j)=>Lk.getEntry(A.id,j),VDj=(A,j)=>{Lk=Lk.withOnlyEntries(A.id,Ca(j,"uuid"))},WeA=()=>{Lk=Ls()},QeA=A=>{Lk=Lk.withoutContext(A.id)},YeA=(A,j)=>{Lk=Lk.withEntries(A.id,{[j.uuid]:j})},XDj={attrs:zr.Attr.None,mustReload:!1},Fu=async(A,j,e)=>ii("getPerson",async()=>{let t=$o(j);if(!t)throw new Error("Invalid user reference");let{attrs:r,mustReload:a,excludeGroupVaultAccess:n}={...XDj,...e},o=a?void 0:Lk.getEntry(A.id,t,{attrMask:r});return o&&o.hasAttrMask(r)?o:Sn([TOA,"getPerson",A.id,t,r],async()=>rQ(A.session,t,r,{excludeGroupVaultAccess:n}).then(async i=>{let s=Date.now();return Promise.all([Hk(A,i,r,o),s])}).then(([i,s])=>{let l=n?r^zr.Attr.VaultAccess:r;return Lk=Lk.withEntries(A.id,{[t]:i},{attrMask:l,timestamp:s}),i}))}),COA=async(A,j)=>{let e=await vc(A,j);return SF(j,e)},JDj=async(A,j,e)=>ii("confirmUsers",async()=>{if(!Ry(j)){if(A.account&&A.account.hasFeature.members)A.account.teamMembersGroup?await QDj(A,j,e):await e4j(A,j);else throw new Error("Cannot confirm members for this account");pr(A),A.nc.emit(Vt.UsersChanged)}}),WDj=25,QDj=async(A,j,e)=>ii("confirmWithTeamMembersGroup",async()=>{let t=await zk(A);await W6(async a=>{let n=await COA(A,a),o=n.filter(s=>s.type===Dj.Type.Regular),i=await ZDj(A,o,t);return e?await j4j(A,n,i,e):await A4j(A,n,i),[]},WDj,j)}),YDj=async(A,j)=>{if(!A.account)throw new Error("Failed to get account.");let e=dx(A.account.type,j.avatar),t=Bo(A,{attrs:IA.Attr.PubKey}),r=zk(A,{attrs:IA.Attr.PubKey}),a=e.generateNewKey(),[n,o]=await Promise.all([t,r,a]),i=Rg(A,j,o,{role:dr.Role.Member}),s=wt.generate(e,j,{acl:me.RWE|me.Manage}),l=wt.generate(e,n,{acl:me.Recover}),[c,k,u]=await Promise.all([i,s,l]),m=await n1(A,e,[k,u]);return EQ(A.session,j.uuid,m,c)},ZDj=async(A,j,e)=>ii("addMembersToGroup",async()=>{let t=await Gd(A,e);return Promise.all(j.map(async r=>e.createMembership(t,r,{role:dr.Role.Member})))}),ZeA=A=>async j=>{let e=await SOA(A);return j.createAddUsersEntry(e)},A4j=async(A,j,e)=>ii("confirmWithGroupMemberships",async()=>{let t=Yr(j.map($o));return Gu(A,ZeA(j),r=>oQ(A.session,t,e,r))}),j4j=async(A,j,e,t)=>ii("confirmWithGroupMembershipsAndVaults",async()=>{let r=Yr(j.map(o=>$o(o.uuid))),a=$3(o=>o.uuid,o=>o,j),n=[];for(let o of t){let i=await fd(A,o.vaultUuid,{attrs:sj.Attr.All});if(!i)throw new Error(`Missing vault for ${o.vaultUuid}`);let s=a[o.accessorUuid];s?.type===Dj.Type.Regular&&n.push(await wt.generate(i,{...s,accessorType:o.accessorType},{acl:o.acl}))}return Gu(A,ZeA(j),o=>sQ(A.session,r,e,n,o))}),e4j=async(A,j)=>ii("confirmWithEveryoneVault",async()=>{let e=await jm(A,{attrs:sj.Attr.All});if(!e)throw new Error("Missing Everyone vault");let t=await COA(A,j),r=t.filter(i=>i.type===Dj.Type.Regular).map(async i=>wt.generate(e,{...i,accessorType:"user"},{acl:me.RWE})),n=(await Promise.all(r)).map(Rl),o=Yr(t.map($o));return Gu(A,ZeA(t),i=>iQ(A.session,o,n,i))}),_OA=async(A,j)=>ii("suspendUsers",async()=>{await W6(async t=>(await lQ(A.session,t),[]),UF,j.map($o)),pr(A),A.nc.emit(Vt.UsersChanged)}),t4j=async(A,j)=>ii("markAwayForTravel",async()=>cQ(A.session,j.map($o)).then(()=>{pr(A),A.nc.emit(Vt.UsersChanged)})),r4j=async(A,j)=>ii("markBackFromTravel",async()=>dQ(A.session,j.map($o)).then(()=>{pr(A),A.nc.emit(Vt.UsersChanged)})),a4j=async(A,j)=>ii("beginUserRecovery",async()=>{await W6(async t=>(await CY(A.session,t),[]),UF,j.map($o)),pr(A),A.nc.emit(Vt.UsersChanged)}),CS=async(A,j)=>ii("cancelUserRecovery",async()=>{await W6(async t=>(await _Y(A.session,t),[]),UF,j.map($o)),pr(A),A.nc.emit(Vt.UsersChanged)}),n4j=async(A,j)=>ii("completeUserRecovery",async()=>{let e=await vc(A,j);await W6(async r=>{let a=r.map(c=>c.uuid),n=await HY(A.session,a),i=await(await geA(A,n)).encryptForPeople(r),s=await Fc.getInstanceIfEnabled(A);if(!s)return await iI(A.session,a,{...i}),[];let l=await o4j(s,r);return l.length===0?(await iI(A.session,a,{...i}),[]):(await Gu(A,async c=>c.createUpdateUsersEntry(l),async c=>iI(A.session,a,{...i,trustLogEntry:c})),[])},UF,e),pr(A),A.nc.emit(Vt.UsersChanged)}),o4j=async(A,j)=>{let e=j.map(n=>n.uuid),t=await SOA(j);await A.fastForward();let a=(await A.getUserKeysetUuids(e)).reduce((n,o)=>(n[o.uuid]=o.keysetUuid,n),{});return t.filter(n=>{let o=a[n.uuid];if(!o)throw new Error("Received unexpected response: failed to find user in trust log.");return n.keysetUuid!==o})},SOA=async A=>Promise.all(A.map(async j=>{let e=await new Qa().import(j.spubKey),t=await cs(j.pubKey);return{uuid:j.uuid,keysetUuid:e.uuid,identityPublicKey:e,encryptionPublicKey:t}})),i4j=async(A,j)=>ii("reactivateUsers",async()=>{await W6(async t=>(await kQ(A.session,t),[]),UF,j.map($o)),pr(A),A.nc.emit(Vt.UsersChanged)}),AtA=async(A,j)=>ii("deleteUsers",async()=>{let e=j.filter(a=>a.state===Dj.State.RecoveryStarted),t=j.filter(a=>!Dj.canBeDeleted(a)),r=Promise.resolve();return e.length>0&&(r=r.then(async()=>CS(A,e))),t.length>0&&(r=r.then(async()=>_OA(A,t))),r.then(async()=>W6(async a=>{let n=a.filter(Dj.mustBeRecordedToTrustLogWhenDeleted).map(i=>i.uuid),o=async i=>{let s=a.map(l=>l.uuid);return nQ(A.session,{uuids:s,trustLogEntry:i})};return n.length>0?await Gu(A,i=>i.createRemoveUsersEntry(n),o):await o(),[]},UF,j)).then(()=>{pr(A),A.nc.emit(Vt.UsersChanged)})}),s4j=async(A,j,e)=>{let t={...XI(j),imageId:e};return eI(A.session,t)},l4j=async(A,j,e)=>ii("changeUserName",async()=>{let t=fy(XI(j),{name:e});return jI(A.session,t)}).then(()=>{pr(A),A.nc.emit(Vt.UsersChanged)}),c4j=async(A,j,e)=>ii("getRecoveryDetails",async()=>OY(A.session,j,{token:e})),d4j=async(A,j,e)=>RY(A.session,j,{token:e}),k4j=async(A,j,e)=>DY(A.session,j,{token:e}),zF;(function(A){A.INCORRECT_CODE="INCORRECT_CODE",A.ATTEMPT_LIMIT_REACHED="ATTEMPT_LIMIT_REACHED",A.CODE_EXPIRED="CODE_EXPIRED"})(zF||(zF={}));var u4j=async(A,j,e,t)=>TY(A.session,j,{token:e,emailVerificationChallenge:t}).catch(r=>{if(CA.isNewServerError(r))switch(r.reason){case CA.ServerErrorReason.maximumAttemptsReached:return zF.ATTEMPT_LIMIT_REACHED;case CA.ServerErrorReason.incorrectValue:return zF.INCORRECT_CODE;case CA.ServerErrorReason.expired:return zF.CODE_EXPIRED;case void 0:default:throw r}else throw r}),i1=async(A,j,e,t)=>{let r={email:j,secretKey:await ba.generate(),password:Se()},a=new Eo({...r,uuid:t,name:e,language:A.user?.language||"en",newsletterPrefs:0}),n=await ra.generate(r);return a.masterKey=await rr.deriveDefaultKdf(r),await a.generateNewKeyset(),{user:a,userAuth:n}};var E4j="action/provision",Dl=ij(E4j),jtA=async(A,j,e)=>Dl("createProvisionUser",async()=>{let t=A.user;if(!t)return Promise.reject(new Error("Missing user."));if(!t.activeKeyset)return Promise.reject(new Error("Missing active keyset."));let a=j.activeKeyset;if(!a)return Promise.reject(new Error("Missing provision user's active keyset"));let n=A.account;if(!n)return Promise.reject(new Error("Missing account."));let o=n.teamMembersGroup;if(!o)return Promise.reject(new Error("No Team Members group found."));j.uuid=zr.UUIDNewlyCreatedProvisionUser;let i=new sj({name:"Private",type:sj.TypeProvision,desc:sj.DefaultDescMarker,avatar:j.avatar}),s=Bo(A,{attrs:IA.Attr.PubKey}),l=i.generateNewKey(),c=jm(A,{attrs:sj.Attr.All}),k=s1(A,{attrs:IA.Attr.PubKey}),u=Rg(A,j,o,{role:dr.Role.Member});return Promise.all([s,l,c,k,u]).then(async([m,F,S,G,x])=>{if(G===void 0)return Promise.reject(new Error("Provision Managers group not found."));let R=G.activeKeysetUuid?Y6(A,G.activeKeysetUuid):void 0;if(!R)return Promise.reject(new Error("Provision Managers group keyset not found."));let P=wt.generate(i,j,{acl:me.RWE|me.Manage}),D=wt.generate(i,G,{acl:me.RWE}),y=wt.generate(i,m,{acl:me.Recover}),h=a.encryptWithKey(R.symKey);return Promise.all([P,D,y,x,h])}).then(async([m,F,S,G,x])=>{let R={vaults:[Rl(m)],groups:[G]};if(!j.secretKey)return Promise.reject(new Error("Missing Secret Key."));let P={user:{email:j.email,language:j.language,name:j.name,newsletterPrefs:j.newsletterPrefs,externalGUID:j.externalGUID,accountKeyFormat:j.secretKey.format.toString(),accountKeyUuid:j.secretKey.id,avatar:j.avatar},keyset:x,userAuth:ra.getForUpload(e),vault:hd(i,[F,S]),access:R};return lY(A.session,P)}).then(async m=>{let F=zr.Attr.VaultAccess|zr.Attr.PubKey|zr.Attr.Keysets;return Hk(A,m,F,o1(A,m.uuid))})}),etA=async(A,j,e)=>Dl("startUserProvision",async()=>{let t=j.uuid;await cY(A.session,t,e||{}),pr(A),A.nc.emit(Vt.UsersChanged)}),p4j=async(A,j)=>Dl("suspendUserProvision",async()=>{let e=j.uuid;await dY(A.session,e),pr(A),A.nc.emit(Vt.UsersChanged)}),m4j=async(A,j,e)=>Dl("getProvisionDetailsV2",async()=>mY(A.session,j,e)),B4j=async(A,j,e)=>Dl("sendProvisionStartedConfirmation",async()=>BY(A.session,j,e)),g4j=async(A,j)=>Dl("finishUserConfirmation",async()=>wY(A.session,A.config.host,j)),HOA=async A=>{let j=await Ow(A.session,{types:[sj.TypeProvision]});if(!j.length)return null;j.length>1&&console.error(`findAndRenameProvisionTransferVault - Found ${j.length} transfer vaults, but only one is expected.`);let e=j[0];if(!e)return null;let t=await us(A,e);if(!A.account)throw new Error("Missing account.");t.name=c1(A.account.type),t.type=sj.TypePersonal;let r=await t.encryptAttrs();return hd(r)},h4j=async A=>{let j=A.user;if(!j)throw new Error("Missing user.");if(!j.secretKey)throw new Error("Missing Secret Key.");let e=await j.encryptActiveKeysetWithMasterKey(),t=A.userAuth;if(!t)throw new Error("Missing auth for user.");let r=await HOA(A)??await RS(A),a={accountKeyFormat:j.secretKey.format.toString(),accountKeyUuid:j.secretKey.id,keyset:e,authRegistration:ra.getForUpload(t),vault:r};return IY(A.session,a)},q4j=async(A,j,e)=>Dl("sendProvisionedConfirmation",async()=>gY(A.session,j,e)),x4j=async(A,j,e,t)=>qY(A.session,j,e,t),v4j=async(A,j,e)=>xY(A.session,j,e),G4j=async(A,j,e)=>Dl("resendProvisioningEmailVerification",async()=>hY(A.session,j,e)),f4j=async(A,j)=>Dl("completeUserProvision",async()=>{let e=GY(A.session,j.uuid).then(async r=>us(A,r,sj.Attr.None,void 0)).then(async r=>A.account?(r.name=c1(A.account.type),r.type=sj.TypePersonal,r.encryptAttrs()):Promise.reject(new Error("Missing account."))).then(r=>hd(r)),t=FY(A.session,j.uuid).then(async r=>meA(A,r)).then(async r=>r.encryptForPerson(j));return Promise.all([e,t]).then(async([r,a])=>{let n={provisionedKeys:a,personalVault:r};return fY(A.session,j.uuid,n)}).then(()=>{pr(A),A.nc.emit(Vt.UsersChanged)})}),F4j=async(A,j,e)=>Dl("resendUserProvision",async()=>{let t={userUuids:j.map(r=>r.uuid),useToken:e};await kY(A.session,t),pr(A),A.nc.emit(Vt.UsersChanged)}),b4j=async(A,j)=>Dl("resendAllUsersProvision",async()=>{await uY(A.session,j),pr(A),A.nc.emit(Vt.UsersChanged)}),y4j=async A=>Dl("getResendDetails",async()=>{let j=await EY(A.session);return{lastResendAt:X6(j.lastResendAt),resendAllCooldown:j.resendAllCooldown}}),s1=async(A,j)=>{let e=A.account;if(!e)throw new Error("Missing account.");let t=e.groups.find(r=>!r.isTypeOwners&&!r.isTypeAdmins&&r.hasPermission(tt.ProvisionPeople));if(t)return Ka(A,t,j)},$4j=async(A,j)=>{let e=A.account;if(!e)throw new Error("Missing account.");let t=e.groups.find(r=>r.isTypeProvisioning);if(t)return Ka(A,t,j)},w4j=async(A,j,e,t,r,a,n,o)=>{if(!e.ekeyPair.priKey.jwk||!e.symKey.jwk||!e.skeyPair?.priKey?.jwk)throw new Error("Provisioning Service plaintext keyset is missing values");let i={uuid:e.uuid,sn:e.sn,priKey:e.ekeyPair.priKey.jwk,symKey:e.symKey.jwk,signingKey:e.skeyPair?.priKey?.jwk},s=Ax(t,IA.Attr.PubKey).pubKey;if(!s)throw new Error("Provisioning Group public key not found.");return bY(A.session,A.config.host,{psaKeyset:i,provisioningGroupPublicKey:s,emailDomains:r.split(","),recoveryGroupUuid:a,notificationEmails:n,identityProvider:o},j)},l1=async(A,j,e)=>yY(A.session,j,e),I4j=async(A,j,e)=>{if(!A.account||!A.user)throw new Error("Missing account or user.");if(!Dj.isOwner(A.user)&&!Dj.isAdmin(A.user))throw new Error("Must be in the Administrators or Owners group to edit.");return oI(A.session,j,{state:e})},P4j=async(A,j,e)=>{if(!A.account||!A.user)throw new Error("Missing account or user.");if(!Dj.isOwner(A.user)&&!Dj.isAdmin(A.user))throw new Error("Must be in the Administrators or Owners group to edit.");return await oI(A.session,j,{notificationEmails:e})},O4j=async(A,j,e)=>{if(!A.account||!A.user)throw new Error("Missing account or user.");if(!Dj.isOwner(A.user)&&!Dj.isAdmin(A.user))throw new Error("Must be in the Administrators or Owners group to edit.");if(!A.user.hasPermission(tt.ProvisionPeople))throw new Error("Must be in the Provisioning Managers group to edit.");let[t,r]=await Promise.all([l1(A,j,[nI.EncryptedPuk]),s1(A,{attrs:IA.Attr.All,mustReload:!0})]);if(!t?.integration?.encryptedPuk)throw new Error("Missing encrypted PUK in integration response.");if(!r?.activeKeysetUuid)throw new Error("Unable to get active keyset from provisioning managers group.");let a=t.integration.encryptedPuk,n=Y6(A,r.activeKeysetUuid);if(!n)throw new Error("Unable to find provisioning manager group keyset");let o=await n.decrypt(a),i=Ij("sign"),l=await dn.rawHkdf(dn.Sha2Mode.Sha256,new Uint8Array(o),i,new Uint8Array,32),c=O4(e),k=JSON.stringify(c),u=Gp(l,k),m=Aj(u),F=await oI(A.session,j,{emailDomains:{list:e,signature:m}});return A.account.attrVersion++,pr(A),po(A),F},R4j=async(A,j,e,t)=>{if(!A.user)throw new Error("Missing user.");let r=await t.encryptCredentialBundle(j),a=await HOA(A)??await RS(A),n=await t.decryptCredentialBundle(r);A.user.masterKey=n.auk;let o={device:e,deviceCredentials:{v:2,encCredentials:r},vault:a};await vY(A.session,o)},VF=async A=>{let e=(await kI(A.session)).serviceAccounts.filter(r=>r.serviceAccountType===Gt.Provisioning);if(!e)return;let t=e.find(r=>r.name===FS);if(t)return t},D4j=async A=>{let j=await VF(A);return j?(await l1(A,j.uuid,[])).integration.state:void 0},T4j=async A=>Dl("hostedProvisioningIntegrationExists",async()=>pY(A.session)),ttA="opp_",rtA="v1_",MOA=100,C4j=async(A,j,e,t,r)=>{if(e.length===0)return{failedBatches:[]};let a=j.replace(ttA,"").replace(rtA,""),n=0,o=[];return await W6(async s=>{n++;try{await PY(A.session,A.config.host,{apiSecret:a,userUuids:s},t)}catch{o.push([...s])}return r&&r(n),[]},MOA,e),{failedBatches:o}},_4j=async(A,j,e)=>Dl("createProvisioningIntegrationToken",async()=>{let t=await Gd(A,e);if(!t.ekeyPair.priKey.jwk||!t.symKey.jwk)throw new Error("Provisioning group keyset is missing values");let r={uuid:t.uuid,sn:t.sn,priKey:t.ekeyPair.priKey.jwk,symKey:t.symKey.jwk},a=await $Y(A.session,A.config.host,j,{provisioningGroupPlaintextKeyset:r});return`${ttA}${rtA}${a.apiSecret}`});var atA="action/group",d1=ar(atA),XF=ij(atA),ntA={attrs:IA.Attr.None},S4j=async(A,j)=>XF("getGroups",async()=>{let{attrs:e,groupUuids:t=[],limit:r,offset:a,search:n,user:o,vault:i,types:s,sort:l,sortDir:c,membershipsOnly:k}={...ntA,...j},u=j?.usePostRequest||!1;if(!u&&Pq(j?.search))return[];let m={groupUuids:t,limit:r,membershipsOnly:k||!1,offset:a,search:n,types:s,sort:l,sortDir:c,user:o,vault:i};return(u?YU:MT)(A.session,e,m).then(async S=>RF(A,S))}),H4j=async(A,j)=>XF("searchGroupsCount",async()=>{let{attrs:e,search:t,user:r,vault:a}={...ntA,...j};return Pq(j?.search)?0:ZU(A.session,e,{search:t,user:r,vault:a}).then(async n=>n)}),otA=async(A,j)=>XF("getManagableGroups",async()=>{let{attrs:e}={...ntA,...j};return MT(A.session,e).then(async t=>RF(A,t.filter(r=>r.type!==IA.TypeRecovery&&r.type!==IA.TypeExternalAccountManagers)))}),M4j={attrs:IA.Attr.None,mustReload:!1},Ka=async(A,j,e)=>XF("getGroup",async()=>{let t=mk(j);if(!t)throw new Error("Invalid group reference");let{attrs:r,mustReload:a}={...M4j,...e},n=A.account&&A.account.findGroup(t);return n&&!a&&n.hasAttrMask(r)?n:AV(A.session,t,r).then(async o=>iS(A,o,r,n))}),Bo=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.recoveryGroup;if(!e)throw new Error("Missing recovery group");return Ka(A,e,j)}).catch(d1("getRecoveryGroup")),_S=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.administratorsGroup;if(!e)throw new Error("Missing administrators group");return Ka(A,e,j)}).catch(d1("getAdministratorsGroup")),SS=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.ownersGroup;if(!e)throw new Error("Missing owners group");return Ka(A,e,j)}).catch(d1("getOwnersGroup")),zk=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.teamMembersGroup;if(!e)throw new Error("Missing members group");return Ka(A,e,j)}).catch(d1("getTeamMembersGroup")),K4j=async(A,j)=>Promise.resolve().then(async()=>{let e=A.account&&A.account.securityGroup;if(!e)throw new Error("Missing security group");return Ka(A,e,j)}).catch(d1("getSecurityGroup")),Uk=async(A,j,e)=>XF("generateNewKeysetForGroup",async()=>Ya.generateWithoutSigningKeys().then(async t=>(nS(A,[t]),Promise.resolve().then(async()=>{if(j.activeKeysetUuid){let r=Y6(A,j.activeKeysetUuid);return r?(t.sn=r.sn+1,r.encryptWithKey(t.symKey).then(a=>{j.archivedKeysets=[a,...j.archivedKeysets]})):Promise.reject(new Error("Missing current active keyset."))}return t.sn=1,Promise.resolve()}).then(async()=>t.ekeyPair.pubKey?(j.pubKey=t.ekeyPair.pubKey,j.activeKeysetUuid=t.uuid,j.enableKeysetRecovery(t,e)):(Or(new xe({errorClass:$n.ValidationError,userUuid:A.user?.uuid?W(A.user.uuid):void 0,message:p`Missing public key`})),Promise.reject(new Error("Missing public key.")))).then(()=>t)))),itA=async(A,j)=>{let e=new IA(j),t=await Bo(A,{attrs:IA.Attr.PubKey}),r=await Uk(A,e,t);return A.user?(A.user.isExternalAccountManagement||await e.addMembership(r,A.user,{role:dr.Role.Manager}),await Gu(A,N4j([{uuid:e.uuid,activeKeyset:r}]),async a=>bu(A,e,a))):Promise.reject(new Error("Missing user"))},bu=async(A,j,e)=>{if(!j.activeKeysetUuid)throw new Error("Missing active keyset uuid");if(!j.pubKey?.jwk)throw new Error("Missing group public key");let t={uuid:j.uuid,type:j.type,name:j.name,desc:j.desc,pubKey:j.pubKey.jwk,activeKeysetUuid:j.activeKeysetUuid,attrVersion:j.attrVersion,archivedKeysets:j.archivedKeysets,avatar:j.avatar,memberships:j.memberships,recoverableKeyset:j.recoverableKeyset,recoveryKeyset:j.recoveryKeyset,trustLogEntry:e};if(await rV(A.session,t),A.account&&A.account.pushGroup(j),A.user){let r=j.getMembership(A.user.uuid);r&&A.user.pushGroupMembership(r)}return j},N4j=A=>j=>{let e=A.map(t=>({uuid:t.uuid,keysetUuid:t.activeKeyset.uuid,encryptionPublicKey:t.activeKeyset.ekeyPair.pubKey,symmetricKey:t.activeKeyset.symKey}));return j.createAddGroupsEntry(e)},L4j=async(A,j)=>{await Gu(A,e=>e.createRemoveGroupsEntry([j.uuid]),async e=>aV(A.session,j.uuid,{trustLogEntry:e})),pr(A),A.account&&A.account.removeGroup(j)},z4j=async(A,j)=>{await nV(A.session,j.uuid),pr(A),A.account&&A.account.removeGroup(j)},U4j=async(A,j)=>{let e=await Ka(A,j);e!==j&&A.account&&(A.account.removeGroup(e),A.account.pushGroup(j),console.warn(new Error("Stale group reference.")));let t={name:j.name,desc:j.desc,attrVersion:j.attrVersion,avatar:j.avatar};await eV(A.session,j.uuid,t),j.attrVersion++,po(A)},JF=async A=>{let j=await Bo(A);if(!j.activeKeysetUuid)throw new Error("Missing group's active keyset UUID.");return Y6(A,j.activeKeysetUuid)},V4j=async(A,j,e)=>{j=await Ka(A,j);let r=(await KOA(A)).includes(j.uuid);if(Kj.includesAny(e,oW)&&r)throw new Error("Cannot add permission to a group managed by a provisioning integration");if(Kj.includesAny(e,IC)&&!j.recoveryKeyset){let a=await JF(A);if(!a)throw new Error("Failed to find Recovery keyset");await WF(A,j,a)}return j.permissions=e,await tV(A.session,j.uuid,e),j},KOA=async A=>{let j=await VF(A);return j?(await Fu(A,j?.uuid,{attrs:zr.Attr.Groups,mustReload:!0})).groupMemberships.filter(r=>r.role===dr.Role.Manager).map(r=>r.groupUuid):[]},WF=async(A,j,e)=>{if(j=await Ka(A,j,{attrs:IA.Attr.PubKey}),!j.pubKey)throw new Error("Missing group's public key");let t=await e.encryptWithKey(j.pubKey);j.recoveryKeyset=t;let r=Ax(j,IA.Attr.None);return await cV(A.session,r),j},X4j=async(A,j)=>Sn([atA,"getGroupMemberCSV",A.id],async()=>dV(A.session,j.uuid)),Gd=async(A,j)=>XF("getActiveKeysetForGroup",async()=>{let e=j.activeKeysetUuid;if(!e)return Promise.reject(new Error("Missing group's active keyset UUID."));let t=Y6(A,e);return t?Promise.resolve(t):oS(A).then(async()=>{let r=Y6(A,e);return r?Promise.resolve(r):Ka(A,j,{attrs:IA.Attr.RecoverableKeyset}).then(async a=>{if(a.recoverableKeyset){let n=Y6(A,a.recoverableKeyset.encryptedBy);if(n)return a.decryptRecoverableKeyset(n).then(o=>(nS(A,[o]),o))}return Promise.reject(new Error("Missing group's active keyset."))})})}),J4j=async(A,j)=>kV(A.session,{groupUuids:j}),W4j=async(A,j,e)=>uV(A.session,j,{applicationUuids:e});var kx=async(A,j)=>(await RW(A.session,j)).combinedAccess,k1;(function(A){A[A.Fulfilled=0]="Fulfilled",A[A.Rejected=1]="Rejected"})(k1||(k1={}));var Q4j=async A=>LOA(A,Object.values(ss)),LOA=async(A,j)=>{let e=await Promise.all(j.map(async r=>{try{return{status:k1.Fulfilled,value:await kx(A,r)}}catch{return{status:k1.Rejected}}})),t=[];return e.forEach(r=>{r.status===k1.Fulfilled&&t.push(r.value)}),t},Y4j=async(A,j,e,t)=>HW(A.session,j,e,t||{}),stA=async(A,j,e)=>{let t=j.find(a=>a.uuid===A.encryptedBy);if(!t)throw new Error("None of the keysets match this object data");let r;if(A.data.dataType!==Tn.None&&A.data.dataType!==Tn.UserManagedServiceAccountCreator){let n=await(await Ot().decryptWithKeyset(t,A.data.encKey)).decrypt(A.data.encData);r=cj(n,Ne.pipe(e)).unwrap()}return{objectUuid:A.objectUuid,data:r,acl:A.acl}},YF=async(A,j,e,t)=>{let r=j.data.find(n=>n.objectUuid===e&&n.data.dataType!==Tn.None);if(!r)throw new Error("Unable to find object data for uuid");if(dtA(r)){let n=await Sk(A,j.keysets);return stA(r,n,t)}let a=cj(r.data,t).unwrap();return{objectUuid:r.objectUuid,data:a,acl:r.acl}},ltA=async(A,j,e)=>{let t=await oF(A.session,j,e);for(let r of t.requiredGroups){let a=await Ka(A,r,{attrs:IA.Attr.PubKey});await u1(A,j,Di.Manage,a,[],t)}return await CC(A.session,j)},ctA=async(A,j,e,t,r,a=[])=>{let n=await CC(A.session,j);if(n||(n=await ltA(A,j,t)),!n)throw new Error("Unable to get or bootstrap object data preflight.");let o=await QF(j,r.objectUuid,e,r,[...n.accessors,...a]);await _W(A.session,j,{objectUuid:r.objectUuid,data:o})},Z4j=async(A,j)=>{let e=[...j.accessors],t=ss.ServiceAccountUserManaged;if(!j.accessors?.length){let r=await ltA(A,t,Di.Manage);if(!r)throw new Error("Unable to get or bootstrap object data preflight.");e=[...r.accessors]}return e.map(r=>({objectType:t,objectUuid:j.uuid,data:{dataType:Tn.UserManagedServiceAccountCreator},encryptedBy:r.kid,acl:[ai.ServiceAccountCreatorManaged]}))},zOA=async(A,j,e,t,r)=>{await MW(A.session,j,e,r,t)},QF=async(A,j,e,t,r)=>Promise.all(r.map(async a=>{let n;if(t.data&&ATj(e,t.acl,a.acl)){let o=a.encKeyset?.pubKey||a.pubKey;if(!o)throw new Error("missing encryption public key for ODA");let i=Ot();await i.generate(Nt);let s=await i.encrypt(Qe(t.data)),l=await cs(o),c=await i.encryptWithKey(l);n={dataType:e,encKey:c,encData:s}}else n={dataType:Tn.None};return{objectType:A,objectUuid:j,data:n,encryptedBy:a.kid,acl:t.acl}})),ATj=(A,j,e)=>A===Tn.ConnectCredentialsSigningPrivateKeyToken||A===Tn.ConnectCredentialsFull?j.some(r=>r===ai.ServiceAccountTokenCreate)||e.some(r=>r===ai.ServiceAccountTokenCreate||r===Di.Manage):!0,jTj=A=>{let j;switch(A.accessorType){case"group":{j=fl.Group;break}case"user":{j=fl.User;break}default:throw new Error("Accessor type not supported")}return j},u1=async(A,j,e,t,r,a)=>{if(!t.pubKey)throw new Error("Unable to add object data access for group.");let n=(0,NOA.default)().toISOString(),o=await Ya.generateWithSigningKeys();o.sn+=1;let i=await o.encryptWithKey(t.pubKey),s={state:aF.Active,objectType:j,accessorUuid:t.uuid,accessorType:jTj(t),kid:o.uuid,pubKey:i.pubKey,encKeyset:i,encryptedBy:t.pubKey.uuid,acl:[e,...r],createdAt:n,updatedAt:n},l=await UOA(A,a,s),c={access:s,data:l};return await DW(A.session,c),s},eTj=async(A,j,e,t)=>TW(A.session,j,e,t),UOA=async(A,j,e)=>{if(!j.keyset)return[];if(!e.encKeyset)throw new Error("Missing encKeyset");let[t]=await Sk(A,[j.keyset]);if(t===void 0)throw new Error("reEncryptRequiredData: Error decrypting ODA preflight keyset");return Promise.all(j.data.map(async r=>{if(!dtA(r))return{objectType:r.objectType,objectUuid:r.objectUuid,data:r.data,encryptedBy:e.kid,acl:r.acl};let a=await stA(r,[t],hjA),[n]=await QF(r.objectType,r.objectUuid,r.data.dataType,a,[e]);if(n===void 0)throw new Error("Error encrypting ODA");return n}))},dtA=A=>"encKey"in A.data&&"encData"in A.data,VOA=async(A,j)=>SW(A.session,j),XOA=async(A,j,e,t)=>oF(A.session,j,e,t),tTj=async(A,j,e,t,r)=>{let a=await Promise.all(j.map(async s=>{let l=await XOA(A,e,Di.Some,s);if(l.existingAccess)return l.existingAccess;let c=await Ka(A,s,{attrs:IA.Attr.PubKey});return u1(A,e,Di.Some,c,[],l)})),n=await kx(A,e),o=await YF(A,n,t,r),i=await QF(e,t,Tn.ConnectCredentialsSigningPrivateKeyToken,o,a);await AI(A.session,e,{objectUuid:t,data:i})},rTj=async(A,j,e,t,r,a)=>{let o=(await CW(A.session,e,fl.Group,j)).access[0];if(o){let i=await kx(A,e),s=await YF(A,i,t,r);await zOA(A,e,t,j,fl.Group);let l={...s,acl:a},c=await QF(e,t,Tn.ConnectCredentialsSigningPrivateKeyToken,l,[o]);try{await AI(A.session,e,{objectUuid:t,data:c})}catch(k){let u=await QF(e,t,Tn.ConnectCredentialsSigningPrivateKeyToken,s,[o]);throw await AI(A.session,e,{objectUuid:t,data:u}),k}}},aTj=async(A,j)=>{try{return await NW(A.session,j)}catch(e){let t=CA.getError(e);if(CA.isNewServerErrorWithStatus(t,CA.HTTPStatusCode.notFound))return;if(CA.isNewServerErrorWithStatus(t,CA.HTTPStatusCode.forbidden)){console.warn("Not enough access for getAllObjectDataWithDataSpec1.",t);return}console.error("Failed to getAllObjectDataRecordsWithDataSpec1:",t)}},nTj=async(A,{objectData:j,objectType:e})=>{let t=await kx(A,e),r=await VOA(A,e);j.map(async a=>{let n=await YF(A,t,a.objectUuid,U_),o=r.access.find(s=>s.kid===a.encryptedBy);if(o===void 0)throw new Error("Error finding matching accessor for ObjectData");let[i]=await QF(e,a.objectUuid,Tn.ConnectCredentialsSigningPrivateKeyToken,n,[o]);if(i===void 0)throw new Error("Error encrypting ODA");await KW(A.session,e,a.objectUuid,o.accessorType,o.accessorUuid,{data:i})})};var ktA=async A=>BQ(A.session),oTj=async A=>gQ(A.session),iTj=async(A,j)=>(j=j||{enabled:!1,lockAfterIdleTimeMin:480},hQ(A.session,j));var utA=async A=>IQ(A.session),sTj=async A=>PQ(A.session),lTj=async(A,j)=>(j=j||{restrictTo:LC},OQ(A.session,j));var cTj=async A=>fQ(A.session),dTj=async(A,j)=>(j=j||{enabled:!1},FQ(A.session,j));var kTj=async A=>qQ(A.session),uTj=async(A,j)=>(j=j||{hideDeveloperTools:!1,hideIntegrations:!1,updatedAt:new Date(Date.now())},xQ(A.session,j));var ETj=async A=>vQ(A.session),pTj=async(A,j)=>(j=j||{enabled:!1,allowedAttempts:KC,lockoutPeriodMin:NC},GQ(A.session,j));var mTj=A=>A.account?A.account.hasFeature["b5-policies-auto-delete-suspended-users"]:!1,BTj=async A=>bQ(A.session),gTj=async(A,j)=>(j=j||{enabled:!1,daysUntilDelete:30},yQ(A.session,j));var hTj=async A=>TQ(A.session),qTj=async(A,j)=>CQ(A.session,j);var xTj=async A=>RQ(A.session),vTj=async(A,j)=>(j=j||{mapsEnabled:!1},DQ(A.session,j));var GTj=async A=>aA.getExtensionAllowedPolicy(A.session),fTj=async(A,j)=>(j=j||{enabled:!0},aA.updateExtensionAllowedPolicy(A.session,j)),FTj=async A=>aA.getExtensionAllowedPolicyLocked(A.session);var bTj=async A=>aA.getAppLauncherAllowedPolicy(A.session),yTj=async(A,j)=>(j=j||{appLauncherPolicyEnabled:!0,appCatalogUrl:""},aA.updateAppLauncherAllowedPolicy(A.session,j)),$Tj=async A=>aA.getAppLauncherAllowedPolicyLocked(A.session);var wTj=async A=>SQ(A.session),ITj=async(A,j)=>(j=j||{enabled:!1},HQ(A.session,j));var PTj=async A=>aA.getAutofillConfirmationPolicyApi(A.session),OTj=async(A,j)=>aA.updateAutofillConfirmationPolicyApi(A.session,j);var RTj=async A=>KQ(A.session),DTj=async(A,j)=>(j=j||{allowSshBookmarksSyncToDisk:!0},NQ(A.session,j));var TTj=async A=>LQ(A.session),CTj=async(A,j)=>(j=j||{enabled:!0,enableCliIntegration:!0},zQ(A.session,j));var _Tj=async A=>UQ(A.session),STj=async(A,j)=>(j=j??{enableDeveloperEnvironments:!0},VQ(A.session,j));var JOA=async A=>aA.getReportingPolicy(A.session),HTj=async(A,j)=>(j=j||{allowedEmailDomains:[],appDiscoveryEnabled:!1},aA.updateReportingPolicy(A.session,j)),EtA=async A=>{let j=!!A.account?.hasUnleashFeature["b5-policies-framework"],e=!!A.account?.hasUnleashFeature["b2b-reporting-policy"],t=!!A.account?.hasBackOfficeFeature.itemsInWrongAccountPolicy,r={allowedEmailDomains:[],appDiscoveryEnabled:!1};if(j&&e)r=(await JOA(A)).definition;else if(t){let a=A.account?.settings?.teamMemberPolicies?.allowedWatchtowerDomains?A.account?.settings.teamMemberPolicies.allowedWatchtowerDomains.split(","):[];r={...r,allowedEmailDomains:a}}return r};var MTj=async A=>XQ(A.session),KTj=async(A,j)=>(j=j||{enabled:!1},JQ(A.session,j));var NTj=async A=>aA.getSecuritySettingsPresetsPolicy(A.session),LTj=async(A,j)=>aA.updateSecuritySettingsPresetsPolicy(A.session,j);var mnt={[ee.AutoLock]:ktA,[ee.ReleaseChannels]:utA},zTj=async(A,j)=>{let e={[ee.AutoLock]:()=>Promise.resolve({enabled:!1,lockAfterIdleTimeMin:10}),[ee.ReleaseChannels]:()=>({restrictTo:200})};if(j in e){let t=e[j];return t()}return Promise.resolve({})},UTj=async A=>WQ(A.session),VTj=async(A,{availableInTemplates:j})=>QQ(A.session,{availableInTemplates:j});var Fd=J(tA());var ptA="action/text",HS,E1,p1,m1,B1,WOA={},mtA=async A=>ij(ptA)("checkPwnedPasswords",async()=>QOA(A,ZZ)),QOA=async(A,j)=>{let e=await $A.unsafeHashStringSha1UpperHex(A),t=WOA[e];if(t!==void 0)return t;{let r=e.slice(0,5),a=await j(r),n=Fr(a,e);return WOA[e]=n,n}},BtA=()=>p1||{},gtA=()=>m1||{},htA=()=>B1||{},XTj=async A=>{HS||(HS=await AAA(A.config.txtBase),V4(HS))},JTj=()=>{HS=void 0,V4(void 0)},WTj=async A=>(E1||(E1=await jAA(A.config.txtBase),X4(E1)),E1),g1=async()=>{await YOA(),await ARA(),await eRA()},h1=()=>{ZOA(),jRA(),tRA()},QTj=()=>{E1=void 0,X4(void 0)},YOA=async()=>{p1||(p1=await eAA())},YTj=A=>{try{p1=cj(JSON.parse(A),Fd.record(Fd.string,Fd.number)).unwrap()}catch(j){throw console.error("Unable to import Watchtower data, provided JSON has invalid format.",j),new Error("Provided JSON has invalid format.")}},ZOA=()=>{p1=void 0},ARA=async()=>ij(ptA)("loadTwoFactorSitesList",async()=>{if(!m1)return tAA().then(A=>{m1=A})}),ZTj=A=>{try{m1=cj(JSON.parse(A),Fd.record(Fd.string,Fd.string)).unwrap()}catch(j){throw console.error("Unable to import two-factor sites, provided JSON has invalid format.",j),new Error("Provided JSON has invalid format.")}},jRA=()=>{m1=void 0},eRA=async()=>ij(ptA)("loadPasskeySitesList",async()=>{if(!B1)return rAA().then(A=>{B1=A})}),ACj=A=>{try{B1=cj(JSON.parse(A),Fd.record(Fd.string,Fd.string)).unwrap()}catch(j){throw console.error("Unable to import passkey sites, provided JSON has invalid format.",j),new Error("Provided JSON has invalid format.")}},tRA=()=>{B1=void 0};var MS=J(Wo());var qtA;(function(A){A.Passwords="Passwords"})(qtA||(qtA={}));var rRA="action/hibp",jCj=ij(rRA),aRA,eCj=async(A,j)=>uAA(A.session,j),tCj=async(A,j)=>{let e=await dAA(A.session,j);return{...e,users:e.users,breaches:e.breaches.map(t=>({...t,addedDate:vr(t.addedDate),notifiedDate:vr(t.notifiedDate)})),lastRunAt:vr(e.lastRunAt),isTruncated:e.isTruncated,numActive:e.numActive,numInactive:e.numInactive}},rCj=async(A,j,e)=>Sn([rRA,"getHibpDomainReportCSV",A.id],async()=>kAA(A.session,j,e)),xtA=()=>aRA,aCj=async A=>jCj("getHibpReport",async()=>cAA(A.session).then(j=>{let e=j.map(t=>({...t,addedDate:vr(t.addedDate),notifiedDate:vr(t.notifiedDate)}));aRA=Ca(e,t=>t.domain)}));var nCj="action/vault_item_watchtower",nRA=ij(nCj),oCj=23328e3,iCj=5184e3,sCj=5184e3,lCj=5184e3,cCj=A=>({compromisedDomain:A.compromisedDomain,expired:A.expired,expiringSoon:A.expiringSoon,inactivePasskey:A.inactivePasskey,inactiveTwoFactor:A.inactiveTwoFactor,itemsInWrongAccount:A.itemsInWrongAccount,passwordStrength:A.passwordStrength,reusedPassword:A.reusedPassword,unsecuredWebsite:A.unsecuredWebsite,vulnerablePassword:A.vulnerablePassword}),dCj=async A=>{try{let j=await Promise.all(A.map(mtA));return Fr(j,!0)}catch(j){return console.error("Failed to check pwned passwords.",j),!1}},oRA=async(A,j,e,t,r)=>nRA("generateWatchtowerReportForItem",async()=>{let a={};if(A.overview.b5UserUUID)return a;let n=j?dCj:async()=>Promise.resolve(!1),o=r||iRA(A);return n(o).then(i=>{let s=kCj(A);if(s){a.compromisedDomain=s;let u=xtA();u&&u[s]&&(a.hibpReport=u[s])}e&&dz(A,t)&&(a.itemsInWrongAccount=!0),i&&(a.vulnerablePassword=!0);let l=A.username?A.username.value:"";for(let u of o){let m=bf(u,l);(!a.passwordStrength||a.passwordStrength>m)&&(a.passwordStrength=m)}if(A.overview.URLs){for(let u of A.overview.URLs)if(lp(u.u.toLowerCase(),"http://")){a.unsecuredWebsite=!0;break}}if(A.templateUuid===Sj.LoginUuid&&A.overview.URLs&&!ECj(A))for(let u of A.overview.URLs){let m=uCj(u.u);if(m){a.inactiveTwoFactor=m;break}}if(A.templateUuid===Sj.LoginUuid&&A.overview.URLs&&!mCj(A))for(let u of A.overview.URLs){let m=pCj(u.u);if(m){a.inactivePasskey=m;break}}let c,k=0;switch(A.templateUuid){case Sj.PassportUuid:{let u=kA.findFieldWithName(kA.FieldName.Passport.Expiry,A);u&&(c=kA.getNumberValue(u),k=oCj);break}case Sj.DriverLicenseUuid:{let u=kA.findFieldWithName(kA.FieldName.DriverLicense.Expiry,A);u&&(c=(0,MS.default)(kA.getNumberValue(u),"YYYYMM").unix(),k=sCj);break}case Sj.CreditCardUuid:{let u=kA.findFieldWithName(kA.FieldName.CreditCard.Expiry,A);u&&(c=(0,MS.default)(kA.getNumberValue(u),"YYYYMM").endOf("month").unix(),k=iCj);break}case Sj.MembershipUuid:{let u=kA.findFieldWithName(kA.FieldName.Membership.Expiry,A);u&&(c=(0,MS.default)(kA.getNumberValue(u),"YYYYMM").endOf("month").unix(),k=lCj);break}case void 0:default:break}if(typeof c=="number"&&!Number.isNaN(c)){let u=Math.floor(Date.now()/1e3);u>c?a.expired=!0:u>c-k&&(a.expiringSoon=!0)}return a})}),vtA=async(A,j,e,t)=>nRA("generateWatchtowerReportForItems",async()=>{let r={},a=A.filter(l=>l.state===kA.ItemState.Active),n=ic(Ca(a,"uuid"),l=>iRA(l)),o=uL(q6(n)),i=[];for(;a.length>0;)i.push(a.splice(0,10));let s=Promise.resolve([]);for(let l of i)s=s.then(async()=>{let c=[];for(let k of l)c.push(oRA(k,j,e,t,n[k.uuid]).then(u=>{let m=n[k.uuid];if(m)for(let F of m)(o[F]??0)>1&&(u.reusedPassword=!0);r[k.uuid]=u}));return Promise.all(c)});return s.then(()=>r)}),kCj=A=>{let j=BtA();if(!A.getPassword())return;let e=A.overview?A.overview.URLs:void 0;if(!e)return;let t={};for(let a of e){let n;try{n=new URL(qp(a.u)).hostname,n=n.replace(/^www\./,"")}catch{continue}let o=j[n];o&&(t[n]=o)}if(Object.keys(t).length===0)return;let r=A.passwordUpdatedAt;if(r)return BL(t,a=>typeof a=="number"&&a>r)},iRA=A=>{let j=[];if(A.templateUuid===Sj.LoginUuid||A.templateUuid===Sj.PasswordUuid){let e=A.getPassword();e&&(A.overview.url||e.length>6||/\D/.test(e))&&j.push(e)}else if(A.details&&A.details.sections)for(let e of A.details.sections){if(!e.fields)continue;let t=e.fields.filter(r=>r.k===kA.FieldType.Concealed&&Fr(r.n,"password"));for(let r of t)r.v&&j.push(kA.getStringValue(r))}return j},uCj=A=>{if(!A)return;let j=gtA();try{let t=new URL(qp(A)).hostname;if(j[t])return j[t];let r=t.split(".");r.shift();let a=r.join(".");return j[a]?j[a]:void 0}catch{return}},ECj=A=>{if(A.tags.some(j=>!!j&&j.toLowerCase()==="2fa"))return!0;if(!A.details||!A.details.sections)return!1;for(let j of A.details.sections){let e=sn(j.fields,t=>kA.isTotpField(t));if(e&&e.v)return!0}return!1},pCj=A=>{if(!A)return;let j=htA();try{let t=new URL(qp(A)).hostname;if(j[t])return j[t];let r=t.split(".");r.shift();let a=r.join(".");return j[a]?j[a]:void 0}catch{return}},mCj=A=>!!A.details.passkey;var sRA=A=>{let j=0,e=0,t=0,r=0,a=0,n=0,o=0,i=0,s=0;return q6(A).forEach(l=>{l&&(t=l.reusedPassword?t+1:t,j=l.compromisedDomain?j+1:j,e=l.vulnerablePassword?e+1:e,l.passwordStrength&&(r=P3(l.passwordStrength,0,Bw.WEAK)?r+1:r),a=l.unsecuredWebsite?a+1:a,n=l.inactiveTwoFactor?n+1:n,o=l.expiringSoon?o+1:o,o=l.expired?o+1:o,i=l.itemsInWrongAccount?i+1:i,s+=1)}),{cw:j,vp:e,rp:t,wp:r,uw:a,i2fa:n,exp:o,tot:s,wa:i}},BCj=async(A,j,e,t,r)=>{if(!A.account?.hasBackOfficeFeature.keepAdminWatchtowerReports)return;let a=await LI(A),n=a.watchtowerReportVersion&&a.watchtowerReportVersion===H_&&a.vaults?a.vaults.filter(c=>c.watchtowerReportNeedsUpdating):[];if(n.length===0){r?.(n.length);return}let o;try{o=await jC(A.session)}catch(c){if(Wh(c,Jh.resourceNotFound,sc.notFound))return;throw c}let i=A.account.hasBackOfficeFeature.itemsInWrongAccountPolicy,s=(await EtA(A)).allowedEmailDomains;await g1();let l=async c=>{let k=await e(A,c);if(!k){console.warn("Unable to find vault with uuid:",c);return}let u=["U","E"];if(sz(A.account)&&u.push("P"),u.includes(k.type)){let m=await t(A,k);if(m.length===0)return;let F=await vtA(m,!0,i,s),S=sRA(F),G=await $I(o.pubKey,Qe(S)),x={version:H_,vaultContentVersion:k.contentVersion,encData:G};await nX(A.session,k.uuid,x),j&&await Pn(1e3)}};for(let c of n)await l(c.uuid),r?.(n.length);h1()},GtA=async(A,j,e)=>sX(A.session,j,e),gCj=async A=>jC(A.session),hCj=async(A,j,e,t)=>{let r=await lRA(A,j);if(e?.(r.reports.length),r.reports.length===0)return{reports:[]};let a=await kx(A,ss.AdminWatchtowerKeyset),n=a.data.find(s=>s.objectType===ss.AdminWatchtowerKeyset);if(!n?.data)throw new Error("Admin watchtower keyset oda does not exist.");let o=await YF(A,a,n.objectUuid,z_);return{reports:await feA(A,r.reports,o,t)}},lRA=async(A,j)=>{let e=[],t;do{let r=await oX(A.session,j,t);e.push(...r.reports),t=r.nextStartUuid}while(t);return{reports:e}},qCj=async(A,j)=>iX(A.session,j),xCj=(A,j)=>{if(j<=0||A<=0)return 0;let e=Math.floor(A/j*100);return Math.min(Math.max(e,1),100)};var cRA="action/msp",ux=ar(cRA),Ex=ij(cRA),dRA=new Set([IA.TypeOwners,IA.TypeAdmins]),vCj=new Set([IA.TypeMSPAdministrators,...Array.from(dRA)]),ftA=async A=>{let j=await go(A,[_t.Groups]),e=A.account?.hasBackOfficeFeature.managedServiceProvider?vCj:dRA,t=await Ya.generateWithSigningKeys();t.sn=1;let r=await Promise.all(j.groups.filter(a=>e.has(a.type)).map(async a=>{if(a=await Ka(A,a,{attrs:IA.Attr.PubKey,mustReload:!0}),!a.pubKey)throw new Error("Missing public key");let n=await t.encryptWithKey(a.pubKey);return{accessorUuid:a.uuid,accessorType:fl.Group,encKey:n,encryptedBy:n.encryptedBy}}));return hW(A.session,{access:r})},GCj=async(A,j,e)=>{let t=await Ts.generate(),r=await ERA();return sW(A.session,{companyDetails:j,managedAccountKey:await q1(t,e.pubKey),eamUserKeyset:await r.encryptWithKey(t)})},fCj=async(A,j,e)=>{await lW(A.session,j,e)},kRA=async A=>Ex("getUserMspPermissions",async()=>qW(A.session).catch(ux("getUserMspPermissions"))),FCj=async(A,j)=>{let e=await dW(A.session,{managedAccountUuid:j}),[t]=await Sk(A,[e.encryptedByKey]);if(!t)throw new Error("Keyset missing");if(!e.managedAccountKey)throw new Error("Managed Account Keyset missing");let r=await Ot(e.managedAccountKey.kid).decryptWithKeyset(t,e.managedAccountKey.encKey);if(!r.jwk)throw new Error("Managed Account Keyset missing");return{type:"transfer_credentials",accountUuid:j,...e,managedAccountKey:r.jwk,languageCode:A.user?.language??"en"}},bCj=(A,j,e,t)=>{let a=`${uRA(A,j)}/launch-ma`;return e?`${a}?landing-page=${e}&l=${t}`:`${a}?l=${t}`},uRA=(A,j)=>`https://${j}.${A.config.server}`,yCj=async(A,j)=>Ex("getGroupMspPermissions",async()=>xW(A.session,j).catch(ux("getGroupMspPermissions"))),$Cj=async(A,j,e,t)=>{let r={acl:e};if(e.length!==0){if(!j.pubKey)return Promise.reject(new Error("Missing public key"));let[a]=await Sk(A,[t]);if(!a)return Promise.reject(new Error("Keyset missing"));a.sn=1,r.encKey=await a.encryptWithKey(j.pubKey),r.encryptedBy=j.pubKey.uuid}return Ex("updateGroupMspPermissions",async()=>GW(A.session,j.uuid,r).catch(ux("updateGroupMspPermissions")))},wCj=async(A,j)=>Ex("getMspLinkRequest",async()=>fW(A.session,j).catch(ux("getMspLinkRequest"))),ICj=async A=>Ex("getLinkRequests",async()=>gW(A.session).catch(ux("getLinkRequests"))),PCj=async(A,j,e,t)=>{let r=await Ts.generate(),a=await ERA(),n=await Ya.generateWithoutSigningKeys();n.sn=1;let o=await t.sign(n.ekeyPair.pubKey);return Ex("acceptLinkRequest",async()=>FW(A.session,j,{eamGroupKeyset:await n.encryptWithKey(a),eamUserKeyset:await a.encryptWithKey(r),encManagedAccountKey:await q1(r,e.pubKey),groupPublicKeyMac:o}).catch(ux("acceptLinkRequest")))},OCj=async(A,j)=>Ex("declineLinkRequest",async()=>bW(A.session,j).catch(ux("declineLinkRequest"))),q1=async(A,j)=>{let e=await A.encryptSelfWithKeyset(j);return{kid:A.KID(),encryptedBy:e.kid,encKey:e}},ERA=async()=>{let A=await Ya.generateWithSigningKeys();return A.sn=1,A},FtA=async(A,j,e)=>{try{if(!j||!j.managedAccountKey)throw new Error("Managed account key not found.");let r=(await kRA(A))?.encKeyset;if(!r)throw new Error("No MSP Keyset detected.");let[a]=await Sk(A,[r]);if(!a)throw new Error("Failed to decrypt MSP keyset.");let n=await Ot(j.managedAccountKey.kid).decryptWithKeyset(a,j.managedAccountKey.encKey);if(!n.jwk)throw new Error("Failed to decrypt managed account key.");let o=await Ts.fromJwk(n.jwk);if(!e.pubKey||!e.pubKey.jwk)throw new Error("Missing group public key");return q1(o,e.pubKey.jwk)}catch{throw new Error("Error encrypting managed account key")}},RCj=async(A,j,e)=>{if(!j||!j.managedAccountKey)throw new Error("Managed account key not found.");let t=await Ot(j.managedAccountKey.kid).decryptWithKeyset(A,j.managedAccountKey.encKey);if(!t.jwk)throw new Error("Failed to decrypt managed account key.");let r=await Ts.fromJwk(t.jwk);if(!e.pubKey||!e.pubKey.jwk)throw new Error("Missing group public key");return q1(r,e.pubKey.jwk)},DCj=async(A,j,e,t)=>{let r={},a=t.filter(n=>n!==Ms.ViewConsole&&n!==Ms.Add);if(a.length===0)return r.remove=[{groupUuid:e.uuid,managedAccountUuid:j.uuid}],r;if(!j||!j.managedAccountKey)throw new Error("Managed account key not found.");if(!e.pubKey||!e.pubKey.jwk)throw new Error("Missing group public key");return r.update=[{groupUuid:e.uuid,managedAccountUuid:j.uuid,acl:a,managedAccountKey:await FtA(A,j,e)}],r},TCj=async(A,j,e,t)=>{let r={};return t.length>0?r.update=[{groupUuid:j.uuid,managedAccountUuid:e.uuid,acl:t,managedAccountKey:await FtA(A,e,j)}]:r.remove=[{groupUuid:j.uuid,managedAccountUuid:e.uuid}],r};var pRA="action/vault_item",CCj=ar(pRA),btA=ij(pRA),mRA=async(A,j,e,t)=>{let r=(await aJ(A.session,j.uuid,e)).item;return qu(r,t||j)},BRA=async(A,j)=>Promise.resolve().then(async()=>{if(!j)throw new Error("Missing vault");let e=j.uuid;return tJ(A.session,e).then(async t=>Ig(t.items||[],j))}).catch(CCj("getVaultItemsOverviews")),bd=async(A,j)=>btA("getVaultItems",async()=>gRA(A,j,0,[]).then(async e=>Ig(e,j))),gRA=async(A,j,e,t)=>btA("getVaultItemsBatch",async()=>rJ(A.session,j.uuid,e).then(async r=>{let a=r.items?t.concat(r.items):t;return r.batchComplete?Promise.resolve(a):gRA(A,j,r.contentVersion,a)})),hRA=async(A,j,e)=>{try{let t=await BC(A.session,e,j.uuid,j.vault.uuid);return lS(e,t)}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.missingFileId))return qRA(A,j.uuid,j.vault.uuid,e);throw new Error(`Failed to retrieve document: ${t}`)}},qRA=async(A,j,e,t)=>{let r=await YX(A.session,j,e);for(let a of r)try{let n={...t,..."fileId"in t?{fileId:a}:{documentId:a}},o=await QX(A.session,n,j,e);return"fileId"in t?DF(t,o):lS(t,o)}catch(n){console.error(`Decryption failed for file ${a}: ${n}. Moving to next file `);continue}throw new Error(`Unable to decrypt any files linked to item ${j}`)},_Cj=async(A,j,e)=>{let t=await hRA(A,j,e);return new Blob([t],{type:"application/octet-stream"})},SCj=async(A,j,e)=>{let{data:t,attributes:r}=await ceA(j,e),{fileId:a,signingKey:n}=await hC(A.session,t);if(a)return{...r,documentId:a,signingKey:n};throw new Error("Session did not provide file ID.")},xRA=async(A,j,e)=>{try{let t=await BC(A.session,e,j.uuid,j.vault.uuid);return DF(e,t)}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.missingFileId))return qRA(A,j.uuid,j.vault.uuid,e);throw new Error(`Failed to retrieve file: ${t}`)}},HCj=async(A,j)=>{let{data:e,attributes:t}=await keA(j),{fileId:r,signingKey:a}=await hC(A.session,e);if(r)return{...t,fileId:r,signingKey:a};throw new Error("Session did not provide file ID.")},MCj=async(A,j)=>{if(!j.overview.icons||!j.overview.icons.detail)throw new Error("Missing icon");let e=await xRA(A,j,j.overview.icons.detail);return iq(new Blob([e]))},Tl=async(A,j,e)=>{let t=await fd(A,e.uuid),r=Jo(j,100),a={contentVersion:0,updatedItems:{},failedItems:{}};for(let n of r){let o=await KCj(A,n,t);for(let i of n)o.failedItems&&o.failedItems[i.uuid]||i.itemVersion++;t.contentVersion=o.contentVersion,a.contentVersion=o.contentVersion,a.updatedItems=sk(a.updatedItems,o.updatedItems),a.failedItems=sk(a.failedItems,o.failedItems)}if(Ad(a.updatedItems)===0&&Ad(a.failedItems)>0)throw new Error("Failed to patch vault items.");return a},KCj=async(A,j,e)=>{let t=await NCj(A,j),r=await Promise.all(t.map(JI)),a=await dJ(A.session,e.uuid,e.contentVersion,r),n=Ad(a.updatedItems),o=Ad(a.failedItems);if(n===0&&o===1){let i=Object.keys(a.failedItems)[0];if(i!==void 0&&a.failedItems[i]===CA.ItemStatusCode.incorrectItemVersion)throw new Error("This item has been edited by someone else. Refresh and make your edits again.")}else o>0&&console.error(`${o} item(s) failed to save. ${n} item(s) saved successfully.`);return a},NCj=async(A,j)=>{let e=[],t={};for(let a of j){let n=a.details.documentAttributes;if(n&&!n.signingKey){if(!n.documentId)throw new Error("Invalid document item, missing document ID.");t[n.documentId]=n,e.push(gC(A.session,n.documentId))}let o=a.overview&&a.overview.icons&&a.overview.icons.detail;o&&!o.signingKey&&(o.fileId?(t[o.fileId]=o,e.push(gC(A.session,o.fileId))):delete a.overview.icons)}let r=await Promise.all(e);for(let a of r){let n=t[a.fileId];if(!n)throw new Error("Missing file attributes.");n.signingKey=a.signingKey}return j},LCj=async(A,j)=>{if(sj.activeUserHasAcl(j,Kj.combine([me.ViewHistory,me.UpdateItem]))){let{items:t}=await sJ(A.session,j.uuid);return Ig(t,j)}return[]},zCj=async(A,j,e)=>{await lJ(A.session,j.uuid,[e])},UCj=async(A,j)=>await oJ(A.session,j.vault.uuid,j.uuid),VCj=async(A,j)=>{await cJ(A.session,j.vault.uuid,j.uuid)},XCj=async(A,j,e,t)=>{let r=j.uuid,a=await iJ(A.session,r,e.uuid,t);return qu(a,j)},JCj=async A=>btA("getAllCreditCardItems",async()=>em(A)).then(async j=>j?BRA(A,j):Promise.reject(new Error("Missing Personal vault"))).then(async j=>{let t=_7(j,r=>r.templateUuid===Sj.CreditCardUuid&&r.state===kA.ItemState.Active).map(async r=>mRA(A,r.vault,r.uuid,r));return Promise.all(t)});var vRA="action/package",ytA=ar(vRA),GRA=ij(vRA),$tA=async A=>Promise.resolve().then(async()=>{if(A.account&&!A.account.hasPackages)return Promise.resolve(void 0);let j;return fRA(A,{mustReload:!0}).then(async e=>(j=e,VW(A.session))).then(async e=>Promise.all(yn(e,async t=>XW(A.session,t.uuid)))).then(async e=>Promise.all(yn(e,async t=>cS(A,j,t,async r=>vc(A,r))))).then(async e=>{let t=await Promise.all(yn(e,WCj(A,j))),[r,a]=t.reduce(([n,o],i)=>typeof i=="string"?[[...n,i],o]:[n,[...o,i]],[[],[]]);if(r.length>0&&(await SC(A.session,r),console.warn(`Removed ${r.length} invalid packages`)),a.length>0){let n=await Tl(A,a,j);return`${a.length}`,n}})}).catch(ytA("processIncomingPackages")),WCj=(A,j)=>async e=>{if(!e.uuid)throw new Error("Really messed up package, missing UUID");if(!e.item)return console.warn(`Removing package with no item: ${e.uuid}`),e.uuid;let t=e.item.details.documentAttributes;if(t&&!t.documentId)return console.warn(`Removing package with no document ID: ${e.uuid}`),e.uuid;let r=e.item;return r.itemVersion=await nJ(A.session,j.uuid,r.uuid),r},QCj=async(A,j,e)=>GRA("sendPackages",async()=>{let t=await Bo(A,{attrs:IA.Attr.PubKey}),r=await vc(A,e),a=await YCj(A,j,r,t),n=a.map(EeA);return await UW(A.session,n),a}),YCj=async(A,j,e,t)=>GRA("createPackagesForPeople",async()=>{let r=A.user;if(!r)throw new Error("Missing user");let a=ik(e.map(n=>j.map(async o=>new Wq(r,n,o).encryptAndSign(t))));return Promise.all(a)}),ZCj=async(A,j)=>{let e=j.map(t=>{if(!t.uuid)throw new Error("Missing package UUID");return t.uuid});return SC(A.session,e)},A_j=async(A,j)=>Promise.resolve().then(async()=>JW(A.session,j.vault.uuid,j.uuid).then(async e=>ueA(A,j.vault,e,async t=>vc(A,t)))).catch(ytA("getPackagesForVaultItem")),fRA=async(A,j)=>Promise.resolve().then(async()=>A.user&&Dj.isGuest(A.user)?Dg(A,{mustReload:!0}).then(e=>WR(e)):em(A,j)).then(e=>{if(!e)throw new Error("Current user does not have a receiving vault");return e}).catch(ytA("getReceivingVault")),j_j=async(A,j)=>{},e_j=async A=>{},t_j=async(A,j)=>{},r_j=async(A,j)=>YW(A.session,j),a_j=async(A,j)=>ZW(A.session,j);var n_j="action/account",Cl=ij(n_j),_t=Tw;var go=async(A,j)=>Cl("getAccountWithAttrs",async()=>{let e=!!A.account;return(Fr(j,_t.Me)?UI(A):Promise.resolve()).then(async()=>bV(A.session,j)).then(async r=>leA(A,r)).then(async({account:r,activeUser:a})=>(a&&YeA(A,a),A.user?i_j(A,r,A.user,e).then(()=>(po(A),r)):Promise.reject(new Error("Missing user"))))}),ZF=async(A,j)=>Cl("getEntireAccount",async()=>go(A,[_t.AccountFlags,_t.Billing,_t.Counts,_t.Invite,_t.Me,_t.MeMemberships,_t.Meta,_t.Promotions,_t.Settings,_t.Tier,_t.UserFlags,_t.GatedFeatureTrials,...j]).then(e=>(A.nc.emit(Vt.UniverseReloaded),e))),FRA=async A=>Cl("loadUniverse",async()=>ZF(A,[_t.Groups,_t.Users])),o_j=FRA,i_j=async(A,j,e,t)=>Cl("performGetAccountChecks",async()=>{if(j.state===Et.StateActive&&Fr([Dj.State.Active,Dj.State.PendingActivation],e.state))return $tA(A).then(()=>{s_j()}).catch(r=>{console.error("Failed to process incoming packages",r)});if(e.state===Dj.State.RecoveryStarted&&t)return Kw(A.session).catch(()=>{}).then(()=>{A.nc.emit(Vt.RecoveryStarted)})}),s_j=()=>{globalThis.document&&document.dispatchEvent(new CustomEvent("B5ProcessIncomingPackagesCompleted",{bubbles:!1,cancelable:!1}))},wtA=async(A,j,e,t,r)=>Cl("performSignInAccountChecks",async()=>{if(j.state===Et.StateRegistered)return q_j(A,t,r);if(e.state===Dj.State.VerifiedIncomplete)return x_j(A,r);if(e.state===Dj.State.Registered)throw new CA.ClientError(CA.ClientErrorCode.mustVerifyEmail,W("Account not verified"));if(e.state===Dj.State.RecoveryStarted&&(await CS(A,[e]),await go(A,[_t.Me])),j.state===Et.StateActive&&Fr([Dj.State.Active,Dj.State.PendingActivation,Dj.State.MustMigrateAuth,Dj.State.Provisioned],e.state))return Promise.resolve();throw new Error("Unsupported account state")}),l_j=async(A,j,e)=>Cl("checkDomainAvailability",async()=>!j||!e?Promise.resolve(!1):DV(A.session,j,e).then(t=>t.result).catch(async t=>{if(CA.isServerError(t,CA.ServerErrorCode.badRequest,CA.HTTPStatusCode.badRequest))return!1;throw t})),px=async(A,j)=>Cl("getDomain",async()=>j?(await TV(A.session,j)).domain:Il),c_j=async A=>Cl("updateAccount",async()=>{let j=A.account;if(!j)throw new Error("Missing account");await wV(A.session,sS(j)),j.attrVersion++,pr(A),po(A)}),d_j=async A=>Cl("updateBillingSettings",async()=>{let j=A.account;if(!j)throw new Error("Missing account");await IV(A.session,sS(j)),j.attrVersion++,pr(A),po(A)}),k_j=async(A,j)=>Cl("changeDomain",async()=>{let e=A.account;if(!e)throw new Error("Missing account");await CV(A.session,j),e.attrVersion++,pr(A),po(A)}),u_j=async A=>Cl("deleteAccount",async()=>A.account?PV(A.session):Promise.reject(new Error("Missing account"))),E_j=async(A,j,e)=>{await OV(A.session,j,e)},p_j=async(A,j,e)=>{await RV(A.session,j,e)},ItA=async(A,j)=>_V(A.session,j),m_j=()=>new sj({desc:sj.DefaultDescMarker,name:"System",type:sj.TypeSystem}),B_j=()=>new sj({desc:sj.DefaultDescMarker,name:"Generated Passwords",type:sj.TypeGeneratedPasswords}),dx=(A,j)=>new sj({type:sj.TypePersonal,name:c1(A),desc:sj.DefaultDescMarker,avatar:j}),c1=A=>A===Et.Type.Individual?"Personal":"Private",KS=()=>new sj({type:sj.TypeEveryone,name:"Shared",desc:sj.DefaultDescMarker}),bRA=async A=>{let j=await MI.Keyset.generate(),e={objectUuid:j.uuid,data:{ePriKey:j.encryptionKeyPair.priKey,sPriKey:j.signingKeyPair.priKey},acl:[]};await ctA(A,ss.AdminWatchtowerKeyset,Tn.AdminWatchtowerKeysetPrivateKey,Di.Manage,e),await GtA(A,j.uuid,j.encryptionKeyPair.pubKey)},g_j=async(A,j)=>{j.pubKey||(j=await Ka(A,j,{attrs:IA.Attr.PubKey,mustReload:!0}));let e=await oF(A.session,ss.AdminWatchtowerKeyset,Di.Manage);await u1(A,ss.AdminWatchtowerKeyset,Di.Manage,j,[],e)},h_j={[IA.TypeRecovery]:!0,[IA.TypeOwners]:!0,[IA.TypeAdmins]:!0,[IA.TypeExternalAccountManagers]:!0},q_j=async(A,j,e=!0)=>Cl("setupAccount",async()=>{let t=A.account;if(!t)return Promise.reject(new Error("Missing account"));let r=A.user;if(!r)return Promise.reject(new Error("Missing user"));let a="setupAccount";console.time(a);let n=new IA({name:"Recovery",type:IA.TypeRecovery,desc:"Can reset user passwords if account recovery is enabled."}),o=new IA({name:"Owners",type:IA.TypeOwners,desc:"Access to billing and account administration."}),i=new IA({name:"Administrators",type:IA.TypeAdmins,desc:"Administration of users, groups, and vaults."}),s=new IA({name:"Team Members",type:IA.TypeTeamMembers,desc:"All team members."}),l="Access to security reports and account activity.",c=new IA({name:"Security",type:IA.TypeSecurity,desc:j?j[l]():l}),k=new IA({name:"MSP Administrators",type:IA.TypeMSPAdministrators,desc:"Access to add, view, administer, and unlink managed companies as an external account manager."}),u=new IA({name:"External Account Managers",type:IA.TypeExternalAccountManagers,desc:"Administration of users, groups, and vaults as external account managers."}),m=[n,o,i];t.hasFeature.members&&m.push(s),t.hasFeature.members&&A.config.internalFeaturesAreEnabled&&m.push(c),t.hasFeature.managedServiceProvider&&m.push(k),t.isAccountManaged&&m.push(u),t.domain==="backoffice"&&m.push(new IA({name:"Backoffice Users",type:IA.TypeBackofficeUsers,desc:""}),new IA({name:"Backoffice Billing",type:IA.TypeBackofficeBilling,desc:""}),new IA({name:"Backoffice Security",type:IA.TypeBackofficeSecurity,desc:""}),new IA({name:"Backoffice Developers",type:IA.TypeBackofficeDevelopers,desc:""}),new IA({name:"Backoffice Finance",type:IA.TypeBackofficeFinance,desc:""}),new IA({name:"Backoffice Content",type:IA.TypeBackofficeContent,desc:""}),new IA({name:"Backoffice Owners",type:IA.TypeBackofficeOwners,desc:""}),new IA({name:"Backoffice Advanced",type:IA.TypeBackofficeAdvanced,desc:""}));let F=async(O,Q,AA)=>{let nA=[];return O.type===IA.TypeRecovery||O.type===IA.TypeMSPAdministrators||t.isAccountManaged&&O.type!==IA.TypeExternalAccountManagers||nA.push(O.addMembership(Q,r,{role:dr.Role.Manager})),h_j[O.type]&&nA.push(O.enableRecoverCapability(AA)),Promise.all(nA)},S=Uk(A,n,n).then(async O=>{let Q=m.slice(1);return Promise.all([F(n,O,O),...Q.map(async AA=>Uk(A,AA,n).then(async nA=>F(AA,nA,O)))])}),G=dx(t.type),x=KS(),R=B_j(),P=m_j(),D=!t.isAccountManaged,y=[];D&&(y.push(G),e&&y.push(R,P)),t.hasFeature.members&&y.push(x);let h=[S];for(let O of y)h.push(O.generateNewKey());return Promise.all(h).then(async()=>{let O=[];D&&(O.push(wt.generate(G,r,{acl:me.RWE|me.Manage}),wt.generate(G,n,{acl:me.Recover})),e&&O.push(wt.generate(P,r,{acl:me.DEFAULT_VAULT_CREATION_ACL}),wt.generate(P,n,{acl:me.Recover}),wt.generate(R,r,{acl:me.DEFAULT_VAULT_CREATION_ACL}),wt.generate(R,n,{acl:me.Recover})));let Q=[];return t.hasFeature.members&&(Q.push(wt.generate(x,o,{acl:me.Manage}),wt.generate(x,i,{acl:me.Manage}),wt.generate(x,n,{acl:me.Recover}),wt.generate(x,s,{acl:me.ALL_READ|me.ALL_WRITE|me.ALL_EXPORT})),t.isAccountManaged&&Q.push(wt.generate(x,u,{acl:me.Manage}))),Promise.all([...O,...Q])}).then(async O=>v_j(A,y,O,m)).then(async()=>{if(A.account?.hasBackOfficeFeature.managedServiceProvider||Et.hasLinkedAccountsFeature(A.account))return ftA(A)}).then(async()=>{if(A.config.internalFeaturesAreEnabled){if(!o.activeKeysetUuid)throw new Error("Missing owners group");return bRA(A)}}).then(async()=>(console.timeEnd(a),ZF(A,[_t.Groups]))).then(async()=>Promise.resolve(void 0))}),x_j=async(A,j=!0)=>Cl("setupUser",async()=>{let e=A.user;if(!e)return Promise.reject(new Error("Missing user"));let t=A.account;if(!t)return Promise.reject(new Error("Missing account"));let r=dx(t.type),a=Bo(A,{attrs:IA.Attr.PubKey}),n=r.generateNewKey();return Promise.all([a,n]).then(async o=>{let i=o[0],s=[wt.generate(r,e,{acl:me.RWE|me.Manage}),wt.generate(r,i,{acl:me.Recover})];return Promise.all(s)}).then(async o=>G_j(A,r,o)).then(async()=>{if(j)return Promise.all([a1(A),lx(A)])}).then(async()=>t.hasFeature.accountTransfer?go(A,[_t.UserFlags]):void 0).then(()=>{e.state=Dj.State.PendingActivation})}),v_j=async(A,j,e,t)=>Cl("activateAccount",async()=>yV(A.session,seA(j,e),t.map(r=>Ax(r,IA.Attr.PubKey|IA.Attr.Memberships)))),G_j=async(A,j,e)=>{await $V(A.session,hd(j,e))},f_j=async A=>HV(A.session).then(j=>({activeMembers:j.activeMembers,activeGuests:j.activeGuests,billedGuests:j.billedGuests,billedMembers:j.billedMembers})),F_j=async A=>A.account?KV(A.session):Promise.reject(new Error("Missing account")),b_j=async(A,j)=>{if(!A.account)return Promise.reject(new Error("Missing account"));if(!A.account.ownersGroup)throw new Error("Missing owners group");let e=await Gd(A,A.account.ownersGroup),r=await(await xk.generate()).encryptSelfWithOwnersGroupKeyset(e);return zV(A.session,{encAuthenticationKey:r,signInAddress:j})},y_j=async(A,j)=>{await NV(A.session,j)},$_j=async(A,j)=>{await UV(A.session,j)},w_j=async(A,j)=>{let e=await cs(j.pubKey),t=new IA({name:"External Account Managers",type:IA.TypeExternalAccountManagers,desc:"Administration of users, groups, and vaults as external account managers."}),r=await JF(A);if(!r)throw new Error("Missing recovery keyset");t.pubKey=e,t.activeKeysetUuid=j.uuid,await t.enableRecoverCapability(r),await bu(A,t,void 0)},I_j=async A=>A.account?VV(A.session):Promise.reject(new Error("Missing account")),P_j=async A=>{await XV(A.session)},O_j=async A=>LV(A.session);var R_j=async(A,j)=>QV(A.session,j),D_j=async(A,j)=>YV(A.session,j),T_j=async(A,j)=>ZV(A.session,j);var C_j=async(A,j)=>AX(A.session,j),__j=async(A,j)=>jX(A.session,j),S_j=async A=>eX(A.session),H_j=async A=>tX(A.session);var M_j=async(A,j)=>rX(A.session,j),K_j=async(A,j)=>aX(A.session,j);var N_j=async(A,j,e,t,r,a,n,o,i,s)=>{let l=t||aC().toISOString();return t=j?void 0:l,r=j?void 0:r||new Date().toISOString(),e=j?void 0:e,uX(A.session,j,e,t,r,s,a,n,o,i).then(c=>({auditEvents:c?c.auditEvents.map(fF.fromApi):[],cursor:c.cursor,hasMore:c.hasMore,totalCount:c.totalCount}),c=>{throw console.error("getFilteredActivityLogReports failed:",c),c})},L_j=async(A,j,e,t,r)=>{let a={objectType:j,objectUUID:t,action:e,reportType:r};try{await pX(A.session,a)}catch(n){throw console.error("reportAuditEvent failed:",n),n}},z_j=async(A,j,e,t,r,a,n)=>EX(A.session,j||aC().toISOString(),e||new Date().toISOString(),t,r,a,n).then(o=>({count:o.count,hasMore:o.hasMore}),o=>{throw console.error("getFilteredActivityLogTotalReports failed:",o),o}),U_j=async(A,j,e)=>mX(A.session,j,e).then(t=>t?t.map(fF.fromApi):[],t=>{throw console.error("getActivityFeed failed:",t),t});var To=J(tA());var V_j=Z("web-api/internal/user.ts"),yRA=V_j(A=>({name:"migrateKeyset",method:"POST",url:"/internal/v1/user/keyset",body:{keyset:A},responseType:L}));var NS="action/partial_user",$RA=ij(NS),J_j=async(A,{scopes:j={},attrs:e=[],...t})=>{let r={...t,vault:j?.vaultUuid,group:j?.groupUuid,attrs:e},a=t?.usePostRequest||!1;return Sn([NS,"getPartialUsersV2",A.id,JSON.stringify(r)],async()=>{let{serviceAccounts:n=[],...o}=a?await eC(A.session,r):await rg(A.session,r);return{...o,serviceAccounts:n}})},Ab=Ls(),PtA=async(A,j={},e={})=>$RA("getPartialUsers",async()=>{let{mustReload:t,limit:r,offset:a}={mustReload:!1,...e},n=!r&&Ry(j);if(!t&&n){let i=Ab.getAllEntries(A.id);if(i)return q6(i)}let o={attrs:[],emails:j.emails,states:Yr([j.state]),types:Yr([j.type]),limit:r,offset:a,search:j.search,sort:j.sort,sortDir:j.sortDir};return Sn([NS,"getPartialUsers",A.id,JSON.stringify(o)],async()=>rg(A.session,o).then(({users:i})=>{if(!i)throw new Error("Missing users from getPartialUsers");return n&&(Ab=Ab.withOnlyEntries(A.id,Ca(i,"uuid"),{timestamp:Date.now()})),i}))}),W_j=async(A,{scopes:j={},attrs:e=[],...t})=>$RA("getPartialUsersCount",async()=>{let r={...t,group:j?.groupUuid,vault:j?.vaultUuid,attrs:e};return Pq(r?.search)?0:tC(A.session,r).then(async a=>a)}),x1=async(A,j)=>Sn([NS,"getGroupUsersWithPermissions",A.id,j],async()=>rg(A.session,{group:j,attrs:["combinedPermissions"]}).then(({users:e,serviceAccounts:t=[]})=>{if(!e&&!t)throw new Error("Missing users.");return{users:e,serviceAccounts:t}})),OtA=()=>{Ab=Ls()},RtA=A=>{Ab=Ab.withoutContext(A.id)};var Q_j=async(A,j,e)=>oZ(A.session,j,e),Y_j=async(A,j,e,t)=>{let r={name:t};return nZ(A.session,j,e,r)},Z_j=async A=>iZ(A.session),ASj=async(A,j,e,t,r)=>{let{saJwt:a,registerTokenRequest:n}=await v1(A,j,t,r,e.token,e.sPriKey.kid,e.sPriKey);return await n_(A.session,n),a},jSj=async(A,j,e,t,r)=>{let{saJwt:a,registerTokenRequest:n}=await v1(A,j,t,r,void 0,e.signingKey.kid,e.signingKey);return await n_(A.session,n),a},v1=async(A,j,e,t,r,a,n)=>{if(!A.account)throw new Error("Cannot register token without Account information");let o=await fjA({signingKey:n,accountUuid:A.account.uuid,serviceAccountUuid:j,createTokenInfo:t,bearerToken:r}),i=await FjA(o),s={kid:a,subject:j,name:e,account_uuid:A.account.uuid,token_info:{...t,signatureHash:i}};return{saJwt:o,registerTokenRequest:s}};var eSj="action/serviceaccounts",DtA=async(A,j)=>kZ(A.session,j),jb=Ls(),TtA=async(A,j,e,t)=>{let{user:r,userAuth:a}=await i1(A,j,e,t);if(!r.masterKey)throw new Error("Missing master key");if(!r.secretKey)throw new Error("Missing secret key");let n=await r.encryptActiveKeysetWithMasterKey(),o={email:r.email,muk:await r.masterKey.exportJwk(),secretKey:r.secretKey.exportSensitiveReadableString(),srpX:a.srpX,signInAddress:A.account&&A.account.urlHost(A.config.server)||"",userAuth:a.params};return{user:r,encKeyset:n,creds:o}},CtA=async(A,{encKeyset:j,user:e,preflightResponse:t,userAuth:r,serviceAccountType:a,permissions:n,access:o,serviceAccountToken:i,serviceAccountAvatar:s,serviceAccountThrottleKeyData:l,isRotated:c,uuid:k,ods:u})=>{let m,F;if(i&&({saJwt:m,registerTokenRequest:F}=await v1(A,i.serviceAccountUuid,i.tokenName,i.tokenInfo,i.bearerToken,i.kid,i.signingKey),F.subject!==t.uuid))throw new Error("Token subject must match Service Account UUID from preflight response.");let S=e.getCredentials(),G=P=>cZ(A.session,{access:o,serviceAccountType:a,keyset:j,preflightToken:t.token,permissions:n,userAuth:ra.getForUpload(r),userRegistration:{uuid:t.uuid,email:t.email,name:e.name,avatar:s,accountKeyFormat:S.secretKey.format.toString(),accountKeyUuid:S.secretKey.id,newsletterPrefs:0,language:e.language},registerSAToken:F,throttleKeyData:l,rotated:c,uuid:k,objectData:u,trustLogEntry:P?.trustLogEntry,trustLogBookmark:P?.serviceAccountBookmark}),x=await NeA(A,async P=>{let D=e.activeKeyset;if(!D)throw new Error("Service Account keyset not found.");let y=D.skeyPair?.pubKey;if(!y)throw new Error("Service Account Keyset has no identity key.");let h=D.ekeyPair.pubKey,O=D.symKey,Q=await P.createAddUsersEntry([{uuid:t.uuid,keysetUuid:D.uuid,identityPublicKey:y,encryptionPublicKey:h}]);return{serviceAccountBookmark:await P.signBookmarkWithKey(O,Q.new_bookmark),trustLogEntryDetails:Q}},async P=>await G(P));return{person:await Hk(A,x,0,void 0),saJwt:m}},_tA=async(A,j)=>dZ(A.session,j),tSj=async A=>kI(A.session),StA=async(A,j,e,t)=>{t=t||oSj();let r=[];for(let a of e){let n=await Rg(A,j,a,t);r.push(n)}return r},rSj=async(A,j,e)=>{let t={...A,accessorType:"user"};e=e||iSj();let r=[];for(let a of j){let n=await wt.generate(a,t,e),o=Rl(n);r.push(o)}return r},aSj={attrs:ks.Attr.None,mustReload:!1},nSj=async(A,j,e)=>{let{attrs:t,mustReload:r}={...aSj,...e},a=r?void 0:jb.getEntry(A.id,j,{attrMask:t});return a&&a.hasAttrMask(t)?a:Sn([eSj,"getServiceAccount",A.id,j,t],async()=>{let n=await uZ(A.session,j,ks.translateAttrMaskNames(t)),o=await ex(n,t,a);return jb=jb.withEntries(A.id,{[j]:o},{attrMask:t,timestamp:Date.now()}),o})},oSj=()=>({role:dr.Role.Member,state:dr.State.Active}),iSj=()=>({acl:me.RWE,leaseTimeout:0}),sSj=async(A,j,e)=>{let t={uuid:j.uuid,...eD(j,["type","attrVersion","state","email"]),name:e};await jI(A.session,t),pr(A),A.nc.emit(Vt.UsersChanged)},lSj=async(A,j,e)=>{let t={uuid:j.uuid,...eD(j,["type","attrVersion","state","email"]),imageId:e};await eI(A.session,t),pr(A),A.nc.emit(Vt.UsersChanged)},cSj=async(A,j,e)=>{let a=e*3600*1e9;await EZ(A.session,j,{expiresIn:a})},HtA=()=>{jb=Ls()},MtA=A=>{jb=jb.withoutContext(A.id)};var KtA=()=>{aeA(),WeA(),UeA(),XeA(),HtA(),OtA()},NtA=A=>{aS(A.id),QeA(A),VeA(A),JeA(A),MtA(A),RtA(A)};var G1=async(A,j,e,t)=>TAA(A.session,j,e,t),LtA=async(A,j,e,t,r,a)=>CAA(A.session,j,e,t,r,a),ztA=async(A,j,e,t)=>_AA(A.session,j,e,t),UtA=async(A,j,e,t,r)=>SAA(A.session,j,e,t,r);var dSj=3e3,f1=async A=>{let j=Object.keys(U$);try{return(await Promise.race([G1(A,j),new Promise((t,r)=>{setTimeout(()=>r(new Error("Timeout")),dSj)})])).features.reduce((t,r)=>(t[r.name]=!0,t),{})}catch(e){return console.error("Failed to retrieve feature flags:",e),{}}},wRA=async(A,j=!1,e,t)=>{let r=Object.keys(U$);return j&&e!==void 0&&t!==void 0?LtA(A,r,e,t):G1(A,r)},VtA=async(A,j)=>{try{let e=await G1(A,[j]);return e?.features?.length>0?e.features[0]?.name===j:!1}catch(e){return console.error("Failed to retrieve account feature flags enabled:",e),!1}};var eb=J(Xn()),Us=J(tA()),kSj=new Us.Type("NonEmptyVariantPayload",Us.unknown.is,(A,j)=>{let e=Us.string.validate(A,j);if((0,eb.isLeft)(e))return e;try{let t=JSON.parse(e.right);return Object.keys(t).length>0?Us.success(t):Us.failure(A,j,"Failed to decode: Variant object must have at least 1 key/value pair.")}catch(t){return Us.failure(A,j,JSON.stringify(t))}},JSON.stringify),LS=A=>(0,eb.isRight)(kSj.decode(A)),uSj=Us.type({name:Us.string,value:Us.string}),zS=(A,j)=>{let e=uSj.decode(j);if((0,eb.isLeft)(e))throw new Error(`Invalid VariantPayload: ${e.left.toString()} `);let t=e.right,r={name:t.name,value:JSON.parse(t.value)},a=A.decode(r);if((0,eb.isLeft)(a))throw new Error(`Failed to validate variant: ${a.left.join(", ")}`);return a.right};var ESj=3e3,IRA=async(A,j,e=!1,t)=>{try{let r=e?UtA(j,A,t):ztA(j,A);return(await Promise.race([r,new Promise((n,o)=>{setTimeout(()=>o(new Error("Timeout")),ESj)})])).features.reduce((n,o)=>{if(Object.keys(Y3).includes(o.name)){let i={enabled:!0};LS(o.variantPayload?.value)&&(i.variantPayload=o.variantPayload),n[o.name]=i}return n},{})}catch(r){return console.error("Failed to retrieve pre-registration feature flags:",r),{}}},US=async(A,j=!1,e)=>{let t=Object.keys(Y3);return IRA(t,A,j,e)},VS=async(A,j,e=!1,t)=>IRA([A],j,e,t);var pSj=async A=>{if(!navigator.cookieEnabled)return[];let j=oc(A.config.siblingDomains);j.push(A.config.server);let e=j.map(async a=>{try{return await nAA(A.session,a)}catch{return[]}}),t=await Promise.all(e),r=ik(t);return GeA(r)},XtA=async A=>{navigator.cookieEnabled&&await oAA(A.session,A.config.server)},mSj=async(A,j)=>{navigator.cookieEnabled&&await iAA(A.session,A.config.server,j)},BSj=async(A,j)=>{navigator.cookieEnabled&&await sAA(A.session,A.config.server,j)};var gSj="action/auth",F1=ij(gSj),JtA;(function(A){A.Password="PASSWORD",A.TrustedDevice="TRUSTED_DEVICE"})(JtA||(JtA={}));var hSj=To.type({accountKey:To.string,masterPassword:To.string},"PasswordAccountCredentials"),Qit=To.type({type:To.literal(JtA.Password),data:hSj},"AccountCredentials"),WtA=!1,qSj=()=>WtA,xSj=A=>{WtA=A},QtA=!1,vSj=()=>QtA,GSj=A=>{QtA=A},PRA=!1,fSj=()=>PRA,FSj=A=>{PRA=A},YtA=!1,bSj=()=>YtA,ySj=A=>{YtA=A},b1=(A,j,e)=>new xe({errorClass:$n.RequestError,userUuid:e?W(e):void 0,message:p`${A}: func: ${j}`}),$Sj=async(A,j)=>{await A.session.initialize({rawSessionKey:ej(j.sessionKey.k),requestId:1,serverConfig:{notifier:j.notifier},sessionUuid:j.sessionUuid}),A.config.initializedWithExistingSession=!0,A.user=new Eo({}),A.user.masterKey=await Ts.fromJwk(j.managedAccountKey),await tm(A,{shouldLoadUniverse:!0,isDesignatedAsPublic:!0,shouldAddAccountToExtension:!1}),await zk(A).then(e=>{Gd(A,e)})},mx=async(A,j,e)=>{A.account=void 0,A.userAuth=void 0,A.user=void 0,A.accountOverview=void 0;let t="muk"in j?await TSj(A,j,e):await DSj(A,j,e);if(t.type==="verified_session")return await tm(A,e),{type:"verified_context",context:A};if(t.type==="email_changed"){let r=t.newEmail;return mx(A,{...j,email:r},e)}else return t},wSj=async(A,j,e,t)=>{A.userAuth||(A.userAuth=ra.createFromPreComputedX(j.credentialBundle.srpx.exportBytes()));let r=A.user?.secretKey;r||(r=await ba.forTrustedDevice(j.secretKeyUuid)),A.user=new Eo({email:j.email,uuid:j.userUuid,secretKey:r});let a=await iu(A.session,{email:A.user.email,skFormat:j.secretKeyFormat,skid:j.secretKeyUuid,signInToken:e,deviceUuid:Pr.device.uuid,userUuid:j.userUuid});if(!a.userAuth)throw new Error("Did not receive userAuth params from startAuth");A.session.setSessionUuid(a.sessionID),A.user.masterKey=j.credentialBundle.auk;let n=await A.session.signInWithCredentialBundle(a.userAuth,j.credentialBundle.srpx,e,j.secretKeyUuid,j.email);return n.type==="verified_session"?(await tm(A,t),{type:"verified_context",context:A}):n},ISj=async(A,j,e)=>{let t=await ba.forTrustedDevice(j.secretKeyUuid);A.user=new Eo({email:j.email,uuid:j.userUuid,secretKey:t});let r=await iu(A.session,{email:j.email,deviceUuid:Pr.device.uuid,userUuid:j.userUuid,skFormat:j.secretKeyFormat,skid:j.secretKeyUuid});if(r.status==="device-not-registered"&&(A.session.setSessionUuid(r.sessionID),await Lw(A.session,Pr.device),r=await iu(A.session,{email:j.email,deviceUuid:Pr.device.uuid,userUuid:j.userUuid,skFormat:j.secretKeyFormat,skid:j.secretKeyUuid})),!r.userAuth)throw new Error("Did not receive userAuth params from startAuth");A.user.masterKey=j.credentialBundle.auk,A.session.setSessionUuid(r.sessionID);let a=await A.session.signInWithCredentialBundle(r.userAuth,j.credentialBundle.srpx,"",j.secretKeyUuid,j.email);return a.type==="verified_session"?(await tm(A,e),{type:"verified_context",context:A}):a},PSj=async(A,j,e)=>mx(A,j,{...e,shouldLoadUniverse:!0}),ZtA=async(A,j,e,t)=>{A.account=void 0,A.userAuth=void 0,A.user=void 0,A.accountOverview=void 0;let{userAuth:r}=j;if(!r){let i=await iu(A.session,{signInToken:e,deviceUuid:Pr.device.uuid,userUuid:j.userUuid});if(!i.userAuth)throw new Error("Did not receive userAuth params from startAuth");r=i.userAuth}let a=await ba.forTrustedDevice(j.secretKeyUuid),n=j.credentialBundle.srpx;A.user=new Eo({email:j.email,uuid:j.userUuid,secretKey:a}),A.user.masterKey=j.credentialBundle.auk;let o=await A.session.signInWithCredentialBundle(r,n,e,j.secretKeyUuid,j.email);return o.type==="verified_session"?(await tm(A,t),{type:"verified_context",context:A}):o},OSj=async(A,j,e)=>{if(!A.config.lang)throw new Error("Missing language");let[t,r,a]=await Promise.all([yi.generateForTrustedDevice(),_s.generate(),ba.generateForTrustedDevice()]),n=ra.createFromPreComputedX(t.srpx.exportBytes()),o;try{o=await j.completeRecovery(Pr.device,t,a,n.params,A.config.lang,r),await e(o.details.accountUuid,o.details.userUuid,r)}catch(i){throw console.error("signInWithRecoveryCodePasskeys Failed to save device key:",i),new Error(`There was an issue saving the device key: ${j$(i)}`)}try{return o.signIn(A,{shouldLoadUniverse:!0,isDesignatedAsPublic:!1})}catch(i){throw console.error("signInWithRecoveryCodePasskeys Failed to sign in:",i),new Error(`There was an issue while signing in to your account: ${j$(i)}`)}},RSj=async(A,j,e,t)=>{let r=await ba.generate();A.user=new Eo({email:e.aux.email,language:t,name:e.aux.name,secretKey:r}),A.userAuth=await ra.generate({email:e.aux.email,password:j,secretKey:r}),A.user.masterKey=await rr.deriveDefaultKdf({email:e.aux.email,password:j,secretKey:r});let a=await Ai.fromHex(A.userAuth.srpX),n=await yi.new({srpx:a,auk:A.user.masterKey});return(await e.completeRecovery(Pr.device,n,r,A.userAuth.params,t,void 0)).signIn(A,{shouldLoadUniverse:!0,isDesignatedAsPublic:!1})},DSj=async(A,j,e)=>{let t=new Eo({email:j.email,password:j.password,secretKey:j.secretKey,uuid:j.uuid});return A.user=t,A.session.signin(t,e.allowReauthorization)},TSj=async(A,j,e)=>{let{email:t,secretKey:r,muk:a,srpX:n,uuid:o}=j;if(!a.alg)throw new Error("Missing MUK alg.");if(!n)throw new Error("Missing SRP-x.");let i=r?ba.fromInput(r):void 0;if(r&&!i)throw new Error("Secret Key is invalid");let s=new Eo({email:t,secretKey:i,uuid:o});return A.user=s,A.user.masterKey=await rr.fromJwk(a),A.session.signin(s,e.allowReauthorization,n)},XS=async(A,j,e)=>{try{let t=await A.session.verifyMfa(j);t.dsecret&&A.user&&(A.user.dSecret=t.dsecret)}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.invalidMFA))return ArA(A,t);throw t}return tm(A,e)},CSj=async(A,j,e,t)=>XS(A,{type:e,code:j},t),_Sj=async(A,j,e,t)=>XS(A,{type:"dSecretProxy",dshmac:j,deviceUuid:e},t),SSj=async(A,j,e)=>XS(A,{type:"webAuthn",data:j},e),HSj=async(A,j,e)=>{try{A.user&&(A.user.dSecret=j);let t=O_(j,A.session.sessionUuid);await A.session.verifyMfa({type:"dSecret",dshmac:t})}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.invalidMFA)&&A.user)return A.user.dSecret=void 0,ArA(A,t);throw t}return tm(A,e)},MSj=async(A,j,e)=>XS(A,j,e),KSj=async(A,j,e)=>{try{let t=await A.session.enableMfaWithAuth(j);t.dsecret&&A.user&&(A.user.dSecret=t.dsecret)}catch(t){if(CA.isClientError(t,CA.ClientErrorCode.invalidMFA)||CA.isServerError(t,CA.ServerErrorCode.authenticationRequired,CA.HTTPStatusCode.unauthorized))return ArA(A,t);throw t}return tm(A,e)},ArA=async(A,j)=>{if(!A.session||!A.session.auth||!A.user)throw new Error("Missing auth or user data.");let e=A.session.auth.srpX,t=await A.session.signin(A.user,!1,e);throw t.type==="mfa_required"?j:new Error(`Unexpected sign-in response ${t.type}`)},tm=async(A,j)=>F1("handleSignInSuccess",async()=>{let e=A.user;if(!e)return Promise.reject(new Error("Missing user"));let r=(async()=>j.shouldLoadUniverse?ZF(A,[_t.Groups]):go(A,[_t.Me,_t.MeMemberships,_t.UserFlags,_t.AccountFlags,_t.Billing,_t.Tier,_t.Promotions,_t.GatedFeatureTrials]))().then(async n=>wtA(A,n,e,j.translators,j.setupWithSystemVaults)).then(async()=>LSj(A).catch(n=>{console.error("Failed to add signing key to user",n),Or(new xe({errorClass:p`AddSigningKeys`,userUuid:W(e.uuid),message:p`Failed to add signing key to user`,stackOverrideError:n,severityLevel:"warning"}))})).then(async()=>{if(A.session.ssoMigrationGracePeriod?.state===Dj.State.MustMigrateAuth)return{notifierEnabled:!1};if(!A.session.serverConfig)throw new Error("Missing server config");return A.notifier.connect(A.session.serverConfig.notifier),{notifierEnabled:!0}}).then(async({notifierEnabled:n})=>{n&&A.nc.emit(Vt.SignedIn),WtA&&A.account&&A.user&&!j.suppressClientNotifications&&(YtA?await trA(A,j):await ORA(A,j)),e.password=void 0}),a=f1(A);return Promise.all([a,r]).then(([n,o])=>{A.account!==void 0&&(A.account.features=n)})}),jrA=(A,j)=>{if(A.account&&A.user)return{accountUuid:A.account.uuid,domain:A.account.urlHost(A.config.server),email:A.user.email,userUuid:A.user.uuid,deviceIsPublic:j.isDesignatedAsPublic?"true":"false"}},erA=(A,j,e)=>{e?XtA(j).catch(t=>{console.error("Setting account cookie failed.",t)}).then(()=>{A()}).catch(()=>{}):A()},ORA=async(A,j)=>{if(!A.account||!A.user)return;let e=jrA(A,j);if(!e)return;let t=A.user.secretKey&&A.user.secretKey.exportSensitiveReadableString();Pr.device&&Pr.device.fromDeviceInit&&A.user.dSecret&&(e.dSecret=A.user.dSecret),j.authOnly&&(e.authOnly=!0);let r=t&&A.user.password,a=A.user?.secretKey&&A.user.secretKey.isTrustedDeviceFormat();if(r){if(!A.user.password)return;let n=await VtA(A,"extension-first-for-scim"),o={...e,accountKey:t,masterPassword:A.user.password,shouldAddAccountToExtension:j.shouldAddAccountToExtension||n,isSsoAccount:j.isSsoAccount};erA(()=>{document.dispatchEvent(new CustomEvent("B5SignInSucceeded",{bubbles:!1,cancelable:!1,detail:o}))},A,j.authOnly)}else if(a)return trA(A,j)},trA=async(A,j,e)=>{let t=jrA(A,j);if(!t||!A.user||!A.user.masterKey)return;if(j.authOnly&&(t.authOnly=!0),!(A.user.masterKey instanceof rr))throw Or(b1(p`Master key is not a valid Auk`,p`handleDelegatedSessionSignInSuccess`,A.user.uuid)),new TypeError("Master key is not a valid Auk");let r={...t,shouldAddAccountToExtension:j.shouldAddAccountToExtension,isSsoAccount:j.isSsoAccount,masterKey:await A.user.masterKey.exportJwkJSON()};if(!QtA||j.authOnly)try{let n=await Nw(A.session,rrA(f4()),!1);r.session=n}catch(n){console.error("Could not create delegated session:",n);return}let a=await VtA(A,"extension-first-for-sso");a&&A.account&&(A.account.features["extension-first-for-sso"]=!0),r.shouldAddAccountToExtension=a,erA(()=>{if(e){let n={...r,extraCredentials:e};document.dispatchEvent(new CustomEvent("B5MyceliumDelegatedSignInSucceeded",{bubbles:!1,cancelable:!1,detail:n}))}else document.dispatchEvent(new CustomEvent("B5DelegatedSignInSucceeded",{bubbles:!1,cancelable:!1,detail:r}))},A,j.authOnly)},NSj=async(A,j)=>{if(j.account&&j.user?.masterKey&&A.accountUuid===j.account?.uuid){let e=await Nw(j.session,rrA(f4()),!1),t=jrA(j,{});if(!t)return;if(!(j.user.masterKey instanceof rr))throw Or(b1(p`Master key is not a valid Auk`,p`handleDelegatedSessionRequest`,j.user.uuid)),new TypeError("Master key is not a valid Auk");let r={...t,accountUuid:j.account.uuid,requestId:A.requestId,sessionDetail:{masterKey:await j.user.masterKey.exportJwkJSON(),session:e}};erA(()=>{document.dispatchEvent(new CustomEvent("B5RequestDelegatedSessionResponse",{bubbles:!1,cancelable:!1,detail:r}))},j,!1)}},LSj=async A=>F1("addSigningKeysIfNeeded",async()=>{let j=A.user;if(!j)throw new Error("Missing user.");let e=j.activeKeyset;if(!e)throw new Error("Missing user's active keyset.");if(!e.hasSigningKeys())return e.generateSigningKeys().then(async()=>j.encryptActiveKeysetWithMasterKey()).then(async t=>yRA(A.session,t)).then(()=>{})}),zSj=async A=>F1("signOut",async()=>(NtA(A),Kw(A.session).catch(j=>{console.error("signout failed:",j)}).then(()=>{A.nc.emit(Vt.SignedOut)}))),USj=To.intersection([To.type({accountKey:Gj(To.string),email:To.string,requestID:To.number,serverConfig:uC,sessionKey:$A.JwkSymKey}),To.partial({masterKey:$A.JwkSymKey,derivationInfo:Y4,dSecret:To.string,password:To.string,auth:njA})],"ContextInitialization"),RRA=async(A,{allowMissingAuk:j=!1,hydratedSecretKey:e=void 0}={allowMissingAuk:!1,hydratedSecretKey:void 0})=>{if(!A||!A.email||!A.serverConfig||!A.serverConfig.notifier)throw new Error("Invalid details object");if(!j&&(!A.masterKey||!A.masterKey.alg||!A.masterKey.k))throw new Error("Invalid details object (missing AUK)");let t=A.accountKey?ba.fromInput(A.accountKey):e;if(A.accountKey&&!t)throw new Error("Invalid Secret Key");let r=new Eo({email:A.email,secretKey:t});return A.masterKey&&(A.masterKey.kid==="mp"?r.masterKey=await rr.fromJwk(A.masterKey,A.derivationInfo):r.masterKey=await Ts.fromJwk(A.masterKey)),A.dSecret&&(r.dSecret=A.dSecret),A.password&&(r.password=A.password),r},VSj=async(A,j,e,{includeFeatureFlags:t=!1,deviceKey:r=void 0,secretKey:a=void 0}={})=>{if(j!==1)throw new Error("Invalid API version");if(!e||!e.email||!e.masterKey||!e.masterKey.alg||!e.masterKey.k||!e.serverConfig||!e.serverConfig.notifier)throw new Error("Invalid details object");if(!e.sessionKey||!e.sessionKey.k||!e.sessionKey.kid)throw new Error("Invalid details object (missing key)");A.user=await RRA(e,{hydratedSecretKey:a});try{if(await A.session.initialize({rawSessionKey:ej(e.sessionKey.k),requestId:e.requestID,serverConfig:e.serverConfig,sessionUuid:e.sessionKey.kid,auth:e.auth}),await Mw(A.session),await ZF(A,[_t.Groups]),t){let n=await f1(A);A.account!==void 0&&(A.account.features=n)}if(!A.session.serverConfig)throw new Error("Missing server config");if(r){let n=await XSj(A,r);n&&A.session.importAuth(n)}return A.notifier.connect(A.session.serverConfig.notifier),A.config.initializedWithExistingSession=!0,A.nc.emit(Vt.SessionInitialized),A}catch(n){throw A.nc.emit(Vt.SessionInitError,n),n}},XSj=async(A,j)=>{try{let e=await NA.getEncryptedCredentialBundle(A,j.kid),{srpx:t}=await j.decryptCredentialBundle(e.encCredentials);return ra.createFromPreComputedX(t.exportBytes())}catch{Or(b1(p`Failed to get auth params using the device key`,p`getAuthParamsFromDeviceKey`,A.user?.uuid));return}},JSj=async A=>F1("getInitializationExportFromNewContext",async()=>TRA(A).then(async j=>DRA(j))),DRA=async(A,{allowMissingAuk:j=!1,includeAuth:e=!1}={})=>{let{user:t,session:r}=A;if(!t)throw new Error("Missing user");let a=t.secretKey&&t.secretKey.exportSensitiveReadableString();if(!t.masterKey&&!j)throw new Error("Missing master key");if(!r.sessionKey||!r.sessionKey.jwk)throw new Error("Missing session key");if(!r.serverConfig)throw new Error("Missing server config");let n={accountKey:a,email:t.email,masterKey:void 0,derivationInfo:void 0,requestID:r.requestId,serverConfig:{notifier:r.serverConfig.notifier},sessionKey:r.sessionKey?.jwk,dSecret:t.dSecret,password:t.password};return e&&(n.auth=r.auth),t.masterKey&&(n.masterKey=await t.masterKey.exportJwk(),t.masterKey instanceof rr&&(n.derivationInfo=t.masterKey.derivationInfo)),n},rrA=A=>{let j=Number.parseInt(A.clientVersion,10).toString();return{...A,clientVersion:j}},WSj=async(A,j,e)=>{let t=A.user;if(!t)throw new Error("Missing user");let r=t.secretKey&&t.secretKey.exportSensitiveReadableString();if(t.secretKey&&!r)throw new Error("Invalid Secret Key");if(!t.masterKey)throw new Error("Missing master key");let a=await Nw(A.session,rrA(j),e);if(!(t.masterKey instanceof rr))throw Or(b1(p`Master key is not a valid Auk`,p`delegateSession`,t.uuid)),new TypeError("Master key is not a valid Auk");return{accountKey:r,email:t.email,masterKey:await t.masterKey.exportJwk(),derivationInfo:t.masterKey.derivationInfo,requestID:1,serverConfig:{notifier:a.notifier,userUuid:t.uuid,accountUuid:A.account?.uuid},sessionKey:a.sessionKey,dSecret:void 0}},TRA=async A=>{let j=new rx(A.config),e=A.user;if(!e)throw new Error("Missing current user");if(j.user=new Eo({email:e.email,secretKey:e.secretKey,uuid:e.uuid}),j.user.dSecret=e.dSecret,j.user.masterKey=e.masterKey,!A.session||!A.session.auth)throw new Error("Auth info not available.");let t=A.session.auth.srpX,r=await j.session.signin(j.user,!1,t);if(r.type==="mfa_required")if(r.details.dsecret?.enabled){let n=j.user?.dSecret;if(!n)throw new Error("No dSecret available.");await j.session.verifyMfa({type:"dSecret",dshmac:O_(n,j.session.sessionUuid)})}else throw new Error("Unable to complete MFA, dSecret option not available.");return j},arA=async A=>!A.isSignedIn()||A.user===void 0||A.user.masterKey===void 0||!A.session.auth?void 0:{email:A.user.email,muk:await A.user.masterKey.exportJwk(),secretKey:A.user.secretKey?A.user.secretKey.exportSensitiveReadableString():void 0,srpX:A.session.auth.srpX},CRA=async(A,{currentPassword:j,newPassword:e,generateNewSecretKey:t=!1,checkCurrentPassword:r=!0})=>{if(!A.user)throw new Error("Active user is missing");let a=A.user;if(!A.user.secretKey)throw new Error("Active user is missing secretKey");if(!e&&!t)throw new Error("Nothing to do");let n={oldSecretKey:A.user.secretKey,oldMasterKey:A.user.masterKey,oldActiveKeyset:A.user.activeKeyset,oldUserAuth:A.userAuth};try{r&&await nrA(A,j);let o=t?await ba.generate():n.oldSecretKey;a.secretKey=o,a.password=e,A.userAuth=await ra.generate({email:a.email,password:e,secretKey:o}),a.masterKey=await rr.deriveDefaultKdf({email:a.email,password:e,secretKey:o});let i=await a.encryptActiveKeysetWithMasterKey();return a.password=void 0,[i,n]}catch(o){throw SRA(A,a,n),o}},QSj=async(A,j)=>{let[e,t]=await CRA(A,j);await _RA(A,e,t)},_RA=async(A,j,e)=>{if(!A.user)throw new Error("Active user is missing");let t=A.user;try{let r=A.userAuth;if(!r)throw new Error("User's auth info is missing");let a={email:t.email,auth:ra.getForUpload(r),activeKeyset:j},n=t.secretKey;if(!n)throw new Error("Missing user's Secret Key");return n.id!==e.oldSecretKey.id&&(a.accountKeyFormat=n.format.toString(),a.accountKeyUuid=n.id),t.archivedKeysets.length>0&&(a.archivedKeyset=t.archivedKeysets[0]),GX(A.session,a)}catch(r){throw SRA(A,t,e),r}},SRA=(A,j,e)=>{j.password=void 0,j.masterKey=e.oldMasterKey,j.activeKeyset=e.oldActiveKeyset,j.secretKey=e.oldSecretKey,A.userAuth=e.oldUserAuth},nrA=async(A,j)=>{let e=A.user;if(!e)throw new Error("User is missing");let t=e.masterKey;if(!t)throw new Error("Missing current master key");if(!(t instanceof rr))throw Or(b1(p`Master key is not a valid Auk`,p`verifyMasterPassword`,e.uuid)),new TypeError("Master key is not a valid Auk");let r=t.derivationInfo;if(r===void 0)throw new Error("Missing current derivation info");if(e.secretKey===void 0)throw new Error("Missing secret key");if(!await t.verifyMasterPassword(r,{email:e.email,secretKey:e.secretKey,password:j}))throw new CA.ClientError(CA.ClientErrorCode.incorrectMasterPassword,W("Your email address, Secret Key, or password is incorrect."))},YSj=async(A,j)=>{await vV(A.session,j)},ZSj=async A=>{try{await fV(A.session)}catch(j){throw console.error("[promptConfirmChangeEmail] Failed to send email change token:",j),j}},AHj=async(A,j)=>{await GV(A.session,j)},jHj=async(A,j,e,t)=>F1("completeChangeEmailForPasswordUser",async()=>{if(!A.user)throw new Error("User is missing");let r=A.user,a=r.email,n=A.userAuth,o=r.masterKey,i=r.activeKeyset;return nrA(A,e).then(async()=>(r.email=j,r.password=e,r.secretKey?(A.userAuth=await ra.generate({email:j,password:e,secretKey:r.secretKey}),r.masterKey=await rr.deriveDefaultKdf({email:j,password:e,secretKey:r.secretKey}),Promise.resolve()):Promise.reject(new Error("Missing Secret Key")))).then(async()=>r.encryptActiveKeysetWithMasterKey()).then(async s=>{if(!A.userAuth)throw new Error("User's auth info is missing");let l={email:j,auth:ra.getForUpload(A.userAuth),activeKeyset:s};return LT(A.session,l,t)}).then(()=>{r.password=void 0}).catch(s=>{throw r.email=a,r.masterKey=o,r.activeKeyset=i,r.password=void 0,A.userAuth=n,s})}),eHj=async(A,j,e)=>{if(!A.user)throw new Error("User is missing");let t=A.user;if(!A.session?.auth)throw new Error("User's auth info is missing");let r=A.session.auth;if(!t.secretKey)throw new Error("Missing Secret Key");let a=t.email;try{t.email=j;let n=await t.encryptActiveKeysetWithMasterKey(),o={email:j,auth:ra.getForUpload(r),activeKeyset:n};await LT(A.session,o,e)}catch(n){throw t.email=a,n}},tHj=async(A,j,e)=>SX(A.session,j.uuid,e),rHj=async A=>HX(A.session),aHj=async(A,j)=>KX(A.session,j.uuid);var nHj=async(A,j)=>wX(A.session,j),oHj=async(A,j,e)=>{let r=(await EC(A.session,j,Zf.Accept)).snooze.find(a=>a.group===e);if(r)return X6(r.until)},iHj=async(A,j,e)=>{let r=(await EC(A.session,j,Zf.Dismiss)).snooze.find(a=>a.group===e);if(r)return X6(r.until)};var yu=J(tA());var sHj=Z("web-api/api/billing/tax_jurisdiction.ts"),lHj=yu.type({country_name:yu.string,province_name:yu.string||void 0,tax_type:yu.string,effective_date:yu.string}),HRA=sHj((A,j)=>({name:"getNotifiableTaxJurisdictions",method:"POST",url:"/api/v1/tax-jurisdictions/notifiable",body:{country:A.toUpperCase(),province:j?j.toUpperCase():void 0},responseType:yu.type({data:yu.array(lHj)}),encrypted:!1}));var cHj="action/billing",yd=ij(cHj),Vs=async A=>yd("getSubscription",async()=>{let j=A.account;return j?Ye.getSubscription(A.session).then(e=>{let t=hu.subscriptionDetailAttrsFromAPI(e);return j.subscription={...j.subscription,...t},j.subscription}):Promise.reject(new Error("Missing account"))}),dHj=async(A,j=0,e=20)=>Ye.getInvoices(A.session,j,e),kHj=async(A,j)=>Ye.getInvoiceDetails(A.session,j),uHj=async(A,j)=>Ye.getInvoicePDF(A.session,j),EHj=async A=>yd("MspNfrSeats",async()=>Ye.getMspNfrInfo(A.session)),pHj=async(A,j)=>yd("MspDistributorLinkPreview",async()=>Ye.getMspDistributorLinkPreview(A.session,j)),mHj=async A=>yd("getMspLastInvoiceData",async()=>Ye.getMspLastInvoiceData(A.session)),BHj=async A=>yd("getMspProjectedInvoiceData",async()=>Ye.getMspProjectedInvoiceData(A.session)),gHj=async(A,j,e,t,r)=>yd("updateSubscription",async()=>{let a=A.account;if(!a)return Promise.reject(new Error("Missing account"));let n=j||a.subscription.tier,o=e||a.subscription.plan;if(!n)return Promise.reject(new Error("Missing tier"));if(!o)return Promise.reject(new Error("Missing plan"));let i={frequency:o.frequency,tierName:n.name,taxNumber:"",isTaxExempt:!1,country:"",provinceOrState:"",zip:""};return t&&(i.taxNumber=t.taxNumber,i.isTaxExempt=t.isTaxExempt),r&&(i.country=r.country,i.provinceOrState=r.provinceOrState,i.zip=r.zip),Ye.updateStripeSubscription(A.session,i).then(async()=>(a.subscription={...a.subscription,tier:n,plan:o},go(A,[]))).then(async()=>Vs(A)).then(s=>(po(A),s))}),hHj=async(A,j,e)=>yd("getValidPromotionFromCode",async()=>I3(j)?Ye.getValidPromotionFromCode(A.session,j,e):Promise.reject(new Error("Promo code format is invalid."))),qHj=async(A,j)=>yd("getIsValidPurchaseOrderToken",async()=>w4(j)?Ye.getIsValidPurchaseOrderToken(A.session,j):Promise.reject(new Error("Purchase order token format is invalid."))),xHj=async(A,j)=>yd("getIsValidStripePurchaseOrderToken",async()=>w4(j)?Ye.getIsValidStripePurchaseOrderToken(A.session,j):Promise.reject(new Error("Stripe purchase order token format is invalid."))),vHj=async(A,j)=>Ye.requestInvoiceEmail(A.session,j),MRA=A=>Cy(A.cards,j=>j.isDefault),GHj=async(A,j)=>{await Ye.addCard(A.session,j);let e=await Vs(A),t=e.cards[0];return t!==void 0&&!MRA(e)?orA(A,t):e},fHj=async(A,j,e)=>Ye.updateCard(A.session,j,e).then(async()=>Vs(A)),FHj=async(A,j)=>{let e=Ye.deleteCard;V$(j.stripeCardUid)&&(e=Ye.deletePaymentMethod),await e(A.session,j.stripeCardUid);let t=await Vs(A),r=t.cards[0];return r!==void 0&&!MRA(t)?orA(A,r):t},bHj=async(A,j)=>(await Ye.deletePendingPaymentMethod(A.session,j.setupIntentUid),await Vs(A)),yHj=async(A,j)=>V$(j)?Ye.getPaymentMethod(A.session,j):Ye.getCard(A.session,j),orA=async(A,j)=>V$(j.stripeCardUid)?KRA(A,j.stripeCardUid):Ye.changeDefaultCard(A.session,j).then(async()=>Vs(A)),KRA=async(A,j)=>Ye.changeDefaultPaymentMethod(A.session,j).then(async()=>Vs(A)),irA=async A=>yd("getAvailableTiers",async()=>{let j=A.account;return j?Ye.getAvailableTiers(A.session).then(e=>{let t=hu.parseAvailableTiersFromAPI(e,j.subscription);return j.subscription={...j.subscription,availableTiers:t},j.subscription}):Promise.reject(new Error("Missing account"))}),$Hj=async A=>yd("getAvailableTiersV3",async()=>A.account?Ye.getAvailableTiersV3(A.session).then(e=>hu.parseAvailableTiersV3(e)):Promise.reject(new Error("Missing account"))),wHj=async A=>Ye.getUpgradeTiers(A.session).then(j=>hu.parseTiersFromAPI(j)).catch(j=>{throw console.error("getUpgradeTiers failed:",j),j}),IHj=async A=>Ye.getDefaultTiers(A.session).then(j=>hu.parseTiersFromAPI(j)).catch(j=>{throw console.error("getDefaultTiers failed:",j),j}),PHj=async(A,j)=>yd("subscribeWithStripe",async()=>{let e=A.account;return e?Ye.activateStripeBilling(A.session,{setupIntentUid:j.token,tierName:j.tier?j.tier.name:"",frequency:j.plan?j.plan.frequency:"",country:j.country,province:j.province?j.province:"",postalCode:j.postalCode?j.postalCode:"",giftCardCode:j.giftCardCode?j.giftCardCode:""}).then(async()=>(e.subscription={...e.subscription,tier:j.tier},go(A,[_t.Billing]))).then(async()=>Vs(A)).then(t=>(po(A),t)):Promise.reject(new Error("Missing account"))}),OHj=async A=>Ye.cancelStripeSubscription(A.session).then(async()=>go(A,[_t.Billing])).then(async()=>Vs(A)).then(j=>(po(A),j)),RHj=async A=>Ye.endTrialPeriod(A.session),srA=async(A,j,e,t,r,a)=>Ye.getTaxAdvice(A.session,{country:e,province:t,postalCode:r,price:j,tierName:a}).then(n=>({countryCode:n.countryCode.toLowerCase(),provinceOrStateCode:n.provinceCode?n.provinceCode.toLowerCase():"",postalCode:n.postalCode,taxRate:n.taxRate,taxRateString:n.taxRateString,effectiveTaxRate:n.effectiveTaxRate,effectiveTaxRateString:n.effectiveTaxRateString,taxName:n.taxName,isTaxed:n.originalPrice===0&&n.taxRate>0||n.totalTax>0,totalPrice:n.totalPrice,originalPrice:n.originalPrice,useTaxData:n.useTaxData})),DHj=async(A,j)=>Ye.createPlayStoreSubscription(A.session,j),THj=async({session:A},j)=>Ye.createAppleSubscription(A,j),CHj=async(A,j)=>(await Ye.addOrUpdateAddress(A.session,j),Vs(A)),_Hj=async(A,j)=>{await Ye.activateStripeBilling(A.session,j)},SHj=async A=>Ye.getBillingStats(A.session).then(j=>({activeMembers:j.activeMembers,activeGuests:j.activeGuests,billedGuests:j.billedGuests,billedMembers:j.billedMembers})),HHj=async(A,j)=>{await Ye.linkAccountToPartner(A.session,j)},MHj=async(A,j)=>Ye.getRemainingAmount(A.session,j).then(e=>({remainingAmount:e.remainingAmount,isPartialRefund:e.isPartialRefund})),KHj=async(A,j,e)=>HRA(A.session,j,e);var lrA={};er(lrA,{deobfuscate:()=>LHj,obfuscate:()=>zHj});var NRA="klp4y2ywpkpczwhhutf2fqy5ri",NHj="This value works around an OAuth implementation limitation. It has no other value or permissions.",LRA=async()=>dn.rawHkdf(dn.Sha2Mode.Sha256,Ij(NHj),new Uint8Array,Ij("brex-oauth-obfuscation"),32),LHj=async A=>{if(!A)return"";let j=Ot(NRA);await j.importRawKey(Nt,await LRA());let e=await j.decrypt(A);return ln(e)},zHj=async A=>{let j=Ot(NRA);return await j.importRawKey(Nt,await LRA()),j.encrypt(Ij(A))};var drA={};er(drA,{createOrUpdateBrexAccess:()=>JHj,deleteBrexItemByUuid:()=>WHj,findBrexCredentials:()=>VHj,findBrexItemByRefreshToken:()=>URA,findBrexItemByUuid:()=>VRA,getBrexRedirectUri:()=>crA,getOrCreateSystemVault:()=>zRA});var zRA=async A=>{let j=await Nk(A);return j||await lx(A)},UHj=(A,j,e)=>{let t=new kA(A);return t.overview.integration="brex",t.details.sections=[{name:"brex",title:"brex",fields:[{k:"string",n:"accountId",t:"accountId",v:j},{k:"string",n:"refreshToken",t:"refreshToken",v:e}]}],t.templateUuid="800",t},VHj=A=>{let j=A.details.sections?.find(r=>r.name==="brex"),e=j?.fields?.find(r=>r.n==="refreshToken")?.v,t=j?.fields?.find(r=>r.n==="accountId")?.v;if(!e||typeof e!="string")throw new Error("Brex Integration Item is malformed: missing refreshToken");if(!t||typeof t!="string")throw new Error("Brex Integration Item is malformed: missing accountId");return{refreshToken:e,accountId:t}},URA=(A,j)=>A.find(e=>e.templateUuid==="800"&&e.state===kA.ItemState.Active&&e.overview.integration==="brex"&&e.details.sections?.find(t=>t.name==="brex"&&t.fields?.some(r=>r.n==="refreshToken"&&r.v===j))),VRA=(A,j)=>A.find(e=>e.overview.integration==="brex"&&e.uuid===j),XHj=(A,j)=>{let t=A.details.sections?.find(r=>r.name==="brex")?.fields?.find(r=>r.n==="refreshToken");if(!t)throw new Error("Expected refresh token in existing Brex item");return t.v=j,A.updatedAt=new Date,A},JHj=async(A,j,e,t)=>{let r=await zRA(A),a=await bd(A,r),n=t||URA(a,e),o;return n?o=XHj(n,e):o=UHj(r,j,e),await Tl(A,[o],r)},WHj=async(A,j)=>{let e=await Nk(A);if(!e)throw new Error("The system vault was expected but missing during Brex deletion");let t=await bd(A,e),r=VRA(t,j);if(!r)throw new Error("The Brex record was expected but missing during Brex deletion");r.state=kA.ItemState.Deleted;let a=await Tl(A,[r],e);if(a.failedItems[j])throw new Error("The Brex record was unable to be deleted");return a},crA=A=>`https://${Il}.${A.server}/api/v1/brex/redirect`;var QHj={...drA,...lrA},YHj=async A=>yAA(A.session),XRA=async(A,j)=>$AA(A.session,j),ZHj=async A=>wAA(A.session),AMj=async(A,j,e)=>{let t=e.get("code")||"",r=e.get("state")||"";if(!t)throw new Error("OAuth code is missing");if(!r)throw new Error("OAuth state is missing");return XRA(A,{code:t,redirect:crA(j),nonce:r})},jMj=async(A,j)=>IAA(A.session,j);var eMj="action/child_account",krA=ij(eMj),tMj=async A=>krA("createChildAccountRelationship",async()=>Ye.createChildAccountRelationship(A.session).then(Xq.create)),rMj=async A=>krA("getChildAccountRelationship",async()=>{try{let j=await Ye.getChildAccountRelationship(A.session);return Xq.create(j)}catch(j){let e=A$(j);if(Wh(e,Jh.resourceNotFound))return Xq.create({});throw e}}),aMj=async(A,j)=>Ye.checkChildAccountCode(A.session,j),nMj=async A=>Ye.detachChildAccount(A.session),oMj=async(A,j)=>krA("attachAsChildAccount",async()=>Ye.attachAsChildAccount(A.session,j).then(async()=>go(A,[_t.Billing])).then(async()=>Vs(A)).then(e=>(po(A),e)));var iMj=async A=>IX(A.session);var sMj="2",lMj=async(A,j)=>{if(!A.account)throw new Error("Account is missing.");if(!j.userAuth)throw new Error("Missing credential auth information.");let[e,t]=await Promise.all([gu.generate(j),Ot().generate(Nt)]),r={...e.localAuth,version:sMj,deviceUuid:Se(),uniqueKey:t};return{bearerToken:e.bearerToken,fileContents:JSON.stringify(r)}};var cMj="action/vault_access",Bx=ij(cMj),JRA=async(A,j)=>Bx("getAccessorsWithPubKeys",async()=>{let[e,t]=Ty(j,n=>n.accessorType==="group"),r=await TeA(A,e),a=await vc(A,t);return[...SF(e,r),...SF(t,a)]}),urA=async(A,j,e,t)=>Bx("addAccessorsToVault",async()=>{let a=(await JRA(A,j)).map(async s=>wt.generate(e,s,t.byUuid&&t.byUuid[s.uuid]||t.default)),o=(await Promise.all(a)).map(Rl);await W6(async s=>(await ST(A.session,e.uuid,s),[]),100,o)}),dMj=async(A,j,e,t)=>Bx("addAccessorToVaults",async()=>{let[r]=await JRA(A,[j]);if(!r)throw new Error("Missing accessor with public key.");let a=e.map(async n=>(n.defaultAcl!==void 0&&(t.acl=n.defaultAcl),wt.generate(n,r,t).then(async o=>{let i=Rl(o);return ST(A.session,n.uuid,[i])})));return Promise.all(a).then(()=>{})}),kMj=async(A,j)=>Bx("updateVaultAccessPermissions",async()=>{if(me.isEffectivelyZero(j.acl))await prA(A,j);else return j.accessorType==="group"?UU(A.session,j.vaultUuid,j.accessorUuid,j.acl):zU(A.session,j.vaultUuid,j.accessorUuid,j.acl)}),ErA=async(A,j)=>{if(j.some(e=>e.accessorType!=="group"))throw new Error("Some of the vaultAccess objects in updateBulkGroupVaultAccessPermissions were not groups");return Bx("updateBulkGroupVaultAccessPermissions",async()=>(await Promise.all(j.filter(e=>me.isEffectivelyZero(e.acl)).map(async e=>prA(A,e))),VU(A.session,j.map(e=>({vaultUuid:e.vaultUuid,groupUuid:e.accessorUuid,permission:e.acl})))))},WRA=async(A,j,e,t)=>Bx("deleteAccessorFromVault",async()=>{let r=t==="group",a=r?mk(j):$o(j);if(!a)return Promise.reject(new Error("Invalid accessor reference"));let n=K$(e);return n?LU(A.session,n,a,r).then(async()=>{let o=r?Ka(A,a,{attrs:IA.Attr.VaultAccess,mustReload:!0}):Fu(A,a,{attrs:zr.Attr.VaultAccess,mustReload:!0});return Promise.all([fd(A,n,{attrs:sj.Attr.Accessors,mustReload:!0}),o])}):Promise.reject(new Error("Invalid vault reference"))}),prA=async(A,j)=>Bx("revokeVaultAccess",async()=>WRA(A,j.accessorUuid,j.vaultUuid,j.accessorType));var y1=ij("action/convert_account"),uMj=async A=>{if(!A.user)throw new Error("Missing user");let{user:j}=A;await JS(A,Et.Type.Individual,async()=>Cw(A.session,{type:Et.Type.Individual,accountName:j.name}))},EMj=async(A,j,e)=>{await JS(A,Et.Type.Family,async()=>Cw(A.session,{type:Et.Type.Family,accountName:j,childAccountCode:e}))},pMj=async(A,j)=>{let e=await px(A,j);await JS(A,Et.Type.Business,async()=>Cw(A.session,{type:Et.Type.Business,accountName:j,domain:e}))},mMj=async(A,j,e,t,r)=>{let a;j.accountType===Et.Type.Business&&(a=await px(A,t)),await JS(A,j.accountType,async()=>SV(A.session,{tierName:e,accountName:t,domain:a,childAccountCode:r}))},BMj=async(A,j,e)=>{try{await uU(A.session,{newTierName:j}),await mrA(A),await QRA(A,e),await YRA(A)}catch{throw new Error("Failed to change tier")}},JS=async(A,j,e)=>{gMj(A),await mrA(A),await hMj(A,j),await e(),await QRA(A,j),await YRA(A)},gMj=A=>{let{account:j,user:e}=A;if(!j)throw new Error("Missing account");if(!e)throw new Error("Missing user")},QRA=async(A,j)=>{let{account:e}=A;e&&(e.type=j,await mrA(A))},YRA=async A=>{let{account:j}=A;if(!j)return;let{subscription:{availableTiers:e}}=j;e&&e.length>0&&await irA(A),po(A)},mrA=async A=>y1("reload",async()=>{let j=go(A,[_t.Billing,_t.Invite,_t.Settings,_t.Tier,_t.UserFlags,_t.Groups]),e=Dg(A);return Promise.all([j,e])}),hMj=async(A,j)=>{switch(j){case Et.Type.Business:return qMj(A);case Et.Type.Family:return xMj(A);case Et.Type.Individual:return;default:throw new Error("Unknown account type")}},qMj=async A=>y1("convertToBusiness",async()=>{let j=A.user;if(!j)return Promise.reject(new Error("Missing user"));let e={attrs:IA.Attr.Memberships|IA.Attr.PubKey};return Promise.all([_S(A,e),SS(A,e),Bo(A,e)]).then(async t=>{let[r,a,n]=t;return ZRA(A,j,n).then(async o=>ADA(A,a,r,n,o))}).then(()=>{})}),xMj=async A=>y1("convertToFamily",async()=>{let j=A.user;if(!j)return Promise.reject(new Error("Missing user"));let e,t,r,a={attrs:IA.Attr.Memberships|IA.Attr.PubKey};return Promise.all([_S(A,a),SS(A,a),Bo(A,a)]).then(async n=>([e,t,r]=n,rg(A.session,{attrs:["combinedPermissions"]}))).then(async({users:n})=>{let o=n.filter(s=>Dj.isOwner(s)&&!Dj.isAdmin(s)).map(s=>({uuid:s.uuid,role:dr.Role.Manager})),i=n.filter(s=>Dj.isAdmin(s)&&!Dj.isOwner(s)).map(s=>({uuid:s.uuid,role:dr.Role.Manager}));return Promise.all([ax(A,{group:e,add:o,remove:[]}),ax(A,{group:t,add:i,remove:[]})])}).then(async()=>Dg(A)).then(async n=>{let o=[],i=n.filter(k=>k.type!==sj.TypePersonal&&sj.activeUserHasAcl(k,me.Manage)),s=Zc(i,k=>{let u=!1,m=!1,F=k.accessList.filter(G=>G.accessorType==="group").map(G=>{let x=A.account&&A.account.findGroup(G.accessorUuid);if(!x)throw new Error("Missing group "+G.accessorUuid);switch(x.type){case IA.TypeOwners:return u=!0,G.acl=me.Manage,G;case IA.TypeAdmins:return m=!0,G.acl=me.Manage,G;default:{let R=(G.acl&me.RWE)>(G.acl&me.ALL_READ);return G.acl=R?me.RWE:me.ALL_READ,G}}}),S=[];if(u||S.push(t),m||S.push(e),S.length>0){let G=S.map(x=>({accessorType:x.accessorType,uuid:x.uuid}));o.push(urA(A,G,k,{default:{acl:me.Manage}}))}return F}),l=100,c=1;return await W6(async k=>(`${Math.min(s.length,c++*l)}${s.length}`,await ErA(A,k),[]),l,s),Promise.all(o)}).then(async()=>ZRA(A,j,r)).then(async n=>ADA(A,t,e,r,n)).then(()=>{})}),ZRA=async(A,j,e)=>y1("createTeamMembersGroupIfNeeded",async()=>{if(A.account&&A.account.teamMembersGroup)return zk(A,{attrs:IA.Attr.PubKey});let t=new IA({desc:"All team members.",name:"Team Members",type:IA.TypeTeamMembers});return Uk(A,t,e).then(async r=>t.addMembership(r,j,{role:dr.Role.Member})).then(async()=>bu(A,t,void 0))}),ADA=async(A,j,e,t,r)=>y1("createTeamVaultIfNeeded",async()=>jm(A).then(async a=>{if(a)return a;let n=KS();return n.generateNewKey().then(async()=>Promise.all([wt.generate(n,j,{acl:me.Manage}),wt.generate(n,e,{acl:me.Manage}),wt.generate(n,t,{acl:me.Recover}),wt.generate(n,r,{acl:me.ALL_READ|me.ALL_WRITE|me.ALL_EXPORT})])).then(async o=>cx(A,n,o))}));var $1=J(tA());var BrA=J(Wo());var vMj=Z("web-api/action/demo_vault_items.ts"),GMj=["wendy","wendyappleseed","wendy@appleseed.com"],fMj=["has_credit_card","has_address"],FMj=$1.record($1.string,$1.string),bMj=async(A,j,e,t)=>{let r=await yMj(A.session),a=oc(r),n=sn(t,s=>s.uuid===Sj.LoginUuid),o=[],i=1;for(let s=0;s<j;s++){let l=new kA(e,n),c=Ad(a);c===0&&(a=oc(r),c=Ad(a),i++);let k=s6(0,c-1),u=Object.keys(a)[k];if(u===void 0)continue;delete a[u];let m=i>1?` (${i.toString()})`:"";l.title=r[u]+m,l.overview.URLs=[{l:"website",u:"https://"+u}],l.overview.url="https://"+u;let F=GMj[s6(0,2)];F!==void 0&&l.setUsername(F);let[S,G]=WS();l.setPassword(S,!0,G);let x=s6(1,40)===1;l.faveIndex=x?1:0;let R=s6((0,BrA.default)().unix()-31536e3,(0,BrA.default)().unix());if(l.createdAt=new Date(R*1e3),l.updatedAt=new Date(R*1e3),s6(1,10)===1){let D={time:R-s6(2e6,6e6),value:WS()[0]};l.details.passwordHistory=[D]}let P=[];if(s6(1,15)===1){let D={k:kA.FieldType.Concealed,n:kA.TOTP_PREFIX+Se(),v:Se(),t:"one-time password"},y={name:Se(),title:"",fields:[D]};P.push(y)}if(s6(1,15)===1){let D={k:kA.FieldType.Concealed,n:Se(),v:WS()[0],t:"First pet's name?"},y={k:kA.FieldType.Concealed,n:Se(),v:WS()[0],t:"Mother's maiden name?"},h={name:Se(),title:"Security Questions",fields:[D,y]};P.push(h)}if(s6(1,15)===1){let D={k:kA.FieldType.Email,n:Se(),v:"support@"+u,t:"email"},y={k:kA.FieldType.Phone,n:Se(),v:"1-800-"+s6(100,999).toString()+"-"+s6(1e3,9999).toString(),t:"phone"},h={name:Se(),title:"Contact Info",fields:[D,y]};P.push(h)}if(l.details.sections=P,s6(1,15)===1){let D=fMj[s6(0,1)];D!==void 0&&(l.tags=[D])}s6(1,15)===1&&(l.notes="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suam denique cuique naturam esse ad vivendum ducem."),o.push(l)}await Tl(A,o,e)},WS=()=>{if(s6(0,1)===1){let[A,j]=az(s6(4,5));return[A.join(" "),j]}else{let A=ju.UPPERCASE+ju.LOWERCASE+ju.DIGITS;return Fp(A,s6(15,25))}},yMj=vMj(()=>({name:"getDemoWebsites",method:"GET",url:"/demo-data/websites.json",responseType:FMj,encrypted:!1}));var $Mj=async(A,j)=>PX(A.session,j),wMj=async(A,j,e,t,r,a)=>OX(A.session,j,e,t,r,a),IMj=async(A,j,e,t)=>RX(A.session,j,e,t),PMj=async(A,j,e,t,r,a)=>{let{numSharedVaults:n,sharedVaults:o}=await DX(A.session,j,e,t,r,a),i=await Promise.all(o.map(async({developerItems:s,uuid:l,vault:c})=>{if(!c)return{developerItems:s,uuid:l};let k=await us(A,c);return{developerItems:s,vault:k,uuid:l}}));return{numSharedVaults:n,sharedVaults:i}},OMj=async(A,j,e,t)=>TX(A.session,j,e,t),RMj=async(A,j,e,t,r)=>CX(A.session,j,e,t,r),DMj=async(A,j,e)=>_X(A.session,j,e);var TMj="action/distributors",jDA=ij(TMj),CMj=async(A,j)=>jDA("getDistributorEntitlementFromCode",async()=>$4(j)?Yq.getDistributorEntitlementFromCode(A.session,j):Promise.reject(new Error("Distributor entitlement code format is invalid."))),_Mj=async A=>Yq.getDistributor(A.session),SMj=async(A,j)=>jDA("linkDistributorByEntitlementCode",async()=>{if(!$4(j))return Promise.reject(new Error("Distributor entitlement code format is invalid."));await Yq.linkDistributorByEntitlementCode(A.session,j)});var HMj=async A=>await NX(A.session),MMj=async(A,j)=>LX(A.session,j);var KMj=async A=>zX(A.session),NMj=async(A,j)=>UX(A.session,j),LMj=async(A,j)=>XX(A.session,j),zMj=async(A,j)=>VX(A.session,j);var UMj=async A=>FAA(A.session),VMj=async(A,j)=>bAA(A.session,j);async function eDA(A){let j={};return A.user!==void 0&&(j.userRole=XMj(A),j.telemetryStatus=Dj.isOptedInToTelemetry(A.user)),A.account!==void 0&&(j={...j,accountCreationDate:ls(A.account.createdAt),accountTier:A.account.subscription.tier?.name,accountType:A.account.type}),j}function XMj(A){let j=A.user;if(!j)return[];let e=[];return Dj.isGuest(j)&&e.push("Guest"),Dj.isMember(j)&&e.push("Team Member"),Dj.isOwner(j)&&e.push("Owner"),Dj.isAdmin(j)&&e.push("Admin"),Dj.canRecoverPeople(j)&&e.push("Recovery"),Dj.isSecurity(j)&&e.push("Security"),Dj.isUserDefined(j)&&e.push("User Defined"),e}async function tDA(A){let j=aq(),e=JMj(A,j);if(e===void 0){console.error("Failed to retrieve required field for base feature context: deviceUUID");return}return{deviceUuid:e,app:j?.clientName,browserType:await WMj(),buildNumber:A.config.opua.client.buildNum.toString(),platform:j?.osName,releaseChannel:A.config.opua.client.channel,subEnvironment:A.config.env}}function JMj(A,j){let e=A.config.opua.deviceUuid;if(e!==void 0&&e!=="")return Qn()&&console.info("\u26F3\uFE0F Feature flags - Using device UUID from OPUA"),e;if(j!==void 0&&j.uuid!=="")return Qn()&&console.info("\u26F3\uFE0F Feature flags - Using device UUID from device info"),j.uuid}async function WMj(){try{return(await IB(navigator.userAgent)).name}catch(A){console.error("Failed to retrieve browser information for feature context",A)}}var iDA=J(tA());var rm=J(tA()),rDA=rm.exact(rm.type({name:rm.literal("experiment-b5web-view-vault-items-production-20250925-control"),value:rm.type({variantName:rm.string})}));var am=J(tA()),aDA=am.exact(am.type({name:am.literal("experiment-b5web-view-vault-items-production-20250925-treatment"),value:am.type({variantName:am.string})}));var ho=J(tA()),nDA=ho.exact(ho.type({name:ho.literal("testVariant"),value:ho.intersection([ho.type({description:ho.string,showButton:ho.boolean}),ho.partial({optionalField:ho.string})])})),oDA=ho.exact(ho.type({name:ho.literal("test-variant-2"),value:ho.type({})}));var QMj=iDA.union([nDA,oDA,rDA,aDA]),sDA=QMj;var grA=class{constructor(){this.canUsePreRegEndpointFromService=async j=>j.config.env==="lcl"?!1:(await VS("b5web-feature-rollout-service-traffic-enabled",j))["b5web-feature-rollout-service-traffic-enabled"]?.enabled??!1,this.canUseAccountBasedEndpointFromService=j=>j.config.env!=="lcl"&&this.hasAccountBasedFeature("b5web-feature-rollout-service-auth-traffic-enabled"),this.accountBasedFeatures=new Map,this.preRegistrationFeatures=new Map}hasAccountBasedFeature(j){let e=this.accountBasedFeatures.get(j);return e?e.enabled:!1}hasPreRegistrationFeature(j){let e=this.preRegistrationFeatures.get(j);return e?e.enabled:!1}async updateAccountBasedFeatures(j){let e=j.account?.hasUnleashFeature;e&&Object.keys(e).length&&Object.keys(e).forEach(t=>{this.accountBasedFeatures.set(t,{enabled:!0})});try{let t=this.canUseAccountBasedEndpointFromService(j);t&&(this.accountBasedFeatureContext=await eDA(j),Qn()&&console.info("\u26F3\uFE0F Feature flags - Account based feature endpoint from feature rollout service enabled.")),(await wRA(j,t,this.baseFeatureContext,this.accountBasedFeatureContext)).features.forEach(a=>{let n={enabled:!0};LS(a.variantPayload?.value)&&(n.variantPayload=a.variantPayload),this.accountBasedFeatures.set(a.name,n)})}catch(t){console.error("failed to update account-based flags",t)}Qn()&&console.info(`\u26F3\uFE0F Feature flags -  Loaded account features:
				${JSON.stringify([...this.accountBasedFeatures.keys()])}`)}async updatePreRegistrationFeatures(j){try{let e=await this.canUsePreRegEndpointFromService(j);e&&(Qn()&&console.info("\u26F3\uFE0F Feature flags - Feature Rollout service traffic enabled."),this.baseFeatureContext=await tDA(j));let t=await US(j,e,this.baseFeatureContext);for(let[r,a]of Object.entries(t))this.preRegistrationFeatures.set(r,a)}catch(e){console.error("failed to update preregistration flags",e)}Qn()&&console.info(`\u26F3\uFE0F Feature flags -  Loaded pre-registration features:
				${JSON.stringify([...this.preRegistrationFeatures.keys()])}`)}getPreRegistrationVariant(j){let e=this.preRegistrationFeatures.get(j)?.variantPayload;if(e)return lDA(e);Qn()&&console.warn(`Variant for pre-registration flag ${j} is ${JSON.stringify(e)}. Unable to retrieve variant}.`)}getAccountBasedFeatureVariant(j){let e=this.accountBasedFeatures.get(j)?.variantPayload;if(e)return lDA(e);Qn()&&console.warn(`Variant for account-based flag ${j} is ${JSON.stringify(e)}. Unable to retrieve variant.`)}},lDA=A=>{try{return zS(sDA,A)}catch(j){console.error(`Failed to validate variant payload for variant ${A?.name}`,j);return}};var YMj=async(A,j)=>AJ(A.session,j),ZMj=async A=>jJ(A.session).then(async j=>deA(j));var AKj=async(A,j)=>JX(A.session,j);var jKj="action/gift_card",cDA=ij(jKj),eKj=async A=>cDA("getGiftCards",async()=>Ye.getGiftCards(A.session).then(j=>j.map(z$.create))),tKj=async(A,j)=>cDA("redeemGiftCard",async()=>Ye.redeemGiftCard(A.session,j)),rKj=async(A,j)=>Ye.checkGiftCard(A.session,j);var QrA={};er(QrA,{BoundCellType:()=>im,CCHeader:()=>Z6,CellAttr:()=>Hg,HeaderType:()=>C1,ImportFormat:()=>Hl,ItemKind:()=>Id,LoginHeader:()=>wd,SecureNoteHeader:()=>Sg,createVaultItems:()=>y4A,csvToVaultItems:()=>XrA,findLongestRowLength:()=>ZS,importVaultItems:()=>$4A,parse:()=>bc,removeEmptyColumns:()=>vrA});var aKj="action/vault_item_template",nKj=ij(aKj),dDA=async(A,j=!1)=>(await vU(A.session,j)).templates.map($g),Es=async A=>dDA(A,!0),oKj=async A=>{let j=await CT(A.session,Sj.IdentityUuid);return $g(j)},iKj=async(A,j)=>nKj("getDefaultTemplate",async()=>{let e=await CT(A.session,j);return $g(e)}),sKj=async(A,j)=>GU(A.session,{...qi(j,"sidebarIcon"),sourceIcon:j.sidebarIcon}),lKj=async(A,j,e)=>{let t=j.map(r=>r.uuid);return fU(A.session,t,e)},w1=async A=>{let j=await Es(A),e=j.find(n=>n.uuid===Sj.LoginUuid);if(!e)throw new Error("login template not found");let t=j.find(n=>n.uuid===Sj.CreditCardUuid);if(!t)throw new Error("credit card template not found");let r=j.find(n=>n.uuid===Sj.SecureNoteUuid);if(!r)throw new Error("secure note template not found");let a=j.find(n=>n.uuid===Sj.IdentityUuid);if(!a)throw new Error("identity template not found");return{loginTemplate:e,creditCardTemplate:t,secureNoteTemplate:r,identityTemplate:a}};var Ee;(function(A){A.populateVaultItemSectionField=(e,t,r,a,n,o)=>{typeof a<"u"?j(e,r,a,n):A.addFieldToOtherFieldsSection(e,t,r,o)};let j=(e,t,r,a)=>{let n=sn(e.details.sections,i=>i.name===r.section||i.title===r.section);n||(n={name:q.generateUUID(),title:r.section,fields:[]},e.details.sections.push(n));let o=n?.fields?.find(i=>i.n===r.field);if(o){r.v?o.v=r.v(o,t):o.v=t;let i=A.getItemOverview(a,o,e);i!==""&&(e.overview.ainfo=i)}else{n.fields||(n.fields=[]);let i=A.createSectionField({kind:r.kind||kA.FieldType.String,title:r.field,value:t,attributes:r.attributes||void 0,inputTraits:r.inputTraits||void 0,menuItems:r.menuItems||void 0});r.v&&(i.v=r.v(i,t)),n.fields.push(i)}};A.addFieldToOtherFieldsSection=(e,t,r,a)=>{let n=sn(e.details.sections,o=>o.title===a["Other Fields"]());n?(n.fields||(n.fields=[]),n.fields.push(A.createSectionField({kind:kA.FieldType.String,title:t,value:r}))):e.details.sections.push({name:q.generateUUID(),title:a["Other Fields"](),fields:[A.createSectionField({kind:kA.FieldType.String,title:t,value:r})]})},A.createSectionField=e=>({k:e.kind,v:e.value,t:e.title,n:q.generateUUID(),a:e.attributes,inputTraits:e.inputTraits,m:e.menuItems}),A.getItemOverview=(e,t,r)=>{if(e&&e.attrs.subtitle===t.n)return kA.getStringValue(t);if(r.templateUuid===xA.VaultItemTemplate.CreditCardUuid&&t.n===kA.FieldName.CreditCard.CreditCardNumber){let a=kA.getStringValue(t);return kA.getCreditCardSubtitle(a)}return""},A.getVaultItemTemplate=(e,t)=>{let r=t.find(a=>a.uuid===e);if(!r)throw new Error(`Could not find template with ID "${e}"`);return r},A.getValueFromRecord=(e,t)=>{let r=e[t];return r===void 0?"":r}})(Ee||(Ee={}));var tb=async(A,j,e)=>Es(A).then(t=>{let r=Ee.getVaultItemTemplate(Sj.LoginUuid,t);return j.map(a=>{let n=new kA(e),[o,i,s,l]=a;return n.templateUuid=Sj.LoginUuid,n.title=o||r.singularName,i&&(n.url=i),s&&n.setUsername(s),l&&n.setPassword(l),n})}).catch(t=>{throw t});var QS=J(xrA());var bc=A=>{let j=kDA(A,{skipEmptyLines:!0}),e=j.errors.length>0;return e&&console.error("Possible errors importing data:",j.errors),{parsedData:j.data,hasErrors:e}},YS=A=>kDA(A,{skipEmptyLines:!0,header:!0}).data;var kDA=(A,j)=>(cKj(),QS.parse(A,j));var cKj=()=>{if(typeof QS>"u")throw new TypeError("Papa Parse must be loaded first.")};var vrA=A=>{let j=ZS(A),e=[];for(let t=0;t<j;t++){let r=A.some(a=>a[t]);e.push(r)}return A.map(t=>t.filter((r,a)=>e[a]))};var ZS=A=>A.reduce((j,e)=>e.length>j?e.length:j,0),dKj=(A,j)=>{if(!(!A.details||!A.details.sections))return sn(A.details.sections,e=>e.title.toLowerCase()===j.toLowerCase())},Si=(A,j,e)=>{if(A.length===0)return;A.indexOf("apple-otpauth://")===0&&(A=A.slice(6));let t={k:kA.FieldType.Concealed,n:kA.TOTP_PREFIX+Se(),v:A,t:e["one-time password"]()},r=dKj(j,e.security());if(r)r.fields?r.fields.push(t):r.fields=[t];else{let a={name:"Section_"+Se(),title:e.security(),fields:[t]};j.details&&j.details.sections?j.details.sections.push(a):j.details.sections=[a]}};var kKj="action/import/apple",uKj=ij(kKj),uDA=async(A,j,e)=>uKj("parseAppleExport",async()=>{let t=bc(j).parsedData;return t.length===0?[]:(t[0]&&t[0][0]==="Title"&&t.shift(),tb(A,t,e))});var Vj=J(tA()),mDA=J(Wo());var EKj="action/import/bitwarden",pKj=ij(EKj),Tg;(function(A){A.BadEncType="bad encType attribute",A.BadData="the encrypted data has a different format than expected",A.BadMac="failed to verify mac"})(Tg||(Tg={}));var BDA=(A,j,e,t,r)=>pKj("parseBitwardenExport",async()=>{let a,n=cj(Ij(j),Ne.pipe(xKj));switch(n.type){case"ok":{a=n.value;break}case"err":throw new Error(t.unsupportedBitwardenExport())}if(!a.encrypted||!a.passwordProtected)throw new Error(t.unsupportedBitwardenExport());if(a.kdfType!==GrA.Pbkdf2Sha256)throw new Error(t.unsupportedBitwardenKdfType(a.kdfType));let o=await mKj(a,r.bitwardenExportPasssword);r.bitwardenExportPasssword="";try{await pDA(o,a.encKeyValidation_DO_NOT_EDIT)}catch{throw new Error(t.bitwardenBadPassword())}let i;try{i=await pDA(o,a.data)}catch{throw new Error(t.bitwardenFailedToDecrypt())}let s=cj(i,Yo.pipe($Kj)),l;switch(s.type){case"ok":{if(l=s.value,l.collections&&l.collections.length>0)throw new Error(t.bitwardenSharedItemsImportedError());break}case"err":throw Rs(s.value,p`action/import/bitwarden`,p`parseBitwardenExport`),new Error(t.unsupportedBitwardenExport())}return await BKj(A,e,t,l)}),AH={name:"HMAC",hash:"SHA-256"},mKj=async(A,j)=>{let e=await De.importKey("raw",Ij(j),"PBKDF2",!1,["deriveBits"]),t=await De.deriveBits({name:"PBKDF2",hash:"SHA-256",salt:Ij(A.salt),iterations:A.kdfIterations},e,256),r=await De.importKey("raw",t,AH,!1,["sign"]),a=await EDA(r,Ij("enc"),32),n=await EDA(r,Ij("mac"),32);return{enc:await De.importKey("raw",a,"AES-CBC",!1,["decrypt"]),mac:await De.importKey("raw",n,AH,!1,["verify"])}},EDA=async(A,j,e)=>{let t=Math.ceil(e/32),r=new Uint8Array,a=new Uint8Array(e),n=0;for(let o=1;o<=t&&n<e;++o){let i=new Uint8Array(r.byteLength+j.byteLength+1);i.set(r),i.set(j,r.byteLength),i.set([o],r.byteLength+j.byteLength),r=new Uint8Array(await De.sign(AH,A,i)),a.set(r,n),n+=r.byteLength}return a},pDA=async(A,j)=>{let e=j.split("."),t=e[0],r=e[1],a=P1.AesCbc256WithHmacSha256;if(t!==void 0){let s=parseInt(t,10);if(!(s in P1))throw new Error(Tg.BadEncType);a=s}else throw new Error(Tg.BadEncType);if(r===void 0)throw new Error(Tg.BadData);let n=r.split("|");if(n[0]===void 0||n[1]===void 0)throw new Error(Tg.BadData);let o=ej(n[0]),i=ej(n[1]);switch(a){case P1.AesCbc256WithHmacSha256:{if(n[2]===void 0)throw new Error(Tg.BadData);let s=ej(n[2]),l=new Uint8Array(o.byteLength+i.byteLength);if(l.set(o,0),l.set(i,o.byteLength),!await De.verify(AH,A.mac,s,l))throw new Error(Tg.BadMac);return ln(await De.decrypt({name:"AES-CBC",iv:o},A.enc,i))}default:return""}},P1;(function(A){A[A.AesCbc256WithHmacSha256=2]="AesCbc256WithHmacSha256"})(P1||(P1={}));var GrA;(function(A){A[A.Pbkdf2Sha256=0]="Pbkdf2Sha256"})(GrA||(GrA={}));var BKj=async(A,j,e,t)=>{let{loginTemplate:r,creditCardTemplate:a,secureNoteTemplate:n,identityTemplate:o}=await w1(A),i={};t.folders&&t.folders.forEach(c=>i[c.id]=c.name);let s=[];return(t.items?t.items:[]).forEach(c=>{if(c.deletedDate||c.collectionId)return;let k=new kA(j);if(k.isNewItem=!0,c.folderId){let m=i[c.folderId];m&&k.addTag(m)}k.title=c.name,c.notes&&(k.notes=c.notes),k.faveIndex=c.favorite?1:0,c.creationDate&&(k.createdAt=new Date(c.creationDate)),c.revisionDate&&(k.updatedAt=new Date(c.revisionDate));let u=[];if(c.fields)for(let m of c.fields){let F=m.type===frA.Boolean?"C":"T";u.push({value:m.value?m.value:"",type:F,name:m.name?m.name:""})}if(k.webFormFields=u,c.passwordHistory)for(let m of c.passwordHistory)k.details.passwordHistory||(k.details.passwordHistory=[]),k.details.passwordHistory.push({time:m.lastUsed?.getTime(),value:m.password});switch(c.type){case O1.Card:{gKj(k,a,e,c);break}case void 0:case null:case O1.Login:{hKj(k,r,e,c);break}case O1.Identity:{qKj(k,o,e,c);break}default:{k.parseTemplate(n);break}}s.push(k)}),s},gKj=(A,j,e,t)=>{A.parseTemplate(j);let r=t.card;if(r)for(let a of[{key:"cardholder",value:r.cardholderName},{key:"type",value:r.brand},{key:"ccnum",value:r.number},{key:"cvv",value:r.code},{key:"expiry",value:(0,mDA.default)(`${r.expMonth}/${r.expYear}`,["MM/YYYY","M/YYYY"]).format("YYYYMM")}])a.value&&Ee.populateVaultItemSectionField(A,a.key,a.value,{section:"",field:a.key},j,e)},hKj=(A,j,e,t)=>{A.parseTemplate(j);let r=t.login;if(r){if(r.username&&A.setUsername(r.username),r.password&&A.setPassword(r.password),r.uris)for(let a of r.uris)a.uri&&(A.url=a.uri);r.totp&&Si(r.totp,A,e)}},qKj=(A,j,e,t)=>{A.parseTemplate(j);let r=t.identity;if(r)for(let a of[{section:"name",key:"title",value:r.title},{section:"name",key:"firstname",value:r.firstName},{section:"name",key:"middle name",value:r.middleName},{section:"name",key:"lastname",value:r.lastName},{section:"name",key:"company",value:r.company},{section:"name",key:"ssn",value:r.ssn,kind:kA.FieldType.Concealed},{section:"name",key:"passportnumber",value:r.passportNumber,kind:kA.FieldType.Concealed},{section:"name",key:"licensenumber",value:r.licenseNumber,kind:kA.FieldType.Concealed},{section:"address",key:"address",v:{street:[r.address1,r.address2,r.address3].join(`
`),city:r.city,state:r.state,zip:r.postalCode,country:r.country}},{section:"address",key:"defphone",value:r.phone},{section:"internet",key:"email",value:r.email},{section:"internet",key:"username",value:r.username}])Ee.populateVaultItemSectionField(A,a.key,a.value?a.value:"",{section:a.section,field:a.key,kind:a.kind,v:a.value?void 0:(n,o)=>a.v},j,e)},xKj=Vj.readonly(Vj.type({encrypted:Vj.boolean,passwordProtected:Vj.boolean,salt:Vj.string,kdfType:Vj.number,kdfIterations:Vj.number,encKeyValidation_DO_NOT_EDIT:Vj.string,data:Vj.string}),"EncryptedFileFormat"),vKj=Vj.readonly(Vj.type({id:Vj.string,name:Vj.string}),"Folder"),pt=A=>qA(Vj.union([A,Vj.undefined,Vj.null]),void 0),GKj=Vj.readonly(Vj.type({id:Vj.string,organizationId:pt(Vj.string),name:Vj.string,externalId:pt(Vj.string)}),"Collection"),O1;(function(A){A[A.Login=1]="Login",A[A.SecureNote=2]="SecureNote",A[A.Card=3]="Card",A[A.Identity=4]="Identity"})(O1||(O1={}));var fKj=Vj.readonly(Vj.type({uris:pt(Vj.readonlyArray(Vj.type({uri:pt(Vj.string)}))),username:pt(Vj.string),password:pt(Vj.string),totp:pt(Vj.string)}),"LoginItemType"),FKj=Vj.readonly(Vj.type({cardholderName:pt(Vj.string),brand:pt(Vj.string),number:pt(Vj.string),expMonth:pt(Vj.string),expYear:pt(Vj.string),code:pt(Vj.string)}),"CardItemType"),bKj=Vj.readonly(Vj.type({title:pt(Vj.string),firstName:pt(Vj.string),middleName:pt(Vj.string),lastName:pt(Vj.string),address1:pt(Vj.string),address2:pt(Vj.string),address3:pt(Vj.string),city:pt(Vj.string),state:pt(Vj.string),postalCode:pt(Vj.string),country:pt(Vj.string),company:pt(Vj.string),email:pt(Vj.string),phone:pt(Vj.string),ssn:pt(Vj.string),username:pt(Vj.string),passportNumber:pt(Vj.string),licenseNumber:pt(Vj.string)}),"IdentityItemType"),frA;(function(A){A[A.Text=0]="Text",A[A.Hidden=1]="Hidden",A[A.Boolean=2]="Boolean",A[A.Linked=3]="Linked"})(frA||(frA={}));var yKj=Vj.readonly(Vj.type({id:Vj.string,organizationId:pt(Vj.string),folderId:pt(Vj.string),collectionId:pt(Vj.string),type:pt(Vj.number),name:Vj.string,notes:pt(Vj.string),fields:pt(Vj.readonlyArray(Vj.type({name:pt(Vj.string),value:pt(Vj.string),type:pt(Vj.number),linkedId:pt(Vj.number)}))),favorite:pt(Vj.boolean),login:pt(fKj),card:pt(FKj),identity:pt(bKj),reprompt:pt(Vj.number),passwordHistory:pt(Vj.readonlyArray(Vj.type({password:Vj.string,lastUsed:pt(co)}))),revisionDate:pt(co),creationDate:pt(co),deletedDate:pt(co)}),"Item"),$Kj=Vj.readonly(Vj.type({folders:pt(Vj.readonlyArray(vKj)),collections:pt(Vj.readonlyArray(GKj)),items:pt(Vj.readonlyArray(yKj))}),"FileFormat");var wKj="action/import/chrome",IKj=ij(wKj),gDA=async(A,j,e)=>IKj("parseChromeExport",async()=>{let t=bc(j).parsedData;return t.length===0?[]:(t[0]&&t[0][0]==="name"&&t.shift(),tb(A,t,e))});var FrA=J(Wo());var hDA=async(A,j,e,t)=>{let r=await Es(A),a=YS(j),n=!1;if(a[0]){let o=Object.keys(a[0]);Object.values(Cg).forEach(i=>{let s=SKj[i];s?.[0]===o[0]&&s?.[1]===o[1]&&o[0]===mn.UsernameOne&&(n=!0)})}return a.map(o=>n?PKj(o,e,Ee.getVaultItemTemplate(Sj.LoginUuid,r),t):OKj(o,e,r,t))},PKj=(A,j,e,t)=>{let r=new kA(j,e);r.title=Ee.getValueFromRecord(A,mn.Title)||e.singularName,r.url=Ee.getValueFromRecord(A,mn.Url),r.notes=Ee.getValueFromRecord(A,mn.Note);let a=Ee.getValueFromRecord(A,mn.Category);r.tags=a.length>0?[a]:[];let n=Ee.getValueFromRecord(A,mn.OtpSecret);n.length>0&&Si(n,r,t),r.setPassword(Ee.getValueFromRecord(A,mn.Password));let o=Ee.getValueFromRecord(A,mn.UsernameOne),i=Ee.getValueFromRecord(A,mn.UsernameTwo),s=Ee.getValueFromRecord(A,mn.UsernameThree),l=qDA[it.Login];i.length===0&&s.length===0?r.setUsername(o):i.length>0&&s.length===0?(r.setUsername(i),Ee.populateVaultItemSectionField(r,"email",o,l?.email,e,t)):s.length>0&&(r.setUsername(i),Ee.populateVaultItemSectionField(r,"email",o,l?.email,e,t),Ee.populateVaultItemSectionField(r,"secondary login",s,l?.secondaryLogin,e,t));let c=new Set(Object.values(mn).map(k=>k.toString()));return Object.entries(A).filter(([k,u])=>!c.has(k)).forEach(([k,u])=>{Ee.populateVaultItemSectionField(r,k,u,void 0,e,t)}),r},OKj=(A,j,e,t)=>{let r=Ee.getValueFromRecord(A,"type")||it.SecureNote,a=Ee.getVaultItemTemplate(HKj[r]??Sj.SecureNoteUuid,e),n=new kA(j,a);n.title=RKj(A,r,a);let o=Ee.getValueFromRecord(A,TKj(r))||"";n.notes=o;let i=qDA[r];if(Object.entries(A).forEach(([s,l])=>{CKj(r,s,l)&&Ee.populateVaultItemSectionField(n,s,l,i?.[s],a,t)}),r===it.CreditCard){let s=Ee.getValueFromRecord(A,A6.ExpirationYear)+Ee.getValueFromRecord(A,A6.ExpirationMonth);Ee.populateVaultItemSectionField(n,"expirationDate",s,i?.expirationDate,a,t)}else if(r===it.Address){let s=JSON.stringify({region:"",city:Ee.getValueFromRecord(A,Me.City),country:Ee.getValueFromRecord(A,Me.Country),street:Ee.getValueFromRecord(A,Me.Address),zip:Ee.getValueFromRecord(A,Me.Zip),state:Ee.getValueFromRecord(A,Me.State)});Ee.populateVaultItemSectionField(n,Me.Address,s,i?.[Me.Address],a,t)}return n},RKj=(A,j,e)=>j===it.TaxNumber?"Tax Number":j===it.Name?Ee.getValueFromRecord(A,Me.FirstName)+" "+Ee.getValueFromRecord(A,Me.LastName):Ee.getValueFromRecord(A,DKj(j))||e.singularName,DKj=A=>{switch(A){case it.Bank:case it.CreditCard:return A6.AccountName;case it.IdCard:case it.Passport:case it.DriverLicense:case it.SocialSecurityNumber:return c6.Name;case it.SecureNote:return hx.Title;case it.Address:case it.Company:case it.Email:case it.Number:case it.Website:return Me.ItemName}return""},TKj=A=>A===it.SecureNote?hx.Notes:"",CKj=(A,j,e)=>!(e===""||j==="type"||A===it.CreditCard&&(j===A6.ExpirationMonth||j===A6.ExpirationYear)||A===it.Bank&&j===A6.AccountName||A===it.SecureNote&&(j===hx.Title||j===mn.Note)||A===it.Email&&j===Me.ItemName||A===it.Number&&j===Me.ItemName||A===it.Address&&(j===Me.ItemName||j===Me.Address||j===Me.Country||j===Me.State||j===Me.City||j===Me.Zip)||A===it.Website&&j===Me.ItemName),gx=(A,j)=>{if(A.k===kA.FieldType.Date){let e=FrA.default.utc(j.trim(),["YYYY-MM-DD","YYYY-M-DD","YYYY-MM-D","YYYY-M-D"],!0).set({hours:12,minutes:1,seconds:0,milliseconds:0}).unix();return q.isValidNumber(e)?e:j}else return Number((0,FrA.default)(j,["YYYY-MM-DD","YYYY-M-DD","YYYY-MM-D","YYYY-M-D"],!0).format("YYYYMM"))||0},_Kj=(A,j)=>{switch(j){case"MR":return"Mr.";case"MME":return"Mrs.";case"MLLE":return"Miss.";case"MS":return"Ms.";case"MX":return"Mx.";default:return}},Cg;(function(A){A.Ids="ids.csv",A.Payments="payments.csv",A.Credentials="credentials.csv",A.PersonalInfo="personalInfo.csv",A.SecureNotes="securenotes.csv"})(Cg||(Cg={}));var A6;(function(A){A.Type="type",A.AccountName="account_name",A.AccountHolder="account_holder",A.CreditCardNumber="cc_number",A.Code="code",A.ExpirationMonth="expiration_month",A.ExpirationYear="expiration_year",A.RoutingNumber="routing_number",A.AccountNumber="account_number",A.Country="country",A.IssuingBank="issuing_bank"})(A6||(A6={}));var c6;(function(A){A.Type="type",A.Number="number",A.Name="name",A.IssueDate="issue_date",A.ExpirationDate="expiration_date",A.PlaceOfIssue="place_of_issue",A.State="state"})(c6||(c6={}));var mn;(function(A){A.UsernameOne="username",A.UsernameTwo="username2",A.UsernameThree="username3",A.Title="title",A.Password="password",A.Note="note",A.Url="url",A.Category="category",A.OtpSecret="otpSecret"})(mn||(mn={}));var Me;(function(A){A.Type="type",A.Title="title",A.FirstName="first_name",A.MiddleName="middle_name",A.LastName="last_name",A.Login="login",A.DateOfBirth="date_of_birth",A.PlaceOfBirth="place_of_birth",A.Email="email",A.EmailType="email_type",A.ItemName="item_name",A.PhoneNumber="phone_number",A.Address="address",A.Country="country",A.State="state",A.City="city",A.Zip="zip",A.AddressRecipient="address_recipient",A.AddressBuilding="address_building",A.AddressApartment="address_apartment",A.AddressFloor="address_floor",A.AddressDoorCode="address_door_code",A.JobTitle="job_title",A.Url="url"})(Me||(Me={}));var hx;(function(A){A.Title="title",A.Notes="note"})(hx||(hx={}));var SKj={[Cg.Ids]:[c6.Type,c6.Number,c6.Name,c6.IssueDate,c6.ExpirationDate,c6.PlaceOfIssue,c6.State],[Cg.Payments]:[A6.Type,A6.AccountName,A6.AccountHolder,A6.CreditCardNumber,A6.Code,A6.ExpirationMonth,A6.ExpirationYear,A6.RoutingNumber,A6.AccountNumber,A6.Country,A6.IssuingBank],[Cg.Credentials]:[mn.UsernameOne,mn.UsernameTwo,mn.UsernameThree,mn.Title,mn.Password,mn.Note,mn.Url,mn.Category,mn.OtpSecret],[Cg.PersonalInfo]:[Me.Type,Me.Title,Me.FirstName,Me.MiddleName,Me.LastName,Me.Login,Me.DateOfBirth,Me.PlaceOfBirth,Me.Email,Me.EmailType,Me.ItemName,Me.PhoneNumber,Me.Address,Me.Country,Me.State,Me.City,Me.Zip,Me.AddressRecipient,Me.AddressBuilding,Me.AddressApartment,Me.AddressFloor,Me.AddressDoorCode,Me.JobTitle,Me.Url],[Cg.SecureNotes]:[hx.Title,hx.Notes]},it;(function(A){A.Login="login",A.Bank="bank",A.CreditCard="credit_card",A.IdCard="card",A.Passport="passport",A.DriverLicense="license",A.SocialSecurityNumber="social_security",A.TaxNumber="tax_number",A.Name="name",A.Email="email",A.Number="number",A.Address="address",A.Company="company",A.Website="website",A.SecureNote="secure_note"})(it||(it={}));var HKj={[it.Bank]:Sj.BankAccountUuid,[it.CreditCard]:Sj.CreditCardUuid,[it.IdCard]:Sj.IdentityUuid,[it.Passport]:Sj.PassportUuid,[it.DriverLicense]:Sj.DriverLicenseUuid,[it.SocialSecurityNumber]:Sj.SocialSecurityNumberUuid,[it.TaxNumber]:Sj.SecureNoteUuid,[it.Name]:Sj.IdentityUuid,[it.Email]:Sj.IdentityUuid,[it.Number]:Sj.IdentityUuid,[it.Address]:Sj.IdentityUuid,[it.Company]:Sj.IdentityUuid,[it.Website]:Sj.IdentityUuid,[it.SecureNote]:Sj.SecureNoteUuid},qDA={[it.Login]:{email:{field:"email",section:"additional logins"},secondaryLogin:{field:"secondary login",section:"additional logins"}},[it.CreditCard]:{[A6.AccountName]:{field:"cardholder",section:""},[A6.CreditCardNumber]:{field:"ccnum",section:""},[A6.Code]:{field:"cvv",section:""},[A6.Country]:{field:"country",section:"details",inputTraits:{autocapitalization:"Words",keyboard:"Default"}},expirationDate:{field:"expiry",section:""}},[it.Bank]:{[A6.IssuingBank]:{field:"bankName",section:""},[A6.AccountHolder]:{field:"owner",section:""},[A6.RoutingNumber]:{field:"swift",section:""},[A6.AccountNumber]:{field:"iban",section:""},[A6.Country]:{field:"country",section:"branchInfo",inputTraits:{autocapitalization:"Words",keyboard:"Default"}}},[it.SecureNote]:{},[it.Passport]:{[c6.Name]:{field:"fullname",section:""},[c6.Number]:{field:"number",section:""},[c6.IssueDate]:{field:"issue_date",section:"",v:gx},[c6.ExpirationDate]:{field:"expiry_date",section:"",v:gx},[c6.PlaceOfIssue]:{field:"issuing_country",section:""}},[it.DriverLicense]:{[c6.Name]:{field:"fullname",section:""},[c6.Number]:{field:"number",section:""},[c6.IssueDate]:{field:"issue date",section:"",kind:kA.FieldType.MonthYear,v:gx},[c6.ExpirationDate]:{field:"expiry_date",section:"",v:gx},[c6.State]:{field:"state",section:""}},[it.SocialSecurityNumber]:{[c6.Name]:{field:"name",section:""},[c6.Number]:{field:"number",section:""}},[it.TaxNumber]:{[c6.Number]:{field:"number",section:"",kind:kA.FieldType.Concealed,inputTraits:{keyboard:"NamePhonePad"}}},[it.IdCard]:{[c6.Name]:{field:"full name",section:"",inputTraits:{autocapitalization:"Words"}},[c6.Number]:{field:"number",section:"",inputTraits:{keyboard:"NamePhonePad"}},[c6.IssueDate]:{field:"issue date",section:"",kind:kA.FieldType.Date,v:gx},[c6.ExpirationDate]:{field:"expiry date",section:"",kind:kA.FieldType.Date,v:gx}},[it.Name]:{[Me.Title]:{field:"title",section:"name",menuItems:["Mr","Mme","Mlle","Ms","Mx"],v:_Kj},[Me.FirstName]:{field:"firstname",section:"name"},[Me.MiddleName]:{field:"middle name",section:"name",attributes:{guarded:"yes"},inputTraits:{autocapitalization:"Words"}},[Me.LastName]:{field:"lastname",section:"name"},[Me.Login]:{field:"username",section:"internet"},[Me.DateOfBirth]:{field:"birthdate",section:"name",v:gx},[Me.PlaceOfBirth]:{field:"place of birth",section:"name",attributes:{guarded:"yes"},inputTraits:{autocapitalization:"Words"}}},[it.Email]:{[Me.Email]:{field:"email",section:"internet"},[Me.EmailType]:{field:"email type",section:"internet"}},[it.Number]:{[Me.PhoneNumber]:{field:"defphone",section:"address"}},[it.Address]:{[Me.Address]:{field:"address",section:"address",v:(A,j)=>JSON.parse(j)},[Me.AddressRecipient]:{field:"recipient",section:"address",inputTraits:{autocapitalization:"Words"}},[Me.AddressBuilding]:{field:"building",section:"address"},[Me.AddressApartment]:{field:"apartment",section:"address"},[Me.AddressFloor]:{field:"floor",section:"address"},[Me.AddressDoorCode]:{field:"door code",section:"address"}},[it.Company]:{[Me.ItemName]:{field:"company",section:"name"},[Me.JobTitle]:{field:"jobtitle",section:"name"}},[it.Website]:{[Me.Url]:{field:"website",section:"internet"}}};var e4A=J(TrA()),ha=J(tA());var eH=A=>{let j=A.toLowerCase();return j.includes("electron")?"visaelectron":j.includes("visa")?"visa":j.includes("maestro")||j.includes("m\xE6stro")?"maestro":j.includes("mastercard")||j.includes("master card")||j.includes("mc")?"mc":j.includes("amex")||j.includes("american express")?"amex":j.includes("discover")?"discover":j.includes("diner")?"diners":j.includes("unionpay")||["cup","upi"].includes(j)?"unionpay":j.includes("japan credit bureau")||j==="jcb"?"jcb":j.includes("interac")?"interac":j.includes("laser")?"laser":""};var A4A=J(Wo()),j4A=A=>{let j=(0,A4A.default)(A,["MMYY","MM/YY","MM-YY","MMYYYY","MM/YYYY","MM-YYYY","YYYY/MM","YYYY-MM"]);return j.isValid()?j.format("YYYYMM"):""};var tH=A=>(j,e,t,r)=>A.some(a=>{if(j===a.tagName){let n=e.split(".").reverse();return n.length<2?!1:n[1]===a.parentTagName}else return!1});var t4A=async(A,j,e,t)=>{let r=new e4A.XMLParser(o5j()),a=cj(r.parse(j,!0),n5j).unwrap(),n=j5j(a),{loginTemplate:o,creditCardTemplate:i,secureNoteTemplate:s}=await w1(A),l=[];return n.vaultItems.forEach(c=>{switch(c.templateName){case"Credit Card":{l.push(YNj(c,i,e,t));break}case"Web Password":{l.push(a4A(c,o,e,t));break}case"Password":{l.push(ZNj(c,o,e,t));break}default:{l.push(A5j(c,s,e,t));break}}}),await Promise.all(l)},YNj=async(A,j,e,t)=>{let r=new kA(e);r.parseTemplate(j),r.templateUuid=j.uuid,r.title=A.name||j.singularName,r.tags=A.tags;let a={"full-name":{templateField:"cardholder",transform:o=>o},"card-number":{templateField:"ccnum",transform:o=>o},"card-type":{templateField:"type",transform:eH},"expiration-date":{templateField:"expiry",transform:j4A}},n=[];return A.fields.forEach(o=>{let i=!1,s=a[o.slug];if(s){let l=kA.findFieldWithName(s.templateField,r);l&&(l.v=s.transform(o.value),i=!0)}else o.slug==="notes"&&(r.notes=o.value,i=!0);i||n.push(o)}),n.length>0&&r.details.sections.push(CrA(t,n)),r},CrA=(A,j)=>{let e=new Set(["client-secret","group-auth-password","passphrase","password","private-key-passphrase","secret-key",rH]),t=new Set([rH]),r=j.map(a=>({k:e.has(a.slug)?kA.FieldType.Concealed:kA.FieldType.String,n:Se(),v:a.value||"",t:a.name,a:{multiline:t.has(a.slug)?"yes":"no"}}));return{name:Se(),title:A["Other Fields"](),fields:Yr(r)}},rH="totp-backup-codes",r4A="totp backup codes",a4A=async(A,j,e,t)=>{let r=new kA(e);r.templateUuid=j.uuid,r.title=A.name||j.singularName,r.tags=A.tags;let a=[];return A.fields.forEach(n=>{switch(n.slug){case"username":{r.setUsername(n.value);break}case"password":{r.setPassword(n.value);break}case"url":{r.url=n.value;break}case"notes":{r.notes=n.value;break}default:{a.push(n);break}}}),A.totpBackupCodes&&a.push({name:r4A,value:A.totpBackupCodes,slug:rH}),r.details.sections.push(CrA(t,a)),A.totpKey&&A.totpKey.length>0&&Si(A.totpKey,r,t),r},ZNj=async(A,j,e,t)=>{let r=A.fields.filter(n=>n.slug==="resource"),a=A.fields.filter(n=>n.slug==="url");if(r.length===1&&a.length===0){let n=r[0];n&&(n.name="URL",n.slug="url")}return a4A(A,j,e,t)},A5j=async(A,j,e,t)=>{let r=new kA(e);r.templateUuid=j.uuid,r.title=A.name||j.singularName,r.tags=A.tags;let a=[];return A.fields.forEach(n=>{n.slug==="notes"?r.notes=n.value:a.push(n)}),A.totpBackupCodes&&a.push({name:r4A,value:A.totpBackupCodes,slug:rH}),r.details.sections.push(CrA(t,a)),A.totpKey&&A.totpKey.length>0&&Si(A.totpKey,r,t),r},j5j=A=>({vaultItems:A.ImportFile.Secrets.Secret.map(j=>{let t={fields:(typeof j.SecretItems=="string"?[]:j.SecretItems.SecretItem).map(r=>({name:r.FieldName,slug:r.Slug,value:r.Value})),folderPath:j.FolderPath,name:j.SecretName,tags:e5j(j.FolderPath),templateName:j.SecretTemplateName};return j.TotpKey&&(t.totpKey=j.TotpKey),j.TotpBackupCodes&&(t.totpBackupCodes=j.TotpBackupCodes),t})}),e5j=A=>A?[UhA(QG(A,"\\")).replace(/\\/g,"/")]:[],t5j=ha.type({FieldName:ha.string,Slug:qA(ha.string,""),Value:ha.string},"SecretItem"),r5j=ha.intersection([ha.readonly(ha.type({FolderPath:ha.string,SecretItems:ha.union([ha.type({SecretItem:ha.array(t5j)}),ha.string]),SecretName:ha.string,SecretTemplateName:ha.string},"Secret"),"ReadonlySecret"),ha.readonly(ha.partial({TotpBackupCodes:ha.string,TotpKey:ha.string},"TotpSection"),"ReadonlyTotpSection")]),a5j=ha.readonly(ha.type({Secrets:ha.type({Secret:ha.array(r5j)},"Secrets")},"ImportFile"),"ReadonlyImportFile"),n5j=ha.readonly(ha.type({ImportFile:a5j},"XmlImport"),"ReadonlyXmlImport"),o5j=()=>({parseTagValue:!1,parseAttributeValue:!1,isArray:tH(i5j)}),i5j=[{parentTagName:"Secrets",tagName:"Secret"},{parentTagName:"SecretItems",tagName:"SecretItem"}];var n4A=J(Wo());var s5j="action/import/dropbox",l5j=ij(s5j),o4A=async(A,j,e,t)=>l5j("parseDropboxExport",async()=>{let r=bc(j).parsedData;return r.length===0?[]:(r[0]&&r[0][0]?.toLowerCase()==="title"&&r.shift(),c5j(A,r,e,t))}),c5j=async(A,j,e,t)=>{let r=await Es(A),a=Ee.getVaultItemTemplate(Sj.LoginUuid,r),n=Ee.getVaultItemTemplate(Sj.CreditCardUuid,r);return j.map(o=>{let[i,s,l,c,k,u,m,F,S,G,x,R]=o;if(m==="card"){let P={cardName:F||"",cardNumber:S||"",cardExpirationDate:G?(0,n4A.default)(G,"MM/YY",!0).format("YYYYMM"):"",cardSecurityCode:x||"",cardholderName:R||"",notes:k||""};return k5j(P,n,e,t)}else{let P={title:i||a.singularName,website:s||"",login:l||"",password:c||"",notes:k||"",otpSecret:u||void 0};return d5j(P,e,t)}})},d5j=(A,j,e)=>{let t=new kA(j);return t.templateUuid=Sj.LoginUuid,t.title=A.title,t.url=A.website,t.notes=A.notes,t.setUsername(A.login),t.setPassword(A.password),A.otpSecret&&Si(A.otpSecret,t,e),t},k5j=(A,j,e,t)=>{let r=new kA(e);r.templateUuid=Sj.CreditCardUuid,r.title=A.cardName,r.notes=A.notes,r.parseTemplate(j);for(let a of[{key:"cardholder",value:A.cardholderName},{key:"ccnum",value:A.cardNumber},{key:"cvv",value:A.cardSecurityCode},{key:"expiry",value:A.cardExpirationDate}])a.value&&Ee.populateVaultItemSectionField(r,a.key,a.value,{section:"",field:a.key},j,t);return r};var u5j="action/import/firefox",E5j=ij(u5j),s4A=async(A,j,e)=>E5j("parseFirefoxExport",async()=>{let t=bc(j).parsedData;if(t.length===0)return[];t[0]&&t[0][0]==="url"&&t.shift();let r=0;for(let a of t)t[r]=[a[0]?p5j(a[0]):"Login",...a],r++;return tb(A,t,e)}),p5j=A=>{let j="Login";try{/^[A-Za-z]+:\/\//.test(A)||(A="https://"+A);let t=new URL(A).hostname;t.length!==0&&t.at(-1)==="."&&(t=t.slice(0,-1));let r=t.split(".").filter(n=>n.length>0),a=r.at(-2);if(a!==void 0)j=i4A(a);else{let n=r.at(-1);n!==void 0&&(j=i4A(n))}}catch{}return j},i4A=A=>!A||!A[0]?A:A[0].toUpperCase()+A.slice(1).toLowerCase();var _rA=J(TrA()),Ur=J(tA());var d4A=async(A,j,e,t)=>Es(A).then(async r=>{let a;try{let i=new _rA.XMLParser(c4A(!1));a=cj(i.parse(j,!0),l4A).unwrap()}catch{let i=new _rA.XMLParser(c4A(!0));a=cj(i.parse(j,!0),l4A).unwrap()}let o=Ee.getVaultItemTemplate(Sj.LoginUuid,r);return Zc(a.KeePassFile.Root.Group,i=>{let s=i.Name;return k4A(i,s,e,t,o,!0)})}),k4A=(A,j,e,t,r,a)=>{let n=A.Entry,o=A.Group,i=[];return i=i.concat(n.map(s=>B5j(s,j,e,t,r,a))),i.concat(Zc(o,s=>k4A(s,j+"/"+s.Name,e,t,r,a)))},m5j=A=>{let j=om(A,$d.TotpDigits),e=om(A,$d.TotpIssuer),t=om(A,$d.TotpPeriod),r=om(A,$d.TotpSecret);if(r!==""){let a=`otpauth://totp/keepass?secret=${r}`;return j!==""&&(a+=`&digits=${j}`),e!==""&&(a+=`&issuer=${e}`),t!==""&&(a+=`&period=${t}`),a}else return""},B5j=(A,j,e,t,r,a)=>{let n=new kA(e,r);n.title=om(A,$d.Title)||r.singularName,n.notes=om(A,$d.Notes),n.url=om(A,$d.Url),n.tags=A.Tags.length>0?A.Tags.split(";").concat([j]):[j],n.setUsername(om(A,$d.Username)),n.setPassword(om(A,$d.Password));let o=m5j(A);return o!==""&&Si(o,n,t),A.OverrideURL.length>0&&Ee.populateVaultItemSectionField(n,t["override url"](),A.OverrideURL,void 0,r,t),h5j(A).forEach(s=>{let l="",c=!0;typeof s.Value!="string"?(l=SrA(s.Value)?s.Value.contents:"",c=g5j(s)):(c=!a,l=s.Value),l.length>0&&Ee.populateVaultItemSectionField(n,s.Key,l,c?{section:t["Other Fields"](),field:s.Key,kind:kA.FieldType.Concealed}:void 0,r,t)}),n},g5j=A=>SrA(A.Value)?q5j.is(A.Value.attr)?A.Value.attr.ProtectInMemory.toLowerCase()==="true":!1:!0,om=(A,j)=>{let e=A.String,t="";return e.forEach(r=>{j===r.Key&&(typeof r.Value!="string"?t=SrA(r.Value)?r.Value.contents:"":t=r.Value)}),t},h5j=A=>{let j=A.String,e=new Set(Object.values($d).map(t=>t.toString()));return j.filter(t=>!e.has(t.Key))},q5j=Ur.type({ProtectInMemory:Ur.string},"KnownAttributes"),x5j=Ur.type({contents:Ur.string,attr:Ur.unknown},"AttributeValue"),SrA=A=>x5j.is(A),$d;(function(A){A.Title="Title",A.Username="UserName",A.Password="Password",A.Url="URL",A.Notes="Notes",A.TotpDigits="TOTPDigits",A.TotpIssuer="TOTPIssuer",A.TotpPeriod="TOTPPeriod",A.TotpSecret="TOTPSecret"})($d||($d={}));var v5j=Ur.type({Key:Ur.string,Value:Ur.union([qA(Ur.string,""),Ur.record(Ur.string,Ur.unknown)])},"EntryStringField"),G5j=Ur.readonly(Ur.type({OverrideURL:Ur.string,Tags:Ur.string,String:qA(Ur.array(v5j),[])},"Entry"),"ReadonlyEntry"),u4A=Ur.recursion("RecursiveGroup",()=>Ur.type({Name:Ur.string,Entry:qA(Ur.array(G5j),[]),Group:qA(Ur.array(u4A),[])},"Group")),f5j=Ur.readonly(Ur.type({Root:Ur.type({Group:qA(Ur.array(u4A),[])},"Root")},"KeePassFile"),"ReadonlyKeePassFile"),l4A=Ur.readonly(Ur.type({KeePassFile:f5j},"XmlImport"),"ReadonlyXmlImport"),c4A=A=>({attributeNamePrefix:"",attributesGroupName:"attr",textNodeName:"contents",ignoreAttributes:A,parseTagValue:!1,parseAttributeValue:!1,isArray:tH(F5j)}),F5j=[{parentTagName:"Root",tagName:"Group"},{parentTagName:"Group",tagName:"Group"},{parentTagName:"Group",tagName:"Entry"},{parentTagName:"Entry",tagName:"String"}];var ms=J(tA());var NrA=J(Wo());var E4A={AFG:"93",ALB:"355",DZA:"213",ASM:"1-684",AND:"376",AGO:"244",AIA:"1-264",ATA:"672",ATG:"1-268",ARG:"54",ARM:"374",ABW:"297",AUS:"61",AUT:"43",AZE:"994",BHS:"1-242",BHR:"973",BGD:"880",BRB:"1-246",BLR:"375",BEL:"32",BLZ:"501",BEN:"229",BMU:"1-441",BTN:"975",BOL:"591",BIH:"387",BWA:"267",BRA:"55",IOT:"246",VGB:"1-284",BRN:"673",BGR:"359",BFA:"226",BDI:"257",KHM:"855",CMR:"237",CAN:"1",CPV:"238",CYM:"1-345",CAF:"236",TCD:"235",CHL:"56",CHN:"86",CXR:"61",CCK:"61",COL:"57",COM:"269",COK:"682",CRI:"506",HRV:"385",CUB:"53",CUW:"599",CYP:"357",CZE:"420",COD:"243",DNK:"45",DJI:"253",DMA:"1-767",DOM:"1",TLS:"670",ECU:"593",EGY:"20",SLV:"503",GNQ:"240",ERI:"291",EST:"372",ETH:"251",FLK:"500",FRO:"298",FJI:"679",FIN:"358",FRA:"33",PYF:"689",GAB:"241",GMB:"220",GEO:"995",DEU:"49",GHA:"233",GIB:"350",GRC:"30",GRL:"299",GRD:"1-473",GUM:"1-671",GTM:"502",GGY:"44-1481",GIN:"224",GNB:"245",GUY:"592",HTI:"509",HND:"504",HKG:"852",HUN:"36",ISL:"354",IND:"91",IDN:"62",IRN:"98",IRQ:"964",IRL:"353",IMN:"44-1624",ISR:"972",ITA:"39",CIV:"225",JAM:"1-876",JPN:"81",JEY:"44-1534",JOR:"962",KAZ:"7",KEN:"254",KIR:"686",XKX:"383",KWT:"965",KGZ:"996",LAO:"856",LVA:"371",LBN:"961",LSO:"266",LBR:"231",LBY:"218",LIE:"423",LTU:"370",LUX:"352",MAC:"853",MKD:"389",MDG:"261",MWI:"265",MYS:"60",MDV:"960",MLI:"223",MLT:"356",MHL:"692",MRT:"222",MUS:"230",MYT:"262",MEX:"52",FSM:"691",MDA:"373",MCO:"377",MNG:"976",MNE:"382",MSR:"1-664",MAR:"212",MOZ:"258",MMR:"95",NAM:"264",NRU:"674",NPL:"977",NLD:"31",ANT:"599",NCL:"687",NZL:"64",NIC:"505",NER:"227",NGA:"234",NIU:"683",PRK:"850",MNP:"1-670",NOR:"47",OMN:"968",PAK:"92",PLW:"680",PSE:"970",PAN:"507",PNG:"675",PRY:"595",PER:"51",PHL:"63",PCN:"64",POL:"48",PRT:"351",PRI:"1",QAT:"974",COG:"242",REU:"262",ROU:"40",RUS:"7",RWA:"250",BLM:"590",SHN:"290",KNA:"1-869",LCA:"1-758",MAF:"590",SPM:"508",VCT:"1-784",WSM:"685",SMR:"378",STP:"239",SAU:"966",SEN:"221",SRB:"381",SYC:"248",SLE:"232",SGP:"65",SXM:"1-721",SVK:"421",SVN:"386",SLB:"677",SOM:"252",ZAF:"27",KOR:"82",SSD:"211",ESP:"34",LKA:"94",SDN:"249",SUR:"597",SJM:"47",SWZ:"268",SWE:"46",CHE:"41",SYR:"963",TWN:"886",TJK:"992",TZA:"255",THA:"66",TGO:"228",TKL:"690",TON:"676",TTO:"1-868",TUN:"216",TUR:"90",TKM:"993",TCA:"1-649",TUV:"688",VIR:"1-340",UGA:"256",UKR:"380",ARE:"971",GBR:"44",USA:"1",URY:"598",UZB:"998",VUT:"678",VAT:"379",VEN:"58",VNM:"84",WLF:"681",ESH:"212",YEM:"967",ZMB:"260",ZWE:"263"};var m4A=p`action/import/lastpass`,b5j=ij(m4A.str),ps;(function(A){A.url="url",A.username="username",A.password="password",A.otp="totp",A.notes="extra",A.title="name",A.tags="grouping",A.fav="fav"})(ps||(ps={}));var B4A=async(A,j,e,t,r)=>b5j("parseLastPassExportNew",async()=>{let a=YS(j);if(a[0]&&a[0].profilename!==void 0)throw new Error(t["Form Fill importing is not supported. Use a normal LastPass export file."]());return Es(A).then(n=>{let o=Ee.getVaultItemTemplate(Sj.LoginUuid,n);return r.lastPassIncludeSharedItems||(a=a.filter(i=>i[ps.tags]?.indexOf("Shared-")!==0)),a.map(i=>i[ps.url]==="http://sn"?y5j(i,e,n,t):P5j(i,e,o,t))})}),y5j=(A,j,e,t)=>{let r=Ee.getValueFromRecord(A,ps.notes),a=w5j(e,r),n=new kA(j,a),{notes:o,fieldValues:i}=I5j(a,r),s=Ee.getValueFromRecord(A,ps.title),l=Ee.getValueFromRecord(A,ps.tags),c=Ee.getValueFromRecord(A,ps.fav)==="1"?1:0;n.title=s||a.singularName,n.notes=o,n.tags=q4A(l),n.faveIndex=c;let k=UrA(r),u=k.length===2&&k[1]||Tr.SecureNote,m=p4A[u]||p4A[Tr.SecureNote];if(typeof m>"u")return n;for(let F of Va(i)){let S=i[F]||"",G=m[F];typeof G<"u"?G.field==="username"&&a.uuid===Sj.LoginUuid?n.setUsername(S):G.field==="password"&&a.uuid===Sj.LoginUuid?n.setPassword(S):$5j(n,S,G,a,t):Ee.addFieldToOtherFieldsSection(n,F,S,t)}return n},$5j=(A,j,e,t,r)=>{let a=sn(A.details.sections,o=>o.name===e.section||o.title===e.section);a||(a={name:Se(),title:e.section,fields:[]},A.details.sections.push(a));let n=a?.fields?.find(o=>o.n===e.field);if(n){e.v?n.v=e.v(n,j):n.v=zrA(j,n.k),n.k===kA.FieldType.Concealed&&_5j(n,A,t,r);let o=Ee.getItemOverview(t,n,A);o!==""&&(A.overview.ainfo=o)}else{a.fields||(a.fields=[]);let o=Ee.createSectionField({kind:e.kind||kA.FieldType.String,title:e.field,value:j});e.v?o.v=e.v(o,j):o.v=zrA(j,o.k),a.fields.push(o)}},UrA=A=>{let j=/^NoteType:(.+)/.exec(A);return j?.[0]!==void 0&&j?.[1]!==void 0?[j[0],j[1]]:["",""]},w5j=(A,j)=>{let e=UrA(j),t=e.length===2&&S5j[e[1]]||Sj.SecureNoteUuid;return Ee.getVaultItemTemplate(t,A)},I5j=(A,j)=>{let e=UrA(j);if(A.uuid===Sj.SecureNoteUuid&&e[0]==="")return{notes:j,fieldValues:{}};let[t,r]=j.slice(e[0].length).split(`
Notes:`),a={};if(t!==void 0){let n=/-{5}BEGIN(.+)PRIVATE KEY(.+)(\n.+)*END(.+)PRIVATE KEY-{5}/.exec(t),o=/-{5}BEGIN(.+)PUBLIC KEY(.+)(\n.+)*END(.+)PUBLIC KEY-{5}/.exec(t),i=t.trim().split(`
`);for(let s of i){let[l,c]=s.split(/:(.+)?/,2);l!==void 0&&c!==void 0&&l!=="Language"&&(a[l]=c),l==="Private Key"&&n&&(a[l]=String(n[0])),l==="Public Key"&&o&&(a[l]=String(o[0]))}}return{notes:r?r.trim():"",fieldValues:a}},P5j=(A,j,e,t)=>{let r=new kA(j,e),a=Ee.getValueFromRecord(A,ps.url),n=Ee.getValueFromRecord(A,ps.username),o=Ee.getValueFromRecord(A,ps.password),i=Ee.getValueFromRecord(A,ps.otp),s=Ee.getValueFromRecord(A,ps.notes),l=Ee.getValueFromRecord(A,ps.title),c=Ee.getValueFromRecord(A,ps.tags),k=Ee.getValueFromRecord(A,ps.fav)==="1"?1:0;r.templateUuid=Sj.LoginUuid,r.title=l||e.singularName,r.url=a,r.notes=s,r.tags=q4A(c),r.faveIndex=k,i.length>0&&Si(i,r,t);let u=LrA(n),m=LrA(o),F=Yr([u!==n&&D5j(e,n),m!==o&&h4A(e,o)]);return F.length>0&&(r.details.sections=[...r.details.sections,g4A(F,t)]),r.setUsername(u),r.setPassword(m),r},LrA=A=>{let j=O5j(A)||A;return R5j(j)||A},O5j=A=>{if(!A)return;let j=A.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(A!==j)return j},R5j=A=>A&&(/^ [+=-]/.test(A)&&!/^ [+=-][\d.]+$/.test(A)?A.slice(1):A),g4A=(A,j)=>({name:Se(),title:j["Original Values"](),fields:[...A,Ee.createSectionField({kind:kA.FieldType.Url,title:j["what's this?"](),value:"https://support.1password.com/import-lastpass/#get-help"})]}),D5j=(A,j)=>Ee.createSectionField({kind:kA.FieldType.String,title:A.attrs.localizedStrings.username||"username",value:j}),h4A=(A,j)=>Ee.createSectionField({kind:kA.FieldType.Concealed,title:A.attrs.localizedStrings.password||"password",value:j}),q4A=A=>A?[A.replace(/\\/g,"/")]:[],HrA=A=>(j,e)=>{let t=j.v;return ms.record(ms.string,ms.string).is(t)&&(t[A]=e),t},MrA=(A,j)=>{let e=A.v;return ms.record(ms.string,ms.string).is(e)&&(e.street=[e.street,j].join(" ")),e},T5j=(A,j)=>{let e=A.v;return ms.record(ms.string,ms.string).is(e)&&(e.country=j.toLowerCase()),e},C5j=A=>{if(typeof A>"u"||A==="")return"";if(A[0]!=="{")return A;let j=ms.type({cc3l:qA(ms.string,""),num:qA(ms.string,""),ext:qA(ms.string,"")}),e;try{e=cj(A,Yo.pipe(j),{file:m4A,func:p`convertLastPassPhoneNumber`}).unwrap()}catch{return""}if(typeof e>"u")return"";let{cc3l:t,num:r,ext:a}=e,n=[];if(typeof t=="string"&&t!==""){let o=E4A[t];typeof o=="string"&&n.push(`+${o}`)}return typeof r=="string"&&r!==""&&n.push(r),typeof a=="string"&&a!==""&&n.push(a),n.join(" ")},KrA=(A,j)=>zrA(j,kA.FieldType.Gender),_5j=(A,j,e,t)=>{let r=LrA(kA.getStringValue(A));r!==A.v&&(j.details.sections=[...j.details.sections,g4A([h4A(e,kA.getStringValue(A))],t)]),A.v=r},zrA=(A,j)=>{let e=A.toLowerCase();switch(j){case kA.FieldType.MonthYear:return Number((0,NrA.default)(A).format("YYYYMM"))||0;case kA.FieldType.Date:{let t=NrA.default.utc(A.trim(),"MMMM,D,YYYY",!0).set({hours:12,minutes:1,seconds:0,milliseconds:0}).unix();return I$(t)?t:void 0}case kA.FieldType.Gender:return e==="m"||e==="male"?"male":e==="f"||e==="female"?"female":e;case kA.FieldType.CreditCardType:return Fr(e,"visa")?"visa":Fr(e,"mastercard")?"mc":Fr(e,"amex")||Fr(e,"american express")?"amex":Fr(e,"discover")?"discover":"";case kA.FieldType.Menu:return e;case kA.FieldType.Phone:return C5j(A);default:return A}},Tr;(function(A){A.BankAccount="Bank Account",A.CreditCard="Credit Card",A.DriverLicense="Driver's License",A.SocialSecurity="Social Security",A.SoftwareLicense="Software License",A.WifiPassword="Wi-Fi Password",A.Passport="Passport",A.Database="Database",A.EmailAccount="Email Account",A.Membership="Membership",A.Server="Server",A.Address="Address",A.SshKey="SSH Key",A.Insurance="Insurance",A.HealthInsurance="Health Insurance",A.InstantMessagingAccount="Instant Messenger",A.SecureNote="secure_note"})(Tr||(Tr={}));var S5j={[Tr.BankAccount]:Sj.BankAccountUuid,[Tr.CreditCard]:Sj.CreditCardUuid,[Tr.DriverLicense]:Sj.DriverLicenseUuid,[Tr.SocialSecurity]:Sj.SocialSecurityNumberUuid,[Tr.SoftwareLicense]:Sj.SoftwareUuid,[Tr.WifiPassword]:Sj.RouterUuid,[Tr.Passport]:Sj.PassportUuid,[Tr.Database]:Sj.DatabaseUuid,[Tr.EmailAccount]:Sj.EmailUuid,[Tr.Membership]:Sj.MembershipUuid,[Tr.Server]:Sj.ServerUuid,[Tr.Address]:Sj.IdentityUuid,[Tr.SshKey]:Sj.SecureNoteUuid,[Tr.Insurance]:Sj.SecureNoteUuid,[Tr.HealthInsurance]:Sj.SecureNoteUuid,[Tr.InstantMessagingAccount]:Sj.LoginUuid,[Tr.SecureNote]:Sj.SecureNoteUuid},p4A={[Tr.SecureNote]:{},[Tr.CreditCard]:{"Name on Card":{field:"cardholder",section:""},Type:{field:"type",section:""},Number:{field:"ccnum",section:""},"Security Code":{field:"cvv",section:""},"Start Date":{field:"validFrom",section:""},"Expiration Date":{field:"expiry",section:""}},[Tr.BankAccount]:{"Bank Name":{field:"bankName",section:""},"Account Type":{field:"accountType",section:""},"Routing Number":{field:"routingNo",section:""},"Account Number":{field:"accountNo",section:""},"SWIFT Code":{field:"swift",section:""},"IBAN Number":{field:"iban",section:""},Pin:{field:"telephonePin",section:""},"Branch Address":{field:"branchAddress",section:"branchInfo"},"Branch Phone":{field:"branchPhone",section:"branchInfo"}},[Tr.DriverLicense]:{Number:{field:"number",section:""},"Expiration Date":{field:"expiry_date",section:""},"License Class":{field:"class",section:""},Name:{field:"fullname",section:""},Address:{field:"address",section:""},"City / Town":{field:"city",section:""},State:{field:"state",section:""},"ZIP / Postal Code":{field:"zip / postal code",section:""},Country:{field:"country",section:""},"Date of Birth":{field:"birthdate",section:""},Sex:{field:"gender",section:"",v:KrA},Height:{field:"height",section:""}},[Tr.SocialSecurity]:{Name:{field:"name",section:""},Number:{field:"number",section:""}},[Tr.SoftwareLicense]:{"License Key":{field:"reg_code",section:""},Licensee:{field:"reg_name",section:"customer"},Version:{field:"product_version",section:""},Publisher:{field:"publisher_name",section:"publisher"},"Support Email":{field:"support_email",section:"publisher"},Website:{field:"publisher_website",section:"publisher"},Price:{field:"retail_price",section:"publisher"},"Purchase Date":{field:"purchase date",section:"order"},"Order Number":{field:"order_number",section:"order"},"Number of Licenses":{field:"number of licenses",section:"order"},"Order Total":{field:"order_total",section:"order"}},[Tr.WifiPassword]:{SSID:{field:"network_name",section:""},Password:{field:"wireless_password",section:""},"Connection Type":{field:"connection type",section:""},"Connection Mode":{field:"connection mode",section:""},Authentication:{field:"authentication",section:""},Encryption:{field:"encryption",section:""},"Use 802.1X":{field:"use 802.1X",section:""},"FIPS Mode":{field:"FIPS mode",section:""},"Key Type":{field:"key type",section:""},Protected:{field:"protected",section:""},"Key Index":{field:"key index",section:""}},[Tr.Passport]:{Type:{field:"type",section:""},Name:{field:"fullname",section:""},Country:{field:"issuing_country",section:""},Number:{field:"number",section:""},Sex:{field:"gender",section:"",v:KrA},Nationality:{field:"nationality",section:""},"Issuing Authority":{field:"issuing_authority",section:""},"Date of Birth":{field:"birthdate",section:""},"Issued Date":{field:"issue_date",section:""},"Expiration Date":{field:"expiry_date",section:""}},[Tr.Database]:{Type:{field:"database_type",section:""},Hostname:{field:"hostname",section:""},Port:{field:"port",section:""},Database:{field:"database",section:""},Username:{field:"username",section:""},Password:{field:"password",section:""},SID:{field:"sid",section:""},Alias:{field:"alias",section:""}},[Tr.EmailAccount]:{Username:{field:"pop_username",section:""},Password:{field:"pop_password",section:""},Server:{field:"pop_server",section:""},Port:{field:"pop_port",section:""},Type:{field:"pop_type",section:""},"SMTP Server":{field:"smtp_server",section:"SMTP"},"SMTP Port":{field:"smtp_port",section:"SMTP"}},[Tr.Membership]:{Organization:{field:"org_name",section:""},"Membership Number":{field:"membership_no",section:""},"Member Name":{field:"member_name",section:""},"Start Date":{field:"member_since",section:""},"Expiration Date":{field:"expiry_date",section:""},Website:{field:"website",section:""},Telephone:{field:"phone",section:""},Password:{field:"pin",section:""}},[Tr.Server]:{Hostname:{field:"url",section:""},Username:{field:"username",section:""},Password:{field:"password",section:""}},[Tr.Address]:{Title:{field:"title",section:"name"},"First Name":{field:"firstname",section:"name"},"Middle Name":{field:"middle name",section:"name"},"Last Name":{field:"lastname",section:"name"},Username:{field:"username",section:"internet"},Gender:{field:"gender",section:"name",v:KrA},Birthday:{field:"birthdate",section:"name"},Company:{field:"company",section:"name"},"Address 1":{field:"address",section:"address",v:MrA},"Address 2":{field:"address",section:"address",v:MrA},"Address 3":{field:"address",section:"address",v:MrA},"City / Town":{field:"address",section:"address",v:HrA("city")},County:{field:"county",section:"address"},State:{field:"address",section:"address",v:HrA("state")},"Zip / Postal Code":{field:"address",section:"address",v:HrA("zip")},Country:{field:"address",section:"address",v:T5j},Timezone:{field:"timezone",section:"address"},"Email Address":{field:"email",section:"internet"},Phone:{field:"defphone",section:"address"},"Evening Phone":{field:"homephone",section:"address"},"Mobile Phone":{field:"cellphone",section:"address"},Fax:{field:"fax",section:"address"}},[Tr.SshKey]:{Format:{field:"key type",section:""},"Private Key":{field:"private key",section:"",kind:kA.FieldType.Concealed},"Public Key":{field:"public key",section:""},Passphrase:{field:"passphrase",section:"additional info",kind:kA.FieldType.Concealed},"Bit Strength":{field:"bit strength",section:""},Hostname:{field:"hostname",section:"additional info"},Date:{field:"date",section:"additional info",kind:kA.FieldType.Date}},[Tr.Insurance]:{Company:{field:"company",section:"policy"},"Policy Type":{field:"policy type",section:"policy"},"Policy Number":{field:"policy number",section:"policy"},Expiration:{field:"expiration date",section:"policy",kind:kA.FieldType.Date},URL:{field:"website",section:"policy"},"Agent Name":{field:"agent name",section:"agent"},"Agent Phone":{field:"agent phone",section:"agent"}},[Tr.HealthInsurance]:{"Policy Type":{field:"policy type",section:"policy"},"Policy Number":{field:"policy number",section:"policy"},"Group ID":{field:"group id",section:"policy"},"Member Name":{field:"member name",section:"policy"},"Member ID":{field:"member id",section:"policy"},"Co-pay":{field:"co-pay",section:"policy"},Company:{field:"company",section:"company"},"Company Phone":{field:"company phone",section:"company"},"Physician Name":{field:"physician name",section:"physician"},"Physician Phone":{field:"physician phone",section:"physician"},"Physician Address":{field:"physician address",section:"physician"}},[Tr.InstantMessagingAccount]:{Type:{field:"type",section:""},Username:{field:"username",section:""},Password:{field:"password",section:""},Server:{field:"server",section:""},Port:{field:"port",section:""}}};var H5j="action/import/roboform",M5j=ij(H5j),T1;(function(A){A[A.Title=0]="Title",A[A.Url=1]="Url",A[A.MatchUrl=2]="MatchUrl",A[A.Username=3]="Username",A[A.Password=4]="Password",A[A.Notes=5]="Notes",A[A.Tags=6]="Tags",A[A.RfExtraFields=7]="RfExtraFields"})(T1||(T1={}));var VrA={Name:"title",Url:"url",Login:"username",Pwd:"password",Note:"notes",Folder:"tags",RfFieldsV2:"rfExtraFields"},v4A=async(A,j,e,t)=>M5j("parseRoboFormExport",async()=>{let r=bc(j).parsedData;if(r.length===0)return[];let a;return r[0]&&r[0].includes("Name")&&r[0].includes("Url")?(a=x4A(r[0]),r.shift()):a=x4A(["Name","Url","MatchUrl","Login","Pwd","Note","Folder","RfFieldsV2"]),Es(A).then(n=>{let o=Ee.getVaultItemTemplate(Sj.LoginUuid,n),i=Ee.getVaultItemTemplate(Sj.SecureNoteUuid,n);return r.map(s=>K5j(s[T1.MatchUrl],s[T1.Username],s[T1.Password])?N5j(i,s,e,a,t):L5j(o,s,e,a,t))}).catch(n=>{throw n})}),x4A=A=>{let j={};return A.forEach((e,t)=>{let r=VrA[e];r&&(j[r]=t)}),j},K5j=(A,j,e)=>A===""&&j===""&&e==="",G4A=(A,j)=>{let e={title:"",url:"",username:"",password:"",notes:"",tags:[],rfExtraFields:[]};return Object.keys(j).reduce((t,r)=>{let a=j[r];if(a===void 0)return t;if(r===VrA.RfFieldsV2)return{...t,rfExtraFields:A.slice(a)};if(r===VrA.Folder){let n=A[a];return{...t,[r]:n?[n.replace(/^(\/)/,"")]:[]}}else return{...t,[r]:A[a]}},e)},N5j=(A,j,e,t,r)=>{let a=new kA(e,A),{title:n,url:o,notes:i,tags:s}=G4A(j,t);return a.title=n||A.singularName,a.notes=i,a.tags=s,a.url=o,a.notes===""&&a.url&&(a.notes=r.bookmark(),a.tags=[r.bookmark()],Ee.populateVaultItemSectionField(a,r.website(),a.url,void 0,A,r)),a},L5j=(A,j,e,t,r)=>{let a=new kA(e,A),{title:n,url:o,username:i,password:s,notes:l,tags:c,rfExtraFields:k}=G4A(j,t);if(a.title=n||A.singularName,a.notes=l,a.tags=c,a.url=o,!k||k.length===0)return a.setUsername(i),a.setPassword(s),a;let u=k.map(x=>x.split(","));u.forEach(x=>{if(x[_l.Identifier]==="TOTP KEY$"&&x[_l.Value]){let R=x[_l.Value]??"";Si(R,a,r)}else if(x[_l.Value]&&i!==x[_l.Value]&&s!==x[_l.Value]&&x[_l.Format]!==Sl.Check&&x[_l.Format]!==Sl.Radio){let R=x[_l.Name]||"";Ee.populateVaultItemSectionField(a,R,x[_l.Value]??"",void 0,A,r)}});let m=CB(u.map(x=>{if(!(x[_l.Identifier]==="TOTP KEY$"&&x[_l.Value]))return z5j(i,s,x)})),{username:F=[],password:S=[],undefined:G=[]}=sp(m,"designation");return a.webFormFields=CB([...a.webFormFields,wB(F),wB(S),...G]),a.setUsername(i),a.setPassword(s),a},z5j=(A,j,e)=>{if(e.length<5)return;let[t,r,a,n,o]=e;if(!o)return;let i=n?U5j(n):"T",s,l;return A===o&&n===Sl.Text?(s=Sl.Username,l=r===""?Sl.Username:void 0):j===o&&n===Sl.Password&&(s=Sl.Password,l=r===""?Sl.Password:void 0),{designation:s,name:l||r,type:i,value:o}},Sl;(function(A){A.Username="username",A.Password="pwd",A.Check="chk",A.Radio="rad",A.Text="txt"})(Sl||(Sl={}));var _l;(function(A){A[A.Identifier=0]="Identifier",A[A.Name=1]="Name",A[A.Unknown=2]="Unknown",A[A.Format=3]="Format",A[A.Value=4]="Value"})(_l||(_l={}));var U5j=A=>{switch(A){case Sl.Password:return"P";case Sl.Radio:return"R";case Sl.Check:return"C";case Sl.Text:return"T";default:return"T"}};var f4A=J(Wo());var V5j="action/import/csv",X5j=ar(V5j),XrA=async(A,j)=>{let e=await Es(j.context);try{switch(A.kind){case Id.Login:return J5j(A,j,Ee.getVaultItemTemplate(Sj.LoginUuid,e));case Id.CreditCard:return Y5j(A,j,Ee.getVaultItemTemplate(Sj.CreditCardUuid,e));case Id.SecureNote:return Q5j(A,j,Ee.getVaultItemTemplate(Sj.SecureNoteUuid,e))}}catch(t){return X5j("csvToVaultItems",t)}},J5j=(A,j,e)=>A.rows.map(t=>W5j(j.vault,e,j.translators,t)),W5j=(A,j,e,t)=>{let r=new kA(A);r.templateUuid=j.uuid;let a=t.filter(o=>o.type===im.Template),n=JrA(t);return a?.forEach(o=>{let{cellValue:i,headerValue:s}=o;switch(s){case wd.Title:{r.title=i||j.singularName;break}case wd.Username:{r.setUsername(i);break}case wd.Password:{i.length>0&&r.setPassword(i);break}case wd.Website:{i.length>0&&(r.url=i);break}case wd.Tags:{i.length>0&&(r.tags=b4A(o));break}case wd.Notes:{i.length>0&&(r.notes=i);break}case wd.OneTimePassword:{i.length>0&&Si(i,r,e);break}}}),n&&n.length!==0&&WrA(r,n,j,e),r},Q5j=(A,j,e)=>A.rows.map(t=>{let r=new kA(j.vault,e),a=t.filter(o=>o.type===im.Template),n=JrA(t);return F4A(r,Sg.Title,Sg.Tags,Sg.Notes,a,e),n&&n.length!==0&&WrA(r,n,e,j.translators),r}),Y5j=(A,j,e)=>A.rows.map(t=>Z5j(t,j.vault,e,j.translators)),Z5j=(A,j,e,t)=>{let r=new kA(j,e),a=A.filter(i=>i.type===im.Template),n=JrA(A),o=F4A(r,Z6.Title,Z6.Tags,Z6.Notes,a,e);return o&&A2j(r,o,Id.CreditCard,e,t),n&&n.length!==0&&WrA(r,n,e,t),r},F4A=(A,j,e,t,r,a)=>{let n=r.find(s=>s.headerValue===j);A.title=n?.cellValue||a.singularName;let o=r.find(s=>s.headerValue===e);o&&(A.tags=b4A(o));let i=r.find(s=>s.headerValue===t);return i&&(A.notes=i.cellValue),r.filter(s=>s.headerValue!==t&&s.headerValue!==e&&s.headerValue!==j)},JrA=A=>A.filter(j=>j.type===im.Custom),WrA=(A,j,e,t)=>{j.forEach(r=>{Ee.populateVaultItemSectionField(A,r.headerValue,r.cellValue||"",void 0,e,t)})},A2j=(A,j,e,t,r)=>{let a=t2j[e];j.forEach(n=>{Ee.populateVaultItemSectionField(A,n.headerValue,n.cellValue||"",a[n.headerValue]?.v?a[n.headerValue]:e2j(a[n.headerValue],n.cellAttrs?.[Hg.Date]||""),t,r)})},b4A=A=>A.cellAttrs?.[Hg.Tag]===void 0?[A.cellValue]:A.cellValue.split(A.cellAttrs[Hg.Tag]).map(j=>j.trim()),j2j=A=>(j,e)=>{e||(e="");let t=e.toLowerCase();switch(j.k){case kA.FieldType.MonthYear:{let r=Number((0,f4A.default)(e,A).format("YYYYMM"));return r||(r=0),r}case kA.FieldType.Gender:return t==="m"||t==="male"?"male":t==="f"||t==="female"?"female":t;case kA.FieldType.CreditCardType:return eH(t);case kA.FieldType.Menu:return t;default:return e}},e2j=(A,j)=>{if(A!==void 0)return{...A,v:j2j(j)}},Id;(function(A){A.Login="login",A.CreditCard="credit card",A.SecureNote="secure note"})(Id||(Id={}));var wd;(function(A){A.Title="title",A.Username="username",A.Password="password",A.Website="website",A.Notes="notes",A.OneTimePassword="otp",A.Tags="tags"})(wd||(wd={}));var Z6;(function(A){A.Title="title",A.CardHolder="cardholder",A.CardType="type",A.CardNumber="ccnum",A.Cvv="cvv",A.Expiry="expiry",A.ValidFrom="validFrom",A.Notes="notes",A.BankName="bank",A.BankPhoneLocal="phoneLocal",A.BankPhoneTollfree="phoneTollFree",A.BankPhoneIntl="phoneIntl",A.Website="website",A.Pin="pin",A.CashWithdrawalLimit="cashLimit",A.InterestRate="interestRate",A.IssueNumber="issueNumber",A.CreditLimit="creditLimit",A.Tags="tags"})(Z6||(Z6={}));var Sg;(function(A){A.Title="title",A.Notes="notes",A.Tags="tags"})(Sg||(Sg={}));var C1;(function(A){A[A.Template=0]="Template",A[A.Custom=1]="Custom",A[A.NotImported=2]="NotImported",A[A.NotDefined=3]="NotDefined"})(C1||(C1={}));var im;(function(A){A[A.Template=0]="Template",A[A.Custom=1]="Custom"})(im||(im={}));var Hg;(function(A){A.Date="Date",A.Tag="Tag"})(Hg||(Hg={}));var t2j={[Id.Login]:{},[Id.SecureNote]:{},[Id.CreditCard]:{[Z6.CardHolder]:{field:"cardholder",section:""},[Z6.CardType]:{field:"type",section:""},[Z6.CardNumber]:{field:"ccnum",section:""},[Z6.Cvv]:{field:"cvv",section:""},[Z6.Expiry]:{field:"expiry",section:""},[Z6.ValidFrom]:{field:"validFrom",section:""},[Z6.BankName]:{field:"bank",section:"contactInfo"},[Z6.BankPhoneLocal]:{field:"phoneLocal",section:"contactInfo"},[Z6.BankPhoneTollfree]:{field:"phoneTollFree",section:"contactInfo"},[Z6.BankPhoneIntl]:{field:"phoneIntl",section:"contactInfo"},[Z6.Website]:{field:"website",section:"contactInfo"},[Z6.Pin]:{field:"pin",section:"details"},[Z6.CreditLimit]:{field:"creditLimit",section:"details"},[Z6.CashWithdrawalLimit]:{field:"cashLimit",section:"details"},[Z6.InterestRate]:{field:"interest",section:"details"},[Z6.IssueNumber]:{field:"issuenumber",section:"details"}}};var r2j="action/import/index",a2j=ij(r2j),Hl;(function(A){A.OnePassword="1pif",A.LastPass="lastpass",A.Dashlane="dashlane",A.Bitwarden="bitwarden",A.SplashID="splashid",A.RoboForm="roboform",A.Chrome="chrome",A.Firefox="firefox",A.KeePassXC="keepassxc",A.KeePass="keepass",A.Apple="apple",A.CSV="csv",A.Delinea="delinea",A.Memorized="memorized",A.PenPaper="pen-paper",A.Safari="safari",A.Edge="edge",A.Brave="brave",A.Spreadsheet="spreadsheet",A.DropboxPasswords="dropbox"})(Hl||(Hl={}));var y4A=async(A,j,e,t,r,a,n)=>a2j("importData",async()=>await n2j(j)(A,e,t,r,a,n)),$4A=async(A,j,e)=>{let t=[];for(let a of e)o2j(a)&&t.push(a);if(t.length===0)throw new Error("No importable items were found in the selected file.");let r=await Tl(A,t,j);return pr(A),r.updatedItems},n2j=A=>{switch(A){case Hl.LastPass:return B4A;case Hl.Dashlane:return hDA;case Hl.RoboForm:return v4A;case Hl.Chrome:return gDA;case Hl.Firefox:return s4A;case Hl.Apple:return uDA;case Hl.Delinea:return t4A;case Hl.KeePass:return d4A;case Hl.Bitwarden:return BDA;case Hl.DropboxPasswords:return o4A;default:throw new Error("Invalid import format.")}},o2j=A=>{let j=JSON.stringify(A.overview);if(j&&j.length>kA.MaxOverviewSize)return!1;let e=JSON.stringify(A.details);return!!e&&e.length<=kA.MaxDetailSize};var i2j=async(A,j)=>xU(A.session,j);var s2j=async A=>mJ(A.session),l2j=async(A,j,e,t,r,a)=>BJ(A.session,j,e,t,r,a),c2j=async(A,j,e,t)=>gJ(A.session,j,e,t?"asc":"desc"),d2j=async A=>{let j=await hJ(A.session);return await Promise.all(j.topSharedCredentials.map(async e=>{let t={timesUsedLastWeek:e.timesUsedLastWeek,peopleWithAccessCount:e.peopleWithAccessCount},r;try{r=await fd(A,e.vaultUuid)}catch{return t}let a=new kA(r,void 0,e.vaultItem.uuid),n;try{n=await qu(e.vaultItem,a)}catch{return t}return{...t,item:n}}))};var k2j=(A,j)=>{switch(A){case Gt.Provisioning:return j===FS?"hosted-provisioning/managed-groups":"provisioning";case Gt.Connect:return"infrastructure-secrets/connect";case Gt.DataStreaming:return"events_reporting";case Gt.Cli:return"cli";case Gt.Slack:return"slack";case Gt.Duo:return"duo";case Gt.MaskedEmails:return"fastmail";case Gt.Brex:return"brex";case Gt.PrivacyCom:return"privacycom";case Gt.UserManaged:return"infrastructure-secrets/serviceaccount";default:return"na"}};var w4A=async({sa:A,devices:j,usersVaults:e})=>{let t=await ex(A,ks.Attr.Tokens|ks.Attr.VaultAccess),r=u2j(t.tokens).length,a=E2j(t.tokens).length,n=()=>!t.displayableVaultAccess||!e?[]:t.displayableVaultAccess.map(s=>{let l=e.find(c=>c.uuid===s.vaultUuid);if(!l)throw new Error(`Could not find vault "${s.vaultUuid}"`);return{uuid:s.accessorUuid,avatar:l.avatar,type:l.type}}),o=()=>t.totalAccessibleVaults,i=j&&j.filter(m2j).sort(bl.compareAuthDates).shift();return{title:t.name,icon:t.avatar,active:r,tokens:void 0,expiredTokens:a,groups:[],syncActivity:t.lastAuthAt,createdAt:t.createdAt,version:i?.clientVersion,vaults:{displayable:n(),total:o()}}},I4A=w4A,P4A=w4A,u2j=A=>{let j=new Date;return A.filter(e=>{let t=e.expiresAt&&new Date(e.expiresAt)<j;return e.state==="A"&&!t})},E2j=A=>{let j=new Date;return A.filter(e=>{let t=e.expiresAt&&new Date(e.expiresAt)<j;return e.state==="A"&&t})},p2j="1passwordconnect",m2j=({clientName:A})=>A.replace(/\s+/g,"").toLowerCase()===p2j;var O4A=async({sa:A})=>{let j=await ex(A,ks.Attr.Tokens|ks.Attr.VaultAccess),e=B2j(j.tokens),t=e.length,r=g2j(j.tokens).length;return{title:A.name,icon:A.avatar,groups:[],active:t,expiredTokens:r,tokens:e,createdAt:X6(A.createdAt),syncActivity:void 0,version:"",vaults:{displayable:[],total:0}}},B2j=A=>{let j=new Date;return A.filter(e=>{let t=e.expiresAt&&new Date(e.expiresAt)<j;return e.state==="A"&&!t})},g2j=A=>{let j=new Date;return A.filter(e=>{let t=e.expiresAt&&new Date(e.expiresAt)<j;return e.state==="A"&&t})};var aH;(function(A){A.MicrosoftEntraId="Microsoft Entra ID",A.Okta="Okta",A.OneLogin="OneLogin",A.Rippling="Rippling",A.JumpCloud="JumpCloud",A.GoogleWorkspace="Google Workspace"})(aH||(aH={}));var R4A=A=>{switch(A){case Kp.EntraId:return aH.MicrosoftEntraId;case Kp.Okta:return aH.Okta;case Kp.Unknown:return""}};var D4A=A=>{switch(A){case"Microsoft Entra ID":return"/entra-logo.svg";case"Okta":return"/okta-logo.svg";case"OneLogin":return"/onelogin-logo.svg";case"Rippling":return"/rippling-logo.svg";case"JumpCloud":return"/jumpcloud-logo.svg";case"Google Workspace":return"/google-workspace-logo.svg";case void 0:default:return"/icon-provisioning.svg"}};var T4A=async({CTX:A,sa:j,releases:e})=>{let t,r=await VF(A);if(r)try{t=await l1(A,r.uuid,[])}catch(o){console.error("Unable to get hosted provisioning integration",o)}let a=()=>{let o=t?R4A(t.integration.identityProvider):A.account?.settings.provisioning?.identityProvider;return D4A(o)},n=async()=>{if(!j.memberships)return[];let o=await otA(A);return j.memberships.filter(s=>s.role===dr.Role.Manager).map(s=>{let l=o.find(c=>c.uuid===s.groupUuid);if(!l)throw new Error(`Could not find group "${s.groupUuid}"`);return{uuid:s.groupUuid,avatar:l.avatar,type:l.type}})};return{title:j.name,icon:a(),groups:await n(),active:void 0,expiredTokens:void 0,tokens:void 0,syncActivity:void 0,createdAt:X6(j.createdAt),version:"",buildNumber:e?.SCIM?.release?.buildnum,vaults:{displayable:[],total:0}}};var Vk=async({serviceAccount:A,devices:j,releases:e,slackApp:t,type:r,CTX:a,usersVaults:n,vaultItem:o})=>{let i,s="",l,c;switch(r){case Gt.Connect:{if(A)return await I4A({sa:A,devices:j,usersVaults:n});break}case Gt.UserManaged:{if(A)return await P4A({sa:A,devices:j,usersVaults:n});break}case Gt.Provisioning:{if(A)return await T4A({CTX:a,sa:A,releases:e});break}case Gt.DataStreaming:{if(A)return await O4A({sa:A});break}case Gt.Duo:{l="icon-duo.svg";break}case Gt.Slack:{s=t?t.teamName:"",l="slack-icon-v2.svg";break}case Gt.MaskedEmails:{l="icon-fastmail-60.svg";break}case Gt.Brex:{l="icon-brex.svg";break}case Gt.PrivacyCom:{l="icon-privacycom.svg";break}case Gt.Cli:case Gt.Na:break}return{title:s,active:i,expiredTokens:c,icon:l,groups:[],syncActivity:void 0,createdAt:void 0,tokens:void 0,version:"",vaults:{displayable:[],total:0},vaultItem:o}};var C4A=async A=>{let j=A.account?.settings,e=A.user?.hasPermission(tt.ChangeTeamSettings);if(!(!j?.duo?.isEnabled||!e))return{type:"S",uuid:"",name:"Duo",createdAt:"",state:"",creatorUuid:"",serviceAccountType:Gt.Duo,email:"",avatar:"",summary:await Vk({type:Gt.Duo,CTX:A})}};var _4A=async A=>{if(!A.account?.hasFeature?.integrationHubEmailAlias)return[];let e=await Nk(A);if(!e)return[];let r=(await bd(A,e)).filter(a=>a.overview.integration==="fastmail");return await Promise.all(r.map(async a=>({type:"S",uuid:a.uuid,name:"Fastmail",createdAt:"",state:"",creatorUuid:"",serviceAccountType:Gt.MaskedEmails,email:"",avatar:"",summary:await Vk({type:Gt.MaskedEmails,vaultItem:a,CTX:A})})))};var S4A=async A=>{let{integrations:j,releases:e}=await _tA(A,["vault-access","groups","devices","app-releases","tokens"]),t=j.filter(({serviceAccount:a})=>a.serviceAccountType!==Gt.Cli);if(t.length===0)return[];t.sort(Fi.strings(({serviceAccount:a})=>a.serviceAccountType));let r=await Dg(A);return Promise.all(t.map(async({serviceAccount:a,devices:n})=>({...a,devices:n,type:"S",creatorUUID:"",serviceAccountSubtype:"na",serviceAccountType:a.serviceAccountType,summary:await Vk({serviceAccount:a,devices:n,releases:e,usersVaults:r,type:a.serviceAccountType,CTX:A})})))};var h2j="action/slack",rb=ar(h2j),YrA=async A=>{try{return{type:"slack-app",slackApp:await IZ(A.session)}}catch(j){return CA.isNewServerError(j)?{type:"server-error",error:j}:{type:"error",error:j}}},q2j=async(A,j)=>{let e=[],t="";do try{let r=await fZ(A.session,t);e.push(...r.channels),t=r.cursor??""}catch(r){return rb("getSlackChannels",r)}while(t!==""&&(!j||e.length<j));return e},x2j=async(A,j)=>{try{return(await bZ(A.session,j)).userGroups}catch(e){return rb("getSlackGroups",e)}},v2j=async(A,j,e)=>{let t=[],r="";do try{let a=await FZ(A.session,j,r);t.push(...a.channels),r=a.cursor??""}catch(a){return rb("getGridSlackChannels",a)}while(r!==""&&(!e||t.length<e));return t},G2j=async(A,j)=>{try{return{type:"slack_users_response",slackUsers:await yZ(A.session,j)}}catch(e){return CA.isServerError(e,CA.ServerErrorReason.slackUserLimitReached)?{type:"slack_users_response_large_team_error"}:{type:"slack_users_response_other_error"}}},f2j=async A=>{try{return(await $Z(A.session)).teams}catch(j){return rb("getGridSlackTeams",j)}},F2j=async A=>{try{return(await wZ(A.session)).userGroups}catch(j){return rb("getSlackGroups",j)}},b2j=async(A,j)=>{let e=oc(j);return PZ(A.session,e).catch(rb("updateSlackApp"))},y2j=async A=>{try{return{type:"slack_users_response",slackUsers:await GZ(A.session)}}catch(j){return CA.isServerError(j,CA.ServerErrorReason.slackUserLimitReached)?{type:"slack_users_response_large_team_error"}:{type:"slack_users_response_other_error"}}},$2j=async A=>{try{let{nonce:j}=await OZ(A.session);return j}catch(j){return console.error("Failed to get nonce:",j),CA.isNewServerError(j)?{type:"server-error",error:j}:{type:"error",error:j}}},w2j=async(A,j)=>{await RZ(A.session,j)};var H4A=async A=>{if(!A.account?.hasFeature.slack)return;let j=await YrA(A),e=yjA(Ik.Inactive);if(j.type!=="slack-app"||j.slackApp.state===Ik.Inactive)return;let t=j.type==="slack-app"?j.slackApp:e;return{type:"S",uuid:"",name:"Slack",createdAt:"",state:t.state,creatorUuid:"",serviceAccountType:Gt.Slack,email:"",avatar:"",summary:await Vk({slackApp:t,type:Gt.Slack,CTX:A})}};var M4A=async A=>{let j=await Nk(A);if(!j)return[];let e=await bd(A,j),r=[...e.filter(n=>n.overview.integration==="privacy").map(async n=>({type:"S",uuid:n.uuid,name:"Privacy.com",createdAt:"",state:"",creatorUuid:"",serviceAccountType:Gt.PrivacyCom,email:"",avatar:"",summary:await Vk({type:Gt.PrivacyCom,vaultItem:n,CTX:A})}))];if(A.account?.hasFeature?.integrationHubBrex){let n=e.filter(o=>o.overview.integration==="brex").map(async o=>({type:"S",uuid:o.uuid,name:"Brex",createdAt:"",state:"",creatorUuid:"",serviceAccountType:Gt.Brex,email:"",avatar:"",summary:await Vk({type:Gt.Brex,vaultItem:o,CTX:A})}));r.push(...n)}return await Promise.all(r)};var I2j=async A=>{let[j,e,t,r,a]=await Promise.all([S4A(A),H4A(A),C4A(A),_4A(A),M4A(A)]);return e&&j.push(e),t&&j.push(t),[...j,...r,...a]};var P2j=15,nH=A=>A.filter(j=>j.email).map(j=>new Bu(j)),O2j=async A=>{let j=await CJ(A.session);return nH(j)},R2j=async(A,j)=>(await UJ(A.session,j)).map(t=>new Fg(t)),D2j=async(A,j)=>{await VJ(A.session,j)},T2j=async(A,j)=>{await XJ(A.session,j)},C2j=async(A,j,e,t,r)=>{let n=await W6(async s=>{let l=s.map(c=>({email:c,language:"en",vaults:t}));return SJ(A.session,l,e,r)},100,j),i=(s=>{let l=s.reduce((c,k)=>({successfulInvites:[...c.successfulInvites,...k.successfulInvites],failedInvites:[...c.failedInvites,...k.failedInvites]}),{successfulInvites:[],failedInvites:[]});return{successfulInvites:nH(l.successfulInvites),failedInvites:l.failedInvites}})(n);if(i.failedInvites.length===1&&i.successfulInvites.length===0&&i.failedInvites[0]?.reason)throw new CA.ClientError(i.failedInvites[0]?.reason==="is_existing_guest"?CA.ClientErrorCode.emailAlreadyInUseByGuest:CA.ClientErrorCode.emailAlreadyInUseByMember);return i},_2j=async(A,j)=>{let e=await _J(A.session,j);return nH(e)},S2j=async(A,j)=>{let e=j.map(a=>a.uuid),r=await W6(async a=>(await MJ(A.session,a),[]),P2j,e);return nH(r)},H2j=async(A,j,e)=>await DJ(A.session,j,e),M2j=async(A,j)=>await TJ(A.session,j),K2j=async(A,j)=>await HJ(A.session,j),N2j=async A=>{let j=await zJ(A.session);return A.account&&(A.account.inviteSecret=j.inviteSecret,A.account.attrVersion++,po(A)),j},L2j=async(A,j)=>{let e=j.map(t=>t.uuid);await KJ(A.session,e)},z2j=async(A,j)=>await NJ(A.session,j),U2j=async(A,j,e)=>await LJ(A.session,j,e);var sm;(function(A){A[A.OneHour=3600]="OneHour",A[A.OneDay=86400]="OneDay",A[A.SevenDays=604800]="SevenDays",A[A.FourteenDays=1209600]="FourteenDays",A[A.ThirtyDays=2592e3]="ThirtyDays"})(sm||(sm={}));var K4A=[sm.OneHour,sm.OneDay,sm.SevenDays,sm.FourteenDays,sm.ThirtyDays],N4A=[uu.AnyoneWithTheLink,uu.OnlySomePeople],V2j=async(A,j)=>{let e=await WJ(A.session,j.vault.uuid,j.uuid);return{shares:await Promise.all(e.shares.map(async t=>X2j(t,j)))}},X2j=async(A,j)=>{let e=j.vault.activeKey;if(!e)throw new Error("Missing vault key");let t=A.encShareSecret?ln(await e.decrypt(A.encShareSecret)):"",r=t?`${A.url}#${t}`:void 0;return{uuid:A.uuid,state:A.state,itemVersion:A.itemVersion,createdAt:A.createdAt,expiresAt:A.expiresAt,sharedBy:A.sharedBy,shareLink:r,type:A.type,recipients:A.recipients,viewCount:A.viewCount,maxViews:A.maxViews,canDelete:A.canDelete}},J2j=async(A,j,e)=>{try{let t=await QJ(A.session,j.vault.uuid,j.uuid),r=t.files.allowed&&L4A(j,t.files.maxSize,!!e).length>0,{allowedRecipientTypes:a,allowedTypes:n,maxExpiry:o,defaultExpiry:i,maxViews:s}=W2j(t,r),l=N4A.find(c=>n.includes(c));if(!l)throw new Error("No allowed availability options found");return{type:"settings",allowedRecipientTypes:a,expirationMenu:{entries:K4A.filter(Q2j(o)),default:K4A.includes(i)?i:sm.OneHour},availabilityMenu:{entries:N4A.filter(c=>n.includes(c)),default:l},maxExpiry:o,maxViews:s,includeFiles:r}}catch(t){if(CA.isNewServerError(t,CA.ServerErrorReason.unsupported,CA.HTTPStatusCode.forbidden))return{type:"unsupported"};if(CA.isNewServerError(t,CA.ServerErrorReason.accountPolicy,CA.HTTPStatusCode.forbidden))return{type:"accountPolicy"};throw t}},W2j=(A,j)=>{let e=j&&A.files.allowedRecipientTypes?A.files.allowedRecipientTypes:A.allowedRecipientTypes,t=j&&A.files.allowedTypes?A.files.allowedTypes:A.allowedTypes,r=j&&A.files.maxExpiry?A.files.maxExpiry:A.maxExpiry,a=j&&A.files.defaultExpiry?A.files.defaultExpiry:A.defaultExpiry,n=j&&"maxViews"in A.files?A.files.maxViews:A.maxViews;return{allowedRecipientTypes:e,maxExpiry:r,allowedTypes:t,defaultExpiry:a,maxViews:n}},L4A=(A,j,e)=>{if(A.details.documentAttributes&&!A.details.documentAttributes.signingKey)throw new Error("Document doesn't have signing key.");let t=e?Zc(A.details.sections??[],a=>Yr((a.fields??[]).map(n=>kA.getDocumentAttributesFromField(n)))):[];return Yr([A.details.documentAttributes,...t]).filter(a=>a.signingKey).map(a=>{if(j&&a.encryptedSize>j)throw new CA.ClientError(CA.ClientErrorCode.fileTooLarge,W("File is too large to share."));return{fileUuid:kS(a)}})},Q2j=A=>j=>j<=A,oH=class extends Error{constructor(j){super(),this.name="ItemShareRejectedRecipientsError",this.message="Item share contains rejected recipients.",this.recipients=j}},Y2j=A=>CA.isErrorLike(A)&&A.name==="ItemShareRejectedRecipientsError",Z2j=async(A,j,e)=>{let{secret:t,uuid:r,token:a,rawKey:n}=await V4A(),o=Ot(r);await o.importRawKey(Nt,n);let i=new sj({name:"Fake Vault",type:"",desc:""});i.activeKey=o;let s=z4A(j.clone(),e.includeFiles);s.vault=i,await s.encrypt();let l=await JI(s);if(!l.encDetails)throw new Error("Missing item details");let c=e.includeFiles?L4A(j,void 0,!!e.includeAttachments):[],k=e.recipients.map(G=>{if(sq(G))return{type:yk.Email,email:G};if(P$(G))return{type:yk.Domain,domain:G};throw new Error("Invalid recipient")});if(k.length>0){let{rejectedRecipients:G}=await ZJ(A.session,{recipients:k});if(G.length>0)throw new oH(G)}if(!j.vault.activeKey)throw new Error("Missing vault key");let u=await j.vault.activeKey.encrypt(Ij(t)),m={uuid:r,token:a,vaultUuid:j.vault.uuid,itemUuid:j.uuid,itemVersion:j.itemVersion,encOverview:l.encOverview,encDetails:l.encDetails,encShareSecret:u,fileReferences:c,type:e.availability,recipients:k,expiry:e.expiration,maxViews:e.maxViews||void 0},{url:F}=await YJ(A.session,m),S=[F,t].join("#");try{new URL(S)}catch(G){throw new Error(`Could not construct share link: ${C6(G)}`)}return S},z4A=(A,j)=>(A.details.passwordHistory=void 0,A.overview.icons=void 0,j&&A.details.documentAttributes?.signingKey?A.details.documentAttributes.signingKey=void 0:A.details.documentAttributes=void 0,A.details.sections=A.details.sections.map(e=>({...e,fields:(e.fields??[]).filter(jLj(j)).map(t=>{let r=kA.getDocumentAttributesFromField(t);return r?{...t,v:{...r,signingKey:void 0}}:t})})),A),ALj=pe(kA.FieldType,"VaultItem.FieldType"),jLj=A=>j=>{if(!ALj.is(j.k))return!1;if(j.k===kA.FieldType.File)return kA.getDocumentAttributesFromField(j)?.signingKey?A:!1;switch(j.k){case kA.FieldType.String:case kA.FieldType.Concealed:case kA.FieldType.Date:case kA.FieldType.Phone:case kA.FieldType.Address:case kA.FieldType.Url:case kA.FieldType.Email:case kA.FieldType.MonthYear:case kA.FieldType.Gender:case kA.FieldType.CreditCardType:case kA.FieldType.Menu:case kA.FieldType.Country:case kA.FieldType.Month:case kA.FieldType.OneTimePassword:case kA.FieldType.SshKey:return!0;case kA.FieldType.Reference:case kA.FieldType.SsoLogin:case kA.FieldType.ManagedApplication:return!1;case kA.FieldType.PasskeyType:return!1}},eLj=async(A,j)=>{let e={...A,itemVersion:1,encryptedBy:A.encOverview.kid},t=Ot(A.uuid);await t.importRawKey(Nt,j);let r=new sj({name:"Fake Vault",type:"",desc:""});return r.activeKey=t,await qu(e,r)},tLj=async A=>{let j;try{j=ej(A)}catch{throw new Error("invalid base64")}return await U4A(j)},U4A=async A=>{if(A.byteLength!==32)throw new Error("Incorrect secret byte length: "+A.byteLength.toString(10));let j=SB(await dn.rawHkdf(dn.Sha2Mode.Sha256,A,Ij("share_item_uuid"),new Uint8Array,16)),e=SB(await dn.rawHkdf(dn.Sha2Mode.Sha256,A,Ij("share_item_token"),new Uint8Array,16)),t=await dn.rawHkdf(dn.Sha2Mode.Sha256,A,Ij("share_item_encryption_key"),new Uint8Array,32);return{uuid:j,token:e,rawKey:t}},V4A=async()=>{let A=ta(32),{uuid:j,token:e,rawKey:t}=await U4A(A);return{secret:Aj(A),uuid:j,token:e,rawKey:t}},rLj=async(A,j)=>{let e=await AW(A.session,j);return aLj(e)},aLj=A=>{let{events:j,accessType:e}=A;if(e===uu.OnlySomePeople){let t=nLj(A.recipients),r=A.recipients.map(a=>a.type===yk.Email?{type:"email",value:a.email,events:j.filter(n=>n.accessorEmail===a.email)}:{type:"domain",value:a.domain,events:j.filter(n=>oLj(n.accessorEmail,a.domain)&&!t.includes(n.accessorEmail))}).sort(Fi.strings(a=>a.value));return{...A,accessType:e,sortedEvents:r}}else{let t=sp(j,a=>a.timestamp.toISOString().slice(0,10)),r=yn(t,(a,n)=>({dateString:n,events:a})).sort(Fi.desc.dates(a=>new Date(a.dateString)));return{...A,accessType:e,sortedEvents:r}}},nLj=A=>A.filter(e=>e.type===yk.Email).map(e=>e.email),oLj=(A,j)=>A.slice(A.indexOf("@")+1)===j,iLj=async A=>jW(A.session),sLj=async(A,j,e,t)=>eW(A.session,j,e,t),lLj=async(A,j)=>tW(A.session,j),cLj=async A=>rW(A.session);var X4A="action/managed_account",_1=ar(X4A),S1=ij(X4A),dLj=async(A,j)=>S1("getManagedAccounts",async()=>iW(A.session,j).catch(_1("getManagedAccounts"))),kLj=async(A,j)=>S1("unlinkManagedAccount",async()=>cW(A.session,j).catch(_1("unlinkManagedAccount"))),uLj=async(A,j)=>S1("getManagedAccountDetails",async()=>kW(A.session,j).catch(_1("getManagedAccountDetails"))),ELj=async(A,j)=>S1("getManagedAccountAccessDetails",async()=>uW(A.session,j).catch(_1("getManagedAccountAccessDetails"))),pLj=async(A,j)=>S1("updateManagedCompanyMspPermissions",async()=>vW(A.session,j).catch(_1("updateManagedCompanyMspPermissions")));var mLj="action/managed_account_net_seats",BLj=ij(mLj),gLj=async(A,j)=>BLj("getManagedAccountsNetSeats",async()=>EW(A.session,j));var J4A="action/managed_credential",ab=ar(J4A),nb=ij(J4A),hLj=async(A,j)=>nb("getManagedCredential",async()=>Uz(A.session,j).catch(ab("getManagedCredential"))),qLj=async A=>nb("getManagedCredentials",async()=>Vz(A.session).catch(ab("getManagedCredentials"))),xLj=async(A,j)=>nb("createManagedCredentials",async()=>Xz(A.session,j).catch(ab("createManagedCredentials"))),vLj=async(A,j)=>nb("updateManagedCredential",async()=>Jz(A.session,j).catch(ab("updateManagedCredential"))),GLj=async(A,j)=>nb("getManagedCredentialsForPolicy",async()=>Wz(A.session,j).catch(ab("getManagedCredentialsForPolicy"))),fLj=async(A,j)=>nb("reportManagedCredentialUsage",async()=>pW(A.session,j).catch(ab("reportManagedCredentialUsage")));var W4A="action/managed_credential_accessors",iH=ar(W4A),sH=ij(W4A),FLj=async(A,j,e)=>sH("createManagedCredentialAccessors",async()=>_z(A.session,j,e).catch(iH("createManagedCredentialAccessors"))),bLj=async(A,j)=>sH("getManagedCredentialAccessors",async()=>Cz(A.session,j).catch(iH("getManagedCredentialAccessors"))),yLj=async(A,j,e,t)=>sH("updateManagedCredentialAccessor",async()=>Sz(A.session,j,e,t).catch(iH("updateManagedCredentialAccessor"))),$Lj=async(A,j,e)=>sH("deleteManagedCredentialAccessor",async()=>Hz(A.session,j,e).catch(iH("deleteManagedCredentialAccessor")));var Q4A="action/managed_credential_policies",ZrA=ar(Q4A),AaA=ij(Q4A),wLj=async A=>AaA("getManagedCredentialPolicies",async()=>Kz(A.session).catch(ZrA("getManagedCredentialPolicies"))),ILj=async(A,j)=>AaA("getManagedCredentialPolicy",async()=>Nz(A.session,j).catch(ZrA("getManagedCredentialPolicy"))),PLj=async(A,j)=>AaA("enforceManagedCredentialPolicy",async()=>Lz(A.session,j).catch(ZrA("enforceManagedCredentialPolicy")));var OLj=async(A,j,e,t)=>{if(e.find(i=>i.type!==sj.TypeUserCreated))throw new Error("Unsupported vault type included in selected vaults.");let r=[await Y4A(A),await PS(A),...e],a=e.length>0?await LeA(j):void 0,n=await P4(async i=>({vaultItems:await bd(A,i),vault:i.type===sj.TypeUserCreated?await fd(A,i,{attrs:sj.Attr.Accessors,mustReload:!0}):i}),10,r.filter(i=>!!i));await go(A,[_t.Groups]);let o={successfulVaults:[],failedVaults:[],failedItems:{}};return await P4(async i=>{try{let s=await RLj(j,a,A,i.vault,t),l=i.vaultItems.map(c=>kA.importFromJson(s,c.exportToJson()));return Tl(j,l,s).then(c=>{o.successfulVaults.push(i.vault);let k=Object.keys(c.failedItems);k.length>0&&(console.error("Failed to patch some vault items",s.uuid,c.failedItems),o.failedItems[s.uuid]=k)}).catch(c=>{o.failedVaults.push(s.uuid),console.error("Failed to patch vault items",s.uuid,c)})}catch(s){return console.error("Failed to migrate vault",i.vault.uuid,s),o.failedVaults.push(i.vault.uuid),Promise.resolve()}},10,n),o},RLj=async(A,j,e,t,r)=>{let a=e.account?.administratorsGroup?.uuid;switch(t.type){case sj.TypePersonal:return await Y4A(A);case sj.TypeGeneratedPasswords:return await PS(A)||await a1(A);case sj.TypeUserCreated:{if(!j)throw new Error("Missing destination preflight.");return await zeA(A,{name:t.name,desc:t.desc,type:sj.TypeUserCreated,avatar:await TLj(e,A,t,r)},DLj(t,a,j))}default:throw new Error("Can't get destination vault for unsupported type.")}},DLj=(A,j,e)=>{let t=[...e.mandatoryGroupUuids];if(!j)return t;for(let r of e.adminGroupUuids)r&&!e.mandatoryGroupUuids.includes(r)&&A.accessList.find(a=>a.accessorType==="group"&&a.accessorUuid===j)&&t.push(r);return[...t]},Y4A=async A=>{let j=await em(A);if(!j)throw new Error("Missing personal vault.");return j},TLj=async(A,j,e,t)=>{if(!e.avatar)return"";let r=t(e.avatar,A.account),a=await fetch(r,{cache:"no-store"}).then(async n=>n.arrayBuffer());return await ItA(j,a)};var CLj="action/monitoring",_Lj=ij(CLj),SLj=async(A,j)=>_Lj("createMonitoringCheck",async()=>await Yw(A.session,j)),HLj=async A=>await mW(A.session);var MLj=async A=>(await wW(A.session)).notifications,KLj=async(A,j)=>{await IW(A.session,{uuid:j})},NLj=async(A,j)=>{await PW(A.session,{token:j})};var LLj=async(A,j,e)=>A.isSignedIn()?Ye.createSetupIntent(A.session):Ye.createUnverifiedSetupIntent(A.session,j,e),zLj=async(A,j,e)=>Ye.updatePaymentMethod(A.session,j,e).then(async()=>Vs(A)),ULj=async(A,j)=>Ye.getPaymentMethod(A.session,j);var VLj=async(A,j={})=>{let e;try{e=await qJ(A.session,j)}catch(t){throw CA.isNewServerError(t)&&t.reason===CA.ServerErrorReason.oidcGenericDomainNotAllowed||Or(new xe({message:p`StartOIDC failed to get redirect URL`,errorClass:$n.RequestError,userUuid:j.userUuid?W(j.userUuid):void 0,stackOverrideError:t,severityLevel:"error",metaData:{request:{accountUuidPresent:j.accountUuid?p`true`:p`false`,keyIdPresent:j.keyId?p`true`:p`false`}},tags:Z4A(t)})),t}if(!e||!e.authRedirect)throw new Error("expected an IdP redirect URL");return e.authRedirect},XLj=async(A,j,e,t)=>{try{return await A.session.verifyOidc(j,e,t)}catch(r){throw Or(new xe({message:p`VerifyOIDC failed to get user identity`,errorClass:$n.RequestError,stackOverrideError:r,severityLevel:"error",tags:Z4A(r)})),r}},Z4A=A=>{let j={};return CA.isNewServerError(A)&&A.reason&&Object.values(CA.ServerErrorReason).includes(A.reason)&&(j={...j,serverErrorReason:W(A.reason)}),j};var JLj=async(A,j)=>LW(A.session,j).catch(e=>{console.error("Failed to report outdated browser:",e)});var jaA;(function(A){A.Asc="ASC",A.Desc="DESC"})(jaA||(jaA={}));var eaA;(function(A){A.Name="Name",A.CreatedAt="Created",A.UpdatedAt="Updated"})(eaA||(eaA={}));var WLj=async(A,j)=>AQ(A.session,j);var taA={};er(taA,{deletePrivacyComItemByUuid:()=>YLj,findPrivacyComItemByUuid:()=>ATA,getOrCreateSystemVault:()=>QLj});var QLj=async A=>{let j=await Nk(A);return j||await lx(A)},ATA=(A,j)=>A.find(e=>e.overview.integration==="privacy"&&e.uuid===j),YLj=async(A,j)=>{let e=await Nk(A);if(!e)throw new Error("The system vault was expected but missing during Privacy.com deletion");let t=await bd(A,e),r=ATA(t,j);if(!r)throw new Error("The Privacy.com record was expected but missing during Privacy.com deletion");r.state=kA.ItemState.Deleted;let a=await Tl(A,[r],e);if(a.failedItems[j])throw new Error("The Privacy.com record was unable to be deleted");return a};var ZLj={...taA};var jTA="action/report",xx=ar(jTA);var A9j=async A=>Promise.resolve().then(async()=>MY(A.session)).catch(xx("getDashboardReport")),j9j=async(A,j,e)=>Promise.resolve().then(async()=>NY(A.session,j,e)).then(async t=>heA(A,t,o1(A,j))).catch(xx("getUserReport")),e9j=async(A,j,e)=>{if(!j_(j))throw new Error("report params are invalid");try{let t=await zY(A.session,j,e),r=await dS(A,t);return{apiReportItem:t,itemUsages:r}}catch(t){return xx("getUsageReportsWithFilters",t)}},t9j=async(A,j,e)=>{if(!j_(j))throw new Error("report params are invalid");try{let t=await LY(A.session,j,e),r=await dS(A,t);return{apiReportItem:t,itemUsages:r}}catch(t){return xx("getUsageReportsWithCursors",t)}},r9j=async(A,j,e)=>UY(A.session,j,e),a9j=async(A,j,e)=>Promise.resolve().then(async()=>VY(A.session,j,e)).then(async t=>qeA(A,t)).catch(xx("getVaultReport")),n9j=async(A,j,e)=>{try{let t=await XY(A.session,j,e);return xeA(A,t)}catch(t){return xx("getVaultsReport",t)}},o9j=async(A,j)=>j.length===0?{}:JY(A.session,j),i9j=async A=>WY(A.session,[sI.ExtendedOverview]).catch(xx("getOverviewReport")),s9j=async A=>QY(A.session),l9j=async A=>Sn([jTA,"getAccountReportCSV",A.id],async()=>YY(A.session)),ob=A=>A.map(j=>({uuid:j})),c9j=async(A,j)=>{let e=ob(j),t=Jo(e,dI);try{for(let r of t)await ZY(A.session,r),await Pn(1500)}catch(r){throw console.error("Failed to send unused private vault email.",r),r}},d9j=async(A,j)=>{let e=ob(j),t=Jo(e,dI);try{for(let r of t)await AZ(A.session,r),await Pn(1500)}catch(r){throw console.error("Failed to send unredeemed family account email.",r),r}},k9j=async(A,j)=>{let e=ob(j),t=Jo(e,dI);try{for(let r of t)await jZ(A.session,r),await Pn(1500)}catch(r){throw console.error("Failed to send no signin past month email.",r),r}},u9j=async A=>eZ(A.session),eTA=10,E9j={currentPage:1,itemsPerPage:eTA,itemsReturned:0,totalItems:0,totalPages:1},p9j={activeUsersLastWeek:0,activeUsersWithExtensionInstalls:0,totalActiveUsers:0},m9j=async(A,{itemsPerPage:j,currentPage:e,extensionStatus:t,search:r,sortBy:a,sortDirection:n})=>{let o={itemsPerPage:j,currentPage:e,extensionStatus:t,search:r,sortBy:a,sortDirection:n};return tZ(A.session,o)},B9j=async A=>rZ(A.session),g9j=async A=>aZ(A.session);var h9j=async A=>{let e={name:"Provision Managers",type:IA.TypeProvisioning,desc:"",avatar:void 0},t=await itA(A,e),r=await Ka(A,t.uuid,{attrs:IA.Attr.PubKey|IA.Attr.Memberships});return await go(A,[_t.Me]),r},tTA=async(A,j,e,t)=>{let r=await DtA(A,Gt.Provisioning),{user:a,encKeyset:n,creds:o}=await TtA(A,r.email,e);if(!a.activeKeyset)throw new Error("Missing user active keyset.");let i={uuid:zr.UUIDNewlyCreatedServiceAccount,pubKey:n.pubKey},s=await zk(A),l=await StA(A,i,[j,s],t),c={srpX:o.srpX,params:o.userAuth};return{user:(await CtA(A,{encKeyset:n,user:a,preflightResponse:r,userAuth:c,serviceAccountType:Gt.Provisioning,permissions:Kj.empty(),access:{groups:l}})).person,creds:o,keyset:a.activeKeyset}},q9j=async(A,j,e)=>{let{user:t,userAuth:r}=await i1(A,j,"Provision Manager");await t.encryptActiveKeysetWithMasterKey();let a=await jtA(A,t,r);return await fS(A,{user:a,add:[{uuid:e.uuid,role:dr.Role.Member}],remove:[]}),await etA(A,a,{token:!0}),{user:a,creds:t.getCredentials()}},x9j=async(A,j)=>{let t=(await x1(A,j.uuid)).users.filter(r=>Dj.isProvisionManager(r)&&Dj.isActive(r)&&!Dj.isServiceAccount(r));if(t.length!==0)return t},v9j=async(A,j)=>{let t=(await x1(A,j.uuid)).users.find(r=>!Dj.isOwner(r)&&!Dj.isAdmin(r));if(t)return Fu(A,t.uuid,{attrs:zr.Attr.PubKey,mustReload:!1})},G9j=async(A,j)=>{if(!A.user)throw new Error("User is missing");(await x1(A,j.uuid)).users.find(r=>r.uuid===A.user?.uuid)||await ax(A,{group:j,add:[{uuid:A.user.uuid,role:dr.Role.Manager}],remove:[]})},f9j=A=>async()=>{let j=await s1(A,{attrs:IA.Attr.Memberships,mustReload:!0});if(!j)throw new Error("Provision Managers group is missing");if(!j.memberships)throw new Error("Provision Managers group is empty");let e=j.memberships.find(t=>t.memberUuid===A.user?.uuid);e&&await ax(A,{group:j,add:[],remove:[e.memberUuid]})},rTA=async(A,j,e)=>{try{await Yw(A.session,{domain:j,bearerToken:e})}catch{throw new Error("Couldn\u2019t turn on SCIM bridge health monitoring.")}},F9j=(A,j)=>async(e,t,r,a)=>{if(!A.account)throw new Error("Account is missing.");let n=new rx(A.config),o={allowReauthorization:!0,suppressClientNotifications:!0,isDesignatedAsPublic:!1},i=t.type===Dj.Type.ServiceAccount,s;if(i)if("userAuth"in e){if(s=e,s.userAuth===void 0)throw new Error("Missing credential auth information")}else throw new Error("srpCredentials are missing.");else{await mx(n,e,o).catch(R=>{throw new Error(`Failed to authenticate the Provision Manager: ${C6(R)}`)});let G=await arA(n);if(G===void 0)throw new Error("srpCredentials are missing.");let x=n.session.auth?.params;if(x===void 0)throw new Error("Missing session auth information");s={...G,signInAddress:A.account&&A.account.urlHost(A.config.server)||"",userAuth:x}}let l=await gu.generate(s),{bearerToken:c,...k}=await gu.generateVerifierAndToken();if(a){if(!r)throw new Error("Enter the address where the SCIM bridge will be available.");await rTA(A,r,c)}let u={version:"2",...l.localAuth,healthVerifier:k,deviceUuid:Se(),domain:j},m=l.bearerToken,F=JSON.stringify(u);return{bearerToken:m,healthVerifierBearerToken:c,fileContents:F}},b9j=async(A,j,e)=>{if(!A.account)throw new Error("Account is missing.");if(!j.userAuth)throw new Error("Missing credential auth information.");let t=await gu.generate(j),{bearerToken:r,...a}=await gu.generateVerifierAndToken(),n={version:"2",...t.localAuth,healthVerifier:a,deviceUuid:Se(),domain:e},o=t.bearerToken,i=JSON.stringify(n);return{bearerToken:o,healthVerifierBearerToken:r,fileContents:i}},y9j=async(A,j,e,t)=>{let r=await Fu(A,j.uuid,{attrs:zr.Attr.Groups}),a=await zk(A),n=r.groupMemberships.filter(s=>s.groupUuid!==e.uuid&&s.groupUuid!==a.uuid).map(s=>s.groupUuid),{user:o,creds:i}=await tTA(A,e,t);if(n.length>0){let s=n.map(c=>({uuid:c,role:dr.Role.Manager})),l={user:o.uuid,add:s,remove:[]};await fS(A,l)}return await AtA(A,[j]),{user:o,creds:i}};var $9j=async(A,j)=>{if(!A.user)throw new Error("Missing user.");if(!A.account)throw new Error("Missing account.");if(!A.config.env)throw new Error("Missing env.");let e={...j,userUuid:A.user.uuid,email:A.user.email,name:A.user.name,env:A.config.env,accountUuid:A.account.uuid,timestamp:new Date().toISOString()};return w9j(A,e)},w9j=async(A,j)=>{if(!A.user)throw new Error("Missing user.");if(!A.user.activeKeyset)throw new Error("User does not have active keyset.");if(!A.user.activeKeyset.hasSigningKeys||!A.user.activeKeyset.skeyPair?.priKey?.jwk)throw new Error("User does not have signing keys.");return vjA(A.user.activeKeyset.skeyPair.priKey.jwk,Qe(j))};var ib;(function(A){A[A.Invite=1]="Invite",A[A.Recovery=2]="Recovery",A[A.Provision=3]="Provision"})(ib||(ib={}));var I9j=async(A,j,e,t)=>s_(A.session,`${j}?email=${encodeURIComponent(e)}`).then(r=>{let a=r.type===Et.Type.Business?r.domain:Il;return t.set("l",r.language),`https://${a}.${A.config.server}/register-account/${r.uuid}?${t}`}),P9j=async(A,j,e,t)=>hZ(A.session,j,e,t).then(async r=>{let a=r.defaultBillingFrequency||Ye.Frequency.Yearly,n=r.availablePlans.find(i=>i.frequency===a);if(!n)throw new Error("Could not find default plan");let o={uuid:r.uuid,domain:r.domain,plan:n,tierName:r.tierName,trialEndsAt:X6(r.trialEndsAt),taxAdvice:void 0,features:r.features,duplicateAccounts:r.duplicateAccounts||[],accountCreationDisabled:r.accountCreationDisabled,promoCode:r.promoCode,setupIntentCode:r.setupIntentCode};return srA(A,n.display.amount,"",r.tierName).then(i=>(o.taxAdvice=i,o)).catch(()=>o)}),O9j=async(A,j)=>{let e={email:j.email,domain:j.domain,name:j.accountName,type:j.accountType,language:j.language,promoCode:j.promoCode,referrer:j.referrer,source:j.source||Z7.Web,tierName:j.tierName},t=j.accountType===Et.Type.Business?await px(A,j.accountName):Il;e.domain=t,j.accountType===Et.Type.Individual&&(e.name=e.email),await pZ(A.session,e)},R9j=async(A,j)=>{let e={email:j.email,domain:"",name:j.accountName||j.userName,type:j.accountType,language:j.language,promoCode:j.promoCode,purchaseOrderToken:j.purchaseOrderToken,stripePurchaseOrderToken:j.stripePurchaseOrderToken,referrer:j.referrer,source:j.source||Z7.Web,tierName:j.tierName,companySize:j.companySize,phoneNumber:j.phoneNumber,distributorCode:j.distributorCode,usersManaged:j.usersManaged},t=j.accountType===Et.Type.Business?await px(A,j.accountName):Il;e.domain!==Il&&(e.domain=t);let a=(await mZ(A.session,e)).emailResendToken||void 0;return{domain:t,emailResendToken:a}},D9j=async(A,j)=>{let e=await s_(A.session,j);return veA(e)},T9j=async(A,j,e)=>BZ(A.session,j,e),C9j=async(A,j,e)=>{try{return gZ(A.session,j,e)}catch(t){throw console.error("[updateServerSignup] Failed to update signup details:",t),t}},lH={},_9j=async(A,j)=>(await aTA(A,j),oTA(A)),S9j=async(A,j)=>(await nTA(A,j),iTA(A,j.challenge,j.encryptedDeviceCredential,j.auth)),aTA=async(A,j)=>{if(lH[A.id]=j.signupUuid,A.account=new Et({uuid:"",type:j.accountType,state:Et.StateRegistered,name:j.accountName,domain:j.domain,avatar:j.accountAvatar||"",attrVersion:1,createdAt:kp(new Date)}),!j.name)throw new Error("Name is missing");if(!A.account)throw new Error("Unexpected error, missing account.");let e=j.secretKey||await ba.generate();A.user=new Eo({email:j.email,password:j.password,language:j.language,name:j.name,newsletterPrefs:j.newsletterPrefs,secretKey:e,avatar:j.avatar}),A.userAuth=await ra.generate({email:j.email,password:j.password,secretKey:e}),A.user.masterKey=await rr.deriveDefaultKdf({email:j.email,password:j.password,secretKey:e}),await A.user.generateNewKeyset()},nTA=async(A,j)=>{if(lH[A.id]=j.signupUuid,A.account=new Et({uuid:"",type:j.accountType,state:Et.StateRegistered,name:j.accountName,domain:j.domain,avatar:j.accountAvatar||"",attrVersion:1,createdAt:kp(new Date)}),!j.name)throw new Error("Name is missing");if(!A.account)throw new Error("Unexpected error, missing account.");let e;j.accountKeyUuid?e=await ba.forTrustedDevice(j.accountKeyUuid):e=await ba.generateForTrustedDevice(),A.user=new Eo({email:j.email,language:j.language,name:j.name,newsletterPrefs:j.newsletterPrefs,avatar:j.avatar,secretKey:e}),A.user.masterKey=j.auk,await A.user.generateNewKeyset()},oTA=async A=>{if(!Pr.device)throw new Error("Missing device identifier");let j=Pr.device,e=A.user;if(!e)throw new Error("Missing user.");if(!e.secretKey)throw new Error("Missing Secret Key.");let t=await e.encryptActiveKeysetWithMasterKey(),r=A.userAuth;if(!r)throw new Error("Missing auth for user.");let a=A.account;if(!a)throw new Error("Missing account.");let n=lH[A.id];if(!n)throw new Error("Missing signup identifier.");let o={signupUuid:n,user:{email:e.email,language:e.language,name:e.name,newsletterPrefs:e.newsletterPrefs,accountKeyFormat:e.secretKey.format.toString(),accountKeyUuid:e.secretKey.id,avatar:e.avatar},account:{name:a.name,domain:a.domain,type:a.type,avatar:a.avatar},device:j,keyset:t,userAuth:ra.getForUpload(r)};if(!o.user.name)throw new Error("Name is missing");return l_(A.session,o)},iTA=async(A,j,e,t)=>{if(!Pr.device)throw new Error("Missing device identifier");let r=Pr.device,a=A.user;if(!a)throw new Error("Missing user.");if(!a.name)throw new Error("Name is missing");if(!a.secretKey)throw new Error("Missing Secret Key.");let n=await a.encryptActiveKeysetWithMasterKey();if(!A.account)throw new Error("Missing account.");let o=lH[A.id];if(!o)throw new Error("Missing signup identifier.");let i={signupUuid:o,user:{email:a.email,language:a.language,name:a.name,newsletterPrefs:a.newsletterPrefs,accountKeyFormat:a.secretKey.format.toString(),accountKeyUuid:a.secretKey.id,avatar:a.avatar,challenge:j,deviceCredential:{v:2,encCredentials:e}},account:{name:A.account.name,domain:A.account.domain,type:A.account.type,avatar:A.account.avatar},device:r,keyset:n,userAuth:t};return l_(A.session,i)},raA={},aaA=async A=>{let j=new Eo({language:A.language,avatar:A.avatar,newsletterPrefs:A.newsletterPrefs,secretKey:await ba.generateForTrustedDevice()});return j.masterKey=A.credentialBundle.auk,await j.generateNewKeyset(),{user:j,userAuth:ra.createFromPreComputedX(A.credentialBundle.srpx.exportBytes())}},H9j=async(A,j,e,t)=>{let{user:r,userAuth:a}=await aaA(j);if(A.user=r,A.userAuth=a,!r.secretKey)throw new Error("User does not have a Secret Key");let[n,o]=await Promise.all([r.encryptActiveKeysetWithMasterKey(),t.encryptCredentialBundle(j.credentialBundle)]),i={invite:{uuid:j.uuid,token:j.token},user:{identity:j.identity,accountKeyFormat:r.secretKey.format.toString(),accountKeyUuid:r.secretKey.id,email:"",name:"",language:r.language,newsletterPrefs:r.newsletterPrefs,avatar:r.avatar},device:e,keyset:n,userAuth:ra.getForUpload(a),deviceCredentials:{v:2,encCredentials:o}},s=await i_(A.session,i);if(!s.sessionUuid)throw new Error("signUpUser did not return sessionUuid");return A.session.setSessionUuid(s.sessionUuid),s},M9j=async(A,j,e,t,r,a,n)=>{if(A.user=r,A.userAuth=a,!r.secretKey)throw new Error("User does not have a Secret Key");let[o,i]=await Promise.all([r.encryptActiveKeysetWithMasterKey(),t.encryptCredentialBundle(j.credentialBundle)]),s={token:j.token,uuid:j.uuid,accountKeyFormat:r.secretKey.format.toString(),accountKeyUuid:r.secretKey.id,language:r.language,userAuth:ra.getForUpload(a),identity:j.identity,deviceCredentials:{v:2,encCredentials:i},device:e,keyset:o,trustLogBookmark:n};return ZC(A.session,s)},K9j=async(A,j,e,t)=>{let{user:r,userAuth:a}=await aaA(j);if(A.user=r,A.userAuth=a,!r.secretKey)throw new Error("User does not have a Secret Key");let[n,o]=await Promise.all([r.encryptActiveKeysetWithMasterKey(),t.encryptCredentialBundle(j.credentialBundle)]),i={token:j.token,uuid:j.uuid,accountKeyFormat:r.secretKey.format.toString(),accountKeyUuid:r.secretKey.id,language:r.language,userAuth:ra.getForUpload(a),identity:j.identity,deviceCredentials:{v:2,encCredentials:o},device:e,keyset:n};return YC(A.session,i)},N9j=async(A,j)=>{raA[A.id]=j;let e=j.secretKey||await ba.generate();A.user=new Eo({uuid:j.uuid,email:j.email,password:j.password,language:j.language,name:j.name,secretKey:e,avatar:j.avatar,newsletterPrefs:j.newsletterPrefs,meta:j.meta}),A.userAuth=await ra.generate({email:j.email,password:j.password,secretKey:e}),A.user.masterKey=await rr.deriveDefaultKdf({email:j.email,password:j.password,secretKey:e}),await A.user.generateNewKeyset()},L9j=async(A,j)=>{if(raA[A.id]=j,!A.user?.activeKeyset)throw new Error("beginProvisionedUserSignup - User does not have an active keyset");let e=await ba.generate();A.user.password=j.password,A.user.secretKey=e,A.userAuth=await ra.generate({email:j.email,password:j.password,secretKey:e}),A.user.masterKey=await rr.deriveDefaultKdf({email:j.email,password:j.password,secretKey:e})},z9j=async(A,j)=>{if(!Pr.device)throw new Error("Missing device identifier");let e=A.user;if(!e)throw new Error("Missing user.");if(!e.secretKey)throw new Error("Missing Secret Key.");let t=await e.encryptActiveKeysetWithMasterKey(),r=A.userAuth;if(!r)throw new Error("Missing auth for user.");let a=raA[A.id];if(!a)throw new Error("Missing signup.");switch(a.source){case ib.Invite:{let n={invite:{uuid:a.uuid,token:a.token},user:{email:e.email,language:e.language,name:e.name,newsletterPrefs:e.newsletterPrefs,accountKeyFormat:e.secretKey.format.toString(),accountKeyUuid:e.secretKey.id,avatar:e.avatar,meta:e.meta},device:Pr.device,keyset:t,userAuth:ra.getForUpload(r)};return i_(A.session,n)}case ib.Recovery:{if(a.emailVerification===void 0)throw new Error("Missing email verification success token");let n={accountKeyFormat:e.secretKey.format.toString(),accountKeyUuid:e.secretKey.id,device:Pr.device,keyset:t,language:e.language,token:a.token,emailVerificationSuccessToken:a.emailVerification,userAuth:ra.getForUpload(r),uuid:a.uuid,trustLogBookmark:j};return ZC(A.session,n)}case ib.Provision:{let n={accountKeyFormat:e.secretKey.format.toString(),accountKeyUuid:e.secretKey.id,device:Pr.device,keyset:t,language:e.language,token:a.token,userAuth:ra.getForUpload(r),uuid:a.uuid,userMfa:a.userMfa,emailVerification:a.emailVerification};return YC(A.session,n)}default:throw new Error("Invalid signup source")}},U9j=async(A,j)=>qZ(A.session,j);var lm=J(tA());var V9j=async(A,j,e)=>{try{let t=await IJ(A.session,j,e);return sTA(t.authMethods)&&g3(),t}catch{return{authMethods:[]}}},sTA=A=>H1(A)||M1(A),H1=A=>A===void 0||A.length===0?!1:A.some(j=>j.type===Vw),X9j=A=>H1(A)&&A.length===1,cH=A=>A===void 0||A.length===0?!1:A.some(j=>j.type===yC),J9j=A=>cH(A)&&A.length===1,M1=A=>A===void 0||A.length===0?!1:A.some(j=>j.type===Xw),W9j=A=>M1(A)&&A.length===1,Q9j=A=>A.type===Vw?A:void 0,Y9j=A=>A.type===Xw?A:void 0,Z9j=A=>{if(A)return A.map(Y9j).find(j=>j)},lTA=A=>{if(A)return A.map(Q9j).find(j=>j)},A3j=A=>{let j=lTA(A);if(j&&j.provider)return j.provider},j3j=async(A,j,e,t)=>{let r=await e.encryptCredentialBundle(j);return PJ(A.session,{encCredentials:r,v:2},e.kid,t)},e3j=async(A,j)=>RJ(A.session,j),t3j=async(A,j,e,t)=>OJ(A.session,j,e,t),xut=lm.intersection([_p,lm.readonly(lm.type({accountKeyFormat:lm.string,accountKeyUuid:lm.string,userAuth:Yf}),"extra")],"CredentialBundleAuthResponse"),r3j=async(A,j)=>{let e=await A.decryptCredentialBundle(j.encCredentials);return{type:"found",secretKeyFormat:j.accountKeyFormat,secretKeyUuid:j.accountKeyUuid,spec:j.v,credentialBundle:e,userAuth:j.userAuth}};var a3j=async(A,j)=>{let e=await pU(A.session,j);return K1(A,e)},n3j=async(A,j)=>{let e=await mU(A.session,j);return K1(A,e)},o3j=async A=>{let j=await DT(A.session);return K1(A,j)},i3j=async A=>{try{let j=await DT(A.session);return K1(A,j)}catch(j){if(CA.isNewServerErrorWithStatus(j,CA.HTTPStatusCode.notFound)||CA.isNewServerErrorWithStatus(j,CA.HTTPStatusCode.forbidden))return;throw j}},s3j=async(A,j)=>(await BU(A.session,j)).authRedirect,l3j=async(A,j,e)=>gU(A.session,{code:j,state:e}),c3j=async(A,j)=>hU(A.session,j),d3j=async(A,j)=>qU(A.session,j),K1=(A,j)=>(j.federationSettings.oidcSettings.clientSecret!==void 0&&(Or(new xe({errorClass:$n.ContextError,message:p`unexpected non-nil clientSecret returned`,userUuid:A.user?W(A.user?.uuid):void 0})),delete j.federationSettings.oidcSettings.clientSecret),k3j(j.federationSettings.oidcSettings.identityProvider)||j.federationSettings.oidcSettings.privateApp&&(Or(new xe({errorClass:$n.ContextError,message:p`unexpected truthy privateApp returned`,userUuid:A.user?W(A.user?.uuid):void 0})),j.federationSettings.oidcSettings.privateApp=!1),j),k3j=A=>{switch(A){case Hs.Generic:case Hs.Unknown:case Hs.Ping:case Hs.JumpCloud:case Hs.OneLogin:case Hs.Okta:case Hs.Auth0:case Hs.Duo:return!1;case Hs.Azure:case Hs.Google:return!0;default:throw new Error("unexpected identity provider")}};var u3j=async A=>aA.getSsoMigrationReportOverview(A.session),E3j=async A=>aA.getSsoMigrationReportGroups(A.session),p3j=async(A,j)=>{let e=ob(j),t=Jo(e,aA.MAX_EMAIL_BATCH_SIZE),r=t.length,a=0;try{for(let n of t)await aA.sendSsoMigrationReminderEmail(A.session,n),a++,a<r&&await Pn(1500)}catch(n){throw console.error("Failed to send SSO reminder emails.",n),n}},m3j=async(A,j)=>(await aA.getSsoMigrationPendingReport(A.session,j)).pendingRecords,B3j=async(A,j)=>(await aA.getSsoMigrationExpiredReport(A.session,j)).expiredRecords,g3j=async(A,j)=>(await aA.getSsoMigrationSuccessfulReport(A.session,j)).successfulRecords;var h3j=async(A,j)=>DZ(A.session,j),q3j=async(A,j)=>CZ(A.session,j),x3j=async(A,j,e)=>_Z(A.session,j,e),v3j=async A=>(await SZ(A.session)).enrollments,G3j=async(A,j)=>KZ(A.session,j),f3j=async(A,j)=>HZ(A.session,j),F3j=async(A,j,e)=>MZ(A.session,j,e),b3j=async(A,j)=>NZ(A.session,j);var y3j="action/support",naA=ij(y3j),$3j=async(A,j)=>naA("requestSupportEmail",async()=>UZ(A.session,j)),w3j=async(A,j,e)=>naA("getSupportAccountsList",async()=>{let{accounts:t}=await VZ(A.session,j,e);return t}),I3j=async(A,j,e,t)=>naA("requestAccountDeletion",async()=>XZ(A.session,j,e,t));var P3j="action/survey",O3j=ij(P3j),R3j=async(A,j)=>O3j("submitDepartureSurvey",async()=>QZ(A.session,j));var D3j=async A=>aAA(A.session);var T3j=async(A,j)=>EAA(A.session,j);var C3j=async(A,j,e,t)=>pAA(A.session,j,e,t||""),_3j=async(A,j,e,t)=>mAA(A.session,j,e,t),S3j=async A=>BAA(A.session),H3j=async(A,j)=>gAA(A.session,j),M3j=async(A,j)=>hAA(A.session,j);var N3j=J(cTA(),1),iaA=(A,j,e)=>new Promise((t,r)=>{var a=i=>{try{o(e.next(i))}catch(s){r(s)}},n=i=>{try{o(e.throw(i))}catch(s){r(s)}},o=i=>i.done?t(i.value):Promise.resolve(i.value).then(a,n);o((e=e.apply(A,j)).next())}),K3j=(A,j)=>iaA(void 0,null,function*(){let e,t=new Promise(r=>{e=setTimeout(r,j)});return Promise.race([A,t]).then(r=>(clearTimeout(e),r))}),oaA=class{static encodeBytes(A){let j=btoa(String.fromCharCode(...new Uint8Array(A))).replace(/\+/g,"-").replace(/\//g,"_");return dTA(j)}static decodeBytes(A){let j=A.replace(/-/g,"+").replace(/_/g,"/"),e=dTA(j);return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}},dTA=A=>{let j=A.indexOf("=");return A.slice(0,j===-1?A.length:j)},kTA=class{static createCredentialAvailable(){return iaA(this,null,function*(){let A={securityKey:!1,platform:!1,isAvailable:!1};return window.PublicKeyCredential&&(A.securityKey=!0,A.isAvailable=!0,yield K3j(window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(j=>{A.platform=j}).catch(()=>console.log("Something went wrong.")),500)),A})}static parsePublicKey(A){if(A.challenge=oaA.decodeBytes(A.challenge.toString()),A.user.id=oaA.decodeBytes(A.user.id.toString()),A.excludeCredentials)for(let j=0;j<A.excludeCredentials.length;j++){let e=A.excludeCredentials[j];e.id=oaA.decodeBytes(e.id.toString())}return A}static getTransports(A){let j=[];return A.response.getTransports&&typeof A.response.getTransports=="function"&&(j=A.response.getTransports()),j}static createCredential(A){return iaA(this,null,function*(){let j={credential:null,transports:[]},e=this.parsePublicKey(A),t=yield navigator.credentials.create({publicKey:e}).then(r=>r);return t==null||(j.credential=t,j.transports=this.getTransports(t)),j})}};var kH=J(tA());var L3j=async(A,j,e,t,r)=>A.session.verifyPasskey(j,t,e,r),uTA=async A=>A.session.registerWebauthnCredential(),ETA=async(A,j,e)=>A.session.verifyWebauthnCredentialAttestation(j,e),pTA=async A=>{if(!(await kTA.createCredentialAvailable()).isAvailable)throw new Error("Browser does not support WebAuthn.");if(!A?.publicKey)throw new Error("included credential options do not include the passkey challenge");let{publicKey:e}=A,t={publicKey:{...e,challenge:ej(e.challenge),user:{...e.user,id:ej(e.user.id)}}},r=await navigator.credentials.create(t);if(!r)throw new Error("Unable to create webauthn credentials. Credentials not present");if(!("response"in r))throw new Error("Missing response field in rawCredentialFromBrowser");let a=r.response;if(a===null||typeof a!="object")throw new TypeError("attestationResponse has no properties");if(!("clientDataJSON"in a&&a.clientDataJSON instanceof ArrayBuffer)||!("attestationObject"in a&&a.attestationObject instanceof ArrayBuffer))throw new TypeError("Attestation response has incorrect format");if(!("rawId"in r&&r.rawId instanceof ArrayBuffer))throw new TypeError("Credential raw id has incorrect format");let n;return"getTransports"in a&&typeof a.getTransports=="function"&&(n=cj(a.getTransports(),kH.array(kH.string)).unwrap()),{id:r.id,rawId:Aj(new Uint8Array(r.rawId)),type:r.type,response:{clientDataJSON:Aj(new Uint8Array(a.clientDataJSON)),attestationObject:Aj(new Uint8Array(a.attestationObject)),transports:n}}},z3j=async(A,j)=>{let e=await uTA(A),t=await pTA(e.challenge);return ETA(A,j,t)},U3j=async(A,j)=>yJ(A.session,j),V3j=async(A,j,e)=>$J(A.session,j,e),X3j=async(A,j,e)=>wJ(A.session,j,e);var J3j=async(A,j)=>await qAA(A.session,j);var sb=J(tA());var saA=J(xrA());var W3j=async A=>xAA(A.session),Q3j=500,Y3j=async(A,j)=>{await W6(async t=>(await vAA(A.session,{emails:t}),[]),Q3j,j)},mTA=sb.readonly(sb.array(sb.string)),Z3j=A=>{if(typeof saA>"u")throw new TypeError("Papa Parse must be loaded first.");try{let j=saA.parse(A,{skipEmptyLines:!0}),e=ik(j.data);if(j.data.length!==e.length)throw new Error("Unexpected columns in row.");let r=cj(e,mTA).unwrap().filter(a=>sq(a));if(r.length===0)throw new Error("No valid emails.");return r}catch(j){throw console.error("Failed to parse, CSV is not in expected format.",j),j}};var Azj=async(A,j)=>{await GAA(A.session,j),A.account&&(A.account.mustMigrate=!1)},jzj=async A=>fAA(A.session);var Bs;(function(A){A.Filled="filled-login-with-provider",A.Linked="linked-item-to-provider",A.SavingPasskeySuccess="saving-passkey-success",A.UsingPasskeySuccess="using-passkey-success",A.SavingPasskeyFailureInternal="saving-passkey-failure-internal",A.SavingPasskeyFailureTimeout="saving-passkey-failure-timeout",A.SavingPasskeyFailureUnknown="saving-passkey-failure-unknown",A.SavingPasskeyFailureBadinput="saving-passkey-failure-badinput",A.UsingPasskeyFailureInternal="using-passkey-failure-internal",A.UsingPasskeyFailureMissingItem="using-passkey-failure-missing-item",A.UsingPasskeyFailureTimeout="using-passkey-failure-timeout",A.UsingPasskeyFailureUnknown="using-passkey-failure-unknown",A.UsingPasskeyFailureBadinput="using-passkey-failure-badinput",A.AutoSaveSaveItem="autosave-save-item",A.AutoSaveSaveItemSpg="autosave-save-item-spg",A.AutoSaveSaveItemCreditCard="autosave-save-item-credit-card",A.AutoSaveSaveItemIdentity="autosave-save-item-identity",A.AutoSaveUpdateItem="autosave-update-item",A.AutoSaveUpdateItemSpg="autosave-update-item-spg",A.AutoSaveUpdateItemCreditCard="autosave-update-item-credit-card",A.AutoSaveUpdateItemIdentity="autosave-update-item-identity",A.AutoSaveUpdateItem2fa="autosave-update-item-2fa",A.AutoSaveEditItem="autosave-edit-item",A.AutoSaveDismiss="autosave-dismiss",A.SaveDialogSaveItem="save-dialog-save-item",A.SaveDialogUpdateItem="save-dialog-update-item"})(Bs||(Bs={}));var ezj=async(A,j)=>PAA(A.session,j);var tzj=3,L1=10,rzj=L1*10,laA=(A,j)=>async e=>aA.sendMsgA(A.session,e,j),azj=(A,j,e)=>{let t=async(r=0)=>{let a=await aA.receiveMsgA(A.session,j,e);if(a?.msga)return a.msga;if(r>=L1)throw new Error("receiveMsgA timed out");return await Pn(1e3),t(r+1)};return t},nzj=(A,j,e)=>async t=>aA.sendMsgB(A.session,t,j,e),caA=(A,j)=>{let e=async(t=0)=>{let r=await aA.receiveMsgB(A.session,j);if(r?.msgb)return r.msgb;if(t===rzj)throw new Error("receiveMsgB timed out");return await Pn(1e3),e(t+1)};return e},daA=(A,j)=>async e=>aA.sendTagA(A.session,e,j),ozj=(A,j,e)=>{let t=async(r=0)=>{let a=await aA.receiveTagA(A.session,j,e);if(a?.taga)return a.taga;if(r===L1)throw new Error("receiveTagA timed out");return await Pn(1e3),t(r+1)};return t},izj=(A,j,e)=>async t=>aA.sendTagB(A.session,t,j,e),kaA=(A,j)=>{let e=async(t=0)=>{let r=await aA.receiveTagB(A.session,j);if(r?.tagb)return r.tagb;if(t===L1)throw new Error("receiveTagB timed out");return await Pn(1e3),e(t+1)};return e},szj=(A,j,e)=>{let t=async(r=0)=>{let a=await aA.receiveSharedCredentialBundle(A.session,e,j);if(a)return a;if(r===L1)throw new Error("receiveSharedCredentials timed out");return await Pn(1e3),t(r+1)};return t},uaA=(A,j)=>async e=>aA.shareCredentialBundle(A.session,j,e);var lzj=async A=>(await RAA(A.session)).acl,czj=async(A,j)=>DAA(A.session,{acl:j});var dzj=async A=>{let j=await Rp.generate(),e=PB.pipe(zf).encode(await j.exportSensitiveJwk());await KAA(A.session,A.config.host,{dvrPrivateKey:e})},kzj=async A=>MAA(A.session),uzj=async A=>NAA(A.session),Ezj=100,EaA=async(A,j,e,t,r)=>{let a=Jo(t,Ezj),n=Ad(t),o=0;for(let i of a){o+=Ad(i);let s={scope:r,contentVersion:e,isFinal:o===n,vaultUuid:j,snapshots:i};await LAA(A.session,s)}},pzj=async(A,j,e,t)=>{if(!A.account||!A.accountOverview||!A.accountOverview.vaults||!z1(A.accountOverview)||!A.accountOverview.vaults.some(i=>i.snapshotContentVersion===void 0||i.snapshotContentVersion<i.contentVersion))return;let a;try{let i=await A.dvrPubKey;if(i!==void 0)a=i;else return}catch{return}let n=A.account?.hasBackOfficeFeature.itemsInWrongAccountPolicy,o=(await NA.getReportingPolicyWrapper(A)).allowedEmailDomains;for(await g1();;){let i;try{i=await NA.getVaultReportingSync(A)}catch(m){console.error("Error retrieving vault reporting assignment",m);break}if(i===void 0)break;let s=await e(A,i.vaultUuid,{mustReload:!0});if(s===void 0)break;let l=await t(A,s);if(i.items?.length===0)continue;let c=i.items===void 0?l:l.filter(m=>i?.items?.includes(m.uuid)),k;try{k=await NA.generateWatchtowerReportForItems(c,!0,n,o)}catch(m){console.error("Error generating Watchtower reports on vault items",m);break}let u=await Promise.all(c.map(async m=>{let F=k[m.uuid],S=F!==void 0?NA.toWatchtowerReportForApi(F):void 0,G=await Q_(m,o,S);return a.encrypt(G)}));try{await EaA(A,s.uuid,s.contentVersion,u,$F.Full)}catch(m){console.error("Error saving vault item snapshots",m);break}j&&await q.wait(1e3)}h1()},mzj=async(A,j,e,t,r)=>{if(!A.account||!A.accountOverview||!A.dvrPubKey)return;let a;try{let l=await A.dvrPubKey;if(l!==void 0)a=l;else return}catch{return}let n=A.account?.hasBackOfficeFeature.itemsInWrongAccountPolicy;if(!($jA.includes(j.vault.type)&&z1(A.accountOverview)))return;let o;try{o=NA.toWatchtowerReportForApi(r??await NA.generateWatchtowerReportForItem(j,!0,n,t))}catch(l){console.error("Error generating Watchtower report on vault item",l);return}let i=await Q_(j,t,o),s=await a.encrypt(i);try{await EaA(A,j.vault.uuid,e,[s],$F.Patch)}catch(l){console.error("Error saving vault item snapshots",l)}},z1=A=>!A||!A.detailedVaultReporting?!1:A.detailedVaultReporting.isEnabled&&Uf===A.detailedVaultReporting.serverItemSnapshotPayloadVersion;var Bzj=async A=>PjA(A.session).then(async j=>j);var Pa=J(tA());var vx=class{constructor(j,e,t){this.uuid=j,this.recoveryKeyUuid=e,this.policy=t}};(function(A){let j;(function(a){a.V1="1"})(j=A.SpecVersion||(A.SpecVersion={}));let e;(function(a){a.PaperKey="PAPER_KEY"})(e=A.Feature||(A.Feature={}));let t;(function(a){a.Email="EMAIL",a.CustomerSupport="CUSTOMER_SUPPORT"})(t=A.UserVerification||(A.UserVerification={}));let r;(function(a){a.Self="SELF"})(r=A.Custody||(A.Custody={})),A.newForRecoveryCode=()=>({feature:e.PaperKey,specVersion:j.V1,custody:r.Self,configuration:{userVerification:[t.Email,t.CustomerSupport],delaySecs:0}}),A.Codec=Pa.exact(Pa.type({feature:Pa.string,specVersion:Pa.string,custody:Pa.string,configuration:Pa.exact(Pa.type({userVerification:Pa.array(Pa.string),delaySecs:Pa.number}))}))})(vx||(vx={}));var uEt=Pa.exact(Pa.type({uuid:Pa.string,label:Pa.union([Pa.string,Pa.null]),state:Pa.string,enc:Pa.string,encryptedBy:Pa.string,cryptoVersion:Pa.string,verifierParam:Pa.string,createdAt:Pa.string,updatedAt:Pa.string})),uH=class{constructor(j,e){this.policy=j,this.keyDetails=e}},cm=class{constructor(j,e,t,r,a,n){this.uuid=j,this.policyUuid=e,this.state=t,this.createdAt=r,this.updatedAt=a,this.expiresAt=n}};cm.fromParts=A=>new cm(A.uuid,A.policyUuid,hzj(cm.KnownState,A.state),A.createdAt,A.updatedAt,A.expiresAt);(function(A){let j;(function(e){e.KeyVerifierAccepted="KEY_VERIFIER_ACCEPTED",e.Aborted="ABORTED",e.EmailVerificationPending="EMAIL_VERIFICATION_PENDING",e.MaterialReleased="MATERIAL_RELEASED"})(j=A.KnownState||(A.KnownState={}))})(cm||(cm={}));var gzj=A=>{let j=Object.values(A);return e=>j.includes(e)},hzj=(A,j)=>gzj(A)(j)?L7(j):cc(j);var qzj=async(A,j,e,t)=>{let[r,a]=await Promise.all([e.encryptSelfAndKeyset(t),e.exportVerifier()]);await aA.createRecoveryKey(A.session,{uuid:e.kid,label:j,enc:Aj(Qe(r.encRecoveryKey)),encryptedBy:r.encRecoveryKey.kid,cryptoVersion:e.version,verifierParam:Aj(Qe(a))});let n=vx.newForRecoveryCode();await aA.createRecoveryPolicy(A.session,{recoveryKeyUuid:e.kid,...n});let o=await aA.addRecoverableMaterial(A.session,e.kid,{encryptedKeyMaterial:Aj(Qe(r.encKeysetSymKey))}),i=await aA.getRecoveryKey(A.session,e.kid).then(s=>{let l=ej(s.enc);return cj(l,Ne.pipe(Fa)).unwrap()});await e.checkIntegrity(t,r.encKeysetSymKey,o.integrity,i),await aA.activateRecoveryKey(A.session,e.kid)},xzj=async(A,j)=>{await aA.deleteRecoveryKey(A.session,j)},vzj=async(A,j,e)=>aA.getRecoveryPolicies(A.session,j,e).then(t=>t.policyUuids),BTA=async(A,j)=>{let e=await aA.getRecoveryPolicy(A.session,j);return new vx(j,e.recoveryKeyUuid,e)},Gzj=async(A,j)=>{let e=await BTA(A,j),t=await gTA(A,e.recoveryKeyUuid);return new uH(e,t)},gTA=async(A,j)=>aA.getRecoveryKey(A.session,j),fzj=async A=>(await aA.getRecoveryAttempts(A.session).then(j=>j.recoveryAttempts)).map(cm.fromParts);var Fzj=6,EH=class{constructor(j,e,t){this.startEmailVerification=async r=>{try{let a=await aA.recoveryKeyStartEmailVerification(this.session,!1,{email:r});return L7(new pH(this.key,this.session,a.sentToEmail))}catch(a){if(rd(a)&&a.reason===ts.maximumAttemptsReached)return cc(V1.ResendLimitReached);throw a}},this.proceedToVerified=async r=>new U1(this.key,this.session,r),this.key=j,this.session=e,this.state=t}},pH=class{constructor(j,e,t){this.verifyEmail=async r=>{try{await aA.recoveryKeySubmitEmailVerification(this.session,{emailVerificationChallenge:r})}catch(n){if(rd(n))switch(n.reason){case ts.incorrectValue:return cc(lb.IncorrectCode);case ts.maximumAttemptsReached:return cc(lb.AttemptLimitReached);case ts.expired:return cc(lb.CodeExpired);case void 0:default:throw n}else throw n}let a=await aA.recoveryKeyGetAttemptStatus(this.session);if(a.attemptState!=="ID_VERIFICATION_COMPLETE")throw new Error(`recovery attempt not in expected state (${a.attemptState})`);return L7(new U1(this.key,this.session,a.aux))},this.resendEmailVerificationCode=async()=>{try{await aA.recoveryKeyStartEmailVerification(this.session,!0,{email:void 0})}catch(r){if(rd(r)&&r.reason===ts.maximumAttemptsReached)return cc(V1.ResendLimitReached);throw r}return L7(void 0)},this.key=j,this.session=e,this.emailToDisplay=t}},U1=class{constructor(j,e,t){this.decryptKeyset=async(r,a)=>{let n=await this.key.decryptKeysetSymKey(r).then(async s=>$i.newFromJwkSymKey(s)),[o,i]=await Promise.all([wl.decryptWithKey(n,{pubKey:a.pubKey,encPriKey:a.encPriKey}),T_(n,{pubKey:a.spubKey,encPriKey:a.encSPriKey})]);return new Ya(a.uuid,n,o,i,a.sn)},this.encryptKeyset=async(r,a)=>a.encryptWithKey(r),this.completeRecovery=async(r,a,n,o,i,s)=>{let l={...o,v:await a.srpx.verifier(bi.fromString(o.method).group).then(async D=>D.exportServerHex())},{encMaterial:c,encKeyset:k}=await aA.recoveryKeyGetMaterial(this.session).then(async D=>{let y=ej(D.encryptedKeyMaterial);return{encMaterial:cj(y,Ne.pipe(Fa)).unwrap(),encKeyset:D.encryptedKeyset}}),u=await this.decryptKeyset(c,k),m=await this.encryptKeyset(a.auk,u),F=s?await s.encryptCredentialBundle(a):void 0,{sessionUuid:S,signInTokenDetails:G,email:x,userUuid:R,accountUuid:P}=await aA.recoveryKeyPostRegistration(this.session,{accountKeyFormat:n.format.toString(),accountKeyUuid:n.id,language:i,device:r,keyset:m,userAuth:l,deviceCredentials:F?{v:2,encCredentials:F}:void 0});return new mH(S,G?.token,a,{email:x,userUuid:R,accountUuid:P},n)},this.key=j,this.session=e,this.aux=t}},mH=class{constructor(j,e,t,r,a){this.signIn=async(n,o)=>{n.session.clearSessionKey(),n.session.setSessionUuid(this.sessionUuid);let i=await aA.getAuthMethods(n.session,void 0,this.details.userUuid);if(H1(i.authMethods))throw new Error("Not implemented");if(M1(i.authMethods)){if(this.signInToken===void 0)throw new Error("Missing sign in token");return ZtA(n,{email:this.details.email,userUuid:this.details.userUuid,credentialBundle:this.credentialBundle,secretKeyFormat:this.secretKey.unwrapFormatAsKnown(),secretKeyUuid:this.secretKey.id},this.signInToken,o)}if(cH(i.authMethods))return mx(n,{email:this.details.email,muk:await this.credentialBundle.auk.exportJwk(),secretKey:this.secretKey.exportSensitiveReadableString(),srpX:this.credentialBundle.srpx.exportHex()},o);throw new Error("Could not auth with any auth methods")},this.sessionUuid=j,this.signInToken=e,this.credentialBundle=t,this.details=r,this.secretKey=a}},bzj=async(A,j)=>{let e;try{e=await aA.recoveryKeyBeginAttempt(A.session,{recoveryKeyUuid:j.kid})}catch(k){if(rd(k)&&k.code===sc.notFound)return cc(Gx.NotFound);throw k}let{sessionUuid:t,cryptoVersion:r}=e;if(r!==hl.V1)throw new Error("unknown crypto version");let a=await j.toRecoveryKey(r),n=await a.beginAuth();A.session.setSessionUuid(t);let o=await aA.recoveryKeyAuthV1Begin(A.session,{bigA:n.bigAhex}),i=await n.recieveBigBhex(o.bigB),s;try{s=await aA.recoveryKeyAuthV1ConfirmKey(A.session,{clientHash:i.clientHash})}catch(k){if(rd(k)){if(k.code===sc.unauthorized)return cc(Gx.AuthenticationFailed);switch(k.reason){case ts.recentRecoveryAborted:return cc(Gx.RecentAbortedAttempt);case ts.recentLogin:return cc(Gx.RecentLogin);case void 0:default:throw k}}else throw k}let l=await i.recieveServerHash(s.serverHash);A.session.setSessionUuid(t),await A.session.importSessionKey(l.rawKey),A.session.requestId=1;let c=await aA.recoveryKeyGetAttemptStatus(A.session);return L7(new EH(a,A.session,c))},Gx;(function(A){A.RecentAbortedAttempt="RECENT_ABORTED_ATTEMPT",A.RecentLogin="RECENT_LOGIN",A.AuthenticationFailed="AUTHENTICATION_FAILED",A.NotFound="NOT_FOUND"})(Gx||(Gx={}));var lb;(function(A){A.IncorrectCode="INCORRECT_CODE",A.AttemptLimitReached="ATTEMPT_LIMIT_REACHED",A.CodeExpired="CODE_EXPIRED"})(lb||(lb={}));var V1;(function(A){A.ResendLimitReached="RESEND_LIMIT_REACHED"})(V1||(V1={}));var yzj=async(A,j)=>{let e=(()=>{if(!(!A.account||!A.user)&&A.account.uuid===j.accountUuid&&A.user.uuid===j.userUuid&&A.user.secretKey?.isTrustedDeviceFormat())return A.session.auth?.srpX})();return{requestId:j.requestId,srpx:e}};var $zj=A=>RjA(A.session),wzj=A=>DjA(A.session),Izj=A=>TjA(A.session),Pzj=(A,j)=>CjA(A.session,j),Ozj=(A,j)=>_jA(A.session,j),Rzj=(A,j,e)=>SjA(A.session,j,e),Dzj=(A,j=!1)=>HjA(A.session,j),Tzj=(A,j)=>MjA(A.session,j),Czj=(A,j,e)=>KjA(A.session,j,e),_zj=(A,j,e)=>hTA(A,{[j]:e}),hTA=(A,j)=>NjA(A.session,j),Szj=async A=>(await LjA(A.session)).certificate;var Hzj=async(A,j)=>zjA(A.session,j),Mzj=async(A,j)=>UjA(A.session,j);var Kzj=A=>!!(A.user?.hasPermission(xA.Permission.BelongsToOwnersGroup)||A.user?.hasPermission(xA.Permission.BelongsToExternalAccountManagersGroup)),Nzj=A=>!!(A.user?.hasPermission(xA.Permission.BelongsToOwnersGroup)||A.user?.hasPermission(xA.Permission.BelongsToAdminsGroup)||A.user?.hasPermission(xA.Permission.BelongsToExternalAccountManagersGroup)),Lzj=A=>!!(A.user?.hasPermission(xA.Permission.BelongsToOwnersGroup)||A.user?.hasPermission(xA.Permission.BelongsToAdminsGroup)||A.user?.hasPermission(xA.Permission.BelongsToSecurityGroup)||A.user?.hasPermission(xA.Permission.BelongsToExternalAccountManagersGroup)),zzj=A=>!!(A.user?.hasPermission(xA.Permission.BelongsToSecurityGroup)||A.user?.hasPermission(xA.Permission.BelongsToOwnersGroup)||A.user?.hasPermission(xA.Permission.BelongsToExternalAccountManagersGroup)),Uzj=A=>!!(A.user?.hasPermission(xA.Permission.BelongsToSecurityGroup)||A.user?.hasPermission(xA.Permission.BelongsToOwnersGroup)||A.user?.hasPermission(xA.Permission.BelongsToAdminsGroup));var Vzj=async(A,j)=>XjA(A.session,j),Xzj=async(A,j)=>JjA(A.session,j);var Jzj=async A=>YjA(A.session),Wzj=async A=>QjA(A.session);var Qzj=async A=>AeA(A.session);var qTA=[{name:"North America",templateUuid:"9ac286b6-f417-43d4-9d43-04198fdb4ebc",childAccounts:[{uuid:"5DGEKT3CAFF9VGQGPGF025WY3L",name:"North America",state:ti.Active,domain:"northamerica",country:"US",region:"CA",startedManagingDate:"2025-06-23T16:18:09Z"},{uuid:"4DGGKT3CAAF9VGTGJLF014WY7L",name:"Mexico",state:ti.Active,domain:"mexico",country:"MX",region:"VA",startedManagingDate:"2025-02-08T16:18:09Z"},{uuid:"1DRGKH0CNAF9VULGJWF418WV7X",name:"Canada",state:ti.Active,domain:"canada",country:"CA",region:"NA",startedManagingDate:"2025-05-11T16:18:09Z"}],pagination:{page:1,itemsPerPage:10,totalPages:1,totalItems:5}},{name:"Europe",templateUuid:"9684fcb0-5eba-4c5c-b7fa-7d68766c0cfd",childAccounts:[{uuid:"5DGEKT3CAFF9VGQGPGF025WY3L",name:"France",state:ti.Active,domain:"france",country:"FR",region:"EU",startedManagingDate:"2025-06-23T16:18:09Z"},{uuid:"4DGGKT3CAAF9VGTGJLF014WY7L",name:"European Union",state:ti.Active,domain:"europeanunion",country:"CH",region:"EU",startedManagingDate:"2025-02-08T16:18:09Z"},{uuid:"1DRGKH0CNAF9VULGJWF418WV7X",name:"Spain",state:ti.Active,domain:"spain",country:"ES",region:"EU",startedManagingDate:"2025-05-11T16:18:09Z"}],pagination:{page:1,itemsPerPage:10,totalPages:1,totalItems:5}},{name:"Asia",templateUuid:"8ec28d78-62ec-456f-92c3-d6f6e5b38003",childAccounts:[{uuid:"5DGEKT3CAFF9VGQGPGF025WY3L",name:"Japan",state:ti.Active,domain:"japan",country:"JP",region:"AS",startedManagingDate:"2025-06-23T16:18:09Z"},{uuid:"4DGGKT3CAAF9VGTGJLF014WY7L",name:"South Korea",state:ti.Active,domain:"southkorea",country:"SK",region:"AS",startedManagingDate:"2025-02-08T16:18:09Z"},{uuid:"1DRGKH0CNAF9VULGJWF418WV7X",name:"Taiwan",state:ti.Active,domain:"taiwan",country:"TW",region:"AS",startedManagingDate:"2025-05-11T16:18:09Z"}],pagination:{page:1,itemsPerPage:10,totalPages:1,totalItems:5}}];var Yzj=async(A,j)=>await aA.getPolicyTemplates(A.session,j),Zzj=async(A,j)=>aA.getPolicyTemplatePolicies(A.session,j),AUj=async(A,j)=>aA.createPolicyTemplate(A.session,j),jUj=async(A,j,e)=>(A.session,{name:j,templateUuid:e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),numChildAccounts:0}),eUj=async(A,j,e)=>{let t=Object.keys(e).map(r=>{let a=e[r];return aA.updateTemplatePolicyDefinition(A.session,{policyTemplateUuid:j,policyContext:zC[r],policyName:r,definition:a,enforced:!0})});return await Promise.all(t)},tUj=async(A,j,e)=>{let t=Object.keys(e).map(r=>{let a=e[r];return aA.removePolicyTemplateDefinition(A.session,{policyTemplateUuid:j,policyContext:zC[r],policyName:r,definition:a,enforced:!0})});return await Promise.all(t)},rUj=async(A,j)=>qTA.find(e=>e.templateUuid===j.templateUuid)??{name:"New template",templateUuid:"new-template-uuid",childAccounts:[{uuid:"5DGEKT3CAFF9VGQGPGF025WY3L",name:`Linked Child Account for ${A.account?.name}`,state:ti.Active,domain:"northamerica",country:"US",region:"CA",startedManagingDate:"2025-06-23T16:18:09Z"}],pagination:{page:1,itemsPerPage:10,totalItems:0,totalPages:1}};var Wj;function J1(A){let j=Wj.__externref_table_alloc();return Wj.__wbindgen_export_2.set(j,A),j}function X1(A,j){try{return A.apply(this,j)}catch(e){let t=J1(e);Wj.__wbindgen_exn_store(t)}}var RTA=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&RTA.decode();var W1=null;function haA(){return(W1===null||W1.byteLength===0)&&(W1=new Uint8Array(Wj.memory.buffer)),W1}function Q1(A,j){return A=A>>>0,RTA.decode(haA().subarray(A,A+j))}function BH(A){return A==null}var Ml=0;function yc(A,j){let e=j(A.length*1,1)>>>0;return haA().set(A,e/1),Ml=A.length,e}function dm(A){let j=Wj.__wbindgen_export_2.get(A);return Wj.__externref_table_dealloc(A),j}function Pd(A,j){return A=A>>>0,haA().subarray(A/1,A/1+j)}function Y1(A,j){if(!(A instanceof j))throw new Error(`expected instance of ${j.name}`)}var JEt=Object.freeze({WrongSize:0,0:"WrongSize"}),WEt=Object.freeze({TooLarge:0,0:"TooLarge"}),xTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_decryptionerror_free(A>>>0,1)),paA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,xTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,xTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_decryptionerror_free(j,0)}},vTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_protocolerror_free(A>>>0,1)),maA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,vTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,vTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_protocolerror_free(j,0)}},GTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmchannelseed_free(A>>>0,1)),gH=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,GTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,GTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmchannelseed_free(j,0)}static new(j){let e=yc(j,Wj.__wbindgen_malloc),t=Ml,r=Wj.wasmchannelseed_new(e,t);return A.__wrap(r)}derive_auth(){let j,e;try{let t=Wj.wasmchannelseed_derive_auth(this.__wbg_ptr);return j=t[0],e=t[1],Q1(t[0],t[1])}finally{Wj.__wbindgen_free(j,e,1)}}derive_uuid(){let j,e;try{let t=Wj.wasmchannelseed_derive_uuid(this.__wbg_ptr);return j=t[0],e=t[1],Q1(t[0],t[1])}finally{Wj.__wbindgen_free(j,e,1)}}},fTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmhandshakepsk_free(A>>>0,1)),cb=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,fTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,fTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmhandshakepsk_free(j,0)}static from_bytes(j){let e=yc(j,Wj.__wbindgen_malloc),t=Ml,r=Wj.wasmhandshakepsk_from_bytes(e,t);if(r[2])throw dm(r[1]);return A.__wrap(r[0])}static generate(){let j=Wj.wasmhandshakepsk_generate();return A.__wrap(j)}to_bytes(){let j=Wj.wasmhandshakepsk_to_bytes(this.__wbg_ptr);var e=Pd(j[0],j[1]).slice();return Wj.__wbindgen_free(j[0],j[1]*1,1),e}},FTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmpairingcredentials_free(A>>>0,1)),Z1=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,FTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,FTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmpairingcredentials_free(j,0)}static generate(){let j=Wj.wasmpairingcredentials_generate();return A.__wrap(j)}public(){let j=Wj.wasmpairingcredentials_public(this.__wbg_ptr);var e=Pd(j[0],j[1]).slice();return Wj.__wbindgen_free(j[0],j[1]*1,1),e}into_storage(){let j=this.__destroy_into_raw(),e=Wj.wasmpairingcredentials_into_storage(j);var t=Pd(e[0],e[1]).slice();return Wj.__wbindgen_free(e[0],e[1]*1,1),t}},bTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmpairingsessionstarterexistingdevice_free(A>>>0,1)),hH=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,bTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,bTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmpairingsessionstarterexistingdevice_free(j,0)}static join(j,e,t){Y1(j,Mg);var r=j.__destroy_into_raw();Y1(e,AP);var a=e.__destroy_into_raw();let n=yc(t,Wj.__wbindgen_malloc),o=Ml,i=Wj.wasmpairingsessionstarterexistingdevice_join(r,a,n,o);return A.__wrap(i)}receive_hello(j){let e=yc(j,Wj.__wbindgen_malloc),t=Ml,r=Wj.wasmpairingsessionstarterexistingdevice_receive_hello(this.__wbg_ptr,e,t);if(r[3])throw dm(r[2]);var a=Pd(r[0],r[1]).slice();return Wj.__wbindgen_free(r[0],r[1]*1,1),a}create_reply(j){let e=this.__destroy_into_raw(),t=yc(j,Wj.__wbindgen_malloc),r=Ml,a=Wj.wasmpairingsessionstarterexistingdevice_create_reply(e,t,r);return BaA.__wrap(a)}},yTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmpairingsessionstarternewdevice_free(A>>>0,1)),db=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,yTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,yTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmpairingsessionstarternewdevice_free(j,0)}static init(j,e){Y1(j,Mg);var t=j.__destroy_into_raw();let r=yc(e,Wj.__wbindgen_malloc),a=Ml,n=Wj.wasmpairingsessionstarternewdevice_init(t,r,a);return A.__wrap(n)}create_hello(j){let e=yc(j,Wj.__wbindgen_malloc),t=Ml,r=Wj.wasmpairingsessionstarternewdevice_create_hello(this.__wbg_ptr,e,t);if(r[3])throw dm(r[2]);var a=Pd(r[0],r[1]).slice();return Wj.__wbindgen_free(r[0],r[1]*1,1),a}receive_reply(j){let e=this.__destroy_into_raw(),t=yc(j,Wj.__wbindgen_malloc),r=Ml,a=Wj.wasmpairingsessionstarternewdevice_receive_reply(e,t,r);if(a[2])throw dm(a[1]);return gaA.__wrap(a[0])}shared_key(){let j=Wj.wasmpairingsessionstarternewdevice_shared_key(this.__wbg_ptr);return cb.__wrap(j)}},$TA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmpairingsetupcredentials_free(A>>>0,1)),Mg=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,$TA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,$TA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmpairingsetupcredentials_free(j,0)}static generate(){let j=Wj.wasmpairingsetupcredentials_generate();return A.__wrap(j)}public(){let j=Wj.wasmpairingsetupcredentials_public(this.__wbg_ptr);return qH.__wrap(j)}},wTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmpeersetupcredentials_free(A>>>0,1)),AP=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,wTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,wTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmpeersetupcredentials_free(j,0)}static from_components(j,e){Y1(j,qH);var t=j.__destroy_into_raw();Y1(e,cb);var r=e.__destroy_into_raw();let a=Wj.wasmpeersetupcredentials_from_components(t,r);return A.__wrap(a)}},ITA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmpublichandshakekey_free(A>>>0,1)),qH=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,ITA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,ITA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmpublichandshakekey_free(j,0)}static from_bytes(j){let e=yc(j,Wj.__wbindgen_malloc),t=Ml,r=Wj.wasmpublichandshakekey_from_bytes(e,t);if(r[2])throw dm(r[1]);return A.__wrap(r[0])}bytes_for_encoding(){let j=Wj.wasmpublichandshakekey_bytes_for_encoding(this.__wbg_ptr);var e=Pd(j[0],j[1]).slice();return Wj.__wbindgen_free(j[0],j[1]*1,1),e}},PTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmsetuptransportsessionexistingdevice_free(A>>>0,1)),BaA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,PTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,PTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmsetuptransportsessionexistingdevice_free(j,0)}reply_msg(){let j=Wj.wasmsetuptransportsessionexistingdevice_reply_msg(this.__wbg_ptr);var e=Pd(j[0],j[1]).slice();return Wj.__wbindgen_free(j[0],j[1]*1,1),e}create_message_n(j){let e=yc(j,Wj.__wbindgen_malloc),t=Ml,r=Wj.wasmsetuptransportsessionexistingdevice_create_message_n(this.__wbg_ptr,e,t);if(r[3])throw dm(r[2]);var a=Pd(r[0],r[1]).slice();return Wj.__wbindgen_free(r[0],r[1]*1,1),a}receive_message_n(j){let e=yc(j,Wj.__wbindgen_malloc),t=Ml,r=Wj.wasmsetuptransportsessionexistingdevice_receive_message_n(this.__wbg_ptr,e,t);if(r[3])throw dm(r[2]);var a=Pd(r[0],r[1]).slice();return Wj.__wbindgen_free(r[0],r[1]*1,1),a}},OTA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>Wj.__wbg_wasmsetuptransportsessionnewdevice_free(A>>>0,1)),gaA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,OTA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,OTA.unregister(this),j}free(){let j=this.__destroy_into_raw();Wj.__wbg_wasmsetuptransportsessionnewdevice_free(j,0)}create_message_n(j){let e=yc(j,Wj.__wbindgen_malloc),t=Ml,r=Wj.wasmsetuptransportsessionnewdevice_create_message_n(this.__wbg_ptr,e,t);if(r[3])throw dm(r[2]);var a=Pd(r[0],r[1]).slice();return Wj.__wbindgen_free(r[0],r[1]*1,1),a}receive_message_n(j){let e=yc(j,Wj.__wbindgen_malloc),t=Ml,r=Wj.wasmsetuptransportsessionnewdevice_receive_message_n(this.__wbg_ptr,e,t);if(r[3])throw dm(r[2]);var a=Pd(r[0],r[1]).slice();return Wj.__wbindgen_free(r[0],r[1]*1,1),a}get_reply(){let j=Wj.wasmsetuptransportsessionnewdevice_get_reply(this.__wbg_ptr);var e=Pd(j[0],j[1]).slice();return Wj.__wbindgen_free(j[0],j[1]*1,1),e}};async function aUj(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function nUj(){let A={};return A.wbg={},A.wbg.__wbg_buffer_609cc3eee51ed158=function(j){return j.buffer},A.wbg.__wbg_call_672a4d21634d4a24=function(){return X1(function(j,e){return j.call(e)},arguments)},A.wbg.__wbg_call_7cccdd69e0791ae2=function(){return X1(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_crypto_574e78ad8b13b65f=function(j){return j.crypto},A.wbg.__wbg_decryptionerror_new=function(j){return paA.__wrap(j)},A.wbg.__wbg_getRandomValues_b8f5dbd5f3995a9e=function(){return X1(function(j,e){j.getRandomValues(e)},arguments)},A.wbg.__wbg_msCrypto_a61aeb35a24c1329=function(j){return j.msCrypto},A.wbg.__wbg_new_a12002a7f91c75be=function(j){return new Uint8Array(j)},A.wbg.__wbg_newnoargs_105ed471475aaf50=function(j,e){return new Function(Q1(j,e))},A.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(j,e,t){return new Uint8Array(j,e>>>0,t>>>0)},A.wbg.__wbg_newwithlength_a381634e90c276d4=function(j){return new Uint8Array(j>>>0)},A.wbg.__wbg_node_905d3e251edff8a2=function(j){return j.node},A.wbg.__wbg_process_dc0fbacc7c1c06f7=function(j){return j.process},A.wbg.__wbg_protocolerror_new=function(j){return maA.__wrap(j)},A.wbg.__wbg_randomFillSync_ac0988aba3254290=function(){return X1(function(j,e){j.randomFillSync(e)},arguments)},A.wbg.__wbg_require_60cc747a6bc5215a=function(){return X1(function(){return module.require},arguments)},A.wbg.__wbg_set_65595bdd868b3009=function(j,e,t){j.set(e,t>>>0)},A.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){let j=typeof global>"u"?null:global;return BH(j)?0:J1(j)},A.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){let j=typeof globalThis>"u"?null:globalThis;return BH(j)?0:J1(j)},A.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){let j=typeof self>"u"?null:self;return BH(j)?0:J1(j)},A.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){let j=typeof window>"u"?null:window;return BH(j)?0:J1(j)},A.wbg.__wbg_subarray_aa9065fa9dc5df96=function(j,e,t){return j.subarray(e>>>0,t>>>0)},A.wbg.__wbg_versions_c01dfd4722a88165=function(j){return j.versions},A.wbg.__wbindgen_init_externref_table=function(){let j=Wj.__wbindgen_export_2,e=j.grow(4);j.set(0,void 0),j.set(e+0,void 0),j.set(e+1,null),j.set(e+2,!0),j.set(e+3,!1)},A.wbg.__wbindgen_is_function=function(j){return typeof j=="function"},A.wbg.__wbindgen_is_object=function(j){let e=j;return typeof e=="object"&&e!==null},A.wbg.__wbindgen_is_string=function(j){return typeof j=="string"},A.wbg.__wbindgen_is_undefined=function(j){return j===void 0},A.wbg.__wbindgen_memory=function(){return Wj.memory},A.wbg.__wbindgen_number_new=function(j){return j},A.wbg.__wbindgen_string_new=function(j,e){return Q1(j,e)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(Q1(j,e))},A}function oUj(A,j){return Wj=A.exports,DTA.__wbindgen_wasm_module=j,W1=null,Wj.__wbindgen_start(),Wj}async function DTA(A){if(Wj!==void 0)return Wj;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof A>"u"&&(A=new URL("b5_mycelium_bg.wasm",import.meta.url));let j=nUj();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await aUj(await A,j);return oUj(e,t)}var TTA=DTA;var qo=J(tA());var _TA,kb;(function(A){A[A.One=1]="One"})(kb||(kb={}));var ub;(function(A){A[A.RESERVED=0]="RESERVED",A[A.AUTHORIZED_DEVICE_DRIVEN=1]="AUTHORIZED_DEVICE_DRIVEN",A[A.UNAUTHORIZED_DEVICE_DRIVEN=2]="UNAUTHORIZED_DEVICE_DRIVEN"})(ub||(ub={}));var km=class{constructor(j){this.__crypto_internal={inner:()=>this.inner},this.inner=j,this.publicIdentity=j.public()}};_TA=km;km.generate=async()=>(await sUj(),new _TA(Mg.generate()));var qaA={"1password.com":1,"1password.eu":2,"1password.ca":3,"b5local.com":4,"b5dev.com":5,"b5dev.eu":6,"b5dev.ca":7,"b5test.com":8,"b5test.eu":9,"b5test.ca":10,"b5rev.com":11,"b5staging.com":12,"ent.1password.com":13},vH=(A,j)=>{let e=A.split(".");if(e.length<3)throw new Error("current window domain needs more than three parts to be valid");let t=e.slice(-2).join(".");t==="1password.com"&&e.slice(-3).join(".")==="ent.1password.com"&&(t="ent.1password.com");let r=qaA[t];if(r===void 0)throw new Error("Invalid domain");switch(r){case qaA["b5local.com"]:{j=j||443;let a=new ArrayBuffer(5),n=new DataView(a);return n.setInt8(0,r),n.setUint32(1,j,!0),new Uint8Array(a)}case qaA["b5rev.com"]:{let a=Number(e.slice(-3,-2).join(".")),n=new ArrayBuffer(5),o=new DataView(n);return o.setInt8(0,r),o.setUint32(1,a,!0),new Uint8Array(n)}default:return new Uint8Array([r])}};var STA=qo.type({uuid:qo.string,name:qo.string,os_name:qo.string,os_version:qo.string,client_name:qo.string,client_version:qo.string,avatar_url:qo.string},"MyceliumPartner"),HTA=qo.type({protocol_message:qo.type({confirmation_number:qo.number,unauthorized_device_data:STA})},"MyceliumUnauthorizedPartnerAndConfirmationNumber"),ZEt=qo.type({secret:qo.string},"LinkingMessage"),Apt=qo.type({device:STA,capabilities:qo.array(qo.string)},"MyceliumHelloMsg"),GH=A=>({device:A,capabilities:["SIGN_IN"]}),sUj=mq(TTA,async()=>{let{default:A}=await Promise.resolve().then(()=>J(CTA()));return A});var MTA,KTA,lUj=Ij("1P_QR_AUTHORIZED_DRIVEN_V1"),jP=class{constructor(j,e){this.createHello=t=>this.starter.create_hello(Qe(GH(t))),this.createQRData=(t,r,a)=>{if(t.length!==16)throw new Error("invalid channel seed");return In([new Uint8Array([ub.AUTHORIZED_DEVICE_DRIVEN,kb.One]),t,this.pairingSetupCredentials.publicIdentity.bytes_for_encoding(),this.starter.shared_key().to_bytes(),vH(r,a)])},this.receiveJoinResponse=t=>eP.__crypto_internal.fromTransport(this.starter.receive_reply(t)),this.pairingSetupCredentials=j,this.starter=e}};MTA=jP;jP.generate=async()=>{let A=await km.generate(),j=db.init(A.__crypto_internal.inner(),lUj);return new MTA(A,j)};var eP=class{constructor(j){this.GetFinalState=async()=>await tP.__crypto_internal.fromJoinedForwardMyceliumState(this.messageTransport),this.messageTransport=j}};eP.__crypto_internal={fromTransport:A=>new eP(A)};var tP=class{constructor(j,e){this.decryptCredentials=t=>this.messageTransport.receive_message_n(t),this.messageTransport=j,this.pairingCredentials=e,this.msgC=this.messageTransport.create_message_n(this.pairingCredentials.publicIdentity.bytes_for_encoding())}};KTA=tP;tP.__crypto_internal={fromJoinedForwardMyceliumState:async A=>{let j=await km.generate();return new KTA(A,j)}};var LTA,zTA,UTA=Ij("1P_QR_UNAUTHORIZED_DRIVEN_V1"),cUj=10,dUj=99,fx=class{constructor(j,e){this.createHello=t=>this.starter.create_hello(Qe(GH(t))),this.receiveResponse=(t,r)=>new fH(this.starter,this.pairingSetupCredentials,t,r),this.pairingSetupCredentials=j,this.starter=e}};LTA=fx;fx.generate=async()=>{let A=await km.generate(),j=db.init(A.__crypto_internal.inner(),UTA);return new LTA(A,j)};var fH=class{constructor(j,e,t,r){if(this.createQrData=(a,n)=>In([new Uint8Array([ub.UNAUTHORIZED_DEVICE_DRIVEN,kb.One]),this.channelSeed,this.initialPairingCredentials.publicIdentity.bytes_for_encoding(),this.starter.shared_key().to_bytes(),vH(a,n)]),this.getPsk=()=>this.starter.shared_key(),this.getPubKey=()=>this.initialPairingCredentials.publicIdentity,this.readReply=a=>{let n=this.starter.receive_reply(a),o=n.get_reply();return[rP.__crypto_internal.fromTransport(n),o]},r.length!==16)throw new Error("invalid channel seed");this.starter=j,this.initialPairingCredentials=e,this.channelUuid=t,this.channelSeed=r}},rP=class{constructor(j){this.accountInfo=(e,t,r,a,n)=>{let o=Qe({account_name:e,uuid:t,avatar_filename:r,base_avatar_url:a,account_type:n}),i=this.messageTransport.create_message_n(o);return Eb.__crypto_internal.fromTransportAndMessageC(this.messageTransport,i)},this.messageTransport=j}};rP.__crypto_internal={fromTransport:A=>new rP(A)};var Eb=class{constructor(j,e){this.readMsgD=t=>{let r=this.messageTransport.receive_message_n(t);return pb.__crypto_internal.fromTransportAndMessageD(this.messageTransport,r)},this.messageTransport=j,this.messageC=e}};Eb.__crypto_internal={fromTransportAndMessageC:(A,j)=>new Eb(A,j)};var pb=class{constructor(j,e){this.getCodesToDisplayToUser=()=>{let t=this.partnerAndConfirmation.protocol_message.confirmation_number,r=NTA([t]),a=NTA([t,r]),n=[r,a,t].sort();return{unconfirmedPartner:this.partnerAndConfirmation.protocol_message.unauthorized_device_data,codeOptions:n}},this.userSelectCode=t=>{if(t!==this.partnerAndConfirmation.protocol_message.confirmation_number)throw new Error("incorrect choice");return aP.__crypto_internal.fromTransport(this.messageTransport)},this.messageTransport=j,this.partnerAndConfirmation=cj(e,Ne.pipe(HTA)).unwrap()}};pb.__crypto_internal={fromTransportAndMessageD:(A,j)=>new pb(A,j)};var aP=class{constructor(j){this.generateMessageE=e=>{let t={next_key:void 0,secret:e.secret};return this.messageTransport.create_message_n(Qe(t))},this.messageTransport=j}};aP.__crypto_internal={fromTransport:A=>new aP(A)};var NTA=A=>{for(let j=0;j<1e3;j++){let e=K4(1);if(!(e<cUj||e>dUj||A&&A.includes(e)))return e}throw new Error("potentially compromised csprng")},Fx=class{constructor(j){this.receiveHello=e=>this.starter.receive_hello(e),this.createReply=e=>[null,this.starter.create_reply(e).reply_msg()],this.starter=j}};zTA=Fx;Fx.generate=async(A,j)=>{let e=Mg.generate(),t=hH.join(e,AP.from_components(A,j),UTA);return new zTA(t)};var $u=J(tA());var ppt=$u.type({uuid:$u.string,name:$u.string,os_name:$u.string,os_version:$u.string,client_name:$u.string,client_version:$u.string,avatar_url:$u.string},"MyceliumPartner"),VTA=()=>{let A=q.config.device;if(A.name===void 0)throw new Error("Missing device name");if(A.osName===void 0)throw new Error("Missing device OS name");if(A.osVersion===void 0)throw new Error("Missing device OS version");if(A.avatar===void 0){if(A.userAgent===void 0)throw new Error("Missing user agent");let j=lD(A.userAgent);switch(j.name){case Qt.Brave:case Qt.Chrome:case Qt.Firefox:case Qt.Safari:case Qt.Opera:{A.avatar=j.name.toLowerCase()+".svg";break}case Qt.Edge:{A.avatar="edge.svg";break}case Qt.AndroidBrowser:case Qt.IE:case Qt.Other:case Qt.WebKit:default:A.avatar="chrome.svg"}}return{uuid:A.uuid,name:A.name,os_name:A.osName,os_version:A.osVersion,client_name:A.clientName,client_version:A.clientVersion,avatar_url:A.avatar}};var kUj="SECURE_REMOTE_AUTOFILL";async function uUj(A,j,e){let t=await aA.delegateSession(A,e,!1),r=rz(e.clientName);if(!r)return{error:"Invalid client name"};let a;try{a=parseInt(e.clientVersion,10)}catch{return{error:"Invalid client version"}}let n=vd.fromDelegatedSession(j,"en-US",{client:{shortCode:r,buildNum:a},deviceUuid:e.uuid},t),o=await fx.generate(),i=o.createHello(VTA()),s=aA.myceliumChannelStartV(n,Aj(i)),{channelUuid:l,channelSeed:c,initiatorAuth:k}=await s,u=q.base64urlToBytes(c),m=o.receiveResponse(l,u),F=m.getPubKey(),S=m.getPsk(),G=gH.new(u),x=G.derive_auth(),R=await aA.myceliumGetHelloU(n,G.derive_uuid(),x),P=await Fx.generate(F,S);P.receiveHello(q.base64urlToBytes(R.hello));let D=q.str2ab(JSON.stringify(kUj)),[y,h]=P.createReply(D),O=q.generateUUID(),Q=81104027,AA={uuid:O,clientName:"1Password Extension",clientVersion:Q.toString()},nA=await aA.delegateSession(A,AA,!1),bA=vd.fromDelegatedSession(j,"en-US",{client:{shortCode:Bk.OnePasswordExtension,buildNum:Q},deviceUuid:e.uuid},nA),{responderAuth:XA}=await aA.myceliumPutReplyU(bA,l,x,{deviceUuid:AA.uuid,reply:Aj(h)}),dj=await aA.myceliumGetReconnectTokenV(n,l,k),yA=await aA.myceliumGetReconnectTokenU(bA,l,XA);await aA.myceliumCloseChannelV(n,l,k);let tj=cb.generate(),LA=Z1.generate(),Qj=LA.public(),Oj=Z1.generate(),Ej=Oj.public(),Yj={myceliumKeys:{psk:Aj(tj.to_bytes()),localKeypair:Aj(LA.into_storage()),remotePubKey:Aj(Ej)}},Tj={reconnectToken:yA.reconnectToken,myceliumKeys:{psk:Aj(tj.to_bytes()),localKeypair:Aj(Oj.into_storage()),remotePubKey:Aj(Qj)},device:AA};return{forOnePassword:Yj,forIntegration:Tj}}var XTA=async A=>{if(!A.user||!A.account)return;let j=A.user.isOwner()||Dj.isAdmin(A.user),e=A.account.hasBackOfficeFeature.members&&A.account.hasBackOfficeFeature.managedServiceProvider;if(!(A.account.mspAdministratorsGroup||!j||!e))return async()=>{let t=new IA({name:"MSP Administrators",type:IA.TypeMSPAdministrators,desc:"Access to add, view, administer, and unlink managed companies as an external account manager."}),r=await Bo(A,{attrs:IA.Attr.PubKey});await Uk(A,t,r),await bu(A,t,void 0)}};var JTA=async A=>{if(!(!A.user||!A.account||!A.user.hasPermission(tt.ManageGroups)||A.account.teamMembersGroup||!A.account.hasFeature.members))return async()=>{let j=new IA({name:"Team Members",type:IA.TypeTeamMembers,desc:"All team members."}),e=await Bo(A,{attrs:IA.Attr.PubKey}),[t,r]=await Promise.all([Uk(A,j,e),PtA(A)]),a=r.filter(n=>n.type===Dj.Type.Regular).map(async n=>{let o=await Fu(A,n,{attrs:zr.Attr.PubKey});await j.addMembership(t,o,{role:dr.Role.Member})});await Promise.all(a),await bu(A,j,void 0)}};var WTA=async A=>{if(!A.user||!A.account||!A.user.hasPermission(tt.BelongsToRecoveryGroup))return;let j=A.account.recoveryGroup,e=A.account.ownersGroup,t=A.account.administratorsGroup,r=await JF(A).catch(i=>{});if(!j||!r)return;let a=!!j.recoveryKeyset,n=!e||e.hasPermission(tt.Recover),o=!t||t.hasPermission(tt.Recover);if(!(a&&n&&o))return async()=>{console.warn("Running keyset migration!"),a||(console.warn("Running RecoveryGroup keyset migration!"),await WF(A,j,r)),e&&!n&&(console.warn("Running OwnersGroup keyset migration!"),await WF(A,e,r)),t&&!o&&(console.warn("Running AdminGroup keyset migration!"),await WF(A,t,r))}};var QTA=async A=>{let j=new Date(2017,4,10),e=A.account?.createdAt||new Date,t=A.user?.createdAt||new Date;if(e>j)return;let[r,a]=await Promise.all([t<j?em(A):Promise.resolve(void 0),A.user?.hasPermission(tt.ViewAdminConsole)?jm(A):Promise.resolve(void 0)]),n=r&&r.desc!==sj.DefaultDescMarker,o=a&&A.user&&A.user.canManageVault(a)&&a.desc!==sj.DefaultDescMarker;if(!n&&!o)return;let i=[];return r&&n&&(r.desc=sj.DefaultDescMarker,i.push(TS(A,r))),a&&o&&(a.desc=sj.DefaultDescMarker,i.push(TS(A,a))),Promise.all(i).then(()=>{})};var EUj=async A=>Promise.resolve(),pUj=async A=>{let j=await Promise.all([QTA(A),WTA(A),JTA(A),XTA(A)]);await Promise.all(Yr(j).map(async e=>e()))};typeof window<"u"&&(window.b5={action:NA,api:aA,crypto:S6,model:xA,util:q,shared:tQ,parser:ma},window.sjcl=mUj,window.moment=YTA.default);wjA();var gs=J(tA()),BUj=gs.type({deviceUuid:gs.string,userInfo:gs.record(gs.string,gs.string),deviceKeys:gs.record(gs.string,gs.string),lastUserUuid:gs.union([gs.string,gs.undefined])},"BackupCredentials"),xaA=Qo(Yo.pipe(BUj),()=>({deviceUuid:"",userInfo:{},deviceKeys:{},lastUserUuid:void 0}));var FH=class A{excluded;constructor(j){this.excluded=j}isExcluded=(j,e)=>{let t=this.excluded[j];return t===void 0?!1:e?t.includes(e):t.includes("all")};toggle=(j,e)=>{let t=this.excluded[j];if(t===void 0)t=e?[e]:["all"],this.excluded[j]=t;else if(e===null)t.indexOf("all")===-1?t.push("all"):t.splice(t.indexOf("all"),1);else if(t.indexOf(e)===-1)t.push(e),this.excluded[j]=t;else{let r=t.indexOf(e);t.splice(r,1),this.excluded[j]=t}};clone=()=>new A(Object.assign({},this.excluded))};var rt=class{_prependMessage;constructor(j=""){this._prependMessage=j}log=(j,...e)=>{this.isPermitted()&&(this.message(j),[...e])};debug=(j,...e)=>{this.isPermitted()&&(this.message(j),[...e])};info=(j,...e)=>{this.isPermitted()&&console.info(this.message(j),...e)};warn=(j,...e)=>{this.isPermitted()&&console.warn(this.message(j),...e)};error=(j,...e)=>{this.isPermitted()&&console.error(this.message(j),...e)};isPermitted=()=>!1;message=j=>this._prependMessage?`${this._prependMessage}: ${j}`:j};var bx=new Map,bH,ZTA=A=>{bH=A};var Hi=J(tA()),vaA=Hi.union([Hi.type({type:Hi.literal("Success"),data:Hi.unknown}),Hi.type({type:Hi.literal("Error"),message:Hi.unknown}),Hi.type({type:Hi.literal("NoListener")})]),ACA=Hi.type({name:Hi.string,data:Hi.unknown});var gUj=A=>{let j=bx.get(A);j?(chrome.runtime.onMessage.removeListener(j),bx.delete(A)||console.warn(`Failed to remove listener <${A}> from LISTENERS`)):console.warn(`Attempting to remove listener <${A}>, but it does not exist.`)},jCA=()=>{bx.forEach((A,j)=>{gUj(j)})},GaA=A=>bx.has(A);var faA=(A,j=Promise.resolve())=>{ZTA(j),[1,2,5].includes(A)&&addEventListener("pagehide",jCA,{once:!0})};var FaA=class{constructor(j){this.storage=j;this.storage=j}storageKey="performance-traces";getMap(){try{let j=this.storage.getItem(this.storageKey);return j?new Map(JSON.parse(j)):new Map}catch{return new Map}}set(j,e){let t=this.getMap(),r=t.get(j)||[];t.set(j,[...r,e]),this.storage.setItem(this.storageKey,JSON.stringify([...t]))}getValues(){return[...this.getMap().values()]}clear(){this.storage.removeItem(this.storageKey)}size(){return this.storage.getItem(this.storageKey)?.length||0}},yH=class{sender;storage;maxBytes;traceMap;maxSendInternval;lastSendTime;constructor(j,e,t){if(t.maxBytes<=0)throw new Error("Invalid batch configuration");this.maxBytes=t.maxBytes,this.maxSendInternval=t.maxSendInterval,this.sender=e,this.storage=j,this.traceMap=new FaA(this.storage),this.lastSendTime=Date.now()}shouldSendBatch(j){let t=Date.now()-this.lastSendTime>=this.maxSendInternval,r=this.traceMap.size()+j>this.maxBytes,a=this.traceMap.size()>0;return r||a&&t}sendBatch(){this.sender(this.traceMap.getValues()),this.traceMap.clear(),this.lastSendTime=Date.now()}addToBatch=j=>{this.shouldSendBatch(this.getSpanSize(j))&&this.sendBatch(),this.traceMap.set(j.traceId,j)};getSpanSize(j){return JSON.stringify(j).length}};var tCA=A=>typeof A=="object"&&A!==null&&"enableTracing"in A||typeof A=="object"&&A!==null&&"span"in A;function Xk(A,j,e){let t=e.value;return e.value=function(...r){let a=r.find(tCA);return a&&a.span?Na.syncObserve(j,a.componentName,n=>t.call(this,...r,n),a.span):a&&a.componentName?Na.syncObserve(j,a.componentName,n=>t.call(this,...r,n)):t.call(this,...r)},e}function $H(A,j,e){let t=e.value;return e.value=async function(...r){let a=r.find(tCA);return a&&a.span?await Na.asyncObserve(j,a.componentName,n=>t.call(this,...r,n),a.span):a&&a.componentName?await Na.asyncObserve(j,a.componentName,n=>t.call(this,...r,n)):await t.call(this,...r)},e}var baA=()=>Number(crypto.getRandomValues(new Uint32Array(1))[0]),rCA=()=>crypto.getRandomValues(new Uint32Array(1))[0].toString(36);var Na=class A{constructor(j,e){this.appName=j;this.traceReporter=e;this.appName=j,this.observerId=String(rCA()),this.performanceObserver=new PerformanceObserver(t=>{t.getEntries().filter(r=>!!r.detail?.spanId).forEach(r=>{let a=this.buildDataDogPayload(r);if(a.meta.entryType==="measure")try{this.traceReporter(a)}catch(n){console.error("Error in sending trace",n)}})})}performanceObserver;observerId;startObserver(){this.performanceObserver.observe({type:"measure",buffered:!0}),`${this.appName}${this.observerId}`}stopObserver(){this.performanceObserver.disconnect()}calculateEpochTime(j){return Math.round(j+performance.timeOrigin)}static humanReadableTimestamp(j){return Math.round(j*100)/100}buildDataDogPayload(j){return{name:j.name,traceId:j.detail.traceId,spanId:j.detail.spanId,parentId:j.detail.parentSpanId,start:this.calculateEpochTime(j.startTime),duration:Math.round(j.duration*1e6),service:this.appName,resource:j.name,type:"web",error:j.detail.error?1:0,meta:{observerId:this.observerId,entryType:j.entryType,component:j.detail.componentName,operation:j.detail.componentName}}}static createActiveSpan(j,e,t){let r={name:j,componentName:e,spanId:baA(),traceId:t?t.traceId:baA(),parentSpanId:t?t.spanId:void 0,error:!1};return performance.mark(`start-${j}`,{detail:r}),r}static endActiveSpan(j,e=!1,t=!1){let r=performance.measure(j.name,{start:`start-${j.name}`,detail:{...j,error:e}});t&&console.info(`Performance diagnostic: "${j.name}" took ${this.humanReadableTimestamp(r.duration)}ms to execute.`)}static syncObserve(j,e,t,r,a=!1){let n=this.createActiveSpan(j,e,r);try{let o=t(n);return this.endActiveSpan(n,!1,a),o}catch(o){throw this.endActiveSpan(n,!0,a),o}}static async asyncObserve(j,e,t,r,a=!1){let n=this.createActiveSpan(j,e,r);try{let o=await t(n);return this.endActiveSpan(n,!1,a),o}catch(o){throw this.endActiveSpan(n,!0,a),o}}static async conditionalObserve(j,...e){let[t,r,a,n]=e,o=a;return j?A.asyncObserve(t,r,o,n):a({name:"",componentName:"",spanId:0,traceId:0,parentSpanId:void 0,error:!1})}};var yaA=()=>!1,wH=()=>!1,aCA=A=>{let j=chrome.runtime.getURL("");if(j.endsWith("/")&&(j=j.slice(0,-1)),yaA())return!0;if(wH()){if(!A.url)return!1;let e=new URL(A.url),t=e.protocol+"//"+e.host;return t.endsWith("/")&&(t=t.slice(0,-1)),t===j}return!!A.origin&&A.origin===j};var $aA=J(Xn());var nP=hUj;function hUj(A,j){var e={};typeof j=="string"&&(j=[].slice.call(arguments,1));for(var t=j.length,r=0;r<t;r++){var a=j[r];a in A&&(e[a]=A[a])}return e}var nCA=async(A,j)=>new Promise((e,t)=>chrome.runtime.sendMessage(A,j,r=>{if(chrome.runtime.lastError){let a=chrome.runtime.lastError?.message||"Unable to send message with chrome.runtime.sendMessage";t(new Error(a))}else e(r)})),oCA=async(A,j,e)=>new Promise((t,r)=>chrome.tabs.sendMessage(A,j,e,a=>{if(chrome.runtime.lastError){let n=chrome.runtime.lastError?.message||"Unable to send message with chrome.tabs.sendMessage";r(new Error(n))}else t(a)}));var qUj=A=>typeof A=="object"&&A!==null&&"name"in A&&typeof A.name=="string"&&"message"in A&&typeof A.message=="string",IH=A=>qUj(A)?A.message:"An unknown error occurred";var waA=async(A,j)=>j.tabId===void 0?xUj(A,j):vUj(A,j),xUj=async(A,j)=>{let e;try{e=await nCA(A,j)}catch(r){let a=IH(r);if(iCA(a))`${A.name}`;else if(sCA(a))`${A.name}`;else if(!a)`${A.name}`;else throw new Error(`Unhandled error response received for message <${A.name}>`);return{type:"NoListener"}}if(!e)return{type:"Success",data:void 0};let t=vaA.decode(e);if((0,$aA.isLeft)(t))throw Error(`Unable to decode response for message <${A.name}>`);return t.right},vUj=async(A,{tabId:j,...e})=>{let t;try{let a=nP(e,["documentId","frameId"]),n=nP(e,["targetParent"]);t=await oCA(j,{...A,...n},a)}catch(a){let n=a instanceof Error?a.message:String(a);if(iCA(n))`${A.name}`;else if(sCA(n))`${A.name}`;else if(!n)`${A.name}`;else throw new Error(`Unhandled error response received for tab message <${A.name}>`);return{type:"NoListener"}}if(!t)return{type:"Success",data:void 0};let r=vaA.decode(t);if((0,$aA.isLeft)(r))throw Error(`Unable to decode response for tab message <${A.name}>`);return r.right},iCA=A=>A.includes("Receiving end does not exist"),sCA=A=>A.includes("The message port closed");var GUj=(async()=>await Promise.resolve().then(()=>J(y2())).catch(()=>globalThis.chrome))(),lj=async(A,j,e={enableTracing:!wH()})=>{let t;try{let{enableTracing:r,...a}=e;t=r&&!wH()?await Na.asyncObserve(`invoke-${A}`,"messaging",async n=>waA({name:A,data:j,span:n},a)):await waA({name:A,data:j},a)}catch(r){return{ok:!1,type:"error",error:r instanceof Error?r:Error(`Unhandled response type when receiving response to <${A}>`)}}switch(t.type){case"Success":return{ok:!0,data:t.data};case"Error":return{ok:!1,type:"error",error:Error(`Error response received for message <${A}>`)};case"NoListener":return{ok:!1,type:"nolistener"};default:return{ok:!1,type:"error",error:Error(`Unhandled response type when receiving response to <${A}>`)}}},mb=async(A,j)=>{if(yaA()){lj(A,j);return}let t=(await GUj).tabs??(typeof chrome<"u"?chrome.tabs:null);if(!t)return;let r;try{r=await t.query({})}catch(a){`${A}`;return}if(r)try{let a=r.filter(n=>n.id).map(async n=>lj(A,j,{tabId:n.id}));await Promise.allSettled(a)}catch(a){`${A}`}};var lCA=J(Xn());var V=(A,j,e=!1)=>{if(bH===void 0)throw new Error(`Attempting to register a listener <${A}> before 'initialize()' has			 been called. Please call 'initialize()' from '@1password/b5x-messaging'			 before attempting to register listeners.`);if(GaA(A))throw new Error(`Attempting to register the listener <${A}>. A listener by that name already exists.`);let t=fUj(A,j,e);chrome.runtime.onMessage.addListener(t),bx.set(A,t)},fUj=(A,j,e=!1)=>(t,r,a)=>{let n=ACA.decode(t);return!(0,lCA.isRight)(n)||n.right.name!==A?!1:e&&!aCA(r)?(a({type:"Error",message:"Invalid origin for request"}),!1):(bUj(j,n.right,r).then(o=>a({type:"Success",data:o})).catch(o=>FUj(o,A,a)),!0)},FUj=(A,j,e)=>{let t=IH(A);console.error(`Exception while handling request <${j}>: ${t}`),e({type:"Error",message:t})},bUj=async(A,j,e)=>{if(await bH,yUj(A)){let{tab:t,frameId:r,url:a}=e;if(!t||!t.id||typeof r!="number")throw new Error(`Unable to respond to request <${j.name}> due to lack of tab and frame information.`);return A(j,{tab:t,frameId:r,url:a})}else return A(j)},yUj=A=>A.length===2;var PH=class{_cache;constructor(){this._cache=new Map}clear(){return this._cache.clear()}get(j){return this._cache.get(j)}set(j,e){this._cache.set(j,e)}};var oP=()=>{let A=new Date;return`${A.getFullYear()}-${A.getMonth()+1}-${A.getDate()}`},IaA=()=>{let A=new Date;return`${A.getHours()}-${A.getMinutes()}-${A.getSeconds()}`},cCA=A=>!dCA(A),dCA=A=>new Date(A.startTime).getTime()+A.duration-Date.now()>0;function Bb(A){return JSON.stringify([...A])}function gb(A){return new Map(JSON.parse(A))}var PaA=A=>{`${A.str}`};var j6={};er(j6,{getRejectingTimeout:()=>sP,getResolvingTimeout:()=>hs,makePromiseCompleter:()=>Kl,withTimeout:()=>iP});var iP=async(A,j=5e3,e,t)=>{let r,a=new Promise((n,o)=>{r=globalThis.setTimeout(()=>{console.warn(`Promise timed out.${e?` ${e}`:""}`),o(t)},j)});return Promise.race([A,a]).finally(()=>clearTimeout(r))},hs=async A=>new Promise(j=>{!A||A<=0||setTimeout(()=>j({type:"timeout"}),A)}),sP=async A=>new Promise((j,e)=>{!A||A<=0||setTimeout(()=>e("timeout"),A)}),Kl=(A=!1)=>{let j=1,e,t=!1,r=new Promise(o=>{e=o}),a={resolve:e,promise:r,finished:t,extendable:A,extend:()=>{if(!A)throw new xe({errorClass:p`PromiseCompleter`,message:p`cannot extend a promise marked as un-extendable`});return j++,n}},n=o=>{j--,(j<1||!A)&&(a.finished=!0,e(o))};return a.resolve=n,a};var Kg={};er(Kg,{fqURL:()=>$c,isHttp:()=>kCA,isHttpOrHttps:()=>yx,isHttps:()=>uCA,matchesHostUrl:()=>RaA,parseLoose:()=>$x,signInWithProviderFromUrl:()=>OaA,subdomainFromSignInAddress:()=>wUj,urlComponentsForUnsafeURL:()=>Nl});function kCA(A){return!!A&&A.protocol==="http:"}function uCA(A){return!!A&&A.protocol==="https:"}function yx(A){return kCA(A)||uCA(A)}function Nl(A){if(!(A==null||A.length===0))try{return new URL(A)}catch{try{return new URL("https://"+A)}catch{return}}}function wUj(A){return new URL(A).host.split(".")[0]}function $x(A){let j=A.trim();try{return new URL(j)}catch{try{return new URL(`https://${j}`)}catch{}}}function $c(A){return A?A.indexOf("http://")===0||A.indexOf("https://")===0?A:`https://${A}`:""}function OaA(A){if(A.length===0)return;let j;try{j=new URL($c(A))}catch{return}switch(j.host.toLowerCase().split(".").slice(-2).join(".")){case"amazon.com":return an.Amazon;case"apple.com":return an.Apple;case"discord.com":return an.Discord;case"facebook.com":return an.Facebook;case"github.com":return an.GitHub;case"google.com":case"youtube.com":return an.Google;case"live.com":case"microsoft.com":case"microsoftonline.com":case"hotmail.com":case"office.com":return an.Microsoft;case"okta.com":return an.Okta;case"slack.com":return an.Slack;case"twitter.com":return an.Twitter;default:return}}function RaA(A,j,e){return A.urls.some(r=>r.mode===tk.Host?$x(r.url)?.host===j:r.mode===tk.Never?!1:A.urlToNakedDomains[r.url]===e)}var wc={};er(wc,{createLoggableId:()=>hb,createNumericId:()=>OH,createUniqueId:()=>Ng});function Ng(){return OH().toString(36)}function OH(){return globalThis.crypto.getRandomValues(new Uint32Array(1))[0]}function hb(){return aj.assertLogSafe(Ng())}async function ECA(A,j,e,t){let r=crypto.subtle,a=await r.importKey("raw",A,{name:"PBKDF2"},!1,["deriveBits"]);return r.deriveBits({name:"PBKDF2",salt:j,iterations:e,hash:"SHA-256"},a,t*8)}var yj,hCA=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&hCA.decode();var lP=null;function qb(){return(lP===null||lP.byteLength===0)&&(lP=new Uint8Array(yj.memory.buffer)),lP}function Oa(A,j){return A=A>>>0,hCA.decode(qb().subarray(A,A+j))}function Ix(A){let j=yj.__externref_table_alloc();return yj.__wbindgen_export_2.set(j,A),j}function wr(A,j){try{return A.apply(this,j)}catch(e){let t=Ix(e);yj.__wbindgen_exn_store(t)}}function wx(A){return A==null}function Jk(A,j){return A=A>>>0,qb().subarray(A/1,A/1+j)}var qa=0,RH=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},IUj=typeof RH.encodeInto=="function"?function(A,j){return RH.encodeInto(A,j)}:function(A,j){let e=RH.encode(A);return j.set(e),{read:A.length,written:e.length}};function Mi(A,j,e){if(e===void 0){let o=RH.encode(A),i=j(o.length,1)>>>0;return qb().subarray(i,i+o.length).set(o),qa=o.length,i}let t=A.length,r=j(t,1)>>>0,a=qb(),n=0;for(;n<t;n++){let o=A.charCodeAt(n);if(o>127)break;a[r+n]=o}if(n!==t){n!==0&&(A=A.slice(n)),r=e(r,t,t=n+A.length*3,1)>>>0;let o=qb().subarray(r+n,r+t),i=IUj(A,o);n+=i.written,r=e(r,t,n,1)>>>0}return qa=n,r}var Px=null;function Lg(){return(Px===null||Px.buffer.detached===!0||Px.buffer.detached===void 0&&Px.buffer!==yj.memory.buffer)&&(Px=new DataView(yj.memory.buffer)),Px}var pCA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>{yj.__wbindgen_export_6.get(A.dtor)(A.a,A.b)});function mCA(A,j,e,t){let r={a:A,b:j,cnt:1,dtor:e},a=(...n)=>{r.cnt++;let o=r.a;r.a=0;try{return t(o,r.b,...n)}finally{--r.cnt===0?(yj.__wbindgen_export_6.get(r.dtor)(o,r.b),pCA.unregister(r)):r.a=o}};return a.original=r,pCA.register(a,r,r),a}function DaA(A){let j=typeof A;if(j=="number"||j=="boolean"||A==null)return`${A}`;if(j=="string")return`"${A}"`;if(j=="symbol"){let r=A.description;return r==null?"Symbol":`Symbol(${r})`}if(j=="function"){let r=A.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(A)){let r=A.length,a="[";r>0&&(a+=DaA(A[0]));for(let n=1;n<r;n++)a+=", "+DaA(A[n]);return a+="]",a}let e=/\[object ([^\]]+)\]/.exec(toString.call(A)),t;if(e&&e.length>1)t=e[1];else return toString.call(A);if(t=="Object")try{return"Object("+JSON.stringify(A)+")"}catch{return"Object"}return A instanceof Error?`${A.name}: ${A.message}
${A.stack}`:t}function qCA(A){let j=Mi(A,yj.__wbindgen_malloc,yj.__wbindgen_realloc),e=qa;return yj.wasmMessage(j,e)}function Wk(A,j){let e=j(A.length*1,1)>>>0;return qb().set(A,e/1),qa=A.length,e}function xCA(A,j,e,t,r,a,n,o,i,s,l){let c=Mi(A,yj.__wbindgen_malloc,yj.__wbindgen_realloc),k=qa,u=Mi(j,yj.__wbindgen_malloc,yj.__wbindgen_realloc),m=qa,F=Mi(e,yj.__wbindgen_malloc,yj.__wbindgen_realloc),S=qa,G=Mi(t,yj.__wbindgen_malloc,yj.__wbindgen_realloc),x=qa,R=Mi(r,yj.__wbindgen_malloc,yj.__wbindgen_realloc),P=qa,D=Wk(a,yj.__wbindgen_malloc),y=qa;return yj.enrollTrustedDevice(c,k,u,m,F,S,G,x,R,P,D,y,n,o,i,s,l)}function vCA(A){let j,e;try{let t=Mi(A,yj.__wbindgen_malloc,yj.__wbindgen_realloc),r=qa,a=yj.richIconBackgroundColor(t,r);return j=a[0],e=a[1],Oa(a[0],a[1])}finally{yj.__wbindgen_free(j,e,1)}}function GCA(A){let j,e;try{let t=Mi(A,yj.__wbindgen_malloc,yj.__wbindgen_realloc),r=qa,a=yj.nakedDomainForUrlString(t,r);return j=a[0],e=a[1],Oa(a[0],a[1])}finally{yj.__wbindgen_free(j,e,1)}}function fCA(A){let j=Mi(A,yj.__wbindgen_malloc,yj.__wbindgen_realloc),e=qa,t=yj.getSignInUrl(j,e),r;return t[0]!==0&&(r=Oa(t[0],t[1]).slice(),yj.__wbindgen_free(t[0],t[1]*1,1)),r}function FCA(){return yj.onLock()}function cP(A){let j=yj.__wbindgen_export_2.get(A);return yj.__externref_table_dealloc(A),j}function bCA(A,j,e){let t=Wk(A,yj.__wbindgen_malloc),r=qa,a=Mi(j,yj.__wbindgen_malloc,yj.__wbindgen_realloc),n=qa,o=Mi(e,yj.__wbindgen_malloc,yj.__wbindgen_realloc),i=qa,s=yj.openNaClJwk(t,r,a,n,o,i);if(s[3])throw cP(s[2]);var l=Jk(s[0],s[1]).slice();return yj.__wbindgen_free(s[0],s[1]*1,1),l}function yCA(A,j,e){let t=Wk(A,yj.__wbindgen_malloc),r=qa,a=Wk(j,yj.__wbindgen_malloc),n=qa,o=Wk(e,yj.__wbindgen_malloc),i=qa,s=yj.lessSafeOpenNaCl(t,r,a,n,o,i);if(s[3])throw cP(s[2]);var l=Jk(s[0],s[1]).slice();return yj.__wbindgen_free(s[0],s[1]*1,1),l}function $CA(A,j){let e=Wk(A,yj.__wbindgen_malloc),t=qa,r=Mi(j,yj.__wbindgen_malloc,yj.__wbindgen_realloc),a=qa,n=yj.sealNaClJwk(e,t,r,a);if(n[2])throw cP(n[1]);return DH.__wrap(n[0])}function wCA(A,j){let e=Wk(A,yj.__wbindgen_malloc),t=qa,r=Wk(j,yj.__wbindgen_malloc),a=qa,n=yj.lessSafeSealNaCl(e,t,r,a);if(n[2])throw cP(n[1]);return DH.__wrap(n[0])}function ICA(A,j){let e=Wk(A,yj.__wbindgen_malloc),t=qa,r=Mi(j,yj.__wbindgen_malloc,yj.__wbindgen_realloc),a=qa,n=yj.p256Sign(e,t,r,a);if(n[3])throw cP(n[2]);var o=Jk(n[0],n[1]).slice();return yj.__wbindgen_free(n[0],n[1]*1,1),o}function PUj(A,j){yj._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hd7352fe0b0971c14(A,j)}function OUj(A,j,e){yj.closure4399_externref_shim(A,j,e)}function RUj(A,j,e,t){yj.closure4603_externref_shim(A,j,e,t)}var DUj=["default","no-store","reload","no-cache","force-cache","only-if-cached"],TUj=["omit","same-origin","include"],CUj=["same-origin","no-cors","cors","navigate"],dht=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>yj.__wbg_intounderlyingbytesource_free(A>>>0,1));var kht=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>yj.__wbg_intounderlyingsink_free(A>>>0,1));var uht=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>yj.__wbg_intounderlyingsource_free(A>>>0,1));var BCA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>yj.__wbg_wasmsealed_free(A>>>0,1)),DH=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,BCA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,BCA.unregister(this),j}free(){let j=this.__destroy_into_raw();yj.__wbg_wasmsealed_free(j,0)}ciphertext(){let j=yj.wasmsealed_ciphertext(this.__wbg_ptr);var e=Jk(j[0],j[1]).slice();return yj.__wbindgen_free(j[0],j[1]*1,1),e}pub_key_jwk(){let j,e;try{let t=yj.wasmsealed_pub_key_jwk(this.__wbg_ptr);return j=t[0],e=t[1],Oa(t[0],t[1])}finally{yj.__wbindgen_free(j,e,1)}}pub_key_bytes(){let j=yj.wasmsealed_pub_key_bytes(this.__wbg_ptr);var e=Jk(j[0],j[1]).slice();return yj.__wbindgen_free(j[0],j[1]*1,1),e}static less_safe_new(j,e){let t=Wk(j,yj.__wbindgen_malloc),r=qa,a=Wk(e,yj.__wbindgen_malloc),n=qa,o=yj.wasmsealed_less_safe_new(t,r,a,n);return A.__wrap(o)}},gCA=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>yj.__wbg_wasmx25519key_free(A>>>0,1)),TH=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,gCA.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,gCA.unregister(this),j}free(){let j=this.__destroy_into_raw();yj.__wbg_wasmx25519key_free(j,0)}static generate(){let j=yj.wasmx25519key_generate();return A.__wrap(j)}pub_jwk(){let j,e;try{let t=yj.wasmx25519key_pub_jwk(this.__wbg_ptr);return j=t[0],e=t[1],Oa(t[0],t[1])}finally{yj.__wbindgen_free(j,e,1)}}pub_key_bytes(){let j=yj.wasmx25519key_pub_key_bytes(this.__wbg_ptr);var e=Jk(j[0],j[1]).slice();return yj.__wbindgen_free(j[0],j[1]*1,1),e}less_safe_pri_jwk(){let j,e;try{let t=yj.wasmx25519key_less_safe_pri_jwk(this.__wbg_ptr);return j=t[0],e=t[1],Oa(t[0],t[1])}finally{yj.__wbindgen_free(j,e,1)}}less_safe_pri_key_bytes(){let j=yj.wasmx25519key_less_safe_pri_key_bytes(this.__wbg_ptr);var e=Jk(j[0],j[1]).slice();return yj.__wbindgen_free(j[0],j[1]*1,1),e}};async function _Uj(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function SUj(){let A={};return A.wbg={},A.wbg.__wbg_abort_410ec47a64ac6117=function(j,e){j.abort(e)},A.wbg.__wbg_abort_775ef1d17fc65868=function(j){j.abort()},A.wbg.__wbg_append_299d5d48292c0495=function(){return wr(function(j,e,t,r,a){j.append(Oa(e,t),Oa(r,a))},arguments)},A.wbg.__wbg_append_8c7dd8d641a5f01b=function(){return wr(function(j,e,t,r,a){j.append(Oa(e,t),Oa(r,a))},arguments)},A.wbg.__wbg_append_b2d1fc16de2a0e81=function(){return wr(function(j,e,t,r,a,n){j.append(Oa(e,t),r,Oa(a,n))},arguments)},A.wbg.__wbg_append_b44785ebeb668479=function(){return wr(function(j,e,t,r){j.append(Oa(e,t),r)},arguments)},A.wbg.__wbg_arrayBuffer_d1b44c4390db422f=function(){return wr(function(j){return j.arrayBuffer()},arguments)},A.wbg.__wbg_buffer_09165b52af8c5237=function(j){return j.buffer},A.wbg.__wbg_buffer_609cc3eee51ed158=function(j){return j.buffer},A.wbg.__wbg_byobRequest_77d9adf63337edfb=function(j){let e=j.byobRequest;return wx(e)?0:Ix(e)},A.wbg.__wbg_byteLength_e674b853d9c77e1d=function(j){return j.byteLength},A.wbg.__wbg_byteOffset_fd862df290ef848d=function(j){return j.byteOffset},A.wbg.__wbg_call_672a4d21634d4a24=function(){return wr(function(j,e){return j.call(e)},arguments)},A.wbg.__wbg_call_7cccdd69e0791ae2=function(){return wr(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_call_833bed5770ea2041=function(){return wr(function(j,e,t,r){return j.call(e,t,r)},arguments)},A.wbg.__wbg_clearTimeout_7a42b49784aea641=function(j){return clearTimeout(j)},A.wbg.__wbg_close_304cc1fef3466669=function(){return wr(function(j){j.close()},arguments)},A.wbg.__wbg_close_5ce03e29be453811=function(){return wr(function(j){j.close()},arguments)},A.wbg.__wbg_close_a17af48266bd9942=function(j){j.close()},A.wbg.__wbg_crypto_dd1b8f71596b161a=function(j){return j.crypto},A.wbg.__wbg_debug_3cb59063b29f58c1=function(j){},A.wbg.__wbg_derivePbkdf2_035f98379c7596be=function(j,e,t,r,a){return ECA(j,Jk(e,t),r>>>0,a)},A.wbg.__wbg_done_769e5ede4b31c67b=function(j){return j.done},A.wbg.__wbg_enqueue_bb16ba72f537dc9e=function(){return wr(function(j,e){j.enqueue(e)},arguments)},A.wbg.__wbg_error_524f506f44df1645=function(j){console.error(j)},A.wbg.__wbg_error_7534b8e9a36f1ab4=function(j,e){let t,r;try{t=j,r=e,console.error(Oa(j,e))}finally{yj.__wbindgen_free(t,r,1)}},A.wbg.__wbg_exportKey_d8fbe6e8de2fbb6a=function(){return wr(function(j,e,t,r){return j.exportKey(Oa(e,t),r)},arguments)},A.wbg.__wbg_fetch_509096533071c657=function(j,e){return j.fetch(e)},A.wbg.__wbg_fetch_74a3e84ebd2c9a0e=function(j){return fetch(j)},A.wbg.__wbg_flush_1a680a66b21c53d7=function(){return wr(function(j){j.flush()},arguments)},A.wbg.__wbg_generateKey_24819cf5d2ade0ec=function(){return wr(function(j,e,t,r){return j.generateKey(e,t!==0,r)},arguments)},A.wbg.__wbg_getEntriesByType_5d2deec4d4dcff89=function(j,e,t){return j.getEntriesByType(Oa(e,t))},A.wbg.__wbg_getFullYear_17d3c9e4db748eb7=function(j){return j.getFullYear()},A.wbg.__wbg_getRandomValues_5754b82ca6952f9b=function(){return wr(function(j,e,t){return j.getRandomValues(Jk(e,t))},arguments)},A.wbg.__wbg_getRandomValues_760c8e927227643e=function(){return wr(function(j,e){j.getRandomValues(e)},arguments)},A.wbg.__wbg_getSize_e7dbd5ffa0b43df1=function(){return wr(function(j){return j.getSize()},arguments)},A.wbg.__wbg_getTimezoneOffset_6b5752021c499c47=function(j){return j.getTimezoneOffset()},A.wbg.__wbg_get_67b2ba62fc30de12=function(){return wr(function(j,e){return Reflect.get(j,e)},arguments)},A.wbg.__wbg_get_7245ae8a86ca6b21=function(){return browser.storage.session.get()},A.wbg.__wbg_get_b9b93047fe3cf45b=function(j,e){return j[e>>>0]},A.wbg.__wbg_has_a5ea9117f258a0ec=function(){return wr(function(j,e){return Reflect.has(j,e)},arguments)},A.wbg.__wbg_headers_9cb51cfd2ac780a4=function(j){return j.headers},A.wbg.__wbg_info_3daf2e093e091b66=function(j){console.info(j)},A.wbg.__wbg_instanceof_Crypto_437466a97e9010b9=function(j){let e;try{e=j instanceof Crypto}catch{e=!1}return e},A.wbg.__wbg_instanceof_Performance_0ac1286c87171f57=function(j){let e;try{e=j instanceof Performance}catch{e=!1}return e},A.wbg.__wbg_instanceof_Response_f2cc20d9f7dfd644=function(j){let e;try{e=j instanceof Response}catch{e=!1}return e},A.wbg.__wbg_instanceof_Window_def73ea0955fc569=function(j){let e;try{e=j instanceof Window}catch{e=!1}return e},A.wbg.__wbg_instanceof_WorkerGlobalScope_dbdbdea7e3b56493=function(j){let e;try{e=j instanceof WorkerGlobalScope}catch{e=!1}return e},A.wbg.__wbg_isArray_a1eab7e0d067391b=function(j){return Array.isArray(j)},A.wbg.__wbg_iterator_9a24c88df860dc65=function(){return Symbol.iterator},A.wbg.__wbg_languages_2420955220685766=function(j){return j.languages},A.wbg.__wbg_languages_d8dad509faf757df=function(j){return j.languages},A.wbg.__wbg_length_a446193dc22c12f8=function(j){return j.length},A.wbg.__wbg_log_c222819a41e063d3=function(j){},A.wbg.__wbg_mark_001da84b098c950f=function(){return wr(function(j,e,t){j.mark(Oa(e,t))},arguments)},A.wbg.__wbg_measure_36bc93e7be4ed1bb=function(){return wr(function(j,e,t,r,a,n,o){j.measure(Oa(e,t),Oa(r,a),Oa(n,o))},arguments)},A.wbg.__wbg_msCrypto_60a4979188f6b80b=function(j){return j.msCrypto},A.wbg.__wbg_navigator_0a9bf1120e24fec2=function(j){return j.navigator},A.wbg.__wbg_navigator_1577371c070c8947=function(j){return j.navigator},A.wbg.__wbg_new0_f788a2397c7ca929=function(){return new Date},A.wbg.__wbg_new_018dcc2d6c8c2f6a=function(){return wr(function(){return new Headers},arguments)},A.wbg.__wbg_new_23a2665fac83c611=function(j,e){try{var t={a:j,b:e},r=(n,o)=>{let i=t.a;t.a=0;try{return RUj(i,t.b,n,o)}finally{t.a=i}};return new Promise(r)}finally{t.a=t.b=0}},A.wbg.__wbg_new_31a97dac4f10fab7=function(j){return new Date(j)},A.wbg.__wbg_new_405e22f390576ce2=function(){return new Object},A.wbg.__wbg_new_78feb108b6472713=function(){return new Array},A.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},A.wbg.__wbg_new_9fd39a253424609a=function(){return wr(function(){return new FormData},arguments)},A.wbg.__wbg_new_a12002a7f91c75be=function(j){return new Uint8Array(j)},A.wbg.__wbg_new_c68d7209be747379=function(j,e){return new Error(Oa(j,e))},A.wbg.__wbg_new_e25e5aab09ff45db=function(){return wr(function(){return new AbortController},arguments)},A.wbg.__wbg_newnoargs_105ed471475aaf50=function(j,e){return new Function(Oa(j,e))},A.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(j,e,t){return new Uint8Array(j,e>>>0,t>>>0)},A.wbg.__wbg_newwithlength_a381634e90c276d4=function(j){return new Uint8Array(j>>>0)},A.wbg.__wbg_newwithlength_b93fcdb8050ed017=function(j){return new Int32Array(j>>>0)},A.wbg.__wbg_newwithstrandinit_06c535e0a867c635=function(){return wr(function(j,e,t){return new Request(Oa(j,e),t)},arguments)},A.wbg.__wbg_newwithu8arraysequenceandoptions_068570c487f69127=function(){return wr(function(j,e){return new Blob(j,e)},arguments)},A.wbg.__wbg_next_25feadfc0913fea9=function(j){return j.next},A.wbg.__wbg_next_6574e1a8a62d1055=function(){return wr(function(j){return j.next()},arguments)},A.wbg.__wbg_node_0deadde112ce24bb=function(j){return j.node},A.wbg.__wbg_now_807e54c39636c349=function(){return Date.now()},A.wbg.__wbg_now_d18023d54d4e5500=function(j){return j.now()},A.wbg.__wbg_parse_def2e24ef1252aff=function(){return wr(function(j,e){return JSON.parse(Oa(j,e))},arguments)},A.wbg.__wbg_process_0caa4f154b97e834=function(j){return j.process},A.wbg.__wbg_push_737cfc8c1432c2c6=function(j,e){return j.push(e)},A.wbg.__wbg_queueMicrotask_97d92b4fcc8a61c5=function(j){queueMicrotask(j)},A.wbg.__wbg_queueMicrotask_d3219def82552485=function(j){return j.queueMicrotask},A.wbg.__wbg_randomFillSync_82e8b56b81896e30=function(){return wr(function(j,e){j.randomFillSync(e)},arguments)},A.wbg.__wbg_read_f8fdd4b410209222=function(){return wr(function(j,e,t,r){return j.read(Jk(e,t),r)},arguments)},A.wbg.__wbg_require_1a22b236558b5786=function(){return wr(function(){return module.require},arguments)},A.wbg.__wbg_resolve_4851785c9c5f573d=function(j){return Promise.resolve(j)},A.wbg.__wbg_respond_1f279fa9f8edcb1c=function(){return wr(function(j,e){j.respond(e>>>0)},arguments)},A.wbg.__wbg_self_6afa9654edd50769=function(){return wr(function(){return self.self},arguments)},A.wbg.__wbg_setTimeout_7bb3429662ab1e70=function(j,e){return setTimeout(j,e)},A.wbg.__wbg_set_65595bdd868b3009=function(j,e,t){j.set(e,t>>>0)},A.wbg.__wbg_set_bb8cecf6a62b9f46=function(){return wr(function(j,e,t){return Reflect.set(j,e,t)},arguments)},A.wbg.__wbg_set_bdf16194fa59737d=function(j){browser.storage.session.set(j)},A.wbg.__wbg_setat_2a071a392643c10e=function(j,e){j.at=e},A.wbg.__wbg_setbody_5923b78a95eedf29=function(j,e){j.body=e},A.wbg.__wbg_setcache_12f17c3a980650e4=function(j,e){j.cache=DUj[e]},A.wbg.__wbg_setcredentials_c3a22f1cd105a2c6=function(j,e){j.credentials=TUj[e]},A.wbg.__wbg_setheaders_834c0bdb6a8949ad=function(j,e){j.headers=e},A.wbg.__wbg_setmethod_3c5280fe5d890842=function(j,e,t){j.method=Oa(e,t)},A.wbg.__wbg_setmode_5dc300b865044b65=function(j,e){j.mode=CUj[e]},A.wbg.__wbg_setsignal_75b21ef3a81de905=function(j,e){j.signal=e},A.wbg.__wbg_settype_39ed370d3edd403c=function(j,e,t){j.type=Oa(e,t)},A.wbg.__wbg_signal_aaf9ad74119f20a4=function(j){return j.signal},A.wbg.__wbg_stack_0ed75d68575b0f3c=function(j,e){let t=e.stack,r=Mi(t,yj.__wbindgen_malloc,yj.__wbindgen_realloc),a=qa;Lg().setInt32(j+4*1,a,!0),Lg().setInt32(j+4*0,r,!0)},A.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){let j=typeof global>"u"?null:global;return wx(j)?0:Ix(j)},A.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){let j=typeof globalThis>"u"?null:globalThis;return wx(j)?0:Ix(j)},A.wbg.__wbg_static_accessor_PERFORMANCE_ab5616b64edfaf69=function(){return performance},A.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){let j=typeof self>"u"?null:self;return wx(j)?0:Ix(j)},A.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){let j=typeof window>"u"?null:window;return wx(j)?0:Ix(j)},A.wbg.__wbg_static_accessor_performance_da77b3a901a72934=function(){return performance},A.wbg.__wbg_status_f6360336ca686bf0=function(j){return j.status},A.wbg.__wbg_stringify_f7ed6987935b4a24=function(){return wr(function(j){return JSON.stringify(j)},arguments)},A.wbg.__wbg_subarray_aa9065fa9dc5df96=function(j,e,t){return j.subarray(e>>>0,t>>>0)},A.wbg.__wbg_subtle_d0614193a0b7a626=function(j){return j.subtle},A.wbg.__wbg_then_44b73946d2fb3e7d=function(j,e){return j.then(e)},A.wbg.__wbg_then_48b406749878a531=function(j,e,t){return j.then(e,t)},A.wbg.__wbg_toLocaleDateString_e5424994746e8415=function(j,e,t,r){return j.toLocaleDateString(Oa(e,t),r)},A.wbg.__wbg_truncate_29261a6365c72b01=function(){return wr(function(j,e){j.truncate(e>>>0)},arguments)},A.wbg.__wbg_url_ae10c34ca209681d=function(j,e){let t=e.url,r=Mi(t,yj.__wbindgen_malloc,yj.__wbindgen_realloc),a=qa;Lg().setInt32(j+4*1,a,!0),Lg().setInt32(j+4*0,r,!0)},A.wbg.__wbg_value_cd1ffa7b1ab794f1=function(j){return j.value},A.wbg.__wbg_values_99f7a68c7f313d66=function(j){return j.values()},A.wbg.__wbg_versions_134d8f3c6de79566=function(j){return j.versions},A.wbg.__wbg_view_fd8a56e8983f448d=function(j){let e=j.view;return wx(e)?0:Ix(e)},A.wbg.__wbg_wait_c19065fad9b95713=function(){return wr(function(j,e,t,r){return Atomics.wait(j,e>>>0,t,r)},arguments)},A.wbg.__wbg_warn_4ca3906c248c47c4=function(j){console.warn(j)},A.wbg.__wbg_window_ef5723d5ef2e972e=function(){return wr(function(){return window.window},arguments)},A.wbg.__wbg_write_530d3c84df874f53=function(){return wr(function(j,e,t,r){return j.write(Jk(e,t),r)},arguments)},A.wbg.__wbindgen_cb_drop=function(j){let e=j.original;return e.cnt--==1?(e.a=0,!0):!1},A.wbg.__wbindgen_closure_wrapper13438=function(j,e,t){return mCA(j,e,4342,PUj)},A.wbg.__wbindgen_closure_wrapper13587=function(j,e,t){return mCA(j,e,4400,OUj)},A.wbg.__wbindgen_debug_string=function(j,e){let t=DaA(e),r=Mi(t,yj.__wbindgen_malloc,yj.__wbindgen_realloc),a=qa;Lg().setInt32(j+4*1,a,!0),Lg().setInt32(j+4*0,r,!0)},A.wbg.__wbindgen_error_new=function(j,e){return new Error(Oa(j,e))},A.wbg.__wbindgen_init_externref_table=function(){let j=yj.__wbindgen_export_2,e=j.grow(4);j.set(0,void 0),j.set(e+0,void 0),j.set(e+1,null),j.set(e+2,!0),j.set(e+3,!1)},A.wbg.__wbindgen_is_function=function(j){return typeof j=="function"},A.wbg.__wbindgen_is_object=function(j){let e=j;return typeof e=="object"&&e!==null},A.wbg.__wbindgen_is_string=function(j){return typeof j=="string"},A.wbg.__wbindgen_is_undefined=function(j){return j===void 0},A.wbg.__wbindgen_memory=function(){return yj.memory},A.wbg.__wbindgen_number_new=function(j){return j},A.wbg.__wbindgen_string_get=function(j,e){let t=e,r=typeof t=="string"?t:void 0;var a=wx(r)?0:Mi(r,yj.__wbindgen_malloc,yj.__wbindgen_realloc),n=qa;Lg().setInt32(j+4*1,n,!0),Lg().setInt32(j+4*0,a,!0)},A.wbg.__wbindgen_string_new=function(j,e){return Oa(j,e)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(Oa(j,e))},A}function HUj(A,j){return yj=A.exports,PCA.__wbindgen_wasm_module=j,Px=null,lP=null,yj.__wbindgen_start(),yj}async function PCA(A){if(yj!==void 0)return yj;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead"));let j=SUj();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await _Uj(await A,j);return HUj(e,t)}var OCA=PCA;var RCA="/assets/wasm/op_wasm_b5x_bg-YUVMVSX3.wasm";var xb=class{uuid;template;hasItems;constructor(j,e,t=!1){this.uuid=j,this.template=e,this.hasItems=t}localizedPluralName=()=>{let j=this.template;if(!j)return this.uuid;if(j.attrs&&j.attrs.localizedStrings){let e=j.attrs.localizedStrings.__pluralTitle__;if(e)return e}return j.pluralName};localizedSingularName(){let j=this.template;if(!j)return this.uuid;if(j.attrs&&j.attrs.localizedStrings){let e=j.attrs.localizedStrings.__title__;if(e)return e}return j.pluralName}get hasHiddenTemplate(){return!this.template}};var CH=A=>A.type==="managedCredential";var e6={uuid:A=>typeof A=="string"&&A.length===26,boolean:A=>typeof A=="boolean",string:A=>typeof A=="string",nonEmptyString:A=>e6.string(A)&&A.length>0,array:A=>Array.isArray(A),number:A=>typeof A=="number",stringOrNumber:A=>typeof A=="string"||typeof A=="number",date:A=>e6.stringOrNumber(A)&&!isNaN(Number(new Date(A)))};function t6(A,j,e){if(A(j))return j;if(e!==void 0)return e;throw new Error(`The "${A.name}" validator found an invalid value.`)}var DCA=(A={})=>({uuid:t6(e6.string,A.uuid,"001"),title:t6(e6.string,A.title,"Unknown"),pluralTitle:t6(e6.string,A.pluralTitle,"Unknown"),hasHiddenTemplate:t6(e6.boolean,A.hasHiddenTemplate,!0),disableCreation:t6(e6.boolean,A.disableCreation,!1),hasItems:t6(e6.boolean,A.hasItems,!1),localizedStrings:A.localizedStrings??{}});var TCA=p`ManagedCredentialError`,TaA="_MCVault_",si=A=>um(A.vault),um=A=>A.uuid.startsWith(TaA);function CaA(A,j){if(!A||A.length===0)return 0;let e=0;for(let t of A){if(!t)continue;let r=0,a=Nl(t.u);if(!a)continue;let n=a.hostname.split("."),o=n.length-1;for(let i=j.length-1;i>-1&&o>-1&&j[i]===n[o];i--){r++;o--}if(e<r&&(e=r),r===j.length)break}return e}function CCA(A){let j=new URL(A);return j.protocol+"//"+j.host}function SH(A){return A.origin+A.pathname}var NUj=/\s/g,LUj=/\W/g,SaA={plain(A){return A},hyphens(A){return A.trim().replace(NUj,"-").replace(LUj,"-")}};var zUj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},UUj=A=>A.replace(/[&<>"']/g,j=>zUj[j]),_CA=A=>{let j={},e={};for(let t in A)if(A.hasOwnProperty(t)){let r=A[t];typeof r=="function"?e[t]=r:typeof r=="string"?j[t]=UUj(r):j[t]=r}return[j,e]},HaA=(A,j)=>{let e=Object(A);for(let t in j)Object.prototype.hasOwnProperty.call(j,t)&&(e[t]=j[t]);return e};var MaA={short:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},dateTime:{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}},KaA={currency:{style:"currency",currency:"USD"},decimal:{style:"decimal"},percent:{style:"percent"}};function HH(A){let j={};return function(e,t){let r=Array.prototype.slice.call(arguments),a=e+"-"+JSON.stringify(t);if(a in j)return j[a];let n=new(Function.prototype.bind.call(A,null,...r));return j[a]=n,n}}var SCA={OPEN:"{",CLOSE:"}"};function NaA(A,j){if(!j)return A;let e="",t=[];for(let r=0;r<A.length;r++)switch(A.charAt(r)){case SCA.OPEN:t.push(e),e="";break;case SCA.CLOSE:t.push(j[e]),e="";break;default:e+=A.charAt(r)}return t.push(e),t.join("")}var LaA="wrap",zaA;function UaA(A,j){typeof zaA>"u"&&(zaA=new DOMParser);let e=zaA.parseFromString(`<${LaA}>${A}</${LaA}>`,"text/xml");if(!e.firstChild||e.firstChild.nodeName!==LaA)throw new Error("Could not parse XML string");return HCA(e.firstChild,j,!0)}var VUj=1,XUj=3;function HCA(A,j,e=!1){if(A.nodeType===XUj)return A.nodeValue?[A.nodeValue]:[];if(A.nodeType===VUj){let r=Array.prototype.slice.call(A.childNodes).reduce((a,n)=>[...a,...HCA(n,j)],[]);return e||!j[A.nodeName]?r:[j[A.nodeName](...r)]}else return[]}var MCA="en",JUj=(A,j,e)=>{let t=A[j],r=A[MCA];return t&&t[e]?t[e]:r&&r[e]?r[e]:""},WUj=A=>{if(typeof Intl>"u"){let n=()=>{throw new Error("Missing Intl")};return{date:n,number:n}}let j=()=>{let n=Intl.DateTimeFormat;function o(){var i;let s=Array.prototype.slice.apply(arguments),l=typeof s?.[0]=="string"?s[0]:"en-US",c=typeof((i=s?.[1])===null||i===void 0?void 0:i.timeZone)=="string"?s[1].timeZone:"America/Toronto";return n.apply(this,[l,c])}return o.prototype=n.prototype,o};try{Intl.DateTimeFormat(),new Date().toLocaleString(),new Date().toLocaleDateString(),new Date().toLocaleTimeString()}catch{Date.prototype.toLocaleString=Date.prototype.toString,Date.prototype.toLocaleDateString=Date.prototype.toDateString,Date.prototype.toLocaleTimeString=Date.prototype.toTimeString,Intl.DateTimeFormat=j()}let e=HH(Intl.DateTimeFormat),t=HH(Intl.NumberFormat);return{date:(n,o="long",i=A())=>{let s=MaA[o]||MaA.long;return e(i,s).format(n)},number:(n,o="decimal",i=A())=>{let s=KaA[o]||KaA.decimal;return t(i,s).format(n)}}},KCA=()=>{let A={},j=MCA,e=SaA.hyphens,t=(s={})=>(A=s.messages||A,j=s.locale||j,e=s.idGenerator||e,{messages:A,locale:j,idGenerator:e}),r=s=>e(s),a=(s,l={},c="")=>{let k=JUj(A,j,s)||c||s;return typeof k=="string"?NaA(k,l):k(l)},n=(s,l={},c="")=>a(c||r(s),l,s);return HaA(n,{$:(s,l={},c="")=>{let[k,u]=_CA(l),m=n(s,k,c);return UaA(m,u)},generateId:r,locale:()=>j,lookup:a,set:t})},NCA=()=>{let A=KCA(),j=WUj(A.locale);return HaA(A,j)};var oA=NCA();var QUj=[Je,O6,ea,ol,jc,Zi],MH=A=>!!A.templateUuid&&(A.templateUuid===Je||A.templateUuid===ol||A.templateUuid===jc||A.templateUuid===ea&&!!A.overview.URLs&&A.overview.URLs?.length>0),ie={combine(...A){return function(j){return A.every(e=>e(j))}},invert(A){return function(j){return!A(j)}},if(A,j){return e=>A(e)?j(e):!0},active(A){return A.state===xA.VaultItem.ItemState.Active},archived(A){return A.state===xA.VaultItem.ItemState.Archived},managed(A){return A.vault.type===xA.Vault.TypeManagedApplications},logins(A){return A.templateUuid===Je},passwords(A){return A.templateUuid===ol},loginsAndPasswords(A){return A.templateUuid===Je||A.templateUuid===ol},creditCards(A){return A.templateUuid===ea},identities(A){return A.templateUuid===O6},apiKeys(A){return A.templateUuid===jc},cryptoWallets(A){return A.templateUuid===iG},sshKeys(A){return A.templateUuid===Zi},vaultTypePersonal(A){return A.vault.type===xA.Vault.TypePersonal},favorited(A){return!!A.faveIndex&&A.faveIndex>0},fillable(A){return!!A.templateUuid&&QUj.includes(A.templateUuid)},frozenAccountItem(A){return j=>{if(typeof j.vault.localId!="number")return!1;let e=A.accountForVaultID(j.vault.localId);return e?A.frozenAccountIds.includes(e.uuid):!1}},searchBy(A){return j=>YUj(j,A)&&j.state===xA.VaultItem.ItemState.Active},template(A){return j=>A===j.templateUuid},templates(A){return j=>!!j.templateUuid&&!!A.includes(j.templateUuid)},account(A){return j=>!!j.overview.b5AccountUUID&&j.overview.b5AccountUUID===A},tabInfo(A){let j=A.nakedDomain();return e=>MH(e)?(e.overview.URLs??[]).some(a=>a.m==="host"?$x(a.u)?.host===A.URL()?.host:a.m==="never"?!1:e.urlToNakedDomains?.[a.u]===j):ie.identities(e)||ie.creditCards(e)||ie.apiKeys(e)||ie.sshKeys(e)},nakedDomain(A){return j=>MH(j)&&j.urlToNakedDomains?Object.values(j.urlToNakedDomains).includes(A):!0},userSelected(A,j,e,t){return r=>{if(j)return r.vault.uuid===j.uuid;if(!r.vault.localId)return!1;let a=t.accountForVaultID(r.vault.localId);return a?e?A&&A.isExcluded(e.uuid,r.vault.uuid)?!1:a.uuid===e.uuid:!A?.isExcluded(a.uuid,r.vault.uuid):!1}},tag(A){return j=>{if(!j.overview.tags)return!1;for(let e of j.overview.tags)if(e.startsWith(A)&&(e.length===A.length||e[A.length]==="/"))return!0;return!1}},signInWithProviderLogins(A){return j=>ie.logins(j)&&!ie.archived(j)&&[j.url,j.overview.url??"",...j.overview.URLs?.map(e=>e.u)??[]].some(e=>e&&OaA(e)===A)},managedCredentialChangePassword(A,j){return e=>{if(si(e)&&(A===wj.NewPassword||j===zc.ChangePassword)){let t=e.vault.getCombinedAcl()??0;return Kj.includes(t,xA.vaultACL.UpdateItem)}else return!0}}};function vb(A,...j){return!!A&&j.includes(A)}function Gb(A,j){return j.some(e=>{let t=(r,a)=>a&&A.templateUuid===r&&A.uuid===a.itemUuid&&A.vault.uuid===a.vaultUuid;return t(O6,e.preferredDetails?.identity)||t(ea,e.preferredDetails?.paymentCard)})}var d6={faved(A,j){return(j.faveIndex??0)-(A.faveIndex??0)},loginsBeforePasswords(A,j,e){if(!A.templateUuid&&!j.templateUuid)return 0;if(A.templateUuid&&!j.templateUuid)return-1;if(!A.templateUuid&&j.templateUuid)return 1;let t=vb(A.templateUuid,"001","005"),r=vb(j.templateUuid,"001","005");return!t&&!r?0:t&&!r?-1:!t&&r?1:A.templateUuid===j.templateUuid?d6.faved(A,j)||(e?e(A,j):0):A.templateUuid==="001"?-1:A.templateUuid==="005"?1:e?e(A,j):0},matchingCardsFirst(A,j){if(!(A.templateUuid&&j.templateUuid))return 0;let e=vb(A.templateUuid,"002"),t=vb(j.templateUuid,"002");if(!e&&!t)return 0;if(e&&!t)return-1;if(!e&&t)return 1;let r=A.overview.URLs!==void 0&&A.overview.URLs.length>0,a=j.overview.URLs!==void 0&&j.overview.URLs.length>0;return r&&a?0:r&&!a?-1:!r&&a?1:0},cardsBeforeIdentities(A,j){if(!(A.templateUuid&&j.templateUuid))return 0;let e=vb(A.templateUuid,"002","004"),t=vb(j.templateUuid,"002","004");return!e&&!t?0:e&&!t?-1:!e&&t?1:A.templateUuid===j.templateUuid?d6.matchingCardsFirst(A,j)||d6.faved(A,j):A.templateUuid==="002"?-1:A.templateUuid==="004"?1:0},localized(A){return(j,e)=>{let t=A.compare(j.title,e.title);return t!==0||j.overview.ainfo&&e.overview.ainfo&&(t=A.compare(j.overview.ainfo,e.overview.ainfo),t!==0)?t:j.uuid<e.uuid?-1:1}},tabInfo(A){let j=A.URL()?.hostname.split(".")||[];return(e,t)=>{let r=CaA(e.overview.URLs,j),a=CaA(t.overview.URLs,j);return r===a?0:r>a?-1:1}},suggestedSort(A){let j=d6.tabInfo(A);return(e,t)=>d6.loginsBeforePasswords(e,t,j)||d6.cardsBeforeIdentities(e,t)},fieldContextSort(A,j,e){let t=(n,o)=>{let i=Gb(n,e),s=Gb(o,e);return i&&!s?-1:!i&&s?1:0},r=(n,o)=>t(n,o)||d6.faved(n,o)||d6.tabInfo(A)(n,o);if(!j)return r;let a=(n,o)=>{let i=k=>(k.overview.ainfo??"").toLowerCase(),s=j.toLowerCase(),l=i(n),c=i(o);return l===c?0:l===s?-1:c===s?1:0};return(n,o)=>a(n,o)||r(n,o)},vaultSort(A,j){return xA.Vault.compare(A,j)}},KH=class{accounts;usersByAccountUUID;itemOverviews;templates;vaults;sorter;frozenAccountIds;constructor(j,e,t,r,a,n){this.sorter=new Intl.Collator(oA.set().locale,{sensitivity:"base"}),this.accounts=j,this.usersByAccountUUID=e,this.itemOverviews=t,this.templates=r,this.vaults=a,this.frozenAccountIds=n}items(j,e){let t=this.itemOverviews;j&&(t=this.itemOverviews.filter(j));let r=d6.localized(this.sorter);return t.sort((a,n)=>(e?e(a,n):0)||r(a,n)),t}tags(j,e){let t=this.items(j,e),r=[];for(let a of t)if(a.overview.tags&&a.overview.tags.length>0)for(let n of a.overview.tags)r.indexOf(n)===-1&&r.push(n);return r}activeItems(j=()=>!0){return this.items(e=>j(e)&&e.state===xA.VaultItem.ItemState.Active)}archivedItems(j=()=>!0){return this.items(e=>j(e)&&e.state===xA.VaultItem.ItemState.Archived)}itemsForTab(j,e,t){let r=ie.tabInfo(j),a=e?ie.combine(e,r):r;return this.fillableItems(a,t)}fillableItems(j,e){let t=[ie.invert(ie.archived),ie.fillable,ie.invert(ie.frozenAccountItem(this))];return j&&t.push(j),this.items(ie.combine(...t),e)}accountWithUUID(j){if(j)return this.accounts.find(e=>e.uuid===j)}vaultWithUUID(j,e){if(!e||!j)return;let t=this.vaults[e];if(t)return t.find(r=>r.uuid===j)}itemWithUUID(j,e){if(!j)return;let t=this.itemOverviews,r=e?n=>n.uuid===j&&n.vault.uuid===e:n=>n.uuid===j;return t.find(r)}itemWithLocalId(j){if(j)return this.itemOverviews.find(e=>j.type==="databaseId"?e.localId===j.data&&!e.cacheInformation:j.type==="cachedItem"?e.uuid===j.data.id&&e.cacheInformation?.provider===j.data.type:CH(j)?j.data.uuid===e.uuid&&si(e):void 0)}accountForVaultID(j){for(let e of Object.keys(this.vaults))if(this.vaults[e].find(a=>a.localId===j))return this.accounts.find(a=>a.uuid===e)}userForAccountUUID(j){return this.usersByAccountUUID[j]}totalItemCount(){return this.items().length}allAvailableCategories=j=>{let e=new Set;return this.items(a=>ie.archived(a)||j&&!j(a)||!a.templateUuid?!1:(e.add(a.templateUuid),!0)),Array.from(e).sort(([a],[n])=>this.sorter.compare(a,n)).map(a=>new xb(a,this.templateWithUUID(a)))};categoriesForNewPopup(j,e){let t=new Map,r=j?[j]:Object.keys(this.templates);for(let o of r)for(let i of this.templates[o])t.set(i.uuid,!1);this.items(o=>ie.archived(o)||e&&o.vault.uuid!==e||!o.vault.localId||j&&this.accountForVaultID(o.vault.localId)?.uuid!==j||!o.templateUuid?!1:(t.set(o.templateUuid,!0),!0));let a=Array.from(t).sort(([o],[i])=>this.sorter.compare(o,i)),n=!1;return a.reduce((o,[i,s],l)=>{let c=this.templateWithUUID(i);return c?o.push(new xb(i,c,s)):n=!0,l===a.length-1&&n&&o.push(new xb("000",void 0,!0)),o},[])}templateWithUUID=j=>{for(let[,e]of Object.entries(this.templates)){let t=e.find(r=>r.uuid===j);if(t)return t}}};function YUj(A,j){if(!j||(j=j.toUpperCase(),A.title.toUpperCase().indexOf(j)!==-1))return!0;if(A.overview.URLs){for(let e of A.overview.URLs)if(e.u&&e.u.toUpperCase().indexOf(j)!==-1||e.l&&e.l.toUpperCase().indexOf(j)!==-1)return!0}if(A.overview.ainfo&&A.overview.ainfo.toUpperCase().indexOf(j)!==-1)return!0;if(A.overview.tags){for(let e of A.overview.tags)if(e.toUpperCase().indexOf(j)!==-1)return!0}return!1}var ZUj={withStackTrace:!1},UCA=(A,j,e=ZUj)=>{let t=j.isOk()?{type:"Ok",value:j.value}:{type:"Err",value:j.error},r=e.withStackTrace?new Error().stack:void 0;return{data:t,message:A,stack:r}};function Ox(A,j,e,t){function r(a){return a instanceof e?a:new e(function(n){n(a)})}return new(e||(e=Promise))(function(a,n){function o(l){try{s(t.next(l))}catch(c){n(c)}}function i(l){try{s(t.throw(l))}catch(c){n(c)}}function s(l){l.done?a(l.value):r(l.value).then(o,i)}s((t=t.apply(A,j||[])).next())})}function LCA(A){var j=typeof Symbol=="function"&&Symbol.iterator,e=j&&A[j],t=0;if(e)return e.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&t>=A.length&&(A=void 0),{value:A&&A[t++],done:!A}}};throw new TypeError(j?"Object is not iterable.":"Symbol.iterator is not defined.")}function Iu(A){return this instanceof Iu?(this.v=A,this):new Iu(A)}function zCA(A,j,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(A,j||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",n),r[Symbol.asyncIterator]=function(){return this},r;function n(u){return function(m){return Promise.resolve(m).then(u,c)}}function o(u,m){t[u]&&(r[u]=function(F){return new Promise(function(S,G){a.push([u,F,S,G])>1||i(u,F)})},m&&(r[u]=m(r[u])))}function i(u,m){try{s(t[u](m))}catch(F){k(a[0][3],F)}}function s(u){u.value instanceof Iu?Promise.resolve(u.value.v).then(l,c):k(a[0][2],u)}function l(u){i("next",u)}function c(u){i("throw",u)}function k(u,m){u(m),a.shift(),a.length&&i(a[0][0],a[0][1])}}function AVj(A){var j,e;return j={},t("next"),t("throw",function(r){throw r}),t("return"),j[Symbol.iterator]=function(){return this},j;function t(r,a){j[r]=A[r]?function(n){return(e=!e)?{value:Iu(A[r](n)),done:!1}:a?a(n):n}:a}}function jVj(A){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j=A[Symbol.asyncIterator],e;return j?j.call(A):(A=typeof LCA=="function"?LCA(A):A[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(a){e[a]=A[a]&&function(n){return new Promise(function(o,i){n=A[a](n),r(o,i,n.done,n.value)})}}function r(a,n,o,i){Promise.resolve(i).then(function(s){a({value:s,done:o})},n)}}var no=class A{constructor(j){this._promise=j}static fromSafePromise(j){let e=j.then(t=>new Ic(t));return new A(e)}static fromPromise(j,e){let t=j.then(r=>new Ic(r)).catch(r=>new Pc(e(r)));return new A(t)}static fromThrowable(j,e){return(...t)=>new A(Ox(this,void 0,void 0,function*(){try{return new Ic(yield j(...t))}catch(r){return new Pc(e?e(r):r)}}))}static combine(j){return eVj(j)}static combineWithAllErrors(j){return tVj(j)}map(j){return new A(this._promise.then(e=>Ox(this,void 0,void 0,function*(){return e.isErr()?new Pc(e.error):new Ic(yield j(e.value))})))}andThrough(j){return new A(this._promise.then(e=>Ox(this,void 0,void 0,function*(){if(e.isErr())return new Pc(e.error);let t=yield j(e.value);return t.isErr()?new Pc(t.error):new Ic(e.value)})))}andTee(j){return new A(this._promise.then(e=>Ox(this,void 0,void 0,function*(){if(e.isErr())return new Pc(e.error);try{yield j(e.value)}catch{}return new Ic(e.value)})))}orTee(j){return new A(this._promise.then(e=>Ox(this,void 0,void 0,function*(){if(e.isOk())return new Ic(e.value);try{yield j(e.error)}catch{}return new Pc(e.error)})))}mapErr(j){return new A(this._promise.then(e=>Ox(this,void 0,void 0,function*(){return e.isOk()?new Ic(e.value):new Pc(yield j(e.error))})))}andThen(j){return new A(this._promise.then(e=>{if(e.isErr())return new Pc(e.error);let t=j(e.value);return t instanceof A?t._promise:t}))}orElse(j){return new A(this._promise.then(e=>Ox(this,void 0,void 0,function*(){return e.isErr()?j(e.error):new Ic(e.value)})))}match(j,e){return this._promise.then(t=>t.match(j,e))}unwrapOr(j){return this._promise.then(e=>e.unwrapOr(j))}safeUnwrap(){return zCA(this,arguments,function*(){return yield Iu(yield Iu(yield*AVj(jVj(yield Iu(this._promise.then(e=>e.safeUnwrap()))))))})}then(j,e){return this._promise.then(j,e)}[Symbol.asyncIterator](){return zCA(this,arguments,function*(){let e=yield Iu(this._promise);return e.isErr()&&(yield yield Iu(fb(e.error))),yield Iu(e.value)})}};function NH(A){return new no(Promise.resolve(new Ic(A)))}function fb(A){return new no(Promise.resolve(new Pc(A)))}var Qht=no.fromPromise,Yht=no.fromSafePromise,Zht=no.fromThrowable,VCA=A=>{let j=Pj([]);for(let e of A)if(e.isErr()){j=OA(e.error);break}else j.map(t=>t.push(e.value));return j},eVj=A=>no.fromSafePromise(Promise.all(A)).andThen(VCA),XCA=A=>{let j=Pj([]);for(let e of A)e.isErr()&&j.isErr()?j.error.push(e.error):e.isErr()&&j.isOk()?j=OA([e.error]):e.isOk()&&j.isOk()&&j.value.push(e.value);return j},tVj=A=>no.fromSafePromise(Promise.all(A)).andThen(XCA),Od;(function(A){function j(r,a){return(...n)=>{try{let o=r(...n);return Pj(o)}catch(o){return OA(a?a(o):o)}}}A.fromThrowable=j;function e(r){return VCA(r)}A.combine=e;function t(r){return XCA(r)}A.combineWithAllErrors=t})(Od||(Od={}));function Pj(A){return new Ic(A)}function OA(A){return new Pc(A)}var Ic=class{constructor(j){this.value=j}isOk(){return!0}isErr(){return!this.isOk()}map(j){return Pj(j(this.value))}mapErr(j){return Pj(this.value)}andThen(j){return j(this.value)}andThrough(j){return j(this.value).map(e=>this.value)}andTee(j){try{j(this.value)}catch{}return Pj(this.value)}orTee(j){return Pj(this.value)}orElse(j){return Pj(this.value)}asyncAndThen(j){return j(this.value)}asyncAndThrough(j){return j(this.value).map(()=>this.value)}asyncMap(j){return no.fromSafePromise(j(this.value))}unwrapOr(j){return this.value}match(j,e){return j(this.value)}safeUnwrap(){let j=this.value;return function*(){return j}()}_unsafeUnwrap(j){return this.value}_unsafeUnwrapErr(j){throw UCA("Called `_unsafeUnwrapErr` on an Ok",this,j)}*[Symbol.iterator](){return this.value}},Pc=class{constructor(j){this.error=j}isOk(){return!1}isErr(){return!this.isOk()}map(j){return OA(this.error)}mapErr(j){return OA(j(this.error))}andThrough(j){return OA(this.error)}andTee(j){return OA(this.error)}orTee(j){try{j(this.error)}catch{}return OA(this.error)}andThen(j){return OA(this.error)}orElse(j){return j(this.error)}asyncAndThen(j){return fb(this.error)}asyncAndThrough(j){return fb(this.error)}asyncMap(j){return fb(this.error)}unwrapOr(j){return j}match(j,e){return e(this.error)}safeUnwrap(){let j=this.error;return function*(){throw yield OA(j),new Error("Do not use this generator out of `safeTry`")}()}_unsafeUnwrap(j){throw UCA("Called `_unsafeUnwrap` on an Err",this,j)}_unsafeUnwrapErr(j){return this.error}*[Symbol.iterator](){let j=this;return yield j,j}},Aqt=Od.fromThrowable;var Pu=()=>!vt(),VaA=async(A,j,e,t)=>{let r=e?`${e.str}: `:"",a=t?` (${t.str})`:"";`${r}${j.str}${a}`;let n;try{n=await A()}catch(o){let i=`${r}function "${j.str}": failed${a}`;throw o}return`${r}${j.str}${a}`,n};function rVj(A){return Math.round(A*100)/100}async function JCA(A,j){if(j.length===0)return OA(new Error("A description of the function to execute, measure and log was not found."));let e=j.toLowerCase().replace(" ","-");performance.mark(e);let t;try{t=await A()}catch(a){return performance.clearMarks(e),OA(a)}let r=performance.measure(j,e).duration;return console.info(`Performance diagnostic: "${j}" took ${rVj(r)}ms to execute.`),Pj(t)}var WCA=A=>A instanceof Error;var QCA=A=>A.filter(j=>!(typeof j=="string"&&j.includes("color:"))).map(j=>typeof j=="string"?j.replace("%c",""):JSON.stringify(j)).join(" ").replace(/(\r\n|\n|\r)/gm," ").trim();var YCA="b5x-diagnostics",zg="logs";var XaA;(function(A){A[A.Transient=0]="Transient",A[A.Singleton=1]="Singleton",A[A.ResolutionScoped=2]="ResolutionScoped",A[A.ContainerScoped=3]="ContainerScoped"})(XaA||(XaA={}));var Bn=XaA;var h_A=J(g_A(),1),{__extends:bb,__assign:uqt,__rest:aVj,__decorate:Eqt,__param:pqt,__metadata:mqt,__awaiter:q_A,__generator:x_A,__exportStar:Bqt,__createBinding:gqt,__values:dP,__read:kP,__spread:Qk,__spreadArrays:hqt,__await:qqt,__asyncGenerator:xqt,__asyncDelegator:vqt,__asyncValues:Gqt,__makeTemplateObject:fqt,__importStar:Fqt,__importDefault:bqt,__classPrivateFieldGet:yqt,__classPrivateFieldSet:$qt}=h_A.default;var WaA="injectionTokens";function QaA(A){var j=Reflect.getMetadata("design:paramtypes",A)||[],e=Reflect.getOwnMetadata(WaA,A)||{};return Object.keys(e).forEach(function(t){j[+t]=e[t]}),j}function uP(A,j){return function(e,t,r){var a=Reflect.getOwnMetadata(WaA,e)||{};a[r]=j?{token:A,transform:j.transformToken,transformArgs:j.args||[]}:A,Reflect.defineMetadata(WaA,a,e)}}function EP(A){return!!A.useClass}function yb(A){return!!A.useFactory}var UH=function(){function A(j){this.wrap=j,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return A.prototype.createProxy=function(j){var e=this,t={},r=!1,a,n=function(){return r||(a=j(e.wrap()),r=!0),a};return new Proxy(t,this.createHandler(n))},A.prototype.createHandler=function(j){var e={},t=function(r){e[r]=function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];a[0]=j();var o=Reflect[r];return o.apply(void 0,Qk(a))}};return this.reflectMethods.forEach(t),e},A}();function Ug(A){return typeof A=="string"||typeof A=="symbol"}function YaA(A){return typeof A=="object"&&"token"in A&&"multiple"in A}function VH(A){return typeof A=="object"&&"token"in A&&"transform"in A}function v_A(A){return typeof A=="function"||A instanceof UH}function Rx(A){return!!A.useToken}function Dx(A){return A.useValue!=null}function G_A(A){return EP(A)||Dx(A)||Rx(A)||yb(A)}var nVj=function(){function A(){this._registryMap=new Map}return A.prototype.entries=function(){return this._registryMap.entries()},A.prototype.getAll=function(j){return this.ensure(j),this._registryMap.get(j)},A.prototype.get=function(j){this.ensure(j);var e=this._registryMap.get(j);return e[e.length-1]||null},A.prototype.set=function(j,e){this.ensure(j),this._registryMap.get(j).push(e)},A.prototype.setAll=function(j,e){this._registryMap.set(j,e)},A.prototype.has=function(j){return this.ensure(j),this._registryMap.get(j).length>0},A.prototype.clear=function(){this._registryMap.clear()},A.prototype.ensure=function(j){this._registryMap.has(j)||this._registryMap.set(j,[])},A}(),pP=nVj;var oVj=function(A){bb(j,A);function j(){return A!==null&&A.apply(this,arguments)||this}return j}(pP),f_A=oVj;var iVj=function(){function A(){this.scopedResolutions=new Map}return A}(),ZaA=iVj;function sVj(A,j){if(A===null)return"at position #"+j;var e=A.split(",")[j].trim();return'"'+e+'" at position #'+j}function lVj(A,j,e){return e===void 0&&(e="    "),Qk([A],j.message.split(`
`).map(function(t){return e+t})).join(`
`)}function A6A(A,j,e){var t=kP(A.toString().match(/constructor\(([\w, ]+)\)/)||[],2),r=t[1],a=r===void 0?null:r,n=sVj(a,j);return lVj("Cannot inject the dependency "+n+' of "'+A.name+'" constructor. Reason:',e)}function F_A(A){if(typeof A.dispose!="function")return!1;var j=A.dispose;return!(j.length>0)}var cVj=function(A){bb(j,A);function j(){return A!==null&&A.apply(this,arguments)||this}return j}(pP);var dVj=function(A){bb(j,A);function j(){return A!==null&&A.apply(this,arguments)||this}return j}(pP);var kVj=function(){function A(){this.preResolution=new cVj,this.postResolution=new dVj}return A}(),b_A=kVj;var j6A=new Map,uVj=function(){function A(j){this.parent=j,this._registry=new f_A,this.interceptors=new b_A,this.disposed=!1,this.disposables=new Set}return A.prototype.register=function(j,e,t){t===void 0&&(t={lifecycle:Bn.Transient}),this.ensureNotDisposed();var r;if(G_A(e)?r=e:r={useClass:e},Rx(r))for(var a=[j],n=r;n!=null;){var o=n.useToken;if(a.includes(o))throw new Error("Token registration cycle detected! "+Qk(a,[o]).join(" -> "));a.push(o);var i=this._registry.get(o);i&&Rx(i.provider)?n=i.provider:n=null}if((t.lifecycle===Bn.Singleton||t.lifecycle==Bn.ContainerScoped||t.lifecycle==Bn.ResolutionScoped)&&(Dx(r)||yb(r)))throw new Error('Cannot use lifecycle "'+Bn[t.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(j,{provider:r,options:t}),this},A.prototype.registerType=function(j,e){return this.ensureNotDisposed(),Ug(e)?this.register(j,{useToken:e}):this.register(j,{useClass:e})},A.prototype.registerInstance=function(j,e){return this.ensureNotDisposed(),this.register(j,{useValue:e})},A.prototype.registerSingleton=function(j,e){if(this.ensureNotDisposed(),Ug(j)){if(Ug(e))return this.register(j,{useToken:e},{lifecycle:Bn.Singleton});if(e)return this.register(j,{useClass:e},{lifecycle:Bn.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var t=j;return e&&!Ug(e)&&(t=e),this.register(j,{useClass:t},{lifecycle:Bn.Singleton})},A.prototype.resolve=function(j,e){e===void 0&&(e=new ZaA),this.ensureNotDisposed();var t=this.getRegistration(j);if(!t&&Ug(j))throw new Error('Attempted to resolve unregistered dependency token: "'+j.toString()+'"');if(this.executePreResolutionInterceptor(j,"Single"),t){var r=this.resolveRegistration(t,e);return this.executePostResolutionInterceptor(j,r,"Single"),r}if(v_A(j)){var r=this.construct(j,e);return this.executePostResolutionInterceptor(j,r,"Single"),r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},A.prototype.executePreResolutionInterceptor=function(j,e){var t,r;if(this.interceptors.preResolution.has(j)){var a=[];try{for(var n=dP(this.interceptors.preResolution.getAll(j)),o=n.next();!o.done;o=n.next()){var i=o.value;i.options.frequency!="Once"&&a.push(i),i.callback(j,e)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this.interceptors.preResolution.setAll(j,a)}},A.prototype.executePostResolutionInterceptor=function(j,e,t){var r,a;if(this.interceptors.postResolution.has(j)){var n=[];try{for(var o=dP(this.interceptors.postResolution.getAll(j)),i=o.next();!i.done;i=o.next()){var s=i.value;s.options.frequency!="Once"&&n.push(s),s.callback(j,e,t)}}catch(l){r={error:l}}finally{try{i&&!i.done&&(a=o.return)&&a.call(o)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(j,n)}},A.prototype.resolveRegistration=function(j,e){if(this.ensureNotDisposed(),j.options.lifecycle===Bn.ResolutionScoped&&e.scopedResolutions.has(j))return e.scopedResolutions.get(j);var t=j.options.lifecycle===Bn.Singleton,r=j.options.lifecycle===Bn.ContainerScoped,a=t||r,n;return Dx(j.provider)?n=j.provider.useValue:Rx(j.provider)?n=a?j.instance||(j.instance=this.resolve(j.provider.useToken,e)):this.resolve(j.provider.useToken,e):EP(j.provider)?n=a?j.instance||(j.instance=this.construct(j.provider.useClass,e)):this.construct(j.provider.useClass,e):yb(j.provider)?n=j.provider.useFactory(this):n=this.construct(j.provider,e),j.options.lifecycle===Bn.ResolutionScoped&&e.scopedResolutions.set(j,n),n},A.prototype.resolveAll=function(j,e){var t=this;e===void 0&&(e=new ZaA),this.ensureNotDisposed();var r=this.getAllRegistrations(j);if(!r&&Ug(j))throw new Error('Attempted to resolve unregistered dependency token: "'+j.toString()+'"');if(this.executePreResolutionInterceptor(j,"All"),r){var a=r.map(function(o){return t.resolveRegistration(o,e)});return this.executePostResolutionInterceptor(j,a,"All"),a}var n=[this.construct(j,e)];return this.executePostResolutionInterceptor(j,n,"All"),n},A.prototype.isRegistered=function(j,e){return e===void 0&&(e=!1),this.ensureNotDisposed(),this._registry.has(j)||e&&(this.parent||!1)&&this.parent.isRegistered(j,!0)},A.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},A.prototype.clearInstances=function(){var j,e;this.ensureNotDisposed();try{for(var t=dP(this._registry.entries()),r=t.next();!r.done;r=t.next()){var a=kP(r.value,2),n=a[0],o=a[1];this._registry.setAll(n,o.filter(function(i){return!Dx(i.provider)}).map(function(i){return i.instance=void 0,i}))}}catch(i){j={error:i}}finally{try{r&&!r.done&&(e=t.return)&&e.call(t)}finally{if(j)throw j.error}}},A.prototype.createChildContainer=function(){var j,e;this.ensureNotDisposed();var t=new A(this);try{for(var r=dP(this._registry.entries()),a=r.next();!a.done;a=r.next()){var n=kP(a.value,2),o=n[0],i=n[1];i.some(function(s){var l=s.options;return l.lifecycle===Bn.ContainerScoped})&&t._registry.setAll(o,i.map(function(s){return s.options.lifecycle===Bn.ContainerScoped?{provider:s.provider,options:s.options}:s}))}}catch(s){j={error:s}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(j)throw j.error}}return t},A.prototype.beforeResolution=function(j,e,t){t===void 0&&(t={frequency:"Always"}),this.interceptors.preResolution.set(j,{callback:e,options:t})},A.prototype.afterResolution=function(j,e,t){t===void 0&&(t={frequency:"Always"}),this.interceptors.postResolution.set(j,{callback:e,options:t})},A.prototype.dispose=function(){return q_A(this,void 0,void 0,function(){var j;return x_A(this,function(e){switch(e.label){case 0:return this.disposed=!0,j=[],this.disposables.forEach(function(t){var r=t.dispose();r&&j.push(r)}),[4,Promise.all(j)];case 1:return e.sent(),[2]}})})},A.prototype.getRegistration=function(j){return this.isRegistered(j)?this._registry.get(j):this.parent?this.parent.getRegistration(j):null},A.prototype.getAllRegistrations=function(j){return this.isRegistered(j)?this._registry.getAll(j):this.parent?this.parent.getAllRegistrations(j):null},A.prototype.construct=function(j,e){var t=this;if(j instanceof UH)return j.createProxy(function(a){return t.resolve(a,e)});var r=function(){var a=j6A.get(j);if(!a||a.length===0){if(j.length===0)return new j;throw new Error('TypeInfo not known for "'+j.name+'"')}var n=a.map(t.resolveParams(e,j));return new(j.bind.apply(j,Qk([void 0],n)))}();return F_A(r)&&this.disposables.add(r),r},A.prototype.resolveParams=function(j,e){var t=this;return function(r,a){var n,o,i;try{return YaA(r)?VH(r)?r.multiple?(n=t.resolve(r.transform)).transform.apply(n,Qk([t.resolveAll(r.token)],r.transformArgs)):(o=t.resolve(r.transform)).transform.apply(o,Qk([t.resolve(r.token,j)],r.transformArgs)):r.multiple?t.resolveAll(r.token):t.resolve(r.token,j):VH(r)?(i=t.resolve(r.transform,j)).transform.apply(i,Qk([t.resolve(r.token,j)],r.transformArgs)):t.resolve(r,j)}catch(s){throw new Error(A6A(e,a,s))}}},A.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},A}(),Re=new uVj;function EVj(A){return uP(A)}var Tx=EVj;function pVj(){return function(A){j6A.set(A,QaA(A))}}var XH=pVj;function mVj(){return function(A){XH()(A),Re.registerSingleton(A)}}var Oc=mVj;if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var r6A=(A,j)=>j.some(e=>A instanceof e),y_A,$_A;function BVj(){return y_A||(y_A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gVj(){return $_A||($_A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var a6A=new WeakMap,e6A=new WeakMap,JH=new WeakMap;function hVj(A){let j=new Promise((e,t)=>{let r=()=>{A.removeEventListener("success",a),A.removeEventListener("error",n)},a=()=>{e(Vg(A.result)),r()},n=()=>{t(A.error),r()};A.addEventListener("success",a),A.addEventListener("error",n)});return JH.set(j,A),j}function qVj(A){if(a6A.has(A))return;let j=new Promise((e,t)=>{let r=()=>{A.removeEventListener("complete",a),A.removeEventListener("error",n),A.removeEventListener("abort",n)},a=()=>{e(),r()},n=()=>{t(A.error||new DOMException("AbortError","AbortError")),r()};A.addEventListener("complete",a),A.addEventListener("error",n),A.addEventListener("abort",n)});a6A.set(A,j)}var n6A={get(A,j,e){if(A instanceof IDBTransaction){if(j==="done")return a6A.get(A);if(j==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Vg(A[j])},set(A,j,e){return A[j]=e,!0},has(A,j){return A instanceof IDBTransaction&&(j==="done"||j==="store")?!0:j in A}};function O_A(A){n6A=A(n6A)}function xVj(A){return gVj().includes(A)?function(...j){return A.apply(o6A(this),j),Vg(this.request)}:function(...j){return Vg(A.apply(o6A(this),j))}}function vVj(A){return typeof A=="function"?xVj(A):(A instanceof IDBTransaction&&qVj(A),r6A(A,BVj())?new Proxy(A,n6A):A)}function Vg(A){if(A instanceof IDBRequest)return hVj(A);if(e6A.has(A))return e6A.get(A);let j=vVj(A);return j!==A&&(e6A.set(A,j),JH.set(j,A)),j}var o6A=A=>JH.get(A);function WH(A,j,{blocked:e,upgrade:t,blocking:r,terminated:a}={}){let n=indexedDB.open(A,j),o=Vg(n);return t&&n.addEventListener("upgradeneeded",i=>{t(Vg(n.result),i.oldVersion,i.newVersion,Vg(n.transaction),i)}),e&&n.addEventListener("blocked",i=>e(i.oldVersion,i.newVersion,i)),o.then(i=>{a&&i.addEventListener("close",()=>a()),r&&i.addEventListener("versionchange",s=>r(s.oldVersion,s.newVersion,s))}).catch(()=>{}),o}function R_A(A,{blocked:j}={}){let e=indexedDB.deleteDatabase(A);return j&&e.addEventListener("blocked",t=>j(t.oldVersion,t)),Vg(e).then(()=>{})}var GVj=["get","getKey","getAll","getAllKeys","count"],fVj=["put","add","delete","clear"],t6A=new Map;function w_A(A,j){if(!(A instanceof IDBDatabase&&!(j in A)&&typeof j=="string"))return;if(t6A.get(j))return t6A.get(j);let e=j.replace(/FromIndex$/,""),t=j!==e,r=fVj.includes(e);if(!(e in(t?IDBIndex:IDBObjectStore).prototype)||!(r||GVj.includes(e)))return;let a=async function(n,...o){let i=this.transaction(n,r?"readwrite":"readonly"),s=i.store;return t&&(s=s.index(o.shift())),(await Promise.all([s[e](...o),r&&i.done]))[0]};return t6A.set(j,a),a}O_A(A=>({...A,get:(j,e,t)=>w_A(j,e)||A.get(j,e,t),has:(j,e)=>!!w_A(j,e)||A.has(j,e)}));var FVj=["continue","continuePrimaryKey","advance"],I_A={},i6A=new WeakMap,D_A=new WeakMap,bVj={get(A,j){if(!FVj.includes(j))return A[j];let e=I_A[j];return e||(e=I_A[j]=function(...t){i6A.set(this,D_A.get(this)[j](...t))}),e}};async function*yVj(...A){let j=this;if(j instanceof IDBCursor||(j=await j.openCursor(...A)),!j)return;j=j;let e=new Proxy(j,bVj);for(D_A.set(e,j),JH.set(e,o6A(j));j;)yield e,j=await(i6A.get(e)||j.continue()),i6A.delete(e)}function P_A(A,j){return j===Symbol.asyncIterator&&r6A(A,[IDBIndex,IDBObjectStore,IDBCursor])||j==="iterate"&&r6A(A,[IDBIndex,IDBObjectStore])}O_A(A=>({...A,get(j,e,t){return P_A(j,e)?yVj:A.get(j,e,t)},has(j,e){return P_A(j,e)||A.has(j,e)}}));var $Vj="cl_by_date",wVj=7,mP=class A{db;static open=async()=>{let e=await WH(YCA,1,{upgrade:(t,r)=>{switch(console.info(`Upgrading diagnostics database from version ${r} to 1.`,t),r){case 0:t.createObjectStore(zg,{keyPath:"id",autoIncrement:!0}).createIndex($Vj,"date")}},terminated(){console.error("\u{1F494} The browser closed our diagnostics database connection for reasons beyond our control.")},blocked(){console.error("\u{1F494} The diagnostics database connection was blocked by a lower version connection still being open.")}});return e.addEventListener("versionchange",t=>{console.error("\u{1F494} This diagnostics database connection is blocking newer versions from connecting."),console.error("diagnostics.event.dataLoss:",t.dataLoss),console.error("diagnostics.event.dataLossMessage:",t.dataLossMessage)}),new A(e)};constructor(j){this.db=j}getConsoleLogs=async()=>this.db.transaction(zg,"readonly").objectStore(zg).getAll();saveConsoleLog=async j=>{await this.db.transaction(zg,"readwrite").objectStore(zg).put(j)};purgeOutdatedConsoleLogs=async(j=wVj)=>{let e=new Date;e.setDate(e.getDate()-j);let t=e.getTime(),a=this.db.transaction(zg,"readwrite").objectStore(zg);for await(let n of a)n.value.timestamp<t&&await a.delete(n.primaryKey)}};var Ou=class{_database;_preInitializationQueue=[];openDatabase=async(j=Symbol())=>{for(let e=0;e<5;e++){let t=2e3+e*1e3;try{return await j6.withTimeout(mP.open(),t,`Opening the diagnostics database timed out using a ${t/1e3} second limit.`,j)}catch(r){if(r!==j)throw r}}return j6.withTimeout(mP.open(),6e4,"Opening the diagnostics database timed out using a 60 second limit.")};initDatabase=async()=>{if(!Pu())return!1;try{return this._database=await this.openDatabase(),await this._database.purgeOutdatedConsoleLogs(),!0}catch{return console.error("We were unable to open the diagnostics database."),!1}};isInitialized=j=>!!j;getConsoleLogs=async()=>this._database?.getConsoleLogs()??[];saveConsoleLog=async(j,e)=>{let t={date:oP(),timestamp:Date.now(),message:QCA(j),type:e,origin:"Background"};if(!this.isInitialized(this._database)){this._preInitializationQueue.push(t);return}if(this._preInitializationQueue.length>0){let r=this._preInitializationQueue;this._preInitializationQueue=[];for(let a of r)await this._database?.saveConsoleLog(a)}await this._database.saveConsoleLog(t)};purgeOutdatedConsoleLogs=async j=>{if(!this.isInitialized(this._database)){console.warn("Unable to clear the logs. The diagnostics database was not initialized.");return}await this._database.purgeOutdatedConsoleLogs(j)}},Rd=Re.resolve(Ou);var Ze=A=>A instanceof q.LoggableError||A instanceof xe,Mn=(A,j)=>Ze(A)?A:j(),QH=(A,j)=>Pu()?(...t)=>{for(let r=0;r<t.length;r++){let a=t[r];WCA(a)&&!Ze(a)&&(t[r]="<redacted>")}A.apply(console,t);try{Rd.saveConsoleLog(t,j)}catch{}}:A;function s6A(A){let j=`${A} not yet initialized. Try awaiting for this.init() to resolve before calling.`,e=new q.LoggableError({errorClass:p`BrowserStorage`,message:q.logsafe.assertLogSafe(j)});return vt()||rj(e),e}var YH=class{_storageType;_initError;_memoryStore;_initPromise;_getStorage=()=>{switch(this._storageType){case"PersistentStorage":return browser.storage.local;default:return browser.storage.session}};constructor(j,e){this._storageType=j,this._initError=e}async init(){return this._initPromise?this._initPromise.then(()=>this):(this._initPromise=(async()=>{console.info(`[BackgroundStorage] Using browser.storage.${this._storageType.replace("Storage","").toLowerCase()}`);let j=this._getStorage();this._memoryStore=await j.get(),j.setAccessLevel&&j.setAccessLevel({accessLevel:"TRUSTED_CONTEXTS"})})(),this._initPromise.then(()=>this))}async reconcileItems(){this._memoryStore=await this._getStorage().get()}getItem(j){if(!this._memoryStore)throw this._initError(this._storageType);return this._memoryStore[j]??void 0}setItem(j,e){if(!this._memoryStore)throw this._initError(this._storageType);let t=this._memoryStore[j];this._memoryStore[j]=e,this._getStorage().set({[j]:e}).catch(()=>{this._memoryStore={...this._memoryStore,[j]:t}})}removeItem(j){if(!this._memoryStore)throw this._initError(this._storageType);let e=this._memoryStore[j];this._memoryStore[j]=void 0,this._getStorage().remove(j).catch(()=>{this._memoryStore={...this._memoryStore,[j]:e}})}clear(){if(!this._memoryStore)throw this._initError(this._storageType);let j={...this._memoryStore};this._memoryStore={},this._getStorage().clear().catch(()=>{this._memoryStore=j})}},ZH=class extends YH{constructor(){super("PersistentStorage",s6A)}},AM=class extends YH{constructor(){super("SessionStorage",s6A)}};var jM=class{_inited=!1;_storage;constructor(){this._storage=new Map}async init(){return this._inited||(this._inited=!0,console.info("[BackgroundStorage] Using MemoryStorage")),Promise.resolve(this)}async reconcileItems(){return Promise.resolve()}getItem(j){return this._storage.get(j)}setItem(j,e){this._storage.set(j,e)}removeItem(j){this._storage.delete(j)}clear(){this._storage.clear()}};var T_A=A=>({init:async()=>A().init(),reconcileItems:async()=>A().reconcileItems(),getItem:j=>A().getItem(j),setItem:(j,e)=>A().setItem(j,e),removeItem:j=>A().removeItem(j),clear:()=>A().clear()}),vj=T_A(()=>Re.resolve("PersistentStorage")),je=T_A(()=>Re.resolve("SessionStorage"));var l6A="restore-point";function C_A(){return je.getItem(l6A)}function __A(A){je.setItem(l6A,A)}function Xg(){je.removeItem(l6A)}var BP=class{_itemCachePromise;_itemCache;_itemCacheLogger;constructor(){this._itemCachePromise=null,this._itemCache=null,this._itemCacheLogger=new rt("\u231B\uFE0F Loading item cache")}clearItemCache(){this._itemCachePromise=this._itemCache=null}get itemCache(){return this._itemCache}async loadItemCache(){if(!this._itemCachePromise){console.warn("The item cache has not been initialized yet.");return}return this._itemCachePromise}async loadAndDecryptItemCache(j=!1){try{if(!j)try{Xg()}catch(e){let t="Unable to delete restore point";throw console.error(`${t}: ${C6(e)}`),new q.LoggableError({errorClass:p`LoadAndDecryptItemCacheError`,message:q.logsafe.assertLogSafe(t)})}return this._itemCachePromise=new Promise(e=>{let t=[];this._itemCacheLogger.info(`${H.numberOfAccountHandlers} account handlers found.`);for(let r of H.getAccountHandlers){if(r.isLocked){this._itemCacheLogger.info(`Account with UUID ${r.uuid} is locked and did not append as a promise.`);continue}if(r.mustMigrateAuth){this._itemCacheLogger.info(`Account with UUID ${r.uuid} must migrate authentication methods and did not append as a promise.`);continue}t.push(r.loadAndDecryptItemOverviews())}this._itemCacheLogger.info(`${t?.length} promises created for loading and decrypting item overviews.`),Promise.all(t).then(async()=>{this._itemCacheLogger.info("The promises for loading and decrypting item overviews were resolved.");let r=[],a=[],n={},o={},i={};for(let c of H.getAccountHandlers){if(c.isLocked){this._itemCacheLogger.info(`Account with UUID ${c.uuid} is locked and was not appended as an account, user, template or vault.`);continue}if(!c.user)throw new q.LoggableError({errorClass:p`LoadAndDecryptItemCacheError`,message:p`Missing user for unlocked account.`});r=r.concat(c.items||[]),a.push(c.b5account),i[c.b5account.uuid]=c.user,n[c.b5account.uuid]=c.templates??[],o[c.b5account.uuid]=c.vaults}this._itemCacheLogger.info(`Items: ${r?.length}. Accounts: ${a?.length}.`);let s=await H.getFrozenAccountsInfo(),l=new KH(a,i,r,n,o,s.frozenAccounts);this._itemCache=l,lj("items-updated",void 0),e(l)})}),this._itemCachePromise}catch(e){let t="Received an error when loading and decrypting the item cache";throw Ze(e)?(rj(e),t=`${t}: ${e.name} - ${e.message}`):rj(new q.LoggableError({errorClass:p`ItemCacheHandler`,message:q.logsafe.assertLogSafe(t)})),console.error(t),e}}},zj=Re.resolve(BP);var S_A={addAccount:{notificationManagerEnabled:!0},autosave:{notificationManagerEnabled:!0,maximumPageChangeCount:4},autosaveTotp:{notificationManagerEnabled:!0},passkeySigningIn:{notificationManagerEnabled:!0,disableCollapse:!0},passkeySavePrompt:{fullscreen:!0,notificationManagerEnabled:!0},passkeyGenericError:{notificationManagerEnabled:!0},saveSocialLogin:{notificationManagerEnabled:!0,maximumPageChangeCount:4},suggestSocialLogin:{notificationManagerEnabled:!0},sshOnboardingNextSteps:{notificationManagerEnabled:!0,maximumPageChangeCount:4},shellPlugins:{notificationManagerEnabled:!0},shellPluginsSuccess:{notificationManagerEnabled:!0},shellPluginsFallback:{notificationManagerEnabled:!0},signInTo1Password:{notificationManagerEnabled:!0},generatedPasswordUserOffline:{notificationManagerEnabled:!0},generatedPasswordNoDefaultSavingLocation:{notificationManagerEnabled:!0},generatedPasswordAccountIsLocked:{notificationManagerEnabled:!0},generatedPasswordNotSignedIn:{notificationManagerEnabled:!0},generatedPasswordNoVaultFound:{notificationManagerEnabled:!0},generatedPasswordUnexpectedError:{notificationManagerEnabled:!0},watchtowerBreachDetected:{notificationManagerEnabled:!0},deviceTrustBlocking:{fullscreen:!0,blurBackground:!0,disableKeyboardClose:!0,blockPageElements:!0,notificationManagerEnabled:!0},deviceTrustNoKolide:{fullscreen:!0,blurBackground:!0,disableKeyboardClose:!0,blockPageElements:!0,notificationManagerEnabled:!0},deviceTrustNeedsUnlock:{fullscreen:!0,blurBackground:!0,disableKeyboardClose:!0,blockPageElements:!0,notificationManagerEnabled:!0},deviceTrustNonBlocking:{notificationManagerEnabled:!0},deviceTrustSuccess:{notificationManagerEnabled:!0,autoFocus:!0},notificationManager:{}};var H_A={"bad-rp-id":!0,disabled:!0,"fallback-requested":!0,"missing-url":!0,"missing-public-key":!0,"unexpected-response":!0,"port-error":!0,timeout:!0,unauthorized:!0,unknown:!0,"user-cancelled":!0,"vault-data-failed":!0,"messenger-error":!0,"internal-error":!0},M_A={...H_A,"create-passkey-failed":!0,duplicate:!0,"preview-failed":!0,"save-passkey-failed":!0},K_A={...H_A,"authenticating-failed":!0,"conflicting-state":!0,"corrupted-item":!0,"missing-cached-id":!0,"missing-item":!0,"vault-icons-failed":!0};var IsA=J(Dd());var d6A,ZSA=async()=>{if(d6A)return d6A;let A;try{A=await iP(browser.runtime.sendNativeMessage("",{name:"request-os-version"}),500)}catch(j){console.error(j)}if(!(!A||typeof A!="string"))return d6A=A,A};var xa={};er(xa,{activeTab:()=>st,activeTabs:()=>u7,addAccountPrompt:()=>F5,addAccountPromptNotification:()=>RVA,allTabs:()=>CE,blurActiveField:()=>xiA,captureVisibleTab:()=>wVA,closeMigration:()=>ssA,closeSsoTab:()=>W8,computeSuggestions:()=>D8,createTabSpecificContextMenus:()=>jiA,currentWindow:()=>WiA,decodeTotpQrCode:()=>IVA,downloadData:()=>_0,executeScript:()=>MVA,getFrameInfoFromContentScript:()=>J8,getTab:()=>L6,getTabForB5AccountCreation:()=>BsA,handleCollectedPageDetails:()=>rsA,handleOpenB5UnlockScreen:()=>hsA,handleOpenImportPage:()=>gsA,handleOpenSettings:()=>nsA,handleOpenSupportLink:()=>asA,handleOpenTab:()=>dsA,injectInlineCSS:()=>PVA,isBrowserFocused:()=>tsA,isCreditCardField:()=>psA,isEmptyPageURL:()=>coA,isIdentityField:()=>msA,isInAccountCreationOnboarding:()=>Q8,notifyActiveTabsCanRequestUnlockChanged:()=>XnA,notifyActiveTabsInlineMenuRefresh:()=>l7,notifyActiveTabsLockStateChanged:()=>N8,notifyFrozenAccountInfoChanged:()=>EsA,notifySettingsChanged:()=>siA,onTabUpdated:()=>_VA,openAccountInOpb:()=>liA,openAccountProfilePage:()=>BN,openB5Tab:()=>ME,openBenchmarking:()=>osA,openBrowserTab:()=>ZP,openChangelog:()=>pnA,openContactFormWithDiagnostics:()=>s8,openEmailPreferencesPage:()=>BnA,openErrorMessage:()=>Zg,openExtensionFirstSurvey:()=>mnA,openHelp:()=>EnA,openHomePageInB5Web:()=>KVA,openImportPage:()=>LM,openIntegrationsPage:()=>ciA,openItemForSharing:()=>poA,openItemInB5:()=>RE,openItemUrl:()=>i8,openMfaTab:()=>JiA,openMigration:()=>isA,openMigrationEnforcement:()=>GiA,openNewItemPage:()=>viA,openSettings:()=>h0,openUrlInTab:()=>hv,openWatchtowerSection:()=>g5,openWithData:()=>OVA,removeInlineExclusionOnActiveTab:()=>ksA,reportFeedback:()=>X8,requestFillAuthorization:()=>Bv,scanTotpQrCode:()=>o8,showInlineInFirstLoginField:()=>usA,showPrivacyIntegrationPage:()=>Coe,showReadyToGoPage:()=>lsA,showWelcomePage:()=>Zm,showWelcomePageInOnboardingTab:()=>csA,showWhatsNewPrivacyBlogPost:()=>_oe});function Bm(A){if(!A)return!1;A=A.toLowerCase();let j=["1password.ca","1password.com","1password.eu","b5dev.ca","b5dev.com","b5dev.eu","b5local.com","b5staging.com","b5test.ca","b5test.com","b5test.eu","b5rev.com"];for(let e of j)if(A===e||A.endsWith("."+e))return!0;return!1}var k6A=(...A)=>{if(A.length===0)return"";if(A.length===1)return A[0];let j=A.shift();if(j){for(let e of A)e.length!==0&&(j.slice(-1)==="/"&&e.charAt(0)==="/"?j=j+e.slice(1):j.slice(-1)==="/"||e.charAt(0)==="/"?j=j+e:j=j+"/"+e);return j}return""},iQj=A=>{let j=atob(A.split(",")[1]),e=A.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(j.length),r=new Uint8Array(t);for(let a=0;a<j.length;a++)r[a]=j.charCodeAt(a);return new Blob([t],{type:e})};async function AHA(A){let j=iQj(A);return ka()?sQj(j):lQj(j)}async function sQj(A){let j=await createImageBitmap(A),t=new OffscreenCanvas(j.width,j.height).getContext("2d");if(!t)throw Error("Unable to retrieve 2d context");return t.drawImage(j,0,0),{imageData:t.getImageData(0,0,j.width,j.height),width:j.width,height:j.height}}async function lQj(A){let j=URL.createObjectURL(A);return new Promise(e=>{let t=document.createElement("canvas"),r=t.getContext("2d");if(r){let a=new Image;a.addEventListener("load",()=>{t.width=a.width,t.height=a.height,r.drawImage(a,0,0,t.width,t.height),e({imageData:r.getImageData(0,0,t.width,t.height),width:t.width,height:t.height})},!1),a.src=j}})}function vP(A){try{let j=new URL(A);return j.protocol===`${$7.OtpAuth}:`||j.protocol===`${$7.Yjotp}:`||j.protocol===`${$7.AppleOtpAuth}:`}catch{return!1}}var jHA=()=>{let e=0;return vt()?e=25:e=22,{width:600,height:450+e}};async function u6A(A,j){for(let e of A)if(await j(e))return e}function eHA(A){let j=[];for(let e of A){if(e.isErr())return OA(e.error);j.push(e.value)}return Pj(j)}var E6A={"test-pre-reg-feature":!1,"b5x-sso-unlock":!1,"b5x-safari-biometry":!1,"b5x-account-hydration":!1,"b5x-firefox-data-collection-ui":!1,"b5x-pre-auth-tracing":!1,"b5x-notification-manager":!1,"b5x-sls-extension-first-setup":!1},Db=Object.keys(E6A);var gm={"account-test-feature":!1,"b2b-individual-vault-reporting":!1,"xam-dvr-hpke-encryption":!1,"b2b-reporting-policy":!1,"b5x-autosave-identities":!1,"b5x-autosave-suggested-password":!1,"b5x-autosave-totp":!1,"b5x-equal-inline-width":!1,"b5x-next-gen-inline":!1,"b5x-recollect-fields-for-identities":!1,"core-date-time-localization":!1,"b5x-fix-filling-events":!1,"b2b-complete-trust-identity":!1,"b5x-filling-saving-telemetry":!1,"b5x-watchtower-breach-notification":!0,"securityDevelopment-passkeyPRF":!1,"securityDevelopment-autolock-extendedDurationOptions":!1,"core-securityDevelopment-openAndFill-enforcement":!1,"b5x-single-pane-popup":!1,"core-securityDevelopment-sync-notifierConnection":!1,"frameworks-autolock-longerDefault":!1,"frameworks-telem-applock-event":!1,"b5x-trusted-mouse-down-events":!1,"b5x-client-performance-tracing":!1,"auth-self-serve-migration-v1":!1,"b5x-metric-gate-inline-menu-render":!1,"b5x-a-a-test":!1,"b5x-inline-menu-prominent-cta":!1,"b5x-auto-lock-policies":!1,"b5x-restrict-failed-login-attempts":!1,"oph-empty-states-item-details-import-nudge":!1,"core-help-menu-consistency":!1,"telemetry-data-collection":!1,"telemetry-high-volume-events-denied":!1,"authx-autolock_settings-profiles":!1,"gql-b5x-sidebar":!1,"core-admin-auto-fill-prompt-policy":!1,"b5x-inline-live-region-for-voiceover":!1,"core-authx-server_session_keepalive":!1,"experiment-b5x-a-a-test-all-users-20241128":!1,"experiment-b5x-inline-menu-prominent-cta-all-users-20241128":!1,"b5x-authx-unlock-notifications":!1,"b5x-kolide-device-trust-for-all":!1,"b5x-launchpad":!1,"frameworks-kolide-apps-sync":!1,"frameworks-dt4a-allow-disabled":!1,"extension-first-for-sso":!1,"extension-first-survey":!1,"extension-first-for-sso-scim":!1,"b2b-extension-first-guided-setup":!1,"b5x-login-detection":!1,"b5x-popup-catalog-apps":!1,"b5x-trelica-activity-reporting":!1,"b5x-extension-feedback-loop":!1,"managed-credentials":!1,"managed-credentials-uplift-kill-switch":!1,"b5x-universal-sign-on":!1,"b5x-sie-sign-in-urls":!1,"b5x-unified-panel":!1,"experiment-b5x-a-a-test-production-20260827":!1,"experiment-b5x-a-b-test-production-20250826":!1,"app-launcher-data-sync":!1,"b5x-phishing-detection":!1,"b5-authx-security_review-policy":!1},GE=Object.keys(gm);var tHA="b5x",u6="accounts",Wx="keysets",_o="vaults",Rc="items",hm="item-details",Zk="item-usage",qm="item-templates",Qx="device",GP="icons",Yx="cache",Td="policies",zl="managed-credentials",xm="managed-credentials-policies",A7="managed-credentials-usage",Dc="kolide-apps",Zx="kolide-agent-creds",vm="user-actions-history",fP="a_by_uuid",uM="k_by_account_id",p6A="v_by_uuid",m6A="v_by_account_id",B6A="v_by_account_id_and_type",rHA="i_by_uuid",g6A="i_by_account_id",h6A="i_by_vault_id",aHA="d_by_account_id",q6A="u_by_account_id",EM="t_by_account_id",x6A="f_by_file_id",nHA="c_by_account_id",v6A="c_by_account_id_type",G6A="p_by_account_uuid",pM="k_a_by_account_uuid",FP="mc_by_account_uuid",mM="mcp_by_account_uuid",f6A="mcu_by_account_uuid",F6A="uac_by_account_uuid",Tb=class A{db;static open=async(j,e)=>{let r=await WH(tHA,20,{upgrade:(a,n)=>{switch(console.info(`Upgrading database from version ${n} to 20.`,a),e&&e(!0),n){case 0:{let o=a.createObjectStore(u6,{keyPath:"id",autoIncrement:!0}),i=a.createObjectStore(Wx,{keyPath:"id",autoIncrement:!0}),s=a.createObjectStore(_o,{keyPath:"id",autoIncrement:!0}),l=a.createObjectStore(Rc,{keyPath:"id",autoIncrement:!0}),c=a.createObjectStore(hm);o.createIndex(fP,"uuid",{unique:!0}),i.createIndex(uM,"account_id"),s.createIndex(p6A,["account_id","uuid"],{unique:!0}),s.createIndex(m6A,"account_id"),s.createIndex(B6A,["account_id","type"]),l.createIndex(rHA,["vault_id","uuid"],{unique:!0}),l.createIndex(h6A,"vault_id"),l.createIndex(g6A,"account_id"),c.createIndex(aHA,"account_id")}case 2:a.createObjectStore(qm,{keyPath:"id",autoIncrement:!0}).createIndex(EM,"account_id");case 3:a.createObjectStore(Qx,{keyPath:"id",autoIncrement:!0});case 4:a.createObjectStore(GP,{keyPath:"id",autoIncrement:!0}).createIndex(x6A,"fileId",{unique:!0});case 8:{let o=a;o.objectStoreNames.contains("device-keys")&&o.deleteObjectStore("device-keys"),o.objectStoreNames.contains("public-device-keys")&&o.deleteObjectStore("public-device-keys")}case 9:{let o=a.createObjectStore(Yx,{autoIncrement:!0});o.createIndex(nHA,"account_id"),o.createIndex(v6A,["account_id","type"],{unique:!0})}case 10:a.objectStoreNames.contains(Zk)&&a.deleteObjectStore(Zk),a.createObjectStore(Zk,{autoIncrement:!0}).createIndex(q6A,"account_id");case 11:a.objectStoreNames.contains(Td)&&a.deleteObjectStore(Td),a.createObjectStore(Td,{keyPath:["policyContext","policyName"]}).createIndex(G6A,"account_uuid");case 12:a.objectStoreNames.contains(Td)&&a.deleteObjectStore(Td),a.createObjectStore(Td,{keyPath:["account_uuid","policyContext","policyName"]}).createIndex(G6A,"account_uuid");case 13:a.objectStoreNames.contains(Dc)&&a.deleteObjectStore(Dc),a.createObjectStore(Dc,{keyPath:["name","accountUuid"]}).createIndex(pM,"accountUuid");case 14:{let o=Zx;a.objectStoreNames.contains(o)&&a.deleteObjectStore(o),a.createObjectStore(o,{keyPath:["accountUUID","userUUID"]})}case 15:a.objectStoreNames.contains(zl)&&a.deleteObjectStore(zl),a.createObjectStore(zl,{keyPath:["uuid","accountUuid"]}).createIndex(FP,"accountUuid");case 16:a.objectStoreNames.contains(xm)&&a.deleteObjectStore(xm),a.createObjectStore(xm,{keyPath:["uuid","accountUuid"]}).createIndex(mM,"accountUuid");case 17:a.objectStoreNames.contains(zl)&&a.deleteObjectStore(zl),a.createObjectStore(zl,{keyPath:["b5Uuid","accountUuid"]}).createIndex(FP,"accountUuid");case 18:a.objectStoreNames.contains(A7)&&a.deleteObjectStore(A7),a.createObjectStore(A7,{autoIncrement:!0}).createIndex(f6A,"accountUuid");case 19:a.objectStoreNames.contains(vm)&&a.deleteObjectStore(vm),a.createObjectStore(vm,{autoIncrement:!0}).createIndex(F6A,"c.a")}e&&e(!1)},terminated(){console.error("\u{1F494} The browser closed our database connection for reasons beyond our control."),j&&j()},blocked(){console.error("\u{1F494} The database connection was blocked by a lower version connection still being open.")}});return r.addEventListener("versionchange",a=>{console.error("\u{1F494} This database connection is blocking newer versions from connecting."),console.error("event.dataLoss:",a.dataLoss),console.error("event.dataLossMessage:",a.dataLossMessage)}),new A(r)};constructor(j){this.db=j}async checkThatDatabaseIsAvailable(){try{return await this.db.transaction(u6,"readonly").objectStore(u6).count(),!0}catch{return!1}}saveEncryptedCache=async j=>{let t=this.db.transaction(Yx,"readwrite").objectStore(Yx),a=await t.index(v6A).getKey([j.account_id,j.type]);return a?t.put(j,a):t.put(j)};getEncryptedCache=async(j,e)=>this.db.transaction(Yx,"readonly").objectStore(Yx).index(v6A).get([j,e]);saveAccount=async j=>{let r=await this.db.transaction(u6,"readwrite").objectStore(u6).put(j);j.id=r};getAllAccounts=async()=>(await this.db.transaction(u6,"readonly").objectStore(u6).getAll()).sort((r,a)=>(r.id??0)-(a.id??0));findAccountByUUID=async j=>this.db.transaction(u6,"readonly").objectStore(u6).index(fP).get(j);deleteAccountWithUUID=async(j,e)=>{let t=await this.findAccountByUUID(j);if(t){if(!t?.id)return Promise.reject(new Error("Unable to delete account. Account id is undefined."))}else return Promise.reject(new Error("Unable to delete account. Account with the given UUID could not be found."));let r=this.db.transaction([u6,Wx,_o,Rc,hm,qm,Zk,Yx,Dc,zl,xm,A7,vm],"readwrite");r.objectStore(u6).delete(t.id);let n=r.objectStore(Wx),o=n.index(uM);for await(let tj of o.iterate(IDBKeyRange.only(t.id))){if(!tj)break;n.delete(tj.primaryKey)}let i=r.objectStore(_o),s=r.objectStore(Rc),l=s.index(g6A),c=[],k=new Map;l.getAllKeys(IDBKeyRange.only(t.id)).then(async tj=>{for(let LA of tj){let Qj=await s.get(LA);if(Qj&&Qj.vault_id){k.has(Qj.vault_id)||k.set(Qj.vault_id,(await i.get(Qj.vault_id))?.uuid);let Oj=k.get(Qj.vault_id);Oj&&c.push({vaultUuid:Oj,itemUuid:Qj.uuid})}s.delete(LA)}});let u=i.index(m6A);for await(let tj of u.iterate(IDBKeyRange.only(t.id))){if(!tj)break;i.delete(tj.primaryKey)}let m=r.objectStore(hm);m.index(aHA).getAllKeys(IDBKeyRange.only(t.id)).then(tj=>{for(let LA of tj)m.delete(LA)});let S=r.objectStore(qm);S.index(EM).getAllKeys(IDBKeyRange.only(t.id)).then(tj=>{for(let LA of tj)S.delete(LA)});let x=r.objectStore(Zk);x.index(q6A).getAllKeys(IDBKeyRange.only(t.id)).then(tj=>{for(let LA of tj)x.delete(LA)});let P=r.objectStore(Yx),D=P.index(nHA);for(let tj of await D.getAllKeys(IDBKeyRange.only(t.id)))P.delete(tj);let y=r.objectStore(Dc);y.index(pM).getAllKeys(IDBKeyRange.only(t.uuid)).then(tj=>{for(let LA of tj)y.delete(LA)});let O=r.objectStore(zl);O.index(FP).getAllKeys(IDBKeyRange.only(t.uuid)).then(tj=>{for(let LA of tj)O.delete(LA)});let AA=r.objectStore(xm);AA.index(mM).getAllKeys(IDBKeyRange.only(t.uuid)).then(tj=>{for(let LA of tj)AA.delete(LA)});let bA=r.objectStore(A7);bA.index(f6A).getAllKeys(IDBKeyRange.only(t.uuid)).then(tj=>{for(let LA of tj)bA.delete(LA)});let dj=r.objectStore(vm);dj.index(F6A).getAllKeys(IDBKeyRange.only(t.uuid)).then(tj=>{for(let LA of tj)dj.delete(LA)}),await r.done,e?.({deletedItemUuids:c,accountUuid:t.uuid})};getKeysetsForAccount=async j=>this.db.transaction(Wx,"readonly").objectStore(Wx).index(uM).getAll(j);replaceAccountKeysets=async(j,e)=>{let t=this.db.transaction([u6,Wx],"readwrite"),r=t.objectStore(u6),a=t.objectStore(Wx);a.index(uM).getAllKeys(IDBKeyRange.only(j.id)).then(o=>{for(let i of o)a.delete(i)});for(let o of e.keysets)o.account_id=j.id,a.put(o);return j.keysetVersion=e.version,r.put(j),t.done};resetAccountKeysets=async j=>this.replaceAccountKeysets(j,{version:0,keysets:[]});getAllVaultsForAccount=async j=>this.db.transaction(_o,"readonly").objectStore(_o).index(m6A).getAll(j);getVaultWithUUID=async(j,e)=>this.db.transaction(_o,"readonly").objectStore(_o).index(p6A).get([j,e]);getGeneratedPasswordVault=async j=>{let a=await this.db.transaction(_o,"readonly").objectStore(_o).index(B6A).get([j,"G"]);if(a)return Array.isArray(a)?a[0]:a};getSystemVault=async j=>{let t=await this.db.transaction(_o,"readonly").objectStore(_o).index(B6A).get([j,xA.Vault.TypeSystem]);if(t)return Array.isArray(t)?t[0]:t};getAccountUUIDForVaultUUID=async j=>{let e=this.db.transaction([u6,_o],"readonly"),t=e.objectStore(u6),a=e.objectStore(_o).index(p6A),n=await t.getAllKeys();for(let o of n){if(!await a.get([o,j]))continue;let s=await t.get(o);return s?s.uuid:void 0}};hasGeneratedPasswordVault=async j=>!!await this.getGeneratedPasswordVault(j);hasSystemVault=async j=>!!await this.getSystemVault(j);saveVault=async j=>{let r=await this.db.transaction(_o,"readwrite").objectStore(_o).put(j);return j.id=r,j};deleteVault=async(j,e)=>{let t=this.db.transaction([_o,Rc,hm],"readwrite"),r=t.objectStore(_o),a=(await r.get(j))?.uuid;r.delete(j);let n=t.objectStore(Rc),o=t.objectStore(hm),i=n.index(h6A),s=[];i.getAllKeys(IDBKeyRange.only(j)).then(async l=>{for(let c of l){if(a){let k=await n.get(c);k&&s.push({vaultUuid:a,itemUuid:k.uuid})}n.delete(c),o.delete(c)}}),await t.done,e?.({deletedItemUuids:s})};getItem=async j=>{let e=this.db.transaction([Rc,hm],"readonly"),t=e.objectStore(Rc),r=e.objectStore(hm),[a,n]=await Promise.all([t.get(j),r.get(j)]);if(a)return a.encDetails=n,a};updateItemsFromServer=async(j,e,t)=>{let r=this.db.transaction([_o,Rc,hm],"readwrite"),a=r.objectStore(_o),n=r.objectStore(Rc),o=r.objectStore(hm),i=n.index(rHA);if(!j?.id)return Promise.reject(new Error("Unable to update items from server. Given vault has undefined ID."));let s=[];if(e.deletedItemUuids)for(let c of e.deletedItemUuids){let k=await i.getKey([j.id,c]);k&&(await n.delete(k),await o.delete(k),s.push({vaultUuid:j.uuid,itemUuid:c}))}let l=[];if(e.items)for(let c of e.items){let k={account_id:j.account_id,vault_id:j.id,...c};if(k.packageUuid===""&&delete k.packageUuid,!k.encDetails)continue;let u={account_id:k.account_id,...k.encDetails};delete k.encDetails;let m=await i.getKey([j.id,k.uuid]);m&&(k.id=m),m=await n.put(k),await o.put(u,m),l.push({vaultUuid:j.uuid,itemUuid:k.uuid})}j.contentVersion=e.contentVersion,await a.put(j),await r.done,t?.({deletedItemUuids:s,upsertedItemUuids:l})};getItemOverviewsForAccount=async j=>this.db.transaction(Rc,"readonly").objectStore(Rc).index(g6A).getAll(j);getItemOverviewsForVault=async j=>this.db.transaction(Rc,"readonly").objectStore(Rc).index(h6A).getAll(j);markItemUsed=async(j,e,t,r)=>{let n=this.db.transaction([Zk],"readwrite").objectStore(Zk),o={account_id:j,item_uuid:e.uuid,vault_uuid:t.uuid,used_at:Date.now(),used_version:e.itemVersion,action:r};await n.put(o)};findItemUsageRequiringSync=async j=>{let r=this.db.transaction([Zk],"readonly").objectStore(Zk).index(q6A),a=[];for await(let n of r.iterate(IDBKeyRange.only(j))){if(!n)break;let o=n.value;o.id=n.primaryKey,a.push(o)}return a};markItemUsageSynced=async j=>{let t=this.db.transaction([Zk],"readwrite").objectStore(Zk);for(let r of j)r?.id&&await t.delete(r.id)};saveTemplates=async(j,e)=>{let t=this.db.transaction([u6,qm],"readwrite"),r=t.objectStore(u6),a=t.objectStore(qm),n=a.index(EM),o=e.templates,i=await n.getAll(j.id),s=[],l=i.filter(c=>!o.find(k=>k.uuid===c.uuid));for(let c of l)c?.id&&s.push(a.delete(c.id));for(let c of o){c.account_id=j.id;let k=i.find(u=>c.uuid===u.uuid);k?(c.id=k.id,c.account_id=k.account_id,s.push(a.put(c))):(c.account_id=j.id,s.push(a.put(c)))}return await Promise.all(s),hn({languageChanged:!1}),j.templateVersion=e.version,await r.put(j),t.done};getTemplates=async j=>this.db.transaction(qm,"readonly").objectStore(qm).index(EM).getAll(j);getAllTemplates=async()=>this.db.transaction(qm,"readonly").objectStore(qm).getAll();getDeviceUUID=async()=>{let e=this.db.transaction(Qx,"readwrite").objectStore(Qx),t=await e.getAll();if(t&&t.length>0)return t[0].uuid;let r=q.generateUUID();return await e.put({uuid:r}),r};setDeviceUUID=async j=>{let e=this.db.transaction(Qx,"readwrite");return await e.objectStore(Qx).put({uuid:j}),e.done};getSWEDeviceUUID=async()=>{let t=await this.db.transaction(Qx,"readonly").objectStore(Qx).getAll();if(t&&t.length>0)return t[0].uuid};saveIcon=async(j,e)=>{let r=this.db.transaction(GP,"readwrite").objectStore(GP);await r.index(x6A).count(j)<1&&r.put({fileId:j,encryptedFile:e})};getIcon=async j=>{let a=await this.db.transaction(GP,"readonly").objectStore(GP).index(x6A).get(j);return a?a.encryptedFile:null};saveAccountPolicies=async(j,e)=>{let r=this.db.transaction(Td,"readwrite").objectStore(Td);for(let a of e)await r.put({...a,account_uuid:j})};getAccountPolicies=async j=>this.db.transaction(Td,"readonly").objectStore(Td).index(G6A).getAll(j);savePoliciesVersionForAccount=async(j,e)=>{let r=this.db.transaction(u6,"readwrite").objectStore(u6),n=await r.index(fP).get(j);n&&(n.policiesVersion=e,await r.put(n))};getAllPolicies=async()=>this.db.transaction(Td,"readonly").objectStore(Td).getAll();getAllDeviceTrustConfigs=async()=>{let e=this.db.transaction(Dc,"readonly").objectStore(Dc),t;try{t=await e.getAll()}catch{throw new xe({errorClass:p`db-getAll-failed`,message:p`could not get app list from DB`})}let r={};for(let a of t)r[a.accountUuid]||(r[a.accountUuid]={account:{uuid:a.accountUuid,name:a.accountName},enabled:await this.getDeviceTrustEnabledForAccount(a.accountUuid),appList:[]}),r[a.accountUuid].appList.push(a);return Object.values(r)};getDeviceTrustEnabledForAccount=async j=>(await this.db.transaction(u6,"readonly").objectStore(u6).index(fP).get(j))?.deviceTrustEnabled??!1;getKolideAppsForAccount=async j=>this.db.transaction(Dc,"readonly").objectStore(Dc).index(pM).getAll(j);removeKolideAppsForAccount=async j=>{let e=this.db.transaction(Dc,"readwrite"),r=e.objectStore(Dc).index(pM),a=new Set(j.appList.map(n=>n.name));for await(let n of r.iterate(j.account.uuid)){let o=n.value;if(!a.has(o.name))try{await n.delete()}catch(i){console.error(`\u{1F4E5} Failed to delete Device Trust app ${o.name} for account: ${j.account.uuid}:`,i)}}await e.done};async replaceManagedCredentialsForAccount(j,e,t,r){let a=this.db.transaction([zl,u6],"readwrite"),n=a.objectStore(zl),o=a.objectStore(u6),s=await n.index(FP).getAllKeys(IDBKeyRange.only(e.uuid)),l=[];await Promise.all(s.map(async c=>{await n.delete(c),l.push(c[0])})),await Promise.all(t.map(async c=>n.add(c))),e.managedCredentialsVersion=j,await o.put(e),await a.done,r&&r(e,t,l)}async getManagedCredential(j,e){return this.db.transaction(zl).objectStore(zl).get(IDBKeyRange.only([e,j]))}async getManagedCredentialsForAccount(j){return this.db.transaction(zl,"readonly").objectStore(zl).index(FP).getAll(IDBKeyRange.only(j))}async replaceManagedCredentialsPolicies(j,e,t){let r=this.db.transaction([xm,u6],"readwrite"),a=r.objectStore(xm),n=r.objectStore(u6),i=await a.index(mM).getAllKeys(IDBKeyRange.only(e.uuid));await Promise.all(i.map(async s=>a.delete(s))),await Promise.all(t.map(async s=>a.add(s))),e.managedCredentialsPolicyVersion=j,await n.put(e),await r.done}async getManagedCredentialsPolicies(j){return this.db.transaction(xm).objectStore(xm).index(mM).getAll(IDBKeyRange.only(j))}markManagedCredentialUsed=async(j,e,t,r)=>{let n=this.db.transaction([A7],"readwrite").objectStore(A7),o={accountUuid:j,credential:{b5Uuid:e,version:t},usedAt:Date.now(),action:r};await n.put(o)};recordUserActionHistoryEvent=async j=>{await this.db.transaction([vm],"readwrite").objectStore(vm).put(j)};async getActionHistoryEventForAccount(j){return this.db.transaction(vm,"readonly").objectStore(vm).index(F6A).getAll(IDBKeyRange.only(j))}findManagedCredentialsUsageRequiringSync=async j=>{let r=this.db.transaction([A7],"readonly").objectStore(A7).index(f6A),a=[];for await(let n of r.iterate(IDBKeyRange.only(j))){if(!n)break;a.push({...n.value,id:n.primaryKey})}return a};markManagedCredentialsUsageSynced=async j=>{let t=this.db.transaction([A7],"readwrite").objectStore(A7);for(let r of j)r?.id&&await t.delete(r.id)};saveKolideAppsForAccount=async(j,e,t)=>{let a=this.db.transaction(Dc,"readwrite").objectStore(Dc);for(let n of e.appList)try{await a.put({...n,accountName:j.name,accountUuid:j.uuid})}catch(o){console.error(`Failed to store app ${n.name} for account: ${j.uuid}:`,o)}t&&await this.saveKolideAppsMetadataForAccount(j.uuid,t,e.enabled)};saveKolideAppsMetadataForAccount=async(j,e,t)=>{let a=this.db.transaction(u6,"readwrite").objectStore(u6),o=await a.index(fP).get(j);o&&(o.kolideAppsVersion=e,o.deviceTrustEnabled=t,await a.put(o))};getKolideCredentialsForAccount=async({accountUUID:j,userUUID:e})=>this.db.transaction(Zx,"readonly").objectStore(Zx).get([j,e]);saveKolideCredentials=async j=>{await this.db.transaction(Zx,"readwrite").objectStore(Zx).put(j)};clearKolideCredentialsForAccount=async({accountUUID:j,userUUID:e})=>{await this.db.transaction(Zx,"readwrite").objectStore(Zx).delete([j,e])};resetDatabase=async()=>{this.db.close(),await R_A(tHA)}};var bP="open-db-terminated-error-page",oHA=A=>{if(A instanceof Error){if(A.name==="QuotaExceededError")return console.error("Storage quota exceeded. Try freeing up disk space."),"db-quota-exceeded";if(A.name==="InvalidStateError"&&A.message==="A mutation operation was attempted on a database that did not allow mutations."&&vt())return console.error('Could not open the database because "Never Remember History" was enabled.'),"db-invalid-state"}return"db-unknown"};var yP=class{_database;getDatabase=()=>{if(!this._database)throw new q.LoggableError({errorClass:p`GetDatabaseError`,message:p`The database has not been initialized yet.`});return this._database};initDatabase=async()=>{try{return this._database=await this.openDatabase(),!0}catch(j){return Zg(oHA(j)),this.reportDatabaseError(j instanceof Error?j.message:"We were unable to open the database."),!1}};isInitialized=()=>!!this._database;openDatabase=async(j=Symbol())=>{for(let e=0;e<5;e++){let t=2e3+e*1e3;try{return await j6.withTimeout(Tb.open(this.handleDbTerminated,this.handleDbUpgrading),t,`Opening the database timed out using a ${t/1e3} second limit.`,j)}catch(r){if(r!==j)throw r}}return j6.withTimeout(Tb.open(this.handleDbTerminated,this.handleDbUpgrading),6e4,"Opening the database timed out using a 60 second limit.")};handleDbTerminated=async()=>this.resetDatabase(!0);_isUpgradingPromise=void 0;_isUpgradingPromiseResolver=void 0;upgradingPromise=async()=>this._isUpgradingPromise;handleDbUpgrading=j=>{if(j&&this._isUpgradingPromise===void 0){this._isUpgradingPromise=new Promise(e=>{this._isUpgradingPromiseResolver=e});return}!j&&this._isUpgradingPromiseResolver&&(this._isUpgradingPromiseResolver(),this._isUpgradingPromiseResolver=void 0,this._isUpgradingPromise=void 0)};resetDatabase=async(j=!1)=>{try{await this.getDatabase().resetDatabase(),vj.clear()}finally{j&&T6()?Zg("db-terminated"):j&&!Bt()&&vj.setItem(bP,"enabled"),chrome.runtime.reload()}};checkThatDatabaseCanBeReopened=async()=>{try{return(await Tb.open(this.handleDbTerminated,this.handleDbUpgrading)).checkThatDatabaseIsAvailable()}catch(j){return console.error(j),!1}};_hasAttemptedToReopenDatabase=!1;checkThatDatabaseIsAvailable=async()=>{let j=await this.getDatabase().checkThatDatabaseIsAvailable();return!j&&!this._hasAttemptedToReopenDatabase&&(console.info(`\u{1F6E0} Attempted to reopen database. Success: ${await this.checkThatDatabaseCanBeReopened()}`),this._hasAttemptedToReopenDatabase=!0,this.reportDatabaseError("The database is currently not available and may have become corrupt.")),j};reportDatabaseError(j){rj(new q.LoggableError({errorClass:p`DatabaseConnection`,message:q.logsafe.assertLogSafe(j)}))}},SA=Re.resolve(yP);var Qs="/assets/png/onepassword-128-47NWBQHU.png";var dQj="b5xReloaded",Av=class{_persistentStorage;constructor(j){this._persistentStorage=j}isEnabled=()=>{let{devtoolsEnabled:j}=WA();return j};addAccountPromptEnabled=()=>this._persistentStorage.getItem("devtools-add-account-prompt")!=="N";sendLocalSentryEnabled=()=>{let j=this._persistentStorage.getItem("devtools-send-local-sentry");return j?j==="Y":!1};forceKolideDeviceTrustFailEnabled=()=>{let j=this._persistentStorage.getItem("devtools-force-kolide-device-trust-fail");return j?j==="Y":!1};reloadExtension=()=>{ve()||chrome.notifications.create(dQj,this.getReloadNotification(),()=>{chrome.runtime.reload()})};toggleAddAccountPrompt=()=>{this._persistentStorage.setItem("devtools-add-account-prompt",this.addAccountPromptEnabled()?"N":"Y")};toggleSendLocalSentry=()=>{this._persistentStorage.setItem("devtools-send-local-sentry",this.sendLocalSentryEnabled()?"N":"Y")};toggleForceKolideDeviceTrustFail=()=>{this._persistentStorage.setItem("devtools-force-kolide-device-trust-fail",this.forceKolideDeviceTrustFailEnabled()?"N":"Y")};getReloadNotification=()=>({type:"basic",iconUrl:Qs,title:"1Password Reloaded \u{1F504}\u2705",message:"Don't forget to reload any open tabs before testing."})};Av=m6([Oc(),eG(0,Tx("PersistentStorage"))],Av);var K6=()=>Re.resolve(Av);var iHA=A=>{if(ve())return;let j=K6();j.isEnabled()&&A.url.startsWith("http://reload.1password")&&(j.reloadExtension(),chrome.tabs.remove(A.tabId))};var gM=class extends Error{code;constructor(j,e){super(),this.code=j,this.message=e||"",this.name="B5XClientError"}toString(){return`B5XClientError: ${this.message} (${this.code})`}},sHA=(A,j)=>lc(A)&&A.name==="B5XClientError"&&(!j||j===A.code);var WUA=J(Dd());var kQj="SessionStorage",b6A="context-initialization",y6A=A=>$P().get(A),hM=A=>{if(!A){console.warn("Missing data when attempting to set cache");return}let j=$P(),e=y6A(A.accountUuid),t={...A,session:A.session||e?.session,srpX:A.srpX||e?.srpX};j.set(t.accountUuid,t),uHA(j)},lHA=(A,j,e)=>{let t=y6A(A);t&&(t.session=j,t.srpX=e,hM(t))},cHA=(A,j)=>{let e=y6A(A);e&&e.session&&(e.session={...e.session,requestID:j},hM(e))},dHA=A=>{let j=$P();j.delete(A),uHA(j)},kHA=()=>$6A().removeItem(b6A),$P=()=>{let A=$6A().getItem(b6A);return A?new Map(JSON.parse(atob(A))):new Map},uHA=A=>{$6A().setItem(b6A,btoa(JSON.stringify([...A])))},$6A=()=>Re.resolve(kQj);function EQj(){let A=ui();return Number.parseInt(A,10)||0}function ki(A,j){let{host:e}=new URL(A);return new NA.Context({host:e,shouldResetWhenSessionExpires:!1,server:e.split(".").slice(1).join("."),inWebView:!0,lang:WA().language,opua:{client:{shortCode:q.ClientShortCode.OnePasswordExtension,buildNum:EQj(),channel:void 0,commitHash:"edba9ccae448".substring(0,7)},deviceUuid:j}})}var qHA=J(tA());var jv=J(tA()),EHA=jv.exact(jv.type({name:jv.literal("experiment-b5x-a-a-test-production-20260827-control"),value:jv.type({})}));var ev=J(tA()),pHA=ev.exact(ev.type({name:ev.literal("experiment-b5x-a-a-test-production-20260827-treatment"),value:ev.type({})}));var tv=J(tA()),mHA=tv.exact(tv.type({name:tv.literal("experiment-b5x-a-b-test-production-20250826-control"),value:tv.type({})}));var rv=J(tA()),BHA=rv.exact(rv.type({name:rv.literal("experiment-b5x-a-b-test-production-20250826-treatment"),value:rv.type({})}));var vo=J(tA()),gHA=vo.exact(vo.type({name:vo.literal("testVariant"),value:vo.intersection([vo.type({description:vo.string,showButton:vo.boolean}),vo.partial({optionalField:vo.string})])})),hHA=vo.exact(vo.type({name:vo.literal("test-variant-2"),value:vo.type({})}));var pQj=qHA.union([gHA,hHA,EHA,pHA,mHA,BHA]),xHA=pQj;var qs=new rt("\u26F3\uFE0F Feature flags"),Cb=class A{compileTimeFlags=A.getCompileTimeFlags();static getCompileTimeFlags(){return new Set}};var w6A="account-feature-flags",qM=class extends Cb{cache;storage=vj;accountBasedCompileTimeFlags=new Set;constructor(){super(),this.cache=new Map,GE.forEach(j=>{this.compileTimeFlags.has(j)&&this.accountBasedCompileTimeFlags.add(j)})}async initializeCache(){(await this.getFeaturesFromStorage()).forEach((e,t,r)=>{this.cache.set(t,e)})}updateFlag(j,e){let t=this.cache.get(e);if(t===void 0)t=[j];else{let r=t.findIndex(a=>a.name===j.name);r<0?t.push(j):t[r]=j}this.cache.set(e,t),this.updateStorage()}getFlag(j,e){if(this.accountBasedCompileTimeFlags.has(j))return{name:j,enabled:!0,metadata:{isOverridden:!0}};let t=this.cache.get(e)?.find(r=>r.name===j);return t||null}removeFlag(j,e){let t=this.cache.get(e);if(t){let r=t.findIndex(a=>a.name===j);r>=0&&t.splice(r,1),t.length===0?this.cache.delete(e):this.cache.set(e,t),this.updateStorage()}}getAllFlags(j){let e={};for(let r of this.compileTimeFlags.values())e[r]={name:r,enabled:!0,metadata:{isOverridden:!0}};let t=this.cache.get(j)||[];for(let r of t)Object.prototype.hasOwnProperty.call(e,r.name)||(e[r.name]=r);return Object.values(e)}removeAllFlags(j){this.cache.delete(j),this.updateStorage()}get accounts(){return this.cache.keys()}async getFeaturesFromStorage(){await this.storage.init();let j=this.storage.getItem(w6A);return j?new Map(JSON.parse(j)):new Map}updateStorage(){this.cache.size===0?this.storage.removeItem(w6A):this.storage.setItem(w6A,JSON.stringify([...this.cache]))}getCache(){return this.cache}};var I6A="pre-registration-features",vHA="pre-registration-feature-updates",xM=class extends Cb{cache;storage=vj;preRegCompileTimeFlags=new Set;constructor(){super(),this.cache=new Map,Db.forEach(j=>{this.compileTimeFlags.has(j)&&this.preRegCompileTimeFlags.add(j)})}async initializeCache(){let j=await this.getFeaturesFromStorage();this.cache=j;let e=Array.from(j.keys());qs.info(`Loading pre-registration flags from persistent storage:
			${e.join(", ")}`)}getFlag(j){if(this.preRegCompileTimeFlags.has(j))return{name:j,enabled:!0,metadata:{isOverridden:!0}};let e=this.cache.get(j);return e||null}updateFlag(j){this.cache.set(j.name,j),this.updateStorage()}removeFlag(j){this.cache.delete(j),this.updateStorage()}removeAllFlags(){this.cache.clear(),this.updateStorage()}async getFeaturesFromStorage(){await this.storage.init();let j=this.storage.getItem(I6A);return j?new Map(JSON.parse(j)):new Map}getLastUpdated(){let j=this.storage.getItem(vHA);if(j){let e=parseInt(j,10);return Number.isInteger(e)?e:null}else return null}setLastUpdated(){this.storage.setItem(vHA,Date.now().toString())}getCache(){return this.cache}updateStorage(){this.cache.size===0?this.storage.removeItem(I6A):this.storage.setItem(I6A,JSON.stringify([...this.cache]))}};var mQj=1e3*60*60*6,Ni=class{accountBasedStore;preRegStore;constructor(){this.accountBasedStore=new qM,this.preRegStore=new xM,qs.info("Initialized feature flags manager.")}anyAccountHasFlag(j,e){return this.firstAccountWithFlag(j)!==void 0}firstAccountWithFlag(j){let e=this.accountBasedStore.accounts;for(let t of e){let r=this.accountBasedStore.getFlag(j,t);if(r&&r.enabled)return t}}accountHasFlag(j,e,t){let r=this.accountBasedStore.getFlag(e,j);return r?r.enabled:!1}hasPreRegistrationFlag=j=>{let e=this.preRegStore.getFlag(j);return e?e.enabled:!1};getAllFlagsForAccount(j,e){return this.accountBasedStore.getAllFlags(j)}async updateFlagsForAccount(j,e,t){let r=await this.accountBasedStore.getFeaturesFromStorage(),a=new Set(r.get(j)?.map(o=>o.name)),n=new Set;this.accountBasedStore.removeAllFlags(j);for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;a.delete(o)||n.add(o);let i=e[o];this.accountBasedStore.updateFlag({name:o,enabled:i?.enabled??!1,metadata:{isOverridden:!1,...i?.variant&&{variantPayload:i?.variant}}},j)}qs.info(`Updating account-based flags in persistent storage:
			AccountUuid: ${j}
			Downloaded Flags: ${JSON.stringify(e)}
			Updated Flags:
			  - Removed: ${JSON.stringify([...a])}
			  - Added: ${JSON.stringify([...n])}`)}async updatePreRegistrationFlags(j,e){let t=await this.preRegStore.getFeaturesFromStorage(),r=new Set(t.keys()),a=new Set;this.preRegStore.removeAllFlags();for(let n in j){if(!Object.prototype.hasOwnProperty.call(j,n))continue;r.delete(n)||a.add(n);let o=j[n];this.preRegStore.updateFlag({name:n,enabled:o?.enabled??!1,metadata:{isOverridden:!1,...o?.variant&&{variantPayload:o?.variant}}})}this.preRegStore.setLastUpdated(),qs.info(`Updating pre-registration flags in persistent storage:
					Downloaded Flags: ${JSON.stringify(j)}
					Updated Flags:
						- Removed: ${JSON.stringify([...r])}
						- Added: ${JSON.stringify([...a])}`)}shouldUpdatePreRegFeatures(j){let e=this.preRegStore.getLastUpdated();return Date.now()-(e??0)>mQj}removeAccount(j,e){qs.info(`Cleared flags for account ${j}`),this.accountBasedStore.removeAllFlags(j),globalThis.dispatchEvent(new Event(Jn))}devToggleAccountFeature(j,e){let t=!this.anyAccountHasFlag(j);for(let r of this.accountBasedStore.accounts){let a=this.accountBasedStore.getFlag(j,r);this.accountBasedStore.updateFlag({name:j,enabled:t,metadata:{isOverridden:!0,...a?.metadata?.variantPayload&&{variantPayload:a?.metadata?.variantPayload}}},r)}globalThis.dispatchEvent(new Event(Jn)),qs.info(`Toggled flag ${j} for all accounts. New value: ${t}`)}devTogglePreRegFeature(j,e){let t=this.preRegStore.getFlag(j),r=!t?.enabled||!1;this.preRegStore.updateFlag({name:j,enabled:r,metadata:{isOverridden:!0,...t?.metadata?.variantPayload&&{variantPayload:t?.metadata?.variantPayload}}}),globalThis.dispatchEvent(new Event(Jn)),qs.info(`Toggled pre-registration flag ${j}. New value: ${r}`)}async initializeFeatureFlagsCache(j){await this.accountBasedStore.initializeCache(),await this.preRegStore.initializeCache()}getAllAccountBasedFlags(j){return this.accountBasedStore.getCache()}getAllPreRegistrationFlags(j){return this.preRegStore.getCache()}getAccountBasedFeatureVariant(j,e){let t=this.accountBasedStore.getFlag(e,j)?.metadata?.variantPayload;if(t)return this.getVariantFromPayload(t)}getPreRegistrationVariant(j){let e=this.preRegStore.getFlag(j)?.metadata?.variantPayload;if(e)return this.getVariantFromPayload(e)}getVariantFromPayload(j){if(j?.name)return BQj(j)}};m6([Xk],Ni.prototype,"anyAccountHasFlag",1),m6([Xk],Ni.prototype,"firstAccountWithFlag",1),m6([Xk],Ni.prototype,"accountHasFlag",1),m6([Xk],Ni.prototype,"getAllFlagsForAccount",1),m6([$H],Ni.prototype,"updateFlagsForAccount",1),m6([$H],Ni.prototype,"updatePreRegistrationFlags",1),m6([Xk],Ni.prototype,"shouldUpdatePreRegFeatures",1),m6([Xk],Ni.prototype,"removeAccount",1),m6([Xk],Ni.prototype,"devToggleAccountFeature",1),m6([Xk],Ni.prototype,"devTogglePreRegFeature",1),m6([$H],Ni.prototype,"initializeFeatureFlagsCache",1),m6([Xk],Ni.prototype,"getAllAccountBasedFlags",1),m6([Xk],Ni.prototype,"getAllPreRegistrationFlags",1);var BQj=A=>{try{return zS(xHA,A)}catch(j){qs.error(`Failed to validate variant for payload: {name: ${A.name}, value: ${A.value}}`,j);return}};var ZA=new Ni,GHA=async(A,j)=>Na.asyncObserve("collectFeatureFlags","featureFlags",async e=>Promise.all(A.map(async t=>{let r=t.uuid;await Na.asyncObserve("getFeatureFlags","featureFlags",async a=>t.getFeatureFlags(a).then(async n=>ZA.updateFlagsForAccount(r,n,{componentName:"featureFlags",span:a})).catch(n=>{qs.error(`Failed to retrieve flags from server: ${n}`)}),e)})).then(()=>{globalThis.dispatchEvent(new Event(Jn))}),j),fHA=async(A,j)=>{try{if(ZA.shouldUpdatePreRegFeatures()){let e=await Na.asyncObserve("downloadPreRegFlagsFromServer","featureFlags",async t=>gQj(Db,A,t),j);await ZA.updatePreRegistrationFlags(e,{componentName:"featureFlags"})}}catch(e){qs.error(`Failed to retrieve preregistration flags from server: ${e instanceof Error?e.message:"unknown error"}`)}},Ah=()=>{let A=Object.keys(gm),j=Object.keys(E6A),e={};for(let t of A){let r=ZA.anyAccountHasFlag(t);e[t]=r}for(let t of j){let r=ZA.hasPreRegistrationFlag(t);e[t]=r}return e};var FHA=()=>{let A={},j=ZA.getAllAccountBasedFlags();for(let[e,t]of j)for(let r of t){let a=ZA.getAccountBasedFeatureVariant(e,r.name);a&&(A[r.name]=a)}return A},bHA=(A,j)=>ZA.getAccountBasedFeatureVariant(A,j),yHA=A=>ZA.getPreRegistrationVariant(A);function P6A(){let A={accountBased:{},preRegistration:{}};return Db.forEach(j=>{A.preRegistration[j]=ZA.hasPreRegistrationFlag(j)}),GE.forEach(j=>{A.accountBased[j]=ZA.anyAccountHasFlag(j,{componentName:"featureFlags"})}),A}var $HA=()=>ZA.getAllAccountBasedFlags(),wHA=()=>{let A=ZA.getAllAccountBasedFlags();return Array.from(A.values()).flatMap(e=>e).filter((e,t,r)=>t===r.findIndex(a=>a.name===e.name&&a.enabled===e.enabled&&a.metadata===e.metadata)).filter(e=>e.enabled)};var IHA=()=>Array.from(ZA.getAllPreRegistrationFlags().values()).filter(A=>A.enabled),gQj=async(A,j,e)=>{let t=ki("https://my.1password.com",j);return(await Na.asyncObserve("b5.action.getPreAuthFeatures","featureFlags",async a=>NA.getPreAuthFeatures(t,A,a.traceId,a.spanId),e)).features.reduce((a,n)=>(Db.includes(n.name)?a[n.name]={enabled:!0,variant:n.variantPayload}:qs.warn("Non-preregistration feature returned from pre-auth endpoint!"),a),{})},PHA=()=>{let A=ZA.getAllAccountBasedFlags();if(A.size===0)return[];let j=Array.from(A.values()).map(r=>new Set(r.filter(a=>a.enabled).map(a=>a.name))),e=j[0];if(j.length===1)return Array.from(e);let t=j.slice(1);for(let r of t)e=new Set([...e].filter(a=>r.has(a)));return Array.from(e)};var J6A=J(V6A());var hMA=A=>A.length?!!A.find(e=>e?.policy?.policyName===ee.SecuritySettingsPresets)?.policy?.definition?.enabled:!1,qMA=async(A,j,e,t)=>{let r={...e},a={...t};if(!A?.definition?.v1?.platformSettings)return{resolvedSettings:r,managedSettings:a};let n=A.definition.v1?.platformSettings.find(s=>s.clientPlatform===uG.Extension);if(!n?.enforcedSettings)return{resolvedSettings:r,managedSettings:a};let{enforcedSettings:o}=n,i=!1;return typeof o.autoLockIdleInterval=="number"&&(r.autoLockMinutes=o.autoLockIdleInterval,a.autoLockMinutes=j,i=!0),typeof o.autoLockOnDeviceSleep=="boolean"&&(r.autoLockOnDeviceSleep=o.autoLockOnDeviceSleep,a.autoLockOnDeviceSleep=j,i=!0),typeof o.biometricUnlock=="boolean"&&(r.biometricUnlockEnabled=o.biometricUnlock,a.biometricUnlockEnabled=j,await Sn([],()=>void VYj(r.biometricUnlockEnabled),500)),i&&(r.autoLockEnabled=o?.autoLockIdleInterval!==Gi||o?.autoLockOnDeviceSleep,a.autoLockEnabled=j),{resolvedSettings:r,managedSettings:a}},VYj=async A=>{try{await lj("update-security-review-biometry-config",{biometricUnlockEnabled:!!A})}catch{lj("track-security-review-error",p`Failed to update system biometry config from policy manager`)}};var Fm=class{policies;listeners;constructor(){this.policies={},this.listeners=[]}async initializePolicies(j,e){for(let t of j)try{let r;if(!t.client||e?.skipFetch)r=await SA.getDatabase().getAccountPolicies(t.uuid);else{let a=await t.client.fetchPolicies();r=a.policies,await SA.getDatabase().saveAccountPolicies(t.uuid,r),this.setPolicyVersion(t.uuid,a.version)}this.policies[t.uuid]=r.map(a=>({policyName:a.policyName,definition:a.definition}))}catch(r){console.error("Failed to initialize policies for account",{account:t.uuid,err:r})}return await this.notifyListeners(),Object.values(this.policies).flat()}async effectivePolicies(){let j={};for(let[e,t]of Object.entries(this.policies)){j[e]=[];for(let r of t){switch(r=(0,J6A.default)(r),r.policyName){case"auto-lock":r.definition.enabled=r.definition.enabled&&ZA.accountHasFlag(e,"b5x-auto-lock-policies");break;case"extension-allowed":r.definition.enabled=r.definition.enabled&&ZA.accountHasFlag(e,"b2b-extension-first-guided-setup");break;case"autofill-confirmation":r.definition.enabled=r.definition.enabled!==!1&&ZA.accountHasFlag(e,"core-admin-auto-fill-prompt-policy");break;case"security-settings-presets":r.definition.enabled=r.definition.enabled&&ZA.accountHasFlag(e,"b5-authx-security_review-policy");break;case"reporting":case"release-channels":case"ssh-bookmarks":case"cli-integration":case"allow-maps":case"app-launcher-allowed":case"restrict-failed-login-attempts":case"needs-kolide-mobile-health-check":case"developer-environments":case"secure-remote-autofill":break;case"Unsupported":continue;default:te(r)}j[e].push(r)}}try{return(await jA.calculateEffectivePolicies(j)).filter(e=>e.policy.definition?.enabled===!0)}catch(e){return console.error("failed to calculate effective policies",{err:e}),[]}}getAllPoliciesForAccount(j){return this.policies[j]||[]}getPolicyForAccount(j,e){return this.getAllPoliciesForAccount(j).find(t=>t.policyName===e)}async resolveSettings(j){let e=(0,J6A.default)(j),t={},r=await this.effectivePolicies(),a=hMA(r);for(let{account_uuid:n,policy:o}of r){let{policyName:i}=o;switch(i){case"auto-lock":if(a)break;e.autoLockMinutes=o.definition.lockAfterIdleTimeMin,e.autoLockEnabled=!0,t.autoLockMinutes=n,t.autoLockEnabled=n;break;case"autofill-confirmation":o.definition.identityItems&&(e.requireFillSensitivePrompt=!0,t.requireFillSensitivePrompt=n),o.definition.creditCardItems&&(e.requireFillCreditCardPrompt=!0,t.requireFillCreditCardPrompt=n),o.definition.loginItems&&(e.requireFillLoginPrompt=!0,t.requireFillLoginPrompt=n);break;case"security-settings-presets":{let s=await qMA(o,n,e,t);Object.assign(e,s.resolvedSettings),Object.assign(t,s.managedSettings);break}case"reporting":case"release-channels":case"ssh-bookmarks":case"cli-integration":case"allow-maps":case"app-launcher-allowed":case"restrict-failed-login-attempts":case"extension-allowed":case"needs-kolide-mobile-health-check":case"developer-environments":case"secure-remote-autofill":case"Unsupported":continue;default:te(i)}}return Object.keys(t).length>0&&(e.managedSettings=t),e}subscribe(j){this.listeners.push(j)}unsubscribe(j){this.listeners=this.listeners.filter(e=>e!==j)}async notifyListeners(){let j=await this.effectivePolicies();this.listeners.forEach(e=>e(j))}async setPolicyVersion(j,e){await SA.getDatabase().savePoliciesVersionForAccount(j,e)}async getPoliciesVersion(j){return(await SA.getDatabase().findAccountByUUID(j))?.policiesVersion??0}async isEmpty(){return Object.keys(this.policies).length!==0?!1:(await SA.getDatabase().getAllPolicies()).length===0}static isValidAccountType(j){return j===Et.Type.Business}},X6A,y6=()=>(X6A||(X6A=new Fm),X6A);var vMA=J(Xn()),GMA=J(h7()),fE=J(tA());var W6A="lastUserActivity";async function Q6A(){if(Bt()){let A=await Te.sendNativeMessage("Safari-iOS-Lock-Monitor",{message:"getSystemBootTime"});if(A.isOk())return JSON.parse(A.value)}return Date.now()}async function $6(){vj.setItem(W6A,(await Q6A()).toString())}function IM(){vj.removeItem(W6A)}function Y6A(){return parseInt(vj.getItem(W6A)??"0",10)}var Z6A=fE.type({state:fE.union([fE.literal("active"),fE.literal("idle"),fE.literal("locked")]),ts:fE.number}),PM="lockMonitor",AnA="lastIdleQueryTime",jnA="cachedQueryState",bm=6e4,xMA=bm;var j7=A=>[`%c[LM] ${A}`,"color:orange"],e7=class{autoLockOnDeviceSleep=!0;autoLockTimeInMinutes=1;currentUserState="active";alarmIntervalInMinutes=1;heartbeatIntervalInMs=15*1e3;monitorHeartbeat=null;hasPostedNotification=!1;async start(){let j=Date.now();this.setCachedQueryState("active"),this.hasPostedNotification=!1,this.queryState(this.autoLockTimeInMinutes*bm),this.startHeartbeat(),await this.startAlarm(),console.info(...j7(`Started ${this.name} at ${j} (${this.configInfo()}).`))}async stop(){await this.stopAlarm(),this.stopHeartbeat(),IM(),this.clearCachedQueryState(),this.clearLastIdleQueryTime(),console.info(...j7("Stopped."))}postShouldLockNotification=()=>{this.hasPostedNotification||(this.hasPostedNotification=!0,console.info(...j7("User went Idle. Posting lock notification.")),globalThis.dispatchEvent(new Event(Oh)))};updateAutoLockSettings(j,e){this.autoLockTimeInMinutes=j,this.autoLockOnDeviceSleep=e,console.info(...j7(`Updated autolock settings (${this.configInfo()})`))}queryState=async(j=xMA)=>{let e=Date.now(),t=await this.shouldLock(j,e);t&&this.postShouldLockNotification();let r=t?"locked":"active";return this.setCachedQueryState(r),r};queryCachedState=()=>this.getCachedQueryState()?.state??"locked";async startAlarm(){await browser.alarms.get(PM).then(j=>{j||browser.alarms.create(PM,{delayInMinutes:this.alarmIntervalInMinutes,periodInMinutes:this.alarmIntervalInMinutes})}),browser.alarms.onAlarm.hasListener(this.handleAlarm)||browser.alarms.onAlarm.addListener(this.handleAlarm)}async stopAlarm(){return browser.alarms.clear(PM).then(j=>{j?console.info(...j7("Lock monitor alarm cleared")):console.error("[LM] Lock monitor stopped, without clearing alarm. \u{1F6A8}")}).then(()=>{browser.alarms.onAlarm.removeListener(this.handleAlarm)})}startHeartbeat(){this.monitorHeartbeat||(this.monitorHeartbeat=globalThis.setInterval(()=>{this.queryState(this.heartbeatIntervalInMs)},this.heartbeatIntervalInMs))}stopHeartbeat(){this.monitorHeartbeat&&globalThis.clearInterval(this.monitorHeartbeat)}shouldLock=async(j=xMA,e=Date.now())=>{let t=!1;if(j===Gi*bm)return t;await this.getCurrentUserStatus()!=="active"&&(t=!0,console.info(...j7(`User deemed inactive due to system inactivity at ${new Date().toString()}.`)));let a=e-this.getLastIdleQueryTime(e),n=j*2;return!t&&this.autoLockOnDeviceSleep&&a>n&&(console.info(...j7(`User deemed inactive due to last idle query timeout at ${new Date().toString()}. timeSinceLastIdleQuery: ${a} = intervalTime: ${j}`)),t=!0),this.setLastIdleQueryTime(e),t};handleAlarm=j=>{j.name===PM&&this.queryState(this.alarmIntervalInMinutes*bm)};configInfo=()=>`minutes=${this.autoLockTimeInMinutes}, lock on sleep=${this.autoLockOnDeviceSleep}`;getStorage=()=>je;getLastIdleQueryTime(j=Date.now()){let e=this.getStorage().getItem(AnA);return e?parseInt(e,10):j}setLastIdleQueryTime(j=Date.now()){this.getStorage().setItem(AnA,j.toString())}clearLastIdleQueryTime(){this.getStorage().removeItem(AnA)}getCachedQueryState(){let j=this.getStorage().getItem(jnA);if(j)try{return(0,GMA.pipe)(j,JSON.parse,Z6A.decode,vMA.fold(()=>{throw new Error},Z6A.encode))}catch{console.error("[LM] CachedQueryState is corrupt, discarding."),this.clearCachedQueryState();return}}setCachedQueryState(j){let e=Z6A.encode({state:j,ts:Date.now()});this.getStorage().setItem(jnA,JSON.stringify(e))}clearCachedQueryState(){this.getStorage().removeItem(jnA)}};var OP=class extends e7{constructor(e){super();this.desktopApp=e}name="Desktop Lock Monitor";async start(){this.setLastIdleQueryTime(),await super.start()}configInfo=()=>"Connected to desktop app";updateAutoLockSettings=()=>{};getCurrentUserStatus=async()=>(await this.desktopApp.lockState())?.lockState===ep.Unlocked?"active":"locked";queryState=async()=>{let e=await this.getCurrentUserStatus();return this.setCachedQueryState(e),e!=="active"&&(console.info(...j7("User went inactive. Posting lock notification.")),this.postShouldLockNotification()),e}},fMA=A=>A instanceof OP;var RP="LAST_KNOWN_ACTIVITY_TIMESTAMP",OM=4*60,RM=60,DM=class extends e7{constructor(e,t){super();this.autoLockTimeInMinutes=e;this.autoLockOnDeviceSleep=t;this.idleListener=this.idleListener.bind(this),this.autoLockTimeInMinutes=e,this.updateAutoLockSettings(e,t)}name="Extension Lock Monitor";async start(){return typeof browser?.idle?.setDetectionInterval=="function"&&(this.autoLockTimeInMinutes!==Gi&&browser.idle.setDetectionInterval(this.autoLockTimeInMinutes*RM),browser.idle.onStateChanged.addListener(this.idleListener)),super.start()}async stop(){return je.removeItem(RP),typeof browser?.idle?.onStateChanged?.removeListener=="function"&&browser.idle.onStateChanged.removeListener(this.idleListener),super.stop()}updateAutoLockSettings(e,t){if(typeof browser?.idle?.setDetectionInterval!="function"){this.autoLockTimeInMinutes=e,super.updateAutoLockSettings(e,t);return}e!==this.autoLockTimeInMinutes&&e!==Gi&&browser.idle.setDetectionInterval(e*RM),this.autoLockTimeInMinutes=e;let r=e>OM?OM:e;r!==Gi&&browser.idle.setDetectionInterval(r*RM),super.updateAutoLockSettings(e,t)}getCurrentUserStatus=async()=>{if(this.autoLockTimeInMinutes===Gi)return"active";let e=Date.now();if(this.autoLockTimeInMinutes>OM){let r=parseInt(je.getItem(RP)??"0",10);if(r===0)return je.setItem(RP,e.toString()),"active";if((e-r)/bm>=this.autoLockTimeInMinutes)return"idle"}if(typeof browser?.idle?.queryState!="function")return"active";let t=await browser.idle.queryState(Math.min(this.autoLockTimeInMinutes,OM)*RM);switch(t){case"active":return je.setItem(RP,e.toString()),t;case"idle":return t;case"locked":return this.autoLockOnDeviceSleep?t:parseInt(je.getItem(RP)??"0",10)+this.autoLockTimeInMinutes*bm<=e?"idle":"active";default:te(t)}};idleListener(e){e!=="active"&&this.autoLockOnDeviceSleep&&this.postShouldLockNotification()}};var iv=class{initialize(...j){return this}subscribe(j,e,t){return globalThis.addEventListener(j,e,t),this}unsubscribe(j,e){return globalThis.removeEventListener(j,e),this}};iv=m6([Oc()],iv);var DP="[GlobalListener]",FMA=new rt(DP),sv=class{options=new Map;subscriptions=new Map;initialized=!1;constructor(){this.initialize=this.initialize.bind(this),this.listener=this.listener.bind(this)}getOptions(j,e){let t=this.options.get(j);if(!t)throw new Error(`${DP}: No event registered with type ${j}. Global events must be registered at initial runtime.`);return t.get(e)}getSubscription(j){let e=this.subscriptions.get(j);if(!e)throw new Error(`${DP}: No event registered with type ${j}. Global events must be registered at initial runtime.`);return e}listener(j){let e=this.subscriptions.get(j.type);e&&e.forEach(t=>{t(j),this.getOptions(j.type,t)?.once&&this.unsubscribe(j.type,t)})}initialize(...j){return this.initialized?(FMA.warn(`Attempted to initialize with events: ${j.join()}, but was already initialized`),this):(j.forEach(e=>{this.subscriptions.has(e)||(this.subscriptions.set(e,new Set),this.options.set(e,new WeakMap),globalThis.addEventListener(e,this.listener))}),this.initialized=!0,this)}subscribe(j,e,t){let r=this.subscriptions.get(j);if(!r)throw new Error(`${DP}: No event registered with type ${j}. Global events must be registered at initial runtime.`);return r.has(e)?FMA.warn(`Duplicate listener attempted to register for event ${j}`):(r.add(e),t&&this.options.get(j)?.set(e,t)),this}unsubscribe(j,e){let t=this.getSubscription(j);if(!t.has(e))throw new Error(`${DP}: Cannot unsubscribe listener to event ${j}: listener is not subscribed to event ${j}`);return t.delete(e),this.options.get(j)?.delete(e),this}};sv=m6([Oc()],sv);var Ys="GlobalListener",enA=()=>Re.resolve(Ys),mt={initialize:(...A)=>enA().initialize(...A),subscribe:(A,j,e)=>enA().subscribe(A,j,e),unsubscribe:(A,j)=>enA().unsubscribe(A,j)};function Lt(){return H.allAccountHandlersAreLocked}function xs(A){lj("show-core-alert",A)}function Vr(A){lj("show-core-toast",A)}function bMA(){lj("show-mfa-offline-toast",void 0)}function TP(){yMA().then(A=>{hn({defaultPasswordManager:!0}),A&&(vi()||vt())&&Li("import")})}var $MA={type:"free-family",limit:{type:"ONCE"},onClick:()=>{xs({id:"free-family-alert",title:oA("Do you have an existing account?"),text:oA("You can choose to link an existing family account or create a new one."),primaryAction:{id:"free-family-sign-up",label:oA("Sign Up"),destructive:!1,action:{type:"RedeemFreeFamily",content:Sh.SignUp}},secondaryAction:{id:"free-family-link-existing",label:oA("Link Existing"),destructive:!1,action:{type:"RedeemFreeFamily",content:Sh.LinkExisting}},cancelAction:oA("Cancel")})},hideOnClick:!1};async function wMA(A){let j=await tnA();if(j&&j.client?.CTX){let e=await j.getFreeFamilyCode();switch(A.data.option){case Sh.LinkExisting:await Te.openTab({url:`https://start.${j.client.CTX.config.server}/billing?ref=inproduct-b5x-business-family&f=${e}`});break;case Sh.SignUp:await Te.openTab({url:`https://start.${j.client.CTX.config.server}/sign-up/family?ref=inproduct-b5x-business-family&f=${e}`});break}FE("free-family")}}var Mr=J(Dd());var IMA="/assets/png/avatar-business-default-OYJAR4FY.png";var PMA="/assets/png/avatar-family-default-HYPXNDYE.png";var OMA="/assets/png/avatar-individual-default-NHZIYQUS.png";var rnA="/assets/png/avatar-vault-default-3MEYO6T2.png";function TM(A,j,e){if(A&&e.baseAvatarURL){if(A.avatar)return eh(e.baseAvatarURL,e.uuid,A.avatar);if(A.type===Q2&&j&&j.avatar)return eh(e.baseAvatarURL,e.uuid,j.avatar);if(A.type===Y2&&e.avatar)return eh(e.baseAvatarURL,e.uuid,e.avatar)}return rnA}function RMA(A){return A.avatar&&A.baseAvatarURL?eh(A.baseAvatarURL,A.uuid,A.avatar):TMA(A.type)}function DMA(A,j,e,t,r,a){return A&&a?eh(a,r,A):t===Q2&&j&&a?eh(a,r,j):t===Y2&&e&&a?eh(a,r,e):rnA}function Kb(A,j,e,t){return e&&j?eh(j,A,e):TMA(t)}function TMA(A){return A===sG?IMA:A===lG?PMA:OMA}function eh(A,j,e){return e[0]==="/"?k6A(A,e):k6A(A,j,e)}var bE=(A,j)=>{if(!j&&(j=H.getAccountHandlers.find(e=>e.uuid===A),!j))throw new Error("Failed to get account while getAllowedEmailDomainsFromPolicy");return ZA.accountHasFlag(A,"b2b-reporting-policy")?y6().getPolicyForAccount(A,"reporting")?.definition?.allowedEmailDomains??[]:j.serveraccount.teamMemberPolicies?.allowedWatchtowerDomains?j.serveraccount.teamMemberPolicies.allowedWatchtowerDomains.split(","):[]};async function Ho(A=!1){let j=await SA.getDatabase().getAllAccounts(),e=[];for(let t of j){let r=YYj(t);if(A&&t.id&&!r.locked){let a=await SA.getDatabase().getAllVaultsForAccount(t.id);r.vaults=a.map(n=>ZYj(n)).filter(n=>!!n)}else r.vaults=[];e.push(r)}return e}async function CP(A){let j=A.map(e=>{let t=e.isLocked?[]:[...e.vaults].sort(d6.vaultSort).map(r=>({uuid:r.uuid,name:r.name,avatar:TM(r,e.user,e.b5account),accountUuid:e.uuid,canCreate:e.user?.hasVaultACL(r,me.CreateItem)??!1}));return{uuid:e.b5account.uuid,userUuid:e.accountIdentifier.userUUID,name:e.serveraccount.name,email:e.serveraccount.email,type:e.serveraccount.type,locked:e.isLocked,mustMigrateAuth:e.client?.CTX?.session.ssoMigrationGracePeriod?.state===Dj.State.MustMigrateAuth,avatar:Kb(e.serveraccount.uuid,e.serveraccount.baseAvatarURL,e.serveraccount.avatar,e.serveraccount.type),accountUrl:e.serveraccount.signinAddress,vaults:t}});return Promise.all(j)}var CMA=(A,j)=>A.map(e=>({uuid:e.uuid,userUuid:e.serveraccount.userUUID,name:e.serveraccount.name,email:e.serveraccount.email,locked:j.xamEnabledLockedAccountUuids.includes(e.uuid),accountUrl:e.serveraccount.signinAddress,avatar:Kb(e.serveraccount.uuid,e.serveraccount.baseAvatarURL,e.serveraccount.avatar,e.serveraccount.type)}));async function CM(){let A=mr(),j=[];for(let e of H.getAccountHandlers){await e.waitForDecrypt();let t=bE(e.uuid),r=e.isLocked?[]:[...e.vaults].sort(d6.vaultSort).map(a=>{let n=a.isVirtualVault??a.type===xA.Vault.TypeManagedApplications;return{id:a6(a),uuid:a.uuid,name:a.name,avatar:n&&a.type!==xA.Vault.TypeManagedApplications?`/images/popup/${lr.BrexVault}.png`:TM(a,e.user,e.b5account),type:a.type,disabled:A.isExcluded(e.uuid,a.uuid),isVirtualVault:n,isManagedCredentialVault:um(a)}});j.push({id:_M(e.serveraccount),uuid:e.serveraccount.uuid,type:e.serveraccount.type,name:e.serveraccount.name,email:e.serveraccount.email,secretKey:e.serveraccount.secretKey,createdAt:e.serveraccount.createdAt.replace(/"/g,""),userCreatedAt:e.serveraccount.userCreatedAt,locked:e.isLocked,disabled:!1,userSuspended:e.serveraccount.userState===Dj.State.Suspended,state:e.serveraccount.state,avatar:Kb(e.serveraccount.uuid,e.serveraccount.baseAvatarURL,e.serveraccount.avatar,e.serveraccount.type),signinAddress:e.serveraccount.signinAddress,vaults:r,userPreferences:e.serveraccount.userPreferences,itemsInWrongAccountAllowedDomains:t})}return j}function YYj(A){let j=!0,e=H.findAccountHandlerByUuid(A.uuid);e&&(j=e.isLocked);let t=mr(),r=bE(A.uuid);return{id:_M(A),uuid:A.uuid,type:A.type,name:A.name,email:A.email,locked:j,disabled:t.isExcluded(A.uuid),userSuspended:A.userState===Dj.State.Suspended,state:A.state,createdAt:A.createdAt,userCreatedAt:A.userCreatedAt,avatar:Kb(A.uuid,A.baseAvatarURL,A.avatar,A.type),signinAddress:A.signinAddress,userPreferences:A.userPreferences,itemsInWrongAccountAllowedDomains:r}}function ZYj(A){if(!A.account_id)return null;let j=H.findAccountHandlerByID(A.account_id);if(!j)throw new Error(`No account handler found for vault ${A.uuid} in account ${A.account_id}`);let e=j.b5account,t=j._findVaultWithUUID(A.uuid),r=mr();return t?{id:_MA(A),uuid:A.uuid,name:t.name,avatar:TM(t,j.user,e),type:A.type,disabled:r.isExcluded(e.uuid,A.uuid),isVirtualVault:!1,isManagedCredentialVault:!1}:null}function th(A=!1){return H.getAccountHandlers.map(j=>{let e=_M(j.serveraccount).toString(),t=j.isUnlocked?{type:"unlocked"}:A?{type:"failedToUnlock",content:{kolideAccountPreviewState:void 0}}:{type:"locked",content:{kolideAccountPreviewState:void 0}},r={type:"secretKey"},a,n;if(NA.CanOnlyPerformOidcAuth(j.serveraccount.authMethods)){let o=NA.getOidcAuthMethod(j.serveraccount.authMethods);if(!o){console.error(`unable to find OIDC auth method in list of auth methods for account ${j.uuid}`);return}if(!o.provider){console.error(`OIDC auth method for account ${j.uuid} did not have a provider`);return}let i=o.provider;if(!i){console.error(`OIDC auth method for account ${j.uuid} had an unknown provider string`);return}n=o.iconUrl,r={type:"sso",content:i}}else NA.canOnlyPerformWebauthnAuth(j.serveraccount.authMethods)&&(r={type:"webAuthn"});return{id:e,name:j.serveraccount.name,email:j.serveraccount.email,uuid:j.uuid,mode:t,signInProvider:r,signInProviderIconUrl:n,icon:{id:e+"-icon",sources:[{type:"RichIcon",content:{masked:!0,url:Kb(j.serveraccount.uuid,j.serveraccount.baseAvatarURL,j.serveraccount.avatar,j.serveraccount.type)}}],badge:a,shape:ec.RoundedRect}}}).filter(j=>j!==void 0)}var jKA=J(Dd());var Nb=()=>{let{firefoxDataCollection:A}=WA();return A};var Tc=J(Dd());function SMA(A){return{watchtowerNotifications:A.watchtowerEnabled,showRichIcons:A.showRichIcons,language:A.language,autoLockEnabled:!0,autoLockMinutes:A.requireAuthenticationAfter}}function HMA(A){let j=/Code=(\d+)/,e=A.match(j)?.[1];if(!e)return w7.Unknown;switch(Number(e)){case 0:return w7.Unknown;case 1:return w7.InvalidRequest;case 2:return w7.CannotEncodeResponse;default:return w7.Unknown}}async function MMA(){return yE("request-app-data")}async function anA(A){return yE("request-unlocked-accounts",A)}async function KMA(A){return yE("decrypt-credential-bundle",A)}async function NMA(A){return yE("delete-device-key",A)}async function LMA(A){return yE("encrypt-credential-bundle",A)}async function zMA(){return yE("get-b5x-device-uuid")}async function UMA(A){return yE("d-secret-proxy",A)}async function VMA(){return yE("notify-unlocked")}async function XMA(A){return yE("log-message",A)}async function JMA(){return yE("notify-locked")}async function yE(A,j){let e=await Te.sendNativeMessage(A,j);if(e.isErr())return OA(HMA(e.error.message));let t=JSON.parse(e.value);return t.type==="error"?OA(t.data):t.data.name!==A?OA(w7.CannotEncodeResponse):Pj(t.data.data)}function WMA(){if(T6())return new onA;if(Bt())return new inA;throw new Error("Extension not running in Safari")}var onA=class{logger;constructor(){this.logger=new rt("\u{1F34E} DesktopSafariDeviceUUIDAccessor")}async getDeviceUUID(){let j=await this.invoke({type:"GetB5xDeviceUUID",data:void 0});if(j.isOk())return{deviceUUID:j.value.deviceUuid};throw new q.LoggableError({errorClass:p`B5XSafariDesktopGetDeviceUUID`,message:p`SafariWebExtension failed to get Device UUID`,tags:{invocationError:q.logsafe.assertLogSafe(j.error.type)}})}async invoke(j){let e=browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"SweDeviceMessage",data:{type:j.type,data:j.data}})}).then(r=>r.data.type==="Error"?(this.logger.error(`Invocation <${j.type}> failed with error <${r.data.content}>`),OA({type:r.data.content})):r.type===j.type.toString()?Pj(r.data.content.content):OA({type:"UnexpectedResponse"})),t=new Promise(r=>{setTimeout(()=>{r(OA({type:"Timeout"}))},2e3)});return this.logger.info(`Invoking SafariWebExtension <${j.type}>`),Promise.race([e,t]).catch(r=>{throw this.logger.warn("Invocation failed to send."),r})}},inA=class{logger;constructor(){this.logger=new rt("\u{1F34E} MobileSafariUserDefaultsAccessor")}async getDeviceUUID(){this.logger.info("Invoking iOS SafariWebExtension <getDeviceUUID>");let j=await zMA();if(j.isOk())return{deviceUUID:j.value.content.deviceUuid};throw this.logger.warn("<getDeviceUUID> message failed to return a deviceUUID."),new q.LoggableError({errorClass:p`B5XSafariMobileGetDeviceUUID`,message:p`iOS SafariWebExtension failed to get Device UUID`,tags:{invocationError:p`iOS SafariWebExtension failed to get Device UUID`}})}};var snA="1Password Extension";async function jn(){let A=je.getItem("device-json");if(A)return JSON.parse(A);let j=await Te.getBrowserInfo(),e={uuid:await t7(),clientName:snA,clientVersion:ui(),name:j.name,model:j.version,osName:j.osName,osVersion:j.osVersion,userAgent:navigator.userAgent};return je.setItem("device-json",JSON.stringify(e)),e}async function t7(){if(ve()){let A=await SA.getDatabase().getSWEDeviceUUID();if(A)return A;try{let j=await WMA().getDeviceUUID();return await SA.getDatabase().setDeviceUUID(j.deviceUUID),j.deviceUUID}catch(j){console.warn("Failed to invoke UserDefaults: ",j)}}return await SA.getDatabase().getDeviceUUID()}var QMA=async()=>{let{language:A}=WA(),j=await jn();return{contextType:"AppContext",data:{version:Tc.TelemetryString.assertSafeForTelemetry(j.clientVersion),name:Tc.TelemetryString.assertSafeForTelemetry(j.clientName),app_default_locale:Tc.TelemetryString.assertSafeForTelemetry(lk.language),app_used_locale:Tc.TelemetryString.assertSafeForTelemetry(A)}}},YMA=async()=>{let A=await jn(),j=A.osName?A.osName:"N/A",e=A.osVersion?A.osVersion:"N/A";return{contextType:"DeviceContext",data:{device_uuid:Tc.TelemetryString.assertSafeForTelemetry(A.uuid),os_name:Tc.TelemetryString.assertSafeForTelemetry(j),os_version:Tc.TelemetryString.assertSafeForTelemetry(e),os_locale:navigator?Tc.TelemetryString.assertSafeForTelemetry(navigator.language):void 0}}},AZj=async A=>{let j=await SA.getDatabase().findAccountByUUID(A);if(!j)throw new Error("Account handler not found.");return{contextType:"AccountContext",data:{account_uuid:Tc.TelemetryString.assertSafeForTelemetry(j.uuid),account_type:j.type,billing_status:j.billingStatus,user_uuid:Tc.TelemetryString.assertSafeForTelemetry(j.userUUID)}}},jZj=A=>{let j=[];for(let e of ZA.getAllFlagsForAccount(A))j.push(Tc.TelemetryString.assertSafeForTelemetry(e.name));return{contextType:"FeatureFlagContext",data:{assigned_flags:j}}},lnA=new Map;lnA.set("experiment-b5x-a-a-test-all-users-20241128","b5x-a-a-test");lnA.set("experiment-b5x-inline-menu-prominent-cta-all-users-20241128","b5x-inline-menu-prominent-cta");var eZj=()=>lnA,tZj=(A,j)=>{let e=`${A}:${j}`;return Tc.TelemetryString.assertSafeForTelemetry(e)},rZj=A=>{let j=[];for(let[e,t]of eZj())if(ZA.accountHasFlag(A,e)){let n=ZA.accountHasFlag(A,t)?"enabled":"disabled";j.push(tZj(e,n))}return{contextType:"ExperimentationContext",data:{assigned_experiments:j}}},ZMA=async A=>Promise.all([AZj(A),QMA(),YMA(),jZj(A),rZj(A)]),AKA=async()=>Promise.all([QMA(),YMA()]);var rh=class{constructor(j){this.tracker=j;this.tracker=j,this.TELEMETRY_LOGGER.info("TelemetryProvider created")}TELEMETRY_LOGGER=new rt("\u{1F4CA} B5x Telemetry Dev Env Log");checkTelemetryFlag(j){return H.findAccountHandlerByUuid(j)?ZA.accountHasFlag(j,"telemetry-data-collection"):!1}checkTelemetryHighVolume=(j,e)=>(0,jKA.isHighVolumeEventType)(j)?!ZA.accountHasFlag(e,"telemetry-high-volume-events-denied"):!0;checkUserTelemetryPreference(j){let e=H.findAccountHandlerByUuid(j);return e?jA.parseAccountType(e.b5account.type)===jp.Team?!e.serveraccount.teamMemberPolicies?.telemetryOptOut:e.getPreference("TelemetryOptIn"):!1}recordEvent=(j,e,t)=>{let r=this.checkTelemetryFlag(t);(!vt()||Nb())&&r&&this.checkUserTelemetryPreference(t)&&this.checkTelemetryHighVolume(j,t)&&ZMA(t).then(async a=>Promise.all([a,this.tracker.record(j,e,a)])).then(([a])=>{this.TELEMETRY_LOGGER.info("EventType:",j,"Data:",e,"Contexts:",a,`
					----------------------------------------------`)}).catch(a=>{this.TELEMETRY_LOGGER.error("Telemetry Error - event not recorded: ",a)})};recordPreAuthEvent=(j,e)=>{(!vt()||Nb())&&AKA().then(async t=>Promise.all([t,this.tracker.record(j,e,t)])).then(([t])=>{this.TELEMETRY_LOGGER.info("Pre-Auth EventType:",j,"Data:",e,"Contexts:",t,`
					----------------------------------------------`)}).catch(t=>{this.TELEMETRY_LOGGER.error("Telemetry Error - event not recorded: ",t)})}};rh=m6([Oc(),eG(0,Tx("SnowplowTracker"))],rh);var ft=(A,j,e)=>Re.resolve(rh).recordEvent(A,j,e),SM=(A,j)=>Re.resolve(rh).recordPreAuthEvent(A,j);async function eKA(A){let{componentType:j,componentName:e,source:t,category:r}=A,a;try{a=await lKA()}catch{console.error(`Failed to get account uuid to record event: ${t} - aborting`);return}if(!a){console.error(`No account uuid found to record event: ${t} - aborting`);return}ft("View",{component_type:Mr.TelemetryString.assertSafeForTelemetry(j),component_name:Mr.TelemetryString.assertSafeForTelemetry(e),source:t?Mr.TelemetryString.assertSafeForTelemetry(t):void 0,category:r?Mr.TelemetryString.assertSafeForTelemetry(r):void 0},a)}async function HM(A){let{componentType:j,componentName:e,source:t,category:r}=A,a=await Ho();Array.from(a).forEach(n=>{ft("View",{component_type:Mr.TelemetryString.assertSafeForTelemetry(j),component_name:Mr.TelemetryString.assertSafeForTelemetry(e),source:t?Mr.TelemetryString.assertSafeForTelemetry(t):void 0,category:r?Mr.TelemetryString.assertSafeForTelemetry(r):void 0},n.uuid)})}function tKA(A,j){let{componentType:e,componentName:t,source:r,category:a}=j;ft("View",{component_type:Mr.TelemetryString.assertSafeForTelemetry(e),component_name:Mr.TelemetryString.assertSafeForTelemetry(t),source:r?Mr.TelemetryString.assertSafeForTelemetry(r):void 0,category:a?Mr.TelemetryString.assertSafeForTelemetry(a):void 0},A)}function rKA(A,j){let{componentType:e,componentName:t,source:r,category:a}=j;ft("Input",{component_type:Mr.TelemetryString.assertSafeForTelemetry(e),component_name:Mr.TelemetryString.assertSafeForTelemetry(t),source:r?Mr.TelemetryString.assertSafeForTelemetry(r):void 0,category:a?Mr.TelemetryString.assertSafeForTelemetry(a):void 0},A)}async function aKA(A){let{componentType:j,componentName:e,category:t,source:r}=A,a;try{a=await lKA()}catch{console.error(`Failed to get account uuid to record event: ${r} - aborting`);return}if(!a){console.error(`No account uuid found to record event: ${r} - aborting`);return}ft("Click",{component_type:Mr.TelemetryString.assertSafeForTelemetry(j),component_name:Mr.TelemetryString.assertSafeForTelemetry(e),source:r?Mr.TelemetryString.assertSafeForTelemetry(r):void 0,category:t?Mr.TelemetryString.assertSafeForTelemetry(t):void 0},a)}function MM(A,j){let{componentType:e,componentName:t,category:r,source:a}=j;ft("Click",{component_type:Mr.TelemetryString.assertSafeForTelemetry(e),component_name:Mr.TelemetryString.assertSafeForTelemetry(t),source:a?Mr.TelemetryString.assertSafeForTelemetry(a):void 0,category:r?Mr.TelemetryString.assertSafeForTelemetry(r):void 0},A)}async function KM(A){let{componentType:j,componentName:e,category:t,source:r}=A,a=await Ho();Array.from(a).forEach(n=>{ft("Click",{component_type:Mr.TelemetryString.assertSafeForTelemetry(j),component_name:Mr.TelemetryString.assertSafeForTelemetry(e),source:r?Mr.TelemetryString.assertSafeForTelemetry(r):void 0,category:t?Mr.TelemetryString.assertSafeForTelemetry(t):void 0},n.uuid)})}async function nKA(A){let{name:j,category:e}=A,t=await Ho();Array.from(t).forEach(r=>{ft("BackgroundAction",{name:Mr.TelemetryString.assertSafeForTelemetry(j),category:e?Mr.TelemetryString.assertSafeForTelemetry(e):void 0},r.uuid)})}async function oKA(A){let{overallStatus:j,overallDuration:e,domScanStatus:t,domScanDuration:r,analyzeFrameStatus:a,analyzeFrameDuration:n,renderMenuStatus:o,renderMenuDuration:i}=A,s=await Ho();Array.from(s).forEach(l=>{ft("InlineMenuRender",{overall_status:j,overall_duration_ms:e,dom_scan_status:t,dom_scan_duration_ms:r,analyze_frame_status:a,analyze_frame_duration_ms:n,render_menu_status:o,render_menu_duration_ms:i},l.uuid)})}async function iKA(A){let{flagName:j,variantName:e}=A,t=await Ho();Array.from(t).forEach(r=>{ft("AmplitudeExposure",{flag_key:Mr.TelemetryString.assertSafeForTelemetry(j),variant:Mr.TelemetryString.assertSafeForTelemetry(e)},r.uuid)})}function sKA(A){let{component_type:j,component_name:e,category:t,source:r}=A,a={data:{component_type:Mr.TelemetryString.assertSafeForTelemetry(j),component_name:Mr.TelemetryString.assertSafeForTelemetry(e),category:t?Mr.TelemetryString.assertSafeForTelemetry(t):void 0,source:r?Mr.TelemetryString.assertSafeForTelemetry(r):void 0},eventType:"ViewPreauth"};SM(a.eventType,a.data)}var lKA=async()=>{let A=await Ho();return(A.find(e=>e.type===_O)??A.find(e=>e.type===lG)??A.find(e=>e.type===sG))?.uuid};function $E(){return chrome.runtime.getManifest().version}function Lb(){return $E()}var cKA="notification-history",cnA=[{type:"enable-watchtower-compromised-sites",limit:{type:"ONCE"},onClick:()=>{hn({showNotifications:!0,watchtowerNotifications:!0})}},{type:"import",limit:{type:"ONCE"},onClick:()=>{LM()}},{type:"update",data:()=>({version:Lb()}),onClick:()=>{pnA()}},$MA,{type:"email-preferences",limit:{type:"ONCE"},onClick:()=>{let A=unA();A&&BnA(A.uuid)}},{type:"autofill-disabled",onClick:()=>{hn({inlineEnabled:!0})}},{type:"firefox-rich-icon-enable",limit:{type:"ONCE"},onClick:()=>{hn({showRichIcons:!0})}},{type:"firefox-local-data-collection-enable",limit:{type:"ONCE"},onClick:()=>{hn({firefoxDataCollection:!0}),Ub()},onDismiss:()=>{hn({firefoxDataCollection:!1})}},{type:"extension-first-survey",limit:{type:"ONCE"},featureFlag:"extension-first-survey",onClick:()=>{zb("Click",{componentType:ap.Button,componentName:Ap.TakeSurvey,source:rp.NotificationScreen,category:Uc.ExtensionSurvey}),mnA()},onDismiss:()=>{zb("Click",{componentType:ap.Button,componentName:Ap.Dismiss,source:rp.NotificationScreen,category:Uc.ExtensionSurvey})}},{type:"unified-panel-update",limit:{type:"ONCE"},featureFlag:"b5x-unified-panel",expires:new Date("2025-11-01T23:59:59Z"),onClick:()=>{EnA("manage-your-settings")}},{type:"security-review",limit:{type:"ONCE"},featureFlag:"authx-autolock_settings-profiles",hideOnClick:!1,onClick:()=>{lj("open-security-review-modal",void 0),zb("Click",{componentType:ap.Button,componentName:Ap.SelectPreset,source:rp.PickSecurityPresetNotification,category:Uc.SecurityReview})},onDismiss:()=>{zb("Click",{componentType:ap.Button,componentName:Ap.DismissSecurityReview,source:rp.PickSecurityPresetNotification,category:Uc.SecurityReview})}}],zb=(A,j)=>{A==="View"?HM(j):KM(j)};function dnA(A,j){j?Li(A):ym(A)}function Li(A){let j=cnA.find(e=>e.type===A);if(!j){console.warn("Unable to find notification with type:",A);return}if(!(j.limit?.type==="ONCE"&&_P().has(A))){if(j.expires&&j.expires<new Date){ym(A);return}if(j.featureFlag&&!ZA.anyAccountHasFlag(j.featureFlag)){ym(A);return}dKA(j),aZj(A)}}function dKA(A){let{type:j,data:e}=A;switch(j){case"extension-first-survey":zb("View",{componentType:ap.Button,componentName:Ap.TakeSurvey,source:rp.NotificationScreen,category:Uc.ExtensionSurvey});break;case"security-review":zb("View",{componentType:ap.Notification,componentName:Ap.PickSecurityPreset,source:rp.NotificationScreen,category:Uc.SecurityReview});break;default:break}lj("show-alert",{id:j,data:e?.()||{version:""}})}function kKA(A){let{clicked:j}=A.data,e=cnA.find(o=>o.type===A.data.type);if(!e){console.warn("Unable to find notification with type:",A.data.type);return}let{type:t,onClick:r,onDismiss:a,hideOnClick:n}=e;if(j){if(r(),typeof n=="boolean"&&!n)return;FE(t),knA(t)}else a?.(),FE(t)}function knA(A){lj("hide-alert",A)}function uKA(){let A=_P();for(let j of cnA){if(j.expires&&j.expires<new Date)continue;let e=A.get(j.type);e&&!e.dismissed&&dKA(j)}}function _P(){try{let A=vj.getItem(cKA);return A?gb(A):new Map}catch{return new Map}}function NM(A){vj.setItem(cKA,Bb(A))}function aZj(A){let j=_P();j.set(A,{lastSeen:new Date().getTime(),dismissed:!1}),NM(j)}function FE(A){let j=_P(),e=j.get(A);e?(e.dismissed=!0,NM(j),knA(A)):(j.set(A,{lastSeen:new Date().getTime(),dismissed:!0}),NM(j))}function ym(A){let j=_P(),e=j.get(A);e&&!e.dismissed&&(j.delete(A),NM(j),knA(A))}async function tnA(){let j=(await Promise.all(H.getAccountHandlers.map(async e=>{try{return e.shouldShowFreeFamilyAccountNotification()}catch{return!1}}))).indexOf(!0);return j!==-1?H.getAccountHandlers[j]:void 0}function unA(){return H.getAccountHandlers.find(A=>{try{return A.shouldShowEmailPreferencesNotification()}catch{return!1}})}function EKA(){Promise.all(H.getAccountHandlers.filter(A=>A.isUnlocked).map(async A=>A.waitForClient().catch(()=>{}))).then(async()=>{let A=await tnA();dnA("free-family",!!A);let j=unA();dnA("email-preferences",!!j)})}var pKA="1",zM=class{_cache;constructor(){this._cache=new Set}deserializeAndMerge(j){this._cache=new Set([...this._cache,...JSON.parse(j)])}serialize(){return JSON.stringify(Array.from(this._cache))}addIgnoredHost(j){this.isIgnored(j)||this._cache.add(j)}isIgnored(j){return this._cache.has(j)}};var SP=(t=>(t.Login="login",t.CreditCard="creditCard",t.Identity="identity",t))(SP||{}),Ul={login:{priority:0,setting:"autoSaveEnabled",templateUuid:Je,triggers:[wj.CurrentPassword,wj.NewPassword]},creditCard:{priority:1,setting:"autoSaveCreditCardsEnabled",templateUuid:ea,triggers:[wj.CcNumber]},identity:{featureFlag:"b5x-autosave-identities",priority:2,setting:"autoSaveIdentitiesEnabled",templateUuid:O6,triggers:[wj.AddressLine1,wj.StreetAddress]}};var gnA=[wj.Name,wj.GivenName,wj.AdditionalName,wj.FamilyName,wj.StreetAddress,wj.AddressLine1,wj.AddressLine2,wj.AddressLevel1,wj.AddressLevel2,wj.Country,wj.PostalCode],S$t=[wj.Username,wj.CurrentPassword,wj.NewPassword,wj.CcName,wj.CcGivenName,wj.CcAdditionalName,wj.CcFamilyName,wj.CcCsc,wj.CcExp,wj.CcExpMonth,wj.CcExpYear,wj.CcType,wj.CcNumber,...gnA];function ah(A,j,e){let t=H.findAccountHandlerByUuid(A);if(!t)return OA(new Error(`Attempted to create item for non-existent account: <${A}>`));let r=t.findVaultWithUUIDAndCreatePermission(j);if(!r)return OA(new Error(`Attempted to create item for non-existent vault <${j}> in account <${A}>`));let a=new kA(r);return a.details=e.details,a.overview=e.overview,a.overview.b5AccountUUID=t.uuid,a.templateUuid=e.templateUuid,a.vault=r,Pj(a)}function Vb(A,j){let e=A.overview.b5AccountUUID;return A.details=j.details,A.overview=j.overview,A.overview.b5AccountUUID=e,A}var mKA="privacy-key-updated",hnA="privacy-key-sandbox-api-key",oZj="privacy-force-sandbox";async function UM(){return HP()!==null?!0:sZj()}async function BKA(A,j,e,t){let r=ah(j,e,A);if(r.isErr())return r;let a=r.value;return t&&(a.addTag("privacy.com"),a=await Da(a,!0)),Pj(a)}function qnA(){return!!HP()||!!vj.getItem(oZj)}function HP(){return vj.getItem(hnA)??null}function gKA(A){A?vj.setItem(hnA,A):vj.removeItem(hnA),globalThis.dispatchEvent(new Event(mKA))}async function hKA(){let A=HP(),j=A?[A]:await qKA();return jA.getPrivacyFundingAccounts({apiKeys:j,useSandboxApi:qnA()})}async function iZj(A){let j=H.findAccountHandlerByUuid(A);if(j)try{let e=(await j.loadSystemVaultItems()).filter(t=>t.overview.integration==="privacy");return e.length>1&&console.error("Multiple Privacy integration items in user's system vault."),e[0]}catch(e){Ze(e)&&rj(e);return}}async function xnA(){let A=[];for(let j of H.getAccountHandlers)try{if(!j.isLocked&&j._vaults){let t=(await j.loadSystemVaultItems()).filter(r=>r.templateUuid==="800"&&r.overview.integration==="privacy"&&r.state===kA.ItemState.Active);A.push(...t)}}catch(e){Ze(e)&&rj(e)}return A}async function qKA(){return(await xnA()).map(j=>j.details.fields?.find(e=>e.designation==="password")?.value).filter(j=>!!j)}async function sZj(){return(await qKA()).length>0}async function xKA(A,j){let{vault:e}=await H.getSystemVaultForAccount(A),t=await iZj(A);t||(t=new kA(e)),t.vault=e,t.templateUuid="800",t.overview=j.overview,t.state=kA.ItemState.Active,t.overview.integration="privacy",t.details=j.details,await Da(t,!1,A,()=>globalThis.dispatchEvent(new Event(mKA)))}async function MP(){let[A,j]=await Promise.all([UM(),GKA()]);return[j?jk.Brex:void 0,A?jk.Privacy:void 0].filter(e=>!!e)}function VM(A){if(A.provider==="brex")switch(A.category){case"vendor":return lr.BrexVendor;case"corporate":return lr.BrexCorporate;default:te(A.category)}}function vKA(A){if(A.provider==="brex")return lr.BrexVault}function $m(A,j){let e=j.filter(r=>r.templateUuid==="800"&&r.state===xA.VaultItem.ItemState.Active&&r.overview.integration===A),t=[];for(let r of e){let a=r.details.sections.find(i=>i.name===A),n=a?.fields?.find(i=>i.n==="accountId"),o=a?.fields?.find(i=>i.n==="refreshToken");if(!n||!o){console.error(`${A} Integration Item ${r.uuid} is malformed.`);continue}t.push({itemUuid:r.uuid,accountId:n.v,refreshToken:o.v})}return t}async function cZj(A,j){let e=await DF(A,j),t=new Blob([e]);return iq(t)}function fKA(A){return A.overview.icons?.detail?.fileId}async function XM(A){try{if(!(A.overview.icons&&A.overview.icons.detail))return Pj(void 0);let j=A.overview.icons.detail,e=await SA.getDatabase().getIcon(j.fileId);if(!e){let t=zj.itemCache?.accountForVaultID(a6(A.vault));if(!t)throw console.error("getCustomIconForItem: Unable to find account by vault localId"),new Error;let r=t.uuid,a=H.getAccountHandlers.find(n=>n.b5account.uuid===r);if(!a)throw console.error(`getCustomIconForItem: Unable to find account handler for UUID <${r}>`),new Error;if(e=await a.client?.getFile(A,j).catch(()=>{}),!e)return OA({type:"FailedToLoadFile"});SA.getDatabase().saveIcon(j.fileId,e)}return Pj(await cZj(j,e))}catch{return OA({type:"UnknownError"})}}async function Ei(A,j,e,t){let r=A.templateUuid==="912",a=(A.faveIndex??0)>0&&A.state===kA.ItemState.Active?NO.Favorite:void 0,n=[];if(fKA(A)&&n.push({type:"CustomIcon",content:{fileId:JSON.stringify(wm(A))}}),e){let l=xA.VaultItem.getRichIconUrl({templateUuid:r?"001":A.templateUuid,title:A.title,url:A.url??""},j);l!==""&&n.push({type:"RichIcon",content:{url:l,masked:A.templateUuid!==iy,description:void 0}})}if(A.templateUuid===Je&&!t){let l=A.overview.title?.replace(/\s+/g,"")??"";n.push({type:"MonogramIcon",content:{value:l.length>1?l.slice(0,2):l.charAt(0),color:A.uuid?jA.generateRichIconBackgroundColor(A.uuid):""}})}let i,s=A;return s.cacheInformation?.provider!==void 0&&(i=VM(s.cacheInformation)),i=i??await JM(A.subtitle,A.templateUuid),n.push({type:"DefaultIcon",content:{file:i,masked:!1,description:void 0}}),{id:"",sources:n,badge:a,shape:ec.RoundedRect}}async function JM(A,j){switch(j){case Je:return lr.Login;case ea:switch(await jA.getCreditCardType(A)){case rc.Visa:return lr.CreditCardVisa;case rc.Mastercard:return lr.CreditCardMastercard;case rc.AmericanExpress:return lr.CreditCardAmex;case rc.Discover:return lr.CreditCardDiscover;default:return lr.CreditCard}case qdA:return lr.SecureNote;case O6:return lr.Identity;case ol:return lr.Password;case RO:return lr.Document;case xdA:return lr.Tombstone;case bdA:return lr.Placeholder;case iy:return lr.SoftwareLicense;case vdA:return lr.BankAccount;case GdA:return lr.Database;case DO:return lr.DriverLicense;case fdA:return lr.OutdoorLicense;case FdA:return lr.Membership;case TO:return lr.Passport;case ydA:return lr.Rewards;case CO:return lr.SocialSecurityNumber;case $dA:return lr.Router;case wdA:return lr.Server;case IdA:return lr.Email;case jc:return lr.ApiCredentials;case PdA:return lr.MedicalRecord;case Zi:return lr.Ssh;case iG:return lr.CryptoWallet;case OdA:return lr.Snippet;default:return lr.UnknownCategory}}var vnA=()=>{let A=[];for(let j of Object.values(SP))EZj(j)&&A.push(j);return A},nh=()=>vnA().length!==0,dZj=async(A,j)=>{let e=await zj.loadItemCache();if(!e)return[];let t=e.fillableItems(ie.combine(ie.template(A),ie.userSelected(mr(),void 0,void 0,e),a=>j?ie.nakedDomain(j)(a):!0));return(await Promise.all(t.map(E6))).filter(a=>!!a)};function FKA(A,j){switch(A){case"creditCard":{let e=wE(j,wj.CcNumber),t=8,r=/\d/.test(e??"");return!!e&&e.length>=t&&r}case"identity":{let e=0,t=2;for(let r of j.fields)if(gnA.includes(r.designation.autofillType)&&(e++,e>=t))return!0;return!1}default:return!0}}var KP=async(A,j)=>{let e=j?.urls?.length>0?jA.nakedDomainForUrl(j.urls[0]):void 0,t=await dZj(A,e),r=a=>{if(a.templateUuid!==A)return!1;switch(A){case Je:{let n=kZj(a,"password"),o=wE(j,wj.CurrentPassword)??wE(j,wj.NewPassword);return n&&o&&n===o}case ea:{let n=l=>l?.replace(/[^a-zA-Z0-9]/g,""),o=uZj(a,"ccnum"),i=typeof o=="string"?n(o):void 0,s=n(wE(j,wj.CcNumber));return i&&s&&i===s}case O6:{let n=xA.VaultItem.findFieldWithName("address",a),o=n?xA.VaultItem.getAddressValue(n):void 0,i=c=>{let k=/\b(ave|avenue|blvd|boulevard|ct|court|dr|drive|hwy|highway|ln|lane|pkwy|parkway|pl|place|rdg|ridge|rd|road|st|str|street|ter|terrace)\b/i;if(!c)return;let u=c.toLowerCase().split(","),m=u[0].search(k);return{line1:(m>0?u[0].substring(0,m):c).trim(),line2:u[1]?.trim()}},s=i(o?.street),l=i(wE(j,wj.StreetAddress));return!n||!o||!s?.line1||!l?.line1||s?.line1!==l?.line1?!1:!l.line2||l.line2===s.line2}default:return!1}};return t?.find(r)};function wE(A,j){let e=A.fields.find(t=>t.designation.autofillType===j);return e?e.value:void 0}function kZj(A,j){if(!A.details?.fields)return;let e=A.details.fields.find(t=>t.designation===j);return e?e.value:void 0}var uZj=(A,j)=>{if(A.details?.sections){for(let e of A.details.sections)if(e.fields){for(let t of e.fields)if(t.n===j)return t.v}}},EZj=A=>{let j=WA(),e=Ul[A],t=!!j[e.setting];return e.featureFlag?t&&ZA.anyAccountHasFlag(e.featureFlag):t},NP=()=>!!WA().showLockedStateNotifications&&ZA.anyAccountHasFlag("b5x-authx-unlock-notifications"),WM=async A=>{let{showRichIcons:j}=WA();return{title:A.title,subtitle:A.subtitle,icon:await Ei(A,120,j)}};var LP=class{_saveIgnoreCache;constructor(){this._saveIgnoreCache=new zM}get saveIgnoreCache(){return this._saveIgnoreCache}async loadSaveIgnoreForUnlockedAccounts(){if(nh())for(let e of H.getAccountHandlers.filter(t=>t.isUnlocked)){let t=await e.getDecryptedCache("saveIgnore");t&&this._saveIgnoreCache.deserializeAndMerge(t)}}async addHostToSaveIgnoreList(j){if(!nh())return[];this._saveIgnoreCache.addIgnoredHost(j);let t=this._saveIgnoreCache.serialize(),r=[];for(let a of H.getAccountHandlers.filter(n=>n.isUnlocked))r.push(a.encryptAndSaveCache("saveIgnore",pKA,t));return Promise.all(r)}isHostInSaveIgnoreList(j){return nh()?this._saveIgnoreCache.isIgnored(j):!1}},bKA=Re.resolve(LP);var iNA=J(iK());var UAe="\u{1F9F0} Configuring content script metadata",VAe="Content script metadata updated.",XAe="Unable to update content script metadata.",JAe="Unable to retrieve content script metadata.",uv=new rt(UAe),Qb=A=>{if(!(0,iNA.default)(A,DnA())){uv.info(VAe);try{je.setItem($2,JSON.stringify(A)),sK(Lt()?"locked":"unlocked")}catch{uv.error(XAe)}}},DnA=()=>{let A;try{A=JSON.parse(je.getItem($2)??"{}")}catch{uv.error(JAe),A={prefersColorSchemeDark:!1}}return A};var sNA=J(Xn()),sh=J(tA()),WAe=sh.array(sh.tuple([sh.number,sh.any])),WP=class{storageKey;lockName;cachedSessions;constructor(j){this.storageKey=j,this.lockName=`session-manager_${j}_${Ng()}`}async with(j){return navigator.locks.request(this.lockName,async e=>{if(!this.cachedSessions)try{let t=je.getItem(this.storageKey);if(t){let r=JSON.parse(t),a=WAe.decode(r);if(!(0,sNA.isRight)(a))throw new Error("Malformed SessionManager");this.cachedSessions=new Map(a.right)}else this.cachedSessions=new Map}catch{console.error("[SessionManager] SessionManager contained malformed data."),this.cachedSessions=new Map}try{return await j(this.cachedSessions)}finally{je.setItem(this.storageKey,JSON.stringify(Array.from(this.cachedSessions.entries())))}})}},lK=WP;async function Yb(A){return browser.webNavigation.getAllFrames({tabId:A}).then(j=>j??[]).then(j=>j.filter(({url:e})=>{try{return yx(new URL(e))}catch{return!1}}))}async function Cr(A,j){if(zi(A)){let t=await TnA(A);if(t.isOk())return t.value}let e=await Yb(A.id).then(async t=>Promise.all(t.map(async r=>lNA(A.id,r.frameId,r.url,{excludeValues:j})))).then(t=>{let r=t.filter(a=>a.isOk());return r.length<t.length&&console.warn("Could not collect all frames that were initially found."),Od.combine(r).unwrapOr([])});return{unparsedUrl:A.unparsedUrl,title:A.title,frames:e}}var cK={timeout:500,errorMessage:"Could not collect frame details",timeoutMessage:"Timed out while collecting frame details"};async function lNA(A,j,e,t={}){let r=async()=>{let{version:a}=await cp();return ve()&&parseInt(a,10)<16};return j6.withTimeout(r().then(async a=>browser.tabs.sendMessage(A,{name:"collect-frame-details",data:{options:t,frameUrl:e,checkFrame:a}},{frameId:j})).then(async a=>a?Pj(a):Promise.reject()).catch(()=>OA(new Error(cK.errorMessage))),cK.timeout,"Collect Frame").catch(a=>a||OA(cK.timeoutMessage))}async function TnA(A){return j6.withTimeout(lNA(A.id,0,A.unparsedUrl).then(j=>j.isOk()?(j.value.fields=[...(j.value.fields??[]).map(e=>({...e,tabIndex:void 0}))],Pj({unparsedUrl:A.unparsedUrl,title:A.title,frames:[j.value]})):Pj([])).catch(j=>j||OA(cK.timeoutMessage)))}function zi(A){let j=A.URL();return(j?chrome.runtime.getURL("").toLowerCase().startsWith(j.origin):!1)&&j?.pathname==="/inline/tutorial/tutorial.html"}var CnA=class{id;unparsedUrl;title;openerTabId;cachedNakedDomain;cachedUrl;constructor(j,e,t,r){this.id=j,this.unparsedUrl=e,this.title=t,this.openerTabId=r}isHttpOrHttps(){return yx(this.URL())}nakedDomain(){let j=this.unparsedUrl;if(this.cachedNakedDomain&&this.cachedNakedDomain.unparsedUrl===j)return this.cachedNakedDomain.nakedDomain;let e=jA.nakedDomainForUrl(j);return this.cachedNakedDomain={unparsedUrl:j,nakedDomain:e},e}URL(){return this.cachedUrl||(this.cachedUrl=Nl(this.unparsedUrl)),this.cachedUrl}};function It(A){if(A&&A.id&&A.url)return Om(A.id,A.url,A.title,A.openerTabId)}function cNA(A){if(!A||!A.tab)return;let j=It(A.tab);if(j)return j}function dNA(A){return Om(A.tabId,A.url)}function Om(A,j,e="",t){return new CnA(A,j,e,t)}var QAe=4,Vl=new lK("autosave-sessions");function kNA(){Re.resolve(Ys).subscribe(br,rje).subscribe(nl,eje).subscribe(x7,YAe).subscribe(cB,ZAe)}async function uNA(A){return Vl.with(async j=>{let e=j.get(A);return e?Promise.resolve(!!e.notificationState):Promise.resolve(!1)})}var YAe=A=>A.detail.notifications.filter(j=>j.type==="autosave").forEach(j=>{j.tabId&&Ev(j.tabId)});async function ENA(A,j){let e=A.data,t=It(j.tab);if(!t){console.error("Failed to create TabInfo for Tab.");return}e&&lj("autosave-notify-capture",!0,{tabId:t.id});let r=await Cr(t);return Vl.with(async a=>{let n=a.get(t.id);if(n)n.collectedPageDetails=r,e&&Ul[e].priority<Ul[n.saveType].priority&&(n.saveType=e);else{if(!e)return Promise.resolve();a.set(t.id,{saveType:e,collectedPageDetails:r,notificationState:void 0})}})}function _nA(A,j){return{hasBeenCheckedAfterUnlock:!1,readyTimestamp:Date.now(),saveObject:j,expirationNavigationCount:QAe,notificationId:void 0,isTutorial:zi(A)}}async function pNA(A,j){let e=It(j.tab);if(!e){console.error("Failed to create TabInfo for Tab.");return}let t=await Vl.with(async r=>{let a=r.get(e.id);if(!a)return;let{templateUuid:n,triggers:o}=Ul[a.saveType],i=await jA.createSaveObject(n,a.collectedPageDetails,a.generatePasswordDetails);if(i.fields.some(l=>o.includes(l.designation.autofillType))){if(H.allAccountHandlersAreLocked)return a.notificationState=_nA(e,i),NP()?a:void 0;{if(await KP(n,i))return;let c=a.saveType;return FKA(c,i)?(a.notificationState=_nA(e,i),a):void 0}}});t&&dK(e,t)}function ZAe(A){Vl.with(async j=>Promise.resolve(Aje(j,A.detail.tabId)))}function Aje(A,j){lj("autosave-notify-capture",!1,{tabId:j});let e=A.get(j);if(e){if(!e.notificationState){A.delete(j);return}if(e.notificationState.isTutorial){A.delete(j);return}w6("autosave")||(e.notificationState.expirationNavigationCount-=1,e.notificationState.expirationNavigationCount<=0&&(A.delete(j),e.notificationState.notificationId&&(kK(j,e.notificationState.notificationId),e.notificationState.notificationId=void 0)))}}function mNA(A){nh()&&Vl.with(async e=>{let t=e.get(A.id);if(!t)return Promise.resolve();if(!t.notificationState)return Promise.resolve(e.delete(A.id));if(H.allAccountHandlersAreLocked&&!NP())return Promise.resolve();dK(A,t)})}function BNA(A,j){Vl.with(async e=>jje(A,e,j))}async function jje(A,j,e){lj("autosave-notify-capture",!0,{tabId:A.id});let t=await Cr(A),r=await jA.createSaveObject(Je,t,e),a={generatePasswordDetails:e,collectedPageDetails:t,saveType:"login",notificationState:_nA(A,r)};j.set(A.id,a),dK(A,a)}async function dK(A,j){if(!j.notificationState)return;let e=A.URL()?.host||"",t=A.nakedDomain(),r=[];for(let i of H.getAccountHandlers){let s=await i.getManagedVaultFromDb();if(typeof s<"u"&&typeof s.localId<"u"){let l=await i.getVaultItems(s.localId);r.push(...l)}}if(r.some(i=>RaA({urls:SnA(i),urlToNakedDomains:i.urlToNakedDomains||{}},e,t)))return;let n=await Dm(A.id);if(!w6("autosave")&&n.length>0)return;let o=await la(A.id,{type:"autosave",params:{tutorialMode:zi(A)}});o&&(j.notificationState.notificationId=o)}function eje(){Vl.with(async A=>Promise.resolve(tje(A)))}function tje(A){nh()&&A.forEach(e=>{e.notificationState&&(e.notificationState.hasBeenCheckedAfterUnlock=!1)})}function rje(){Vl.with(async A=>nje(A))}var aje=A=>Date.now()-A>12e4;async function nje(A){if(nh()){for(let[e,t]of A)if(t.notificationState){if(t.notificationState.hasBeenCheckedAfterUnlock)return;t.notificationState.hasBeenCheckedAfterUnlock=!0;let r=await L6(e);if(!r){A.delete(e);return}if(!w6("autosave")&&(await Dm(e)).length>0)return;if(aje(t.notificationState.readyTimestamp)){A.delete(e);return}let{templateUuid:a}=Ul[t.saveType];if(await KP(a,t.notificationState.saveObject)){t.notificationState=void 0;return}dK(r,t)}}}function Ev(A){Vl.with(async j=>Promise.resolve(j.delete(A))),w6("autosave")&&Rm("autosave",A)}var gNA={autosave:{isNotificationValidForTab:uNA}};var uK=A=>S_A[A],w6=A=>ZA.hasPreRegistrationFlag("b5x-notification-manager")&&!!uK(A).notificationManagerEnabled,hNA=A=>A!=="notificationManager",HnA=async(A,j)=>{let e=gNA[j];return e?.isNotificationValidForTab?e.isNotificationValidForTab(A):Promise.resolve(!0)};var EK="notification-manager",MnA="notification-page-change-history",PE=async A=>{let j=JSON.parse(je.getItem(EK)??"[]");if(!A)return j;let e=j.filter(r=>r.tabId===A||r.tabId===void 0);return(await Promise.allSettled(e.map(async r=>await HnA(A,r.type)?r:null))).filter(r=>r.status==="fulfilled").map(r=>r.value).filter(r=>r!==null)},QP=async(A,j)=>{let e=await PE(A);return(j?e.filter(r=>r.type===j):e).length>0},qNA=async(A,j,e)=>{let t=uK(A);if(j&&j>0&&await QP(j,A)&&!t.allowMultiple){lj("refresh-notification",void 0);return}let r={id:Ng(),type:A,params:e,created:new Date};return j&&(r={...r,tabId:j}),je.setItem(EK,JSON.stringify((await PE()).concat([r]))),r.id},pK=async A=>{je.setItem(EK,JSON.stringify((await PE()).filter(j=>j.id!==A))),je.setItem(MnA,JSON.stringify(xNA().filter(j=>j.id!==A)))},Rm=async(A,j,e)=>{let t=(await PE()).filter(r=>r.tabId===j&&r.type===A);for(let r of t)await pK(r.id);t.length>0&&!e&&lj("clear-notifications",{ids:t.map(r=>r.id)})},xNA=()=>JSON.parse(je.getItem(MnA)??"[]"),vNA=async A=>{let j=await PE(A);if(j.length===0)return;let e=xNA(),t=[],r=[];for(let a of j){if(!await HnA(A,a.type)){await pK(a.id);continue}let n=uK(a.type).maximumPageChangeCount??1,o=e.filter(i=>i.id===a.id&&i.tabId===A);if(o.length>0){let i=o[o.length-1];if(i&&i.timestamp&&Date.now()-new Date(i.timestamp).getTime()<500)return}if(n===1||o.length>n-1){t.push(a);continue}r.push({id:a.id,tabId:A,timestamp:new Date})}(r.length>0||t.length>0)&&(r.length>0&&(e=e.concat(r)),t.length>0&&(e=e.filter(a=>!t.map(n=>n.id).includes(a.id)),je.setItem(EK,JSON.stringify((await PE()).filter(a=>!t.map(n=>n.id).includes(a.id)))),globalThis.dispatchEvent(new CustomEvent(x7,{detail:{notifications:t.map(a=>({id:a.id,tabId:a.tabId,type:a.type}))}})),lj("clear-notifications",{ids:t.map(a=>a.id)})),je.setItem(MnA,JSON.stringify(e)))};var oje=async A=>{let j=Kl();try{chrome.tabs.sendMessage(A,{name:"active-notification-type"},j.resolve)}catch{console.error("Failed to get active notification");return}return j.promise},Dm=async A=>{let j=await oje(A);return j?j==="notificationManager"?(await PE(A)).map(e=>e.type):[j]:[]},YP=async(A,j,e)=>{if(e<=0)throw new Error("showNotificationWithRetries expects a positive integer for retries");let t=e+1,r;for(let a=0;a<t&&typeof r>"u";a++)r=await la(A,j),r||(await hs(500),a+1);return r||console.error(`Could not show notification after ${t} attempts`),r},la=async(A,j)=>w6(j.type)&&hNA(j.type)?ije(A,j):GNA(A,j);async function ije(A,j){let e=await qNA(j.type,A,j.params);if(e)return await GNA(A,{type:"notificationManager"}),aj.assertLogSafe(e)}async function GNA(A,j){let e=Kl();try{chrome.tabs.sendMessage(A,{name:"show-notification",data:{type:j.type,requiresExplicitHide:!0,params:j.params}},e.resolve)}catch{console.error("Failed to show-notification");return}let t=await e.promise;return t?aj.assertLogSafe(t):void 0}var kK=async(A,j)=>{let e=Kl();chrome.tabs.sendMessage(A,{name:"hide-notification",data:{id:j}},e.resolve);let t=await e.promise;return t?aj.assertLogSafe(t):void 0},A0=async(A,j,e)=>{let t=Kl();try{chrome.tabs.sendMessage(A,{name:"replace-notification",data:{id:j,type:e.type,params:e.params,requiresExplicitHide:!0}},t.resolve)}catch{return}let r=await t.promise;return r?aj.assertLogSafe(r):void 0};async function fNA(A,j){if(!A.masterKey)throw new Error("User AUK is missing");if(!(A.masterKey instanceof rr))throw new Error("User Master key is not a valid Auk");let e=A.masterKey,t=await S6.SrpX.fromHex(j);return S6.CredentialBundle.new({srpx:t,auk:e})}async function FNA(A,j,e){if(!A.CTX)throw new Error("Client CTX is undefined");try{await NA.addCredentialBundle(A.CTX,j,e)}catch(t){let r=A.user()?.uuid;throw q.errors.isServerError(t)?new q.LoggableError({errorClass:p`UploadCredentialBundleError`,message:q.logsafe.assertLogSafe(`Server error (code: ${t.code}) while uploading CredentialBundle for device ${A.deviceUuid}.`),userUuid:r?q.logsafe.assertLogSafe(r):void 0}):new q.LoggableError({errorClass:p`UploadCredentialBundleError`,message:q.logsafe.assertLogSafe(`Failed to encrypt and upload CredentialBundle for device ${A.deviceUuid}`),userUuid:r?q.logsafe.assertLogSafe(r):void 0})}}async function bNA(A,j,e){if(!A.CTX?.session)throw new Error("no session");try{await aA.addCredentialBundle(A.CTX.session,{encCredentials:j,v:2},e)}catch(t){let r=A.user()?.uuid;throw q.errors.isServerError(t)?new q.LoggableError({errorClass:p`UploadEncryptedCredentialBundleError`,message:q.logsafe.assertLogSafe(`Server error (code: ${t.code}) while uploading encrypted CredentialBundle for device ${A.deviceUuid}.`),userUuid:r?q.logsafe.assertLogSafe(r):void 0}):new q.LoggableError({errorClass:p`UploadEncryptedCredentialBundleError`,message:q.logsafe.assertLogSafe(`Failed to encrypt and upload encrypted CredentialBundle for device ${A.deviceUuid}`),userUuid:r?q.logsafe.assertLogSafe(r):void 0})}}var yNA="SAFARI_KEYCHAIN";function lh(){if(T6())return new NnA;if(Bt())return new KnA;throw new Error("Extension not running in Safari")}var KnA=class{logger;constructor(){this.logger=new rt("\u{1F34E} MobileSafariCredentialBundleEncryptor")}async deleteDeviceKey(j,e){let t=await NMA({accountUuid:j.uuid,deviceKeyId:e});if(t.isErr()||t.value.type==="Error")throw new q.LoggableError({errorClass:p`B5XSafariMobileDeleteDeviceKey`,message:p`SafariIOSWebExtension failed to delete DeviceKey`,userUuid:q.logsafe.assertLogSafe(j.userUUID)})}async encrypt(j,e){let t=await e.__crypto_internal.serialize(),r={accountUuid:j.uuid,credentialBundle:Array.from(t)},a=await LMA(r);if(a.isErr()||a.value.type==="Error")throw new q.LoggableError({errorClass:p`B5XSafariMobileEncryptCredentialBundle`,message:p`SafariIOSWebExtension failed to encrypt CredentialBundle`,userUuid:q.logsafe.assertLogSafe(j.userUUID)});let n=a.value.content.credentialBundle,o=q.decode(new Uint8Array(n),q.jsonBytes.pipe(q.crypto.JweB)).unwrap();return this.logger.info("Successfully encrypted CredentialBundle"),{deviceKeyId:a.value.content.deviceKeyId,encryptedCredentialBundle:o}}async decrypt(j,e,t){let r=q.json2ab(t.encCredentials),a=await KMA({accountUuid:j.uuid,deviceKeyId:e,credentialBundle:Array.from(r)});if(a.isErr()||a.value.type==="Error")throw new q.LoggableError({errorClass:p`B5XSafariMobile DecryptCredentialBundle`,message:p`SafariIOSWebExtension failed to decrypt CredentialBundle`,userUuid:q.logsafe.assertLogSafe(j.userUUID)});let n=new Uint8Array(a.value.content.credentialBundle),o=await yi.unsafeIfInputNotTrustworthyDeserialize(n);return this.logger.info("Successfully decrypted CredentialBundle"),{credentialBundle:o}}},NnA=class{logger;constructor(){this.logger=new rt("\u{1F34E} DesktopSafariCredentialBundleEncryptor")}async deleteDeviceKey(j,e){let t=await this.invoke({type:"DeleteDeviceKey",data:{accountUuid:j.uuid,deviceKeyId:e}});if(t.isErr())throw new q.LoggableError({errorClass:p`B5XSafariDesktopDeleteDeviceKey`,message:p`SafariWebExtension failed to delete Device Key`,userUuid:q.logsafe.assertLogSafe(j.userUUID),tags:{invocationError:q.logsafe.assertLogSafe(t.error.type)}})}async encrypt(j,e){let t=await e.__crypto_internal.serialize(),r={accountUuid:j.uuid,credentialBundle:Array.from(t)},a=await this.invoke({type:"EncryptCredentialBundle",data:r});if(a.isErr())throw new q.LoggableError({errorClass:p`B5XSafariDesktopEncryptCredentialBundle`,message:p`SafariWebExtension failed to encrypt CredentialBundle`,tags:{invocationError:q.logsafe.assertLogSafe(a.error.type)},userUuid:q.logsafe.assertLogSafe(j.userUUID)});let n=q.decode(new Uint8Array(a.value.credentialBundle),q.jsonBytes.pipe(q.crypto.JweB)).unwrap();return this.logger.info("Successfully encrypted CredentialBundle"),{deviceKeyId:a.value.deviceKeyId,encryptedCredentialBundle:n}}async decrypt(j,e,t){let r=q.json2ab(t.encCredentials),a=await this.invoke({type:"DecryptCredentialBundle",data:{accountUuid:j.uuid,deviceKeyId:e,credentialBundle:Array.from(r)}});if(a.isErr())throw new q.LoggableError({errorClass:p`B5XSafariDesktop DecryptCredentialBundle`,message:p`SafariWebExtension failed to decrypt CredentialBundle`,userUuid:q.logsafe.assertLogSafe(j.userUUID),tags:{invocationError:q.logsafe.assertLogSafe(a.error.type)}});let n=new Uint8Array(a.value.credentialBundle),o=await yi.unsafeIfInputNotTrustworthyDeserialize(n);return this.logger.info("Successfully decrypted CredentialBundle"),{credentialBundle:o}}async invoke(j){let e=browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"SweDeviceMessage",data:{type:j.type,data:j.data}})}).then(r=>r.type===j.type.toString()?r.data.type==="Error"?(this.logger.error(`Invocation <${j.type}> failed with error <${r.data.content}>`),OA({type:gy.InvalidRequest})):Pj(r.data.content.content):OA({type:gy.InvalidRequest})),t=new Promise(r=>{setTimeout(()=>{r(OA({type:"Timeout"}))},2e3)});return this.logger.info(`Invoking SafariWebExtension <${j.type}>`),Promise.race([e,t]).catch(r=>{throw this.logger.warn(`Invocation failed to send: ${r}`),r})}};async function $NA(){return S6.DeviceKey.generate()}var INA="UpgradeToTrustedDeviceError";async function mK(A,j,e){let t=A.CTX?.user;if(!t)throw new Error("User for Client instance undefined");let r=await fNA(t,e);if(ve()){let s=await lh().encrypt(j.serveraccount,r);await bNA(A,s.encryptedCredentialBundle,s.deviceKeyId),await wNA(j,{deviceUuid:A.deviceUUID,deviceKeyId:s.deviceKeyId,deviceKey:yNA});return}let a=await $NA(),n;try{n=await a.exportObfuscated(j.serveraccount.uuid,j.serveraccount.userUUID)}catch{throw new q.LoggableError({errorClass:q.logsafe.assertLogSafe(INA),message:q.logsafe.assertLogSafe(`Failed to export device key for device ${A.deviceUuid}`),userUuid:q.logsafe.assertLogSafe(j.serveraccount.userUUID)})}await FNA(A,r,a);let o={deviceUuid:A.deviceUUID,deviceKeyId:a.kid,deviceKey:n};await wNA(j,o)}function BK(){return re.getDesktopAppState()}async function wNA(A,j){try{await A.saveDeviceCredentials(j)}catch{throw new q.LoggableError({errorClass:q.logsafe.assertLogSafe(INA),message:q.logsafe.assertLogSafe(`Failed to persist DeviceKey for device ${j.deviceUuid}`),userUuid:q.logsafe.assertLogSafe(A.serveraccount.userUUID)})}}var PNA=A=>{switch(A.toLowerCase()){case"download-extension":return"download-extension";case"practice-extension":return"practice-extension";case"migrate-data":return"migrate-data";case"access-passwords":return"access-passwords";case"invite-family-members":return"invite-family-members";case"pin-extension":return"pin-extension";default:return"unknown"}},LnA={"download-extension":"AH-downloadExtension","set-up-autofill":"AH-setUpAutofill","migrate-data":"AH-migrateData","access-passwords":"AH-accessPasswords","practice-extension":"AH-practiceExtension",practice:"AH-practice","invite-family-members":"AH-inviteFamilyMembers","pin-extension":"AH-pinExtension",unknown:"AH-unknown"};var ONA=7,pv=(A,j)=>{let e=LnA[j];return vj.getItem(`${A}-${e}`)},gK=(A,j)=>{let e=LnA[j];vj.setItem(`${A}-${e}`,"true")},RNA=A=>{lje(A),cje(A)},lje=A=>{let j=A?[A]:H.getAccountHandlers;for(let e of j)e.isUnlocked&&!e.mustMigrateAuth&&e.completeActivationHubTaskByName("download-extension")},cje=async A=>{let j=A?[A]:H.getAccountHandlers;for(let e of j)if(e.isUnlocked&&!pv(e.uuid,"migrate-data")){let t=0,r=e.vaults.filter(a=>e.user?.isOwner()?a.type==="E"||a.type==="P":a.isPersonal);for(let a of r)if(a.localId){let n=await e.getVaultItems(a.localId);if(t+=n.length,t>=ONA)break}t>=ONA&&e.completeActivationHubTaskByName("migrate-data")}},DNA=()=>{let A=H.getAccountHandlers;for(let j of A)j.isUnlocked&&j.completeActivationHubTaskByName("practice-extension")};var ch="DesktopAppStateChanged",hK=class{state;canEnableFeature;_baseDisconnectionReason;constructor(j){if(this.canEnableFeature=j.browser!=="safari-ios",this._baseDisconnectionReason={type:"Disconnected",invalidBrowserState:2,hasEverConnectedToDesktopApp:Ui(),latestReason:0},j.useSharedLockState&&this.canEnableFeature){this.state={type:"Initial"};let e=!Ui()||!j.hasAccounts;this.connectWithDesktopApp({spawnMainApp:e}),chrome.windows.onFocusChanged.addListener(this.onBrowserWindowFocusChange.bind(this))}else this.state={type:"Disabled"}}getState(){return znA(this.state)}getDesktopApp(){return this.state.type==="ValidConnection"?this.state.desktopApp:void 0}enableSharedLockState(){if(this.state.type==="Connecting"||this.state.type==="ValidConnection"||!this.canEnableFeature){this.canEnableFeature||console.info("Asked to enable Shared Lock State when on browser-ios");return}this.state={type:"Initial"},this.connectWithDesktopApp()}disableSharedLockState(){this.state.type!=="Disabled"&&(this.state.type==="ValidConnection"&&this.state.desktopApp.disconnect(),this.updateState({type:"Disabled"}))}async reconnectWithDesktop(j){return this.connectWithDesktopApp({spawnMainApp:j})}async lockState(){if(this.state.type!=="Connecting"&&this.state.type!=="ValidConnection")throw new Error(`Lock state request failed: ${this.state.type}`);let j=this.state.desktopApp;if(!j)throw new Error("Lock state request failed: No Desktop App connection");return j.lockState()}async offlineStatus(){if(this.state.type!=="ValidConnection")throw new Error(`Offline status request failed: ${this.state.type}`);let{desktopApp:j}=this.state;if(!j)throw new Error("Offline status request failed: No Desktop App connection");return j.offlineStatus()}async requestDsecretProxy(j){if(this.state.type!=="Connecting"&&this.state.type!=="ValidConnection")throw new Error(`DSecret proxy request failed: ${this.state.type}`);let e=this.state.desktopApp;if(!e)throw new Error("DSecret proxy request failed: No Desktop App connection");return e.requestDsecretHmac(j)}async requestUpgradeFromOfflineState(){if(this.state.type!=="Connecting"&&this.state.type!=="ValidConnection")throw new Error(`Request to upgrade connection from offline failed: ${this.state.type}`);let j=this.state.desktopApp;if(!j)throw new Error("Request to upgrade connection from offline failed: No Desktop App connection");return j.requestUpgradeFromOfflineState()}async requestDelegatedSession(j){if(this.state.type!=="Connecting"&&this.state.type!=="ValidConnection")throw new Error(`Delegated session request failed: ${this.state.type}`);let e=this.state.desktopApp;if(!e)throw new Error("Delegated session request failed: No Desktop App connection");return e.requestDelegatedSession(j)}async connectWithDesktopApp(j={spawnMainApp:!1}){let e=this.state;if(e.type==="Connecting"||e.type==="ValidConnection")return Pj({numberOfUnlockedAccounts:e.numberOfUnlockedAccounts});if(e.type==="Disabled"||!this.canEnableFeature)return this.canEnableFeature||console.info("Asked to enable Shared Lock State when on browser-ios"),OA(this._baseDisconnectionReason);this.updateState({type:"Connecting",numberOfUnlockedAccounts:0});let t=await CNA((a,n)=>{this.state.type==="ValidConnection"&&this.state.desktopApp===a&&this.updateStateFromDesktopApp(n)},j.spawnMainApp),r=this.updateState({type:"Connecting",numberOfUnlockedAccounts:t.isOk()?t.value.numberOfUnlockedAccounts:0,desktopApp:t.isOk()?t.value.desktopApp:void 0});return t.isOk()?r?!await t.value.desktopApp.init(j.spawnMainApp)||this.state.type==="Disabled"?(this.updateState({type:"Disconnected",reason:this._baseDisconnectionReason}),t.value.desktopApp.disconnect(),OA(this._baseDisconnectionReason)):(this.updateState({type:"ValidConnection",numberOfUnlockedAccounts:t.value.numberOfUnlockedAccounts,desktopApp:t.value.desktopApp}),globalThis.dispatchEvent(new Event(Dh)),Pj({numberOfUnlockedAccounts:t.value.numberOfUnlockedAccounts})):(t.value.desktopApp.disconnect(),OA(this._baseDisconnectionReason)):(t.isErr()&&t.error.latestReason===6?this.updateState({type:"Disabled"}):this.updateState({type:"Disconnected",reason:t.error}),OA(t.error))}updateStateFromDesktopApp(j){j.type==="Disconnected"?this.updateState({type:"Disconnected",reason:{type:"Disconnected",invalidBrowserState:JnA(j),hasEverConnectedToDesktopApp:j.hasEverConnectedToDesktopApp,latestReason:j.latestReason}}):j.type==="Connected"&&this.broadcastState(this.state,this.state)}updateState(j){if(this.state.type==="Disabled"&&(j.type==="Connecting"||j.type==="Disconnected"))return this.broadcastState(this.state,this.state),!1;let e=this.state;return this.state=j,this.broadcastState(e,j),!0}broadcastState(j,e){let t=znA(j),r=znA(e);`${JSON.stringify(r)}`,globalThis.dispatchEvent(new CustomEvent(ch,{detail:{state:r,prevState:t}})),TNA(r);let a=t.type!=="Connected"&&r.type==="Connected",n=t.type==="Connected"&&r.type!=="Connected";(a||n)&&XnA()}onBrowserWindowFocusChange(j){j!==chrome.windows.WINDOW_ID_NONE&&(this.state.type==="ValidConnection"||this.state.type==="Connecting"||this.state.type==="Disabled"||(`${j}`,this.reconnectWithDesktop(!1)))}};function znA(A){switch(A.type){case"Initial":case"Connecting":return{type:"Connecting"};case"ValidConnection":{let j=A.desktopApp.state;return{type:"Connected",accountUuids:j.type==="Connected"?j.accountUuids:[],lockState:j.type==="Connected"?j.lockState:"Locked"}}case"Disconnected":return{type:"Disconnected",latestReason:A.reason.latestReason,invalidBrowserState:A.reason.invalidBrowserState,hasEverConnectedToDesktopApp:A.reason.hasEverConnectedToDesktopApp};case"Disabled":return{type:"Disabled"};default:te(A)}}var Vi={};er(Vi,{DISABLE_BIOMETRY_AUTO_PROMPT:()=>fK,disableBiometry:()=>aoA,enableBiometry:()=>roA,getBiometryAvailabilityStatus:()=>noA,getBiometryConfig:()=>e5A,isBiometryConfigured:()=>t5A,onAccountSignInSuccess:()=>xje,promptForBiometricsAndUnlock:()=>qje,removeAccountFromBiometryConfig:()=>vje,setBiometryConfig:()=>hje});var WnA=5*60*1e3,qK;function _NA(A){qK=kje(A)}function QnA(A){if(qK)return qK(A)}function kje(A){let j={password:A};return setTimeout(()=>{j.password=void 0},WnA),e=>{let t=j.password;return e&&t?!0:(j.password=void 0,t)}}var xK=class{_removeTabListeners;_resolveAuthCompleted=j=>({});_rejectAuthCompleted=()=>({});_authCompleted;_tabId;_timeout;constructor(){this._authCompleted=new Promise((j,e)=>{this._resolveAuthCompleted=j,this._rejectAuthCompleted=t=>e(t?.reason)}),this._timeout=setTimeout(()=>{this._removeDuoTab(),this._rejectAuthCompleted({reason:`Did not receive code within ${WnA}ms time out`})},WnA)}async beginAuth(j){this._initTabListeners(),await this._spawnDuoTab(j)}cancelAuth(){this._removeDuoTab(),this._rejectAuthCompleted({reason:"Duo Auth cancelled"}),qK=void 0}_initTabListeners(){let j=this._signinCallback.bind(this),e=this._removedCallback.bind(this);browser.tabs.onUpdated.addListener(j),browser.tabs.onRemoved.addListener(e),this._removeTabListeners=()=>{browser.tabs.onUpdated.removeListener(j),browser.tabs.onRemoved.removeListener(e)}}async _spawnDuoTab(j){let e=j.duo?.authURL;if(!e)throw new Error("No auth URL present in MFA response");this._tabId=await ZP(e)}_signinCallback(j,e){if(j===this._tabId&&e.url?.includes("duo-sign-in")){this._removeTabListeners&&this._removeTabListeners(),this._removeDuoTab();try{let t=new URL(e.url),r=uje(t);this._resolveAuthCompleted(r)}catch{this._rejectAuthCompleted({reason:"Could not parse duo_code from tab"})}finally{clearTimeout(this._timeout)}}}_removedCallback(j){j===this._tabId&&(this._tabId=void 0,this._rejectAuthCompleted({reason:"Duo MFA tab closed before code was returned"}))}async completed(){return this._authCompleted}async _removeDuoTab(){if(this._tabId){try{await browser.tabs.remove(this._tabId)}catch(j){console.warn("[Duo MFA] Failed to close Duo MFA tab:",j)}this._tabId=void 0}}};function uje(A){return A.searchParams.get("duo_code")||""}var A8={UnhandledSLSMessage:"UnhandledSLSMessage",PasswordTimeboxUnavailable:"PasswordTimeboxUnavailable",DuoAuthenticatorUndefined:"DuoAuthenticatorUndefined"};async function SNA(){let A=KNA();if(_d())try{await re.desktopConnectionManager?.requestUpgradeFromOfflineState();return}catch(j){let e=j===BG.UnknownInvocation;if(!A)return console.warn("Could not requestUpgradeFromOfflineState",{activeTimebox:A,ophRequestTypeUnsupported:e}),e?A8.UnhandledSLSMessage:A8.PasswordTimeboxUnavailable}if(!A)return A8.PasswordTimeboxUnavailable;try{await HNA(),vt()&&Ko()}catch(j){return console.error("[Duo MFA] Could not complete Duo Authentication in browser",j),A8.DuoAuthenticatorUndefined}}async function Mo(){Ft.updateConnectivityStatus();let A=MNA(),j={id:"must-upgrade-offline",title:oA("Your account is offline"),accountUuid:A},e=je.getItem("offline-mfa-accounts");if(await Ft.connectivityStatus()==="offlineAuthenticationFailed"){if(e){bMA();return}xs({...j,text:oA("You won't be able to save changes until you finish signing in."),primaryAction:{id:"open-mfa-prompt-id",label:oA("Continue Signing In"),destructive:!1,action:{type:"BeginDuoMfa"}},cancelAction:oA("Stay Offline")});return}await Ft.connectivityStatus()==="networkOffline"&&xs({...j,text:oA("You won't be able to save changes until you are signed in and online."),primaryAction:{id:"ok",label:oA("Ok"),destructive:!1,action:{type:"Ok"}}})}async function j8(A,j){if(re.getDesktopAppState().type==="Connected"||re.getDesktopAppState().type==="Connecting")return;let e=A.accountUUID;if(e&&A.CTX)switch(j){case"All":lHA(e,await NA.getInitializationExport(A.CTX),A.CTX.session.auth?.srpX);break;case"Request":cHA(e,A.CTX.session.requestId);break;default:te(j)}}async function NNA(){if(["Connected","Connecting"].includes(re.getDesktopAppState().type))return;let A=H.getAccountHandlers.filter(j=>j.isUnlocked);for(let j of A){if(!j.masterKey){console.warn("Missing JWK when attempting to save context init cache");continue}let e={accountUuid:j.uuid,masterKey:await j.masterKey.exportJwk()};j.client?.CTX&&j.hasSignedInClient&&(e.srpX=j.client.CTX.session.auth?.srpX,e.session={...await NA.getInitializationExport(j.client.CTX)}),hM(e)}}async function vK(A,j,e,t){let r=await t7(),a=await YnA(A,r,j);return new mv({signinAddress:A,signedInContext:a,deviceUuid:r,requestDelegatedSession:e,srpX:t})}async function LNA(A,j){let e={accountUuid:A.accountUUID,sessionId:j};return Bt()?zNA(e):re.desktopConnectionManager?.requestDsecretProxy(e)}var UNA=A=>q.errors.isServerError(A,q.errors.ServerErrorCode.authenticationRequired,q.errors.HTTPStatusCode.unauthorized);async function VNA(A){let j=await ma.vaultItemToApi(A);return A.localId&&(j.id=A.localId),j}var GK,ZnA,QNA;async function HNA(){if(!GK)throw new Error("duo authenticator not initialized");return console.info("[Duo MFA] Opening and navigating to the Duo MFA URL"),GK()}function AoA(){ZnA?.(),ZnA=void 0,GK=void 0}function MNA(){return QNA}function XNA(A){QNA=A}function KNA(){return!!QnA(!0)}async function Hd({credentials:A,device:j,onServerChanged:e,onClientInvalidated:t,accountAttrs:r,additionalSignInOptions:a}){let n=await pje(A,j,r,a);if(!n)throw new Error("No context provided to sign into account.");return new mv({signinAddress:A.signinAddress,signedInContext:n,deviceUuid:j.uuid,onServerChanged:e,onClientInvalidated:t})}async function YnA(A,j,e){let t=ki(A,j);return await NA.initialize(t,1,e),t}var Sd=class extends Error{name="InvalidClientError"},mv=class{uuid;deviceUuid;signinAddress;debugName;_invalid=!1;get invalid(){return this._invalid}reauthenticating;onClientInvalidated;onServerChanged;requestDelegatedSession;_dangerousInnerCTX;_srpX;logPrefix;constructor({signinAddress:j,signedInContext:e,deviceUuid:t,onServerChanged:r,onClientInvalidated:a,requestDelegatedSession:n,srpX:o}){this.uuid=e.account?.uuid,this.signinAddress=CCA(j),this.deviceUuid=t,this.debugName=e.account?.name+"/"+e.domain,this.safeRegisterContext(e),this.onClientInvalidated=a,this.onServerChanged=r,this.requestDelegatedSession=n,this._srpX=o,this.logPrefix=W(`Client-${this.uuid?this.uuid:"unknown"}`)}get CTX(){return this._dangerousInnerCTX}safeRegisterContext=j=>{this._dangerousInnerCTX=j,this._dangerousInnerCTX.nc.on(q.notification.ServerChanged,this.handleServerDidChange),this._dangerousInnerCTX.nc.on(q.notification.ServerConnected,this.handleServerDidConnect),this._dangerousInnerCTX.session.nc.on(q.notification.SessionRequestIdChanged,this.handleSessionRequestIdChanged),j8(this,"All")};get accountUUID(){return this.uuid}get deviceUUID(){return this.deviceUuid}getDelegateSessionInit=async j=>this.executeWithReauth(p`getDelegateSessionInit`,async e=>NA.delegateSession(e,j,!1));signDeviceTrustPublicKey=async j=>this.executeWithReauth(p`signDeviceTrustPublicKey`,async e=>aA.signDeviceTrustPublicKey(e.session,j));signOut=async()=>{if(!this.CTX){en(new Error("Client Sign-out Failed"),p`cannot sign out a context that is not defined`);return}await this.safeSignOutClient(this.CTX,p`MANUAL`)};account(){return this.CTX?.account}getLatestUserPreferences=async()=>{if(!this.CTX){let e=p`Unable to get user preferences. CTX is undefined`;throw console.error(e.str),new q.LoggableError({errorClass:p`ClientError`,message:e})}return this.CTX.user?(await aA.getUser(this.CTX.session,this.CTX.user.uuid,zr.Attr.None)).preferences:void 0};user(){return this.CTX?.user}isSignedIn=()=>this.CTX?.isSignedIn()??!1;saveItem=async(j,e)=>(await this.saveItems([j],e))[0];saveItems=async(j,e)=>{let t=await Promise.all(j.map(VNA)),r=await this.executeWithReauth(p`saveItems`,async a=>aA.patchVaultItems(a.session,e.uuid,e.contentVersion,t));if(r&&r.updatedItems&&Object.keys(r.updatedItems).length>0)return j.forEach(a=>{a.itemVersion=r.updatedItems[a.uuid]}),t;throw new Error(`Failed to save ${j.length} item(s) with vault ${e.uuid} in ${this.accountUUID}: no items updated`)};getAccountOverview=async()=>this.executeWithReauth(p`getAccountOverview`,async j=>aA.getAccountOverview(j.session));get srpX(){if(this._srpX)return this._srpX;if(this.CTX?.session?.auth?.srpX)return this.CTX.session.auth.srpX;let j="Failed to determine srpX";throw console.error(j),new Error(j)}executeWithReauth=async(j,e)=>{if(this.reauthenticating){`${this.logPrefix.str}${j.str}`;let o=await this.reauthenticating.promise;if(o.type==="failure"){let i=`Did not request "${j.str}" in flight reauthentication failed: ${o.reason.str}`;throw new Sd(i)}}if(!this.CTX){let o=`Cannot invoke "${j.str}" or reauthenticate a context that doesn't exist`;throw console.error(o),new Sd(o)}let t=this.CTX;if(!t.account?.uuid){let o=`Will not invoke "${j.str}" or reauthenticate a context without an account uuid`;throw console.error(o),new Sd(o)}let r=t.account.uuid,a;try{return await VaA(async()=>e(t),j,this.logPrefix,p`with reauth support`)}catch(o){a=o}if(!UNA(a))throw`${this.logPrefix.str}${j.str}`,a;let n=await this.handleReauthenticate(j,r,t);if(n.type==="success"&&this.mustMigrate(n.ctx)){await j5A(oA("Grace period for authentication method migration has expired. Please sign in again.")),this.safeInvalidate(p`must-migrate`);let o=`failed to request "${j.str}" and reauthenticated ctx must be migrated`;throw new Sd(o)}if(n.type!=="success"){let o=`failed to request "${j.str}" and failed to reauthenticate: ${n.reason.str}`;throw new Sd(o)}return await VaA(async()=>e(n.ctx),j,this.logPrefix,p`with reauth support - attempt 2`)};async handleReauthenticate(j,e,t){if(`${this.logPrefix.str}${j.str}`,this.reauthenticating)return`${this.logPrefix.str}${j.str}`,this.reauthenticating.promise;this.reauthenticating=Kl();let r=await this.safeReauthenticate(j,e,t);return r.type==="failure"&&(console.info(`${this.logPrefix.str}: "${j.str}" could not reauthenticate: ${r.reason.str} - invalidate context`),await this.safeInvalidate(j)),r.type==="success"&&(`${this.logPrefix.str}${j.str}`,this.safeRegisterContext(r.ctx),this._signOut(t).catch(a=>{en(a,p`Could not sign stale CTX out - continuing reauthentication`)})),this.reauthenticating.resolve(r),this.reauthenticating=void 0,r}async safeReauthenticate(j,e,t){return this.reauthenticate(j,e,t).catch(()=>({type:"failure",reason:W("unknown-reauth-error")}))}async reauthenticate(j,e,t){let r=await this.safeReauthWithDelegatedSession(j,e,t);if(r.type==="success")return r;if(`${this.logPrefix.str}${j.str}${r.reason.str}`,r.type==="failure"&&r.reason.str==="user-suspended")return`${this.logPrefix.str}${j.str}`,r;let a=await this.safeReauthWithMukSrpX(j,e,t);return a.type==="success"||`${this.logPrefix.str}${j.str}${a.reason.str}`,a}async safeReauthWithDelegatedSession(j,e,t){return this.reauthWithDelegatedSession(j,e,t).catch(()=>({type:"failure",reason:W("unknown-delegate-error")}))}async reauthWithDelegatedSession(j,e,t){if(`${this.logPrefix.str}${j.str}`,!this.requestDelegatedSession)return{type:"failure",reason:W("no-delegated-session-available")};let r;try{r=await this.requestDelegatedSession(e)}catch{return{type:"failure",reason:W("delegating-session")}}if(r.isErr())return r.error.type==="RequestError"&&r.error.content===Hh.UserSuspended?{type:"failure",reason:W("user-suspended")}:{type:"failure",reason:W(`session-error-${r.error.type}`)};let{notifier:a,sessionKey:n}=r.value,o;try{o=await NA.getInitializationExport(t)}catch{return{type:"failure",reason:W("initializing-context")}}let i;try{i=await YnA(this.signinAddress,this.deviceUUID,{...o,serverConfig:{notifier:a},sessionKey:n})}catch{return{type:"failure",reason:W("building-new-context")}}return{type:"success",ctx:i}}async safeReauthWithMukSrpX(j,e,t){return this.reauthWithMukSrpX(j,e,t).catch(()=>({type:"failure",reason:W("unknown-muk-srpx-error")}))}async reauthWithMukSrpX(j,e,t){`${this.uuid}${j.str}`;let r=await this.buildMukSrpXCredentials(e,t);if(r.type==="failure")return r;let a;try{a=ki(this.signinAddress,this.deviceUUID)}catch{return{type:"failure",reason:W("failed-initializing-new-ctx")}}let n;try{n=await YNA(a,r.credentials,void 0)}catch(o){let i="muk-request-failed-unknown";return q.errors.isServerError(o)&&(i=`muk-request-failed-${o.code}`),`${this.uuid}${j.str}${i}`,{type:"failure",reason:W(i)}}return{type:"success",ctx:n}}async buildMukSrpXCredentials(j,e){if(!e.user?.uuid)return{type:"failure",reason:W("missing-user-uuid")};if(!e.user.masterKey)return{type:"failure",reason:W("missing-master-key")};if(!e.user.secretKey)return{type:"failure",reason:W("missing-secret-key")};let t;try{t=await e.user.masterKey.exportJwk()}catch{return{type:"failure",reason:W("export-jwk-failed")}}let r;try{r=e.user.secretKey.exportSensitiveReadableString()}catch{return{type:"failure",reason:W("readable-secret-key-failed")}}return{type:"success",credentials:{accountIdentifier:{accountUUID:j,userUUID:e.user.uuid,server:e.config.server},uuid:e.user.uuid,email:e.user.email,muk:t,secretKey:r,signinAddress:this.signinAddress,srpX:this.srpX,dSecret:e.user.dSecret}}}safeInvalidate=async j=>{if(console.info(`${this.logPrefix.str}: "${j.str}" start invalidating`),this._invalid){`${this.logPrefix.str}${j.str}`;return}`${this.logPrefix.str}${j.str}`,this._invalid=!0,this.CTX&&await this.safeSignOutClient(this.CTX,j);try{this.onClientInvalidated?.(this)}catch(e){en(e,p`Encountered error while invoking invalidate callback`)}`${this.logPrefix.str}${j.str}`};async safeSignOutClient(j,e){try{await this._signOut(j)}catch(t){en(t,p`Could not sign CTX out - continuing sign out cleanup`,void 0,{initiator:e})}this.onServerChanged=void 0,this._srpX=void 0,this._dangerousInnerCTX=void 0}async _signOut(j){j.nc.off(q.notification.ServerChanged,this.handleServerDidChange),j.nc.off(q.notification.ServerConnected,this.handleServerDidConnect),j.session.nc.off(q.notification.SessionRequestIdChanged,this.handleSessionRequestIdChanged),await NA.signOut(j)}mustMigrate(j){return!j.account?.uuid||!ZA.accountHasFlag(j.account.uuid,"auth-self-serve-migration-v1")?!1:j.session.ssoMigrationGracePeriod?.state===Dj.State.MustMigrateAuth}getAccount=async()=>this.executeWithReauth(p`getAccount`,async j=>aA.getAccountWithAttrs(j.session,[aA.AccountAttrs.Me,aA.AccountAttrs.Billing,aA.AccountAttrs.SettingsTeamMemberPolicies,aA.AccountAttrs.Tier]));getKeysets=async()=>this.executeWithReauth(p`getKeysets`,async j=>aA.getKeysets(j.session));getVault=async j=>{if(!this.CTX)throw new Error("Unable to get vault. CTX is undefined.");return(await this.CTX.session.request({name:W("getVault"),method:"GET",url:"/api/v2/vault/"+j+"?attrs=combined-access,archived-keys",encrypted:!0})).json()};getItemTemplates=async()=>this.executeWithReauth(p`getItemTemplates`,async j=>aA.getAccountTemplates(j.session,!1));postItemUsage=async j=>{let e=j.map(t=>{let r=new Date;return r.setTime(t.used_at),{vaultUuid:t.vault_uuid,itemUuid:t.item_uuid,usedAt:ls(r),usedVersion:t.used_version,action:t.action}});return this.executeWithReauth(p`postItemUsage`,async t=>aA.reportItemUsage(t.session,e))};getFile=async(j,e)=>this.executeWithReauth(p`getFile`,async t=>aA.getFile(t.session,e,j.uuid,j.vault.uuid));uploadFile=async j=>{let{data:e,attributes:t}=await ma.encryptFile(j),{fileId:r,signingKey:a}=await this.executeWithReauth(p`uploadFile`,async n=>aA.uploadFile(n.session,e));if(r)return{...t,fileId:r,signingKey:a};throw new Error("Session did not provide file ID.")};getDocumentBlob=async(j,e)=>this.executeWithReauth(p`getDocumentBlob`,async t=>NA.getDocumentBlob(t,j,e));getPendingDeviceEnrollments=async()=>{try{return await this.executeWithReauth(p`getPendingDeviceEnrollments`,async j=>NA.getPendingDeviceEnrollments(j))}catch(j){if(j instanceof Sd){console.warn("Failed to get pending device enrollments: ",j);return}let e=q.errors.isServerError(j)?q.logsafe.assertLogSafe(`getPendingDeviceEnrollments returned server error (code: ${j.code})`):p`getPendingDeviceEnrollments request failed`;en(new q.LoggableError({errorClass:p`GetPendingDeviceEnrollments`,message:e,userUuid:this.CTX?.user?.uuid?q.logsafe.assertLogSafe(this.CTX?.user?.uuid):void 0,stackOverrideError:j instanceof Error?j:void 0}),p`Failed to get pending device enrollments`);return}};cancelPendingDeviceEnrollment=async j=>this.executeWithReauth(p`cancelPendingDeviceEnrollment`,async e=>NA.cancelDeviceEnrollment(e,j));fetchPolicies=async()=>{if(!this.CTX)throw new Error("CTX undefined.");return this.executeWithReauth(p`fetchPolicies`,async()=>{let j=await NA.getAllPoliciesForCurrentAccount(this.CTX);return{...j,policies:j.policies.map(e=>{switch(e.policyName){case"auto-lock":case"release-channels":case"ssh-bookmarks":case"cli-integration":case"app-launcher-allowed":case"allow-maps":case"restrict-failed-login-attempts":case"reporting":case"extension-allowed":case"needs-kolide-mobile-health-check":case"developer-environments":case"autofill-confirmation":case"secure-remote-autofill":case"security-settings-presets":case"Unsupported":return e;default:try{te(e)}catch{}return{policyName:"Unsupported",policyContext:"",definition:{},version:0}}})}})};getKolideApps=async()=>this.executeWithReauth(p`getKolideApps`,async j=>await aA.getKolideApps(j.session));getGroups=async j=>this.executeWithReauth(p`getGroups`,async e=>await aA.getGroups(e.session,xA.Group.Attr.None,j));getGroupPubKeys=async j=>this.executeWithReauth(p`getGroupPubKeys`,async e=>await aA.getGroupPubKeys(e.session,j));createManagedCredentials=async j=>this.executeWithReauth(p`createManagedCredentials`,async e=>await NA.createManagedCredentials(e,j));getManagedCredentialPolicies=async()=>this.executeWithReauth(p`getManagedCredentialPolicies`,async j=>await NA.getManagedCredentialPolicies(j));getManagedCredentials=async()=>this.executeWithReauth(p`getManagedCredentials`,async j=>await NA.getManagedCredentials(j));async updateManagedCredential(j){return this.executeWithReauth(p`updateManagedCredential`,async e=>await NA.updateManagedCredential(e,j))}reportManagedCredentialUsage=async j=>{let e=j.map(t=>{let r=new Date;return r.setTime(t.usedAt),{usedAt:ls(r),action:t.action,credential:t.credential}});return this.executeWithReauth(p`reportManagedCredentialUsage`,async t=>aA.reportManagedCredentialUsage(t.session,e))};handleServerDidConnect=()=>{!this.accountUUID||!ZA.accountHasFlag(this.accountUUID,"core-securityDevelopment-sync-notifierConnection")||this.handleServerDidChange()};handleServerDidChange=(...j)=>{let e=j[0];this.CTX?.isSignedIn()&&this.onServerChanged&&this.onServerChanged(e)};handleSessionRequestIdChanged=()=>{j8(this,"Request")}},pje=async(A,j,e,t)=>{let{signinAddress:r}=A;q.config.setDevice(j);let a=ki(r,j.uuid);return"accountPassword"in A?mje(a,A,e):YNA(a,A,e,t)},e8={shouldLoadUniverse:!1,isDesignatedAsPublic:!1},YNA=async(A,j,e,t)=>{let r={...e8,...t},a=await NA.signIn(A,j,r);if(a.type==="domain_changed"&&(A.resetWithHost(a.newHost),a=await NA.signIn(A,j,r),a.type==="domain_changed"))throw new Error("Failed to sign in using new domain from server.");if(a.type==="mfa_required"&&(j.dSecret&&!a.details.dsecret?.enabled&&console.info("MFA flow: B5 signin returned undefined or false dsecret.enabled"),await A5A(A,a.details,j)),!A.user){let n=new Error("Missing CTX user when signing in with Muk and SrpX.");throw en(n,p`Missing CTX user`),n}return A.account=await ZNA(A,e),A},mje=async(A,j,e)=>{let t=performance.now(),r=S6.SecretKey.fromInput(j.secretKey);if(!r)throw new Error(`Secret Key for account ${j.accountIdentifier.accountUUID} invalid.`);let a={email:j.email,secretKey:r,password:j.accountPassword};try{let n=await NA.signIn(A,a,e8);if(n.type==="domain_changed"&&(A.resetWithHost(n.newHost),n=await NA.signIn(A,a,e8),n.type==="domain_changed"))throw new Error("Failed to sign in using new domain from server.");n.type==="mfa_required"&&(n.details.duo?.enabled&&_NA(a.password),await A5A(A,n.details,j))}catch(n){if(!A.isSignedIn())throw n}return A.user?(A.user.password=j.accountPassword,A.account=await ZNA(A,e),A.user.password=void 0,console.info(`Signed in successfully to ${A.account.uuid} and loaded account details. %cElapse time ${(performance.now()-t).toFixed(0)}ms.`,"color:blue"),A):Promise.reject("Missing user")},ZNA=async(A,j)=>{let e=await aA.getAccountWithAttrs(A.session,[aA.AccountAttrs.Me,aA.AccountAttrs.SettingsTeamMemberPolicies,...j||[]]);return(await ma.parseAccount(A,e)).account},A5A=async(A,j,e)=>{if(e.dSecret&&j.dsecret?.enabled){console.info("[MFA] Completing sign-in with dSecret...");try{await NA.completeMFASignInWithDSecret(A,e.dSecret,e8),WNA(e.accountIdentifier.accountUUID);return}catch(t){if(JNA(e.accountIdentifier.accountUUID),N7(t,td.invalidMFA))console.error("Unable to complete MFA sign-in with stored dSecret. Device deauthorized?");else throw en(t,p`Unexpected error when completing MFA with stored dSecret`,q.logsafe.assertLogSafe(e.accountIdentifier.userUUID)),t}}if(j.duo?.enabled){console.info("[Duo MFA] Completing MFA sign-in with Duo..."),XNA(e.accountIdentifier.accountUUID);try{A.user&&(A.user.password=void 0);let t=new xK;Mo(),Bt()?await t.beginAuth(j):GK=async()=>Promise.resolve(t.beginAuth(j)),ZnA=()=>t.cancelAuth();let r=await t.completed();if(A.user){let a=QnA();typeof a=="string"&&(A.user.password=a)}await NA.completeMFASignInWithDuo(A,{type:"duov4",code:r},{isDesignatedAsPublic:!0,shouldLoadUniverse:!0}),console.info("\u2705 Duo code successfully submitted!");return}catch(t){throw XNA(void 0),console.error("\u26D4 Duo auth failed:",t),new gM(0,"Unable to finish sign in because Duo MFA failed.")}finally{AoA()}}if(j.dsecretProxy?.enabled){console.info("[MFA] Completing MFA sign-in with dSecret proxy...");try{let t=await LNA(e.accountIdentifier,A.session.sessionUuid);if(!t)throw new Error("No dSecret proxy returned");try{await NA.completeMFASignInWithDSecretProxy(A,t.dsecretHmac,t.deviceUUID,e8),WNA(e.accountIdentifier.accountUUID);return}catch(r){en(r,p`Unable to complete MFA sign-in with dSecret proxy.`,q.logsafe.assertLogSafe(e.accountIdentifier.userUUID))}}catch{console.error("Desktop App not connected or dSecret not available")}}throw JNA(e.accountIdentifier.accountUUID),new K7(q.errors.ClientErrorCode.invalidMFA,q.logsafe.L`Unable to sign in with available MFA options.`)},JNA=A=>{let j=je.getItem("offline-mfa-accounts");if(j){let e=JSON.parse(j);if(!e.find(r=>r===A)){let r=[...e,A];je.setItem("offline-mfa-accounts",JSON.stringify(r))}}else je.setItem("offline-mfa-accounts",JSON.stringify([A]))},WNA=A=>{let j=je.getItem("offline-mfa-accounts");if(j){let t=JSON.parse(j).filter(r=>r!==A);je.setItem("offline-mfa-accounts",JSON.stringify(t))}};var Tm={};er(Tm,{getAuthMethod:()=>toA,getBiometryUnlockAccounts:()=>Bje,getBiometryUnlockSecrets:()=>eoA,setLockScreenStatus:()=>gje});var eoA=async A=>{let j=[];for await(let e of A.filter(t=>t.isUnlocked)){let t=await e.masterKey?.exportJwk();t?j.push({accountUuid:e.serveraccount.uuid,userUuid:e.serveraccount.userUUID,accountType:toA(e.serveraccount.authMethods),muk:{kty:t.kty,kid:t.kid,alg:t.alg,k:t.k,ext:t.ext,key_ops:t.key_ops},srpX:e.client?.CTX?.session.auth?.srpX}):console.warn("Unable to retrieve master unlock key for account:",e.serveraccount.uuid)}return j=j.filter(e=>e.accountType===kB.SecretKey),j.length>0?console.info("Retrieved biometry unlock secrets for the account(s):",j.map(e=>e.accountUuid)):console.info("No biometry unlock secrets found."),j},Bje=A=>{let j=A.map(e=>({accountUuid:e.serveraccount.uuid,userUuid:e.serveraccount.userUUID,accountType:toA(e.serveraccount.authMethods)}));return j=j.filter(e=>e.accountType===kB.SecretKey),j},toA=A=>{if(A.find(j=>j.type===aA.OidcAuth))return kB.Sso;if(A.find(j=>j.type===aA.PasswordAuth))return kB.SecretKey;if(A.find(j=>j.type===aA.WebauthnAuth))return kB.WebAuthn;throw new q.LoggableError({errorClass:p`UnsupportedAuthMethodBiometryError`,message:p`Unable to find a supported auth method to use for biometry`})},gje=async A=>lj("set-lock-screen-status",{lockScreenStatus:A});var e5A=async()=>{let A=WA().accountsEnabledForBiometry.length>0,j=T6()&&ZA.hasPreRegistrationFlag("b5x-safari-biometry"),e=j&&(await noA(t=>{switch(t){case Uo.Available:case Uo.Disconnected:case Uo.EnrollmentChanged:case Uo.Lockout:case Uo.NotInteractive:case Uo.NotPaired:case Uo.Unknown:case Uo.WatchNotAvailable:return!0;case Uo.NotEnrolled:case Uo.NotAvailable:case Uo.SensorUnavailable:return!1}})).isBiometryAvailable;return{isUserEnabled:A,isFeatureEnabled:j,isBiometryAvailableOnDevice:e}},hje=async A=>A.data.isUserEnabled?roA():aoA(),roA=async(A=H.getAccountHandlers)=>{try{let j=await eoA(A);if(j.length===0)return console.warn("No biometry unlock secrets were found"),{succeeded:!1};let t=(await dh.saveBiometryUnlockSecrets(j)).filter(r=>r.succeeded).map(r=>r.accountUuid);if(t.length===0)throw new q.LoggableError({errorClass:p`SaveBiometryError`,message:p`No succeeded accounts were returned when saving the biometry unlock secrets`});return t=t.concat(WA().accountsEnabledForBiometry),hn({accountsEnabledForBiometry:t}),console.info("The following accounts are now configured to use biometry:",t),{succeeded:!0,accountsEnabledForBiometry:t}}catch(j){return j instanceof q.LoggableError&&q.reportError(j),console.error("Unable to save the biometry unlock secrets:",j),{succeeded:!1}}},aoA=async()=>{try{let A=WA().accountsEnabledForBiometry;if(A.length===0)return console.warn("No enabled accounts were found in the app config to remove."),{succeeded:!0};let j=Tm.getBiometryUnlockAccounts(H.getAccountHandlers.filter(e=>A.includes(e.serveraccount.uuid)));return j.length>0?await dh.removeBiometryUnlockSecrets(j):console.warn("No biometry unlock accounts were found to remove from the secure enclave."),hn({accountsEnabledForBiometry:[]}),console.info("Successfully disabled the biometry configuration."),{succeeded:!0}}catch(A){return A instanceof q.LoggableError&&q.reportError(A),console.error("Unable to remove the biometry unlock secrets:",A),{succeeded:!1}}},t5A=async()=>{let A=await e5A();return A.isUserEnabled&&A.isFeatureEnabled},noA=async(A=j=>j===Uo.Available)=>{try{let j=await dh.getBiometryAvailability(),e=A(j.current_availability),t=j.current_method===zO.TouchId,r=j.current_policy===uy.BiometricsOnly||j.current_policy===uy.BiometricsOrWatch,a=e&&t&&r;return a||console.warn("Biometry is unavailable. Biometry status:",j),{isBiometryAvailable:a,currentBiometryAvailability:j.current_availability}}catch(j){j instanceof q.LoggableError&&q.reportError(j),console.error("An error occurred determining the biometry availability:",j)}return{isBiometryAvailable:!1}},fK="disable-biometry-auto-prompt",qje=async()=>{let A=WA().accountsEnabledForBiometry;if(A.length===0)return console.warn("No enabled accounts were found in the app config to unlock."),OA({type:"NoSavedAccounts"});let j=Tm.getBiometryUnlockAccounts(H.getAccountHandlers.filter(n=>A.includes(n.serveraccount.uuid)));if(j.length===0)return console.warn("No biometry unlock accounts were found."),OA({type:"NoSavedAccounts"});let e;try{e=await dh.getBiometryUnlockSecrets(j)}catch(n){return console.error("Unable to unlock account(s) using biometry:",n),OA({type:"FailedToUnlock"})}if(e.userFallback)return console.info("The user opted to enter their account password to unlock the extension."),je.setItem(fK,"Y"),OA({type:"UserFallback"});if(e.userCancel)return console.info("The user cancelled the biometry prompt."),OA({type:"UserCancel"});if(e.secrets.length===0)return console.error("No biometry unlock secrets were found."),OA({type:"FailedToUnlock"});Tm.setLockScreenStatus("working");let t=[],r=await jn();for await(let n of e.secrets){let o=await SA.getDatabase().findAccountByUUID(n.accountUuid);if(!o)console.warn(`Unable to create client for account <${n.accountUuid}>: Unable to retrieve database account.`);else if(!o.secretKey)console.warn(`Unable to create client for account <${n.accountUuid}>: No secret key found.`);else if(!n.srpX)console.warn(`Unable to create client for account <${n.accountUuid}>: No srpX found.`);else try{let i=Md(n.muk),s=await Hd({credentials:{accountIdentifier:{accountUUID:n.accountUuid,userUUID:n.userUuid,server:fi(o.signinAddress)},email:o.email,muk:i,secretKey:o.secretKey,signinAddress:o.signinAddress,srpX:n.srpX,dSecret:o.dSecret},device:r}).finally(async()=>Ft.updateConnectivityStatus());t.push({client:s,accountUuid:n.accountUuid,muk:i})}catch(i){console.error(`Unable to initialize a client for account <${n.accountUuid}>:`,i)}}if(t.length===0)return console.error("No delegated sessions were created to use to unlock the extension."),Tm.setLockScreenStatus("error"),OA({type:"FailedToUnlock"});let a=await Cm({type:"DelegatedSession",data:t});return a.isErr()?(console.error(`Unable to unlock account(s): ${a.error.type}`),Tm.setLockScreenStatus("error"),OA({type:"FailedToUnlock"})):Pj(void 0)},xje=async()=>{if(!await t5A())return;if(je.getItem(fK)==="Y"&&je.removeItem(fK),(await noA()).currentBiometryAvailability===Uo.EnrollmentChanged&&!(await aoA()).succeeded){console.error("Unable to disable biometry and re-enroll the device");return}let A=WA().accountsEnabledForBiometry,j=H.getAccountHandlers.filter(e=>e.isUnlocked&&!A.includes(e.serveraccount.uuid));j.length!==0&&roA(j)},vje=async A=>{try{let j=WA().accountsEnabledForBiometry;if(j.filter(t=>t===A.serveraccount.uuid).length===0){console.info(`Unable to remove account from biometry config. Account ${A.serveraccount.uuid} is not configured for biometry`);return}let e=Tm.getBiometryUnlockAccounts([A]);e.length>0?(await dh.removeBiometryUnlockSecrets(e),console.info(`Removed account ${A.serveraccount.uuid} from the secure enclave.`)):console.warn(`Unable to remove account ${A.serveraccount.uuid} from the secure enclave. No biometry unlock accounts were retrieved.`),hn({accountsEnabledForBiometry:j.filter(t=>t!==A.serveraccount.uuid)}),console.info(`Removed account ${A.serveraccount.uuid} from the B5X configuration.`)}catch(j){q.reportError(new q.LoggableError({errorClass:p`RemoveAccountBiometryError`,message:p`Unable to remove the biometry unlock secrets for an account`})),console.error("Unable to remove the biometry unlock secrets:",j)}};var dh={};er(dh,{getBiometryAvailability:()=>bje,getBiometryUnlockSecrets:()=>Fje,removeBiometryUnlockSecrets:()=>Gje,saveBiometryUnlockSecrets:()=>fje});var FK=1e4,Gje=async A=>j6.withTimeout(browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"Biometry",data:{type:"remove",data:{accounts:A,useBiometry:!0,useAppleWatch:!1,fallbackPhrase:oA("Enter Account Password"),unlockPhrase:oA("Unlock")}}})}),FK,"Unable to remove the biometry unlock secrets"),fje=async A=>{let j=await j6.withTimeout(browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"Biometry",data:{type:"save",data:{secrets:A}}})}),FK,"Unable to save the biometry unlock secrets");if(j&&j.type==="save")return j.data.results;throw new q.LoggableError({errorClass:p`BiometryNativeMessaging`,message:p`Expected save response type incorrect`})},Fje=async A=>{let j=await j6.withTimeout(browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"Biometry",data:{type:"unlock",data:{accounts:A,useBiometry:!0,useAppleWatch:!1,fallbackPhrase:oA("Enter Account Password"),unlockPhrase:oA("Unlock")}}})}),FK,"Unable to retrieve the biometry unlock secrets");if(j&&j.type==="unlock")return j.data;throw new q.LoggableError({errorClass:p`BiometryNativeMessaging`,message:p`Expected unlock response type incorrect`})},bje=async()=>{let A=await j6.withTimeout(browser.runtime.sendNativeMessage("",{name:"core",data:JSON.stringify({type:"Biometry",data:{type:"biometryAvailability"}})}),FK,"Unable to determine if biometry is available");if(A&&A.type==="biometryAvailability")return A.data;throw new q.LoggableError({errorClass:p`BiometryNativeMessaging`,message:p`Expected biometryAvailability response type incorrect`})};async function yje(A){let j=await new Promise(t=>chrome.tabs.create({url:A},t)),e=await j6.withTimeout(new Promise(t=>{chrome.webRequest.onHeadersReceived.addListener(function r(a){a.statusCode>=300&&a.statusCode<400||(chrome.webRequest.onHeadersReceived.removeListener(r),t(a))},{tabId:j.id,urls:["<all_urls>"]})}),5e3,"No response from tab");return{tab:j,statusCode:e.statusCode}}async function r5A(A){return await jA.getAppleChangePasswordUrl(A.toString())??A.origin}async function $je(A,j){await new Promise(e=>{chrome.tabs.executeScript(A,{allFrames:!1,code:`
          chrome.runtime.onMessage.addListener(function onCheckWellKnown(message, sender, sendResponse) {
            if (message.name !== "check-well-known") return;
            chrome.runtime.onMessage.removeListener(onCheckWellKnown);

            const base = message.data;

            try {
              fetch(new URL("/.well-known/resource-that-should-not-exist-whose-status-code-should-not-be-200", base), {
                mode: "no-cors",
              }).then((result) => {
                const status = result.status;
                sendResponse(status < 200 || status > 299);
              }).catch(() => sendResponse(false));
            } catch {
              sendResponse(false);
            }

            return true;
          });
        `},e)});try{let e=new Promise(t=>chrome.tabs.sendMessage(A,{name:"check-well-known",data:j.origin},t));return await j6.withTimeout(e,1500)}catch{return!1}}async function e0(A){let j=Nl(A.url);if(!j)throw new Error("Unable to parse URL from item");let{tab:e,statusCode:t}=await yje(`${j.origin}/.well-known/change-password`);if(typeof e.id!="number"){console.error("Opened tab was missing id");return}if(t<200||t>299){chrome.tabs.update(e.id,{url:await r5A(j)});return}await $je(e.id,j)||chrome.tabs.update(e.id,{url:await r5A(j)})}var bK=A=>async()=>Promise.reject(new Error(`clients.${A} is only available in service workers.`)),a5A=ka()&&"clients"in globalThis?globalThis.clients:{claim:bK("claim"),get:bK("get"),matchAll:bK("matchAll"),openWindow:bK("openWindow")};var yK=class{cache;canDebug;label;log;constructor(){this.cache={},this.canDebug=!1,this.label="Cache",this.log=new rt(this.label)}cacheValues(){return Object.values(this.cache)}cacheIdsByTab(j){return this.cacheValues().filter(e=>e.tabId===j).map(e=>e.uuid)}cacheIdsByType(j){return this.cacheValues().filter(e=>e.grouping===j).map(e=>e.uuid)}cacheValuesByTab(j){return this.cacheIdsByTab(j).map(e=>this.cache[e])}cacheValuesByGrouping(j){return this.cacheIdsByType(j).map(e=>this.cache[e])}cacheValuesByTabAndGrouping(j,e){return this.cacheValues().filter(t=>t.tabId===j&&t.grouping===e)}debug(j){this.canDebug&&this.log.debug(j)}cacheIds(){return Object.keys(this.cache)}upsertValueToCache(j,e,t,r){let a=r||hb().str;return this.cache[a]={data:t,tabId:j,grouping:e,uuid:a},this.debug(`${r} upserted. Cache ids=${JSON.stringify(this.cacheIds())}`),a}getAllCachedData(j,e){return!j&&!e?this.cacheValues().map(t=>t.data):j&&!e?this.cacheValuesByTab(j).map(t=>t.data):!j&&e?this.cacheValuesByGrouping(e).map(t=>t.data):j&&e?this.cacheValuesByTabAndGrouping(j,e).map(t=>t.data):[]}hasCachedData(j,e){return this.getAllCachedData(j,e).length!==0}hasCachedDataForUuid(j){return!!this.cache[j]}getCachedData(j){let e=this.cache[j];if(e)return e.data}getCachedValue(j){let e=this.cache[j];if(e)return e}removeCachedData(j){let e=!!this.cache[j];delete this.cache[j],e?this.debug(`${j} removed. Cache ids=${JSON.stringify(this.cacheIds())}`):this.debug(`${j} already removed. Cache ids=${JSON.stringify(this.cacheIds())}`)}turnOnDebug(j){this.canDebug=!0,this.log=new rt(j||this.label)}turnOffDebug(){this.canDebug=!1}};var n5A={"inline-menu":!0,"passkey-save-prompt":!0,"passkey-signin-prompt":!0,"watchtower-breach":!0};var $K,kh=()=>$K||($K=new ioA(n5A),$K);var ioA=class{pendingPortRequests;activePorts;supportedPorts;debug=!1;log;constructor(j){this.activePorts=new wK,this.pendingPortRequests=new wK,this.supportedPorts=j,this.log=new rt("PortManager"),this.debug&&(this.activePorts.turnOnDebug("PortManager: PortCache"),this.pendingPortRequests.turnOnDebug("PortManager: PendingCache")),chrome.runtime.onConnect.addListener(this.onConnect.bind(this))}onConnect=async j=>{let e=this.parsePort(j);if(!e){this.log.debug(`${j.name} connection is not formatted for support - ignoring`);return}let{portType:t,tabId:r,portId:a,params:n}=e;if(await this.closeUnhealthyPorts(r,t),n.reconnectId){let k=this.activePorts.getPort(n.reconnectId);if(k){this.log.debug(`${j.name} replacing port ${t.str}/${n.reconnectId.str}`),k.port.replace(j,a),this.activePorts.removePort(n.reconnectId),this.activePorts.upsertPort(r,t,k,a);return}}let o=this.createWrappedPort(j,a,t,n.reconnect);this.log.info(`${j.name} opened from peer but not yet tracked - ${this.oIds(r)}`);let i=this.pendingPortRequests.getPendingRequest(r,t,n),s=`${t.str}/${a.str}`;if(!i){let k={port:o,state:"Open",id:a,params:n};this.activePorts.upsertPort(r,t,k,a),this.log.info(`${s} nobody waiting in background - ${this.pIds(r)}`),this.log.info(`${s} added to open - ${this.oIds(r)}`);return}this.log.info(`${t.str}/${i.id.str} waiting in background - ${this.pIds(r)}`);let l={port:o,state:"Connected",id:a,params:n};this.activePorts.upsertPort(r,t,l,a),this.log.info(`${s} added to connected - ${this.cIds(r)}`),this.pendingPortRequests.removePort(i.id),i.resolve(o);let c=`${s} resolved pending ${i.id.str}`;this.log.info(`${c} - ${this.cIds(r)}`)};createWrappedPort=(j,e,t,r)=>new soA({browserPort:j,id:e,name:t,reconnect:!!r,onDisconnect:a=>{this.activePorts.removePort(a)},onLost:a=>{let n=this.activePorts.getPortRow(a);if(!n){this.log.debug("Port lost when it's not tracked - skipping recovery setup");return}if(n.data.state==="Open"){this.log.debug("Port lost before background ever connected - prefer closing over recovery"),n.data.port.close();return}n.data.state="Recoverable",this.activePorts.upsertPort(n.tabId,t,n.data,a)}});sendMessage=async(j,e,t)=>{await this.closeUnhealthyPorts(j,e);let r=this.activePorts.getOpenPort(j,e);if(!r){this.log.error(`No port with given tab and type - ${this.oIds(j)}`);return}r.port.postMessage(t)};parsePort=j=>{let e=j.name.split("/");if(e.length!==2){this.log.debug(`${j.name} A port connection with an unformatted name was opened - ignoring`);return}let[t,r]=e,a=t;if(!this.supportedPorts[a]){this.log.debug(`${j.name} A port connection was opened with an unsupported name - ignoring`);return}let n=aj.assertLogSafe(a);if(r.length===0){this.log.debug(`${j.name} A port connection was opened with an incorrect id & query param format - ignoring`);return}let[o,i]=r.split("?");if(o.length===0){this.log.debug(`${j.name} A port connection was opened without a valid port id - ignoring`);return}let s=aj.assertLogSafe(o),l={};if(i){let c=new URLSearchParams(i),k=c.get("reqId")??void 0;l.reqId=k?aj.assertLogSafe(k):void 0;let u=c.get("reconnect");l.reconnect=u==="true";let m=c.get("reconnectId")??void 0;l.reconnectId=m?aj.assertLogSafe(m):void 0}if(!j.sender?.tab?.id){this.log.error("A port connection was opened without a tab id - ignoring");return}return{portType:n,tabId:j.sender.tab.id,portId:s,params:l}};oIds=j=>"open="+JSON.stringify(this.activePorts.getFilteredPortIds(j,"Open"));cIds=j=>"connected="+JSON.stringify(this.activePorts.getFilteredPortIds(j,"Connected"));pIds=j=>"pending="+JSON.stringify(this.pendingPortRequests.getFilteredPortIds(j,"Requesting"));activeIds=()=>"active="+JSON.stringify(this.activePorts.getAllPortIds());wasPortConnected=(j,e)=>!!this.activePorts.getConnectedPort(e,j);getPort=async(j,e,t,r={})=>{if(!this.supportedPorts[j.str])throw new Error(`${j.str} is not registered, update PortManager constructor`);r?.reqId||await this.closeUnhealthyPorts(e,j);let a=this.activePorts.getOpenPort(e,j,r);if(a){let l=`${j.str}/${a.id.str}`;return this.log.debug(`${l} background requested an open port - ${this.oIds(e)}`),a.state="Connected",this.activePorts.upsertPort(e,j,a,a.id),this.log.debug(`${l} upserted port as connected - ${this.cIds(e)}`),Promise.resolve(a.port)}let n=hb(),o=`${j.str}/${n.str}`;this.log.debug(`${o} background requested an inactive port - ${this.pIds(e)}`);let i=new Promise(l=>{this.log.debug(`${o} creating pending request to be resolved later`);let c={resolve:l,id:n,params:r,state:"Requesting"};this.pendingPortRequests.upsertPort(e,j,c,n)}),s=hs(t).then(()=>{throw this.log.debug(`${o} hit getPort timeout - will remove from ${this.pIds(e)}`),this.pendingPortRequests.removePort(n),new Error("unavailable")});return Promise.race([i,s])};broadcast=j=>{let{type:e}=j;this.log.info(`${e} broadcasting across all ${this.activeIds()}`),this.activePorts.getAllPorts().forEach(t=>{t.port.postMessage(j)})};closeUnhealthyPorts=async(j,e)=>{let a=this.activePorts.getAllPorts(j,e).map(async n=>n.port.closeIfUnhealthy(100,!0));await Promise.all(a)}},soA=class{port;id;name;logPrefix;reconnect;messages;notifyDisconnect;notifyManagerOfLostPeer;disconnectPromise;disconnectResolver;pendingMessageResolver;pendingMessage;healthCheckCompleter;healthCheckId;constructor({browserPort:j,id:e,onDisconnect:t,onLost:r,name:a,reconnect:n}){this.setConfig(j,e,a,n),this.addPortListeners(),this.notifyDisconnect=t,this.notifyManagerOfLostPeer=r,this.disconnectPromise=new Promise(o=>{this.disconnectResolver=o}),this.messages=[],this.pendingMessage=null,this.pendingMessageResolver=null,this.setHealthCheckToDefaults()}setConfig=(j,e,t,r)=>{this.port=j,this.id=e,this.name=t,this.logPrefix=`PortManager: ${t.str}/${e.str}`,this.reconnect=r};addPortListeners=()=>{this.port.onMessage.addListener(this.onMessage.bind(this)),this.port.onDisconnect.addListener(this.peerDisconnect.bind(this))};removePortListeners=()=>{this.port.onMessage.removeListener(this.onMessage),this.port.onDisconnect.removeListener(this.peerDisconnect)};setHealthCheckToDefaults=()=>{this.healthCheckCompleter=null,this.healthCheckId=null};closeIfUnhealthy=async(j,e=!1)=>{if(this.healthCheckCompleter!==null){`${this.logPrefix}`,await this.healthCheckCompleter.promise;return}this.healthCheckCompleter=Kl(),this.healthCheckId=hb();try{let r={type:"pm-health-check-request",data:{id:this.healthCheckId.str}};this.port.postMessage(r)}catch{`${this.logPrefix}`;return}let t=await Promise.race([this.healthCheckCompleter.promise,hs(j)]);if(t.type==="timeout"){this.healthCheckCompleter.resolve(t);let r="did not receive health check response - closing port";console.warn(`${this.logPrefix} ${r}`),this.onDisconnect(!0,r);return}if(t.data.windowClosed!==!1){let r="sender window has been closed - closing port";console.warn(`${this.logPrefix} ${r}`),this.onDisconnect(!1,r);return}e&&`${this.logPrefix}`,this.healthCheckCompleter=null,this.healthCheckId=null};handleHealthCheckResponse=j=>{if(this.healthCheckId===null||this.healthCheckCompleter===null){console.error(`${this.logPrefix} received health check response when no request is in flight - ignoring`);return}if(j.data.id!==this.healthCheckId.str){console.warn(`${this.logPrefix} received health check response for stale request - ignoring`);return}this.healthCheckCompleter.resolve(j)};onMessage=j=>{if(`${this.logPrefix}${j.type}`,j.type==="pm-health-check-response"){this.handleHealthCheckResponse(j);return}if(this.pendingMessageResolver!==null){this.pendingMessageResolver(j),this.pendingMessageResolver=null,this.pendingMessage=null;return}this.messages.push(j)};postMessage=j=>{try{this.port.postMessage(j),`${this.logPrefix}${j.type}`}catch{console.warn(`${this.logPrefix} failed to send: ${j.type}`)}};raceDisconnect=async(j,e)=>{if(j.length===0&&(typeof e!="number"||e<0))throw new Error("raceDisconnect must include a known ending - include a positive timeout");let t,r,a;if(ve()){let o=()=>{this.closeIfUnhealthy(50)};o(),r=setInterval(o,50)}try{t=await Promise.race([this.getResolvingDisconnect(),hs(e),...j])}catch(n){a=n}if(r&&clearInterval(r),a)throw a;return t};getResolvingDisconnect=async()=>new Promise(j=>{this.disconnectPromise.then(e=>{j({type:"disconnected",data:{error:e}})})});readMessage=async()=>{if(this.messages.length>0){let j=this.messages[0];return this.messages.shift(),Promise.resolve(j)}if(this.pendingMessageResolver!==null)throw new Error("out of bounds");return this.pendingMessage=new Promise(j=>{this.pendingMessageResolver=j}),this.pendingMessage};readUntil=async j=>{for(;;){let e=await this.readMessage();if(j.some(t=>t===e.type))return e}};sendErrorAndClose=j=>{this.port.postMessage({type:"error",data:{loggableReason:j}}),this.close(j)};close=j=>{j?console.error(`${this.logPrefix} closed by background with error "${j}"`):`${this.logPrefix}`,this.onDisconnect(!1,j)};replace=(j,e)=>{this.setConfig(j,e,this.name,this.reconnect),this.addPortListeners(),this.setHealthCheckToDefaults()};peerDisconnect=()=>{let j=chrome.runtime.lastError?.message;j?console.error(`${this.logPrefix} closed by browser with error "${j}"`):`${this.logPrefix}`;let e=!!j;this.onDisconnect(e,j)};onDisconnect=(j,e)=>{if(this.reconnect&&j){this.notifyManagerOfLostPeer?.(this.id),`${this.logPrefix}`;return}this.removePortListeners();try{this.port.disconnect()}catch{}this.disconnectResolver(e),this.notifyDisconnect&&(this.notifyDisconnect(this.id),this.notifyDisconnect=void 0)}},wK=class extends yK{constructor(){super()}upsertPort(j,e,t,r){return super.upsertValueToCache(j,e.str,t,r?.str)}getAllPortIds(){return super.cacheIds()}getFilteredPortIds(j,e){return super.getAllCachedData(j).filter(r=>r.state===e).map(r=>r.id)}getAllPorts(j,e){return super.getAllCachedData(j,e?.str)}findRecord(j,e,t,r){return super.getAllCachedData(j,e.str).filter(n=>n.state===t).find(n=>r?.reqId?r.reqId.str===n.params.reqId?.str:typeof n.params?.reqId>"u")}getPendingRequest(j,e,t){return this.findRecord(j,e,"Requesting",t)}getOpenPort(j,e,t){return this.findRecord(j,e,"Open",t)}getConnectedPort(j,e,t){return this.findRecord(j,e,"Connected",t)}getPort(j){return super.getCachedData(j.str)}getPortRow(j){return super.getCachedValue(j.str)}removePort(j){return super.removeCachedData(j.str)}turnOnDebug(j){super.turnOnDebug(j)}};async function loA(A,j){return!1}async function r7(A,j=!1,e){if(await loA(A,j))return!0;if(e){let r={type:"targeted-inline-message",data:{message:{name:"copy-to-clipboard-in-content-script",data:{textToCopy:A}}}};return kh().sendMessage(e.id,aj.assertLogSafe("inline-menu"),r).then(()=>!0).catch(()=>(console.error("Could not send copy event to inline menu over port"),!1))}return(await lj("copy-to-clipboard-in-content-script",{textToCopy:A})).ok}var doA=J(Dd());function i5A(A,j){try{let e=l5A(j);e&&s5A(e,A)}catch(e){Ze(e)?console.error("Unable to parse open and fill details:",e):console.error("Unable to parse open and fill details")}}async function s5A(A,j){if(H.allAccountHandlersAreLocked){console.warn("Asked to open and fill but nobody's unlocked");return}let e=A.itemUuid;if(A.uuidIsEncrypted){let o=Date.now(),i=await wje(e,o);if(i)e=i,Ije();else{console.error(`Unable to decrypt item uuid ${A.itemUuid} for open and fill.`);return}}let t=await Br(e);if(!t){console.error(`Unable to load item uuid ${e} for open and fill.`);return}let r=t.overview.URLs&&t.overview.URLs.length>0;if(!(t.overview.url||r)){console.error(`Item uuid ${e} is not eligible for open and fill.`);return}let n=await L6(j);if(!n){console.error("Unable to load tab for open and fill.");return}await No(n,t,"OPEN_AND_FILL")}function l5A(A){try{let j=new URL(A),e=o5A(j,0),t=!0;if(e||(e=o5A(j,1),t=!1),!e)return;if(!t&&Pje()){console.error("Open and fill URL contains unencrypted UUID, but the 'ratchet' flag has been set.");return}return{itemUuid:e,uuidIsEncrypted:t,url:j.href}}catch{return}}function o5A(A,j){let r=j===0?72:26,[,a]=Array.from(A.searchParams.entries()).find(([n,o])=>typeof n=="string"&&n.length===26&&typeof o=="string"&&o.length===r)??[];return a}async function wje(A,j){let e=ej(A),t=H.getAccountHandlers.filter(a=>a.isUnlocked),r;for(let a of t){let n=a.masterKey;if(!n||!(n instanceof rr))continue;let o=await S6.UrlAutofillParentKey.fromAuk(n),i=await o.deriveSessionKey(j);try{r=await i.decrypt(e),r||(i=await o.deriveSessionKey(j-10*1e3),r=await i.decrypt(e))}catch(s){if(s instanceof Error){""+s.message;continue}}if(r)break}return r}var c5A="b5x-encrypted-uuid-autofill-ratchet";function Ije(){vj.setItem(c5A,"Y")}function Pje(){return ZA.anyAccountHasFlag("core-securityDevelopment-openAndFill-enforcement")&&vj.getItem(c5A)==="Y"}async function d5A(){let A=await st();if(!A){console.info("Failed to get active tab when checking for an open and fill tab");return}if(!A.unparsedUrl||!A.id)return;let j=l5A(A.unparsedUrl);j&&await s5A(j,A.id)}async function k5A(A){let j=await st(),e=await browser.tabs.create({url:$c(A)});return coA(j?.unparsedUrl)&&j?.id&&browser.tabs.remove(j.id),e}var t8=async(A,j)=>{let e=await Yb(A);(await Promise.all(e.map(async r=>lj("sign-in-with-click-provider-button",j,{tabId:A,frameId:r.frameId})))).some(r=>r.ok&&r.data)&&globalThis.dispatchEvent(new CustomEvent(OO,{detail:{tabId:A,provider:j}}))},E5A=async(A,j,e,t)=>{await jA.startFillSession(A,{type:"trelica",data:j},{signInWithProviderItem:{item:e?jA.itemToReference(e):void 0,provider:t}}),await t8(A.id,t)};var Dje=[TO,CO,DO];async function gv(A,j,e){let t=await st();if(!t)throw new Error("Unable to find active tab");return No(t,A,j,e)}async function No(A,j,e,t){if(j.overview.b5AccountUUID){let a=si(j)?m5A(j.uuid):B5A(j.uuid,j.vault.uuid);IK(a,e==="LAUNCHER_SEARCH"?Mh.Launcher:Mh.Autofill,j.overview.b5AccountUUID)}if(typeof A.id=="number"&&await g5A(A,j))return Promise.resolve();let r=await jA.startFillSession(A,{type:"item",data:j},t);switch(r.type){case"autofill":return r8(A,j,e,t);case"sign-in-with-provider":{let{provider:a}=r.data;return _je(A,j,a,e)}default:return console.error(`Started fill session in state \`${r.type}\`, an invalid state.`),jA.clearFillSession(A.id)}}var Tje=A=>{if(!ZA.anyAccountHasFlag("b5x-sie-sign-in-urls")||!WA().advancedSignInUrls)return A.url;if(A.url)try{return jA.getSignInUrl(A.url)??A.url}catch{return console.warn("Failed to get sign-in URL for Item from core."),A.url}};async function uh(A,j={},e,t){let r=j.url??Tje(A);if(!r)throw new q.LoggableError({errorClass:p`OpenAndFillItem`,message:p`No url was provided on the item or directly.`});let a=typeof j?.tabId!="number"?await k5A(r):await browser.tabs.update(j.tabId,{url:r});if(a.id===void 0)throw new q.LoggableError({errorClass:p`OpenAndFillItem`,message:p`Tab ID is undefined.`});let n=Om(a.id,r);return No(n,A,t||"OPEN_AND_FILL",e)}function Cje(A){let{autoSubmitLogins:j}=WA();return j?A.overview.autosubmit!=="never":!1}async function r8(A,j,e,t){let r=await Cr(A),n=await(async()=>{if(t?.designationFilter){let{fillPayload:c}=await jA.fillItem(j,r,t);return{fillPayload:c,complete:!0}}else return jA.nextFill(j,r,A,{...t,postFill:t?.postFill??{type:"contextual",content:{autosubmitEnabled:Cje(j)}}})})(),o=!1,i;try{i=(await y6().effectivePolicies()).find(c=>c.policy.policyName==="autofill-confirmation")?.policy.definition}catch(c){console.error("Could not get effective policies",c)}let s=()=>{let c=A.URL(),{requireFillSensitivePrompt:k,requireFillCreditCardPrompt:u,requireFillLoginPrompt:m}=WA();i?.enabled&&(k=k||i.identityItems,u=u||i.creditCardItems,m=m||i.loginItems);let F=Dje.some(y=>y===j.templateUuid),S=j.templateUuid===ea&&u,G=j.templateUuid===Je&&m,x;if(S)x=3;else if(G)x=1;else if(k||F)x=2;else return;let P=!(c&&Bm(c.hostname));if(n.fillPayload.frames.some(y=>y.allowedTargets.type==="Anywhere")&&P||x===1)return x},l=Sje(r,n.fillPayload);if(l.isErr()){console.error(`Could not check for authorized protocol for frame ${l.error}`);return}if(l.value.requiresAuthorization){let{authorized:c}=await Bv(A,5);if(c)o=!0;else throw new Error("User did not authorize to fill.")}else if(t?.requireAuthorization){let c=s();if(c){let{authorized:k}=await Bv(A,c);if(!k)throw new Error("User did not authorize to fill.")}}lj("autofill-perform-fill",{nextFill:n,authorizedUnsafeHttp:o},{tabId:A.id}),t?.skipItemUsage||Al(j,aA.ItemUsageAction.Fill),e&&j.templateUuid&&j.overview.b5AccountUUID&&ft("ItemAutofill",{template_uuid:doA.TelemetryString.assertSafeForTelemetry(j.templateUuid),status:"REQUEST",fill_method:e,is_default:await p5A(j),fields_filled:n.fillPayload.filledDesignations.filter(c=>Mje(c))},j.overview.b5AccountUUID),globalThis.dispatchEvent(new CustomEvent(f7,{detail:{tabId:A.id,item:j,fillPayload:n.fillPayload,complete:n.complete}}))}var _je=async(A,j,e,t)=>{Al(j,aA.ItemUsageAction.SelectSsoProvider),j.templateUuid&&j.overview.b5AccountUUID&&(Cc(j.overview.b5AccountUUID,NA.UsoTelemetryActions.Filled),t&&ft("ItemAutofill",{template_uuid:doA.TelemetryString.assertSafeForTelemetry(j.templateUuid),status:"REQUEST",fill_method:t,social_login_type:e,is_default:await p5A(j)},j.overview.b5AccountUUID)),await t8(A.id,e)};function Sje(A,j){for(let e of j.frames){let t=A.frames.find(a=>a.uuid===e.uuid);if(!t)return OA(e?.uuid);if(!t.origin||t.origin.type==="appId")continue;let r=!1;try{if(t.origin?.type==="url")r=new URL(t.origin.content.origin).protocol==="https:";else continue}catch{continue}if(!(r||e.allowUnsafeHttp))return Pj({requiresAuthorization:!0})}return Pj({requiresAuthorization:!1})}async function t0(A,j,e,t,r){let a=await jA.fill(e,j,r);return lj("autofill-perform-fill",{nextFill:{fillPayload:a.fillPayload,complete:!0},authorizedUnsafeHttp:t},{tabId:A.id})}var Hje=["ssh-key-title","ssh-key","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","one-time-code","organization","street-address","address-line1","address-line2","address-line3","address-level1","address-level2","address-level3","address-level4","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp","crypto-address","crypto-recovery-seed","recovery-code"];function Mje(A){return Hje.includes(A)}async function p5A(A){let j=await H.getPersonItemsForAccounts();return Gb(A,j)}async function koA(A){if(A.forceOpenNewTab)return;let{appLauncherLaunchAppsInNewTab:j}=WA();return j?void 0:await st()}async function Kje(A){let j=await zj.loadItemCache();if(!j){console.error("Must unlock before we can find the sign in with provider item.");return}let t=(await Promise.all(j.fillableItems(o=>o.urlToNakedDomains?Object.values(o.urlToNakedDomains).some(i=>i==="google.com"):!1).map(E6))).filter(o=>!!o);if(A)return t.find(o=>o.username?.value&&A.toLowerCase()===o.username.value.toLowerCase());let a=H.getAccountHandlers.filter(o=>o.serveraccount.type==="B").map(o=>o.serveraccount.email.toLowerCase()),n=t.find(o=>o.username?.value&&a.includes(o.username.value.toLowerCase()));if(n)return n;if(t.length===1)return t[0]}async function Nje(A){if(!A.providers?.some(r=>r.name?.toLowerCase()==="google"))return!1;let e=A.links.application;if(!e)return console.error("Could not find an application URL for the app."),!0;let t=await hv(await koA(A),e);return t?.id?(await E5A(Om(t.id,e),A.id,await Kje(A.signOnEmail),an.Google),!0):(console.error("Failed to create tab with valid ID."),!0)}async function PK(A,j){let e=q5A(A.id);if(IK(e,j,A.accountUuid),await Nje(A))return;if(!A.signOnUrl){let o=A.links.application??A.links.homePage;if(!o){console.error("Catalog app is missing launch URL.");return}await hv(await koA(A),o);return}let r=await hv(await koA(A),A.signOnUrl);if(!r?.id){console.error("Could not create catalog app tab context.");return}let a=A.links.application??A.links.homePage;a?await jA.signInWithEvent({tabId:r.id,event:{type:"initialize",data:{tabId:r.id,tabUrl:a,redirectUrl:A.signOnUrl}}}).catch(()=>{console.error("[Sign in with] Failed to initialize Sign in with session with catalog app.")}):console.warn("Catalog app does not contain a valid application URL.");let n=await Lje(A.signOnUrl,A.signOnEmail);n&&await No(Om(r.id,A.signOnUrl),n,"OPEN_AND_FILL")}async function Lje(A,j){let e=await zj.loadItemCache();if(!e){console.error("Must unlock before we can find the uso provider item.");return}let t;try{t=jA.nakedDomainForUrl(A)}catch{console.error("Failed to convert signOnUrl to naked domain.");return}let r=await Promise.all(e.fillableItems(a=>a.urlToNakedDomains?Object.values(a.urlToNakedDomains).some(n=>n===t):!1));if(j){let a=j.toLowerCase();return(await Promise.all(r.map(E6))).filter(o=>!!o).find(o=>o.username?.value===a)}else return r[0]}async function OK(A){let j=zj.itemCache?.accountForVaultID(a6(A.vault));if(!j)throw new Error("Unable to find account by vault localId");let e=await SA.getDatabase().findAccountByUUID(j.uuid);return e?jA.generateSharableItemLink({accountUuid:j.uuid,itemUuid:A.uuid,vaultUuid:A.vault.uuid,host:e.signinAddress}):Promise.reject(new Error("Unable to generate sharable item link. Account with the given UUID could not be found."))}async function qn(A,j,e,t={name:"suggested-item",data:void 0}){try{Ev(A.id)}catch{}let r=await jl(j);if(!r){console.error(`Unable to load template with UUID ${j} when attempting to open the save dialog.`);return}let{showRichIcons:a,language:n}=WA(),o=await DK(A,j);return await jA.saveManagerCreate(A,!1,r,o,e,t,a,n).catch(i=>console.error("Failed to start save session",i)),n7(A.id,{name:"save-dialog"})}async function x5A(A,j,e={name:"suggested-item",data:void 0}){let t=await jl(A);if(!t){console.error(`Unable to load template with UUID ${A} in showSavePromptInNewTab`);return}return v5A("save-dialog",async r=>{let{showRichIcons:a,language:n}=WA();await jA.saveManagerCreate(r,!0,t,void 0,j,e,a,n).catch(o=>console.error("Failed to start save session",o))})}async function RK(A){if(Lt())return;let j=await st();j?.isHttpOrHttps()&&await qn(j,A,{name:"collected-page-details",data:{collectedPageDetails:await Cr(j)}})}async function Nd(A,j,e){let t=H.findAccountHandlerByUuid(A);if(t)return t.getIntegrationProviderAccessToken(j,e)}function TK(A,j,e){H.findAccountHandlerByUuid(A)?.removeProviderAccessToken(j,e)}async function CK(A){let j=H.findAccountHandlerByUuid(A);if(!j)return[];if(!j.isLocked&&!j.mustMigrateAuth)try{let e=await j.loadSystemVaultItems();return $m("fastmail",e)}catch(e){Ze(e)&&rj(e)}return[]}async function qv(){for(let A of H.getAccountHandlers){if(A.isLocked)continue;let j;if(!A.mustMigrateAuth)try{let e=await A.loadSystemVaultItems();j=$m("fastmail",e)}catch(e){Ze(e)&&rj(e)}if(j&&j.length>0)return!0}return!1}async function G5A(A,j,e,t){let r=await Nd(A,e,"fastmail");if(!r)throw new Error("Could not obtain Fastmail access token.");return jA.updateEmailAlias(r.accessToken,j,t)}async function f5A(A,j,e){let t=await Nd(A,e,"fastmail");if(!t)throw new Error("Could not obtain Fastmail access token.");return jA.getEmailAliasState(t.accessToken,j)}async function F5A(A){let j=Uje(A),e=await jA.analyzePage(j,!1,[]),t=e.designations.fields.every(a=>a.autofillType===wj.Email||a.autofillType===wj.Username),r=e.resolvedPage.frames.some(a=>a.forms.some(n=>n.designation===zc.ChangeEmail));return t||r}function Uje(A){let j=A.frames.find(r=>r.fields.some(a=>a.isActive===!0&&a.formOpid!==null));if(!j)return A;let e=j.fields.find(r=>r.isActive===!0&&r.formOpid!==null);if(!e||!e.formOpid)return A;let t={...j,forms:j.forms.filter(r=>r.opid===e?.formOpid)||[],fields:j.fields.filter(r=>r.formOpid===e?.formOpid)};return{...A,frames:[t]}}async function b5A(A,j){let e=await jA.getOauthAccessToken({url:"https://api.fastmail.com/oauth/refresh",client_id:"35c941ae",grant_type:"refresh_token",refresh_token:j});return e.type==="Error"?(console.error("Could not generate new access token."),OA({type:"RequestError"})):Pj({refreshToken:j,accessToken:e.content.accessToken,expiresIn:e.content.expiresIn,context:void 0})}async function DK(A,j){if(j==="001"&&await qv())return(await jA.getEmailAliasSessionStatus(A.id,A.unparsedUrl))?.alias}async function y5A(A,j){try{return(await CK(A)).some(t=>t.accountId===j.fastmailAccountId)}catch(e){return rj(new q.LoggableError({errorClass:p`SaveDialogGetSaveAccountsAndVaultsFor`,message:p`Could not get fastmail credentials for account.`,userUuid:aj.assertLogSafe(A),stackOverrideError:e instanceof Error?e:void 0})),j.accountUuid===A}}async function _m(A,j,e,t){let r=await jA.getEmailAliasSessionStatus(A,j);if(!r){if(t)return t();throw new Error("There is no current Masked Email session")}let a=(await Nd(r.accountUuid,r.fastmailAccountId,"fastmail"))?.accessToken;if(!a){if(t)return t();throw new Error("Could not get Fastmail access token.")}try{return await e(a,r)}catch(n){throw TK(r.accountUuid,r.fastmailAccountId,"fastmail"),n}}async function $5A(A){await _c,await qv()&&_m(A,void 0,async j=>jA.endEmailAliasSession(A,j),async()=>jA.endEmailAliasSession(A))}var _K;async function w5A(A,j){await qv()&&(_K&&await _K,_K=(async()=>{try{let e=await jA.getEmailAliasSessionStatus(A);if(!e)return;(jA.nakedDomainForUrl(j)!==e.nakedDomain||!e.enabled)&&await _m(A,void 0,async r=>jA.endEmailAliasSession(A,r),async()=>jA.endEmailAliasSession(A))}finally{_K=void 0}})())}async function SK(A,j){if(j.templateUuid==="001"&&await qv()){try{let e=await jA.getEmailAliasSessionStatus(A.id,A.unparsedUrl);if(!e?.alias||e.alias?.type!=="Fastmail")return;let t=await OK(j);await _m(A.id,A.unparsedUrl,async(r,a)=>{!a?.alias||a.alias?.type!=="Fastmail"||await jA.updateEmailAlias(r,a.alias.content.alias_id,{url:t})})}catch{console.error(`Could not set the url property on the email alias for item ${j.uuid}`)}try{await _m(A.id,A.unparsedUrl,async e=>jA.endEmailAliasSession(A.id,e),async()=>jA.endEmailAliasSession(A.id))}catch{}}}async function I5A(A){if(!A.details||!A.details.sections)return{};let j={};for(let e of A.details.sections)if(e.fields)for(let t of e.fields){if(t.k!=="email"||!t.a)continue;let r=t.a.provider;if(!(!r||r.type!=="fastmail")){if(!r.data.aliasId||!r.data.accountId){console.error("Provider data is malformed.");continue}try{let a=await f5A(OE(A),r.data.aliasId,r.data.accountId);a&&(j[r.data.aliasId]=a)}catch{continue}}}return j}async function n8(A,j){let e=await Cr(A),t=e.frames.reduce((a,n)=>(n.origin?.type==="url"&&a.push({type:"Url",data:n.origin.content.origin}),a),[{type:"Url",data:A.unparsedUrl}]);await t0(A,e,{fillTargets:t,fields:[{designation:wj.Username,value:j,label:"email address",htmlId:"",htmlName:"",fieldTypes:[],checked:!1,restricted:!1}]},!1,{postFill:{type:"focusNextField"}});let r=await F5A(e);return r&&await qn(A,Je,{name:"collected-page-details",data:{collectedPageDetails:e}}),r}async function P5A(){let A=await o8();if(A.isOk())return A.value;Vr({id:"scan-qr-toast-element",message:oA("No QR code found for 2FA"),behavior:Ir.Ephemeral,primary:{id:"scan-qr-toast-element-open-support-article",value:{type:"text",content:oA("Learn More\u2026")},action:{type:"OpenLink",content:"https://support.1password.com/one-time-passwords/"}}})}async function HK(A){let j=await P5A();if(j){try{await Vje(A.uuid,j)}catch{if(await Ft.connectivityStatus()!=="online"){Mo();return}Vr({id:"scan-qr-toast-element",message:oA("Unable to add one-time password field to item"),behavior:Ir.Ephemeral});return}try{let e=await jA.generateOneTimePasswordFromUrl(j);await r7(e)}catch{Vr({id:"scan-qr-toast-element",message:oA("Unable to generate and copy one-time password"),behavior:Ir.Ephemeral});return}Vr({id:"scan-qr-toast-element",message:oA("Copied one-time password"),behavior:Ir.Ephemeral})}}async function Vje(A,j){let e=await Br(A);if(!e)throw new Error("Could not load item");let t=!1;return e.details.sections||(e.details.sections=[]),e.details.sections.push({title:oA("Security"),fields:[{k:"concealed",n:"TOTP_"+q.generateUUID(),v:j,t:oA("one-time password")}],name:"Section_"+q.generateUUID()}),Da(e,t)}async function O5A(){return $6(),P5A()}var Xje=["Edit","Favorite","Archive","Delete","Restore","Move","Share","ScanQrTotpCode"];function Jje(A){return Xje.includes(A)}async function D5A(A){if(Jje(A.action.type)&&await Ft.connectivityStatus()!=="online"){Mo();return}let j=eHA(await Promise.all(A.itemIds.map(async t=>Sc(t))));if(!j.isOk()){console.error("Unable to load one or more items while handling item action");return}let e=j.value.map(t=>t.cacheInformation===void 0?t:void 0).filter(t=>!!t);switch(A.action.type){case"Autosubmit":return Wje(j.value);case"Favorite":return Qje(e);case"CopyLink":return Yje(e);case"CopyJson":return Zje(j.value);case"CopyUuid":return Aee(e);case"Archive":return jee(A,A.action,e);case"Delete":return eee(A,A.action,e);case"Edit":return tee(j.value);case"Autofill":return ree(j.value);case"OpenAndFill":return aee(e);case"OpenUrl":return nee(e);case"ScanQrTotpCode":return oee(e);case"OpenInNewWindow":return R5A(j.value);case"OpenInNewWindowFromQX":return R5A(e);case"ChangePassword":return see(e);case"Share":return lee(e);case"OpenInWeb":return iee(e);case"RestoreRecentlyDeleted":case"Move":case"MoveToVault":case"Tag":case"Restore":case"Print":case"Select":case"Open":case"CopyField":case"CopyFieldFromQX":case"SharingDetails":case"Purge":case"CommitSigning":case"ToggleAppleWatch":case"OpenAgentConfigFile":case"ExpandSnippet":case"ViewItemUsageReport":case"ConnectToSshHost":return;default:te(A.action)}}var EoA=A=>A.overview.autosubmit!=="never";async function Wje(A){let j=A.every(r=>EoA(r));try{await Promise.all(A.map(async r=>(r.overview.autosubmit=j?"never":void 0,Da(r,!1))))}catch(r){if(console.error("Failed to handleAutosubmit",r),await Ft.connectivityStatus()!=="online"){Mo();return}Vr({id:"autosubmit-items-toast-element",message:oA("An error occurred. Please try again."),behavior:Ir.Ephemeral});return}let e=A.length>1?oA("Disabled sign in automatically on {count} items",{count:A.length}):oA("Disabled sign in automatically on \u201C{title}\u201D",{title:A[0].title}),t=A.length>1?oA("Enabled sign in automatically on {count} items",{count:A.length}):oA("Enabled sign in automatically on \u201C{title}\u201D",{title:A[0].title});Vr({id:"autosubmit-items-toast-element",message:j?e:t,behavior:Ir.Ephemeral})}async function Qje(A){let j=A.every(r=>r.faveIndex!==0);try{await Promise.all(A.map(async r=>{await C5A(r.uuid,!j)}))}catch(r){if(console.error("Failed to handleFavoriteAction",r),await Ft.connectivityStatus()!=="online"){Mo();return}Vr({id:"favorite-items-toast-element",message:oA("An error occurred. Please try again."),behavior:Ir.Ephemeral});return}let e=A.length>1?oA("{count} Items removed from favorites",{count:A.length}):oA("Removed \u201C{title}\u201D from favorites",{title:A[0].title}),t=A.length>1?oA("{count} Items favorited",{count:A.length}):oA("Favorited \u201C{title}\u201D",{title:A[0].title});Vr({id:"favorite-items-toast-element",message:j?e:t,behavior:Ir.Ephemeral})}async function Yje(A,j){if(A.length===0)return;let e=await OK(A[0]);r7(e,void 0,j),Vr({id:"copy-item-link-element",message:oA("Copied item link"),behavior:Ir.Ephemeral})}function Zje(A){if(A.length===0)return;let j=A[0];r7(j.exportToJson()),Al(j,aA.ItemUsageAction.SecureCopy),Vr({id:"copy-item-link-element",message:oA("Copied item JSON"),behavior:Ir.Ephemeral})}function Aee(A){if(A.length===0)return;let j=A[0];r7(j.uuid),Vr({id:"copy-item-uuid-element",message:oA("Copied item UUID"),behavior:Ir.Ephemeral})}async function jee(A,j,e){if(e.length===0)return;if(j.content.confirmed){try{await Promise.all(e.map(async a=>{await _5A(a.uuid)}))}catch(a){if(console.error("Failed to handleArchiveItem",a),await Ft.connectivityStatus()!=="online"){Mo();return}Vr({id:"archive-item-toast-element",message:oA("An error occurred. Please try again."),behavior:Ir.Ephemeral});return}Vr({id:"archive-item-toast-element",message:e.length>1?oA("{count} Items archived",{count:e.length}):oA("Archived \u201C{title}\u201D",{title:e[0].title}),behavior:Ir.Ephemeral});return}let r={id:"archive-item-alert",title:e.length>1?oA("Archive {count} items?",{count:e.length}):oA("Are you sure you want to archive \u201C{itemName}\u201D?",{itemName:e[0].title}),text:oA("Archived items won\u2019t show up in filling suggestions for websites or in apps."),primaryAction:{id:"archive-action-id",label:oA("Archive"),destructive:!1,action:{type:"ItemAction",content:{itemIds:A.itemIds.map(a=>JSON.stringify(a)),collectionUuid:"",action:{type:"Archive",content:{confirmed:!0,skipAlert:!1}}}}},cancelAction:oA("Cancel")};xs(r)}async function eee(A,j,e){if(e.length!==0)if(j.content.confirmed){try{await Promise.all(e.map(async t=>{await KK(t.uuid)}))}catch(t){if(console.error("Failed to handleDeleteItem",t),await Ft.connectivityStatus()!=="online"){Mo();return}Vr({id:"delete-item-toast-element",message:oA("An error occurred. Please try again."),behavior:Ir.Ephemeral});return}Vr({id:"delete-item-toast-element",message:e.length>1?oA("{count} Items deleted",{count:e.length}):oA("Deleted \u201C{title}\u201D",{title:e[0].title}),behavior:Ir.Ephemeral})}else{let t=e.length>1?oA("Are you sure you want to delete {count, plural, one {# item} other {# items}}?",{count:e.length}):oA("Are you sure you want to delete \u201C{itemName}\u201D?",{itemName:e[0].title}),r=e.length>1?oA("All of these items will be removed immediately. You can recover items for a limited time on 1Password.com."):oA("This item will be removed immediately. You can recover items for a limited time on 1Password.com."),a={id:"delete-action-item-id",title:t,text:r,primaryAction:{id:"delete-action-id",label:oA("Delete"),destructive:!0,action:{type:"ItemAction",content:{itemIds:A.itemIds.map(n=>JSON.stringify(n)),collectionUuid:"",action:{type:"Delete",content:{confirmed:!0}}}}},cancelAction:oA("Cancel")};xs(a)}}async function tee(A){if(A.length!==0){if(A[0].templateUuid===Zi&&!_d()){xs(NK());return}try{await T5A(A[0])}catch(j){if(console.error("Failed to handleEditItem",j),await Ft.connectivityStatus()!=="online"){Mo();return}Vr({id:"edit-item-toast-element",message:oA("An error occurred. Please try again."),behavior:Ir.Ephemeral});return}}}async function ree(A){A.length!==0&&await gv(A[0],"POPUP")}async function aee(A){A.length!==0&&await uh(A[0])}async function nee(A){A.length!==0&&await i8(A[0])}function oee(A){A.length!==0&&HK(A[0])}async function R5A(A){A.length!==0&&(await MK(A[0],"openInNewWindow"),Ko())}function iee(A){A.length!==0&&(RE(A[0]),Ko())}function see(A){A.length!==0&&e0(A[0])}async function lee(A){if(A.length!==0)try{poA(A[0])}catch(j){if(console.error("Failed to handleShareItem",j),await Ft.connectivityStatus()!=="online"){Mo();return}Vr({id:"share-item-toast-element",message:oA("An error occurred. Please try again."),behavior:Ir.Ephemeral});return}}async function S5A(A,j){let e=zj.itemCache?.accountForVaultID(a6(A.vault)),t=e&&H.getAccountHandlers.find(a=>a.uuid===e.uuid);if(!t)throw new Error("No account found with that uuid.");let r=await t.client?.getDocumentBlob(A,j);if(!r)throw new Error("No document blob found for item");return Al(A,Ww.Reveal),Te.downloadFile(j.fileName,r)}async function H5A(A){let j=await Sc(A.itemId);if(!j.isOk()){console.error("Unable to load item while handling item field action");return}switch(A.action.type){case"SecureCopy":case"SecureCopyCountry":case"SecureCopyZip":case"SecureCopyRegion":case"SecureCopyState":case"SecureCopyCity":case"SecureCopyStreet":return dee(j.value,A.action.content);case"SecureCopyFormattedString":return kee(j.value,A.action.content);case"OpenUrl":return uee(j.value,A.action.content);case"OpenAndAutoFillUrl":return Eee(j.value,A.action.content);case"OpenNetworkLocation":return pee(j.value,A.action.content);case"ToggleReveal":case"ViewRelatedItem":case"ViewPasswordHistory":case"LargeType":case"LargeTypeFormattedString":return;case"Download":return mee(j.value,A.action.content);case"ShowSshPrivateKeyExportPrompt":case"SecureCopySshPrivateKey":case"ExportSshKey":case"Preview":case"OpenFile":case"ShowInFileBrowser":case"PinFieldToMobileHomeScreen":case"UnPinFieldFromMobileHomeScreen":case"SetDefaultMobileHomeScreenActionToCopy":case"SetDefaultMobileHomeScreenActionToLargeType":case"SetDefaultMobileHomeScreenActionToShowQrCode":case"SetDefaultMobileHomeScreenActionToGoToItem":case"TypeInWindow":case"SecureCopySecretReference":case"LargeMap":case"DisplayWifiQrCode":case"ShareQrCode":case"Fill":case"ConnectToSshHost":case"SafariGetValueForClipboard":case"Decode":return;case"ToggleAlias":return Bee(j.value,A.action.content);case"ReportManagedCredentialFailure":j.value.overview.b5AccountUUID&&(MM(j.value.overview.b5AccountUUID,{componentName:"managed-credential-report-problem",componentType:"managed-credential-callout"}),s8());return;default:te(A.action)}}async function dee(A,j){let e=await jA.fieldValueByIdentifier(A,j.fieldIdentifier);if(e.isOk()){let{text:t,title:r,mustRecordItemUsage:a}=e.value;try{await r7(t);let n=r?oA("Copied {fieldTitle}",{fieldTitle:r}):oA("Copied field");Vr({id:`secure-copy-field-item${A.localId}`,message:n,behavior:Ir.Ephemeral})}catch{Vr({id:`secure-copy-field-item${A.localId}`,message:oA("Failed to copy field"),behavior:Ir.Ephemeral})}a&&Al(A,aA.ItemUsageAction.SecureCopy)}else console.warn("Unable to find matching field when handling secure copy")}async function kee(A,j){let e=await jA.fieldValueByIdentifier(A,j.fieldIdentifier);if(e.isOk()){r7(j.clientFormattedString);let{mustRecordItemUsage:t,title:r}=e.value,a=r?oA("Copied {fieldTitle}",{fieldTitle:r}):oA("Copied field");Vr({id:`secure-copy-field-item${A.localId}`,message:a,behavior:Ir.Ephemeral}),t&&Al(A,aA.ItemUsageAction.SecureCopy)}else console.warn("Unable to find matching field when handling secure copy")}async function uee(A,j){let e=await jA.fieldValueByIdentifier(A,j.field_identifier);if(e.isOk()){switch(j.open_type){case kG.Url:break;case kG.Email:e.value.text=`mailto:${e.value.text}`;break;case kG.Phone:e.value.text=`tel:${e.value.text}`;break}Te.openTab({url:e.value.text})}}async function Eee(A,j){let e=await jA.fieldValueByIdentifier(A,j);e.isOk()&&uh(A,{url:e.value.text})}async function pee(A,j){let e=await jA.fieldValueByIdentifier(A,j);e.isOk()&&Te.openTab({url:e.value.text})}async function mee(A,j){let e=await jA.unOpaqueFilePosition(j),t=gee(A,e);function r(){Vr({id:"download-complete-toast",message:oA("Download failed"),behavior:Ir.Ephemeral})}try{t.isOk()?(await S5A(A,t.value),Vr({id:"download-complete-toast",message:oA("{fileName} downloaded",{fileName:t.value.fileName}),behavior:Ir.Ephemeral})):r()}catch{r()}}async function Bee(A,j){let e;j.state===_h.Enabled?e=_h.Disabled:e=_h.Enabled;try{await G5A(OE(A),j.aliasId,j.accountId,{state:e});let t=j.state===_h.Enabled?oA("Email blocked"):oA("Email unblocked");Vr({id:"alias-toggled-toast",message:t,behavior:Ir.Ephemeral})}catch{Vr({id:"alias-toggled-toast",message:"Something went wrong toggling alias",behavior:Ir.Ephemeral});return}}function gee(A,j){switch(j.type){case"Root":return A.details.documentAttributes?Pj(A.details.documentAttributes):OA(void 0);case"Field":{let e;for(let t of A.details.sections)if(t.name===j.content.sectionId&&t.fields)for(let r of t.fields)r.n===j.content.fieldId&&(e=r.v);return e?Pj(e):OA(void 0)}case"CustomIcon":return OA(void 0)}}async function M5A(){let A=[];for(let j of H.getAccountHandlers)if(!j.isLocked)try{let e=await j.loadPasswordHistory();for(let t of e)t.state===kA.ItemState.Active&&A.push({itemUuid:t.uuid,password:t.getPassword()||t.details.fields?.find(r=>r.designation==="password")?.value||"",timestamp:t.createdAt?.toISOString()??"",url:t.url,itemId:c8(t)})}catch(e){console.error(e)}return A}async function K5A(A){let j=await SA.getDatabase().getItem(A);if(!j)return console.error("Unable to delete password history, item with the given ID could not be found."),OA({type:"ITEM_IN_DB_NOT_FOUND"});if(typeof j.account_id!="number")return console.error("Item was missing account_id"),OA({type:"MISSING_ACCOUNT_ID"});let e=H.findAccountHandlerByID(j.account_id);return e?e.getItem({type:"databaseId",data:A}).then(async t=>{if(!t)return console.error("Unable to delete password history, item with the given ID could not be found."),OA({type:"ITEM_IN_HANDLER_NOT_FOUND"});t.state=kA.ItemState.Deleted;let r=await e.saveItem(t);return Pj(r)}):(console.error(`Unable to delete password history, missing account handler with account ID <${j.account_id}>`),OA({type:"NO_ACCOUNT_HANDLER"}))}async function l8(A,j){let e;try{[e]=H.defaultSavingLocation()}catch(o){console.error("Error retrieving default saving location:",o);let i=o instanceof xe?o.loggableMessage.str:"unknown reason";throw new q.LoggableError({errorClass:p`SavePasswordHistory`,message:q.logsafe.assertLogSafe(`Unable to save password history. Error retrieving default saving location: ${i}`)})}let t=H.findAccountHandlerByUuid(e.uuid);if(!t)throw new q.LoggableError({errorClass:p`SavePasswordHistory`,message:p`Unable to save password history. Account handler not found.`});let r;try{r=await Ft.connectivityStatus()}catch{let o="Error retrieving connectivity status.";throw console.error(o),new q.LoggableError({errorClass:p`SavePasswordHistory`,message:q.logsafe.assertLogSafe(`Unable to save password history. ${o}`),userUuid:t.user?.uuid?W(t.user?.uuid):void 0})}if(r!=="online")throw new q.LoggableError({errorClass:p`SavePasswordHistory`,message:p`Unable to save password history. Account is offline.`,userUuid:t.user?.uuid?W(t.user?.uuid):void 0});let a;try{a=await t.getGeneratedPasswordVault()}catch(o){throw console.error("Error retrieving generated password vault:",o),new q.LoggableError({errorClass:p`SavePasswordHistory`,message:p`Unable to save password history. Error retrieving generated password vault.`,userUuid:t.user?.uuid?W(t.user?.uuid):void 0})}if(!a)throw new q.LoggableError({errorClass:p`SavePasswordHistory`,message:p`Unable to save password history. Missing generated password vault.`,userUuid:t.user?.uuid?W(t.user?.uuid):void 0});let n=new kA(a);return n.templateUuid=ol,n.vault=a,n.details.password=A.password,n.overview.title=j?.URL()?.hostname??"",n.overview.ainfo=new Date().toLocaleDateString(),n.overview.pgrng=!0,n.overview.pbe=A.entropy,n.overview.ps=A.strengthPercent,n.url=j?.unparsedUrl??"",Da(n,!1,e?.uuid).catch(o=>{throw console.error("Error saving new item to vault:",o),Ze(o)?o:new q.LoggableError({errorClass:p`SavePasswordHistory`,message:p`Unable to save password history. Error saving new item to vault.`,userUuid:t.user?.uuid?W(t.user?.uuid):void 0})}).finally(async()=>Ft.updateConnectivityStatus())}var d8=async()=>browser.management?browser.management.getAll():(console.warn("The management capability is not enabled. Unable to retrieve installed extensions"),Promise.resolve([])),N5A=async(A={ignoreDisabledExtensions:!0,ignoreCurrentExtensionVersion:!0})=>{let j=await d8();return j=j.filter(e=>DdA.map(t=>t.extensionId).includes(e.id)),A.ignoreDisabledExtensions&&(j=j.filter(e=>e.enabled)),A.ignoreCurrentExtensionVersion&&(j=j.filter(e=>browser.runtime.id!==e.id)),j},L5A=A=>A.forEach(j=>void browser.management.setEnabled(j,!1));var FoA={};er(FoA,{brexInformation:()=>x2A,clearDSecret:()=>v2A,funcsForContextMenu:()=>JK,getBrexTokens:()=>dte,removePrivacyAPIKey:()=>q2A,sendNotification:()=>kte});var bt,o7=0,k8=null;function u8(){return(k8===null||k8.byteLength===0)&&(k8=new Uint8Array(bt.memory.buffer)),k8}var LK=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},qee=typeof LK.encodeInto=="function"?function(A,j){return LK.encodeInto(A,j)}:function(A,j){let e=LK.encode(A);return j.set(e),{read:A.length,written:e.length}};function Sm(A,j,e){if(e===void 0){let o=LK.encode(A),i=j(o.length,1)>>>0;return u8().subarray(i,i+o.length).set(o),o7=o.length,i}let t=A.length,r=j(t,1)>>>0,a=u8(),n=0;for(;n<t;n++){let o=A.charCodeAt(n);if(o>127)break;a[r+n]=o}if(n!==t){n!==0&&(A=A.slice(n)),r=e(r,t,t=n+A.length*3,1)>>>0;let o=u8().subarray(r+n,r+t),i=qee(A,o);n+=i.written,r=e(r,t,n,1)>>>0}return o7=n,r}var vv=null;function tn(){return(vv===null||vv.buffer.detached===!0||vv.buffer.detached===void 0&&vv.buffer!==bt.memory.buffer)&&(vv=new DataView(bt.memory.buffer)),vv}function Ld(A){let j=bt.__externref_table_alloc();return bt.__wbindgen_export_4.set(j,A),j}function he(A,j){try{return A.apply(this,j)}catch(e){let t=Ld(e);bt.__wbindgen_exn_store(t)}}var J5A=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&J5A.decode();function La(A,j){return A=A>>>0,J5A.decode(u8().subarray(A,A+j))}function pi(A){return A==null}function z5A(A,j){return A=A>>>0,u8().subarray(A/1,A/1+j)}var U5A=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>{bt.__wbindgen_export_6.get(A.dtor)(A.a,A.b)});function xv(A,j,e,t){let r={a:A,b:j,cnt:1,dtor:e},a=(...n)=>{r.cnt++;let o=r.a;r.a=0;try{return t(o,r.b,...n)}finally{--r.cnt===0?(bt.__wbindgen_export_6.get(r.dtor)(o,r.b),U5A.unregister(r)):r.a=o}};return a.original=r,U5A.register(a,r,r),a}function moA(A){let j=typeof A;if(j=="number"||j=="boolean"||A==null)return`${A}`;if(j=="string")return`"${A}"`;if(j=="symbol"){let r=A.description;return r==null?"Symbol":`Symbol(${r})`}if(j=="function"){let r=A.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(A)){let r=A.length,a="[";r>0&&(a+=moA(A[0]));for(let n=1;n<r;n++)a+=", "+moA(A[n]);return a+="]",a}let e=/\[object ([^\]]+)\]/.exec(toString.call(A)),t;if(e&&e.length>1)t=e[1];else return toString.call(A);if(t=="Object")try{return"Object("+JSON.stringify(A)+")"}catch{return"Object"}return A instanceof Error?`${A.name}: ${A.message}
${A.stack}`:t}function W5A(A,j){return bt.xamBackendInit(A,j)}function Q5A(A){let j=bt.__wbindgen_export_4.get(A);return bt.__externref_table_dealloc(A),j}function xee(A,j,e,t){bt.closure38_externref_shim(A,j,e,t)}function vee(A,j,e){let t=bt.closure932_externref_shim_multivalue_shim(A,j,e);if(t[1])throw Q5A(t[0])}function Gee(A,j){bt._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hbf78f23efb5de3d8(A,j)}function fee(A,j){bt._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hd1d532df56accea8(A,j)}function Fee(A,j,e){bt.closure5685_externref_shim(A,j,e)}function bee(A,j){bt._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h299e84b4e41ef66d(A,j)}function yee(A,j,e){bt.closure6722_externref_shim(A,j,e)}function $ee(A,j,e,t){bt.closure6894_externref_shim(A,j,e,t)}var wee=["pending","done"],V5A=["readonly","readwrite","versionchange","readwriteflush","cleanup"],Iee=["default","no-store","reload","no-cache","force-cache","only-if-cached"],Pee=["omit","same-origin","include"],Oee=["same-origin","no-cors","cors","navigate"],X5A=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bt.__wbg_defaultxambackendserver_free(A>>>0,1)),BoA=class A{static __wrap(j){j=j>>>0;let e=Object.create(A.prototype);return e.__wbg_ptr=j,X5A.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,X5A.unregister(this),j}free(){let j=this.__destroy_into_raw();bt.__wbg_defaultxambackendserver_free(j,0)}sendCallback(j,e){let t=bt.defaultxambackendserver_sendCallback(this.__wbg_ptr,j,e);if(t[1])throw Q5A(t[0])}},VDt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bt.__wbg_intounderlyingbytesource_free(A>>>0,1));var XDt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bt.__wbg_intounderlyingsink_free(A>>>0,1));var JDt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>bt.__wbg_intounderlyingsource_free(A>>>0,1));async function Ree(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(t){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let e=await A.arrayBuffer();return await WebAssembly.instantiate(e,j)}else{let e=await WebAssembly.instantiate(A,j);return e instanceof WebAssembly.Instance?{instance:e,module:A}:e}}function Dee(){let A={};return A.wbg={},A.wbg.__wbg_String_8f0eb39a4a4c2f66=function(j,e){let t=String(e),r=Sm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=o7;tn().setInt32(j+4*1,a,!0),tn().setInt32(j+4*0,r,!0)},A.wbg.__wbg_Window_41559019033ede94=function(j){return j.Window},A.wbg.__wbg_WorkerGlobalScope_d324bffbeaef9f3a=function(j){return j.WorkerGlobalScope},A.wbg.__wbg_abort_410ec47a64ac6117=function(j,e){j.abort(e)},A.wbg.__wbg_abort_775ef1d17fc65868=function(j){j.abort()},A.wbg.__wbg_abort_99fc644e2c79c9fb=function(){return he(function(j){j.abort()},arguments)},A.wbg.__wbg_addListener_b04fec4433d9c2da=function(j,e){j.addListener(e)},A.wbg.__wbg_add_4315fd553d714c24=function(){return he(function(j,e){return j.add(e)},arguments)},A.wbg.__wbg_append_299d5d48292c0495=function(){return he(function(j,e,t,r,a){j.append(La(e,t),La(r,a))},arguments)},A.wbg.__wbg_append_8c7dd8d641a5f01b=function(){return he(function(j,e,t,r,a){j.append(La(e,t),La(r,a))},arguments)},A.wbg.__wbg_append_b2d1fc16de2a0e81=function(){return he(function(j,e,t,r,a,n){j.append(La(e,t),r,La(a,n))},arguments)},A.wbg.__wbg_append_b44785ebeb668479=function(){return he(function(j,e,t,r){j.append(La(e,t),r)},arguments)},A.wbg.__wbg_arrayBuffer_d1b44c4390db422f=function(){return he(function(j){return j.arrayBuffer()},arguments)},A.wbg.__wbg_bound_f2afc3766d4545cf=function(){return he(function(j,e,t,r){return IDBKeyRange.bound(j,e,t!==0,r!==0)},arguments)},A.wbg.__wbg_buffer_09165b52af8c5237=function(j){return j.buffer},A.wbg.__wbg_buffer_609cc3eee51ed158=function(j){return j.buffer},A.wbg.__wbg_byobRequest_77d9adf63337edfb=function(j){let e=j.byobRequest;return pi(e)?0:Ld(e)},A.wbg.__wbg_byteLength_e674b853d9c77e1d=function(j){return j.byteLength},A.wbg.__wbg_byteOffset_fd862df290ef848d=function(j){return j.byteOffset},A.wbg.__wbg_call_29726b1dad289bba=function(){return he(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_call_672a4d21634d4a24=function(){return he(function(j,e){return j.call(e)},arguments)},A.wbg.__wbg_call_7cccdd69e0791ae2=function(){return he(function(j,e,t){return j.call(e,t)},arguments)},A.wbg.__wbg_clearTimeout_5a54f8841c30079a=function(j){return clearTimeout(j)},A.wbg.__wbg_clearTimeout_7a42b49784aea641=function(j){return clearTimeout(j)},A.wbg.__wbg_clear_f450db7eeb71163f=function(){return he(function(j){return j.clear()},arguments)},A.wbg.__wbg_close_304cc1fef3466669=function(){return he(function(j){j.close()},arguments)},A.wbg.__wbg_close_5ce03e29be453811=function(){return he(function(j){j.close()},arguments)},A.wbg.__wbg_close_a17af48266bd9942=function(j){j.close()},A.wbg.__wbg_commit_a54edce65f3858f2=function(){return he(function(j){j.commit()},arguments)},A.wbg.__wbg_continue_c46c11d3dbe1b030=function(){return he(function(j){j.continue()},arguments)},A.wbg.__wbg_createIndex_873ac48adc772309=function(){return he(function(j,e,t,r,a){return j.createIndex(La(e,t),r,a)},arguments)},A.wbg.__wbg_createIndex_fcfd513cf4581834=function(){return he(function(j,e,t,r){return j.createIndex(La(e,t),r)},arguments)},A.wbg.__wbg_createObjectStore_d2f9e1016f4d81b9=function(){return he(function(j,e,t,r){return j.createObjectStore(La(e,t),r)},arguments)},A.wbg.__wbg_crypto_dd1b8f71596b161a=function(j){return j.crypto},A.wbg.__wbg_debug_3cb59063b29f58c1=function(j){},A.wbg.__wbg_defaultxambackendserver_new=function(j){return BoA.__wrap(j)},A.wbg.__wbg_deleteDatabase_b8f234aeb7ad3452=function(){return he(function(j,e,t){return j.deleteDatabase(La(e,t))},arguments)},A.wbg.__wbg_delete_200677093b4cf756=function(){return he(function(j,e){return j.delete(e)},arguments)},A.wbg.__wbg_done_769e5ede4b31c67b=function(j){return j.done},A.wbg.__wbg_enqueue_bb16ba72f537dc9e=function(){return he(function(j,e){j.enqueue(e)},arguments)},A.wbg.__wbg_entries_3265d4158b33e5dc=function(j){return Object.entries(j)},A.wbg.__wbg_error_524f506f44df1645=function(j){console.error(j)},A.wbg.__wbg_error_7534b8e9a36f1ab4=function(j,e){let t,r;try{t=j,r=e,console.error(La(j,e))}finally{bt.__wbindgen_free(t,r,1)}},A.wbg.__wbg_error_ff4ddaabdfc5dbb3=function(){return he(function(j){let e=j.error;return pi(e)?0:Ld(e)},arguments)},A.wbg.__wbg_fetch_509096533071c657=function(j,e){return j.fetch(e)},A.wbg.__wbg_fetch_74a3e84ebd2c9a0e=function(j){return fetch(j)},A.wbg.__wbg_flush_1a680a66b21c53d7=function(){return he(function(j){j.flush()},arguments)},A.wbg.__wbg_getAllKeys_b11d8835dc4be0e8=function(){return he(function(j){return j.getAllKeys()},arguments)},A.wbg.__wbg_getAll_1de5635a99f2dae8=function(){return he(function(j){return j.getAll()},arguments)},A.wbg.__wbg_getAll_304e868beec2021f=function(){return he(function(j){return j.getAll()},arguments)},A.wbg.__wbg_getAll_a5c537de02c25968=function(){return he(function(j,e){return j.getAll(e)},arguments)},A.wbg.__wbg_getEntriesByType_5d2deec4d4dcff89=function(j,e,t){return j.getEntriesByType(La(e,t))},A.wbg.__wbg_getRandomValues_760c8e927227643e=function(){return he(function(j,e){j.getRandomValues(e)},arguments)},A.wbg.__wbg_getSize_e7dbd5ffa0b43df1=function(){return he(function(j){return j.getSize()},arguments)},A.wbg.__wbg_getTime_46267b1c24877e30=function(j){return j.getTime()},A.wbg.__wbg_getTimezoneOffset_6b5752021c499c47=function(j){return j.getTimezoneOffset()},A.wbg.__wbg_get_67b2ba62fc30de12=function(){return he(function(j,e){return Reflect.get(j,e)},arguments)},A.wbg.__wbg_get_8da03f81f6a1111e=function(){return he(function(j,e){return j.get(e)},arguments)},A.wbg.__wbg_get_93e54e8e166fbcab=function(){return he(function(j,e){return j.get(e)},arguments)},A.wbg.__wbg_get_b9b93047fe3cf45b=function(j,e){return j[e>>>0]},A.wbg.__wbg_get_dd357822de02dfec=function(){return he(function(j,e){return j.get(e)},arguments)},A.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(j,e){return j[e]},A.wbg.__wbg_global_f5c2926e57ba457f=function(j){return j.global},A.wbg.__wbg_has_a5ea9117f258a0ec=function(){return he(function(j,e){return Reflect.has(j,e)},arguments)},A.wbg.__wbg_headers_9cb51cfd2ac780a4=function(j){return j.headers},A.wbg.__wbg_index_e00ca5fff206ee3e=function(){return he(function(j,e,t){return j.index(La(e,t))},arguments)},A.wbg.__wbg_indexedDB_54f01430b1e194e8=function(){return he(function(j){let e=j.indexedDB;return pi(e)?0:Ld(e)},arguments)},A.wbg.__wbg_indexedDB_b1f49280282046f8=function(){return he(function(j){let e=j.indexedDB;return pi(e)?0:Ld(e)},arguments)},A.wbg.__wbg_indexedDB_f6b47b0dc333fd2f=function(){return he(function(j){let e=j.indexedDB;return pi(e)?0:Ld(e)},arguments)},A.wbg.__wbg_info_3daf2e093e091b66=function(j){console.info(j)},A.wbg.__wbg_instanceof_ArrayBuffer_e14585432e3737fc=function(j){let e;try{e=j instanceof ArrayBuffer}catch{e=!1}return e},A.wbg.__wbg_instanceof_CursorSys_4b6a8aba0e823e75=function(j){let e;try{e=j instanceof IDBCursorWithValue}catch{e=!1}return e},A.wbg.__wbg_instanceof_DomException_ed1ccb7aaf39034c=function(j){let e;try{e=j instanceof DOMException}catch{e=!1}return e},A.wbg.__wbg_instanceof_Error_4d54113b22d20306=function(j){let e;try{e=j instanceof Error}catch{e=!1}return e},A.wbg.__wbg_instanceof_IdbCursor_4f02b0cddf69c141=function(j){let e;try{e=j instanceof IDBCursor}catch{e=!1}return e},A.wbg.__wbg_instanceof_IdbDatabase_a3ef009ca00059f9=function(j){let e;try{e=j instanceof IDBDatabase}catch{e=!1}return e},A.wbg.__wbg_instanceof_IdbRequest_4813c3f207666aa4=function(j){let e;try{e=j instanceof IDBRequest}catch{e=!1}return e},A.wbg.__wbg_instanceof_Map_f3469ce2244d2430=function(j){let e;try{e=j instanceof Map}catch{e=!1}return e},A.wbg.__wbg_instanceof_Navigator_1a0ee377f1057fd4=function(j){let e;try{e=j instanceof Navigator}catch{e=!1}return e},A.wbg.__wbg_instanceof_Performance_0ac1286c87171f57=function(j){let e;try{e=j instanceof Performance}catch{e=!1}return e},A.wbg.__wbg_instanceof_Promise_935168b8f4b49db3=function(j){let e;try{e=j instanceof Promise}catch{e=!1}return e},A.wbg.__wbg_instanceof_Response_f2cc20d9f7dfd644=function(j){let e;try{e=j instanceof Response}catch{e=!1}return e},A.wbg.__wbg_instanceof_Uint8Array_17156bcf118086a9=function(j){let e;try{e=j instanceof Uint8Array}catch{e=!1}return e},A.wbg.__wbg_instanceof_Window_def73ea0955fc569=function(j){let e;try{e=j instanceof Window}catch{e=!1}return e},A.wbg.__wbg_instanceof_WorkerGlobalScope_dbdbdea7e3b56493=function(j){let e;try{e=j instanceof WorkerGlobalScope}catch{e=!1}return e},A.wbg.__wbg_instanceof_WorkerNavigator_16d0429e2f608fc9=function(j){let e;try{e=j instanceof WorkerNavigator}catch{e=!1}return e},A.wbg.__wbg_isArray_a1eab7e0d067391b=function(j){return Array.isArray(j)},A.wbg.__wbg_isSafeInteger_343e2beeeece1bb0=function(j){return Number.isSafeInteger(j)},A.wbg.__wbg_iterator_9a24c88df860dc65=function(){return Symbol.iterator},A.wbg.__wbg_key_29fefecef430db96=function(){return he(function(j){return j.key},arguments)},A.wbg.__wbg_languages_2420955220685766=function(j){return j.languages},A.wbg.__wbg_languages_d8dad509faf757df=function(j){return j.languages},A.wbg.__wbg_length_a446193dc22c12f8=function(j){return j.length},A.wbg.__wbg_length_e2d2a49132c1b256=function(j){return j.length},A.wbg.__wbg_local_2fa3ac41e476a539=function(j){return j.local},A.wbg.__wbg_log_c222819a41e063d3=function(j){},A.wbg.__wbg_lowerBound_1872d19f5bcf83c6=function(){return he(function(j,e){return IDBKeyRange.lowerBound(j,e!==0)},arguments)},A.wbg.__wbg_mark_001da84b098c950f=function(){return he(function(j,e,t){j.mark(La(e,t))},arguments)},A.wbg.__wbg_measure_36bc93e7be4ed1bb=function(){return he(function(j,e,t,r,a,n,o){j.measure(La(e,t),La(r,a),La(n,o))},arguments)},A.wbg.__wbg_message_5c5d919204d42400=function(j,e){let t=e.message,r=Sm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=o7;tn().setInt32(j+4*1,a,!0),tn().setInt32(j+4*0,r,!0)},A.wbg.__wbg_message_97a2af9b89d693a3=function(j){return j.message},A.wbg.__wbg_msCrypto_60a4979188f6b80b=function(j){return j.msCrypto},A.wbg.__wbg_name_f2d27098bfd843e7=function(j,e){let t=e.name,r=Sm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=o7;tn().setInt32(j+4*1,a,!0),tn().setInt32(j+4*0,r,!0)},A.wbg.__wbg_navigator_0a9bf1120e24fec2=function(j){return j.navigator},A.wbg.__wbg_navigator_1577371c070c8947=function(j){return j.navigator},A.wbg.__wbg_new0_f788a2397c7ca929=function(){return new Date},A.wbg.__wbg_newVersion_8667edf9191f7473=function(j,e){let t=e.newVersion;tn().setFloat64(j+8*1,pi(t)?0:t,!0),tn().setInt32(j+4*0,!pi(t),!0)},A.wbg.__wbg_new_018dcc2d6c8c2f6a=function(){return he(function(){return new Headers},arguments)},A.wbg.__wbg_new_23a2665fac83c611=function(j,e){try{var t={a:j,b:e},r=(n,o)=>{let i=t.a;t.a=0;try{return $ee(i,t.b,n,o)}finally{t.a=i}};return new Promise(r)}finally{t.a=t.b=0}},A.wbg.__wbg_new_31a97dac4f10fab7=function(j){return new Date(j)},A.wbg.__wbg_new_405e22f390576ce2=function(){return new Object},A.wbg.__wbg_new_5e0be73521bc8c17=function(){return new Map},A.wbg.__wbg_new_78feb108b6472713=function(){return new Array},A.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},A.wbg.__wbg_new_9fd39a253424609a=function(){return he(function(){return new FormData},arguments)},A.wbg.__wbg_new_a12002a7f91c75be=function(j){return new Uint8Array(j)},A.wbg.__wbg_new_c68d7209be747379=function(j,e){return new Error(La(j,e))},A.wbg.__wbg_new_e25e5aab09ff45db=function(){return he(function(){return new AbortController},arguments)},A.wbg.__wbg_newnoargs_105ed471475aaf50=function(j,e){return new Function(La(j,e))},A.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(j,e,t){return new Uint8Array(j,e>>>0,t>>>0)},A.wbg.__wbg_newwithlength_a381634e90c276d4=function(j){return new Uint8Array(j>>>0)},A.wbg.__wbg_newwithlength_b93fcdb8050ed017=function(j){return new Int32Array(j>>>0)},A.wbg.__wbg_newwithstrandinit_06c535e0a867c635=function(){return he(function(j,e,t){return new Request(La(j,e),t)},arguments)},A.wbg.__wbg_newwithu8arraysequenceandoptions_068570c487f69127=function(){return he(function(j,e){return new Blob(j,e)},arguments)},A.wbg.__wbg_next_25feadfc0913fea9=function(j){return j.next},A.wbg.__wbg_next_6574e1a8a62d1055=function(){return he(function(j){return j.next()},arguments)},A.wbg.__wbg_node_0deadde112ce24bb=function(j){return j.node},A.wbg.__wbg_now_807e54c39636c349=function(){return Date.now()},A.wbg.__wbg_objectStore_21878d46d25b64b6=function(){return he(function(j,e,t){return j.objectStore(La(e,t))},arguments)},A.wbg.__wbg_oldVersion_e8337811e52861c6=function(j){return j.oldVersion},A.wbg.__wbg_onChanged_840eeabefdb63196=function(j){return j.onChanged},A.wbg.__wbg_openCursor_1adef2266972fb45=function(){return he(function(j){return j.openCursor()},arguments)},A.wbg.__wbg_openCursor_238e247d18bde2cd=function(){return he(function(j){return j.openCursor()},arguments)},A.wbg.__wbg_openCursor_660622f9b2e1ae10=function(){return he(function(j,e){return j.openCursor(e)},arguments)},A.wbg.__wbg_open_e0c0b2993eb596e1=function(){return he(function(j,e,t,r){return j.open(La(e,t),r>>>0)},arguments)},A.wbg.__wbg_process_0caa4f154b97e834=function(j){return j.process},A.wbg.__wbg_push_737cfc8c1432c2c6=function(j,e){return j.push(e)},A.wbg.__wbg_put_9ef5363941008835=function(){return he(function(j,e){return j.put(e)},arguments)},A.wbg.__wbg_queueMicrotask_97d92b4fcc8a61c5=function(j){queueMicrotask(j)},A.wbg.__wbg_queueMicrotask_d3219def82552485=function(j){return j.queueMicrotask},A.wbg.__wbg_randomFillSync_82e8b56b81896e30=function(){return he(function(j,e){j.randomFillSync(e)},arguments)},A.wbg.__wbg_read_f8fdd4b410209222=function(){return he(function(j,e,t,r){return j.read(z5A(e,t),r)},arguments)},A.wbg.__wbg_readyState_4013cfdf4f22afb0=function(j){let e=j.readyState;return(wee.indexOf(e)+1||3)-1},A.wbg.__wbg_removeListener_664bcfbcef870056=function(j,e){j.removeListener(e)},A.wbg.__wbg_request_5079471e06223120=function(j){return j.request},A.wbg.__wbg_request_fada8c23b78b3a02=function(j){return j.request},A.wbg.__wbg_require_1a22b236558b5786=function(){return he(function(){return module.require},arguments)},A.wbg.__wbg_resolve_4851785c9c5f573d=function(j){return Promise.resolve(j)},A.wbg.__wbg_respond_1f279fa9f8edcb1c=function(){return he(function(j,e){j.respond(e>>>0)},arguments)},A.wbg.__wbg_result_f29afabdf2c05826=function(){return he(function(j){return j.result},arguments)},A.wbg.__wbg_self_6afa9654edd50769=function(){return he(function(){return self.self},arguments)},A.wbg.__wbg_session_d52b2e0c985cab9b=function(j){return j.session},A.wbg.__wbg_setTimeout_7bb3429662ab1e70=function(j,e){return setTimeout(j,e)},A.wbg.__wbg_setTimeout_b4ee584b3f982e97=function(){return he(function(j,e,t){return j.setTimeout(e,t)},arguments)},A.wbg.__wbg_setTimeout_db2dbaeefb6f39c7=function(){return he(function(j,e){return setTimeout(j,e)},arguments)},A.wbg.__wbg_setTimeout_f2fe5af8e3debeb3=function(){return he(function(j,e,t){return j.setTimeout(e,t)},arguments)},A.wbg.__wbg_set_37837023f3d740e8=function(j,e,t){j[e>>>0]=t},A.wbg.__wbg_set_3f1d0b984ed272ed=function(j,e,t){j[e]=t},A.wbg.__wbg_set_65595bdd868b3009=function(j,e,t){j.set(e,t>>>0)},A.wbg.__wbg_set_8fc6bf8a5b1071d1=function(j,e,t){return j.set(e,t)},A.wbg.__wbg_set_bb8cecf6a62b9f46=function(){return he(function(j,e,t){return Reflect.set(j,e,t)},arguments)},A.wbg.__wbg_setat_2a071a392643c10e=function(j,e){j.at=e},A.wbg.__wbg_setautoincrement_8b4327709e9ee7d9=function(j,e){j.autoIncrement=e!==0},A.wbg.__wbg_setbody_5923b78a95eedf29=function(j,e){j.body=e},A.wbg.__wbg_setcache_12f17c3a980650e4=function(j,e){j.cache=Iee[e]},A.wbg.__wbg_setcredentials_c3a22f1cd105a2c6=function(j,e){j.credentials=Pee[e]},A.wbg.__wbg_setheaders_834c0bdb6a8949ad=function(j,e){j.headers=e},A.wbg.__wbg_setkeypath_691179e313c26ae1=function(j,e){j.keyPath=e},A.wbg.__wbg_setmethod_3c5280fe5d890842=function(j,e,t){j.method=La(e,t)},A.wbg.__wbg_setmode_5dc300b865044b65=function(j,e){j.mode=Oee[e]},A.wbg.__wbg_setmultientry_4c4eee871f29837a=function(j,e){j.multiEntry=e!==0},A.wbg.__wbg_setonabort_3bf4db6614fa98e9=function(j,e){j.onabort=e},A.wbg.__wbg_setonblocked_aebf64bd39f1eca8=function(j,e){j.onblocked=e},A.wbg.__wbg_setoncomplete_4d19df0dadb7c4d4=function(j,e){j.oncomplete=e},A.wbg.__wbg_setonerror_b0d9d723b8fddbbb=function(j,e){j.onerror=e},A.wbg.__wbg_setonerror_d7e3056cc6e56085=function(j,e){j.onerror=e},A.wbg.__wbg_setonsuccess_afa464ee777a396d=function(j,e){j.onsuccess=e},A.wbg.__wbg_setonupgradeneeded_fcf7ce4f2eb0cb5f=function(j,e){j.onupgradeneeded=e},A.wbg.__wbg_setsignal_75b21ef3a81de905=function(j,e){j.signal=e},A.wbg.__wbg_settype_39ed370d3edd403c=function(j,e,t){j.type=La(e,t)},A.wbg.__wbg_signal_aaf9ad74119f20a4=function(j){return j.signal},A.wbg.__wbg_stack_0ed75d68575b0f3c=function(j,e){let t=e.stack,r=Sm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=o7;tn().setInt32(j+4*1,a,!0),tn().setInt32(j+4*0,r,!0)},A.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){let j=typeof global>"u"?null:global;return pi(j)?0:Ld(j)},A.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){let j=typeof globalThis>"u"?null:globalThis;return pi(j)?0:Ld(j)},A.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){let j=typeof self>"u"?null:self;return pi(j)?0:Ld(j)},A.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){let j=typeof window>"u"?null:window;return pi(j)?0:Ld(j)},A.wbg.__wbg_status_f6360336ca686bf0=function(j){return j.status},A.wbg.__wbg_stringify_f7ed6987935b4a24=function(){return he(function(j){return JSON.stringify(j)},arguments)},A.wbg.__wbg_subarray_aa9065fa9dc5df96=function(j,e,t){return j.subarray(e>>>0,t>>>0)},A.wbg.__wbg_sync_363f9379123022fc=function(j){return j.sync},A.wbg.__wbg_target_0a62d9d79a2a1ede=function(j){let e=j.target;return pi(e)?0:Ld(e)},A.wbg.__wbg_then_44b73946d2fb3e7d=function(j,e){return j.then(e)},A.wbg.__wbg_then_48b406749878a531=function(j,e,t){return j.then(e,t)},A.wbg.__wbg_toString_5285597960676b7b=function(j){return j.toString()},A.wbg.__wbg_transaction_7d452475ef3c3c33=function(j){return j.transaction},A.wbg.__wbg_transaction_babc423936946a37=function(){return he(function(j,e,t,r){return j.transaction(La(e,t),V5A[r])},arguments)},A.wbg.__wbg_transaction_d6d07c3c9963c49e=function(){return he(function(j,e,t){return j.transaction(e,V5A[t])},arguments)},A.wbg.__wbg_truncate_29261a6365c72b01=function(){return he(function(j,e){j.truncate(e>>>0)},arguments)},A.wbg.__wbg_upperBound_76a00814e81f6891=function(){return he(function(j,e){return IDBKeyRange.upperBound(j,e!==0)},arguments)},A.wbg.__wbg_url_ae10c34ca209681d=function(j,e){let t=e.url,r=Sm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=o7;tn().setInt32(j+4*1,a,!0),tn().setInt32(j+4*0,r,!0)},A.wbg.__wbg_userAgent_12e9d8e62297563f=function(){return he(function(j,e){let t=e.userAgent,r=Sm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=o7;tn().setInt32(j+4*1,a,!0),tn().setInt32(j+4*0,r,!0)},arguments)},A.wbg.__wbg_userAgent_d036e8722fea0cde=function(){return he(function(j,e){let t=e.userAgent,r=Sm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=o7;tn().setInt32(j+4*1,a,!0),tn().setInt32(j+4*0,r,!0)},arguments)},A.wbg.__wbg_value_68c4e9a54bb7fd5e=function(){return he(function(j){return j.value},arguments)},A.wbg.__wbg_value_cd1ffa7b1ab794f1=function(j){return j.value},A.wbg.__wbg_values_99f7a68c7f313d66=function(j){return j.values()},A.wbg.__wbg_versions_134d8f3c6de79566=function(j){return j.versions},A.wbg.__wbg_view_fd8a56e8983f448d=function(j){let e=j.view;return pi(e)?0:Ld(e)},A.wbg.__wbg_wait_c19065fad9b95713=function(){return he(function(j,e,t,r){return Atomics.wait(j,e>>>0,t,r)},arguments)},A.wbg.__wbg_warn_4ca3906c248c47c4=function(j){console.warn(j)},A.wbg.__wbg_window_ef5723d5ef2e972e=function(){return he(function(){return window.window},arguments)},A.wbg.__wbg_write_530d3c84df874f53=function(){return he(function(j,e,t,r){return j.write(z5A(e,t),r)},arguments)},A.wbg.__wbindgen_as_number=function(j){return+j},A.wbg.__wbindgen_bigint_from_i64=function(j){return j},A.wbg.__wbindgen_bigint_from_u64=function(j){return BigInt.asUintN(64,j)},A.wbg.__wbindgen_bigint_get_as_i64=function(j,e){let t=e,r=typeof t=="bigint"?t:void 0;tn().setBigInt64(j+8*1,pi(r)?BigInt(0):r,!0),tn().setInt32(j+4*0,!pi(r),!0)},A.wbg.__wbindgen_boolean_get=function(j){let e=j;return typeof e=="boolean"?e?1:0:2},A.wbg.__wbindgen_cb_drop=function(j){let e=j.original;return e.cnt--==1?(e.a=0,!0):!1},A.wbg.__wbindgen_closure_wrapper12699=function(j,e,t){return xv(j,e,5682,fee)},A.wbg.__wbindgen_closure_wrapper12701=function(j,e,t){return xv(j,e,5682,Fee)},A.wbg.__wbindgen_closure_wrapper15229=function(j,e,t){return xv(j,e,6664,bee)},A.wbg.__wbindgen_closure_wrapper15387=function(j,e,t){return xv(j,e,6723,yee)},A.wbg.__wbindgen_closure_wrapper2543=function(j,e,t){return xv(j,e,933,vee)},A.wbg.__wbindgen_closure_wrapper383=function(j,e,t){return xv(j,e,39,xee)},A.wbg.__wbindgen_closure_wrapper4885=function(j,e,t){return xv(j,e,2168,Gee)},A.wbg.__wbindgen_debug_string=function(j,e){let t=moA(e),r=Sm(t,bt.__wbindgen_malloc,bt.__wbindgen_realloc),a=o7;tn().setInt32(j+4*1,a,!0),tn().setInt32(j+4*0,r,!0)},A.wbg.__wbindgen_error_new=function(j,e){return new Error(La(j,e))},A.wbg.__wbindgen_in=function(j,e){return j in e},A.wbg.__wbindgen_init_externref_table=function(){let j=bt.__wbindgen_export_4,e=j.grow(4);j.set(0,void 0),j.set(e+0,void 0),j.set(e+1,null),j.set(e+2,!0),j.set(e+3,!1)},A.wbg.__wbindgen_is_bigint=function(j){return typeof j=="bigint"},A.wbg.__wbindgen_is_function=function(j){return typeof j=="function"},A.wbg.__wbindgen_is_null=function(j){return j===null},A.wbg.__wbindgen_is_object=function(j){let e=j;return typeof e=="object"&&e!==null},A.wbg.__wbindgen_is_string=function(j){return typeof j=="string"},A.wbg.__wbindgen_is_undefined=function(j){return j===void 0},A.wbg.__wbindgen_jsval_eq=function(j,e){return j===e},A.wbg.__wbindgen_jsval_loose_eq=function(j,e){return j==e},A.wbg.__wbindgen_memory=function(){return bt.memory},A.wbg.__wbindgen_number_get=function(j,e){let t=e,r=typeof t=="number"?t:void 0;tn().setFloat64(j+8*1,pi(r)?0:r,!0),tn().setInt32(j+4*0,!pi(r),!0)},A.wbg.__wbindgen_number_new=function(j){return j},A.wbg.__wbindgen_string_get=function(j,e){let t=e,r=typeof t=="string"?t:void 0;var a=pi(r)?0:Sm(r,bt.__wbindgen_malloc,bt.__wbindgen_realloc),n=o7;tn().setInt32(j+4*1,n,!0),tn().setInt32(j+4*0,a,!0)},A.wbg.__wbindgen_string_new=function(j,e){return La(j,e)},A.wbg.__wbindgen_throw=function(j,e){throw new Error(La(j,e))},A}function Tee(A,j){return bt=A.exports,Y5A.__wbindgen_wasm_module=j,vv=null,k8=null,bt.__wbindgen_start(),bt}async function Y5A(A){if(bt!==void 0)return bt;typeof A<"u"&&(Object.getPrototypeOf(A)===Object.prototype?{module_or_path:A}=A:console.warn("using deprecated parameters for the initialization function; pass a single object instead"));let j=Dee();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:e,module:t}=await Ree(await A,j);return Tee(e,t)}var Z5A=Y5A;var A2A="/assets/wasm/op_wasm_xam_bg-SPUKA474.wasm";async function r0(A,j,e,t){return A?jA.getAccountIcon(A,j,e,t):Promise.resolve({id:`account-icon-${j}`,sources:[]})}async function Gv(A,j,e){return A?jA.getVaultIcon(A,j,e):Promise.resolve({id:`vault-icon-${j}`,sources:[]})}async function goA(A){let j=await zj.loadItemCache();return j?j.activeItems(ie.combine(ie.userSelected(mr(),void 0,void 0,j),ie.account(A))):[]}async function zK(A,j,e){let t=await goA(A),r=[];try{r=await Mee()}catch(a){rj(new q.LoggableError({errorClass:p`SaveItemError`,message:p`Failed to get watchtower accounts`,stackOverrideError:a instanceof Error?a:void 0}))}return{usernameSuggestions:See(t),tagSuggestions:Hee(t),relatedItems:Ate(t,j,e?Zee(e):[]),watchtowerAccounts:r}}function See(A){return A.filter(ie.logins).map(j=>j.overview.ainfo).filter(j=>j&&j.trim().length)}function Hee(A){return A.reduce((j,e)=>(e.overview.tags&&j.push(...e.overview.tags),j),[])}async function Mee(){return Ho().then(A=>A.map(j=>({email:j.email,accountName:j.name,accountUuid:j.uuid,itemsInWrongAccountAllowedDomains:j.itemsInWrongAccountAllowedDomains})))}var Kee="amazon",Nee="apple",Lee="discord",zee="facebook",Uee="github",Vee="google",Xee="microsoft",Jee="okta",Wee="slack",Qee="twitter";function Yee(A){switch(A){case"amazon.com":return Kee;case"apple.com":return Nee;case"discord.com":return Lee;case"facebook.com":return zee;case"github.com":return Uee;case"google.com":return Vee;case"microsoft.com":return Xee;case"okta.com":return Jee;case"slack.com":return Wee;case"twitter.com":return Qee;default:return}}function Zee(A){if(!A.details||!A.details.sections)return[];let j=t=>t.provider!==void 0,e=[];for(let t of A.details.sections)if(t.fields){for(let r of t.fields)if(r.k==="ssoLogin"&&j(r.v)){let a=r.v.item;a&&e.push({itemUuid:a.itemUuid,vaultUuid:a.vaultUuid})}}return e}function Ate(A,j,e){if(!j&&e.length===0)return[];let t=(a,n,o)=>o.indexOf(a)===n,r=[];for(let a of A){let n=e.some(({itemUuid:s,vaultUuid:l})=>a.uuid===s&&a.vault.uuid===l),i=(j&&a.templateUuid===Je||n)&&a.urlToNakedDomains?Object.values(a.urlToNakedDomains).filter(t).map(Yee).filter(s=>!!s):[];(n||i.length>0)&&r.push({itemOverview:Lo(a),itemUuid:a.uuid,vaultUuid:a.vault.uuid,accountUuid:a.overview.b5AccountUUID??"",providers:i})}return r}var fv=({msg:A,userMessage:j,logRootError:e=!1})=>t=>{let r="[Save Dialog]";throw e?console.error(`${r} ${A}`,t):console.error(`${r} ${A}`),new q.LoggableError({errorClass:p`SaveItemError`,message:q.logsafe.assertLogSafe(j??A)})},i7=A=>{let[j,e,t]=A.split(":");return{itemUuid:j,vaultUuid:e,accountUuid:t}};var j2A=/^https?:\/\/1password\.com\/applauncher/i,DE=()=>{let A=H.getAccountHandlers.filter(r=>r.serveraccount.type==="B");if(A.length===0)return{enabled:!1,reason:"no_b_accounts"};let j=A.filter(r=>ZA.accountHasFlag(r.uuid,"b5x-launchpad"));if(j.length===0)return{enabled:!1,reason:"feature_disabled"};let e=y6(),t=j.filter(r=>{let a=e.getPolicyForAccount(r.uuid,"app-launcher-allowed");return!!a&&a.policyName==="app-launcher-allowed"&&a.definition.appLauncherPolicyEnabled===!0});return t.length===0?{enabled:!1,reason:"policy_disabled"}:{enabled:!0,enabledAccountUuids:t.map(r=>r.uuid)}},hoA=(A,j)=>{let e=chrome.runtime.getURL("launcher/apps.html");(vt()||ve())&&!j?.alwaysUpdateTab?(chrome.tabs.create({url:e,active:!0}),chrome.tabs.remove(A)):chrome.tabs.update(A,{url:e,active:!0})},qoA=async A=>{if(A.id===void 0||!await o2A(A))return;let j=DE(),e=!!A.url&&j2A.test(A.url);j.enabled&&e&&hoA(A.id,{alwaysUpdateTab:e})},jte=A=>!(ve()||vi()&&A.documentLifecycle!=="active"),e2A=A=>{if(!jte(A)||!n2A(A.url))return;DE().enabled&&hoA(A.tabId,{alwaysUpdateTab:!0})},t2A=async()=>{if(DE().enabled){let j=await CE();await Promise.all(j.map(async e=>{e.id&&await o2A(e)&&hoA(e.id)}))}};async function r2A(A){let{accountUuid:j,itemUuid:e}=A.data,t=(await goA(j)).find(a=>a.uuid===e);if(!t)throw Error("Vault item not found");(await UK(t,"view")).isErr()&&RE(t)}var TE=()=>{let A=DE();return A.enabled?H.getAccountHandlers.filter(j=>A.enabledAccountUuids.includes(j.uuid)):[]},a2A=()=>TE()?.[0];var n2A=A=>j2A.test(A),ete=A=>!!A&&n2A(A),o2A=async A=>A.id===void 0?!1:[await rte(A),A.url,A.pendingUrl].some(ete),tte=A=>vt()?A==="about:newtab"||A==="about:home":vi()?A==="chrome://newtab/"||A==="chrome://new-tab-page/"||A==="edge://newtab/":ve()?A==="about:blank"||A==="favorites://":A==="about:blank";async function i2A(A){await hv(WA().appLauncherLaunchAppsInNewTab?void 0:await st(),A.data)}var rte=async A=>{if(A.id!==void 0&&A.url&&tte(A.url)){let j=new Promise(t=>setTimeout(()=>t(null),1e3)),e=await Promise.race([lj("get-frame-url",void 0,{tabId:A.id,frameId:0}),j]);return e&&e.ok?e.data:void 0}};var s2A=async({xamEnabledAccounts:A,syncInvocation:j,unlockAccount:e})=>{let t=A.filter(l=>l.isUnlocked&&l.client?.isSignedIn()),r=t.map(l=>l.uuid),a=A.filter(l=>l.isLocked).map(l=>l.uuid),n=await j({unlockedAccountUuids:r});if(n.shouldUnlockUuids.length===0)return{xamEnabledUnlockedAccountUuids:r,xamEnabledLockedAccountUuids:a};let o=t.filter(l=>n.shouldUnlockUuids.includes(l.uuid));o.length===0&&console.warn(`${p6} [] failed to identify any accounts to unlock in the XAM module`);let i=o.map(async l=>await e(l));return(await Promise.all(i)).some(l=>l===!1)&&console.warn(`${p6} [] some accounts failed to unlock in the XAM module after sync`),{xamEnabledUnlockedAccountUuids:r,xamEnabledLockedAccountUuids:a}};var p6="XAM:",nte=A=>{switch(A.type){case"VaultItemsUpdated":case"ManagedCredentialsUpdated":return A.content.id.accountUuid;case"TrelicaCatalogAppsUpdated":case"AccountExpired":case"PinsAndShortcutsChanged":return A.content.accountUuid;case"XamPlatform":return A.content.content.content.accountUuid;default:te(A)}},xoA=class{isReadyPromise;isReadyResolver;isReadyRejecter;sender;_initState;initInFlight=!1;synchronizing=!1;_accounts;constructor(){this.sender=void 0,this.isReadyPromise=new Promise((j,e)=>{this.isReadyResolver=j,this.isReadyRejecter=e}),this._initState="not_initialized",this._accounts=[]}async createDelegatedRequest(j){if(j.serveraccount.type!=="B"){console.error(`${p6} [${j.uuid}] not supported for individual or family accounts`);return}if(!j.context){console.error(`${p6} [${j.uuid}] no context for account uuid. Is the account unlocked?`);return}let e=j.user?.uuid;if(!e){console.error(`${p6} [${j.uuid}] no user UUID found, cannot unlock the account`);return}let t=aq();try{await j.waitForClient()}catch{console.error(`${p6} [${j.uuid}] no client available, cannot unlock the account`);return}let r=await j.client?.getDelegateSessionInit(t);if(!r){console.error(`${p6} [${j.uuid}] failed to create delegated session`);return}return{clientAuth:{userUuid:j.user?.uuid||"",accountUuid:j.uuid,notifierUrl:r?.serverConfig.notifier,baseUrl:j.serveraccount.signinAddress,deviceUuid:t.uuid,sessionId:r.sessionKey.kid,jwk:JSON.stringify(r.sessionKey),opUserAgent:Ff(j.context.config.opua,await cp())},userUuid:e}}get initState(){return this._initState}async onUnlock(j){let e=await this.createDelegatedRequest(j);if(!e)return!1;let{clientAuth:t,userUuid:r}=e,a=await j.masterKey?.exportJwk();if(a)try{if(await this.invoke("Unlock",{jwk:JSON.stringify(a),accountAndUserUuid:{accountUuid:j.uuid,userUuid:r},session:t}))return console.info(`${p6} [${j.uuid}] successfully completed full unlock and authentication`),!0;console.error(`${p6} [${j.uuid}] failed to unlock`)}catch(n){console.error(`${p6} [${j.uuid}] encountered an error while unlocking`,n)}else console.error(`${p6} [${j.uuid}] no key available, cannot unlock`);return!1}async handleDbUpdates(j){await this.invoke("DatabaseEvents",j)}get isSyncing(){return!!this.synchronizing}async syncAppLauncherAccountState(){if(this.initState==="initialized")return this.synchronizing||(this.synchronizing=(async()=>{let j;try{`${p6}`,await this.invoke("SyncAccountSignInState",void 0);let e=TE();j=await s2A({xamEnabledAccounts:e,syncInvocation:async a=>await this.invoke("SyncAccountState",a),unlockAccount:async a=>this.onUnlock(a)}),j&&(this.updateAccounts(j),lj("xam-backend-account-state-synced",this.accounts));return}finally{if(this.synchronizing=!1,j){let e=j.xamEnabledLockedAccountUuids.length,t=j.xamEnabledUnlockedAccountUuids.length;`${p6}${t}${e}`}else console.warn(`${p6} [] account sync failed`)}})()),this.synchronizing}async initInner(){if(!fD())return console.error(`${p6} [] \u26D4 WebAssembly.instantiate not found. Is WebAssembly supported by your browser and enabled?`),this._initState="wasm_not_supported",this.isReadyRejecter?.(void 0),this._initState;if(this.sender!==void 0)return this._initState="initialized",this.isReadyResolver?.(),this._initState;try{jA.ensureWasmIsInitialized()}catch{throw new q.LoggableError({errorClass:p`InitializationError`,message:p`Attempted to initialized XAM WASM module before extension core ready`})}try{console.info(`${p6} [] initializing module`),await Z5A(A2A),this.sender=await W5A({level:"Info",trelicaDatabaseName:null},j=>{let e=nte(j);switch(`${p6}${e}${j.type}`,j.type){case"TrelicaCatalogAppsUpdated":{lj("xam-trelica-catalog-apps-updated",j);break}case"VaultItemsUpdated":{lj("xam-vault-items-updated",j);break}case"ManagedCredentialsUpdated":{lj("xam-managed-credentials-updated",j);break}case"AccountExpired":{this.reInitDelegatedSession(j.content);break}case"PinsAndShortcutsChanged":{lj("pins-and-shortcuts-changed",j.content);break}case"XamPlatform":break;default:te(j)}}),console.info(`${p6} [] module has fully initialized`),this.isReadyResolver?.(),this._initState="initialized",lj("xam-backend-initialized",void 0)}catch(j){console.error(`${p6} [] module failed to initialize`,j),this.isReadyRejecter?.(j),this._initState="failed_to_initialize"}return this._initState}async reInitDelegatedSession({accountUuid:j}){let e=TE().find(r=>r.uuid===j&&r.isUnlocked&&r.client?.isSignedIn());if(!e){console.error(`${p6} [${j}] no unlocked account cannot reinitialize a delegated session`);return}let t=await this.createDelegatedRequest(e);if(!t){console.error(`${p6} [${j}] failed to re-create a delegated session`);return}await this.invoke("ReloadDelegatedSession",{unlockedAccount:j,session:t.clientAuth})}async init(){return this.initInFlight||(this.initInFlight=(async()=>{try{return await this.initInner()}finally{this.initInFlight=!1}})()),this.initInFlight}async invokePlatform(j,e){try{let t=await this.invoke("XamPlatform",{type:j,content:e});return Pj(t.content)}catch(t){return console.error(`${p6} [] internal error`,t),OA({e:t})}}async invoke(j,e){return await this.isReadyPromise,new Promise((t,r)=>{if(!this.sender){r("XAM sender not available, cannot invoke");return}this.sender.sendCallback({type:j,content:e},a=>{switch(a.type){case"Success":{let n=a.content;if(n.type!==j){r(`Mismatched response type: ${n.type} !== ${j}`);return}t(n.content);break}case"Failure":{r(a.content);break}default:return te(a)}})})}updateAccounts(j){let e=TE(),t=CMA(e,j);this._accounts=t}get accounts(){return this._accounts}lockAll(){this.invoke("Lock",void 0).then(j=>{if(j){let t={xamEnabledLockedAccountUuids:TE().map(r=>r.uuid),xamEnabledUnlockedAccountUuids:[]};this.updateAccounts(t),lj("xam-backend-account-state-synced",this.accounts)}})}},lt=new xoA;var Gr=class extends xe{constructor(j){let e={errorClass:TCA,...j,tags:{...j.tags,owner:W(gG.ManagedCredentials)}};super(e)}};var l2A=async A=>{if(!A.CTX)throw new Gr({message:p`Client CTX does not exist when attempting to get admin group keys.`,metaData:A.accountUUID?{account:{accountUuid:W(A.accountUUID)}}:void 0});if((await A.getGroups({types:"AR"}).then(e=>e.map(t=>t.uuid)).catch(e=>{throw Mn(e,()=>new Gr({message:p`Failed to get admin groups.`,metaData:A.accountUUID?{account:{accountUuid:W(A.accountUUID)}}:void 0}))})).length===0)throw new Gr({message:p`No admin or recovery groups could be found.`,metaData:A.accountUUID?{account:{accountUuid:W(A.accountUUID)}}:void 0});try{let e=await A.getGroups({types:"AR"});return await A.getGroupPubKeys(e.map(t=>t.uuid))}catch(e){throw Mn(e,()=>new Gr({message:p`Failed to get admin group keys`,metaData:A.accountUUID?{account:{accountUuid:W(A.accountUUID)}}:void 0}))}};var c2A=(A,j)=>{let e=ote(j);return A.reduce((t,r)=>{let a=ite(e,r);return a.length>0?[...t,{policies:a,item:r}]:t},[])},ote=A=>A.reduce((j,e)=>{let t=e.urls.reduce((r,a)=>{let n=$x(a)?.hostname;return n?r.push(n):rj(new Gr({message:aj.assertLogSafe(`Failed to parse managed credential policy url. Policy uuid: ${e.uuid}, Account uuid: ${e.accountUuid}`)})),r},[]);for(let r of t){let a=j.get(r);a?a.push(e):j.set(r,[e])}return j},new Map),ite=(A,j)=>{let e=j.overview.URLs??[];return e.length===0?[]:e.reduce((t,r)=>{let a=$x(r.u)?.hostname;if(a){let n=A.get(a);n&&(t=[...t,...n])}return t},[])},d2A=async(A,j)=>{let e=[];for(let{policies:t,item:r}of A){let a=await j(wm(r)),n=a?.username?.value;if(n)for(let o of t)o.usernames.includes(n)&&e.push({policy:o,item:a})}return e};var VK=async(A,j)=>{let e=[...j.accessors].sort((t,r)=>t.acl.includes(pc.Manage)&&!r.acl.includes(pc.Manage)?-1:!t.acl.includes(pc.Manage)&&r.acl.includes(pc.Manage)?1:0);for(let t of e){let r=Y6(A,t.encryptedBy);if(!r)continue;let a=await ste(r,t.encItemKey),n=t.acl.includes(pc.Manage)?xA.vaultACL.ALL:xA.vaultACL.ReadItem;return{key:a,acl:n}}},ste=async(A,j)=>{if(A.uuid!==j.kid)throw new Gr({message:p`Accessor keyset UUID does not match item key enc UUID`});return new Lf().decryptWithKeyset(A,j)},k2A=async(A,j)=>{if(!j?.activeKeyset){console.error("findAndUploadManagedCredentials","No active keyset available");return}let e=await WB.fromActiveKeyset(j.activeKeyset);return Promise.all(A.map(async t=>await e.decrypt(t.encData)))};var lte=A=>A.designation==="username"||A.designation==="password",u2A=A=>{let j=A.sections.flatMap(e=>e.fields??[]).find(kA.isTotpField);return{sections:j?[{name:"add more",title:"",fields:[j]}]:[],fields:A.fields?.filter(lte),passkey:A.passkey}};var voA=(A,j)=>({ainfo:j.ainfo,title:j.title,URLs:j.URLs,url:j.url,passkey:j.passkey,ps:j.ps,pbe:j.pbe,pgrng:j.pgrng,watchtowerExclusions:A==="update"?j.watchtowerExclusions:void 0});var E2A=async(A,j,e)=>Promise.all(A.map(async t=>{let{item:r,policy:a}=t,n=new S6.ManagedCredentialKey;await n.generate().catch(l=>{throw Mn(l,()=>new Gr({message:p`Unable to generate managed credential key.`,userUuid:W(e)}))});let o=voA("create",r.overview),i=u2A(r.details),s=await Promise.all(j.map(async l=>{let c=await new xA.RSAPublicKey("").import(l.pubKey).catch(u=>{throw Mn(u,()=>new Gr({message:p`Unable to import admin group public key.`,userUuid:W(e)}))}),k=await n.wrapWithKey(c).catch(u=>{throw Mn(u,()=>new Gr({message:p`Unable to wrap public key with managed credential key.`,userUuid:W(e)}))});return{accessorUuid:l.uuid,encItemKey:k,encryptedBy:c.uuid,acl:[pc.Manage],accessorType:Sf.Group}}));return n.encryptCreate({b5Uuid:Se(),accessors:s,creatorUuid:e,overview:o,details:i,encryptedBy:n.uuid,policyUuid:a.uuid,source:{itemUuid:r.uuid,vaultUuid:r.vault.uuid,itemVersion:r.itemVersion},templateUuid:r.templateUuid??"001"}).catch(l=>{throw Mn(l,()=>new Gr({message:p`Unable to encrypt a create managed credential.`,userUuid:W(e)}))})})),p2A=async(A,j,e)=>{let t={templateUuid:A.templateUuid||Je,overview:voA("update",A.overview),details:A.details,b5Uuid:A.uuid,changerUuid:e};return j.encryptUpdated(t).catch(r=>{throw Mn(r,()=>new Gr({message:p`Unable to encrypt an update managed credential.`,userUuid:W(e)}))})};async function E8(A,j,e,t){let r=await ma.vaultItemFromAPI(j,A);return r.overview.b5AccountUUID=e,r.localId=j.id,r.vault=A,r.urlToNakedDomains=GoA(r,t),r}function GoA(A,j){if(A.overview.URLs){let e=A.overview.URLs.map(r=>({url:r.u,nakedDomain:j.get(r.u)})),t={};for(let{url:r,nakedDomain:a}of e)t[r]=a;return t}return A.urlToNakedDomains}var foA=(A,j,e)=>{let t=H.findAccountHandlerByUuid(j);if(!t)throw new Gr({message:p`Account handler did not exist when converting managed credential to vault item.`});let r=new kA(A,void 0,e.b5Uuid);return r.details=e.details,r.localId=crypto.getRandomValues(new Uint32Array(1))[0],r.overview={...r.overview,...e.overview},r.overview.b5AccountUUID=j,r.templateUuid=Je,r.urlToNakedDomains=GoA(r,t.getNakedDomainCache),r.vault=A,r.itemVersion=e.version,r};var m2A=async(A,j)=>{if(!ZA.accountHasFlag(A,"managed-credentials"))return;let t=await SA.getDatabase().getManagedCredentialsForAccount(A).catch(i=>{throw Mn(i,()=>new Gr({message:p`Unable to get managed credentials from database.`,metaData:{account:{accountUuid:W(A)}}}))});if(t.length===0)return;let r=`${TaA}${A}`.slice(0,26);if(!t6(e6.uuid,r))throw new Gr({message:p`Generated UUID was not 26 characters`,metaData:{account:{accountUuid:W(A)}}});let a=new sj({uuid:r,name:oA("Managed Credentials"),type:sj.TypeUserCreated,desc:""});a.localId=globalThis.crypto.getRandomValues(new Uint32Array(1))[0];let n=xA.vaultACL.ReadItem,o=await Promise.all(t.map(async i=>{let s=await VK(j,i);if(!s){console.warn("Unable to get response from getManagedCredentialKey when fetching overviews.");return}s.acl>n&&(n=s.acl);let l=await s.key.decrypt(i);return foA(a,A,{...l,details:{sections:[]}})}));return a.setCombinedAcl(n),{items:o.filter(i=>!!i),vault:a}},B2A=async(A,j,e,t)=>{if(!ZA.accountHasFlag(A,"managed-credentials"))return;let a=await SA.getDatabase().getManagedCredential(A,t.data.uuid).catch(i=>{throw Mn(i,()=>new Gr({message:p`Unable to get managed credential from database.`,metaData:{account:{accountUuid:W(A)}}}))});if(!a)return;let n=await VK(j,a);if(!n)return;let o=await n.key.decrypt(a);return foA(e,A,o)};async function cte(A){await SA.getDatabase().replaceManagedCredentialsPolicies(void 0,A.serveraccount,[])}var XK=async A=>{let j=new rt(`Managed Credentials (${A.serveraccount.uuid})`);if(!ZA.accountHasFlag(A.serveraccount.uuid,"managed-credentials-uplift-kill-switch")){j.debug("Not searching for credentials because the feature flag is disabled.");return}if(A.client?.CTX?.user?.state==="P"){j.debug("Not searching for credentials because the user is unconfirmed.");return}if(j.debug("Searching for managed credentials."),!A.client)throw new Gr({severityLevel:A.isLocked?"warning":"error",message:A.isLocked?p`Account is locked, client expected to be uninitialized`:p`Client is not initialized`,metaData:{account:{accountUuid:W(A.uuid)}}});if(!A.user)throw new Gr({severityLevel:A.isLocked?"warning":"error",message:A.isLocked?p`Account is locked, user handler expected to be uninitialized`:p`No user on account handler`,metaData:{account:{accountUuid:W(A.uuid)}}});let e=await SA.getDatabase().getManagedCredentialsPolicies(A.uuid);if(e.length===0){j.debug("No policies.");return}if(lt.initState!=="initialized"){console.warn("Unable to uplift managed credentials: XAM module not initialized");return}if(!await lt.invoke("VerifyAccountDomain",A.serveraccount.email))throw new Gr({severityLevel:"error",message:p`Domain validation failed for uplift`,metaData:{account:{accountUuid:W(A.uuid)}}});if(await zj.loadItemCache(),!A.items||A.items.length===0){j.debug("No items on account handler.");return}let r=A.items.filter(ie.combine(ie.logins,ie.active,c=>!si(c)));if(r.length===0)return;let a=await k2A(e,A.client.CTX?.user).catch(async c=>(j.warn("Could not decrypt local managed credential policies.",c),await cte(A).catch(k=>{j.error("Failed to clear managed credential policies.")}),[]));if(!a||a.length===0)return;let n=c2A(r,a);if(n.length===0)return;j.debug(`Found ${n.length} candidate(s).`);let o=await d2A(n,A.getItem);if(o.length===0)return;j.debug(`Found ${o.length} managed credential(s) for upload.`);let i=A.user.uuid;if(!i){j.warn("No user on the account handler when uplifting managed credentials.");return}let s=await l2A(A.client),l=await E2A(o,s,i);j.debug(`Creating ${l.length} credentials to upload.`);try{A.client.createManagedCredentials(l)}catch(c){let k=q.errors.isServerError(c)||q.errors.isClientError(c)?`${c.name} + ${c.code}`:"unknown error";en(c,q.logsafe.assertLogSafe(`Error (error: ${k}) while uploading managed credentials.`),q.logsafe.assertLogSafe(A.uuid),{owner:W(gG.ManagedCredentials)})}};async function g2A(A,j){if(!A.client)throw new Gr({message:p`Unable to encrypt managed credentials policies. Account handler client is not available`,userUuid:A.user?.uuid?W(A.user.uuid):void 0});let e=A.client.CTX?.user?.activeKeyset;if(!e)throw new Gr({message:p`Unable to sync managed credentials policies. No active keyset.`,userUuid:A.user?.uuid?W(A.user.uuid):void 0});let t=await S6.ManagedCredentialPolicyKey.fromActiveKeyset(e);return await Promise.all(j.map(async a=>{let n=await t.encrypt(a);return{uuid:a.uuid,accountUuid:A.serveraccount.uuid,encData:n}}))}async function h2A(A,j,e){let t=A.user()?.uuid;if(!t)throw new Gr({message:p`No user id`,metaData:{account:{accountUuid:W(j)}}});if(!A.CTX)throw new Gr({message:p`Missing client context`,userUuid:W(t),metaData:{account:{accountUuid:W(j)}}});let r=await SA.getDatabase().getManagedCredential(j,e.uuid);if(!r)throw new Gr({message:p`No managed credential found for save item`,userUuid:W(t)});let a=await VK(A.CTX,r);if(!a)throw new Gr({message:p`No item encryption key could be looked up for managed credential`,userUuid:W(t)});await A.updateManagedCredential(await p2A(e,a.key,t))}var JK=[{name:"Remove Privacy.com API Key",func:q2A},{name:"View Brex Informatation",func:x2A},{name:"Clear DSecrets for 2FA",func:v2A},{name:"Trigger Managed Credential Uplift",func:ute},{name:"Test TrustLog",func:Ete}];async function q2A(){let A=[],j=new Map;for(let e of H.getAccountHandlers){let t=await e.getSystemVault();!e.isLocked&&t&&j.set(t.uuid,e.serveraccount.uuid)}for(let e of await xnA()){let t=j.get(e.vault.uuid);e.state=kA.ItemState.Archived;let r=new Promise(a=>void Da(e,!1,t,a));A.push(r)}await Promise.all(A)}async function dte(A){let j=H.findAccountHandlerByUuid(A);if(!j)throw new Error("Unable to find account handler for accountUuid in getBrexTokens");try{if(!j.isLocked&&j._vaults)return(await j.loadSystemVaultItems()).filter(t=>t.templateUuid==="800"&&t.overview.integration==="brex"&&t.state===xA.VaultItem.ItemState.Active)}catch(e){Ze(e)?rj(e):rj(new q.LoggableError({errorClass:p`BrexError`,message:p`Failed to get Brex tokens`,stackOverrideError:e instanceof Error?e:void 0}))}return[]}async function x2A(){}function v2A(){H.getAccountHandlers.forEach(async A=>{await H.updateAccount(A.serveraccount.uuid,{dSecret:void 0}).catch(()=>console.error(`Unable to clear dSecret for account ${A.serveraccount.uuid}`))})}var kte=(A,j={})=>{let e=[];return chrome.tabs.query(j,t=>t.forEach(r=>{if(!r.id){console.warn("Unable to send notification to tab:",r);return}la(r.id,{type:A}).then(()=>e.push(r))})),e};async function ute(){for(let A of H.getAccountHandlers)await XK(A)}async function Ete(){for(let A of H.getAccountHandlers){let j=A.client?.CTX;if(j){console.info("Getting trust log");let e=await Fc.getInstanceForAccount(j);if(e){console.info("Getting bookmark");let r=(await A.client.getGroups({types:"AR"})).map(a=>a.uuid);try{await e.fastForward();let a=await e.getGroups(r);console.info("keySets",a)}catch(a){console.error("Failed to get groups ",a)}}}}}var Hm=(u=>(u[u.unknownError=0]="unknownError",u[u.noAgentFound=1]="noAgentFound",u[u.notRegistered=2]="notRegistered",u[u.registeredDeviceMismatch=3]="registeredDeviceMismatch",u[u.reauthenticationFailed=4]="reauthenticationFailed",u[u.authenticationExpired=5]="authenticationExpired",u[u.authenticationRejected=6]="authenticationRejected",u[u.authenticationUnavailable=7]="authenticationUnavailable",u[u.logicError=8]="logicError",u[u.decryptionFailure=9]="decryptionFailure",u[u.rngFailure=10]="rngFailure",u[u.invalidResponse=11]="invalidResponse",u[u.decodingFailure=12]="decodingFailure",u))(Hm||{});(r=>(r.code=a=>W(r[a]),r.loggableError=(a,n)=>new xe({...n??{},errorClass:p`KolideClient: ${(0,r.code)(a)}`,message:(0,r.loggable)(a)}),r.loggable=a=>{switch(a){case 0:return p`Exception encountered during request`;case 1:return p`No local agent responded to our request`;case 4:return p`The local agent failed to refresh our credentials`;case 5:return p`The local agent signaled we need to refresh our credentials`;case 6:return p`The local agent rejected our request due to a trust issue`;case 7:return p`Our authentication is expired but we are offline and unable to refresh it`;case 8:return p`Internal logic error`;case 9:return p`Decryption failure`;case 12:return p`Decoding failure`;case 10:return p`Random number generation failure`;case 11:return p`Invalid agent response`;case 3:return p`The local agent is registered but not to the requested user's tenant`;case 2:return p`The local agent is not registered with the Kolide server`;default:te(a)}},r.highestPriority=(a,n)=>a&&a>n?a:n))(Hm||={});var p8={};er(p8,{AuthenticatedEndPoint:()=>yoA,EndPoint:()=>boA,RequestMethod:()=>pte});var boA=(j=>(j.DeviceHealth="/zta",j))(boA||{}),pte={"/zta":"GET"},yoA=(j=>(j.DeviceHealth="/v3/dt4a",j))(yoA||{});var Fv=J(Xn());var Ge=J(tA()),Mm=A=>W(n$.reportFailure(A).join(", ")),m8=Ge.readonly(Ge.type({url:Ge.string,required_params:Ge.union([Ge.array(Ge.string),Ge.undefined]),http_verb:Ge.string,authorization:Ge.string}),"Action"),G2A=Ge.readonly(Ge.union([Ge.literal("will_block"),Ge.literal("blocked"),Ge.literal("notify"),Ge.literal("good")]),"StatusTypes"),mte=Ge.readonly(Ge.type({blocked_at:Ge.union([Ge.string,Ge.null]),hardware_image_url:Ge.string,id:Ge.number,name:Ge.string,registered:Ge.boolean,registration_blocked:Ge.boolean,registered_owner_email:Ge.union([Ge.string,Ge.null]),status:G2A}),"Device"),Bte=Ge.type({end_user_url:Ge.string,icon_url:Ge.string,snoozable:Ge.boolean,status:G2A,title:Ge.string,id:Ge.number,blocks_device_at:Ge.union([Ge.string,Ge.null])},"CheckStatus"),gte=Ge.type({about_kolide_url:Ge.union([Ge.string,Ge.null]),recheck_all_issues_url:Ge.union([Ge.string,Ge.null]),register_device_url:Ge.union([Ge.string,Ge.null]),view_details_url:Ge.union([Ge.string,Ge.null])},"KolideUrlContent"),hte=Ge.partial({clear_snoozes:m8},"DebugActionsAPI"),qte=Ge.type({hint:m8,snooze:Ge.union([m8,Ge.undefined]),recheck:m8,register:m8},"ActionsAPI"),xte=Ge.type({actions:qte,device:mte,failing_checks:Ge.array(Bte),generated_at:Ge.string,urls:gte},"ProdDeviceHealth"),B8=Ge.intersection([xte,Ge.partial({debug_actions:hte})],"AllDeviceHealth");var Km={};er(Km,{CheckedDevice:()=>ZK,EndPoint:()=>WK,ErrorResponse:()=>$oA,ForceSuccess:()=>QK,GetRecheckUrlResponse:()=>YK,Hinted:()=>AN});var gr=J(tA());var WK=(n=>(n.HintDevice="POST/dt4a/hints",n.StartRecheck="POST/dt4a/rechecks",n.PollRecheck="GET/dt4a/rechecks/:id",n.ForceSuccess="POST/dt4a/snoozes",n.Unsafe_ClearForcedSuccess="DELETE/dt4a/snoozes",n.RegisterDevice="POST/dt4a/registrations",n))(WK||{}),QK=gr.readonly(gr.type({success:gr.literal(!0),dt4a:B8})),YK=gr.readonly(gr.type({success:gr.boolean,recheck_id:gr.string,recheck_url:gr.string})),ZK=gr.readonly(gr.type({id:gr.string,status:gr.union([gr.literal("pending"),gr.literal("completed"),gr.literal("errored")]),resolved:gr.boolean,check_ids:gr.array(gr.number),device_id:gr.number,created_at:gr.string,completed_at:gr.union([gr.string,gr.null]),dt4a:B8})),AN=gr.readonly(gr.type({success:gr.boolean})),$oA=gr.readonly(gr.type({error:gr.string,user_error:gr.union([gr.string,gr.undefined])}));var a0=A=>{if(!A)return console.warn("KolideClient: no health data to decode"),{success:!1,code:"no-decode-required",reason:p`no health data to decode`};let j=B8.decode(A);return(0,Fv.isRight)(j)?{success:!0,value:j.right}:(console.error("KolideClient: could not decode device health data, reason:",Mm(j.left).str),{success:!1,code:"decode-failed",reason:Mm(j.left)})};function Gte(A){return QK.is(A)}function fte(A){return YK.is(A)}function Fte(A){return AN.is(A)}function bte(A){return ZK.is(A)}var f2A=(A,j)=>{if(!A)return console.warn(`KolideClient: no data to decode for endpoint: ${j}`),{success:!1,code:"no-decode-required",reason:p`no health data to decode for endpoint: ${W(j)}`};switch(j){case"POST/dt4a/snoozes":{let e=QK.decode(A);if((0,Fv.isRight)(e)){let t=e.right;return Gte(t)?{success:!0,value:t}:(console.warn(`KolideClient: response did not match expected structure for ${j}`),{success:!1,code:"decode-failed",reason:p`response did not match expected structure for ${W(j)}`})}return{success:!1,code:"decode-failed",reason:p`could not decode ${W(j)}: ${Mm(e.left)}`}}case"POST/dt4a/rechecks":{let e=YK.decode(A);if((0,Fv.isRight)(e)){let t=e.right;return fte(t)?{success:!0,value:t}:(console.warn(`KolideClient: response did not match expected structure for ${j}`),{success:!1,code:"decode-failed",reason:p`response did not match expected structure for ${W(j)}`})}return{success:!1,code:"decode-failed",reason:p`could not decode ${W(j)}: ${Mm(e.left)}`}}case"POST/dt4a/hints":{let e=AN.decode(A);if((0,Fv.isRight)(e)){let t=e.right;return Fte(t)?{success:!0,value:t}:(console.warn(`KolideClient: response did not match expected structure for ${j}`),{success:!1,code:"decode-failed",reason:p`response did not match expected structure for ${W(j)}`})}return{success:!1,code:"decode-failed",reason:p`could not decode ${W(j)}: ${Mm(e.left)}`}}case"GET/dt4a/rechecks/:id":{let e=ZK.decode(A);if((0,Fv.isRight)(e)){let t=e.right;return bte(t)?{success:!0,value:t}:(console.warn(`KolideClient: response did not match expected structure for ${j}`),{success:!1,code:"decode-failed",reason:p`response did not match expected structure for ${W(j)}`})}return{success:!1,code:"decode-failed",reason:p`could not decode ${W(j)}: ${Mm(e.left)}`}}default:return console.warn(`KolideClient: unsupported endpoint: ${j}`),{success:!1,code:"decode-failed",reason:p`unsupported endpoint: ${W(j)}`}}},F2A=A=>{if(A&&typeof A=="object"&&!("error"in A))return{success:!1,code:"no-decode-required",reason:p`no error to decode`};let j=$oA.decode(A);return(0,Fv.isRight)(j)?{success:!0,value:j.right}:(console.error(`Could not decode error response: ${Mm(j.left).str}`),{success:!1,code:"decode-failed",reason:p`could not decode error: ${Mm(j.left)}`})};var b2A={actions:{hint:{authorization:"eyJfcmFpbHMiOnsiZGF0YSI6NjEwNDg5LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJkZXZpY2UvZHQ0YSJ9fQ--1542400eec20daed87605662b04d648429abde80bbd7a42457ebfa8f277e7750",http_verb:"POST",required_params:["domain"],url:"https://api.kolide.com/dt4a/hints"},recheck:{authorization:"eyJfcmFpbHMiOnsiZGF0YSI6NjEwNDg5LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJkZXZpY2UvZHQ0YSJ9fQ--1542400eec20daed87605662b04d648429abde80bbd7a42457ebfa8f277e7750",http_verb:"POST",required_params:["check_id"],url:"https://api.kolide.com/dt4a/rechecks"},snooze:{authorization:"eyJfcmFpbHMiOnsiZGF0YSI6NjEwNDg5LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNloiLCJwdXIiOiJkZXZpY2UvZHQ0YSJ9fQ--066ac947dbd93e3d92bdc6b43708c0cba59cc9d3bddb79a6c7ba03f74b9110c9",http_verb:"POST",required_params:["check_id"],url:"https://api.kolide.com/dt4a/snoozes"},register:{authorization:"eyJfcmFpbHMiOnsiZGF0YSI6NjEwNDg5LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNloiLCJwdXIiOiJkZXZpY2UvZHQ0YSJ9fQ--066ac947dbd93e3d92bdc6b43708c0cba59cc9d3bddb79a6c7ba03f74b9110c9",http_verb:"POST",required_params:["token"],url:"https://api.kolide.com/dt4a/registrations"}},device:{blocked_at:"2025-02-12T23:09:02.097Z",hardware_image_url:"https://assets1.kolide.com/assets/inventory/devices/apple-0e77c6e9.png",id:610489,name:"Test-User-Virtual-Machine",registered_owner_email:"test_user@agilebits.com",status:"blocked",registered:!0,registration_blocked:!1},failing_checks:[{end_user_url:"https://k2.kolide.com/1/my/devices/610489/checks/10?speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjM4NVoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--65f4f534d2e5a9a2f4517ccf043478e8e792e0e9469ecd219037d5d77b572d6c",icon_url:"https://k2.kolide.com/rails/active_storage/representations/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NzIxODA0LCJwdXIiOiJibG9iX2lkIn19--64cc0ceafa833e6ee7b57740f90726f4f6191412/eyJfcmFpbHMiOnsiZGF0YSI6eyJmb3JtYXQiOiJwbmciLCJyZXNpemVfdG9fbGltaXQiOlszMDAsMzAwXX0sInB1ciI6InZhcmlhdGlvbiJ9fQ==--eeb05c9033f94fc36504417ffae11afb92488a6a/macos-sharing.png",snoozable:!0,status:"blocked",title:"File Sharing Is Not Disabled",id:1,blocks_device_at:"2025-02-12T23:09:02.097Z"},{end_user_url:"https://k2.kolide.com/1/my/devices/610489/checks/75237?speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQwMFoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--fb15f5c233cf2d4d1766c2775835e569bb6223c4ed8ed8e1ed9e8c3b6247712b",icon_url:"https://k2.kolide.com/rails/active_storage/representations/proxy/eyJfcmFpbHMiOnsiZGF0YSI6NzIxODAwLCJwdXIiOiJibG9iX2lkIn19--ca964d91c427d60af67431a9dcfbf9a9e238a886/eyJfcmFpbHMiOnsiZGF0YSI6eyJmb3JtYXQiOiJwbmciLCJyZXNpemVfdG9fbGltaXQiOlszMDAsMzAwXX0sInB1ciI6InZhcmlhdGlvbiJ9fQ==--eeb05c9033f94fc36504417ffae11afb92488a6a/macos-screenlock.png",snoozable:!0,status:"blocked",title:"Screen Lock Is Not Configured Securely",id:2,blocks_device_at:"2025-02-12T23:09:02.097Z"},{end_user_url:"https://k2.kolide.com/1/my/devices/610489/checks/75659?speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--8c542f3f24ea2211681ebccd52d4f2b74b5ea71fe6def0c8a622dcfe01c7c09c",icon_url:"https://k2.kolide.com/rails/active_storage/representations/proxy/eyJfcmFpbHMiOnsiZGF0YSI6ODMzNDgxLCJwdXIiOiJibG9iX2lkIn19--0c3580b333aa73c1ca2fbb736b9b0122d6c34f64/eyJfcmFpbHMiOnsiZGF0YSI6eyJmb3JtYXQiOiJwbmciLCJyZXNpemVfdG9fbGltaXQiOlszMDAsMzAwXX0sInB1ciI6InZhcmlhdGlvbiJ9fQ==--eeb05c9033f94fc36504417ffae11afb92488a6a/google_chrome.png",snoozable:!1,status:"will_block",title:"Chrome Browser Is Not Up-to-date",id:3,blocks_device_at:"2025-02-14T23:09:02.097Z"}],generated_at:"2025-02-19T21:07:59.416Z",urls:{about_kolide_url:"https://www.kolide.com/docs/users",recheck_all_issues_url:"https://app.kolide.com/1/my/devices?refresh=true&speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--8c542f3f24ea2211681ebccd52d4f2b74b5ea71fe6def0c8a622dcfe01c7c09c",register_device_url:"https://auth.kolide.com/device/registrations/menu_bar/ingress?message=eyJfcmFpbHMiOnsiZGF0YSI6eyJkZXZpY2VfaWQiOjYxMDQ4OSwib3JnYW5pemF0aW9uX2lkIjoxfSwicHVyIjoiZGV2aWNlX3JlZ2lzdHJhdGlvbiJ9fQ%3D%3D--0359eb7d407c1999818056245b0da23177aa2db3&organization_id=1",view_details_url:"https://app.kolide.com/1/my/devices?speakeasy_code=eyJfcmFpbHMiOnsiZGF0YSI6NjE0NTg4LCJleHAiOiIyMDI1LTAyLTIwVDA1OjA3OjU5LjQxNVoiLCJwdXIiOiJwZXJzb24vc3BlYWtlYXN5In19--8c542f3f24ea2211681ebccd52d4f2b74b5ea71fe6def0c8a622dcfe01c7c09c"}},uCt={"/zta":b2A},y2A={"/v3/dt4a":b2A};var yte=60*60*1e3,$te=no.fromThrowable(async(...A)=>fetch(...A),()=>1),wte=no.fromThrowable(async A=>A.json(),()=>(console.error("KolideClient: Invalid Json response, assuming some other process has the port"),1)),Ite=Od.fromThrowable((...A)=>jA.lessSafeOpenNaCl(...A),()=>(console.error("KolideClient: Agent response failed to decrypt"),9)),Pte=no.fromThrowable(async A=>new xA.SigningKeyPair(A).generate(A),()=>10),Ote=no.fromThrowable(async()=>Promise.resolve(jA.generateX25519Key()),()=>(console.error("KolideClient: Agent response failed to decrypt"),10)),Rte=Od.fromThrowable((...A)=>jA.p256Sign(...A),()=>(console.error("KolideClient: Failed to sign P256"),8)),Dte=no.fromThrowable(async(A,j)=>(await A.waitForClient().catch(()=>{}),A.signDeviceTrustPublicKey(j)),()=>(console.error("KolideClient: B5 sign request failed"),7));function $2A(A){let j=JSON.stringify(A),e=new TextEncoder().encode(j);return w2A(e)}function w2A(A){let j=q.bytesToBase64url(A);switch(j.length%4){case 1:return j+"===";case 2:return j+"==";case 3:return j+"=";default:return j}}function Tte(A){let j=A;return typeof j=="object"&&typeof j?.data=="string"&&typeof j?.pubKey=="string"}function Cte(A,j){let e=[...A.entries()].map(([r,a])=>({index:r,port:a}));return[...e.splice(j),...e]}var jN=class{stub;_accountsCache=[];get accountClients(){let j=this._accountsCache.filter(([t])=>H.findAccountHandlerByUuid(t.accountUUID,t.userUUID)),e=H.getAccountHandlers.filter(({accountIdentifier:t})=>j.every(([r])=>r.accountUUID!==t.accountUUID||r.userUUID!==t.userUUID)).map(({accountIdentifier:t})=>[t,new woA(t)]);return this._accountsCache=[...j,...e],this._accountsCache.map(([t,r])=>r)}constructor(j){this.stub=j?.stub??!1}async _request(j){let e=await Promise.all(this.accountClients.map(async o=>o.request({endpoint:j}))),t,r,a,n=[];for(let o of e)o.isOk()?n.push(o.value):o.error.error===Hm.highestPriority(t,o.error.error)&&(t=o.error.error,r=o.error?.accountUuid,a=o.error.reason);return n.length!==0?Pj(n[0]):!t||!a?OA({error:8,reason:p`reached impossible state`}):OA({error:t,accountUuid:r,reason:a})}async request(j){let{endpoint:e}=j,t=K6(),r=t.isEnabled()&&t.forceKolideDeviceTrustFailEnabled();return this.stub||r?(console.warn(`KolideClient: returning stubbed response from debug override - ${e}`),NH({response:y2A[e],accountUuid:"123456"})):this._request(e).catch(()=>(console.error(`KolideClient: failed to request ${e}`),OA({error:0,reason:p`unhandled exception occurred`})))}},woA=class{constructor(j){this.accountIdentifier=j}host="http://127.0.0.1";ports=[12519,40978,52115,22287,60685,22322];lastUsed=0;async request(j){let e=await this._makeRequest(j);return e.isErr()&&this._shouldRetryWithFreshCredentials(e.error)&&(console.info("KolideClient: Auth expired, clearing cache and retrying..."),await this._clearCachedCredentials(),e=await this._makeRequest(j),e.isErr()&&this._shouldRetryWithFreshCredentials(e.error))?OA({error:4,accountUuid:e.error.accountUuid,reason:p`Failed to re-authenticate after credential expiry`}):e}async _makeRequest(j){let e=await no.combine([this.generateCommunicationKeyPair(),this.maybeCachedCredentials()]);if(e.isErr())return OA({error:e.error,reason:p`authenticated client failed to get credentials`});let[t,r]=e.value,a=this.buildAuthenticatedPayload({...r,comsKey:t});if(a.isErr())return OA({error:a.error,accountUuid:r.accountUUID,reason:p`authenticated client failed to build authenticated payload`});let n=a.value,o=[];for(let{index:c,port:k}of Cte(this.ports,this.lastUsed)){let u=await this.fetchFromPort({endpoint:j.endpoint,port:k,comsKey:t,trustPayload:n});if(u.isOk()){let m=a0(u.value);if(m.success)return this.lastUsed=c,Pj({response:m.value,accountUuid:r.accountUUID});o.push({error:12,reason:m.reason,accountUuid:r.accountUUID})}else o.push({error:u.error,accountUuid:r.accountUUID,reason:p`authenticated client failed to fetchFromPort`})}let i,s,l;for(let c of o)c.error===Hm.highestPriority(i,c.error)&&(i=c.error,s=c?.accountUuid,l=c.reason);return OA({error:i,accountUuid:s,reason:l})}_shouldRetryWithFreshCredentials(j){return j.error===5||j.error===6}async _clearCachedCredentials(){try{await SA.getDatabase().clearKolideCredentialsForAccount(this.accountIdentifier)}catch(j){console.error("KolideClient: Failed to clear kolide agent credentials",j)}}generateSigningKeyPair(){return Pte(crypto.randomUUID()).andThen(j=>!j.pubKey||!j.priKey?OA(8):no.fromPromise(Promise.all([j.pubKey.exportKey(),j.priKey.exportKey()]),()=>8)).map(([j,e])=>({pubKey:j,priKey:e}))}generateCommunicationKeyPair(){let j=Od.fromThrowable(JSON.parse,()=>8);return Ote().andThen(e=>j(e.pub_jwk()).map(t=>({pubKey:t,priKey:e.less_safe_pri_key_bytes()})))}signPayload(j,e){let t=$2A(j),r=new TextEncoder().encode(t),a=JSON.stringify(e);return Rte(r,a).map(n=>({signature:w2A(n),payload:t,signedBy:e.kid}))}get accountHandler(){return H.findAccountHandlerByUuid(this.accountIdentifier.accountUUID,this.accountIdentifier.userUUID)}setupFreshCredentials(){let j=this.accountHandler;return j?no.combine([this.generateSigningKeyPair(),this.generateSigningKeyPair()]).andThen(([e,t])=>Dte(j,e.pubKey).andThen(r=>this.signPayload({publicKey:t.pubKey},e.priKey).map(a=>{let n=Date.now()+yte,{accountUUID:o,userUUID:i}=this.accountIdentifier;return{accountUUID:o,userUUID:i,localKey:t.priKey,trustChain:[r,a],freshUntil:n}}))):fb(7)}maybeCachedCredentials(){return no.fromPromise(SA.getDatabase().getKolideCredentialsForAccount(this.accountIdentifier),()=>7).andThen(j=>{if(j){if(!this.accountHandler?.hasSignedInClient)return NH(j);if(j.freshUntil>Date.now())return NH(j)}return this.setupFreshCredentials().andTee(e=>no.fromPromise(SA.getDatabase().saveKolideCredentials({note:"localKey here exclusively allows retrieving device health information from the Kolide agent installed on **this** machine. While this storage isn't as isolated as methods we use, it's sufficiently isolated to fulfill it's purpose of fingerprinting prevention and it allows checking device health while locked. If this seems interesting to you, come work with us ;)",...e}),()=>(console.error("Failed to save kolide credentials"),8))).orElse(e=>j?(console.warn("Credential refresh failed, using existing cached credentials"),Pj(j)):OA(e))})}buildAuthenticatedPayload({localKey:j,trustChain:e,comsKey:t}){return this.signPayload({publicKey:t.pubKey},j).map(r=>$2A([...e,r]))}async fetchFromPort({endpoint:j,port:e,comsKey:t,trustPayload:r}){let a=new URL(this.host);a.port=e.toString(),a.pathname=j,a.search=`?payload=${r}`;let n={"Content-type":"application/json; charset=UTF-8"};return $te(a.toString(),{headers:n}).andThen(o=>{switch(o.status){case 200:case 201:return wte(o).map(i=>[!0,i]);case 204:return Pj([!1,void 0]);case 401:return OA(5);case 403:return OA(6);default:return console.warn(`KolideClient: Unexpected response code ${o.status}, assuming some other process has the port.`),OA(1)}}).andThen(([o,i])=>o?Tte(i)?this.openNaClBox(j,t.priKey,i).andThen(s=>s?(o||console.error("KolideClient: Kolide agent replied with a 204 **and** returned data."),Pj(s)):OA(2)):(console.error("KolideClient: Unexpected response from Kolide agent, missing json content"),OA(8)):OA(3))}openNaClBox(j,e,t){let r=Od.fromThrowable(JSON.parse,()=>(console.error("KolideClient: Agent response was not valid json"),11));return Ite(q.base64urlToBytes(t.data),q.base64urlToBytes(t.pubKey),e).andThen(a=>{if(a.length===0)return Pj(void 0);let n=new TextDecoder().decode(a);return r(n)})}};var Ste=3e3,g8=class{name;fn;interval;autoStartId;running;onSuccess=void 0;onError=void 0;constructor(j,e,t=Ste,r=!1,a=0){if(this.name=j,this.fn=e,this.interval=t,Te.registerSuspensionListener(()=>this.cleanup()),!r){if(a===0){console.info(`Poller: starting '${this.name.str}' with interval ${this.interval}ms`),this._start();return}this.autoStartId=globalThis.setTimeout(()=>{console.info(`Poller: starting '${this.name.str}' with interval ${this.interval}ms`),this._start()},a)}}get isRunning(){return!!this.running}start(){if(this.autoStartId&&(console.info(`Poller: 'start' manually called for '${this.name.str}' before delay elapsed - starting early`),globalThis.clearTimeout(this.autoStartId),this.autoStartId=void 0),this.running){console.warn(`Poller: is already running for '${this.name.str}' - skipping 'start'`);return}console.info(`Poller: starting '${this.name.str}' with interval ${this.interval}ms`),this._start()}stop(){if(!this.running){console.warn(`Poller: is not running for '${this.name.str}' - ignoring 'stop'`);return}console.info(`Poller: stopping '${this.name.str}'`),this._stop()}changeInterval({interval:j,delay:e}){if(typeof e=="number"){`${this.name.str}${e}`,globalThis.setTimeout(()=>this.changeInterval({interval:j}),e);return}console.info(`Poller: changing interval for '${this.name.str}' from ${this.interval}ms to ${j}ms`),this.running&&this.stop(),this.interval=j,this._start()}addSuccessHandler(j){this.onSuccess=j}addErrorHandler(j){this.onError=j}_start(){if(this.running){console.error(`Poller: is already running for '${this.name.str}' - aborting 'stop'`);return}this.running={active:!0,id:globalThis.setTimeout(this.pollWrapper,this.interval)}}_stop(){if(!this.running){console.error(`Poller: not running for '${this.name.str}' - aborting 'stop'`);return}globalThis.clearTimeout(this.running.id),this.running=void 0}pollWrapper=async()=>{let j,e;try{j=await this.fn()}catch(t){console.error(`Poller: Error in '${this.name.str}' function:`,"<redacted>"),e=t}if(e&&this.onError)try{this.onError(e)}catch{console.error(`Poller: encountered error in onError handler for '${this.name.str}':`,"<redacted>")}if(j&&this.onSuccess)try{this.onSuccess(j)}catch{console.error(`Poller: encountered error in onSuccess handler for '${this.name.str}':`,"<redacted>")}if(!this.running){`${this.name.str}`;return}this.running={active:!0,id:globalThis.setTimeout(this.pollWrapper,this.interval)}};cleanup(){this.autoStartId&&clearTimeout(this.autoStartId),this.running&&clearTimeout(this.running.id)}};var IoA=(A,j)=>{let e=A;for(let[t,r]of Object.entries(j||{})){let a=A.indexOf(`:${t}`);if(a>0){let n=e.split("");n.splice(a,t.length+1,...r.split("")),e=n.join("")}}if(e.includes(":"))throw new xe({errorClass:p`missing-query-params`,message:p`construct path from endpoint failed`});return e.toString()},I2A=(A,j)=>{if(A.startsWith("POST")){let e=A.substring(4);return{method:"POST",path:IoA(e,j)}}if(A.startsWith("GET")){let e=A.substring(3);return{method:"GET",path:IoA(e,j)}}if(A.startsWith("DELETE")){let e=A.substring(6);return{method:"DELETE",path:IoA(e,j)}}throw new xe({errorClass:p`unsupported-method-type`,message:p`could not parse endpoint - encountered unsupported format`})};var eN=class{host="https://api.kolide.com";constructor(){}async request(j){let{endpoint:e,body:t,headers:r,pathParams:a}=j,{method:n,path:o}=I2A(e,a),i=this.host+o,s;try{s=t?JSON.stringify(t):void 0}catch{return{type:"failure",message:p`failed to request ${W(e)}: could not serialize request body`,code:W("serialize-request-fail")}}let l={"Content-type":"application/json; charset=UTF-8"};r.authorization&&(l.Authorization=r.authorization);let c;try{c=await fetch(i,{method:n,body:s,headers:l})}catch{return{type:"failure",message:p`request failed for ${W(e)}`,code:W("unknown-fetch-server-fail")}}if(c.status!==200&&c.status!==201&&c.status!==422)return{type:"failure",message:p`server failed request ${W(e)}: ${W(`${c.status}`)} - ${W(`${c.statusText}`)}`,code:W("unexpected-status-code")};let k;try{k=await c.json()}catch{return{type:"failure",message:p`could not deserialize response for ${W(e)}`,code:W("deserialize-response-fail")}}let u=F2A(k);if(u.success)return{type:"failure",message:p`server responded with error for ${W(e)}: ${W(u.value.error)}`,userFacingError:u?.value?.user_error,code:W("server-reported-error")};if(u.code==="decode-failed")return{type:"failure",message:p`could not decode error response from server request to ${W(e)}`,code:W("decode-error-fail")};let m=f2A(k,e);return m.success?{type:"success",data:m.value}:{type:"failure",message:p`could not decode response data from server request to ${W(e)}`,code:W("decode-response-fail")}}};var OoA=J(iK());var Mte=["authenticationUnavailable"],vs=(A,j)=>({type:"failure",message:A,code:W(j)}),_E=(A,j)=>{let e={...A};return e.message=W(`${j.str}: ${e.message.str}`),e},xn=(A,j)=>{let e=new xe({errorClass:p`DeviceTrust`,message:p`${A}: ${W(j)}`});if(Nte(j))console.warn(e);else try{rj(e)}catch{console.error(`DeviceTrust: could not report ${A.str}`)}return vs(A,j)},Hc=(A,j)=>{let e=_E(A,j);return xn(e.message,e.code.str),e},el=(A,j)=>{let e=Kte(A,j);return vs(e.message,e.code.str)},P2A=async A=>{let j=await A.json().catch(),e=W(`${A.status}`),t={msg:p`missing error`,status:e};return!j||typeof j!="object"||!("error"in j)||typeof j.error!="string"?t:{status:e,msg:W(j.error)}},Kte=(A,j)=>{let e=vs(j,"unknown-reason");return A instanceof xe&&A.loggableName instanceof aj&&A.loggableMessage instanceof aj&&(e.message=p`${j}: ${A.loggableMessage}`,e.code=p`${A.loggableName}`),e},Nte=A=>Mte.includes(A);var RoA="dt-time-warning-ignored",tN=A=>new RegExp(A,"i"),O2A=(A,j)=>!(0,OoA.default)(A,j),R2A=(A,j)=>!(0,OoA.default)(A,j),D2A=A=>{let j=JSON.stringify(A);try{vj.setItem(RoA,j)}catch{console.warn("Could not persist time warning notifications were ignored.")}},T2A=()=>{try{let A=vj.getItem(RoA);return A?JSON.parse(A):void 0}catch{console.warn("Could not retrieve time warning notifications were ignored.");return}},C2A=()=>{try{vj.removeItem(RoA)}catch{console.warn("Could not remove time warning notifications were ignored.");return}},_2A=async()=>{if((navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!==-1)return"opera";if(navigator.userAgent.indexOf("Vivaldi")!==-1)return"vivaldi";if(navigator.userAgent.indexOf("Edg")!==-1)return"edge";if(globalThis.navigator.brave&&await globalThis.navigator.brave.isBrave().catch())return"brave";if(navigator.userAgent.indexOf("Chrome")!==-1)return"chrome";if(navigator.userAgent.indexOf("Safari")!==-1)return"safari";if(navigator.userAgent.indexOf("Firefox")!==-1)return"firefox"},DoA=A=>A.type==="success"?!1:A.code.str==="registeredDeviceMismatch",ToA=A=>A.type==="success"?!1:A.code.str==="no-available-port"||A.code.str==="noAgentFound",CoA=A=>A.type==="success"&&!A.data.device.registered;var S2A=A=>A.type==="success"&&A.data.device.registered?{state:"connected",health:A.data}:ToA(A)?{state:"kolide_not_enrolled"}:_oA(A)?{state:"kolide_not_authenticated"}:A.type==="success"&&CoA(A)?{state:"kolide_not_registered",health:A.data}:DoA(A)?{state:"kolide_tenant_mismatch"}:{state:"unknown"},_oA=A=>A.type==="success"?!1:A.code.str==="authenticationUnavailable",H2A=A=>!(!A||typeof A!="object"||!("checkIds"in A)||!(A.checkIds instanceof Array)||A.checkIds.length===0),M2A=(A,j)=>{if(A==="kolide_not_enrolled"||A==="kolide_not_authenticated")return{status:A,appName:j.app.name,accountName:j.account.name,accountUuid:j.account.uuid};if(A==="kolide_tenant_mismatch"){console.warn("DeviceTrust: local kolide agent is associated to a different tenant");return}if(A==="kolide_not_registered"){console.warn("DeviceTrust: kolide not registered - unable to register without health data");return}if(A!=="connected"){if(A==="starting"){console.error("DeviceTrust: extension client starting up - cannot determine restriction"),xn(p`kolideClientRestriction failed`,"client-not-ready");return}cl(A,p`clientState`,p`DeviceTrust`)}},zte=A=>A.anyAccountHasFlag("b5x-kolide-device-trust-for-all"),Ute=A=>A.filter(e=>e.hasSignedInClient?e.hasBackOfficeFeature?e.hasBackOfficeFeature.b2bXamDeviceTrustEpmIntegration:!1:e.serveraccount.tier?.features?e.serveraccount.tier?.features.find(t=>t==="b2bXamDeviceTrustEpmIntegration"):!1),Vte=async(A,j)=>(await A.getDatabase().getAllDeviceTrustConfigs()).filter(t=>j.find(r=>r.accountIdentifier.accountUUID===t.account.uuid)).some(t=>t.enabled),Eh=async(A,j,e)=>{let t={problems:[],isBlocked:()=>t.problems.length>0,isAllowed:()=>t.problems.length===0,loggableError:()=>W(`[ ${t.problems.map(r=>r.msg.str).join(", ")} ]`)};try{return t.problems=await Xte(A,j,e),t}catch{return console.error("Could not validate device trust access:","<redacted>"),t.problems=[{type:"error",msg:p`runtime exception encountered`}],t}},Xte=async(A,j,e)=>{let t=[];zte(j)||t.push({type:"client",msg:p`client disabled`});let r=Ute(A);return r.length===0&&t.push({type:"account",msg:p`missing backoffice permission`}),await Vte(e,r)||t.push({type:"user",msg:p`missing admin permission`}),t},K2A=A=>A?A.failingChecks.length===0&&A.device.status!=="good"?{isValid:!1,error:"conflicting-detection-state"}:{isValid:!0}:{isValid:!1,error:"missing-health-data"},SoA=(A,j)=>A.isValid?!1:A.error===j;var Jte=A=>{if(A)return h8(A)},h8=A=>({url:A.url,requiredParams:A.required_params,httpVerb:A.http_verb,authorization:A.authorization}),Wte=A=>{if(A)return h8(A)},Qte=A=>({blockedAt:A.blocked_at,hardwareImageUrl:A.hardware_image_url,id:A.id,name:A.name,registeredOwnerEmail:A.registered_owner_email,status:A.status,registered:A.registered,registrationBlocked:A.registration_blocked}),Yte=A=>({aboutKolideUrl:A.about_kolide_url,recheckAllIssuesUrl:A.recheck_all_issues_url,registerDeviceUrl:A.register_device_url,viewDetailsUrl:A.view_details_url}),Zte=A=>({endUserUrl:A.end_user_url,iconUrl:A.icon_url,canForceSuccess:A.snoozable,status:A.status,title:A.title,id:A.id,blocksDeviceAt:A.blocks_device_at}),Are=A=>A.sort((j,e)=>j.status.localeCompare(e.status)).map(Zte);var ph=A=>({actions:{hint:h8(A.actions.hint),forceSuccess:Wte(A.actions.snooze),recheck:h8(A.actions.recheck),unsafeClearSnooze:Jte(A.debug_actions?.clear_snoozes),register:h8(A.actions.register)},device:Qte(A.device),failingChecks:Are(A.failing_checks),generatedAt:A.generated_at,urls:Yte(A.urls)}),N2A=A=>A.type==="failure"?A:{type:"success",data:{...ph(A.data.response),accountUuid:A.data.accountUuid}},L2A=A=>({checkIds:A.check_ids,completedAt:A.completed_at,createdAt:A.created_at,deviceId:A.device_id,id:A.id,resolved:A.resolved,status:A.status,health:ph(A.dt4a)});var jre=A=>({success:A.success,recheckUrl:A.recheck_url,recheckId:A.recheck_id}),z2A=A=>A.type==="failure"?A:{type:"success",data:jre(A.data)},U2A=A=>A.isOk()?{type:"success",data:A.value}:{type:"failure",message:p`${Hm.loggable(A.error.error)}: ${A.error.reason}`,code:Hm.code(A.error.error),accountUuid:A.error.accountUuid};var ere=1e3,tre=10,rN=class{remoteClient;recheckingLock;constructor(){this.remoteClient=new eN}async forceSuccess(j){let e=j?.actions.forceSuccess?.authorization;if(!e)return vs(p`no force success action authentication available`,"force-success-fail");let t=j.failingChecks.filter(n=>n.canForceSuccess).map(n=>n.id);if(t.length===0)return vs(p`all failing checks must be completed`,"force-success-fail");let r=await this.remoteClient.request({endpoint:Km.EndPoint.ForceSuccess,body:{check_id:t},headers:{authorization:e}});return r.type==="failure"?(_E(r,p`forceSuccess failed`),r):{type:"success",data:ph(r.data.dt4a)}}async hintDevice(j,e){let t=e?.actions.hint.authorization;if(!t)return xn(p`cannot hint a device at ${W(j)} - missing authorization`,"hint-device-fail");let r;j==="browser_startup"&&(r={type:"browser_startup",browser_name:await _2A()||"unknown"});let a=r||{type:"prompt_displayed"},n=await this.remoteClient.request({endpoint:Km.EndPoint.HintDevice,body:a,headers:{authorization:t}});if(n.type==="failure"){let o=Hc(n,p`hintDevice failed`);return console.error(`DeviceTrust: ${o.message.str}: ${o.code.str}`),n}return{type:"success",data:void 0}}async unsafeClearSnoozes(j){xn(p`unsafeClearSnoozes invoked - should only be used internally`,"unsafe-developer-setting")}async registerDevice(j,e){if(!e?.actions.register)return xn(p`cannot register a device with no health data`,"register-device-fail");if(e.device.registered)return{type:"success",data:void 0};let t=H.findAccountHandlerByUuid(j);if(!t)return vs(p`registerDevice failed, account handler not found`,"unknown-reason");await t.waitForClient();let r=await t.getKolideAgentEnrollmentToken().catch(o=>el(o,p`getKolideAgentEnrollmentToken failed unexpectedly`));if(r.type!=="success")return _E(r,p`registerDevice failed`);let a={token:encodeURI(r.data.token)},n=await this.remoteClient.request({endpoint:Km.EndPoint.RegisterDevice,headers:{authorization:e.actions.register.authorization},body:a});return n.type==="failure"&&!n.message.str.includes("204")?_E(n,p`registerDevice failed`):{type:"success",data:void 0}}async recheck(j=[],e){let t=this.newRecheckStarted(),r;try{r=await this._recheck(j,e?.actions.recheck?.authorization)}catch(a){r=el(a,p`could not complete recheck`)}if(t(),r.type!=="success"){let a=Hc(r,p`recheck failed`);console.error(`DeviceTrust: ${a.message.str}: ${a.code.str}`)}return r}async getRecheckId(j){let e=await this.remoteClient.request({endpoint:Km.EndPoint.StartRecheck,body:{check_id:j.checkedIds},headers:{authorization:j.authorization}});return e.type==="failure"?e:z2A(e)}async pollRecheck(j){let e,t=0;for(;t<tre;){let r=await this.remoteClient.request({endpoint:"GET/dt4a/rechecks/:id",pathParams:{id:j.id},headers:{authorization:j.authorization}});if(r.type==="failure")return r;if(e=L2A(r.data),e.status==="errored")return xn(p`kolide failed rechecking`,"server-reported-error");if(e.status==="completed")return{type:"success",data:e};t++,await hs(ere)}return{type:"success",data:e}}async _recheck(j=[],e){if(!e)return vs(p`cannot recheck device - missing authorization`,"missing-health-data");let t=await this.getRecheckId({checkedIds:j,authorization:e});if(t.type==="failure")return t;let r=await this.pollRecheck({id:t.data.recheckId,authorization:e});return r.type==="failure"?r:{type:"success",data:r.data}}get isRechecking(){return this.recheckingLock?!this.recheckingLock.finished:!1}newRecheckStarted(){if(!this.recheckingLock){this.recheckingLock=Kl(!0);let e=this.recheckingLock.resolve;return()=>this._newRecheckFinished(e)}let j=this.recheckingLock.extend();return()=>this._newRecheckFinished(j)}_newRecheckFinished(j){j(!0),`${this.recheckingLock?.finished}`,this.recheckingLock?.finished&&(this.recheckingLock=void 0)}};async function aN(){if(ve()){console.info("DeviceTrust: Safari does not support URL redirection on extension uninstall - Skipping Setup");return}for(let A of H.getAccountHandlers){if(!ZA.accountHasFlag(A.serveraccount.uuid,"b5x-extension-feedback-loop")||(await Eh([A],ZA,SA)).isBlocked())continue;let t=`${A.serveraccount.signinAddress}/extension-uninstall`;browser.runtime.setUninstallURL(t);return}browser.runtime.setUninstallURL("")}var V2A=async()=>{let A=await Ba();A&&(A.anyAccountUnlocked(),aN())},X2A=async()=>{let A=await Ba();A&&A.ignoreWarning()},J2A=async()=>{let A=await Ba();if(!A)return xn(p`handleForcedSuccess failed`,"dt4a-disabled");let j=await A.forceSuccess().catch(e=>el(e,p`forceSuccess failed unexpectedly`));if(j.type!=="success"){let e=Hc(j,p`handleForceSuccess failed`);console.error(`DeviceTrust: ${e.message.str}: ${e.code.str}`)}return j},W2A=async()=>{let A=await Ba();if(!A)return vs(p`recheckDeviceHandler failed`,"dt4a-disabled");if(!A.state.health?.data||A.state.health.data.failingChecks.length===0)return xn(p`cannot check device with no failing checks`,"missing-health-data");let{failingChecks:j}=A.state.health.data,e=j.map(r=>r.id),t=await A.recheck(e);if(t.type!=="success"){let r=Hc(t,p`recheckDeviceHandler failed`);console.error(`DeviceTrust: ${r.message.str}: ${r.code.str}`)}return t},Q2A=async A=>{if(Lt())return xn(p`enrollDeviceHandler failed`,"accounts-locked");let j=await Ba();if(!j)return vs(p`enrollDeviceHandler failed`,"dt4a-disabled");let e=await j.enrollDevice(A.data.accountUuid);if(e.type==="failure"){let t=Hc(e,p`enrollDeviceHandler failed`);return console.error(`DeviceTrust: ${t.message.str}: ${t.code.str}`),t}return e};async function Y2A(A){let j=await Ba();if(!j)return;let e=a0(A.data);if(!e?.success){xn(p`handleKolideFinishedRechecking failed`,"decode-response-fail");return}let t=ph(e.value);j.handleKolideRecheckFinished(t)}var Z2A=async A=>{let j=await Ba();if(!j)return;let e=a0(A.data);if(!e.success){xn(p`handleKolideDeviceSnoozed failed`,"decode-response-fail");return}let t=ph(e.value);j.handleKolideSnooze(t)},ALA=async A=>{let j=await Ba();if(!j)return;let e=a0(A.data);if(!e.success){xn(p`handleKolideDeviceSignInSuccess failed`,"decode-response-fail");return}let t=ph(e.value);j.handleKolideDeviceSignInSuccess(t)},jLA=async A=>{let j=await Ba();j&&j.handleKolideUserStartedDownload()},eLA=async A=>{let j=await Ba();j&&j.handleKolideDeviceRegistered()},tLA=async({data:A})=>{let j=await Ba();if(!(!j||!H2A(A))){await j.hintDevice("prompt_displayed");for(let e of A.checkIds)j.recheck([e])}},rLA=async()=>{let A=await Ba();A&&await A.unsafeClearSnoozes()};var rre=72e6,MoA=A=>A?cCA({startTime:A,duration:rre}):!0;var nN=class{_health;_client="starting";_accounts;ignoreTimeLoaded=!1;get state(){return this._health?.data.device.registered?{isRegistered:!0,clientState:this._client,health:{...this._health},accounts:this._accounts}:{isRegistered:!1,clientState:this._client,health:void 0,accounts:this._accounts}}get client(){return this._client}get accounts(){return this._accounts}get health(){return this._health}get healthData(){return this._health?.data}get device(){return this._health?.data.device}get failingChecks(){return this._health?.data.failingChecks??[]}get actions(){return this._health?.data.actions}get forceSuccessAuth(){return this._health?.data.actions.forceSuccess?.authorization}get hintAuth(){return this._health?.data.actions.hint?.authorization}get recheckAuth(){return this._health?.data.actions.recheck.authorization}get unsafeClearSnoozeAuth(){return this._health?.data.actions.unsafeClearSnooze?.authorization}isDeviceRegistered(){return!!this._health?.data.device.registered}isDeviceEnrolled(){return this._client==="kolide_not_enrolled"||this._client==="starting"?!1:this._client==="connected"||this._client==="kolide_not_authenticated"||this._client==="kolide_not_registered"||this._client==="kolide_tenant_mismatch"?!0:(cl(this._client,p`this._client`,p`DeviceTrust`),!1)}handleHealthResponse(j){let e=S2A(j);if(e.state==="unknown"){console.warn("DeviceTrust: could not determine client state - aborting");return}return(e.state==="connected"||e.state==="kolide_not_registered")&&this.updateDeviceHealth(e.health),e.state==="kolide_tenant_mismatch"&&(console.warn("DeviceTrust: agent found but associated to a different account"),this.resetDeviceHealth()),e.state==="kolide_not_enrolled"&&(console.warn("DeviceTrust: no kolide agent found - clearing health cache"),this.resetDeviceHealth()),this.updateClientState(e.state),e}updateDeviceHealth(j){let e={...j,ignoredAt:this._health?.data.ignoredAt};this.updateDeviceState(e),this.ignoreTimeLoaded||(this.loadIgnoreTimeFromStorage(),this.ignoreTimeLoaded=!0)}updateDeviceState(j){let e=this._health?.data;O2A(e,j)&&(this.isDeviceDataStale(j)||(this._health={...this._health,updatedAt:Date.now(),data:j},mb("device-health-changed",j)))}resetDeviceHealth(){this._health=void 0,mb("device-health-changed",void 0)}updateClientState(j){let e=this.hasChangedToConnected(this._client,j);return this._client=j,e&&mb("device-trust-connected",void 0),e}isDeviceDataStale(j){return this._health?new Date(j.generatedAt)<new Date(this._health.data.generatedAt):!1}async loadDeviceTrustAppList(j){j||(j=await SA.getDatabase().getAllDeviceTrustConfigs()),j.forEach(e=>{this.updateDeviceTrustAppList(e.account,e.appList)})}updateDeviceTrustAppList(j,e){if(!this._accounts){this._accounts=[{account:j,deviceTrustUrlPatterns:e}],console.info(`DeviceTrust: initialized Device Trust Cache with account ${j.uuid}`);return}let t=this._accounts.findIndex(r=>r.account?.uuid===j.uuid);if(t!==-1){if(!R2A(this._accounts[t].deviceTrustUrlPatterns,e)){console.info(`DeviceTrust: updated Device Trust Cache account ${j.uuid}`);return}this._accounts[t]={account:j,deviceTrustUrlPatterns:e}}else this._accounts.push({account:j,deviceTrustUrlPatterns:e}),console.info(`DeviceTrust: added account ${j.uuid} to Device Trust Cache`)}clearIgnoredWarning(){this._health&&this.setIgnoreTime(void 0)}isWarningIgnored(){if(!this._health)return!1;let{ignoredAt:j}=this._health.data;return MoA(j)?(this.setIgnoreTime(void 0),!1):!!j}ignoreWarning(){if(!this.healthData)return;let j=Date.now();this.setIgnoreTime(j)}hasChangedToConnected(j,e){return!e||e===j?!1:e==="connected"||e==="kolide_not_registered"}loadIgnoreTimeFromStorage(){if(!this._health)return;let j=T2A();if(MoA(j)){this.setIgnoreTime(void 0);return}this._health.data.ignoredAt=j}setIgnoreTime(j){if(!j){C2A(),this._health&&(this._health.data.ignoredAt=void 0);return}if(!this._health){console.error("DeviceTrust: cannot set ignored time without health data");return}this._health.data.ignoredAt=j,D2A(j)}};var oN=3e4,KoA=2e3,NoA=6e5,iN,Ba=async()=>{let A=H.getAccountHandlers,j=await Eh(A,ZA,SA);if(j.isBlocked()){`${j.loggableError().str}`;return}if(iN)return iN;let e=new LoA,t=await e.init().catch(r=>el(r,p`preInitDeviceTrust failed unexpectedly`));if(t.type==="failure"){let r=Hc(t,p`failed to init`);console.error(`DeviceTrust: ${r.message.str}: ${r.code.str}`)}return iN=e,mt.subscribe(br,V2A),iN},LoA=class{localClient;stateManager;actionManager;healthPoll;detectionPoll;constructor(){this.localClient=new jN,this.stateManager=new nN,this.actionManager=new rN}get state(){return{...this.stateManager.state}}get accountData(){return this.stateManager.accounts?[...this.stateManager.accounts]:[]}async init(){let j=await this.stateManager.loadDeviceTrustAppList().then(()=>({type:"success"})).catch(r=>el(r,p`could not init without app list`));if(j.type!=="success")return j;let e=await this.getDeviceHealth();if(ToA(e)||CoA(e)||_oA(e)||DoA(e))return this.startDetectionPoll(),{type:"success",data:void 0};if(e.type!=="success"){let r=e.message.str;return console.warn(`DeviceTrust: init failed: ${r} - will continue to poll`),this.startDetectionPoll(),_E(e,p`init failed to get device health`)}let t=await this.localClientReady("startup").catch(r=>el(r,p`localClientReady failed unexpectedly at startup`));return t||{type:"success",data:void 0}}async anyAccountUnlocked(){let j=await this.getDeviceHealth({bustCache:!0});this.registerDevice(j),this.stateManager.client!=="connected"&&this.startDetectionPoll()}async getDeviceHealth(j={}){let e=K6();if(j.forceReset&&(e.isEnabled()?this.stateManager.resetDeviceHealth():xn(p`cannot reset unless debugging - skipping reset`,"unsafe-developer-setting")),!j.bustCache&&this.stateManager.healthData)return Promise.resolve({type:"success",data:this.stateManager.healthData});let t=await this.localClient.request({endpoint:p8.AuthenticatedEndPoint.DeviceHealth}),r=U2A(t),a=N2A(r);if(this.stateManager.handleHealthResponse(a),a.type!=="success")return a;let n=this.handleDeviceHealthValidation(this.stateManager.healthData);return SoA(n,"conflicting-detection-state")&&xn(p`${n.message}. Context: getDeviceHealth`,n.error),a}checkPageRestrictions(j){let e;try{e=new URL(j)}catch{xn(p`checkPageRestrictions was supplied invalid url`,"invalid-url");return}let t=this.getRestrictionDetails(e.href);if(!t)return;if(!this.stateManager.healthData)return M2A(this.stateManager.client,t);let{device:r}=this.stateManager.healthData;if(r.status==="good"){`${r.status}`;return}let a=this.handleDeviceHealthValidation(this.stateManager.healthData);if(SoA(a,"conflicting-detection-state")){xn(p`${a.message}. Context: checkPageRestrictions`,a.error);return}if(!((r.status==="will_block"||r.status==="notify")&&this.stateManager.isWarningIgnored()))return`${t.app.name}${r.status}`,{status:r.status,appName:t.app.name,accountName:t.account.name,accountUuid:t.account.uuid}}async forceSuccess(){let j=await this.actionManager.forceSuccess(this.stateManager.healthData);return j.type==="failure"||(this.stateManager.ignoreWarning(),this.stateManager.updateDeviceHealth(j.data)),j}async hintDevice(j){return this.actionManager.hintDevice(j,this.stateManager.healthData)}async unsafeClearSnoozes(){this.stateManager.clearIgnoredWarning(),await this.actionManager.unsafeClearSnoozes(this.stateManager.healthData)}async recheck(j=[]){let e=await this.actionManager.recheck(j,this.stateManager.healthData);return e.type==="failure"||this.stateManager.updateDeviceHealth(e.data.health),e}async enrollDevice(j){let e=H.findAccountHandlerByUuid(j);if(!e)return vs(p`enrollDevice failed: could not find account`,"unknown-reason");await e.waitForClient().catch(o=>{let i=el(o,p`ah.waitForClient failed unexpectedly`),s=Hc(i,p`enrollDevice failed to wait for client`);console.error(`DeviceTrust: ${s.message.str}: ${s.code.str} - continuing`)});let t=await this.detectClient();if(t.type==="success"&&this.stateManager.isDeviceRegistered())return console.info("DeviceTrust: enrollment flow interrupted since kolide agent was found"),t;let r=await e.getKolideAgentEnrollmentToken().catch(o=>el(o,p`getKolideAgentEnrollmentToken failed unexpectedly`));if(r.type!=="success")return _E(r,p`enrollDevice failed`);let a=await fetch("https://auth.kolide.com/device/dt4a",{body:`token=${encodeURI(r.data.token)}`,method:"POST",referrer:"no-referrer",redirect:ve()?"manual":"follow",mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Accept-Charset":"UTF-8"}}).then(o=>({type:"success",data:o})).catch(o=>el(o,p`post to kolide failed`));if(a.type==="failure")return _E(a,p`enrollDevice failed`);if(a.data.status>=400){let{status:o,msg:i}=await P2A(a.data);return vs(p`enrollDevice failed: received ${o}, with error: ${i}`,"unexpected-status-code")}if(ve()&&a.data.status!==302)return vs(p`enrollDevice failed: received ${W(`${a.data.status}`)} status for Safari`,"unexpected-status-code");if(!ve()&&a.data.status!==200&&a.data.status!==201)return vs(p`enrollDevice failed: received ${W(`${a.data.status}`)} status for non-Safari browser`,"unexpected-status-code");let n=ve()?a.data.headers.get("Location"):a.data.url;return n&&await browser.tabs.create({url:n}),{type:"success",data:void 0}}async registerDevice(j){if(j.type==="success"&&j.data.accountUuid&&this.stateManager.client==="kolide_not_registered"&&this.stateManager.healthData){console.warn("DeviceTrust: Attempting silent registration");let e;try{e=await this.actionManager.registerDevice(j.data.accountUuid,this.stateManager.healthData)}catch(t){e=el(t,p`could not complete silent registration`)}return e.type!=="success"&&Hc(e,p`silent registration failed`),e}}appListChanged(j,e){this.stateManager.updateDeviceTrustAppList(j,e)}ignoreWarning(){this.stateManager.ignoreWarning()}handleKolideRecheckFinished(j){this.stateManager.updateDeviceState(j)}handleKolideSnooze(j){this.stateManager.ignoreWarning(),this.stateManager.updateDeviceState(j)}handleKolideDeviceSignInSuccess(j){j.device.status!=="good"&&this.stateManager.ignoreWarning(),this.stateManager.updateDeviceState(j)}handleKolideUserStartedDownload(){if(this.stateManager.isDeviceRegistered()){xn(p`received download event but cache shows kolide is installed - ignoring event`,"conflicting-detection-state");return}this.startDetectionPoll()}handleKolideDeviceRegistered(){this.stateManager.isDeviceRegistered()||this.startDetectionPoll()}handleDeviceHealthValidation(j){let e=K2A(j);if(!e.isValid)switch(e.error){case"missing-health-data":e.message=p`DeviceTrust: DeviceHealth is undefined - unable to validate response`;break;case"conflicting-detection-state":e.message=p`DeviceTrust: user has no failing checks - device is in ${W(j?.device.status??"unknown")} state.`;break;default:e.message=p`DeviceTrust: unknown validation error - unable to validate response`;break}return e}getRestrictionDetails(j){let e=this.stateManager.accounts;if(!e)return;let t=e.find(a=>a.deviceTrustUrlPatterns.some(n=>n.includeUrlPatterns.some(o=>j.match(tN(o)))&&!n.excludeUrlPatterns.some(o=>j.match(tN(o)))));if(!t)return;let r=t.deviceTrustUrlPatterns.find(a=>a.includeUrlPatterns.some(n=>j.match(tN(n))));if(!r)throw console.error("DeviceTrust: reached impossible state - previously found pattern was lost during execution"),new xe({errorClass:p`reached-impossible-state`,message:p`previously found pattern was lost`});return{app:r,account:t.account}}startDetectionPoll(){if(this.healthPoll?.stop(),this.healthPoll=void 0,this.detectionPoll){console.warn("DeviceTrust: detection poll is already running - ignoring start request");return}this.detectionPoll=new g8(p`detectClient`,this.detectClient,KoA),this.detectionPoll.changeInterval({interval:oN,delay:NoA})}startDeviceHealthPoll(j){if(this.detectionPoll?.stop(),this.detectionPoll=void 0,this.healthPoll){console.warn("DeviceTrust: health poll is already running - ignoring start request at context: "+j);return}this.healthPoll=new g8(p`deviceHealth`,this.deviceStatePolled,oN),j==="startup"&&(this.healthPoll.changeInterval({interval:KoA}),this.healthPoll.changeInterval({interval:oN,delay:NoA})),j==="agent-detected"&&!this.stateManager.isDeviceRegistered()&&(this.healthPoll.changeInterval({interval:KoA}),this.healthPoll.changeInterval({interval:oN,delay:NoA}))}detectClient=async()=>{let j=await this.getDeviceHealth();return j.type==="failure"?j:(mb("device-trust-connected",void 0),this.localClientReady("agent-detected"),{type:"success",data:void 0})};async localClientReady(j){this.startDeviceHealthPoll(j);let e=await this.getDeviceHealth();if(e.type!=="success")return _E(e,p`localClientReady could not get health data`);j==="startup"&&await this.hintDevice("browser_startup")}deviceStatePolled=async()=>{this.actionManager.isRechecking||await this.getDeviceHealth({bustCache:!0})}};var aLA="insiders-enabled",are=["AKHM3DPGNZFUJOY7N4UAWAMLIE","SYZR254TC5D3HOXVETU2KXJQLQ","7FNUWANXYRCEPEJ4PB3RULLBDQ"],nre=["b5dev.ca","b5dev.com","b5dev.eu","b5local.com","b5staging.com","b5test.ca","b5test.com","b5test.eu","b5rev.com"],Xi=class A{static hasInsiderAccount(){let j=are.some(r=>H.hasAccountHandler(r)),t=H.getAccountHandlers.map(r=>new URL(r.serveraccount.signinAddress).hostname).some(r=>nre.some(a=>r===a||r.endsWith("."+a)));return j||t}static hasInsiderAccess(){return this.hasInsiderAccount()||vj.getItem(aLA)==="true"}static enableInsiderIfAppropriate(){this.hasInsiderAccess()&&(this.enableConsoleUtilFuncs(),console.info("\u{1F49C} Insider features enabled"))}static enableInsiderDev(){vj.setItem(aLA,"true"),A.enableInsiderIfAppropriate()}static enableConsoleUtilFuncs(){let j={core:jA,dev:FoA,dt4a:Ba,invoke:lj,tabs:xa,pm:kh,enableInsiders:A.enableInsiderDev};globalThis.bg=j}};var nLA="disable-b5x-extensions-dismissed",oLA=async()=>!vi()||!Xi.hasInsiderAccess()||je.getItem(nLA)==="Y"?Promise.resolve():(je.setItem(nLA,"Y"),N5A().then(A=>{if(A.length===0){console.info("No other versions of B5X were detected");return}let j=(t,r)=>`${t} (${r})`,e=A.length>1?A.map(t=>j(t.name,t.version)).join(", ").trimEnd():j(A[0].name,A[0].version);xs({id:"disable-b5x-extensions-alert",title:oA("Disable other versions of 1Password in the browser?"),text:oA("We have detected other versions of this extension installed. Would you like to disable {extensionNames}?",{extensionNames:e}),primaryAction:{id:"disable-b5x-extensions-action",label:oA("Disable Extensions"),destructive:!1,action:{type:"DisableExtensions",content:A.map(t=>t.id).join(",")}},cancelAction:oA("Cancel")})}));var SLA=J(Dd());var iLA="https://op8.agilebits.com/extension/report-issue";var sLA=["cisco.1password.com"];var zoA=function(A){return function(j){return j.map(function(e){return A(e)})}};var o0=J(Xn()),n0=J(h7());var i0=(A,j,e={})=>{let{storageType:t="SessionStorage",trackErrors:r=!0}=e,a=new rt(`${t} Accessor`),n=()=>t==="SessionStorage"?je:vj;return[()=>(0,n0.pipe)(ZGA(n().getItem(A.str)),b4(JSON.parse),b4(o=>j.decode(o)),f3((0,n0.flow)(o0.mapLeft(o=>{let i=p`Invalid data cannot be accessed from ${W(t)} at key "${A}". Errors found in the following paths: ${lLA(o)}`;a.warn(i.str,`
Returning undefined.`),r&&rj(new xe({errorClass:p`CodecError`,message:i}))}),F3)),YGA(()=>{})),o=>{if(o===null)return n().removeItem(A.str);(0,n0.pipe)(o,j.encode,i=>j.decode(i),o0.map(i=>JSON.stringify(i)),o0.fold(i=>{let s=p`Invalid data cannot be saved to ${W(t)} with key "${A}". Errors found in the following paths: ${lLA(i)}`;a.warn(s.str,`
setItem aborted.`),r&&rj(new xe({errorClass:p`CodecError`,message:s}))},i=>n().setItem(A.str,i)))}]},lLA=A=>(0,n0.pipe)(A,zoA(j=>j.context),zoA(j=>j.map(({key:e})=>e).filter(Boolean).join(".")),j=>W(j.join(", ")));var Ta=J(tA()),cLA=Ta.intersection([Ta.type({timestamp:Ta.number,tabId:Ta.number,url:Ta.string}),Ta.partial({detectedEmail:Ta.string,detectedPasswordManager:Ta.string,withOtp:Ta.boolean,withProvider:Ta.string})]),dLA=Ta.intersection([Ta.type({timestamp:Ta.number,domain:Ta.string,completedSteps:Ta.array(Ta.union([Ta.literal("identifier"),Ta.literal("password")])),tabId:Ta.number}),Ta.partial({detectedEmail:Ta.string})]),s0="LoginDetected";var Nm=new rt("[Login Detection]"),l0=()=>{let A=ZA.anyAccountHasFlag("b5x-trelica-activity-reporting"),j=H.getAccountHandlers.find(e=>e.serveraccount.tier?.features.find(t=>t==="b2bXamTrelica"));return A?j:void 0},uLA=()=>ZA.anyAccountHasFlag("b5x-login-detection")||!!l0(),ire=()=>!uLA(),sre=p`pendingLogin`,lre=p`partialLogin`,UoA="purge-login-detection-data",cre=2*60*1e3,kLA=2*60*1e3,dre=5*1e3,ELA=()=>{browser.alarms.onAlarm.addListener(hre),browser.tabs.onUpdated.addListener(qre),V("login-detection-page-event",kre),browser.alarms.get(UoA).then(A=>{if(!A)return browser.alarms.create(UoA,{delayInMinutes:1,periodInMinutes:1})})},[lN,VoA]=i0(sre,cLA),[pLA,sN]=i0(lre,dLA),kre=({data:{name:A,payload:j}},{tab:e})=>{if(!ire()){if(!e.id){Nm.error("No tab ID collected, aborting.");return}switch(A){case"LOGIN_EVENT":return mLA({...j,tabId:e.id});case"LOGIN_STEP":return Ere({...j,tabId:e.id},pLA());default:cl(A,W(`Unrecognized payload type: ${A}`));break}}},bv=null,mLA=A=>{Nm.debug("Received attempted login event"),bv&&(clearTimeout(bv),bv=null);let j=ure(A,lN());VoA(j),bv&&clearTimeout(bv),bv=setTimeout(mre,dre)},ure=(A,j)=>{let e=Date.now();return j?.tabId===A.tabId&&j.url===A.url?{...j,timestamp:e,withOtp:(j.withOtp||A.withOtp)??!1}:{withOtp:!1,timestamp:e,...A}},Ere=(A,j)=>{Nm.debug("Received attempted login step");let e=pre(A,j);["identifier","password"].every(t=>e.completedSteps.includes(t))?(mLA({url:A.url,withOtp:!1,withProvider:void 0,tabId:e.tabId}),sN(null)):sN(e)},pre=({tabId:A,timestamp:j,step:e,url:t},r)=>{let a=new URL(t).hostname;return r?.domain===a&&!r.completedSteps.includes(e)&&Math.abs(j-r.timestamp)<=cre?{...r,timestamp:j,completedSteps:r.completedSteps.concat(e)}:{domain:a,tabId:A,timestamp:j,completedSteps:[e]}},mre=()=>{bv=null;let A=lN();A&&lj("login-detection-background-event",{name:"CHECK_PAGE",payload:{type:A.withOtp?"NoOTPField":"NoPasswordField",for:{type:"PendingLoginEvent",tabId:A.tabId,timestamp:A.timestamp}}},{tabId:A.tabId}).then(j=>{if(!j.ok)return Nm.error("Failed to check pending login event.");if(!j.data.result)return Nm.warn("Login appeared to be unsuccessful.");Bre(j.data.for)})},Bre=({tabId:A,timestamp:j})=>{let e=lN();!e||e.timestamp!==j||e.tabId!==A||(gre(e),VoA(null),sN(null))},gre=({url:A,...j})=>{globalThis.dispatchEvent(new CustomEvent(s0,{detail:{...j,url:A}}))},hre=A=>{if(A.name!==UoA)return;let j=lN()?.timestamp;j&&Date.now()-j>kLA&&(Nm.debug("Purging stale login attempt data"),VoA(null));let e=pLA()?.timestamp;e&&Date.now()-e>kLA&&(Nm.debug("Purging stale login step data"),sN(null))},qre=(A,j)=>{if(uLA()&&j.status==="complete")try{let e="/inline/injected/heuristics.js",t;ka()?t=browser.scripting.executeScript({target:{tabId:A},files:[e]}):t=browser.tabs.executeScript(A,{file:e}),t.then(()=>{Nm.debug("Content script injected")})}catch{Nm.error("Unable to inject content script")}};var c0=J(tA());var XoA="trelica-submit-activities",BLA=5,JoA="trelica-job",gLA=1,xre=p`trelica-next-extension-report-time`,vre=p`trelica-next-purge-time`,Gre=60*60*1e3,hLA=24*60*60*1e3,fre=5,Fre=A=>A*60*1e3,Gs=new rt("[Trelica]"),bre=()=>!!l0(),d0=()=>!bre(),cN;var yv=async()=>{let A=l0();if(A){let{uuid:j,signinAddress:e,userUUID:t}=A.serveraccount;return cN===j?void 0:(cN=j,lt.invoke("ActivityTrackingInit",{type:"Enable",content:{accountUuid:j,userUuid:t,signinUrl:e}}))}else return cN?(cN=void 0,lt.invoke("ActivityTrackingInit",{type:"Disable"})):void 0},yre=()=>{mt.subscribe(ZE,yv).subscribe(Yi,yv).subscribe(Ak,yv).subscribe(q7,yv).subscribe(br,yv).subscribe(Jn,yv).subscribe(s0,({detail:A})=>{GLA({detectedEmail:A.detectedEmail,detectedPasswordManager:A.detectedPasswordManager,timestamp:A.timestamp,url:A.url,withOtp:A.withOtp,withProvider:A.withProvider}).catch(j=>{Gs.error("Failed to report login event",j)})}).subscribe(G7,async({detail:{linkedAccount:A,provider:j,tabId:e}})=>{let t=await L6(e);if(!t){Gs.warn("Tab not found for SignInWithCompleted event, cannot report login");return}return Gs.debug("Reporting login event from provider"),Sre(A,j,t)})},xLA=()=>{yv(),yre(),browser.alarms.onAlarm.addListener(A=>{A.name!==XoA||d0()||WoA()}),browser.alarms.onAlarm.addListener(Rre),browser.alarms.get(XoA).then(A=>{A||browser.alarms.create(XoA,{periodInMinutes:BLA,delayInMinutes:BLA})}),browser.alarms.get(JoA).then(A=>{A||browser.alarms.create(JoA,{periodInMinutes:gLA,delayInMinutes:gLA})}),vLA()},$re=A=>j=>{let e=new Date().toISOString();return j.filter(({id:t,type:r,enabled:a})=>a&&r==="extension"&&t!==A).map(t=>({detected:e,extensionId:t.id,...nP(t,["homepageUrl","hostPermissions","name","permissions"])}))},[wre,qLA]=i0(xre,c0.type({nextReportTime:c0.number,attempts:c0.number})),vLA=async()=>{if(d0())return;let{nextReportTime:A=0,attempts:j=0}=wre()??{};if(!(A>Date.now()))return Gs.debug("Attempting to report extension info"),d8().then($re(browser.runtime.id)).then(async e=>{if(e.length===0){Gs.debug("No extensions to report.");return}return lt.invoke("ExtensionInfo",e).then(()=>Gs.debug("Successfully reported extension info."))}).then(()=>{qLA({nextReportTime:Date.now()+hLA,attempts:0})}).catch(()=>{Gs.error("Unable to report extension metadata to Trelica."),qLA({nextReportTime:Math.min(Date.now()+Fre(Math.pow(fre,j)),Date.now()+hLA),attempts:j+1})})},[Ire,Pre]=i0(vre,c0.number),Ore=async(A=!1)=>{if(!(A&&Date.now()<(Ire()??0)))return Gs.info("Purging stale Trelica activity"),lt.invoke("StaleDataCheck",void 0).then(()=>{Gs.info("Stale activity purged"),Pre(Date.now()+Gre)}).catch(()=>{Gs.error("Stale activity check failed to invoke.")})},Rre=A=>{A.name!==JoA||d0()||(vLA(),Ore(!0))},WoA=async()=>{if(!d0())try{await lt.invoke("SubmitActivities",void 0),Gs.debug("XAM Backend notified to submit activities")}catch{Gs.error("Unable to notify XAM backend to submit activities")}},GLA=async({url:A,timestamp:j,detectedEmail:e,detectedPasswordManager:t,withProvider:r,withOtp:a})=>{if(!_re(A)||!e||d0())return;let n=new URL(A),o=Dre(r),i={visited:new Date(j).toISOString(),url:`${n.origin}${n.pathname}`,detectionType:o?dy.WithProvider:dy.Interaction,usedMfa:!!a,usedPasswordManager:Tre(t),usedProvider:o,usedEmailForLogin:e};return lt.invoke("Activity",i).then(()=>{Gs.debug("Activity (login) successfully reported to XAM backend")}).catch(s=>{Gs.error("Unable to report activity (login) to XAM backend")})},Dre=A=>{switch(A){case"Google":return Th.Google;case"Microsoft":return Th.Microsoft;case void 0:return;default:Gs.warn(`Unknown detected provider: ${A}`);return}},Tre=A=>{switch(A){case"1Password":case"OnePassword":return tc.OnePassword;case"Bitwarden":return tc.Bitwarden;case"LastPass":return tc.LastPass;case"Dashlane":return tc.Dashlane;case"Keeper":return tc.Keeper;case"Chrome":return tc.Chrome;case"Edge":return tc.Edge;case"Okta":return tc.Okta;case"Unknown":return tc.Unknown;case void 0:return;default:Gs.debug(`Unknown detected password manager: ${A}`);return}},Cre=["https://","http://"],_re=A=>Cre.some(j=>A.startsWith(j));async function Sre(A,j,e){if(d0())return;let[t,r]=(()=>{switch(j){case an.Google:return[Th.Google,void 0];case an.Microsoft:return[Th.Microsoft,void 0];case an.Okta:return[void 0,tc.Okta];default:return[void 0,void 0]}})(),a=(()=>{switch(A?.type){case"Item":{let n=H.findAccountHandlerByUuid(A.content.accountUuid);return zj.itemCache?.itemWithUUID(A.content.itemUuid)?.overview.ainfo??n?.context?.user?.email}case"Username":return A.content;case void 0:return;default:te(A)}})();return GLA({timestamp:Date.now(),url:e.unparsedUrl,detectedEmail:a,withProvider:t,detectedPasswordManager:r})}var q8=class{static designationListener;static createContextMenuGroup(){K6().isEnabled()&&(Bt()||(zd.createContextMenu({id:"clippy",title:"Clippy",contexts:["all"],parentId:"devtools"}),zd.createContextMenu({id:"clippyDesignationDebugging",title:"Designation Debugging",type:"checkbox",contexts:["all"],parentId:"clippy"})))}static toggleDesignationDebugging(){console.warn("Clippy is disabled in PRODUCTION builds, ignoring request to toggle");return;try{zd.updateContextMenu("clippyDesignationDebugging",{checked:this.designationListener!==void 0})}catch{}}};var fLA=J(Xn()),k0=J(tA());var QoA="page-exclusion-list",Kre=k0.record(k0.string,k0.boolean),ZoA=class{_pageExclusionList={};init(){this.#j()}async checkPermission(j){if(Object.keys(this._pageExclusionList).length>0)return!0;let e=j.id,t=oA(`1Password will no longer make autofill suggestions on this page.

The list of hidden pages is remembered in this web browser. You can clear the list at any time in settings.`),r=await lj("get-hide-on-this-page-permission",t,{tabId:e});if(!r.ok)throw new Error("get-hide-on-this-page-permission failed");return r.data}append(j){this._pageExclusionList[YoA(j.unparsedUrl)]=!0,this._onChange(j)}has(j){return!!this._pageExclusionList[YoA(j.unparsedUrl)]}remove(j){delete this._pageExclusionList[YoA(j.unparsedUrl)],this._onChange(j)}clear(){this._pageExclusionList={},this.#A()}_onChange(j){this.#A();let e=this.has(j);chrome.tabs.sendMessage(j.id,{name:"page-excluded",data:e})}#j(){try{let j=vj.getItem(QoA);if(!j)throw new Error;let e=Kre.decode(JSON.parse(j));if((0,fLA.isLeft)(e))throw new Error;this._pageExclusionList=e.right}catch{vj.setItem(QoA,JSON.stringify({}))}}#A(){vj.setItem(QoA,JSON.stringify(this._pageExclusionList))}};function YoA(A){let j=new URL(A);return SH(j)}var oo=new ZoA;var FLA="watchtower_settings",AiA="watchtower-sites",dN=864e5,Nre=36e5,Lre=3e5,$v=class A{constructor(j=!1){this.qaTesting=j;this.logger=new rt("\u{1F5FC} Watchtower events")}listener;logger;wait(j){browser.alarms.create(AiA,{when:Date.now()+j}),this.listener===void 0&&(this.listener=e=>{e.name===AiA&&this.updateReportAndCompare()}),browser.alarms.onAlarm.addListener(this.listener)}async updateReportAndCompare(){if(Lt()){this.clear();return}this.logger.debug("Updating report and comparing");let j=await zj.loadItemCache();if(!j)return;let e=await this.updateWatchtowerReport();if(!e){this.wait(Lre);return}let{showNotifications:t,watchtowerNotifications:r}=WA(),a=A.loadSettings();if(this.saveReport(e),!!a){if(t&&r&&a.report){let n=await jA.compareWatchTowerDiff(a.report,e);if(Object.keys(n.compromisedWebsitesDiff).length>0){let o=[];for(let s of j.activeItems()){let l=s.overview.URLs?.filter(u=>!!u.u).map(u=>u.u)??[];if(l.length===0)continue;let c=j.accounts.find(u=>j.vaults[u.uuid].some(m=>m.uuid===s.vault.uuid));if(!c)continue;let k={accountUUID:c.uuid,itemUUID:s.uuid,lastPasswordChangeTimestamp:s.passwordUpdatedAt??0,vaultUUID:s.vault.uuid,websites:l};o.push(k)}let i=await jA.newCompromisedWebsiteItems({compromisedWebsitesDiff:n.compromisedWebsitesDiff,items:o});i.items.length>0&&bLA(i)}}this.wait(dN)}}async begin(){if(this.listener||ve())return;this.logger.debug("Beginning watchtower events");let j=A.loadSettings(),{showNotifications:e,watchtowerNotifications:t}=WA(),r=e&&!t;if(!j&&r?Li("enable-watchtower-compromised-sites"):r||ym("enable-watchtower-compromised-sites"),!j){let n=await this.updateWatchtowerReport();n?(this.saveReport(n),this.wait(dN)):this.wait(Nre);return}let a=j.lastUpdate?new Date().getTime()-new Date(j.lastUpdate).getTime():0;a>=dN&&(this.clear(),await this.updateReportAndCompare(),a=0),this.wait(dN-a)}clear(){this.logger.debug("Clearing watchtower events"),browser.alarms.clear(AiA),this.listener&&(browser.alarms.onAlarm.removeListener(this.listener),this.listener=void 0)}async updateWatchtowerReport(){try{return this.qaTesting?A.fakeWatchtowerData():(NA.unloadWatchtowerData(),await NA.loadWatchtowerData(),NA.getWatchtowerData())}catch(j){console.warn("Unable to update Watchtower report!",j)}}saveReport(j){if(this.qaTesting)return;let e={lastUpdate:new Date().getTime(),report:j};vj.setItem(FLA,JSON.stringify(e))}static loadSettings(){let j=vj.getItem(FLA);return j?JSON.parse(j):void 0}static async fakeWatchtowerData(){return new Promise(j=>{fetch("https://bucket.agilebits.com/qa/watchtower/compromised-sites.json").then(async e=>e.text()).then(e=>{let t=JSON.parse(e);j(t)})})}static async watchtowerQA(){let j=new A(!0);await j.updateReportAndCompare(),j.clear()}},kN=Re.resolve($v);var zre=!0,x8=ka()?"action":"browser_action";var zd=class A{onlock;onSaveLogin;onSaveCreditCard;onSaveIdentity;onopensettings;onReportFeedback;onshowinline;onupdatecheck;onopenbenchmarking;onGetHelp;onCollectPageDetails;onGenerateScenario;onGenerateBulkScenarios;constructor(j,e,t,r,a,n,o,i,s,l,c,k,u){this.onlock=j,this.onSaveLogin=e,this.onSaveCreditCard=t,this.onSaveIdentity=r,this.onopensettings=a,this.onReportFeedback=n,this.onshowinline=o,this.onupdatecheck=i,this.onopenbenchmarking=s,this.onGetHelp=l,this.onCollectPageDetails=c,this.onGenerateScenario=k,this.onGenerateBulkScenarios=u,mt.subscribe(nl,this.didLock).subscribe(br,this.didUnlock),chrome.contextMenus.onClicked.addListener(this.onClick),this.updateAvailableItems(!1)}didLock=()=>{this.updateAvailableItems(!1)};didUnlock=()=>{this.updateAvailableItems(!0)};updateAvailableItems=j=>{"contextMenus"in chrome&&"removeAll"in chrome.contextMenus&&chrome.contextMenus.removeAll(async()=>{await vj.init(),this.addItems(j)})};onClick=(j,e)=>{let t=j.menuItemId;if(typeof t=="string"&&t.startsWith("feature_")){this.featureOnClick(t.slice(8));return}else if(typeof t=="string"&&t.startsWith("devFunc_")){this.devFuncOnClick(t.slice(8));return}switch(t){case"settings":this.onopensettings();break;case"reportFeedback":this.onReportFeedback();break;case"lock":this.onlock(),globalThis.dispatchEvent(new Event(mh));break;case"saveLogin":this.onSaveLogin();break;case"saveCreditCard":this.onSaveCreditCard();break;case"saveIdentity":this.onSaveIdentity();break;case"getHelp":this.onGetHelp();break;case"collectFields":this.onCollectPageDetails({includeValues:!1,action:"download"});break;case"collectFieldsWithValues":this.onCollectPageDetails({includeValues:!0,action:"open"});break;case"generateScenario":this.onGenerateScenario();break;case"generateBulkScenarios":this.onGenerateBulkScenarios();break;case"update":this.onupdatecheck();break;case"reload":K6().reloadExtension();break;case"highlightSocialLoginButtons":e?.id?lj("sign-in-with-devtools-highlight-buttons",void 0,{tabId:e.id}):console.error("[Sign in with][devtools] No active tab detected.");break;case"addAccountPrompt":K6().toggleAddAccountPrompt();break;case"sendLocalSentry":K6().toggleSendLocalSentry();break;case"forceKolideDisable":K6().toggleForceKolideDeviceTrustFail(),Ba().then(async r=>r?.getDeviceHealth({bustCache:!0,forceReset:!0}));break;case"watchtowerNotificationsQATest":$v.watchtowerQA();break;case"benchmark":this.onopenbenchmarking();break;case"clippyDesignationDebugging":q8.toggleDesignationDebugging();break;case"tabToggleExclusion":if(e?.id){let r=It(e);r&&(oo.has(r)?oo.remove(r):oo.checkPermission(r).then(a=>{a&&oo.append(r)}))}break;case"report":chrome.tabs.create({url:iLA,active:!0});break;case"highlightAutosubmitElements":{if(!e?.id)return console.error("[autosubmit][devtools] No active tab detected.");if(!It(e))return console.error("[autosubmit][devtools] Failed to create tab info for tab.");chrome.tabs.sendMessage(e.id,{name:"autosubmit-devtools-highlight-elements"});break}case"submitTrelicaActivity":WoA();break;default:}};featureOnClick=j=>{ZA.devToggleAccountFeature(j)};devFuncOnClick=async j=>{let e=JK.find(t=>t.name===j)?.func;if(e){let t=e();t instanceof Promise&&await t}};addItems=j=>{if(A.createContextMenu({id:"settings",title:oA("Settings"),contexts:[x8]}),j&&(A.createContextMenu({id:"lock",title:oA("Lock"),contexts:["all"]}),A.createContextMenu({id:"save",title:oA("Save"),contexts:["all"]}),A.createContextMenu({id:"saveLogin",title:oA("Login"),contexts:["all"],parentId:"save"}),A.createContextMenu({id:"saveCreditCard",title:oA("Credit Card"),contexts:["all"],parentId:"save"}),A.createContextMenu({id:"saveIdentity",title:oA("Identity"),contexts:["all"],parentId:"save"})),K6().isEnabled()?A.createContextMenu({id:"reportFeedback",title:oA("[Internal] Report feedback"),contexts:["all"]}):A.createContextMenu({id:"report",title:oA("Report Issue"),contexts:["all"]}),A.createContextMenu({id:"help",title:oA("Help"),contexts:["all"]}),A.createContextMenu({id:"getHelp",title:oA("Get Help"),contexts:["all"],parentId:"help"}),A.createContextMenu({id:"collectFields",title:oA("Collect Page Structure"),contexts:["all"],parentId:"help"}),K6().isEnabled()){A.createContextMenu({id:"devtools",title:"Developer Tools",contexts:["all"]}),A.createContextMenu({id:"featureFlags",title:"Feature Flags",contexts:["all"],parentId:"devtools"});let e=[];for(let t of Object.keys(gm)){let r=ZA.anyAccountHasFlag(t);e.push({name:t,enabled:r})}for(let{name:t,enabled:r}of e)A.createContextMenu({type:"checkbox",id:`feature_${t}`,title:t,contexts:["all"],parentId:"featureFlags",checked:r});A.createContextMenu({id:"devFuncs",title:"Dev Console Funcs",contexts:["all"],parentId:"devtools"});for(let t of JK)A.createContextMenu({id:`devFunc_${t.name}`,title:t.name,contexts:["all"],parentId:"devFuncs"});A.createContextMenu({id:"reload",title:"Reload",contexts:["all"],parentId:"devtools"}),A.createContextMenu({id:"elementDetection",title:"Element Detection",contexts:["all"],parentId:"devtools"}),A.createContextMenu({id:"highlightSocialLoginButtons",title:"Highlight Social Login Buttons",contexts:["all"],parentId:"elementDetection"}),A.createContextMenu({id:"elementDetection",title:"Autosubmit Element Detection",contexts:["all"],parentId:"devtools"}),A.createContextMenu({id:"highlightAutosubmitElements",title:"Run Autosubmit Element Detection",contexts:["all"],parentId:"elementDetection"}),A.createContextMenu({id:"collectFieldsWithValues",title:"Collect Page Details",contexts:["all"],parentId:"devtools"}),A.createContextMenu({id:"generateScenario",title:"Generate Scenario",contexts:["all"],parentId:"devtools"}),A.createContextMenu({id:"generateBulkScenarios",title:"Generate Scenarios for top 1k websites",contexts:["all"],parentId:"devtools"}),A.createContextMenu({type:"checkbox",id:"addAccountPrompt",title:"Turn on Add Account Prompt",contexts:[x8],checked:K6().addAccountPromptEnabled(),parentId:"devtools"}),A.createContextMenu({type:"checkbox",id:"sendLocalSentry",title:"Send local errors to Sentry",contexts:[x8],checked:K6().sendLocalSentryEnabled(),parentId:"devtools"}),A.createContextMenu({id:"watchtowerNotificationsQATest",title:"Trigger Watchtower Notification",contexts:[x8],parentId:"devtools"}),zre||q8.createContextMenuGroup(),A.createContextMenu({id:"benchmark",title:oA("Benchmarking"),contexts:[x8],parentId:"devtools"}),A.createContextMenu({id:"xamDebug",title:"XAM Debug",contexts:["all"],parentId:"devtools"}),A.createContextMenu({type:"checkbox",id:"forceKolideDisable",title:"Force Kolide device trust failure",contexts:["all"],parentId:"xamDebug",checked:K6().forceKolideDeviceTrustFailEnabled()}),ZA.anyAccountHasFlag("b5x-trelica-activity-reporting")&&A.createContextMenu({id:"submitTrelicaActivity",title:"Submit Trelica Activity",contexts:["all"],parentId:"xamDebug"})}jiA()};static createContextMenu=j=>{"contextMenus"in chrome&&"create"in chrome.contextMenus&&chrome.contextMenus.create(j,()=>{chrome.runtime.lastError&&chrome.runtime.lastError})};static updateContextMenu=async(j,e)=>new Promise((t,r)=>{"contextMenus"in chrome&&"update"in chrome.contextMenus?chrome.contextMenus.update(j,e,()=>{chrome.runtime.lastError&&r(`Failed to update context menu ${chrome.runtime.lastError.message}`),t()}):t()})};var eiA=class{_contextMenu;getContextMenu=()=>this._contextMenu;setContextMenu=(j,e,t,r,a,n,o,i,s,l,c,k,u)=>this._contextMenu=new zd(j,e,t,r,a,n,o,i,s,l,c,k,u);initContextMenu=()=>{mt.subscribe(Jn,()=>{this._contextMenu&&this._contextMenu.updateAvailableItems(!Lt())})}},v8=new eiA;async function yLA(A){let j=re.desktopConnectionManager?.getDesktopApp();if(!j||re.getDesktopAppState().type!=="Connected")throw new Error("Unable to check about accounts when not connected");return j.shouldPromptToAddAccount({accountUuid:A})}function wv(A){let j=re.desktopConnectionManager?.getDesktopApp();if(!j||re.getDesktopAppState().type!=="Connected")throw new Error("Unable to prompt to add account when not connected");j.promptDesktopAppToSignIn(A)}async function s7(){let A=re.desktopConnectionManager?.getDesktopApp();if(!A)throw new Error("Unable to unlock Desktop app when not connected");let j=await JCA(async()=>A.showUnlock(),"Ask the desktop app to show its lock screen");j.isErr()&&console.warn("Unable to show the unlock screen",j.error)}async function $LA(A){let j=re.desktopConnectionManager?.getDesktopApp();if(!j)throw new Error("Unable to unlock Desktop app when not connected");await j.showUnlockAccount(A)||(console.warn("Unable to show the unlock account screen"),Vr({id:"unlock-account-from-desktop",message:oA("Unlock account from the desktop app"),behavior:Ir.Ephemeral}))}function uN(){mt.subscribe(Dh,s7,{once:!0});let A=globalThis.setInterval(()=>{tiA(),clearInterval(A)},5e3)}function tiA(){try{mt.unsubscribe(Dh,s7)}catch{}}async function wLA(A){let j=re.desktopConnectionManager?.getDesktopApp();if(!j)throw new Error("Unable to show desktop app settings page when not connected");try{await j.showDesktopSettingsPage({category:A})}catch(e){console.warn("Unable to show desktop app settings",e)}}function u0(A){let j;return j="onepassword8://",A?j+A:j}async function ILA(A){if(!A)return A??"";let j=await crypto.subtle.digest("SHA-256",q.str2ab(A.toLowerCase()));return q.ab2str(j)}var E0=J(Xn()),Xl=J(tA()),Ure="webauthn",riA=A=>`${Ure}/${A}`,aiA=async A=>(await ILA(A)).substring(0,6-1),PLA=Xl.type({credentialIds:Xl.array(Xl.string)},"WebAuthnConfigCodec"),OLA=new Xl.Type("WebAuthnStorageCodec",A=>{if(typeof A!="object"||A===null)return!1;let j=PLA.decode(A);return!(0,E0.isLeft)(j)},(A,j)=>{if(typeof A!="string")return Xl.failure(A,j);let e;try{e=JSON.parse(A)}catch{Xl.failure(A,j)}let t=PLA.decode(e);return(0,E0.isLeft)(t)?Xl.failure(A,j):Xl.success(t.right)},A=>JSON.stringify(A)),RLA=A=>{let j=riA(A),e=vj.getItem(j);if(!e)return EN();let t=OLA.decode(e);return(0,E0.isRight)(t)?t.right:((0,E0.isLeft)(t)&&(rj(new q.LoggableError({errorClass:p`GetWebAuthnConfig`,message:p`failed to parse local storage - making new config`})),console.error("Could not parse local config - making new config")),EN())},DLA=A=>{let j=riA(A);vj.removeItem(j)},TLA=(A,j)=>{let e=riA(A),t=OLA.encode(j);vj.setItem(e,t)},EN=()=>({credentialIds:[]}),niA=async(A,j)=>{let e=H.findAccountHandlerByUuid(A);if(!e)return;let t=[];e.items?.forEach(n=>{n.overview.b5AccountUUID===A&&n.state===kA.ItemState.Active&&n?.overview?.passkey&&(j.isExcluded(A,n.vault.uuid)||t.push(aiA(n.overview.passkey.credentialId)))});let r=await Promise.all(t),a=EN();a.credentialIds=r,TLA(A,a)},oiA=A=>{let j=EN();TLA(A,j)},CLA=()=>{if(H.anyAccountIsSyncing){let A=p`Could not remove passkey cache while sync is in progress`;return console.error(A.str),!1}return H.getAccountHandlers.forEach(A=>{oiA(A.accountIdentifier.accountUUID)}),!0},_LA=()=>{if(H.anyAccountIsSyncing){let j=p`Could cache passkeys while sync is in progress`;return console.error(j.str),!1}let A=mr();return H.getAccountHandlers.forEach(j=>{niA(j.accountIdentifier.accountUUID,A)}),!0};function HLA(){Re.resolve(Ys).subscribe(nl,G8).subscribe(br,G8).subscribe(ch,Vre).subscribe(q7,G8).subscribe(Ak,G8).subscribe(Yi,G8).subscribe(Jn,Xre)}async function pN(){let A=await CM(),j;try{let[,e]=H.defaultSavingLocation();j=e.uuid}catch{}return{accounts:A,defaultVault:j}}function MLA(){return H.allAccountHandlersAreLocked?{type:"app-locked",data:void 0}:{type:"app-unlocked",data:void 0}}async function G8(){let A=MLA(),{accounts:j,defaultVault:e}=await pN();lj("settings-page-changed",{b5xAppState:A,accounts:j,defaultVault:e,hasInsiderAccess:Xi.hasInsiderAccess()},{enableTracing:!1})}function Vre(){lj("settings-page-changed",{desktopAppState:re.getDesktopAppState()},{enableTracing:!1})}function Xre(){let A=P6A();lj("settings-page-changed",{unleashFeatures:A},{enableTracing:!1})}async function KLA(){let A=MLA(),j=WA(),e=await Te.getShortcuts(),t=await FD(),{accounts:r,defaultVault:a}=await pN(),n=P6A(),o={accounts:r,autoLockEnabled:j.autoLockEnabled,autoLockOnDeviceSleep:j.autoLockOnDeviceSleep,autoLockMinutes:j.autoLockMinutes,securityPreset:j.securityPreset,newHibpEnabled:j.newHibpEnabled,language:j.language,languageChanged:j.languageChanged,defaultItemList:j.defaultItemList,defaultPasswordManager:j.defaultPasswordManager,inlineEnabled:j.inlineEnabled,inlineShowAutomatically:j.inlineShowAutomatically,inlineSaveEnabled:j.inlineSaveEnabled,socialLoginsEnabled:j.socialLoginsEnabled,showNotifications:j.showNotifications,watchtowerNotifications:j.watchtowerNotifications,keyboardShortcut:e.browserAction,lockShortcut:e.lock,saveNewItemsIn:j.saveNewItemsIn,defaultVault:a,b5xAppState:A,desktopAppState:re.getDesktopAppState(),useSharedLockState:j.useSharedLockState,slsChannel:j.slsChannel,showRichIcons:j.showRichIcons,appTheme:j.appTheme,appWidth:j.appWidth,hasInsiderAccess:Xi.hasInsiderAccess(),authenticatePasskeys:j.authenticatePasskeys,shouldCachePasskeyIds:j.shouldCachePasskeyIds,devtoolsEnabled:j.devtoolsEnabled,showPasskeySetting:t,autoSaveEnabled:j.autoSaveEnabled,autoSaveCreditCardsEnabled:j.autoSaveCreditCardsEnabled,autoSaveIdentitiesEnabled:j.autoSaveIdentitiesEnabled,autoSaveTotpEnabled:j.autoSaveTotpEnabled,unleashFeatures:n,autoSubmitLogins:j.autoSubmitLogins,firefoxDataCollection:j.firefoxDataCollection,showLockedStateNotifications:j.showLockedStateNotifications,appLauncherLaunchAppsInNewTab:j.appLauncherLaunchAppsInNewTab,appLauncherShowBookmarksBar:j.appLauncherShowBookmarksBar,appLauncherUseBackgroundImage:j.appLauncherUseBackgroundImage,requireFillSensitivePrompt:j.requireFillSensitivePrompt,requireFillCreditCardPrompt:j.requireFillCreditCardPrompt,requireFillLoginPrompt:j.requireFillLoginPrompt,showPhishingWarnings:j.showPhishingWarnings,universalSignOnEnabled:j.universalSignOnEnabled,advancedSignInUrls:j.advancedSignInUrls};return await y6().resolveSettings(o)}async function NLA(A){let j=WA(),e=A.data;if(e.language&&(e.languageChanged=!0),(!e.showNotifications||e.watchtowerNotifications)&&ym("enable-watchtower-compromised-sites"),!(e.shouldCachePasskeyIds!==void 0&&!Jre(e.shouldCachePasskeyIds))){if(e.autoLockMinutes){let{accounts:t}=await pN();t.forEach(r=>{ft("AutolockDurationSettingUpdate",{autolock_duration_setting_status:"REQUESTED",autolock_duration_before:j.autoLockMinutes,autolock_duration_after:e.autoLockMinutes},r.uuid)})}if(await i9A(e),lj("settings-page-changed",e,{enableTracing:!1}),siA(e),e.firefoxDataCollection&&Ub(),e.autoLockMinutes){let{accounts:t}=await pN();t.forEach(r=>{ft("AutolockDurationSettingUpdate",{autolock_duration_setting_status:"SUCCESSFUL",autolock_duration_before:j.autoLockMinutes,autolock_duration_after:e.autoLockMinutes},r.uuid)})}if(e.appWidth!==void 0&&Xg(),e.devtoolsEnabled!==void 0){let t=v8.getContextMenu();t&&t.updateAvailableItems(!Lt())}}}function LLA(A){if(A.data.kind==="account-based"){if(!H.getUnlockedAccountOverviews[0]||!GE.includes(A.data.featureName))return;ZA.devToggleAccountFeature(A.data.featureName)}else ZA.devTogglePreRegFeature(A.data.featureName)}function Jre(A){return A===!0?_LA():A===!1?CLA():(cl(A,p`shouldCachePasskeyIds`),!1)}function zLA(){return HP()}function ULA(A){gKA(A.data)}async function VLA(A){let{name:j,shortcut:e}=A.data,t;try{t=await Te.updateShortcut(j,e)}catch{t=e,console.warn("Failed to set new shortcut.")}switch(j){case SO:case HO:lj("settings-page-changed",{keyboardShortcut:t},{enableTracing:!1});break;case MO:lj("settings-page-changed",{lockShortcut:t},{enableTracing:!1});break;default:te(j)}}function XLA(A){let j=A.data.account,e=A.data.isEnabled,t=mr(),r=f8(t);j.vaults?.forEach(n=>{let o=r.includes(n.uuid);(!o&&e||o&&!e)&&t.toggle(j.uuid,n.uuid)}),gN(t.excluded);let a=f8(t);lj("accounts-and-vaults-changed",a),l7()}function JLA(A){let{accountUuid:j,vaultUuid:e}=A.data,t=mr();t.toggle(j,e),gN(t.excluded),lj("accounts-and-vaults-changed",f8(t)),l7()}function WLA(A){let j=mr(),e=!1;for(let t of A.data.accounts)if(t.vaults)for(let r of t.vaults){let a=j.isExcluded(t.uuid,r.uuid);(t.disabled&&!r.disabled||!r.disabled&&a||r.disabled&&!a)&&(j.toggle(t.uuid,r.uuid),e=!0)}gN(j.excluded),e&&(lj("accounts-and-vaults-changed",f8(j)),l7())}function iiA(A){Re.resolve(Ys).subscribe(Jn,()=>{ZA.accountHasFlag(A,"frameworks-autolock-longerDefault")&&(lj("settings-page-changed",{autoLockMinutes:KxA},{enableTracing:!1}),ft("BackgroundAction",{name:SLA.TelemetryString.assertSafeForTelemetry("unlock_setting_changed")},A))},{once:!0})}function mN(){return f8(mr())}function f8(A){let j=[];for(let e in A.excluded)Object.prototype.hasOwnProperty.call(A.excluded,e)&&j.push(...A.excluded[e]);return j}function QLA(A){H.removeAccount(A.data.accountUuid)}function YLA(A){let{accountUuid:j}=A.data;return H.findAccountHandlerByUuid(j)?.hasDeletePermission()||!1}function ZLA(A){let{accountUuid:j}=A.data;H.deleteAccountPermanently(j)}function A9A(){SA.resetDatabase()}function j9A(A){let j=A.data.accountUuid;ciA(j)}async function e9A(A){let{accountUuid:j}=A.data;return BN(j)}async function t9A(A){let{accountUuid:j}=A.data;return liA(j)}function r9A(){let[A]=H.defaultSavingLocation();BN(A.uuid)}async function a9A(A){let{settingsCategory:j}=A.data;if(Bt()){let e=await st();Te.openTab({url:u0(`settings/${j}`),openerTabId:e?.id})}else wLA(j)}async function n9A(A){let{accountUuid:j,password:e}=A.data;return H.findAccountHandlerByUuid(j)?.verifyAccountPassword(e)||!1}function o9A(){oo.clear()}var F8=class{_cache;_refreshTokenHandler;constructor(j){this._cache=new Map,this._refreshTokenHandler=j}deserializeToCache(j){this._cache=gb(j)}serialize(){return Bb(this._cache)}clear(){this._cache.clear()}async get(j,e,t,r){let a=this._cache.get(t),n=a&&(typeof e=="string"?a.itemUuid!==e:a.refreshToken!==r);if(a&&a.expiresIn>Date.now()&&!n)return Pj({itemUuid:a.itemUuid,accessToken:a.accessToken,refreshToken:a.refreshToken,updated:!1,context:a.context});let o=await this._refreshTokenHandler(j,r);if(o.isErr())return OA({type:"RequestError"});let i=Date.now()+o.value.expiresIn*1e3-3e3,s=typeof o.value.refreshToken<"u"?o.value.refreshToken:r;return this.set(t,{itemUuid:e,accessToken:o.value.accessToken,refreshToken:s,expiresIn:i,context:o.value.context}),Pj({itemUuid:e,accessToken:o.value.accessToken,refreshToken:s,updated:!0,context:o.value.context})}delete(j){this._cache.delete(j)}set(j,e){this._cache.set(j,e)}};var hN=class{_cache;_nakedDomainForUrl;constructor(j){this._cache=new Map,this._nakedDomainForUrl=j}deserializeToCache(j){this._cache=gb(j)}clear(){this._cache.clear()}get(j){let e=this._cache.get(j);if(e)return e;let t=this._nakedDomainForUrl(j);return this.set(j,t),t}serialize(){return Bb(this._cache)}set(j,e){this._cache.set(j,e)}};var qN=class{_cache;updatedAt;get hasTasks(){return!!this._cache}constructor(){this._cache=void 0,this.updatedAt=void 0}async getTasks(j,e,t){if(this._cache&&!e)return this._cache;if(!j||!j.account){console.warn("No client context for account, unable to get tasks");return}let r=ZA.accountHasFlag(j.account.uuid,"b2b-extension-first-guided-setup"),a=j.account.isBusiness;if(a&&!r)return;let n=await NA.getActivationHubTasks(j,{product:"password-manager",platform:"extension",audience:Qre(j.account.type,j.user?j.user.isOwner():!1),limit:10}),o=j.user?.isGuest,i={...n,tasks:n.tasks.sort((l,c)=>l.ordering-c.ordering).map(l=>({...l,name:PNA(l.name)})).filter(l=>l.name!=="unknown"&&(!(o||a&&r)||l.name!=="migrate-data"))};i.total=i.tasks.length,this._cache=i,t&&(this.updatedAt=t);let s=j.account.uuid;return i.tasks.forEach(l=>{l.completedAt&&!pv(s,l.name)&&gK(s,l.name)}),lj("refresh-activation-hub",{accountUuid:j.account.uuid}),i}clear(){this._cache=void 0,this.updatedAt=void 0}async updateCacheIfNecessary(j,e){return this.updatedAt===void 0||e>this.updatedAt?(await this.getTasks(j,!0,e),!0):!1}},Qre=(A,j)=>{if(!j)return"individual";switch(A){case Et.Type.Individual:return"individual";case Et.Type.Family:return"family-owner";case Et.Type.Business:return"business-owner";default:return"individual"}};var Yre={apiUrl:"https://platform.staging.brexapps.com/v2",tokenUrl:"https://accounts.staging.brexapps.com/oauth2/v1/token",dashboardUrl:"https://dashboard.staging.brexapps.com",type:Ey.Staging},Zre={apiUrl:"https://platform.brexapis.com/v2",tokenUrl:"https://accounts.brex.com/oauth2/v1/token",dashboardUrl:"https://dashboard.brex.com",type:Ey.Production};function Aae(A){return A.endsWith("d0f")}function Lm(A){return Aae(A)?Yre:Zre}var s9A=new Error("No credentials to use"),xN=class{_cache;_isRunning=!1;get hasCards(){return this._cache.length>0}constructor(){this._cache=[]}async update(j){let e=!1;if(this._isRunning)return{itemsUpdated:e};this._isRunning=!0;try{let t=await j();if(!t)throw s9A;let r=this._cache.reduce((i,s)=>(i[s.id]=s,i),{});this._cache=[];let a=Lm(t.clientId),n=await l9A(a,t.accessToken,t.accountId),o=[];if(n.isOk())for(let i of n.value){let s=r[i.id];s?this._cache.push(s):o.push(i)}if(o.length>0){e=!0;let i=await c9A(a,t.accessToken,o);i.isOk()&&this._cache.push(...i.value)}}catch(t){t!==s9A&&console.warn("Unable to sync Brex cards"),e=!1}return this._isRunning=!1,{itemsUpdated:e}}clear(){this._cache=[]}cards(j,e){let t=0;return this._cache.map(r=>{let a=new xA.VaultItem(e);return a.details=r.card.details,a.overview=r.card.overview,a.templateUuid=r.card.templateUuid,a.vault=e,a.localId=t++,a.overview.b5AccountUUID=j,a.cacheInformation={provider:"brex",cardId:r.id,category:r.category},a})}};var vN=class{constructor(j){this.accountHandler=j}async getManagedApplications(){let j=this.accountHandler.client?.CTX?.session;if(!j)throw new Error("This account handler does not have a valid session and therefore cannot fetch applications");let{userApplications:e}=await aA.getUserApplications(j);return e}};var GN=class{constructor(j,e,t){this.b5Api=j;this.vaultApi=e;this.user=t}async syncManagedVaultItems(){if(!this.vaultApi.isCompleteTrustIdentityEnabled()){console.info("Managed Apps - Feature flag is NOT enabled");return}if(console.info("Managed Apps - Feature flag is enabled"),Dj.isGuest(this.user||{type:""})){console.info("Managed Apps - User is guest, managed vault will not be created");return}try{let e=await this.getManagedVaultFunc(),t=await this.b5Api.getManagedApplications(),r=await this.vaultApi.getLocalManagedApplications(e);console.info(`Managed Apps - Found ${r.length} managed apps stored locally`),await this.deleteUnassignedApplications(r,t),await this.createOrMergeVaultItems(e,r,t)}catch(e){Ze(e)?rj(e):console.error("Managed Apps - error in syncManagedVaultItems",e)}}async getManagedVaultFunc(){if(!this.vaultApi.hasFetchedVaults())throw new q.LoggableError({errorClass:p`VaultFetchingRaceCondition`,message:p`Attempted to check for managed vaults before vaults were fetched`});try{return await this.vaultApi.getManagedVault()||this.createManagedVaultFunc()}catch(j){return console.error("Error getting managed vault:",j),this.createManagedVaultFunc()}}async createManagedVaultFunc(){try{return await this.vaultApi.createManagedVault()}catch(j){if(console.error("Error creating managed vault:",j),q.errors.isServerError(j,q.errors.ServerErrorCode.badRequest,q.errors.HTTPStatusCode.badRequest))return await this.getManagedVaultFunc();throw new Error("Could not find or create managed vault")}}createVaultItem(j,e){let t=new kA(j);return t.vault=j,t.uuid=jae(e.uuid),t.templateUuid=Sj.ManagedApplicationUuid,t.overview.title=e.name,t.overview.url=e.service_provider_url,t.overview.URLs=[{l:"",u:e.service_provider_url}],t.state=kA.ItemState.Active,t.details.sections.push(this.createManagedAppSection(e)),t}createManagedAppSection(j){let e={applicationUuid:j.uuid,email:this.vaultApi.getAccount().email,loginInitiationUrl:j.login_initiation_url};return{name:"",title:"",fields:[{k:kA.FieldType.ManagedApplication,n:kA.FieldType.ManagedApplication,t:j.name,v:e}]}}merge(j,e){if(!e)throw console.warn("Merge should never be called when there is not a local item. You should be creating a new item instead."),new q.LoggableError({errorClass:p`InvalidManagedApplicationItemState`,message:p`Merge should never be called when there is not a local item. You should be creating a new item instead.`});let t=e;return t.overview.title=j.name,t.overview.url=j.service_provider_url,t.overview.URLs=[{l:"",u:j.service_provider_url}],t.details.sections=t.details.sections.map(r=>!r.fields?.some(n=>n.k===kA.FieldType.ManagedApplication)?r:this.createManagedAppSection(j)),t.updatedAt=new Date,t}async createOrMergeVaultItems(j,e,t){let r=[];for(let a of t){let n=e.find(o=>this.vaultItemsRepresentSameApplication(o,a));n?this.shouldUpdateItem(a,n)&&(console.info("Managed Apps - Decided to update item after finding a change in managed fields from the remote",a.uuid),r.push(this.merge(a,n))):(console.info("Managed Apps - Did not find local item with app uuid. An item will be created.",a.uuid),r.push(this.createVaultItem(j,a)))}if(r.length===0){console.info("Managed Apps - No managed applications to save. This sync operation (for managed apps) is a no-op.");return}await this.vaultApi.saveVaultItems(j,r)}shouldUpdateItem(j,e){let t=this.findManagedApplicationField(e);if(!t)return!0;let r=this.urlHasChanged(j.service_provider_url,e.url),a=this.urlHasChanged(j.login_initiation_url,t.loginInitiationUrl);return r||a||j.name!==e.overview.title?!0:t.email!==this.vaultApi.getAccount().email}async deleteUnassignedApplications(j,e){let t=j.filter(r=>!e.find(n=>this.vaultItemsRepresentSameApplication(r,n)));console.info(`Managed Apps - Found ${t.length} local items to delete`);try{await Promise.all(t.map(r=>{r.vault.contentVersion+=1,this.vaultApi.deleteVaultItem(r)}))}catch(r){Ze(r)?rj(r):console.error("Managed Apps",r)}}vaultItemsRepresentSameApplication(j,e){let t=this.findManagedApplicationField(j);if(!t)return!1;let{applicationUuid:r}=t;return r===e.uuid}findManagedApplicationField(j){let e=xA.VaultItem.findFieldWithName(kA.FieldType.ManagedApplication,j);if(kA.ManagedApplicationField.is(e?.v))return e?.v}urlHasChanged(j,e){let t=Nl(j),r=Nl(e);return!t&&!r?!1:!r&&t||r&&!t?!0:t?.hostname!==r?.hostname||t?.pathname!==r?.pathname||t?.protocol!==r?.protocol}};function jae(A){return A.replace(/-/g,"").toLowerCase().substring(0,26)}var fN=class{constructor(j){this.accountHandler=j}async getManagedVault(){return this.accountHandler.getManagedVaultFromDb()}async createManagedVault(){let j=this.accountHandler.client?.CTX;if(!j)throw console.warn("Unable to create a managed vault because the supplied account handler's context is undefined"),new q.LoggableError({errorClass:p`NoSessionAvailableError`,message:p`Unable to create a managed vault because the supplied account handler's context is undefined`,userUuid:this.accountHandler.user?.uuid?q.logsafe.assertLogSafe(this.accountHandler.user?.uuid):void 0});let t=(await SA.getDatabase().findAccountByUUID(this.accountHandler.uuid))?.id;if(!t)throw new q.LoggableError({errorClass:p`MissingLocalAccountId`,message:q.logsafe.assertLogSafe(`Unable to find account id in local database for account uuid ${this.accountHandler.accountIdentifier.accountUUID}`),userUuid:q.logsafe.assertLogSafe(this.accountHandler.accountIdentifier.userUUID)});try{let r=await NA.createManagedVault(j),a=await aA.getManagedVault(j.session);return a.account_id=t,a.contentVersion=0,await SA.getDatabase().saveVault(a),r}catch(r){throw console.error("Error creating managed vault:",r),new q.LoggableError({errorClass:p`ManagedVaultCreationError`,message:q.logsafe.assertLogSafe(`Error creating managed vault for account ${this.accountHandler.accountIdentifier.accountUUID}`),userUuid:q.logsafe.assertLogSafe(this.accountHandler.accountIdentifier.userUUID)})}}getAccount(){return this.accountHandler.serveraccount}hasFetchedVaults(){return typeof this.accountHandler._vaults<"u"}async getLocalManagedApplications(j){let e=j.localId;return e?this.accountHandler.getVaultItems(e):Promise.resolve([])}async saveVaultItems(j,e){return e.length===0?Promise.resolve([]):this.accountHandler.saveItems(j,e)}async deleteVaultItem(j){return KK(j.uuid)}isCompleteTrustIdentityEnabled(){return ZA.accountHasFlag(this.accountHandler.serveraccount.uuid,"b2b-complete-trust-identity")}};var d9A=async A=>{if(!A.isLocked)return await zj.loadAndDecryptItemCache(),b8(),Promise.resolve()};function b8(){lj("vaults-changed",void 0),l7()}var k9A=(A,j)=>{switch(j.type){case sj.TypePersonal:switch(A){case Et.Type.Individual:return oA("Personal");case Et.Type.Business:return oA("Employee");case Et.Type.Family:default:return oA("Private")}case sj.TypeEveryone:return j.name==="Shared"?oA("Shared"):j.name;case sj.TypeManagedApplications:return oA("Managed");default:return j.name}},FN=async(A,j)=>Promise.resolve(A.find(e=>e.uuid===j)),bN=async(A,j,e,t,r)=>A?.length?(await Promise.all(A.filter(n=>n.vault.uuid===j.uuid&&n.cacheInformation===void 0).map(async n=>n.localId?SA.getDatabase().getItem(n.localId).then(async o=>{if(!e||!o?.vault_id){console.warn("Asked to load item with insufficient vault ID");return}let i=e[o.vault_id];return E8(i,o,t,r)}):void 0))).filter(n=>!!n):Promise.resolve([]);var u9A=new Map;function E9A(A){return u9A.get(A)??!1}function yN(A,j){u9A.set(A,j)}async function p9A(A){if(!E9A(A.accountUuid)){if(!A.client||!A.client.CTX)throw new Error("Missing CTX for uploading vault item snapshots");if(A.client.account()?.type===xA.Account.Type.Business)try{yN(A.accountUuid,!0),await NA.uploadVaultItemSnapshots(A.client.CTX,!0,async(j,e)=>FN(A.vaults,e),async(j,e)=>bN(A.vaultItemList,e,A.vaultsById,A.serverAccountUuid,A.nakedDomainCache))}catch{throw new q.LoggableError({errorClass:p`UploadVaultItemSnapshotsError`,message:p`There was an issue uploading vault item snapshots to server.`,userUuid:A.userUuid?W(A.userUuid):void 0})}finally{yN(A.accountUuid,!1)}}}async function m9A(A,j,e){if(E9A(A.accountUuid))return;if(!A.client||!A.client?.CTX)throw new Error("Missing CTX for uploading vault item snapshots to server");if(A.client.account()?.type!==xA.Account.Type.Business)return;let t=e.vault.contentVersion+1;try{yN(A.accountUuid,!0),await NA.sendItemSnapshotToServer(A.client.CTX,e,t,j)}catch{throw new q.LoggableError({errorClass:p`UploadVaultItemSnapshotsError`,message:p`There was an issue uploading vault item snapshots to server.`,userUuid:A.userUuid?W(A.userUuid):void 0})}finally{yN(A.accountUuid,!1)}}var B9A=A=>{if(!A?.CTX)throw new Error("Missing CTX for setting detailed vault reporting keys");if(!A.CTX.account)throw new Error("Missing account for setting detailed vault reporting keys");z1(A.CTX.accountOverview)&&A.CTX.loadVaultReportingPubKey()};var eae=[{storageKey:"compromised-sites",importFn:NA.importWatchtowerData,loadFn:NA.loadWatchtowerData,getFn:NA.getWatchtowerData},{storageKey:"2fa-sites",importFn:NA.importTwoFactorSitesList,loadFn:NA.loadTwoFactorSitesList,getFn:NA.getTwoFactorSitesList},{storageKey:"passkey-sites",importFn:NA.importPasskeySitesList,loadFn:NA.loadPasskeySitesList,getFn:NA.getPasskeySitesList}],y8;async function $N(){if(y8!==void 0){await y8;return}let A=eae.map(async j=>{let e=!1;try{let t=je.getItem(j.storageKey);t!==void 0&&(j.importFn(t),e=!0)}catch{console.error(`Error importing Watchtower data from session storage with key ${j.storageKey}`)}return(async()=>{if(await j.loadFn(),e===!1){let t=j.getFn();Object.keys(t).length>0&&je.setItem(j.storageKey,JSON.stringify(t))}})()});y8=Promise.all(A),await y8,y8=void 0}var h9A=new Map;function tae(A){return h9A.get(A)??!1}function g9A(A,j){h9A.set(A,j)}async function q9A(A){if(!tae(A.accountUuid))try{if(!A.client||!A.client?.CTX)throw new Error("Missing CTX for uploading Watchtower reports");g9A(A.accountUuid,!0),await $N(),await NA.uploadWatchtowerReports(A.client.CTX,!0,async(j,e)=>FN(A.vaults,e),async(j,e)=>bN(A.vaultItemList,e,A.vaultsById,A.serverAccountUuid,A.nakedDomainCache))}catch{console.error("There was an issue uploading Watchtower reports")}finally{g9A(A.accountUuid,!1)}}function*x9A(A,j){for(let e=0;e<A.length;e+=j)yield A.slice(e,e+j)}function v9A(){if(!WA().showNotifications||ve())return;chrome.notifications.create("storage-exceeded",{type:"basic",iconUrl:Qs,title:oA("Disk space too low"),message:oA("1Password can't open its database because there isn't enough disk space available for {browser}. To use 1Password, free up some space.",{browser:"chromium"}),requireInteraction:vi()?!0:void 0})}var G9A=(A,j)=>A.map(e=>({...e,accountUuid:j}));var f9A=J(Xn()),Xr=p`SyncError`,Iv=(F=>(F[F.all=0]="all",F[F.account=1]="account",F[F.billing=2]="billing",F[F.itemTemplates=3]="itemTemplates",F[F.itemUsage=4]="itemUsage",F[F.keysets=5]="keysets",F[F.managedApplications=6]="managedApplications",F[F.newDeviceEnrollment=7]="newDeviceEnrollment",F[F.vaults=8]="vaults",F[F.activationHub=9]="activationHub",F[F.policies=10]="policies",F[F.kolideApps=11]="kolideApps",F[F.managedCredentials=12]="managedCredentials",F[F.managedCredentialsPolicies=13]="managedCredentialsPolicies",F[F.managedCredentialsUsage=14]="managedCredentialsUsage",F))(Iv||{});var wN=class{accountHandler;managedApplicationsSyncer;dbAccount;isRunning;constructor(j,e){this.accountHandler=j,this.managedApplicationsSyncer=e,this.isRunning=!1}async run(j){j.includes(0)&&(j=Object.values(Iv).filter(r=>typeof r=="number"));let e=j.includes(0)?["all"]:j.map(r=>Iv[r]);console.info(`\u{1F4E5} Sync started for account ${this.accountHandler.uuid} - syncing ${e.join(", ")}`),performance.mark("sync-start");let t={accountUpdated:!1,alreadyRunning:this.isRunning,itemTemplatesUpdated:!1,itemUsageUpdated:!1,keysetsUpdated:!1,vaultsUpdated:!1,billingUpdated:!1,newDeviceEnrollment:!1,policiesUpdated:!1,managedCredentialsUpdated:!1,managedCredentialsPoliciesUpdated:!1,managedCredentialsUsageUpdated:!1};if(t.alreadyRunning)return console.info(`Syncer already running for account <${this.accountHandler.uuid}>`),t;await SA.upgradingPromise(),this.isRunning=!0;try{let r=await SA.getDatabase().findAccountByUUID(this.accountHandler.uuid);if(!r)throw new q.LoggableError({errorClass:Xr,message:p`Unable to run syncer. Account with the given UUID could not be found.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});this.dbAccount=r;let a=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to run syncer. Account handler client could not be created. ${a}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});if(!this.accountHandler.client?.CTX)throw new q.LoggableError({errorClass:Xr,message:p`Unable to run syncer. Account handler client CTX was undefined.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});let{language:n,languageChanged:o,shouldCachePasskeyIds:i}=WA();if(o)if(this.accountHandler.client)this.accountHandler.client.CTX.session.setLanguage(n);else throw new q.LoggableError({errorClass:Xr,message:p`Unable to run syncer. Failed to set language.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});let s=this.accountHandler?.client?.CTX?.account?.subscription?.tier?.features,l=await this.accountHandler.client.getAccountOverview();if(j.includes(1)){let m=await this.accountHandler.client.getLatestUserPreferences();t.accountUpdated=this.dbAccount.accountVersion!==l.accountVersion||this.dbAccount.userVersion!==l.userVersion||this.dbAccount.userPreferences!==m||!!s&&!W3(this.dbAccount.tier?this.dbAccount.tier?.features:[],s),t.accountUpdated&&(this.dbAccount.billingStatus!==l.billingOverview.status&&(t.billingUpdated=!0),await this.syncAccount(l))}if(!t.accountUpdated&&j.includes(2)&&(t.billingUpdated=this.dbAccount.billingStatus!==l.billingOverview.status,t.billingUpdated&&await this.syncAccountBilling(l)),(j.includes(5)||j.includes(8)||j.includes(3)||t.billingUpdated)&&(t.keysetsUpdated=this.dbAccount.keysetVersion!==l.keysetVersion,t.keysetsUpdated&&await this.syncKeysets()),j.includes(8))if(t.vaultsUpdated=await this.syncVaults(l.vaults||[]),i){let m=mr();niA(r.uuid,m)}else oiA(r.uuid);if(j.includes(3)&&(t.itemTemplatesUpdated=o||this.dbAccount.templateVersion!==l.templateVersion,t.itemTemplatesUpdated&&await this.syncItemTemplates()),!this.dbAccount?.id)throw new q.LoggableError({errorClass:Xr,message:p`Unable to run syncer. DB Account could not be found`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});if(j.includes(4)){let m=await SA.getDatabase().findItemUsageRequiringSync(this.dbAccount.id);l.supportsItemUsage?(t.itemUsageUpdated=m.length>0,t.itemUsageUpdated&&await this.syncItemUsage(m)):await SA.getDatabase().markItemUsageSynced(m)}j.includes(9)&&l.activationHubOverview?.lastUpdatedAt&&await this.accountHandler.updateActivationHubCacheIfNecessary(l.activationHubOverview.lastUpdatedAt),j.includes(7)&&this.accountHandler.isUnlocked&&(await this.getPendingEnrollmentNotifications()).length>0&&(t.newDeviceEnrollment=!0),j.includes(6)&&await this.syncManagedApplications(),j.includes(10)&&(t.policiesUpdated=await this.syncPolicies(l)),ZA.accountHasFlag(this.accountHandler.uuid,"frameworks-kolide-apps-sync")&&j.includes(11)&&await this.syncKolideApps(l);let k=ZA.accountHasFlag(this.accountHandler.uuid,"managed-credentials");if(k&&j.includes(12))try{t.managedCredentialsUpdated=await this.syncManagedCredentials(l)}catch(m){rj(Mn(m,()=>new q.LoggableError({errorClass:Xr,message:p`Failed to sync managed credentials`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0})))}if(k&&j.includes(13))try{t.managedCredentialsPoliciesUpdated=await this.syncManagedCredentialsPolices(l)}catch(m){rj(Mn(m,()=>new q.LoggableError({errorClass:Xr,message:p`Failed to sync managed credentials policies`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0})))}if(j.includes(14))try{let m=await SA.getDatabase().findManagedCredentialsUsageRequiringSync(this.dbAccount.uuid).catch(F=>{throw Mn(F,()=>new q.LoggableError({errorClass:Xr,message:p`Failed to fetch managed credentials usage from local db`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0}))});t.managedCredentialsUsageUpdated=m.length>0,t.managedCredentialsUsageUpdated&&await this.syncManagedCredentialsUsage(m)}catch(m){rj(Mn(m,()=>new q.LoggableError({errorClass:Xr,message:p`Failed to sync managed credentials usage`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0})))}performance.mark("sync-end");let u=performance.measure("sync","sync-start","sync-end").duration;return console.info(`\u2705 Sync completed for account ${this.accountHandler.uuid} - took ${Math.round(u)}ms`),this.isRunning=!1,t}catch(r){r instanceof DOMException&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&(v9A(),console.error("Storage quota exceeded; try freeing up disk space.")),performance.mark("sync-end");let a=performance.measure("sync","sync-start","sync-end").duration;throw console.info(`\u{1F6AB} Sync failed for account ${this.accountHandler.uuid} - took ${Math.round(a)}ms`),this.isRunning=!1,r}}stop=()=>{this.isRunning=!1};syncMustBeRunning(){if(!this.isRunning)throw new q.LoggableError({errorClass:Xr,message:p`Unable to run syncer. Sync is stopped but must be running.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0})}reinitializeClientIfUndefined=async()=>this.accountHandler.reinitializeClient();syncAccount=async j=>{let e=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to sync account. Account handler client could not be created. ${e}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});let t=await this.accountHandler.client.getAccount(),r=this.dbAccount;if(!r)throw new q.LoggableError({errorClass:Xr,message:p`Unable to sync account. DB Account could not be found.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});r.name=t.name,r.state=t.state,t.me&&t.me.email&&(r.updatedAt=t.me.updatedAt,r.email=t.me.email,r.userVersion=t.me.attrVersion,r.userState=t.me.state,r.userPreferences=t.me.preferences,r.userAvatar=t.me.avatar,r.userName=t.me.name,r.userType=t.me.type);let a=t.type===xA.Account.Type.Individual?"my":t.domain;return r.domain=a,r.signinAddress=rae(r.signinAddress,a),r.type=t.type,r.avatar=t.avatar,r.baseAvatarURL=t.baseAvatarURL,r.baseAttachmentURL=t.baseAttachmentURL,r.tier=t.tier,r.accountVersion=t.attrVersion,r.billingStatus=j.billingOverview.status,r.freezesAt=t.billing?.freezesAt,t.settings?.teamMemberPolicies&&(r.teamMemberPolicies=t.settings.teamMemberPolicies),r.createdAt=t.createdAt,this.syncMustBeRunning(),this.accountHandler.serveraccount=r,this.accountHandler.b5account=new xA.Account(r),SA.getDatabase().saveAccount(r)};syncAccountBilling=async j=>{let e=this.dbAccount;if(!e)throw new q.LoggableError({errorClass:Xr,message:p`Unable to sync account billing. DB Account could not be found.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});return e.accountVersion=j.accountVersion,e.billingStatus=j.billingOverview.status,e.freezesAt=j.billingOverview.accountWillFreezeAt,this.syncMustBeRunning(),this.accountHandler.serveraccount=e,this.accountHandler.b5account=new xA.Account(e),SA.getDatabase().saveAccount(e)};syncKeysets=async()=>{let j=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to sync keysets. Account handler client could not be created. ${j}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});return this.accountHandler.client.getKeysets().then(async e=>{if(this.syncMustBeRunning(),!this.dbAccount)throw new q.LoggableError({errorClass:Xr,message:p`Unable to sync keysets. DB Account could not be found.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});return SA.getDatabase().replaceAccountKeysets(this.dbAccount,e)})};syncVaults=async j=>{if(!this.dbAccount?.id)throw new q.LoggableError({errorClass:Xr,message:p`Unable to sync vaults. DB Account could not be found.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});return SA.getDatabase().getAllVaultsForAccount(this.dbAccount.id).then(async e=>{let t={};for(let n of e)t[n.uuid]=n;let r=!1,a=[];for(let n of j){let o=n.uuid,i=t[o];if(!i){r=!0,a.push(this.downloadVault(n));continue}(i.attrVersion!==n.attrVersion||i.accessVersion!==n.accessVersion)&&(r=!0,a.push(this.syncVaultAttrs(i,n.accessVersion))),i.contentVersion!==n.contentVersion&&(r=!0,a.push(this.syncVaultContent(i))),delete t[o]}for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;let o=t[n];if(!o?.id)throw new q.LoggableError({errorClass:Xr,message:p`Unable to delete vault during sync. Vault id was undefined.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});a.push(SA.getDatabase().deleteVault(o.id,({deletedItemUuids:i})=>{let s=this.dbAccount?.uuid;s&&lt.handleDbUpdates({type:"items",content:{accountUuid:s,deletedItemUuids:i,upsertedItemUuids:[]}})})),r=!0}return Promise.all(a).then(()=>r)})};syncManagedApplications=async()=>{try{await this.managedApplicationsSyncer.syncManagedVaultItems()}catch{}};syncItemTemplates=async()=>{let j=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to sync item templates. Account handler client could not be created. ${j}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});let e=await this.accountHandler.client.getItemTemplates();if(this.syncMustBeRunning(),!this.dbAccount)throw new q.LoggableError({errorClass:Xr,message:p`Unable to sync item templates. DB Account could not be found`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});return SA.getDatabase().saveTemplates(this.dbAccount,e)};syncItemUsage=async j=>{let t=((a,n)=>a.reduce((o,i,s,l)=>s%n?o:o.concat(l.slice(s,s+n)),[]))(j,100),r=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to sync item usage. Account handler client could not be created. ${r}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});for(let[,a]of t.entries())await this.accountHandler.client.postItemUsage([a]),await SA.getDatabase().markItemUsageSynced([a])};downloadVault=async j=>{let e,t=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to download vault during sync. Account handler client could not be created. ${t}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});return this.accountHandler.client.getVault(j.uuid).then(async r=>{if(e=r,!this.dbAccount?.id)throw new q.LoggableError({errorClass:Xr,message:p`Unable to download vault during sync. DB Account could not be found`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});return e.account_id=this.dbAccount.id,e.accessVersion=j.accessVersion,e.contentVersion=0,delete e.access,this.syncMustBeRunning(),SA.getDatabase().saveVault(e)}).then(async()=>this.syncVaultContent(e))};syncVaultAttrs=async(j,e)=>{let t=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to sync vault attributes. Account handler client could not be created. ${t}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});return this.accountHandler.client.getVault(j.uuid).then(async r=>(j.accessVersion=e,j.type=r.type,j.createdAt=r.createdAt,j.updatedAt=r.updatedAt,j.encAttrs=r.encAttrs,j.combinedAccess=r.combinedAccess,j.archivedKeys=r.archivedKeys,j.attrVersion=r.attrVersion,j.clientAccess=r.clientAccess,j.activeItemCount=r.activeItemCount,this.syncMustBeRunning(),SA.getDatabase().saveVault(j)))};syncVaultContent=async j=>{if(this.syncMustBeRunning(),!this.accountHandler.client?.CTX)throw new q.LoggableError({errorClass:Xr,message:p`Unable to sync vault content. CTX is undefined.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});let e;return aA.getVaultItems(this.accountHandler.client.CTX.session,j.uuid,j.contentVersion).then(async t=>(this.syncMustBeRunning(),e=t,SA.getDatabase().updateItemsFromServer(j,e,({deletedItemUuids:r,upsertedItemUuids:a})=>{j.account_id&&lt.handleDbUpdates({type:"items",content:{accountUuid:this.accountHandler.b5account.uuid,deletedItemUuids:r,upsertedItemUuids:a}})}))).then(async()=>{if(!e.batchComplete)return this.syncVaultContent(j)})};async getPendingEnrollmentNotifications(){if(!this.accountHandler.client?.CTX)throw new q.LoggableError({errorClass:Xr,message:p`Unable to sync device enrollment notifications. CTX is undefined.`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});try{return(await NA.getNotifications(this.accountHandler.client?.CTX)).filter(e=>e.type===aA.NotificationType.DeviceEnrollment)}catch(j){if(q.errors.isNewServerErrorWithStatus(j,q.errors.HTTPStatusCode.notFound))return await rj(new q.LoggableError({errorClass:p`NotificationError`,message:p`Failed to get notifications during sync.`,stackOverrideError:j,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0})),[];throw j}}syncPolicies=async j=>{let e=y6();if(!Fm.isValidAccountType(this.accountHandler.b5account.type))return!1;let t=await e.getPoliciesVersion(this.accountHandler.uuid),r=j.policiesVersion===t&&!(t!==0&&await e.isEmpty());if((await e.initializePolicies([this.accountHandler],{skipFetch:r})).length>0){let n=await y6().resolveSettings({});lj("settings-page-changed",n)}return!0};syncKolideApps=async j=>{if(!j.kolideAppsVersion)return!1;console.info(`\u{1F4E5} Syncing Device Trust Apps for account ${this.accountHandler.uuid}`);let e=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to sync kolide app list. Account handler client could not be created. ${e}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});let t=this.dbAccount?{uuid:this.dbAccount.uuid,name:this.dbAccount.name}:void 0;if(!t)throw new q.LoggableError({errorClass:Xr,message:p`Unable to run syncer. Account could not be found`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});let r=this.dbAccount?.kolideAppsVersion??0;if(j.kolideAppsVersion!==r){console.info(`\u{1F4E5} Updating local Device Trust from version ${r} to version ${j.kolideAppsVersion}`);let a=await this.accountHandler.client.getKolideApps(),n=aae(a.definition,t);if(!n)return!1;`${t.uuid}${t.name}`,ZA.accountHasFlag(this.accountHandler.uuid,"frameworks-dt4a-allow-disabled")&&(n.enabled=!0),await SA.getDatabase().removeKolideAppsForAccount(n),await SA.getDatabase().saveKolideAppsForAccount(t,n,j.kolideAppsVersion);let o=await Ba();return o?o.appListChanged(n.account,n.appList):console.info("\u{1F6AB} Could not get Device Trust Cache"),!0}return console.info(`\u{1F4E5} Local Device Trust version ${r} matched server version ${j.kolideAppsVersion}`),!1};async syncManagedCredentials(j){if(!this.dbAccount)throw new q.LoggableError({errorClass:Xr,message:p`Unable to sync managed credentials. Account could not be found`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});let e=this.dbAccount.managedCredentialsVersion;if(!j.managedCredentials?.credentialsVersion&&!e)return!1;console.info(`\u{1F4E5} Syncing Managed Credentials for account ${this.accountHandler.uuid}`);let t=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to sync managed credentials. Account handler client could not be created. ${t}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});if(j.managedCredentials?.credentialsVersion!==e){console.info(`\u{1F4E5} Updating local Managed Credentials from version ${e} to version ${j.managedCredentials?.credentialsVersion}`);let r=[];return j.managedCredentials?.credentialsVersion?(r=await this.accountHandler.client.getManagedCredentials(),`${this.dbAccount.uuid}${this.dbAccount.name}`):`${this.dbAccount.uuid}${this.dbAccount.name}`,await SA.getDatabase().replaceManagedCredentialsForAccount(j.managedCredentials?.credentialsVersion,this.dbAccount,G9A(r,this.dbAccount.uuid),(a,n,o)=>{lt.handleDbUpdates({type:"managedCredentials",content:{accountUuid:a.uuid,newManagedCredentials:n.map(i=>i.b5Uuid),droppedManagedCredentials:o}})}),!0}return console.info(`\u{1F4E5} Managed Credentials version ${e} matched server version ${j.managedCredentials?.credentialsVersion}`),!1}async syncManagedCredentialsPolices(j){if(!this.dbAccount)throw new q.LoggableError({errorClass:Xr,message:p`Unable to sync managed credentials policies. Account could not be found`,userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});let e=this.dbAccount.managedCredentialsPolicyVersion;if(!j.managedCredentials?.policiesVersion&&!e)return!1;console.info(`\u{1F4E5} Syncing Managed Credentials Policies for account ${this.accountHandler.uuid}`);let t=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to sync managed credentials policies. Account handler client could not be created. ${t}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});if(j.managedCredentials?.policiesVersion!==e){console.info(`\u{1F4E5} Updating local Managed Credentials policies from version ${e} to version ${j.managedCredentials?.policiesVersion}`);let r=await this.accountHandler.client.getManagedCredentialPolicies(),a=await g2A(this.accountHandler,r);return await SA.getDatabase().replaceManagedCredentialsPolicies(j.managedCredentials?.policiesVersion,this.dbAccount,a),!0}return console.info(`\u{1F4E5} Managed Credentials policy version ${e} matched server version ${j.managedCredentials?.policiesVersion}`),!1}syncManagedCredentialsUsage=async j=>{let e=await this.reinitializeClientIfUndefined();if(!this.accountHandler.client)throw new q.LoggableError({errorClass:Xr,message:aj.assertLogSafe(`Unable to sync managed credential usage. Account handler client could not be created. ${e}.`),userUuid:this.accountHandler.user?.uuid?W(this.accountHandler.user.uuid):void 0});for(let t of x9A(j,100))await this.accountHandler.client.reportManagedCredentialUsage(t),await SA.getDatabase().markManagedCredentialsUsageSynced(t)}};function rae(A,j){let e=new URL(A),t=e.host.split(".");return t[0]=j,e.protocol+"//"+t.join(".")}function aae(A,j){if(!j){console.warn("No account provided");return}let e=Object.entries(A.app_list).reduce((t,[r,a])=>{let n=aA.KolideApp.decode(a);return n&&(0,f9A.isRight)(n)?t.push({name:n.right.name,includeUrlPatterns:n.right.include_url_patterns,excludeUrlPatterns:n.right.exclude_url_patterns}):n&&console.warn(`Invalid app entry for key ${r}`,n.left),t},[]);return{account:j,enabled:A.enabled,appList:e}}var w8=J(Dd());var c7=J(tA()),nae=c7.partial({user:c7.exact(c7.type({sessionId:q.logsafe.LoggableStringC,authMethods:q.logsafe.LoggableStringC}))}),oae=c7.partial({app:c7.exact(c7.type({ophConnection:q.logsafe.LoggableStringC}))}),mNt=c7.intersection([nae,oae]);function $8(A){return A?p`yes`:p`no`}var za=J(tA()),iae=za.type({uuid:za.string,clientName:za.string,clientVersion:za.string,locationCity:za.union([za.string,za.undefined],"locationCity"),locationCountry:za.union([za.string,za.undefined],"locationCountry"),name:za.union([za.string,za.undefined],"deviceName")},"DeviceForEnrollment"),sae=za.keyof({SELECTING_VERIFIER:null,WAITING_FOR_CODE:null,PENDING_VALIDATION:null,SUCCESS:null}),lae=za.exact(za.type({enrollmentUuid:za.string,status:sae,device:iae},"DeviceEnrollment")),F9A=za.exact(za.type({accountUuid:za.string,accountName:za.string,enrollments:za.array(lae)}),"PendingEnrollmentsForAccount");var Bh=J(tA()),b9A=(A,j,e)=>({kid:cae(e),enc:Nt,cty:"b5+jwk+json",data:A,iv:j});function cae(A){switch(A){case"sso":return"1P_SSO_ENROLLMENT_TRANSPORT_KEY";case"webauthn":return"1P_WEBAUTHN_ENROLLMENT_TRANSPORT_KEY"}}var y9A=Bh.exact(Bh.type({ttl:Bh.number,enrollments:Bh.array(F9A)},"CachedEnrollments"));var IN="enrollments",dae=1e3*30,kae=3;async function PN(A,j){if(!j?.forceRefresh){let t=Bae();if(t&&t.size>0)return t}let e=await mae(A);return $9A(e),e}async function p0(A,j){if(!j.client?.CTX)throw new Error("Missing CTX for canceling pending device enrollment");try{await j.client.cancelPendingDeviceEnrollment(A),Ud(void 0),je.removeItem(IN)}catch(e){console.error(`Could not delete pending device enrollment ${A}: ${e instanceof Error?e.message:"unknown error"}`)}}async function uae(A){if(!A.client||!A.client.CTX||!A.user){en(new q.LoggableError({errorClass:p`GetDeviceCredentials`,message:p`Insufficient context, client, or user for enrollment`}),p`failed to decrypt Credential Bundle during enrollment`,A.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(A.serveraccount.userUUID):void 0);return}let j=A.getDeviceCredentials();if(j.isErr()||!j.value.deviceKey){en(new q.LoggableError({errorClass:p`GetDeviceCredentials`,message:p`Failed to get device credentials`}),p`failed to decrypt Credential Bundle during enrollment`,A.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(A.serveraccount.userUUID):void 0,{isDeviceCredentialsPresent:$8(!!A.serveraccount.deviceCredentials),isDeviceKeyUUIDPresent:$8(!!A.serveraccount.deviceCredentials?.deviceKeyId)});return}try{if(ve()){let a=lh(),n=await NA.getEncryptedCredentialBundle(A.client.CTX,j.value.deviceKeyId);return(await a.decrypt(A.serveraccount,j.value.deviceKeyId,n)).credentialBundle}let e=await NA.getEncryptedCredentialBundle(A.client.CTX,j.value.deviceKeyId);return await(await _s.fromObfuscated(j.value.deviceKey,A.uuid,A.user.uuid)).decryptCredentialBundle({kid:e.encCredentials.kid,enc:e.encCredentials.enc,cty:e.encCredentials.cty,data:e.encCredentials.data,iv:e.encCredentials.iv})}catch(e){en(e,p`failed to decrypt Credential Bundle during enrollment`,A.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(A.serveraccount.userUUID):void 0);return}}async function Eae(A,j,e){if(q.errors.isNewServerErrorWithStatus(j,q.errors.HTTPStatusCode.notFound)){let t=diA();t&&t.enrollmentUuid===e.enrollmentUuid&&(await d7({type:"cancelled",accountUuid:t.accountUuid,enrollmentUuid:t.enrollmentUuid}),await p0(t.enrollmentUuid,A));return}if(j.message.toLowerCase()==="invalid code used"){if(A.client?.CTX?.session&&(await aA.markSignatureInvalid(A.client.CTX.session,e.enrollmentUuid),await Pn(1e3)),e.attempts>=kae){await p0(e.enrollmentUuid,A),Ud({...e,error:{type:"TooManyAttempts"}}),await d7({type:"failed",accountUuid:e.accountUuid,enrollmentUuid:e.enrollmentUuid,content:{type:"TooManyAttempts"}});return}let t=q.generateDeviceEnrollmentCode(),r={...e,verificationCode:t,attempts:e.attempts+1};hae(r.accountUuid),Ud(r),await d7({type:"showNewCodeViewModel",accountUuid:r.accountUuid,enrollmentUuid:r.enrollmentUuid,content:{verificationCode:r.verificationCode}}),await ON(r,A);return}en(j,p`failed to enrollTrustedDevice`,A.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(A.serveraccount.userUUID):void 0,q.errors.isServerError(j)?{serverErrorReason:aj.assertLogSafe(j.message)}:{}),await p0(e.enrollmentUuid,A),Ud({...e,error:{type:"UnhandledError",message:j.message}}),await d7({type:"failed",accountUuid:e.accountUuid,enrollmentUuid:e.enrollmentUuid,content:{type:"UnhandledError"}})}async function ON(A,j){if(!j.client?.CTX||!j.user){Ud({...A,error:{type:"AccountNotFound"}}),await d7({type:"failed",accountUuid:A.accountUuid,enrollmentUuid:A.enrollmentUuid,content:{type:"AccountNotFound"}});return}if(!A.verificationCode){let t={...A,attempts:1,verificationCode:q.generateDeviceEnrollmentCode()};Ud(t),await d7({type:"showNewCodeViewModel",accountUuid:t.accountUuid,enrollmentUuid:t.enrollmentUuid,content:{verificationCode:t.verificationCode}}),await ON(t,j);return}let e=await uae(j);if(!e){Ud({...A,error:{type:"UnhandledError"}}),await d7({type:"failed",accountUuid:A.accountUuid,enrollmentUuid:A.enrollmentUuid,content:{type:"UnhandledError"}});return}try{await pae(j,{setupCode:A.verificationCode,email:j.serveraccount.email,signInAddress:j.serveraccount.signinAddress,enrollmentUuid:A.enrollmentUuid},e,"sso")}catch(t){if(t instanceof Error)return Eae(j,t,A);await p0(A.enrollmentUuid,j),Ud({...A,error:{type:"UnhandledError"}}),await d7({type:"failed",accountUuid:A.accountUuid,enrollmentUuid:A.enrollmentUuid,content:{type:"UnhandledError"}});return}Ud(void 0),$9A(new Map),qae(A.accountUuid),await d7({type:"dismissed",accountUuid:A.accountUuid,enrollmentUuid:A.enrollmentUuid})}async function pae(A,j,e,t){if(!A?.client)throw new Error("Client is undefined");if(!A.client.CTX)throw new Error("Client CTX is undefined");let r=A.client.CTX,{enrollmentUuid:a,email:n}=j,o=async(c,k)=>{let u=b9A(c,k,t);return uaA(r,a)(u)},s={credentialBundle:await e.__crypto_internal.serialize(),sendMsgA:laA(r,a),recvMsgB:caA(r,a),sendAuthA:daA(r,a),recvAuthB:kaA(r,a),sendCredentials:o},l={useCase:t,...j,...s,email:n.toLocaleLowerCase()};await jA.enrollTrustedDevice(l)}async function mae(A){let j=new Map;for(let e of A){if(!e.client||e.mustMigrateAuth)continue;let t=await e.client.getPendingDeviceEnrollments();t&&j.set(e.uuid,{accountName:e.b5account.name,accountUuid:e.uuid,enrollments:t.map(gae)})}return j}function $9A(A){let j={ttl:new Date().getTime()+dae,enrollments:[...A.values()]};try{je.setItem(IN,JSON.stringify(j))}catch{console.error("Error saving enrollments.")}}function Bae(){try{let A=je.getItem(IN);if(!A)return;let j=q.decode(A,q.json.pipe(y9A)).unwrap();if(j.ttl<new Date().getTime()){je.removeItem(IN);return}return new Map(j.enrollments.map(e=>[e.accountUuid,e]))}catch(A){en(new q.LoggableError({errorClass:p`GetPendingDeviceEnrollments`,message:p`Failed to load enrollments from sessionStorage`,stackOverrideError:A instanceof Error?A:void 0}),p`Failed to load enrollments from extension cache`);return}}var gae=({enrollmentUuid:A,device:j,status:e})=>({device:{uuid:j.uuid,clientName:j.clientName,clientVersion:j.clientVersion,locationCity:j.locationCity,locationCountry:j.locationCountry,name:j.name},enrollmentUuid:A,status:e}),diA=()=>{let A=vj.getItem("activeDeviceEnrollment");if(A)return JSON.parse(A)},Ud=A=>{A?vj.setItem("activeDeviceEnrollment",JSON.stringify(A)):vj.removeItem("activeDeviceEnrollment")};async function d7(A){await lj("trusted-device-enrollment-complete",A)}function hae(A){ft("BackgroundAction",{name:w8.TelemetryString.assertSafeForTelemetry(tp.LinkedAppEnrollmentCodeRegenerated),category:w8.TelemetryString.assertSafeForTelemetry(Uc.LinkedAppEnrollment)},A)}function qae(A){ft("BackgroundAction",{name:w8.TelemetryString.assertSafeForTelemetry(tp.LinkedAppEnrollmentSuccess),category:w8.TelemetryString.assertSafeForTelemetry(Uc.LinkedAppEnrollment)},A)}async function w9A(A){let e=(await PN([A],{forceRefresh:!0})).get(A.uuid);if(!e||e.enrollments.length===0)return;lj("new-device-enrollments",void 0),!await kiA()&&(A.hasUnseenDeviceEnrollments=!0,vn({updateIconOnly:!0}),xae(e))}function xae(A){let j=vae();for(let e of A.enrollments)e.status==="SELECTING_VERIFIER"&&P9A(Gae(A.accountName,e,!!j),e.enrollmentUuid,j)}function vae(){if(BK().type==="Connected")return()=>{m0()}}function Gae(A,j,e){let t=j.device.locationCity&&j.device.locationCountry?`${j.device.locationCity}, ${j.device.locationCountry}`:"an unknown location",r=j.device.name||j.device.clientName||oA("Unknown Device");return e?oA("{deviceName} near {location} is trying to sign in to your {accountName} account.",{deviceName:r,location:t,accountName:A}):oA("{deviceName} near {location} is trying to sign in to your {accountName} account. Open 1Password in your browser's toolbar to view.",{deviceName:r,location:t,accountName:A})}function I9A(){H.markAllDeviceEnrollmentsSeen(),vn({updateIconOnly:!0})}var O9A=async A=>{if(A.isLocked)return;await zj.loadAndDecryptItemCache();let j=await H.getFrozenAccountsInfo();return R9A(j),Promise.resolve()};var Fae=200,B0="sync-xam-app-launcher-accounts",k7=async()=>{await browser.alarms.get(B0)!==void 0&&await browser.alarms.clear(B0),browser.alarms.create(B0,{delayInMinutes:Fae/(1e3*60)})},bae=async()=>{await browser.alarms.get(B0)!==void 0&&await browser.alarms.clear(B0),lt.lockAll()},yae=async A=>{A.name===B0&&(lt.isSyncing&&await lt.syncAppLauncherAccountState(),await lt.syncAppLauncherAccountState())},D9A=()=>{browser.alarms.onAlarm.addListener(yae),mt.subscribe(ZE,k7).subscribe(Ak,k7).subscribe(Yi,k7).subscribe(q7,k7).subscribe(Rh,k7).subscribe(Jn,k7),mt.subscribe(nl,bae),y6().subscribe(k7)};var g0=p`CreateSystemVaultError`,T9A=p`GetUserCountError`,wae=p`GetPendingInvitesError`,zm=class A{_nakedDomainCache;_integrationProviderTokenCache;_signInPromise;_brexCardCache;_activationHubCache;_createSystemVaultPromise;_client;_hasUnseenDeviceEnrollments;decryptingOverviews;serveraccount;b5account;deviceJson;context;syncer;_vaults;_vaultsById;items;templates;restrictFailedLoginsPolicyLockout;constructor(j,e){this.serveraccount=j,this._nakedDomainCache=new hN(t=>jA.nakedDomainForUrl(t)),this._integrationProviderTokenCache={fastmail:new F8(b5A),brex:new F8(M9A)},this._brexCardCache=new xN,this._activationHubCache=new qN,this.b5account=new xA.Account(j),this.deviceJson=e,this._hasUnseenDeviceEnrollments=!1,this.primeIconColorCache()}get accountIdentifier(){let{uuid:j,userUUID:e,signinAddress:t}=this.serveraccount,r=fi(t);return{accountUUID:j,userUUID:e,server:r}}get hasBackOfficeFeature(){if(!this.client?.CTX?.account){console.warn(`Unable to get BO features for account ${this.client?.accountUUID}. CTX is undefined.`);return}return this.client.CTX.account.hasBackOfficeFeature}get client(){return this._client}get hasSignedInClient(){return this.client?.isSignedIn()??!1}get isLocked(){return!this.masterKey}get isUnlocked(){return!this.isLocked}get user(){return this.context?.user}get isUserSuspended(){return this.serveraccount.userState===Dj.State.Suspended}get masterKey(){return this.context?.user?.masterKey}get uuid(){return this.serveraccount.uuid}get vaults(){let j=r=>r.hasClientAccess(bg.Extension),e=r=>r.type!==xA.Vault.TypeGeneratedPasswords,t=r=>r.type!==xA.Vault.TypeSystem;return this._vaults?.filter(r=>j(r)&&e(r)&&t(r))??[]}get hasUnseenDeviceEnrollments(){return this.isUnlocked&&this._hasUnseenDeviceEnrollments}set hasUnseenDeviceEnrollments(j){this._hasUnseenDeviceEnrollments=this.isUnlocked&&j}get mustMigrateAuth(){return ZA.accountHasFlag(this.uuid,"auth-self-serve-migration-v1")&&this.client?.CTX?.session.ssoMigrationGracePeriod?.state===xA.User.State.MustMigrateAuth}markAccountDeviceEnrollmentsSeen=()=>{this.hasUnseenDeviceEnrollments=!1};getPreference(j){return this.serveraccount.userPreferences?Kj.includes(this.serveraccount.userPreferences,Wp[j]):!1}get getNakedDomainCache(){return this._nakedDomainCache}credentials=j=>{let e=this.serveraccount;return{...j,email:e.email,signinAddress:e.signinAddress,secretKey:e.secretKey,dSecret:e.dSecret,accountIdentifier:this.accountIdentifier}};saveDeviceCredentials=async j=>H.updateAccount(this.serveraccount.uuid,{deviceCredentials:j});getDeviceCredentials=()=>this.serveraccount.deviceCredentials?.deviceKey&&this.serveraccount.deviceCredentials.deviceKeyId?Pj(this.serveraccount.deviceCredentials):OA(void 0);async reinitializeClient(){if(!this.client?.CTX){let j=await L9A(this.serveraccount.uuid);return this.client?.CTX?console.info(`Successfully reinitialized client for account ${this.serveraccount.uuid}.`):console.warn(`Unable to reinitialize client for account ${this.serveraccount.uuid}.`),j}return"No error occurred"}hasDeviceCredentials=()=>this.serveraccount.deviceCredentials!==void 0;hasDeletePermission=()=>!!this.client?.CTX?.user?.hasPermission(xA.Permission.DeleteTeam);async decryptKeysets(j,e){await(async()=>{if(!j.user)throw new Error("Missing user.");if(j.user.masterKey)return;let r=e.find(n=>n.encryptedBy===xA.KID_MASTER_PASSWORD);if(!r)throw new Error("Missing active keyset.");let a=iw(r.encSymKey);j.user.masterKey=await rr.derive(a,j.user.getCredentials())})(),await NA.decryptKeysets(j,e)}verifyAccountPassword=async j=>{if(!this.serveraccount.id)throw new Error("Missing ID for server account.");let e=await t7(),t=uiA(this.serveraccount,e);if(!t.user)throw new Error("Missing user.");t.user.password=j;let r=await SA.getDatabase().getKeysetsForAccount(this.serveraccount.id);if(r.length>0)try{return await this.decryptKeysets(t,r),!0}catch{return!1}return!1};unlockWithCredentialBundle=async({auth:j,ssoAuth:{signInTokenDetails:e},user:t},r)=>{if(!this.serveraccount.id)throw new q.LoggableError({errorClass:p`UnlockError`,message:p`Missing ID for server account.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});if(!j)throw new q.LoggableError({errorClass:p`UnlockError`,message:p`Missing auth in OIDC response.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});if(this.serveraccount.userUUID!==t.userUuid||this.serveraccount.email!==t.email)throw new q.LoggableError({errorClass:p`UnlockError`,message:p`Provided OIDC user does not match server account user.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});let a=this.getDeviceCredentials();if(a.isErr()||!a.value.deviceKey)throw new q.LoggableError({errorClass:p`UnlockError`,message:p`Failed to fetch device credentials during B5X unlock.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});let n;ve()?n=(await lh().decrypt(this.serveraccount,a.value.deviceKeyId,j)).credentialBundle:n=await(await _s.fromObfuscated(a.value.deviceKey,this.uuid,this.serveraccount.userUUID)).decryptCredentialBundle(j.encCredentials);let o={email:t.email,userUuid:t.userUuid,userAuth:j.userAuth,secretKeyFormat:j.accountKeyFormat,secretKeyUuid:j.accountKeyUuid,credentialBundle:n},i=await NA.signInWithCredentialBundle(r,o,e.token,{isDesignatedAsPublic:!1});if(i.type!=="verified_context")throw new q.LoggableError({errorClass:p`UnlockError`,message:p`Unexpected signInResult when authenticating post-registration.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});let{context:s}=i,l=new mv({signedInContext:s,signinAddress:this.serveraccount.signinAddress,deviceUuid:this.deviceJson.uuid});this.setClient(l);let c=await SA.getDatabase().getKeysetsForAccount(this.serveraccount.id);if(c.length>0)try{await NA.decryptKeysets(s,c)}catch{throw new q.LoggableError({errorClass:p`UnlockError`,message:p`Failed to decrypt keysets.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0})}else try{await this.startSync(),c=await SA.getDatabase().getKeysetsForAccount(this.serveraccount.id),await NA.decryptKeysets(s,c)}catch{throw new q.LoggableError({errorClass:p`UnlockError`,message:p`Failed to decrypt keysets.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0})}return ft("AppUnlock",{unlock_method:"SSO",status:"SUCCESS"},this.uuid),this.context=s,this};unlockWithAccountPassword=async j=>{if(!this.serveraccount.id)throw new Error("Missing ID for server account.");let e=await t7(),t=uiA(this.serveraccount,e);if(!t.user)throw new Error("Missing user.");t.user.password=j;let r=this.credentials({accountPassword:j});this.restrictFailedLoginsPolicyLockout=void 0;let a=!1,n=await SA.getDatabase().getKeysetsForAccount(this.serveraccount.id);if(n.length>0)try{if(Fm.isValidAccountType(this.serveraccount.type)){let o=y6();if(await o.initializePolicies([this],{skipFetch:!0}),a=o.getPolicyForAccount(this.uuid,"restrict-failed-login-attempts")?.definition?.enabled===!0,a)throw new Error("RFLA policy is enabled")}await this.decryptKeysets(t,n),ft("AppUnlock",{unlock_method:"PASSWORD",status:"SUCCESS"},this.serveraccount.uuid)}catch{try{await this.startSync({type:"Credentials",data:{credentials:r}})}catch(o){return a&&(o instanceof M7&&o.reason===ts.failedLoginAttemptLockout?this.restrictFailedLoginsPolicyLockout=0:o instanceof K7&&o.code===td.unexpectedFetchError&&(this.restrictFailedLoginsPolicyLockout=1)),this}if(!this.serveraccount.secretKey)throw new Error("Missing secret key for server account.");n=await SA.getDatabase().getKeysetsForAccount(this.serveraccount.id),t.user=new xA.OldUser({uuid:this.serveraccount.userUUID,email:this.serveraccount.email,password:j,secretKey:S6.SecretKey.fromInput(this.serveraccount.secretKey)});try{await this.decryptKeysets(t,n),ft("AppUnlock",{unlock_method:"PASSWORD",status:"SUCCESS"},this.serveraccount.uuid)}catch{return this}}else try{await this.startSync({type:"Credentials",data:{credentials:r}}),n=await SA.getDatabase().getKeysetsForAccount(this.serveraccount.id),await this.decryptKeysets(t,n),ft("AppUnlock",{unlock_method:"PASSWORD",status:"SUCCESS"},this.serveraccount.uuid)}catch{return await this.lock(!1),this}return this.context=t,this};lock=async(j=!0)=>{if(this.items=void 0,this.templates=void 0,this._vaults=void 0,this._vaultsById=void 0,this._hasUnseenDeviceEnrollments=!1,this._signInPromise=void 0,this.context&&(NA.clearAllCachesForContext(this.context),this.context=void 0),this._nakedDomainCache.clear(),this._brexCardCache.clear(),this._activationHubCache.clear(),Object.keys(this._integrationProviderTokenCache).forEach(e=>{let t=e;this._integrationProviderTokenCache[t].clear()}),this.syncer&&(this.syncer.stop(),this.syncer=void 0),!!this.client)try{await this.client.signOut()}finally{this.destroyClient(),j&&globalThis.dispatchEvent(new CustomEvent(Rh,{detail:{accountUuid:this.uuid}}))}};destroyClient=()=>{this._client=void 0};loadAndDecryptItemsLogger=new rt("\u{1F513} Load and decrypt item overviews");loadAndDecryptItemOverviews=async()=>{if(this.isLocked)throw new q.LoggableError({errorClass:p`LoadAndDecryptItemOverviewsError`,message:p`loadAndDecryptItemOverviews failed: Must be unlocked.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});if(this.loadAndDecryptItemsLogger.info(`Beginning to load and decrypt item overviews for account with UUID ${this.uuid}.`),!this.serveraccount.id)throw new q.LoggableError({errorClass:p`LoadAndDecryptItemOverviewsError`,message:p`loadAndDecryptItemOverviews failed: Missing ID for server account.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});let j=Kl();this.decryptingOverviews=j.promise;let e={},t=await SA.getDatabase().getAllVaultsForAccount(this.serveraccount.id),r=[];for(let m of t){if(!m.id){console.error("Unable to load vault due to missing ID.");continue}e[m.uuid]=m.id,r.push(this.parseVault(this.b5account.type,m))}let a=await Promise.all(r),n;this._brexCardCache.hasCards&&(n=N9A(),n.localId?(e[n.uuid]=n.localId,a.push(n)):console.error("Unable to load brex vault due to missing ID."));let o;try{this.context&&(o=await m2A(this.serveraccount.uuid,this.context))}catch(m){rj(Mn(m,()=>new Gr({message:p`Error getting managed credentials and vault when loading item overviews.`,metaData:{account:{accountUuid:W(this.uuid)}}})))}o?.vault.localId&&(e[o.vault.uuid]=o.vault.localId,a.push(o.vault));let i={};for(let m of a){let F=e[m.uuid];i[F]=m}this._vaults=a.sort(d6.vaultSort),this._vaultsById=i,await this.loadNakedDomainCache();let s=await SA.getDatabase().getItemOverviewsForAccount(this.serveraccount.id);this.loadAndDecryptItemsLogger.info(`${s?.length} dbItems found for server account ID ${this.serveraccount.id}`);let l=[];for(let m of s){if(!m.vault_id){console.warn(`Missing vault ID for server account ID ${this.serveraccount.id}`);continue}let F=this._vaultsById[m.vault_id];F.type===xA.Vault.TypeGeneratedPasswords||F.type===xA.Vault.TypeSystem||l.push(E8(F,m,this.serveraccount.uuid,this._nakedDomainCache))}let c=await Promise.all(l);this.items=c,RNA(),n!==void 0&&this.items.push(...this._brexCardCache.cards(this.uuid,n)),o?.vault&&this.items.push(...o.items),this.loadAndDecryptItemsLogger.info(`${this.items?.length} items were loaded from the database for server account ID ${this.serveraccount.id}!`);let k=await SA.getDatabase().getTemplates(this.serveraccount.id),u=ma.vaultItemTemplatesFromAPI(k);this.templates=u.filter(m=>m!==null&&typeof m<"u"),await this.saveNakedDomainCache(),await this.loadIntegrationProviderTokenCache(["fastmail","brex"]),this.loadAndDecryptItemsLogger.info(`Finished loading and decrypting item overviews for account with UUID ${this.uuid}`),j.resolve()};getItem=async j=>{if(j.type!=="databaseId"&&j.type!=="cachedItem"&&j.type!=="managedCredential"){console.warn("Asked to load a type that is not either a database, cached item, or managed credential from an account handler");return}if(j.type==="cachedItem")return this.items?.find(e=>e.uuid===j.data.id&&e.cacheInformation?.provider===j.data.type);if(CH(j)){let e=this.items?.find(t=>t.uuid===j.data.uuid)?.vault;if(!e){console.warn("Could not find vault for managed credential.");return}if(!this.context){console.warn("Could not find context for managed credential.");return}return B2A(this.serveraccount.uuid,this.context,e,j)}return SA.getDatabase().getItem(j.data).then(async e=>{if(!this._vaultsById||!e?.vault_id){console.warn("Asked to load item with insufficient vault ID from an account handler");return}let t=this._vaultsById[e.vault_id];return E8(t,e,this.serveraccount.uuid,this._nakedDomainCache)})};setClient=j=>{this._client=j,this._client.onClientInvalidated=this.onClientInvalidated,this._client.onServerChanged=this.onServerChanged,j8(this._client,"All")};startSync=async(j,e)=>Na.asyncObserve("startSync","accountHandler",async t=>this.syncer?this.runSyncer([0]).catch(r=>Ji(this,r)):Na.asyncObserve("startSync-newSyncer","accountHandler",async r=>{await this.signin(j),qs.info("Collecting account-based flags on account sync."),await GHA([this],r).finally(async()=>{let a=this.createManagedApplicationsSyncer();return this.syncer=new wN(this,a),this.runSyncer([0]).catch(n=>Ji(this,n))})},t),e);createManagedApplicationsSyncer=()=>{let j=new fN(this),e=new vN(this),t=this.client?.CTX?.user;return new GN(e,j,t)};signin=async j=>{if(!this.hasSignedInClient){if(!j)throw new q.LoggableError({errorClass:p`SigninError`,message:p`Attempted to run signin but no initData was provided`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});return this._signInPromise=(async()=>{try{if(j.type==="Credentials"&&this.serveraccount.id){let{credentials:e,additionalSignInOptions:t}=j.data,r=await SA.getDatabase().hasGeneratedPasswordVault(this.serveraccount.id),a=await Hd({credentials:e,device:this.deviceJson,onClientInvalidated:this.onClientInvalidated,onServerChanged:this.onServerChanged,accountAttrs:r?void 0:[aA.AccountAttrs.Groups],additionalSignInOptions:t});this.setClient(a)}else if(j.type==="Other"){let{client:e}=j.data;this.setClient(typeof e=="function"?await e():e)}else throw new q.LoggableError({errorClass:p`SigninError`,message:p`Attempted to run signin but no initData was provided`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});await this.updateAccountFromContext()}finally{this._signInPromise=void 0}})(),this._signInPromise}};waitForClient=async()=>{if(this.client)return this.client;if(this._signInPromise===void 0)throw new xe({errorClass:p`AccountHandler`,message:p`waitForClient called, but client does not exist and no sign-in is in progress`});if(await j6.withTimeout(this._signInPromise,30*1e3,"waitForClient"),!this.client)throw new xe({errorClass:p`AccountHandler`,message:p`_signInPromise resolved but client is undefined`});return this.client};hasGeneratedPasswordVault=async()=>!!this.serveraccount.id&&!!await SA.getDatabase().getGeneratedPasswordVault(this.serveraccount.id);getGeneratedPasswordVault=async()=>(await this.createGeneratedPasswordsVaultIfNeeded(),this._vaults?.find(j=>j.type===xA.Vault.TypeGeneratedPasswords));getSystemVaultFromMemory=()=>this._vaults?.find(j=>j.type===xA.Vault.TypeSystem);getManagedVaultFromDb=async()=>{let j=this._vaults?.find(r=>r.type===xA.Vault.TypeManagedApplications),e=this.serveraccount.id;if(!j||!e)return;let t=await SA.getDatabase().getVaultWithUUID(e,j.uuid);if(t)return await this.parseVault(this.b5account.type,t)};runSyncer=async j=>{if(!this.syncer)return;if(this.mustMigrateAuth){await this.syncer.run([5,1]).finally(async()=>Ft.updateConnectivityStatus());return}let e=await this.syncer.run(j).finally(async()=>Ft.updateConnectivityStatus()),t=await this._brexCardCache.update(async()=>{let r;if(!this.isLocked&&!this.mustMigrateAuth)try{let a=await this.loadSystemVaultItems();r=$m("brex",a)}catch(a){Ze(a)&&rj(a)}if(r?.length){let a=r[0].accountId,n=await this.getIntegrationProviderAccessToken(a,"brex");if(n)return{accountId:a,accessToken:n.accessToken,clientId:n.context.clientId,clientSecret:n.context.clientSecret}}});if(this.isUnlocked){e.billingUpdated&&await O9A(this),e.newDeviceEnrollment&&await w9A(this),(e.vaultsUpdated||e.itemTemplatesUpdated||t.itemsUpdated||e.managedCredentialsUpdated)&&(await this.loadAndDecryptItemOverviews(),await d9A(this)),(e.managedCredentialsPoliciesUpdated||e.vaultsUpdated)&&Na.asyncObserve("findAndUploadManagedCredentials","syncer",async()=>XK(this),void 0,!0).catch(r=>{rj(Mn(r,()=>new Gr({message:p`Failed to run find and upload managed credentials`})))}),this.vaults&&this.user&&q9A({accountUuid:this.uuid,client:this._client,vaults:this.vaults,serverAccountUuid:this.serveraccount.uuid,nakedDomainCache:this._nakedDomainCache,vaultItemList:this.items,vaultsById:this._vaultsById});try{B9A(this.client),this.vaults&&this.user&&p9A({accountUuid:this.uuid,client:this._client,userUuid:this.user.uuid,vaults:this.vaults,serverAccountUuid:this.serveraccount.uuid,nakedDomainCache:this._nakedDomainCache,vaultItemList:this.items,vaultsById:this._vaultsById})}catch(r){console.error("There was an issue uploading vault item snapshots to server:",r)}}};saveItem=async(j,e)=>{if(si(j))return this.saveManagedCredential(j,e);let t=await this.getVaultWithUUID(j.vault.uuid);if(!t){let r=W(`vault doesn't exist: ${j.vault.uuid}`);throw this.createSaveError(r)}return await this.saveItems(t,[j],e),j};saveManagedCredential=async(j,e)=>{if(await this.reinitializeClient(),!this.client)throw this.createSaveError(p`No api client for save item`);return await h2A(this.client,this.serveraccount.uuid,j),await this.runSyncer([12]).catch(t=>Ji(this,t)).then(e),j};saveItems=async(j,e,t=()=>PaA(p`"onSyncerFinished" callback omitted for "saveItems"`))=>{if(await this.reinitializeClient(),!this.client)throw this.createSaveError(p`undefined client`);let r,a;try{r=await this.client.saveItems(e,j)}catch(n){a=n}if(this.isVersionError(a)&&(r=await this.handleVersionAndRetry(e,j.uuid)),!r)throw this.createSaveError(p`nothing saved by client`,a);return await this.runSyncer([8]).catch(n=>Ji(this,n)).then(t),this.sendItemSnapshot(r,j.uuid),e};createSaveError=(j,e)=>{let t="no loggable error provided";rd(e)?t=`${e.reason} ${e.code}`:e$(e)?t=`${e.code}`:(N7(e)||e instanceof Sd)&&(t=e.message);let r=W(`Unable to save item: ${j.str} - ${t}`);return new q.LoggableError({errorClass:p`SaveItemError`,message:r,userUuid:this.user?.uuid?W(this.user.uuid):void 0})};getKolideAgentEnrollmentToken=async()=>this.client?.CTX?this.client.CTX?.session?await aA.getKolideAgentEnrollmentToken(this.client.CTX.session).then(e=>({type:"success",data:e})).catch(()=>({type:"failure",code:W("unknown-fetch-b5-fail"),message:p`getKolideAgentEnrollmentToken failed while making request`})):{type:"failure",code:W("missing-session"),message:p`getKolideAgentEnrollmentToken could not make request`}:{type:"failure",code:W("missing-CTX"),message:p`getKolideAgentEnrollmentToken could not make request`};sendItemSnapshot=async(j,e)=>{let t=await this.getVaultWithUUID(e);if(!t)throw this.createSaveError(p`vault missing`);let r=bE(this.uuid,this);for(let a of await ma.vaultItemsFromAPI(j,t))m9A({accountUuid:this.uuid,client:this._client,userUuid:this.user?.uuid},r,a).catch(n=>{console.error("There was an issue uploading vault item snapshots to server:",n)})};handleVersionAndRetry=async(j,e)=>{try{await this.runSyncer([8])}catch{throw this.createSaveError(p`sync failed during save`)}let t=await this.getVaultWithUUID(e);if(!t)throw this.createSaveError(p`vault missing`);if(!this.client)throw this.createSaveError(p`client was lost during save`);let a=(await Promise.all(j.map(async i=>Br(i.uuid,e)))).filter(i=>!!i),n=j.map(i=>{let s=a.find(l=>l.uuid===i.uuid);return i.itemVersion=s?s.itemVersion:i.itemVersion,i}),o;try{o=await this.client.saveItems(n,t)}catch(i){throw console.error("Account Handler: failed to save after sync:",i),this.createSaveError(p`save failed after sync`,i)}return o};isVersionError=j=>q.errors.isServerError(j,void 0,q.errors.HTTPStatusCode.conflict);createDelegateSessionContextInitialization=async j=>{if(!this.client)throw console.error("Account handler doesn't have a client so it can't create a delegated session"),new Error("Account handler doesn't have a client so it can't create a delegated session");return this.client.getDelegateSessionInit(j)};signDeviceTrustPublicKey=async j=>{if(!this.client)throw console.error("Account handler doesn't have a client so it can't sign device trust public key"),new Error("Account handler doesn't have a client so it can't sign device trust public key");return this.client.signDeviceTrustPublicKey(j)};createAccountVaultOverview=()=>{let j=this.serveraccount,e=[];for(let t of this.vaults){if(!this.user)throw new q.LoggableError({errorClass:p`AccountHandler`,message:p`Missing user`,userUuid:void 0});if(um(t)){let r=t.getCombinedAcl();if(r&&!Kj.includes(r,me.CreateItem))continue}else if(!this.user.hasVaultACL(t,xA.vaultACL.CreateItem))continue;e.push({uuid:t.uuid,accountUuid:j.uuid,name:t.name,baseAvatarUrl:j.baseAvatarURL,avatar:t.avatar,fullAvatarUrl:DMA(t.avatar,"",j.avatar,t.type,j.uuid,j.baseAvatarURL),type:t.type})}return{uuid:j.uuid,name:j.name,baseAvatarUrl:j.baseAvatarURL,avatar:j.avatar,fullAvatarUrl:RMA(new xA.Account(j)),type:j.type,vaults:e}};_findVaultWithUUID=j=>{if(!(!this._vaults||!this.vaults||!this.user)){for(let e of this.vaults)if(e.uuid===j)return e}};findVaultWithUUIDAndCreatePermission=j=>{let e=this._findVaultWithUUID(j);if(!(e&&!this.user?.hasVaultACL(e,xA.vaultACL.CreateItem)))return e};recordUserActionHistoryEvent=async(j,e)=>{if(!this.serveraccount.uuid)throw new q.LoggableError({errorClass:p`AccountHandler`,message:p`Unable to record action history. Missing UUID for server account`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});let t={v:"v1",c:{a:this.serveraccount.uuid,i:j,t:Date.now(),s:e}};return SA.getDatabase().recordUserActionHistoryEvent(t)};markItemUsed=async(j,e)=>{if(j.cacheInformation?.provider!=="brex"){if(!this.serveraccount.id)throw new q.LoggableError({errorClass:p`AccountHandler`,message:p`Unable to mark item as used. Missing ID for server account`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});return si(j)?SA.getDatabase().markManagedCredentialUsed(this.serveraccount.uuid,j.uuid,j.itemVersion,e):SA.getDatabase().markItemUsed(this.serveraccount.id,j,j.vault,e)}};getVaultItems=async j=>{let e=await SA.getDatabase().getItemOverviewsForVault(j);return(await Promise.all(e.map(async r=>r.id?this.getItem({type:"databaseId",data:r.id}):void 0))).filter(r=>!!r)};loadPasswordHistory=async()=>{let j=await this.getGeneratedPasswordVault();if(!j?.localId)throw new q.LoggableError({errorClass:p`AccountHandler`,message:p`Unable to load password history. Invalid generated password vault`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});return this.getVaultItems(j.localId)};loadSystemVaultItems=async()=>{let{newlyCreated:j,vault:e}=await this.getOrCreateSystemVault();if(!e?.localId){if(j&&e.activeItemCount===0)return[];throw new q.LoggableError({errorClass:p`SystemVaultError`,message:p`Unable to load system vault items. Invalid system vault`,userUuid:this.user?.uuid?W(this.user.uuid):void 0})}return this.getVaultItems(e.localId)};_getChildAccountRelationship=async j=>{let e="CACHED_CHILD_ACCOUNT_RELATIONSHIPS",t=je.getItem(e),r=new Map(t?JSON.parse(t):[]),a=r.get(this.uuid);if(a)return a;let n=await NA.getChildAccountRelationship(j);return r.set(this.uuid,n),je.setItem(e,JSON.stringify(Array.from(r))),n};loadPersonItem=async()=>{let e=(await this.loadSystemVaultItems()).find(t=>t.templateUuid==="910");if(e)return e.details};shouldShowFreeFamilyAccountNotification=async()=>{if(this.isLocked||!this.client||!this.hasBackOfficeFeature?.familyChildAccounts||this.client.account()?.subscription.status!==pl.Status.Active)return!1;let j=this.client.user();if(!j||Dj.isGuest(j)||j.state!==Dj.State.Active||!this.client.CTX)return!1;try{let{state:e}=await this._getChildAccountRelationship(this.client.CTX);return e===""||e===xA.ChildAccountRelationship.State.Ready}catch(e){return console.error("Unable to determine child account relationship for account:",e),!1}};shouldShowEmailPreferencesNotification=()=>{if(this.isLocked||!this.client)return!1;let j=this.client.account(),e=this.client.user();return!j||!e?!1:j.type===xA.Account.Type.Business&&(Dj.isOwner(e)||Dj.isAdmin(e))&&e.newsletterPrefs===0&&!!j.createdAt&&j.createdAt.getTime()<new Date(Date.UTC(2021,5,1)).getTime()};getFreeFamilyCode=async()=>{if(!this.client?.CTX)return;let{state:j,code:e}=await this._getChildAccountRelationship(this.client.CTX);switch(j){case"R":return e;case"":return(await NA.createChildAccountRelationship(this.client.CTX)).code;default:return}};updateSigninDetails=j=>{this.serveraccount=j};static expectMuk(j){if(j.alg!==Nt)throw new Error(`Unexpected alg: ${j.alg}`);if(!j.ext)throw new Error("Unexpected ext");if(!j.key_ops||j.key_ops.length!==2)throw new Error(`Invalid key_ops: ${JSON.stringify(j.key_ops)}`);if(j.kty!=="oct")throw new Error(`Unexpected kty: ${j.kty}`);if(!j.k)throw new Error("undefined key material");return{alg:j.alg,ext:j.ext,key_ops:["decrypt","encrypt"],kty:j.kty,kid:j.kid,k:j.k}}async unlockWithMasterUnlockKey(j,e){let t=A.expectMuk(j);if(!this.serveraccount.id)throw console.error("Missing server account ID in unlockWithMasterUnlockKey"),new q.LoggableError({errorClass:p`AccountHandler`,message:p`Invalid server account ID`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});if(!j.alg||!j.k)throw console.error("Invalid muk in unlockWithMasterUnlockKey"),new q.LoggableError({errorClass:p`AccountHandler`,message:p`Invalid muk`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});let r=await t7(),a=uiA(this.serveraccount,r);if(!a.user)throw console.error("Missing user in unlockWithMasterUnlockKey"),new q.LoggableError({errorClass:p`AccountHandler`,message:p`Missing user`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});let n=await SA.getDatabase().getKeysetsForAccount(this.serveraccount.id);if(a.user.masterKey=await rr.fromJwk(t),n.length>0)try{await this.decryptKeysets(a,n)}catch{try{await this.startSync(e)}catch{return this}n=await SA.getDatabase().getKeysetsForAccount(this.serveraccount.id);let o=this.serveraccount.secretKey?S6.SecretKey.fromInput(this.serveraccount.secretKey):void 0;a.user=new xA.OldUser({uuid:this.serveraccount.userUUID,email:this.serveraccount.email,secretKey:o}),a.user.masterKey=await rr.fromJwk(t);try{await this.decryptKeysets(a,n)}catch{return this}}else await this.startSync(e),n=await SA.getDatabase().getKeysetsForAccount(this.serveraccount.id),await this.decryptKeysets(a,n);return this.context=a,console.info(`Hooray!; Unlocked account ${this.uuid} with MUK; \u{1F389}`),this}setUserState=async j=>H.updateAccount(this.serveraccount.uuid,{userState:j});onClientInvalidated=()=>{this.destroyClient(),Ft.updateConnectivityStatus()};onServerChanged=j=>{if(this.isLocked||!this.syncer||this.syncer.isRunning)return;switch(j?.eventType){case 1:if(!this.user){console.warn("No user object during sync, skipping trelicaAppsUpdated event");break}lt.invoke("TrelicaAppDataChanged",{accountUuid:this.b5account.uuid,userUuid:this.user?.uuid}).then(t=>{switch(t){case hy.FailedToSync:console.warn("Xam backend failed to process sync event");break;case hy.AccountNotFound:console.warn("Xam backend couldn't find account");break}}).catch(t=>{console.error(t)});break;default:this.runSyncer([0]).catch(t=>Ji(this,t))}};async getVaultWithUUID(j){if(!this.serveraccount.id){console.warn("Get vault with UUID. Missing server account ID.");return}let e=await SA.getDatabase().getVaultWithUUID(this.serveraccount.id,j);if(!e){console.warn("Get vault with UUID. Missing server vault.");return}return await this.parseVault(this.b5account.type,e)}parseVault=async(j,e)=>{let t=new xA.Vault({uuid:e.uuid,name:"",type:e.type,desc:""});if(t.localId=e.id,t.createdAt=e.createdAt?C9A(e.createdAt):void 0,t.updatedAt=e.updatedAt?C9A(e.updatedAt):void 0,t.attrVersion=e.attrVersion,t.contentVersion=e.contentVersion,t.activeItemCount=e.activeItemCount??t.activeItemCount,t.clientAccess=e.clientAccess??t.clientAccess,!e.combinedAccess)throw new Error("Missing vault combinedAccess information");return t.setCombinedAcl(e.combinedAccess.acl),this.parseAndDecryptVaultAccessRecord(t,e.combinedAccess).then(async r=>(t.setAccessList([r]),t.decryptAttrs(e.encAttrs).then(()=>k9A(j,t)).then(a=>{if(!this.user)throw new Error("Missing user.");return this.user.setVaultAccess(r),t.name=a,t})))};parseAndDecryptVaultAccessRecord=async(j,e)=>new Promise((t,r)=>{if(!this.context)throw new q.LoggableError({errorClass:p`AccountHandler`,message:p`Missing context. Unable to parse and decrypt vault: ${W(j.uuid)}`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});let a=new xA.VaultAccess(e);if(!a.encVaultKey)throw new q.LoggableError({errorClass:p`AccountHandler`,message:p`Missing encrypted vault key for vault: ${W(j.uuid)}`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});let n=NA.findDecryptedKeyset(this.context,a.encVaultKey.kid);if(!n)throw new q.LoggableError({errorClass:p`AccountHandler`,message:p`Missing keyset for vault: ${W(j.uuid)}`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});a.decryptVaultKey(n).then(o=>{o.sn=e.vaultKeySN,a.vaultKey=o,j.activeKey||(j.activeKey=o),t(a)}).catch(o=>{r(o)})});loadNakedDomainCache=async()=>{if(this.masterKey&&this.serveraccount.id)try{let j=await SA.getDatabase().getEncryptedCache(this.serveraccount.id,"nakedDomain");if(j?.key==="edba9ccae448"){let e=await this.masterKey.decrypt(j.cache);this._nakedDomainCache.deserializeToCache(q.ab2str(e))}}catch{console.info("Failed to load encrypted cache.")}};saveNakedDomainCache=async()=>{if(this.masterKey&&this.serveraccount.id)try{let j=this._nakedDomainCache.serialize(),e=await this.masterKey.encrypt(q.str2ab(j));if(e){let t={account_id:this.serveraccount.id,cache:e,type:"nakedDomain",key:"edba9ccae448"};SA.getDatabase().saveEncryptedCache(t)}}catch{console.info("Failed to save encrypted domain cache.")}};getIntegrationProviderAccessToken=async(j,e)=>{let t;try{t=await this.loadSystemVaultItems()}catch(o){Ze(o)&&rj(o);return}let r;!this.isLocked&&!this.mustMigrateAuth&&(r=$m(e,t));let a=r?.find(o=>o.accountId===j);if(!a)return;if(!this.client?.CTX){console.warn(`No client context for account ${this.uuid}, unable to get ${e} access token`);return}let n=await this._integrationProviderTokenCache[e].get(this.client.CTX,e==="brex"?a.itemUuid:void 0,a.accountId,a.refreshToken);if(n.isOk())return n.value.updated&&(await this.saveProviderTokenCache(e,this._integrationProviderTokenCache[e]),e==="brex"&&await K9A(j,n.value.refreshToken,t,this.uuid)),{...n.value,context:n.value.context}};removeProviderAccessToken=async(j,e)=>{this._integrationProviderTokenCache[e].delete(j),await this.saveProviderTokenCache(e,this._integrationProviderTokenCache[e])};loadIntegrationProviderTokenCache=async j=>{if(this.masterKey&&this.serveraccount.id)try{for(let e of j){if(!(this.masterKey&&this.serveraccount.id))return;let t=await SA.getDatabase().getEncryptedCache(this.serveraccount.id,`${e}Token`);if(t?.key==="edba9ccae448"){let r=await this.masterKey.decrypt(t.cache);this._integrationProviderTokenCache[e].deserializeToCache(q.ab2str(r))}}}catch{console.info("Failed to load encrypted cache.")}};saveProviderTokenCache=async(j,e)=>{if(this.masterKey&&this.serveraccount.id)try{let t=e.serialize(),r=await this.masterKey.encrypt(q.str2ab(t));if(r){let a={account_id:this.serveraccount.id,cache:r,type:`${j}Token`,key:"edba9ccae448"};SA.getDatabase().saveEncryptedCache(a)}}catch{console.info("Failed to save encrypted domain cache.")}};destroyAccount=()=>{SA.getDatabase().deleteAccountWithUUID(this.b5account.uuid,({deletedItemUuids:j,accountUuid:e})=>{lt.handleDbUpdates({type:"items",content:{accountUuid:e,deletedItemUuids:j,upsertedItemUuids:[]}})}).then(()=>globalThis.dispatchEvent(new Event(ZE))),this.lock(!1)};async createGeneratedPasswordsVaultIfNeeded(){if(!this.serveraccount.id){console.warn("Create Generated Passwords Vault: Missing server account ID.");return}if(!await SA.getDatabase().hasGeneratedPasswordVault(this.serveraccount.id)&&!(this.isLocked||this.mustMigrateAuth)){if(!this.client?.CTX){console.warn("Create Generated Passwords Vault: Missing client CTX.");return}try{await NA.createGeneratedPasswordsVault(this.client.CTX)}catch{}return this.runSyncer([8]).catch(e=>Ji(this,e))}}getOrCreateSystemVault=async()=>{let j=await this.getSystemVault();return j?{newlyCreated:!1,vault:j}:this._createSystemVaultPromise!==void 0?this._createSystemVaultPromise:(this._createSystemVaultPromise=this._createSystemVault().catch(e=>{throw Ze(e)&&rj(e),new Error("Unable to create a system vault")}),this._createSystemVaultPromise)};waitForDecrypt=async()=>{if(!(typeof this.decryptingOverviews>"u"))return this.decryptingOverviews};getAndParseSystemVaultFromDatabase=async()=>{if(!this.serveraccount.id)return;let j=await SA.getDatabase().getSystemVault(this.serveraccount.id);if(j)return await this.parseVault(this.b5account.type,j)};getSystemVault=async()=>{let j=this.getSystemVaultFromMemory();if(j)return j;try{let e=await this.getAndParseSystemVaultFromDatabase();if(e)return e}catch(e){Ze(e)&&rj(e)}};_createSystemVault=async()=>{if(!this.serveraccount.id)throw new q.LoggableError({errorClass:g0,message:p`Cannot create system vault due to missing server account ID`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});if(this.isLocked)throw new q.LoggableError({errorClass:g0,message:p`Cannot create system vault while locked`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});if(!this.client?.CTX)try{await this.reinitializeClient()}catch{rj(new q.LoggableError({errorClass:g0,message:p`Attempted to reinitialize the Client, but received an error.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0}))}if(!this.client)throw new q.LoggableError({errorClass:g0,message:p`Cannot create system vault due to missing client`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});if(!this.client.CTX)throw new q.LoggableError({errorClass:g0,message:p`Cannot create system vault due to missing client CTX`,userUuid:this.user?.uuid?W(this.user.uuid):void 0});try{let j=await NA.getSystemVault(this.client.CTX);if(j){console.info(`System vault already created for account ${this.serveraccount.id}.`),await Promise.race([this.runSyncer([8]).catch(t=>Ji(this,t)),new Promise(t=>setTimeout(t,500))]);let e=await this.getAndParseSystemVaultFromDatabase();return e?{newlyCreated:!1,vault:e}:{newlyCreated:!1,vault:j}}}catch(j){console.error(`Unable to determine if system vault exists ${this.serveraccount.id}.`,j)}try{return{newlyCreated:!0,vault:await NA.createSystemVault(this.client.CTX)}}catch(j){throw console.error(`Failed to create system vault for account ${this.serveraccount.id}.`,j),new q.LoggableError({errorClass:g0,message:p`Failed to create system vault for account`,userUuid:this.user?.uuid?W(this.user.uuid):void 0})}finally{this.runSyncer([8]).catch(j=>Ji(this,j))}};async primeIconColorCache(){if(!this.serveraccount.id){console.warn("Prime Icon Color Cache: Missing ID for server account.");return}let j=await SA.getDatabase().getItemOverviewsForAccount(this.serveraccount.id);for(let{uuid:e}of j)jA.generateRichIconBackgroundColor(e)}updateAccountFromContext=async()=>{let{client:j,serveraccount:e}=this,t=[];return j?.CTX?.user?.email&&j.CTX.user.email!==e.email&&(`${e.uuid}`,t.push(H.updateAccount(e.uuid,{email:j.CTX.user.email}).catch(()=>console.error(`Failed update: email for ${e.uuid}`)))),j?.CTX?.user?.dSecret&&j.CTX.user.dSecret!==e.dSecret&&(`${e.uuid}`,t.push(H.updateAccount(e.uuid,{dSecret:j.CTX.user.dSecret}).catch(()=>console.error(`Failed update: dSecret for ${e.uuid}`)))),j?.CTX?.account?.domain&&j.CTX.account.domain!==e.domain&&(`${e.uuid}`,t.push(H.updateAccount(e.uuid,{domain:j.CTX.account.domain}).catch(()=>console.error(`Failed update: domain for ${e.uuid}`)))),Vi.onAccountSignInSuccess(),Promise.all(t)};getDecryptedCache=async j=>{if(this.masterKey&&this.serveraccount.id)try{let e=await SA.getDatabase().getEncryptedCache(this.serveraccount.id,j);if(!e)return;let t=await this.masterKey.decrypt(e.cache);return q.ab2str(t)}catch{return}};encryptAndSaveCache=async(j,e,t)=>{if(this.masterKey&&this.serveraccount.id)try{let r=await this.masterKey.encrypt(q.str2ab(t));if(r){let a={account_id:this.serveraccount.id,cache:r,type:j,key:e};SA.getDatabase().saveEncryptedCache(a)}}catch{console.info("Failed to save encrypted cache: ",j)}};getFeatureFlags=async j=>{if(!this.client?.CTX)throw new Error(`Unable to get features for account ${this.client?.accountUUID}. CTX is undefined.`);return(await NA.getFeatures(this.client?.CTX,GE,j?.traceId,j?.spanId)).features.reduce((t,r)=>(Object.keys(gm).includes(r.name)&&(t[r.name]={enabled:!0,variant:r.variantPayload}),t),{})};updateActivationHubCacheIfNecessary=async j=>this._activationHubCache.updateCacheIfNecessary(this.client?.CTX,j);getActivationHubTasks=async(j,e)=>this._activationHubCache.getTasks(this.client?.CTX,j,e);completeActivationHubTask=async(j,e)=>{if(!this.client?.CTX){console.warn(`No client context for account ${this.uuid}, unable to get activation hub tasks`);return}let t=new Date().toISOString();return NA.completeActivationHubTask(this.client.CTX,{uuid:e,dismiss:j,completedAt:t})};completeActivationHubTaskByName=async(j,e)=>{if(!pv(this.uuid,j)){let t=await this.getActivationHubTasks();if(t){let r=t.tasks.find(a=>a.name===j&&a.completedAt===void 0);if(r){let a=!!e;await this.completeActivationHubTask(a,r.uuid),await this.getActivationHubTasks(!0)}gK(this.uuid,j)}}};canUseTrustedDeviceAuth(){return NA.canPerformTrustedDeviceBasedAuth(this.serveraccount.authMethods)}canOnlyUseWebAuthn(){return NA.canOnlyPerformWebauthnAuth(this.serveraccount.authMethods)}inviteUsersViaEmail=async(j,e)=>{if(!this.client?.CTX){console.warn(`No client context for account ${this.uuid}, unable to send invitations`);return}try{let t=await NA.inviteUsersViaEmail(this.client.CTX,j,e);return ft("InviteUser",{member_type:e==="G"?"GUEST":"REGULAR",invites_count:j.length,status:t.failedInvites.length===0?"SUCCESS":"FAIL",source:"GUIDED_SETUP"},this.uuid),t}catch{throw ft("InviteUser",{member_type:e==="G"?"GUEST":"REGULAR",invites_count:j.length,status:"FAIL",source:"GUIDED_SETUP"},this.uuid),new q.LoggableError({errorClass:p`InviteUsersViaEmail`,message:p`Server error`,userUuid:this.user?.uuid?W(this.user.uuid):void 0})}};getAccountUserCounts=async()=>{if(this.isLocked){`${this.uuid}`;return}if(!this.client?.CTX)try{await this.reinitializeClient()}catch(j){rj(new q.LoggableError({errorClass:T9A,message:p`Attempted to reinitialize the Client, but received an error.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0,stackOverrideError:j instanceof Error?j:void 0}))}if(this.client?.CTX)try{return await NA.getAccountUserCounts(this.client.CTX)}catch(j){rj(new q.LoggableError({errorClass:T9A,message:p`Error calling getAccountUserCounts API`,userUuid:this.user?.uuid?W(this.user.uuid):void 0,stackOverrideError:j instanceof Error?j:void 0})),console.error("Error fetching account user counts:",j)}};getPendingInvites=async()=>{if(this.isLocked)return`${this.uuid}`,[];if(!this.client?.CTX)try{await this.reinitializeClient()}catch{rj(new q.LoggableError({errorClass:wae,message:p`Attempted to reinitialize the Client, but received an error.`,userUuid:this.user?.uuid?W(this.user.uuid):void 0}))}return this.client?.CTX?await NA.getPendingInvitations(this.client.CTX):[]}},C9A=A=>{if(typeof A=="string")return A.indexOf("0001")===0?void 0:new Date(A)},uiA=(A,j)=>{let e=ki(A.signinAddress,j),t;if(A.secretKey){let a=S6.SecretKey.fromInput(A.secretKey);if(!a)throw new Error("Secret Key is invalid");t=a}let r=new xA.OldUser({uuid:A.userUUID,email:A.email,secretKey:t});return e.user=r,e};async function RN(){return await CP(H.getAccountHandlers)}async function _9A(){let A=TE();return await CP(A)}function S9A(){if(lt.initState==="initialized"){let A=lt.accounts;if(A&&A.length>0){lj("xam-backend-account-state-synced",A);return}k7()}}function H9A(A){let{accountUuid:j}=A.data,t=y6().getPolicyForAccount(j,"app-launcher-allowed");return t?.policyName==="app-launcher-allowed"&&t.definition.appCatalogUrl?qp(t.definition.appCatalogUrl):void 0}var Pv={},z9A=(A,j,e)=>{let t=Pv[A+j];t&&(t.callback(e),delete Pv[A+j]),chrome.notifications.clear(j)};function Um(A,j,e){Pv[A+j]={id:j,type:A,callback:e}}ve()||(chrome.notifications.onClicked.addListener(A=>z9A("click",A)),chrome.notifications.onButtonClicked.addListener((A,j)=>z9A("buttonClick",A,j)),chrome.notifications.onClosed.addListener(A=>{Object.prototype.hasOwnProperty.call(Pv,"click"+A)?delete Pv["click"+A]:Object.prototype.hasOwnProperty.call(Pv,"buttonClick"+A)&&delete Pv["buttonClick"+A]}));function U9A(A){if(!WA().showNotifications||ve())return;let e="add-account-"+globalThis.crypto.getRandomValues(new Uint32Array(1)).toString();chrome.notifications.create(e,{type:"basic",iconUrl:Qs,title:oA("1Password account added"),message:oA('"{accountName}" was added to 1Password.',{accountName:A}),priority:2}),Um("click",e,()=>h0())}async function SE(){return SA.isInitialized()?(await SA.getDatabase().getAllAccounts()).length>0:!1}function I8(A,j,e){return{uuid:A.uuid,name:A.name,state:A.state,email:j.email,signinAddress:e.signinAddress,domain:A.domain,secretKey:e.secretKey,deviceCredentials:e.deviceCredentials,dSecret:e.dSecret||void 0,userUUID:j.uuid,type:A.type,avatar:A.avatar,attrVersion:A.attrVersion,createdAt:JSON.stringify(A.createdAt),baseAvatarURL:A.baseAvatarURL,baseAttachmentURL:A.baseAttachmentURL,tier:A.subscription.tier?{gatedFeatures:Object.keys(A.gatedFeatures),tierChangeRestrictions:[],...A.subscription.tier}:void 0,accountVersion:A.attrVersion,templateVersion:0,userState:j.state,userVersion:j.attrVersion,userCreatedAt:j.createdAt,userPreferences:j.preferences,userAvatar:j.avatar,userName:j.name,userType:j.type,keysetVersion:0,userOverview:{permissions:0},authMethods:e.authMethods,billingStatus:A.subscription.status,freezesAt:A.subscription.freezesAt,teamMemberPolicies:A.settings?.teamMemberPolicies}}function V9A(A,j){return{uuid:A.accountUuid,name:A.teamName,state:A.accountState,email:A.userEmail,signinAddress:A.signInUrl,domain:Kg.subdomainFromSignInAddress(A.signInUrl)??"",secretKey:A.signInProvider.type==="secretKey"?A.signInProvider.data:void 0,dSecret:void 0,userUUID:A.userUuid,type:A.accountType,avatar:A.teamAvatar,createdAt:"",baseAvatarURL:A.baseAvatarUrl,baseAttachmentURL:"",attrVersion:0,accountVersion:0,templateVersion:0,userState:A.userState,userVersion:0,userAvatar:"",userName:"",userType:"G",userPreferences:void 0,userCreatedAt:void 0,keysetVersion:0,userOverview:{permissions:0},authMethods:j,billingStatus:A.billingStatus,freezesAt:""}}async function q0(A){let j=Md(A.muk),e=await X9A(A.details.accountUuid);if(e.isErr()){if(e.error.type==="RequestError")switch(console.error(`Failed to request delegated session: ${e.error.type}`),e.error.content){case Hh.UserSuspended:throw new q.errors.ServerError(q.errors.ServerErrorCode.suspendedLoginFailed,q.errors.ServerErrorReason.userSuspended);case Hh.Other:break}throw new q.LoggableError({errorClass:p`SigninError`,message:p`Failed to request delegated session: ${W(e.error?.type)}`,severityLevel:"warning",userUuid:A.details?.userUuid?W(A.details?.userUuid):void 0})}return P8({email:A.details.email,signInAddress:A.details.signInAddress,secretKey:A.secretKey},j,e.value)}async function P8(A,j,e,t=!0){return vK(A.signInAddress,{requestID:e.requestId??1,email:A.email,accountKey:A.secretKey,masterKey:j,serverConfig:{notifier:e.notifier},sessionKey:e.sessionKey},t?X9A:void 0)}async function X9A(A){let j={accountUuid:A,device:await jn()};if(!re.desktopConnectionManager)return OA({type:"NoConnectionManager"});let e=await re.desktopConnectionManager.requestDelegatedSession(j);return e.type==="Error"?OA({type:"RequestError",content:e.content}):Pj({notifier:e.content.notifier,sessionKey:Md(e.content.sessionKey)})}var EiA=60*1e3,Iae=60*1e3,DN="unlockedSessionKeepalive",miA=class{_state;_logger;constructor(){this._state="not-started",this._logger=new rt("[Session Keepalive]")}async startKeepalive(){if(this._state!=="not-started"){this._logger.debug("Not starting session keepalive, already started.");return}let j=Date.now();this._logger.debug("Starting session keepalive.");let e=this.startHeartbeat();await this.startAlarm(),this._state={heartbeatInterval:e,lastSessionExtensionAttemptTimestamp:void 0},this._logger.info(`Started session keepalive at ${new Date(j).toLocaleString()}`)}async stopKeepalive(){if(this._state==="not-started"){this._logger.debug("Not stopping session keepalive, never started.");return}this.stopHeartbeat(),await this.stopAlarm(),this._state="not-started",this._logger.info(`Stopped session keepalive at ${new Date().toLocaleString()}`)}startHeartbeat(){return globalThis.setInterval(()=>{this.attemptSessionExtension()},EiA)}stopHeartbeat(){this._state!=="not-started"&&globalThis.clearInterval(this._state.heartbeatInterval)}async startAlarm(){if(!await browser.alarms.get(DN)){let e=EiA/Iae;browser.alarms.create(DN,{delayInMinutes:e,periodInMinutes:e})}browser.alarms.onAlarm.hasListener(this.handleAlarm)||browser.alarms.onAlarm.addListener(this.handleAlarm)}async stopAlarm(){await browser.alarms.clear(DN)?this._logger.debug("Alarm cleared"):this._logger.error("Session keepalive stopped, without clearing alarm."),browser.alarms.onAlarm.removeListener(this.handleAlarm)}handleAlarm=j=>{j.name===DN&&this.attemptSessionExtension()};attemptSessionExtension(){if(this._state==="not-started")return;let j=Date.now(),{lastSessionExtensionAttemptTimestamp:e}=this._state;e&&j-e<EiA||(this.processSessionExtensionAttempt(),this._state={...this._state,lastSessionExtensionAttemptTimestamp:j})}processSessionExtensionAttempt(){let j=H.accountHandlersForSignedInAccounts.filter(e=>this.isEnabledForAccount(e.uuid)&&e.client?.CTX?.session!==void 0);for(let e of j)this._logger.debug(`Attempting session extension for account: ${e.uuid} at ${new Date().toLocaleString()}`),e.client?.CTX?.session.refreshSession()}isEnabledForAccount(j){return ZA.accountHasFlag(j,"core-authx-server_session_keepalive")}},piA;var gh=()=>(piA||(piA=new miA),piA);async function BiA(A,j=!0){if(H.accountIsUnlocked(A.data.accountIdentifier.accountUUID))return;let e=await jn(),t;if(A.type==="AccountPasswordCredentials")t=await Hd({credentials:A.data,device:e}).finally(async()=>Ft.updateConnectivityStatus());else{let{email:c,signinAddress:k}=A.data;t=await P8({email:c,signInAddress:k},A.data.muk,A.data.session,!1)}if(!t.CTX)return Promise.reject("Missing context on the client.");let r=t.account();if(!r)return Promise.reject("Missing account after signin.");let a=t.user();if(!a)return Promise.reject("Missing user after signin.");Jl.startAutoLockMonitor(),gh().startKeepalive();let n,{authMethods:o}=await NA.getSignInMethods(t.CTX,a.email,a.uuid);A.type==="AccountPasswordCredentials"?n=I8(r,a,{...A.data,authMethods:o}):n=I8(r,a,{signinAddress:A.data.signinAddress,authMethods:o,secretKey:A.type==="MyceliumDelegatedSession"?A.data.secretKey:void 0}),await SA.getDatabase().saveAccount(n);let i=A.type==="DelegatedSession"&&NA.canPerformTrustedDeviceBasedAuth(o),s=new zm(n,e);if(s.setClient(t),H.addAccountHandler(s),i&&A.data.srpx)try{await mK(t,s,A.data.srpx)}catch(c){console.error("Failed to upgrade B5X to a Trusted Device for delegated session",c),Ze(c)&&rj(c)}let l;A.type==="AccountPasswordCredentials"?l=await x0(A.data.accountPassword):l=await Cm({type:"DelegatedSession",data:{accountUuid:A.data.accountIdentifier.accountUUID,muk:A.data.muk,client:t}}),l.isErr()&&console.warn(`Failed to unlock newly added account: ${l.error.type}`),await s.createGeneratedPasswordsVaultIfNeeded(),await s.primeIconColorCache(),H.numberOfAccountHandlers===1&&(TP(),[Et.Type.Individual,Et.Type.Family].includes(n.type)&&iiA(n.uuid)),j&&U9A(s.serveraccount.name),Xi.enableInsiderIfAppropriate(),globalThis.dispatchEvent(new Event(Yi))}async function J9A(A){let j=await jn(),e=V9A(A,[]);await SA.getDatabase().saveAccount(e);let t=new zm(e,j),r=H.addAccountHandler(t),a=ki(t.serveraccount.signinAddress,await t7()),n=await NA.getSignInMethods(a,t.serveraccount.email,t.serveraccount.userUUID);H.updateAccount(t.serveraccount.uuid,{authMethods:n.authMethods}).catch(()=>console.error(`Failed to set auth methods for ${t.serveraccount.uuid}`)),r===1&&(TP(),[Et.Type.Individual,Et.Type.Family].includes(e.type)&&iiA(e.uuid)),Xi.enableInsiderIfAppropriate(),globalThis.dispatchEvent(new Event(Yi))}async function giA(A){switch(A.type){case"B5SignInSucceeded":{let j={accountIdentifier:{userUUID:A.details.userUuid,accountUUID:A.details.accountUuid,server:fi(A.details.signinAddress)},dSecret:A.details.dSecret,email:A.details.email,accountPassword:A.details.masterPassword,secretKey:A.details.accountKey,signinAddress:A.details.signinAddress};await BiA({type:"AccountPasswordCredentials",data:j});break}case"B5DelegatedSignInSucceeded":case"B5MyceliumDelegatedSignInSucceeded":{let{accountUuid:j,session:e,masterKey:t,email:r,signinAddress:a,srpx:n}=A.details;if(!t){console.warn("Unable to add account without master key");return}if(!e){console.warn("Unable to add account without session");return}let o=Md(JSON.parse(t)),i={email:r,signinAddress:a,accountIdentifier:{accountUUID:j},muk:o,session:e,srpx:n};A.type==="B5MyceliumDelegatedSignInSucceeded"?await BiA({type:"MyceliumDelegatedSession",data:{...i,secretKey:"password_secret_key"in A.details.extraCredentials?A.details.extraCredentials.password_secret_key.secret_key:void 0}}):await BiA({type:"DelegatedSession",data:i});break}default:te(A)}}var O8;function Pae(A,j){return A.serveraccount.uuid===j.accountUuid&&A.serveraccount.userUUID===j.userUuid}function W9A(A,j){let{accountUuid:e}=j.type==="Locked"?j.content:j.content.details;return A.serveraccount.uuid===e}async function TN(A,j={}){if(O8)return O8;O8=(async()=>{try{let t=0;for(let r of A){let a=H.getAccountHandlers.find(n=>n.serveraccount.uuid===r.accountUuid);if(a&&a.serveraccount.uuid===r.accountUuid&&a.serveraccount.userUUID!==r.userUuid){console.warn(`Unable to add secondary user from account ${r.accountUuid}`);continue}a||(t++,await J9A(r))}if(j.removeExtraAccounts)for(let r of H.getAccountHandlers)A.find(a=>Pae(r,a))||(t++,await H.removeAccount(r.uuid));return t>0}catch{throw new Error("When adding a locked account from OPI we ran in to a problem.")}})();let e=await O8;return O8=void 0,e}async function CN(A,j={}){try{let e=[],t=0;for(let r of A)try{if(r.type!=="Unlocked")continue;let a=r.content,n=H.getAccountHandlers.find(o=>o.serveraccount.uuid===a.details.accountUuid);if(n&&n.serveraccount.uuid===a.details.accountUuid&&n.serveraccount.userUUID!==a.details.userUuid){console.warn(`Unable to add secondary user from account ${a.details.accountUuid}`);continue}if(n?.isUnlocked){(!n.client||!n.client.isSignedIn)&&(await _N(n,a),n.startSync());continue}if(n){let o=r.content.details.userState??Lc.Active;if(o!==n.serveraccount.userState){if(o===Lc.Unsupported)throw new Error("User state unsupported");await n.setUserState(o)}switch(o){case Lc.Suspended:continue;case(Lc.Deleted||Lc.Purging||Lc.Purged):n.destroyAccount();continue;default:}let i=a.srpX&&a.secretKey?{type:"Credentials",data:{credentials:n.credentials({muk:Md(a.muk),srpX:a.srpX}),additionalSignInOptions:{allowReauthorization:!0}}}:{type:"Other",data:{client:async()=>q0(a)}};try{await Q9A(n,a),n.serveraccount.deviceCredentials&&H.updateAccount(n.serveraccount.uuid,{deviceCredentials:void 0}),await n.unlockWithMasterUnlockKey(a.muk,i),t++,ft("AppUnlock",{unlock_method:"SLS",status:"SUCCESS"},a.details.accountUuid),e.push(async()=>n.startSync(i).catch(s=>{console.error(`Sync error for account: ${a.details.accountUuid}`),Ji(n,s)}))}catch(s){try{await n.startSync(i),await n.unlockWithMasterUnlockKey(a.muk,i),t++,ft("AppUnlock",{unlock_method:"SLS",status:"SUCCESS"},a.details.accountUuid)}catch{console.error("Unable to unlock account after attempting to sync updated keysets.",s)}}}else try{await Oae(a)&&(t++,ft("AppUnlock",{unlock_method:"SLS",status:"SUCCESS"},a.details.accountUuid))}catch(o){console.error("Unable to add new account",o)}}catch{let{accountUuid:a}=r.type==="Locked"?r.content:r.content.details,o=H.findAccountHandlerByUuid(a)?.serveraccount?.authMethods.map(i=>i.type);console.error(`Something went wrong when trying to unlock account with UUID ${a}, account auth methods: ${o?o.join(", "):"none"}`)}if(j.removeExtraAccounts)for(let r of H.getAccountHandlers)try{A.find(a=>W9A(r,a))||(console.warn(`Account ${r.uuid} is not in the native app, and b5x is cleaning up extra accounts. Removing account from B5x.`),await H.removeAccount(r.uuid))}catch{console.error(`Error checking extra account removal for ${r.uuid}`)}if(!Bt())for(let r of H.getAccountHandlers)try{let a=!A.find(i=>W9A(r,i));if(!r.serveraccount.authMethods){console.warn(`authMethods are empty for account ${r.uuid}.`);continue}let n=r.serveraccount.authMethods.some(i=>i.type==="OIDC"),o=r.getDeviceCredentials().isErr();a&&n&&o&&(console.warn(`SSO Account ${r.uuid} is not in native app and does not have device credentials. Removing account from B5x.`),await H.removeAccount(r.uuid))}catch{console.error(`Error checking extra SSO account removal for ${r.uuid}`)}return e.forEach(async r=>r()),{numberOfUnlockedAccounts:t}}catch{throw new Error("When adding an account from an app we ran in to a problem.")}}async function Oae(A){let j=await jn(),e=Md(A.muk),t;if(!A.srpX||!A.secretKey?t=await q0(A):t=await Hd({credentials:{accountIdentifier:{accountUUID:A.details.accountUuid,userUUID:A.details.userUuid,server:A.details.server},uuid:A.details.userUuid,email:A.details.email,muk:e,secretKey:A.secretKey,signinAddress:A.details.signInAddress,srpX:A.srpX},device:j,additionalSignInOptions:{allowReauthorization:!0}}).finally(async()=>Ft.updateConnectivityStatus()),!t.CTX)throw new Error("Missing context on the client.");let r=t.account();if(!r)throw new Error("Missing account after signin.");let a=t.user();if(!a)throw new Error("Missing user after signin.");Jl.startAutoLockMonitor(),gh().startKeepalive();let n=await NA.getSignInMethods(t.CTX,a.email,a.uuid),o=I8(r,a,{secretKey:A.secretKey,signinAddress:A.details.signInAddress,dSecret:void 0,authMethods:n.authMethods});await SA.getDatabase().saveAccount(o);let i=new zm(o,j),s=H.addAccountHandler(i);try{i.setClient(t),await i.startSync(),await i.unlockWithMasterUnlockKey(A.muk)}catch(l){Ji(i,l)}return await i.createGeneratedPasswordsVaultIfNeeded(),await i.primeIconColorCache(),s===1&&TP(),Xi.enableInsiderIfAppropriate(),globalThis.dispatchEvent(new Event(Yi)),i.isUnlocked}function Y9A(A){switch(A.type){case"OpenLink":return Rae(A.content);case"PerformUndoAction":case"PerformItemAction":case"View":case"RetryFailedUpdate":case"RunUpdate":case"LaunchStoreProductPage":case"FileAction":case"HideToast":case"PerformSync":case"ShowSshAgentPromoModal":case"CommitSigning":return;default:te(A)}}function Rae(A){Te.openTab({url:A}),Ko()}var Tae,Cae,HN,hiA=!1;function j3A(){Re.resolve(Ys).subscribe(Oh,_ae).subscribe(ch,Sae),WA()?.inlineEnabled||Li("autofill-disabled")}function e3A(){hiA=!0}function Ko(){lj("close-popup",void 0),tiA()}function _ae(){Ko()}function t3A(){let A=C_A();return A||JSON.stringify({})}var r3A="contextual-import-dismiss",a3A="import-nudge-dismiss";function n3A(){return vj.getItem(r3A)}function o3A(A){return vj.setItem(r3A,JSON.stringify(A.data))}function i3A(){return vj.getItem(a3A)}function s3A(A){return vj.setItem(a3A,JSON.stringify(A.data))}var l3A="firefox-rich-icons";function c3A(){return vj.getItem(l3A)}function d3A(A){vj.setItem(l3A,JSON.stringify(A.data))}function k3A(A){__A(A.data)}function u3A(A){$6(),uKA(),I9A(),oLA(),HN&&hh(HN),Qb({prefersColorSchemeDark:A.data.prefersColorSchemeDark})}async function E3A(A){let j=await st();if(!j)return;let e=j.URL()?.hostname,t=j.URL()?.host;if(!(e&&t))return;let r={id:j.id,unparsedUrl:j.unparsedUrl,hostname:e,host:t,nakedDomain:j?.unparsedUrl?.startsWith("http")?j.nakedDomain():""},a=await D8(j,A.data?.collectedPageDetailsHash);return a&&(r.suggestions=a.suggestions,r.collectedPageDetailsHash=a.collectedPageDetailsHash),r}async function p3A(A){$6();try{let j=await zj.loadItemCache();if(!j)return{type:"NoItem"};let e=j.itemWithLocalId(A.data.itemId);if(!e)return{type:"NoItem"};let t=e.vault,r=j.accountForVaultID(a6(t));if(!r)throw new Error("failed to find an account or vault overview");let{showRichIcons:a,newHibpEnabled:n,autoSubmitLogins:o}=WA(),i=await st(),s=await E6(e);if(!s)throw new Error("Failed to find decrypted item.");let l=K6().isEnabled(),c,k=s;k.cacheInformation&&k.cacheInformation.provider==="brex"&&(c=JO.Brex);let u=bE(r.uuid),m={},F={};A.data.gatherAsyncData&&(m=await NA.generateWatchtowerReportForItem(s,n,!!r.hasBackOfficeFeature.itemsInWrongAccountPolicy,u),F=await I5A(s));let S=(await Ho()).map(bA=>{let XA=bE(bA.uuid);return{email:bA.email,accountName:bA.name,accountUuid:bA.uuid,itemsInWrongAccountAllowedDomains:XA}}),G=e.overview.b5AccountUUID,x=t.getCombinedAcl();if(typeof x!="number")return console.error("Failed to load item details due to missing vaultACL"),{type:"UnknownError"};let P=(await H.getFrozenAccountsInfo()).frozenAccounts.some(bA=>bA===r.uuid),D=H.getUserStateForAccount(r.uuid),y=H.findAccountHandlerByUuid(r.uuid),h=!!await y?.shouldShowFreeFamilyAccountNotification(),O=!!y?.hasBackOfficeFeature?.familyChildAccounts,Q=ZA.anyAccountHasFlag("core-date-time-localization"),AA=si(e),nA=await jA.getItemDetails(s,{vaultUuid:t.uuid,name:t.name,baseAvatarUrl:r.baseAvatarURL??"",accountUuid:r.uuid,avatarFilename:t.avatar,vaultType:jA.parseVaultType(t.type)},{name:r.name,baseAvatarUrl:r.baseAvatarURL??"",accountUuid:r.uuid,avatarFilename:r.avatar,accountType:jA.parseAccountType(r.type)},jA.buildPermissionBundle(x,P,D),{mfaInformationPage:m.inactiveTwoFactor,hasVulnerablePassword:!!m.vulnerablePassword,compromisedDomain:m.compromisedDomain,passkeyInformationPage:m.inactivePasskey,checkForCompromisedWebsites:!0,checkForTwoFactorAuthentication:!0,checkForPasskeys:!0,checkForVulnerablePasswords:n,watchtowerAccounts:S,accountUuidForItem:G,allowedEmailDomains:u},i?.unparsedUrl,a,A.data.revealedFieldIds??[],l,F,h,O,Q,o,AA,c);if(k.cacheInformation){let bA=nA.elements.find(tj=>tj.type==="Title")?.content,XA=VM(k.cacheInformation);bA&&XA&&(bA.icon.sources=[{type:"DefaultIcon",content:{file:XA,masked:!1,description:void 0}}]);let dj=nA.header.locationBar.elements.find(tj=>tj.type==="Vault")?.content,yA=vKA(k.cacheInformation);dj&&yA&&(dj.icon.sources=[{type:"DefaultIcon",content:{file:yA,masked:!1,description:void 0}}])}return nA.mustRecordItemUsage&&Al(e,aA.ItemUsageAction.Reveal),{type:"Success",data:{...nA,itemTitle:e.title,shortcuts:{primaryCopyAction:void 0,secondaryCopyAction:void 0,tertiaryCopyAction:void 0},itemSpecifier:{itemId:c8(e).toString(),itemUuidComponents:{itemUuid:e.uuid,vaultUuid:t.uuid,accountUuid:r.uuid}}}}}catch{return console.error("Unable to generate item details"),{type:"UnknownError"}}}async function Z9A(A){Ko();let j=await st();await Te.openTab({url:A,openerTabId:j?.id})}async function m3A(A){if(A.data.itemId.type!=="databaseId"&&A.data.itemId.type!=="managedCredential"){console.warn("Unable to perform watchtower actions on non-database items");return}let j=await Sc(A.data.itemId);if(!j.isOk())throw new Error("No matching item");if(A.data.action.type==="changePasswordOnWebsite")return Ko(),e0(j.value);if(A.data.action.type==="scanQrCode")return HK(j.value);if(A.data.action.type==="openSupportUrl"){let r="https://support.1password.com/"+A.data.action.content;Z9A(r);return}if(A.data.action.type==="usePasskey"){Z9A(A.data.action.content);return}let e=await jA.handleWatchtowerAction(A.data.action,j.value),t=Vb(j.value,e);await Da(t)}async function B3A(A){let j=await Sc(A.data.itemId);if(!j.isOk())throw new Error("No matching item");let e=await jA.getLargeTypeWithClientFormattedString(j.value,A.data.clientFormattedString);return e.isConfidential&&Al(j.value,aA.ItemUsageAction.Reveal),e}async function g3A(A){let j=await Sc(A.data.itemId);if(!j.isOk())throw new Error("No matching item");let e=await jA.getLargeTypeWithFieldIdentifier(j.value,A.data.fieldIdentifier);return e.isConfidential&&Al(j.value,aA.ItemUsageAction.Reveal),e}function hh(A){HN=A,lj("popup-view-state-changed",A)}var h3A="activation-hub-tooltip-seen";function q3A(){return vj.getItem(h3A)==="true"}function x3A(){vj.setItem(h3A,"true")}async function SN(A,j,e,t){let r=()=>{if(j){if(j.isErr())return{type:il.None};if(LN(j.value.settings),j.value.accountsState.type!=="noAccounts"&&!H.hasAccountHandlers)return{type:il.None};switch(j.value.accountsState.type){case"noAccounts":return{type:il.None};case"hasLockedAccounts":return{type:il.None};case"onlyHasStandaloneVaults":return{type:il.None};case"allAccountsUnlockable":return{type:j.value.biometryType}}}else return t&&H.hasAccountHandlers?{type:t}:{type:il.None}},a=th(),n,o=a.find(l=>l.signInProvider.type==="sso");if(o&&o.signInProvider.content){let l,c=o.signInProviderIconUrl;c?l={id:"valid",sources:[{type:"RichIcon",content:{url:c}}]}:l={id:"not-valid",sources:[{type:"DefaultIcon",content:{file:lr.Identity}}]};let k=o.signInProvider.content;k.toLowerCase()==="microsoft entra id"&&(k="Microsoft"),n={ssoSignInButton:{label:oA("Sign in with {authProvider}",{authProvider:k}),action:{type:"signIn",content:{type:"account",content:{accountUuid:o.uuid,provider:{providerName:o.signInProvider.content,iconUrl:o.signInProviderIconUrl},context:By.Unlock}}},icon:l,state:sy.Enabled,style:ly.TransparentBlue},accountLabel:o.name,accountUuid:o.id}}let i=a.filter(l=>l.signInProvider.type==="webAuthn").map(l=>({accountUuid:l.uuid,accountLabel:l.name,signInButton:{label:oA("Sign in with passkey"),action:{type:"withAccount",content:{accountUuid:l.uuid,context:By.Unlock}},icon:{id:"passkey",sources:[{type:"ThemedIcon",content:{file:pG.Passkey}}]},state:sy.Enabled,style:ly.TransparentBlue}})),s={accounts:th(),biometry:r(),unlockWithPassword:a.some(l=>l.signInProvider.type==="secretKey"),unlockWithSso:n,unlockWithPasskey:i};if(A.type==="Disconnected"&&A.hasEverConnectedToDesktopApp&&A.invalidBrowserState===0){let l=await Te.getBrowserInfo(),c=l.name===q.browserInfo.Browser.Other?oA("your browser"):l.name;s.message=[{type:"plainText",content:{text:oA("You\u2019re asked to re-enter your password because {browserName} has an update available.",{browserName:c})}}]}return Bt()&&Vm().then(async l=>{if(l.isOk()&&await TN(l.value.accounts,{removeExtraAccounts:!0})){let k=re.getDesktopAppState();hh(Lt()?{state:"AccountPasswordRequired",details:await SN(k)}:{state:"Unlocked"})}}),e&&(s.message=[{type:"plainText",content:{text:e}}]),s}async function Sae(A){let{state:j}=A.detail;!await kiA()||j.type==="Connecting"||R8({initiatedByUserAction:!1,desktopAppState:j}).then(hh)}async function R8(A){let j=await Hae({...A});return HN=j,j}async function Hae({initiatedByUserAction:A,desktopAppState:j=re.getDesktopAppState(),lockScreenMessage:e}){let t=th();if(j.type==="Connecting")return A&&uN(),{state:"AttemptingToConnectToDesktopApp",details:{accounts:t}};if(j.type==="Connected"){if(j.lockState==="Syncing")return{state:"SyncingViaDesktopApp",details:{accounts:t}};if(j.lockState==="Unlocking")return{state:"UnlockingViaDesktopApp",details:{accounts:t}};if(H.allAccountHandlersHasUserSuspended)return{state:"AccountPasswordRequired",details:{...await SN(j),error:!0,message:qiA({type:"SuspendedAccounts"})}};if(j.lockState==="Locked"){if(A){let s=await re.desktopConnectionManager?.getDesktopApp()?.hasAccounts(),l=t.length>0?H.getAccountHandlers.find(c=>c.uuid===t[0].uuid):void 0;!s&&l?wv({components:{emailAddress:l.serveraccount.email,server:l.serveraccount.signinAddress,secretKey:l.serveraccount.secretKey,isSsoAccount:t[0].signInProvider.type==="sso"},accountUuid:l.serveraccount.uuid}):(s7(),Nae())}return{state:"PendingDesktopUnlock",details:{accounts:t}}}}let r=A&&v0("popup",async i=>{i.isOk()?(i.value.numberOfUnlockedAccounts===0&&(Lt()||await io(),s7()),hh({state:"UnlockingViaDesktopApp",details:{accounts:t}})):i.error.type==="NotAttempted"&&console.info("Decided not to attempt reconnection to the desktop app.")}),a=Lt(),n;if(a&&r&&Ui())return{state:"AttemptingToConnectToDesktopApp",details:{accounts:t}};let o;if(Bt()){if(n=a?await Vm():void 0,a&&n&&n.isOk()){if(n.value.accountsState.type==="noAccounts")return console.info("No accounts found when connecting to the 1Password App"),{state:"NoSavedAccountsInOPI"};if(n.value.accountsState.type==="onlyHasStandaloneVaults")return{state:"OnlyStandaloneVaultsInOPI"};n.value.accountsState.type==="allAccountsUnlockable"&&n.value.biometryType!==il.None&&A&&Ov(!0)}}else if(a&&await Vi.isBiometryConfigured()){let i=await Vi.getBiometryAvailabilityStatus();o=il.None,i.isBiometryAvailable?(o=il.TouchID,je.getItem(Vi.DISABLE_BIOMETRY_AUTO_PROMPT)==="Y"?je.removeItem(Vi.DISABLE_BIOMETRY_AUTO_PROMPT):A&&Vi.promptForBiometricsAndUnlock()):i.currentBiometryAvailability===Uo.EnrollmentChanged?e=oA("Touch ID sensor is currently unavailable. You need to sign in using your account password."):e=oA("Touch ID sensor is currently unavailable.")}return Lt&&A&&H.updateAccountAuthMethods().then(async i=>{if(i){let s=re.getDesktopAppState();hh(Lt()?{state:"AccountPasswordRequired",details:await SN(s)}:{state:"Unlocked"})}}),a?{state:"AccountPasswordRequired",details:await SN(j,n,e,o)}:{state:"Unlocked"}}async function v3A(){let A=WA(),j=await Te.getBrowserInfo(),e=hiA;hiA=!1;let t;ZA.anyAccountHasFlag("b5x-single-pane-popup")?t=A.appWidth:t="double-pane",Bt()&&await xiA();let r=Ah(),a=FHA();return{checkForRepaintWorkaround:j.osName===q.browserInfo.OperatingSystem.macOS&&vi(),connectivityStatus:await Ft.connectivityStatus(),accountUuid:Cae,vaultUuid:Tae,locale:A.language,initialView:await R8({initiatedByUserAction:!0}),defaultItemList:await KN()?"suggestions":A.defaultItemList,appTheme:A.appTheme,appWidth:t,openedByInlineForUnlock:e,unleashFeatures:r,unleashFeatureVariants:a,universallyEnabledFlags:PHA(),sharedLockStateEnabled:A.useSharedLockState}}function q5A(A){return{v:"t",c:{i:A}}}function m5A(A){return{v:"m",c:{i:A}}}function B5A(A,j){return{v:"v",c:{i:A,v:j}}}async function G3A(A){let{autofillEvent:j,source:e}=A.data,{data:t,type:r}=j;switch(r){case"trelica":await PK(t,e);break;case"item":{let{itemUuid:a,action:n,url:o,telemetryFillMethod:i,accountUuid:s}=t,l=await Br(a);if(!l){console.error(`Unable to load item uuid ${a} for fill.`);return}l.overview.b5AccountUUID=s,n===rn.Autofill?await gv(l,"POPUP"):n===rn.Go?await uh(l,{url:o},void 0,i):n===rn.OpenURL&&await i8(l,{url:o})}break;default:te(r)}}async function f3A(A){let{accountUuid:j,vaultUuid:e}=A.data,t=await zj.loadItemCache();return t?t.categoriesForNewPopup(j,e).map(a=>BzA(a,!1)):[]}function F3A(A){GiA(A.data.accountUuid)}async function b3A(){await io(),globalThis.dispatchEvent(new Event(mh))}function y3A(){}function $3A(){chrome.tabs.create({url:"https://support.1password.com/getting-started-browser",active:!0})}function w3A(A){let{url:j}=A.data;chrome.tabs.create({url:j,active:!0})}function I3A(A){return H.findAccountHandlerByUuid(A.data)?.client?.user()?.name}async function P3A(){let A;if(await Vi.isBiometryConfigured()?A=await Vi.promptForBiometricsAndUnlock():A=await Ov(!0),A.isOk()){let j=th(!0);return j.forEach(e=>{ft("AppUnlock",{unlock_method:"BIOMETRIC",status:"SUCCESS"},e.uuid)}),{error:!1,accounts:j}}else return{error:!0,message:qiA(A.error)}}async function O3A(A){let{password:j}=A.data,e=await SA.checkThatDatabaseIsAvailable();try{return await Mae(j)}catch{return{error:!0,message:[{type:"plainText",content:{text:e?oA("An unknown error has occurred."):oA("A database error occurred.")}},{type:"plainText",content:{text:" "}},{type:"linkText",content:{text:oA("Report error\u2026"),url:"https://support.1password.com/contact/?s=Get%20help%20with%201Password&b=x"}}]}}}async function R3A(A){let{action:j}=A.data,e=H.getFirstSsoAccountForKind(j.content),t=()=>({error:!0,message:[{type:"plainText",content:{text:oA("An unknown error has occurred.")}},{type:"plainText",content:{text:" "}},{type:"linkText",content:{text:oA("Report error\u2026"),url:"https://support.1password.com/contact/?s=Get%20help%20with%201Password&b=x"}}]});if(!e)return console.error("no account handler found for SSO account ID"),t();let r=e.serveraccount,a=e.getDeviceCredentials(),n=ZA.hasPreRegistrationFlag("b5x-sso-unlock");try{let o=await st();if(n&&a.isOk()){let i=ki(e.serveraccount.signinAddress,e.deviceJson.uuid),s=await NA.startOidcAuth(i,{accountUuid:r.uuid,userUuid:r.userUUID,keyId:a.value.deviceKeyId}),l=new URL(s),c=l.searchParams.get("state"),k={accountUuid:r.uuid,b5State:c,clientShortCode:q.ClientShortCode.OnePasswordExtension};l.searchParams.set("state",JSON.stringify(k)),await ZP(l.toString()),Ko()}else{let i=`${r.signinAddress}/signin/?a=${r.userUUID}&auth-only=1`;ME({url:i,openerTabId:o?.id,ignoreIfDuplicate:{activateExisting:!0,customDuplicateCheck:s=>`${s.url}&auth-only=1`===i}}),Ko()}ft("AppUnlock",{unlock_method:"SSO",status:"REQUEST"},r.uuid)}catch{return t()}return{error:!1,accounts:th(!0)}}async function D3A(A){let{action:j}=A.data;if(j.type==="withAccount"){let e=await SA.getDatabase().findAccountByUUID(j.content.accountUuid);if(!e)return{error:!0,message:[{type:"plainText",content:{text:oA("Unable to unlock account.")}},{type:"plainText",content:{text:" "}},{type:"linkText",content:{text:oA("Report error\u2026"),url:"https://support.1password.com/contact/?s=Get%20help%20with%201Password&b=x"}}]};let t=await st(),r=await ME({url:`${e.signinAddress}/signin/?a=${e.userUUID}&auth-only=1`,openerTabId:t?.id});ft("AppUnlock",{unlock_method:"PASSKEY",status:"REQUEST"},e.uuid),mt.subscribe(br,a=>{r.id?chrome.tabs.remove(r.id):console.warn("Webauthn auth tab had no ID; unable to remove after unlock")},{once:!0})}return{error:!1,accounts:th(!0)}}function qiA(A){switch(A.type){case"AppCommunicationFailed":return[{type:"plainText",content:{text:oA("Could not connect to the 1Password App. Try unlocking again.")}}];case"FailedToUnlock":return[{type:"plainText",content:{text:oA("That didn't work. Check your password and try again.")}}];case"NoSavedAccounts":return[{type:"plainText",content:{text:oA("No accounts found.")}},{type:"plainText",content:{text:" "}},{type:"linkText",content:{text:oA("Add account\u2026"),url:"https://start.1password.com/signin/?auth-only=1"}}];case"SuspendedAccounts":return[{type:"plainText",content:{text:oA("Your account is suspended. Contact your family organizer or team administrator for more information.")}}];case"UserFallback":case"UserCancel":return[];case"FailedLoginAttempts":return[{type:"plainText",content:{text:A.subType==="offline"?oA("You're offline. To access your account, check your internet connection and try again."):oA("Your account access has been temporarily paused. Check your email for more details.")}}]}}async function Mae(A){let j=await x0(A);return j.isOk()?{error:!1,accounts:th(!0)}:{error:!0,message:qiA(j.error)}}function T3A(A){let j=A.data.accountUuid;return!!H.findAccountHandlerByUuid(j)?.client?.user()?.isGuest}function C3A(A){let j=A.data.accountUuid;return!!H.findAccountHandlerByUuid(j)?.client?.CTX?.account?.isBusiness}function _3A(A){let{templateUuid:j,accountUuid:e}=A.data,t,r;if(e?(t=H.findAccountHandlerByUuid(e),t?r=t.vaults[0]:[t,r]=H.defaultSavingLocation()):[t,r]=H.defaultSavingLocation(),!t)throw new Error("Unable to create a new item because all accounts are locked.");if(j===Zi&&!_d()){xs(NK());return}Ko(),viA(r,A.data.templateUuid)}async function S3A(){let A=await H.getFrozenAccountsInfo();if(_d()&&!A.areAllAccountsFrozen)return!0;let[j]=H.defaultSavingLocation();return!A.frozenAccounts.includes(j.uuid)}async function H3A(A){return jA.parseMarkdown(A.data.markdown)}async function M3A(A){let{data:{value:j,concealed:e}}=A;return loA(j,e)}async function K3A(A){let{itemId:j,confirmed:e}=A.data;if(!e)xs({id:"delete-generator-history-item-id",title:oA("Are you sure you want to delete this password?"),text:oA("This entry will be removed immediately."),primaryAction:{id:"delete-action-id",label:oA("Delete"),destructive:!0,action:{type:"DeleteGeneratorHistoryItem",content:j.toString()}},cancelAction:oA("Cancel")});else{let t=await K5A(j);t.isErr()&&(console.error("Unable to delete password history item:",t.error.type),Vr({id:"failed-to-delete-password",message:oA("Failed to delete password"),behavior:Ir.Ephemeral}))}}async function N3A(A){try{let j=await zj.loadItemCache(),e=JSON.parse(A.data.itemId),t=j?.itemWithLocalId(e);if(!t)throw new Error;let r=await XM(t);return r.isOk()&&r.value||""}catch{return""}}async function L3A(A){(await u7()).forEach(async t=>browser.tabs.sendMessage(t.id,{name:"item-detail-value-drag-start"}));let{dragData:e}=A.data;if(e){let t=await Sc(e.itemId);if(!t.isOk())throw Error("Failed to load item");let r=await jA.fieldValueByIdentifier(t.value,e.action.identifier);if(!r.isOk())throw Error("Failed to get field value by identifier");r.value.mustRecordItemUsage&&Al(t.value,aA.ItemUsageAction.SecureCopy)}}async function z3A(){(await u7()).forEach(async j=>browser.tabs.sendMessage(j.id,{name:"item-detail-value-drag-end"}))}async function U3A(A){let j=await st();if(typeof j?.id!="number")return console.error("Call to handleShowVirtualCardCreateDialog but tab id was missing"),!0;switch(A.data.provider){case jk.Privacy:n7(j.id,{name:"privacy-create-credit-card",data:{}});break;case jk.Brex:n7(j.id,{name:"brex-create-credit-card",data:{}});break;default:te(A.data.provider)}return!0}async function V3A(A){return $6(),D5A(A.data.request)}async function X3A(A){return $6(),H5A(A.data)}function J3A(A){return $6(),Y9A(A.data)}async function W3A(A){return jA.refreshTotp(A.data.request)}async function Q3A(){let A=await SNA();A&&(await io({closePopup:!1}),R8({initiatedByUserAction:!0,lockScreenMessage:Kae(A)}).then(hh))}async function A3A(){await io({closePopup:!1}),R8({initiatedByUserAction:!0,lockScreenMessage:oA("Authentication was interrupted or timed out. Please try again.")}).then(hh)}async function Y3A(){let A=je.getItem("offline-mfa-accounts");if(A){let e=JSON.parse(A)[0],t=H.findAccountHandlerByUuid(e);if(!t)return A3A();let r=`${t?.serveraccount.signinAddress}/signin/?a=${t?.serveraccount.userUUID}&auth-only=1`;try{await ME({url:r,ignoreIfDuplicate:{activateExisting:!0}})}catch(a){console.warn("Not opening a new B5 tab for MFA re-authentication",a)}finally{Ko()}}else return A3A()}function Kae(A){switch(A){case"UnhandledSLSMessage":return oA("Couldn't complete authentication. Update 1Password for desktop and try again.");case"PasswordTimeboxUnavailable":case"DuoAuthenticatorUndefined":return oA("Authentication was interrupted or timed out. Please try again.");default:return te(A)}}async function m0(){if(Bt()){let A=await st();await Te.openTab({url:u0(),openerTabId:A?.id})}else await Te.openTab({url:"onepassword://"})}async function Z3A(){if(!await re.desktopConnectionManager?.getDesktopApp()?.hasAccounts()&&H.numberOfAccountHandlers>0){let e=H.getAccountHandlers[0],t=e.canUseTrustedDeviceAuth();wv({components:{emailAddress:e.serveraccount.email,server:e.serveraccount.signinAddress,secretKey:e.serveraccount.secretKey,isSsoAccount:t},accountUuid:e.serveraccount.uuid})}}async function kiA(){if(ka()){let A=`chrome-extension://${browser.runtime.id}/popup/index.html`;return a5A.matchAll({type:"window"}).then(j=>j.some(({url:e,visibilityState:t})=>e.startsWith(A)&&t==="visible")).catch(()=>!0)}else return browser.extension.getViews({type:"popup"}).length>0}function MN(){return!vt()&&(browser.action?.openPopup!==void 0||browser.browserAction?.openPopup!==void 0)}function HE(){if(browser.action?.openPopup!==void 0){try{browser.action.openPopup()}catch{console.info("The pop-up cannot be programatically opened.")}return}if(browser.browserAction?.openPopup!==void 0){try{browser.browserAction.openPopup()}catch{console.info("The pop-up cannot be programatically opened.")}return}console.info("Opening the popup is not supported in this browser.")}function Nae(){let A=setTimeout(()=>{try{mt.unsubscribe(br,j)}catch{console.info("Unlock listener was already unsubscribed or was never registered")}},3e4),j=()=>{T6()?setTimeout(()=>{HE()},500):HE(),clearTimeout(A)};mt.subscribe(br,j,{once:!0})}async function AzA(){return mzA()}async function jzA(A){let j=new Map,{data:e}=A,t=H.getAccountHandlers.filter(r=>r.isUnlocked&&r.hasSignedInClient&&r.canUseTrustedDeviceAuth());return t.length===0?{enrollments:[]}:(j=await PN(t,e),j?{enrollments:Array.from(j.values())}:{enrollments:[]})}async function ezA(A){let j=H.findAccountHandlerByUuid(A.data.accountUuid);if(!j||!j.hasSignedInClient){Ud(void 0),await d7({type:"failed",accountUuid:A.data.accountUuid,enrollmentUuid:A.data.enrollmentUuid,content:{type:"AccountNotFound"}});return}await ON({accountUuid:A.data.accountUuid,enrollmentUuid:A.data.enrollmentUuid,verificationCode:"",attempts:0},j)}async function tzA(A){if(A.data.type!=="cancel"){console.error(`Invalid type ${A.data.type}, expected "cancel"`,A);return}let{accountUuid:j,enrollmentUuid:e}=A.data.content,t=H.getAccountHandlers.filter(a=>a.isUnlocked&&a.hasSignedInClient&&a.canUseTrustedDeviceAuth());if(t.length===0){console.error("Failed to find any accounts in scope for trusted device enrollment");return}let r=t.find(a=>a.uuid===j);if(!r){console.error(`Failed to find account ${j} for enrollment ${e}`);return}try{await p0(e,r)}catch(a){console.error(`Failed to cancelEnrollment for account ${j} and enrollment ${e}:`,a)}}function rzA(A){return diA()}function azA(A){Ud(A.data.activeDeviceEnrollment)}async function nzA(){let A=await CM(),j=mN();return{accounts:A,exclusions:j}}function ozA(){return BK()}function izA(A){return!!H.getMustMigrateAuthAccount(A.data.accountUuid)}function szA(A){return!!H.getMustMigrateAuthAccount()}async function lzA(A){let j=H.findAccountHandlerByUuid(A.data.accountUuid);if(j&&!j.mustMigrateAuth)return await Lae(j),j.getActivationHubTasks();throw Error("No account handler")}var Lae=async A=>{let j=A?[A]:H.getAccountHandlers;for(let e of j)if(e.isUnlocked&&e.b5account.type==="F"&&!pv(e.uuid,cG.InviteFamilyMembers)){let t=await e.getAccountUserCounts();t&&(t.activeGuests>0||t.activeMembers>1)?e.completeActivationHubTaskByName(cG.InviteFamilyMembers):(await e.getPendingInvites()).length>0&&e.completeActivationHubTaskByName(cG.InviteFamilyMembers)}};async function czA(A){let j=H.findAccountHandlerByUuid(A.data.accountUuid);if(j&&j.isUnlocked)return j.completeActivationHubTaskByName(A.data.taskName,A.data.dismissed)}async function dzA(){let A=chrome.runtime.getURL("");await Te.openTab({url:`${A}inline/tutorial/tutorial.html?close=true`})}async function j5A(A){await io({closePopup:!1}),R8({initiatedByUserAction:!0,lockScreenMessage:A}).then(j=>{hh(j)})}async function kzA(A){let j=A.data.accountUuid,e=H.findAccountHandlerByUuid(j);return e&&e.user&&e.client?.CTX?(await NA.getPerson(e.client.CTX,{uuid:e.user.uuid},{attrs:xA.Person.Attr.Devices,mustReload:!0})).devices:[]}async function uzA(A){let j=H.findAccountHandlerByUuid(A.data.accountUuid);if(j)return await j.inviteUsersViaEmail(A.data.emails,A.data.role)}async function EzA(A){return await jA.getRichIconForUrl(A.data.url,A.data.title,!0)}async function pzA(A){return jA.nakedDomainForUrls(A.data)}var Uae=4;var zN=class{handleExpiredNotifications(j){this.complete(j)}sessions=new Map;dismisAll(){this.sessions.clear()}get(j){for(let t of this.sessions.values())if(t.secondaryTabId===j)return t;let e=this.sessions.get(j);if(e)return e}getOrCreate(j){let e=this.get(j.id);return e||this.create(j)}createOrUpdate(j,e){let t=this.get(j.id);return t?(t=Object.assign(t,e),this.sessions.set(t.id,t),t):this.create(j,e)}complete(j){if(this.sessions.has(j)){this.sessions.delete(j);return}for(let[e,t]of this.sessions)if(t.secondaryTabId===j){this.sessions.delete(e);return}}inlineNotificationExpired(j){let e=this.get(j.id);return!e||e.step!=="ssh-next-steps-notification"?!1:j.nakedDomain()!==e.nakedDomain||e.nextStepsNotificationPageCount>Uae}async cleanup(){let j=[];for(let[e,t]of this.sessions)(!t.secondaryTabId&&!await gzA(e,t.nakedDomain)||t.secondaryTabId&&!await gzA(t.secondaryTabId,t.nakedDomain))&&j.push(e);j.forEach(e=>this.sessions.delete(e))}create(j,e){let t=Object.assign({id:j.id,nakedDomain:j.nakedDomain(),step:"ssh-feature-intro",nextStepsNotificationPageCount:0},e??{});return this.sessions.set(j.id,t),t}},gzA=async(A,j)=>new Promise(e=>{try{chrome.tabs.get(A,t=>{if(!t?.url)return e(!1);let r=It(t);if(!r)return e(!1);e(r.nakedDomain()===j)})}catch{e(!1)}});var Wl=new zN,Vae=A=>{A.detail.notifications?.forEach(e=>{e.type==="sshOnboardingNextSteps"&&e.tabId&&Wl.handleExpiredNotifications(e.tabId)})};function hzA(){Re.resolve(Ys).subscribe(x7,Vae)}var FiA={github:{sshCreateUrl:()=>"https://github.com/settings/ssh/new",activationUrlPattern:/^https?:\/\/github\.com/,variant:"github",nakedDomain:"github.com"},gitlab:{sshCreateUrl:()=>"https://gitlab.com/-/profile/keys",activationUrlPattern:/^https?:\/\/gitlab\.com/,variant:"gitlab",nakedDomain:"gitlab.com"},google_compute_engine:{sshCreateUrl:A=>{let j=new URL("https://console.cloud.google.com/compute/metadata?tab=sshkeys"),t=new URL(A).searchParams.get("authuser");return t&&j.searchParams.set("authuser",t),j.toString()},activationUrlPattern:/https?:\/\/console\.cloud\.google\.com\/compute/,variant:"google_compute_engine",nakedDomain:"google.com"},bitbucket:{sshCreateUrl:()=>"https://bitbucket.org/account/settings/ssh-keys/",activationUrlPattern:/https?:\/\/bitbucket\.org/,variant:"bitbucket",nakedDomain:"bitbucket.org"},azure_devops:{sshCreateUrl:A=>`https://dev.azure.com/${new URL(A).pathname.split("/").filter(Boolean)[0]??""}/_usersSettings/keys`,activationUrlPattern:/https?:\/\/dev\.azure\.com/,variant:"azure_devops",nakedDomain:"azure.com"},digitalocean:{sshCreateUrl:()=>"https://cloud.digitalocean.com/account/security",activationUrlPattern:/https?:\/\/.*\.digitalocean\.com/,variant:"digitalocean",nakedDomain:"digitalocean.com"}},qzA="ssh_onboarding_dismissed",Xae="https://developer.1password.com/docs/ssh/agent/?utm_medium=direct&utm_source=browser_extension&utm_campaign=ssh-onboarding",Jae="onepassword://settings/developers";function Wae(){let A=WA().language.toLowerCase();return A==="ja"&&(A="jp"),A==="en"&&(A=""),`https://1password.com/${A.length>0?`${A}/`:""}downloads/?utm_medium=direct&utm_source=browser_extension&utm_campaign=ssh-onboarding`}function G0(){try{return JSON.parse(vj.getItem(qzA)??"false")===!0}catch{return!1}}function f0(){return!Bt()}async function xzA(){let A=await zj.loadItemCache();return A?A.items(ie.combine(ie.invert(ie.archived),ie.sshKeys,ie.vaultTypePersonal)).length:(console.warn("Failed to load cache checking SSH key count."),0)}function Qae(A,j){let e=Object.values(FiA).find(t=>t.nakedDomain===A);return e?e.activationUrlPattern.test(j):!1}function biA(A){!f0()||G0()||la(A,{type:"sshOnboardingNextSteps"})}async function UN(A,j){if(!(!f0()||G0()||Lt()||await xzA()>0)){for(let e of Object.values(FiA))if(e.nakedDomain===A&&e.activationUrlPattern.test(j))return e}}function fiA(){vj.setItem(qzA,JSON.stringify(!0))}async function Yae(A){if(!f0()||G0())return;let j=Wl.get(A.id);if(!j||j.step!=="create-ssh-key-page")return;let e=A.nakedDomain();if(!Qae(e,A.unparsedUrl))return;let t=A.URL();if(!t||!Object.values(FiA).some(o=>o.sshCreateUrl(A.unparsedUrl).includes(t.pathname)))return;let r=await Cr(A,!0),n=(await jA.analyzePage(r,!1,[])).resolvedPage.frames.map((o,i)=>{let s=o.fields.find(l=>l.designation.autofillType===wj.SshKey);return{allowedTargets:{type:"Targets",data:[{type:"Url",data:e}]},operations:s?[{action:KO.FocusOpid,opid:s.opid,value:""}]:[],uuid:r.frames[i].uuid}});return{filledDesignations:[],frames:n}}async function KN(){if(G0()||!f0())return!1;let A=await st();if(!A||!await UN(A.nakedDomain(),A.unparsedUrl))return!1;let j=Wl.get(A.id);return!(j&&j.step!=="ssh-feature-intro"&&j.secondaryTabId===A.id)}function vzA(){console.info("[SSH Onboarding]: Dismissing SSH onboarding flow."),Wl.dismisAll(),fiA(),vn({updateIconOnly:!0})}async function GzA(){let A=await st();if(!A){console.warn("[SSH Onboarding]: No active tab.");return}let j=await UN(A.nakedDomain(),A.unparsedUrl);if(!j)return;let e=Wl.getOrCreate(A);return{variant:j.variant,operatingSystem:(await Te.getBrowserInfo()).osName,isOnSshKeyCreatePage:e.step==="create-ssh-key-page"&&A.id===e.secondaryTabId}}function fzA(A,j){if(!w6("sshOnboardingNextSteps")){if(!j.tab.id){console.warn("[SSH Onboarding]: No active tab.");return}biA(j.tab.id)}}async function FzA(){let A=await st();if(!A){console.warn("[SSH Onboarding]: No active tab.");return}let j=await UN(A.nakedDomain(),A.unparsedUrl);if(!j)return;let e=new URL(j.sshCreateUrl(A.unparsedUrl));chrome.tabs.create({url:e.toString()},t=>{Wl.createOrUpdate(A,{step:"create-ssh-key-page",secondaryTabId:t.id})}),Ko()}async function bzA(A,{tab:j}){!f0()||G0()||Lt()||await xzA()>0||(w6("sshOnboardingNextSteps")?biA(j.id):Wl.createOrUpdate(j,{step:"ssh-next-steps-notification"}))}function yzA(){return{isConnectedToOp8:_d(),learnMoreUrl:Xae}}function $zA(A){if(!_d()){console.info("[SSH Onboarding]: Not connected to OP8, directing to download URL."),chrome.tabs.create({url:Wae(),active:!0}),Wl.dismisAll(),fiA();return}chrome.tabs.create({url:Jae,active:!0}),Wl.dismisAll(),fiA()}async function wzA(A){let j=await st();if(!j){console.warn("[SSH Onboarding]: No active tab.");return}let e=Wl.get(j.id);if(e?.step!=="create-ssh-key-page"||!e?.secondaryTabId)return;let t=await L6(e.secondaryTabId);if(!t)return;let r=await Yae(t);r&&lj("autofill-perform-fill",{nextFill:{fillPayload:r,complete:!0},authorizedUnsafeHttp:!1},{tabId:j.id})}async function IzA(A){if(vn({updateIconOnly:!0}),!f0())return;let j=Wl.get(A.id);if(j){if(console.info("[SSH Onboarding]: Step: ",j.step),Wl.inlineNotificationExpired(A))Wl.complete(A.id);else if(j.step==="ssh-next-steps-notification"&&!w6("sshOnboardingNextSteps"))j.nextStepsNotificationPageCount+=1,biA(A.id);else if(j.step==="create-ssh-key-page"&&j.secondaryTabId){let e=await L6(j.secondaryTabId);if(e){let t=await UN(e.nakedDomain(),A.unparsedUrl);t&&chrome.tabs.sendMessage(e.id,{name:"ssh-focus-create-form",data:t.variant})}}}Wl.cleanup(),G0()}var Zae="/images/icons/app_icon-dark_bg-color-",A6e="/images/icons/app_icon-light_bg-color-",j6e="Using the dark icon.",e6e="Using the light icon.",t6e="Using the icon with notification dot.",r6e=async A=>(Bt()&&(A="unlocked"),(H.anyAccountHasUnseenDeviceEnrollments||await KN())&&(A+="-notification",uv.info(t6e)),DnA()?.prefersColorSchemeDark?(uv.info(j6e),`${Zae}${A}`):(uv.info(e6e),`${A6e}${A}`)),PzA;var sK=async A=>{let j=await r6e(A);if(j===PzA)return;PzA=j;let e={path:{12:j+"-12.png",16:j+"-16.png",19:j+"-19.png",24:j+"-24.png",32:j+"-32.png",38:j+"-38.png",48:j+"-48.png",72:j+"-72.png"}};ka()?browser.action.setIcon(e):browser.browserAction.setIcon(e)};async function VN(A){return ka()?browser.action.setPopup({popup:A}):browser.browserAction.setPopup({popup:A})}async function vn(A={}){let e={...{skipIconUpdate:!1},...A},t=e.desktopAppState||re.getDesktopAppState();if(e.skipIconUpdate||t.type==="Connecting"||sK(Lt()?"locked":"unlocked"),!e.updateIconOnly)return t.type==="Connected"||Bt()?VN("/popup/index.html"):H.hasAccountHandlers?VN("/popup/index.html"):VN("")}async function OzA(){if(re.initializeDesktopConnectionManager(),!re.desktopConnectionManager)throw new Error("Unable to initialize the desktop connection manager.");if(re.desktopConnectionManager.getState().type==="Disabled"&&Bt()){CzA();let A=await Ov(!1);A.isErr()&&console.warn(`Failed to unlock accounts from OPI via keychain: ${A.error.type}`),Vm().then(j=>{j.isOk()&&(LN(j.value.settings),TN(j.value.accounts,{removeExtraAccounts:!0}))})}}function v0(A,j){let e=i=>{let s=`[${A}] Not attempting to connect to desktop app: ${i}`;return A==="popup"&&console.info(s),j?.(OA({type:"NotAttempted"})),!1};if(!Xm)return e("initialization hasn't finished");if(!WA().useSharedLockState)return e("extension has integration turned off");let t=re.getDesktopAppState(),r=t.type==="Disconnected",a=t.type==="Disconnected"&&t.latestReason===6;if(!(r&&!a))return e(r&&a?"desktop app has integration turned off":r?"unknown reason":"already connected or connecting to desktop app");let o=A==="popup";return setTimeout(()=>{re.desktopConnectionManager?.reconnectWithDesktop(o).then(i=>{j?.(i)})},50),!0}function RzA(A){A?re.desktopConnectionManager?.enableSharedLockState():re.desktopConnectionManager?.disableSharedLockState()}function DzA(){WA().useSharedLockState&&(re.desktopConnectionManager?.disableSharedLockState(),re.desktopConnectionManager?.enableSharedLockState())}async function TzA(A){let{state:j,prevState:e}=A.detail;if(j.type,j.type==="Connected"&&j.lockState==="Unlocked")return zj.loadAndDecryptItemCache().then(()=>{T8()});vn({desktopAppState:j}),e.type==="Connected"&&j.type==="Disconnected"&&!H.allAccountHandlersAreLocked&&io()}function TNA(A){lj("desktop-app-state-changed",A,{enableTracing:!1})}function _d(){let A=re.desktopConnectionManager?.getDesktopApp();return A?!A.isOp7:!1}var XN=class{_connectivityStatus;_notifyStatusChanged;_navigator;constructor(j,e){this._connectivityStatus="online",this._navigator=j,this._notifyStatusChanged=e}get connectivityStatus(){return this._connectivityStatus}set connectivityStatus(j){this._connectivityStatus=j,this._notifyStatusChanged(j)}async queryForUpdate(j){if(!this._navigator.onLine){this.connectivityStatus="networkOffline";return}let e=!1;j.type==="DesktopConnectionManager"&&_d()&&(e=await this._queryDesktopConnectionManagerForUpdate(j.src)),j.type==="AccountHandler"&&(e=this._queryAccountHandlersForUpdate(j.src)),this.connectivityStatus=e?"offlineAuthenticationFailed":"online"}async _queryDesktopConnectionManagerForUpdate(j){return j.getState().type!=="Connected"?!1:(await j.offlineStatus()).authFailed}_queryAccountHandlersForUpdate(j){return j.some(e=>e.isUnlocked&&(!e.client||e.client.invalid))}};var C8=class{_connectivityStatusManager;constructor(){this._connectivityStatusManager=new XN(globalThis.navigator,async j=>lj("update-connectivity-status",j))}getPossiblyOutdatedConnectivityStatus(){return this._connectivityStatusManager.connectivityStatus}async connectivityStatus(){return await this.updateConnectivityStatus(),this._connectivityStatusManager.connectivityStatus}async updateConnectivityStatusHandler(){return this.updateConnectivityStatus()}async updateConnectivityStatus(j){if(j!==void 0){this._connectivityStatusManager.connectivityStatus=j?"offlineAuthenticationFailed":"online";return}if(re.desktopConnectionManager&&re.desktopConnectionManager.getState().type==="Connected")try{await this._connectivityStatusManager.queryForUpdate({type:"DesktopConnectionManager",src:re.desktopConnectionManager});return}catch{}return this._connectivityStatusManager.queryForUpdate({type:"AccountHandler",src:H.getAccountHandlers})}},Ft=Re.resolve(C8);var TUA=J(mUA());var BUA=3e5,gUA=async A=>{if(A?.mediation==="conditional")return hs();if(!A?.publicKey?.timeout)return hs();let j=Math.max(A.publicKey.timeout,BUA);return hs(j)},hUA=async A=>{if(!A?.publicKey?.timeout)return hs();let j=Math.max(A.publicKey.timeout,BUA);return hs(j)},i5=A=>atob(A.replace(/-/g,"+").replace(/_/g,"/")).split("").map(j=>j.charCodeAt(0)),qUA=async A=>{let j=await zj.loadItemCache();if(!j)return[];let e=mr();return j.itemsForTab(A,t=>{if(t.state!==kA.ItemState.Active||t.templateUuid!==Je||t.overview.passkey)return!1;let r=t.vault.localId?j.accountForVaultID(t.vault.localId):void 0;return!(!r||e.isExcluded(r.uuid,t.vault.uuid))})},xUA=A=>{let j=new Map;return A.forEach(e=>{j.set(e.uuid,e)}),Array.from(j.values())},KE=A=>btoa(String.fromCharCode.apply(null,A)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");async function s5(A,j=[]){let e=await zj.loadItemCache();if(!e)return[];let t=mr(),r=j.map(a=>({...a,id:KE(a.id)}));return e.fillableItems(a=>{if(a.state!==kA.ItemState.Active||a.overview.b5AccountUUID&&!P0(a.overview.b5AccountUUID))return!1;let n=a.vault.localId?e.accountForVaultID(a.vault.localId):void 0;if(!n||t.isExcluded(n.uuid,a.vault.uuid)||a.overview.passkey&&typeof a.overview.passkey.credentialId!="string")return!1;let o=a.overview.passkey?.credentialId;if(!a.overview.passkey||typeof a.overview.passkey.rpId!="string"||a.overview.passkey.rpId!==A)return!1;let i=r.some(s=>s.type==="public-key"&&s.id===o);return!(j.length>0&&!i)})}function vUA(A){let j=A.overview.passkey,e=A.details.passkey;return!j||!e||!xA.VaultItem.isKnownPasskey(e)||e.type!=="webauthn"?(console.warn("Item was missing required key data"),OA(void 0)):Pj({credential_id:i5(j.credentialId),key:i5(e.privateKey),user_handle:i5(e.userHandle),rp_id:j.rpId??"",prf:Wne(e.prf)})}function Wne(A){return A?{alg:A.alg,cred_with_uv:i5(A.credWithUv)}:void 0}function GUA(A){if(A)return{numCreds:1}}function fUA(A){if(A&&A.alg==="HMAC_SHA256")return{alg:A.alg,credWithUv:KE(A.cred_with_uv)}}var l5=A=>A instanceof Error?A.message in M_A?aj.assertLogSafe(A.message):(A.message,aj.assertLogSafe("unknown")):aj.assertLogSafe("unknown"),c5=A=>A instanceof Error?A.message in K_A?aj.assertLogSafe(A.message):(A.message,aj.assertLogSafe("unknown")):aj.assertLogSafe("unknown"),d5=()=>{throw new Error("timeout")},Ql=(A,j)=>(K8(A,j),k5(A)),Xd=(A,j,e)=>(LiA(A,j,e),k5(A)),LiA=(A,j,e)=>{if(!j)try{let[a]=H.defaultSavingLocation();j=a.uuid}catch{}let t=e?p`${e}: ${A}`:A,r="";try{j&&(r=H.findAccountHandlerByUuid(j)?.accountIdentifier.userUUID??""),K8(A,j),rj(new q.LoggableError({errorClass:p`HandleGetCredential`,message:t,userUuid:aj.assertLogSafe(r)}))}catch{console.error("An error was encountered while reporting handleGetCredential")}},K8=(A,j)=>{switch(A.str){case"timeout":Vd(Bs.UsingPasskeyFailureTimeout,j);break;case"disabled":case"unauthorized":case"missing-url":case"missing-public-key":case"bad-rp-id":Vd(Bs.UsingPasskeyFailureBadinput,j);break;case"authenticating-failed":case"corrupted-item":case"internal-error":case"messenger-error":case"port-error":case"unexpected-response":case"vault-data-failed":case"vault-icons-failed":case"conflicting-state":Vd(Bs.UsingPasskeyFailureInternal,j);break;case"unknown":Vd(Bs.UsingPasskeyFailureUnknown,j);break;case"missing-item":Vd(Bs.UsingPasskeyFailureMissingItem,j);break;case"missing-cached-id":case"user-cancelled":case"fallback-requested":break;default:te(A.str)}},k5=A=>({type:"get-credential-error",data:{reason:A.str}}),FUA=(A,j)=>({type:"get-credential-success",data:{credential:A,accountUuid:j}}),Jd=(A,j)=>(bUA(A,j),yUA(A)),E7=(A,j)=>(Cv(A,j),yUA(A)),Cv=(A,j)=>{if(!j)try{let[t]=H.defaultSavingLocation();j=t.uuid}catch{}let e="";try{j&&(e=H.findAccountHandlerByUuid(j)?.accountIdentifier.userUUID??""),bUA(A),rj(new q.LoggableError({errorClass:p`HandleCreateCredential`,message:A,userUuid:aj.assertLogSafe(e)}))}catch{console.error("An error was encountered while reporting handleCreateCredential")}},bUA=(A,j)=>{switch(A.str){case"timeout":Vd(Bs.SavingPasskeyFailureTimeout,j);break;case"bad-rp-id":case"disabled":case"duplicate":case"missing-public-key":case"missing-url":case"unauthorized":Vd(Bs.SavingPasskeyFailureBadinput,j);break;case"create-passkey-failed":case"internal-error":case"messenger-error":case"port-error":case"preview-failed":case"save-passkey-failed":case"unexpected-response":case"vault-data-failed":Vd(Bs.SavingPasskeyFailureInternal,j);break;case"unknown":Vd(Bs.SavingPasskeyFailureUnknown,j);break;case"fallback-requested":case"user-cancelled":break;default:te(A.str)}},yUA=A=>({type:"create-credential-error",data:{reason:A.str}}),$UA=(A,j)=>({type:"create-credential-success",data:{credential:A,accountUuid:j}}),Vd=(A,j)=>{if(!j){try{let[e]=H.defaultSavingLocation();Cc(e.uuid,A)}catch{}return}Cc(j,A)},Qne=()=>H.getAccountHandlers.reduce((j,e)=>{let t=RLA(e.accountIdentifier.accountUUID);return j.concat(t.credentialIds)},[]),wUA=async A=>{let j=Qne(),e=A.map(r=>KE(r.id)).map(aiA);return(await Promise.all(e)).some(r=>j.includes(r))};async function ziA(){let A=await SA.getDatabase().getAllAccounts();return A.length===0?!0:A.some(j=>j.teamMemberPolicies===void 0?!1:j.teamMemberPolicies.blockPasskeyAuthenticator)}async function UiA(){let A=await SA.getDatabase().getAllAccounts();return A.length===0?!0:A.every(j=>j.teamMemberPolicies===void 0?!1:j.teamMemberPolicies.blockPasskeyAuthenticator)}function P0(A){let j=H.findAccountHandlerByUuid(A);if(!j)return!0;let{teamMemberPolicies:e}=j.serveraccount;return e?!e.blockPasskeyAuthenticator:!0}var u5=kh(),E5=A=>{A||u5.broadcast({type:"b5x-unlocked",data:{}}),A&&u5.broadcast({type:"b5x-locked",data:{}})},Yne=async(A,j,e)=>{if(j!=="google.com"||A.origin!=="https://accounts.google.com")return;let t=(e||[]).map(n=>KE(n.id));if(t.length===0)return;let a=(await s5(j,[])).filter(n=>!!n).filter(n=>typeof n.overview.passkey?.credentialId>"u"?!1:t.includes(n.overview.passkey.credentialId));if(a.length!==0)return console.warn("Failed to validateExcludeCredentials: duplicate"),{reason:aj.assertLogSafe("duplicate"),accountUuid:a[0].overview.b5AccountUUID}};async function CUA(A,j){let e;try{e=await Zne(A,j)}catch(t){return console.error("_handleCreateCredential threw exception",t),E7(aj.assertLogSafe("unknown"),void 0)}return e.type==="create-credential-success"&&Vd(Bs.SavingPasskeySuccess,e.data.accountUuid),e}async function Zne(A,{tab:j,frame:e}){let t=H?.allAccountHandlersAreLocked??!0,[r,a]=await Promise.all([ziA(),UiA()]).catch(x=>(Ze(x)?rj(x):rj(new q.LoggableError({errorClass:p`HandleCreateCredential`,message:p`db-policy-lookup-failed`})),[!0,!0]));if(t&&r||!t&&a)return console.warn("Could not complete _handleCreateCredential: disabled"),Jd(aj.assertLogSafe("disabled"),void 0);if(!A.data?.publicKey)return console.warn("Could not complete _handleCreateCredential: missing-public-key"),Jd(aj.assertLogSafe("missing-public-key"),void 0);let n=A.data.publicKey,o=hUA(A.data),i=j.URL(),s=e.URL();if(!i||!s)return console.error("Failed to _handleCreateCredential: missing-url"),E7(aj.assertLogSafe("missing-url"),void 0);try{await jA.webAuthnRPValidate({url:s.toString(),rpId:n.rp.id})}catch(x){let R=x instanceof Error?x.message:void 0;return console.error("Failed to core.webAuthnRPValidate:",R||x),Jd(aj.assertLogSafe("bad-rp-id"),void 0)}w6("passkeySavePrompt")&&await Rm("passkeySigningIn",j.id,!0);let l=await YP(j.id,{type:"passkeySavePrompt"},5);if(!l)return console.error("Failed to send message: messenger-error"),E7(aj.assertLogSafe("messenger-error"),void 0);let c;try{c=await u5.getPort(aj.assertLogSafe("passkey-save-prompt"),j.id,3200,{reqId:l})}catch{return await A0(j.id,l,{type:"passkeyGenericError"})||(console.error("Failed to replaceNotification: messenger-error"),Cv(aj.assertLogSafe("messenger-error"),void 0)),console.error("Failed to _handleCreateCredential: port-error"),E7(aj.assertLogSafe("port-error"),void 0)}let k;try{k=await Aoe(n,i,j)}catch{return await A0(j.id,l,{type:"passkeyGenericError"})||(console.error("Failed to replaceNotification: messenger-error"),Cv(aj.assertLogSafe("messenger-error"),void 0)),c.close(),console.error("Failed to _handleCreateCredential: preview-failed"),E7(aj.assertLogSafe("preview-failed"),void 0)}if(H.allAccountHandlersAreLocked){c.postMessage({type:"locked-preview-passkey-data",data:k});let x=await c.raceDisconnect([c.readMessage(),o]);if(x.type==="use-system-passkeys")return c.close(),console.warn("Could not complete _handleCreateCredential while locked: use-system-passkeys"),Jd(aj.assertLogSafe("fallback-requested"),void 0);if(x.type==="disconnected")return c.close(),console.warn("Could not complete _handleCreateCredential while locked: disconnected"),Jd(aj.assertLogSafe("fallback-requested"),void 0);if(x.type!=="passkey-unlocked")return c.sendErrorAndClose("unexpected-response"),console.error("Failed to _handleCreateCredential while locked: unexpected-response"),Jd(aj.assertLogSafe("unexpected-response"),void 0)}let u=await Yne(s,n.rp.id,n.excludeCredentials);if(u)return kK(j.id,l).catch(()=>{Cv(aj.assertLogSafe("messenger-error"),void 0)}),c.close(),console.warn("Could not complete _handleCreateCredential: validate-credentials-failed"),Jd(u.reason,u.accountUuid);try{await IUA(c,k),await PUA(c,j,s,n)}catch{return await A0(j.id,l,{type:"passkeyGenericError"})||(console.error("Failed to replaceNotification: messenger-error"),Cv(aj.assertLogSafe("messenger-error"),void 0)),c.close(),console.error("Failed to _handleCreateCredential: vault-data-failed"),E7(aj.assertLogSafe("vault-data-failed"),void 0)}let m,F="";for(;m=await c.raceDisconnect([c.readMessage(),o]);){if(m.type==="update-passkey-save"){let{accountUuid:x}=i7(m.data.id);F=x;break}if(m.type==="new-passkey-save"){F=m.data.accountVaultUuid.accountUuid;break}if(m.type==="passkey-unlocked")try{await IUA(c,k),await PUA(c,j,s,n);continue}catch{return await A0(j.id,l,{type:"passkeyGenericError"})||(console.error("Failed to replaceNotification: messenger-error"),Cv(aj.assertLogSafe("messenger-error"),void 0)),c.close(),console.error("Failed to _handleCreateCredential after unlock: vault-data-failed"),E7(aj.assertLogSafe("vault-data-failed"),void 0)}if(m.type!=="passkey-locked"){if(m.type==="use-system-passkeys")return c.close(),console.warn("Could not complete _handleCreateCredential: use-system-passkeys"),Jd(aj.assertLogSafe("fallback-requested"),void 0);if(m.type==="disconnected")return c.close(),console.warn("Could not complete _handleCreateCredential: disconnected"),Jd(aj.assertLogSafe("fallback-requested"),void 0);if(m.type==="timeout")return c.sendErrorAndClose("timeout"),console.warn("Could not complete _handleCreateCredential: timeout"),Jd(aj.assertLogSafe("timeout"),void 0);cl(m.type,aj.assertLogSafe("response.type"))}}if(!(F?P0(F):!0))return console.error("User attempted to save passkey on account with passkey blocking policy"),c.sendErrorAndClose("disabled"),console.warn("Could not complete _handleCreateCredential: disabled"),Jd(aj.assertLogSafe("disabled"),F);let G;try{let x={publicKey:n};G=await Promise.race([jA.webAuthnRegister({url:s.origin,request:x,isPrfEnabled:await KUA()}).catch(R=>{let P=R instanceof Error?R.message:R;throw console.error("Failed to core.webAuthnRegister:",P),new Error("create-passkey-failed")}),o.then(d5)])}catch(x){let R=l5(x);return c.sendErrorAndClose(R.str),console.error("Failed to _handleCreateCredential:",R.str),E7(R,F)}if(m.type==="update-passkey-save")try{let x=await Promise.race([roe(m.data.id,n,G,i,s).catch(()=>{throw new Error("save-passkey-failed")}),o.then(d5)]);x.username&&(k.username=x.username.value)}catch(x){let R=l5(x);return c.sendErrorAndClose(R.str),console.error("Failed to _handleCreateCredential:",R.str),E7(R,F)}if(m.type==="new-passkey-save")try{await Promise.race([toe(j.title,i,s,m.data.accountVaultUuid,n,G).catch(()=>{throw new Error("save-passkey-failed")}),o.then(d5)])}catch(x){let R=l5(x);return c.sendErrorAndClose(R.str),console.error("Failed to _handleCreateCredential:",R.str),E7(R,F)}return c.postMessage({type:"passkey-register-success",data:k}),c.close(),$UA(G.public_key,F)}var Aoe=async(A,j,e)=>{let t=WA(),r=A.user.name,a=await jA.getRichIconForUrl(j.href,e.title,t.showRichIcons),n=await jA.inferBestTitle(e.title,e.unparsedUrl)??e.title;return{username:r,icon:a,title:n}},IUA=async(A,j)=>{let{defaultSuggestedVaultId:e,vaultListElements:t}=await vh(void 0,{includeDontSaveOption:!1,accountsFilter:P0});t.length===0&&console.warn("No vaults available to save passkey to");let r={...j,vaultListElements:t,defaultSuggestedVaultId:e};return A.postMessage({type:"new-passkey-data",data:r}),r},PUA=async(A,j,e,t)=>{let r=KE(t.user.id),a=t.rp.id||e.host,n=await joe(j,a,t);if(n.length===0){A.postMessage({type:"update-passkey-data",data:[]});return}let o=aoe(n,r,t.user),i=await p7(void 0),s=await _v(i.filter(l=>P0(l.uuid)),n,o?.localId);if(!o){for(let l of s)if(l.type==="option"){l.data.isDefault=!0;break}}A.postMessage({type:"update-passkey-data",data:s})},joe=async(A,j,e)=>{let t=KE(e.user.id),r=await s5(j),n=(await Promise.all(r.map(async s=>E6(s)))).filter(s=>!!s).filter(s=>s?.details.passkey?.userHandle===t),o=await qUA(A);return xUA([...n,...o]).filter(({overview:s})=>s.b5AccountUUID?P0(s.b5AccountUUID):!0)},_UA=(A,j)=>{A.details.fields=A.details.fields??[],A.details.fields.push({id:"identifier",type:"T",value:j,designation:"username"}),A.overview.ainfo=j},SUA=(A,j,e)=>{let t=eoe(j,e);A.overview.URLs=t,A.overview.url=t[0].u},eoe=(A,j)=>(0,TUA.default)([{l:"website",u:A.origin},{l:"website",u:j.origin}],"u"),toe=async(A,j,e,t,r,a)=>{let n=H.findAccountHandlerByUuid(t.accountUuid);if(!n)throw new Error("No valid account handler available.");let o=n.vaults.find(s=>s.uuid===t.vaultUuid);if(!o)throw new Error("Vault does not exist.");let i=new kA(o);return i.vault=o,i.state=kA.ItemState.Active,i.templateUuid=Je,i.overview.b5AccountUUID=t.accountUuid,i.overview.title=await jA.inferBestTitle(A,j.origin)??A,SUA(i,j,e),_UA(i,r.user.name),HUA(i,r,a),await Da(i),i},roe=async(A,j,e,t,r)=>{let{itemUuid:a}=i7(A),n=await Br(a);if(!n)throw new Error("could not find item to update");return n.overview.URLs&&n.overview.URLs.length>0||SUA(n,t,r),n.details.fields?.find(s=>s.designation==="username")||_UA(n,j.user.name),HUA(n,j,e),await Da(n),n},HUA=(A,j,e)=>{A.overview.passkey={credentialId:e.public_key.id,rpId:e.private_key.rp_id,userHandle:KE(j.user.id),prf:GUA(e.private_key.prf)},A.details.passkey={type:"webauthn",createdAt:Math.floor(new Date().getTime()/1e3),privateKey:KE(e.private_key.key),userHandle:KE(j.user.id),prf:fUA(e.private_key.prf)}};function aoe(A,j,e){let t=A.find(r=>r?.details.passkey?.userHandle===j);return t||(t=A.find(r=>{let a=r.overview.ainfo===e.name,n=r.overview.ainfo===e.displayName;if(a||n)return r})),t}async function MUA(A,j){let e;try{e=await noe(A,j)}catch(t){return console.error("_handleGetCredential threw exception",t),Xd(aj.assertLogSafe("unknown"),void 0)}return e.type==="get-credential-success"&&Vd(Bs.UsingPasskeySuccess,e.data.accountUuid),e}async function noe(A,{tab:j,frame:e}){let t=H?.allAccountHandlersAreLocked??!0,[r,a]=await Promise.all([ziA(),UiA()]).catch(h=>(Ze(h)?rj(h):rj(new q.LoggableError({errorClass:p`HandleGetCredential`,message:p`db-policy-lookup-failed`})),[!0,!0]));if(t&&r||!t&&a)return console.warn("Could not complete _handleGetCredential: disabled"),Ql(aj.assertLogSafe("disabled"),void 0);let n=A.data?.publicKey;if(!n)return console.warn("Could not complete _handleGetCredential: missing-public-key"),Ql(aj.assertLogSafe("missing-public-key"),void 0);let o=gUA(A.data);if(t&&n.allowCredentials&&n.allowCredentials.length>0&&!await wUA(n.allowCredentials)){let O=aj.assertLogSafe("missing-cached-id");return console.warn("Could not complete _handleGetCredential:",O),Ql(O,void 0)}let i=j.URL(),s=e.URL();if(!s||!i)return console.error("Failed to _handleGetCredential: missing-url"),Xd(aj.assertLogSafe("missing-url"),void 0);if((await Ba())?.checkPageRestrictions(s.href)?.status==="blocked")return Ql(aj.assertLogSafe("disabled"),void 0);let k;try{if(k=await SE(),!k)throw console.warn("Could not complete _handleGetCredential: no-available-accounts"),new Error("no available accounts to retrieve passkey from")}catch{return console.warn("Could not complete _handleGetCredential: missing-item"),Ql(aj.assertLogSafe("missing-item"),void 0)}let u;if(t){try{u=await DUA(j.id,A.data?.mediation)}catch(O){let Q=c5(O);return console.error("Failed to _handleGetCredential:",Q),Xd(Q,void 0)}let h=await u.raceDisconnect([u.readMessage(),o]);if(h.type==="use-system-passkeys")return u.close(),console.warn("Could not complete _handleGetCredential: fallback-requested"),Ql(aj.assertLogSafe("fallback-requested"),void 0);if(h.type==="timeout")return u.sendErrorAndClose("timeout"),console.warn("Could not complete _handleGetCredential: timeout"),Ql(aj.assertLogSafe("timeout"),void 0);if(h.type==="disconnected")return u.close(),console.warn("Could not complete _handleGetCredential: disconnected"),Ql(aj.assertLogSafe("fallback-requested"),void 0);if(h.type!=="passkey-unlocked")return u.sendErrorAndClose("unexpected-response"),console.error("Failed to _handleGetCredential: unexpected-response"),Xd(aj.assertLogSafe("unexpected-response"),void 0)}let m=WA(),F=await RUA(s,n,m.showRichIcons);if(F.status!=="success"){if(console.error("Failed to _handleGetCredential:",F.reason),!u){if(F.reason.str==="bad-rp-id")return console.error("Failed to _handleGetCredential while unlocked: bad-rp-id"),Xd(F.reason,F.accountUuid,F.message);if(F.reason.str==="missing-item")return console.warn("Could not complete _handleGetCredential while unlocked: missing-item"),Ql(F.reason,F.accountUuid);if(F.reason.str==="vault-icons-failed")return console.error("Failed to _handleGetCredential while unlocked: vault-icons-failed"),Xd(F.reason,F.accountUuid);te(F.reason.str)}if(F.reason.str==="missing-item")console.warn("Could not complete _handleGetCredential while locked: missing-item"),K8(F.reason,F.accountUuid);else if(F.reason.str==="vault-icons-failed")console.error("Failed to _handleGetCredential while locked: vault-icons-failed"),LiA(F.reason,F.accountUuid);else{if(F.reason.str==="bad-rp-id")return console.error("Failed to _handleGetCredential while locked: bad-rp-id"),Xd(F.reason,F.accountUuid,F.message);te(F.reason.str)}return await OUA(u,o,F.reason)}let S=F.data.items;if(!u)try{u=await DUA(j.id,A.data?.mediation)}catch(h){let O=c5(h);return console.error("Failed to _handleGetCredential:",O.str),Xd(O,S[0].overview.b5AccountUUID)}u.postMessage({type:"sign-in-with-passkey",data:{options:F.data.options}});let G,x;for(;G=await u.raceDisconnect([u.readMessage(),o]);){if(G.type==="select-passkey-item"){x=G.data.localId;break}if(G.type==="passkey-unlocked"){let h=await RUA(s,n,m.showRichIcons);if(h.status!=="success"){let{reason:O}=h;return console.warn("Could not complete _handleGetCredential:",O.str),K8(O,h.accountUuid),await OUA(u,o,O)}S=h.data.items,u.postMessage({type:"sign-in-with-passkey",data:{options:h.data.options}});continue}if(G.type!=="passkey-locked"){if(G.type==="use-system-passkeys")return u.close(),console.warn("Could not complete _handleGetCredential: use-system-passkeys"),Ql(aj.assertLogSafe("fallback-requested"),void 0);if(G.type==="disconnected")return u.close(),console.warn("Could not complete _handleGetCredential: disconnected"),Ql(aj.assertLogSafe("fallback-requested"),S[0].overview.b5AccountUUID);if(G.type==="timeout")return u.sendErrorAndClose("timeout"),console.warn("Could not complete _handleGetCredential: timeout"),Ql(aj.assertLogSafe("timeout"),S[0].overview.b5AccountUUID);cl(G.type,aj.assertLogSafe("notificationState.type"))}}let R=S.find(h=>h.localId===x),P=await E6(R);if(!P)return console.error("User picked a localId that doesn't exist:",x),u.sendErrorAndClose("conflicting-state"),console.error("Failed to _handleGetCredential: conflicting-state"),Xd(aj.assertLogSafe("conflicting-state"),void 0);let D=vUA(P);if(D.isErr())return console.error("Unable to find key to sign in with."),u.sendErrorAndClose("corrupted-item"),console.error("Failed to _handleGetCredential: corrupted-item"),Xd(aj.assertLogSafe("corrupted-item"),P.overview.b5AccountUUID);let y;try{y=await Promise.race([jA.webAuthnLogin({url:s.origin,passkey:D.value,request:{publicKey:n},isPrfEnabled:await KUA()}).then(h=>({type:"auth-success",data:{credential:h.credential}})).catch(h=>{let O=h instanceof Error?h.message:h;throw console.error("Failed to core.webAuthnLogin:",O),new Error("authenticating-failed")}),o])}catch(h){let O=c5(h);return u.sendErrorAndClose(O.str),console.error("Failed to _handleGetCredential:",O.str),Xd(O,P.overview.b5AccountUUID)}return y.type!=="auth-success"?(u.sendErrorAndClose("timeout"),console.warn("Could not complete _handleGetCredential: timeout"),Ql(aj.assertLogSafe("timeout"),P.overview.b5AccountUUID)):(u.postMessage({type:"sign-in-success",data:{}}),await u.raceDisconnect([],3500),u.close(),FUA(y.data.credential,P.overview.b5AccountUUID))}async function KUA(){let A=gm["securityDevelopment-passkeyPRF"];try{A=await Promise.race([ZA.anyAccountHasFlag("securityDevelopment-passkeyPRF"),sP(1e3)])}catch{console.error(p`Failed to get user feature flags for prf`)}return A}var OUA=async(A,j,e)=>{A.postMessage({type:"error",data:{loggableReason:e.str}});let t,r;for(;t=await A.raceDisconnect([A.readMessage(),j]);){if(t.type==="use-system-passkeys"){r=aj.assertLogSafe("fallback-requested");break}if(t.type==="disconnected"){r=aj.assertLogSafe("fallback-requested");break}if(t.type==="timeout"){A.postMessage({type:"error",data:{loggableReason:"timeout"}}),r=aj.assertLogSafe("timeout");break}t.type==="passkey-unlocked"&&A.postMessage({type:"error",data:{loggableReason:e.str}})}return r||(r=aj.assertLogSafe("internal-error")),A.close(),k5(r)};async function NUA(A,j){return!WA().authenticatePasskeys||oo.has(j.tab)||ooe(j.tab)?!1:await FD()}function ooe(A){return ioe(A.unparsedUrl)}function ioe(A){return sLA.some(j=>A.includes(j))}var RUA=async(A,j,e)=>{let t=await jA.webAuthnRPValidate({url:A.toString(),rpId:j.rpId}).then(o=>({status:"success",rpId:o})).catch(o=>{let i=o instanceof Error?o.message:void 0;return console.error("Failed to core.webAuthnRPValidate:",i||o),{status:"failure",reason:aj.assertLogSafe("bad-rp-id"),message:i?aj.assertLogSafe(i):void 0,accountUuid:void 0}});if(t.status==="failure")return t;let r=await s5(t.rpId,j.allowCredentials);if(r.length===0)return console.warn("Unable to find any fillable passkeys"),{status:"failure",reason:aj.assertLogSafe("missing-item"),accountUuid:void 0};let n=(await Promise.all(r.filter(o=>typeof o.localId<"u").map(async o=>Ei(o,120,e).then(i=>({username:o.overview.ainfo,title:o.overview.title,icon:i,localId:o.localId})).catch(()=>{console.warn("Failed to load icon for item",o.uuid)})))).filter(o=>!!o);return n.length===0?(console.warn("Unable to load icons"),{status:"failure",reason:aj.assertLogSafe("vault-icons-failed"),accountUuid:r[0].overview.b5AccountUUID}):{status:"success",data:{options:n,items:r}}};async function DUA(A,j){let e=j?{mediation:j}:void 0;w6("passkeySigningIn")&&await Rm("passkeySigningIn",A,!0);let t=await YP(A,{type:"passkeySigningIn",params:e},5);if(!t)throw new Error("messenger-error");try{return await u5.getPort(aj.assertLogSafe("passkey-signin-prompt"),A,3200,{reqId:t})}catch{throw await A0(A,t,{type:"passkeyGenericError"})?new Error("port-error"):(console.error("Failed to replaceNotification: messenger-error"),new Error("messenger-error"))}}async function loe(){lj("lock-state-changed",{locked:!1,unlockedAccounts:H.getAccountHandlers.filter(A=>A.isUnlocked).map(A=>A.uuid)}),await N8(!1)}function T8(){NNA(),vn(),Jl.startAutoLockMonitor(),gh().startKeepalive(),b8(),loe(),bKA.loadSaveIgnoreForUnlockedAccounts(),kN.begin(),globalThis.dispatchEvent(new Event(br)),d5A(),EKA(),E5(!1)}async function O0(){if(re.getDesktopAppState().type==="Connected"&&!H.allAccountHandlersHasUserSuspended)return{name:"yes",data:void 0};if(MN())return{name:"yes",data:void 0};let A=await Te.getShortcuts();return{name:"no",data:{keyboardShortcut:A.browserAction!==""?A.browserAction:void 0}}}async function ViA(){return v0("inline"),O0()}async function x0(A){return Bt()?UUA(A):Cm({type:"AccountPassword",data:A})}function coe(A){return H.getAccountHandlers.filter(j=>{switch(A.type){case"AccountPassword":return j.isLocked;case"DelegatedSession":return Array.isArray(A.data)?A.data.find(e=>e.accountUuid===j.uuid):j.uuid===A.data.accountUuid;case"SingleSignOn":return A.data.ssoResponse.user.accountUuid===j.uuid}})}function doe(A,j){return j.map(async e=>{try{switch(A.type){case"AccountPassword":return e.unlockWithAccountPassword(A.data);case"DelegatedSession":{let t=Array.isArray(A.data)?A.data.find(r=>r.accountUuid===e.uuid):A.data;return t?e.unlockWithMasterUnlockKey(t.muk,t.client?{type:"Other",data:{client:t.client}}:void 0):Promise.resolve(e)}case"SingleSignOn":return e.unlockWithCredentialBundle(A.data.ssoResponse,A.data.unverifiedContext);default:return te(A)}}catch{return e}})}function koe(A,j){for(let e of A){let t;switch(j.type){case"AccountPassword":t={type:"Credentials",data:{credentials:e.credentials({accountPassword:j.data})}};break;case"DelegatedSession":{let r=Array.isArray(j.data)?j.data.find(a=>a.accountUuid===e.uuid)?.client:j.data.client;r&&(t={type:"Other",data:{client:r}});break}case"SingleSignOn":t={type:"Other",data:{client:e.client}};break}t&&e.startSync(t).catch(r=>Ji(e,r))}T8()}async function Cm(A){if(!H.hasAccountHandlers)return OA({type:"NoSavedAccounts"});let j=coe(A);if(j.length===0)return console.warn("UnlockViaB5x: No locked accounts found"),Pj(void 0);let e=doe(A,j),t=await Promise.all(e),r=t.filter(n=>n.isUnlocked),a=t.filter(n=>n.restrictFailedLoginsPolicyLockout!==void 0);if(A.type==="AccountPassword"){let n=await H.updateSuspendedAccounts(t,r,A.data);if(n.isErr())return n}return a.length>0?a[0].restrictFailedLoginsPolicyLockout===1?OA({type:"FailedLoginAttempts",subType:"offline"}):OA({type:"FailedLoginAttempts",subType:"server"}):r.length===0?OA({type:"FailedToUnlock"}):(await zj.loadAndDecryptItemCache(A.options?.persistRestorePoint),koe(r,A),Pj(void 0))}async function LUA(){let A=$P();if(A.size===0)return;let j=[];for(let t of A.values()){let r=async()=>{let a=await SA.getDatabase().findAccountByUUID(t.accountUuid);if(!a)throw new Error("Unable to create client for unknown account");if(t.session)try{return await vK(a.signinAddress,t.session,void 0,t.srpX)}catch{console.warn("Failed to sign in using existing session, falling back to sign in...")}if(a&&a.secretKey&&t.srpX)return Hd({credentials:{accountIdentifier:{accountUUID:a.uuid,userUUID:a.userUUID,server:fi(a.signinAddress)},email:a.email,muk:t.masterKey,secretKey:a.secretKey,signinAddress:a.signinAddress,srpX:t.srpX,dSecret:a.dSecret},device:await jn()}).finally(async()=>Ft.updateConnectivityStatus());throw new Error(`Failed to sign in using context init cache for user ${a.userUUID}.`)};j.push({client:r,accountUuid:t.accountUuid,muk:t.masterKey})}let e=await Cm({type:"DelegatedSession",data:j,options:{persistRestorePoint:!0}});e.isErr()&&console.warn(`Unable to unlock accounts with a context initialization cache: ${e.error.type}`)}var zUA=async(A=3e4)=>new Promise(j=>{let e=()=>{clearTimeout(t),j()};mt.subscribe(br,e,{once:!0});let t=setTimeout(()=>{try{mt.unsubscribe(br,e),j()}catch{}},A)});function CzA(){Re.resolve(Ys).subscribe(br,XiA).subscribe(nl,JMA)}async function UUA(A){let j=await anA({type:"unlockUsingPrimaryAccountPassword",data:A});return VUA(j,"password")}async function Ov(A){let j=await anA({type:"unlockFromKeychainData",data:{initiatedByUserAction:A}});return VUA(j,"keychain")}async function VUA(A,j){if(A.isOk()){let e=A.value;return await CN(e.accounts,{removeExtraAccounts:!0}),Lt()?e.accounts.length===0?OA({type:"NoSavedAccounts"}):j==="password"?OA({type:"FailedToUnlock"}):OA({type:"AppCommunicationFailed"}):(zj.loadAndDecryptItemCache().then(()=>{T8()}),e.accounts.forEach(t=>{t.type==="Unlocked"&&j==="password"&&ft("AppUnlock",{unlock_method:"PASSWORD",status:"SUCCESS"},t.content.details.accountUuid)}),Pj(void 0))}else return console.error(`Failed to connect to 1Password App due to error: ${A.error}`),OA({type:"AppCommunicationFailed"})}function LN(A){let j=SMA(A);hn(j)}async function Vm(){return MMA()}async function uoe(A){return UMA(A)}async function XiA(){return VMA()}async function XUA(A){return XMA(A)}async function zNA(A){let j=await uoe(A);if(j.isOk())return j.value;throw new Error("DSecret proxy request failed")}var p5=class extends e7{constructor(e){super();this.autoLockTimeInMinutes=e;this.updateSettingsFromApp=this.updateSettingsFromApp.bind(this)}name="Safari iOS Lock Monitor";autoLockOnDeviceSleep=!1;async start(){await this.updateSettingsFromApp(),Y6A()||$6(),await super.start()}getCurrentUserStatus=async()=>{if(this.autoLockTimeInMinutes===Gi)return"active";let t=await Q6A()-Y6A(),n=this.autoLockTimeInMinutes*60*1e3,o=n-t;return console.warn("[LM] Lock countdown: "+o+"ms"),t<n?($6(),"active"):(IM(),"idle")};queryState=async(e=bm)=>{await this.updateSettingsFromApp();let t=await this.shouldLock(e);t?this.postShouldLockNotification():XiA();let r=t?"locked":"active";return this.setCachedQueryState(r),r};startHeartbeat(){}async updateSettingsFromApp(){(await Vm()).match(({settings:{requireAuthenticationAfter:t}})=>{t!==this.autoLockTimeInMinutes&&this.updateAutoLockSettings(t,this.autoLockOnDeviceSleep)},()=>{console.warn("[LM] Unable to connect to OPI; autolock settings may be stale.")})}};var Eoe=60,m5=class A extends e7{constructor(e,t){super();this.autoLockTimeInMinutes=e;this.autoLockOnDeviceSleep=t;this.port=browser.runtime.connectNative(""),this.onSweMessage=this.onSweMessage.bind(this)}name="Safari macOS Lock Monitor";port;async start(){this.port.onMessage.addListener(this.onSweMessage),await super.start()}async stop(){this.port.onMessage.removeListener(this.onSweMessage),await super.stop()}startHeartbeat(){}onSweMessage(e){A.isLockMonitorNotification(e)&&(console.info(...j7(`Received lock notification. Lock reason: ${e.userInfo.message.type}`)),this.postShouldLockNotification())}static isLockMonitorNotification(e){return!!(e&&typeof e=="object"&&"name"in e&&e.name&&e.name==="lockMonitorNotification"&&"userInfo"in e&&typeof e.userInfo=="object"&&e.userInfo&&"message"in e.userInfo&&typeof e.userInfo.message=="object")}getCurrentUserStatus=async()=>this.autoLockTimeInMinutes===Gi?"active":browser.runtime.sendNativeMessage("",{name:"query-active-status",data:JSON.stringify({maximumIdleTimeInSeconds:this.autoLockTimeInMinutes*Eoe})}).then(e=>e).catch(()=>(console.error("[LM] Unable to communicate with native app, locking."),"locked"))};async function JUA(A,j,e){let t=j;return t!==Gi&&(t=Math.max(j,RD)),A&&await A.hasAccounts()?new OP(A):T6()?new m5(t,e):Bt()?new p5(t):new DM(t,e)}var L8=class{_lockMonitor;_logger;constructor(){this._lockMonitor=null,this._logger=new rt("\u{1F512} Lock monitor"),y6().subscribe(j=>{this.handlePolicyUpdate(j)})}get lockMonitor(){return this._lockMonitor}async startAutoLockMonitor(){let j=WA();if(!j.autoLockEnabled)return;let e=re.desktopConnectionManager?.getDesktopApp();this._lockMonitor&&e&&!fMA(this._lockMonitor)&&await this.stopAutoLockMonitor(),this._lockMonitor||(this._lockMonitor=await JUA(e,j.autoLockMinutes,j.autoLockOnDeviceSleep)),this._logger.debug("Starting auto lock monitor"),this._lockMonitor.start()}async stopAutoLockMonitor(){this._lockMonitor&&(this._logger.debug("Stopping auto lock monitor"),await this._lockMonitor.stop(),this._lockMonitor=null)}async handlePolicyUpdate(j){let e=j.find(a=>a.policy.policyName==="security-settings-presets"),t=j.find(a=>a.policy.policyName==="auto-lock");if(!e&&!t)return;this._lockMonitor||await this.startAutoLockMonitor();let r=WA();if(!e&&t)this._lockMonitor?.updateAutoLockSettings(t.policy.definition.lockAfterIdleTimeMin,r.autoLockOnDeviceSleep);else if(e){let a=e.policy;if(!a.definition?.v1)return;let n=a.definition.v1?.platformSettings.find(o=>o.clientPlatform===uG.Extension);this._lockMonitor?.updateAutoLockSettings(n?.enforcedSettings.autoLockIdleInterval??r.autoLockMinutes,n?.enforcedSettings.autoLockOnDeviceSleep??r.autoLockOnDeviceSleep)}}},Jl=Re.resolve(L8);var poe={closePopup:!0};async function io(A=poe){for(let j of H.getAccountHandlers)ZA.anyAccountHasFlag("frameworks-telem-applock-event")&&ft("AppLock",{lock_reason:WUA.TelemetryString.assertSafeForTelemetry("B5X"),autolock_duration_setting:WA().autoLockMinutes},j.uuid),await j.lock(!1);KtA(),kHA(),je.removeItem("offline-mfa-accounts"),YUA(A)}function QUA(A){let{accountUuid:j}=A.detail;dHA(j),YUA()}async function YUA(A){if(Xg(),!H.allAccountHandlersAreLocked){await zj.loadAndDecryptItemCache();return}zj.clearItemCache(),moe(A),jA.onLock(),b8(),vn(),Jl.stopAutoLockMonitor(),gh().stopKeepalive(),kN.clear(),AoA(),E5(!0),globalThis.dispatchEvent(new Event(nl)),console.info(`%c[OP] Locked at ${new Date().toString()}`,"color:blue")}function ZUA(){return Jl.lockMonitor&&Jl.lockMonitor.queryCachedState()!=="active"?(io(),!0):!1}async function moe(A){lj("lock-state-changed",{locked:!0,...A}),await N8(!0)}function Boe(A,j){if(!WA().showNotifications||ve())return;let t=`authrequired-${A}`;chrome.notifications.getAll(r=>{let a=t in r,n={type:"basic",iconUrl:Qs,title:oA("Authentication Required"),message:oA("Sign in to your 1Password account ({accountName}) to continue.",{accountName:A})};vt()||(n.requireInteraction=!0),a&&!vt()&&!ve()?chrome.notifications.update(t,n):(chrome.notifications.create(t,n),Um("click",t,()=>{ME({url:j})}))})}function goe(A){if(!WA().showNotifications||ve())return;let e=`duoauthrequired-${A}`;chrome.notifications.getAll(t=>{let r=e in t,a={type:"basic",iconUrl:Qs,title:oA("Duo Authentication Required"),message:oA("Sign in to your 1Password account ({accountName}) and authenticate with Duo to continue.",{accountName:A})};vt()||(a.requireInteraction=!0),r&&!vt()&&!ve()?chrome.notifications.update(e,a):(chrome.notifications.create(e,a),Um("click",e,()=>{io()}))})}function P9A(A,j,e){if(!WA().showNotifications||ve())return;let r=`td-enrollment-${j}`,a={type:"basic",iconUrl:Qs,title:oA("New app or browser found"),message:A,isClickable:!!e};chrome.notifications.create(r,a),e&&Um("click",r,e)}function AVA(A,j){if(!A||!(A instanceof Error))return;let e=`${j.signinAddress}/signin?a=${j.userUUID}`;A.name==="SecretKeyIdOrFormatIsWrong"||A.message==="No dSecret available."||A.message==="Unable to complete MFA, dSecret option not available."||q.errors.isClientError(A,q.errors.ClientErrorCode.invalidMFA)||q.errors.isClientError(A,q.errors.ClientErrorCode.invalidEmailOrPassword)?Boe(j.name,e):sHA(A,0)&&goe(j.name)}function hoe(A,j){if(Ze(j))rj(j),console.error(`Sync error: ${j.message}`);else if(j instanceof Sd){let e=p`Unable to reauthenticate automatically during sync ${W(j.message)}`;rj(new q.LoggableError({errorClass:Xr,message:e,severityLevel:"warning",stackOverrideError:j,userUuid:A.user?.uuid?W(A.user.uuid):void 0})),console.error(e)}else if((Wh(j)||N7(j))&&j.code&&typeof j.code=="number"){if(console.error(`Sync error: ${j.name} ${j.code}`),N7(j,td.unexpectedFetchError)||N7(j,td.serverRequestTimedOut)||j instanceof M7&&j.code===sc.tooManyRequests||j instanceof M7&&j.code===sc.unauthorized)return;rj(new q.LoggableError({errorClass:Xr,message:p`Sync error: `.concat(W(j.name)).concat(p` `).concat(dp(j.code)),stackOverrideError:j,userUuid:A.user?.uuid?W(A.user.uuid):void 0}))}else q.errors.getErrorMessage(j).startsWith("Missing keyset for vault")?(rj(new q.LoggableError({errorClass:Xr,message:p`Missing keyset for vault.`,stackOverrideError:j,userUuid:A.user?.uuid?W(A.user.uuid):void 0})),console.error("Sync error: Missing keyset for vault.")):console.error("Unknown sync error.")}function Ji(A,j){hoe(A,j),(q.errors.isClientError(j,q.errors.ClientErrorCode.invalidMFA)||j instanceof Error&&j.message==="Unable to complete MFA, dSecret option not available.")&&(JiA(A.serveraccount),console.info(`\u{1F4DD} Removing dSecret for account ${A.serveraccount.uuid}`),H.updateAccount(A.serveraccount.uuid,{dSecret:void 0})),q.errors.isClientError(j,q.errors.ClientErrorCode.incorrectMasterPassword)||q.errors.isClientError(j,q.errors.ClientErrorCode.invalidEmailOrPassword)?(console.info(`Account password changed since we last synced keysets for account ${A.uuid}. Locking.`),SA.getDatabase().resetAccountKeysets(A.serveraccount),A.lock()):q.errors.isServerError(j,q.errors.ServerErrorCode.suspendedLoginFailed)||q.errors.isServerError(j,q.errors.ServerErrorReason.userSuspended)?(A.setUserState(Dj.State.Suspended),A.lock()):q.errors.isServerError(j,q.errors.ServerErrorCode.deletedLoginFailed)||q.errors.isServerError(j,q.errors.ServerErrorReason.userDeleted)||q.errors.isServerError(j,q.errors.ServerErrorCode.registrationFailed)||q.errors.isClientError(j,q.errors.ClientErrorCode.deviceDeleted)?(console.info(`Destroying ${A.uuid} (error code ${j.code}).`),A.destroyAccount()):q.errors.isNewServerError(j,q.errors.ServerErrorReason.passwordAuthNotAllowed)?(console.info(`Account ${A.uuid} migrated to SSO. Locking.`),A.lock()):(AVA(j,A.serveraccount),y6().initializePolicies([A])),Ft.updateConnectivityStatus()}async function GKA(){return(await R0()).some(j=>j.canCreateVendorCard)}async function M9A(A,j){try{let e=await NA.getBrexClientInfo(A),t=await NA.requestBrexAccessToken(A,{refreshToken:j}),{accessToken:r,expiresIn:a,refreshToken:n}=t;return Pj({refreshToken:n,accessToken:r,expiresIn:a,context:{clientId:e.clientId,clientSecret:e.clientSecret}})}catch{return console.error("Unable to get an access token for Brex"),OA({type:"RequestError"})}}async function qoe(A,j,e,t){for(let r of j)r.details.sections=[{name:"brex",title:"brex",fields:[{k:"string",n:"accountId",t:"accountId",v:e},{k:"string",n:"refreshToken",t:"refreshToken",v:t}]}],await new Promise(a=>void Da(r,!1,A,a))}async function tVA(A,j,e){try{let t=await fetch(`${A.apiUrl}${j}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});return Pj(t)}catch(t){return OA({type:"RequestError",data:t})}}async function rVA(A,j){let e=await jA.getCurrentBrexUser({access_token:j,environment:A.type});return e.type==="Error"?(console.error("Unable to make request:",e.content),OA({type:"RequestError",data:e.content})):Pj(e.content)}async function l9A(A,j,e){let t=await jA.getAllCardsForBrexUser({access_token:j,user_id:e,environment:A.type});return t.type==="Error"?(console.error("Unable to make request for getAllUserCards:",t.content.type),OA({type:"RequestError",data:t.content})):Pj(t.content.filter(r=>r.status==="ACTIVE"))}async function c9A(A,j,e){let t=await rVA(A,j);return t.isErr()?(console.error("Unable to get information about the current user when requesting cards"),OA({type:"RequestError",data:t.error})):Pj((await Promise.all(e.map(async r=>xoe(A,r,t.value.first_name,t.value.last_name,j)))).filter(r=>!!r))}function jVA(A){return A==="CARD"?"vendor":"corporate"}function eVA(A){return`$${A>0?A.toString().slice(0,-2):0}.00`}async function xoe(A,j,e,t,r){try{let a=await voe(A,j.id,r);if(a.isErr())throw console.error("Failed to get card number details for brex card:",a.error.type),new Error;let{cvv:n,number:o,expiration_date:i}=a.value,s=await jA.getCreditCardType(o),l=parseInt(`${i.year}${i.month.toString().padStart(2,"0")}`,10),c=j.spend_controls?.lock_after_date?Math.floor(new Date(`${j.spend_controls?.lock_after_date} 00:00:00`).getTime()/1e3):null,k=jVA(j.limit_type)==="vendor"?oA("Vendor Card"):oA("Corporate Card"),u="lock after date",m="spend limit",F="billing address",S="None",G=c?{t:u,n:q.generateUUID(),k:"date",v:c.toString(),inputTraits:{autocorrection:"no",autocapitalization:"none"}}:{t:u,n:q.generateUUID(),k:"string",v:S,inputTraits:{autocorrection:"no",autocapitalization:"Sentences"}},x=j?.spend_controls?.spend_limit?.amount&&j?.spend_controls?.spend_available?.amount&&j?.spend_controls?.spend_duration?{t:m,n:q.generateUUID(),k:"string",v:`${eVA(j?.spend_controls?.spend_limit?.amount-j?.spend_controls?.spend_available.amount)} / ${eVA(j?.spend_controls?.spend_limit?.amount)} ${(j?.spend_controls?.spend_duration).toLowerCase().replace(/_/g," ")}`,inputTraits:{autocorrection:"no",autocapitalization:"Sentences"}}:{t:m,n:q.generateUUID(),k:"string",v:S,inputTraits:{autocorrection:"no",autocapitalization:"Sentences"}},R=[{t:"cardholder name",v:`${e} ${t}`,k:"string",n:"cardholder",a:{guarded:"yes"},inputTraits:{keyboard:"Default",autocapitalization:"Words"}},{t:"type",v:s,k:"cctype",n:"type",a:{guarded:"yes"}},{t:"number",v:o,k:"string",n:"ccnum",a:{guarded:"yes",clipboardFilter:"0123456789"},inputTraits:{keyboard:"NumberPad"}},{t:"verification number",v:n,k:"concealed",n:"cvv",a:{guarded:"yes",generate:"off"},inputTraits:{keyboard:"NumberPad"}},{t:"expiry date",v:l,k:"monthYear",n:"expiry",a:{guarded:"yes"}},{t:"valid from",v:"",k:"monthYear",n:"validFrom",a:{guarded:"yes"}},{t:"type",n:q.generateUUID(),k:"string",v:k,inputTraits:{autocorrection:"no",autocapitalization:"Sentences"}},G,x],P=[{t:F,n:q.generateUUID(),k:"address",v:{street:j.billing_address?.line2?`${j.billing_address.line1??""} ${j.billing_address?.line2}`:`${j.billing_address?.line1??""}`,city:j.billing_address?.city??"",state:j.billing_address?.state??"",zip:j.billing_address?.postal_code??"",country:j.billing_address?.country??""},inputTraits:{autocorrection:"no",autocapitalization:"Words"}}];return{id:j.id,category:jVA(j.limit_type),card:{templateUuid:ea,overview:{title:j.card_name??oA("Physical Card"),url:"",ainfo:o,ps:0,pbe:0,pgrng:!1},details:{sections:[{name:"",title:"",fields:R},{name:"",title:"",fields:P}]}}}}catch{console.warn("Unable to create card for brex card",j.id);return}}async function voe(A,j,e){let t=await tVA(A,`/cards/${j}/pan`,e);if(t.isErr())return console.error("Unable to make request:",t.error.type),OA(t.error);let r=await t.value.json();return Pj(r)}async function aVA(A,j,e){let t=await tVA(A,`/cards/${j}`,e);if(t.isErr())return console.error("Unable to make request:",t.error.type),OA(t.error);try{let r=await t.value.json();return Pj(r)}catch{return console.warn("Unable to parse JSON when getting the card"),OA({type:"RequestError",data:"Unable to parse card JSON"})}}async function nVA(A,j,e,t,r,a,n,o,i){let s=parseInt(`${r}`,10),l=await jA.createBrexVendorCardForUser({access_token:j,card_name:t,account_id:e,limit:s,duration:a.toUpperCase(),reason:n,lock_after_date:i,idempotency_key:o,environment:A});return l.type==="Error"?(console.error("Could not generate new vendor card."),OA({type:"RequestError",data:"Unable to parse card JSON"})):Pj({cardId:l.content.id})}async function oVA(A){let j=H.findAccountHandlerByUuid(OE(A));if(!j)return;let e;if(!j.isLocked&&!j.mustMigrateAuth)try{let n=await j.loadSystemVaultItems();e=$m("brex",n)}catch(n){Ze(n)&&rj(n)}if(!e||e.length===0)return;let t=await j.getIntegrationProviderAccessToken(e[0].accountId,"brex");if(!t||!t.context)return;if(!A.cacheInformation){console.error("Item was missing cacheInformation in handleEditBrexCard");return}let r=btoa(`Card:${A.cacheInformation.cardId}`),a=Lm(t.context.clientId);Te.openTab({url:`${a.dashboardUrl}/card/transactions/yours?card=${r}`})}async function B5(A,j){let e=H.findAccountHandlerByUuid(A);if(!e){console.error("Unable to get account handler");return}return await e.runSyncer([8]).catch(t=>Ji(e,t)),e.items?.find(t=>t.cacheInformation?.provider==="brex"&&t.cacheInformation?.cardId===j)}async function R0(){return(await Promise.all(H.getAccountHandlers.map(async A=>{let j;if(!A.isLocked&&!A.mustMigrateAuth)try{let r=await A.loadSystemVaultItems();j=$m("brex",r)}catch(r){Ze(r)&&rj(r)}if(!j||j.length===0)return;let e=await Nd(A.uuid,j[0].accountId,"brex");if(!e||!e.context)return;let t=await rVA(Lm(e.context.clientId),e.accessToken);if(!t.isErr())return{accountUuid:A.uuid,accountId:j[0].accountId,refreshToken:j[0].refreshToken,canCreateVendorCard:t.value.permissions?.create_vendor_cards===VO.Granted}}))).filter(A=>!!A)}async function K9A(A,j,e,t){try{let r=e.filter(a=>a.templateUuid==="800"&&a.state===xA.VaultItem.ItemState.Active&&a.overview.integration==="brex");await qoe(t,r,A,j)}catch(r){Ze(r)&&rj(r)}}function N9A(){let A=new xA.Vault({uuid:q.generateUUID(),name:"Brex",type:xA.Vault.TypeUserCreated,desc:""});return A.setCombinedAcl(xA.vaultACL.ALL_READ),A.localId=globalThis.crypto.getRandomValues(new Uint32Array(1))[0],A.isVirtualVault=!0,A}async function T5A(A){if(A.templateUuid===RdA)return;if(A.cacheInformation?.provider==="brex")return oVA(A);(await Goe(A,"edit-item")).isOk()||(await UK(A,"edit")).isOk()||RE(A,"edit")}async function MK(A,j){if(Bt())return RE(A);let e=()=>{browser.windows.create({url:chrome.runtime.getURL("/popup/index.html#detached"),type:"popup",...jHA()})};if(A.cacheInformation?.provider==="brex")return e();if((await UK(A,"view")).isErr())switch(j){case"notification":return RE(A);case"openInNewWindow":return e();default:te(j)}}async function Goe(A,j){if(Bt()){let e=zj.itemCache?.accountForVaultID(a6(A.vault));if(!e)return OA("Unable to find account with vault ID");let t=await st();return await Te.openTab({url:u0(`${j}/?a=${e.uuid}&v=${A.vault.uuid}&i=${A.uuid}`),openerTabId:t?.id}),Pj(void 0)}else return OA("cannot open item in OPI when not on iOS")}async function UK(A,j){let e=zj.itemCache?.accountForVaultID(a6(A.vault));if(!e)return OA(void 0);let t=re.desktopConnectionManager?.getDesktopApp();if(t&&re.getDesktopAppState().type==="Connected"){let r={accountUuid:e.uuid,vaultUuid:A.vault.uuid,itemUuid:A.uuid},a=!1;if(j==="edit"?a=await t.editItem(r):j==="view"&&(a=await t.viewItem(r)),a)return Pj(void 0)}return OA(void 0)}async function iVA(A){if(!WA().showNotifications||ve())return;let t=(await WiA()).incognito?oA("New item saved in 1Password."):oA('"{itemName}" was saved in "{vaultName}".',{itemName:A.title,vaultName:A.vault.name}),r={[ea]:oA("Credit card"),[O6]:oA("Identity"),[jc]:oA("API Key"),[Je]:oA("Login")},a=(A.templateUuid&&r[A.templateUuid])??oA("Item"),n="item-saved-"+globalThis.crypto.getRandomValues(new Uint32Array(1)).toString();chrome.notifications.create(n,{type:"basic",iconUrl:Qs,title:oA("{itemType} saved",{itemType:a}),message:t}),Um("click",n,()=>{MK(A,"notification")})}function bLA(A){if(!WA().showNotifications||ve())return;let{items:j}=A,e=`watchtower-compromised-item-${new Date().getTime()}`;chrome.notifications.create(e,{type:"basic",iconUrl:Qs,title:oA("Watchtower Alert"),message:oA("A website has been added to Watchtower in {count} of your accounts.",{count:new Set(j.map(t=>t.accountUUID)).size})}),Um("click",e,async()=>{let t=0;for(let r of new Set(j.map(a=>a.accountUUID))){let a=j.filter(n=>n.accountUUID===r);for(let n of new Set(a.map(o=>o.vaultUUID))){let o=a.filter(i=>i.vaultUUID===n);if(o.length===1){let i=o[0];await g5(n,r,"compromised-logins",i.itemUUID)}else await g5(n,r,"compromised-logins");if(++t===5)return}}})}var sVA="/assets/png/ramp-TWWGW3RM.png";async function Da(A,j=!0,e,t){if(Lt())throw new q.LoggableError({errorClass:p`SaveItemError`,message:p`Unable to save item. 1Password was locked.`});let r;if(e?r=H.findAccountHandlerByUuid(e):r=H.findAccountHandlerByVault(A.vault),!r)throw new q.LoggableError({errorClass:p`SaveItemError`,message:q.logsafe.assertLogSafe(`Unable to save item. Unable to find account for vault: <${A.vault.uuid}>`)});A.itemVersion&&A.itemVersion>0&&(A.updatedAt=new Date);let a=await r.saveItem(A,t);return j&&iVA(a),a}async function lVA(A,j){let e=H.findAccountHandlerByUuid(A);if(!e)throw new q.LoggableError({errorClass:p`SaveItemError`,message:q.logsafe.assertLogSafe(`Unable to find handler for account <${A}> to save new ramp item`)});let t=new Request(sVA),a=await(await fetch(t)).arrayBuffer(),n=await e.client?.uploadFile(a);return j.overview.icons={detail:n},Da(j)}async function jl(A){let j=async r=>(await SA.getDatabase().getAllTemplates()).find(n=>n.uuid===r);if(H.allAccountHandlersAreLocked){let r=await j(A);return r?$g(r):void 0}let e=await zj.loadItemCache();if(!e)throw new Error("Error loading item cache");let t=e.templateWithUUID(A);if(!t)throw new Error("Error loading item template");return t}async function mzA(){let A;for(let j of H.getAccountHandlers)if(!j.isLocked){for(let e of j.vaults)if(e.localId){let t=await j.getVaultItems(e.localId);A?A+=t.length:A=t.length}}return A}async function E6(A){if(!A||!A.vault||!zj.itemCache)throw new q.LoggableError({errorClass:p`LoadItemDetailsError`,message:p`Unable to load item.`});let j=zj.itemCache.accountForVaultID(a6(A.vault));if(!j)throw new q.LoggableError({errorClass:p`LoadItemDetailsError`,message:p`Unable to find account for vault`});let e=H.getAccountHandlers.find(D0(j.uuid));if(!e)throw new q.LoggableError({errorClass:p`LoadItemDetailsError`,message:p`Unable to find handler for account`});return e.getItem(wm(A))}async function Br(A,j){if(!A)return null;let t=(await zj.loadItemCache())?.itemWithUUID(A,j);return t?E6(t):null}async function Sc(A){if(typeof A!="object"||A.type!=="databaseId"&&A.type!=="cachedItem"&&A.type!=="managedCredential")return OA(new Error("Id must be shaped like a LocalId"));let e=(await zj.loadItemCache())?.itemWithLocalId(A);if(!e)return OA(new Error("No item found with matching ID"));let t=await E6(e);return t?Pj(t):OA(new Error("No item details found with matching ID"))}async function C5A(A,j){let e=await Br(A);if(!e)return;let t=e.faveIndex!==0,r=typeof j=="boolean"?j:!t;return e.faveIndex=r?1:0,Da(e,!1)}function Al(A,j){let e=H.findAccountHandlerByVault(A.vault);if(!e){console.error(`Failed to record item usage for vault <${A.vault.uuid}> with missing account handler`);return}e.markItemUsed(A,j)}function IK(A,j,e){let t=H.findAccountHandlerByUuid(e);if(!t){console.error(`Failed to record item action history for account <${e}> with missing account handler`);return}t.recordUserActionHistoryEvent(A,j)}async function _5A(A){let j=await Br(A);if(!j)throw new Error(`Unable to load item: <${A}>`);if(si(j))throw new Error(`Can not archive a managed credential item: <${A}>`);let e=H.findAccountHandlerByVault(j.vault);if(!e)throw new Error(`Unable to find account for vault: <${j.vault.uuid}>`);return j.state=kA.ItemState.Archived,e.saveItem(j)}async function KK(A){let j=await Br(A);if(!j)throw new Error(`Unable to load item: <${A}>`);let e=H.findAccountHandlerByVault(j.vault);if(!e)throw new Error(`Unable to find account for vault: <${j.vault.uuid}>`);return j.state=kA.ItemState.Deleted,e.saveItem(j)}function cVA(A,j,e){let t=H.findAccountHandlerByUuid(A);if(!t)throw new Error(`Attempted to create item for non-existent account: <${A}>`);let r=t.findVaultWithUUIDAndCreatePermission(j);if(!r)throw new Error(`Attempted to create item for non-existent vault <${j}> in account <${A}>`);let a=new kA(r);return a.templateUuid=e,a.vault=r,a}var h5=new Set;async function dVA(A,j){let e=await boe(A);return j&&j(e),e}async function Foe(A){let j=await jA.fillSessionStatus(A.id,A.unparsedUrl);if(j?.state.type!=="autofill"||!j.item)return;let{itemUuid:e,vaultUuid:t}=j.item,r=await Br(e,t),a=A.nakedDomain();if(!(!r||!r.urlToNakedDomains||!Object.values(r.urlToNakedDomains).includes(a)))return await jA.clearFillSession(A.id),{username:r.username?.value??"",password:r.getPassword()??""}}async function boe(A){let j=dNA(A),e=await Foe(j);return e?(h5.delete(j.id),{authCredentials:e}):(h5.add(j.id),{})}async function g5A(A,j){return h5.has(A.id)?(await jA.startFillSession(A,{type:"item",data:j}),await chrome.tabs.reload(A.id),!0):!1}function kVA(A){h5.delete(A)}var uVA=async(A,j)=>{if(!vi())return;let e=new URL(j);if(!yx(e)||await browser.permissions.contains({origins:[`${e.origin}/*`]}))return;let r=await L6(A);if(!r)return;let a=await zj.loadItemCache();if(!a)return;if(a.itemsForTab(r,ie.loginsAndPasswords).length===0){$oe(r.id);return}yoe(r.id)},yoe=A=>{let j=chrome.permissions.addHostAccessRequest;j&&typeof j=="function"&&j({tabId:A})},$oe=A=>{let j=chrome.permissions.removeHostAccessRequest;j&&typeof j=="function"&&j({tabId:A})};var yVA=J(EVA()),$VA=J(V6A());var pVA=async(A,j)=>{let e=await Ba();if(!e){let n=H.getAccountHandlers,o=await Eh(n,ZA,SA);console.warn(`DeviceTrust: access denied: ${o.loggableError().str} - aborting`);return}let t=e.checkPageRestrictions(j);if(!t)return;let r=await Ioe(t);if(!(!r||(w6("deviceTrustNonBlocking")?[]:await Dm(A)).length>0&&r.type==="deviceTrustNonBlocking")){try{`${r.type}`,await YP(A,r,5)}catch{xn(p`failed to show device trust notification`,"show-notification-fail")}if(r.type!=="deviceTrustNoKolide"&&r.type!=="deviceTrustNeedsUnlock"){let n=await e.hintDevice("prompt_displayed").catch(o=>el(o,p`hintDevice failed unexpectedly`));if(n.type==="failure"){let o=Hc(n,p`dt4a notification was shown but hint failed`);console.error(`DeviceTrust: ${o.message.str}: ${o.code.str}`)}}}},Ioe=async A=>{if(!await Ba()){console.warn("DeviceTrust: access denied - aborting");return}let e;switch(A.status){case"kolide_not_authenticated":e="deviceTrustNeedsUnlock";break;case"kolide_not_enrolled":e="deviceTrustNoKolide";break;case"blocked":e="deviceTrustBlocking";break;case"will_block":case"notify":e="deviceTrustNonBlocking";break;case"kolide_tenant_mismatch":console.warn("DeviceTrust: local kolide agent is associated to a different tenant"),e=void 0;break;case"kolide_not_registered":console.warn("DeviceTrust: local kolide agent is not registered with the server"),e=void 0;break;default:cl(A.status,p`restriction.status`,p`DeviceTrust`)}return e?{type:e,params:{blockedPage:A.appName,accountName:A.accountName,accountUuid:A.accountUuid}}:void 0};function q5(A,j){return`${"#".repeat(j)} ${A}`}function x5(A){return`**${A}**`}function YiA(A,j=!1){return A.map((e,t)=>j?`${t+1}. ${e}`:`- ${e}`).join(`
`)}function v5(A,j){return`<details>
<summary>${A}</summary>

${j}

</details>`}function ZiA(A){return`<!-- ${A} -->`}function mVA(A,j){let e=`| ${A.join(" | ")} |`,t=`| ${A.map(()=>"---").join(" | ")} |`,r=j.map(a=>`| ${a.join(" | ")} |`).join(`
`);return[e,t,r].join(`
`)}function T0(A){return`\`${A}\``}var G5=class A{_id;tabId;unparsedUrl;_parentFrameId;get id(){return(async()=>{if(ve()){let j=await this.getAllFrames(),e=j.find(r=>r.frameId===this._id)?.frameId;if(typeof e=="number")return e;if(this._id===0){let r=j.find(a=>a.parentFrameId===-1)?.frameId;if(typeof r=="number")return r}`${this._id}`;let t=j.find(r=>r.url===this.unparsedUrl)?.frameId;if(typeof t=="number")return t;throw new Error("Frame no longer exists")}return this._id})()}get parentFrameId(){return(async()=>{if(typeof this._parentFrameId=="number")return this._parentFrameId;let{parentFrameId:j}=await this.getFrameDetails();return this._parentFrameId=j,this._parentFrameId})()}constructor(j,e,t){this._id=j,this.tabId=t,this.unparsedUrl=e}static createWithRuntimeMessageSender({frameId:j,tab:e,url:t}){if(!(!e?.id||typeof e.id!="number")&&typeof j=="number")return new A(j,t??"",e.id)}async parent(){let j=await this.parentFrameId;if(j!==-1)return j}URL(){return Nl(this.unparsedUrl)}async getFrameDetails(){let j=await this.id;return new Promise(e=>{chrome.webNavigation.getFrame({tabId:this.tabId,frameId:j},t=>{if(t?.url!==this.unparsedUrl&&(console.warn(`URL for frame ${j} tab ${this.tabId}`),this.unparsedUrl=t?.url),t)return e(t);throw new Error("Frame no longer exists")})})}async getAllFrames(){return new Promise((j,e)=>{chrome.webNavigation.getAllFrames({tabId:this.tabId},t=>{t?j(t):e("Frames no longer exists")})})}};async function Ln(A){return A.onEvent?(A.timeStamp=Date.now(),gVA([A.onEvent],{[A.onEvent]:()=>{BVA(A)}},{once:typeof A.repeat=="boolean"?!A.repeat:!0,tab:A.tabId})):BVA(A)}function U8(A){gVA(Object.keys(A),A)}async function Poe(A,j,e){if(Xm||await _c,A.length===2){let t=cNA(e);if(!t)throw new Error(`Unable to respond to request <${j.name}> due to lack of TabInfo`);let r=G5.createWithRuntimeMessageSender(e);if(!r)throw new Error(`Unable to respond to request <${j.name}> due to lack of FrameInfo`);return A(j,{tab:t,frame:r})}else return A(j)}function Ooe(A){let j=browser.runtime.getURL("");if(j.endsWith("/")&&(j=j.slice(0,-1)),ve())return!0;if(vt()){if(!A.url)return!1;let e=new URL(A.url),t=e.protocol+"//"+e.host;return t.endsWith("/")&&(t=t.slice(0,-1)),t===j}else return!!A.origin&&A.origin===j}function Roe(A){return A?Object.keys(AsA).indexOf(A)!==-1:!1}function gVA(A,j,e={}){if(!chrome.runtime.onMessage)return;function t(r){return r?A.indexOf(r)!==-1:!1}chrome.runtime.onMessage.addListener(function r(a,n,o){let i=new rt("ChromeListener addition"),s=a.name;if(!t(s)||typeof e.tab=="number"&&n.tab?.id!==e.tab)return!1;if(Roe(s)&&!Ooe(n))return console.error(`Exception while handling request <${s}>`),i.error("Invalid origin for request"),o({type:"Error",message:"Invalid origin for request"}),!1;e.once&&chrome.runtime.onMessage.removeListener(r);try{let l=Poe(j[s],a,n);return l instanceof Promise?(l.then(c=>void o({type:"Success",data:c})).catch(c=>{console.error(`Exception while handling request <${s}>`),i.error(C6(c)),o({type:"Error",message:C6(c)})}),!0):(o({type:"Success",data:l}),!1)}catch(l){console.error(`Exception while handling request <${s}>`);let c=l instanceof Error?l.message:"Unknown error occurred";return i.error(c),o({type:"Error",message:c}),!1}})}async function BVA(A){return new Promise(j=>{chrome.tabs.sendMessage(A.tabId,A.message,e=>{j(e)})})}var C0=J(Xn()),V8=J(tA());var hVA="uso-dismissed-domains",qVA=V8.record(V8.string,V8.string),f5=()=>{try{let A=je.getItem(hVA);if(!A)return{};let j=qVA.decode(JSON.parse(A));if((0,C0.isRight)(j)){let e={};for(let[t,r]of Object.entries(j.right)){let a=Number.parseInt(t,10);e[a]=r}return e}return(0,C0.isLeft)(j)?(console.error("Invalid dismissed domains data in storage:",j.left),{}):{}}catch(A){return console.error("Failed to parse dismissed domains from session storage:",A),{}}},jsA=A=>{try{let j={};for(let[t,r]of Object.entries(A))j[t]=r;let e=qVA.decode(j);(0,C0.isRight)(e)?je.setItem(hVA,JSON.stringify(e.right)):(0,C0.isLeft)(e)&&console.error("Failed to validate dismissed domains data before storage:",e.left)}catch(j){console.error("Failed to save dismissed domains to session storage:",j)}},xVA=(A,j)=>{try{let e=new URL(j).hostname,t=f5();t[A]=e,jsA(t)}catch(e){console.error("Failed to mark tab as dismissed, invalid URL:",e)}},vVA=A=>{let j=f5();delete j[A],jsA(j)},GVA=(A,j)=>f5()[A]===j,fVA=(A,j)=>{try{let e=new URL(j).hostname,t=f5();t[A]&&t[A]!==e&&(delete t[A],jsA(t))}catch(e){console.error("Failed to clear dismissal on domain change, invalid URL:",e)}};if(chrome.tabs.onActivated.addListener(Hoe),chrome.tabs.onUpdated.addListener(_VA),chrome.tabs.onRemoved.addListener(Koe),chrome.tabs.onCreated.addListener(Moe),chrome.webNavigation.onDOMContentLoaded.addListener(Loe),chrome.webNavigation.onBeforeNavigate.addListener(Noe),!ve()){let A=vt()?"blocking":"asyncBlocking";browser.webRequest.onAuthRequired.addListener(dVA,{urls:["<all_urls>"]},[A])}var esA=new Map;async function st(){let A=new Promise(j=>{browser.tabs.query({active:!0,currentWindow:!0}).then(e=>{if(e===void 0||e.length===0){j(void 0);return}let t=e[0],r=It(t);j(r)})});return Bt()?j6.withTimeout(A,500,"tab-manager:activeTab"):A}async function u7(){return new Promise(A=>{chrome.tabs.query({active:!0},j=>{A(j.map(It).filter(e=>e!==void 0))})})}async function L6(A){return new Promise(j=>{chrome.tabs.get(A,e=>{j(It(e))})})}async function WiA(){return new Promise((A,j)=>{chrome.windows.getCurrent({},e=>{if(chrome.runtime.lastError||!e)return j();A(e)})})}async function tsA(){return new Promise((A,j)=>{chrome.windows.getAll({},e=>{if(chrome.runtime.lastError||!e)return j();A(!!e.find(t=>t.focused))})})}async function wVA(){return new Promise(A=>{chrome.tabs.captureVisibleTab({quality:100,format:"jpeg"},j=>{A(j)})})}async function IVA(A){let{imageData:j,width:e,height:t}=await AHA(A);if("BarcodeDetector"in globalThis){let n=await new BarcodeDetector().detect(j);for(let o of n)if(vP(o.rawValue))return o.rawValue}let r=(0,yVA.default)(j.data,e,t);if(r&&r.data&&vP(r.data))return r.data}async function o8(){try{let A=await wVA(),j=await IVA(A);if(j)return Pj(j);let e=await st(),t=e?.nakedDomain();if(e&&t==="epicgames.com"){let a=await MVA(e,"var _a; (_a = document.querySelector('.manual-key-entry')) === null || _a === void 0 ? void 0 : _a.innerText;",!0);for(let n of a)if(typeof n=="string"&&n.length===52)return Pj(n)}return OA(0)}catch{return OA(1)}}async function PVA(A,j){ka()?await browser.scripting.insertCSS({origin:"USER",target:{tabId:A,frameIds:[j]},files:["/inline/injected/styles/injected.css"]}):await browser.tabs.insertCSS(A,{file:"/inline/injected/styles/injected.css",cssOrigin:"user",frameId:j})}async function OVA(A){let j=A instanceof String?A:JSON.stringify(A,null,"	"),e;if(ka())e=`data:application/json;charset=UTF-8,${encodeURIComponent(j)}`;else{let t=new Blob([j],{type:"application/json"});e=URL.createObjectURL(t)}await new Promise(t=>chrome.tabs.create({url:e},t)),ve()||ka()||URL.revokeObjectURL(e)}async function hv(A,j){return A?browser.tabs.update(A.id,{url:j}):browser.tabs.create({url:j})}async function _0(A,j){let e=j instanceof String?j:JSON.stringify(j,null,"	");await Te.downloadFile(A,new Blob([e],{type:"application/json"}))}function EnA(A){let j=`https://support.1password.com/getting-started-browser${A?`#${A}`:""}`;chrome.tabs.create({url:$c(j)})}async function rsA(A){let j=await st();if(!j){console.warn("Cannot collect page details: Failed to resolve information on active tab");return}let e=await Cr(j,!A.includeValues);switch(A.action){case"open":await OVA(e);break;case"download":await _0("collected_page_structure.json",e);break}}function pnA(){let e=$c("https://releases.1password.com/b5x/stable/#whats-new");chrome.tabs.create({url:e})}function mnA(){let A=$c("https://op8.agilebits.com/extension-first-survey");chrome.tabs.create({url:A})}function s8(){chrome.tabs.create({url:$c("https://support.1password.com")})}function asA(){chrome.tabs.create({url:"https://support.1password.com/contact/?s=Get+help+with+1Password&b=x",active:!0})}var nsA=A=>h0(A.data);function h0(A){let j=(e,t)=>{let r=e;if(t){let a=Object.keys(t);r+=`?${a.filter(n=>t[n]!==void 0).map(n=>`${n}=${t[n]}`).join("&")}`}return r};A?chrome.tabs.create({url:j(chrome.runtime.getURL("/app/app.html#/page/settings"),{categoryId:A.categoryId,highlightRowIds:A.highlightRowIds})}):chrome.tabs.create({url:chrome.runtime.getURL("/app/app.html#/page/settings")})}async function X8(A){let j=chrome.runtime.getManifest().version,e=await Te.getBrowserInfo(),t=e.name,r=e.version,a=e.osName,n=e.osVersion,o=H.getAccountHandlers.find(O=>O.uuid===A),i=lt.initState,s;i==="initialized"?s=await lt.invoke("HealthCheck",void 0).catch(O=>{}):s=void 0;let l;try{l=re.getDesktopAppState()}catch(O){console.warn("Feedback reporter: Failed to get DesktopAppState from dcmh:",O)}let c=GE.map(O=>({featureName:O,isEnabled:ZA.anyAccountHasFlag(O)})),k=await st(),u="";if(k){let O=await Cr(k);O&&(u=O.unparsedUrl||"")}let m=[["B5X Version",j],["Browser",`${t} (${r})`],["OS",`${a} (${n})`]],F=encodeURIComponent(m.map(O=>O.join(": ")).join(", ")),G=await(await Ba())?.getDeviceHealth({}),x="";G&&(x=G.type);let R=["product:b5x","project::xam-app-launcher","status::Needs Triage"];/^chrome-extension:\/\/.*#\/page\/apps$/.test(u)&&R.push("project::launchpad-backend");let D=encodeURIComponent(R.join(",")),y=Toe({enabledFlags:c,currentUrl:u,deviceTrustOverallStatus:x,activeAccountHandler:o,desktopAppStateValue:l,xamBackendHealth:s}),h=`http://internal1p.com/bug-reporting-tool?appDetails=${F}&details=${y}&labels=${D}&feature=XAM App Launcher`;chrome.tabs.create({url:h})}function Toe(A){let j=[...A.enabledFlags].sort((n,o)=>n.featureName.localeCompare(o.featureName)).map(n=>[n.featureName,n.isEnabled?"true":"false"]),e=A.activeAccountHandler,t=A.xamBackendHealth,r=t?[`Elapsed Time: ${t.runningTimeInSeconds}`,`Backend Unlocked Accounts: ${t.unlockedAccounts.map(n=>n.accountUuid).join(",")}`]:[x5("No backend module found")],a=[q5("Issue",2),ZiA("use_this_space_to_describe_the_issue"),q5("Steps to reproduce",2),ZiA("use_this_space_to_describe_the_steps_to_reproduce_the_issue"),q5("Extension Details",2),v5("Extension Status",YiA([`Lock State: ${Lt()?T0("Locked"):T0("Unlocked")}`,`Current URL: ${T0(A.currentUrl)}`,`Device Trust Status: ${T0(A.deviceTrustOverallStatus)}`,`Desktop Status: ${A.desktopAppStateValue?T0(A.desktopAppStateValue.type):"unknown"}`])),v5("LauncherStatus",YiA([e?`Active Account: ${e.uuid} ${e.isLocked?x5("(Locked)"):""}`:`${x5("No active Account in launcher")}`,...r])),v5("Enabled Flags",mVA(["Feature","Enabled"],j))];return encodeURIComponent(a.join(`

`))}function osA(){let A=chrome.runtime.getURL("/app/app.html#/page/benchmark");chrome.tabs.create({url:A})}async function Zg(A){await Te.openTab({url:browser.runtime.getURL(`/app/app.html#/page/error?code=${A}`),ignoreIfDuplicate:!0})}function isA(){browser.tabs.create({url:browser.runtime.getURL("/app/app.html#/page/migration"),active:!1})}async function ssA(){let A=await browser.tabs.query({url:browser.runtime.getURL("/app/app.html")});if(A){let j=A.find(e=>e.url?.includes("#/page/migration"));j?.id&&browser.tabs.remove(j.id)}}function lsA(A){let j=chrome.runtime.getURL("/app/app.html")+"#/page/ready";chrome.tabs.update(A.id,{active:!0,url:j})}async function Zm(){let{language:A}=WA(),j=chrome.runtime.getURL("/app/app.html");if(!await Q8(!0)&&!(vj.getItem("seenWelcomePage")&&H.hasAccountHandlers))return new Promise(e=>{chrome.tabs.query({url:j},async t=>{let r=t.find(a=>a.url?.includes("#/page/welcome"));if(vj.setItem("seenWelcomePage","true"),!r||r.id===void 0){await Te.openTab({url:`${j}#/page/welcome?${new URLSearchParams({language:A}).toString()}`});return}chrome.tabs.update(r.id,{active:!0},a=>{!a||a.id===void 0||chrome.tabs.reload(a.id,{},()=>{e()})})})})}async function csA(A){let{language:j}=WA(),e=chrome.runtime.getURL("/app/app.html");return new Promise(t=>{CE().then(r=>{let a=BsA(r),n=A.data.accountType??"F",o=A.data.owner??!0,i=A.data.accountUuid?A.data.accountUuid:"none",s=`${e}?type=${n}&owner=${o}&uuid=${i}#/page/welcome?${new URLSearchParams({language:j}).toString()}`,l=A?.data?.extensionFirstForSsoEnabled;if(a&&a.id){let c=a.id;a.url?.includes("sso-creating")&&l?(chrome.tabs.create({url:s,active:!0}),setTimeout(async()=>chrome.tabs.remove(c),2e3)):chrome.tabs.update(c,{url:s})}else chrome.tabs.create({url:s});vj.setItem("seenWelcomePage","true"),t()}).catch(r=>{console.error("Failed to get tabs:",r),chrome.tabs.create({url:`${e}#/page/welcome?${new URLSearchParams({language:j}).toString()}`}),vj.setItem("seenWelcomePage","true"),t()})})}async function dsA(A){let j=A.data;await Te.openTab({url:j})}function Coe(){chrome.tabs.create({url:$c("https://app.privacy.com/account")})}function _oe(){chrome.tabs.create({url:$c("http://1password.com/cards")})}async function ksA(){let A=await st();A?oo.remove(A):console.warn("Attempted to remove URL from exclusion list but was unable to create TabInfo")}async function usA(A){let j=await Cr(A),e=await jA.analyzePage(j,!1,await MP()),t;for(let r of e.resolvedPage.frames){let a=r.fields.find(n=>n.designation.autofillType==="username"||n.designation.autofillType==="current-password"||n.designation.autofillType==="one-time-code");if(a){t=a.opid;break}}t||`${A.id}`,A.id&&Ln({tabId:A.id,message:{name:"show-inline",data:{opid:t}}})}function JiA(A){ME({url:`${A.signinAddress}/signin/?a=${A.userUUID}&auth-only=1`,ignoreIfDuplicate:{activateExisting:!0,customDuplicateCheck:j=>j.url?.startsWith(`${A.signinAddress}/signin/?a=${A.userUUID}`)??!1}}).catch(j=>{console.info("Did not open a new B5 signin tab as one or more already exist (for MFA).");let e=j?.firstDuplicateTabId;e!==void 0&&la(e,{type:"signInTo1Password"})})}async function ME(A,j){let e=new URL(A.url);if(!Bm(e.hostname))throw new Error("Requested to open b5 tab with invalid hostname");A.url=$c(A.url);let t=await Te.openTab(A);return t.id&&j&&Ln({tabId:t.id,onEvent:"b5Ready",repeat:!1,message:j}),t}async function RVA(A,j){await la(A,{type:"addAccount",params:{uuid:j}})}async function F5(A,j){let e=new URL(chrome.runtime.getURL("/inline/notification/notification.html"));await RVA(A,j);try{return await j6.withTimeout(new Promise(r=>{U8({"add-account-response":a=>{a.data.uuid===j&&r(a.data.response)}})}),3e5,"Timed out waiting for add account response")}finally{w6("addAccount")?await Rm("addAccount",A):Ln({tabId:A,message:{name:"close-add-account-prompt",data:e.toString()}})}}async function N8(A){let j;A?j=await CE():j=await u7(),j.forEach(e=>{e.id!==void 0&&DVA(e.id,A)})}function DVA(A,j){lj("lock-state-changed",{locked:j},{tabId:A})}async function EsA(A){(await CE()).forEach(e=>{e.id!==void 0&&lj("frozen-accounts-changed",{frozenAccountsInfo:A},{tabId:e.id})})}async function xiA(){let A=await st();A?.id!==void 0&&Ln({tabId:A.id,message:{name:"blur-active-field",data:void 0}})}async function XnA(){let A=await O0();(await u7()).forEach(e=>{e.id!==void 0&&TVA(e.id,A)})}function TVA(A,j){Ln({tabId:A,message:{name:"can-request-unlock-changed",data:j}})}async function l7(){(await u7()).forEach(j=>{j.id!==void 0&&CVA(j.id)})}function CVA(A){Ln({tabId:A,message:{name:"refresh-items",data:void 0}})}async function siA(A){(await CE()).forEach(e=>{e.id!==void 0&&Ln({tabId:e.id,message:{name:"notify-settings-changed",data:A}})})}async function CE(){return new Promise(A=>{chrome.tabs&&chrome.tabs.query({},j=>{A(j)})})}async function J8(A,j){let e=wc.createUniqueId();return Ln({tabId:A,message:{name:"get-frame-origin",data:{uuid:e,frameIdentifier:j}}}),new Promise(t=>{U8({"provide-frame-origin":(r,a)=>{r.data.uuid===e&&t(a.frame)}})})}async function Bv(A,j){let e=A.id,t=await lj("request-fill-authorization",j,{tabId:e});if(!t.ok)throw new Error("request-fill-authorization failed");return t.data}var psA=A=>[wj.CcNumber,wj.CcCsc,wj.CcName,wj.CcGivenName,wj.CcAdditionalName,wj.CcFamilyName,wj.CcExp,wj.CcExpMonth,wj.CcExpYear].includes(A),msA=A=>[wj.Name,wj.GivenName,wj.AdditionalName,wj.FamilyName,wj.StreetAddress,wj.AddressLine1,wj.AddressLine2,wj.AddressLevel1,wj.AddressLevel2,wj.Country,wj.PostalCode].includes(A);async function Soe(A){A.frames.forEach(a=>a.uuid="");let j=JSON.stringify(A),e=new TextEncoder().encode(j),t=await crypto.subtle.digest("SHA-1",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}async function D8(A,j){if(!A){console.warn("Cannot collect page details to compute suggestions: Failed to resolve information on active tab");return}let e=performance.now(),t=await Cr(A),r=performance.now(),a=await Soe((0,$VA.default)(t));if(a===j)return;let n=performance.now();return console.info(`%cLoaded page details in ${r-e} ms.`,"color:green"),console.info(`%cAnalyzed the page in ${n-r} ms.`,"color:green"),{suggestions:(await jA.analyzePage(t,!1,await MP())).suggestions,collectedPageDetailsHash:a}}async function Hoe(A){await vj.init();let j=await L6(A.tabId);if(vn({updateIconOnly:!0}),HVA(j),j){let e=Lt(),t=await O0();TVA(j.id,t),DVA(j.id,e),CVA(j.id)}}function Moe(A){A.url===""&&ve()?chrome.tabs.onUpdated.addListener(function j(e,t,r){r.id===A.id&&r.url&&(qoA(r),chrome.tabs.onUpdated.removeListener(j))}):qoA(A)}function Koe(A){esA.delete(A),NVA(A),$5A(A),Ev(A),jA.clearFillSession(A),vVA(A)}async function Noe(A){if(A.parentFrameId===-1){await vj.init();try{e2A(A)}catch{console.error("Unable to update the tab for launchpad")}try{iHA(A)}catch{console.error("Unable to reload extension. Try reloading from the extensions/addons page instead.")}SVA(A.tabId,A.url)}}async function _VA(A,j){if(await vj.init(),ZA.hasPreRegistrationFlag("b5x-notification-manager")&&j.status==="loading"&&vNA(A),typeof j.url=="string"){if(esA.get(A)===j.url)return;esA.set(A,j.url),globalThis.dispatchEvent(new CustomEvent(cB,{detail:{tabId:A,changeInfo:j}})),vn({updateIconOnly:!0}),SVA(A,j.url);try{uVA(A,j.url)}catch{console.error("Unable to handle permissions on page change")}}}async function SVA(A,j){try{let e=await L6(A);HVA(e)}catch(e){console.error("Unable to update tab context menus:",e)}try{w5A(A,j)}catch(e){console.error("Unable to handle Fastmail onPageChange:",e)}try{b5(A,j,!1)}catch(e){console.error("Unable to clear save session:",e)}}async function Loe(A){try{let j=new URL(A.url);if(!Kg.isHttpOrHttps(j)||await zoe(j)||(A.parentFrameId===-1&&await pVA(A.tabId,j.href),kVA(A.tabId),!await SE()))return;ve()||await PVA(A.tabId,A.frameId)}catch{console.warn("Unable to inject for a URL (redacted)")}}async function W8(A){let j=new URL(A),e=j.searchParams.get("state");if(!e){let o=j.hash?.substring(1);e=new URLSearchParams(o).get("state")}if(!e||e.length===0){console.error("No state parameter present in the redirect URL");return}let t=jA.nakedDomainForUrl(A);t.includes("microsoft")&&(t="microsoftonline.com");let r=await browser.tabs.query({url:`*://*.${t}/*`,active:!0,lastFocusedWindow:!0});if(await FVA(e,r))return;let n=await browser.tabs.query({url:"*://*/sso/oidc/redirect/*",active:!0,lastFocusedWindow:!0});await FVA(e,n)}var FVA=async(A,j)=>{let e=j.filter(t=>t.id!==0&&(t.url?.includes(A)||t.pendingUrl?.includes(A)));return e.length!==1?!1:e[0].id?(await browser.tabs.remove(e[0].id),!0):(console.error("found tab to be closed but without an ID"),!1)},bVA=["audio","editable","frame","image","link","page","selection","video",...vt()?["tab","password"]:[]];async function jiA(){let A=await st();zd.createContextMenu({id:"tabSeparator",type:"separator",contexts:bVA}),zd.createContextMenu({id:"tabToggleExclusion",type:"checkbox",title:oA("Hide on this page"),contexts:bVA,checked:A&&oo.has(A),enabled:!!A})}async function HVA(A){return zd.updateContextMenu("tabToggleExclusion",{checked:A&&oo.has(A),enabled:!!A})}function coA(A){return A==="chrome://newtab/"||A==="chrome://new-tab-page/"||A==="edge://newtab/"||A==="about:blank"||A==="about:newtab"}async function zoe(A){return(await Te.getBrowserInfo()).name===q.browserInfo.Browser.Edge?A.origin==="https://devtools.azureedge.net":!1}async function MVA(A,j,e){return new Promise(t=>{ka()?chrome.scripting.executeScript({target:{tabId:A.id,allFrames:e},files:[j]},r=>{t(r)}):chrome.tabs.executeScript(A.id,{code:j,allFrames:e},r=>{t(r)})})}function BsA(A){let j=/https:\/\/\S+[.]1password.(com|eu|ca)((\/join\/|\/sign-up)|(\/provision\/extension-prompt))\S*|https:\/\/\S+[.]b5local.com:(4000|3000)((\/join\/|\/sign-up)|(\/provision\/extension-prompt))\S*|https:\/\/\S+[.]b5test.(com|eu|ca)((\/join\/|\/sign-up)|(\/provision\/extension-prompt))\S*|https:\/\/\S+[.]b5dev.(com|eu|ca)(\/join\/|\/sign-up)\S*|https:\/\/\S+[.]b5rev.(com|eu|ca)((\/join\/|\/sign-up)|(\/provision\/extension-prompt))\S*/,e=A.filter(t=>t.url?.match(j)?.length);if(e.length)return e[0]}async function Q8(A){let j=BsA(await CE());return j&&j.id?(A&&(await browser.tabs.update(j.id,{active:!0}),await browser.tabs.reload(j.id)),!0):!1}async function viA(A,j){let e=re.desktopConnectionManager?.getDesktopApp(),t=zj.itemCache?.accountForVaultID(a6(A))?.uuid,r=await SA.getDatabase().findAccountByUUID(t||"");if(e&&re.getDesktopAppState().type==="Connected"){let n;try{let[,i]=H.defaultSavingLocation();n=i.uuid}catch{}if(r){let i=ZA.accountHasFlag(r.uuid,"extension-first-for-sso");if((await e.shouldPromptToAddAccount({accountUuid:r.uuid})).shouldPrompt&&i)return await e.promptDesktopAppToSignIn({accountUuid:r.uuid,components:{isSsoAccount:!0,emailAddress:r.email,secretKey:r.secretKey,server:r.signinAddress}})}if(await e.createItem({category:j,defaultVaultUuid:n}))return}if(!r)throw new Error("Unable to find account by vault localId");let a=`/vaults/${A.uuid}/${j}/?action=add`;m7(r.uuid,a)}async function BN(A){return m7(A,"/profile")}async function liA(A){return m7(A,"/app")}function gsA(A){LM(A.data?.importPath,A.data?.accountUuid)}function LM(A,j){let[e]=H.defaultSavingLocation(),t=e.uuid,r=j||t;A?m7(r,A):m7(r,"/import")}async function ciA(A){return m7(A,"/integrations/directory")}async function g5(A,j,e,t){let r=`/vaults/${A}/${e}/`;t&&(r+=t),await m7(j,r)}function KVA(A,j){let e=H.findAccountHandlerByUuid(A);if(!e){console.error("Unable to find account to open home page");return}let t=new URLSearchParams;t.set("a",e.serveraccount.userUUID),j&&t.set("auth-only","1");let r=t.toString();if(e.isLocked){chrome.tabs.create({url:`${e.serveraccount.signinAddress}/signin/?${r}`}),Ko();return}m7(A,"/home")}async function hsA(A){let j=re.getDesktopAppState();if(j.type==="Connected")if(j.accountUuids.includes(A.data.accountUuid))$LA({accountUuid:A.data.accountUuid});else{let e=await SA.getDatabase().findAccountByUUID(A.data.accountUuid);if(!e)throw new Error("Unable to open home page. Account with the given UUID could not be found.");wv({components:{emailAddress:e.email,secretKey:e.secretKey,server:e.signinAddress,isSsoAccount:NA.CanOnlyPerformOidcAuth(e.authMethods)},accountUuid:A.data.accountUuid})}else KVA(A.data.accountUuid,A.data.authOnly)}async function RE(A,j){let e=zj.itemCache?.accountForVaultID(a6(A.vault));if(!e)throw new Error("Unable to find account by in openItemInB5");let t=`/vaults/${A.vault.uuid}/allitems/${A.uuid}${j?`/?action=${j}`:""}`;return m7(e.uuid,t)}function BnA(A){m7(A,"/profile/email-subscriptions")}async function GiA(A){let j="/sso/migration",e=H.getMustMigrateAuthAccount(A);if(!e){let t="Unable to find account handler in expired auth migration state";throw new Error(t+(A?` with UUID <${A}>`:""))}return m7(e.uuid,j)}async function m7(A,j){let e=H.findAccountHandlerByUuid(A);if(!e)throw new Error(`Unable to find account handler with UUID <${A}>`);let t=e.serveraccount.signinAddress+j,r=new URL(t),a=new globalThis.URLSearchParams(r.search);a.set("session-init","1");let n=a.toString();n!==""&&(r.search="?"+n);let o=await jn(),i=()=>{console.error("Unable to automatically sign into b5 tab"),r.searchParams.delete("session-init"),ME({url:r.toString()})};if(e.client)try{ME({url:r.toString()},{name:"auto-sign-in-to-b5",data:await e.client.getDelegateSessionInit(o)})}catch{i()}else i();Ko()}async function ZP(A){let j=await st();return(await Te.openTab({url:A,openerTabId:j?.id})).id}function poA(A){RE(A,"share")}async function i8(A,j){let e;j?.url?e=j.url:e=A.overview.url,e&&await Te.openTab({url:$c(e)})}function Uoe(A){return[SO,HO].includes(A)}function xsA(A){return A===MO}var qsA={},nYt=new rt("[BROWSER]"),Te=class{static async downloadFile(j,e){let t=await iq(e);return browser.downloads.download({url:t,filename:j}).then(r=>{let a=n=>{n.id===r&&n.filename?.current&&browser.downloads.onChanged.removeListener(a)};browser.downloads.onChanged.addListener(a)})}static async getShortcuts(){return browser.commands.getAll().then(j=>{let e={browserAction:"",lock:""};try{let t=j.find(({name:a})=>a&&Uoe(a)),r=j.find(({name:a})=>a&&xsA(a));e={browserAction:this.normalizeCtrlOnMac(t?.shortcut)??"",lock:this.normalizeCtrlOnMac(r?.shortcut)??""}}catch{}return e})}static async updateShortcut(j,e){return await browser.commands.update({name:j,shortcut:e}),this.normalizeCtrlOnMac(e)??""}static normalizeCtrlOnMac(j){return HxA(j)}static async getBrowserInfo(){let j=await cp();if(T6()){let e=await ZSA();e&&(j.osVersion=e)}return j}static async openTab(j){if(j.ignoreIfDuplicate){let r=(await CE()).filter(a=>a.id!==0).filter(typeof j.ignoreIfDuplicate=="object"&&j.ignoreIfDuplicate?.customDuplicateCheck?j.ignoreIfDuplicate.customDuplicateCheck:a=>a.url===j.url);if(r.length>0){let a=r[0].id;return typeof j.ignoreIfDuplicate=="object"&&j.ignoreIfDuplicate?.activateExisting===!0&&await browser.tabs.update(a,{active:!0}),Promise.reject({message:"Did not open a new tab since existing tabs already open",firstDuplicateTabId:a})}}let e,t=new Promise(r=>{chrome.tabs.create({url:j.url,openerTabId:j.openerTabId},a=>{!a.openerTabId&&j.openerTabId&&a.id&&(qsA[a.id]=j.openerTabId),j.waitForLoad?chrome.tabs.onUpdated.addListener(e=(n,{status:o})=>{n===a.id&&o==="complete"&&(chrome.tabs.onUpdated.removeListener(e),r(a))}):r(a)})});try{return await j6.withTimeout(t,5e3,"openTab")}finally{e&&chrome.tabs.onUpdated.removeListener(e)}}static async sendNativeMessage(j,e){try{return Pj(await chrome.runtime.sendNativeMessage("",JSON.stringify({name:j,data:e})))}catch(t){return OA(t)}}static registerSuspensionListener(j,e=3e3){let t=async()=>{let r;try{r=j()}catch(a){console.error(`${j.name} failed to gracefully finish`,a);return}r instanceof Promise&&await Promise.race([r,sP(e)])};if(ve()){if(typeof browser>"u"||!browser.runtime){console.warn("Unable to register suspension listener in Safari");return}browser.runtime.onSuspend?.addListener(()=>{try{t()}catch(r){console.error("Error in Safari runtime suspension listener",r)}})}else chrome.runtime.onSuspend.addListener(()=>{try{t()}catch(r){console.error("Error in Chrome/Firefox runtime suspension listener",r)}})}};function Voe(A,j){let e=qsA[A];e&&(chrome.tabs.update(e,{active:!0}),delete qsA[A])}chrome.tabs.onRemoved.addListener(Voe);var NE=class{queue=[];currentTask=null;async push(j){let e,t,r=new Promise((n,o)=>{e=n,t=o});if(!e||!t)return Promise.reject("Unable to process work");let a={work:j,resolve:e,reject:t};return this.queue.push(a),setTimeout(async()=>this.process()),r}async process(){if(this.currentTask)return;let j=this.queue.shift();if(j){this.currentTask=j;try{let e=await j.work();j.resolve(e)}catch(e){j.reject(e)}this.currentTask=null,setTimeout(async()=>this.process())}}};var LVA=(A,j)=>A.name>j.name?1:j.name>A.name?-1:0,Xoe=()=>{let A=wHA().map(e=>({name:e.name})),j=IHA().map(e=>{let t=yHA(e.name);return{name:e.name,...t&&{variant:{name:t.name,value:JSON.stringify(t.value)}}}});return A.concat(j).sort(LVA)},AB="Unknown",zVA=async()=>{let A=await Te.getBrowserInfo(),j=await jn(),e=Xoe();return{client_name:j.clientName+" for "+A.name,client_build:parseInt(j.clientVersion,10),client_processor:AB,client_is_locked:Lt(),os_name:A.osName,os_version:A.osVersion??AB,locale:WA().language,total_space:AB,free_space:AB,memory:AB,model_name:AB,features:e,extensions:(await d8()).map(t=>`${t.name} (${t.version}, ${t.enabled?"Enabled":"Disabled"})`),installer:AB,install_location:AB}},UVA=()=>{let A=$HA();return H.getAccountHandlers.map(j=>{let t=A.get(j.uuid)?.filter(r=>r.enabled)?.map(r=>{let a=bHA(j.uuid,r.name);return{name:r.name,...a&&{variant:{name:a.name,value:JSON.stringify(a.value)}}}}).sort(LVA)??[];return{uuid:j.uuid,attr_version:j.b5account.attrVersion,device_uuid:j.deviceJson.uuid,user_uuid:j.user?.uuid||"",account_is_locked:j.isLocked,storage_used:j.b5account.subscription.storageUsed,account_type:j.b5account.type,account_state:j.b5account.state,url:j.client?.signinAddress??AB,vaults:j.vaults.map(r=>({uuid:r.uuid,created_at:r.createdAt?Date.parse(r.createdAt.toString())/1e3:0,vault_type:r.type,updated_at:r.updatedAt?Date.parse(r.updatedAt.toString())/1e3:0,acl:r.getCombinedAcl()||0,content_version:r.contentVersion,items:{active:r.activeItemCount,deleted:0,archived:0,rejected:0,with_offline_changes:[]}})),features:t}})},y5=A=>{if(A.length===0)return[];let j=new Map,e=[],t;A.map(n=>({date:n.date,message:n.message,type:n.type,timestamp:n.timestamp,origin:n.origin?n.origin:"Background"})).sort((n,o)=>n.origin.localeCompare(o.origin)).forEach(n=>{t!==n.origin&&t&&(j.set(t,e),e=[]),e.push({type:n.type,timestamp:n.timestamp,message:n.message,date:n.date}),t=n.origin}),t&&!j.has(t)&&e.length>0&&j.set(t,e);let a=[];return j.forEach((n,o)=>{let i=new Map,s=[],l;n.sort((c,k)=>c.date.localeCompare(k.date)).forEach(c=>{l!==c.date&&l&&(i.set(l,s),s=[]),s.push({type:c.type,timestamp:c.timestamp,message:c.message,origin:o}),l=c.date}),l&&!i.has(l)&&s.length>0&&i.set(l,s),i.forEach((c,k)=>{a.push({title:`/${o}/1Password_r_${k}`,content:c.map(u=>`${u.type}  ${new Date(u.timestamp).toISOString().replace("Z","")} ${u.message}`).join(`
`)})})}),a},VVA=()=>`1password_chromium_${ui()}.stable_${oP()}_${IaA()}.1pdiagnostics`;async function Joe(A){if(A.passwordType==="smart"){let t=await st();return Woe(t)}let j=dG.Characters;switch(A.passwordType){case"pin":j=dG.Pin;break;case"words":j=dG.Words;break}let e;switch(A.separatorType){case"hyphens":e=y7.Hyphens;break;case"periods":e=y7.Periods;break;case"commas":e=y7.Commas;break;case"spaces":e=y7.Spaces;break;case"underscores":e=y7.Underscores;break;case"digits":e=y7.Digits;break;case"digits_and_symbols":e=y7.DigitsAndSymbols;break}return jA.generatePassword({separatorType:e,passwordType:j,wordListType:A.fullWords?my.FullWords:my.Syllables,size:A.length,capitalizeOne:A.capitalize,requireDigits:A.requireDigits,requireSymbols:A.requireSymbols})}async function Woe(A){let j=A?await Cr(A):void 0;return jA.generateSuggestedPassword({url:A?.unparsedUrl,collectedPageDetails:j})}async function XVA(){let{generator:A,defaultPassGenType:j}=WA(),e=A.find(t=>t.passwordType===j);return Joe(e)}async function S0(A,j,e,t){let r;if(e)try{r=(await J8(A.id,e))?.URL()?.origin}catch{}let a=zi(A),n=await Cr(A);if(!r&&(r=Kg.urlComponentsForUnsafeURL(n.unparsedUrl)?.origin,!r))throw new q.LoggableError({errorClass:p`FillGeneratedPasswordForTab`,message:p`Unable to get origin from tab URL.`});try{await t0(A,n,{fillTargets:[{type:"Url",data:r}],fields:[{designation:wj.NewPassword,value:t.password,htmlId:"",htmlName:"",fieldTypes:[Ch.Password],label:"",checked:!1,restricted:!0}]},a)}catch{let i="Error filling the fill object.";throw console.error(i),new q.LoggableError({errorClass:p`FillGeneratedPasswordForTab`,message:q.logsafe.assertLogSafe(i)})}let{autoSaveEnabled:o}=WA();try{o&&ZA.anyAccountHasFlag("b5x-autosave-suggested-password")?BNA(A,t):await qn(A,Je,{name:"collected-page-details",data:{collectedPageDetails:await Cr(A),generatePasswordDetails:t}})}catch{let i="Error showing the save dialog.";throw console.error(i),new q.LoggableError({errorClass:p`FillGeneratedPasswordForTab`,message:q.logsafe.assertLogSafe(i)})}}var vsA=async(A,j)=>{await A.purgeOutdatedConsoleLogs(0);let e=await A.openDatabase();for(let t of j)await e.saveConsoleLog(t)},JVA=[{id:"diagnostic",label:"Diagnostic report",shouldRun:Pu,targetMs:1e3,numRepeats:1,setup:async()=>{let A=new Ou;await A.initDatabase();let j=await Rd.getConsoleLogs();await A.purgeOutdatedConsoleLogs(0);let e={name:"1Password",job:"Company Owner"};for(let t=0;t<1e5;t++)await A.saveConsoleLog(["This is a test log that is somewhat long to be more realistic to what we might see in the real world.",e],"INFO");return vsA(A,j)},run:async()=>fh(async()=>{let A=await Rd.getConsoleLogs();y5(A)})},{id:"diagnostic-raw",label:"Diagnostic report",shouldRun:Pu,targetMs:1e3,numRepeats:1,setup:async()=>{let A=new Ou;await A.initDatabase();let j=await Rd.getConsoleLogs();await A.purgeOutdatedConsoleLogs(0);let e={name:"1Password",job:"Company Owner"};for(let t=0;t<1e5;t++)await A.saveConsoleLog(["This is a test log that is somewhat long to be more realistic to what we might see in the real world.",e],"INFO");return vsA(A,j)},run:async()=>fh(async()=>{await Rd.getConsoleLogs()})},{id:"generating-diagnostic-logs",label:"Generating diagnostic logs",shouldRun:Pu,targetMs:300,numRepeats:5,setup:async()=>{let A=new Ou;await A.initDatabase();let j=await Rd.getConsoleLogs();await A.purgeOutdatedConsoleLogs(0);let e={name:"1Password",job:"Company Owner"};for(let t=0;t<1e5;t++)await A.saveConsoleLog(["This is a test log that is somewhat long to be more realistic to what we might see in the real world.",e],"INFO");return vsA(A,j)},run:async()=>{let A=new Ou;await A.initDatabase();let j={name:"1Password",job:"Company Owner"},e=[];for(let t=0;t<1e3;t++)e.push(A.saveConsoleLog(["This is a test log that is somewhat long to be more realistic to what we might see in the real world.",j],"INFO"));return fh(async()=>{await Promise.all(e)})}},{id:"wasm-init",label:"WASM Initialization",targetMs:1e3,run:()=>Sv("wasm-init")},{id:"wasm-init-import",label:"WASM Initialization - Import",targetMs:600,run:()=>Sv("wasm-init-import")},{id:"wasm-init-ffi",label:"WASM Initialization - ffi",targetMs:600,run:()=>Sv("wasm-init-ffi")},{id:"wasm-init-preconfig",label:"WASM Initialization - preconfig",targetMs:600,run:()=>Sv("wasm-init-preconfig")},{id:"wasm-init-loadssm",label:"WASM Initialization - ssm",targetMs:100,shouldRun:()=>!1,run:()=>Sv("wasm-init-ssm")},{id:"wasm-init-fsm",label:"WASM Initialization - fsm",targetMs:100,shouldRun:()=>ka(),run:()=>Sv("wasm-init-fsm")},{id:"wasm-init-siw-sm",label:"WASM Initialization - siw sm",targetMs:100,shouldRun:()=>ka(),run:()=>Sv("wasm-init-siw-sm")},{id:"item-decrypt",label:"Item Decryption",targetMs:1e3,numRepeats:5,run:async()=>fh(async()=>{await zj.loadAndDecryptItemCache()})},{id:"sync-all-accounts",label:"Sync - All Accounts",targetMs:800,numRepeats:5,run:async()=>fh(async()=>{await Promise.all(H.signedInAccounts.map(async A=>H.runSyncerForAccount(A.uuid)))})},{id:"fill-all-fields",label:"Fill - All Fields",targetMs:100,numRepeats:5,run:async()=>{let{id:A}=await Te.openTab({url:"https://fill.dev/all",waitForLoad:!0});if(!A)throw new Error("Tab was missing id!");let j=await L6(A);if(!j)throw new Error("Unable to create tab info!");let e=await fh(async()=>{await Cr(j,!1)});return browser.tabs.remove(j.id),e}},{id:"fill-generated-password",label:"Fill - Generated Password",targetMs:1e3,numRepeats:5,run:async()=>{let{id:A}=await Te.openTab({url:"https://fill.dev/all",waitForLoad:!0});if(!A)throw new Error("Tab was missing id!");let j=await L6(A);if(!j)throw new Error("Unable to create tab info!");vt()&&await new Promise(t=>setTimeout(t,500));let e=await fh(async()=>{await S0(j,!1,void 0,{password:"password123",entropy:0,strengthPercent:100})});return browser.tabs.remove(j.id),e}},{id:"sls-lock-state-request",label:"SLS - Lock State Request",targetMs:100,numRepeats:5,shouldRun:()=>re.getDesktopAppState().type==="Connected",run:async()=>fh(async()=>{await re.desktopConnectionManager?.lockState()})}];function $5(A){performance.mark(`${A}-start`)}function fsA(A){performance.mark(`${A}-end`)}function Sv(A){try{let j=performance.measure(A,`${A}-start`,`${A}-end`).duration;return Y8(j)}catch(j){throw j instanceof SyntaxError?new Error(`Unable to find start/end mark for "${A}"`):new Error(`Unable to measure performance for "${A}"`)}}function Y8(A){return Math.round(A*100)/100}async function fh(A){performance.mark("benchmark-start"),await A();let j=performance.measure("benchmark","benchmark-start").duration;return Y8(j)}var GsA=[];function WVA(){return{benchmarks:JVA.map(({id:A,label:j,shouldRun:e,targetMs:t})=>({id:A,label:j,shouldRun:e?e():!0,targetMs:t}))}}async function QVA(A){let j=new rt("\u{1F4CA} Benchmarks");if(Lt())throw j.error("Couldn't run benchmarks, extension was locked"),new Error("Please unlock to run the benchmark");let e=JVA.find(t=>t.id===A.data.benchmarkId);if(!e)throw new Error("Could not locate benchmark");if(!(typeof e.shouldRun=="function"&&!e.shouldRun()))if(e.numRepeats!==void 0){let t=[];for(let n=0;n<e.numRepeats;n++)try{let o=e.setup&&await e.setup(),i=await e.run();j.log(`[${e.label} - ${n+1}/${e.numRepeats}] Ran in ${i}ms; Target is ${e.targetMs}ms`),t.push(i),o&&await o()}catch(o){j.warn(`[${e.label} - ${n+1}/${e.numRepeats}] ${o instanceof Error?o.message:"unknown error"}`)}let r=t.reduce((n,o)=>n+o,0),a={id:e.id,label:e.label,shouldRun:e.shouldRun?e.shouldRun():!0,targetMs:e.targetMs,ms:Y8(r/t.length)};return GsA.push(a),a}else{let t;try{t=await e.run(),j.log(`[${e.label}] Ran in ${t}ms; Target is ${e.targetMs}ms`)}catch(a){j.warn(`[${e.label}] ${a instanceof Error?a.message:"unknown error"}`)}let r={id:e.id,label:e.label,shouldRun:e.shouldRun?e.shouldRun():!0,targetMs:e.targetMs,ms:t};return GsA.push(r),r}}async function YVA(){if(Lt())throw new Error("Please unlock to export the benchmark");let A=await zj.loadItemCache(),j=await Ho(!0);await _0("benchmark.json",{userAgent:navigator.userAgent,version:$E(),accounts:j.map(e=>({id:e.id,vaultCount:e.vaults?.length})),itemCount:A?.items().length,slsState:re.desktopConnectionManager?.getState().type,results:GsA.map(e=>({label:e.label,ms:e.ms}))})}var ZVA;function AXA(){ZVA=chrome.runtime.connectNative(""),ZVA.onMessage.addListener(Yoe)}function Yoe(A){FsA(A)&&Zm()}function FsA(A){return!!(A&&typeof A=="object"&&"name"in A&&A.name&&A.name==="openWelcomePage")}var w5=class A{constructor(j,e){this.desktopAppIdentifier=j;this.notificationFn=e}callbackHandlers=new Map;port=null;connect=()=>{this.port||(console.info(`\u{1F4AB} Looking for desktop app ${this.desktopAppIdentifier}`),this.port=browser.runtime.connectNative(this.desktopAppIdentifier),this.port.onDisconnect.addListener(this.onDisconnect),this.port.onMessage.addListener(this.onMessage))};disconnect=()=>{this.port&&(this.port.disconnect(),this.port=null)};onDisconnect=j=>{let e;if(vt()){let t="Error: None";j.error&&(t=`${j.error.message}`),console.info(`Desktop app port disconnected. ${t}`),e=t.indexOf("No such native application")!==-1?"HostNotFound":"PortClosed"}else{let t=chrome.runtime.lastError?.message??"None";console.info(`Desktop app port disconnected. Error: ${t}`),e=t.indexOf("Specified native messaging host not found")!==-1?"HostNotFound":"PortClosed"}this.port=null,this.callbackHandlers.forEach((t,r)=>{t.reject({type:e,content:`Terminating handler <${r}> as native messaging port was closed`}),this.callbackHandlers.delete(r)})};onMessage=j=>{let e=this.parseMessage(j);if(e)switch(e.type){case"Success":{let t=this.callbackHandlers.get(e.content.callbackId);if(!t){performance.clearMarks(`invoke-started-${e.content.callbackId}`);return}console.info(`\u{1F4E5} Received message <${e.content.response.type}> from native core <${e.content.callbackId}>. Duration: ${this.getInvocationDuration(e.content.callbackId)}ms`),t.resolve(e.content.response),this.callbackHandlers.delete(e.content.callbackId);break}case"Failure":case"BrowserSupport":{let t=this.callbackHandlers.get(e.content.callbackId);if(!t){performance.clearMarks(`invoke-started-${e.content.callbackId}`);return}e.type==="BrowserSupport"?console.info(`\u{1F4E5} Received failure for message <${e.content.response}> from Browser Support <${e.content.callbackId}>. Duration: ${this.getInvocationDuration(e.content.callbackId)}ms`):console.info(`\u{1F4E5} Received failure for message <${e.content.response.type}> from native core <${e.content.callbackId}>. Duration: ${this.getInvocationDuration(e.content.callbackId)}ms`),t?.reject(e.content.response),this.callbackHandlers.delete(e.content.callbackId);break}case"Notification":{console.info(`Received <${e.content.type}> from the native core`),this.notificationFn(e.content),(e.content.type==="AppQuit"||e.content.type==="BrowserVerificationFailed")&&this.callbackHandlers.forEach(({reject:t})=>t({type:"PortClosed",content:"Desktop app has closed the connection"}));break}}};getInvocationDuration=j=>{let e=performance.measure(`invoke-${j}`,`invoke-started-${j}`).duration;return Y8(e)};async invoke(j){if(!this.port)return Promise.reject(`\u{1F4A5} Failed to send <${j.type}> because our port was disconnected.`);let t=A.generateId();return performance.mark(`invoke-started-${t}`),console.info(`\u{1F4E4} Sending <${j.type}> message to native core <${t}>`),Promise.race([new Promise((r,a)=>{this.callbackHandlers.set(t,{resolve:r,reject:a});let n=this.formatMessage({callbackId:t,invocation:j});this.port?.postMessage(n)}),new Promise((r,a)=>setTimeout(()=>{this.callbackHandlers.delete(t)&&console.warn(`\u23F3 Timeout waiting for response to <${j.type}> from native core <${t}>`),a({type:"Timeout",content:`Timeout waiting for response to <${j.type}>`})},1e4))])}static generateId=()=>globalThis.crypto.getRandomValues(new Uint32Array(1))[0]},bsA=class extends w5{parseMessage=j=>j;formatMessage=j=>j},ysA=class extends w5{parseMessage=j=>{if(this.isNotification(j))return j.userInfo.message;if(this.isNmhResponse(j))return j;FsA(j)||console.warn("Safari produced an unexpectedly shaped message")};messageTypeFromRequest(j){switch(j.invocation.type){default:return"Sls"}}formatMessage=j=>({name:"core",data:JSON.stringify({type:this.messageTypeFromRequest(j),data:j})});isNotification(j){return!!(j&&typeof j=="object"&&"name"in j&&j.name&&j.name==="notification"&&"userInfo"in j&&typeof j.userInfo=="object"&&j.userInfo&&"message"in j.userInfo&&typeof j.userInfo.message=="object")}isNmhResponse(j){return!!(j&&typeof j=="object"&&"type"in j&&typeof j.type=="string"&&"content"in j&&typeof j.content=="object")}};function jXA(A,j){return T6()?new ysA(A,j):new bsA(A,j)}var mh="DesktopAppShouldSendLock",rXA=1,Aie="com.1password.1password",jie="com.1password.1password_debug",eie="com.1password.1password7",tie="com.1password.1password7_debug",$sA=class{desktopAppMessenger;messageQueue=new NE;state={type:"Start"};stateCallback;isOp7;clientCreatedInProgress=!1;constructor(j,e){this.desktopAppMessenger=jXA(j,this.handleDesktopAppNotification),this.isOp7=j.includes("1password7"),this.desktopAppMessenger.connect(),this.stateCallback=e}init=async j=>{mt.subscribe(mh,this.onLock);let e=this.requestAndUnlockAccountsFromApp(!1,j);return this.nextState({type:"Connecting",connectionPromise:e.then(()=>this.state)}),e};hasAccounts=async()=>{switch(this.state.type){case"Connected":return this.state.accountUuids.length>0;case"Connecting":{let j=await this.state.connectionPromise;if(j.type==="Connected")return j.accountUuids.length>0}}return!1};requestDsecretHmac=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")throw new Error("Currently disconnected from Desktop app");return this.invoke({type:"NmRequestDSecretProxy",content:j})};requestDelegatedSession=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")throw new Error("Currently disconnected from Desktop app");return this._invokeWithoutDisconnect({type:"NmRequestDelegatedSession",content:j})};requestUpgradeFromOfflineState=async()=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")throw new Error("Currently disconnected from Desktop app");return this._invokeWithoutDisconnect({type:"NmRequestUpgradeOffline",content:void 0})};showUnlock=async()=>{if(!(this.state.type!=="Connected"&&this.state.type!=="Connecting"))return this.invoke({type:"NmShowUnlock",content:void 0})};showUnlockAccount=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")return!1;try{return await this._invokeWithoutDisconnect({type:"NmShowUnlockAccount",content:j}),!0}catch{return!1}};sendSecureRemoteAutofillCredentialBundle=async j=>{if(this.state.type!=="Connected")throw new Error("Unable to retrieve the credential bundle when Desktop app is not connected");return this._invokeWithoutDisconnect({type:"NmSendSecureRemoteAutofillCredentialBundle",content:j})};desktopAppDeviceInfo=async()=>{if(this.state.type!=="Connected")throw new Error("Unable to retrieve the device info when Desktop app is not connected");return this._invokeWithoutDisconnect({type:"NmRequestDesktopApplicationDeviceInfo"})};showDesktopSettingsPage=async j=>{if(!(this.state.type!=="Connected"&&this.state.type!=="Connecting"))return this.invoke({type:"NmShowDesktopSettingsPage",content:j})};editItem=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")return!1;try{return await this._invokeWithoutDisconnect({type:"NmEditItem",content:j}),!0}catch{return!1}};viewItem=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")return!1;try{return await this._invokeWithoutDisconnect({type:"NmViewItem",content:j}),!0}catch{return!1}};createItem=async j=>{if(this.state.type!=="Connected"&&this.state.type!=="Connecting")return!1;try{return await this._invokeWithoutDisconnect({type:"NmCreateItem",content:j}),!0}catch{return!1}};lockState=async()=>{if(this.state.type!=="Connected")return{lockState:ep.Locked};try{return await this.invoke({type:"NmLockState",content:void 0},!1)}catch{return{lockState:ep.Locked}}};offlineStatus=async()=>{if(this.state.type!=="Connected")return{authFailed:!0};try{return await this._invokeWithoutDisconnect({type:"NmOfflineStatus",content:void 0})}catch{throw new Error("Unable to check offline status")}};shouldPromptToAddAccount=async j=>{if(this.state.type!=="Connected")throw new Error("Unable to check about accounts when Desktop app is not connected");return this.invoke({type:"NmShouldPromptToAddAccount",content:j})};promptDesktopAppToSignIn=async j=>{if(this.state.type!=="Connected")throw new Error("Unable to prompt Desktop app when not connected");return this.invoke({type:"NmPromptToAddAccount",content:j})};sendCollectedPageDetails=async j=>{if(this.state.type!=="Connected")throw new Error("Unable to prompt Desktop app when not connected");return this._invokeWithoutDisconnect({type:"NmCollectedPageDetails",content:{collectedPageDetails:j}})};handleDesktopAppNotification=async j=>{switch(j.type){case"LockStateChanged":switch(j.content){case ep.Locked:await io(),this.nextState({type:"Locked"});break;case ep.Unlocked:this.requestAndUnlockAccountsFromApp();break}break;case"Offline":Ft.updateConnectivityStatus(!0);break;case"RequestingMfa":Ft.updateConnectivityStatus(!0),Mo();break;case"ClientCreated":if(this.clientCreatedInProgress)return;this.clientCreatedInProgress=!0;try{await nXA()}finally{this.clientCreatedInProgress=!1}Ft.updateConnectivityStatus();break;case"SsoMigrationStarted":await io(),this.nextState({type:"Locked"});break;case"SsoMigrationCompleted":this.requestAndUnlockAccountsFromApp();break;case"CloseTab":W8(j.content.url);break;case"AppQuit":this.nextState({type:"Disconnected",reason:8});break;case"BrowserVerificationFailed":this.nextState({type:"Disconnected",reason:j.content===WO.UnknownBrowser?5:4});break;case"AccountRemoved":H.removeAccount(j.content.accountUuid);break;case"FillShortcutActivated":{let e=await st();if(!e){console.warn("Cannot fill: Failed to resolve information on active tab");return}aXA(e);break}case"CollectActivePageDetails":{try{let e=await st();if(!e)throw new Error("Cannot collect page details: Failed to resolve information on active tab");let t=await Cr(e);this.sendCollectedPageDetails(t)}catch{console.warn("Unable to send active page details back to the desktop app")}break}case"BrowserHelperNotRegistered":{this.nextState({type:"Disconnected",reason:2});break}case"FillItem":{try{if(!await tsA()){console.info("We were asked to fill an item but we aren't the active browser");return}}catch{return}let e=!1;try{let t=await Br(j.content.itemUuid);if(!t)throw new Error(`Unable to load item uuid ${j.content.itemUuid} for fill.`);await gv(t,"KEYBOARD_SHORTCUT"),e=!0}finally{this._invokeWithoutDisconnect({type:"NmAcknowledgeFillItem",content:{success:e}})}break}case"CheckExtensionPinStatus":{let e=!1;try{let t=await bD(),r=!vt()&&!vi();e=t||r}finally{this._invokeWithoutDisconnect({type:"NmAcknowledgeCheckExtensionPinStatus",content:{isPinned:e}})}break}}};requestAccountsFromApp=async(j=!0,e=!1)=>{let t=(await this.invoke({type:"NmRequestAccounts",content:{version:rXA,userRequested:e,supportsDelegation:!0}},j)).accounts;return t.forEach(rie),t};requestAndUnlockAccountsFromApp=async(j=!0,e=!1)=>{try{let t;try{t=await this.requestAccountsFromApp(j,e)}catch(l){throw console.error("Failed to request accounts in requestAndUnlockAccountsFromApp:",l),l}let r=t.every(l=>l.type==="Locked"),a=t.map(l=>l.type==="Locked"?l.content.accountUuid:l.content.details.accountUuid);try{this.nextState({type:"AddingAccounts",accountUuids:a,unlockingUuids:a.filter(l=>!H.hasAccountHandler(l))})}catch(l){throw console.error("Failed to perform AddingAccounts state transition:",l),l}let{numberOfUnlockedAccounts:n}=await CN(t,{removeExtraAccounts:!1}),o=H.signedInAccounts.length;r&&(io(),o=0);try{this.nextState({type:"FinishedAddingAccounts",numberOfUnlockedAccounts:o})}catch(l){throw console.error("Failed to perform FinishedAddingAccounts transition"),l}let i=t.filter(l=>l.type==="Unlocked").length,s=t.filter(l=>l.type==="Locked").length;return console.info(`We successfully unlocked ${n} account(s) from a Desktop app with ${i} unlocked and ${s} locked account(s).`),!0}catch{return console.info("When requesting accounts we ran into a problem"),!1}};onLock=async()=>{if(this.state.type==="Connected")try{await this.invoke({type:"Lock",content:void 0},!1)}catch{}};nextState(j){switch(j.type){case"Connecting":if(this.state.type==="Start"||this.state.type==="Disconnected")return this.updateState({type:"Connecting",connectionPromise:j.connectionPromise});break;case"AddingAccounts":if(this.state.type==="Connecting"||this.state.type==="Connected"||this.state.type==="Reconnecting"){vj.setItem("sls_app_connected","true");let e="Unlocking";return this.state.type==="Connected"&&this.state.lockState==="Unlocked"?e="Unlocked":j.unlockingUuids.length>0&&(e="Syncing"),this.updateState({type:"Connected",accountUuids:j.accountUuids,lockState:e})}break;case"FinishedAddingAccounts":if(this.state.type==="Connected")return this.updateState({type:"Connected",accountUuids:this.state.accountUuids,lockState:this.state.lockState==="Unlocked"||j.numberOfUnlockedAccounts>0?"Unlocked":"Locked"});break;case"Locked":if(this.state.type==="Connected"||this.state.type==="Reconnecting")return this.updateState({type:"Connected",accountUuids:this.state.accountUuids,lockState:"Locked"});break;case"Timeout":if(this.state.type==="Connecting")return this.reconnect();if(this.state.type==="Connected"||this.state.type==="Reconnecting")return this.state.type!=="Reconnecting"||this.state.attempts<2?this.reconnect():(this.desktopAppMessenger.disconnect(),this.updateState({type:"Disconnected",latestReason:3,browserSignatureInvalid:!1,browserIsUnknown:!1,hasEverConnectedToDesktopApp:Ui()}));break;case"ReattemptConnection":if(this.state.type==="Disconnected")return this.updateState({type:"Connecting",connectionPromise:j.connectionPromise});break;case"Disconnected":{let e=j.reason??0,t=j.reason===4,r=j.reason===5;if(console.info(`Disconnected from Desktop app due to ${e}`),this.state.type==="Start"&&(j.reason===8||j.reason===4||j.reason===5||j.reason===7)){this.desktopAppMessenger.disconnect(),this.state={type:"Disconnected",latestReason:e,browserSignatureInvalid:t,browserIsUnknown:r,hasEverConnectedToDesktopApp:Ui()};return}if(this.state.type==="Disconnected")return this.desktopAppMessenger.disconnect(),this.updateState({type:"Disconnected",latestReason:e,browserSignatureInvalid:this.state.browserSignatureInvalid||t,browserIsUnknown:this.state.browserIsUnknown||r,hasEverConnectedToDesktopApp:Ui()});if(this.state.type==="Connecting"||this.state.type==="Connected"||this.state.type==="Reconnecting")return j.shouldAttemptReconnect!==!1&&e===1&&(this.state.type!=="Reconnecting"||this.state.attempts<2)?this.reconnect():(this.desktopAppMessenger.disconnect(),this.updateState({type:"Disconnected",latestReason:e,browserSignatureInvalid:t,browserIsUnknown:r,hasEverConnectedToDesktopApp:Ui()}));break}}throw this.desktopAppMessenger.disconnect(),new Error(`Invalid State Request to <${j.type}> while in state <${this.state.type}>`)}updateState(j){this.state=j,this.stateCallback(this,j)}async invoke(j,e=!0){return this.messageQueue.push(async()=>{try{return(await this.desktopAppMessenger.invoke(j)).content}catch(t){if(oie(t)&&t?.type==="Timeout"&&e)this.nextState({type:"Timeout"});else{let r=wsA(t);this.nextState({type:"Disconnected",reason:r,shouldAttemptReconnect:e})}throw t}})}async _invokeWithoutDisconnect(j){return this.messageQueue.push(async()=>(await this.desktopAppMessenger.invoke(j)).content)}reconnect(){let j=this.state.type==="Reconnecting"?this.state.attempts+1:0,e=this.state.type==="Connected"?this.state.accountUuids:[];return this.updateState({type:"Reconnecting",accountUuids:e,attempts:j,connectionPromise:new Promise(t=>{setTimeout(async()=>{try{this.desktopAppMessenger.connect(),await this.invoke({type:"NmLockState",content:void 0})}catch{}t(this.state)},2500)})})}disconnect(){this.nextState({type:"Disconnected",reason:6,shouldAttemptReconnect:!1})}disconnectWith(j){this.state={type:"Disconnected",latestReason:j,browserIsUnknown:j===5,browserSignatureInvalid:j===4,hasEverConnectedToDesktopApp:Ui()}}resetConnection(){this.state={type:"Start"},this.desktopAppMessenger.connect()}};async function CNA(A,j=!1){let t=(await Te.getBrowserInfo()).osName===q.browserInfo.OperatingSystem.Linux,{slsChannel:r}=WA(),a=await eXA(aie(r),j,t?2:1,A);return a.isOk()||a.error.invalidBrowserState!==2||a.error.latestReason===7?a:!t&&!T6()?await eXA(nie(r),j,1,A):a}function wsA(A){if(A&&typeof A=="object"&&"reason"in A&&A?.reason==="ExtensionSupportDisabled")return 6;if(A&&typeof A=="object"&&"type"in A){if(A?.type==="ExtensionSupportDisabled")return 6;if(A.type==="PortClosed")return 1;if(A?.type==="HostNotFound")return 2}return A===BG.MainAppNotRunning?7:0}async function eXA(A,j,e,t){let r=new $sA(A,t),a;for(let i=0;i<e;i++)try{r.resetConnection();let{accounts:s}=(await r.desktopAppMessenger.invoke({type:"NmRequestAccounts",content:{version:rXA,userRequested:j,supportsDelegation:!0}})).content;return Pj({desktopApp:r,numberOfUnlockedAccounts:s.filter(l=>l.type==="Unlocked").length})}catch(s){if(a=s,wsA(a)===6){r.desktopAppMessenger.disconnect();break}else r.desktopAppMessenger.disconnect()}let n=r.state,o=wsA(a);return n.type!=="Disconnected"&&o===7&&r.disconnectWith(o),n.type!=="Disconnected"&&o===6?OA({type:"Disabled",invalidBrowserState:3,latestReason:o,hasEverConnectedToDesktopApp:Ui()}):OA({type:"Disconnected",invalidBrowserState:n.type==="Disconnected"?JnA(n):2,latestReason:o,hasEverConnectedToDesktopApp:Ui()})}function JnA(A){if(A.type!=="Disconnected")return 2;let{latestReason:j,browserSignatureInvalid:e,browserIsUnknown:t}=A;return j===6?2:e||t&&Ui()?0:t?1:2}function Md(A){if(!A.alg)throw new Error("Missing `alg` from Muk");if(!A.ext)throw new Error("Missing `ext` from Muk");if(!A.k)throw new Error("Missing `k` from Muk");if(!A.kid)throw new Error("Missing `kid` from Muk");return{alg:A.alg,ext:A.ext,k:A.k,key_ops:["encrypt","decrypt"],kid:A.kid,kty:"oct"}}function rie(A){A.type==="Locked"?A.content.signInAddress=tXA(A.content.signInAddress):A.content.details.signInAddress=tXA(A.content.details.signInAddress)}function tXA(A){return A.endsWith("/")?A.slice(0,A.length-1):A}function Ui(){return vj.getItem("sls_app_connected")==="true"}function aie(A){return A==="production"?Aie:jie}function nie(A){return A==="production"?eie:tie}async function aXA(A){try{if(Lt()){let a=Date.now(),n=async()=>{let o=Date.now(),i=await st();A.id===i?.id&&A.unparsedUrl===i?.unparsedUrl&&o-a<6e4?aXA(A):console.warn("Tab changed or timeout exceeded after fill shortcut activated.")};mt.subscribe(br,n,{once:!0});return}let j=await zj.loadItemCache();if(!j)throw new Error("The item cache was not initialized during fill from desktop app");let e=ie.loginsAndPasswords,t=ie.userSelected(mr(),void 0,void 0,j),r=j.itemsForTab(A,a=>t(a)&&e(a),d6.suggestedSort(A));if(r.length===1){let a=await E6(r[0]);if(!a)throw new Error("Could not decrypt item during fill from desktop app");gv(a,"KEYBOARD_SHORTCUT",{requireAuthorization:!0,postFill:{type:"focusLastFilledField"}})}else usA(A)}catch{console.warn("Unable to handle fill shortcut event from the desktop app")}}function oie(A){return!!(A&&typeof A=="object"&&"type"in A&&"content"in A)}var D0=(A,j)=>e=>j?e.serveraccount.uuid===A&&e.serveraccount.userUUID===j:e.serveraccount.uuid===A,oXA=(A,j)=>e=>j?e.serveraccount.uuid!==A&&e.serveraccount.userUUID!==j:e.serveraccount.uuid!==A;async function _N(A,j){let e=await jn(),t=Md(j.muk),r;if(!j.srpX||!j.secretKey?r=await q0(j):r=await Hd({credentials:{accountIdentifier:{accountUUID:j.details.accountUuid,userUUID:j.details.userUuid,server:j.details.server},uuid:j.details.userUuid,email:j.details.email,muk:t,secretKey:j.secretKey,signinAddress:j.details.signInAddress,srpX:j.srpX},device:e,additionalSignInOptions:{allowReauthorization:!0}}).finally(async()=>Ft.updateConnectivityStatus()),!r.CTX)return Promise.reject("Missing context on the client.");A.setClient(r)}async function nXA(){let A=new rt("\u{1F501} reInitializeAllUnlockedAccountHandlerClients"),j=re.desktopConnectionManager?.getDesktopApp();if(!j||re.getDesktopAppState().type!=="Connected"){A.info("The user is not connected to the desktop app.");return}if(!H.hasAccountHandlers||H.allAccountHandlersAreLocked){A.info("No accountHandlers, or all handlers are locked");return}let e=n=>n.isLocked?!1:n.client?n.client.invalid||!n.client.isSignedIn:!0,t=H.getAccountHandlers.filter(n=>e(n));if(!t.length)return;let r;try{r=await j.requestAccountsFromApp()}catch(n){throw A.error("Failed to request accounts from desktop app."),n}if(!r?.length){A.info("No accounts were found from the desktop app.");return}let a=[];for(let n of t){let o=r.find(i=>i.type==="Unlocked"&&i.content.details.accountUuid===n.uuid);if(!o){A.info(`The unlocked account ${n.uuid} was not found.`);continue}if(o.type==="Locked"){A.info(`Ignoring unexpectedly locked account ${n.uuid}.`);continue}a.push(_N(n,o.content).catch(()=>{A.error(`Unable to upgrade account handler client from NmAccount for ${n.uuid}`)}))}A.info(`Attempting to reinitialize ${a.length} clients.`),await Promise.all(a)}async function L9A(A){let j=new rt(`\u{1F501} Reinitialize client for ${A}`),e=re.desktopConnectionManager?.getDesktopApp();if(!(e&&re.getDesktopAppState().type==="Connected"))return j.info("The user is not connected to the desktop app."),"User is not connected to the desktop app";let t=H.findAccountHandlerByUuid(A);if(!t)return j.info("We could not find the account handler."),"We could not find the account handler";if(t.isLocked)return j.info("The account handler is locked."),"The account handler is locked";let r;try{r=await e.requestAccountsFromApp()}catch(n){throw j.error("Failed to request accounts from desktop app."),n}if(!r?.length)return j.info("No accounts were found from the desktop app."),"No accounts were found from the desktop app";let a=r.find(n=>n.type==="Unlocked"&&n.content.details.accountUuid===A)?.content;if(!a)return j.info(`The unlocked account ${A} was not found.`),"Unlocked account was not found";j.info("Attempting to reinitialize the client.");try{await _N(t,a)}catch{return j.error("Unable to upgrade the account handler client from NmAccount"),"Unable to upgrade from NmAccount"}return"No error occurred"}async function R9A(A){lj("frozen-accounts-changed",{frozenAccountsInfo:A}),await EsA(A)}async function Q9A(A,j){let e=A.serveraccount.email===j.details.email,t=A.serveraccount.secretKey===j.secretKey,r=A.serveraccount.signinAddress===j.details.signInAddress,a=e&&t&&r,n=typeof j.details.userVersion!="number"||A.serveraccount.userVersion>=j.details.userVersion;if(!a&&!n){console.info(`Sign in details did not match, stayed the same: (email: ${e}, secret key: ${t}, sign in address: ${r})...`);let o={secretKey:j.secretKey,signinAddress:j.details.signInAddress,email:j.details.email,userVersion:j.details.userVersion};await H.updateAccount(A.serveraccount.uuid,o)}}function Cc(A,j){let e=H.findAccountHandlerByUuid(A);e?.client?.CTX&&NA.reportUsoAction(e.client.CTX,j).catch(t=>{})}var iie=async(A,j,e,t,r)=>{switch(r.name){case"new-item":return{type:"new-item",data:await Hv(A,j,e,!0)};case"suggested-item":return t.length===1?{type:"update-item",data:await Z8(A,t[0],e,!0)}:{type:"new-item",data:await Hv(A,j,e,!0)};case"update-item":{let a;try{a=await Br(r.data.itemUuid)}catch(n){rj(new q.LoggableError({errorClass:p`ConfigureSaveSession`,message:p`Failed to load item selected for update item.`,stackOverrideError:n instanceof Error?n:void 0}))}return a?{type:"update-item",data:await Z8(A,a,e,!0)}:{type:"new-item",data:await Hv(A,j,e,!0)}}default:te(r)}},sie=async(A,j,e,t)=>{if(t){let r;try{r=await Br(t)}catch(a){rj(new q.LoggableError({errorClass:p`UnlockSaveSession`,message:p`Failed to load item selected for update item.`,stackOverrideError:a instanceof Error?a:void 0}))}if(r)return{type:"update-item",data:await Z8(A,r,e,!0)}}return{type:"new-item",data:await Hv(A,j,e,!0)}},lie=async(A,j,e,t)=>{if(t){let r;try{r=await Br(t)}catch(a){rj(new q.LoggableError({errorClass:p`VerifyUnlockedSession`,message:p`Failed to load item selected for update item.`,stackOverrideError:a instanceof Error?a:void 0}))}return r?{type:"update-item",data:await Z8(A,r,e,!1)}:{type:"new-item",data:await Hv(A,j,e,!0)}}return{type:"new-item",data:await Hv(A,j,e,!1)}};async function sXA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");let t;try{t=await jA.saveManagerStatus(e)}catch(s){return Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`SaveDialogConfiguration`,message:p`Failed to load save session for tab.`,stackOverrideError:s instanceof Error?s:void 0})),{type:"error",data:void 0}}let r;try{r=await jA.getEmailAliasSessionStatus(e.id)}catch(s){Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`SaveDialogConfiguration`,message:p`Failed to load masked email session for tab.`,stackOverrideError:s instanceof Error?s:void 0}))}let a=[];try{a=await p7(r)}catch(s){return Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`SaveDialogConfiguration`,message:p`Failed to load account information for Save Dialog.`,stackOverrideError:s instanceof Error?s:void 0})),{type:"error",data:void 0}}let n=[];try{n=t.isUpdatable?await AO(t.templateUuid,t.associatedNakedDomains,r):[]}catch(s){Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`SaveDialogConfiguration`,message:p`Failed to load account information for Save Dialog.`,stackOverrideError:s instanceof Error?s:void 0}))}let o=[];try{o=await cie(e,n,t.templateUuid)}catch(s){Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`SaveDialogConfiguration`,message:p`Failed to find matching items for tab.`,stackOverrideError:s instanceof Error?s:void 0}))}let i;try{i=n.length>0?{hasMatchForPage:o.length>0,itemListElements:await _v(a,n)}:void 0}catch(s){Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`SaveDialogConfiguration`,message:p`Failed to find matching items for tab.`,stackOverrideError:s instanceof Error?s:void 0}))}try{switch(t.state.type){case"Unconfigured":{let s=await iie(e,a,t,o,t.state.data);return{type:"success",data:{initialView:s,updatableItems:i,showUpdatableItemList:t.state.data.name==="suggested-item"&&s.type==="new-item"&&!!i?.hasMatchForPage}}}case"Locked":return{type:"success",data:{initialView:await sie(e,a,t,t.state.data),updatableItems:i,showUpdatableItemList:!1}};case"Unlocked":return{type:"success",data:{initialView:await lie(e,a,t,t.state.data),updatableItems:i,showUpdatableItemList:!1}};default:te(t.state)}}catch(s){return Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`SaveDialogConfiguration`,message:p`Failed to generate save dialog configuration.`,stackOverrideError:s instanceof Error?s:void 0})),{type:"error",data:void 0}}}async function cie(A,j,e){if(j.length===0)return[];let t=await jA.saveManagerMatchingItems(A,j,e);return t.length===0?[]:j.filter(r=>t.includes(r.uuid))}async function AO(A,j,e){let t=await zj.loadItemCache();if(!t)return[];let r=o=>!!o.urlToNakedDomains&&j.some(i=>ie.nakedDomain(i)(o)),a=t.items(ie.combine(ie.invert(ie.frozenAccountItem(t)),ie.invert(ie.managed),ie.active,ie.template(A),ie.userSelected(mr(),void 0,void 0,t),ie.if(MH,r)));return(await Promise.all(a.map(async o=>E6(o)))).filter(o=>o?e?o.overview.b5AccountUUID===e.accountUuid:!0:!1)}async function _v(A,j,e){let{showRichIcons:t}=WA(),r=[];for(let a of A)for(let n of a.vaults){let o=j.filter(i=>i.vault.uuid===n.uuid);if(o.length!==0){r.length>0&&r.push({type:"separator",data:{id:`separator-${n.uuid}`}}),r.push({type:"header",data:{id:`header-${n.uuid}`,accountLabel:a.name,accountIcon:await r0(a.baseAvatarUrl,a.uuid,a.avatar,a.type),vaultLabel:n.name,vaultIcon:await Gv(n.baseAvatarUrl,a.uuid,n.avatar)}});for(let i of o)r.push({type:"option",data:{id:`${i.uuid}:${n.uuid}:${a.uuid}`,label:i.title,subtitle:i.subtitle,icon:await Ei(i,60,t),isDefault:e?i.localId===e:void 0}})}}return r}async function p7(A){let j=mr(),e=[];for(let t of H.getUnlockedAccountOverviews){if(t.vaults.length===0||j.isExcluded(t.uuid)||t.vaults.every(i=>j.isExcluded(t.uuid,i.uuid)||i.type===xA.Vault.TypeManagedApplications))continue;let r=!1;A&&(r=!await y5A(t.uuid,A));let a=!1;a=(await H.getFrozenAccountsInfo()).frozenAccounts.some(i=>i===t.uuid);let o=r||a;e.push({uuid:t.uuid,name:t.name,baseAvatarUrl:t.baseAvatarUrl,avatar:t.avatar,type:t.type,disabled:o,vaults:t.vaults.filter(i=>!j.isExcluded(t.uuid,i.uuid)&&i.type!==xA.Vault.TypeManagedApplications).map(i=>({uuid:i.uuid,name:i.name,baseAvatarUrl:i.baseAvatarUrl,avatar:i.avatar}))})}return e}async function lXA(A,j){let e=A.find(r=>j&&r.uuid===j.accountUuid),t=e?e.vaults.find(r=>j&&r.uuid===j.vaultUuid):void 0;if(e&&t){let r=[{icon:await r0(e.baseAvatarUrl,e.uuid,e.avatar,e.type),text:e.name},{icon:await Gv(t.baseAvatarUrl,e.uuid,t.avatar),text:t.name}];return{elements:await iXA(A,j),selectedOption:r}}else return{elements:await iXA(A,void 0),selectedOption:void 0}}async function iXA(A,j){A.sort((t,r)=>t.disabled>=r.disabled?1:-1);let e=[];for(let t of A)if(t.vaults.length!==0){e.length>0&&e.push({type:"separator",data:{id:`separator-${t.uuid}`}}),e.push({type:"header",data:{id:`header-${t.uuid}`,label:t.name.toUpperCase()}});for(let r of t.vaults.filter(a=>!um(a))){let a=j&&j.accountUuid===t.uuid&&j.vaultUuid===r.uuid;e.push({type:"option",data:{id:`${t.uuid}-${r.uuid}`,icon:await Gv(r.baseAvatarUrl,t.uuid,r.avatar),label:r.name,state:a?"selected":t.disabled?"disabled":"enabled"}})}}return e}async function cXA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");let t=await jA.getEmailAliasSessionStatus(e.id),r=await p7(t),a=await jA.saveManagerStatus(e);return Hv(e,r,a,!0)}async function dXA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");let{itemUuid:t,vaultUuid:r}=i7(A.data.id),a=await Br(t,r);if(!a)throw new q.LoggableError({errorClass:p`SaveDialogHandleUpdateItemView`,message:p`Could not load selected item.`});let n=await jA.saveManagerStatus(e);return Z8(e,a,n,!0)}async function kXA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");let[t,r]=A.data.split("-"),a={accountUuid:t,vaultUuid:r},n=await jA.saveManagerStatus(e).catch(fv({msg:"Failed to get save session status",logRootError:!0})),o;(!n.vaultSelector.saveLocation||a.accountUuid!==n.vaultSelector.saveLocation?.accountUuid)&&(o=await zK(a.accountUuid,n.isSignInWith).catch(fv({msg:"Failed to get related item data"})));let i=await jA.saveManagerAction({type:"vault-selector",content:{tabInfo:{tabId:e.id,tabUrl:e.unparsedUrl},saveLocation:a,relatedData:o}}).catch(fv({msg:"Failed to update vault selection in save session",logRootError:!0}));if(i.type!=="vault-selector")throw new Error("Invalid response type.");let s;try{s=await jA.getEmailAliasSessionStatus(e.id)}catch{}let l=await p7(s);return{vaultSelector:await lXA(l,i.content.vaultSelector),viewModel:i.content.viewModel}}async function uXA(A,j){let e,t=It(j.tab);if(!t)throw new Error("InvalidTab");try{let{type:r,data:a}=A.data,n=await jA.saveManagerStatus(t).catch(fv({msg:"Failed to get save session status",logRootError:!0})),o=await jA.saveManagerAction({type:r,content:{saveValues:a.values,tabInfo:{tabId:t.id,tabUrl:t.unparsedUrl}}}).catch(fv({msg:`Failed to run save manager action ${r}`,logRootError:!0}));switch(e=n.vaultSelector?.saveLocation?.accountUuid,o.type){case"update":return{type:"viewModel",data:o.content};case"save":{let{item:i,isNewItem:s}=o.content,l=q.decode(i,q.json.pipe(LE),{mode:"unsafe_report_only",file:p`background/save-new-dialog/handler.ts`,func:p`handleEditItem`}).unwrap(),c;return s?c=await die(t,n,l):c=await kie(l),await SK(t,c).catch(fv({msg:"Failed to update fastmail"})),n.isSignInWith&&s&&n.vaultSelector.saveLocation&&Cc(n.vaultSelector.saveLocation.accountUuid,NA.UsoTelemetryActions.Linked),n.isShellPlugin&&await la(t.id,{type:"shellPluginsSuccess"}),H0(t,!0),{type:"saved"}}case"vault-selector":case"clear":return{type:"error",data:{message:"Invalid action during update."}};default:te(o)}}catch(r){let a=H.findAccountHandlerByUuid(e??"");return Ze(r)?rj(r):rj(new q.LoggableError({errorClass:p`HandleEditItemError`,message:aj.assertLogSafe(oA("An unexpected error occurred. Please contact support@1password.com")),userUuid:aj.assertLogSafe(a?.accountIdentifier.userUUID??""),stackOverrideError:r instanceof Error?r:void 0})),{type:"error",data:{message:oA("An unexpected error occurred. Please contact support@1password.com")}}}}async function die(A,j,e){let{saveLocation:t}=j.vaultSelector;if(!t)throw console.error("Could not save item, vault selector not configured."),new q.LoggableError({errorClass:p`SaveItemError`,message:p`Item not saved: problem with vault selector.`});let r=ah(t.accountUuid,t.vaultUuid,e);if(r.isErr()){console.error("Error creating item:",r.error);let a=H.findAccountHandlerByUuid(t.accountUuid);throw new q.LoggableError({errorClass:p`SaveItemError`,message:p`Item not saved: problem with item form.`,userUuid:a?.user?.uuid?W(a?.user?.uuid):void 0})}if(zi(A))return I5(A,r.value),r.value;{let a;j.integration===EG.Ramp?a=await lVA(t.accountUuid,r.value):a=await Da(r.value);try{a.templateUuid&&ft("ItemCreate",{template_uuid:IsA.TelemetryString.assertSafeForTelemetry(a.templateUuid),status:"SUCCESS",create_method:"SAVE_DIALOG"},t.accountUuid)}catch{}return a}}async function kie(A){if(!A.uuid)throw new q.LoggableError({errorClass:p`SaveItemError`,message:p`Item not saved: problem with UUID.`});let j=await Br(A.uuid);if(!j)throw new q.LoggableError({errorClass:p`SaveNewError`,message:p`Item not saved: problem finding item.`});let e=Vb(j,A);try{j.overview.b5AccountUUID&&j.templateUuid&&ft("ItemUpdate",{template_uuid:IsA.TelemetryString.assertSafeForTelemetry(j.templateUuid),status:"SUCCESS",update_method:"SAVE_DIALOG"},j.overview.b5AccountUUID)}catch{}return Da(e)}var Hv=async(A,j,e,t)=>{let r=i=>!j.some(s=>!s.disabled&&s.uuid===i.accountUuid&&s.vaults.some(l=>l.uuid===i.vaultUuid)),a,n=e.vaultSelector;if(!n.saveLocation||r(n.saveLocation))try{let[i,s]=H.defaultSavingLocation(),l={accountUuid:i.uuid,vaultUuid:s.uuid};n.saveLocationSuggestion&&n.saveLocationSuggestion.accountUuid!==i.uuid&&!r(n.saveLocationSuggestion)?(a={type:"set",data:{saveLocation:n.saveLocationSuggestion,isDefaultLocation:!1}},n.saveLocation=n.saveLocationSuggestion):r(l)?(a={type:"reset"},n.saveLocation=void 0):(a={type:"set",data:{saveLocation:l,isDefaultLocation:!0}},n.saveLocation=l)}catch{a={type:"reset"},n.saveLocation=void 0,console.error("[Save Dialog] Could not get default saving location, resetting location.")}let o=await jA.saveManagerConfigure(A,a,t?{type:"new"}:void 0,n.saveLocation?await zK(n.saveLocation.accountUuid,e.isSignInWith):void 0);return{inTutorial:zi(A),vaultSelector:await lXA(j,n.saveLocation),viewModel:o}};async function Z8(A,j,e,t){if(!j.overview.b5AccountUUID)throw new q.LoggableError({errorClass:p`createUpdateItemView`,message:p`Attempted to update an item without an associated b5 account.`});let r=await jA.saveManagerConfigure(A,void 0,t?{type:"existing",data:j}:void 0,await zK(j.overview.b5AccountUUID,e.isSignInWith,j));return{itemLocation:await uie(j),viewModel:r}}async function uie(A){if(!A.overview.b5AccountUUID)return[];let j=H.getUnlockedAccountOverviews.find(t=>t.uuid===A.overview.b5AccountUUID);if(!j)return[];let e=j.vaults.find(t=>t.uuid===A.vault.uuid);return e?[{text:j.name,icon:await r0(j.baseAvatarUrl,j.uuid,j.avatar,j.type)},{text:A.vault.name,icon:await Gv(e.baseAvatarUrl,e.accountUuid,e.avatar)}]:[]}var EXA=J(Xn());function pXA(A,j,e,t){if(!chrome.runtime.onMessageExternal)return;let r=Object.keys(e);function a(o){return o?r.indexOf(o)!==-1:!1}function n(o){if(typeof o!="string")return OA(void 0);let i=Od.fromThrowable(JSON.parse,()=>{})(o);if(i.isErr())return OA(void 0);let s=t.decode(i.value);return(0,EXA.isLeft)(s)?OA(void 0):Pj(s.right)}chrome.runtime.onMessageExternal.addListener(function(i,s,l){if(typeof s.id!="string"||!(Array.isArray(A)?A.includes(s.id):A===s.id))return!1;let k=n(i);if(k.isErr())return`${j}`,!1;let u=k.value,m=u.name;if(!a(m))return!1;try{let F=e[m],S=Xm?F({...u,data:u.data??void 0}):_c.then(async()=>F({...u,data:u.data??void 0}));return S instanceof Promise?(S.then(G=>l(G)).catch(G=>{console.error(`Exception while handling external request <${m}> from <${j}>`,G)}),!0):(l(S),!1)}catch(F){return console.error(`Exception while handling external request <${m}> from <${j}>`,F),!1}})}function pie(){return["bfnaelmomeimhlpmgjnjophhpkkoljpa","ghdnndoidmmnfjgddnaogdjcaopnlcdm"]}function mie(){return{buildNumber:parseInt(ui(),10)}}var PsA,P5;async function Bie(A){let{saveRequest:j,type:e}=A.data;for(let r of j.fields)Array.isArray(r.value)&&(r.value=new TextDecoder("utf-8").decode(new Uint8Array(r.value)));let t=await x5A(e,{name:"save-request",data:{data:JSON.stringify(j),urls:[]}});return new Promise(r=>{P5=r,PsA=t?.id})}function mXA(A,j){A!==PsA||!P5||(P5({saved:j}),P5=void 0,PsA=void 0)}pXA(pie(),"Phantom",{hello:mie,"create-item":Bie},gdA);var BXA="/inline/modal/modal.html",OsA="DoNotSaveIn1PasswordAccountUuid",O5="DoNotSaveIn1PasswordVaultUuid",RsA=new WP("privacy-integration-sessions");async function gXA(A,j){return RsA.with(async e=>{let t=await jl(Je);if(!t){console.error("Unable to load login item template in showEnablePrivacyPrompt");return}e.set(A.id,{data:JSON.parse(j),urls:[A.unparsedUrl],itemTemplate:JSON.stringify(t)}),n7(A.id,{name:"privacy-enable-integration",data:void 0})})}async function hXA(A,j){return RsA.with(async e=>{let t=e.get(A.id);if(!t){console.error("Attempted to save a privacy integration item without session.");return}e.delete(A.id);let r=await jA.createItemFromSaveRequest(t);return xKA(j,r)})}function n7(A,j){lj("show-modal",{sessionId:A,type:j},{tabId:A})}async function v5A(A,j){let e=chrome.runtime.getURL(BXA),t=await Te.openTab({url:`${e}#loading`,waitForLoad:!0});if(!t.id){console.error("Tab in showSavePromptInNewTab was missing an ID");return}let r=Om(t.id,e);return j(r),chrome.tabs.update(t.id,{url:`${e}#${A}`}),r}async function vh(A,{accountsFilter:j,includeDontSaveOption:e}={includeDontSaveOption:!1}){let t=await p7(A).then(n=>j?n.filter(o=>j(o.uuid)):n);t.sort((n,o)=>n.disabled>=o.disabled?1:-1);let r=[];e&&r.push({type:"DoNotSave",content:{id:{accountUuid:OsA,vaultUuid:O5},name:oA("Don't Save in 1Password"),icon:{id:"id",sources:[{type:"ThemedIcon",content:{file:pG.Delete}}]}}});for(let n of t){let o=()=>{r.length>0&&r.push({type:"Separator",content:`separator-${n.uuid}`}),r.push({type:"SectionHeader",content:{id:n.uuid,label:n.name.toUpperCase(),accessibilityLabel:n.name}})},i=!1;if(i=(await H.getFrozenAccountsInfo()).frozenAccounts.some(l=>l===n.uuid),n.disabled)o(),A?r.push({type:"Text",content:{id:`${n.uuid}-unlinked`,text:oA("To save an item in this account you need to link it to the previously selected Masked Email account")}}):i&&r.push({type:"Text",content:{id:`${n.uuid}-unlinked`,text:oA("This account is frozen")}});else{let l=n.vaults.filter(c=>!um(c));l.length>0&&o();for(let c of l)r.push({type:"Vault",content:{id:{vaultUuid:c.uuid,accountUuid:n.uuid},accountIcon:await r0(n.baseAvatarUrl,n.uuid,n.avatar,n.type),accountName:n.name,icon:await Gv(c.baseAvatarUrl,n.uuid,c.avatar),name:c.name,accessibilityLabel:c.name}})}}let a;try{let[n,o]=H.defaultSavingLocation();t.some(s=>!s.disabled&&s.uuid===n?.uuid&&s.vaults.some(l=>l.uuid===o?.uuid))&&(a={accountUuid:n.uuid,vaultUuid:o.uuid})}catch{console.error("Could not get default saving location, resetting location.")}return{vaultListElements:r,defaultSuggestedVaultId:a}}async function b5(A,j,e){let t=!1;await _c,t=await jA.saveManagerAction({type:"clear",content:{tabId:A,tabUrl:j}}).then(r=>r.type==="clear"&&r.content).catch(r=>(console.error("Failed to clear save session",r),!1)),t&&mXA(A,e),await RsA.with(async r=>Promise.resolve(r.delete(A)))}function H0(A,j){let e=A.URL();e&&SH(e).toLowerCase()===chrome.runtime.getURL(BXA)?chrome.tabs.remove(A.id):lj("close-modal",void 0,{tabId:A.id}),b5(A.id,void 0,j)}function qXA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");H0(e,!1)}function NVA(A){b5(A,void 0,!1)}async function R5(A){let j=JSON.parse(A),e=await zj.loadItemCache();if(!e)return;let t=e.accountForVaultID(a6(j.vault));if(!t)return;let r=e.vaultWithUUID(j.vault.uuid,t.uuid);if(r){let a=new xA.VaultItem(r);return a.details=j.details,a.localId=-1,a.overview=j.overview,a.templateUuid=j.templateUuid,a}}function I5(A,j){let e=A.id,t=A.URL()?.origin;j.details.fields&&!j.details.fields[0].value?.length&&(j.details.fields[0]={designation:"username",id:"",name:"",type:"T",value:"user.name@example.com"},j.overview.ainfo="user.name@example.com"),(!j.details.password||j.details.password==="")&&j.details.fields?.push({designation:"password",id:"",name:"",type:"P",value:"SecurePass123!"}),j.title="Any Website",(!j.overview.url||j.overview.url==="")&&(j.overview={title:"Any Website",ainfo:"user.name@example.com",url:t,URLs:[{u:t||"",l:"website",m:"default"}],ps:100,pbe:84.24922180175781,pgrng:!0}),je.setItem("tutorial-save",JSON.stringify(j)),Ln({tabId:e,message:{name:"tutorial-save-finished",data:void 0}})}var xXA="/assets/png/brex_vendor_32@2x-UDSNK3PG.png";var vXA="/assets/png/privacy-TJGPEKHB.png";async function GXA(A,j,e,{showRichIcons:t,hasHiddenTemplate:r=!1,iconSize:a=A.templateUuid===iy?128:120}){let n=A.uuid,o=A.vault.uuid,i=A.overview.b5AccountUUID,s=r?"000":A.templateUuid,l=[...A.tags].sort(),c;return s===ea&&(c=await jA.getCreditCardType(A.overview.ainfo)),{id:wm(A),uuid:n,vaultUuid:o,accountUuid:i,version:A.itemVersion,title:A.title,secondary:s===Je?A.overview.ainfo||"\u2013":A.overview.ainfo,formattedSecondary:fXA(A,c),favorite:(A.faveIndex??0)>0,templateUuid:s,urls:SnA(A),action:Gie(A,j,e),trashed:A.state===kA.ItemState.Archived,urlToNakedDomains:A.urlToNakedDomains||{},coreIcon:await Ei(A,a,t),suggested:!1,tags:l,hasCustomIcon:!!(A.overview.icons&&A.overview.icons.detail),isManagedApplication:A.templateUuid==="912"}}function SnA(A){return A.overview.URLs?A.overview.URLs.filter(j=>j.u).map(j=>{let e;switch(j.m){case"host":e=tk.Host;break;case"never":e=tk.Never;break;default:e=tk.Default}return{url:j.u,mode:e}}):[]}var fXA=(A,j)=>{let e=A.overview.ainfo;switch(A.templateUuid){case ea:if(!e)return"";if(j===rc.AmericanExpress&&e.length>10){let t=e.substr(0,4),r=e.substr(e.length-5);return`${t} \u2022\u2022\u2022\u2022\u2022\u2022 ${r}`}if(j===rc.AmericanExpress&&e.length>5)return`\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022\u2022\u2022 ${e.substr(e.length-5)}`;if(e.length>8){let t=e.substr(0,4),r=e.substr(e.length-4);return`${t} \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${r}`}return e.length>4?`\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ${e.substr(e.length-4)}`:e;case ol:return A.createdAt?.toLocaleString(void 0,{year:"numeric",month:"long",day:"numeric"});default:return}};function xie(A,j,e){if(!e)return"";let t=A;if(t.cacheInformation?.provider){let{provider:r,category:a}=t.cacheInformation;return`../images/${r}_${a}_32@2x.png`}else return xA.VaultItem.getRichIconUrl(A,j)}function DsA(A,{title:j,secondary:e,icon:t,designationFilter:r,accessory:a}){let n=JSON.stringify(wm(A));return{name:"entry",data:{id:wc.createUniqueId(),title:j,secondary:e,icon:t,accessory:a,action:{name:"fill-item",data:{itemId:n,designationFilter:r}}}}}async function FXA(A,{showRichIcons:j,iconSize:e=60,isPersonItem:t=!1}){let r=JSON.stringify(wm(A)),a=A.templateUuid??"000",n,o;a===ea&&(n=await jA.getCreditCardType(A.overview.ainfo)),a===Je&&A.overview.passkey?.credentialId&&(o="passkey"),t&&(o="profile");let i=()=>{let c=fXA(A,n)??A.overview.ainfo;return a===Je&&!c&&(c="\u2014"),c},s=!!(A.overview.icons&&A.overview.icons.detail),l={favorite:(A.faveIndex??0)>0,richIconUrl:xie(A,e,j),iconColor:A.uuid?jA.generateRichIconBackgroundColor(A.uuid):"",customIcon:s?r:void 0,templateUuid:a,ccType:n};return DsA(A,{title:A.title,secondary:i(),icon:l,accessory:o})}function bXA(A){return{name:"entry",data:{id:wc.createUniqueId(),title:oA("Use Suggested Password"),secondary:A.password,icon:{templateUuid:ol},action:{name:"fill-generated-password",data:A}}}}function yXA(){return{name:"action",data:{id:wc.createUniqueId(),title:oA("Create SSH Key\u2026"),icon:{templateUuid:Zi},action:{name:"show-ssh-create-dialog",data:void 0}}}}function $XA(){return{name:"action",data:{id:wc.createUniqueId(),title:oA("Create Privacy Card\u2026"),icon:{richIconUrl:vXA},action:{name:"show-privacy-dialog",data:void 0}}}}function wXA(){return{name:"action",data:{id:wc.createUniqueId(),title:oA("Create Masked Email\u2026"),action:{name:"show-email-alias-dialog",data:void 0}}}}function IXA(){return{name:"action",data:{id:wc.createUniqueId(),title:oA("Create Brex vendor card\u2026"),icon:{richIconUrl:xXA},action:{name:"show-brex-create-dialog",data:void 0}}}}function PXA(){return{name:"action",data:{id:wc.createUniqueId(),title:oA("Fill Masked Email\u2026"),action:{name:"fill-existing-alias",data:void 0}}}}function BzA(A,j){return DCA({uuid:A.uuid,title:A.localizedSingularName(),pluralTitle:A.localizedPluralName(),hasHiddenTemplate:A.hasHiddenTemplate,disableCreation:j,hasItems:A.hasItems,localizedStrings:A.template?.attrs.localizedStrings??{}})}var vie=/^([a-z]*):\/\//;function Gie(A,j,e){let t=j?A.urlToNakedDomains&&Object.values(A.urlToNakedDomains).includes(j):!1,r;if(A.templateUuid===Je&&A.url){let a=vie.exec(A.url.toLowerCase())?.[1];r=!a||a==="http"||a==="https"?t?rn.Autofill:rn.Go:null}else j&&(A.templateUuid===ea||A.templateUuid===O6||A.templateUuid===Zi)?r=rn.Autofill:r=null;return e&&r&&r===rn.Autofill&&(r=null),e&&r&&r===rn.Go&&(r=rn.OpenURL),r}var fie=A=>{switch(A?.cacheInformation?.provider){case"brex":return!0;default:return!1}};function wm(A){return fie(A)&&A.cacheInformation?.provider==="brex"?{type:"cachedItem",data:{type:"brex",id:A.uuid}}:si(A)?{type:"managedCredential",data:{uuid:A.uuid}}:{type:"databaseId",data:c8(A)}}function a6(A){if(typeof A.localId!="number")throw new Error("Vault was missing localId in getLocalIdForVault");return A.localId}function c8(A){if(typeof A.localId!="number")throw new Error("Item was missing localId in getLocalIdForItem");return A.localId}function OE(A){if(typeof A.overview.b5AccountUUID!="string")throw new Error("Item was missing b5AccountUUID in getB5AccountUUIDForItem");return A.overview.b5AccountUUID}function _M(A){if(typeof A.id!="number")throw new Error("Account was missing id in getIdForServerAccount");return A.id}function _MA(A){if(typeof A.id!="number")throw new Error("Vault was missing id in getIdForServerVault");return A.id}function NK(){return{id:"requires-1password-8-alert",title:oA("1Password 8 Required"),text:oA("Creating and editing SSH keys requires 1Password 8."),primaryAction:{id:"requires-op8-id",label:oA("Ok"),destructive:!1,action:{type:"Ok",content:void 0}}}}async function OXA(){let A=je.getItem("tutorial-save");if(A){let j=await R5(A);if(j){let e={richIconUrl:"../images/tutorial_globe_logo.svg",iconColor:"",templateUuid:Je};return[{name:"entry",data:{id:wc.createUniqueId(),title:j.overview.title,secondary:j.overview.ainfo,icon:e,action:{name:"fill-tutorial-item",data:void 0}}}]}}return[]}function Lo(A){return JSON.stringify({overview:A.overview,details:A.details,createdAt:A.createdAt,updatedAt:A.updatedAt,faveIndex:A.faveIndex,trashed:A.state,templateUuid:A.templateUuid,uuid:A.uuid})}function Fie(A){return JSON.stringify({overview:A.overview,createdAt:A.createdAt,updatedAt:A.updatedAt,faveIndex:A.faveIndex,trashed:A.state,templateUuid:A.templateUuid,uuid:A.uuid})}function RXA(A,j){return{itemOverviewJsonString:Fie(A),vaultId:1,vaultUuid:A.vault.uuid,accountId:0,accountUuid:OE(A),localId:j}}async function DXA(A){let j={};if(!A?.details?.sections)return j;let e=await zj.loadItemCache();if(!e)return j;for(let t of A.details.sections)if(t?.fields){for(let r of t.fields)if(r?.k==="reference"){let a=r.v,n=e.itemWithUUID(a);n&&n.localId&&(j[a]=RXA(n,n.localId))}else if(r?.k==="ssoLogin"&&r.v){let a=r.v.item,n=e.itemWithUUID(a?.itemUuid);n&&n.localId&&(j[a.itemUuid]=RXA(n,n.localId))}}return j}function TXA(A){let j=[];function e(t,r){let a=r.documentId&&r.signingKey;j.push({position:t,status:a?py.Available:py.Missing})}return A.details?.documentAttributes&&e({type:"Root",content:void 0},A.details.documentAttributes),A.details?.sections?.forEach(t=>{t.fields?.forEach(r=>{r.k==="file"&&e({type:"Field",content:{sectionId:t.name,fieldId:r.n}},r.v)})}),j}var jB=J(tA());var D5=p`background/core.ts`,LE=jB.intersection([jB.partial({uuid:jB.string}),jB.type({templateUuid:jB.string,overview:xA.VaultItemOverview,details:xA.VaultItemDetails})],"CoreItem");async function bie(){return(await browser.windows.getCurrent()).type==="popup"}var TsA=class{wasmIsInitialized;richIconCache=new PH;constructor(){this.wasmIsInitialized=!1}async init(j){return fD()||console.error("\u26D4 WebAssembly.instantiate not found. Is WebAssembly supported by your browser and enabled?"),$5("wasm-init"),$5("wasm-init-import"),await OCA(RCA),this.wasmIsInitialized=!0,fsA("wasm-init-import"),$5("wasm-init-ffi"),fsA("wasm-init"),this.setLocale(j)}ensureWasmIsInitialized(){if(!this.wasmIsInitialized)throw new Error("WASM is not initialized, unable to make core call.")}async setLocale(j){return this.sendCoreMessage({name:"set-core-locale",data:j})}async createItem(j,e){let t=await this.sendCoreMessage({name:"create-item",data:{collectedPageDetails:j,itemTemplate:JSON.stringify(e)}});return q.decode(t.item,q.json.pipe(LE),{mode:"unsafe_report_only",file:D5,func:p`createItem`}).unwrap()}async analyzePage(j,e,t){return this.sendCoreMessage({name:"analyze-page",data:{collectedPageDetails:j,mode:e?ky.ActiveFieldOnly:ky.AllFields,integrations:t,debugOptions:{sshKeyAnalysis:!0,enhancedIdentityAnalysis:!0}}})}async fieldValueByIdentifier(j,e){let t;try{t=j.templateUuid?await jl(j.templateUuid):void 0}catch{console.warn("Unable to load template for item.")}let r=await this.sendCoreMessage({name:"field-value-by-identifier",data:{item:Lo(j),fieldIdentifier:e,itemTemplateJson:t?JSON.stringify(t):void 0}});return r?Pj(r):OA(void 0)}async unOpaqueFilePosition(j){return this.sendCoreMessage({name:"un-opaque-file-position",data:{filePosition:j}})}async clearFillSession(j){return this.sendCoreMessage({name:"clear-fill-session",data:j})}async onLock(){try{this.ensureWasmIsInitialized()}catch{console.error("Calling WASM onLock failed because WASM wasn't initialized")}try{await FCA()}catch(j){console.error("Calling WASM onLock failed:",j)}}async fill(j,e,t){return this.sendCoreMessage({name:"fill",data:{collectedPageDetails:e,fillObject:j,postFill:t?.postFill}})}async fillItem(j,e,t){let r={collectedPageDetails:e,item:Lo(j),additionalFillTargets:[],postFill:t?.postFill,designationFilter:t?.designationFilter};return this.sendCoreMessage({name:"fill-item",data:r})}async nextFill(j,e,t,r){return this.sendCoreMessage({name:"next-fill",data:{collectedPageDetails:e,item:Lo(j),itemReference:this.itemToReference(j),postFill:r?.postFill,sessionAssociation:{tabId:t.id,tabUrl:t.unparsedUrl}}})}async fillSessionStatus(j,e){return this.sendCoreMessage({name:"fill-session-status",data:{tabId:j,tabUrl:e}})}async advanceFillSession(j,e){return this.sendCoreMessage({name:"advance-fill-session",data:{sessionAssociation:{tabId:j.id,tabUrl:j.unparsedUrl},state:e}})}itemToReference(j){return{itemUuid:j.uuid,vaultUuid:j.vault.uuid,accountUuid:OE(j)}}nakedDomainForUrl(j){return j?(this.ensureWasmIsInitialized(),GCA(j)):""}async nakedDomainForUrls(j){return this.ensureWasmIsInitialized(),this.sendCoreMessage({name:"naked-domain-for-url-strings",data:j})}async serviceIntegrationForUrl(j){return this.sendCoreMessage({name:"service-integration-for-url",data:j})}async startFillSession(j,e,t){let r;switch(e.type){case"item":r={type:"item",data:{item:Lo(e.data),itemReference:this.itemToReference(e.data)}};break;case"trelica":r={type:"trelica",data:e.data};break;default:te(e)}return this.sendCoreMessage({name:"start-fill-session",data:{source:r,sessionAssociation:{tabId:j.id,tabUrl:j.unparsedUrl},signInWithItem:t?.signInWithProviderItem,skipSignInWithCheck:t?.skipSignInWithCheck,universalSignOnEnabled:ZA.anyAccountHasFlag("b5x-universal-sign-on")}})}async createPrivacyCard(j){return this.sendCoreMessage({name:"create-privacy-card",data:j})}async getPrivacyFundingAccounts(j){return this.sendCoreMessage({name:"get-funding-accounts",data:j})}async createItemFromSaveRequest(j){let e=await this.sendCoreMessage({name:"create-item-from-save-request",data:j});return q.decode(e.item,q.json.pipe(LE),{mode:"unsafe_report_only",file:D5,func:p`createItemFromSaveRequest`}).unwrap()}async saveUrlsFromSaveRequest(j){return await this.sendCoreMessage({name:"save-urls-from-save-request",data:j})}async validatePrivacyCardParams(j){return this.sendCoreMessage({name:"validate-privacy-card-params",data:j})}async generatePassword(j){return this.sendCoreMessage({name:"generate-password",data:j})}async generateSuggestedPassword(j){return this.sendCoreMessage({name:"generate-suggested-password",data:j})}async compareWatchTowerDiff(j,e){return this.sendCoreMessage({name:"watchtower-diff",data:{existingCompromisedWebsites:j,newCompromisedWebsites:e}})}async handleWatchtowerAction(j,e){let t=await this.sendCoreMessage({name:"handle-watchtower-action",data:{action:j,item:Lo(e)}});return q.decode(t.item,q.json.pipe(LE),{mode:"unsafe_report_only",file:D5,func:p`handleWatchtowerItem`}).unwrap()}async generateOneTimePasswordFromUrl(j){return(await this.sendCoreMessage({name:"generate-totp",data:{url:j}})).oneTimePassword}generateRichIconBackgroundColor(j){this.ensureWasmIsInitialized();let e=this.richIconCache.get(j);if(e)return e;let t=vCA(j);return this.richIconCache.set(j,t),t}async generateSharableItemLink(j){return(await this.sendCoreMessage({name:"generate-shareable-item-link",data:j})).url}async getCreditCardType(j){try{return await this.sendCoreMessage({name:"classify-credit-card-number",data:j})}catch{return}}async concealCreditCardNumber(j){return this.sendCoreMessage({name:"conceal-credit-card-number",data:j})}async newCompromisedWebsiteItems(j){return this.sendCoreMessage({name:"new-compromised-website-items",data:j})}async parseMarkdown(j){return this.sendCoreMessage({name:"parse-markdown",data:j})}async editItemInit(j){return this.sendCoreMessage({name:"edit-item-init",data:j})}async editItemSave(j){return this.sendCoreMessage({name:"edit-item-save",data:j})}async editItemUpdate(j){return this.sendCoreMessage({name:"edit-item-update",data:j})}async edititemCancel(j){return this.sendCoreMessage({name:"edit-item-cancel",data:j})}async edititemCancelAll(){return this.sendCoreMessage({name:"edit-item-cancel-all",data:void 0})}async editItemFilter(j){return this.sendCoreMessage({name:"edit-item-filter",data:j})}async saveManagerCreate(j,e,t,r,a,n,o,i){return this.sendCoreMessage({name:"save-manager-create",data:{tabInfo:{tabId:j.id,tabUrl:j.unparsedUrl},clearOnNavigate:e,isTutorial:zi(j),itemTemplate:JSON.stringify(t),aliasData:r,initializationData:a,initializationOption:n,includeRichIcons:o,locale:i}})}async saveManagerStatus({id:j,unparsedUrl:e}){return this.sendCoreMessage({name:"save-manager-status",data:{tabInfo:{tabId:j,tabUrl:e}}})}async saveManagerConfigure(j,e,t,r){let a;if(t)switch(t.type){case"new":a={type:"new"};break;case"existing":if(!t.data.overview.b5AccountUUID)throw new q.LoggableError({errorClass:p`saveManagerConfigure`,message:p`Attempted to update an item without an associated b5 account.`});a={type:"existing",data:{item:Lo(t.data),existingAccountUuid:t.data.overview.b5AccountUUID,existingVaultUuid:t.data.vault.uuid}};break;default:te(t)}return this.sendCoreMessage({name:"save-manager-configure",data:{tabInfo:{tabId:j.id,tabUrl:j.unparsedUrl},vaultSelector:e,item:a,relatedItemData:r??{usernameSuggestions:[],tagSuggestions:[],relatedItems:[],watchtowerAccounts:[]}}})}async saveManagerAction(j){return await this.sendCoreMessage({name:"save-manager-action",data:j})}async saveManagerMatchingItems({id:j,unparsedUrl:e},t,r){return this.sendCoreMessage({name:"save-manager-matching-items",data:{tabInfo:{tabId:j,tabUrl:e},items:t.map(a=>({item:Lo(a),isShellPlugin:!1,rowId:`${a.localId}`})),templateUuid:r}})}async autoSaveMatchingItems(j,e,t){return this.sendCoreMessage({name:"auto-save-matching-items",data:{existingItems:j.map(r=>({item:Lo(r)})),saveObject:e,templateUuid:t}})}async autosubmitDetectElements(j){return this.sendCoreMessage({name:"autosubmit-detect-elements",data:j})}async createSaveObject(j,e,t){return this.sendCoreMessage({name:"create-save-object",data:{templateUuid:j,collectedPageDetails:e,generatePasswordDetails:t}})}async mergeSaveObjectWithItem(j,e,t,r){let a=await this.sendCoreMessage({name:"merge-save-object-with-item",data:{template:JSON.stringify(j),item:e?{item:Lo(e)}:void 0,saveObject:t,aliasData:r}});return q.decode(a.item,q.json.pipe(LE),{mode:"unsafe_report_only",file:D5,func:p`createItem`}).unwrap()}parseVaultType(j){switch(j){case"P":return b7.Personal;case"E":return b7.Everyone;case"T":return b7.Transfer;case"U":return b7.UserCreated;case"S":return b7.System;case"G":return b7.GeneratedPasswords;default:return b7.Unsupported}}parseAccountType(j){switch(j){case"I":return jp.Individual;case"F":return jp.Family;case"B":return jp.Team;default:return jp.Unsupported}}parseAccountState(j){switch(j){case"R":return F7.Registered;case"A":return F7.Active;case"S":return F7.Suspended;case"D":return F7.Deleted;case"X":return F7.Purging;case"Z":return F7.Purged;default:return F7.Unsupported}}getB5xBrowser(){return XO.Chrome}buildPermissionBundle(j,e,t){let r=cy.Active;return e&&(r=cy.Frozen),{vaultAcls:j,userState:t,billingStatus:r}}async getAccountIcon(j,e,t,r){let a={base_avatar_url:j,account_uuid:e,avatar_filename:t,account_type:this.parseAccountType(r)};return this.sendCoreMessage({name:"get-account-icon",data:a})}async getVaultIcon(j,e,t){let r={base_avatar_url:j,account_uuid:e,avatar_filename:t};return this.sendCoreMessage({name:"get-vault-icon",data:r})}async inferBestTitle(j,e){return this.sendCoreMessage({name:"infer-best-title",data:{title:j,url:e}})}async getAppleChangePasswordUrl(j){return this.sendCoreMessage({name:"get-apple-change-password-url",data:j})}async getItemDetails(j,e,t,r,a,n,o,i,s,l,c,k,u,m,F,S){let G;try{G=j.templateUuid?await jl(j.templateUuid):void 0}catch{console.warn("Unable to load template for item.")}let x=await XM(j);return x.isErr()&&console.warn(`Unexpected error loading custom icon: ${x.error.type}`),await this.sendCoreMessage({name:"get-item-details",data:{item:Lo(j),vaultInfo:e,accountInfo:t,itemTemplateJson:G?JSON.stringify(G):void 0,downloadRichIcons:o,customIconUrl:x.unwrapOr(void 0),relatedItemOverviews:await DXA(j),fileStatuses:TXA(j),permissionBundle:r,watchtowerData:a,aliasStates:l,activeTabUnparsedUrl:n,revealedElementIds:i,devtoolsEnabled:s,isInNewWindow:await bie(),browser:this.getB5xBrowser(),includeTimestamps:!0,canAutofill:!0,includeLargeType:!0,integrationInformation:S,managesMultipleAccounts:c,familyChildAccountsEnabled:k,isDateTimeLocalizationEnabled:u,autosubmitEnabled:m,isManagedCredential:F}})}async getLargeTypeWithClientFormattedString(j,e){return this.sendCoreMessage({name:"large-type",data:{type:"withClientFormattedString",content:{item:Lo(j),clientFormattedString:e}}})}async getLargeTypeWithFieldIdentifier(j,e){let t;try{t=j.templateUuid?await jl(j.templateUuid):void 0}catch{console.warn("Unable to load template for item.")}return this.sendCoreMessage({name:"large-type",data:{type:"withFieldIdentifier",content:{item:Lo(j),fieldIdentifier:e,itemTemplateJson:t?JSON.stringify(t):void 0}}})}async refreshTotp(j){return this.sendCoreMessage({name:"refresh-totp",data:{...j,includeLargeType:!0}})}async passwordGeneratorViewModel(j){return this.sendCoreMessage({name:"password-generator-view-model",data:j})}async sendCoreMessage(j){this.ensureWasmIsInitialized();let e=await qCA(JSON.stringify(j));return yie(JSON.parse(e))}async startEmailAliasSession(j,e,t){return this.sendCoreMessage({name:"start-email-alias-session",data:{tabId:j.id,tabUrl:j.unparsedUrl,accountUuid:e,fastmailAccountId:t}})}async getEmailAliasSessionStatus(j,e){return this.sendCoreMessage({name:"get-email-alias-session-status",data:{tabId:j,tabUrl:e}})}async generateEmailAlias(j,e){return this.sendCoreMessage({name:"generate-email-alias",data:{tabId:j.id,tabUrl:j.unparsedUrl,accessToken:e}})}async endEmailAliasSession(j,e){return this.sendCoreMessage({name:"end-email-alias-session",data:{tabId:j,accessToken:e}})}async enableEmailAliasSession(j,e){return this.sendCoreMessage({name:"enable-email-alias-session",data:{tabId:j.id,tabUrl:j.unparsedUrl,accessToken:e}})}async getEmailAliasAccountName(j,e){return this.sendCoreMessage({name:"get-email-alias-account-name",data:{accessToken:j,accountId:e}})}async updateEmailAlias(j,e,t){return this.sendCoreMessage({name:"update-email-alias",data:{accessToken:j,aliasId:e,updateObject:t}})}async getEmailAliasState(j,e){return this.sendCoreMessage({name:"get-email-alias-state",data:{accessToken:j,aliasId:e}})}async getRichIconForUrl(j,e,t){return this.sendCoreMessage({name:"get-rich-icon-for-website",data:{url:j,title:e,richIcons:t}})}async getCurrentBrexUser(j){return this.sendCoreMessage({name:"get-current-brex-user",data:j})}async getAllCardsForBrexUser(j){return this.sendCoreMessage({name:"get-all-cards-for-brex-user",data:j})}async createBrexVendorCardForUser(j){return this.sendCoreMessage({name:"create-brex-vendor-card-for-user",data:j})}async getOauthAccessToken(j){return this.sendCoreMessage({name:"get-oauth-access-token",data:j})}async enrollTrustedDevice(j){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");await xCA(j.useCase,j.setupCode,j.email,j.signInAddress,j.enrollmentUuid,j.credentialBundle,j.sendMsgA,j.recvMsgB,j.sendAuthA,j.recvAuthB,j.sendCredentials)}async createSshKeyItem(j){return this.sendCoreMessage({name:"create-ssh-key-item",data:j})}async signInWithEvent(j){return this.sendCoreMessage({name:"sign-in-with-event",data:j})}async signInWithProviderConfig(j){return this.sendCoreMessage({name:"sign-in-with-provider-config",data:j})}async signInWithUrlToProvider(j){return this.sendCoreMessage({name:"sign-in-with-url-to-provider",data:j})}async webAuthnRegister(j){return this.sendCoreMessage({name:"web-authn-register",data:j})}async webAuthnLogin(j){return this.sendCoreMessage({name:"web-authn-login",data:j})}async webAuthnRPValidate(j){return this.sendCoreMessage({name:"web-authn-validate-relying-party",data:j})}async calculateEffectivePolicies(j){return this.sendCoreMessage({name:"calculate-effective-policies",data:j})}getSignInUrl(j){return j?(this.ensureWasmIsInitialized(),fCA(j)):""}generateX25519Key(){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return TH.generate()}openNaClJwk(j,e,t){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return bCA(j,e,t)}lessSafeOpenNaCl(j,e,t){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return yCA(j,e,t)}sealNaClJwk(j,e){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return $CA(j,e)}lessSafeSealNaCl(j,e){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return wCA(j,e)}p256Sign(j,e){if(!this.wasmIsInitialized)throw new Error("WASM is not loaded, unable to make core call.");return ICA(j,e)}};function yie(A){if(!A)throw new Error("\u26D4 Unable to handle response from op-wasm-b5x, input was falsy");let{result:j,error:e}=A;if(e)throw new Error(`\u26D4 Core error code: ${typeof e=="string"?e:JSON.stringify(e)}`);return j}var jA=new TsA;import CXA from"/assets/js/messages.i18n-T6ZOGRBL.js";var CsA=new rt("\u{1F527} Popup config");function WA(){let A,j=lk;try{A=JSON.parse(vj.getItem(JL)??"{}")}catch{CsA.warn("Unable to retrieve the config from local storage"),A=JSON.parse("{}")}finally{j={...lk,..._XA(A)},j!==A&&Fh(j)}return j}function hn(A){let j=WA();for(let[e,t]of Object.entries(A))j[e]=t;return Object.keys(A).includes("defaultPasswordManager")&&typeof A.defaultPasswordManager=="boolean"&&Iie(A.defaultPasswordManager),Fh(j),j}function Fh(A){try{vj.setItem(JL,JSON.stringify(_XA(A)))}catch{CsA.warn("Unable to save the config to local storage")}}function _XA(A){let j={};function e(t){j[t]=lk[t]}try{for(let t in A)if(Object.prototype.hasOwnProperty.call(A,t)){if(typeof A[t]!=typeof lk[t]){e(t);continue}switch(j[t]=A[t],t){case"autoLockMinutes":if(A[t]===Gi)break;if(A[t]<RD||A[t]>VL){e(t);break}j[t]=Math.max(0,Math.min(A.autoLockMinutes,VL));break;case"defaultPassGenType":lk.generator.find(r=>r.passwordType===A[t])||e(t);break;case"generator":A.generator.filter(r=>!lk.generator.find(a=>r.passwordType===a.passwordType)).length!==0&&e(t),A.generator.length!==lk.generator.length&&e(t);break;case"language":A.language in CXA||e(t);break}}return j}catch{return CsA.warn("Unable to validate the config properties"),lk}}var SXA,$ie,HXA;async function MXA(){let A=await wie();return SXA=A.buildnum+"",$ie=A.builddate,HXA=A.buildchannel,WA()}function ui(){return SXA}function Mv(){return HXA}async function wie(){let A=new Headers({"Content-Type":"text/plain; charset=x-user-defined"});return new Promise(j=>{fetch(chrome.runtime.getURL("./build.info"),{headers:A}).then(e=>j(e.json()))})}var KXA="all-vaults";function mr(){let A=vj.getItem(KXA);A||(A="{}");let j=JSON.parse(A);return new FH(j)}function gN(A){vj.setItem(KXA,JSON.stringify(A))}async function yMA(){return new Promise(A=>{ve()&&A(!1),chrome.privacy.services.passwordSavingEnabled.get({},j=>{j.value?A(!0):A(!1)})})}function Iie(A){ve()||(typeof chrome.privacy.services.autofillEnabled<"u"&&(A?chrome.privacy.services.autofillEnabled.set({value:!1}):(chrome.privacy.services.autofillEnabled.clear({}),typeof chrome.privacy.services.autofillCreditCardEnabled<"u"&&chrome.privacy.services.autofillCreditCardEnabled.clear({}),typeof chrome.privacy.services.autofillAddressEnabled<"u"&&chrome.privacy.services.autofillAddressEnabled.clear({}))),typeof chrome.privacy.services.passwordSavingEnabled<"u"&&(A?chrome.privacy.services.passwordSavingEnabled.set({value:!1}):chrome.privacy.services.passwordSavingEnabled.clear({})))}async function i9A(A){let j=hn(A);A.useSharedLockState!==void 0&&RzA(j.useSharedLockState),A.slsChannel!==void 0&&DzA(),(A.autoLockEnabled!==void 0||A.autoLockMinutes!==void 0||A.autoLockOnDeviceSleep!==void 0)&&(j.autoLockEnabled&&!H.allAccountHandlersAreLocked?(await Jl.startAutoLockMonitor(),Jl.lockMonitor?.updateAutoLockSettings(j.autoLockMinutes,j.autoLockOnDeviceSleep)):Jl.stopAutoLockMonitor()),j.languageChanged&&(oA.set({locale:j.language,messages:CXA}),await jA.setLocale(j.language),H.runSyncerForAllAccounts(),lj("language-changed",j.language)),A.appTheme!==void 0&&lj("app-theme-changed",{appTheme:A.appTheme}),A.defaultItemList!==void 0&&Xg()}function _sA(A){let j=WA();j.ignoreAccounts.push(A),Fh(j)}function SsA(A){return WA().ignoreAccounts.includes(A)}var jO=class{_desktopConnectionManager;get desktopConnectionManager(){return this._desktopConnectionManager}initializeDesktopConnectionManager(){this._desktopConnectionManager=new hK({hasAccounts:H.hasAccountHandlers,useSharedLockState:WA().useSharedLockState,browser:"chromium"})}getDesktopAppState(){return this._desktopConnectionManager?this._desktopConnectionManager.getState():{type:"Disconnected",latestReason:0,invalidBrowserState:2,hasEverConnectedToDesktopApp:Ui()}}},re=Re.resolve(jO);var oO=J(mJA()),Gle="https://4f3669ef553b434e86845ecd15a92e28:acaac9ba43f34f61917ae843f639604c@b5x-sentry.1passwordservices.com/4505427098533888";function BJA(){return Mv()}var fle;function Ub(){if(q.sentry.isInitialized()||vt()&&!Nb())return;let A=BJA(),j=A==="stable"?.5:1;q.sentry.init({appVersion:`b5x@${$E()}-${Mv()}`,dsn:Gle,environment:A,sampleRate:j})}var rj=async A=>{if(vt()&&!Nb()||BJA()==="local"&&(console.error(`${A.loggableName.str}: ${A.loggableMessage.str}`),!K6().sendLocalSentryEnabled()))return;if(A.metaData=(0,oO.default)({},fle,A.metaData),!q.config.getDevice()){let t=await Te.getBrowserInfo(),r=q.sentry.assertLogSafeAndNormalizeDevice({uuid:"",clientName:snA,clientVersion:ui(),name:t.name,model:t.version,osName:t.osName,osVersion:t.osVersion,userAgent:navigator.userAgent});A.metaData=(0,oO.default)({},r,A.metaData)}let j={connectivityStatus:aj.assertLogSafe(Ft.getPossiblyOutdatedConnectivityStatus())};re.desktopConnectionManager&&(j.ophConnection=aj.assertLogSafe(re.desktopConnectionManager.getState().type)),j.hasEverConnectedToOph=$8(Ui()),A.tags=(0,oO.default)({},j,A.tags);let e=A.userUuid?H.findAccountHandlerByUser(A.userUuid.str):H.numberOfAccountHandlers===1?H.getAccountHandlers[0]:void 0;if(e){let t={user:{sessionId:aj.assertLogSafe(e.client?.CTX?.session.sessionUuid??""),authMethods:aj.assertLogSafe(JSON.stringify(e.serveraccount.authMethods.map(r=>r.type).sort()))}};A.metaData=(0,oO.default)({},t,A.metaData)}q.reportError(A)};function en(A,j,e,t){Ze(A)?(t&&(A.tags=A.tags?{...A.tags,...t}:t),rj(A),console.error(j,A)):(rj(new q.LoggableError({errorClass:p`Error`,message:j,userUuid:e,stackOverrideError:A instanceof Error?A:void 0,tags:t&&Ze(A)&&A.tags?{...A.tags,...t}:t})),console.error(j))}var WsA="B5WEB_BACKUP_",QsA="user_",YsA="deviceKey_";var ZsA=A=>A.replace(QsA,""),L5=A=>`${QsA}${A}`,gJA=A=>{let[j,e]=A.replace(YsA,"").split("_");return{accountUuid:j,userUuid:e}},hJA=(A,j)=>`${YsA}${A}_${j}`,AlA=A=>{let j=JSON.parse(A);if(j.accountUuid)return j.accountUuid};var jlA=(A,j)=>{vj.setItem(WsA+j,xaA.encode(A))},elA=A=>{let j=vj.getItem(WsA+A);return cj(j,xaA).unwrap()},qJA=A=>{let j=A.signinAddress,e=A.uuid,t=A.userUUID;try{let r=new URL(j).host,a=elA(r),n=L5(t);a.userInfo[n]&&delete a.userInfo[n];let o=hJA(e,t);a.deviceKeys[o]&&delete a.deviceKeys[o],a.lastUserUuid===t&&(a.lastUserUuid=void 0),jlA(a,r)}catch{console.error("Failed to remove backup credentials for account"),rj(new xe({errorClass:p`removeB5WebBackupCredentialsForAccount`,message:p`Failed to remove backup credentials for account`}))}};function tlA(){H.hasAccountHandlers||hn({defaultPasswordManager:!1})}var xJA=J(iK());var zv=class{_accountHandlers;constructor(){this._accountHandlers=[]}get getAccountHandlers(){return this._accountHandlers}setAccountHandlers(j){this._accountHandlers=j}addAccountHandler(...j){return this._accountHandlers.push(...j)}get hasAccountHandlers(){return this._accountHandlers.length>0}get numberOfAccountHandlers(){return this._accountHandlers.length}get allAccountHandlersAreLocked(){return this._accountHandlers.every(j=>j.isLocked)}get anyAccountIsSyncing(){return this._accountHandlers.some(j=>j.syncer?.isRunning)}get allAccountHandlersHasUserSuspended(){return this.hasAccountHandlers&&this._accountHandlers.every(j=>j.isUserSuspended)}async lockAccountHandler(j){let e=this._accountHandlers.find(t=>t.uuid===j);if(e)return e.lock(!1)}findAccountHandlerByUuid(j,e){return this._accountHandlers.find(D0(j,e))}findAccountHandlerByUser(j){return this._accountHandlers.find(e=>e.user?.uuid===j)}findAccountHandlerByID(j){return this._accountHandlers.find(e=>e.serveraccount.id===j)}hasAccountHandler(j){return!!this.findAccountHandlerByUuid(j)}accountIsUnlocked(j){let e=this._accountHandlers.find(D0(j));return!!e&&e.isUnlocked}get getUnlockedAccountOverviews(){let j=[];for(let e of this._accountHandlers){if(e.isLocked)continue;let t=e.createAccountVaultOverview();j.push(t)}return j}get signedInAccounts(){let j=[];for(let e of this._accountHandlers)e.isUnlocked&&j.push(new xA.Account(e.serveraccount));return j}get accountHandlersForSignedInAccounts(){return this._accountHandlers.filter(j=>j.isUnlocked)}get anyAccountHasUnseenDeviceEnrollments(){return!this.hasAccountHandlers||this.allAccountHandlersAreLocked?!1:this._accountHandlers.some(j=>j.hasUnseenDeviceEnrollments)}markAllDeviceEnrollmentsSeen(){if(!(!this.hasAccountHandlers||this.allAccountHandlersAreLocked))for(let j of this._accountHandlers)j.markAccountDeviceEnrollmentsSeen()}async getPersonItemsForAccounts(){let j=[];for(let e of this._accountHandlers){if(e.isLocked||e.mustMigrateAuth)continue;let t=await e.loadPersonItem().catch(r=>{en(r,p`Failed to load person item`,e.user?.uuid!==void 0?q.logsafe.assertLogSafe(e.user.uuid):void 0)});t&&j.push(t)}return j}async getFrozenAccountsInfo(){let j=mr(),e=this._accountHandlers.filter(i=>i.isUnlocked),t=await Promise.all(e.map(async i=>i.serveraccount.id===void 0?Promise.resolve(null):SA.getDatabase().getAllVaultsForAccount(i.serveraccount.id))),r=e.filter((i,s)=>{let l=t[s];return l===null?!1:l.some(c=>![xA.Vault.TypeGeneratedPasswords,xA.Vault.TypeSystem].includes(c.type)&&!j.isExcluded(i.uuid,c.uuid))}),a=r.filter(i=>i.serveraccount.billingStatus==="F"),n=a.map(i=>i.uuid),o=a.length>0&&r.length===a.length;return{frozenAccounts:n,areAllAccountsFrozen:o}}findAccountHandlerByVault(j){if(!zj.itemCache)return;let e=zj.itemCache.accountForVaultID(a6(j));if(e)return this.findAccountHandlerByUuid(e.uuid)}async removeAccount(j){let e=WA();j===e.saveNewItemsIn&&(e.saveNewItemsIn=XL,Fh(e));let t=await SA.getDatabase().findAccountByUUID(j);if(!t)return;if(ve()&&t.deviceCredentials?.deviceKeyId)try{await lh().deleteDeviceKey(t,t.deviceCredentials.deviceKeyId)}catch(n){throw Ze(n)?rj(n):rj(new xe({errorClass:p`AccountHandlers`,message:p`Failed to delete device key from the keychain - canceling account removal.`,stackOverrideError:n instanceof Error?n:void 0})),new Error("Failed to delete device key from the keychain - canceling account removal.")}await SA.getDatabase().deleteAccountWithUUID(j,({deletedItemUuids:n,accountUuid:o})=>{lt.handleDbUpdates({type:"items",content:{accountUuid:o,deletedItemUuids:n,upsertedItemUuids:[]}})});let r=this._accountHandlers.find(D0(j));if(!r){console.warn(`Asked to remove account <${j}> that doesn't exist`);return}this.setAccountHandlers(this._accountHandlers.filter(oXA(j))),await r.lock(),l7(),tlA(),this.hasAccountHandlers||vn();let a=je.getItem("offline-mfa-accounts");if(a){let n=JSON.parse(a);n.includes(j)&&je.setItem("offline-mfa-accounts",JSON.stringify(n.filter(o=>o!==j)))}ZA.removeAccount(j),DLA(j),qJA(t),T6()&&await Vi.removeAccountFromBiometryConfig(r),globalThis.dispatchEvent(new Event(Ak))}getAccountsByAuthMethod(j){return this._accountHandlers.filter(e=>e.serveraccount.authMethods.find(t=>t.type===j))}async deleteAccountPermanently(j){let e=this.findAccountHandlerByUuid(j);return e?e.client?.CTX?.session?aA.deleteAccount(e.client.CTX.session):Promise.reject(new Error("Unable to delete account - no context or session found on account handler.")):Promise.reject(new Error("Unable to delete account - no account found with that uuid"))}async updateAccount(j,e){let t=await SA.getDatabase().findAccountByUUID(j);if(!t)return Promise.reject(new Error("Unable to update account. Account with the given UUID could not be found."));t={...t,...e},await SA.getDatabase().saveAccount(t);let r=this.findAccountHandlerByUuid(t.uuid);r&&r.updateSigninDetails(t)}async updateAccountHandlers(){let j=await SA.getDatabase().getAllAccounts();if(this.setAccountHandlers(this._accountHandlers.filter(e=>j.some(t=>t.uuid===e.uuid))),globalThis.dispatchEvent(new Event(q7)),!this.allAccountHandlersAreLocked){await zj.loadAndDecryptItemCache();return}io(),tlA()}getFirstSsoAccountForKind(j){let e;switch(j.type){case"withoutAccount":e=j.content.provider.providerName;break;case"account":e=j.content.provider?.providerName;break;default:te(j)}return this._accountHandlers.find(t=>t.serveraccount.authMethods.find(r=>r.type==="OIDC"&&r.provider&&r.provider===e)!==void 0)}getMustMigrateAuthAccount(j){return this._accountHandlers.find(e=>{let t=e.client?.CTX?.session.ssoMigrationGracePeriod?.state===Dj.State.MustMigrateAuth;return j?e.uuid===j&&t:t})}async runSyncerForAccount(j){let e=this.findAccountHandlerByUuid(j);return!e||e.isLocked?Promise.resolve():e.runSyncer([0])}async runSyncerForAllAccounts(){let j=this._accountHandlers.map(async e=>e.runSyncer([0]));return Promise.all(j)}async updateSuspendedAccounts(j,e,t){let r=j.filter(a=>a.isUserSuspended);for(let a of r)try{let n=a.credentials({accountPassword:t});await a.startSync({type:"Credentials",data:{credentials:n}})}catch{console.info(`Account <${a.uuid}> is suspended.`),await a.lock(!1)}return e.length>0&&r.length>0&&this.allAccountHandlersAreLocked?OA({type:"SuspendedAccounts"}):Pj(void 0)}async updateAccountAuthMethods(){let j=await t7();return(await Promise.all(this.getAccountHandlers.map(async t=>{let r=ki(t.serveraccount.signinAddress,j),a=await NA.getSignInMethods(r,t.serveraccount.email,t.serveraccount.userUUID);return a.authMethods.length===0||(0,xJA.default)(a.authMethods,t.serveraccount.authMethods)?!1:(await this.updateAccount(t.serveraccount.uuid,{authMethods:a.authMethods}).catch(()=>console.error(`Failed update: authMethods for ${t.serveraccount.uuid}`)),(NA.CanOnlyPerformOidcAuth(a.authMethods)||NA.canOnlyPerformWebauthnAuth(a.authMethods))&&this.updateAccount(t.serveraccount.uuid,{secretKey:void 0}).catch(()=>console.error(`Failed to set secretKey to undefined for ${t.serveraccount.uuid}`)),!0)}))).includes(!0)}bestUnlockedLocation(){for(let j of this._accountHandlers){if(!j.isUnlocked)continue;let e=j.vaults.find(t=>t.isPersonal);return e?[j.b5account,e]:[j.b5account,j.vaults[0]]}throw new xe({errorClass:p`BestUnlockedLocation`,message:p`Could not find an available account/vault pair to save in.`})}defaultSavingLocation(){let j=WA().saveNewItemsIn;if(!j)return this.bestUnlockedLocation();let e=this.findAccountHandlerByUuid(j);if(e){if(e.isUnlocked){let t=e.vaults.find(r=>r.isPersonal)||e.vaults[0];if(t)try{let r=WA();return r.saveNewItemsIn=t.uuid,Fh(r),[e.b5account,t]}catch{throw new xe({errorClass:p`DefaultSavingLocation`,message:p`Could not parse or add 'saveNewItemsIn' in config`})}}return this.bestUnlockedLocation()}for(let t of this._accountHandlers)if(t.isUnlocked){let r=t.vaults.find(a=>a.uuid===j);if(r)return[t.b5account,r]}return this.bestUnlockedLocation()}async getSystemVaultForAccount(j){let e=this.findAccountHandlerByUuid(j);if(!e)throw new Error(`Unable to find account handler for account UUID <${j}>`);return e.getOrCreateSystemVault()}getUserStateForAccount(j){let e=this.findAccountHandlerByUuid(j);if(!e)throw new Error(`Unable to get user state, unable to find account handler for account UUID <${j}>`);return Object.values(Lc).find(t=>t===e.serveraccount.userState)??Lc.Unsupported}};zv=m6([Oc()],zv);var H=Re.resolve(zv);var PJA=J(IJA()),W5=J(Dd()),Dle="b5x",Tle="b5x",Cle="b5x-tracker",_le="https://telemetry.1passwordservices.com",Sle="com.snowplowanalytics.snowplow/tp2";var Hle=new URL(Sle,_le),Mle={appId:Dle,trackerId:Cle,collectorUrl:Hle,namespace:Tle},OJA=new PJA.SnowplowTracker(Mle,W5.AllEvents,W5.AllContexts);var Q5=class{async saveObjectHandler(j,e,t){if(e===Je)return gXA(t,j);qn(t,e,{name:"save-request",data:{data:j,urls:[]}})}};var Y5=class{async saveObjectHandler(j,e,t){let r=JSON.parse(j),a=await this.getTypeOfForm(t);if(typeof a!="string"){console.warn("Asked to save a card from ramp.com but was unable to find if it was Marqetta or Stripe");return}let n=a==="stripe"?await this.collectCreditCardFieldsForStripe(t):await this.collectCreditCardFieldsForMarqetta(t);return n.length>0&&r.fields.push(...n),qn(t,e,{name:"save-request",data:{data:JSON.stringify(r),urls:[],integration:EG.Ramp}})}async getTypeOfForm(j){return new Promise(e=>{chrome.scripting.executeScript({target:{tabId:j.id,allFrames:!0},func:()=>{let t=document.querySelector("[data-id='STRIPE'],[data-id='MARQETA']");if(!t)return null;let r=t.getAttribute("data-id");return r!=="STRIPE"&&r!=="MARQETA"?null:r.toLowerCase()}},t=>{let r=t.find(({result:a})=>a!==null);return e(r?r.result:void 0)})})}async collectCreditCardFieldsForStripe(j){return new Promise(e=>{chrome.scripting.executeScript({target:{tabId:j.id,allFrames:!0},func:()=>{let t=document.querySelectorAll(".IssuingDisplayElement");return Array.prototype.slice.call(t,0).map(function(a){return a.innerText})}},t=>{(async()=>{let a=[],n=t.find(({result:s})=>s&&s.length===4);if(n&&n.result instanceof Array){let s=n.result.join(" ");a.push({autocomplete:wj.CcNumber,value:s}),a.push({autocomplete:wj.CcType,value:await jA.getCreditCardType(s)??rc.Visa})}let o=t.find(({result:s})=>s instanceof Array?s.find(l=>typeof l=="string"&&!l.includes("/")&&l.length===3):!1);if(o&&o.result instanceof Array){let s=o.result.join("");a.push({autocomplete:wj.CcCsc,value:s})}let i=t.find(({result:s})=>s instanceof Array?s.find(l=>typeof l=="string"&&!l.includes(" ")&&l.includes("/")):!1);if(i&&i.result instanceof Array){let[s,l]=i.result.join("").split("/");s&&l&&a.push({autocomplete:wj.CcExp,value:`20${l}${s}`})}e(a)})()})})}async collectCreditCardFieldsForMarqetta(j){return new Promise(e=>{chrome.scripting.executeScript({target:{tabId:j.id,allFrames:!0},func:()=>{let t=document.querySelector("span");return t?t.innerText:null}},t=>{(async()=>{let a=[],n=t.find(({result:c})=>typeof c=="string"&&c.includes(" "));n&&(a.push({autocomplete:wj.CcNumber,value:n.result}),a.push({autocomplete:wj.CcType,value:await jA.getCreditCardType(n.result)??rc.Visa}));let o=t.find(({result:c})=>typeof c=="string"&&!c.includes(" ")&&!c.includes("/")&&c.length===3);o&&a.push({autocomplete:wj.CcCsc,value:o.result});let i=t.find(({result:c})=>typeof c=="string"&&!c.includes(" ")&&c.includes("/")),[s,l]=i?.result&&typeof i.result=="string"?i.result.split("/"):[];s&&l&&a.push({autocomplete:wj.CcExp,value:`20${l}${s}`}),e(a)})()})})}};var Z5=class{async saveObjectHandler(j,e,t){return qn(t,e,{name:"save-request",data:{data:j,urls:[]}})}};var nlA=class{async saveObjectHandler(j,e,t,r=[]){return qn(t,e,{name:"save-request",data:{data:j,urls:r}})}},RJA={default:new nlA,privacy:new Q5,ramp:new Y5,stripe:new Z5};var Kle={[uB.CreditCard]:ea,[uB.Login]:Je,[uB.ApiKey]:jc,[uB.CryptoWallet]:iG};function DJA(A){if(!A.priKey.jwk?.kid&&!A.pubKey.jwk?.kid)throw new Error("Both private and public JWKs are absent from the pair.");if(A.priKey.jwk?.kid){if(!A.pubKey.jwk?.kid)throw new Error("Public JWK absent from the pair.")}else throw new Error("Private JWK absent from the pair.")}var Uv=class{_sessionStorage;constructor(j){this._sessionStorage=j}handleGetSaveObjectPublicKey=async()=>{let j=await this.getOrCreateKeyPair();if(!j.pubKey.jwk?.kid)throw new Error("Unable to retrieve public key for 'Add to 1Password' feature.");return j.pubKey.jwk};handleAddSaveObject=async(j,{tab:e})=>{let t=j.data.data,{type:r,encrypted:a}=j.data;if(a){let n=await this.getOrCreateKeyPair();if(!n?.priKey.key)throw new Error("Private key missing for encrypted save object.");let o=await globalThis.crypto.subtle.decrypt("RSA-OAEP",n.priKey.key,q.base64urlToBytes(t));t=new TextDecoder().decode(new Uint8Array(o))}else t=this.decodeBase64Unicode(t);try{let n=await jA.serviceIntegrationForUrl(e.unparsedUrl);if(!n)return!1;let o=RJA[n];if(!o)return!1;if(r===uB.Login){let{urls:i}=await jA.saveUrlsFromSaveRequest({unparsedUrl:e.unparsedUrl,itemType:r});o.saveObjectHandler(this.processTotpFields(t),this.getUuidForItemType(r),e,i)}else o.saveObjectHandler(t,this.getUuidForItemType(r),e);return!0}catch{return!1}};getUuidForItemType=j=>Kle[j];getOrCreateKeyPair=async()=>{let j=this._sessionStorage.getItem("keyPair");if(j){let r=JSON.parse(j);return DJA(r),new xA.EncryptionKeyPair(r.uuid,await new xA.RSAPublicKey(r.uuid).import(r.pubKey.jwk),await new xA.RSAPrivateKey(r.uuid).import(r.priKey.jwk))}let e=await xA.EncryptionKeyPair.generate();DJA(e);let t={priKey:{jwk:e.priKey.jwk},pubKey:{jwk:e.pubKey.jwk},uuid:e.uuid};return this._sessionStorage.setItem("keyPair",JSON.stringify(t)),e};decodeBase64Unicode=j=>{let e=atob(j),t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return new TextDecoder().decode(r)};processTotpFields=j=>{let e=JSON.parse(j),t=e.fields.filter(r=>r.autocomplete===wj.OneTimeCode);t.length>1&&console.warn("Attempted to add more than one TOTP field.");for(let r of t)try{if(!vP(r.value)){let a=[$7.AppleOtpAuth,$7.OtpAuth,$7.Yjotp];console.warn(`TOTP URL is invalid, must be one of ${a.join(", ")}`)}}catch{console.warn("Was not able to validate TOTP field.")}return JSON.stringify(e)}};Uv=m6([Oc(),eG(0,Tx("SessionStorage"))],Uv);var olA=()=>Re.resolve(Uv);console.info=QH(console.info,"INFO");console.warn=QH(console.warn,"WARN");console.error=QH(console.error,"ERROR");ka()?(Re.register("SessionStorage",AM,{lifecycle:Bn.Singleton}),Re.register(Ys,sv,{lifecycle:Bn.Singleton})):(Re.register("SessionStorage",jM,{lifecycle:Bn.Singleton}),Re.register(Ys,iv,{lifecycle:Bn.Singleton}));var Nle={useToken:ZH};Re.register("PersistentStorage",Nle,{lifecycle:Bn.Singleton});Re.register("SnowplowTracker",{useValue:OJA});Re.registerSingleton(Av);Re.registerSingleton(Uv);Re.registerSingleton(zv);Re.registerSingleton(yP);Re.registerSingleton(Ou);Re.registerSingleton(jO);Re.registerSingleton(LP);Re.registerSingleton(C8);Re.registerSingleton(BP);Re.registerSingleton($v);Re.registerSingleton(L8);Re.registerSingleton(rh);import pke from"/assets/js/messages.i18n-T6ZOGRBL.js";async function ilA(A,j,e){let t=globalThis.crypto.getRandomValues(new Uint32Array(1))[0],r=await Ln({tabId:A,message:{name:"request-delegated-session",data:{accountUuid:j,userUuid:e,requestId:t}}});return r.requestId?r.requestId===t?Pj(r):OA("got delegated session response with incorrect request ID"):OA("got delegated session response without a request ID")}var Mc=class extends Error{serverErrorReason;constructor(j,e){super(j),this.serverErrorReason=e}};async function TJA(A,{code:j,state:e}){let t=ki(A.serveraccount.signinAddress,A.deviceJson.uuid),r;try{r=await NA.verifyOidc(t,j,e,A.deviceJson)}catch(a){if(q.errors.isNewServerError(a))switch(a.reason){case q.errors.ServerErrorReason.userSuspended:throw new Mc("User is suspended",a.reason);case q.errors.ServerErrorReason.userDeleted:throw new Mc("User does not exist",a.reason);case q.errors.ServerErrorReason.oidcUserDoesNotMatch:throw new Mc("Identity provided to B5 does not match the user trying to authenticate",q.errors.ServerErrorReason.oidcUserDoesNotMatch);default:throw new Mc("SSO Authentication server request failed")}throw new Mc("SSO Authentication unsuccessful")}if(r.type!=="found")throw new Mc("Extension is not trusted.",q.errors.ServerErrorReason.deviceNotEnrolled);return{unverifiedContext:t,ssoResponse:r}}function CJA(A){if(A instanceof Mc)switch(A.serverErrorReason){case q.errors.ServerErrorReason.userDeleted:return"user-deleted";case q.errors.ServerErrorReason.userSuspended:return"user-suspended";case q.errors.ServerErrorReason.oidcUserDoesNotMatch:return"sso-identity-mismatch";case q.errors.ServerErrorReason.deviceNotEnrolled:return"device-not-trusted"}return q.errors.isNewServerError(A)?A.code===q.errors.HTTPStatusCode.internalServerError?"server-unavailable":"server-error":"unlock-error"}async function _JA(A,j,e){let t=OH(),r=new Promise((o,i)=>{Ln({tabId:e,message:{name:"upgrade-trusted-device",data:{requestId:t,accountUuid:A,userUuid:j}}}).then(s=>{o(s)}).catch(s=>{i(s)})}),a=Symbol(),n;try{n=await iP(r,500,"background: upgrade-trusted-device",a)}catch(o){return o===a?OA({type:"TIMEOUT"}):OA({type:"MESSENGER_ERROR"})}return n?n.requestId?n.requestId!==t?OA({type:"BAD_REQUEST_ID",data:"requestId from response does not match"}):Pj(n):OA({type:"BAD_REQUEST_ID",data:"requestId missing from response"}):OA({type:"TIMEOUT"})}var SJA=A=>!!A.deviceUuid&&Object.keys(A.userInfo).length>0,HJA=(A,j)=>{let e=SJA(j);return SJA(A)||e&&A.deviceUuid===j.deviceUuid?{restoreRequired:!1,backUpB5WebState:!0}:e?{restoreRequired:!0,backUpB5WebState:!1}:{restoreRequired:!1,backUpB5WebState:!1}},MJA=A=>{let j=Object.entries(A.userInfo),e=Object.entries(A.deviceKeys),t={};j.forEach(([n,o])=>{Ule([n,o])&&(t[n]=o)});let r={};e.forEach(([n,o])=>{Vle([n,o],t)&&(r[n]=o)});let a;return Xle(A.lastUserUuid,t)&&(a=A.lastUserUuid),{...A,userInfo:t,deviceKeys:r,lastUserUuid:a}},Ule=([A,j])=>{try{let e=ZsA(A),t=AlA(j);return t?!!H.findAccountHandlerByUuid(t,e):!1}catch{return!1}},Vle=([A,j],e)=>{try{let{accountUuid:t,userUuid:r}=gJA(A);return e[L5(r)]?!!H.findAccountHandlerByUuid(t,r):!1}catch{return!1}},Xle=(A,j)=>{if(!A)return!1;for(let[e,t]of Object.entries(j))try{let r=ZsA(e),a=AlA(t);if(!a)continue;if(H.findAccountHandlerByUuid(a,r)&&A===r)return!0}catch{continue}return!1};async function NJA(A,{tab:j}){if(!j.url)return;let e=new URL(j.url);if(!Bm(e.hostname)||!A.data.deviceInit||!j.id)return;let t=await jn();Ln({tabId:j.id,message:{name:"initialize-device",data:{device:t}}})}var LJA=async(A,{tab:j})=>{let e=A.data.details.accountUuid;if(!await SA.getDatabase().findAccountByUUID(e)){console.error("Unable to create session. Account with the given UUID could not be found.");return}let r=H.findAccountHandlerByUuid(e);if(!r){console.error(`Unable to find account handler with UUID <${e}`);return}XJA(r,A,j.id)},zJA=async A=>{let{state:j,code:e,accountUuid:t}=A.data.details;if(!j||!e||!t){console.error("HandleB5SsoSignInComplete: Invalid arguments provided to complete B5 SSO sign in."),rj(new q.LoggableError({errorClass:p`UnlockError`,message:p`Invalid arguments provided to complete B5 SSO sign in.`,metaData:{account:{accountUuid:q.logsafe.assertLogSafe(t)}}}));return}let r=H.findAccountHandlerByUuid(t);if(!r){console.error(`HandleB5SsoSignInComplete: Unable to find account handler for provided account UUID <${t}>.`);return}W8(`https://mocked.1password.com/sso/oidc/redirect/#state=${j}`).catch();try{let a=await TJA(r,{code:e,state:j}),n=await Cm({type:"SingleSignOn",data:a});if(n.isErr())throw new Error(n.error.type)}catch(a){a instanceof Mc&&await Jle(r,a);let n=CJA(a);await Zg(n),Ze(a)?rj(a):rj(new q.LoggableError({errorClass:a instanceof Mc?p`SSOAuthenticationError`:p`UnlockError`,message:p`Unable to unlock b5x with SSO.`,userUuid:q.logsafe.assertLogSafe(r.serveraccount.userUUID),metaData:{account:{accountUuid:q.logsafe.assertLogSafe(t)}},stackOverrideError:a})),console.error("HandleB5SsoSignInComplete: Unable to unlock b5x with SSO.",Ze(a)?`: ${a.name} - ${a.message}`:"");return}},Jle=async(A,j)=>{switch(j.serverErrorReason){case q.errors.ServerErrorReason.userSuspended:await A.setUserState(Dj.State.Suspended).catch(e=>{console.error(`Could not update account's user state to ${Dj.State.Suspended}`,e)});break;case q.errors.ServerErrorReason.userDeleted:A.destroyAccount();break;case q.errors.ServerErrorReason.deviceNotEnrolled:await H.updateAccount(A.serveraccount.uuid,{deviceCredentials:void 0});break;default:break}},UJA=async(A,{tab:j})=>{let e=A.data.details.accountUuid,t=await SA.getDatabase().findAccountByUUID(e);if(!t){console.error("Unable to create session. Account with the given UUID could not be found.");return}let r=H.findAccountHandlerByUuid(e);if(!r){console.error(`Unable to find account handler with UUID <${e}`);return}let a=t.userUUID,n=A.data.details.userUuid;if(n&&n!==a){console.error("Unable to create session. Extension user and b5web user do not match.");return}XJA(r,A,j.id)},VJA=async(A,{frame:j})=>{let e=j.URL();if(!e||!Bm(e.hostname))return{restoreRequired:!1,credentials:void 0,host:e?.host||""};let t=e.host;if(!ZA.hasPreRegistrationFlag("b5x-account-hydration"))return{restoreRequired:!1,credentials:void 0,host:t};let{credentials:r}=A.data.details;await vj.init();let a=elA(t),{backUpB5WebState:n,restoreRequired:o}=HJA(r,a),i=MJA(n?r:a);return jlA(i,t),{restoreRequired:o,credentials:i,host:t}},XJA=async(A,j,e)=>{let t,r=async()=>{if(!A.client&&(await A.reinitializeClient(),!A.client))return;let a={name:"auto-sign-in-to-b5",data:{...await A.client.getDelegateSessionInit(j.data.details.device),ssoNonce:j.data.type==="B5SessionInit"?j.data.details.ssoNonce:void 0}};Ln({tabId:e,repeat:!1,message:a}),t&&clearTimeout(t)};A.isLocked?(await s7(),t=setTimeout(()=>{try{mt.unsubscribe(br,r)}catch{console.info("Unlock listener was already unsubscribed or was never registered")}},3e4),mt.subscribe(br,r,{once:!0})):r()};async function Wle(A,j,e){let t=j.details;if(A)return console.error("Auth Only tabs should not be used when connected to a Desktop app"),chrome.tabs.remove(e);if(SsA(t.accountUuid))return;let r=K6();if(r.isEnabled()&&!r.addAccountPromptEnabled()||!(await yLA(t.accountUuid)).shouldPrompt)return;let n;if(t.shouldAddAccountToExtension||await Q8(!1)?n="YES":n=await F5(e,t.accountUuid),n==="YES"){let o,i=!1;switch(j.type){case"B5SignInSucceeded":o=j.details.accountKey,i=!1;break;case"B5DelegatedSignInSucceeded":i=!0;break;case"B5MyceliumDelegatedSignInSucceeded":"password_secret_key"in j.details.extraCredentials?(o=j.details.extraCredentials.password_secret_key.secret_key,i=!1):("sso"in j.details.extraCredentials||"webauthn"in j.details.extraCredentials)&&(i=!0);break;default:te(j)}wv({components:{emailAddress:t.email,secretKey:o,server:t.signinAddress,isSsoAccount:i},accountUuid:t.accountUuid})}else n==="IGNORE"&&_sA(t.accountUuid)}function JJA(A){chrome.runtime.sendNativeMessage("application.id",{name:"iap",data:A.data.url})}async function WJA(A,{tab:j}){$6();let e=A.data.details,t=e.authOnly??!1,r=e.isSsoAccount??!1,a=e.shouldAddAccountToExtension??!1,n=ZA.hasPreRegistrationFlag("b5x-sls-extension-first-setup"),o=n&&t;if(re.getDesktopAppState().type==="Connected"&&!o&&(!r||!a))return Wle(t,A.data,j.id);l7();let i=await SA.getDatabase().findAccountByUUID(e.accountUuid);if(i){if(i.userUUID!==e.userUuid)return;let k=fi(i.signinAddress),u=fi(e.signinAddress);if(k.endsWith("/")&&(k=k.slice(0,-1)),u.endsWith("/")&&(u=u.slice(0,-1)),k!==u)return;if(!((A.data.type!=="B5SignInSucceeded"||i.secretKey===A.data.details.accountKey)&&i.signinAddress===e.signinAddress&&i.email===e.email&&i.dSecret===e.dSecret)){let F={signinAddress:e.signinAddress,email:e.email};e.dSecret&&(F.dSecret=e.dSecret),A.data.type==="B5SignInSucceeded"&&(F.secretKey=A.data.details.accountKey),await H.updateAccount(e.accountUuid,F),await H.lockAccountHandler(e.accountUuid)}switch(A.data.type){case"B5SignInSucceeded":{let F=await x0(A.data.details.masterPassword);F.isErr()&&console.info(`Failed to unlock newly added account: ${F.error.type}`);break}case"B5DelegatedSignInSucceeded":case"B5MyceliumDelegatedSignInSucceeded":{let{accountUuid:F,userUuid:S,masterKey:G,email:x,signinAddress:R}=A.data.details,{session:P}=A.data.details;if(!G){console.warn("Unable to unlock account without master key");return}let D=cj(JSON.parse(G),yo);if(D.type==="err"){console.warn("Failed to decode JWK");return}if(!P){let y=await ilA(j.id,F,S);y.isOk()?P=y.value.sessionDetail.session:console.warn(`Failed to get delegated session response when trying to unlock account: ${y.error}`)}if(P){let y=await P8({email:x,signInAddress:R},D.value,{notifier:P.notifier,sessionKey:P.sessionKey},!1),h=await Cm({type:"DelegatedSession",data:{client:y,accountUuid:F,muk:D.value}});if(h.isErr()){console.warn(`Unable to unlock account with delegated session: ${h.error.type}`);return}let O=H.findAccountHandlerByUuid(i.uuid);if(O?.isUnlocked)try{await Yle(y,A,j,O)}catch(Q){en(Q,p`Failed upgrading saved account to Trusted Device`,O.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(O.serveraccount.uuid):void 0)}}break}default:te(A.data)}await H.runSyncerForAccount(e.accountUuid),t&&(await chrome.tabs.remove(j.id),await Pn(100),HE());return}if(t){let k=await SE();n&&(A=await KJA(A,j)),await giA(A.data),k?chrome.tabs.remove(j.id):lsA(j);return}if(Bt()||SsA(e.accountUuid))return;let s=K6();if(s.isEnabled()&&!s.addAccountPromptEnabled())return;let l=(A.data.type==="B5DelegatedSignInSucceeded"||A.data.type==="B5MyceliumDelegatedSignInSucceeded")&&A.data.details.session===void 0,c;if(e.shouldAddAccountToExtension||await Q8(!1)?c="YES":c=await F5(j.id,e.accountUuid),c==="YES"){if(l&&(A.data.type==="B5DelegatedSignInSucceeded"||A.data.type==="B5MyceliumDelegatedSignInSucceeded")){let k=await ilA(j.id,A.data.details.accountUuid,A.data.details.userUuid);k.isOk()?(A.data.details.masterKey=k.value.sessionDetail.masterKey,A.data.details.session=k.value.sessionDetail.session):console.warn(`Failed to get delegated session response when trying to add account: ${k.error}`)}A=await KJA(A,j),await giA(A.data)}c==="IGNORE"&&_sA(e.accountUuid)}async function QJA({userUuid:A,accountUuid:j},e){let t=await _JA(j,A,e.id);if(t.isErr()){let r=t.error.data?`${t.error.type}: ${t.error.data}`:t.error.type;console.warn(`Failed to get trusted device upgrade response while adding account: ${r}`),rj(new q.LoggableError({errorClass:p`HandleB5SignInSucceeded`,message:q.logsafe.assertLogSafe(`TrustedDeviceUpgrade request to b5web failed: ${t.error.type}`),userUuid:q.logsafe.assertLogSafe(A)}));return}return t.value}async function Qle(A,j){if(!NA.canPerformTrustedDeviceBasedAuth(j.serveraccount.authMethods))return!1;let t=j.getDeviceCredentials();if(t.isErr())return!0;if(A?.CTX)try{await NA.getEncryptedCredentialBundle(A.CTX,t.value.deviceKeyId)}catch(r){if(q.errors.isServerError(r,ts.deviceNotEnrolled,q.errors.HTTPStatusCode.notFound))return!0;if(q.errors.isServerError(r)&&r.code===q.errors.HTTPStatusCode.notFound)return!1;let a=q.errors.isServerError(r)||q.errors.isClientError(r)?`${r.name} + ${r.code}`:"unknown error";en(r,q.logsafe.assertLogSafe(`Error (error: ${a}) while getting encrypted bundle for user ${j.serveraccount.userUUID}.`),j.serveraccount.uuid!==void 0?q.logsafe.assertLogSafe(j.serveraccount.uuid):void 0)}return!1}async function Yle(A,j,e,t){if(A&&await Qle(A,t)){let r=await QJA(j.data.details,e);r?.srpx&&await mK(A,t,r?.srpx)}}async function KJA(A,j){if(A.data.type==="B5DelegatedSignInSucceeded"||A.data.type==="B5MyceliumDelegatedSignInSucceeded"){let e=await QJA(A.data.details,j);e?.srpx&&(A.data.details.srpx=e.srpx)}return A}function YJA(A){if(!WA().showNotifications||ve())return;let e=`up-to-date-${new Date().getTime()}`;chrome.notifications.create(e,{type:"basic",iconUrl:Qs,title:oA("1Password is up to date"),message:oA("Thank you for running the latest version ({version}) of 1Password!",{version:A})})}var AWA=J(vD());var Zle="2.0.0",slA="firefox-already-disabled-rich-icons",ZJA="firefox-data-collection-opt-in",iO=class A{static async onInstalled(j){switch(j.reason){case chrome.runtime.OnInstalledReason.INSTALL:return A.onExtensionInstall();case chrome.runtime.OnInstalledReason.UPDATE:return j.previousVersion?A.onExtensionUpdate(j.previousVersion):void 0;case"browser_update":case chrome.runtime.OnInstalledReason.CHROME_UPDATE:return A.onBrowserUpdated()}}static onUpdateCheck(){let j=$E();chrome.runtime.requestUpdateCheck(e=>{if(console.info(`1Password (${j}) update status: ${e}`),e!=="update_available")return YJA(j)})}static async onExtensionInstall(){let j=new Date;if(console.info(`1Password ${$E()} has been installed on ${j.toString()}.`),await _c,!(ve()&&await SE()))return vt()&&(FE("firefox-rich-icon-enable"),FE("firefox-local-data-collection-enable"),vj.setItem(slA,"true")),Zm()}static async onExtensionUpdate(j){let e=$E();if(console.info(`1Password has been updated to ${e} on ${new Date().toString()}.`),j!==e){if(await vj.init(),vt()){vj.getItem(slA)!=="true"&&(vj.setItem(slA,"true"),hn({showRichIcons:!1}),Li("firefox-rich-icon-enable"));let r=vj.getItem(ZJA);r!==void 0?(hn({firefoxDataCollection:r==="true"}),vj.removeItem(ZJA),FE("firefox-local-data-collection-enable")):Li("firefox-local-data-collection-enable")}if((0,AWA.lt)(j,Zle))return hn({showChangelogPopupOnInteraction:!0}),vn();Li("update")}}static onBrowserUpdated(){console.info("\u{1F195} The browser was updated.")}};var llA=class{constructor(j){this.options=j;this.options=j,this.queues=Array.from({length:this.options.maxConcurrentTabs},()=>new NE)}results=[];isRunning=!1;queues=[];pageReadyPromises=new Map;earlyPageReadyReceived=new Set;onPageReady(j){if(!this.isRunning)return;let e=this.pageReadyPromises.get(j);e?(clearTimeout(e.timeout),this.pageReadyPromises.delete(j),e.resolve()):this.earlyPageReadyReceived.add(j)}async waitForPageReady(j){return this.earlyPageReadyReceived.has(j)?(this.earlyPageReadyReceived.delete(j),Promise.resolve()):new Promise((e,t)=>{let r=setTimeout(()=>{this.pageReadyPromises.delete(j),t(new Error(`Page ready timeout for tab ${j}`))},this.options.pageLoadTimeout);this.pageReadyPromises.set(j,{resolve:e,reject:t,timeout:r})})}async openTabAndGenerateScenario(j,e){let t={domain:j,loginUrl:e,success:!1},r;try{let{id:a}=await Te.openTab({url:e,waitForLoad:!1,ignoreIfDuplicate:!0});if(!a)throw new Error("Failed to create tab");r=a,await this.waitForPageReady(a);try{let n=await j2(a);n?(t.success=!0,t.data=n):`${j}`}catch(n){t.error=n instanceof Error?n.message:"Unknown error",console.error(`\u274C Error generating scenario for ${j}:`,n)}}catch(a){t.error=a instanceof Error?a.message:"Unknown error",console.error(`\u274C Error processing ${j}:`,a)}finally{if(r!==void 0){this.earlyPageReadyReceived.delete(r);let a=this.pageReadyPromises.get(r);a&&(clearTimeout(a.timeout),this.pageReadyPromises.delete(r)),browser.tabs.remove(r)}}return t}async generateAllScenarios(){if(this.isRunning)return console.warn("Bulk scenario generation is already running"),this.results;this.isRunning=!0,this.results=[];try{let j=await Ace();if(j.isErr())return console.error("Failed to fetch websites:",j.error),this.results;await j.match(async({websites:e})=>{let t=e.map(async(r,a)=>{let n=a%this.queues.length;return this.queues[n].push(async()=>{let i=await this.openTabAndGenerateScenario(r.domain,r.login_url);return this.results.push(i),i})});await Promise.all(t)},e=>{console.error("Failed to fetch websites:",e)})}catch(j){console.error("\u274C Error in bulk scenario generation:",j)}finally{this.isRunning=!1}return this.results}},A2=new llA({pageLoadTimeout:5e3,maxConcurrentTabs:5});async function Ace(){try{let A=await fetch("http://localhost:4020/websites",{method:"GET",headers:{"Content-Type":"application/json; charset=UTF-8"},mode:"cors"});return A.ok?Pj(await A.json()):OA({type:"RequestError",data:`HTTP error! status: ${A.status}`})}catch(A){return console.error("Error generating scenario:",A),OA({type:"RequestError",data:A})}}async function j2(A){let j;if(A?j=await L6(A):j=await st(),!j){console.error("Cannot collect page details: Failed to resolve information on active tab");return}let e=await Cr(j);try{let t=await fetch("http://localhost:4020/create",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({collectedPageDetails:e}),mode:"cors"});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.error("Error generating scenario:",t),{error:!0,message:t instanceof Error?t.message:"Unknown error occurred"}}}async function jWA(){await A2.generateAllScenarios()}async function bh(A){let j=await Yb(A).then(async t=>Promise.all(t.map(async r=>jce(A,r.frameId).catch(Error)))),e=new Set;for(let t of j)if(t instanceof Error)console.warn("Could not collect providers from all frames that were initially found.");else for(let r of t)e.add(r);return[...e]}async function jce(A,j){return j6.withTimeout(new Promise((e,t)=>{lj("sign-in-with-collect-providers",void 0,{tabId:A,frameId:j}).then(r=>{if(!r.ok){t("Could not collect frame details");return}e(r.data)})}),5e3,"Collect sign in with providers")}var ece=new NE,eWA=()=>{mt.subscribe(v7,tce).subscribe(nG,rce).subscribe(G7,ace).subscribe(oG,async A=>jA.clearFillSession(A.detail.tabId))};async function tce(A){let{tab:j}=A.detail;if(!j.id||!j.url){console.error("[Sign in with] Tab no longer exists for session");return}let e=await jA.fillSessionStatus(j.id,j.url);if(e?.state.type!=="sign-in-with-provider")return;if(e.nakedDomain!==jA.nakedDomainForUrl(j.url))return console.error(`[Sign in with] Naked domain mismatch for \`${e.state.type}\` fill session.`),jA.clearFillSession(j.id);let{provider:t}=e.state.data;(await bh(j.id)).includes(t)&&await t8(j.id,t)}var rce=async A=>{let j=await L6(A.detail.sessionTabId);if(!j){console.error("[Sign in with] Tab no longer exists for session");return}let e=await jA.fillSessionStatus(j.id,j.unparsedUrl);if(e?.state.type!=="sign-in-with-provider")return;let{provider:t}=e.state.data;if(t!==A.detail.provider)return console.error(`[Sign in with] Invalid provider \`${t}\` received for \`${A.detail.provider}\` session.`),jA.clearFillSession(j.id);await jA.advanceFillSession(j,{type:"sign-in-with-flow-started",data:{sessionAssociation:{tabId:A.detail.tabId,tabUrl:A.detail.url}}})},ace=async A=>{let j=await L6(A.detail.tabId);if(!j){console.error("[Sign in with] Tab no longer exists for session");return}let e=await jA.fillSessionStatus(j.id,j.unparsedUrl);if(!(e?.state.type!=="sign-in-with-provider"&&e?.state.type!=="sign-in-with-flow-started")){if(e.state.type==="sign-in-with-provider"&&e.state.data.provider!==A.detail.provider)return console.error(`[Sign in with] Invalid provider \`${e.state.data.provider}\` received for \`${A.detail.provider}\` session.`),jA.clearFillSession(j.id);await jA.advanceFillSession(j,{type:"sign-in-with-completed"})}};async function clA(A){return ece.push(async()=>{let j=await jA.fillSessionStatus(A.id,A.unparsedUrl);if(j?.state.type==="sign-in-with-provider"||!j?.item)return!1;try{let{itemUuid:e,vaultUuid:t}=j.item,r=await Br(e,t);return r?(await r8(A,r,void 0),!0):(console.error(`Unable to load item by uuid while trying to resolve pending fill for tab <${A.id}>`),!1)}catch{return console.error(`Unable to fulfill resolve pending fill for tab <${A.id}>`),!1}})}var e2="-gql-subscription";var t2=class{#j;#A;#e;constructor(j,e){this.#j=j,this.#e=e,this.#A=j.createChannel(e)}close(){this.#j.closeChannel(this.#A)}async send(j){this.#j.gqlChannelSend(this.#A,j).catch(e=>{this.#e({type:"protocolError",id:j.id,msg:e.message})})}};var rWA=()=>ZA.anyAccountHasFlag("gql-b5x-sidebar"),dlA=new rt("[GQL Handler]"),ice=({requestFn:A,respondFn:j=r=>r,createChannelFn:e,closeChannelFn:t})=>{browser.runtime.onConnect.addListener(r=>{if(!r.name.endsWith(e2))return;if(!rWA())return r.disconnect();let a=new t2({gqlChannelSend:A,closeChannel:t,createChannel:e},j(o=>{r.postMessage(o)})),n=r.name.split(e2)[0];dlA.debug(`New subscription channel detected: ${n}`),r.onMessage.addListener(async o=>(dlA.debug(`New subscription registered on ${n} channel: ${o.id}`),a.send(o))),r.onDisconnect.addListener(()=>{dlA.debug(`Subscription port closed: ${n}`),a.close()})})},sce=async A=>rWA()?Promise.resolve({data:{accounts:[]}}):Promise.reject(new Error("[GQL Handler] GQL is not enabled.")),aWA=()=>{V("gql-extension-page",sce,!0),ice({requestFn:async(A,j)=>Promise.resolve(void 0),createChannelFn:A=>0,closeChannelFn:A=>{}})};var nWA=()=>{let[A]=H.defaultSavingLocation(),j=H.findAccountHandlerByUuid(A.uuid);return j?{name:j.serveraccount.name,hasSignedInClient:j.hasSignedInClient}:void 0};var oWA=({data:A})=>{let j={},e=Object.entries(A.tags??{});e.length>0&&e.forEach(([r,a])=>{a&&(j[r]=q.logsafe.assertLogSafe(a))});let t=new Error;t.stack=A.stack;try{rj(new q.LoggableError({errorClass:q.logsafe.assertLogSafe(A.name),message:q.logsafe.assertLogSafe(A.message),tags:j,severityLevel:A.severity,stackOverrideError:t}))}catch{console.error(`Could not report event: ${event instanceof Event?event.type:"unknown event"}`)}};function iWA(){T6()&&browser.runtime.connectNative("application.id").onMessage.addListener(async function(e){"name"in e&&e.name==="iap"&&(await u7()).forEach(r=>{Ln({tabId:r.id,message:{name:"forward-iap-receipt-to-b5",data:e}})})})}async function sWA(A,j,e,t){switch(t.name){case"fill-item":return kce(A,t.data.itemId,t.data.designationFilter);case"fill-tutorial-item":return vce(A);case"fill-generated-password":return pce(A,j,t.data);case"save-item":return mce(A,e);case"show-privacy-dialog":return Bce(A,j);case"show-email-alias-dialog":return gce(A);case"fill-existing-alias":return hce(A);case"show-brex-create-dialog":return qce(A,j);case"show-ssh-create-dialog":return xce(A);default:te(t)}}async function dce(A){if(!A.cacheInformation)return!1;let j=A.overview.b5AccountUUID;if(!j)return console.error("Item was missing b5AccountUUID in isBrexCardLocked"),!0;let e=(await R0()).find(a=>a.accountUuid===j);if(!e)return console.warn(`Unable to check Brex card is locked for <${j}>`),!0;let t=await Nd(e.accountUuid,e.accountId,"brex");if(!t)return console.warn("Failed to get token when checking if Brex card is locked"),!0;let r=await aVA(Lm(t.context.clientId),A.cacheInformation.cardId,t.accessToken);return r.isOk()&&r.value.status!==UO.Active?(B5(j,r.value.id),!0):r.isErr()?(console.warn(`Unable to get card deatils to check if it's locked for <${j}>`),!0):!1}async function kce(A,j,e){if(ZUA())return;let t=await Sc(JSON.parse(j));if(t.isErr())throw new Error("Unable to load item with local id");let r=t.value;if(r.templateUuid===ea&&await dce(r)){alert(oA("This card has been locked/terminated, please use another card."));return}if(e)return r8(A,r,"INLINE",{designationFilter:e,requireAuthorization:!0});No(A,r,"INLINE",{requireAuthorization:!0,skipSignInWithCheck:!0})}var uce=async A=>A?await Ft.connectivityStatus()!=="online"?{notification:"generatedPasswordUserOffline",message:"User is offline"}:A.isLocked?{notification:"generatedPasswordAccountIsLocked",message:"Account was found to be locked"}:A.hasSignedInClient?await A.hasGeneratedPasswordVault()?{notification:"generatedPasswordUnexpectedError",message:"Unexpected error"}:{notification:"generatedPasswordNoVaultFound",message:"Account has no generated password vault"}:{notification:"generatedPasswordNotSignedIn",message:"Account does not have a signed in client"}:{notification:"generatedPasswordNoDefaultSavingLocation",message:"No default saving location found"},r2="Unable to use the generated password",Ece=A=>{if(A instanceof xe){rj(A).catch(()=>{console.error("Unable to track `savePasswordHistory` loggable error encountered")});return}let j=new xe({errorClass:p`SavePasswordHistory`,message:p`Unable to save password history. Unknown reason.`});rj(j).catch(()=>{console.error("Unable to track `savePasswordHistory` error encountered")})};async function pce(A,j,e){try{l8(e,A).catch(Ece),await S0(A,!1,j,e)}catch(t){if(!await st()){console.warn("Cannot send message: Failed to resolve information on active tab");return}let[a]=H.defaultSavingLocation(),n=H.findAccountHandlerByUuid(a.uuid),o=await uce(n);la(A.id,{type:o.notification}),o.notification==="generatedPasswordUserOffline"?console.error(`${r2}: The account is not signed in or appears offline`):Ze(t)?(rj(t),console.error(`${r2}: ${t.message}`)):(rj(new q.LoggableError({errorClass:p`FillGeneratedPassword`,message:q.logsafe.assertLogSafe(`${r2}: ${o.message}`),userUuid:q.logsafe.assertLogSafe(n?.accountIdentifier.userUUID??""),stackOverrideError:t instanceof Error?t:void 0})),console.error(`${r2}: ${o.message}`))}}async function mce(A,j){let e;psA(j)?e=ea:msA(j)?e=O6:e=Je,qn(A,e,{name:"collected-page-details",data:{collectedPageDetails:await Cr(A)}})}function Bce(A,j){return n7(A.id,{name:"privacy-create-credit-card",data:{frameIdentifier:j}})}function gce(A){return n7(A.id,{name:"create-an-email-alias",data:{frameIdentifier:void 0}})}async function hce(A){let j=await jA.getEmailAliasSessionStatus(A.id,A.unparsedUrl);if(j?.alias)switch(j.alias.type){case"Fastmail":await n8(A,j.alias.content.alias);break;default:te(j.alias.type)}}function qce(A,j){return n7(A.id,{name:"brex-create-credit-card",data:{frameIdentifier:j}})}function xce(A){return n7(A.id,{name:"create-ssh-key",data:void 0})}async function vce(A){let j=await TnA(A),e=je.getItem("tutorial-save");if(e&&j.isOk()){let t=await R5(e);if(t){let r={postFill:{type:"focusNextField"}},a=await jA.fillItem(t,j.value,r);await lj("autofill-perform-fill",{nextFill:{fillPayload:a.fillPayload,complete:!0},authorizedUnsafeHttp:!0},{tabId:A.id})}}}var Gce=20;async function cWA(A,j,e,t){let r=n=>t.some(o=>o.type==="SuggestedCategory"&&o.data.type===n);if(zi(A)&&j==="username")return OXA();if(r(O6)&&(j===wj.Username||j===wj.Email))return wce(A);let a;return r(Je)&&(a=await fce(A)),$ce(A,j,e,t,a)}async function fce(A){if(A.URL()?.host!=="accounts.google.com")return;let j=await Cr(A);return(()=>{for(let t of j.frames)for(let r of t.fields)if(r.type==="email"&&r.htmlName==="identifier"&&r.htmlId==="hiddenEmail"&&r.value)return r.value})()}async function Fce(A,j,e,t,r){let a=await zj.loadItemCache();if(!a)return[];let n;switch(t){case Je:n=ie.logins;break;case ea:n=ie.creditCards;break;case O6:n=ie.identities;break;case ol:n=ie.passwords;break;case Zi:n=ie.sshKeys;break;default:return[]}let o=ie.managedCredentialChangePassword(j,e),{showRichIcons:i}=WA(),s=ie.userSelected(mr(),void 0,void 0,a),l=await H.getPersonItemsForAccounts(),c=a.itemsForTab(A,m=>s(m)&&n(m)&&o(m),d6.fieldContextSort(A,r,l));t===Je&&(c=(await Promise.all(c.map(async F=>({decryptedItem:await E6(F),encryptedItem:F})))).filter(({decryptedItem:F})=>F?bce(F,j):!1).map(({encryptedItem:F})=>F));let k=await Promise.all(c.map(async m=>FXA(m,{iconSize:120,showRichIcons:i,isPersonItem:Gb(m,l)})));if(k.some(m=>m.name==="entry"&&m.data.accessory==="profile")){let m=k.find(F=>F.name==="entry"&&F.data.accessory!=="profile");m&&(m.data.insertDividerBefore=!0)}return k}function bce(A,j){if(A.username?.value||A.getPassword())return!0;let e=A.details?.sections?.some(r=>r.fields?.some(xA.VaultItem.getSsoValue)),t=j===wj.OneTimeCode&&A.details?.sections?.some(r=>r.fields?.some(xA.VaultItem.isTotpField));return!e||t}async function yce(A){switch(A.type){case"Integration":switch(A.data){case jk.Brex:return IXA();case jk.Privacy:return $XA();default:return te(A)}case"SuggestedPassword":{let j=await XVA();return bXA(j)}case"CreateSshKey":return yXA()}}async function $ce(A,j,e,t,r){let[a,n]=t.reduce((s,l)=>(l.type==="SuggestedAction"?s[0].push(l):s[1].push(l),s),[[],[]]),o=a.map(async s=>yce(s.data)),i=(await Promise.all(n.map(async s=>Fce(A,j,e,s.data.type,r)))).reduce((s,l)=>s.concat(l),[]);return o.length>0&&i.length>0&&(i[0].data.insertDividerBefore=!0),Promise.all([...o,...i])}async function wce(A){let j=await Oce(),e=await Ice(j);return await Pce(e,A),e}async function Ice(A){let j=new Map,e=[];for(let t of A)for(let r of t.fields){let a=j.get(r.value);a?j.set(r.value,a+1):(j.set(r.value,1),e.push({item:t.item,field:r}))}return e.sort((t,r)=>{let a=k=>(k.faveIndex??0)>0,n=a(t.item),o=a(r.item),i=j.get(t.field.value)??0,s=j.get(r.field.value)??0,l=t.field.value,c=r.field.value;return n&&!o?-1:!n&&o?1:i>s?-1:i<s?1:l.localeCompare(c)}),Promise.all(e.slice(0,Gce).map(({item:t,field:r})=>DsA(t,{title:r.value,secondary:"",designationFilter:[r.designation]})))}var Pce=async(A,j)=>{if(await qv().catch(t=>(en(t,p`Failed to get fastmail configuration`),!1))){let t=await jA.getEmailAliasSessionStatus(j.id,j.unparsedUrl);A.length>0&&(A[0].data.insertDividerBefore=!0),t?.alias?A.unshift(PXA()):A.unshift(wXA())}};async function Oce(){let A=await zj.loadItemCache();if(!A)return[];let j=ie.userSelected(mr(),void 0,void 0,A),e=a=>j(a)&&ie.identities(a),t=A.fillableItems(e,d6.faved);return t.length>50&&(t=t.slice(0,50)),(await Promise.all(t.map(async a=>{if(a.templateUuid!==O6)return console.error("Tried to load username suggestions from unsupported item type."),{item:a,fields:[]};let n=await E6(a);return{item:a,fields:n?Rce(n):[]}}))).filter(a=>a.fields.length>0)}function lWA(A,j){if(!(!A.details||!A.details.sections)){for(let e of A.details.sections)if(e.fields){for(let t of e.fields)if(j(t))return t}}}function Rce(A){let j=[],e=lWA(A,r=>!!r.v&&(r.k==="string"&&r.n==="email"||r.k==="email"));e&&j.push({value:e.v,designation:wj.Email});let t=lWA(A,r=>r.k==="string"&&r.n==="username"&&!!r.v);return t&&j.push({value:t.v,designation:wj.Username}),j}var dWA=async A=>{ZA.hasPreRegistrationFlag("b5x-notification-manager")&&await QP(A)&&la(A,{type:"notificationManager"})};var kWA=Object.values(an);function Dce(A){return kWA.find(j=>j===A)}async function sO(A){let j=await zj.loadItemCache();if(!j)return[];let e=j.itemsForTab(A,ie.combine(ie.logins,ie.userSelected(mr(),void 0,void 0,j)),d6.faved);return(await Promise.all(e.map(async r=>{let a=await E6(r),n=a?klA(a):[];return{item:r,signInWithLogins:n}}))).filter(({signInWithLogins:r})=>r.length>0)}var klA=A=>{if(!A.details||!A.details.sections||A.details.sections.length===0)return[];let j=[];for(let e of A.details.sections)if(!(!e.fields||e.fields.length===0))for(let t of e.fields){let r=xA.VaultItem.getSsoValue(t);if(!r)continue;let a=Dce(r.provider);a&&j.push({...r,provider:a})}return j},V0=async A=>{let j=a2A();if(!j?.user?.uuid){console.warn("Cannot find supported account to load managed apps");return}let e=await lt.invoke("AppCatalog",{sort:void 0,accountAndUserUuid:{accountUuid:j.uuid,userUuid:j.user.uuid}}).then(r=>{switch(r.type){case"Ok":return r.content;case"CacheEmpty":case"NoAppsAvailable":case"Error":return[]}}).catch(r=>(console.error("Failed to obtain managed apps from the XAM backend."),[])),t=A.nakedDomain();return e.find(r=>{if(!r.links.homePage||!r.signOnUrl)return!1;try{let a=jA.nakedDomainForUrl(r.links.homePage);return t===a}catch{return console.error("Failed to get naked domain for managed app URL."),!1}})};var uWA=()=>!ve()&&WA().socialLoginsEnabled;var lO=6,Vv=new lK("sign-in-with-save-sessions"),EWA=()=>{mt.subscribe(x7,Tce).subscribe(G7,Cce).subscribe(br,_ce)},Tce=A=>A.detail.notifications.filter(j=>j.type==="saveSocialLogin").forEach(j=>{Vv.with(async e=>{if(j.tabId)return Promise.resolve(e.delete(j.tabId))})}),Cce=async A=>{if(!uWA())return;let j=await L6(A.detail.tabId);if(!j){console.error("[Sign in with] Tab no longer exists for session.");return}oo.has(j)||await Vv.with(async e=>{if(H.allAccountHandlersAreLocked){e.set(A.detail.tabId,{type:"pending",data:{...A.detail,nakedDomain:j.nakedDomain(),title:j.title,url:j.unparsedUrl}});return}await ulA(j,A.detail)||(e.set(A.detail.tabId,{type:"ready",data:{...A.detail,expirationNavigationCount:lO,nakedDomain:j.nakedDomain(),title:j.title,url:j.unparsedUrl}}),await la(A.detail.tabId,{type:"saveSocialLogin"}))})};function _ce(){uWA()&&Vv.with(async A=>{for(let[j,e]of A){if(e.type!=="pending")continue;let t=await L6(j);if(!t){A.delete(j);continue}if(await ulA(t,e.data)){A.delete(j);continue}t.nakedDomain()===e.data.nakedDomain?A.set(t.id,{type:"ready",data:{...e.data,title:t.title,expirationNavigationCount:lO}}):A.set(t.id,{type:"ready",data:{...e.data,expirationNavigationCount:lO}}),await la(j,{type:"saveSocialLogin"})}})}async function ulA(A,j){if(await V0(A))return!0;let t=await sO(A);if(!j.linkedAccount){let r=t.some(({signInWithLogins:a})=>a.some(n=>n.provider===j.provider));return r&&console.info("[Sign in with] Should skip save notification because a sign in with field for this provider and site already exists."),r}switch(j.linkedAccount.type){case"Username":{let r=j.linkedAccount.content,a=!!await u6A(t,async({signInWithLogins:n})=>!!await u6A(n,async({provider:o,item:i})=>{if(!i||o!==j.provider)return!1;let s=await Br(i.itemUuid,i.vaultUuid);return s?r.toLowerCase()===s.username?.value.toLowerCase():!1}));return a&&console.info("[Sign in with] Should skip save notification because an item with a matching username for this provider already exists."),a}case"Item":{let{accountUuid:r,vaultUuid:a,itemUuid:n}=j.linkedAccount.content,o=t.some(({item:i,signInWithLogins:s})=>i.overview.b5AccountUUID===r&&s.find(({provider:l,item:c})=>c&&l===j.provider&&c.itemUuid===n&&c.vaultUuid===a));return o&&console.info("[Sign in with] Should skip save notification because the filled provider item has already been saved."),o}default:te(j.linkedAccount)}}async function pWA(A){if(WA().socialLoginsEnabled)return Vv.with(async j=>{let e=j.get(A.id);if(e)switch(e.type){case"pending":{if(H.allAccountHandlersAreLocked)break;if(await ulA(A,e.data)){j.delete(A.id);return}A.nakedDomain()===e.data.nakedDomain?j.set(A.id,{type:"ready",data:{...e.data,title:A.title,expirationNavigationCount:lO}}):j.set(A.id,{type:"ready",data:{...e.data,expirationNavigationCount:lO}}),await la(A.id,{type:"saveSocialLogin"});break}case"ready":if(!w6("saveSocialLogin")&&(e.data.expirationNavigationCount-=1,e.data.expirationNavigationCount<=0)){j.delete(A.id);break}A.nakedDomain()===e.data.nakedDomain&&(e.data.title=A.title),await la(A.id,{type:"saveSocialLogin"});break;default:te(e)}})}async function Sce(A,j){if(A.signInWithAccount)switch(A.signInWithAccount.type){case"Username":{let e=A.signInWithAccount.content;return(await Promise.all(j.map(async r=>{let a=await E6(r);return{item:r,username:a?.username?.value}}))).find(r=>r.username===e)?.item}case"Item":{let e=A.signInWithAccount.content;return j.find(t=>t.uuid===e.itemUuid&&t.vault.uuid===e.vaultUuid&&t.overview.b5AccountUUID===e.accountUuid)}default:te(A.signInWithAccount)}}async function Hce(A,j){let e=await zj.loadItemCache();return e?e.items(ie.combine(ie.userSelected(mr(),void 0,void 0,e),t=>j?t.overview.b5AccountUUID?j===t.overview.b5AccountUUID&&ie.signInWithProviderLogins(A)(t):!1:ie.signInWithProviderLogins(A)(t)),d6.faved):[]}async function mWA(A,j){let e=j.tab.id;if(!e)throw new Error("invalidTab");let{showRichIcons:t}=WA();return Vv.with(async r=>{let a=r.get(e);if(!a||a.type!=="ready")throw new Error("invalidSession");let{displayName:n,icon:o}=await jA.signInWithProviderConfig(a.data.provider),i=await jA.getRichIconForUrl(a.data.url,a.data.title,t),s=await jA.inferBestTitle(a.data.title,a.data.url)??a.data.title;return{icon:i,providerDisplayString:n,providerIcon:o,title:s}})}async function BWA(A,j){let e=It(j.tab);if(!e)throw new Error("invalidTab");let t=await Vv.with(async s=>{let l=s.get(e.id);if(!(!l||l.type!=="ready"))return s.delete(e.id),{provider:l.data.provider,tabId:e.id,title:l.data.title,url:l.data.url,signInWithAccount:l.data.linkedAccount}});if(!t)throw new Error("invalidSession");let r=await Hce(t.provider),a=await zj.loadItemCache(),n=s=>{let l=s.overview.b5AccountUUID??a?.accountForVaultID(a6(s.vault))?.uuid;if(l)return{type:"Item",content:{accountUuid:l,vaultUuid:s.vault.uuid,itemUuid:s.uuid}}},o=await Sce(t,r),i;o?i=n(o):r.length===0?i={type:"Provider"}:r.length===1&&(i=n(r[0])),qn(e,Je,{name:"sign-in-with-context",data:{context:t,suggestedItem:i}})}function gWA(A,j){let e=j.tab.id;if(!e){console.error("[Sign in with] Invalid tab id when cancelling session.");return}Vv.with(async t=>{t.delete(e)})}var Mce=p`background/inline-handler.ts`,ElA=(A,j)=>{let e=A.name.toLowerCase(),t=j.name.toLowerCase();return e<t?-1:e>t?1:0};async function qWA(A,{tab:j,frame:e}){let t;A.data.targetParent&&(t=await e.parent());let r=typeof t=="number"?{frameId:t}:{};return new Promise(a=>{chrome.tabs.sendMessage(j.id,JSON.parse(A.data.message),r,a)})}function xWA(A,{tab:j}){let e={type:"targeted-inline-message",data:{message:A.data.message}};kh().sendMessage(j.id,aj.assertLogSafe("inline-menu"),e)}function vWA(A){}async function GWA(A,j){let e=await jA.analyzePage({unparsedUrl:j.tab.url,title:j.tab.title,frames:[A.data]},!0,await MP()),t=e.designations.fields[0],r=t?.autofillType??wj.None,a=t?.formDesignation??zc.None,n=t?.correctAutocompleteOff??!1;return{fieldDesignation:r,formDesignation:a,requiresInteractionForMenu:n,suggestions:e.suggestions}}function fWA(A){eKA(A.data.event)}function FWA(A){aKA(A.data.event)}function bWA(A){tKA(A.data.accountUuid,A.data.event)}function yWA(A){rKA(A.data.accountUuid,A.data.event)}function $WA(A){HM(A.data.event)}function wWA(A){MM(A.data.accountUuid,A.data.event)}function IWA(A){KM(A.data.event)}function PWA(A){nKA(A.data.event)}function OWA(A){SM(A.data.event.eventType,A.data.event.data)}function RWA(A){sKA(A.data.event)}function DWA(A){oKA(A.data)}function TWA(A){iKA(A.data.event)}function CWA(A,j){v0("inline")}async function Kce(A){let{autoSubmitLogins:j}=WA();if(!j||!A.item)return;let{itemUuid:e,vaultUuid:t}=A.item,r=await Br(e,t);if(!(!r||!EoA(r)))return r.username?.value}async function _WA(A,{tab:j,frame:e}){let t=WA(),r=await SE(),n=(await H.getFrozenAccountsInfo()).areAllAccountsFrozen,o=Ah(),i=e.URL()?.toString(),s=i?await jA.signInWithUrlToProvider(i):void 0,l=async()=>{let k=await jA.fillSessionStatus(j.id,j.unparsedUrl);if(!k)return{fillSessionPending:!1,fillPendingUserInteraction:!1,fillSessionAutosubmitGoogleUsername:void 0};let u=k.state.type!=="sign-in-with-provider"&&k.item!==void 0,m=s===an.Google?await Kce(k):void 0;return{fillSessionPending:!0,fillPendingUserInteraction:u,fillSessionAutosubmitGoogleUsername:m}},c=t.inlineSaveEnabled;return{locked:Lt(),basePath:chrome.runtime.getURL("").replace(/\/$/,"")+"/inline",autoshowMenu:t.inlineShowAutomatically,inlineDisabled:!t.inlineEnabled||oo.has(j)||!r,inlineSavingEnabled:c,locale:t.language,canRequestUnlock:await ViA(),appTheme:t.appTheme,numberOfItems:Bt()?3:4,signInWithEnabled:t.socialLoginsEnabled,enabledAutosaveTypes:vnA(),areAllAccountsFrozen:n,signInWithProvider:s,unleashFeatures:o,autosaveTotpEnabled:t.autoSaveTotpEnabled,...await l()}}async function SWA(A,{tab:j}){$6();let{autofillType:e,formDesignation:t,suggestions:r}=A.data;return cWA(j,e,t,r)}async function HWA(A,{tab:j}){$6();let{action:e,fieldDesignation:t,frameIdentifier:r}=A.data.request;await sWA(j,r,t,e),Qb(A.data.contentScriptMetadata)}async function MWA(){let{language:A,appTheme:j}=WA(),e=await Ho(),t=e.find(r=>r.type===_O)??e.find(r=>r.type===lG)??e.find(r=>r.type===sG);if(!t)throw new Error("Unable to open enable Privacy dialog when no accounts are present.");return{appTheme:j,locale:A,response:{type:"Success",data:{suggestedAccountUuid:t.uuid,accounts:e.sort(ElA).map(r=>({uuid:r.uuid,name:r.name,icon:{id:"",sources:[{type:"RichIcon",content:{url:r.avatar,masked:!0}}],shape:ec.RoundedRect}}))}}}}async function KWA(A,{tab:j}){if(!A.data)return{error:"FailedToCreateApiKey"};if(!H.accountIsUnlocked(A.data.accountUuid))return{error:"AccountLocked"};try{await hXA(j,A.data.accountUuid)}catch{return{error:"FailedToCreateApiKey"}}return H0(j,!0),{error:void 0}}async function NWA(A,{tab:j}){let{language:e,appTheme:t}=WA(),{defaultSuggestedVaultId:r,vaultListElements:a}=await vh(void 0,{includeDontSaveOption:!0}),n=await hKA(),o=await jA.inferBestTitle(j.title,j.unparsedUrl);return{locale:e,response:n.length>0?{type:"Success",data:{suggestedVaultId:r,vaultListElements:a,fundingAccounts:n,defaultCardName:o}}:{type:"Error",data:"UnableToGetFundingAccounts"},appTheme:t}}async function LWA(A,{tab:j}){$6();let{frameIdentifier:e,vaultId:t}=A.data,r=t.vaultUuid!==O5,[a,n]=H.defaultSavingLocation(),o=t.accountUuid===OsA?a.uuid:t.accountUuid,i=t.vaultUuid===O5?n.uuid:t.vaultUuid;if(!await UM())return{error:{type:"IntegrationDisabled",content:void 0}};if(H.allAccountHandlersAreLocked)return{error:{type:"AppLocked",content:void 0}};if(r&&!H.accountIsUnlocked(t.accountUuid))return{error:{type:"VaultLocked",content:void 0}};let l=await jA.validatePrivacyCardParams(A.data.params);if(l.type!=="Success")return{error:l.content};let{authorized:c}=await Bv(j,4);if(!c)return{};let k;if(e)try{k=(await J8(j.id,e))?.URL()?.origin}catch{}let u=await jA.createPrivacyCard({params:A.data.params,tabUrl:j.unparsedUrl,frameUrl:k,itemTemplate:JSON.stringify(await jl("002")),apiKey:A.data.apiKey,useSandboxApi:qnA()});if(u.type!=="Success")return{error:u.content};let m=q.decode(u.content.item,q.json.pipe(LE),{mode:"unsafe_report_only",file:Mce,func:p`handleFillNewPrivacyCard`}).unwrap(),F=await BKA(m,o,i,r);return F.isErr()?{error:{type:"SaveFailed",content:void 0}}:(H0(j,!0),No(j,F.value,"INLINE",{skipItemUsage:!r}),{})}async function zWA(){$6();let A=[],[j,e]=await Promise.all([await R0(),Ho()]);for(let r of j){if(!r.canCreateVendorCard)continue;let a=e.find(n=>n.uuid===r.accountUuid);a&&A.push(a)}if(A.length===0)return{type:"Error"};A.sort(ElA);let t=q.generateUUID();return{type:"Success",data:{accounts:A.map(r=>({uuid:r.uuid,name:r.name,icon:{id:r.uuid,sources:[{type:"RichIcon",content:{url:r.avatar,masked:!0}}],shape:ec.RoundedRect}})),idempotentKey:t}}}async function UWA(A,{tab:j}){$6();let{accountUuid:e}=A.data,t=(await R0()).find(i=>i.accountUuid===e);if(!t)return console.warn(`Unable to create Brex card as credentials are missing from system vault for account uuid <${e}>`),{type:"Error",data:{type:"UnableToGetToken",data:void 0}};if(!t.canCreateVendorCard)return{type:"Error",data:{type:"IntegrationDisabled",data:void 0}};if(H.allAccountHandlersAreLocked)return{type:"Error",data:{type:"AppLocked",data:void 0}};if(!A.data.title||!A.data.title.length)return{type:"Error",data:{type:"Validation",data:"TitleRequired"}};if(!A.data.spendLimit)return{type:"Error",data:{type:"Validation",data:"SpendLimitRequired"}};if(!A.data.spendLimitDuration)return{type:"Error",data:{type:"Validation",data:"SpendLimitDurationRequired"}};if(!A.data.lockCardType)return{type:"Error",data:{type:"Validation",data:"LockAfterRequired"}};if(!A.data.reasonForCard||!A.data.reasonForCard.length)return{type:"Error",data:{type:"Validation",data:"ReasonForCardRequired"}};let{authorized:r}=await Bv(j,0);if(!r)return{type:"Error",data:{type:"DidNotAcceptFill",data:void 0}};let a=new Date;A.data.lockCardType.type==="seven-days"?a.setDate(a.getDate()+7):A.data.lockCardType.type==="one-month"?a.setMonth(a.getMonth()+1):A.data.lockCardType.type==="one-year"?a.setFullYear(a.getFullYear()+1):A.data.lockCardType.type;let n=await Nd(t.accountUuid,t.accountId,"brex");if(!n)return console.warn("Failed to get token when generating a Brex card"),{type:"Error",data:{type:"UnableToGetToken",data:void 0}};let o=await nVA(Lm(n.context.clientId).type,n.accessToken,t.accountId,A.data.title,A.data.spendLimit,A.data.spendLimitDuration,A.data.reasonForCard,A.data.idempotentKey,A.data.lockCardType.type==="none"?void 0:a.toISOString().split("T")[0]);if(o.isOk()){let i=await B5(t.accountUuid,o.value.cardId);if(!i)return console.error("Unable to find created card"),{type:"Error",data:{type:"UnableToCreateCard",data:void 0}};await No(j,i,"INLINE",{skipItemUsage:!0})}else if(o.isErr())return console.error(o),{type:"Error",data:{type:"UnableToCreateCard",data:void 0}};return{type:"Success",data:void 0}}async function VWA(){return ViA()}async function XWA(){if(re.getDesktopAppState().type==="Connected")return s7();if(Bt()){let A=await Vm();if(A.isOk()&&A.value.accountsState.type==="allAccountsUnlockable"&&A.value.biometryType!==il.None)return $6(),Ov(!0).then(()=>{});m0()}return MN()?(e3A(),HE()):console.error("Unable to request unlock from Desktop app or popup")}function JWA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");i5A(e.id,e.unparsedUrl),pWA(e),IzA(e),A2.onPageReady(e.id),mNA(e),dWA(e.id),clA(e)}async function WWA(A,j){if(!j.tab.id)throw new Error("InvalidTab");return jA.clearFillSession(j.tab.id)}async function QWA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");return clA(e)}async function YWA(){let A=[];for(let j of await Ho()){if(j.locked)continue;let e=await CK(j.uuid),t=[];for(let{accountId:r}of e)t.push({id:r});t.length&&A.push({...j,fastmailAccounts:t})}if(A.length===0)return{type:"Error",data:"UnknownError"};if(A.length>1||A[0].fastmailAccounts.length>1){let j=[],e={};for(let[t,r]of A.entries()){let a=!1;for(let n of r.fastmailAccounts)try{if(n.id in e)n.name=e[n.id];else{let o=await Nd(r.uuid,n.id,"fastmail");if(!o)throw new Error("Could not obtain access token.");let i=await jA.getEmailAliasAccountName(o.accessToken,n.id);n.name=i,e[n.id]=i}a=!0}catch{console.error(`Unable to obtain alias account name (accountId: ${n.id})`),TK(r.uuid,n.id,"fastmail")}a||j.push(t)}for(let t of j)A.splice(t,1);if(A.length===0)return{type:"Error",data:"UnknownError"}}return{type:"Success",data:{accounts:A.sort(ElA).map(j=>({uuid:j.uuid,name:j.name,icon:{id:"",sources:[{type:"RichIcon",content:{url:j.avatar,masked:!0}}],shape:ec.RoundedRect},emailAliasAccounts:j.fastmailAccounts}))}}}async function ZWA(A,{tab:j}){let{accountUuid:e,emailAliasAccountId:t}=A.data;try{await _m(j.id,j.unparsedUrl,async r=>jA.endEmailAliasSession(j.id,r),async()=>jA.endEmailAliasSession(j.id))}catch{}try{return await jA.startEmailAliasSession(j,e,t),{type:"Success",data:void 0}}catch{return{type:"Error",data:"Error occurred starting session."}}}function Nce(A){let j=oA("An error has occurred while generating the Masked Email.");switch(A.type){case"AliasError":switch(A.content){case mG.UnverifiedUser:return oA("Your account is unverified. Sign in to Fastmail to verify the selected account.");case mG.RateLimit:return oA("You've reached the daily limit for Masked Email creation for the selected account.");case mG.OverQuota:return oA("You've reached the maximum Masked Email creation quota for the selected account.");default:return j}case"InvalidSession":case"NakedDomainFailed":default:return j}}async function AQA(A,{tab:j}){try{let e=await _m(j.id,j.unparsedUrl,async t=>jA.generateEmailAlias(j,t));return e.type==="Success"?{type:"Success",data:e.data}:{type:"Error",data:Nce(e.data)}}catch{return{type:"Error",data:oA("An error has occurred while generating the Masked Email.")}}}async function jQA(A,{tab:j}){try{await _m(j.id,j.unparsedUrl,async e=>jA.endEmailAliasSession(j.id,e),async()=>jA.endEmailAliasSession(j.id))}catch{console.error("Could not clean up alias session when cancelled.")}}async function eQA(A,{tab:j}){let e=oA("An error occurred while enabling and filling the Masked Email."),t=A.data;if(t){try{if((await _m(j.id,j.unparsedUrl,async n=>jA.enableEmailAliasSession(j,n))).type==="Failure")return{type:"Error",data:e}}catch{return{type:"Error",data:e}}n8(j,t)}else return{type:"Error",data:e};return{type:"Success",data:await n8(j,t)}}function tQA(){if(!Bt())return;let A=console.info.bind(console);console.info=(...n)=>{t({message:plA(n),level:dB.Info}),A(...n)};let j=console.warn.bind(console);console.warn=(...n)=>{t({message:plA(n),level:dB.Warn}),j(...n)};let e=console.error.bind(console);console.error=(...n)=>{t({message:plA(n),level:dB.Error}),e(...n)},mt.subscribe("error",r).subscribe("unhandledrejection",a);function t(n){XUA(n).then(o=>{o.isErr()&&e("Failed to send log to native process")})}function r(n){let o=`Uncaught exception: ${n.message} 		  (${n.filename}:${n.lineno}:${n.colno}).`;t({message:o,level:dB.Exception})}function a(n){let o=`Unhandled Promise Rejection: ${n.reason}`;t({message:o,level:dB.Exception})}}function plA(A){return A.reduce(function(j,e,t){return t>0?j+" "+e.toString():e.toString()},"")}var rQA=()=>{V("settings-account-sign-out",QLA),V("can-user-delete-account",YLA),V("delete-account-permanently",ZLA,!0),V("get-account-list",RN,!0),V("get-accounts-and-vaults-configuration",nzA,!0),V("open-account-profile-page",e9A),V("open-account-in-opb",t9A),V("open-default-account-profile-page",r9A),V("update-account-exclusion",XLA),V("verify-account-password",n9A,!0),V("validate-account-password",O3A),V("handle-is-active-account-guest",T3A),V("handle-is-active-account-business",C3A),V("get-user-name-for-account",I3A),V("redeem-free-family",wMA)};var aQA=()=>{V("get-activation-hub-tasks",lzA),V("complete-activation-hub-task",czA),V("open-tutorial-in-new-tab",dzA),V("get-activation-hub-tooltip-status",q3A),V("set-activation-hub-tooltip-status",x3A),V("complete-tutorial-activation-hub-task",DNA)};function Uce(A){try{return A?.useChrome||browser?.runtime===void 0?async j=>nQA(j):async j=>browser.runtime.sendMessage(j)}catch{return async e=>nQA(e)}}async function oQA(A,j){let t=await Uce(j)(A).catch(r=>{let a=r instanceof Error?r.message:String(r);if(a.includes("Receiving end does not exist"))`${A.name}`;else if(a.includes("The message port closed"))`${A.name}`;else if(!a)`${A.name}`;else throw new Error(`Unhandled error response received for message <${A.name}>`)});if(hdA(t))switch(t.type){case"Success":return t.data;case"Error":throw new Error(t.message??`Error response received for message <${A.name}>`)}if(t)throw new Error(`Unknown response type received for message <${A.name}>`);return t}async function nQA(A){return new Promise((j,e)=>{chrome.runtime.sendMessage(A,t=>{if(t?.type==="Success")j(t);else{let r=chrome.runtime.lastError;e(new Error(r?.message))}})})}var cO=J(vD()),Vce="background/offscreen.html",Xce="ignored",Jce=new NE,iQA=async(A,j,e)=>Jce.push(async()=>{await Wce(j);let t=await oQA({name:A,data:e});return await Qce(),t}),sQA=async()=>{if(!ka())return!1;let A=await cp(),j=(0,cO.coerce)(A.version),e=(0,cO.coerce)("109.0.0");return!j||!e?!1:(0,cO.gte)(j,e)},Wce=async A=>chrome.offscreen.createDocument({url:Vce,reasons:A,justification:Xce}),Qce=async()=>chrome.offscreen.closeDocument();var a2="migrateStorageTimestamp",Zce="\u{1F5C4} window.localStorage migration";var lQA="No entries found in window.localStorage to migrate.",Ade="Using the app page to migrate window.localStorage",jde="Using offscreen documents to migrate window.localStorage",Xv=new rt(Zce),cQA=async()=>{let{migrateStorageTimestamp:A}=await browser.storage.local.get(a2);if(typeof A=="string"){Xv.info(`Migrated on: ${A}`);return}await sQA()?(Xv.info(jde),iQA("GetStorageEntries",[chrome.offscreen.Reason.LOCAL_STORAGE]).then(async j=>mlA(j))):(Xv.info(Ade),isA())};async function dQA(A){let[j,e,t,r]=await Promise.all([WA().language,re.getDesktopAppState(),Lb(),ui()]),a=await Ho();return Qb(A.data),{accounts:a,brainVersion:"edba9ccae448",desktopAppState:e,locale:j,version:t,buildNumber:r}}async function kQA(){let{language:A,appTheme:j}=WA(),e=Ah();return{appTheme:j,locale:A,locked:Lt(),connectivityStatus:await Ft.connectivityStatus(),canRequestUnlock:await O0(),unleashFeatures:e}}async function uQA(A){ssA(),await mlA(A.data)}async function mlA(A){let j=new Map(A);if(j?.size>0){for(let[e,t]of j)await browser.storage.local.set({[e]:t}),Xv.info(`Migrated storage entry: ${e}`);await browser.storage.local.set({[a2]:new Date().toString()}),Xv.info(`Migrated ${j.size} entries.`),browser.runtime.reload()}else vj.setItem(a2,new Date().toString()),Xv.info(lQA)}var EQA=()=>{V("app-ready",dQA),V("get-app-configuration",kQA)};var pQA=()=>{V("force-xam-launcher-account-sync",S9A),V("get-xam-app-launcher-account-list",_9A,!0),V("get-app-catalog-url-for-account",H9A,!0)};var BlA=J(Dd());var mQA=async(A,j)=>{let e=It(j.tab);if(!e)throw new Error("unknown");return Vl.with(async t=>{let r=t.get(e.id);if(!r||!r.notificationState)throw console.error("[Autosave] Session no longer exists for tab."),new Error("expiredSession");return ade(e,r)})},BQA=async(A,j)=>{let e=It(j.tab);if(!e)throw new Error("unknown");return Vl.with(async t=>{let r=t.get(e.id);if(!r||!r.notificationState)throw console.error("[Autosave] Session no longer exists for tab."),new Error("expiredSession");try{let a=await ide(e,r,A.data);return r.notificationState=void 0,zi(e)?qQA():await WM(a)}catch(a){let n=H.findAccountHandlerByUuid(A.data.type==="new"?A.data.data.vaultSelector.accountUuid:i7(A.data.data.id).accountUuid);throw rj(new xe({errorClass:p`handleAutosaveNotification`,message:p`Autosave failed to save item.`,stackOverrideError:a instanceof Error?a:void 0,userUuid:n?.user?.uuid?W(n?.user?.uuid):void 0})),new Error("save")}})},gQA=async(A,j)=>{let e=It(j.tab);if(!e)throw new Error("unknown");return Vl.with(async t=>{let r=t.get(e.id);if(!r||!r.notificationState)throw console.error("[Autosave] Session no longer exists for tab."),new Error("expiredSession");return tde(e,r,A.data)})},hQA=async(A,j)=>{let e=j.tab.id;if(!e){console.error("[Autosave] Could not dismiss non-existent tab.");return}return Vl.with(async t=>{let r=t.get(e);if(!r)return console.error("[Autosave] Could not dismiss because session no longer exists for tab."),Promise.resolve();r.notificationState=void 0})},tde=async(A,j,e)=>{let t=async n=>{try{let o;if(n)o=(await zj.loadItemCache())?.itemWithUUID(n)?.overview.b5AccountUUID;else{let[i]=H.defaultSavingLocation();o=i.uuid}o&&Cc(o,NA.UsoTelemetryActions.AutoSaveEditItem)}catch{}},r;if(e){let{itemUuid:n}=i7(e);t(n),r={name:"update-item",data:{itemUuid:n}}}else t(void 0),r={name:"new-item"};let{templateUuid:a}=Ul[j.saveType];qn(A,a,{name:"save-object",data:await glA(j)},r),Ev(A.id)},qQA=()=>({icon:{id:"autosave-tutorial-icon",sources:[{type:"DefaultIcon",content:{file:lr.TutorialGlobe}}]},title:oA("Any Website"),subtitle:"user.name@example.com"}),rde=async(A,j,e)=>{if(zi(A))return qQA();switch(j){case"login":{let{showRichIcons:t}=WA(),r=wE(e,wj.Username)??"\u2014",[a,n]=await Promise.all([jA.getRichIconForUrl(e.urls[0],e.title??"",t),jA.inferBestTitle(e.title??"",e.urls[0])]);return{icon:a,title:n??oA("Login"),subtitle:r}}case"creditCard":{let t=wE(e,wj.CcNumber)??"\u2014";return{icon:{id:"",sources:[{type:"DefaultIcon",content:{file:await JM(t,Ul[j].templateUuid),masked:!1,description:void 0}}],shape:ec.RoundedRect},title:e.title??oA("Credit Card"),subtitle:await jA.concealCreditCardNumber(t)}}case"identity":{let t=wE(e,wj.GivenName)??"",r=wE(e,wj.FamilyName)??"",a=`${t} ${r}`.trim()||"\u2014";return{icon:{id:"",sources:[{type:"DefaultIcon",content:{file:await JM(a,Ul[j].templateUuid),masked:!1,description:void 0}}],shape:ec.RoundedRect},title:e.title??oA("Identity"),subtitle:a}}default:te(j)}},ade=async(A,j)=>{let{templateUuid:e}=Ul[j.saveType],t=await glA(j),r;try{r=await jA.getEmailAliasSessionStatus(A.id)}catch(s){Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`sendVaultItemUpdate`,message:p`Failed to load masked email session for tab.`,stackOverrideError:s instanceof Error?s:void 0}))}let{defaultSuggestedVaultId:a,vaultListElements:n}=await vh(r,{includeDontSaveOption:!1}),o=[];try{o=await ode(A,e,t,r)}catch(s){Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`AutosaveGetConfiguration`,message:p`Failed to load updatable items for session.`,stackOverrideError:s instanceof Error?s:void 0}))}let i;try{NP()&&(i=await nde(await KP(e,t)))}catch(s){Ze(s)?rj(s):rj(new q.LoggableError({errorClass:p`AutosaveGetConfiguration`,message:p`Failed to check if saveObject is duplicate.`,stackOverrideError:s instanceof Error?s:void 0}))}return{preview:await rde(A,j.saveType,t),saveType:j.saveType,vaultListElements:n,defaultSuggestedVaultId:a,updatableItemListElements:o,duplicateItemPreview:i}},nde=async A=>{if(!A)return;let{showRichIcons:j}=WA();return{title:A.title,subtitle:A.subtitle,icon:await Ei(A,60,j)}},ode=async(A,j,e,t)=>{let r=await jA.nakedDomainForUrls(e.urls).then(l=>l.map(([,c])=>c)),a=await p7(t),n=await AO(j,r,t),o=n.length>0?await jA.autoSaveMatchingItems(n,e,j):[],i=n.filter(l=>o.includes(l.uuid)),s=i.length>0?i[0]:void 0;return _v(a,n,s?.localId)},ide=async(A,j,e)=>{let{templateUuid:t}=Ul[j.saveType],r;try{r=await DK(A,t)}catch(i){rj(new xe({errorClass:p`saveItemFromSession`,message:p`Autosave failed to check for masked email data`,stackOverrideError:i instanceof Error?i:void 0}))}let a=await jl(t),n=await glA(j);if(!a)throw new xe({errorClass:p`saveItemFromSession`,message:aj.assertLogSafe(`Autosave failed to load item template ${t}`)});let o=await sde(a,n,r,e);return zi(A)?(I5(A,o),o):lde(A,j,o,e)},glA=async A=>{let{templateUuid:j}=Ul[A.saveType];return A.notificationState?A.notificationState.saveObject:jA.createSaveObject(j,A.collectedPageDetails)},sde=async(A,j,e,t)=>{let r=async a=>jA.mergeSaveObjectWithItem(A,a,j,e);switch(t.type){case"new":{let a=t.data.vaultSelector,n=ah(a.accountUuid,a.vaultUuid,await r(void 0));if(n.isErr())throw Error("unknown");return n.value}case"update":{let{itemUuid:a}=i7(t.data.id),n=await Br(a);if(!n)throw new Error("missingItem");return Vb(n,await r(n))}default:te(t)}},lde=async(A,j,e,t)=>{try{await SK(A,e)}catch{}let r=await Da(e,!1);try{if(r.templateUuid&&r.overview.b5AccountUUID)switch(t.type){case"new":Cc(r.overview.b5AccountUUID,cde(j,r.templateUuid)),ft("ItemCreate",{template_uuid:BlA.TelemetryString.assertSafeForTelemetry(r.templateUuid),status:"SUCCESS",create_method:"AUTOSAVE"},r.overview.b5AccountUUID);break;case"update":Cc(r.overview.b5AccountUUID,dde(j,r.templateUuid)),ft("ItemUpdate",{template_uuid:BlA.TelemetryString.assertSafeForTelemetry(r.templateUuid),status:"SUCCESS",update_method:"AUTOSAVE"},r.overview.b5AccountUUID);break;default:te(t)}}catch{}return r};function cde(A,j){switch(j){case Je:return A.generatePasswordDetails?NA.UsoTelemetryActions.AutoSaveSaveItemSpg:NA.UsoTelemetryActions.AutoSaveSaveItem;case ea:return NA.UsoTelemetryActions.AutoSaveSaveItemCreditCard;case O6:return NA.UsoTelemetryActions.AutoSaveSaveItemIdentity;default:return NA.UsoTelemetryActions.AutoSaveSaveItem}}function dde(A,j){switch(j){case Je:return A.generatePasswordDetails?NA.UsoTelemetryActions.AutoSaveUpdateItemSpg:NA.UsoTelemetryActions.AutoSaveUpdateItem;case ea:return NA.UsoTelemetryActions.AutoSaveUpdateItemCreditCard;case O6:return NA.UsoTelemetryActions.AutoSaveUpdateItemIdentity;default:return NA.UsoTelemetryActions.AutoSaveUpdateItem}}var xQA=J(Dd());var vQA="AUTOSAVE_2FA_INTERACTION",GQA=async A=>{let j=await p7(void 0),e=await AO(Je,[A.nakedDomain()],void 0);return{accounts:j,updateableItems:e}};async function fQA(A,j){let e=It(j.tab);if(!e){console.error("Couldn't not create tabInfo for tab");return}let t=await Dm(e.id);if(!w6("autosaveTotp")&&t.length>0)return;let r=await o8();if(r.isOk()){if(!H.allAccountHandlersAreLocked&&(await GQA(e)).updateableItems.length===0)return;await la(e.id,{type:"autosaveTotp",params:{secret:r.value}})}}var FQA=async(A,j)=>{let e=It(j.tab);if(!e)throw new Error("unknown");let{accounts:t,updateableItems:r}=await GQA(e);return{updatableItemListElements:await _v(t,r,void 0),firstRun:vj.getItem(vQA)!=="true"}},bQA=async(A,j)=>{let e=It(j.tab);if(!e)throw new Error("unknown");let t=A.data.secret,{itemUuid:r}=i7(A.data.id),a=await Ede(r,t,A.data.overwrite);if(!a)return{type:"overwrite"};vj.setItem(vQA,"true");try{ude(e,t)}catch{console.error("Failed to fill one-time password into the page.")}return{type:"success",data:await WM(a)}};async function ude(A,j){let e=await jA.generateOneTimePasswordFromUrl(j),t=await Cr(A);t0(A,t,{fillTargets:[{type:"Url",data:A.unparsedUrl}],fields:[{designation:wj.OneTimeCode,fieldTypes:[Ch.Text,Ch.Password],value:e,label:"",htmlId:"",htmlName:"",checked:!1,restricted:!0}]},!1)}async function Ede(A,j,e){let t=await Br(A);if(!t)throw new Error("missingItem");t.details.sections||(t.details.sections=[]);let r;for(let n of t.details.sections)if(n.fields){for(let o of n.fields)if(xA.VaultItem.isTotpField(o)){r=o;break}}if(r)if(e)r.v=j;else return;else t.details.sections.push({title:"",fields:[{k:"concealed",n:"TOTP_"+q.generateUUID(),v:j,t:oA("one-time password")}],name:"Section_"+q.generateUUID()});let a=await Da(t);try{a.templateUuid&&a.overview.b5AccountUUID&&(Cc(a.overview.b5AccountUUID,NA.UsoTelemetryActions.AutoSaveUpdateItem2fa),ft("ItemUpdate",{template_uuid:xQA.TelemetryString.assertSafeForTelemetry(a.templateUuid),status:"SUCCESS",update_method:"AUTOSAVE",one_time_password_added:!0},a.overview.b5AccountUUID))}catch{}return a}var yQA=()=>{V("autosave-capture",ENA),V("autosave-submission",pNA),V("autosave-configuration",mQA),V("autosave-save",BQA),V("autosave-edit",gQA),V("autosave-dismiss",hQA),V("autosave-qr-code-detected",fQA),V("autosave-2fa-configuration",FQA),V("autosave-2fa-save",bQA)};var $QA=async(A,j)=>{let{opid:e}=A.data,t=It(j.tab);return t?jA.autosubmitDetectElements({opid:e,pageDetails:await Cr(t)}):[]};var wQA=()=>{V("autosubmit-detect-elements",$QA)};function IQA(){return{buildNumber:ui(),setOldAttribute:!Xi.hasInsiderAccount()}}async function PQA(){let A=await bD(),j=!vt()&&!vi();return{isPinned:A||j}}var OQA=()=>{V("get-build-number",IQA),V("b5Ready",NJA)};var RQA=()=>{V("get-initial-benchmark-data",WVA),V("run-benchmark",QVA),V("export-benchmark",YVA)};var DQA=()=>{V("get-biometry-config",Vi.getBiometryConfig),V("set-biometry-config",Vi.setBiometryConfig)};var TQA=J(Xn()),mde=7*24*60*60*1e3,CQA="outdated-browser-notice-is-dismissed",_QA=()=>{let A=co.decode(vj.getItem(CQA));if((0,TQA.isLeft)(A))return!1;let j=A.right.getTime();return new Date().getTime()-j<mde},SQA=()=>vj.setItem(CQA,new Date().toISOString());var HQA=()=>{V("get-outdated-browser-notice-is-dismissed",_QA),V("set-outdated-browser-notice-is-dismissed",SQA),V("checkExtensionPinStatus",PQA)};var MQA=()=>{V("trigger-update-connectivity-status",()=>{Ft&&Ft.updateConnectivityStatusHandler()}),V("attempt-reconnect",Mo)};var KQA=()=>{V("reset-database",A9A)};var NQA=()=>{V("get-trusted-device-enrollments",jzA),V("start-trusted-device-enrollment",ezA),V("cancel-trusted-device-enrollment",tzA),V("get-active-device-enrollment",rzA),V("set-active-device-enrollment",azA)};var LQA=()=>{V("ignore-device-trust-warning",X2A),V("recheck-device",W2A),V("force-device-trust-success",J2A),V("enroll-device",Q2A),V("kolide-finished-rechecking",Y2A),V("kolide-device-snoozed",Z2A),V("kolide-device-sign-in-success",ALA),V("kolide-user-started-download",jLA),V("kolide-device-registered",eLA),V("autofill-device-recheck",tLA),V("autofill-clear-snoozes",rLA)};var zQA=()=>{V("get-user-devices",kzA)};var UQA=async()=>{if(!Pu())return console.warn("Diagnostics logging is not enabled."),!1;let A;try{A=await Rd.getConsoleLogs()}catch{A=[]}try{let j=UVA(),e={created_at:Date.now()/1e3,uuid:Ng(),system:await zVA(),accounts:j,logs:y5(A),crash_report_entries:[]};_0(VVA(),e);for(let t of j)ft("ExportDiagnosticsReport",{report_source:"B5X",export_status:"SUCCESSFUL",browser_console_logs_included:A.length},t.uuid);return!0}catch(j){return Ze(j)?(console.error("Error generating diagnostics report:",j),rj(j)):(console.error("Unable to generate diagnostics report"),rj(new xe({errorClass:p`DiagnosticError`,message:p`Unable to generate diagnostics report`,severityLevel:"error",stackOverrideError:j}))),!1}};var VQA=()=>{V("generate-diagnostic",UQA)};async function XQA(A){return await jA.editItemFilter(A.data)}function JQA(A){}var WQA=()=>{V("edit-item-filter",XQA),V("edit-item-update",JQA)};async function QQA(A){let{accountUrl:j,accountUuid:e}=A.data,t=H.getAccountHandlers.find(n=>n.uuid===e),r=Bde(j);if(!t?.client?.CTX)return console.warn(`No client context for account ${A.data.accountUuid}, unable to get exchangable session token`),{tokenUrl:r,token:void 0};if(!t.hasBackOfficeFeature?.b2bXamTrelica)return console.warn(`Account ${t.uuid} does not have the required features for this operation`),{tokenUrl:r,token:void 0};let{token:a}=await aA.getCentralAccountHubToken(t.client.CTX.session).catch(n=>(console.error(`Error getting token for ${t.uuid}: ${n}`),{tokenUrl:r,token:void 0}));return{tokenUrl:r,token:a}}function Bde(A){let j,e=jA.nakedDomainForUrl(A);if(e==="b5local.com")return"https://localhost:3030";switch(e){case"b5dev.com":case"b5dev.eu":case"b5dev.ca":j="dev";break;case"1password.ca":case"1password.com":case"b5staging.com":j="app";break;case"1password.eu":j="eu";break;case"b5test.ca":case"b5test.eu":case"b5test.com":j="qa";break;default:j="app";break}return`https://${j}.trelica.com`}var YQA=()=>{V("open-trelica-catalog",QQA)};function ZQA(A){return ZA.hasPreRegistrationFlag(A.data)}function AYA(A){return ZA.accountHasFlag(A.data.accountUuid,A.data.feature)}function jYA(A){return ZA.anyAccountHasFlag(A.data)}var eYA=()=>{V("has-pre-registration-flag",ZQA),V("account-has-flag",AYA),V("any-account-has-flag",jYA)};var tYA=()=>{V("set-fullscreen-notification",zo),V("remove-notification-frame",zo),V("set-page-inert",zo),V("inline-menu-ready",zo),V("inline-menu-opened",zo),V("inline-menu-closed",zo),V("focus-inline-menu-frame",zo),V("remove-inline-menu",zo),V("resize-inline-menu",zo),V("notification-exiting",(A,j)=>{if(vt()){lj("notification-exiting",A.data,{tabId:j.tab.id});return}lj("notification-exiting",A.data)}),V("rehydrate-notifications",(A,j)=>{if(vt()){lj("rehydrate-notifications",A.data,{tabId:j.tab.id});return}lj("rehydrate-notifications",A.data)})},zo=async(A,j)=>lj(A.name,A.data,{tabId:j.tab.id}).then(e=>{if(e.ok)return e.data;switch(e.type){case"error":throw e.error;case"nolistener":throw new Error("NoRelayedListener");default:te(e)}});var rYA=()=>{V("page-ready",JWA),V("frame-manager-heartbeat",vWA),V("analyze-frame",GWA),V("resolve-pending-fill",QWA),V("clear-fill-session",WWA),V("key-down",zo)};var gde=(A,j)=>{let e=j?.find(t=>t.account.uuid===A);if(e)return{configuredAppsCount:e.deviceTrustUrlPatterns?.length||0}},aYA=async A=>{let j=H.getAccountHandlers.filter(h=>h.serveraccount.type==="B"),e=[],t=await SA.getDatabase().getAllDeviceTrustConfigs();for(let h of j){let O=h.serveraccount.name,Q=h.accountIdentifier.accountUUID,AA=h.serveraccount.type,nA=h.isLocked,bA=Array.from(ZA.getAllFlagsForAccount(Q)).map(Qj=>({flagName:Qj.name,isEnabled:Qj.enabled})),XA=h.serveraccount?.tier?.features?Array.from(h.serveraccount.tier.features).map(Qj=>({flagName:Qj,isEnabled:!0})):[],dj=[];!h.isLocked&&h.hasBackOfficeFeature?.b2bXamDeviceTrustEpmIntegration&&dj.push({flagName:"b2bXamDeviceTrustEpmIntegration",isEnabled:!0});let yA=!1,tj=!1;for(let Qj of t)Qj.account.uuid===Q&&(yA=!0,tj=Qj.enabled);let LA={userHasConfig:yA,isEnabled:tj};e.push({accountName:O,accountUuid:Q,accountTypeCode:AA,accountIsLocked:nA,enabledClientFeatures:bA,enabledServerAccountFeatures:XA,enabledBackOfficeAccountFeatures:dj,deviceTrustConfig:LA})}let r=await Eh(H.getAccountHandlers,ZA,SA),a=r.problems.every(h=>h.type!=="browser"),n=r.problems.every(h=>h.type!=="client"),o=r.problems.every(h=>h.type!=="account"),i=r.problems.every(h=>h.type!=="account"),s=r.problems.every(h=>h.type!=="user"),l=await Ba(),c=r.problems.every(h=>h.type!=="account"),k=a&&n&&c?"starting":"disabled",u=l?.state.clientState?l.state.clientState:k,m={isRegistered:l?.state.isRegistered??!1,health:l?.state.health,localConnectionState:u},F={lastKnownServerVersion:void 0,configuredAppsCount:0,lastSyncTimestamp:void 0},G=(j.find(h=>!h.isLocked&&(h.serveraccount?.tier?.features?.includes("b2bXamDeviceTrustEpmIntegration")||h.hasBackOfficeFeature?.b2bXamDeviceTrustEpmIntegration))||j.find(h=>!h.isLocked)||j[0])?.uuid;if(G){let h=await SA.getDatabase().findAccountByUUID(G),O=0;l&&(O=gde(G,l.accountData)?.configuredAppsCount??0),F={lastKnownServerVersion:h?.kolideAppsVersion??void 0,configuredAppsCount:O,lastSyncTimestamp:h?.updatedAt?new Date(h.updatedAt).getTime():void 0}}let x={browserSupported:a,clientFeatureEnabled:n,serverAccountFeatureEnabled:o,backOfficeAccountFeatureEnabled:i,accountHasDeviceTrustConfig:s,userFeatureEnabled:s,kolideAgentComms:m,appListSync:F},R=Lt()?"Locked":"Unlocked",P;try{P=re.getDesktopAppState()}catch(h){console.warn("HealthStatus: Failed to get DesktopAppState from dcmh:",h)}let D={lockState:R,desktopAppState:P,buildNumber:ui(),buildChannel:Mv()},y={accounts:e,deviceTrust:x,general:D};return y},nYA=async A=>{if(!H.getAccountHandlers.some(r=>r.serveraccount.type==="B"))return{shouldShowHealthCheck:!1};let j=DE(),e=lt.initState,t;return e==="initialized"?t=await lt.invoke("HealthCheck",void 0).catch(r=>{}):t=void 0,{shouldShowHealthCheck:!0,xamBackendInitState:e,healthCheck:t,enabledContext:j}};var oYA=()=>{V("get-system-health",aYA),V("get-app-launcher-health",nYA)};var iYA=()=>{V("heartbeat",y3A)};var sYA=()=>{V("get-contextual-import-dismiss",n3A),V("set-contextual-import-dismiss",o3A),V("get-import-nudge-dismiss",i3A),V("set-import-nudge-dismiss",s3A)};var lYA=()=>{V("show-virtual-card-dialog",U3A)};var cYA=()=>{V("get-privacy-api-key",zLA),V("set-privacy-api-key",ULA)};var dYA=()=>{V("invite-users-via-email",uzA)};var kYA=(A={})=>({id:A.id??{type:"databaseId",data:0},uuid:t6(e6.uuid,A.uuid,""),vaultUuid:t6(e6.uuid,A.vaultUuid,""),accountUuid:t6(e6.uuid,A.accountUuid,""),trashed:t6(e6.boolean,A.trashed,!1),title:t6(e6.string,A.title,""),templateUuid:t6(e6.string,A.templateUuid,"001"),secondary:t6(e6.string,A.secondary,""),formattedSecondary:t6(e6.string,A.formattedSecondary,""),favorite:t6(e6.boolean,A.favorite,!1),urls:t6(e6.array,A.urls,[]),urlToNakedDomains:t6(hde,A.urlToNakedDomains,{}),coreIcon:A.coreIcon,tags:t6(e6.array,A.tags,[]),suggested:t6(e6.boolean,A.suggested,!1),performActionOnClick:t6(e6.boolean,A.performActionOnClick,!1),action:t6(qde,A.action,null),version:t6(e6.number,A.version,0),hasCustomIcon:t6(e6.boolean,A.hasCustomIcon,!1),isManagedApplication:t6(e6.boolean,A.isManagedApplication,!1)});function hde(A){return!!A&&Object.entries(A).every(([j,e])=>typeof j=="string"&&typeof e=="string")}function qde(A){return A?[rn.Autofill,rn.Go,rn.OpenURL,rn.Download,rn.CreatePrivacyCard,rn.CreateBrexVendorCard,rn.CatalogAppLaunch].includes(A):!1}var uYA=async({data:A})=>($6(),await Promise.all([xde(A.options),vde(A.options?.accountUuid).catch(()=>(console.error("Unexpected error while loading catalog apps as item list entries."),[]))]).then(async([j,e])=>Promise.all([...j,...e]))),xde=async(A={})=>{let j=await zj.loadItemCache();if(!j)return[];let e=await st(),t,r=!1;r=e?.isHttpOrHttps()??!1,r&&(t=e?.nakedDomain());let a=[],{suggestions:n,favorites:o,templateUuids:i,accountUuid:s,vaultUuid:l,searchEverywhere:c}=A,k=Boolean,u=s&&j.accountWithUUID(s);if(!c&&(k=ie.userSelected(mr(),void 0,void 0,j),u)){let G=l?j.vaultWithUUID(l,u.uuid):void 0;k=ie.userSelected(mr(),G,u,j)}if(n)if(e){let R=((await D8(e))?.suggestions??[]).filter(P=>P.type==="SuggestedCategory").map(P=>P.data.type);a=j.itemsForTab(e,P=>k(P)&&!!P.templateUuid&&R.includes(P.templateUuid),d6.suggestedSort(e))}else a=[];else if(o)a=j.activeItems(G=>k(G)&&ie.favorited(G));else if(i){let G=ie.templates(i);a=j.activeItems(x=>k(x)&&G(x))}else a=j.activeItems(k);let{showRichIcons:m}=WA(),S=(await H.getFrozenAccountsInfo()).frozenAccounts;return a.map(async G=>{let x=G.templateUuid?j.templateWithUUID(G.templateUuid):void 0,R=G.overview.b5AccountUUID?S.includes(G.overview.b5AccountUUID):!1;return GXA(G,t,R,{hasHiddenTemplate:!x,showRichIcons:m})})};async function vde(A){if(lt.initState!=="initialized")return console.info("Unable to fetch catalog apps as item list entries: XAM module not initialized"),[];let j=mr(),e=TE().filter(o=>ZA.accountHasFlag(o.uuid,"b5x-popup-catalog-apps")).filter(o=>!j.isExcluded(o.uuid));if(e.length===0)return[];let t=await CP(e),r=A?t.find(o=>o.uuid===A):t[0];if(!r)return[];let a=await lt.invoke("AppCatalog",{sort:{primary:{sortKey:LO.Name}},accountAndUserUuid:{accountUuid:r.uuid,userUuid:r.userUuid}}).catch(o=>(console.error("Unable to fetch catalog apps as item list entries:",o),{type:"Error"}));if(a.type!=="Ok")return[];let{showRichIcons:n}=WA();return a.content.map(async o=>{let i=o.links.application||o.links.homePage||o.domains[0]||void 0,s=i?await jA.getRichIconForUrl(i,o.name,n):{id:"",sources:[{type:"MonogramIcon",content:{value:o.name.length>1?o.name.slice(0,2):o.name.charAt(0),color:jA.generateRichIconBackgroundColor(o.id)}}]},l={},c=[];for(let k of Object.values(o.links))typeof k=="string"&&(l[k]=jA.nakedDomainForUrl(k),c.push({url:k,mode:tk.Default}));return kYA({id:{type:"catalogApp",data:{id:o.id}},title:o.name,secondary:oA("Managed App"),coreIcon:s,urls:c,urlToNakedDomains:l,action:rn.CatalogAppLaunch})})}var EYA=async A=>{let j=await zj.loadItemCache();if(!j)return;let e=j.itemWithUUID(A.data.itemUuid);if(!e||!e.localId)return;let t=WA(),{showRichIcons:r}=t,a=await Ei(e,120,r);return{title:e.title,ainfo:e.overview.ainfo,icon:a.sources,localId:e.localId}};var pYA=()=>{V("get-item-list-entries",uYA,!0),V("get-core-item-details",p3A,!0),V("get-item-summary",EYA,!0),V("get-categories",f3A),V("create-new-item",_3A),V("autofill-item",G3A),V("get-total-number-of-items",AzA),V("item-detail-value-drag-start",L3A),V("item-detail-value-drag-end",z3A),V("item-action",V3A),V("field-action",X3A),V("get-large-type-with-field-identifier",g3A,!0),V("get-large-type-with-client-formatted-string",B3A,!0),V("delete-password-history",K3A,!0),V("copy-to-clipboard",M3A,!0),V("refresh-totp",W3A,!0),V("scan-totp-qr-code",O5A),V("get-should-show-new-item-button",S3A),V("render-markdown",H3A),V("get-custom-icon-url",N3A),V("get-naked-domains-for-urls",pzA)};async function mYA(){let A=await Ba();if(!A)return{status:"not_supported"};let j=await A?.getDeviceHealth({});return j?j.type==="success"?{status:"success",data:j.data}:{status:"error"}:{status:"error"}}var BYA=()=>{V("get-device-health",mYA)};var gYA=()=>{V("can-request-unlock",VWA),V("get-extension-locked",Lt),V("request-managed-unlock",XWA),V("lock",b3A),V("unlock-with-biometrics",P3A),V("unlock-with-sso",R3A),V("unlock-with-passkey",D3A)};var Zdr=p`ManagedCredentialError`,hYA=async A=>{let{accountUuid:j,credentialUuid:e}=A.data,t=H.findAccountHandlerByUuid(j);if(!t)return rj(new Gr({message:p`Unable to find account handler to test managed credential.`})),{type:"error",error:"missing-account"};if(t.isLocked){let r=re.getDesktopAppState();switch(r.type){case"Connected":{r.lockState==="Locked"&&s7();break}case"Connecting":{uN();break}case"Disconnected":case"Disabled":{HE();break}default:te(r)}if(await zUA(),t.isLocked)return console.warn("Account handler did not unlocked when attempting to open and launch a test managed credential."),{type:"error",error:"failed-to-unlock"}}try{await Gde(t,e)}catch(r){return rj(Mn(r,()=>new Gr({message:p`Unable to sync and launch testing credential.`}))),{type:"error",error:"failed-to-launch"}}return{type:"success"}},Gde=async(A,j)=>{for(let r=0;r<10&&A.syncer?.isRunning;r++)await Pn(500);await A.runSyncer([12]);let e=await Br(j);if(!e)throw new Gr({message:p`Unable to find test credential to launch.`});if(!si(e))throw new Gr({message:p`Attempting to launch an item that is not a managed credential.`});if(!A._findVaultWithUUID(e.vault.uuid))throw new Gr({message:p`Attempting to launch a credential not associated with the specified account.`});await uh(e)};var qYA=()=>{V("launch-test-managed-credential",hYA)};var xYA=A=>L5A(A.data);var vYA=()=>{V("set-extensions-as-disabled",xYA)};var GYA=()=>{V("complete-duo-mfa-authentication",Q3A),V("complete-mfa-via-b5-web",Y3A)};var fYA=()=>{V("account-must-migrate-auth",izA),V("any-account-must-migrate-auth",szA)};var FYA=()=>{V("close-modal",qXA)};var bYA=()=>{V("get-desktop-app-status",ozA),V("open-native-app",m0),V("open-desktop-app-to-setup-account",Z3A)};var yYA=()=>{V("get-active-tab",E3A),V("open-help",$3A),V("open-extension-welcome-page",Zm),V("open-migration-enforcement",F3A),V("open-import-page",gsA),V("open-integrations-page",j9A),V("open-settings",nsA),V("open-tab",dsA),V("open-url",w3A),V("open-popup",HE),V("open-unlock-account-screen",hsA),V("open-support-link",asA)};var $YA=async(A,j)=>{let e=j.tab.id;if(!e)throw new Error("Unable to retrieve notifications without a tab id");return PE(e)},wYA=async A=>pK(A.data.id),IYA=async(A,j)=>{let e=j.tab.id;if(!e)throw new Error("Unable to delete notifications without a tab id");return Rm(A.data.type,e)},PYA=async(A,j)=>{let e=j.tab.id;if(!e)throw new Error("Unable to show notification without a tab id");return la(e,{type:A.data.type,params:A.data.params})},OYA=async(A,j)=>({hasNotifications:!!(j.tab.id&&await QP(j.tab.id))});var RYA=()=>{V("notification-action",kKA),V("toast-action",J3A),V("hydrate-notifications",$YA),V("delete-notification",wYA),V("delete-notifications-by-type",IYA),V("show-notification",PYA),V("has-notifications",OYA)};function fde(A){switch(A){case"Popup":return"Normal";case"Inline":return"Normal";case"SaveDialog_Ssh":return"SshKeygen";default:return console.error("Unsupported PasswordGeneratorMode"),"Normal"}}async function SYA(A){$6();let j=A.data;switch(j.type){case"initialization":return hlA(LYA(j.content));case"generate":{let e=i2(j.content.context),t=WA(),{currentPasswordAttrs:r}=o2(t,e.passwordType),a=bde(j.content.values,e),{currentPasswordAttrs:n}=o2(a,e.passwordType);return e.mode==="SshKeygen"?r.passwordType!==n.passwordType?hlA(e):DYA(e):t.defaultPassGenType!==a.defaultPassGenType?Fde(e):r.passwordType!==n.passwordType||r.separatorType!==n.separatorType?hlA(e):DYA(e)}case"save":return qlA(j.content.context)}}async function HYA(A){$6();let j=i2(A.data.context),e=await st(),t={password:j.password,entropy:j.entropy,strengthPercent:j.strength_percent};try{if(!e)throw new Error("Unable to fill generated password: Failed to resolve information on active tab");await l8(t,e),await S0(e,!1,A.data.frameIdentifier,t)}catch(r){console.error("Unable to fill generated password");let a=await Ft.connectivityStatus();throw a==="offlineAuthenticationFailed"?Mo():a==="networkOffline"?MYA():Vr({id:"fill-generated-password",message:oA("Unable to fill generated password"),behavior:Ir.Ephemeral}),r}}var MYA=()=>{let[A]=H.defaultSavingLocation(),j=H.findAccountHandlerByUuid(A.uuid);xs({id:"account-is-offline",title:oA("{accountName} is offline.",{accountName:j?.serveraccount?.name??"Account"}),text:oA("You won't be able to use a generated password until you are signed in and online."),primaryAction:{id:"ok",label:oA("OK"),destructive:!1,action:{type:"Ok",content:void 0}}})};async function KYA(A){$6();let j=i2(A.data.context),e=await st(),r=A.data.selectedText===void 0||A.data.selectedText===j.password?{password:j.password,entropy:j.entropy,strengthPercent:j.strength_percent}:{password:A.data.selectedText??"",entropy:0,strengthPercent:0};try{await l8(r,e)}catch(n){console.error("Unable to save generated password");let o=await Ft.connectivityStatus();throw o==="offlineAuthenticationFailed"?Mo():o==="networkOffline"?MYA():Vr({id:"save-generated-password",message:oA("Unable to save generated password"),behavior:Ir.Ephemeral}),n}let a=A.data.selectedText??j.password;try{await r7(a,!0,A.data.initiator==="tab"?e:void 0),A.data.selectedText||Vr({id:"copy-generated-password",message:oA("Copied generated password"),behavior:Ir.Ephemeral})}catch{Vr({id:"copy-generated-password",message:oA("Unable to copy generated password"),behavior:Ir.Ephemeral})}}async function hlA(A){let j=WA(),e=await NYA(A.passwordType);return jA.passwordGeneratorViewModel({type:"ViewModel",content:{context:xlA(A),config:s2(j,A.passwordType),collected_page_details:e.collectedPageDetails,url:e.url}})}async function Fde(A){let j=WA();return jA.passwordGeneratorViewModel({type:"DefaultPasswordGeneratorChanged",content:{context:xlA(A),config:s2(j,A.passwordType)}})}async function DYA(A){let j=WA(),e=await NYA(A.passwordType);return jA.passwordGeneratorViewModel({type:"Preview",content:{context:xlA(A),config:s2(j,A.passwordType),collected_page_details:e.collectedPageDetails,url:e.url}})}async function qlA(A){let j=WA(),e=i2(A);return jA.passwordGeneratorViewModel({type:"Password",content:{context:A,config:s2(j,e.passwordType)}})}async function NYA(A){if(A!=="smart")return{};let j=await st();return{collectedPageDetails:j?await Cr(j):void 0,url:j?.unparsedUrl}}function LYA(A){let j;switch(A){case"Inline":j="characters";break;case"SaveDialog_Ssh":j="ed25519";break;case"Popup":default:j=WA().defaultPassGenType}let e=fde(A);return{password:"",passwordType:j,entropy:0,strength_percent:0,mode:e}}function i2(A){try{return JSON.parse(atob(A))}catch{return LYA("Popup")}}function xlA(A){return btoa(JSON.stringify(A))}function bde(A,j){let e=WA(),{currentPasswordAttrs:t}=o2(e,j.passwordType);for(let r of A)switch(r.type){case"boolean":r.content.elementId==="password-generator-toggle-numbers"?t.requireDigits=r.content.value:r.content.elementId==="password-generator-toggle-symbols"?t.requireSymbols=r.content.value:r.content.elementId==="password-generator-toggle-capitalize"?t.capitalize=r.content.value:r.content.elementId==="password-generator-toggle-full-words"?t.fullWords=r.content.value:r.content.elementId.startsWith("password-generator-toggle-default-suggestions")&&(r.content.value?e.defaultPassGenType=t.passwordType:e.defaultPassGenType="smart");break;case"number":(r.content.elementId==="password-generator-slider-size-random-password"||r.content.elementId==="password-generator-slider-size-memorable-password"||r.content.elementId==="password-generator-slider-size-pin-code"||r.content.elementId==="password-generator-slider-size-answer"||r.content.elementId==="ssh-keygen-rsa-bit-length")&&(t.length=r.content.value);break;case"menu":r.content.elementId==="password-generator-menu-separator"?t.separatorType=$de(r.content.selectedEntryId):(r.content.elementId==="password-generator-menu-type"||r.content.elementId==="ssh-keygen-menu-type")&&(j.passwordType=_YA(r.content.selectedEntryId));break}return Fh(e),e}function TYA(A){switch(A){case"characters":return $D();case"pin":return wD();case"smart":return yD();case"words":return ID();case"rsa":return OD();case"ed25519":return PD();default:te(A)}}function o2(A,j){let e=A.generator.find(r=>r.passwordType===A.defaultPassGenType)??TYA(A.defaultPassGenType);return{currentPasswordAttrs:A.generator.find(r=>r.passwordType===j)??TYA(j),defaultPasswordAttrs:e}}function n2(A,j){return A===j.passwordType?j.length:0}function s2(A,j){let{currentPasswordAttrs:e,defaultPasswordAttrs:t}=o2(A,j),r=e.separatorType;return{password_type:CYA(e.passwordType),size_security_question:0,size_ssh_rsa_key:n2("rsa",e),size_characters:n2("characters",e),size_words:n2("words",e),size_pin:n2("pin",e),separator_type:r?yde(r):void 0,use_full_words:e.fullWords??!1,include_symbols:e.requireSymbols??!1,include_numbers:e.requireDigits??!1,include_capitalize:e.capitalize??!1,default_password_type_for_suggestions:CYA(t.passwordType)}}function CYA(A){switch(A){case"characters":return"password-generator-menu-entry-type-random-password";case"pin":return"password-generator-menu-entry-type-pin-code";case"smart":return"password-generator-menu-entry-type-password-rules";case"words":return"password-generator-menu-entry-type-memorable-password";case"ed25519":return"ssh-keygen-menu-entry-type-ed25519";case"rsa":return"ssh-keygen-menu-entry-type-rsa"}}function _YA(A){switch(A){case"password-generator-menu-entry-type-random-password":return"characters";case"password-generator-menu-entry-type-pin-code":return"pin";case"password-generator-menu-entry-type-password-rules":return"smart";case"password-generator-menu-entry-type-memorable-password":return"words";case"ssh-keygen-menu-entry-type-ed25519":return"ed25519";case"ssh-keygen-menu-entry-type-rsa":return"rsa";default:return"pin"}}function yde(A){switch(A){case"commas":return"password-generator-menu-entry-separator-commas";case"digits":return"password-generator-menu-entry-separator-numbers";case"digits_and_symbols":return"password-generator-menu-entry-separator-numbers-and-symbols";case"hyphens":return"password-generator-menu-entry-separator-hyphens";case"periods":return"password-generator-menu-entry-separator-periods";case"spaces":return"password-generator-menu-entry-separator-spaces";case"underscores":return"password-generator-menu-entry-separator-underscores"}}function $de(A){switch(A){case"password-generator-menu-entry-separator-commas":return"commas";case"password-generator-menu-entry-separator-numbers":return"digits";case"password-generator-menu-entry-separator-numbers-and-symbols":return"digits_and_symbols";case"password-generator-menu-entry-separator-hyphens":return"hyphens";case"password-generator-menu-entry-separator-periods":return"periods";case"password-generator-menu-entry-separator-spaces":return"spaces";case"password-generator-menu-entry-separator-underscores":return"underscores";default:return"commas"}}var zYA=()=>{V("fill-generated-password",HYA),V("copy-and-save-password",KYA),V("get-password-generator",SYA,!0)};async function UYA(){let A=await M5A();A.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());let j={};for(let e of A){let t=new Date(e.timestamp),r=t.toDateString(),a=t.toLocaleString(void 0,{hour:"numeric",minute:"numeric",hour12:!0}).toUpperCase(),n={itemId:e.itemId,label:e.url?`${a} - ${wde(e.url)}`:a,url:e.url,styledValue:Ide(e.password),value:e.password};j[r]?j[r].push(n):j[r]=[n]}return{dates:Object.entries(j).map(([e,t])=>({label:new Date(e).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"}),uuid:globalThis.crypto.getRandomValues(new Uint32Array(1))[0].toString(36),passwords:t.reverse()})).reverse()}}function wde(A){let j=Nl(A);return j?j.host:A}function Ide(A){let j=[];for(let e of A){let t=j.length>0?j[j.length-1]:void 0;/^\d$/.test(e)?t?.type==="numericText"?t.content.text+=e:j.push({type:"numericText",content:{text:e}}):/^\s$/.test(e)?t?.type==="plainText"?t.content.text+=" ":j.push({type:"plainText",content:{text:" "}}):/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]$/.test(e)?t?.type==="punctuationText"?t.content.text+=e:j.push({type:"punctuationText",content:{text:e}}):t?.type==="plainText"?t.content.text+=e:j.push({type:"plainText",content:{text:e}})}return j}var VYA=()=>{V("get-new-password-history",UYA,!0)};var XYA=()=>{V("get-popup-config",v3A),V("popup-ready",u3A),V("set-popup-restore-point",k3A),V("get-popup-restore-point",t3A),V("get-icon-for-url",EzA)};var JYA=()=>{V("save-dialog-configuration",sXA),V("save-dialog-edit-item",uXA),V("save-dialog-new-item-view",cXA),V("save-dialog-update-item-view",dXA),V("save-dialog-vault-selector",kXA)};async function WYA(A){let j=re.desktopConnectionManager?.getDesktopApp();if(!j||re.getDesktopAppState().type!=="Connected")return Promise.reject("could not connect to desktop app");let e,t=async()=>(e&&clearTimeout(e),j.sendSecureRemoteAutofillCredentialBundle(A));return H.accountIsUnlocked(A.accountUuid)?t():new Promise((r,a)=>{let n=()=>{t().then(r).catch(a)};e=setTimeout(()=>{try{mt.unsubscribe(br,n)}catch{console.info("Unlock listener was already unsubscribed or was never registered")}},3e4),mt.subscribe(br,n),j.showUnlockAccount({accountUuid:A.accountUuid}).then(()=>{}).catch(o=>{})})}var vlA="remote-autofill-pairing-helper-data",GlA="remote-autofill-pairing-started",QYA=5*60*1e3;function YYA(A){je.setItem(GlA,JSON.stringify({expiresAt:Date.now()+QYA,origin:A.data}))}function ZYA(A){let j=je.getItem(GlA);if(!j)return{started:!1};let e=JSON.parse(j);return Date.now()>=e.expiresAt?(je.removeItem(GlA),{started:!1}):{started:!0,origin:e.origin}}function AZA(A){let j=A.data,e=H.getAccountHandlers.find(t=>t.serveraccount.uuid===j.accountUuid)?.serveraccount.signinAddress;if(!e)throw new Error("Account not found");j.signInAddress=e,je.setItem(vlA,JSON.stringify({data:j,expiresAt:Date.now()+QYA}))}function jZA(){let A=je.getItem(vlA);if(!A)throw new Error("REMOTE_AUTOFILL_PAIRING_DATA_KEY is not set");let j=JSON.parse(A);if(Date.now()>=j.expiresAt){je.removeItem(vlA);return}return j.data}async function eZA(A){let j={accountUuid:A.data.accountUuid,localKeypair:A.data.myceliumKeys.localKeypair,psk:A.data.myceliumKeys.psk,remotePubKey:A.data.myceliumKeys.remotePubKey};await WYA(j)}async function tZA(){let A=re.desktopConnectionManager?.getDesktopApp();if(A)try{return await A.desktopAppDeviceInfo()}catch{return}}var rZA=()=>{V("remote-autofill-pairing-started",YYA),V("remote-autofill-pairing-check-if-started",ZYA),V("remote-autofill-pairing-set-data",AZA),V("remote-autofill-pairing-get-data",jZA),V("remote-autofill-pairing-store-credential-bundle-for-onepassword",eZA),V("remote-autofill-pairing-get-desktop-device-info",tZA)};var y7r={[ek.SecuritySettingsFlexible]:{autoLockEnabled:!1,biometricUnlockEnabled:!0},[ek.SecuritySettingsBalanced]:{autoLockEnabled:!0,autoLockMinutes:480,autoLockOnDeviceSleep:!1,biometricUnlockEnabled:!0},[ek.SecuritySettingsStrict]:{autoLockEnabled:!0,autoLockMinutes:10,autoLockOnDeviceSleep:!0,biometricUnlockEnabled:!0}};var dO={"select-preset":"SecurityReview-selectPreset"},$7r={[ek.SecuritySettingsFlexible]:tp.SecurityPresetAppliedEasyAndSecure,[ek.SecuritySettingsBalanced]:tp.SecurityPresetAppliedWorkdaySecurity,[ek.SecuritySettingsStrict]:tp.SecurityPresetAppliedStrictestSecurity};var aZA=()=>Object.keys(dO);var flA={AUTOLOCK_SETTINGS_PROFILES:"authx-autolock_settings-profiles",SECURITY_REVIEW_POLICY:"b5-authx-security_review-policy"},nZA=()=>{let A=y6(),j=H.getAccountHandlers.map(t=>Pde(t,A)),e=H.getAccountsByAuthMethod("OIDC").length>0;return{policyEnabled:j.every(t=>t),anyAccountSso:e}},Pde=(A,j)=>A?.b5account?A.b5account.isFamily||A.b5account.isIndividual?Ode(A.uuid):A.b5account.isBusiness?Rde(A,j):!1:!1,Ode=A=>ZA.accountHasFlag(A,flA.AUTOLOCK_SETTINGS_PROFILES),Rde=(A,j)=>{if(!ZA.accountHasFlag(A.uuid,flA.AUTOLOCK_SETTINGS_PROFILES)||!ZA.accountHasFlag(A.uuid,flA.SECURITY_REVIEW_POLICY))return!1;let e=j.getPolicyForAccount(A.uuid,ee.SecuritySettingsPresets);return!e||!e.definition?.enabled?!1:!!e?.definition?.v1?.securityReviewEnabled},oZA=A=>{if(!A.data)return;let j=A.data.taskName,e=dO[j];e&&vj.setItem(e,"true"),lj("security-review-tasks-updated",void 0)},iZA=A=>{let j=dO[A];return!!vj.getItem(j)},sZA=()=>({remainingTasks:aZA().filter(e=>!iZA(e))}),lZA=()=>{iZA("select-preset")||Li("security-review")},cZA=A=>{A.data&&(A.data==="dismiss"?FE("security-review"):A.data==="clear"&&ym("security-review"))},dZA=A=>{let j=new xe({errorClass:p`SecurityReview`,message:p`${A.data}`});rj(j)};var kZA=()=>{V("check-security-review-enabled",nZA),V("complete-security-review-task",oZA),V("get-security-review-tasks-remaining",sZA),V("set-security-review-notification",lZA),V("remove-security-review-notification",cZA),V("track-security-review-error",dZA)};var uZA=()=>{V("get-settings-configuration",KLA),V("update-settings-configuration",NLA),V("toggle-feature",LLA),V("show-app-settings-page",a9A),V("update-shortcut",VLA),V("reset-hide-on-this-page",o9A),V("update-account-and-vault-exclusions",WLA)};var Dde=p`background/share-service.ts`;function EZA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");let t=e.URL();if(!t||!Bm(t.hostname))return;let r=cj(A.data.itemJson,Yo.pipe(LE),{mode:"unsafe_report_only",file:Dde,func:p`handleSaveItemRequest`}).unwrap(),a=new xA.VaultItem(new xA.Vault({name:"",type:"",desc:""}));if(a.details=r.details,a.overview=r.overview,a.templateUuid=r.templateUuid,!a.templateUuid||a.templateUuid===RO){console.error("Unsupported item type.");return}a.details?.passwordHistory&&(a.details.passwordHistory=[]),qn(e,a.templateUuid,{name:"item",data:{item:Lo(a),isShellPlugin:!1}})}var pZA=()=>{V("share-save-item",EZA)};async function kO(A,j){let e=await jA.signInWithEvent({tabId:A,event:j});if(e)switch(e.type){case"signInWithCompleted":globalThis.dispatchEvent(new CustomEvent(G7,{detail:e.content}));break;case"signInWithProviderFlowStarted":globalThis.dispatchEvent(new CustomEvent(nG,{detail:e.content}));break;case"signInWithUnexpectedNavigation":globalThis.dispatchEvent(new CustomEvent(oG,{detail:e.content}));break;default:te(e)}}var mZA=()=>{"chromium".includes("safari")||(mt.subscribe(f7,Hde),chrome.webNavigation.onCommitted.addListener(Cde),chrome.tabs.onRemoved.addListener(Sde),chrome.webNavigation.onCreatedNavigationTarget&&chrome.webNavigation.onCreatedNavigationTarget.addListener(_de),chrome.webRequest?.onBeforeRedirect&&chrome.webRequest.onBeforeRedirect.addListener(Tde,{urls:["<all_urls>"],types:["main_frame"]}))};function Tde(A){A.statusCode===302&&kO(A.tabId,{type:"before-redirect",data:{url:A.url,redirectUrl:A.redirectUrl}})}function Cde(A){A.frameId===0&&kO(A.tabId,{type:"committed",data:{url:A.url,transitionQualifiers:A.transitionQualifiers??[]}})}function _de(A){kO(A.tabId,{type:"popup-created",data:{sourceTabId:A.sourceTabId}})}function Sde(A,j){kO(A,{type:"tab-removed",data:{isWindowClosing:j.isWindowClosing}})}async function Hde(A){let{tabId:j,item:e}=A.detail;if(e.templateUuid!==Je)return;let t=await zj.loadItemCache();if(!t)return;let r=e.overview.b5AccountUUID??t.accountForVaultID(a6(e.vault))?.uuid;r&&await jA.signInWithEvent({tabId:j,event:{type:"link-account",data:{tabId:j,account:{type:"Item",content:{accountUuid:r,itemUuid:e.uuid,vaultUuid:e.vault.uuid}}}}})}var BZA=()=>!ve()&&!ZA.anyAccountHasFlag("b5x-universal-sign-on")&&WA().socialLoginsEnabled,gZA=()=>{mt.subscribe(br,Kde).subscribe(v7,Nde)};async function Kde(){if(!BZA())return;let A=await u7(),j=(await Promise.allSettled(A.map(async t=>({tab:t,action:await xZA(t)})))).filter(t=>t.status==="rejected"?(console.error("[Sign in with] Failed to detect whether or not to show the notification:",t.reason),!1):!0).map(t=>t.value).filter(({action:t})=>t==="show-notification").map(({tab:t})=>t);(await Promise.allSettled(j.map(async t=>la(t.id,{type:"suggestSocialLogin"})))).forEach(t=>{t.status==="rejected"&&console.error("[Sign in with] Failed to show notification for tab:",t.reason)})}async function Nde(A){if(!BZA())return;let j=It(A.detail.tab);if(!j)throw new Error("InvalidTab");let e=await xZA(j);if(e)switch(e){case"show-notification":{la(j.id,{type:"suggestSocialLogin"});break}case"notify-stale":{lj("sign-in-with-button-detected",void 0,{tabId:j.id});break}default:te(e)}}async function hZA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");let t=await bh(e.id);if(t.length===0)return{accounts:[]};let{showRichIcons:r}=WA(),a=await zj.loadItemCache();if(!a)return{accounts:[]};let n=[],o=await sO(e);for(let i of o){let s=[];for(let l of i.signInWithLogins){let c=t.includes(l.provider)?l.provider:void 0,k=l.item&&a.itemWithUUID(l.item.itemUuid),u=c?{provider:c,item:jA.itemToReference(i.item),linkedItem:k?jA.itemToReference(k):void 0}:void 0;if(k)s.push({title:k.title,subtitle:k.subtitle,icon:await Ei(k,120,r),clickProvider:u});else{let{displayName:m,icon:F}=await jA.signInWithProviderConfig(l.provider);s.push({title:m,icon:F,clickProvider:u})}}n.push({title:i.item.title,icon:await Ei(i.item,120,r),items:s})}return{accounts:n}}async function qZA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");let{item:{itemUuid:t,vaultUuid:r},linkedItem:a,provider:n}=A.data,o=await Br(t,r);if(o)return No(e,o,"INLINE",{signInWithProviderItem:{item:a,provider:n}})}async function xZA(A){if(H.allAccountHandlersAreLocked||oo.has(A))return;let j=await Dm(A.id);if(!w6("suggestSocialLogin")&&j.length>0&&!j.includes("suggestSocialLogin"))return;if(j.includes("suggestSocialLogin"))return"notify-stale";if((await bh(A.id)).length===0)return;if((await sO(A)).length>0)return"show-notification"}function vZA(){mZA(),EWA(),gZA()}async function GZA(A,j){if(!j.tab.id)throw new Error("invalidTab");let e=A.data;await jA.signInWithEvent({tabId:j.tab.id,event:{type:"link-account",data:{tabId:j.tab.id,account:e}}})}var fZA=()=>{V("sign-in-with-button-detected",(A,j)=>{globalThis.dispatchEvent(new CustomEvent(v7,{detail:{tab:j.tab}}))}),V("sign-in-with-prompt-configuration",hZA),V("sign-in-with-cancel-session",gWA),V("sign-in-with-click-provider",qZA),V("sign-in-with-complete-session",BWA),V("sign-in-with-context-account",GZA),V("sign-in-with-save-configuration",mWA)};var FZA=()=>{V("ssh-onboarding-config",GzA),V("dismiss-ssh-onboarding",vzA),V("on-ssh-onboarding-clicked",FzA),V("ssh-onboarding-next-steps",fzA)};async function bZA(A,j){let e=await jA.inferBestTitle(j.tab.title??"",j.tab.url??"")??"SSH Key",{defaultSuggestedVaultId:t,vaultListElements:r}=await vh();return{vaults:{suggestedVaultId:t,vaultListElements:r},title:e}}async function yZA(A,j){let e=It(j.tab);if(!e)throw new Error("InvalidTab");let{title:t,context:r,accountVaultUuid:a}=A.data,n=await qlA(r);if(n.type!=="password")return console.error("Invalid SPG response type."),!1;let o;try{o=await jl(Zi)}catch{return console.error("SSH key item template not available."),!1}let{item:i}=await jA.createSshKeyItem({title:t,unparsedUrl:e.unparsedUrl,template:JSON.stringify(o),privateKey:n.content.password}),s=ah(a.accountUuid,a.vaultUuid,JSON.parse(i));if(s.isOk())try{return await Da(s.value,!0,void 0),await No(e,s.value,"INLINE"),!0}catch(l){return console.error("Error saving item:",l),!1}else return console.error("Problem converting core item to b5 item."),!1}var $ZA=()=>{V("get-ssh-create-dialog-configuration",bZA),V("generate-and-fill-ssh-key",yZA)};var wZA=()=>{V("app-storage-migration",uQA)};var IZA=()=>{V("record-view-event-first-account",fWA),V("record-view-event",bWA),V("record-input-event",yWA),V("record-view-event-all-accounts",$WA),V("record-click-event-first-account",FWA),V("record-click-event",wWA),V("record-click-event-all-accounts",IWA),V("record-background-action-event-all-accounts",PWA),V("record-preauth-event",OWA),V("record-view-preauth-event",RWA),V("record-experiment-exposure-all-accounts",TWA)};var PZA=()=>{V("inline-button-pressed",zo),V("remove-inline-button-tooltip",zo),V("remove-inline-button",zo)};var OZA=()=>{V("get-nested-frame-configuration",zo)};var uO=new rt("Trace Processor Logger:"),RZA=A=>{if(!vt())if(H.allAccountHandlersAreLocked)try{let j=ki("https://my.1password.com",q.config.getDevice().uuid);NA.sendPreAuthPerformanceTraces(j,A),uO.log("Traces sent pre-auth traces to datadog: ",A)}catch(j){uO.error("Error sending trace to server: ",j)}else{let j=H.accountHandlersForSignedInAccounts[0].client?.CTX;if(!j){uO.error("No account context found to make request. Traces not sent.");return}try{NA.sendPerformanceTraces(j,A),uO.log("Traces sent to datadog: ",A)}catch(e){uO.error("Error sending trace to server: ",e)}}};var FlA=new yH(je,RZA,{maxBytes:5e3,maxSendInterval:3e4}),DZA=()=>{V("send-trace",A=>{FlA.addToBatch(A.data)})};async function TZA(A){return lt.invoke("HealthCheck",A.data).catch(j=>{console.error(j)})}async function CZA(A){return lt.invoke("SearchApps",A.data).catch(j=>{console.error(j)})}async function _ZA(A){return await lt.invoke("AppCatalog",A.data).catch(e=>(console.error(e),{type:"Error"}))}async function SZA(A){return lt.invoke("GetItems",A.data).catch(j=>(console.error(j),{type:"error"}))}async function HZA(A){return lt.invoke("SearchItems",A.data).catch(j=>{console.error(j)})}async function MZA(A){return lt.invoke("CreateAndPinShortcut",A.data).catch(j=>{console.error(j)})}async function KZA(A){return lt.invoke("SetPinnedLauncherObject",A.data).catch(j=>{console.error(j)})}async function NZA(A){let{accountUuid:j}=A.data,e=await SA.getDatabase().getDeviceTrustEnabledForAccount(j),r=!!H.getAccountHandlers.find(a=>a.uuid===j)?.hasBackOfficeFeature?.b2bXamTrelica;return{type:"success",content:{deviceTrustEnabled:e,trelicaEnabled:r}}}async function LZA(A){return lt.invoke("DeleteAndUnpinShortcut",A.data).catch(j=>{console.error(j)})}async function zZA(A){return lt.invoke("RemovePinnedLauncherObject",A.data).catch(j=>{console.error(j)})}async function UZA(A){let j=await lt.invoke("GetItems",{id:A.data.accountId}),e=await lt.invoke("GetShortcuts",A.data).catch(l=>{console.error(l)}),t=await lt.invoke("GetPinnedLauncherObjects",A.data).catch(l=>{console.error(l)}),r=t?.userPins??[],a=t?.adminPins??[],n=(l,c)=>{if(!l)return;let{launcherId:k,pinIdx:u}=l;switch(k.type){case"vaultItem":{let m=j.content?.vaultItems.find(F=>F.uuid===k.content);if(!m){console.error("Unable to load item title for shortcut",k.content);return}return{type:"vaultItem",content:{content:m.uuid,title:m.title??"",icon:m.icon},pinIndex:u}}case"managedCredential":{let m=j.content?.managedCredentials.find(F=>F.uuid===k.content);if(!m){console.error("Unable to load managed credential title for shortcut",k.content);return}return{type:"managedCredential",content:{content:m.uuid,title:m.title??"",icon:m.icon},pinIndex:u}}case"shortcut":{if(!e?.content)return;let m=e.content.find(F=>F.uuid===k.content);return m?{type:"shortcut",content:{title:m.title,url:m.url,uuid:m.uuid},pinIndex:u}:void 0}case"trelicaApp":return{type:"trelicaApp",content:k.content,pinIndex:u,adminPin:c}}},o=[];for(let l of Object.values(a)){let c=n(l,!0);c&&o.push(c)}let i=[];for(let l of Object.values(r)){let c=n(l,!1);c&&i.push(c)}let s=(l,c)=>{let k=l.pinIndex,u=c.pinIndex;return k===void 0&&u===void 0?0:k===void 0?1:u===void 0?-1:k-u};return o.sort(s),i.sort(s),[...o,...i]}var VZA=()=>{V("get-catalog-apps",_ZA),V("get-xam-items",SZA),V("search-xam-items",HZA),V("search-apps",CZA),V("xam-app-health-check",TZA),V("create-and-pin-custom-url-shortcut",MZA),V("create-pinned-launcher-item",KZA),V("get-pinned-launcher-objects",UZA),V("delete-and-unpin-custom-url-shortcut",LZA),V("delete-pinned-launcher-item",zZA),V("get-enabled-xam-skus",NZA)};var Ude=[wj.Username,wj.CurrentPassword],Vde=[zc.None,zc.Login],XZA=(A,j)=>Ude.includes(A)&&Vde.includes(j??zc.None);var EO=()=>WA().universalSignOnEnabled&&ZA.anyAccountHasFlag("b5x-universal-sign-on"),blA=async A=>{let j=await Xde(A);return j||{type:"entry-list",data:await Wde(A)}},Xde=async A=>{let j=await jA.fillSessionStatus(A.id,A.unparsedUrl);if(!j)return;let e=await Jde(j);if(e)return{type:"pending",data:{entry:e,timeout:j.timeRemaining}}},Jde=async A=>{if(!A.item)return;let j=await Br(A.item.itemUuid,A.item.vaultUuid);if(!j)return;let{showRichIcons:e}=WA(),t={title:j.title,subtitle:j.overview.ainfo,icon:await Ei(j,120,e)};switch(A.state.type){case"autofill":case"sign-in-with-flow-started":case"sign-in-with-completed":return{type:"autofill",data:{...t,item:A.item}};case"sign-in-with-provider":return{type:"sign-in-with",data:{...t,item:{provider:A.state.data.provider,item:A.item}}};default:te(A.state)}},Wde=async A=>{let j=await zj.loadItemCache();if(!j)throw new Error("itemCacheNotLoaded");let e=(await Promise.all(j.itemsForTab(A,ie.combine(ie.logins,ie.userSelected(mr(),void 0,void 0,j)),d6.suggestedSort(A)).map(E6))).filter(n=>!!n),t=[],[r,a]=await Promise.all([Qde(A),Promise.all(e.map(async n=>Yde(n,j)))]);return r&&t.push(r),[...t,...a.flat()]},Qde=async A=>{let j=await V0(A);if(j)return{type:"trelica-app",data:{title:j.name,icon:await jA.getRichIconForUrl(A.unparsedUrl,A.title,!0),app:j}}},Yde=async(A,j)=>{let{showRichIcons:e}=WA(),t=[],r={title:A.title,subtitle:A.overview.ainfo,icon:await Ei(A,120,e)},a=o=>!!A?.details?.fields?.some(i=>i.designation===o&&i.value);(a("username")||a("password"))&&t.push({type:"autofill",data:{...r,item:jA.itemToReference(A)}});let n=klA(A).map(o=>{let i=o.item?j.itemWithUUID(o.item.itemUuid,o.item.vaultUuid):void 0;return{type:"sign-in-with",data:{...r,item:{provider:o.provider,item:jA.itemToReference(A),linkedItem:i?jA.itemToReference(i):void 0}}}});return t.push(...n),t};var WZA=()=>{mt.subscribe(f7,Zde).subscribe(v7,Ake).subscribe(cB,eke).subscribe(br,jke)};function Zde(A){if(!EO())return;let{tabId:j,complete:e}=A.detail;e&&lj("uso-update",void 0,{tabId:j})}async function Ake(A){if(!EO()||!A.detail.tab.id||(await bh(A.detail.tab.id)).length===0)return;let e=It(A.detail.tab);if(e)return ylA(e)}var QZA=async(A,j)=>{if(!EO())return;let e=It(j.tab);if(e)return ylA(e)},jke=async()=>{if(!EO())return;let A=await st();if(!A)return;let j=await bh(A.id),e=await Cr(A);if(!(!(await jA.analyzePage(e,!1,[])).designations.fields.some(a=>XZA(a.autofillType,a.formDesignation))&&j.length===0))return ylA(A)},eke=A=>{let{tabId:j,changeInfo:e}=A.detail;e.url&&fVA(j,e.url)},ylA=async A=>{let j=A.URL()?.hostname;if(j&&GVA(A.id,j))return;let[e,t]=await Promise.all([tke(A),V0(A)]);e.length===0&&t===void 0||lj("uso-spawn",void 0,{tabId:A.id})},tke=async A=>{let j=await zj.loadItemCache();return j?j.itemsForTab(A,ie.combine(ie.logins,ie.userSelected(mr(),void 0,void 0,j))):[]};var YZA=async(A,j)=>{let e=await Br(j.data.item.itemUuid,j.data.item.vaultUuid);if(!e)throw new Error("itemNotFound");return No(A,e,"INLINE")},ZZA=async(A,j)=>{let{provider:e,item:{itemUuid:t,vaultUuid:r},linkedItem:a}=j.data.item,n=await Br(t,r);if(!n)throw new Error("itemNotFound");return No(A,n,"INLINE",{signInWithProviderItem:{item:a,provider:e}})};var AAj=async(A,j)=>{let e=It(j.tab);if(!e)throw new Error("unknown");let t=A.data;switch(t.type){case"autofill":await YZA(e,t);break;case"sign-in-with":await ZZA(e,t);break;case"trelica-app":await PK(t.data.app,Mh.Autofill);break;default:te(t)}return blA(e)},jAj=async(A,j)=>{let e=It(j.tab);if(!e)throw new Error("unknown");return blA(e)},eAj=async(A,j)=>{if(!j.tab.id)throw new Error("unknown");await jA.clearFillSession(j.tab.id),A.data.close&&(j.tab.url?xVA(j.tab.id,j.tab.url):console.error("USO dismiss: tab.url is undefined, cannot determine domain"),lj("uso-destroy",void 0,{tabId:j.tab.id}))};var tAj=()=>{V("uso-click-entry",AAj),V("uso-configuration",jAj),V("uso-dismiss",eAj),V("uso-resize",zo),V("uso-login-field-focused",QZA)};var rAj=()=>{V("get-vault-exclusions",mN),V("update-vault-exclusion",JLA)};async function aAj(A){let j=await Sc(A.data.itemId);if(!j.isOk())throw new Error("No matching item");return e0(j.value)}var nAj=()=>{V("handle-watchtower-action",m3A),V("watchtower-change-password",aAj)};var oAj=()=>{V("get-viewed-firefox-rich-icons",c3A),V("set-viewed-firefox-rich-icons",d3A)};function iAj(A){let{accountUuid:j}=A.data;X8(j)}var sAj=()=>{V("app-launcher-feedback",iAj),V("view-vault-item",r2A),V("app-launcher-enabled",DE),V("open-app-launcher-url-in-tab",i2A)};async function lAj(A){return lt.invoke("GetXamLaunchables",A.data).catch(j=>{let e=A.data.accountAndUserUuid.accountUuid;return console.error(`${p6} [${e}] ${j}`),{type:"NoXamLaunchables"}})}var cAj=()=>{V("get-xam-launchables",lAj)};var dAj=A=>{faA(0,A),rQA(),aQA(),wQA(),yQA(),EQA(),pQA(),OQA(),RQA(),DQA(),HQA(),MQA(),KQA(),NQA(),zQA(),LQA(),VQA(),WQA(),eYA(),rYA(),YQA(),oYA(),iYA(),sYA(),tYA(),oAj(),dYA(),pYA(),BYA(),gYA(),vYA(),GYA(),fYA(),FYA(),bYA(),yYA(),RYA(),zYA(),VYA(),XYA(),JYA(),kZA(),uZA(),pZA(),fZA(),FZA(),$ZA(),wZA(),IZA(),DZA(),VZA(),tAj(),rAj(),nAj(),cAj(),sAj(),PZA(),OZA(),rZA(),qYA(),lYA(),cYA()};var kAj=[{platformName:"ngrok",urlPattern:/^https:\/\/dashboard.ngrok.com\/api/,credentialName:"API Key",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/ngrok",secrets:{secretInPageDetails:[{fieldLabel:"api key",nodeSelector:"div.ant-modal-body code",toBeConcealed:!0,expectedLength:49}]}},{platformName:"GitHub",urlPattern:/^https:\/\/github.com\/settings\/tokens/,credentialName:"Personal Access Token",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/github",secrets:{secretInPageDetails:[{fieldLabel:"token",nodeSelector:"code#new-oauth-token",toBeConcealed:!0,expectedLength:40,expectedPrefix:"ghp_"}]}},{platformName:"AWS",urlPattern:/^https:\/\/(.*).console.aws.amazon.com\/iam/,credentialName:"Access Key",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/aws",secrets:{secretInPageDetails:[{fieldLabel:"access key id",nodeSelector:"div.create-root-access-key-content td:first-of-type div[class^='awsui_child_']:last-of-type",toBeConcealed:!1,expectedLength:20,expectedPrefix:"AKIA"},{fieldLabel:"secret access key",nodeSelector:"div.create-root-access-key-content td:last-of-type div[class^='awsui_child_']:first-of-type > span",toBeConcealed:!0,expectedLength:40}]}},{platformName:"GitLab",urlPattern:/^https:\/\/gitlab.com\/-\/profile\/personal_access_tokens/,credentialName:"Personal Access Token",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/gitlab",secrets:{baseHtmlNode:"div.content-wrapper",secretInPageDetails:[{fieldLabel:"token",nodeSelector:"button[title='Copy personal access token']",attribute:"data-clipboard-text",toBeConcealed:!0,expectedLength:26,expectedPrefix:"glpat-"}]}},{platformName:"CircleCI",urlPattern:/^https:\/\/app.circleci.com\/settings\/user\/tokens/,credentialName:"Personal API Token",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/circleci",secrets:{secretInPageDetails:[{fieldLabel:"token",nodeSelector:"input[class^='css-']",toBeConcealed:!0,expectedLength:40}]}},{platformName:"DigitalOcean",urlPattern:/^https:\/\/cloud.digitalocean.com\/account\/api\/tokens/,credentialName:"Personal Access Token",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/digitalocean",secrets:{secretInPageDetails:[{fieldLabel:"token",nodeSelector:"tr.copy-token.is-sensitive span.click-to-copy-text",toBeConcealed:!0,expectedLength:71,expectedPrefix:"dop_v1_"}]}},{platformName:"OpenAI",urlPattern:/^https:\/\/platform.openai.com\/account\/api-keys/,credentialName:"API Key",learnMoreUrl:"https://developer.1password.com/docs/cli/shell-plugins/openai",secrets:{secretInPageDetails:[{fieldLabel:"api key",nodeSelector:"div.modal-body input[spellcheck='false']",toBeConcealed:!0,expectedLength:51,expectedPrefix:"sk-"}]}}];var ake="shell_plugins_prompts_dismissed",nke="shell-plugins-save-in-1password-dismissed",uAj="shell-plugins-last-detected-credential";function EAj(A){return A?ake:nke}async function oke(A){return(await Te.getBrowserInfo()).osName===_a.Windows||JSON.parse(vj.getItem(EAj(A))??"false")===!0}function pAj(A){vj.setItem(EAj(A.data.isFallBackNotification),JSON.stringify(!0))}async function mAj(A){if(await oke(A.data.isFallBackNotification))return;let j=await st(),e=l2(j?.unparsedUrl);if(!e)return;let t=new URL(e.learnMoreUrl);return t.searchParams.append("utm_content",A.data.isFallBackNotification?"fallback_notification":"followup_notification"),t.searchParams.append("utm_source","browser_extension"),t.searchParams.append("utm_campaign","shell_plugins_save_in_1password"),{platformName:e.platformName,credentialName:e.credentialName,operatingSystem:(await Te.getBrowserInfo()).osName,learnMoreUrl:t.toString()}}chrome.tabs.onUpdated.addListener((A,j)=>{let e=j.url;if(!e)return;let t=l2(e);if(!t&&w6("shellPlugins"))return;Ln({tabId:A,message:t?{name:"shell-plugins-url-detected",data:void 0}:{name:"hide-notification",data:{}}})});async function BAj(A,{tab:j}){let[e,t]=H.defaultSavingLocation(),r=GAj();if(!r)return;let a=l2(j.unparsedUrl);if(!a)return;let n=ike(e.uuid,t.uuid,`${a.platformName} ${a.credentialName}`,j.unparsedUrl,r.credentials);await qn(j,jc,{name:"item",data:{item:Lo(n),isShellPlugin:!0}})}function ike(A,j,e,t,r){let a=cVA(A,j,jc);return a.overview.title=e,t&&(a.overview.url=t,a.overview.URLs=[{l:"website",u:t}]),a.details.sections.push({title:"",name:`Section_${q.generateUUID()}`,fields:[]}),r.forEach(n=>{a.details.sections[0].fields&&a.details.sections[0].fields.push({k:n.toBeConcealed?"concealed":"string",n:q.generateUUID(),v:n.value,t:n.fieldLabel,a:{guarded:"yes"}})}),a}async function gAj(A,{tab:j}){await la(j.id,{type:"shellPlugins"})}async function hAj(A,{tab:j}){await la(j.id,{type:"shellPluginsFallback"})}function qAj(A,{tab:j}){return l2(j.unparsedUrl)}function xAj(A){return GAj()?.credentials??[]}function vAj(A,j){je.setItem(uAj,JSON.stringify(A.data))}function GAj(){let A=je.getItem(uAj);return A?JSON.parse(A):void 0}function l2(A){if(A)return kAj.find(j=>j.urlPattern.test(A))}var fAj=async()=>{await Promise.all([vj.init(),je.init()])};async function $lA(){if(Xm||await _c,H.hasAccountHandlers){console.error("1Password icon was clicked before popup is ready. Please click icon again to open.");return}Zm()}async function FAj(A){try{let j=await lke(A);if(j&&j.compromisedDomain)return!0}catch(j){console.error("Error during breach check:",j)}return!1}async function lke(A){let{newHibpEnabled:j}=WA(),e=await E6(A);if(!e)throw new Error("Failed to find decrypted item.");let t=A.vault,r=await zj.loadItemCache();if(!r)return;let a=a6(t),n=r.accountForVaultID(a);if(!n)throw new Error("failed to find an account or vault overview");let o=bE(n.uuid);return await NA.generateWatchtowerReportForItem(e,j,!!n.hasFeature.itemsInWrongAccountPolicy,o)}var bAj=()=>{mt.subscribe(f7,cke)},cke=async A=>{let{tabId:j,item:e}=A.detail;!e.overview.b5AccountUUID||!ZA.accountHasFlag(e.overview.b5AccountUUID,"b5x-watchtower-breach-notification")||!await FAj(e)||la(j,{type:"watchtowerBreachDetected",params:{itemUuid:e.uuid}})};var yAj=5,$Aj=0,wAj=!1,IAj=async()=>{await kke(),await aB()||uke()},kke=async()=>{let A=y6(),j=H.getAccountHandlers.filter(e=>Fm.isValidAccountType(e.serveraccount.type)?!A.getPolicyForAccount(e.uuid,"app-launcher-allowed"):!1);await A.initializePolicies(j)},aB=async()=>{let A=lt.initState;if(A==="wasm_not_supported"||A==="initialized")return!1;if($Aj>=yAj)return wAj||(console.error(`${p6} [] failed to initialize module ${yAj} times, max attempts reached`),PAj(),wAj=!0),!1;if(!DE().enabled&&!l0())return!1;try{await lt.init()}catch{return $Aj+=1,!1}return lt.initState!=="initialized"?!1:(await Eke(),!0)},uke=()=>{mt.subscribe(Yi,aB),mt.subscribe(br,aB),mt.subscribe(Jn,aB),y6().subscribe(aB)},PAj=()=>{try{mt.unsubscribe(Yi,aB),mt.unsubscribe(br,aB),mt.unsubscribe(Jn,aB),y6().unsubscribe(aB)}catch{}},Eke=async()=>{PAj(),D9A(),k7(),await t2A()};var Xm=!1,RAj,_c=new Promise(A=>RAj=A).then(()=>{Xm=!0});globalThis.autofillInCurrentPage=async()=>await Promise.resolve({status:"unexpectedError"});mt.initialize("error","unhandledrejection",ch,ZE,Rh,Ak,Yi,q7,nl,br,Jn,Oh,Dh,mh,x7,v7,G7,nG,oG,OO,cB,f7,s0);ka()?browser.action.onClicked.addListener($lA):browser.browserAction.onClicked.addListener($lA),browser.commands.onCommand.addListener(A=>{xsA(A)&&!Lt()&&(io(),globalThis.dispatchEvent(new Event(mh)))}),browser.runtime.onInstalled.addListener(iO.onInstalled),Bt()||v8.setContextMenu(io,async()=>RK(Je),async()=>RK(ea),async()=>RK(O6),h0,X8,ksA,iO.onUpdateCheck,osA,s8,rsA,j2,jWA);tQA();async function mke(){let A=await Te.getBrowserInfo(),j=A.name==="Firefox"||A.name==="Safari"&&["10.15","10.15.7"].includes(A.osVersion)?"":` (${A.osVersion})`;console.info(`channel: ${Mv()}
version: ${Lb()}
build: ${ui()} (${A.version})
browser: ${A.name} (${A.version})
os: ${A.osName}${j}`)}async function OAj(A){await Na.asyncObserve("initializeStorage","initialize",async()=>fAj(),A,!0),await Na.asyncObserve("initialize-feature-flags-cache","initialize",async()=>ZA.initializeFeatureFlagsCache(),A,!0),vj.getItem(bP)==="enabled"&&(vj.removeItem(bP),Zg("db-terminated")),vn({skipIconUpdate:!0});let{language:e}=await MXA();Ub(),Rd.initDatabase(),console.group("\u{1F44B} Initializing 1Password"),ELA(),mke(),T6()&&(AXA(),iWA());try{await Na.asyncObserve("initializeCoreInterface","initialize",async()=>jA.init(e),A,!0)}catch{throw new q.LoggableError({errorClass:p`InitializationError`,message:p`Failed to initialize core interface`})}if(oA.set({locale:e,messages:pke}),!await SA.initDatabase())throw new Error("Unable to initialize the database.");let t=await jn();q.config.setDevice(t),await Na.asyncObserve("collectAllPreRegFeatureFlags","featureFlags",async o=>fHA(t.uuid,o),A,!0);let r=new Na("b5x-background",FlA.addToBatch);ZA.hasPreRegistrationFlag("b5x-pre-auth-tracing")&&r.startObserver();let a=await SA.getDatabase().getAllAccounts();H.setAccountHandlers(a.map(o=>new zm(o,t))),q.crypto.init();let n=H.updateAccountHandlers.bind(H);mt.subscribe(Oh,async()=>io()).subscribe(Rh,QUA).subscribe(ZE,n).subscribe(ch,TzA).subscribe(Jn,()=>{Li("extension-first-survey"),Li("unified-panel-update"),Bke()}).subscribe(Ak,()=>{aN()}),vn({skipIconUpdate:!0}),$N().catch(()=>{console.error("Error loading Watchtower data")}),Li("extension-first-survey"),await Na.asyncObserve("initializeNativeAppConnection","initialize",async()=>OzA(),A,!0),await Na.asyncObserve("unlockWithContextInitCache","initialize",async()=>LUA(),A,!0).finally(vn),aWA(),j3A(),HLA(),Xi.enableInsiderIfAppropriate(),eWA(),vZA(),WZA(),bAj(),kNA(),v8.initContextMenu(),oo.init(),hzA();try{Na.asyncObserve("initializeXamBackend","initialize",async()=>IAj(),A,!0),xLA()}catch{console.error("App Launcher threw an unexpected error...")}cQA().catch(()=>{console.error("Unable to migrate storage")}),Ba(),console.info("\u{1F44D} Finished initializing 1Password"),console.groupEnd(),RAj()}function Bke(){let A=Ah();lj("unleash-features-changed",{features:A})}ka()?(async()=>await Na.asyncObserve("initialize","initialize",async A=>OAj(A),void 0,!0))():globalThis.addEventListener("load",async()=>{await Na.asyncObserve("initialize","initialize",async A=>OAj(A),void 0,!0)});dAj(_c);var AsA={"get-account-list":RN};U8({...AsA,"open-swe-native-wrapper":JJA,"sign-in-succeeded":WJA,"b5-session-init":LJA,"b5x-request-session-init":UJA,"b5-sso-complete":zJA,"b5x-credential-hydration":VJA,"relay-message-to-frames":qWA,"targeted-message-to-inline-menu":xWA,"refresh-can-request-unlock":CWA,"get-frame-manager-configuration":_WA,"get-inline-suggestions":SWA,"perform-inline-action":HWA,"record-inline-menu-render-event-all-accounts":DWA,"add-save-object":olA().handleAddSaveObject,"get-save-object-public-key":olA().handleGetSaveObjectPublicKey,"enable-privacy-integration":KWA,"get-privacy-enable-dialog-configuration":MWA,"get-privacy-create-dialog-configuration":NWA,"fill-new-privacy-card":LWA,"get-email-alias-dialog-configuration":YWA,"start-email-alias-session":ZWA,"generate-email-alias":AQA,"cancel-email-alias-session":jQA,"fill-new-email-alias":eQA,"get-brex-dialog-configuration":zWA,"fill-new-brex-card":UWA,"open-extension-welcome-page-for-onboarding":csA,"get-default-account-info":nWA,"on-ssh-key-created":bzA,"ssh-next-steps-notification-config":yzA,"on-ssh-next-steps-confirm":$zA,"ssh-focus-public-key-field":wzA,"shell-plugins-notification-config":mAj,"shell-plugins-dismiss-notifications":pAj,"shell-plugins-save-in-1password-notification":gAj,"shell-plugins-fallback-notification":hAj,"shell-plugins-site-config":qAj,"shell-plugins-item-saving-prompt":BAj,"shell-plugins-get-last-detected-credentials":xAj,"shell-plugins-set-last-detected-credentials":vAj,"create-credential":CUA,"get-credential":MUA,"should-intercept-webauthn-request":NUA,"report-error":oWA});globalThis.bg={enableInsiders:Xi.enableInsiderDev};export{AsA as b5xHandlers,mke as initBuildInfo,Xm as initializationHasFinished,_c as initializeFinishedPromise};

//# debugId=ea89647f-24f3-5109-b7b1-e2da3312c68c
