"use strict";(()=>{var wR=Object.create;var pp=Object.defineProperty;var SR=Object.getOwnPropertyDescriptor;var bR=Object.getOwnPropertyNames;var xR=Object.getPrototypeOf,_R=Object.prototype.hasOwnProperty;var Q=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var DR=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of bR(t))!_R.call(e,o)&&o!==r&&pp(e,o,{get:()=>t[o],enumerable:!(n=SR(t,o))||n.enumerable});return e};var W=(e,t,r)=>(r=e!=null?wR(xR(e)):{},DR(t||!e||!e.__esModule?pp(r,"default",{value:e,enumerable:!0}):r,e));var Te=Q((Vl,mp)=>{"use strict";var qi=function(e){return e&&e.Math===Math&&e};mp.exports=qi(typeof globalThis=="object"&&globalThis)||qi(typeof window=="object"&&window)||qi(typeof self=="object"&&self)||qi(typeof global=="object"&&global)||qi(typeof Vl=="object"&&Vl)||(function(){return this})()||Function("return this")()});var ze=Q((zX,hp)=>{"use strict";hp.exports=function(e){try{return!!e()}catch{return!0}}});var Zt=Q((VX,Cp)=>{"use strict";var kR=ze();Cp.exports=!kR(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var Hi=Q((YX,Bp)=>{"use strict";var FR=ze();Bp.exports=!FR(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var mr=Q((WX,Ep)=>{"use strict";var vR=Hi(),aa=Function.prototype.call;Ep.exports=vR?aa.bind(aa):function(){return aa.apply(aa,arguments)}});var Sp=Q(wp=>{"use strict";var yp={}.propertyIsEnumerable,Qp=Object.getOwnPropertyDescriptor,RR=Qp&&!yp.call({1:2},1);wp.f=RR?function(t){var r=Qp(this,t);return!!r&&r.enumerable}:yp});var Li=Q((XX,bp)=>{"use strict";bp.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var He=Q((ZX,Dp)=>{"use strict";var xp=Hi(),_p=Function.prototype,Yl=_p.call,TR=xp&&_p.bind.bind(Yl,Yl);Dp.exports=xp?TR:function(e){return function(){return Yl.apply(e,arguments)}}});var Ki=Q(($X,Fp)=>{"use strict";var kp=He(),NR=kp({}.toString),MR=kp("".slice);Fp.exports=function(e){return MR(NR(e),8,-1)}});var Rp=Q((e6,vp)=>{"use strict";var UR=He(),PR=ze(),OR=Ki(),Wl=Object,GR=UR("".split);vp.exports=PR(function(){return!Wl("z").propertyIsEnumerable(0)})?function(e){return OR(e)==="String"?GR(e,""):Wl(e)}:Wl});var Ji=Q((t6,Tp)=>{"use strict";Tp.exports=function(e){return e==null}});var jl=Q((r6,Np)=>{"use strict";var qR=Ji(),HR=TypeError;Np.exports=function(e){if(qR(e))throw new HR("Can't call method on "+e);return e}});var Nr=Q((n6,Mp)=>{"use strict";var LR=Rp(),KR=jl();Mp.exports=function(e){return LR(KR(e))}});var Qt=Q((o6,Up)=>{"use strict";var Xl=typeof document=="object"&&document.all;Up.exports=typeof Xl>"u"&&Xl!==void 0?function(e){return typeof e=="function"||e===Xl}:function(e){return typeof e=="function"}});var Vn=Q((i6,Pp)=>{"use strict";var JR=Qt();Pp.exports=function(e){return typeof e=="object"?e!==null:JR(e)}});var Mr=Q((s6,Op)=>{"use strict";var Zl=Te(),zR=Qt(),VR=function(e){return zR(e)?e:void 0};Op.exports=function(e,t){return arguments.length<2?VR(Zl[e]):Zl[e]&&Zl[e][t]}});var Aa=Q((a6,Gp)=>{"use strict";var YR=He();Gp.exports=YR({}.isPrototypeOf)});var $l=Q((A6,Lp)=>{"use strict";var WR=Te(),qp=WR.navigator,Hp=qp&&qp.userAgent;Lp.exports=Hp?String(Hp):""});var tg=Q((c6,Wp)=>{"use strict";var Yp=Te(),eg=$l(),Kp=Yp.process,Jp=Yp.Deno,zp=Kp&&Kp.versions||Jp&&Jp.version,Vp=zp&&zp.v8,$t,ca;Vp&&($t=Vp.split("."),ca=$t[0]>0&&$t[0]<4?1:+($t[0]+$t[1]));!ca&&eg&&($t=eg.match(/Edge\/(\d+)/),(!$t||$t[1]>=74)&&($t=eg.match(/Chrome\/(\d+)/),$t&&(ca=+$t[1])));Wp.exports=ca});var rg=Q((l6,Xp)=>{"use strict";var jp=tg(),jR=ze(),XR=Te(),ZR=XR.String;Xp.exports=!!Object.getOwnPropertySymbols&&!jR(function(){var e=Symbol("symbol detection");return!ZR(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&jp&&jp<41})});var ng=Q((g6,Zp)=>{"use strict";var $R=rg();Zp.exports=$R&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var la=Q((d6,$p)=>{"use strict";var eT=Mr(),tT=Qt(),rT=Aa(),nT=ng(),oT=Object;$p.exports=nT?function(e){return typeof e=="symbol"}:function(e){var t=eT("Symbol");return tT(t)&&rT(t.prototype,oT(e))}});var ga=Q((f6,em)=>{"use strict";var iT=String;em.exports=function(e){try{return iT(e)}catch{return"Object"}}});var Ur=Q((u6,tm)=>{"use strict";var sT=Qt(),aT=ga(),AT=TypeError;tm.exports=function(e){if(sT(e))return e;throw new AT(aT(e)+" is not a function")}});var da=Q((I6,rm)=>{"use strict";var cT=Ur(),lT=Ji();rm.exports=function(e,t){var r=e[t];return lT(r)?void 0:cT(r)}});var om=Q((p6,nm)=>{"use strict";var og=mr(),ig=Qt(),sg=Vn(),gT=TypeError;nm.exports=function(e,t){var r,n;if(t==="string"&&ig(r=e.toString)&&!sg(n=og(r,e))||ig(r=e.valueOf)&&!sg(n=og(r,e))||t!=="string"&&ig(r=e.toString)&&!sg(n=og(r,e)))return n;throw new gT("Can't convert object to primitive value")}});var fa=Q((m6,im)=>{"use strict";im.exports=!1});var ua=Q((h6,am)=>{"use strict";var sm=Te(),dT=Object.defineProperty;am.exports=function(e,t){try{dT(sm,e,{value:t,configurable:!0,writable:!0})}catch{sm[e]=t}return t}});var Ia=Q((C6,lm)=>{"use strict";var fT=fa(),uT=Te(),IT=ua(),Am="__core-js_shared__",cm=lm.exports=uT[Am]||IT(Am,{});(cm.versions||(cm.versions=[])).push({version:"3.45.1",mode:fT?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})});var ag=Q((B6,dm)=>{"use strict";var gm=Ia();dm.exports=function(e,t){return gm[e]||(gm[e]=t||{})}});var Ag=Q((E6,fm)=>{"use strict";var pT=jl(),mT=Object;fm.exports=function(e){return mT(pT(e))}});var hr=Q((y6,um)=>{"use strict";var hT=He(),CT=Ag(),BT=hT({}.hasOwnProperty);um.exports=Object.hasOwn||function(t,r){return BT(CT(t),r)}});var pa=Q((Q6,Im)=>{"use strict";var ET=He(),yT=0,QT=Math.random(),wT=ET(1.1.toString);Im.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+wT(++yT+QT,36)}});var ln=Q((w6,mm)=>{"use strict";var ST=Te(),bT=ag(),pm=hr(),xT=pa(),_T=rg(),DT=ng(),Fo=ST.Symbol,cg=bT("wks"),kT=DT?Fo.for||Fo:Fo&&Fo.withoutSetter||xT;mm.exports=function(e){return pm(cg,e)||(cg[e]=_T&&pm(Fo,e)?Fo[e]:kT("Symbol."+e)),cg[e]}});var Em=Q((S6,Bm)=>{"use strict";var FT=mr(),hm=Vn(),Cm=la(),vT=da(),RT=om(),TT=ln(),NT=TypeError,MT=TT("toPrimitive");Bm.exports=function(e,t){if(!hm(e)||Cm(e))return e;var r=vT(e,MT),n;if(r){if(t===void 0&&(t="default"),n=FT(r,e,t),!hm(n)||Cm(n))return n;throw new NT("Can't convert object to primitive value")}return t===void 0&&(t="number"),RT(e,t)}});var lg=Q((b6,ym)=>{"use strict";var UT=Em(),PT=la();ym.exports=function(e){var t=UT(e,"string");return PT(t)?t:t+""}});var dg=Q((x6,wm)=>{"use strict";var OT=Te(),Qm=Vn(),gg=OT.document,GT=Qm(gg)&&Qm(gg.createElement);wm.exports=function(e){return GT?gg.createElement(e):{}}});var fg=Q((_6,Sm)=>{"use strict";var qT=Zt(),HT=ze(),LT=dg();Sm.exports=!qT&&!HT(function(){return Object.defineProperty(LT("div"),"a",{get:function(){return 7}}).a!==7})});var ug=Q(xm=>{"use strict";var KT=Zt(),JT=mr(),zT=Sp(),VT=Li(),YT=Nr(),WT=lg(),jT=hr(),XT=fg(),bm=Object.getOwnPropertyDescriptor;xm.f=KT?bm:function(t,r){if(t=YT(t),r=WT(r),XT)try{return bm(t,r)}catch{}if(jT(t,r))return VT(!JT(zT.f,t,r),t[r])}});var Ig=Q((k6,_m)=>{"use strict";var ZT=Zt(),$T=ze();_m.exports=ZT&&$T(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var er=Q((F6,Dm)=>{"use strict";var eN=Vn(),tN=String,rN=TypeError;Dm.exports=function(e){if(eN(e))return e;throw new rN(tN(e)+" is not an object")}});var Yn=Q(Fm=>{"use strict";var nN=Zt(),oN=fg(),iN=Ig(),ma=er(),km=lg(),sN=TypeError,pg=Object.defineProperty,aN=Object.getOwnPropertyDescriptor,mg="enumerable",hg="configurable",Cg="writable";Fm.f=nN?iN?function(t,r,n){if(ma(t),r=km(r),ma(n),typeof t=="function"&&r==="prototype"&&"value"in n&&Cg in n&&!n[Cg]){var o=aN(t,r);o&&o[Cg]&&(t[r]=n.value,n={configurable:hg in n?n[hg]:o[hg],enumerable:mg in n?n[mg]:o[mg],writable:!1})}return pg(t,r,n)}:pg:function(t,r,n){if(ma(t),r=km(r),ma(n),oN)try{return pg(t,r,n)}catch{}if("get"in n||"set"in n)throw new sN("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var ha=Q((R6,vm)=>{"use strict";var AN=Zt(),cN=Yn(),lN=Li();vm.exports=AN?function(e,t,r){return cN.f(e,t,lN(1,r))}:function(e,t,r){return e[t]=r,e}});var Nm=Q((T6,Tm)=>{"use strict";var Bg=Zt(),gN=hr(),Rm=Function.prototype,dN=Bg&&Object.getOwnPropertyDescriptor,Eg=gN(Rm,"name"),fN=Eg&&(function(){}).name==="something",uN=Eg&&(!Bg||Bg&&dN(Rm,"name").configurable);Tm.exports={EXISTS:Eg,PROPER:fN,CONFIGURABLE:uN}});var Qg=Q((N6,Mm)=>{"use strict";var IN=He(),pN=Qt(),yg=Ia(),mN=IN(Function.toString);pN(yg.inspectSource)||(yg.inspectSource=function(e){return mN(e)});Mm.exports=yg.inspectSource});var Om=Q((M6,Pm)=>{"use strict";var hN=Te(),CN=Qt(),Um=hN.WeakMap;Pm.exports=CN(Um)&&/native code/.test(String(Um))});var wg=Q((U6,qm)=>{"use strict";var BN=ag(),EN=pa(),Gm=BN("keys");qm.exports=function(e){return Gm[e]||(Gm[e]=EN(e))}});var Ca=Q((P6,Hm)=>{"use strict";Hm.exports={}});var zm=Q((O6,Jm)=>{"use strict";var yN=Om(),Km=Te(),QN=Vn(),wN=ha(),Sg=hr(),bg=Ia(),SN=wg(),bN=Ca(),Lm="Object already initialized",xg=Km.TypeError,xN=Km.WeakMap,Ba,zi,Ea,_N=function(e){return Ea(e)?zi(e):Ba(e,{})},DN=function(e){return function(t){var r;if(!QN(t)||(r=zi(t)).type!==e)throw new xg("Incompatible receiver, "+e+" required");return r}};yN||bg.state?(tr=bg.state||(bg.state=new xN),tr.get=tr.get,tr.has=tr.has,tr.set=tr.set,Ba=function(e,t){if(tr.has(e))throw new xg(Lm);return t.facade=e,tr.set(e,t),t},zi=function(e){return tr.get(e)||{}},Ea=function(e){return tr.has(e)}):(Wn=SN("state"),bN[Wn]=!0,Ba=function(e,t){if(Sg(e,Wn))throw new xg(Lm);return t.facade=e,wN(e,Wn,t),t},zi=function(e){return Sg(e,Wn)?e[Wn]:{}},Ea=function(e){return Sg(e,Wn)});var tr,Wn;Jm.exports={set:Ba,get:zi,has:Ea,enforce:_N,getterFor:DN}});var jm=Q((G6,Wm)=>{"use strict";var Dg=He(),kN=ze(),FN=Qt(),ya=hr(),_g=Zt(),vN=Nm().CONFIGURABLE,RN=Qg(),Ym=zm(),TN=Ym.enforce,NN=Ym.get,Vm=String,Qa=Object.defineProperty,MN=Dg("".slice),UN=Dg("".replace),PN=Dg([].join),ON=_g&&!kN(function(){return Qa(function(){},"length",{value:8}).length!==8}),GN=String(String).split("String"),qN=Wm.exports=function(e,t,r){MN(Vm(t),0,7)==="Symbol("&&(t="["+UN(Vm(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!ya(e,"name")||vN&&e.name!==t)&&(_g?Qa(e,"name",{value:t,configurable:!0}):e.name=t),ON&&r&&ya(r,"arity")&&e.length!==r.arity&&Qa(e,"length",{value:r.arity});try{r&&ya(r,"constructor")&&r.constructor?_g&&Qa(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var n=TN(e);return ya(n,"source")||(n.source=PN(GN,typeof t=="string"?t:"")),e};Function.prototype.toString=qN(function(){return FN(this)&&NN(this).source||RN(this)},"toString")});var Zm=Q((q6,Xm)=>{"use strict";var HN=Qt(),LN=Yn(),KN=jm(),JN=ua();Xm.exports=function(e,t,r,n){n||(n={});var o=n.enumerable,i=n.name!==void 0?n.name:t;if(HN(r)&&KN(r,i,n),n.global)o?e[t]=r:JN(t,r);else{try{n.unsafe?e[t]&&(o=!0):delete e[t]}catch{}o?e[t]=r:LN.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var eh=Q((H6,$m)=>{"use strict";var zN=Math.ceil,VN=Math.floor;$m.exports=Math.trunc||function(t){var r=+t;return(r>0?VN:zN)(r)}});var jn=Q((L6,th)=>{"use strict";var YN=eh();th.exports=function(e){var t=+e;return t!==t||t===0?0:YN(t)}});var kg=Q((K6,rh)=>{"use strict";var WN=jn(),jN=Math.max,XN=Math.min;rh.exports=function(e,t){var r=WN(e);return r<0?jN(r+t,0):XN(r,t)}});var oh=Q((J6,nh)=>{"use strict";var ZN=jn(),$N=Math.min;nh.exports=function(e){var t=ZN(e);return t>0?$N(t,9007199254740991):0}});var Pr=Q((z6,ih)=>{"use strict";var eM=oh();ih.exports=function(e){return eM(e.length)}});var Ah=Q((V6,ah)=>{"use strict";var tM=Nr(),rM=kg(),nM=Pr(),sh=function(e){return function(t,r,n){var o=tM(t),i=nM(o);if(i===0)return!e&&-1;var s=rM(n,i),a;if(e&&r!==r){for(;i>s;)if(a=o[s++],a!==a)return!0}else for(;i>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}};ah.exports={includes:sh(!0),indexOf:sh(!1)}});var vg=Q((Y6,lh)=>{"use strict";var oM=He(),Fg=hr(),iM=Nr(),sM=Ah().indexOf,aM=Ca(),ch=oM([].push);lh.exports=function(e,t){var r=iM(e),n=0,o=[],i;for(i in r)!Fg(aM,i)&&Fg(r,i)&&ch(o,i);for(;t.length>n;)Fg(r,i=t[n++])&&(~sM(o,i)||ch(o,i));return o}});var wa=Q((W6,gh)=>{"use strict";gh.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var fh=Q(dh=>{"use strict";var AM=vg(),cM=wa(),lM=cM.concat("length","prototype");dh.f=Object.getOwnPropertyNames||function(t){return AM(t,lM)}});var Ih=Q(uh=>{"use strict";uh.f=Object.getOwnPropertySymbols});var mh=Q((Z6,ph)=>{"use strict";var gM=Mr(),dM=He(),fM=fh(),uM=Ih(),IM=er(),pM=dM([].concat);ph.exports=gM("Reflect","ownKeys")||function(t){var r=fM.f(IM(t)),n=uM.f;return n?pM(r,n(t)):r}});var Bh=Q(($6,Ch)=>{"use strict";var hh=hr(),mM=mh(),hM=ug(),CM=Yn();Ch.exports=function(e,t,r){for(var n=mM(t),o=CM.f,i=hM.f,s=0;s<n.length;s++){var a=n[s];!hh(e,a)&&!(r&&hh(r,a))&&o(e,a,i(t,a))}}});var yh=Q((e5,Eh)=>{"use strict";var BM=ze(),EM=Qt(),yM=/#|\.prototype\./,Vi=function(e,t){var r=wM[QM(e)];return r===bM?!0:r===SM?!1:EM(t)?BM(t):!!t},QM=Vi.normalize=function(e){return String(e).replace(yM,".").toLowerCase()},wM=Vi.data={},SM=Vi.NATIVE="N",bM=Vi.POLYFILL="P";Eh.exports=Vi});var Ve=Q((t5,Qh)=>{"use strict";var Sa=Te(),xM=ug().f,_M=ha(),DM=Zm(),kM=ua(),FM=Bh(),vM=yh();Qh.exports=function(e,t){var r=e.target,n=e.global,o=e.stat,i,s,a,A,c,l;if(n?s=Sa:o?s=Sa[r]||kM(r,{}):s=Sa[r]&&Sa[r].prototype,s)for(a in t){if(c=t[a],e.dontCallGetSet?(l=xM(s,a),A=l&&l.value):A=s[a],i=vM(n?a:r+(o?".":"#")+a,e.forced),!i&&A!==void 0){if(typeof c==typeof A)continue;FM(c,A)}(e.sham||A&&A.sham)&&_M(c,"sham",!0),DM(s,a,c,e)}}});var Sh=Q((r5,wh)=>{"use strict";var RM=vg(),TM=wa();wh.exports=Object.keys||function(t){return RM(t,TM)}});var xh=Q(bh=>{"use strict";var NM=Zt(),MM=Ig(),UM=Yn(),PM=er(),OM=Nr(),GM=Sh();bh.f=NM&&!MM?Object.defineProperties:function(t,r){PM(t);for(var n=OM(r),o=GM(r),i=o.length,s=0,a;i>s;)UM.f(t,a=o[s++],n[a]);return t}});var Dh=Q((o5,_h)=>{"use strict";var qM=Mr();_h.exports=qM("document","documentElement")});var Uh=Q((i5,Mh)=>{"use strict";var HM=er(),LM=xh(),kh=wa(),KM=Ca(),JM=Dh(),zM=dg(),VM=wg(),Fh=">",vh="<",Tg="prototype",Ng="script",Th=VM("IE_PROTO"),Rg=function(){},Nh=function(e){return vh+Ng+Fh+e+vh+"/"+Ng+Fh},Rh=function(e){e.write(Nh("")),e.close();var t=e.parentWindow.Object;return e=null,t},YM=function(){var e=zM("iframe"),t="java"+Ng+":",r;return e.style.display="none",JM.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(Nh("document.F=Object")),r.close(),r.F},ba,xa=function(){try{ba=new ActiveXObject("htmlfile")}catch{}xa=typeof document<"u"?document.domain&&ba?Rh(ba):YM():Rh(ba);for(var e=kh.length;e--;)delete xa[Tg][kh[e]];return xa()};KM[Th]=!0;Mh.exports=Object.create||function(t,r){var n;return t!==null?(Rg[Tg]=HM(t),n=new Rg,Rg[Tg]=null,n[Th]=t):n=xa(),r===void 0?n:LM.f(n,r)}});var Yi=Q((s5,Ph)=>{"use strict";var WM=ln(),jM=Uh(),XM=Yn().f,Mg=WM("unscopables"),Ug=Array.prototype;Ug[Mg]===void 0&&XM(Ug,Mg,{configurable:!0,value:jM(null)});Ph.exports=function(e){Ug[Mg][e]=!0}});var Oh=Q(()=>{"use strict";var ZM=Ve(),$M=Ag(),eU=Pr(),tU=jn(),rU=Yi();ZM({target:"Array",proto:!0},{at:function(t){var r=$M(this),n=eU(r),o=tU(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]}});rU("at")});var qh=Q((c5,Gh)=>{"use strict";var nU=Pr();Gh.exports=function(e,t){for(var r=nU(e),n=new t(r),o=0;o<r;o++)n[o]=e[r-o-1];return n}});var Hh=Q(()=>{"use strict";var oU=Ve(),iU=qh(),sU=Nr(),aU=Yi(),AU=Array;oU({target:"Array",proto:!0},{toReversed:function(){return iU(sU(this),AU)}});aU("toReversed")});var Kh=Q((d5,Lh)=>{"use strict";var cU=Pr();Lh.exports=function(e,t,r){for(var n=0,o=arguments.length>2?r:cU(t),i=new e(o);o>n;)i[n]=t[n++];return i}});var zh=Q((f5,Jh)=>{"use strict";var lU=Te();Jh.exports=function(e,t){var r=lU[e],n=r&&r.prototype;return n&&n[t]}});var Vh=Q(()=>{"use strict";var gU=Ve(),dU=He(),fU=Ur(),uU=Nr(),IU=Kh(),pU=zh(),mU=Yi(),hU=Array,CU=dU(pU("Array","sort"));gU({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&fU(t);var r=uU(this),n=IU(hU,r);return CU(n,t)}});mU("toSorted")});var Wh=Q((p5,Yh)=>{"use strict";var BU=TypeError,EU=9007199254740991;Yh.exports=function(e){if(e>EU)throw BU("Maximum allowed index exceeded");return e}});var jh=Q(()=>{"use strict";var yU=Ve(),QU=Yi(),wU=Wh(),SU=Pr(),bU=kg(),xU=Nr(),_U=jn(),DU=Array,kU=Math.max,FU=Math.min;yU({target:"Array",proto:!0},{toSpliced:function(t,r){var n=xU(this),o=SU(n),i=bU(t,o),s=arguments.length,a=0,A,c,l,g;for(s===0?A=c=0:s===1?(A=0,c=o-i):(A=s-2,c=FU(kU(_U(r),0),o-i)),l=wU(o+A-c),g=DU(l);a<i;a++)g[a]=n[a];for(;a<i+A;a++)g[a]=arguments[a-i+2];for(;a<l;a++)g[a]=n[a+c-A];return g}});QU("toSpliced")});var Zh=Q((C5,Xh)=>{"use strict";var vU=Pr(),RU=jn(),TU=RangeError;Xh.exports=function(e,t,r,n){var o=vU(e),i=RU(r),s=i<0?o+i:i;if(s>=o||s<0)throw new TU("Incorrect index");for(var a=new t(o),A=0;A<o;A++)a[A]=A===s?n:e[A];return a}});var $h=Q(()=>{"use strict";var NU=Ve(),MU=Zh(),UU=Nr(),PU=Array,OU=(function(){try{[].with({valueOf:function(){throw 4}},null)}catch(e){return e!==4}})();NU({target:"Array",proto:!0,forced:OU},{with:function(e,t){return MU(UU(this),PU,e,t)}})});var oC=Q((y5,nC)=>{"use strict";var GU=Hi(),rC=Function.prototype,eC=rC.apply,tC=rC.call;nC.exports=typeof Reflect=="object"&&Reflect.apply||(GU?tC.bind(eC):function(){return tC.apply(eC,arguments)})});var sC=Q((Q5,iC)=>{"use strict";var qU=He();iC.exports=qU([].slice)});var Pg=Q((w5,AC)=>{"use strict";var aC=Ur(),HU=TypeError,LU=function(e){var t,r;this.promise=new e(function(n,o){if(t!==void 0||r!==void 0)throw new HU("Bad Promise constructor");t=n,r=o}),this.resolve=aC(t),this.reject=aC(r)};AC.exports.f=function(e){return new LU(e)}});var lC=Q((S5,cC)=>{"use strict";cC.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var fC=Q(()=>{"use strict";var KU=Ve(),JU=Te(),zU=oC(),VU=sC(),YU=Pg(),WU=Ur(),dC=lC(),Og=JU.Promise,gC=!1,jU=!Og||!Og.try||dC(function(){Og.try(function(e){gC=e===8},8)}).error||!gC;KU({target:"Promise",stat:!0,forced:jU},{try:function(e){var t=arguments.length>1?VU(arguments,1):[],r=YU.f(this),n=dC(function(){return zU(WU(e),void 0,t)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var uC=Q(()=>{"use strict";var XU=Ve(),ZU=Pg();XU({target:"Promise",stat:!0},{withResolvers:function(){var t=ZU.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var mC=Q((k5,pC)=>{"use strict";var $U=ln(),eP=$U("toStringTag"),IC={};IC[eP]="z";pC.exports=String(IC)==="[object z]"});var Wi=Q((F5,hC)=>{"use strict";var tP=mC(),rP=Qt(),_a=Ki(),nP=ln(),oP=nP("toStringTag"),iP=Object,sP=_a((function(){return arguments})())==="Arguments",aP=function(e,t){try{return e[t]}catch{}};hC.exports=tP?_a:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=aP(t=iP(e),oP))=="string"?r:sP?_a(t):(n=_a(t))==="Object"&&rP(t.callee)?"Arguments":n}});var wC=Q((v5,QC)=>{"use strict";var AP=He(),cP=ze(),CC=Qt(),lP=Wi(),gP=Mr(),dP=Qg(),BC=function(){},EC=gP("Reflect","construct"),Gg=/^\s*(?:class|function)\b/,fP=AP(Gg.exec),uP=!Gg.test(BC),ji=function(t){if(!CC(t))return!1;try{return EC(BC,[],t),!0}catch{return!1}},yC=function(t){if(!CC(t))return!1;switch(lP(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return uP||!!fP(Gg,dP(t))}catch{return!0}};yC.sham=!0;QC.exports=!EC||cP(function(){var e;return ji(ji.call)||!ji(Object)||!ji(function(){e=!0})||e})?yC:ji});var bC=Q((R5,SC)=>{"use strict";var IP=Ki(),pP=He();SC.exports=function(e){if(IP(e)==="Function")return pP(e)}});var DC=Q((T5,_C)=>{"use strict";var xC=bC(),mP=Ur(),hP=Hi(),CP=xC(xC.bind);_C.exports=function(e,t){return mP(e),t===void 0?e:hP?CP(e,t):function(){return e.apply(t,arguments)}}});var qg=Q((N5,kC)=>{"use strict";kC.exports={}});var vC=Q((M5,FC)=>{"use strict";var BP=ln(),EP=qg(),yP=BP("iterator"),QP=Array.prototype;FC.exports=function(e){return e!==void 0&&(EP.Array===e||QP[yP]===e)}});var Hg=Q((U5,TC)=>{"use strict";var wP=Wi(),RC=da(),SP=Ji(),bP=qg(),xP=ln(),_P=xP("iterator");TC.exports=function(e){if(!SP(e))return RC(e,_P)||RC(e,"@@iterator")||bP[wP(e)]}});var MC=Q((P5,NC)=>{"use strict";var DP=mr(),kP=Ur(),FP=er(),vP=ga(),RP=Hg(),TP=TypeError;NC.exports=function(e,t){var r=arguments.length<2?RP(e):t;if(kP(r))return FP(DP(r,e));throw new TP(vP(e)+" is not iterable")}});var Da=Q((O5,PC)=>{"use strict";var NP=mr(),UC=er(),MP=da();PC.exports=function(e,t,r){var n,o;UC(e);try{if(n=MP(e,"return"),!n){if(t==="throw")throw r;return r}n=NP(n,e)}catch(i){o=!0,n=i}if(t==="throw")throw r;if(o)throw n;return UC(n),r}});var LC=Q((G5,HC)=>{"use strict";var UP=DC(),PP=mr(),OP=er(),GP=ga(),qP=vC(),HP=Pr(),OC=Aa(),LP=MC(),KP=Hg(),GC=Da(),JP=TypeError,ka=function(e,t){this.stopped=e,this.result=t},qC=ka.prototype;HC.exports=function(e,t,r){var n=r&&r.that,o=!!(r&&r.AS_ENTRIES),i=!!(r&&r.IS_RECORD),s=!!(r&&r.IS_ITERATOR),a=!!(r&&r.INTERRUPTED),A=UP(t,n),c,l,g,d,f,u,m,C=function(w){return c&&GC(c,"normal"),new ka(!0,w)},p=function(w){return o?(OP(w),a?A(w[0],w[1],C):A(w[0],w[1])):a?A(w,C):A(w)};if(i)c=e.iterator;else if(s)c=e;else{if(l=KP(e),!l)throw new JP(GP(e)+" is not iterable");if(qP(l)){for(g=0,d=HP(e);d>g;g++)if(f=p(e[g]),f&&OC(qC,f))return f;return new ka(!1)}c=LP(e,l)}for(u=i?e.next:c.next;!(m=PP(u,c)).done;){try{f=p(m.value)}catch(w){GC(c,"throw",w)}if(typeof f=="object"&&f&&OC(qC,f))return f}return new ka(!1)}});var JC=Q((q5,KC)=>{"use strict";var zP=Zt(),VP=Yn(),YP=Li();KC.exports=function(e,t,r){zP?VP.f(e,t,YP(0,r)):e[t]=r}});var Fa=Q((H5,zC)=>{"use strict";var WP=TypeError;zC.exports=function(e,t){if(e<t)throw new WP("Not enough arguments");return e}});var WC=Q((L5,YC)=>{"use strict";var jP=Te(),XP=ze(),VC=jP.RegExp,ZP=!XP(function(){var e=!0;try{VC(".","d")}catch{e=!1}var t={},r="",n=e?"dgimsy":"gimsy",o=function(A,c){Object.defineProperty(t,A,{get:function(){return r+=c,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(i.hasIndices="d");for(var s in i)o(s,i[s]);var a=Object.getOwnPropertyDescriptor(VC.prototype,"flags").get.call(t);return a!==n||r!==n});YC.exports={correct:ZP}});var XC=Q((K5,jC)=>{"use strict";var $P=er();jC.exports=function(){var e=$P(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var eB=Q((J5,$C)=>{"use strict";var e3=mr(),t3=hr(),r3=Aa(),ZC=WC(),n3=XC(),o3=RegExp.prototype;$C.exports=ZC.correct?function(e){return e.flags}:function(e){return!ZC.correct&&r3(o3,e)&&!t3(e,"flags")?e3(n3,e):e.flags}});var rB=Q((z5,tB)=>{"use strict";var va=He(),Xi=Map.prototype;tB.exports={Map,set:va(Xi.set),get:va(Xi.get),has:va(Xi.has),remove:va(Xi.delete),proto:Xi}});var Jt=Q((V5,nB)=>{"use strict";var Lg=He(),Ra=Set.prototype;nB.exports={Set,add:Lg(Ra.add),has:Lg(Ra.has),remove:Lg(Ra.delete),proto:Ra}});var gn=Q((Y5,oB)=>{"use strict";var i3=mr();oB.exports=function(e,t,r){for(var n=r?e:e.iterator,o=e.next,i,s;!(i=i3(o,n)).done;)if(s=t(i.value),s!==void 0)return s}});var Xn=Q((W5,cB)=>{"use strict";var iB=He(),s3=gn(),sB=Jt(),a3=sB.Set,aB=sB.proto,A3=iB(aB.forEach),AB=iB(aB.keys),c3=AB(new a3).next;cB.exports=function(e,t,r){return r?s3({iterator:AB(e),next:c3},t):A3(e,t)}});var Kg=Q((j5,lB)=>{"use strict";var Zi=Te(),l3=$l(),g3=Ki(),Ta=function(e){return l3.slice(0,e.length)===e};lB.exports=(function(){return Ta("Bun/")?"BUN":Ta("Cloudflare-Workers")?"CLOUDFLARE":Ta("Deno/")?"DENO":Ta("Node.js/")?"NODE":Zi.Bun&&typeof Bun.version=="string"?"BUN":Zi.Deno&&typeof Deno.version=="object"?"DENO":g3(Zi.process)==="process"?"NODE":Zi.window&&Zi.document?"BROWSER":"REST"})()});var dB=Q((X5,gB)=>{"use strict";var d3=Kg();gB.exports=d3==="NODE"});var uB=Q((Z5,fB)=>{"use strict";var f3=Te(),u3=dB();fB.exports=function(e){if(u3){try{return f3.process.getBuiltinModule(e)}catch{}try{return Function('return require("'+e+'")')()}catch{}}}});var Vg=Q(($5,pB)=>{"use strict";var I3=Te(),p3=ze(),Jg=tg(),zg=Kg(),IB=I3.structuredClone;pB.exports=!!IB&&!p3(function(){if(zg==="DENO"&&Jg>92||zg==="NODE"&&Jg>94||zg==="BROWSER"&&Jg>97)return!1;var e=new ArrayBuffer(8),t=IB(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var BB=Q((eZ,CB)=>{"use strict";var Xg=Te(),m3=uB(),h3=Vg(),C3=Xg.structuredClone,mB=Xg.ArrayBuffer,Na=Xg.MessageChannel,jg=!1,Yg,hB,Ma,Wg;if(h3)jg=function(e){C3(e,{transfer:[e]})};else if(mB)try{Na||(Yg=m3("worker_threads"),Yg&&(Na=Yg.MessageChannel)),Na&&(hB=new Na,Ma=new mB(2),Wg=function(e){hB.port1.postMessage(null,[e])},Ma.byteLength===2&&(Wg(Ma),Ma.byteLength===0&&(jg=Wg)))}catch{}CB.exports=jg});var yB=Q((tZ,EB)=>{"use strict";var B3=ze(),E3=Li();EB.exports=!B3(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",E3(1,7)),e.stack!==7):!0})});var RB=Q(()=>{"use strict";var y3=fa(),Q3=Ve(),rt=Te(),es=Mr(),rs=He(),nd=ze(),w3=pa(),Ro=Qt(),S3=wC(),b3=Ji(),qa=Vn(),x3=la(),_3=LC(),SB=er(),Oa=Wi(),D3=hr(),k3=JC(),Zg=ha(),Ua=Pr(),F3=Fa(),v3=eB(),Ha=rB(),od=Jt(),R3=Xn(),QB=BB(),T3=yB(),id=Vg(),$i=rt.Object,N3=rt.Array,bB=rt.Date,xB=rt.Error,M3=rt.TypeError,U3=rt.PerformanceMark,Zn=es("DOMException"),td=Ha.Map,sd=Ha.has,_B=Ha.get,Ga=Ha.set,DB=od.Set,kB=od.add,P3=od.has,O3=es("Object","keys"),G3=rs([].push),q3=rs((!0).valueOf),H3=rs(1.1.valueOf),L3=rs("".valueOf),K3=rs(bB.prototype.getTime),rd=w3("structuredClone"),ts="DataCloneError",Pa="Transferring",FB=function(e){return!nd(function(){var t=new rt.Set([7]),r=e(t),n=e($i(7));return r===t||!r.has(7)||!qa(n)||+n!=7})&&e},wB=function(e,t){return!nd(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},J3=function(e){return!nd(function(){var t=e(new rt.AggregateError([1],rd,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==rd||t.cause!==3})},vo=rt.structuredClone,z3=y3||!wB(vo,xB)||!wB(vo,Zn)||!J3(vo),V3=!vo&&FB(function(e){return new U3(rd,{detail:e}).detail}),Or=FB(vo)||V3,$g=function(e){throw new Zn("Uncloneable type: "+e,ts)},wt=function(e,t){throw new Zn((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",ts)},ed=function(e,t){return Or||wt(t),Or(e)},Y3=function(){var e;try{e=new rt.DataTransfer}catch{try{e=new rt.ClipboardEvent("").clipboardData}catch{}}return e&&e.items&&e.files?e:null},vB=function(e,t,r){if(sd(t,e))return _B(t,e);var n=r||Oa(e),o,i,s,a,A,c;if(n==="SharedArrayBuffer")Or?o=Or(e):o=e;else{var l=rt.DataView;!l&&!Ro(e.slice)&&wt("ArrayBuffer");try{if(Ro(e.slice)&&!e.resizable)o=e.slice(0);else for(i=e.byteLength,s=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,o=new ArrayBuffer(i,s),a=new l(e),A=new l(o),c=0;c<i;c++)A.setUint8(c,a.getUint8(c))}catch{throw new Zn("ArrayBuffer is detached",ts)}}return Ga(t,e,o),o},W3=function(e,t,r,n,o){var i=rt[t];return qa(i)||wt(t),new i(vB(e.buffer,o),r,n)},tt=function(e,t){if(x3(e)&&$g("Symbol"),!qa(e))return e;if(t){if(sd(t,e))return _B(t,e)}else t=new td;var r=Oa(e),n,o,i,s,a,A,c,l;switch(r){case"Array":i=N3(Ua(e));break;case"Object":i={};break;case"Map":i=new td;break;case"Set":i=new DB;break;case"RegExp":i=new RegExp(e.source,v3(e));break;case"Error":switch(o=e.name,o){case"AggregateError":i=new(es(o))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":i=new(es(o));break;case"CompileError":case"LinkError":case"RuntimeError":i=new(es("WebAssembly",o));break;default:i=new xB}break;case"DOMException":i=new Zn(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":i=vB(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":A=r==="DataView"?e.byteLength:e.length,i=W3(e,r,e.byteOffset,A,t);break;case"DOMQuad":try{i=new DOMQuad(tt(e.p1,t),tt(e.p2,t),tt(e.p3,t),tt(e.p4,t))}catch{i=ed(e,r)}break;case"File":if(Or)try{i=Or(e),Oa(i)!==r&&(i=void 0)}catch{}if(!i)try{i=new File([e],e.name,e)}catch{}i||wt(r);break;case"FileList":if(s=Y3(),s){for(a=0,A=Ua(e);a<A;a++)s.items.add(tt(e[a],t));i=s.files}else i=ed(e,r);break;case"ImageData":try{i=new ImageData(tt(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch{i=ed(e,r)}break;default:if(Or)i=Or(e);else switch(r){case"BigInt":i=$i(e.valueOf());break;case"Boolean":i=$i(q3(e));break;case"Number":i=$i(H3(e));break;case"String":i=$i(L3(e));break;case"Date":i=new bB(K3(e));break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch{wt(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=rt[r];try{i=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch{wt(r)}break;case"DOMRect":case"DOMRectReadOnly":n=rt[r];try{i=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch{wt(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=rt[r];try{i=n.fromMatrix?n.fromMatrix(e):new n(e)}catch{wt(r)}break;case"AudioData":case"VideoFrame":Ro(e.clone)||wt(r);try{i=e.clone()}catch{$g(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":wt(r);default:$g(r)}}switch(Ga(t,e,i),r){case"Array":case"Object":for(c=O3(e),a=0,A=Ua(c);a<A;a++)l=c[a],k3(i,l,tt(e[l],t));break;case"Map":e.forEach(function(g,d){Ga(i,tt(d,t),tt(g,t))});break;case"Set":e.forEach(function(g){kB(i,tt(g,t))});break;case"Error":Zg(i,"message",tt(e.message,t)),D3(e,"cause")&&Zg(i,"cause",tt(e.cause,t)),o==="AggregateError"?i.errors=tt(e.errors,t):o==="SuppressedError"&&(i.error=tt(e.error,t),i.suppressed=tt(e.suppressed,t));case"DOMException":T3&&Zg(i,"stack",tt(e.stack,t))}return i},j3=function(e,t){if(!qa(e))throw new M3("Transfer option cannot be converted to a sequence");var r=[];_3(e,function(d){G3(r,SB(d))});for(var n=0,o=Ua(r),i=new DB,s,a,A,c,l,g;n<o;){if(s=r[n++],a=Oa(s),a==="ArrayBuffer"?P3(i,s):sd(t,s))throw new Zn("Duplicate transferable",ts);if(a==="ArrayBuffer"){kB(i,s);continue}if(id)c=vo(s,{transfer:[s]});else switch(a){case"ImageBitmap":A=rt.OffscreenCanvas,S3(A)||wt(a,Pa);try{l=new A(s.width,s.height),g=l.getContext("bitmaprenderer"),g.transferFromImageBitmap(s),c=l.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!Ro(s.clone)||!Ro(s.close))&&wt(a,Pa);try{c=s.clone(),s.close()}catch{}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":wt(a,Pa)}if(c===void 0)throw new Zn("This object cannot be transferred: "+a,ts);Ga(t,s,c)}return i},X3=function(e){R3(e,function(t){id?Or(t,{transfer:[t]}):Ro(t.transfer)?t.transfer():QB?QB(t):wt("ArrayBuffer",Pa)})};Q3({global:!0,enumerable:!0,sham:!id,forced:z3},{structuredClone:function(t){var r=F3(arguments.length,1)>1&&!b3(arguments[1])?SB(arguments[1]):void 0,n=r?r.transfer:void 0,o,i;n!==void 0&&(o=new td,i=j3(n,o));var s=tt(t,o);return i&&X3(i),s}})});var ad=Q((oZ,TB)=>{"use strict";var Z3=Wi(),$3=String;TB.exports=function(e){if(Z3(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return $3(e)}});var Ad=Q((iZ,MB)=>{"use strict";var eO=ze(),tO=ln(),rO=Zt(),NB=fa(),nO=tO("iterator");MB.exports=!eO(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(o,i){t.delete("b"),n+=i+o}),r.delete("a",2),r.delete("b",void 0),NB&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(NB||!rO)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[nO]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var OB=Q(()=>{"use strict";var oO=Ve(),iO=Mr(),PB=ze(),sO=Fa(),UB=ad(),aO=Ad(),cd=iO("URL"),AO=aO&&PB(function(){cd.canParse()}),cO=PB(function(){return cd.canParse.length!==1});oO({target:"URL",stat:!0,forced:!AO||cO},{canParse:function(t){var r=sO(arguments.length,1),n=UB(t),o=r<2||arguments[1]===void 0?void 0:UB(arguments[1]);try{return!!new cd(n,o)}catch{return!1}}})});var qB=Q(()=>{"use strict";var lO=Ve(),gO=Mr(),dO=Fa(),GB=ad(),fO=Ad(),uO=gO("URL");lO({target:"URL",stat:!0,forced:!fO},{parse:function(t){var r=dO(arguments.length,1),n=GB(t),o=r<2||arguments[1]===void 0?void 0:GB(arguments[1]);try{return new uO(n,o)}catch{return null}}})});var dn=Q((lZ,HB)=>{"use strict";var IO=Jt().has;HB.exports=function(e){return IO(e),e}});var La=Q((gZ,KB)=>{"use strict";var LB=Jt(),pO=Xn(),mO=LB.Set,hO=LB.add;KB.exports=function(e){var t=new mO;return pO(e,function(r){hO(t,r)}),t}});var zB=Q((dZ,JB)=>{"use strict";var CO=He(),BO=Ur();JB.exports=function(e,t,r){try{return CO(BO(Object.getOwnPropertyDescriptor(e,t)[r]))}catch{}}});var To=Q((fZ,VB)=>{"use strict";var EO=zB(),yO=Jt();VB.exports=EO(yO.proto,"size","get")||function(e){return e.size}});var WB=Q((uZ,YB)=>{"use strict";YB.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var fn=Q((IZ,tE)=>{"use strict";var jB=Ur(),$B=er(),XB=mr(),QO=jn(),wO=WB(),ZB="Invalid size",SO=RangeError,bO=TypeError,xO=Math.max,eE=function(e,t){this.set=e,this.size=xO(t,0),this.has=jB(e.has),this.keys=jB(e.keys)};eE.prototype={getIterator:function(){return wO($B(XB(this.keys,this.set)))},includes:function(e){return XB(this.has,this.set,e)}};tE.exports=function(e){$B(e);var t=+e.size;if(t!==t)throw new bO(ZB);var r=QO(t);if(r<0)throw new SO(ZB);return new eE(e,r)}});var iE=Q((pZ,oE)=>{"use strict";var _O=dn(),nE=Jt(),DO=La(),kO=To(),FO=fn(),vO=Xn(),RO=gn(),TO=nE.has,rE=nE.remove;oE.exports=function(t){var r=_O(this),n=FO(t),o=DO(r);return kO(r)<=n.size?vO(r,function(i){n.includes(i)&&rE(o,i)}):RO(n.getIterator(),function(i){TO(o,i)&&rE(o,i)}),o}});var un=Q((mZ,AE)=>{"use strict";var NO=Mr(),sE=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},aE=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};AE.exports=function(e,t){var r=NO("Set");try{new r()[e](sE(0));try{return new r()[e](sE(-1)),!1}catch{if(!t)return!0;try{return new r()[e](aE(-1/0)),!1}catch{var n=new r;return n.add(1),n.add(2),t(n[e](aE(1/0)))}}}catch{return!1}}});var cE=Q(()=>{"use strict";var MO=Ve(),UO=iE(),PO=ze(),OO=un(),GO=!OO("difference",function(e){return e.size===0}),qO=GO||PO(function(){var e={size:1,has:function(){return!0},keys:function(){var r=0;return{next:function(){var n=r++>1;return t.has(1)&&t.clear(),{done:n,value:2}}}}},t=new Set([1,2,3,4]);return t.difference(e).size!==3});MO({target:"Set",proto:!0,real:!0,forced:qO},{difference:UO})});var lE=Q(()=>{"use strict";cE()});var fE=Q((yZ,dE)=>{"use strict";var HO=dn(),ld=Jt(),LO=To(),KO=fn(),JO=Xn(),zO=gn(),VO=ld.Set,gE=ld.add,YO=ld.has;dE.exports=function(t){var r=HO(this),n=KO(t),o=new VO;return LO(r)>n.size?zO(n.getIterator(),function(i){YO(r,i)&&gE(o,i)}):JO(r,function(i){n.includes(i)&&gE(o,i)}),o}});var uE=Q(()=>{"use strict";var WO=Ve(),jO=ze(),XO=fE(),ZO=un(),$O=!ZO("intersection",function(e){return e.size===2&&e.has(1)&&e.has(2)})||jO(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});WO({target:"Set",proto:!0,real:!0,forced:$O},{intersection:XO})});var IE=Q(()=>{"use strict";uE()});var mE=Q((xZ,pE)=>{"use strict";var eG=dn(),tG=Jt().has,rG=To(),nG=fn(),oG=Xn(),iG=gn(),sG=Da();pE.exports=function(t){var r=eG(this),n=nG(t);if(rG(r)<=n.size)return oG(r,function(i){if(n.includes(i))return!1},!0)!==!1;var o=n.getIterator();return iG(o,function(i){if(tG(r,i))return sG(o,"normal",!1)})!==!1}});var hE=Q(()=>{"use strict";var aG=Ve(),AG=mE(),cG=un(),lG=!cG("isDisjointFrom",function(e){return!e});aG({target:"Set",proto:!0,real:!0,forced:lG},{isDisjointFrom:AG})});var CE=Q(()=>{"use strict";hE()});var EE=Q((vZ,BE)=>{"use strict";var gG=dn(),dG=To(),fG=Xn(),uG=fn();BE.exports=function(t){var r=gG(this),n=uG(t);return dG(r)>n.size?!1:fG(r,function(o){if(!n.includes(o))return!1},!0)!==!1}});var yE=Q(()=>{"use strict";var IG=Ve(),pG=EE(),mG=un(),hG=!mG("isSubsetOf",function(e){return e});IG({target:"Set",proto:!0,real:!0,forced:hG},{isSubsetOf:pG})});var QE=Q(()=>{"use strict";yE()});var SE=Q((UZ,wE)=>{"use strict";var CG=dn(),BG=Jt().has,EG=To(),yG=fn(),QG=gn(),wG=Da();wE.exports=function(t){var r=CG(this),n=yG(t);if(EG(r)<n.size)return!1;var o=n.getIterator();return QG(o,function(i){if(!BG(r,i))return wG(o,"normal",!1)})!==!1}});var bE=Q(()=>{"use strict";var SG=Ve(),bG=SE(),xG=un(),_G=!xG("isSupersetOf",function(e){return!e});SG({target:"Set",proto:!0,real:!0,forced:_G},{isSupersetOf:bG})});var xE=Q(()=>{"use strict";bE()});var DE=Q((HZ,_E)=>{"use strict";var DG=dn(),kG=Jt().add,FG=La(),vG=fn(),RG=gn();_E.exports=function(t){var r=DG(this),n=vG(t).getIterator(),o=FG(r);return RG(n,function(i){kG(o,i)}),o}});var gd=Q((LZ,kE)=>{"use strict";kE.exports=function(e){try{var t=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return t.clear(),t.add(4),function(){return{done:!0}}}})}},n=t[e](r);return n.size===1&&n.values().next().value===4}catch{return!1}}});var FE=Q(()=>{"use strict";var TG=Ve(),NG=DE(),MG=gd(),UG=un(),PG=!UG("union")||!MG("union");TG({target:"Set",proto:!0,real:!0,forced:PG},{union:NG})});var vE=Q(()=>{"use strict";FE()});var TE=Q((YZ,RE)=>{"use strict";var OG=dn(),dd=Jt(),GG=La(),qG=fn(),HG=gn(),LG=dd.add,KG=dd.has,JG=dd.remove;RE.exports=function(t){var r=OG(this),n=qG(t).getIterator(),o=GG(r);return HG(n,function(i){KG(r,i)?JG(o,i):LG(o,i)}),o}});var NE=Q(()=>{"use strict";var zG=Ve(),VG=TE(),YG=gd(),WG=un(),jG=!WG("symmetricDifference")||!YG("symmetricDifference");zG({target:"Set",proto:!0,real:!0,forced:jG},{symmetricDifference:VG})});var ME=Q(()=>{"use strict";NE()});var UE=Q(()=>{"use strict";lE();IE();CE();QE();xE();vE();ME()});var Ae=Q((pd,KE)=>{(function(e,t){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],t);else if(typeof pd<"u")t(KE);else{var r={exports:{}};t(r),e.browser=r.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:pd,function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{let t="The message port closed before a response was received.",r=n=>{let o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(b,B=void 0){super(B),this.createItem=b}get(b){return this.has(b)||this.set(b,this.createItem(b)),super.get(b)}}let s=E=>E&&typeof E=="object"&&typeof E.then=="function",a=(E,b)=>(...B)=>{n.runtime.lastError?E.reject(new Error(n.runtime.lastError.message)):b.singleCallbackArg||B.length<=1&&b.singleCallbackArg!==!1?E.resolve(B[0]):E.resolve(B)},A=E=>E==1?"argument":"arguments",c=(E,b)=>function(y,...v){if(v.length<b.minArgs)throw new Error(`Expected at least ${b.minArgs} ${A(b.minArgs)} for ${E}(), got ${v.length}`);if(v.length>b.maxArgs)throw new Error(`Expected at most ${b.maxArgs} ${A(b.maxArgs)} for ${E}(), got ${v.length}`);return new Promise((U,V)=>{if(b.fallbackToNoCallback)try{y[E](...v,a({resolve:U,reject:V},b))}catch{y[E](...v),b.fallbackToNoCallback=!1,b.noCallback=!0,U()}else b.noCallback?(y[E](...v),U()):y[E](...v,a({resolve:U,reject:V},b))})},l=(E,b,B)=>new Proxy(b,{apply(y,v,U){return B.call(v,E,...U)}}),g=Function.call.bind(Object.prototype.hasOwnProperty),d=(E,b={},B={})=>{let y=Object.create(null),v={has(V,L){return L in E||L in y},get(V,L,D){if(L in y)return y[L];if(!(L in E))return;let x=E[L];if(typeof x=="function")if(typeof b[L]=="function")x=l(E,E[L],b[L]);else if(g(B,L)){let N=c(L,B[L]);x=l(E,E[L],N)}else x=x.bind(E);else if(typeof x=="object"&&x!==null&&(g(b,L)||g(B,L)))x=d(x,b[L],B[L]);else if(g(B,"*"))x=d(x,b[L],B["*"]);else return Object.defineProperty(y,L,{configurable:!0,enumerable:!0,get(){return E[L]},set(N){E[L]=N}}),x;return y[L]=x,x},set(V,L,D,x){return L in y?y[L]=D:E[L]=D,!0},defineProperty(V,L,D){return Reflect.defineProperty(y,L,D)},deleteProperty(V,L){return Reflect.deleteProperty(y,L)}},U=Object.create(E);return new Proxy(U,v)},f=E=>({addListener(b,B,...y){b.addListener(E.get(B),...y)},hasListener(b,B){return b.hasListener(E.get(B))},removeListener(b,B){b.removeListener(E.get(B))}}),u=new i(E=>typeof E!="function"?E:function(B){let y=d(B,{},{getContent:{minArgs:0,maxArgs:0}});E(y)}),m=new i(E=>typeof E!="function"?E:function(B,y,v){let U=!1,V,L=new Promise(J=>{V=function(M){U=!0,J(M)}}),D;try{D=E(B,y,V)}catch(J){D=Promise.reject(J)}let x=D!==!0&&s(D);if(D!==!0&&!x&&!U)return!1;let N=J=>{J.then(M=>{v(M)},M=>{let Y;M&&(M instanceof Error||typeof M.message=="string")?Y=M.message:Y="An unexpected error occurred",v({__mozWebExtensionPolyfillReject__:!0,message:Y})}).catch(M=>{})};return N(x?D:L),!0}),C=({reject:E,resolve:b},B)=>{n.runtime.lastError?n.runtime.lastError.message===t?b():E(new Error(n.runtime.lastError.message)):B&&B.__mozWebExtensionPolyfillReject__?E(new Error(B.message)):b(B)},p=(E,b,B,...y)=>{if(y.length<b.minArgs)throw new Error(`Expected at least ${b.minArgs} ${A(b.minArgs)} for ${E}(), got ${y.length}`);if(y.length>b.maxArgs)throw new Error(`Expected at most ${b.maxArgs} ${A(b.maxArgs)} for ${E}(), got ${y.length}`);return new Promise((v,U)=>{let V=C.bind(null,{resolve:v,reject:U});y.push(V),B.sendMessage(...y)})},w={devtools:{network:{onRequestFinished:f(u)}},runtime:{onMessage:f(m),onMessageExternal:f(m),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},F={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":F},services:{"*":F},websites:{"*":F}},d(n,w,o)};e.exports=r(chrome)}})});var vw=Q((gae,BA)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var o="",i=0;i<arguments.length;i++){var s=arguments[i];s&&(o=n(o,r(s)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var s in o)e.call(o,s)&&o[s]&&(i=n(i,s));return i}function n(o,i){return i?o?o+" "+i:o+i:o}typeof BA<"u"&&BA.exports?(t.default=t,BA.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var bS=Q((yle,SS)=>{"use strict";SS.exports=()=>{let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}});var _S=Q((Qle,xS)=>{"use strict";var F8=bS();function v8(e,t="maxAge"){let r,n,o,i=async()=>{if(r!==void 0)return;let A=async c=>{o=F8();let l=c[1][t]-Date.now();if(l<=0){e.delete(c[0]),o.resolve();return}return r=c[0],n=setTimeout(()=>{e.delete(c[0]),o&&o.resolve()},l),typeof n.unref=="function"&&n.unref(),o.promise};try{for(let c of e)await A(c)}catch{}r=void 0},s=()=>{r=void 0,n!==void 0&&(clearTimeout(n),n=void 0),o!==void 0&&(o.reject(void 0),o=void 0)},a=e.set.bind(e);return e.set=(A,c)=>{e.has(A)&&e.delete(A);let l=a(A,c);return r&&r===A&&s(),i(),l},i(),e}xS.exports=v8});var gf=Q((wle,DS)=>{"use strict";var R8=_S(),lf=class{constructor(t,r){if(this.maxAge=t,this[Symbol.toStringTag]="Map",this.data=new Map,R8(this.data),r)for(let[n,o]of r)this.set(n,o)}get size(){return this.data.size}clear(){this.data.clear()}delete(t){return this.data.delete(t)}has(t){return this.data.has(t)}get(t){let r=this.data.get(t);if(r)return r.data}set(t,r){return this.data.set(t,{maxAge:Date.now()+this.maxAge,data:r}),this}values(){return this.createIterator(t=>t[1].data)}keys(){return this.data.keys()}entries(){return this.createIterator(t=>[t[0],t[1].data])}forEach(t,r){for(let[n,o]of this.entries())t.apply(r,[o,n,this])}[Symbol.iterator](){return this.entries()}*createIterator(t){for(let r of this.data.entries())yield t(r)}};DS.exports=lf});var fc=Q(nn=>{"use strict";var Jx=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",az=Jx+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",zx="["+Jx+"]["+az+"]*",Az=new RegExp("^"+zx+"$"),cz=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let i=n.length;for(let s=0;s<i;s++)o.push(n[s]);r.push(o),n=t.exec(e)}return r},lz=function(e){let t=Az.exec(e);return!(t===null||typeof t>"u")};nn.isExist=function(e){return typeof e<"u"};nn.isEmptyObject=function(e){return Object.keys(e).length===0};nn.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let i=0;i<o;i++)r==="strict"?e[n[i]]=[t[n[i]]]:e[n[i]]=t[n[i]]}};nn.getValue=function(e){return nn.isExist(e)?e:""};nn.isName=lz;nn.getAllMatches=cz;nn.nameRegexp=zx});var du=Q(Xx=>{"use strict";var gu=fc(),gz={allowBooleanAttributes:!1,unpairedTags:[]};Xx.validate=function(e,t){t=Object.assign({},gz,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=Yx(e,i),i.err)return i}else if(e[i]==="<"){let s=i;if(i++,e[i]==="!"){i=Wx(e,i);continue}else{let a=!1;e[i]==="/"&&(a=!0,i++);let A="";for(;i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)A+=e[i];if(A=A.trim(),A[A.length-1]==="/"&&(A=A.substring(0,A.length-1),i--),!Cz(A)){let g;return A.trim().length===0?g="Invalid space after '<'.":g="Tag '"+A+"' is an invalid name.",Fe("InvalidTag",g,Ct(e,i))}let c=uz(e,i);if(c===!1)return Fe("InvalidAttr","Attributes for '"+A+"' have open quote.",Ct(e,i));let l=c.value;if(i=c.index,l[l.length-1]==="/"){let g=i-l.length;l=l.substring(0,l.length-1);let d=jx(l,t);if(d===!0)n=!0;else return Fe(d.err.code,d.err.msg,Ct(e,g+d.err.line))}else if(a)if(c.tagClosed){if(l.trim().length>0)return Fe("InvalidTag","Closing tag '"+A+"' can't have attributes or invalid starting.",Ct(e,s));if(r.length===0)return Fe("InvalidTag","Closing tag '"+A+"' has not been opened.",Ct(e,s));{let g=r.pop();if(A!==g.tagName){let d=Ct(e,g.tagStartPos);return Fe("InvalidTag","Expected closing tag '"+g.tagName+"' (opened in line "+d.line+", col "+d.col+") instead of closing tag '"+A+"'.",Ct(e,s))}r.length==0&&(o=!0)}}else return Fe("InvalidTag","Closing tag '"+A+"' doesn't have proper closing.",Ct(e,i));else{let g=jx(l,t);if(g!==!0)return Fe(g.err.code,g.err.msg,Ct(e,i-l.length+g.err.line));if(o===!0)return Fe("InvalidXml","Multiple possible root nodes found.",Ct(e,i));t.unpairedTags.indexOf(A)!==-1||r.push({tagName:A,tagStartPos:s}),n=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=Wx(e,i);continue}else if(e[i+1]==="?"){if(i=Yx(e,++i),i.err)return i}else break;else if(e[i]==="&"){let g=mz(e,i);if(g==-1)return Fe("InvalidChar","char '&' is not expected.",Ct(e,i));i=g}else if(o===!0&&!Vx(e[i]))return Fe("InvalidXml","Extra text at the end",Ct(e,i));e[i]==="<"&&i--}}else{if(Vx(e[i]))continue;return Fe("InvalidChar","char '"+e[i]+"' is not expected.",Ct(e,i))}if(n){if(r.length==1)return Fe("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Ct(e,r[0].tagStartPos));if(r.length>0)return Fe("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Fe("InvalidXml","Start tag expected.",1);return!0};function Vx(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Yx(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return Fe("InvalidXml","XML declaration allowed only at the start of the document.",Ct(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Wx(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var dz='"',fz="'";function uz(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===dz||e[t]===fz)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var Iz=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function jx(e,t){let r=gu.getAllMatches(e,Iz),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return Fe("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",vs(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return Fe("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",vs(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return Fe("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",vs(r[o]));let i=r[o][2];if(!hz(i))return Fe("InvalidAttr","Attribute '"+i+"' is an invalid name.",vs(r[o]));if(!n.hasOwnProperty(i))n[i]=1;else return Fe("InvalidAttr","Attribute '"+i+"' is repeated.",vs(r[o]))}return!0}function pz(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function mz(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,pz(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Fe(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function hz(e){return gu.isName(e)}function Cz(e){return gu.isName(e)}function Ct(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function vs(e){return e.startIndex+e[1].length}});var $x=Q(fu=>{var Zx={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},Bz=function(e){return Object.assign({},Zx,e)};fu.buildOptions=Bz;fu.defaultOptions=Zx});var t0=Q(($ye,e0)=>{"use strict";var uu=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};e0.exports=uu});var n0=Q((eQe,r0)=>{var Ez=fc();function yz(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,i=!1,s="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(o&&Sz(e,t))t+=7,[entityName,val,t]=Qz(e,t+1),val.indexOf("&")===-1&&(r[Dz(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&bz(e,t))t+=8;else if(o&&xz(e,t))t+=8;else if(o&&_z(e,t))t+=9;else if(wz)i=!0;else throw new Error("Invalid DOCTYPE");n++,s=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:s+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function Qz(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function wz(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Sz(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function bz(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function xz(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function _z(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function Dz(e){if(Ez.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}r0.exports=yz});var i0=Q((tQe,o0)=>{var kz=/^[-+]?0x[a-fA-F0-9]+$/,Fz=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,vz={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Rz(e,t={}){if(t=Object.assign({},vz,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(e==="0")return 0;if(t.hex&&kz.test(r))return Nz(r,16);if(r.search(/[eE]/)!==-1){let n=r.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(n){if(t.leadingZeros)r=(n[1]||"")+n[3];else if(!(n[2]==="0"&&n[3][0]==="."))return e;return t.eNotation?Number(r):e}else return e}else{let n=Fz.exec(r);if(n){let o=n[1],i=n[2],s=Tz(n[3]);if(!t.leadingZeros&&i.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&i.length>0&&!o&&r[1]!==".")return e;if(t.leadingZeros&&i===e)return 0;{let a=Number(r),A=""+a;return A.search(/[eE]/)!==-1?t.eNotation?a:e:r.indexOf(".")!==-1?A==="0"&&s===""||A===s||o&&A==="-"+s?a:e:i?s===A||o+s===A?a:e:r===A||r===o+A?a:e}}else return e}}function Tz(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}function Nz(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}o0.exports=Rz});var A0=Q((rQe,a0)=>{"use strict";var s0=fc(),Rs=t0(),Mz=n0(),Uz=i0(),Iu=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=Pz,this.parseXml=Lz,this.parseTextData=Oz,this.resolveNameSpace=Gz,this.buildAttributesMap=Hz,this.isItStopNode=Vz,this.replaceEntitiesValue=Jz,this.readStopNodeData=Wz,this.saveTextToParentTag=zz,this.addChild=Kz}};function Pz(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function Oz(e,t,r,n,o,i,s){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){s||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,i);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?mu(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?mu(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Gz(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var qz=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Hz(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=s0.getAllMatches(e,qz),o=n.length,i={};for(let s=0;s<o;s++){let a=this.resolveNameSpace(n[s][1]),A=n[s][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),A!==void 0){this.options.trimValues&&(A=A.trim()),A=this.replaceEntitiesValue(A);let l=this.options.attributeValueProcessor(a,A,t);l==null?i[c]=A:typeof l!=typeof A||l!==A?i[c]=l:i[c]=mu(A,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[c]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=i,s}return i}}var Lz=function(e){e=e.replace(/\r\n?/g,`
`);let t=new Rs("!xml"),r=t,n="",o="";for(let i=0;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="/"){let a=Co(e,">",i,"Closing Tag is not closed."),A=e.substring(i+2,a).trim();if(this.options.removeNSPrefix){let g=A.indexOf(":");g!==-1&&(A=A.substr(g+1))}this.options.transformTagName&&(A=this.options.transformTagName(A)),r&&(n=this.saveTextToParentTag(n,r,o));let c=o.substring(o.lastIndexOf(".")+1);if(A&&this.options.unpairedTags.indexOf(A)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${A}>`);let l=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",i=a}else if(e[i+1]==="?"){let a=pu(e,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let A=new Rs(a.tagName);A.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(A[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,A,o)}i=a.closeIndex+1}else if(e.substr(i+1,3)==="!--"){let a=Co(e,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){let A=e.substring(i+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:A}])}i=a}else if(e.substr(i+1,2)==="!D"){let a=Mz(e,i);this.docTypeEntities=a.entities,i=a.i}else if(e.substr(i+1,2)==="!["){let a=Co(e,"]]>",i,"CDATA is not closed.")-2,A=e.substring(i+9,a);n=this.saveTextToParentTag(n,r,o);let c=this.parseTextData(A,r.tagname,o,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:A}]):r.add(this.options.textNodeName,c),i=a+2}else{let a=pu(e,i,this.options.removeNSPrefix),A=a.tagName,c=a.rawTagName,l=a.tagExp,g=a.attrExpPresent,d=a.closeIndex;this.options.transformTagName&&(A=this.options.transformTagName(A)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let f=r;if(f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),A!==t.tagname&&(o+=o?"."+A:A),this.isItStopNode(this.options.stopNodes,o,A)){let u="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),l=A):l=l.substr(0,l.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(A)!==-1)i=a.closeIndex;else{let C=this.readStopNodeData(e,c,d+1);if(!C)throw new Error(`Unexpected end of ${c}`);i=C.i,u=C.tagContent}let m=new Rs(A);A!==l&&g&&(m[":@"]=this.buildAttributesMap(l,o,A)),u&&(u=this.parseTextData(u,A,o,!0,g,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),m.add(this.options.textNodeName,u),this.addChild(r,m,o)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){A[A.length-1]==="/"?(A=A.substr(0,A.length-1),o=o.substr(0,o.length-1),l=A):l=l.substr(0,l.length-1),this.options.transformTagName&&(A=this.options.transformTagName(A));let u=new Rs(A);A!==l&&g&&(u[":@"]=this.buildAttributesMap(l,o,A)),this.addChild(r,u,o),o=o.substr(0,o.lastIndexOf("."))}else{let u=new Rs(A);this.tagsNodeStack.push(r),A!==l&&g&&(u[":@"]=this.buildAttributesMap(l,o,A)),this.addChild(r,u,o),r=u}n="",i=d}}else n+=e[i];return t.child};function Kz(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var Jz=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function zz(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Vz(e,t,r){let n="*."+r;for(let o in e){let i=e[o];if(n===i||t===i)return!0}return!1}function Yz(e,t,r=">"){let n,o="";for(let i=t;i<e.length;i++){let s=e[i];if(n)s===n&&(n="");else if(s==='"'||s==="'")n=s;else if(s===r[0])if(r[1]){if(e[i+1]===r[1])return{data:o,index:i}}else return{data:o,index:i};else s==="	"&&(s=" ");o+=s}}function Co(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function pu(e,t,r,n=">"){let o=Yz(e,t+1,n);if(!o)return;let i=o.data,s=o.index,a=i.search(/\s/),A=i,c=!0;a!==-1&&(A=i.substring(0,a),i=i.substring(a+1).trimStart());let l=A;if(r){let g=A.indexOf(":");g!==-1&&(A=A.substr(g+1),c=A!==o.data.substr(g+1))}return{tagName:A,tagExp:i,closeIndex:s,attrExpPresent:c,rawTagName:l}}function Wz(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let i=Co(e,">",r,`${t} is not closed`);if(e.substring(r+2,i).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i};r=i}else if(e[r+1]==="?")r=Co(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Co(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Co(e,"]]>",r,"StopNode is not closed.")-2;else{let i=pu(e,r,">");i&&((i&&i.tagName)===t&&i.tagExp[i.tagExp.length-1]!=="/"&&o++,r=i.closeIndex)}}function mu(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:Uz(e,r)}else return s0.isExist(e)?e:""}a0.exports=Iu});var g0=Q(l0=>{"use strict";function jz(e,t){return c0(e,t)}function c0(e,t,r){let n,o={};for(let i=0;i<e.length;i++){let s=e[i],a=Xz(s),A="";if(r===void 0?A=a:A=r+"."+a,a===t.textNodeName)n===void 0?n=s[a]:n+=""+s[a];else{if(a===void 0)continue;if(s[a]){let c=c0(s[a],t,A),l=$z(c,t);s[":@"]?Zz(c,s[":@"],A,t):Object.keys(c).length===1&&c[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?c=c[t.textNodeName]:Object.keys(c).length===0&&(t.alwaysCreateTextNode?c[t.textNodeName]="":c=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(c)):t.isArray(a,A,l)?o[a]=[c]:o[a]=c}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function Xz(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Zz(e,t,r,n){if(t){let o=Object.keys(t),i=o.length;for(let s=0;s<i;s++){let a=o[s];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function $z(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}l0.prettify=jz});var f0=Q((oQe,d0)=>{var{buildOptions:eV}=$x(),tV=A0(),{prettify:rV}=g0(),nV=du(),hu=class{constructor(t){this.externalEntities={},this.options=eV(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let i=nV.validate(t,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}let n=new tV(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:rV(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};d0.exports=hu});var h0=Q((iQe,m0)=>{function oV(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=`
`),I0(e,t,"",r)}function I0(e,t,r,n){let o="",i=!1;for(let s=0;s<e.length;s++){let a=e[s],A=iV(a);if(A===void 0)continue;let c="";if(r.length===0?c=A:c=`${r}.${A}`,A===t.textNodeName){let u=a[A];sV(c,t)||(u=t.tagValueProcessor(A,u),u=p0(u,t)),i&&(o+=n),o+=u,i=!1;continue}else if(A===t.cdataPropName){i&&(o+=n),o+=`<![CDATA[${a[A][0][t.textNodeName]}]]>`,i=!1;continue}else if(A===t.commentPropName){o+=n+`<!--${a[A][0][t.textNodeName]}-->`,i=!0;continue}else if(A[0]==="?"){let u=u0(a[":@"],t),m=A==="?xml"?"":n,C=a[A][0][t.textNodeName];C=C.length!==0?" "+C:"",o+=m+`<${A}${C}${u}?>`,i=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let g=u0(a[":@"],t),d=n+`<${A}${g}`,f=I0(a[A],t,c,l);t.unpairedTags.indexOf(A)!==-1?t.suppressUnpairedNode?o+=d+">":o+=d+"/>":(!f||f.length===0)&&t.suppressEmptyNode?o+=d+"/>":f&&f.endsWith(">")?o+=d+`>${f}${n}</${A}>`:(o+=d+">",f&&n!==""&&(f.includes("/>")||f.includes("</"))?o+=n+t.indentBy+f+n:o+=f,o+=`</${A}>`),i=!0}return o}function iV(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(e.hasOwnProperty(n)&&n!==":@")return n}}function u0(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){if(!e.hasOwnProperty(n))continue;let o=t.attributeValueProcessor(n,e[n]);o=p0(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function sV(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function p0(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}m0.exports=oV});var B0=Q((sQe,C0)=>{"use strict";var aV=h0(),AV={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Gn(e){this.options=Object.assign({},AV,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=gV),this.processTextOrObjNode=cV,this.options.format?(this.indentate=lV,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Gn.prototype.build=function(e){return this.options.preserveOrder?aV(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Gn.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o))if(typeof e[o]>"u")this.isAttribute(o)&&(n+="");else if(e[o]===null)this.isAttribute(o)?n+="":o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let i=this.isAttribute(o);if(i)r+=this.buildAttrPairStr(i,""+e[o]);else if(o===this.options.textNodeName){let s=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(s)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let i=e[o].length,s="",a="";for(let A=0;A<i;A++){let c=e[o][A];if(!(typeof c>"u"))if(c===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(typeof c=="object")if(this.options.oneListGroup){let l=this.j2x(c,t+1);s+=l.val,this.options.attributesGroupName&&c.hasOwnProperty(this.options.attributesGroupName)&&(a+=l.attrStr)}else s+=this.processTextOrObjNode(c,o,t);else if(this.options.oneListGroup){let l=this.options.tagValueProcessor(o,c);l=this.replaceEntitiesValue(l),s+=l}else s+=this.buildTextValNode(c,o,"",t)}this.options.oneListGroup&&(s=this.buildObjectNode(s,o,a,t)),n+=s}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let i=Object.keys(e[o]),s=i.length;for(let a=0;a<s;a++)r+=this.buildAttrPairStr(i[a],""+e[o][i[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};Gn.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function cV(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Gn.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,i="";return t[0]==="?"&&(i="?",o=""),(r||r==="")&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+i+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+i+this.tagEndChar+e+this.indentate(n)+o}};Gn.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Gn.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};Gn.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function lV(e){return this.options.indentBy.repeat(e)}function gV(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}C0.exports=Gn});var y0=Q((aQe,E0)=>{"use strict";var dV=du(),fV=f0(),uV=B0();E0.exports={XMLParser:fV,XMLValidator:dV,XMLBuilder:uV}});var MI=Q((Xs,NI)=>{(function(e,t){typeof Xs=="object"&&typeof NI=="object"?NI.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Xs=="object"?Xs.bowser=t():e.bowser=t()})(Xs,(function(){return(function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(n,o,i){r.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:i})},r.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,o){if(1&o&&(n=r(n)),8&o||4&o&&typeof n=="object"&&n&&n.__esModule)return n;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&o&&typeof n!="string")for(var s in n)r.d(i,s,function(a){return n[a]}.bind(null,s));return i},r.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(o,"a",o),o},r.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},r.p="",r(r.s=90)})({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),o=(function(){function i(){}return i.getFirstMatch=function(s,a){var A=a.match(s);return A&&A.length>0&&A[1]||""},i.getSecondMatch=function(s,a){var A=a.match(s);return A&&A.length>1&&A[2]||""},i.matchAndReturnConst=function(s,a,A){if(s.test(a))return A},i.getWindowsVersionName=function(s){switch(s){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},i.getMacOSVersionName=function(s){var a=s.split(".").splice(0,2).map((function(A){return parseInt(A,10)||0}));if(a.push(0),a[0]===10)switch(a[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},i.getAndroidVersionName=function(s){var a=s.split(".").splice(0,2).map((function(A){return parseInt(A,10)||0}));if(a.push(0),!(a[0]===1&&a[1]<5))return a[0]===1&&a[1]<6?"Cupcake":a[0]===1&&a[1]>=6?"Donut":a[0]===2&&a[1]<2?"Eclair":a[0]===2&&a[1]===2?"Froyo":a[0]===2&&a[1]>2?"Gingerbread":a[0]===3?"Honeycomb":a[0]===4&&a[1]<1?"Ice Cream Sandwich":a[0]===4&&a[1]<4?"Jelly Bean":a[0]===4&&a[1]>=4?"KitKat":a[0]===5?"Lollipop":a[0]===6?"Marshmallow":a[0]===7?"Nougat":a[0]===8?"Oreo":a[0]===9?"Pie":void 0},i.getVersionPrecision=function(s){return s.split(".").length},i.compareVersions=function(s,a,A){A===void 0&&(A=!1);var c=i.getVersionPrecision(s),l=i.getVersionPrecision(a),g=Math.max(c,l),d=0,f=i.map([s,a],(function(u){var m=g-i.getVersionPrecision(u),C=u+new Array(m+1).join(".0");return i.map(C.split("."),(function(p){return new Array(20-p.length).join("0")+p})).reverse()}));for(A&&(d=g-Math.min(c,l)),g-=1;g>=d;){if(f[0][g]>f[1][g])return 1;if(f[0][g]===f[1][g]){if(g===d)return 0;g-=1}else if(f[0][g]<f[1][g])return-1}},i.map=function(s,a){var A,c=[];if(Array.prototype.map)return Array.prototype.map.call(s,a);for(A=0;A<s.length;A+=1)c.push(a(s[A]));return c},i.find=function(s,a){var A,c;if(Array.prototype.find)return Array.prototype.find.call(s,a);for(A=0,c=s.length;A<c;A+=1){var l=s[A];if(a(l,A))return l}},i.assign=function(s){for(var a,A,c=s,l=arguments.length,g=new Array(l>1?l-1:0),d=1;d<l;d++)g[d-1]=arguments[d];if(Object.assign)return Object.assign.apply(Object,[s].concat(g));var f=function(){var u=g[a];typeof u=="object"&&u!==null&&Object.keys(u).forEach((function(m){c[m]=u[m]}))};for(a=0,A=g.length;a<A;a+=1)f();return s},i.getBrowserAlias=function(s){return n.BROWSER_ALIASES_MAP[s]},i.getBrowserTypeByAlias=function(s){return n.BROWSER_MAP[s]||""},i})();t.default=o,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(91))&&n.__esModule?n:{default:n},i=r(18);function s(A,c){for(var l=0;l<c.length;l++){var g=c[l];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(A,g.key,g)}}var a=(function(){function A(){}var c,l,g;return A.getParser=function(d,f){if(f===void 0&&(f=!1),typeof d!="string")throw new Error("UserAgent should be a string");return new o.default(d,f)},A.parse=function(d){return new o.default(d).getResult()},c=A,g=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(l=null)&&s(c.prototype,l),g&&s(c,g),A})();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=A(r(92)),o=A(r(93)),i=A(r(94)),s=A(r(95)),a=A(r(17));function A(l){return l&&l.__esModule?l:{default:l}}var c=(function(){function l(d,f){if(f===void 0&&(f=!1),d==null||d==="")throw new Error("UserAgent parameter can't be empty");this._ua=d,this.parsedResult={},f!==!0&&this.parse()}var g=l.prototype;return g.getUA=function(){return this._ua},g.test=function(d){return d.test(this._ua)},g.parseBrowser=function(){var d=this;this.parsedResult.browser={};var f=a.default.find(n.default,(function(u){if(typeof u.test=="function")return u.test(d);if(u.test instanceof Array)return u.test.some((function(m){return d.test(m)}));throw new Error("Browser's test function is not valid")}));return f&&(this.parsedResult.browser=f.describe(this.getUA())),this.parsedResult.browser},g.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},g.getBrowserName=function(d){return d?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},g.getBrowserVersion=function(){return this.getBrowser().version},g.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},g.parseOS=function(){var d=this;this.parsedResult.os={};var f=a.default.find(o.default,(function(u){if(typeof u.test=="function")return u.test(d);if(u.test instanceof Array)return u.test.some((function(m){return d.test(m)}));throw new Error("Browser's test function is not valid")}));return f&&(this.parsedResult.os=f.describe(this.getUA())),this.parsedResult.os},g.getOSName=function(d){var f=this.getOS().name;return d?String(f).toLowerCase()||"":f||""},g.getOSVersion=function(){return this.getOS().version},g.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},g.getPlatformType=function(d){d===void 0&&(d=!1);var f=this.getPlatform().type;return d?String(f).toLowerCase()||"":f||""},g.parsePlatform=function(){var d=this;this.parsedResult.platform={};var f=a.default.find(i.default,(function(u){if(typeof u.test=="function")return u.test(d);if(u.test instanceof Array)return u.test.some((function(m){return d.test(m)}));throw new Error("Browser's test function is not valid")}));return f&&(this.parsedResult.platform=f.describe(this.getUA())),this.parsedResult.platform},g.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},g.getEngineName=function(d){return d?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},g.parseEngine=function(){var d=this;this.parsedResult.engine={};var f=a.default.find(s.default,(function(u){if(typeof u.test=="function")return u.test(d);if(u.test instanceof Array)return u.test.some((function(m){return d.test(m)}));throw new Error("Browser's test function is not valid")}));return f&&(this.parsedResult.engine=f.describe(this.getUA())),this.parsedResult.engine},g.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},g.getResult=function(){return a.default.assign({},this.parsedResult)},g.satisfies=function(d){var f=this,u={},m=0,C={},p=0;if(Object.keys(d).forEach((function(U){var V=d[U];typeof V=="string"?(C[U]=V,p+=1):typeof V=="object"&&(u[U]=V,m+=1)})),m>0){var w=Object.keys(u),F=a.default.find(w,(function(U){return f.isOS(U)}));if(F){var E=this.satisfies(u[F]);if(E!==void 0)return E}var b=a.default.find(w,(function(U){return f.isPlatform(U)}));if(b){var B=this.satisfies(u[b]);if(B!==void 0)return B}}if(p>0){var y=Object.keys(C),v=a.default.find(y,(function(U){return f.isBrowser(U,!0)}));if(v!==void 0)return this.compareVersion(C[v])}},g.isBrowser=function(d,f){f===void 0&&(f=!1);var u=this.getBrowserName().toLowerCase(),m=d.toLowerCase(),C=a.default.getBrowserTypeByAlias(m);return f&&C&&(m=C.toLowerCase()),m===u},g.compareVersion=function(d){var f=[0],u=d,m=!1,C=this.getBrowserVersion();if(typeof C=="string")return d[0]===">"||d[0]==="<"?(u=d.substr(1),d[1]==="="?(m=!0,u=d.substr(2)):f=[],d[0]===">"?f.push(1):f.push(-1)):d[0]==="="?u=d.substr(1):d[0]==="~"&&(m=!0,u=d.substr(1)),f.indexOf(a.default.compareVersions(C,u,m))>-1},g.isOS=function(d){return this.getOSName(!0)===String(d).toLowerCase()},g.isPlatform=function(d){return this.getPlatformType(!0)===String(d).toLowerCase()},g.isEngine=function(d){return this.getEngineName(!0)===String(d).toLowerCase()},g.is=function(d,f){return f===void 0&&(f=!1),this.isBrowser(d,f)||this.isOS(d)||this.isPlatform(d)},g.some=function(d){var f=this;return d===void 0&&(d=[]),d.some((function(u){return f.is(u)}))},l})();t.default=c,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(a){var A={name:"Googlebot"},c=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/opera/i],describe:function(a){var A={name:"Opera"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/opr\/|opios/i],describe:function(a){var A={name:"Opera"},c=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/SamsungBrowser/i],describe:function(a){var A={name:"Samsung Internet for Android"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/Whale/i],describe:function(a){var A={name:"NAVER Whale Browser"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/MZBrowser/i],describe:function(a){var A={name:"MZ Browser"},c=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/focus/i],describe:function(a){var A={name:"Focus"},c=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/swing/i],describe:function(a){var A={name:"Swing"},c=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/coast/i],describe:function(a){var A={name:"Opera Coast"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(a){var A={name:"Opera Touch"},c=o.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/yabrowser/i],describe:function(a){var A={name:"Yandex Browser"},c=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/ucbrowser/i],describe:function(a){var A={name:"UC Browser"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/Maxthon|mxios/i],describe:function(a){var A={name:"Maxthon"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/epiphany/i],describe:function(a){var A={name:"Epiphany"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/puffin/i],describe:function(a){var A={name:"Puffin"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/sleipnir/i],describe:function(a){var A={name:"Sleipnir"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/k-meleon/i],describe:function(a){var A={name:"K-Meleon"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/micromessenger/i],describe:function(a){var A={name:"WeChat"},c=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/qqbrowser/i],describe:function(a){var A={name:/qqbrowserlite/i.test(a)?"QQ Browser Lite":"QQ Browser"},c=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/msie|trident/i],describe:function(a){var A={name:"Internet Explorer"},c=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/\sedg\//i],describe:function(a){var A={name:"Microsoft Edge"},c=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/edg([ea]|ios)/i],describe:function(a){var A={name:"Microsoft Edge"},c=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/vivaldi/i],describe:function(a){var A={name:"Vivaldi"},c=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/seamonkey/i],describe:function(a){var A={name:"SeaMonkey"},c=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/sailfish/i],describe:function(a){var A={name:"Sailfish"},c=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,a);return c&&(A.version=c),A}},{test:[/silk/i],describe:function(a){var A={name:"Amazon Silk"},c=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/phantom/i],describe:function(a){var A={name:"PhantomJS"},c=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/slimerjs/i],describe:function(a){var A={name:"SlimerJS"},c=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var A={name:"BlackBerry"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var A={name:"WebOS Browser"},c=o.default.getFirstMatch(i,a)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/bada/i],describe:function(a){var A={name:"Bada"},c=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/tizen/i],describe:function(a){var A={name:"Tizen"},c=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/qupzilla/i],describe:function(a){var A={name:"QupZilla"},c=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/firefox|iceweasel|fxios/i],describe:function(a){var A={name:"Firefox"},c=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/electron/i],describe:function(a){var A={name:"Electron"},c=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/MiuiBrowser/i],describe:function(a){var A={name:"Miui"},c=o.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/chromium/i],describe:function(a){var A={name:"Chromium"},c=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,a)||o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/chrome|crios|crmo/i],describe:function(a){var A={name:"Chrome"},c=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/GSA/i],describe:function(a){var A={name:"Google Search"},c=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:function(a){var A=!a.test(/like android/i),c=a.test(/android/i);return A&&c},describe:function(a){var A={name:"Android Browser"},c=o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/playstation 4/i],describe:function(a){var A={name:"PlayStation 4"},c=o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/safari|applewebkit/i],describe:function(a){var A={name:"Safari"},c=o.default.getFirstMatch(i,a);return c&&(A.version=c),A}},{test:[/.*/i],describe:function(a){var A=a.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(A,a),version:o.default.getSecondMatch(A,a)}}}];t.default=s,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/Roku\/DVP/],describe:function(a){var A=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,a);return{name:i.OS_MAP.Roku,version:A}}},{test:[/windows phone/i],describe:function(a){var A=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.WindowsPhone,version:A}}},{test:[/windows /i],describe:function(a){var A=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,a),c=o.default.getWindowsVersionName(A);return{name:i.OS_MAP.Windows,version:A,versionName:c}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(a){var A={name:i.OS_MAP.iOS},c=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,a);return c&&(A.version=c),A}},{test:[/macintosh/i],describe:function(a){var A=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,a).replace(/[_\s]/g,"."),c=o.default.getMacOSVersionName(A),l={name:i.OS_MAP.MacOS,version:A};return c&&(l.versionName=c),l}},{test:[/(ipod|iphone|ipad)/i],describe:function(a){var A=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,a).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:A}}},{test:function(a){var A=!a.test(/like android/i),c=a.test(/android/i);return A&&c},describe:function(a){var A=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,a),c=o.default.getAndroidVersionName(A),l={name:i.OS_MAP.Android,version:A};return c&&(l.versionName=c),l}},{test:[/(web|hpw)[o0]s/i],describe:function(a){var A=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,a),c={name:i.OS_MAP.WebOS};return A&&A.length&&(c.version=A),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(a){var A=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,a)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,a)||o.default.getFirstMatch(/\bbb(\d+)/i,a);return{name:i.OS_MAP.BlackBerry,version:A}}},{test:[/bada/i],describe:function(a){var A=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Bada,version:A}}},{test:[/tizen/i],describe:function(a){var A=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.Tizen,version:A}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(a){var A=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,a);return{name:i.OS_MAP.PlayStation4,version:A}}}];t.default=s,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(a){var A=o.default.getFirstMatch(/(can-l01)/i,a)&&"Nova",c={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return A&&(c.model=A),c}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){var A=a.test(/ipod|iphone/i),c=a.test(/like (ipod|iphone)/i);return A&&!c},describe:function(a){var A=o.default.getFirstMatch(/(ipod|iphone)/i,a);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:A}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName(!0)==="blackberry"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(a){return a.getBrowserName(!0)==="bada"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getBrowserName()==="windows phone"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(a){var A=Number(String(a.getOSVersion()).split(".")[0]);return a.getOSName(!0)==="android"&&A>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(a){return a.getOSName(!0)==="android"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(a){return a.getOSName(!0)==="macos"},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(a){return a.getOSName(!0)==="windows"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="linux"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(a){return a.getOSName(!0)==="playstation 4"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(a){return a.getOSName(!0)==="roku"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:function(a){return a.getBrowserName(!0)==="microsoft edge"},describe:function(a){if(/\sedg\//i.test(a))return{name:i.ENGINE_MAP.Blink};var A=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,a);return{name:i.ENGINE_MAP.EdgeHTML,version:A}}},{test:[/trident/i],describe:function(a){var A={name:i.ENGINE_MAP.Trident},c=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:function(a){return a.test(/presto/i)},describe:function(a){var A={name:i.ENGINE_MAP.Presto},c=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:function(a){var A=a.test(/gecko/i),c=a.test(/like gecko/i);return A&&!c},describe:function(a){var A={name:i.ENGINE_MAP.Gecko},c=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(a){var A={name:i.ENGINE_MAP.WebKit},c=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,a);return c&&(A.version=c),A}}];t.default=s,e.exports=t.default}})}))});var t9=W(Oh(),1),r9=W(Hh(),1),n9=W(Vh(),1),o9=W(jh(),1),i9=W($h(),1),s9=W(fC(),1),a9=W(uC(),1),A9=W(RB(),1),c9=W(OB(),1),l9=W(qB(),1),g9=W(UE(),1),PE=AbortSignal.any||function(t){let r=new AbortController;if(t.length===0)return r.signal;let n=t.find(i=>i.aborted);if(n)return r.abort(n.reason),r.signal;let o=function(){r.abort(this.reason)};for(let i of t)i.addEventListener("abort",o,{once:!0,signal:r.signal});return r.signal},OE=AbortSignal.timeout||function(t){let r=new AbortController;return setTimeout(()=>{r.abort(new DOMException("Timeout","TimeoutError"))},t),r.signal};var XG=[Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,AggregateError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),GE=new Map(XG);var fd=class e extends Error{name="NonError";constructor(t){super(e._prepareSuperMessage(t))}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch{return String(t)}}},ZG=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1},{property:"errors",enumerable:!1}],ud=new WeakSet,$G=e=>{ud.add(e);let t=e.toJSON();return ud.delete(e),t},HE=e=>{let t=GE.get(e)??Error;return t===AggregateError?new t([]):new t},Id=({from:e,seen:t,to:r,forceEnumerable:n,maxDepth:o,depth:i,useToJSON:s,serialize:a})=>{if(r||(Array.isArray(e)?r=[]:!a&&qE(e)?r=HE(e.name):r={}),t.push(e),i>=o)return r;if(s&&typeof e.toJSON=="function"&&!ud.has(e))return $G(e);let A=c=>Id({from:c,seen:[...t],forceEnumerable:n,maxDepth:o,depth:i,useToJSON:s,serialize:a});for(let[c,l]of Object.entries(e)){if(l&&l instanceof Uint8Array&&l.constructor.name==="Buffer"){r[c]="[object Buffer]";continue}if(l!==null&&typeof l=="object"&&typeof l.pipe=="function"){r[c]="[object Stream]";continue}if(typeof l!="function"){if(!l||typeof l!="object"){try{r[c]=l}catch{}continue}if(!t.includes(e[c])){i++,r[c]=A(e[c]);continue}r[c]="[Circular]"}}if(a||r instanceof Error)for(let{property:c,enumerable:l}of ZG)e[c]!==void 0&&e[c]!==null&&Object.defineProperty(r,c,{value:qE(e[c])||Array.isArray(e[c])?A(e[c]):e[c],enumerable:n?!0:l,configurable:!0,writable:!0});return r};function $n(e,t={}){let{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:n=!0}=t;return typeof e=="object"&&e!==null?Id({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:n,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function LE(e,t={}){let{maxDepth:r=Number.POSITIVE_INFINITY}=t;return e instanceof Error?e:eq(e)?Id({from:e,seen:[],to:HE(e.name),maxDepth:r,depth:0,serialize:!1}):new fd(e)}function qE(e){return!!e&&typeof e=="object"&&typeof e.name=="string"&&typeof e.message=="string"&&typeof e.stack=="string"}function eq(e){return!!e&&typeof e=="object"&&typeof e.message=="string"&&!Array.isArray(e)}var Rt=W(Ae(),1);var tq=typeof global=="object"&&global&&global.Object===Object&&global,Ka=tq;var rq=typeof self=="object"&&self&&self.Object===Object&&self,nq=Ka||rq||Function("return this")(),Se=nq;var oq=Se.Symbol,ht=oq;var JE=Object.prototype,iq=JE.hasOwnProperty,sq=JE.toString,ns=ht?ht.toStringTag:void 0;function aq(e){var t=iq.call(e,ns),r=e[ns];try{e[ns]=void 0;var n=!0}catch{}var o=sq.call(e);return n&&(t?e[ns]=r:delete e[ns]),o}var zE=aq;var Aq=Object.prototype,cq=Aq.toString;function lq(e){return cq.call(e)}var VE=lq;var gq="[object Null]",dq="[object Undefined]",YE=ht?ht.toStringTag:void 0;function fq(e){return e==null?e===void 0?dq:gq:YE&&YE in Object(e)?zE(e):VE(e)}var Nt=fq;function uq(e){return e!=null&&typeof e=="object"}var Le=uq;var Iq="[object Symbol]";function pq(e){return typeof e=="symbol"||Le(e)&&Nt(e)==Iq}var In=pq;function mq(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Ja=mq;var hq=Array.isArray,we=hq;var Cq=1/0,WE=ht?ht.prototype:void 0,jE=WE?WE.toString:void 0;function XE(e){if(typeof e=="string")return e;if(we(e))return Ja(e,XE)+"";if(In(e))return jE?jE.call(e):"";var t=e+"";return t=="0"&&1/e==-Cq?"-0":t}var ZE=XE;var Bq=/\s/;function Eq(e){for(var t=e.length;t--&&Bq.test(e.charAt(t)););return t}var $E=Eq;var yq=/^\s+/;function Qq(e){return e&&e.slice(0,$E(e)+1).replace(yq,"")}var ey=Qq;function wq(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var pe=wq;var ty=NaN,Sq=/^[-+]0x[0-9a-f]+$/i,bq=/^0b[01]+$/i,xq=/^0o[0-7]+$/i,_q=parseInt;function Dq(e){if(typeof e=="number")return e;if(In(e))return ty;if(pe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ey(e);var r=bq.test(e);return r||xq.test(e)?_q(e.slice(2),r?2:8):Sq.test(e)?ty:+e}var md=Dq;function kq(e){return e}var No=kq;var Fq="[object AsyncFunction]",vq="[object Function]",Rq="[object GeneratorFunction]",Tq="[object Proxy]";function Nq(e){if(!pe(e))return!1;var t=Nt(e);return t==vq||t==Rq||t==Fq||t==Tq}var Mo=Nq;var Mq=Se["__core-js_shared__"],za=Mq;var ry=(function(){var e=/[^.]+$/.exec(za&&za.keys&&za.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Uq(e){return!!ry&&ry in e}var ny=Uq;var Pq=Function.prototype,Oq=Pq.toString;function Gq(e){if(e!=null){try{return Oq.call(e)}catch{}try{return e+""}catch{}}return""}var Gr=Gq;var qq=/[\\^$.*+?()[\]{}|]/g,Hq=/^\[object .+?Constructor\]$/,Lq=Function.prototype,Kq=Object.prototype,Jq=Lq.toString,zq=Kq.hasOwnProperty,Vq=RegExp("^"+Jq.call(zq).replace(qq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yq(e){if(!pe(e)||ny(e))return!1;var t=Mo(e)?Vq:Hq;return t.test(Gr(e))}var oy=Yq;function Wq(e,t){return e?.[t]}var iy=Wq;function jq(e,t){var r=iy(e,t);return oy(r)?r:void 0}var St=jq;var Xq=St(Se,"WeakMap"),Va=Xq;var sy=Object.create,Zq=(function(){function e(){}return function(t){if(!pe(t))return{};if(sy)return sy(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})(),ay=Zq;function $q(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Ay=$q;function eH(){}var Mt=eH;function tH(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Ya=tH;var rH=800,nH=16,oH=Date.now;function iH(e){var t=0,r=0;return function(){var n=oH(),o=nH-(n-r);if(r=n,o>0){if(++t>=rH)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var cy=iH;function sH(e){return function(){return e}}var ly=sH;var aH=(function(){try{var e=St(Object,"defineProperty");return e({},"",{}),e}catch{}})(),Uo=aH;var AH=Uo?function(e,t){return Uo(e,"toString",{configurable:!0,enumerable:!1,value:ly(t),writable:!0})}:No,gy=AH;var cH=cy(gy),dy=cH;function lH(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var fy=lH;var gH=9007199254740991,dH=/^(?:0|[1-9]\d*)$/;function fH(e,t){var r=typeof e;return t=t??gH,!!t&&(r=="number"||r!="symbol"&&dH.test(e))&&e>-1&&e%1==0&&e<t}var pn=fH;function uH(e,t,r){t=="__proto__"&&Uo?Uo(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Po=uH;function IH(e,t){return e===t||e!==e&&t!==t}var Cr=IH;var pH=Object.prototype,mH=pH.hasOwnProperty;function hH(e,t,r){var n=e[t];(!(mH.call(e,t)&&Cr(n,r))||r===void 0&&!(t in e))&&Po(e,t,r)}var Oo=hH;function CH(e,t,r,n){var o=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var a=t[i],A=n?n(r[a],e[a],a,r,e):void 0;A===void 0&&(A=e[a]),o?Po(r,a,A):Oo(r,a,A)}return r}var Br=CH;var uy=Math.max;function BH(e,t,r){return t=uy(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=uy(n.length-t,0),s=Array(i);++o<i;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=r(s),Ay(e,this,a)}}var Iy=BH;function EH(e,t){return dy(Iy(e,t,No),e+"")}var py=EH;var yH=9007199254740991;function QH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yH}var Go=QH;function wH(e){return e!=null&&Go(e.length)&&!Mo(e)}var Er=wH;function SH(e,t,r){if(!pe(r))return!1;var n=typeof t;return(n=="number"?Er(r)&&pn(t,r.length):n=="string"&&t in r)?Cr(r[t],e):!1}var my=SH;function bH(e){return py(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(o--,i):void 0,s&&my(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var a=r[n];a&&e(t,a,n,i)}return t})}var hy=bH;var xH=Object.prototype;function _H(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||xH;return e===r}var mn=_H;function DH(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Cy=DH;var kH="[object Arguments]";function FH(e){return Le(e)&&Nt(e)==kH}var hd=FH;var By=Object.prototype,vH=By.hasOwnProperty,RH=By.propertyIsEnumerable,TH=hd((function(){return arguments})())?hd:function(e){return Le(e)&&vH.call(e,"callee")&&!RH.call(e,"callee")},qr=TH;function NH(){return!1}var Ey=NH;var wy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yy=wy&&typeof module=="object"&&module&&!module.nodeType&&module,MH=yy&&yy.exports===wy,Qy=MH?Se.Buffer:void 0,UH=Qy?Qy.isBuffer:void 0,PH=UH||Ey,rr=PH;var OH="[object Arguments]",GH="[object Array]",qH="[object Boolean]",HH="[object Date]",LH="[object Error]",KH="[object Function]",JH="[object Map]",zH="[object Number]",VH="[object Object]",YH="[object RegExp]",WH="[object Set]",jH="[object String]",XH="[object WeakMap]",ZH="[object ArrayBuffer]",$H="[object DataView]",eL="[object Float32Array]",tL="[object Float64Array]",rL="[object Int8Array]",nL="[object Int16Array]",oL="[object Int32Array]",iL="[object Uint8Array]",sL="[object Uint8ClampedArray]",aL="[object Uint16Array]",AL="[object Uint32Array]",ye={};ye[eL]=ye[tL]=ye[rL]=ye[nL]=ye[oL]=ye[iL]=ye[sL]=ye[aL]=ye[AL]=!0;ye[OH]=ye[GH]=ye[ZH]=ye[qH]=ye[$H]=ye[HH]=ye[LH]=ye[KH]=ye[JH]=ye[zH]=ye[VH]=ye[YH]=ye[WH]=ye[jH]=ye[XH]=!1;function cL(e){return Le(e)&&Go(e.length)&&!!ye[Nt(e)]}var Sy=cL;function lL(e){return function(t){return e(t)}}var qo=lL;var by=typeof exports=="object"&&exports&&!exports.nodeType&&exports,os=by&&typeof module=="object"&&module&&!module.nodeType&&module,gL=os&&os.exports===by,Cd=gL&&Ka.process,dL=(function(){try{var e=os&&os.require&&os.require("util").types;return e||Cd&&Cd.binding&&Cd.binding("util")}catch{}})(),Hr=dL;var xy=Hr&&Hr.isTypedArray,fL=xy?qo(xy):Sy,hn=fL;var uL=Object.prototype,IL=uL.hasOwnProperty;function pL(e,t){var r=we(e),n=!r&&qr(e),o=!r&&!n&&rr(e),i=!r&&!n&&!o&&hn(e),s=r||n||o||i,a=s?Cy(e.length,String):[],A=a.length;for(var c in e)(t||IL.call(e,c))&&!(s&&(c=="length"||o&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||pn(c,A)))&&a.push(c);return a}var Wa=pL;function mL(e,t){return function(r){return e(t(r))}}var ja=mL;var hL=ja(Object.keys,Object),_y=hL;var CL=Object.prototype,BL=CL.hasOwnProperty;function EL(e){if(!mn(e))return _y(e);var t=[];for(var r in Object(e))BL.call(e,r)&&r!="constructor"&&t.push(r);return t}var Xa=EL;function yL(e){return Er(e)?Wa(e):Xa(e)}var Cn=yL;function QL(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Dy=QL;var wL=Object.prototype,SL=wL.hasOwnProperty;function bL(e){if(!pe(e))return Dy(e);var t=mn(e),r=[];for(var n in e)n=="constructor"&&(t||!SL.call(e,n))||r.push(n);return r}var ky=bL;function xL(e){return Er(e)?Wa(e,!0):ky(e)}var yr=xL;var _L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,DL=/^\w*$/;function kL(e,t){if(we(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||In(e)?!0:DL.test(e)||!_L.test(e)||t!=null&&e in Object(t)}var Ho=kL;var FL=St(Object,"create"),Lr=FL;function vL(){this.__data__=Lr?Lr(null):{},this.size=0}var Fy=vL;function RL(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var vy=RL;var TL="__lodash_hash_undefined__",NL=Object.prototype,ML=NL.hasOwnProperty;function UL(e){var t=this.__data__;if(Lr){var r=t[e];return r===TL?void 0:r}return ML.call(t,e)?t[e]:void 0}var Ry=UL;var PL=Object.prototype,OL=PL.hasOwnProperty;function GL(e){var t=this.__data__;return Lr?t[e]!==void 0:OL.call(t,e)}var Ty=GL;var qL="__lodash_hash_undefined__";function HL(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Lr&&t===void 0?qL:t,this}var Ny=HL;function Lo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Lo.prototype.clear=Fy;Lo.prototype.delete=vy;Lo.prototype.get=Ry;Lo.prototype.has=Ty;Lo.prototype.set=Ny;var Bd=Lo;function LL(){this.__data__=[],this.size=0}var My=LL;function KL(e,t){for(var r=e.length;r--;)if(Cr(e[r][0],t))return r;return-1}var Bn=KL;var JL=Array.prototype,zL=JL.splice;function VL(e){var t=this.__data__,r=Bn(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():zL.call(t,r,1),--this.size,!0}var Uy=VL;function YL(e){var t=this.__data__,r=Bn(t,e);return r<0?void 0:t[r][1]}var Py=YL;function WL(e){return Bn(this.__data__,e)>-1}var Oy=WL;function jL(e,t){var r=this.__data__,n=Bn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Gy=jL;function Ko(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ko.prototype.clear=My;Ko.prototype.delete=Uy;Ko.prototype.get=Py;Ko.prototype.has=Oy;Ko.prototype.set=Gy;var En=Ko;var XL=St(Se,"Map"),yn=XL;function ZL(){this.size=0,this.__data__={hash:new Bd,map:new(yn||En),string:new Bd}}var qy=ZL;function $L(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Hy=$L;function e1(e,t){var r=e.__data__;return Hy(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Qn=e1;function t1(e){var t=Qn(this,e).delete(e);return this.size-=t?1:0,t}var Ly=t1;function r1(e){return Qn(this,e).get(e)}var Ky=r1;function n1(e){return Qn(this,e).has(e)}var Jy=n1;function o1(e,t){var r=Qn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var zy=o1;function Jo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jo.prototype.clear=qy;Jo.prototype.delete=Ly;Jo.prototype.get=Ky;Jo.prototype.has=Jy;Jo.prototype.set=zy;var eo=Jo;var i1="Expected a function";function Ed(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(i1);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=e.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(Ed.Cache||eo),r}Ed.Cache=eo;var Vy=Ed;var s1=500;function a1(e){var t=Vy(e,function(n){return r.size===s1&&r.clear(),n}),r=t.cache;return t}var Yy=a1;var A1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c1=/\\(\\)?/g,l1=Yy(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(A1,function(r,n,o,i){t.push(o?i.replace(c1,"$1"):n||r)}),t}),Wy=l1;function g1(e){return e==null?"":ZE(e)}var jy=g1;function d1(e,t){return we(e)?e:Ho(e,t)?[e]:Wy(jy(e))}var wn=d1;var f1=1/0;function u1(e){if(typeof e=="string"||In(e))return e;var t=e+"";return t=="0"&&1/e==-f1?"-0":t}var Qr=u1;function I1(e,t){t=wn(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Qr(t[r++])];return r&&r==n?e:void 0}var zo=I1;function p1(e,t,r){var n=e==null?void 0:zo(e,t);return n===void 0?r:n}var Xy=p1;function m1(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Za=m1;var h1=ja(Object.getPrototypeOf,Object),Vo=h1;var C1="[object Object]",B1=Function.prototype,E1=Object.prototype,Zy=B1.toString,y1=E1.hasOwnProperty,Q1=Zy.call(Object);function w1(e){if(!Le(e)||Nt(e)!=C1)return!1;var t=Vo(e);if(t===null)return!0;var r=y1.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Zy.call(r)==Q1}var Yo=w1;function S1(){this.__data__=new En,this.size=0}var $y=S1;function b1(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var eQ=b1;function x1(e){return this.__data__.get(e)}var tQ=x1;function _1(e){return this.__data__.has(e)}var rQ=_1;var D1=200;function k1(e,t){var r=this.__data__;if(r instanceof En){var n=r.__data__;if(!yn||n.length<D1-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new eo(n)}return r.set(e,t),this.size=r.size,this}var nQ=k1;function Wo(e){var t=this.__data__=new En(e);this.size=t.size}Wo.prototype.clear=$y;Wo.prototype.delete=eQ;Wo.prototype.get=tQ;Wo.prototype.has=rQ;Wo.prototype.set=nQ;var wr=Wo;function F1(e,t){return e&&Br(t,Cn(t),e)}var oQ=F1;function v1(e,t){return e&&Br(t,yr(t),e)}var iQ=v1;var cQ=typeof exports=="object"&&exports&&!exports.nodeType&&exports,sQ=cQ&&typeof module=="object"&&module&&!module.nodeType&&module,R1=sQ&&sQ.exports===cQ,aQ=R1?Se.Buffer:void 0,AQ=aQ?aQ.allocUnsafe:void 0;function T1(e,t){if(t)return e.slice();var r=e.length,n=AQ?AQ(r):new e.constructor(r);return e.copy(n),n}var $a=T1;function N1(e,t){for(var r=-1,n=e==null?0:e.length,o=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[o++]=s)}return i}var lQ=N1;function M1(){return[]}var eA=M1;var U1=Object.prototype,P1=U1.propertyIsEnumerable,gQ=Object.getOwnPropertySymbols,O1=gQ?function(e){return e==null?[]:(e=Object(e),lQ(gQ(e),function(t){return P1.call(e,t)}))}:eA,jo=O1;function G1(e,t){return Br(e,jo(e),t)}var dQ=G1;var q1=Object.getOwnPropertySymbols,H1=q1?function(e){for(var t=[];e;)Za(t,jo(e)),e=Vo(e);return t}:eA,tA=H1;function L1(e,t){return Br(e,tA(e),t)}var fQ=L1;function K1(e,t,r){var n=t(e);return we(e)?n:Za(n,r(e))}var rA=K1;function J1(e){return rA(e,Cn,jo)}var is=J1;function z1(e){return rA(e,yr,tA)}var nA=z1;var V1=St(Se,"DataView"),oA=V1;var Y1=St(Se,"Promise"),iA=Y1;var W1=St(Se,"Set"),sA=W1;var uQ="[object Map]",j1="[object Object]",IQ="[object Promise]",pQ="[object Set]",mQ="[object WeakMap]",hQ="[object DataView]",X1=Gr(oA),Z1=Gr(yn),$1=Gr(iA),e2=Gr(sA),t2=Gr(Va),to=Nt;(oA&&to(new oA(new ArrayBuffer(1)))!=hQ||yn&&to(new yn)!=uQ||iA&&to(iA.resolve())!=IQ||sA&&to(new sA)!=pQ||Va&&to(new Va)!=mQ)&&(to=function(e){var t=Nt(e),r=t==j1?e.constructor:void 0,n=r?Gr(r):"";if(n)switch(n){case X1:return hQ;case Z1:return uQ;case $1:return IQ;case e2:return pQ;case t2:return mQ}return t});var nr=to;var r2=Object.prototype,n2=r2.hasOwnProperty;function o2(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&n2.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var CQ=o2;var i2=Se.Uint8Array,Xo=i2;function s2(e){var t=new e.constructor(e.byteLength);return new Xo(t).set(new Xo(e)),t}var Zo=s2;function a2(e,t){var r=t?Zo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var BQ=a2;var A2=/\w*$/;function c2(e){var t=new e.constructor(e.source,A2.exec(e));return t.lastIndex=e.lastIndex,t}var EQ=c2;var yQ=ht?ht.prototype:void 0,QQ=yQ?yQ.valueOf:void 0;function l2(e){return QQ?Object(QQ.call(e)):{}}var wQ=l2;function g2(e,t){var r=t?Zo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var aA=g2;var d2="[object Boolean]",f2="[object Date]",u2="[object Map]",I2="[object Number]",p2="[object RegExp]",m2="[object Set]",h2="[object String]",C2="[object Symbol]",B2="[object ArrayBuffer]",E2="[object DataView]",y2="[object Float32Array]",Q2="[object Float64Array]",w2="[object Int8Array]",S2="[object Int16Array]",b2="[object Int32Array]",x2="[object Uint8Array]",_2="[object Uint8ClampedArray]",D2="[object Uint16Array]",k2="[object Uint32Array]";function F2(e,t,r){var n=e.constructor;switch(t){case B2:return Zo(e);case d2:case f2:return new n(+e);case E2:return BQ(e,r);case y2:case Q2:case w2:case S2:case b2:case x2:case _2:case D2:case k2:return aA(e,r);case u2:return new n;case I2:case h2:return new n(e);case p2:return EQ(e);case m2:return new n;case C2:return wQ(e)}}var SQ=F2;function v2(e){return typeof e.constructor=="function"&&!mn(e)?ay(Vo(e)):{}}var AA=v2;var R2="[object Map]";function T2(e){return Le(e)&&nr(e)==R2}var bQ=T2;var xQ=Hr&&Hr.isMap,N2=xQ?qo(xQ):bQ,_Q=N2;var M2="[object Set]";function U2(e){return Le(e)&&nr(e)==M2}var DQ=U2;var kQ=Hr&&Hr.isSet,P2=kQ?qo(kQ):DQ,FQ=P2;var O2=1,G2=2,q2=4,vQ="[object Arguments]",H2="[object Array]",L2="[object Boolean]",K2="[object Date]",J2="[object Error]",RQ="[object Function]",z2="[object GeneratorFunction]",V2="[object Map]",Y2="[object Number]",TQ="[object Object]",W2="[object RegExp]",j2="[object Set]",X2="[object String]",Z2="[object Symbol]",$2="[object WeakMap]",eK="[object ArrayBuffer]",tK="[object DataView]",rK="[object Float32Array]",nK="[object Float64Array]",oK="[object Int8Array]",iK="[object Int16Array]",sK="[object Int32Array]",aK="[object Uint8Array]",AK="[object Uint8ClampedArray]",cK="[object Uint16Array]",lK="[object Uint32Array]",me={};me[vQ]=me[H2]=me[eK]=me[tK]=me[L2]=me[K2]=me[rK]=me[nK]=me[oK]=me[iK]=me[sK]=me[V2]=me[Y2]=me[TQ]=me[W2]=me[j2]=me[X2]=me[Z2]=me[aK]=me[AK]=me[cK]=me[lK]=!0;me[J2]=me[RQ]=me[$2]=!1;function cA(e,t,r,n,o,i){var s,a=t&O2,A=t&G2,c=t&q2;if(r&&(s=o?r(e,n,o,i):r(e)),s!==void 0)return s;if(!pe(e))return e;var l=we(e);if(l){if(s=CQ(e),!a)return Ya(e,s)}else{var g=nr(e),d=g==RQ||g==z2;if(rr(e))return $a(e,a);if(g==TQ||g==vQ||d&&!o){if(s=A||d?{}:AA(e),!a)return A?fQ(e,iQ(s,e)):dQ(e,oQ(s,e))}else{if(!me[g])return o?e:{};s=SQ(e,g,a)}}i||(i=new wr);var f=i.get(e);if(f)return f;i.set(e,s),FQ(e)?e.forEach(function(C){s.add(cA(C,t,r,C,e,i))}):_Q(e)&&e.forEach(function(C,p){s.set(p,cA(C,t,r,p,e,i))});var u=c?A?nA:is:A?yr:Cn,m=l?void 0:u(e);return fy(m||e,function(C,p){m&&(p=C,C=e[p]),Oo(s,p,cA(C,t,r,p,e,i))}),s}var NQ=cA;var gK=4;function dK(e){return NQ(e,gK)}var yd=dK;var fK="__lodash_hash_undefined__";function uK(e){return this.__data__.set(e,fK),this}var MQ=uK;function IK(e){return this.__data__.has(e)}var UQ=IK;function lA(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new eo;++t<r;)this.add(e[t])}lA.prototype.add=lA.prototype.push=MQ;lA.prototype.has=UQ;var PQ=lA;function pK(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var OQ=pK;function mK(e,t){return e.has(t)}var GQ=mK;var hK=1,CK=2;function BK(e,t,r,n,o,i){var s=r&hK,a=e.length,A=t.length;if(a!=A&&!(s&&A>a))return!1;var c=i.get(e),l=i.get(t);if(c&&l)return c==t&&l==e;var g=-1,d=!0,f=r&CK?new PQ:void 0;for(i.set(e,t),i.set(t,e);++g<a;){var u=e[g],m=t[g];if(n)var C=s?n(m,u,g,t,e,i):n(u,m,g,e,t,i);if(C!==void 0){if(C)continue;d=!1;break}if(f){if(!OQ(t,function(p,w){if(!GQ(f,w)&&(u===p||o(u,p,r,n,i)))return f.push(w)})){d=!1;break}}else if(!(u===m||o(u,m,r,n,i))){d=!1;break}}return i.delete(e),i.delete(t),d}var gA=BK;function EK(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}var qQ=EK;function yK(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var HQ=yK;var QK=1,wK=2,SK="[object Boolean]",bK="[object Date]",xK="[object Error]",_K="[object Map]",DK="[object Number]",kK="[object RegExp]",FK="[object Set]",vK="[object String]",RK="[object Symbol]",TK="[object ArrayBuffer]",NK="[object DataView]",LQ=ht?ht.prototype:void 0,Qd=LQ?LQ.valueOf:void 0;function MK(e,t,r,n,o,i,s){switch(r){case NK:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case TK:return!(e.byteLength!=t.byteLength||!i(new Xo(e),new Xo(t)));case SK:case bK:case DK:return Cr(+e,+t);case xK:return e.name==t.name&&e.message==t.message;case kK:case vK:return e==t+"";case _K:var a=qQ;case FK:var A=n&QK;if(a||(a=HQ),e.size!=t.size&&!A)return!1;var c=s.get(e);if(c)return c==t;n|=wK,s.set(e,t);var l=gA(a(e),a(t),n,o,i,s);return s.delete(e),l;case RK:if(Qd)return Qd.call(e)==Qd.call(t)}return!1}var KQ=MK;var UK=1,PK=Object.prototype,OK=PK.hasOwnProperty;function GK(e,t,r,n,o,i){var s=r&UK,a=is(e),A=a.length,c=is(t),l=c.length;if(A!=l&&!s)return!1;for(var g=A;g--;){var d=a[g];if(!(s?d in t:OK.call(t,d)))return!1}var f=i.get(e),u=i.get(t);if(f&&u)return f==t&&u==e;var m=!0;i.set(e,t),i.set(t,e);for(var C=s;++g<A;){d=a[g];var p=e[d],w=t[d];if(n)var F=s?n(w,p,d,t,e,i):n(p,w,d,e,t,i);if(!(F===void 0?p===w||o(p,w,r,n,i):F)){m=!1;break}C||(C=d=="constructor")}if(m&&!C){var E=e.constructor,b=t.constructor;E!=b&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof b=="function"&&b instanceof b)&&(m=!1)}return i.delete(e),i.delete(t),m}var JQ=GK;var qK=1,zQ="[object Arguments]",VQ="[object Array]",dA="[object Object]",HK=Object.prototype,YQ=HK.hasOwnProperty;function LK(e,t,r,n,o,i){var s=we(e),a=we(t),A=s?VQ:nr(e),c=a?VQ:nr(t);A=A==zQ?dA:A,c=c==zQ?dA:c;var l=A==dA,g=c==dA,d=A==c;if(d&&rr(e)){if(!rr(t))return!1;s=!0,l=!1}if(d&&!l)return i||(i=new wr),s||hn(e)?gA(e,t,r,n,o,i):KQ(e,t,A,r,n,o,i);if(!(r&qK)){var f=l&&YQ.call(e,"__wrapped__"),u=g&&YQ.call(t,"__wrapped__");if(f||u){var m=f?e.value():e,C=u?t.value():t;return i||(i=new wr),o(m,C,r,n,i)}}return d?(i||(i=new wr),JQ(e,t,r,n,o,i)):!1}var WQ=LK;function jQ(e,t,r,n,o){return e===t?!0:e==null||t==null||!Le(e)&&!Le(t)?e!==e&&t!==t:WQ(e,t,r,n,jQ,o)}var fA=jQ;var KK=1,JK=2;function zK(e,t,r,n){var o=r.length,i=o,s=!n;if(e==null)return!i;for(e=Object(e);o--;){var a=r[o];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){a=r[o];var A=a[0],c=e[A],l=a[1];if(s&&a[2]){if(c===void 0&&!(A in e))return!1}else{var g=new wr;if(n)var d=n(c,l,A,e,t,g);if(!(d===void 0?fA(l,c,KK|JK,n,g):d))return!1}}return!0}var XQ=zK;function VK(e){return e===e&&!pe(e)}var uA=VK;function YK(e){for(var t=Cn(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,uA(o)]}return t}var ZQ=YK;function WK(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var IA=WK;function jK(e){var t=ZQ(e);return t.length==1&&t[0][2]?IA(t[0][0],t[0][1]):function(r){return r===e||XQ(r,e,t)}}var $Q=jK;function XK(e,t){return e!=null&&t in Object(e)}var ew=XK;function ZK(e,t,r){t=wn(t,e);for(var n=-1,o=t.length,i=!1;++n<o;){var s=Qr(t[n]);if(!(i=e!=null&&r(e,s)))break;e=e[s]}return i||++n!=o?i:(o=e==null?0:e.length,!!o&&Go(o)&&pn(s,o)&&(we(e)||qr(e)))}var tw=ZK;function $K(e,t){return e!=null&&tw(e,t,ew)}var rw=$K;var e4=1,t4=2;function r4(e,t){return Ho(e)&&uA(t)?IA(Qr(e),t):function(r){var n=Xy(r,e);return n===void 0&&n===t?rw(r,e):fA(t,n,e4|t4)}}var nw=r4;function n4(e){return function(t){return t?.[e]}}var ow=n4;function o4(e){return function(t){return zo(t,e)}}var iw=o4;function i4(e){return Ho(e)?ow(Qr(e)):iw(e)}var sw=i4;function s4(e){return typeof e=="function"?e:e==null?No:typeof e=="object"?we(e)?nw(e[0],e[1]):$Q(e):sw(e)}var aw=s4;function a4(e){return function(t,r,n){for(var o=-1,i=Object(t),s=n(t),a=s.length;a--;){var A=s[e?a:++o];if(r(i[A],A,i)===!1)break}return t}}var Aw=a4;var A4=Aw(),cw=A4;var c4=function(){return Se.Date.now()},pA=c4;var l4="Expected a function",g4=Math.max,d4=Math.min;function f4(e,t,r){var n,o,i,s,a,A,c=0,l=!1,g=!1,d=!0;if(typeof e!="function")throw new TypeError(l4);t=md(t)||0,pe(r)&&(l=!!r.leading,g="maxWait"in r,i=g?g4(md(r.maxWait)||0,t):i,d="trailing"in r?!!r.trailing:d);function f(B){var y=n,v=o;return n=o=void 0,c=B,s=e.apply(v,y),s}function u(B){return c=B,a=setTimeout(p,t),l?f(B):s}function m(B){var y=B-A,v=B-c,U=t-y;return g?d4(U,i-v):U}function C(B){var y=B-A,v=B-c;return A===void 0||y>=t||y<0||g&&v>=i}function p(){var B=pA();if(C(B))return w(B);a=setTimeout(p,m(B))}function w(B){return a=void 0,d&&n?f(B):(n=o=void 0,s)}function F(){a!==void 0&&clearTimeout(a),c=0,n=A=o=a=void 0}function E(){return a===void 0?s:w(pA())}function b(){var B=pA(),y=C(B);if(n=arguments,o=this,A=B,y){if(a===void 0)return u(A);if(g)return clearTimeout(a),a=setTimeout(p,t),f(A)}return a===void 0&&(a=setTimeout(p,t)),s}return b.cancel=F,b.flush=E,b}var Ut=f4;function u4(e,t,r){(r!==void 0&&!Cr(e[t],r)||r===void 0&&!(t in e))&&Po(e,t,r)}var ss=u4;function I4(e){return Le(e)&&Er(e)}var lw=I4;function p4(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var as=p4;function m4(e){return Br(e,yr(e))}var gw=m4;function h4(e,t,r,n,o,i,s){var a=as(e,r),A=as(t,r),c=s.get(A);if(c){ss(e,r,c);return}var l=i?i(a,A,r+"",e,t,s):void 0,g=l===void 0;if(g){var d=we(A),f=!d&&rr(A),u=!d&&!f&&hn(A);l=A,d||f||u?we(a)?l=a:lw(a)?l=Ya(a):f?(g=!1,l=$a(A,!0)):u?(g=!1,l=aA(A,!0)):l=[]:Yo(A)||qr(A)?(l=a,qr(a)?l=gw(a):(!pe(a)||Mo(a))&&(l=AA(A))):g=!1}g&&(s.set(A,l),o(l,A,n,i,s),s.delete(A)),ss(e,r,l)}var dw=h4;function fw(e,t,r,n,o){e!==t&&cw(t,function(i,s){if(o||(o=new wr),pe(i))dw(e,t,s,r,fw,n,o);else{var a=n?n(as(e,s),i,s+"",e,t,o):void 0;a===void 0&&(a=i),ss(e,s,a)}},yr)}var uw=fw;var C4=hy(function(e,t,r,n){uw(e,t,r,n)}),As=C4;var B4="[object Map]",E4="[object Set]",y4=Object.prototype,Q4=y4.hasOwnProperty;function w4(e){if(e==null)return!0;if(Er(e)&&(we(e)||typeof e=="string"||typeof e.splice=="function"||rr(e)||hn(e)||qr(e)))return!e.length;var t=nr(e);if(t==B4||t==E4)return!e.size;if(mn(e))return!Xa(e).length;for(var r in e)if(Q4.call(e,r))return!1;return!0}var ro=w4;function S4(e,t,r,n){if(!pe(e))return e;t=wn(t,e);for(var o=-1,i=t.length,s=i-1,a=e;a!=null&&++o<i;){var A=Qr(t[o]),c=r;if(A==="__proto__"||A==="constructor"||A==="prototype")return e;if(o!=s){var l=a[A];c=n?n(l,A,a):void 0,c===void 0&&(c=pe(l)?l:pn(t[o+1])?[]:{})}Oo(a,A,c),a=a[A]}return e}var Iw=S4;function b4(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var s=t[n],a=zo(e,s);r(a,s)&&Iw(i,wn(s,e),a)}return i}var pw=b4;function x4(e,t){if(e==null)return{};var r=Ja(nA(e),function(n){return[n]});return t=aw(t),pw(e,r,function(n,o){return t(n,o[0])})}var wd=x4;var nt=[];for(let e=0;e<256;++e)nt.push((e+256).toString(16).slice(1));function mw(e,t=0){return(nt[e[t+0]]+nt[e[t+1]]+nt[e[t+2]]+nt[e[t+3]]+"-"+nt[e[t+4]]+nt[e[t+5]]+"-"+nt[e[t+6]]+nt[e[t+7]]+"-"+nt[e[t+8]]+nt[e[t+9]]+"-"+nt[e[t+10]]+nt[e[t+11]]+nt[e[t+12]]+nt[e[t+13]]+nt[e[t+14]]+nt[e[t+15]]).toLowerCase()}var Sd,_4=new Uint8Array(16);function bd(){if(!Sd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Sd=crypto.getRandomValues.bind(crypto)}return Sd(_4)}var D4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xd={randomUUID:D4};function k4(e,t,r){e=e||{};let n=e.random??e.rng?.()??bd();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)t[r+o]=n[o];return t}return mw(n)}function F4(e,t,r){return xd.randomUUID&&!t&&!e?xd.randomUUID():k4(e,t,r)}var te=F4;var ta=W(Ae(),1);var Cw=W(Ae(),1),Ye=(()=>{try{let e=Cw.default.runtime.getManifest();return e.version_name===e.version+"-e"}catch{return navigator.userAgent.includes("Edg/")}})(),Bw="Sider";var cs=Ye?"dhoenijjpgpeimemopealfcbiecgceod":"difoiogjjojoaoomphldepapgpbgkhkb",mA=`ChitChat_${Ye?"Edge":"Chrome"}_Ext`,at="5.21.0",Ew=["gpmljinohlbfgmeoaeceoajachkabijo","nlipoenfbbikpbjkfpfillcgkoblgpmj"];var _d=[];var yw={name:"Robot",avatar:"",gender:"unknown",platform:"system",requireVIP:!1};var Dd="gpt-4o-mini",v4={dev:"",test:"",preview:"https://preview.sider.ai",prod:"https://sider.ai"},R4={dev:"",test:"",preview:"sider.ai",prod:"sider.ai"},hw=v4.prod,le={origin:hw,api:`${hw}/api`,domain:R4.prod},Qw="https://www.google-analytics.com/mp/collect",ww="G-0PRFKME4HP";var Sw="6FX_tIISST2SsnSx29yQRg";var or={English:"en","Chinese(Simplified)":"zh_CN","Chinese(Traditional)":"zh_TW",Spanish:"es",French:"fr",Japanese:"ja",German:"de",Portuguese:"pt",Arabic:"ar",Russian:"ru",Italian:"it",Korean:"ko",Hindi:"hi",Dutch:"nl",Polish:"pl",Amharic:"am",Bulgarian:"bg",Bengali:"bn",Catalan:"ca",Czech:"cs",Danish:"da",Greek:"el",Estonian:"et",Persian:"fa",Finnish:"fi",Filipino:"fil",Gujarati:"gu",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Kannada:"kn",Lithuanian:"lt",Latvian:"lv",Malayalam:"ml",Marathi:"mr",Malay:"ms",Norwegian:"no",Romanian:"ro",Slovak:"sk",Slovenian:"sl",Serbian:"sr",Swedish:"sv",Swahili:"sw",Tamil:"ta",Telugu:"te",Thai:"th",Turkish:"tr",Ukrainian:"uk",Urdu:"ur",Vietnamese:"vi"},T4={English:"en","English (Australia)":"en_AU","English (Canada)":"en_CA","English (India)":"en_IN","English (UK)":"en_UK","English (US)":"en_US","Chinese (Simplified)":"zh_CN","Chinese (Traditional)":"zh_TW",Spanish:"es","Spanish (Argentina)":"es_AR","Spanish (Colombia)":"es_CO","Spanish (Spain)":"es_ES","Spanish (Mexico)":"es_MX",French:"fr",Japanese:"ja",German:"de",Portuguese:"pt","Portuguese (Brazil)":"pt_BR","Portuguese (Portugal)":"pt_PT",Arabic:"ar","Arabic (Egypt)":"ar_EG","Arabic (Saudi)":"ar_SA",Russian:"ru",Italian:"it",Korean:"ko",Hindi:"hi",Dutch:"nl",Polish:"pl",Amharic:"am",Bengali:"bn",Bulgarian:"bg",Catalan:"ca",Croatian:"hr",Czech:"cs",Danish:"da",Estonian:"et",Filipino:"fil",Finnish:"fi",Greek:"el",Gujarati:"gu",Hebrew:"he",Hungarian:"hu",Indonesian:"id",Kannada:"kn",Latvian:"lv",Lithuanian:"lt",Malay:"ms",Malayalam:"ml",Marathi:"mr",Norwegian:"no",Persian:"fa",Romanian:"ro",Serbian:"sr",Slovak:"sk",Slovenian:"sl",Swahili:"sw",Swedish:"sv",Tamil:"ta",Telugu:"te",Thai:"th",Turkish:"tr",Ukrainian:"uk",Urdu:"ur",Vietnamese:"vi"};var kd=Object.entries(or).reduce((e,[t,r])=>(e[r]=t,e),{}),hA=Object.entries(T4).reduce((e,[t,r])=>(e[r]=t,e),{});var ls="provider:siderApi",aae=`${ls}:SelectedModels`;var Fd=["deepseek-reasoner","claude-3.7-sonnet-think","o3-mini","o1","deepseek-r1-distill-llama-70b"];var Kr={login:`${le.origin}/login`,openaiChat:"https://chatgpt.com",openaiLogin:"https://platform.openai.com/login",openaiSignup:"https://platform.openai.com/signup",openaiApiKey:"https://platform.openai.com/account/api-keys",openaiApiSession:"https://chatgpt.com/api/auth/session",edgeStore:"https://microsoftedge.microsoft.com/addons/detail/sider-ai-sidebar/dhoenijjpgpeimemopealfcbiecgceod",chromeStore:"https://chromewebstore.google.com/detail/sider-chatgpt-sidebar-+-v/difoiogjjojoaoomphldepapgpbgkhkb",chromeStoreReview:"https://chromewebstore.google.com/detail/sider-chatgpt-sidebar-+-v/difoiogjjojoaoomphldepapgpbgkhkb/reviews",weChatQrCode:"https://sider.ai/resource/weixin/qrcode.jpeg",producthuntPromoteApi:"https://sider.ai/resource/promotion/extension-promote.json",promoteConfigApi:"https://sider.ai/resource/promotion/promote-config.json"};var N4={key:"j",keyCode:74,metaKey:!0,ctrlKey:!0,altKey:!1,shiftKey:!1,disabled:!1},M4={key:"a",keyCode:65,metaKey:!1,ctrlKey:!1,altKey:!0,shiftKey:!1,disabled:!1};var CA={language:"zh_CN",theme:"light",isShowSearch:!1,triggerMode:"questionMark",submitShortcut:"Enter",sidebarShortcut:{altKey:!1,ctrlKey:!0,key:"O",keyCode:79,metaKey:!1,shiftKey:!0},sidebarLocation:"right",sidebarDisplayOption:"overlay",sidebarFab:!0,sidebarFabDisabledHost:{},selectionSidebarFab:!0,sidebarOnStartup:"new",showSelectedTextInSidebarEnable:!0,chatVisiblePromptKeys:[],readVisiblePromptKeys:[],writeVisiblePromptKeys:[],quickActionDispalyModifier:"",quickActionEnable:!0,quickActionSelectionEnable:!0,quickActionInputSelectionEnable:!0,translatorShortcut:N4,translatorPinnedTemplates:[],quickActionPinnedReading:[],quickActionPinnedWriting:[],quickActionInputIconEnable:!0,quickActionInputIconDisabledHost:{},translatorHostConfig:{"fab-config.example.com":{favicon:"",enable:!0}},enableWebAssistantVideo:!0,enableBilingualSubtitle:!0,enableWebAssistantArticle:!0,enableWebAssistantQA:!0,enableWebAssistantEmail:!0,enableWebAssistantCode:!0,enableWebAssistantImage:!0,enableLinkPreview:!0,webAssistantImageDisabledHost:{},pageTranslationService:"free",pageTranslationLastTargetLang:"",pageTranslationAutoEn:!0,pageTranslationDisplayStyle:"none",pageTranslationShowOriginalText:!0,pageTranslationNeverHost:{},pageTranslateShortcut:M4,inputTranslationEnable:!1,inputTranslationTargetLang:"",inputTranslationTriggerKey:" ",inputTranslationDisabledHost:{}},bw={device:"free",login:"free",premium_starter:"starter",premium:"basic",premium_pro:"pro",premium_ultra:"ultra",premium_plus:"plus",premium_ultra_v2:"ultra_v2",premium_ultra_mobile:"pocket"};var Aae=1024*1024*10,cae=1024*1024*100;var xw="chatgpt:img:",_w=["g-BlafpMvzd","g-nleealfRT"],Dw={"g-BlafpMvzd":{flair:{kind:"sidebar_keep"},resource:{files:[],gizmo:{appeal_info:null,author:{display_name:"sider.ai",is_verified:!0,link_to:"https://sider.ai",selected_display:"website",user_id:"user-inve40FQN9r2Tg4j1mlXSMQb",will_receive_support_emails:null},created_at:"2024-01-10T07:08:34.362699+00:00",display:{categories:["productivity"],description:"Top browser expert! Provide 3X accurate responses. Read any links: PDFs, videos, etc. Create 10+ types of files, like mind maps & spreadsheets, from search-derived contents.",name:"Browser Pro",profile_picture_url:"https://files.oaiusercontent.com/file-HKO0TEnSmvIb1M9G1HUyuAZJ?se=2123-12-27T11%3A10%3A22Z&sp=r&sv=2021-08-06&sr=b&rscc=max-age%3D1209600%2C%20immutable&rscd=attachment%3B%20filename%3DFrame%2520616.png&sig=fJSm%2BvONY8TkDO8IopKdwun%2BWeW2Wo9hti5JG%2Bb5Bj4%3D",prompt_starters:["Search for latest AI research outcomes.","Read this link and summarize the key points.","Create a mind map on ChatGPT prompt skills.","Type E to show all extensions."],welcome_message:"Hi, I'm Browser+! How can I assist you today?"},id:"g-BlafpMvzd",instructions:null,last_interacted_at:"2024-01-20T07:48:12.598861+00:00",live_version:null,model:null,organization_id:"org-i9SD3zX6OqRLnBDt97AtVHHk",settings:null,share_recipient:"marketplace",sharing_targets:null,short_url:"g-BlafpMvzd-browser-pro",tags:["public","reportable","uses_function_calls","pinned"],training_disabled:null,updated_at:"2024-01-20T11:10:24.859178+00:00",vanity_metrics:{created_ago_str:"last week",num_conversations:1066,num_conversations_str:"1066",num_pins:0,num_users_interacted_with:0},version:null,voice:{id:"ember"},workspace_approval_date:null,workspace_approved:null,workspace_id:null},product_features:{attachments:{accepted_mime_types:["application/json","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/javascript","text/plain","text/x-c++","text/x-script.python","text/x-typescript","text/markdown","application/pdf","text/x-sh","text/x-csharp","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/x-latext","text/x-tex","text/html","text/x-php","text/x-java","text/x-c","text/x-ruby","application/msword"],can_accept_all_mime_types:!0,image_mime_types:["image/webp","image/gif","image/png","image/jpeg"],type:"retrieval"}},tools:[{id:"gzm_cnf_jSWQ9Aj5eNZu3L3mS3bzGxGI~gzm_tool_l6SR7MvRO40YmUGDO8JfhnU8",metadata:{action_id:"g-d08200cb39473e72a1058ed24f66ff9838cf07c1",auth:{type:"none"},domain:"actions.sider.ai",json_schema:null,privacy_policy_url:"https://sider.ai/policies/privacy",raw_spec:""},settings:null,type:"plugins_prototype"},{id:"gzm_cnf_p4GmqNKla5EIJWaJ78Qjnq0B~gzm_tool_wtkmQ099hG3LZNbfZ6jXBMfN",metadata:null,settings:null,type:"dalle"}]}},"g-nleealfRT":{flair:{kind:"sidebar_keep"},resource:{files:[],gizmo:{appeal_info:null,author:{display_name:"awesomegpts.ai",is_verified:!0,link_to:"https://awesomegpts.ai",selected_display:"website",user_id:"user-MV1EPMI80LBUBFXL3yqj7TxP",will_receive_support_emails:null},created_at:"2023-11-15T09:08:04.569234+00:00",display:{categories:["lifestyle"],description:"Shop Smarter, Save Bigger! Quickly find top-rated gems and the best deals in the shopping sea!",name:"Shopping GPT",profile_picture_url:"https://files.oaiusercontent.com/file-epOlIRgMgGrqAHUd0l3Oq2HP?se=2123-12-22T06%3A43%3A25Z&sp=r&sv=2021-08-06&sr=b&rscc=max-age%3D1209600%2C%20immutable&rscd=attachment%3B%20filename%3DFrame%2520613.png&sig=ryqJXchYBS%2BMGC2aa4EPU6zGnOR93RgQoBXoV12b5KY%3D",prompt_starters:["Compare MacBook series products in a table","Locate nearby headphone retailers","Find sofas with top reviews","Find the cheapest Apple Watch Series 9"],welcome_message:""},id:"g-nleealfRT",instructions:null,last_interacted_at:"2024-01-20T06:16:29.030796+00:00",live_version:null,model:null,organization_id:"org-1uI21Op8M017HxHB8qTGnaym",settings:null,share_recipient:"marketplace",sharing_targets:null,short_url:"g-nleealfRT-shopping-gpt",tags:["public","reportable","uses_function_calls","pinned"],training_disabled:null,updated_at:"2024-01-20T02:52:49.252542+00:00",vanity_metrics:{created_ago_str:"2 months ago",num_conversations:341,num_conversations_str:"341",num_pins:0,num_users_interacted_with:0},version:null,voice:{id:"ember"},workspace_approval_date:null,workspace_approved:null,workspace_id:null},product_features:{attachments:{accepted_mime_types:["text/x-csharp","text/javascript","application/json","text/x-php","application/pdf","text/x-c","application/x-latext","text/html","text/x-sh","text/markdown","text/x-script.python","application/msword","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-typescript","text/x-c++","text/x-ruby","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/x-tex","text/x-java"],can_accept_all_mime_types:!0,image_mime_types:["image/gif","image/png","image/jpeg","image/webp"],type:"retrieval"}},tools:[{id:"gzm_cnf_mEdggaHyWwxFTAlH5vuabKsd~gzm_tool_sJQMJJ1tT9JqB6NizdOV6ChU",metadata:{action_id:"g-6a3d44cc7cf012a5f2222be5dadb5cc8140a15e3",auth:{type:"none"},domain:"actions.sider.ai",json_schema:null,privacy_policy_url:"https://sider.ai/policies/privacy",raw_spec:""},settings:null,type:"plugins_prototype"},{id:"gzm_cnf_gWRjhVNf1a0XZfN7oDjbgOEC~gzm_tool_YJucv3shUVUdtXn36lZJWVfs",metadata:null,settings:null,type:"browser"}]}}},kw=["thinking_mode","artifacts","search","text_to_image","data_analysis"],Fw=[{name:"artifacts",isExperimental:!1,isPro:!0,autoOn:!0},{name:"search",isExperimental:!1,isPro:!0,autoOn:!0},{name:"create_image",isExperimental:!1,isPro:!0,autoOn:!0},{name:"data_analysis",isExperimental:!1,isPro:!0,autoOn:!0},{name:"thinking_mode",isExperimental:!1,isPro:!0,autoOn:!1}];var Wr=W(Ae(),1);var z4=W(vw(),1);var ar=W(Ae(),1);var z=W(Ae(),1);var P4=W(Ae(),1);var vd="crop-area-select",U4=`${vd}-done`,dae=`${vd}-close`;async function Rw(e,t){let{x:r,y:n,width:o,height:i}=t,s=await fetch(e).then(A=>A.blob()),a=await createImageBitmap(s,r,n,o,i);try{let A=new OffscreenCanvas(o,i);A.getContext("2d").drawImage(a,0,0);let l=await A.convertToBlob({type:"image/jpeg",quality:1});return{dataUrl:await ir(l),blob:l}}finally{a.close()}}function G4(e){return z.default.storage.local.get(e)}var j=z.default.storage?G4:e=>z.default.runtime.sendMessage({type:"GET_STORAGE_LOCAL",data:e});function q4(e){return z.default.storage.local.set(e)}var T=z.default.storage?q4:e=>z.default.runtime.sendMessage({type:"SET_STORAGE_LOCAL",data:e});async function H4(e){return z.default.storage.local.remove(e)}var We=z.default.storage?H4:e=>z.default.runtime.sendMessage({type:"REMOVE_STORAGE_LOCAL",data:e});function Td(e,t,r){return typeof e=="string"&&(e=[e]),L4(z.default.storage.local.onChanged,n=>{for(let o of e)if(o in n){t(e.reduce((i,s)=>(i[s]=n[s],i),{}));break}},{signal:r?.signal})}async function Nd(e){if(z.default.cookies){let t=await z.default.cookies.get(e);return t?.value?decodeURIComponent(t.value):""}return z.default.runtime.sendMessage({type:"GET_COOKIE",data:e})}async function Md(e){return z.default?.cookies?await z.default.cookies.set(e):z.default.runtime.sendMessage({type:"SET_COOKIE",data:e})}function EA(e){return Nd({name:e,url:le.origin})}function yA(e,t,r=360){let n=Math.round(Date.now()/1e3)+86400*r;try{return Md({name:e,value:t,url:le.origin,domain:"."+new URL(le.origin).hostname,expirationDate:n,secure:!0})}catch{}}async function Rd(e){if(z.default.tabs){let{devicePixelRatio:t=1,rect:r,resetScrollPosition:n,...o}=e||{},i=await z.default.tabs.captureVisibleTab(void 0,{format:"jpeg",...o});if(r){let s=t,{height:a,width:A,x:c,y:l}=r;return(await Rw(i,{x:c*s,y:l*s,width:A*s,height:a*s})).dataUrl}else return i}return z.default.runtime.sendMessage({type:"CAPTURE_VISIBLE_TAB",data:e})}function At(e){return z.default.tabs?z.default.tabs.create(e):z.default.runtime.sendMessage({type:"OPEN_URL_IN_NEW_TAB",details:e})}async function Tw(e,t){let r=await z.default.tabs.query(e);for(let n of r)n.id&&await z.default.tabs.update(n.id,t)}async function Nw(e){return z.default?.tabs?QA(e):z.default.runtime.sendMessage({type:"SWITCH_TAB",queryInfo:e})}async function QA(e,t=!1,r){let{url:n,matchQuery:o,...i}=e,s=new URL(n),a=`${s.origin}${s.pathname}${o?s.search:""}*`,A=await z.default.tabs.query({url:a,...i});if(A.length)for(let c of A)c.id&&(await z.default.tabs.update(c.id,{active:!0}),t&&await z.default.tabs.reload(c.id,r));else{let{url:c,cookieStoreId:l,matchQuery:g,...d}=e,f={url:Array.isArray(c)?c[0]:c,...d};await z.default.tabs.create(f)}}function Ud(e="general",t,r){let n="/options.html";if(e&&(n+=`?section=${e}`),r){let o=new URLSearchParams(r);n+=`&${o.toString()}`}t&&(t.startsWith("#")||(t="#"+t),n+=t),z.default.tabs.create({url:n})}var Mw=(e,t)=>z.default.contextMenus?z.default.contextMenus.update(e,t):z.default.runtime.sendMessage({type:"UPDATE_CONTEXT_MENU",data:{id:e,opts:t}});function ct(e){return z.default.runtime.getURL(e)}async function sr(){return(await z.default.tabs.query({active:!0,currentWindow:!0}))[0]}function Uw(){return z.default.tabs?z.default.extension.isAllowedFileSchemeAccess():z.default.runtime.sendMessage({type:"IS_ALLOWED_FILE_SCHEME_ACCESS"})}function Pw(){return!!(z.default.tabs&&z.default.tabs.query)}function L4(e,t,r={}){let n=r.signal;if(n?.aborted)return Mt;e.addListener(t);let o=()=>e.removeListener(t);return n?(n.addEventListener("abort",o,{once:!0}),()=>{o(),n.removeEventListener("abort",o)}):o}async function Pd(){let[e]=await z.default.tabs.query({active:!0,currentWindow:!0});if(!e||e.id===void 0)throw new Error("No active tab");return e.id}function Ow(){try{let t=z.default.runtime.getManifest().side_panel.default_path,r=new URL(z.default.runtime.getURL(t)),n=new URL(window.location.href);return n.pathname===r.pathname&&n.origin===r.origin}catch{return!1}}function Gw(){if(!("serviceWorker"in navigator)&&!z.default.extension.getViews)return!0;try{return browser.runtime.getManifest().background.scripts.some(t=>{let r=new URL(z.default.runtime.getURL(t));return location.pathname===r.pathname&&location.origin===r.origin})}catch{return!1}}async function no(e){return!z.default.sidePanel||!z.default.sidePanel.open||e?.windowId===void 0?!1:z.default.sidePanel.open({windowId:e?.windowId}).then(async()=>z.default.runtime.getContexts?(await bt(50),await z.default.runtime.getContexts({contextTypes:["SIDE_PANEL"]}).then(r=>r.length>0)):!1).catch(t=>!1)}async function $o(e,t){let{fileTextStatus:r}=await z.default.storage.local.get({fileTextStatus:{}});return e.forEach(n=>{r[n]=t}),z.default.storage.local.set({fileTextStatus:r})}var K4=W(Ae(),1);var Od=Object.hasOwn;var J4=Array.isArray;function Gd(e,t){let r=e in t?t[e]:t._;return typeof r=="function"?r():r}function qd(e){return[...new Set(e)]}function Sn(...e){return e.join("/").replace(/([^:])\/{2,}/g,"$1/")}function bt(e=1e3,t){return new Promise((r,n)=>{let o=setTimeout(r,e);t&&t.addEventListener("abort",()=>{clearTimeout(o),n(new DOMException("Aborted","AbortError"))},{once:!0})})}function Hd(e){return e!=null}async function bn(e,t=1e3,r=2){let n=0;for(;;){try{return await e()}catch(o){if(r>=0&&n++>=r)throw o}await bt(t)}}function Sr(e,t=0){let r=!1,n;return function(...o){return r||(r=!0,n=new Promise((i,s)=>{e(...o).then(i).catch(s).finally(async()=>{t&&await bt(t),r=!1})})),n}}function qw(e,t,r){return async function(){let n=`__debounceJob:${e}__`,o=(await j({[n]:{running:!1,startAt:0,endAt:0,retryCount:0}}))[n],{running:i=!1,startAt:s=0,endAt:a=0,retryCount:A=0}=o,c=async m=>(Object.assign(o,m),T({[n]:o})),l=Date.now(),g=a===0,d=A>0,f=d?A*1e4:r??0;if((g||l-a>=f)&&(!i||l-s>3e3)){c({startAt:l,running:!0});try{return await t(),c({endAt:Date.now(),running:!1,retryCount:0}),""}catch{throw c({endAt:Date.now(),running:!1,retryCount:A>=60?60:A+1}),new Error(e)}}if(d)throw new Error(e);return""}}function ir(e){return new Promise((t,r)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=()=>{t(n.result)},n.onerror=r})}async function Hw(){return(await ar.default.cookies.getAll({domain:".chat.openai.com"})).some(r=>r.name=="__Secure-next-auth.session-token")}function Lw(e,t,r){let n=ar.default.runtime.getURL("chat/index.html");return ar.default.tabs.query({url:n+"*",currentWindow:!0}).then(async o=>{if(o.length){let i=await ar.default.tabs.update(o[0].id,{active:!0});return t&&t(),i}else return r&&await r(),ar.default.tabs.create({url:n+(e?"?reason="+e:"")})})}async function ei(){let e=ar.default.runtime.getURL("standalone.html?from=sidebar"),[t]=await ar.default.tabs.query({currentWindow:!0,url:`${e}*`});return t&&t.id?ar.default.tabs.reload(t.id).then(()=>ar.default.tabs.update(t.id,{active:!0})):ar.default.tabs.create({url:e})}function Ld(e){let t=e.lastIndexOf(".");return e.substring(0,t)}function wA(e,t){if(!t)return[e,""];let r=e.indexOf(t);return r===-1?[e,""]:[e.slice(0,r),e.slice(r+t.length)]}function Jr(e,t,r){let n=V4(e,r);switch(t){case"<":return n===-1;case"<=":return n===-1||n===0;case"=":return n===0;case">":return n===1;case">=":return n===1||n===0;default:break}return!1}function V4(e,t){let r=e.split(".").map(Number),n=t.split(".").map(Number),o=Math.max(r.length,n.length);for(let i=0;i<o;i++){let s=r[i]||0,a=n[i]||0;if(s>a)return 1;if(s<a)return-1}return 0}var ti=class{results=[];getLastResult(){return this.results[this.results.length-1]}parse(t){let r=t.choices?.[0]?.delta?.content||t.choices?.[0]?.message?.content,n=t.choices?.[0]?.delta?.reasoning_content;return r&&r!=="<|im_end|>"&&r!=="<|im_sep|>"?this.handleTextMsg(r):n&&this.handleReasoningMessage(n),this.results}handleTextMsg(t){let r=this.getLastResult();r&&r.type==="thinking"&&(r.status="finish"),r&&r.type==="text"?r.text+=t:this.results.push({type:"text",text:t,id:te()})}handleReasoningMessage(t){let r=this.getLastResult();r&&r.type==="reasoning_content"?r.reasoningContent&&(r.reasoningContent.text+=t):this.results.push({type:"reasoning_content",reasoningContent:{status:"start",text:t}})}};var ri=W(Ae(),1);var zw="__webext_forward_tabs_message__",SA=new Map,Y4=Gw(),W4=Ow();function Kd(e,t){if(Y4){let o=j4(e,t);if(o)return o}if(e.view==="sidebar"&&!W4)return;let r=e.type,n=SA.get(r);if(n)return Promise.try(n,{sender:t,data:e.data,id:r,originalSender:e.sender}).then(o=>({data:o})).catch(o=>({error:$n(o)}))}function j4(e,t){if(e.type===zw)return new Promise(async(r,n)=>{let{tabId:o,frameId:i,type:s,data:a,view:A}=e.data,c;try{c=o==="sender"?t.tab.id:o==="active"?await Pd():o}catch(g){return n(g)}let l=i==="sender"?t.frameId:i;r(ri.default.tabs.sendMessage(c,{type:s,data:a,sender:t,view:A},l===void 0?void 0:{frameId:l}))})}async function Kw(e,...[t,r={}]){if(!ri.default.runtime.id)throw new Error("Extension not initialized.");let n=r.tabId,o=r.frameId,i=r.view,s;if(n===void 0?s=await ri.default.runtime.sendMessage({type:e,data:t,view:i}):n!=="sender"&&o!=="sender"&&Pw()?s=await ri.default.tabs.sendMessage(n==="active"?await Pd():n,{type:e,data:t,view:i},o===void 0?void 0:{frameId:o}):s=await ri.default.runtime.sendMessage({type:zw,data:{tabId:n,frameId:o,type:e,data:t,view:i}}),!s)throw new Error(`null for Message ID "${e}". Maybe multiple async runtime.onMessage listeners or no listener.`);if("error"in s)throw LE(s.error);return s.data}function Jw(e,t,r={}){let n=r.signal;if(n?.aborted)return Mt;if(SA.get(e))throw new Error(`Message ID "${e}" already has a listener.`);SA.set(e,t);let i=()=>SA.delete(e);return n?(n.addEventListener("abort",i,{once:!0}),()=>{i(),n.removeEventListener("abort",i)}):i}var xt=new Proxy(Kw,{get:(e,t)=>Kw.bind(null,t)}),Ne=new Proxy(Jw,{get:(e,t)=>Jw.bind(null,t)});var Jd=function(e,t){return Jd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Jd(e,t)};function xn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Jd(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function _n(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(l){try{c(n.next(l))}catch(g){s(g)}}function A(l){try{c(n.throw(l))}catch(g){s(g)}}function c(l){l.done?i(l.value):o(l.value).then(a,A)}c((n=n.apply(e,t||[])).next())})}function br(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return A([c,l])}}function A(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,o&&(i=c[0]&2?o.return:c[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,c[1])).done)return i;switch(o=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],o=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Pt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function _r(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function oo(e){return this instanceof oo?(this.v=e,this):new oo(e)}function Vw(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(f){return function(u){return Promise.resolve(u).then(f,g)}}function a(f,u){n[f]&&(o[f]=function(m){return new Promise(function(C,p){i.push([f,m,C,p])>1||A(f,m)})},u&&(o[f]=u(o[f])))}function A(f,u){try{c(n[f](u))}catch(m){d(i[0][3],m)}}function c(f){f.value instanceof oo?Promise.resolve(f.value.v).then(l,g):d(i[0][2],f)}function l(f){A("next",f)}function g(f){A("throw",f)}function d(f,u){f(u),i.shift(),i.length&&A(i[0][0],i[0][1])}}function Yw(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Pt=="function"?Pt(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(a,A){s=e[i](s),o(a,A,s.done,s.value)})}}function o(i,s,a,A){Promise.resolve(A).then(function(c){i({value:c,done:a})},s)}}function ge(e){return typeof e=="function"}function bA(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var xA=bA(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function gs(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var ni=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Pt(s),A=a.next();!A.done;A=a.next()){var c=A.value;c.remove(this)}}catch(m){t={error:m}}finally{try{A&&!A.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else s.remove(this);var l=this.initialTeardown;if(ge(l))try{l()}catch(m){i=m instanceof xA?m.errors:[m]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var d=Pt(g),f=d.next();!f.done;f=d.next()){var u=f.value;try{Ww(u)}catch(m){i=i??[],m instanceof xA?i=_r(_r([],xr(i)),xr(m.errors)):i.push(m)}}}catch(m){n={error:m}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}if(i)throw new xA(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Ww(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&gs(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&gs(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})();var zd=ni.EMPTY;function _A(e){return e instanceof ni||e&&"closed"in e&&ge(e.remove)&&ge(e.add)&&ge(e.unsubscribe)}function Ww(e){ge(e)?e():e.unsubscribe()}var Ar={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var oi={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=oi.delegate;return o?.setTimeout?o.setTimeout.apply(o,_r([e,t],xr(r))):setTimeout.apply(void 0,_r([e,t],xr(r)))},clearTimeout:function(e){var t=oi.delegate;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function DA(e){oi.setTimeout(function(){var t=Ar.onUnhandledError;if(t)t(e);else throw e})}function Vd(){}var jw=(function(){return Yd("C",void 0,void 0)})();function Xw(e){return Yd("E",void 0,e)}function Zw(e){return Yd("N",e,void 0)}function Yd(e,t,r){return{kind:e,value:t,error:r}}var io=null;function ii(e){if(Ar.useDeprecatedSynchronousErrorHandling){var t=!io;if(t&&(io={errorThrown:!1,error:null}),e(),t){var r=io,n=r.errorThrown,o=r.error;if(io=null,n)throw o}}else e()}function $w(e){Ar.useDeprecatedSynchronousErrorHandling&&io&&(io.errorThrown=!0,io.error=e)}var ds=(function(e){xn(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,_A(r)&&r.add(n)):n.destination=e8,n}return t.create=function(r,n,o){return new so(r,n,o)},t.prototype.next=function(r){this.isStopped?jd(Zw(r),this):this._next(r)},t.prototype.error=function(r){this.isStopped?jd(Xw(r),this):(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped?jd(jw,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(ni);var X4=Function.prototype.bind;function Wd(e,t){return X4.call(e,t)}var Z4=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){kA(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){kA(n)}else kA(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){kA(r)}},e})(),so=(function(e){xn(t,e);function t(r,n,o){var i=e.call(this)||this,s;if(ge(r)||!r)s={next:r??void 0,error:n??void 0,complete:o??void 0};else{var a;i&&Ar.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return i.unsubscribe()},s={next:r.next&&Wd(r.next,a),error:r.error&&Wd(r.error,a),complete:r.complete&&Wd(r.complete,a)}):s=r}return i.destination=new Z4(s),i}return t})(ds);function kA(e){Ar.useDeprecatedSynchronousErrorHandling?$w(e):DA(e)}function $4(e){throw e}function jd(e,t){var r=Ar.onStoppedNotification;r&&oi.setTimeout(function(){return r(e,t)})}var e8={closed:!0,next:Vd,error:$4,complete:Vd};var si=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function eS(e){return e}function tS(e){return e.length===0?eS:e.length===1?e[0]:function(r){return e.reduce(function(n,o){return o(n)},r)}}var zt=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var o=this,i=r8(t)?t:new so(t,r,n);return ii(function(){var s=o,a=s.operator,A=s.source;i.add(a?a.call(i,A):A?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=rS(r),new r(function(o,i){var s=new so({next:function(a){try{t(a)}catch(A){i(A),s.unsubscribe()}},error:i,complete:o});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[si]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return tS(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=rS(t),new t(function(n,o){var i;r.subscribe(function(s){return i=s},function(s){return o(s)},function(){return n(i)})})},e.create=function(t){return new e(t)},e})();function rS(e){var t;return(t=e??Ar.Promise)!==null&&t!==void 0?t:Promise}function t8(e){return e&&ge(e.next)&&ge(e.error)&&ge(e.complete)}function r8(e){return e&&e instanceof ds||t8(e)&&_A(e)}function n8(e){return ge(e?.lift)}function FA(e){return function(t){if(n8(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function nS(e,t,r,n,o){return new o8(e,t,r,n,o)}var o8=(function(e){xn(t,e);function t(r,n,o,i,s,a){var A=e.call(this,r)||this;return A.onFinalize=s,A.shouldUnsubscribe=a,A._next=n?function(c){try{n(c)}catch(l){r.error(l)}}:e.prototype._next,A._error=i?function(c){try{i(c)}catch(l){r.error(l)}finally{this.unsubscribe()}}:e.prototype._error,A._complete=o?function(){try{o()}catch(c){r.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,A}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t})(ds);var oS=bA(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Xd=(function(e){xn(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new iS(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new oS},t.prototype.next=function(r){var n=this;ii(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=Pt(n.currentObservers),a=s.next();!a.done;a=s.next()){var A=a.value;A.next(r)}}catch(c){o={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var n=this;ii(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var o=n.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;ii(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,o=this,i=o.hasError,s=o.isStopped,a=o.observers;return i||s?zd:(this.currentObservers=null,a.push(r),new ni(function(){n.currentObservers=null,gs(a,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,o=n.hasError,i=n.thrownError,s=n.isStopped;o?r.error(i):s&&r.complete()},t.prototype.asObservable=function(){var r=new zt;return r.source=this,r},t.create=function(r,n){return new iS(r,n)},t})(zt);var iS=(function(e){xn(t,e);function t(r,n){var o=e.call(this)||this;return o.destination=r,o.source=n,o}return t.prototype.next=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,r)},t.prototype.error=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&o!==void 0?o:zd},t})(Xd);var sS=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function aS(e){return ge(e?.then)}function AS(e){return ge(e[si])}function cS(e){return Symbol.asyncIterator&&ge(e?.[Symbol.asyncIterator])}function lS(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function i8(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gS=i8();function dS(e){return ge(e?.[gS])}function fS(e){return Vw(this,arguments,function(){var r,n,o,i;return br(this,function(s){switch(s.label){case 0:r=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,oo(r.read())];case 3:return n=s.sent(),o=n.value,i=n.done,i?[4,oo(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,oo(o)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function uS(e){return ge(e?.getReader)}function Zd(e){if(e instanceof zt)return e;if(e!=null){if(AS(e))return s8(e);if(sS(e))return a8(e);if(aS(e))return A8(e);if(cS(e))return IS(e);if(dS(e))return c8(e);if(uS(e))return l8(e)}throw lS(e)}function s8(e){return new zt(function(t){var r=e[si]();if(ge(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function a8(e){return new zt(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function A8(e){return new zt(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,DA)})}function c8(e){return new zt(function(t){var r,n;try{for(var o=Pt(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()})}function IS(e){return new zt(function(t){g8(e,t).catch(function(r){return t.error(r)})})}function l8(e){return IS(fS(e))}function g8(e,t){var r,n,o,i;return _n(this,void 0,void 0,function(){var s,a;return br(this,function(A){switch(A.label){case 0:A.trys.push([0,5,6,11]),r=Yw(e),A.label=1;case 1:return[4,r.next()];case 2:if(n=A.sent(),!!n.done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];A.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=A.sent(),o={error:a},[3,11];case 6:return A.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:A.sent(),A.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function pS(e,t){return FA(function(r,n){var o=0;r.subscribe(nS(n,function(i){n.next(e.call(t,i,o++))}))})}var d8=Array.isArray;function f8(e,t){return d8(t)?e.apply(void 0,_r([],xr(t))):e(t)}function mS(e){return pS(function(t){return f8(e,t)})}function vA(e,t,r){return r?vA(e,t).pipe(mS(r)):new zt(function(n){var o=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return n.next(s.length===1?s[0]:s)},i=e(o);return ge(t)?function(){return t(o,i)}:void 0})}function ef(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new Xd}:t,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,s=i===void 0?!0:i,a=e.resetOnRefCountZero,A=a===void 0?!0:a;return function(c){var l,g,d,f=0,u=!1,m=!1,C=function(){g?.unsubscribe(),g=void 0},p=function(){C(),l=d=void 0,u=m=!1},w=function(){var F=l;p(),F?.unsubscribe()};return FA(function(F,E){f++,!m&&!u&&C();var b=d=d??r();E.add(function(){f--,f===0&&!m&&!u&&(g=$d(w,A))}),b.subscribe(E),!l&&f>0&&(l=new so({next:function(B){return b.next(B)},error:function(B){m=!0,C(),g=$d(p,o,B),b.error(B)},complete:function(){u=!0,C(),g=$d(p,s),b.complete()}}),Zd(F).subscribe(l))})(c)}}function $d(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var o=new so({next:function(){o.unsubscribe(),e()}});return Zd(t.apply(void 0,_r([],xr(r)))).subscribe(o)}}var Ot=W(Ae(),1);async function H(e,t){let r=await(Ot.default.storage?Ot.default.storage.local.get(e):Ot.default.runtime.sendMessage({type:"GET_STORAGE_LOCAL",data:e}));return typeof e=="string"?Object.hasOwn(r,e)?r[e]:t:r}async function Vt(e,t){return typeof e=="string"?Ot.default.storage?Ot.default.storage.local.set({[e]:t}):Ot.default.runtime.sendMessage({type:"SET_STORAGE_LOCAL",data:{[e]:t}}):Ot.default.storage?Ot.default.storage.local.set(e):Ot.default.runtime.sendMessage({type:"SET_STORAGE_LOCAL",data:e})}var tf=vA(e=>Ot.default.storage.local.onChanged.addListener(e),e=>Ot.default.runtime.id&&Ot.default.storage.local.onChanged.removeListener(e),e=>e).pipe(ef({resetOnRefCountZero:!0}));var u8=W(Ae(),1),RA=new Map;function I8(e,t){if(RA.get(e))throw new Error(`Channel "${e}" already has a listener.`);return RA.set(e,t),()=>{RA.delete(e)}}var TA=new Proxy(Object.create(null),{get:(e,t)=>I8.bind(null,t)});function rf(e){let t=e.name,r=RA.get(t);return r?(r(p8(e)),!0):!1}function p8(e){let t=new AbortController,r=!0;e.onDisconnect.addListener(()=>{t.abort(),r=!1});function n(i){return e.onDisconnect.addListener(i),()=>e.onDisconnect.removeListener(i)}function o(i){return e.onMessage.addListener(i),()=>e.onMessage.removeListener(i)}return{signal:t.signal,send:i=>r&&e.postMessage(i),close:()=>r&&e.disconnect(),onMessage:o,onClose:n,async*iter(...i){let s,a=o(c=>s(c)),A=n(()=>s=Mt);i.length&&e.postMessage(i[0]);try{for(;;)yield new Promise(c=>s=c)}finally{a(),A()}}}}function ai(e){let t,r,n,o,i,s,a;return A(),{feed:c,reset:A};function A(){t=!0,r="",n=0,o=-1,i=void 0,s=void 0,a=""}function c(g){r=r?r+g:g,t&&m8(r)&&(r=r.slice(hS.length)),t=!1;let d=r.length,f=0,u=!1;for(;f<d;){u&&(r[f]===`
`&&++f,u=!1);let m=-1,C=o,p;for(let w=n;m<0&&w<d;++w)p=r[w],p===":"&&C<0?C=w-f:p==="\r"?(u=!0,m=w-f):p===`
`&&(m=w-f);if(m<0){n=d-f,o=C;break}else n=0,o=-1;l(r,f,C,m),f+=m+1}f===d?r="":f>0&&(r=r.slice(f))}function l(g,d,f,u){if(u===0){a.length>0&&(e({type:"event",id:i,event:s||void 0,data:a.slice(0,-1)}),a="",i=void 0),s=void 0;return}let m=f<0,C=g.slice(d,d+(m?u:f)),p=0;m?p=u:g[d+f+1]===" "?p=f+2:p=f+1;let w=d+p,F=u-p,E=g.slice(w,w+F).toString();if(C==="data")a+=E?"".concat(E,`
`):`
`;else if(C==="event")s=E;else if(C==="id"&&!E.includes("\0"))i=E;else if(C==="retry"){let b=parseInt(E,10);Number.isNaN(b)||e({type:"reconnect-interval",value:b})}}}var hS=[239,187,191];function m8(e){return hS.every((t,r)=>e.charCodeAt(r)===t)}var h8=Object.prototype.toString,C8=e=>h8.call(e)==="[object Error]",B8=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function nf(e){if(!(e&&C8(e)&&e.name==="TypeError"&&typeof e.message=="string"))return!1;let{message:r,stack:n}=e;return r==="Load failed"?n===void 0||"__sentry_captured__"in e:r.startsWith("error sending request for url")?!0:B8.has(r)}var E8="https://apidomain.gptshere.com/api/static/v2/domain_list",CS="AES-GCM",y8="SHA-256";async function Q8(e){let t=new TextEncoder().encode(e);return(await crypto.subtle.digest({name:y8},t)).slice(0,16)}async function BS(){let e=Date.now(),t=await fetch(E8,{method:"GET",headers:{iv:e.toString()}}),r=t.headers.get("kl");if(!r)throw new Error("api error");let n=parseInt(r,10);if(isNaN(n)||n<0||n>64)throw new Error("api error");let i=await(await t.blob()).arrayBuffer(),s=new Uint8Array(i,0,n),a=new Uint8Array(i,n),A=await Q8(e.toString()),c=await crypto.subtle.importKey("raw",s,{name:CS},!1,["decrypt"]),l=await crypto.subtle.decrypt({name:CS,iv:A},c,a),g=new TextDecoder().decode(l),d=JSON.parse(g);if(d.code!==0)throw new Error("api error");let f=d?.data?.api_list,u=d?.data?.event;if(!f||f.length===0||!u)throw new Error("api error");return{apiDomainList:f,eventDomain:u}}var of=W(Ae(),1);var Dr={installSuccess(){return X.googleAnalytics(`${Ye?"edge_":""}sider_install_success`,{id:"install"})},report(e,t){let n=(Ye?"edge_":"chrome_")+e;X.googleAnalytics(n,{...t}).catch(()=>{})},async tts(e={}){let t=e.id||(await j({lastTab:""})).lastTab,r=e.voice||(await j({lastVoiceRole:""})).lastVoiceRole;Dr.report(`tts_${t}_${r}`)}};async function w8(){let e=await H("sider_event_device_id");if(!e){let t=te();return await T({sider_event_device_id:t}),t}return e}async function S8(){let e=await H("sider_event_unique_id");if(!e){let t=te();return await T({sider_event_unique_id:t}),t}return e}function b8(){let e={Win:"Windows",Mac:"MacOS",X11:"UNIX",Linux:"Linux",Android:"Android",iPhone:"iOS"};for(let[t,r]of Object.entries(e))if(navigator.userAgent.includes(t))return r;return"Unknown"}async function x8(){return(await H("userInfo"))?.id}async function _8(){return(await H("vipInfo"))?.isVIP}function ES(e){let t=typeof e;return t==="string"||t==="number"||t==="boolean"}var yS="sider_extension",sf="https://event.sider.ai",D8="/collect",af=async(e,t)=>{if(!of.default.tabs)return of.default.runtime.sendMessage({type:"SIDER_STAT_API",args:[e,t]});let r=await QS(),n=new URL(D8,r).toString(),o=e.replace(/-/gi,"_").trim();o.length>50,t&&Object.entries(t).forEach(([A,c])=>{Array.isArray(c)?t[A]=c.filter(ES).join("&"):ES(c)||delete t[A]});let i=Date.now(),s="others";typeof window<"u"&&(window?.isInStandalone?s="full_page":window?.isInSidepanel&&(s="side_panel"));let a={app_id:yS,event_type:o,event_id:te(),device_id:await w8(),unique_id:await S8(),timestamp:i,host_name:"sider.ai",locale:await H("language"),system_language:await H("language"),country_code:navigator.language.split("-")[1],zone_offset:-new Date().getTimezoneOffset()*6e4,make:"Node",screen_height:typeof window<"u"?window.screen.height:0,screen_width:typeof window<"u"?window.screen.width:0,viewport_height:typeof window<"u"?window.innerHeight:0,viewport_width:typeof window<"u"?window.innerWidth:0,sdk_name:"aws-solution-clickstream-sdk",sdk_version:"0.12.2",platform:"Extension",app_version:at,app_package_name:`Sider_${Ye?"edge":"chrome"}`,attributes:{...t,os:b8(),user_id:await x8(),user_premium:await _8(),use_scenario:s}};return fetch(`${n}?appId=${yS}&platform=Ext&event_bundle_sequence_id=1&upload_timestamp=${i}`,{method:"POST",headers:new Headers({"Content-Type":"application/json; charset=utf-8"}),body:JSON.stringify([a])}).catch(A=>{})},Ai={report:async(e,t)=>{try{await af(e,t)}catch{}}};var Af="eventDomain",cr="domainPool",fs="domainPoolIndex";async function cf(){let e=await j({[cr]:[],[fs]:0}),t=e[fs]+1;t>=e[cr].length&&(t=0),e[cr].length>0&&T({[fs]:t})}async function k8(){let e=await j({[cr]:[le.origin],[fs]:0});return e[cr]?.[e[fs]]??le.origin}async function zr(){let e=await k8();return new URL("api",e).toString()}async function QS(){return(await j({[Af]:sf}))?.[Af]||sf}async function wS(){let e=await j({[cr]:[]}),t=null,r=[],n="";try{({apiDomainList:r,eventDomain:n}=await BS())}catch(o){throw t=o,o}finally{(t||!r?.length)&&(r=[le.origin]),T({[cr]:[...new Set(r??[le.origin])],[Af]:n})}}async function ci(e,t){let r=await j({[cr]:[]});if(nf(e)&&navigator.onLine)if(t){let n=!1;t instanceof URL?n=r[cr].some(o=>t.origin.includes(o)):n=r[cr].some(o=>t.includes(o)),n&&await cf()}else await cf()}var ob=W(gf(),1),Me=W(Ae(),1);var zS=W(gf(),1);function ms(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function a(l){try{c(n.next(l))}catch(g){s(g)}}function A(l){try{c(n.throw(l))}catch(g){s(g)}}function c(l){l.done?i(l.value):o(l.value).then(a,A)}c((n=n.apply(e,t||[])).next())})}var Qe=class{constructor(){this.mutex=Promise.resolve()}lock(){let t=()=>{};return this.mutex=this.mutex.then(()=>new Promise(t)),new Promise(r=>{t=r})}dispatch(t){return ms(this,void 0,void 0,function*(){let r=yield this.lock();try{return yield Promise.resolve(t())}finally{r()}})}},df;function T8(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global}var If=T8(),ff=(df=If.Buffer)!==null&&df!==void 0?df:null,N8=If.TextEncoder?new If.TextEncoder:null;function MS(e,t){return(e&15)+(e>>6|e>>3&8)<<4|(t&15)+(t>>6|t>>3&8)}function M8(e,t){let r=t.length>>1;for(let n=0;n<r;n++){let o=n<<1;e[n]=MS(t.charCodeAt(o),t.charCodeAt(o+1))}}function U8(e,t){if(e.length!==t.length*2)return!1;for(let r=0;r<t.length;r++){let n=r<<1;if(t[r]!==MS(e.charCodeAt(n),e.charCodeAt(n+1)))return!1}return!0}var kS=87,FS=48;function vS(e,t,r){let n=0;for(let o=0;o<r;o++){let i=t[o]>>>4;e[n++]=i>9?i+kS:i+FS,i=t[o]&15,e[n++]=i>9?i+kS:i+FS}return String.fromCharCode.apply(null,e)}var RS=ff!==null?e=>{if(typeof e=="string"){let t=ff.from(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.length)}if(ff.isBuffer(e))return new Uint8Array(e.buffer,e.byteOffset,e.length);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")}:e=>{if(typeof e=="string")return N8.encode(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Invalid data type!")},TS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ps=new Uint8Array(256);for(let e=0;e<TS.length;e++)ps[TS.charCodeAt(e)]=e;function P8(e){let t=Math.floor(e.length*.75),r=e.length;return e[r-1]==="="&&(t-=1,e[r-2]==="="&&(t-=1)),t}function O8(e){let t=P8(e),r=e.length,n=new Uint8Array(t),o=0;for(let i=0;i<r;i+=4){let s=ps[e.charCodeAt(i)],a=ps[e.charCodeAt(i+1)],A=ps[e.charCodeAt(i+2)],c=ps[e.charCodeAt(i+3)];n[o]=s<<2|a>>4,o+=1,n[o]=(a&15)<<4|A>>2,o+=1,n[o]=(A&3)<<6|c&63,o+=1}return n}var NA=16*1024,us=4,G8=new Qe,uf=new Map;function q8(e,t){return ms(this,void 0,void 0,function*(){let r=null,n=null,o=!1;if(typeof WebAssembly>"u")throw new Error("WebAssembly is not supported in this environment!");let i=(B,y=0)=>{n.set(B,y)},s=()=>n,a=()=>r.exports,A=B=>{r.exports.Hash_SetMemorySize(B);let y=r.exports.Hash_GetBuffer(),v=r.exports.memory.buffer;n=new Uint8Array(v,y,B)},c=()=>new DataView(r.exports.memory.buffer).getUint32(r.exports.STATE_SIZE,!0),l=G8.dispatch(()=>ms(this,void 0,void 0,function*(){if(!uf.has(e.name)){let y=O8(e.data),v=WebAssembly.compile(y);uf.set(e.name,v)}let B=yield uf.get(e.name);r=yield WebAssembly.instantiate(B,{})})),g=()=>ms(this,void 0,void 0,function*(){r||(yield l);let B=r.exports.Hash_GetBuffer(),y=r.exports.memory.buffer;n=new Uint8Array(y,B,NA)}),d=(B=null)=>{o=!0,r.exports.Hash_Init(B)},f=B=>{let y=0;for(;y<B.length;){let v=B.subarray(y,y+NA);y+=v.length,n.set(v),r.exports.Hash_Update(v.length)}},u=B=>{if(!o)throw new Error("update() called before init()");let y=RS(B);f(y)},m=new Uint8Array(t*2),C=(B,y=null)=>{if(!o)throw new Error("digest() called before init()");return o=!1,r.exports.Hash_Final(y),B==="binary"?n.slice(0,t):vS(m,n,t)},p=()=>{if(!o)throw new Error("save() can only be called after init() and before digest()");let B=r.exports.Hash_GetState(),y=c(),v=r.exports.memory.buffer,U=new Uint8Array(v,B,y),V=new Uint8Array(us+y);return M8(V,e.hash),V.set(U,us),V},w=B=>{if(!(B instanceof Uint8Array))throw new Error("load() expects an Uint8Array generated by save()");let y=r.exports.Hash_GetState(),v=c(),U=us+v,V=r.exports.memory.buffer;if(B.length!==U)throw new Error(`Bad state length (expected ${U} bytes, got ${B.length})`);if(!U8(e.hash,B.subarray(0,us)))throw new Error("This state was written by an incompatible hash implementation");let L=B.subarray(us);new Uint8Array(V,y,v).set(L),o=!0},F=B=>typeof B=="string"?B.length<NA/4:B.byteLength<NA,E=F;switch(e.name){case"argon2":case"scrypt":E=()=>!0;break;case"blake2b":case"blake2s":E=(B,y)=>y<=512&&F(B);break;case"blake3":E=(B,y)=>y===0&&F(B);break;case"xxhash64":case"xxhash3":case"xxhash128":case"crc64":E=()=>!1;break}let b=(B,y=null,v=null)=>{if(!E(B,y))return d(y),u(B),C("hex",v);let U=RS(B);return n.set(U),r.exports.Hash_Calculate(U.length,y,v),vS(m,n,t)};return yield g(),{getMemory:s,writeMemory:i,getExports:a,setMemorySize:A,init:d,update:u,digest:C,save:p,load:w,calculate:b,hashLength:t}})}function US(e,t,r){return ms(this,void 0,void 0,function*(){let n=yield e.lock(),o=yield q8(t,r);return n(),o})}var Sle=new Qe;var ble=new Qe;var xle=new DataView(new ArrayBuffer(4));var _le=new Qe;var Dle=new Qe;var kle=new Qe;var Fle=new Qe;var vle=new Uint8Array(8);var Rle=new Qe;var H8="md5",L8="AGFzbQEAAAABEgRgAAF/YAAAYAF/AGACf38BfwMIBwABAgMBAAIFBAEBAgIGDgJ/AUGgigULfwBBgAgLB3AIBm1lbW9yeQIADkhhc2hfR2V0QnVmZmVyAAAJSGFzaF9Jbml0AAELSGFzaF9VcGRhdGUAAgpIYXNoX0ZpbmFsAAQNSGFzaF9HZXRTdGF0ZQAFDkhhc2hfQ2FsY3VsYXRlAAYKU1RBVEVfU0laRQMBCoMaBwUAQYAJCy0AQQBC/rnrxemOlZkQNwKQiQFBAEKBxpS6lvHq5m83AoiJAUEAQgA3AoCJAQu+BQEHf0EAQQAoAoCJASIBIABqQf////8BcSICNgKAiQFBAEEAKAKEiQEgAiABSWogAEEddmo2AoSJAQJAAkACQAJAAkACQCABQT9xIgMNAEGACSEEDAELIABBwAAgA2siBUkNASAFQQNxIQZBACEBAkAgA0E/c0EDSQ0AIANBgIkBaiEEIAVB/ABxIQdBACEBA0AgBCABaiICQRhqIAFBgAlqLQAAOgAAIAJBGWogAUGBCWotAAA6AAAgAkEaaiABQYIJai0AADoAACACQRtqIAFBgwlqLQAAOgAAIAcgAUEEaiIBRw0ACwsCQCAGRQ0AIANBmIkBaiECA0AgAiABaiABQYAJai0AADoAACABQQFqIQEgBkF/aiIGDQALC0GYiQFBwAAQAxogACAFayEAIAVBgAlqIQQLIABBwABPDQEgACECDAILIABFDQIgAEEDcSEGQQAhAQJAIABBBEkNACADQYCJAWohBCAAQXxxIQBBACEBA0AgBCABaiICQRhqIAFBgAlqLQAAOgAAIAJBGWogAUGBCWotAAA6AAAgAkEaaiABQYIJai0AADoAACACQRtqIAFBgwlqLQAAOgAAIAAgAUEEaiIBRw0ACwsgBkUNAiADQZiJAWohAgNAIAIgAWogAUGACWotAAA6AAAgAUEBaiEBIAZBf2oiBg0ADAMLCyAAQT9xIQIgBCAAQUBxEAMhBAsgAkUNACACQQNxIQZBACEBAkAgAkEESQ0AIAJBPHEhAEEAIQEDQCABQZiJAWogBCABaiICLQAAOgAAIAFBmYkBaiACQQFqLQAAOgAAIAFBmokBaiACQQJqLQAAOgAAIAFBm4kBaiACQQNqLQAAOgAAIAAgAUEEaiIBRw0ACwsgBkUNAANAIAFBmIkBaiAEIAFqLQAAOgAAIAFBAWohASAGQX9qIgYNAAsLC4cQARl/QQAoApSJASECQQAoApCJASEDQQAoAoyJASEEQQAoAoiJASEFA0AgACgCCCIGIAAoAhgiByAAKAIoIgggACgCOCIJIAAoAjwiCiAAKAIMIgsgACgCHCIMIAAoAiwiDSAMIAsgCiANIAkgCCAHIAMgBmogAiAAKAIEIg5qIAUgBCACIANzcSACc2ogACgCACIPakH4yKq7fWpBB3cgBGoiECAEIANzcSADc2pB1u6exn5qQQx3IBBqIhEgECAEc3EgBHNqQdvhgaECakERdyARaiISaiAAKAIUIhMgEWogACgCECIUIBBqIAQgC2ogEiARIBBzcSAQc2pB7p33jXxqQRZ3IBJqIhAgEiARc3EgEXNqQa+f8Kt/akEHdyAQaiIRIBAgEnNxIBJzakGqjJ+8BGpBDHcgEWoiEiARIBBzcSAQc2pBk4zBwXpqQRF3IBJqIhVqIAAoAiQiFiASaiAAKAIgIhcgEWogDCAQaiAVIBIgEXNxIBFzakGBqppqakEWdyAVaiIQIBUgEnNxIBJzakHYsYLMBmpBB3cgEGoiESAQIBVzcSAVc2pBr++T2nhqQQx3IBFqIhIgESAQc3EgEHNqQbG3fWpBEXcgEmoiFWogACgCNCIYIBJqIAAoAjAiGSARaiANIBBqIBUgEiARc3EgEXNqQb6v88p4akEWdyAVaiIQIBUgEnNxIBJzakGiosDcBmpBB3cgEGoiESAQIBVzcSAVc2pBk+PhbGpBDHcgEWoiFSARIBBzcSAQc2pBjofls3pqQRF3IBVqIhJqIAcgFWogDiARaiAKIBBqIBIgFSARc3EgEXNqQaGQ0M0EakEWdyASaiIQIBJzIBVxIBJzakHiyviwf2pBBXcgEGoiESAQcyAScSAQc2pBwOaCgnxqQQl3IBFqIhIgEXMgEHEgEXNqQdG0+bICakEOdyASaiIVaiAIIBJqIBMgEWogDyAQaiAVIBJzIBFxIBJzakGqj9vNfmpBFHcgFWoiECAVcyAScSAVc2pB3aC8sX1qQQV3IBBqIhEgEHMgFXEgEHNqQdOokBJqQQl3IBFqIhIgEXMgEHEgEXNqQYHNh8V9akEOdyASaiIVaiAJIBJqIBYgEWogFCAQaiAVIBJzIBFxIBJzakHI98++fmpBFHcgFWoiECAVcyAScSAVc2pB5puHjwJqQQV3IBBqIhEgEHMgFXEgEHNqQdaP3Jl8akEJdyARaiISIBFzIBBxIBFzakGHm9Smf2pBDncgEmoiFWogBiASaiAYIBFqIBcgEGogFSAScyARcSASc2pB7anoqgRqQRR3IBVqIhAgFXMgEnEgFXNqQYXSj896akEFdyAQaiIRIBBzIBVxIBBzakH4x75nakEJdyARaiISIBFzIBBxIBFzakHZhby7BmpBDncgEmoiFWogFyASaiATIBFqIBkgEGogFSAScyARcSASc2pBipmp6XhqQRR3IBVqIhAgFXMiFSASc2pBwvJoakEEdyAQaiIRIBVzakGB7ce7eGpBC3cgEWoiEiARcyIaIBBzakGiwvXsBmpBEHcgEmoiFWogFCASaiAOIBFqIAkgEGogFSAac2pBjPCUb2pBF3cgFWoiECAVcyIVIBJzakHE1PulempBBHcgEGoiESAVc2pBqZ/73gRqQQt3IBFqIhIgEXMiCSAQc2pB4JbttX9qQRB3IBJqIhVqIA8gEmogGCARaiAIIBBqIBUgCXNqQfD4/vV7akEXdyAVaiIQIBVzIhUgEnNqQcb97cQCakEEdyAQaiIRIBVzakH6z4TVfmpBC3cgEWoiEiARcyIIIBBzakGF4bynfWpBEHcgEmoiFWogGSASaiAWIBFqIAcgEGogFSAIc2pBhbqgJGpBF3cgFWoiESAVcyIQIBJzakG5oNPOfWpBBHcgEWoiEiAQc2pB5bPutn5qQQt3IBJqIhUgEnMiByARc2pB+PmJ/QFqQRB3IBVqIhBqIAwgFWogDyASaiAGIBFqIBAgB3NqQeWssaV8akEXdyAQaiIRIBVBf3NyIBBzakHExKShf2pBBncgEWoiEiAQQX9zciARc2pBl/+rmQRqQQp3IBJqIhAgEUF/c3IgEnNqQafH0Nx6akEPdyAQaiIVaiALIBBqIBkgEmogEyARaiAVIBJBf3NyIBBzakG5wM5kakEVdyAVaiIRIBBBf3NyIBVzakHDs+2qBmpBBncgEWoiECAVQX9zciARc2pBkpmz+HhqQQp3IBBqIhIgEUF/c3IgEHNqQf3ov39qQQ93IBJqIhVqIAogEmogFyAQaiAOIBFqIBUgEEF/c3IgEnNqQdG7kax4akEVdyAVaiIQIBJBf3NyIBVzakHP/KH9BmpBBncgEGoiESAVQX9zciAQc2pB4M2zcWpBCncgEWoiEiAQQX9zciARc2pBlIaFmHpqQQ93IBJqIhVqIA0gEmogFCARaiAYIBBqIBUgEUF/c3IgEnNqQaGjoPAEakEVdyAVaiIQIBJBf3NyIBVzakGC/c26f2pBBncgEGoiESAVQX9zciAQc2pBteTr6XtqQQp3IBFqIhIgEEF/c3IgEXNqQbul39YCakEPdyASaiIVIARqIBYgEGogFSARQX9zciASc2pBkaeb3H5qQRV3aiEEIBUgA2ohAyASIAJqIQIgESAFaiEFIABBwABqIQAgAUFAaiIBDQALQQAgAjYClIkBQQAgAzYCkIkBQQAgBDYCjIkBQQAgBTYCiIkBIAALyAMBBX9BACgCgIkBQT9xIgBBmIkBakGAAToAACAAQQFqIQECQAJAAkACQCAAQT9zIgJBB0sNACACRQ0BIAFBmIkBakEAOgAAIAJBAUYNASAAQZqJAWpBADoAACACQQJGDQEgAEGbiQFqQQA6AAAgAkEDRg0BIABBnIkBakEAOgAAIAJBBEYNASAAQZ2JAWpBADoAACACQQVGDQEgAEGeiQFqQQA6AAAgAkEGRg0BIABBn4kBakEAOgAADAELIAJBCEYNAkE2IABrIgMhBAJAIAJBA3EiAEUNAEEAIABrIQRBACEAA0AgAEHPiQFqQQA6AAAgBCAAQX9qIgBHDQALIAMgAGohBAsgA0EDSQ0CDAELQZiJAUHAABADGkEAIQFBNyEECyABQYCJAWohAEF/IQIDQCAAIARqQRVqQQA2AAAgAEF8aiEAIAQgAkEEaiICRw0ACwtBAEEAKAKEiQE2AtSJAUEAQQAoAoCJASIAQRV2OgDTiQFBACAAQQ12OgDSiQFBACAAQQV2OgDRiQFBACAAQQN0IgA6ANCJAUEAIAA2AoCJAUGYiQFBwAAQAxpBAEEAKQKIiQE3A4AJQQBBACkCkIkBNwOICQsGAEGAiQELMwBBAEL+uevF6Y6VmRA3ApCJAUEAQoHGlLqW8ermbzcCiIkBQQBCADcCgIkBIAAQAhAECwsLAQBBgAgLBJgAAAA=",K8="e6508e4b",J8={name:H8,data:L8,hash:K8},z8=new Qe,MA=null;function PS(e){if(MA===null)return US(z8,J8,16).then(t=>(MA=t,MA.calculate(e)));try{let t=MA.calculate(e);return Promise.resolve(t)}catch(t){return Promise.reject(t)}}var Tle=new Qe;var V8="sha3",Y8="AGFzbQEAAAABFARgAAF/YAF/AGACf38AYAN/f38AAwgHAAEBAgEAAwUEAQECAgYOAn8BQZCNBQt/AEGACAsHcAgGbWVtb3J5AgAOSGFzaF9HZXRCdWZmZXIAAAlIYXNoX0luaXQAAQtIYXNoX1VwZGF0ZQACCkhhc2hfRmluYWwABA1IYXNoX0dldFN0YXRlAAUOSGFzaF9DYWxjdWxhdGUABgpTVEFURV9TSVpFAwEKpBwHBQBBgAoL1wMAQQBCADcDgI0BQQBCADcD+IwBQQBCADcD8IwBQQBCADcD6IwBQQBCADcD4IwBQQBCADcD2IwBQQBCADcD0IwBQQBCADcDyIwBQQBCADcDwIwBQQBCADcDuIwBQQBCADcDsIwBQQBCADcDqIwBQQBCADcDoIwBQQBCADcDmIwBQQBCADcDkIwBQQBCADcDiIwBQQBCADcDgIwBQQBCADcD+IsBQQBCADcD8IsBQQBCADcD6IsBQQBCADcD4IsBQQBCADcD2IsBQQBCADcD0IsBQQBCADcDyIsBQQBCADcDwIsBQQBCADcDuIsBQQBCADcDsIsBQQBCADcDqIsBQQBCADcDoIsBQQBCADcDmIsBQQBCADcDkIsBQQBCADcDiIsBQQBCADcDgIsBQQBCADcD+IoBQQBCADcD8IoBQQBCADcD6IoBQQBCADcD4IoBQQBCADcD2IoBQQBCADcD0IoBQQBCADcDyIoBQQBCADcDwIoBQQBCADcDuIoBQQBCADcDsIoBQQBCADcDqIoBQQBCADcDoIoBQQBCADcDmIoBQQBCADcDkIoBQQBCADcDiIoBQQBCADcDgIoBQQBBwAwgAEEBdGtBA3Y2AoyNAUEAQQA2AoiNAQuMAwEIfwJAQQAoAoiNASIBQQBIDQBBACABIABqQQAoAoyNASICcDYCiI0BAkACQCABDQBBgAohAwwBCwJAIAIgAWsiBCAAIAQgAEkbIgNFDQAgA0EDcSEFQQAhBgJAIANBBEkNACABQYCKAWohByADQXxxIQhBACEGA0AgByAGaiIDQcgBaiAGQYAKai0AADoAACADQckBaiAGQYEKai0AADoAACADQcoBaiAGQYIKai0AADoAACADQcsBaiAGQYMKai0AADoAACAIIAZBBGoiBkcNAAsLIAVFDQAgAUHIiwFqIQMDQCADIAZqIAZBgApqLQAAOgAAIAZBAWohBiAFQX9qIgUNAAsLIAAgBEkNAUHIiwEgAhADIAAgBGshACAEQYAKaiEDCwJAIAAgAkkNAANAIAMgAhADIAMgAmohAyAAIAJrIgAgAk8NAAsLIABFDQBBACECQcgBIQYDQCAGQYCKAWogAyAGakG4fmotAAA6AAAgBkEBaiEGIAAgAkEBaiICQf8BcUsNAAsLC+ALAS1+IAApA0AhAkEAKQPAigEhAyAAKQM4IQRBACkDuIoBIQUgACkDMCEGQQApA7CKASEHIAApAyghCEEAKQOoigEhCSAAKQMgIQpBACkDoIoBIQsgACkDGCEMQQApA5iKASENIAApAxAhDkEAKQOQigEhDyAAKQMIIRBBACkDiIoBIREgACkDACESQQApA4CKASETQQApA8iKASEUAkACQCABQcgASw0AQQApA+iKASEVQQApA/iKASEWQQApA/CKASEXQQApA4CLASEYQQApA9CKASEZQQApA+CKASEaQQApA9iKASEbDAELQQApA+CKASAAKQNghSEaQQApA9iKASAAKQNYhSEbQQApA9CKASAAKQNQhSEZIBQgACkDSIUhFEEAKQPoigEhFUEAKQP4igEhFkEAKQPwigEhF0EAKQOAiwEhGCABQekASQ0AIBggACkDgAGFIRggFiAAKQN4hSEWIBcgACkDcIUhFyAVIAApA2iFIRUgAUGJAUkNAEEAQQApA4iLASAAKQOIAYU3A4iLAQsgAyAChSEcIAUgBIUhHSAHIAaFIQcgCSAIhSEIIAsgCoUhHiANIAyFIQkgDyAOhSEKIBEgEIUhCyATIBKFIQxBACkDuIsBIRBBACkDkIsBIRFBACkDoIsBIRJBACkDsIsBIRNBACkDiIsBIQ1BACkDwIsBIQ5BACkDmIsBIR9BACkDqIsBIQ9BwH4hAANAIB4gByALhSAbhSAYhSAPhUIBiYUgFIUgF4UgH4UgDoUhAiAMIB0gCoUgGoUgDYUgE4VCAYmFIAiFIBmFIBaFIBKFIgMgB4UhICAJIAggDIUgGYUgFoUgEoVCAYmFIByFIBWFIBGFIBCFIgQgDoUhISAcIAogFCAehSAXhSAfhSAOhUIBiYUgHYUgGoUgDYUgE4UiBYVCN4kiIiALIBwgCYUgFYUgEYUgEIVCAYmFIAeFIBuFIBiFIA+FIgYgCoVCPokiI0J/hYMgAyAPhUICiSIkhSEOIBYgAoVCKYkiJSAEIBeFQieJIiZCf4WDICKFIQ8gECAFhUI4iSIQIAYgDYVCD4kiJ0J/hYMgAyAbhUIKiSIohSENIAQgHoVCG4kiKSAoIAggAoVCJIkiKkJ/hYOFIRYgBiAdhUIGiSIrIAMgC4VCAYkiLEJ/hYMgEiAChUISiSIthSEXICsgBCAfhUIIiSIuIBUgBYVCGYkiFUJ/hYOFIRsgBiAThUI9iSIdIAQgFIVCFIkiBCAJIAWFQhyJIghCf4WDhSEUIAggHUJ/hYMgAyAYhUItiSIDhSEcIB0gA0J/hYMgGSAChUIDiSIJhSEdIAQgAyAJQn+Fg4UhByAJIARCf4WDIAiFIQggDCAChSICICFCDokiA0J/hYMgESAFhUIViSIEhSEJIAYgGoVCK4kiBSADIARCf4WDhSEKIAQgBUJ/hYMgIEIsiSIEhSELIABB0AlqKQMAIAUgBEJ/hYOFIAKFIQwgJyAoQn+FgyAqhSIFIRggAyAEIAJCf4WDhSICIR4gKiApQn+FgyAQhSIDIR8gLSAuQn+FgyAVhSIEIRogJiAkICVCf4WDhSIGIRMgFSArQn+FgyAshSIoIRkgIyAmICJCf4WDhSIiIRIgLiAsIC1Cf4WDhSImIRUgJyApIBBCf4WDhSInIREgIyAkQn+FgyAlhSIjIRAgAEEIaiIADQALQQAgDzcDqIsBQQAgBTcDgIsBQQAgGzcD2IoBQQAgBzcDsIoBQQAgCzcDiIoBQQAgDjcDwIsBQQAgAzcDmIsBQQAgFzcD8IoBQQAgFDcDyIoBQQAgAjcDoIoBQQAgBjcDsIsBQQAgDTcDiIsBQQAgBDcD4IoBQQAgHTcDuIoBQQAgCjcDkIoBQQAgIjcDoIsBQQAgFjcD+IoBQQAgKDcD0IoBQQAgCDcDqIoBQQAgDDcDgIoBQQAgIzcDuIsBQQAgJzcDkIsBQQAgJjcD6IoBQQAgHDcDwIoBQQAgCTcDmIoBC/gCAQV/QeQAQQAoAoyNASIBQQF2ayECAkBBACgCiI0BIgNBAEgNACABIQQCQCABIANGDQAgA0HIiwFqIQVBACEDA0AgBSADakEAOgAAIANBAWoiAyABQQAoAoiNASIEa0kNAAsLIARByIsBaiIDIAMtAAAgAHI6AAAgAUHHiwFqIgMgAy0AAEGAAXI6AABByIsBIAEQA0EAQYCAgIB4NgKIjQELAkAgAkEESQ0AIAJBAnYiA0EDcSEFQQAhBAJAIANBf2pBA0kNACADQfz///8DcSEBQQAhA0EAIQQDQCADQYAKaiADQYCKAWooAgA2AgAgA0GECmogA0GEigFqKAIANgIAIANBiApqIANBiIoBaigCADYCACADQYwKaiADQYyKAWooAgA2AgAgA0EQaiEDIAEgBEEEaiIERw0ACwsgBUUNACAFQQJ0IQEgBEECdCEDA0AgA0GACmogA0GAigFqKAIANgIAIANBBGohAyABQXxqIgENAAsLCwYAQYCKAQvRBgEDf0EAQgA3A4CNAUEAQgA3A/iMAUEAQgA3A/CMAUEAQgA3A+iMAUEAQgA3A+CMAUEAQgA3A9iMAUEAQgA3A9CMAUEAQgA3A8iMAUEAQgA3A8CMAUEAQgA3A7iMAUEAQgA3A7CMAUEAQgA3A6iMAUEAQgA3A6CMAUEAQgA3A5iMAUEAQgA3A5CMAUEAQgA3A4iMAUEAQgA3A4CMAUEAQgA3A/iLAUEAQgA3A/CLAUEAQgA3A+iLAUEAQgA3A+CLAUEAQgA3A9iLAUEAQgA3A9CLAUEAQgA3A8iLAUEAQgA3A8CLAUEAQgA3A7iLAUEAQgA3A7CLAUEAQgA3A6iLAUEAQgA3A6CLAUEAQgA3A5iLAUEAQgA3A5CLAUEAQgA3A4iLAUEAQgA3A4CLAUEAQgA3A/iKAUEAQgA3A/CKAUEAQgA3A+iKAUEAQgA3A+CKAUEAQgA3A9iKAUEAQgA3A9CKAUEAQgA3A8iKAUEAQgA3A8CKAUEAQgA3A7iKAUEAQgA3A7CKAUEAQgA3A6iKAUEAQgA3A6CKAUEAQgA3A5iKAUEAQgA3A5CKAUEAQgA3A4iKAUEAQgA3A4CKAUEAQcAMIAFBAXRrQQN2NgKMjQFBAEEANgKIjQEgABACQeQAQQAoAoyNASIAQQF2ayEDAkBBACgCiI0BIgFBAEgNACAAIQQCQCAAIAFGDQAgAUHIiwFqIQVBACEBA0AgBSABakEAOgAAIAFBAWoiASAAQQAoAoiNASIEa0kNAAsLIARByIsBaiIBIAEtAAAgAnI6AAAgAEHHiwFqIgEgAS0AAEGAAXI6AABByIsBIAAQA0EAQYCAgIB4NgKIjQELAkAgA0EESQ0AIANBAnYiAUEDcSEFQQAhBAJAIAFBf2pBA0kNACABQfz///8DcSEAQQAhAUEAIQQDQCABQYAKaiABQYCKAWooAgA2AgAgAUGECmogAUGEigFqKAIANgIAIAFBiApqIAFBiIoBaigCADYCACABQYwKaiABQYyKAWooAgA2AgAgAUEQaiEBIAAgBEEEaiIERw0ACwsgBUUNACAFQQJ0IQAgBEECdCEBA0AgAUGACmogAUGAigFqKAIANgIAIAFBBGohASAAQXxqIgANAAsLCwvYAQEAQYAIC9ABkAEAAAAAAAAAAAAAAAAAAAEAAAAAAAAAgoAAAAAAAACKgAAAAAAAgACAAIAAAACAi4AAAAAAAAABAACAAAAAAIGAAIAAAACACYAAAAAAAICKAAAAAAAAAIgAAAAAAAAACYAAgAAAAAAKAACAAAAAAIuAAIAAAAAAiwAAAAAAAICJgAAAAAAAgAOAAAAAAACAAoAAAAAAAICAAAAAAAAAgAqAAAAAAAAACgAAgAAAAICBgACAAAAAgICAAAAAAACAAQAAgAAAAAAIgACAAAAAgA==",W8="fb24e536",j8={name:V8,data:Y8,hash:W8},X8=new Qe,Is=null;function NS(e){return[224,256,384,512].includes(e)?null:new Error("Invalid variant! Valid values: 224, 256, 384, 512")}function OS(e,t=512){if(NS(t))return Promise.reject(NS(t));let r=t/8;if(Is===null||Is.hashLength!==r)return US(X8,j8,r).then(n=>(Is=n,Is.calculate(e,t,6)));try{let n=Is.calculate(e,t,6);return Promise.resolve(n)}catch(n){return Promise.reject(n)}}var Nle=new Qe;var Mle=new Qe;var Ule=new Qe;var Ple=new Qe;var Ole=new Qe;var Gle=new Qe;var qle=new Qe;var Hle=new Uint8Array(8);var Lle=new Qe;var Kle=new Uint8Array(8);var Jle=new Qe;var zle=new Uint8Array(8);var Vle=new Qe;var Yle=new Qe;var Wle=new Qe;var Dn=W(Ae(),1);var GS=["text/x-java","text/javascript","text/html","text/x-c++","application/msword","text/x-csharp","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf","text/x-script.python","text/x-c","text/x-tex","application/json","text/markdown","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-ruby","text/x-sh","text/x-php","application/x-latext","text/x-typescript","text/plain"];var UA=class{results=[];isBrowsing=!1;parseMessage(t){let r=t.message,n=this.results.findIndex(o=>o.id===r?.id);return r&&(r.author.role==="assistant"?r.recipient!=="bio"&&this.handleAssistantMessage(r,n):r.author.role==="tool"&&(r.author.name==="browser"||r.author.name==="myfiles_browser"?this.handleBrowserMessage(r):this.handlePluginResponseMessage(r))),this.results}handleAssistantMessage(t,r){if(t.recipient!=="all")if(t.recipient!=="browser"&&t.recipient!=="myfiles_browser")if(r===-1){let n=this.results[this.results.length-1];if(n&&n.type==="browsing"){let o=n;o.isLoading=!1,o.actions.push({messageId:"1",command:"finishBrowsing"}),this.isBrowsing=!1}this.results.push({id:t?.id,type:"plugin",pluginName:t?.recipient,isLoading:!0,info:[{type:"request",text:t?.content?.parts?.[0]||t?.content?.text}]})}else{let n=this.results[r];n.info[0].text=t?.content?.parts?.[0]||t?.content?.text}else this.isBrowsing||(this.results.push({id:t?.id,type:"browsing",subType:t?.recipient==="myfiles_browser"?"myfiles":"web",isLoading:!0,actions:[{messageId:"0",command:"startBrowsing",model_slug:t.metadata?.model_slug||""}]}),this.isBrowsing=!0);else if(r===-1)this.handleNewTextMessage(t);else{let n=this.results[r],o=this.getTextWithCitations(t);n.text=o.text,n.searchSnippets=o.searchSnippets}}handleBrowserMessage(t){if(this.isBrowsing){let r=this.results[this.results.length-1];if(r.type==="browsing"){let n=r,o=t.metadata;(n.actions.length===0||o.command!==n.actions[n.actions.length-1].command||n.actions[n.actions.length-1].messageId!==t?.id)&&(o.command!=="quote_lines"||n.actions[n.actions.length-1].command!=="quote_lines")?(o.command==="search"||o.command==="click"||o.command==="quote_lines"&&n.subType==="web")&&n.actions.push({messageId:t?.id,command:o.command,model_slug:o.model_slug,status:o.status,args:o.args,_cite_metadata:o.command==="click"?this.getClickMetadata(o._cite_metadata):{}}):(n.actions[n.actions.length-1].status=o.status,(o.command==="click"||o.command==="quote_lines")&&(n.actions[n.actions.length-1]._cite_metadata=this.getClickMetadata(o._cite_metadata)))}}}handlePluginResponseMessage(t){let r=this.results[this.results.length-1];r&&(r.isLoading=!1);let n=null;if(t?.author?.name==="python"?n=JSON.stringify(t.content):t?.author?.name==="dalle.text2im"?typeof t?.content?.parts?.[0]!="string"&&(n=t?.content?.text):n=t?.content?.parts?.[0],n&&r&&r.info.push({type:"response",text:n}),t?.author?.name==="dalle.text2im"){let o=t?.content?.parts?.[0];typeof o=="object"&&o.asset_pointer&&this.results.push({id:o.asset_pointer.replace("file-service://",""),type:"image",gen_id:o?.metadata?.dalle?.gen_id,prompt:o?.metadata?.dalle?.prompt})}else t?.metadata?.jit_plugin_data?.from_server.type==="confirm_action"&&this.results.push({id:t?.id,type:"pluginConfirm",metadata:t?.metadata?.jit_plugin_data?.from_server.body})}handleNewTextMessage(t){if(this.results.length>0){let r=this.results[this.results.length-1];if(r.type==="browsing"){let n=r;n.isLoading=!1,n.actions.push({messageId:"1",command:"finishBrowsing"}),this.isBrowsing=!1}}t?.content?.parts?.[0]&&this.results.push({id:t?.id,type:"text",text:t?.content?.parts?.[0]})}getClickMetadata(t){return{metadata_list:[{url:t?.metadata_list?.[0]?.url,title:t?.metadata_list?.[0]?.title}]}}getTextWithCitations(t){let r=t?.content?.parts?.[0],n=t?.metadata?.citations,o={};if(n&&n.length>0){let i=r,s=n.length;return n.sort((a,A)=>A.end_ix-a.end_ix).forEach((a,A)=>{let c=a.start_ix,l=a.end_ix,g=a.metadata?.url;g?(i=i.slice(0,c)+`[^${s-A}](${g})`+i.slice(l),o[s-A]={link:g,title:a.metadata.title,snippet:a.metadata.text}):i=i.slice(0,c)+i.slice(l)}),{text:i,searchSnippets:o}}else return{text:r}}};var qS=W(Ae(),1);async function Z8(e,t){return qS.default.runtime.sendMessage({type:"getArkoseToken",target:"offscreen",userType:e,dx:t})}async function HS(e,t){return Z8(e,t)}var lr="ChatGPT Webapp",Cf=`${lr}: error_chatgpt_auth`,GA="https://chatgpt.com",pf="accessToken",mf=new zS.default(10*1e3);async function _t(e,t,r,n){let o={"Content-Type":"application/json"};e&&(o.Authorization=`Bearer ${e}`),o={...o,...await rb()};let i={method:t,headers:o};return n&&(i.body=JSON.stringify(n)),li(`${GA}/backend-api${r}`,i)}async function VS(e,t){await _t(e,"POST","/conversation/message_feedback",t)}async function LS(e,t,r){return!0}async function YS(e){let t=await lt({isForce:!0});return _t(t,"GET","/models",null).then(r=>r.json())}async function WS(e){let t=await lt({isForce:!0});return _t(t,"GET","/gizmos/bootstrap?limit=2",null).then(r=>r.json()).catch(r=>({gizmos:[]}))}async function KS(e,t){let r=await lt({isForce:!0});return _t(r,"POST","/conversation/gen_title/"+e,{message_id:t}).then(n=>n.json())}function $8(){return[navigator.hardwareConcurrency+1920+1080,new Date().toString(),4294705152,0,navigator.userAgent,"","",navigator.language,navigator.languages.join(","),0]}async function jS(e,t){let r=performance.now(),n=$8();for(let o=0;o<5e5;o++){n[3]=o,n[9]=Math.round(performance.now()-r);let i=JSON.stringify(n),s=btoa(String.fromCharCode(...new TextEncoder().encode(i)));if((await OS(e+s,512)).slice(0,t.length)<=t)return s}return"wQ8Lk5FbGpA2NcR9dShT6gYjU7VxZ4D"+btoa(String.fromCharCode(...new TextEncoder().encode(JSON.stringify(e+""))))}async function eJ(e,t){return"gAAAAAB"+await jS(e,t)}async function tJ(){return"gAAAAAC"+await jS(Math.random()+"","0")}async function XS(e,t){let r=await lt({isForce:!0});return _t(r,"POST","/files",{file_name:e.name,file_size:e.size,use_case:t?"my_files":"multimodal"}).then(n=>n.json())}async function ZS(e){let t=await lt({});return _t(t,"POST","/files/"+e+"/uploaded",{}).then(r=>r.json())}async function Bf(e){let t=await lt({isForce:!0});return _t(t,"GET","/files/"+e+"/download",null).then(r=>r.json())}async function rJ(){let e=await lt({});return _t(e,"GET","/accounts/check/v4-2023-04-27",null).then(t=>t.json())}async function nJ(){let e=await lt({});return _t(e,"POST","/sentinel/chat-requirements",{p:await tJ()}).then(t=>t.json())}async function JS(){let e=await lt({});return _t(e,"POST","/register-websocket",null).then(t=>t.json()).then(t=>t.wss_url)}async function $S({conversationId:e,messageId:t,sandboxPath:r}){let n=await lt({isForce:!0});return _t(n,"GET","/conversation/"+e+"/interpreter/download?message_id="+t+"&sandbox_path="+r.replace("sandbox:",""),null).then(o=>o.json())}async function eb(e){e||(e=await lt());let t=`${GA}/backend-api/aip/p?offset=0&limit=250&is_installed=true`;return await(await li(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).json()}async function Ef(){if(mf.get(pf))return mf.get(pf);let e=null;try{e=await fetch(Kr.openaiApiSession)}catch(n){throw new Error(`${lr}: ${n.message}`)}let t=Cf;if(e?.status===403)throw new Error(t);let r=await e?.json().catch(()=>({}));if(!r.accessToken)throw new Error(t);return mf.set(pf,r.accessToken),r.accessToken}async function tb(e){let t=await lt();return _t(t,"POST",`/gizmos/${e}/sidebar`,{action:"keep"})}async function rb(){let e="Oai-",t={};return t[e+"Device-Id"]=await oJ(),t[e+"Language"]="en-US",t}async function oJ(){return(await chrome.cookies.get({url:GA,name:"oai-did"}))?.value||te()}async function iJ(e){try{return(await Dn.default.storage.local.get({selectWebAppModel:"gpt-4"})).selectWebAppModel}catch{return null}}async function nb(e){let t="";return t||(t=await lt()),new Promise((r,n)=>{let o=setInterval(async()=>{let s=await(await _t(t,"GET","/files/"+e,null)).json();s.retrieval_index_status==="success"&&(clearInterval(o),r(s))},1e3)})}function hf(e){return e.map(t=>{let r={name:t.name,size:t.size,mimeType:t.type,id:t.id};return t.type.startsWith("image")?(r.width=t.width,r.height=t.height):GS.includes(t.type)&&(r.fileTokenSize=t.fileTokenSize),r})}var Vr={};function sJ(e){let t=yf(e);if(Vr[t])return Vr[t];{let r=new WebSocket(e);return Vr[t]=r,r}}function aJ(e){let t=yf(e);if(Vr[t]&&Vr[t].readyState===WebSocket.OPEN)return{ws:Vr[t],isNew:!1};{let r=new WebSocket(e);return Vr[t]=r,{ws:r,isNew:!0}}}function yf(e){return e.split("?")[0]}function PA(e){let t=yf(e);Vr[t]&&delete Vr[t]}async function AJ(e){let t=await Dn.default.storage.local.get("chatRequirements");return nJ().then(r=>(Dn.default.storage.local.set({chatRequirements:{data:r,expireTime:Date.now()+540*1e3,token:e}}),r))}var OA=class{constructor(t){this.token=t;this.token=t}async generateAnswer(t){let r,n,o,i=Promise.resolve(),s=!1,a=await AJ(this.token);async function A(){if(f.filter(x=>x.type==="image").length>0){let x=f.filter(N=>N.type==="image").map(async N=>{let J=await Bf(N.id);if(J.download_url)return fetch(J.download_url).then(M=>M.blob()).then(async M=>{let Y=await ir(M);return T({[xw+N.id]:Y})})});await Promise.all(x)}}let c=async()=>{try{await i}catch(x){throw r&&(await A(),await LS(this.token,r,{is_visible:!1}),n&&r&&await KS(r,n),r="",n=""),new Error(`${lr}: ${x}`)}o&&(o.onmessage=()=>{},o.onerror=()=>{},o.onclose=()=>{}),r&&(await A(),await LS(this.token,r,{is_visible:!1}),n&&r&&await KS(r,n),r="",n="")};t.getCleanupMethod?.(c);function l(x,N){let J=N&&N.some(M=>M.type.startsWith("image"));return{content_type:J?"multimodal_text":"text",parts:J?N?.filter(M=>M.type.startsWith("image")).map(M=>({asset_pointer:"file-service://"+M.id,size_bytes:M.size,width:M.width,height:M.height})).concat([x]):[x]}}let g=[];if(t.prompt)g=Array.isArray(t.prompt)?t.prompt.map((x,N)=>({id:te(),recipient:t.actionData?"all":void 0,author:t.actionData?t.actionData.author:{role:x.role},content:N===t.prompt.length-1?l(x.content,t.chatgptFiles):{content_type:"text",parts:[x.content]},metadata:t.actionData?t.actionData.metaData:N===t.prompt.length-1&&t.chatgptFiles&&t.chatgptFiles.length>0?{attachments:hf(t.chatgptFiles)}:void 0})):[{id:te(),recipient:t.actionData?"all":void 0,author:t.actionData?t.actionData.author:{role:"user"},content:l(t.prompt,t.chatgptFiles),metadata:t.actionData?t.actionData.metaData:t.chatgptFiles?{attachments:hf(t.chatgptFiles)}:void 0}];else if(t.multiContent){let x=t.multiContent[0].text||t.multiContent[0].userInputText;g=[{id:te(),recipient:t.actionData?"all":void 0,author:t.actionData?t.actionData.author:{role:"user"},content:l(x,t.chatgptFiles),metadata:t.actionData?t.actionData.metaData:t.chatgptFiles?{attachments:hf(t.chatgptFiles)}:void 0}]}let d=()=>{d=null,t.onEvent({type:"done"}),c()},f=[],u=new UA,m=t.model||await iJ(this.token)||"text-davinci-002-render-sha",{needArkoseToken:C}=await Dn.default.storage.local.get("needArkoseToken");function p(x){if(x.error&&Dn.default.storage.local.set({needArkoseToken:!0}),!x.message?.content?.parts?.[0]&&!x.message?.content?.text&&x.message?.author.role!=="assistant"&&!x.message?.metadata?.command&&!x.message?.metadata?.jit_plugin_data||x.message?.author.role==="system"||x.message?.author.role==="user"||x.message?.content?.content_type==="text"&&x.message?.author.name===null&&x.message?.status==="finished_successfully"&&!x.message?.end_turn&&!x.message_id)return;f=u.parseMessage(x);let N=x.message?.content?.parts?.[0];(N||f.length>0)&&(r=x.conversation_id,t.onEvent({type:"answer",data:{message:x.message,contents:f,text:N,messageId:x.message.id,conversationId:x.conversation_id}}),t.parentMsgId||(n=x.message.id))}function w(x){try{let N=JSON.parse(x);return N.wss_url?N.wss_url:!1}catch{return!1}}async function F(x){return x||(x=await JS()),E(x)}function E(x){return new Promise((N,J)=>{let M=aJ(x);o=M.ws,o.onopen=()=>{M.isNew&&setTimeout(()=>{N(!0)},500)},o.onclose=()=>{throw PA(x),t.onEvent({type:"error",data:{error:`${lr}: Websoket error: close`}}),new Error("Websoket error: close")},o.onerror=Y=>{throw PA(x),t.onEvent({type:"error",data:{error:`${lr}: Websoket error: ${Y}`}}),new Error("Websoket error: "+Y)},o.onmessage=Y=>{let ue=JSON.parse(Y.data),Kt=atob(ue.body).trim();if(!Kt.startsWith("data: "))return;let _e=Kt.replace("data: ",""),De;if(_e==="[DONE]"){d?.();return}try{De=JSON.parse(_e)}catch{return}p(De)},M.isNew||N(!0)})}function b(x){o=sJ(x),o.onopen=()=>{},o.onclose=()=>{throw PA(x),t.onEvent({type:"error",data:{error:`${lr}: Websoket error: close`}}),new Error("Websoket error: close")},o.onerror=N=>{throw PA(x),t.onEvent({type:"error",data:{error:`${lr}: Websoket error: ${N}`}}),new Error("Websoket error: "+N)},o.onmessage=N=>{let J=JSON.parse(N.data),M=atob(J.body).trim();if(!M.startsWith("data: "))return;let Y=M.replace("data: ",""),ue;if(Y==="[DONE]"){d?.();return}try{ue=JSON.parse(Y)}catch{return}p(ue)}}try{t.parentMsgId||(m==="gpt-4-gizmo:g-BlafpMvzd"?Dr.report("browser_pro_new_chat"):m==="gpt-4-gizmo:g-nleealfRT"&&Dr.report("shoppingGPT_new_chat"))}catch{}let y=(await Dn.default.storage.local.get("webAppNetwork")).webAppNetwork,v="";if(!y){let x=await rJ(),N=x.accounts[x.account_ordering[0]].features.includes("shared_websocket")?"websocket":"http";N==="websocket"&&(v=await JS()),y={method:N,wss_url:v},Dn.default.storage.local.set({webAppNetwork:y})}y.method==="websocket"&&await F(y.wss_url);let U=null;if(chrome.offscreen&&a.arkose?.required)try{U=await HS(a.persona,a.arkose?.dx)}catch(x){throw new Error(x)}let V=()=>{let x={};return this.token&&(x.Authorization=`Bearer ${this.token}`),x};async function L(){let x="OpenAI-Sentinel-",N={};if(a.token&&(N[`${x}Chat-Requirements-Token`]=a.token),U&&(N[`${x}Arkose-Token`]=U),a.proofofwork?.required){let{seed:J,difficulty:M}=a.proofofwork;N[`${x}Proof-Token`]=await eJ(J,M)}return N}let D={"Content-Type":"application/json",...V(),...await L(),...await rb()};i=Yr(GA+"/backend-api/conversation",{method:"POST",signal:t.signal,headers:D,body:JSON.stringify({action:"next",conversation_mode:m.startsWith("gpt-4-gizmo:")?{gizmo_id:m.replace("gpt-4-gizmo:",""),kind:"gizmo_interaction"}:{kind:"primary_assistant"},force_paragen:!1,force_nulligen:this.token?void 0:!1,force_rate_limit:!1,force_paragen_model_slug:"",history_and_training_disabled:!1,messages:g,model:m.startsWith("gpt-4-gizmo:")?"gpt-4-gizmo":m,parent_message_id:t.parentMsgId||te(),plugin_ids:t.pluginIds,timezone_offset_min:new Date().getTimezoneOffset(),arkose_token:U||void 0,conversation_id:t.cid?t.cid:void 0,suggestions:[],websocket_request_id:te()}),onMessage(x){if(x==="[DONE]"){d?.();return}else if(w(x))s=!0,b(w(x));else if(x.startsWith("event: typing"))return;let N;try{N=JSON.parse(x)}catch{return}p(N)}},!0,!0).catch(x=>{let N=x.message;try{let J=JSON.parse(N);N=J.message||J.msg||J.error?.message||J.detail?.message||J.detail||N}catch{}throw t.onEvent({type:"error",data:{error:`${lr}: ${N}`}}),new Error(`${lr}: ${N}`)}).finally(()=>{s||d?.()})}};var kn=0,qA=!1,gi=new ob.default(1e3*30),Qf="accessToken",ib="noCacheToken",cJ="alwaysProxyFetch";try{Me.default.storage.local.get({guardChatgptTabId:0}).then(({guardChatgptTabId:e})=>{kn==0&&(kn=e),qA=e!=0})}catch{}async function sb(){let e=null;try{e=await Me.default.tabs.get(kn),await Me.default.tabs.update(e.id,{active:!0})}catch{}e||(e=await Me.default.tabs.create({url:Kr.openaiChat,pinned:!0,active:!0}));let t=e.id;await Me.default.storage.local.set({guardChatgptTabId:t}),kn=t,qA=!0,await new Promise(r=>{let n=(o,i)=>{switch(o.type){case"loaded":i.tab?.id==t&&Me.default.tabs.sendMessage(t,{type:"guard-session-activate"});break;case"guard-session-activated":Me.default.runtime.onMessage.removeListener(n),r();break}};Me.default.runtime.onMessage.addListener(n),setTimeout(()=>r(),1e3*40)})}async function lJ(){let e=await Me.default.tabs.create({url:Kr.openaiChat,pinned:!0,active:!1});return await Me.default.storage.local.set({guardChatgptTabId:e.id}),kn=e.id,qA=!0,e}async function gJ(){let t=await Me.default.tabs.query({pinned:!0,url:"https://chatgpt.com/*"});if(t.length>0){let r=t[0];return kn=r.id,await Me.default.tabs.reload(r.id),r}return null}async function dJ(){let e=null;try{e=await Me.default.tabs.get(kn),/chat\.openai\.com/.test(e.url||"")?await Me.default.tabs.reload(e.id):e=await Me.default.tabs.update(e.id,{url:Kr.openaiChat})}catch{}e||(e=await gJ()),e||(e=await lJ());let t=e?.id||0;await new Promise(r=>{let n=(o,i)=>{switch(o.type){case"loaded":i.tab?.id==t&&Me.default.tabs.sendMessage(t,{type:"guard-session-activate"});break;case"guard-session-activated":Me.default.runtime.onMessage.removeListener(n),r();break;case"guard-session-logout":throw Error("")}};Me.default.runtime.onMessage.addListener(n),setTimeout(()=>r(),1e3*40)})}async function lt({onRefresh:e,throwGuideError:t,isForce:r}={}){if(!r&&gi.get(ib)!==!0&&gi.get(Qf))return gi.get(Qf);let o=await(await li(Kr.openaiApiSession,{},{onRefresh:e,throwGuideError:t})).json().catch(()=>({}));return gi.set(Qf,o.accessToken),o.accessToken}async function fJ(e,t,r){let n=Me.default.tabs.connect(e,{name:"guard-proxy"}),o=null,i=null,s=new Promise((f,u)=>{o=f,i=u}),a;n.onDisconnect.addListener(()=>{i(new Error("proxy fetch aborted")),a?.close()}),r?.signal?.addEventListener("abort",()=>{a?.close(),n.disconnect()});let A={type:"guard-proxy-request",key:Date.now()+"",url:t,options:r};n.postMessage(A);let c=new ReadableStream({start(f){a=f},cancel(){n.disconnect()}}),l=setTimeout(()=>i(new Error("connect timeout")),1e3*1),g=f=>{switch(f.type){case"guard-proxy-request-received":clearTimeout(l);break;case"guard-proxy-response":o(new Response(c,f.options));break;case"guard-proxy-response-chunk":a.enqueue(new TextEncoder().encode(f.value)),f.done&&(a.close(),n.onMessage.removeListener(g),n.disconnect());break;case"guard-proxy-response-error":n.onMessage.removeListener(g),n.disconnect(),i(new Error(f.error)),a.close();break}};return n.onMessage.addListener(g),await s}async function li(e,t,r){let n=null;try{n=await fetch(e,t)}catch{}if(!n)throw new Error(Cf);if(n.status===401)throw new Error("");if(n.status==403){if(gi.set(ib,!0),gi.set(cJ,!0),!qA&&r?.throwGuideError)throw Error(`${lr}: error_chatgpt_session_timeout`);r?.onRefresh?.(),await dJ(),n=await fJ(kn,e,t)}return n}async function*Fn(e){let t=e.pipeThrough(new TextDecoderStream).getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}async function Yr(e,t,r=!1,n=!1,o=!1){let{onMessage:i,...s}=t,A=await(r?li:fetch)(e,s).catch(l=>{throw ci(l,e),l});if(!A.ok){let l=await A.json().catch(()=>({}));throw new Error(ro(l)?`${A.status} ${A.statusText}`:JSON.stringify({...l,responseStatus:A.status}))}let c=ai(l=>{l.type==="event"&&i(l.data)});for await(let l of Fn(A.body)){if(n)try{if(JSON.parse(l).wss_url){i(l);return}}catch{}if(o){i(l),i("[DONE]");return}c.feed(l)}}var gr="OpenAI";function vn(e,t){let r=t.trim();if(r.endsWith("/")&&(r=r.slice(0,-1)),e==="ollama")r.endsWith("/api/chat")&&(r=r.slice(0,-9));else if(e==="anthropic")r.endsWith("/v1/messages")&&(r=r.slice(0,-12));else{if(e==="azureopenai"||e==="azureai")return r;r.endsWith("/chat/completions")&&(r=r.slice(0,-17))}return r}var wf="\u2062",bf="\u2063",Ab="\u034F";function uJ(e){return e.split("").map(t=>t.charCodeAt(0).toString(2).padStart(8,"0").split("").map(n=>n==="0"?bf:Ab).join("")).join("")}function IJ(e){return(e.match(/.{8}/g)||[]).map(r=>{let n=r.split("").map(o=>o===bf?"0":"1").join("");return String.fromCharCode(parseInt(n,2))}).join("")}function cb(e,t,r){t=t.replaceAll(new RegExp(`[${wf}${bf}${Ab}]`,"g"),""),r||=e+"_"+te().split("-")[0];let n=uJ(r)+wf+t;return{id:r,name:n,vendor:e}}function ab(e){let t=e.split(wf);if(t.length!==2)return{name:e,vendor:"",id:""};{let[r,n]=t,o=IJ(r),i=o.indexOf("_");return{name:n,vendor:i===-1?o:o.slice(0,i),id:o}}}var Sf=[{id:"openai",displayName:"OpenAI",schema:"openai",baseUrl:"https://api.openai.com/v1",chatPath:"/chat/completions",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?vn("openai",t):"https://api.openai.com/v1",n=await fetch(`${r}/models`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"deepseek",displayName:"DeepSeek",schema:"openai",baseUrl:"https://api.deepseek.com/v1",chatPath:"/chat/completions",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?vn("openai",t):"https://api.deepseek.com/v1",n=await fetch(`${r}/models`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"groq",displayName:"Groq",schema:"openai",baseUrl:"https://api.groq.com/openai/v1",chatPath:"/chat/completions",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?vn("openai",t):"https://api.groq.com/openai/v1",n=await fetch(`${r}/models`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"google",displayName:"Google (Gemini)",schema:"openai",baseUrl:"https://generativelanguage.googleapis.com/v1beta/openai",chatPath:"/chat/completions",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?vn("openai",t):"https://generativelanguage.googleapis.com/v1beta/openai",n=await fetch(`${r}/models`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"ollama",displayName:"Ollama",schema:"openai",baseUrl:"http://localhost:11434",chatPath:"/api/chat",showApiKey:!1,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?vn("ollama",t):this.baseUrl,n=await fetch(`${r}/api/tags`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.models))throw new Error("Invalid response");return o.models.map(i=>({id:i.model}))}},{id:"anthropic",displayName:"Anthropic (Claude)",schema:"openai",baseUrl:"https://api.anthropic.com",chatPath:"/v1/messages",showApiKey:!0,async validateConnection(e,t){return this.fetchModels(e,t)},async fetchModels(e,t){let r=t?vn("anthropic",t):"https://api.anthropic.com",n=await fetch(`${r}/v1/models`,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":`${e}`,"anthropic-version":"2023-06-01"}});if(!n.ok)throw new Error(`Failed to fetch models: ${n.status} ${n.statusText}`);let o=await n.json();if(!Array.isArray(o.data))throw new Error("Invalid response");return o.data.map(i=>({id:i.id}))}},{id:"azureopenai",displayName:"Azure OpenAI",schema:"openai",baseUrl:"https://RESOURCE_NAME.openai.azure.com/openai/deployments/DEPLOYMENT_NAME/chat/completions?api-version=2024-10-21",chatPath:"",showApiKey:!0,async validateConnection(e,t){let r=new URL(t?vn("azureopenai",t):this.baseUrl);if(r.searchParams.has("api-version")||r.searchParams.append("api-version","2024-10-21"),r.pathname||(r.pathname="/openai/deployments/YOUR_DEPLOYMENT_NAME/chat/completions"),(await fetch(r.toString(),{method:"POST",body:JSON.stringify({stream:!1,max_tokens:1,messages:[{role:"user",content:" "}]}),headers:{"api-key":e,"Content-Type":"application/json"}})).status!==200)throw new Error("Connection failed");return null}},{id:"azureai",displayName:"Azure AI",schema:"openai",baseUrl:"https://RESOURCE_NAME.services.ai.azure.com/models",chatPath:"",showApiKey:!0,async validateConnection(e,t,r){let n=URL.parse(t+"/info");if(!n)throw new Error("Connection failed");n.searchParams.append("api-version",r||"2025-05-01");let o=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json","api-key":e,Authorization:`Bearer ${e}`}});if(o.status===400)try{if((await o.json()).error?.code==="no_model_name")return null}catch{throw new Error("Connection failed")}throw new Error("Connection failed")}}];function lb({apiKeyCustomSettings:e,apiKeyModelPresets:t}){return Sf.flatMap(r=>{let n=e[r.id]?.apiKey||"",o=e[r.id]?.apiBaseUrl,i=e[r.id]?.disabled===!0,s=e[r.id]?.models||[],a=t[r.id]?.models||[],A=e[r.id]?.apiModels||[],c=e[r.id]?.visibility||{},l=r.id==="azureopenai"?!!n&&!!o:r.showApiKey?!!n:!!o,g=A.length>0;return[...s.map(d=>({...d,visible:c[d.id]!==!1,vendor:r.id,vendorDisabled:i,apiKey:n,avaliable:l&&!i&&!d.isDeleted,isDeleted:!!d.isDeleted,isCustom:!0})),...A.map(d=>({...d,visible:c[d.id]!==!1,vendor:r.id,vendorDisabled:i,apiKey:n,avaliable:l&&!i,isDeleted:!1,isCustom:!1})),...a.map(d=>{let f=d.visible!==!1,u=c[d.id];return{...d,visible:g?!1:f?u!==!1:u===!0,vendor:r.id,avaliable:l&&!i,isDeleted:!1,isCustom:!1,vendorDisabled:i,apiKey:n}})]})}var HA=class{constructor(t,r){this.token=t;this.model=r;this.token=t,this.model=r}async generateAnswer(t){let r="",{apiKeyCustomSettings:n,apiKeyModelPresets:o}=await H({apiKeyCustomSettings:{},apiKeyModelPresets:{}}),i=lb({apiKeyModelPresets:o,apiKeyCustomSettings:n}),s=t.model||this.model,a=ab(s),A=i.find(E=>E.id===a.id),c=A?ab(A.name).name:"",l=a.vendor||"openai",g=n[l]?.apiKey||this.token,d=n[l]?.apiBaseUrl,f=n[l]?.apiVersion,u=d||Sf.find(E=>E.id===l)?.baseUrl||"https://api.openai.com/v1",m=Sf.find(E=>E.id===l)?.chatPath??"/chat/completions",C=m?Sn(vn(l,u),m):u,p=c||a.name,w={model:p,stream:p==="o1"?void 0:!0};if(Array.isArray(t.prompt)?w.messages=t.prompt:t.prompt?w.messages=[{role:"user",content:t.prompt}]:t.multiContent&&(w.messages=[{role:"user",content:t.multiContent[0]?.text||""}]),l==="ollama"){let E=te();w.messages=w.messages?.map(B=>{if(!Array.isArray(B.content))return B;let y=B.content.find(U=>U.type==="text")?.text||"",v=B.content.filter(U=>U.type==="image_url").map(U=>wA(U.image_url.url,";base64,")[1]);return{...B,content:y,images:v}});let b=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w),signal:t.signal});if(!b.ok){let B=await b.json().catch(()=>({}));throw new Error(ro(B)?`${gr}: ${b.status} ${b.statusText}`:`${gr}: ${B.message||B.error||JSON.stringify(B)}`)}if(!b.body)throw new Error(`${gr}: No response body`);for await(let B of Fn(b.body))for(let y of B.split(`
`))if(y.trim())try{let v=JSON.parse(y);if(v.done){t.onEvent({type:"done"});return}v.message?.content&&(r+=v.message.content),t.onEvent({type:"answer",data:{text:r,contents:[],messageId:E,conversationId:""}})}catch{}return}if(l==="anthropic"){w.max_tokens=4096,w.stream=!0;let E=te();w.messages=w.messages?.map(b=>Array.isArray(b.content)?{...b,content:b.content.map(B=>B.type==="image_url"?{type:"image",source:{type:"base64",data:wA(B.image_url.url,";base64,")[1],media_type:wA(B.image_url.url.slice(5),";")[0]}}:B)}:b),await Yr(C,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":g,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify(w),signal:t.signal,onMessage(b){try{let B=JSON.parse(b);B.type==="message_stop"?t.onEvent({type:"done"}):B.type==="content_block_delta"&&B.delta.type==="text_delta"&&(r+=B.delta.text,t.onEvent({type:"answer",data:{text:r,contents:[],messageId:E,conversationId:""}}))}catch{}}}).catch(b=>{let B=b.message;try{let y=JSON.parse(B);if(B=y.message||y.msg||y.error?.message||y.detail?.message||B,[502,503].includes(y.responseStatus))throw new Error(`${gr}: error_service_unavailable`)}catch{}throw new Error(`${gr}: ${B}`)});return}if(l==="azureopenai"){let E=new URL(C);E.searchParams.has("api-version")||E.searchParams.append("api-version","2024-10-21"),E.pathname||(E.pathname="/openai/deployments/YOUR_DEPLOYMENT_NAME/chat/completions"),E.pathname=E.pathname.replace(/\/openai\/deployments\/([^/]+)\/chat\/completions/,`/openai/deployments/${p}/chat/completions`);let b=new ti;await Yr(E.toString(),{method:"POST",body:JSON.stringify(w),signal:t.signal,headers:{"api-key":g,"Content-Type":"application/json"},onMessage(B){if(B==="[DONE]"){t.onEvent({type:"done"});return}try{let y=JSON.parse(B),v=b.parse(y),U=y.choices?.[0]?.delta?.content||y.choices?.[0]?.message?.content||"";if(U==="<|im_end|>"||U==="<|im_sep|>"||!U&&v.length===0)return;r+=U,t.onEvent({type:"answer",data:{text:r,contents:v,messageId:y.id,conversationId:""}})}catch{return}}}).catch(B=>{let y=B.message;try{let v=JSON.parse(y);if(y=v.message||v.msg||v.error?.message||v.detail?.message||y,[502,503].includes(v.responseStatus))throw new Error(`${gr}: error_service_unavailable`)}catch{}throw new Error(`${gr}: ${y}`)});return}if(l==="azureai"){let E=new ti,b=URL.parse(u+"/chat/completions");if(!b)throw new Error("Invalid url");b.searchParams.append("api-version",f||"2025-05-01"),await Yr(b.toString(),{method:"POST",body:JSON.stringify(w),headers:{"Content-Type":"application/json","api-key":g,Authorization:`Bearer ${g}`},onMessage(B){if(B==="[DONE]"){t.onEvent({type:"done"});return}try{let y=JSON.parse(B),v=E.parse(y),U=y.choices?.[0]?.delta?.content||y.choices?.[0]?.message?.content||"";if(U==="<|im_end|>"||U==="<|im_sep|>"||!U&&v.length===0)return;r+=U,t.onEvent({type:"answer",data:{text:r,contents:v,messageId:y.id,conversationId:""}})}catch{return}}}).catch(B=>{let y=B.message;try{let v=JSON.parse(y);if(y=v.message||v.msg||v.error?.message||v.detail?.message||y,[502,503].includes(v.responseStatus))throw new Error(`${gr}: error_service_unavailable`)}catch{}throw new Error(`${gr}: ${y}`)});return}let F=new ti;await Yr(C,{method:"POST",signal:t.signal,headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(w),onMessage(E){if(E==="[DONE]"){t.onEvent({type:"done"});return}try{let b=JSON.parse(E),B=F.parse(b),y=b.choices?.[0]?.delta?.content||b.choices?.[0]?.message?.content||"";if(y==="<|im_end|>"||y==="<|im_sep|>"||!y&&B.length===0)return;r+=y,t.onEvent({type:"answer",data:{text:r,multiContent:B,messageId:b.id,conversationId:""}})}catch{return}}},!1,!1,p==="o1").catch(E=>{let b=E.message;try{let B=JSON.parse(b);if(b=B.message||B.msg||B.error?.message||B.detail?.message||b,[502,503].includes(B.responseStatus))throw new Error(`${gr}: error_service_unavailable`)}catch{}throw new Error(`${gr}: ${b}`)})}};var hs=W(Ae(),1);function Cs(e){return hs.default.tabs.sendMessage(e,{type:"check"}).catch(t=>{if(hs.default.scripting?.executeScript)return Promise.all([hs.default.scripting.executeScript({target:{tabId:e},files:["content-all.js"]}),hs.default.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["all-frames.js"]})]).then(r=>r).catch(r=>{if(!(r instanceof Error&&r.message.startsWith("Cannot access a chrome")))throw new Error("Failed to inject content script")})})}var LA=class{queue=[];isRunning=!1;async run(t){if(this.queue.push(t),!this.isRunning){for(this.isRunning=!0;this.queue.length;){let r=this.queue.shift();r&&await r()}this.isRunning=!1}}};async function*db(e=200,t=15){let r=0;for(;r++<t;)yield Wr.default.runtime.sendMessage({type:"is-sidepanel-open"}).catch(()=>!1),await bt(e)}async function fb(e,t=!1){let{siderModelsLastUpdateTime:r}=await j({siderModelsLastUpdateTime:0});if(!r||Date.now()-r>3600*1e3||t)return X.loadSiderModels(e).then(n=>{n&&n.length&&pJ(n)&&(T({siderModels:n.map(o=>({name:o.name,displayName:o.display_name,cost:o.cost,level:o.level,category:o.category,creator:o.creator,icon:o.logo,desc:o.desc,enable:o.enable,replaceBy:o.replace_by,is_think_model:o.is_think_model,is_folded:o.is_folded,can_enable_think:o.can_enable_think})),siderModelsLastUpdateTime:Date.now()}),j({"provider:siderApi":{model:"sider"},siderGrammarKey:{model:"sider"},"quickAction:provider:siderApi":"sider"}).then(o=>{let i=o["provider:siderApi"]?.model,s=o.siderGrammarKey?.model,a=o["quickAction:provider:siderApi"];if(i){let A=n.find(c=>c.name===i);A&&A.replace_by&&Wr.default.storage.local.set({"provider:siderApi":{model:A.replace_by}})}if(s){let A=n.find(c=>c.name===s);A&&A.replace_by&&Wr.default.storage.local.set({siderGrammarKey:{model:A.replace_by}})}if(a){let A=n.find(c=>c.name===a);A&&A.replace_by&&Wr.default.storage.local.set({"quickAction:provider:siderApi":{model:A.replace_by}})}}))})}async function ub(e,t=!1){let{websiteToolsLastUpdateTime:r}=await j({websiteToolsLastUpdateTime:0});if(!r||Date.now()-r>3600*1e3||t)return X.loadWebsiteTools(e).then(n=>{if(n&&n.categories&&n.categories.length){let o=n.categories;T({websiteTools:o,websiteToolsLastUpdateTime:Date.now()})}})}function pJ(e){return Array.isArray(e)?e.every(t=>typeof t!="object"||t===null?!1:typeof t.name=="string"&&typeof t.display_name=="string"&&typeof t.creator=="string"&&typeof t.logo=="string"&&typeof t.desc=="string"&&typeof t.category=="number"&&typeof t.enable=="boolean"&&typeof t.replace_by=="string"&&typeof t.cost=="object"&&t.cost!==null&&typeof t.cost.type=="string"&&typeof t.cost.count=="number"):!1}function Ib(e){switch(e.split(".").pop()){case"cs":return"text/x-csharp";case"md":return"text/markdown";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:return""}}async function xf(){Wr.default.storage.local.remove(["chat_history_next_sync_tag","chatTempData"]),Wr.default.storage.local.get("chat:conversations").then(({"chat:conversations":e})=>{let t=e.filter(r=>r.provider!=="siderApi");Wr.default.storage.local.set({"chat:conversations":t})}),Wr.default.runtime.sendMessage({type:"RUNTIME_FORWARD_MSG",msg:{type:"new-chat"}})}var Tj=W(Ae(),1);var _j=W(Ae(),1);var ao={609:"error_sider_premium_required",610:"error_sider_high_traffic",616:"error_sider_ultra_vip_required",700:"error_sider_basic_credit_limit",701:"error_sider_advanced_credit_limit",702:"error_sider_elite_credit_limit",1001:"error_sider_invalid_token ",1003:"error_sider_need_login",1006:"error_sider_device_bind_account",1011:"error_sider_login_expired",1012:"error_sider_admin_kickout",1013:"error_sider_device_limit_logout",1018:"error_sider_login_expired",1019:"error_sider_user_banned",1101:"error_sider_processing",1102:"error_sider_api_limit",1107:"error_sider_api_limit2",1109:"error_sider_gpt4_highload",1110:"error_sider_gpt_highload",1112:"error_sider_gpt4_limit",1113:"error_sider_gpt4_limit",1136:"error_sider_o1_limit",1137:"error_sider_unlimited_limit",1138:"error_sider_new_unlimited_limit_1",1139:"error_sider_new_unlimited_limit_2",1141:"error_sider_new_unlimited_limit_3",1142:"error_sider_data_analysis_credit",1143:"error_sider_translate_api_limit",1144:"error_sider_gpt45_rate_limit",1145:"error_sider_opus_limit",1146:"error_sider_opus_t_limit",3509:"error_sider_audio_advanced_limit",5522:"error_sider_thinking_model_credit_limit",1118:"error_sider_image_limit",1127:"error_sider_ocr_limit",1128:"error_sider_summary_video_limit",1501:"error_sider_openai_fault",1515:"error_sider_gemini_pro_busy",1129:"error_sider_basic_text_limit",1130:"error_sider_advanced_text_limit",1135:"error_sider_credit_freq_limit",1132:"error_sider_openai_filter",2003:"error_sider_embedding_limit_by_count",3511:"error_sider_audio_to_text_service_overload",4e3:"error_sider_trial_feat_limit",4500:"error_sider_video_too_long",4501:"error_sider_failed_to_create_user_video_task",4502:"error_sider_failed_to_send_whisper_request",4503:"error_sider_got_error_response_from_whisper",4504:"error_sider_failed_to_get_subtitle",4505:"error_sider_failed_to_get_video_info",4506:"error_sider_not_support_live_video",5200:"error_sider_upgrade_ext_needed",1516:"error_sider_function_call_error",750:"error_sider_model_error",15040:"error_sider_chat_deep_research_failed"};function Bs(e,t){switch(e){case 1001:case 1011:case 1012:case 1013:case 1018:T({__force_logout_reason__:ao[e]}).then(()=>{Es()});break;case 609:case 616:case 1102:case 1107:case 1112:case 1113:case 1118:case 1127:case 1128:case 3511:case 4e3:case 4501:case 4502:case 4503:case 4504:X.getVipInfoCached();break;default:break}throw new Error(KA(e,t))}function KA(e,t){if(e===1136)return t.includes(`ask.${le.domain}`)?ao[e]:t;if(e===1135){let r=t.match(/after (.*) minutes/i)?.[1]||60;return`${ao[e]}|${r}`}if(e===1137){let r=t.match(/is \( (.*) uses/i)?.[1],n=t.match(/every (.*) hours, resetting/i)?.[1],o=t.match(/resetting at (.*). Full/i)?.[1];return`${ao[e]}|${r}|${n}|${o}`}if(e===1139||e===1141){let r=t.match(/Current speed limit is \((.*) times \//i)?.[1],n=t.match(/\/ (.*) hour/i)?.[1];return`${ao[e]}|${r}|${n}`}return e in ao?ao[e]:typeof t=="string"&&t.startsWith("504")?"error_sider_timeout":t}async function mJ(e,t,r){return new Promise((n,o)=>{let i=new XMLHttpRequest;i.open(t.method||"GET",e),t.headers instanceof Headers&&t.headers.forEach((s,a)=>{i.setRequestHeader(a,s)}),i.onload=function(){n(new Response(i.responseText,{status:i.status,statusText:i.statusText}))},i.upload.onprogress=function(s){s.lengthComputable&&r&&r?.(s.loaded/s.total*100)},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request timed out"))},i.send(t.body),t.signal&&(t.signal.onabort=function(){i.abort(),o(new DOMException("Aborted","AbortError"))})})}async function JA(e,t=null,r={}){if(!e.startsWith("http")){let u=await zr();e=Sn(u,e)}e=new URL(e).href;let{onStreamData:n,getAbortMethod:o,noAuth:i,timeout:s,returnRawResponse:a,onProgress:A,...c}=r;c.method&&(c.method=c.method.toUpperCase());let l=new AbortController;if(c.signal||(c.signal=l.signal),o?.(()=>{l.abort()}),c.headers=new Headers(c.headers||{}),!i&&!c.headers.has("Authorization")){let u=(await jr()).token;if(u)c.headers.set("Authorization",u),We("ERR_MUST_LOGIN");else throw new Error("Need Login",{cause:{url:e,method:c.method}})}if(t)try{t instanceof FormData||t instanceof Blob||t instanceof URLSearchParams||t instanceof ReadableStream||t instanceof ArrayBuffer?c.body=t:(c.body=JSON.stringify(t),c.headers.set("Content-Type","application/json"))}catch{c.body=t}let g;s&&(g=setTimeout(()=>l.abort(),s));let d=null;try{d=A?await mJ(e,c,A):await fetch(e,c)}catch(u){throw ci(u,e),u}if(!d)throw new Error("No response");if(s&&clearTimeout(g),a)return d;let f=null;if(n||(f=await d.json().catch(()=>({}))),!d.ok||d.status!==204&&f&&f.code!==0){if(f||(f=await d.json().catch(()=>({}))),f.errMsg=f.msg||f.message,ro(f))f.errMsg=`${d.status} ${d.statusText}`;else{(f.code===1003||f.code===1006)&&T({ERR_MUST_LOGIN:!0});try{Bs(f.code,f.msg||f.message)}catch(u){f.errMsg=u.message}}throw n&&n({data:null,done:!0}),f}if(n&&d.body){let u=ai(m=>{if(m.type==="event"){let C={code:0,data:null,msg:"",errMsg:"",done:m.data==="[DONE]"},p=null;try{p=JSON.parse(m.data)}catch{}if(p&&(C={...C,...p}),C.code!==0){try{Bs(C.code,C.msg)}catch(w){C.errMsg=w.message}throw n({data:null,done:!0}),C}n({data:C.data,done:C.done})}});for await(let m of Fn(d.body))u.feed(m)}return f?.data}var ce=(...e)=>JA(e[0],e[1],{...e[2],method:"GET"}),G=(...e)=>JA(e[0],e[1],{...e[2],method:"POST"}),pb=(...e)=>JA(e[0],e[1],{...e[2],method:"PUT"}),zA=(...e)=>JA(e[0],e[1],{...e[2],method:"DELETE"});async function mb(e){let t=await ce(`/v1/newcomer-guide/task?${Ie}`,null,{signal:e}),r=t?.map(n=>({id:n.task_id,key:n.task_key,credit:n.reward,isAdvance:n.reward_type==="advanced",status:n.status}));return t&&T({taskCenterTasks:r}),r}function hb(e,t){return G(`/v1/newcomer-guide/task/update?${Ie}`,{task_id:e,target_state:t})}async function Ao(e){return await PS(new Uint8Array(await e.arrayBuffer()))}async function co(e,t,r={},n={}){let o=r.signal;if(o?.aborted)throw new DOMException("Aborted","AbortError");let i=URL.parse(e)??new URL(`${await zr()}${e}`),s=CJ(r.body??t),a=new Headers(r.headers),A=(r.method??"GET").toUpperCase(),c=A==="GET"||A==="HEAD";a.has("Content-Type")||a.set("Content-Type","application/json");let{noAuth:l=!1,timeout:g,noAppInfo:d=!1}=n;if(!l&&!a.has("Authorization")){let p;try{p=(await jr()).token}catch(w){throw w instanceof Error?w:hJ(w)&&w.msg?new Error(w.msg,{cause:w}):new Error("Failed to get token")}if(p)a.set("Authorization",p);else throw new Error("Need Login",{cause:{url:i.href,method:A}})}if(s instanceof FormData&&a.delete("Content-Type"),!d){let p=function(w){if(c){let F=i.searchParams;for(let E in w)F.has(E)||F.append(E,w[E])}else if(s instanceof FormData)for(let F in w)s.has(F)||s.append(F,w[F]);else if(Yo(s))for(let F in w)Object.hasOwn(s,F)||(s[F]=w[F])};var C=p;p({app_name:K,tz_name:se,app_version:at})}let f=Object.assign({},r,{signal:PE([o,g?OE(g):null].filter(Hd)),headers:a,method:A,body:c?void 0:a.get("Content-Type")==="application/json"?JSON.stringify(s):s}),u=await fetch(i,f).catch(p=>{throw ci(p,i),p});if(n.onStream&&u.body&&u.ok){let p=n.onStream,w=ai(F=>{if(F.type!=="event")return;let E=F.data==="[DONE]";if(E){p({done:E});return}let b=JSON.parse(F.data);if(b.code!==0)throw new Error(b.msg,{cause:b});p({data:b.data})});for await(let F of Fn(u.body))w.feed(F);return{}}let m=await u.json().catch(()=>{});if(!u.ok)throw new Error(`${u.status}: ${m?.msg||u.statusText}`,{cause:m});if(!m)throw new Error("Response body is not json");if(typeof m.code=="number"&&m.code!==0)throw(m.code===1003||m.code===1006)&&T({ERR_MUST_LOGIN:!0}),new Error(m.msg,{cause:m});return We("ERR_MUST_LOGIN"),Object.hasOwn(m,"data")?m.data:m}function hJ(e){return Yo(e)&&Object.hasOwn(e,"code")&&Object.hasOwn(e,"data")&&Object.hasOwn(e,"msg")&&typeof e.code=="number"}function CJ(e){if(e instanceof FormData){let t=new FormData;for(let[r,n]of e)t.append(r,n);return t}else return yd(e)}async function kr(e,t,r){let n,o;(e==="gpt-3.5"||e==="gpt-4")&&t&&(n={[e]:wd({total:t.total,remain:t.remain,extraTotal:t.extra_total,extraRemain:t.extra_quota,period:t.remain_period,used:t.used},Hd)}),r&&(o={videoSummary:{total:r.total.video_summary,used:r.used.video_summary,remain:r.total.video_summary-r.used.video_summary},chatFile:{total:r.total.chat_file,used:r.used.chat_file,remain:r.total.chat_file-r.used.chat_file},painter:{total:r.total.painter,used:r.used.painter,remain:r.total.painter-r.used.painter},tts:{total:r.total.tts,used:r.used.tts,remain:r.total.tts-r.used.tts},artifacts:{total:r.total.artifacts,used:r.used.artifacts,remain:r.total.artifacts-r.used.artifacts},thinking_mode:{total:r.total.thinking_mode,used:r.used.thinking_mode,remain:r.total.thinking_mode-r.used.thinking_mode},data_analysis:{total:r.total.data_analysis,used:r.used.data_analysis,remain:r.total.data_analysis-r.used.data_analysis},text_to_image:{total:r.total.text_to_image,used:r.used.text_to_image,remain:r.total.text_to_image-r.used.text_to_image},search:{total:r.total.search,used:r.used.search,remain:r.total.search-r.used.search},...r.total.short_video&&{shortVideo:{total:r.total.short_video,used:r.used.short_video,remain:r.total.short_video-r.used.short_video}}}),await Rn({...n&&n,...o&&{trial:o}})}var Cb=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),Bb=e=>({httpHandler:e.httpHandler()});var Eb;(function(e){e.HEADER="header",e.QUERY="query"})(Eb||(Eb={}));var Df;(function(e){e.HEADER="header",e.QUERY="query"})(Df||(Df={}));var di;(function(e){e.HTTP="http",e.HTTPS="https"})(di||(di={}));var fi;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(fi||(fi={}));var kf;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(kf||(kf={}));var ui="__smithy_context";var yb;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(yb||(yb={}));var Qb;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Qb||(Qb={}));var ne=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=BJ(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function BJ(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var ot=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function EJ(e){return t=>async r=>{let{request:n}=r;return ne.isInstance(n)&&n.body&&e.runtime==="node"&&e.requestHandler?.constructor?.name!=="FetchHttpHandler"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}var yJ={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},wb=e=>({applyToStack:t=>{t.add(EJ(e),yJ)}});var Ff={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},vf=Ff.WHEN_SUPPORTED;var Rf=Ff.WHEN_SUPPORTED,he;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(he||(he={}));var Sb;(function(e){e.HEADER="header",e.TRAILER="trailer"})(Sb||(Sb={}));var bb=he.MD5,xb=he.CRC32;var VA;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(VA||(VA={}));function _b(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}function je(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var Tf=e=>ot.isInstance(e)?e.headers?.date??e.headers?.Date:void 0;var Ii=e=>new Date(Date.now()+e);var Db=(e,t)=>Math.abs(Ii(t).getTime()-e)>=3e5;var Nf=(e,t)=>{let r=Date.parse(e);return Db(r,t)?r-Date.now():t};var Qs=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},YA=async e=>{let t=Qs("context",e.context),r=Qs("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],i=await Qs("signer",r.signer)(n),s=e?.signingRegion,a=e?.signingRegionSet,A=e?.signingName;return{config:r,signer:i,signingRegion:s,signingRegionSet:a,signingName:A}},lo=class{async sign(t,r,n){if(!ne.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await YA(n),{config:i,signer:s}=o,{signingRegion:a,signingName:A}=o,c=n.context;if(c?.authSchemes?.length??!1){let[g,d]=c.authSchemes;g?.name==="sigv4a"&&d?.name==="sigv4"&&(a=d?.signingRegion??a,A=d?.signingName??A)}return await s.sign(t,{signingDate:Ii(i.systemClockOffset),signingRegion:a,signingService:A})}errorHandler(t){return r=>{let n=r.ServerTime??Tf(r.$response);if(n){let o=Qs("config",t.config),i=o.systemClockOffset;o.systemClockOffset=Nf(n,o.systemClockOffset),o.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=Tf(t);if(n){let o=Qs("config",r.config);o.systemClockOffset=Nf(n,o.systemClockOffset)}}};var ws=class extends lo{async sign(t,r,n){if(!ne.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:i,signingRegion:s,signingRegionSet:a,signingName:A}=await YA(n),l=(await o.sigv4aSigningRegionSet?.()??a??[s]).join(",");return await i.sign(t,{signingDate:Ii(o.systemClockOffset),signingRegion:l,signingService:A})}};var Gt=e=>e[ui]||(e[ui]={});var it=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var kb=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let o of e)o.schemeId.split("#")[1]===n&&r.push(o);for(let n of e)r.find(({schemeId:o})=>o===n.schemeId)||r.push(n);return r};function wJ(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var Mf=(e,t)=>(r,n)=>async o=>{let i=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),s=e.authSchemePreference?await e.authSchemePreference():[],a=kb(i,s),A=wJ(e.httpAuthSchemes),c=Gt(n),l=[];for(let g of a){let d=A.get(g.schemeId);if(!d){l.push(`HttpAuthScheme \`${g.schemeId}\` was not enabled for this service.`);continue}let f=d.identityProvider(await t.identityProviderConfigProvider(e));if(!f){l.push(`HttpAuthScheme \`${g.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:u={},signingProperties:m={}}=g.propertiesExtractor?.(e,n)||{};g.identityProperties=Object.assign(g.identityProperties||{},u),g.signingProperties=Object.assign(g.signingProperties||{},m),c.selectedHttpAuthScheme={httpAuthOption:g,identity:await f(g.identityProperties),signer:d.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(o)};var SJ={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Fb=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Mf(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),SJ)}});var vb=(e,t)=>(r,n)=>async o=>{let{response:i}=await r(o);try{let s=await t(i,e);return{response:i,output:s}}catch(s){if(Object.defineProperty(s,"$response",{value:i}),!("$metadata"in s)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{s.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"||n.logger?.warn?.(a)}typeof s.$responseBodyText<"u"&&s.$response&&(s.$response.body=s.$responseBodyText);try{if(ot.isInstance(i)){let{headers:A={}}=i,c=Object.entries(A);s.$metadata={httpStatusCode:i.statusCode,requestId:Uf(/^x-[\w-]+-request-?id$/,c),extendedRequestId:Uf(/^x-[\w-]+-id-2$/,c),cfId:Uf(/^x-[\w-]+-cf-id$/,c)}}}catch{}}throw s}},Uf=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1];var Rb=(e,t)=>(r,n)=>async o=>{let i=e,s=n.endpointV2?.url&&i.urlParser?async()=>i.urlParser(n.endpointV2.url):i.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let a=await t(o.input,{...e,endpoint:s});return r({...o,request:a})};var bJ={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ss={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function WA(e,t,r){return{applyToStack:n=>{n.add(vb(e,r),bJ),n.add(Rb(e,t),Ss)}}}var hIe={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Ss.name};var xJ=e=>t=>{throw t},_J=(e,t)=>{},Tb=e=>(t,r)=>async n=>{if(!ne.isInstance(n.request))return t(n);let i=Gt(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:s={}},identity:a,signer:A}=i,c=await t({...n,request:await A.sign(n.request,a,s)}).catch((A.errorHandler||xJ)(s));return(A.successHandler||_J)(c.response,s),c};var Pf={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Nb=e=>({applyToStack:t=>{t.addRelativeTo(Tb(e),Pf)}});var Xr=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Zr={},go=new Array(64);for(let e=0,t=65,r=90;e+t<=r;e++){let n=String.fromCharCode(e+t);Zr[n]=e,go[e]=n}for(let e=0,t=97,r=122;e+t<=r;e++){let n=String.fromCharCode(e+t),o=e+26;Zr[n]=o,go[o]=n}for(let e=0;e<10;e++){Zr[e.toString(10)]=e+52;let t=e.toString(10),r=e+52;Zr[t]=r,go[r]=t}Zr["+"]=62;go[62]="+";Zr["/"]=63;go[63]="/";var Tn=6,fo=8,Mb=63;var uo=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;let r=new ArrayBuffer(t),n=new DataView(r);for(let o=0;o<e.length;o+=4){let i=0,s=0;for(let c=o,l=o+3;c<=l;c++)if(e[c]!=="="){if(!(e[c]in Zr))throw new TypeError(`Invalid character ${e[c]} in base64 string.`);i|=Zr[e[c]]<<(l-c)*Tn,s+=Tn}else i>>=Tn;let a=o/4*3;i>>=s%fo;let A=Math.floor(s/fo);for(let c=0;c<A;c++){let l=(A-c-1)*fo;n.setUint8(a+c,(i&255<<l)>>l)}}return new Uint8Array(r)};var Dt=e=>new TextEncoder().encode(e);var dr=e=>typeof e=="string"?Dt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Nn=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function $r(e){let t;typeof e=="string"?t=Dt(e):t=e;let r=typeof t=="object"&&typeof t.length=="number",n=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let o="";for(let i=0;i<t.length;i+=3){let s=0,a=0;for(let c=i,l=Math.min(i+3,t.length);c<l;c++)s|=t[c]<<(l-c-1)*fo,a+=fo;let A=Math.ceil(a/Tn);s<<=A*Tn-a;for(let c=1;c<=A;c++){let l=(A-c)*Tn;o+=go[(s&Mb<<l)>>l]}o+="==".slice(0,4-A)}return o}function Ub(e,t="utf-8"){return t==="base64"?$r(e):Nn(e)}function Pb(e,t){return t==="base64"?en.mutate(uo(e)):en.mutate(Dt(e))}var en=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return Pb(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return Ub(this,t)}};var DJ=typeof ReadableStream=="function"?ReadableStream:function(){},jA=class extends DJ{};var bs=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);var Ob=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:o})=>{if(!bs(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=o??$r;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let s=new TransformStream({start(){},async transform(A,c){t.update(A),c.enqueue(A)},async flush(A){let c=await t.digest(),l=i(c);if(e!==l){let g=new Error(`Checksum mismatch: expected "${e}" but received "${l}" in response header "${n}".`);A.error(g)}else A.terminate()}});r.pipeThrough(s);let a=s.readable;return Object.setPrototypeOf(a,jA.prototype),a};var Gb=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:i,streamHasher:s}=t,a=r!==void 0&&n!==void 0&&o!==void 0&&i!==void 0&&s!==void 0,A=a?s(o,e):void 0,c=e.getReader();return new ReadableStream({async pull(l){let{value:g,done:d}=await c.read();if(d){if(l.enqueue(`0\r
`),a){let f=r(await A);l.enqueue(`${i}:${f}\r
`),l.enqueue(`\r
`)}l.close()}else l.enqueue(`${(n(g)||0).toString(16)}\r
${g}\r
`)}})};async function qb(e,t){let r=0,n=[],o=e.getReader(),i=!1;for(;!i;){let{done:A,value:c}=await o.read();if(c&&(n.push(c),r+=c?.byteLength??0),r>=t)break;i=A}o.releaseLock();let s=new Uint8Array(Math.min(t,r)),a=0;for(let A of n){if(A.byteLength>s.byteLength-a){s.set(A.subarray(0,s.byteLength-a),a);break}else s.set(A,a);a+=A.length}return s}var fr=e=>encodeURIComponent(e).replace(/[!'()*]/g,kJ),kJ=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function Hb(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=fr(r),Array.isArray(n))for(let o=0,i=n.length;o<i;o++)t.push(`${r}=${fr(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${fr(n)}`),t.push(o)}}return t.join("&")}function Of(e,t){return new Request(e,t)}function Lb(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var Gf={supported:void 0},XA=class e{static create(t){return typeof t?.handle=="function"?t:new e(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),Gf.supported===void 0&&(Gf.supported=typeof Request<"u"&&"keepalive"in Of("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);let n=this.config.requestTimeout,o=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let p=new Error("Request aborted");return p.name="AbortError",Promise.reject(p)}let s=t.path,a=Hb(t.query||{});a&&(s+=`?${a}`),t.fragment&&(s+=`#${t.fragment}`);let A="";if(t.username!=null||t.password!=null){let p=t.username??"",w=t.password??"";A=`${p}:${w}@`}let{port:c,method:l}=t,g=`${t.protocol}//${A}${t.hostname}${c?`:${c}`:""}${s}`,d=l==="GET"||l==="HEAD"?void 0:t.body,f={body:d,headers:new Headers(t.headers),method:l,credentials:i};this.config?.cache&&(f.cache=this.config.cache),d&&(f.duplex="half"),typeof AbortController<"u"&&(f.signal=r),Gf.supported&&(f.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(f,this.config.requestInit(t));let u=()=>{},m=Of(g,f),C=[fetch(m).then(p=>{let w=p.headers,F={};for(let b of w.entries())F[b[0]]=b[1];return p.body!=null?{response:new ot({headers:F,reason:p.statusText,statusCode:p.status,body:p.body})}:p.blob().then(b=>({response:new ot({headers:F,reason:p.statusText,statusCode:p.status,body:b})}))}),Lb(n)];return r&&C.push(new Promise((p,w)=>{let F=()=>{let E=new Error("Request aborted");E.name="AbortError",w(E)};if(typeof r.addEventListener=="function"){let E=r;E.addEventListener("abort",F,{once:!0}),u=()=>E.removeEventListener("abort",F)}else r.onabort=F})),Promise.race(C).finally(u)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}};var ZA=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):FJ(e):vJ(e);async function FJ(e){let t=await RJ(e),r=uo(t);return new Uint8Array(r)}async function vJ(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:A}=await r.read();A&&(t.push(A),o+=A.length),n=a}let i=new Uint8Array(o),s=0;for(let a of t)i.set(a,s),s+=a.length;return i}function RJ(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let o=n.result??"",i=o.indexOf(","),s=i>-1?i+1:o.length;t(o.substring(s))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}var Kb={},qf={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Kb[e]=t,qf[t]=e}function $A(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in qf)t[r/2]=qf[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function be(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Kb[e[r]];return t}var Jb="The stream has already been transformed.",Hf=e=>{if(!zb(e)&&!bs(e)){let o=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let t=!1,r=async()=>{if(t)throw new Error(Jb);return t=!0,await ZA(e)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async o=>{let i=await r();if(o==="base64")return $r(i);if(o==="hex")return be(i);if(o===void 0||o==="utf8"||o==="utf-8")return Nn(i);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(Jb);if(t=!0,zb(e))return n(e);if(bs(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},zb=e=>typeof Blob=="function"&&e instanceof Blob;async function Vb(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}var Mn=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return en.mutate(e);if(!e)return en.mutate(new Uint8Array);let r=t.streamCollector(e);return en.mutate(await r)};function xs(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var tn=class e{constructor(t,r=new Map){this.namespace=t,this.schemas=r}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);e.for(this.getNamespace(t)).schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}getBaseException(){for(let[t,r]of this.schemas.entries())if(t.startsWith("smithy.ts.sdk.synthetic.")&&t.endsWith("ServiceException"))return r}find(t){return[...this.schemas.values()].find(t)}destroy(){e.registries.delete(this.namespace),this.schemas.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}getNamespace(t){return this.normalizeShapeId(t).split("#")[0]}};tn.registries=new Map;var Kf=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};var NJ=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&ox.warn(nx(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},MJ=Math.ceil(34028234663852886e22),Yb=e=>{let t=NJ(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>MJ)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Lf=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var Wb=e=>Xb(e,16),jb=e=>Xb(e,8),Xb=(e,t)=>{let r=Lf(e);if(r!==void 0&&UJ(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},UJ=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Jf=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Zb=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},mi=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return ox.warn(nx(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var $b=e=>Yb(typeof e=="string"?tc(e):e),PJ=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,tc=e=>{let t=e.match(PJ);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var ex=e=>Lf(typeof e=="string"?tc(e):e);var tx=e=>Wb(typeof e=="string"?tc(e):e),rx=e=>jb(typeof e=="string"?tc(e):e),nx=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),ox={warn:console.warn};var OJ=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ix=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function zf(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),i=e.getUTCHours(),s=e.getUTCMinutes(),a=e.getUTCSeconds(),A=o<10?`0${o}`:`${o}`,c=i<10?`0${i}`:`${i}`,l=s<10?`0${s}`:`${s}`,g=a<10?`0${a}`:`${a}`;return`${OJ[n]}, ${A} ${ix[r]} ${t} ${c}:${l}:${g} GMT`}var ghe=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var GJ=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Vf=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=GJ.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,i,s,a,A,c,l]=t,g=tx(sx(n)),d=_s(o,"month",1,12),f=_s(i,"day",1,31),u=qJ(g,d,f,{hours:s,minutes:a,seconds:A,fractionalMilliseconds:c});return l.toUpperCase()!="Z"&&u.setTime(u.getTime()-zJ(l)),u},dhe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),fhe=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),uhe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var qJ=(e,t,r,n)=>{let o=t-1;return LJ(e,o,r),new Date(Date.UTC(e,o,r,_s(n.hours,"hour",0,23),_s(n.minutes,"minute",0,59),_s(n.seconds,"seconds",0,60),JJ(n.fractionalMilliseconds)))};var Ihe=50*365*24*60*60*1e3;var HJ=[31,28,31,30,31,30,31,31,30,31,30,31],LJ=(e,t,r)=>{let n=HJ[t];if(t===1&&KJ(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${ix[t]} in ${e}: ${r}`)},KJ=e=>e%4===0&&(e%100!==0||e%400===0),_s=(e,t,r,n)=>{let o=rx(sx(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},JJ=e=>e==null?0:$b("0."+e)*1e3,zJ=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},sx=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var Un=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Un.from=e=>e&&typeof e=="object"&&(e instanceof Un||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Un(String(e)):Un(JSON.stringify(e));Un.fromObject=Un.from;var Yf=(e,t,r,n,o,i)=>{if(t!=null&&t[r]!==void 0){let s=n();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,i?s.split("/").map(a=>xs(a)).join("/"):xs(s))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};function rc(e,t){return new Wf(e,t)}var Wf=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let i of this.resolvePathStack)i(this.path);return new ne({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(i=>{this.path=Yf(i,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}};function Ax(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var nc=class{constructor(t){this.authSchemes=new Map;for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}};var XJ=e=>t=>jf(t)&&t.expiration.getTime()-Date.now()<e;var cx=XJ(3e5),jf=e=>e.expiration!==void 0,lx=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,i,s,a=!1,A=async c=>{i||(i=n(c));try{o=await i,s=!0,a=!1}finally{i=void 0}return o};return t===void 0?async c=>((!s||c?.forceRefresh)&&(o=await A(c)),o):async c=>((!s||c?.forceRefresh)&&(o=await A(c)),a?o:r(o)?(t(o)&&await A(c),o):(a=!0,o))};var gx=(e,t,r)=>{let n,o,i,s=!1,a=async()=>{o||(o=e());try{n=await o,i=!0,s=!1}finally{o=void 0}return n};return t===void 0?async A=>((!i||A?.forceRefresh)&&(n=await a()),n):async A=>((!i||A?.forceRefresh)&&(n=await a()),s?n:r&&!r(n)?(s=!0,n):(t(n)&&await a(),n))};var dx=e=>(e.sigv4aSigningRegionSet=Xr(e.sigv4aSigningRegionSet),e);var fx="X-Amz-Algorithm",ux="X-Amz-Credential",Zf="X-Amz-Date",Ix="X-Amz-SignedHeaders",px="X-Amz-Expires",$f="X-Amz-Signature",eu="X-Amz-Security-Token";var tu="authorization",ru=Zf.toLowerCase(),ZJ="date",mx=[tu,ru,ZJ],hx=$f.toLowerCase(),Ds="x-amz-content-sha256",Cx=eu.toLowerCase();var Bx={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Ex=/^proxy-/,yx=/^sec-/;var oc="AWS4-HMAC-SHA256";var Qx="AWS4-HMAC-SHA256-PAYLOAD",wx="UNSIGNED-PAYLOAD",Sx=50,nu="aws4_request",bx=3600*24*7;var ic={},ou=[],sc=(e,t,r)=>`${e}/${t}/${r}/${nu}`,_x=async(e,t,r,n,o)=>{let i=await xx(e,t.secretAccessKey,t.accessKeyId),s=`${r}:${n}:${o}:${be(i)}:${t.sessionToken}`;if(s in ic)return ic[s];for(ou.push(s);ou.length>Sx;)delete ic[ou.shift()];let a=`AWS4${t.secretAccessKey}`;for(let A of[r,n,o,nu])a=await xx(e,a,A);return ic[s]=a};var xx=(e,t,r)=>{let n=new e(t);return n.update(dr(r)),n.digest()};var ac=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let i=o.toLowerCase();(i in Bx||t?.has(i)||Ex.test(i)||yx.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[o].trim().replace(/\s+/g," "))}return n};var Ac=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var ks=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===Ds)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Ac(t)){let n=new r;return n.update(dr(t)),be(await n.digest())}return wx};var cc=class{format(t){let r=[];for(let i of Object.keys(t)){let s=Dt(i);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(t[i]))}let n=new Uint8Array(r.reduce((i,s)=>i+s.byteLength,0)),o=0;for(let i of r)n.set(i,o),o+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);let s=new Uint8Array(i.buffer);return s.set(t.value,3),s;case"string":let a=Dt(t.value),A=new DataView(new ArrayBuffer(3+a.byteLength));A.setUint8(0,7),A.setUint16(1,a.byteLength,!1);let c=new Uint8Array(A.buffer);return c.set(a,3),c;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(iu.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!$J.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let g=new Uint8Array(17);return g[0]=9,g.set($A(t.value.replace(/\-/g,"")),1),g}}},Dx;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Dx||(Dx={}));var $J=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,iu=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&kx(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&kx(t),parseInt(be(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function kx(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var su=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var au=(e,t={})=>{let{headers:r,query:n={}}=ne.clone(e);for(let o of Object.keys(r)){let i=o.toLowerCase();(i.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(i)||t.hoistableHeaders?.has(i))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}};var lc=e=>{e=ne.clone(e);for(let t of Object.keys(e.headers))mx.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Au=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===hx)continue;let o=fr(n);t.push(o);let i=e[n];typeof i=="string"?r[o]=`${o}=${fr(i)}`:Array.isArray(i)&&(r[o]=i.slice(0).reduce((s,a)=>s.concat([`${o}=${fr(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")};var Fx=e=>ez(e).toISOString().replace(/\.\d{3}Z$/,"Z"),ez=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var Fs=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:i,uriEscapePath:s=!0}){this.service=o,this.sha256=i,this.uriEscapePath=s,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=it(n),this.credentialProvider=it(r)}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Au(t)}
${o.map(i=>`${i}:${r[i]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n,o){let i=new this.sha256;i.update(dr(n));let s=await i.digest();return`${o}
${t}
${r}
${be(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let i of t.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return fr(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=Fx(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}};var po=class extends Fs{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:i,uriEscapePath:s=!0}){super({applyChecksum:t,credentials:r,region:n,service:o,sha256:i,uriEscapePath:s}),this.headerFormatter=new cc}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:i,unhoistableHeaders:s,signableHeaders:a,hoistableHeaders:A,signingRegion:c,signingService:l}=r,g=await this.credentialProvider();this.validateResolvedCredentials(g);let d=c??await this.regionProvider(),{longDate:f,shortDate:u}=this.formatDate(n);if(o>bx)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let m=sc(u,d,l??this.service),C=au(lc(t),{unhoistableHeaders:s,hoistableHeaders:A});g.sessionToken&&(C.query[eu]=g.sessionToken),C.query[fx]=oc,C.query[ux]=`${g.accessKeyId}/${m}`,C.query[Zf]=f,C.query[px]=o.toString(10);let p=ac(C,i,a);return C.query[Ix]=this.getCanonicalHeaderList(p),C.query[$f]=await this.getSignature(f,m,this.getSigningKey(g,d,u,l),this.createCanonicalRequest(C,p,await ks(t,this.sha256))),C}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:i,signingService:s}){let a=i??await this.regionProvider(),{shortDate:A,longDate:c}=this.formatDate(n),l=sc(A,a,s??this.service),g=await ks({headers:{},body:r},this.sha256),d=new this.sha256;d.update(t);let f=be(await d.digest()),u=[Qx,c,l,o,f,g].join(`
`);return this.signString(u,{signingDate:n,signingRegion:a,signingService:s})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(s=>({message:t.message,signature:s}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let i=await this.credentialProvider();this.validateResolvedCredentials(i);let s=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),A=new this.sha256(await this.getSigningKey(i,s,a,o));return A.update(dr(t)),be(await A.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:i,signingService:s}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let A=i??await this.regionProvider(),c=lc(t),{longDate:l,shortDate:g}=this.formatDate(r),d=sc(g,A,s??this.service);c.headers[ru]=l,a.sessionToken&&(c.headers[Cx]=a.sessionToken);let f=await ks(c,this.sha256);!su(Ds,c.headers)&&this.applyChecksum&&(c.headers[Ds]=f);let u=ac(c,o,n),m=await this.getSignature(l,d,this.getSigningKey(a,A,g,s),this.createCanonicalRequest(c,u,f));return c.headers[tu]=`${oc} Credential=${a.accessKeyId}/${d}, SignedHeaders=${this.getCanonicalHeaderList(u)}, Signature=${m}`,c}async getSignature(t,r,n,o){let i=await this.createStringToSign(t,r,o,oc),s=new this.sha256(await n);return s.update(dr(i)),be(await s.digest())}getSigningKey(t,r,n,o){return _x(this.sha256,t,n,r,o||this.service)}};var vx=e=>{let t=!1,r;e.credentials&&(t=!0,r=lx(e.credentials,cx,jf)),r||(e.credentialDefaultProvider?r=Xr(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):r=async()=>{throw new Error("`credentials` is missing")});let n=async()=>r({callerClientConfig:e}),{signingEscapePath:o=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:s}=e,a;return e.signer?a=Xr(e.signer):e.regionInfoProvider?a=()=>Xr(e.region)().then(async A=>[await e.regionInfoProvider(A,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},A]).then(([A,c])=>{let{signingRegion:l,signingService:g}=A;e.signingRegion=e.signingRegion||l||c,e.signingName=e.signingName||g||e.serviceId;let d={...e,credentials:n,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:o},f=e.signerConstructor||po;return new f(d)}):a=async A=>{A=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Xr(e.region)(),properties:{}},A);let c=A.signingRegion,l=A.signingName;e.signingRegion=e.signingRegion||c,e.signingName=e.signingName||l||e.serviceId;let g={...e,credentials:n,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:o},d=e.signerConstructor||po;return new d(g)},{...e,systemClockOffset:i,signingEscapePath:o,credentials:t?async()=>n().then(A=>_b(A,"CREDENTIALS_CODE","e")):n,signer:a}};var mo=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},Pn=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,hi=()=>{let e=[],t=[],r=!1,n=new Set,o=g=>g.sort((d,f)=>Rx[f.step]-Rx[d.step]||Tx[f.priority||"normal"]-Tx[d.priority||"normal"]),i=g=>{let d=!1,f=u=>{let m=mo(u.name,u.aliases);if(m.includes(g)){d=!0;for(let C of m)n.delete(C);return!1}return!0};return e=e.filter(f),t=t.filter(f),d},s=g=>{let d=!1,f=u=>{if(u.middleware===g){d=!0;for(let m of mo(u.name,u.aliases))n.delete(m);return!1}return!0};return e=e.filter(f),t=t.filter(f),d},a=g=>(e.forEach(d=>{g.add(d.middleware,{...d})}),t.forEach(d=>{g.addRelativeTo(d.middleware,{...d})}),g.identifyOnResolve?.(l.identifyOnResolve()),g),A=g=>{let d=[];return g.before.forEach(f=>{f.before.length===0&&f.after.length===0?d.push(f):d.push(...A(f))}),d.push(g),g.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?d.push(f):d.push(...A(f))}),d},c=(g=!1)=>{let d=[],f=[],u={};return e.forEach(C=>{let p={...C,before:[],after:[]};for(let w of mo(p.name,p.aliases))u[w]=p;d.push(p)}),t.forEach(C=>{let p={...C,before:[],after:[]};for(let w of mo(p.name,p.aliases))u[w]=p;f.push(p)}),f.forEach(C=>{if(C.toMiddleware){let p=u[C.toMiddleware];if(p===void 0){if(g)return;throw new Error(`${C.toMiddleware} is not found when adding ${Pn(C.name,C.aliases)} middleware ${C.relation} ${C.toMiddleware}`)}C.relation==="after"&&p.after.push(C),C.relation==="before"&&p.before.push(C)}}),o(d).map(A).reduce((C,p)=>(C.push(...p),C),[])},l={add:(g,d={})=>{let{name:f,override:u,aliases:m}=d,C={step:"initialize",priority:"normal",middleware:g,...d},p=mo(f,m);if(p.length>0){if(p.some(w=>n.has(w))){if(!u)throw new Error(`Duplicate middleware name '${Pn(f,m)}'`);for(let w of p){let F=e.findIndex(b=>b.name===w||b.aliases?.some(B=>B===w));if(F===-1)continue;let E=e[F];if(E.step!==C.step||C.priority!==E.priority)throw new Error(`"${Pn(E.name,E.aliases)}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by "${Pn(f,m)}" middleware with ${C.priority} priority in ${C.step} step.`);e.splice(F,1)}}for(let w of p)n.add(w)}e.push(C)},addRelativeTo:(g,d)=>{let{name:f,override:u,aliases:m}=d,C={middleware:g,...d},p=mo(f,m);if(p.length>0){if(p.some(w=>n.has(w))){if(!u)throw new Error(`Duplicate middleware name '${Pn(f,m)}'`);for(let w of p){let F=t.findIndex(b=>b.name===w||b.aliases?.some(B=>B===w));if(F===-1)continue;let E=t[F];if(E.toMiddleware!==C.toMiddleware||E.relation!==C.relation)throw new Error(`"${Pn(E.name,E.aliases)}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by "${Pn(f,m)}" middleware ${C.relation} "${C.toMiddleware}" middleware.`);t.splice(F,1)}}for(let w of p)n.add(w)}t.push(C)},clone:()=>a(hi()),use:g=>{g.applyToStack(l)},remove:g=>typeof g=="string"?i(g):s(g),removeByTag:g=>{let d=!1,f=u=>{let{tags:m,name:C,aliases:p}=u;if(m&&m.includes(g)){let w=mo(C,p);for(let F of w)n.delete(F);return d=!0,!1}return!0};return e=e.filter(f),t=t.filter(f),d},concat:g=>{let d=a(hi());return d.use(g),d.identifyOnResolve(r||d.identifyOnResolve()||(g.identifyOnResolve?.()??!1)),d},applyToStack:a,identify:()=>c(!0).map(g=>{let d=g.step??g.relation+" "+g.toMiddleware;return Pn(g.name,g.aliases)+" - "+d}),identifyOnResolve(g){return typeof g=="boolean"&&(r=g),r},resolve:(g,d)=>{for(let f of c().map(u=>u.middleware).reverse())g=f(g,d);return g}};return l},Rx={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Tx={high:3,normal:2,low:1};var gc=class{constructor(t){this.config=t,this.middlewareStack=hi()}send(t,r,n){let o=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,s=o===void 0&&this.config.cacheMiddleware===!0,a;if(s){this.handlers||(this.handlers=new WeakMap);let A=this.handlers;A.has(t.constructor)?a=A.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,o),A.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,o);if(i)a(t).then(A=>i(null,A.output),A=>i(A)).catch(()=>{});else return a(t).then(A=>A.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}};var ho=class{constructor(){this.middlewareStack=hi()}static classBuilder(){return new cu}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:i,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:A,smithyContext:c,additionalContext:l,CommandCtor:g}){for(let C of o.bind(this)(g,t,r,n))this.middlewareStack.use(C);let d=t.concat(this.middlewareStack),{logger:f}=r,u={logger:f,clientName:i,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:A,[ui]:{commandInstance:this,...c},...l},{requestHandler:m}=r;return d.resolve(C=>m.handle(C.request,n||{}),u)}},cu=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends ho{static getEndpointParameterInstructions(){return t._ep}constructor(...[n]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=n??{},t._init(this),this.schema=t._operationSchema}resolveMiddleware(n,o,i){return this.resolveMiddlewareWithContext(n,o,i,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}};var qt="***SensitiveInformation***";var dc=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return e.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===e?e.isInstance(t):e.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},gt=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var tz=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=rz(e),i=o.httpStatusCode?o.httpStatusCode+"":void 0,s=new r({name:t?.code||t?.Code||n||i||"UnknownError",$fault:"client",$metadata:o});throw gt(s,t)},Nx=e=>({output:t,parsedBody:r,errorCode:n})=>{tz({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},rz=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var Mx=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Ux=e=>{let t=[];for(let r in fi){let n=fi[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},Px=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var Ox=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),Gx=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var qx=e=>Object.assign(Ux(e),Ox(e));var Hx=e=>Object.assign(Px(e),Gx(e));var lu=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=lu(e[r]));return e};var rn=e=>e!=null;var On=class{trace(){}debug(){}info(){}warn(){}error(){}};function ke(e,t,r){let n,o,i;if(typeof t>"u"&&typeof r>"u")n={},i=e;else{if(n=e,typeof t=="function")return o=t,i=r,nz(n,o,i);i=t}for(let s of Object.keys(i)){if(!Array.isArray(i[s])){n[s]=i[s];continue}oz(n,null,i,s)}return n}var nz=(e,t,r)=>ke(e,Object.entries(r).reduce((n,[o,i])=>(Array.isArray(i)?n[o]=i:typeof i=="function"?n[o]=[t,i()]:n[o]=[t,i],n),{})),oz=(e,t,r,n)=>{if(t!==null){let s=r[n];typeof s=="function"&&(s=[,s]);let[a=iz,A=sz,c=n]=s;(typeof a=="function"&&a(t[c])||typeof a!="function"&&a)&&(e[n]=A(t[c]));return}let[o,i]=r[n];if(typeof i=="function"){let s,a=o===void 0&&(s=i())!=null,A=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=s:A&&(e[n]=i())}else{let s=o===void 0&&i!=null,a=typeof o=="function"&&!!o(i)||typeof o!="function"&&!!o;(s||a)&&(e[n]=i)}},iz=e=>e!=null,sz=e=>e;var Lx=e=>e.toISOString().replace(".000Z","Z");var Kx=(e,t)=>Mn(e,t).then(r=>t.utf8Encoder(r));var Q0=W(y0());var Cu=(e,t)=>Kx(e,t).then(r=>{if(r.length){let n=new Q0.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(A,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(r,!0)}catch(A){throw A&&typeof A=="object"&&Object.defineProperty(A,"$responseBodyText",{value:r}),A}let i="#text",s=Object.keys(o)[0],a=o[s];return a[i]&&(a[s]=a[i],delete a[i]),lu(a)}return{}}),w0=async(e,t)=>{let r=await Cu(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},S0=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};var Ts=[he.CRC32,he.CRC32C,he.SHA1,he.SHA256],b0=[he.SHA256,he.SHA1,he.CRC32,he.CRC32C];var x0=(e,{requestChecksumRequired:t,requestAlgorithmMember:r},n)=>{let o=n?xb:bb;if(!r||!e[r])return t?o:void 0;let i=e[r];if(!Ts.includes(i))throw new Error(`The checksum algorithm "${i}" is not supported by the client. Select one of ${Ts}.`);return i};var Ci=e=>e===he.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var _0=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};var D0=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(n.toLowerCase().startsWith(r))return!0;return!1};var Bi=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Ac(e);var Bu=e=>new TextEncoder().encode(e);var IV=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Bu;function Bt(e){return e instanceof Uint8Array?e:typeof e=="string"?IV(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function Fr(e){return typeof e=="string"?e.length===0:e.byteLength===0}function Ns(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}function Ms(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}var yu=(function(){function e(){this.crc32c=new Eu}return e.prototype.update=function(t){Fr(t)||this.crc32c.update(Bt(t))},e.prototype.digest=function(){return _n(this,void 0,void 0,function(){return br(this,function(t){return[2,Ns(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new Eu},e})();var Eu=(function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Pt(t),i=o.next();!i.done;i=o.next()){var s=i.value;this.checksum=this.checksum>>>8^mV[(this.checksum^s)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e})();var pV=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],mV=Ms(pV);var Qu=(function(){function e(){this.crc32=new Bo}return e.prototype.update=function(t){Fr(t)||this.crc32.update(Bt(t))},e.prototype.digest=function(){return _n(this,void 0,void 0,function(){return br(this,function(t){return[2,Ns(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Bo},e})();var Bo=(function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Pt(t),i=o.next();!i.done;i=o.next()){var s=i.value;this.checksum=this.checksum>>>8^CV[(this.checksum^s)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e})();var hV=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],CV=Ms(hV);var k0=()=>Qu;var uc=(e,t)=>{switch(e){case he.MD5:return t.md5;case he.CRC32:return k0();case he.CRC32C:return yu;case he.SHA1:return t.sha1;case he.SHA256:return t.sha256;default:throw new Error(`Unsupported checksum algorithm: ${e}`)}};var Ic=(e,t)=>{let r=new e;return r.update(dr(t||"")),r.digest()};var F0={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},v0=(e,t)=>(r,n)=>async o=>{if(!ne.isInstance(o.request)||D0("x-amz-checksum-",o.request.headers))return r(o);let{request:i,input:s}=o,{body:a,headers:A}=i,{base64Encoder:c,streamHasher:l}=e,{requestChecksumRequired:g,requestAlgorithmMember:d}=t,f=x0(s,{requestChecksumRequired:g,requestAlgorithmMember:d?.name},!!n.isS3ExpressBucket),u=a,m=A;if(f){switch(f){case he.CRC32:je(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case he.CRC32C:je(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case he.SHA1:je(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case he.SHA256:je(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}let p=Ci(f),w=uc(f,e);if(Bi(a)){let{getAwsChunkedEncodingStream:F,bodyLengthChecker:E}=e;u=F(a,{base64Encoder:c,bodyLengthChecker:E,checksumLocationName:p,checksumAlgorithmFn:w,streamHasher:l}),m={...A,"content-encoding":A["content-encoding"]?`${A["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":A["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":p},delete m["content-length"]}else if(!_0(p,A)){let F=await Ic(w,a);m={...A,[p]:c(F)}}}return await r({...o,request:{...i,headers:m,body:u}})};var pc=(e=[])=>{let t=[];for(let r of b0)!e.includes(r)||!Ts.includes(r)||t.push(r);return t};var R0=e=>{let t=e.lastIndexOf("-");if(t!==-1){let r=e.slice(t+1);if(!r.startsWith("0")){let n=parseInt(r,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1};function wu(e){return new Blob([e]).stream()}var T0=async(e,{checksumAlgorithmFn:t,base64Encoder:r})=>r(await Ic(t,e));var N0=async(e,{config:t,responseAlgorithms:r})=>{let n=pc(r),{body:o,headers:i}=e;for(let s of n){let a=Ci(s),A=i[a];if(A){let c=uc(s,t),{base64Encoder:l}=t;if(Bi(o)){e.body=Ob({expectedChecksum:A,checksumSourceLocation:a,checksum:new c,source:o,base64Encoder:l});return}let g=await T0(o,{checksumAlgorithmFn:c,base64Encoder:l});if(g===A)break;throw new Error(`Checksum mismatch: expected "${g}" but received "${A}" in response header "${a}".`)}}};var M0={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},U0=(e,t)=>(r,n)=>async o=>{if(!ne.isInstance(o.request))return r(o);let i=o.input,s=await r(o),a=s.response,A,{requestValidationModeMember:c,responseAlgorithms:l}=t;if(c&&i[c]==="ENABLED"){let{clientName:g,commandName:d}=n;if(g==="S3Client"&&d==="GetObjectCommand"&&pc(l).every(m=>{let C=Ci(m),p=a.headers[C];return!p||R0(p)}))return s;let u=Bi(a.body);u&&(A=await e.streamCollector(a.body),a.body=wu(A)),await N0(s.response,{config:e,responseAlgorithms:l}),u&&A&&(a.body=wu(A))}return s};var P0=(e,t)=>({applyToStack:r=>{r.add(v0(e,t),F0),r.addRelativeTo(U0(e,t),M0)}});var O0=e=>({...e,requestChecksumCalculation:it(e.requestChecksumCalculation??vf),responseChecksumValidation:it(e.responseChecksumValidation??Rf)});var BV=e=>t=>async r=>{if(!ne.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},EV={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},G0=e=>({applyToStack:t=>{t.add(BV(e),EV)}});var yV=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:i,logger:s,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:A,overrideOutputFilterSensitiveLog:c}=a,l=A??t.inputFilterSensitiveLog,g=c??t.outputFilterSensitiveLog,{$metadata:d,...f}=n.output;return s?.info?.({clientName:o,commandName:i,input:l(r.input),output:g(f),metadata:d}),n}catch(n){let{clientName:o,commandName:i,logger:s,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:A}=a,c=A??t.inputFilterSensitiveLog;throw s?.error?.({clientName:o,commandName:i,input:c(r.input),error:n,metadata:n.$metadata}),n}},QV={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},q0=e=>({applyToStack:t=>{t.add(yV(),QV)}});var H0="X-Amzn-Trace-Id",wV="AWS_LAMBDA_FUNCTION_NAME",SV="_X_AMZN_TRACE_ID",bV=e=>t=>async r=>{let{request:n}=r;if(!ne.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(H0))return t(r);let o=process.env[wV],i=process.env[SV],s=a=>typeof a=="string"&&a.length>0;return s(o)&&s(i)&&(n.headers[H0]=i),t({...r,request:n})},xV={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},L0=e=>({applyToStack:t=>{t.add(bV(e),xV)}});var _V="content-length";function DV(){return(e,t)=>async r=>{let{request:n}=r;return ne.isInstance(n)&&(_V in n.headers||typeof t?.logger?.warn=="function"&&!(t.logger instanceof On)&&t.logger.warn("Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.")),e({...r})}}var kV={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},K0=e=>({applyToStack:t=>{t.add(DV(),kV)}});var J0=e=>(t,r)=>async n=>{let o=await e.region(),i=e.region,s=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(e,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),s=()=>Object.defineProperty(e,"region",{writable:!0,value:i}));try{let a=await t(n);if(r.__s3RegionRedirect){s();let A=await e.region();if(o!==A)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw s(),a}},z0={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function FV(e){return(t,r)=>async n=>{try{return await t(n)}catch(o){if(e.followRegionRedirects&&(o?.$metadata?.httpStatusCode===301||o?.$metadata?.httpStatusCode===400&&o?.name==="IllegalLocationConstraintException")){try{let i=o.$response.headers["x-amz-bucket-region"];r.logger?.debug(`Redirecting from ${await e.region()} to ${i}`),r.__s3RegionRedirect=i}catch(i){throw new Error("Region redirect failed: "+i)}return t(n)}throw o}}}var vV={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},V0=e=>({applyToStack:t=>{t.add(FV(e),vV),t.addRelativeTo(J0(e),z0)}});var Us=class e{data;lastPurgeTime=Date.now();static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;constructor(t={}){this.data=t}get(t){let r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){let t=Date.now();if(!(this.lastPurgeTime+e.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let o=await n.identity;o.expiration&&o.expiration.getTime()<t&&delete this.data[r]}}}};var Eo=class{_identity;isRefreshing;accessed;constructor(t,r=!1,n=Date.now()){this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}};var Ps=class e{createSessionFn;cache;static REFRESH_WINDOW_MS=6e4;constructor(t,r=new Us){this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){let n=r.Bucket,{cache:o}=this,i=o.get(n);return i?i.identity.then(s=>(s.expiration?.getTime()??0)<Date.now()?o.set(n,new Eo(this.getIdentity(n))).identity:((s.expiration?.getTime()??0)<Date.now()+e.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(c=>{o.set(n,new Eo(Promise.resolve(c)))})),s)):o.set(n,new Eo(this.getIdentity(n))).identity}async getIdentity(t){await this.cache.purgeExpired().catch(o=>{});let r=await this.createSessionFn(t);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};var Os;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Os||(Os={}));var W0="Directory",j0="S3Express",X0="sigv4-s3express",mc="X-Amz-S3session-Token",Gs=mc.toLowerCase();var qs=class extends po{async signWithCredentials(t,r,n){let o=Z0(r);t.headers[Gs]=r.sessionToken;let i=this;return $0(i,o),i.signRequest(t,n??{})}async presignWithCredentials(t,r,n){let o=Z0(r);return delete t.headers[Gs],t.headers[mc]=r.sessionToken,t.query=t.query??{},t.query[mc]=r.sessionToken,$0(this,o),this.presign(t,n)}};function Z0(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function $0(e,t){let r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,o=()=>(clearTimeout(r),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=o}var e_=e=>(t,r)=>async n=>{if(r.endpointV2){let o=r.endpointV2,i=o.properties?.authSchemes?.[0]?.name===X0;if((o.properties?.backend===j0||o.properties?.bucketType===W0)&&(je(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),i){let a=n.input.Bucket;if(a){let A=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:a});r.s3ExpressIdentity=A,ne.isInstance(n.request)&&A.sessionToken&&(n.request.headers[Gs]=A.sessionToken)}}}return t(n)},t_={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Su=e=>({applyToStack:t=>{t.add(e_(e),t_)}});var r_=async(e,t,r,n)=>{let o=await n.signWithCredentials(r,e,{});if(o.headers["X-Amz-Security-Token"]||o.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return o};var RV=e=>t=>{throw t},TV=(e,t)=>{};var n_=e=>(t,r)=>async n=>{if(!ne.isInstance(n.request))return t(n);let i=Gt(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:s={}},identity:a,signer:A}=i,c;r.s3ExpressIdentity?c=await r_(r.s3ExpressIdentity,s,n.request,await e.signer()):c=await A.sign(n.request,a,s);let l=await t({...n,request:c}).catch((A.errorHandler||RV)(s));return(A.successHandler||TV)(l.response,s),l},bu=e=>({applyToStack:t=>{t.addRelativeTo(n_(e),Pf)}});var o_=(e,{session:t})=>{let[r,n]=t;return{...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,followRegionRedirects:e.followRegionRedirects??!1,s3ExpressIdentityProvider:e.s3ExpressIdentityProvider??new Ps(async o=>r().send(new n({Bucket:o,SessionMode:"ReadWrite"}))),bucketEndpoint:e.bucketEndpoint??!1}};var NV={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},MV=3e3,UV=e=>(t,r)=>async n=>{let o=await t(n),{response:i}=o;if(!ot.isInstance(i))return o;let{statusCode:s,body:a}=i;if(s<200||s>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return o;let c=a,l=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([c,l]=await Vb(a)),i.body=l;let g=await PV(c,{streamCollector:async f=>qb(f,MV)});typeof c?.destroy=="function"&&c.destroy();let d=e.utf8Encoder(g.subarray(g.length-16));if(g.length===0&&NV[r.commandName]){let f=new Error("S3 aborted request");throw f.name="InternalError",f}return d&&d.endsWith("</Error>")&&(i.statusCode=400),o},PV=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),OV={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},hc=e=>({applyToStack:t=>{t.addRelativeTo(UV(e),OV)}});var i_=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function s_(e){return(t,r)=>async n=>{if(e.bucketEndpoint){let o=r.endpointV2;if(o){let i=n.input.Bucket;if(typeof i=="string")try{let s=new URL(i);r.endpointV2={...o,url:s}}catch(s){let a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"||r.logger?.warn?.(a),s}}}return t(n)}}var a_={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function GV({bucketEndpoint:e}){return t=>async r=>{let{input:{Bucket:n}}=r;if(!e&&typeof n=="string"&&!i_(n)&&n.indexOf("/")>=0){let o=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw o.name="InvalidBucketName",o}return t({...r})}}var qV={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},A_=e=>({applyToStack:t=>{t.add(GV(e),qV),t.addRelativeTo(s_(e),a_)}});var HV=void 0;function LV(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function c_(e){let t=Xr(e.userAgentAppId??HV);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{let r=await t();if(!LV(r)){let n=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof r!="string"?n?.warn("userAgentAppId must be a string or undefined."):r.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return r}}}var Cc=class{constructor({size:t,params:r}){this.data=new Map,this.parameters=[],this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),i=0;for(;;){let{value:s,done:a}=o.next();if(this.data.delete(s),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let i=String(t[o]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}};var KV=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Hs=e=>KV.test(e)||e.startsWith("[")&&e.endsWith("]");var JV=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ls=(e,t=!1)=>{if(!t)return JV.test(e);let r=e.split(".");for(let n of r)if(!Ls(n))return!1;return!0};var yo={};var on="endpoints";function Yt(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Yt(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Yt).join(", ")})`:JSON.stringify(e,null,2)}var Ce=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var l_=(e,t)=>e===t;var g_=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new Ce(`Path: '${e}' does not end with ']'`);let i=n.slice(o+1,-1);if(Number.isNaN(parseInt(i)))throw new Ce(`Invalid array index: '${i}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(i)}else r.push(n)}return r};var Bc=(e,t)=>g_(t).reduce((r,n)=>{if(typeof r!="object")throw new Ce(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var d_=e=>e!=null;var f_=e=>!e;var xu={[di.HTTP]:80,[di.HTTPS]:443},u_=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:d,port:f,protocol:u="",path:m="",query:C={}}=e,p=new URL(`${u}//${d}${f?`:${f}`:""}${m}`);return p.search=Object.entries(C).map(([w,F])=>`${w}=${F}`).join("&"),p}return new URL(e)}catch{return null}})();if(!t)return null;let r=t.href,{host:n,hostname:o,pathname:i,protocol:s,search:a}=t;if(a)return null;let A=s.slice(0,-1);if(!Object.values(di).includes(A))return null;let c=Hs(o),l=r.includes(`${n}:${xu[A]}`)||typeof e=="string"&&e.includes(`${n}:${xu[A]}`),g=`${n}${l?`:${xu[A]}`:""}`;return{scheme:A,authority:g,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}};var I_=(e,t)=>e===t;var p_=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var m_=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var h_={booleanEquals:l_,getAttr:Bc,isSet:d_,isValidHostLabel:Ls,not:f_,parseURL:u_,stringEquals:I_,substring:p_,uriEncode:m_};var Ec=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let i=e.indexOf("{",o);if(i===-1){r.push(e.slice(o));break}r.push(e.slice(o,i));let s=e.indexOf("}",i);if(s===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[s+1]==="}"&&(r.push(e.slice(i+1,s)),o=s+2);let a=e.substring(i+1,s);if(a.includes("#")){let[A,c]=a.split("#");r.push(Bc(n[A],c))}else r.push(n[a]);o=s+1}return r.join("")};var C_=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var qn=(e,t,r)=>{if(typeof e=="string")return Ec(e,r);if(e.fn)return yc(e,r);if(e.ref)return C_(e,r);throw new Ce(`'${t}': ${String(e)} is not a string, function or reference.`)};var yc=({fn:e,argv:t},r)=>{let n=t.map(i=>["boolean","number"].includes(typeof i)?i:qn(i,"arg",r)),o=e.split(".");return o[0]in yo&&o[1]!=null?yo[o[0]][o[1]](...n):h_[e](...n)};var B_=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Ce(`'${e}' is already defined in Reference Record.`);let n=yc(t,r);return r.logger?.debug?.(`${on} evaluateCondition: ${Yt(t)} = ${Yt(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var Ei=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:i}=B_(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};i&&(r[i.name]=i.value,t.logger?.debug?.(`${on} assign: ${i.name} := ${Yt(i.value)}`))}return{result:!0,referenceRecord:r}};var E_=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(i=>{let s=qn(i,"Header value entry",t);if(typeof s!="string")throw new Ce(`Header '${n}' value '${s}' is not a string`);return s})}),{});var _u=(e,t)=>{if(Array.isArray(e))return e.map(r=>_u(r,t));switch(typeof e){case"string":return Ec(e,t);case"object":if(e===null)throw new Ce(`Unexpected endpoint property: ${e}`);return Qc(e,t);case"boolean":return e;default:throw new Ce(`Unexpected endpoint property type: ${typeof e}`)}};var Qc=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:_u(o,t)}),{});var y_=(e,t)=>{let r=qn(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw n}throw new Ce(`Endpoint URL must be a string, got ${typeof r}`)};var Q_=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:i}=Ei(r,t);if(!o)return;let s={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:A,headers:c}=n;return t.logger?.debug?.(`${on} Resolving endpoint from template: ${Yt(n)}`),{...c!=null&&{headers:E_(c,s)},...A!=null&&{properties:Qc(A,s)},url:y_(a,s)}};var w_=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:i}=Ei(r,t);if(o)throw new Ce(qn(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))};var S_=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:i}=Ei(r,t);if(o)return wc(n,{...t,referenceRecord:{...t.referenceRecord,...i}})};var wc=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=Q_(r,t);if(n)return n}else if(r.type==="error")w_(r,t);else if(r.type==="tree"){let n=S_(r,t);if(n)return n}else throw new Ce(`Unknown endpoint rule: ${r}`);throw new Ce("Rules evaluation failed")};var Du=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:i}=e;t.logger?.debug?.(`${on} Initial EndpointParams: ${Yt(r)}`);let s=Object.entries(o).filter(([,c])=>c.default!=null).map(([c,l])=>[c,l.default]);if(s.length>0)for(let[c,l]of s)r[c]=r[c]??l;let a=Object.entries(o).filter(([,c])=>c.required).map(([c])=>c);for(let c of a)if(r[c]==null)throw new Ce(`Missing required parameter: '${c}'`);let A=wc(i,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${on} Resolved endpoint: ${Yt(A)}`),A};var ku=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!ku(r))return!1;return!0}return!(!Ls(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Hs(e))};var b_=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,i,s,...a]=t;if(r!=="arn"||n===""||o===""||a.join(":")==="")return null;let A=a.map(c=>c.split("/")).flat();return{partition:n,service:o,region:i,accountId:s,resourceId:A}};var x_={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var VV=x_,YV="",__=e=>{let{partitions:t}=VV;for(let n of t){let{regions:o,outputs:i}=n;for(let[s,a]of Object.entries(o))if(s===e)return{...i,...a}}for(let n of t){let{regionRegex:o,outputs:i}=n;if(new RegExp(o).test(e))return{...i}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}};var D_=()=>YV;var Fu={isVirtualHostableS3Bucket:ku,parseArn:b_,partition:__};yo.aws=Fu;var WV=/\d{12}\.ddb/;async function k_(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&je(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let i=await t.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?je(e,"RETRY_MODE_ADAPTIVE","F"):je(e,"RETRY_MODE_STANDARD","E"):je(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let i=e.endpointV2;switch(String(i?.url?.hostname).match(WV)&&je(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":je(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":je(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":je(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let i=o;i.accountId&&je(e,"RESOLVED_ACCOUNT_ID","T");for(let[s,a]of Object.entries(i.$source??{}))je(e,s,a)}}var vu="user-agent",Sc="x-amz-user-agent";var F_=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,v_=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g;function R_(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=1024){t.length?t+=","+n:t+=n;continue}break}return t}var jV=e=>(t,r)=>async n=>{let{request:o}=n;if(!ne.isInstance(o))return t(n);let{headers:i}=o,s=r?.userAgent?.map(bc)||[],a=(await e.defaultUserAgentProvider()).map(bc);await k_(r,e,n);let A=r;a.push(`m/${R_(Object.assign({},r.__smithy_context?.features,A.__aws_sdk_context?.features))}`);let c=e?.customUserAgent?.map(bc)||[],l=await e.userAgentAppId();l&&a.push(bc([`app/${l}`]));let g=D_(),d=(g?[g]:[]).concat([...a,...s,...c]).join(" "),f=[...a.filter(u=>u.startsWith("aws-sdk-")),...c].join(" ");return e.runtime!=="browser"?(f&&(i[Sc]=i[Sc]?`${i[vu]} ${f}`:f),i[vu]=d):i[Sc]=d,t({...n,request:o})},bc=e=>{let t=e[0].split("/").map(s=>s.replace(F_,"-")).join("/"),r=e[1]?.replace(v_,"-"),n=t.indexOf("/"),o=t.substring(0,n),i=t.substring(n+1);return o==="api"&&(i=i.toLowerCase()),[o,i,r].filter(s=>s&&s.length>0).reduce((s,a,A)=>{switch(A){case 0:return a;case 1:return`${s}/${a}`;default:return`${s}#${a}`}},"")},XV={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},M_=e=>({applyToStack:t=>{t.add(jV(e),XV)}});var U_=!1;var P_=!1;var xc=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Tu=e=>xc(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var O_=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{if(typeof t=="string")return Tu(t);let n=await t();return Tu(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return xc(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})};var G_=e=>Object.assign(e,{eventStreamMarshaller:e.eventStreamSerdeProvider(e)});var q_="content-length";function ZV(e){return t=>async r=>{let n=r.request;if(ne.isInstance(n)){let{body:o,headers:i}=n;if(o&&Object.keys(i).map(s=>s.toLowerCase()).indexOf(q_)===-1)try{let s=e(o);n.headers={...n.headers,[q_]:String(s)}}catch{}}return t({...r,request:n})}}var $V={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},H_=e=>({applyToStack:t=>{t.add(ZV(e.bodyLengthChecker),$V)}});var L_=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),oY(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!nY(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},eY=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,tY=/(\d+\.){3}\d+/,rY=/\.\./;var nY=e=>eY.test(e)&&!tY.test(e)&&!rY.test(e),oY=e=>{let[t,r,n,,,o]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,s=!!(i&&r&&n&&o);if(i&&!s)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return s};var K_=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:i,hostname:s,port:a,path:A}=o;return`${i}//${s}${a?":"+a:""}${A}`}}return o}:n};var _c=async e=>{};function J_(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var yi=e=>{if(typeof e=="string")return yi(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:i}=e,s;return i&&(s=J_(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:s}};var Dc=e=>typeof e=="object"?"url"in e?yi(e.url):e:yi(e);var z_=async(e,t,r,n)=>{if(!r.endpoint){let s;r.serviceConfiguredEndpoint?s=await r.serviceConfiguredEndpoint():s=await _c(r.serviceId),s&&(r.endpoint=()=>Promise.resolve(Dc(s)))}let o=await Nu(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},Nu=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[i,s]of Object.entries(o))switch(s.type){case"staticContextParams":n[i]=s.value;break;case"contextParams":n[i]=e[s.name];break;case"clientContextParams":case"builtInParams":n[i]=await K_(s.name,i,r)();break;case"operationContextParams":n[i]=s.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(s))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await L_(n),n};var V_=({config:e,instructions:t})=>(r,n)=>async o=>{e.endpoint&&Ax(n,"ENDPOINT_OVERRIDE","N");let i=await z_(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let s=n.authSchemes?.[0];if(s){n.signing_region=s.signingRegion,n.signing_service=s.signingName;let A=Gt(n)?.selectedHttpAuthScheme?.httpAuthOption;A&&(A.signingProperties=Object.assign(A.signingProperties||{},{signing_region:s.signingRegion,signingRegion:s.signingRegion,signing_service:s.signingName,signingName:s.signingName,signingRegionSet:s.signingRegionSet},s.properties))}return r({...o})};var iY={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Ss.name},kc=(e,t)=>({applyToStack:r=>{r.addRelativeTo(V_({config:e,instructions:t}),iY)}});var Y_=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:o}=e,i=r!=null?async()=>Dc(await it(r)()):void 0,a=Object.assign(e,{endpoint:i,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:it(n??!1),useFipsEndpoint:it(o??!1)}),A;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!A&&(A=_c(e.serviceId)),A),a};var ur;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(ur||(ur={}));var Qo=3,Mu=ur.STANDARD;var W_=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],j_=["TimeoutError","RequestTimeout","RequestTimeoutException"],X_=[500,502,503,504],Z_=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var sY=e=>e.$metadata?.clockSkewCorrected,aY=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},Qi=e=>e.$metadata?.httpStatusCode===429||W_.includes(e.name)||e.$retryable?.throttling==!0,Ks=(e,t=0)=>sY(e)||j_.includes(e.name)||Z_.includes(e?.code||"")||X_.includes(e.$metadata?.httpStatusCode||0)||aY(e)||e.cause!==void 0&&t<=10&&Ks(e.cause,t+1),$_=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Ks(e)}return!1};var wi=class e{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Qi(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};wi.setTimeoutFn=setTimeout;var Fc="amz-sdk-invocation-id",vc="amz-sdk-request";var eD=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var Uu=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var wo=class{constructor(t){this.maxAttempts=t,this.mode=ur.STANDARD,this.capacity=500,this.retryBackoffStrategy=eD(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Uu({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),s=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(o);return this.capacity-=a,Uu({retryDelay:s,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return Qo}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var Tc=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=ur.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new wi,this.standardRetryStrategy=new wo(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Nc,AY=new Uint8Array(16);function Ou(){if(!Nc&&(Nc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Nc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nc(AY)}var st=[];for(let e=0;e<256;++e)st.push((e+256).toString(16).slice(1));function iD(e,t=0){return st[e[t+0]]+st[e[t+1]]+st[e[t+2]]+st[e[t+3]]+"-"+st[e[t+4]]+st[e[t+5]]+"-"+st[e[t+6]]+st[e[t+7]]+"-"+st[e[t+8]]+st[e[t+9]]+"-"+st[e[t+10]]+st[e[t+11]]+st[e[t+12]]+st[e[t+13]]+st[e[t+14]]+st[e[t+15]]}var cY=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gu={randomUUID:cY};function lY(e,t,r){if(Gu.randomUUID&&!t&&!e)return Gu.randomUUID();e=e||{};let n=e.random||(e.rng||Ou)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return iD(n)}var qu=lY;var Hu=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var sD=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,o=it(n??Qo);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>t||(await it(r)()===ur.ADAPTIVE?new Tc(o):new wo(o))})};var aD=e=>e?.body instanceof ReadableStream;var gY=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),i=await e.maxAttempts();if(dY(o)){o=o;let s=await o.acquireInitialRetryToken(r.partition_id),a=new Error,A=0,c=0,{request:l}=n,g=ne.isInstance(l);for(g&&(l.headers[Fc]=qu());;)try{g&&(l.headers[vc]=`attempt=${A+1}; max=${i}`);let{response:d,output:f}=await t(n);return o.recordSuccess(s),f.$metadata.attempts=A+1,f.$metadata.totalRetryDelay=c,{response:d,output:f}}catch(d){let f=fY(d);if(a=Hu(d),g&&aD(l))throw(r.logger instanceof On?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{s=await o.refreshRetryTokenForRetry(s,f)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=A+1,a.$metadata.totalRetryDelay=c,a}A=s.getRetryCount();let u=s.getRetryDelay();c+=u,await new Promise(m=>setTimeout(m,u))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},dY=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",fY=e=>{let t={error:e,errorType:uY(e)},r=pY(e.$response);return r&&(t.retryAfterHint=r),t},uY=e=>Qi(e)?"THROTTLING":Ks(e)?"TRANSIENT":$_(e)?"SERVER_ERROR":"CLIENT_ERROR",IY={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},AD=e=>({applyToStack:t=>{t.add(gY(e),IY)}}),pY=e=>{if(!ot.isInstance(e))return;let t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var Mc={CrtSignerV4:null};var Uc=class{sigv4aSigner;sigv4Signer;signerOptions;constructor(t){this.sigv4Signer=new qs(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,n={}){if(n.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().signWithCredentials(t,r,n)}return this.sigv4Signer.signWithCredentials(t,r,n)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=null;try{if(t=Mc.CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var uI="required",I="type",h="conditions";var _="argv";var fe="assign";var P="properties",lk="backend",pr="authSchemes",Ht="disableDoubleEncoding",Lt="signingName",vr="signingRegion",O="headers",II="signingRegionSet";var Wt="isSet",et="booleanEquals",q="error",Kc="aws.partition",de="stringEquals",ve="getAttr",ft="name",dt="substring",cD="bucketSuffix",gk="parseURL",lD="{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",R="endpoint",k="tree",dk="aws.isVirtualHostableS3Bucket",qc="{url#scheme}://{Bucket}.{url#authority}{url#path}";var Hc="{url#scheme}://{url#authority}{url#path}",fk="hardwareType",uk="regionPrefix",gD="bucketAliasSuffix",dI="outpostId",bo="isValidHostLabel",pI="sigv4a",Ws="s3-outposts";var Ik="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",pk="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",dD="https://{Bucket}.s3.{partitionResult#dnsSuffix}",mk="aws.parseArn",hk="bucketArn",Ck="arnType";var mI="s3-object-lambda",Bk="accesspoint",hI="accessPointName",fD="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",uD="mrapPartition",ID="outpostType",pD="arnPrefix",Ek="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",mD="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",hD="https://s3.{partitionResult#dnsSuffix}",bi={[uI]:!1,[I]:"String"},xi={[uI]:!0,default:!1,[I]:"Boolean"},Js={[uI]:!1,[I]:"Boolean"},Ir={fn:et,[_]:[{ref:"Accelerate"},!0]},Ee={fn:et,[_]:[{ref:"UseFIPS"},!0]},Be={fn:et,[_]:[{ref:"UseDualStack"},!0]},Pe={fn:Wt,[_]:[{ref:"Endpoint"}]},yk={fn:Kc,[_]:[{ref:"Region"}],[fe]:"partitionResult"},CD={fn:de,[_]:[{fn:ve,[_]:[{ref:"partitionResult"},ft]},"aws-cn"]},Jc={fn:Wt,[_]:[{ref:"Bucket"}]},Re={ref:"Bucket"},Et={fn:gk,[_]:[{ref:"Endpoint"}],[fe]:"url"},Lc={fn:et,[_]:[{fn:ve,[_]:[{ref:"url"},"isIp"]},!0]},Qk={ref:"url"},wk={fn:"uriEncode",[_]:[Re],[fe]:"uri_encoded_bucket"},sn={[lk]:"S3Express",[pr]:[{[Ht]:!0,[ft]:"sigv4",[Lt]:"s3express",[vr]:"{Region}"}]},Z={},Sk={fn:dk,[_]:[Re,!1]},Lu={[q]:"S3Express bucket name is not a valid virtual hostable name.",[I]:q},zc={[lk]:"S3Express",[pr]:[{[Ht]:!0,[ft]:"sigv4-s3express",[Lt]:"s3express",[vr]:"{Region}"}]},BD={fn:Wt,[_]:[{ref:"UseS3ExpressControlEndpoint"}]},ED={fn:et,[_]:[{ref:"UseS3ExpressControlEndpoint"},!0]},re={fn:"not",[_]:[Pe]},yD={[q]:"Unrecognized S3Express bucket name format.",[I]:q},QD={fn:"not",[_]:[Jc]},wD={ref:fk},SD={[h]:[re],[q]:"Expected a endpoint to be specified but no endpoint was found",[I]:q},Pc={[pr]:[{[Ht]:!0,[ft]:pI,[Lt]:Ws,[II]:["*"]},{[Ht]:!0,[ft]:"sigv4",[Lt]:Ws,[vr]:"{Region}"}]},Ku={fn:et,[_]:[{ref:"ForcePathStyle"},!1]},mY={ref:"ForcePathStyle"},Ue={fn:et,[_]:[{ref:"Accelerate"},!1]},Ke={fn:de,[_]:[{ref:"Region"},"aws-global"]},Xe={[pr]:[{[Ht]:!0,[ft]:"sigv4",[Lt]:"s3",[vr]:"us-east-1"}]},ae={fn:"not",[_]:[Ke]},Ze={fn:et,[_]:[{ref:"UseGlobalEndpoint"},!0]},bD={url:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:{[pr]:[{[Ht]:!0,[ft]:"sigv4",[Lt]:"s3",[vr]:"{Region}"}]},[O]:{}},Oe={[pr]:[{[Ht]:!0,[ft]:"sigv4",[Lt]:"s3",[vr]:"{Region}"}]},$e={fn:et,[_]:[{ref:"UseGlobalEndpoint"},!1]},ie={fn:et,[_]:[{ref:"UseDualStack"},!1]},xD={url:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[P]:Oe,[O]:{}},oe={fn:et,[_]:[{ref:"UseFIPS"},!1]},_D={url:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[P]:Oe,[O]:{}},DD={url:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:Oe,[O]:{}},Ju={fn:et,[_]:[{fn:ve,[_]:[Qk,"isIp"]},!1]},zu={url:Ik,[P]:Oe,[O]:{}},fI={url:qc,[P]:Oe,[O]:{}},kD={[R]:fI,[I]:R},Vu={url:pk,[P]:Oe,[O]:{}},FD={url:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[P]:Oe,[O]:{}},Oc={[q]:"Invalid region: region was not a valid DNS name.",[I]:q},kt={ref:hk},bk={ref:Ck},Yu={fn:ve,[_]:[kt,"service"]},CI={ref:hI},vD={[h]:[Be],[q]:"S3 Object Lambda does not support Dual-stack",[I]:q},RD={[h]:[Ir],[q]:"S3 Object Lambda does not support S3 Accelerate",[I]:q},TD={[h]:[{fn:Wt,[_]:[{ref:"DisableAccessPoints"}]},{fn:et,[_]:[{ref:"DisableAccessPoints"},!0]}],[q]:"Access points are not supported for this operation",[I]:q},Wu={[h]:[{fn:Wt,[_]:[{ref:"UseArnRegion"}]},{fn:et,[_]:[{ref:"UseArnRegion"},!1]},{fn:"not",[_]:[{fn:de,[_]:[{fn:ve,[_]:[kt,"region"]},"{Region}"]}]}],[q]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[I]:q},xk={fn:ve,[_]:[{ref:"bucketPartition"},ft]},_k={fn:ve,[_]:[kt,"accountId"]},ju={[pr]:[{[Ht]:!0,[ft]:"sigv4",[Lt]:mI,[vr]:"{bucketArn#region}"}]},ND={[q]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[I]:q},Xu={[q]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[I]:q},Zu={[q]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[I]:q},$u={[q]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[I]:q},MD={[q]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[I]:q},UD={[q]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[I]:q},zs={[pr]:[{[Ht]:!0,[ft]:"sigv4",[Lt]:"s3",[vr]:"{bucketArn#region}"}]},PD={[pr]:[{[Ht]:!0,[ft]:pI,[Lt]:Ws,[II]:["*"]},{[Ht]:!0,[ft]:"sigv4",[Lt]:Ws,[vr]:"{bucketArn#region}"}]},OD={fn:mk,[_]:[Re]},GD={url:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Oe,[O]:{}},qD={url:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Oe,[O]:{}},HD={url:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Oe,[O]:{}},eI={url:Ek,[P]:Oe,[O]:{}},LD={url:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Oe,[O]:{}},KD={ref:"UseObjectLambdaEndpoint"},tI={[pr]:[{[Ht]:!0,[ft]:"sigv4",[Lt]:mI,[vr]:"{Region}"}]},JD={url:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:Oe,[O]:{}},zD={url:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[P]:Oe,[O]:{}},VD={url:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[P]:Oe,[O]:{}},rI={url:Hc,[P]:Oe,[O]:{}},YD={url:"https://s3.{Region}.{partitionResult#dnsSuffix}",[P]:Oe,[O]:{}},nI=[{ref:"Region"}],hY=[{ref:"Endpoint"}],CY=[Re],oI=[Be],Gc=[Ir],So=[Pe,Et],WD=[{fn:Wt,[_]:[{ref:"DisableS3ExpressSessionAuth"}]},{fn:et,[_]:[{ref:"DisableS3ExpressSessionAuth"},!0]}],jD=[Lc],iI=[wk],sI=[Sk],_i=[Ee],XD=[{fn:dt,[_]:[Re,6,14,!0],[fe]:"s3expressAvailabilityZoneId"},{fn:dt,[_]:[Re,14,16,!0],[fe]:"s3expressAvailabilityZoneDelim"},{fn:de,[_]:[{ref:"s3expressAvailabilityZoneDelim"},"--"]}],Vs=[{[h]:[Ee],[R]:{url:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[P]:sn,[O]:{}},[I]:R},{[R]:{url:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[P]:sn,[O]:{}},[I]:R}],ZD=[{fn:dt,[_]:[Re,6,15,!0],[fe]:"s3expressAvailabilityZoneId"},{fn:dt,[_]:[Re,15,17,!0],[fe]:"s3expressAvailabilityZoneDelim"},{fn:de,[_]:[{ref:"s3expressAvailabilityZoneDelim"},"--"]}],$D=[{fn:dt,[_]:[Re,6,19,!0],[fe]:"s3expressAvailabilityZoneId"},{fn:dt,[_]:[Re,19,21,!0],[fe]:"s3expressAvailabilityZoneDelim"},{fn:de,[_]:[{ref:"s3expressAvailabilityZoneDelim"},"--"]}],ek=[{fn:dt,[_]:[Re,6,20,!0],[fe]:"s3expressAvailabilityZoneId"},{fn:dt,[_]:[Re,20,22,!0],[fe]:"s3expressAvailabilityZoneDelim"},{fn:de,[_]:[{ref:"s3expressAvailabilityZoneDelim"},"--"]}],tk=[{fn:dt,[_]:[Re,6,26,!0],[fe]:"s3expressAvailabilityZoneId"},{fn:dt,[_]:[Re,26,28,!0],[fe]:"s3expressAvailabilityZoneDelim"},{fn:de,[_]:[{ref:"s3expressAvailabilityZoneDelim"},"--"]}],Ys=[{[h]:[Ee],[R]:{url:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[P]:zc,[O]:{}},[I]:R},{[R]:{url:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.amazonaws.com",[P]:zc,[O]:{}},[I]:R}],BY=[Jc],rk=[{fn:bo,[_]:[{ref:dI},!1]}],nk=[{fn:de,[_]:[{ref:uk},"beta"]}],EY=["*"],Hn=[yk],ok=[{fn:bo,[_]:[{ref:"Region"},!1]}],Ln=[{fn:de,[_]:[{ref:"Region"},"us-east-1"]}],aI=[{fn:de,[_]:[bk,Bk]}],ik=[{fn:ve,[_]:[kt,"resourceId[1]"],[fe]:hI},{fn:"not",[_]:[{fn:de,[_]:[CI,""]}]}],yY=[kt,"resourceId[1]"],AI=[{fn:"not",[_]:[{fn:de,[_]:[{fn:ve,[_]:[kt,"region"]},""]}]}],sk=[{fn:"not",[_]:[{fn:Wt,[_]:[{fn:ve,[_]:[kt,"resourceId[2]"]}]}]}],QY=[kt,"resourceId[2]"],cI=[{fn:Kc,[_]:[{fn:ve,[_]:[kt,"region"]}],[fe]:"bucketPartition"}],ak=[{fn:de,[_]:[xk,{fn:ve,[_]:[{ref:"partitionResult"},ft]}]}],lI=[{fn:bo,[_]:[{fn:ve,[_]:[kt,"region"]},!0]}],gI=[{fn:bo,[_]:[_k,!1]}],Ak=[{fn:bo,[_]:[CI,!1]}],ck=[{fn:bo,[_]:[{ref:"Region"},!0]}],wY={version:"1.0",parameters:{Bucket:bi,Region:bi,UseFIPS:xi,UseDualStack:xi,Endpoint:bi,ForcePathStyle:xi,Accelerate:xi,UseGlobalEndpoint:xi,UseObjectLambdaEndpoint:Js,Key:bi,Prefix:bi,CopySource:bi,DisableAccessPoints:Js,DisableMultiRegionAccessPoints:xi,UseArnRegion:Js,UseS3ExpressControlEndpoint:Js,DisableS3ExpressSessionAuth:Js},rules:[{[h]:[{fn:Wt,[_]:nI}],rules:[{[h]:[Ir,Ee],error:"Accelerate cannot be used with FIPS",[I]:q},{[h]:[Be,Pe],error:"Cannot set dual-stack in combination with a custom endpoint.",[I]:q},{[h]:[Pe,Ee],error:"A custom endpoint cannot be combined with FIPS",[I]:q},{[h]:[Pe,Ir],error:"A custom endpoint cannot be combined with S3 Accelerate",[I]:q},{[h]:[Ee,yk,CD],error:"Partition does not support FIPS",[I]:q},{[h]:[Jc,{fn:dt,[_]:[Re,0,6,!0],[fe]:cD},{fn:de,[_]:[{ref:cD},"--x-s3"]}],rules:[{[h]:oI,error:"S3Express does not support Dual-stack.",[I]:q},{[h]:Gc,error:"S3Express does not support S3 Accelerate.",[I]:q},{[h]:So,rules:[{[h]:WD,rules:[{[h]:jD,rules:[{[h]:iI,rules:[{endpoint:{url:lD,[P]:sn,[O]:Z},[I]:R}],[I]:k}],[I]:k},{[h]:sI,rules:[{endpoint:{url:qc,[P]:sn,[O]:Z},[I]:R}],[I]:k},Lu],[I]:k},{[h]:jD,rules:[{[h]:iI,rules:[{endpoint:{url:lD,[P]:zc,[O]:Z},[I]:R}],[I]:k}],[I]:k},{[h]:sI,rules:[{endpoint:{url:qc,[P]:zc,[O]:Z},[I]:R}],[I]:k},Lu],[I]:k},{[h]:[BD,ED],rules:[{[h]:[wk,re],rules:[{[h]:_i,endpoint:{url:"https://s3express-control-fips.{Region}.amazonaws.com/{uri_encoded_bucket}",[P]:sn,[O]:Z},[I]:R},{endpoint:{url:"https://s3express-control.{Region}.amazonaws.com/{uri_encoded_bucket}",[P]:sn,[O]:Z},[I]:R}],[I]:k}],[I]:k},{[h]:sI,rules:[{[h]:WD,rules:[{[h]:XD,rules:Vs,[I]:k},{[h]:ZD,rules:Vs,[I]:k},{[h]:$D,rules:Vs,[I]:k},{[h]:ek,rules:Vs,[I]:k},{[h]:tk,rules:Vs,[I]:k},yD],[I]:k},{[h]:XD,rules:Ys,[I]:k},{[h]:ZD,rules:Ys,[I]:k},{[h]:$D,rules:Ys,[I]:k},{[h]:ek,rules:Ys,[I]:k},{[h]:tk,rules:Ys,[I]:k},yD],[I]:k},Lu],[I]:k},{[h]:[QD,BD,ED],rules:[{[h]:So,endpoint:{url:Hc,[P]:sn,[O]:Z},[I]:R},{[h]:_i,endpoint:{url:"https://s3express-control-fips.{Region}.amazonaws.com",[P]:sn,[O]:Z},[I]:R},{endpoint:{url:"https://s3express-control.{Region}.amazonaws.com",[P]:sn,[O]:Z},[I]:R}],[I]:k},{[h]:[Jc,{fn:dt,[_]:[Re,49,50,!0],[fe]:fk},{fn:dt,[_]:[Re,8,12,!0],[fe]:uk},{fn:dt,[_]:[Re,0,7,!0],[fe]:gD},{fn:dt,[_]:[Re,32,49,!0],[fe]:dI},{fn:Kc,[_]:nI,[fe]:"regionPartition"},{fn:de,[_]:[{ref:gD},"--op-s3"]}],rules:[{[h]:rk,rules:[{[h]:[{fn:de,[_]:[wD,"e"]}],rules:[{[h]:nk,rules:[SD,{[h]:So,endpoint:{url:"https://{Bucket}.ec2.{url#authority}",[P]:Pc,[O]:Z},[I]:R}],[I]:k},{endpoint:{url:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[P]:Pc,[O]:Z},[I]:R}],[I]:k},{[h]:[{fn:de,[_]:[wD,"o"]}],rules:[{[h]:nk,rules:[SD,{[h]:So,endpoint:{url:"https://{Bucket}.op-{outpostId}.{url#authority}",[P]:Pc,[O]:Z},[I]:R}],[I]:k},{endpoint:{url:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[P]:Pc,[O]:Z},[I]:R}],[I]:k},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[I]:q}],[I]:k},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[I]:q}],[I]:k},{[h]:BY,rules:[{[h]:[Pe,{fn:"not",[_]:[{fn:Wt,[_]:[{fn:gk,[_]:hY}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[I]:q},{[h]:[Ku,Sk],rules:[{[h]:Hn,rules:[{[h]:ok,rules:[{[h]:[Ir,CD],error:"S3 Accelerate cannot be used in this region",[I]:q},{[h]:[Be,Ee,Ue,re,Ke],endpoint:{url:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Xe,[O]:Z},[I]:R},{[h]:[Be,Ee,Ue,re,ae,Ze],rules:[{endpoint:bD,[I]:R}],[I]:k},{[h]:[Be,Ee,Ue,re,ae,$e],endpoint:bD,[I]:R},{[h]:[ie,Ee,Ue,re,Ke],endpoint:{url:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[P]:Xe,[O]:Z},[I]:R},{[h]:[ie,Ee,Ue,re,ae,Ze],rules:[{endpoint:xD,[I]:R}],[I]:k},{[h]:[ie,Ee,Ue,re,ae,$e],endpoint:xD,[I]:R},{[h]:[Be,oe,Ir,re,Ke],endpoint:{url:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Xe,[O]:Z},[I]:R},{[h]:[Be,oe,Ir,re,ae,Ze],rules:[{endpoint:_D,[I]:R}],[I]:k},{[h]:[Be,oe,Ir,re,ae,$e],endpoint:_D,[I]:R},{[h]:[Be,oe,Ue,re,Ke],endpoint:{url:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Xe,[O]:Z},[I]:R},{[h]:[Be,oe,Ue,re,ae,Ze],rules:[{endpoint:DD,[I]:R}],[I]:k},{[h]:[Be,oe,Ue,re,ae,$e],endpoint:DD,[I]:R},{[h]:[ie,oe,Ue,Pe,Et,Lc,Ke],endpoint:{url:Ik,[P]:Xe,[O]:Z},[I]:R},{[h]:[ie,oe,Ue,Pe,Et,Ju,Ke],endpoint:{url:qc,[P]:Xe,[O]:Z},[I]:R},{[h]:[ie,oe,Ue,Pe,Et,Lc,ae,Ze],rules:[{[h]:Ln,endpoint:zu,[I]:R},{endpoint:zu,[I]:R}],[I]:k},{[h]:[ie,oe,Ue,Pe,Et,Ju,ae,Ze],rules:[{[h]:Ln,endpoint:fI,[I]:R},kD],[I]:k},{[h]:[ie,oe,Ue,Pe,Et,Lc,ae,$e],endpoint:zu,[I]:R},{[h]:[ie,oe,Ue,Pe,Et,Ju,ae,$e],endpoint:fI,[I]:R},{[h]:[ie,oe,Ir,re,Ke],endpoint:{url:pk,[P]:Xe,[O]:Z},[I]:R},{[h]:[ie,oe,Ir,re,ae,Ze],rules:[{[h]:Ln,endpoint:Vu,[I]:R},{endpoint:Vu,[I]:R}],[I]:k},{[h]:[ie,oe,Ir,re,ae,$e],endpoint:Vu,[I]:R},{[h]:[ie,oe,Ue,re,Ke],endpoint:{url:dD,[P]:Xe,[O]:Z},[I]:R},{[h]:[ie,oe,Ue,re,ae,Ze],rules:[{[h]:Ln,endpoint:{url:dD,[P]:Oe,[O]:Z},[I]:R},{endpoint:FD,[I]:R}],[I]:k},{[h]:[ie,oe,Ue,re,ae,$e],endpoint:FD,[I]:R}],[I]:k},Oc],[I]:k}],[I]:k},{[h]:[Pe,Et,{fn:de,[_]:[{fn:ve,[_]:[Qk,"scheme"]},"http"]},{fn:dk,[_]:[Re,!0]},Ku,oe,ie,Ue],rules:[{[h]:Hn,rules:[{[h]:ok,rules:[kD],[I]:k},Oc],[I]:k}],[I]:k},{[h]:[Ku,{fn:mk,[_]:CY,[fe]:hk}],rules:[{[h]:[{fn:ve,[_]:[kt,"resourceId[0]"],[fe]:Ck},{fn:"not",[_]:[{fn:de,[_]:[bk,""]}]}],rules:[{[h]:[{fn:de,[_]:[Yu,mI]}],rules:[{[h]:aI,rules:[{[h]:ik,rules:[vD,RD,{[h]:AI,rules:[TD,{[h]:sk,rules:[Wu,{[h]:cI,rules:[{[h]:Hn,rules:[{[h]:ak,rules:[{[h]:lI,rules:[{[h]:[{fn:de,[_]:[_k,""]}],error:"Invalid ARN: Missing account id",[I]:q},{[h]:gI,rules:[{[h]:Ak,rules:[{[h]:So,endpoint:{url:fD,[P]:ju,[O]:Z},[I]:R},{[h]:_i,endpoint:{url:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:ju,[O]:Z},[I]:R},{endpoint:{url:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:ju,[O]:Z},[I]:R}],[I]:k},ND],[I]:k},Xu],[I]:k},Zu],[I]:k},$u],[I]:k}],[I]:k}],[I]:k},MD],[I]:k},{error:"Invalid ARN: bucket ARN is missing a region",[I]:q}],[I]:k},UD],[I]:k},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[I]:q}],[I]:k},{[h]:aI,rules:[{[h]:ik,rules:[{[h]:AI,rules:[{[h]:aI,rules:[{[h]:AI,rules:[TD,{[h]:sk,rules:[Wu,{[h]:cI,rules:[{[h]:Hn,rules:[{[h]:[{fn:de,[_]:[xk,"{partitionResult#name}"]}],rules:[{[h]:lI,rules:[{[h]:[{fn:de,[_]:[Yu,"s3"]}],rules:[{[h]:gI,rules:[{[h]:Ak,rules:[{[h]:Gc,error:"Access Points do not support S3 Accelerate",[I]:q},{[h]:[Ee,Be],endpoint:{url:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:zs,[O]:Z},[I]:R},{[h]:[Ee,ie],endpoint:{url:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:zs,[O]:Z},[I]:R},{[h]:[oe,Be],endpoint:{url:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:zs,[O]:Z},[I]:R},{[h]:[oe,ie,Pe,Et],endpoint:{url:fD,[P]:zs,[O]:Z},[I]:R},{[h]:[oe,ie],endpoint:{url:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:zs,[O]:Z},[I]:R}],[I]:k},ND],[I]:k},Xu],[I]:k},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[I]:q}],[I]:k},Zu],[I]:k},$u],[I]:k}],[I]:k}],[I]:k},MD],[I]:k}],[I]:k}],[I]:k},{[h]:[{fn:bo,[_]:[CI,!0]}],rules:[{[h]:oI,error:"S3 MRAP does not support dual-stack",[I]:q},{[h]:_i,error:"S3 MRAP does not support FIPS",[I]:q},{[h]:Gc,error:"S3 MRAP does not support S3 Accelerate",[I]:q},{[h]:[{fn:et,[_]:[{ref:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[I]:q},{[h]:[{fn:Kc,[_]:nI,[fe]:uD}],rules:[{[h]:[{fn:de,[_]:[{fn:ve,[_]:[{ref:uD},ft]},{fn:ve,[_]:[kt,"partition"]}]}],rules:[{endpoint:{url:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[P]:{[pr]:[{[Ht]:!0,name:pI,[Lt]:"s3",[II]:EY}]},[O]:Z},[I]:R}],[I]:k},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[I]:q}],[I]:k}],[I]:k},{error:"Invalid Access Point Name",[I]:q}],[I]:k},UD],[I]:k},{[h]:[{fn:de,[_]:[Yu,Ws]}],rules:[{[h]:oI,error:"S3 Outposts does not support Dual-stack",[I]:q},{[h]:_i,error:"S3 Outposts does not support FIPS",[I]:q},{[h]:Gc,error:"S3 Outposts does not support S3 Accelerate",[I]:q},{[h]:[{fn:Wt,[_]:[{fn:ve,[_]:[kt,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[I]:q},{[h]:[{fn:ve,[_]:yY,[fe]:dI}],rules:[{[h]:rk,rules:[Wu,{[h]:cI,rules:[{[h]:Hn,rules:[{[h]:ak,rules:[{[h]:lI,rules:[{[h]:gI,rules:[{[h]:[{fn:ve,[_]:QY,[fe]:ID}],rules:[{[h]:[{fn:ve,[_]:[kt,"resourceId[3]"],[fe]:hI}],rules:[{[h]:[{fn:de,[_]:[{ref:ID},Bk]}],rules:[{[h]:So,endpoint:{url:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[P]:PD,[O]:Z},[I]:R},{endpoint:{url:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[P]:PD,[O]:Z},[I]:R}],[I]:k},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[I]:q}],[I]:k},{error:"Invalid ARN: expected an access point name",[I]:q}],[I]:k},{error:"Invalid ARN: Expected a 4-component resource",[I]:q}],[I]:k},Xu],[I]:k},Zu],[I]:k},$u],[I]:k}],[I]:k}],[I]:k},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[I]:q}],[I]:k},{error:"Invalid ARN: The Outpost Id was not set",[I]:q}],[I]:k},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[I]:q}],[I]:k},{error:"Invalid ARN: No ARN type specified",[I]:q}],[I]:k},{[h]:[{fn:dt,[_]:[Re,0,4,!1],[fe]:pD},{fn:de,[_]:[{ref:pD},"arn:"]},{fn:"not",[_]:[{fn:Wt,[_]:[OD]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[I]:q},{[h]:[{fn:et,[_]:[mY,!0]},OD],error:"Path-style addressing cannot be used with ARN buckets",[I]:q},{[h]:iI,rules:[{[h]:Hn,rules:[{[h]:[Ue],rules:[{[h]:[Be,re,Ee,Ke],endpoint:{url:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Xe,[O]:Z},[I]:R},{[h]:[Be,re,Ee,ae,Ze],rules:[{endpoint:GD,[I]:R}],[I]:k},{[h]:[Be,re,Ee,ae,$e],endpoint:GD,[I]:R},{[h]:[ie,re,Ee,Ke],endpoint:{url:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Xe,[O]:Z},[I]:R},{[h]:[ie,re,Ee,ae,Ze],rules:[{endpoint:qD,[I]:R}],[I]:k},{[h]:[ie,re,Ee,ae,$e],endpoint:qD,[I]:R},{[h]:[Be,re,oe,Ke],endpoint:{url:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[P]:Xe,[O]:Z},[I]:R},{[h]:[Be,re,oe,ae,Ze],rules:[{endpoint:HD,[I]:R}],[I]:k},{[h]:[Be,re,oe,ae,$e],endpoint:HD,[I]:R},{[h]:[ie,Pe,Et,oe,Ke],endpoint:{url:Ek,[P]:Xe,[O]:Z},[I]:R},{[h]:[ie,Pe,Et,oe,ae,Ze],rules:[{[h]:Ln,endpoint:eI,[I]:R},{endpoint:eI,[I]:R}],[I]:k},{[h]:[ie,Pe,Et,oe,ae,$e],endpoint:eI,[I]:R},{[h]:[ie,re,oe,Ke],endpoint:{url:mD,[P]:Xe,[O]:Z},[I]:R},{[h]:[ie,re,oe,ae,Ze],rules:[{[h]:Ln,endpoint:{url:mD,[P]:Oe,[O]:Z},[I]:R},{endpoint:LD,[I]:R}],[I]:k},{[h]:[ie,re,oe,ae,$e],endpoint:LD,[I]:R}],[I]:k},{error:"Path-style addressing cannot be used with S3 Accelerate",[I]:q}],[I]:k}],[I]:k}],[I]:k},{[h]:[{fn:Wt,[_]:[KD]},{fn:et,[_]:[KD,!0]}],rules:[{[h]:Hn,rules:[{[h]:ck,rules:[vD,RD,{[h]:So,endpoint:{url:Hc,[P]:tI,[O]:Z},[I]:R},{[h]:_i,endpoint:{url:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[P]:tI,[O]:Z},[I]:R},{endpoint:{url:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[P]:tI,[O]:Z},[I]:R}],[I]:k},Oc],[I]:k}],[I]:k},{[h]:[QD],rules:[{[h]:Hn,rules:[{[h]:ck,rules:[{[h]:[Ee,Be,re,Ke],endpoint:{url:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Xe,[O]:Z},[I]:R},{[h]:[Ee,Be,re,ae,Ze],rules:[{endpoint:JD,[I]:R}],[I]:k},{[h]:[Ee,Be,re,ae,$e],endpoint:JD,[I]:R},{[h]:[Ee,ie,re,Ke],endpoint:{url:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[P]:Xe,[O]:Z},[I]:R},{[h]:[Ee,ie,re,ae,Ze],rules:[{endpoint:zD,[I]:R}],[I]:k},{[h]:[Ee,ie,re,ae,$e],endpoint:zD,[I]:R},{[h]:[oe,Be,re,Ke],endpoint:{url:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[P]:Xe,[O]:Z},[I]:R},{[h]:[oe,Be,re,ae,Ze],rules:[{endpoint:VD,[I]:R}],[I]:k},{[h]:[oe,Be,re,ae,$e],endpoint:VD,[I]:R},{[h]:[oe,ie,Pe,Et,Ke],endpoint:{url:Hc,[P]:Xe,[O]:Z},[I]:R},{[h]:[oe,ie,Pe,Et,ae,Ze],rules:[{[h]:Ln,endpoint:rI,[I]:R},{endpoint:rI,[I]:R}],[I]:k},{[h]:[oe,ie,Pe,Et,ae,$e],endpoint:rI,[I]:R},{[h]:[oe,ie,re,Ke],endpoint:{url:hD,[P]:Xe,[O]:Z},[I]:R},{[h]:[oe,ie,re,ae,Ze],rules:[{[h]:Ln,endpoint:{url:hD,[P]:Oe,[O]:Z},[I]:R},{endpoint:YD,[I]:R}],[I]:k},{[h]:[oe,ie,re,ae,$e],endpoint:YD,[I]:R}],[I]:k},Oc],[I]:k}],[I]:k}],[I]:k},{error:"A region must be set when sending requests to S3.",[I]:q}]},Dk=wY;var SY=new Cc({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),Vc=(e,t={})=>SY.get(e,()=>Du(Dk,{endpointParams:e,logger:t.logger}));yo.aws=Fu;var bY=e=>async(t,r,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let o=await e(t,r,n),i=Gt(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);let s=await Nu(n,{getEndpointParameterInstructions:i},t);return Object.assign(o,s)},xY=async(e,t,r)=>({operation:Gt(t).operation,region:await it(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),kk=bY(xY);function Fk(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function vk(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var _Y=(e,t,r)=>o=>{let s=e(o).properties?.authSchemes;if(!s)return t(o);let a=[];for(let A of s){let{name:c,properties:l={},...g}=A,d=c.toLowerCase(),f;if(d==="sigv4a"){f="aws.auth#sigv4a";let C=s.find(p=>{let w=p.name.toLowerCase();return w!=="sigv4a"&&w.startsWith("sigv4")});if(!Mc.CrtSignerV4&&C)continue}else if(d.startsWith("sigv4"))f="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${d}\``);let u=r[f];if(!u)throw new Error(`Could not find HttpAuthOption create function for \`${f}\``);let m=u(o);m.schemeId=f,m.signingProperties={...m.signingProperties||{},...g,...l},a.push(m)}return a},DY=e=>{let t=[];switch(e.operation){default:t.push(Fk(e)),t.push(vk(e))}return t},Rk=_Y(Vc,DY,{"aws.auth#sigv4":Fk,"aws.auth#sigv4a":vk}),Tk=e=>{let t=vx(e);return{...dx(t)}};var Nk=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),Yc={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var Je=class e extends dc{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Wc=class e extends Je{name="NoSuchUpload";$fault="client";constructor(t){super({name:"NoSuchUpload",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}};var jc=class e extends Je{name="ObjectNotInActiveTierError";$fault="client";constructor(t){super({name:"ObjectNotInActiveTierError",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Xc=class e extends Je{name="BucketAlreadyExists";$fault="client";constructor(t){super({name:"BucketAlreadyExists",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},Zc=class e extends Je{name="BucketAlreadyOwnedByYou";$fault="client";constructor(t){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}};var $c=class e extends Je{name="NoSuchBucket";$fault="client";constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},BI;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(BI||(BI={}));var EI;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(EI||(EI={}));var el=class e extends Je{name="InvalidObjectState";$fault="client";StorageClass;AccessTier;constructor(t){super({name:"InvalidObjectState",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}},tl=class e extends Je{name="NoSuchKey";$fault="client";constructor(t){super({name:"NoSuchKey",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}};var rl=class e extends Je{name="NotFound";$fault="client";constructor(t){super({name:"NotFound",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}};var kY=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:qt},...e.SessionToken&&{SessionToken:qt}}),Mk=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:qt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qt},...e.Credentials&&{Credentials:kY(e.Credentials)}}),Uk=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:qt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qt}});var nl=class e extends Je{name="EncryptionTypeMismatch";$fault="client";constructor(t){super({name:"EncryptionTypeMismatch",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},ol=class e extends Je{name="InvalidRequest";$fault="client";constructor(t){super({name:"InvalidRequest",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},il=class e extends Je{name="InvalidWriteOffset";$fault="client";constructor(t){super({name:"InvalidWriteOffset",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},sl=class e extends Je{name="TooManyParts";$fault="client";constructor(t){super({name:"TooManyParts",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}},al=class e extends Je{name="ObjectAlreadyInActiveTierError";$fault="client";constructor(t){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...t}),Object.setPrototypeOf(this,e.prototype)}};var Pk;(function(e){e.visit=(t,r)=>t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])})(Pk||(Pk={}));var Ok=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:qt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qt}}),Gk=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:qt},...e.SSEKMSKeyId&&{SSEKMSKeyId:qt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:qt}});var zk=async(e,t)=>{let r=rc(e,t),n=ke({},rn,{[vW]:e[fW],[fl]:e[ll],[ul]:e[dl],[Il]:e[gl],[ki]:[()=>rn(e[Di]),()=>e[Di].toString()]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let o=ke({[kW]:[,""]});return r.m("GET").h(n).q(o).b(void 0),r.build()};var Vk=async(e,t)=>{let r=rc(e,t),n=ke({},rn,{[SW]:e[eW]||"application/octet-stream",[FW]:e[VY],[CW]:e[WY],[BW]:e[jY],[EW]:e[XY],[yW]:e[ZY],[QW]:[()=>rn(e[qk]),()=>e[qk].toString()],[wW]:e[$Y],[JW]:e[YY],[nF]:e[Xk],[oF]:e[Zk],[iF]:e[$k],[sF]:e[eF],[bW]:[()=>rn(e[Hk]),()=>zf(e[Hk]).toString()],[_W]:e[aW],[DW]:e[AW],[NW]:e[nW],[MW]:e[oW],[UW]:e[iW],[PW]:e[sW],[WW]:[()=>rn(e[Kk]),()=>e[Kk].toString()],[fl]:e[ll],[KW]:e[cl],[jW]:e[hW],[aF]:e[tF],[zW]:e[uW],[AF]:e[rF],[ul]:e[dl],[Il]:e[gl],[ki]:[()=>rn(e[Di]),()=>e[Di].toString()],[LW]:e[dW],[VW]:e[pW],[GW]:e[lW],[qW]:[()=>rn(e[Lk]),()=>Lx(e[Lk]).toString()],[OW]:e[cW],[TW]:e[tW],...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((a,A)=>(a[`x-amz-meta-${A.toLowerCase()}`]=e.Metadata[A],a),{})});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let o=ke({[XW]:[,"PutObject"]}),i,s;return e.Body!==void 0&&(s=e.Body,i=s),r.m("PUT").h(n).q(o).b(i),r.build()};var Yk=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return jk(e,t);let r=ke({$metadata:yt(e),[ll]:[,e.headers[fl]],[dl]:[,e.headers[ul]],[gl]:[,e.headers[Il]],[Di]:[()=>e.headers[ki]!==void 0,()=>Kf(e.headers[ki])]}),n=Jf(Zb(await Cu(e.body,t)),"body");return n[wI]!=null&&(r[wI]=zY(n[wI],t)),r};var Wk=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return jk(e,t);let r=ke({$metadata:yt(e),[Al]:[,e.headers[RW]],[rW]:[,e.headers[xW]],[Xk]:[,e.headers[nF]],[Zk]:[,e.headers[oF]],[$k]:[,e.headers[iF]],[eF]:[,e.headers[sF]],[ll]:[,e.headers[fl]],[mW]:[,e.headers[YW]],[tF]:[,e.headers[aF]],[rF]:[,e.headers[AF]],[dl]:[,e.headers[ul]],[gl]:[,e.headers[Il]],[Di]:[()=>e.headers[ki]!==void 0,()=>Kf(e.headers[ki])],[IW]:[()=>e.headers[Jk]!==void 0,()=>ex(e.headers[Jk])],[gW]:[,e.headers[HW]]});return await Mn(e.body,t),r};var jk=async(e,t)=>{let r={...e,body:await w0(e.body,t)},n=S0(e,r.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await qY(r,t);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await KY(r,t);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await RY(r,t);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await TY(r,t);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await OY(r,t);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await MY(r,t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await GY(r,t);case"NotFound":case"com.amazonaws.s3#NotFound":throw await HY(r,t);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await NY(r,t);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await UY(r,t);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await PY(r,t);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await JY(r,t);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await LY(r,t);default:let o=r.body;return vY({output:e,parsedBody:o,errorCode:n})}},vY=Nx(Je),RY=async(e,t)=>{let r=ke({}),n=e.body,o=new Xc({$metadata:yt(e),...r});return gt(o,e.body)},TY=async(e,t)=>{let r=ke({}),n=e.body,o=new Zc({$metadata:yt(e),...r});return gt(o,e.body)},NY=async(e,t)=>{let r=ke({}),n=e.body,o=new nl({$metadata:yt(e),...r});return gt(o,e.body)},MY=async(e,t)=>{let r=ke({}),n=e.body;n[QI]!=null&&(r[QI]=mi(n[QI])),n[cl]!=null&&(r[cl]=mi(n[cl]));let o=new el({$metadata:yt(e),...r});return gt(o,e.body)},UY=async(e,t)=>{let r=ke({}),n=e.body,o=new ol({$metadata:yt(e),...r});return gt(o,e.body)},PY=async(e,t)=>{let r=ke({}),n=e.body,o=new il({$metadata:yt(e),...r});return gt(o,e.body)},OY=async(e,t)=>{let r=ke({}),n=e.body,o=new $c({$metadata:yt(e),...r});return gt(o,e.body)},GY=async(e,t)=>{let r=ke({}),n=e.body,o=new tl({$metadata:yt(e),...r});return gt(o,e.body)},qY=async(e,t)=>{let r=ke({}),n=e.body,o=new Wc({$metadata:yt(e),...r});return gt(o,e.body)},HY=async(e,t)=>{let r=ke({}),n=e.body,o=new rl({$metadata:yt(e),...r});return gt(o,e.body)},LY=async(e,t)=>{let r=ke({}),n=e.body,o=new al({$metadata:yt(e),...r});return gt(o,e.body)},KY=async(e,t)=>{let r=ke({}),n=e.body,o=new jc({$metadata:yt(e),...r});return gt(o,e.body)},JY=async(e,t)=>{let r=ke({}),n=e.body,o=new sl({$metadata:yt(e),...r});return gt(o,e.body)};var zY=(e,t)=>{let r={};return e[yI]!=null&&(r[yI]=mi(e[yI])),e[SI]!=null&&(r[SI]=mi(e[SI])),e[bI]!=null&&(r[bI]=mi(e[bI])),e[Al]!=null&&(r[Al]=Jf(Vf(e[Al]))),r};var yt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var VY="ACL";var yI="AccessKeyId";var QI="AccessTier";var Di="BucketKeyEnabled";var wI="Credentials",YY="ChecksumAlgorithm";var WY="CacheControl",Xk="ChecksumCRC32",Zk="ChecksumCRC32C",jY="ContentDisposition";var XY="ContentEncoding";var ZY="ContentLanguage",qk="ContentLength";var $Y="ContentMD5";var $k="ChecksumSHA1",eF="ChecksumSHA256";var eW="ContentType";var Hk="Expires";var tW="ExpectedBucketOwner";var rW="ETag";var Al="Expiration";var nW="GrantFullControl";var oW="GrantRead",iW="GrantReadACP";var sW="GrantWriteACP";var aW="IfMatch";var AW="IfNoneMatch";var cW="ObjectLockLegalHoldStatus",lW="ObjectLockMode";var Lk="ObjectLockRetainUntilDate";var gW="RequestCharged";var dW="RequestPayer";var SI="SecretAccessKey";var cl="StorageClass";var fW="SessionMode";var ll="ServerSideEncryption";var tF="SSECustomerAlgorithm",uW="SSECustomerKey",rF="SSECustomerKeyMD5";var gl="SSEKMSEncryptionContext",dl="SSEKMSKeyId";var bI="SessionToken";var IW="Size";var pW="Tagging";var mW="VersionId";var Kk="WriteOffsetBytes",hW="WebsiteRedirectLocation";var CW="cache-control",BW="content-disposition",EW="content-encoding",yW="content-language",QW="content-length",wW="content-md5";var SW="content-type";var bW="expires";var xW="etag";var _W="if-match";var DW="if-none-match";var kW="session";var FW="x-amz-acl";var nF="x-amz-checksum-crc32",oF="x-amz-checksum-crc32c";var iF="x-amz-checksum-sha1",sF="x-amz-checksum-sha256";var vW="x-amz-create-session-mode";var RW="x-amz-expiration",TW="x-amz-expected-bucket-owner";var NW="x-amz-grant-full-control",MW="x-amz-grant-read",UW="x-amz-grant-read-acp";var PW="x-amz-grant-write-acp";var OW="x-amz-object-lock-legal-hold",GW="x-amz-object-lock-mode",qW="x-amz-object-lock-retain-until-date";var Jk="x-amz-object-size";var HW="x-amz-request-charged";var LW="x-amz-request-payer";var KW="x-amz-storage-class",JW="x-amz-sdk-checksum-algorithm";var fl="x-amz-server-side-encryption",ul="x-amz-server-side-encryption-aws-kms-key-id",ki="x-amz-server-side-encryption-bucket-key-enabled",Il="x-amz-server-side-encryption-context",aF="x-amz-server-side-encryption-customer-algorithm",zW="x-amz-server-side-encryption-customer-key",AF="x-amz-server-side-encryption-customer-key-md5",VW="x-amz-tagging";var YW="x-amz-version-id",WW="x-amz-write-offset-bytes",jW="x-amz-website-redirect-location",XW="x-id";var pl=class extends ho.classBuilder().ep({...Yc,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,o){return[WA(n,this.serialize,this.deserialize),kc(n,t.getEndpointParameterInstructions()),hc(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(Uk,Mk).ser(zk).de(Yk).build(){};var cF={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.726.1",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn g:vitest run","test:browser":"node ./test/browser-build/esbuild && yarn g:vitest run -c vitest.config.browser.ts","test:browser:watch":"node ./test/browser-build/esbuild && yarn g:vitest watch -c vitest.config.browser.ts","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts && yarn test:browser","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.726.0","@aws-sdk/client-sts":"3.726.1","@aws-sdk/core":"3.723.0","@aws-sdk/credential-provider-node":"3.726.0","@aws-sdk/middleware-bucket-endpoint":"3.726.0","@aws-sdk/middleware-expect-continue":"3.723.0","@aws-sdk/middleware-flexible-checksums":"3.723.0","@aws-sdk/middleware-host-header":"3.723.0","@aws-sdk/middleware-location-constraint":"3.723.0","@aws-sdk/middleware-logger":"3.723.0","@aws-sdk/middleware-recursion-detection":"3.723.0","@aws-sdk/middleware-sdk-s3":"3.723.0","@aws-sdk/middleware-ssec":"3.723.0","@aws-sdk/middleware-user-agent":"3.726.0","@aws-sdk/region-config-resolver":"3.723.0","@aws-sdk/signature-v4-multi-region":"3.723.0","@aws-sdk/types":"3.723.0","@aws-sdk/util-endpoints":"3.726.0","@aws-sdk/util-user-agent-browser":"3.723.0","@aws-sdk/util-user-agent-node":"3.726.0","@aws-sdk/xml-builder":"3.723.0","@smithy/config-resolver":"^4.0.0","@smithy/core":"^3.0.0","@smithy/eventstream-serde-browser":"^4.0.0","@smithy/eventstream-serde-config-resolver":"^4.0.0","@smithy/eventstream-serde-node":"^4.0.0","@smithy/fetch-http-handler":"^5.0.0","@smithy/hash-blob-browser":"^4.0.0","@smithy/hash-node":"^4.0.0","@smithy/hash-stream-node":"^4.0.0","@smithy/invalid-dependency":"^4.0.0","@smithy/md5-js":"^4.0.0","@smithy/middleware-content-length":"^4.0.0","@smithy/middleware-endpoint":"^4.0.0","@smithy/middleware-retry":"^4.0.0","@smithy/middleware-serde":"^4.0.0","@smithy/middleware-stack":"^4.0.0","@smithy/node-config-provider":"^4.0.0","@smithy/node-http-handler":"^4.0.0","@smithy/protocol-http":"^5.0.0","@smithy/smithy-client":"^4.0.0","@smithy/types":"^4.0.0","@smithy/url-parser":"^4.0.0","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.0","@smithy/util-defaults-mode-node":"^4.0.0","@smithy/util-endpoints":"^3.0.0","@smithy/util-middleware":"^4.0.0","@smithy/util-retry":"^4.0.0","@smithy/util-stream":"^4.0.0","@smithy/util-utf8":"^4.0.0","@smithy/util-waiter":"^4.0.0",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.726.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.2.2"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var xI=e=>new TextEncoder().encode(e);function _I(e){return typeof e=="string"?e.length===0:e.byteLength===0}var DI={name:"SHA-1"},kI={name:"HMAC",hash:DI},lF=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);var $W={};function jt(){return typeof window<"u"?window:typeof self<"u"?self:$W}var FI=(function(){function e(t){this.toHash=new Uint8Array(0),t!==void 0&&(this.key=new Promise(function(r,n){jt().crypto.subtle.importKey("raw",gF(t),kI,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))}return e.prototype.update=function(t){if(!_I(t)){var r=gF(t),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(r){return jt().crypto.subtle.sign(kI,r,t.toHash).then(function(n){return new Uint8Array(n)})}):_I(this.toHash)?Promise.resolve(lF):Promise.resolve().then(function(){return jt().crypto.subtle.digest(DI,t.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},e.prototype.reset=function(){this.toHash=new Uint8Array(0)},e})();function gF(e){return typeof e=="string"?xI(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var ej=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function ml(e){if(tj(e)&&typeof e.crypto.subtle=="object"){var t=e.crypto.subtle;return rj(t)}return!1}function tj(e){if(typeof e=="object"&&typeof e.crypto=="object"){var t=e.crypto.getRandomValues;return typeof t=="function"}return!1}function rj(e){return e&&ej.every(function(t){return typeof e[t]=="function"})}var dF=(function(){function e(t){if(ml(jt()))this.hash=new FI(t);else throw new Error("SHA1 not supported")}return e.prototype.update=function(t,r){this.hash.update(Bt(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e})();var vI={name:"SHA-256"},RI={name:"HMAC",hash:vI},fF=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);var TI=(function(){function e(t){this.toHash=new Uint8Array(0),this.secret=t,this.reset()}return e.prototype.update=function(t){if(!Fr(t)){var r=Bt(t),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(r){return jt().crypto.subtle.sign(RI,r,t.toHash).then(function(n){return new Uint8Array(n)})}):Fr(this.toHash)?Promise.resolve(fF):Promise.resolve().then(function(){return jt().crypto.subtle.digest(vI,t.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},e.prototype.reset=function(){var t=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,n){jt().crypto.subtle.importKey("raw",Bt(t.secret),RI,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))},e})();var Ft=64,uF=32,IF=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pF=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],mF=Math.pow(2,53)-1;var js=(function(){function e(){this.state=Int32Array.from(pF),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=t.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>mF)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=t[r++],n--,this.bufferLength===Ft&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%Ft>=Ft-8){for(var o=this.bufferLength;o<Ft;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<Ft-8;o++)r.setUint8(o,0);r.setUint32(Ft-8,Math.floor(t/4294967296),!0),r.setUint32(Ft-4,t),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(uF),o=0;o<8;o++)i[o*4]=this.state[o]>>>24&255,i[o*4+1]=this.state[o]>>>16&255,i[o*4+2]=this.state[o]>>>8&255,i[o*4+3]=this.state[o]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var t=this,r=t.buffer,n=t.state,o=n[0],i=n[1],s=n[2],a=n[3],A=n[4],c=n[5],l=n[6],g=n[7],d=0;d<Ft;d++){if(d<16)this.temp[d]=(r[d*4]&255)<<24|(r[d*4+1]&255)<<16|(r[d*4+2]&255)<<8|r[d*4+3]&255;else{var f=this.temp[d-2],u=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10;f=this.temp[d-15];var m=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[d]=(u+this.temp[d-7]|0)+(m+this.temp[d-16]|0)}var C=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&c^~A&l)|0)+(g+(IF[d]+this.temp[d]|0)|0)|0,p=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&i^o&s^i&s)|0;g=l,l=c,c=A,A=a+C|0,a=s,s=i,i=o,o=C+p|0}n[0]+=o,n[1]+=i,n[2]+=s,n[3]+=a,n[4]+=A,n[5]+=c,n[6]+=l,n[7]+=g},e})();var hF=(function(){function e(t){this.secret=t,this.hash=new js,this.reset()}return e.prototype.update=function(t){if(!(Fr(t)||this.error))try{this.hash.update(Bt(t))}catch(r){this.error=r}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return _n(this,void 0,void 0,function(){return br(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new js,this.secret){this.outer=new js;var t=nj(this.secret),r=new Uint8Array(Ft);r.set(t);for(var n=0;n<Ft;n++)t[n]^=54,r[n]^=92;this.hash.update(t),this.outer.update(r);for(var n=0;n<t.byteLength;n++)t[n]=0}},e})();function nj(e){var t=Bt(e);if(t.byteLength>Ft){var r=new js;r.update(t),t=r.digest()}var n=new Uint8Array(Ft);return n.set(t),n}var CF=(function(){function e(t){ml(jt())?this.hash=new TI(t):this.hash=new hF(t)}return e.prototype.update=function(t,r){this.hash.update(Bt(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e})();var BF=W(MI()),EF=({serviceId:e,clientVersion:t})=>async r=>{let n=typeof window<"u"&&window?.navigator?.userAgent?BF.default.parse(window.navigator.userAgent):void 0,o=[["aws-sdk-js",t],["ua","2.1"],[`os/${n?.os?.name||"other"}`,n?.os?.version],["lang/js"],["md/browser",`${n?.browser?.name??"unknown"}_${n?.browser?.version??"unknown"}`]];e&&o.push([`api/${e}`,t]);let i=await r?.userAgentAppId?.();return i&&o.push([`app/${i}`]),o};var Fi=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&yF(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&yF(t),parseInt(be(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function yF(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var hl=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let i of Object.keys(t)){let s=this.fromUtf8(i);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(t[i]))}let n=new Uint8Array(r.reduce((i,s)=>i+s.byteLength,0)),o=0;for(let i of r)n.set(i,o),o+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);let s=new Uint8Array(i.buffer);return s.set(t.value,3),s;case"string":let a=this.fromUtf8(t.value),A=new DataView(new ArrayBuffer(3+a.byteLength));A.setUint8(0,7),A.setUint16(1,a.byteLength,!1);let c=new Uint8Array(A.buffer);return c.set(a,3),c;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Fi.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!dj.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let g=new Uint8Array(17);return g[0]=9,g.set($A(t.value.replace(/\-/g,"")),1),g}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),i=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[i]={type:wF,value:!0};break;case 1:r[i]={type:wF,value:!1};break;case 2:r[i]={type:oj,value:t.getInt8(n++)};break;case 3:r[i]={type:ij,value:t.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:sj,value:t.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:aj,value:new Fi(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let s=t.getUint16(n,!1);n+=2,r[i]={type:Aj,value:new Uint8Array(t.buffer,t.byteOffset+n,s)},n+=s;break;case 7:let a=t.getUint16(n,!1);n+=2,r[i]={type:cj,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:lj,value:new Date(new Fi(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let A=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[i]={type:gj,value:`${be(A.subarray(0,4))}-${be(A.subarray(4,6))}-${be(A.subarray(6,8))}-${be(A.subarray(8,10))}-${be(A.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},QF;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(QF||(QF={}));var wF="boolean",oj="byte",ij="short",sj="integer",aj="long",Aj="binary",cj="string",lj="timestamp",gj="uuid",dj=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var SF=4,Kn=SF*2,xo=4,fj=Kn+xo*2;function bF({byteLength:e,byteOffset:t,buffer:r}){if(e<fj)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let i=n.getUint32(SF,!1),s=n.getUint32(Kn,!1),a=n.getUint32(e-xo,!1),A=new Bo().update(new Uint8Array(r,t,Kn));if(s!==A.digest())throw new Error(`The prelude checksum specified in the message (${s}) does not match the calculated CRC32 checksum (${A.digest()})`);if(A.update(new Uint8Array(r,t+Kn,e-(Kn+xo))),a!==A.digest())throw new Error(`The message checksum (${A.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Kn+xo,i),body:new Uint8Array(r,t+Kn+xo+i,o-i-(Kn+xo+xo))}}var Cl=class{constructor(t,r){this.headerMarshaller=new hl(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,i=new Uint8Array(o),s=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new Bo;return s.setUint32(0,o,!1),s.setUint32(4,n.byteLength,!1),s.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),s.setUint32(o-4,a.update(i.subarray(8,o-4)).digest(),!1),i}decode(t){let{headers:r,body:n}=bF(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};var Bl=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var El=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var yl=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var Ql=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};function xF(e){let t=0,r=0,n=null,o=null,i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},s=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:A,done:c}=await a.next();if(c){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let l=A.length,g=0;for(;g<l;){if(!n){let f=l-g;o||(o=new Uint8Array(4));let u=Math.min(4-r,f);if(o.set(A.slice(g,g+u),r),r+=u,g+=u,r<4)break;i(new DataView(o.buffer).getUint32(0,!1)),o=null}let d=Math.min(t-r,l-g);n.set(A.slice(g,g+d),r),r+=d,g+=d,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:s}}function _F(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,i={[o]:r},s=await e(i);if(s.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw s[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},i=await e(o);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var Zs=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new Cl(t,r),this.utfEncoder=t}deserialize(t,r){let n=xF(t);return new yl({messageStream:new Bl({inputStream:n,decoder:this.eventStreamCodec}),deserializer:_F(r,this.utfEncoder)})}serialize(t,r){return new El({messageStream:new Ql({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};var DF=e=>({[Symbol.asyncIterator]:async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),kF=e=>{let t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){let{done:n,value:o}=await t.next();if(n)return r.close();r.enqueue(o)}})};var wl=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new Zs({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=uj(t)?DF(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){let n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?kF(n):n}},uj=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;var FF=e=>new wl(e);async function vF(e,t,r=1024*1024){let n=e.size,o=0;for(;o<n;){let i=e.slice(o,Math.min(n,o+r));t(new Uint8Array(await i.arrayBuffer())),o+=i.size}}var RF=async function(t,r){let n=new t;return await vF(r,o=>{n.update(o)}),n.digest()};var TF=e=>()=>Promise.reject(e);var NF=[1732584193,4023233417,2562383102,271733878];var Sl=class{constructor(){this.reset()}update(t){if(pj(t))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");let r=mj(t),n=0,{byteLength:o}=r;for(this.bytesHashed+=o;o>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),o--,this.bufferLength===64&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){let{buffer:r,bufferLength:n,bytesHashed:o}=this,i=o*8;if(r.setUint8(this.bufferLength++,128),n%64>=56){for(let s=this.bufferLength;s<64;s++)r.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(let s=this.bufferLength;s<56;s++)r.setUint8(s,0);r.setUint32(56,i>>>0,!0),r.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}let t=new DataView(new ArrayBuffer(16));for(let r=0;r<4;r++)t.setUint32(r*4,this.state[r],!0);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}hashBuffer(){let{buffer:t,state:r}=this,n=r[0],o=r[1],i=r[2],s=r[3];n=ut(n,o,i,s,t.getUint32(0,!0),7,3614090360),s=ut(s,n,o,i,t.getUint32(4,!0),12,3905402710),i=ut(i,s,n,o,t.getUint32(8,!0),17,606105819),o=ut(o,i,s,n,t.getUint32(12,!0),22,3250441966),n=ut(n,o,i,s,t.getUint32(16,!0),7,4118548399),s=ut(s,n,o,i,t.getUint32(20,!0),12,1200080426),i=ut(i,s,n,o,t.getUint32(24,!0),17,2821735955),o=ut(o,i,s,n,t.getUint32(28,!0),22,4249261313),n=ut(n,o,i,s,t.getUint32(32,!0),7,1770035416),s=ut(s,n,o,i,t.getUint32(36,!0),12,2336552879),i=ut(i,s,n,o,t.getUint32(40,!0),17,4294925233),o=ut(o,i,s,n,t.getUint32(44,!0),22,2304563134),n=ut(n,o,i,s,t.getUint32(48,!0),7,1804603682),s=ut(s,n,o,i,t.getUint32(52,!0),12,4254626195),i=ut(i,s,n,o,t.getUint32(56,!0),17,2792965006),o=ut(o,i,s,n,t.getUint32(60,!0),22,1236535329),n=It(n,o,i,s,t.getUint32(4,!0),5,4129170786),s=It(s,n,o,i,t.getUint32(24,!0),9,3225465664),i=It(i,s,n,o,t.getUint32(44,!0),14,643717713),o=It(o,i,s,n,t.getUint32(0,!0),20,3921069994),n=It(n,o,i,s,t.getUint32(20,!0),5,3593408605),s=It(s,n,o,i,t.getUint32(40,!0),9,38016083),i=It(i,s,n,o,t.getUint32(60,!0),14,3634488961),o=It(o,i,s,n,t.getUint32(16,!0),20,3889429448),n=It(n,o,i,s,t.getUint32(36,!0),5,568446438),s=It(s,n,o,i,t.getUint32(56,!0),9,3275163606),i=It(i,s,n,o,t.getUint32(12,!0),14,4107603335),o=It(o,i,s,n,t.getUint32(32,!0),20,1163531501),n=It(n,o,i,s,t.getUint32(52,!0),5,2850285829),s=It(s,n,o,i,t.getUint32(8,!0),9,4243563512),i=It(i,s,n,o,t.getUint32(28,!0),14,1735328473),o=It(o,i,s,n,t.getUint32(48,!0),20,2368359562),n=pt(n,o,i,s,t.getUint32(20,!0),4,4294588738),s=pt(s,n,o,i,t.getUint32(32,!0),11,2272392833),i=pt(i,s,n,o,t.getUint32(44,!0),16,1839030562),o=pt(o,i,s,n,t.getUint32(56,!0),23,4259657740),n=pt(n,o,i,s,t.getUint32(4,!0),4,2763975236),s=pt(s,n,o,i,t.getUint32(16,!0),11,1272893353),i=pt(i,s,n,o,t.getUint32(28,!0),16,4139469664),o=pt(o,i,s,n,t.getUint32(40,!0),23,3200236656),n=pt(n,o,i,s,t.getUint32(52,!0),4,681279174),s=pt(s,n,o,i,t.getUint32(0,!0),11,3936430074),i=pt(i,s,n,o,t.getUint32(12,!0),16,3572445317),o=pt(o,i,s,n,t.getUint32(24,!0),23,76029189),n=pt(n,o,i,s,t.getUint32(36,!0),4,3654602809),s=pt(s,n,o,i,t.getUint32(48,!0),11,3873151461),i=pt(i,s,n,o,t.getUint32(60,!0),16,530742520),o=pt(o,i,s,n,t.getUint32(8,!0),23,3299628645),n=mt(n,o,i,s,t.getUint32(0,!0),6,4096336452),s=mt(s,n,o,i,t.getUint32(28,!0),10,1126891415),i=mt(i,s,n,o,t.getUint32(56,!0),15,2878612391),o=mt(o,i,s,n,t.getUint32(20,!0),21,4237533241),n=mt(n,o,i,s,t.getUint32(48,!0),6,1700485571),s=mt(s,n,o,i,t.getUint32(12,!0),10,2399980690),i=mt(i,s,n,o,t.getUint32(40,!0),15,4293915773),o=mt(o,i,s,n,t.getUint32(4,!0),21,2240044497),n=mt(n,o,i,s,t.getUint32(32,!0),6,1873313359),s=mt(s,n,o,i,t.getUint32(60,!0),10,4264355552),i=mt(i,s,n,o,t.getUint32(24,!0),15,2734768916),o=mt(o,i,s,n,t.getUint32(52,!0),21,1309151649),n=mt(n,o,i,s,t.getUint32(16,!0),6,4149444226),s=mt(s,n,o,i,t.getUint32(44,!0),10,3174756917),i=mt(i,s,n,o,t.getUint32(8,!0),15,718787259),o=mt(o,i,s,n,t.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=o+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=s+r[3]&4294967295}reset(){this.state=Uint32Array.from(NF),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}};function bl(e,t,r,n,o,i){return t=(t+e&4294967295)+(n+i&4294967295)&4294967295,(t<<o|t>>>32-o)+r&4294967295}function ut(e,t,r,n,o,i,s){return bl(t&r|~t&n,e,t,o,i,s)}function It(e,t,r,n,o,i,s){return bl(t&n|r&~n,e,t,o,i,s)}function pt(e,t,r,n,o,i,s){return bl(t^r^n,e,t,o,i,s)}function mt(e,t,r,n,o,i,s){return bl(r^(t|~n),e,t,o,i,s)}function pj(e){return typeof e=="string"?e.length===0:e.byteLength===0}function mj(e){return typeof e=="string"?Dt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var MF=typeof TextEncoder=="function"?new TextEncoder:null,UF=e=>{if(typeof e=="string"){if(MF)return MF.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){let n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)};var PF=e=>({apiVersion:"2006-03-01",base64Decoder:e?.base64Decoder??uo,base64Encoder:e?.base64Encoder??$r,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Vc,extensions:e?.extensions??[],getAwsChunkedEncodingStream:e?.getAwsChunkedEncodingStream??Gb,httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Rk,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new lo},{schemeId:"aws.auth#sigv4a",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4a"),signer:new ws}],logger:e?.logger??new On,sdkStreamMixin:e?.sdkStreamMixin??Hf,serviceId:e?.serviceId??"S3",signerConstructor:e?.signerConstructor??Uc,signingEscapePath:e?.signingEscapePath??!1,urlParser:e?.urlParser??yi,useArnRegion:e?.useArnRegion??!1,utf8Decoder:e?.utf8Decoder??Dt,utf8Encoder:e?.utf8Encoder??Nn});var GF=W(MI());var OF=["in-region","cross-region","mobile","standard","legacy"];var qF=({defaultsMode:e}={})=>gx(async()=>{let t=typeof e=="function"?await e():e;switch(t?.toLowerCase()){case"auto":return Promise.resolve(hj()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${OF.join(", ")}, got ${t}`)}}),hj=()=>{let t=(typeof window<"u"&&window?.navigator?.userAgent?GF.default.parse(window.navigator.userAgent):void 0)?.platform?.type;return t==="tablet"||t==="mobile"};var HF=e=>{let t=qF(e),r=()=>t().then(Mx),n=PF(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??UF,credentialDefaultProvider:e?.credentialDefaultProvider??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??EF({serviceId:n.serviceId,clientVersion:cF.version}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??FF,maxAttempts:e?.maxAttempts??Qo,md5:e?.md5??Sl,region:e?.region??TF("Region is missing"),requestHandler:XA.create(e?.requestHandler??r),retryMode:e?.retryMode??(async()=>(await r()).retryMode||Mu),sha1:e?.sha1??dF,sha256:e?.sha256??CF,streamCollector:e?.streamCollector??ZA,streamHasher:e?.streamHasher??RF,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(U_)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(P_))}};var LF=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},KF=e=>({region:e.region()});var JF=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let i=t.findIndex(s=>s.schemeId===o.schemeId);i===-1?t.push(o):t.splice(i,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},zF=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()});var xl=e=>e,VF=(e,t)=>{let r={...xl(LF(e)),...xl(qx(e)),...xl(Cb(e)),...xl(JF(e))};return t.forEach(n=>n.configure(r)),{...e,...KF(r),...Hx(r),...Bb(r),...zF(r)}};var _l=class extends gc{config;constructor(...[t]){let r=HF(t||{}),n=Nk(r),o=c_(n),i=O0(o),s=sD(i),a=O_(s),A=a,c=Y_(A),l=G_(c),g=Tk(l),d=o_(g,{session:[()=>this,pl]}),f=VF(d,t?.extensions||[]);super(f),this.config=f,this.middlewareStack.use(M_(this.config)),this.middlewareStack.use(AD(this.config)),this.middlewareStack.use(H_(this.config)),this.middlewareStack.use(G0(this.config)),this.middlewareStack.use(q0(this.config)),this.middlewareStack.use(L0(this.config)),this.middlewareStack.use(Fb(this.config,{httpAuthSchemeParametersProvider:kk,identityProviderConfigProvider:async u=>new nc({"aws.auth#sigv4":u.credentials,"aws.auth#sigv4a":u.credentials})})),this.middlewareStack.use(Nb(this.config)),this.middlewareStack.use(A_(this.config)),this.middlewareStack.use(wb(this.config)),this.middlewareStack.use(V0(this.config)),this.middlewareStack.use(Su(this.config)),this.middlewareStack.use(bu(this.config))}destroy(){super.destroy()}};function Bj(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let i of o){let s=n[i.target];if(s){let a;typeof s=="string"?yj(s,e)?a=e.base64Decoder(s):(a=e.utf8Decoder(s),n[i.target]=e.base64Encoder(a)):(a=ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s),n[i.target]=e.base64Encoder(a));let A=new e.md5;A.update(a),n[i.hash]=e.base64Encoder(await A.digest())}}return t({...r,input:n})}}var Ej={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},YF=e=>({applyToStack:t=>{t.add(Bj(e),Ej)}});function yj(e,t){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))return!1;try{return t.base64Decoder(e).length===32}catch{return!1}}var Dl=class extends ho.classBuilder().ep({...Yc,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,o){return[WA(n,this.serialize,this.deserialize),kc(n,t.getEndpointParameterInstructions()),P0(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),K0(n),hc(n),YF(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(Gk,Ok).ser(Vk).de(Wk).build(){};async function vi(e,t){if(!e)return;let r=new _l({region:t.region,credentials:{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,sessionToken:t.sessionToken}}),n=new Dl({Bucket:t.bucket,Key:t.s3Key,Body:e,ContentType:e.type}),o=await r.send(n);return{success:o.$metadata.httpStatusCode===200,etag:o.ETag,versionId:o.VersionId,...t}}var vt="/library",WF="/uploader";async function jF(){let t=await ov(async n=>{let o=await ce(`${vt}/v1/user/urls?${Ie}&pageSize=100&pageCount=${n}`);return await T({wisebaseAllSavedUrlsSyncTime:o.syncTime}),{total:o.total,data:o?.datas||[]}}),r=t.reduce((n,o)=>{let i=o.url;return n[i]={fileId:o.fileId,wisebaseId:o.wisebaseId},n},{});return await T({wisebaseAllSavedUrlMap:r}),t}async function kl(){let{wisebaseAllSavedUrlsSyncTime:e}=await H({wisebaseAllSavedUrlsSyncTime:""});if(!e)return;let t=await G(`${vt}/v1/highlights/sync-batch?${Ie}`,{lastSyncTime:e});await T({wisebaseAllSavedUrlsSyncTime:t.syncTime});let{wisebaseAllSavedUrlMap:r}=await H({wisebaseAllSavedUrlMap:{}});t.urlList?.length>0&&t.urlList.forEach(n=>{n.isDeleted?delete r[n.url]:r[n.url]={fileId:n.fileId,wisebaseId:n.wisebaseId||"inbox"}}),await T({wisebaseAllSavedUrlMap:{...r}})}async function Qj(e,t){let r=await G(`${WF}/v1/file/upload-permission?${Ie}`,{type:e.type.includes("html")?"webpage":"file",name:e.name,mime:e.type,hash:await Ao(e.size>0||!t?e:t),size:e.size,subFiles:t?[{id:t.type.includes("html")?"readable":"subtitle",name:t.name,mime:t.type,size:t.size}]:void 0}),n=!r.fileExists;return[r,...r.subCredentials||[]].map(i=>{let s=i.credentials;return{needUpload:n,fileId:i.fileId,id:i.id,sessionToken:s?.session_token,accessKeyId:s?.access_key_id,secretAccessKey:s?.secret_access_key,bucket:s?.bucket,s3Key:s?.s3_key,region:s?.region}})}async function wj(e){return await G(`${WF}/v1/file/complete?${Ie}`,{id:e.id,meta:e.meta,tasks:e.tasks})}async function UI({mainFile:e,subFile:t,url:r,title:n}){let[o,i]=await Qj(e,t);return Promise.all([o.needUpload&&vi(e,o),i?.needUpload&&vi(t,i)]).then(()=>{e&&o.needUpload&&o.fileId&&wj({id:o.fileId,meta:{url:r,fileName:n||e.name,fileType:e.type||"text/html",fileSize:e.size},tasks:[{type:"RAG"}]})}),[o,i]}async function XF(e){if(!e.mainFile)throw new Error("main File is empty");let t=e.type==="video",r=e.mainFile,n=t?e.subtitleFile:e.readableFile,[o]=await UI({mainFile:r,subFile:n,url:e.type==="image"?void 0:e.url,title:e.title||r.name});return(await pb(`${vt}/v1/files?${Ie}`,{url:e.type==="image"?void 0:e.url,wisebaseId:e.wisebaseId,siderFileId:o.fileId,logicFileType:r.type.includes("html")?"webpage":"file",fileName:e.title||r.name,fileType:r.type||"text/html",fileSize:r.size}))?.libraryFileId}function ZF(e,t){return zA(`${vt}/v1/files/${e}?${Ie}&wisebaseId=${t}`)}async function $F(e,t,r,n){let o=await G(`${vt}/v1/files/actions/move?${Ie}`,{id:e,sourceId:t,targetId:r,generateNote:r&&r!=="inbox"},{signal:n}),{wisebaseAllSavedUrlMap:i}=await H({wisebaseAllSavedUrlMap:{}});for(let s of Object.values(i))if(s.fileId===e){s.wisebaseId=r;break}return await T({wisebaseAllSavedUrlMap:{...i}}),o}async function ev(e){let t=await H("language","en");return(await G(`${vt}/v1/highlight?${Ie}`,{...e,lang:t}))?.id}function tv(e,t,r){return G(`${vt}/v1/highlights/delete-batch?${Ie}`,{ids:e,fileId:t,wisebaseId:r})}async function rv(e){try{return(await G(`${vt}/v1/highlights/list-by-url?${Ie}`,{url:e}))?.data||[]}catch(t){if(t.reason==="GET_LIST_FAILED"){let{wisebaseAllSavedUrlMap:r}=await H({wisebaseAllSavedUrlMap:{}});delete r[e],await T({wisebaseAllSavedUrlMap:{...r}})}throw t}}async function nv(e){return(await G(`${vt}/v1/wisebase?${Ie}`,{icon:{type:"format",color:"--color-text-primary-3"},name:e}))?.wisebaseId}async function Ri(){let t=await ov(async i=>{let s=await ce(`${vt}/v1/wisebases?${Ie}&pageSize=100&pageCount=${i}`);return{total:s.total,data:s?.data||[]}}),r=t.map(i=>({name:i.name,wisebaseId:i.wisebaseId}));await T({wisebaseAllWisebases:r});let{wisebaseDefaultWisebaseId:n}=await H({wisebaseDefaultWisebaseId:"inbox"});n!=="inbox"&&!r.find(i=>i.wisebaseId===n)&&await T({wisebaseDefaultWisebaseId:"inbox"});let{wisebaseAllSavedUrlMap:o}=await H({wisebaseAllSavedUrlMap:{}});for(let[i,s]of Object.entries(o))s.wisebaseId&&s.wisebaseId!=="inbox"&&!r.find(a=>a.wisebaseId===s.wisebaseId)&&delete o[i];return await T({wisebaseAllSavedUrlMap:{...o}}),t}async function ov(e){let t=[],r=1,n=0,o=await e(r);for(n=+o.total,t.push(...o.data);t.length<n;){let i=await e(++r);if(i.data?.length>0)t.push(...i.data);else break}return t}async function iv({wisebaseId:e,content:t,meta:r,urls:n}){return(await G(`${vt}/v1/notes/actions/${r?"convert":"create"}-generate?${Ie}`,{wisebaseId:e,...r?{meta:r}:{content:t},...n?.length?{urls:n}:null}))?.id}async function sv(e,t,r,n){return await G(`${vt}/v1/resources/actions/move?${Ie}`,{items:[{type:"note",id:e}],sourceId:t,targetId:r},{signal:n})}async function av(e){return G(`${vt}/v1/note/enhance/${e.id}/move?${Ie}`,e)}async function Av(e){return co(`${vt}/v1/note/${e}?${Ie}`,{},{method:"DELETE"})}var _o="record-background.html",$s=null;async function Ti(e){await PI(e)||($s?await $s:($s=chrome.offscreen.createDocument({url:e,reasons:["WEB_RTC","LOCAL_STORAGE","BLOBS","USER_MEDIA"],justification:"reason for needing the document"}),await $s,$s=null))}async function PI(e){let t=chrome.runtime.getURL(e);if("getContexts"in chrome.runtime)return!!(await chrome.runtime.getContexts({contextTypes:["OFFSCREEN_DOCUMENT"],documentUrls:[t]})).length;{let r=await clients.matchAll();for(let n of r)if(n.url===t)return!0;return!1}}async function cv(e){try{let t=await chrome.windows.getAll({populate:!0,windowTypes:["popup","normal"]}),r=chrome.runtime.getURL(e);for(let n of t)if(n.tabs&&n.tabs.length>0&&n.tabs[0].url===r)return n;return null}catch{return null}}var lv="Wisebase";var OI=W(Ae(),1);async function gv(){let{wisebaseAllSavedUrlMap:e}=await H({wisebaseAllSavedUrlMap:{}});return e}async function Sj(){let e=(await sr()).id;if(typeof window<"u")return OI.default.runtime.sendMessage({type:"GET_READABILITY_TEXT_FROM_TAB",tabId:e});if(e)return OI.default.tabs.sendMessage(e,{type:"get-readability-text"})}async function Fl(){let e=await Sj();if(!e)return null;if(e.type==="webpage")return{type:e.type,title:e.title,description:e.description,mainFile:new File([new Blob([e.html||""])],e.title,{type:"text/html"}),readableFile:new File([new Blob([e.readableHtml||""])],e.title,{type:"text/html"}),subtitleFile:null};if(e.type==="video")return{type:e.type,title:e.title,description:e.description,mainFile:new File([new Blob([e.html||""])],e.title,{type:"text/html"}),readableFile:null,subtitleFile:e.subTitle?new File([new Blob([JSON.stringify(e.subTitle)])],e.title,{type:"application/json"}):null};if(e.type==="pdf")return{type:e.type,title:e.title,description:"",mainFile:await bj(e.pdfUrl),readableFile:null,subtitleFile:null}}async function bj(e){let r=await(await fetch(e)).blob();return new File([r],e,{type:"application/pdf"})}var dv=async(e,t)=>{let r=await H("wisebaseDefaultWisebaseId","inbox"),n=t?.type==="image"?null:await Fl(),o=n?.title||"",i=n?.description||"",s=n?.readableFile||null,a=n?.subtitleFile||null,A=null;if(t?.type==="image"){await Ti(_o);let d=await xt("offscreen-fetch-blob",e),f=await fetch(d).then(u=>u.blob());A=new File([f],t.alt,{type:f.type})}else A=n?.mainFile||null;let c={type:t?.type==="image"?"image":n?.type||"",wisebaseId:r,url:e,title:o,description:i,mainFile:A,readableFile:s,subtitleFile:a},l=1e8;if(A&&A.size>l||a&&a.size>l)throw new Error("FILE_TOO_LARGE");let g="";try{g=await XF(c)}catch(d){if(d.reason==="URL_WAS_REPEATED"||d.reason==="FILE_ALREADY_EXIST")g=d.metadata.file_id,r=d.metadata.wisebase_id||d.metadata.project_id;else throw(d.reason==="WISEBASE_NOT_EXIST"||d.reason==="PROJECT_NOT_EXIST")&&Ri(),d}if(t?.type!=="image"){let d=await gv();T({wisebaseAllSavedUrlMap:{...d,[e]:{fileId:g,wisebaseId:r}}})}return{fileId:g,wisebaseId:r}};var Dj={apiSyncWisebaseAllSavedUrls:kl,apiSaveWisebaseItem:dv,apiUnsaveWisebaseItem:ZF,apiCreateHighlight:ev,apiGetHighlights:rv,apiRemoveHighlights:tv,apiCreateWisebase:nv,apiGetWisebases:Ri,apiMoveWisebaseItem:$F,apiCreateNote:iv,apiMoveNote:sv,apiMoveEnhanceNote:av,apiGetTaskCenterList:mb,apiChangeTaskCenterItemStatus:hb,apiDeleteNote:Av},fv={};function uv(e){if(e.abort){fv[e.type]?.abort();return}let t=e.data||[],r=Dj[e.type],n=new AbortController;if(fv[e.type]=n,r)return kj(r)(...t,n.signal)}function kj(e){return async(...t)=>{let r,n;try{r=await e(...t)}catch(o){n=$n(o)}return{error:n,data:r}}}var Iv=W(Ae(),1);async function ea(){let{generatedRandomId:e}=await j({generatedRandomId:""});if(!e){let t=await Fj();return t||(t=te(),vj(t)),Iv.default.storage.local.set({generatedRandomId:t}),t}return e}var pv=le.origin.replace(/\/\/\w+?\./,"//Y2hhdGdwdC1zaWRlYmFy."),mv="zgv2awnlswq";async function Fj(){try{return await Nd({url:pv,name:mv})}catch{return""}}async function vj(e){let t=Math.round(Date.now()/1e3)+31104e3;try{return await Md({url:pv,name:mv,value:e,expirationDate:t,secure:!0})}catch{}}var Rj=W(Ae(),1);var Cv=W(Ae(),1);async function hv(e,t=5e3){return co("/v1/image/manage/sync",{cids:e},{method:"POST"},{timeout:t})}function vl(e){return Sn(le.origin,e)}async function zn(){At({url:vl("/login")})}async function Bv(){At({url:vl("/invite")})}async function GI({openerTabId:e,subRoute:t="painter",hasDataToSend:r=!1}={}){if(!await H("painterMigrated",!1)){e:{let{"sider-image-creator:conversations":i}=await j({"sider-image-creator:conversations":[]});if(!i.length)break e;let s=i.map(c=>`sider-image-creator:messages:${c.id}`),a=await Cv.default.storage.local.get(s),A=Object.values(a).map(c=>c.cid).filter(c=>!!c);if(!A.length)break e;await hv(A,5e3).catch(Mt)}Vt("painterMigrated",!0)}let o={painter:"ai-image-generator","remove-background":"background-remover","remove-brushed-area":"photo-eraser","upscale-image":"image-upscaler","replace-background":"photo-background-changer","remove-text":"text-remover",inpaint:"inpaint"}[t]??"";return At({url:vl(`/create/image/${o}${r?"?from=ext":""}`),openerTabId:e})}var qI={token:"",refresh_token:"","userinfo-type":"","userinfo-avatar":"","userinfo-name":""};async function xe(){let e=await Do("userinfo-type"),t=await Do("token");return e===null?null:!!(t&&e&&e!=="device")}async function Es(){await T({__manual_logout__:!0}),await We(Object.keys(qI)),await We("userInfo"),await T({logged:!1})}async function HI(){let{vipInfo:e}=await j({vipInfo:{isVIP:!1,isTrial:!1,payment:{interval:""},userTypeDetail:"login",planName:"",resetTimeSec:0,"gpt-3.5":{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},"gpt-4":{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},eliteCredit:{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},trial:{chatFile:{total:0,remain:0,used:0},painter:{total:0,remain:0,used:0},videoSummary:{total:0,remain:0,used:0},tts:{total:0,remain:0,used:0},shortVideo:{total:0,remain:0,used:0},artifacts:{total:0,remain:0,used:0},search:{total:0,remain:0,used:0},text_to_image:{total:0,remain:0,used:0},data_analysis:{total:0,remain:0,used:0},thinking_mode:{total:0,remain:0,used:0}},"image-creator":{total:0,remain:0,used:0,extraTotal:0,extraRemain:0,period:"total"},summary:{total:0,remain:0,cost:3,period:"total"},ocr:{cost:1},reader:{total:0,remain:0,used:0,limitSize:104857600,period:"total"}}});return e}async function Rn(e){let t=await HI();return typeof e=="function"&&(e=e(t)),As(t,e,(r,n)=>{if(Array.isArray(r))return n}),T({vipInfo:t})}async function jr(){let e=await ko();return e?{...e,anonymous:!1}:{token:"",refreshToken:"",anonymous:!1}}async function ko(){if(await xe()){let e=await Do("token"),t=await Do("refresh_token");return e?{token:e,refreshToken:t}:null}return null}async function LI(){let e=await Do("userinfo-type"),t=await Do("userinfo-avatar"),r=await Do("userinfo-name"),n=await H("userInfo");return{id:n?.id,avatar:n?.avatar||t,name:n?.nickname||r,email:n?.email,phone:n?.phone,registerAt:n?.register_at,registerType:n?.register_type||e}}async function Do(e){let{__manual_logout__:t,__force_logout_reason__:r}=await j({__manual_logout__:!1,__force_logout_reason__:""});if(t||r)return"";try{let n=await EA(e);if(!n)throw new Error("");return T({[e]:n}),n}catch{return(await j({[e]:""}))[e]}}function Ge(e,t=!1){let r=new Map,n=new WeakMap,o=s=>{let a=r.get(s);return a||(t?a=s.replace(/[A-Z]/g,A=>`_${A.toLowerCase()}`):a=s.replace(/_([a-z])/g,(A,c)=>c.toUpperCase()),r.set(s,a),a)},i=s=>{if(s===null||typeof s!="object")return s;if(n.has(s))return n.get(s);if(Array.isArray(s)){let A=s.map(i);return n.set(s,A),A}let a={};n.set(s,a);for(let A in s)if(Object.prototype.hasOwnProperty.call(s,A)){let c=o(A);a[c]=i(s[A])}return a};return i(e)}var K=mA,$=at,se=Intl.DateTimeFormat().resolvedOptions().timeZone,Ie=`app_name=${K}&app_version=${$}&tz_name=${se}`,KI="ChitChat_Ext",JI="ChitChat_Ext_UserStatus",X={async refreshToken(e){let t=await G("/v1/user/token/refresh",{refresh_token:e},{noAuth:!0});return{token:t.token.token,refreshToken:t.token.refresh_token}},getSiderAnonymousToken:Sr(async()=>{let e=await ea();return G("/v1/user/login/device_id",{device_id:e,uuid:e,app_name:K,app_version:$},{noAuth:!0})}),getUserInfo:async()=>{let e=await ce(`/v1/user/info?app_name=${K}&app_version=${$}`);return await T({userInfo:e}),e},getVipInfo:Ev,getVipInfoCached:Sr(Ev,5e3),getVipPeriodInfo:Sr(async()=>{let e=await ce(`/v1/completion/limit/static?app_name=${K}&app_version=${$}&tz_name=${se}`);return await T({vipPeriodInfo:e}),e},3e3),async getPricingPlan(){let e=await ce("/v1/app/ipinfo",null,{noAuth:!0}),t=e.region==="CN"||se==="Asia/Shanghai"&&await H("language","en")==="zh_CN",r=await ce(`/v1/payment/pricing?from=web&location=${t?"CN":e.region}`,null,{noAuth:!0});Vt({isCNUser:t,pricingPlan:r.plan.map(n=>({name:n.name,displayName:n.display_name,currency:n.currency,interval:n.interval,originPrice:n.origin_price/100,price:n.price/100,discount:n.discount/100||0,current:n.id==r.current_plan?.id}))})},getClientConfig:async e=>{let t=await ce(`/v1/app/config?app_name=${K}&app_version=${$}&tz_name=${se}`);return t&&await T({configByServer:t}),e?t?.[e]:t},getUserSettings:Sr(async()=>await xe()?(await ce(`/v1/user/settings?app_name=${K}&keys=${KI}`)).keys?.[KI]:{},2e3),setUserSettings(e){if(!(!e||Object.keys(e).length===0))return bn(()=>G("/v1/user/settings",{app_name:K,key:KI,key_setting:e}))},getUserStatus:Sr(async()=>{let t=(await ce(`/v1/user/settings?app_name=${K}&keys=${JI}`)).keys?.[JI];return t&&Object.keys(t).length&&await T({userStatus:t}),t},2e3),async setUserStatus(e){if(!e||Object.keys(e).length===0)return;await bn(()=>G("/v1/user/settings",{app_name:K,key:JI,key_setting:e}));let{userStatus:t}=await H({userStatus:{}});T({userStatus:{...t||{},...e}})},getUserPromptList(e){return ce(`/v1/prompt/list?type=${e}&page_size=999`)},getAllPromptList:async()=>{let e=await H({language:"",chatVisiblePromptKeys:null,readVisiblePromptKeys:null,writeVisiblePromptKeys:null}),t=e.language;if(!t)throw new Error("no language");let r=await X.getUserSettings(),[n,o]=await Promise.all([ce(`/v1/prompt/list_all?app_name=${K}&page_size=999&language=${t}`,null,{headers:{Authorization:(await ko())?.token||""}}),ce(`/v1/prompt/list?type=special&app_name=${K}&page_size=999&language=${t}`,null,{headers:{Authorization:(await ko())?.token||""}})]),i=n.List;i.sort((p,w)=>(p.sort!==0||p.key==="improve_writing")&&(w.sort!==0||w.key==="improve_writing")?w.sort-p.sort:w.sort===0?1:p.sort===0?-1:0);let s=i.reduce((p,w)=>(p[w.key||w.id]=w,p),{});function a(p){return{id:String(p.id),key:String(p.key||p.id),isCustom:!p.key||p.key.startsWith("custom"),name:p.display_name||p.name,shortName:p.short_name,content:p.content,icon:p.icon,placeholder:p.placeholder,usedIn:p.use||void 0,children:p.has_child?[]:void 0,parentKey:p.parent_key}}let A=[],c={};for(let p of i){let{key:w,has_child:F,parent_key:E}=p;if(F){if(!(w in c)){let B=a(p);c[w]=B,A.push(B)}continue}if(E){let B=s[E];if(!B)continue;if(!(E in c)){let y=a(B);c[E]=y,A.push(y)}c[E]?.children?.push(a(p));continue}let b=a(p);A.push(b)}let l=new Map(A.map(p=>[p.key,p]));function g(p,w){let F=l.get(p);if(F){let{usedIn:E}=F;return!E||E.includes(w)}return!1}function d(p,w=!1){let F=[];for(let E of A)g(E.key,p)&&(!w||E.isCustom)&&F.push(E.key);return F}let f=n.Sort,u={chat:["chatVisiblePromptKeys","ChatAsk"],read:["readVisiblePromptKeys","ReadingAssistant"],write:["writeVisiblePromptKeys","WritingAssistant"]},m={};for(let[p,[w,F]]of Object.entries(u)){let E=f[F].split(",").map(y=>y.trim()).filter(y=>l.has(y)),b=r?.[w],B=e[w]||b;if(B?m[w]=qd([...B.filter(y=>l.has(y)),...d(p)]):m[w]=qd([...d(p,!0),...E,...d(p)]),b?.length){let y=b.reduce((v,U,V)=>(v[U]=V,v),{});m[w].sort((v,U)=>{let V=y[v],L=y[U],D=V===void 0,x=L===void 0;return D&&x?0:D?1:x?-1:V-L})}}let C=o.List.map(p=>a(p));await T({...m,allPromptList:A,specialPromptList:C,__DONT_SYNC__:`visiblePromptKeys${Date.now()}`})},createPrompt(e){return bn(()=>G("/v1/prompt/create",{is_template:!1,type:"sidebar",...e}))},editUserPrompt(e){return bn(()=>G("/v1/prompt/edit",e))},delUserPrompt(e){return bn(()=>G("/v1/prompt/update",{id:e,status:"Deleted"}))},async uploadHistoryMsg(e,t){let r=await G("/chat/v1/conversation/create",{title:t,messages:e},{headers:{"X-App-Name":K,"X-App-Version":$,"X-Time-Zone":se,"X-Trace-Id":te()}});return{conversation:r.conversation,messages:r.messages}},uploadConversion(e){return G("/v1/conversation/upload",{share:!0,app_name:K,app_version:$,messages:e})},saveConversion(e){return G("/v1/conversation/upload",{save_by_user:!0,app_name:K,app_version:$,messages:e})},async shareConversion(e){return(await ce(`/v1/conversation/share/${e}`)).share_key},saveSiderConversion(e){return ce(`/v1/conversation/save-by-user/${e}`)},unSaveSiderConversion(e){return ce(`/v1/conversation/unsave-by-user/${e}`)},delConversion(e){return zA(`/v1/conversation/delete/${e}`)},checkGrammarError(e){return G("/v1/completion/grammar_check",{content:e,tz_name:se,app_name:K,app_version:$})},async improveWriting(e){let t=Ut(kr,1e3,{leading:!0});return G("/v1/completion/improve_writing",{content:e.content,model:e.model,tz_name:se,app_name:K,app_version:$},{onStreamData({data:r,done:n}){!n&&r&&e.quota&&t(e.quota,r),e.onStreamData({text:r?.text||"",done:n})},getAbortMethod:e.getAbortMethod})},async sendFeedback({title:e,detail:t,email:r}){let n=await ko();return G("/v1/app/feedback",{title:e,email:r,data:{detail:t},app_name:K,app_version:$},{headers:{Authorization:n?.token||""}})},async sendFiveStarFeedback(e,t){let r=await ko(),n=await H("language","en"),o=`[FiveStarRate][${at}][${n}] Feedback by FiveStarRate`;return G("/v1/app/feedback",{title:o,data:{from:t,detail:e},app_name:K,app_version:$},{headers:{Authorization:r?.token||""}})},async sendSearchAgentDislikeFeedback(e,t,r){let n=await ko(),o=await H("language","en"),i=`[SearchAgentDislike][${at}][${o}] Feedback by SearchAgentDislike`;return G("/v1/app/feedback",{title:i,data:{from:t,feedbackData:r||{}},app_name:K,app_version:$},{headers:{Authorization:n?.token||""}})},async getInviteRewardConfig(){let e=await ce("/v1/invite/config",null,{noAuth:!0});return await T({inviteRewardConfig:{"gpt3.5":e.GPT3Dot5Count,gpt4:e.GPT4Count,"1_person_gpt3.5":e.SendUpTo1GPT3Dot5Count,"1_person_gpt4":e.SendUpTo1GPT4Count,"2_person_gpt3.5":e.SendUpTo2GPT3Dot5Count,"2_person_gpt4":e.SendUpTo2GPT4Count}}),e},async getInvitedFriendsList(){let e=await ce("/v1/invite/list?page=1&page_size=1");return e?.list&&T({invitedFriendsCount:e.list.filter(t=>t.status==="Finished").length}),e},createInviteLink(){return G("/v1/invite/create",{type:"link"})},async getInviteRewardCount(e){let t=await ce(`/v1/invite/reward?app_name=${K}&app_version=${$}&last_req_time=${e}`);return{addedQuery:t.recent_reward_gpt3dot5_count+t.recent_reward_gpt4_count,addedUser:t.recent_invited_count}},inviteFinish:async()=>{let e=await ea();return G("/v1/invite/finish",{device_id:e})},async summaryVideo(e){function t(f){if(f?.total)if(e.vip){let u={"gpt-3.5":{total:f.total,remain:f.remain,extraTotal:f.extra_total,extraRemain:f.extra_quota,period:f.remain_period}};Rn(u)}else{let u={summary:{remain:f.remain}};Rn(u)}}let r=Ut(t,1e3,{leading:!0}),n={app_name:K,app_version:$,tz_name:se,content:e.text,title:e.title,language:e.lang,source:e.source,source_type:e.sourceType,request_id:te(),cid:""},o=[];e.getAbortMethod(()=>{for(let f of o)f()});let{content:i,cid:s,...a}=n,A=null;try{A=await G("/v1/completion/summarize_init",a,{getAbortMethod(f){o.push(f)}})}catch{}A&&(n.cid=A.cid||"");let c=G("/v1/completion/summarize_all",n,{onStreamData({data:f,done:u}){!u&&f&&r(f),e.onStreamData({text:f?.text||"",done:u})},getAbortMethod(f){o.push(f)}}),l=G("/v1/completion/summarize",n,{getAbortMethod(f){o.push(f)}}),[g,d]=await Promise.all([c,l]);return t(d),{text:d.text,subtitle:d.subtitle}},async summaryVideoByEid(e){function t(o){o?.total&&kr(o?.chat_model??"gpt-3.5",o,o.feature_info)}let r=Ut(t,1e3,{leading:!0}),n={app_name:K,app_version:$,tz_name:se,use_whisper:!!e.useWhisper,eid:e.eid,language:e.language,re_summarize:!!e.reSummarize};await G("/v1/completion/video_summarize",n,{onStreamData({data:o,done:i}){!i&&o?(r(o),o.type==="text"?e.onStreamTextData({text:o.text,done:i}):o.type==="text_done"?e.onStreamTextData({text:o.text,done:!0}):o.type==="key_moments"&&e.onKey_momentsData(o.key_moments)):e.onStreamTextData({text:"",done:i})},getAbortMethod:o=>{e.getAbortMethod&&e.getAbortMethod(()=>{o()})}})},async getSummaryCache(e){let{is_creator:t,eid:r,summary:n,key_moments:o,language:i,from_whisper:s}=await G("/v1/completion/video_info",{source:e.source,source_type:e.source_type,title:e.title,app_name:K,app_version:$,tz_name:se,language:e.language});return{is_creator:t,eid:r,summary:n,key_moments:o,from_whisper:s,language:i}},async getSummaryCacheRaw(e){let{is_creator:t,eid:r,summary:n,key_moments:o,language:i,task_id:s,subtitle:a,summary_language:A}=await G("/v1/completion/raw_video_info",{source:e.source,source_type:e.source_type,title:e.title,app_name:K,app_version:$,tz_name:se,language:e.language});return{is_creator:t,eid:r,summary:n,subtitle:a,task_id:s,key_moments:o,language:i,summary_language:A}},async uploadWhisperSubtitle(e,t){return(await G("/v1/whisper/upload-subtitle",{app_name:K,app_version:$,tz_name:se,url:e,summary_language:t})).task_id},async poolingWhisperProgress(e,t){let r=await G("/v1/whisper/progress",{app_name:K,app_version:$,tz_name:se,task_id:e,webpage_url:t});return await kr("gpt-4",r.quota_map),{eid:r.eid,subtitle:r.subtitle_info.subtitle,language:r.subtitle_info.language,progress:r.progress}},async uploadSubtitleCache(e){let t=new FormData;return t.append("video_url",e.videoUrl),t.append("language",e.language),t.append("subtitle",e.subtitle),t.append("app_name",K),t.append("app_version",$),G("/v1/video/cache_subtitle",t)},async getSubtitleCacheURL(e){let t={video_id:e.videoID,language:e.language,app_name:K,app_version:$};return(await ce("/v1/video/get_subtitle?"+new URLSearchParams(t))).subtitle_url},statUserStop(e,t){return G("/v1/completion/mark-user-stop",{app_name:K,app_version:$,cid:e,mid:t})},async OCR(e,t){let r=new FormData;return r.append("file",e),r.append("app_name",K),r.append("app_version",$),r.append("tz_name",se),(await G("/v1/ocr/math",r,{getAbortMethod:t}))?.result?.text||""},adStat(e){return G("/v1/lp/action",{...e,meta:{browser:Ye?"Edge":"Chrome",ext_version:at}},{noAuth:!0})},async googleAnalytics(e,t){if(!ta.default.tabs)return ta.default.runtime.sendMessage({type:"GA_API",args:[e,t]});let r=e.replace(/-/gi,"_");return r.length>40,G(`${Qw}?measurement_id=${ww}&api_secret=${Sw}`,{client_id:await ea(),events:[{name:r,params:{...t}}]},{noAuth:!0})},uploadImage(e){let t=new FormData;return t.append("file",e),G("/v1/imagechat/upload",t,{onProgress:r=>{}})},signImageCookie(){return ce(le.api+"/v1/user/sign-file-cookies")},createWisebaseByFileIds(e,t){return G("/library/v1/wisebase-by-files",{desc:e,fileIds:t},{headers:{"x-app-name":K,"x-app-version":$,"x-time-zone":se}})},createQuestionByFileIds({answerId:e,conversationId:t,questionId:r,siderFileId:n}){return G("/library/v1/files/question/by-file",{answerId:e,conversationId:t,questionId:r,siderFileId:n},{headers:{"x-app-name":K,"x-app-version":$,"x-time-zone":se}})},loadSiderModels(e){return ce(`/v1/app/load_models?app_name=${K}&app_version=${$}&lang=${e}`,null,{noAuth:!0})},loadWebsiteTools(e){return ce(`/v1/app/load_tools?app_name=${K}&app_version=${$}&lang=${e}`,null,{noAuth:!0})},uploadFile(e,t,r,n,o){let i=new FormData;return i.append("file",e),i.append("app_name",K),i.append("app_version",$),i.append("tz_name",se),r&&i.append("webpage_url",r),n&&i.append("file_for",n),G("/v1/embedding/upload-file",i,{onProgress:t,getAbortMethod:s=>{o&&o(()=>{s()})}}).then(s=>{try{(s?.text_ready||!s.is_embedding)&&$o([s?.id],!0)}catch{}return s})},async uploadFileV2({file:e,onProgress:t,url:r,title:n,desc:o,fileFor:i,getAbortMethod:s,meta:a,tasks:A,noDirectUpload:c=!1}){let l=e.type||Ib(e.name),g=[];l.startsWith("image")||g.push({type:"RAG"});let d=new FormData;return d.append("file",e),d.append("hash",String(await Ao(e))),d.append("mime",l),d.append("app_name",K),d.append("app_version",$),d.append("tz_name",se),d.append("tasks",JSON.stringify(A||[...g,...e.type.startsWith("audio")?[{type:"audioDuration"}]:[]])),r&&d.append("type","webpage"),(r||i||a||n||o)&&d.append("meta",JSON.stringify({url:r,title:n,desc:o,fileFor:i,...a||{}})),G(c?"/uploader/v1/file/upload":"/uploader/v1/file/upload-directly",d,{onProgress:t,getAbortMethod:f=>{s&&s(()=>{f()})},headers:{"x-app-name":K,"x-app-version":$,"x-time-zone":se,"x-trace-id":te()}}).then(f=>{let{fileID:u,cdnURL:m}=f;try{(f?.textReady||!f?.textInTask||l.startsWith("image"))&&$o([u],!0)}catch{}return{id:u,url:m,limit:f.limit}})},getUploadPermission({name:e,mime:t,hash:r,size:n,subFiles:o}){return G(`/uploader/v1/file/upload-permission?${Ie}`,{name:e,mime:t,hash:r,size:n,subFiles:o})},fileUploaded({fileID:e,tasks:t,meta:r}){return G(`/uploader/v1/file/complete?${Ie}`,{id:e,meta:r,tasks:t})},getFileStauts(e){return G("uploader/v1/files/status",e)},async getPromotionCountdown(e){return await ce(`/v2/user/promotion/promotion_info?app_name=${K}&app_version=${$}&tz_name=${se}${e?"&event_name="+e:""}`)},async getVoiceRoleList(){let e=yw,{voiceRoleList:t}=await j({voiceRoleList:[]});t?.length===0&&T({voiceRoleList:[e]});let n=(await ce(`/v1/audio/voice/list?app_name=${K}&app_version=${$}&tz_name=${se}&page=1&page_size=999`,null,{noAuth:!0})).list.map(o=>({name:o.name,avatar:o.avatar,gender:o.gender,platform:o.platform,requireVIP:o.need_premium}));T({voiceRoleList:[e,...n]}),Promise.allSettled(n.map(o=>new Promise((i,s)=>{o.avatar?.startsWith("http")?fetch(o.avatar).then(async a=>{o.avatar=await ir(await a.blob()),i("")}).catch(s):i("")}))).then(()=>{T({voiceRoleList:[e,...n]})})},async getTTSDemoText(){let{language:e}=await j({language:""});if(e){let t=await ce(`/v1/audio/audition/text?language_code=${e}`);return T({systemVoiceDemoText:t.text}),t.text}return""},async ttsPrepay(e,t){let r=await G("/v1/audio/speech/prepaid",{app_name:K,app_version:$,tz_name:se,texts:e.texts,voice:e.voice,scene:e.scene,scene_id:e.sceneId},{getAbortMethod:t});return r?.quota&&r?.quota_type&&kr(r.quota_type==="basic"?"gpt-3.5":"gpt-4",r.quota,r.feature_info),r},tts(e,t){return G("/v1/audio/speech",{app_name:K,app_version:$,tz_name:se,input:e.input,voice:e.voice,scene:e.scene,scene_id:e.sceneId,...e.demoLang?{audition_opt:{audition:!0,language_code:e.demoLang}}:null},{returnRawResponse:!0,getAbortMethod:t})},publishArtifact(e){return G("/v1/artifacts_publish",e)},unpublishArtifact(e){return G("/v1/artifacts_unpublish",e)},updateSpeakerName(e){return G("/chat/v1/conversation/speakers_attr",e,{headers:{"X-App-Name":K,"X-App-Version":$,"X-Time-Zone":se,"X-Trace-Id":te()}})},syncSingleChatHistory(e){return G("/chat/v1/history/sync",{...e},{headers:{"X-App-Name":K,"X-App-Version":$,"X-Time-Zone":se,"X-Trace-Id":te()}})},async getChatHistoryList(e,t,r=200){let o=[],i,s=[];async function a(A,c,l=0){try{return await G("/chat/v1/conversation/list",{sync_tag:A,limit:c,client_type:e,favorite:!0},{headers:{"X-App-Name":K,"X-App-Version":$,"X-Time-Zone":se,"X-Trace-Id":te()}})}catch(g){if(g.code===429)throw g;if(l<2){let d=Math.pow(2,l)*1e3;return await new Promise(f=>setTimeout(f,d)),a(A,c,l+1)}throw g}}try{let A=await a(t,r);for(o.push(...A.conversations),i=A.next_sync_tag,s=A.deleted_ids||[];A.has_more;)A=await a(A.next_sync_tag,r),o.push(...A.conversations),i=A.next_sync_tag,s=A.deleted_ids||[];return{conversations:o,next_sync_tag:i,deleted_ids:s,favorites:A.favorites||[]}}catch(A){throw A}},async getChatHistoryByCid(e,t,r=200,n){let i={id:"",cid:"",messages:[]},s,a=[];async function A(c,l,g,d=0){try{return await G("/chat/v1/conversation/messages",{cid:c,sync_tag:l,limit:g},{headers:{"X-App-Name":K,"X-App-Version":$,"X-Time-Zone":se,"X-Trace-Id":te()},getAbortMethod:n})}catch(f){if(f.name==="AbortError"&&Promise.reject(),d<2){let u=Math.pow(2,d)*1e3;return await new Promise(m=>setTimeout(m,u)),A(c,l,g,d+1)}throw f}}try{let c=await A(e,t,r),l=Ge(c);for(i={...i,id:l.conversation.cid,nextSyncTag:l.nextSyncTag,...l.conversation},i.messages.push(...l.messages),s=l.nextSyncTag,a=l.latestSwitchList||[];l.hasMore;){let g=await A(e,l.nextSyncTag,r);l=Ge(g),i={...i,id:l.conversation.cid,nextSyncTag:l.nextSyncTag,...l.conversation},i.messages.push(...l.messages),s=l.nextSyncTag,a=l.latestSwitchList||[]}return{chatData:i,conversation:l.conversation,next_sync_tag:s,latest_switch_list:a}}catch(c){throw c}},switchChatBranch(e,t,r){return G("/chat/v1/conversation/switch",{cid:e,message_id:t,current_leaf_message_id:r},{headers:{"X-App-Name":K,"X-App-Version":$,"X-Time-Zone":se,"X-Trace-Id":te()}})},updateConversationTitle(e,t){return G("/chat/v1/conversation/update",{cid:e,title:t},{headers:{"X-App-Name":K,"X-App-Version":$,"X-Time-Zone":se,"X-Trace-Id":te()}})},deleteConversation(e,t){return G("/chat/v1/conversation/delete",{cid:t,delete_type:e},{headers:{"x-app-name":K,"x-app-version":$,"x-time-zone":se,"x-trace-id":te()}})},async getCustomInstruction(){return await ce("/chat/v1/customize_instructions",null,{headers:{"X-App-Name":K,"X-App-Version":$,"X-Time-Zone":se,"X-Trace-Id":te()}})},updateCustomInstruction(e){return G("/chat/v1/customize_instructions",e,{headers:{"X-App-Name":K,"X-App-Version":$,"X-Time-Zone":se,"X-Trace-Id":te()}})}};async function Ev(){let e=await ce(`/v1/completion/limit/user?${Ie}`);if(!e.basic_credit.count)throw T({ERR_MUST_LOGIN:!0}),new Error("wrong_data");let t=e.user_type,r=["device","login","premium"],{vipPeriodInfo:n}=await j({vipPeriodInfo:null});n||(n=await X.getVipPeriodInfo());let o=n.basic_credit_period_info,i=n.advanced_credit_period_info,s=n.ocr_period_info,a=n.feature_total,A=e.feature_used,c={isVIP:e.user_type==="premium",isTrial:e.is_trial,payment:{interval:""},userTypeDetail:e.user_type_detail,resetTimeSec:e.basic_credit.reset_time,showNewPlan:!!e.show_new_plan,"gpt-3.5":{total:e.basic_credit.count,remain:e.basic_credit.remain,extraTotal:e.basic_credit.extra_total,extraRemain:e.basic_credit.extra_quota,used:e.basic_credit.used,period:e.basic_credit.period,maxToken:o[t]?.prompt_max_token,award:r.reduce((l,g)=>(l[g]={count:o[g].count},l),{})},"gpt-4":{total:e.advanced_credit.count,remain:e.advanced_credit.remain,extraTotal:e.advanced_credit.extra_total,extraRemain:e.advanced_credit.extra_quota,used:e.advanced_credit.used,period:e.advanced_credit.period,maxToken:i[t]?.prompt_max_token,award:r.reduce((l,g)=>(l[g]={count:i[g].count},l),{})},trial:{chatFile:{total:a.chat_file,used:A.chat_file,remain:a.chat_file-A.chat_file},painter:{total:a.painter,used:A.painter,remain:a.painter-A.painter},videoSummary:{total:a.video_summary,used:A.video_summary,remain:a.video_summary-A.video_summary},tts:{total:a.tts,used:A.tts,remain:a.tts-A.tts},data_analysis:{total:a.data_analysis,used:A.data_analysis,remain:a.data_analysis-A.data_analysis},artifacts:{total:a.artifacts,used:A.artifacts,remain:a.artifacts-A.artifacts},text_to_image:{total:a.text_to_image,used:A.text_to_image,remain:a.text_to_image-A.text_to_image},search:{total:a.search,used:A.search,remain:a.search-A.search},thinking_mode:{total:a.thinking_mode,used:A.thinking_mode,remain:a.thinking_mode-A.thinking_mode},...a.short_video?{shortVideo:{total:a.short_video,used:A.short_video,remain:a.short_video-A.short_video}}:{}},summary:{total:e.summarize.count,remain:e.summarize.remain,cost:e.summarize.deduct_count,period:e.summarize.period},ocr:{cost:s?.deduct_count||1},"image-creator":{total:e.image.count,remain:e.image.remain,used:e.image.used,extraTotal:e.image.extra_total,extraRemain:e.image.extra_quota,period:e.image.period},reader:{total:e.embedding.count,remain:e.embedding.remain,used:e.embedding.used,period:e.embedding.period,limitSize:e.embedding.size}};if(e.elite_credit&&(c.eliteCredit={total:e.elite_credit.count,remain:e.elite_credit.remain,extraTotal:e.elite_credit.extra_total,extraRemain:e.elite_credit.extra_quota,used:e.elite_credit.used,period:e.elite_credit.period}),e.plan_name&&(c.planName=e.plan_name),c.isVIP){let l=await ce(`/v1/payment/info?${Ie}`);c.payment.interval=l.interval}if(Rn(c),c.isVIP){let{autoTools:l,isDoneAutoToolsAction:g}=await ta.default.storage.local.get(["autoTools","isDoneAutoToolsAction"]);(l===void 0||l&&!l.includes("search"))&&!g&&T({autoTools:Fw.filter(d=>d.autoOn).map(d=>d.name),isDoneAutoToolsAction:!0})}else{let{autoTools:l}=await ta.default.storage.local.get("autoTools");typeof l<"u"&&T({autoTools:[]})}return c}async function yv(e,t){let r=await co("/v1/completion/email_summary",e,{method:"POST",signal:t}),n=r.quota_type?r.quota_type==="basic"?"gpt-3.5":"gpt-4":"gpt-3.5";return kr(n,r),r}function Qv(e,t){return co("/v1/completion/email_reply",e,{method:"POST",signal:t.signal},{onStream:r=>{if(!r.done){let n=r.data.quota_type?r.data.quota_type==="basic"?"gpt-3.5":"gpt-4":"gpt-3.5";kr(n,r.data)}t.onStream(r)}})}Ne("disable-iframe-restrictions",async({sender:e})=>{if(!Rt.default.declarativeNetRequest)throw new Error("declarativeNetRequest is not supported");let t=e.tab?.id;if(!t)throw new Error("tabId is required");let r=await Rt.default.declarativeNetRequest.getSessionRules().then(o=>o.find(i=>i.id===1));if(!(r&&(!r.condition.tabIds||r.condition.tabIds.includes(t))))return Rt.default.declarativeNetRequest.updateSessionRules({removeRuleIds:[1],addRules:[{id:1,priority:1,action:{type:"modifyHeaders",responseHeaders:[{header:"X-Frame-Options",operation:"remove"},{header:"Frame-Options",operation:"remove"},{header:"Content-Security-Policy",operation:"remove"},{header:"Content-Security-Policy-Report-Only",operation:"remove"},{header:"ALLOW-FROM",operation:"set",value:"*"}]},condition:{resourceTypes:["sub_frame","xmlhttprequest"],tabIds:[t,-1],requestMethods:["get"],initiatorDomains:e.url?[new URL(e.url).hostname]:void 0}}]}).then(()=>bt(100))});Ne("restore-iframe-restrictions",()=>Rt.default.declarativeNetRequest?Rt.default.declarativeNetRequest.updateSessionRules({removeRuleIds:[1]}):Promise.reject(new Error("declarativeNetRequest is not supported")));Ne("fetch-as-blob-url",async({data:e})=>(await Ti(_o),xt("offscreen-fetch-blob",e)));Ne("open-standalone-page",()=>ei());Ne("detect-language",({data:e,sender:t})=>Rt.default.tabs.detectLanguage(e??t.tab?.id));Ne("get-window-value",async({data:{tabId:e,keys:t},sender:r})=>{let n=e==="sender"?r.tab?.id:e;if(n===void 0)throw new Error("tabId is required");return Rt.default.scripting.executeScript({args:[t],target:{tabId:n},func:o=>{let i={};e:for(let[s,a]of Object.entries(o)){let A=window;for(let c of a){if(A==null){i[s]=void 0;continue e}A=A[c]}i[s]=A}return i},world:"MAIN"}).then(([o])=>{if(!o)throw new Error("executeScript failed");let{error:i,result:s}=o;if(i)throw i instanceof Error?i:new Error("executeScript failed: unknown error");return s})});Ne("detect-youtube-ad",async({data:{tabId:e},sender:t})=>{let r=e==="sender"?t.tab?.id:e;if(r===void 0)throw new Error("tabId is required");return Rt.default.scripting.executeScript({target:{tabId:r},func:()=>{let n=document.querySelector("#movie_player");if(!n)return;function o(i,s){let a=new CustomEvent("sider-onYoutubeChange",{detail:{eventName:i,value:s}});window.dispatchEvent(a)}n.addEventListener("onAdStateChange",i=>{o("onAdStateChange",i)}),n.addEventListener("onStateChange",i=>{o("onStateChange",i)})},world:"MAIN"}).then(([n])=>{if(!n)throw new Error("executeScript failed");let{error:o,result:i}=n;if(o)throw o instanceof Error?o:new Error("executeScript failed: unknown error");return i})});Ne("netflix-add-state-listener",async({data:{tabId:e},sender:t})=>{let r=e==="sender"?t.tab?.id:e;if(r===void 0)throw new Error("tabId is required");return Rt.default.scripting.executeScript({target:{tabId:r},func:()=>{if(window.__SIDER_NETFLIX_STATE_LISTENER__)try{window.__SIDER_NETFLIX_STATE_LISTENER__()}catch{}function n(s,a=1e3,A=8){let c=null,l=0;return function(...g){if(c&&(clearTimeout(c),l++,l>=A)){l=0,s.apply(this,g);return}c=setTimeout(()=>{s.apply(this,g),l=0},a)}}function o(s){if(!s?.length)return null;for(let a=s.length-1;a>=0;a--){let A=s[a];if(A.startsWith("watch"))return A}return null}let i=window.netflix?.appContext?.getState()?.playerApp?.addChangeListener(n(s=>{let a=s.videoPlayer.getAllPlayerSessionIds(),A=location.pathname.split("/").pop(),c=o(a);if(s.playerApp.getSessionDataBySessionId(c)?.titleVideoId?.toString()!==A)return;let l=s.videoPlayer.getCurrentTextTrackBySessionId(c);if(!l||!s.videoPlayer.isVideoLoadedBySessionId(c))return;let g=new CustomEvent("sider-netflix-state-change",{detail:{videoId:A,sessionId:c,currentTextTrack:l}});window.dispatchEvent(g)}));return i&&(window.__SIDER_NETFLIX_STATE_LISTENER__=i),!!i},world:"MAIN"}).then(([n])=>{if(!n)throw new Error("executeScript failed");let{error:o,result:i}=n;if(o)throw o instanceof Error?o:new Error("executeScript failed: unknown error");return i})});Ne("get-webpage-chatgpt-message",async({data:e,sender:t})=>{let r=t.tab?.id,n=e;if(r===void 0)throw new Error("tabId is required");return Rt.default.scripting.executeScript({target:{tabId:r},args:[n],func:o=>{let i=document.querySelector(`article[data-testid="conversation-turn-${o}"] [data-message-author-role][data-message-id]`);if(!i)throw new Error("message element not found");let s=Object.keys(i).find(g=>g.startsWith("__reactFiber$"));if(!s)throw new Error("fiber key not found");let a=i[s];if(!a)throw new Error("fiber not found");let A,c,l=20;for(;a&&l>0;){if(Array.isArray(a.memoizedProps.messages)&&(A=a.memoizedProps.messages),Array.isArray(a.memoizedProps.groupedMessagesToRender)&&(c=a.memoizedProps.groupedMessagesToRender),A&&c)return{messages:A,groupedMessagesToRender:c};a=a.return,l--}throw new Error("messages not found")},world:"MAIN"}).then(([o])=>{if(!o)throw new Error("executeScript failed");let{error:i,result:s}=o;if(i)throw i instanceof Error?i:new Error("executeScript failed: unknown error");return s})});Ne("get-value-from-react-fiber",async({data:e,sender:t})=>{let r=t.tab?.id,{propName:n,querySelector:o,querySelectorAll:i,maxDepth:s=999}=e;if(r===void 0)throw new Error("tabId is required");if(!o&&!i)throw new Error("querySelector or querySelectorAll is required");if(!n)throw new Error("propName is required");return Rt.default.scripting.executeScript({target:{tabId:r},args:[o??null,i??null,n,s],func:(a,A,c,l)=>{let g=A?document.querySelectorAll(A):[document.querySelector(a)],d=[];for(let f of g){let u=0,m=Object.keys(f).find(p=>p.startsWith("__reactFiber$"));if(!m)continue;let C=f[m];for(;C&&!(C.memoizedProps&&Object.hasOwn(C.memoizedProps,c))&&u<l;)C=C.return,u++;C&&C.memoizedProps&&Object.hasOwn(C.memoizedProps,c)&&d.push(C.memoizedProps[c])}if(d.length)return d;throw new Error("value not found")},world:"MAIN"}).then(([a])=>{if(!a)throw new Error("executeScript failed");let{error:A,result:c}=a;if(A)throw A instanceof Error?A:new Error("executeScript failed: unknown error");return c})});Ne("get-google-doc-content",({sender:e})=>{let t=e.tab?.id;if(t===void 0)throw new Error("tabId is required");return Rt.default.scripting.executeScript({target:{tabId:t},func:async()=>{function r(o,i){i.add(o),Array.isArray(o)||(o=Object.values(o));for(let s of o)if(s&&!(typeof s!="string"&&typeof s!="object")&&!i.has(s)){if(i.add(s),typeof s=="string"&&s[0]===""&&s[s.length-1]===`
`)return s;{let a=r(s,i);if(a)return a}}}let n=Reflect.get(document,"__wizmanager");if(n)return r(n,new Set)},world:"MAIN"}).then(([r])=>{if(!r)throw new Error("executeScript failed");let{error:n,result:o}=r;if(n)throw n instanceof Error?n:new Error("executeScript failed: unknown error");return o})});Ne("fetch-base64-from-bg",async({data:e})=>{let{url:t}=e,n=await(await fetch(t)).blob(),o=await createImageBitmap(n),{width:i,height:s}=o;return o.close(),{base64:await ir(n),size:n.size,type:n.type,width:i,height:s}});Ne("get-sender",({sender:e})=>e);Ne("create-wisebase-by-file-ids",({data:e})=>X.createWisebaseByFileIds(e.desc,e.fileIds));Ne("upload-s3-file",async({data:e,sender:t})=>{if(!t.url)throw new Error("sender.url is required");let r=t.url,n=await Fl(),o=n?.title||"",i=n?.description||"",s=n?.readableFile||null,a=n?.mainFile||null,A=n?.subtitleFile||null;if(!a)throw new Error("main File is empty");let c={type:n?.type||"",url:r,title:o,description:i,mainFile:a,readableFile:s,subtitleFile:A},g=c.type==="video"?c.subtitleFile:c.readableFile,[d,f]=await UI({mainFile:a,subFile:g,url:c.type==="image"?void 0:c.url,title:c.title||a.name});return[d.fileId,f?.fileId]});Ne("open-in-new-tab",({data:e})=>Rt.default.tabs.create(e));TA.email_enhance_reply(e=>{e.onMessage(t=>{Qv(t,{signal:e.signal,onStream(r){r.done?(e.send({done:!0}),e.close()):e.send({data:r.data})}}).catch(r=>{r.name!=="AbortError"&&e.send({error:$n(r)})}).finally(()=>e.close())})});TA.email_enhance_summary(e=>{e.onMessage(t=>{yv(t,e.signal).then(r=>e.send({data:r})).catch(r=>{r.name!=="AbortError"&&e.send({error:$n(r)})}).finally(()=>e.close())})});var S=W(Ae(),1);var wv=[{version:"5.21.0",title:"GPT-5 Just Got an Upgrade",features:[],blogUrl:"",notifyType:"modal"},{version:"5.20.0",title:"Introducing Claude Sonnet 4.5",features:[{features:["REC Notes, Auto Enhanced: Record and jot quick notes as AI transcribes. Your notes and transcripts are combined into a clear, structured REC note."]},{features:["Smart Assistant: AI-powered tools for tasks like research, writing, and more"]}],blogUrl:" https://sider.ai/whats-new/browser-extension/sider-v5_20_0",notifyType:"modal"},{version:"5.19.0",title:"Introducing Claude Sonnet 4.5",features:[],videoUrl:"",notifyType:"modal"},{version:"5.18.0",title:"Unlock Deep Research",features:[{features:["REC Notes, Auto Enhanced: Record and jot quick notes as AI transcribes. Your notes and transcripts are combined into a clear, structured REC note."]},{features:["Free Transcription: Each recording is auto-transcribed into text so nothing gets missed."]},{features:["Nano Banana: Image tool in Chat controls now supports Nano Banana."]}],videoUrl:"",notifyType:"modal"},{version:"5.17.0",title:"REC Note & Nano Banana ",features:[{features:["REC Notes, Auto Enhanced: Record and jot quick notes as AI transcribes. Your notes and transcripts are combined into a clear, structured REC note."]},{features:["Free Transcription: Each recording is auto-transcribed into text so nothing gets missed."]},{features:["Nano Banana: Image tool in Chat controls now supports Nano Banana."]}],videoUrl:"",notifyType:"modal"},{version:"5.16.0",title:"GPT-5 is here!",features:[{features:["One-Click Capture: Record meetings, voice notes, and screens instantly"]},{features:["Auto-Transcribe: Turn recordings into searchable documents"]},{features:["Smart Chat: Get summaries, action items, and answers from your content"]}],videoUrl:"",notifyType:"modal"},{version:"5.15.0",title:"Record. Save. Master.",features:[{features:["One-Click Capture: Record meetings, voice notes, and screens instantly"]},{features:["Auto-Transcribe: Turn recordings into searchable documents"]},{features:["Smart Chat: Get summaries, action items, and answers from your content"]}],videoUrl:"",notifyType:"modal"},{version:"5.14.0",title:"Grok 4 is Here!",features:[],videoUrl:"",notifyType:"modal"},{version:"5.13.0",title:"New Artifacts Supported",features:[{features:["Mind Maps: Easily organize your thoughts and make logic clear at a glance."]},{features:["Basic Slides: Quickly present ideas for efficient reporting and sharing."]}],videoUrl:"",notifyType:"modal"},{version:"5.12.0",title:"ACustom Instructions Now Available",features:[],videoUrl:"",notifyType:"modal"},{version:"5.11.0",title:"AI Web Builder",features:[{features:["Upload audio files in Chat to get transcriptions with speaker identification. This lets AI understand conversations better and provide more relevant responses. Perfect for meetings, interviews and more."]}],videoUrl:"",notifyType:"web"},{version:"5.10.0",title:"Audio-to-Text with Speaker Identification",features:[{features:["Upload audio files in Chat to get transcriptions with speaker identification. This lets AI understand conversations better and provide more relevant responses. Perfect for meetings, interviews and more."]}],videoUrl:"",notifyType:"modal"},{version:"5.9.0",title:"Claude Opus 4 and Claude Sonnet 4 Now Available",features:[{features:["Claude Opus 4: Anthropic\u2019s most powerful model with unmatched coding and complex problem-solving abilities. "]},{features:["Claude Sonnet 4: Enhanced reasoning and coding capabilities, replacing Sonnet 3.7."]}],videoUrl:"",notifyType:"modal"},{version:"5.8.0",title:"Full-Page Web Chat Enhanced",features:[{features:["Enhanced Capabilities: Create images with GPT Image 1, view artifacts in separate panel"]},{features:["Dual-Model Comparison: A side-by-side view shows how different models respond to the same question in real time (Web exclusive)"]}],videoUrl:"",notifyType:"modal"},{version:"5.7.0",title:"Create and Edit Images in Chat with GPT-Image-1",features:[{features:["Upgraded to GPT-Image-1: Create stunning visuals or edit existing images with simple words, powered by OpenAI\u2019s latest image generation model."]},{features:["New Quality Options: Choose from Low, Medium, or High quality \u2014 credit costs vary by selection."]}],videoUrl:"",notifyType:"modal"},{version:"5.6.0",title:"OpenAI o3 & o4-mini Now Available",features:[{features:["o3: A powerful model for solving complex problems in math, coding, science, and technical writing. Replaces o1."]},{features:["o4-mini: Ideal for fast reasoning, coding, and visual tasks. Replaces o3-mini."]}],videoUrl:"",notifyType:"modal"},{version:"5.5.0",title:"Introducing GPT-4.1 and GPT-4.1 Mini",features:[{features:["GPT-4.1: Handles complex problems and real-world coding with improved accuracy, replacing GPT-4o."]},{features:["GPT-4.1 Mini: Excels at image understanding and delivers faster responses."]}],videoUrl:"",notifyType:"modal"},{version:"5.4.0",title:"Star & Export Your Chats",features:[{features:["Star Chats: Mark important chats for easy access later."]},{features:["Export Chats: Save and share chats as TXT files with ease."]}],videoUrl:"",notifyType:"modal"},{version:"5.3.0",title:"Gemini 2.5 Pro & Updated DeepSeek V3 Now Available",features:[{features:["Gemini 2.5 Pro: Excels in coding, science, and math with enhanced reasoning and context awareness."]},{features:["DeepSeek-V3-0324: Delivers quick, reliable answers and improved support for math and coding."]}],videoUrl:"",notifyType:"modal"},{version:"5.2.0",title:"",features:[{features:[""]},{features:[""]}],videoUrl:"",notifyType:"modal"},{version:"5.1.0",title:"Smarter Thinking, Searching, and Saving",features:[{features:["Think (R1) Mode: DeepSeek-R1's thinking can now be used with general models for better answers. Costs 1 Advanced Credit per use."]},{features:["Enhanced Search: Find the most relevant sources with improved precision."]},{features:["Save as Notes: Store AI answers as notes in Wisebase for later use."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v5_1_0",notifyType:"modal"},{version:"5.0.0",title:"Meet Sider 5.0: Deep Research Made Easy. Smart and Automated.",features:[{features:["Smart Source Discovery: AI mimics humans, auto scans 100+ sites fast, picks the best for you."]},{features:["Auto Highlights & Notes: AI highlights topic related information, crafts notes for inspiration."]},{features:["Auto-Generate Reports: Get deep reports with cited sources in minutes."]},{features:["Wisebase Saves It All: AI reports, web finds, chats, and more\u2014saved to explore anytime."]}],videoUrl:"",notifyType:"modal"},{version:"4.45.0",title:"Web Chat Now Live!",features:[{features:["More Space & Focus: A larger interface makes reading long messages and viewing code easier, while minimizing distractions for better focus."]},{features:["Seamless Syncing: Chats stay synced across the web and extension, allowing for an easy switch between web page and sidebar views."]}],videoUrl:"",notifyType:"modal"},{version:"4.44.0",title:"Introducing Claude 3.7 Sonnet Thinking",features:[{features:["Extended Thinking Mode: Step-by-step thinking for better performance on math, physics, coding, and many other tasks"]},{features:["API Key Support: Compatible with Claude and Ollama API keys"]},{features:["API Key Support: Compatible with Claude and Ollama API keys"]}],videoUrl:"",notifyType:"modal"},{version:"4.43.0",title:"Introducing Claude 3.7 Sonnet Thinking",features:[{features:["Extended Thinking Mode: Step-by-step thinking for better performance on math, physics, coding, and many other tasks"]},{features:["API Key Support: Compatible with Claude and Ollama API keys"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_43_0",notifyType:"modal"},{version:"4.42.0",title:"Bilingual Subtitle Support for Netflix",features:[{features:["Bilingual Subtitle: Enhance your viewing experience and boost language learning"]},{features:["API Key: Support API keys for DeepSeek, OpenAl and more"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_42_0",notifyType:"modal"},{version:"4.41.0",title:"Voice Input & DeepSeek-R1-70B",features:[{features:["Voice Input: Quickly enter text using speech for hands-free efficiency"]},{features:["New AI Model:  DeepSeek-R1-70B is now live"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_41_0",notifyType:"modal"},{version:"4.40.0",title:"OpenAI o3-mini Now Available!",features:[{features:["Enhanced Coding: Excels in complex coding tasks with outstanding performance"]},{features:["Improved Prompt Handling: Effectively understands and responds to complex prompts"]}],videoUrl:"",notifyType:"modal"},{version:"4.39.0",title:"OpenAI o3-mini Now Available!",features:[{features:["Powerful Reasoning: Matches OpenAI o1\u2019s abilities in math, science, and coding"]},{features:["Faster Than o1-mini: Optimized for quicker, more seamless responses"]},{features:["More Reliable Answers: Provides greater accuracy and clearer reasoning"]}],videoUrl:"",notifyType:"modal"},{version:"4.38.0",title:"Introducing Gemini 2.0 Flash",features:[{features:["2x the speed of Gemini 1.5 Pro"]},{features:["Delivers instant, pro-level results"]},{features:["Enhanced text, code understanding and reasoning capabilities"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_38_0",notifyType:"modal"},{version:"4.37.0",title:"DeepSeek-R1 & V3, AI Translator",features:[{features:["DeepSeek-R1: Matches the performance of OpenAI-o1"]},{features:["DeepSeek-V3: Excels at complex reasoning, math, and coding tasks"]},{features:["AI Translator for Web Page: Delivers natural and accurate translations"]}],videoUrl:"",notifyType:"modal"},{version:"4.36.0",title:"Collect Knowledge in Wisebase",features:[{features:["Save Web Pages and Highlights: Save valuable web content to Wisebase (Al knowledge base) with one click "]},{features:["Al Inbox: Let Al organize your content to Wisebases intelligently"]},{features:["Chat with Multi-files: Get instant answers from your collected files"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_36_0",notifyType:"modal"},{version:"4.35.0",title:"Preview Links: Browse Smarter",logContents:"xxxx",features:[{features:["Instant Previews: Drag links to view content without opening new tabs"]},{features:["Summaries: Gain key insights from pages at a glance"]},{features:["Efficient Browsing: Stay focused with fewer clicks and less distractions"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_35_0",notifyType:"modal"},{version:"4.34.0",title:"Gmail Al Reply, Artifacts and Translate Enhancements",logContents:"xxxx",features:[{features:["Al Reply in Gmail: Support translation and Al model selection for better communication"]},{features:["Artifacts: Export flowcharts as images for easy sharing"]},{features:["Translate: Al dictionary for precise translations of words and phrases"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_34_0",notifyType:"modal"},{version:"4.33.0",title:"O1 & Video Summary Upgrades",logContents:"xxxx",features:[{features:["OpenAI o1\u2060: Faster than \u2018o1-preview\u2019, excels at complex multi-step tasks with advanced accuracy"]},{features:["Summarize Videos Without Subtitles: Get transcripts and summaries for YouTube videos without subtitles"]},{features:["Web Content Summary: Improved for platforms like Reddit and Twitter "]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_33_0",notifyType:"modal"},{version:"4.32.0",title:"Support for Audio Files in Chat",logContents:"xxxx",features:[{features:["Audio to Text: Upload MP3, WAV, M4A, or MPGA file to generate transcripts"]},{features:["View & Listen: Read transcripts while listening to the audio"]},{features:["Summarize with Ease: Create quick summaries with one click"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_32_0",notifyType:"modal"},{version:"4.31.0",title:"Toolbox, Input Translate, Quicker Copy",logContents:"xxxx",features:[{features:["Toolbox: Quickly access AI tools for images, PDFs, video and more from the navigation bar"]},{features:["Input Translate:  Instantly translate input text using a trigger key for faster communication"]},{features:['Copy Text : "Copy" is now a default option in the context menu for quicker text copying']}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_31_0",notifyType:"modal"},{version:"4.30.0",title:"Enhanced GPT-4O, Page Translation and YouTube Subtitles",logContents:"xxxx",features:[{features:["GPT-4O Update: More natural writing and better file handling with deeper insights"]},{features:["View Translation Only: View translations without original text for a cleaner view"]},{features:["Better YouTube Subtitles: Enjoy improved bilingual subtitle translation quality"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_30_0",notifyType:"modal"},{version:"4.29.0",title:"Enhanced Chat Experience",logContents:"xxxx",features:[{features:["Messaging Editing: Edit and resend messages for new answers\u2014no copy-pasting required"]},{features:["Side-by-side Comparison: Mention multiple models in a query and view answers in full-page for easier comparison."]},{features:["Custom Icons: Personalize prompt icons for better organization"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_29_0",notifyType:"modal"},{version:"4.28.0",title:"Claude 3.5 Haiku & Enhanced Options",logContents:"xxxx",features:[{features:["Claude 3.5 Haiku: Delivers performance that surpasses Claude 3 Opus, excelling in coding, tool use, and reasoning"]},{features:["Large Font Size: You can now change the message font size"]},{features:["Streamlined UI: A cleaner, more intuitive Options UI for easy personalization"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_28_0",notifyType:"modal"},{version:"4.27.0",title:"Improved Context Menu and Artifacts",logContents:"xxxx",features:[{features:["Streamlined Context Menu: Cleaner, more intuitive interface for a smoother experience"]},{features:["Enhanced Translation:  Delivers related word meanings with contextual accuracy"]},{features:["Publish & Share Artifacts: Easily share your Artifacts publicly via direct links"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_27_0",notifyType:"modal"},{version:"4.26.0",title:"Gemini models just got smarter and faster!",logContents:"xxxx",features:[{features:["Gemini 1.5 Pro: Supercharged reasoning with enhanced math and visual skills."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_26_0",notifyType:"modal"},{version:"4.25.0",title:"Gemini models just got smarter and faster!",logContents:"xxxx",features:[{features:["Gemini 1.5 Pro: Supercharged reasoning with enhanced math and visual skills."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_25_0",notifyType:"modal"},{version:"4.24.0",title:"Gemini models just got smarter and faster!",features:[{features:["Gemini 1.5 Pro: Supercharged reasoning with enhanced math and visual skills."]},{features:["Gemini 1.5 Flash: 2x faster, 3x lower latency, better at visuals and coding."]}],notifyType:"modal"},{version:"4.23.0",title:"OpenAI o1-preview & o1-mini are available now!",features:[{features:["Multi-Model Translation: Use multiple models at once for more accurate translations."]},{features:["Versatile Translation Rewrites: Rewrite translations for different scenarios."]},{features:["Bilingual Subtitles: View YouTube subtitles in both languages simultaneously."]}],notifyType:"modal"},{version:"4.20.0",title:"Translation Features Upgrade",features:[{features:["Multi-Model Translation: Use multiple models at once for more accurate translations."]},{features:["Versatile Translation Rewrites: Rewrite translations for different scenarios."]},{features:["Bilingual Subtitles: View YouTube subtitles in both languages simultaneously."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_20_0",notifyType:"modal"},{version:"4.19.0",title:"Artifacts: Real-Time Content Preview",features:[{features:["Dedicated Windows: Preview documents, websites or charts in separate windows during chats."]},{features:["Interactive and Editable: Modify content directly using natural language."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_19_0",notifyType:"modal"},{version:"4.18.0",title:"Chat Sharing is Now Live!",features:[{features:["Multiple Formats: Share your chat as a link or an image."]},{features:["Flexible Selection: Select and share an entire conversation or just part of it."]},{features:["Easy Control: Revoke shared links anytime."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_18_0",notifyType:"modal"},{version:"4.17.0",title:"Introducing Watch Highlights for YouTube",features:[{features:["Video Highlights: AI-generated narration saves you time by quickly highlighting key video points."]},{features:["Natural Narration: Realistic AI voices enhance your viewing experience."]},{features:["Multi-language Support: Easily understand videos across language barriers."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_17_0",notifyType:"modal"},{version:"4.16.0",title:"",features:[{features:[""]},{features:[""]},{features:[""]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_16_0",notifyType:"modal"},{version:"4.13.0",title:"",features:[{features:[""]},{features:[""]},{features:[""]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_13_0",notifyType:"modal"},{version:"4.12.0",title:"Deep reader to boost your critical reading skills!",features:[{features:["Increased Speed: Get 2x faster responses than GPT-4"]},{features:["Enhanced Vision: Greatly improved image understanding"]},{features:["Enhanced Vision: Greatly improved image understanding"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_12_0",notifyType:"modal"},{version:"4.11.0",title:"Deep reader to boost your critical reading skills!",features:[{features:["Increased Speed: Get 2x faster responses than GPT-4"]},{features:["Enhanced Vision: Greatly improved image understanding"]},{features:["Expanded Languages: More languages, better quality, and faster performance"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_11_0",notifyType:"modal"},{version:"4.10.0",title:"OpenAI's GPT-4o is now here!",features:[{features:["Increased Speed: Get 2x faster responses than GPT-4"]},{features:["Enhanced Vision: Greatly improved image understanding"]},{features:["Expanded Languages: More languages, better quality, and faster performance"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-v4_10_0",notifyType:"modal"},{version:"4.9.0",title:"Llama 3 Now! The next generation of Meta's state-of-the-art open source LLM.",features:[{features:["<b>New Model:</b> Support Llama 3 now"]}],videoUrl:"",notifyType:"modal"},{version:"4.8.0",title:"In-Chat Video Summary, Subtitle Extraction, Claude 3 Haiku! \u{1F680}",features:[{features:["In-Chat Summary: Get key points of YouTube videos with 'Read this page' in the chat window."]},{features:["Easy Subtitle Extraction: Get subtitles with a single click on YouTube for deeper insights."]}],videoUrl:"",notifyType:"modal"},{version:"4.7.0",title:"In-Chat Video Summary, Subtitle Extraction, Claude 3 Haiku! \u{1F680}",features:[{features:["In-Chat Summary: Get key points of YouTube videos with 'Read this page' in the chat window."]},{features:["Easy Subtitle Extraction: Get subtitles with a single click on YouTube for deeper insights."]},{features:["Claude 3 Haiku: Now available to enrich your chat experience."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_7",notifyType:"modal"},{version:"4.6.0",features:[{features:['Claude 3 Opus: Claims to have "near-human" abilities and can beat GPT-4.']},{features:["Claude 3 Sonnet: Balances intelligence and speed, ideal for retrieving info or automating sales."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_6",notifyType:"modal"},{version:"4.5.0",features:[{features:["Search Agent Widget: Experience the future of search with AI automation"]},{features:["Translate webpage: More reader-friendly translation display styles"]},{features:["Supports automatically restoring the last chat on startup"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_5",notifyType:"modal"},{version:"4.4.0",title:"Easy Artistry with Painter Tool & GPT-4 context menu",features:[{features:["New Painter Tool: Create images instantly in chat."]},{features:["Enhanced Context Menu: Use GPT-4 in context menu."]},{features:["Enhanced Context Menu: Use GPT-4 in context menu."]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_4",notifyType:"modal"},{version:"4.3.0",title:"Maximize Your Experience with Full-Screen Mode!",features:[{features:["Dive into an immersive, full-screen view"]},{features:["Enjoy all sidebar features, now in Full-Screen"]},{features:["Seamlessly toggle between modes for the best of both worlds"]}],videoUrl:"https://sider.ai/whats-new/chrome-extension/Sider-V4_3",notifyType:"modal"},{version:"4.2.0",title:"More Efficient UI & Sidebar GPTs Access (Here is the video tutorial)",features:[{features:["Refreshed Interface: Cleaner and easier to navigate"]},{features:["Collapsible Navigation Bar: Ensures a focused chat experiencewhile keeping essential features within easy reach"]},{features:["Sidebar GPTs Access: For ChatGPT Plus users, direct access toGPTs is now available in the sidebar in web app mode"]}],notifyType:"modal"},{version:"4.1.0",features:[{title:"GPT-4V(ision) Preview! & AI reply for Gmail",features:["Sider Vision is powered by GPT-4V","Better understanding of images","Quickly grasp email intentions","Select from diverse tones and personas","Effortlessly pick reply suggestions"]}],notifyType:"modal"},{version:"4.0.0",features:[{title:"GPT-4 Turbo and Chat web page!",features:["Support GPT-4 Turbo and GPT-3.5 Turbo","Translate whole web page","Chat web page in the Sidebar","Chat PDF in the Sidebar"]}],notifyType:"modal"},{version:"3.6.0",features:[{title:"Translation widget",features:["Customize your translation in a dedicated Translation widget","Improve ChatGPT anwers in Google, Bing, Baidu etc"]}],notifyType:"modal"},{version:"3.5.0",features:[{title:"Sider Vision Became Smarter",features:["GPT-4/Claude 2 + Vision","1-click to answer the same question with different bots"]}],notifyType:"modal"},{version:"3.4.0",features:[{title:"Sider Grammar Widget",features:["Check grammar errors","Fix grammar errors","Improve the writing beyond grammar"]}],notifyType:"modal"},{version:"3.3.0",features:[{title:"Sider Vision \u2014 ChatGPT sidebar with Vision",features:["Extract text from an image","Ask any question about the image","3 ways to send image to Sider Vision<div><ol><li>Take a  screenshot</li><li>Drag & Drop an image to Chat window</li><li>Upload an image</li></ol></div>"]}],notifyType:"modal"},{version:"3.2.0",features:[{title:"New pricing plan with 5x more  GPT-4 queries",features:["Great news! Our updated pricing now gives you even more access to GPT-4 and Claude 2 queries.","If you're already a premium user, you'll be upgraded automatically. Plus, we've got a new 'Unlimited' plan for all you power users!"]}],notifyType:"modal"},{version:"3.1.0",features:[{title:"More bot!",features:["Support Bard now!"]},{title:"OCR: Extract text from any image and send it to ChatGPT",features:["Recognize 10+ major languages of printed materials","Recognize handwritten in English","Recognize math equation in the text"]},{title:"Improve Painter",features:["Replace the whole background","Remove selected area"]}],notifyType:"modal"},{version:"3.0.0",features:[{features:["More Chatbots: Now Supporting Claude-instant, Claude 2, and Bard!"]},{features:["Group Chat: Compare Answers Across Chatbots!"]},{features:["Mention: Tag Chatbots with '@'!"]},{features:["Quick Prompt: Just Type '/' and Go!"]},{features:["Simple Design: Streamlined for Speed!"]}],notifyType:"modal"},{version:"2.9.0",features:[{title:"Enhanced prompt manager for",features:["Reading context menu","Writing context menu"]},{title:"AI image editor",features:["Remove background from any images","Remove text from any images"]}],notifyType:"modal"},{version:"2.8.0",features:["Reading Assistant: Use AI for fast understanding while reading web pages","Writing Assistant: Quickly generate content with AI in the web input box"],notifyType:"modal"},{version:"2.7.0",features:["Draw picture from text","Draw picture from a reference picture"],notifyType:"modal"},{version:"2.6.0",features:["Sider Supports Fixed Sidebar - You can chat between all tabs without overlapping any content (available in Chrome 114 or later)"],notifyType:"modal"},{version:"2.5.0",features:["Youtube Summary! Watch 1 hour of YouTube video in 1 minute","Compare the answers provided by humans and AI on Q&A sites such as Quora, StackOverflow, and Zhihu"],notifyType:"modal"},{version:"2.4.0",features:["Smart web access: Based on your query, the Al will decide if it needs to access the web.","Stability improvement"],notifyType:"modal"},{version:"2.3.0",features:["Support Browsing and Plugins for Plus users!","ChatGPT with internet access for everyone!"],notifyType:"modal"},{version:"2.2.0",features:["Compose any message","Reply email, tweet, comment etc"],notifyType:"modal"},{version:"2.1.0",features:["Shortcut for Quick Lookup","Resize the Quick Lookup window","Bug fixes and other UX improvements"],notifyType:"modal"},{version:"2.0.0",features:["Support GPT-4 for all users!","Invite friends and gain GPT-4 queries for both of you!","Bug fixes and other UX improvements"],notifyType:"modal"},{version:"1.1.0",features:["Full Chat in the new tab!","ChatGPT, Bing, Bard together!","Bug fixes"],notifyType:"modal"},{version:"1.0.13",features:["Continue the chat after asking questions","Switch between GPT-4 and GPT-3.5 for Plus users","Easily access and search chat history"],notifyType:"modal"},{version:"1.0.12",features:["Sync extension settings across computers","Access your prompts from different laptops","Save chats for future use","Share chats via link"],notifyType:"modal"},{version:"1.0.11",features:["Quickly access actions through a pop-up window without opening the sidebar.","Add support for additional languages.","Retain the user's language preference when using the translation feature.","Resolve shortcut conflicts on platforms like GitHub and others."],notifyType:"modal"},{version:"1.0.10",features:["Support 50+ languages now!"],notifyType:"modal"},{version:"1.0.8",features:["Support GPT-4 for Plus users! Check settings page!"],notifyType:"modal"},{version:"1.0.7",features:["Remember prompt used last time","Optimize the position of the chatGPT panel on search pages","Add an option to put the sidebar in-page icon on the left side","Optimize package size","Add dark mode","Support your API url proxy"],notifyType:"modal"},{version:"1.0.6",features:["Improve summarize feature in Youtube page"],notifyType:"modal"},{version:"1.0.5",features:["Remember the location of sidebar in\u2013age icon","Improve shortcuts","Save prompt templates from the sidebar directly"]},{version:"1.0.4",features:["Re-order prompt items in the dropdown list","Archive prompt items you will not use","Support response in 50+ languages"]},{version:"1.0.3",features:["CMD/Ctrl + Enter to do quick \u201CSubmit\u201D","Option to hide panel in the search results page","Support ESC to hide sidebar","Support summarize long article"]},{version:"1.0.2",features:["Add stop button to stop generating response","Change the place of collapse button"]},{version:"1.0.1",features:["Improve summarize feature in Youtube page","Fix some bugs related to copy/paste and print"]}];var Sv=W(Ae(),1);var Mj=864e5;var APe=Mj*30;var Uj=6e3;async function Pj(e=!1,t){if(X.setUserStatus({fiveStarRated:!0}),e)Dr.report("rate_feedback_total"),Dr.report(`rate_feedback_${t}`);else{let{__five_star_rate_from__:r}=await j({__five_star_rate_from__:""});Dr.report("rate_total"),Dr.report(`rate_${r}`)}We(["__five_star_rate_checking__","__five_star_rate_checking_timer__","__five_star_rate_show_at__","__five_star_rate_show_count__","__five_star_rate_less_show__","__five_star_rate_from__"])}async function bv(e){let{__five_star_rate_checking__:t,__five_star_rate_checking_timer__:r,userStatus:n}=await j({__five_star_rate_checking__:!1,__five_star_rate_checking_timer__:0,userStatus:{fiveStarRated:!1}});if(n?.fiveStarRated||!t)return;let o=await Sv.default.tabs.get(e),i=o.pendingUrl||o.url;if(i)if(Oj(i)){r&&clearTimeout(r);let s=setTimeout(()=>{Pj()},Uj);T({__five_star_rate_checking_timer__:s})}else r&&clearTimeout(r)}function Oj(e){return new RegExp(`^https://.+?/detail/.+?/${cs}${Ye?"":"/reviews"}`,"g").test(e)}var Rl=class e{static DB_MAP={};static IDB_MAP={};db=null;dbName="";storeName="";version;onUpgrade;onError;dbMapKey="";idbMapKey="";constructor(t,r,n,o){if(this.dbMapKey=`${t}_${o||1}`,this.idbMapKey=`${t}_${r}`,e.IDB_MAP[this.idbMapKey])return e.IDB_MAP[this.idbMapKey];e.IDB_MAP[this.idbMapKey]=this,this.dbName=t,this.storeName=r,this.onUpgrade=n.onUpgrade,this.onError=n.onError,this.version=o}async openDB(){let{dbName:t,version:r,onUpgrade:n,onError:o}=this;return e.DB_MAP[this.dbMapKey]?e.DB_MAP[this.dbMapKey]:new Promise((i,s)=>{let a=indexedDB.open(t,r);a.onerror=A=>{s(A)},a.onblocked=A=>{s(A)},a.onupgradeneeded=A=>{n(a.result,A)},a.onsuccess=()=>{let A=a.result;this.db=e.DB_MAP[this.dbMapKey]=A,A.onerror=c=>{o?.(c)},A.onversionchange=()=>{A.close(),this.db=null,delete e.DB_MAP[this.dbMapKey]},i(A)}})}async removeDB(){let t=indexedDB.deleteDatabase(this.dbName);return new Promise((r,n)=>{t.onerror=o=>{n(o)},t.onblocked=o=>{n(o)},t.onsuccess=()=>{r(!0)}})}async transactionAction(t,r){this.db||(this.db=await this.openDB());let n=this.db.transaction(this.storeName,r).objectStore(this.storeName);return new Promise((o,i)=>{let s=t(n);s.onerror=i,s.onsuccess=()=>o(s.result)})}getData(t){return this.transactionAction(r=>r.get(t))}addData(t,r){return this.transactionAction(n=>n.add(t,r),"readwrite")}setData(t,r){return this.transactionAction(n=>n.put(t,r),"readwrite")}deleteData(t){return this.transactionAction(r=>r.delete(t),"readwrite")}clearData(){return this.transactionAction(t=>t.clear(),"readwrite")}};function xv(e){return new Rl("CACHE",e,{onUpgrade(t){try{t.createObjectStore("TRANSLATION_CACHE",{keyPath:"key"})}catch{}try{t.createObjectStore("DEMO_TTS_CACHE",{keyPath:"key"})}catch{}}},2)}function zI(){return xv("TRANSLATION_CACHE")}function _v(){return xv("DEMO_TTS_CACHE")}var VI=W(Ae(),1);async function kv(){let e=await VI.default.storage.local.get({"chat:conversations":[],historyUploadSuccess:!1}),t=e["chat:conversations"];if(e.historyUploadSuccess)return;let n=await VI.default.storage.local.get(t.reduce((c,l)=>(c[`chat:messages:${l.id}`]={},c),{})),i=t.map(({id:c,title:l})=>({...n[`chat:messages:${c}`],title:l})).filter(c=>c.provider==="siderApi"&&c.id.includes("-"));if(i.length===0)return;let s=JSON.stringify(i),a=new Blob([s],{type:"application/json"}),A=new File([a],"chat_history.json",{type:"application/json"});try{await YI(async()=>{let c=await X.getUploadPermission({name:A.name,mime:A.type,hash:String(await Ao(A)),size:A.size});if(c.fileExists){await Dv(c.fileId);return}let l=c.fileId,g=Ge(c.credentials);await YI(async()=>{let d=await vi(A,g);await Dv(l),T({historyUploadSuccess:!0})},"uploadToS3")},"getUploadPermission")}catch{await X.uploadFileV2({file:A,tasks:[{type:"chatHistory"}]}),T({historyUploadSuccess:!0})}}async function YI(e,t){for(let n=0;n<3;n++)try{return await e()}catch(o){if(n===2)throw o;await new Promise(i=>setTimeout(i,Math.pow(2,n)*1e3))}}async function Dv(e){return YI(async()=>X.fileUploaded({fileID:e,tasks:[{type:"chatHistory"}]}),"fileUploaded")}var an=W(Ae(),1);async function Gj(e=or.English){let t=await xe(),r=navigator.userAgentData?.platform||"Unknown";r=r.replace(" ",""),r=r.slice(0,1).toUpperCase()+r.slice(1);let n=Sn(le.api,`/v1/app/promotion/promote_config?app_name=${mA}&app_version=${at}&language=${e}&device_name=${r}`),o={data:[],resources:{}};if(t)try{let i;i=await ce(n),!("resources"in i)&&"resources"in i.data&&(i=i.data),o.data=i.data.map(s=>({...s})),o.resources=i.resources}catch{}return o}function WI(e,t){return!e||typeof e!="string"?e:e.replace(/{{\s*([^{{}}]+)\s*}}/g,(r,n)=>{if(n.includes(",")){let[o,i,s,a]=n.split(/\s*,\s*/);n=t[o]===i?s:a}return n?t[n]||n:""})}function Fv(e,t){return e&&Object.fromEntries(Object.entries(e).map(([r,n])=>[r,WI(n,t)]))}function qj(e,t){return t?t.every(r=>e.includes(r)):!0}function Hj(e,t){if(e.payload.depOtherCampFilterCond&&e.payload.depOtherCampFilterCond.showAfter){let r=e.payload.depOtherCampFilterCond.showAfter;if(r.depKey&&(!t||!(r.depKey in t)||Date.now()-t[r.depKey]<r.gapTime))return!0}return!1}function Lj(e,t){return e.promoteType==="marketing"&&e.notHideAfterUpg!==!0&&t>e.startAt&&t<e.stopAt}function Kj(e){return(an.default.storage.session||an.default.storage.local).get(e)}async function Jj(){let e=an.default.storage.session||an.default.storage.local,t=await Kj({__promote_config__:{config:{data:[],resources:{}},timeStamp:0,maxAge:3e3},__promote_variants__:{}}),r=Date.now(),{__promote_variants__:n,language:o,isCNUser:i,userInfo:s,vipInfo:a,provider:A,lastUpgradeTime:c}=await j({language:or.English,__promote_variants__:{},provider:"siderApi",isCNUser:!1,userInfo:{id:"",avatar:"",nickname:"",email:"",phone:""},vipInfo:{userTypeDetail:"login"},lastUpgradeTime:0}),l=t.__promote_config__,g=l?.maxAge||3e3,d=l.config;if(!d||r-l?.timeStamp>g){d=await Gj(o);let y=1e3*60*30;try{e.set({__promote_config__:{config:d,timeStamp:r,maxAge:y}})}catch{}}let f=navigator.userAgentData?.platform,u=a?.userTypeDetail||"login",m={lang:o,browser:Ye?"edge":"chrome",__LANG__:o,__BROWSER__:Ye?"edge":"chrome",__PLATFORM__:f,__VERSION__:at,__IS_CN_USER__:i?"1":"0",__USER_PLAN__:bw[u],__USER_ID__:s.id,__USER_NAME__:s.nickname,__USER_AVATAR__:s.avatar,__USER_EMAIL__:s.email,__USER_PHONE__:s.phone},C=[f,Ye?"edge_ext":"chrome_ext",u,["device","login"].includes(u)?"free":"paid",u=="device"?"unregistered":"registered",o,A],{__promote_off__:p}=await j({__promote_off__:{}}),w={},F={};for(let y of d.data){let v=y.activityId||y.slot,U=typeof y.startAt=="number"?y.startAt:Date.parse(y.startAt),V=typeof y.stopAt=="number"?y.stopAt:Date.parse(y.stopAt);U>r||V<r||qj(C,y.condition)&&(Hj(y,p)||Lj(y,c)||(F[y.key]={startAt:y.startAt,stopAt:y.stopAt},!(p&&y.key in p)&&(w[v]||(w[v]=[]),w[v].push(y))))}let E={...m,...Fv({...d.resources._,...d.resources.en,...d.resources[o]},m)},b={};for(let y of Object.values(w)){if(y.length==0)continue;let v=y[0].key,U=y[0].persistent,V=n[v]||t.__promote_variants__[v];if(!isFinite(V)&&(V=Math.floor(Math.random()*100),U)){let D=U=="session"&&an.default.storage.session?"session":"local";an.default.storage[D].set({__promote_variants__:{...D=="session"?t.__promote_variants__:n,[v]:V}})}let L=y.find(D=>V<=D.allocation);y.length==1&&y[0]?.allocation==null&&(L=y[0]),L&&(L.content=WI(L.content,E),L.style=L.style?WI(L.style,E):"",L.payload=Fv(L.payload,E),b[L.slot]=L)}let B=Object.fromEntries(Object.entries(b).map(([y,v])=>[y,{key:v.key,startAt:v.startAt,stopAt:v.stopAt}]));return await an.default.storage.local.set({__promote_schedule__:B}),await an.default.storage.local.set({__promote_ongoing__:F}),b}var Tl;async function vv(){return Tl||(Tl=Jj().finally(()=>{Tl=null}))}function Rv(e,t){let r=e.key;r&&j({[r]:null}).then(n=>{let o=n[r]||{},i=e.host,s=e.favicon;try{i=i||new URL(t.url||"").host,s=s||t.tab?.favIconUrl||t.url+"/favicon.ico"}catch{}if(!i||i==="undefined")return;let a=e.enable;return a?delete o[i]:o={...o,[i]:{favicon:s,enable:a,timestamp:Date.now()}},Object.entries(o).forEach(([A,c])=>{(A==="undefined"||c.enable)&&delete o[A]}),T({[r]:o})})}var Rr=W(Ae(),1);async function Tv({prompt:e,windowId:t}){let n=(await Rr.default.tabs.query({url:"https://chat.openai.com/chat*",windowId:t}))[0];n||(n=await Rr.default.tabs.create({active:!0,url:"https://chat.openai.com",windowId:t}),await new Promise(o=>{let i=(s,a,A)=>{s==n.id&&a.status=="complete"&&(o(),Rr.default.tabs.onUpdated.removeListener(i))};Rr.default.tabs.onUpdated.addListener(i)})),Rr.default.tabs.update(n.id,{active:!0}),Rr.default.tabs.sendMessage(n.id,{type:"automate-send-prompt",prompt:e}),await new Promise(o=>{let i=0,s=(a,A)=>{if(A.tab?.id===n.id)switch(a.type){case"loaded":i+=1,i<2&&Rr.default.tabs.sendMessage(n.id,{type:"automate-send-prompt",prompt:e});return;case"automate-send-prompt-done":Rr.default.runtime.onMessage.removeListener(s),o();return}};Rr.default.runtime.onMessage.addListener(s),setTimeout(o,1e3*60)})}var Ni=W(Ae(),1);function Nv(){zj("NEW","#F00","#FFF")}function zj(e,t,r){Ni.default.action.setBadgeBackgroundColor({color:t}),Ni.default.action.setBadgeText({text:e}),r&&Ni.default.action.setBadgeTextColor({color:r})}function jI(){return Ni.default.action.setBadgeText({text:""})}function Mv(){return Ni.default.action.getBadgeText({})}var ee=e=>typeof e=="string",ra=()=>{let e,t,r=new Promise((n,o)=>{e=n,t=o});return r.resolve=e,r.reject=t,r},Uv=e=>e==null?"":""+e,Vj=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},Yj=/###/g,Pv=e=>e&&e.indexOf("###")>-1?e.replace(Yj,"."):e,Ov=e=>!e||ee(e),na=(e,t,r)=>{let n=ee(t)?t.split("."):t,o=0;for(;o<n.length-1;){if(Ov(e))return{};let i=Pv(n[o]);!e[i]&&r&&(e[i]=new r),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++o}return Ov(e)?{}:{obj:e,k:Pv(n[o])}},Gv=(e,t,r)=>{let{obj:n,k:o}=na(e,t,Object);if(n!==void 0||t.length===1){n[o]=r;return}let i=t[t.length-1],s=t.slice(0,t.length-1),a=na(e,s,Object);for(;a.obj===void 0&&s.length;)i=`${s[s.length-1]}.${i}`,s=s.slice(0,s.length-1),a=na(e,s,Object),a?.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=r},Wj=(e,t,r,n)=>{let{obj:o,k:i}=na(e,t,Object);o[i]=o[i]||[],o[i].push(r)},Ml=(e,t)=>{let{obj:r,k:n}=na(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},jj=(e,t,r)=>{let n=Ml(e,r);return n!==void 0?n:Ml(t,r)},Wv=(e,t,r)=>{for(let n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?ee(e[n])||e[n]instanceof String||ee(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):Wv(e[n],t[n],r):e[n]=t[n]);return e},Mi=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),Xj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},Zj=e=>ee(e)?e.replace(/[&<>"'\/]/g,t=>Xj[t]):e,ZI=class{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){let r=this.regExpMap.get(t);if(r!==void 0)return r;let n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}},$j=[" ",",","?","!",";"],eX=new ZI(20),tX=(e,t,r)=>{t=t||"",r=r||"";let n=$j.filter(s=>t.indexOf(s)<0&&r.indexOf(s)<0);if(n.length===0)return!0;let o=eX.getRegExp(`(${n.map(s=>s==="?"?"\\?":s).join("|")})`),i=!o.test(e);if(!i){let s=e.indexOf(r);s>0&&!o.test(e.substring(0,s))&&(i=!0)}return i},$I=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;let n=t.split(r),o=e;for(let i=0;i<n.length;){if(!o||typeof o!="object")return;let s,a="";for(let A=i;A<n.length;++A)if(A!==i&&(a+=r),a+=n[A],s=o[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&A<n.length-1)continue;i+=A-i+1;break}o=s}return o},oa=e=>e?.replace("_","-"),rX={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}},ep=class e{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||rX,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,o){return o&&!this.debug?null:(ee(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new e(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new e(this.logger,t)}},Tr=new ep,Ui=class{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);let o=this.observers[n].get(r)||0;this.observers[n].set(r,o+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([o,i])=>{for(let s=0;s<i;s++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,i])=>{for(let s=0;s<i;s++)o.apply(o,[t,...r])})}},Ul=class extends Ui{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){let r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n,o={}){let i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,s=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure,a;t.indexOf(".")>-1?a=t.split("."):(a=[t,r],n&&(Array.isArray(n)?a.push(...n):ee(n)&&i?a.push(...n.split(i)):a.push(n)));let A=Ml(this.data,a);return!A&&!r&&!n&&t.indexOf(".")>-1&&(t=a[0],r=a[1],n=a.slice(2).join(".")),A||!s||!ee(n)?A:$I(this.data?.[t]?.[r],n,i)}addResource(t,r,n,o,i={silent:!1}){let s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,a=[t,r];n&&(a=a.concat(s?n.split(s):n)),t.indexOf(".")>-1&&(a=t.split("."),o=r,r=a[1]),this.addNamespaces(r),Gv(this.data,a,o),i.silent||this.emit("added",t,r,n,o)}addResources(t,r,n,o={silent:!1}){for(let i in n)(ee(n[i])||Array.isArray(n[i]))&&this.addResource(t,r,i,n[i],{silent:!0});o.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,o,i,s={silent:!1,skipCopy:!1}){let a=[t,r];t.indexOf(".")>-1&&(a=t.split("."),o=n,n=r,r=a[1]),this.addNamespaces(r);let A=Ml(this.data,a)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),o?Wv(A,n,i):A={...A,...n},Gv(this.data,a,A),s.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){let r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(o=>r[o]&&Object.keys(r[o]).length>0)}toJSON(){return this.data}},jv={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,o){return e.forEach(i=>{t=this.processors[i]?.process(t,r,n,o)??t}),t}},Xv=Symbol("i18next/PATH_KEY");function nX(){let e=[],t=Object.create(null),r;return t.get=(n,o)=>(r?.revoke?.(),o===Xv?e:(e.push(o),r=Proxy.revocable(n,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}function tp(e,t){let{[Xv]:r}=e(nX());return r.join(t?.keySeparator??".")}var qv={},Hv=e=>!ee(e)&&typeof e!="boolean"&&typeof e!="number",Pl=class e extends Ui{constructor(t,r={}){super(),Vj(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Tr.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){let n={...r};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");let o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,i=r.ns||this.options.defaultNS||[],s=n&&t.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!tX(t,n,o);if(s&&!a){let A=t.match(this.interpolator.nestingRegexp);if(A&&A.length>0)return{key:t,namespaces:ee(i)?[i]:i};let c=t.split(n);(n!==o||n===o&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),t=c.join(o)}return{key:t,namespaces:ee(i)?[i]:i}}translate(t,r,n){let o=typeof r=="object"?{...r}:r;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),t==null)return"";typeof t=="function"&&(t=tp(t,{...this.options,...o})),Array.isArray(t)||(t=[String(t)]);let i=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:a,namespaces:A}=this.extractFromKey(t[t.length-1],o),c=A[A.length-1],l=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;l===void 0&&(l=":");let g=o.lng||this.language,d=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(g?.toLowerCase()==="cimode")return d?i?{res:`${c}${l}${a}`,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:c,usedParams:this.getUsedParamsDetails(o)}:`${c}${l}${a}`:i?{res:a,usedKey:a,exactUsedKey:a,usedLng:g,usedNS:c,usedParams:this.getUsedParamsDetails(o)}:a;let f=this.resolve(t,o),u=f?.res,m=f?.usedKey||a,C=f?.exactUsedKey||a,p=["[object Number]","[object Function]","[object RegExp]"],w=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,F=!this.i18nFormat||this.i18nFormat.handleAsObject,E=o.count!==void 0&&!ee(o.count),b=e.hasDefaultValue(o),B=E?this.pluralResolver.getSuffix(g,o.count,o):"",y=o.ordinal&&E?this.pluralResolver.getSuffix(g,o.count,{ordinal:!1}):"",v=E&&!o.ordinal&&o.count===0,U=v&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${B}`]||o[`defaultValue${y}`]||o.defaultValue,V=u;F&&!u&&b&&(V=U);let L=Hv(V),D=Object.prototype.toString.apply(V);if(F&&V&&L&&p.indexOf(D)<0&&!(ee(w)&&Array.isArray(V))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,V,{...o,ns:A}):`key '${a} (${this.language})' returned an object instead of string.`;return i?(f.res=x,f.usedParams=this.getUsedParamsDetails(o),f):x}if(s){let x=Array.isArray(V),N=x?[]:{},J=x?C:m;for(let M in V)if(Object.prototype.hasOwnProperty.call(V,M)){let Y=`${J}${s}${M}`;b&&!u?N[M]=this.translate(Y,{...o,defaultValue:Hv(U)?U[M]:void 0,joinArrays:!1,ns:A}):N[M]=this.translate(Y,{...o,joinArrays:!1,ns:A}),N[M]===Y&&(N[M]=V[M])}u=N}}else if(F&&ee(w)&&Array.isArray(u))u=u.join(w),u&&(u=this.extendTranslation(u,t,o,n));else{let x=!1,N=!1;!this.isValidLookup(u)&&b&&(x=!0,u=U),this.isValidLookup(u)||(N=!0,u=a);let M=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:u,Y=b&&U!==u&&this.options.updateMissing;if(N||x||Y){if(this.logger.log(Y?"updateKey":"missingKey",g,c,a,Y?U:u),s){let De=this.resolve(a,{...o,keySeparator:!1});De&&De.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ue=[],Kt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Kt&&Kt[0])for(let De=0;De<Kt.length;De++)ue.push(Kt[De]);else this.options.saveMissingTo==="all"?ue=this.languageUtils.toResolveHierarchy(o.lng||this.language):ue.push(o.lng||this.language);let _e=(De,Xt,cn)=>{let Tt=b&&cn!==u?cn:M;this.options.missingKeyHandler?this.options.missingKeyHandler(De,c,Xt,Tt,Y,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(De,c,Xt,Tt,Y,o),this.emit("missingKey",De,c,Xt,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?ue.forEach(De=>{let Xt=this.pluralResolver.getSuffixes(De,o);v&&o[`defaultValue${this.options.pluralSeparator}zero`]&&Xt.indexOf(`${this.options.pluralSeparator}zero`)<0&&Xt.push(`${this.options.pluralSeparator}zero`),Xt.forEach(cn=>{_e([De],a+cn,o[`defaultValue${cn}`]||U)})}):_e(ue,a,U))}u=this.extendTranslation(u,t,o,f,n),N&&u===a&&this.options.appendNamespaceToMissingKey&&(u=`${c}${l}${a}`),(N||x)&&this.options.parseMissingKeyHandler&&(u=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${l}${a}`:a,x?u:void 0,o))}return i?(f.res=u,f.usedParams=this.getUsedParamsDetails(o),f):u}extendTranslation(t,r,n,o,i){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});let A=ee(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(A){let g=t.match(this.interpolator.nestingRegexp);c=g&&g.length}let l=n.replace&&!ee(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),t=this.interpolator.interpolate(t,l,n.lng||this.language||o.usedLng,n),A){let g=t.match(this.interpolator.nestingRegexp),d=g&&g.length;c<d&&(n.nest=!1)}!n.lng&&o&&o.res&&(n.lng=this.language||o.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...g)=>i?.[0]===g[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${r[0]}`),null):this.translate(...g,r),n)),n.interpolation&&this.interpolator.reset()}let s=n.postProcess||this.options.postProcess,a=ee(s)?[s]:s;return t!=null&&a?.length&&n.applyPostProcessor!==!1&&(t=jv.handle(a,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,r={}){let n,o,i,s,a;return ee(t)&&(t=[t]),t.forEach(A=>{if(this.isValidLookup(n))return;let c=this.extractFromKey(A,r),l=c.key;o=l;let g=c.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));let d=r.count!==void 0&&!ee(r.count),f=d&&!r.ordinal&&r.count===0,u=r.context!==void 0&&(ee(r.context)||typeof r.context=="number")&&r.context!=="",m=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);g.forEach(C=>{this.isValidLookup(n)||(a=C,!qv[`${m[0]}-${C}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(qv[`${m[0]}-${C}`]=!0,this.logger.warn(`key "${o}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(p=>{if(this.isValidLookup(n))return;s=p;let w=[l];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(w,l,p,C,r);else{let E;d&&(E=this.pluralResolver.getSuffix(p,r.count,r));let b=`${this.options.pluralSeparator}zero`,B=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(r.ordinal&&E.indexOf(B)===0&&w.push(l+E.replace(B,this.options.pluralSeparator)),w.push(l+E),f&&w.push(l+b)),u){let y=`${l}${this.options.contextSeparator||"_"}${r.context}`;w.push(y),d&&(r.ordinal&&E.indexOf(B)===0&&w.push(y+E.replace(B,this.options.pluralSeparator)),w.push(y+E),f&&w.push(y+b))}}let F;for(;F=w.pop();)this.isValidLookup(n)||(i=F,n=this.getResource(p,C,F,r))}))})}),{res:n,usedKey:o,exactUsedKey:i,usedLng:s,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,n,o):this.resourceStore.getResource(t,r,n,o)}getUsedParamsDetails(t={}){let r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!ee(t.replace),o=n?t.replace:t;if(n&&typeof t.count<"u"&&(o.count=t.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!n){o={...o};for(let i of r)delete o[i]}return o}static hasDefaultValue(t){let r="defaultValue";for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}},Ol=class{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Tr.create("languageUtils")}getScriptPartFromCode(t){if(t=oa(t),!t||t.indexOf("-")<0)return null;let r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=oa(t),!t||t.indexOf("-")<0)return t;let r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(ee(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;let o=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(o))&&(r=o)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;let o=this.getScriptPartFromCode(n);if(this.isSupportedCode(o))return r=o;let i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),ee(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){let n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),o=[],i=s=>{s&&(this.isSupportedCode(s)?o.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return ee(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):ee(t)&&i(this.formatLanguageCode(t)),n.forEach(s=>{o.indexOf(s)<0&&i(this.formatLanguageCode(s))}),o}},Lv={zero:0,one:1,two:2,few:3,many:4,other:5},Kv={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})},rp=class{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=Tr.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){let n=oa(t==="dev"?"en":t),o=r.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:o});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let s;try{s=new Intl.PluralRules(n,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Kv;if(!t.match(/-|_/))return Kv;let A=this.languageUtils.getLanguagePartFromCode(t);s=this.getRule(A,r)}return this.pluralRulesCache[i]=s,s}needsPlural(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,n={}){return this.getSuffixes(t,n).map(o=>`${r}${o}`)}getSuffixes(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((o,i)=>Lv[o]-Lv[i]).map(o=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(t,r,n={}){let o=this.getRule(t,n);return o?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,n))}},Jv=(e,t,r,n=".",o=!0)=>{let i=jj(e,t,r);return!i&&o&&ee(r)&&(i=$I(e,r,n),i===void 0&&(i=$I(t,r,n))),i},XI=e=>e.replace(/\$/g,"$$$$"),np=class{constructor(t={}){this.logger=Tr.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});let{escape:r,escapeValue:n,useRawValueToEscape:o,prefix:i,prefixEscaped:s,suffix:a,suffixEscaped:A,formatSeparator:c,unescapeSuffix:l,unescapePrefix:g,nestingPrefix:d,nestingPrefixEscaped:f,nestingSuffix:u,nestingSuffixEscaped:m,nestingOptionsSeparator:C,maxReplaces:p,alwaysFormat:w}=t.interpolation;this.escape=r!==void 0?r:Zj,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=i?Mi(i):s||"{{",this.suffix=a?Mi(a):A||"}}",this.formatSeparator=c||",",this.unescapePrefix=l?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=d?Mi(d):f||Mi("$t("),this.nestingSuffix=u?Mi(u):m||Mi(")"),this.nestingOptionsSeparator=C||",",this.maxReplaces=p||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let t=(r,n)=>r?.source===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,n,o){let i,s,a,A=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=f=>{if(f.indexOf(this.formatSeparator)<0){let p=Jv(r,A,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(p,void 0,n,{...o,...r,interpolationkey:f}):p}let u=f.split(this.formatSeparator),m=u.shift().trim(),C=u.join(this.formatSeparator).trim();return this.format(Jv(r,A,m,this.options.keySeparator,this.options.ignoreJSONStructure),C,n,{...o,...r,interpolationkey:m})};this.resetRegExp();let l=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,g=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>XI(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?XI(this.escape(f)):XI(f)}].forEach(f=>{for(a=0;i=f.regex.exec(t);){let u=i[1].trim();if(s=c(u),s===void 0)if(typeof l=="function"){let C=l(t,i,o);s=ee(C)?C:""}else if(o&&Object.prototype.hasOwnProperty.call(o,u))s="";else if(g){s=i[0];continue}else this.logger.warn(`missed to pass in variable ${u} for interpolating ${t}`),s="";else!ee(s)&&!this.useRawValueToEscape&&(s=Uv(s));let m=f.safeValue(s);if(t=t.replace(i[0],m),g?(f.regex.lastIndex+=s.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,r,n={}){let o,i,s,a=(A,c)=>{let l=this.nestingOptionsSeparator;if(A.indexOf(l)<0)return A;let g=A.split(new RegExp(`${l}[ ]*{`)),d=`{${g[1]}`;A=g[0],d=this.interpolate(d,s);let f=d.match(/'/g),u=d.match(/"/g);((f?.length??0)%2===0&&!u||u.length%2!==0)&&(d=d.replace(/'/g,'"'));try{s=JSON.parse(d),c&&(s={...c,...s})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${A}`,m),`${A}${l}${d}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,A};for(;o=this.nestingRegexp.exec(t);){let A=[];s={...n},s=s.replace&&!ee(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let c=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(c!==-1&&(A=o[1].slice(c).split(this.formatSeparator).map(l=>l.trim()).filter(Boolean),o[1]=o[1].slice(0,c)),i=r(a.call(this,o[1].trim(),s),s),i&&o[0]===t&&!ee(i))return i;ee(i)||(i=Uv(i)),i||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${t}`),i=""),A.length&&(i=A.reduce((l,g)=>this.format(l,g,n.lng,{...n,interpolationkey:o[1].trim()}),i.trim())),t=t.replace(o[0],i),this.regexp.lastIndex=0}return t}},oX=e=>{let t=e.toLowerCase().trim(),r={};if(e.indexOf("(")>-1){let n=e.split("(");t=n[0].toLowerCase().trim();let o=n[1].substring(0,n[1].length-1);t==="currency"&&o.indexOf(":")<0?r.currency||(r.currency=o.trim()):t==="relativetime"&&o.indexOf(":")<0?r.range||(r.range=o.trim()):o.split(";").forEach(s=>{if(s){let[a,...A]=s.split(":"),c=A.join(":").trim().replace(/^'+|'+$/g,""),l=a.trim();r[l]||(r[l]=c),c==="false"&&(r[l]=!1),c==="true"&&(r[l]=!0),isNaN(c)||(r[l]=parseInt(c,10))}})}return{formatName:t,formatOptions:r}},zv=e=>{let t={};return(r,n,o)=>{let i=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(i={...i,[o.interpolationkey]:void 0});let s=n+JSON.stringify(i),a=t[s];return a||(a=e(oa(n),o),t[s]=a),a(r)}},iX=e=>(t,r,n)=>e(oa(r),n)(t),op=class{constructor(t={}){this.logger=Tr.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";let n=r.cacheInBuiltFormats?zv:iX;this.formats={number:n((o,i)=>{let s=new Intl.NumberFormat(o,{...i});return a=>s.format(a)}),currency:n((o,i)=>{let s=new Intl.NumberFormat(o,{...i,style:"currency"});return a=>s.format(a)}),datetime:n((o,i)=>{let s=new Intl.DateTimeFormat(o,{...i});return a=>s.format(a)}),relativetime:n((o,i)=>{let s=new Intl.RelativeTimeFormat(o,{...i});return a=>s.format(a,i.range||"day")}),list:n((o,i)=>{let s=new Intl.ListFormat(o,{...i});return a=>s.format(a)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=zv(r)}format(t,r,n,o={}){let i=r.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){let a=i.findIndex(A=>A.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,A)=>{let{formatName:c,formatOptions:l}=oX(A);if(this.formats[c]){let g=a;try{let d=o?.formatParams?.[o.interpolationkey]||{},f=d.locale||d.lng||o.locale||o.lng||n;g=this.formats[c](a,f,{...l,...o,...d})}catch(d){this.logger.warn(d)}return g}else this.logger.warn(`there was no format function for ${c}`);return a},t)}},sX=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)},ip=class extends Ui{constructor(t,r,n,o={}){super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=o,this.logger=Tr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,o.backend,o)}queueLoad(t,r,n,o){let i={},s={},a={},A={};return t.forEach(c=>{let l=!0;r.forEach(g=>{let d=`${c}|${g}`;!n.reload&&this.store.hasResourceBundle(c,g)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?s[d]===void 0&&(s[d]=!0):(this.state[d]=1,l=!1,s[d]===void 0&&(s[d]=!0),i[d]===void 0&&(i[d]=!0),A[g]===void 0&&(A[g]=!0)))}),l||(a[c]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(A)}}loaded(t,r,n){let o=t.split("|"),i=o[0],s=o[1];r&&this.emit("failedLoading",i,s,r),!r&&n&&this.store.addResourceBundle(i,s,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);let a={};this.queue.forEach(A=>{Wj(A.loaded,[i],s),sX(A,t),r&&A.errors.push(r),A.pendingCount===0&&!A.done&&(Object.keys(A.loaded).forEach(c=>{a[c]||(a[c]={});let l=A.loaded[c];l.length&&l.forEach(g=>{a[c][g]===void 0&&(a[c][g]=!0)})}),A.done=!0,A.errors.length?A.callback(A.errors):A.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(A=>!A.done)}read(t,r,n,o=0,i=this.retryTimeout,s){if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:o,wait:i,callback:s});return}this.readingCalls++;let a=(c,l)=>{if(this.readingCalls--,this.waitingReads.length>0){let g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(c&&l&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,o+1,i*2,s)},i);return}s(c,l)},A=this.backend[n].bind(this.backend);if(A.length===2){try{let c=A(t,r);c&&typeof c.then=="function"?c.then(l=>a(null,l)).catch(a):a(null,c)}catch(c){a(c)}return}return A(t,r,a)}prepareLoading(t,r,n={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();ee(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ee(r)&&(r=[r]);let i=this.queueLoad(t,r,n,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach(s=>{this.loadOne(s)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t,r=""){let n=t.split("|"),o=n[0],i=n[1];this.read(o,i,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${r}loading namespace ${i} for language ${o} failed`,s),!s&&a&&this.logger.log(`${r}loaded namespace ${i} for language ${o}`,a),this.loaded(t,s,a)})}saveMissing(t,r,n,o,i,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){let A={...s,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let l;c.length===5?l=c(t,r,n,o,A):l=c(t,r,n,o),l&&typeof l.then=="function"?l.then(g=>a(null,g)).catch(a):a(null,l)}catch(l){a(l)}else c(t,r,n,o,a,A)}!t||!t[0]||this.store.addResource(t[0],r,n,o)}}},Vv=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ee(e[1])&&(t.defaultValue=e[1]),ee(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){let r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Yv=e=>(ee(e.ns)&&(e.ns=[e.ns]),ee(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ee(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Nl=()=>{},aX=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})},Gl=class e extends Ui{constructor(t={},r){if(super(),this.options=Yv(t),this.services={},this.logger=Tr,this.modules={external:[]},aX(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(ee(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));let n=Vv();this.options={...n,...this.options,...Yv(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);let o=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?Tr.init(o(this.modules.logger),this.options):Tr.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=op;let l=new Ol(this.options);this.store=new Ul(this.options.resources,this.options);let g=this.services;g.logger=Tr,g.resourceStore=this.store,g.languageUtils=l,g.pluralResolver=new rp(l,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(g.formatter=o(c),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new np(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new ip(o(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(f,...u)=>{this.emit(f,...u)}),this.modules.languageDetector&&(g.languageDetector=o(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=o(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new Pl(this.services,this.options),this.translator.on("*",(f,...u)=>{this.emit(f,...u)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Nl),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...l)=>this.store[c](...l)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...l)=>(this.store[c](...l),this)});let a=ra(),A=()=>{let c=(l,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(g),r(l,g)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?A():setTimeout(A,0),a}loadResources(t,r=Nl){let n=r,o=ee(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();let i=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&i.indexOf(c)<0&&i.push(c)})};o?s(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(A=>s(A)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(a)})}else n(null)}reloadResources(t,r,n){let o=ra();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=Nl),this.services.backendConnector.reload(t,r,i=>{o.resolve(),n(i)}),o}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&jv.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){let n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;let n=ra();this.emit("languageChanging",t);let o=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},i=(a,A)=>{A?this.isLanguageChangingTo===t&&(o(A),this.translator.changeLanguage(A),this.isLanguageChangingTo=void 0,this.emit("languageChanged",A),this.logger.log("languageChanged",A)):this.isLanguageChangingTo=void 0,n.resolve((...c)=>this.t(...c)),r&&r(a,(...c)=>this.t(...c))},s=a=>{!t&&!a&&this.services.languageDetector&&(a=[]);let A=ee(a)?a:a&&a[0],c=this.store.hasLanguageSomeTranslations(A)?A:this.services.languageUtils.getBestMatchFromCodes(ee(a)?[a]:a);c&&(this.language||o(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector?.cacheUserLanguage?.(c)),this.loadResources(c,l=>{i(l,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t),n}getFixedT(t,r,n){let o=(i,s,...a)=>{let A;typeof s!="object"?A=this.options.overloadTranslationOptionHandler([i,s].concat(a)):A={...s},A.lng=A.lng||o.lng,A.lngs=A.lngs||o.lngs,A.ns=A.ns||o.ns,A.keyPrefix!==""&&(A.keyPrefix=A.keyPrefix||n||o.keyPrefix);let c=this.options.keySeparator||".",l;return A.keyPrefix&&Array.isArray(i)?l=i.map(g=>(typeof g=="function"&&(g=tp(g,{...this.options,...s})),`${A.keyPrefix}${c}${g}`)):(typeof i=="function"&&(i=tp(i,{...this.options,...s})),l=A.keyPrefix?`${A.keyPrefix}${c}${i}`:i),this.t(l,A)};return ee(t)?o.lng=t:o.lngs=t,o.ns=r,o.keyPrefix=n,o}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let n=r.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;let s=(a,A)=>{let c=this.services.backendConnector.state[`${a}|${A}`];return c===-1||c===0||c===2};if(r.precheck){let a=r.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(n,t)&&(!o||s(i,t)))}loadNamespaces(t,r){let n=ra();return this.options.ns?(ee(t)&&(t=[t]),t.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{n.resolve(),r&&r(o)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){let n=ra();ee(t)&&(t=[t]);let o=this.options.preload||[],i=t.filter(s=>o.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return i.length?(this.options.preload=o.concat(i),this.loadResources(s=>{n.resolve(),r&&r(s)}),n):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{let o=new Intl.Locale(t);if(o&&o.getTextInfo){let i=o.getTextInfo();if(i&&i.direction)return i.direction}}catch{}let r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Ol(Vv());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){return new e(t,r)}cloneInstance(t={},r=Nl){let n=t.forkResourceStore;n&&delete t.forkResourceStore;let o={...this.options,...t,isClone:!0},i=new e(o);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n){let a=Object.keys(this.store.data).reduce((A,c)=>(A[c]={...this.store.data[c]},A[c]=Object.keys(A[c]).reduce((l,g)=>(l[g]={...A[c][g]},l),A[c]),A),{});i.store=new Ul(a,o),i.services.resourceStore=i.store}return i.translator=new Pl(i.services,o),i.translator.on("*",(a,...A)=>{i.emit(a,...A)}),i.init(o,r),i.translator.options=o,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},qe=Gl.createInstance();qe.createInstance=Gl.createInstance;var _Pe=qe.createInstance,DPe=qe.dir,kPe=qe.init,FPe=qe.loadResources,vPe=qe.reloadResources,RPe=qe.use,TPe=qe.changeLanguage,NPe=qe.getFixedT,MPe=qe.t,UPe=qe.exists,PPe=qe.setDefaultNamespace,OPe=qe.hasLoadedNamespace,GPe=qe.loadNamespaces,qPe=qe.loadLanguages;var Pi=W(Ae(),1);async function sp({image:e,type:t,quality:r=1}){if(e instanceof Blob||e instanceof ImageBitmap)return AX({image:e,type:t,quality:r});if(typeof e=="string"){let i=e;e=new Image,e.src=i}e.complete||await e.decode();let n=new OffscreenCanvas(e.naturalWidth,e.naturalHeight);return n.getContext("2d").drawImage(e,0,0),n.convertToBlob({type:t,quality:r})}async function AX({image:e,type:t,quality:r=1}){let n=e instanceof Blob;if(n&&e.type===t)return e;let o=n?await createImageBitmap(e):e,i=new OffscreenCanvas(o.width,o.height);return i.getContext("2d").drawImage(o,0,0),n&&o.close(),i.convertToBlob({type:t,quality:r})}async function Zv(e){return fetch(ct(`/i18n/${e}.json`)).then(t=>t.json()).catch(()=>({}))}function ap(e,t,r="code"){return new Intl.DisplayNames([$v(e)],{type:"language",fallback:r}).of($v(t))}var cX={zh_CN:"zh-Hans",zh_TW:"zh-Hant","zh-CN":"zh-Hans","zh-TW":"zh-Hant"};function $v(e){return(cX[e]??e).replaceAll("_","-")}function rR(e,t,r=new Map,n){for(let{children:o,i18nKey:i,...s}of e)t&&Pi.default.contextMenus.create({...n?{parentId:n.id,contexts:n.contexts,documentUrlPatterns:n.documentUrlPatterns}:null,...s}),i&&r.set(s.id,i),o&&rR(o,t,r,s);return r}function eR(e,t){let r=rR(e,t);return function(){let o=or.English;qe.init({resources:{},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1,defaultVariables:{APP_NAME:Bw,AI:"AI",WISEBASE:lv}}}).then(()=>H("language",or.English)).then(i=>{i!==o&&(o=i,tR(i,r))}).finally(()=>{tf.subscribe(i=>{if(!Od(i,"language"))return;let s=i.language.newValue;s&&s!==o&&(o=s,tR(s,r))})})}}async function tR(e,t){if(!qe.hasResourceBundle(e,"translation")){let o=await Zv(e);qe.addResourceBundle(e,"translation",o)}let r=qe.getFixedT(e,"translation"),n=ap(e,e);for(let[o,i]of t.entries())Pi.default.contextMenus.update(o,{title:r(i,{lang:n})}).catch(Mt)}function nR(){let e=[{contexts:["action"],id:"open-full-page-chat",title:"Open Full Page Chat",i18nKey:"contextMenu.openFullPageChat"},{id:"ai-page-tools",contexts:["page","link"],documentUrlPatterns:["http://*/*","https://*/*"],title:"Sider",children:[{id:"open-full-page-chat2",title:"Open Full Page Chat",i18nKey:"contextMenu.openFullPageChat"},{id:"summarize-page",title:"Summarize the page",i18nKey:"contextMenu.summarizePage"},{id:"translate-page",title:"Translate to English",i18nKey:"contextMenu.translatePage"},{id:"save-page",title:"Save the page to wisebase",i18nKey:"contextMenu.savePage"}]},{contexts:["selection"],id:"ai-selection-tools",title:"Sider",children:[{id:"chat-selection",title:"Chat with selected text",i18nKey:"contextMenu.chatSelection"},{id:"highlight-selection",title:"Highlight selected text",i18nKey:"contextMenu.highlightSelection"}]},{contexts:["image"],id:"ai-image-tools",title:"AI Image Tools",i18nKey:"contextMenu.imageTools",children:[{id:"chat-with-image",title:"Chat with Image",i18nKey:"imageToolbar.chatWithImage"},{id:"extract-text-from-image",title:"Extract Text",i18nKey:"imageToolbar.extractText"},{id:"remove-background",title:"Remove Background",i18nKey:"imageToolbar.removeBackground"},{id:"remove-text",title:"Remove Text",i18nKey:"imageToolbar.removeText"},{id:"remove-brushed-area",title:"Photo Eraser",i18nKey:"imageToolbar.erase"},{id:"inpaint",title:"Inpaint",i18nKey:"imageToolbar.inpaint"},{id:"replace-background",title:"Replace Background",i18nKey:"imageToolbar.replaceBackground"},{id:"upscale-image",title:"Upscale",i18nKey:"imageToolbar.upscale"},{id:"variation",title:"Create Variations",i18nKey:"imageToolbar.variation"}]}];Pi.default.runtime.onInstalled.addListener(()=>{eR(e,!0)}),Pi.default.contextMenus.onClicked.addListener(async(r,n)=>{switch(r.menuItemId){case"open-full-page-chat":case"open-full-page-chat2":{ei();break}case"summarize-page":{if(!await xe()){zn();return}let i=n?.id;if(i===void 0)return;let s=no(n);s&&s.then(()=>{xt("summarize-page-from-contextmenu",null,{tabId:i})});break}case"translate-page":{if(!await xe()){zn();return}let i=n?.id;if(i===void 0)return;xt("translate-page-from-contextmenu",null,{tabId:i});break}case"save-page":{if(!await xe()){zn();return}let i=n?.id;if(i===void 0)return;xt("save-page-from-contextmenu",null,{tabId:i});break}case"chat-selection":{if(!await xe()){zn();return}return no(n),Pi.default.storage.local.set({initialSelectionText:r.selectionText,lastTab:"chat"}).then(Mt);break}case"highlight-selection":{let o=n?.id;if(o===void 0)return;if(!await xe()){zn();return}xt("highlight-page-from-contextmenu",null,{tabId:o});break}case"chat-with-image":case"extract-text-from-image":{(async function(){let o=r.srcUrl;if(!o)return;let i=r.menuItemId==="chat-with-image",s=["image/png","image/jpeg"];await no(n),Vt("lastTab",i?"chat":"ocr");let A=await(await fetch(o)).blob(),c=await createImageBitmap(A),{width:l,height:g}=c;s.includes(A.type)||(A=await sp({image:c,type:"image/png"})),c.close();let d=await ir(A),f=!1;for await(let u of db())if(u){f=!0;break}xt(i?"send-image-to-chat":"send-image-to-ocr",{base64:d,imageUrl:o,width:l,height:g,type:A.type},f?{view:"sidebar"}:{tabId:n?.id})})();break}case"upscale-image":case"remove-background":case"remove-text":case"replace-background":case"remove-brushed-area":case"inpaint":case"variation":{Ai.report(`visit_web_right_click_image_assistant_${r.menuItemId.replace(/-/g,"_")}`);let o=r.menuItemId,i=r.srcUrl;if(!i)return;(async function(){let s=["image/png","image/jpeg"],A=await(await fetch(i)).blob(),c=await createImageBitmap(A),{width:l,height:g}=c;s.includes(A.type)||(A=await sp({image:c,type:"image/png"})),c.close();let d=await ir(A),f=await new Promise(async(u,m)=>{let C=new AbortController,p=setTimeout(()=>{C.abort(),u(w)},1e4);Ne("website-painter-ready",({sender:F})=>{F.tab?.id===w.id&&(C.abort(),clearTimeout(p),u(w))},{signal:C.signal});let w=await GI({subRoute:Gd(o,{variation:"painter",_:o}),hasDataToSend:!0})});xt("send-image-to-image-tools",{toolName:o,base64:d,imageUrl:i,width:l,height:g,type:A.type},{tabId:f.id})})()}}}),eR(e,!1)()}var ql=W(Ae(),1);var Ap="do_ocr";async function cp(e){ql.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(r=>{r?ql.default.runtime.sendMessage({type:Ap,data:{img:e,isForSidepanel:!0}}):t()}).catch(t);async function t(){Nw({url:ct("standalone.html")}),await bt(500),ql.default.runtime.sendMessage({type:Ap,data:{img:e,isForSidepanel:!1}})}}async function lp(){if(await H("language"))return;let t=navigator.languages;for(let r of t){r=r.replace("-","_");let n=r.split("_");n[0]=n[0].toLowerCase(),n[1]&&(n[1]=n[1].toUpperCase()),r=n.join("_");let o="";if(r in kd?o=r:o=Object.keys(kd).find(i=>n[0]===i.split("_")[0])||"",o){await T({__DONT_SYNC__:`language${Date.now()}`,language:o});return}}await T({__DONT_SYNC__:`language${Date.now()}`,language:or.English})}var oR=W(Ae(),1);function iR(){oR.default.storage.local.onChanged.addListener(e=>{if(e.__DONT_SYNC__?.newValue)return;let t=Object.keys(e).filter(r=>r in CA);t.length&&lX(t)})}var sR=async e=>{if(!await xe())return;await aR();let r=await j(e);r["provider:gpt3"]&&(r["provider:gpt3"].apiKey=""),Oi(r,"translatorHostConfig"),Oi(r,"quickActionInputIconDisabledHost"),Oi(r,"sidebarFabDisabledHost"),Oi(r,"webAssistantImageDisabledHost"),Oi(r,"pageTranslationNeverHost"),Oi(r,"inputTranslationDisabledHost"),X.setUserSettings(r)},gp=new Map,lX=e=>{let t=e.sort().toString();gp.has(t)||gp.set(t,Ut(sR,1e3)),gp.get(t)?.(e)},aR=async()=>{let{allPromptList:e}=await H(["allPromptList"]),t=!1;t=!1,e&&(await Promise.all(e.map(async r=>{if(!r.id){t=!0;let n=await X.createPrompt({key:r.key,name:r.name,content:r.content,use:r.usedIn,icon:r.icon});r.id=String(n.id)}})),t&&await T({__DONT_SYNC__:`unsavedSidebarTpl${Date.now()}`,allPromptList:e}))},AR=async()=>{if(!await xe())throw new Error("login required");await aR(),await gX()};async function gX(){let e=Object.keys(CA),t={...await X.getUserSettings()||{}};if(!t||!Object.keys(t).length){await sR(e);return}for(let n of Object.keys(t))(!(n in CA)||t[n]===null)&&delete t[n];let r=await j(e);Gi(t,"translatorHostConfig"),Gi(t,"quickActionInputIconDisabledHost"),Gi(t,"sidebarFabDisabledHost"),Gi(t,"webAssistantImageDisabledHost"),Gi(t,"pageTranslationNeverHost"),Gi(t,"inputTranslationDisabledHost"),["chatVisiblePromptKeys","readVisiblePromptKeys","writeVisiblePromptKeys"].forEach(n=>{delete t[n]}),As(r,t,(n,o)=>{if(Array.isArray(n))return o}),await T({__DONT_SYNC__:`pullFromCloud${Date.now()}`,...r})}function Oi(e,t){let r=[];if(e[t]&&typeof e[t]=="object"&&!Array.isArray(e[t])){for(let[n,o]of Object.entries(e[t]))n!=="undefined"&&r.push({__key__:n,...o||{}});e[t]=r}}function Gi(e,t){let r={};if(Array.isArray(e[t])){for(let n of e[t])n.__key__&&n.__key__!=="undefined"&&(r[n.__key__]=n,delete n.__key__);e[t]=r}}function cR(){Td("logged",e=>{dX(!!e.logged?.newValue)}),Td(["language"],async e=>{if(typeof e.language?.oldValue>"u")return;if(await xe()){let{allPromptList:r}=await j({allPromptList:[]});r?.length?X.getAllPromptList():setTimeout(()=>{X.getAllPromptList()},2e3)}We("systemVoiceDemoText")})}var dX=e=>{e?fX():uX()},fX=Ut(()=>{ia(!0)},3e3,{leading:!0}),uX=()=>{We("userInfo")},lR=Sr(async()=>{let{__invited_reward_finish__:e}=await j({__invited_reward_finish__:!1});if(e)return;if(await xe()){let r=await X.inviteFinish();r.is_invited&&r.is_rewarded&&(T({userIsInvited:!0,inviteRewardConfig:{"gpt3.5":r.reward.GPT3Dot5Count,gpt4:r.reward.GPT4Count}}),r.already_rewarded||T({__show_invited_reward__:!0})),T({__invited_reward_finish__:!0})}},1e4);function An(e,t=0){return qw(e,async()=>{switch(e){case"getVipPeriodInfo":await X.getVipPeriodInfo();break;case"getVipInfo":await X.getVipInfo();break;case"getUserInfo":await X.getUserInfo();break;case"getUserStatus":await X.getUserStatus();break;case"pullSettingsFromCloud":await AR();break;case"inviteFinishCallback":await lR();break;case"getPricingPlan":await X.getPricingPlan();break;case"getAllPromptList":await X.getAllPromptList();break;case"getClientConfig":await X.getClientConfig();break;case"getVoiceRoleList":await X.getVoiceRoleList();break;case"getDomainPool":await wS();break;case"getWisebaseAllSavedUrls":await jF();break;case"syncWisebaseAllSavedUrls":await kl();break;case"getWisebases":await Ri();break;default:break}},t)()}async function ia(e){await We("__manual_logout__"),await lp();let t=await xe();T({logged:t}),gR([],e)}async function gR(e,t){let r=await xe(),o=[{name:"getAllPromptList",cacheDuration:t?0:1/0},{name:"getPricingPlan",cacheDuration:864e5},{name:"getClientConfig",cacheDuration:1/0},{name:"getDomainPool",cacheDuration:1/0},...r?[{name:"getVipPeriodInfo",cacheDuration:864e5},{name:"getUserInfo",cacheDuration:t?0:864e5},{name:"getUserStatus",cacheDuration:t?0:864e5},{name:"getVipInfo",cacheDuration:t?0:1/0},{name:"pullSettingsFromCloud",cacheDuration:t?0:1/0},{name:"getVoiceRoleList",cacheDuration:6048e5},{name:"inviteFinishCallback",cacheDuration:t?0:1/0},{name:"getWisebaseAllSavedUrls",cacheDuration:t?0:1/0},{name:"getWisebases",cacheDuration:t?0:1/0}]:[]],i=e&&e.length>0?o.filter(s=>e.includes(s.name)):o;await pX(i.map(s=>An(s.name,s.cacheDuration)))}async function pX(e){let t=[];(await Promise.allSettled(e)).forEach(n=>{if(n.status==="rejected"){let o=n.reason?.message;o&&t.push(o)}}),t.length>0?await T({__requestDataFailedJobNames__:t}):await We("__requestDataFailedJobNames__")}async function dR(){return(await fR()).length>0}async function fR(){let{__requestDataFailedJobNames__:e}=await j({__requestDataFailedJobNames__:[]});return e}async function uR(){let e=await fR();e.length>0&&await gR(e)}var IR=W(Ae(),1);async function pR(){let e={},t=["p","p1","p2"],r=Ye?`https://*.microsoft.com/*${cs}*`:`https://*.google.com/*${cs}*`,n=await IR.default.tabs.query({url:r,currentWindow:!0});if(n.length){n.reverse();for(let o of n){let i=o.url||le.origin,{searchParams:s}=new URL(i),a=!1;for(let[A,c]of s.entries())t.includes(A)&&c&&(a=!0,e[A]=c);if(a)break}}if(Object.keys(e).length>0)for(let[o,i]of Object.entries(e))await yA(o==="p"?"source":o,i,7);else for(let o of t){let i=await EA(o==="p"?"source":o);i&&(e[o]=i)}if(Object.keys(e).length){X.adStat({action:"install-sider-successfully",source:e.p||"",p1:e.p1||"",p2:e.p2||""});let o=mX(e.p1||""),i={installByAD:!0,onBoardFrom:o};(o==="grammar"||o==="translate"||o==="write"||o==="ocr")&&(i.lastTab=o==="write"?"compose":o),await T(i)}else{let o="organic",i={p:o,p1:"extension",p2:Ye?"edge":"chrome"};for(let[s,a]of Object.entries(i))await yA(s==="p"?"source":s,a,7);X.adStat({action:"install-sider-successfully",source:o,p1:"",p2:""})}}function mX(e){return e.includes("ytb")?"ytb":e.includes("translate")?"translate":e.includes("ocr")?"ocr":e.includes("write")?"write":e.includes("bgremover")?"bgremover":e.includes("chatpdf")?"pdf":e.includes("summarizer")?"summary":e.includes("grammar")?"grammar":e.includes("image")?"painter":e.includes("email")?"email":""}var dp=W(Ae(),1);var Hl=class{results=[];lastText="";lastTextIndex=-1;isInTagStream=!1;parse(t){return t.type==="text"?this.handleTextMsg(t):t.type==="tool_call"?this.handleToolCallMsg(t):t.type==="llm_status"?this.handleLLMStatusMsg(t):t.type==="image"?this.handleImageMsg(t):t.type==="data_analysis_image"?this.handleDataAnalysisImage(t):t.type==="media_key_moments"?this.handleKeyMomentsMsg(t):t.type==="file_highlights"?this.handleFileHighlightMsg(t):t.type==="notification"?this.handleNotificationMsg(t):t.type==="tag_stream"?this.handleTagStreamMsg(t):t.type==="file"?this.handleFileMsg(t):t.type==="reasoning_content"?this.handleReasoningContentMsg(t):t.type==="chat_deep_research"?this.handleChatDeepResearchMsg(t):t.type==="chat_deep_research_output_item"&&this.handleChatDeepResearchOutputItemMsg(t),t.type!=="text"&&(this.lastText="",this.lastTextIndex=-1),this.results}getLastResult(){return this.results[this.results.length-1]}handleReasoningContentMsg(t){if(t.reasoning_content.status==="start")this.results.push({type:"reasoning_content",reasoningContent:{status:"start",text:""}});else if(t.reasoning_content.status==="processing"){let r=this.results.findLastIndex(n=>n.type==="reasoning_content");this.results[r]&&(this.results[r].reasoningContent.text+=t.reasoning_content.text)}else if(t.reasoning_content.status==="finish"||t.reasoning_content.status==="fail"){let r=this.results.findLastIndex(n=>n.type==="reasoning_content");this.results[r]&&(this.results[r].reasoningContent.status=t.reasoning_content.status)}}handleFileMsg(t){this.results.push({type:"file",file:Ge(t.file)})}handleChatDeepResearchMsg(t){if(t.chat_deep_research.status==="start"){if(t.chat_deep_research.action==="deep_research_intent"){this.results.push({type:"chat_deep_research",chatDeepResearch:Ge(t.chat_deep_research)});return}if(t.async_task?.step==="research"&&t.async_task?.status==="start"||t.async_task&&!t.async_task.step){let r=this.results.findLastIndex(n=>n.type==="chat_deep_research");r!==-1?this.results[r]={type:"chat_deep_research",chatDeepResearch:Ge(t.chat_deep_research)}:this.results.push({type:"chat_deep_research",chatDeepResearch:Ge(t.chat_deep_research)})}else if(t.async_task.step==="write"&&t.async_task.status==="start"){let r=this.results.findLastIndex(n=>n.type==="chat_deep_research");if(r!==-1){let n=this.results[r].chatDeepResearch.output.findLast(o=>o);n&&n.type==="message"&&(n.content[0].text="")}}}else if(t.chat_deep_research.status==="finish"&&!t.async_task.step){let r=this.results.findLastIndex(n=>n.type==="chat_deep_research");this.results[r]?(t.chat_deep_research.output?.length>0&&(this.results[r].chatDeepResearch.output=t.chat_deep_research.output),this.results[r].chatDeepResearch.status=t.chat_deep_research.status):this.results.push({type:"chat_deep_research",chatDeepResearch:Ge(t.chat_deep_research)})}else t.chat_deep_research.status==="fail"&&this.results.push({type:"error",id:te(),error:{code:15040,message:""}})}handleChatDeepResearchOutputItemMsg(t){let r=this.getLastResult();if(r&&r.type==="chat_deep_research"){let n=r.chatDeepResearch.output.findLast(o=>o);if(n&&n.id===t.chat_deep_research_output_item.id){if(t.chat_deep_research_output_item.type==="message")if(t.chat_deep_research_output_item.content[0]?.type==="annotation")if(n.type==="message")n.content[0].annotations?n.content[0].annotations.push(Ge(t.chat_deep_research_output_item.content[0].annotations?.[0])):n.content[0].annotations=[Ge(t.chat_deep_research_output_item.content[0].annotations?.[0])];else{let o=Ge(t.chat_deep_research_output_item);o.content[0].text="",r.chatDeepResearch.output.push(o)}else t.chat_deep_research_output_item.content[0]?.type==="text"&&(n.content[0].text||(n.content[0].text=""),n.content[0].text+=t.chat_deep_research_output_item.content[0]?.text);else if(t.chat_deep_research_output_item.type==="reasoning"){let o=n.summary.findLast(i=>i);o&&o.summaryIndex===t.chat_deep_research_output_item.summary[0]?.summary_index?o.text+=t.chat_deep_research_output_item.summary[0]?.text:n.summary.push(Ge(t.chat_deep_research_output_item.summary[0]))}}else{if(t.chat_deep_research_output_item.type==="web_search_call"&&!t.chat_deep_research_output_item.web_search_call?.action?.query)return;r.chatDeepResearch.output.push(Ge(t.chat_deep_research_output_item))}}}handleTagStreamMsg(t){if(t.tag_stream.type==="start")this.isInTagStream=!0,this.results.push({type:"tag",id:te(),tag:{tagName:t.tag_stream.tag_name,attrs:t.tag_stream.attrs,tagId:"",status:"start",content:""}});else if(t.tag_stream.type==="content"){let r=this.getLastResult();r&&r.type==="tag"&&r.tag.tagName===t.tag_stream.tag_name&&(r.tag.content+=t.tag_stream.content)}else if(t.tag_stream.type==="end"){let r=this.getLastResult();r&&r.type==="tag"&&r.tag.tagName===t.tag_stream.tag_name&&(r.tag.status="finish",r.tag.tagId=t.tag_stream.tag_id),this.isInTagStream=!1}}handleLLMStatusMsg(t){let r=t.llm_status.id,n=this.results.findIndex(o=>o.id===r);this.results[n]?this.results[n]={...t.llm_status}:this.results.push({type:"llm_status",id:r,status:t.llm_status.status,data:t.llm_status.data})}handleNotificationMsg(t){this.results.push({type:"notification",id:te(),notification:t.notification})}handleKeyMomentsMsg(t){t.media_key_moments&&this.results.push({type:"media_key_moments",id:te(),mediaKeyMoments:{keyMoments:t.media_key_moments.key_moments}})}handleTextMsg(t){if(t.text){let r=this.getLastResult();r&&r.type==="text"?r.text+=t.text:this.results.push({type:"text",text:t.text,id:te()})}}handleToolCallMsg(t){let r=t.tool_call.id+(t.tool_call.data_analysis&&typeof t.tool_call.data_analysis.tool_call_id<"u"?t.tool_call.data_analysis.tool_call_id:""),n=t.tool_call.name,o=n.replace(/_([a-z])/g,(i,s)=>s.toUpperCase());if(t.tool_call.status==="start")this.results.push({type:"tool_call",toolCall:Ge(t.tool_call)});else if(t.tool_call.status==="processing"){let i=this.results.findIndex(a=>a?.toolCall?.id+(a.toolCall?.[o]?.toolCallId||"")===r),s=this.results[i];s&&(s.toolCall={...s.toolCall,[o]:Ge(t.tool_call[n])})}else if(t.tool_call.status==="finish"||t.tool_call.status==="fail"){let i=this.results.findIndex(a=>a?.toolCall?.id+(a?.toolCall?.[o]?.toolCallId||"")===r),s=this.results[i];s&&(s.toolCall={...s.toolCall,[o]:Ge(t.tool_call[n])}),s.toolCall.status=t.tool_call.status,t.tool_call.error&&(s.toolCall.error=t.tool_call.error)}}handleImageMsg(t){this.results.push({type:"sider_image",id:te(),images:t.images.images})}handleDataAnalysisImage(t){this.results.push({type:"data_analysis_image",id:te(),dataAnalysisImage:t.data_analysis_image})}handleFileHighlightMsg(t){this.results.push({type:"file_highlights",id:te(),fileHighlights:{highlights:t.file_highlights.highlights}})}};function mR(e){return/\${\s*(lang)\s*}/gi.test(e)}var Ll=class{token="";refreshToken="";cid;anonymous=!0;checkFileStatusTimer=null;tempLastMsgId;constructor(t){this.cid=t}async getToken(){let t=await jr();this.token=t.token,this.refreshToken=t.refreshToken,this.anonymous=t.anonymous}async generateAnswer(t){let r={},n=null,o={};try{await this.getToken()}catch(D){throw new Error(D.errMsg)}if(!this.cid&&t.historyMsg)try{let{cid:D,lastMsgId:x,messages:N}=await X.uploadHistoryMsg(t.historyMsg);t.onEvent({type:"uploadMsgDone",data:{cid:D,messages:N}}),this.cid=D,this.tempLastMsgId=x}catch(D){throw new Error(D.errMsg)}let{[ls]:{model:i}}=await j({[ls]:{model:"sider"}}),s=t.model||i,a="",A="",c=!1;function l(){!c&&a&&A&&X.statUserStop(a,A),n&&clearInterval(n)}t.getCleanupMethod?.(l);async function g(D){return D.includes("free_trial_data_analysis")?!0:(await X.getFileStauts(D)).every(N=>N.textReady||N.textTaskIsFailed)}async function d(D){let{handle_msg:x,is_embedding:N}=await X.getFileStauts(D),J=null;if(N)try{J=JSON.parse(x)}catch{if(x)throw new Error(x)}else J={accept_model:{"gpt-3.5":!0,"gpt-4":!0,"gpt-4o":!0,"gpt3.5-16k":!0,"claude-instant":!0,claude2:!0,"claude-3-haiku":!0,"claude-3-sonnet":!0,"claude-3.5-sonnet":!0,"claude-3-opus":!0,bard:!0,"gemini-pro":!0,"gemini-1.5-pro":!0,"gemini-1.5-flash":!0,gpts:!0,"llama-3":!0}};return J}async function f(D,x){let{fileTextStatus:N}=await dp.default.storage.local.get({fileTextStatus:{}});if(D.filter(M=>N[M]).length===D.length)return null;let J=await g(D);return J?($o(D,!0),null):new Promise((M,Y)=>{n=setInterval(async()=>{try{J=await g(D),J&&($o(D,!0),n&&(clearInterval(n),M(null)))}catch(ue){throw n&&clearInterval(n),new Error(ue)}},1e3)})}if(t.multiContent?.some(D=>D.type==="file")&&(t.sPromptTmpl&&!t.sPromptTmpl.key.includes("audio")||!t.sPromptTmpl)){let D=t.multiContent?.filter(x=>x.type==="file"&&x.file?.type!=="image").map(x=>x.file.file_id)||[];await f(D,s).catch(x=>{throw new Error("Getting file status error: "+x.toString())})}let u=async(D,x,N)=>{try{return await Yr(D,{method:"POST",signal:t.signal,headers:{"Content-Type":"application/json",Authorization:this.token,"X-App-Name":K,"X-App-Version":at,"X-Time-Zone":se,"X-Trace-Id":te()},body:JSON.stringify(x),onMessage(J){if(J=="[DONE]"){c=!0,t.onEvent({type:"done"});return}let M=JSON.parse(J);if(M.code!==0)throw new Error(JSON.stringify({code:M.code,msg:M.msg||M.message}));M.type==="message_start"&&(a=M.message_start.cid,A=M.message_start.assistant_message_id,T({lastMessageId:A})),N(M.data)}})}catch(J){let M=J.message,Y=null;try{Y=JSON.parse(M)}catch{}if(t.from==="chat")throw new Error(JSON.stringify({code:Y?.code,message:Y?.msg||Y?.message||M}));Bs(Y?.code,Y?.msg||Y?.message||M)}};async function m(){let D={},x=t.autoTools||[];if((t.freeTrailTool==="artifacts"||t.freeTrailTool==="thinking_mode")&&!x.includes(t.freeTrailTool)&&x.push(t.freeTrailTool),x.indexOf("create_image")!==-1){let{imageQuality:Y}=await j({imageQuality:"nano_banana"});D.image={quality_level:Y}}let J=t.sPromptTmpl?[t.sPromptTmpl]:[];if(!J.length){let Y=[];(x.includes("artifacts")||x.includes("thinking_mode"))&&(x.includes("artifacts")&&Y.push({key:"artifacts",attributes:{lang:"original"}}),J=Y)}D.auto=x.filter(Y=>Y!=="artifacts"&&Y!=="thinking_mode"),t.forceSearch?D.force="search":J&&(Array.isArray(J)?J.length>0&&J?.some(Y=>Y?.key==="artifacts"||Y?.key==="thinking_mode"):J&&J.key!=="artifacts"&&J.key),t.forceTool&&(D.force=t.forceTool),t.freeTrailTool&&(D.free_trial_tool=t.freeTrailTool,!D.force&&t.freeTrailTool!=="artifacts"&&t.freeTrailTool!=="thinking_mode"&&(D.force=t.freeTrailTool));let M=await dp.default.storage.local.get({vipInfo:null,disableSuggestTool:!1});return M.vipInfo&&!M.vipInfo.isVIP&&!M.disableSuggestTool&&D.auto.push("suggest_tool"),{tools:D,sPromptTmpl:J}}let C=new LA,p=await sr(),w=await zr(),{outputLanguage:F}=await j({outputLanguage:""}),E=Date.now(),b=0,B=await hX(s,t.chatModels||[],t.multiContent),y=t.autoTools?.includes("thinking_mode")&&B||t.isThink?{enable:!0}:void 0,{tools:v,sPromptTmpl:U}=await m(),{enableChatInstruction:V,chatDeepResearchEnable:L}=await j({enableChatInstruction:!1,chatDeepResearchEnable:!1});await u(`${w}/chat/v1/completions`,{system:t.system,stream:!0,cid:this.cid,model:L?"chat-deep-research":s,filter_search_history:t.filterSearchHistory,from:t.from,retry_use_req_param:t.forceSearch?!0:void 0,re_answer_by_mid:t.sReqId,client_prompt:t.clientPrompt||void 0,chat_models:t.chatModels,image_id:t.imageId,eid:t.eid,think_mode:y,quote:t.quote,multi_content:t.multiContent,force_ocr:t.forceOcr,ocr_option:t.ocrOption,chat_deep_research_opt:L?{enable:!0}:void 0,prompt_templates:U.filter(D=>D.key!=="file-video-summarize"),deep_search:t.deepSearch,tools:v,extra_info:{origin_url:p?.url,origin_title:p?.title},video_summarize:t.sPromptTmpl?.key.includes("video-summarize")?{enable:!0,language:F&&F!=="auto"?hA[F].toLocaleUpperCase():t.sPromptTmpl?.attributes.lang}:void 0,audio_summarize:t.sPromptTmpl?.key.includes("audio-summarize")?{enable:!0,language:F&&F!=="auto"?hA[F].toLocaleUpperCase():t.sPromptTmpl?.attributes.lang}:void 0,search_option:t.searchOption,output_language:F&&await CX(t.from,t.promptKey)?F.replace("_","-"):void 0,parent_message_id:this.tempLastMsgId?this.tempLastMsgId:t.parentMessageId?t.parentMessageId:void 0,customize_instructions:V&&t.from==="chat"?{enable:!0}:void 0},D=>{if(!D)return;if(D.type==="credit_info"){let M=D.credit_info.type==="advanced"?"gpt-4":D.credit_info.type==="elite"?"eliteCredit":"gpt-3.5",Y=D.credit_info.info,ue={[M]:{total:Y.total,remain:Y.remain,extraTotal:Y.extra_total,extraRemain:Y.extra_quota,period:Y.remain_period,used:Y.used}};HI().then(Kt=>{let _e=Kt[M];(_e.remain!==ue[M].remain||_e.extraRemain!==ue[M].extraRemain||_e.period!==ue[M].period||_e.extraTotal!==ue[M].extraTotal||_e.total!==ue[M].total||_e.used!==ue[M].used||_e.period!==ue[M].period)&&(_e.remain+_e.extraRemain>ue[M].remain+ue[M].extraRemain||_e.used!==ue[M].used||D.type==="credit_info")&&C.run(()=>Rn(ue))})}D.type==="feature_info"&&D.feature_info&&kr(D.quota_type==="fast_text"?"gpt-3.5":"gpt-4",D,D.feature_info);let x=D.text,N=D.model||s;(x||D.type!=="pulse")&&(b===0&&(b=Date.now()-E),r[N]||(r[N]=""),o[N]||(o[N]={parser:null,multiContent:[]},o[N].parser=new Hl),x&&(r[N]+=x),o[N].multiContent=o[N].parser.parse(D),t.onEvent({type:"answer",data:{text:r[N],multiContent:o[N].multiContent,questionId:D.type==="message_start"?D.message_start.user_message_id:void 0,messageId:D.type==="message_start"?D.message_start.assistant_message_id:void 0,conversationId:D.type==="message_start"?D.message_start.cid:void 0,chatModel:N}})),D.code&&D.code!==0&&t.onEvent({type:"error",data:{error:KA(D.code,D.msg),chatModel:D.chat_model||s}}),D.type==="chat_models_status"&&(D.chat_models_status.done&&t.onEvent({type:"done",data:{chatModel:D.model||s,done:!0}}),D.chat_models_status.error&&t.onEvent({type:"error",data:{error:KA(D.chat_models_status.code,D.chat_models_status.error),chatModel:D.model||s}})),D.type==="tool_call"&&D.tool_call.name==="search"&&t.onEvent({type:"searchKeywords",data:{searchKeywords:D.tool_call.search?.search_keywords,searchSnippets:D.tool_call.search?.search_snippets,chatModel:D.model||s}}),(D.type==="deep_search"||D.type==="message_start")&&t.onEvent({type:"deepSearch",data:{deep_search:D.deep_search||{},cid:D.type==="message_start"?D.message_start.cid:D.cid,message_id:D.message_id}})});try{Ai.report("send_message",{conversation_id:this.cid,model:t.chatModels&&t.chatModels?.length>0?t.chatModels.join(","):s,prompt_id:t.promptKey||t.sPromptTmpl?.key,uploaded_files:t.eids?.join(","),tool_enabled:v.auto.join(",")})}catch{}}};async function hX(e,t,r){let n=e;if(t.length>0){if(t.length>1)return!0;n=t[0]}let o=await H("siderModels");if(o){let i=o.find(s=>s.name===n);return i?typeof i.is_think_model<"u"?!i.is_think_model:!Fd.includes(i.name):!1}else return!Fd.includes(n)}async function CX(e,t){if(e==="translate"||e==="writing"||e==="ocr")return!1;if(!t)return!0;if(t.startsWith("translate"))return!1;let r=await H("allPromptList");if(r){let n=r.find(o=>{let i=o.key||o.id;return t===i});if(n)return mR(n.content)?!0:n.isCustom}return!0}var CR=Ut(Sr(async()=>{await xe()&&(await dR()&&await uR(),await Promise.allSettled([An("getVipInfo",30*6e4),An("pullSettingsFromCloud",6*36e5),An("getAllPromptList",6*36e5),An("getClientConfig",36e5),An("getDomainPool",30*6e4),An("syncWisebaseAllSavedUrls",6*36e5)]))}),5e3,{leading:!0});var fp=W(Ae(),1);function up(e){fp.default.storage.local.get({userClickedWidgets:[]}).then(t=>{let r=e.filter(n=>!t.userClickedWidgets.includes(n));fp.default.storage.local.set({needShowTipWidgets:r})})}cR();iR();RX();OX();S.default.runtime.onStartup.addListener(()=>{ia()});async function BX(e,{system:t,question:r,type:n,cid:o,historyMsg:i,model:s,chatModels:a,pluginIds:A,forceSearch:c,autoSearch:l,filterSearchHistory:g,from:d,promptKey:f,clientPrompt:u,imageId:m,eids:C,forceOcr:p,ocrOption:w,forceProvider:F,sPromptTmpl:E,quote:b,multiContent:B,parentMsgId:y,chatgptFiles:v,actionData:U,autoTools:V,forceTool:L,deepSearch:D,sReqId:x,searchOption:N,parentMessageId:J,freeTrailTool:M,isThink:Y}){let{"provider:gpt3":ue,provider:Kt}=await H({provider:"siderApi",["provider:gpt3"]:null}),_e,De=F||Kt;if(De==="chatgpt"){let Tt=await lt({onRefresh:()=>e.postMessage({event:"GUARD_TAB_REFRESHING"}),throwGuideError:!0});_e=new OA(Tt)}else if(De==="gpt3"){let{model:Tt}=ue||{};_e=new HA("",Tt||Dd)}else if(De==="siderApi")_e=new Ll(o);else throw new Error(`Unknown provider ${De}`);let Xt=()=>{},cn=new AbortController;e.onDisconnect.addListener(()=>{cn.abort(),Xt?.()}),await _e.generateAnswer({system:t,prompt:r,type:n,signal:cn.signal,historyMsg:i,pluginIds:A,onEvent(Tt){if(Tt.type==="done"){Tt.data?.chatModel?e.postMessage(Tt.data):e.postMessage({event:"DONE"});return}e.postMessage(Tt.data)},getCleanupMethod(Tt){Xt=Tt},forceSearch:c,autoSearch:l,filterSearchHistory:g,from:d,promptKey:f,model:s,chatModels:a,imageId:m,eids:C,forceOcr:p,ocrOption:w,sPromptTmpl:E,cid:o,parentMsgId:y,chatgptFiles:v,actionData:U,autoTools:V,forceTool:L,deepSearch:D,sReqId:x,searchOption:N,parentMessageId:J,freeTrailTool:M,quote:b,multiContent:B,clientPrompt:u,isThink:Y})}var EX=async e=>{let t=await H("webAppModelsLastUpdateTime"),r=await H("webAppModels");if(e||!r||!t||t-Date.now()>1e3*60*60*24)return Promise.all([YS(),WS()]).then(([n,o])=>{let i=o.gizmos.reduce((a,A)=>(a[A.resource.gizmo.id]=A,a),{}),s=o.gizmos.map(a=>a.resource.gizmo.id);return S.default.storage.local.get(["webAppGPTs","selectWebAppModel"]).then(a=>{let c={...a.webAppGPTs||{},...i};_w.forEach(g=>{c[g]||(c[g]=Dw[g])});let l={webAppGPTsList:s,webAppGPTs:c,webAppModels:n.models,webAppModelsLastUpdateTime:Date.now()};return a.selectWebAppModel||(n.models.some(g=>g.slug==="gpt-4")?l.selectWebAppModel="gpt-4":l.selectWebAppModel="text-davinci-002-render-sha"),S.default.storage.local.set(l)})})},Ip=null;S.default.runtime.onConnect.addListener(e=>{if(e.name==="artifacts-page"){Ip&&clearTimeout(Ip),e.onDisconnect.addListener(()=>{Ip=setTimeout(()=>{S.default.storage.local.remove("artifactsData")},500)});return}else if(e.name=="record-page"){Jl&&zl(Jl);return}if(e.name==="sidepanel"){e.onDisconnect.addListener(()=>{S.default.storage.local.set({sidebarLastCloseTime:Date.now(),webAppNetwork:null}),S.default.storage.local.remove("chatRequirements")});return}rf(e)||e.onMessage.addListener(async r=>{try{await BX(e,{system:r.system,question:r.question,type:r.type,cid:r.cid,historyMsg:r.historyMsg,chatModels:r.chatModels,model:r.model,pluginIds:r.pluginIds,autoSearch:r.autoSearch,forceSearch:r.forceSearch,filterSearchHistory:r.filterSearchHistory,from:r.from,promptKey:r.promptKey,imageId:r.imageId,eids:r.eids,forceOcr:r.forceOcr,ocrOption:r.ocrOption,forceProvider:r.forceProvider,sPromptTmpl:r.sPromptTmpl,parentMsgId:r.parentMsgId,chatgptFiles:r.chatgptFiles,actionData:r.actionData,autoTools:r.autoTools,forceTool:r.forceTool,deepSearch:r.deepSearch,sReqId:r.sReqId,searchOption:r.searchOption,parentMessageId:r.parentMessageId,freeTrailTool:r.freeTrailTool,quote:r.quote,multiContent:r.multiContent,clientPrompt:r.clientPrompt,isThink:r.isThink})}catch(n){e.postMessage({error:n.message})}})});S.default.runtime.onMessage.addListener(function(e,t){let r=Kd(e,t);if(r)return r;switch(e.type){case"FETCH_IN_BACKGROUND":return Promise.try(()=>uv(e.data));case"FEEDBACK":return Promise.try(async()=>{let n=await Ef();await VS(n,e.data)});case"OPEN_OPTIONS_PAGE":{Ud(e.section,e.hash,e.otherParams);return}case"GET_ACCESS_TOKEN":return Ef();case"SEND_CHATGPT":return Tv({prompt:e.promt});case"IS_CHAT_LOGIN":return Hw().then(n=>{t.tab?.id&&S.default.tabs.sendMessage(t.tab.id,{type:"CHAT_LOGIN_STATE",value:n}),S.default.runtime.sendMessage({type:"CHAT_LOGIN_STATE",value:n})});case"POPUP_OPEN":return sa(e.isShow);case"OPEN_URL_IN_NEW_TAB":return S.default.tabs.create(e.details);case"OPEN_URL":return S.default.tabs.create({url:e.url});case"UPDATE_TAB":return Tw(e.queryInfo,e.updateDetails);case"RELOAD_TAB":return QA(e.queryInfo,!0);case"SWITCH_TAB":return QA(e.queryInfo);case"GET_TAB_ZOOM":return S.default.tabs.getZoom();case"UPDATE_CONTEXT_MENU":return Mw(e.data?.id,e.data?.opts);case"IS_ALLOWED_FILE_SCHEME_ACCESS":return Uw();case"GET_CHATGPT_MODELS":return EX(e.isForce);case"GET_COOKIE":return Promise.try(async()=>{try{let n=await S.default.cookies.get(e.data);return n?.value?decodeURIComponent(n.value):""}catch(n){return Promise.reject(n)}});case"SET_COOKIE":return Promise.try(async()=>{try{return await S.default.cookies.set(e.data)}catch(n){return Promise.reject(n)}});case"CHECK_SCHEDULE_JOB":return CR();case"REFRESH_VIP_INFO":{bn(async()=>{if((await X.getVipInfo()).isVIP){T({lastUpgradeTime:Date.now()}),S.default.runtime.sendMessage({type:"GET_PROMOTE_DATA"});let{autoTools:o,isDoneAutoToolsAction:i}=await S.default.storage.local.get(["autoTools","isDoneAutoToolsAction"]);(o===void 0||o&&o.length===0)&&!i&&T({autoTools:kw,isDoneAutoToolsAction:!0})}else throw new Error("")},2e3);return}case"UPDATE_USERINFO":return X.getUserInfo();case"USER_LOGIN":return Promise.try(async()=>{await T(Object.keys(qI).reduce((n,o)=>{let i=e?.data[o];return i&&(n[o]=i),n},{})),await We(["__manual_logout__","__force_logout_reason__"]),await T({logged:!0})});case"USER_LOGOUT":return Promise.try(async()=>{await Es(),await xf(),QX()});case"FORWARD_TO_CHAT":{S.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(n=>{if(n)return S.default.runtime.sendMessage({...e,type:"SEND_TO_CHAT",isForSidepanel:typeof e.isForSidepanel>"u"?!0:e.isForSidepanel});S.default.tabs.sendMessage(t.tab?.id,{...e,type:"SEND_TO_CHAT"})}).catch(()=>{S.default.tabs.sendMessage(t.tab?.id,{...e,type:"SEND_TO_CHAT"})});return}case"CONTINUE_IN_CHAT":{S.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(n=>{if(n)return S.default.runtime.sendMessage({...e,type:"DO_CONTINUE_IN_CHAT",isForSidepanel:!0});S.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_CONTINUE_IN_CHAT"})}).catch(()=>{S.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_CONTINUE_IN_CHAT"})});return}case"SEND_MSG_IN_CHAT":{S.default.runtime.sendMessage({type:"is-sidepanel-open"}).then(n=>{if(n)return S.default.runtime.sendMessage({...e,type:"DO_SEND_MSG_IN_CHAT",isForSidepanel:!0});S.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_SEND_MSG_IN_CHAT"})}).catch(()=>{S.default.tabs.sendMessage(t.tab?.id,{...e,type:"DO_SEND_MSG_IN_CHAT"})});return}case"CHECK_PINNED":return Promise.try(async()=>!!(await S.default.action.getUserSettings())?.isOnToolbar);case"OPEN_CHAT_PAGE":return Lw("",()=>{S.default.runtime.sendMessage({type:"switchChat",data:{contact:e.contact||"chat",conversation:e.currentCid}})},()=>T({activeConversation:{contact:e.contact||"chat",conversation:e.currentCid}}));case"QUERY_SELECTION":return S.default.tabs.sendMessage(e.tabId||t.tab?.id,{type:"query-selection",selectionText:e.selectionText});case"TOGGLE_HOST_TRANSLATOR_FAB":return Rv(e,t);case"TOGGLE_SIDEBAR":{sa(e.isShow);return}case"GUARD_CHATGPT_TAB":{sb();return}case"TOGGLE_TRANSLATOR":S.default.tabs.sendMessage(e.tabId||t.tab?.id,{type:"toggle-translator",show:e.show});return;case"GO_LOGIN":{zn();return}case"GO_INVITE":{Bv();return}case"GET_INVITE_LINK":return X.createInviteLink();case"GET_CHATGPT_PLUGINS":return KX();case"REMOVE_SELECTION":return Promise.try(async()=>{let n=await sr();n?.id&&S.default.tabs.sendMessage(n.id,{type:"remove-selection"})});case"SEND_TO_CURRENT_TAB":return Promise.try(async()=>{let n=await sr();n?.id&&S.default.tabs.sendMessage(n.id,e.data)});case"CAPTURE_VISIBLE_TAB":return Rd(e.data);case"RUNTIME_FORWARD_MSG":return S.default.runtime.sendMessage(e.msg);case"FORWARD_MSG":return Promise.try(async()=>{let n=await sr();if(n?.id)return S.default.tabs.sendMessage(n.id,e)});case"FORWARD_TO_CONTENT":return Promise.try(async()=>{let n=await sr();if(n?.id){let o=e.subtype;return delete e.type,delete e.subtype,S.default.tabs.sendMessage(n.id,{type:o,...e})}});case"FORWARD_MSG_TO_SELF":return S.default.runtime.sendMessage({...e,type:e.originalType});case"GET_SRC_SUFFIX":return Promise.try(async()=>{let n="",o=await BR();(!o.length||e.isForce)&&await X.signImageCookie(),o=await BR();let i=o.join("&");return n=i?"?"+i:"",n});case"CLEAR_BADGE":return Promise.try(async()=>{let n=await S.default.runtime.sendMessage({type:"getRecordStatus",target:"offscreen"}).catch(o=>{});if(!n||n&&n.status=="ready")return jI()});case"GA_API":return X.googleAnalytics(...Array.from(e.args));case"SIDER_STAT_API":return af(...Array.from(e.args));case"DETECT_PAGE_LANGUAGE":return Promise.try(async()=>(await S.default.tabs.detectLanguage()).replace("-","_"));case"TRANSLATION_CACHE":return Promise.try(async()=>{let n=zI();if(e.action==="get")return await Promise.all(e.keys.map(o=>n.getData(o)));if(e.action==="set")return await Promise.all(e.values.map(o=>n.setData(o)));if(e.action==="clear")return await n.clearData()});case"DEMO_TTS_CACHE":return Promise.try(async()=>{let n=_v();if(e.action==="get")return await n.getData(e.key);if(e.action==="set")return await n.setData(e.value);if(e.action==="clear")return await n.clearData()});case"GET_PROMOTE_DATA":{vv().then(n=>{let o={type:"PROMOTE_DATA",data:n};return t.tab?.id?S.default.tabs.sendMessage(t.tab.id,o):S.default.runtime.sendMessage(o)});return}case"GET_IMAGE":return Bf(e.id).then(n=>n);case"GET_CHATGPT_UPLOAD_URL":return XS(e.data,e.isMyFile);case"REPORT_CHATGPT_FILE_UPLOADED":return ZS(e.fileId);case"GET_CHATGPT_FILE_STATUS":return nb(e.fileId);case"GET_INTERPRETER_DOWNLOAD_URL":return $S(e.data);case"GET_IS_SIDEPANEL_OPEN":return Promise.try(()=>S.default.runtime.getContexts?S.default.runtime.getContexts({contextTypes:["SIDE_PANEL"]}).then(n=>n.length>0):!1);case"OPEN_SIDEPANEL":return no(t.tab);case"CLOSE_SIDEPANEL":return Promise.try(()=>!S.default.sidePanel||!S.default.sidePanel.setOptions?!1:S.default.sidePanel.setOptions({enabled:!1}).then(()=>S.default.sidePanel.setOptions({enabled:!0})));case"KEEP_GPT_IN_SIDEBAR":return tb(e.id);case"GET_FAVICON":return Promise.try(()=>t.tab?.favIconUrl);case"GET_TABS":return S.default.tabs.query({currentWindow:!0});case"GET_CURRENT_TAB":return sr();case"GET_READABILITY_TEXT_FROM_TAB":return S.default.tabs.sendMessage(e.tabId,{type:"get-readability-text",dryRun:e.dryRun});case"ENSURE_CONTENT":return Cs(e.tabId);case"GET_SIDEPANEL_OPEN":return Promise.try(()=>S.default.runtime.getContexts?.({contextTypes:["SIDE_PANEL"]}).then(n=>n.length>0));case"OPEN_ARTIFACT_PAGE":return Promise.try(()=>S.default.runtime.getContexts?.({documentUrls:[ct("artifacts.html")]}).then(n=>{n.length===0?At({url:"/artifacts.html"}):S.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?S.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{S.default.tabs.update(n[0].tabId,{active:!0})}):S.default.tabs.update(n[0].tabId,{active:!0})})}));case"OPEN_ANSWER_COMPARE_PAGE":return Promise.try(()=>S.default.runtime.getContexts?.({documentUrls:[ct("answer-compare.html")]}).then(n=>{n.length===0?At({url:"/answer-compare.html"}):S.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?S.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{S.default.tabs.update(n[0].tabId,{active:!0})}):S.default.tabs.update(n[0].tabId,{active:!0})})}));case"OPEN_BLOCK_PREVIEW_PAGE":return Promise.try(()=>S.default.runtime.getContexts?.({documentUrls:[ct("block-preview.html")]}).then(n=>{n.length===0?At({url:"/block-preview.html"}):S.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?S.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{S.default.tabs.update(n[0].tabId,{active:!0})}):S.default.tabs.update(n[0].tabId,{active:!0})})}));case"OPEN_DEEP_RESEARCH_PAGE":return Promise.try(()=>S.default.runtime.getContexts?.({documentUrls:[ct("deep-research.html")]}).then(n=>{n.length===0?At({url:"/deep-research.html"}):S.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?S.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{S.default.tabs.update(n[0].tabId,{active:!0})}):S.default.tabs.update(n[0].tabId,{active:!0})})}));case"OPEN_AUDIO_PREVIEW_PAGE":return Promise.try(()=>S.default.runtime.getContexts?.({documentUrls:[ct("audio-preview.html")]}).then(n=>{n.length===0?At({url:"/audio-preview.html"}):S.default.windows.getCurrent().then(o=>{n[0].windowId!==o.id?S.default.tabs.move(n[0].tabId,{windowId:o.id,index:-1}).then(()=>{S.default.tabs.update(n[0].tabId,{active:!0})}):S.default.tabs.update(n[0].tabId,{active:!0})})}));case"CLEAR_ARTIFACTS_DATA":return S.default.storage.local.remove("artifactsData");case"UPLOAD_ROAST":{let{obj:n,siteType:o}=e,i=`https://roast-vs-boast.${le.domain}/api/combined_agent_direct`;return o==="facebook"?i=`https://roast-vs-boast.${le.domain}/api/facebook/roast`:o==="instagram"&&(i=`https://roast-vs-boast.${le.domain}/api/instagram_agent_direct`),fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e.obj})}).then(s=>s.json())}case"START_RECORDING":return zl(e.payload);case"UPDATE_RECORD_STATUS":return PX(e.data);case"OPEN_CAMERA_PAGE":return MX(e.payload,e.screen);case"GET_API_INFO":return NX();case"UPDATE_UNFINISHED_STATUS":return TX(e.status);case"SAVE_RECORD_LIST":return kX(e.list);case"cameraUnavailable":return vX(e.data);case"UPDATE_NETWORK_STATUS":return DX(e.status);case"micUnavailable":return FX(e.data);case"RECORD_ALERT":return _X(e.data);case"record/emptyDevice":return bX(e.data);case"UPDATE_DEVICES":return xX(e.data);case"REPORT_DATA":return ER(e.data.type,e.data.data);case"SHOULD_SHOW_CONTENT_TOOLBAR":return SX(t.tab?.id);case"GET_RECORD_COMMAND":return wX();case"OPEN_SHORTCUT_PAGE":return yX();case"GET_STORAGE_LOCAL":return S.default.storage.local.get(e.data);case"SET_STORAGE_LOCAL":return S.default.storage.local.set(e.data);case"REMOVE_STORAGE_LOCAL":return S.default.storage.local.remove(e.data);case"START_RECORD_CONTENT":return HX()}});function ER(e,t){Ai.report(e,t)}function yX(){At({url:"chrome://extensions/shortcuts"})}async function QX(){(await S.default.storage.local.get("recordStatus")).recordStatus.status!=="ready"&&S.default.runtime.sendMessage({type:"record/stop",target:"offscreen"})}async function wX(){return(await chrome.commands.getAll()).find(r=>r.name==="Record-Tab")?.shortcut||""}async function SX(e){let t=await S.default.storage.local.get("recordStatus");return e!==void 0&&(e==t.recordStatus.recordedTabId||t.recordStatus.recordType=="desktop"||t.recordStatus.recordType=="tab")}function bX(e){e=="audioinput"?At({url:ct("/microphone-permissions.html")}):e=="videoinput"&&At({url:ct("/camera-permissions.html")})}function xX(e){e.cameras&&S.default.storage.local.set({cameraDevices:e.cameras}),e.microphones&&S.default.storage.local.set({microphoneDevices:e.microphones})}function _X(e){if(e.type=="timeLimit"){let t=e.number||2;S.default.windows.create({type:"popup",url:ct(`/alert-window.html?type=${e.type}&number=${t}`),width:340,height:260,top:300,left:300})}else if(e.type=="storageLimit"){let t=e.number||2;S.default.windows.create({type:"popup",url:ct(`/alert-window.html?type=${e.type}&number=${t}`),width:340,height:348,top:300,left:300})}}function DX(e){S.default.storage.local.set({networkStatus:e})}function kX(e){S.default.storage.local.set({record_list:e})}function FX(e){S.default.storage.local.set({micUnavailable:e}),e.name==="NotAllowedError"&&(e.message==="Permission denied"||e.message==="Permission dismissed")&&At({url:ct("/microphone-permissions.html")})}function vX(e){S.default.storage.local.set({cameraUnavailable:e}),e.name==="NotAllowedError"&&(e.message==="Permission denied"||e.message==="Permission dismissed")&&At({url:ct("/camera-permissions.html")})}async function RX(){await S.default.storage.local.get("offScreenStatus")&&QR()}function TX(e){S.default.storage.local.set({offScreenStatus:e})}async function NX(){let e=await zr(),t=(await jr()).token,r=await LI(),n=Ie,i=(await S.default.storage.local.get("language")).language||"en-US";return{serverAPI:e,token:t,userId:r.id,meta_query:n,language:i,app_version:$,app_name:K}}async function MX(e,t){(await S.default.storage.local.get("recordStatus")).recordStatus.status=="waitingAuthorized"&&S.default.runtime.sendMessage({type:"record/discard",target:"offscreen"}),S.default.storage.local.set({cameraRecordSetting:e}).then(()=>{UX(t)})}async function UX(e){let t=await cv("/camera-record.html");return t&&typeof t.id=="number"?(chrome.windows.update(t.id,{focused:!0,state:"normal"}),t):new Promise(r=>{S.default.windows.create({focused:!0,width:800,left:(e.width-800)/2,top:(e.height-500)/2,type:"popup",url:"/camera-record.html",height:558}).then(n=>{r()})})}function PX(e){S.default.storage.local.set({recordStatus:e}),e.status=="countDown"||e.status=="recording"||e.status=="paused"?(e.status=="countDown"?S.default.action.setBadgeText({text:e.showText}):GX(e.showText),chrome.action.setBadgeBackgroundColor({color:"#E55649"}),chrome.action.setBadgeTextColor&&chrome.action.setBadgeTextColor({color:"#fff"})):Mv().then(t=>{t!="NEW"&&S.default.action.setBadgeText({text:""})})}async function OX(){let e=await S.default.storage.local.get("recordStatus"),t=await S.default.runtime.sendMessage({type:"getRecordStatus",target:"offscreen"}).catch(r=>{});if(e&&e.recordStatus&&(!t||t&&t.status=="ready")){let r=e.recordStatus;r.status="ready",r.recordedTabId=-1,S.default.storage.local.set({recordStatus:r})}}function GX(e){if(e){let t=e.split(":");t.length===3?S.default.action.setBadgeText({text:t[0]+":"+t[1]}):(t[0].startsWith("0")&&t[0].length>1&&(e=t[0].substring(1)+":"+t[1]),S.default.action.setBadgeText({text:e}))}}var Jl;async function zl(e){let t=await QR();S.default.storage.local.set({cameraUnavailable:""});let r=await H("recordStatus");if(t&&e&&(!r?.status||r?.status=="ready")){Jl=void 0,await bt(100);let n=await zr(),o=(await jr()).token,i=(await LI()).id,a=(await S.default.storage.local.get("language")).language||"en-US",A=K,c=$,l=Ie;S.default.runtime.sendMessage({type:"START_RECORDING/BG",payload:e,serverAPI:n,meta_query:l,app_name:A,app_version:c,language:a,token:o,userId:i,target:"offscreen"})}else r?.status=="waitingAuthorized"&&(Jl=e,S.default.runtime.sendMessage({type:"reloadRecorder",target:"offscreen"}))}async function qX(){try{return!!await chrome.permissions.request({permissions:["tabCapture"]})}catch{return!1}}async function HX(){yR();let t=(await S.default.storage.local.get("recordSettings")).recordSettings||{},r=await H("pendingRecordItem");r&&(r.status=="failed"||r.status=="uploading")||S.default.tabs.query({active:!0,currentWindow:!0}).then(n=>{if(n.length>0){let o=n[0],i={recordType:"desktop",recordingTabTitle:o.title,recordingTabUrl:o.url,screenWidth:o.width,screenHeight:o.height,countdown:t.countDown==null?3:t.countDown,resolution:t.resolution??"720p",showCtlBar:t.ctrlBar==null?!0:t.ctrlBar,recordTabSound:!0,streamId:"",recordedTabId:-1,microphoneIsEnabled:!0};zl(i)}})}function yR(){T({lastTab:"record"}),chrome.tabs.query({active:!0,currentWindow:!0},e=>{e.length>0&&no(e[0])})}function LX(){yR(),qX().then(async e=>{if(e){let t=await S.default.storage.local.get("recordSettings"),r=await H("pendingRecordItem");if(r&&(r.status=="failed"||r.status=="uploading"))return;let n=t.recordSettings||{};S.default.tabs.query({active:!0,currentWindow:!0}).then(o=>{if(o.length>0){let i=o[0],s={recordType:"tab",recordingTabTitle:i.title,recordingTabId:i.id,screenWidth:i.width,screenHeight:i.height,countdown:n.countDown==null?3:n.countDown,resolution:n.resolution??"720p",showCtlBar:n.ctrlBar==null?!0:n.ctrlBar,recordTabSound:!0,streamId:"",recordedTabId:-1,microphoneIsEnabled:!0};chrome.tabCapture.getMediaStreamId({targetTabId:i.id},a=>{chrome.runtime.lastError,a&&i.id!=null?(s.streamId=a,s.recordedTabId=i.id):s.recordType="desktop",zl(s),ER("press_record_note_shortcut_key",{record_screen:a?"off":"on",mic_status:"on",control_bar_status:s.showCtlBar?"on":"off",countdown:s.countdown,resolution:s.resolution})})}})}else alert("Need tabCapture permission to record tabs")})}async function QR(){return await PI(_o)||await Ti(_o),!0}S.default.commands.onCommand.addListener(e=>{e==="Record-Tab"&&LX()});async function BR(){return(await S.default.cookies.getAll({domain:le.domain})).filter(t=>t.name.startsWith("CloudFront-")&&t.domain==="."+le.domain).map(t=>t.name.split("CloudFront-")[1]+"="+t.value)}chrome&&chrome.sidePanel&&chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(e=>{});S.default.runtime.onInstalled.addListener(async e=>{if(e.reason==="install"&&(S.default.storage.local.set({installedAt:Date.now(),installedFirstVersion:S.default.runtime.getManifest().version,__autoShowSwitchbar__:!0,taskCenterNewUser:!0}),await pR(),setTimeout(async()=>{S.default.tabs.create({url:le.origin+"/setup"})},200)),(e.reason==="install"||e.reason==="update")&&(ia(),H("provider:siderApi").then(t=>{t&&(t.model==="gpt-4"&&S.default.storage.local.set({"provider:siderApi":{model:"gpt-4o"}}),t.model==="gemini-pro"&&S.default.storage.local.set({"provider:siderApi":{model:"gemini-1.5-flash"}}),(t.model==="claude-3-sonnet"||t.model==="claude-3-opus")&&S.default.storage.local.set({"provider:siderApi":{model:"claude-3.5-sonnet"}}))}),S.default.storage.local.get(["autoTools","forceOpenArtifacts"]).then(t=>{if(!t.forceOpenArtifacts&&(!t.autoTools||!t.autoTools.includes("artifacts"))){let r=t.autoTools||[];S.default.storage.local.set({autoTools:["artifacts",...r],forceOpenArtifacts:!0})}}),S.default.storage.local.get(["toolsShowNew","isSetThinkingModeShowNew","isSetImageShowNew","isSetImageShowNew2","isSetCustomInstructionShowNew"]).then(t=>{(!t.toolsShowNew||!t.toolsShowNew.includes("thinking_mode"))&&(t.isSetThinkingModeShowNew||S.default.storage.local.set({toolsShowNew:["thinking_mode",...t.toolsShowNew||[]],isSetThinkingModeShowNew:!0})),(!t.toolsShowNew||!t.toolsShowNew.includes("create_image"))&&(t.isSetImageShowNew2||S.default.storage.local.set({toolsShowNew:["create_image",...t.toolsShowNew||[]],isSetImageShowNew2:!0}))}),H("quickAction:provider:siderApi").then(t=>{t&&((t.model==="claude-3-sonnet"||t.model==="claude-3-opus")&&S.default.storage.local.set({"quickAction:provider:siderApi":{model:"claude-3.5-sonnet"}}),t.model==="gpt-3.5"&&S.default.storage.local.set({"quickAction:provider:siderApi":{model:"sider"}}),t.model==="gpt-4"&&S.default.storage.local.set({"quickAction:provider:siderApi":{model:"gpt-4o"}}))}),H(["finishSwitchSider","provider:siderApi"]).then(t=>{!t.finishSwitchSider&&t["provider:siderApi"]?.model==="gpt-3.5"?S.default.storage.local.set({"provider:siderApi":{model:"sider"},finishSwitchSider:!0}):S.default.storage.local.set({finishSwitchSider:!0})}),H("siderGrammarKey").then(t=>{t?.model==="gpt-4"&&S.default.storage.local.set({siderGrammarKey:{model:"gpt-4o"}})}),S.default.tabs.query({active:!0,currentWindow:!0}).then(t=>{let r=t[0];!r||r.id===void 0||!r.url||r.url.startsWith("chrome://")||Cs(r.id)})),e.reason==="update"){let t=wv[0];S.default.storage.local.get({shownChangelogVersion:"",installedFirstVersion:"1.0.0"}).then(({shownChangelogVersion:n,installedFirstVersion:o})=>{n!==t.version&&Ld(o)!==Ld(t.version)&&(Nv(),up(_d))}),S.default.runtime.getManifest().version=="5.15.1"&&up(_d),H("webAccessEnabled").then(n=>{n&&(S.default.storage.local.set({autoTools:["search"]}),S.default.storage.local.remove("webAccessEnabled"))}),S.default.storage.local.remove(["webAppNetwork","chatRequirements"]),We(["__GET_TMP_GPT5_INFO_AT__","__InviteQueryArrivalQueryAt__","__INVITE_QUERY_ARRIVAL_AT__","__LAST_REFRESH_DISPLAY_DATA__","__REFRESH_DISPLAY_DATA_AT__","__LOAD_TTS_INIT_DATA_AT__","__SCHEDULE_GET_CONFIG_RUN_AT__","__SCHEDULE_GET_PRICING_RUN_AT__","__SCHEDULE_GET_PROMPTS_RUN_AT__","__SCHEDULE_PULL_SETTINGS_RUN_AT__","__SCHEDULE_RUN_AT__","__SCHEDULE_VIPINFO_RUN_AT__","sidebarPromptTemplate","selectedSearchTemplate","promptTemplates","ratingTipShowTimes","__can_enjoy_trial__","lastTranslateWidgetLang","__FlagAutoPinTTSReading__","__FlagAutoPinTTSWriting__","__FlagQuickActionCloseTips__","__ShowQuickActionDispalyModifierTips__","__halloween_stopat_241016__"]);let r=e.previousVersion;r&&(Jr(r,"<","4.29.0")&&H("sidebarShortcut").then(n=>{(!n||n.useDefault)&&Vt("sidebarShortcut",{key:"p",keyCode:80,metaKey:!0,ctrlKey:!0,altKey:!1,shiftKey:!1,disabled:!1})}),Jr(r,"<","4.31.0")&&H({quickActionPinnedReading:[],quickActionPinnedWriting:[]}).then(({quickActionPinnedReading:n,quickActionPinnedWriting:o})=>{let i=n,s=o;i?.length>0?i=["copy",...i]:i=["copy","tts","explain_this"],s?.length>0?s=["copy",...s]:s=["copy","improve_writing","fix_spelling_grammar","change_tone"],T({quickActionPinnedReading:i,quickActionPinnedWriting:s})}),Jr(r,"<","4.36.0")&&H({quickActionPinnedReading:[]}).then(({quickActionPinnedReading:n})=>{let o=n;o?.length>0?o=[...o,"highlight"]:o=["copy","highlight","explain_this"],T({quickActionPinnedReading:o})}),Jr(r,"<","4.37.0")&&zI().clearData(),Jr(r,"<","4.42.0")&&H({"provider:gpt3":null,enableCustomModelName:null,customModelName:null,apiKeyCustomSettings:null,"quickAction:provider:gpt3":null,"inputTranslation:provider:gpt3":null}).then(({"provider:gpt3":n,enableCustomModelName:o,customModelName:i,apiKeyCustomSettings:s,"quickAction:provider:gpt3":a,"inputTranslation:provider:gpt3":A})=>{if(!n)return;let c=s?.openai||{};if(n.apiKey&&(c.apiKey=n.apiKey),n.enableCustomURL&&n.customURL?.trim()){let d=n.customURL.trim();d.endsWith("/")&&(d=d.slice(0,-1)),d.endsWith("/chat/completions")?d=d.slice(0,-17):d=d+"/v1",c.apiBaseUrl=d}let l=new Map;function g(d){if(l.has(d))return l.get(d);{let f=cb("openai",d);return c.models=[f,...c.models||[]],l.set(d,f),f}}if(o&&i?.trim()){let d=g(i);n.model=d.name,n.modelObj=d}else if(n.model){let d=g(n.model);n.model=d.name,n.modelObj=d}if(a?.model?.trim()){let d=g(a.model);a.model=d.name,a.modelObj=d}if(A?.model?.trim()){let d=g(A.model);A.model=d.name,A.modelObj=d}Vt({apiKeyCustomSettings:{...s,openai:c},"provider:gpt3":n,...Object.fromEntries([["quickAction:provider:gpt3",a],["inputTranslation:provider:gpt3",A]].filter(Boolean))})}),Jr(r,"<","4.45.0")&&S.default.storage.local.remove("chatTempData"),Jr(r,"<","5.1.0")&&H("autoTools").then(n=>{if(n&&n.includes("thinking_mode")){let o=n.filter(i=>i!=="thinking_mode");T({autoTools:o})}}),Jr(r,"<","5.21.0")&&H("provider:siderApi").then(n=>{n&&(n.model==="claude-3.7-sonnet"||n.model==="claude-4-sonnet"||n.model==="claude-4.5-sonnet"||n.model==="claude-4-sonnet-think"||n.model==="claude-3.7-sonnet-think")&&T({"provider:siderApi":{model:"gpt-5"}})}),H("provider:siderApi").then(n=>{n&&n.model.includes("-think")&&T({"provider:siderApi":{model:"gpt-5"}})}),H("autoTools").then(n=>{n&&n.includes("text_to_image")&&T({autoTools:n.map(o=>o==="text_to_image"?"create_image":o)})})),kv()}S.default.alarms.create("refresh-image-cookie",{periodInMinutes:7200})});S.default.alarms.onAlarm.addListener(e=>{e.name==="refresh-image-cookie"&&X.signImageCookie()});S.default.tabs.onActivated.addListener(e=>{let t=e.tabId;Cs(t),bv(t)});S.default.tabs.onUpdated.addListener((e,t,r)=>{S.default.tabs.sendMessage(e,{type:"current-tab-on-updated",data:{tabId:e,changeInfo:t,tab:r}})});nR();S.default.runtime.onMessageExternal.addListener((e,t,r)=>{if(Ew.includes(t.id||""))switch(e.type){case"SIDER_OCR":r(!0),e.data?.img&&cp(e.data.img);break;default:r(!0),sa();break}});S.default.action.onClicked.addListener(async e=>{e.status==="loading"?S.default.runtime.onMessage.addListener(function t(r,n){n.tab&&n.tab.id===e.id&&r.type==="sidebar-ready"&&(S.default.runtime.onMessage.removeListener(t),sa())}):sa(),jI()});async function sa(e){let t=await S.default.tabs.query({active:!0,currentWindow:!0});try{return await S.default.tabs.sendMessage(t[0].id,{type:"toggle-sidebar",isShow:e}),{action:"close"}}catch{return ei(),!1}}var KX=Ut(async function(){let r=(await eb()).items;if(Array.isArray(r)){let n=r.map(o=>({id:o.id,logo:o.manifest.logo_url,name:o.manifest.name_for_human,description:o.manifest.description_for_human}));return S.default.storage.local.set({chatgptPlugins:n})}},1e3);S.default.runtime.setUninstallURL("https://sider.ai/uninstall?app_version="+S.default.runtime.getManifest().version);S.default.storage.local.onChanged.addListener(e=>{e.language&&e.language.newValue&&(fb(e.language.newValue,!0),ub(e.language.newValue,!0))});})();
