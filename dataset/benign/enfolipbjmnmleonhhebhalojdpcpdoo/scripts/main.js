(function(){var e=window.Document.prototype.createElement,t=window.Document.prototype.createElementNS,n=window.Document.prototype.importNode,i=window.Document.prototype.prepend,a=window.Document.prototype.append,s=window.DocumentFragment.prototype.prepend,r=window.DocumentFragment.prototype.append,o=window.Node.prototype.cloneNode,l=window.Node.prototype.appendChild,d=window.Node.prototype.insertBefore,c=window.Node.prototype.removeChild,h=window.Node.prototype.replaceChild,u=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),p=window.Element.prototype.attachShadow,g=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),m=window.Element.prototype.getAttribute,v=window.Element.prototype.setAttribute,f=window.Element.prototype.removeAttribute,E=window.Element.prototype.toggleAttribute,y=window.Element.prototype.getAttributeNS,_=window.Element.prototype.setAttributeNS,S=window.Element.prototype.removeAttributeNS,w=window.Element.prototype.insertAdjacentElement,b=window.Element.prototype.insertAdjacentHTML,C=window.Element.prototype.prepend,A=window.Element.prototype.append,F=window.Element.prototype.before,M=window.Element.prototype.after,x=window.Element.prototype.replaceWith,T=window.Element.prototype.remove,k=window.HTMLElement,G=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),N=window.HTMLElement.prototype.insertAdjacentElement,L=window.HTMLElement.prototype.insertAdjacentHTML,O=new Set;function $(e){var t=O.has(e);return e=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(e),!t&&e}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(e){return O.add(e)});var P=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function R(e){var t=e.isConnected;if(void 0!==t)return t;if(P(e))return!0;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return!(!e||!(e.__CE_isImportDocument||e instanceof Document))}function D(e){var t=e.children;if(t)return Array.prototype.slice.call(t);for(t=[],e=e.firstChild;e;e=e.nextSibling)e.nodeType===Node.ELEMENT_NODE&&t.push(e);return t}function U(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function I(e,t,n){for(var i=e;i;){if(i.nodeType===Node.ELEMENT_NODE){var a=i;t(a);var s=a.localName;if("link"===s&&"import"===a.getAttribute("rel")){if(i=a.import,void 0===n&&(n=new Set),i instanceof Node&&!n.has(i))for(n.add(i),i=i.firstChild;i;i=i.nextSibling)I(i,t,n);i=U(e,a);continue}if("template"===s){i=U(e,a);continue}if(a=a.__CE_shadowRoot)for(a=a.firstChild;a;a=a.nextSibling)I(a,t,n)}i=i.firstChild?i.firstChild:U(e,i)}}function B(){var e=!(null==le||!le.noDocumentConstructionObserver),t=!(null==le||!le.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=t,this.I=!e}function H(e,t,n,i){var a=window.ShadyDOM;if(e.shadyDomFastWalk&&a&&a.inUse){if(t.nodeType===Node.ELEMENT_NODE&&n(t),t.querySelectorAll)for(e=a.nativeMethods.querySelectorAll.call(t,"*"),t=0;t<e.length;t++)n(e[t])}else I(t,n,i)}function j(e,t){e.j&&H(e,t,function(t){return V(e,t)})}function V(e,t){if(e.j&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.m.length;n++)e.m[n](t);for(n=0;n<e.g.length;n++)e.g[n](t)}}function z(e,t){var n=[];for(H(e,t,function(e){return n.push(e)}),t=0;t<n.length;t++){var i=n[t];1===i.__CE_state?e.connectedCallback(i):J(e,i)}}function W(e,t){var n=[];for(H(e,t,function(e){return n.push(e)}),t=0;t<n.length;t++){var i=n[t];1===i.__CE_state&&e.disconnectedCallback(i)}}function q(e,t,n){var i=(n=void 0===n?{}:n).J,a=n.upgrade||function(t){return J(e,t)},s=[];for(H(e,t,function(t){if(e.j&&V(e,t),"link"===t.localName&&"import"===t.getAttribute("rel")){var n=t.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_registry=document.__CE_registry),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:t.addEventListener("load",function(){var n=t.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var s=new Set;i&&(i.forEach(function(e){return s.add(e)}),s.delete(n)),q(e,n,{J:s,upgrade:a})}})}else s.push(t)},i),t=0;t<s.length;t++)a(s[t])}function J(e,t){try{var n=t.ownerDocument,i=n.__CE_registry,a=i&&(n.defaultView||n.__CE_isImportDocument)?ae(i,t.localName):void 0;if(a&&void 0===t.__CE_state){a.constructionStack.push(t);try{try{if(new a.constructorFunction!==t)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{a.constructionStack.pop()}}catch(e){throw t.__CE_state=2,e}if(t.__CE_state=1,t.__CE_definition=a,a.attributeChangedCallback&&t.hasAttributes()){var s=a.observedAttributes;for(a=0;a<s.length;a++){var r=s[a],o=t.getAttribute(r);null!==o&&e.attributeChangedCallback(t,r,null,o,null)}}R(t)&&e.connectedCallback(t)}}catch(e){K(e)}}function X(n,i,a,s){var r=i.__CE_registry;if(r&&(null===s||"http://www.w3.org/1999/xhtml"===s)&&(r=ae(r,a)))try{var o=new r.constructorFunction;if(void 0===o.__CE_state||void 0===o.__CE_definition)throw Error("Failed to construct '"+a+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==o.namespaceURI)throw Error("Failed to construct '"+a+"': The constructed element's namespace must be the HTML namespace.");if(o.hasAttributes())throw Error("Failed to construct '"+a+"': The constructed element must not have any attributes.");if(null!==o.firstChild)throw Error("Failed to construct '"+a+"': The constructed element must not have any children.");if(null!==o.parentNode)throw Error("Failed to construct '"+a+"': The constructed element must not have a parent node.");if(o.ownerDocument!==i)throw Error("Failed to construct '"+a+"': The constructed element's owner document is incorrect.");if(o.localName!==a)throw Error("Failed to construct '"+a+"': The constructed element's local name is incorrect.");return o}catch(r){return K(r),i=null===s?e.call(i,a):t.call(i,s,a),Object.setPrototypeOf(i,HTMLUnknownElement.prototype),i.__CE_state=2,i.__CE_definition=void 0,V(n,i),i}return V(n,i=null===s?e.call(i,a):t.call(i,s,a)),i}function K(e){var t="",n="",i=0,a=0;e instanceof Error?(t=e.message,n=e.sourceURL||e.fileName||"",i=e.line||e.lineNumber||0,a=e.column||e.columnNumber||0):t="Uncaught "+String(e);var s=void 0;void 0===ErrorEvent.prototype.initErrorEvent?s=new ErrorEvent("error",{cancelable:!0,message:t,filename:n,lineno:i,colno:a,error:e}):((s=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,t,n,i),s.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===s.error&&Object.defineProperty(s,"error",{configurable:!0,enumerable:!0,get:function(){return e}}),window.dispatchEvent(s),s.defaultPrevented||console.error(e)}function Z(){var e=this;this.g=void 0,this.F=new Promise(function(t){e.l=t})}function Y(e){var t=document;this.l=void 0,this.h=e,this.g=t,q(this.h,this.g),"loading"===this.g.readyState&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function Q(e){e.l&&e.l.disconnect()}function ee(e){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(e){return e()},this.i=!1,this.v=[],this.h=e,this.D=e.I?new Y(e):void 0}function te(e,t){if(!$(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(ae(e,t))throw Error("A custom element with name '"+t+"' has already been defined.");if(e.A)throw Error("A custom element is already being defined.")}function ne(e,t,n){var i;e.A=!0;try{var a=n.prototype;if(!(a instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var s=function(e){var t=a[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},r=s("connectedCallback"),o=s("disconnectedCallback"),l=s("adoptedCallback"),d=(i=s("attributeChangedCallback"))&&n.observedAttributes||[]}catch(e){throw e}finally{e.A=!1}return n={localName:t,constructorFunction:n,connectedCallback:r,disconnectedCallback:o,adoptedCallback:l,attributeChangedCallback:i,observedAttributes:d,constructionStack:[]},e.u.set(t,n),e.C.set(n.constructorFunction,n),n}function ie(e){if(!1!==e.i){e.i=!1;for(var t=[],n=e.v,i=new Map,a=0;a<n.length;a++)i.set(n[a],[]);for(q(e.h,document,{upgrade:function(n){if(void 0===n.__CE_state){var a=n.localName,s=i.get(a);s?s.push(n):e.u.has(a)&&t.push(n)}}}),a=0;a<t.length;a++)J(e.h,t[a]);for(a=0;a<n.length;a++){for(var s=n[a],r=i.get(s),o=0;o<r.length;o++)J(e.h,r[o]);(s=e.B.get(s))&&s.resolve(void 0)}n.length=0}}function ae(e,t){var n=e.u.get(t);if(n)return n;if(n=e.s.get(t)){e.s.delete(t);try{return ne(e,t,n())}catch(e){K(e)}}}function se(e,t,n){function i(t){return function(n){for(var i=[],a=0;a<arguments.length;++a)i[a]=arguments[a];a=[];for(var s=[],r=0;r<i.length;r++){var o=i[r];if(o instanceof Element&&R(o)&&s.push(o),o instanceof DocumentFragment)for(o=o.firstChild;o;o=o.nextSibling)a.push(o);else a.push(o)}for(t.apply(this,i),i=0;i<s.length;i++)W(e,s[i]);if(R(this))for(i=0;i<a.length;i++)(s=a[i])instanceof Element&&z(e,s)}}void 0!==n.prepend&&(t.prepend=i(n.prepend)),void 0!==n.append&&(t.append=i(n.append))}function re(e){function n(t,n){Object.defineProperty(t,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){var i=this,a=void 0;if(R(this)&&(a=[],H(e,this,function(e){e!==i&&a.push(e)})),n.set.call(this,t),a)for(var s=0;s<a.length;s++){var r=a[s];1===r.__CE_state&&e.disconnectedCallback(r)}return this.ownerDocument.__CE_registry?q(e,this):j(e,this),t}})}function i(t,n){t.insertAdjacentElement=function(t,i){var a=R(i);return t=n.call(this,t,i),a&&W(e,i),R(t)&&z(e,i),t}}function a(t,n){function i(t,n){for(var i=[];t!==n;t=t.nextSibling)i.push(t);for(n=0;n<i.length;n++)q(e,i[n])}t.insertAdjacentHTML=function(e,t){if("beforebegin"===(e=e.toLowerCase())){var a=this.previousSibling;n.call(this,e,t),i(a||this.parentNode.firstChild,this)}else if("afterbegin"===e)a=this.firstChild,n.call(this,e,t),i(this.firstChild,a);else if("beforeend"===e)a=this.lastChild,n.call(this,e,t),i(a||this.firstChild,null);else{if("afterend"!==e)throw new SyntaxError("The value provided ("+String(e)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");a=this.nextSibling,n.call(this,e,t),i(this.nextSibling,a)}}}p&&(Element.prototype.attachShadow=function(t){if(t=p.call(this,t),e.j&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.m.length;n++)e.m[n](t)}return this.__CE_shadowRoot=t}),g&&g.get?n(Element.prototype,g):G&&G.get?n(HTMLElement.prototype,G):function(e,t){e.j=!0,e.g.push(t)}(e,function(e){n(e,{enumerable:!0,configurable:!0,get:function(){return o.call(this,!0).innerHTML},set:function(e){var n="template"===this.localName,i=n?this.content:this,a=t.call(document,this.namespaceURI,this.localName);for(a.innerHTML=e;0<i.childNodes.length;)c.call(i,i.childNodes[0]);for(e=n?a.content:a;0<e.childNodes.length;)l.call(i,e.childNodes[0])}})}),Element.prototype.setAttribute=function(t,n){if(1!==this.__CE_state)return v.call(this,t,n);var i=m.call(this,t);v.call(this,t,n),n=m.call(this,t),e.attributeChangedCallback(this,t,i,n,null)},Element.prototype.setAttributeNS=function(t,n,i){if(1!==this.__CE_state)return _.call(this,t,n,i);var a=y.call(this,t,n);_.call(this,t,n,i),i=y.call(this,t,n),e.attributeChangedCallback(this,n,a,i,t)},Element.prototype.removeAttribute=function(t){if(1!==this.__CE_state)return f.call(this,t);var n=m.call(this,t);f.call(this,t),null!==n&&e.attributeChangedCallback(this,t,n,null,null)},E&&(Element.prototype.toggleAttribute=function(t,n){if(1!==this.__CE_state)return E.call(this,t,n);var i=m.call(this,t);return null!==i!==(n=E.call(this,t,n))&&e.attributeChangedCallback(this,t,i,n?"":null,null),n}),Element.prototype.removeAttributeNS=function(t,n){if(1!==this.__CE_state)return S.call(this,t,n);var i=y.call(this,t,n);S.call(this,t,n);var a=y.call(this,t,n);i!==a&&e.attributeChangedCallback(this,n,i,a,t)},N?i(HTMLElement.prototype,N):w&&i(Element.prototype,w),L?a(HTMLElement.prototype,L):b&&a(Element.prototype,b),se(e,Element.prototype,{prepend:C,append:A}),function(e){function t(t){return function(n){for(var i=[],a=0;a<arguments.length;++a)i[a]=arguments[a];a=[];for(var s=[],r=0;r<i.length;r++){var o=i[r];if(o instanceof Element&&R(o)&&s.push(o),o instanceof DocumentFragment)for(o=o.firstChild;o;o=o.nextSibling)a.push(o);else a.push(o)}for(t.apply(this,i),i=0;i<s.length;i++)W(e,s[i]);if(R(this))for(i=0;i<a.length;i++)(s=a[i])instanceof Element&&z(e,s)}}var n=Element.prototype;void 0!==F&&(n.before=t(F)),void 0!==M&&(n.after=t(M)),void 0!==x&&(n.replaceWith=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];i=[];for(var a=[],s=0;s<n.length;s++){var r=n[s];if(r instanceof Element&&R(r)&&a.push(r),r instanceof DocumentFragment)for(r=r.firstChild;r;r=r.nextSibling)i.push(r);else i.push(r)}for(s=R(this),x.apply(this,n),n=0;n<a.length;n++)W(e,a[n]);if(s)for(W(e,this),n=0;n<i.length;n++)(a=i[n])instanceof Element&&z(e,a)}),void 0!==T&&(n.remove=function(){var t=R(this);T.call(this),t&&W(e,this)})}(e)}B.prototype.connectedCallback=function(e){var t=e.__CE_definition;if(t.connectedCallback)try{t.connectedCallback.call(e)}catch(e){K(e)}},B.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;if(t.disconnectedCallback)try{t.disconnectedCallback.call(e)}catch(e){K(e)}},B.prototype.attributeChangedCallback=function(e,t,n,i,a){var s=e.__CE_definition;if(s.attributeChangedCallback&&-1<s.observedAttributes.indexOf(t))try{s.attributeChangedCallback.call(e,t,n,i,a)}catch(e){K(e)}},Z.prototype.resolve=function(e){if(this.g)throw Error("Already resolved.");this.g=e,this.l(e)},Y.prototype.G=function(e){var t=this.g.readyState;for("interactive"!==t&&"complete"!==t||Q(this),t=0;t<e.length;t++)for(var n=e[t].addedNodes,i=0;i<n.length;i++)q(this.h,n[i])},ee.prototype.H=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");te(this,e),this.s.set(e,t),this.v.push(e),this.i||(this.i=!0,this.o(function(){return ie(n)}))},ee.prototype.define=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");te(this,e),ne(this,e,t),this.v.push(e),this.i||(this.i=!0,this.o(function(){return ie(n)}))},ee.prototype.upgrade=function(e){q(this.h,e)},ee.prototype.get=function(e){if(e=ae(this,e))return e.constructorFunction},ee.prototype.whenDefined=function(e){if(!$(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.B.get(e);if(t)return t.F;t=new Z,this.B.set(e,t);var n=this.u.has(e)||this.s.has(e);return e=-1===this.v.indexOf(e),n&&e&&t.resolve(void 0),t.F},ee.prototype.polyfillWrapFlushCallback=function(e){this.D&&Q(this.D);var t=this.o;this.o=function(n){return e(function(){return t(n)})}},ee.prototype.define=ee.prototype.define,ee.prototype.upgrade=ee.prototype.upgrade,ee.prototype.get=ee.prototype.get,ee.prototype.whenDefined=ee.prototype.whenDefined,ee.prototype.polyfillDefineLazy=ee.prototype.H,ee.prototype.polyfillWrapFlushCallback=ee.prototype.polyfillWrapFlushCallback;var oe={};var le=window.customElements;function de(){var t=new B;!function(t){function n(){var n=this.constructor,i=document.__CE_registry.C.get(n);if(!i)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var a=i.constructionStack;if(0===a.length)return a=e.call(document,i.localName),Object.setPrototypeOf(a,n.prototype),a.__CE_state=1,a.__CE_definition=i,V(t,a),a;var s=a.length-1,r=a[s];if(r===oe)throw Error("Failed to construct '"+i.localName+"': This element was already constructed.");return a[s]=oe,Object.setPrototypeOf(r,n.prototype),V(t,r),r}n.prototype=k.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:n}),window.HTMLElement=n}(t),function(e){Document.prototype.createElement=function(t){return X(e,this,t,null)},Document.prototype.importNode=function(t,i){return t=n.call(this,t,!!i),this.__CE_registry?q(e,t):j(e,t),t},Document.prototype.createElementNS=function(t,n){return X(e,this,n,t)},se(e,Document.prototype,{prepend:i,append:a})}(t),se(t,DocumentFragment.prototype,{prepend:s,append:r}),function(e){function t(t,n){Object.defineProperty(t,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,t);else{var i=void 0;if(this.firstChild){var a=this.childNodes,s=a.length;if(0<s&&R(this)){i=Array(s);for(var r=0;r<s;r++)i[r]=a[r]}}if(n.set.call(this,t),i)for(t=0;t<i.length;t++)W(e,i[t])}}})}Node.prototype.insertBefore=function(t,n){if(t instanceof DocumentFragment){var i=D(t);if(t=d.call(this,t,n),R(this))for(n=0;n<i.length;n++)z(e,i[n]);return t}return i=t instanceof Element&&R(t),n=d.call(this,t,n),i&&W(e,t),R(this)&&z(e,t),n},Node.prototype.appendChild=function(t){if(t instanceof DocumentFragment){var n=D(t);if(t=l.call(this,t),R(this))for(var i=0;i<n.length;i++)z(e,n[i]);return t}return n=t instanceof Element&&R(t),i=l.call(this,t),n&&W(e,t),R(this)&&z(e,t),i},Node.prototype.cloneNode=function(t){return t=o.call(this,!!t),this.ownerDocument.__CE_registry?q(e,t):j(e,t),t},Node.prototype.removeChild=function(t){var n=t instanceof Element&&R(t),i=c.call(this,t);return n&&W(e,t),i},Node.prototype.replaceChild=function(t,n){if(t instanceof DocumentFragment){var i=D(t);if(t=h.call(this,t,n),R(this))for(W(e,n),n=0;n<i.length;n++)z(e,i[n]);return t}i=t instanceof Element&&R(t);var a=h.call(this,t,n),s=R(this);return s&&W(e,n),i&&W(e,t),s&&z(e,t),a},u&&u.get?t(Node.prototype,u):function(e,t){e.j=!0,e.m.push(t)}(e,function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=this.firstChild;t;t=t.nextSibling)t.nodeType!==Node.COMMENT_NODE&&e.push(t.textContent);return e.join("")},set:function(e){for(;this.firstChild;)c.call(this,this.firstChild);null!=e&&""!==e&&l.call(this,document.createTextNode(e))}})})}(t),re(t),window.CustomElementRegistry=ee,t=new ee(t),document.__CE_registry=t,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:t})}le&&!le.forcePolyfill&&"function"==typeof le.define&&"function"==typeof le.get||de(),window.__CE_installPolyfill=de}).call(self);class e{constructor(e){this._imageURI=e}get imageURI(){return this._imageURI}}var t,n;!function(e){e[e.Tesseract=0]="Tesseract"}(t||(t={}));class i{constructor(){this._ocrIFrame=null,this._sleep=e=>new Promise(t=>setTimeout(t,e))}_createHiddeniFrame(e="",t=crypto.randomUUID(),n=crypto.randomUUID()){const i=document.createElement("iframe");return i.style.display="none",i.setAttribute("name",t),i.setAttribute("id",n),i.setAttribute("width","0"),i.setAttribute("height","0"),i.setAttribute("border","0"),i.setAttribute("src",e),i.setAttribute("hidden","hidden"),i.setAttribute("allow","display-capture *; "),i}async _createOCRIFrameIfNeeded(){if(!this._ocrIFrame){const e=crypto.randomUUID();this._ocrIFrame=this._createHiddeniFrame(chrome.runtime.getURL("pages/ocr.html"),`ocrFrame${e}`,e),this._ocrIFrame&&document.body.appendChild(this._ocrIFrame),await this._sleep(100)}return this._ocrIFrame}doOCR(e){return new Promise(t=>{try{this._createOCRIFrameIfNeeded().then(n=>{n||t({});let i=async e=>{var n;"resultOfOCR"===(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type)&&(console.log(e.data),t(e.data),window.removeEventListener("message",i))};window.addEventListener("message",i);const a=Date.now();n&&n.contentWindow&&n.contentWindow.postMessage({type:"doOcr",mainUrl:window.location.href,base64Url:"",time:a,imageDataURI:e.imageURI,px:0,py:0,lang:""},chrome.runtime.getURL("pages/ocr.html"))})}catch(e){console.log(e)}return JSON.parse('{"name":"tesseract","image":"test.png","created":"2022-03-19T18:15:12.710Z"}')})}}class a{static getOCREngineInstance(e){return e==a.type||(t.Tesseract,a.instance=new i,a.type=e),a.instance}}!function(e){e[e.GETFULLSCREENIMAGE=0]="GETFULLSCREENIMAGE",e[e.GETSPEECHSETTINGS=1]="GETSPEECHSETTINGS",e[e.DOSCREENSHOTREAD=2]="DOSCREENSHOTREAD"}(n||(n={}));
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const s=globalThis,r=s.ShadowRoot&&(void 0===s.ShadyCSS||s.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),l=new WeakMap;let d=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(r&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=l.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&l.set(t,e))}return e}toString(){return this.cssText}};const c=r?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return(e=>new d("string"==typeof e?e:e+"",void 0,o))(t)})(e):e,{is:h,defineProperty:u,getOwnPropertyDescriptor:p,getOwnPropertyNames:g,getOwnPropertySymbols:m,getPrototypeOf:v}=Object,f=globalThis,E=f.trustedTypes,y=E?E.emptyScript:"",_=f.reactiveElementPolyfillSupport,S=(e,t)=>e,w={toAttribute(e,t){switch(t){case Boolean:e=e?y:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},b=(e,t)=>!h(e,t),C={attribute:!0,type:String,converter:w,reflect:!1,useDefault:!1,hasChanged:b};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */Symbol.metadata??=Symbol("metadata"),f.litPropertyMetadata??=new WeakMap;let A=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=C){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,t);void 0!==i&&u(this.prototype,e,i)}}static getPropertyDescriptor(e,t,n){const{get:i,set:a}=p(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:i,set(t){const s=i?.call(this);a?.call(this,t),this.requestUpdate(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??C}static _$Ei(){if(this.hasOwnProperty(S("elementProperties")))return;const e=v(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(S("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(S("properties"))){const e=this.properties,t=[...g(e),...m(e)];for(const n of t)this.createProperty(n,e[n])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,n]of t)this.elementProperties.set(e,n)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const n=this._$Eu(e,t);void 0!==n&&this._$Eh.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(c(e))}else void 0!==e&&t.push(c(e));return t}static _$Eu(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(r)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const n of t){const t=document.createElement("style"),i=s.litNonce;void 0!==i&&t.setAttribute("nonce",i),t.textContent=n.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ET(e,t){const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(void 0!==i&&!0===n.reflect){const a=(void 0!==n.converter?.toAttribute?n.converter:w).toAttribute(t,n.type);this._$Em=e,null==a?this.removeAttribute(i):this.setAttribute(i,a),this._$Em=null}}_$AK(e,t){const n=this.constructor,i=n._$Eh.get(e);if(void 0!==i&&this._$Em!==i){const e=n.getPropertyOptions(i),a="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:w;this._$Em=i;const s=a.fromAttribute(t,e.type);this[i]=s??this._$Ej?.get(i)??s,this._$Em=null}}requestUpdate(e,t,n){if(void 0!==e){const i=this.constructor,a=this[e];if(n??=i.getPropertyOptions(e),!((n.hasChanged??b)(a,t)||n.useDefault&&n.reflect&&a===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,t,n)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:n,reflect:i,wrapped:a},s){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,s??t??this[e]),!0!==a||void 0!==s)||(this._$AL.has(e)||(this.hasUpdated||n||(t=void 0),this._$AL.set(e,t)),!0===i&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,n]of e){const{wrapped:e}=n,i=this[t];!0!==e||this._$AL.has(t)||void 0===i||this.C(t,void 0,n,i)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(e=>this._$ET(e,this[e])),this._$EM()}updated(e){}firstUpdated(e){}};A.elementStyles=[],A.shadowRootOptions={mode:"open"},A[S("elementProperties")]=new Map,A[S("finalized")]=new Map,_?.({ReactiveElement:A}),(f.reactiveElementVersions??=[]).push("2.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const F=globalThis,M=F.trustedTypes,x=M?M.createPolicy("lit-html",{createHTML:e=>e}):void 0,T="$lit$",k=`lit$${Math.random().toFixed(9).slice(2)}$`,G="?"+k,N=`<${G}>`,L=document,O=()=>L.createComment(""),$=e=>null===e||"object"!=typeof e&&"function"!=typeof e,P=Array.isArray,R="[ \t\n\f\r]",D=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,U=/-->/g,I=/>/g,B=RegExp(`>|${R}(?:([^\\s"'>=/]+)(${R}*=${R}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),H=/'/g,j=/"/g,V=/^(?:script|style|textarea|title)$/i,z=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),W=Symbol.for("lit-noChange"),q=Symbol.for("lit-nothing"),J=new WeakMap,X=L.createTreeWalker(L,129);function K(e,t){if(!P(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==x?x.createHTML(t):t}const Z=(e,t)=>{const n=e.length-1,i=[];let a,s=2===t?"<svg>":3===t?"<math>":"",r=D;for(let t=0;t<n;t++){const n=e[t];let o,l,d=-1,c=0;for(;c<n.length&&(r.lastIndex=c,l=r.exec(n),null!==l);)c=r.lastIndex,r===D?"!--"===l[1]?r=U:void 0!==l[1]?r=I:void 0!==l[2]?(V.test(l[2])&&(a=RegExp("</"+l[2],"g")),r=B):void 0!==l[3]&&(r=B):r===B?">"===l[0]?(r=a??D,d=-1):void 0===l[1]?d=-2:(d=r.lastIndex-l[2].length,o=l[1],r=void 0===l[3]?B:'"'===l[3]?j:H):r===j||r===H?r=B:r===U||r===I?r=D:(r=B,a=void 0);const h=r===B&&e[t+1].startsWith("/>")?" ":"";s+=r===D?n+N:d>=0?(i.push(o),n.slice(0,d)+T+n.slice(d)+k+h):n+k+(-2===d?t:h)}return[K(e,s+(e[n]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),i]};class Y{constructor({strings:e,_$litType$:t},n){let i;this.parts=[];let a=0,s=0;const r=e.length-1,o=this.parts,[l,d]=Z(e,t);if(this.el=Y.createElement(l,n),X.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=X.nextNode())&&o.length<r;){if(1===i.nodeType){if(i.hasAttributes())for(const e of i.getAttributeNames())if(e.endsWith(T)){const t=d[s++],n=i.getAttribute(e).split(k),r=/([.?@])?(.*)/.exec(t);o.push({type:1,index:a,name:r[2],strings:n,ctor:"."===r[1]?ie:"?"===r[1]?ae:"@"===r[1]?se:ne}),i.removeAttribute(e)}else e.startsWith(k)&&(o.push({type:6,index:a}),i.removeAttribute(e));if(V.test(i.tagName)){const e=i.textContent.split(k),t=e.length-1;if(t>0){i.textContent=M?M.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],O()),X.nextNode(),o.push({type:2,index:++a});i.append(e[t],O())}}}else if(8===i.nodeType)if(i.data===G)o.push({type:2,index:a});else{let e=-1;for(;-1!==(e=i.data.indexOf(k,e+1));)o.push({type:7,index:a}),e+=k.length-1}a++}}static createElement(e,t){const n=L.createElement("template");return n.innerHTML=e,n}}function Q(e,t,n=e,i){if(t===W)return t;let a=void 0!==i?n._$Co?.[i]:n._$Cl;const s=$(t)?void 0:t._$litDirective$;return a?.constructor!==s&&(a?._$AO?.(!1),void 0===s?a=void 0:(a=new s(e),a._$AT(e,n,i)),void 0!==i?(n._$Co??=[])[i]=a:n._$Cl=a),void 0!==a&&(t=Q(e,a._$AS(e,t.values),a,i)),t}class ee{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:n}=this._$AD,i=(e?.creationScope??L).importNode(t,!0);X.currentNode=i;let a=X.nextNode(),s=0,r=0,o=n[0];for(;void 0!==o;){if(s===o.index){let t;2===o.type?t=new te(a,a.nextSibling,this,e):1===o.type?t=new o.ctor(a,o.name,o.strings,this,e):6===o.type&&(t=new re(a,this,e)),this._$AV.push(t),o=n[++r]}s!==o?.index&&(a=X.nextNode(),s++)}return X.currentNode=L,i}p(e){let t=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class te{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,i){this.type=2,this._$AH=q,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Q(this,e,t),$(e)?e===q||null==e||""===e?(this._$AH!==q&&this._$AR(),this._$AH=q):e!==this._$AH&&e!==W&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>P(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==q&&$(this._$AH)?this._$AA.nextSibling.data=e:this.T(L.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:n}=e,i="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=Y.createElement(K(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===i)this._$AH.p(t);else{const e=new ee(i,this),n=e.u(this.options);e.p(t),this.T(n),this._$AH=e}}_$AC(e){let t=J.get(e.strings);return void 0===t&&J.set(e.strings,t=new Y(e)),t}k(e){P(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,i=0;for(const a of e)i===t.length?t.push(n=new te(this.O(O()),this.O(O()),this,this.options)):n=t[i],n._$AI(a),i++;i<t.length&&(this._$AR(n&&n._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class ne{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,i,a){this.type=1,this._$AH=q,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=a,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=q}_$AI(e,t=this,n,i){const a=this.strings;let s=!1;if(void 0===a)e=Q(this,e,t,0),s=!$(e)||e!==this._$AH&&e!==W,s&&(this._$AH=e);else{const i=e;let r,o;for(e=a[0],r=0;r<a.length-1;r++)o=Q(this,i[n+r],t,r),o===W&&(o=this._$AH[r]),s||=!$(o)||o!==this._$AH[r],o===q?e=q:e!==q&&(e+=(o??"")+a[r+1]),this._$AH[r]=o}s&&!i&&this.j(e)}j(e){e===q?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ie extends ne{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===q?void 0:e}}class ae extends ne{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==q)}}class se extends ne{constructor(e,t,n,i,a){super(e,t,n,i,a),this.type=5}_$AI(e,t=this){if((e=Q(this,e,t,0)??q)===W)return;const n=this._$AH,i=e===q&&n!==q||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,a=e!==q&&(n===q||i);i&&this.element.removeEventListener(this.name,this,n),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class re{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Q(this,e)}}const oe=F.litHtmlPolyfillSupport;oe?.(Y,te),(F.litHtmlVersions??=[]).push("3.3.1");const le=globalThis;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class de extends A{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{const i=n?.renderBefore??t;let a=i._$litPart$;if(void 0===a){const e=n?.renderBefore??null;i._$litPart$=a=new te(t.insertBefore(O(),e),e,void 0,n??{})}return a._$AI(e),a})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return W}}de._$litElement$=!0,de.finalized=!0,le.litElementHydrateSupport?.({LitElement:de});const ce=le.litElementPolyfillSupport;ce?.({LitElement:de}),(le.litElementVersions??=[]).push("4.2.1");class he extends EventTarget{constructor(){super(...arguments),this.canvas=null,this.ctx=null,this.startPoint=new DOMPoint,this.endPoint=new DOMPoint,this.callback=null,this.lastRect={},this.BACKGORUND_COLOR="rgba(0, 0, 0, 0.2)",this.TOOSMALL_COLOR="rgba(255, 0, 0, 1)",this.RECTANGLE_COLOR="rgb(145, 93, 255)",this.HIGHLIGHT_COLOR="rgba(0,0,255,0.25)",this.WORD_HIGHLIGHTING_PADDING=4,this.minimumBoxSize={width:140,height:30},this.rectToPaint=null}start(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.mouseMoveWhilstDownStart(this.canvas,e=>{this.onMouseMoveButtonDown(e)}),this.canvas.style.setProperty("cursor","crosshair"),t&&(this.callback=t)}stop(){this.rectToPaint=null}onMouseMoveButtonDownStart(e){if(0!==e.button)return;if(null===this.canvas)return;if(null===this.ctx)return;const t=this.canvas.getBoundingClientRect();this.canvas.width=t.width,this.canvas.height=t.height,this.ctx.fillStyle=this.BACKGORUND_COLOR,this.ctx.fillRect(0,0,t.width,t.height),this.startPoint=new DOMPoint(e.clientX,e.clientY),console.log(`Start point: ${JSON.stringify(this.startPoint)}`),this.canvas.style.setProperty("cursor","crosshair")}onMouseMoveButtonDown(e){if(null===this.canvas)return;const t=this.canvas.getBoundingClientRect();this.endPoint=new DOMPoint(e.clientX,e.clientY),this.lastRect=this.reOrderCoordsForRect(this.startPoint.x,this.startPoint.y,this.endPoint.x,this.endPoint.y),this.ctx&&this.paintWindowOnCanvas(this.ctx,this.lastRect.top,this.lastRect.left,this.lastRect.bottom,this.lastRect.right,t.width,t.height)}onMouseMoveButtonDownEnd(e){null!==this.canvas&&null!==this.ctx&&(this.endPoint=new DOMPoint(e.clientX,e.clientY),console.log(`End point: ${JSON.stringify(this.endPoint)}`),this.canvas.style.setProperty("cursor","default"),this.callback&&this.callback(this.lastRect),dispatchEvent(new CustomEvent("playSSR")),document.dispatchEvent(new CustomEvent("screenshotreader-analytics",{detail:{eventName:"ScreenshotCaptured",category:"Feature",feature:"Screenshot Reader"},bubbles:!0})))}reOrderCoordsForRect(e,t,n,i){let a={top:t,left:e,bottom:i,right:n};return i<t&&(a.top=i,a.bottom=t),n<e&&(a.right=e,a.left=n),a}paintRect(e){var t;if(this.rectToPaint=e,this.ctx){const e=null===(t=this.canvas)||void 0===t?void 0:t.getBoundingClientRect();this.paintWindowOnCanvas(this.ctx,this.lastRect.top,this.lastRect.left,this.lastRect.bottom,this.lastRect.right,e.width,e.height)}}clearRect(){var e;if(this.rectToPaint=null,this.ctx){const t=null===(e=this.canvas)||void 0===e?void 0:e.getBoundingClientRect();this.paintWindowOnCanvas(this.ctx,this.lastRect.top,this.lastRect.left,this.lastRect.bottom,this.lastRect.right,t.width,t.height)}}paintWindowOnCanvas(e,t,n,i,a,s,r){e.clearRect(0,0,s,r),e.fillStyle=this.BACKGORUND_COLOR,e.fillRect(0,0,s,t),e.fillRect(0,i,s,r-i),e.fillRect(0,t,n,i-t),e.fillRect(a,t,s,i-t),a-n<this.minimumBoxSize.width||i-t<this.minimumBoxSize.height?e.strokeStyle=this.TOOSMALL_COLOR:e.strokeStyle=this.RECTANGLE_COLOR,e.lineWidth=2,e.strokeRect(n,t,a-n,i-t),this.rectToPaint&&(e.fillStyle=this.HIGHLIGHT_COLOR,e.fillRect(this.rectToPaint.x0+n-this.WORD_HIGHLIGHTING_PADDING,this.rectToPaint.y0+t-this.WORD_HIGHLIGHTING_PADDING,this.rectToPaint.x1-this.rectToPaint.x0+2*this.WORD_HIGHLIGHTING_PADDING,this.rectToPaint.y1-this.rectToPaint.y0+2*this.WORD_HIGHLIGHTING_PADDING))}mouseMoveWhilstDownStart(e,t){const n=e=>{1==e.buttons&&(e.preventDefault(),t(e))};e.addEventListener("pointermove",n),e.addEventListener("pointerdown",t=>{t.stopPropagation(),this.onMouseMoveButtonDownStart(t),e.addEventListener("pointerup",t=>{t.stopPropagation(),e.removeEventListener("pointermove",n),this.onMouseMoveButtonDownEnd(t)},{once:!0})},{once:!0})}}class ue extends de{constructor(){super(),this._closeClickedHandler=null}static initialise(){document.createElement("th-sr-ul").constructor===HTMLElement&&customElements.define("th-sr-ul",ue)}async performUpdate(){this.top=this.top-18,this.right=this.right-133,super.performUpdate()}render(){return z` <ul style="top:${this.top}px; left:${this.right}px">
        <li>
          <button
            class="playbutton actionButton"
            aria-label="Play"
            @click="${this._playClicked}"
          >
            <svg viewBox="0 0 25 25" class="action-button__icon">
              <use xlink:href="#svg-ssr-play"></use>
            </svg>
          </button>
        </li>
        <li>
          <button
            class="playbutton actionButton"
            aria-label="Pause"
            @click="${this._pauseClicked}"
          >
            <svg viewBox="0 0 25 25" class="action-button__icon">
              <use xlink:href="#svg-ssr-pause"></use>
            </svg>
          </button>
        </li>
        <li>
          <button
            class="playbutton actionButton"
            aria-label="Stop"
            @click="${this._stopClicked}"
          >
            <svg viewBox="0 0 25 25" class="action-button__icon">
              <use xlink:href="#svg-ssr-stop"></use>
            </svg>
          </button>
        </li>
        <li>
          <button
            class="playbutton actionButton"
            aria-label="Copy"
            @click="${this._copyClicked}"
          >
            <svg viewBox="0 0 25 25" class="action-button__icon">
              <use xlink:href="#svg-ssr-copy"></use>
            </svg>
          </button>
        </li>
        <li>
          <button
            class="closebutton actionButton"
            aria-label="Close"
            @click="${this._closeClicked}"
          >
            <svg viewBox="0 0 25 25" class="action-button__icon">
              <use xlink:href="#svg-ssr-close"></use>
            </svg>
          </button>
        </li>
      </ul>
      <svg style="display: none;">
        <symbol id="svg-ssr-close" viewBox="0 0 11.172 11.172">
          <path
            d="M11.172 1.128 10.043 0 5.586 4.457 1.128 0 0 1.128l4.457 4.458L0 10.043l1.128 1.129 4.458-4.458 4.457 4.458 1.129-1.129-4.458-4.457z"
            fill="currentColor"
          ></path>
        </symbol>
        <symbol id="svg-ssr-pause" viewBox="  0 0 560 560">
          <path
            d="M502.9 528.4H349.6c-11 0-20-8-20-17.9v-457c0-9.9 9-17.9 20-17.9h153.3c11 0 20 8 20 17.9v457c0 9.9-8.9 17.9-20 17.9zm-300 0H49.6c-11 0-20-8-20-17.9v-457c0-9.9 9-17.9 20-17.9h153.3c11 0 20 8 20 17.9v457c0 9.9-8.9 17.9-20 17.9z"
          ></path>
        </symbol>
        <symbol id="svg-ssr-play" viewBox="0 0 560 560">
          <path
            style="fill:currentColor;stroke:currentColor"
            d="M179 48.7c-17.7-17.3-32.1-11.3-32.1 13.5v440.2c0 24.8 14.3 30.7 31.8 13.2l203.9-203.9c17.5-17.5 17.4-46-.3-63.4L179 48.7z"
          ></path>
          <path
            style="fill:currentColor;stroke-width:10;stroke:currentColor"
            d="M179 48.7c-17.7-17.3-32.1-11.3-32.1 13.5v440.2c0 24.8 14.3 30.7 31.8 13.2l203.9-203.9c17.5-17.5 17.4-46-.3-63.4L179 48.7z"
          ></path>
        </symbol>
        <symbol id="svg-ssr-stop" viewBox="0 0 560 560">
          <path
            style="fill:currentColor;stroke-width:10;stroke:currentColor"
            d="M505.1 528.4H47.9c-9.9 0-17.9-8-17.9-17.9V53.3c0-9.9 8-17.9 17.9-17.9h457.2c9.9 0 17.9 8 17.9 17.9v457.2c0 9.9-8 17.9-17.9 17.9z"
          ></path>
        </symbol>
        <symbol
          id="svg-ssr-copy"
          class="equatio-copy-button__icon"
          viewBox="0 0 24 24"
        >
          <path d="M0 0h24v24H0z" fill="none"></path>
          <path
            fill="currentColor"
            d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"
          ></path>
        </symbol>
      </svg>`}_closeClicked(){this.dispatchEvent(new CustomEvent("closeSSR")),this.dispatchEvent(new CustomEvent("stopSSR")),document.dispatchEvent(new CustomEvent("screenshotreader-analytics",{detail:{eventName:"ScreenshotReaderClosed",category:"Feature",feature:"Screenshot Reader"},bubbles:!0}))}async _playClicked(){this.dispatchEvent(new CustomEvent("playSSR")),document.dispatchEvent(new CustomEvent("screenshotreader-analytics",{detail:{eventName:"PlayStarted",category:"Feature",feature:"Speech",properties:{is_screenshot_reader:!0}},bubbles:!0}))}_stopClicked(){this.dispatchEvent(new CustomEvent("stopSSR")),document.dispatchEvent(new CustomEvent("screenshotreader-analytics",{detail:{eventName:"PlayStopped",category:"Feature",feature:"Speech",properties:{is_screenshot_reader:!0}},bubbles:!0}))}_pauseClicked(){this.dispatchEvent(new CustomEvent("pauseSSR")),document.dispatchEvent(new CustomEvent("screenshotreader-analytics",{detail:{eventName:"PlayPaused",category:"Feature",feature:"Speech",properties:{is_screenshot_reader:!0}},bubbles:!0}))}_copyClicked(e){this.dispatchEvent(new CustomEvent("copySSR")),document.dispatchEvent(new CustomEvent("screenshotreader-analytics",{detail:{eventName:"CopyTextClicked",category:"Feature",feature:"Screenshot Reader"},bubbles:!0}));e.target.focus()}showSpinner(){const e=document.querySelector(".svg-ssr-spinner");null==e||e.setAttribute("style","display: inline-block; position: fixed; top: 50px; left: 50px; height: 50px; right: 50px;")}}ue.properties={top:{type:String},right:{type:String}},ue.styles=((e,...t)=>{const n=1===e.length?e[0]:t.reduce((t,n,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[i+1],e[0]);return new d(n,e,o)})`
    ul {
      position: absolute;
      z-index: 2147483638;
      margin: 0;
      padding: 0;
      list-style-type: none;
      display: inline-flex;
      position: absolute;
      background: rgb(145, 93, 255);
      border-radius: 12px 12px 0px 0px;
      padding: 5px 7px;
      border-top-width: 2px;
      border-right-width: 2px;
      border-bottom-width: 0px;
      border-left-width: 2px;
      border-color: #fff;
      border-style: solid;
      box-shadow: 0 0 15px 0 #727272;
    }

    button.actionButton {
      margin: 0;
      padding: 0;
      border: 0;
      background: transparent;
      border-radius: 0;
      display: -webkit-box;
      display: -moz-box;
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
      -webkit-align-items: center;
      align-items: center;
      -webkit-box-pack: center;
      -ms-flex-pack: center;
      -webkit-justify-content: center;
      -moz-justify-content: center;
      justify-content: center;
      border-radius: 50%;
      background: #662eb3;
      width: 20px;
      height: 20px;
      cursor: pointer;
      margin: 0px 3px 0px 3px;
    }

    button.actionButton:hover {
      opacity: 0.5;
    }

    .action-button__icon {
      height: 10px;
      color: #fff;
      fill: #fff;
      max-width: 14px;
    }
  `;class pe extends de{constructor(){super(),this.canvas=null,this.mouseCapture=null,this.lastCaptureArea=null,this.menuButtons=null,this.menuOffset={top:15,right:13}}static get properties(){return{backgroundColor:{type:String}}}static initialise(){document.createElement("th-ssr-container").constructor===HTMLElement&&customElements.define("th-ssr-container",pe),ue.initialise()}displaySpinner(){var e;if(!this.lastCaptureArea)return void this.onClose();const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".svg-ssr-spinner"),n=(this.lastCaptureArea.bottom-this.lastCaptureArea.top)/2+this.lastCaptureArea.top-25,i=(this.lastCaptureArea.right-this.lastCaptureArea.left)/2+this.lastCaptureArea.left-25;null==t||t.setAttribute("style",`display: inline-block; position: fixed; top: ${n}px; left: ${i}px; height: 50px; right: 50px;`)}onOCR(){var e;if(!this.lastCaptureArea)return void this.onClose();const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".svg-ssr-spinner");null==t||t.setAttribute("style","display: none;");const n=this.lastCaptureArea.right+window.scrollX-this.menuOffset.right,i=this.lastCaptureArea.top+window.scrollY-this.menuOffset.top;this.menuButtons||(this.menuButtons=document.createElement("th-sr-ul"),this.appendChild(this.menuButtons),this.menuButtons.addEventListener("closeSSR",this.onClose.bind(this)),["copySSR","playSSR","stopSSR","pauseSSR"].forEach(e=>{var t;null===(t=null==this?void 0:this.menuButtons)||void 0===t||t.addEventListener(e,()=>{this.dispatchEvent(new CustomEvent(e))})})),this.menuButtons.setAttribute("right",n.toString()),this.menuButtons.setAttribute("top",i.toString())}firstUpdated(){null!==this.shadowRoot&&null===this.canvas&&(this.canvas=this.shadowRoot.querySelector("canvas")),window.addEventListener("resize",()=>{this.onClose()}),window.addEventListener("scroll",()=>{this.onClose()}),null!==this.canvas&&(this.mouseCapture=new he,this.mouseCapture.start(this.canvas,e=>{var t,n;this.lastCaptureArea=e,null===(t=this.shadowRoot)||void 0===t||t.querySelector(".svg-ssr-spinner"),this.lastCaptureArea.bottom,this.lastCaptureArea.top,this.lastCaptureArea.top,this.lastCaptureArea.right,this.lastCaptureArea.left,this.lastCaptureArea.left;const i=new CustomEvent("onCaptureArea",{detail:{captureArea:e}});this.dispatchEvent(i),null===(n=this.mouseCapture)||void 0===n||n.stop()}))}onClose(){var e,t,n;null===(e=this.mouseCapture)||void 0===e||e.stop();const i=document.querySelector("th-sr-ul");i&&(null===(t=null==i?void 0:i.parentElement)||void 0===t||t.removeChild(i)),this&&(null===(n=null==this?void 0:this.parentElement)||void 0===n||n.removeChild(this))}disconnectedCallback(){super.disconnectedCallback(),this.mouseCapture=null}paintRect(e){var t;null===(t=this.mouseCapture)||void 0===t||t.paintRect(e)}clearRect(){var e;null===(e=this.mouseCapture)||void 0===e||e.clearRect()}render(){return z`
      <canvas id="th-ssr-wrapper" style="width: inherit; height: inherit; position: fixed; };"></canvas>
      <slot></slot>
      <svg class="svg-ssr-spinner" style="height: 50px; width: 50px; display: none;" viewBox="0 0 25 25" class="ssr-spinner"><use xlink:href="#svg-ssr-spinner"></use></svg>
      <svg style="display: none;">
        <symbol id="svg-ssr-spinner" stroke="#8E4DEE" viewBox="0 0 38 38"><g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd"><circle stroke-opacity=".5" cx="18" cy="18" r="18"/><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"/></path></g>
        </symbol>
      </svg>`}}class ge extends EventTarget{iframeUrl;messageID;pendingMessages={};port=null;constructor(e){super(),this.iframeUrl=e,this.port=null,this.csID=this.getGuid()}async sendCommand(e,t,n,i=!1,a=!1){return new Promise(async(s,r)=>{try{this.messageID=this.getGuid();const o={id:this.messageID,iframeUrl:this.iframeUrl,csID:this.csID,command:e,data:t||null,waitForResponse:i,direction:"createOffScreenDocument"!==e?"CONTENTSCRIPT_TO_FEATURE":"CONTENTSCRIPT_TO_OFFSCREENDOCUMENT",continuousCommunication:a};this.pendingMessages[this.messageID]={resolve:s,reject:r,callback:n},a?(this.cleanupPort(),this.connectAPortToServiceWorker(),this.port.postMessage(o)):chrome.runtime.sendMessage(o,this.listenToSingleResponse.bind(this))}catch(e){r(e)}})}onNotification(e){}connectAPortToServiceWorker(){this.port||(this.port=chrome.runtime.connect({name:this.csID}),this.port.onMessage.addListener(e=>{this.listenToMultipleResponse(e)}),this.port.onDisconnect.addListener(()=>{this.cleanupPort()}))}listenToSingleResponse(e,t){if(chrome.runtime.lastError,e&&"FEATURE_TO_CONTENTSCRIPT"===e.direction){const t=this.pendingMessages[e.id];if(!t)return;const{resolve:n,callback:i}=t;"function"==typeof i&&i(e),n(e),this.cleanupPendingMessage(e.id)}}listenToMultipleResponse(e){if(e&&"FEATURE_TO_CONTENTSCRIPT"===e.direction){const t=this.pendingMessages[e.id];if(!t)return"notification"===e.type?void this.onNotification(e):void 0;const{resolve:n,callback:i}=t;"function"==typeof i&&i(e),e.continuousMessage||(n(e),this.cleanupPendingMessage(e.id))}}cleanupPort(){this.port&&(this.port.disconnect(),this.port=null)}cleanupPendingMessage(e){delete this.pendingMessages[e]}getGuid(){const e=()=>Math.floor(65536*Math.random()).toString(16);return`${e()}${e()}-${e()}-${e()}-${e()}${e()}${e()}`}}const me="start",ve="stop",fe="word",Ee="analytics";class ye extends ge{_voice;_speed;_currentVoice;constructor(){super("features/speech/iframe/speech.html"),this._voice="Ava",this._speed="50",this._currentVoice=""}async initialise(e){try{const t=await this.sendCommand("initialiseSpeech",e,this.handlePlayEvents.bind(this),!0);return this._currentVoice=e.currentVoice,t.data}catch(e){console.error("Error in Initialisation",e)}}play({words:e=[],useEvents:t=!0,voice:n="",speed:i=-1,setSpeaking:a=!0,continousAllowed:s=!0}){const r={words:e,useEvents:t,voice:n,speed:i,setSpeaking:a,continousAllowed:s};try{this.sendCommand("play",r,this.handlePlayEvents.bind(this),!1,!0)}catch(e){console.error("Error in playing speech:",e)}}stop(){try{this.sendCommand("stop",null,this.handlePlayEvents.bind(this),!0)}catch(e){console.error("Error in stopping speech:",e)}}pause(){try{this.sendCommand("pause",null,this.handlePlayEvents.bind(this),!1,!0)}catch(e){console.error("Error in pausing speech:",e)}}async getVoices(){try{return(await this.sendCommand("getVoices",null,this.handlePlayEvents.bind(this),!0)).data}catch(e){console.error("Error in getting voices:",e)}}async voiceExists(e){try{return(await this.sendCommand("voiceExists",e,this.handlePlayEvents.bind(this),!0)).data}catch(e){console.error("Error in getting checking voice exists:",e)}}handlePlayEvents(e){try{switch(e.command){case me:return void this.dispatchEvent(new CustomEvent(me,{detail:e.data.detail}));case ve:return void this.dispatchEvent(new CustomEvent(ve,{detail:e.data.detail}));case fe:return void this.dispatchEvent(new CustomEvent(fe,{detail:e.data.detail}));case Ee:return void this.dispatchEvent(new CustomEvent(Ee,{detail:e.data.detail}));default:return!1}}catch(e){console.error("Error in getting response:",e)}}setVoice(e){e!==this._currentVoice&&(this.sendCommand("setVoice",e,this.handlePlayEvents.bind(this)),this._currentVoice=e)}setSpeed(e){e!==this._speed&&(this.sendCommand("setSpeed",e,this.handlePlayEvents.bind(this)),this._speed=e)}get voice(){return this._currentVoice}set voice(e){this.setVoice(e)}get speed(){return this._speed}set speed(e){this.setSpeed(e)}}const _e=["body"],Se=["body","useETag","storage"];function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},we.apply(null,arguments)}function be(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}class Ce extends EventTarget{initialise(e){throw"The initialise function must be implemented to support the ISpeechEngine interface."}play({words:e=[],useEvents:t=!0,voice:n="",speed:i=-1,setSpeaking:a=!0,continousAllowed:s=!0}){throw"The play function must be implemented to support the ISpeechEngine interface."}stop(){throw"The stop function must be implemented to support the ISpeechEngine interface."}pause(){throw"The pause function must be implemented to support the ISpeechEngine interface."}getVoices(){throw"The getVoices function must be implemented to support the ISpeechEngine interface."}get voice(){throw"The voice getter must be implemented to support the ISpeechEngine interface."}set voice(e){throw"The voice setter must be implemented to support the ISpeechEngine interface."}get speed(){throw"The speed getter must be implemented to support the ISpeechEngine interface."}set speed(e){throw"The speed setter must be implemented to support the ISpeechEngine interface."}}const Ae="start",Fe="stop",Me="word",xe="analytics",Te=e=>new CustomEvent(Ae,{detail:{setSpeaking:e}}),ke=(e,t)=>new CustomEvent(Fe,{detail:{setSpeaking:e,continousAllowed:t}}),Ge=e=>new CustomEvent(Me,{detail:e}),Ne=e=>new CustomEvent(xe,{detail:e});class Le extends Ce{async initialise({speechEngines:e=[]}){this._speechEngines={},this._currentEngine=null;for(var t=0;t<e.length;t++)this._speechEngines["engine"+t]=e[t];this._setSpeechEngine({speechEngine:this._speechEngines.engine0}),this._currentVoice=""}play({words:e=[],useEvents:t=!0,voice:n="",speed:i=-1,setSpeaking:a=!0,continousAllowed:s=!0}){if(n.length>0){this.voiceExists(n)||(n="Ava"),this.voice=n}i>-1&&(this.speed=i),this._currentEngine.play({words:e,useEvents:t,voice:n,setSpeaking:a,continousAllowed:s})}stop(){this._currentEngine.stop()}pause(){this._currentEngine.pause()}getVoices(){for(var e in this._voices=new Array,this._voiceToEngineMap=new Array,this._speechEngines)if(this._speechEngines.hasOwnProperty(e)){let i=this._speechEngines[e].getVoices();for(var t in i)if(i.hasOwnProperty(t)){var n={name:i[t].name,id:i[t].id,description:i[t].description,language:i[t].language,vendor:i[t].vendor,ai:!!i[t].ai,offline:!!i[t].offline,premiumOnly:!!i[t].premiumOnly,market:i[t].market?i[t].market:""};this._voices.push(n),this._voiceToEngineMap[i[t].name]=this._speechEngines[e]}}return this._voices=this._voices.sort((e,t)=>e.language.localeCompare(t.language)),this._voices}get voice(){return this._currentEngine.voice}set voice(e){if(e===this._currentVoice)return;this._voiceToEngineMap||this.getVoices();let t=this._voiceToEngineMap[e];t||(t=this._voiceToEngineMap.Ava),this._setSpeechEngine({speechEngine:t}),t.voice=e,this._currentVoice=e}get speed(){return this._currentEngine.speed}set speed(e){this._currentEngine.speed=e}voiceExists(e){if(!e||""===e.trim())return!1;return this._voiceToEngineMap||this.getVoices(),!!this._voiceToEngineMap[e]}_setSpeechEngine({speechEngine:e=null}){e&&e!==this._currentEngine&&(null!==this._currentEngine&&(this._currentEngine.removeEventListener(Ae,this._onStart),this._currentEngine.removeEventListener(Fe,this._onStop),this._currentEngine.removeEventListener(Me,this._onWord),this._currentEngine.removeEventListener(xe,this._onAnalytics)),this._currentEngine=e,this._currentEngine.addEventListener(Ae,this._onStart,!0),this._currentEngine.addEventListener(Fe,this._onStop,!0),this._currentEngine.addEventListener(Me,this._onWord,!0),this._currentEngine.addEventListener(xe,this._onAnalytics,!0))}}const{replace:Oe}="",$e=/[&<>'"]/g,Pe={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},Re=e=>Pe[e];class De{constructor(){this.hexcase=0,this.b64pad="",this.chrsz=8}hex_md5(e){return this.binl2hex(this.core_md5(this.str2binl(e),e.length*this.chrsz))}core_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,a=-1732584194,s=271733878,r=0;r<e.length;r+=16){var o=n,l=i,d=a,c=s;n=this.md5_ff(n,i,a,s,e[r+0],7,-680876936),s=this.md5_ff(s,n,i,a,e[r+1],12,-389564586),a=this.md5_ff(a,s,n,i,e[r+2],17,606105819),i=this.md5_ff(i,a,s,n,e[r+3],22,-1044525330),n=this.md5_ff(n,i,a,s,e[r+4],7,-176418897),s=this.md5_ff(s,n,i,a,e[r+5],12,1200080426),a=this.md5_ff(a,s,n,i,e[r+6],17,-1473231341),i=this.md5_ff(i,a,s,n,e[r+7],22,-45705983),n=this.md5_ff(n,i,a,s,e[r+8],7,1770035416),s=this.md5_ff(s,n,i,a,e[r+9],12,-1958414417),a=this.md5_ff(a,s,n,i,e[r+10],17,-42063),i=this.md5_ff(i,a,s,n,e[r+11],22,-1990404162),n=this.md5_ff(n,i,a,s,e[r+12],7,1804603682),s=this.md5_ff(s,n,i,a,e[r+13],12,-40341101),a=this.md5_ff(a,s,n,i,e[r+14],17,-1502002290),i=this.md5_ff(i,a,s,n,e[r+15],22,1236535329),n=this.md5_gg(n,i,a,s,e[r+1],5,-165796510),s=this.md5_gg(s,n,i,a,e[r+6],9,-1069501632),a=this.md5_gg(a,s,n,i,e[r+11],14,643717713),i=this.md5_gg(i,a,s,n,e[r+0],20,-373897302),n=this.md5_gg(n,i,a,s,e[r+5],5,-701558691),s=this.md5_gg(s,n,i,a,e[r+10],9,38016083),a=this.md5_gg(a,s,n,i,e[r+15],14,-660478335),i=this.md5_gg(i,a,s,n,e[r+4],20,-405537848),n=this.md5_gg(n,i,a,s,e[r+9],5,568446438),s=this.md5_gg(s,n,i,a,e[r+14],9,-1019803690),a=this.md5_gg(a,s,n,i,e[r+3],14,-187363961),i=this.md5_gg(i,a,s,n,e[r+8],20,1163531501),n=this.md5_gg(n,i,a,s,e[r+13],5,-1444681467),s=this.md5_gg(s,n,i,a,e[r+2],9,-51403784),a=this.md5_gg(a,s,n,i,e[r+7],14,1735328473),i=this.md5_gg(i,a,s,n,e[r+12],20,-1926607734),n=this.md5_hh(n,i,a,s,e[r+5],4,-378558),s=this.md5_hh(s,n,i,a,e[r+8],11,-2022574463),a=this.md5_hh(a,s,n,i,e[r+11],16,1839030562),i=this.md5_hh(i,a,s,n,e[r+14],23,-35309556),n=this.md5_hh(n,i,a,s,e[r+1],4,-1530992060),s=this.md5_hh(s,n,i,a,e[r+4],11,1272893353),a=this.md5_hh(a,s,n,i,e[r+7],16,-155497632),i=this.md5_hh(i,a,s,n,e[r+10],23,-1094730640),n=this.md5_hh(n,i,a,s,e[r+13],4,681279174),s=this.md5_hh(s,n,i,a,e[r+0],11,-358537222),a=this.md5_hh(a,s,n,i,e[r+3],16,-722521979),i=this.md5_hh(i,a,s,n,e[r+6],23,76029189),n=this.md5_hh(n,i,a,s,e[r+9],4,-640364487),s=this.md5_hh(s,n,i,a,e[r+12],11,-421815835),a=this.md5_hh(a,s,n,i,e[r+15],16,530742520),i=this.md5_hh(i,a,s,n,e[r+2],23,-995338651),n=this.md5_ii(n,i,a,s,e[r+0],6,-198630844),s=this.md5_ii(s,n,i,a,e[r+7],10,1126891415),a=this.md5_ii(a,s,n,i,e[r+14],15,-1416354905),i=this.md5_ii(i,a,s,n,e[r+5],21,-57434055),n=this.md5_ii(n,i,a,s,e[r+12],6,1700485571),s=this.md5_ii(s,n,i,a,e[r+3],10,-1894986606),a=this.md5_ii(a,s,n,i,e[r+10],15,-1051523),i=this.md5_ii(i,a,s,n,e[r+1],21,-2054922799),n=this.md5_ii(n,i,a,s,e[r+8],6,1873313359),s=this.md5_ii(s,n,i,a,e[r+15],10,-30611744),a=this.md5_ii(a,s,n,i,e[r+6],15,-1560198380),i=this.md5_ii(i,a,s,n,e[r+13],21,1309151649),n=this.md5_ii(n,i,a,s,e[r+4],6,-145523070),s=this.md5_ii(s,n,i,a,e[r+11],10,-1120210379),a=this.md5_ii(a,s,n,i,e[r+2],15,718787259),i=this.md5_ii(i,a,s,n,e[r+9],21,-343485551),n=this.safe_add(n,o),i=this.safe_add(i,l),a=this.safe_add(a,d),s=this.safe_add(s,c)}return Array(n,i,a,s)}md5_cmn(e,t,n,i,a,s){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(i,s)),a),n)}md5_ff(e,t,n,i,a,s,r){return this.md5_cmn(t&n|~t&i,e,t,a,s,r)}md5_gg(e,t,n,i,a,s,r){return this.md5_cmn(t&i|n&~i,e,t,a,s,r)}md5_hh(e,t,n,i,a,s,r){return this.md5_cmn(t^n^i,e,t,a,s,r)}md5_ii(e,t,n,i,a,s,r){return this.md5_cmn(n^(t|~i),e,t,a,s,r)}safe_add(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}bit_rol(e,t){return e<<t|e>>>32-t}str2binl(e){for(var t=Array(),n=(1<<this.chrsz)-1,i=0;i<e.length*this.chrsz;i+=this.chrsz)t[i>>5]|=(e.charCodeAt(i/this.chrsz)&n)<<i%32;return t}binl2hex(e){for(var t=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<4*e.length;i++)n+=t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15);return n}$rw_hash(e){return this.hex_md5(e)}}const Ue=(e,t=!1)=>{let n={type:"",value:null};return t||"visible"!==document.visibilityState||"function"!=typeof window.requestAnimationFrame?(n.type="timeout",n.value=setTimeout(e,16)):(n.type="raf",n.value=window.requestAnimationFrame(e)),n},Ie=e=>{e&&("raf"===e.type&&"function"==typeof window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):"timeout"===e.type&&clearTimeout(e.value))},Be=e=>{for(var t="",n=new Uint8Array(e),i=n.byteLength,a=0;a<i;a++)t+=String.fromCharCode(n[a]);return btoa(t)},He=e=>{for(var t=atob(e),n=t.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=t.charCodeAt(a);return i.buffer};class je{constructor(){}static async doFetch(e,t={}){var n=this;let{body:i}=t,a=be(t,_e);return new Promise(async function(t,s){if(n.method="GET",n.timeout=0,void 0===a.method?n.method=i?"POST":"GET":n.method=a.method,a.blob){var r=atob(i.split(",")[1]),o=new ArrayBuffer(r.length),l=new Uint8Array(o);const e=a.headers["content-type"];for(var d=0;d<r.length;d++)l[d]=r.charCodeAt(d);i=new Blob([l],{type:e})}a.timeout&&(n.timeout=a.timeout);const c=we({method:n.method},a,{headers:we({},a.headers)});i&&(c.body=i);let h=null;if(n.timeout>0)try{const t=new AbortController,i=setTimeout(()=>t.abort(),n.timeout);h=await fetch(e,we({},c,{signal:t.signal})),clearTimeout(i)}catch(e){return Promise.reject(e)}else try{h=await fetch(e,c)}catch(e){return void t({error:e.toString()})}if(!h.ok)return void s(u);let u={};if(u.contentType=h.headers.get("content-type"),u.headers=Object.fromEntries(h.headers.entries()),u.contentType){if(-1!==u.contentType.indexOf("application/json"))u.json=await h.json();else if(u.contentType.startsWith("text"))u.text=await h.text();else if(-1!==u.contentType.indexOf("audio/mpeg")){let e=await h.arrayBuffer();u.arrayBuffer=Be(e)}else u.blob=await h.blob();t({data:u})}else s(u)})}static async doFetch2(e,t={}){let{body:n,useETag:i=!1,storage:a=null}=t,s=be(t,Se);return new Promise(async function(t,r){try{let h=s.method||(n?"POST":"GET");if(s.blob){var o=atob(n.split(",")[1]),l=new ArrayBuffer(o.length),d=new Uint8Array(l);const e=s.headers["content-type"];for(var c=0;c<o.length;c++)d[c]=o.charCodeAt(c);n=new Blob([d],{type:e})}const u=we({method:h},s,{headers:we({},s.headers)});n&&(u.body=n);let p=`etag_${e}`,g=`cache_${e}`,m=!1,v=null,f=null;i&&a&&(m=!0,v=await a.getItem(p),f=await a.getItem(g),v&&(u.headers["If-None-Match"]=v)),u.cache||(u.cache="no-cache");let E=s.timeout||0,y=null;try{if(E>0){const t=new AbortController,n=setTimeout(()=>t.abort(),E);u.signal=t.signal,y=await fetch(e,u),clearTimeout(n)}else y=await fetch(e,u)}catch(e){return void r({error:e.toString()})}if(304===y.status&&i&&m&&f){return void t({status:304,data:f,headers:Object.fromEntries(y.headers.entries())})}if(!y.ok){return void r({status:y.status,statusText:y.statusText,headers:Object.fromEntries(y.headers.entries())})}let _={status:y.status,headers:Object.fromEntries(y.headers.entries())};if(_.contentType=y.headers.get("content-type"),_.contentType&&_.contentType.includes("application/json"))_.data=await y.json();else if(_.contentType&&_.contentType.startsWith("text"))_.data=await y.text();else if(_.contentType&&_.contentType.includes("audio/mpeg")){let e=await y.arrayBuffer();_.data=Be(e)}else _.data=await y.blob();if(i&&m){let e=y.headers.get("ETag");e&&(await a.setItem(p,e),await a.setItem(g,_.data))}t(_)}catch(e){r(e)}})}}class Ve{static async fetch(e,t){return new Promise(async function(n,i){const a=e=>{e.data?(e.data.arrayBuffer&&(e.data.arrayBuffer=He(e.data.arrayBuffer)),n(e)):i(e)},s={command:"swfetch8598",url:e,options:t};chrome.runtime?chrome.runtime.sendMessage(s,a):je.doFetch(s.url,s.options).then(a)})}static async fetch2(e,t=!1,n){return new Promise(async function(i,a){const s=e=>{e.data?(e.data.arrayBuffer&&(e.data.arrayBuffer=He(e.data.arrayBuffer)),i(e)):a(e)},r={command:"swfetch8599",url:e,useETag:t,options:n};if(chrome.runtime)return void chrome.runtime.sendMessage(r,s);const o={getItem:async function(e){return Promise.resolve(localStorage.getItem(e))},setItem:async function(e,t){return localStorage.setItem(e,t),Promise.resolve()}};je.doFetch2(r.url,{useETag:t,storage:o,options:r.options}).then(s)})}static blobToDataURL(e){return new Promise((t,n)=>{var i=new FileReader;i.onload=function(){var e=i.result;t(e)},i.readAsDataURL(e)})}}var ze={voices:{Ava:"en-US"},lang:{all:{EquatIO:"e-qway-shi-o",Equatio:"e-qway-shi-o",equatio:"e-qway-shi-o",WriQ:"Wry-Q",wriq:"Wry-Q",Wriq:"Wry-Q"},"en-US":{EquatIO:"e-qway-shi-o",Equatio:"e-qway-shi-o",equatio:"e-qway-shi-o",WriQ:"Wry-Q",wriq:"Wry-Q",Wriq:"Wry-Q"}}};class We{constructor(){this.prons={voices:{},lang:{}},null!=ze&&(this.prons=ze)}loadPronFile(e){}setPronunciationsForVoice(e,t){let n=this.prons.voices[e];this.setPronunciationsForLang(n,t)}setPronunciationsForLang(e,t){let n=this.prons.lang[e],i=this.prons.lang.all,a=Object.assign({},i,n);if(null!=a&&void 0!==a)for(let e in a)for(let n=0;n<t.length;n++)t[n]=t[n].replace(e,a[e])}}class qe extends Ce{initialise({speechServer:e="speech.speechstream.net",cacheServer:t="cache.speechstream.net",useCaching:n=!1,userName:i="",voice:a="Ava",cache1:s=0,cache2:r=0,cache3:o=0,speed:l=50,eventContext:d=this,charMap:c={"":"'","`":"'","":" ","":" "},forceTimer:h=!1}){this._speechConfig={},this._speechConfig.speechServer=e,this._speechConfig.cacheServer=t,this._speechConfig.useCaching=n,this._speechConfig.userName=i,this._speechConfig.cache1=s,this._speechConfig.cache2=r,this._speechConfig.cache3=o,this._speechConfig.speed=l,this._speechConfig.voice=a,this._forceTimer=h,this._animationFrameId=0,this._playbackTimeArray=[],this._currentHighlightWord=0,this._paused=!1,this._eventContext=d,this._charMap=c,this._speechStop=!1,this._continousAllowed=!0,this._setSpeaking=!0,null===this._speechConfig.eventTarget&&(this._speechConfig.audioCtx=null,this._speechConfig.audioSource=null),new EventTarget,this._pronunciations=new We}async play({words:e=[],voice:t="",useEvents:n=!0,setSpeaking:i=!0,continousAllowed:a=!0}){if(e.length<1)return;this._continousAllowed=a,this._setSpeaking=i,this._speechStop=!1,this._eventContext.dispatchEvent(Te(i)),this._paused=!1,this._playbackTimeArray.length=0,e=this._replaceInvalidCharactersInArray(e),this._pronunciations.setPronunciationsForVoice(this._speechConfig.voice,e);let s=this._buildSSMLText(e.slice(0,200),n),r=await this._getCachedSpeech({fileName:s.hash});null===r&&(r=await this._makeSpeechRequest({processedText:s.processedText,hash:s.hash})),this._startAudio(r);let o={voice:t,speed:this._speechConfig.speed,numWords:e.length,textLength:e.join(" ").length,responseTime:r.responseTime,onLine:!0};this._eventContext.dispatchEvent(Ne({eventCategory:"on speech",eventName:"TextToSpeechEngaged",category:"Feature",feature:"Speech",detail:o}))}async stop(){this._speechStop=!0,Ie(this._animationFrameId),this._paused=!1,this._playbackTimeArray.length=0,this._eventContext.dispatchEvent(ke()),null!==this._speechConfig.audioCtx&&null!==this._playbackTimeArray&&this._speechConfig.audioSource&&this._speechConfig.audioSource.stop(0)}pause(){try{if(!this._speechConfig.audioCtx)return;"running"===this._speechConfig.audioCtx.state?(this._speechConfig.audioCtx.suspend(),this._paused=!0):"suspended"===this._speechConfig.audioCtx.state&&(this._speechConfig.audioCtx.resume(),this._paused=!1)}catch(e){console.log("Request failed: SpeechServer - pause: ",e)}}get voice(){return this._speechConfig.voice}set voice(e){this._speechConfig.voice=e}get speed(){return this._speechConfig.speed}set speed(e){this._speechConfig.speed=e}set cache1(e){this._speechConfig.cache1=e}set cache2(e){this._speechConfig.cache2=e}set cache3(e){this._speechConfig.cache3=e}setSpeechServerVoices(e){this._voices=this._convertVoicesToTexthelpFormat(e)}findVoiceDetialsByName(e){return this._voices.find(t=>t.name===e)}_convertVoicesToTexthelpFormat(e){return e.map(e=>({name:e.name,gender:e.Gender,language:e.language,description:e.description,vendor:e.vendor,offline:!1,market:e.market?e.market:""}))}_replaceInvalidCharactersInWord(e){return e.replace(/(\u00a9|\u00ae|[\u2000-\u20AB]|[\u20AD-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/g,function(e){return""===e||""===e?'"':""})}_replaceInvalidCharactersInArray(e){return e.forEach((t,n)=>{e[n]=this._replaceInvalidCharactersInWord(t)}),e}getVoices(){return this._voices}string2ArrayBuffer(e){for(var t=atob(e),n=t.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=t.charCodeAt(a);return i.buffer}async _makeSpeechRequest({processedText:e="",hash:t=""}){var n=this;return new Promise(async function(i,a){let s=`text=${`<?xml version="1.0"?>\n<speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis"\nxmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\nxsi:schemaLocation="http://www.w3.org/2001/10/synthesis\nhttp://www.w3.org/TR/speech-synthesis11/synthesis.xsd"\nxml:lang="${n.findVoiceDetialsByName(n._speechConfig.voice).language}">`}${encodeURIComponent(e)}&username=${n._speechConfig.userName}&speed=${n._speechConfig.speed}&requestType=ssml`;n._speechConfig.useCaching&&(s+=`&destFilename=${t}&destFolder=${n._getCacheLocation()}`);let r=(new Date).getTime(),o=await Ve.fetch(`${n._speechConfig.speechServer}Generator/voice/${n._speechConfig.voice}?`,{headers:{accept:"*/*","accept-language":"en-GB,en;q=0.9,ar;q=0.8,en-US;q=0.7,en-CA;q=0.6","cache-control":"no-cache","content-type":"application/x-www-form-urlencoded; charset=UTF-8"},referrerPolicy:"strict-origin-when-cross-origin",body:s,method:"POST",mode:"cors"}),l=new Date-r,d=o.data.arrayBuffer,c=parseInt(o.data.headers["th-time"]),h=d.slice(0,c);i({timings:JSON.parse(String.fromCharCode.apply(null,new Uint8Array(h))),audioBuffer:d.slice(c),responseTime:l})})}async _getCachedSpeech({fileName:e=""}){var t=this;return new Promise(async function(n,i){if(e.length<1)throw"No cached filename was set in _getCachedSpeech";try{if(!t._speechConfig.useCaching)return void n(null);let i=t._getCacheLocation(),a=`https://${t._speechConfig.cacheServer}/SpeechCache/${i}/${e}.mp3`,s=await fetch(a),r=await s.arrayBuffer(),o=s.headers.get("TH-TIME"),l=r.slice(0,o);n({timings:JSON.parse(String.fromCharCode.apply(null,new Uint8Array(l))),audioBlob:new Blob([new Uint8Array(r.slice(o))])})}catch(e){n(null)}})}async _startAudio({timings:e=[],audioBuffer:t=null}){this._playbackTimeArray=[];var n=0;this._currentHighlightWord=0;for(let t=0;t<e.bookmarks.length;t++)this._playbackTimeArray[n]=e.bookmarks[t].time/1e3,n>0&&this._playbackTimeArray[n]<=this._playbackTimeArray[n-1]&&(this._playbackTimeArray[n]=this._playbackTimeArray[n-1]+.01),n+=1;this._playbackTimeArray[this._playbackTimeArray.length-1]<.1&&(this._playbackTimeArray.length=0),this._speechStop||(this._animationFrameId=Ue(()=>{this._audioPlaybackTimer()},this._forceTimer),this._speechConfig.audioCtx&&await this._speechConfig.audioCtx.close(),this._speechConfig.audioCtx=new AudioContext,this._speechConfig.audioSource=this._speechConfig.audioCtx.createBufferSource(),this._speechConfig.audioCtx.decodeAudioData(t,e=>{this._speechConfig.audioSource.buffer=e,this._speechConfig.audioSource.connect(this._speechConfig.audioCtx.destination),this._speechConfig.audioSource.loop=!1,this._speechConfig.audioSource.start(this._speechConfig.audioCtx.currentTime,0),this._speechConfig.audioSource.addEventListener("ended",()=>{Ie(this._animationFrameId),this._eventContext.dispatchEvent(ke(this._setSpeaking,this._continousAllowed)),this._paused=!1})}))}_audioPlaybackTimer(){this._playbackTimeArray.length>0&&(this._playbackTimeArray[this._currentHighlightWord]<this._speechConfig.audioCtx.currentTime&&(this._eventContext.dispatchEvent(Ge({wordNo:this._currentHighlightWord})),this._currentHighlightWord++),this._playbackTimeArray.length>0&&this._playbackTimeArray[this._currentHighlightWord]<this._speechConfig.audioCtx.currentTime&&(this._eventContext.dispatchEvent(Ge({wordNo:this._currentHighlightWord})),this.currentHighlightWord++)),this._animationFrameId=Ue(()=>{this._audioPlaybackTimer()},this._forceTimer)}_buildSSMLText(e,t){let n="";const i=this.findVoiceDetialsByName(this._speechConfig.voice),a=i&&"Polly"===i.vendor;if(a){n+=`<prosody rate="${Math.max(20,Math.min(200,1.8*this._speechConfig.speed+20))}%">`}for(var s=0;s<e.length;s++)e[s],-1==e[s].search(/[$]/)||isNaN(parseInt(e[s].replace(/[$,]/g,"")))||(e[s]=`<say-as interpret-as="currency">${e[s].trim()}</say-as>`),t?("Serena"==this._speechConfig.voice&&(-1!=e[s].indexOf("phone")&&(e[s]=e[s].replace(/[()]/g,"")),e[s]=e[s].replace('<say-as interpret-as="phone" >','<say-as interpret-as="vxml:phone" >')),n+=`<mark name="${s}"/> ${this.encodeChars(e[s].trim())} `):n+=this.encodeChars(e[s]);return"ja-jp"==this._speechConfig.language&&(n+=""),a&&(n+="</prosody>"),n+=`<mark name="${s}"/> </speak>`,n=n.replace(/(\x3cbookmark\x20mark\x3d\x22(\d)+\x22\x2f\x3e)/g,""),n=n.replace(/[\s\xA0]+/g," "),{processedText:n,hash:(new De).hex_md5(n)}}encodeChars(e){try{return e.search("<phoneme")>-1||e.search("<sub")>-1||e.search("<say-as")>-1||e.search("<emphasis")>-1||e.search("<break")>-1||e.search("<prosody")>-1?e:(t=e,Oe.call(t,$e,Re))}catch(e){}var t}_speechServerEncode(e,t){const n=Object.keys(t).join("|");if(!n)return str;const i=new RegExp(n,"g");return e.replace(i,e=>map[e])}_getCacheLocation(){return`${this._speechConfig.userName}/${this._speechConfig.cache1}/${this._speechConfig.cache2}/${this._speechConfig.cache3}/${this._speechConfig.voice}${this._speechConfig.speed}`}}class Je extends Ce{async initialise({voice:e="Ava",speed:t=50,eventContext:n=this}){this._speechSynthesisVoices=[],this._voiceList=await this._speechSynthesisAsyncVoices(),this._selectedVoice=this._speechSynthesisVoices[0],this._selectedSpeed=50,this._eventContext=n,this._responseTime=null,this._forcedEnd=!1,this._speechUtterance=null,this._useBoundary=!0,this._continousAllowed=!0,this._setSpeaking=!0,this._paused=!1}async _speechSynthesisAsyncVoices(){var e=this;return new Promise(async function(t,n){e._speechSynthesisVoices=window.speechSynthesis.getVoices(),e._speechSynthesisVoices.length>0&&t(e._convertVoicesToTexthelpFormat(e._speechSynthesisVoices)),window.speechSynthesis.onvoiceschanged=n=>{e._speechSynthesisVoices=window.speechSynthesis.getVoices(),t(e._convertVoicesToTexthelpFormat(e._speechSynthesisVoices))},setTimeout(()=>{t([])},2e3)})}_convertVoicesToTexthelpFormat(e){return e.map(e=>{let t="";return e.localService&&(t=" (Offline)"),{name:"html5-"+e.name,gender:"unknown",language:e.lang,description:e.voiceURI+t,vendor:"local",offline:e.localService,market:e.market?e.market:""}})}getVoices(){return this._voiceList}get voice(){return this._selectedVoice.name}set voice(e){const t=e.slice(6);let n=this._speechSynthesisVoices.find(e=>e.name===t);void 0!==n&&this._selectedVoice.name!==n.name&&(this._selectedVoice=n)}get speed(){return this._selectedSpeed}set speed(e){this._selectedSpeed=e}play({words:e=[],voice:t="",useEvents:n=!0,setSpeaking:i=!0,continousAllowed:a=!0}){if(e.length<1)return;this._paused=!1,this._continousAllowed=a,this._setSpeaking=i,this._eventContext.dispatchEvent(Te(i)),this._forcedEnd=!0,window.speechSynthesis.cancel();let s=!1;try{s=navigator.platform.toUpperCase().indexOf("MAC")>=0}catch(e){s=!1}!this._selectedVoice.localService||s||this._selectedVoice.voiceURI.search("Chrome OS")>-1?this._speechUtterance=new SpeechSynthesisUtterance(e.join(" ")):this._speechUtterance=new SpeechSynthesisUtterance(this._buildSSMLText(e)),this._speechUtterance.voice=this._selectedVoice,this._speechUtterance.speed=this._selectedSpeed,this._speechUtterance.addEventListener("start",n=>{let i={voice:t,speed:this._selectedSpeed,numWords:e.length,textLength:e.join(" ").length,responseTime:0,onLine:!1};this._eventContext.dispatchEvent(Ne({eventCategory:"on speech",eventName:"TextToSpeechEngaged",category:"Feature",feature:"Speech",detail:i})),this._forcedEnd=!1,this._speechUtterance.addEventListener("end",e=>{this._forcedEnd||(this._eventContext.dispatchEvent(ke(this._setSpeaking,this._continousAllowed)),this._paused=!1)}),this._speechUtterance.addEventListener("mark",e=>{this._eventContext.dispatchEvent(Ge())}),this._speechUtterance.addEventListener("boundary",e=>{})}),window.speechSynthesis.speak(this._speechUtterance)}stop(){this._paused=!1,this._eventContext.dispatchEvent(ke()),window.speechSynthesis.cancel()}pause(){this._paused=!this._paused,this._paused?window.speechSynthesis.pause():window.speechSynthesis.resume()}_buildSSMLText(e){let t='<?xml version="1.0"?>\n<speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis"\nxmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\nxsi:schemaLocation="http://www.w3.org/2001/10/synthesis\nhttp://www.w3.org/TR/speech-synthesis11/synthesis.xsd"\nxml:lang="en-gb">',n=[];for(var i=0;i<e.length;i++)" "===e[i]||""===e[i]||e[i].length<1?n.push(" "):n.push(`<mark name="${i}"/> ${e[i].trim()}`);return t+=n.join(""),t+=`<mark name="${i}"/></speak>`,t}}const Xe=[{name:"Tagalog",Gender:"Female",language:"ms",description:"Tagalog Female Amelia",glang:"ms",vendor:"Google",SupportedEngines:["standard"]},{name:"Afrikaans",Gender:"Female",language:"af-za",description:"Afrikaans Female",glang:"af",vendor:"Google",SupportedEngines:["standard"]},{name:"Tarik",Gender:"Male",language:"ar",description:"Arabic Male Tarik",glang:"ar",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Miren",Gender:"Female",language:"eu-es",description:"Basque Female Miren",glang:"eu",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Montserrat",Gender:"Female",language:"ca-es",description:"Catalan Female Montserrat",glang:"ca",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tian-Tian",Gender:"Female",language:"zh-cn",description:"Chinese (Mandarin - Simplified) Female Tian-Tian",glang:"zh_cn",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Mei-Jia",Gender:"Female",language:"zh-tw",description:"Chinese (Mandarin - Traditional - Taiwanese) Female Mei-Jia",glang:"zh_tw",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Zuzana",Gender:"Female",language:"cs-cz",description:"Czech Female Zuzana",glang:"cs",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sara",Gender:"Female",language:"da-dk",description:"Danish Female Sara",glang:"da-dk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Magnus",Gender:"Male",language:"da-dk",description:"Danish Male Magnus",glang:"da-dk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ellen",Gender:"Female",language:"nl-be",description:"Dutch (Belgium and Flemish) Female Ellen",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Claire",Gender:"Female",language:"nl-nl",description:"Dutch (Netherlands) Female Claire",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Xander",Gender:"Male",language:"nl-nl",description:"Dutch (Netherlands) Male Xander",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Karen",Gender:"Female",language:"en-au",description:"English (Australian) Female Karen",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lee",Gender:"Male",language:"en-au",description:"English (Australian) Male Lee",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Veena",Gender:"Female",language:"en-in",description:"English (India) Female Veena",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Moira",Gender:"Female",language:"en-ie",description:"English (Irish) Female Moira",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Fiona",Gender:"Female",language:"en-sc",description:"English (Scottish) Female Fiona",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tessa",Gender:"Female",language:"en-za",description:"English (South African) Female Tessa",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Daniel",Gender:"Male",language:"en-gb",description:"English (UK) Male Daniel",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Serena",Gender:"Female",language:"en-gb",description:"English (UK) Female Serena",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Allison",Gender:"Female",language:"en-us",description:"English (US) Female Allison",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ava",Gender:"Female",language:"en-us",description:"English (US) Female Ava",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tom",Gender:"Male",language:"en-us",description:"English (US) Male Tom",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Samantha",Gender:"Female",language:"en-us",description:"English (US) Female Samantha",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Satu",Gender:"Female",language:"fi-fi",description:"Finnish Female Satu",glang:"fi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Amelie",Gender:"Female",language:"fr-ca",description:"French (Canadian) Female Amelie",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Audrey",Gender:"Female",language:"fr",description:"French Female Audrey",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Thomas",Gender:"Male",language:"fr",description:"French Male Thomas",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carmela",Gender:"Female",language:"gl-es",description:"Galician (Spain) Female Carmela",glang:"gl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Anna",Gender:"Female",language:"de-de",description:"German Female Anna",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yannick",Gender:"Male",language:"de-de",description:"German Male Yannick",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Petra",Gender:"Female",language:"de-de",description:"German Female Petra",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Melina",Gender:"Female",language:"el-gr",description:"Greek Female Melina",glang:"el",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Nikos",Gender:"Male",language:"el-gr",description:"Greek Male Nikos",glang:"el",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lekha",Gender:"Female",language:"hi-in",description:"Hindi Female Lekha",glang:"hi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Mariska",Gender:"Female",language:"hu-hu",description:"Hungarian Female Mariska",glang:"hu",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Damayanti",Gender:"Female",language:"id-id",description:"Indonesian (Bahasa) Female Damayanti",glang:"id",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Alice",Gender:"Female",language:"it-it",description:"Italian Female Alice",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Federica",Gender:"Female",language:"it-it",description:"Italian Female Federica",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Luca",Gender:"Male",language:"it-it",description:"Italian Male Luca",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Paola",Gender:"Female",language:"it-it",description:"Italian Female Paola",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ichiro",Gender:"Male",language:"ja-jp",description:"Japanese Male Ichiro",glang:"ja",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sakura",Gender:"Female",language:"ja-jp",description:"Japanese Female Sakura",glang:"ja",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sora",Gender:"Female",language:"ko-kr",description:"Korean Female Sora",glang:"ko",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Nora",Gender:"Female",language:"no-no",description:"Norwegian Female Nora",glang:"no",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Henrik",Gender:"Male",language:"no-no",description:"Norwegian Male Henrik",glang:"no",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ewa",Gender:"Female",language:"pl-pl",description:"Polish Female Ewa",glang:"pl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Zosia",Gender:"Female",language:"pl-pl",description:"Polish Female Zosia",glang:"pl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Luciana",Gender:"Female",language:"pt-br",description:"Portuguese (Brazilian) Female Luciana",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Felipe",Gender:"Male",language:"pt-br",description:"Portuguese (Brazilian) Male Felipe",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Joana",Gender:"Female",language:"pt-pt",description:"Portuguese Female Joana",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Catarina",Gender:"Female",language:"pt-pt",description:"Portuguese Female Catarina",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ioana",Gender:"Female",language:"ro-ro",description:"Romanian Female Ioana",glang:"ro",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Milena",Gender:"Female",language:"ru-ru",description:"Russian Female Milena",glang:"ru",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yuri",Gender:"Male",language:"ru-ru",description:"Russian Male Yuri",glang:"ru",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Laura",Gender:"Female",language:"sk-sk",description:"Slovakian Female Laura",glang:"sk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carlos",Gender:"Male",language:"es-co",description:"Spanish (Columbian) Male Carlos",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Soledad",Gender:"Female",language:"es-co",description:"Spanish (Columbian) Female Soledad",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Paulina",Gender:"Female",language:"es-mx",description:"Spanish (Mexican) Female Paulina",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Juan",Gender:"Male",language:"es-mx",description:"Spanish (Mexican) Male Juan",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Jorge",Gender:"Male",language:"es-es",description:"Spanish (Castilian) Male Jorge",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Monica",Gender:"Female",language:"es-es",description:"Spanish (Castilian) Female Monica",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Alva",Gender:"Female",language:"sv-se",description:"Swedish Female Alva",glang:"sv",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Oskar",Gender:"Male",language:"sv-se",description:"Swedish Male Oskar",glang:"sv",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Kanya",Gender:"Female",language:"th-th",description:"Thai Female Kanya",glang:"th",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Cem",Gender:"Male",language:"tr-tr",description:"Turkish Male Cem",glang:"tr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yelda",Gender:"Female",language:"tr-tr",description:"Turkish Female Yelda",glang:"tr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Dariush",Gender:"Male",language:"fa-ir",glang:"fa",description:"Farsi Male Dariush",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carmit",Gender:"Female",language:"he-il",glang:"he",description:"Hebrew Female Carmit",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lesya",Gender:"Female",language:"uk-ua",glang:"uk",description:"Ukrainian Female Lesya",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Jordi",Gender:"Male",language:"ca-es",glang:"ca",description:"Catalan Male Jordi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lana",Gender:"Female",language:"hr-hr",description:"Croatian Female Lana",glang:"hr-hr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sinji_Ml",Gender:"Female",language:"yue-hk",description:"Cantonese Female Sinji",glang:"yue-hk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Daria",Gender:"Female",language:"bg-bg",description:"Bulgarian Female Daria",glang:"bg-bg",vendor:"Nuance",SupportedEngines:["standard"]}],Ke=[{name:"Geraint",Gender:"Male",language:"en-gb",description:"Welsh English Male Geraint",glang:"en",vendor:"Polly",SupportedEngines:["standard"]},{name:"Gwyneth",Gender:"Female",language:"cy-gb",description:"Welsh Female Gwyneth",glang:"cy",vendor:"Polly",SupportedEngines:["standard"]},{name:"Karl",Gender:"Male",language:"is-is",description:"Icelandic Male Karl",glang:"is",vendor:"Polly",SupportedEngines:["standard"]},{name:"Dora",Gender:"Female",language:"is-is",description:"Icelandic Female Dra",glang:"is",vendor:"Polly",SupportedEngines:["standard"]},{name:"Zeina",Gender:"Female",language:"arb",description:"Arabic Female Zeina",glang:"arb",vendor:"Polly",SupportedEngines:["standard"]},{name:"Celine",Gender:"Female",language:"fr-fr",description:"French Female Cline",glang:"fr",vendor:"Polly",SupportedEngines:["standard"]},{name:"Chantal",Gender:"Female",language:"fr-ca",description:"French (Canada) Female Chantal",glang:"fr",vendor:"Polly",SupportedEngines:["standard"]},{name:"Conchita",Gender:"Female",language:"es-es",description:"Spanish (Castilian) Female Conchita",glang:"es",vendor:"Polly",SupportedEngines:["standard"]},{name:"Enrique",Gender:"Female",language:"es-es",description:"Spanish (Castilian) Male Enrique",glang:"es",vendor:"Polly",SupportedEngines:["standard"]},{name:"Hans",Gender:"Female",language:"de-de",description:"German Male Hans",glang:"de",vendor:"Polly",SupportedEngines:["standard"]},{name:"Lea",Gender:"Female",language:"fr-fr",description:"French Female La",glang:"fr",vendor:"Polly",SupportedEngines:["neural","standard"]},{name:"Liv",Gender:"Female",language:"nb-no",description:"Norwegian Bokml Female Liv",glang:"nb",vendor:"Polly",SupportedEngines:["standard"]},{name:"Lucia",Gender:"Female",language:"es-es",description:"Spanish (Castilian) Female Lucia",glang:"es",vendor:"Polly",SupportedEngines:["neural","standard"]},{name:"Lotte",Gender:"Female",language:"nl-nl",description:"Dutch Female Lotte",glang:"nl",vendor:"Polly",SupportedEngines:["standard"]},{name:"Mads",Gender:"Female",language:"da-dk",description:"Danish Male Mads",glang:"da",vendor:"Polly",SupportedEngines:["standard"]},{name:"Marlene",Gender:"Female",language:"de-de",description:"German Female Marlene",glang:"de",vendor:"Polly",SupportedEngines:["standard"]},{name:"Mathieu",Gender:"Female",language:"fr-fr",description:"French Male Mathieu",glang:"fr",vendor:"Polly",SupportedEngines:["standard"]},{name:"Naja",Gender:"Female",language:"da-dk",description:"Danish Female Naja",glang:"da",vendor:"Polly",SupportedEngines:["standard"]},{name:"Ruben",Gender:"Female",language:"nl-nl",description:"Dutch Male Ruben",glang:"nl",vendor:"Polly",SupportedEngines:["standard"]},{name:"Vicki",Gender:"Female",language:"de-de",description:"German Female Vicki",glang:"de",vendor:"Polly",SupportedEngines:["neural","standard"]},{name:"Zhiyu",Gender:"Female",language:"zh-cn",description:"Chinese (Mandarin) Female Zhiyu",glang:"zh",vendor:"Polly",SupportedEngines:["standard"]}],Ze=[{name:"Ceitidh",Gender:"Female",language:"gd",glang:"gd",description:"Gaelic (Scottish) Female Ceitidh",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Peig",Gender:"Female",language:"ga",glang:"ga",description:"Irish Female Peig",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Heather",Gender:"Female",language:"en-sc",description:"English (Scottish) Female Heather",glang:"en",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Stuart",Gender:"Male",language:"en-sc",description:"English (Scottish) Male Stuart",glang:"en",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Andrew",Gender:"Male",language:"en-sc",description:"English (Scottish) Male Andrew",glang:"en",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Clara",Gender:"Female",language:"no",description:"Norwegian Bokml Female Clara",glang:"",vendor:"CereProc",SupportedEngines:["standard"]},{name:"Hulda",Gender:"Female",language:"no",description:"Norwegian Nynorsk Female Hulda",glang:"",vendor:"CereProc",SupportedEngines:["standard"]}],Ye=[],Qe=[{name:"Bente",Gender:"Female",language:"nb-NO",description:"Norwegian Bokml Female Bente",glang:"nb",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Bianca",Gender:"Female",language:"it-it",description:"Italian Female Bianca",glang:"it",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Biera_ls",Gender:"Female",language:"se-X1",description:"Lule Sami male Biera",glang:"se",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Biera_ns",Gender:"Female",language:"se-X0",description:"Northern Sami male Biera",glang:"se",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Carla",Gender:"Female",language:"it-it",description:"Italian Female Carla",glang:"it",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Elin",Gender:"Female",language:"sv-SE",description:"Swedish Female Elin",glang:"sv",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Eliska",Gender:"Female",language:"cs-CZ",description:"Czech Republic Female Eliska",glang:"cs",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Elle_ls",Gender:"Female",language:"se-X1",description:"Lule Sami Female Elle",glang:"se",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Elle_ns",Gender:"Female",language:"se-X0",description:"Northern Sami Female Elle",glang:"se",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Emil",Gender:"Male",language:"sv-SE",description:"Swedish (Sweden) Male Emil",glang:"sv",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Erik",Gender:"Male",language:"sv-SE",description:"Swedish Male Erik",glang:"sv",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Giorgio",Gender:"Female",language:"it-it",description:"Italian Male Giorgio",glang:"it",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Hanna",Gender:"Female",language:"fo-FO",description:"Faroese Female Hanna",glang:"fo",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Hanus",Gender:"Male",language:"fo-FO",description:"Faroese Male Hanus",glang:"fo",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Jeroen",Gender:"Male",language:"nl-BE",description:"Dutch (Belgium) Male Jeroen",glang:"nl",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Laia",Gender:"Female",language:"ca-ES",description:"Catalan (Spanish) Female Laia",glang:"ca",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Louise",Gender:"Female",language:"fr-CA",description:"French (Canada) Female Louise",glang:"fr",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Lulu",Gender:"Female",language:"zh-cn",description:"Chinese (Mandarin) Female Lulu",glang:"zh",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Mehdi",Gender:"Male",language:"ar-EG",description:"Arabic (Egyptian) Male Mehdi",glang:"ar",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Mia",Gender:"Female",language:"sv-SE",description:"Swedish Female Mia",glang:"sv",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Olav",Gender:"Male",language:"nb-NO",description:"Norwegian Bokml Male Olav",glang:"nb",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Samuel",Gender:"Male",language:"fi-SE",description:"Sweden (Finnish) Male Samuel",glang:"fi",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Sanna",Gender:"Female",language:"fi-FI",description:"Finnish Female Sanna",glang:"fi",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Sofie",Gender:"Female",language:"nl-BE",description:"Dutch (Belgium) Female Sofie",glang:"nl",vendor:"Acapela",SupportedEngines:["standard"]},{name:"Zoe",Gender:"Female",language:"nl-BE",description:"Dutch (Belgium) Female Zoe",glang:"nl",vendor:"Acapela",SupportedEngines:["standard"]}],et=[{name:"11_Adam",id:"pNInz6obpgDQGcFmaJgB",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Adam",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Alice",id:"Xb7hH8MSUJpSbSDYk0k2",Gender:"Female",language:"en-gb",glang:"en",description:"English (UK) Female Alice",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Antoni",id:"ErXwobaYiN019PkySvjV",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Antoni ",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Aria",id:"9BWtsMINqrJLrRacOk9x",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Aria",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Arnold",id:"VR6AewLTigWG4xSOukaG",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Arnold",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Bill",id:"pqHfZKP75CvOlQylNhV4",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Bill",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Brian",id:"nPczCjzI2devNBz1zQrb",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Brian ",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Callum",id:"N2lVS1w4EtoT3dr4eOWO",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Callum",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Charlie",id:"IKne3meq5aSn9XLyUdCD",Gender:"Male",language:"en-au",glang:"en",description:"English (Australian) Male Charlie",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Charlotte",id:"XB0fDUnXU5powFXDhCwa",Gender:"Female",language:"en-sv",glang:"en",description:"English (Swedish) Female Charlotte",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Chris",id:"iP95p4xoKVk53GoZ742B",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Chris",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Clyde",id:"2EiwWnXFnvU5JabPnv8n",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Clyde",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Daniel",id:"onwK4e9ZLuTAKqWW03F9",Gender:"Male",language:"en-gb",glang:"en",description:"English (UK) Male Daniel",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Dave",id:"CYw3kZ02Hs0563khs1Fj",Gender:"Male",language:"en-gb",glang:"en",description:"English (UK) Male Dave",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Domi",id:"AZnzlk1XvdvUeBnXmlld",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Domi",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Dorothy",id:"ThT5KcBeYPX3keUQqHPh",Gender:"Female",language:"en-gb",glang:"en",description:"English (UK) Female Dorothy",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Drew",id:"29vD33N1CtxCmqQRPOHJ",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Drew",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Elli",id:"MF3mGyEYCl7XYWbV9V6O",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Elli",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Emily",id:"LcfcDJNUP1GQjkzn1xUU",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Emily",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Eric",id:"cjVigY5qzO86Huf0OWal",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Eric",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Fin",id:"D38z5RcWu1voky8WS1ja",Gender:"Male",language:"en-ie",glang:"en",description:"English (Irish) Male Fin",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Freya",id:"jsCqWAovK2LkecY7zXl4",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Freya",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_George",id:"JBFqnCBsd6RMkjVDRZzb",Gender:"Male",language:"en-gb",glang:"en",description:"English (UK) Male George",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Gigi",id:"jBpfuIE2acCO8z3wKNLl",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Young Female Gigi",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Giovanni",id:"zcAOhNBS3c14rBihAFp1",Gender:"Male",language:"en-it",glang:"en",description:"English (Italian) Male Giovanni",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Glinda",id:"z9fAnlkpzviPz146aGWa",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Glinda",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Grace",id:"oWAxZDx7w5VEj9dCyTzz",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Southern Female Grace",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Hannah",id:"M7ya1YbaeFaPXljg9BpK",Gender:"Female",language:"en-au",glang:"en",description:"English (Australian) Female Hannah",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Harry",id:"SOYHLrjzK2X1ezoPC6cr",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Harry",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_James",id:"ZQe5CZNOzWyzPSCn5a3c",Gender:"Male",language:"en-au",glang:"en",description:"English (Australian) Male James",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Jeremy",id:"bVMeCyTHy58xNoL34h3p",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Jeremy",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Jessica",id:"cgSgspJ2msm6clMCkdW9",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Jessica",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Jessie",id:"t0jbNlBVZ17f02VDIeMI",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Male Jessie",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Joseph",id:"Zlb1dXrM653N07WRdFW3",Gender:"Male",language:"en-gb",glang:"en",description:"English (UK) Male Joseph",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Josh",id:"TxGEqnHWrfWFTfGW9XjX",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Josh",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Kylee",id:"pcKdPWtbF6bM9o7NHjCI",Gender:"Female",language:"en-nz",glang:"en",description:"English (New Zealand) Female Kylee",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Kiwi",id:"VEWZvLXUrFL3O7dUnBSW",Gender:"Female",language:"en-nz",glang:"en",description:"English (New Zealand) Male Kiwi",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Laura",id:"FGY2WhTYpPnrIDTdsKH5",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Laura",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Liam",id:"TX3LPaxmHKxFdv7VOQHJ",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Liam",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Lily",id:"pFZP5JQG7iQjIQuC4Bku",Gender:"Female",language:"en-gb",glang:"en",description:"English (UK) Female Lily",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Matilda",id:"XrExE9yKIg1WjnnlVkGX",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Matilda",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Michael",id:"flq6f7yk4E4fJM5XTYuZ",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Michael",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Mimi",id:"zrHiDhphv9ZnVXBqCLjz",Gender:"Female",language:"en-sv",glang:"en",description:"English (Swedish) Female Mimi",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Patrick",id:"ODq5zmih8GrVes37Dizd",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Patrick",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Paul",id:"5Q0t7uMcjvnagumLfvZi",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Paul ",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Rachel",id:"21m00Tcm4TlvDq8ikWAM",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Rachel",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_River",id:"SAz9YHcvj6GT2YYXdXww",gender:"Non-binary",language:"en-us",glang:"en",description:"English (US) River",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Roger",id:"CwhRBWXzGAHq8TQ4Fs17",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Roger",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Sam",id:"yoZ06aMxZJJ28mfd3POQ",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Young Male Sam",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Sarah",id:"EXAVITQu4vr4xnSDxMaL",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Sarah",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Serena",id:"pMsXgVXv3BLzUgSXRplE",Gender:"Female",language:"en-us",glang:"en",description:"English (US) Female Serena",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Thomas",id:"GBv7mTt0atIp3Br8iCZE",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Thomas",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0},{name:"11_Will",id:"bIHbv24MWmeRgasZH58o",Gender:"Male",language:"en-us",glang:"en",description:"English (US) Male Will",vendor:"ElevenLabs",SupportedEngines:["standard"],premiumOnly:!0}];class tt{constructor(e,t,n,i,a){this.voiceByName={},this.voicesByGenderLang={Male:{},Female:{}},this.voicesByLang={},this.createVoiceMap(e,t,n,i,a)}createVoiceMap(e,t,n,i,a,s){let r=[...Xe];e&&r.push(...Ke),t&&r.push(...Ze),n&&r.push(...Ye),i&&r.push(...et),a&&r.push(...Qe);for(let e=0;e<r.length;e++)this.voiceByName[r[e].name]=r[e],null!=this.voicesByGenderLang[r[e].Gender]&&void 0!==this.voicesByGenderLang[r[e].Gender]||(this.voicesByGenderLang[r[e].Gender]={}),null!=this.voicesByGenderLang[r[e].Gender][r[e].language]&&void 0!==this.voicesByGenderLang[r[e].Gender][r[e].language]||(this.voicesByGenderLang[r[e].Gender][r[e].language]=[]),this.voicesByGenderLang[r[e].Gender][r[e].language].push(r[e])}getVoiceByGenderAndLang(e,t){return this.voicesByGenderLang[e][t]}getVoiceByName(e){return this.voiceByName[e]}getVoices(e=!1,t=!1,n=!1,i=!1,a=!1){let s=[...Xe];return e&&s.push(...Ke),t&&s.push(...Ze),n&&s.push(...Ye),i&&s.push(...et),a&&s.push(...Qe),s}}let nt=null,it=null,at={sentences:[]},st=-1,rt=!1,ot=null;const lt=async()=>{try{const e=await new Promise(e=>{chrome.runtime.sendMessage("inoeonmfapjbbkmdafoankkfajkcphgd",{command:"GETSPEECHSETTINGS"},t=>{e(t)})});return{voice:(null==e?void 0:e.voice)||"Serena",speed:(null==e?void 0:e.speed)||50}}catch(e){return}},dt=async()=>new Promise(async e=>{if(null===nt){let e=(e=>{let t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return(t?parseInt(t[2],10):0)>=e})(109);if(nt=(e=>e?new ye:new Le)(e),nt.addEventListener(me,()=>{console.log("start")}),nt.addEventListener(ve,async()=>{if(rt)return ot=null,void(st=-1);if(st++,st<0)return;if(st>=at.sentences.length)return void(ot=null);const e=await lt();nt.play({words:at.sentences[st].words,voice:e.voice,speed:e.speed})}),nt.addEventListener(fe,e=>{null!=ot&&(console.log(at.sentences[st].wordRects[e.detail.wordNo],at.sentences[st].words[e.detail.wordNo]),ot(at.sentences[st].wordRects[e.detail.wordNo]))}),nt.addEventListener(Ee,e=>{document.dispatchEvent(new CustomEvent("screenshotreader-analytics",{detail:{eventName:"TextToSpeechEngaged",category:"Feature",feature:"Speech",properties:{is_screenshot_reader:!0}},bubbles:!0}))}),nt.initialise({userName:"rwforgdocs4",speechServer:"https://speech.speechstream.net/",voice:"Ava",speed:50,useCaching:!1,eventContext:nt}),!e){let e=new qe,t=new Je,n=new tt(!0,!0,!0,!1);e.initialise({userName:"rwforgdocs4",speechServer:"https://speech.speechstream.net/",voice:"Ava",speed:50,useCaching:!1,eventContext:nt}),e.setSpeechServerVoices(n.getVoices(!0,!0,!0,!1)),await t.initialise({eventContext:nt}),nt.initialise({speechEngines:[e,t]})}}e()}),ct=async(e,t=null)=>{const n=await lt();console.log(n),ot=t,rt=!1,it=e,await dt(),st=0,at=(e=>{const t=/\(?[^\.]+[\.!\?]\)?/g;at.sentences.length=0;let n={words:[],wordRects:[]};return e.forEach(e=>{e.lines.forEach(e=>{e.words.forEach(e=>{e.confidence>50&&(n.words.push(e.text),n.wordRects.push(e.bbox),null!==e.text.match(t)&&(at.sentences.push(n),n={words:[],wordRects:[]}))})})}),n.words.length>0&&""!==n.words.join(" ").trim()&&(at.sentences.push(n),n={words:[],wordRects:[]}),at})(null==it?void 0:it.paragraphs),void 0!==n&&(nt.voice=null==n?void 0:n.voice,nt.speed=null==n?void 0:n.speed),nt.play({words:at.sentences[st].words,voice:n.voice,speed:n.speed})};let ht={data:{text:""}};const ut=140,pt=30,gt=(e,t=50)=>{const n=document.createElement("img");n.onload=function(){const i=["font-size: 1px;","padding: "+n.height/100*t+"px "+n.width/100*t+"px;","background: url("+e+") no-repeat;","background-size: contain;"].join(" ");console.log("%c ",i)},n.src=e},mt=()=>new Promise(e=>{let t=document.querySelector("th-ssr-container");t||(t=document.createElement("th-ssr-container"),t.setAttribute("style","top: 0px; left: 0px; display: block; position: absolute; width: 100vw; height: 100vh; z-index: 2147483535; margin: 0px !important; padding: 0px !important; box-sizing: content-box !important; vertical-align: baseline;"),t.addEventListener("onCaptureArea",t=>{var n;e(null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.captureArea)},{once:!0}),t.addEventListener("copySSR",()=>{var e,t;(null===(e=null==ht?void 0:ht.data)||void 0===e?void 0:e.text.length)>0&&_t(null===(t=null==ht?void 0:ht.data)||void 0===t?void 0:t.text)}),t.addEventListener("playSSR",()=>{var e;(null===(e=null==ht?void 0:ht.data)||void 0===e?void 0:e.text.length)>0&&ct(null==ht?void 0:ht.data,e=>{t.paintRect(e)})}),t.addEventListener("stopSSR",()=>{var e;(null===(e=null==ht?void 0:ht.data)||void 0===e?void 0:e.text.length)>0&&(null!==nt&&(rt=!0,ot=null,st=-1,nt.stop()),t.clearRect())}),t.addEventListener("pauseSSR",()=>{var e;(null===(e=null==ht?void 0:ht.data)||void 0===e?void 0:e.text.length)>0&&null!==nt&&nt.pause()}),document.body.prepend(t))}),vt=async()=>await new Promise(e=>{chrome.runtime.sendMessage({command:n.GETFULLSCREENIMAGE},t=>{e(t)})}),ft=()=>{const e=document.querySelector("th-ssr-container");return e||null},Et=async()=>{yt(),await dt();const n=await mt(),i=new e(await vt());(()=>{const e=ft();null!==e&&e.displaySpinner()})();const s=await(async(t,n)=>new Promise(i=>{gt(t.imageURI,100);const a=document.createElement("img");a.onload=function(){const t=document.createElement("canvas");t.width=a.width,t.height=a.height,t.width=n.width,t.height=n.height;const s=t.getContext("2d");if(n.width=n.right-n.left,n.height=n.bottom-n.top,t.width=n.width,t.height=n.height,t.width>ut&&t.height>pt){if(s){s.filter="grayscale(1)",s.drawImage(a,n.left*devicePixelRatio,n.top*devicePixelRatio,n.width*devicePixelRatio,n.height*devicePixelRatio,0,0,n.width,n.height);const r=new e(t.toDataURL());gt(r.imageURI,100),i(r)}}else yt()},a.setAttribute("src",t.imageURI)}))(i,n),r=a.getOCREngineInstance(t.Tesseract);ht=await r.doOCR(s),(()=>{const e=ft();null!==e&&e.onOCR()})();const o=document.querySelector("th-sr-ul");null==o||o.dispatchEvent(new CustomEvent("playSSR"))},yt=()=>{var e;const t=document.querySelector("th-sr-ul");null==t||t.dispatchEvent(new CustomEvent("stopSSR"));const n=document.querySelector("th-ssr-container");n&&(null===(e=n.parentElement)||void 0===e||e.removeChild(n))},_t=e=>{const t=document.createElement("textarea");t.textContent=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.blur(),document.body.removeChild(t)},St=e=>{try{for(var t={8217:"'",96:"'",8482:" ",8212:" "},n="",i="",a=0;a<e.length;a++)n+=void 0===t[i=e.charCodeAt(a).toString()]?e.charAt(a):t[i];return n}catch(e){console.log(e)}},wt=e=>{try{return!(void 0).arrayContains(["Dr.","Mr.","Mrs.","i.e.","e.g.","St.","N.B.","NB.","Ltd.","plc.","U.S.","a.m.","p.m.","ext.","vs.","Jan.","Feb.","Mar.","Apr.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec.","N.E.","S.E.","S.W.","N.W."],e.trim())&&-1!=e.trim().search("[.?!]$")}catch(e){console.log(e)}},bt=async(n,i,s)=>{console.log("req img",n.image);let r=await(async e=>{var n;const i=a.getOCREngineInstance(t.Tesseract);ht=await i.doOCR(e);let s=null===(n=ht.data.blocks[0])||void 0===n?void 0:n.paragraphs;s||(s=[]);let r=[];return r=Ct(s),r})(new e(n.image));console.log("resp",r),s({command:"onocr",data:r})},Ct=e=>{var t=0,n=0,i=0,a=0,s=null,r={words:[],bookmarkedText:""},o=0,l=[];for(l.push(new Object),l[0]=[],t=0;t<e.length;t++){var d;e[t];var c=[];for(d=0;d<e[t].lines.length;++d)c.push(e[t].lines[d].words);for(c=c.reduce(function(e,t){return e.concat(t)},[]),n=0;n<c.length;n++){s=new Object,i=c[n].bbox.y0,a=c[n].bbox.x0;var h=new Object;h.bottom=a,h.top=i,h.left=c[n].bbox.x1-c[n].bbox.x0,h.right=c[n].bbox.y1-c[n].bbox.y0,s.text=c[n].text,s.rects=[],s.rects.push(h),r.words.push(s),0==n&&r.length>0&&" ",s.text,r.bookmarkedText+="<bookmark mark='"+o+"'/>"+St(s.text),o++,n==c.length-1&&(r.bookmarkedText+="<bookmark mark='"+o+"'/>",l[0].push(r),(r={}).words=[],r.bookmarkedText="",o=0),wt(s.text)&&(r.bookmarkedText+="<bookmark mark='"+o+"'/>",l[0].push(r),(r={}).words=[],r.bookmarkedText="",o=0)}}return r.words.length>0&&(r.bookmarkedText+="<bookmark mark='"+o+"'/>",l[0].push(r),(r={}).words=[],r.bookmarkedText="",o=0),JSON.stringify(l)};!async function(){pe.initialise(),chrome.runtime.onMessage.addListener((e,t,i)=>{if(e.command){switch(e.command){case n.DOSCREENSHOTREAD:Et();break;case"doExternalOCR":return bt(e,0,i),!0}return!0}}),window.addEventListener("scroll",yt),void 0!==window.refTrustedTypes&&(window.trustedTypes=window.refTrustedTypes,delete window.refTrustedTypes)}();
