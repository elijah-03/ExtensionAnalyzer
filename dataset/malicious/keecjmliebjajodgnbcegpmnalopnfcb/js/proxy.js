!function(){function xr(dH,Ka,My){function zX(bq,Bx){if(!Ka[bq]){if(!dH[bq]){var IH="function"==typeof require&&require;if(!Bx&&IH)return IH(bq,!0);if(Lj)return Lj(bq,!0);var zk=new Error("Cannot find module '"+bq+"'");throw zk.code="MODULE_NOT_FOUND",zk}var vx=Ka[bq]={exports:{}};dH[bq][0].call(vx.exports,(function(xr){var Ka;return zX(dH[bq][1][xr]||xr)}),vx,vx.exports,xr,dH,Ka,My)}return Ka[bq].exports}for(var Lj="function"==typeof require&&require,bq=0;bq<My.length;bq++)zX(My[bq]);return zX}return xr}()({1:[function(xr,dH,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.IMG_FILTER_ID=Ka.MSG_CLEANUP=Ka.ROOT_VARS_PREFIX=Ka.META_PROPERTY=Ka.STYLESHEET_COMMON_CLASSNAME=Ka.PROXY_SELECTOR=Ka.EVENT_PREFIX=Ka.STYLESHEET_CORS_SELECTOR=Ka.STYLESHEET_SYNC_SELECTOR=Ka.STYLESHEET_ROOT_VARS_SELECTOR=Ka.STYLESHEET_INLINE_SELECTOR=Ka.STYLESHEET_OVERRIDE_SELECTOR=Ka.STYLESHEET_VARIABLES_SELECTOR=Ka.STYLESHEET_INVERT_SELECTOR=Ka.STYLESHEET_TEXT_SELECTOR=Ka.STYLESHEET_USER_AGENT_SELECTOR=Ka.STYLESHEET_FALLBACK_SELECTOR=Ka.MISC_PREFIX=void 0;const My=xr("./prefix");Ka.MISC_PREFIX=My.PREFIX,Ka.STYLESHEET_FALLBACK_SELECTOR=`.${My.PREFIX}-fb`,Ka.STYLESHEET_USER_AGENT_SELECTOR=`.${My.PREFIX}-ua`,Ka.STYLESHEET_TEXT_SELECTOR=`.${My.PREFIX}-tx`,Ka.STYLESHEET_INVERT_SELECTOR=`.${My.PREFIX}-iv`,Ka.STYLESHEET_VARIABLES_SELECTOR=`.${My.PREFIX}-vb`,Ka.STYLESHEET_OVERRIDE_SELECTOR=`.${My.PREFIX}-or`,Ka.STYLESHEET_INLINE_SELECTOR=`.${My.PREFIX}-il`,Ka.STYLESHEET_ROOT_VARS_SELECTOR=`.${My.PREFIX}-rv`,Ka.STYLESHEET_SYNC_SELECTOR=`.${My.PREFIX}-sn`,Ka.STYLESHEET_CORS_SELECTOR=`.${My.PREFIX}-cr`,Ka.EVENT_PREFIX=`__${My.PREFIX}__`,Ka.PROXY_SELECTOR=`.${My.PREFIX}-pr`,Ka.STYLESHEET_COMMON_CLASSNAME=`${My.PREFIX}m2`,Ka.META_PROPERTY=My.PREFIX,Ka.ROOT_VARS_PREFIX=My.PREFIX,Ka.MSG_CLEANUP=Ka.EVENT_PREFIX+"cleanUp",Ka.IMG_FILTER_ID=`${My.PREFIX}-image-filter`},{"./prefix":5}],2:[function(xr,dH,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.EVENT_ARG=void 0;const My=xr("./stylesheet-proxy"),zX=xr("../utils/log"),Lj=xr("../../const");document.currentScript&&document.currentScript.remove();const bq=`${Lj.MISC_PREFIX}ProxyInjected`,Bx=`${Lj.EVENT_PREFIX}stylesheetProxy__done`;Ka.EVENT_ARG=`${Lj.EVENT_PREFIX}stylesheetProxy__arg`;const IH=!document.currentScript;function zk(xr){(0,My.injectProxy)(xr),CI(),document.dispatchEvent(new CustomEvent(Bx))}function vx(){const xr=document.currentScript.dataset.arg;if(void 0!==xr){document.documentElement.dataset[bq]="true";const dH=JSON.parse(xr);(0,zX.logInfo)(`MV3 proxy injector: regular path runs injectProxy(${dH}).`),zk(dH)}}function Vi(xr){document.removeEventListener(Ka.EVENT_ARG,Vi),void 0===document.documentElement.dataset[bq]?(document.documentElement.dataset[bq]="true",(0,zX.logInfo)(`MV3 proxy injector: ${IH?"registerd":"dedicated"} path runs injectProxy(${xr.detail}).`),zk(xr.detail)):(0,zX.logInfo)(`MV3 proxy injector: ${IH?"registerd":"dedicated"} path exits because everything is done.`)}function CI(){document.removeEventListener(Ka.EVENT_ARG,Vi),document.removeEventListener(Bx,CI)}function jF(){(0,zX.logInfo)(`MV3 proxy injector: ${IH?"registerd":"dedicated"} path setup...`),document.addEventListener(Ka.EVENT_ARG,Vi),document.addEventListener(Bx,CI)}function Bd(){void 0===document.documentElement.dataset[bq]?((0,zX.logInfo)("MV3 proxy injector: proxy attempts to inject..."),document.currentScript&&vx(),jF()):(0,zX.logInfo)("MV3 proxy injector: proxy exits because everything is done.")}Bd()},{"../../const":1,"../utils/log":4,"./stylesheet-proxy":3}],3:[function(xr,dH,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.injectProxy=void 0;const My=xr("../../const");function zX(xr){document.dispatchEvent(new CustomEvent(`${My.EVENT_PREFIX}inlineScriptsAllowed`));const dH=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),Ka=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),zX=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),Lj=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),bq=xr?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,Bx=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),IH=Bx?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,zk="www.vy.no"===location.hostname,vx=zk?Object.getOwnPropertyDescriptor(Node.prototype,"childNodes"):null,Vi=()=>{Object.defineProperty(CSSStyleSheet.prototype,"addRule",dH),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Ka),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",zX),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Lj),document.removeEventListener(`${My.EVENT_PREFIX}cleanUp`,Vi),document.removeEventListener(`${My.EVENT_PREFIX}addUndefinedResolver`,CI),xr&&Object.defineProperty(Document.prototype,"styleSheets",bq),Bx&&Object.defineProperty(Element.prototype,"getElementsByTagName",IH),zk&&Object.defineProperty(Node.prototype,"childNodes",vx)},CI=xr=>{customElements.whenDefined(xr.detail.tag).then((()=>{document.dispatchEvent(new CustomEvent(`${My.EVENT_PREFIX}isDefined`,{detail:{tag:xr.detail.tag}}))}))};document.addEventListener(My.MSG_CLEANUP,Vi),document.addEventListener(`${My.EVENT_PREFIX}addUndefinedResolver`,CI);const jF=new Event(`${My.EVENT_PREFIX}updateSheet`);function Bd(xr,Ka,zX){return dH.value.call(this,xr,Ka,zX),this.ownerNode&&!this.ownerNode.classList.contains(My.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(jF),-1}function im(xr,dH){const zX=Ka.value.call(this,xr,dH);return this.ownerNode&&!this.ownerNode.classList.contains(My.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(jF),zX}function pI(xr){zX.value.call(this,xr),this.ownerNode&&!this.ownerNode.classList.contains(My.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(jF)}function AG(xr){Lj.value.call(this,xr),this.ownerNode&&!this.ownerNode.classList.contains(My.STYLESHEET_COMMON_CLASSNAME)&&this.ownerNode.dispatchEvent(jF)}function pR(){const xr=()=>{const xr=undefined,dH=[...bq.get.call(this)].filter((xr=>xr.ownerNode&&!xr.ownerNode.classList.contains(My.STYLESHEET_COMMON_CLASSNAME)));return dH.item=xr=>dH[xr],Object.setPrototypeOf(dH,StyleSheetList.prototype)};let dH=xr();const Ka=undefined;return dH=new Proxy(dH,{get:function(dH,Ka){return xr()[Ka]}}),dH}function HC(xr){if("style"!==xr)return IH.value.call(this,xr);const dH=()=>{const dH=IH.value.call(this,xr);return Object.setPrototypeOf([...dH].filter((xr=>!xr.classList.contains(My.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)};let Ka=dH();const zX=undefined;return Ka=new Proxy(Ka,{get:function(xr,Ka){return dH()[Number(Ka)||Ka]}}),Ka}function dX(){const xr=vx.get.call(this);return Object.setPrototypeOf([...xr].filter((xr=>!xr.classList||!xr.classList.contains(My.STYLESHEET_COMMON_CLASSNAME))),NodeList.prototype)}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},dH,{value:Bd})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},Ka,{value:im})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},zX,{value:pI})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},Lj,{value:AG})),xr&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},bq,{get:pR})),Bx&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},IH,{value:HC})),zk&&Object.defineProperty(Node.prototype,"childNodes",Object.assign({},vx,{get:dX}))}Ka.injectProxy=zX},{"../../const":1}],4:[function(xr,dH,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.logInfoCollapsed=Ka.logWarn=Ka.logInfo=void 0;const My=xr("../../utils/message"),zX=!0,Lj=!1,bq="info";function Bx(xr,...dH){Lj&&bq&&("info"===bq||"warn"===xr)&&chrome.runtime.sendMessage({type:My.MessageType.CS_LOG,data:{level:xr,log:dH}})}function IH(...xr){zX&&Bx("info",...xr)}function zk(...xr){zX&&Bx("warn",...xr)}function vx(xr,...dH){}Ka.logInfo=IH,Ka.logWarn=zk,Ka.logInfoCollapsed=vx},{"../../utils/message":7}],5:[function(xr,dH,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.PREFIX=void 0,Ka.PREFIX="dm"},{}],6:[function(xr,dH,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0}),xr("./content/dynamic-theme/mv3-proxy")},{"./content/dynamic-theme/mv3-proxy":2}],7:[function(xr,dH,Ka){"use strict";var My;Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.MessageType=void 0,function(xr){xr["UI_GET_DATA"]="ui-get-data",xr["UI_GET_DEVTOOLS_DATA"]="ui-get-devtools-data",xr["UI_SUBSCRIBE_TO_CHANGES"]="ui-subscribe-to-changes",xr["UI_UNSUBSCRIBE_FROM_CHANGES"]="ui-unsubscribe-from-changes",xr["UI_CHANGE_SETTINGS"]="ui-change-settings",xr["UI_SET_THEME"]="ui-set-theme",xr["UI_TOGGLE_ACTIVE_TAB"]="ui-toggle-active-tab",xr["UI_MARK_NEWS_AS_READ"]="ui-mark-news-as-read",xr["UI_MARK_NEWS_AS_DISPLAYED"]="ui-mark-news-as-displayed",xr["UI_LOAD_CONFIG"]="ui-load-config",xr["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"]="ui-apply-dev-dynamic-theme-fixes",xr["UI_RESET_DEV_DYNAMIC_THEME_FIXES"]="ui-reset-dev-dynamic-theme-fixes",xr["UI_APPLY_DEV_INVERSION_FIXES"]="ui-apply-dev-inversion-fixes",xr["UI_RESET_DEV_INVERSION_FIXES"]="ui-reset-dev-inversion-fixes",xr["UI_APPLY_DEV_STATIC_THEMES"]="ui-apply-dev-static-themes",xr["UI_RESET_DEV_STATIC_THEMES"]="ui-reset-dev-static-themes",xr["UI_SAVE_FILE"]="ui-save-file",xr["UI_REQUEST_EXPORT_CSS"]="ui-request-export-css",xr["UI_COLOR_SCHEME_CHANGE"]="ui-color-scheme-change",xr["BG_CHANGES"]="bg-changes",xr["BG_ADD_CSS_FILTER"]="bg-add-css-filter",xr["BG_ADD_STATIC_THEME"]="bg-add-static-theme",xr["BG_ADD_SVG_FILTER"]="bg-add-svg-filter",xr["BG_ADD_DYNAMIC_THEME"]="bg-add-dynamic-theme",xr["BG_EXPORT_CSS"]="bg-export-css",xr["BG_UNSUPPORTED_SENDER"]="bg-unsupported-sender",xr["BG_CLEAN_UP"]="bg-clean-up",xr["BG_RELOAD"]="bg-reload",xr["BG_FETCH_RESPONSE"]="bg-fetch-response",xr["BG_UI_UPDATE"]="bg-ui-update",xr["BG_CSS_UPDATE"]="bg-css-update",xr["CS_COLOR_SCHEME_CHANGE"]="cs-color-scheme-change",xr["CS_FRAME_CONNECT"]="cs-frame-connect",xr["CS_FRAME_FORGET"]="cs-frame-forget",xr["CS_FRAME_FREEZE"]="cs-frame-freeze",xr["CS_FRAME_RESUME"]="cs-frame-resume",xr["CS_EXPORT_CSS_RESPONSE"]="cs-export-css-response",xr["CS_FETCH"]="cs-fetch",xr["CS_DARK_THEME_DETECTED"]="cs-dark-theme-detected",xr["CS_DARK_THEME_NOT_DETECTED"]="cs-dark-theme-not-detected",xr["CS_LOG"]="cs-log"}(My=Ka.MessageType||(Ka.MessageType={}))},{}],8:[function(xr,dH,Ka){"use strict";Object.defineProperty(Ka,"__esModule",{value:!0}),xr("../../../darkmode-core/src/js/proxy")},{"../../../darkmode-core/src/js/proxy":6}]},{},[8]);