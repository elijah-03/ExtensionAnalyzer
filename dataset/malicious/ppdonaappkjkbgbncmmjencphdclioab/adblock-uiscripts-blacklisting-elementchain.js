function ElementChain(t){this._stack=[],this._change_events=[],this._stack.push($(t))}ElementChain.prototype.current=function(){return this._stack[this._stack.length-1]},ElementChain.prototype.moveUp=function(){return this.current().parent().length>0&&"BODY"!=this.current().parent()[0].nodeName&&(this._stack.push(this.current().parent()),this.change(),!0)},ElementChain.prototype.moveDown=function(){return this._stack.length>1&&(this._stack.pop(),this.change(),!0)},ElementChain.prototype.moveTo=function(t){for(;this._stack.length>t+1&&this.moveDown(););for(;this._stack.length<t+1&&this.moveUp(););},ElementChain.prototype.change=function(t,e){if(e)this._change_events.push([t,e]);else for(var n=0;n<this._change_events.length;n++){var h=this._change_events[n];h[1].call(h[0])}};